var KI=Object.create;var Tg=Object.defineProperty;var WI=Object.getOwnPropertyDescriptor;var JI=Object.getOwnPropertyNames;var ZI=Object.getPrototypeOf,XI=Object.prototype.hasOwnProperty;var kd=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),pS=(e,t)=>{for(var r in t)Tg(e,r,{get:t[r],enumerable:!0})},vS=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of JI(t))!XI.call(e,s)&&s!==r&&Tg(e,s,{get:()=>t[s],enumerable:!(n=WI(t,s))||n.enumerable});return e};var Ay=(e,t,r)=>(r=e!=null?KI(ZI(e)):{},vS(t||!e||!e.__esModule?Tg(r,"default",{value:e,enumerable:!0}):r,e)),QI=e=>vS(Tg({},"__esModule",{value:!0}),e);var ES=kd((ak,bS)=>{function mS(e){return Array.isArray(e)?e:[e]}var My="",hS=" ",Oy="\\",rN=/^\s+$/,nN=/(?:[^\\]|^)\\$/,aN=/^\\!/,iN=/^\\#/,oN=/\r?\n/g,sN=/^\.*\/|^\.+$/,ky="/",yS="node-ignore";typeof Symbol<"u"&&(yS=Symbol.for("node-ignore"));var _S=yS,uN=(e,t,r)=>Object.defineProperty(e,t,{value:r}),cN=/([0-z])-([0-z])/g,SS=()=>!1,lN=e=>e.replace(cN,(t,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?t:My),fN=e=>{let{length:t}=e;return e.slice(0,t-t%2)},dN=[[/^\uFEFF/,()=>My],[/((?:\\\\)*?)(\\?\s+)$/,(e,t,r)=>t+(r.indexOf("\\")===0?hS:My)],[/(\\+?)\s/g,(e,t)=>{let{length:r}=t;return t.slice(0,r-r%2)+hS}],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,r)=>t+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(e,t,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return t+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>Oy],[/\\\\/g,()=>Oy],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,t,r,n,s)=>t===Oy?`\\[${r}${fN(n)}${s}`:s==="]"&&n.length%2===0?`[${lN(r)}${n}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],gS=Object.create(null),pN=(e,t)=>{let r=gS[e];return r||(r=dN.reduce((n,[s,u])=>n.replace(s,u.bind(e)),e),gS[e]=r),t?new RegExp(r,"i"):new RegExp(r)},Uy=e=>typeof e=="string",vN=e=>e&&Uy(e)&&!rN.test(e)&&!nN.test(e)&&e.indexOf("#")!==0,mN=e=>e.split(oN),Ly=class{constructor(t,r,n,s){this.origin=t,this.pattern=r,this.negative=n,this.regex=s}},hN=(e,t)=>{let r=e,n=!1;e.indexOf("!")===0&&(n=!0,e=e.substr(1)),e=e.replace(aN,"!").replace(iN,"#");let s=pN(e,t);return new Ly(r,e,n,s)},_N=(e,t)=>{throw new t(e)},dm=(e,t,r)=>Uy(e)?e?dm.isNotRelative(e)?r(`path should be a \`path.relative()\`d string, but got "${t}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${t}\``,TypeError),wS=e=>sN.test(e);dm.isNotRelative=wS;dm.convert=e=>e;var Fy=class{constructor({ignorecase:t=!0,ignoreCase:r=t,allowRelativePaths:n=!1}={}){uN(this,_S,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[_S]){this._rules=this._rules.concat(t._rules),this._added=!0;return}if(vN(t)){let r=hN(t,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(t){return this._added=!1,mS(Uy(t)?mN(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,r){let n=!1,s=!1;return this._rules.forEach(u=>{let{negative:h}=u;if(s===h&&n!==s||h&&!n&&!s&&!r)return;u.regex.test(t)&&(n=!h,s=h)}),{ignored:n,unignored:s}}_test(t,r,n,s){let u=t&&dm.convert(t);return dm(u,t,this._allowRelativePaths?SS:_N),this._t(u,r,n,s)}_t(t,r,n,s){if(t in r)return r[t];if(s||(s=t.split(ky)),s.pop(),!s.length)return r[t]=this._testOne(t,n);let u=this._t(s.join(ky)+ky,r,n,s);return r[t]=u.ignored?u:this._testOne(t,n)}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return mS(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}},Ig=e=>new Fy(e),gN=e=>dm(e&&dm.convert(e),e,SS);Ig.isPathValid=gN;Ig.default=Ig;bS.exports=Ig;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let e=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");dm.convert=e;let t=/^[a-z]:\//i;dm.isNotRelative=r=>t.test(r)||wS(r)}});var RS=kd((Ag,AS)=>{(function(e,t){typeof Ag=="object"&&typeof AS<"u"?t(Ag):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.oneDS=e.oneDS||{}))})(Ag,function(e){"use strict";var t="function",r="object",n="undefined",s="prototype",u=Object,h=u[s];function w(a,c){return a||c}function T(a,c){return a[c]}var C=void 0,F=null,z="",ee="function",pe="object",ce="prototype",re="__proto__",Q="undefined",ve="constructor",Pe="Symbol",We="_polyfill",Ae="length",Ze="name",Tt="call",Dt="toString",Lt=w(Object),it=T(Lt,ce),Gt=w(String),xr=T(Gt,ce),oa=w(Math),ei=w(Array),Pr=T(ei,ce),xn=T(Pr,"slice");function nt(a,c){try{return{v:a.apply(this,c)}}catch(p){return{e:p}}}function po(a,c){var p=nt(a);return p.e?c:p.v}var Ve;function Tr(a){return function(c){return typeof c===a}}function zn(a){var c="[object "+a+"]";return function(p){return!!(p&&kt(p)===c)}}function kt(a){return it[Dt].call(a)}function Ft(a,c){return typeof a===c}function rt(a){return typeof a===Q||a===Q}function yn(a){return!Wt(a)}function at(a){return a===F||rt(a)}function Nc(a){return a===F||!Wt(a)}function Wt(a){return!!a||a!==C}function $i(a){return!Ve&&(Ve=["string","number","boolean",Q,"symbol","bigint"]),a!==pe&&Ve.indexOf(a)!==-1}var Ht=Tr("string"),tr=Tr(ee);function Yr(a){return!a&&at(a)?!1:!!a&&typeof a===pe}var qt=T(ei,"isArray"),an=zn("Date"),je=Tr("number"),Kn=Tr("boolean"),Ct=zn("Error");function wr(a){return!!(a&&a.then&&tr(a.then))}function ti(a){return!a||!qi(a)}function qi(a){return!(!a||po(function(){return!(a&&0+a)},!a))}var Hr=T(Lt,"getOwnPropertyDescriptor");function Sn(a,c){return!!a&&it.hasOwnProperty[Tt](a,c)}var Bi=w(T(Lt,"hasOwn"),ga);function ga(a,c){return Sn(a,c)||!!Hr(a,c)}function Ar(a,c,p){if(a&&Yr(a)){for(var g in a)if(Bi(a,g)&&c[Tt](p||a,g,a[g])===-1)break}}var ar={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function pr(a){var c={};if(c[ar.c]=!0,c[ar.e]=!0,a.l){c.get=function(){return a.l.v};var p=Hr(a.l,"v");p&&p.set&&(c.set=function(g){a.l.v=g})}return Ar(a,function(g,b){c[ar[g]]=yn(b)?c[ar[g]]:b}),c}var $r=T(Lt,"defineProperty");function Yf(a,c,p,g,b,x){var R={e:x,c:b};return p&&(R.g=p),g&&(R.s=g),$r(a,c,pr(R))}function wn(a,c,p){return $r(a,c,pr(p))}function bl(a,c,p,g,b){var x={};return Ar(a,function(R,P){Dc(x,R,c?P:R,b),Dc(x,P,p?P:R,b)}),g?g(x):x}function Dc(a,c,p,g){$r(a,c,{value:p,enumerable:!0,writable:!!g})}var bn=w(Gt),qa="[object Error]";function ur(a,c){var p=z,g=it[Dt][Tt](a);g===qa&&(a={stack:bn(a.stack),message:bn(a.message),name:bn(a.name)});try{p=JSON.stringify(a,F,c?typeof c=="number"?c:4:C),p=(p?p.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):F)||bn(a)}catch(b){p=" - "+ur(b,c)}return g+": "+p}function Pn(a){throw new Error(a)}function Gn(a){throw new TypeError(a)}var vo=T(Lt,"freeze");function Ts(a){return a}function Cc(a){return a[re]||F}var El=T(Lt,"assign"),mo=T(Lt,"keys");function $o(a){return vo&&Ar(a,function(c,p){(qt(p)||Yr(p))&&$o(p)}),On(a)}var On=w(vo,Ts),ho=w(T(Lt,"seal"),Ts),Is=w(T(Lt,"getPrototypeOf"),Cc);function ya(a){return bl(a,1,0,On)}function Uu(a){return bl(a,0,0,On)}var Ns=Uu({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Nr="__tsUtils$gblCfg",Lr;function ri(){var a;return typeof globalThis!==Q&&(a=globalThis),!a&&typeof self!==Q&&(a=self),!a&&typeof window!==Q&&(a=window),!a&&typeof global!==Q&&(a=global),a}function zi(){if(!Lr){var a=nt(ri).v||{};Lr=a[Nr]=a[Nr]||{}}return Lr}var pn=ni;function ni(a,c,p){var g=c?c[a]:F;return function(b){var x=(b?b[a]:F)||g;if(x||p){var R=arguments;return(x||p).apply(b,x?xn[Tt](R,1):R)}Gn('"'+bn(a)+'" not defined for '+ur(b))}}function ai(a){return function(c){return c[a]}}var Ds=T(oa,"max"),Ud=pn("slice",xr),on=pn("substring",xr),_o=ni("substr",xr,qo);function qo(a,c,p){return at(a)&&Gn("Invalid "+ur(a)),p<0?z:(c=c||0,c<0&&(c=Ds(c+a[Ae],0)),rt(p)?Ud(a,c):Ud(a,c,c+p))}function kn(a,c){return on(a,0,c)}var Bo="_urid",su;function Ba(){if(!su){var a=zi();su=a.gblSym=a.gblSym||{k:{},s:{}}}return su}var sn;function Mn(a){var c={description:bn(a),toString:function(){return Pe+"("+a+")"}};return c[We]=!0,c}function ju(a){var c=Ba();if(!Bi(c.k,a)){var p=Mn(a),g=mo(c.s).length;p[Bo]=function(){return g+"_"+p[Dt]()},c.k[a]=p,c.s[p[Bo]()]=bn(a)}return c.k[a]}function ii(a){!sn&&(sn={});var c,p=Ns[a];return p&&(c=sn[p]=sn[p]||Mn(Pe+"."+p)),c}var Ir;function sa(){Ir=zi()}function $f(a){var c={};return!Ir&&sa(),c.b=Ir.lzy,$r(c,"v",{configurable:!0,get:function(){var p=a();return Ir.lzy||$r(c,"v",{value:p}),c.b=Ir.lzy,p}}),c}function Sa(a){return $r({toJSON:function(){return a}},"v",{value:a})}var zo="window",xc;function Go(a,c){var p;return function(){return!Ir&&sa(),(!p||Ir.lzy)&&(p=Sa(nt(a,c).v)),p.v}}function qf(a){return!Ir&&sa(),(!xc||a===!1||Ir.lzy)&&(xc=Sa(nt(ri).v||F)),xc.v}function Qr(a,c){var p;if(!xc||c===!1?p=qf(c):p=xc.v,p&&p[a])return p[a];if(a===zo)try{return window}catch{}return F}function Tl(){return!!za()}var za=Go(Qr,["document"]);function jd(){return!!oi()}var oi=Go(Qr,[zo]);function jp(){return!!si()}var si=Go(Qr,["navigator"]);function Il(){return!!Gi()}var Gi=Go(Qr,["history"]),Bf=Go(function(){return!!nt(function(){return process&&(process.versions||{}).node}).v}),hr,Ho;function zf(){return hr=Sa(nt(Qr,[Pe]).v),hr}function Ga(a){var c=(Ir.lzy?0:hr)||zf();return c.v?c.v[a]:C}function Pc(){return!!Pt()}function Pt(){return!Ir&&sa(),((Ir.lzy?0:hr)||zf()).v}function ui(a,c){var p=Ns[a];!Ir&&sa();var g=(Ir.lzy?0:hr)||zf();return g.v?g.v[p||a]:c?C:ii(a)}function Yu(a,c){!Ir&&sa();var p=(Ir.lzy?0:hr)||zf();return p.v?p.v(a):c?F:Mn(a)}function Nl(a){return!Ir&&sa(),Ho=(Ir.lzy?0:Ho)||Sa(nt(Ga,["for"]).v),(Ho.v||ju)(a)}function kv(a){return!!a&&tr(a.next)}function Ei(a){return!Nc(a)&&tr(a[ui(3)])}var Dl;function Yd(a,c,p){if(a&&(kv(a)||(!Dl&&(Dl=Sa(ui(3))),a=a[Dl.v]?a[Dl.v]():F),kv(a))){var g=C,b=C;try{for(var x=0;!(b=a.next()).done&&c[Tt](p||a,b.value,x,a)!==-1;)x++}catch(R){g={e:R},a.throw&&(b=F,a.throw(g))}finally{try{b&&!b.done&&a.return&&a.return(b)}finally{if(g)throw g.e}}}}function uu(a,c,p){return a.apply(c,p)}function Ti(a,c){return!rt(c)&&a&&(qt(c)?uu(a.push,a,c):kv(c)||Ei(c)?Yd(c,function(p){a.push(p)}):a.push(c)),a}function dt(a,c,p){if(a)for(var g=a[Ae]>>>0,b=0;b<g&&!(b in a&&c[Tt](p||a,a[b],b,a)===-1);b++);}var ua=pn("indexOf",Pr),cu=pn("map",Pr);function Cs(a,c,p){return((a?a.slice:F)||xn).apply(a,xn[Tt](arguments,1))}function $d(a,c,p){return ua(a,c,p)!==-1}var qd=ni("includes",Pr,$d),Wn=pn("reduce",Pr),ci=w(T(Lt,"create"),Bd);function Bd(a){if(!a)return{};var c=typeof a;c!==pe&&c!==ee&&Gn("Prototype must be an Object or function: "+ur(a));function p(){}return p[ce]=a,new p}var Ii;function Ha(a,c){var p=Lt.setPrototypeOf||function(g,b){var x;!Ii&&(Ii=Sa((x={},x[re]=[],x instanceof Array))),Ii.v?g[re]=b:Ar(b,function(R,P){return g[R]=P})};return p(a,c)}function Nm(a,c,p){nt(wn,[c,Ze,{v:a,c:!0,e:!1}]),c=Ha(c,p);function g(){this[ve]=c,nt(wn,[this,Ze,{v:a,c:!0,e:!1}])}return c[ce]=p===F?ci(p):(g[ce]=p[ce],new g),c}function Mv(a,c){c&&(a[Ze]=c)}function Yp(a,c,p){var g=p||Error,b=g[ce][Ze],x=Error.captureStackTrace;return Nm(a,function(){var R=this,P=arguments;try{nt(Mv,[g,a]);var M=uu(g,R,xn[Tt](P))||R;if(M!==R){var j=Is(R);j!==Is(M)&&Ha(M,j)}return x&&x(M,R[ve]),c&&c(M,P),M}finally{nt(Mv,[g,b])}},g)}function lu(){return(Date.now||$p)()}function $p(){return new Date().getTime()}function ch(a){return function(p){return at(p)&&Gn("strTrim called ["+ur(p)+"]"),p&&p.replace&&(p=p.replace(a,z)),p}}var zd=ch(/^\s+|(?=\s)\s+$/g),xa=ni("trim",xr,zd),Cl,xl,Hi;function li(a){if(!a||typeof a!==pe)return!1;Hi||(Hi=jd()?oi():!0);var c=!1;if(a!==Hi){xl||(Cl=Function[ce][Dt],xl=Cl[Tt](Lt));try{var p=Is(a);c=!p,c||(Sn(p,ve)&&(p=p[ve]),c=!!(p&&typeof p===ee&&Cl[Tt](p)===xl))}catch{}}return c}function fu(a){return a.value&&zp(a),!0}var qp=[Gf,zp,Bp,Hd];function Ni(a,c,p,g){var b;return dt(a,function(x){if(x.k===c)return b=x,-1}),b||(b={k:c,v:c},a.push(b),g(b)),b.v}function Gd(a,c,p,g){var b=p.handler,x=p.path?g?p.path.concat(g):p.path:[],R={handler:p.handler,src:p.src,path:x},P=typeof c,M=!1,j=c===F;j||(c&&P===pe?M=li(c):j=$i(P));var G={type:P,isPrim:j,isPlain:M,value:c,result:c,path:x,origin:p.src,copy:function(H,K){return Gd(a,H,K?R:p,K)},copyTo:function(H,K){return $u(a,H,K,R)}};return G.isPrim?b&&b[Tt](p,G)?G.result:c:Ni(a,c,x,function(H){wn(G,"result",{g:function(){return H.v},s:function(Z){H.v=Z}});for(var K=0,te=b;!(te||(K<qp.length?qp[K++]:fu))[Tt](p,G);)te=F})}function $u(a,c,p,g){if(!at(p))for(var b in p)c[b]=Gd(a,p[b],g,b);return c}function Ac(a,c,p){var g={handler:p,src:c,path:[]};return $u([],a,c,g)}function Pl(a,c){var p={handler:c,src:a};return Gd([],a,p)}function Gf(a){var c=a.value;if(qt(c)){var p=a.result=[];return p.length=c.length,a.copyTo(p,c),!0}return!1}function Hd(a){var c=a.value;return an(c)?(a.result=new Date(c.getTime()),!0):!1}function Bp(a){return a.type===ee}function zp(a){var c=a.value;if(c&&a.isPlain){var p=a.result={};return a.copyTo(p,c),!0}return!1}function du(a,c){return dt(c,function(p){Ac(a,p)}),a}function Vd(a,c,p,g,b,x,R){return du(Pl(a)||{},xn[Tt](arguments))}var xs=ai(Ae),qu;function Di(){return!Ir&&sa(),(!qu||Ir.lzy)&&(qu=Sa(nt(Qr,["performance"]).v)),qu.v}function Al(){var a=Di();return a&&a.now?a.now():lu()}var Hf=ni("endsWith",xr,Rc);function Rc(a,c,p){Ht(a)||Gn("'"+ur(a)+"' is not a string");var g=Ht(c)?c:bn(c),b=!rt(p)&&p<a[Ae]?p:a[Ae];return on(a,b-g[Ae],b)===g}var Vi=pn("indexOf",xr),Lv=ni("startsWith",xr,Vo);function Vo(a,c,p){Ht(a)||Gn("'"+ur(a)+"' is not a string");var g=Ht(c)?c:bn(c),b=p>0?p:0;return on(a,b,b+g[Ae])===g}var go="ref",Ki="unref",pu="hasRef",Vf="enabled";function Oc(a,c,p){var g=!0,b=a?c(F):F,x;function R(){return g=!1,b&&b[Ki]&&b[Ki](),x}function P(){b&&p(b),b=F}function M(){return b=c(b),g||R(),x}function j(G){!G&&b&&P(),G&&!b&&M()}return x={cancel:P,refresh:M},x[pu]=function(){return b&&b[pu]?b[pu]():g},x[go]=function(){return g=!0,b&&b[go]&&b[go](),x},x[Ki]=R,x=$r(x,Vf,{get:function(){return!!b},set:j}),{h:x,dn:function(){b=F}}}function kc(a,c,p){var g=qt(c),b=g?c.length:0,x=(b>0?c[0]:g?C:c)||setTimeout,R=(b>1?c[1]:C)||clearTimeout,P=p[0];p[0]=function(){M.dn(),uu(P,C,xn[Tt](arguments))};var M=Oc(a,function(j){if(j){if(j.refresh)return j.refresh(),j;uu(R,C,[j])}return uu(x,C,p)},function(j){uu(R,C,[j])});return M.h}function Bu(a,c){return kc(!0,C,xn[Tt](arguments))}function Kf(a,c){return kc(!1,C,xn[Tt](arguments))}(qf()||{}).Symbol,(qf()||{}).Reflect;var Rl="hasOwnProperty",Wf=function(a,c){return Wf=u.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var b in g)g[Rl](b)&&(p[b]=g[b])},Wf(a,c)};function zu(a,c){typeof c!==t&&c!==null&&Gn("Class extends value "+String(c)+" is not a constructor or null"),Wf(a,c);function p(){this.constructor=a}a[s]=c===null?ci(c):(p[s]=c[s],new p)}function Wi(a,c){for(var p=0,g=c.length,b=a.length;p<g;p++,b++)a[b]=c[p];return a}var Mc,yo="constructor",fi="prototype",Ko="function",Vr="_dynInstFuncs",Ps="_isDynProxy",Ji="_dynClass",Lc="_dynCls$",Fc="_dynInstChk",Wo=Fc,Ol="_dfOpts",Jo="_unknown_",vu="__proto__",Va="_dyn"+vu,Kd="__dynProto$Gbl",Gu="_dynInstProto",Pa="useBaseInst",Jf="setInstFuncs",Wd=Object,kl=Wd.getPrototypeOf,Ml=Wd.getOwnPropertyNames,Jd=qf(),Fv=Jd[Kd]||(Jd[Kd]={o:(Mc={},Mc[Jf]=!0,Mc[Pa]=!0,Mc),n:1e3});function Hu(a){return a&&(a===Wd[fi]||a===Array[fi])}function So(a){return Hu(a)||a===Function[fi]}function Zi(a){var c;if(a){if(kl)return kl(a);var p=a[vu]||a[fi]||(a[yo]?a[yo][fi]:null);c=a[Va]||p,Sn(a,Va)||(delete a[Gu],c=a[Va]=a[Gu]||a[Va],a[Gu]=p)}return c}function vn(a,c){var p=[];if(Ml)p=Ml(a);else for(var g in a)typeof g=="string"&&Sn(a,g)&&p.push(g);if(p&&p.length>0)for(var b=0;b<p.length;b++)c(p[b])}function Ll(a,c,p){return c!==yo&&typeof a[c]===Ko&&(p||Sn(a,c))&&c!==vu&&c!==fi}function Vu(a){Gn("DynamicProto: "+a)}function Ku(a){var c=ci(null);return vn(a,function(p){!c[p]&&Ll(a,p,!1)&&(c[p]=a[p])}),c}function Zd(a,c){for(var p=a.length-1;p>=0;p--)if(a[p]===c)return!0;return!1}function Ci(a,c,p,g){function b(M,j,G){var H=j[G];if(H[Ps]&&g){var K=M[Vr]||{};K[Wo]!==!1&&(H=(K[j[Ji]]||{})[G]||H)}return function(){return H.apply(M,arguments)}}var x=ci(null);vn(p,function(M){x[M]=b(c,p,M)});for(var R=Zi(a),P=[];R&&!So(R)&&!Zd(P,R);)vn(R,function(M){!x[M]&&Ll(R,M,!kl)&&(x[M]=b(c,R,M))}),P.push(R),R=Zi(R);return x}function mu(a,c,p,g){var b=null;if(a&&Sn(p,Ji)){var x=a[Vr]||ci(null);if(b=(x[p[Ji]]||ci(null))[c],b||Vu("Missing ["+c+"] "+Ko),!b[Fc]&&x[Wo]!==!1){for(var R=!Sn(a,c),P=Zi(a),M=[];R&&P&&!So(P)&&!Zd(M,P);){var j=P[c];if(j){R=j===g;break}M.push(P),P=Zi(P)}try{R&&(a[c]=b),b[Fc]=1}catch{x[Wo]=!1}}}return b}function As(a,c,p){var g=c[a];return g===p&&(g=Zi(c)[a]),typeof g!==Ko&&Vu("["+a+"] is not a "+Ko),g}function cr(a,c,p,g,b){function x(M,j){var G=function(){var H=mu(this,j,M,G)||As(j,M,G);return H.apply(this,arguments)};return G[Ps]=1,G}if(!Hu(a)){var R=p[Vr]=p[Vr]||ci(null);if(!Hu(R)){var P=R[c]=R[c]||ci(null);R[Wo]!==!1&&(R[Wo]=!!b),Hu(P)||vn(p,function(M){Ll(p,M,!1)&&p[M]!==g[M]&&(P[M]=p[M],delete p[M],(!Sn(a,M)||a[M]&&!a[M][Ps])&&(a[M]=x(a,M)))})}}}function wo(a,c){if(kl){for(var p=[],g=Zi(c);g&&!So(g)&&!Zd(p,g);){if(g===a)return!0;p.push(g),g=Zi(g)}return!1}return!0}function Zo(a,c){return Sn(a,fi)?a.name||c||Jo:((a||{})[yo]||{}).name||c||Jo}function xi(a,c,p,g){Sn(a,fi)||Vu("theClass is an invalid class definition.");var b=a[fi];wo(b,c)||Vu("["+Zo(a)+"] not in hierarchy of ["+Zo(c)+"]");var x=null;Sn(b,Ji)?x=b[Ji]:(x=Lc+Zo(a,"_")+"$"+Fv.n,Fv.n++,b[Ji]=x);var R=xi[Ol],P=!!R[Pa];P&&g&&g[Pa]!==void 0&&(P=!!g[Pa]);var M=Ku(c),j=Ci(b,c,M,P);p(c,j);var G=!!kl&&!!R[Jf];G&&g&&(G=!!g[Jf]),cr(b,x,c,M,G!==!1)}xi[Ol]=Fv.o;var Zf=100,Pi=ya,hu=Pi({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),un=Pi({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),Ka="toLowerCase",Fr="blkVal",pt="length",Wu="rdOnly",bo="notify",Rs="warnToConsole",Xi="throwInternal",_u="setDf",Ai="watch",qr="logger",Eo="apply",Ur="push",To="splice",Xf="hdlr",Io="cancel",An="initialize",Qi="identifier",Xo="removeNotificationListener",wa="addNotificationListener",Aa="isInitialized",Uc="instrumentationKey",Ju="INACTIVE",Qf="value",Os="getNotifyMgr",No="getPlugin",Do="name",Zu="iKey",Co="time",Ln="processNext",ed="getProcessTelContext",Xu="pollInternalLogs",ks="enabled",di="stopPollingInternalLogs",Qo="unload",Ms="onComplete",Ri="version",jc="loggingLevelConsole",gu="createNew",ca="teardown",yu="messageId",Ls="message",Oi="isAsync",Qu="diagLog",cn="_doTeardown",Jn="update",ki="getNext",ec="setNextPlugin",es="protocol",Xd="userAgent",pi="split",Yc="nodeType",ba="replace",td="logInternalMessage",Wa="type",ts="handler",rs="status",Qd="getResponseHeader",Fl="getAllResponseHeaders",rd="isChildEvt",Ul="data",xo="getCtx",Ja="setCtx",$c="complete",Uv="itemsReceived",tc="urlString",rc="sendPOST",ns="headers",jl="timeout",Dm="setRequestHeader",ep="traceId",Yl="spanId",nc="traceFlags",Gp;function jv(a,c){Gp||(Gp=Yp("AggregationError",function(g,b){b[pt]>1&&(g.errors=b[1])}));var p=a||"One or more errors occurred.";throw dt(c,function(g,b){p+=`
`.concat(b," > ").concat(ur(g))}),new Gp(p,c||[])}var ac="Promise",Yv="rejected";function $l(a,c){return tp(a,function(p){return c?c({status:"fulfilled",rejected:!1,value:p}):p},function(p){return c?c({status:Yv,rejected:!0,reason:p}):p})}function tp(a,c,p,g){var b=a;try{if(wr(a))(c||p)&&(b=a.then(c,p));else try{c&&(b=c(a))}catch(x){if(p)b=p(x);else throw x}}finally{g&&eo(b,g)}return b}function eo(a,c){var p=a;return c&&(wr(a)?a.finally?p=a.finally(c):p=a.then(function(g){return c(),g},function(g){throw c(),g}):c()),p}var Hp=["pending","resolving","resolved",Yv],Cm="dispatchEvent",nd;function Vp(a){var c;return a&&a.createEvent&&(c=a.createEvent("Event")),!!c&&c.initEvent}function rp(a,c,p,g){var b=za();!nd&&(nd=Sa(!!nt(Vp,[b]).v));var x=nd.v?b.createEvent("Event"):g?new Event(c):{};if(p&&p(x),nd.v&&x.initEvent(c,!1,!0),x&&a[Cm])a[Cm](x);else{var R=a["on"+c];if(R)R(x);else{var P=Qr("console");P&&(P.error||P.log)(c,ur(x))}}}var qc="unhandledRejection",ad=qc.toLowerCase(),ic=10,Fs;function Bc(a){return tr(a)?a.toString():ur(a)}function $v(a,c,p){var g=Cs(arguments,3),b=0,x=!1,R,P=[],M=!1,j=null,G;function H(et,rr){try{M=!0,j&&j.cancel(),j=null;var sr=a(function(Un,fn){P.push(function(){try{var jn=b===2?et:rr,Yi=rt(jn)?R:tr(jn)?jn(R):jn;wr(Yi)?Yi.then(Un,fn):jn?Un(Yi):b===3?fn(Yi):Un(Yi)}catch(wi){fn(wi)}}),x&&_e()},g);return sr}finally{}}function K(et){return H(void 0,et)}function te(et){var rr=et,sr=et;return tr(et)&&(rr=function(Un){return et&&et(),Un},sr=function(Un){throw et&&et(),Un}),H(rr,sr)}function Z(){return Hp[b]}function _e(){if(P.length>0){var et=P.slice();P=[],M=!0,j&&j.cancel(),j=null,c(et)}}function ye(et,rr){return function(sr){if(b===rr){if(et===2&&wr(sr)){b=1,sr.then(ye(2,1),ye(3,1));return}b=et,x=!0,R=sr,_e(),!M&&et===3&&!j&&(j=Bu(Fe,ic))}}}function Fe(){if(!M)if(M=!0,Bf())process.emit(qc,R,G);else{var et=oi()||qf();!Fs&&(Fs=Sa(nt(Qr,[ac+"RejectionEvent"]).v)),rp(et,ad,function(rr){return wn(rr,"promise",{g:function(){return G}}),rr.reason=R,rr},!!Fs.v)}}G={then:H,catch:K,finally:te},$r(G,"state",{get:Z}),Pc()&&(G[ui(11)]="IPromise");function ze(){return"IPromise "+Z()+(x?" - "+Bc(R):"")}return G.toString=ze,function(){tr(p)||Gn(ac+": executor is not a function - "+Bc(p));var rr=ye(3,0);try{p.call(G,ye(2,0),rr)}catch(sr){rr(sr)}}(),G}function np(a){return function(c){var p=Cs(arguments,1);return a(function(g,b){try{var x=[],R=1;Yd(c,function(P,M){P&&(R++,tp(P,function(j){x[M]=j,--R===0&&g(x)},b))}),R--,R===0&&g(x)}catch(P){b(P)}},p)}}function zc(a){return Sa(function(c){var p=Cs(arguments,1);return a(function(g,b){var x=[],R=1;function P(M,j){R++,$l(M,function(G){G.rejected?x[j]={status:Yv,reason:G.reason}:x[j]={status:"fulfilled",value:G.value},--R===0&&g(x)})}try{qt(c)?dt(c,P):Ei(c)?Yd(c,P):Gn("Input is not an iterable"),R--,R===0&&g(x)}catch(M){b(M)}},p)})}function ap(a){dt(a,function(c){try{c()}catch{}})}function Us(a){var c=je(a)?a:0;return function(p){Bu(function(){ap(p)},c)}}function Br(a,c){return $v(Br,Us(c),a,c)}var oc;function la(a,c){!oc&&(oc=Sa(nt(Qr,[ac]).v||null));var p=oc.v;if(!p)return Br(a);tr(a)||Gn(ac+": executor is not a function - "+ur(a));var g=0;function b(){return Hp[g]}var x=new p(function(R,P){function M(G){g=2,R(G)}function j(G){g=3,P(G)}a(M,j)});return $r(x,"state",{get:b}),x}var ip;function id(a){return $v(id,ap,a)}function Gc(a,c){return!ip&&(ip=zc(id)),ip.v(a,c)}var sc;function Za(a,c){return!sc&&(sc=Sa(la)),sc.v.call(this,a,c)}var od=np(Za),Zn=void 0,vr="",js="channels",hn="core",as="createPerfMgr",uc="disabled",cc="extensionConfig",Ys="extensions",to="processTelemetry",ql="priority",Kp="eventsSent",Bl="eventsDiscarded",Wp="eventsSendRequest",zl="perfEvent",Hc="offlineEventsStored",op="offlineBatchSent",Hn="offlineBatchDrop",Vc="getPerfMgr",fa="domain",Su="path",sp="Not dynamic - ",sd=/-([a-z])/g,da=/([^\w\d_$])/g,ud=/^(\d+[\w\d_$])/;function up(a){return!at(a)}function $s(a){var c=a;return c&&Ht(c)&&(c=c[ba](sd,function(p,g){return g.toUpperCase()}),c=c[ba](da,"_"),c=c[ba](ud,function(p,g){return"_"+g})),c}function wt(a,c){return a&&c?Vi(a,c)!==-1:!1}function is(a){return a&&a.toISOString()||""}function os(a){return Ct(a)?a[Do]:vr}function vi(a,c,p,g,b){var x=p;return a&&(x=a[c],x!==p&&(!b||b(x))&&(!g||g(p))&&(x=p,a[c]=x)),x}function Gl(a,c,p){var g;return a?(g=a[c],!g&&at(g)&&(g=rt(p)?{}:p,a[c]=g)):g=rt(p)?{}:p,g}function Kc(a,c){var p=null,g=null;return tr(a)?p=a:g=a,function(){var b=arguments;if(p&&(g=p()),g)return g[c][Eo](g,b)}}function ss(a,c,p){if(a&&c&&Yr(a)&&Yr(c)){var g=function(x){if(Ht(x)){var R=c[x];tr(R)?(!p||p(x,!0,c,a))&&(a[x]=Kc(c,x)):(!p||p(x,!1,c,a))&&(Bi(a,x)&&delete a[x],wn(a,x,{g:function(){return c[x]},s:function(P){c[x]=P}}))}};for(var b in c)g(b)}return a}function Mi(a,c,p,g,b){a&&c&&p&&(b!==!1||rt(a[c]))&&(a[c]=Kc(p,g))}function Wc(a,c,p,g){return a&&c&&Yr(a)&&qt(p)&&dt(p,function(b){Ht(b)&&Mi(a,b,c,b,g)}),a}function cd(a){return a&&El&&(a=u(El({},a))),a}function qs(a){try{return a.responseText}catch{}return null}function Hl(a,c){return a?"XDomainRequest,Response:"+qs(a)||"":c}function Jc(a,c){return a?"XMLHttpRequest,Status:"+a[rs]+",Response:"+qs(a)||a.response||"":c}function Vl(a,c){return c&&(je(c)?a=[c].concat(a):qt(c)&&(a=c.concat(a))),a}var cp="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",lp="withCredentials",Jp="timeout";function xm(a,c,p,g,b,x){g===void 0&&(g=!1),b===void 0&&(b=!1);function R(M,j,G){try{M[j]=G}catch{}}var P=new XMLHttpRequest;return g&&R(P,cp,g),p&&R(P,lp,p),P.open(a,c,!b),p&&R(P,lp,p),!b&&x&&R(P,Jp,x),P}function us(a){var c={};if(Ht(a)){var p=xa(a)[pi](/[\r\n]+/);dt(p,function(g){if(g){var b=g.indexOf(": ");if(b!==-1){var x=xa(g.substring(0,b))[Ka](),R=xa(g.substring(b+1));c[x]=R}else c[xa(g)]=1}})}return c}function Bs(a,c,p){if(!a[p]&&c&&c[Qd]){var g=c[Qd](p);g&&(a[p]=xa(g))}return a}var cs="kill-duration",Li="kill-duration-seconds",zs="time-delta-millis";function wu(a,c){var p={};return a[Fl]?p=us(a[Fl]()):c&&(p=Bs(p,a,zs),p=Bs(p,a,cs),p=Bs(p,a,Li)),p}var mi="documentMode",Zc="location",qv="console",lc="JSON",Zp="crypto",Kl="msCrypto",Xc="ReactNative",Wl="msie",Gs="trident/",Fi="XMLHttpRequest",Qc=null,Jl=null,ld=!1,pa=null,Hs=null;function va(a,c){var p=!1;if(a){try{if(p=c in a,!p){var g=a[s];g&&(p=c in g)}}catch{}if(!p)try{var b=new a;p=!rt(b[c])}catch{}}return p}function fd(a){ld=a}function bu(a){if(a&&ld){var c=Qr("__mockLocation");if(c)return c}return typeof location===r&&location?location:Qr(Zc)}function dd(){return typeof console!==n?console:Qr(qv)}function Ra(){return!!(typeof JSON===r&&JSON||Qr(lc)!==null)}function ma(){return Ra()?JSON||Qr(lc):null}function Xp(){return Qr(Zp)}function Zl(){return Qr(Kl)}function Xl(){var a=si();return a&&a.product?a.product===Xc:!1}function Eu(){var a=si();if(a&&(a[Xd]!==Jl||Qc===null)){Jl=a[Xd];var c=(Jl||vr)[Ka]();Qc=wt(c,Wl)||wt(c,Gs)}return Qc}function Bv(a){if(a===void 0&&(a=null),!a){var c=si()||{};a=c?(c.userAgent||vr)[Ka]():vr}var p=(a||vr)[Ka]();if(wt(p,Wl)){var g=za()||{};return Math.max(parseInt(p[pi](Wl)[1]),g[mi]||0)}else if(wt(p,Gs)){var b=parseInt(p[pi](Gs)[1]);if(b)return b+4}return null}function zv(a){return(Hs===null||a===!1)&&(Hs=jp()&&!!si().sendBeacon),Hs}function Ql(a){var c=!1;try{c=!!Qr("fetch");var p=Qr("Request");c&&a&&p&&(c=va(p,"keepalive"))}catch{}return c}function Qp(){return pa===null&&(pa=typeof XDomainRequest!==n,pa&&ef()&&(pa=pa&&!va(Qr(Fi),"withCredentials"))),pa}function ef(){var a=!1;try{var c=Qr(Fi);a=!!c}catch{}return a}function ev(a,c){if(a)for(var p=0;p<a[pt];p++){var g=a[p];if(g[Do]&&g[Do]===c)return g}return{}}function Gv(a){var c=za();return c&&a?ev(c.querySelectorAll("meta"),a).content:null}function tf(a){var c,p=Di();if(p){var g=p.getEntriesByType("navigation")||[];c=ev((g[pt]>0?g[0]:{}).serverTiming,a).description}return c}var Hv=4294967296,Tu=4294967295,el=123456789,fp=987654321,ls=!1,pd=el,rf=fp;function Po(a){a<0&&(a>>>=0),pd=el+a&Tu,rf=fp-a&Tu,ls=!0}function tl(){try{var a=lu()&2147483647;Po((Math.random()*Hv^a)+a)}catch{}}function Vv(a){return a>0?Math.floor(rl()/Tu*(a+1))>>>0:0}function rl(a){var c=0,p=Xp()||Zl();return p&&p.getRandomValues&&(c=p.getRandomValues(new Uint32Array(1))[0]&Tu),c===0&&Eu()&&(ls||tl(),c=Pm()&Tu),c===0&&(c=Math.floor(Hv*Math.random()|0)),a||(c>>>=0),c}function Pm(a){rf=36969*(rf&65535)+(rf>>16)&Tu,pd=18e3*(pd&65535)+(pd>>16)&Tu;var c=(rf<<16)+(pd&65535)>>>0&Tu|0;return a||(c>>>=0),c}function nf(a){a===void 0&&(a=22);for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=rl()>>>0,g=0,b=vr;b[pt]<a;)g++,b+=c.charAt(p&63),p>>>=6,g===5&&(p=(rl()<<2&4294967295|p&3)>>>0,g=0);return b}var Kv="3.3.4",tv="."+nf(6),Iu=0;function Nu(a){return a[Yc]===1||a[Yc]===9||!+a[Yc]}function nl(a,c){var p=c[a.id];if(!p){p={};try{Nu(c)&&wn(c,a.id,{e:!1,v:p})}catch{}}return p}function fs(a,c){return c===void 0&&(c=!1),$s(a+Iu+++(c?"."+Kv:vr)+tv)}function Vs(a){var c={id:fs("_aiData-"+(a||vr)+"."+Kv),accept:function(p){return Nu(p)},get:function(p,g,b,x){var R=p[c.id];return R?R[$s(g)]:(x&&(R=nl(c,p),R[$s(g)]=b),b)},kill:function(p,g){if(p&&p[g])try{delete p[g]}catch{}}};return c}function af(a){return a&&Yr(a)&&(a.isVal||a.fb||Bi(a,"v")||Bi(a,"mrg")||Bi(a,"ref")||a.set)}function vd(a,c,p){var g,b=p.dfVal||Wt;if(c&&p.fb){var x=p.fb;qt(x)||(x=[x]);for(var R=0;R<x[pt];R++){var P=x[R],M=c[P];if(b(M)?g=M:a&&(M=a.cfg[P],b(M)&&(g=M),a.set(a.cfg,bn(P),M)),b(g))break}}return!b(g)&&b(p.v)&&(g=p.v),g}function md(a,c,p){var g=p;if(p&&af(p)&&(g=vd(a,c,p)),g){af(g)&&(g=md(a,c,g));var b;qt(g)?(b=[],b[pt]=g[pt]):li(g)&&(b={}),b&&(Ar(g,function(x,R){R&&af(R)&&(R=md(a,c,R)),b[x]=R}),g=b)}return g}function of(a,c,p,g){var b,x,R,P=g,M,j,G,H;af(P)?(b=P.isVal,x=P.set,G=P[Wu],H=P[Fr],M=P.mrg,j=P.ref,!j&&rt(j)&&(j=!!M),R=vd(a,c,P)):R=g,H&&a[Fr](c,p);var K,te=!0,Z=c[p];(Z||!at(Z))&&(K=Z,te=!1,b&&K!==R&&!b(K)&&(K=R,te=!0),x&&(K=x(K,R,c),te=K===R)),te?R?K=md(a,c,R):K=R:(li(K)||qt(R))&&M&&R&&(li(R)||qt(R))&&Ar(R,function(_e,ye){of(a,K,_e,ye)}),a.set(c,p,K),j&&a.ref(c,p),G&&a[Wu](c,p)}var hi=Nl("[[ai_dynCfg_1]]"),sf=Nl("[[ai_blkDynCfg_1]]"),Wv=Nl("[[ai_frcDynCfg_1]]");function Am(a){if(a){var c;if(qt(a)?(c=[],c[pt]=a[pt]):li(a)&&(c={}),c)return Ar(a,function(p,g){c[p]=Am(g)}),c}return a}function al(a){if(a){var c=a[hi]||a;if(c.cfg&&(c.cfg===a||c.cfg[hi]===c))return c}return null}function Rm(a){if(a&&(li(a)||qt(a)))try{a[sf]=!0}catch{}return a}function Ao(a){if(a)try{a[Wv]=!0}catch{}return a}function Du(a,c,p){var g=!1;return p&&!a[c.blkVal]&&(g=p[Wv],!g&&!p[sf]&&(g=li(p)||qt(p))),g}function il(a){Gn("InvalidAccess:"+a)}var Jv=["push","pop","shift","unshift","splice"],dp=function(a,c,p,g){a&&a[Xi](3,108,"".concat(p," [").concat(c,"] failed - ")+ur(g))};function Zv(a,c,p){qt(c)&&dt(Jv,function(g){var b=c[g];c[g]=function(){for(var x=[],R=0;R<arguments.length;R++)x[R]=arguments[R];var P=b[Eo](this,x);return _d(a,c,p,"Patching"),P}})}function rv(a,c){var p=Hr(a,c);return p&&p.get}function hd(a,c,p,g){var b={n:p,h:[],trk:function(j){j&&j.fn&&(ua(b.h,j)===-1&&b.h[Ur](j),a.trk(j,b))},clr:function(j){var G=ua(b.h,j);G!==-1&&b.h[To](G,1)}},x=!0,R=!1;function P(){x&&(R=R||Du(P,a,g),g&&!g[hi]&&R&&(g=_d(a,g,p,"Converting")),x=!1);var j=a.act;return j&&b.trk(j),g}P[a.prop]={chng:function(){a.add(b)}};function M(j){if(g!==j){P[a.ro]&&!a.upd&&il("["+p+"] is read-only:"+ur(c)),x&&(R=R||Du(P,a,g),x=!1);var G=R&&P[a.rf];if(R)if(G){Ar(g,function(K){g[K]=j?j[K]:Zn});try{Ar(j,function(K,te){ol(a,g,K,te)}),j=g}catch(K){dp((a.hdlr||{})[qr],p,"Assigning",K),R=!1}}else g&&g[hi]&&Ar(g,function(K){var te=rv(g,K);if(te){var Z=te[a.prop];Z&&Z.chng()}});if(j!==g){var H=j&&Du(P,a,j);!G&&H&&(j=_d(a,j,p,"Converting")),g=j,R=H}a.add(b)}}wn(c,b.n,{g:P,s:M})}function ol(a,c,p,g){if(c){var b=rv(c,p),x=b&&!!b[a.prop];x?c[p]=g:hd(a,c,p,g)}return c}function ro(a,c,p,g){if(c){var b=rv(c,p),x=b&&!!b[a.prop],R=g&&g[0],P=g&&g[1],M=g&&g[2];if(!x){if(M)try{Rm(c)}catch(j){dp((a.hdlr||{})[qr],p,"Blocking",j)}try{ol(a,c,p,c[p]),b=rv(c,p)}catch(j){dp((a.hdlr||{})[qr],p,"State",j)}}R&&(b[a.rf]=R),P&&(b[a.ro]=P),M&&(b[a.blkVal]=!0)}return c}function _d(a,c,p,g){try{Ar(c,function(b,x){ol(a,c,b,x)}),c[hi]||($r(c,hi,{get:function(){return a[Xf]}}),Zv(a,c,p))}catch(b){dp((a.hdlr||{})[qr],p,g,b)}return c}var sl="[[ai_",Oa="]]";function no(a){var c,p=Yu(sl+"get"+a.uid+Oa),g=Yu(sl+"ro"+a.uid+Oa),b=Yu(sl+"rf"+a.uid+Oa),x=Yu(sl+"blkVal"+a.uid+Oa),R=Yu(sl+"dtl"+a.uid+Oa),P=null,M=null,j;function G(Z,_e){var ye=j.act;try{j.act=Z,Z&&Z[R]&&(dt(Z[R],function(ze){ze.clr(Z)}),Z[R]=[]),_e({cfg:a.cfg,set:a.set.bind(a),setDf:a[_u].bind(a),ref:a.ref.bind(a),rdOnly:a[Wu].bind(a)})}catch(ze){var Fe=a[qr];throw Fe&&Fe[Xi](1,107,ur(ze)),ze}finally{j.act=ye||null}}function H(){if(P){var Z=P;P=null,M&&M[Io](),M=null;var _e=[];if(dt(Z,function(ye){if(ye&&(ye[R]&&(dt(ye[R],function(Fe){Fe.clr(ye)}),ye[R]=null),ye.fn))try{G(ye,ye.fn)}catch(Fe){_e[Ur](Fe)}}),P)try{H()}catch(ye){_e[Ur](ye)}_e[pt]>0&&jv("Watcher error(s): ",_e)}}function K(Z){if(Z&&Z.h[pt]>0){P||(P=[]),M||(M=Bu(function(){M=null,H()},0));for(var _e=0;_e<Z.h[pt];_e++){var ye=Z.h[_e];ye&&ua(P,ye)===-1&&P[Ur](ye)}}}function te(Z,_e){if(Z){var ye=Z[R]=Z[R]||[];ua(ye,_e)===-1&&ye[Ur](_e)}}return j=(c={prop:p,ro:g,rf:b},c[Fr]=x,c[Xf]=a,c.add=K,c[bo]=H,c.use=G,c.trk=te,c),j}function uf(a,c){var p={fn:c,rm:function(){p.fn=null,a=null,c=null}};return wn(p,"toJSON",{v:function(){return"WatcherHandler"+(p.fn?"":"[X]")}}),a.use(p,c),p}function Xv(a,c,p){var g,b=al(c);if(b)return b;var x=fs("dyncfg",!0),R=c&&p!==!1?c:Am(c),P;function M(){P[bo]()}function j(Fe,ze,et){try{Fe=ol(P,Fe,ze,et)}catch(rr){dp(a,ze,"Setting value",rr)}return Fe[ze]}function G(Fe){return uf(P,Fe)}function H(Fe,ze){P.use(null,function(et){var rr=P.upd;try{rt(ze)||(P.upd=ze),Fe(et)}finally{P.upd=rr}})}function K(Fe,ze){var et;return ro(P,Fe,ze,(et={},et[0]=!0,et))[ze]}function te(Fe,ze){var et;return ro(P,Fe,ze,(et={},et[1]=!0,et))[ze]}function Z(Fe,ze){var et;return ro(P,Fe,ze,(et={},et[2]=!0,et))[ze]}function _e(Fe,ze){return ze&&Ar(ze,function(et,rr){of(ye,Fe,et,rr)}),Fe}var ye=(g={uid:null,cfg:R},g[qr]=a,g[bo]=M,g.set=j,g[_u]=_e,g[Ai]=G,g.ref=K,g[Wu]=te,g[Fr]=Z,g._block=H,g);return wn(ye,"uid",{c:!1,e:!1,w:!1,v:x}),P=no(ye),_d(P,R,"config","Creating"),ye}function Qv(a,c){a?(a[Rs](c),a[Xi](2,108,c)):il(c)}function ha(a,c,p,g){var b=Xv(p,a||{},g);return c&&b[_u](b.cfg,c),b}function ul(a,c,p){var g=a[hi]||a;return g.cfg&&(g.cfg===a||g.cfg[hi]===g)?g[Ai](c):(Qv(p,sp+ur(a)),ha(a,null,p)[Ai](c))}function cf(a,c){if(a&&a[Qo])return a[Qo](c)}function Om(a,c,p){var g;return p||(g=Za(function(b){p=b})),a&&xs(a)>0?$l(cf(a[0],c),function(){Om(Cs(a,1),c,p)}):p(),g}var em=500,lf="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function ka(a){return{mrg:!0,v:a}}var pp=[Kp,Bl,Wp,zl],fc=null,cl;function Ks(a,c){return function(){var p=arguments,g=vp(c);if(g){var b=g.listener;b&&b[a]&&b[a][Eo](b,p)}}}function ff(){var a=Qr("Microsoft");return a&&(fc=a.ApplicationInsights),fc}function vp(a){var c=fc;return!c&&a.disableDbgExt!==!0&&(c=fc||ff()),c?c.ChromeDbgExt:null}function St(a){if(!cl){cl={};for(var c=0;c<pp[pt];c++)cl[pp[c]]=Ks(pp[c],a)}return cl}var Cu,Ro="warnToConsole",df="AI (Internal): ",km="AI: ",pf="AITR_",gd={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Oo=(Cu={},Cu[0]=null,Cu[1]="errorToConsole",Cu[2]=Ro,Cu[3]="debugToConsole",Cu);function tm(a){return a?'"'+a[ba](/\"/g,vr)+'"':vr}function mp(a,c){var p=dd();if(p){var g="log";p[a]&&(g=a),tr(p[g])&&p[g](c)}}var hp=function(){function a(c,p,g,b){g===void 0&&(g=!1);var x=this;x[yu]=c,x[Ls]=(g?km:df)+c;var R=vr;Ra()&&(R=ma().stringify(b));var P=(p?" message:"+tm(p):vr)+(b?" props:"+tm(R):vr);x[Ls]+=P}return a.dataType="MessageData",a}();function vf(a,c){return(a||{})[qr]||new dc(c)}var dc=function(){function a(c){this.identifier="DiagnosticLogger",this.queue=[];var p=0,g={},b,x,R,P,M;xi(a,this,function(j){M=H(c||{}),j.consoleLoggingLevel=function(){return b},j[Xi]=function(Z,_e,ye,Fe,ze){ze===void 0&&(ze=!1);var et=new hp(_e,ye,ze,Fe);if(P)throw ur(et);var rr=Oo[Z]||Ro;if(rt(et[Ls]))te("throw"+(Z===1?"Critical":"Warning"),et);else{if(ze){var sr=+et[yu];!g[sr]&&b>=Z&&(j[rr](et[Ls]),g[sr]=!0)}else b>=Z&&j[rr](et[Ls]);G(Z,et)}},j.debugToConsole=function(Z){mp("debug",Z),te("warning",Z)},j[Rs]=function(Z){mp("warn",Z),te("warning",Z)},j.errorToConsole=function(Z){mp("error",Z),te("error",Z)},j.resetInternalMessageCount=function(){p=0,g={}},j[td]=G,j[Qo]=function(Z){M&&M.rm(),M=null};function G(Z,_e){if(!K()){var ye=!0,Fe=pf+_e[yu];if(g[Fe]?ye=!1:g[Fe]=!0,ye&&(Z<=x&&(j.queue[Ur](_e),p++,te(Z===1?"error":"warn",_e)),p===R)){var ze="Internal events throttle limit per PageView reached for this app.",et=new hp(23,ze,!1);j.queue[Ur](et),Z===1?j.errorToConsole(ze):j[Rs](ze)}}}function H(Z){return ul(ha(Z,gd,j).cfg,function(_e){var ye=_e.cfg;b=ye[jc],x=ye.loggingLevelTelemetry,R=ye.maxMessageLimit,P=ye.enableDebug})}function K(){return p>=R}function te(Z,_e){var ye=vp(c||{});ye&&ye[Qu]&&ye[Qu](Z,_e)}})}return a.__ieDyn=1,a}();function nv(a){return a||new dc}function Gr(a,c,p,g,b,x){x===void 0&&(x=!1),nv(a)[Xi](c,p,g,b,x)}function Ws(a,c){nv(a)[Rs](c)}function av(a,c,p){nv(a)[td](c,p)}var xu,ao,Fn="toGMTString",yd="toUTCString",pc="cookie",ll="expires",ds="isCookieUseDisabled",io="disableCookiesUsage",ko="_ckMgr",Sd=null,_p=null,iv=null,ps,ov={},wd={},sv=(xu={cookieCfg:ka((ao={},ao[fa]={fb:"cookieDomain",dfVal:up},ao.path={fb:"cookiePath",dfVal:up},ao.enabled=Zn,ao.ignoreCookies=Zn,ao.blockedCookies=Zn,ao)),cookieDomain:Zn,cookiePath:Zn},xu[io]=Zn,xu);function vs(){!ps&&(ps=$f(function(){return za()}))}function Mm(a,c){var p=N[ko]||wd[ko];return p||(p=N[ko]=N(a,c),wd[ko]=p),p}function Pu(a){return a?a.isEnabled():!0}function uv(a,c){return c&&a&&qt(a.ignoreCookies)?ua(a.ignoreCookies,c)!==-1:!1}function f(a,c){return c&&a&&qt(a.blockedCookies)&&ua(a.blockedCookies,c)!==-1?!0:uv(a,c)}function m(a,c){var p=c[ks];if(at(p)){var g=void 0;rt(a[ds])||(g=!a[ds]),rt(a[io])||(g=!a[io]),p=g}return p}function y(a,c){var p;if(a)p=a.getCookieMgr();else if(c){var g=c.cookieCfg;g&&g[ko]?p=g[ko]:p=N(c)}return p||(p=Mm(c,(a||{})[qr])),p}function N(a,c){var p,g,b,x,R,P,M,j,G;a=ha(a||wd,null,c).cfg,R=ul(a,function(K){K[_u](K.cfg,sv),g=K.ref(K.cfg,"cookieCfg"),b=g[Su]||"/",x=g[fa],P=m(a,g)!==!1,M=g.getCookie||ne,j=g.setCookie||ge,G=g.delCookie||ge},c);var H=(p={isEnabled:function(){var K=m(a,g)!==!1&&P&&U(c),te=wd[ko];return K&&te&&H!==te&&(K=Pu(te)),K},setEnabled:function(K){P=K!==!1,g[ks]=K},set:function(K,te,Z,_e,ye){var Fe=!1;if(Pu(H)&&!f(g,K)){var ze={},et=xa(te||vr),rr=Vi(et,";");if(rr!==-1&&(et=xa(kn(te,rr)),ze=V(on(te,rr+1))),vi(ze,fa,_e||x,qi,rt),!at(Z)){var sr=Eu();if(rt(ze[ll])){var Un=lu(),fn=Un+Z*1e3;if(fn>0){var jn=new Date;jn.setTime(fn),vi(ze,ll,J(jn,sr?Fn:yd)||J(jn,sr?Fn:yd)||vr,qi)}}sr||vi(ze,"max-age",vr+Z,null,rt)}var Yi=bu();Yi&&Yi[es]==="https:"&&(vi(ze,"secure",null,null,rt),_p===null&&(_p=!tt((si()||{})[Xd])),_p&&vi(ze,"SameSite","None",null,rt)),vi(ze,Su,ye||b,null,rt),j(K,ae(et,ze)),Fe=!0}return Fe},get:function(K){var te=vr;return Pu(H)&&!uv(g,K)&&(te=M(K)),te},del:function(K,te){var Z=!1;return Pu(H)&&(Z=H.purge(K,te)),Z},purge:function(K,te){var Z,_e=!1;if(U(c)){var ye=(Z={},Z[Su]=te||"/",Z[ll]="Thu, 01 Jan 1970 00:00:01 GMT",Z);Eu()||(ye["max-age"]="0"),G(K,ae(vr,ye)),_e=!0}return _e}},p[Qo]=function(K){R&&R.rm(),R=null},p);return H[ko]=H,H}function U(a){if(Sd===null){Sd=!1,!ps&&vs();try{var c=ps.v||{};Sd=c[pc]!==void 0}catch(p){Gr(a,2,68,"Cannot access document.cookie - "+os(p),{exception:ur(p)})}}return Sd}function V(a){var c={};if(a&&a[pt]){var p=xa(a)[pi](";");dt(p,function(g){if(g=xa(g||vr),g){var b=Vi(g,"=");b===-1?c[g]=null:c[xa(kn(g,b))]=xa(on(g,b+1))}})}return c}function J(a,c){return tr(a[c])?a[c]():null}function ae(a,c){var p=a||vr;return Ar(c,function(g,b){p+="; "+g+(at(b)?vr:"="+b)}),p}function ne(a){var c=vr;if(!ps&&vs(),ps.v){var p=ps.v[pc]||vr;iv!==p&&(ov=V(p),iv=p),c=xa(ov[a]||vr)}return c}function ge(a,c){!ps&&vs(),ps.v&&(ps.v[pc]=a+"="+c)}function tt(a){return Ht(a)?!!(wt(a,"CPU iPhone OS 12")||wt(a,"iPad; CPU OS 12")||wt(a,"Macintosh; Intel Mac OS X 10_14")&&wt(a,"Version/")&&wt(a,"Safari")||wt(a,"Macintosh; Intel Mac OS X 10_14")&&Hf(a,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||wt(a,"Chrome/5")||wt(a,"Chrome/6")||wt(a,"UnrealEngine")&&!wt(a,"Chrome")||wt(a,"UCBrowser/12")||wt(a,"UCBrowser/11")):!1}var bt={perfEvtsSendAll:!1};function Jt(a){a.h=null;var c=a.cb;a.cb=[],dt(c,function(p){nt(p.fn,[p.arg])})}function ot(a,c,p,g){dt(a,function(b){b&&b[c]&&(p?(p.cb[Ur]({fn:g,arg:b}),p.h=p.h||Bu(Jt,0,p)):nt(g,[b]))})}var lt=function(){function a(c){this.listeners=[];var p,g,b=[],x={h:null,cb:[]},R=ha(c,bt);g=R[Ai](function(P){p=!!P.cfg.perfEvtsSendAll}),xi(a,this,function(P){wn(P,"listeners",{g:function(){return b}}),P[wa]=function(M){b[Ur](M)},P[Xo]=function(M){for(var j=ua(b,M);j>-1;)b[To](j,1),j=ua(b,M)},P[Kp]=function(M){ot(b,Kp,x,function(j){j[Kp](M)})},P[Bl]=function(M,j){ot(b,Bl,x,function(G){G[Bl](M,j)})},P[Wp]=function(M,j){ot(b,Wp,j?x:null,function(G){G[Wp](M,j)})},P[zl]=function(M){M&&(p||!M[rd]())&&ot(b,zl,null,function(j){M[Oi]?Bu(function(){return j[zl](M)},0):j[zl](M)})},P[Hc]=function(M){M&&M[pt]&&ot(b,Hc,x,function(j){j[Hc](M)})},P[op]=function(M){M&&M[Ul]&&ot(b,op,x,function(j){j[op](M)})},P[Hn]=function(M,j){if(M>0){var G=j||0;ot(b,Hn,x,function(H){H[Hn](M,G)})}},P[Qo]=function(M){var j=function(){g&&g.rm(),g=null,b=[],x.h&&x.h[Io](),x.h=null,x.cb=[]},G;if(ot(b,"unload",null,function(H){var K=H[Qo](M);K&&(G||(G=[]),G[Ur](K))}),G)return Za(function(H){return $l(od(G),function(){j(),H()})});j()}})}return a.__ieDyn=1,a}(),ir="ctx",Ut="ParentContextKey",gr="ChildrenContextKey",br=null,At=function(){function a(c,p,g){var b=this;if(b.start=lu(),b[Do]=c,b[Oi]=g,b[rd]=function(){return!1},tr(p)){var x;wn(b,"payload",{g:function(){return!x&&tr(p)&&(x=p(),p=null),x}})}b[xo]=function(R){return R?R===a[Ut]||R===a[gr]?b[R]:(b[ir]||{})[R]:null},b[Ja]=function(R,P){if(R)if(R===a[Ut])b[R]||(b[rd]=function(){return!0}),b[R]=P;else if(R===a[gr])b[R]=P;else{var M=b[ir]=b[ir]||{};M[R]=P}},b[$c]=function(){var R=0,P=b[xo](a[gr]);if(qt(P))for(var M=0;M<P[pt];M++){var j=P[M];j&&(R+=j[Co])}b[Co]=lu()-b.start,b.exTime=b[Co]-R,b[$c]=function(){}}}return a.ParentContextKey="parent",a.ChildrenContextKey="childEvts",a}(),En=function(){function a(c){this.ctx={},xi(a,this,function(p){p.create=function(g,b,x){return new At(g,b,x)},p.fire=function(g){g&&(g[$c](),c&&tr(c[zl])&&c[zl](g))},p[Ja]=function(g,b){if(g){var x=p[ir]=p[ir]||{};x[g]=b}},p[xo]=function(g){return(p[ir]||{})[g]}})}return a.__ieDyn=1,a}(),vc="CoreUtils.doPerf";function Js(a,c,p,g,b){if(a){var x=a;if(x[Vc]&&(x=x[Vc]()),x){var R=void 0,P=x[xo](vc);try{if(R=x.create(c(),g,b),R){if(P&&R[Ja]&&(R[Ja](At[Ut],P),P[xo]&&P[Ja])){var M=P[xo](At[gr]);M||(M=[],P[Ja](At[gr],M)),M[Ur](R)}return x[Ja](vc,R),p(R)}}catch(j){R&&R[Ja]&&R[Ja]("exception",j)}finally{R&&x.fire(R),x[Ja](vc,P)}}}return p()}function fl(){return br}function mf(){var a=bd();return on(a,0,8)+"-"+on(a,8,12)+"-"+on(a,12,16)+"-"+on(a,16,20)+"-"+on(a,20)}function bd(){for(var a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],c=vr,p,g=0;g<4;g++)p=rl(),c+=a[p&15]+a[p>>4&15]+a[p>>8&15]+a[p>>12&15]+a[p>>16&15]+a[p>>20&15]+a[p>>24&15]+a[p>>28&15];var b=a[8+(rl()&3)|0];return _o(c,0,8)+_o(c,9,4)+"4"+_o(c,13,3)+b+_o(c,16,3)+_o(c,19,12)}var hf=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,_f="00",Ed="ff",gf="00000000000000000000000000000000",Re="0000000000000000",vt=1;function Bt(a,c,p){return a&&a[pt]===c&&a!==p?!!a.match(/^[\da-f]*$/i):!1}function en(a,c,p){return Bt(a,c)?a:p}function Ea(a){(isNaN(a)||a<0||a>255)&&(a=1);for(var c=a.toString(16);c[pt]<2;)c="0"+c;return c}function Ta(a,c,p,g){var b;return b={},b[Ri]=Bt(g,2,Ed)?g:_f,b[ep]=_i(a)?a:bd(),b[Yl]=ms(c)?c:kn(bd(),16),b.traceFlags=p>=0&&p<=255?p:1,b}function Xn(a,c){var p;if(!a||(qt(a)&&(a=a[0]||""),!a||!Ht(a)||a[pt]>8192))return null;if(a.indexOf(",")!==-1){var g=a[pi](",");a=g[c>0&&g[pt]>c?c:0]}var b=hf.exec(xa(a));return!b||b[1]===Ed||b[2]===gf||b[3]===Re?null:(p={version:(b[1]||vr)[Ka](),traceId:(b[2]||vr)[Ka](),spanId:(b[3]||vr)[Ka]()},p[nc]=parseInt(b[4],16),p)}function _i(a){return Bt(a,32,gf)}function ms(a){return Bt(a,16,Re)}function dl(a){return!(!a||!Bt(a[Ri],2,Ed)||!Bt(a[ep],32,gf)||!Bt(a[Yl],16,Re)||!Bt(Ea(a[nc]),2))}function rm(a){return dl(a)?(a[nc]&vt)===vt:!1}function Au(a){if(a){var c=Ea(a[nc]);Bt(c,2)||(c="01");var p=a[Ri]||_f;return p!=="00"&&p!=="ff"&&(p=_f),"".concat(p.toLowerCase(),"-").concat(en(a.traceId,32,gf).toLowerCase(),"-").concat(en(a.spanId,16,Re).toLowerCase(),"-").concat(c.toLowerCase())}return""}function Td(a){var c="traceparent",p=Xn(Gv(c),a);return p||(p=Xn(tf(c),a)),p}var Lm=Vs("plugin");function Qn(a){return Lm.get(a,"state",{},!0)}function hs(a,c){for(var p=[],g=null,b=a[ki](),x;b;){var R=b[No]();if(R){g&&g[ec]&&R[to]&&g[ec](R),x=Qn(R);var P=!!x[Aa];R[Aa]&&(P=R[Aa]()),P||p[Ur](R),g=R,b=b[ki]()}}dt(p,function(M){var j=a[hn]();M[An](a.getCfg(),j,c,a[ki]()),x=Qn(M),!M[hn]&&!x[hn]&&(x[hn]=j),x[Aa]=!0,delete x[ca]})}function nm(a){return a.sort(function(c,p){var g=0;if(p){var b=p[to];c[to]?g=b?c[ql]-p[ql]:1:b&&(g=-1)}else g=c?1:-1;return g})}function Fm(a){var c={};return{getName:function(){return c[Do]},setName:function(p){a&&a.setName(p),c[Do]=p},getTraceId:function(){return c[ep]},setTraceId:function(p){a&&a.setTraceId(p),_i(p)&&(c[ep]=p)},getSpanId:function(){return c[Yl]},setSpanId:function(p){a&&a.setSpanId(p),ms(p)&&(c[Yl]=p)},getTraceFlags:function(){return c[nc]},setTraceFlags:function(p){a&&a.setTraceFlags(p),c[nc]=p}}}var cv="TelemetryPluginChain",Um="_hasRun",jm="_getTelCtx",Hh=0;function Ym(a,c,p){for(;a;){if(a[No]()===p)return a;a=a[ki]()}return vl([p],c.config||{},c)}function $m(a,c,p,g){var b=null,x=[];c||(c=ha({},null,p[qr])),g!==null&&(b=g?Ym(a,p,g):a);var R={_next:M,ctx:{core:function(){return p},diagLog:function(){return vf(p,c.cfg)},getCfg:function(){return c.cfg},getExtCfg:G,getConfig:H,hasNext:function(){return!!b},getNext:function(){return b},setNext:function(te){b=te},iterate:K,onComplete:P}};function P(te,Z){for(var _e=[],ye=2;ye<arguments.length;ye++)_e[ye-2]=arguments[ye];te&&x[Ur]({func:te,self:rt(Z)?R.ctx:Z,args:_e})}function M(){var te=b;if(b=te?te[ki]():null,!te){var Z=x;Z&&Z[pt]>0&&(dt(Z,function(_e){try{_e.func.call(_e.self,_e.args)}catch(ye){Gr(p[qr],2,73,"Unexpected Exception during onComplete - "+ur(ye))}}),x=[])}return te}function j(te,Z){var _e=null,ye=c.cfg;if(ye&&te){var Fe=ye[cc];!Fe&&Z&&(Fe={}),ye[cc]=Fe,Fe=c.ref(ye,cc),Fe&&(_e=Fe[te],!_e&&Z&&(_e={}),Fe[te]=_e,_e=c.ref(Fe,te))}return _e}function G(te,Z){var _e=j(te,!0);return Z&&Ar(Z,function(ye,Fe){if(at(_e[ye])){var ze=c.cfg[ye];(ze||!at(ze))&&(_e[ye]=ze)}of(c,_e,ye,Fe)}),c[_u](_e,Z)}function H(te,Z,_e){_e===void 0&&(_e=!1);var ye,Fe=j(te,!1),ze=c.cfg;return Fe&&(Fe[Z]||!at(Fe[Z]))?ye=Fe[Z]:(ze[Z]||!at(ze[Z]))&&(ye=ze[Z]),ye||!at(ye)?ye:_e}function K(te){for(var Z;Z=R._next();){var _e=Z[No]();_e&&te(_e)}}return R}function pl(a,c,p,g){var b=ha(c),x=$m(a,b,p,g),R=x.ctx;function P(j){var G=x._next();return G&&G[to](j,R),!G}function M(j,G){return j===void 0&&(j=null),qt(j)&&(j=vl(j,b.cfg,p,G)),pl(j||R[ki](),b.cfg,p,G)}return R[Ln]=P,R[gu]=M,R}function yf(a,c,p){var g=ha(c.config),b=$m(a,g,c,p),x=b.ctx;function R(M){var j=b._next();return j&&j[Qo](x,M),!j}function P(M,j){return M===void 0&&(M=null),qt(M)&&(M=vl(M,g.cfg,c,j)),yf(M||x[ki](),c,j)}return x[Ln]=R,x[gu]=P,x}function Zs(a,c,p){var g=ha(c.config),b=$m(a,g,c,p),x=b.ctx;function R(M){return x.iterate(function(j){tr(j[Jn])&&j[Jn](x,M)})}function P(M,j){return M===void 0&&(M=null),qt(M)&&(M=vl(M,g.cfg,c,j)),Zs(M||x[ki](),c,j)}return x[Ln]=R,x[gu]=P,x}function vl(a,c,p,g){var b=null,x=!g;if(qt(a)&&a[pt]>0){var R=null;dt(a,function(P){if(!x&&g===P&&(x=!0),x&&P&&tr(P[to])){var M=qm(P,c,p);b||(b=M),R&&R._setNext(M),R=M}})}return g&&!b?vl([g],c,p):b}function qm(a,c,p){var g=null,b=tr(a[to]),x=tr(a[ec]),R;a?R=a[Qi]+"-"+a[ql]+"-"+Hh++:R="Unknown-0-"+Hh++;var P={getPlugin:function(){return a},getNext:function(){return g},processTelemetry:G,unload:H,update:K,_id:R,_setNext:function(te){g=te}};function M(){var te;return a&&tr(a[jm])&&(te=a[jm]()),te||(te=pl(P,c,p)),te}function j(te,Z,_e,ye,Fe){var ze=!1,et=a?a[Qi]:cv,rr=te[Um];return rr||(rr=te[Um]={}),te.setNext(g),a&&Js(te[hn](),function(){return et+":"+_e},function(){rr[R]=!0;try{var sr=g?g._id:vr;sr&&(rr[sr]=!1),ze=Z(te)}catch(fn){var Un=g?rr[g._id]:!0;Un&&(ze=!0),(!g||!Un)&&Gr(te[Qu](),1,73,"Plugin ["+et+"] failed during "+_e+" - "+ur(fn)+", run flags: "+ur(rr))}},ye,Fe),ze}function G(te,Z){Z=Z||M();function _e(ye){if(!a||!b)return!1;var Fe=Qn(a);return Fe[ca]||Fe[uc]?!1:(x&&a[ec](g),a[to](te,ye),!0)}j(Z,_e,"processTelemetry",function(){return{item:te}},!te.sync)||Z[Ln](te)}function H(te,Z){function _e(){var ye=!1;if(a){var Fe=Qn(a),ze=a[hn]||Fe[hn];a&&(!ze||ze===te.core())&&!Fe[ca]&&(Fe[hn]=null,Fe[ca]=!0,Fe[Aa]=!1,a[ca]&&a[ca](te,Z)===!0&&(ye=!0))}return ye}j(te,_e,"unload",function(){},Z[Oi])||te[Ln](Z)}function K(te,Z){function _e(){var ye=!1;if(a){var Fe=Qn(a),ze=a[hn]||Fe[hn];a&&(!ze||ze===te.core())&&!Fe[ca]&&a[Jn]&&a[Jn](te,Z)===!0&&(ye=!0)}return ye}j(te,_e,"update",function(){},!1)||te[Ln](Z)}return On(P)}var am=function(){function a(c,p,g,b){var x=this,R=pl(c,p,g,b);Wc(x,R,mo(R))}return a}();function lv(){var a=[];function c(g){g&&a[Ur](g)}function p(g,b){dt(a,function(x){try{x(g,b)}catch(R){Gr(g[Qu](),2,73,"Unexpected error calling unload handler - "+ur(R))}}),a=[]}return{add:c,run:p}}var fv,Id;function lh(a,c){fv=a,Id=c}function Bm(){var a=[];function c(g){var b=a;a=[],dt(b,function(x){try{(x.rm||x.remove).call(x)}catch(R){Gr(g,2,73,"Unloading:"+ur(R))}}),fv&&b[pt]>fv&&(Id?Id("doUnload",b):Gr(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))}function p(g){g&&(Ti(a,g),fv&&a[pt]>fv&&(Id?Id("Add",a):Gr(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}return{run:c,add:p}}var gp,ml="getPlugin",P_=(gp={},gp[cc]={isVal:up,v:{}},gp),fh=function(){function a(){var c=this,p,g,b,x,R;j(),xi(a,c,function(G){G[An]=function(H,K,te,Z){M(H,K,Z),p=!0},G[ca]=function(H,K){var te,Z=G[hn];if(!Z||H&&Z!==H[hn]())return;var _e,ye=!1,Fe=H||yf(null,Z,b&&b[ml]?b[ml]():b),ze=K||(te={reason:0},te[Oi]=!1,te);function et(){ye||(ye=!0,x.run(Fe,K),R.run(Fe[Qu]()),_e===!0&&Fe[Ln](ze),j())}return!G[cn]||G[cn](Fe,ze,et)!==!0?et():_e=!0,_e},G[Jn]=function(H,K){var te=G[hn];if(!te||H&&te!==H[hn]())return;var Z,_e=!1,ye=H||Zs(null,te,b&&b[ml]?b[ml]():b),Fe=K||{reason:0};function ze(){_e||(_e=!0,M(ye.getCfg(),ye.core(),ye[ki]()))}return!G._doUpdate||G._doUpdate(ye,Fe,ze)!==!0?ze():Z=!0,Z},Mi(G,"_addUnloadCb",function(){return x},"add"),Mi(G,"_addHook",function(){return R},"add"),wn(G,"_unloadHooks",{g:function(){return R}})}),c[Qu]=function(G){return P(G)[Qu]()},c[Aa]=function(){return p},c.setInitialized=function(G){p=G},c[ec]=function(G){b=G},c[Ln]=function(G,H){H?H[Ln](G):b&&tr(b[to])&&b[to](G,null)},c._getTelCtx=P;function P(G){G===void 0&&(G=null);var H=G;if(!H){var K=g||pl(null,{},c[hn]);b&&b[ml]?H=K[gu](null,b[ml]):H=K[gu](null,b)}return H}function M(G,H,K){ha(G,P_,vf(H)),!K&&H&&(K=H[ed]()[ki]());var te=b;b&&b[ml]&&(te=b[ml]()),c[hn]=H,g=pl(K,G,H,te)}function j(){p=!1,c[hn]=null,g=null,b=null,R=Bm(),x=lv()}}return a.__ieDyn=1,a}();function Vh(a,c,p){var g={id:c,fn:p};Ti(a,g);var b={remove:function(){dt(a,function(x,R){if(x.id===g.id)return a[To](R,1),-1})}};return b}function zm(a,c,p){for(var g=!1,b=a[pt],x=0;x<b;++x){var R=a[x];if(R)try{if(R.fn[Eo](null,[c])===!1){g=!0;break}}catch(P){Gr(p,2,64,"Telemetry initializer failed: "+os(P),{exception:ur(P)},!0)}}return!g}var A_=function(a){zu(c,a);function c(){var p=a.call(this)||this;p.identifier="TelemetryInitializerPlugin",p.priority=199;var g,b;x(),xi(c,p,function(R,P){R.addTelemetryInitializer=function(M){return Vh(b,g++,M)},R[to]=function(M,j){zm(b,M,j?j[Qu]():R[Qu]())&&R[Ln](M,j)},R[cn]=function(){x()}});function x(){g=0,b=[]}return p}return c.__ieDyn=1,c}(fh),Sf,dv="Plugins must provide initialize method",im="_notificationManager",wf="SDK is still unloading...",pv="SDK is not initialized",dh=100,Kh=5e4,Nd=$o((Sf={cookieCfg:{}},Sf[Ys]={rdOnly:!0,ref:!0,v:[]},Sf[js]={rdOnly:!0,ref:!0,v:[]},Sf[cc]={ref:!0,v:{}},Sf[as]=Zn,Sf.loggingLevelConsole=0,Sf.diagnosticLogInterval=Zn,Sf));function Wh(a,c){return new En(c)}function R_(a,c,p){var g,b=[],x=[],R={};return dt(p,function(P){(at(P)||at(P[An]))&&Pn(dv);var M=P[ql],j=P[Qi];P&&M&&(at(R[M])?R[M]=j:Ws(a,"Two extensions have same priority #"+M+" - "+R[M]+", "+j)),!M||M<c?b[Ur](P):x[Ur](P)}),g={},g[hn]=b,g[js]=x,g}function ph(a,c){var p=!1;return dt(c,function(g){if(g===a)return p=!0,-1}),p}function om(a,c,p,g){p&&Ar(p,function(b,x){g&&li(x)&&li(c[b])&&om(a,c[b],x,g),g&&li(x)&&li(c[b])?om(a,c[b],x,g):a.set(c,b,x)})}function vh(a,c){var p=null,g=-1;return dt(a,function(b,x){if(b.w===c)return p=b,g=x,-1}),{i:g,l:p}}function Gm(a,c){var p=vh(a,c).l;return p||(p={w:c,rm:function(){var g=vh(a,c);g.i!==-1&&a[To](g.i,1)}},a[Ur](p)),p}function vv(a,c,p){dt(c,function(g){var b=ul(a,g.w,p);delete g.w,g.rm=function(){b.rm()}})}function Dd(a,c,p,g){return c.add(a[Ai](function(b){var x=b.cfg.disableDbgExt;x===!0&&g&&(p[Xo](g),g=null),p&&!g&&x!==!0&&(g=St(b.cfg),p[wa](g))})),g}function mh(a){return wn({rm:function(){a.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(a)+">"}})}var sm=function(){function a(){var c,p,g,b,x,R,P,M,j,G,H,K,te,Z,_e,ye,Fe,ze,et,rr,sr,Un,fn,jn,Yi,wi,Pf,lm,Af,Qe,jt,Nn;xi(a,this,function(Oe){Or(),Oe._getDbgPlgTargets=function(){return[fn,b]},Oe[Aa]=function(){return p},Oe.activeStatus=function(){return wi},Oe._setPendingStatus=function(){wi=3},Oe[An]=function(be,mt,Vt,Rt){te&&Pn(wf),Oe[Aa]()&&Pn("Core cannot be initialized more than once"),c=ha(be,Nd,Vt||Oe[qr],!1),be=c.cfg,uo(c[Ai](function(mn){var Na=mn.cfg,co=wi===3;if(!co){lm=Na.initInMemoMaxSize||dh;var Uo=Na[Uc],kf=Na.endpointUrl;if(at(Uo)){sr=null,wi=un[Ju];var Ev="Please provide instrumentation key";p?(Gr(g,1,100,Ev),na()):Pn(Ev);return}var gh=[];if(wr(Uo)?(gh[Ur](Uo),sr=null):sr=Uo,wr(kf)?(gh[Ur](kf),Pf=null):Pf=kf,gh[pt]){Af=!1,wi=3;var gg=up(Na.initTimeOut)?Na.initTimeOut:Kh,Ey=Gc(gh);Bu(function(){Af||Nt()},gg),$l(Ey,function(Yn){try{if(Af)return;if(!Yn.rejected){var Fa=Yn[Qf];if(Fa&&Fa[pt]){var O_=Fa[0];if(sr=O_&&O_[Qf],Fa[pt]>1){var Ua=Fa[1];Pf=Ua&&Ua[Qf]}}sr&&(be[Uc]=sr,be.endpointUrl=Pf)}Nt()}catch{Af||Nt()}})}else Nt();var e_=mn.ref(mn.cfg,cc);Ar(e_,function(Yn){mn.ref(e_,Yn)})}})),x=Rt,et=Dd(c,ze,x&&Oe[Os](),et),Of(),Oe[qr]=Vt;var Kt=be[Ys];if(G=[],G[Ur].apply(G,Wi(Wi([],mt,!1),Kt)),H=be[js],Xa(null),(!K||K[pt]===0)&&Pn("No "+js+" available"),H&&H[pt]>1){var Rn=Oe[No]("TeeChannelController");(!Rn||!Rn.plugin)&&Gr(g,1,28,"TeeChannel required")}vv(be,Un,g),Un=null,p=!0,wi===un.ACTIVE&&na()},Oe.getChannels=function(){var be=[];return K&&dt(K,function(mt){be[Ur](mt)}),On(be)},Oe.track=function(be){Js(Oe[Vc](),function(){return"AppInsightsCore:track"},function(){be===null&&(Ia(be),Pn("Invalid telemetry item")),!be[Do]&&at(be[Do])&&(Ia(be),Pn("telemetry name required")),be[Zu]=be[Zu]||sr,be[Co]=be[Co]||is(new Date),be.ver=be.ver||"4.0",!te&&Oe[Aa]()&&wi===un.ACTIVE?bi()[Ln](be):wi!==un[Ju]&&b[pt]<=lm&&b[Ur](be)},function(){return{item:be}},!be.sync)},Oe[ed]=bi,Oe[Os]=function(){return x||(x=new lt(c.cfg),Oe[im]=x),x},Oe[wa]=function(be){Oe.getNotifyMgr()[wa](be)},Oe[Xo]=function(be){x&&x[Xo](be)},Oe.getCookieMgr=function(){return M||(M=N(c.cfg,Oe[qr])),M},Oe.setCookieMgr=function(be){M!==be&&(cf(M,!1),M=be)},Oe[Vc]=function(){return R||P||fl()},Oe.setPerfMgr=function(be){R=be},Oe.eventCnt=function(){return b[pt]},Oe.releaseQueue=function(){if(p&&b[pt]>0){var be=b;b=[],wi===2?dt(be,function(mt){mt[Zu]=mt[Zu]||sr,bi()[Ln](mt)}):Gr(g,2,20,"core init status is not active")}},Oe[Xu]=function(be){return _e=be||null,Nn=!1,Qe&&Qe[Io](),oo(!0)};function Nt(){Af=!0,at(sr)?(wi=un[Ju],Gr(g,1,112,"ikey can't be resolved from promises")):wi=un.ACTIVE,na()}function na(){p&&(Oe.releaseQueue(),Oe[Xu]())}function oo(be){if((!Qe||!Qe[ks])&&!Nn){var mt=be||g&&g.queue[pt]>0;mt&&(jt||(jt=!0,uo(c[Ai](function(Vt){var Rt=Vt.cfg.diagnosticLogInterval;(!Rt||!(Rt>0))&&(Rt=1e4);var Kt=!1;Qe&&(Kt=Qe[ks],Qe[Io]()),Qe=Kf(wv,Rt),Qe.unref(),Qe[ks]=Kt}))),Qe[ks]=!0)}return Qe}Oe[di]=function(){Nn=!0,Qe&&Qe[Io](),wv()},Wc(Oe,function(){return Z},["addTelemetryInitializer"]),Oe[Qo]=function(be,mt,Vt){var Rt;be===void 0&&(be=!0),p||Pn(pv),te&&Pn(wf);var Kt=(Rt={reason:50},Rt[Oi]=be,Rt.flushComplete=!1,Rt),Rn;be&&!mt&&(Rn=Za(function(co){mt=co}));var mn=yf(Rf(),Oe);mn[Ms](function(){ze.run(Oe[qr]),Om([M,x,g],be,function(){Or(),mt&&mt(Kt)})},Oe);function Na(co){Kt.flushComplete=co,te=!0,Fe.run(mn,Kt),Oe[di](),mn[Ln](Kt)}return wv(),Ad(be,Na,6,Vt),Rn},Oe[No]=so,Oe.addPlugin=function(be,mt,Vt,Rt){if(!be){Rt&&Rt(!1),Vm(dv);return}var Kt=so(be[Qi]);if(Kt&&!mt){Rt&&Rt(!1),Vm("Plugin ["+be[Qi]+"] is already loaded!");return}var Rn={reason:16};function mn(Uo){G[Ur](be),Rn.added=[be],Xa(Rn),Rt&&Rt(!0)}if(Kt){var Na=[Kt.plugin],co={reason:2,isAsync:!!Vt};Mu(Na,co,function(Uo){Uo?(Rn.removed=Na,Rn.reason|=32,mn()):Rt&&Rt(!1)})}else mn()},Oe.updateCfg=function(be,mt){mt===void 0&&(mt=!0);var Vt;if(Oe[Aa]()){Vt={reason:1,cfg:c.cfg,oldCfg:Vd({},c.cfg),newConfig:Vd({},be),merge:mt},be=Vt.newConfig;var Rt=c.cfg;be[Ys]=Rt[Ys],be[js]=Rt[js]}c._block(function(Kt){var Rn=Kt.cfg;om(Kt,Rn,be,mt),mt||Ar(Rn,function(mn){Bi(be,mn)||Kt.set(Rn,mn,Zn)}),Kt[_u](Rn,Nd)},!0),c[bo](),Vt&&bv(Vt)},Oe.evtNamespace=function(){return ye},Oe.flush=Ad,Oe.getTraceCtx=function(be){return rr||(rr=Fm()),rr},Oe.setTraceCtx=function(be){rr=be||null},Oe.addUnloadHook=uo,Mi(Oe,"addUnloadCb",function(){return Fe},"add"),Oe.onCfgChange=function(be){var mt;return p?mt=ul(c.cfg,be,Oe[qr]):mt=Gm(Un,be),mh(mt)},Oe.getWParam=function(){return Tl()||c.cfg.enableWParam?0:-1};function Fo(){var be={};jn=[];var mt=function(Vt){Vt&&dt(Vt,function(Rt){if(Rt[Qi]&&Rt[Ri]&&!be[Rt.identifier]){var Kt=Rt[Qi]+"="+Rt[Ri];jn[Ur](Kt),be[Rt.identifier]=Rt}})};mt(K),H&&dt(H,function(Vt){mt(Vt)}),mt(G)}function Or(){p=!1,c=ha({},Nd,Oe[qr]),c.cfg[jc]=1,wn(Oe,"config",{g:function(){return c.cfg},s:function(mt){Oe.updateCfg(mt,!1)}}),wn(Oe,"pluginVersionStringArr",{g:function(){return jn||Fo(),jn}}),wn(Oe,"pluginVersionString",{g:function(){return Yi||(jn||Fo(),Yi=jn.join(";")),Yi||vr}}),wn(Oe,"logger",{g:function(){return g||(g=new dc(c.cfg),c[qr]=g),g},s:function(mt){c[qr]=mt,g!==mt&&(cf(g,!1),g=mt)}}),Oe[qr]=new dc(c.cfg),fn=[];var be=Oe.config[Ys]||[];be.splice(0,be[pt]),Ti(be,fn),Z=new A_,b=[],cf(x,!1),x=null,R=null,P=null,cf(M,!1),M=null,j=null,G=[],H=null,K=null,te=!1,_e=null,ye=fs("AIBaseCore",!0),Fe=lv(),rr=null,sr=null,ze=Bm(),Un=[],Yi=null,jn=null,Nn=!1,Qe=null,jt=!1,wi=0,Pf=null,lm=null,Af=!1}function bi(){var be=pl(Rf(),c.cfg,Oe);return be[Ms](oo),be}function Xa(be){var mt=R_(Oe[qr],em,G);j=null,Yi=null,jn=null,K=(H||[])[0]||[],K=nm(Ti(K,mt[js]));var Vt=Ti(nm(mt[hn]),K);fn=On(Vt);var Rt=Oe.config[Ys]||[];Rt.splice(0,Rt[pt]),Ti(Rt,fn);var Kt=bi();K&&K[pt]>0&&hs(Kt[gu](K),Vt),hs(Kt,Vt),be&&bv(be)}function so(be){var mt=null,Vt=null,Rt=[];return dt(fn,function(Kt){if(Kt[Qi]===be&&Kt!==Z)return Vt=Kt,-1;Kt.getChannel&&Rt[Ur](Kt)}),!Vt&&Rt[pt]>0&&dt(Rt,function(Kt){if(Vt=Kt.getChannel(be),!Vt)return-1}),Vt&&(mt={plugin:Vt,setEnabled:function(Kt){Qn(Vt)[uc]=!Kt},isEnabled:function(){var Kt=Qn(Vt);return!Kt[ca]&&!Kt[uc]},remove:function(Kt,Rn){var mn;Kt===void 0&&(Kt=!0);var Na=[Vt],co=(mn={reason:1},mn[Oi]=Kt,mn);Mu(Na,co,function(Uo){Uo&&Xa({reason:32,removed:Na}),Rn&&Rn(Uo)})}}),mt}function Rf(){if(!j){var be=(fn||[]).slice();ua(be,Z)===-1&&be[Ur](Z),j=vl(nm(be),c.cfg,Oe)}return j}function Mu(be,mt,Vt){if(be&&be[pt]>0){var Rt=vl(be,c.cfg,Oe),Kt=yf(Rt,Oe);Kt[Ms](function(){var Rn=!1,mn=[];dt(G,function(co,Uo){ph(co,be)?Rn=!0:mn[Ur](co)}),G=mn,Yi=null,jn=null;var Na=[];H&&(dt(H,function(co,Uo){var kf=[];dt(co,function(Ev){ph(Ev,be)?Rn=!0:kf[Ur](Ev)}),Na[Ur](kf)}),H=Na),Vt&&Vt(Rn),oo()}),Kt[Ln](mt)}else Vt(!1)}function wv(){if(g&&g.queue){var be=g.queue.slice(0);g.queue[pt]=0,dt(be,function(mt){var Vt,Rt=(Vt={},Vt[Do]=_e||"InternalMessageId: "+mt[yu],Vt[Zu]=sr,Vt[Co]=is(new Date),Vt.baseType=hp.dataType,Vt.baseData={message:mt[Ls]},Vt);Oe.track(Rt)})}}function Ad(be,mt,Vt,Rt){var Kt=1,Rn=!1,mn=null;Rt=Rt||5e3;function Na(){Kt--,Rn&&Kt===0&&(mn&&mn[Io](),mn=null,mt&&mt(Rn),mt=null)}if(K&&K[pt]>0){var co=bi()[gu](K);co.iterate(function(Uo){if(Uo.flush){Kt++;var kf=!1;Uo.flush(be,function(){kf=!0,Na()},Vt)||kf||(be&&mn==null?mn=Bu(function(){mn=null,Na()},Rt):Na())}})}return Rn=!0,Na(),!0}function Of(){var be;uo(c[Ai](function(mt){var Vt=mt.cfg.enablePerfMgr;if(Vt){var Rt=mt.cfg[as];(be!==Rt||!be)&&(Rt||(Rt=Wh),Gl(mt.cfg,as,Rt),be=Rt,P=null),!R&&!P&&tr(Rt)&&(P=Rt(Oe,Oe[Os]()))}else P=null,be=null}))}function bv(be){var mt=Zs(Rf(),Oe);mt[Ms](oo),(!Oe._updateHook||Oe._updateHook(mt,be)!==!0)&&mt[Ln](be)}function Vm(be){var mt=Oe[qr];mt?(Gr(mt,2,73,be),oo()):Pn(be)}function Ia(be){var mt=Oe[Os]();mt&&mt[Bl]([be],2)}function uo(be){ze.add(be)}})}return a.__ieDyn=1,a}();function Kr(a,c){try{if(a&&a!==""){var p=ma().parse(a);if(p&&p[Uv]&&p[Uv]>=p.itemsAccepted&&p.itemsReceived-p.itemsAccepted===p.errors[pt])return p}}catch(g){Gr(c,1,43,"Cannot parse the response. "+(g[Do]||ur(g)),{response:a})}return null}var Xs="",Cd="NoResponseBody",yp="&"+Cd+"=true",mv="POST",um=function(){function a(){var c=0,p,g,b,x,R,P,M,j,G,H,K,te,Z,_e;xi(a,this,function(ye,Fe){var ze=!0;Af(),ye[An]=function(Qe,jt){b=jt,g&&Gr(b,1,28,"Sender is already initialized"),ye.SetConfig(Qe),g=!0},ye._getDbgPlgTargets=function(){return[g,x,P,p]},ye.SetConfig=function(Qe){try{if(R=Qe.senderOnCompleteCallBack||{},P=!!Qe.disableCredentials,M=Qe.fetchCredentials,x=!!Qe.isOneDs,p=!!Qe.enableSendPromise,G=!!Qe.disableXhr,H=!!Qe.disableBeacon,K=!!Qe.disableBeaconSync,_e=Qe.timeWrapper,Z=!!Qe.addNoResponse,te=!!Qe.disableFetchKeepAlive,j={sendPOST:wi},x||(ze=!1),P){var jt=bu();jt&&jt.protocol&&jt.protocol[Ka]()==="file:"&&(ze=!1)}return!0}catch{}return!1},ye.getSyncFetchPayload=function(){return c},ye.getSenderInst=function(Qe,jt){return Qe&&Qe[pt]?Un(Qe,jt):null},ye.getFallbackInst=function(){return j},ye[cn]=function(Qe,jt){Af()};function et(Qe,jt){fn(jt,200,{},Qe)}function rr(Qe,jt){Gr(b,2,26,"Failed to send telemetry.",{message:Qe}),fn(jt,400,{})}function sr(Qe){rr("No endpoint url is provided for the batch",Qe)}function Un(Qe,jt){for(var Nn,Oe=0,Nt=null,na=0;Nt==null&&na<Qe[pt];)Oe=Qe[na],!G&&Oe===1?Qp()?Nt=lm:ef()&&(Nt=wi):Oe===2&&Ql(jt)&&(!jt||!te)?Nt=Pf:Oe===3&&zv()&&(jt?!K:!H)&&(Nt=Yi),na++;return Nt?(Nn={_transport:Oe,_isSync:jt},Nn[rc]=Nt,Nn):null}function fn(Qe,jt,Nn,Oe){try{Qe&&Qe(jt,Nn,Oe)}catch{}}function jn(Qe,jt){var Nn=si(),Oe=Qe[tc];if(!Oe)return sr(jt),!0;Oe=Qe[tc]+(Z?yp:Xs);var Nt=Qe[Ul],na=x?Nt:new Blob([Nt],{type:"text/plain;charset=UTF-8"}),oo=Nn.sendBeacon(Oe,na);return oo}function Yi(Qe,jt,Nn){var Oe=Qe[Ul];try{if(Oe)if(jn(Qe,jt))et(Xs,jt);else{var Nt=R&&R.beaconOnRetry;Nt&&tr(Nt)?Nt(Qe,jt,jn):(j&&j[rc](Qe,jt,!0),Gr(b,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(na){x&&Ws(b,"Failed to send telemetry using sendBeacon API. Ex:"+ur(na)),fn(jt,x?0:400,{},Xs)}}function wi(Qe,jt,Nn){var Oe,Nt,na,oo=Qe[ns]||{};!Nn&&p&&(Oe=Za(function(Xa,so){Nt=Xa,na=so})),x&&Nn&&Qe.disableXhrSync&&(Nn=!1);var Fo=Qe[tc];if(!Fo){sr(jt),Nt&&Nt(!1);return}var Or=xm(mv,Fo,ze,!0,Nn,Qe[jl]);x||Or[Dm]("Content-type","application/json"),dt(mo(oo),function(Xa){Or[Dm](Xa,oo[Xa])}),Or.onreadystatechange=function(){x||(bi(Or),Or.readyState===4&&Nt&&Nt(!0))},Or.onload=function(){x&&bi(Or)};function bi(Xa){var so=R&&R.xhrOnComplete,Rf=so&&tr(so);if(Rf)so(Xa,jt,Qe);else{var Mu=qs(Xa);fn(jt,Xa[rs],wu(Xa,x),Mu)}}return Or.onerror=function(Xa){fn(jt,x?Or[rs]:400,wu(Or,x),x?Xs:Jc(Or)),na&&na(Xa)},Or.ontimeout=function(){fn(jt,x?Or[rs]:500,wu(Or,x),x?Xs:Jc(Or)),Nt&&Nt(!1)},Or.send(Qe[Ul]),Oe}function Pf(Qe,jt,Nn){var Oe,Nt=Qe[tc],na=Qe[Ul],oo=x?na:new Blob([na],{type:"application/json"}),Fo,Or,bi,Xa=new Headers,so=na[pt],Rf=!1,Mu=!1,wv=Qe[ns]||{},Ad=(Oe={method:mv,body:oo},Oe[lf]=!0,Oe);Qe.headers&&mo(Qe.headers)[pt]>0&&(dt(mo(wv),function(Ia){Xa.append(Ia,wv[Ia])}),Ad[ns]=Xa),M?Ad.credentials=M:ze&&x&&(Ad.credentials="include"),Nn&&(Ad.keepalive=!0,c+=so,x?Qe._sendReason===2&&(Rf=!0,Z&&(Nt+=yp)):Rf=!0);var Of=new Request(Nt,Ad);try{Of[lf]=!0}catch{}if(!Nn&&p&&(Fo=Za(function(Ia,uo){Or=Ia,bi=uo})),!Nt){sr(jt),Or&&Or(!1);return}function bv(Ia){fn(jt,x?0:400,{},x?Xs:Ia)}function Vm(Ia,uo,be){var mt=Ia[rs],Vt=R.fetchOnComplete;Vt&&tr(Vt)?Vt(Ia,jt,be||Xs,uo):fn(jt,mt,{},be||Xs)}try{$l(fetch(x?Nt:Of,x?Ad:null),function(Ia){if(Nn&&(c-=so,so=0),!Mu)if(Mu=!0,Ia.rejected)bv(Ia.reason&&Ia.reason[Ls]),bi&&bi(Ia.reason);else{var uo=Ia[Qf];try{!x&&!uo.ok?(bv(uo.statusText),Or&&Or(!1)):x&&!uo.body?(Vm(uo,null,Xs),Or&&Or(!0)):$l(uo.text(),function(be){Vm(uo,Qe,be[Qf]),Or&&Or(!0)})}catch(be){bv(ur(be)),bi&&bi(be)}}})}catch(Ia){Mu||(bv(ur(Ia)),bi&&bi(Ia))}return Rf&&!Mu&&(Mu=!0,fn(jt,200,{}),Or&&Or(!0)),x&&!Mu&&Qe[jl]>0&&_e&&_e.set(function(){Mu||(Mu=!0,fn(jt,500,{}),Or&&Or(!0))},Qe[jl]),Fo}function lm(Qe,jt,Nn){var Oe=oi(),Nt=new XDomainRequest,na=Qe[Ul];Nt.onload=function(){var Xa=qs(Nt),so=R&&R.xdrOnComplete;so&&tr(so)?so(Nt,jt,Qe):fn(jt,200,{},Xa)},Nt.onerror=function(){fn(jt,400,{},x?Xs:Hl(Nt))},Nt.ontimeout=function(){fn(jt,500,{})},Nt.onprogress=function(){};var oo=Oe&&Oe.location&&Oe.location[es]||"",Fo=Qe[tc];if(!Fo){sr(jt);return}if(!x&&Fo.lastIndexOf(oo,0)!==0){var Or="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";Gr(b,2,40,". "+Or),rr(Or,jt);return}var bi=x?Fo:Fo[ba](/^(https?:)/,"");Nt.open(mv,bi),Qe[jl]&&(Nt[jl]=Qe[jl]),Nt.send(na),x&&Nn?_e&&_e.set(function(){Nt.send(na)},0):Nt.send(na)}function Af(){c=0,g=!1,p=!1,b=null,x=null,R=null,P=null,M=null,j=null,G=!1,H=!1,K=!1,te=!1,Z=!1,_e=null}})}return a.__ieDyn=1,a}(),bf="on",xd="attachEvent",Jh="addEventListener",Sp="detachEvent",hl="removeEventListener",mc="events",Mo="visibilitychange",Qs="pagehide",_l="pageshow",Ef="unload",Ru="beforeunload",Ou=fs("aiEvtPageHide"),wp=fs("aiEvtPageShow"),Pd=/\.[\.]+/g,Zh=/[\.]+$/,hv=1,hc=Vs("events"),Hm=/^([^.]*)(?:\.(.+)|)/;function _v(a){return a&&a[ba]?a[ba](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,vr):a}function Tf(a,c){var p;if(c){var g=vr;qt(c)?(g=vr,dt(c,function(x){x=_v(x),x&&(x[0]!=="."&&(x="."+x),g+=x)})):g=_v(c),g&&(g[0]!=="."&&(g="."+g),a=(a||vr)+g)}var b=Hm.exec(a||vr)||[];return p={},p[Wa]=b[1],p.ns=(b[2]||vr).replace(Pd,".").replace(Zh,vr)[pi](".").sort().join("."),p}function gv(a,c,p){var g=[],b=hc.get(a,mc,{},!1),x=Tf(c,p);return Ar(b,function(R,P){dt(P,function(M){var j;(!x[Wa]||x[Wa]===M.evtName[Wa])&&(!x.ns||x.ns===x.ns)&&g[Ur]((j={},j[Do]=M.evtName[Wa]+(M.evtName.ns?"."+M.evtName.ns:vr),j.handler=M[ts],j))})}),g}function yv(a,c,p){p===void 0&&(p=!0);var g=hc.get(a,mc,{},p),b=g[c];return b||(b=g[c]=[]),b}function hh(a,c,p,g){a&&c&&c[Wa]&&(a[hl]?a[hl](c[Wa],p,g):a[Sp]&&a[Sp](bf+c[Wa],p))}function _h(a,c,p,g){var b=!1;return a&&c&&c[Wa]&&p&&(a[Jh]?(a[Jh](c[Wa],p,g),b=!0):a[xd]&&(a[xd](bf+c[Wa],p),b=!0)),b}function Xh(a,c,p,g){for(var b=c[pt];b--;){var x=c[b];x&&(!p.ns||p.ns===x.evtName.ns)&&(!g||g(x))&&(hh(a,x.evtName,x[ts],x.capture),c[To](b,1))}}function gi(a,c,p){if(c[Wa])Xh(a,yv(a,c[Wa]),c,p);else{var g=hc.get(a,mc,{});Ar(g,function(b,x){Xh(a,x,c,p)}),mo(g)[pt]===0&&hc.kill(a,mc)}}function eu(a,c){var p;return c?(qt(c)?p=[a].concat(c):p=[a,c],p=Tf("xx",p).ns[pi](".")):p=a,p}function bp(a,c,p,g,b){var x;b===void 0&&(b=!1);var R=!1;if(a)try{var P=Tf(c,g);if(R=_h(a,P,p,b),R&&hc.accept(a)){var M=(x={guid:hv++,evtName:P},x[ts]=p,x.capture=b,x);yv(a,P.type)[Ur](M)}}catch{}return R}function Vn(a,c,p,g,b){if(b===void 0&&(b=!1),a)try{var x=Tf(c,g),R=!1;gi(a,x,function(P){return x.ns&&!p||P[ts]===p?(R=!0,!0):!1}),R||hh(a,x,p,b)}catch{}}function Ep(a,c,p,g){return g===void 0&&(g=!1),bp(a,c,p,null,g)}function Tp(a,c,p,g){g===void 0&&(g=!1),Vn(a,c,p,null,g)}function Qh(a,c,p){var g=!1,b=oi();b&&(g=bp(b,a,c,p),g=bp(b.body,a,c,p)||g);var x=za();return x&&(g=bp(x,a,c,p)||g),g}function d(a,c,p){var g=oi();g&&(Vn(g,a,c,p),Vn(g.body,a,c,p));var b=za();b&&Vn(b,a,c,p)}function _(a,c,p,g){var b=!1;return c&&a&&a[pt]>0&&dt(a,function(x){x&&(!p||ua(p,x)===-1)&&(b=Qh(x,c,g)||b)}),b}function E(a,c,p,g){var b=!1;return c&&a&&qt(a)&&(b=_(a,c,p,g),!b&&p&&p[pt]>0&&(b=_(a,c,null,g))),b}function D(a,c,p){a&&qt(a)&&dt(a,function(g){g&&d(g,c,p)})}function O(a,c,p){return E([Ru,Ef,Qs],a,c,p)}function $(a,c){D([Ru,Ef,Qs],a,c)}function q(a,c,p){function g(R){var P=za();a&&P&&P.visibilityState==="hidden"&&a(R)}var b=eu(Ou,p),x=_([Qs],a,c,b);return(!c||ua(c,Mo)===-1)&&(x=_([Mo],g,c,b)||x),!x&&c&&(x=q(a,null,p)),x}function W(a,c){var p=eu(Ou,c);D([Qs],a,p),D([Mo],null,p)}function oe(a,c,p){function g(R){var P=za();a&&P&&P.visibilityState==="visible"&&a(R)}var b=eu(wp,p),x=_([_l],a,c,b);return x=_([Mo],g,c,b)||x,!x&&c&&(x=oe(a,null,p)),x}function se(a,c){var p=eu(wp,c);D([_l],a,p),D([Mo],null,p)}var De=Pi({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3}),qe="",Ye="https://browser.events.data.microsoft.com/OneCollector/1.0/",Ne="version",me="properties",Ue="initialize",Ee="logger",Ke="indexOf",Ce="timings",Te="pollInternalLogs",Be="value",zt="kind",Zt="length",or="processTelemetryStart",Dr="handleField",jr="rmSanitizer",ln="rmFieldSanitizer",tn="canHandle",Xt,ea="4.3.4",Xe="1DS-Web-JS-"+ea,ft=h.hasOwnProperty,yr="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",lr="withCredentials",Et="timeout",Rr=(Xt={},Xt[0]=0,Xt[2]=6,Xt[1]=1,Xt[3]=7,Xt[4098]=6,Xt[4097]=1,Xt[4099]=7,Xt),It=null,Ma=Tl(),ut=jd();function Tn(a){return!(a===qe||at(a))}function In(a){if(a){var c=Vi(a,"-");if(c>-1)return kn(a,c)}return qe}function yi(){return It===null&&(It=!rt(Uint8Array)&&!La()&&!Xl()),It}function _c(a){return!!(a&&je(a)&&a>=1&&a<=4)}function Ui(a,c,p){if(!c&&!Tn(c)||typeof a!="string")return null;var g=typeof c;if(g==="string"||g==="number"||g==="boolean"||qt(c))c={value:c};else if(g==="object"&&!ft.call(c,"value"))c={value:p?JSON.stringify(c):c};else if(at(c[Be])||c[Be]===qe||!Ht(c[Be])&&!je(c[Be])&&!Kn(c[Be])&&!qt(c[Be]))return null;if(qt(c[Be])&&!ru(c[Be]))return null;if(!at(c[zt])){if(qt(c[Be])||!Jr(c[zt]))return null;c[Be]=c[Be].toString()}return c}function If(a,c,p){var g=-1;if(!rt(a))if(c>0&&(c===32?g=8192:c<=13&&(g=c<<5)),ra(p))g===-1&&(g=0),g|=p;else{var b=Rr[ji(a)]||-1;g!==-1&&b!==-1?g|=b:b===6&&(g=b)}return g}function _s(a,c,p){p===void 0&&(p=!0);var g;return a&&(g=a.get(c),p&&g&&decodeURIComponent&&(g=decodeURIComponent(g))),g||qe}function Lo(a){a===void 0&&(a="D");var c=mf();return a==="B"?c="{"+c+"}":a==="P"?c="("+c+")":a==="N"&&(c=c.replace(/-/g,qe)),c}function tu(a,c,p,g,b){var x={},R=!1,P=0,M=arguments[Zt],j=arguments;for(Kn(j[0])&&(R=j[0],P++);P<M;P++){var a=j[P];Ar(a,function(H,K){R&&K&&Yr(K)?qt(K)?(x[H]=x[H]||[],dt(K,function(te,Z){te&&Yr(te)?x[H][Z]=tu(!0,x[H][Z],te):x[H][Z]=te})):x[H]=tu(!0,x[H],K):x[H]=K})}return x}var ta=Al;function Jr(a){return a===0||a>0&&a<=13||a===32}function ra(a){return a>=0&&a<=9}function La(){var a=si();if(!rt(a)&&a.userAgent){var c=a.userAgent.toLowerCase();if((c[Ke]("safari")>=0||c[Ke]("firefox")>=0)&&c[Ke]("chrome")<0)return!0}return!1}function ru(a){return a[Zt]>0}function gc(a,c){var p=a;p[Ce]=p[Ce]||{},p[Ce][or]=p[Ce][or]||{},p[Ce][or][c]=ta()}function ji(a){var c=0;if(a!=null){var p=typeof a;p==="string"?c=1:p==="number"?c=2:p==="boolean"?c=3:p===r&&(c=4,qt(a)?(c=4096,a[Zt]>0&&(c|=ji(a[0]))):ft.call(a,"value")&&(c=8192|ji(a[Be])))}return c}function Nf(){return!!Qr("chrome")}function nu(a,c,p,g,b,x){g===void 0&&(g=!1),b===void 0&&(b=!1);function R(M,j,G){try{M[j]=G}catch{}}var P=new XMLHttpRequest;return g&&R(P,yr,g),p&&R(P,lr,p),P.open(a,c,!b),p&&R(P,lr,p),!b&&x&&R(P,Et,x),P}function cm(a){return a>0}var yc=$o({endpointUrl:Ye,propertyStorageOverride:{isVal:Df}});function Df(a){return a&&(!a.getProperty||!a.setProperty)&&Pn("Invalid property storage override passed."),!0}var _a=function(a){zu(c,a);function c(){var p=a.call(this)||this;return xi(c,p,function(g,b){g[Ue]=function(x,R,P,M){Js(g,function(){return"AppInsightsCore.initialize"},function(){try{b[Ue](ha(x,yc,P||g[Ee],!1).cfg,R,P,M)}catch(H){var j=g[Ee],G=ur(H);G[Ke]("channels")!==-1&&(G+=`
 - Channels must be provided through config.channels only!`),Gr(j,1,514,"SDK Initialization Failed - no telemetry will be sent: "+G)}},function(){return{config:x,extensions:R,logger:P,notificationManager:M}})},g.track=function(x){Js(g,function(){return"AppInsightsCore.track"},function(){var R=x;if(R){R[Ce]=R[Ce]||{},R[Ce].trackStart=ta(),_c(R.latency)||(R.latency=1);var P=R.ext=R.ext||{};P.sdk=P.sdk||{},P.sdk.ver=Xe;var M=R.baseData=R.baseData||{};M[me]=M[me]||{};var j=M[me];j[Ne]=j[Ne]||g.pluginVersionString||qe}b.track(R)},function(){return{item:x}},!x.sync)},g[Te]=function(x){return b[Te](x||"InternalLog")}}),p}return c.__ieDyn=1,c}(sm),Ip=Pi({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),Cf=Pi({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),Sv=Pi({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),ku=Pi({Normal:1,Critical:2}),Si=Pi({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),xf=function(){function a(c){var p=this,g={},b=[],x=[];c&&x.push(c);function R(G,H){var K,te=g[G];if(te&&(K=te[H]),!K&&K!==null){if(Ht(G)&&Ht(H))if(x[Zt]>0){for(var Z=0;Z<x[Zt];Z++)if(x[Z][Dr](G,H)){K={canHandle:!0,fieldHandler:x[Z]};break}}else b[Zt]===0&&(K={canHandle:!0});if(!K&&K!==null){K=null;for(var Z=0;Z<b[Zt];Z++)if(b[Z][Dr](G,H)){K={canHandle:!0,handler:b[Z],fieldHandler:null};break}}te||(te=g[G]={}),te[H]=K}return K}p.clearCache=function(){g={}},p.addSanitizer=function(G){G&&(qd(b,G)||b.push(G),g={})},p.addFieldSanitizer=function(G){G&&(qd(x,G)||x.push(G),g={})},p[jr]=function(G){if(G){var H=ua(b,G);H!==-1&&(b.splice(H,1),g={}),dt(b,function(K){K&&K[jr]&&K[jr](G)})}},p[ln]=function(G){if(G){var H=ua(x,G);H!==-1&&(x.splice(H,1),g={}),dt(b,function(K){K&&K[ln]&&K[ln](G)})}},p.isEmpty=function(){return xs(b)+xs(x)===0},p[Dr]=function(G,H){var K=R(G,H);return K?K[tn]:!1},p[Be]=function(G,H,K,te){var Z=R(G,H);if(Z&&Z[tn]){if(!Z||!Z[tn])return null;if(Z.handler)return Z.handler[Be](G,H,K,te);if(!Ht(H)||at(K)||K===qe)return null;var _e=null,ye=ji(K);if((ye&8192)===8192){var Fe=ye&-8193;if(_e=K,!Tn(_e[Be])||Fe!==1&&Fe!==2&&Fe!==3&&(Fe&4096)!==4096)return null}else ye===1||ye===2||ye===3||(ye&4096)===4096?_e=M(G,H,K):ye===4&&(_e=M(G,H,te?JSON.stringify(K):K));if(_e)return P(Z,G,H,ye,_e,te)}return null},p.property=function(G,H,K,te){var Z=R(G,H);if(!Z||!Z[tn]||!Ht(H)||at(K)||!Tn(K[Be]))return null;var _e=ji(K[Be]);return _e===0?null:P(Z,G,H,_e,K,te)};function P(G,H,K,te,Z,_e){if(G.handler)return G.handler.property(H,K,Z,_e);if(!at(Z[zt])){if((te&4096)===4096||!Jr(Z[zt]))return null;Z[Be]=Z[Be].toString()}return j(G.fieldHandler,H,K,te,Z)}function M(G,H,K){return Tn(K)?{value:K}:null}function j(G,H,K,te,Z){if(Z&&G){var _e=G.getSanitizer(H,K,te,Z[zt],Z.propertyType);if(_e)if(te===4){var ye={},Fe=Z[Be];Ar(Fe,function(et,rr){var sr=H+"."+K;if(Tn(rr)){var Un=M(sr,et,rr);Un=j(G,sr,et,ji(rr),Un),Un&&(ye[et]=Un[Be])}}),Z[Be]=ye}else{var ze={path:H,name:K,type:te,prop:Z,sanitizer:p};Z=_e.call(p,ze)}}return Z}}return a.getFieldType=ji,a}();e.ActiveStatus=un,e.AppInsightsCore=_a,e.BaseTelemetryPlugin=fh,e.DiagnosticLogger=dc,e.EventLatency=Cf,e.EventPersistence=ku,e.EventPropertyType=Sv,e.EventsDiscardedReason=hu,e.FullVersionString=Xe,e.InternalAppInsightsCore=sm,e.LoggingSeverity=De,e.MinChannelPriorty=Zf,e.NotificationManager=lt,e.PerfEvent=At,e.PerfManager=En,e.ProcessTelemetryContext=am,e.SenderPostManager=um,e.TraceLevel=Si,e.Undefined=n,e.ValueKind=Ip,e.ValueSanitizer=xf,e.Version=ea,e._InternalLogMessage=hp,e.__getRegisteredEvents=gv,e._appendHeader=Bs,e._getAllResponseHeaders=wu,e._logInternalMessage=av,e._testHookMaxUnloadHooksCb=lh,e._throwInternal=Gr,e._warnToConsole=Ws,e.addEventHandler=Qh,e.addEventListeners=E,e.addPageHideEventListener=q,e.addPageShowEventListener=oe,e.addPageUnloadEventListener=O,e.areCookiesSupported=U,e.arrForEach=dt,e.arrIndexOf=ua,e.arrMap=cu,e.arrReduce=Wn,e.attachEvent=Ep,e.blockDynamicConversion=Rm,e.convertAllHeadersToMap=us,e.cookieAvailable=U,e.createCookieMgr=N,e.createDynamicConfig=ha,e.createEnumStyle=Pi,e.createGuid=Lo,e.createProcessTelemetryContext=pl,e.createTraceParent=Ta,e.createUniqueNamespace=fs,e.createUnloadHandlerContainer=lv,e.dateNow=lu,e.detachEvent=Tp,e.disallowsSameSiteNone=tt,e.doPerf=Js,e.dumpObj=ur,e.eventOff=Vn,e.eventOn=bp,e.extend=tu,e.findW3cTraceParent=Td,e.forceDynamicConversion=Ao,e.formatErrorMessageXdr=Hl,e.formatErrorMessageXhr=Jc,e.formatTraceParent=Au,e.generateW3CId=bd,e.getCommonSchemaMetaData=If,e.getConsole=dd,e.getCookieValue=_s,e.getCrypto=Xp,e.getDocument=za,e.getDynamicConfigHandler=al,e.getExceptionName=os,e.getFieldValueType=ji,e.getGlobal=qf,e.getGlobalInst=Qr,e.getHistory=Gi,e.getIEVersion=Bv,e.getISOString=is,e.getJSON=ma,e.getLocation=bu,e.getMsCrypto=Zl,e.getNavigator=si,e.getPerformance=Di,e.getResponseText=qs,e.getSetValue=Gl,e.getTenantId=In,e.getTime=ta,e.getWindow=oi,e.hasDocument=Tl,e.hasHistory=Il,e.hasJSON=Ra,e.hasNavigator=jp,e.hasOwnProperty=Sn,e.hasWindow=jd,e.isArray=qt,e.isArrayValid=ru,e.isBeaconsSupported=zv,e.isBoolean=Kn,e.isChromium=Nf,e.isDate=an,e.isDocumentObjectAvailable=Ma,e.isError=Ct,e.isFetchSupported=Ql,e.isFunction=tr,e.isGreaterThanZero=cm,e.isIE=Eu,e.isLatency=_c,e.isNotTruthy=ti,e.isNullOrUndefined=at,e.isNumber=je,e.isObject=Yr,e.isReactNative=Xl,e.isSampledFlag=rm,e.isString=Ht,e.isTruthy=qi,e.isTypeof=Ft,e.isUint8ArrayAvailable=yi,e.isUndefined=rt,e.isValidSpanId=ms,e.isValidTraceId=_i,e.isValidTraceParent=dl,e.isValueAssigned=Tn,e.isValueKind=Jr,e.isWindowObjectAvailable=ut,e.isXhrSupported=ef,e.mergeEvtNamespace=eu,e.newGuid=mf,e.newId=nf,e.normalizeJsName=$s,e.objDefineAccessors=Yf,e.objForEachKey=Ar,e.objFreeze=On,e.objKeys=mo,e.objSeal=ho,e.onConfigChange=ul,e.openXhr=nu,e.optimizeObject=cd,e.parseResponse=Kr,e.parseTraceParent=Xn,e.perfNow=Al,e.prependTransports=Vl,e.proxyAssign=ss,e.proxyFunctionAs=Mi,e.proxyFunctions=Wc,e.random32=rl,e.randomValue=Vv,e.removeEventHandler=d,e.removeEventListeners=D,e.removePageHideEventListener=W,e.removePageShowEventListener=se,e.removePageUnloadEventListener=$,e.safeGetCookieMgr=y,e.safeGetLogger=vf,e.sanitizeProperty=Ui,e.setEnableEnvMocks=fd,e.setProcessTelemetryTimings=gc,e.setValue=vi,e.strContains=wt,e.strEndsWith=Hf,e.strFunction=t,e.strObject=r,e.strPrototype=s,e.strStartsWith=Lv,e.strTrim=xa,e.strUndefined=n,e.throwError=Pn,e.toISOString=is,e.useXDomainRequest=Qp})});var kS=kd((Rg,OS)=>{(function(e,t){typeof Rg=="object"&&typeof OS<"u"?t(Rg):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.oneDS=e.oneDS||{}))})(Rg,function(e){"use strict";var t="REAL_TIME",r="NEAR_REAL_TIME",n="BEST_EFFORT",s="function",u="object",h="undefined",w="prototype",T=Object,C=T[w];function F(d,_){return d||_}function z(d,_){return d[_]}var ee=void 0,pe=null,ce="",re="function",Q="object",ve="prototype",Pe="__proto__",We="undefined",Ae="constructor",Ze="Symbol",Tt="_polyfill",Dt="length",Lt="name",it="call",Gt="toString",xr=F(Object),oa=z(xr,ve),ei=F(String),Pr=z(ei,ve),xn=F(Math),nt=F(Array),po=z(nt,ve),Ve=z(po,"slice");function Tr(d,_){try{return{v:d.apply(this,_)}}catch(E){return{e:E}}}function zn(d){return function(_){return typeof _===d}}function kt(d){return typeof d===We||d===We}function Ft(d){return!at(d)}function rt(d){return d===pe||kt(d)}function yn(d){return d===pe||!at(d)}function at(d){return!!d||d!==ee}var Nc=zn("string"),Wt=zn(re);function $i(d){return!d&&rt(d)?!1:!!d&&typeof d===Q}var Ht=z(nt,"isArray"),tr=zn("number"),Yr=zn("boolean");function qt(d){return!!(d&&d.then&&Wt(d.then))}var an=z(xr,"getOwnPropertyDescriptor");function je(d,_){return!!d&&oa.hasOwnProperty[it](d,_)}var Kn=F(z(xr,"hasOwn"),Ct);function Ct(d,_){return je(d,_)||!!an(d,_)}function wr(d,_,E){if(d&&$i(d)){for(var D in d)if(Kn(d,D)&&_[it](E||d,D,d[D])===-1)break}}var ti={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function qi(d){var _={};if(_[ti.c]=!0,_[ti.e]=!0,d.l){_.get=function(){return d.l.v};var E=an(d.l,"v");E&&E.set&&(_.set=function(D){d.l.v=D})}return wr(d,function(D,O){_[ti[D]]=Ft(O)?_[ti[D]]:O}),_}var Hr=z(xr,"defineProperty");function Sn(d,_,E){return Hr(d,_,qi(E))}function Bi(d,_,E,D,O){var $={};return wr(d,function(q,W){ga($,q,_?W:q,O),ga($,W,E?W:q,O)}),D?D($):$}function ga(d,_,E,D){Hr(d,_,{value:E,enumerable:!0,writable:!!D})}var Ar=F(ei),ar="[object Error]";function pr(d,_){var E=ce,D=oa[Gt][it](d);D===ar&&(d={stack:Ar(d.stack),message:Ar(d.message),name:Ar(d.name)});try{E=JSON.stringify(d,pe,_?typeof _=="number"?_:4:ee),E=(E?E.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):pe)||Ar(d)}catch(O){E=" - "+pr(O,_)}return D+": "+E}function $r(d){throw new TypeError(d)}var Yf=z(xr,"freeze");function wn(d){return d}function bl(d){return d[Pe]||pe}var Dc=z(xr,"assign"),bn=z(xr,"keys");function qa(d){return Yf&&wr(d,function(_,E){(Ht(E)||$i(E))&&qa(E)}),ur(d)}var ur=F(Yf,wn),Pn=F(z(xr,"getPrototypeOf"),bl);function Gn(d){return Bi(d,1,0,ur)}function vo(d){return Bi(d,0,0,ur)}var Ts=vo({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Cc="__tsUtils$gblCfg",El;function mo(){var d;return typeof globalThis!==We&&(d=globalThis),!d&&typeof self!==We&&(d=self),!d&&typeof window!==We&&(d=window),!d&&typeof global!==We&&(d=global),d}function $o(){if(!El){var d=Tr(mo).v||{};El=d[Cc]=d[Cc]||{}}return El}var On=ho;function ho(d,_,E){var D=_?_[d]:pe;return function(O){var $=(O?O[d]:pe)||D;if($||E){var q=arguments;return($||E).apply(O,$?Ve[it](q,1):q)}$r('"'+Ar(d)+'" not defined for '+pr(O))}}var Is=z(xn,"max"),ya=On("slice",Pr),Uu=On("substring",Pr),Ns=ho("substr",Pr,Nr);function Nr(d,_,E){return rt(d)&&$r("Invalid "+pr(d)),E<0?ce:(_=_||0,_<0&&(_=Is(_+d[Dt],0)),kt(E)?ya(d,_):ya(d,_,_+E))}function Lr(d,_){return Uu(d,0,_)}var ri="_urid",zi;function pn(){if(!zi){var d=$o();zi=d.gblSym=d.gblSym||{k:{},s:{}}}return zi}var ni;function ai(d){var _={description:Ar(d),toString:function(){return Ze+"("+d+")"}};return _[Tt]=!0,_}function Ds(d){var _=pn();if(!Kn(_.k,d)){var E=ai(d),D=bn(_.s).length;E[ri]=function(){return D+"_"+E[Gt]()},_.k[d]=E,_.s[E[ri]()]=Ar(d)}return _.k[d]}function Ud(d){!ni&&(ni={});var _,E=Ts[d];return E&&(_=ni[E]=ni[E]||ai(Ze+"."+E)),_}var on;function _o(){on=$o()}function qo(d){return Hr({toJSON:function(){return d}},"v",{value:d})}var kn="window",Bo;function su(d,_){var E;return function(){return!on&&_o(),(!E||on.lzy)&&(E=qo(Tr(d,_).v)),E.v}}function Ba(d){return!on&&_o(),(!Bo||d===!1||on.lzy)&&(Bo=qo(Tr(mo).v||pe)),Bo.v}function sn(d,_){var E;if(!Bo||_===!1?E=Ba(_):E=Bo.v,E&&E[d])return E[d];if(d===kn)try{return window}catch{}return pe}var Mn=su(sn,["document"]);function ju(){return!!ii()}var ii=su(sn,[kn]);function Ir(){return!!sa()}var sa=su(sn,["navigator"]),$f=su(function(){return!!Tr(function(){return process&&(process.versions||{}).node}).v}),Sa,zo;function xc(){return Sa=qo(Tr(sn,[Ze]).v),Sa}function Go(d){var _=(on.lzy?0:Sa)||xc();return _.v?_.v[d]:ee}function qf(){return!!Qr()}function Qr(){return!on&&_o(),((on.lzy?0:Sa)||xc()).v}function Tl(d,_){var E=Ts[d];!on&&_o();var D=(on.lzy?0:Sa)||xc();return D.v?D.v[E||d]:_?ee:Ud(d)}function za(d,_){!on&&_o();var E=(on.lzy?0:Sa)||xc();return E.v?E.v(d):_?pe:ai(d)}function jd(d){return!on&&_o(),zo=(on.lzy?0:zo)||qo(Tr(Go,["for"]).v),(zo.v||Ds)(d)}function oi(d){return!!d&&Wt(d.next)}function jp(d){return!yn(d)&&Wt(d[Tl(3)])}var si;function Il(d,_,E){if(d&&(oi(d)||(!si&&(si=qo(Tl(3))),d=d[si.v]?d[si.v]():pe),oi(d))){var D=ee,O=ee;try{for(var $=0;!(O=d.next()).done&&_[it](E||d,O.value,$,d)!==-1;)$++}catch(q){D={e:q},d.throw&&(O=pe,d.throw(D))}finally{try{O&&!O.done&&d.return&&d.return(O)}finally{if(D)throw D.e}}}}function Gi(d,_,E){return d.apply(_,E)}function Bf(d,_){return!kt(_)&&d&&(Ht(_)?Gi(d.push,d,_):oi(_)||jp(_)?Il(_,function(E){d.push(E)}):d.push(_)),d}function hr(d,_,E){if(d)for(var D=d[Dt]>>>0,O=0;O<D&&!(O in d&&_[it](E||d,d[O],O,d)===-1);O++);}var Ho=On("indexOf",po);function zf(d,_,E){return((d?d.slice:pe)||Ve).apply(d,Ve[it](arguments,1))}var Ga=F(z(xr,"create"),Pc);function Pc(d){if(!d)return{};var _=typeof d;_!==Q&&_!==re&&$r("Prototype must be an Object or function: "+pr(d));function E(){}return E[ve]=d,new E}var Pt;function ui(d,_){var E=xr.setPrototypeOf||function(D,O){var $;!Pt&&(Pt=qo(($={},$[Pe]=[],$ instanceof Array))),Pt.v?D[Pe]=O:wr(O,function(q,W){return D[q]=W})};return E(d,_)}function Yu(d,_,E){Tr(Sn,[_,Lt,{v:d,c:!0,e:!1}]),_=ui(_,E);function D(){this[Ae]=_,Tr(Sn,[this,Lt,{v:d,c:!0,e:!1}])}return _[ve]=E===pe?Ga(E):(D[ve]=E[ve],new D),_}function Nl(d,_){_&&(d[Lt]=_)}function kv(d,_,E){var D=E||Error,O=D[ve][Lt],$=Error.captureStackTrace;return Yu(d,function(){var q=this,W=arguments;try{Tr(Nl,[D,d]);var oe=Gi(D,q,Ve[it](W))||q;if(oe!==q){var se=Pn(q);se!==Pn(oe)&&ui(oe,se)}return $&&$(oe,q[Ae]),_&&_(oe,W),oe}finally{Tr(Nl,[D,O])}},D)}function Ei(){return(Date.now||Dl)()}function Dl(){return new Date().getTime()}function Yd(d){return function(E){return rt(E)&&$r("strTrim called ["+pr(E)+"]"),E&&E.replace&&(E=E.replace(d,ce)),E}}var uu=Yd(/^\s+|(?=\s)\s+$/g),Ti=ho("trim",Pr,uu),dt,ua,cu;function Cs(d){if(!d||typeof d!==Q)return!1;cu||(cu=ju()?ii():!0);var _=!1;if(d!==cu){ua||(dt=Function[ve][Gt],ua=dt[it](xr));try{var E=Pn(d);_=!E,_||(je(E,Ae)&&(E=E[Ae]),_=!!(E&&typeof E===re&&dt[it](E)===ua))}catch{}}return _}function $d(){return Ei()}var qd=On("indexOf",Pr),Wn=ho("startsWith",Pr,ci);function ci(d,_,E){Nc(d)||$r("'"+pr(d)+"' is not a string");var D=Nc(_)?_:Ar(_),O=E>0?E:0;return Uu(d,O,O+D[Dt])===D}var Bd="ref",Ii="unref",Ha="hasRef",Nm="enabled";function Mv(d,_,E){var D=!0,O=d?_(pe):pe,$;function q(){return D=!1,O&&O[Ii]&&O[Ii](),$}function W(){O&&E(O),O=pe}function oe(){return O=_(O),D||q(),$}function se(De){!De&&O&&W(),De&&!O&&oe()}return $={cancel:W,refresh:oe},$[Ha]=function(){return O&&O[Ha]?O[Ha]():D},$[Bd]=function(){return D=!0,O&&O[Bd]&&O[Bd](),$},$[Ii]=q,$=Hr($,Nm,{get:function(){return!!O},set:se}),{h:$,dn:function(){O=pe}}}function Yp(d,_,E){var D=Ht(_),O=D?_.length:0,$=(O>0?_[0]:D?ee:_)||setTimeout,q=(O>1?_[1]:ee)||clearTimeout,W=E[0];E[0]=function(){oe.dn(),Gi(W,ee,Ve[it](arguments))};var oe=Mv(d,function(se){if(se){if(se.refresh)return se.refresh(),se;Gi(q,ee,[se])}return Gi($,ee,E)},function(se){Gi(q,ee,[se])});return oe.h}function lu(d,_){return Yp(!0,ee,Ve[it](arguments))}function $p(d,_,E){return Yp(!0,d,Ve[it](arguments,1))}(Ba()||{}).Symbol,(Ba()||{}).Reflect;var ch="hasOwnProperty",zd=function(d,_){return zd=T.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,D){E.__proto__=D}||function(E,D){for(var O in D)D[ch](O)&&(E[O]=D[O])},zd(d,_)};function xa(d,_){typeof _!==s&&_!==null&&$r("Class extends value "+String(_)+" is not a constructor or null"),zd(d,_);function E(){this.constructor=d}d[w]=_===null?Ga(_):(E[w]=_[w],new E)}var Cl,xl="constructor",Hi="prototype",li="function",fu="_dynInstFuncs",qp="_isDynProxy",Ni="_dynClass",Gd="_dynCls$",$u="_dynInstChk",Ac=$u,Pl="_dfOpts",Gf="_unknown_",Hd="__proto__",Bp="_dyn"+Hd,zp="__dynProto$Gbl",du="_dynInstProto",Vd="useBaseInst",xs="setInstFuncs",qu=Object,Di=qu.getPrototypeOf,Al=qu.getOwnPropertyNames,Hf=Ba(),Rc=Hf[zp]||(Hf[zp]={o:(Cl={},Cl[xs]=!0,Cl[Vd]=!0,Cl),n:1e3});function Vi(d){return d&&(d===qu[Hi]||d===Array[Hi])}function Lv(d){return Vi(d)||d===Function[Hi]}function Vo(d){var _;if(d){if(Di)return Di(d);var E=d[Hd]||d[Hi]||(d[xl]?d[xl][Hi]:null);_=d[Bp]||E,je(d,Bp)||(delete d[du],_=d[Bp]=d[du]||d[Bp],d[du]=E)}return _}function go(d,_){var E=[];if(Al)E=Al(d);else for(var D in d)typeof D=="string"&&je(d,D)&&E.push(D);if(E&&E.length>0)for(var O=0;O<E.length;O++)_(E[O])}function Ki(d,_,E){return _!==xl&&typeof d[_]===li&&(E||je(d,_))&&_!==Hd&&_!==Hi}function pu(d){$r("DynamicProto: "+d)}function Vf(d){var _=Ga(null);return go(d,function(E){!_[E]&&Ki(d,E,!1)&&(_[E]=d[E])}),_}function Oc(d,_){for(var E=d.length-1;E>=0;E--)if(d[E]===_)return!0;return!1}function kc(d,_,E,D){function O(oe,se,De){var qe=se[De];if(qe[qp]&&D){var Ye=oe[fu]||{};Ye[Ac]!==!1&&(qe=(Ye[se[Ni]]||{})[De]||qe)}return function(){return qe.apply(oe,arguments)}}var $=Ga(null);go(E,function(oe){$[oe]=O(_,E,oe)});for(var q=Vo(d),W=[];q&&!Lv(q)&&!Oc(W,q);)go(q,function(oe){!$[oe]&&Ki(q,oe,!Di)&&($[oe]=O(_,q,oe))}),W.push(q),q=Vo(q);return $}function Bu(d,_,E,D){var O=null;if(d&&je(E,Ni)){var $=d[fu]||Ga(null);if(O=($[E[Ni]]||Ga(null))[_],O||pu("Missing ["+_+"] "+li),!O[$u]&&$[Ac]!==!1){for(var q=!je(d,_),W=Vo(d),oe=[];q&&W&&!Lv(W)&&!Oc(oe,W);){var se=W[_];if(se){q=se===D;break}oe.push(W),W=Vo(W)}try{q&&(d[_]=O),O[$u]=1}catch{$[Ac]=!1}}}return O}function Kf(d,_,E){var D=_[d];return D===E&&(D=Vo(_)[d]),typeof D!==li&&pu("["+d+"] is not a "+li),D}function Rl(d,_,E,D,O){function $(oe,se){var De=function(){var qe=Bu(this,se,oe,De)||Kf(se,oe,De);return qe.apply(this,arguments)};return De[qp]=1,De}if(!Vi(d)){var q=E[fu]=E[fu]||Ga(null);if(!Vi(q)){var W=q[_]=q[_]||Ga(null);q[Ac]!==!1&&(q[Ac]=!!O),Vi(W)||go(E,function(oe){Ki(E,oe,!1)&&E[oe]!==D[oe]&&(W[oe]=E[oe],delete E[oe],(!je(d,oe)||d[oe]&&!d[oe][qp])&&(d[oe]=$(d,oe)))})}}}function Wf(d,_){if(Di){for(var E=[],D=Vo(_);D&&!Lv(D)&&!Oc(E,D);){if(D===d)return!0;E.push(D),D=Vo(D)}return!1}return!0}function zu(d,_){return je(d,Hi)?d.name||_||Gf:((d||{})[xl]||{}).name||_||Gf}function Wi(d,_,E,D){je(d,Hi)||pu("theClass is an invalid class definition.");var O=d[Hi];Wf(O,_)||pu("["+zu(d)+"] not in hierarchy of ["+zu(_)+"]");var $=null;je(O,Ni)?$=O[Ni]:($=Gd+zu(d,"_")+"$"+Rc.n,Rc.n++,O[Ni]=$);var q=Wi[Pl],W=!!q[Vd];W&&D&&D[Vd]!==void 0&&(W=!!D[Vd]);var oe=Vf(_),se=kc(O,_,oe,W);E(_,se);var De=!!Di&&!!q[xs];De&&D&&(De=!!D[xs]),Rl(O,$,_,oe,De!==!1)}Wi[Pl]=Rc.o;var Mc=Gn,yo=Mc({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),fi="toLowerCase",Ko="blkVal",Vr="length",Ps="rdOnly",Ji="notify",Lc="warnToConsole",Fc="throwInternal",Wo="setDf",Ol="watch",Jo="logger",vu="apply",Va="push",Kd="splice",Gu="hdlr",Pa="cancel",Jf="initialize",Wd="identifier",kl="isInitialized",Ml="value",Jd="getPlugin",Fv="name",Hu="time",So="processNext",Zi="getProcessTelContext",vn="unload",Ll="loggingLevelConsole",Vu="createNew",Ku="teardown",Zd="messageId",Ci="message",mu="isAsync",As="diagLog",cr="_doTeardown",wo="update",Zo="getNext",xi="setNextPlugin",Zf="protocol",Pi="userAgent",hu="split",un="nodeType",Ka="replace",Fr="logInternalMessage",pt="type",Wu="handler",bo="status",Rs="getResponseHeader",Xi="getAllResponseHeaders",_u="isChildEvt",Ai="data",qr="getCtx",Eo="setCtx",Ur="complete",To="urlString",Xf="sendPOST",Io="headers",An="timeout",Qi="setRequestHeader",Xo;function wa(d,_){Xo||(Xo=kv("AggregationError",function(D,O){O[Vr]>1&&(D.errors=O[1])}));var E=d||"One or more errors occurred.";throw hr(_,function(D,O){E+=`
`.concat(O," > ").concat(pr(D))}),new Xo(E,_||[])}var Aa="Promise",Uc="rejected";function Ju(d,_){return Qf(d,function(E){return _?_({status:"fulfilled",rejected:!1,value:E}):E},function(E){return _?_({status:Uc,rejected:!0,reason:E}):E})}function Qf(d,_,E,D){var O=d;try{if(qt(d))(_||E)&&(O=d.then(_,E));else try{_&&(O=_(d))}catch($){if(E)O=E($);else throw $}}finally{D&&Os(O,D)}return O}function Os(d,_){var E=d;return _&&(qt(d)?d.finally?E=d.finally(_):E=d.then(function(D){return _(),D},function(D){throw _(),D}):_()),E}var No=["pending","resolving","resolved",Uc],Do="dispatchEvent",Zu;function Co(d){var _;return d&&d.createEvent&&(_=d.createEvent("Event")),!!_&&_.initEvent}function Ln(d,_,E,D){var O=Mn();!Zu&&(Zu=qo(!!Tr(Co,[O]).v));var $=Zu.v?O.createEvent("Event"):D?new Event(_):{};if(E&&E($),Zu.v&&$.initEvent(_,!1,!0),$&&d[Do])d[Do]($);else{var q=d["on"+_];if(q)q($);else{var W=sn("console");W&&(W.error||W.log)(_,pr($))}}}var ed="unhandledRejection",Xu=ed.toLowerCase(),ks=10,di;function Qo(d){return Wt(d)?d.toString():pr(d)}function Ms(d,_,E){var D=zf(arguments,3),O=0,$=!1,q,W=[],oe=!1,se=null,De;function qe(Te,Be){try{oe=!0,se&&se.cancel(),se=null;var zt=d(function(Zt,or){W.push(function(){try{var Dr=O===2?Te:Be,jr=kt(Dr)?q:Wt(Dr)?Dr(q):Dr;qt(jr)?jr.then(Zt,or):Dr?Zt(jr):O===3?or(jr):Zt(jr)}catch(ln){or(ln)}}),$&&Ue()},D);return zt}finally{}}function Ye(Te){return qe(void 0,Te)}function Ne(Te){var Be=Te,zt=Te;return Wt(Te)&&(Be=function(Zt){return Te&&Te(),Zt},zt=function(Zt){throw Te&&Te(),Zt}),qe(Be,zt)}function me(){return No[O]}function Ue(){if(W.length>0){var Te=W.slice();W=[],oe=!0,se&&se.cancel(),se=null,_(Te)}}function Ee(Te,Be){return function(zt){if(O===Be){if(Te===2&&qt(zt)){O=1,zt.then(Ee(2,1),Ee(3,1));return}O=Te,$=!0,q=zt,Ue(),!oe&&Te===3&&!se&&(se=lu(Ke,ks))}}}function Ke(){if(!oe)if(oe=!0,$f())process.emit(ed,q,De);else{var Te=ii()||Ba();!di&&(di=qo(Tr(sn,[Aa+"RejectionEvent"]).v)),Ln(Te,Xu,function(Be){return Sn(Be,"promise",{g:function(){return De}}),Be.reason=q,Be},!!di.v)}}De={then:qe,catch:Ye,finally:Ne},Hr(De,"state",{get:me}),qf()&&(De[Tl(11)]="IPromise");function Ce(){return"IPromise "+me()+($?" - "+Qo(q):"")}return De.toString=Ce,function(){Wt(E)||$r(Aa+": executor is not a function - "+Qo(E));var Be=Ee(3,0);try{E.call(De,Ee(2,0),Be)}catch(zt){Be(zt)}}(),De}function Ri(d){hr(d,function(_){try{_()}catch{}})}function jc(d){var _=tr(d)?d:0;return function(E){lu(function(){Ri(E)},_)}}function gu(d,_){return Ms(gu,jc(_),d,_)}var ca;function yu(d,_){!ca&&(ca=qo(Tr(sn,[Aa]).v||null));var E=ca.v;if(!E)return gu(d);Wt(d)||$r(Aa+": executor is not a function - "+pr(d));var D=0;function O(){return No[D]}var $=new E(function(q,W){function oe(De){D=2,q(De)}function se(De){D=3,W(De)}d(oe,se)});return Hr($,"state",{get:O}),$}var Ls;function Oi(d,_){return!Ls&&(Ls=qo(yu)),Ls.v.call(this,d,_)}var Qu=void 0,cn="",Jn="core",ki="disabled",ec="extensionConfig",es="processTelemetry",Xd="priority",pi="getPerfMgr",Yc="Not dynamic - ",ba=/-([a-z])/g,td=/([^\w\d_$])/g,Wa=/^(\d+[\w\d_$])/;function ts(d){return!rt(d)}function rs(d){var _=d;return _&&Nc(_)&&(_=_[Ka](ba,function(E,D){return D.toUpperCase()}),_=_[Ka](td,"_"),_=_[Ka](Wa,function(E,D){return"_"+D})),_}function Qd(d,_){return d&&_?qd(d,_)!==-1:!1}function Fl(d,_){var E=null,D=null;return Wt(d)?E=d:D=d,function(){var O=arguments;if(E&&(D=E()),D)return D[_][vu](D,O)}}function rd(d,_,E,D,O){d&&_&&E&&(O!==!1||kt(d[_]))&&(d[_]=Fl(E,D))}function Ul(d,_,E,D){return d&&_&&$i(d)&&Ht(E)&&hr(E,function(O){Nc(O)&&rd(d,O,_,O,D)}),d}function xo(d){return d&&Dc&&(d=T(Dc({},d))),d}function Ja(d){try{return d.responseText}catch{}return null}function $c(d,_){return d?"XDomainRequest,Response:"+Ja(d)||"":_}function Uv(d,_){return d?"XMLHttpRequest,Status:"+d[bo]+",Response:"+Ja(d)||d.response||"":_}function tc(d,_){return _&&(tr(_)?d=[_].concat(d):Ht(_)&&(d=_.concat(d))),d}var rc="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",ns="withCredentials",jl="timeout";function Dm(d,_,E,D,O,$){D===void 0&&(D=!1),O===void 0&&(O=!1);function q(oe,se,De){try{oe[se]=De}catch{}}var W=new XMLHttpRequest;return D&&q(W,rc,D),E&&q(W,ns,E),W.open(d,_,!O),E&&q(W,ns,E),!O&&$&&q(W,jl,$),W}function ep(d){var _={};if(Nc(d)){var E=Ti(d)[hu](/[\r\n]+/);hr(E,function(D){if(D){var O=D.indexOf(": ");if(O!==-1){var $=Ti(D.substring(0,O))[fi](),q=Ti(D.substring(O+1));_[$]=q}else _[Ti(D)]=1}})}return _}function Yl(d,_,E){if(!d[E]&&_&&_[Rs]){var D=_[Rs](E);D&&(d[E]=Ti(D))}return d}var nc="kill-duration",Gp="kill-duration-seconds",jv="time-delta-millis";function ac(d,_){var E={};return d[Xi]?E=ep(d[Xi]()):_&&(E=Yl(E,d,jv),E=Yl(E,d,nc),E=Yl(E,d,Gp)),E}var Yv="location",$l="console",tp="JSON",eo="crypto",Hp="msCrypto",Cm="ReactNative",nd="msie",Vp="trident/",rp="XMLHttpRequest",qc=null,ad=null,ic=!1,Fs=null,Bc=null;function $v(d,_){var E=!1;if(d){try{if(E=_ in d,!E){var D=d[w];D&&(E=_ in D)}}catch{}if(!E)try{var O=new d;E=!kt(O[_])}catch{}}return E}function np(d){if(d&&ic){var _=sn("__mockLocation");if(_)return _}return typeof location===u&&location?location:sn(Yv)}function zc(){return typeof console!==h?console:sn($l)}function ap(){return!!(typeof JSON===u&&JSON||sn(tp)!==null)}function Us(){return ap()?JSON||sn(tp):null}function Br(){return sn(eo)}function oc(){return sn(Hp)}function la(){var d=sa();return d&&d.product?d.product===Cm:!1}function ip(){var d=sa();if(d&&(d[Pi]!==ad||qc===null)){ad=d[Pi];var _=(ad||cn)[fi]();qc=Qd(_,nd)||Qd(_,Vp)}return qc}function id(d){return(Bc===null||d===!1)&&(Bc=Ir()&&!!sa().sendBeacon),Bc}function Gc(d){var _=!1;try{_=!!sn("fetch");var E=sn("Request");_&&d&&E&&(_=$v(E,"keepalive"))}catch{}return _}function sc(){return Fs===null&&(Fs=typeof XDomainRequest!==h,Fs&&Za()&&(Fs=Fs&&!$v(sn(rp),"withCredentials"))),Fs}function Za(){var d=!1;try{var _=sn(rp);d=!!_}catch{}return d}var od=4294967296,Zn=4294967295,vr=123456789,js=987654321,hn=!1,as=vr,uc=js;function cc(d){d<0&&(d>>>=0),as=vr+d&Zn,uc=js-d&Zn,hn=!0}function Ys(){try{var d=Ei()&2147483647;cc((Math.random()*od^d)+d)}catch{}}function to(d){var _=0,E=Br()||oc();return E&&E.getRandomValues&&(_=E.getRandomValues(new Uint32Array(1))[0]&Zn),_===0&&ip()&&(hn||Ys(),_=ql()&Zn),_===0&&(_=Math.floor(od*Math.random()|0)),d||(_>>>=0),_}function ql(d){uc=36969*(uc&65535)+(uc>>16)&Zn,as=18e3*(as&65535)+(as>>16)&Zn;var _=(uc<<16)+(as&65535)>>>0&Zn|0;return d||(_>>>=0),_}function Kp(d){d===void 0&&(d=22);for(var _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=to()>>>0,D=0,O=cn;O[Vr]<d;)D++,O+=_.charAt(E&63),E>>>=6,D===5&&(E=(to()<<2&4294967295|E&3)>>>0,D=0);return O}var Bl="3.3.4",Wp="."+Kp(6),zl=0;function Hc(d){return d[un]===1||d[un]===9||!+d[un]}function op(d,_){var E=_[d.id];if(!E){E={};try{Hc(_)&&Sn(_,d.id,{e:!1,v:E})}catch{}}return E}function Hn(d,_){return _===void 0&&(_=!1),rs(d+zl+++(_?"."+Bl:cn)+Wp)}function Vc(d){var _={id:Hn("_aiData-"+(d||cn)+"."+Bl),accept:function(E){return Hc(E)},get:function(E,D,O,$){var q=E[_.id];return q?q[rs(D)]:($&&(q=op(_,E),q[rs(D)]=O),O)},kill:function(E,D){if(E&&E[D])try{delete E[D]}catch{}}};return _}function fa(d){return d&&$i(d)&&(d.isVal||d.fb||Kn(d,"v")||Kn(d,"mrg")||Kn(d,"ref")||d.set)}function Su(d,_,E){var D,O=E.dfVal||at;if(_&&E.fb){var $=E.fb;Ht($)||($=[$]);for(var q=0;q<$[Vr];q++){var W=$[q],oe=_[W];if(O(oe)?D=oe:d&&(oe=d.cfg[W],O(oe)&&(D=oe),d.set(d.cfg,Ar(W),oe)),O(D))break}}return!O(D)&&O(E.v)&&(D=E.v),D}function sp(d,_,E){var D=E;if(E&&fa(E)&&(D=Su(d,_,E)),D){fa(D)&&(D=sp(d,_,D));var O;Ht(D)?(O=[],O[Vr]=D[Vr]):Cs(D)&&(O={}),O&&(wr(D,function($,q){q&&fa(q)&&(q=sp(d,_,q)),O[$]=q}),D=O)}return D}function sd(d,_,E,D){var O,$,q,W=D,oe,se,De,qe;fa(W)?(O=W.isVal,$=W.set,De=W[Ps],qe=W[Ko],oe=W.mrg,se=W.ref,!se&&kt(se)&&(se=!!oe),q=Su(d,_,W)):q=D,qe&&d[Ko](_,E);var Ye,Ne=!0,me=_[E];(me||!rt(me))&&(Ye=me,Ne=!1,O&&Ye!==q&&!O(Ye)&&(Ye=q,Ne=!0),$&&(Ye=$(Ye,q,_),Ne=Ye===q)),Ne?q?Ye=sp(d,_,q):Ye=q:(Cs(Ye)||Ht(q))&&oe&&q&&(Cs(q)||Ht(q))&&wr(q,function(Ue,Ee){sd(d,Ye,Ue,Ee)}),d.set(_,E,Ye),se&&d.ref(_,E),De&&d[Ps](_,E)}var da=jd("[[ai_dynCfg_1]]"),ud=jd("[[ai_blkDynCfg_1]]"),up=jd("[[ai_frcDynCfg_1]]");function $s(d){if(d){var _;if(Ht(d)?(_=[],_[Vr]=d[Vr]):Cs(d)&&(_={}),_)return wr(d,function(E,D){_[E]=$s(D)}),_}return d}function wt(d){if(d){var _=d[da]||d;if(_.cfg&&(_.cfg===d||_.cfg[da]===_))return _}return null}function is(d){if(d&&(Cs(d)||Ht(d)))try{d[ud]=!0}catch{}return d}function os(d,_,E){var D=!1;return E&&!d[_.blkVal]&&(D=E[up],!D&&!E[ud]&&(D=Cs(E)||Ht(E))),D}function vi(d){$r("InvalidAccess:"+d)}var Gl=["push","pop","shift","unshift","splice"],Kc=function(d,_,E,D){d&&d[Fc](3,108,"".concat(E," [").concat(_,"] failed - ")+pr(D))};function ss(d,_,E){Ht(_)&&hr(Gl,function(D){var O=_[D];_[D]=function(){for(var $=[],q=0;q<arguments.length;q++)$[q]=arguments[q];var W=O[vu](this,$);return Hl(d,_,E,"Patching"),W}})}function Mi(d,_){var E=an(d,_);return E&&E.get}function Wc(d,_,E,D){var O={n:E,h:[],trk:function(se){se&&se.fn&&(Ho(O.h,se)===-1&&O.h[Va](se),d.trk(se,O))},clr:function(se){var De=Ho(O.h,se);De!==-1&&O.h[Kd](De,1)}},$=!0,q=!1;function W(){$&&(q=q||os(W,d,D),D&&!D[da]&&q&&(D=Hl(d,D,E,"Converting")),$=!1);var se=d.act;return se&&O.trk(se),D}W[d.prop]={chng:function(){d.add(O)}};function oe(se){if(D!==se){W[d.ro]&&!d.upd&&vi("["+E+"] is read-only:"+pr(_)),$&&(q=q||os(W,d,D),$=!1);var De=q&&W[d.rf];if(q)if(De){wr(D,function(Ye){D[Ye]=se?se[Ye]:Qu});try{wr(se,function(Ye,Ne){cd(d,D,Ye,Ne)}),se=D}catch(Ye){Kc((d.hdlr||{})[Jo],E,"Assigning",Ye),q=!1}}else D&&D[da]&&wr(D,function(Ye){var Ne=Mi(D,Ye);if(Ne){var me=Ne[d.prop];me&&me.chng()}});if(se!==D){var qe=se&&os(W,d,se);!De&&qe&&(se=Hl(d,se,E,"Converting")),D=se,q=qe}d.add(O)}}Sn(_,O.n,{g:W,s:oe})}function cd(d,_,E,D){if(_){var O=Mi(_,E),$=O&&!!O[d.prop];$?_[E]=D:Wc(d,_,E,D)}return _}function qs(d,_,E,D){if(_){var O=Mi(_,E),$=O&&!!O[d.prop],q=D&&D[0],W=D&&D[1],oe=D&&D[2];if(!$){if(oe)try{is(_)}catch(se){Kc((d.hdlr||{})[Jo],E,"Blocking",se)}try{cd(d,_,E,_[E]),O=Mi(_,E)}catch(se){Kc((d.hdlr||{})[Jo],E,"State",se)}}q&&(O[d.rf]=q),W&&(O[d.ro]=W),oe&&(O[d.blkVal]=!0)}return _}function Hl(d,_,E,D){try{wr(_,function(O,$){cd(d,_,O,$)}),_[da]||(Hr(_,da,{get:function(){return d[Gu]}}),ss(d,_,E))}catch(O){Kc((d.hdlr||{})[Jo],E,D,O)}return _}var Jc="[[ai_",Vl="]]";function cp(d){var _,E=za(Jc+"get"+d.uid+Vl),D=za(Jc+"ro"+d.uid+Vl),O=za(Jc+"rf"+d.uid+Vl),$=za(Jc+"blkVal"+d.uid+Vl),q=za(Jc+"dtl"+d.uid+Vl),W=null,oe=null,se;function De(me,Ue){var Ee=se.act;try{se.act=me,me&&me[q]&&(hr(me[q],function(Ce){Ce.clr(me)}),me[q]=[]),Ue({cfg:d.cfg,set:d.set.bind(d),setDf:d[Wo].bind(d),ref:d.ref.bind(d),rdOnly:d[Ps].bind(d)})}catch(Ce){var Ke=d[Jo];throw Ke&&Ke[Fc](1,107,pr(Ce)),Ce}finally{se.act=Ee||null}}function qe(){if(W){var me=W;W=null,oe&&oe[Pa](),oe=null;var Ue=[];if(hr(me,function(Ee){if(Ee&&(Ee[q]&&(hr(Ee[q],function(Ke){Ke.clr(Ee)}),Ee[q]=null),Ee.fn))try{De(Ee,Ee.fn)}catch(Ke){Ue[Va](Ke)}}),W)try{qe()}catch(Ee){Ue[Va](Ee)}Ue[Vr]>0&&wa("Watcher error(s): ",Ue)}}function Ye(me){if(me&&me.h[Vr]>0){W||(W=[]),oe||(oe=lu(function(){oe=null,qe()},0));for(var Ue=0;Ue<me.h[Vr];Ue++){var Ee=me.h[Ue];Ee&&Ho(W,Ee)===-1&&W[Va](Ee)}}}function Ne(me,Ue){if(me){var Ee=me[q]=me[q]||[];Ho(Ee,Ue)===-1&&Ee[Va](Ue)}}return se=(_={prop:E,ro:D,rf:O},_[Ko]=$,_[Gu]=d,_.add=Ye,_[Ji]=qe,_.use=De,_.trk=Ne,_),se}function lp(d,_){var E={fn:_,rm:function(){E.fn=null,d=null,_=null}};return Sn(E,"toJSON",{v:function(){return"WatcherHandler"+(E.fn?"":"[X]")}}),d.use(E,_),E}function Jp(d,_,E){var D,O=wt(_);if(O)return O;var $=Hn("dyncfg",!0),q=_&&E!==!1?_:$s(_),W;function oe(){W[Ji]()}function se(Ke,Ce,Te){try{Ke=cd(W,Ke,Ce,Te)}catch(Be){Kc(d,Ce,"Setting value",Be)}return Ke[Ce]}function De(Ke){return lp(W,Ke)}function qe(Ke,Ce){W.use(null,function(Te){var Be=W.upd;try{kt(Ce)||(W.upd=Ce),Ke(Te)}finally{W.upd=Be}})}function Ye(Ke,Ce){var Te;return qs(W,Ke,Ce,(Te={},Te[0]=!0,Te))[Ce]}function Ne(Ke,Ce){var Te;return qs(W,Ke,Ce,(Te={},Te[1]=!0,Te))[Ce]}function me(Ke,Ce){var Te;return qs(W,Ke,Ce,(Te={},Te[2]=!0,Te))[Ce]}function Ue(Ke,Ce){return Ce&&wr(Ce,function(Te,Be){sd(Ee,Ke,Te,Be)}),Ke}var Ee=(D={uid:null,cfg:q},D[Jo]=d,D[Ji]=oe,D.set=se,D[Wo]=Ue,D[Ol]=De,D.ref=Ye,D[Ps]=Ne,D[Ko]=me,D._block=qe,D);return Sn(Ee,"uid",{c:!1,e:!1,w:!1,v:$}),W=cp(Ee),Hl(W,q,"config","Creating"),Ee}function xm(d,_){d?(d[Lc](_),d[Fc](2,108,_)):vi(_)}function us(d,_,E,D){var O=Jp(E,d||{},D);return _&&O[Wo](O.cfg,_),O}function Bs(d,_,E){var D=d[da]||d;return D.cfg&&(D.cfg===d||D.cfg[da]===D)?D[Ol](_):(xm(E,Yc+pr(d)),us(d,null,E)[Ol](_))}var cs="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Li=null;function zs(){var d=sn("Microsoft");return d&&(Li=d.ApplicationInsights),Li}function wu(d){var _=Li;return!_&&d.disableDbgExt!==!0&&(_=Li||zs()),_?_.ChromeDbgExt:null}var mi,Zc="warnToConsole",qv="AI (Internal): ",lc="AI: ",Zp="AITR_",Kl={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Xc=(mi={},mi[0]=null,mi[1]="errorToConsole",mi[2]=Zc,mi[3]="debugToConsole",mi);function Wl(d){return d?'"'+d[Ka](/\"/g,cn)+'"':cn}function Gs(d,_){var E=zc();if(E){var D="log";E[d]&&(D=d),Wt(E[D])&&E[D](_)}}var Fi=function(){function d(_,E,D,O){D===void 0&&(D=!1);var $=this;$[Zd]=_,$[Ci]=(D?lc:qv)+_;var q=cn;ap()&&(q=Us().stringify(O));var W=(E?" message:"+Wl(E):cn)+(O?" props:"+Wl(q):cn);$[Ci]+=W}return d.dataType="MessageData",d}();function Qc(d,_){return(d||{})[Jo]||new Jl(_)}var Jl=function(){function d(_){this.identifier="DiagnosticLogger",this.queue=[];var E=0,D={},O,$,q,W,oe;Wi(d,this,function(se){oe=qe(_||{}),se.consoleLoggingLevel=function(){return O},se[Fc]=function(me,Ue,Ee,Ke,Ce){Ce===void 0&&(Ce=!1);var Te=new Fi(Ue,Ee,Ce,Ke);if(W)throw pr(Te);var Be=Xc[me]||Zc;if(kt(Te[Ci]))Ne("throw"+(me===1?"Critical":"Warning"),Te);else{if(Ce){var zt=+Te[Zd];!D[zt]&&O>=me&&(se[Be](Te[Ci]),D[zt]=!0)}else O>=me&&se[Be](Te[Ci]);De(me,Te)}},se.debugToConsole=function(me){Gs("debug",me),Ne("warning",me)},se[Lc]=function(me){Gs("warn",me),Ne("warning",me)},se.errorToConsole=function(me){Gs("error",me),Ne("error",me)},se.resetInternalMessageCount=function(){E=0,D={}},se[Fr]=De,se[vn]=function(me){oe&&oe.rm(),oe=null};function De(me,Ue){if(!Ye()){var Ee=!0,Ke=Zp+Ue[Zd];if(D[Ke]?Ee=!1:D[Ke]=!0,Ee&&(me<=$&&(se.queue[Va](Ue),E++,Ne(me===1?"error":"warn",Ue)),E===q)){var Ce="Internal events throttle limit per PageView reached for this app.",Te=new Fi(23,Ce,!1);se.queue[Va](Te),me===1?se.errorToConsole(Ce):se[Lc](Ce)}}}function qe(me){return Bs(us(me,Kl,se).cfg,function(Ue){var Ee=Ue.cfg;O=Ee[Ll],$=Ee.loggingLevelTelemetry,q=Ee.maxMessageLimit,W=Ee.enableDebug})}function Ye(){return E>=q}function Ne(me,Ue){var Ee=wu(_||{});Ee&&Ee[As]&&Ee[As](me,Ue)}})}return d.__ieDyn=1,d}();function ld(d){return d||new Jl}function pa(d,_,E,D,O,$){$===void 0&&($=!1),ld(d)[Fc](_,E,D,O,$)}function Hs(d,_){ld(d)[Lc](_)}var va="ctx",fd="ParentContextKey",bu="ChildrenContextKey",dd=function(){function d(_,E,D){var O=this;if(O.start=Ei(),O[Fv]=_,O[mu]=D,O[_u]=function(){return!1},Wt(E)){var $;Sn(O,"payload",{g:function(){return!$&&Wt(E)&&($=E(),E=null),$}})}O[qr]=function(q){return q?q===d[fd]||q===d[bu]?O[q]:(O[va]||{})[q]:null},O[Eo]=function(q,W){if(q)if(q===d[fd])O[q]||(O[_u]=function(){return!0}),O[q]=W;else if(q===d[bu])O[q]=W;else{var oe=O[va]=O[va]||{};oe[q]=W}},O[Ur]=function(){var q=0,W=O[qr](d[bu]);if(Ht(W))for(var oe=0;oe<W[Vr];oe++){var se=W[oe];se&&(q+=se[Hu])}O[Hu]=Ei()-O.start,O.exTime=O[Hu]-q,O[Ur]=function(){}}}return d.ParentContextKey="parent",d.ChildrenContextKey="childEvts",d}(),Ra="CoreUtils.doPerf";function ma(d,_,E,D,O){if(d){var $=d;if($[pi]&&($=$[pi]()),$){var q=void 0,W=$[qr](Ra);try{if(q=$.create(_(),D,O),q){if(W&&q[Eo]&&(q[Eo](dd[fd],W),W[qr]&&W[Eo])){var oe=W[qr](dd[bu]);oe||(oe=[],W[Eo](dd[bu],oe)),oe[Va](q)}return $[Eo](Ra,q),E(q)}}catch(se){q&&q[Eo]&&q[Eo]("exception",se)}finally{q&&$.fire(q),$[Eo](Ra,W)}}}return E()}var Xp=Vc("plugin");function Zl(d){return Xp.get(d,"state",{},!0)}var Xl="TelemetryPluginChain",Eu="_hasRun",Bv="_getTelCtx",zv=0;function Ql(d,_,E){for(;d;){if(d[Jd]()===E)return d;d=d[Zo]()}return tf([E],_.config||{},_)}function Qp(d,_,E,D){var O=null,$=[];_||(_=us({},null,E[Jo])),D!==null&&(O=D?Ql(d,E,D):d);var q={_next:oe,ctx:{core:function(){return E},diagLog:function(){return Qc(E,_.cfg)},getCfg:function(){return _.cfg},getExtCfg:De,getConfig:qe,hasNext:function(){return!!O},getNext:function(){return O},setNext:function(Ne){O=Ne},iterate:Ye,onComplete:W}};function W(Ne,me){for(var Ue=[],Ee=2;Ee<arguments.length;Ee++)Ue[Ee-2]=arguments[Ee];Ne&&$[Va]({func:Ne,self:kt(me)?q.ctx:me,args:Ue})}function oe(){var Ne=O;if(O=Ne?Ne[Zo]():null,!Ne){var me=$;me&&me[Vr]>0&&(hr(me,function(Ue){try{Ue.func.call(Ue.self,Ue.args)}catch(Ee){pa(E[Jo],2,73,"Unexpected Exception during onComplete - "+pr(Ee))}}),$=[])}return Ne}function se(Ne,me){var Ue=null,Ee=_.cfg;if(Ee&&Ne){var Ke=Ee[ec];!Ke&&me&&(Ke={}),Ee[ec]=Ke,Ke=_.ref(Ee,ec),Ke&&(Ue=Ke[Ne],!Ue&&me&&(Ue={}),Ke[Ne]=Ue,Ue=_.ref(Ke,Ne))}return Ue}function De(Ne,me){var Ue=se(Ne,!0);return me&&wr(me,function(Ee,Ke){if(rt(Ue[Ee])){var Ce=_.cfg[Ee];(Ce||!rt(Ce))&&(Ue[Ee]=Ce)}sd(_,Ue,Ee,Ke)}),_[Wo](Ue,me)}function qe(Ne,me,Ue){Ue===void 0&&(Ue=!1);var Ee,Ke=se(Ne,!1),Ce=_.cfg;return Ke&&(Ke[me]||!rt(Ke[me]))?Ee=Ke[me]:(Ce[me]||!rt(Ce[me]))&&(Ee=Ce[me]),Ee||!rt(Ee)?Ee:Ue}function Ye(Ne){for(var me;me=q._next();){var Ue=me[Jd]();Ue&&Ne(Ue)}}return q}function ef(d,_,E,D){var O=us(_),$=Qp(d,O,E,D),q=$.ctx;function W(se){var De=$._next();return De&&De[es](se,q),!De}function oe(se,De){return se===void 0&&(se=null),Ht(se)&&(se=tf(se,O.cfg,E,De)),ef(se||q[Zo](),O.cfg,E,De)}return q[So]=W,q[Vu]=oe,q}function ev(d,_,E){var D=us(_.config),O=Qp(d,D,_,E),$=O.ctx;function q(oe){var se=O._next();return se&&se[vn]($,oe),!se}function W(oe,se){return oe===void 0&&(oe=null),Ht(oe)&&(oe=tf(oe,D.cfg,_,se)),ev(oe||$[Zo](),_,se)}return $[So]=q,$[Vu]=W,$}function Gv(d,_,E){var D=us(_.config),O=Qp(d,D,_,E),$=O.ctx;function q(oe){return $.iterate(function(se){Wt(se[wo])&&se[wo]($,oe)})}function W(oe,se){return oe===void 0&&(oe=null),Ht(oe)&&(oe=tf(oe,D.cfg,_,se)),Gv(oe||$[Zo](),_,se)}return $[So]=q,$[Vu]=W,$}function tf(d,_,E,D){var O=null,$=!D;if(Ht(d)&&d[Vr]>0){var q=null;hr(d,function(W){if(!$&&D===W&&($=!0),$&&W&&Wt(W[es])){var oe=Hv(W,_,E);O||(O=oe),q&&q._setNext(oe),q=oe}})}return D&&!O?tf([D],_,E):O}function Hv(d,_,E){var D=null,O=Wt(d[es]),$=Wt(d[xi]),q;d?q=d[Wd]+"-"+d[Xd]+"-"+zv++:q="Unknown-0-"+zv++;var W={getPlugin:function(){return d},getNext:function(){return D},processTelemetry:De,unload:qe,update:Ye,_id:q,_setNext:function(Ne){D=Ne}};function oe(){var Ne;return d&&Wt(d[Bv])&&(Ne=d[Bv]()),Ne||(Ne=ef(W,_,E)),Ne}function se(Ne,me,Ue,Ee,Ke){var Ce=!1,Te=d?d[Wd]:Xl,Be=Ne[Eu];return Be||(Be=Ne[Eu]={}),Ne.setNext(D),d&&ma(Ne[Jn](),function(){return Te+":"+Ue},function(){Be[q]=!0;try{var zt=D?D._id:cn;zt&&(Be[zt]=!1),Ce=me(Ne)}catch(or){var Zt=D?Be[D._id]:!0;Zt&&(Ce=!0),(!D||!Zt)&&pa(Ne[As](),1,73,"Plugin ["+Te+"] failed during "+Ue+" - "+pr(or)+", run flags: "+pr(Be))}},Ee,Ke),Ce}function De(Ne,me){me=me||oe();function Ue(Ee){if(!d||!O)return!1;var Ke=Zl(d);return Ke[Ku]||Ke[ki]?!1:($&&d[xi](D),d[es](Ne,Ee),!0)}se(me,Ue,"processTelemetry",function(){return{item:Ne}},!Ne.sync)||me[So](Ne)}function qe(Ne,me){function Ue(){var Ee=!1;if(d){var Ke=Zl(d),Ce=d[Jn]||Ke[Jn];d&&(!Ce||Ce===Ne.core())&&!Ke[Ku]&&(Ke[Jn]=null,Ke[Ku]=!0,Ke[kl]=!1,d[Ku]&&d[Ku](Ne,me)===!0&&(Ee=!0))}return Ee}se(Ne,Ue,"unload",function(){},me[mu])||Ne[So](me)}function Ye(Ne,me){function Ue(){var Ee=!1;if(d){var Ke=Zl(d),Ce=d[Jn]||Ke[Jn];d&&(!Ce||Ce===Ne.core())&&!Ke[Ku]&&d[wo]&&d[wo](Ne,me)===!0&&(Ee=!0)}return Ee}se(Ne,Ue,"update",function(){},!1)||Ne[So](me)}return ur(W)}function Tu(){var d=[];function _(D){D&&d[Va](D)}function E(D,O){hr(d,function($){try{$(D,O)}catch(q){pa(D[As](),2,73,"Unexpected error calling unload handler - "+pr(q))}}),d=[]}return{add:_,run:E}}function el(){var d=[];function _(D){var O=d;d=[],hr(O,function($){try{($.rm||$.remove).call($)}catch(q){pa(D,2,73,"Unloading:"+pr(q))}})}function E(D){D&&Bf(d,D)}return{run:_,add:E}}var fp,ls="getPlugin",pd=(fp={},fp[ec]={isVal:ts,v:{}},fp),rf=function(){function d(){var _=this,E,D,O,$,q;se(),Wi(d,_,function(De){De[Jf]=function(qe,Ye,Ne,me){oe(qe,Ye,me),E=!0},De[Ku]=function(qe,Ye){var Ne,me=De[Jn];if(!me||qe&&me!==qe[Jn]())return;var Ue,Ee=!1,Ke=qe||ev(null,me,O&&O[ls]?O[ls]():O),Ce=Ye||(Ne={reason:0},Ne[mu]=!1,Ne);function Te(){Ee||(Ee=!0,$.run(Ke,Ye),q.run(Ke[As]()),Ue===!0&&Ke[So](Ce),se())}return!De[cr]||De[cr](Ke,Ce,Te)!==!0?Te():Ue=!0,Ue},De[wo]=function(qe,Ye){var Ne=De[Jn];if(!Ne||qe&&Ne!==qe[Jn]())return;var me,Ue=!1,Ee=qe||Gv(null,Ne,O&&O[ls]?O[ls]():O),Ke=Ye||{reason:0};function Ce(){Ue||(Ue=!0,oe(Ee.getCfg(),Ee.core(),Ee[Zo]()))}return!De._doUpdate||De._doUpdate(Ee,Ke,Ce)!==!0?Ce():me=!0,me},rd(De,"_addUnloadCb",function(){return $},"add"),rd(De,"_addHook",function(){return q},"add"),Sn(De,"_unloadHooks",{g:function(){return q}})}),_[As]=function(De){return W(De)[As]()},_[kl]=function(){return E},_.setInitialized=function(De){E=De},_[xi]=function(De){O=De},_[So]=function(De,qe){qe?qe[So](De):O&&Wt(O[es])&&O[es](De,null)},_._getTelCtx=W;function W(De){De===void 0&&(De=null);var qe=De;if(!qe){var Ye=D||ef(null,{},_[Jn]);O&&O[ls]?qe=Ye[Vu](null,O[ls]):qe=Ye[Vu](null,O)}return qe}function oe(De,qe,Ye){us(De,pd,Qc(qe)),!Ye&&qe&&(Ye=qe[Zi]()[Zo]());var Ne=O;O&&O[ls]&&(Ne=O[ls]()),_[Jn]=qe,D=ef(Ye,De,qe,Ne)}function se(){E=!1,_[Jn]=null,D=null,O=null,q=el(),$=Tu()}}return d.__ieDyn=1,d}(),Po="",tl="NoResponseBody",Vv="&"+tl+"=true",rl="POST",Pm=function(){function d(){var _=0,E,D,O,$,q,W,oe,se,De,qe,Ye,Ne,me,Ue;Wi(d,this,function(Ee,Ke){var Ce=!0;ea(),Ee[Jf]=function(Xe,ft){O=ft,D&&pa(O,1,28,"Sender is already initialized"),Ee.SetConfig(Xe),D=!0},Ee._getDbgPlgTargets=function(){return[D,$,W,E]},Ee.SetConfig=function(Xe){try{if(q=Xe.senderOnCompleteCallBack||{},W=!!Xe.disableCredentials,oe=Xe.fetchCredentials,$=!!Xe.isOneDs,E=!!Xe.enableSendPromise,De=!!Xe.disableXhr,qe=!!Xe.disableBeacon,Ye=!!Xe.disableBeaconSync,Ue=Xe.timeWrapper,me=!!Xe.addNoResponse,Ne=!!Xe.disableFetchKeepAlive,se={sendPOST:ln},$||(Ce=!1),W){var ft=np();ft&&ft.protocol&&ft.protocol[fi]()==="file:"&&(Ce=!1)}return!0}catch{}return!1},Ee.getSyncFetchPayload=function(){return _},Ee.getSenderInst=function(Xe,ft){return Xe&&Xe[Vr]?Zt(Xe,ft):null},Ee.getFallbackInst=function(){return se},Ee[cr]=function(Xe,ft){ea()};function Te(Xe,ft){or(ft,200,{},Xe)}function Be(Xe,ft){pa(O,2,26,"Failed to send telemetry.",{message:Xe}),or(ft,400,{})}function zt(Xe){Be("No endpoint url is provided for the batch",Xe)}function Zt(Xe,ft){for(var yr,lr=0,Et=null,Rr=0;Et==null&&Rr<Xe[Vr];)lr=Xe[Rr],!De&&lr===1?sc()?Et=Xt:Za()&&(Et=ln):lr===2&&Gc(ft)&&(!ft||!Ne)?Et=tn:lr===3&&id()&&(ft?!Ye:!qe)&&(Et=jr),Rr++;return Et?(yr={_transport:lr,_isSync:ft},yr[Xf]=Et,yr):null}function or(Xe,ft,yr,lr){try{Xe&&Xe(ft,yr,lr)}catch{}}function Dr(Xe,ft){var yr=sa(),lr=Xe[To];if(!lr)return zt(ft),!0;lr=Xe[To]+(me?Vv:Po);var Et=Xe[Ai],Rr=$?Et:new Blob([Et],{type:"text/plain;charset=UTF-8"}),It=yr.sendBeacon(lr,Rr);return It}function jr(Xe,ft,yr){var lr=Xe[Ai];try{if(lr)if(Dr(Xe,ft))Te(Po,ft);else{var Et=q&&q.beaconOnRetry;Et&&Wt(Et)?Et(Xe,ft,Dr):(se&&se[Xf](Xe,ft,!0),pa(O,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Rr){$&&Hs(O,"Failed to send telemetry using sendBeacon API. Ex:"+pr(Rr)),or(ft,$?0:400,{},Po)}}function ln(Xe,ft,yr){var lr,Et,Rr,It=Xe[Io]||{};!yr&&E&&(lr=Oi(function(In,yi){Et=In,Rr=yi})),$&&yr&&Xe.disableXhrSync&&(yr=!1);var Ma=Xe[To];if(!Ma){zt(ft),Et&&Et(!1);return}var ut=Dm(rl,Ma,Ce,!0,yr,Xe[An]);$||ut[Qi]("Content-type","application/json"),hr(bn(It),function(In){ut[Qi](In,It[In])}),ut.onreadystatechange=function(){$||(Tn(ut),ut.readyState===4&&Et&&Et(!0))},ut.onload=function(){$&&Tn(ut)};function Tn(In){var yi=q&&q.xhrOnComplete,_c=yi&&Wt(yi);if(_c)yi(In,ft,Xe);else{var Ui=Ja(In);or(ft,In[bo],ac(In,$),Ui)}}return ut.onerror=function(In){or(ft,$?ut[bo]:400,ac(ut,$),$?Po:Uv(ut)),Rr&&Rr(In)},ut.ontimeout=function(){or(ft,$?ut[bo]:500,ac(ut,$),$?Po:Uv(ut)),Et&&Et(!1)},ut.send(Xe[Ai]),lr}function tn(Xe,ft,yr){var lr,Et=Xe[To],Rr=Xe[Ai],It=$?Rr:new Blob([Rr],{type:"application/json"}),Ma,ut,Tn,In=new Headers,yi=Rr[Vr],_c=!1,Ui=!1,If=Xe[Io]||{},_s=(lr={method:rl,body:It},lr[cs]=!0,lr);Xe.headers&&bn(Xe.headers)[Vr]>0&&(hr(bn(If),function(Jr){In.append(Jr,If[Jr])}),_s[Io]=In),oe?_s.credentials=oe:Ce&&$&&(_s.credentials="include"),yr&&(_s.keepalive=!0,_+=yi,$?Xe._sendReason===2&&(_c=!0,me&&(Et+=Vv)):_c=!0);var Lo=new Request(Et,_s);try{Lo[cs]=!0}catch{}if(!yr&&E&&(Ma=Oi(function(Jr,ra){ut=Jr,Tn=ra})),!Et){zt(ft),ut&&ut(!1);return}function tu(Jr){or(ft,$?0:400,{},$?Po:Jr)}function ta(Jr,ra,La){var ru=Jr[bo],gc=q.fetchOnComplete;gc&&Wt(gc)?gc(Jr,ft,La||Po,ra):or(ft,ru,{},La||Po)}try{Ju(fetch($?Et:Lo,$?_s:null),function(Jr){if(yr&&(_-=yi,yi=0),!Ui)if(Ui=!0,Jr.rejected)tu(Jr.reason&&Jr.reason[Ci]),Tn&&Tn(Jr.reason);else{var ra=Jr[Ml];try{!$&&!ra.ok?(tu(ra.statusText),ut&&ut(!1)):$&&!ra.body?(ta(ra,null,Po),ut&&ut(!0)):Ju(ra.text(),function(La){ta(ra,Xe,La[Ml]),ut&&ut(!0)})}catch(La){tu(pr(La)),Tn&&Tn(La)}}})}catch(Jr){Ui||(tu(pr(Jr)),Tn&&Tn(Jr))}return _c&&!Ui&&(Ui=!0,or(ft,200,{}),ut&&ut(!0)),$&&!Ui&&Xe[An]>0&&Ue&&Ue.set(function(){Ui||(Ui=!0,or(ft,500,{}),ut&&ut(!0))},Xe[An]),Ma}function Xt(Xe,ft,yr){var lr=ii(),Et=new XDomainRequest,Rr=Xe[Ai];Et.onload=function(){var In=Ja(Et),yi=q&&q.xdrOnComplete;yi&&Wt(yi)?yi(Et,ft,Xe):or(ft,200,{},In)},Et.onerror=function(){or(ft,400,{},$?Po:$c(Et))},Et.ontimeout=function(){or(ft,500,{})},Et.onprogress=function(){};var It=lr&&lr.location&&lr.location[Zf]||"",Ma=Xe[To];if(!Ma){zt(ft);return}if(!$&&Ma.lastIndexOf(It,0)!==0){var ut="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";pa(O,2,40,". "+ut),Be(ut,ft);return}var Tn=$?Ma:Ma[Ka](/^(https?:)/,"");Et.open(rl,Tn),Xe[An]&&(Et[An]=Xe[An]),Et.send(Rr),$&&yr?Ue&&Ue.set(function(){Et.send(Rr)},0):Et.send(Rr)}function ea(){_=0,D=!1,E=!1,O=null,$=null,q=null,W=null,oe=null,se=null,De=!1,qe=!1,Ye=!1,Ne=!1,me=!1,Ue=null}})}return d.__ieDyn=1,d}(),nf="on",Kv="attachEvent",tv="addEventListener",Iu="detachEvent",Nu="removeEventListener",nl="events",fs="visibilitychange",Vs="pagehide",af="pageshow",vd="unload",md="beforeunload",of=Hn("aiEvtPageHide"),hi=Hn("aiEvtPageShow"),sf=/\.[\.]+/g,Wv=/[\.]+$/,Am=1,al=Vc("events"),Rm=/^([^.]*)(?:\.(.+)|)/;function Ao(d){return d&&d[Ka]?d[Ka](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,cn):d}function Du(d,_){var E;if(_){var D=cn;Ht(_)?(D=cn,hr(_,function($){$=Ao($),$&&($[0]!=="."&&($="."+$),D+=$)})):D=Ao(_),D&&(D[0]!=="."&&(D="."+D),d=(d||cn)+D)}var O=Rm.exec(d||cn)||[];return E={},E[pt]=O[1],E.ns=(O[2]||cn).replace(sf,".").replace(Wv,cn)[hu](".").sort().join("."),E}function il(d,_,E){E===void 0&&(E=!0);var D=al.get(d,nl,{},E),O=D[_];return O||(O=D[_]=[]),O}function Jv(d,_,E,D){d&&_&&_[pt]&&(d[Nu]?d[Nu](_[pt],E,D):d[Iu]&&d[Iu](nf+_[pt],E))}function dp(d,_,E,D){var O=!1;return d&&_&&_[pt]&&E&&(d[tv]?(d[tv](_[pt],E,D),O=!0):d[Kv]&&(d[Kv](nf+_[pt],E),O=!0)),O}function Zv(d,_,E,D){for(var O=_[Vr];O--;){var $=_[O];$&&(!E.ns||E.ns===$.evtName.ns)&&(!D||D($))&&(Jv(d,$.evtName,$[Wu],$.capture),_[Kd](O,1))}}function rv(d,_,E){if(_[pt])Zv(d,il(d,_[pt]),_,E);else{var D=al.get(d,nl,{});wr(D,function(O,$){Zv(d,$,_,E)}),bn(D)[Vr]===0&&al.kill(d,nl)}}function hd(d,_){var E;return _?(Ht(_)?E=[d].concat(_):E=[d,_],E=Du("xx",E).ns[hu](".")):E=d,E}function ol(d,_,E,D,O){var $;O===void 0&&(O=!1);var q=!1;if(d)try{var W=Du(_,D);if(q=dp(d,W,E,O),q&&al.accept(d)){var oe=($={guid:Am++,evtName:W},$[Wu]=E,$.capture=O,$);il(d,W.type)[Va](oe)}}catch{}return q}function ro(d,_,E,D,O){if(O===void 0&&(O=!1),d)try{var $=Du(_,D),q=!1;rv(d,$,function(W){return $.ns&&!E||W[Wu]===E?(q=!0,!0):!1}),q||Jv(d,$,E,O)}catch{}}function _d(d,_,E){var D=!1,O=ii();O&&(D=ol(O,d,_,E),D=ol(O.body,d,_,E)||D);var $=Mn();return $&&(D=ol($,d,_,E)||D),D}function sl(d,_,E){var D=ii();D&&(ro(D,d,_,E),ro(D.body,d,_,E));var O=Mn();O&&ro(O,d,_,E)}function Oa(d,_,E,D){var O=!1;return _&&d&&d[Vr]>0&&hr(d,function($){$&&(!E||Ho(E,$)===-1)&&(O=_d($,_,D)||O)}),O}function no(d,_,E,D){var O=!1;return _&&d&&Ht(d)&&(O=Oa(d,_,E,D),!O&&E&&E[Vr]>0&&(O=Oa(d,_,null,D))),O}function uf(d,_,E){d&&Ht(d)&&hr(d,function(D){D&&sl(D,_,E)})}function Xv(d,_,E){return no([md,vd,Vs],d,_,E)}function Qv(d,_){uf([md,vd,Vs],d,_)}function ha(d,_,E){function D(q){var W=Mn();d&&W&&W.visibilityState==="hidden"&&d(q)}var O=hd(of,E),$=Oa([Vs],d,_,O);return(!_||Ho(_,fs)===-1)&&($=Oa([fs],D,_,O)||$),!$&&_&&($=ha(d,null,E)),$}function ul(d,_){var E=hd(of,_);uf([Vs],d,E),uf([fs],null,E)}function cf(d,_,E){function D(q){var W=Mn();d&&W&&W.visibilityState==="visible"&&d(q)}var O=hd(hi,E),$=Oa([af],d,_,O);return $=Oa([fs],D,_,O)||$,!$&&_&&($=cf(d,null,E)),$}function Om(d,_){var E=hd(hi,_);uf([af],d,E),uf([fs],null,E)}var em="",lf="timings",ka="value",pp="kind",fc="length",cl="processTelemetryStart",Ks,ff="4.3.4",vp="1DS-Web-JS-"+ff,St=C.hasOwnProperty,Cu=(Ks={},Ks[0]=0,Ks[2]=6,Ks[1]=1,Ks[3]=7,Ks[4098]=6,Ks[4097]=1,Ks[4099]=7,Ks);function Ro(d){return!(d===em||rt(d))}function df(d){if(d){var _=qd(d,"-");if(_>-1)return Lr(d,_)}return em}function km(d,_,E){if(!_&&!Ro(_)||typeof d!="string")return null;var D=typeof _;if(D==="string"||D==="number"||D==="boolean"||Ht(_))_={value:_};else if(D==="object"&&!St.call(_,"value"))_={value:E?JSON.stringify(_):_};else if(rt(_[ka])||_[ka]===em||!Nc(_[ka])&&!tr(_[ka])&&!Yr(_[ka])&&!Ht(_[ka]))return null;if(Ht(_[ka])&&!hp(_[ka]))return null;if(!rt(_[pp])){if(Ht(_[ka])||!tm(_[pp]))return null;_[ka]=_[ka].toString()}return _}function pf(d,_,E){var D=-1;if(!kt(d))if(_>0&&(_===32?D=8192:_<=13&&(D=_<<5)),mp(E))D===-1&&(D=0),D|=E;else{var O=Cu[dc(d)]||-1;D!==-1&&O!==-1?D|=O:O===6&&(D=O)}return D}function gd(d,_,E,D,O){var $={},q=!1,W=0,oe=arguments[fc],se=arguments;for(Yr(se[0])&&(q=se[0],W++);W<oe;W++){var d=se[W];wr(d,function(qe,Ye){q&&Ye&&$i(Ye)?Ht(Ye)?($[qe]=$[qe]||[],hr(Ye,function(Ne,me){Ne&&$i(Ne)?$[qe][me]=gd(!0,$[qe][me],Ne):$[qe][me]=Ne})):$[qe]=gd(!0,$[qe],Ye):$[qe]=Ye})}return $}var Oo=$d;function tm(d){return d===0||d>0&&d<=13||d===32}function mp(d){return d>=0&&d<=9}function hp(d){return d[fc]>0}function vf(d,_){var E=d;E[lf]=E[lf]||{},E[lf][cl]=E[lf][cl]||{},E[lf][cl][_]=Oo()}function dc(d){var _=0;if(d!=null){var E=typeof d;E==="string"?_=1:E==="number"?_=2:E==="boolean"?_=3:E===u&&(_=4,Ht(d)?(_=4096,d[fc]>0&&(_|=dc(d[0]))):St.call(d,"value")&&(_=8192|dc(d[ka])))}return _}function nv(){return!!sn("chrome")}function Gr(d){return d>0}var Ws="",av="drop",xu="send",ao="requeue",Fn="rspFail",yd="oth",pc="no-cache, no-store",ll="application/x-json-stream",ds="cache-control",io="content-type",ko="kill-tokens",Sd="kill-duration",_p="time-delta-millis",iv="client-version",ps="client-id",ov="time-delta-to-apply-millis",wd="upload-time",sv="apikey",vs="AuthMsaDeviceTicket",Mm="WebAuthToken",Pu="AuthXToken",uv="NoResponseBody",f="msfpc",m="trace",y="user",N="allowRequestSending",U="firstRequestSent",V="shouldAddClockSkewHeaders",J="getClockSkewHeaderValue",ae="setClockSkew",ne="length",ge="concat",tt="iKey",bt="count",Jt="events",ot="push",lt="split",ir="splice",Ut="toLowerCase",gr="hdrs",br="useHdrs",At="initialize",En="setTimeoutOverride",vc="clearTimeoutOverride",Js="payloadPreprocessor",fl="overrideEndpointUrl",mf="avoidOptions",bd="disableEventTimings",hf="stringifyObjects",_f="enableCompoundKey",Ed="disableXhrSync",gf="disableFetchKeepAlive",Re="addNoResponse",vt="excludeCsMetaData",Bt="useSendBeacon",en="fetchCredentials",Ea="alwaysUseXhrOverride",Ta="unloadTransports",Xn="serializeOfflineEvt",_i="getOfflineRequestDetails",ms="createPayload",dl="createOneDSPayload",rm="payloadBlob",Au="headers",Td="_thePayload",Lm="urlString",Qn="batches",hs="sendType",nm="addHeader",Fm="canSendRequest",cv="sendQueuedRequests",Um="isCompletelyIdle",jm="setUnloading",Hh="isTenantKilled",Ym="resume",$m="sendSynchronousBatch",pl="_transport",yf="getWParam",Zs="isBeacon",vl="timings",qm="isTeardown",am="isSync",lv="data",fv="timeout",Id="_sendReason",lh="setKillSwitchTenants",Bm="_backOffTransmission",gp="identifier",ml="disableOptimizeObj",P_="ignoreMc1Ms0CookieProcessing",fh="eventsLimitInMem",Vh="autoFlushEventsLimit",zm="disableAutoBatchFlushLimit",A_="overrideInstrumentationKey",Sf="disableTelemetry",dv="baseData",im="sendAttempt",wf="latency",pv="sync";function dh(d){var _=(d.ext||{}).intweb;return _&&Ro(_[f])?_[f]:null}function Kh(d){for(var _=null,E=0;_===null&&E<d[ne];E++)_=dh(d[E]);return _}var Nd=function(){function d(_,E){var D=E?[][ge](E):[],O=this,$=Kh(D);O[tt]=function(){return _},O.Msfpc=function(){return $||Ws},O[bt]=function(){return D[ne]},O[Jt]=function(){return D},O.addEvent=function(q){return q?(D[ot](q),$||($=dh(q)),!0):!1},O[lt]=function(q,W){var oe;if(q<D[ne]){var se=D[ne]-q;rt(W)||(se=W<se?W:se),oe=D[ir](q,se),$=Kh(D)}return new d(_,oe)}}return d.create=function(_,E){return new d(_,E)},d}(),Wh=function(){function d(){var _=!0,E=!0,D=!0,O="use-collector-delta",$=!1;Wi(d,this,function(q){q[N]=function(){return _},q[U]=function(){D&&(D=!1,$||(_=!1))},q[V]=function(){return E},q[J]=function(){return O},q[ae]=function(W){$||(W?(O=W,E=!0,$=!0):E=!1,_=!0)}})}return d.__ieDyn=1,d}(),R_=1e3,ph=function(){function d(){var _={};function E(D){var O=[];return D&&hr(D,function($){O[ot](Ti($))}),O}Wi(d,this,function(D){D[lh]=function(O,$){if(O&&$)try{var q=E(O[lt](","));if($==="this-request-only")return q;for(var W=parseInt($,10)*R_,oe=0;oe<q[ne];++oe)_[q[oe]]=Ei()+W}catch{return[]}return[]},D[Hh]=function(O){var $=_,q=Ti(O);return $[q]!==void 0&&$[q]>Ei()?!0:(delete $[q],!1)}})}return d.__ieDyn=1,d}(),om=.8,vh=1.2,Gm=3e3,vv=6e5;function Dd(d){return!(d>=300&&d<500&&d!=429||d==501||d==505)}function mh(d){var _=0,E=Gm*om,D=Gm*vh,O=Math.floor(Math.random()*(D-E))+E;return _=Math.pow(2,d)*O,Math.min(_,vv)}var sm=20,Kr=3984588,Xs=65e3,Cd=2e6,yp=Math.min(Cd,Xs),mv="metadata",um="f",bf=/\./,xd=function(){function d(_,E,D,O,$,q){var W="data",oe="baseData",se="ext",De=!!O,qe=!0,Ye=E,Ne={},me=!!q,Ue=$||pf;Wi(d,this,function(Ee){Ee.createPayload=function(Te,Be,zt,Zt,or,Dr){return{apiKeys:[],payloadBlob:Ws,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:Te,isTeardown:Be,isSync:zt,isBeacon:Zt,sendType:Dr,sendReason:or}},Ee.appendPayload=function(Te,Be,zt){var Zt=Te&&Be&&!Te.overflow;return Zt&&ma(_,function(){return"Serializer:appendPayload"},function(){for(var or=Be.events(),Dr=Te.payloadBlob,jr=Te.numEvents,ln=!1,tn=[],Xt=[],ea=Te.isBeacon,Xe=ea?Xs:Kr,ft=ea?yp:Cd,yr=0,lr=0;yr<or.length;){var Et=or[yr];if(Et){if(jr>=zt){Te.overflow=Be.split(yr);break}var Rr=Ee.getEventBlob(Et);if(Rr&&Rr.length<=ft){var It=Rr.length,Ma=Dr.length;if(Ma+It>Xe){Te.overflow=Be.split(yr);break}Dr&&(Dr+=`
`),Dr+=Rr,lr++,lr>sm&&(Ns(Dr,0,1),lr=0),ln=!0,jr++}else Rr?tn.push(Et):Xt.push(Et),or.splice(yr,1),yr--}yr++}if(tn.length>0&&Te.sizeExceed.push(Nd.create(Be.iKey(),tn)),Xt.length>0&&Te.failedEvts.push(Nd.create(Be.iKey(),Xt)),ln){Te.batches.push(Be),Te.payloadBlob=Dr,Te.numEvents=jr;var ut=Be.iKey();Ho(Te.apiKeys,ut)===-1&&Te.apiKeys.push(ut)}},function(){return{payload:Te,theBatch:{iKey:Be.iKey(),evts:Be.events()},max:zt}}),Zt},Ee.getEventBlob=function(Te){try{return ma(_,function(){return"Serializer.getEventBlob"},function(){var Be={};Be.name=Te.name,Be.time=Te.time,Be.ver=Te.ver,Be.iKey="o:"+df(Te.iKey);var zt={},Zt;me||(Zt=function(ln,tn,Xt){Jh(Ue,zt,ln,tn,Xt)});var or=Te[se];or&&(Be[se]=zt,wr(or,function(ln,tn){var Xt=zt[ln]={};Ce(tn,Xt,"ext."+ln,!0,null,null,!0)}));var Dr=Be[W]={};Dr.baseType=Te.baseType;var jr=Dr[oe]={};return Ce(Te.baseData,jr,oe,!1,[oe],Zt,qe),Ce(Te.data,Dr,W,!1,[],Zt,qe),JSON.stringify(Be)},function(){return{item:Te}})}catch{return null}};function Ke(Te,Be){var zt=Ne[Te];return zt===void 0&&(Te.length>=7&&(zt=Wn(Te,"ext.metadata")||Wn(Te,"ext.web")),Ne[Te]=zt),zt}function Ce(Te,Be,zt,Zt,or,Dr,jr){wr(Te,function(ln,tn){var Xt=null;if(tn||Ro(tn)){var ea=zt,Xe=ln,ft=or,yr=Be;if(De&&!Zt&&bf.test(ln)){var lr=ln.split("."),Et=lr.length;if(Et>1){ft&&(ft=ft.slice());for(var Rr=0;Rr<Et-1;Rr++){var It=lr[Rr];yr=yr[It]=yr[It]||{},ea+="."+It,ft&&ft.push(It)}Xe=lr[Et-1]}}var Ma=Zt&&Ke(ea);if(!Ma&&Ye&&Ye.handleField(ea,Xe)?Xt=Ye.value(ea,Xe,tn,D):Xt=km(Xe,tn,D),Xt){var ut=Xt.value;if(yr[Xe]=ut,Dr&&Dr(ft,Xe,Xt),jr&&typeof ut=="object"&&!Ht(ut)){var Tn=ft;Tn&&(Tn=Tn.slice(),Tn.push(Xe)),Ce(tn,ut,ea+"."+Xe,Zt,Tn,Dr,jr)}}}})}})}return d.__ieDyn=1,d}();function Jh(d,_,E,D,O){if(O&&_){var $=d(O.value,O.kind,O.propertyType);if($>-1){var q=_[mv];q||(q=_[mv]={f:{}});var W=q[um];if(W||(W=q[um]={}),E)for(var oe=0;oe<E.length;oe++){var se=E[oe];W[se]||(W[se]={f:{}});var De=W[se][um];De||(De=W[se][um]={}),W=De}W=W[D]={},Ht(O.value)?W.a={t:$}:W.t=$}}}function Sp(d,_){return{set:function(E,D){for(var O=[],$=2;$<arguments.length;$++)O[$-2]=arguments[$];return $p([d,_],E,D,O)}}}var hl,mc="sendAttempt",Mo="&"+uv+"=true",Qs="?cors=true&"+io[Ut]()+"="+ll,_l=(hl={},hl[1]=ao,hl[100]=ao,hl[200]="sent",hl[8004]=av,hl[8003]=av,hl),Ef={},Ru={};function Ou(d,_,E){Ef[d]=_,E!==!1&&(Ru[_]=d)}Ou(vs,vs,!1),Ou(iv,iv),Ou(ps,"Client-Id"),Ou(sv,sv),Ou(ov,ov),Ou(wd,wd),Ou(Pu,Pu);function wp(d,_){var E=!1;if(d&&_){var D=bn(d);if(D&&D[ne]>0)for(var O=_[Ut](),$=0;$<D[ne];$++){var q=D[$];if(q&&je(_,q)&&q[Ut]()===O){E=!0;break}}}return E}function Pd(d,_,E,D){_&&E&&E[ne]>0&&(D&&Ef[_]?(d[gr][Ef[_]]=E,d[br]=!0):d.url+="&"+_+"="+E)}function Zh(d,_,E){for(var D=0;D<d[ne];D++)if(d[D].name===_){d[D].value=E;return}d[ot]({name:_,value:E})}function hv(d,_){for(var E=0;E<d[ne];E++)if(d[E].name===_){d[ir](E,1);return}}var hc=function(){function d(_,E,D,O){var $,q,W,oe,se=!1,De,qe,Ye,Ne,me,Ue,Ee,Ke,Ce,Te,Be,zt,Zt,or,Dr,jr,ln,tn,Xt,ea,Xe,ft,yr,lr,Et,Rr,It,Ma;Wi(d,this,function(ut){Ui();var Tn=!0;ut[At]=function(a,c,p){lr||(me=c,zt=c.getCookieMgr(),qe=p,Ye=qe.diagLog(),Bf(ea,Bs(a,function(g){var b,x=g.cfg,R=g.cfg.extensionConfig[p.identifier];Et=Sp(R[En],R[vc]),Ro(x.anonCookieName)?Zh(Ee,"anoncknm",x.anonCookieName):hv(Ee,"anoncknm"),Xe=R[Js],ft=R.payloadListener;var P=R.httpXHROverride,M=R[fl]?R[fl]:x.endpointUrl;$=M+Qs,or=kt(R[mf])?!0:!R[mf],Be=!R[bd];var j=R.valueSanitizer,G=R[hf],H=!!x[_f];kt(R[_f])||(H=!!R[_f]),Dr=R.xhrTimeout,jr=!!R[Ed],ln=!!R[gf],Xt=R[Re]!==!1,Rr=!!R[vt],c.getPlugin("LocalStorage")&&(ln=!0),se=!la(),Te=new xd(me,j,G,H,pf,Rr),rt(R[Bt])||(se=!!R[Bt]),R[en]&&(Ma=R[en]);var K=yi();It?It.SetConfig(K):(It=new Pm,It[At](K,Ye));var te=P,Z=R[Ea]?P:null,_e=R[Ea]?P:null,ye=[3,2];if(!P){Ue=!1;var Fe=[];la()?(Fe=[2,1],ye=[2,1,3]):Fe=[1,2,3],Fe=tc(Fe,R.transports),P=In(Fe,!1),P||Hs(Ye,"No available transport to send events"),te=In(Fe,!0)}Z||(ye=tc(ye,R[Ta]),Z=In(ye,!0)),tn=!Ue&&(se&&id()||!ln&&Gc(!0)),Ne=(b={},b[0]=P,b[1]=te||In([1,2,3],!0),b[2]=Z||te||In([1],!0),b[3]=_e||In([2,3],!0)||te||In([1],!0),b)})),lr=!0)},ut.addResponseHandler=function(a){return yr[ot](a),{rm:function(){var c=yr.indexOf(a);c>=0&&yr[ir](c,1)}}},ut[Xn]=function(a){try{if(Te)return Te.getEventBlob(a)}catch{}return Ws},ut[_i]=function(){try{var a=Te&&Te[ms](0,!1,!1,!1,1,0);return Nf(a,or)}catch{}return null},ut[dl]=function(a,c){try{var p=[];hr(a,function(P){c&&(P=xo(P));var M=Nd.create(P[tt],[P]);p[ot](M)});for(var g=null;p[ne]>0&&Te;){var b=p.shift();b&&b[bt]()>0&&(g=g||Te[ms](0,!1,!1,!1,1,0),Te.appendPayload(g,b,_))}var x=Nf(g,or),R={data:g[rm],urlString:x.url,headers:x[gr],timeout:Dr,disableXhrSync:jr,disableFetchKeepAlive:ln};return or&&(wp(R[Au],ds)||(R[Au][ds]=pc),wp(R[Au],io)||(R[Au][io]=ll)),R}catch{}return null};function In(a,c){try{return It&&It.getSenderInst(a,c)}catch{}return null}ut._getDbgPlgTargets=function(){return[Ne[0],q,Te,Ne,yi(),$]};function yi(){try{var a={xdrOnComplete:_c,fetchOnComplete:If,xhrOnComplete:_s,beaconOnRetry:tu},c={enableSendPromise:!1,isOneDs:!0,disableCredentials:!Tn,fetchCredentials:Ma,disableXhr:!1,disableBeacon:!se,disableBeaconSync:!se,disableFetchKeepAlive:ln,timeWrapper:Et,addNoResponse:Xt,senderOnCompleteCallBack:a};return c}catch{}return null}function _c(a,c,p){var g=Ja(a);Lo(c,200,{},g),ku(g)}function Ui(){var a;$=null,q=new ph,W=!1,oe=new Wh,se=!1,De=0,qe=null,Ye=null,Ne=null,me=null,Ue=!0,Ee=[],Ke={},Ce=[],Te=null,Be=!1,zt=null,Zt=!1,or=!1,Dr=a,jr=a,ln=a,tn=a,Xt=a,ea=[],Xe=a,ft=a,yr=[],lr=!1,Et=Sp(),Rr=!1,It=null}function If(a,c,p,g){var b=function(P,M,j){Lo(c,P,M,j),ku(j)},x={},R=a[Au];R&&R.forEach(function(P,M){x[M]=P}),b(a.status,x,p||Ws)}function _s(a,c,p){var g=Ja(a);Lo(c,a.status,ac(a,!0),g),ku(g)}function Lo(a,c,p,g){try{a(c,p,g)}catch(b){pa(Ye,2,518,pr(b))}}function tu(a,c,p){var g=a,b=200,x=g[Td],R=a[Lm]+(Xt?Mo:Ws);try{var P=sa();if(x){var M=!!me.getPlugin("LocalStorage"),j=[],G=[];hr(x[Qn],function(H){if(j&&H&&H[bt]()>0)for(var K=H[Jt](),te=0;te<K[ne];te++)if(P.sendBeacon(R,Te.getEventBlob(K[te])))G[ot](H[te]);else{j[ot](H[lt](te));break}else j[ot](H[lt](0))}),G[ne]>0&&(x.sentEvts=G),M||Si(j,8003,x[hs],!0)}else b=0}catch(H){Hs(Ye,"Failed to send telemetry using sendBeacon API. Ex:"+pr(H)),b=0}finally{Lo(c,b,{},Ws)}}function ta(a){return a===2||a===3}function Jr(a){return Zt&&ta(a)&&(a=2),a}ut[nm]=function(a,c){Ke[a]=c},ut.removeHeader=function(a){delete Ke[a]},ut[Fm]=function(){return ra()&&oe[N]()},ut[cv]=function(a,c){kt(a)&&(a=0),Zt&&(a=Jr(a),c=2),ru(Ce,a,0)&&ji(La(),0,!1,a,c||0)},ut[Um]=function(){return!W&&De===0&&Ce[ne]===0},ut[jm]=function(a){Zt=a},ut.addBatch=function(a){if(a&&a[bt]()>0){if(q.isTenantKilled(a[tt]()))return!1;Ce[ot](a)}return!0},ut.teardown=function(){Ce[ne]>0&&ji(La(),0,!0,2,2),hr(ea,function(a){a&&a.rm&&a.rm()}),ea=[]},ut.pause=function(){W=!0},ut[Ym]=function(){W=!1,ut[cv](0,4)},ut[$m]=function(a,c,p){a&&a[bt]()>0&&(rt(c)&&(c=1),Zt&&(c=Jr(c),p=2),ji([a],0,!1,c,p||0))};function ra(){return!W&&De<E}function La(){var a=Ce;return Ce=[],a}function ru(a,c,p){var g=!1;return a&&a[ne]>0&&!W&&Ne[c]&&Te&&(g=c!==0||ra()&&(p>0||oe[N]())),g}function gc(a){var c={};return a&&hr(a,function(p,g){c[g]={iKey:p[tt](),evts:p[Jt]()}}),c}function ji(a,c,p,g,b){if(!(!a||a[ne]===0)){if(W){Si(a,1,g);return}g=Jr(g);try{var x=a,R=g!==0;ma(me,function(){return"HttpManager:_sendBatches"},function(P){P&&(a=a.slice(0));for(var M=[],j=null,G=Oo(),H=Ne[g]||(R?Ne[1]:Ne[0]),K=H&&H[pl],te=tn&&(Zt||ta(g)||K===3||H._isSync&&K===2);ru(a,g,c);){var Z=a.shift();Z&&Z[bt]()>0&&(q.isTenantKilled(Z[tt]())?M[ot](Z):(j=j||Te[ms](c,p,R,te,b,g),Te.appendPayload(j,Z,_)?j.overflow!==null&&(a=[j.overflow][ge](a),j.overflow=null,cm(j,G,Oo(),b),G=Oo(),j=null):(cm(j,G,Oo(),b),G=Oo(),a=[Z][ge](a),j=null)))}j&&cm(j,G,Oo(),b),a[ne]>0&&(Ce=a[ge](Ce)),Si(M,8004,g)},function(){return{batches:gc(x),retryCount:c,isTeardown:p,isSynchronous:R,sendReason:b,useSendBeacon:ta(g),sendType:g}},!R)}catch(P){pa(Ye,2,48,"Unexpected Exception sending batch: "+pr(P))}}}function Nf(a,c){var p={url:$,hdrs:{},useHdrs:!1};c?(p[gr]=gd(p[gr],Ke),p.useHdrs=bn(p.hdrs)[ne]>0):wr(Ke,function(P,M){Ru[P]?Pd(p,Ru[P],M,!1):(p[gr][P]=M,p[br]=!0)}),Pd(p,ps,"NO_AUTH",c),Pd(p,iv,vp,c);var g=Ws;hr(a.apiKeys,function(P){g[ne]>0&&(g+=","),g+=P}),Pd(p,sv,g,c),Pd(p,wd,Ei().toString(),c);var b=Sv(a);if(Ro(b)&&(p.url+="&ext.intweb.msfpc="+b),oe[V]()&&Pd(p,ov,oe[J](),c),me[yf]){var x=me[yf]();x>=0&&(p.url+="&w="+x)}for(var R=0;R<Ee[ne];R++)p.url+="&"+Ee[R].name+"="+Ee[R].value;return p}function nu(a,c,p){a[c]=a[c]||{},a[c][qe.identifier]=p}function cm(a,c,p,g){if(a&&a.payloadBlob&&a.payloadBlob[ne]>0){var b=!!Xe,x=Ne[a.sendType];!ta(a[hs])&&a[Zs]&&a.sendReason===2&&(x=Ne[2]||Ne[3]||x);var R=or;(a.isBeacon||x[pl]===3)&&(R=!1);var P=Nf(a,R);R=R||P[br];var M=Oo();ma(me,function(){return"HttpManager:_doPayloadSend"},function(){for(var j=0;j<a.batches[ne];j++)for(var G=a[Qn][j],H=G[Jt](),K=0;K<H[ne];K++){var te=H[K];if(Be){var Z=te[vl]=te[vl]||{};nu(Z,"sendEventStart",M),nu(Z,"serializationStart",c),nu(Z,"serializationCompleted",p)}te[mc]>0?te[mc]++:te[mc]=1}Si(a[Qn],1e3+(g||0),a[hs],!0);var _e={data:a[rm],urlString:P.url,headers:P[gr],_thePayload:a,_sendReason:g,timeout:Dr,disableXhrSync:jr,disableFetchKeepAlive:ln};R&&(wp(_e[Au],ds)||(_e[Au][ds]=pc),wp(_e[Au],io)||(_e[Au][io]=ll));var ye=null;x&&(ye=function(Fe){oe[U]();var ze=function(rr,sr){Df(rr,sr,a,g)},et=a[qm]||a[am];try{x.sendPOST(Fe,ze,et),ft&&ft(_e,Fe,et,a[Zs])}catch(rr){Hs(Ye,"Unexpected exception sending payload. Ex:"+pr(rr)),Lo(ze,0,{})}}),ma(me,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(ye)if(a[hs]===0&&De++,b&&!a.isBeacon&&x[pl]!==3){var Fe={data:_e[lv],urlString:_e[Lm],headers:gd({},_e[Au]),timeout:_e[fv],disableXhrSync:_e[Ed],disableFetchKeepAlive:_e[gf]},ze=!1;ma(me,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{Xe(Fe,function(et){ze=!0,!Ue&&!et[Td]&&(et[Td]=et[Td]||_e[Td],et[Id]=et[Id]||_e[Id]),ye(et)},a.isSync||a[qm])}catch{ze||ye(_e)}})}else ye(_e)})},function(){return{thePayload:a,serializationStart:c,serializationCompleted:p,sendReason:g}},a[am])}a.sizeExceed&&a.sizeExceed[ne]>0&&Si(a.sizeExceed,8003,a[hs]),a.failedEvts&&a.failedEvts[ne]>0&&Si(a.failedEvts,8002,a[hs])}function yc(a,c){Be&&hr(a,function(p){var g=p[vl]=p[vl]||{};nu(g,"sendEventCompleted",c)})}function Df(a,c,p,g){var b=9e3,x=null,R=!1,P=!1;try{var M=!0;if(typeof a!==h){if(c){oe[ae](c[_p]);var j=c[Sd]||c["kill-duration-seconds"];hr(q[lh](c[ko],j),function(H){hr(p[Qn],function(K){if(K[tt]()===H){x=x||[];var te=K[lt](0);p.numEvents-=te[bt](),x[ot](te)}})})}if(a==200||a==204){b=200;return}(!Dd(a)||p.numEvents<=0)&&(M=!1),b=9e3+a%1e3}if(M){b=100;var G=p.retryCnt;p[hs]===0&&(G<D?(R=!0,Cf(function(){p[hs]===0&&De--,ji(p[Qn],G+1,p[qm],Zt?2:p[hs],5)},Zt,mh(G))):(P=!0,Zt&&(b=8001)))}}finally{R||(oe[ae](),_a(p,b,g,P)),Si(x,8004,p[hs])}}function _a(a,c,p,g){try{g&&qe[Bm]();var b=a[Qn];c===200&&(b=a.sentEvts||a[Qn],!g&&!a[am]&&qe._clearBackOff(),Ip(b)),Si(b,c,a[hs],!0)}finally{a[hs]===0&&(De--,p!==5&&ut.sendQueuedRequests(a[hs],p))}}function Ip(a){if(Be){var c=Oo();hr(a,function(p){p&&p[bt]()>0&&yc(p[Jt](),c)})}}function Cf(a,c,p){c?a():Et.set(a,p)}function Sv(a){for(var c=0;c<a.batches[ne];c++){var p=a[Qn][c].Msfpc();if(p)return encodeURIComponent(p)}return Ws}function ku(a){var c=yr;try{for(var p=0;p<c[ne];p++)try{c[p](a)}catch(b){pa(Ye,1,519,"Response handler failed: "+b)}if(a){var g=JSON.parse(a);Ro(g.webResult)&&Ro(g.webResult[f])&&zt.set("MSFPC",g.webResult[f],365*86400)}}catch{}}function Si(a,c,p,g){if(a&&a[ne]>0&&O){var b=O[xf(c)];if(b){var x=p!==0;ma(me,function(){return"HttpManager:_sendBatchesNotification"},function(){Cf(function(){try{b.call(O,a,c,x,p)}catch(R){pa(Ye,1,74,"send request notification failed: "+R)}},g||x,0)},function(){return{batches:gc(a),reason:c,isSync:x,sendSync:g,sendType:p}},!x)}}}function xf(a){var c=_l[a];return Ro(c)||(c=yd,a>=9e3&&a<=9999?c=Fn:a>=8e3&&a<=8999?c=av:a>=1e3&&a<=1999&&(c=xu)),c}})}return d.__ieDyn=1,d}(),Hm=.25,_v=500,Tf=20,gv=6,yv=2,hh=4,_h=2,Xh=1,gi=1e4,eu="eventsDiscarded",bp="",Vn=void 0,Ep=qa({eventsLimitInMem:{isVal:Gr,v:gi},immediateEventLimit:{isVal:Gr,v:500},autoFlushEventsLimit:{isVal:Gr,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:Tp,v:Vn},overrideInstrumentationKey:Vn,overrideEndpointUrl:Vn,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:Vn,clearTimeoutOverride:Vn,payloadPreprocessor:Vn,payloadListener:Vn,disableEventTimings:Vn,valueSanitizer:Vn,stringifyObjects:Vn,enableCompoundKey:Vn,disableOptimizeObj:!1,fetchCredentials:Vn,transports:Vn,unloadTransports:Vn,useSendBeacon:Vn,disableFetchKeepAlive:Vn,avoidOptions:!1,xhrTimeout:Vn,disableXhrSync:Vn,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:tr,v:gv},maxUnloadEventRetryAttempts:{isVal:tr,v:yv},addNoResponse:Vn,excludeCsMetaData:Vn});function Tp(d){return d&&d.sendPOST}var Qh=function(d){xa(_,d);function _(){var E=d.call(this)||this;E.identifier="PostChannel",E.priority=1011,E.version="4.3.4";var D,O=!1,$=[],q,W=!1,oe=0,se,De=0,qe,Ye={},Ne=t,me,Ue,Ee,Ke,Ce,Te,Be,zt,Zt,or,Dr,jr,ln,tn,Xt,ea,Xe,ft,yr,lr,Et,Rr;return Wi(_,E,function(It,Ma){Jr(),It._getDbgPlgTargets=function(){return[Ce,D]},It[At]=function(P,M,j){ma(M,function(){return"PostChannel:initialize"},function(){Ma[At](P,M,j),yr=M.getNotifyMgr();try{Xt=hd(Hn(It[gp]),M.evtNamespace&&M.evtNamespace()),It._addHook(Bs(P,function(G){var H=G.cfg,K=ef(null,H,M);D=K.getExtCfg(It[gp],Ep),ea=Sp(D[En],D[vc]),Dr=!D[ml]&&nv(),Xe=D[P_],Tn(M),qe=D[fh],se=D.immediateEventLimit,Be=D[Vh],ln=D.maxEventRetryAttempts,tn=D.maxUnloadEventRetryAttempts,ft=D[zm],qt(H.endpointUrl)?It.pause():W&&It[Ym](),R(),Et=D[A_],Rr=!!D[Sf],lr&&ut();var te=H.disablePageUnloadEvents||[];lr=Xv(_c,te,Xt),lr=ha(_c,te,Xt)||lr,lr=cf(Ui,H.disablePageShowEvents,Xt)||lr})),Ce[At](P,It.core,It)}catch(G){throw It.setInitialized(!1),G}},function(){return{theConfig:P,core:M,extensions:j}})},It.processTelemetry=function(P,M){vf(P,It[gp]),M=M||It._getTelCtx(M);var j=P;!Rr&&!O&&(Et&&(j[tt]=Et),_s(j,!0),jr?ru(2,2):ta()),It.processNext(j,M)},It.getOfflineSupport=function(){try{var P=Ce&&Ce[_i]();if(Ce)return{getUrl:function(){return P?P.url:null},serialize:yi,batch:In,shouldProcess:function(M){return!Rr},createPayload:function(M){return null},createOneDSPayload:function(M){if(Ce[dl])return Ce[dl](M,Dr)}}}catch{}return null},It._doTeardown=function(P,M){ru(2,2),O=!0,Ce.teardown(),ut(),Jr()};function ut(){Qv(null,Xt),ul(null,Xt),Om(null,Xt)}function Tn(P){var M=P[yf];P[yf]=function(){var j=0;return Xe&&(j=j|2),j|M.call(P)}}function In(P){var M=bp;return P&&P[ne]&&hr(P,function(j){M&&(M+=`
`),M+=j}),M}function yi(P){var M=bp;try{If(P),M=Ce[Xn](P)}catch{}return M}function _c(P){var M=P||ii().event;M.type!=="beforeunload"&&(jr=!0,Ce[jm](jr)),ru(2,2)}function Ui(P){jr=!1,Ce[jm](jr)}function If(P){P.ext&&P.ext[m]&&delete P.ext[m],P.ext&&P.ext[y]&&P.ext[y].id&&delete P.ext[y].id,Dr&&(P.ext=xo(P.ext),P[dv]&&(P[dv]=xo(P[dv])),P[lv]&&(P[lv]=xo(P[lv])))}function _s(P,M){if(P[im]||(P[im]=0),P[wf]||(P[wf]=1),If(P),P[pv]){if(Ee||W)P[wf]=3,P[pv]=!1;else if(Ce){Dr&&(P=xo(P)),Ce[$m](Nd.create(P[tt],[P]),P[pv]===!0?1:P[pv],3);return}}var j=P[wf],G=De,H=qe;j===4&&(G=oe,H=se);var K=!1;if(G<H)K=!nu(P,M);else{var te=1,Z=Tf;j===4&&(te=4,Z=1),K=!0,cm(P[tt],P[wf],te,Z)&&(K=!nu(P,M))}K&&xf(eu,[P],yo.QueueFull)}It.setEventQueueLimits=function(P,M){D[fh]=qe=Gr(P)?P:gi,D[Vh]=Be=Gr(M)?M:0,R();var j=De>P;if(!j&&zt>0)for(var G=1;!j&&G<=3;G++){var H=Te[G];H&&H[Qn]&&hr(H[Qn],function(K){K&&K[bt]()>=zt&&(j=!0)})}Nf(!0,j)},It.pause=function(){La(),W=!0,Ce&&Ce.pause()},It[Ym]=function(){W=!1,Ce&&Ce[Ym](),ta()},It._loadTransmitProfiles=function(P){Cf(),wr(P,function(M,j){var G=j[ne];if(G>=2){var H=G>2?j[2]:0;if(j[ir](0,G-2),j[1]<0&&(j[0]=-1),j[1]>0&&j[0]>0){var K=j[0]/j[1];j[0]=Math.ceil(K)*j[1]}H>=0&&j[1]>=0&&H>j[1]&&(H=j[1]),j[ot](H),Ye[M]=j}})},It.flush=function(P,M,j){P===void 0&&(P=!0);var G;if(!W)if(j=j||1,P)M||(G=Oi(function(K){M=K})),q==null?(La(),Df(1,0,j),q=ra(function(){q=null,_a(M,j)},0)):$[ot](M);else{var H=La();Lo(1,1,j),M&&M(),H&&ta()}return G},It.setMsaAuthTicket=function(P){Ce[nm](vs,P)},It.setAuthPluginHeader=function(P){Ce[nm](Mm,P)},It.removeAuthPluginHeader=function(){Ce.removeHeader(Mm)},It.hasEvents=tu,It._setTransmitProfile=function(P){Ne!==P&&Ye[P]!==void 0&&(La(),Ne=P,ta())},Ul(It,function(){return Ce},["addResponseHandler"]);function Lo(P,M,j){var G=Df(P,M,j);return Ce[cv](M,j),G}function tu(){return De>0}function ta(){if(Zt>=0&&Df(Zt,0,or)&&Ce[cv](0,or),oe>0&&!Ue&&!W){var P=Ye[Ne][2];P>=0&&(Ue=ra(function(){Ue=null,Lo(4,0,1),ta()},P))}var M=Ye[Ne][1];!me&&!q&&M>=0&&!W&&(tu()?me=ra(function(){me=null,Lo(Ke===0?3:1,0,1),Ke++,Ke%=2,ta()},M):Ke=0)}It[Bm]=function(){Ee<hh&&(Ee++,La(),ta())},It._clearBackOff=function(){Ee&&(Ee=0,La(),ta())};function Jr(){D=null,O=!1,$=[],q=null,W=!1,oe=0,se=500,De=0,qe=gi,Ye={},Ne=t,me=null,Ue=null,Ee=0,Ke=0,Te={},Be=0,lr=!1,zt=0,Zt=-1,or=null,Dr=!0,jr=!1,ln=gv,tn=yv,Xt=null,Et=null,Rr=!1,ea=Sp(),Ce=new hc(_v,_h,Xh,{requeue:ku,send:c,sent:p,drop:g,rspFail:b,oth:x}),Sv(),gc(),R()}function ra(P,M){M===0&&Ee&&(M=1);var j=1e3;return Ee&&(j=mh(Ee-1)),ea.set(P,M*j)}function La(){return me!==null?(me.cancel(),me=null,Ke=0,!0):!1}function ru(P,M){La(),q&&(q.cancel(),q=null),W||Lo(1,P,M)}function gc(){Te[4]={batches:[],iKeyMap:{}},Te[3]={batches:[],iKeyMap:{}},Te[2]={batches:[],iKeyMap:{}},Te[1]={batches:[],iKeyMap:{}}}function ji(P,M,j){var G=Te[M];G||(M=1,G=Te[M]);var H=G.iKeyMap[P];return!H&&j&&(H=Nd.create(P),G.batches[ot](H),G.iKeyMap[P]=H),H}function Nf(P,M){Ce[Fm]()&&!Ee&&(Be>0&&De>Be&&(M=!0),M&&q==null&&It.flush(P,function(){},20))}function nu(P,M){Dr&&(P=xo(P));var j=P[wf],G=ji(P[tt],j,!0);return G.addEvent(P)?(j!==4?(De++,M&&P[im]===0&&Nf(!P.sync,zt>0&&G[bt]()>=zt)):oe++,!0):!1}function cm(P,M,j,G){for(;j<=M;){var H=ji(P,M,!0);if(H&&H[bt]()>0){var K=H[lt](0,G),te=K[bt]();if(te>0)return j===4?oe-=te:De-=te,a(eu,[K],yo.QueueFull),!0}j++}return yc(),!1}function yc(){for(var P=0,M=0,j=function(H){var K=Te[H];K&&K[Qn]&&hr(K[Qn],function(te){H===4?P+=te[bt]():M+=te[bt]()})},G=1;G<=4;G++)j(G);De=M,oe=P}function Df(P,M,j){var G=!1,H=M===0;return!H||Ce[Fm]()?ma(It.core,function(){return"PostChannel._queueBatches"},function(){for(var K=[],te=4;te>=P;){var Z=Te[te];Z&&Z.batches&&Z.batches[ne]>0&&(hr(Z[Qn],function(_e){Ce.addBatch(_e)?G=G||_e&&_e[bt]()>0:K=K[ge](_e[Jt]()),te===4?oe-=_e[bt]():De-=_e[bt]()}),Z[Qn]=[],Z.iKeyMap={}),te--}K[ne]>0&&xf(eu,K,yo.KillSwitch),G&&Zt>=P&&(Zt=-1,or=0)},function(){return{latency:P,sendType:M,sendReason:j}},!H):(Zt=Zt>=0?Math.min(Zt,P):P,or=Math.max(or,j)),G}function _a(P,M){Lo(1,0,M),yc(),Ip(function(){P&&P(),$[ne]>0?q=ra(function(){q=null,_a($.shift(),M)},0):(q=null,ta())})}function Ip(P){Ce[Um]()?P():q=ra(function(){q=null,Ip(P)},Hm)}function Cf(){La(),Sv(),Ne=t,ta()}function Sv(){Ye={},Ye[t]=[2,1,0],Ye[r]=[6,3,0],Ye[n]=[18,9,0]}function ku(P,M){var j=[],G=ln;jr&&(G=tn),hr(P,function(H){H&&H[bt]()>0&&hr(H[Jt](),function(K){K&&(K[pv]&&(K[wf]=4,K[pv]=!1),K[im]<G?(vf(K,It[gp]),_s(K,!1)):j[ot](K))})}),j[ne]>0&&xf(eu,j,yo.NonRetryableStatus),jr&&ru(2,2)}function Si(P,M){var j=yr||{},G=j[P];if(G)try{G.apply(j,M)}catch(H){pa(It.diagLog(),1,74,P+" notification failed: "+H)}}function xf(P,M){for(var j=[],G=2;G<arguments.length;G++)j[G-2]=arguments[G];M&&M[ne]>0&&Si(P,[M][ge](j))}function a(P,M){for(var j=[],G=2;G<arguments.length;G++)j[G-2]=arguments[G];M&&M[ne]>0&&hr(M,function(H){H&&H[bt]()>0&&Si(P,[H.events()][ge](j))})}function c(P,M,j){P&&P[ne]>0&&Si("eventsSendRequest",[M>=1e3&&M<=1999?M-1e3:0,j!==!0])}function p(P,M){a("eventsSent",P,M),ta()}function g(P,M){a(eu,P,M>=8e3&&M<=8999?M-8e3:yo.Unknown)}function b(P){a(eu,P,yo.NonRetryableStatus),ta()}function x(P,M){a(eu,P,yo.Unknown),ta()}function R(){ft?zt=0:zt=Math.max(_v*(_h+1),qe/6)}}),E}return _.__ieDyn=1,_}(rf);e.BE_PROFILE=n,e.NRT_PROFILE=r,e.PostChannel=Qh,e.RT_PROFILE=t})});var LS=kd(Iv=>{"use strict";var TN=Iv&&Iv.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),IN=Iv&&Iv.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),MS=Iv&&Iv.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&TN(t,e,r);return IN(t,e),t};Object.defineProperty(Iv,"__esModule",{value:!0});Iv.oneDataSystemClientFactory=void 0;var NN=async(e,t,r)=>{let n=await Promise.resolve().then(()=>MS(RS())),s=await Promise.resolve().then(()=>MS(kS())),u=new n.AppInsightsCore,h=new s.PostChannel,w={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[h]]};if(r){w.extensionConfig={};let F={alwaysUseXhrOverride:!0,httpXHROverride:r};w.extensionConfig[h.identifier]=F}let C=t.workspace.getConfiguration("telemetry").get("internalTesting");return u.initialize(w,[]),u.addTelemetryInitializer(F=>{F.ext=F.ext??{},F.ext.web=F.ext.web??{},F.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',C&&(F.ext.utc=F.ext.utc??{},F.ext.utc.flags=8462029)}),u},DN=async(e,t,r)=>{let n=await NN(e,t,r);return{logEvent:(h,w)=>{try{n==null||n.track({name:h,baseData:{name:h,properties:w==null?void 0:w.properties,measurements:w==null?void 0:w.measurements}})}catch(T){throw new Error(`Failed to log event to app insights!
`+T.message)}},flush:async()=>{try{return new Promise((w,T)=>{if(!n){w();return}n.flush(!0,C=>{if(!C){T("Failed to flush app 1DS!");return}})})}catch(h){throw new Error(`Failed to flush 1DS!
`+h.message)}},dispose:async()=>new Promise(w=>{if(!n){w();return}n.unload(!1,()=>{w(),n=void 0},1e3)})}};Iv.oneDataSystemClientFactory=DN});var US=kd((Og,FS)=>{(function(e,t){typeof Og=="object"&&typeof FS<"u"?t(Og):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{})))})(Og,function(e){"use strict";function t(f,m){return f||m}function r(f,m){return f[m]}var n=void 0,s=null,u="",h="function",w="object",T="prototype",C="__proto__",F="undefined",z="constructor",ee="Symbol",pe="_polyfill",ce="length",re="name",Q="call",ve="toString",Pe=t(Object),We=r(Pe,T),Ae=t(String),Ze=r(Ae,T),Tt=t(Math),Dt=t(Array),Lt=r(Dt,T),it=r(Lt,"slice");function Gt(f,m){try{return{v:f.apply(this,m)}}catch(y){return{e:y}}}function xr(f){return function(m){return typeof m===f}}function oa(f){var m="[object "+f+"]";return function(y){return!!(y&&ei(y)===m)}}function ei(f){return We[ve].call(f)}function Pr(f){return typeof f===F||f===F}function xn(f){return!po(f)}function nt(f){return f===s||Pr(f)}function po(f){return!!f||f!==n}var Ve=xr("string"),Tr=xr(h);function zn(f){return!f&&nt(f)?!1:!!f&&typeof f===w}var kt=r(Dt,"isArray"),Ft=oa("Error"),rt=r(Pe,"getOwnPropertyDescriptor");function yn(f,m){return!!f&&We.hasOwnProperty[Q](f,m)}var at=t(r(Pe,"hasOwn"),Nc);function Nc(f,m){return yn(f,m)||!!rt(f,m)}function Wt(f,m,y){if(f&&zn(f)){for(var N in f)if(at(f,N)&&m[Q](y||f,N,f[N])===-1)break}}var $i={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Ht(f){var m={};if(m[$i.c]=!0,m[$i.e]=!0,f.l){m.get=function(){return f.l.v};var y=rt(f.l,"v");y&&y.set&&(m.set=function(N){f.l.v=N})}return Wt(f,function(N,U){m[$i[N]]=xn(U)?m[$i[N]]:U}),m}var tr=r(Pe,"defineProperty");function Yr(f,m,y){return tr(f,m,Ht(y))}function qt(f,m,y,N,U){var V={};return Wt(f,function(J,ae){an(V,J,m?ae:J,U),an(V,ae,y?ae:J,U)}),N?N(V):V}function an(f,m,y,N){tr(f,m,{value:y,enumerable:!0,writable:!!N})}var je=t(Ae),Kn="[object Error]";function Ct(f,m){var y=u,N=We[ve][Q](f);N===Kn&&(f={stack:je(f.stack),message:je(f.message),name:je(f.name)});try{y=JSON.stringify(f,s,m?typeof m=="number"?m:4:n),y=(y?y.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):s)||je(f)}catch(U){y=" - "+Ct(U,m)}return N+": "+y}function wr(f){throw new Error(f)}function ti(f){throw new TypeError(f)}var qi=r(Pe,"freeze");function Hr(f){return f}function Sn(f){return f[C]||s}var Bi=r(Pe,"assign"),ga=r(Pe,"keys"),Ar=t(qi,Hr),ar=t(r(Pe,"getPrototypeOf"),Sn);function pr(f){return qt(f,1,0,Ar)}function $r(f){var m={};return Wt(f,function(y,N){an(m,y,N[1]),an(m,N[0],N[1])}),Ar(m)}function Yf(f){return $r(f)}var wn="__tsUtils$gblCfg",bl;function Dc(){var f;return typeof globalThis!==F&&(f=globalThis),!f&&typeof self!==F&&(f=self),!f&&typeof window!==F&&(f=window),!f&&typeof global!==F&&(f=global),f}function bn(){if(!bl){var f=Gt(Dc).v||{};bl=f[wn]=f[wn]||{}}return bl}var qa=ur;function ur(f,m,y){var N=m?m[f]:s;return function(U){var V=(U?U[f]:s)||N;if(V||y){var J=arguments;return(V||y).apply(U,V?it[Q](J,1):J)}ti('"'+je(f)+'" not defined for '+Ct(U))}}var Pn=r(Tt,"max"),Gn=qa("slice",Ze),vo=qa("substring",Ze),Ts=ur("substr",Ze,Cc);function Cc(f,m,y){return nt(f)&&ti("Invalid "+Ct(f)),y<0?u:(m=m||0,m<0&&(m=Pn(m+f[ce],0)),Pr(y)?Gn(f,m):Gn(f,m,m+y))}function El(f,m){return vo(f,0,m)}var mo="_urid",$o;function On(){if(!$o){var f=bn();$o=f.gblSym=f.gblSym||{k:{},s:{}}}return $o}function ho(f){var m={description:je(f),toString:function(){return ee+"("+f+")"}};return m[pe]=!0,m}function Is(f){var m=On();if(!at(m.k,f)){var y=ho(f),N=ga(m.s).length;y[mo]=function(){return N+"_"+y[ve]()},m.k[f]=y,m.s[y[mo]()]=je(f)}return m.k[f]}var ya;function Uu(){ya=bn()}function Ns(f){return tr({toJSON:function(){return f}},"v",{value:f})}var Nr="window",Lr;function ri(f,m){var y;return function(){return!ya&&Uu(),(!y||ya.lzy)&&(y=Ns(Gt(f,m).v)),y.v}}function zi(f){return!ya&&Uu(),(!Lr||f===!1||ya.lzy)&&(Lr=Ns(Gt(Dc).v||s)),Lr.v}function pn(f,m){var y;if(!Lr||m===!1?y=zi(m):y=Lr.v,y&&y[f])return y[f];if(f===Nr)try{return window}catch{}return s}var ni=ri(pn,["document"]);function ai(){return!!Ds()}var Ds=ri(pn,[Nr]);function Ud(){return!!on()}var on=ri(pn,["navigator"]),_o,qo;function kn(){return _o=Ns(Gt(pn,[ee]).v),_o}function Bo(f){var m=(ya.lzy?0:_o)||kn();return m.v?m.v[f]:n}function su(f,m){!ya&&Uu();var y=(ya.lzy?0:_o)||kn();return y.v?y.v(f):m?s:ho(f)}function Ba(f){return!ya&&Uu(),qo=(ya.lzy?0:qo)||Ns(Gt(Bo,["for"]).v),(qo.v||Is)(f)}function sn(f,m,y){return f.apply(m,y)}function Mn(f,m,y){if(f)for(var N=f[ce]>>>0,U=0;U<N&&!(U in f&&m[Q](y||f,f[U],U,f)===-1);U++);}var ju=qa("indexOf",Lt),ii=qa("map",Lt),Ir=qa("reduce",Lt),sa=t(r(Pe,"create"),$f);function $f(f){if(!f)return{};var m=typeof f;m!==w&&m!==h&&ti("Prototype must be an Object or function: "+Ct(f));function y(){}return y[T]=f,new y}var Sa;function zo(f,m){var y=Pe.setPrototypeOf||function(N,U){var V;!Sa&&(Sa=Ns((V={},V[C]=[],V instanceof Array))),Sa.v?N[C]=U:Wt(U,function(J,ae){return N[J]=ae})};return y(f,m)}function xc(f,m,y){Gt(Yr,[m,re,{v:f,c:!0,e:!1}]),m=zo(m,y);function N(){this[z]=m,Gt(Yr,[this,re,{v:f,c:!0,e:!1}])}return m[T]=y===s?sa(y):(N[T]=y[T],new N),m}function Go(f,m){m&&(f[re]=m)}function qf(f,m,y){var N=y||Error,U=N[T][re],V=Error.captureStackTrace;return xc(f,function(){var J=this,ae=arguments;try{Gt(Go,[N,f]);var ne=sn(N,J,it[Q](ae))||J;if(ne!==J){var ge=ar(J);ge!==ar(ne)&&zo(ne,ge)}return V&&V(ne,J[z]),m&&m(ne,ae),ne}finally{Gt(Go,[N,U])}},N)}function Qr(){return(Date.now||Tl)()}function Tl(){return new Date().getTime()}function za(f){return function(y){return nt(y)&&ti("strTrim called ["+Ct(y)+"]"),y&&y.replace&&(y=y.replace(f,u)),y}}var jd=za(/^\s+|(?=\s)\s+$/g),oi=ur("trim",Ze,jd),jp,si,Il;function Gi(f){if(!f||typeof f!==w)return!1;Il||(Il=ai()?Ds():!0);var m=!1;if(f!==Il){si||(jp=Function[T][ve],si=jp[Q](Pe));try{var y=ar(f);m=!y,m||(yn(y,z)&&(y=y[z]),m=!!(y&&typeof y===h&&jp[Q](y)===si))}catch{}}return m}var Bf;function hr(){return!ya&&Uu(),(!Bf||ya.lzy)&&(Bf=Ns(Gt(pn,["performance"]).v)),Bf.v}var Ho=ur("endsWith",Ze,zf);function zf(f,m,y){Ve(f)||ti("'"+Ct(f)+"' is not a string");var N=Ve(m)?m:je(m),U=!Pr(y)&&y<f[ce]?y:f[ce];return vo(f,U-N[ce],U)===N}var Ga=qa("indexOf",Ze),Pc="ref",Pt="unref",ui="hasRef",Yu="enabled";function Nl(f,m,y){var N=!0,U=f?m(s):s,V;function J(){return N=!1,U&&U[Pt]&&U[Pt](),V}function ae(){U&&y(U),U=s}function ne(){return U=m(U),N||J(),V}function ge(tt){!tt&&U&&ae(),tt&&!U&&ne()}return V={cancel:ae,refresh:ne},V[ui]=function(){return U&&U[ui]?U[ui]():N},V[Pc]=function(){return N=!0,U&&U[Pc]&&U[Pc](),V},V[Pt]=J,V=tr(V,Yu,{get:function(){return!!U},set:ge}),{h:V,dn:function(){U=s}}}function kv(f,m,y){var N=kt(m),U=N?m.length:0,V=(U>0?m[0]:N?n:m)||setTimeout,J=(U>1?m[1]:n)||clearTimeout,ae=y[0];y[0]=function(){ne.dn(),sn(ae,n,it[Q](arguments))};var ne=Nl(f,function(ge){if(ge){if(ge.refresh)return ge.refresh(),ge;sn(J,n,[ge])}return sn(V,n,y)},function(ge){sn(J,n,[ge])});return ne.h}function Ei(f,m){return kv(!0,n,it[Q](arguments))}var Dl=pr,Yd=Yf,uu="toLowerCase",Ti="blkVal",dt="length",ua="rdOnly",cu="notify",Cs="warnToConsole",$d="throwInternal",qd="setDf",Wn="watch",ci="logger",Bd="apply",Ii="push",Ha="splice",Nm="hdlr",Mv="cancel",Yp="name",lu="unload",$p="version",ch="loggingLevelConsole",zd="messageId",xa="message",Cl="diagLog",xl="userAgent",Hi="split",li="nodeType",fu="replace",qp="logInternalMessage",Ni="type",Gd="handler",$u="traceId",Ac="spanId",Pl="traceFlags",Gf="getAttribute",Hd;function Bp(f,m){Hd||(Hd=qf("AggregationError",function(N,U){U[dt]>1&&(N.errors=U[1])}));var y=f||"One or more errors occurred.";throw Mn(m,function(N,U){y+=`
`.concat(U," > ").concat(Ct(N))}),new Hd(y,m||[])}var zp="function",du="object",Vd="undefined",xs="prototype",qu=Object,Di=qu[xs];(zi()||{}).Symbol,(zi()||{}).Reflect;var Al="hasOwnProperty",Hf=function(f){for(var m,y=1,N=arguments.length;y<N;y++){m=arguments[y];for(var U in m)Di[Al].call(m,U)&&(f[U]=m[U])}return f},Rc=Bi||Hf,Vi=function(f,m){return Vi=qu.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,N){y.__proto__=N}||function(y,N){for(var U in N)N[Al](U)&&(y[U]=N[U])},Vi(f,m)};function Lv(f,m){typeof m!==zp&&m!==null&&ti("Class extends value "+String(m)+" is not a constructor or null"),Vi(f,m);function y(){this.constructor=f}f[xs]=m===null?sa(m):(y[xs]=m[xs],new y)}var Vo,go="constructor",Ki="prototype",pu="function",Vf="_dynInstFuncs",Oc="_isDynProxy",kc="_dynClass",Bu="_dynCls$",Kf="_dynInstChk",Rl=Kf,Wf="_dfOpts",zu="_unknown_",Wi="__proto__",Mc="_dyn"+Wi,yo="__dynProto$Gbl",fi="_dynInstProto",Ko="useBaseInst",Vr="setInstFuncs",Ps=Object,Ji=Ps.getPrototypeOf,Lc=Ps.getOwnPropertyNames,Fc=zi(),Wo=Fc[yo]||(Fc[yo]={o:(Vo={},Vo[Vr]=!0,Vo[Ko]=!0,Vo),n:1e3});function Ol(f){return f&&(f===Ps[Ki]||f===Array[Ki])}function Jo(f){return Ol(f)||f===Function[Ki]}function vu(f){var m;if(f){if(Ji)return Ji(f);var y=f[Wi]||f[Ki]||(f[go]?f[go][Ki]:null);m=f[Mc]||y,yn(f,Mc)||(delete f[fi],m=f[Mc]=f[fi]||f[Mc],f[fi]=y)}return m}function Va(f,m){var y=[];if(Lc)y=Lc(f);else for(var N in f)typeof N=="string"&&yn(f,N)&&y.push(N);if(y&&y.length>0)for(var U=0;U<y.length;U++)m(y[U])}function Kd(f,m,y){return m!==go&&typeof f[m]===pu&&(y||yn(f,m))&&m!==Wi&&m!==Ki}function Gu(f){ti("DynamicProto: "+f)}function Pa(f){var m=sa(null);return Va(f,function(y){!m[y]&&Kd(f,y,!1)&&(m[y]=f[y])}),m}function Jf(f,m){for(var y=f.length-1;y>=0;y--)if(f[y]===m)return!0;return!1}function Wd(f,m,y,N){function U(ne,ge,tt){var bt=ge[tt];if(bt[Oc]&&N){var Jt=ne[Vf]||{};Jt[Rl]!==!1&&(bt=(Jt[ge[kc]]||{})[tt]||bt)}return function(){return bt.apply(ne,arguments)}}var V=sa(null);Va(y,function(ne){V[ne]=U(m,y,ne)});for(var J=vu(f),ae=[];J&&!Jo(J)&&!Jf(ae,J);)Va(J,function(ne){!V[ne]&&Kd(J,ne,!Ji)&&(V[ne]=U(m,J,ne))}),ae.push(J),J=vu(J);return V}function kl(f,m,y,N){var U=null;if(f&&yn(y,kc)){var V=f[Vf]||sa(null);if(U=(V[y[kc]]||sa(null))[m],U||Gu("Missing ["+m+"] "+pu),!U[Kf]&&V[Rl]!==!1){for(var J=!yn(f,m),ae=vu(f),ne=[];J&&ae&&!Jo(ae)&&!Jf(ne,ae);){var ge=ae[m];if(ge){J=ge===N;break}ne.push(ae),ae=vu(ae)}try{J&&(f[m]=U),U[Kf]=1}catch{V[Rl]=!1}}}return U}function Ml(f,m,y){var N=m[f];return N===y&&(N=vu(m)[f]),typeof N!==pu&&Gu("["+f+"] is not a "+pu),N}function Jd(f,m,y,N,U){function V(ne,ge){var tt=function(){var bt=kl(this,ge,ne,tt)||Ml(ge,ne,tt);return bt.apply(this,arguments)};return tt[Oc]=1,tt}if(!Ol(f)){var J=y[Vf]=y[Vf]||sa(null);if(!Ol(J)){var ae=J[m]=J[m]||sa(null);J[Rl]!==!1&&(J[Rl]=!!U),Ol(ae)||Va(y,function(ne){Kd(y,ne,!1)&&y[ne]!==N[ne]&&(ae[ne]=y[ne],delete y[ne],(!yn(f,ne)||f[ne]&&!f[ne][Oc])&&(f[ne]=V(f,ne)))})}}}function Fv(f,m){if(Ji){for(var y=[],N=vu(m);N&&!Jo(N)&&!Jf(y,N);){if(N===f)return!0;y.push(N),N=vu(N)}return!1}return!0}function Hu(f,m){return yn(f,Ki)?f.name||m||zu:((f||{})[go]||{}).name||m||zu}function So(f,m,y,N){yn(f,Ki)||Gu("theClass is an invalid class definition.");var U=f[Ki];Fv(U,m)||Gu("["+Hu(f)+"] not in hierarchy of ["+Hu(m)+"]");var V=null;yn(U,kc)?V=U[kc]:(V=Bu+Hu(f,"_")+"$"+Wo.n,Wo.n++,U[kc]=V);var J=So[Wf],ae=!!J[Ko];ae&&N&&N[Ko]!==void 0&&(ae=!!N[Ko]);var ne=Pa(m),ge=Wd(U,m,ne,ae);y(m,ge);var tt=!!Ji&&!!J[Vr];tt&&N&&(tt=!!N[Vr]),Jd(U,V,m,ne,tt!==!1)}So[Wf]=Wo.o;var Zi=void 0,vn="",Ll="Not dynamic - ",Vu=/-([a-z])/g,Ku=/([^\w\d_$])/g,Zd=/^(\d+[\w\d_$])/;function Ci(f){return!nt(f)}function mu(f){var m=f;return m&&Ve(m)&&(m=m[fu](Vu,function(y,N){return N.toUpperCase()}),m=m[fu](Ku,"_"),m=m[fu](Zd,function(y,N){return"_"+N})),m}function As(f,m){return f&&m?Ga(f,m)!==-1:!1}function cr(f){return f&&f.toISOString()||""}function wo(f){return Ft(f)?f[Yp]:vn}function Zo(f){return function(){function m(){var y=this;f&&Wt(f,function(N,U){y[N]=U})}return m}()}var xi="console",Zf="JSON",Pi="crypto",hu="msCrypto",un="msie",Ka="trident/",Fr=null,pt=null,Wu=null;function bo(){return typeof console!==Vd?console:pn(xi)}function Rs(){return!!(typeof JSON===du&&JSON||pn(Zf)!==null)}function Xi(){return Rs()?JSON||pn(Zf):null}function _u(){return pn(Pi)}function Ai(){return pn(hu)}function qr(){var f=on();if(f&&(f[xl]!==pt||Fr===null)){pt=f[xl];var m=(pt||vn)[uu]();Fr=As(m,un)||As(m,Ka)}return Fr}function Eo(f){return(Wu===null||f===!1)&&(Wu=Ud()&&!!on().sendBeacon),Wu}function Ur(f,m){if(f)for(var y=0;y<f[dt];y++){var N=f[y];if(N[Yp]&&N[Yp]===m)return N}return{}}function To(f){var m=ni();return m&&f?Ur(m.querySelectorAll("meta"),f).content:null}function Xf(f){var m,y=hr();if(y){var N=y.getEntriesByType("navigation")||[];m=Ur((N[dt]>0?N[0]:{}).serverTiming,f).description}return m}var Io=4294967296,An=4294967295,Qi=123456789,Xo=987654321,wa=!1,Aa=Qi,Uc=Xo;function Ju(f){f<0&&(f>>>=0),Aa=Qi+f&An,Uc=Xo-f&An,wa=!0}function Qf(){try{var f=Qr()&2147483647;Ju((Math.random()*Io^f)+f)}catch{}}function Os(f){return f>0?Math.floor(No()/An*(f+1))>>>0:0}function No(f){var m=0,y=_u()||Ai();return y&&y.getRandomValues&&(m=y.getRandomValues(new Uint32Array(1))[0]&An),m===0&&qr()&&(wa||Qf(),m=Do()&An),m===0&&(m=Math.floor(Io*Math.random()|0)),f||(m>>>=0),m}function Do(f){Uc=36969*(Uc&65535)+(Uc>>16)&An,Aa=18e3*(Aa&65535)+(Aa>>16)&An;var m=(Uc<<16)+(Aa&65535)>>>0&An|0;return f||(m>>>=0),m}function Zu(f){f===void 0&&(f=22);for(var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=No()>>>0,N=0,U=vn;U[dt]<f;)N++,U+=m.charAt(y&63),y>>>=6,N===5&&(y=(No()<<2&4294967295|y&3)>>>0,N=0);return U}var Co="3.3.4",Ln="."+Zu(6),ed=0;function Xu(f){return f[li]===1||f[li]===9||!+f[li]}function ks(f,m){var y=m[f.id];if(!y){y={};try{Xu(m)&&Yr(m,f.id,{e:!1,v:y})}catch{}}return y}function di(f,m){return m===void 0&&(m=!1),mu(f+ed+++(m?"."+Co:vn)+Ln)}function Qo(f){var m={id:di("_aiData-"+(f||vn)+"."+Co),accept:function(y){return Xu(y)},get:function(y,N,U,V){var J=y[m.id];return J?J[mu(N)]:(V&&(J=ks(m,y),J[mu(N)]=U),U)},kill:function(y,N){if(y&&y[N])try{delete y[N]}catch{}}};return m}function Ms(f){return f&&zn(f)&&(f.isVal||f.fb||at(f,"v")||at(f,"mrg")||at(f,"ref")||f.set)}function Ri(f,m,y){var N,U=y.dfVal||po;if(m&&y.fb){var V=y.fb;kt(V)||(V=[V]);for(var J=0;J<V[dt];J++){var ae=V[J],ne=m[ae];if(U(ne)?N=ne:f&&(ne=f.cfg[ae],U(ne)&&(N=ne),f.set(f.cfg,je(ae),ne)),U(N))break}}return!U(N)&&U(y.v)&&(N=y.v),N}function jc(f,m,y){var N=y;if(y&&Ms(y)&&(N=Ri(f,m,y)),N){Ms(N)&&(N=jc(f,m,N));var U;kt(N)?(U=[],U[dt]=N[dt]):Gi(N)&&(U={}),U&&(Wt(N,function(V,J){J&&Ms(J)&&(J=jc(f,m,J)),U[V]=J}),N=U)}return N}function gu(f,m,y,N){var U,V,J,ae=N,ne,ge,tt,bt;Ms(ae)?(U=ae.isVal,V=ae.set,tt=ae[ua],bt=ae[Ti],ne=ae.mrg,ge=ae.ref,!ge&&Pr(ge)&&(ge=!!ne),J=Ri(f,m,ae)):J=N,bt&&f[Ti](m,y);var Jt,ot=!0,lt=m[y];(lt||!nt(lt))&&(Jt=lt,ot=!1,U&&Jt!==J&&!U(Jt)&&(Jt=J,ot=!0),V&&(Jt=V(Jt,J,m),ot=Jt===J)),ot?J?Jt=jc(f,m,J):Jt=J:(Gi(Jt)||kt(J))&&ne&&J&&(Gi(J)||kt(J))&&Wt(J,function(ir,Ut){gu(f,Jt,ir,Ut)}),f.set(m,y,Jt),ge&&f.ref(m,y),tt&&f[ua](m,y)}var ca=Ba("[[ai_dynCfg_1]]"),yu=Ba("[[ai_blkDynCfg_1]]"),Ls=Ba("[[ai_frcDynCfg_1]]");function Oi(f){if(f){var m;if(kt(f)?(m=[],m[dt]=f[dt]):Gi(f)&&(m={}),m)return Wt(f,function(y,N){m[y]=Oi(N)}),m}return f}function Qu(f){if(f){var m=f[ca]||f;if(m.cfg&&(m.cfg===f||m.cfg[ca]===m))return m}return null}function cn(f){if(f&&(Gi(f)||kt(f)))try{f[yu]=!0}catch{}return f}function Jn(f,m,y){var N=!1;return y&&!f[m.blkVal]&&(N=y[Ls],!N&&!y[yu]&&(N=Gi(y)||kt(y))),N}function ki(f){ti("InvalidAccess:"+f)}var ec=["push","pop","shift","unshift","splice"],es=function(f,m,y,N){f&&f[$d](3,108,"".concat(y," [").concat(m,"] failed - ")+Ct(N))};function Xd(f,m,y){kt(m)&&Mn(ec,function(N){var U=m[N];m[N]=function(){for(var V=[],J=0;J<arguments.length;J++)V[J]=arguments[J];var ae=U[Bd](this,V);return Wa(f,m,y,"Patching"),ae}})}function pi(f,m){var y=rt(f,m);return y&&y.get}function Yc(f,m,y,N){var U={n:y,h:[],trk:function(ge){ge&&ge.fn&&(ju(U.h,ge)===-1&&U.h[Ii](ge),f.trk(ge,U))},clr:function(ge){var tt=ju(U.h,ge);tt!==-1&&U.h[Ha](tt,1)}},V=!0,J=!1;function ae(){V&&(J=J||Jn(ae,f,N),N&&!N[ca]&&J&&(N=Wa(f,N,y,"Converting")),V=!1);var ge=f.act;return ge&&U.trk(ge),N}ae[f.prop]={chng:function(){f.add(U)}};function ne(ge){if(N!==ge){ae[f.ro]&&!f.upd&&ki("["+y+"] is read-only:"+Ct(m)),V&&(J=J||Jn(ae,f,N),V=!1);var tt=J&&ae[f.rf];if(J)if(tt){Wt(N,function(Jt){N[Jt]=ge?ge[Jt]:Zi});try{Wt(ge,function(Jt,ot){ba(f,N,Jt,ot)}),ge=N}catch(Jt){es((f.hdlr||{})[ci],y,"Assigning",Jt),J=!1}}else N&&N[ca]&&Wt(N,function(Jt){var ot=pi(N,Jt);if(ot){var lt=ot[f.prop];lt&&lt.chng()}});if(ge!==N){var bt=ge&&Jn(ae,f,ge);!tt&&bt&&(ge=Wa(f,ge,y,"Converting")),N=ge,J=bt}f.add(U)}}Yr(m,U.n,{g:ae,s:ne})}function ba(f,m,y,N){if(m){var U=pi(m,y),V=U&&!!U[f.prop];V?m[y]=N:Yc(f,m,y,N)}return m}function td(f,m,y,N){if(m){var U=pi(m,y),V=U&&!!U[f.prop],J=N&&N[0],ae=N&&N[1],ne=N&&N[2];if(!V){if(ne)try{cn(m)}catch(ge){es((f.hdlr||{})[ci],y,"Blocking",ge)}try{ba(f,m,y,m[y]),U=pi(m,y)}catch(ge){es((f.hdlr||{})[ci],y,"State",ge)}}J&&(U[f.rf]=J),ae&&(U[f.ro]=ae),ne&&(U[f.blkVal]=!0)}return m}function Wa(f,m,y,N){try{Wt(m,function(U,V){ba(f,m,U,V)}),m[ca]||(tr(m,ca,{get:function(){return f[Nm]}}),Xd(f,m,y))}catch(U){es((f.hdlr||{})[ci],y,N,U)}return m}var ts="[[ai_",rs="]]";function Qd(f){var m,y=su(ts+"get"+f.uid+rs),N=su(ts+"ro"+f.uid+rs),U=su(ts+"rf"+f.uid+rs),V=su(ts+"blkVal"+f.uid+rs),J=su(ts+"dtl"+f.uid+rs),ae=null,ne=null,ge;function tt(lt,ir){var Ut=ge.act;try{ge.act=lt,lt&&lt[J]&&(Mn(lt[J],function(br){br.clr(lt)}),lt[J]=[]),ir({cfg:f.cfg,set:f.set.bind(f),setDf:f[qd].bind(f),ref:f.ref.bind(f),rdOnly:f[ua].bind(f)})}catch(br){var gr=f[ci];throw gr&&gr[$d](1,107,Ct(br)),br}finally{ge.act=Ut||null}}function bt(){if(ae){var lt=ae;ae=null,ne&&ne[Mv](),ne=null;var ir=[];if(Mn(lt,function(Ut){if(Ut&&(Ut[J]&&(Mn(Ut[J],function(gr){gr.clr(Ut)}),Ut[J]=null),Ut.fn))try{tt(Ut,Ut.fn)}catch(gr){ir[Ii](gr)}}),ae)try{bt()}catch(Ut){ir[Ii](Ut)}ir[dt]>0&&Bp("Watcher error(s): ",ir)}}function Jt(lt){if(lt&&lt.h[dt]>0){ae||(ae=[]),ne||(ne=Ei(function(){ne=null,bt()},0));for(var ir=0;ir<lt.h[dt];ir++){var Ut=lt.h[ir];Ut&&ju(ae,Ut)===-1&&ae[Ii](Ut)}}}function ot(lt,ir){if(lt){var Ut=lt[J]=lt[J]||[];ju(Ut,ir)===-1&&Ut[Ii](ir)}}return ge=(m={prop:y,ro:N,rf:U},m[Ti]=V,m[Nm]=f,m.add=Jt,m[cu]=bt,m.use=tt,m.trk=ot,m),ge}function Fl(f,m){var y={fn:m,rm:function(){y.fn=null,f=null,m=null}};return Yr(y,"toJSON",{v:function(){return"WatcherHandler"+(y.fn?"":"[X]")}}),f.use(y,m),y}function rd(f,m,y){var N,U=Qu(m);if(U)return U;var V=di("dyncfg",!0),J=m&&y!==!1?m:Oi(m),ae;function ne(){ae[cu]()}function ge(gr,br,At){try{gr=ba(ae,gr,br,At)}catch(En){es(f,br,"Setting value",En)}return gr[br]}function tt(gr){return Fl(ae,gr)}function bt(gr,br){ae.use(null,function(At){var En=ae.upd;try{Pr(br)||(ae.upd=br),gr(At)}finally{ae.upd=En}})}function Jt(gr,br){var At;return td(ae,gr,br,(At={},At[0]=!0,At))[br]}function ot(gr,br){var At;return td(ae,gr,br,(At={},At[1]=!0,At))[br]}function lt(gr,br){var At;return td(ae,gr,br,(At={},At[2]=!0,At))[br]}function ir(gr,br){return br&&Wt(br,function(At,En){gu(Ut,gr,At,En)}),gr}var Ut=(N={uid:null,cfg:J},N[ci]=f,N[cu]=ne,N.set=ge,N[qd]=ir,N[Wn]=tt,N.ref=Jt,N[ua]=ot,N[Ti]=lt,N._block=bt,N);return Yr(Ut,"uid",{c:!1,e:!1,w:!1,v:V}),ae=Qd(Ut),Wa(ae,J,"config","Creating"),Ut}function Ul(f,m){f?(f[Cs](m),f[$d](2,108,m)):ki(m)}function xo(f,m,y,N){var U=rd(y,f||{},N);return m&&U[qd](U.cfg,m),U}function Ja(f,m,y){var N=f[ca]||f;return N.cfg&&(N.cfg===f||N.cfg[ca]===N)?N[Wn](m):(Ul(y,Ll+Ct(f)),xo(f,null,y)[Wn](m))}var $c=null;function Uv(){var f=pn("Microsoft");return f&&($c=f.ApplicationInsights),$c}function tc(f){var m=$c;return!m&&f.disableDbgExt!==!0&&(m=$c||Uv()),m?m.ChromeDbgExt:null}var rc,ns="warnToConsole",jl="AI (Internal): ",Dm="AI: ",ep="AITR_",Yl={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},nc=(rc={},rc[0]=null,rc[1]="errorToConsole",rc[2]=ns,rc[3]="debugToConsole",rc);function Gp(f){return f?'"'+f[fu](/\"/g,vn)+'"':vn}function jv(f,m){var y=bo();if(y){var N="log";y[f]&&(N=f),Tr(y[N])&&y[N](m)}}var ac=function(){function f(m,y,N,U){N===void 0&&(N=!1);var V=this;V[zd]=m,V[xa]=(N?Dm:jl)+m;var J=vn;Rs()&&(J=Xi().stringify(U));var ae=(y?" message:"+Gp(y):vn)+(U?" props:"+Gp(J):vn);V[xa]+=ae}return f.dataType="MessageData",f}();function Yv(f,m){return(f||{})[ci]||new $l(m)}var $l=function(){function f(m){this.identifier="DiagnosticLogger",this.queue=[];var y=0,N={},U,V,J,ae,ne;So(f,this,function(ge){ne=bt(m||{}),ge.consoleLoggingLevel=function(){return U},ge[$d]=function(lt,ir,Ut,gr,br){br===void 0&&(br=!1);var At=new ac(ir,Ut,br,gr);if(ae)throw Ct(At);var En=nc[lt]||ns;if(Pr(At[xa]))ot("throw"+(lt===1?"Critical":"Warning"),At);else{if(br){var vc=+At[zd];!N[vc]&&U>=lt&&(ge[En](At[xa]),N[vc]=!0)}else U>=lt&&ge[En](At[xa]);tt(lt,At)}},ge.debugToConsole=function(lt){jv("debug",lt),ot("warning",lt)},ge[Cs]=function(lt){jv("warn",lt),ot("warning",lt)},ge.errorToConsole=function(lt){jv("error",lt),ot("error",lt)},ge.resetInternalMessageCount=function(){y=0,N={}},ge[qp]=tt,ge[lu]=function(lt){ne&&ne.rm(),ne=null};function tt(lt,ir){if(!Jt()){var Ut=!0,gr=ep+ir[zd];if(N[gr]?Ut=!1:N[gr]=!0,Ut&&(lt<=V&&(ge.queue[Ii](ir),y++,ot(lt===1?"error":"warn",ir)),y===J)){var br="Internal events throttle limit per PageView reached for this app.",At=new ac(23,br,!1);ge.queue[Ii](At),lt===1?ge.errorToConsole(br):ge[Cs](br)}}}function bt(lt){return Ja(xo(lt,Yl,ge).cfg,function(ir){var Ut=ir.cfg;U=Ut[ch],V=Ut.loggingLevelTelemetry,J=Ut.maxMessageLimit,ae=Ut.enableDebug})}function Jt(){return y>=J}function ot(lt,ir){var Ut=tc(m||{});Ut&&Ut[Cl]&&Ut[Cl](lt,ir)}})}return f.__ieDyn=1,f}();function tp(f){return f||new $l}function eo(f,m,y,N,U,V){V===void 0&&(V=!1),tp(f)[$d](m,y,N,U,V)}function Hp(){for(var f=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],m=vn,y,N=0;N<4;N++)y=No(),m+=f[y&15]+f[y>>4&15]+f[y>>8&15]+f[y>>12&15]+f[y>>16&15]+f[y>>20&15]+f[y>>24&15]+f[y>>28&15];var U=f[8+(No()&3)|0];return Ts(m,0,8)+Ts(m,9,4)+"4"+Ts(m,13,3)+U+Ts(m,16,3)+Ts(m,19,12)}var Cm=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,nd="00",Vp="ff",rp="00000000000000000000000000000000",qc="0000000000000000",ad=1;function ic(f,m,y){return f&&f[dt]===m&&f!==y?!!f.match(/^[\da-f]*$/i):!1}function Fs(f,m,y){return ic(f,m)?f:y}function Bc(f){(isNaN(f)||f<0||f>255)&&(f=1);for(var m=f.toString(16);m[dt]<2;)m="0"+m;return m}function $v(f,m,y,N){var U;return U={},U[$p]=ic(N,2,Vp)?N:nd,U[$u]=zc(f)?f:Hp(),U[Ac]=ap(m)?m:El(Hp(),16),U.traceFlags=y>=0&&y<=255?y:1,U}function np(f,m){var y;if(!f||(kt(f)&&(f=f[0]||""),!f||!Ve(f)||f[dt]>8192))return null;if(f.indexOf(",")!==-1){var N=f[Hi](",");f=N[m>0&&N[dt]>m?m:0]}var U=Cm.exec(oi(f));return!U||U[1]===Vp||U[2]===rp||U[3]===qc?null:(y={version:(U[1]||vn)[uu](),traceId:(U[2]||vn)[uu](),spanId:(U[3]||vn)[uu]()},y[Pl]=parseInt(U[4],16),y)}function zc(f){return ic(f,32,rp)}function ap(f){return ic(f,16,qc)}function Us(f){return!(!f||!ic(f[$p],2,Vp)||!ic(f[$u],32,rp)||!ic(f[Ac],16,qc)||!ic(Bc(f[Pl]),2))}function Br(f){return Us(f)?(f[Pl]&ad)===ad:!1}function oc(f){if(f){var m=Bc(f[Pl]);ic(m,2)||(m="01");var y=f[$p]||nd;return y!=="00"&&y!=="ff"&&(y=nd),"".concat(y.toLowerCase(),"-").concat(Fs(f.traceId,32,rp).toLowerCase(),"-").concat(Fs(f.spanId,16,qc).toLowerCase(),"-").concat(m.toLowerCase())}return""}function la(f){var m="traceparent",y=np(To(m),f);return y||(y=np(Xf(m),f)),y}function ip(f){var m=f.getElementsByTagName("script"),y=[];return Mn(m,function(N){var U=N[Gf]("src");if(U){var V=N[Gf]("crossorigin"),J=N.hasAttribute("async")===!0,ae=N.hasAttribute("defer")===!0,ne=N[Gf]("referrerpolicy"),ge={url:U};V&&(ge.crossOrigin=V),J&&(ge.async=J),ae&&(ge.defer=ae),ne&&(ge.referrerPolicy=ne),y[Ii](ge)}}),y}var id="on",Gc="attachEvent",sc="addEventListener",Za="detachEvent",od="removeEventListener",Zn="events";di("aiEvtPageHide"),di("aiEvtPageShow");var vr=/\.[\.]+/g,js=/[\.]+$/,hn=1,as=Qo("events"),uc=/^([^.]*)(?:\.(.+)|)/;function cc(f){return f&&f[fu]?f[fu](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,vn):f}function Ys(f,m){var y;if(m){var N=vn;kt(m)?(N=vn,Mn(m,function(V){V=cc(V),V&&(V[0]!=="."&&(V="."+V),N+=V)})):N=cc(m),N&&(N[0]!=="."&&(N="."+N),f=(f||vn)+N)}var U=uc.exec(f||vn)||[];return y={},y[Ni]=U[1],y.ns=(U[2]||vn).replace(vr,".").replace(js,vn)[Hi](".").sort().join("."),y}function to(f,m,y){y===void 0&&(y=!0);var N=as.get(f,Zn,{},y),U=N[m];return U||(U=N[m]=[]),U}function ql(f,m,y,N){f&&m&&m[Ni]&&(f[od]?f[od](m[Ni],y,N):f[Za]&&f[Za](id+m[Ni],y))}function Kp(f,m,y,N){var U=!1;return f&&m&&m[Ni]&&y&&(f[sc]?(f[sc](m[Ni],y,N),U=!0):f[Gc]&&(f[Gc](id+m[Ni],y),U=!0)),U}function Bl(f,m,y,N){for(var U=m[dt];U--;){var V=m[U];V&&(!y.ns||y.ns===V.evtName.ns)&&(!N||N(V))&&(ql(f,V.evtName,V[Gd],V.capture),m[Ha](U,1))}}function Wp(f,m,y){if(m[Ni])Bl(f,to(f,m[Ni]),m,y);else{var N=as.get(f,Zn,{});Wt(N,function(U,V){Bl(f,V,m,y)}),ga(N)[dt]===0&&as.kill(f,Zn)}}function zl(f,m){var y;return m?(kt(m)?y=[f].concat(m):y=[f,m],y=Ys("xx",y).ns[Hi](".")):y=f,y}function Hc(f,m,y,N,U){var V;U===void 0&&(U=!1);var J=!1;if(f)try{var ae=Ys(m,N);if(J=Kp(f,ae,y,U),J&&as.accept(f)){var ne=(V={guid:hn++,evtName:ae},V[Gd]=y,V.capture=U,V);to(f,ae.type)[Ii](ne)}}catch{}return J}function op(f,m,y,N,U){if(U===void 0&&(U=!1),f)try{var V=Ys(m,N),J=!1;Wp(f,V,function(ae){return V.ns&&!y||ae[Gd]===y?(J=!0,!0):!1}),J||ql(f,V,y,U)}catch{}}var Hn="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Vc="sampleRate",fa="ProcessLegacy",Su="http.method",sp="https://dc.services.visualstudio.com",sd="/v2/track",da="not_specified",ud="iKey",up=Yd({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),$s="split",wt="length",is="toLowerCase",os="ingestionendpoint",vi="toString",Gl="push",Kc="removeItem",ss="name",Mi="message",Wc="count",cd="preTriggerDate",qs="disabled",Hl="interval",Jc="daysOfMonth",Vl="date",cp="getUTCDate",lp="stringify",Jp="pathname",xm="correlationHeaderExcludePatterns",us="extensionConfig",Bs="exceptions",cs="parsedStack",Li="properties",zs="measurements",wu="sizeInBytes",mi="typeName",Zc="severityLevel",qv="problemGroup",lc="isManual",Zp="CreateFromInterface",Kl="assembly",Xc="fileName",Wl="hasFullStack",Gs="level",Fi="method",Qc="line",Jl="duration",ld="receivedResponse";function pa(f,m,y){var N=m[wt],U=Hs(f,m);if(U[wt]!==N){for(var V=0,J=U;y[J]!==void 0;)V++,J=vo(U,0,147)+Xl(V);U=J}return U}function Hs(f,m){var y;return m&&(m=oi(je(m)),m[wt]>150&&(y=vo(m,0,150),eo(f,2,57,"name is too long.  It has been truncated to 150 characters.",{name:m},!0))),y||m}function va(f,m,y){y===void 0&&(y=1024);var N;return m&&(y=y||1024,m=oi(je(m)),m[wt]>y&&(N=vo(m,0,y),eo(f,2,61,"string value is too long. It has been truncated to "+y+" characters.",{value:m},!0))),N||m}function fd(f,m){return Zl(f,m,2048,66)}function bu(f,m){var y;return m&&m[wt]>32768&&(y=vo(m,0,32768),eo(f,2,56,"message is too long, it has been truncated to 32768 characters.",{message:m},!0)),y||m}function dd(f,m){var y;if(m){var N=""+m;N[wt]>32768&&(y=vo(N,0,32768),eo(f,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:m},!0))}return y||m}function Ra(f,m){if(m){var y={};Wt(m,function(N,U){if(zn(U)&&Rs())try{U=Xi()[lp](U)}catch(V){eo(f,2,49,"custom property is not valid",{exception:V},!0)}U=va(f,U,8192),N=pa(f,N,y),y[N]=U}),m=y}return m}function ma(f,m){if(m){var y={};Wt(m,function(N,U){N=pa(f,N,y),y[N]=U}),m=y}return m}function Xp(f,m){return m&&Zl(f,m,128,69)[vi]()}function Zl(f,m,y,N){var U;return m&&(m=oi(je(m)),m[wt]>y&&(U=vo(m,0,y),eo(f,2,N,"input is too long, it has been truncated to "+y+" characters.",{data:m},!0))),U||m}function Xl(f){var m="00"+f;return Ts(m,m[wt]-3)}var Eu=ni()||{},Bv=0,zv=[null,null,null,null,null];function Ql(f){var m=Bv,y=zv,N=y[m];return Eu.createElement?y[m]||(N=y[m]=Eu.createElement("a")):N={host:Gv(f,!0)},N.href=f,m++,m>=y[wt]&&(m=0),Bv=m,N}function Qp(f){var m,y=Ql(f);return y&&(m=y.href),m}function ef(f){var m,y=Ql(f);return y&&(m=y[Jp]),m}function ev(f,m){return f?f.toUpperCase()+" "+m:m}function Gv(f,m){var y=tf(f,m)||"";if(y){var N=y.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(N!=null&&N[wt]>3&&Ve(N[2])&&N[2][wt]>0)return N[2]+(N[3]||"")}return y}function tf(f,m){var y=null;if(f){var N=f.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(N!=null&&N[wt]>2&&Ve(N[2])&&N[2][wt]>0&&(y=N[2]||"",m&&N[wt]>2)){var U=(N[1]||"")[is](),V=N[3]||"";(U==="http"&&V===":80"||U==="https"&&V===":443")&&(V=""),y+=V}}return y}var Hv=[sp+sd,"https://breeze.aimon.applicationinsights.io"+sd,"https://dc-int.services.visualstudio.com"+sd],Tu="cid-v1:";function el(f){return ju(Hv,f[is]())!==-1}function fp(f){Tu=f}function ls(){return Tu}function pd(f,m,y){if(!m||f&&f.disableCorrelationHeaders)return!1;if(f&&f[xm]){for(var N=0;N<f.correlationHeaderExcludePatterns[wt];N++)if(f[xm][N].test(m))return!1}var U=Ql(m).host[is]();if(U&&(Ga(U,":443")!==-1||Ga(U,":80")!==-1)&&(U=(tf(m,!0)||"")[is]()),(!f||!f.enableCorsCorrelation)&&U&&U!==y)return!1;var V=f&&f.correlationHeaderDomains;if(V){var J;if(Mn(V,function(ge){var tt=new RegExp(ge.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));J=J||tt.test(U)}),!J)return!1}var ae=f&&f.correlationHeaderExcludedDomains;if(!ae||ae[wt]===0)return!0;for(var N=0;N<ae[wt];N++){var ne=new RegExp(ae[N].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(ne.test(U))return!1}return U&&U[wt]>0}function rf(f){if(f){var m=Po(f,up[1]);if(m&&m!==Tu)return m}}function Po(f,m){if(f)for(var y=f[$s](","),N=0;N<y[wt];++N){var U=y[N][$s]("=");if(U[wt]===2&&U[0]===m)return U[1]}}function tl(f,m,y,N){var U,V=N,J=N;if(m&&m[wt]>0){var ae=Ql(m);if(U=ae.host,!V)if(ae[Jp]!=null){var ne=ae.pathname[wt]===0?"/":ae[Jp];ne.charAt(0)!=="/"&&(ne="/"+ne),J=ae[Jp],V=va(f,y?y+" "+ne:ne)}else V=va(f,m)}else U=N,V=N;return{target:U,name:V,data:J}}function Vv(){var f=hr();if(f&&f.now&&f.timing){var m=f.now()+f.timing.navigationStart;if(m>0)return m}return Qr()}function rl(f,m){var y=null;return f!==0&&m!==0&&!nt(f)&&!nt(m)&&(y=m-f),y}function Pm(f,m){var y=f||{};return{getName:function(){return y[ss]},setName:function(N){m&&m.setName(N),y[ss]=N},getTraceId:function(){return y.traceID},setTraceId:function(N){m&&m.setTraceId(N),zc(N)&&(y.traceID=N)},getSpanId:function(){return y.parentID},setSpanId:function(N){m&&m.setSpanId(N),ap(N)&&(y.parentID=N)},getTraceFlags:function(){return y.traceFlags},setTraceFlags:function(N){m&&m.setTraceFlags(N),y.traceFlags=N}}}var nf=Dl({LocalStorage:0,SessionStorage:1}),Kv=Dl({AI:0,AI_AND_W3C:1,W3C:2}),tv=Dl({Normal:1,Critical:2}),Iu=void 0,Nu=void 0,nl="";function fs(){return hi()?Vs(nf.LocalStorage):null}function Vs(f){try{if(nt(zi()))return null;var m=new Date()[vi](),y=pn(f===nf.LocalStorage?"localStorage":"sessionStorage"),N=nl+m;y.setItem(N,m);var U=y.getItem(N)!==m;if(y[Kc](N),!U)return y}catch{}return null}function af(){return al()?Vs(nf.SessionStorage):null}function vd(){Iu=!1,Nu=!1}function md(f){nl=f||""}function of(){Iu=hi(!0),Nu=al(!0)}function hi(f){return(f||Iu===void 0)&&(Iu=!!Vs(nf.LocalStorage)),Iu}function sf(f,m){var y=fs();if(y!==null)try{return y.getItem(m)}catch(N){Iu=!1,eo(f,2,1,"Browser failed read of local storage. "+wo(N),{exception:Ct(N)})}return null}function Wv(f,m,y){var N=fs();if(N!==null)try{return N.setItem(m,y),!0}catch(U){Iu=!1,eo(f,2,3,"Browser failed write to local storage. "+wo(U),{exception:Ct(U)})}return!1}function Am(f,m){var y=fs();if(y!==null)try{return y[Kc](m),!0}catch(N){Iu=!1,eo(f,2,5,"Browser failed removal of local storage item. "+wo(N),{exception:Ct(N)})}return!1}function al(f){return(f||Nu===void 0)&&(Nu=!!Vs(nf.SessionStorage)),Nu}function Rm(){var f=[];return al()&&Wt(pn("sessionStorage"),function(m){f[Gl](m)}),f}function Ao(f,m){var y=af();if(y!==null)try{return y.getItem(m)}catch(N){Nu=!1,eo(f,2,2,"Browser failed read of session storage. "+wo(N),{exception:Ct(N)})}return null}function Du(f,m,y){var N=af();if(N!==null)try{return N.setItem(m,y),!0}catch(U){Nu=!1,eo(f,2,4,"Browser failed write to session storage. "+wo(U),{exception:Ct(U)})}return!1}function il(f,m){var y=af();if(y!==null)try{return y[Kc](m),!0}catch(N){Nu=!1,eo(f,2,6,"Browser failed removal of session storage item. "+wo(N),{exception:Ct(N)})}return!1}var Jv="appInsightsThrottle",dp=function(){function f(m,y){var N=this,U,V,J,ae,ne,ge,tt,bt=!1,Jt=!1;lt(),N._getDbgPlgTargets=function(){return[tt]},N.getConfig=function(){return J},N.canThrottle=function(Re){var vt=_f(Re),Bt=ir(Re);return br(Bt,U,vt)},N.isTriggered=function(Re){return Ed(Re)},N.isReady=function(){return bt},N.flush=function(Re){try{var vt=gf(Re);if(vt&&vt[wt]>0){var Bt=vt.slice(0);return tt[Re]=[],Mn(Bt,function(en){ot(en.msgID,en[Mi],en.severity,!1)}),!0}}catch{}return!1},N.flushAll=function(){try{if(tt){var Re=!0;return Wt(tt,function(vt){var Bt=N.flush(parseInt(vt));Re=Re&&Bt}),Re}}catch{}return!1},N.onReadyState=function(Re,vt){return vt===void 0&&(vt=!0),bt=nt(Re)?!0:Re,bt&&vt?N.flushAll():null},N.sendMessage=function(Re,vt,Bt){return ot(Re,vt,Bt,!0)};function ot(Re,vt,Bt,en){if(bt){var Ea=hf(Re);if(!Ea)return;var Ta=ir(Re),Xn=_f(Re),_i=br(Ta,U,Xn),ms=!1,dl=0,rm=Ed(Re);try{_i&&!rm?(dl=Math.min(Ta.limit.maxSendNumber,Xn[Wc]+1),Xn[Wc]=0,ms=!0,ne[Re]=!0,Xn[cd]=new Date):(ne[Re]=_i,Xn[Wc]+=1);var Au=At(Re);fl(V,Au,Xn);for(var Td=0;Td<dl;Td++)bd(Re,V,vt,Bt)}catch{}return{isThrottled:ms,throttleNum:dl}}else if(en){var Lm=gf(Re);Lm[Gl]({msgID:Re,message:vt,severity:Bt})}return null}function lt(){V=Yv(m),ne={},ae={},tt={},J={},Ut(109),ge=Ci(y)?y:"",m.addUnloadHook(Ja(m.config,function(Re){var vt=Re.cfg;U=hi();var Bt=vt.throttleMgrCfg||{};Wt(Bt,function(en,Ea){Ut(parseInt(en),Ea)})}))}function ir(Re){return J[Re]||J[109]}function Ut(Re,vt){var Bt,en;try{var Ea=vt||{},Ta={};Ta[qs]=!!Ea[qs];var Xn=Ea[Hl]||{};Jt=(Xn==null?void 0:Xn.daysOfMonth)&&(Xn==null?void 0:Xn.daysOfMonth[wt])>0,Ta[Hl]=gr(Xn);var _i={samplingRate:((Bt=Ea.limit)===null||Bt===void 0?void 0:Bt.samplingRate)||100,maxSendNumber:((en=Ea.limit)===null||en===void 0?void 0:en.maxSendNumber)||1};Ta.limit=_i,J[Re]=Ta}catch{}}function gr(Re){Re=Re||{};var vt=Re==null?void 0:Re.monthInterval,Bt=Re==null?void 0:Re.dayInterval;return nt(vt)&&nt(Bt)&&(Re.monthInterval=3,Jt||(Re[Jc]=[28],Jt=!0)),Re={monthInterval:Re==null?void 0:Re.monthInterval,dayInterval:Re==null?void 0:Re.dayInterval,daysOfMonth:Re==null?void 0:Re.daysOfMonth},Re}function br(Re,vt,Bt){if(Re&&!Re[qs]&&vt&&Ci(Bt)){var en=Js(),Ea=Bt[Vl],Ta=Re[Hl],Xn=1;if(Ta!=null&&Ta.monthInterval){var _i=(en.getUTCFullYear()-Ea.getUTCFullYear())*12+en.getUTCMonth()-Ea.getUTCMonth();Xn=mf(Ta.monthInterval,0,_i)}var ms=1;if(Jt)ms=ju(Ta[Jc],en[cp]());else if(Ta!=null&&Ta.dayInterval){var dl=Math.floor((en.getTime()-Ea.getTime())/864e5);ms=mf(Ta.dayInterval,0,dl)}return Xn>=0&&ms>=0}return!1}function At(Re,vt){var Bt=Ci(vt)?vt:"";return Re?Jv+Bt+"-"+Re:null}function En(Re){try{if(Re){var vt=new Date;return Re.getUTCFullYear()===vt.getUTCFullYear()&&Re.getUTCMonth()===vt.getUTCMonth()&&Re[cp]()===vt[cp]()}}catch{}return!1}function vc(Re,vt,Bt){try{var en={date:Js(),count:0};if(Re){var Ea=JSON.parse(Re),Ta={date:Js(Ea[Vl])||en[Vl],count:Ea[Wc]||en[Wc],preTriggerDate:Ea.preTriggerDate?Js(Ea[cd]):void 0};return Ta}else return fl(vt,Bt,en),en}catch{}return null}function Js(Re){try{if(Re){var vt=new Date(Re);if(!isNaN(vt.getDate()))return vt}else return new Date}catch{}return null}function fl(Re,vt,Bt){try{return Wv(Re,vt,oi(JSON[lp](Bt)))}catch{}return!1}function mf(Re,vt,Bt){return Re<=0?1:Bt>=vt&&(Bt-vt)%Re==0?Math.floor((Bt-vt)/Re)+1:-1}function bd(Re,vt,Bt,en){eo(vt,en||1,Re,Bt)}function hf(Re){try{var vt=ir(Re);return Os(1e6)<=vt.limit.samplingRate}catch{}return!1}function _f(Re){try{var vt=ae[Re];if(!vt){var Bt=At(Re,ge);vt=vc(sf(V,Bt),V,Bt),ae[Re]=vt}return ae[Re]}catch{}return null}function Ed(Re){var vt=ne[Re];if(nt(vt)){vt=!1;var Bt=_f(Re);Bt&&(vt=En(Bt[cd])),ne[Re]=vt}return ne[Re]}function gf(Re){return tt=tt||{},nt(tt[Re])&&(tt[Re]=[]),tt[Re]}}return f}(),Zv=";",rv="=";function hd(f){if(!f)return{};var m=f[$s](Zv),y=Ir(m,function(U,V){var J=V[$s](rv);if(J[wt]===2){var ae=J[0][is](),ne=J[1];U[ae]=ne}return U},{});if(ga(y)[wt]>0){if(y.endpointsuffix){var N=y.location?y.location+".":"";y[os]=y[os]||"https://"+N+"dc."+y.endpointsuffix}y[os]=y[os]||sp,Ho(y[os],"/")&&(y[os]=y[os].slice(0,-1))}return y}var ol={parse:hd},ro=function(){function f(m,y,N){var U=this,V=this;V.ver=1,V.sampleRate=100,V.tags={},V[ss]=va(m,N)||da,V.data=y,V.time=cr(new Date),V.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return U.sampleRate===100?4:1},tags:1,data:1}}return f}(),_d=function(){function f(m,y,N,U){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var V=this;V.ver=2,V[ss]=va(m,y)||da,V[Li]=Ra(m,N),V[zs]=ma(m,U)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.Event",f.dataType="EventData",f}(),sl="<no_method>",Oa="error",no="stack",uf="stackDetails",Xv="errorSrc",Qv="message",ha="description";function ul(f,m){var y=f;return y&&!Ve(y)&&(JSON&&JSON[lp]?(y=JSON[lp](f),m&&(!y||y==="{}")&&(Tr(f[vi])?y=f[vi]():y=""+f)):y=""+f+" - (Missing JSON.stringify)"),y||""}function cf(f,m){var y=f;return f&&(y&&!Ve(y)&&(y=f[Qv]||f[ha]||y),y&&!Ve(y)&&(y=ul(y,!0)),f.filename&&(y=y+" @"+(f.filename||"")+":"+(f.lineno||"?")+":"+(f.colno||"?"))),m&&m!=="String"&&m!=="Object"&&m!=="Error"&&Ga(y||"",m)===-1&&(y=m+": "+y),y||""}function Om(f){try{if(zn(f))return"hasFullStack"in f&&"typeName"in f}catch{}return!1}function em(f){try{if(zn(f))return"ver"in f&&"exceptions"in f&&"properties"in f}catch{}return!1}function lf(f){return f&&f.src&&Ve(f.src)&&f.obj&&kt(f.obj)}function ka(f){var m=f||"";Ve(m)||(Ve(m[no])?m=m[no]:m=""+m);var y=m[$s](`
`);return{src:m,obj:y}}function pp(f){for(var m=[],y=f[$s](`
`),N=0;N<y[wt];N++){var U=y[N];y[N+1]&&(U+="@"+y[N+1],N++),m[Gl](U)}return{src:f,obj:m}}function fc(f){var m=null;if(f)try{if(f[no])m=ka(f[no]);else if(f[Oa]&&f[Oa][no])m=ka(f[Oa][no]);else if(f.exception&&f.exception[no])m=ka(f.exception[no]);else if(lf(f))m=f;else if(lf(f[uf]))m=f[uf];else if(Ds()&&Ds().opera&&f[Qv])m=pp(f[Mi]);else if(f.reason&&f.reason[no])m=ka(f.reason[no]);else if(Ve(f))m=ka(f);else{var y=f[Qv]||f[ha]||"";Ve(f[Xv])&&(y&&(y+=`
`),y+=" from "+f[Xv]),y&&(m=ka(y))}}catch(N){m=ka(N)}return m||{src:"",obj:null}}function cl(f){var m="";return f&&(f.obj?Mn(f.obj,function(y){m+=y+`
`}):m=f.src||""),m}function Ks(f){var m,y=f.obj;if(y&&y[wt]>0){m=[];var N=0,U=0;Mn(y,function(lt){var ir=lt[vi]();if(Ro.regex.test(ir)){var Ut=new Ro(ir,N++);U+=Ut[wu],m[Gl](Ut)}});var V=32*1024;if(U>V)for(var J=0,ae=m[wt]-1,ne=0,ge=J,tt=ae;J<ae;){var bt=m[J][wu],Jt=m[ae][wu];if(ne+=bt+Jt,ne>V){var ot=tt-ge+1;m.splice(ge,ot);break}ge=J,tt=ae,J++,ae--}}return m}function ff(f){var m="";if(f&&(m=f.typeName||f[ss]||"",!m))try{var y=/function (.{1,200})\(/,N=y.exec(f.constructor[vi]());m=N&&N[wt]>1?N[1]:""}catch{}return m}function vp(f){if(f)try{if(!Ve(f)){var m=ff(f),y=ul(f,!1);return(!y||y==="{}")&&(f[Oa]&&(f=f[Oa],m=ff(f)),y=ul(f,!0)),Ga(y,m)!==0&&m!=="String"?m+":"+y:y}}catch{}return""+(f||"")}var St=function(){function f(m,y,N,U,V,J){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var ae=this;ae.ver=2,em(y)?(ae[Bs]=y[Bs]||[],ae[Li]=y[Li],ae[zs]=y[zs],y[Zc]&&(ae[Zc]=y[Zc]),y.id&&(ae.id=y.id,y[Li].id=y.id),y[qv]&&(ae[qv]=y[qv]),nt(y[lc])||(ae[lc]=y[lc])):(N||(N={}),J&&(N.id=J),ae[Bs]=[new Cu(m,y,N)],ae[Li]=Ra(m,N),ae[zs]=ma(m,U),V&&(ae[Zc]=V),J&&(ae.id=J))}return f.CreateAutoException=function(m,y,N,U,V,J,ae,ne){var ge,tt=ff(V||J||m);return ge={},ge[Mi]=cf(m,tt),ge.url=y,ge.lineNumber=N,ge.columnNumber=U,ge.error=vp(V||J||m),ge.evt=vp(J||m),ge[mi]=tt,ge.stackDetails=fc(ae||V||J),ge.errorSrc=ne,ge},f.CreateFromInterface=function(m,y,N,U){var V=y[Bs]&&ii(y[Bs],function(ae){return Cu[Zp](m,ae)}),J=new f(m,Rc(Rc({},y),{exceptions:V}),N,U);return J},f.prototype.toInterface=function(){var m,y=this,N=y.exceptions,U=y.properties,V=y.measurements,J=y.severityLevel,ae=y.problemGroup,ne=y.id,ge=y.isManual,tt=N instanceof Array&&ii(N,function(bt){return bt.toInterface()})||void 0;return m={ver:"4.0"},m[Bs]=tt,m.severityLevel=J,m.properties=U,m.measurements=V,m.problemGroup=ae,m.id=ne,m.isManual=ge,m},f.CreateSimpleException=function(m,y,N,U,V,J){var ae;return{exceptions:[(ae={},ae[Wl]=!0,ae.message=m,ae.stack=V,ae.typeName=y,ae)]}},f.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",f.dataType="ExceptionData",f.formatError=vp,f}(),Cu=function(){function f(m,y,N){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var U=this;if(Om(y))U[mi]=y[mi],U[Mi]=y[Mi],U[no]=y[no],U[cs]=y[cs]||[],U[Wl]=y[Wl];else{var V=y,J=V&&V.evt;Ft(V)||(V=V[Oa]||J||V),U[mi]=va(m,ff(V))||da,U[Mi]=bu(m,cf(y||V,U[mi]))||da;var ae=y[uf]||fc(y);U[cs]=Ks(ae),kt(U[cs])&&ii(U[cs],function(ne){ne[Kl]=va(m,ne[Kl]),ne[Xc]=va(m,ne[Xc])}),U[no]=dd(m,cl(ae)),U.hasFullStack=kt(U.parsedStack)&&U.parsedStack[wt]>0,N&&(N[mi]=N[mi]||U[mi])}}return f.prototype.toInterface=function(){var m,y=this,N=y[cs]instanceof Array&&ii(y[cs],function(V){return V.toInterface()}),U=(m={id:y.id,outerId:y.outerId,typeName:y[mi],message:y[Mi],hasFullStack:y[Wl],stack:y[no]},m[cs]=N||void 0,m);return U},f.CreateFromInterface=function(m,y){var N=y[cs]instanceof Array&&ii(y[cs],function(V){return Ro[Zp](V)})||y[cs],U=new f(m,Rc(Rc({},y),{parsedStack:N}));return U},f}(),Ro=function(){function f(m,y){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var N=this;if(N[wu]=0,typeof m=="string"){var U=m;N[Gs]=y,N[Fi]=sl,N[Kl]=oi(U),N[Xc]="",N[Qc]=0;var V=U.match(f.regex);V&&V[wt]>=5&&(N[Fi]=oi(V[2])||N[Fi],N[Xc]=oi(V[4]),N[Qc]=parseInt(V[5])||0)}else N[Gs]=m[Gs],N[Fi]=m[Fi],N[Kl]=m[Kl],N[Xc]=m[Xc],N[Qc]=m[Qc],N[wu]=0;N.sizeInBytes+=N.method[wt],N.sizeInBytes+=N.fileName[wt],N.sizeInBytes+=N.assembly[wt],N[wu]+=f.baseSize,N.sizeInBytes+=N.level.toString()[wt],N.sizeInBytes+=N.line.toString()[wt]}return f.CreateFromInterface=function(m){return new f(m,null)},f.prototype.toInterface=function(){var m=this;return{level:m[Gs],method:m[Fi],assembly:m[Kl],fileName:m[Xc],line:m[Qc]}},f.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,f.baseSize=58,f}(),df=function(){function f(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return f}(),km=function(){function f(m,y,N,U,V,J,ae,ne,ge){this.aiDataContract={ver:1,metrics:1,properties:0};var tt=this;tt.ver=2;var bt=new df;bt[Wc]=U>0?U:void 0,bt.max=isNaN(J)||J===null?void 0:J,bt.min=isNaN(V)||V===null?void 0:V,bt[ss]=va(m,y)||da,bt.value=N,bt.stdDev=isNaN(ae)||ae===null?void 0:ae,tt.metrics=[bt],tt[Li]=Ra(m,ne),tt[zs]=ma(m,ge)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",f.dataType="MetricData",f}(),pf="";function gd(f,m){return m===void 0&&(m=!1),f==null?m:f.toString()[is]()==="true"}function Oo(f){(isNaN(f)||f<0)&&(f=0),f=Math.round(f);var m=pf+f%1e3,y=pf+Math.floor(f/1e3)%60,N=pf+Math.floor(f/(1e3*60))%60,U=pf+Math.floor(f/(1e3*60*60))%24,V=Math.floor(f/(1e3*60*60*24));return m=m[wt]===1?"00"+m:m[wt]===2?"0"+m:m,y=y[wt]<2?"0"+y:y,N=N[wt]<2?"0"+N:N,U=U[wt]<2?"0"+U:U,(V>0?V+".":pf)+U+":"+N+":"+y+"."+m}function tm(f,m){var y=null;return Mn(f,function(N){if(N.identifier===m)return y=N,-1}),y}function mp(f,m,y,N,U){return!U&&Ve(f)&&(f==="Script error."||f==="Script error")}var hp=function(){function f(m,y,N,U,V,J,ae){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var ne=this;ne.ver=2,ne.id=Xp(m,ae),ne.url=fd(m,N),ne[ss]=va(m,y)||da,isNaN(U)||(ne[Jl]=Oo(U)),ne[Li]=Ra(m,V),ne[zs]=ma(m,J)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",f.dataType="PageviewData",f}(),vf=function(){function f(m,y,N,U,V,J,ae,ne,ge,tt,bt,Jt){ge===void 0&&(ge="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var ot=this;ot.ver=2,ot.id=y,ot[Jl]=Oo(V),ot.success=J,ot.resultCode=ae+"",ot.type=va(m,ge);var lt=tl(m,N,ne,U);ot.data=fd(m,U)||lt.data,ot.target=va(m,lt.target),tt&&(ot.target="".concat(ot.target," | ").concat(tt)),ot[ss]=va(m,lt[ss]),ot[Li]=Ra(m,bt),ot[zs]=ma(m,Jt)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",f.dataType="RemoteDependencyData",f}(),dc=function(){function f(m,y,N,U,V){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var J=this;J.ver=2,y=y||da,J[Mi]=bu(m,y),J[Li]=Ra(m,U),J[zs]=ma(m,V),N&&(J[Zc]=N)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.Message",f.dataType="MessageData",f}(),nv=function(){function f(m,y,N,U,V,J,ae){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var ne=this;ne.ver=2,ne.url=fd(m,N),ne[ss]=va(m,y)||da,ne[Li]=Ra(m,V),ne[zs]=ma(m,J),ae&&(ne.domProcessing=ae.domProcessing,ne[Jl]=ae[Jl],ne.networkConnect=ae.networkConnect,ne.perfTotal=ae.perfTotal,ne[ld]=ae[ld],ne.sentRequest=ae.sentRequest)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",f.dataType="PageviewPerformanceData",f}(),Gr=function(){function f(m,y){this.aiDataContract={baseType:1,baseData:1},this.baseType=m,this.baseData=y}return f}(),Ws=Dl({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),av=function(){function f(){}return f.getConfig=function(m,y,N,U){U===void 0&&(U=!1);var V;return N&&m[us]&&m[us][N]&&!nt(m[us][N][y])?V=m[us][N][y]:V=m[y],nt(V)?U:V},f}();function xu(f){var m="ai."+f+".";return function(y){return m+y}}var ao=xu("application"),Fn=xu("device"),yd=xu("location"),pc=xu("operation"),ll=xu("session"),ds=xu("user"),io=xu("cloud"),ko=xu("internal"),Sd=function(f){Lv(m,f);function m(){return f.call(this)||this}return m}(Zo({applicationVersion:ao("ver"),applicationBuild:ao("build"),applicationTypeId:ao("typeId"),applicationId:ao("applicationId"),applicationLayer:ao("layer"),deviceId:Fn("id"),deviceIp:Fn("ip"),deviceLanguage:Fn("language"),deviceLocale:Fn("locale"),deviceModel:Fn("model"),deviceFriendlyName:Fn("friendlyName"),deviceNetwork:Fn("network"),deviceNetworkName:Fn("networkName"),deviceOEMName:Fn("oemName"),deviceOS:Fn("os"),deviceOSVersion:Fn("osVersion"),deviceRoleInstance:Fn("roleInstance"),deviceRoleName:Fn("roleName"),deviceScreenResolution:Fn("screenResolution"),deviceType:Fn("type"),deviceMachineName:Fn("machineName"),deviceVMName:Fn("vmName"),deviceBrowser:Fn("browser"),deviceBrowserVersion:Fn("browserVersion"),locationIp:yd("ip"),locationCountry:yd("country"),locationProvince:yd("province"),locationCity:yd("city"),operationId:pc("id"),operationName:pc("name"),operationParentId:pc("parentId"),operationRootId:pc("rootId"),operationSyntheticSource:pc("syntheticSource"),operationCorrelationVector:pc("correlationVector"),sessionId:ll("id"),sessionIsFirst:ll("isFirst"),sessionIsNew:ll("isNew"),userAccountAcquisitionDate:ds("accountAcquisitionDate"),userAccountId:ds("accountId"),userAgent:ds("userAgent"),userId:ds("id"),userStoreRegion:ds("storeRegion"),userAuthUserId:ds("authUserId"),userAnonymousUserAcquisitionDate:ds("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:ds("authUserAcquisitionDate"),cloudName:io("name"),cloudRole:io("role"),cloudRoleVer:io("roleVer"),cloudRoleInstance:io("roleInstance"),cloudEnvironment:io("environment"),cloudLocation:io("location"),cloudDeploymentUnit:io("deploymentUnit"),internalNodeName:ko("nodeName"),internalSdkVersion:ko("sdkVersion"),internalAgentVersion:ko("agentVersion"),internalSnippet:ko("snippet"),internalSdkSrc:ko("sdkSrc")}));function _p(f,m,y,N,U,V){var J;y=va(N,y)||da,(nt(f)||nt(m)||nt(y))&&wr("Input doesn't contain all required fields");var ae="";f[ud]&&(ae=f[ud],delete f[ud]);var ne=(J={},J[ss]=y,J.time=cr(new Date),J.iKey=ae,J.ext=V||{},J.tags=[],J.data={},J.baseType=m,J.baseData=f,J);return nt(U)||Wt(U,function(ge,tt){ne.data[ge]=tt}),ne}var iv=function(){function f(){}return f.create=_p,f}(),ps={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},ov=new Sd;function wd(f){var m=null;if(Tr(Event))m=new Event(f);else{var y=ni();y&&y.createEvent&&(m=y.createEvent("Event"),m.initEvent(f,!0,!0))}return m}function sv(f,m){op(f,null,null,m)}function vs(f){var m=ni(),y=on(),N=!1,U=[],V=1;y&&!nt(y.onLine)&&!y.onLine&&(V=2);var J=0,ae=Jt(),ne=zl(di("OfflineListener"),f);try{if(tt(Ds())&&(N=!0),m){var ge=m.body||m;ge.ononline&&tt(ge)&&(N=!0)}}catch{N=!1}function tt(At){var En=!1;return At&&(En=Hc(At,"online",ir,ne),En&&Hc(At,"offline",Ut,ne)),En}function bt(){return ae}function Jt(){return!(J===2||V===2)}function ot(){var At=Jt();ae!==At&&(ae=At,Mn(U,function(En){var vc={isOnline:ae,rState:V,uState:J};try{En(vc)}catch{}}))}function lt(At){J=At,ot()}function ir(){V=1,ot()}function Ut(){V=2,ot()}function gr(){var At=Ds();if(At&&N){if(sv(At,ne),m){var En=m.body||m;Pr(En.ononline)||sv(En,ne)}N=!1}}function br(At){return U[Gl](At),{rm:function(){var En=U.indexOf(At);if(En>-1)return U.splice(En,1)}}}return{isOnline:bt,isListening:function(){return N},unload:gr,addListener:br,setOnlineState:lt}}var Mm="AppInsightsPropertiesPlugin",Pu="AppInsightsChannelPlugin",uv="ApplicationInsightsAnalytics";e.AnalyticsPluginIdentifier=uv,e.BreezeChannelIdentifier=Pu,e.ConfigurationManager=av,e.ConnectionStringParser=ol,e.ContextTagKeys=Sd,e.CtxTagKeys=ov,e.DEFAULT_BREEZE_ENDPOINT=sp,e.DEFAULT_BREEZE_PATH=sd,e.Data=Gr,e.DisabledPropertyName=Hn,e.DistributedTracingModes=Kv,e.Envelope=ro,e.Event=_d,e.EventPersistence=tv,e.Exception=St,e.Extensions=ps,e.HttpMethod=Su,e.Metric=km,e.PageView=hp,e.PageViewPerformance=nv,e.ProcessLegacy=fa,e.PropertiesPluginIdentifier=Mm,e.RemoteDependencyData=vf,e.RequestHeaders=up,e.SampleRate=Vc,e.SeverityLevel=Ws,e.TelemetryItemCreator=iv,e.ThrottleMgr=dp,e.Trace=dc,e.correlationIdCanIncludeCorrelationHeader=pd,e.correlationIdGetCorrelationContext=rf,e.correlationIdGetCorrelationContextValue=Po,e.correlationIdGetPrefix=ls,e.correlationIdSetPrefix=fp,e.createDistributedTraceContextFromTrace=Pm,e.createDomEvent=wd,e.createOfflineListener=vs,e.createTelemetryItem=_p,e.createTraceParent=$v,e.dataSanitizeException=dd,e.dataSanitizeId=Xp,e.dataSanitizeInput=Zl,e.dataSanitizeKey=Hs,e.dataSanitizeKeyAndAddUniqueness=pa,e.dataSanitizeMeasurements=ma,e.dataSanitizeMessage=bu,e.dataSanitizeProperties=Ra,e.dataSanitizeString=va,e.dataSanitizeUrl=fd,e.dateTimeUtilsDuration=rl,e.dateTimeUtilsNow=Vv,e.dsPadNumber=Xl,e.findAllScripts=ip,e.findW3cTraceParent=la,e.formatTraceParent=oc,e.getExtensionByName=tm,e.isBeaconApiSupported=Eo,e.isCrossOriginError=mp,e.isInternalApplicationInsightsEndpoint=el,e.isSampledFlag=Br,e.isValidSpanId=ap,e.isValidTraceId=zc,e.isValidTraceParent=Us,e.msToTimeSpan=Oo,e.parseConnectionString=hd,e.parseTraceParent=np,e.strNotSpecified=da,e.stringToBoolOrDefault=gd,e.urlGetAbsoluteUrl=Qp,e.urlGetCompleteUrl=ev,e.urlGetPathName=ef,e.urlParseFullHost=tf,e.urlParseHost=Gv,e.urlParseUrl=Ql,e.utlCanUseLocalStorage=hi,e.utlCanUseSessionStorage=al,e.utlDisableStorage=vd,e.utlEnableStorage=of,e.utlGetLocalStorage=sf,e.utlGetSessionStorage=Ao,e.utlGetSessionStorageKeys=Rm,e.utlRemoveSessionStorage=il,e.utlRemoveStorage=Am,e.utlSetLocalStorage=Wv,e.utlSetSessionStorage=Du,e.utlSetStoragePrefix=md})});var By=kd(kg=>{"use strict";Object.defineProperty(kg,"__esModule",{value:!0});kg.TelemetryUtil=void 0;var qy=class e{static applyReplacements(t,r){for(let n of Object.keys(t))for(let s of r)s.lookup.test(n)&&(s.replacementString!==void 0?t[n]=s.replacementString:delete t[n])}static shouldUseOneDataSystemSDK(t){return t.length===74&&t[32]==="-"&&t[41]==="-"&&t[46]==="-"&&t[51]==="-"&&t[56]==="-"&&t[69]==="-"}static getAdditionalCommonProperties(t){return{"common.os":t.platform,"common.nodeArch":t.architecture,"common.platformversion":(t.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.8"}}static getInstance(){return e._instance||(e._instance=new e),e._instance}};kg.TelemetryUtil=qy});var YS=kd((Mg,jS)=>{(function(e,t){typeof Mg=="object"&&typeof jS<"u"?t(Mg):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{})))})(Mg,function(e){"use strict";function t(i,o){return i||o}function r(i,o){return i[o]}var n=void 0,s=null,u="",h="function",w="object",T="prototype",C="__proto__",F="undefined",z="constructor",ee="Symbol",pe="_polyfill",ce="length",re="name",Q="call",ve="toString",Pe=t(Object),We=r(Pe,T),Ae=t(String),Ze=r(Ae,T),Tt=t(Math),Dt=t(Array),Lt=r(Dt,T),it=r(Lt,"slice");function Gt(i,o){try{return{v:i.apply(this,o)}}catch(l){return{e:l}}}function xr(i,o){var l=Gt(i);return l.e?o:l.v}var oa;function ei(i){return function(o){return typeof o===i}}function Pr(i){var o="[object "+i+"]";return function(l){return!!(l&&xn(l)===o)}}function xn(i){return We[ve].call(i)}function nt(i){return typeof i===F||i===F}function po(i){return!zn(i)}function Ve(i){return i===s||nt(i)}function Tr(i){return i===s||!zn(i)}function zn(i){return!!i||i!==n}function kt(i){return!oa&&(oa=["string","number","boolean",F,"symbol","bigint"]),i!==w&&oa.indexOf(i)!==-1}var Ft=ei("string"),rt=ei(h);function yn(i){return!i&&Ve(i)?!1:!!i&&typeof i===w}var at=r(Dt,"isArray"),Nc=Pr("Date"),Wt=ei("number"),$i=ei("boolean"),Ht=Pr("Error");function tr(i){return!!(i&&i.then&&rt(i.then))}function Yr(i){return!(!i||xr(function(){return!(i&&0+i)},!i))}var qt=r(Pe,"getOwnPropertyDescriptor");function an(i,o){return!!i&&We.hasOwnProperty[Q](i,o)}var je=t(r(Pe,"hasOwn"),Kn);function Kn(i,o){return an(i,o)||!!qt(i,o)}function Ct(i,o,l){if(i&&yn(i)){for(var v in i)if(je(i,v)&&o[Q](l||i,v,i[v])===-1)break}}var wr={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function ti(i){var o={};if(o[wr.c]=!0,o[wr.e]=!0,i.l){o.get=function(){return i.l.v};var l=qt(i.l,"v");l&&l.set&&(o.set=function(v){i.l.v=v})}return Ct(i,function(v,S){o[wr[v]]=po(S)?o[wr[v]]:S}),o}var qi=r(Pe,"defineProperty");function Hr(i,o,l){return qi(i,o,ti(l))}function Sn(i,o,l,v,S){var I={};return Ct(i,function(A,L){Bi(I,A,o?L:A,S),Bi(I,L,l?L:A,S)}),v?v(I):I}function Bi(i,o,l,v){qi(i,o,{value:l,enumerable:!0,writable:!!v})}var ga=t(Ae),Ar="[object Error]";function ar(i,o){var l=u,v=We[ve][Q](i);v===Ar&&(i={stack:ga(i.stack),message:ga(i.message),name:ga(i.name)});try{l=JSON.stringify(i,s,o?typeof o=="number"?o:4:n),l=(l?l.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):s)||ga(i)}catch(S){l=" - "+ar(S,o)}return v+": "+l}function pr(i){throw new Error(i)}function $r(i){throw new TypeError(i)}var Yf=r(Pe,"freeze");function wn(i){return i}function bl(i){return i[C]||s}var Dc=r(Pe,"assign"),bn=r(Pe,"keys");function qa(i){return Yf&&Ct(i,function(o,l){(at(l)||yn(l))&&qa(l)}),ur(i)}var ur=t(Yf,wn),Pn=t(r(Pe,"getPrototypeOf"),bl);function Gn(i){return Sn(i,1,0,ur)}function vo(i){return Sn(i,0,0,ur)}function Ts(i){var o={};return Ct(i,function(l,v){Bi(o,l,v[1]),Bi(o,v[0],v[1])}),ur(o)}function Cc(i){return Ts(i)}var El=vo({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),mo="__tsUtils$gblCfg",$o;function On(){var i;return typeof globalThis!==F&&(i=globalThis),!i&&typeof self!==F&&(i=self),!i&&typeof window!==F&&(i=window),!i&&typeof global!==F&&(i=global),i}function ho(){if(!$o){var i=Gt(On).v||{};$o=i[mo]=i[mo]||{}}return $o}var Is=ya;function ya(i,o,l){var v=o?o[i]:s;return function(S){var I=(S?S[i]:s)||v;if(I||l){var A=arguments;return(I||l).apply(S,I?it[Q](A,1):A)}$r('"'+ga(i)+'" not defined for '+ar(S))}}function Uu(i){return function(o){return o[i]}}var Ns=r(Tt,"max"),Nr=Is("slice",Ze),Lr=Is("substring",Ze),ri=ya("substr",Ze,zi);function zi(i,o,l){return Ve(i)&&$r("Invalid "+ar(i)),l<0?u:(o=o||0,o<0&&(o=Ns(o+i[ce],0)),nt(l)?Nr(i,o):Nr(i,o,o+l))}function pn(i,o){return Lr(i,0,o)}var ni="_urid",ai;function Ds(){if(!ai){var i=ho();ai=i.gblSym=i.gblSym||{k:{},s:{}}}return ai}var Ud;function on(i){var o={description:ga(i),toString:function(){return ee+"("+i+")"}};return o[pe]=!0,o}function _o(i){var o=Ds();if(!je(o.k,i)){var l=on(i),v=bn(o.s).length;l[ni]=function(){return v+"_"+l[ve]()},o.k[i]=l,o.s[l[ni]()]=ga(i)}return o.k[i]}function qo(i){!Ud&&(Ud={});var o,l=El[i];return l&&(o=Ud[l]=Ud[l]||on(ee+"."+l)),o}var kn;function Bo(){kn=ho()}function su(i){var o={};return!kn&&Bo(),o.b=kn.lzy,qi(o,"v",{configurable:!0,get:function(){var l=i();return kn.lzy||qi(o,"v",{value:l}),o.b=kn.lzy,l}}),o}function Ba(i){return qi({toJSON:function(){return i}},"v",{value:i})}var sn="window",Mn;function ju(i,o){var l;return function(){return!kn&&Bo(),(!l||kn.lzy)&&(l=Ba(Gt(i,o).v)),l.v}}function ii(i){return!kn&&Bo(),(!Mn||i===!1||kn.lzy)&&(Mn=Ba(Gt(On).v||s)),Mn.v}function Ir(i,o){var l;if(!Mn||o===!1?l=ii(o):l=Mn.v,l&&l[i])return l[i];if(i===sn)try{return window}catch{}return s}function sa(){return!!$f()}var $f=ju(Ir,["document"]);function Sa(){return!!zo()}var zo=ju(Ir,[sn]);function xc(){return!!Go()}var Go=ju(Ir,["navigator"]),qf=ju(function(){return!!Gt(function(){return process&&(process.versions||{}).node}).v}),Qr,Tl;function za(){return Qr=Ba(Gt(Ir,[ee]).v),Qr}function jd(i){var o=(kn.lzy?0:Qr)||za();return o.v?o.v[i]:n}function oi(){return!!jp()}function jp(){return!kn&&Bo(),((kn.lzy?0:Qr)||za()).v}function si(i,o){var l=El[i];!kn&&Bo();var v=(kn.lzy?0:Qr)||za();return v.v?v.v[l||i]:o?n:qo(i)}function Il(i,o){!kn&&Bo();var l=(kn.lzy?0:Qr)||za();return l.v?l.v(i):o?s:on(i)}function Gi(i){return!kn&&Bo(),Tl=(kn.lzy?0:Tl)||Ba(Gt(jd,["for"]).v),(Tl.v||_o)(i)}function Bf(i){return!!i&&rt(i.next)}function hr(i){return!Tr(i)&&rt(i[si(3)])}var Ho;function zf(i,o,l){if(i&&(Bf(i)||(!Ho&&(Ho=Ba(si(3))),i=i[Ho.v]?i[Ho.v]():s),Bf(i))){var v=n,S=n;try{for(var I=0;!(S=i.next()).done&&o[Q](l||i,S.value,I,i)!==-1;)I++}catch(A){v={e:A},i.throw&&(S=s,i.throw(v))}finally{try{S&&!S.done&&i.return&&i.return(S)}finally{if(v)throw v.e}}}}function Ga(i,o,l){return i.apply(o,l)}function Pc(i,o){return!nt(o)&&i&&(at(o)?Ga(i.push,i,o):Bf(o)||hr(o)?zf(o,function(l){i.push(l)}):i.push(o)),i}function Pt(i,o,l){if(i)for(var v=i[ce]>>>0,S=0;S<v&&!(S in i&&o[Q](l||i,i[S],S,i)===-1);S++);}var ui=Is("indexOf",Lt),Yu=Is("map",Lt);function Nl(i,o,l){return((i?i.slice:s)||it).apply(i,it[Q](arguments,1))}var kv=Is("reduce",Lt),Ei=t(r(Pe,"create"),Dl);function Dl(i){if(!i)return{};var o=typeof i;o!==w&&o!==h&&$r("Prototype must be an Object or function: "+ar(i));function l(){}return l[T]=i,new l}var Yd;function uu(i,o){var l=Pe.setPrototypeOf||function(v,S){var I;!Yd&&(Yd=Ba((I={},I[C]=[],I instanceof Array))),Yd.v?v[C]=S:Ct(S,function(A,L){return v[A]=L})};return l(i,o)}function Ti(i,o,l){Gt(Hr,[o,re,{v:i,c:!0,e:!1}]),o=uu(o,l);function v(){this[z]=o,Gt(Hr,[this,re,{v:i,c:!0,e:!1}])}return o[T]=l===s?Ei(l):(v[T]=l[T],new v),o}function dt(i,o){o&&(i[re]=o)}function ua(i,o,l){var v=l||Error,S=v[T][re],I=Error.captureStackTrace;return Ti(i,function(){var A=this,L=arguments;try{Gt(dt,[v,i]);var Y=Ga(v,A,it[Q](L))||A;if(Y!==A){var B=Pn(A);B!==Pn(Y)&&uu(Y,B)}return I&&I(Y,A[z]),o&&o(Y,L),Y}finally{Gt(dt,[v,S])}},v)}function cu(){return(Date.now||Cs)()}function Cs(){return new Date().getTime()}function $d(i){return function(l){return Ve(l)&&$r("strTrim called ["+ar(l)+"]"),l&&l.replace&&(l=l.replace(i,u)),l}}var qd=$d(/^\s+|(?=\s)\s+$/g),Wn=ya("trim",Ze,qd),ci,Bd,Ii;function Ha(i){if(!i||typeof i!==w)return!1;Ii||(Ii=Sa()?zo():!0);var o=!1;if(i!==Ii){Bd||(ci=Function[T][ve],Bd=ci[Q](Pe));try{var l=Pn(i);o=!l,o||(an(l,z)&&(l=l[z]),o=!!(l&&typeof l===h&&ci[Q](l)===Bd))}catch{}}return o}function Nm(i){return i.value&&Hi(i),!0}var Mv=[xa,Hi,xl,Cl];function Yp(i,o,l,v){var S;return Pt(i,function(I){if(I.k===o)return S=I,-1}),S||(S={k:o,v:o},i.push(S),v(S)),S.v}function lu(i,o,l,v){var S=l.handler,I=l.path?v?l.path.concat(v):l.path:[],A={handler:l.handler,src:l.src,path:I},L=typeof o,Y=!1,B=o===s;B||(o&&L===w?Y=Ha(o):B=kt(L));var X={type:L,isPrim:B,isPlain:Y,value:o,result:o,path:I,origin:l.src,copy:function(le,fe){return lu(i,le,fe?A:l,fe)},copyTo:function(le,fe){return $p(i,le,fe,A)}};return X.isPrim?S&&S[Q](l,X)?X.result:o:Yp(i,o,I,function(le){Hr(X,"result",{g:function(){return le.v},s:function(ue){le.v=ue}});for(var fe=0,de=S;!(de||(fe<Mv.length?Mv[fe++]:Nm))[Q](l,X);)de=s})}function $p(i,o,l,v){if(!Ve(l))for(var S in l)o[S]=lu(i,l[S],v,S);return o}function ch(i,o,l){var v={handler:l,src:o,path:[]};return $p([],i,o,v)}function zd(i,o){var l={handler:o,src:i};return lu([],i,l)}function xa(i){var o=i.value;if(at(o)){var l=i.result=[];return l.length=o.length,i.copyTo(l,o),!0}return!1}function Cl(i){var o=i.value;return Nc(o)?(i.result=new Date(o.getTime()),!0):!1}function xl(i){return i.type===h}function Hi(i){var o=i.value;if(o&&i.isPlain){var l=i.result={};return i.copyTo(l,o),!0}return!1}function li(i,o){return Pt(o,function(l){ch(i,l)}),i}function fu(i,o,l,v,S,I,A){return li(zd(i)||{},it[Q](arguments))}var qp=Uu(ce),Ni=ya("endsWith",Ze,Gd);function Gd(i,o,l){Ft(i)||$r("'"+ar(i)+"' is not a string");var v=Ft(o)?o:ga(o),S=!nt(l)&&l<i[ce]?l:i[ce];return Lr(i,S-v[ce],S)===v}var $u=Is("indexOf",Ze),Ac="ref",Pl="unref",Gf="hasRef",Hd="enabled";function Bp(i,o,l){var v=!0,S=i?o(s):s,I;function A(){return v=!1,S&&S[Pl]&&S[Pl](),I}function L(){S&&l(S),S=s}function Y(){return S=o(S),v||A(),I}function B(X){!X&&S&&L(),X&&!S&&Y()}return I={cancel:L,refresh:Y},I[Gf]=function(){return S&&S[Gf]?S[Gf]():v},I[Ac]=function(){return v=!0,S&&S[Ac]&&S[Ac](),I},I[Pl]=A,I=qi(I,Hd,{get:function(){return!!S},set:B}),{h:I,dn:function(){S=s}}}function zp(i,o,l){var v=at(o),S=v?o.length:0,I=(S>0?o[0]:v?n:o)||setTimeout,A=(S>1?o[1]:n)||clearTimeout,L=l[0];l[0]=function(){Y.dn(),Ga(L,n,it[Q](arguments))};var Y=Bp(i,function(B){if(B){if(B.refresh)return B.refresh(),B;Ga(A,n,[B])}return Ga(I,n,l)},function(B){Ga(A,n,[B])});return Y.h}function du(i,o){return zp(!0,n,it[Q](arguments))}function Vd(i,o){return zp(!1,n,it[Q](arguments))}var xs,qu="constructor",Di="prototype",Al="function",Hf="_dynInstFuncs",Rc="_isDynProxy",Vi="_dynClass",Lv="_dynCls$",Vo="_dynInstChk",go=Vo,Ki="_dfOpts",pu="_unknown_",Vf="__proto__",Oc="_dyn"+Vf,kc="__dynProto$Gbl",Bu="_dynInstProto",Kf="useBaseInst",Rl="setInstFuncs",Wf=Object,zu=Wf.getPrototypeOf,Wi=Wf.getOwnPropertyNames,Mc=ii(),yo=Mc[kc]||(Mc[kc]={o:(xs={},xs[Rl]=!0,xs[Kf]=!0,xs),n:1e3});function fi(i){return i&&(i===Wf[Di]||i===Array[Di])}function Ko(i){return fi(i)||i===Function[Di]}function Vr(i){var o;if(i){if(zu)return zu(i);var l=i[Vf]||i[Di]||(i[qu]?i[qu][Di]:null);o=i[Oc]||l,an(i,Oc)||(delete i[Bu],o=i[Oc]=i[Bu]||i[Oc],i[Bu]=l)}return o}function Ps(i,o){var l=[];if(Wi)l=Wi(i);else for(var v in i)typeof v=="string"&&an(i,v)&&l.push(v);if(l&&l.length>0)for(var S=0;S<l.length;S++)o(l[S])}function Ji(i,o,l){return o!==qu&&typeof i[o]===Al&&(l||an(i,o))&&o!==Vf&&o!==Di}function Lc(i){$r("DynamicProto: "+i)}function Fc(i){var o=Ei(null);return Ps(i,function(l){!o[l]&&Ji(i,l,!1)&&(o[l]=i[l])}),o}function Wo(i,o){for(var l=i.length-1;l>=0;l--)if(i[l]===o)return!0;return!1}function Ol(i,o,l,v){function S(Y,B,X){var le=B[X];if(le[Rc]&&v){var fe=Y[Hf]||{};fe[go]!==!1&&(le=(fe[B[Vi]]||{})[X]||le)}return function(){return le.apply(Y,arguments)}}var I=Ei(null);Ps(l,function(Y){I[Y]=S(o,l,Y)});for(var A=Vr(i),L=[];A&&!Ko(A)&&!Wo(L,A);)Ps(A,function(Y){!I[Y]&&Ji(A,Y,!zu)&&(I[Y]=S(o,A,Y))}),L.push(A),A=Vr(A);return I}function Jo(i,o,l,v){var S=null;if(i&&an(l,Vi)){var I=i[Hf]||Ei(null);if(S=(I[l[Vi]]||Ei(null))[o],S||Lc("Missing ["+o+"] "+Al),!S[Vo]&&I[go]!==!1){for(var A=!an(i,o),L=Vr(i),Y=[];A&&L&&!Ko(L)&&!Wo(Y,L);){var B=L[o];if(B){A=B===v;break}Y.push(L),L=Vr(L)}try{A&&(i[o]=S),S[Vo]=1}catch{I[go]=!1}}}return S}function vu(i,o,l){var v=o[i];return v===l&&(v=Vr(o)[i]),typeof v!==Al&&Lc("["+i+"] is not a "+Al),v}function Va(i,o,l,v,S){function I(Y,B){var X=function(){var le=Jo(this,B,Y,X)||vu(B,Y,X);return le.apply(this,arguments)};return X[Rc]=1,X}if(!fi(i)){var A=l[Hf]=l[Hf]||Ei(null);if(!fi(A)){var L=A[o]=A[o]||Ei(null);A[go]!==!1&&(A[go]=!!S),fi(L)||Ps(l,function(Y){Ji(l,Y,!1)&&l[Y]!==v[Y]&&(L[Y]=l[Y],delete l[Y],(!an(i,Y)||i[Y]&&!i[Y][Rc])&&(i[Y]=I(i,Y)))})}}}function Kd(i,o){if(zu){for(var l=[],v=Vr(o);v&&!Ko(v)&&!Wo(l,v);){if(v===i)return!0;l.push(v),v=Vr(v)}return!1}return!0}function Gu(i,o){return an(i,Di)?i.name||o||pu:((i||{})[qu]||{}).name||o||pu}function Pa(i,o,l,v){an(i,Di)||Lc("theClass is an invalid class definition.");var S=i[Di];Kd(S,o)||Lc("["+Gu(i)+"] not in hierarchy of ["+Gu(o)+"]");var I=null;an(S,Vi)?I=S[Vi]:(I=Lv+Gu(i,"_")+"$"+yo.n,yo.n++,S[Vi]=I);var A=Pa[Ki],L=!!A[Kf];L&&v&&v[Kf]!==void 0&&(L=!!v[Kf]);var Y=Fc(o),B=Ol(S,o,Y,L);l(o,B);var X=!!zu&&!!A[Rl];X&&v&&(X=!!v[Rl]),Va(S,I,o,Y,X!==!1)}Pa[Ki]=yo.o;var Jf="function",Wd="object",kl="undefined",Ml="prototype",Jd=Object,Fv=Jd[Ml];(ii()||{}).Symbol,(ii()||{}).Reflect;var Hu="hasOwnProperty",So=function(i){for(var o,l=1,v=arguments.length;l<v;l++){o=arguments[l];for(var S in o)Fv[Hu].call(o,S)&&(i[S]=o[S])}return i},Zi=Dc||So,vn=function(i,o){return vn=Jd.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var S in v)v[Hu](S)&&(l[S]=v[S])},vn(i,o)};function Ll(i,o){typeof o!==Jf&&o!==null&&$r("Class extends value "+String(o)+" is not a constructor or null"),vn(i,o);function l(){this.constructor=i}i[Ml]=o===null?Ei(o):(l[Ml]=o[Ml],new l)}function Vu(i,o){for(var l=0,v=o.length,S=i.length;l<v;l++,S++)i[S]=o[l];return i}var Ku=Gn,Zd=Cc,Ci=Ku({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),mu="toLowerCase",As="blkVal",cr="length",wo="rdOnly",Zo="notify",xi="warnToConsole",Zf="throwInternal",Pi="setDf",hu="watch",un="logger",Ka="apply",Fr="push",pt="splice",Wu="hdlr",bo="cancel",Rs="initialize",Xi="identifier",_u="removeNotificationListener",Ai="addNotificationListener",qr="isInitialized",Eo="instrumentationKey",Ur="INACTIVE",To="value",Xf="getNotifyMgr",Io="getPlugin",An="name",Qi="iKey",Xo="time",wa="processNext",Aa="getProcessTelContext",Uc="pollInternalLogs",Ju="enabled",Qf="stopPollingInternalLogs",Os="unload",No="onComplete",Do="version",Zu="loggingLevelConsole",Co="createNew",Ln="teardown",ed="messageId",Xu="message",ks="isAsync",di="diagLog",Qo="_doTeardown",Ms="update",Ri="getNext",jc="setNextPlugin",gu="protocol",ca="userAgent",yu="split",Ls="nodeType",Oi="replace",Qu="logInternalMessage",cn="type",Jn="handler",ki="status",ec="getResponseHeader",es="getAllResponseHeaders",Xd="isChildEvt",pi="data",Yc="getCtx",ba="setCtx",td="complete",Wa="itemsReceived",ts="urlString",rs="sendPOST",Qd="headers",Fl="timeout",rd="setRequestHeader",Ul="traceId",xo="spanId",Ja="traceFlags",$c;function Uv(i,o){$c||($c=ua("AggregationError",function(v,S){S[cr]>1&&(v.errors=S[1])}));var l=i||"One or more errors occurred.";throw Pt(o,function(v,S){l+=`
`.concat(S," > ").concat(ar(v))}),new $c(l,o||[])}var tc="Promise",rc="rejected";function ns(i,o){return jl(i,function(l){return o?o({status:"fulfilled",rejected:!1,value:l}):l},function(l){return o?o({status:rc,rejected:!0,reason:l}):l})}function jl(i,o,l,v){var S=i;try{if(tr(i))(o||l)&&(S=i.then(o,l));else try{o&&(S=o(i))}catch(I){if(l)S=l(I);else throw I}}finally{v&&Dm(S,v)}return S}function Dm(i,o){var l=i;return o&&(tr(i)?i.finally?l=i.finally(o):l=i.then(function(v){return o(),v},function(v){throw o(),v}):o()),l}var ep=["pending","resolving","resolved",rc],Yl="dispatchEvent",nc;function Gp(i){var o;return i&&i.createEvent&&(o=i.createEvent("Event")),!!o&&o.initEvent}function jv(i,o,l,v){var S=$f();!nc&&(nc=Ba(!!Gt(Gp,[S]).v));var I=nc.v?S.createEvent("Event"):v?new Event(o):{};if(l&&l(I),nc.v&&I.initEvent(o,!1,!0),I&&i[Yl])i[Yl](I);else{var A=i["on"+o];if(A)A(I);else{var L=Ir("console");L&&(L.error||L.log)(o,ar(I))}}}var ac="unhandledRejection",Yv=ac.toLowerCase(),$l=10,tp;function eo(i){return rt(i)?i.toString():ar(i)}function Hp(i,o,l){var v=Nl(arguments,3),S=0,I=!1,A,L=[],Y=!1,B=null,X;function le(He,ct){try{Y=!0,B&&B.cancel(),B=null;var Sr=i(function(Zr,Xr){L.push(function(){try{var _n=S===2?He:ct,Qt=nt(_n)?A:rt(_n)?_n(A):_n;tr(Qt)?Qt.then(Zr,Xr):_n?Zr(Qt):S===3?Xr(Qt):Zr(Qt)}catch(Yt){Xr(Yt)}}),I&&xe()},v);return Sr}finally{}}function fe(He){return le(void 0,He)}function de(He){var ct=He,Sr=He;return rt(He)&&(ct=function(Zr){return He&&He(),Zr},Sr=function(Zr){throw He&&He(),Zr}),le(ct,Sr)}function ue(){return ep[S]}function xe(){if(L.length>0){var He=L.slice();L=[],Y=!0,B&&B.cancel(),B=null,o(He)}}function he(He,ct){return function(Sr){if(S===ct){if(He===2&&tr(Sr)){S=1,Sr.then(he(2,1),he(3,1));return}S=He,I=!0,A=Sr,xe(),!Y&&He===3&&!B&&(B=du(ke,$l))}}}function ke(){if(!Y)if(Y=!0,qf())process.emit(ac,A,X);else{var He=zo()||ii();!tp&&(tp=Ba(Gt(Ir,[tc+"RejectionEvent"]).v)),jv(He,Yv,function(ct){return Hr(ct,"promise",{g:function(){return X}}),ct.reason=A,ct},!!tp.v)}}X={then:le,catch:fe,finally:de},qi(X,"state",{get:ue}),oi()&&(X[si(11)]="IPromise");function Me(){return"IPromise "+ue()+(I?" - "+eo(A):"")}return X.toString=Me,function(){rt(l)||$r(tc+": executor is not a function - "+eo(l));var ct=he(3,0);try{l.call(X,he(2,0),ct)}catch(Sr){ct(Sr)}}(),X}function Cm(i){return function(o){var l=Nl(arguments,1);return i(function(v,S){try{var I=[],A=1;zf(o,function(L,Y){L&&(A++,jl(L,function(B){I[Y]=B,--A===0&&v(I)},S))}),A--,A===0&&v(I)}catch(L){S(L)}},l)}}function nd(i){return Ba(function(o){var l=Nl(arguments,1);return i(function(v,S){var I=[],A=1;function L(Y,B){A++,ns(Y,function(X){X.rejected?I[B]={status:rc,reason:X.reason}:I[B]={status:"fulfilled",value:X.value},--A===0&&v(I)})}try{at(o)?Pt(o,L):hr(o)?zf(o,L):$r("Input is not an iterable"),A--,A===0&&v(I)}catch(Y){S(Y)}},l)})}function Vp(i){Pt(i,function(o){try{o()}catch{}})}function rp(i){var o=Wt(i)?i:0;return function(l){du(function(){Vp(l)},o)}}function qc(i,o){return Hp(qc,rp(o),i,o)}var ad;function ic(i,o){!ad&&(ad=Ba(Gt(Ir,[tc]).v||null));var l=ad.v;if(!l)return qc(i);rt(i)||$r(tc+": executor is not a function - "+ar(i));var v=0;function S(){return ep[v]}var I=new l(function(A,L){function Y(X){v=2,A(X)}function B(X){v=3,L(X)}i(Y,B)});return qi(I,"state",{get:S}),I}var Fs;function Bc(i){return Hp(Bc,Vp,i)}function $v(i,o){return!Fs&&(Fs=nd(Bc)),Fs.v(i,o)}var np;function zc(i,o){return!np&&(np=Ba(ic)),np.v.call(this,i,o)}var ap=Cm(zc),Us=void 0,Br="",oc="channels",la="core",ip="createPerfMgr",id="disabled",Gc="extensionConfig",sc="extensions",Za="processTelemetry",od="priority",Zn="eventsSent",vr="eventsDiscarded",js="eventsSendRequest",hn="perfEvent",as="offlineEventsStored",uc="offlineBatchSent",cc="offlineBatchDrop",Ys="getPerfMgr",to="domain",ql="path",Kp="Not dynamic - ",Bl=/-([a-z])/g,Wp=/([^\w\d_$])/g,zl=/^(\d+[\w\d_$])/;function Hc(i){return!Ve(i)}function op(i){var o=i;return o&&Ft(o)&&(o=o[Oi](Bl,function(l,v){return v.toUpperCase()}),o=o[Oi](Wp,"_"),o=o[Oi](zl,function(l,v){return"_"+v})),o}function Hn(i,o){return i&&o?$u(i,o)!==-1:!1}function Vc(i){return i&&i.toISOString()||""}function fa(i){return Ht(i)?i[An]:Br}function Su(i,o,l,v,S){var I=l;return i&&(I=i[o],I!==l&&(!S||S(I))&&(!v||v(l))&&(I=l,i[o]=I)),I}function sp(i,o,l){var v;return i?(v=i[o],!v&&Ve(v)&&(v=nt(l)?{}:l,i[o]=v)):v=nt(l)?{}:l,v}function sd(i,o){var l=null,v=null;return rt(i)?l=i:v=i,function(){var S=arguments;if(l&&(v=l()),v)return v[o][Ka](v,S)}}function da(i,o,l,v,S){i&&o&&l&&(S!==!1||nt(i[o]))&&(i[o]=sd(l,v))}function ud(i,o,l,v){return i&&o&&yn(i)&&at(l)&&Pt(l,function(S){Ft(S)&&da(i,S,o,S,v)}),i}function up(i){return function(){function o(){var l=this;i&&Ct(i,function(v,S){l[v]=S})}return o}()}function $s(i){return i&&Dc&&(i=Jd(Dc({},i))),i}function wt(i,o,l,v,S,I){var A=arguments,L=A[0]||{},Y=A[cr],B=!1,X=1;for(Y>0&&$i(L)&&(B=L,L=A[X]||{},X++),yn(L)||(L={});X<Y;X++){var le=A[X],fe=at(le),de=yn(le);for(var ue in le){var xe=fe&&ue in le||de&&je(le,ue);if(xe){var he=le[ue],ke=void 0;if(B&&he&&((ke=at(he))||Ha(he))){var Me=L[ue];ke?at(Me)||(Me=[]):Ha(Me)||(Me={}),he=wt(B,Me,he)}he!==void 0&&(L[ue]=he)}}}return L}function is(i){try{return i.responseText}catch{}return null}function os(i,o){return i?"XDomainRequest,Response:"+is(i)||"":o}function vi(i,o){return i?"XMLHttpRequest,Status:"+i[ki]+",Response:"+is(i)||i.response||"":o}function Gl(i,o){return o&&(Wt(o)?i=[o].concat(i):at(o)&&(i=o.concat(i))),i}var Kc="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",ss="withCredentials",Mi="timeout";function Wc(i,o,l,v,S,I){v===void 0&&(v=!1),S===void 0&&(S=!1);function A(Y,B,X){try{Y[B]=X}catch{}}var L=new XMLHttpRequest;return v&&A(L,Kc,v),l&&A(L,ss,l),L.open(i,o,!S),l&&A(L,ss,l),!S&&I&&A(L,Mi,I),L}function cd(i){var o={};if(Ft(i)){var l=Wn(i)[yu](/[\r\n]+/);Pt(l,function(v){if(v){var S=v.indexOf(": ");if(S!==-1){var I=Wn(v.substring(0,S))[mu](),A=Wn(v.substring(S+1));o[I]=A}else o[Wn(v)]=1}})}return o}function qs(i,o,l){if(!i[l]&&o&&o[ec]){var v=o[ec](l);v&&(i[l]=Wn(v))}return i}var Hl="kill-duration",Jc="kill-duration-seconds",Vl="time-delta-millis";function cp(i,o){var l={};return i[es]?l=cd(i[es]()):o&&(l=qs(l,i,Vl),l=qs(l,i,Hl),l=qs(l,i,Jc)),l}var lp="documentMode",Jp="location",xm="console",us="JSON",Bs="crypto",cs="msCrypto",Li="msie",zs="trident/",wu="XMLHttpRequest",mi=null,Zc=null,qv=!1,lc=null,Zp=null;function Kl(i,o){var l=!1;if(i){try{if(l=o in i,!l){var v=i[Ml];v&&(l=o in v)}}catch{}if(!l)try{var S=new i;l=!nt(S[o])}catch{}}return l}function Xc(i){if(i&&qv){var o=Ir("__mockLocation");if(o)return o}return typeof location===Wd&&location?location:Ir(Jp)}function Wl(){return typeof console!==kl?console:Ir(xm)}function Gs(){return!!(typeof JSON===Wd&&JSON||Ir(us)!==null)}function Fi(){return Gs()?JSON||Ir(us):null}function Qc(){return Ir(Bs)}function Jl(){return Ir(cs)}function ld(){var i=Go();if(i&&(i[ca]!==Zc||mi===null)){Zc=i[ca];var o=(Zc||Br)[mu]();mi=Hn(o,Li)||Hn(o,zs)}return mi}function pa(i){if(i===void 0&&(i=null),!i){var o=Go()||{};i=o?(o.userAgent||Br)[mu]():Br}var l=(i||Br)[mu]();if(Hn(l,Li)){var v=$f()||{};return Math.max(parseInt(l[yu](Li)[1]),v[lp]||0)}else if(Hn(l,zs)){var S=parseInt(l[yu](zs)[1]);if(S)return S+4}return null}function Hs(i){return(Zp===null||i===!1)&&(Zp=xc()&&!!Go().sendBeacon),Zp}function va(i){var o=!1;try{o=!!Ir("fetch");var l=Ir("Request");o&&i&&l&&(o=Kl(l,"keepalive"))}catch{}return o}function fd(){return lc===null&&(lc=typeof XDomainRequest!==kl,lc&&bu()&&(lc=lc&&!Kl(Ir(wu),"withCredentials"))),lc}function bu(){var i=!1;try{var o=Ir(wu);i=!!o}catch{}return i}var dd=4294967296,Ra=4294967295,ma=123456789,Xp=987654321,Zl=!1,Xl=ma,Eu=Xp;function Bv(i){i<0&&(i>>>=0),Xl=ma+i&Ra,Eu=Xp-i&Ra,Zl=!0}function zv(){try{var i=cu()&2147483647;Bv((Math.random()*dd^i)+i)}catch{}}function Ql(i){var o=0,l=Qc()||Jl();return l&&l.getRandomValues&&(o=l.getRandomValues(new Uint32Array(1))[0]&Ra),o===0&&ld()&&(Zl||zv(),o=Qp()&Ra),o===0&&(o=Math.floor(dd*Math.random()|0)),i||(o>>>=0),o}function Qp(i){Eu=36969*(Eu&65535)+(Eu>>16)&Ra,Xl=18e3*(Xl&65535)+(Xl>>16)&Ra;var o=(Eu<<16)+(Xl&65535)>>>0&Ra|0;return i||(o>>>=0),o}function ef(i){i===void 0&&(i=22);for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=Ql()>>>0,v=0,S=Br;S[cr]<i;)v++,S+=o.charAt(l&63),l>>>=6,v===5&&(l=(Ql()<<2&4294967295|l&3)>>>0,v=0);return S}var ev="3.3.4",Gv="."+ef(6),tf=0;function Hv(i){return i[Ls]===1||i[Ls]===9||!+i[Ls]}function Tu(i,o){var l=o[i.id];if(!l){l={};try{Hv(o)&&Hr(o,i.id,{e:!1,v:l})}catch{}}return l}function el(i,o){return o===void 0&&(o=!1),op(i+tf+++(o?"."+ev:Br)+Gv)}function fp(i){var o={id:el("_aiData-"+(i||Br)+"."+ev),accept:function(l){return Hv(l)},get:function(l,v,S,I){var A=l[o.id];return A?A[op(v)]:(I&&(A=Tu(o,l),A[op(v)]=S),S)},kill:function(l,v){if(l&&l[v])try{delete l[v]}catch{}}};return o}function ls(i){return i&&yn(i)&&(i.isVal||i.fb||je(i,"v")||je(i,"mrg")||je(i,"ref")||i.set)}function pd(i,o,l){var v,S=l.dfVal||zn;if(o&&l.fb){var I=l.fb;at(I)||(I=[I]);for(var A=0;A<I[cr];A++){var L=I[A],Y=o[L];if(S(Y)?v=Y:i&&(Y=i.cfg[L],S(Y)&&(v=Y),i.set(i.cfg,ga(L),Y)),S(v))break}}return!S(v)&&S(l.v)&&(v=l.v),v}function rf(i,o,l){var v=l;if(l&&ls(l)&&(v=pd(i,o,l)),v){ls(v)&&(v=rf(i,o,v));var S;at(v)?(S=[],S[cr]=v[cr]):Ha(v)&&(S={}),S&&(Ct(v,function(I,A){A&&ls(A)&&(A=rf(i,o,A)),S[I]=A}),v=S)}return v}function Po(i,o,l,v){var S,I,A,L=v,Y,B,X,le;ls(L)?(S=L.isVal,I=L.set,X=L[wo],le=L[As],Y=L.mrg,B=L.ref,!B&&nt(B)&&(B=!!Y),A=pd(i,o,L)):A=v,le&&i[As](o,l);var fe,de=!0,ue=o[l];(ue||!Ve(ue))&&(fe=ue,de=!1,S&&fe!==A&&!S(fe)&&(fe=A,de=!0),I&&(fe=I(fe,A,o),de=fe===A)),de?A?fe=rf(i,o,A):fe=A:(Ha(fe)||at(A))&&Y&&A&&(Ha(A)||at(A))&&Ct(A,function(xe,he){Po(i,fe,xe,he)}),i.set(o,l,fe),B&&i.ref(o,l),X&&i[wo](o,l)}var tl=Gi("[[ai_dynCfg_1]]"),Vv=Gi("[[ai_blkDynCfg_1]]"),rl=Gi("[[ai_frcDynCfg_1]]");function Pm(i){if(i){var o;if(at(i)?(o=[],o[cr]=i[cr]):Ha(i)&&(o={}),o)return Ct(i,function(l,v){o[l]=Pm(v)}),o}return i}function nf(i){if(i){var o=i[tl]||i;if(o.cfg&&(o.cfg===i||o.cfg[tl]===o))return o}return null}function Kv(i){if(i&&(Ha(i)||at(i)))try{i[Vv]=!0}catch{}return i}function tv(i,o,l){var v=!1;return l&&!i[o.blkVal]&&(v=l[rl],!v&&!l[Vv]&&(v=Ha(l)||at(l))),v}function Iu(i){$r("InvalidAccess:"+i)}var Nu=["push","pop","shift","unshift","splice"],nl=function(i,o,l,v){i&&i[Zf](3,108,"".concat(l," [").concat(o,"] failed - ")+ar(v))};function fs(i,o,l){at(o)&&Pt(Nu,function(v){var S=o[v];o[v]=function(){for(var I=[],A=0;A<arguments.length;A++)I[A]=arguments[A];var L=S[Ka](this,I);return of(i,o,l,"Patching"),L}})}function Vs(i,o){var l=qt(i,o);return l&&l.get}function af(i,o,l,v){var S={n:l,h:[],trk:function(B){B&&B.fn&&(ui(S.h,B)===-1&&S.h[Fr](B),i.trk(B,S))},clr:function(B){var X=ui(S.h,B);X!==-1&&S.h[pt](X,1)}},I=!0,A=!1;function L(){I&&(A=A||tv(L,i,v),v&&!v[tl]&&A&&(v=of(i,v,l,"Converting")),I=!1);var B=i.act;return B&&S.trk(B),v}L[i.prop]={chng:function(){i.add(S)}};function Y(B){if(v!==B){L[i.ro]&&!i.upd&&Iu("["+l+"] is read-only:"+ar(o)),I&&(A=A||tv(L,i,v),I=!1);var X=A&&L[i.rf];if(A)if(X){Ct(v,function(fe){v[fe]=B?B[fe]:Us});try{Ct(B,function(fe,de){vd(i,v,fe,de)}),B=v}catch(fe){nl((i.hdlr||{})[un],l,"Assigning",fe),A=!1}}else v&&v[tl]&&Ct(v,function(fe){var de=Vs(v,fe);if(de){var ue=de[i.prop];ue&&ue.chng()}});if(B!==v){var le=B&&tv(L,i,B);!X&&le&&(B=of(i,B,l,"Converting")),v=B,A=le}i.add(S)}}Hr(o,S.n,{g:L,s:Y})}function vd(i,o,l,v){if(o){var S=Vs(o,l),I=S&&!!S[i.prop];I?o[l]=v:af(i,o,l,v)}return o}function md(i,o,l,v){if(o){var S=Vs(o,l),I=S&&!!S[i.prop],A=v&&v[0],L=v&&v[1],Y=v&&v[2];if(!I){if(Y)try{Kv(o)}catch(B){nl((i.hdlr||{})[un],l,"Blocking",B)}try{vd(i,o,l,o[l]),S=Vs(o,l)}catch(B){nl((i.hdlr||{})[un],l,"State",B)}}A&&(S[i.rf]=A),L&&(S[i.ro]=L),Y&&(S[i.blkVal]=!0)}return o}function of(i,o,l,v){try{Ct(o,function(S,I){vd(i,o,S,I)}),o[tl]||(qi(o,tl,{get:function(){return i[Wu]}}),fs(i,o,l))}catch(S){nl((i.hdlr||{})[un],l,v,S)}return o}var hi="[[ai_",sf="]]";function Wv(i){var o,l=Il(hi+"get"+i.uid+sf),v=Il(hi+"ro"+i.uid+sf),S=Il(hi+"rf"+i.uid+sf),I=Il(hi+"blkVal"+i.uid+sf),A=Il(hi+"dtl"+i.uid+sf),L=null,Y=null,B;function X(ue,xe){var he=B.act;try{B.act=ue,ue&&ue[A]&&(Pt(ue[A],function(Me){Me.clr(ue)}),ue[A]=[]),xe({cfg:i.cfg,set:i.set.bind(i),setDf:i[Pi].bind(i),ref:i.ref.bind(i),rdOnly:i[wo].bind(i)})}catch(Me){var ke=i[un];throw ke&&ke[Zf](1,107,ar(Me)),Me}finally{B.act=he||null}}function le(){if(L){var ue=L;L=null,Y&&Y[bo](),Y=null;var xe=[];if(Pt(ue,function(he){if(he&&(he[A]&&(Pt(he[A],function(ke){ke.clr(he)}),he[A]=null),he.fn))try{X(he,he.fn)}catch(ke){xe[Fr](ke)}}),L)try{le()}catch(he){xe[Fr](he)}xe[cr]>0&&Uv("Watcher error(s): ",xe)}}function fe(ue){if(ue&&ue.h[cr]>0){L||(L=[]),Y||(Y=du(function(){Y=null,le()},0));for(var xe=0;xe<ue.h[cr];xe++){var he=ue.h[xe];he&&ui(L,he)===-1&&L[Fr](he)}}}function de(ue,xe){if(ue){var he=ue[A]=ue[A]||[];ui(he,xe)===-1&&he[Fr](xe)}}return B=(o={prop:l,ro:v,rf:S},o[As]=I,o[Wu]=i,o.add=fe,o[Zo]=le,o.use=X,o.trk=de,o),B}function Am(i,o){var l={fn:o,rm:function(){l.fn=null,i=null,o=null}};return Hr(l,"toJSON",{v:function(){return"WatcherHandler"+(l.fn?"":"[X]")}}),i.use(l,o),l}function al(i,o,l){var v,S=nf(o);if(S)return S;var I=el("dyncfg",!0),A=o&&l!==!1?o:Pm(o),L;function Y(){L[Zo]()}function B(ke,Me,He){try{ke=vd(L,ke,Me,He)}catch(ct){nl(i,Me,"Setting value",ct)}return ke[Me]}function X(ke){return Am(L,ke)}function le(ke,Me){L.use(null,function(He){var ct=L.upd;try{nt(Me)||(L.upd=Me),ke(He)}finally{L.upd=ct}})}function fe(ke,Me){var He;return md(L,ke,Me,(He={},He[0]=!0,He))[Me]}function de(ke,Me){var He;return md(L,ke,Me,(He={},He[1]=!0,He))[Me]}function ue(ke,Me){var He;return md(L,ke,Me,(He={},He[2]=!0,He))[Me]}function xe(ke,Me){return Me&&Ct(Me,function(He,ct){Po(he,ke,He,ct)}),ke}var he=(v={uid:null,cfg:A},v[un]=i,v[Zo]=Y,v.set=B,v[Pi]=xe,v[hu]=X,v.ref=fe,v[wo]=de,v[As]=ue,v._block=le,v);return Hr(he,"uid",{c:!1,e:!1,w:!1,v:I}),L=Wv(he),of(L,A,"config","Creating"),he}function Rm(i,o){i?(i[xi](o),i[Zf](2,108,o)):Iu(o)}function Ao(i,o,l,v){var S=al(l,i||{},v);return o&&S[Pi](S.cfg,o),S}function Du(i,o,l){var v=i[tl]||i;return v.cfg&&(v.cfg===i||v.cfg[tl]===v)?v[hu](o):(Rm(l,Kp+ar(i)),Ao(i,null,l)[hu](o))}function il(i,o){if(i&&i[Os])return i[Os](o)}function Jv(i,o,l){var v;return l||(v=zc(function(S){l=S})),i&&qp(i)>0?ns(il(i[0],o),function(){Jv(Nl(i,1),o,l)}):l(),v}var dp=500,Zv="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function rv(i,o,l){return!i&&Ve(i)?o:$i(i)?i:ga(i)[mu]()==="true"}function hd(i){return{mrg:!0,v:i}}function ol(i,o,l){return{fb:l,isVal:i,v:o}}function ro(i,o){return{fb:o,set:rv,v:!!i}}var _d=[Zn,vr,js,hn],sl=null,Oa;function no(i,o){return function(){var l=arguments,v=Xv(o);if(v){var S=v.listener;S&&S[i]&&S[i][Ka](S,l)}}}function uf(){var i=Ir("Microsoft");return i&&(sl=i.ApplicationInsights),sl}function Xv(i){var o=sl;return!o&&i.disableDbgExt!==!0&&(o=sl||uf()),o?o.ChromeDbgExt:null}function Qv(i){if(!Oa){Oa={};for(var o=0;o<_d[cr];o++)Oa[_d[o]]=no(_d[o],i)}return Oa}var ha,ul="warnToConsole",cf="AI (Internal): ",Om="AI: ",em="AITR_",lf={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},ka=(ha={},ha[0]=null,ha[1]="errorToConsole",ha[2]=ul,ha[3]="debugToConsole",ha);function pp(i){return i?'"'+i[Oi](/\"/g,Br)+'"':Br}function fc(i,o){var l=Wl();if(l){var v="log";l[i]&&(v=i),rt(l[v])&&l[v](o)}}var cl=function(){function i(o,l,v,S){v===void 0&&(v=!1);var I=this;I[ed]=o,I[Xu]=(v?Om:cf)+o;var A=Br;Gs()&&(A=Fi().stringify(S));var L=(l?" message:"+pp(l):Br)+(S?" props:"+pp(A):Br);I[Xu]+=L}return i.dataType="MessageData",i}();function Ks(i,o){return(i||{})[un]||new ff(o)}var ff=function(){function i(o){this.identifier="DiagnosticLogger",this.queue=[];var l=0,v={},S,I,A,L,Y;Pa(i,this,function(B){Y=le(o||{}),B.consoleLoggingLevel=function(){return S},B[Zf]=function(ue,xe,he,ke,Me){Me===void 0&&(Me=!1);var He=new cl(xe,he,Me,ke);if(L)throw ar(He);var ct=ka[ue]||ul;if(nt(He[Xu]))de("throw"+(ue===1?"Critical":"Warning"),He);else{if(Me){var Sr=+He[ed];!v[Sr]&&S>=ue&&(B[ct](He[Xu]),v[Sr]=!0)}else S>=ue&&B[ct](He[Xu]);X(ue,He)}},B.debugToConsole=function(ue){fc("debug",ue),de("warning",ue)},B[xi]=function(ue){fc("warn",ue),de("warning",ue)},B.errorToConsole=function(ue){fc("error",ue),de("error",ue)},B.resetInternalMessageCount=function(){l=0,v={}},B[Qu]=X,B[Os]=function(ue){Y&&Y.rm(),Y=null};function X(ue,xe){if(!fe()){var he=!0,ke=em+xe[ed];if(v[ke]?he=!1:v[ke]=!0,he&&(ue<=I&&(B.queue[Fr](xe),l++,de(ue===1?"error":"warn",xe)),l===A)){var Me="Internal events throttle limit per PageView reached for this app.",He=new cl(23,Me,!1);B.queue[Fr](He),ue===1?B.errorToConsole(Me):B[xi](Me)}}}function le(ue){return Du(Ao(ue,lf,B).cfg,function(xe){var he=xe.cfg;S=he[Zu],I=he.loggingLevelTelemetry,A=he.maxMessageLimit,L=he.enableDebug})}function fe(){return l>=A}function de(ue,xe){var he=Xv(o||{});he&&he[di]&&he[di](ue,xe)}})}return i.__ieDyn=1,i}();function vp(i){return i||new ff}function St(i,o,l,v,S,I){I===void 0&&(I=!1),vp(i)[Zf](o,l,v,S,I)}function Cu(i,o){vp(i)[xi](o)}var Ro,df,km="toGMTString",pf="toUTCString",gd="cookie",Oo="expires",tm="isCookieUseDisabled",mp="disableCookiesUsage",hp="_ckMgr",vf=null,dc=null,nv=null,Gr,Ws={},av={},xu=(Ro={cookieCfg:hd((df={},df[to]={fb:"cookieDomain",dfVal:Hc},df.path={fb:"cookiePath",dfVal:Hc},df.enabled=Us,df.ignoreCookies=Us,df.blockedCookies=Us,df)),cookieDomain:Us,cookiePath:Us},Ro[mp]=Us,Ro);function ao(){!Gr&&(Gr=su(function(){return $f()}))}function Fn(i){return i?i.isEnabled():!0}function yd(i,o){return o&&i&&at(i.ignoreCookies)?ui(i.ignoreCookies,o)!==-1:!1}function pc(i,o){return o&&i&&at(i.blockedCookies)&&ui(i.blockedCookies,o)!==-1?!0:yd(i,o)}function ll(i,o){var l=o[Ju];if(Ve(l)){var v=void 0;nt(i[tm])||(v=!i[tm]),nt(i[mp])||(v=!i[mp]),l=v}return l}function ds(i,o){var l,v,S,I,A,L,Y,B,X;i=Ao(i||av,null,o).cfg,A=Du(i,function(fe){fe[Pi](fe.cfg,xu),v=fe.ref(fe.cfg,"cookieCfg"),S=v[ql]||"/",I=v[to],L=ll(i,v)!==!1,Y=v.getCookie||iv,B=v.setCookie||ps,X=v.delCookie||ps},o);var le=(l={isEnabled:function(){var fe=ll(i,v)!==!1&&L&&io(o),de=av[hp];return fe&&de&&le!==de&&(fe=Fn(de)),fe},setEnabled:function(fe){L=fe!==!1,v[Ju]=fe},set:function(fe,de,ue,xe,he){var ke=!1;if(Fn(le)&&!pc(v,fe)){var Me={},He=Wn(de||Br),ct=$u(He,";");if(ct!==-1&&(He=Wn(pn(de,ct)),Me=ko(Lr(de,ct+1))),Su(Me,to,xe||I,Yr,nt),!Ve(ue)){var Sr=ld();if(nt(Me[Oo])){var Zr=cu(),Xr=Zr+ue*1e3;if(Xr>0){var _n=new Date;_n.setTime(Xr),Su(Me,Oo,Sd(_n,Sr?km:pf)||Sd(_n,Sr?km:pf)||Br,Yr)}}Sr||Su(Me,"max-age",Br+ue,null,nt)}var Qt=Xc();Qt&&Qt[gu]==="https:"&&(Su(Me,"secure",null,null,nt),dc===null&&(dc=!ov((Go()||{})[ca])),dc&&Su(Me,"SameSite","None",null,nt)),Su(Me,ql,he||S,null,nt),B(fe,_p(He,Me)),ke=!0}return ke},get:function(fe){var de=Br;return Fn(le)&&!yd(v,fe)&&(de=Y(fe)),de},del:function(fe,de){var ue=!1;return Fn(le)&&(ue=le.purge(fe,de)),ue},purge:function(fe,de){var ue,xe=!1;if(io(o)){var he=(ue={},ue[ql]=de||"/",ue[Oo]="Thu, 01 Jan 1970 00:00:01 GMT",ue);ld()||(he["max-age"]="0"),X(fe,_p(Br,he)),xe=!0}return xe}},l[Os]=function(fe){A&&A.rm(),A=null},l);return le[hp]=le,le}function io(i){if(vf===null){vf=!1,!Gr&&ao();try{var o=Gr.v||{};vf=o[gd]!==void 0}catch(l){St(i,2,68,"Cannot access document.cookie - "+fa(l),{exception:ar(l)})}}return vf}function ko(i){var o={};if(i&&i[cr]){var l=Wn(i)[yu](";");Pt(l,function(v){if(v=Wn(v||Br),v){var S=$u(v,"=");S===-1?o[v]=null:o[Wn(pn(v,S))]=Wn(Lr(v,S+1))}})}return o}function Sd(i,o){return rt(i[o])?i[o]():null}function _p(i,o){var l=i||Br;return Ct(o,function(v,S){l+="; "+v+(Ve(S)?Br:"="+S)}),l}function iv(i){var o=Br;if(!Gr&&ao(),Gr.v){var l=Gr.v[gd]||Br;nv!==l&&(Ws=ko(l),nv=l),o=Wn(Ws[i]||Br)}return o}function ps(i,o){!Gr&&ao(),Gr.v&&(Gr.v[gd]=i+"="+o)}function ov(i){return Ft(i)?!!(Hn(i,"CPU iPhone OS 12")||Hn(i,"iPad; CPU OS 12")||Hn(i,"Macintosh; Intel Mac OS X 10_14")&&Hn(i,"Version/")&&Hn(i,"Safari")||Hn(i,"Macintosh; Intel Mac OS X 10_14")&&Ni(i,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Hn(i,"Chrome/5")||Hn(i,"Chrome/6")||Hn(i,"UnrealEngine")&&!Hn(i,"Chrome")||Hn(i,"UCBrowser/12")||Hn(i,"UCBrowser/11")):!1}var wd={perfEvtsSendAll:!1};function sv(i){i.h=null;var o=i.cb;i.cb=[],Pt(o,function(l){Gt(l.fn,[l.arg])})}function vs(i,o,l,v){Pt(i,function(S){S&&S[o]&&(l?(l.cb[Fr]({fn:v,arg:S}),l.h=l.h||du(sv,0,l)):Gt(v,[S]))})}var Mm=function(){function i(o){this.listeners=[];var l,v,S=[],I={h:null,cb:[]},A=Ao(o,wd);v=A[hu](function(L){l=!!L.cfg.perfEvtsSendAll}),Pa(i,this,function(L){Hr(L,"listeners",{g:function(){return S}}),L[Ai]=function(Y){S[Fr](Y)},L[_u]=function(Y){for(var B=ui(S,Y);B>-1;)S[pt](B,1),B=ui(S,Y)},L[Zn]=function(Y){vs(S,Zn,I,function(B){B[Zn](Y)})},L[vr]=function(Y,B){vs(S,vr,I,function(X){X[vr](Y,B)})},L[js]=function(Y,B){vs(S,js,B?I:null,function(X){X[js](Y,B)})},L[hn]=function(Y){Y&&(l||!Y[Xd]())&&vs(S,hn,null,function(B){Y[ks]?du(function(){return B[hn](Y)},0):B[hn](Y)})},L[as]=function(Y){Y&&Y[cr]&&vs(S,as,I,function(B){B[as](Y)})},L[uc]=function(Y){Y&&Y[pi]&&vs(S,uc,I,function(B){B[uc](Y)})},L[cc]=function(Y,B){if(Y>0){var X=B||0;vs(S,cc,I,function(le){le[cc](Y,X)})}},L[Os]=function(Y){var B=function(){v&&v.rm(),v=null,S=[],I.h&&I.h[bo](),I.h=null,I.cb=[]},X;if(vs(S,"unload",null,function(le){var fe=le[Os](Y);fe&&(X||(X=[]),X[Fr](fe))}),X)return zc(function(le){return ns(ap(X),function(){B(),le()})});B()}})}return i.__ieDyn=1,i}(),Pu="ctx",uv="ParentContextKey",f="ChildrenContextKey",m=null,y=function(){function i(o,l,v){var S=this;if(S.start=cu(),S[An]=o,S[ks]=v,S[Xd]=function(){return!1},rt(l)){var I;Hr(S,"payload",{g:function(){return!I&&rt(l)&&(I=l(),l=null),I}})}S[Yc]=function(A){return A?A===i[uv]||A===i[f]?S[A]:(S[Pu]||{})[A]:null},S[ba]=function(A,L){if(A)if(A===i[uv])S[A]||(S[Xd]=function(){return!0}),S[A]=L;else if(A===i[f])S[A]=L;else{var Y=S[Pu]=S[Pu]||{};Y[A]=L}},S[td]=function(){var A=0,L=S[Yc](i[f]);if(at(L))for(var Y=0;Y<L[cr];Y++){var B=L[Y];B&&(A+=B[Xo])}S[Xo]=cu()-S.start,S.exTime=S[Xo]-A,S[td]=function(){}}}return i.ParentContextKey="parent",i.ChildrenContextKey="childEvts",i}(),N=function(){function i(o){this.ctx={},Pa(i,this,function(l){l.create=function(v,S,I){return new y(v,S,I)},l.fire=function(v){v&&(v[td](),o&&rt(o[hn])&&o[hn](v))},l[ba]=function(v,S){if(v){var I=l[Pu]=l[Pu]||{};I[v]=S}},l[Yc]=function(v){return(l[Pu]||{})[v]}})}return i.__ieDyn=1,i}(),U="CoreUtils.doPerf";function V(i,o,l,v,S){if(i){var I=i;if(I[Ys]&&(I=I[Ys]()),I){var A=void 0,L=I[Yc](U);try{if(A=I.create(o(),v,S),A){if(L&&A[ba]&&(A[ba](y[uv],L),L[Yc]&&L[ba])){var Y=L[Yc](y[f]);Y||(Y=[],L[ba](y[f],Y)),Y[Fr](A)}return I[ba](U,A),l(A)}}catch(B){A&&A[ba]&&A[ba]("exception",B)}finally{A&&I.fire(A),I[ba](U,L)}}}return l()}function J(){return m}var ae="00000000000000000000000000000000",ne="0000000000000000";function ge(i,o,l){return i&&i[cr]===o&&i!==l?!!i.match(/^[\da-f]*$/i):!1}function tt(i){return ge(i,32,ae)}function bt(i){return ge(i,16,ne)}var Jt=fp("plugin");function ot(i){return Jt.get(i,"state",{},!0)}function lt(i,o){for(var l=[],v=null,S=i[Ri](),I;S;){var A=S[Io]();if(A){v&&v[jc]&&A[Za]&&v[jc](A),I=ot(A);var L=!!I[qr];A[qr]&&(L=A[qr]()),L||l[Fr](A),v=A,S=S[Ri]()}}Pt(l,function(Y){var B=i[la]();Y[Rs](i.getCfg(),B,o,i[Ri]()),I=ot(Y),!Y[la]&&!I[la]&&(I[la]=B),I[qr]=!0,delete I[Ln]})}function ir(i){return i.sort(function(o,l){var v=0;if(l){var S=l[Za];o[Za]?v=S?o[od]-l[od]:1:S&&(v=-1)}else v=o?1:-1;return v})}function Ut(i){var o={};return{getName:function(){return o[An]},setName:function(l){i&&i.setName(l),o[An]=l},getTraceId:function(){return o[Ul]},setTraceId:function(l){i&&i.setTraceId(l),tt(l)&&(o[Ul]=l)},getSpanId:function(){return o[xo]},setSpanId:function(l){i&&i.setSpanId(l),bt(l)&&(o[xo]=l)},getTraceFlags:function(){return o[Ja]},setTraceFlags:function(l){i&&i.setTraceFlags(l),o[Ja]=l}}}var gr="TelemetryPluginChain",br="_hasRun",At="_getTelCtx",En=0;function vc(i,o,l){for(;i;){if(i[Io]()===l)return i;i=i[Ri]()}return hf([l],o.config||{},o)}function Js(i,o,l,v){var S=null,I=[];o||(o=Ao({},null,l[un])),v!==null&&(S=v?vc(i,l,v):i);var A={_next:Y,ctx:{core:function(){return l},diagLog:function(){return Ks(l,o.cfg)},getCfg:function(){return o.cfg},getExtCfg:X,getConfig:le,hasNext:function(){return!!S},getNext:function(){return S},setNext:function(de){S=de},iterate:fe,onComplete:L}};function L(de,ue){for(var xe=[],he=2;he<arguments.length;he++)xe[he-2]=arguments[he];de&&I[Fr]({func:de,self:nt(ue)?A.ctx:ue,args:xe})}function Y(){var de=S;if(S=de?de[Ri]():null,!de){var ue=I;ue&&ue[cr]>0&&(Pt(ue,function(xe){try{xe.func.call(xe.self,xe.args)}catch(he){St(l[un],2,73,"Unexpected Exception during onComplete - "+ar(he))}}),I=[])}return de}function B(de,ue){var xe=null,he=o.cfg;if(he&&de){var ke=he[Gc];!ke&&ue&&(ke={}),he[Gc]=ke,ke=o.ref(he,Gc),ke&&(xe=ke[de],!xe&&ue&&(xe={}),ke[de]=xe,xe=o.ref(ke,de))}return xe}function X(de,ue){var xe=B(de,!0);return ue&&Ct(ue,function(he,ke){if(Ve(xe[he])){var Me=o.cfg[he];(Me||!Ve(Me))&&(xe[he]=Me)}Po(o,xe,he,ke)}),o[Pi](xe,ue)}function le(de,ue,xe){xe===void 0&&(xe=!1);var he,ke=B(de,!1),Me=o.cfg;return ke&&(ke[ue]||!Ve(ke[ue]))?he=ke[ue]:(Me[ue]||!Ve(Me[ue]))&&(he=Me[ue]),he||!Ve(he)?he:xe}function fe(de){for(var ue;ue=A._next();){var xe=ue[Io]();xe&&de(xe)}}return A}function fl(i,o,l,v){var S=Ao(o),I=Js(i,S,l,v),A=I.ctx;function L(B){var X=I._next();return X&&X[Za](B,A),!X}function Y(B,X){return B===void 0&&(B=null),at(B)&&(B=hf(B,S.cfg,l,X)),fl(B||A[Ri](),S.cfg,l,X)}return A[wa]=L,A[Co]=Y,A}function mf(i,o,l){var v=Ao(o.config),S=Js(i,v,o,l),I=S.ctx;function A(Y){var B=S._next();return B&&B[Os](I,Y),!B}function L(Y,B){return Y===void 0&&(Y=null),at(Y)&&(Y=hf(Y,v.cfg,o,B)),mf(Y||I[Ri](),o,B)}return I[wa]=A,I[Co]=L,I}function bd(i,o,l){var v=Ao(o.config),S=Js(i,v,o,l),I=S.ctx;function A(Y){return I.iterate(function(B){rt(B[Ms])&&B[Ms](I,Y)})}function L(Y,B){return Y===void 0&&(Y=null),at(Y)&&(Y=hf(Y,v.cfg,o,B)),bd(Y||I[Ri](),o,B)}return I[wa]=A,I[Co]=L,I}function hf(i,o,l,v){var S=null,I=!v;if(at(i)&&i[cr]>0){var A=null;Pt(i,function(L){if(!I&&v===L&&(I=!0),I&&L&&rt(L[Za])){var Y=_f(L,o,l);S||(S=Y),A&&A._setNext(Y),A=Y}})}return v&&!S?hf([v],o,l):S}function _f(i,o,l){var v=null,S=rt(i[Za]),I=rt(i[jc]),A;i?A=i[Xi]+"-"+i[od]+"-"+En++:A="Unknown-0-"+En++;var L={getPlugin:function(){return i},getNext:function(){return v},processTelemetry:X,unload:le,update:fe,_id:A,_setNext:function(de){v=de}};function Y(){var de;return i&&rt(i[At])&&(de=i[At]()),de||(de=fl(L,o,l)),de}function B(de,ue,xe,he,ke){var Me=!1,He=i?i[Xi]:gr,ct=de[br];return ct||(ct=de[br]={}),de.setNext(v),i&&V(de[la](),function(){return He+":"+xe},function(){ct[A]=!0;try{var Sr=v?v._id:Br;Sr&&(ct[Sr]=!1),Me=ue(de)}catch(Xr){var Zr=v?ct[v._id]:!0;Zr&&(Me=!0),(!v||!Zr)&&St(de[di](),1,73,"Plugin ["+He+"] failed during "+xe+" - "+ar(Xr)+", run flags: "+ar(ct))}},he,ke),Me}function X(de,ue){ue=ue||Y();function xe(he){if(!i||!S)return!1;var ke=ot(i);return ke[Ln]||ke[id]?!1:(I&&i[jc](v),i[Za](de,he),!0)}B(ue,xe,"processTelemetry",function(){return{item:de}},!de.sync)||ue[wa](de)}function le(de,ue){function xe(){var he=!1;if(i){var ke=ot(i),Me=i[la]||ke[la];i&&(!Me||Me===de.core())&&!ke[Ln]&&(ke[la]=null,ke[Ln]=!0,ke[qr]=!1,i[Ln]&&i[Ln](de,ue)===!0&&(he=!0))}return he}B(de,xe,"unload",function(){},ue[ks])||de[wa](ue)}function fe(de,ue){function xe(){var he=!1;if(i){var ke=ot(i),Me=i[la]||ke[la];i&&(!Me||Me===de.core())&&!ke[Ln]&&i[Ms]&&i[Ms](de,ue)===!0&&(he=!0)}return he}B(de,xe,"update",function(){},!1)||de[wa](ue)}return ur(L)}function Ed(){var i=[];function o(v){v&&i[Fr](v)}function l(v,S){Pt(i,function(I){try{I(v,S)}catch(A){St(v[di](),2,73,"Unexpected error calling unload handler - "+ar(A))}}),i=[]}return{add:o,run:l}}function gf(){var i=[];function o(v){var S=i;i=[],Pt(S,function(I){try{(I.rm||I.remove).call(I)}catch(A){St(v,2,73,"Unloading:"+ar(A))}})}function l(v){v&&Pc(i,v)}return{run:o,add:l}}var Re,vt="getPlugin",Bt=(Re={},Re[Gc]={isVal:Hc,v:{}},Re),en=function(){function i(){var o=this,l,v,S,I,A;B(),Pa(i,o,function(X){X[Rs]=function(le,fe,de,ue){Y(le,fe,ue),l=!0},X[Ln]=function(le,fe){var de,ue=X[la];if(!ue||le&&ue!==le[la]())return;var xe,he=!1,ke=le||mf(null,ue,S&&S[vt]?S[vt]():S),Me=fe||(de={reason:0},de[ks]=!1,de);function He(){he||(he=!0,I.run(ke,fe),A.run(ke[di]()),xe===!0&&ke[wa](Me),B())}return!X[Qo]||X[Qo](ke,Me,He)!==!0?He():xe=!0,xe},X[Ms]=function(le,fe){var de=X[la];if(!de||le&&de!==le[la]())return;var ue,xe=!1,he=le||bd(null,de,S&&S[vt]?S[vt]():S),ke=fe||{reason:0};function Me(){xe||(xe=!0,Y(he.getCfg(),he.core(),he[Ri]()))}return!X._doUpdate||X._doUpdate(he,ke,Me)!==!0?Me():ue=!0,ue},da(X,"_addUnloadCb",function(){return I},"add"),da(X,"_addHook",function(){return A},"add"),Hr(X,"_unloadHooks",{g:function(){return A}})}),o[di]=function(X){return L(X)[di]()},o[qr]=function(){return l},o.setInitialized=function(X){l=X},o[jc]=function(X){S=X},o[wa]=function(X,le){le?le[wa](X):S&&rt(S[Za])&&S[Za](X,null)},o._getTelCtx=L;function L(X){X===void 0&&(X=null);var le=X;if(!le){var fe=v||fl(null,{},o[la]);S&&S[vt]?le=fe[Co](null,S[vt]):le=fe[Co](null,S)}return le}function Y(X,le,fe){Ao(X,Bt,Ks(le)),!fe&&le&&(fe=le[Aa]()[Ri]());var de=S;S&&S[vt]&&(de=S[vt]()),o[la]=le,v=fl(fe,X,le,de)}function B(){l=!1,o[la]=null,v=null,S=null,A=gf(),I=Ed()}}return i.__ieDyn=1,i}();function Ea(i,o,l){var v={id:o,fn:l};Pc(i,v);var S={remove:function(){Pt(i,function(I,A){if(I.id===v.id)return i[pt](A,1),-1})}};return S}function Ta(i,o,l){for(var v=!1,S=i[cr],I=0;I<S;++I){var A=i[I];if(A)try{if(A.fn[Ka](null,[o])===!1){v=!0;break}}catch(L){St(l,2,64,"Telemetry initializer failed: "+fa(L),{exception:ar(L)},!0)}}return!v}var Xn=function(i){Ll(o,i);function o(){var l=i.call(this)||this;l.identifier="TelemetryInitializerPlugin",l.priority=199;var v,S;I(),Pa(o,l,function(A,L){A.addTelemetryInitializer=function(Y){return Ea(S,v++,Y)},A[Za]=function(Y,B){Ta(S,Y,B?B[di]():A[di]())&&A[wa](Y,B)},A[Qo]=function(){I()}});function I(){v=0,S=[]}return l}return o.__ieDyn=1,o}(en),_i,ms="Plugins must provide initialize method",dl="_notificationManager",rm="SDK is still unloading...",Au="SDK is not initialized",Td=100,Lm=5e4,Qn=qa((_i={cookieCfg:{}},_i[sc]={rdOnly:!0,ref:!0,v:[]},_i[oc]={rdOnly:!0,ref:!0,v:[]},_i[Gc]={ref:!0,v:{}},_i[ip]=Us,_i.loggingLevelConsole=0,_i.diagnosticLogInterval=Us,_i));function hs(i,o){return new N(o)}function nm(i,o,l){var v,S=[],I=[],A={};return Pt(l,function(L){(Ve(L)||Ve(L[Rs]))&&pr(ms);var Y=L[od],B=L[Xi];L&&Y&&(Ve(A[Y])?A[Y]=B:Cu(i,"Two extensions have same priority #"+Y+" - "+A[Y]+", "+B)),!Y||Y<o?S[Fr](L):I[Fr](L)}),v={},v[la]=S,v[oc]=I,v}function Fm(i,o){var l=!1;return Pt(o,function(v){if(v===i)return l=!0,-1}),l}function cv(i,o,l,v){l&&Ct(l,function(S,I){v&&Ha(I)&&Ha(o[S])&&cv(i,o[S],I,v),v&&Ha(I)&&Ha(o[S])?cv(i,o[S],I,v):i.set(o,S,I)})}function Um(i,o){var l=null,v=-1;return Pt(i,function(S,I){if(S.w===o)return l=S,v=I,-1}),{i:v,l}}function jm(i,o){var l=Um(i,o).l;return l||(l={w:o,rm:function(){var v=Um(i,o);v.i!==-1&&i[pt](v.i,1)}},i[Fr](l)),l}function Hh(i,o,l){Pt(o,function(v){var S=Du(i,v.w,l);delete v.w,v.rm=function(){S.rm()}})}function Ym(i,o,l,v){return o.add(i[hu](function(S){var I=S.cfg.disableDbgExt;I===!0&&v&&(l[_u](v),v=null),l&&!v&&I!==!0&&(v=Qv(S.cfg),l[Ai](v))})),v}function $m(i){return Hr({rm:function(){i.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(i)+">"}})}var pl=function(){function i(){var o,l,v,S,I,A,L,Y,B,X,le,fe,de,ue,xe,he,ke,Me,He,ct,Sr,Zr,Xr,_n,Qt,Yt,Wr,ja,aa,Je,$t,Dn;Pa(i,this,function(Le){Se(),Le._getDbgPlgTargets=function(){return[Xr,S]},Le[qr]=function(){return l},Le.activeStatus=function(){return Yt},Le._setPendingStatus=function(){Yt=3},Le[Rs]=function(Ie,ht,er,xt){de&&pr(rm),Le[qr]()&&pr("Core cannot be initialized more than once"),o=Ao(Ie,Qn,er||Le[un],!1),Ie=o.cfg,au(o[hu](function(gn){var $a=gn.cfg,jo=Yt===3;if(!jo){ja=$a.initInMemoMaxSize||Td;var iu=$a[Eo],Cp=$a.endpointUrl;if(Ve(iu)){Sr=null,Yt=Ci[Ur];var xp="Please provide instrumentation key";l?(St(v,1,100,xp),ia()):pr(xp);return}var a_=[];if(tr(iu)?(a_[Fr](iu),Sr=null):Sr=iu,tr(Cp)?(a_[Fr](Cp),Wr=null):Wr=Cp,a_[cr]){aa=!1,Yt=3;var M_=Hc($a.initTimeOut)?$a.initTimeOut:Lm,Ny=$v(a_);du(function(){aa||nr()},M_),ns(Ny,function(Xm){try{if(aa)return;if(!Xm.rejected){var Qm=Xm[To];if(Qm&&Qm[cr]){var Sg=Qm[0];if(Sr=Sg&&Sg[To],Qm[cr]>1){var wg=Qm[1];Wr=wg&&wg[To]}}Sr&&(Ie[Eo]=Sr,Ie.endpointUrl=Wr)}nr()}catch{aa||nr()}})}else nr();var i_=gn.ref(gn.cfg,Gc);Ct(i_,function(Xm){gn.ref(i_,Xm)})}})),I=xt,He=Ym(o,Me,I&&Le[Xf](),He),Jm(),Le[un]=er;var fr=Ie[sc];if(X=[],X[Fr].apply(X,Vu(Vu([],ht,!1),fr)),le=Ie[oc],Qa(null),(!fe||fe[cr]===0)&&pr("No "+oc+" available"),le&&le[cr]>1){var $n=Le[Io]("TeeChannelController");(!$n||!$n.plugin)&&St(v,1,28,"TeeChannel required")}Hh(Ie,Zr,v),Zr=null,l=!0,Yt===Ci.ACTIVE&&ia()},Le.getChannels=function(){var Ie=[];return fe&&Pt(fe,function(ht){Ie[Fr](ht)}),ur(Ie)},Le.track=function(Ie){V(Le[Ys](),function(){return"AppInsightsCore:track"},function(){Ie===null&&(Ya(Ie),pr("Invalid telemetry item")),!Ie[An]&&Ve(Ie[An])&&(Ya(Ie),pr("telemetry name required")),Ie[Qi]=Ie[Qi]||Sr,Ie[Xo]=Ie[Xo]||Vc(new Date),Ie.ver=Ie.ver||"4.0",!de&&Le[qr]()&&Yt===Ci.ACTIVE?lo()[wa](Ie):Yt!==Ci[Ur]&&S[cr]<=ja&&S[Fr](Ie)},function(){return{item:Ie}},!Ie.sync)},Le[Aa]=lo,Le[Xf]=function(){return I||(I=new Mm(o.cfg),Le[dl]=I),I},Le[Ai]=function(Ie){Le.getNotifyMgr()[Ai](Ie)},Le[_u]=function(Ie){I&&I[_u](Ie)},Le.getCookieMgr=function(){return Y||(Y=ds(o.cfg,Le[un])),Y},Le.setCookieMgr=function(Ie){Y!==Ie&&(il(Y,!1),Y=Ie)},Le[Ys]=function(){return A||L||J()},Le.setPerfMgr=function(Ie){A=Ie},Le.eventCnt=function(){return S[cr]},Le.releaseQueue=function(){if(l&&S[cr]>0){var Ie=S;S=[],Yt===2?Pt(Ie,function(ht){ht[Qi]=ht[Qi]||Sr,lo()[wa](ht)}):St(v,2,20,"core init status is not active")}},Le[Uc]=function(Ie){return xe=Ie||null,Dn=!1,Je&&Je[bo](),Cn(!0)};function nr(){aa=!0,Ve(Sr)?(Yt=Ci[Ur],St(v,1,112,"ikey can't be resolved from promises")):Yt=Ci.ACTIVE,ia()}function ia(){l&&(Le.releaseQueue(),Le[Uc]())}function Cn(Ie){if((!Je||!Je[Ju])&&!Dn){var ht=Ie||v&&v.queue[cr]>0;ht&&($t||($t=!0,au(o[hu](function(er){var xt=er.cfg.diagnosticLogInterval;(!xt||!(xt>0))&&(xt=1e4);var fr=!1;Je&&(fr=Je[Ju],Je[bo]()),Je=Vd(Wm,xt),Je.unref(),Je[Ju]=fr}))),Je[Ju]=!0)}return Je}Le[Qf]=function(){Dn=!0,Je&&Je[bo](),Wm()},ud(Le,function(){return ue},["addTelemetryInitializer"]),Le[Os]=function(Ie,ht,er){var xt;Ie===void 0&&(Ie=!0),l||pr(Au),de&&pr(rm);var fr=(xt={reason:50},xt[ks]=Ie,xt.flushComplete=!1,xt),$n;Ie&&!ht&&($n=zc(function(jo){ht=jo}));var gn=mf(Rd(),Le);gn[No](function(){Me.run(Le[un]),Jv([Y,I,v],Ie,function(){Se(),ht&&ht(fr)})},Le);function $a(jo){fr.flushComplete=jo,de=!0,ke.run(gn,fr),Le[Qf](),gn[wa](fr)}return Wm(),Np(Ie,$a,6,er),$n},Le[Io]=ys,Le.addPlugin=function(Ie,ht,er,xt){if(!Ie){xt&&xt(!1),Zm(ms);return}var fr=ys(Ie[Xi]);if(fr&&!ht){xt&&xt(!1),Zm("Plugin ["+Ie[Xi]+"] is already loaded!");return}var $n={reason:16};function gn(iu){X[Fr](Ie),$n.added=[Ie],Qa($n),xt&&xt(!0)}if(fr){var $a=[fr.plugin],jo={reason:2,isAsync:!!er};Sc($a,jo,function(iu){iu?($n.removed=$a,$n.reason|=32,gn()):xt&&xt(!1)})}else gn()},Le.updateCfg=function(Ie,ht){ht===void 0&&(ht=!0);var er;if(Le[qr]()){er={reason:1,cfg:o.cfg,oldCfg:fu({},o.cfg),newConfig:fu({},Ie),merge:ht},Ie=er.newConfig;var xt=o.cfg;Ie[sc]=xt[sc],Ie[oc]=xt[oc]}o._block(function(fr){var $n=fr.cfg;cv(fr,$n,Ie,ht),ht||Ct($n,function(gn){je(Ie,gn)||fr.set($n,gn,Us)}),fr[Pi]($n,Qn)},!0),o[Zo](),er&&Dp(er)},Le.evtNamespace=function(){return he},Le.flush=Np,Le.getTraceCtx=function(Ie){return ct||(ct=Ut()),ct},Le.setTraceCtx=function(Ie){ct=Ie||null},Le.addUnloadHook=au,da(Le,"addUnloadCb",function(){return ke},"add"),Le.onCfgChange=function(Ie){var ht;return l?ht=Du(o.cfg,Ie,Le[un]):ht=jm(Zr,Ie),$m(ht)},Le.getWParam=function(){return sa()||o.cfg.enableWParam?0:-1};function gs(){var Ie={};_n=[];var ht=function(er){er&&Pt(er,function(xt){if(xt[Xi]&&xt[Do]&&!Ie[xt.identifier]){var fr=xt[Xi]+"="+xt[Do];_n[Fr](fr),Ie[xt.identifier]=xt}})};ht(fe),le&&Pt(le,function(er){ht(er)}),ht(X)}function Se(){l=!1,o=Ao({},Qn,Le[un]),o.cfg[Zu]=1,Hr(Le,"config",{g:function(){return o.cfg},s:function(ht){Le.updateCfg(ht,!1)}}),Hr(Le,"pluginVersionStringArr",{g:function(){return _n||gs(),_n}}),Hr(Le,"pluginVersionString",{g:function(){return Qt||(_n||gs(),Qt=_n.join(";")),Qt||Br}}),Hr(Le,"logger",{g:function(){return v||(v=new ff(o.cfg),o[un]=v),v},s:function(ht){o[un]=ht,v!==ht&&(il(v,!1),v=ht)}}),Le[un]=new ff(o.cfg),Xr=[];var Ie=Le.config[sc]||[];Ie.splice(0,Ie[cr]),Pc(Ie,Xr),ue=new Xn,S=[],il(I,!1),I=null,A=null,L=null,il(Y,!1),Y=null,B=null,X=[],le=null,fe=null,de=!1,xe=null,he=el("AIBaseCore",!0),ke=Ed(),ct=null,Sr=null,Me=gf(),Zr=[],Qt=null,_n=null,Dn=!1,Je=null,$t=!1,Yt=0,Wr=null,ja=null,aa=!1}function lo(){var Ie=fl(Rd(),o.cfg,Le);return Ie[No](Cn),Ie}function Qa(Ie){var ht=nm(Le[un],dp,X);B=null,Qt=null,_n=null,fe=(le||[])[0]||[],fe=ir(Pc(fe,ht[oc]));var er=Pc(ir(ht[la]),fe);Xr=ur(er);var xt=Le.config[sc]||[];xt.splice(0,xt[cr]),Pc(xt,Xr);var fr=lo();fe&&fe[cr]>0&&lt(fr[Co](fe),er),lt(fr,er),Ie&&Dp(Ie)}function ys(Ie){var ht=null,er=null,xt=[];return Pt(Xr,function(fr){if(fr[Xi]===Ie&&fr!==ue)return er=fr,-1;fr.getChannel&&xt[Fr](fr)}),!er&&xt[cr]>0&&Pt(xt,function(fr){if(er=fr.getChannel(Ie),!er)return-1}),er&&(ht={plugin:er,setEnabled:function(fr){ot(er)[id]=!fr},isEnabled:function(){var fr=ot(er);return!fr[Ln]&&!fr[id]},remove:function(fr,$n){var gn;fr===void 0&&(fr=!0);var $a=[er],jo=(gn={reason:1},gn[ks]=fr,gn);Sc($a,jo,function(iu){iu&&Qa({reason:32,removed:$a}),$n&&$n(iu)})}}),ht}function Rd(){if(!B){var Ie=(Xr||[]).slice();ui(Ie,ue)===-1&&Ie[Fr](ue),B=hf(ir(Ie),o.cfg,Le)}return B}function Sc(Ie,ht,er){if(Ie&&Ie[cr]>0){var xt=hf(Ie,o.cfg,Le),fr=mf(xt,Le);fr[No](function(){var $n=!1,gn=[];Pt(X,function(jo,iu){Fm(jo,Ie)?$n=!0:gn[Fr](jo)}),X=gn,Qt=null,_n=null;var $a=[];le&&(Pt(le,function(jo,iu){var Cp=[];Pt(jo,function(xp){Fm(xp,Ie)?$n=!0:Cp[Fr](xp)}),$a[Fr](Cp)}),le=$a),er&&er($n),Cn()}),fr[wa](ht)}else er(!1)}function Wm(){if(v&&v.queue){var Ie=v.queue.slice(0);v.queue[cr]=0,Pt(Ie,function(ht){var er,xt=(er={},er[An]=xe||"InternalMessageId: "+ht[ed],er[Qi]=Sr,er[Xo]=Vc(new Date),er.baseType=cl.dataType,er.baseData={message:ht[Xu]},er);Le.track(xt)})}}function Np(Ie,ht,er,xt){var fr=1,$n=!1,gn=null;xt=xt||5e3;function $a(){fr--,$n&&fr===0&&(gn&&gn[bo](),gn=null,ht&&ht($n),ht=null)}if(fe&&fe[cr]>0){var jo=lo()[Co](fe);jo.iterate(function(iu){if(iu.flush){fr++;var Cp=!1;iu.flush(Ie,function(){Cp=!0,$a()},er)||Cp||(Ie&&gn==null?gn=du(function(){gn=null,$a()},xt):$a())}})}return $n=!0,$a(),!0}function Jm(){var Ie;au(o[hu](function(ht){var er=ht.cfg.enablePerfMgr;if(er){var xt=ht.cfg[ip];(Ie!==xt||!Ie)&&(xt||(xt=hs),sp(ht.cfg,ip,xt),Ie=xt,L=null),!A&&!L&&rt(xt)&&(L=xt(Le,Le[Xf]()))}else L=null,Ie=null}))}function Dp(Ie){var ht=bd(Rd(),Le);ht[No](Cn),(!Le._updateHook||Le._updateHook(ht,Ie)!==!0)&&ht[wa](Ie)}function Zm(Ie){var ht=Le[un];ht?(St(ht,2,73,Ie),Cn()):pr(Ie)}function Ya(Ie){var ht=Le[Xf]();ht&&ht[vr]([Ie],2)}function au(Ie){Me.add(Ie)}})}return i.__ieDyn=1,i}();function yf(i,o){try{if(i&&i!==""){var l=Fi().parse(i);if(l&&l[Wa]&&l[Wa]>=l.itemsAccepted&&l.itemsReceived-l.itemsAccepted===l.errors[cr])return l}}catch(v){St(o,1,43,"Cannot parse the response. "+(v[An]||ar(v)),{response:i})}return null}var Zs="",vl="NoResponseBody",qm="&"+vl+"=true",am="POST",lv=function(){function i(){var o=0,l,v,S,I,A,L,Y,B,X,le,fe,de,ue,xe;Pa(i,this,function(he,ke){var Me=!0;aa(),he[Rs]=function(Je,$t){S=$t,v&&St(S,1,28,"Sender is already initialized"),he.SetConfig(Je),v=!0},he._getDbgPlgTargets=function(){return[v,I,L,l]},he.SetConfig=function(Je){try{if(A=Je.senderOnCompleteCallBack||{},L=!!Je.disableCredentials,Y=Je.fetchCredentials,I=!!Je.isOneDs,l=!!Je.enableSendPromise,X=!!Je.disableXhr,le=!!Je.disableBeacon,fe=!!Je.disableBeaconSync,xe=Je.timeWrapper,ue=!!Je.addNoResponse,de=!!Je.disableFetchKeepAlive,B={sendPOST:Yt},I||(Me=!1),L){var $t=Xc();$t&&$t.protocol&&$t.protocol[mu]()==="file:"&&(Me=!1)}return!0}catch{}return!1},he.getSyncFetchPayload=function(){return o},he.getSenderInst=function(Je,$t){return Je&&Je[cr]?Zr(Je,$t):null},he.getFallbackInst=function(){return B},he[Qo]=function(Je,$t){aa()};function He(Je,$t){Xr($t,200,{},Je)}function ct(Je,$t){St(S,2,26,"Failed to send telemetry.",{message:Je}),Xr($t,400,{})}function Sr(Je){ct("No endpoint url is provided for the batch",Je)}function Zr(Je,$t){for(var Dn,Le=0,nr=null,ia=0;nr==null&&ia<Je[cr];)Le=Je[ia],!X&&Le===1?fd()?nr=ja:bu()&&(nr=Yt):Le===2&&va($t)&&(!$t||!de)?nr=Wr:Le===3&&Hs()&&($t?!fe:!le)&&(nr=Qt),ia++;return nr?(Dn={_transport:Le,_isSync:$t},Dn[rs]=nr,Dn):null}function Xr(Je,$t,Dn,Le){try{Je&&Je($t,Dn,Le)}catch{}}function _n(Je,$t){var Dn=Go(),Le=Je[ts];if(!Le)return Sr($t),!0;Le=Je[ts]+(ue?qm:Zs);var nr=Je[pi],ia=I?nr:new Blob([nr],{type:"text/plain;charset=UTF-8"}),Cn=Dn.sendBeacon(Le,ia);return Cn}function Qt(Je,$t,Dn){var Le=Je[pi];try{if(Le)if(_n(Je,$t))He(Zs,$t);else{var nr=A&&A.beaconOnRetry;nr&&rt(nr)?nr(Je,$t,_n):(B&&B[rs](Je,$t,!0),St(S,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(ia){I&&Cu(S,"Failed to send telemetry using sendBeacon API. Ex:"+ar(ia)),Xr($t,I?0:400,{},Zs)}}function Yt(Je,$t,Dn){var Le,nr,ia,Cn=Je[Qd]||{};!Dn&&l&&(Le=zc(function(Qa,ys){nr=Qa,ia=ys})),I&&Dn&&Je.disableXhrSync&&(Dn=!1);var gs=Je[ts];if(!gs){Sr($t),nr&&nr(!1);return}var Se=Wc(am,gs,Me,!0,Dn,Je[Fl]);I||Se[rd]("Content-type","application/json"),Pt(bn(Cn),function(Qa){Se[rd](Qa,Cn[Qa])}),Se.onreadystatechange=function(){I||(lo(Se),Se.readyState===4&&nr&&nr(!0))},Se.onload=function(){I&&lo(Se)};function lo(Qa){var ys=A&&A.xhrOnComplete,Rd=ys&&rt(ys);if(Rd)ys(Qa,$t,Je);else{var Sc=is(Qa);Xr($t,Qa[ki],cp(Qa,I),Sc)}}return Se.onerror=function(Qa){Xr($t,I?Se[ki]:400,cp(Se,I),I?Zs:vi(Se)),ia&&ia(Qa)},Se.ontimeout=function(){Xr($t,I?Se[ki]:500,cp(Se,I),I?Zs:vi(Se)),nr&&nr(!1)},Se.send(Je[pi]),Le}function Wr(Je,$t,Dn){var Le,nr=Je[ts],ia=Je[pi],Cn=I?ia:new Blob([ia],{type:"application/json"}),gs,Se,lo,Qa=new Headers,ys=ia[cr],Rd=!1,Sc=!1,Wm=Je[Qd]||{},Np=(Le={method:am,body:Cn},Le[Zv]=!0,Le);Je.headers&&bn(Je.headers)[cr]>0&&(Pt(bn(Wm),function(Ya){Qa.append(Ya,Wm[Ya])}),Np[Qd]=Qa),Y?Np.credentials=Y:Me&&I&&(Np.credentials="include"),Dn&&(Np.keepalive=!0,o+=ys,I?Je._sendReason===2&&(Rd=!0,ue&&(nr+=qm)):Rd=!0);var Jm=new Request(nr,Np);try{Jm[Zv]=!0}catch{}if(!Dn&&l&&(gs=zc(function(Ya,au){Se=Ya,lo=au})),!nr){Sr($t),Se&&Se(!1);return}function Dp(Ya){Xr($t,I?0:400,{},I?Zs:Ya)}function Zm(Ya,au,Ie){var ht=Ya[ki],er=A.fetchOnComplete;er&&rt(er)?er(Ya,$t,Ie||Zs,au):Xr($t,ht,{},Ie||Zs)}try{ns(fetch(I?nr:Jm,I?Np:null),function(Ya){if(Dn&&(o-=ys,ys=0),!Sc)if(Sc=!0,Ya.rejected)Dp(Ya.reason&&Ya.reason[Xu]),lo&&lo(Ya.reason);else{var au=Ya[To];try{!I&&!au.ok?(Dp(au.statusText),Se&&Se(!1)):I&&!au.body?(Zm(au,null,Zs),Se&&Se(!0)):ns(au.text(),function(Ie){Zm(au,Je,Ie[To]),Se&&Se(!0)})}catch(Ie){Dp(ar(Ie)),lo&&lo(Ie)}}})}catch(Ya){Sc||(Dp(ar(Ya)),lo&&lo(Ya))}return Rd&&!Sc&&(Sc=!0,Xr($t,200,{}),Se&&Se(!0)),I&&!Sc&&Je[Fl]>0&&xe&&xe.set(function(){Sc||(Sc=!0,Xr($t,500,{}),Se&&Se(!0))},Je[Fl]),gs}function ja(Je,$t,Dn){var Le=zo(),nr=new XDomainRequest,ia=Je[pi];nr.onload=function(){var Qa=is(nr),ys=A&&A.xdrOnComplete;ys&&rt(ys)?ys(nr,$t,Je):Xr($t,200,{},Qa)},nr.onerror=function(){Xr($t,400,{},I?Zs:os(nr))},nr.ontimeout=function(){Xr($t,500,{})},nr.onprogress=function(){};var Cn=Le&&Le.location&&Le.location[gu]||"",gs=Je[ts];if(!gs){Sr($t);return}if(!I&&gs.lastIndexOf(Cn,0)!==0){var Se="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";St(S,2,40,". "+Se),ct(Se,$t);return}var lo=I?gs:gs[Oi](/^(https?:)/,"");nr.open(am,lo),Je[Fl]&&(nr[Fl]=Je[Fl]),nr.send(ia),I&&Dn?xe&&xe.set(function(){nr.send(ia)},0):nr.send(ia)}function aa(){o=0,v=!1,l=!1,S=null,I=null,A=null,L=null,Y=null,B=null,X=!1,le=!1,fe=!1,de=!1,ue=!1,xe=null}})}return i.__ieDyn=1,i}(),fv="on",Id="attachEvent",lh="addEventListener",Bm="detachEvent",gp="removeEventListener",ml="events";el("aiEvtPageHide"),el("aiEvtPageShow");var P_=/\.[\.]+/g,fh=/[\.]+$/,Vh=1,zm=fp("events"),A_=/^([^.]*)(?:\.(.+)|)/;function Sf(i){return i&&i[Oi]?i[Oi](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Br):i}function dv(i,o){var l;if(o){var v=Br;at(o)?(v=Br,Pt(o,function(I){I=Sf(I),I&&(I[0]!=="."&&(I="."+I),v+=I)})):v=Sf(o),v&&(v[0]!=="."&&(v="."+v),i=(i||Br)+v)}var S=A_.exec(i||Br)||[];return l={},l[cn]=S[1],l.ns=(S[2]||Br).replace(P_,".").replace(fh,Br)[yu](".").sort().join("."),l}function im(i,o,l){l===void 0&&(l=!0);var v=zm.get(i,ml,{},l),S=v[o];return S||(S=v[o]=[]),S}function wf(i,o,l,v){i&&o&&o[cn]&&(i[gp]?i[gp](o[cn],l,v):i[Bm]&&i[Bm](fv+o[cn],l))}function pv(i,o,l,v){var S=!1;return i&&o&&o[cn]&&l&&(i[lh]?(i[lh](o[cn],l,v),S=!0):i[Id]&&(i[Id](fv+o[cn],l),S=!0)),S}function dh(i,o,l,v){for(var S=o[cr];S--;){var I=o[S];I&&(!l.ns||l.ns===I.evtName.ns)&&(!v||v(I))&&(wf(i,I.evtName,I[Jn],I.capture),o[pt](S,1))}}function Kh(i,o,l){if(o[cn])dh(i,im(i,o[cn]),o,l);else{var v=zm.get(i,ml,{});Ct(v,function(S,I){dh(i,I,o,l)}),bn(v)[cr]===0&&zm.kill(i,ml)}}function Nd(i,o){var l;return o?(at(o)?l=[i].concat(o):l=[i,o],l=dv("xx",l).ns[yu](".")):l=i,l}function Wh(i,o,l,v,S){var I;S===void 0&&(S=!1);var A=!1;if(i)try{var L=dv(o,v);if(A=pv(i,L,l,S),A&&zm.accept(i)){var Y=(I={guid:Vh++,evtName:L},I[Jn]=l,I.capture=S,I);im(i,L.type)[Fr](Y)}}catch{}return A}function R_(i,o,l,v,S){if(S===void 0&&(S=!1),i)try{var I=dv(o,v),A=!1;Kh(i,I,function(L){return I.ns&&!l||L[Jn]===l?(A=!0,!0):!1}),A||wf(i,I,l,S)}catch{}}var ph="sampleRate",om="ProcessLegacy",vh="http.method",Gm="https://dc.services.visualstudio.com",vv="/v2/track",Dd="not_specified",mh=Zd({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),sm="split",Kr="length",Xs="toLowerCase",Cd="ingestionendpoint",yp="toString",mv="push",um="removeItem",bf="name",xd="message",Jh="count",Sp="stringify",hl="pathname",mc="exceptions",Mo="parsedStack",Qs="properties",_l="measurements",Ef="sizeInBytes",Ru="typeName",Ou="severityLevel",wp="problemGroup",Pd="isManual",Zh="CreateFromInterface",hv="assembly",hc="fileName",Hm="hasFullStack",_v="level",Tf="method",gv="line",yv="duration",hh="receivedResponse";function _h(i,o,l){var v=o[Kr],S=Xh(i,o);if(S[Kr]!==v){for(var I=0,A=S;l[A]!==void 0;)I++,A=Lr(S,0,147)+_(I);S=A}return S}function Xh(i,o){var l;return o&&(o=Wn(ga(o)),o[Kr]>150&&(l=Lr(o,0,150),St(i,2,57,"name is too long.  It has been truncated to 150 characters.",{name:o},!0))),l||o}function gi(i,o,l){l===void 0&&(l=1024);var v;return o&&(l=l||1024,o=Wn(ga(o)),o[Kr]>l&&(v=Lr(o,0,l),St(i,2,61,"string value is too long. It has been truncated to "+l+" characters.",{value:o},!0))),v||o}function eu(i,o){return d(i,o,2048,66)}function bp(i,o){var l;return o&&o[Kr]>32768&&(l=Lr(o,0,32768),St(i,2,56,"message is too long, it has been truncated to 32768 characters.",{message:o},!0)),l||o}function Vn(i,o){var l;if(o){var v=""+o;v[Kr]>32768&&(l=Lr(v,0,32768),St(i,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:o},!0))}return l||o}function Ep(i,o){if(o){var l={};Ct(o,function(v,S){if(yn(S)&&Gs())try{S=Fi()[Sp](S)}catch(I){St(i,2,49,"custom property is not valid",{exception:I},!0)}S=gi(i,S,8192),v=_h(i,v,l),l[v]=S}),o=l}return o}function Tp(i,o){if(o){var l={};Ct(o,function(v,S){v=_h(i,v,l),l[v]=S}),o=l}return o}function Qh(i,o){return o&&d(i,o,128,69)[yp]()}function d(i,o,l,v){var S;return o&&(o=Wn(ga(o)),o[Kr]>l&&(S=Lr(o,0,l),St(i,2,v,"input is too long, it has been truncated to "+l+" characters.",{data:o},!0))),S||o}function _(i){var o="00"+i;return ri(o,o[Kr]-3)}var E=$f()||{},D=0,O=[null,null,null,null,null];function $(i){var o=D,l=O,v=l[o];return E.createElement?l[o]||(v=l[o]=E.createElement("a")):v={host:q(i,!0)},v.href=i,o++,o>=l[Kr]&&(o=0),D=o,v}function q(i,o){var l=W(i,o)||"";if(l){var v=l.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(v!=null&&v[Kr]>3&&Ft(v[2])&&v[2][Kr]>0)return v[2]+(v[3]||"")}return l}function W(i,o){var l=null;if(i){var v=i.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(v!=null&&v[Kr]>2&&Ft(v[2])&&v[2][Kr]>0&&(l=v[2]||"",o&&v[Kr]>2)){var S=(v[1]||"")[Xs](),I=v[3]||"";(S==="http"&&I===":80"||S==="https"&&I===":443")&&(I=""),l+=I}}return l}var oe=[Gm+vv,"https://breeze.aimon.applicationinsights.io"+vv,"https://dc-int.services.visualstudio.com"+vv];function se(i){return ui(oe,i[Xs]())!==-1}function De(i,o,l,v){var S,I=v,A=v;if(o&&o[Kr]>0){var L=$(o);if(S=L.host,!I)if(L[hl]!=null){var Y=L.pathname[Kr]===0?"/":L[hl];Y.charAt(0)!=="/"&&(Y="/"+Y),A=L[hl],I=gi(i,l?l+" "+Y:Y)}else I=gi(i,o)}else S=v,I=v;return{target:S,name:I,data:A}}var qe=Ku({LocalStorage:0,SessionStorage:1}),Ye=void 0,Ne="";function me(i){try{if(Ve(ii()))return null;var o=new Date()[yp](),l=Ir(i===qe.LocalStorage?"localStorage":"sessionStorage"),v=Ne+o;l.setItem(v,o);var S=l.getItem(v)!==o;if(l[um](v),!S)return l}catch{}return null}function Ue(){return Ke()?me(qe.SessionStorage):null}function Ee(i){Ne=i||""}function Ke(i){return(i||Ye===void 0)&&(Ye=!!me(qe.SessionStorage)),Ye}function Ce(i,o){var l=Ue();if(l!==null)try{return l.getItem(o)}catch(v){Ye=!1,St(i,2,2,"Browser failed read of session storage. "+fa(v),{exception:ar(v)})}return null}function Te(i,o,l){var v=Ue();if(v!==null)try{return v.setItem(o,l),!0}catch(S){Ye=!1,St(i,2,4,"Browser failed write to session storage. "+fa(S),{exception:ar(S)})}return!1}function Be(i,o){var l=Ue();if(l!==null)try{return l[um](o),!0}catch(v){Ye=!1,St(i,2,6,"Browser failed removal of session storage item. "+fa(v),{exception:ar(v)})}return!1}var zt=";",Zt="=";function or(i){if(!i)return{};var o=i[sm](zt),l=kv(o,function(S,I){var A=I[sm](Zt);if(A[Kr]===2){var L=A[0][Xs](),Y=A[1];S[L]=Y}return S},{});if(bn(l)[Kr]>0){if(l.endpointsuffix){var v=l.location?l.location+".":"";l[Cd]=l[Cd]||"https://"+v+"dc."+l.endpointsuffix}l[Cd]=l[Cd]||Gm,Ni(l[Cd],"/")&&(l[Cd]=l[Cd].slice(0,-1))}return l}var Dr=function(){function i(o,l,v){var S=this,I=this;I.ver=1,I.sampleRate=100,I.tags={},I[bf]=gi(o,v)||Dd,I.data=l,I.time=Vc(new Date),I.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return S.sampleRate===100?4:1},tags:1,data:1}}return i}(),jr=function(){function i(o,l,v,S){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var I=this;I.ver=2,I[bf]=gi(o,l)||Dd,I[Qs]=Ep(o,v),I[_l]=Tp(o,S)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.Event",i.dataType="EventData",i}(),ln="<no_method>",tn="error",Xt="stack",ea="stackDetails",Xe="errorSrc",ft="message",yr="description";function lr(i,o){var l=i;return l&&!Ft(l)&&(JSON&&JSON[Sp]?(l=JSON[Sp](i),o&&(!l||l==="{}")&&(rt(i[yp])?l=i[yp]():l=""+i)):l=""+i+" - (Missing JSON.stringify)"),l||""}function Et(i,o){var l=i;return i&&(l&&!Ft(l)&&(l=i[ft]||i[yr]||l),l&&!Ft(l)&&(l=lr(l,!0)),i.filename&&(l=l+" @"+(i.filename||"")+":"+(i.lineno||"?")+":"+(i.colno||"?"))),o&&o!=="String"&&o!=="Object"&&o!=="Error"&&$u(l||"",o)===-1&&(l=o+": "+l),l||""}function Rr(i){try{if(yn(i))return"hasFullStack"in i&&"typeName"in i}catch{}return!1}function It(i){try{if(yn(i))return"ver"in i&&"exceptions"in i&&"properties"in i}catch{}return!1}function Ma(i){return i&&i.src&&Ft(i.src)&&i.obj&&at(i.obj)}function ut(i){var o=i||"";Ft(o)||(Ft(o[Xt])?o=o[Xt]:o=""+o);var l=o[sm](`
`);return{src:o,obj:l}}function Tn(i){for(var o=[],l=i[sm](`
`),v=0;v<l[Kr];v++){var S=l[v];l[v+1]&&(S+="@"+l[v+1],v++),o[mv](S)}return{src:i,obj:o}}function In(i){var o=null;if(i)try{if(i[Xt])o=ut(i[Xt]);else if(i[tn]&&i[tn][Xt])o=ut(i[tn][Xt]);else if(i.exception&&i.exception[Xt])o=ut(i.exception[Xt]);else if(Ma(i))o=i;else if(Ma(i[ea]))o=i[ea];else if(zo()&&zo().opera&&i[ft])o=Tn(i[xd]);else if(i.reason&&i.reason[Xt])o=ut(i.reason[Xt]);else if(Ft(i))o=ut(i);else{var l=i[ft]||i[yr]||"";Ft(i[Xe])&&(l&&(l+=`
`),l+=" from "+i[Xe]),l&&(o=ut(l))}}catch(v){o=ut(v)}return o||{src:"",obj:null}}function yi(i){var o="";return i&&(i.obj?Pt(i.obj,function(l){o+=l+`
`}):o=i.src||""),o}function _c(i){var o,l=i.obj;if(l&&l[Kr]>0){o=[];var v=0,S=0;Pt(l,function(ue){var xe=ue[yp]();if(tu.regex.test(xe)){var he=new tu(xe,v++);S+=he[Ef],o[mv](he)}});var I=32*1024;if(S>I)for(var A=0,L=o[Kr]-1,Y=0,B=A,X=L;A<L;){var le=o[A][Ef],fe=o[L][Ef];if(Y+=le+fe,Y>I){var de=X-B+1;o.splice(B,de);break}B=A,X=L,A++,L--}}return o}function Ui(i){var o="";if(i&&(o=i.typeName||i[bf]||"",!o))try{var l=/function (.{1,200})\(/,v=l.exec(i.constructor[yp]());o=v&&v[Kr]>1?v[1]:""}catch{}return o}function If(i){if(i)try{if(!Ft(i)){var o=Ui(i),l=lr(i,!1);return(!l||l==="{}")&&(i[tn]&&(i=i[tn],o=Ui(i)),l=lr(i,!0)),$u(l,o)!==0&&o!=="String"?o+":"+l:l}}catch{}return""+(i||"")}var _s=function(){function i(o,l,v,S,I,A){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var L=this;L.ver=2,It(l)?(L[mc]=l[mc]||[],L[Qs]=l[Qs],L[_l]=l[_l],l[Ou]&&(L[Ou]=l[Ou]),l.id&&(L.id=l.id,l[Qs].id=l.id),l[wp]&&(L[wp]=l[wp]),Ve(l[Pd])||(L[Pd]=l[Pd])):(v||(v={}),A&&(v.id=A),L[mc]=[new Lo(o,l,v)],L[Qs]=Ep(o,v),L[_l]=Tp(o,S),I&&(L[Ou]=I),A&&(L.id=A))}return i.CreateAutoException=function(o,l,v,S,I,A,L,Y){var B,X=Ui(I||A||o);return B={},B[xd]=Et(o,X),B.url=l,B.lineNumber=v,B.columnNumber=S,B.error=If(I||A||o),B.evt=If(A||o),B[Ru]=X,B.stackDetails=In(L||I||A),B.errorSrc=Y,B},i.CreateFromInterface=function(o,l,v,S){var I=l[mc]&&Yu(l[mc],function(L){return Lo[Zh](o,L)}),A=new i(o,Zi(Zi({},l),{exceptions:I}),v,S);return A},i.prototype.toInterface=function(){var o,l=this,v=l.exceptions,S=l.properties,I=l.measurements,A=l.severityLevel,L=l.problemGroup,Y=l.id,B=l.isManual,X=v instanceof Array&&Yu(v,function(le){return le.toInterface()})||void 0;return o={ver:"4.0"},o[mc]=X,o.severityLevel=A,o.properties=S,o.measurements=I,o.problemGroup=L,o.id=Y,o.isManual=B,o},i.CreateSimpleException=function(o,l,v,S,I,A){var L;return{exceptions:[(L={},L[Hm]=!0,L.message=o,L.stack=I,L.typeName=l,L)]}},i.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",i.dataType="ExceptionData",i.formatError=If,i}(),Lo=function(){function i(o,l,v){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var S=this;if(Rr(l))S[Ru]=l[Ru],S[xd]=l[xd],S[Xt]=l[Xt],S[Mo]=l[Mo]||[],S[Hm]=l[Hm];else{var I=l,A=I&&I.evt;Ht(I)||(I=I[tn]||A||I),S[Ru]=gi(o,Ui(I))||Dd,S[xd]=bp(o,Et(l||I,S[Ru]))||Dd;var L=l[ea]||In(l);S[Mo]=_c(L),at(S[Mo])&&Yu(S[Mo],function(Y){Y[hv]=gi(o,Y[hv]),Y[hc]=gi(o,Y[hc])}),S[Xt]=Vn(o,yi(L)),S.hasFullStack=at(S.parsedStack)&&S.parsedStack[Kr]>0,v&&(v[Ru]=v[Ru]||S[Ru])}}return i.prototype.toInterface=function(){var o,l=this,v=l[Mo]instanceof Array&&Yu(l[Mo],function(I){return I.toInterface()}),S=(o={id:l.id,outerId:l.outerId,typeName:l[Ru],message:l[xd],hasFullStack:l[Hm],stack:l[Xt]},o[Mo]=v||void 0,o);return S},i.CreateFromInterface=function(o,l){var v=l[Mo]instanceof Array&&Yu(l[Mo],function(I){return tu[Zh](I)})||l[Mo],S=new i(o,Zi(Zi({},l),{parsedStack:v}));return S},i}(),tu=function(){function i(o,l){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var v=this;if(v[Ef]=0,typeof o=="string"){var S=o;v[_v]=l,v[Tf]=ln,v[hv]=Wn(S),v[hc]="",v[gv]=0;var I=S.match(i.regex);I&&I[Kr]>=5&&(v[Tf]=Wn(I[2])||v[Tf],v[hc]=Wn(I[4]),v[gv]=parseInt(I[5])||0)}else v[_v]=o[_v],v[Tf]=o[Tf],v[hv]=o[hv],v[hc]=o[hc],v[gv]=o[gv],v[Ef]=0;v.sizeInBytes+=v.method[Kr],v.sizeInBytes+=v.fileName[Kr],v.sizeInBytes+=v.assembly[Kr],v[Ef]+=i.baseSize,v.sizeInBytes+=v.level.toString()[Kr],v.sizeInBytes+=v.line.toString()[Kr]}return i.CreateFromInterface=function(o){return new i(o,null)},i.prototype.toInterface=function(){var o=this;return{level:o[_v],method:o[Tf],assembly:o[hv],fileName:o[hc],line:o[gv]}},i.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,i.baseSize=58,i}(),ta=function(){function i(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return i}(),Jr=function(){function i(o,l,v,S,I,A,L,Y,B){this.aiDataContract={ver:1,metrics:1,properties:0};var X=this;X.ver=2;var le=new ta;le[Jh]=S>0?S:void 0,le.max=isNaN(A)||A===null?void 0:A,le.min=isNaN(I)||I===null?void 0:I,le[bf]=gi(o,l)||Dd,le.value=v,le.stdDev=isNaN(L)||L===null?void 0:L,X.metrics=[le],X[Qs]=Ep(o,Y),X[_l]=Tp(o,B)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",i.dataType="MetricData",i}(),ra="";function La(i){(isNaN(i)||i<0)&&(i=0),i=Math.round(i);var o=ra+i%1e3,l=ra+Math.floor(i/1e3)%60,v=ra+Math.floor(i/(1e3*60))%60,S=ra+Math.floor(i/(1e3*60*60))%24,I=Math.floor(i/(1e3*60*60*24));return o=o[Kr]===1?"00"+o:o[Kr]===2?"0"+o:o,l=l[Kr]<2?"0"+l:l,v=v[Kr]<2?"0"+v:v,S=S[Kr]<2?"0"+S:S,(I>0?I+".":ra)+S+":"+v+":"+l+"."+o}var ru=function(){function i(o,l,v,S,I,A,L){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var Y=this;Y.ver=2,Y.id=Qh(o,L),Y.url=eu(o,v),Y[bf]=gi(o,l)||Dd,isNaN(S)||(Y[yv]=La(S)),Y[Qs]=Ep(o,I),Y[_l]=Tp(o,A)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",i.dataType="PageviewData",i}(),gc=function(){function i(o,l,v,S,I,A,L,Y,B,X,le,fe){B===void 0&&(B="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var de=this;de.ver=2,de.id=l,de[yv]=La(I),de.success=A,de.resultCode=L+"",de.type=gi(o,B);var ue=De(o,v,Y,S);de.data=eu(o,S)||ue.data,de.target=gi(o,ue.target),X&&(de.target="".concat(de.target," | ").concat(X)),de[bf]=gi(o,ue[bf]),de[Qs]=Ep(o,le),de[_l]=Tp(o,fe)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",i.dataType="RemoteDependencyData",i}(),ji=function(){function i(o,l,v,S,I){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var A=this;A.ver=2,l=l||Dd,A[xd]=bp(o,l),A[Qs]=Ep(o,S),A[_l]=Tp(o,I),v&&(A[Ou]=v)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.Message",i.dataType="MessageData",i}(),Nf=function(){function i(o,l,v,S,I,A,L){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var Y=this;Y.ver=2,Y.url=eu(o,v),Y[bf]=gi(o,l)||Dd,Y[Qs]=Ep(o,I),Y[_l]=Tp(o,A),L&&(Y.domProcessing=L.domProcessing,Y[yv]=L[yv],Y.networkConnect=L.networkConnect,Y.perfTotal=L.perfTotal,Y[hh]=L[hh],Y.sentRequest=L.sentRequest)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",i.dataType="PageviewPerformanceData",i}(),nu=function(){function i(o,l){this.aiDataContract={baseType:1,baseData:1},this.baseType=o,this.baseData=l}return i}(),cm=Ku({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function yc(i){var o="ai."+i+".";return function(l){return o+l}}var Df=yc("application"),_a=yc("device"),Ip=yc("location"),Cf=yc("operation"),Sv=yc("session"),ku=yc("user"),Si=yc("cloud"),xf=yc("internal"),a=function(i){Ll(o,i);function o(){return i.call(this)||this}return o}(up({applicationVersion:Df("ver"),applicationBuild:Df("build"),applicationTypeId:Df("typeId"),applicationId:Df("applicationId"),applicationLayer:Df("layer"),deviceId:_a("id"),deviceIp:_a("ip"),deviceLanguage:_a("language"),deviceLocale:_a("locale"),deviceModel:_a("model"),deviceFriendlyName:_a("friendlyName"),deviceNetwork:_a("network"),deviceNetworkName:_a("networkName"),deviceOEMName:_a("oemName"),deviceOS:_a("os"),deviceOSVersion:_a("osVersion"),deviceRoleInstance:_a("roleInstance"),deviceRoleName:_a("roleName"),deviceScreenResolution:_a("screenResolution"),deviceType:_a("type"),deviceMachineName:_a("machineName"),deviceVMName:_a("vmName"),deviceBrowser:_a("browser"),deviceBrowserVersion:_a("browserVersion"),locationIp:Ip("ip"),locationCountry:Ip("country"),locationProvince:Ip("province"),locationCity:Ip("city"),operationId:Cf("id"),operationName:Cf("name"),operationParentId:Cf("parentId"),operationRootId:Cf("rootId"),operationSyntheticSource:Cf("syntheticSource"),operationCorrelationVector:Cf("correlationVector"),sessionId:Sv("id"),sessionIsFirst:Sv("isFirst"),sessionIsNew:Sv("isNew"),userAccountAcquisitionDate:ku("accountAcquisitionDate"),userAccountId:ku("accountId"),userAgent:ku("userAgent"),userId:ku("id"),userStoreRegion:ku("storeRegion"),userAuthUserId:ku("authUserId"),userAnonymousUserAcquisitionDate:ku("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:ku("authUserAcquisitionDate"),cloudName:Si("name"),cloudRole:Si("role"),cloudRoleVer:Si("roleVer"),cloudRoleInstance:Si("roleInstance"),cloudEnvironment:Si("environment"),cloudLocation:Si("location"),cloudDeploymentUnit:Si("deploymentUnit"),internalNodeName:xf("nodeName"),internalSdkVersion:xf("sdkVersion"),internalAgentVersion:xf("agentVersion"),internalSnippet:xf("snippet"),internalSdkSrc:xf("sdkSrc")})),c=new a;function p(i,o){R_(i,null,null,o)}function g(i){var o=$f(),l=Go(),v=!1,S=[],I=1;l&&!Ve(l.onLine)&&!l.onLine&&(I=2);var A=0,L=fe(),Y=Nd(el("OfflineListener"),i);try{if(X(zo())&&(v=!0),o){var B=o.body||o;B.ononline&&X(B)&&(v=!0)}}catch{v=!1}function X(He){var ct=!1;return He&&(ct=Wh(He,"online",xe,Y),ct&&Wh(He,"offline",he,Y)),ct}function le(){return L}function fe(){return!(A===2||I===2)}function de(){var He=fe();L!==He&&(L=He,Pt(S,function(ct){var Sr={isOnline:L,rState:I,uState:A};try{ct(Sr)}catch{}}))}function ue(He){A=He,de()}function xe(){I=1,de()}function he(){I=2,de()}function ke(){var He=zo();if(He&&v){if(p(He,Y),o){var ct=o.body||o;nt(ct.ononline)||p(ct,Y)}v=!1}}function Me(He){return S[mv](He),{rm:function(){var ct=S.indexOf(He);if(ct>-1)return S.splice(ct,1)}}}return{isOnline:le,isListening:function(){return v},unload:ke,addListener:Me,setOnlineState:ue}}var b="AppInsightsChannelPlugin",x="duration",R="tags",P="deviceType",M="data",j="name",G="traceID",H="length",K="stringify",te="measurements",Z="dataType",_e="envelopeType",ye="toString",Fe="_get",ze="enqueue",et="count",rr="eventsLimitInMem",sr="push",Un="item",fn="emitLineDelimitedJson",jn="clear",Yi="createNew",wi="markAsSent",Pf="clearSent",lm="bufferOverride",Af="BUFFER_KEY",Qe="SENT_BUFFER_KEY",jt="concat",Nn="MAX_BUFFER_SIZE",Oe="triggerSend",Nt="diagLog",na="initialize",oo="_sender",Fo="endpointUrl",Or="instrumentationKey",bi="customHeaders",Xa="maxBatchSizeInBytes",so="onunloadDisableBeacon",Rf="isBeaconApiDisabled",Mu="alwaysUseXhrOverride",wv="disableXhr",Ad="enableSessionStorageBuffer",Of="_buffer",bv="onunloadDisableFetch",Vm="disableSendBeaconSplit",Ia="enableSendPromise",uo="getSenderInst",be="unloadTransports",mt="convertUndefined",Vt="maxBatchInterval",Rt="serialize",Kt="_onError",Rn="_onPartialSuccess",mn="_onSuccess",Na="itemsReceived",co="itemsAccepted",Uo="oriPayload",kf="baseType",Ev="sampleRate",gh="eventsSendRequest",gg="getSamplingScore",Ey="getHashCodeScore",e_="baseType",Yn="baseData",Fa="properties",O_="true";function Ua(i,o,l){return Su(i,o,l,Yr)}function X0(i,o,l){var v=l[R]=l[R]||{},S=o.ext=o.ext||{},I=o[R]=o[R]||[],A=S.user;A&&(Ua(v,c.userAuthUserId,A.authId),Ua(v,c.userId,A.id||A.localId));var L=S.app;L&&Ua(v,c.sessionId,L.sesId);var Y=S.device;Y&&(Ua(v,c.deviceId,Y.id||Y.localId),Ua(v,c[P],Y.deviceClass),Ua(v,c.deviceIp,Y.ip),Ua(v,c.deviceModel,Y.model),Ua(v,c[P],Y[P]));var B=o.ext.web;if(B){Ua(v,c.deviceLanguage,B.browserLang),Ua(v,c.deviceBrowserVersion,B.browserVer),Ua(v,c.deviceBrowser,B.browser);var X=l[M]=l[M]||{},le=X[Yn]=X[Yn]||{},fe=le[Fa]=le[Fa]||{};Ua(fe,"domain",B.domain),Ua(fe,"isManual",B.isManual?O_:null),Ua(fe,"screenRes",B.screenRes),Ua(fe,"userConsent",B.userConsent?O_:null)}var de=S.os;de&&(Ua(v,c.deviceOS,de[j]),Ua(v,c.deviceOSVersion,de.osVer));var ue=S.trace;ue&&(Ua(v,c.operationParentId,ue.parentID),Ua(v,c.operationName,gi(i,ue[j])),Ua(v,c.operationId,ue[G]));for(var xe={},he=I[H]-1;he>=0;he--){var ke=I[he];Ct(ke,function(He,ct){xe[He]=ct}),I.splice(he,1)}Ct(I,function(He,ct){xe[He]=ct});var Me=Zi(Zi({},v),xe);Me[c.internalSdkVersion]||(Me[c.internalSdkVersion]=gi(i,"javascript:".concat(NI.Version),64)),l[R]=$s(Me)}function Km(i,o,l){Ve(i)||Ct(i,function(v,S){Wt(S)?l[v]=S:Ft(S)?o[v]=S:Gs()&&(o[v]=Fi()[K](S))})}function yh(i,o){Ve(i)||Ct(i,function(l,v){i[l]=v||o})}function Sh(i,o,l,v){var S=new Dr(i,v,o);Ua(S,"sampleRate",l[ph]),(l[Yn]||{}).startTime&&(S.time=Vc(l[Yn].startTime)),S.iKey=l.iKey;var I=l.iKey.replace(/-/g,"");return S[j]=S[j].replace("{0}",I),X0(i,l,S),l[R]=l[R]||[],$s(S)}function wh(i,o){Ve(o[Yn])&&St(i,1,46,"telemetryItem.baseData cannot be null.")}var NI={Version:"3.3.4"};function DI(i,o,l){wh(i,o);var v=o[Yn][te]||{},S=o[Yn][Fa]||{};Km(o[M],S,v),Ve(l)||yh(S,l);var I=o[Yn];if(Ve(I))return Cu(i,"Invalid input for dependency data"),null;var A=I[Fa]&&I[Fa][vh]?I[Fa][vh]:"GET",L=new gc(i,I.id,I.target,I[j],I[x],I.success,I.responseCode,A,I.type,I.correlationContext,S,v),Y=new nu(gc[Z],L);return Sh(i,gc[_e],o,Y)}function Q0(i,o,l){wh(i,o);var v={},S={};o[e_]!==jr[Z]&&(v.baseTypeSource=o[e_]),o[e_]===jr[Z]?(v=o[Yn][Fa]||{},S=o[Yn][te]||{}):o[Yn]&&Km(o[Yn],v,S),Km(o[M],v,S),Ve(l)||yh(v,l);var I=o[Yn][j],A=new jr(i,I,v,S),L=new nu(jr[Z],A);return Sh(i,jr[_e],o,L)}function CI(i,o,l){wh(i,o);var v=o[Yn][te]||{},S=o[Yn][Fa]||{};Km(o[M],S,v),Ve(l)||yh(S,l);var I=o[Yn],A=_s.CreateFromInterface(i,I,S,v),L=new nu(_s[Z],A);return Sh(i,_s[_e],o,L)}function xI(i,o,l){wh(i,o);var v=o[Yn],S=v[Fa]||{},I=v[te]||{};Km(o[M],S,I),Ve(l)||yh(S,l);var A=new Jr(i,v[j],v.average,v.sampleCount,v.min,v.max,v.stdDev,S,I),L=new nu(Jr[Z],A);return Sh(i,Jr[_e],o,L)}function PI(i,o,l){wh(i,o);var v,S=o[Yn];!Ve(S)&&!Ve(S[Fa])&&!Ve(S[Fa][x])?(v=S[Fa][x],delete S[Fa][x]):!Ve(o[M])&&!Ve(o[M][x])&&(v=o[M][x],delete o[M][x]);var I=o[Yn],A;((o.ext||{}).trace||{})[G]&&(A=o.ext.trace[G]);var L=I.id||A,Y=I[j],B=I.uri,X=I[Fa]||{},le=I[te]||{};if(Ve(I.refUri)||(X.refUri=I.refUri),Ve(I.pageType)||(X.pageType=I.pageType),Ve(I.isLoggedIn)||(X.isLoggedIn=I.isLoggedIn[ye]()),!Ve(I[Fa])){var fe=I[Fa];Ct(fe,function(xe,he){X[xe]=he})}Km(o[M],X,le),Ve(l)||yh(X,l);var de=new ru(i,Y,B,v,X,le,L),ue=new nu(ru[Z],de);return Sh(i,ru[_e],o,ue)}function AI(i,o,l){wh(i,o);var v=o[Yn],S=v[j],I=v.uri||v.url,A=v[Fa]||{},L=v[te]||{};Km(o[M],A,L),Ve(l)||yh(A,l);var Y=new Nf(i,S,I,void 0,A,L,v),B=new nu(Nf[Z],Y);return Sh(i,Nf[_e],o,B)}function RI(i,o,l){wh(i,o);var v=o[Yn].message,S=o[Yn].severityLevel,I=o[Yn][Fa]||{},A=o[Yn][te]||{};Km(o[M],I,A),Ve(l)||yh(I,l);var L=new ji(i,v,S,I,A),Y=new nu(ji[Z],L);return Sh(i,ji[_e],o,Y)}var eS=function(){function i(o,l){var v=[],S=!1,I=l.maxRetryCnt;this[Fe]=function(){return v},this._set=function(A){return v=A,v},Pa(i,this,function(A){A[ze]=function(L){if(A[et]()>=l[rr]){S||(St(o,2,105,"Maximum in-memory buffer size reached: "+A[et](),!0),S=!0);return}L.cnt=L.cnt||0,!(!Ve(I)&&L.cnt>I)&&v[sr](L)},A[et]=function(){return v[H]},A.size=function(){for(var L=v[H],Y=0;Y<v[H];Y++)L+=v[Y].item[H];return l[fn]||(L+=2),L},A[jn]=function(){v=[],S=!1},A.getItems=function(){return v.slice(0)},A.batchPayloads=function(L){if(L&&L[H]>0){var Y=[];Pt(L,function(X){Y[sr](X[Un])});var B=l[fn]?Y.join(`
`):"["+Y.join(",")+"]";return B}return null},A[Yi]=function(L,Y,B){var X=v.slice(0);L=L||o,Y=Y||{};var le=B?new tS(L,Y):new Ty(L,Y);return Pt(X,function(fe){le[ze](fe)}),le}})}return i.__ieDyn=1,i}(),Ty=function(i){Ll(o,i);function o(l,v){var S=i.call(this,l,v)||this;return Pa(o,S,function(I,A){I[wi]=function(L){A[jn]()},I[Pf]=function(L){}}),S}return o.__ieDyn=1,o}(eS),OI=["AI_buffer","AI_sentBuffer"],tS=function(i){Ll(o,i);function o(v,S){var I=i.call(this,v,S)||this,A=!1,L=S==null?void 0:S.namePrefix,Y=S[lm]||{getItem:Ce,setItem:Te},B=Y.getItem,X=Y.setItem,le=S.maxRetryCnt;return Pa(o,I,function(fe,de){var ue=ct(o[Af]),xe=ct(o[Qe]),he=Xr(),ke=xe[jt](he),Me=fe._set(ue[jt](ke));Me[H]>o[Nn]&&(Me[H]=o[Nn]),Zr(o[Qe],[]),Zr(o[Af],Me),fe[ze]=function(Qt){if(fe[et]()>=o[Nn]){A||(St(v,2,67,"Maximum buffer size reached: "+fe[et](),!0),A=!0);return}Qt.cnt=Qt.cnt||0,!(!Ve(le)&&Qt.cnt>le)&&(de[ze](Qt),Zr(o.BUFFER_KEY,fe[Fe]()))},fe[jn]=function(){de[jn](),Zr(o.BUFFER_KEY,fe[Fe]()),Zr(o[Qe],[]),A=!1},fe[wi]=function(Qt){Zr(o[Af],fe._set(He(Qt,fe[Fe]())));var Yt=ct(o[Qe]);Yt instanceof Array&&Qt instanceof Array&&(Yt=Yt[jt](Qt),Yt[H]>o[Nn]&&(St(v,1,67,"Sent buffer reached its maximum size: "+Yt[H],!0),Yt[H]=o[Nn]),Zr(o[Qe],Yt))},fe[Pf]=function(Qt){var Yt=ct(o[Qe]);Yt=He(Qt,Yt),Zr(o[Qe],Yt)},fe[Yi]=function(Qt,Yt,Wr){Wr=!!Wr;var ja=fe[Fe]().slice(0),aa=ct(o[Qe]).slice(0);Qt=Qt||v,Yt=Yt||{},fe[jn]();var Je=Wr?new o(Qt,Yt):new Ty(Qt,Yt);return Pt(ja,function($t){Je[ze]($t)}),Wr&&Je[wi](aa),Je};function He(Qt,Yt){var Wr=[],ja=[];return Pt(Qt,function(aa){ja[sr](aa[Un])}),Pt(Yt,function(aa){!rt(aa)&&ui(ja,aa[Un])===-1&&Wr[sr](aa)}),Wr}function ct(Qt){var Yt=Qt;return Yt=L?L+"_"+Yt:Yt,Sr(Yt)}function Sr(Qt){try{var Yt=B(v,Qt);if(Yt){var Wr=Fi().parse(Yt);if(Ft(Wr)&&(Wr=Fi().parse(Wr)),Wr&&at(Wr))return Wr}}catch(ja){St(v,1,42," storage key: "+Qt+", "+fa(ja),{exception:ar(ja)})}return[]}function Zr(Qt,Yt){var Wr=Qt;try{Wr=L?L+"_"+Wr:Wr;var ja=JSON[K](Yt);X(v,Wr,ja)}catch(aa){X(v,Wr,JSON[K]([])),St(v,2,41," storage key: "+Wr+", "+fa(aa)+". Buffer cleared",{exception:ar(aa)})}}function Xr(){var Qt=[];try{return Pt(OI,function(Yt){var Wr=_n(Yt);if(Qt=Qt[jt](Wr),L){var ja=L+"_"+Yt,aa=_n(ja);Qt=Qt[jt](aa)}}),Qt}catch(Yt){St(v,2,41,"Transfer events from previous buffers: "+fa(Yt)+". previous Buffer items can not be removed",{exception:ar(Yt)})}return[]}function _n(Qt){try{var Yt=Sr(Qt),Wr=[];return Pt(Yt,function(ja){var aa={item:ja,cnt:0};Wr[sr](aa)}),Be(v,Qt),Wr}catch{}return[]}}),I}var l;return l=o,o.VERSION="_1",o.BUFFER_KEY="AI_buffer"+l.VERSION,o.SENT_BUFFER_KEY="AI_sentBuffer"+l.VERSION,o.MAX_BUFFER_SIZE=2e3,o}(eS),kI=function(){function i(o){Pa(i,this,function(l){l[Rt]=function(A){var L=v(A,"root");try{return Fi()[K](L)}catch(Y){St(o,1,48,Y&&rt(Y[ye])?Y[ye]():"Error serializing object",null,!0)}};function v(A,L){var Y="__aiCircularRefCheck",B={};if(!A)return St(o,1,48,"cannot serialize object because it is null or undefined",{name:L},!0),B;if(A[Y])return St(o,2,50,"Circular reference detected while serializing object",{name:L},!0),B;if(!A.aiDataContract){if(L==="measurements")B=I(A,"number",L);else if(L==="properties")B=I(A,"string",L);else if(L==="tags")B=I(A,"string",L);else if(at(A))B=S(A,L);else{St(o,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:L},!0);try{Fi()[K](A),B=A}catch(X){St(o,1,48,X&&rt(X[ye])?X[ye]():"Error serializing object",null,!0)}}return B}return A[Y]=!0,Ct(A.aiDataContract,function(X,le){var fe=rt(le)?le()&1:le&1,de=rt(le)?le()&4:le&4,ue=le&2,xe=A[X]!==void 0,he=yn(A[X])&&A[X]!==null;if(fe&&!xe&&!ue)St(o,1,24,"Missing required field specification. The field is required but not present on source",{field:X,name:L});else if(!de){var ke=void 0;he?ue?ke=S(A[X],X):ke=v(A[X],X):ke=A[X],ke!==void 0&&(B[X]=ke)}}),delete A[Y],B}function S(A,L){var Y;if(A)if(!at(A))St(o,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:L},!0);else{Y=[];for(var B=0;B<A[H];B++){var X=A[B],le=v(X,L+"["+B+"]");Y[sr](le)}}return Y}function I(A,L,Y){var B;return A&&(B={},Ct(A,function(X,le){if(L==="string")le===void 0?B[X]="undefined":le===null?B[X]="null":le[ye]?B[X]=le[ye]():B[X]="invalid field: toString() is not defined.";else if(L==="number")if(le===void 0)B[X]="undefined";else if(le===null)B[X]="null";else{var fe=parseFloat(le);B[X]=fe}else B[X]="invalid field: "+Y+" is of unknown type.",St(o,1,B[X],null,!0)})),B}})}return i.__ieDyn=1,i}(),MI=8,LI=function(){function i(){}return i.prototype.getHashCodeScore=function(o){var l=this.getHashCode(o)/i.INT_MAX_VALUE;return l*100},i.prototype.getHashCode=function(o){if(o==="")return 0;for(;o[H]<MI;)o=o[jt](o);for(var l=5381,v=0;v<o[H];++v)l=(l<<5)+l+o.charCodeAt(v),l=l&l;return Math.abs(l)},i.INT_MAX_VALUE=2147483647,i}(),FI=function(){function i(){var o=this,l=new LI,v=new a;o[gg]=function(S){var I=0;return S[R]&&S[R][v.userId]?I=l.getHashCodeScore(S[R][v.userId]):S.ext&&S.ext.user&&S.ext.user.id?I=l[Ey](S.ext.user.id):S[R]&&S[R][v.operationId]?I=l.getHashCodeScore(S[R][v.operationId]):S.ext&&S.ext.telemetryTrace&&S.ext.telemetryTrace[G]?I=l.getHashCodeScore(S.ext.telemetryTrace[G]):I=Math.random()*100,I}}return i}(),UI=function(){function i(o,l){this.INT_MAX_VALUE=2147483647;var v=l||Ks(null);(o>100||o<0)&&(v.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:o},!0),o=100),this[Ev]=o,this.samplingScoreGenerator=new FI}return i.prototype.isSampledIn=function(o){var l=this[Ev],v=!1;return l==null||l>=100||o.baseType===Jr[Z]?!0:(v=this.samplingScoreGenerator[gg](o)<l,v)},i}(),Da,fm,Tv=void 0,rS="",jI=65e3;function nS(i){try{return i.responseText}catch{}return null}function YI(i){return i&&i.sendPOST}var aS=qa((Da={endpointUrl:ol(Yr,Gm+vv)},Da[fn]=ro(),Da[Vt]=15e3,Da[Xa]=102400,Da.disableTelemetry=ro(),Da[Ad]=ro(!0),Da.isRetryDisabled=ro(),Da[Rf]=ro(!0),Da[Vm]=ro(!0),Da[wv]=ro(),Da[bv]=ro(),Da[so]=ro(),Da[Or]=Tv,Da.namePrefix=Tv,Da.samplingPercentage=ol($I,100),Da[bi]=Tv,Da[mt]=Tv,Da[rr]=1e4,Da[lm]=!1,Da.httpXHROverride={isVal:YI,v:Tv},Da[Mu]=ro(),Da.transports=Tv,Da.retryCodes=Tv,Da.maxRetryCnt={isVal:Wt,v:10},Da));function $I(i){return!isNaN(i)&&i>0&&i<=100}var qI=(fm={},fm[jr.dataType]=Q0,fm[ji.dataType]=RI,fm[ru.dataType]=PI,fm[Nf.dataType]=AI,fm[_s.dataType]=CI,fm[Jr.dataType]=xI,fm[gc.dataType]=DI,fm),iS=function(i){Ll(o,i);function o(){var l=i.call(this)||this;l.priority=1001,l.identifier=b;var v,S,I,A,L,Y,B,X=0,le,fe,de,ue,xe,he,ke,Me,He,ct,Sr,Zr,Xr,_n,Qt,Yt,Wr,ja,aa,Je,$t,Dn,Le,nr,ia,Cn,gs;return Pa(o,l,function(Se,lo){cS(),Se.pause=function(){Xm(),I=!0},Se.resume=function(){I&&(I=!1,S=null,gn(),i_())},Se.flush=function(ie,we,_t){if(ie===void 0&&(ie=!0),!I){Xm();try{return Se[Oe](ie,null,_t||1)}catch(gt){St(Se[Nt](),1,22,"flush failed, telemetry will not be collected: "+fa(gt),{exception:ar(gt)})}}},Se.onunloadFlush=function(){if(!I)if(ke||Je)try{return Se[Oe](!0,iu,2)}catch(ie){St(Se[Nt](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+fa(ie),{exception:ar(ie)})}else Se.flush(!1)},Se.addHeader=function(ie,we){B[ie]=we},Se[na]=function(ie,we,_t,gt){Se.isInitialized()&&St(Se[Nt](),1,28,"Sender is already initialized"),lo[na](ie,we,_t,gt);var Er=Se.identifier;L=new kI(we.logger),v=0,S=null,Se[oo]=null,Y=0;var mr=Se[Nt]();de=Nd(el("Sender"),we.evtNamespace&&we.evtNamespace()),fe=g(de),Se._addHook(Du(ie,function(zr){var Ca=zr.cfg;Ca.storagePrefix&&Ee(Ca.storagePrefix);var Od=fl(null,Ca,we),Cr=Od.getExtCfg(Er,aS),lS=Cr[Fo];if(ue&&lS===ue){var Dy=Ca[Fo];Dy&&Dy!==lS&&(Cr[Fo]=Dy)}tr(Cr[Or])&&(Cr[Or]=Ca[Or]),Hr(Se,"_senderConfig",{g:function(){return Cr}}),xe!==Cr[Fo]&&(ue=xe=Cr[Fo]),we.activeStatus()===Ci.PENDING?Se.pause():we.activeStatus()===Ci.ACTIVE&&Se.resume(),ct&&ct!==Cr[bi]&&Pt(ct,function(ou){delete B[ou.header]}),he=Cr[Xa],ke=(Cr[so]===!1||Cr[Rf]===!1)&&Hs(),Me=Cr[so]===!1&&Hs(),He=Cr[Rf]===!1&&Hs(),Je=Cr[Mu],$t=!!Cr[wv],gs=Cr.retryCodes;var Cy=Cr[lm],o_=!!Cr[Ad]&&(!!Cy||Ke()),fS=Cr.namePrefix,HI=o_!==Yt||o_&&ja!==fS||o_&&Wr!==Cy;if(Se[Of]){if(HI)try{Se._buffer=Se._buffer[Yi](mr,Cr,o_)}catch(ou){St(Se[Nt](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+fa(ou),{exception:ar(ou)})}gn()}else Se[Of]=o_?new tS(mr,Cr):new Ty(mr,Cr);ja=fS,Yt=o_,Wr=Cy,Dn=!Cr[bv]&&va(!0),ia=!!Cr[Vm],Se._sample=new UI(Cr.samplingPercentage,mr),Zr=Cr[Or],!tr(Zr)&&!uS(Zr,Ca)&&St(mr,1,100,"Invalid Instrumentation key "+Zr),ct=Cr[bi],Ft(ue)&&!se(ue)&&ct&&ct[H]>0?Pt(ct,function(ou){l.addHeader(ou.header,ou.value)}):ct=null,aa=Cr[Ia];var dS=ys();Cn?Cn.SetConfig(dS):(Cn=new lv,Cn[na](dS,mr));var bg=Cr.httpXHROverride,Eg=null,L_=null,VI=Gl([3,1,2],Cr.transports);Eg=Cn&&Cn[uo](VI,!1);var xy=Cn&&Cn.getFallbackInst();Le=function(ou,bh){return xt(xy,ou,bh)},nr=function(ou,bh){return xt(xy,ou,bh,!1)},Eg=Je?bg:Eg||bg||xy,Se[oo]=function(ou,bh){return xt(Eg,ou,bh)},Dn&&(le=a_);var Py=Gl([3,1],Cr[be]);Dn||(Py=Py.filter(function(ou){return ou!==2})),L_=Cn&&Cn[uo](Py,!0),L_=Je?bg:L_||bg,(Je||Cr[be]||!le)&&L_&&(le=function(ou,bh){return xt(L_,ou,bh)}),le||(le=Le),Sr=Cr.disableTelemetry,Xr=Cr[mt]||Tv,_n=Cr.isRetryDisabled,Qt=Cr[Vt]}))},Se.processTelemetry=function(ie,we){var _t;we=Se._getTelCtx(we);var gt=we[Nt]();try{var Er=Dp(ie,gt);if(!Er)return;var mr=Zm(ie,gt);if(!mr)return;var zr=L[Rt](mr),Ca=Se[Of];gn(zr);var Od=(_t={},_t[Un]=zr,_t.cnt=0,_t);Ca[ze](Od),i_()}catch(Cr){St(gt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+fa(Cr),{exception:ar(Cr)})}Se.processNext(ie,we)},Se.isCompletelyIdle=function(){return!I&&X===0&&Se._buffer[et]()===0},Se.getOfflineListener=function(){return fe},Se._xhrReadyStateChange=function(ie,we,_t){if(!xp(we))return Rd(ie,we,_t)},Se[Oe]=function(ie,we,_t){ie===void 0&&(ie=!0);var gt;if(!I)try{var Er=Se[Of];if(Sr)Er[jn]();else if(Er[et]()>0){var mr=Er.getItems();wg(_t||0,ie),we?gt=we.call(Se,mr,ie):gt=Se[oo](mr,ie)}Xm()}catch(Ca){var zr=pa();(!zr||zr>9)&&St(Se[Nt](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+fa(Ca),{exception:ar(Ca)})}return gt},Se.getOfflineSupport=function(){var ie;return ie={getUrl:function(){return ue},createPayload:Ie},ie[Rt]=Ya,ie.batch=au,ie.shouldProcess=function(we){return!!Dp(we)},ie},Se._doTeardown=function(ie,we){Se.onunloadFlush(),il(fe,!1),cS()},Se[Kt]=function(ie,we,_t){if(!xp(ie))return Sc(ie,we)},Se[Rn]=function(ie,we){if(!xp(ie))return Wm(ie,we)},Se[mn]=function(ie,we){if(!xp(ie))return Np(ie)},Se._xdrOnLoad=function(ie,we){if(!xp(we))return Qa(ie,we)};function Qa(ie,we){var _t=nS(ie);if(ie&&(_t+""=="200"||_t===""))v=0,Se[mn](we,0);else{var gt=yf(_t);gt&&gt[Na]&&gt[Na]>gt[co]&&!_n?Se[Rn](we,gt):Se[Kt](we,os(ie))}}function ys(){var ie;try{var we={xdrOnComplete:function(gt,Er,mr){var zr=Jm(mr);if(zr)return Qa(gt,zr)},fetchOnComplete:function(gt,Er,mr,zr){var Ca=Jm(zr);if(Ca)return $a(gt.status,Ca,gt.url,Ca[H],gt.statusText,mr||"")},xhrOnComplete:function(gt,Er,mr){var zr=Jm(mr);if(zr)return Rd(gt,zr,zr[H])},beaconOnRetry:function(gt,Er,mr){return Cp(gt,Er,mr)}},_t=(ie={},ie[Ia]=aa,ie.isOneDs=!1,ie.disableCredentials=!1,ie[wv]=$t,ie.disableBeacon=!He,ie.disableBeaconSync=!Me,ie.senderOnCompleteCallBack=we,ie);return _t}catch{}return null}function Rd(ie,we,_t){ie.readyState===4&&$a(ie.status,we,ie.responseURL,_t,vi(ie),nS(ie)||ie.response)}function Sc(ie,we,_t){St(Se[Nt](),2,26,"Failed to send telemetry.",{message:we}),Se._buffer&&Se._buffer[Pf](ie)}function Wm(ie,we){for(var _t=[],gt=[],Er=we.errors.reverse(),mr=0,zr=Er;mr<zr.length;mr++){var Ca=zr[mr],Od=ie.splice(Ca.index,1)[0];Qm(Ca.statusCode)?gt[sr](Od):_t[sr](Od)}ie[H]>0&&Se[mn](ie,we[co]),_t[H]>0&&Se[Kt](_t,vi(null,["partial success",we[co],"of",we.itemsReceived].join(" "))),gt[H]>0&&(M_(gt),St(Se[Nt](),2,40,"Partial success. Delivered: "+ie[H]+", Failed: "+_t[H]+". Will retry to send "+gt[H]+" our of "+we[Na]+" items"))}function Np(ie,we){Se._buffer&&Se._buffer[Pf](ie)}function Jm(ie){try{if(ie){var we=ie,_t=we[Uo];return _t&&_t[H]?_t:null}}catch{}return null}function Dp(ie,we){if(Sr)return!1;if(!ie)return we&&St(we,1,7,"Cannot send empty telemetry"),!1;if(ie.baseData&&!ie[kf])return we&&St(we,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(ie[kf]||(ie[kf]="EventData"),!Se[oo])return we&&St(we,1,28,"Sender was not initialized"),!1;if(ht(ie))ie[ph]=Se._sample[Ev];else return we&&St(we,2,33,"Telemetry item was sampled out and not sent",{SampleRate:Se._sample[Ev]}),!1;return!0}function Zm(ie,we){var _t=ie.iKey||Zr,gt=o.constructEnvelope(ie,_t,we,Xr);if(!gt){St(we,1,47,"Unable to create an AppInsights envelope");return}var Er=!1;if(ie[R]&&ie[R][om]&&(Pt(ie[R][om],function(mr){try{mr&&mr(gt)===!1&&(Er=!0,Cu(we,"Telemetry processor check returns false"))}catch(zr){St(we,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+fa(zr),{exception:ar(zr)},!0)}}),delete ie[R][om]),!Er)return gt}function Ya(ie){var we=rS,_t=Se[Nt]();try{var gt=Dp(ie,_t),Er=null;gt&&(Er=Zm(ie,_t)),Er&&(we=L[Rt](Er))}catch{}return we}function au(ie){var we=rS;return ie&&ie[H]&&(we="["+ie.join(",")+"]"),we}function Ie(ie){var we,_t=$n();return we={urlString:ue},we[M]=ie,we.headers=_t,we}function ht(ie){return Se._sample.isSampledIn(ie)}function er(ie,we,_t,gt){we===200&&ie?Se._onSuccess(ie,ie[H]):gt&&Se[Kt](ie,gt)}function xt(ie,we,_t,gt){gt===void 0&&(gt=!0);var Er=function(Ca,Od,Cr){return er(we,Ca,Od,Cr)},mr=fr(we),zr=ie&&ie.sendPOST;return zr&&mr?(gt&&Se._buffer[wi](we),zr(mr,Er,!_t)):null}function fr(ie){var we;if(at(ie)&&ie[H]>0){var _t=Se[Of].batchPayloads(ie),gt=$n(),Er=(we={},we[M]=_t,we.urlString=ue,we.headers=gt,we.disableXhrSync=$t,we.disableFetchKeepAlive=!Dn,we[Uo]=ie,we);return Er}return null}function $n(){try{var ie=B||{};return se(ue)&&(ie[mh[6]]=mh[7]),ie}catch{}return null}function gn(ie){var we=ie?ie[H]:0;return Se[Of].size()+we>he?((!fe||fe.isOnline())&&Se[Oe](!0,null,10),!0):!1}function $a(ie,we,_t,gt,Er,mr){var zr=null;if(Se._appId||(zr=yf(mr),zr&&zr.appId&&(Se._appId=zr.appId)),(ie<200||ie>=300)&&ie!==0){if((ie===301||ie===307||ie===308)&&!jo(_t)){Se[Kt](we,Er);return}if(fe&&!fe.isOnline()){if(!_n){var Ca=10;M_(we,Ca),St(Se[Nt](),2,40,". Offline - Response Code: ".concat(ie,". Offline status: ").concat(!fe.isOnline(),". Will retry to send ").concat(we.length," items."))}return}!_n&&Qm(ie)?(M_(we),St(Se[Nt](),2,40,". Response code "+ie+". Will retry to send "+we[H]+" items.")):Se[Kt](we,Er)}else jo(_t),ie===206?(zr||(zr=yf(mr)),zr&&!_n?Se[Rn](we,zr):Se[Kt](we,Er)):(v=0,Se[mn](we,gt))}function jo(ie){return Y>=10?!1:!Ve(ie)&&ie!==""&&ie!==ue?(ue=ie,++Y,!0):!1}function iu(ie,we){if(le)le(ie,!1);else{var _t=Cn&&Cn[uo]([3],!0);return xt(_t,ie,we)}}function Cp(ie,we,_t){var gt=ie,Er=gt&&gt[Uo];if(ia)nr&&nr(Er,!0),St(Se[Nt](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var mr=[],zr=0;zr<Er[H];zr++){var Ca=Er[zr],Od=[Ca],Cr=fr(Od);_t(Cr,we)?Se._onSuccess(Od,Od[H]):mr[sr](Ca)}mr[H]>0&&(nr&&nr(mr,!0),St(Se[Nt](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function xp(ie){try{if(ie&&ie[H])return Ft(ie[0])}catch{}return null}function a_(ie,we){var _t=null;if(at(ie)){for(var gt=ie[H],Er=0;Er<ie[H];Er++)gt+=ie[Er].item[H];var mr=Cn.getSyncFetchPayload();mr+gt<=jI?_t=2:Hs()?_t=3:(_t=1,St(Se[Nt](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var zr=Cn&&Cn[uo]([_t],!0);return xt(zr,ie,we)}return null}function M_(ie,we){if(we===void 0&&(we=1),!(!ie||ie[H]===0)){var _t=Se[Of];_t[Pf](ie),v++;for(var gt=0,Er=ie;gt<Er.length;gt++){var mr=Er[gt];mr.cnt=mr.cnt||0,mr.cnt++,_t[ze](mr)}Ny(we),i_()}}function Ny(ie){var we=10,_t;if(v<=1)_t=we;else{var gt=(Math.pow(2,v)-1)/2,Er=Math.floor(Math.random()*gt*we)+1;Er=ie*Er,_t=Math.max(Math.min(Er,3600),we)}var mr=cu()+_t*1e3;S=mr}function i_(){if(!A&&!I){var ie=S?Math.max(0,S-cu()):0,we=Math.max(Qt,ie);A=du(function(){A=null,Se[Oe](!0,null,1)},we)}}function Xm(){A&&A.cancel(),A=null,S=null}function Qm(ie){return Ve(gs)?ie===401||ie===408||ie===429||ie===500||ie===502||ie===503||ie===504:gs[H]&&gs.indexOf(ie)>-1}function Sg(){var ie="getNotifyMgr";return Se.core[ie]?Se.core[ie]():Se.core._notificationManager}function wg(ie,we){var _t=Sg();if(_t&&_t[gh])try{_t[gh](ie,we)}catch(gt){St(Se[Nt](),1,74,"send request notification failed: "+fa(gt),{exception:ar(gt)})}}function uS(ie,we){var _t=we.disableInstrumentationKeyValidation,gt=Ve(_t)?!1:_t;if(gt)return!0;var Er="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",mr=new RegExp(Er);return mr.test(ie)}function cS(){Se[oo]=null,Se[Of]=null,Se._appId=null,Se._sample=null,B={},fe=null,v=0,S=null,I=!1,A=null,L=null,Y=0,X=0,le=null,de=null,ue=null,xe=null,he=0,ke=!1,ct=null,Sr=!1,Zr=null,Xr=Tv,_n=!1,Yt=null,ja=Tv,$t=!1,Dn=!1,ia=!1,Le=null,nr=null,Cn=null,Hr(Se,"_senderConfig",{g:function(){return wt({},aS)}})}}),l}return o.constructEnvelope=function(l,v,S,I){var A;v!==l.iKey&&!Ve(v)?A=Zi(Zi({},l),{iKey:v}):A=l;var L=qI[A.baseType]||Q0;return L(S,A,I)},o}(en),t_="instrumentationKey",yg="connectionString",oS="instrumentationkey",r_="endpointUrl",sS="ingestionendpoint",k_="userOverrideEndpointUrl",n_,Iy=void 0,BI=(n_={diagnosticLogInterval:ol(zI,1e4)},n_[yg]=Iy,n_[r_]=Iy,n_[t_]=Iy,n_.extensionConfig={},n_);function zI(i){return i&&i>0}var GI=function(){function i(o){var l=new pl,v;(Ve(o)||Ve(o[t_])&&Ve(o[yg]))&&pr("Invalid input configuration"),Pa(i,this,function(I){Hr(I,"config",{g:function(){return v}}),A(),I.initialize=A,I.track=S,ud(I,l,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function A(){var L=Ao(o||{},BI);v=L.cfg,l.addUnloadHook(Du(L,function(){var Y=v[yg];if(tr(Y)){var B=Bc(function(de,ue){ns(Y,function(xe){var he=xe.value,ke=v[t_];if(!xe.rejected&&he){v[yg]=he;var Me=or(he);ke=Me[oS]||ke}de(ke)})}),X=Bc(function(de,ue){ns(Y,function(xe){var he=xe.value,ke=v[r_];if(!xe.rejected&&he){var Me=or(he),He=Me[sS];ke=He?He+vv:ke}de(ke)})});v[t_]=B,v[r_]=v[k_]||X}if(Ft(Y)){var le=or(Y),fe=le[sS];v[r_]=v[k_]?v[k_]:fe+vv,v[t_]=le[oS]||v[t_]}v[r_]=v[k_]?v[k_]:v[r_]})),l.initialize(v,[new iS])}});function S(I){I&&(I.baseData=I.baseData||{},I.baseType=I.baseType||"EventData"),l.track(I)}}return i.__ieDyn=1,i}();e.AppInsightsCore=pl,e.ApplicationInsights=GI,e.Sender=iS,e.SeverityLevel=cm,e.arrForEach=Pt,e.isNullOrUndefined=Ve,e.proxyFunctions=ud,e.throwError=pr})});var $S=kd(Nv=>{"use strict";var CN=Nv&&Nv.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),xN=Nv&&Nv.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),PN=Nv&&Nv.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&CN(t,e,r);return xN(t,e),t};Object.defineProperty(Nv,"__esModule",{value:!0});Nv.appInsightsClientFactory=void 0;var AN=US(),RN=By(),ON=async(e,t,r,n,s)=>{let u;try{let w=await Promise.resolve().then(()=>PN(YS())),T={};if(n){let z={alwaysUseXhrOverride:!0,httpXHROverride:n};T[AN.BreezeChannelIdentifier]=z}let C;e.startsWith("InstrumentationKey=")||(C=e);let F=C?{instrumentationKey:C}:{connectionString:e};u=new w.ApplicationInsights({...F,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:T})}catch(w){return Promise.reject(w)}return{logEvent:(w,T)=>{let C={...T==null?void 0:T.properties,...T==null?void 0:T.measurements};s!=null&&s.length&&RN.TelemetryUtil.applyReplacements(C,s),u==null||u.track({name:w,data:C,baseType:"EventData",ext:{user:{id:t,authId:t},app:{sesId:r}},baseData:{name:w,properties:T==null?void 0:T.properties,measurements:T==null?void 0:T.measurements}})},flush:async()=>{u==null||u.flush(!1)},dispose:async()=>new Promise(T=>{u==null||u.unload(!0,()=>{T(),u=void 0},1e3)})}};Nv.appInsightsClientFactory=ON});var qS=kd(Lg=>{"use strict";Object.defineProperty(Lg,"__esModule",{value:!0});Lg.BaseTelemetryReporter=void 0;var zy=class{constructor(t,r,n){this.telemetrySender=t,this.vscodeAPI=r,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(t,r,n,s){s?this.telemetrySender.sendEventData(t,{properties:r,measurements:n}):this.telemetryLogger.logUsage(t,{properties:r,measurements:n})}sendTelemetryEvent(t,r,n){this.internalSendTelemetryEvent(t,r,n,!1)}sendRawTelemetryEvent(t,r,n){let s={...r};for(let u of Object.keys(s??{})){let h=s[u];typeof u=="string"&&h!==void 0&&(s[u]=new this.vscodeAPI.TelemetryTrustedValue(typeof h=="string"?h:h.value))}this.sendTelemetryEvent(t,s,n)}sendDangerousTelemetryEvent(t,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(t,r,n,!0)}internalSendTelemetryErrorEvent(t,r,n,s){s?this.telemetrySender.sendEventData(t,{properties:r,measurements:n}):this.telemetryLogger.logError(t,{properties:r,measurements:n})}sendTelemetryErrorEvent(t,r,n){this.internalSendTelemetryErrorEvent(t,r,n,!1)}sendDangerousTelemetryErrorEvent(t,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(t,r,n,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(t=>t.dispose()))}};Lg.BaseTelemetryReporter=zy});var BS=kd(Fg=>{"use strict";Object.defineProperty(Fg,"__esModule",{value:!0});Fg.BaseTelemetrySender=void 0;var pm;(function(e){e[e.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",e[e.INSTANTIATING=1]="INSTANTIATING",e[e.INSTANTIATED=2]="INSTANTIATED"})(pm||(pm={}));var Gy=class{constructor(t,r){this._instantiationStatus=pm.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=r,this._key=t}sendEventData(t,r){if(!this._telemetryClient){this._instantiationStatus!==pm.INSTANTIATED&&this._eventQueue.push({eventName:t,data:r});return}this._telemetryClient.logEvent(t,r)}sendErrorData(t,r){if(!this._telemetryClient){this._instantiationStatus!==pm.INSTANTIATED&&this._exceptionQueue.push({exception:t,data:r});return}let n={stack:t.stack,message:t.message,name:t.name};if(r){let s=r.properties||r;r.properties={...s,...n}}else r={properties:n};this._telemetryClient.logEvent("unhandlederror",r)}async flush(){var t;return(t=this._telemetryClient)==null?void 0:t.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:t,data:r})=>this.sendEventData(t,r)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:t,data:r})=>this.sendErrorData(t,r)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===pm.NOT_INSTANTIATED&&(this._instantiationStatus=pm.INSTANTIATING,this._clientFactory(this._key).then(t=>{this._telemetryClient=t,this._instantiationStatus=pm.INSTANTIATED,this._flushQueues()}).catch(t=>{console.error(t),this._instantiationStatus=pm.INSTANTIATED}))}};Fg.BaseTelemetrySender=Gy});var HS=kd(vm=>{"use strict";var kN=vm&&vm.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),MN=vm&&vm.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ky=vm&&vm.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&kN(t,e,r);return MN(t,e),t};Object.defineProperty(vm,"__esModule",{value:!0});var LN=Ky(require("https")),Hy=Ky(require("os")),Ug=Ky(require("vscode")),FN=LS(),UN=$S(),jN=qS(),YN=BS(),zS=By();function GS(){return{sendPOST:(t,r)=>{let n={method:"POST",headers:{...t.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(t.data)}};try{let s=LN.request(t.urlString,n,u=>{u.on("data",function(h){r(u.statusCode??200,u.headers,h.toString())}),u.on("error",function(){r(0,{})})});s.write(t.data,u=>{u&&r(0,{})}),s.end()}catch{r(0,{})}}}}var Vy=class extends jN.BaseTelemetryReporter{constructor(t,r){let n=h=>(0,UN.appInsightsClientFactory)(h,Ug.env.machineId,Ug.env.sessionId,GS(),r);zS.TelemetryUtil.shouldUseOneDataSystemSDK(t)&&(n=h=>(0,FN.oneDataSystemClientFactory)(h,Ug,GS()));let s={release:Hy.release(),platform:Hy.platform(),architecture:Hy.arch()},u=new YN.BaseTelemetrySender(t,n);if(t&&t.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(u,Ug,{additionalCommonProperties:zS.TelemetryUtil.getAdditionalCommonProperties(s)})}};vm.default=Vy});var Vw=kd((p1,l_)=>{"use strict";var pD=typeof Buffer<"u",Bw=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,zw=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function Gw(e,t,r){r==null&&t!==null&&typeof t=="object"&&(r=t,t=void 0),pD&&Buffer.isBuffer(e)&&(e=e.toString()),e&&e.charCodeAt(0)===65279&&(e=e.slice(1));let n=JSON.parse(e,t);if(n===null||typeof n!="object")return n;let s=r&&r.protoAction||"error",u=r&&r.constructorAction||"error";if(s==="ignore"&&u==="ignore")return n;if(s!=="ignore"&&u!=="ignore"){if(Bw.test(e)===!1&&zw.test(e)===!1)return n}else if(s!=="ignore"&&u==="ignore"){if(Bw.test(e)===!1)return n}else if(zw.test(e)===!1)return n;return Hw(n,{protoAction:s,constructorAction:u,safe:r&&r.safe})}function Hw(e,{protoAction:t="error",constructorAction:r="error",safe:n}={}){let s=[e];for(;s.length;){let u=s;s=[];for(let h of u){if(t!=="ignore"&&Object.prototype.hasOwnProperty.call(h,"__proto__")){if(n===!0)return null;if(t==="error")throw new SyntaxError("Object contains forbidden prototype property");delete h.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(h,"constructor")&&Object.prototype.hasOwnProperty.call(h.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete h.constructor}for(let w in h){let T=h[w];T&&typeof T=="object"&&s.push(T)}}}return e}function r0(e,t,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return Gw(e,t,r)}finally{Error.stackTraceLimit=n}}function vD(e,t){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return Gw(e,t,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}l_.exports=r0;l_.exports.default=r0;l_.exports.parse=r0;l_.exports.safeParse=vD;l_.exports.scan=Hw});var ek={};pS(ek,{activate:()=>XO,deactivate:()=>QO});module.exports=QI(ek);var II=require("vscode");var rw=require("vscode");var Xy={};pS(Xy,{action:()=>eN,diffView:()=>BN,storeApiKey:()=>tN,work:()=>zN});function eN(e){return t=>{typeof t=="function"&&t()}}var Ry=require("vscode");function tN({ext:e,log:t}){return async(r,n)=>{let s=await Ry.window.showInputBox({prompt:`Enter the ${n}`});s&&(t.info(n,{event:"action.key"}),await e.secrets.store(r,s),Ry.window.showInformationMessage(`${n} stored successfully`))}}var ew=require("vscode");var Ss=require("vscode"),PS=Ay(ES());var jy=require("crypto");var TS="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var yN=128,eh,th;function IS(e){!eh||eh.length<e?(eh=Buffer.allocUnsafe(e*yN),jy.webcrypto.getRandomValues(eh),th=0):th+e>eh.length&&(jy.webcrypto.getRandomValues(eh),th=0),th+=e}function SN(e){return IS(e|=0),eh.subarray(th-e,th)}function wN(e,t,r){let n=(2<<31-Math.clz32(e.length-1|1))-1,s=Math.ceil(1.6*n*t/e.length);return(u=t)=>{let h="";for(;;){let w=r(s),T=s;for(;T--;)if(h+=e[w[T]&n]||"",h.length>=u)return h}}}function NS(e,t=21){return wN(e,t,SN)}function DS(e=21){IS(e|=0);let t="";for(let r=th-e;r<th;r++)t+=TS[eh[r]&63];return t}var Md=require("vscode"),Yy="multicoder",CS,xS,Ng=(xS=(CS=Md.workspace.workspaceFolders)==null?void 0:CS[0])==null?void 0:xS.uri,Dg=new Map;function bN(e){return e.path.split("/").pop()}function Pp(e){let t=Md.workspace.getWorkspaceFolder(e);if(t){let u="";return String(t.uri)!==String(e)&&(u=Md.workspace.asRelativePath(e,!1).replace(/\\/g,"/")),String(t.uri)!==String(Ng)&&(u=".folders/"+bN(t.uri)+(u?"/"+u:"")),u||(u="."),u}if(e.scheme==="untitled")return".untitled/"+e.path;let r=e.path.split("/"),n=r.pop(),s=r.pop();return Dg.has(s)||Dg.set(s,Md.Uri.joinPath(e,"../")),".external/"+s+"/"+n}function qn(e){return(e=="."||e=="./")&&(e=""),e=e.startsWith("/")?e:"/"+e,Md.Uri.from({scheme:Yy,path:e})}function gl(e){let[t,r,...n]=e.path.split("/");if(r==".multicoder")return e.with({scheme:"file"});if(r==".untitled")return Md.Uri.from({scheme:"untitled",path:n.join("/")});if(r==".external"){let s=n.shift();if(Dg.has(s))return Md.Uri.joinPath(Dg.get(s),n.join("/"));throw new Error("Unknown external directory: "+s)}if(r==".folders"){let s=n.shift();for(let u of Md.workspace.workspaceFolders||[])if(u.uri.path.endsWith("/"+s))return Md.Uri.joinPath(u.uri,n.join("/"));throw new Error("Unknown workspace folder: "+s)}if(Ng)return e.path?Md.Uri.joinPath(Ng,e.path):Ng;throw new Error("Cannot find source Uri")}var{fs:$y}=Ss.workspace,EN=NS("1234567890abcdef",10);function Cg(){return EN()}function F_(){let e=[];for(let t of Ss.window.tabGroups.all.flatMap(r=>r.tabs))t.input instanceof Ss.TabInputText&&e.push(t.input.uri);return e}async function Mf(e){return new TextDecoder().decode(await $y.readFile(e))}async function xg(e,t){return await $y.writeFile(e,new TextEncoder().encode(t))}async function Pg(e=""){let t=Ss.workspace.workspaceFolders;if(!(t!=null&&t.length))return e?[]:F_().map(h=>({name:Pp(h).split("/").pop(),path:Pp(h),uri:h,isFile:!0,isDirectory:!1,isSymbolicLink:!1}));let r=t[0],n=Ss.Uri.joinPath(r.uri,e);if(t.length>1){let[h,...w]=e.split("/");if(!h)return t.map(({name:T,uri:C})=>({name:T,path:T,uri:C,isFile:!1,isDirectory:!0,isSymbolicLink:!1}));if(r=t.find(T=>T.name==h),!r)return[];n=Ss.Uri.joinPath(r.uri,...w)}let s=(0,PS.default)().add([".git",".gitignore"]);try{s.add(await Mf(Ss.Uri.joinPath(r.uri,".gitignore")))}catch{}let u=(await $y.readDirectory(n)).map(([h,w])=>({name:h,path:Pp(Ss.Uri.joinPath(n,h)),uri:Ss.Uri.joinPath(n,h),isFile:!!(w&Ss.FileType.File),isDirectory:!!(w&Ss.FileType.Directory),isSymbolicLink:!!(w&Ss.FileType.SymbolicLink)})).filter(({uri:h})=>!s.ignores(Ss.workspace.asRelativePath(h,!1)));return u.sort((h,w)=>h.isFile&&w.isDirectory?1:h.isDirectory&&w.isFile?-1:h.name.localeCompare(w.name)),u}var VS=Ay(HS()),$N="InstrumentationKey=4a0957be-8ce1-4335-8aa5-1fb742355aa5;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com/;LiveEndpoint=https://westeurope.livediagnostics.monitor.azure.com/;ApplicationId=b0fce7b4-deeb-43b7-aa17-e5024c6c504c";function qN(e){return{logUsage(t,r){e.sendTelemetryEvent(t,r)},logError(t,r={}){if(t&&typeof t=="object"){let{message:n,stack:s}=t,u=String(t.name||"error").toLowerCase(),h=String(t);e.sendTelemetryErrorEvent(u,{...t,...r,message:n,stack:s,text:h})}else e.sendTelemetryErrorEvent(String(t).toLowerCase().replace(/\W+/g,"-"),r)}}}function KS(e){let t=new VS.default($N),r=qN(t);e.telemetry=r,r.logUsage("activated"),e.ext.subscriptions.push(t)}var WS=require("vscode");function JS(e){let t=WS.window.createOutputChannel("Multicoder",{log:!0});function r(s){if(!s||typeof s!="object")return;let{event:u,...h}=s,w=Object.entries(h).map(([T,C])=>`
    ${T}: ${C}`);w.length&&t.trace(w.join(""))}function n(s){let u={};return s!=null&&s.model&&(u.modelId=s.model.modelId,u.modelProvider=s.model.provider),u}e.log={error(s,u={}){t.error(s),e.telemetry.logError(s,{...n(this.context),...u}),r(u)},warn(s,u={}){t.warn((u!=null&&u.event?`[${u.event}] `:"")+s),e.telemetry.logUsage((u==null?void 0:u.event)||"warning",{text:s,...n(this.context),...u}),r(u)},info(s,u={}){t.info((u!=null&&u.event?`[${u.event}] `:"")+s),e.telemetry.logUsage((u==null?void 0:u.event)||"info",{text:s,...n(this.context),...u}),r(u)},context:null},e.ext.subscriptions.push(t)}var rn=require("vscode");var{fs:U_}=rn.workspace,Dv=new Map,Eh=new Map,s_=new Map;function XS(e){let t=new Wy,r=rn.workspace.registerFileSystemProvider(Yy,t,{isCaseSensitive:!0,isReadonly:!1});e.ext.subscriptions.push(r)}function Lf(e){return e.authority+e.path}async function ZS(e){try{return await U_.stat(e)}catch{}}function j_(e){let t=e?rn.FileType.Directory:rn.FileType.File,r=Date.now();return{type:t,ctime:r,mtime:r,size:0,content:null}}var Wy=class{async stat(t){if(t.query){if(s_.has(t.query))return s_.get(t.query);throw rn.FileSystemError.FileNotFound(t)}let r=Dv.get(Lf(t));if(!r&&t.path.startsWith("/.multicoder"))throw rn.FileSystemError.FileNotFound(t);if(!r)return await U_.stat(gl(t));if(!r.type)throw rn.FileSystemError.FileNotFound(t);return r}async readFile(t){if(t.query){if(s_.has(t.query))return s_.get(t.query).content;throw rn.FileSystemError.FileNotFound(t)}let r=Dv.get(Lf(t));if(!r&&t.path.startsWith("/.multicoder"))throw rn.FileSystemError.FileNotFound(t);if(!r)return await U_.readFile(gl(t));if(r.type&rn.FileType.Directory)throw rn.FileSystemError.FileIsADirectory(t);if(!r.type)throw rn.FileSystemError.FileNotFound(t);return r.content}async writeFile(t,r,n){if(t.query)throw rn.FileSystemError.NoPermissions;let s=Dv.get(Lf(t)),u=!!(s!=null&&s.type);if(!s&&!t.path.startsWith("/.multicoder")&&(s=await ZS(gl(t)),u=!!s),s||(s=j_()),s.type&rn.FileType.Directory)throw rn.FileSystemError.FileIsADirectory(t);if(!u&&!n.create)throw rn.FileSystemError.FileNotFound(t);if(u&&n.create&&!n.overwrite)throw rn.FileSystemError.FileExists(t);s.mtime=Date.now(),s.content=r,s.size=r.length,Dv.set(Lf(t),s),Eh.has(Lf(t))&&this._emitter.fire([{type:rn.FileChangeType.Changed,uri:t}])}async readDirectory(t){if(t.query)throw rn.FileSystemError.NoPermissions;let r=new Map,n=null;try{if(!t.path.startsWith("/.multicoder")){let s=gl(t),u=await U_.stat(s),h=await U_.readDirectory(gl(t));for(let[w,T]of h)r.set(w,T)}}catch(s){n=s}for(let[s,u]of Dv){let h=s.split("/"),w=h.pop();h.join("/")===t.path&&(u.type?r.set(w,u.type):r.has(w)&&r.delete(w))}if(n&&r.size==0&&!t.path.startsWith("/.multicoder"))throw n;return Array.from(r.entries())}async delete(t,r){if(t.query)throw rn.FileSystemError.NoPermissions;let n=Dv.get(Lf(t)),s=!!(n!=null&&n.type);if(!n&&!t.path.startsWith("/.multicoder")&&(n=await ZS(gl(t)),s=!!n),!s)throw rn.FileSystemError.FileNotFound(t);n||(n=j_()),n.type=0,n.content=null,n.size=0,Dv.set(Lf(t),n),Eh.has(Lf(t))&&this._emitter.fire([{type:rn.FileChangeType.Deleted,uri:t}])}rename(t,r,n){}async createDirectory(t){if(t.query)throw rn.FileSystemError.NoPermissions;let r=j_(!0);Dv.set(Lf(t),r),Eh.has(Lf(t))&&this._emitter.fire([{type:rn.FileChangeType.Created,uri:t}])}_emitter=new rn.EventEmitter;onDidChangeFile=this._emitter.event;watch(t,r){let n={},s=Eh.get(Lf(t))||new Set;return s.add(n),Eh.set(Lf(t),s),new rn.Disposable(()=>{s.delete(n),s.size||Eh.set(Lf(t),null)})}},Jy=new Map;function QS(){Dv=new Map,Eh=new Map,s_=new Map,Jy=new Map;let e=j_();e.content=new Uint8Array,e.permissions=rn.FilePermission.Readonly,Dv.set("/~empty",e)}function Zy(e,t){let r=Jy.get(t);if(!r){let n=j_();n.content=new TextEncoder().encode(t),n.size=n.content.length,n.permissions=rn.FilePermission.Readonly,r=DS(),Jy.set(t,r),s_.set(r,n)}return qn(e).with({query:r})}function BN(e){return async(t,r,n)=>{var C,F;let s=e.recent.get(n),u=t.split("/").pop();if(!s)return;let h=(F=(C=s.shared)==null?void 0:C.edits)==null?void 0:F.find(z=>z.id===r);if(!h)return;let w=Zy(t,h.before),T=Zy(t,h.after);await ew.commands.executeCommand("vscode.diff",w,T,`${u} (Multicoder)`),e.log.info(u,{event:"action.diff"})}}var Rk=require("vscode");async function tw(){}function zN(e){return()=>{tw()}}function nw(e){Object.entries(Xy).forEach(([t,r])=>{let n=rw.commands.registerCommand(`multicoder.${t}`,r(e));e.ext.subscriptions.push(n)})}var Ov=require("vscode");var aw="vercel.ai.error",GN=Symbol.for(aw),iw,HN=class ow extends Error{constructor({name:t,message:r,cause:n}){super(r),this[iw]=!0,this.name=t,this.cause=n}static isInstance(t){return ow.hasMarker(t,aw)}static hasMarker(t,r){let n=Symbol.for(r);return t!=null&&typeof t=="object"&&n in t&&typeof t[n]=="boolean"&&t[n]===!0}};iw=GN;var Mt=HN,sw="AI_APICallError",uw=`vercel.ai.error.${sw}`,VN=Symbol.for(uw),cw,yl=class extends Mt{constructor({message:e,url:t,requestBodyValues:r,statusCode:n,responseHeaders:s,responseBody:u,cause:h,isRetryable:w=n!=null&&(n===408||n===409||n===429||n>=500),data:T}){super({name:sw,message:e,cause:h}),this[cw]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=s,this.responseBody=u,this.isRetryable=w,this.data=T}static isInstance(e){return Mt.hasMarker(e,uw)}};cw=VN;var lw="AI_EmptyResponseBodyError",fw=`vercel.ai.error.${lw}`,KN=Symbol.for(fw),dw,e0=class extends Mt{constructor({message:e="Empty response body"}={}){super({name:lw,message:e}),this[dw]=!0}static isInstance(e){return Mt.hasMarker(e,fw)}};dw=KN;function rh(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var pw="AI_InvalidArgumentError",vw=`vercel.ai.error.${pw}`,WN=Symbol.for(vw),mw,hw=class extends Mt{constructor({message:e,cause:t,argument:r}){super({name:pw,message:e,cause:t}),this[mw]=!0,this.argument=r}static isInstance(e){return Mt.hasMarker(e,vw)}};mw=WN;var _w="AI_InvalidPromptError",gw=`vercel.ai.error.${_w}`,JN=Symbol.for(gw),yw,Cv=class extends Mt{constructor({prompt:e,message:t,cause:r}){super({name:_w,message:`Invalid prompt: ${t}`,cause:r}),this[yw]=!0,this.prompt=e}static isInstance(e){return Mt.hasMarker(e,gw)}};yw=JN;var Sw="AI_InvalidResponseDataError",ww=`vercel.ai.error.${Sw}`,ZN=Symbol.for(ww),bw,Y_=class extends Mt{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:Sw,message:t}),this[bw]=!0,this.data=e}static isInstance(e){return Mt.hasMarker(e,ww)}};bw=ZN;var Ew="AI_JSONParseError",Tw=`vercel.ai.error.${Ew}`,XN=Symbol.for(Tw),Iw,u_=class extends Mt{constructor({text:e,cause:t}){super({name:Ew,message:`JSON parsing failed: Text: ${e}.
Error message: ${rh(t)}`,cause:t}),this[Iw]=!0,this.text=e}static isInstance(e){return Mt.hasMarker(e,Tw)}};Iw=XN;var Nw="AI_LoadAPIKeyError",Dw=`vercel.ai.error.${Nw}`,QN=Symbol.for(Dw),Cw,c_=class extends Mt{constructor({message:e}){super({name:Nw,message:e}),this[Cw]=!0}static isInstance(e){return Mt.hasMarker(e,Dw)}};Cw=QN;var eD="AI_LoadSettingError",tD=`vercel.ai.error.${eD}`,rD=Symbol.for(tD),nD;nD=rD;var aD="AI_NoContentGeneratedError",iD=`vercel.ai.error.${aD}`,oD=Symbol.for(iD),sD;sD=oD;var xw="AI_NoSuchModelError",Pw=`vercel.ai.error.${xw}`,uD=Symbol.for(Pw),Aw,t0=class extends Mt{constructor({errorName:e=xw,modelId:t,modelType:r,message:n=`No such ${r}: ${t}`}){super({name:e,message:n}),this[Aw]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return Mt.hasMarker(e,Pw)}};Aw=uD;var Rw="AI_TooManyEmbeddingValuesForCallError",Ow=`vercel.ai.error.${Rw}`,cD=Symbol.for(Ow),kw,Mw=class extends Mt{constructor(e){super({name:Rw,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[kw]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return Mt.hasMarker(e,Ow)}};kw=cD;var Lw="AI_TypeValidationError",Fw=`vercel.ai.error.${Lw}`,lD=Symbol.for(Fw),Uw,fD=class Qy extends Mt{constructor({value:t,cause:r}){super({name:Lw,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${rh(r)}`,cause:r}),this[Uw]=!0,this.value=t}static isInstance(t){return Mt.hasMarker(t,Fw)}static wrap({value:t,cause:r}){return Qy.isInstance(r)&&r.value===t?r:new Qy({value:t,cause:r})}};Uw=lD;var mm=fD,jw="AI_UnsupportedFunctionalityError",Yw=`vercel.ai.error.${jw}`,dD=Symbol.for(Yw),$w,Bn=class extends Mt{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:jw,message:t}),this[$w]=!0,this.functionality=e}static isInstance(e){return Mt.hasMarker(e,Yw)}};$w=dD;var qw=(e,t=21)=>(r=t)=>{let n="",s=r|0;for(;s--;)n+=e[Math.random()*e.length|0];return n};var zg=Ay(Vw(),1);var mD=Object.defineProperty,hD=(e,t,r)=>t in e?mD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,jg=(e,t,r)=>hD(e,typeof t!="symbol"?t+"":t,r),Yg=class extends Error{constructor(t,r){super(t),jg(this,"type"),jg(this,"field"),jg(this,"value"),jg(this,"line"),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function n0(e){}function Kw(e){let{onEvent:t=n0,onError:r=n0,onRetry:n=n0,onComment:s}=e,u="",h=!0,w,T="",C="";function F(re){let Q=h?re.replace(/^\xEF\xBB\xBF/,""):re,[ve,Pe]=_D(`${u}${Q}`);for(let We of ve)z(We);u=Pe,h=!1}function z(re){if(re===""){pe();return}if(re.startsWith(":")){s&&s(re.slice(re.startsWith(": ")?2:1));return}let Q=re.indexOf(":");if(Q!==-1){let ve=re.slice(0,Q),Pe=re[Q+1]===" "?2:1,We=re.slice(Q+Pe);ee(ve,We,re);return}ee(re,"",re)}function ee(re,Q,ve){switch(re){case"event":C=Q;break;case"data":T=`${T}${Q}
`;break;case"id":w=Q.includes("\0")?void 0:Q;break;case"retry":/^\d+$/.test(Q)?n(parseInt(Q,10)):r(new Yg(`Invalid \`retry\` value: "${Q}"`,{type:"invalid-retry",value:Q,line:ve}));break;default:r(new Yg(`Unknown field "${re.length>20?`${re.slice(0,20)}\u2026`:re}"`,{type:"unknown-field",field:re,value:Q,line:ve}));break}}function pe(){T.length>0&&t({id:w,event:C||void 0,data:T.endsWith(`
`)?T.slice(0,-1):T}),w=void 0,T="",C=""}function ce(re={}){u&&re.consume&&z(u),w=void 0,T="",C="",u=""}return{feed:F,reset:ce}}function _D(e){let t=[],r="",n=e.length;for(let s=0;s<n;s++){let u=e[s];u==="\r"&&e[s+1]===`
`?(t.push(r),r="",s++):u==="\r"||u===`
`?(t.push(r),r=""):r+=u}return[t,r]}var $g=class extends TransformStream{constructor({onError:t,onRetry:r,onComment:n}={}){let s;super({start(u){s=Kw({onEvent:h=>{u.enqueue(h)},onError(h){t==="terminate"?u.error(h):typeof t=="function"&&t(h)},onRetry:r,onComment:n})},transform(u){s.feed(u)}})}};function Ld(...e){return e.reduce((t,r)=>({...t,...r??{}}),{})}function Ww(e){return new ReadableStream({async pull(t){try{let{value:r,done:n}=await e.next();n?t.close():t.enqueue(r)}catch(r){t.error(r)}},cancel(){}})}async function Jw(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function qg(e){let t={};return e.headers.forEach((r,n)=>{t[n]=r}),t}var Ap=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let s=qw(r,t);if(e==null)return s;if(r.includes(n))throw new hw({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return u=>`${e}${n}${s(u)}`},hm=Ap();function Zw(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function gD(e){return Object.fromEntries(Object.entries(e).filter(([t,r])=>r!=null))}function $_(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function Bg({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:n}){if(typeof e=="string")return e;if(e!=null)throw new c_({message:`${n} API key must be a string.`});if(typeof process>"u")throw new c_({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(e=process.env[t],e==null)throw new c_({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new c_({message:`${n} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var q_=Symbol.for("vercel.ai.validator");function yD(e){return{[q_]:!0,validate:e}}function SD(e){return typeof e=="object"&&e!==null&&q_ in e&&e[q_]===!0&&"validate"in e}function wD(e){return SD(e)?e:bD(e)}function bD(e){return yD(t=>{let r=e.safeParse(t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}})}function ED({value:e,schema:t}){let r=nh({value:e,schema:t});if(!r.success)throw mm.wrap({value:e,cause:r.error});return r.value}function nh({value:e,schema:t}){let r=wD(t);try{if(r.validate==null)return{success:!0,value:e};let n=r.validate(e);return n.success?n:{success:!1,error:mm.wrap({value:e,cause:n.error})}}catch(n){return{success:!1,error:mm.wrap({value:e,cause:n})}}}function TD({text:e,schema:t}){try{let r=zg.default.parse(e);return t==null?r:ED({value:r,schema:t})}catch(r){throw u_.isInstance(r)||mm.isInstance(r)?r:new u_({text:e,cause:r})}}function xv({text:e,schema:t}){try{let r=zg.default.parse(e);if(t==null)return{success:!0,value:r,rawValue:r};let n=nh({value:r,schema:t});return n.success?{...n,rawValue:r}:n}catch(r){return{success:!1,error:u_.isInstance(r)?r:new u_({text:e,cause:r})}}}function a0(e){try{return zg.default.parse(e),!0}catch{return!1}}var ID=()=>globalThis.fetch,Ff=async({url:e,headers:t,body:r,failedResponseHandler:n,successfulResponseHandler:s,abortSignal:u,fetch:h})=>ND({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:s,abortSignal:u,fetch:h}),ND=async({url:e,headers:t={},body:r,successfulResponseHandler:n,failedResponseHandler:s,abortSignal:u,fetch:h=ID()})=>{try{let w=await h(e,{method:"POST",headers:gD(t),body:r.content,signal:u}),T=qg(w);if(!w.ok){let C;try{C=await s({response:w,url:e,requestBodyValues:r.values})}catch(F){throw $_(F)||yl.isInstance(F)?F:new yl({message:"Failed to process error response",cause:F,statusCode:w.status,url:e,responseHeaders:T,requestBodyValues:r.values})}throw C.value}try{return await n({response:w,url:e,requestBodyValues:r.values})}catch(C){throw C instanceof Error&&($_(C)||yl.isInstance(C))?C:new yl({message:"Failed to process successful response",cause:C,statusCode:w.status,url:e,responseHeaders:T,requestBodyValues:r.values})}}catch(w){if($_(w))throw w;if(w instanceof TypeError&&w.message==="fetch failed"){let T=w.cause;if(T!=null)throw new yl({message:`Cannot connect to API: ${T.message}`,cause:T,url:e,requestBodyValues:r.values,isRetryable:!0})}throw w}};async function Xw(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var Gg=({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:n,url:s,requestBodyValues:u})=>{let h=await n.text(),w=qg(n);if(h.trim()==="")return{responseHeaders:w,value:new yl({message:n.statusText,url:s,requestBodyValues:u,statusCode:n.status,responseHeaders:w,responseBody:h,isRetryable:r==null?void 0:r(n)})};try{let T=TD({text:h,schema:e});return{responseHeaders:w,value:new yl({message:t(T),url:s,requestBodyValues:u,statusCode:n.status,responseHeaders:w,responseBody:h,data:T,isRetryable:r==null?void 0:r(n,T)})}}catch{return{responseHeaders:w,value:new yl({message:n.statusText,url:s,requestBodyValues:u,statusCode:n.status,responseHeaders:w,responseBody:h,isRetryable:r==null?void 0:r(n)})}}},f_=e=>async({response:t})=>{let r=qg(t);if(t.body==null)throw new e0({});return{responseHeaders:r,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new $g).pipeThrough(new TransformStream({transform({data:n},s){n!=="[DONE]"&&s.enqueue(xv({text:n,schema:e}))}}))}};var Pv=e=>async({response:t,url:r,requestBodyValues:n})=>{let s=await t.text(),u=xv({text:s,schema:e}),h=qg(t);if(!u.success)throw new yl({message:"Invalid JSON response",cause:u.error,statusCode:t.status,responseHeaders:h,responseBody:s,url:r,requestBodyValues:n});return{responseHeaders:h,value:u.value,rawValue:u.rawValue}};var{btoa:DD,atob:CD}=globalThis;function Qw(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=CD(t);return Uint8Array.from(r,n=>n.codePointAt(0))}function Th(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return DD(t)}function Hg(e){return e==null?void 0:e.replace(/\/$/,"")}var dn;(function(e){e.assertEqual=s=>s;function t(s){}e.assertIs=t;function r(s){throw new Error}e.assertNever=r,e.arrayToEnum=s=>{let u={};for(let h of s)u[h]=h;return u},e.getValidEnumValues=s=>{let u=e.objectKeys(s).filter(w=>typeof s[s[w]]!="number"),h={};for(let w of u)h[w]=s[w];return e.objectValues(h)},e.objectValues=s=>e.objectKeys(s).map(function(u){return s[u]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let u=[];for(let h in s)Object.prototype.hasOwnProperty.call(s,h)&&u.push(h);return u},e.find=(s,u)=>{for(let h of s)if(u(h))return h},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,u=" | "){return s.map(h=>typeof h=="string"?`'${h}'`:h).join(u)}e.joinValues=n,e.jsonStringifyReplacer=(s,u)=>typeof u=="bigint"?u.toString():u})(dn||(dn={}));var o0;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(o0||(o0={}));var yt=dn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),gm=e=>{switch(typeof e){case"undefined":return yt.undefined;case"string":return yt.string;case"number":return isNaN(e)?yt.nan:yt.number;case"boolean":return yt.boolean;case"function":return yt.function;case"bigint":return yt.bigint;case"symbol":return yt.symbol;case"object":return Array.isArray(e)?yt.array:e===null?yt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?yt.promise:typeof Map<"u"&&e instanceof Map?yt.map:typeof Set<"u"&&e instanceof Set?yt.set:typeof Date<"u"&&e instanceof Date?yt.date:yt.object;default:return yt.unknown}},$e=dn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),xD=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),wc=class e extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){let r=t||function(u){return u.message},n={_errors:[]},s=u=>{for(let h of u.issues)if(h.code==="invalid_union")h.unionErrors.map(s);else if(h.code==="invalid_return_type")s(h.returnTypeError);else if(h.code==="invalid_arguments")s(h.argumentsError);else if(h.path.length===0)n._errors.push(r(h));else{let w=n,T=0;for(;T<h.path.length;){let C=h.path[T];T===h.path.length-1?(w[C]=w[C]||{_errors:[]},w[C]._errors.push(r(h))):w[C]=w[C]||{_errors:[]},w=w[C],T++}}};return s(this),n}static assert(t){if(!(t instanceof e))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,dn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){let r={},n=[];for(let s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};wc.create=e=>new wc(e);var v_=(e,t)=>{let r;switch(e.code){case $e.invalid_type:e.received===yt.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case $e.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,dn.jsonStringifyReplacer)}`;break;case $e.unrecognized_keys:r=`Unrecognized key(s) in object: ${dn.joinValues(e.keys,", ")}`;break;case $e.invalid_union:r="Invalid input";break;case $e.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${dn.joinValues(e.options)}`;break;case $e.invalid_enum_value:r=`Invalid enum value. Expected ${dn.joinValues(e.options)}, received '${e.received}'`;break;case $e.invalid_arguments:r="Invalid function arguments";break;case $e.invalid_return_type:r="Invalid function return type";break;case $e.invalid_date:r="Invalid date";break;case $e.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:dn.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case $e.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case $e.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case $e.custom:r="Invalid input";break;case $e.invalid_intersection_types:r="Intersection results could not be merged";break;case $e.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case $e.not_finite:r="Number must be finite";break;default:r=t.defaultError,dn.assertNever(e)}return{message:r}},rb=v_;function PD(e){rb=e}function Vg(){return rb}var Kg=e=>{let{data:t,path:r,errorMaps:n,issueData:s}=e,u=[...r,...s.path||[]],h={...s,path:u};if(s.message!==void 0)return{...s,path:u,message:s.message};let w="",T=n.filter(C=>!!C).slice().reverse();for(let C of T)w=C(h,{data:t,defaultError:w}).message;return{...s,path:u,message:w}},AD=[];function st(e,t){let r=Vg(),n=Kg({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===v_?void 0:v_].filter(s=>!!s)});e.common.issues.push(n)}var Lu=class e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){let n=[];for(let s of r){if(s.status==="aborted")return _r;s.status==="dirty"&&t.dirty(),n.push(s.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){let n=[];for(let s of r){let u=await s.key,h=await s.value;n.push({key:u,value:h})}return e.mergeObjectSync(t,n)}static mergeObjectSync(t,r){let n={};for(let s of r){let{key:u,value:h}=s;if(u.status==="aborted"||h.status==="aborted")return _r;u.status==="dirty"&&t.dirty(),h.status==="dirty"&&t.dirty(),u.value!=="__proto__"&&(typeof h.value<"u"||s.alwaysSet)&&(n[u.value]=h.value)}return{status:t.value,value:n}}},_r=Object.freeze({status:"aborted"}),p_=e=>({status:"dirty",value:e}),bc=e=>({status:"valid",value:e}),s0=e=>e.status==="aborted",u0=e=>e.status==="dirty",Ih=e=>e.status==="valid",G_=e=>typeof Promise<"u"&&e instanceof Promise;function Wg(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function nb(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}var Ot;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Ot||(Ot={}));var B_,z_,Fd=class{constructor(t,r,n,s){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},eb=(e,t)=>{if(Ih(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new wc(e.common.issues);return this._error=r,this._error}}};function kr(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:s}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(h,w)=>{var T,C;let{message:F}=e;return h.code==="invalid_enum_value"?{message:F??w.defaultError}:typeof w.data>"u"?{message:(T=F??n)!==null&&T!==void 0?T:w.defaultError}:h.code!=="invalid_type"?{message:w.defaultError}:{message:(C=F??r)!==null&&C!==void 0?C:w.defaultError}},description:s}}var Mr=class{get description(){return this._def.description}_getType(t){return gm(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:gm(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Lu,ctx:{common:t.parent.common,data:t.data,parsedType:gm(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let r=this._parse(t);if(G_(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){let r=this._parse(t);return Promise.resolve(r)}parse(t,r){let n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){var n;let s={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:gm(t)},u=this._parseSync({data:t,path:s.path,parent:s});return eb(s,u)}"~validate"(t){var r,n;let s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:gm(t)};if(!this["~standard"].async)try{let u=this._parseSync({data:t,path:[],parent:s});return Ih(u)?{value:u.value}:{issues:s.common.issues}}catch(u){!((n=(r=u==null?void 0:u.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:s}).then(u=>Ih(u)?{value:u.value}:{issues:s.common.issues})}async parseAsync(t,r){let n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){let n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:gm(t)},s=this._parse({data:t,path:n.path,parent:n}),u=await(G_(s)?s:Promise.resolve(s));return eb(n,u)}refine(t,r){let n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,u)=>{let h=t(s),w=()=>u.addIssue({code:$e.custom,...n(s)});return typeof Promise<"u"&&h instanceof Promise?h.then(T=>T?!0:(w(),!1)):h?!0:(w(),!1)})}refinement(t,r){return this._refinement((n,s)=>t(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(t){return new Uf({schema:this,typeName:Ge.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Sl.create(this,this._def)}nullable(){return Rv.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Sm.create(this)}promise(){return oh.create(this,this._def)}or(t){return Rh.create([this,t],this._def)}and(t){return Oh.create(this,t,this._def)}transform(t){return new Uf({...kr(this._def),schema:this,typeName:Ge.ZodEffects,effect:{type:"transform",transform:t}})}default(t){let r=typeof t=="function"?t:()=>t;return new Uh({...kr(this._def),innerType:this,defaultValue:r,typeName:Ge.ZodDefault})}brand(){return new H_({typeName:Ge.ZodBranded,type:this,...kr(this._def)})}catch(t){let r=typeof t=="function"?t:()=>t;return new jh({...kr(this._def),innerType:this,catchValue:r,typeName:Ge.ZodCatch})}describe(t){let r=this.constructor;return new r({...this._def,description:t})}pipe(t){return V_.create(this,t)}readonly(){return Yh.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},RD=/^c[^\s-]{8,}$/i,OD=/^[0-9a-z]+$/,kD=/^[0-9A-HJKMNP-TV-Z]{26}$/i,MD=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,LD=/^[a-z0-9_-]{21}$/i,FD=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,UD=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,jD=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,YD="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",i0,$D=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,qD=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,BD=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,zD=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,GD=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,HD=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ab="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",VD=new RegExp(`^${ab}$`);function ib(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function KD(e){return new RegExp(`^${ib(e)}$`)}function ob(e){let t=`${ab}T${ib(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function WD(e,t){return!!((t==="v4"||!t)&&$D.test(e)||(t==="v6"||!t)&&BD.test(e))}function JD(e,t){if(!FD.test(e))return!1;try{let[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||!s.typ||!s.alg||t&&s.alg!==t)}catch{return!1}}function ZD(e,t){return!!((t==="v4"||!t)&&qD.test(e)||(t==="v6"||!t)&&zD.test(e))}var ah=class e extends Mr{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==yt.string){let u=this._getOrReturnCtx(t);return st(u,{code:$e.invalid_type,expected:yt.string,received:u.parsedType}),_r}let n=new Lu,s;for(let u of this._def.checks)if(u.kind==="min")t.data.length<u.value&&(s=this._getOrReturnCtx(t,s),st(s,{code:$e.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),n.dirty());else if(u.kind==="max")t.data.length>u.value&&(s=this._getOrReturnCtx(t,s),st(s,{code:$e.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),n.dirty());else if(u.kind==="length"){let h=t.data.length>u.value,w=t.data.length<u.value;(h||w)&&(s=this._getOrReturnCtx(t,s),h?st(s,{code:$e.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}):w&&st(s,{code:$e.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}),n.dirty())}else if(u.kind==="email")jD.test(t.data)||(s=this._getOrReturnCtx(t,s),st(s,{validation:"email",code:$e.invalid_string,message:u.message}),n.dirty());else if(u.kind==="emoji")i0||(i0=new RegExp(YD,"u")),i0.test(t.data)||(s=this._getOrReturnCtx(t,s),st(s,{validation:"emoji",code:$e.invalid_string,message:u.message}),n.dirty());else if(u.kind==="uuid")MD.test(t.data)||(s=this._getOrReturnCtx(t,s),st(s,{validation:"uuid",code:$e.invalid_string,message:u.message}),n.dirty());else if(u.kind==="nanoid")LD.test(t.data)||(s=this._getOrReturnCtx(t,s),st(s,{validation:"nanoid",code:$e.invalid_string,message:u.message}),n.dirty());else if(u.kind==="cuid")RD.test(t.data)||(s=this._getOrReturnCtx(t,s),st(s,{validation:"cuid",code:$e.invalid_string,message:u.message}),n.dirty());else if(u.kind==="cuid2")OD.test(t.data)||(s=this._getOrReturnCtx(t,s),st(s,{validation:"cuid2",code:$e.invalid_string,message:u.message}),n.dirty());else if(u.kind==="ulid")kD.test(t.data)||(s=this._getOrReturnCtx(t,s),st(s,{validation:"ulid",code:$e.invalid_string,message:u.message}),n.dirty());else if(u.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),st(s,{validation:"url",code:$e.invalid_string,message:u.message}),n.dirty()}else u.kind==="regex"?(u.regex.lastIndex=0,u.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),st(s,{validation:"regex",code:$e.invalid_string,message:u.message}),n.dirty())):u.kind==="trim"?t.data=t.data.trim():u.kind==="includes"?t.data.includes(u.value,u.position)||(s=this._getOrReturnCtx(t,s),st(s,{code:$e.invalid_string,validation:{includes:u.value,position:u.position},message:u.message}),n.dirty()):u.kind==="toLowerCase"?t.data=t.data.toLowerCase():u.kind==="toUpperCase"?t.data=t.data.toUpperCase():u.kind==="startsWith"?t.data.startsWith(u.value)||(s=this._getOrReturnCtx(t,s),st(s,{code:$e.invalid_string,validation:{startsWith:u.value},message:u.message}),n.dirty()):u.kind==="endsWith"?t.data.endsWith(u.value)||(s=this._getOrReturnCtx(t,s),st(s,{code:$e.invalid_string,validation:{endsWith:u.value},message:u.message}),n.dirty()):u.kind==="datetime"?ob(u).test(t.data)||(s=this._getOrReturnCtx(t,s),st(s,{code:$e.invalid_string,validation:"datetime",message:u.message}),n.dirty()):u.kind==="date"?VD.test(t.data)||(s=this._getOrReturnCtx(t,s),st(s,{code:$e.invalid_string,validation:"date",message:u.message}),n.dirty()):u.kind==="time"?KD(u).test(t.data)||(s=this._getOrReturnCtx(t,s),st(s,{code:$e.invalid_string,validation:"time",message:u.message}),n.dirty()):u.kind==="duration"?UD.test(t.data)||(s=this._getOrReturnCtx(t,s),st(s,{validation:"duration",code:$e.invalid_string,message:u.message}),n.dirty()):u.kind==="ip"?WD(t.data,u.version)||(s=this._getOrReturnCtx(t,s),st(s,{validation:"ip",code:$e.invalid_string,message:u.message}),n.dirty()):u.kind==="jwt"?JD(t.data,u.alg)||(s=this._getOrReturnCtx(t,s),st(s,{validation:"jwt",code:$e.invalid_string,message:u.message}),n.dirty()):u.kind==="cidr"?ZD(t.data,u.version)||(s=this._getOrReturnCtx(t,s),st(s,{validation:"cidr",code:$e.invalid_string,message:u.message}),n.dirty()):u.kind==="base64"?GD.test(t.data)||(s=this._getOrReturnCtx(t,s),st(s,{validation:"base64",code:$e.invalid_string,message:u.message}),n.dirty()):u.kind==="base64url"?HD.test(t.data)||(s=this._getOrReturnCtx(t,s),st(s,{validation:"base64url",code:$e.invalid_string,message:u.message}),n.dirty()):dn.assertNever(u);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(s=>t.test(s),{validation:r,code:$e.invalid_string,...Ot.errToObj(n)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Ot.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Ot.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Ot.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Ot.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Ot.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Ot.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Ot.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Ot.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Ot.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Ot.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Ot.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Ot.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Ot.errToObj(t)})}datetime(t){var r,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(r=t==null?void 0:t.offset)!==null&&r!==void 0?r:!1,local:(n=t==null?void 0:t.local)!==null&&n!==void 0?n:!1,...Ot.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Ot.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Ot.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Ot.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...Ot.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Ot.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Ot.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Ot.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Ot.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Ot.errToObj(r)})}nonempty(t){return this.min(1,Ot.errToObj(t))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};ah.create=e=>{var t;return new ah({checks:[],typeName:Ge.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...kr(e)})};function XD(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,s=r>n?r:n,u=parseInt(e.toFixed(s).replace(".","")),h=parseInt(t.toFixed(s).replace(".",""));return u%h/Math.pow(10,s)}var Nh=class e extends Mr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==yt.number){let u=this._getOrReturnCtx(t);return st(u,{code:$e.invalid_type,expected:yt.number,received:u.parsedType}),_r}let n,s=new Lu;for(let u of this._def.checks)u.kind==="int"?dn.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),st(n,{code:$e.invalid_type,expected:"integer",received:"float",message:u.message}),s.dirty()):u.kind==="min"?(u.inclusive?t.data<u.value:t.data<=u.value)&&(n=this._getOrReturnCtx(t,n),st(n,{code:$e.too_small,minimum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),s.dirty()):u.kind==="max"?(u.inclusive?t.data>u.value:t.data>=u.value)&&(n=this._getOrReturnCtx(t,n),st(n,{code:$e.too_big,maximum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),s.dirty()):u.kind==="multipleOf"?XD(t.data,u.value)!==0&&(n=this._getOrReturnCtx(t,n),st(n,{code:$e.not_multiple_of,multipleOf:u.value,message:u.message}),s.dirty()):u.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),st(n,{code:$e.not_finite,message:u.message}),s.dirty()):dn.assertNever(u);return{status:s.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Ot.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ot.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ot.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ot.toString(r))}setLimit(t,r,n,s){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Ot.toString(s)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Ot.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ot.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ot.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ot.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ot.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ot.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Ot.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ot.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ot.toString(t)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&dn.isInteger(t.value))}get isFinite(){let t=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}};Nh.create=e=>new Nh({checks:[],typeName:Ge.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...kr(e)});var Dh=class e extends Mr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==yt.bigint)return this._getInvalidInput(t);let n,s=new Lu;for(let u of this._def.checks)u.kind==="min"?(u.inclusive?t.data<u.value:t.data<=u.value)&&(n=this._getOrReturnCtx(t,n),st(n,{code:$e.too_small,type:"bigint",minimum:u.value,inclusive:u.inclusive,message:u.message}),s.dirty()):u.kind==="max"?(u.inclusive?t.data>u.value:t.data>=u.value)&&(n=this._getOrReturnCtx(t,n),st(n,{code:$e.too_big,type:"bigint",maximum:u.value,inclusive:u.inclusive,message:u.message}),s.dirty()):u.kind==="multipleOf"?t.data%u.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),st(n,{code:$e.not_multiple_of,multipleOf:u.value,message:u.message}),s.dirty()):dn.assertNever(u);return{status:s.value,value:t.data}}_getInvalidInput(t){let r=this._getOrReturnCtx(t);return st(r,{code:$e.invalid_type,expected:yt.bigint,received:r.parsedType}),_r}gte(t,r){return this.setLimit("min",t,!0,Ot.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ot.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ot.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ot.toString(r))}setLimit(t,r,n,s){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Ot.toString(s)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ot.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ot.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ot.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ot.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ot.toString(r)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};Dh.create=e=>{var t;return new Dh({checks:[],typeName:Ge.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...kr(e)})};var Ch=class extends Mr{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==yt.boolean){let n=this._getOrReturnCtx(t);return st(n,{code:$e.invalid_type,expected:yt.boolean,received:n.parsedType}),_r}return bc(t.data)}};Ch.create=e=>new Ch({typeName:Ge.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...kr(e)});var xh=class e extends Mr{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==yt.date){let u=this._getOrReturnCtx(t);return st(u,{code:$e.invalid_type,expected:yt.date,received:u.parsedType}),_r}if(isNaN(t.data.getTime())){let u=this._getOrReturnCtx(t);return st(u,{code:$e.invalid_date}),_r}let n=new Lu,s;for(let u of this._def.checks)u.kind==="min"?t.data.getTime()<u.value&&(s=this._getOrReturnCtx(t,s),st(s,{code:$e.too_small,message:u.message,inclusive:!0,exact:!1,minimum:u.value,type:"date"}),n.dirty()):u.kind==="max"?t.data.getTime()>u.value&&(s=this._getOrReturnCtx(t,s),st(s,{code:$e.too_big,message:u.message,inclusive:!0,exact:!1,maximum:u.value,type:"date"}),n.dirty()):dn.assertNever(u);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Ot.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Ot.toString(r)})}get minDate(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}};xh.create=e=>new xh({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Ge.ZodDate,...kr(e)});var m_=class extends Mr{_parse(t){if(this._getType(t)!==yt.symbol){let n=this._getOrReturnCtx(t);return st(n,{code:$e.invalid_type,expected:yt.symbol,received:n.parsedType}),_r}return bc(t.data)}};m_.create=e=>new m_({typeName:Ge.ZodSymbol,...kr(e)});var Ph=class extends Mr{_parse(t){if(this._getType(t)!==yt.undefined){let n=this._getOrReturnCtx(t);return st(n,{code:$e.invalid_type,expected:yt.undefined,received:n.parsedType}),_r}return bc(t.data)}};Ph.create=e=>new Ph({typeName:Ge.ZodUndefined,...kr(e)});var Ah=class extends Mr{_parse(t){if(this._getType(t)!==yt.null){let n=this._getOrReturnCtx(t);return st(n,{code:$e.invalid_type,expected:yt.null,received:n.parsedType}),_r}return bc(t.data)}};Ah.create=e=>new Ah({typeName:Ge.ZodNull,...kr(e)});var ih=class extends Mr{constructor(){super(...arguments),this._any=!0}_parse(t){return bc(t.data)}};ih.create=e=>new ih({typeName:Ge.ZodAny,...kr(e)});var ym=class extends Mr{constructor(){super(...arguments),this._unknown=!0}_parse(t){return bc(t.data)}};ym.create=e=>new ym({typeName:Ge.ZodUnknown,...kr(e)});var Rp=class extends Mr{_parse(t){let r=this._getOrReturnCtx(t);return st(r,{code:$e.invalid_type,expected:yt.never,received:r.parsedType}),_r}};Rp.create=e=>new Rp({typeName:Ge.ZodNever,...kr(e)});var h_=class extends Mr{_parse(t){if(this._getType(t)!==yt.undefined){let n=this._getOrReturnCtx(t);return st(n,{code:$e.invalid_type,expected:yt.void,received:n.parsedType}),_r}return bc(t.data)}};h_.create=e=>new h_({typeName:Ge.ZodVoid,...kr(e)});var Sm=class e extends Mr{_parse(t){let{ctx:r,status:n}=this._processInputParams(t),s=this._def;if(r.parsedType!==yt.array)return st(r,{code:$e.invalid_type,expected:yt.array,received:r.parsedType}),_r;if(s.exactLength!==null){let h=r.data.length>s.exactLength.value,w=r.data.length<s.exactLength.value;(h||w)&&(st(r,{code:h?$e.too_big:$e.too_small,minimum:w?s.exactLength.value:void 0,maximum:h?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(st(r,{code:$e.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(st(r,{code:$e.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((h,w)=>s.type._parseAsync(new Fd(r,h,r.path,w)))).then(h=>Lu.mergeArray(n,h));let u=[...r.data].map((h,w)=>s.type._parseSync(new Fd(r,h,r.path,w)));return Lu.mergeArray(n,u)}get element(){return this._def.type}min(t,r){return new e({...this._def,minLength:{value:t,message:Ot.toString(r)}})}max(t,r){return new e({...this._def,maxLength:{value:t,message:Ot.toString(r)}})}length(t,r){return new e({...this._def,exactLength:{value:t,message:Ot.toString(r)}})}nonempty(t){return this.min(1,t)}};Sm.create=(e,t)=>new Sm({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ge.ZodArray,...kr(t)});function d_(e){if(e instanceof wl){let t={};for(let r in e.shape){let n=e.shape[r];t[r]=Sl.create(d_(n))}return new wl({...e._def,shape:()=>t})}else return e instanceof Sm?new Sm({...e._def,type:d_(e.element)}):e instanceof Sl?Sl.create(d_(e.unwrap())):e instanceof Rv?Rv.create(d_(e.unwrap())):e instanceof Av?Av.create(e.items.map(t=>d_(t))):e}var wl=class e extends Mr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let t=this._def.shape(),r=dn.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==yt.object){let C=this._getOrReturnCtx(t);return st(C,{code:$e.invalid_type,expected:yt.object,received:C.parsedType}),_r}let{status:n,ctx:s}=this._processInputParams(t),{shape:u,keys:h}=this._getCached(),w=[];if(!(this._def.catchall instanceof Rp&&this._def.unknownKeys==="strip"))for(let C in s.data)h.includes(C)||w.push(C);let T=[];for(let C of h){let F=u[C],z=s.data[C];T.push({key:{status:"valid",value:C},value:F._parse(new Fd(s,z,s.path,C)),alwaysSet:C in s.data})}if(this._def.catchall instanceof Rp){let C=this._def.unknownKeys;if(C==="passthrough")for(let F of w)T.push({key:{status:"valid",value:F},value:{status:"valid",value:s.data[F]}});else if(C==="strict")w.length>0&&(st(s,{code:$e.unrecognized_keys,keys:w}),n.dirty());else if(C!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let C=this._def.catchall;for(let F of w){let z=s.data[F];T.push({key:{status:"valid",value:F},value:C._parse(new Fd(s,z,s.path,F)),alwaysSet:F in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let C=[];for(let F of T){let z=await F.key,ee=await F.value;C.push({key:z,value:ee,alwaysSet:F.alwaysSet})}return C}).then(C=>Lu.mergeObjectSync(n,C)):Lu.mergeObjectSync(n,T)}get shape(){return this._def.shape()}strict(t){return Ot.errToObj,new e({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var s,u,h,w;let T=(h=(u=(s=this._def).errorMap)===null||u===void 0?void 0:u.call(s,r,n).message)!==null&&h!==void 0?h:n.defaultError;return r.code==="unrecognized_keys"?{message:(w=Ot.errToObj(t).message)!==null&&w!==void 0?w:T}:{message:T}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Ge.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new e({...this._def,catchall:t})}pick(t){let r={};return dn.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new e({...this._def,shape:()=>r})}omit(t){let r={};return dn.objectKeys(this.shape).forEach(n=>{t[n]||(r[n]=this.shape[n])}),new e({...this._def,shape:()=>r})}deepPartial(){return d_(this)}partial(t){let r={};return dn.objectKeys(this.shape).forEach(n=>{let s=this.shape[n];t&&!t[n]?r[n]=s:r[n]=s.optional()}),new e({...this._def,shape:()=>r})}required(t){let r={};return dn.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])r[n]=this.shape[n];else{let u=this.shape[n];for(;u instanceof Sl;)u=u._def.innerType;r[n]=u}}),new e({...this._def,shape:()=>r})}keyof(){return sb(dn.objectKeys(this.shape))}};wl.create=(e,t)=>new wl({shape:()=>e,unknownKeys:"strip",catchall:Rp.create(),typeName:Ge.ZodObject,...kr(t)});wl.strictCreate=(e,t)=>new wl({shape:()=>e,unknownKeys:"strict",catchall:Rp.create(),typeName:Ge.ZodObject,...kr(t)});wl.lazycreate=(e,t)=>new wl({shape:e,unknownKeys:"strip",catchall:Rp.create(),typeName:Ge.ZodObject,...kr(t)});var Rh=class extends Mr{_parse(t){let{ctx:r}=this._processInputParams(t),n=this._def.options;function s(u){for(let w of u)if(w.result.status==="valid")return w.result;for(let w of u)if(w.result.status==="dirty")return r.common.issues.push(...w.ctx.common.issues),w.result;let h=u.map(w=>new wc(w.ctx.common.issues));return st(r,{code:$e.invalid_union,unionErrors:h}),_r}if(r.common.async)return Promise.all(n.map(async u=>{let h={...r,common:{...r.common,issues:[]},parent:null};return{result:await u._parseAsync({data:r.data,path:r.path,parent:h}),ctx:h}})).then(s);{let u,h=[];for(let T of n){let C={...r,common:{...r.common,issues:[]},parent:null},F=T._parseSync({data:r.data,path:r.path,parent:C});if(F.status==="valid")return F;F.status==="dirty"&&!u&&(u={result:F,ctx:C}),C.common.issues.length&&h.push(C.common.issues)}if(u)return r.common.issues.push(...u.ctx.common.issues),u.result;let w=h.map(T=>new wc(T));return st(r,{code:$e.invalid_union,unionErrors:w}),_r}}get options(){return this._def.options}};Rh.create=(e,t)=>new Rh({options:e,typeName:Ge.ZodUnion,...kr(t)});var _m=e=>e instanceof kh?_m(e.schema):e instanceof Uf?_m(e.innerType()):e instanceof Mh?[e.value]:e instanceof Lh?e.options:e instanceof Fh?dn.objectValues(e.enum):e instanceof Uh?_m(e._def.innerType):e instanceof Ph?[void 0]:e instanceof Ah?[null]:e instanceof Sl?[void 0,..._m(e.unwrap())]:e instanceof Rv?[null,..._m(e.unwrap())]:e instanceof H_||e instanceof Yh?_m(e.unwrap()):e instanceof jh?_m(e._def.innerType):[],Jg=class e extends Mr{_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.object)return st(r,{code:$e.invalid_type,expected:yt.object,received:r.parsedType}),_r;let n=this.discriminator,s=r.data[n],u=this.optionsMap.get(s);return u?r.common.async?u._parseAsync({data:r.data,path:r.path,parent:r}):u._parseSync({data:r.data,path:r.path,parent:r}):(st(r,{code:$e.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),_r)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,n){let s=new Map;for(let u of r){let h=_m(u.shape[t]);if(!h.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let w of h){if(s.has(w))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(w)}`);s.set(w,u)}}return new e({typeName:Ge.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:s,...kr(n)})}};function c0(e,t){let r=gm(e),n=gm(t);if(e===t)return{valid:!0,data:e};if(r===yt.object&&n===yt.object){let s=dn.objectKeys(t),u=dn.objectKeys(e).filter(w=>s.indexOf(w)!==-1),h={...e,...t};for(let w of u){let T=c0(e[w],t[w]);if(!T.valid)return{valid:!1};h[w]=T.data}return{valid:!0,data:h}}else if(r===yt.array&&n===yt.array){if(e.length!==t.length)return{valid:!1};let s=[];for(let u=0;u<e.length;u++){let h=e[u],w=t[u],T=c0(h,w);if(!T.valid)return{valid:!1};s.push(T.data)}return{valid:!0,data:s}}else return r===yt.date&&n===yt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var Oh=class extends Mr{_parse(t){let{status:r,ctx:n}=this._processInputParams(t),s=(u,h)=>{if(s0(u)||s0(h))return _r;let w=c0(u.value,h.value);return w.valid?((u0(u)||u0(h))&&r.dirty(),{status:r.value,value:w.data}):(st(n,{code:$e.invalid_intersection_types}),_r)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([u,h])=>s(u,h)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Oh.create=(e,t,r)=>new Oh({left:e,right:t,typeName:Ge.ZodIntersection,...kr(r)});var Av=class e extends Mr{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.array)return st(n,{code:$e.invalid_type,expected:yt.array,received:n.parsedType}),_r;if(n.data.length<this._def.items.length)return st(n,{code:$e.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_r;!this._def.rest&&n.data.length>this._def.items.length&&(st(n,{code:$e.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let u=[...n.data].map((h,w)=>{let T=this._def.items[w]||this._def.rest;return T?T._parse(new Fd(n,h,n.path,w)):null}).filter(h=>!!h);return n.common.async?Promise.all(u).then(h=>Lu.mergeArray(r,h)):Lu.mergeArray(r,u)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};Av.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Av({items:e,typeName:Ge.ZodTuple,rest:null,...kr(t)})};var Zg=class e extends Mr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.object)return st(n,{code:$e.invalid_type,expected:yt.object,received:n.parsedType}),_r;let s=[],u=this._def.keyType,h=this._def.valueType;for(let w in n.data)s.push({key:u._parse(new Fd(n,w,n.path,w)),value:h._parse(new Fd(n,n.data[w],n.path,w)),alwaysSet:w in n.data});return n.common.async?Lu.mergeObjectAsync(r,s):Lu.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof Mr?new e({keyType:t,valueType:r,typeName:Ge.ZodRecord,...kr(n)}):new e({keyType:ah.create(),valueType:t,typeName:Ge.ZodRecord,...kr(r)})}},__=class extends Mr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.map)return st(n,{code:$e.invalid_type,expected:yt.map,received:n.parsedType}),_r;let s=this._def.keyType,u=this._def.valueType,h=[...n.data.entries()].map(([w,T],C)=>({key:s._parse(new Fd(n,w,n.path,[C,"key"])),value:u._parse(new Fd(n,T,n.path,[C,"value"]))}));if(n.common.async){let w=new Map;return Promise.resolve().then(async()=>{for(let T of h){let C=await T.key,F=await T.value;if(C.status==="aborted"||F.status==="aborted")return _r;(C.status==="dirty"||F.status==="dirty")&&r.dirty(),w.set(C.value,F.value)}return{status:r.value,value:w}})}else{let w=new Map;for(let T of h){let C=T.key,F=T.value;if(C.status==="aborted"||F.status==="aborted")return _r;(C.status==="dirty"||F.status==="dirty")&&r.dirty(),w.set(C.value,F.value)}return{status:r.value,value:w}}}};__.create=(e,t,r)=>new __({valueType:t,keyType:e,typeName:Ge.ZodMap,...kr(r)});var g_=class e extends Mr{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.set)return st(n,{code:$e.invalid_type,expected:yt.set,received:n.parsedType}),_r;let s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(st(n,{code:$e.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(st(n,{code:$e.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());let u=this._def.valueType;function h(T){let C=new Set;for(let F of T){if(F.status==="aborted")return _r;F.status==="dirty"&&r.dirty(),C.add(F.value)}return{status:r.value,value:C}}let w=[...n.data.values()].map((T,C)=>u._parse(new Fd(n,T,n.path,C)));return n.common.async?Promise.all(w).then(T=>h(T)):h(w)}min(t,r){return new e({...this._def,minSize:{value:t,message:Ot.toString(r)}})}max(t,r){return new e({...this._def,maxSize:{value:t,message:Ot.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}};g_.create=(e,t)=>new g_({valueType:e,minSize:null,maxSize:null,typeName:Ge.ZodSet,...kr(t)});var Xg=class e extends Mr{constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.function)return st(r,{code:$e.invalid_type,expected:yt.function,received:r.parsedType}),_r;function n(w,T){return Kg({data:w,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Vg(),v_].filter(C=>!!C),issueData:{code:$e.invalid_arguments,argumentsError:T}})}function s(w,T){return Kg({data:w,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Vg(),v_].filter(C=>!!C),issueData:{code:$e.invalid_return_type,returnTypeError:T}})}let u={errorMap:r.common.contextualErrorMap},h=r.data;if(this._def.returns instanceof oh){let w=this;return bc(async function(...T){let C=new wc([]),F=await w._def.args.parseAsync(T,u).catch(pe=>{throw C.addIssue(n(T,pe)),C}),z=await Reflect.apply(h,this,F);return await w._def.returns._def.type.parseAsync(z,u).catch(pe=>{throw C.addIssue(s(z,pe)),C})})}else{let w=this;return bc(function(...T){let C=w._def.args.safeParse(T,u);if(!C.success)throw new wc([n(T,C.error)]);let F=Reflect.apply(h,this,C.data),z=w._def.returns.safeParse(F,u);if(!z.success)throw new wc([s(F,z.error)]);return z.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new e({...this._def,args:Av.create(t).rest(ym.create())})}returns(t){return new e({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,n){return new e({args:t||Av.create([]).rest(ym.create()),returns:r||ym.create(),typeName:Ge.ZodFunction,...kr(n)})}},kh=class extends Mr{get schema(){return this._def.getter()}_parse(t){let{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};kh.create=(e,t)=>new kh({getter:e,typeName:Ge.ZodLazy,...kr(t)});var Mh=class extends Mr{_parse(t){if(t.data!==this._def.value){let r=this._getOrReturnCtx(t);return st(r,{received:r.data,code:$e.invalid_literal,expected:this._def.value}),_r}return{status:"valid",value:t.data}}get value(){return this._def.value}};Mh.create=(e,t)=>new Mh({value:e,typeName:Ge.ZodLiteral,...kr(t)});function sb(e,t){return new Lh({values:e,typeName:Ge.ZodEnum,...kr(t)})}var Lh=class e extends Mr{constructor(){super(...arguments),B_.set(this,void 0)}_parse(t){if(typeof t.data!="string"){let r=this._getOrReturnCtx(t),n=this._def.values;return st(r,{expected:dn.joinValues(n),received:r.parsedType,code:$e.invalid_type}),_r}if(Wg(this,B_,"f")||nb(this,B_,new Set(this._def.values),"f"),!Wg(this,B_,"f").has(t.data)){let r=this._getOrReturnCtx(t),n=this._def.values;return st(r,{received:r.data,code:$e.invalid_enum_value,options:n}),_r}return bc(t.data)}get options(){return this._def.values}get enum(){let t={};for(let r of this._def.values)t[r]=r;return t}get Values(){let t={};for(let r of this._def.values)t[r]=r;return t}get Enum(){let t={};for(let r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return e.create(t,{...this._def,...r})}exclude(t,r=this._def){return e.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}};B_=new WeakMap;Lh.create=sb;var Fh=class extends Mr{constructor(){super(...arguments),z_.set(this,void 0)}_parse(t){let r=dn.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==yt.string&&n.parsedType!==yt.number){let s=dn.objectValues(r);return st(n,{expected:dn.joinValues(s),received:n.parsedType,code:$e.invalid_type}),_r}if(Wg(this,z_,"f")||nb(this,z_,new Set(dn.getValidEnumValues(this._def.values)),"f"),!Wg(this,z_,"f").has(t.data)){let s=dn.objectValues(r);return st(n,{received:n.data,code:$e.invalid_enum_value,options:s}),_r}return bc(t.data)}get enum(){return this._def.values}};z_=new WeakMap;Fh.create=(e,t)=>new Fh({values:e,typeName:Ge.ZodNativeEnum,...kr(t)});var oh=class extends Mr{unwrap(){return this._def.type}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.promise&&r.common.async===!1)return st(r,{code:$e.invalid_type,expected:yt.promise,received:r.parsedType}),_r;let n=r.parsedType===yt.promise?r.data:Promise.resolve(r.data);return bc(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}};oh.create=(e,t)=>new oh({type:e,typeName:Ge.ZodPromise,...kr(t)});var Uf=class extends Mr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ge.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:r,ctx:n}=this._processInputParams(t),s=this._def.effect||null,u={addIssue:h=>{st(n,h),h.fatal?r.abort():r.dirty()},get path(){return n.path}};if(u.addIssue=u.addIssue.bind(u),s.type==="preprocess"){let h=s.transform(n.data,u);if(n.common.async)return Promise.resolve(h).then(async w=>{if(r.value==="aborted")return _r;let T=await this._def.schema._parseAsync({data:w,path:n.path,parent:n});return T.status==="aborted"?_r:T.status==="dirty"||r.value==="dirty"?p_(T.value):T});{if(r.value==="aborted")return _r;let w=this._def.schema._parseSync({data:h,path:n.path,parent:n});return w.status==="aborted"?_r:w.status==="dirty"||r.value==="dirty"?p_(w.value):w}}if(s.type==="refinement"){let h=w=>{let T=s.refinement(w,u);if(n.common.async)return Promise.resolve(T);if(T instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return w};if(n.common.async===!1){let w=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return w.status==="aborted"?_r:(w.status==="dirty"&&r.dirty(),h(w.value),{status:r.value,value:w.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(w=>w.status==="aborted"?_r:(w.status==="dirty"&&r.dirty(),h(w.value).then(()=>({status:r.value,value:w.value}))))}if(s.type==="transform")if(n.common.async===!1){let h=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ih(h))return h;let w=s.transform(h.value,u);if(w instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:w}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(h=>Ih(h)?Promise.resolve(s.transform(h.value,u)).then(w=>({status:r.value,value:w})):h);dn.assertNever(s)}};Uf.create=(e,t,r)=>new Uf({schema:e,typeName:Ge.ZodEffects,effect:t,...kr(r)});Uf.createWithPreprocess=(e,t,r)=>new Uf({schema:t,effect:{type:"preprocess",transform:e},typeName:Ge.ZodEffects,...kr(r)});var Sl=class extends Mr{_parse(t){return this._getType(t)===yt.undefined?bc(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Sl.create=(e,t)=>new Sl({innerType:e,typeName:Ge.ZodOptional,...kr(t)});var Rv=class extends Mr{_parse(t){return this._getType(t)===yt.null?bc(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Rv.create=(e,t)=>new Rv({innerType:e,typeName:Ge.ZodNullable,...kr(t)});var Uh=class extends Mr{_parse(t){let{ctx:r}=this._processInputParams(t),n=r.data;return r.parsedType===yt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Uh.create=(e,t)=>new Uh({innerType:e,typeName:Ge.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...kr(t)});var jh=class extends Mr{_parse(t){let{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return G_(s)?s.then(u=>({status:"valid",value:u.status==="valid"?u.value:this._def.catchValue({get error(){return new wc(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new wc(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};jh.create=(e,t)=>new jh({innerType:e,typeName:Ge.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...kr(t)});var y_=class extends Mr{_parse(t){if(this._getType(t)!==yt.nan){let n=this._getOrReturnCtx(t);return st(n,{code:$e.invalid_type,expected:yt.nan,received:n.parsedType}),_r}return{status:"valid",value:t.data}}};y_.create=e=>new y_({typeName:Ge.ZodNaN,...kr(e)});var QD=Symbol("zod_brand"),H_=class extends Mr{_parse(t){let{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},V_=class e extends Mr{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{let u=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return u.status==="aborted"?_r:u.status==="dirty"?(r.dirty(),p_(u.value)):this._def.out._parseAsync({data:u.value,path:n.path,parent:n})})();{let s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?_r:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(t,r){return new e({in:t,out:r,typeName:Ge.ZodPipeline})}},Yh=class extends Mr{_parse(t){let r=this._def.innerType._parse(t),n=s=>(Ih(s)&&(s.value=Object.freeze(s.value)),s);return G_(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}};Yh.create=(e,t)=>new Yh({innerType:e,typeName:Ge.ZodReadonly,...kr(t)});function ub(e,t={},r){return e?ih.create().superRefine((n,s)=>{var u,h;if(!e(n)){let w=typeof t=="function"?t(n):typeof t=="string"?{message:t}:t,T=(h=(u=w.fatal)!==null&&u!==void 0?u:r)!==null&&h!==void 0?h:!0,C=typeof w=="string"?{message:w}:w;s.addIssue({code:"custom",...C,fatal:T})}}):ih.create()}var eC={object:wl.lazycreate},Ge;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Ge||(Ge={}));var tC=(e,t={message:`Input not instance of ${e.name}`})=>ub(r=>r instanceof e,t),cb=ah.create,lb=Nh.create,rC=y_.create,nC=Dh.create,fb=Ch.create,aC=xh.create,iC=m_.create,oC=Ph.create,sC=Ah.create,uC=ih.create,cC=ym.create,lC=Rp.create,fC=h_.create,dC=Sm.create,pC=wl.create,vC=wl.strictCreate,mC=Rh.create,hC=Jg.create,_C=Oh.create,gC=Av.create,yC=Zg.create,SC=__.create,wC=g_.create,bC=Xg.create,EC=kh.create,TC=Mh.create,IC=Lh.create,NC=Fh.create,DC=oh.create,tb=Uf.create,CC=Sl.create,xC=Rv.create,PC=Uf.createWithPreprocess,AC=V_.create,RC=()=>cb().optional(),OC=()=>lb().optional(),kC=()=>fb().optional(),MC={string:e=>ah.create({...e,coerce:!0}),number:e=>Nh.create({...e,coerce:!0}),boolean:e=>Ch.create({...e,coerce:!0}),bigint:e=>Dh.create({...e,coerce:!0}),date:e=>xh.create({...e,coerce:!0})},LC=_r,k=Object.freeze({__proto__:null,defaultErrorMap:v_,setErrorMap:PD,getErrorMap:Vg,makeIssue:Kg,EMPTY_PATH:AD,addIssueToContext:st,ParseStatus:Lu,INVALID:_r,DIRTY:p_,OK:bc,isAborted:s0,isDirty:u0,isValid:Ih,isAsync:G_,get util(){return dn},get objectUtil(){return o0},ZodParsedType:yt,getParsedType:gm,ZodType:Mr,datetimeRegex:ob,ZodString:ah,ZodNumber:Nh,ZodBigInt:Dh,ZodBoolean:Ch,ZodDate:xh,ZodSymbol:m_,ZodUndefined:Ph,ZodNull:Ah,ZodAny:ih,ZodUnknown:ym,ZodNever:Rp,ZodVoid:h_,ZodArray:Sm,ZodObject:wl,ZodUnion:Rh,ZodDiscriminatedUnion:Jg,ZodIntersection:Oh,ZodTuple:Av,ZodRecord:Zg,ZodMap:__,ZodSet:g_,ZodFunction:Xg,ZodLazy:kh,ZodLiteral:Mh,ZodEnum:Lh,ZodNativeEnum:Fh,ZodPromise:oh,ZodEffects:Uf,ZodTransformer:Uf,ZodOptional:Sl,ZodNullable:Rv,ZodDefault:Uh,ZodCatch:jh,ZodNaN:y_,BRAND:QD,ZodBranded:H_,ZodPipeline:V_,ZodReadonly:Yh,custom:ub,Schema:Mr,ZodSchema:Mr,late:eC,get ZodFirstPartyTypeKind(){return Ge},coerce:MC,any:uC,array:dC,bigint:nC,boolean:fb,date:aC,discriminatedUnion:hC,effect:tb,enum:IC,function:bC,instanceof:tC,intersection:_C,lazy:EC,literal:TC,map:SC,nan:rC,nativeEnum:NC,never:lC,null:sC,nullable:xC,number:lb,object:pC,oboolean:kC,onumber:OC,optional:CC,ostring:RC,pipeline:AC,preprocess:PC,promise:DC,record:yC,set:wC,strictObject:vC,string:cb,symbol:iC,transformer:tb,tuple:gC,undefined:oC,union:mC,unknown:cC,void:fC,NEVER:LC,ZodIssueCode:$e,quotelessJson:xD,ZodError:wc});var FC=k.object({type:k.literal("error"),error:k.object({type:k.string(),message:k.string()})}),db=Gg({errorSchema:FC,errorToMessage:e=>e.error.message});function UC({prompt:e}){var t,r,n,s;let u=new Set,h=jC(e),w,T=[];function C(F){var z;let ee=F==null?void 0:F.anthropic;return(z=ee==null?void 0:ee.cacheControl)!=null?z:ee==null?void 0:ee.cache_control}for(let F=0;F<h.length;F++){let z=h[F],ee=F===h.length-1,pe=z.type;switch(pe){case"system":{if(w!=null)throw new Bn({functionality:"Multiple system messages that are separated by user/assistant messages"});w=z.messages.map(({content:ce,providerMetadata:re})=>({type:"text",text:ce,cache_control:C(re)}));break}case"user":{let ce=[];for(let re of z.messages){let{role:Q,content:ve}=re;switch(Q){case"user":{for(let Pe=0;Pe<ve.length;Pe++){let We=ve[Pe],Ae=Pe===ve.length-1,Ze=(t=C(We.providerMetadata))!=null?t:Ae?C(re.providerMetadata):void 0;switch(We.type){case"text":{ce.push({type:"text",text:We.text,cache_control:Ze});break}case"image":{if(We.image instanceof URL)throw new Bn({functionality:"Image URLs in user messages"});ce.push({type:"image",source:{type:"base64",media_type:(r=We.mimeType)!=null?r:"image/jpeg",data:Th(We.image)},cache_control:Ze});break}case"file":{if(We.data instanceof URL)throw new Bn({functionality:"Image URLs in user messages"});if(We.mimeType!=="application/pdf")throw new Bn({functionality:"Non-PDF files in user messages"});u.add("pdfs-2024-09-25"),ce.push({type:"document",source:{type:"base64",media_type:"application/pdf",data:We.data},cache_control:Ze});break}}}break}case"tool":{for(let Pe=0;Pe<ve.length;Pe++){let We=ve[Pe],Ae=Pe===ve.length-1,Ze=(n=C(We.providerMetadata))!=null?n:Ae?C(re.providerMetadata):void 0,Tt=We.content!=null?We.content.map(Dt=>{var Lt;switch(Dt.type){case"text":return{type:"text",text:Dt.text,cache_control:void 0};case"image":return{type:"image",source:{type:"base64",media_type:(Lt=Dt.mimeType)!=null?Lt:"image/jpeg",data:Dt.data},cache_control:void 0}}}):JSON.stringify(We.result);ce.push({type:"tool_result",tool_use_id:We.toolCallId,content:Tt,is_error:We.isError,cache_control:Ze})}break}default:{let Pe=Q;throw new Error(`Unsupported role: ${Pe}`)}}}T.push({role:"user",content:ce});break}case"assistant":{let ce=[];for(let re=0;re<z.messages.length;re++){let Q=z.messages[re],ve=re===z.messages.length-1,{content:Pe}=Q;for(let We=0;We<Pe.length;We++){let Ae=Pe[We],Ze=We===Pe.length-1,Tt=(s=C(Ae.providerMetadata))!=null?s:Ze?C(Q.providerMetadata):void 0;switch(Ae.type){case"text":{ce.push({type:"text",text:ee&&ve&&Ze?Ae.text.trim():Ae.text,cache_control:Tt});break}case"tool-call":{ce.push({type:"tool_use",id:Ae.toolCallId,name:Ae.toolName,input:Ae.args,cache_control:Tt});break}}}}T.push({role:"assistant",content:ce});break}default:{let ce=pe;throw new Error(`Unsupported type: ${ce}`)}}}return{prompt:{system:w,messages:T},betas:u}}function jC(e){let t=[],r;for(let n of e){let{role:s}=n;switch(s){case"system":{(r==null?void 0:r.type)!=="system"&&(r={type:"system",messages:[]},t.push(r)),r.messages.push(n);break}case"assistant":{(r==null?void 0:r.type)!=="assistant"&&(r={type:"assistant",messages:[]},t.push(r)),r.messages.push(n);break}case"user":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},t.push(r)),r.messages.push(n);break}case"tool":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},t.push(r)),r.messages.push(n);break}default:{let u=s;throw new Error(`Unsupported role: ${u}`)}}}return t}function pb(e){switch(e){case"end_turn":case"stop_sequence":return"stop";case"tool_use":return"tool-calls";case"max_tokens":return"length";default:return"unknown"}}function YC(e){var t;let r=(t=e.tools)!=null&&t.length?e.tools:void 0,n=[],s=new Set;if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:n,betas:s};let u=[];for(let T of r)switch(T.type){case"function":u.push({name:T.name,description:T.description,input_schema:T.parameters});break;case"provider-defined":switch(s.add("computer-use-2024-10-22"),T.id){case"anthropic.computer_20241022":u.push({name:T.name,type:"computer_20241022",display_width_px:T.args.displayWidthPx,display_height_px:T.args.displayHeightPx,display_number:T.args.displayNumber});break;case"anthropic.text_editor_20241022":u.push({name:T.name,type:"text_editor_20241022"});break;case"anthropic.bash_20241022":u.push({name:T.name,type:"bash_20241022"});break;default:n.push({type:"unsupported-tool",tool:T});break}break;default:n.push({type:"unsupported-tool",tool:T});break}let h=e.toolChoice;if(h==null)return{tools:u,tool_choice:void 0,toolWarnings:n,betas:s};let w=h.type;switch(w){case"auto":return{tools:u,tool_choice:{type:"auto"},toolWarnings:n,betas:s};case"required":return{tools:u,tool_choice:{type:"any"},toolWarnings:n,betas:s};case"none":return{tools:void 0,tool_choice:void 0,toolWarnings:n,betas:s};case"tool":return{tools:u,tool_choice:{type:"tool",name:h.toolName},toolWarnings:n,betas:s};default:{let T=w;throw new Bn({functionality:`Unsupported tool choice type: ${T}`})}}}var $C=class{constructor(e,t,r){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:r,temperature:n,topP:s,topK:u,frequencyPenalty:h,presencePenalty:w,stopSequences:T,responseFormat:C,seed:F}){let z=e.type,ee=[];h!=null&&ee.push({type:"unsupported-setting",setting:"frequencyPenalty"}),w!=null&&ee.push({type:"unsupported-setting",setting:"presencePenalty"}),F!=null&&ee.push({type:"unsupported-setting",setting:"seed"}),C!=null&&C.type!=="text"&&ee.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:pe,betas:ce}=UC({prompt:t}),re={model:this.modelId,max_tokens:r??4096,temperature:n,top_k:u,top_p:s,stop_sequences:T,system:pe.system,messages:pe.messages};switch(z){case"regular":{let{tools:Q,tool_choice:ve,toolWarnings:Pe,betas:We}=YC(e);return{args:{...re,tools:Q,tool_choice:ve},warnings:[...ee,...Pe],betas:new Set([...ce,...We])}}case"object-json":throw new Bn({functionality:"json-mode object generation"});case"object-tool":{let{name:Q,description:ve,parameters:Pe}=e.tool;return{args:{...re,tools:[{name:Q,description:ve,input_schema:Pe}],tool_choice:{type:"tool",name:Q}},warnings:ee,betas:ce}}default:{let Q=z;throw new Error(`Unsupported type: ${Q}`)}}}async getHeaders({betas:e,headers:t}){return Ld(await Xw(this.config.headers),e.size>0?{"anthropic-beta":Array.from(e).join(",")}:{},t)}buildRequestUrl(e){var t,r,n;return(n=(r=(t=this.config).buildRequestUrl)==null?void 0:r.call(t,this.config.baseURL,e))!=null?n:`${this.config.baseURL}/messages`}transformRequestBody(e){var t,r,n;return(n=(r=(t=this.config).transformRequestBody)==null?void 0:r.call(t,e))!=null?n:e}async doGenerate(e){var t,r,n,s;let{args:u,warnings:h,betas:w}=await this.getArgs(e),{responseHeaders:T,value:C}=await Ff({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:w,headers:e.headers}),body:this.transformRequestBody(u),failedResponseHandler:db,successfulResponseHandler:Pv(qC),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:F,...z}=u,ee="";for(let ce of C.content)ce.type==="text"&&(ee+=ce.text);let pe;if(C.content.some(ce=>ce.type==="tool_use")){pe=[];for(let ce of C.content)ce.type==="tool_use"&&pe.push({toolCallType:"function",toolCallId:ce.id,toolName:ce.name,args:JSON.stringify(ce.input)})}return{text:ee,toolCalls:pe,finishReason:pb(C.stop_reason),usage:{promptTokens:C.usage.input_tokens,completionTokens:C.usage.output_tokens},rawCall:{rawPrompt:F,rawSettings:z},rawResponse:{headers:T},response:{id:(t=C.id)!=null?t:void 0,modelId:(r=C.model)!=null?r:void 0},warnings:h,providerMetadata:{anthropic:{cacheCreationInputTokens:(n=C.usage.cache_creation_input_tokens)!=null?n:null,cacheReadInputTokens:(s=C.usage.cache_read_input_tokens)!=null?s:null}},request:{body:JSON.stringify(u)}}}async doStream(e){let{args:t,warnings:r,betas:n}=await this.getArgs(e),s={...t,stream:!0},{responseHeaders:u,value:h}=await Ff({url:this.buildRequestUrl(!0),headers:await this.getHeaders({betas:n,headers:e.headers}),body:this.transformRequestBody(s),failedResponseHandler:db,successfulResponseHandler:f_(BC),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:w,...T}=t,C="unknown",F={promptTokens:Number.NaN,completionTokens:Number.NaN},z={},ee,pe=this;return{stream:h.pipeThrough(new TransformStream({transform(ce,re){var Q,ve,Pe,We;if(!ce.success){re.enqueue({type:"error",error:ce.error});return}let Ae=ce.value;switch(Ae.type){case"ping":return;case"content_block_start":{let Ze=Ae.content_block.type;switch(Ze){case"text":return;case"tool_use":{z[Ae.index]={toolCallId:Ae.content_block.id,toolName:Ae.content_block.name,jsonText:""};return}default:{let Tt=Ze;throw new Error(`Unsupported content block type: ${Tt}`)}}}case"content_block_stop":{if(z[Ae.index]!=null){let Ze=z[Ae.index];re.enqueue({type:"tool-call",toolCallType:"function",toolCallId:Ze.toolCallId,toolName:Ze.toolName,args:Ze.jsonText}),delete z[Ae.index]}return}case"content_block_delta":{let Ze=Ae.delta.type;switch(Ze){case"text_delta":{re.enqueue({type:"text-delta",textDelta:Ae.delta.text});return}case"input_json_delta":{let Tt=z[Ae.index];re.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Tt.toolCallId,toolName:Tt.toolName,argsTextDelta:Ae.delta.partial_json}),Tt.jsonText+=Ae.delta.partial_json;return}default:{let Tt=Ze;throw new Error(`Unsupported delta type: ${Tt}`)}}}case"message_start":{F.promptTokens=Ae.message.usage.input_tokens,F.completionTokens=Ae.message.usage.output_tokens,ee={anthropic:{cacheCreationInputTokens:(Q=Ae.message.usage.cache_creation_input_tokens)!=null?Q:null,cacheReadInputTokens:(ve=Ae.message.usage.cache_read_input_tokens)!=null?ve:null}},re.enqueue({type:"response-metadata",id:(Pe=Ae.message.id)!=null?Pe:void 0,modelId:(We=Ae.message.model)!=null?We:void 0});return}case"message_delta":{F.completionTokens=Ae.usage.output_tokens,C=pb(Ae.delta.stop_reason);return}case"message_stop":{re.enqueue({type:"finish",finishReason:C,usage:F,providerMetadata:ee});return}case"error":{re.enqueue({type:"error",error:Ae.error});return}default:{let Ze=Ae;throw new Error(`Unsupported chunk type: ${Ze}`)}}}})),rawCall:{rawPrompt:w,rawSettings:T},rawResponse:{headers:u},warnings:r,request:{body:JSON.stringify(s)}}}},qC=k.object({type:k.literal("message"),id:k.string().nullish(),model:k.string().nullish(),content:k.array(k.discriminatedUnion("type",[k.object({type:k.literal("text"),text:k.string()}),k.object({type:k.literal("tool_use"),id:k.string(),name:k.string(),input:k.unknown()})])),stop_reason:k.string().nullish(),usage:k.object({input_tokens:k.number(),output_tokens:k.number(),cache_creation_input_tokens:k.number().nullish(),cache_read_input_tokens:k.number().nullish()})}),BC=k.discriminatedUnion("type",[k.object({type:k.literal("message_start"),message:k.object({id:k.string().nullish(),model:k.string().nullish(),usage:k.object({input_tokens:k.number(),output_tokens:k.number(),cache_creation_input_tokens:k.number().nullish(),cache_read_input_tokens:k.number().nullish()})})}),k.object({type:k.literal("content_block_start"),index:k.number(),content_block:k.discriminatedUnion("type",[k.object({type:k.literal("text"),text:k.string()}),k.object({type:k.literal("tool_use"),id:k.string(),name:k.string()})])}),k.object({type:k.literal("content_block_delta"),index:k.number(),delta:k.discriminatedUnion("type",[k.object({type:k.literal("input_json_delta"),partial_json:k.string()}),k.object({type:k.literal("text_delta"),text:k.string()})])}),k.object({type:k.literal("content_block_stop"),index:k.number()}),k.object({type:k.literal("error"),error:k.object({type:k.string(),message:k.string()})}),k.object({type:k.literal("message_delta"),delta:k.object({stop_reason:k.string().nullish()}),usage:k.object({output_tokens:k.number()})}),k.object({type:k.literal("message_stop")}),k.object({type:k.literal("ping")})]),zC=k.object({command:k.string(),restart:k.boolean().optional()});function GC(e={}){return{type:"provider-defined",id:"anthropic.bash_20241022",args:{},parameters:zC,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}}var HC=k.object({command:k.enum(["view","create","str_replace","insert","undo_edit"]),path:k.string(),file_text:k.string().optional(),insert_line:k.number().int().optional(),new_str:k.string().optional(),old_str:k.string().optional(),view_range:k.array(k.number().int()).optional()});function VC(e={}){return{type:"provider-defined",id:"anthropic.text_editor_20241022",args:{},parameters:HC,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}}var KC=k.object({action:k.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:k.array(k.number().int()).optional(),text:k.string().optional()});function WC(e){return{type:"provider-defined",id:"anthropic.computer_20241022",args:{displayWidthPx:e.displayWidthPx,displayHeightPx:e.displayHeightPx,displayNumber:e.displayNumber},parameters:KC,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}}var JC={bash_20241022:GC,textEditor_20241022:VC,computer_20241022:WC};function l0(e={}){var t;let r=(t=Hg(e.baseURL))!=null?t:"https://api.anthropic.com/v1",n=()=>({"anthropic-version":"2023-06-01","x-api-key":Bg({apiKey:e.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...e.headers}),s=(h,w={})=>new $C(h,w,{provider:"anthropic.messages",baseURL:r,headers:n,fetch:e.fetch}),u=function(h,w){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return s(h,w)};return u.languageModel=s,u.chat=s,u.messages=s,u.textEmbeddingModel=h=>{throw new t0({modelId:h,modelType:"textEmbeddingModel"})},u.tools=JC,u}var U1=l0();function ZC({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:r="system"}){let n=[];for(let{role:s,content:u}of e)switch(s){case"system":{switch(r){case"system":{n.push({role:"system",content:u});break}case"developer":{n.push({role:"developer",content:u});break}case"remove":break;default:{let h=r;throw new Error(`Unsupported system message mode: ${h}`)}}break}case"user":{if(u.length===1&&u[0].type==="text"){n.push({role:"user",content:u[0].text});break}n.push({role:"user",content:u.map(h=>{var w,T,C;switch(h.type){case"text":return{type:"text",text:h.text};case"image":return{type:"image_url",image_url:{url:h.image instanceof URL?h.image.toString():`data:${(w=h.mimeType)!=null?w:"image/jpeg"};base64,${Th(h.image)}`,detail:(C=(T=h.providerMetadata)==null?void 0:T.openai)==null?void 0:C.imageDetail}};case"file":{if(h.data instanceof URL)throw new Bn({functionality:"'File content parts with URL data' functionality not supported."});switch(h.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:h.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:h.data,format:"mp3"}};default:throw new Bn({functionality:`File content part type ${h.mimeType} in user messages`})}}}})});break}case"assistant":{let h="",w=[];for(let T of u)switch(T.type){case"text":{h+=T.text;break}case"tool-call":{w.push({id:T.toolCallId,type:"function",function:{name:T.toolName,arguments:JSON.stringify(T.args)}});break}default:{let C=T;throw new Error(`Unsupported part: ${C}`)}}if(t){if(w.length>1)throw new Bn({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});n.push({role:"assistant",content:h,function_call:w.length>0?w[0].function:void 0})}else n.push({role:"assistant",content:h,tool_calls:w.length>0?w:void 0});break}case"tool":{for(let h of u)t?n.push({role:"function",name:h.toolName,content:JSON.stringify(h.result)}):n.push({role:"tool",tool_call_id:h.toolCallId,content:JSON.stringify(h.result)});break}default:{let h=s;throw new Error(`Unsupported role: ${h}`)}}return n}function vb(e){var t,r;return(r=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:n,logprob:s,top_logprobs:u})=>({token:n,logprob:s,topLogprobs:u?u.map(({token:h,logprob:w})=>({token:h,logprob:w})):[]})))!=null?r:void 0}function Qg(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var f0=k.object({error:k.object({message:k.string(),type:k.string().nullish(),param:k.any().nullish(),code:k.union([k.string(),k.number()]).nullish()})}),S_=Gg({errorSchema:f0,errorToMessage:e=>e.error.message});function ey({id:e,model:t,created:r}){return{id:e??void 0,modelId:t??void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function XC({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:r}){var n;let s=(n=e.tools)!=null&&n.length?e.tools:void 0,u=[];if(s==null)return{tools:void 0,tool_choice:void 0,toolWarnings:u};let h=e.toolChoice;if(t){let C=[];for(let z of s)z.type==="provider-defined"?u.push({type:"unsupported-tool",tool:z}):C.push({name:z.name,description:z.description,parameters:z.parameters});if(h==null)return{functions:C,function_call:void 0,toolWarnings:u};switch(h.type){case"auto":case"none":case void 0:return{functions:C,function_call:void 0,toolWarnings:u};case"required":throw new Bn({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:C,function_call:{name:h.toolName},toolWarnings:u}}}let w=[];for(let C of s)C.type==="provider-defined"?u.push({type:"unsupported-tool",tool:C}):w.push({type:"function",function:{name:C.name,description:C.description,parameters:C.parameters,strict:r?!0:void 0}});if(h==null)return{tools:w,tool_choice:void 0,toolWarnings:u};let T=h.type;switch(T){case"auto":case"none":case"required":return{tools:w,tool_choice:T,toolWarnings:u};case"tool":return{tools:w,tool_choice:{type:"function",function:{name:h.toolName}},toolWarnings:u};default:{let C=T;throw new Bn({functionality:`Unsupported tool choice type: ${C}`})}}}var QC=class{constructor(e,t,r){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=r}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:ty(this.modelId)}get defaultObjectGenerationMode(){return rx(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:r,temperature:n,topP:s,topK:u,frequencyPenalty:h,presencePenalty:w,stopSequences:T,responseFormat:C,seed:F,providerMetadata:z}){var ee,pe,ce,re,Q,ve,Pe,We;let Ae=e.type,Ze=[];u!=null&&Ze.push({type:"unsupported-setting",setting:"topK"}),(C==null?void 0:C.type)==="json"&&C.schema!=null&&!this.supportsStructuredOutputs&&Ze.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let Tt=this.settings.useLegacyFunctionCalling;if(Tt&&this.settings.parallelToolCalls===!0)throw new Bn({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(Tt&&this.supportsStructuredOutputs)throw new Bn({functionality:"structuredOutputs with useLegacyFunctionCalling"});mb(this.modelId)==="remove"&&t.some(Lt=>Lt.role==="system")&&Ze.push({type:"other",message:"system messages are removed for this model"});let Dt={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:r,temperature:n,top_p:s,frequency_penalty:h,presence_penalty:w,response_format:(C==null?void 0:C.type)==="json"?this.supportsStructuredOutputs&&C.schema!=null?{type:"json_schema",json_schema:{schema:C.schema,strict:!0,name:(ee=C.name)!=null?ee:"response",description:C.description}}:{type:"json_object"}:void 0,stop:T,seed:F,max_completion_tokens:(pe=z==null?void 0:z.openai)==null?void 0:pe.maxCompletionTokens,store:(ce=z==null?void 0:z.openai)==null?void 0:ce.store,metadata:(re=z==null?void 0:z.openai)==null?void 0:re.metadata,prediction:(Q=z==null?void 0:z.openai)==null?void 0:Q.prediction,reasoning_effort:(Pe=(ve=z==null?void 0:z.openai)==null?void 0:ve.reasoningEffort)!=null?Pe:this.settings.reasoningEffort,messages:ZC({prompt:t,useLegacyFunctionCalling:Tt,systemMessageMode:mb(this.modelId)})};switch(ty(this.modelId)&&(Dt.temperature!=null&&(Dt.temperature=void 0,Ze.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),Dt.top_p!=null&&(Dt.top_p=void 0,Ze.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),Dt.frequency_penalty!=null&&(Dt.frequency_penalty=void 0,Ze.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),Dt.presence_penalty!=null&&(Dt.presence_penalty=void 0,Ze.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),Dt.logit_bias!=null&&(Dt.logit_bias=void 0,Ze.push({type:"other",message:"logitBias is not supported for reasoning models"})),Dt.logprobs!=null&&(Dt.logprobs=void 0,Ze.push({type:"other",message:"logprobs is not supported for reasoning models"})),Dt.top_logprobs!=null&&(Dt.top_logprobs=void 0,Ze.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),Dt.max_tokens!=null&&(Dt.max_completion_tokens==null&&(Dt.max_completion_tokens=Dt.max_tokens),Dt.max_tokens=void 0)),Ae){case"regular":{let{tools:Lt,tool_choice:it,functions:Gt,function_call:xr,toolWarnings:oa}=XC({mode:e,useLegacyFunctionCalling:Tt,structuredOutputs:this.supportsStructuredOutputs});return{args:{...Dt,tools:Lt,tool_choice:it,functions:Gt,function_call:xr},warnings:[...Ze,...oa]}}case"object-json":return{args:{...Dt,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(We=e.name)!=null?We:"response",description:e.description}}:{type:"json_object"}},warnings:Ze};case"object-tool":return{args:Tt?{...Dt,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...Dt,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:Ze};default:{let Lt=Ae;throw new Error(`Unsupported type: ${Lt}`)}}}async doGenerate(e){var t,r,n,s,u,h,w,T;let{args:C,warnings:F}=this.getArgs(e),{responseHeaders:z,value:ee}=await Ff({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ld(this.config.headers(),e.headers),body:C,failedResponseHandler:S_,successfulResponseHandler:Pv(ex),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:pe,...ce}=C,re=ee.choices[0],Q=(t=ee.usage)==null?void 0:t.completion_tokens_details,ve=(r=ee.usage)==null?void 0:r.prompt_tokens_details,Pe={openai:{}};return(Q==null?void 0:Q.reasoning_tokens)!=null&&(Pe.openai.reasoningTokens=Q==null?void 0:Q.reasoning_tokens),(Q==null?void 0:Q.accepted_prediction_tokens)!=null&&(Pe.openai.acceptedPredictionTokens=Q==null?void 0:Q.accepted_prediction_tokens),(Q==null?void 0:Q.rejected_prediction_tokens)!=null&&(Pe.openai.rejectedPredictionTokens=Q==null?void 0:Q.rejected_prediction_tokens),(ve==null?void 0:ve.cached_tokens)!=null&&(Pe.openai.cachedPromptTokens=ve==null?void 0:ve.cached_tokens),{text:(n=re.message.content)!=null?n:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&re.message.function_call?[{toolCallType:"function",toolCallId:hm(),toolName:re.message.function_call.name,args:re.message.function_call.arguments}]:(s=re.message.tool_calls)==null?void 0:s.map(We=>{var Ae;return{toolCallType:"function",toolCallId:(Ae=We.id)!=null?Ae:hm(),toolName:We.function.name,args:We.function.arguments}}),finishReason:Qg(re.finish_reason),usage:{promptTokens:(h=(u=ee.usage)==null?void 0:u.prompt_tokens)!=null?h:NaN,completionTokens:(T=(w=ee.usage)==null?void 0:w.completion_tokens)!=null?T:NaN},rawCall:{rawPrompt:pe,rawSettings:ce},rawResponse:{headers:z},request:{body:JSON.stringify(C)},response:ey(ee),warnings:F,logprobs:vb(re.logprobs),providerMetadata:Pe}}async doStream(e){var t;if((t=this.settings.simulateStreaming)!=null?t:nx(this.modelId)){let Q=await this.doGenerate(e);return{stream:new ReadableStream({start(Pe){if(Pe.enqueue({type:"response-metadata",...Q.response}),Q.text&&Pe.enqueue({type:"text-delta",textDelta:Q.text}),Q.toolCalls)for(let We of Q.toolCalls)Pe.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:We.toolCallId,toolName:We.toolName,argsTextDelta:We.args}),Pe.enqueue({type:"tool-call",...We});Pe.enqueue({type:"finish",finishReason:Q.finishReason,usage:Q.usage,logprobs:Q.logprobs,providerMetadata:Q.providerMetadata}),Pe.close()}}),rawCall:Q.rawCall,rawResponse:Q.rawResponse,warnings:Q.warnings}}let{args:r,warnings:n}=this.getArgs(e),s={...r,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:u,value:h}=await Ff({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ld(this.config.headers(),e.headers),body:s,failedResponseHandler:S_,successfulResponseHandler:f_(tx),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:w,...T}=r,C=[],F="unknown",z={promptTokens:void 0,completionTokens:void 0},ee,pe=!0,{useLegacyFunctionCalling:ce}=this.settings,re={openai:{}};return{stream:h.pipeThrough(new TransformStream({transform(Q,ve){var Pe,We,Ae,Ze,Tt,Dt,Lt,it,Gt,xr,oa,ei;if(!Q.success){F="error",ve.enqueue({type:"error",error:Q.error});return}let Pr=Q.value;if("error"in Pr){F="error",ve.enqueue({type:"error",error:Pr.error});return}if(pe&&(pe=!1,ve.enqueue({type:"response-metadata",...ey(Pr)})),Pr.usage!=null){let{prompt_tokens:Tr,completion_tokens:zn,prompt_tokens_details:kt,completion_tokens_details:Ft}=Pr.usage;z={promptTokens:Tr??void 0,completionTokens:zn??void 0},(Ft==null?void 0:Ft.reasoning_tokens)!=null&&(re.openai.reasoningTokens=Ft==null?void 0:Ft.reasoning_tokens),(Ft==null?void 0:Ft.accepted_prediction_tokens)!=null&&(re.openai.acceptedPredictionTokens=Ft==null?void 0:Ft.accepted_prediction_tokens),(Ft==null?void 0:Ft.rejected_prediction_tokens)!=null&&(re.openai.rejectedPredictionTokens=Ft==null?void 0:Ft.rejected_prediction_tokens),(kt==null?void 0:kt.cached_tokens)!=null&&(re.openai.cachedPromptTokens=kt==null?void 0:kt.cached_tokens)}let xn=Pr.choices[0];if((xn==null?void 0:xn.finish_reason)!=null&&(F=Qg(xn.finish_reason)),(xn==null?void 0:xn.delta)==null)return;let nt=xn.delta;nt.content!=null&&ve.enqueue({type:"text-delta",textDelta:nt.content});let po=vb(xn==null?void 0:xn.logprobs);po!=null&&po.length&&(ee===void 0&&(ee=[]),ee.push(...po));let Ve=ce&&nt.function_call!=null?[{type:"function",id:hm(),function:nt.function_call,index:0}]:nt.tool_calls;if(Ve!=null)for(let Tr of Ve){let zn=Tr.index;if(C[zn]==null){if(Tr.type!=="function")throw new Y_({data:Tr,message:"Expected 'function' type."});if(Tr.id==null)throw new Y_({data:Tr,message:"Expected 'id' to be a string."});if(((Pe=Tr.function)==null?void 0:Pe.name)==null)throw new Y_({data:Tr,message:"Expected 'function.name' to be a string."});C[zn]={id:Tr.id,type:"function",function:{name:Tr.function.name,arguments:(We=Tr.function.arguments)!=null?We:""},hasFinished:!1};let Ft=C[zn];((Ae=Ft.function)==null?void 0:Ae.name)!=null&&((Ze=Ft.function)==null?void 0:Ze.arguments)!=null&&(Ft.function.arguments.length>0&&ve.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Ft.id,toolName:Ft.function.name,argsTextDelta:Ft.function.arguments}),a0(Ft.function.arguments)&&(ve.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Tt=Ft.id)!=null?Tt:hm(),toolName:Ft.function.name,args:Ft.function.arguments}),Ft.hasFinished=!0));continue}let kt=C[zn];kt.hasFinished||(((Dt=Tr.function)==null?void 0:Dt.arguments)!=null&&(kt.function.arguments+=(it=(Lt=Tr.function)==null?void 0:Lt.arguments)!=null?it:""),ve.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:kt.id,toolName:kt.function.name,argsTextDelta:(Gt=Tr.function.arguments)!=null?Gt:""}),((xr=kt.function)==null?void 0:xr.name)!=null&&((oa=kt.function)==null?void 0:oa.arguments)!=null&&a0(kt.function.arguments)&&(ve.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(ei=kt.id)!=null?ei:hm(),toolName:kt.function.name,args:kt.function.arguments}),kt.hasFinished=!0))}},flush(Q){var ve,Pe;Q.enqueue({type:"finish",finishReason:F,logprobs:ee,usage:{promptTokens:(ve=z.promptTokens)!=null?ve:NaN,completionTokens:(Pe=z.completionTokens)!=null?Pe:NaN},...re!=null?{providerMetadata:re}:{}})}})),rawCall:{rawPrompt:w,rawSettings:T},rawResponse:{headers:u},request:{body:JSON.stringify(s)},warnings:n}}},_b=k.object({prompt_tokens:k.number().nullish(),completion_tokens:k.number().nullish(),prompt_tokens_details:k.object({cached_tokens:k.number().nullish()}).nullish(),completion_tokens_details:k.object({reasoning_tokens:k.number().nullish(),accepted_prediction_tokens:k.number().nullish(),rejected_prediction_tokens:k.number().nullish()}).nullish()}).nullish(),ex=k.object({id:k.string().nullish(),created:k.number().nullish(),model:k.string().nullish(),choices:k.array(k.object({message:k.object({role:k.literal("assistant").nullish(),content:k.string().nullish(),function_call:k.object({arguments:k.string(),name:k.string()}).nullish(),tool_calls:k.array(k.object({id:k.string().nullish(),type:k.literal("function"),function:k.object({name:k.string(),arguments:k.string()})})).nullish()}),index:k.number(),logprobs:k.object({content:k.array(k.object({token:k.string(),logprob:k.number(),top_logprobs:k.array(k.object({token:k.string(),logprob:k.number()}))})).nullable()}).nullish(),finish_reason:k.string().nullish()})),usage:_b}),tx=k.union([k.object({id:k.string().nullish(),created:k.number().nullish(),model:k.string().nullish(),choices:k.array(k.object({delta:k.object({role:k.enum(["assistant"]).nullish(),content:k.string().nullish(),function_call:k.object({name:k.string().optional(),arguments:k.string().optional()}).nullish(),tool_calls:k.array(k.object({index:k.number(),id:k.string().nullish(),type:k.literal("function").optional(),function:k.object({name:k.string().nullish(),arguments:k.string().nullish()})})).nullish()}).nullish(),logprobs:k.object({content:k.array(k.object({token:k.string(),logprob:k.number(),top_logprobs:k.array(k.object({token:k.string(),logprob:k.number()}))})).nullable()}).nullish(),finish_reason:k.string().nullable().optional(),index:k.number()})),usage:_b}),f0]);function ty(e){return e==="o1"||e.startsWith("o1-")||e==="o3"||e.startsWith("o3-")}function rx(e){return e.startsWith("gpt-4o-audio-preview")}function mb(e){var t,r;return ty(e)?(r=(t=gb[e])==null?void 0:t.systemMessageMode)!=null?r:"developer":"system"}function nx(e){var t,r;return ty(e)?(r=(t=gb[e])==null?void 0:t.simulateStreamingByDefault)!=null?r:!0:!1}var gb={"o1-mini":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o1-mini-2024-09-12":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o1-preview":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o1-preview-2024-09-12":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o3-mini":{systemMessageMode:"developer",simulateStreamingByDefault:!1},"o3-mini-2025-01-31":{systemMessageMode:"developer",simulateStreamingByDefault:!1}};function ax({prompt:e,inputFormat:t,user:r="user",assistant:n="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let s="";e[0].role==="system"&&(s+=`${e[0].content}

`,e=e.slice(1));for(let{role:u,content:h}of e)switch(u){case"system":throw new Cv({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{let w=h.map(T=>{switch(T.type){case"text":return T.text;case"image":throw new Bn({functionality:"images"})}}).join("");s+=`${r}:
${w}

`;break}case"assistant":{let w=h.map(T=>{switch(T.type){case"text":return T.text;case"tool-call":throw new Bn({functionality:"tool-call messages"})}}).join("");s+=`${n}:
${w}

`;break}case"tool":throw new Bn({functionality:"tool messages"});default:{let w=u;throw new Error(`Unsupported role: ${w}`)}}return s+=`${n}:
`,{prompt:s,stopSequences:[`
${r}:`]}}function hb(e){return e==null?void 0:e.tokens.map((t,r)=>({token:t,logprob:e.token_logprobs[r],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[r]).map(([n,s])=>({token:n,logprob:s})):[]}))}var ix=class{constructor(e,t,r){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:r,maxTokens:n,temperature:s,topP:u,topK:h,frequencyPenalty:w,presencePenalty:T,stopSequences:C,responseFormat:F,seed:z}){var ee;let pe=e.type,ce=[];h!=null&&ce.push({type:"unsupported-setting",setting:"topK"}),F!=null&&F.type!=="text"&&ce.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:re,stopSequences:Q}=ax({prompt:r,inputFormat:t}),ve=[...Q??[],...C??[]],Pe={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:n,temperature:s,top_p:u,frequency_penalty:w,presence_penalty:T,seed:z,prompt:re,stop:ve.length>0?ve:void 0};switch(pe){case"regular":{if((ee=e.tools)!=null&&ee.length)throw new Bn({functionality:"tools"});if(e.toolChoice)throw new Bn({functionality:"toolChoice"});return{args:Pe,warnings:ce}}case"object-json":throw new Bn({functionality:"object-json mode"});case"object-tool":throw new Bn({functionality:"object-tool mode"});default:{let We=pe;throw new Error(`Unsupported type: ${We}`)}}}async doGenerate(e){let{args:t,warnings:r}=this.getArgs(e),{responseHeaders:n,value:s}=await Ff({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ld(this.config.headers(),e.headers),body:t,failedResponseHandler:S_,successfulResponseHandler:Pv(ox),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:u,...h}=t,w=s.choices[0];return{text:w.text,usage:{promptTokens:s.usage.prompt_tokens,completionTokens:s.usage.completion_tokens},finishReason:Qg(w.finish_reason),logprobs:hb(w.logprobs),rawCall:{rawPrompt:u,rawSettings:h},rawResponse:{headers:n},response:ey(s),warnings:r,request:{body:JSON.stringify(t)}}}async doStream(e){let{args:t,warnings:r}=this.getArgs(e),n={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:s,value:u}=await Ff({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ld(this.config.headers(),e.headers),body:n,failedResponseHandler:S_,successfulResponseHandler:f_(sx),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:h,...w}=t,T="unknown",C={promptTokens:Number.NaN,completionTokens:Number.NaN},F,z=!0;return{stream:u.pipeThrough(new TransformStream({transform(ee,pe){if(!ee.success){T="error",pe.enqueue({type:"error",error:ee.error});return}let ce=ee.value;if("error"in ce){T="error",pe.enqueue({type:"error",error:ce.error});return}z&&(z=!1,pe.enqueue({type:"response-metadata",...ey(ce)})),ce.usage!=null&&(C={promptTokens:ce.usage.prompt_tokens,completionTokens:ce.usage.completion_tokens});let re=ce.choices[0];(re==null?void 0:re.finish_reason)!=null&&(T=Qg(re.finish_reason)),(re==null?void 0:re.text)!=null&&pe.enqueue({type:"text-delta",textDelta:re.text});let Q=hb(re==null?void 0:re.logprobs);Q!=null&&Q.length&&(F===void 0&&(F=[]),F.push(...Q))},flush(ee){ee.enqueue({type:"finish",finishReason:T,logprobs:F,usage:C})}})),rawCall:{rawPrompt:h,rawSettings:w},rawResponse:{headers:s},warnings:r,request:{body:JSON.stringify(n)}}}},ox=k.object({id:k.string().nullish(),created:k.number().nullish(),model:k.string().nullish(),choices:k.array(k.object({text:k.string(),finish_reason:k.string(),logprobs:k.object({tokens:k.array(k.string()),token_logprobs:k.array(k.number()),top_logprobs:k.array(k.record(k.string(),k.number())).nullable()}).nullish()})),usage:k.object({prompt_tokens:k.number(),completion_tokens:k.number()})}),sx=k.union([k.object({id:k.string().nullish(),created:k.number().nullish(),model:k.string().nullish(),choices:k.array(k.object({text:k.string(),finish_reason:k.string().nullish(),index:k.number(),logprobs:k.object({tokens:k.array(k.string()),token_logprobs:k.array(k.number()),top_logprobs:k.array(k.record(k.string(),k.number())).nullable()}).nullish()})),usage:k.object({prompt_tokens:k.number(),completion_tokens:k.number()}).nullish()}),f0]),ux=class{constructor(e,t,r){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:r}){if(e.length>this.maxEmbeddingsPerCall)throw new Mw({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let{responseHeaders:n,value:s}=await Ff({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Ld(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:S_,successfulResponseHandler:Pv(cx),abortSignal:r,fetch:this.config.fetch});return{embeddings:s.data.map(u=>u.embedding),usage:s.usage?{tokens:s.usage.prompt_tokens}:void 0,rawResponse:{headers:n}}}},cx=k.object({data:k.array(k.object({embedding:k.array(k.number())})),usage:k.object({prompt_tokens:k.number()}).nullish()}),lx={"dall-e-3":1,"dall-e-2":10},fx=class{constructor(e,t,r){this.modelId=e,this.settings=t,this.config=r,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:lx[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:r,aspectRatio:n,seed:s,providerOptions:u,headers:h,abortSignal:w}){var T,C,F,z;let ee=[];n!=null&&ee.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),s!=null&&ee.push({type:"unsupported-setting",setting:"seed"});let pe=(F=(C=(T=this.config._internal)==null?void 0:T.currentDate)==null?void 0:C.call(T))!=null?F:new Date,{value:ce,responseHeaders:re}=await Ff({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Ld(this.config.headers(),h),body:{model:this.modelId,prompt:e,n:t,size:r,...(z=u.openai)!=null?z:{},response_format:"b64_json"},failedResponseHandler:S_,successfulResponseHandler:Pv(dx),abortSignal:w,fetch:this.config.fetch});return{images:ce.data.map(Q=>Q.b64_json),warnings:ee,response:{timestamp:pe,modelId:this.modelId,headers:re}}}},dx=k.object({data:k.array(k.object({b64_json:k.string()}))});function d0(e={}){var t,r,n;let s=(t=Hg(e.baseURL))!=null?t:"https://api.openai.com/v1",u=(r=e.compatibility)!=null?r:"compatible",h=(n=e.name)!=null?n:"openai",w=()=>({Authorization:`Bearer ${Bg({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),T=(ce,re={})=>new QC(ce,re,{provider:`${h}.chat`,url:({path:Q})=>`${s}${Q}`,headers:w,compatibility:u,fetch:e.fetch}),C=(ce,re={})=>new ix(ce,re,{provider:`${h}.completion`,url:({path:Q})=>`${s}${Q}`,headers:w,compatibility:u,fetch:e.fetch}),F=(ce,re={})=>new ux(ce,re,{provider:`${h}.embedding`,url:({path:Q})=>`${s}${Q}`,headers:w,fetch:e.fetch}),z=(ce,re={})=>new fx(ce,re,{provider:`${h}.image`,url:({path:Q})=>`${s}${Q}`,headers:w,fetch:e.fetch}),ee=(ce,re)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return ce==="gpt-3.5-turbo-instruct"?C(ce,re):T(ce,re)},pe=function(ce,re){return ee(ce,re)};return pe.languageModel=ee,pe.chat=T,pe.completion=C,pe.embedding=F,pe.textEmbedding=F,pe.textEmbeddingModel=F,pe.image=z,pe.imageModel=z,pe}var iM=d0({compatibility:"strict"});var Yo=require("vscode"),px=["rate limit exceeded","net::err","check your network connection","check your firewall","request failed","400 bad request","server error","error on conversation request","response contained no choices","response got filtered"];function vx({role:e,content:t}){switch(e){case"system":return Yo.LanguageModelChatMessage.User(t);case"user":let r=t.map(u=>{switch(u.type){case"text":return new Yo.LanguageModelTextPart(u.text);case"image":throw new Error("Image content not supported");case"file":throw new Error("File content not supported")}});return Yo.LanguageModelChatMessage.User(r);case"tool":let n=t.map(u=>{switch(u.type){case"tool-result":let h=typeof u.result=="string"?u.result:JSON.stringify(u.result);return new Yo.LanguageModelToolResultPart(u.toolCallId,[new Yo.LanguageModelTextPart(h)])}});return Yo.LanguageModelChatMessage.User(n);case"assistant":let s=t.map(u=>{switch(u.type){case"text":return new Yo.LanguageModelTextPart(u.text);case"tool-call":return new Yo.LanguageModelToolCallPart(u.toolCallId,u.toolName,u.args)}});return Yo.LanguageModelChatMessage.Assistant(s)}}function mx(e){switch(e.type){case"function":return{name:e.name,description:e.description,inputSchema:e.parameters};case"provider-defined":throw new Error("Provider-defined tools not supported")}}function hx(e){let t=String(e.message).toLowerCase();for(let r of px)if(t.includes(r))return!0;return!1}var p0=class{specificationVersion="v1";defaultObjectGenerationMode="json";provider="copilot";supportsImageUrls=!1;constructor(t,r,n){this.modelId=t,this.settings=r,this.config=n}async doGenerate(t){throw new Error("Not implemented")}async doStream(t){var ee;let[r]=await Yo.lm.selectChatModels({family:this.modelId,vendor:"copilot"});if(!r)throw new Error("Model not found: "+this.modelId);let{prompt:n,abortSignal:s,mode:u}=t,h=s.context;if(u.type!=="regular")throw new Error("Request mode not supported: "+u.type);let w=n.map(vx),T=(ee=u.tools)==null?void 0:ee.map(mx),C=n.slice(-1)[0],F=!1;return C.role=="tool"&&(C.content[0].result=="stop"?F=!0:(w.push(Yo.LanguageModelChatMessage.Assistant("Should I process the last tool result now?")),w.push(Yo.LanguageModelChatMessage.User("Yes")))),{stream:new ReadableStream({async start(pe){let ce=0;if(F){pe.enqueue({type:"text-delta",textDelta:`

`}),pe.close();return}for(;;){try{let re=await r.sendRequest(w,{tools:T,modelOptions:{temperature:t.temperature,max_tokens:t.maxTokens}},h.token);for await(let Q of re.stream){if(h.token.isCancellationRequested)break;Q instanceof Yo.LanguageModelTextPart?pe.enqueue({type:"text-delta",textDelta:Q.value}):Q instanceof Yo.LanguageModelToolCallPart?pe.enqueue({type:"tool-call",toolCallType:"function",toolCallId:Q.callId,toolName:Q.name,args:JSON.stringify(Q.input)}):pe.error(new Error("Unknown content format"))}pe.close();return}catch(re){if(!hx(re)||++ce>5){pe.error(re);return}pe.enqueue({type:"error",error:{event:"retry",count:ce,message:re.message||String(re),cause:re}}),String(re.message).toLowerCase().includes("rate limit exceeded")&&await yb(30)}await yb(5*ce)}}}),rawCall:{rawPrompt:"",rawSettings:{}}}}};function Sb(e){let t=(n,s={})=>new p0(n,s,{provider:"copilot"}),r=function(n,s={}){return t(n,s)};return r.chat=t,r}async function yb(e){return new Promise(t=>setTimeout(t,e*1e3))}var _x={anthropic:l0,openai:d0,copilot:Sb},wb={};function v0({id:e,provider:t,apiKey:r}){let n=wb[t];if(!n){let s=_x[t];if(!s)throw new Error("Unknown provider: "+t);n=s({apiKey:r}),wb[t]=n}return n(e,{cacheControl:!0})}var Eb=function(e,t,r,n){var s;t[0]=0;for(var u=1;u<t.length;u++){var h=t[u++],w=t[u]?(t[0]|=h?1:2,r[t[u++]]):t[++u];h===3?n[0]=w:h===4?n[1]=Object.assign(n[1]||{},w):h===5?(n[1]=n[1]||{})[t[++u]]=w:h===6?n[1][t[++u]]+=w+"":h?(s=e.apply(w,Eb(e,w,r,["",null])),n.push(s),w[0]?t[0]|=2:(t[u-2]=0,t[u]=s)):n.push(w)}return n},bb=new Map;function Tb(e){var t=bb.get(this);return t||(t=new Map,bb.set(this,t)),(t=Eb(this,t.get(e)||(t.set(e,t=function(r){for(var n,s,u=1,h="",w="",T=[0],C=function(ee){u===1&&(ee||(h=h.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?T.push(0,ee,h):u===3&&(ee||h)?(T.push(3,ee,h),u=2):u===2&&h==="..."&&ee?T.push(4,ee,0):u===2&&h&&!ee?T.push(5,0,!0,h):u>=5&&((h||!ee&&u===5)&&(T.push(u,0,h,s),u=6),ee&&(T.push(u,ee,0,s),u=6)),h=""},F=0;F<r.length;F++){F&&(u===1&&C(),C(F));for(var z=0;z<r[F].length;z++)n=r[F][z],u===1?n==="<"?(C(),T=[T],u=3):h+=n:u===4?h==="--"&&n===">"?(u=1,h=""):h=n+h[0]:w?n===w?w="":h+=n:n==='"'||n==="'"?w=n:n===">"?(C(),u=1):u&&(n==="="?(u=5,s=h,h=""):n==="/"&&(u<5||r[F][z+1]===">")?(C(),u===3&&(T=T[0]),u=T,(T=T[0]).push(2,0,u),u=0):n===" "||n==="	"||n===`
`||n==="\r"?(C(),u=2):h+=n),u===3&&h==="!--"&&(u=4,T=T[0])}return C(),T}(e)),t),arguments,[])).length>1?t:t[0]}function m0(e){if(Array.isArray(e))return e.map(m0);if(typeof e!="string")return e;let t=e.split(`
`),r=100;if(t.forEach((n,s)=>{let u=n.match(/^(\s*)\S/);s&&u&&(r=Math.min(r,u[1].length))}),r<100)for(let n=1;n<t.length;n++)t[n]=t[n].slice(r);return t.join(`
`)}function gx(e,t,...r){return{type:e,props:t,children:m0(r)}}var yx=Tb.bind(gx);function w_(...e){return m0(yx(...e))}function sh(e,t=""){if(Array.isArray(e))return e.reduce((r,n)=>{let s=sh(n,t);return/^[\n]/.test(s)&&/[\n]$/.test(r)?r+s.slice(1):/^[\s\n]/.test(s)||/[\s\n]$/.test(r)?r+s:r&&s?r+" "+s:r||s||""},"");if((e==null?void 0:e.type)=="markdown"){let{props:r}=e;return r.text}if((e==null?void 0:e.type)=="code"){let{props:r}=e;return"\n```"+(r.type||"")+`
`+r.text+"\n```\n"}if(typeof(e==null?void 0:e.type)=="string"){let{type:r,children:n}=e;return sh([`
`+t+"<"+r+`>
`,sh(n,t+"  "),`
`+t+"</"+r+`>
`])}if(typeof(e==null?void 0:e.type)=="function"){let{type:r,props:n,children:s}=e;return sh(r(n,s),t)}return String(e??"").split(`
`).map(r=>t+r).join(`
`)}var h0=[{provider:"anthropic",family:"claude-3.5-sonnet",id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet",cacheControl:!0},{provider:"openai",family:"gpt-4o",id:"gpt-4o-2024-08-06",name:"GPT 4o"},{provider:"openrouter",family:"claude-3.5-sonnet",id:"anthropic/claude-3.5-sonnet:beta",name:"Claude 3.5 Sonnet",cacheControl:!0},{provider:"openrouter",family:"gpt-4o",id:"openai/gpt-4o-2024-08-06",name:"GPT 4o"}];var Ib=[{id:"anthropic",name:"Anthropic",envKeyName:"ANTHROPIC_API_KEY",website:"https://console.anthropic.com"},{id:"openai",name:"OpenAI",envKeyName:"OPENAI_API_KEY",website:"https://platform.openai.com"},{id:"openrouter",name:"Open Router",envKeyName:"OPENROUTER_API_KEY",website:"https://openrouter.ai"}];var Db=Symbol("Let zodToJsonSchema decide on which parser to use"),Nb={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Cb=e=>typeof e=="string"?{...Nb,name:e}:{...Nb,...e};var xb=e=>{let t=Cb(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([n,s])=>[s._def,{def:s._def,path:[...t.basePath,t.definitionPath,n],jsonSchema:void 0}]))}};function _0(e,t,r,n){n!=null&&n.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function nn(e,t,r,n,s){e[t]=r,_0(e,t,n,s)}function Pb(){return{}}function Ab(e,t){var n,s,u;let r={type:"array"};return(n=e.type)!=null&&n._def&&((u=(s=e.type)==null?void 0:s._def)==null?void 0:u.typeName)!==Ge.ZodAny&&(r.items=dr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&nn(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&nn(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(nn(r,"minItems",e.exactLength.value,e.exactLength.message,t),nn(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}function Rb(e,t){let r={type:"integer",format:"int64"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"min":t.target==="jsonSchema7"?n.inclusive?nn(r,"minimum",n.value,n.message,t):nn(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),nn(r,"minimum",n.value,n.message,t));break;case"max":t.target==="jsonSchema7"?n.inclusive?nn(r,"maximum",n.value,n.message,t):nn(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),nn(r,"maximum",n.value,n.message,t));break;case"multipleOf":nn(r,"multipleOf",n.value,n.message,t);break}return r}function Ob(){return{type:"boolean"}}function ry(e,t){return dr(e.type._def,t)}var kb=(e,t)=>dr(e.innerType._def,t);function g0(e,t,r){let n=r??t.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((s,u)=>g0(e,t,s))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Sx(e,t)}}var Sx=(e,t)=>{let r={type:"integer",format:"unix-time"};if(t.target==="openApi3")return r;for(let n of e.checks)switch(n.kind){case"min":nn(r,"minimum",n.value,n.message,t);break;case"max":nn(r,"maximum",n.value,n.message,t);break}return r};function Mb(e,t){return{...dr(e.innerType._def,t),default:e.defaultValue()}}function Lb(e,t){return t.effectStrategy==="input"?dr(e.schema._def,t):{}}function Fb(e){return{type:"string",enum:Array.from(e.values)}}var wx=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function Ub(e,t){let r=[dr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),dr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(u=>!!u),n=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,s=[];return r.forEach(u=>{if(wx(u))s.push(...u.allOf),u.unevaluatedProperties===void 0&&(n=void 0);else{let h=u;if("additionalProperties"in u&&u.additionalProperties===!1){let{additionalProperties:w,...T}=u;h=T}else n=void 0;s.push(h)}}),s.length?{allOf:s,...n}:void 0}function jb(e,t){let r=typeof e.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[e.value]}:{type:r==="bigint"?"integer":r,const:e.value}}var y0,Op={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(y0===void 0&&(y0=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),y0),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function ny(e,t){let r={type:"string"};if(e.checks)for(let n of e.checks)switch(n.kind){case"min":nn(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,t);break;case"max":nn(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"email":switch(t.emailStrategy){case"format:email":kp(r,"email",n.message,t);break;case"format:idn-email":kp(r,"idn-email",n.message,t);break;case"pattern:zod":Ec(r,Op.email,n.message,t);break}break;case"url":kp(r,"uri",n.message,t);break;case"uuid":kp(r,"uuid",n.message,t);break;case"regex":Ec(r,n.regex,n.message,t);break;case"cuid":Ec(r,Op.cuid,n.message,t);break;case"cuid2":Ec(r,Op.cuid2,n.message,t);break;case"startsWith":Ec(r,RegExp(`^${S0(n.value,t)}`),n.message,t);break;case"endsWith":Ec(r,RegExp(`${S0(n.value,t)}$`),n.message,t);break;case"datetime":kp(r,"date-time",n.message,t);break;case"date":kp(r,"date",n.message,t);break;case"time":kp(r,"time",n.message,t);break;case"duration":kp(r,"duration",n.message,t);break;case"length":nn(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,t),nn(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"includes":{Ec(r,RegExp(S0(n.value,t)),n.message,t);break}case"ip":{n.version!=="v6"&&kp(r,"ipv4",n.message,t),n.version!=="v4"&&kp(r,"ipv6",n.message,t);break}case"base64url":Ec(r,Op.base64url,n.message,t);break;case"jwt":Ec(r,Op.jwt,n.message,t);break;case"cidr":{n.version!=="v6"&&Ec(r,Op.ipv4Cidr,n.message,t),n.version!=="v4"&&Ec(r,Op.ipv6Cidr,n.message,t);break}case"emoji":Ec(r,Op.emoji(),n.message,t);break;case"ulid":{Ec(r,Op.ulid,n.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{kp(r,"binary",n.message,t);break}case"contentEncoding:base64":{nn(r,"contentEncoding","base64",n.message,t);break}case"pattern:zod":{Ec(r,Op.base64,n.message,t);break}}break}case"nanoid":Ec(r,Op.nanoid,n.message,t);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function S0(e,t){return t.patternStrategy==="escape"?Ex(e):e}var bx=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Ex(e){let t="";for(let r=0;r<e.length;r++)bx.has(e[r])||(t+="\\"),t+=e[r];return t}function kp(e,t,r,n){var s;e.format||(s=e.anyOf)!=null&&s.some(u=>u.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&n.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):nn(e,"format",t,r,n)}function Ec(e,t,r,n){var s;e.pattern||(s=e.allOf)!=null&&s.some(u=>u.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&n.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:Yb(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):nn(e,"pattern",Yb(t,n),r,n)}function Yb(e,t){var T;if(!t.applyRegexFlags||!e.flags)return e.source;let r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=r.i?e.source.toLowerCase():e.source,s="",u=!1,h=!1,w=!1;for(let C=0;C<n.length;C++){if(u){s+=n[C],u=!1;continue}if(r.i){if(h){if(n[C].match(/[a-z]/)){w?(s+=n[C],s+=`${n[C-2]}-${n[C]}`.toUpperCase(),w=!1):n[C+1]==="-"&&((T=n[C+2])!=null&&T.match(/[a-z]/))?(s+=n[C],w=!0):s+=`${n[C]}${n[C].toUpperCase()}`;continue}}else if(n[C].match(/[a-z]/)){s+=`[${n[C]}${n[C].toUpperCase()}]`;continue}}if(r.m){if(n[C]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(n[C]==="$"){s+=`($|(?=[\r
]))`;continue}}if(r.s&&n[C]==="."){s+=h?`${n[C]}\r
`:`[${n[C]}\r
]`;continue}s+=n[C],n[C]==="\\"?u=!0:h&&n[C]==="]"?h=!1:!h&&n[C]==="["&&(h=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return s}function ay(e,t){var n,s,u,h,w,T;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((n=e.keyType)==null?void 0:n._def.typeName)===Ge.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((C,F)=>({...C,[F]:dr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",F]})??{}}),{}),additionalProperties:!1};let r={type:"object",additionalProperties:dr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??{}};if(t.target==="openApi3")return r;if(((s=e.keyType)==null?void 0:s._def.typeName)===Ge.ZodString&&((u=e.keyType._def.checks)!=null&&u.length)){let{type:C,...F}=ny(e.keyType._def,t);return{...r,propertyNames:F}}else{if(((h=e.keyType)==null?void 0:h._def.typeName)===Ge.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(((w=e.keyType)==null?void 0:w._def.typeName)===Ge.ZodBranded&&e.keyType._def.type._def.typeName===Ge.ZodString&&((T=e.keyType._def.type._def.checks)!=null&&T.length)){let{type:C,...F}=ry(e.keyType._def,t);return{...r,propertyNames:F}}}return r}function $b(e,t){if(t.mapStrategy==="record")return ay(e,t);let r=dr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},n=dr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function qb(e){let t=e.values,n=Object.keys(e.values).filter(u=>typeof t[t[u]]!="number").map(u=>t[u]),s=Array.from(new Set(n.map(u=>typeof u)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:n}}function Bb(){return{not:{}}}function zb(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var K_={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Hb(e,t){if(t.target==="openApi3")return Gb(e,t);let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(n=>n._def.typeName in K_&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((s,u)=>{let h=K_[u._def.typeName];return h&&!s.includes(h)?[...s,h]:s},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((s,u)=>{let h=typeof u._def.value;switch(h){case"string":case"number":case"boolean":return[...s,h];case"bigint":return[...s,"integer"];case"object":if(u._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(n.length===r.length){let s=n.filter((u,h,w)=>w.indexOf(u)===h);return{type:s.length>1?s:s[0],enum:r.reduce((u,h)=>u.includes(h._def.value)?u:[...u,h._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,s)=>[...n,...s._def.values.filter(u=>!n.includes(u))],[])};return Gb(e,t)}var Gb=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((n,s)=>dr(n._def,{...t,currentPath:[...t.currentPath,"anyOf",`${s}`]})).filter(n=>!!n&&(!t.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function Vb(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:K_[e.innerType._def.typeName],nullable:!0}:{type:[K_[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){let n=dr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let r=dr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function Kb(e,t){let r={type:"number"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"int":r.type="integer",_0(r,"type",n.message,t);break;case"min":t.target==="jsonSchema7"?n.inclusive?nn(r,"minimum",n.value,n.message,t):nn(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),nn(r,"minimum",n.value,n.message,t));break;case"max":t.target==="jsonSchema7"?n.inclusive?nn(r,"maximum",n.value,n.message,t):nn(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),nn(r,"maximum",n.value,n.message,t));break;case"multipleOf":nn(r,"multipleOf",n.value,n.message,t);break}return r}function Tx(e,t){return t.removeAdditionalStrategy==="strict"?e.catchall._def.typeName==="ZodNever"?e.unknownKeys!=="strict":dr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0:e.catchall._def.typeName==="ZodNever"?e.unknownKeys==="passthrough":dr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0}function Wb(e,t){let r=t.target==="openAi",n={type:"object",...Object.entries(e.shape()).reduce((s,[u,h])=>{if(h===void 0||h._def===void 0)return s;let w=h.isOptional();w&&r&&(h instanceof Sl&&(h=h._def.innerType),h.isNullable()||(h=h.nullable()),w=!1);let T=dr(h._def,{...t,currentPath:[...t.currentPath,"properties",u],propertyPath:[...t.currentPath,"properties",u]});return T===void 0?s:{properties:{...s.properties,[u]:T},required:w?s.required:[...s.required,u]}},{properties:{},required:[]}),additionalProperties:Tx(e,t)};return n.required.length||delete n.required,n}var Jb=(e,t)=>{var n;if(t.currentPath.toString()===((n=t.propertyPath)==null?void 0:n.toString()))return dr(e.innerType._def,t);let r=dr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}};var Zb=(e,t)=>{if(t.pipeStrategy==="input")return dr(e.in._def,t);if(t.pipeStrategy==="output")return dr(e.out._def,t);let r=dr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),n=dr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(s=>s!==void 0)}};function Xb(e,t){return dr(e.type._def,t)}function Qb(e,t){let n={type:"array",uniqueItems:!0,items:dr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&nn(n,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&nn(n,"maxItems",e.maxSize.value,e.maxSize.message,t),n}function eE(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,n)=>dr(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:dr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,n)=>dr(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function tE(){return{not:{}}}function rE(){return{}}var nE=(e,t)=>dr(e.innerType._def,t);function dr(e,t,r=!1){var h;let n=t.seen.get(e);if(t.override){let w=(h=t.override)==null?void 0:h.call(t,e,t,n,r);if(w!==Db)return w}if(n&&!r){let w=Ix(n,t);if(w!==void 0)return w}let s={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,s);let u=Dx(e,e.typeName,t);return u&&Cx(e,t,u),s.jsonSchema=u,u}var Ix=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Nx(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,n)=>t.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},Nx=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},Dx=(e,t,r)=>{switch(t){case Ge.ZodString:return ny(e,r);case Ge.ZodNumber:return Kb(e,r);case Ge.ZodObject:return Wb(e,r);case Ge.ZodBigInt:return Rb(e,r);case Ge.ZodBoolean:return Ob();case Ge.ZodDate:return g0(e,r);case Ge.ZodUndefined:return tE();case Ge.ZodNull:return zb(r);case Ge.ZodArray:return Ab(e,r);case Ge.ZodUnion:case Ge.ZodDiscriminatedUnion:return Hb(e,r);case Ge.ZodIntersection:return Ub(e,r);case Ge.ZodTuple:return eE(e,r);case Ge.ZodRecord:return ay(e,r);case Ge.ZodLiteral:return jb(e,r);case Ge.ZodEnum:return Fb(e);case Ge.ZodNativeEnum:return qb(e);case Ge.ZodNullable:return Vb(e,r);case Ge.ZodOptional:return Jb(e,r);case Ge.ZodMap:return $b(e,r);case Ge.ZodSet:return Qb(e,r);case Ge.ZodLazy:return dr(e.getter()._def,r);case Ge.ZodPromise:return Xb(e,r);case Ge.ZodNaN:case Ge.ZodNever:return Bb();case Ge.ZodEffects:return Lb(e,r);case Ge.ZodAny:return Pb();case Ge.ZodUnknown:return rE();case Ge.ZodDefault:return Mb(e,r);case Ge.ZodBranded:return ry(e,r);case Ge.ZodReadonly:return nE(e,r);case Ge.ZodCatch:return kb(e,r);case Ge.ZodPipeline:return Zb(e,r);case Ge.ZodFunction:case Ge.ZodVoid:case Ge.ZodSymbol:return;default:return(n=>{})(t)}},Cx=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r);var aE=(e,t)=>{let r=xb(t),n=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((T,[C,F])=>({...T,[C]:dr(F._def,{...r,currentPath:[...r.basePath,r.definitionPath,C]},!0)??{}}),{}):void 0,s=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,u=dr(e._def,s===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,s]},!1)??{},h=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;h!==void 0&&(u.title=h);let w=s===void 0?n?{...u,[r.definitionPath]:n}:u:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,s].join("/"),[r.definitionPath]:{...n,[s]:u}};return r.target==="jsonSchema7"?w.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(w.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in w||"oneOf"in w||"allOf"in w||"type"in w&&Array.isArray(w.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),w};var iE=aE;var W_={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},J_={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Z_={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},X_={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},Q_={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},xx=[W_,J_,Z_,X_,Q_],r2={[W_.code]:W_,[J_.code]:J_,[Z_.code]:Z_,[X_.code]:X_,[Q_.code]:Q_},n2={[W_.name]:W_.code,[J_.name]:J_.code,[Z_.name]:Z_.code,[X_.name]:X_.code,[Q_.name]:Q_.code},a2=xx.map(e=>e.code);function Px(e){let t=["ROOT"],r=-1,n=null;function s(T,C,F){switch(T){case'"':{r=C,t.pop(),t.push(F),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=C,n=C,t.pop(),t.push(F),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(F),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=C,t.pop(),t.push(F),t.push("INSIDE_NUMBER");break}case"{":{r=C,t.pop(),t.push(F),t.push("INSIDE_OBJECT_START");break}case"[":{r=C,t.pop(),t.push(F),t.push("INSIDE_ARRAY_START");break}}}function u(T,C){switch(T){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=C,t.pop();break}}}function h(T,C){switch(T){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=C,t.pop();break}}}for(let T=0;T<e.length;T++){let C=e[T];switch(t[t.length-1]){case"ROOT":s(C,T,"FINISH");break;case"INSIDE_OBJECT_START":{switch(C){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{r=T,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(C){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(C){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(C){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{s(C,T,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{u(C,T);break}case"INSIDE_STRING":{switch(C){case'"':{t.pop(),r=T;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:r=T}break}case"INSIDE_ARRAY_START":{switch(C){case"]":{r=T,t.pop();break}default:{r=T,s(C,T,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(C){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=T,t.pop();break}default:{r=T;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{s(C,T,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),r=T;break}case"INSIDE_NUMBER":{switch(C){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=T;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&h(C,T),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&u(C,T);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&u(C,T);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&h(C,T);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{let z=e.substring(n,T+1);!"false".startsWith(z)&&!"true".startsWith(z)&&!"null".startsWith(z)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?u(C,T):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&h(C,T)):r=T;break}}}let w=e.slice(0,r+1);for(let T=t.length-1;T>=0;T--)switch(t[T]){case"INSIDE_STRING":{w+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{w+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{w+="]";break}case"INSIDE_LITERAL":{let F=e.substring(n,e.length);"true".startsWith(F)?w+="true".slice(F.length):"false".startsWith(F)?w+="false".slice(F.length):"null".startsWith(F)&&(w+="null".slice(F.length))}}return w}function oE(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=xv({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=xv({text:Px(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var eg={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},tg={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},rg={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},ng={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},ag={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},ig={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},og={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},sg={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},ug={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},cg={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},lg={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},fg={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},sE=[eg,tg,rg,ng,ag,ig,og,sg,ug,cg,lg,fg],o2={[eg.code]:eg,[tg.code]:tg,[rg.code]:rg,[ng.code]:ng,[ag.code]:ag,[ig.code]:ig,[og.code]:og,[sg.code]:sg,[ug.code]:ug,[cg.code]:cg,[lg.code]:lg,[fg.code]:fg},s2={[eg.name]:eg.code,[tg.name]:tg.code,[rg.name]:rg.code,[ng.name]:ng.code,[ag.name]:ag.code,[ig.name]:ig.code,[og.name]:og.code,[sg.name]:sg.code,[ug.name]:ug.code,[cg.name]:cg.code,[lg.name]:lg.code,[fg.name]:fg.code},u2=sE.map(e=>e.code);function Tc(e,t){let r=sE.find(n=>n.name===e);if(!r)throw new Error(`Invalid stream part type: ${e}`);return`${r.code}:${JSON.stringify(t)}
`}function Ax(e){return Rx(iE(e,{$refStrategy:"none",target:"jsonSchema7"}),{validate:t=>{let r=e.safeParse(t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}var w0=Symbol.for("vercel.ai.schema");function Rx(e,{validate:t}={}){return{[w0]:!0,_type:void 0,[q_]:!0,jsonSchema:e,validate:t}}function Ox(e){return typeof e=="object"&&e!==null&&w0 in e&&e[w0]===!0&&"jsonSchema"in e&&"validate"in e}function $h(e){return Ox(e)?e:Ax(e)}var uE=typeof globalThis=="object"?globalThis:global;var wm="1.9.0";var cE=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function kx(e){var t=new Set([e]),r=new Set,n=e.match(cE);if(!n)return function(){return!1};var s={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(s.prerelease!=null)return function(T){return T===e};function u(w){return r.add(w),!1}function h(w){return t.add(w),!0}return function(T){if(t.has(T))return!0;if(r.has(T))return!1;var C=T.match(cE);if(!C)return u(T);var F={major:+C[1],minor:+C[2],patch:+C[3],prerelease:C[4]};return F.prerelease!=null||s.major!==F.major?u(T):s.major===0?s.minor===F.minor&&s.patch<=F.patch?h(T):u(T):s.minor<=F.minor?h(T):u(T)}}var lE=kx(wm);var Mx=wm.split(".")[0],dg=Symbol.for("opentelemetry.js.api."+Mx),pg=uE;function b_(e,t,r,n){var s;n===void 0&&(n=!1);var u=pg[dg]=(s=pg[dg])!==null&&s!==void 0?s:{version:wm};if(!n&&u[e]){var h=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(h.stack||h.message),!1}if(u.version!==wm){var h=new Error("@opentelemetry/api: Registration of version v"+u.version+" for "+e+" does not match previously registered API v"+wm);return r.error(h.stack||h.message),!1}return u[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+wm+"."),!0}function bm(e){var t,r,n=(t=pg[dg])===null||t===void 0?void 0:t.version;if(!(!n||!lE(n)))return(r=pg[dg])===null||r===void 0?void 0:r[e]}function E_(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+wm+".");var r=pg[dg];r&&delete r[e]}var Lx=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,u=[],h;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)u.push(s.value)}catch(w){h={error:w}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(h)throw h.error}}return u},Fx=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,u;n<s;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return e.concat(u||Array.prototype.slice.call(t))},fE=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return vg("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return vg("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return vg("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return vg("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return vg("verbose",this._namespace,t)},e}();function vg(e,t,r){var n=bm("diag");if(n)return r.unshift(t),n[e].apply(n,Fx([],Lx(r),!1))}var Ic;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Ic||(Ic={}));function dE(e,t){e<Ic.NONE?e=Ic.NONE:e>Ic.ALL&&(e=Ic.ALL),t=t||{};function r(n,s){var u=t[n];return typeof u=="function"&&e>=s?u.bind(t):function(){}}return{error:r("error",Ic.ERROR),warn:r("warn",Ic.WARN),info:r("info",Ic.INFO),debug:r("debug",Ic.DEBUG),verbose:r("verbose",Ic.VERBOSE)}}var Ux=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,u=[],h;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)u.push(s.value)}catch(w){h={error:w}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(h)throw h.error}}return u},jx=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,u;n<s;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return e.concat(u||Array.prototype.slice.call(t))},Yx="diag",T_=function(){function e(){function t(s){return function(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];var w=bm("diag");if(w)return w[s].apply(w,jx([],Ux(u),!1))}}var r=this,n=function(s,u){var h,w,T;if(u===void 0&&(u={logLevel:Ic.INFO}),s===r){var C=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((h=C.stack)!==null&&h!==void 0?h:C.message),!1}typeof u=="number"&&(u={logLevel:u});var F=bm("diag"),z=dE((w=u.logLevel)!==null&&w!==void 0?w:Ic.INFO,s);if(F&&!u.suppressOverrideMessage){var ee=(T=new Error().stack)!==null&&T!==void 0?T:"<failed to generate stacktrace>";F.warn("Current logger will be overwritten from "+ee),z.warn("Current logger will overwrite one already registered from "+ee)}return b_("diag",z,r,!0)};r.setLogger=n,r.disable=function(){E_(Yx,r)},r.createComponentLogger=function(s){return new fE(s)},r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function pE(e){return Symbol.for(e)}var $x=function(){function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,s){var u=new e(r._currentContext);return u._currentContext.set(n,s),u},r.deleteValue=function(n){var s=new e(r._currentContext);return s._currentContext.delete(n),s}}return e}(),vE=new $x;var qx=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,u=[],h;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)u.push(s.value)}catch(w){h={error:w}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(h)throw h.error}}return u},Bx=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,u;n<s;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return e.concat(u||Array.prototype.slice.call(t))},mE=function(){function e(){}return e.prototype.active=function(){return vE},e.prototype.with=function(t,r,n){for(var s=[],u=3;u<arguments.length;u++)s[u-3]=arguments[u];return r.call.apply(r,Bx([n],qx(s),!1))},e.prototype.bind=function(t,r){return r},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}();var zx=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,u=[],h;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)u.push(s.value)}catch(w){h={error:w}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(h)throw h.error}}return u},Gx=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,u;n<s;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return e.concat(u||Array.prototype.slice.call(t))},b0="context",Hx=new mE,iy=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return b_(b0,t,T_.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,r,n){for(var s,u=[],h=3;h<arguments.length;h++)u[h-3]=arguments[h];return(s=this._getContextManager()).with.apply(s,Gx([t,r,n],zx(u),!1))},e.prototype.bind=function(t,r){return this._getContextManager().bind(t,r)},e.prototype._getContextManager=function(){return bm(b0)||Hx},e.prototype.disable=function(){this._getContextManager().disable(),E_(b0,T_.instance())},e}();var oy;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(oy||(oy={}));var E0="0000000000000000",T0="00000000000000000000000000000000",hE={traceId:T0,spanId:E0,traceFlags:oy.NONE};var uh=function(){function e(t){t===void 0&&(t=hE),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,r){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,r){},e}();var I0=pE("OpenTelemetry Context Key SPAN");function sy(e){return e.getValue(I0)||void 0}function _E(){return sy(iy.getInstance().active())}function mg(e,t){return e.setValue(I0,t)}function gE(e){return e.deleteValue(I0)}function yE(e,t){return mg(e,new uh(t))}function uy(e){var t;return(t=sy(e))===null||t===void 0?void 0:t.spanContext()}var Vx=/^([0-9a-f]{32})$/i,Kx=/^[0-9a-f]{16}$/i;function Wx(e){return Vx.test(e)&&e!==T0}function Jx(e){return Kx.test(e)&&e!==E0}function cy(e){return Wx(e.traceId)&&Jx(e.spanId)}function SE(e){return new uh(e)}var N0=iy.getInstance(),ly=function(){function e(){}return e.prototype.startSpan=function(t,r,n){n===void 0&&(n=N0.active());var s=!!(r!=null&&r.root);if(s)return new uh;var u=n&&uy(n);return Zx(u)&&cy(u)?new uh(u):new uh},e.prototype.startActiveSpan=function(t,r,n,s){var u,h,w;if(!(arguments.length<2)){arguments.length===2?w=r:arguments.length===3?(u=r,w=n):(u=r,h=n,w=s);var T=h??N0.active(),C=this.startSpan(t,u,T),F=mg(T,C);return N0.with(F,w,void 0,C)}},e}();function Zx(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var Xx=new ly,wE=function(){function e(t,r,n,s){this._provider=t,this.name=r,this.version=n,this.options=s}return e.prototype.startSpan=function(t,r,n){return this._getTracer().startSpan(t,r,n)},e.prototype.startActiveSpan=function(t,r,n,s){var u=this._getTracer();return Reflect.apply(u.startActiveSpan,u,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Xx},e}();var bE=function(){function e(){}return e.prototype.getTracer=function(t,r,n){return new ly},e}();var Qx=new bE,D0=function(){function e(){}return e.prototype.getTracer=function(t,r,n){var s;return(s=this.getDelegateTracer(t,r,n))!==null&&s!==void 0?s:new wE(this,t,r,n)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:Qx},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,r,n){var s;return(s=this._delegate)===null||s===void 0?void 0:s.getTracer(t,r,n)},e}();var I_;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(I_||(I_={}));var C0="trace",EE=function(){function e(){this._proxyTracerProvider=new D0,this.wrapSpanContext=SE,this.isSpanContextValid=cy,this.deleteSpan=gE,this.getSpan=sy,this.getActiveSpan=_E,this.getSpanContext=uy,this.setSpan=mg,this.setSpanContext=yE}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var r=b_(C0,this._proxyTracerProvider,T_.instance());return r&&this._proxyTracerProvider.setDelegate(t),r},e.prototype.getTracerProvider=function(){return bm(C0)||this._proxyTracerProvider},e.prototype.getTracer=function(t,r){return this.getTracerProvider().getTracer(t,r)},e.prototype.disable=function(){E_(C0,T_.instance()),this._proxyTracerProvider=new D0},e}();var x0=EE.getInstance();var eP=Object.defineProperty,M0=(e,t)=>{for(var r in t)eP(e,r,{get:t[r],enumerable:!0})};function dy(e,{contentType:t,dataStreamVersion:r}){let n=new Headers(e??{});return n.has("Content-Type")||n.set("Content-Type",t),r!==void 0&&n.set("X-Vercel-AI-Data-Stream",r),n}function TE(e,{contentType:t,dataStreamVersion:r}){let n={};if(e!=null)for(let[s,u]of Object.entries(e))n[s]=u;return n["Content-Type"]==null&&(n["Content-Type"]=t),r!==void 0&&(n["X-Vercel-AI-Data-Stream"]=r),n}function IE({response:e,status:t,statusText:r,headers:n,stream:s}){e.writeHead(t??200,r,n);let u=s.getReader();(async()=>{try{for(;;){let{done:w,value:T}=await u.read();if(w)break;e.write(T)}}catch(w){throw w}finally{e.end()}})()}var kE="AI_InvalidArgumentError",ME=`vercel.ai.error.${kE}`,tP=Symbol.for(ME),LE,Lp=class extends Mt{constructor({parameter:e,value:t,message:r}){super({name:kE,message:`Invalid argument for parameter ${e}: ${r}`}),this[LE]=!0,this.parameter=e,this.value=t}static isInstance(e){return Mt.hasMarker(e,ME)}};LE=tP;var FE="AI_RetryError",UE=`vercel.ai.error.${FE}`,rP=Symbol.for(UE),jE,NE=class extends Mt{constructor({message:e,reason:t,errors:r}){super({name:FE,message:e}),this[jE]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return Mt.hasMarker(e,UE)}};jE=rP;var nP=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:r=2}={})=>async n=>YE(n,{maxRetries:e,delayInMs:t,backoffFactor:r});async function YE(e,{maxRetries:t,delayInMs:r,backoffFactor:n},s=[]){try{return await e()}catch(u){if($_(u)||t===0)throw u;let h=Zw(u),w=[...s,u],T=w.length;if(T>t)throw new NE({message:`Failed after ${T} attempts. Last error: ${h}`,reason:"maxRetriesExceeded",errors:w});if(u instanceof Error&&yl.isInstance(u)&&u.isRetryable===!0&&T<=t)return await Jw(r),YE(e,{maxRetries:t,delayInMs:n*r,backoffFactor:n},w);throw T===1?u:new NE({message:`Failed after ${T} attempts with non-retryable error: '${h}'`,reason:"errorNotRetryable",errors:w})}}function aP({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new Lp({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Lp({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}let t=e??2;return{maxRetries:t,retry:nP({maxRetries:t})}}function R0({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function iP({model:e,settings:t,telemetry:r,headers:n}){var s;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((u,[h,w])=>(u[`ai.settings.${h}`]=w,u),{}),...Object.entries((s=r==null?void 0:r.metadata)!=null?s:{}).reduce((u,[h,w])=>(u[`ai.telemetry.metadata.${h}`]=w,u),{}),...Object.entries(n??{}).reduce((u,[h,w])=>(w!==void 0&&(u[`ai.request.headers.${h}`]=w),u),{})}}var oP={startSpan(){return fy},startActiveSpan(e,t,r,n){if(typeof t=="function")return t(fy);if(typeof r=="function")return r(fy);if(typeof n=="function")return n(fy)}},fy={spanContext(){return sP},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},sP={traceId:"",spanId:"",traceFlags:0};function uP({isEnabled:e=!1,tracer:t}={}){return e?t||x0.getTracer("ai"):oP}function O0({name:e,tracer:t,attributes:r,fn:n,endWhenDone:s=!0}){return t.startActiveSpan(e,{attributes:r},async u=>{try{let h=await n(u);return s&&u.end(),h}catch(h){try{h instanceof Error?(u.recordException({name:h.name,message:h.message,stack:h.stack}),u.setStatus({code:I_.ERROR,message:h.message})):u.setStatus({code:I_.ERROR})}finally{u.end()}throw h}})}function N_({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((r,[n,s])=>{if(s===void 0)return r;if(typeof s=="object"&&"input"in s&&typeof s.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return r;let u=s.input();return u===void 0?r:{...r,[n]:u}}if(typeof s=="object"&&"output"in s&&typeof s.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return r;let u=s.output();return u===void 0?r:{...r,[n]:u}}return{...r,[n]:s}},{})}var cP="AI_NoImageGeneratedError",lP=`vercel.ai.error.${cP}`,fP=Symbol.for(lP),dP;dP=fP;var $E="AI_NoObjectGeneratedError",qE=`vercel.ai.error.${$E}`,pP=Symbol.for(qE),BE,DE=class extends Mt{constructor({message:e="No object generated.",cause:t,text:r,response:n,usage:s}){super({name:$E,message:e,cause:t}),this[BE]=!0,this.text=r,this.response=n,this.usage=s}static isInstance(e){return Mt.hasMarker(e,qE)}};BE=pP;var zE="AI_DownloadError",GE=`vercel.ai.error.${zE}`,vP=Symbol.for(GE),HE,P0=class extends Mt{constructor({url:e,statusCode:t,statusText:r,cause:n,message:s=n==null?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${n}`}){super({name:zE,message:s,cause:n}),this[HE]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return Mt.hasMarker(e,GE)}};HE=vP;async function mP({url:e,fetchImplementation:t=fetch}){var r;let n=e.toString();try{let s=await t(n);if(!s.ok)throw new P0({url:n,statusCode:s.status,statusText:s.statusText});return{data:new Uint8Array(await s.arrayBuffer()),mimeType:(r=s.headers.get("content-type"))!=null?r:void 0}}catch(s){throw P0.isInstance(s)?s:new P0({url:n,cause:s})}}var hP=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}];function _P(e){for(let{bytes:t,mimeType:r}of hP)if(e.length>=t.length&&t.every((n,s)=>e[s]===n))return r}var VE="AI_InvalidDataContentError",KE=`vercel.ai.error.${VE}`,gP=Symbol.for(KE),WE,CE=class extends Mt{constructor({content:e,cause:t,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:VE,message:r,cause:t}),this[WE]=!0,this.content=e}static isInstance(e){return Mt.hasMarker(e,KE)}};WE=gP;var JE=k.union([k.string(),k.instanceof(Uint8Array),k.instanceof(ArrayBuffer),k.custom(e=>{var t,r;return(r=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?r:!1},{message:"Must be a Buffer"})]);function yP(e){return typeof e=="string"?e:e instanceof ArrayBuffer?Th(new Uint8Array(e)):Th(e)}function py(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return Qw(e)}catch(t){throw new CE({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new CE({content:e})}function SP(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var ZE="AI_InvalidMessageRoleError",XE=`vercel.ai.error.${ZE}`,wP=Symbol.for(XE),QE,bP=class extends Mt{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:ZE,message:t}),this[QE]=!0,this.role=e}static isInstance(e){return Mt.hasMarker(e,XE)}};QE=wP;function EP(e){try{let[t,r]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:r}}catch{return{mimeType:void 0,base64Content:void 0}}}async function TP({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:r=()=>!1,downloadImplementation:n=mP}){let s=await NP(e.messages,n,t,r);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(u=>IP(u,s))]}function IP(e,t){var r,n,s,u,h,w;let T=e.role;switch(T){case"system":return{role:"system",content:e.content,providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata}:{role:"user",content:e.content.map(C=>DP(C,t)).filter(C=>C.type!=="text"||C.text!==""),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(u=e.providerOptions)!=null?u:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(C=>C.type!=="text"||C.text!=="").map(C=>{let{experimental_providerMetadata:F,providerOptions:z,...ee}=C;return{...ee,providerMetadata:z??F}}),providerMetadata:(h=e.providerOptions)!=null?h:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(C=>{var F;return{type:"tool-result",toolCallId:C.toolCallId,toolName:C.toolName,result:C.result,content:C.experimental_content,isError:C.isError,providerMetadata:(F=C.providerOptions)!=null?F:C.experimental_providerMetadata}}),providerMetadata:(w=e.providerOptions)!=null?w:e.experimental_providerMetadata};default:{let C=T;throw new bP({role:C})}}}async function NP(e,t,r,n){let s=e.filter(h=>h.role==="user").map(h=>h.content).filter(h=>Array.isArray(h)).flat().filter(h=>h.type==="image"||h.type==="file").filter(h=>!(h.type==="image"&&r===!0)).map(h=>h.type==="image"?h.image:h.data).map(h=>typeof h=="string"&&(h.startsWith("http:")||h.startsWith("https:"))?new URL(h):h).filter(h=>h instanceof URL).filter(h=>!n(h)),u=await Promise.all(s.map(async h=>({url:h,data:await t({url:h})})));return Object.fromEntries(u.map(({url:h,data:w})=>[h.toString(),w]))}function DP(e,t){var r;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:e.experimental_providerMetadata};let n=e.mimeType,s,u,h,w=e.type;switch(w){case"image":s=e.image;break;case"file":s=e.data;break;default:throw new Error(`Unsupported part type: ${w}`)}try{u=typeof s=="string"?new URL(s):s}catch{u=s}if(u instanceof URL)if(u.protocol==="data:"){let{mimeType:T,base64Content:C}=EP(u.toString());if(T==null||C==null)throw new Error(`Invalid data URL format in part ${w}`);n=T,h=py(C)}else{let T=t[u.toString()];T?(h=T.data,n??(n=T.mimeType)):h=u}else h=py(u);switch(w){case"image":return h instanceof Uint8Array&&(n=(r=_P(h))!=null?r:n),{type:"image",image:h,mimeType:n,providerMetadata:e.experimental_providerMetadata};case"file":{if(n==null)throw new Error("Mime type is missing for file part");return{type:"file",data:h instanceof Uint8Array?yP(h):h,mimeType:n,providerMetadata:e.experimental_providerMetadata}}}}function CP({maxTokens:e,temperature:t,topP:r,topK:n,presencePenalty:s,frequencyPenalty:u,stopSequences:h,seed:w}){if(e!=null){if(!Number.isInteger(e))throw new Lp({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new Lp({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Lp({parameter:"temperature",value:t,message:"temperature must be a number"});if(r!=null&&typeof r!="number")throw new Lp({parameter:"topP",value:r,message:"topP must be a number"});if(n!=null&&typeof n!="number")throw new Lp({parameter:"topK",value:n,message:"topK must be a number"});if(s!=null&&typeof s!="number")throw new Lp({parameter:"presencePenalty",value:s,message:"presencePenalty must be a number"});if(u!=null&&typeof u!="number")throw new Lp({parameter:"frequencyPenalty",value:u,message:"frequencyPenalty must be a number"});if(w!=null&&!Number.isInteger(w))throw new Lp({parameter:"seed",value:w,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:r,topK:n,presencePenalty:s,frequencyPenalty:u,stopSequences:h!=null&&h.length>0?h:void 0,seed:w}}function xP(e){var t,r,n;let s=[];for(let u of e){let h;try{h=new URL(u.url)}catch{throw new Error(`Invalid URL: ${u.url}`)}switch(h.protocol){case"http:":case"https:":{if((t=u.contentType)!=null&&t.startsWith("image/"))s.push({type:"image",image:h});else{if(!u.contentType)throw new Error("If the attachment is not an image, it must specify a content type");s.push({type:"file",data:h,mimeType:u.contentType})}break}case"data:":{let w,T,C;try{[w,T]=u.url.split(","),C=w.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${u.url}`)}if(C==null||T==null)throw new Error(`Invalid data URL format: ${u.url}`);if((r=u.contentType)!=null&&r.startsWith("image/"))s.push({type:"image",image:py(T)});else if((n=u.contentType)!=null&&n.startsWith("text/"))s.push({type:"text",text:SP(py(T))});else{if(!u.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");s.push({type:"file",data:T,mimeType:u.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${h.protocol}`)}}return s}var eT="AI_MessageConversionError",tT=`vercel.ai.error.${eT}`,PP=Symbol.for(tT),rT,xE=class extends Mt{constructor({originalMessage:e,message:t}){super({name:eT,message:t}),this[rT]=!0,this.originalMessage=e}static isInstance(e){return Mt.hasMarker(e,tT)}};rT=PP;function AP(e,t){var r;let n=(r=t==null?void 0:t.tools)!=null?r:{},s=[];for(let u=0;u<e.length;u++){let h=e[u],w=u===e.length-1,{role:T,content:C,toolInvocations:F,experimental_attachments:z}=h;switch(T){case"system":{s.push({role:"system",content:C});break}case"user":{s.push({role:"user",content:z?[{type:"text",text:C},...xP(z)]:C});break}case"assistant":{if(F==null||F.length===0){s.push({role:"assistant",content:C});break}let ee=F.reduce((pe,ce)=>{var re;return Math.max(pe,(re=ce.step)!=null?re:0)},0);for(let pe=0;pe<=ee;pe++){let ce=F.filter(re=>{var Q;return((Q=re.step)!=null?Q:0)===pe});ce.length!==0&&(s.push({role:"assistant",content:[...w&&C&&pe===0?[{type:"text",text:C}]:[],...ce.map(({toolCallId:re,toolName:Q,args:ve})=>({type:"tool-call",toolCallId:re,toolName:Q,args:ve}))]}),s.push({role:"tool",content:ce.map(re=>{if(!("result"in re))throw new xE({originalMessage:h,message:"ToolInvocation must have a result: "+JSON.stringify(re)});let{toolCallId:Q,toolName:ve,result:Pe}=re,We=n[ve];return(We==null?void 0:We.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:Q,toolName:ve,result:We.experimental_toToolResultContent(Pe),experimental_content:We.experimental_toToolResultContent(Pe)}:{type:"tool-result",toolCallId:Q,toolName:ve,result:Pe}})}))}C&&!w&&s.push({role:"assistant",content:C});break}case"data":break;default:{let ee=T;throw new xE({originalMessage:h,message:`Unsupported role: ${ee}`})}}}return s}function RP(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";let t=e.map(OP);return t.some(r=>r==="has-ui-specific-parts")?"ui-messages":t.every(r=>r==="has-core-specific-parts"||r==="message")?"messages":"other"}function OP(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var k0=k.lazy(()=>k.union([k.null(),k.string(),k.number(),k.boolean(),k.record(k.string(),k0),k.array(k0)])),ws=k.record(k.string(),k.record(k.string(),k0)),kP=k.array(k.union([k.object({type:k.literal("text"),text:k.string()}),k.object({type:k.literal("image"),data:k.string(),mimeType:k.string().optional()})])),nT=k.object({type:k.literal("text"),text:k.string(),providerOptions:ws.optional(),experimental_providerMetadata:ws.optional()}),MP=k.object({type:k.literal("image"),image:k.union([JE,k.instanceof(URL)]),mimeType:k.string().optional(),providerOptions:ws.optional(),experimental_providerMetadata:ws.optional()}),LP=k.object({type:k.literal("file"),data:k.union([JE,k.instanceof(URL)]),mimeType:k.string(),providerOptions:ws.optional(),experimental_providerMetadata:ws.optional()}),FP=k.object({type:k.literal("tool-call"),toolCallId:k.string(),toolName:k.string(),args:k.unknown(),providerOptions:ws.optional(),experimental_providerMetadata:ws.optional()}),UP=k.object({type:k.literal("tool-result"),toolCallId:k.string(),toolName:k.string(),result:k.unknown(),content:kP.optional(),isError:k.boolean().optional(),providerOptions:ws.optional(),experimental_providerMetadata:ws.optional()}),jP=k.object({role:k.literal("system"),content:k.string(),providerOptions:ws.optional(),experimental_providerMetadata:ws.optional()}),YP=k.object({role:k.literal("user"),content:k.union([k.string(),k.array(k.union([nT,MP,LP]))]),providerOptions:ws.optional(),experimental_providerMetadata:ws.optional()}),$P=k.object({role:k.literal("assistant"),content:k.union([k.string(),k.array(k.union([nT,FP]))]),providerOptions:ws.optional(),experimental_providerMetadata:ws.optional()}),qP=k.object({role:k.literal("tool"),content:k.array(UP),providerOptions:ws.optional(),experimental_providerMetadata:ws.optional()}),BP=k.union([jP,YP,$P,qP]);function zP({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new Cv({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new Cv({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new Cv({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new Cv({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){let r=RP(e.messages);if(r==="other")throw new Cv({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});let n=r==="ui-messages"?AP(e.messages,{tools:t}):e.messages,s=nh({value:n,schema:k.array(BP)});if(!s.success)throw new Cv({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:s.error});return{type:"messages",messages:n,system:e.system}}throw new Error("unreachable")}function GP({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function HP(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var VP="JSON schema:",KP="You MUST answer with a JSON object that matches the JSON schema above.",WP="You MUST answer with JSON.";function JP({prompt:e,schema:t,schemaPrefix:r=t!=null?VP:void 0,schemaSuffix:n=t!=null?KP:WP}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,r,t!=null?JSON.stringify(t):void 0,n].filter(s=>s!=null).join(`
`)}function A0(e){let t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{let r=t.getReader();return{async next(){let{done:n,value:s}=await r.read();return n?{done:!0,value:void 0}:{done:!1,value:s}}}},t}var qU=Ap({prefix:"aiobj",size:24});var Mp=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function PE(){let e,t;return{promise:new Promise((n,s)=>{e=n,t=s}),resolve:e,reject:t}}function ZP(){let e=[],t=null,r=!1,n=PE(),s=async()=>{if(r&&e.length===0){t==null||t.close();return}if(e.length===0)return n=PE(),await n.promise,s();try{let{value:u,done:h}=await e[0].read();h?(e.shift(),e.length>0?await s():r&&(t==null||t.close())):t==null||t.enqueue(u)}catch(u){t==null||t.error(u),e.shift(),r&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(u){t=u},pull:s,async cancel(){for(let u of e)await u.cancel();e=[],r=!0}}),addStream:u=>{if(r)throw new Error("Cannot add inner stream: outer stream is closed");e.push(u.getReader()),n.resolve()},close:()=>{r=!0,n.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{r=!0,n.resolve(),e.forEach(u=>u.cancel()),e=[],t==null||t.close()}}}function XP(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}var zU=Ap({prefix:"aiobj",size:24});var aT="AI_NoOutputSpecifiedError",iT=`vercel.ai.error.${aT}`,QP=Symbol.for(iT),oT,eA=class extends Mt{constructor({message:e="No output specified."}={}){super({name:aT,message:e}),this[oT]=!0}static isInstance(e){return Mt.hasMarker(e,iT)}};oT=QP;var sT="AI_ToolExecutionError",uT=`vercel.ai.error.${sT}`,tA=Symbol.for(uT),cT,rA=class extends Mt{constructor({toolArgs:e,toolName:t,toolCallId:r,cause:n,message:s=`Error executing tool ${t}: ${rh(n)}`}){super({name:sT,message:s,cause:n}),this[cT]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=r}static isInstance(e){return Mt.hasMarker(e,uT)}};cT=tA;function nA(e){return e!=null&&Object.keys(e).length>0}function aA({tools:e,toolChoice:t,activeTools:r}){return nA(e)?{tools:(r!=null?Object.entries(e).filter(([s])=>r.includes(s)):Object.entries(e)).map(([s,u])=>{let h=u.type;switch(h){case void 0:case"function":return{type:"function",name:s,description:u.description,parameters:$h(u.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:s,id:u.id,args:u.args};default:{let w=h;throw new Error(`Unsupported tool type: ${w}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var iA=/^([\s\S]*?)(\s+)(\S*)$/;function oA(e){let t=e.match(iA);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var lT="AI_InvalidToolArgumentsError",fT=`vercel.ai.error.${lT}`,sA=Symbol.for(fT),dT,D_=class extends Mt{constructor({toolArgs:e,toolName:t,cause:r,message:n=`Invalid arguments for tool ${t}: ${rh(r)}`}){super({name:lT,message:n,cause:r}),this[dT]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return Mt.hasMarker(e,fT)}};dT=sA;var pT="AI_NoSuchToolError",vT=`vercel.ai.error.${pT}`,uA=Symbol.for(vT),mT,qh=class extends Mt{constructor({toolName:e,availableTools:t=void 0,message:r=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:pT,message:r}),this[mT]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return Mt.hasMarker(e,vT)}};mT=uA;var hT="AI_ToolCallRepairError",_T=`vercel.ai.error.${hT}`,cA=Symbol.for(_T),gT,L0=class extends Mt{constructor({cause:e,originalError:t,message:r=`Error repairing tool call: ${rh(e)}`}){super({name:hT,message:r,cause:e}),this[gT]=!0,this.originalError=t}static isInstance(e){return Mt.hasMarker(e,_T)}};gT=cA;async function lA({toolCall:e,tools:t,repairToolCall:r,system:n,messages:s}){if(t==null)throw new qh({toolName:e.toolName});try{return await AE({toolCall:e,tools:t})}catch(u){if(r==null||!(qh.isInstance(u)||D_.isInstance(u)))throw u;let h=null;try{h=await r({toolCall:e,tools:t,parameterSchema:({toolName:w})=>$h(t[w].parameters).jsonSchema,system:n,messages:s,error:u})}catch(w){throw new L0({cause:w,originalError:u})}if(h==null)throw u;return await AE({toolCall:h,tools:t})}}async function AE({toolCall:e,tools:t}){let r=e.toolName,n=t[r];if(n==null)throw new qh({toolName:e.toolName,availableTools:Object.keys(t)});let s=$h(n.parameters),u=e.args.trim()===""?nh({value:{},schema:s}):xv({text:e.args,schema:s});if(u.success===!1)throw new D_({toolName:r,toolArgs:e.args,cause:u.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:r,args:u.value}}function RE({text:e="",tools:t,toolCalls:r,toolResults:n,messageId:s,generateMessageId:u}){let h=[];return h.push({role:"assistant",content:[{type:"text",text:e},...r],id:s}),n.length>0&&h.push({role:"tool",id:u(),content:n.map(w=>{let T=t[w.toolName];return(T==null?void 0:T.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:w.toolCallId,toolName:w.toolName,result:T.experimental_toToolResultContent(w.result),experimental_content:T.experimental_toToolResultContent(w.result)}:{type:"tool-result",toolCallId:w.toolCallId,toolName:w.toolName,result:w.result}})}),h}var ej=Ap({prefix:"aitxt",size:24}),tj=Ap({prefix:"msg",size:24});var fA={};M0(fA,{object:()=>pA,text:()=>dA});var dA=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),pA=({schema:e})=>{let t=$h(e);return{type:"object",responseFormat:({model:r})=>({type:"json",schema:r.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:r,model:n}){return n.supportsStructuredOutputs?r:JP({prompt:r,schema:t.jsonSchema})},parsePartial({text:r}){let n=oE(r);switch(n.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:n.value};default:{let s=n.state;throw new Error(`Unsupported parse state: ${s}`)}}},parseOutput({text:r},n){let s=xv({text:r});if(!s.success)throw new DE({message:"No object generated: could not parse the response.",cause:s.error,text:r,response:n.response,usage:n.usage});let u=nh({value:s.value,schema:t});if(!u.success)throw new DE({message:"No object generated: response did not match schema.",cause:u.error,text:r,response:n.response,usage:n.usage});return u.value}}};function vA(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function F0(e,t){let r=e.getReader(),n=t.getReader(),s,u,h=!1,w=!1;async function T(F){try{s==null&&(s=r.read());let z=await s;s=void 0,z.done?F.close():F.enqueue(z.value)}catch(z){F.error(z)}}async function C(F){try{u==null&&(u=n.read());let z=await u;u=void 0,z.done?F.close():F.enqueue(z.value)}catch(z){F.error(z)}}return new ReadableStream({async pull(F){try{if(h){await C(F);return}if(w){await T(F);return}s==null&&(s=r.read()),u==null&&(u=n.read());let{result:z,reader:ee}=await Promise.race([s.then(pe=>({result:pe,reader:r})),u.then(pe=>({result:pe,reader:n}))]);z.done||F.enqueue(z.value),ee===r?(s=void 0,z.done&&(await C(F),h=!0)):(u=void 0,z.done&&(w=!0,await T(F)))}catch(z){F.error(z)}},cancel(){r.cancel(),n.cancel()}})}function mA({tools:e,generatorStream:t,toolCallStreaming:r,tracer:n,telemetry:s,system:u,messages:h,abortSignal:w,repairToolCall:T}){let C=null,F=new ReadableStream({start(ve){C=ve}}),z={},ee=new Set,pe=!1,ce;function re(){pe&&ee.size===0&&(ce!=null&&C.enqueue(ce),C.close())}let Q=new TransformStream({async transform(ve,Pe){let We=ve.type;switch(We){case"text-delta":case"reasoning":case"response-metadata":case"error":{Pe.enqueue(ve);break}case"tool-call-delta":{r&&(z[ve.toolCallId]||(Pe.enqueue({type:"tool-call-streaming-start",toolCallId:ve.toolCallId,toolName:ve.toolName}),z[ve.toolCallId]=!0),Pe.enqueue({type:"tool-call-delta",toolCallId:ve.toolCallId,toolName:ve.toolName,argsTextDelta:ve.argsTextDelta}));break}case"tool-call":{try{let Ae=await lA({toolCall:ve,tools:e,repairToolCall:T,system:u,messages:h});Pe.enqueue(Ae);let Ze=e[Ae.toolName];if(Ze.execute!=null){let Tt=hm();ee.add(Tt),O0({name:"ai.toolCall",attributes:N_({telemetry:s,attributes:{...R0({operationId:"ai.toolCall",telemetry:s}),"ai.toolCall.name":Ae.toolName,"ai.toolCall.id":Ae.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(Ae.args)}}}),tracer:n,fn:async Dt=>Ze.execute(Ae.args,{toolCallId:Ae.toolCallId,messages:h,abortSignal:w}).then(Lt=>{C.enqueue({...Ae,type:"tool-result",result:Lt}),ee.delete(Tt),re();try{Dt.setAttributes(N_({telemetry:s,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(Lt)}}}))}catch{}},Lt=>{C.enqueue({type:"error",error:new rA({toolCallId:Ae.toolCallId,toolName:Ae.toolName,toolArgs:Ae.args,cause:Lt})}),ee.delete(Tt),re()})})}}catch(Ae){C.enqueue({type:"error",error:Ae})}break}case"finish":{ce={type:"finish",finishReason:ve.finishReason,logprobs:ve.logprobs,usage:GP(ve.usage),experimental_providerMetadata:ve.providerMetadata};break}default:{let Ae=We;throw new Error(`Unhandled chunk type: ${Ae}`)}}},flush(){pe=!0,re()}});return new ReadableStream({async start(ve){return Promise.all([t.pipeThrough(Q).pipeTo(new WritableStream({write(Pe){ve.enqueue(Pe)},close(){}})),F.pipeTo(new WritableStream({write(Pe){ve.enqueue(Pe)},close(){ve.close()}}))])}})}var hA=Ap({prefix:"aitxt",size:24}),_A=Ap({prefix:"msg",size:24});function yT({model:e,tools:t,toolChoice:r,system:n,prompt:s,messages:u,maxRetries:h,abortSignal:w,headers:T,maxSteps:C=1,experimental_generateMessageId:F=_A,experimental_output:z,experimental_continueSteps:ee=!1,experimental_telemetry:pe,experimental_providerMetadata:ce,providerOptions:re=ce,experimental_toolCallStreaming:Q=!1,toolCallStreaming:ve=Q,experimental_activeTools:Pe,experimental_repairToolCall:We,experimental_transform:Ae,onChunk:Ze,onFinish:Tt,onStepFinish:Dt,_internal:{now:Lt=XP,generateId:it=hA,currentDate:Gt=()=>new Date}={},...xr}){return new yA({model:e,telemetry:pe,headers:T,settings:xr,maxRetries:h,abortSignal:w,system:n,prompt:s,messages:u,tools:t,toolChoice:r,toolCallStreaming:ve,transforms:vA(Ae),activeTools:Pe,repairToolCall:We,maxSteps:C,output:z,continueSteps:ee,providerOptions:re,onChunk:Ze,onFinish:Tt,onStepFinish:Dt,now:Lt,currentDate:Gt,generateId:it,generateMessageId:F})}function gA(e){if(!e)return new TransformStream({transform(s,u){u.enqueue({part:s,partialOutput:void 0})}});let t="",r="",n="";return new TransformStream({transform(s,u){if(s.type!=="text-delta"){u.enqueue({part:s,partialOutput:void 0});return}t+=s.textDelta,r+=s.textDelta;let h=e.parsePartial({text:t});if(h!=null){let w=JSON.stringify(h.partial);w!==n&&(u.enqueue({part:{type:"text-delta",textDelta:r},partialOutput:h.partial}),n=w,r="")}},flush(s){r.length>0&&s.enqueue({part:{type:"text-delta",textDelta:r},partialOutput:void 0})}})}var yA=class{constructor({model:e,telemetry:t,headers:r,settings:n,maxRetries:s,abortSignal:u,system:h,prompt:w,messages:T,tools:C,toolChoice:F,toolCallStreaming:z,transforms:ee,activeTools:pe,repairToolCall:ce,maxSteps:re,output:Q,continueSteps:ve,providerOptions:Pe,onChunk:We,onFinish:Ae,onStepFinish:Ze,now:Tt,currentDate:Dt,generateId:Lt,generateMessageId:it}){this.warningsPromise=new Mp,this.usagePromise=new Mp,this.finishReasonPromise=new Mp,this.providerMetadataPromise=new Mp,this.textPromise=new Mp,this.reasoningPromise=new Mp,this.toolCallsPromise=new Mp,this.toolResultsPromise=new Mp,this.requestPromise=new Mp,this.responsePromise=new Mp,this.stepsPromise=new Mp;var Gt;if(re<1)throw new Lp({parameter:"maxSteps",value:re,message:"maxSteps must be at least 1"});this.output=Q;let xr="",oa="",ei="",Pr,xn={id:Lt(),timestamp:Dt(),modelId:e.modelId,messages:[]},nt=[],po=[],Ve,Tr,zn="initial",kt=[],Ft,rt=new TransformStream({async transform(qt,an){an.enqueue(qt);let{part:je}=qt;if((je.type==="text-delta"||je.type==="reasoning"||je.type==="tool-call"||je.type==="tool-result"||je.type==="tool-call-streaming-start"||je.type==="tool-call-delta")&&await(We==null?void 0:We({chunk:je})),je.type==="text-delta"&&(xr+=je.textDelta,oa+=je.textDelta,ei+=je.textDelta),je.type==="reasoning"&&(Pr=(Pr??"")+je.textDelta),je.type==="tool-call"&&nt.push(je),je.type==="tool-result"&&po.push(je),je.type==="step-finish"){let Kn=RE({text:oa,tools:C??{},toolCalls:nt,toolResults:po,messageId:je.messageId,generateMessageId:it}),Ct=kt.length,wr="done";Ct+1<re&&(ve&&je.finishReason==="length"&&nt.length===0?wr="continue":nt.length>0&&po.length===nt.length&&(wr="tool-result"));let ti={stepType:zn,text:xr,reasoning:Pr,toolCalls:nt,toolResults:po,finishReason:je.finishReason,usage:je.usage,warnings:je.warnings,logprobs:je.logprobs,request:je.request,response:{...je.response,messages:[...xn.messages,...Kn]},experimental_providerMetadata:je.experimental_providerMetadata,isContinued:je.isContinued};await(Ze==null?void 0:Ze(ti)),kt.push(ti),nt=[],po=[],xr="",wr!=="done"&&(zn=wr),wr!=="continue"&&(xn.messages.push(...Kn),oa="")}je.type==="finish"&&(xn.id=je.response.id,xn.timestamp=je.response.timestamp,xn.modelId=je.response.modelId,xn.headers=je.response.headers,Tr=je.usage,Ve=je.finishReason)},async flush(qt){var an;try{if(kt.length===0)return;let je=kt[kt.length-1];Yr.warningsPromise.resolve(je.warnings),Yr.requestPromise.resolve(je.request),Yr.responsePromise.resolve(je.response),Yr.toolCallsPromise.resolve(je.toolCalls),Yr.toolResultsPromise.resolve(je.toolResults),Yr.providerMetadataPromise.resolve(je.experimental_providerMetadata);let Kn=Ve??"unknown",Ct=Tr??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Yr.finishReasonPromise.resolve(Kn),Yr.usagePromise.resolve(Ct),Yr.textPromise.resolve(ei),Yr.reasoningPromise.resolve(Pr),Yr.stepsPromise.resolve(kt),await(Ae==null?void 0:Ae({finishReason:Kn,logprobs:void 0,usage:Ct,text:ei,reasoning:Pr,toolCalls:je.toolCalls,toolResults:je.toolResults,request:(an=je.request)!=null?an:{},response:je.response,warnings:je.warnings,experimental_providerMetadata:je.experimental_providerMetadata,steps:kt})),Ft.setAttributes(N_({telemetry:t,attributes:{"ai.response.finishReason":Kn,"ai.response.text":{output:()=>ei},"ai.response.toolCalls":{output:()=>{var wr;return(wr=je.toolCalls)!=null&&wr.length?JSON.stringify(je.toolCalls):void 0}},"ai.usage.promptTokens":Ct.promptTokens,"ai.usage.completionTokens":Ct.completionTokens}}))}catch(je){qt.error(je)}finally{Ft.end()}}}),yn=ZP();this.addStream=yn.addStream,this.closeStream=yn.close;let at=yn.stream;for(let qt of ee)at=at.pipeThrough(qt({tools:C,stopStream(){yn.terminate()}}));this.baseStream=at.pipeThrough(gA(Q)).pipeThrough(rt);let{maxRetries:Nc,retry:Wt}=aP({maxRetries:s}),$i=uP(t),Ht=iP({model:e,telemetry:t,headers:r,settings:{...n,maxRetries:Nc}}),tr=zP({prompt:{system:(Gt=Q==null?void 0:Q.injectIntoSystemPrompt({system:h,model:e}))!=null?Gt:h,prompt:w,messages:T},tools:C}),Yr=this;O0({name:"ai.streamText",attributes:N_({telemetry:t,attributes:{...R0({operationId:"ai.streamText",telemetry:t}),...Ht,"ai.prompt":{input:()=>JSON.stringify({system:h,prompt:w,messages:T})},"ai.settings.maxSteps":re}}),tracer:$i,endWhenDone:!1,fn:async qt=>{Ft=qt;async function an({currentStep:je,responseMessages:Kn,usage:Ct,stepType:wr,previousStepText:ti,hasLeadingWhitespace:qi,messageId:Hr}){let Sn=Kn.length===0?tr.type:"messages",Bi=[...tr.messages,...Kn],ga=await TP({prompt:{type:Sn,system:tr.system,messages:Bi},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:e.supportsUrl}),Ar={type:"regular",...aA({tools:C,toolChoice:F,activeTools:pe})},{result:{stream:ar,warnings:pr,rawResponse:$r,request:Yf},doStreamSpan:wn,startTimestampMs:bl}=await Wt(()=>O0({name:"ai.streamText.doStream",attributes:N_({telemetry:t,attributes:{...R0({operationId:"ai.streamText.doStream",telemetry:t}),...Ht,"ai.prompt.format":{input:()=>Sn},"ai.prompt.messages":{input:()=>JSON.stringify(ga)},"ai.prompt.tools":{input:()=>{var Nr;return(Nr=Ar.tools)==null?void 0:Nr.map(Lr=>JSON.stringify(Lr))}},"ai.prompt.toolChoice":{input:()=>Ar.toolChoice!=null?JSON.stringify(Ar.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":n.frequencyPenalty,"gen_ai.request.max_tokens":n.maxTokens,"gen_ai.request.presence_penalty":n.presencePenalty,"gen_ai.request.stop_sequences":n.stopSequences,"gen_ai.request.temperature":n.temperature,"gen_ai.request.top_k":n.topK,"gen_ai.request.top_p":n.topP}}),tracer:$i,endWhenDone:!1,fn:async Nr=>({startTimestampMs:Tt(),doStreamSpan:Nr,result:await e.doStream({mode:Ar,...CP(n),inputFormat:Sn,responseFormat:Q==null?void 0:Q.responseFormat({model:e}),prompt:ga,providerMetadata:Pe,abortSignal:u,headers:r})})})),Dc=mA({tools:C,generatorStream:ar,toolCallStreaming:z,tracer:$i,telemetry:t,system:h,messages:Bi,repairToolCall:ce,abortSignal:u}),bn=Yf??{},qa=[],ur=[],Pn="unknown",Gn={promptTokens:0,completionTokens:0,totalTokens:0},vo,Ts=!0,Cc="",El="",mo=wr==="continue"?ti:"",$o,On={id:Lt(),timestamp:Dt(),modelId:e.modelId},ho="",Is=!1,ya=!0,Uu=!1;async function Ns({controller:Nr,chunk:Lr}){Nr.enqueue(Lr),Cc+=Lr.textDelta,mo+=Lr.textDelta,Is=!0,Uu=Lr.textDelta.trimEnd()!==Lr.textDelta}Yr.addStream(Dc.pipeThrough(new TransformStream({async transform(Nr,Lr){var ri,zi,pn;if(Ts){let ai=Tt()-bl;Ts=!1,wn.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":ai}),wn.setAttributes({"ai.response.msToFirstChunk":ai}),Lr.enqueue({type:"step-start",messageId:Hr,request:bn,warnings:pr??[]})}if(Nr.type==="text-delta"&&Nr.textDelta.length===0)return;let ni=Nr.type;switch(ni){case"text-delta":{if(ve){let ai=ya&&qi?Nr.textDelta.trimStart():Nr.textDelta;if(ai.length===0)break;ya=!1,ho+=ai;let Ds=oA(ho);Ds!=null&&(ho=Ds.suffix,await Ns({controller:Lr,chunk:{type:"text-delta",textDelta:Ds.prefix+Ds.whitespace}}))}else await Ns({controller:Lr,chunk:Nr});break}case"reasoning":{Lr.enqueue(Nr),El+=Nr.textDelta;break}case"tool-call":{Lr.enqueue(Nr),qa.push(Nr);break}case"tool-result":{Lr.enqueue(Nr),ur.push(Nr);break}case"response-metadata":{On={id:(ri=Nr.id)!=null?ri:On.id,timestamp:(zi=Nr.timestamp)!=null?zi:On.timestamp,modelId:(pn=Nr.modelId)!=null?pn:On.modelId};break}case"finish":{Gn=Nr.usage,Pn=Nr.finishReason,vo=Nr.experimental_providerMetadata,$o=Nr.logprobs;let ai=Tt()-bl;wn.addEvent("ai.stream.finish"),wn.setAttributes({"ai.response.msToFinish":ai,"ai.response.avgCompletionTokensPerSecond":1e3*Gn.completionTokens/ai});break}case"tool-call-streaming-start":case"tool-call-delta":{Lr.enqueue(Nr);break}case"error":{Lr.enqueue(Nr),Pn="error";break}default:{let ai=ni;throw new Error(`Unknown chunk type: ${ai}`)}}},async flush(Nr){let Lr=qa.length>0?JSON.stringify(qa):void 0,ri="done";je+1<re&&(ve&&Pn==="length"&&qa.length===0?ri="continue":qa.length>0&&ur.length===qa.length&&(ri="tool-result")),ve&&ho.length>0&&(ri!=="continue"||wr==="continue"&&!Is)&&(await Ns({controller:Nr,chunk:{type:"text-delta",textDelta:ho}}),ho="");try{wn.setAttributes(N_({telemetry:t,attributes:{"ai.response.finishReason":Pn,"ai.response.text":{output:()=>Cc},"ai.response.toolCalls":{output:()=>Lr},"ai.response.id":On.id,"ai.response.model":On.modelId,"ai.response.timestamp":On.timestamp.toISOString(),"ai.usage.promptTokens":Gn.promptTokens,"ai.usage.completionTokens":Gn.completionTokens,"gen_ai.response.finish_reasons":[Pn],"gen_ai.response.id":On.id,"gen_ai.response.model":On.modelId,"gen_ai.usage.input_tokens":Gn.promptTokens,"gen_ai.usage.output_tokens":Gn.completionTokens}}))}catch{}finally{wn.end()}Nr.enqueue({type:"step-finish",finishReason:Pn,usage:Gn,experimental_providerMetadata:vo,logprobs:$o,request:bn,response:{...On,headers:$r==null?void 0:$r.headers},warnings:pr,isContinued:ri==="continue",messageId:Hr});let zi=HP(Ct,Gn);if(ri==="done")Nr.enqueue({type:"finish",finishReason:Pn,usage:zi,experimental_providerMetadata:vo,logprobs:$o,response:{...On,headers:$r==null?void 0:$r.headers}}),Yr.closeStream();else{if(wr==="continue"){let pn=Kn[Kn.length-1];typeof pn.content=="string"?pn.content+=Cc:pn.content.push({text:Cc,type:"text"})}else Kn.push(...RE({text:Cc,tools:C??{},toolCalls:qa,toolResults:ur,messageId:Hr,generateMessageId:it}));await an({currentStep:je+1,responseMessages:Kn,usage:zi,stepType:ri,previousStepText:mo,hasLeadingWhitespace:Uu,messageId:ri==="continue"?Hr:it()})}}})))}await an({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:it()})}}).catch(qt=>{Yr.addStream(new ReadableStream({start(an){an.enqueue({type:"error",error:qt}),an.close()}})),Yr.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){let[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return A0(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"?t.enqueue(e.textDelta):e.type==="error"&&t.error(e.error)}})))}get fullStream(){return A0(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}get experimental_partialOutputStream(){if(this.output==null)throw new eA;return A0(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:r=!1}){let n="",s=new TransformStream({async transform(h,w){w.enqueue(h),h.type==="text-delta"&&(n+=h.textDelta)}}),u=new TransformStream({transform:async(h,w)=>{let T=h.type;switch(T){case"text-delta":{w.enqueue(Tc("text",h.textDelta));break}case"reasoning":{r&&w.enqueue(Tc("reasoning",h.textDelta));break}case"tool-call-streaming-start":{w.enqueue(Tc("tool_call_streaming_start",{toolCallId:h.toolCallId,toolName:h.toolName}));break}case"tool-call-delta":{w.enqueue(Tc("tool_call_delta",{toolCallId:h.toolCallId,argsTextDelta:h.argsTextDelta}));break}case"tool-call":{w.enqueue(Tc("tool_call",{toolCallId:h.toolCallId,toolName:h.toolName,args:h.args}));break}case"tool-result":{w.enqueue(Tc("tool_result",{toolCallId:h.toolCallId,result:h.result}));break}case"error":{w.enqueue(Tc("error",e(h.error)));break}case"step-start":{w.enqueue(Tc("start_step",{messageId:h.messageId}));break}case"step-finish":{w.enqueue(Tc("finish_step",{finishReason:h.finishReason,usage:t?{promptTokens:h.usage.promptTokens,completionTokens:h.usage.completionTokens}:void 0,isContinued:h.isContinued}));break}case"finish":{w.enqueue(Tc("finish_message",{finishReason:h.finishReason,usage:t?{promptTokens:h.usage.promptTokens,completionTokens:h.usage.completionTokens}:void 0}));break}default:{let C=T;throw new Error(`Unknown chunk type: ${C}`)}}}});return this.fullStream.pipeThrough(s).pipeThrough(u)}pipeDataStreamToResponse(e,{status:t,statusText:r,headers:n,data:s,getErrorMessage:u,sendUsage:h,sendReasoning:w}={}){IE({response:e,status:t,statusText:r,headers:TE(n,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:s,getErrorMessage:u,sendUsage:h,sendReasoning:w})})}pipeTextStreamToResponse(e,t){IE({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:TE(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){let t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?F0(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning}))}toDataStreamResponse({headers:e,status:t,statusText:r,data:n,getErrorMessage:s,sendUsage:u,sendReasoning:h}={}){return new Response(this.toDataStream({data:n,getErrorMessage:s,sendUsage:u,sendReasoning:h}),{status:t,statusText:r,headers:dy(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:dy(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}};var SA="AI_NoSuchProviderError",wA=`vercel.ai.error.${SA}`,bA=Symbol.for(wA),EA;EA=bA;var TA={};M0(TA,{mergeIntoDataStream:()=>DA,toDataStream:()=>IA,toDataStreamResponse:()=>NA});function ST(e={}){let t=new TextEncoder,r="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(n,s){s.enqueue(t.encode(n)),r+=n,e.onToken&&await e.onToken(n),e.onText&&typeof n=="string"&&await e.onText(n)},async flush(){e.onCompletion&&await e.onCompletion(r),e.onFinal&&await e.onFinal(r)}})}function U0(e,t){return e.pipeThrough(new TransformStream({transform:async(r,n)=>{var s;if(typeof r=="string"){n.enqueue(r);return}if("event"in r){r.event==="on_chat_model_stream"&&OE((s=r.data)==null?void 0:s.chunk,n);return}OE(r,n)}})).pipeThrough(ST(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,n)=>{n.enqueue(Tc("text",r))}}))}function IA(e,t){return U0(e,t).pipeThrough(new TextEncoderStream)}function NA(e,t){var r;let n=U0(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),s=t==null?void 0:t.data,u=t==null?void 0:t.init,h=s?F0(s.stream,n):n;return new Response(h,{status:(r=u==null?void 0:u.status)!=null?r:200,statusText:u==null?void 0:u.statusText,headers:dy(u==null?void 0:u.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function DA(e,t){t.dataStream.merge(U0(e,t.callbacks))}function OE(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{let r=e.content;for(let n of r)n.type==="text"&&t.enqueue(n.text)}}var CA={};M0(CA,{mergeIntoDataStream:()=>AA,toDataStream:()=>xA,toDataStreamResponse:()=>PA});function j0(e,t){let r=RA();return Ww(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(n,s){s.enqueue(r(n.delta))}})).pipeThrough(ST(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,s)=>{s.enqueue(Tc("text",n))}}))}function xA(e,t){return j0(e,t).pipeThrough(new TextEncoderStream)}function PA(e,t={}){var r;let{init:n,data:s,callbacks:u}=t,h=j0(e,u).pipeThrough(new TextEncoderStream),w=s?F0(s.stream,h):h;return new Response(w,{status:(r=n==null?void 0:n.status)!=null?r:200,statusText:n==null?void 0:n.statusText,headers:dy(n==null?void 0:n.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function AA(e,t){t.dataStream.merge(j0(e,t.callbacks))}function RA(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}var fj=15*1e3;var zh=require("vscode");var vy="experimental_providerMetadata";function wT(e){let t=e.filter(({role:h})=>h=="user"||h=="tool"),r=e.filter(({role:h})=>h=="assistant");function n(h,{content:w}){var T;return h+(Array.isArray(w)&&((T=w[w.length-1])!=null&&T[vy])?1:0)}function s(h){let{content:w}=h;Array.isArray(w)||(w=[{type:"text",text:w}]),w[w.length-1][vy]={anthropic:{cacheControl:{type:"ephemeral"}}},h.content=w}function u(h){let{content:w}=h;Array.isArray(w)&&w[w.length-1][vy]&&delete w[w.length-1][vy]}r.reduce(n,0)||s(r.pop()),s(t.pop()),t.slice(0,-2).forEach(u)}var Em=require("vscode");var ET=`
When responding, start straight with the answer, like you are writing a technical documentation. No confirmation, no small talk.
You are communicating with the user via tools, always try to use tool calling where appropriate.
The user does not see the tools and doesn't know what they are. Never mention tool names and never explain that you are using them.
Use question tool to collect all necessary information to better understand what the user wants if the request is ambiguous or missing something.
Use sourcecode and documents tools to understand the current project and tasks. 
Use editor tool to create and modify files.
Finish your responses with summary and followup tools.
`,OA=e=>w_`
    Files in the project root directory:
    <files>
        ${e.join(`
`)||"empty (no files here)"}
    </files>
`,kA=e=>w_`
    Top-level project directories: 
    <directories>
        ${e.join(`
`)||"empty (no sub-directories here)"}
    </directories>
`,TT=async()=>{if(!Em.workspace.workspaceFolders)return[""];let e=await Pg(""),t=e.filter(({isFile:n})=>n).map(({name:n})=>n),r=e.filter(({isDirectory:n})=>n).map(({name:n})=>n);return[kA(r),`

`,OA(t)]},IT=()=>w_`
    Files open in editor windows: 
    <files>
        ${F_().map(Pp).join(`
`)}
    </files>
`,NT=()=>{var e,t,r,n;return w_`
    Current file:
    <file>
        ${Pp(Em.Uri.file(((t=(e=Em.window.activeTextEditor)==null?void 0:e.document)==null?void 0:t.fileName)||""))}
    </file>
    ${`

`}
    Programming language of the current file: 
    <language>
        ${(n=(r=Em.window.activeTextEditor)==null?void 0:r.document)==null?void 0:n.languageId}
    </language>
`};function bT(){var t,r;let e=(t=Em.window.activeTextEditor)==null?void 0:t.selection;return e&&!e.isEmpty?(r=Em.window.activeTextEditor)==null?void 0:r.document.getText(e):""}var DT=()=>bT()&&w_`
    The selected text in the active editor is:
    <selection>
        ${bT()}
    </selection>
`;var CT={about:"Tell me about yourself",writing:"Describe your writing style",developer:"What is your experience as a software developer?",process:"Describe how you write code",environment:"What you have now in the editor workspace?"},MA=`
I am the AI assistant, working in VSCode editor.
I can access all content and tools in the current editor workspace.
I am proactively reading the code and configuration files to get detailed understanding of the environment.
`,LA=`
I'd describe my approach like this:

I'm direct and to the point. I don't waste time with pleasantries or unnecessary context. 
My goal is to provide accurate, practical solutions to coding problems as efficiently as possible.

I use short code snippets to illustrate my points. These snippets are always properly formatted 
and indented for readability. I explain the key parts of the code, but I assume a certain level of 
programming knowledge from my audience.

I often break down my answers into steps or bullet points for clarity. I'm not afraid to point out 
flaws in the original question or suggest better approaches if I see them.

I include relevant documentation links or references to support my answers, but I don't just link-drop 
without explanation. I summarize the key points and explain why they're relevant.

My tone is professional and sometimes a bit terse. I'm here to solve problems, not to make friends. 
However, I'm also not rude or dismissive. If a question is unclear, I ask for clarification rather than 
making assumptions.

I'm aware of best practices and potential pitfalls, so I often include warnings about edge cases or 
performance issues that might not be immediately obvious.
`,FA=`
I'm a seasoned software developer with a deep understanding of core programming principles and system design. 
My experience spans multiple domains, allowing me to approach problems from various angles.

I excel at breaking down complex requirements into manageable components and designing scalable, maintainable 
solutions. My code is clean, well-documented, and follows best practices for readability and efficiency.

I'm particularly strong in algorithmic thinking and optimization. I can analyze performance bottlenecks 
and implement effective solutions, whether it's improving time complexity or reducing resource usage.

I have a solid grasp of software architecture patterns and can adapt them to fit project needs. 
I'm comfortable designing and implementing APIs, working with databases, and integrating various system components.

Testing is integral to my development process. I write comprehensive unit tests and understand 
the value of integration and end-to-end testing in ensuring robust, reliable software.

I stay current with industry trends and continuously refine my skills. However, I'm pragmatic in my approach, 
focusing on proven technologies that add real value rather than chasing every new trend.

Debugging and troubleshooting are areas where I shine. I can quickly isolate issues in complex systems 
and implement effective fixes.

Lastly, I'm a strong communicator. I can explain technical concepts clearly to both technical 
and non-technical stakeholders, facilitating better collaboration across teams.
`,UA=`
When designing and building complex code, my thought process typically follows these steps:

I start by thoroughly analyzing the problem domain. I break down the requirements, 
identifying the core functionalities and potential edge cases.

Next, I consider the overall architecture. I think about how different components will interact, 
data flow, and potential bottlenecks. I often sketch out high-level diagrams to visualize the system structure.

I evaluate trade-offs between different design patterns and approaches. I consider factors like scalability, 
maintainability, and performance. I try to anticipate future requirements to make the system extensible.

Before diving into implementation, I plan out the data structures and algorithms I'll use. 
I consider time and space complexity, thinking about how the solution will perform with larger datasets.

I break the problem down into smaller, manageable modules or functions. I define clear interfaces 
between these components, thinking about how they'll be tested in isolation.

As I start coding, I focus on creating a minimal viable implementation of each component. 
I write unit tests alongside the code, using test-driven development where appropriate.

I constantly refactor as I go, looking for opportunities to improve code clarity and efficiency. 
I'm always thinking about how another developer would read and understand my code.

For particularly complex parts, I often step back and reconsider my approach. Sometimes I'll implement 
a quick prototype to validate a concept before fully committing to it.

Throughout the process, I document my code and decisions. I write clear comments explaining the 'why' 
behind complex logic, not just the 'what'.

As the system comes together, I start thinking about integration testing and how different components interact. 
I look for potential race conditions or unexpected behaviors in the system as a whole.

Finally, I review the entire solution, considering aspects like error handling, logging, and monitoring. 
I think about how the system will behave in production and what tools will be needed to maintain it.

This process is iterative, and I'm always ready to revisit earlier decisions as new information or challenges arise. The goal is to create a robust, efficient, and maintainable solution that solves the problem at hand while being flexible enough to adapt to future needs.
`;async function xT(){let e=[],t=sh([await TT(),`

`,IT(),`

`,NT(),`

`,DT()]),r={about:MA,writing:LA,developer:FA,process:UA,environment:t};for(let n in CT)r[n]&&(e.push({role:"user",content:sh(CT[n])}),e.push({role:"assistant",content:sh(r[n])}));return e}var Fp=require("vscode");async function PT(e){let t=[];for(let{id:r,name:n,modelDescription:s,value:u}of e.references){let h=String(u);if(r!="vscode.implicit.viewport"){if(u instanceof Fp.Uri){let w=await Fp.workspace.fs.stat(u);if(w.type&Fp.FileType.File)h=(await Fp.workspace.openTextDocument(u)).getText();else if(w.type&Fp.FileType.Directory){let T=await Pg(Pp(u)),C=T.filter(({isFile:z})=>z).map(({path:z})=>z),F=T.filter(({isDirectory:z})=>z).map(({path:z})=>z);h=YA(F)+jA(C)}n=Pp(u)}else u instanceof Fp.Location&&(h=(await Fp.workspace.openTextDocument(u.uri)).getText(u.range),n+=" from "+Pp(u.uri));s&&(n+=` (${s})`),t.push({role:"user",content:`Read ${n}`}),t.push({role:"assistant",content:h})}}return t}var jA=e=>`
<files>
${e.join(`
`)||"empty (no files here)"}
</files>
`,YA=e=>`
<directories>
    ${e.join(`
`)||"empty (no sub-directories here)"}
</directories>
`;var C_=require("vscode");var{fs:AT}=C_.workspace,RT="sourcecode",$A=`
Read and analyze source code files in the project

Commands:
- /stat: checks if the specified path exists and returns basic information about it
- /read: returns the content of a file or directory at the given path
`,qA=k.object({command:k.enum(["stat","read"]).describe("Command"),path:k.string().describe("File or directory path")}),BA="Looking at the source files ...",zA=(e,t,r)=>`
Found ${e} directory containing ${t} sub-directories and ${r} files.
`,GA=(e,t)=>`
Found ${e} file (${t} lines).
`,HA=(e,t)=>`
<file_content path="${e}">
${t}
</file_content>
`;async function VA({command:e,path:t},{log:r,stream:n}){let s=t.split("/").pop();r.info(s,{command:e,event:`tool.${RT}.${e}`});let u=qn(t),h=null;try{h=await AT.stat(u)}catch{return e!=="stat"&&r.warn("[sourcecode] Path does not exist - "+s,{command:e}),"Error: Path does not exist - "+t}if(h.type&C_.FileType.Directory)return await KA(e,t,u);e!=="stat"&&n.reference(gl(u));let w=await Mf(u),T=w.split(`
`),C=GA(t,T.length);return e=="read"&&(C+=HA(t,w)),C}async function KA(e,t,r){let n=[],s=[];for(let[h,w]of await AT.readDirectory(r))w&C_.FileType.File?s.push(h):w&C_.FileType.Directory&&n.push(h+"/");let u=zA(t,n.length,s.length);return e=="read"&&(u+=`
`+n.concat(s).join("/n")),u}var OT={name:RT,description:$A,parameters:qA,execute:VA,progress:BA};var x_=require("vscode");var{fs:kT}=x_.workspace,MT="documents",WA=`
Read task-related documentation files

Commands:
- /stat: checks if the specified documentation path exists and returns basic information about it
- /read: returns the content of a documentation file or directory at the given path
`,JA=k.object({command:k.enum(["stat","read"]).describe("Command"),path:k.string().describe("File or directory path")}),ZA="Looking at the available documents ...",XA=(e,t,r)=>`
Found ${e} directory containing ${t} sub-directories and ${r} files.
`,QA=(e,t)=>`
Found ${e} file (${t} lines).
`,eR=(e,t)=>`
<file_content path="${e}">
${t}
</file_content>
`;async function tR({command:e,path:t},{log:r}){let n=t.split("/").pop(),s=qn(t),u=null;r.info(n,{command:e,event:`tool.${MT}.${e}`});try{u=await kT.stat(s)}catch{return e!=="stat"&&r.warn("[documents] Path does not exist - "+n,{command:e}),"Error: Path does not exist - "+t}if(u.type&x_.FileType.Directory)return await rR(e,t,s);let h=await Mf(s),w=h.split(`
`),T=QA(t,w.length);return e=="read"&&(T+=eR(t,h)),T}async function rR(e,t,r){let n=[],s=[];for(let[h,w]of await kT.readDirectory(r))w&x_.FileType.File?s.push(h):w&x_.FileType.Directory&&n.push(h+"/");let u=XA(t,n.length,s.length);return e=="read"&&(u+=`
`+n.concat(s).join("/n")),u}var LT={name:MT,description:WA,parameters:JA,execute:tR,progress:ZA};var my=require("vscode");var Bh=require("vscode");var fo=require("vscode");async function FT(e,t){var C,F,z;let r=e.edits.find(ee=>ee.id==t);if(!r)return;let n=new fo.WorkspaceEdit,s=gl(qn(r.path));try{await fo.workspace.fs.stat(s)}catch{s=s.with({scheme:"untitled"})}let u=await fo.workspace.openTextDocument(s),h=u.getText().replace(/\r\n/g,`
`),w=h==r.after.replace(/\r\n/g,`
`)?r.before:r.after,T=new fo.Range(new fo.Position(0,0),new fo.Position(u.lineCount,0));n.replace(s,T,w),await fo.workspace.applyEdit(n),((z=(F=(C=fo.window.activeTextEditor)==null?void 0:C.document)==null?void 0:F.uri)==null?void 0:z.path)!=s.path&&await fo.window.showTextDocument(u),nR(r.search)}function nR(e){var T;let t=fo.window.activeTextEditor,r=t==null?void 0:t.document,n=(T=r==null?void 0:r.getText())==null?void 0:T.replace(/\r\n/g,`
`);if(!e||!t||!r)return;let s=n.indexOf(e);if(s==-1)return;let u=n.slice(0,s).split(`
`).length-1,h=e.split(`
`).length,w=new fo.Position(u,0);t.selection=new fo.Selection(w,w),t.revealRange(new fo.Range(w,new fo.Position(u+h,0)))}function UT(e,t,r,n,s,u,h){let{stream:w,shared:T}=e;if(u.startsWith(".multicoder"))return aR(e,w,s,u);let C=new Bh.MarkdownString(`

`),F=e.id,z=encodeURIComponent(JSON.stringify([u,r,F])),ee=`command:multicoder.diffView?${z}`,pe=ve=>`<sub><span class="codicon codicon-${ve}" style="color:var(--vscode-textLink-foreground);"></span></sub>`;C.supportThemeIcons=!0,C.isTrusted={enabledCommands:["multicoder.diffView"]},C.supportHtml=!0,C.appendMarkdown(`[${pe("diff-single")} ${n} (${u})](${ee} 'Open Diff')`),C.appendCodeblock(s,h),w.markdown(C);let ce=t=="create"?"Create":"Apply",re=t=="create"?"create file":"apply changes";w.button({title:ce,command:"multicoder.action",arguments:[Q],tooltip:`Click to ${re}, click again to revert`});function Q(){let ve=u.split("/").pop();e.log.info(ve,{event:"action."+ce.toLowerCase()}),FT(T,r)}}function aR(e,t,r,n){r=r.replace(/^#/gm,"##");let s=new Bh.MarkdownString(`

`);s.supportHtml=!0,s.appendMarkdown(r),t.markdown(s),t.button({title:"Edit",command:"multicoder.action",arguments:[u],tooltip:"Click to edit the document"});async function u(){let h=qn(n),w=await Bh.workspace.openTextDocument(h),T=n.split("/").pop();Bh.window.showTextDocument(w),e.log.info(T,{event:"action.edit"})}}var YT="editor",iR=`
Create and modify source files or documents

Commands:
- /create: creates a new file with the specified content
- /insert: inserts new content before selection
- /append: adds new content after selection
- /replace: replaces selection with new content
- /update: updates the entire file

Usage:
- To add new content always use /insert or /append
- To change more than half of the file use /update
- To replace part of the file use /replace
- To delete part of the file, use /replace with empty content
- Split large edits into multiple small ones

Important:
- Selection must be unique within file, select 3 lines or more to avoid ambiguity
`,oR=`
Select exact lines including whitespace:
- For /create and /update: use empty string ("") 
- For /insert: at least 3 lines immediately following new content, no overlap
- For /append: at least 3 lines immediately preceding new content, no overlap
`,sR=k.object({command:k.enum(["create","insert","append","replace","update"]).describe("Command"),path:k.string().describe("File path"),select:k.string().describe(oR),content:k.string().describe("New content"),summary:k.string().describe("A very short (3-10 words) summary of this change")}),uR="Writing code ...";function cR(e,{command:t,path:r,summary:n}){if(e.code=="invalid_type"){let s=e.path[0];if(e.received=="undefined"){if(s=="command"&&String(n).startsWith("Create"))return{command:"create"};if(s=="command"&&String(n).startsWith("Update"))return{command:"update"};if(s=="select")return{select:""};if(s=="content")return{content:""};if(s=="summary")return{summary:`${t} ${r}`}}}}async function lR(e,t){let{path:r,command:n,select:s}=e,{shared:u}=t;if(u.phase&&!r.startsWith(".multicoder"))return"Error: cannot modify source code yet. At this point you should only work on task documents.";let{error:h}=await $T(e);if(s&&s.split(`
`).length<2&&n!="insert"&&(r.endsWith(".md")?h="Selection is too small, use the full section text":h="Selection is too small, provide at least 3-5 lines"),h)return"Tool error: "+h;let w=n=="create"?"created":"modified";return u.phase?`Document ${w}. Provide a very short summary using summary tool`:`File ${r} ${w} successfully.`}async function $T({path:e,command:t,select:r,content:n}){let s=qn(e),u=null,h=null,w=n;try{if(await my.workspace.fs.stat(s),t==="create")return{error:"File already exists: "+e}}catch{if(t!=="create")return{error:"File not found: "+e}}switch(t=="insert"&&n.endsWith(r)&&(n=n.replace(r,"")),t=="update"&&r&&(r=""),t){case"insert":case"append":case"replace":case"update":if(u=await my.workspace.openTextDocument(s),h=await Mf(s),w=pR(h,r,n,u.eol,t),typeof w=="object")return w}return{document:u,before:h,after:w}}async function fR(e,t,r){let{path:n,summary:s,command:u,select:h,content:w}=e,{log:T,shared:C}=t,F=qn(n),z=n.split("/").pop();if(C.phase&&!n.startsWith(".multicoder")){T.warn(`[workflow] Code not allowed: ${s}`,{filename:z,command:u,summary:s});return}if(r.startsWith("Error: ")||r.startsWith("Tool error: "))return;let{document:ee,before:pe,after:ce,error:re}=await $T(e);if(re)return;let Q=Ze=>Ze?Ze.split(`
`).length:0,ve=Q(h),Pe=Q(w);T.info(s,{filename:z,command:u,selectedLines:ve,contentLines:Pe,event:`tool.${YT}.${u}`});try{await xg(F,ce)}catch(Ze){throw T.warn("Cannot write file - "+Ze.message,{filename:z,command:u,summary:s,...Ze}),Ze}ee=await my.workspace.openTextDocument(F);let We=ee.languageId,Ae=Cg();n.startsWith(".multicoder")||C.edits.push({id:Ae,summary:s,path:n,before:pe,after:ce,search:w}),UT(t,u,Ae,s,w||h,n,We)}function dR(e){return/^\s*\/\//.test(e)||/^\s*\/\*/.test(e)}function jT(e,t){let r=dR(e)?"":`
`;return e.endsWith(`
`)&&t.startsWith(`
`)?e+t:e.endsWith(`
`)||t.startsWith(`
`)?e+r+t:e+r+`
`+t}function pR(e,t,r,n,s){let u=e.replace(/\r\n/g,`
`);if(s=="update"&&u==r)return{error:"The new content is the same as the original file. No changes were made."};if(s=="replace"&&t==r)return{error:"The new content is the same as the selection. No changes were made."};t||(t=u),(u+`
`).endsWith(t)&&(u+=`
`),s=="insert"&&(r=jT(r,t)),s=="append"&&(r=jT(t,r));let h=u.replace(t,r);return u==h?{error:"The selected text cannot be found in the current file. Did you provide exact full consecutive lines including whitespace?"}:(n==2&&(h=h.replace(/\n/g,`\r
`)),h)}var qT={name:YT,description:iR,parameters:sR,execute:lR,finalize:fR,progress:uR,repair:cR};var BT=require("vscode");var{fs:tY}=BT.workspace,zT="filesystem",vR=`
Manage files and directories

Commands:
- /create: creates a new directory at the specified path
- /delete: deletes a file or directory at the specified path
`,mR=k.object({command:k.enum(["create","delete"]).describe("Command"),path:k.string().describe("File or directory path")}),hR="Working with files ...";async function _R({command:e,path:t},{log:r}){let n=t.split("/").pop(),s=qn(t);return r.info(n,{command:e,event:`tool.${zT}.${e}`}),"ok"}var GT={name:zT,description:vR,parameters:mR,execute:_R,progress:hR};var HT="question",gR=`
Ask a single focused question to collect missing information from the user.

Purpose:
- Gather specific information needed to proceed with a task
- Resolve ambiguity in user requests
- Guide user through decisions with clear options

Usage guidelines:
- Collect all necessary information step-by-step, use this tool up to 10 times if needed
- Limit choices to 3-7 options for optimal readability
- Avoid open-ended questions - provide concrete choices
- Always provide most appropriate and useful default value

Examples:
- Yes/No decisions: "Should this function handle null values?"
- Multiple choice: "Which HTTP method should this endpoint use?"
- Technology selection: "Which database type best fits these requirements?"
`,yR="The main question text to display to the user. Should be clear, specific and end with question mark.",SR="Additional explanation, background information, or guidance to help user make an informed choice.",wR="List of possible answers the user can select from. Each choice should be distinct and meaningful.",bR="When true, user can select multiple choices. When false, only single choice is allowed.",ER="Pre-selected choice(s) shown initially. Must be one of the provided choices or comma-separated list.",TR=k.object({text:k.string().describe(yR),context:k.string().max(2e3).describe(SR),choices:k.array(k.string()).describe(wR),allowMultiple:k.boolean().describe(bR),defaultValue:k.string().describe(ER)}),IR="Preparing questions ...";function NR(e,{choices:t}){if(e.code=="invalid_type"){let r=e.path[0];if(e.received=="undefined"){if(r=="allowMultiple")return{allowMultiple:!1};if(r=="defaultValue"&&Array.isArray(t)&&t.length>0)return{defaultValue:t[0]}}}}var Y0=[];async function DR({text:e,context:t,choices:r,allowMultiple:n,defaultValue:s},u){let h=[],{log:w,stream:T,shared:C}=u,F=s||"No answer";for(w.info(e,{choices:r,info:t,allowMultiple:n,defaultValue:s,event:"tool."+HT});;){if(T.markdown(CR(e,t)),n&&h.length?T.markdown(xR(h)):T.markdown(`

(`+F+`)

`),C.auto)return F;let z=["auto","next"],ee=PR(r,h,n),pe=await Up(u,{commands:z,followups:ee});if({stream:T}=u,n){if(pe.command=="next"||!pe.prompt)return F=h.length?h.join(", "):F,Y0.push({question:e,answer:F}),F}else return F=pe.prompt||F,Y0.push({question:e,answer:F}),F;h.push(pe.prompt)}}var CR=(e,t)=>`

---
Q: **${e}**

${t}
`,xR=e=>`
${e.map(t=>`
- ${t}`)}
`;function PR(e,t,r){let n=[];return e.forEach(s=>{t.indexOf(s)==-1&&!/please/i.test(s)&&n.push({command:"",prompt:s})}),r&&n.push({command:"next",prompt:"",label:"\u25B7\xA0 next step (Enter)"}),n}var VT={name:HT,description:gR,parameters:TR,execute:DR,progress:IR,repair:NR,latest:Y0};var KT="list",AR=`
    Allows to present the information as a list
`,RR=k.object({header:k.string().describe("Item header"),content:k.string().describe("Item content")}),OR=k.object({title:k.string().describe("Title"),items:k.array(RR).describe("List items"),comments:k.string().describe("Comments")});function kR(e,t){if(e.code=="invalid_type"){let r=e.path[0];if(e.received=="undefined"&&r=="comments")return{comments:""}}}async function MR({title:e,items:t,comments:r},{log:n,stream:s}){return n.info(e,{event:"tool."+KT}),s.markdown(`

## `+e+`
`),t.forEach(({header:u,content:h})=>{s.markdown(`
### `+u+`
`),s.markdown(`
`+h+`
`)}),"ok"}var WT={name:KT,description:AR,parameters:OR,execute:MR,repair:kR};var $0="summary",LR=`
    Shows summary, explanations or walkthrough section at the end of the response or after each task step.
    Allows the user to see the progress of completing the task.
    Always use this tool at the end of each step or when the task is finished.
`,FR=`
    Using ${$0} tool reply with a short summary of what has been done for the current step or task.
`,UR=k.object({text:k.string().describe("Short walkthrough or summary of this step")}),jR=()=>({text:"Task completed"});async function YR({text:e},{log:t,stream:r}){return t.info(`${e.slice(0,60).replace(/\n/g," ")}...`,{summary:e,event:"tool."+$0}),r.markdown(`

`+e+`

`),"This is the end of the response. Use followup tool to suggest the next actions."}var JT={name:$0,description:LR,parameters:UR,execute:YR,retry:FR,fallback:jR};var q0="followups",$R=`
    Displays followup actions to the user at the end of the conversation turn.
`,qR=`
    Using ${q0} tool reply with a list of followup actions.
`,BR=k.object({actions:k.array(k.string()).describe("Short followup actions (5-10 words)")}),zR=()=>({actions:[]});function GR(e,{actions:t}){if(e.code=="invalid_type"){let r=e.path[0];if(e.received=="string"&&r=="actions")return{actions:String(t).split(`
`)}}}async function HR({actions:e},t){return t.log.info(`${e==null?void 0:e.length} options`,{actions:e,event:"tool."+q0}),t.followups=e.map(r=>({command:"",prompt:r})),"stop"}var ZT={name:q0,description:$R,parameters:BR,execute:HR,retry:qR,fallback:zR,repair:GR};var B0="evaluation",VR=`
    Reports the task evaluation results. Use this tool when requested to evaluate a task.

    Evaluate the task for 
    - clarity (ambiguity, incompleteness, imprecision),
    - complexity (functional scope, architectural scale, required skills level)
    - workload (workflow type, projected effort, budget estimate)

    Carefully choose the most appropriate level for each evaluated dimension.
`,KR=`
    Using ${B0} tool reply with an evaluation of this task for clarity, complexity and workload.
`,WR=k.number().describe(`
The ambiguity level:
    0 - n/a (not applicable)
    1 - very low
    2 - low
    3 - medium
    4 - high
    5 - very high

Ambiguity implies that something can be interpreted in multiple valid ways.
`),JR=k.number().describe(`
The incompleteness level:
    0 - n/a (not applicable)
    1 - very low
    2 - low
    3 - medium
    4 - high
    5 - very high

Incompleteness refers to missing information or parts.
`),ZR=k.number().describe(`
The imprecision level:
    0 - n/a (not applicable)
    1 - very low
    2 - low
    3 - medium
    4 - high
    5 - very high

Imprecision refers to lack of exactness or accuracy.
`),XR=k.number().describe(`
The functional scope level:
    0 - n/a (not applicable)
    1 - implementation details, simple bugfix, code formatting
    2 - user story, issue, enhancement, complex bugfix
    3 - product feature, architectural refactoring
    4 - epic, application, library, subsystem
    5 - full product, platform, framework
`),QR=k.number().describe(`
The architectural scale level:
    0 - n/a (not applicable)
    1 - code level (local scope): variable naming, control flow, error handling
    2 - component level (single module): classes, functions, state management, data structures
    3 - service level (multiple modules): APIs, database models, service integrations
    4 - application level (system-wide): application architecture, system design
    5 - enterprise level (cross-system): distributed systems, cloud infrastructure, scalability
`),eO=k.number().describe(`
The required software engineering skills level:
    0 - n/a (not applicable)
    1 - junior (1 year)
    2 - mid (1-3 years)
    3 - senior (3-5 years)
    4 - staff (5-10 years)
    5 - principal (10+) years
`),tO=k.number().describe(`
The applicable workflow type:
    0 - n/a (not applicable)
    1 - single commit
    2 - pull request
    3 - sprint/iteration
    4 - small project
    5 - large project
`),rO=k.number().describe(`
The projected effort level:
    0 - n/a (not applicable)
    1 - very small (minutes)
    2 - small (hours)
    3 - medium (days)
    4 - large (weeks)
    5 - very large (months)
`),nO=k.number().describe(`
The development budget estimate:
    0 - n/a (not applicable)
    1 - very low
    2 - $20-200
    3 - $200-2000
    4 - $2000-20000
    5 - above $20000
`),aO=k.string().describe("Suggestions how to improve the request"),iO=k.boolean().describe(`
    true if task requirements need further clarification or refinement
`),oO=k.boolean().describe(`
    true if solution is not trivial and will benefit from detailed design
`),sO=k.boolean().describe(`
    true to split the task into smaller, manageable steps
`),uO=k.object({ambiguity:WR,incompleteness:JR,imprecision:ZR,functionalScope:XR,architecturalScale:QR,skillsLevel:eO,workflowType:tO,projectedEffort:rO,budgetEstimate:nO,clarifyRequirements:iO,designSolution:oO,splitIntoParts:sO,suggestions:aO}),cO=()=>({ambiguity:1,incompleteness:1,imprecision:1,functionalScope:1,architecturalScale:1,skillsLevel:1,workflowType:1,projectedEffort:1,budgetEstimate:1,clarifyRequirements:!1,designSolution:!1,splitIntoParts:!1,suggestions:"ok"});function lO(e,{projectedEffort:t,budgetEstimate:r}){if(e.code=="invalid_type"){let n=e.path[0];if(e.received=="undefined"&&n=="workflowType"&&(t||r))return{workflowType:t||r}}}async function fO(e,{log:t}){let r=T=>T.toFixed(1),[n,s,u]=XT(e),h=`${r(n)} ${r(s)} ${r(u)} `,w=`${e.clarifyRequirements} ${e.designSolution} ${e.splitIntoParts}`;return t.info(h+w,{uncertainty:n,complexity:s,workload:u,...e,event:"tool."+B0}),"ok"}function XT(e){let t=(e.ambiguity+e.incompleteness+e.imprecision)/3,r=(e.architecturalScale+e.functionalScope+e.skillsLevel)/3,n=(e.projectedEffort+e.workflowType+e.budgetEstimate)/3;return[t,r,n]}var QT={name:B0,description:VR,parameters:uO,execute:fO,retry:KR,fallback:cO,repair:lO,compute:XT};var dO=[OT,LT,qT,GT,VT,WT,JT,ZT,QT],bs=Object.fromEntries(dO.map(e=>[e.name,pO(e)]));function pO(e){return{...e,async execute(t,r){return e.execute?e.execute(t,r.abortSignal.context):"ok"}}}function eI(e){try{return JSON.parse(e)}catch{return null}}function tI(e){return JSON.stringify(e)}function rI(e){async function t({error:r,toolCall:n}){if(qh.isInstance(r)){let s=r.toolName.split(".");if(s.length==2){let[u,h]=s,w=bs[u],T=eI(n.args);if(w){let C={...r,event:"repair.tool"};return e.log.warn(`Tool name: ${r.toolName}`,C),"command"in w.parameters.shape&&T&&!T.command?(T.command=h,{...n,toolName:u,args:tI(T)}):{...n,toolName:u}}}return null}if(D_.isInstance(r)){let s=r.toolName,u=eI(r.toolArgs),h=r.cause,w=[];if(u&&mm.isInstance(h)){let T=h.cause;if(T instanceof wc){for(let F of T.issues){let z=bs[s];if(z!=null&&z.repair){let ee=z.repair(F,u);if(typeof ee=="object")Object.assign(u,ee);else return null}else return null;w.push(F.path.join("."))}let C={...r,event:"repair.args"};return e.log.warn(`Tool arguments: ${r.toolName}.${w.join(", ")}`,C),{...n,args:tI(u)}}}return null}return null}return t}var vO=`
<table><tr><td>
    <span class="codicon codicon-run-all" style="color:var(--vscode-textLink-foreground);"></span>
</td><td>
    <span  style="color:var(--vscode-textLink-foreground);">Running in automatic mode. Press the stop button to switch</span>
</td></tr></table>
`;async function aI(e,t){let{log:r,stream:n,shared:s,request:u,messages:h}=e,w="chat.next";if(h.length||(w="chat.start",e.resume=null,h.push(...await xT())),s.edits||(s.edits=[],s.phase="",QS()),s.auto&&(u.command=="resume"?n.markdown(`

Resuming iterrupted task

`):e.resume=null),s.auto=u.command=="auto",s.auto){let z=new zh.MarkdownString("");z.supportHtml=!0,z.supportThemeIcons=!0,z.appendMarkdown(vO),e.stream.markdown(z)}e.interrupted=null,e.token.onCancellationRequested(async z=>{if(r.warn("Interrupted",{event:"chat.stop"}),e.interrupted=Up(e,{}),s.auto){let ee=e.interrupted,pe=await zh.window.showInformationMessage("Stopped automatic mode task","Resume interactive","Stop");pe&&pe.startsWith("Resume")&&(e.interrupted===ee?zh.commands.executeCommand("workbench.action.chat.open","@multicoder /resume"):await zh.window.showInformationMessage("Chat window already in use"))}});let T=u.references.map(({id:z,name:ee})=>ee+" "+z).join(`
`),C=u.toolReferences.map(({name:z})=>z).join(`
`),F=(u.command?"/"+u.command+" ":"")+u.prompt;return r.info(F,{event:w,command:u.command,references:T,toolrefs:C}),h.push(...await PT(u)),new Promise((z,ee)=>{let pe=0,ce=re=>r.error(new Error(re));if(e.resolve=re=>pe++?ce("Resolve closed promise"):z(re),e.reject=re=>pe++?ce("Reject closed promise"):ee(re),e.resume){let re=e.resume;return e.resume=null,re(e.request)}Promise.resolve(t(e)).then(re=>e.resolve(re)).catch(re=>e.reject(re))})}function Up(e,t){return new Promise(r=>{e.resume=r,e.resolve(t)})}async function z0(e,t,r=""){let{log:n,stream:s,shared:u,model:h,messages:w}=e;Tm(e,t);let T=0,C=0,F=0,z=0,ee=0,pe=.2,ce=pe,re=ce;function Q(ve,Pe,We={}){s.markdown(""),s.progress(`Retrying (${Pe}): ${ve}`),re=ce+.2*Pe,n.warn(ve,{...We,count:Pe,temperature:re,event:"retry."+Pe})}for(;;){wT(w),await e.interrupted;let ve=new AbortController,Pe=ve.signal;Pe.context=e;let We=await yT({model:h,system:ET,messages:w,tools:bs,temperature:re,maxTokens:8192,maxSteps:1,abortSignal:Pe,experimental_toolCallStreaming:!0,experimental_repairToolCall:rI(e)}),Ae=!1;for await(let it of We.fullStream){if(e.token.isCancellationRequested)break;switch(it.type){case"text-delta":e.stream.markdown(it.textDelta);break;case"tool-call-streaming-start":let Gt=bs[it.toolName].progress;Gt&&(e.stream.markdown(""),e.stream.progress(Gt));break;case"error":if(qh.isInstance(it.error)&&++T<=5){Ae=!0;let Pr=`Unknown tool ${it.error.toolName}`;Q(Pr,T,it.error);break}if(D_.isInstance(it.error)&&++T<=5){Ae=!0;let Pr=`Invalid arguments for tool ${it.error.toolName}`;Q(Pr,T,it.error);break}if(L0.isInstance(it.error)&&++T<=5){Ae=!0,Q("Tool call repair failed",T,it.error);break}let{event:xr,count:oa,message:ei}=it.error;if(xr=="retry"){Q(ei,oa,it.error),re=ce;break}throw it.error}}if(e.interrupted){await e.interrupted;continue}let Ze=await We.response,Tt=await We.toolCalls,Dt=await We.toolResults;if(Ae)continue;T=0;let Lt="";for(let it of Dt)it.result.startsWith("Tool error: ")&&(Lt=it.result.slice(12));if(Lt)if(++C<3){Q(Lt,C);continue}else if(++F<3)Q("Tool execution error",F),ce=pe+.2*F;else throw new Error(Lt);else F=0,ce=pe;if(C=0,Ze.messages.length==1){let{role:it,content:Gt}=Ze.messages[0];if(it=="assistant"&&Array.isArray(Gt)&&Gt.length==1){let xr=Gt[0];if(xr.type=="text"&&xr.text===""&&++z<=5){Q("Empty response",z),await nI(5*z);continue}}}z=0,re=ce;for(let{toolName:it,args:Gt,result:xr}of Dt){let oa=bs[it];oa!=null&&oa.finalize&&await oa.finalize(Gt,e,xr)}if(w.push(...Ze.messages),Tt.length){ee=0;for(let it of Tt)if(it.toolName==r)return it.args}else if(r){let it=bs[r];if(++ee>3){if(it.fallback)return it.fallback();throw new Error(`Unable to call ${r} tool`)}Q("Unexpected stop",ee,{name:r}),await nI(5*ee),w.push({role:"user",content:it.retry||`Reply using ${r} tool`})}else return}}async function Es(e,t,r,n=""){return n&&(e.stream.markdown(""),e.stream.progress(n)),z0(e,r,t.name)}function Fu(e){let t=e.messages.concat();return{restore(){e.messages.length=0,e.messages.push(...t)}}}function Tm(e,t,r=""){let n=e.messages;if(!t&&r){n.push({role:"assistant",content:r});return}let s=n.pop();if(s.role=="system"||s.role=="assistant")n.push(s,{role:"user",content:t||"?"});else if(s.role=="tool"){let u=s.content.slice();u.push({...u.pop(),result:t}),n.push({role:"tool",content:u})}else if(s.role=="user"){let{content:u}=s;u=Array.isArray(u)?u.slice():[{type:"text",text:u}],u.push({type:"text",text:t}),n.push({role:"user",content:u})}else throw new Error("Unsupported prompt structure");r&&n.push({role:"assistant",content:r})}async function nI(e){return new Promise(t=>setTimeout(t,e*1e3))}var by=require("vscode");var{evaluation:G0}=bs,mO=()=>`
    Evaluate the task and reply using ${G0.name} tool, taking into account the included documents (if any)
`,iI=G0.compute;async function oI(e){let t=Fu(e),r=await Es(e,G0,mO(),"Deciding next steps...");return t.restore(),r}var _y=require("vscode");var{editor:hO,question:_O,summary:hy,followups:uI}=bs,{fs:sI}=_y.workspace,gO=(e,t)=>`
    Use ${hO.name} tool to create requirements document in the ${e}/ directory.
    Clarify the request, removing any ambiguities or omissions.
    Use ${_O.name} tool to obtain the missing information.
    For the existing project, include implied requirements derived from the project configuration and context.
    Focus strictly on the requirements - DO NOT try to design the solution, define data structures or write some code at this point.
    Adjust the content and structure according to the task complexity (should very short and simple for trivial tasks).
    Produce a minimal, but complete document, do not leave any open questions for the future.

    Also consider the suggestions below:
    <suggestions>
      ${t}
    </suggestions>

    Use a very dense, concise, minimalist writing style.
    Provide a short summary using ${hy.name} tool.
`,yO=(e,t)=>`Read the existing requirements document(s):
    <document-filenames>
      ${e}
    </document-filenames>

    Make the following changes in the document(s):
    <changes>
      ${t}
    </changes>

    Modify the document(s), then deliver a very short summary using ${hy.name} tool.
`,SO=()=>`
    Carefully review the requirements document to find any missing elements.
    Add or correct any significant items and remove anything that is not strictly necessary.
    Focus strictly on the requirements - DO NOT try to design the solution, define data structures or write some code at this point.
`,wO=()=>`
    Suggest possible high-level modifications which may make the requirements more clear and easy to understand. 
    For example, increase or decrease detalization, add/remove sections, split/merge sections etc.
    Offer them as followup actions using ${uI.name} tool.
    Never ever include any other actions, only modifications of the requirements.
`;async function cI(e,t,r){e.shared.phase="clarify";let n=Fu(e),s=new Set;for(let[u]of await sI.readDirectory(qn(t)))s.add(u);for(await Es(e,hy,gO(t,r),"Clarifying requirements...");!e.shared.auto;){let u=Fu(e),{actions:h}=await Es(e,uI,wO());u.restore();let w=["auto","improve","next"],T=h.map(z=>({command:"",prompt:z,label:z}));T.push({command:"improve",prompt:"",label:"\u2B6E\xA0 review and improve"}),T.push({command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"}),T.push({command:"next",prompt:"",label:"\u25B7\xA0 next step (Enter)"});let C=await Up(e,{commands:w,followups:T});if(n.restore(),C.command=="next"||C.command=="auto"||!C.prompt&&!C.command)break;let F=[];for(let[z,ee]of await sI.readDirectory(qn(t)))ee&_y.FileType.File&&!s.has(z)&&F.push(t+"/"+z);r=C.command=="improve"?SO():C.prompt,await Es(e,hy,yO(F,r),"Updating requirements...")}e.shared.phase=""}var yy=require("vscode");var{editor:bO,summary:gy,followups:fI}=bs,{fs:lI}=yy.workspace,EO=e=>`
    Use ${bO.name} tool to create solution design document(s) in the ${e}/ directory.
    Analyze the current project, do the research and design the solution.
    Your goal is to find the most simple solution, very easy to understand and maintain. 
    Only include the features which are explicitely required. Skip anything that can be added at a later stage.
    Adjust the content and structure of the spec according to the task complexity (should very short and simple for trivial tasks).
    Apply a very dense, concise, minimalist writing style.
    Provide a short specification summary using ${gy.name} tool.
`,TO=(e,t)=>`Read the existing design document(s):
    <document-filenames>
      ${e}
    </document-filenames>

    Make the following changes in the document(s):
    <changes>
      ${t}
    </changes>

    Modify the document(s), then deliver a very short summary using ${gy.name} tool.
`,IO=()=>`
    Carefully review the design document(s) to find any missing elements.
    Add or correct any significant items and remove anything that is not strictly necessary.
    Focus strictly on the solution design - DO NOT try to write code, DO NOT make step-by-step plan at this point.
`,NO=()=>`
    Suggest possible high-level modifications which may make the solution design more clear and easy to understand. 
    For example, increase or decrease detalization, add/remove sections, split/merge sections etc.
    Offer them as followup actions using ${fI.name} tool.
    Never ever include any other actions, only modifications of the solution design.
`;async function dI(e,t,r){e.shared.phase="design";let n=Fu(e),s=new Set;for(let[u]of await lI.readDirectory(qn(t)))s.add(u);for(await Es(e,gy,EO(t),"Designing solution...");!e.shared.auto;){let u=Fu(e),{actions:h}=await Es(e,fI,NO());u.restore();let w=["auto","improve","next"],T=h.map(ee=>({command:"",prompt:ee,label:ee}));T.push({command:"improve",prompt:"",label:"\u2B6E\xA0 review and improve"}),T.push({command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"}),T.push({command:"next",prompt:"",label:"\u25B7\xA0 next step (Enter)"});let C=await Up(e,{commands:w,followups:T});if(n.restore(),C.command=="next"||C.command=="auto"||!C.prompt&&!C.command)break;let F=[];for(let[ee,pe]of await lI.readDirectory(qn(t)))pe&yy.FileType.File&&!s.has(ee)&&F.push(t+"/"+ee);let z=C.command=="improve"?IO():C.prompt;await Es(e,gy,TO(F,z),"Updating design...")}e.shared.phase=""}var Gh=require("vscode");var{list:Sy,followups:pI}=bs,DO=()=>`
    Split the task into smaller, more manageable steps and present them using the ${Sy.name} tool.
    The list should contain task steps. If the work is very small, use just one single step.
    Each step has a name (header) and a specification of the work to do in this step.
    Strictly follow the requirements and design documents if available.
    Take into account the changes made in the previous tasks.
    Carefully think through all steps and mentally verify the proposed implementation.
    Follow KISS, YAGNI and SOLID principles, focus on simplicity above all other things.
    Use a very dense, concise, minimalist writing style.
`,CO=(e,t)=>`Read the existing implementation plan:
    <document-filename>
      ${e}/implementation_plan.md
    </document-filename>

    Make the following changes in the plan:
    <changes>
      ${t}
    </changes>

    Modify the plan, then present it using the ${Sy.name} tool.
    The list should contain task steps. If the work is very small, use just one single step.
    Each step has a name (header) and a specification of the work to do in this step.
    Strictly follow the requirements and design documents if available.
    Take into account the changes made in the previous tasks.
    Carefully think through all steps and mentally verify the proposed implementation.
    Follow KISS, YAGNI and SOLID principles.
`,xO=()=>`
    Carefully analyse each section of the plan to identify any inconsistencies or logical errors. 
    Check for edge cases, cross-dependencies and anything, that can affect successful implementation.
`,PO=()=>`
    Suggest possible high-level modifications which may improve this implementation plan. 
    For example, increase or decrease detalization, add/remove sections, split/merge sections etc.
    Offer them as followup actions using ${pI.name} tool.
    Never ever include any other actions, only modifications of the implementation plan.
`,AO=({title:e,items:t})=>`# ${e}

${t.map(({header:r,content:n})=>`## ${r}

${n}

`).join("")}
`;function RO(e,t,r){r.stream.button({title:"Edit",command:"multicoder.action",arguments:[n],tooltip:"Click to edit the plan"});async function n(){let s=await Gh.workspace.openTextDocument(t);Gh.window.showTextDocument(s)}r.stream.markdown(`
`+e.comments+`
`)}async function OO(e,t,r){if(await Mf(r)==t)return;let s=await Gh.commands.executeCommand("vscode.executeDocumentSymbolProvider",r);if(!s||s.length===0)return;let u=await Gh.workspace.openTextDocument(r),h=s[0],w=h.name.replace(/^[#\s]+/,""),T=h.children.map(({name:C,range:F})=>({header:C.replace(/^[#\s]+/,""),content:u.getText(F).slice(C.length).trim()}));e.title=w,e.items=T}async function vI(e,t,r){e.shared.phase="plan";let n=Fu(e),s=await Es(e,Sy,DO(),"Planning..."),u=qn(t+"/implementation_plan.md");for(;;){let h=AO(s);if(await xg(u,h),e.shared.auto)break;RO(s,u,e);let w=Fu(e),{actions:T}=await Es(e,pI,PO());w.restore();let C=["auto","improve","next"],F=T.map(ee=>({command:"",prompt:ee,label:ee}));F.push({command:"improve",prompt:"",label:"\u2B6E\xA0 review and improve"}),F.push({command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"}),F.push({command:"next",prompt:"",label:"\u25B7\xA0 next step (Enter)"});let z=await Up(e,{commands:C,followups:F});if(n.restore(),z.command=="next"||z.command=="auto"||!z.prompt&&!z.command){await OO(s,h,u);break}r=z.command=="improve"?xO():z.prompt,s=await Es(e,Sy,CO(t,r),"Updating planning...")}return e.shared.phase="",s}var jf=require("vscode");function Im(){}Im.prototype={diff:function(t,r){var n,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=s.callback;typeof s=="function"&&(u=s,s={}),this.options=s;var h=this;function w(Ae){return u?(setTimeout(function(){u(void 0,Ae)},0),!0):Ae}t=this.castInput(t),r=this.castInput(r),t=this.removeEmpty(this.tokenize(t)),r=this.removeEmpty(this.tokenize(r));var T=r.length,C=t.length,F=1,z=T+C;s.maxEditLength&&(z=Math.min(z,s.maxEditLength));var ee=(n=s.timeout)!==null&&n!==void 0?n:1/0,pe=Date.now()+ee,ce=[{oldPos:-1,lastComponent:void 0}],re=this.extractCommon(ce[0],r,t,0);if(ce[0].oldPos+1>=C&&re+1>=T)return w([{value:this.join(r),count:r.length}]);var Q=-1/0,ve=1/0;function Pe(){for(var Ae=Math.max(Q,-F);Ae<=Math.min(ve,F);Ae+=2){var Ze=void 0,Tt=ce[Ae-1],Dt=ce[Ae+1];Tt&&(ce[Ae-1]=void 0);var Lt=!1;if(Dt){var it=Dt.oldPos-Ae;Lt=Dt&&0<=it&&it<T}var Gt=Tt&&Tt.oldPos+1<C;if(!Lt&&!Gt){ce[Ae]=void 0;continue}if(!Gt||Lt&&Tt.oldPos+1<Dt.oldPos?Ze=h.addToPath(Dt,!0,void 0,0):Ze=h.addToPath(Tt,void 0,!0,1),re=h.extractCommon(Ze,r,t,Ae),Ze.oldPos+1>=C&&re+1>=T)return w(kO(h,Ze.lastComponent,r,t,h.useLongestToken));ce[Ae]=Ze,Ze.oldPos+1>=C&&(ve=Math.min(ve,Ae-1)),re+1>=T&&(Q=Math.max(Q,Ae+1))}F++}if(u)(function Ae(){setTimeout(function(){if(F>z||Date.now()>pe)return u();Pe()||Ae()},0)})();else for(;F<=z&&Date.now()<=pe;){var We=Pe();if(We)return We}},addToPath:function(t,r,n,s){var u=t.lastComponent;return u&&u.added===r&&u.removed===n?{oldPos:t.oldPos+s,lastComponent:{count:u.count+1,added:r,removed:n,previousComponent:u.previousComponent}}:{oldPos:t.oldPos+s,lastComponent:{count:1,added:r,removed:n,previousComponent:u}}},extractCommon:function(t,r,n,s){for(var u=r.length,h=n.length,w=t.oldPos,T=w-s,C=0;T+1<u&&w+1<h&&this.equals(r[T+1],n[w+1]);)T++,w++,C++;return C&&(t.lastComponent={count:C,previousComponent:t.lastComponent}),t.oldPos=w,T},equals:function(t,r){return this.options.comparator?this.options.comparator(t,r):t===r||this.options.ignoreCase&&t.toLowerCase()===r.toLowerCase()},removeEmpty:function(t){for(var r=[],n=0;n<t.length;n++)t[n]&&r.push(t[n]);return r},castInput:function(t){return t},tokenize:function(t){return t.split("")},join:function(t){return t.join("")}};function kO(e,t,r,n,s){for(var u=[],h;t;)u.push(t),h=t.previousComponent,delete t.previousComponent,t=h;u.reverse();for(var w=0,T=u.length,C=0,F=0;w<T;w++){var z=u[w];if(z.removed){if(z.value=e.join(n.slice(F,F+z.count)),F+=z.count,w&&u[w-1].added){var pe=u[w-1];u[w-1]=u[w],u[w]=pe}}else{if(!z.added&&s){var ee=r.slice(C,C+z.count);ee=ee.map(function(re,Q){var ve=n[F+Q];return ve.length>re.length?ve:re}),z.value=e.join(ee)}else z.value=e.join(r.slice(C,C+z.count));C+=z.count,z.added||(F+=z.count)}}var ce=u[T-1];return T>1&&typeof ce.value=="string"&&(ce.added||ce.removed)&&e.equals("",ce.value)&&(u[T-2].value+=ce.value,u.pop()),u}var r$=new Im;var mI=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,hI=/\S/,_I=new Im;_I.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!hI.test(e)&&!hI.test(t)};_I.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),r=0;r<t.length-1;r++)!t[r+1]&&t[r+2]&&mI.test(t[r])&&mI.test(t[r+2])&&(t[r]+=t[r+2],t.splice(r+1,2),r--);return t};var K0=new Im;K0.tokenize=function(e){this.options.stripTrailingCr&&(e=e.replace(/\r\n/g,`
`));var t=[],r=e.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var n=0;n<r.length;n++){var s=r[n];n%2&&!this.options.newlineIsToken?t[t.length-1]+=s:(this.options.ignoreWhitespace&&(s=s.trim()),t.push(s))}return t};function gI(e,t,r){return K0.diff(e,t,r)}var MO=new Im;MO.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var LO=new Im;LO.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function wy(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wy=function(t){return typeof t}:wy=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wy(e)}var FO=Object.prototype.toString,hg=new Im;hg.useLongestToken=!0;hg.tokenize=K0.tokenize;hg.castInput=function(e){var t=this.options,r=t.undefinedReplacement,n=t.stringifyReplacer,s=n===void 0?function(u,h){return typeof h>"u"?r:h}:n;return typeof e=="string"?e:JSON.stringify(H0(e,null,null,s),s,"  ")};hg.equals=function(e,t){return Im.prototype.equals.call(hg,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function H0(e,t,r,n,s){t=t||[],r=r||[],n&&(e=n(s,e));var u;for(u=0;u<t.length;u+=1)if(t[u]===e)return r[u];var h;if(FO.call(e)==="[object Array]"){for(t.push(e),h=new Array(e.length),r.push(h),u=0;u<e.length;u+=1)h[u]=H0(e[u],t,r,n,s);return t.pop(),r.pop(),h}if(e&&e.toJSON&&(e=e.toJSON()),wy(e)==="object"&&e!==null){t.push(e),h={},r.push(h);var w=[],T;for(T in e)e.hasOwnProperty(T)&&w.push(T);for(w.sort(),u=0;u<w.length;u+=1)T=w[u],h[T]=H0(e[T],t,r,n,T);t.pop(),r.pop()}else h=e;return h}var V0=new Im;V0.tokenize=function(e){return e.slice()};V0.join=V0.removeEmpty=function(e){return e};var{summary:_g}=bs,UO=()=>`
    Implement the task, then deliver the summary using ${_g.name} tool.
`,jO=e=>`
    We have now implemented all the steps of the plan:
    <implemented>
    ${e.title}
    </implemented>
    Deliver the summary of this work using ${_g.name} tool.
`,YO=(e,t,r,n)=>`Step ${e+1} (${t}) is now completed.

${r}

${n.length?"Completed changes:":""}
${n.map(({summary:s,path:u})=>`- ${s} ( ${u} )`).join(`
`)}
`,$O=(e,t)=>`We will now work on the step ${t+1}:

## ${e.header}

${e.content}
`,qO=(e,t,r)=>`
<table><tr><th> $(list-tree) ${e} (${t+1}/${r})</th></tr></table>
`;async function W0(e,t,r,n,s){let u=null,h=e.shared.edits.length;if(!r||r.items.length==1)u=await Es(e,_g,UO());else{Tm(e,"",`Do you want me to work on ${r.title}?`);for(let w=0;w<r.items.length;w++){let T=Fu(e),C=r.items[w],F=C.header.replace(/^[\d\.\s]+/,""),z=e.shared.edits.length,ee=new jf.MarkdownString("");ee.supportHtml=!0,ee.supportThemeIcons=!0,ee.appendMarkdown(qO(F,w,r.items.length)),e.stream.markdown(ee),Tm(e,$O(C,w));let pe=await J0(e,n+1,s+"/"+(w+1),F);T.restore();let ce=e.shared.edits.slice(z);Tm(e,YO(w,F,pe.text,ce))}u=await Es(e,_g,jO(r))}if(e.shared.auto&&n)return u;for(;;){let w=e.shared.edits.slice(h);if(w.length>1&&await BO(e,w,t||(r==null?void 0:r.title)||"Task completed"),!n)return u;let F=await Up(e,{commands:["auto","next"],followups:[{command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"},{command:"next",prompt:"",label:"\u25B7\xA0 next step (Enter)"}]});if(F.command=="next"||F.command=="auto")return u;h=e.shared.edits.length,await Es(e,_g,F.prompt)}}async function BO(e,t,r){let n=new jf.MarkdownString(`

`),s=(...z)=>`command:multicoder.diffView?${encodeURIComponent(JSON.stringify(z))}`,u=z=>`<span class="codicon codicon-${z}" style="color:var(--vscode-foreground);"></span>`;n.supportThemeIcons=!0,n.isTrusted={enabledCommands:["multicoder.diffView"]},n.supportHtml=!0,n.appendMarkdown(`<h3>${u("check")} ${r}</h3>

`),t.forEach(({summary:z,path:ee,id:pe})=>{n.appendMarkdown(`- [${z}](${s(ee,pe,e.id)} 'Open Diff')
`)}),n.appendMarkdown(`

`),e.stream.markdown(n),e.stream.button({title:"Apply All",command:"multicoder.action",arguments:[F],tooltip:"Shows confirmation panel (refactor preview)"});let h=new Set(t.map(({path:z})=>z)),w=F_(),T=new Map;async function C(z){try{return await Mf(z)}catch{return""}}for(let z of h.values()){let ee="",pe="",ce=qn(z),re=gl(ce);w.find(Q=>Q.path===re.path)?ee=(await jf.workspace.openTextDocument(re)).getText():ee=await C(re),pe=await C(ce),T.set(z,{before:ee,after:pe})}async function F(){let z=new jf.WorkspaceEdit;for(let ee of h.values()){let{before:pe,after:ce}=T.get(ee)||{},re=gl(qn(ee));pe||(re=re.with({scheme:"untitled"}));let Q=await jf.workspace.openTextDocument(re),ve=Q.getText(),Pe=ce;ve!==Pe&&zO(z,re,ve,Pe,!0)}await jf.workspace.applyEdit(z),e.log.info(r,{event:"action.all"})}}function zO(e,t,r,n,s=!1,u=""){let h=gI(r,n,{ignoreWhitespace:!1}),w=0,T={needsConfirmation:s,label:u};for(let C=0;C<h.length;C++){let F=h[C];if(F.removed){let z=new jf.Range(w,0,w+F.count,0),ee=h[++C];ee.added?e.replace(t,z,ee.value,T):(e.delete(t,z,T),w+=(ee==null?void 0:ee.count)||0)}else F.added&&(e.insert(t,new jf.Position(w,0),F.value,T),w-=F.count);w+=F.count}}var{fs:GO}=by.workspace,HO=".multicoder/task",VO=(e,t,r)=>`<document filename="${r}/${t}">
${e}
</document>
`;async function J0(e,t=0,r=HO,n=""){let s=Fu(e),u=0,h=0,w=null;for(;;){s.restore(),e.shared.phase="";for(let[F,z]of await GO.readDirectory(qn(r)))if(z&by.FileType.File){let ee=await Mf(qn(r+"/"+F));Tm(e,VO(ee,F,r))}if(w)return await W0(e,n,w,t,r);let T="implement",C="";switch(e.request.command){case"chat":return{};case"spec":T="clarify";break;case"design":T="design";break;case"plan":T="plan";break;default:let F=await oI(e),[z,ee,pe]=iI(F);if(C=F.suggestions,F.architecturalScale==0&&!t)return{};F.splitIntoParts&&(T="plan"),F.designSolution&&!h&&(T="design"),F.clarifyRequirements&&!u&&!h&&!t&&(T="clarify"),!h&&ee>2.5&&T!="clarify"&&(T="design"),pe>2&&T=="implement"&&(T="plan")}if(T=="clarify"){await cI(e,r,C),++u;continue}if(T=="design"){await dI(e,r,C),++h;continue}if(T=="plan"){w=await vI(e,r,C);continue}return await W0(e,n,null,t,r)}}var KO=e=>`We have a new request:
<request>
${e}
</request>
`;async function yI(e){let t=e.request.prompt,r=Fu(e);Tm(e,KO(t)),(await J0(e)).text?Tm(e,""," "):(r.restore(),await z0(e,t))}var wI=require("vscode"),WO=()=>`
Multicoder can work with LLM models provided by **GitHub Copilot** (default configuration) or 
send requests directly to the core provider APIs (**Anthropic**, **OpenAI**).

If you have your own API key and want to use it instead of the Github models, select 'Core Providers' in the Model Provider dropdown (settings panel)
and set your API key(s) using the buttons below.

`;async function SI(e,t){var n;let r=await e.ext.secrets.get(t)||((n=process==null?void 0:process.env)==null?void 0:n[t]);return r&&r.slice(0,12)+"..."+r.slice(-4)}async function Z0(e){let{log:t,stream:r}=e;wI.commands.executeCommand("workbench.action.openSettings","@ext:multicoder.multicoder"),t.info("options",{event:"options"}),r.markdown(WO());let n=await SI(e,"ANTHROPIC_API_KEY");r.markdown(`Anthropic API key: ${n}`),r.button({command:"multicoder.storeApiKey",title:"Set Anthropic key",arguments:["ANTHROPIC_API_KEY","Anthropic API key"]}),r.markdown(`

`);let s=await SI(e,"OPENAI_API_KEY");r.markdown(`OpenAI API key: ${s}`),r.button({command:"multicoder.storeApiKey",title:"Set OpenAI key",arguments:["OPENAI_API_KEY","OpenAI API key"]})}var bI,EI;async function JO(e){var z,ee;let{request:t,ext:r}=e,n=t.model.id,s=Ov.workspace.getConfiguration("multicoder"),u=s.get("modelProvider");if(n==bI&&u==EI&&e.model)return;bI=n,EI=u;let h=t.model.family;if(h.startsWith("o1")&&(h="gpt-4o"),u=="default"&&(u="copilot"),u=="copilot"){e.model=v0({id:h,provider:"copilot",apiKey:""});return}if(u=="auto"&&(u=(z=h0.find(pe=>pe.family==h))==null?void 0:z.provider,!u))throw new Error("Cannot find model: "+h);let w=Ib.find(pe=>pe.id==u),T=h0.find(pe=>pe.provider==u&&pe.family==h),{envKeyName:C}=w,F=await r.secrets.get(C)||((ee=process==null?void 0:process.env)==null?void 0:ee[C]);if(!F){await Z0(e);return}e.model=v0({...T,apiKey:F})}function ZO({history:e}){for(let t=e.length-1;t>=0;t--){let r=e[t];if(r instanceof Ov.ChatResponseTurn){let{id:n,messages:s}=r.result.metadata||{};if(n)return[n,s]}}return[]}function TI(e){let{ext:t,log:r,recent:n}=e,s=Ov.chat.createChatParticipant("multicoder",async(F,z,ee,pe)=>{let[ce=Cg(),re]=ZO(z),Q=n.get(ce);if(!re&&z.history.length){let ve=z.history[0];Q=n.get(ve.prompt)}re=re||[],Q||(Q={id:ce,messages:re,shared:{},...e,request:{},chat:{},stream:{}},Q.log={...e.log,context:Q},n.set(ce,Q)),ce=Q.id,Object.assign(Q,{token:pe}),Object.assign(Q.request,F),Object.assign(Q.chat,z),Object.assign(Q.stream,ee),Q.followups=[],z.history.length||n.set(F.prompt,Q),C(Q.request);try{if(await JO(Q),!Q.model)return;if(F.command=="options")return await Z0(Q),{metadata:{id:ce,messages:re}};let ve=await aI(Q,yI)||{};return ve.id=ce,ve.messages=Q.messages,ve.followups??(ve.followups=Q.followups),{metadata:ve}}catch(ve){throw r.error(ve),Q.model=null,ve}});s.iconPath=Ov.Uri.joinPath(t.extensionUri,"resources","multicoder.png"),s.onDidReceiveFeedback(({kind:F})=>{r.info(F?"Good":"Bad",{event:"feedback"})});let u=t.extension.packageJSON.contributes.chatParticipants[0].commands,h=u.filter(({when:F})=>F==null?void 0:F.startsWith("!")).map(({name:F})=>F),w=[...h,"resume"];s.followupProvider={provideFollowups(F){var z;return T(F.metadata?F.metadata.commands:w),((z=F.metadata)==null?void 0:z.followups)||[]}};function T(F){for(let{name:z,when:ee}of u){let pe=!!F&&F.includes(z)!=ee.startsWith("!");Ov.commands.executeCommand("setContext",ee.replace("!",""),pe)}}function C(F){!F.command&&u.find(({name:z})=>"/"+z==F.prompt)&&(r.warn("Command not processed: "+F.prompt),F.command=F.prompt.slice(1),F.prompt="")}}function XO(e){let t={ext:e,config:II.workspace.getConfiguration("multicoder"),log:null,telemetry:null,recent:new Map};KS(t),JS(t),XS(t),nw(t),TI(t)}function QO(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

@microsoft/1ds-core-js/dist/es5/ms.core.js:
  (*!
   * 1DS JS SDK Core, 4.3.4
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.5 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.3
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

@microsoft/1ds-post-js/dist/es5/ms.post.js:
  (*!
   * 1DS JS SDK POST plugin, 4.3.4
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.5 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.3
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.4
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.5 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.4
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.5 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.3
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)
*/
//# sourceMappingURL=extension.js.map
