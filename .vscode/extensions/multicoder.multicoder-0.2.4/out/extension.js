var FI=Object.create;var Sg=Object.defineProperty;var UI=Object.getOwnPropertyDescriptor;var jI=Object.getOwnPropertyNames;var YI=Object.getPrototypeOf,$I=Object.prototype.hasOwnProperty;var Rd=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Cy=(e,t)=>{for(var r in t)Sg(e,r,{get:t[r],enumerable:!0})},iS=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of jI(t))!$I.call(e,s)&&s!==r&&Sg(e,s,{get:()=>t[s],enumerable:!(n=UI(t,s))||n.enumerable});return e};var xy=(e,t,r)=>(r=e!=null?FI(YI(e)):{},iS(t||!e||!e.__esModule?Sg(r,"default",{value:e,enumerable:!0}):r,e)),qI=e=>iS(Sg({},"__esModule",{value:!0}),e);var vS=Rd((wk,pS)=>{function oS(e){return Array.isArray(e)?e:[e]}var ky="",sS=" ",Ay="\\",GI=/^\s+$/,VI=/(?:[^\\]|^)\\$/,HI=/^\\!/,KI=/^\\#/,WI=/\r?\n/g,JI=/^\.*\/|^\.+$/,Ry="/",lS="node-ignore";typeof Symbol<"u"&&(lS=Symbol.for("node-ignore"));var uS=lS,ZI=(e,t,r)=>Object.defineProperty(e,t,{value:r}),XI=/([0-z])-([0-z])/g,fS=()=>!1,QI=e=>e.replace(XI,(t,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?t:ky),eN=e=>{let{length:t}=e;return e.slice(0,t-t%2)},tN=[[/^\uFEFF/,()=>ky],[/((?:\\\\)*?)(\\?\s+)$/,(e,t,r)=>t+(r.indexOf("\\")===0?sS:ky)],[/(\\+?)\s/g,(e,t)=>{let{length:r}=t;return t.slice(0,r-r%2)+sS}],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,r)=>t+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(e,t,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return t+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>Ay],[/\\\\/g,()=>Ay],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,t,r,n,s)=>t===Ay?`\\[${r}${eN(n)}${s}`:s==="]"&&n.length%2===0?`[${QI(r)}${n}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],cS=Object.create(null),rN=(e,t)=>{let r=cS[e];return r||(r=tN.reduce((n,[s,c])=>n.replace(s,c.bind(e)),e),cS[e]=r),t?new RegExp(r,"i"):new RegExp(r)},Ly=e=>typeof e=="string",nN=e=>e&&Ly(e)&&!GI.test(e)&&!VI.test(e)&&e.indexOf("#")!==0,aN=e=>e.split(WI),Oy=class{constructor(t,r,n,s){this.origin=t,this.pattern=r,this.negative=n,this.regex=s}},iN=(e,t)=>{let r=e,n=!1;e.indexOf("!")===0&&(n=!0,e=e.substr(1)),e=e.replace(HI,"!").replace(KI,"#");let s=rN(e,t);return new Oy(r,e,n,s)},oN=(e,t)=>{throw new t(e)},fm=(e,t,r)=>Ly(e)?e?fm.isNotRelative(e)?r(`path should be a \`path.relative()\`d string, but got "${t}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${t}\``,TypeError),dS=e=>JI.test(e);fm.isNotRelative=dS;fm.convert=e=>e;var My=class{constructor({ignorecase:t=!0,ignoreCase:r=t,allowRelativePaths:n=!1}={}){ZI(this,uS,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[uS]){this._rules=this._rules.concat(t._rules),this._added=!0;return}if(nN(t)){let r=iN(t,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(t){return this._added=!1,oS(Ly(t)?aN(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,r){let n=!1,s=!1;return this._rules.forEach(c=>{let{negative:h}=c;if(s===h&&n!==s||h&&!n&&!s&&!r)return;c.regex.test(t)&&(n=!h,s=h)}),{ignored:n,unignored:s}}_test(t,r,n,s){let c=t&&fm.convert(t);return fm(c,t,this._allowRelativePaths?fS:oN),this._t(c,r,n,s)}_t(t,r,n,s){if(t in r)return r[t];if(s||(s=t.split(Ry)),s.pop(),!s.length)return r[t]=this._testOne(t,n);let c=this._t(s.join(Ry)+Ry,r,n,s);return r[t]=c.ignored?c:this._testOne(t,n)}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return oS(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}},bg=e=>new My(e),sN=e=>fm(e&&fm.convert(e),e,fS);bg.isPathValid=sN;bg.default=bg;pS.exports=bg;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let e=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");fm.convert=e;let t=/^[a-z]:\//i;fm.isNotRelative=r=>t.test(r)||dS(r)}});var bS=Rd((Ng,SS)=>{(function(e,t){typeof Ng=="object"&&typeof SS<"u"?t(Ng):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.oneDS=e.oneDS||{}))})(Ng,function(e){"use strict";var t="function",r="object",n="undefined",s="prototype",c=Object,h=c[s];function b(a,u){return a||u}function N(a,u){return a[u]}var k=void 0,$=null,ne="",le="function",we="object",ge="prototype",ve="__proto__",ce="undefined",Pe="constructor",Ke="Symbol",ut="_polyfill",Fe="length",ft="name",Ot="call",tr="toString",ur=b(Object),gr=N(ur,ge),xr=b(String),pn=N(xr,ge),vo=b(Math),Yi=b(Array),Vr=N(Yi,ge),Sn=N(Vr,"slice");function tt(a,u){try{return{v:a.apply(this,u)}}catch(p){return{e:p}}}function Ts(a,u){var p=tt(a);return p.e?u:p.v}var Ve;function Ir(a){return function(u){return typeof u===a}}function vn(a){var u="[object "+a+"]";return function(p){return!!(p&&Gt(p)===u)}}function Gt(a){return gr[tr].call(a)}function qt(a,u){return typeof a===u}function Qe(a){return typeof a===ce||a===ce}function xn(a){return!Bt(a)}function rt(a){return a===$||Qe(a)}function Dc(a){return a===$||!Bt(a)}function Bt(a){return!!a||a!==k}function mo(a){return!Ve&&(Ve=["string","number","boolean",ce,"symbol","bigint"]),a!==we&&Ve.indexOf(a)!==-1}var zt=Ir("string"),It=Ir(le);function en(a){return!a&&rt(a)?!1:!!a&&typeof a===we}var jt=N(Yi,"isArray"),nt=vn("Date"),rr=Ir("number"),ti=Ir("boolean"),bt=vn("Error");function qr(a){return!!(a&&a.then&&It(a.then))}function ho(a){return!a||!qa(a)}function qa(a){return!(!a||Ts(function(){return!(a&&0+a)},!a))}var Hr=N(ur,"getOwnPropertyDescriptor");function Pn(a,u){return!!a&&gr.hasOwnProperty[Ot](a,u)}var $i=b(N(ur,"hasOwn"),Vn);function Vn(a,u){return Pn(a,u)||!!Hr(a,u)}function Yr(a,u,p){if(a&&en(a)){for(var g in a)if($i(a,g)&&u[Ot](p||a,g,a[g])===-1)break}}var Wt={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function fr(a){var u={};if(u[Wt.c]=!0,u[Wt.e]=!0,a.l){u.get=function(){return a.l.v};var p=Hr(a.l,"v");p&&p.set&&(u.set=function(g){a.l.v=g})}return Yr(a,function(g,E){u[Wt[g]]=xn(E)?u[Wt[g]]:E}),u}var Br=N(ur,"defineProperty");function ou(a,u,p,g,E,C){var A={e:C,c:E};return p&&(A.g=p),g&&(A.s=g),Br(a,u,fr(A))}function Hn(a,u,p){return Br(a,u,fr(p))}function Ff(a,u,p,g,E){var C={};return Yr(a,function(A,x){Uu(C,A,u?x:A,E),Uu(C,x,p?x:A,E)}),g?g(C):C}function Uu(a,u,p,g){Br(a,u,{value:p,enumerable:!0,writable:!!g})}var Wr=b(xr),_o="[object Error]";function Vt(a,u){var p=ne,g=gr[tr][Ot](a);g===_o&&(a={stack:Wr(a.stack),message:Wr(a.message),name:Wr(a.name)});try{p=JSON.stringify(a,$,u?typeof u=="number"?u:4:k),p=(p?p.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):$)||Wr(a)}catch(E){p=" - "+Vt(E,u)}return g+": "+p}function bn(a){throw new Error(a)}function Ba(a){throw new TypeError(a)}var Bo=N(ur,"freeze");function qi(a){return a}function Ld(a){return a[ve]||$}var ju=N(ur,"assign"),qn=N(ur,"keys");function Si(a){return Bo&&Yr(a,function(u,p){(jt(p)||en(p))&&Si(p)}),Bi(a)}var Bi=b(Bo,qi),Yu=b(N(ur,"seal"),qi),ws=b(N(ur,"getPrototypeOf"),Ld);function ia(a){return Ff(a,1,0,Bi)}function Nr(a){return Ff(a,0,0,Bi)}var En=Nr({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),bi="__tsUtils$gblCfg",Bn;function go(){var a;return typeof globalThis!==ce&&(a=globalThis),!a&&typeof self!==ce&&(a=self),!a&&typeof window!==ce&&(a=window),!a&&typeof global!==ce&&(a=global),a}function Is(){if(!Bn){var a=tt(go).v||{};Bn=a[bi]=a[bi]||{}}return Bn}var Jr=Ca;function Ca(a,u,p){var g=u?u[a]:$;return function(E){var C=(E?E[a]:$)||g;if(C||p){var A=arguments;return(C||p).apply(E,C?Sn[Ot](A,1):A)}Ba('"'+Wr(a)+'" not defined for '+Vt(E))}}function Fd(a){return function(u){return u[a]}}var Uf=N(vo,"max"),Ud=Jr("slice",pn),on=Jr("substring",pn),yo=Ca("substr",pn,zo);function zo(a,u,p){return rt(a)&&Ba("Invalid "+Vt(a)),p<0?ne:(u=u||0,u<0&&(u=Uf(u+a[Fe],0)),Qe(p)?Ud(a,u):Ud(a,u,u+p))}function kn(a,u){return on(a,0,u)}var Go="_urid",su;function za(){if(!su){var a=Is();su=a.gblSym=a.gblSym||{k:{},s:{}}}return su}var sn;function On(a){var u={description:Wr(a),toString:function(){return Ke+"("+a+")"}};return u[ut]=!0,u}function $u(a){var u=za();if(!$i(u.k,a)){var p=On(a),g=qn(u.s).length;p[Go]=function(){return g+"_"+p[tr]()},u.k[a]=p,u.s[p[Go]()]=Wr(a)}return u.k[a]}function ri(a){!sn&&(sn={});var u,p=En[a];return p&&(u=sn[p]=sn[p]||On(Ke+"."+p)),u}var wr;function oa(){wr=Is()}function jf(a){var u={};return!wr&&oa(),u.b=wr.lzy,Br(u,"v",{configurable:!0,get:function(){var p=a();return wr.lzy||Br(u,"v",{value:p}),u.b=wr.lzy,p}}),u}function ya(a){return Br({toJSON:function(){return a}},"v",{value:a})}var Vo="window",Cc;function Ho(a,u){var p;return function(){return!wr&&oa(),(!p||wr.lzy)&&(p=ya(tt(a,u).v)),p.v}}function Yf(a){return!wr&&oa(),(!Cc||a===!1||wr.lzy)&&(Cc=ya(tt(go).v||$)),Cc.v}function tn(a,u){var p;if(!Cc||u===!1?p=Yf(u):p=Cc.v,p&&p[a])return p[a];if(a===Vo)try{return window}catch{}return $}function El(){return!!Ga()}var Ga=Ho(tn,["document"]);function jd(){return!!ni()}var ni=Ho(tn,[Vo]);function Up(){return!!ai()}var ai=Ho(tn,["navigator"]);function Tl(){return!!zi()}var zi=Ho(tn,["history"]),$f=Ho(function(){return!!tt(function(){return process&&(process.versions||{}).node}).v}),hr,Ko;function qf(){return hr=ya(tt(tn,[Ke]).v),hr}function Va(a){var u=(wr.lzy?0:hr)||qf();return u.v?u.v[a]:k}function xc(){return!!xt()}function xt(){return!wr&&oa(),((wr.lzy?0:hr)||qf()).v}function ii(a,u){var p=En[a];!wr&&oa();var g=(wr.lzy?0:hr)||qf();return g.v?g.v[p||a]:u?k:ri(a)}function qu(a,u){!wr&&oa();var p=(wr.lzy?0:hr)||qf();return p.v?p.v(a):u?$:On(a)}function wl(a){return!wr&&oa(),Ko=(wr.lzy?0:Ko)||ya(tt(Va,["for"]).v),(Ko.v||$u)(a)}function kv(a){return!!a&&It(a.next)}function Ei(a){return!Dc(a)&&It(a[ii(3)])}var Il;function Yd(a,u,p){if(a&&(kv(a)||(!Il&&(Il=ya(ii(3))),a=a[Il.v]?a[Il.v]():$),kv(a))){var g=k,E=k;try{for(var C=0;!(E=a.next()).done&&u[Ot](p||a,E.value,C,a)!==-1;)C++}catch(A){g={e:A},a.throw&&(E=$,a.throw(g))}finally{try{E&&!E.done&&a.return&&a.return(E)}finally{if(g)throw g.e}}}}function uu(a,u,p){return a.apply(u,p)}function Ti(a,u){return!Qe(u)&&a&&(jt(u)?uu(a.push,a,u):kv(u)||Ei(u)?Yd(u,function(p){a.push(p)}):a.push(u)),a}function dt(a,u,p){if(a)for(var g=a[Fe]>>>0,E=0;E<g&&!(E in a&&u[Ot](p||a,a[E],E,a)===-1);E++);}var sa=Jr("indexOf",Vr),cu=Jr("map",Vr);function Ns(a,u,p){return((a?a.slice:$)||Sn).apply(a,Sn[Ot](arguments,1))}function $d(a,u,p){return sa(a,u,p)!==-1}var qd=Ca("includes",Vr,$d),Kn=Jr("reduce",Vr),oi=b(N(ur,"create"),Bd);function Bd(a){if(!a)return{};var u=typeof a;u!==we&&u!==le&&Ba("Prototype must be an Object or function: "+Vt(a));function p(){}return p[ge]=a,new p}var wi;function Ha(a,u){var p=ur.setPrototypeOf||function(g,E){var C;!wi&&(wi=ya((C={},C[ve]=[],C instanceof Array))),wi.v?g[ve]=E:Yr(E,function(A,x){return g[A]=x})};return p(a,u)}function Im(a,u,p){tt(Hn,[u,ft,{v:a,c:!0,e:!1}]),u=Ha(u,p);function g(){this[Pe]=u,tt(Hn,[this,ft,{v:a,c:!0,e:!1}])}return u[ge]=p===$?oi(p):(g[ge]=p[ge],new g),u}function Ov(a,u){u&&(a[ft]=u)}function jp(a,u,p){var g=p||Error,E=g[ge][ft],C=Error.captureStackTrace;return Im(a,function(){var A=this,x=arguments;try{tt(Ov,[g,a]);var M=uu(g,A,Sn[Ot](x))||A;if(M!==A){var U=ws(A);U!==ws(M)&&Ha(M,U)}return C&&C(M,A[Pe]),u&&u(M,x),M}finally{tt(Ov,[g,E])}},g)}function lu(){return(Date.now||Yp)()}function Yp(){return new Date().getTime()}function uh(a){return function(p){return rt(p)&&Ba("strTrim called ["+Vt(p)+"]"),p&&p.replace&&(p=p.replace(a,ne)),p}}var zd=uh(/^\s+|(?=\s)\s+$/g),xa=Ca("trim",pn,zd),Nl,Dl,Gi;function si(a){if(!a||typeof a!==we)return!1;Gi||(Gi=jd()?ni():!0);var u=!1;if(a!==Gi){Dl||(Nl=Function[ge][tr],Dl=Nl[Ot](ur));try{var p=ws(a);u=!p,u||(Pn(p,Pe)&&(p=p[Pe]),u=!!(p&&typeof p===le&&Nl[Ot](p)===Dl))}catch{}}return u}function fu(a){return a.value&&Bp(a),!0}var $p=[Bf,Bp,qp,Vd];function Ii(a,u,p,g){var E;return dt(a,function(C){if(C.k===u)return E=C,-1}),E||(E={k:u,v:u},a.push(E),g(E)),E.v}function Gd(a,u,p,g){var E=p.handler,C=p.path?g?p.path.concat(g):p.path:[],A={handler:p.handler,src:p.src,path:C},x=typeof u,M=!1,U=u===$;U||(u&&x===we?M=si(u):U=mo(x));var z={type:x,isPrim:U,isPlain:M,value:u,result:u,path:C,origin:p.src,copy:function(G,H){return Gd(a,G,H?A:p,H)},copyTo:function(G,H){return Bu(a,G,H,A)}};return z.isPrim?E&&E[Ot](p,z)?z.result:u:Ii(a,u,C,function(G){Hn(z,"result",{g:function(){return G.v},s:function(J){G.v=J}});for(var H=0,X=E;!(X||(H<$p.length?$p[H++]:fu))[Ot](p,z);)X=$})}function Bu(a,u,p,g){if(!rt(p))for(var E in p)u[E]=Gd(a,p[E],g,E);return u}function Pc(a,u,p){var g={handler:p,src:u,path:[]};return Bu([],a,u,g)}function Cl(a,u){var p={handler:u,src:a};return Gd([],a,p)}function Bf(a){var u=a.value;if(jt(u)){var p=a.result=[];return p.length=u.length,a.copyTo(p,u),!0}return!1}function Vd(a){var u=a.value;return nt(u)?(a.result=new Date(u.getTime()),!0):!1}function qp(a){return a.type===le}function Bp(a){var u=a.value;if(u&&a.isPlain){var p=a.result={};return a.copyTo(p,u),!0}return!1}function du(a,u){return dt(u,function(p){Pc(a,p)}),a}function Hd(a,u,p,g,E,C,A){return du(Cl(a)||{},Sn[Ot](arguments))}var Ds=Fd(Fe),zu;function Ni(){return!wr&&oa(),(!zu||wr.lzy)&&(zu=ya(tt(tn,["performance"]).v)),zu.v}function xl(){var a=Ni();return a&&a.now?a.now():lu()}var zf=Ca("endsWith",pn,Ac);function Ac(a,u,p){zt(a)||Ba("'"+Vt(a)+"' is not a string");var g=zt(u)?u:Wr(u),E=!Qe(p)&&p<a[Fe]?p:a[Fe];return on(a,E-g[Fe],E)===g}var Vi=Jr("indexOf",pn),Mv=Ca("startsWith",pn,Wo);function Wo(a,u,p){zt(a)||Ba("'"+Vt(a)+"' is not a string");var g=zt(u)?u:Wr(u),E=p>0?p:0;return on(a,E,E+g[Fe])===g}var So="ref",Hi="unref",pu="hasRef",Gf="enabled";function Rc(a,u,p){var g=!0,E=a?u($):$,C;function A(){return g=!1,E&&E[Hi]&&E[Hi](),C}function x(){E&&p(E),E=$}function M(){return E=u(E),g||A(),C}function U(z){!z&&E&&x(),z&&!E&&M()}return C={cancel:x,refresh:M},C[pu]=function(){return E&&E[pu]?E[pu]():g},C[So]=function(){return g=!0,E&&E[So]&&E[So](),C},C[Hi]=A,C=Br(C,Gf,{get:function(){return!!E},set:U}),{h:C,dn:function(){E=$}}}function kc(a,u,p){var g=jt(u),E=g?u.length:0,C=(E>0?u[0]:g?k:u)||setTimeout,A=(E>1?u[1]:k)||clearTimeout,x=p[0];p[0]=function(){M.dn(),uu(x,k,Sn[Ot](arguments))};var M=Rc(a,function(U){if(U){if(U.refresh)return U.refresh(),U;uu(A,k,[U])}return uu(C,k,p)},function(U){uu(A,k,[U])});return M.h}function Gu(a,u){return kc(!0,k,Sn[Ot](arguments))}function Vf(a,u){return kc(!1,k,Sn[Ot](arguments))}(Yf()||{}).Symbol,(Yf()||{}).Reflect;var Pl="hasOwnProperty",Hf=function(a,u){return Hf=c.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var E in g)g[Pl](E)&&(p[E]=g[E])},Hf(a,u)};function Vu(a,u){typeof u!==t&&u!==null&&Ba("Class extends value "+String(u)+" is not a constructor or null"),Hf(a,u);function p(){this.constructor=a}a[s]=u===null?oi(u):(p[s]=u[s],new p)}function Ki(a,u){for(var p=0,g=u.length,E=a.length;p<g;p++,E++)a[E]=u[p];return a}var Oc,bo="constructor",ui="prototype",Jo="function",zr="_dynInstFuncs",Cs="_isDynProxy",Wi="_dynClass",Mc="_dynCls$",Lc="_dynInstChk",Zo=Lc,Al="_dfOpts",Xo="_unknown_",vu="__proto__",Ka="_dyn"+vu,Kd="__dynProto$Gbl",Hu="_dynInstProto",Pa="useBaseInst",Kf="setInstFuncs",Wd=Object,Rl=Wd.getPrototypeOf,kl=Wd.getOwnPropertyNames,Jd=Yf(),Lv=Jd[Kd]||(Jd[Kd]={o:(Oc={},Oc[Kf]=!0,Oc[Pa]=!0,Oc),n:1e3});function Ku(a){return a&&(a===Wd[ui]||a===Array[ui])}function Eo(a){return Ku(a)||a===Function[ui]}function Ji(a){var u;if(a){if(Rl)return Rl(a);var p=a[vu]||a[ui]||(a[bo]?a[bo][ui]:null);u=a[Ka]||p,Pn(a,Ka)||(delete a[Hu],u=a[Ka]=a[Hu]||a[Ka],a[Hu]=p)}return u}function mn(a,u){var p=[];if(kl)p=kl(a);else for(var g in a)typeof g=="string"&&Pn(a,g)&&p.push(g);if(p&&p.length>0)for(var E=0;E<p.length;E++)u(p[E])}function Ol(a,u,p){return u!==bo&&typeof a[u]===Jo&&(p||Pn(a,u))&&u!==vu&&u!==ui}function Wu(a){Ba("DynamicProto: "+a)}function Ju(a){var u=oi(null);return mn(a,function(p){!u[p]&&Ol(a,p,!1)&&(u[p]=a[p])}),u}function Zd(a,u){for(var p=a.length-1;p>=0;p--)if(a[p]===u)return!0;return!1}function Di(a,u,p,g){function E(M,U,z){var G=U[z];if(G[Cs]&&g){var H=M[zr]||{};H[Zo]!==!1&&(G=(H[U[Wi]]||{})[z]||G)}return function(){return G.apply(M,arguments)}}var C=oi(null);mn(p,function(M){C[M]=E(u,p,M)});for(var A=Ji(a),x=[];A&&!Eo(A)&&!Zd(x,A);)mn(A,function(M){!C[M]&&Ol(A,M,!Rl)&&(C[M]=E(u,A,M))}),x.push(A),A=Ji(A);return C}function mu(a,u,p,g){var E=null;if(a&&Pn(p,Wi)){var C=a[zr]||oi(null);if(E=(C[p[Wi]]||oi(null))[u],E||Wu("Missing ["+u+"] "+Jo),!E[Lc]&&C[Zo]!==!1){for(var A=!Pn(a,u),x=Ji(a),M=[];A&&x&&!Eo(x)&&!Zd(M,x);){var U=x[u];if(U){A=U===g;break}M.push(x),x=Ji(x)}try{A&&(a[u]=E),E[Lc]=1}catch{C[Zo]=!1}}}return E}function xs(a,u,p){var g=u[a];return g===p&&(g=Ji(u)[a]),typeof g!==Jo&&Wu("["+a+"] is not a "+Jo),g}function cr(a,u,p,g,E){function C(M,U){var z=function(){var G=mu(this,U,M,z)||xs(U,M,z);return G.apply(this,arguments)};return z[Cs]=1,z}if(!Ku(a)){var A=p[zr]=p[zr]||oi(null);if(!Ku(A)){var x=A[u]=A[u]||oi(null);A[Zo]!==!1&&(A[Zo]=!!E),Ku(x)||mn(p,function(M){Ol(p,M,!1)&&p[M]!==g[M]&&(x[M]=p[M],delete p[M],(!Pn(a,M)||a[M]&&!a[M][Cs])&&(a[M]=C(a,M)))})}}}function To(a,u){if(Rl){for(var p=[],g=Ji(u);g&&!Eo(g)&&!Zd(p,g);){if(g===a)return!0;p.push(g),g=Ji(g)}return!1}return!0}function Qo(a,u){return Pn(a,ui)?a.name||u||Xo:((a||{})[bo]||{}).name||u||Xo}function Ci(a,u,p,g){Pn(a,ui)||Wu("theClass is an invalid class definition.");var E=a[ui];To(E,u)||Wu("["+Qo(a)+"] not in hierarchy of ["+Qo(u)+"]");var C=null;Pn(E,Wi)?C=E[Wi]:(C=Mc+Qo(a,"_")+"$"+Lv.n,Lv.n++,E[Wi]=C);var A=Ci[Al],x=!!A[Pa];x&&g&&g[Pa]!==void 0&&(x=!!g[Pa]);var M=Ju(u),U=Di(E,u,M,x);p(u,U);var z=!!Rl&&!!A[Kf];z&&g&&(z=!!g[Kf]),cr(E,C,u,M,z!==!1)}Ci[Al]=Lv.o;var Wf=100,xi=ia,hu=xi({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),un=xi({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),Wa="toLowerCase",Or="blkVal",pt="length",Zu="rdOnly",wo="notify",Ps="warnToConsole",Zi="throwInternal",_u="setDf",Pi="watch",Fr="logger",Io="apply",Mr="push",No="splice",Jf="hdlr",Do="cancel",An="initialize",Xi="identifier",es="removeNotificationListener",Sa="addNotificationListener",Aa="isInitialized",Fc="instrumentationKey",Xu="INACTIVE",Zf="value",As="getNotifyMgr",Co="getPlugin",xo="name",Qu="iKey",Po="time",Mn="processNext",Xf="getProcessTelContext",ec="pollInternalLogs",Rs="enabled",ci="stopPollingInternalLogs",ts="unload",ks="onComplete",Ai="version",Uc="loggingLevelConsole",gu="createNew",ua="teardown",yu="messageId",Os="message",Ri="isAsync",tc="diagLog",cn="_doTeardown",Wn="update",ki="getNext",rc="setNextPlugin",rs="protocol",Xd="userAgent",li="split",jc="nodeType",ba="replace",Qf="logInternalMessage",Ja="type",ns="handler",as="status",Qd="getResponseHeader",Ml="getAllResponseHeaders",ed="isChildEvt",Ll="data",Ao="getCtx",Za="setCtx",Yc="complete",Fv="itemsReceived",nc="urlString",ac="sendPOST",is="headers",Fl="timeout",Nm="setRequestHeader",ep="traceId",Ul="spanId",ic="traceFlags",zp;function Uv(a,u){zp||(zp=jp("AggregationError",function(g,E){E[pt]>1&&(g.errors=E[1])}));var p=a||"One or more errors occurred.";throw dt(u,function(g,E){p+=`
`.concat(E," > ").concat(Vt(g))}),new zp(p,u||[])}var oc="Promise",jv="rejected";function jl(a,u){return tp(a,function(p){return u?u({status:"fulfilled",rejected:!1,value:p}):p},function(p){return u?u({status:jv,rejected:!0,reason:p}):p})}function tp(a,u,p,g){var E=a;try{if(qr(a))(u||p)&&(E=a.then(u,p));else try{u&&(E=u(a))}catch(C){if(p)E=p(C);else throw C}}finally{g&&Qi(E,g)}return E}function Qi(a,u){var p=a;return u&&(qr(a)?a.finally?p=a.finally(u):p=a.then(function(g){return u(),g},function(g){throw u(),g}):u()),p}var Gp=["pending","resolving","resolved",jv],Dm="dispatchEvent",td;function Vp(a){var u;return a&&a.createEvent&&(u=a.createEvent("Event")),!!u&&u.initEvent}function rp(a,u,p,g){var E=Ga();!td&&(td=ya(!!tt(Vp,[E]).v));var C=td.v?E.createEvent("Event"):g?new Event(u):{};if(p&&p(C),td.v&&C.initEvent(u,!1,!0),C&&a[Dm])a[Dm](C);else{var A=a["on"+u];if(A)A(C);else{var x=tn("console");x&&(x.error||x.log)(u,Vt(C))}}}var $c="unhandledRejection",rd=$c.toLowerCase(),sc=10,Ms;function qc(a){return It(a)?a.toString():Vt(a)}function Yv(a,u,p){var g=Ns(arguments,3),E=0,C=!1,A,x=[],M=!1,U=null,z;function G(Xe,nr){try{M=!0,U&&U.cancel(),U=null;var sr=a(function(Fn,fn){x.push(function(){try{var Un=E===2?Xe:nr,ji=Qe(Un)?A:It(Un)?Un(A):Un;qr(ji)?ji.then(Fn,fn):Un?Fn(ji):E===3?fn(ji):Fn(ji)}catch(gi){fn(gi)}}),C&&pe()},g);return sr}finally{}}function H(Xe){return G(void 0,Xe)}function X(Xe){var nr=Xe,sr=Xe;return It(Xe)&&(nr=function(Fn){return Xe&&Xe(),Fn},sr=function(Fn){throw Xe&&Xe(),Fn}),G(nr,sr)}function J(){return Gp[E]}function pe(){if(x.length>0){var Xe=x.slice();x=[],M=!0,U&&U.cancel(),U=null,u(Xe)}}function he(Xe,nr){return function(sr){if(E===nr){if(Xe===2&&qr(sr)){E=1,sr.then(he(2,1),he(3,1));return}E=Xe,C=!0,A=sr,pe(),!M&&Xe===3&&!U&&(U=Gu(Me,sc))}}}function Me(){if(!M)if(M=!0,$f())process.emit($c,A,z);else{var Xe=ni()||Yf();!Ms&&(Ms=ya(tt(tn,[oc+"RejectionEvent"]).v)),rp(Xe,rd,function(nr){return Hn(nr,"promise",{g:function(){return z}}),nr.reason=A,nr},!!Ms.v)}}z={then:G,catch:H,finally:X},Br(z,"state",{get:J}),xc()&&(z[ii(11)]="IPromise");function qe(){return"IPromise "+J()+(C?" - "+qc(A):"")}return z.toString=qe,function(){It(p)||Ba(oc+": executor is not a function - "+qc(p));var nr=he(3,0);try{p.call(z,he(2,0),nr)}catch(sr){nr(sr)}}(),z}function np(a){return function(u){var p=Ns(arguments,1);return a(function(g,E){try{var C=[],A=1;Yd(u,function(x,M){x&&(A++,tp(x,function(U){C[M]=U,--A===0&&g(C)},E))}),A--,A===0&&g(C)}catch(x){E(x)}},p)}}function Bc(a){return ya(function(u){var p=Ns(arguments,1);return a(function(g,E){var C=[],A=1;function x(M,U){A++,jl(M,function(z){z.rejected?C[U]={status:jv,reason:z.reason}:C[U]={status:"fulfilled",value:z.value},--A===0&&g(C)})}try{jt(u)?dt(u,x):Ei(u)?Yd(u,x):Ba("Input is not an iterable"),A--,A===0&&g(C)}catch(M){E(M)}},p)})}function ap(a){dt(a,function(u){try{u()}catch{}})}function Ls(a){var u=rr(a)?a:0;return function(p){Gu(function(){ap(p)},u)}}function Ur(a,u){return Yv(Ur,Ls(u),a,u)}var uc;function ca(a,u){!uc&&(uc=ya(tt(tn,[oc]).v||null));var p=uc.v;if(!p)return Ur(a);It(a)||Ba(oc+": executor is not a function - "+Vt(a));var g=0;function E(){return Gp[g]}var C=new p(function(A,x){function M(z){g=2,A(z)}function U(z){g=3,x(z)}a(M,U)});return Br(C,"state",{get:E}),C}var ip;function nd(a){return Yv(nd,ap,a)}function zc(a,u){return!ip&&(ip=Bc(nd)),ip.v(a,u)}var cc;function Xa(a,u){return!cc&&(cc=ya(ca)),cc.v.call(this,a,u)}var ad=np(Xa),Jn=void 0,vr="",Fs="channels",_n="core",os="createPerfMgr",lc="disabled",fc="extensionConfig",Us="extensions",eo="processTelemetry",Yl="priority",Hp="eventsSent",$l="eventsDiscarded",Kp="eventsSendRequest",ql="perfEvent",Gc="offlineEventsStored",op="offlineBatchSent",zn="offlineBatchDrop",Vc="getPerfMgr",la="domain",Su="path",sp="Not dynamic - ",id=/-([a-z])/g,fa=/([^\w\d_$])/g,od=/^(\d+[\w\d_$])/;function up(a){return!rt(a)}function js(a){var u=a;return u&&zt(u)&&(u=u[ba](id,function(p,g){return g.toUpperCase()}),u=u[ba](fa,"_"),u=u[ba](od,function(p,g){return"_"+g})),u}function Et(a,u){return a&&u?Vi(a,u)!==-1:!1}function ss(a){return a&&a.toISOString()||""}function us(a){return bt(a)?a[xo]:vr}function fi(a,u,p,g,E){var C=p;return a&&(C=a[u],C!==p&&(!E||E(C))&&(!g||g(p))&&(C=p,a[u]=C)),C}function Bl(a,u,p){var g;return a?(g=a[u],!g&&rt(g)&&(g=Qe(p)?{}:p,a[u]=g)):g=Qe(p)?{}:p,g}function Hc(a,u){var p=null,g=null;return It(a)?p=a:g=a,function(){var E=arguments;if(p&&(g=p()),g)return g[u][Io](g,E)}}function cs(a,u,p){if(a&&u&&en(a)&&en(u)){var g=function(C){if(zt(C)){var A=u[C];It(A)?(!p||p(C,!0,u,a))&&(a[C]=Hc(u,C)):(!p||p(C,!1,u,a))&&($i(a,C)&&delete a[C],Hn(a,C,{g:function(){return u[C]},s:function(x){u[C]=x}}))}};for(var E in u)g(E)}return a}function Oi(a,u,p,g,E){a&&u&&p&&(E!==!1||Qe(a[u]))&&(a[u]=Hc(p,g))}function Kc(a,u,p,g){return a&&u&&en(a)&&jt(p)&&dt(p,function(E){zt(E)&&Oi(a,E,u,E,g)}),a}function sd(a){return a&&ju&&(a=c(ju({},a))),a}function Ys(a){try{return a.responseText}catch{}return null}function zl(a,u){return a?"XDomainRequest,Response:"+Ys(a)||"":u}function Wc(a,u){return a?"XMLHttpRequest,Status:"+a[as]+",Response:"+Ys(a)||a.response||"":u}function Gl(a,u){return u&&(rr(u)?a=[u].concat(a):jt(u)&&(a=u.concat(a))),a}var cp="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",lp="withCredentials",Wp="timeout";function Cm(a,u,p,g,E,C){g===void 0&&(g=!1),E===void 0&&(E=!1);function A(M,U,z){try{M[U]=z}catch{}}var x=new XMLHttpRequest;return g&&A(x,cp,g),p&&A(x,lp,p),x.open(a,u,!E),p&&A(x,lp,p),!E&&C&&A(x,Wp,C),x}function ls(a){var u={};if(zt(a)){var p=xa(a)[li](/[\r\n]+/);dt(p,function(g){if(g){var E=g.indexOf(": ");if(E!==-1){var C=xa(g.substring(0,E))[Wa](),A=xa(g.substring(E+1));u[C]=A}else u[xa(g)]=1}})}return u}function $s(a,u,p){if(!a[p]&&u&&u[Qd]){var g=u[Qd](p);g&&(a[p]=xa(g))}return a}var fs="kill-duration",Mi="kill-duration-seconds",qs="time-delta-millis";function bu(a,u){var p={};return a[Ml]?p=ls(a[Ml]()):u&&(p=$s(p,a,qs),p=$s(p,a,fs),p=$s(p,a,Mi)),p}var di="documentMode",Jc="location",$v="console",dc="JSON",Jp="crypto",Vl="msCrypto",Zc="ReactNative",Hl="msie",Bs="trident/",Li="XMLHttpRequest",Xc=null,Kl=null,ud=!1,da=null,zs=null;function pa(a,u){var p=!1;if(a){try{if(p=u in a,!p){var g=a[s];g&&(p=u in g)}}catch{}if(!p)try{var E=new a;p=!Qe(E[u])}catch{}}return p}function cd(a){ud=a}function Eu(a){if(a&&ud){var u=tn("__mockLocation");if(u)return u}return typeof location===r&&location?location:tn(Jc)}function ld(){return typeof console!==n?console:tn($v)}function Ra(){return!!(typeof JSON===r&&JSON||tn(dc)!==null)}function va(){return Ra()?JSON||tn(dc):null}function Zp(){return tn(Jp)}function Wl(){return tn(Vl)}function Jl(){var a=ai();return a&&a.product?a.product===Zc:!1}function Tu(){var a=ai();if(a&&(a[Xd]!==Kl||Xc===null)){Kl=a[Xd];var u=(Kl||vr)[Wa]();Xc=Et(u,Hl)||Et(u,Bs)}return Xc}function qv(a){if(a===void 0&&(a=null),!a){var u=ai()||{};a=u?(u.userAgent||vr)[Wa]():vr}var p=(a||vr)[Wa]();if(Et(p,Hl)){var g=Ga()||{};return Math.max(parseInt(p[li](Hl)[1]),g[di]||0)}else if(Et(p,Bs)){var E=parseInt(p[li](Bs)[1]);if(E)return E+4}return null}function Bv(a){return(zs===null||a===!1)&&(zs=Up()&&!!ai().sendBeacon),zs}function Zl(a){var u=!1;try{u=!!tn("fetch");var p=tn("Request");u&&a&&p&&(u=pa(p,"keepalive"))}catch{}return u}function Xp(){return da===null&&(da=typeof XDomainRequest!==n,da&&Xl()&&(da=da&&!pa(tn(Li),"withCredentials"))),da}function Xl(){var a=!1;try{var u=tn(Li);a=!!u}catch{}return a}function Qp(a,u){if(a)for(var p=0;p<a[pt];p++){var g=a[p];if(g[xo]&&g[xo]===u)return g}return{}}function zv(a){var u=Ga();return u&&a?Qp(u.querySelectorAll("meta"),a).content:null}function Ql(a){var u,p=Ni();if(p){var g=p.getEntriesByType("navigation")||[];u=Qp((g[pt]>0?g[0]:{}).serverTiming,a).description}return u}var Gv=4294967296,wu=4294967295,Qc=123456789,fp=987654321,ds=!1,fd=Qc,ef=fp;function Ro(a){a<0&&(a>>>=0),fd=Qc+a&wu,ef=fp-a&wu,ds=!0}function el(){try{var a=lu()&2147483647;Ro((Math.random()*Gv^a)+a)}catch{}}function Vv(a){return a>0?Math.floor(tl()/wu*(a+1))>>>0:0}function tl(a){var u=0,p=Zp()||Wl();return p&&p.getRandomValues&&(u=p.getRandomValues(new Uint32Array(1))[0]&wu),u===0&&Tu()&&(ds||el(),u=xm()&wu),u===0&&(u=Math.floor(Gv*Math.random()|0)),a||(u>>>=0),u}function xm(a){ef=36969*(ef&65535)+(ef>>16)&wu,fd=18e3*(fd&65535)+(fd>>16)&wu;var u=(ef<<16)+(fd&65535)>>>0&wu|0;return a||(u>>>=0),u}function tf(a){a===void 0&&(a=22);for(var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=tl()>>>0,g=0,E=vr;E[pt]<a;)g++,E+=u.charAt(p&63),p>>>=6,g===5&&(p=(tl()<<2&4294967295|p&3)>>>0,g=0);return E}var Hv="3.3.4",ev="."+tf(6),Iu=0;function Nu(a){return a[jc]===1||a[jc]===9||!+a[jc]}function rl(a,u){var p=u[a.id];if(!p){p={};try{Nu(u)&&Hn(u,a.id,{e:!1,v:p})}catch{}}return p}function ps(a,u){return u===void 0&&(u=!1),js(a+Iu+++(u?"."+Hv:vr)+ev)}function Gs(a){var u={id:ps("_aiData-"+(a||vr)+"."+Hv),accept:function(p){return Nu(p)},get:function(p,g,E,C){var A=p[u.id];return A?A[js(g)]:(C&&(A=rl(u,p),A[js(g)]=E),E)},kill:function(p,g){if(p&&p[g])try{delete p[g]}catch{}}};return u}function rf(a){return a&&en(a)&&(a.isVal||a.fb||$i(a,"v")||$i(a,"mrg")||$i(a,"ref")||a.set)}function dd(a,u,p){var g,E=p.dfVal||Bt;if(u&&p.fb){var C=p.fb;jt(C)||(C=[C]);for(var A=0;A<C[pt];A++){var x=C[A],M=u[x];if(E(M)?g=M:a&&(M=a.cfg[x],E(M)&&(g=M),a.set(a.cfg,Wr(x),M)),E(g))break}}return!E(g)&&E(p.v)&&(g=p.v),g}function pd(a,u,p){var g=p;if(p&&rf(p)&&(g=dd(a,u,p)),g){rf(g)&&(g=pd(a,u,g));var E;jt(g)?(E=[],E[pt]=g[pt]):si(g)&&(E={}),E&&(Yr(g,function(C,A){A&&rf(A)&&(A=pd(a,u,A)),E[C]=A}),g=E)}return g}function nf(a,u,p,g){var E,C,A,x=g,M,U,z,G;rf(x)?(E=x.isVal,C=x.set,z=x[Zu],G=x[Or],M=x.mrg,U=x.ref,!U&&Qe(U)&&(U=!!M),A=dd(a,u,x)):A=g,G&&a[Or](u,p);var H,X=!0,J=u[p];(J||!rt(J))&&(H=J,X=!1,E&&H!==A&&!E(H)&&(H=A,X=!0),C&&(H=C(H,A,u),X=H===A)),X?A?H=pd(a,u,A):H=A:(si(H)||jt(A))&&M&&A&&(si(A)||jt(A))&&Yr(A,function(pe,he){nf(a,H,pe,he)}),a.set(u,p,H),U&&a.ref(u,p),z&&a[Zu](u,p)}var pi=wl("[[ai_dynCfg_1]]"),af=wl("[[ai_blkDynCfg_1]]"),Kv=wl("[[ai_frcDynCfg_1]]");function Pm(a){if(a){var u;if(jt(a)?(u=[],u[pt]=a[pt]):si(a)&&(u={}),u)return Yr(a,function(p,g){u[p]=Pm(g)}),u}return a}function nl(a){if(a){var u=a[pi]||a;if(u.cfg&&(u.cfg===a||u.cfg[pi]===u))return u}return null}function Am(a){if(a&&(si(a)||jt(a)))try{a[af]=!0}catch{}return a}function ko(a){if(a)try{a[Kv]=!0}catch{}return a}function Du(a,u,p){var g=!1;return p&&!a[u.blkVal]&&(g=p[Kv],!g&&!p[af]&&(g=si(p)||jt(p))),g}function al(a){Ba("InvalidAccess:"+a)}var Wv=["push","pop","shift","unshift","splice"],dp=function(a,u,p,g){a&&a[Zi](3,108,"".concat(p," [").concat(u,"] failed - ")+Vt(g))};function Jv(a,u,p){jt(u)&&dt(Wv,function(g){var E=u[g];u[g]=function(){for(var C=[],A=0;A<arguments.length;A++)C[A]=arguments[A];var x=E[Io](this,C);return md(a,u,p,"Patching"),x}})}function tv(a,u){var p=Hr(a,u);return p&&p.get}function vd(a,u,p,g){var E={n:p,h:[],trk:function(U){U&&U.fn&&(sa(E.h,U)===-1&&E.h[Mr](U),a.trk(U,E))},clr:function(U){var z=sa(E.h,U);z!==-1&&E.h[No](z,1)}},C=!0,A=!1;function x(){C&&(A=A||Du(x,a,g),g&&!g[pi]&&A&&(g=md(a,g,p,"Converting")),C=!1);var U=a.act;return U&&E.trk(U),g}x[a.prop]={chng:function(){a.add(E)}};function M(U){if(g!==U){x[a.ro]&&!a.upd&&al("["+p+"] is read-only:"+Vt(u)),C&&(A=A||Du(x,a,g),C=!1);var z=A&&x[a.rf];if(A)if(z){Yr(g,function(H){g[H]=U?U[H]:Jn});try{Yr(U,function(H,X){il(a,g,H,X)}),U=g}catch(H){dp((a.hdlr||{})[Fr],p,"Assigning",H),A=!1}}else g&&g[pi]&&Yr(g,function(H){var X=tv(g,H);if(X){var J=X[a.prop];J&&J.chng()}});if(U!==g){var G=U&&Du(x,a,U);!z&&G&&(U=md(a,U,p,"Converting")),g=U,A=G}a.add(E)}}Hn(u,E.n,{g:x,s:M})}function il(a,u,p,g){if(u){var E=tv(u,p),C=E&&!!E[a.prop];C?u[p]=g:vd(a,u,p,g)}return u}function to(a,u,p,g){if(u){var E=tv(u,p),C=E&&!!E[a.prop],A=g&&g[0],x=g&&g[1],M=g&&g[2];if(!C){if(M)try{Am(u)}catch(U){dp((a.hdlr||{})[Fr],p,"Blocking",U)}try{il(a,u,p,u[p]),E=tv(u,p)}catch(U){dp((a.hdlr||{})[Fr],p,"State",U)}}A&&(E[a.rf]=A),x&&(E[a.ro]=x),M&&(E[a.blkVal]=!0)}return u}function md(a,u,p,g){try{Yr(u,function(E,C){il(a,u,E,C)}),u[pi]||(Br(u,pi,{get:function(){return a[Jf]}}),Jv(a,u,p))}catch(E){dp((a.hdlr||{})[Fr],p,g,E)}return u}var ol="[[ai_",ka="]]";function ro(a){var u,p=qu(ol+"get"+a.uid+ka),g=qu(ol+"ro"+a.uid+ka),E=qu(ol+"rf"+a.uid+ka),C=qu(ol+"blkVal"+a.uid+ka),A=qu(ol+"dtl"+a.uid+ka),x=null,M=null,U;function z(J,pe){var he=U.act;try{U.act=J,J&&J[A]&&(dt(J[A],function(qe){qe.clr(J)}),J[A]=[]),pe({cfg:a.cfg,set:a.set.bind(a),setDf:a[_u].bind(a),ref:a.ref.bind(a),rdOnly:a[Zu].bind(a)})}catch(qe){var Me=a[Fr];throw Me&&Me[Zi](1,107,Vt(qe)),qe}finally{U.act=he||null}}function G(){if(x){var J=x;x=null,M&&M[Do](),M=null;var pe=[];if(dt(J,function(he){if(he&&(he[A]&&(dt(he[A],function(Me){Me.clr(he)}),he[A]=null),he.fn))try{z(he,he.fn)}catch(Me){pe[Mr](Me)}}),x)try{G()}catch(he){pe[Mr](he)}pe[pt]>0&&Uv("Watcher error(s): ",pe)}}function H(J){if(J&&J.h[pt]>0){x||(x=[]),M||(M=Gu(function(){M=null,G()},0));for(var pe=0;pe<J.h[pt];pe++){var he=J.h[pe];he&&sa(x,he)===-1&&x[Mr](he)}}}function X(J,pe){if(J){var he=J[A]=J[A]||[];sa(he,pe)===-1&&he[Mr](pe)}}return U=(u={prop:p,ro:g,rf:E},u[Or]=C,u[Jf]=a,u.add=H,u[wo]=G,u.use=z,u.trk=X,u),U}function of(a,u){var p={fn:u,rm:function(){p.fn=null,a=null,u=null}};return Hn(p,"toJSON",{v:function(){return"WatcherHandler"+(p.fn?"":"[X]")}}),a.use(p,u),p}function Zv(a,u,p){var g,E=nl(u);if(E)return E;var C=ps("dyncfg",!0),A=u&&p!==!1?u:Pm(u),x;function M(){x[wo]()}function U(Me,qe,Xe){try{Me=il(x,Me,qe,Xe)}catch(nr){dp(a,qe,"Setting value",nr)}return Me[qe]}function z(Me){return of(x,Me)}function G(Me,qe){x.use(null,function(Xe){var nr=x.upd;try{Qe(qe)||(x.upd=qe),Me(Xe)}finally{x.upd=nr}})}function H(Me,qe){var Xe;return to(x,Me,qe,(Xe={},Xe[0]=!0,Xe))[qe]}function X(Me,qe){var Xe;return to(x,Me,qe,(Xe={},Xe[1]=!0,Xe))[qe]}function J(Me,qe){var Xe;return to(x,Me,qe,(Xe={},Xe[2]=!0,Xe))[qe]}function pe(Me,qe){return qe&&Yr(qe,function(Xe,nr){nf(he,Me,Xe,nr)}),Me}var he=(g={uid:null,cfg:A},g[Fr]=a,g[wo]=M,g.set=U,g[_u]=pe,g[Pi]=z,g.ref=H,g[Zu]=X,g[Or]=J,g._block=G,g);return Hn(he,"uid",{c:!1,e:!1,w:!1,v:C}),x=ro(he),md(x,A,"config","Creating"),he}function Xv(a,u){a?(a[Ps](u),a[Zi](2,108,u)):al(u)}function ma(a,u,p,g){var E=Zv(p,a||{},g);return u&&E[_u](E.cfg,u),E}function sl(a,u,p){var g=a[pi]||a;return g.cfg&&(g.cfg===a||g.cfg[pi]===g)?g[Pi](u):(Xv(p,sp+Vt(a)),ma(a,null,p)[Pi](u))}function sf(a,u){if(a&&a[ts])return a[ts](u)}function Rm(a,u,p){var g;return p||(g=Xa(function(E){p=E})),a&&Ds(a)>0?jl(sf(a[0],u),function(){Rm(Ns(a,1),u,p)}):p(),g}var Qv=500,uf="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function Oa(a){return{mrg:!0,v:a}}var pp=[Hp,$l,Kp,ql],pc=null,ul;function Vs(a,u){return function(){var p=arguments,g=vp(u);if(g){var E=g.listener;E&&E[a]&&E[a][Io](E,p)}}}function cf(){var a=tn("Microsoft");return a&&(pc=a.ApplicationInsights),pc}function vp(a){var u=pc;return!u&&a.disableDbgExt!==!0&&(u=pc||cf()),u?u.ChromeDbgExt:null}function St(a){if(!ul){ul={};for(var u=0;u<pp[pt];u++)ul[pp[u]]=Vs(pp[u],a)}return ul}var Cu,Oo="warnToConsole",lf="AI (Internal): ",km="AI: ",ff="AITR_",hd={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Mo=(Cu={},Cu[0]=null,Cu[1]="errorToConsole",Cu[2]=Oo,Cu[3]="debugToConsole",Cu);function em(a){return a?'"'+a[ba](/\"/g,vr)+'"':vr}function mp(a,u){var p=ld();if(p){var g="log";p[a]&&(g=a),It(p[g])&&p[g](u)}}var hp=function(){function a(u,p,g,E){g===void 0&&(g=!1);var C=this;C[yu]=u,C[Os]=(g?km:lf)+u;var A=vr;Ra()&&(A=va().stringify(E));var x=(p?" message:"+em(p):vr)+(E?" props:"+em(A):vr);C[Os]+=x}return a.dataType="MessageData",a}();function df(a,u){return(a||{})[Fr]||new vc(u)}var vc=function(){function a(u){this.identifier="DiagnosticLogger",this.queue=[];var p=0,g={},E,C,A,x,M;Ci(a,this,function(U){M=G(u||{}),U.consoleLoggingLevel=function(){return E},U[Zi]=function(J,pe,he,Me,qe){qe===void 0&&(qe=!1);var Xe=new hp(pe,he,qe,Me);if(x)throw Vt(Xe);var nr=Mo[J]||Oo;if(Qe(Xe[Os]))X("throw"+(J===1?"Critical":"Warning"),Xe);else{if(qe){var sr=+Xe[yu];!g[sr]&&E>=J&&(U[nr](Xe[Os]),g[sr]=!0)}else E>=J&&U[nr](Xe[Os]);z(J,Xe)}},U.debugToConsole=function(J){mp("debug",J),X("warning",J)},U[Ps]=function(J){mp("warn",J),X("warning",J)},U.errorToConsole=function(J){mp("error",J),X("error",J)},U.resetInternalMessageCount=function(){p=0,g={}},U[Qf]=z,U[ts]=function(J){M&&M.rm(),M=null};function z(J,pe){if(!H()){var he=!0,Me=ff+pe[yu];if(g[Me]?he=!1:g[Me]=!0,he&&(J<=C&&(U.queue[Mr](pe),p++,X(J===1?"error":"warn",pe)),p===A)){var qe="Internal events throttle limit per PageView reached for this app.",Xe=new hp(23,qe,!1);U.queue[Mr](Xe),J===1?U.errorToConsole(qe):U[Ps](qe)}}}function G(J){return sl(ma(J,hd,U).cfg,function(pe){var he=pe.cfg;E=he[Uc],C=he.loggingLevelTelemetry,A=he.maxMessageLimit,x=he.enableDebug})}function H(){return p>=A}function X(J,pe){var he=vp(u||{});he&&he[tc]&&he[tc](J,pe)}})}return a.__ieDyn=1,a}();function rv(a){return a||new vc}function $r(a,u,p,g,E,C){C===void 0&&(C=!1),rv(a)[Zi](u,p,g,E,C)}function Hs(a,u){rv(a)[Ps](u)}function nv(a,u,p){rv(a)[Qf](u,p)}var xu,no,Ln="toGMTString",_d="toUTCString",mc="cookie",cl="expires",vs="isCookieUseDisabled",ao="disableCookiesUsage",Lo="_ckMgr",gd=null,_p=null,av=null,ms,iv={},yd={},ov=(xu={cookieCfg:Oa((no={},no[la]={fb:"cookieDomain",dfVal:up},no.path={fb:"cookiePath",dfVal:up},no.enabled=Jn,no.ignoreCookies=Jn,no.blockedCookies=Jn,no)),cookieDomain:Jn,cookiePath:Jn},xu[ao]=Jn,xu);function hs(){!ms&&(ms=jf(function(){return Ga()}))}function Om(a,u){var p=I[Lo]||yd[Lo];return p||(p=I[Lo]=I(a,u),yd[Lo]=p),p}function Pu(a){return a?a.isEnabled():!0}function sv(a,u){return u&&a&&jt(a.ignoreCookies)?sa(a.ignoreCookies,u)!==-1:!1}function f(a,u){return u&&a&&jt(a.blockedCookies)&&sa(a.blockedCookies,u)!==-1?!0:sv(a,u)}function m(a,u){var p=u[Rs];if(rt(p)){var g=void 0;Qe(a[vs])||(g=!a[vs]),Qe(a[ao])||(g=!a[ao]),p=g}return p}function y(a,u){var p;if(a)p=a.getCookieMgr();else if(u){var g=u.cookieCfg;g&&g[Lo]?p=g[Lo]:p=I(u)}return p||(p=Om(u,(a||{})[Fr])),p}function I(a,u){var p,g,E,C,A,x,M,U,z;a=ma(a||yd,null,u).cfg,A=sl(a,function(H){H[_u](H.cfg,ov),g=H.ref(H.cfg,"cookieCfg"),E=g[Su]||"/",C=g[la],x=m(a,g)!==!1,M=g.getCookie||Q,U=g.setCookie||me,z=g.delCookie||me},u);var G=(p={isEnabled:function(){var H=m(a,g)!==!1&&x&&F(u),X=yd[Lo];return H&&X&&G!==X&&(H=Pu(X)),H},setEnabled:function(H){x=H!==!1,g[Rs]=H},set:function(H,X,J,pe,he){var Me=!1;if(Pu(G)&&!f(g,H)){var qe={},Xe=xa(X||vr),nr=Vi(Xe,";");if(nr!==-1&&(Xe=xa(kn(X,nr)),qe=V(on(X,nr+1))),fi(qe,la,pe||C,qa,Qe),!rt(J)){var sr=Tu();if(Qe(qe[cl])){var Fn=lu(),fn=Fn+J*1e3;if(fn>0){var Un=new Date;Un.setTime(fn),fi(qe,cl,W(Un,sr?Ln:_d)||W(Un,sr?Ln:_d)||vr,qa)}}sr||fi(qe,"max-age",vr+J,null,Qe)}var ji=Eu();ji&&ji[rs]==="https:"&&(fi(qe,"secure",null,null,Qe),_p===null&&(_p=!et((ai()||{})[Xd])),_p&&fi(qe,"SameSite","None",null,Qe)),fi(qe,Su,he||E,null,Qe),U(H,ee(Xe,qe)),Me=!0}return Me},get:function(H){var X=vr;return Pu(G)&&!sv(g,H)&&(X=M(H)),X},del:function(H,X){var J=!1;return Pu(G)&&(J=G.purge(H,X)),J},purge:function(H,X){var J,pe=!1;if(F(u)){var he=(J={},J[Su]=X||"/",J[cl]="Thu, 01 Jan 1970 00:00:01 GMT",J);Tu()||(he["max-age"]="0"),z(H,ee(vr,he)),pe=!0}return pe}},p[ts]=function(H){A&&A.rm(),A=null},p);return G[Lo]=G,G}function F(a){if(gd===null){gd=!1,!ms&&hs();try{var u=ms.v||{};gd=u[mc]!==void 0}catch(p){$r(a,2,68,"Cannot access document.cookie - "+us(p),{exception:Vt(p)})}}return gd}function V(a){var u={};if(a&&a[pt]){var p=xa(a)[li](";");dt(p,function(g){if(g=xa(g||vr),g){var E=Vi(g,"=");E===-1?u[g]=null:u[xa(kn(g,E))]=xa(on(g,E+1))}})}return u}function W(a,u){return It(a[u])?a[u]():null}function ee(a,u){var p=a||vr;return Yr(u,function(g,E){p+="; "+g+(rt(E)?vr:"="+E)}),p}function Q(a){var u=vr;if(!ms&&hs(),ms.v){var p=ms.v[mc]||vr;av!==p&&(iv=V(p),av=p),u=xa(iv[a]||vr)}return u}function me(a,u){!ms&&hs(),ms.v&&(ms.v[mc]=a+"="+u)}function et(a){return zt(a)?!!(Et(a,"CPU iPhone OS 12")||Et(a,"iPad; CPU OS 12")||Et(a,"Macintosh; Intel Mac OS X 10_14")&&Et(a,"Version/")&&Et(a,"Safari")||Et(a,"Macintosh; Intel Mac OS X 10_14")&&zf(a,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Et(a,"Chrome/5")||Et(a,"Chrome/6")||Et(a,"UnrealEngine")&&!Et(a,"Chrome")||Et(a,"UCBrowser/12")||Et(a,"UCBrowser/11")):!1}var Tt={perfEvtsSendAll:!1};function Jt(a){a.h=null;var u=a.cb;a.cb=[],dt(u,function(p){tt(p.fn,[p.arg])})}function at(a,u,p,g){dt(a,function(E){E&&E[u]&&(p?(p.cb[Mr]({fn:g,arg:E}),p.h=p.h||Gu(Jt,0,p)):tt(g,[E]))})}var ct=function(){function a(u){this.listeners=[];var p,g,E=[],C={h:null,cb:[]},A=ma(u,Tt);g=A[Pi](function(x){p=!!x.cfg.perfEvtsSendAll}),Ci(a,this,function(x){Hn(x,"listeners",{g:function(){return E}}),x[Sa]=function(M){E[Mr](M)},x[es]=function(M){for(var U=sa(E,M);U>-1;)E[No](U,1),U=sa(E,M)},x[Hp]=function(M){at(E,Hp,C,function(U){U[Hp](M)})},x[$l]=function(M,U){at(E,$l,C,function(z){z[$l](M,U)})},x[Kp]=function(M,U){at(E,Kp,U?C:null,function(z){z[Kp](M,U)})},x[ql]=function(M){M&&(p||!M[ed]())&&at(E,ql,null,function(U){M[Ri]?Gu(function(){return U[ql](M)},0):U[ql](M)})},x[Gc]=function(M){M&&M[pt]&&at(E,Gc,C,function(U){U[Gc](M)})},x[op]=function(M){M&&M[Ll]&&at(E,op,C,function(U){U[op](M)})},x[zn]=function(M,U){if(M>0){var z=U||0;at(E,zn,C,function(G){G[zn](M,z)})}},x[ts]=function(M){var U=function(){g&&g.rm(),g=null,E=[],C.h&&C.h[Do](),C.h=null,C.cb=[]},z;if(at(E,"unload",null,function(G){var H=G[ts](M);H&&(z||(z=[]),z[Mr](H))}),z)return Xa(function(G){return jl(ad(z),function(){U(),G()})});U()}})}return a.__ieDyn=1,a}(),ir="ctx",Mt="ParentContextKey",yr="ChildrenContextKey",Er=null,Pt=function(){function a(u,p,g){var E=this;if(E.start=lu(),E[xo]=u,E[Ri]=g,E[ed]=function(){return!1},It(p)){var C;Hn(E,"payload",{g:function(){return!C&&It(p)&&(C=p(),p=null),C}})}E[Ao]=function(A){return A?A===a[Mt]||A===a[yr]?E[A]:(E[ir]||{})[A]:null},E[Za]=function(A,x){if(A)if(A===a[Mt])E[A]||(E[ed]=function(){return!0}),E[A]=x;else if(A===a[yr])E[A]=x;else{var M=E[ir]=E[ir]||{};M[A]=x}},E[Yc]=function(){var A=0,x=E[Ao](a[yr]);if(jt(x))for(var M=0;M<x[pt];M++){var U=x[M];U&&(A+=U[Po])}E[Po]=lu()-E.start,E.exTime=E[Po]-A,E[Yc]=function(){}}}return a.ParentContextKey="parent",a.ChildrenContextKey="childEvts",a}(),Tn=function(){function a(u){this.ctx={},Ci(a,this,function(p){p.create=function(g,E,C){return new Pt(g,E,C)},p.fire=function(g){g&&(g[Yc](),u&&It(u[ql])&&u[ql](g))},p[Za]=function(g,E){if(g){var C=p[ir]=p[ir]||{};C[g]=E}},p[Ao]=function(g){return(p[ir]||{})[g]}})}return a.__ieDyn=1,a}(),hc="CoreUtils.doPerf";function Ks(a,u,p,g,E){if(a){var C=a;if(C[Vc]&&(C=C[Vc]()),C){var A=void 0,x=C[Ao](hc);try{if(A=C.create(u(),g,E),A){if(x&&A[Za]&&(A[Za](Pt[Mt],x),x[Ao]&&x[Za])){var M=x[Ao](Pt[yr]);M||(M=[],x[Za](Pt[yr],M)),M[Mr](A)}return C[Za](hc,A),p(A)}}catch(U){A&&A[Za]&&A[Za]("exception",U)}finally{A&&C.fire(A),C[Za](hc,x)}}}return p()}function ll(){return Er}function pf(){var a=Sd();return on(a,0,8)+"-"+on(a,8,12)+"-"+on(a,12,16)+"-"+on(a,16,20)+"-"+on(a,20)}function Sd(){for(var a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],u=vr,p,g=0;g<4;g++)p=tl(),u+=a[p&15]+a[p>>4&15]+a[p>>8&15]+a[p>>12&15]+a[p>>16&15]+a[p>>20&15]+a[p>>24&15]+a[p>>28&15];var E=a[8+(tl()&3)|0];return yo(u,0,8)+yo(u,9,4)+"4"+yo(u,13,3)+E+yo(u,16,3)+yo(u,19,12)}var vf=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,mf="00",bd="ff",hf="00000000000000000000000000000000",xe="0000000000000000",vt=1;function Yt(a,u,p){return a&&a[pt]===u&&a!==p?!!a.match(/^[\da-f]*$/i):!1}function rn(a,u,p){return Yt(a,u)?a:p}function Ea(a){(isNaN(a)||a<0||a>255)&&(a=1);for(var u=a.toString(16);u[pt]<2;)u="0"+u;return u}function Ta(a,u,p,g){var E;return E={},E[Ai]=Yt(g,2,bd)?g:mf,E[ep]=vi(a)?a:Sd(),E[Ul]=_s(u)?u:kn(Sd(),16),E.traceFlags=p>=0&&p<=255?p:1,E}function Zn(a,u){var p;if(!a||(jt(a)&&(a=a[0]||""),!a||!zt(a)||a[pt]>8192))return null;if(a.indexOf(",")!==-1){var g=a[li](",");a=g[u>0&&g[pt]>u?u:0]}var E=vf.exec(xa(a));return!E||E[1]===bd||E[2]===hf||E[3]===xe?null:(p={version:(E[1]||vr)[Wa](),traceId:(E[2]||vr)[Wa](),spanId:(E[3]||vr)[Wa]()},p[ic]=parseInt(E[4],16),p)}function vi(a){return Yt(a,32,hf)}function _s(a){return Yt(a,16,xe)}function fl(a){return!(!a||!Yt(a[Ai],2,bd)||!Yt(a[ep],32,hf)||!Yt(a[Ul],16,xe)||!Yt(Ea(a[ic]),2))}function tm(a){return fl(a)?(a[ic]&vt)===vt:!1}function Au(a){if(a){var u=Ea(a[ic]);Yt(u,2)||(u="01");var p=a[Ai]||mf;return p!=="00"&&p!=="ff"&&(p=mf),"".concat(p.toLowerCase(),"-").concat(rn(a.traceId,32,hf).toLowerCase(),"-").concat(rn(a.spanId,16,xe).toLowerCase(),"-").concat(u.toLowerCase())}return""}function Ed(a){var u="traceparent",p=Zn(zv(u),a);return p||(p=Zn(Ql(u),a)),p}var Mm=Gs("plugin");function Xn(a){return Mm.get(a,"state",{},!0)}function gs(a,u){for(var p=[],g=null,E=a[ki](),C;E;){var A=E[Co]();if(A){g&&g[rc]&&A[eo]&&g[rc](A),C=Xn(A);var x=!!C[Aa];A[Aa]&&(x=A[Aa]()),x||p[Mr](A),g=A,E=E[ki]()}}dt(p,function(M){var U=a[_n]();M[An](a.getCfg(),U,u,a[ki]()),C=Xn(M),!M[_n]&&!C[_n]&&(C[_n]=U),C[Aa]=!0,delete C[ua]})}function rm(a){return a.sort(function(u,p){var g=0;if(p){var E=p[eo];u[eo]?g=E?u[Yl]-p[Yl]:1:E&&(g=-1)}else g=u?1:-1;return g})}function Lm(a){var u={};return{getName:function(){return u[xo]},setName:function(p){a&&a.setName(p),u[xo]=p},getTraceId:function(){return u[ep]},setTraceId:function(p){a&&a.setTraceId(p),vi(p)&&(u[ep]=p)},getSpanId:function(){return u[Ul]},setSpanId:function(p){a&&a.setSpanId(p),_s(p)&&(u[Ul]=p)},getTraceFlags:function(){return u[ic]},setTraceFlags:function(p){a&&a.setTraceFlags(p),u[ic]=p}}}var uv="TelemetryPluginChain",Fm="_hasRun",Um="_getTelCtx",Gh=0;function jm(a,u,p){for(;a;){if(a[Co]()===p)return a;a=a[ki]()}return pl([p],u.config||{},u)}function Ym(a,u,p,g){var E=null,C=[];u||(u=ma({},null,p[Fr])),g!==null&&(E=g?jm(a,p,g):a);var A={_next:M,ctx:{core:function(){return p},diagLog:function(){return df(p,u.cfg)},getCfg:function(){return u.cfg},getExtCfg:z,getConfig:G,hasNext:function(){return!!E},getNext:function(){return E},setNext:function(X){E=X},iterate:H,onComplete:x}};function x(X,J){for(var pe=[],he=2;he<arguments.length;he++)pe[he-2]=arguments[he];X&&C[Mr]({func:X,self:Qe(J)?A.ctx:J,args:pe})}function M(){var X=E;if(E=X?X[ki]():null,!X){var J=C;J&&J[pt]>0&&(dt(J,function(pe){try{pe.func.call(pe.self,pe.args)}catch(he){$r(p[Fr],2,73,"Unexpected Exception during onComplete - "+Vt(he))}}),C=[])}return X}function U(X,J){var pe=null,he=u.cfg;if(he&&X){var Me=he[fc];!Me&&J&&(Me={}),he[fc]=Me,Me=u.ref(he,fc),Me&&(pe=Me[X],!pe&&J&&(pe={}),Me[X]=pe,pe=u.ref(Me,X))}return pe}function z(X,J){var pe=U(X,!0);return J&&Yr(J,function(he,Me){if(rt(pe[he])){var qe=u.cfg[he];(qe||!rt(qe))&&(pe[he]=qe)}nf(u,pe,he,Me)}),u[_u](pe,J)}function G(X,J,pe){pe===void 0&&(pe=!1);var he,Me=U(X,!1),qe=u.cfg;return Me&&(Me[J]||!rt(Me[J]))?he=Me[J]:(qe[J]||!rt(qe[J]))&&(he=qe[J]),he||!rt(he)?he:pe}function H(X){for(var J;J=A._next();){var pe=J[Co]();pe&&X(pe)}}return A}function dl(a,u,p,g){var E=ma(u),C=Ym(a,E,p,g),A=C.ctx;function x(U){var z=C._next();return z&&z[eo](U,A),!z}function M(U,z){return U===void 0&&(U=null),jt(U)&&(U=pl(U,E.cfg,p,z)),dl(U||A[ki](),E.cfg,p,z)}return A[Mn]=x,A[gu]=M,A}function _f(a,u,p){var g=ma(u.config),E=Ym(a,g,u,p),C=E.ctx;function A(M){var U=E._next();return U&&U[ts](C,M),!U}function x(M,U){return M===void 0&&(M=null),jt(M)&&(M=pl(M,g.cfg,u,U)),_f(M||C[ki](),u,U)}return C[Mn]=A,C[gu]=x,C}function Ws(a,u,p){var g=ma(u.config),E=Ym(a,g,u,p),C=E.ctx;function A(M){return C.iterate(function(U){It(U[Wn])&&U[Wn](C,M)})}function x(M,U){return M===void 0&&(M=null),jt(M)&&(M=pl(M,g.cfg,u,U)),Ws(M||C[ki](),u,U)}return C[Mn]=A,C[gu]=x,C}function pl(a,u,p,g){var E=null,C=!g;if(jt(a)&&a[pt]>0){var A=null;dt(a,function(x){if(!C&&g===x&&(C=!0),C&&x&&It(x[eo])){var M=$m(x,u,p);E||(E=M),A&&A._setNext(M),A=M}})}return g&&!E?pl([g],u,p):E}function $m(a,u,p){var g=null,E=It(a[eo]),C=It(a[rc]),A;a?A=a[Xi]+"-"+a[Yl]+"-"+Gh++:A="Unknown-0-"+Gh++;var x={getPlugin:function(){return a},getNext:function(){return g},processTelemetry:z,unload:G,update:H,_id:A,_setNext:function(X){g=X}};function M(){var X;return a&&It(a[Um])&&(X=a[Um]()),X||(X=dl(x,u,p)),X}function U(X,J,pe,he,Me){var qe=!1,Xe=a?a[Xi]:uv,nr=X[Fm];return nr||(nr=X[Fm]={}),X.setNext(g),a&&Ks(X[_n](),function(){return Xe+":"+pe},function(){nr[A]=!0;try{var sr=g?g._id:vr;sr&&(nr[sr]=!1),qe=J(X)}catch(fn){var Fn=g?nr[g._id]:!0;Fn&&(qe=!0),(!g||!Fn)&&$r(X[tc](),1,73,"Plugin ["+Xe+"] failed during "+pe+" - "+Vt(fn)+", run flags: "+Vt(nr))}},he,Me),qe}function z(X,J){J=J||M();function pe(he){if(!a||!E)return!1;var Me=Xn(a);return Me[ua]||Me[lc]?!1:(C&&a[rc](g),a[eo](X,he),!0)}U(J,pe,"processTelemetry",function(){return{item:X}},!X.sync)||J[Mn](X)}function G(X,J){function pe(){var he=!1;if(a){var Me=Xn(a),qe=a[_n]||Me[_n];a&&(!qe||qe===X.core())&&!Me[ua]&&(Me[_n]=null,Me[ua]=!0,Me[Aa]=!1,a[ua]&&a[ua](X,J)===!0&&(he=!0))}return he}U(X,pe,"unload",function(){},J[Ri])||X[Mn](J)}function H(X,J){function pe(){var he=!1;if(a){var Me=Xn(a),qe=a[_n]||Me[_n];a&&(!qe||qe===X.core())&&!Me[ua]&&a[Wn]&&a[Wn](X,J)===!0&&(he=!0)}return he}U(X,pe,"update",function(){},!1)||X[Mn](J)}return Bi(x)}var nm=function(){function a(u,p,g,E){var C=this,A=dl(u,p,g,E);Kc(C,A,qn(A))}return a}();function cv(){var a=[];function u(g){g&&a[Mr](g)}function p(g,E){dt(a,function(C){try{C(g,E)}catch(A){$r(g[tc](),2,73,"Unexpected error calling unload handler - "+Vt(A))}}),a=[]}return{add:u,run:p}}var lv,Td;function ch(a,u){lv=a,Td=u}function qm(){var a=[];function u(g){var E=a;a=[],dt(E,function(C){try{(C.rm||C.remove).call(C)}catch(A){$r(g,2,73,"Unloading:"+Vt(A))}}),lv&&E[pt]>lv&&(Td?Td("doUnload",E):$r(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))}function p(g){g&&(Ti(a,g),lv&&a[pt]>lv&&(Td?Td("Add",a):$r(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}return{run:u,add:p}}var gp,vl="getPlugin",A_=(gp={},gp[fc]={isVal:up,v:{}},gp),lh=function(){function a(){var u=this,p,g,E,C,A;U(),Ci(a,u,function(z){z[An]=function(G,H,X,J){M(G,H,J),p=!0},z[ua]=function(G,H){var X,J=z[_n];if(!J||G&&J!==G[_n]())return;var pe,he=!1,Me=G||_f(null,J,E&&E[vl]?E[vl]():E),qe=H||(X={reason:0},X[Ri]=!1,X);function Xe(){he||(he=!0,C.run(Me,H),A.run(Me[tc]()),pe===!0&&Me[Mn](qe),U())}return!z[cn]||z[cn](Me,qe,Xe)!==!0?Xe():pe=!0,pe},z[Wn]=function(G,H){var X=z[_n];if(!X||G&&X!==G[_n]())return;var J,pe=!1,he=G||Ws(null,X,E&&E[vl]?E[vl]():E),Me=H||{reason:0};function qe(){pe||(pe=!0,M(he.getCfg(),he.core(),he[ki]()))}return!z._doUpdate||z._doUpdate(he,Me,qe)!==!0?qe():J=!0,J},Oi(z,"_addUnloadCb",function(){return C},"add"),Oi(z,"_addHook",function(){return A},"add"),Hn(z,"_unloadHooks",{g:function(){return A}})}),u[tc]=function(z){return x(z)[tc]()},u[Aa]=function(){return p},u.setInitialized=function(z){p=z},u[rc]=function(z){E=z},u[Mn]=function(z,G){G?G[Mn](z):E&&It(E[eo])&&E[eo](z,null)},u._getTelCtx=x;function x(z){z===void 0&&(z=null);var G=z;if(!G){var H=g||dl(null,{},u[_n]);E&&E[vl]?G=H[gu](null,E[vl]):G=H[gu](null,E)}return G}function M(z,G,H){ma(z,A_,df(G)),!H&&G&&(H=G[Xf]()[ki]());var X=E;E&&E[vl]&&(X=E[vl]()),u[_n]=G,g=dl(H,z,G,X)}function U(){p=!1,u[_n]=null,g=null,E=null,A=qm(),C=cv()}}return a.__ieDyn=1,a}();function Vh(a,u,p){var g={id:u,fn:p};Ti(a,g);var E={remove:function(){dt(a,function(C,A){if(C.id===g.id)return a[No](A,1),-1})}};return E}function Bm(a,u,p){for(var g=!1,E=a[pt],C=0;C<E;++C){var A=a[C];if(A)try{if(A.fn[Io](null,[u])===!1){g=!0;break}}catch(x){$r(p,2,64,"Telemetry initializer failed: "+us(x),{exception:Vt(x)},!0)}}return!g}var R_=function(a){Vu(u,a);function u(){var p=a.call(this)||this;p.identifier="TelemetryInitializerPlugin",p.priority=199;var g,E;C(),Ci(u,p,function(A,x){A.addTelemetryInitializer=function(M){return Vh(E,g++,M)},A[eo]=function(M,U){Bm(E,M,U?U[tc]():A[tc]())&&A[Mn](M,U)},A[cn]=function(){C()}});function C(){g=0,E=[]}return p}return u.__ieDyn=1,u}(lh),gf,fv="Plugins must provide initialize method",am="_notificationManager",yf="SDK is still unloading...",dv="SDK is not initialized",fh=100,Hh=5e4,wd=Si((gf={cookieCfg:{}},gf[Us]={rdOnly:!0,ref:!0,v:[]},gf[Fs]={rdOnly:!0,ref:!0,v:[]},gf[fc]={ref:!0,v:{}},gf[os]=Jn,gf.loggingLevelConsole=0,gf.diagnosticLogInterval=Jn,gf));function Kh(a,u){return new Tn(u)}function k_(a,u,p){var g,E=[],C=[],A={};return dt(p,function(x){(rt(x)||rt(x[An]))&&bn(fv);var M=x[Yl],U=x[Xi];x&&M&&(rt(A[M])?A[M]=U:Hs(a,"Two extensions have same priority #"+M+" - "+A[M]+", "+U)),!M||M<u?E[Mr](x):C[Mr](x)}),g={},g[_n]=E,g[Fs]=C,g}function dh(a,u){var p=!1;return dt(u,function(g){if(g===a)return p=!0,-1}),p}function im(a,u,p,g){p&&Yr(p,function(E,C){g&&si(C)&&si(u[E])&&im(a,u[E],C,g),g&&si(C)&&si(u[E])?im(a,u[E],C,g):a.set(u,E,C)})}function ph(a,u){var p=null,g=-1;return dt(a,function(E,C){if(E.w===u)return p=E,g=C,-1}),{i:g,l:p}}function zm(a,u){var p=ph(a,u).l;return p||(p={w:u,rm:function(){var g=ph(a,u);g.i!==-1&&a[No](g.i,1)}},a[Mr](p)),p}function pv(a,u,p){dt(u,function(g){var E=sl(a,g.w,p);delete g.w,g.rm=function(){E.rm()}})}function Id(a,u,p,g){return u.add(a[Pi](function(E){var C=E.cfg.disableDbgExt;C===!0&&g&&(p[es](g),g=null),p&&!g&&C!==!0&&(g=St(E.cfg),p[Sa](g))})),g}function vh(a){return Hn({rm:function(){a.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(a)+">"}})}var om=function(){function a(){var u,p,g,E,C,A,x,M,U,z,G,H,X,J,pe,he,Me,qe,Xe,nr,sr,Fn,fn,Un,ji,gi,Cf,cm,xf,Ze,Lt,Nn;Ci(a,this,function(Ae){Ar(),Ae._getDbgPlgTargets=function(){return[fn,E]},Ae[Aa]=function(){return p},Ae.activeStatus=function(){return gi},Ae._setPendingStatus=function(){gi=3},Ae[An]=function(Se,mt,Ht,At){X&&bn(yf),Ae[Aa]()&&bn("Core cannot be initialized more than once"),u=ma(Se,wd,Ht||Ae[Fr],!1),Se=u.cfg,so(u[Pi](function(hn){var Ia=hn.cfg,uo=gi===3;if(!uo){cm=Ia.initInMemoMaxSize||fh;var Yo=Ia[Fc],Rf=Ia.endpointUrl;if(rt(Yo)){sr=null,gi=un[Xu];var Ev="Please provide instrumentation key";p?($r(g,1,100,Ev),ra()):bn(Ev);return}var _h=[];if(qr(Yo)?(_h[Mr](Yo),sr=null):sr=Yo,qr(Rf)?(_h[Mr](Rf),Cf=null):Cf=Rf,_h[pt]){xf=!1,gi=3;var vg=up(Ia.initTimeOut)?Ia.initTimeOut:Hh,Sy=zc(_h);Gu(function(){xf||Dt()},vg),jl(Sy,function(jn){try{if(xf)return;if(!jn.rejected){var Fa=jn[Zf];if(Fa&&Fa[pt]){var O_=Fa[0];if(sr=O_&&O_[Zf],Fa[pt]>1){var Ua=Fa[1];Cf=Ua&&Ua[Zf]}}sr&&(Se[Fc]=sr,Se.endpointUrl=Cf)}Dt()}catch{xf||Dt()}})}else Dt();var Qh=hn.ref(hn.cfg,fc);Yr(Qh,function(jn){hn.ref(Qh,jn)})}})),C=At,Xe=Id(u,qe,C&&Ae[As](),Xe),Af(),Ae[Fr]=Ht;var Kt=Se[Us];if(z=[],z[Mr].apply(z,Ki(Ki([],mt,!1),Kt)),G=Se[Fs],Qa(null),(!H||H[pt]===0)&&bn("No "+Fs+" available"),G&&G[pt]>1){var Rn=Ae[Co]("TeeChannelController");(!Rn||!Rn.plugin)&&$r(g,1,28,"TeeChannel required")}pv(Se,Fn,g),Fn=null,p=!0,gi===un.ACTIVE&&ra()},Ae.getChannels=function(){var Se=[];return H&&dt(H,function(mt){Se[Mr](mt)}),Bi(Se)},Ae.track=function(Se){Ks(Ae[Vc](),function(){return"AppInsightsCore:track"},function(){Se===null&&(wa(Se),bn("Invalid telemetry item")),!Se[xo]&&rt(Se[xo])&&(wa(Se),bn("telemetry name required")),Se[Qu]=Se[Qu]||sr,Se[Po]=Se[Po]||ss(new Date),Se.ver=Se.ver||"4.0",!X&&Ae[Aa]()&&gi===un.ACTIVE?yi()[Mn](Se):gi!==un[Xu]&&E[pt]<=cm&&E[Mr](Se)},function(){return{item:Se}},!Se.sync)},Ae[Xf]=yi,Ae[As]=function(){return C||(C=new ct(u.cfg),Ae[am]=C),C},Ae[Sa]=function(Se){Ae.getNotifyMgr()[Sa](Se)},Ae[es]=function(Se){C&&C[es](Se)},Ae.getCookieMgr=function(){return M||(M=I(u.cfg,Ae[Fr])),M},Ae.setCookieMgr=function(Se){M!==Se&&(sf(M,!1),M=Se)},Ae[Vc]=function(){return A||x||ll()},Ae.setPerfMgr=function(Se){A=Se},Ae.eventCnt=function(){return E[pt]},Ae.releaseQueue=function(){if(p&&E[pt]>0){var Se=E;E=[],gi===2?dt(Se,function(mt){mt[Qu]=mt[Qu]||sr,yi()[Mn](mt)}):$r(g,2,20,"core init status is not active")}},Ae[ec]=function(Se){return pe=Se||null,Nn=!1,Ze&&Ze[Do](),io(!0)};function Dt(){xf=!0,rt(sr)?(gi=un[Xu],$r(g,1,112,"ikey can't be resolved from promises")):gi=un.ACTIVE,ra()}function ra(){p&&(Ae.releaseQueue(),Ae[ec]())}function io(Se){if((!Ze||!Ze[Rs])&&!Nn){var mt=Se||g&&g.queue[pt]>0;mt&&(Lt||(Lt=!0,so(u[Pi](function(Ht){var At=Ht.cfg.diagnosticLogInterval;(!At||!(At>0))&&(At=1e4);var Kt=!1;Ze&&(Kt=Ze[Rs],Ze[Do]()),Ze=Vf(Sv,At),Ze.unref(),Ze[Rs]=Kt}))),Ze[Rs]=!0)}return Ze}Ae[ci]=function(){Nn=!0,Ze&&Ze[Do](),Sv()},Kc(Ae,function(){return J},["addTelemetryInitializer"]),Ae[ts]=function(Se,mt,Ht){var At;Se===void 0&&(Se=!0),p||bn(dv),X&&bn(yf);var Kt=(At={reason:50},At[Ri]=Se,At.flushComplete=!1,At),Rn;Se&&!mt&&(Rn=Xa(function(uo){mt=uo}));var hn=_f(Pf(),Ae);hn[ks](function(){qe.run(Ae[Fr]),Rm([M,C,g],Se,function(){Ar(),mt&&mt(Kt)})},Ae);function Ia(uo){Kt.flushComplete=uo,X=!0,Me.run(hn,Kt),Ae[ci](),hn[Mn](Kt)}return Sv(),xd(Se,Ia,6,Ht),Rn},Ae[Co]=oo,Ae.addPlugin=function(Se,mt,Ht,At){if(!Se){At&&At(!1),Vm(fv);return}var Kt=oo(Se[Xi]);if(Kt&&!mt){At&&At(!1),Vm("Plugin ["+Se[Xi]+"] is already loaded!");return}var Rn={reason:16};function hn(Yo){z[Mr](Se),Rn.added=[Se],Qa(Rn),At&&At(!0)}if(Kt){var Ia=[Kt.plugin],uo={reason:2,isAsync:!!Ht};Mu(Ia,uo,function(Yo){Yo?(Rn.removed=Ia,Rn.reason|=32,hn()):At&&At(!1)})}else hn()},Ae.updateCfg=function(Se,mt){mt===void 0&&(mt=!0);var Ht;if(Ae[Aa]()){Ht={reason:1,cfg:u.cfg,oldCfg:Hd({},u.cfg),newConfig:Hd({},Se),merge:mt},Se=Ht.newConfig;var At=u.cfg;Se[Us]=At[Us],Se[Fs]=At[Fs]}u._block(function(Kt){var Rn=Kt.cfg;im(Kt,Rn,Se,mt),mt||Yr(Rn,function(hn){$i(Se,hn)||Kt.set(Rn,hn,Jn)}),Kt[_u](Rn,wd)},!0),u[wo](),Ht&&bv(Ht)},Ae.evtNamespace=function(){return he},Ae.flush=xd,Ae.getTraceCtx=function(Se){return nr||(nr=Lm()),nr},Ae.setTraceCtx=function(Se){nr=Se||null},Ae.addUnloadHook=so,Oi(Ae,"addUnloadCb",function(){return Me},"add"),Ae.onCfgChange=function(Se){var mt;return p?mt=sl(u.cfg,Se,Ae[Fr]):mt=zm(Fn,Se),vh(mt)},Ae.getWParam=function(){return El()||u.cfg.enableWParam?0:-1};function jo(){var Se={};Un=[];var mt=function(Ht){Ht&&dt(Ht,function(At){if(At[Xi]&&At[Ai]&&!Se[At.identifier]){var Kt=At[Xi]+"="+At[Ai];Un[Mr](Kt),Se[At.identifier]=At}})};mt(H),G&&dt(G,function(Ht){mt(Ht)}),mt(z)}function Ar(){p=!1,u=ma({},wd,Ae[Fr]),u.cfg[Uc]=1,Hn(Ae,"config",{g:function(){return u.cfg},s:function(mt){Ae.updateCfg(mt,!1)}}),Hn(Ae,"pluginVersionStringArr",{g:function(){return Un||jo(),Un}}),Hn(Ae,"pluginVersionString",{g:function(){return ji||(Un||jo(),ji=Un.join(";")),ji||vr}}),Hn(Ae,"logger",{g:function(){return g||(g=new vc(u.cfg),u[Fr]=g),g},s:function(mt){u[Fr]=mt,g!==mt&&(sf(g,!1),g=mt)}}),Ae[Fr]=new vc(u.cfg),fn=[];var Se=Ae.config[Us]||[];Se.splice(0,Se[pt]),Ti(Se,fn),J=new R_,E=[],sf(C,!1),C=null,A=null,x=null,sf(M,!1),M=null,U=null,z=[],G=null,H=null,X=!1,pe=null,he=ps("AIBaseCore",!0),Me=cv(),nr=null,sr=null,qe=qm(),Fn=[],ji=null,Un=null,Nn=!1,Ze=null,Lt=!1,gi=0,Cf=null,cm=null,xf=!1}function yi(){var Se=dl(Pf(),u.cfg,Ae);return Se[ks](io),Se}function Qa(Se){var mt=k_(Ae[Fr],Qv,z);U=null,ji=null,Un=null,H=(G||[])[0]||[],H=rm(Ti(H,mt[Fs]));var Ht=Ti(rm(mt[_n]),H);fn=Bi(Ht);var At=Ae.config[Us]||[];At.splice(0,At[pt]),Ti(At,fn);var Kt=yi();H&&H[pt]>0&&gs(Kt[gu](H),Ht),gs(Kt,Ht),Se&&bv(Se)}function oo(Se){var mt=null,Ht=null,At=[];return dt(fn,function(Kt){if(Kt[Xi]===Se&&Kt!==J)return Ht=Kt,-1;Kt.getChannel&&At[Mr](Kt)}),!Ht&&At[pt]>0&&dt(At,function(Kt){if(Ht=Kt.getChannel(Se),!Ht)return-1}),Ht&&(mt={plugin:Ht,setEnabled:function(Kt){Xn(Ht)[lc]=!Kt},isEnabled:function(){var Kt=Xn(Ht);return!Kt[ua]&&!Kt[lc]},remove:function(Kt,Rn){var hn;Kt===void 0&&(Kt=!0);var Ia=[Ht],uo=(hn={reason:1},hn[Ri]=Kt,hn);Mu(Ia,uo,function(Yo){Yo&&Qa({reason:32,removed:Ia}),Rn&&Rn(Yo)})}}),mt}function Pf(){if(!U){var Se=(fn||[]).slice();sa(Se,J)===-1&&Se[Mr](J),U=pl(rm(Se),u.cfg,Ae)}return U}function Mu(Se,mt,Ht){if(Se&&Se[pt]>0){var At=pl(Se,u.cfg,Ae),Kt=_f(At,Ae);Kt[ks](function(){var Rn=!1,hn=[];dt(z,function(uo,Yo){dh(uo,Se)?Rn=!0:hn[Mr](uo)}),z=hn,ji=null,Un=null;var Ia=[];G&&(dt(G,function(uo,Yo){var Rf=[];dt(uo,function(Ev){dh(Ev,Se)?Rn=!0:Rf[Mr](Ev)}),Ia[Mr](Rf)}),G=Ia),Ht&&Ht(Rn),io()}),Kt[Mn](mt)}else Ht(!1)}function Sv(){if(g&&g.queue){var Se=g.queue.slice(0);g.queue[pt]=0,dt(Se,function(mt){var Ht,At=(Ht={},Ht[xo]=pe||"InternalMessageId: "+mt[yu],Ht[Qu]=sr,Ht[Po]=ss(new Date),Ht.baseType=hp.dataType,Ht.baseData={message:mt[Os]},Ht);Ae.track(At)})}}function xd(Se,mt,Ht,At){var Kt=1,Rn=!1,hn=null;At=At||5e3;function Ia(){Kt--,Rn&&Kt===0&&(hn&&hn[Do](),hn=null,mt&&mt(Rn),mt=null)}if(H&&H[pt]>0){var uo=yi()[gu](H);uo.iterate(function(Yo){if(Yo.flush){Kt++;var Rf=!1;Yo.flush(Se,function(){Rf=!0,Ia()},Ht)||Rf||(Se&&hn==null?hn=Gu(function(){hn=null,Ia()},At):Ia())}})}return Rn=!0,Ia(),!0}function Af(){var Se;so(u[Pi](function(mt){var Ht=mt.cfg.enablePerfMgr;if(Ht){var At=mt.cfg[os];(Se!==At||!Se)&&(At||(At=Kh),Bl(mt.cfg,os,At),Se=At,x=null),!A&&!x&&It(At)&&(x=At(Ae,Ae[As]()))}else x=null,Se=null}))}function bv(Se){var mt=Ws(Pf(),Ae);mt[ks](io),(!Ae._updateHook||Ae._updateHook(mt,Se)!==!0)&&mt[Mn](Se)}function Vm(Se){var mt=Ae[Fr];mt?($r(mt,2,73,Se),io()):bn(Se)}function wa(Se){var mt=Ae[As]();mt&&mt[$l]([Se],2)}function so(Se){qe.add(Se)}})}return a.__ieDyn=1,a}();function Gr(a,u){try{if(a&&a!==""){var p=va().parse(a);if(p&&p[Fv]&&p[Fv]>=p.itemsAccepted&&p.itemsReceived-p.itemsAccepted===p.errors[pt])return p}}catch(g){$r(u,1,43,"Cannot parse the response. "+(g[xo]||Vt(g)),{response:a})}return null}var Js="",Nd="NoResponseBody",yp="&"+Nd+"=true",vv="POST",sm=function(){function a(){var u=0,p,g,E,C,A,x,M,U,z,G,H,X,J,pe;Ci(a,this,function(he,Me){var qe=!0;xf(),he[An]=function(Ze,Lt){E=Lt,g&&$r(E,1,28,"Sender is already initialized"),he.SetConfig(Ze),g=!0},he._getDbgPlgTargets=function(){return[g,C,x,p]},he.SetConfig=function(Ze){try{if(A=Ze.senderOnCompleteCallBack||{},x=!!Ze.disableCredentials,M=Ze.fetchCredentials,C=!!Ze.isOneDs,p=!!Ze.enableSendPromise,z=!!Ze.disableXhr,G=!!Ze.disableBeacon,H=!!Ze.disableBeaconSync,pe=Ze.timeWrapper,J=!!Ze.addNoResponse,X=!!Ze.disableFetchKeepAlive,U={sendPOST:gi},C||(qe=!1),x){var Lt=Eu();Lt&&Lt.protocol&&Lt.protocol[Wa]()==="file:"&&(qe=!1)}return!0}catch{}return!1},he.getSyncFetchPayload=function(){return u},he.getSenderInst=function(Ze,Lt){return Ze&&Ze[pt]?Fn(Ze,Lt):null},he.getFallbackInst=function(){return U},he[cn]=function(Ze,Lt){xf()};function Xe(Ze,Lt){fn(Lt,200,{},Ze)}function nr(Ze,Lt){$r(E,2,26,"Failed to send telemetry.",{message:Ze}),fn(Lt,400,{})}function sr(Ze){nr("No endpoint url is provided for the batch",Ze)}function Fn(Ze,Lt){for(var Nn,Ae=0,Dt=null,ra=0;Dt==null&&ra<Ze[pt];)Ae=Ze[ra],!z&&Ae===1?Xp()?Dt=cm:Xl()&&(Dt=gi):Ae===2&&Zl(Lt)&&(!Lt||!X)?Dt=Cf:Ae===3&&Bv()&&(Lt?!H:!G)&&(Dt=ji),ra++;return Dt?(Nn={_transport:Ae,_isSync:Lt},Nn[ac]=Dt,Nn):null}function fn(Ze,Lt,Nn,Ae){try{Ze&&Ze(Lt,Nn,Ae)}catch{}}function Un(Ze,Lt){var Nn=ai(),Ae=Ze[nc];if(!Ae)return sr(Lt),!0;Ae=Ze[nc]+(J?yp:Js);var Dt=Ze[Ll],ra=C?Dt:new Blob([Dt],{type:"text/plain;charset=UTF-8"}),io=Nn.sendBeacon(Ae,ra);return io}function ji(Ze,Lt,Nn){var Ae=Ze[Ll];try{if(Ae)if(Un(Ze,Lt))Xe(Js,Lt);else{var Dt=A&&A.beaconOnRetry;Dt&&It(Dt)?Dt(Ze,Lt,Un):(U&&U[ac](Ze,Lt,!0),$r(E,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(ra){C&&Hs(E,"Failed to send telemetry using sendBeacon API. Ex:"+Vt(ra)),fn(Lt,C?0:400,{},Js)}}function gi(Ze,Lt,Nn){var Ae,Dt,ra,io=Ze[is]||{};!Nn&&p&&(Ae=Xa(function(Qa,oo){Dt=Qa,ra=oo})),C&&Nn&&Ze.disableXhrSync&&(Nn=!1);var jo=Ze[nc];if(!jo){sr(Lt),Dt&&Dt(!1);return}var Ar=Cm(vv,jo,qe,!0,Nn,Ze[Fl]);C||Ar[Nm]("Content-type","application/json"),dt(qn(io),function(Qa){Ar[Nm](Qa,io[Qa])}),Ar.onreadystatechange=function(){C||(yi(Ar),Ar.readyState===4&&Dt&&Dt(!0))},Ar.onload=function(){C&&yi(Ar)};function yi(Qa){var oo=A&&A.xhrOnComplete,Pf=oo&&It(oo);if(Pf)oo(Qa,Lt,Ze);else{var Mu=Ys(Qa);fn(Lt,Qa[as],bu(Qa,C),Mu)}}return Ar.onerror=function(Qa){fn(Lt,C?Ar[as]:400,bu(Ar,C),C?Js:Wc(Ar)),ra&&ra(Qa)},Ar.ontimeout=function(){fn(Lt,C?Ar[as]:500,bu(Ar,C),C?Js:Wc(Ar)),Dt&&Dt(!1)},Ar.send(Ze[Ll]),Ae}function Cf(Ze,Lt,Nn){var Ae,Dt=Ze[nc],ra=Ze[Ll],io=C?ra:new Blob([ra],{type:"application/json"}),jo,Ar,yi,Qa=new Headers,oo=ra[pt],Pf=!1,Mu=!1,Sv=Ze[is]||{},xd=(Ae={method:vv,body:io},Ae[uf]=!0,Ae);Ze.headers&&qn(Ze.headers)[pt]>0&&(dt(qn(Sv),function(wa){Qa.append(wa,Sv[wa])}),xd[is]=Qa),M?xd.credentials=M:qe&&C&&(xd.credentials="include"),Nn&&(xd.keepalive=!0,u+=oo,C?Ze._sendReason===2&&(Pf=!0,J&&(Dt+=yp)):Pf=!0);var Af=new Request(Dt,xd);try{Af[uf]=!0}catch{}if(!Nn&&p&&(jo=Xa(function(wa,so){Ar=wa,yi=so})),!Dt){sr(Lt),Ar&&Ar(!1);return}function bv(wa){fn(Lt,C?0:400,{},C?Js:wa)}function Vm(wa,so,Se){var mt=wa[as],Ht=A.fetchOnComplete;Ht&&It(Ht)?Ht(wa,Lt,Se||Js,so):fn(Lt,mt,{},Se||Js)}try{jl(fetch(C?Dt:Af,C?xd:null),function(wa){if(Nn&&(u-=oo,oo=0),!Mu)if(Mu=!0,wa.rejected)bv(wa.reason&&wa.reason[Os]),yi&&yi(wa.reason);else{var so=wa[Zf];try{!C&&!so.ok?(bv(so.statusText),Ar&&Ar(!1)):C&&!so.body?(Vm(so,null,Js),Ar&&Ar(!0)):jl(so.text(),function(Se){Vm(so,Ze,Se[Zf]),Ar&&Ar(!0)})}catch(Se){bv(Vt(Se)),yi&&yi(Se)}}})}catch(wa){Mu||(bv(Vt(wa)),yi&&yi(wa))}return Pf&&!Mu&&(Mu=!0,fn(Lt,200,{}),Ar&&Ar(!0)),C&&!Mu&&Ze[Fl]>0&&pe&&pe.set(function(){Mu||(Mu=!0,fn(Lt,500,{}),Ar&&Ar(!0))},Ze[Fl]),jo}function cm(Ze,Lt,Nn){var Ae=ni(),Dt=new XDomainRequest,ra=Ze[Ll];Dt.onload=function(){var Qa=Ys(Dt),oo=A&&A.xdrOnComplete;oo&&It(oo)?oo(Dt,Lt,Ze):fn(Lt,200,{},Qa)},Dt.onerror=function(){fn(Lt,400,{},C?Js:zl(Dt))},Dt.ontimeout=function(){fn(Lt,500,{})},Dt.onprogress=function(){};var io=Ae&&Ae.location&&Ae.location[rs]||"",jo=Ze[nc];if(!jo){sr(Lt);return}if(!C&&jo.lastIndexOf(io,0)!==0){var Ar="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";$r(E,2,40,". "+Ar),nr(Ar,Lt);return}var yi=C?jo:jo[ba](/^(https?:)/,"");Dt.open(vv,yi),Ze[Fl]&&(Dt[Fl]=Ze[Fl]),Dt.send(ra),C&&Nn?pe&&pe.set(function(){Dt.send(ra)},0):Dt.send(ra)}function xf(){u=0,g=!1,p=!1,E=null,C=null,A=null,x=null,M=null,U=null,z=!1,G=!1,H=!1,X=!1,J=!1,pe=null}})}return a.__ieDyn=1,a}(),Sf="on",Dd="attachEvent",Wh="addEventListener",Sp="detachEvent",ml="removeEventListener",_c="events",Fo="visibilitychange",Zs="pagehide",hl="pageshow",bf="unload",Ru="beforeunload",ku=ps("aiEvtPageHide"),bp=ps("aiEvtPageShow"),Cd=/\.[\.]+/g,Jh=/[\.]+$/,mv=1,gc=Gs("events"),Gm=/^([^.]*)(?:\.(.+)|)/;function hv(a){return a&&a[ba]?a[ba](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,vr):a}function Ef(a,u){var p;if(u){var g=vr;jt(u)?(g=vr,dt(u,function(C){C=hv(C),C&&(C[0]!=="."&&(C="."+C),g+=C)})):g=hv(u),g&&(g[0]!=="."&&(g="."+g),a=(a||vr)+g)}var E=Gm.exec(a||vr)||[];return p={},p[Ja]=E[1],p.ns=(E[2]||vr).replace(Cd,".").replace(Jh,vr)[li](".").sort().join("."),p}function _v(a,u,p){var g=[],E=gc.get(a,_c,{},!1),C=Ef(u,p);return Yr(E,function(A,x){dt(x,function(M){var U;(!C[Ja]||C[Ja]===M.evtName[Ja])&&(!C.ns||C.ns===C.ns)&&g[Mr]((U={},U[xo]=M.evtName[Ja]+(M.evtName.ns?"."+M.evtName.ns:vr),U.handler=M[ns],U))})}),g}function gv(a,u,p){p===void 0&&(p=!0);var g=gc.get(a,_c,{},p),E=g[u];return E||(E=g[u]=[]),E}function mh(a,u,p,g){a&&u&&u[Ja]&&(a[ml]?a[ml](u[Ja],p,g):a[Sp]&&a[Sp](Sf+u[Ja],p))}function hh(a,u,p,g){var E=!1;return a&&u&&u[Ja]&&p&&(a[Wh]?(a[Wh](u[Ja],p,g),E=!0):a[Dd]&&(a[Dd](Sf+u[Ja],p),E=!0)),E}function Zh(a,u,p,g){for(var E=u[pt];E--;){var C=u[E];C&&(!p.ns||p.ns===C.evtName.ns)&&(!g||g(C))&&(mh(a,C.evtName,C[ns],C.capture),u[No](E,1))}}function mi(a,u,p){if(u[Ja])Zh(a,gv(a,u[Ja]),u,p);else{var g=gc.get(a,_c,{});Yr(g,function(E,C){Zh(a,C,u,p)}),qn(g)[pt]===0&&gc.kill(a,_c)}}function Xs(a,u){var p;return u?(jt(u)?p=[a].concat(u):p=[a,u],p=Ef("xx",p).ns[li](".")):p=a,p}function Ep(a,u,p,g,E){var C;E===void 0&&(E=!1);var A=!1;if(a)try{var x=Ef(u,g);if(A=hh(a,x,p,E),A&&gc.accept(a)){var M=(C={guid:mv++,evtName:x},C[ns]=p,C.capture=E,C);gv(a,x.type)[Mr](M)}}catch{}return A}function Gn(a,u,p,g,E){if(E===void 0&&(E=!1),a)try{var C=Ef(u,g),A=!1;mi(a,C,function(x){return C.ns&&!p||x[ns]===p?(A=!0,!0):!1}),A||mh(a,C,p,E)}catch{}}function Tp(a,u,p,g){return g===void 0&&(g=!1),Ep(a,u,p,null,g)}function wp(a,u,p,g){g===void 0&&(g=!1),Gn(a,u,p,null,g)}function Xh(a,u,p){var g=!1,E=ni();E&&(g=Ep(E,a,u,p),g=Ep(E.body,a,u,p)||g);var C=Ga();return C&&(g=Ep(C,a,u,p)||g),g}function d(a,u,p){var g=ni();g&&(Gn(g,a,u,p),Gn(g.body,a,u,p));var E=Ga();E&&Gn(E,a,u,p)}function _(a,u,p,g){var E=!1;return u&&a&&a[pt]>0&&dt(a,function(C){C&&(!p||sa(p,C)===-1)&&(E=Xh(C,u,g)||E)}),E}function T(a,u,p,g){var E=!1;return u&&a&&jt(a)&&(E=_(a,u,p,g),!E&&p&&p[pt]>0&&(E=_(a,u,null,g))),E}function D(a,u,p){a&&jt(a)&&dt(a,function(g){g&&d(g,u,p)})}function R(a,u,p){return T([Ru,bf,Zs],a,u,p)}function Y(a,u){D([Ru,bf,Zs],a,u)}function q(a,u,p){function g(A){var x=Ga();a&&x&&x.visibilityState==="hidden"&&a(A)}var E=Xs(ku,p),C=_([Zs],a,u,E);return(!u||sa(u,Fo)===-1)&&(C=_([Fo],g,u,E)||C),!C&&u&&(C=q(a,null,p)),C}function K(a,u){var p=Xs(ku,u);D([Zs],a,p),D([Fo],null,p)}function re(a,u,p){function g(A){var x=Ga();a&&x&&x.visibilityState==="visible"&&a(A)}var E=Xs(bp,p),C=_([hl],a,u,E);return C=_([Fo],g,u,E)||C,!C&&u&&(C=re(a,null,p)),C}function ae(a,u){var p=Xs(bp,u);D([hl],a,p),D([Fo],null,p)}var Ne=xi({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3}),Ye="",Ue="https://browser.events.data.microsoft.com/OneCollector/1.0/",Ie="version",fe="properties",Le="initialize",be="logger",He="indexOf",De="timings",Ee="pollInternalLogs",$e="value",$t="kind",Zt="length",or="processTelemetryStart",Dr="handleField",Lr="rmSanitizer",ln="rmFieldSanitizer",nn="canHandle",Xt,Qn="4.3.4",Je="1DS-Web-JS-"+Qn,lt=h.hasOwnProperty,Sr="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",lr="withCredentials",wt="timeout",Pr=(Xt={},Xt[0]=0,Xt[2]=6,Xt[1]=1,Xt[3]=7,Xt[4098]=6,Xt[4097]=1,Xt[4099]=7,Xt),Nt=null,Ma=El(),ot=jd();function wn(a){return!(a===Ye||rt(a))}function In(a){if(a){var u=Vi(a,"-");if(u>-1)return kn(a,u)}return Ye}function hi(){return Nt===null&&(Nt=!Qe(Uint8Array)&&!La()&&!Jl()),Nt}function yc(a){return!!(a&&rr(a)&&a>=1&&a<=4)}function Fi(a,u,p){if(!u&&!wn(u)||typeof a!="string")return null;var g=typeof u;if(g==="string"||g==="number"||g==="boolean"||jt(u))u={value:u};else if(g==="object"&&!lt.call(u,"value"))u={value:p?JSON.stringify(u):u};else if(rt(u[$e])||u[$e]===Ye||!zt(u[$e])&&!rr(u[$e])&&!ti(u[$e])&&!jt(u[$e]))return null;if(jt(u[$e])&&!eu(u[$e]))return null;if(!rt(u[$t])){if(jt(u[$e])||!Zr(u[$t]))return null;u[$e]=u[$e].toString()}return u}function Tf(a,u,p){var g=-1;if(!Qe(a))if(u>0&&(u===32?g=8192:u<=13&&(g=u<<5)),ta(p))g===-1&&(g=0),g|=p;else{var E=Pr[Ui(a)]||-1;g!==-1&&E!==-1?g|=E:E===6&&(g=E)}return g}function ys(a,u,p){p===void 0&&(p=!0);var g;return a&&(g=a.get(u),p&&g&&decodeURIComponent&&(g=decodeURIComponent(g))),g||Ye}function Uo(a){a===void 0&&(a="D");var u=pf();return a==="B"?u="{"+u+"}":a==="P"?u="("+u+")":a==="N"&&(u=u.replace(/-/g,Ye)),u}function Qs(a,u,p,g,E){var C={},A=!1,x=0,M=arguments[Zt],U=arguments;for(ti(U[0])&&(A=U[0],x++);x<M;x++){var a=U[x];Yr(a,function(G,H){A&&H&&en(H)?jt(H)?(C[G]=C[G]||[],dt(H,function(X,J){X&&en(X)?C[G][J]=Qs(!0,C[G][J],X):C[G][J]=X})):C[G]=Qs(!0,C[G],H):C[G]=H})}return C}var ea=xl;function Zr(a){return a===0||a>0&&a<=13||a===32}function ta(a){return a>=0&&a<=9}function La(){var a=ai();if(!Qe(a)&&a.userAgent){var u=a.userAgent.toLowerCase();if((u[He]("safari")>=0||u[He]("firefox")>=0)&&u[He]("chrome")<0)return!0}return!1}function eu(a){return a[Zt]>0}function Sc(a,u){var p=a;p[De]=p[De]||{},p[De][or]=p[De][or]||{},p[De][or][u]=ea()}function Ui(a){var u=0;if(a!=null){var p=typeof a;p==="string"?u=1:p==="number"?u=2:p==="boolean"?u=3:p===r&&(u=4,jt(a)?(u=4096,a[Zt]>0&&(u|=Ui(a[0]))):lt.call(a,"value")&&(u=8192|Ui(a[$e])))}return u}function wf(){return!!tn("chrome")}function tu(a,u,p,g,E,C){g===void 0&&(g=!1),E===void 0&&(E=!1);function A(M,U,z){try{M[U]=z}catch{}}var x=new XMLHttpRequest;return g&&A(x,Sr,g),p&&A(x,lr,p),x.open(a,u,!E),p&&A(x,lr,p),!E&&C&&A(x,wt,C),x}function um(a){return a>0}var bc=Si({endpointUrl:Ue,propertyStorageOverride:{isVal:If}});function If(a){return a&&(!a.getProperty||!a.setProperty)&&bn("Invalid property storage override passed."),!0}var ha=function(a){Vu(u,a);function u(){var p=a.call(this)||this;return Ci(u,p,function(g,E){g[Le]=function(C,A,x,M){Ks(g,function(){return"AppInsightsCore.initialize"},function(){try{E[Le](ma(C,bc,x||g[be],!1).cfg,A,x,M)}catch(G){var U=g[be],z=Vt(G);z[He]("channels")!==-1&&(z+=`
 - Channels must be provided through config.channels only!`),$r(U,1,514,"SDK Initialization Failed - no telemetry will be sent: "+z)}},function(){return{config:C,extensions:A,logger:x,notificationManager:M}})},g.track=function(C){Ks(g,function(){return"AppInsightsCore.track"},function(){var A=C;if(A){A[De]=A[De]||{},A[De].trackStart=ea(),yc(A.latency)||(A.latency=1);var x=A.ext=A.ext||{};x.sdk=x.sdk||{},x.sdk.ver=Je;var M=A.baseData=A.baseData||{};M[fe]=M[fe]||{};var U=M[fe];U[Ie]=U[Ie]||g.pluginVersionString||Ye}E.track(A)},function(){return{item:C}},!C.sync)},g[Ee]=function(C){return E[Ee](C||"InternalLog")}}),p}return u.__ieDyn=1,u}(om),Ip=xi({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),Nf=xi({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),yv=xi({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),Ou=xi({Normal:1,Critical:2}),_i=xi({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),Df=function(){function a(u){var p=this,g={},E=[],C=[];u&&C.push(u);function A(z,G){var H,X=g[z];if(X&&(H=X[G]),!H&&H!==null){if(zt(z)&&zt(G))if(C[Zt]>0){for(var J=0;J<C[Zt];J++)if(C[J][Dr](z,G)){H={canHandle:!0,fieldHandler:C[J]};break}}else E[Zt]===0&&(H={canHandle:!0});if(!H&&H!==null){H=null;for(var J=0;J<E[Zt];J++)if(E[J][Dr](z,G)){H={canHandle:!0,handler:E[J],fieldHandler:null};break}}X||(X=g[z]={}),X[G]=H}return H}p.clearCache=function(){g={}},p.addSanitizer=function(z){z&&(qd(E,z)||E.push(z),g={})},p.addFieldSanitizer=function(z){z&&(qd(C,z)||C.push(z),g={})},p[Lr]=function(z){if(z){var G=sa(E,z);G!==-1&&(E.splice(G,1),g={}),dt(E,function(H){H&&H[Lr]&&H[Lr](z)})}},p[ln]=function(z){if(z){var G=sa(C,z);G!==-1&&(C.splice(G,1),g={}),dt(E,function(H){H&&H[ln]&&H[ln](z)})}},p.isEmpty=function(){return Ds(E)+Ds(C)===0},p[Dr]=function(z,G){var H=A(z,G);return H?H[nn]:!1},p[$e]=function(z,G,H,X){var J=A(z,G);if(J&&J[nn]){if(!J||!J[nn])return null;if(J.handler)return J.handler[$e](z,G,H,X);if(!zt(G)||rt(H)||H===Ye)return null;var pe=null,he=Ui(H);if((he&8192)===8192){var Me=he&-8193;if(pe=H,!wn(pe[$e])||Me!==1&&Me!==2&&Me!==3&&(Me&4096)!==4096)return null}else he===1||he===2||he===3||(he&4096)===4096?pe=M(z,G,H):he===4&&(pe=M(z,G,X?JSON.stringify(H):H));if(pe)return x(J,z,G,he,pe,X)}return null},p.property=function(z,G,H,X){var J=A(z,G);if(!J||!J[nn]||!zt(G)||rt(H)||!wn(H[$e]))return null;var pe=Ui(H[$e]);return pe===0?null:x(J,z,G,pe,H,X)};function x(z,G,H,X,J,pe){if(z.handler)return z.handler.property(G,H,J,pe);if(!rt(J[$t])){if((X&4096)===4096||!Zr(J[$t]))return null;J[$e]=J[$e].toString()}return U(z.fieldHandler,G,H,X,J)}function M(z,G,H){return wn(H)?{value:H}:null}function U(z,G,H,X,J){if(J&&z){var pe=z.getSanitizer(G,H,X,J[$t],J.propertyType);if(pe)if(X===4){var he={},Me=J[$e];Yr(Me,function(Xe,nr){var sr=G+"."+H;if(wn(nr)){var Fn=M(sr,Xe,nr);Fn=U(z,sr,Xe,Ui(nr),Fn),Fn&&(he[Xe]=Fn[$e])}}),J[$e]=he}else{var qe={path:G,name:H,type:X,prop:J,sanitizer:p};J=pe.call(p,qe)}}return J}}return a.getFieldType=Ui,a}();e.ActiveStatus=un,e.AppInsightsCore=ha,e.BaseTelemetryPlugin=lh,e.DiagnosticLogger=vc,e.EventLatency=Nf,e.EventPersistence=Ou,e.EventPropertyType=yv,e.EventsDiscardedReason=hu,e.FullVersionString=Je,e.InternalAppInsightsCore=om,e.LoggingSeverity=Ne,e.MinChannelPriorty=Wf,e.NotificationManager=ct,e.PerfEvent=Pt,e.PerfManager=Tn,e.ProcessTelemetryContext=nm,e.SenderPostManager=sm,e.TraceLevel=_i,e.Undefined=n,e.ValueKind=Ip,e.ValueSanitizer=Df,e.Version=Qn,e._InternalLogMessage=hp,e.__getRegisteredEvents=_v,e._appendHeader=$s,e._getAllResponseHeaders=bu,e._logInternalMessage=nv,e._testHookMaxUnloadHooksCb=ch,e._throwInternal=$r,e._warnToConsole=Hs,e.addEventHandler=Xh,e.addEventListeners=T,e.addPageHideEventListener=q,e.addPageShowEventListener=re,e.addPageUnloadEventListener=R,e.areCookiesSupported=F,e.arrForEach=dt,e.arrIndexOf=sa,e.arrMap=cu,e.arrReduce=Kn,e.attachEvent=Tp,e.blockDynamicConversion=Am,e.convertAllHeadersToMap=ls,e.cookieAvailable=F,e.createCookieMgr=I,e.createDynamicConfig=ma,e.createEnumStyle=xi,e.createGuid=Uo,e.createProcessTelemetryContext=dl,e.createTraceParent=Ta,e.createUniqueNamespace=ps,e.createUnloadHandlerContainer=cv,e.dateNow=lu,e.detachEvent=wp,e.disallowsSameSiteNone=et,e.doPerf=Ks,e.dumpObj=Vt,e.eventOff=Gn,e.eventOn=Ep,e.extend=Qs,e.findW3cTraceParent=Ed,e.forceDynamicConversion=ko,e.formatErrorMessageXdr=zl,e.formatErrorMessageXhr=Wc,e.formatTraceParent=Au,e.generateW3CId=Sd,e.getCommonSchemaMetaData=Tf,e.getConsole=ld,e.getCookieValue=ys,e.getCrypto=Zp,e.getDocument=Ga,e.getDynamicConfigHandler=nl,e.getExceptionName=us,e.getFieldValueType=Ui,e.getGlobal=Yf,e.getGlobalInst=tn,e.getHistory=zi,e.getIEVersion=qv,e.getISOString=ss,e.getJSON=va,e.getLocation=Eu,e.getMsCrypto=Wl,e.getNavigator=ai,e.getPerformance=Ni,e.getResponseText=Ys,e.getSetValue=Bl,e.getTenantId=In,e.getTime=ea,e.getWindow=ni,e.hasDocument=El,e.hasHistory=Tl,e.hasJSON=Ra,e.hasNavigator=Up,e.hasOwnProperty=Pn,e.hasWindow=jd,e.isArray=jt,e.isArrayValid=eu,e.isBeaconsSupported=Bv,e.isBoolean=ti,e.isChromium=wf,e.isDate=nt,e.isDocumentObjectAvailable=Ma,e.isError=bt,e.isFetchSupported=Zl,e.isFunction=It,e.isGreaterThanZero=um,e.isIE=Tu,e.isLatency=yc,e.isNotTruthy=ho,e.isNullOrUndefined=rt,e.isNumber=rr,e.isObject=en,e.isReactNative=Jl,e.isSampledFlag=tm,e.isString=zt,e.isTruthy=qa,e.isTypeof=qt,e.isUint8ArrayAvailable=hi,e.isUndefined=Qe,e.isValidSpanId=_s,e.isValidTraceId=vi,e.isValidTraceParent=fl,e.isValueAssigned=wn,e.isValueKind=Zr,e.isWindowObjectAvailable=ot,e.isXhrSupported=Xl,e.mergeEvtNamespace=Xs,e.newGuid=pf,e.newId=tf,e.normalizeJsName=js,e.objDefineAccessors=ou,e.objForEachKey=Yr,e.objFreeze=Bi,e.objKeys=qn,e.objSeal=Yu,e.onConfigChange=sl,e.openXhr=tu,e.optimizeObject=sd,e.parseResponse=Gr,e.parseTraceParent=Zn,e.perfNow=xl,e.prependTransports=Gl,e.proxyAssign=cs,e.proxyFunctionAs=Oi,e.proxyFunctions=Kc,e.random32=tl,e.randomValue=Vv,e.removeEventHandler=d,e.removeEventListeners=D,e.removePageHideEventListener=K,e.removePageShowEventListener=ae,e.removePageUnloadEventListener=Y,e.safeGetCookieMgr=y,e.safeGetLogger=df,e.sanitizeProperty=Fi,e.setEnableEnvMocks=cd,e.setProcessTelemetryTimings=Sc,e.setValue=fi,e.strContains=Et,e.strEndsWith=zf,e.strFunction=t,e.strObject=r,e.strPrototype=s,e.strStartsWith=Mv,e.strTrim=xa,e.strUndefined=n,e.throwError=bn,e.toISOString=ss,e.useXDomainRequest=Xp})});var TS=Rd((Dg,ES)=>{(function(e,t){typeof Dg=="object"&&typeof ES<"u"?t(Dg):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.oneDS=e.oneDS||{}))})(Dg,function(e){"use strict";var t="REAL_TIME",r="NEAR_REAL_TIME",n="BEST_EFFORT",s="function",c="object",h="undefined",b="prototype",N=Object,k=N[b];function $(d,_){return d||_}function ne(d,_){return d[_]}var le=void 0,we=null,ge="",ve="function",ce="object",Pe="prototype",Ke="__proto__",ut="undefined",Fe="constructor",ft="Symbol",Ot="_polyfill",tr="length",ur="name",gr="call",xr="toString",pn=$(Object),vo=ne(pn,Pe),Yi=$(String),Vr=ne(Yi,Pe),Sn=$(Math),tt=$(Array),Ts=ne(tt,Pe),Ve=ne(Ts,"slice");function Ir(d,_){try{return{v:d.apply(this,_)}}catch(T){return{e:T}}}function vn(d){return function(_){return typeof _===d}}function Gt(d){return typeof d===ut||d===ut}function qt(d){return!rt(d)}function Qe(d){return d===we||Gt(d)}function xn(d){return d===we||!rt(d)}function rt(d){return!!d||d!==le}var Dc=vn("string"),Bt=vn(ve);function mo(d){return!d&&Qe(d)?!1:!!d&&typeof d===ce}var zt=ne(tt,"isArray"),It=vn("number"),en=vn("boolean");function jt(d){return!!(d&&d.then&&Bt(d.then))}var nt=ne(pn,"getOwnPropertyDescriptor");function rr(d,_){return!!d&&vo.hasOwnProperty[gr](d,_)}var ti=$(ne(pn,"hasOwn"),bt);function bt(d,_){return rr(d,_)||!!nt(d,_)}function qr(d,_,T){if(d&&mo(d)){for(var D in d)if(ti(d,D)&&_[gr](T||d,D,d[D])===-1)break}}var ho={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function qa(d){var _={};if(_[ho.c]=!0,_[ho.e]=!0,d.l){_.get=function(){return d.l.v};var T=nt(d.l,"v");T&&T.set&&(_.set=function(D){d.l.v=D})}return qr(d,function(D,R){_[ho[D]]=qt(R)?_[ho[D]]:R}),_}var Hr=ne(pn,"defineProperty");function Pn(d,_,T){return Hr(d,_,qa(T))}function $i(d,_,T,D,R){var Y={};return qr(d,function(q,K){Vn(Y,q,_?K:q,R),Vn(Y,K,T?K:q,R)}),D?D(Y):Y}function Vn(d,_,T,D){Hr(d,_,{value:T,enumerable:!0,writable:!!D})}var Yr=$(Yi),Wt="[object Error]";function fr(d,_){var T=ge,D=vo[xr][gr](d);D===Wt&&(d={stack:Yr(d.stack),message:Yr(d.message),name:Yr(d.name)});try{T=JSON.stringify(d,we,_?typeof _=="number"?_:4:le),T=(T?T.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):we)||Yr(d)}catch(R){T=" - "+fr(R,_)}return D+": "+T}function Br(d){throw new TypeError(d)}var ou=ne(pn,"freeze");function Hn(d){return d}function Ff(d){return d[Ke]||we}var Uu=ne(pn,"assign"),Wr=ne(pn,"keys");function _o(d){return ou&&qr(d,function(_,T){(zt(T)||mo(T))&&_o(T)}),Vt(d)}var Vt=$(ou,Hn),bn=$(ne(pn,"getPrototypeOf"),Ff);function Ba(d){return $i(d,1,0,Vt)}function Bo(d){return $i(d,0,0,Vt)}var qi=Bo({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Ld="__tsUtils$gblCfg",ju;function qn(){var d;return typeof globalThis!==ut&&(d=globalThis),!d&&typeof self!==ut&&(d=self),!d&&typeof window!==ut&&(d=window),!d&&typeof global!==ut&&(d=global),d}function Si(){if(!ju){var d=Ir(qn).v||{};ju=d[Ld]=d[Ld]||{}}return ju}var Bi=Yu;function Yu(d,_,T){var D=_?_[d]:we;return function(R){var Y=(R?R[d]:we)||D;if(Y||T){var q=arguments;return(Y||T).apply(R,Y?Ve[gr](q,1):q)}Br('"'+Yr(d)+'" not defined for '+fr(R))}}var ws=ne(Sn,"max"),ia=Bi("slice",Vr),Nr=Bi("substring",Vr),En=Yu("substr",Vr,bi);function bi(d,_,T){return Qe(d)&&Br("Invalid "+fr(d)),T<0?ge:(_=_||0,_<0&&(_=ws(_+d[tr],0)),Gt(T)?ia(d,_):ia(d,_,_+T))}function Bn(d,_){return Nr(d,0,_)}var go="_urid",Is;function Jr(){if(!Is){var d=Si();Is=d.gblSym=d.gblSym||{k:{},s:{}}}return Is}var Ca;function Fd(d){var _={description:Yr(d),toString:function(){return ft+"("+d+")"}};return _[Ot]=!0,_}function Uf(d){var _=Jr();if(!ti(_.k,d)){var T=Fd(d),D=Wr(_.s).length;T[go]=function(){return D+"_"+T[xr]()},_.k[d]=T,_.s[T[go]()]=Yr(d)}return _.k[d]}function Ud(d){!Ca&&(Ca={});var _,T=qi[d];return T&&(_=Ca[T]=Ca[T]||Fd(ft+"."+T)),_}var on;function yo(){on=Si()}function zo(d){return Hr({toJSON:function(){return d}},"v",{value:d})}var kn="window",Go;function su(d,_){var T;return function(){return!on&&yo(),(!T||on.lzy)&&(T=zo(Ir(d,_).v)),T.v}}function za(d){return!on&&yo(),(!Go||d===!1||on.lzy)&&(Go=zo(Ir(qn).v||we)),Go.v}function sn(d,_){var T;if(!Go||_===!1?T=za(_):T=Go.v,T&&T[d])return T[d];if(d===kn)try{return window}catch{}return we}var On=su(sn,["document"]);function $u(){return!!ri()}var ri=su(sn,[kn]);function wr(){return!!oa()}var oa=su(sn,["navigator"]),jf=su(function(){return!!Ir(function(){return process&&(process.versions||{}).node}).v}),ya,Vo;function Cc(){return ya=zo(Ir(sn,[ft]).v),ya}function Ho(d){var _=(on.lzy?0:ya)||Cc();return _.v?_.v[d]:le}function Yf(){return!!tn()}function tn(){return!on&&yo(),((on.lzy?0:ya)||Cc()).v}function El(d,_){var T=qi[d];!on&&yo();var D=(on.lzy?0:ya)||Cc();return D.v?D.v[T||d]:_?le:Ud(d)}function Ga(d,_){!on&&yo();var T=(on.lzy?0:ya)||Cc();return T.v?T.v(d):_?we:Fd(d)}function jd(d){return!on&&yo(),Vo=(on.lzy?0:Vo)||zo(Ir(Ho,["for"]).v),(Vo.v||Uf)(d)}function ni(d){return!!d&&Bt(d.next)}function Up(d){return!xn(d)&&Bt(d[El(3)])}var ai;function Tl(d,_,T){if(d&&(ni(d)||(!ai&&(ai=zo(El(3))),d=d[ai.v]?d[ai.v]():we),ni(d))){var D=le,R=le;try{for(var Y=0;!(R=d.next()).done&&_[gr](T||d,R.value,Y,d)!==-1;)Y++}catch(q){D={e:q},d.throw&&(R=we,d.throw(D))}finally{try{R&&!R.done&&d.return&&d.return(R)}finally{if(D)throw D.e}}}}function zi(d,_,T){return d.apply(_,T)}function $f(d,_){return!Gt(_)&&d&&(zt(_)?zi(d.push,d,_):ni(_)||Up(_)?Tl(_,function(T){d.push(T)}):d.push(_)),d}function hr(d,_,T){if(d)for(var D=d[tr]>>>0,R=0;R<D&&!(R in d&&_[gr](T||d,d[R],R,d)===-1);R++);}var Ko=Bi("indexOf",Ts);function qf(d,_,T){return((d?d.slice:we)||Ve).apply(d,Ve[gr](arguments,1))}var Va=$(ne(pn,"create"),xc);function xc(d){if(!d)return{};var _=typeof d;_!==ce&&_!==ve&&Br("Prototype must be an Object or function: "+fr(d));function T(){}return T[Pe]=d,new T}var xt;function ii(d,_){var T=pn.setPrototypeOf||function(D,R){var Y;!xt&&(xt=zo((Y={},Y[Ke]=[],Y instanceof Array))),xt.v?D[Ke]=R:qr(R,function(q,K){return D[q]=K})};return T(d,_)}function qu(d,_,T){Ir(Pn,[_,ur,{v:d,c:!0,e:!1}]),_=ii(_,T);function D(){this[Fe]=_,Ir(Pn,[this,ur,{v:d,c:!0,e:!1}])}return _[Pe]=T===we?Va(T):(D[Pe]=T[Pe],new D),_}function wl(d,_){_&&(d[ur]=_)}function kv(d,_,T){var D=T||Error,R=D[Pe][ur],Y=Error.captureStackTrace;return qu(d,function(){var q=this,K=arguments;try{Ir(wl,[D,d]);var re=zi(D,q,Ve[gr](K))||q;if(re!==q){var ae=bn(q);ae!==bn(re)&&ii(re,ae)}return Y&&Y(re,q[Fe]),_&&_(re,K),re}finally{Ir(wl,[D,R])}},D)}function Ei(){return(Date.now||Il)()}function Il(){return new Date().getTime()}function Yd(d){return function(T){return Qe(T)&&Br("strTrim called ["+fr(T)+"]"),T&&T.replace&&(T=T.replace(d,ge)),T}}var uu=Yd(/^\s+|(?=\s)\s+$/g),Ti=Yu("trim",Vr,uu),dt,sa,cu;function Ns(d){if(!d||typeof d!==ce)return!1;cu||(cu=$u()?ri():!0);var _=!1;if(d!==cu){sa||(dt=Function[Pe][xr],sa=dt[gr](pn));try{var T=bn(d);_=!T,_||(rr(T,Fe)&&(T=T[Fe]),_=!!(T&&typeof T===ve&&dt[gr](T)===sa))}catch{}}return _}function $d(){return Ei()}var qd=Bi("indexOf",Vr),Kn=Yu("startsWith",Vr,oi);function oi(d,_,T){Dc(d)||Br("'"+fr(d)+"' is not a string");var D=Dc(_)?_:Yr(_),R=T>0?T:0;return Nr(d,R,R+D[tr])===D}var Bd="ref",wi="unref",Ha="hasRef",Im="enabled";function Ov(d,_,T){var D=!0,R=d?_(we):we,Y;function q(){return D=!1,R&&R[wi]&&R[wi](),Y}function K(){R&&T(R),R=we}function re(){return R=_(R),D||q(),Y}function ae(Ne){!Ne&&R&&K(),Ne&&!R&&re()}return Y={cancel:K,refresh:re},Y[Ha]=function(){return R&&R[Ha]?R[Ha]():D},Y[Bd]=function(){return D=!0,R&&R[Bd]&&R[Bd](),Y},Y[wi]=q,Y=Hr(Y,Im,{get:function(){return!!R},set:ae}),{h:Y,dn:function(){R=we}}}function jp(d,_,T){var D=zt(_),R=D?_.length:0,Y=(R>0?_[0]:D?le:_)||setTimeout,q=(R>1?_[1]:le)||clearTimeout,K=T[0];T[0]=function(){re.dn(),zi(K,le,Ve[gr](arguments))};var re=Ov(d,function(ae){if(ae){if(ae.refresh)return ae.refresh(),ae;zi(q,le,[ae])}return zi(Y,le,T)},function(ae){zi(q,le,[ae])});return re.h}function lu(d,_){return jp(!0,le,Ve[gr](arguments))}function Yp(d,_,T){return jp(!0,d,Ve[gr](arguments,1))}(za()||{}).Symbol,(za()||{}).Reflect;var uh="hasOwnProperty",zd=function(d,_){return zd=N.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,D){T.__proto__=D}||function(T,D){for(var R in D)D[uh](R)&&(T[R]=D[R])},zd(d,_)};function xa(d,_){typeof _!==s&&_!==null&&Br("Class extends value "+String(_)+" is not a constructor or null"),zd(d,_);function T(){this.constructor=d}d[b]=_===null?Va(_):(T[b]=_[b],new T)}var Nl,Dl="constructor",Gi="prototype",si="function",fu="_dynInstFuncs",$p="_isDynProxy",Ii="_dynClass",Gd="_dynCls$",Bu="_dynInstChk",Pc=Bu,Cl="_dfOpts",Bf="_unknown_",Vd="__proto__",qp="_dyn"+Vd,Bp="__dynProto$Gbl",du="_dynInstProto",Hd="useBaseInst",Ds="setInstFuncs",zu=Object,Ni=zu.getPrototypeOf,xl=zu.getOwnPropertyNames,zf=za(),Ac=zf[Bp]||(zf[Bp]={o:(Nl={},Nl[Ds]=!0,Nl[Hd]=!0,Nl),n:1e3});function Vi(d){return d&&(d===zu[Gi]||d===Array[Gi])}function Mv(d){return Vi(d)||d===Function[Gi]}function Wo(d){var _;if(d){if(Ni)return Ni(d);var T=d[Vd]||d[Gi]||(d[Dl]?d[Dl][Gi]:null);_=d[qp]||T,rr(d,qp)||(delete d[du],_=d[qp]=d[du]||d[qp],d[du]=T)}return _}function So(d,_){var T=[];if(xl)T=xl(d);else for(var D in d)typeof D=="string"&&rr(d,D)&&T.push(D);if(T&&T.length>0)for(var R=0;R<T.length;R++)_(T[R])}function Hi(d,_,T){return _!==Dl&&typeof d[_]===si&&(T||rr(d,_))&&_!==Vd&&_!==Gi}function pu(d){Br("DynamicProto: "+d)}function Gf(d){var _=Va(null);return So(d,function(T){!_[T]&&Hi(d,T,!1)&&(_[T]=d[T])}),_}function Rc(d,_){for(var T=d.length-1;T>=0;T--)if(d[T]===_)return!0;return!1}function kc(d,_,T,D){function R(re,ae,Ne){var Ye=ae[Ne];if(Ye[$p]&&D){var Ue=re[fu]||{};Ue[Pc]!==!1&&(Ye=(Ue[ae[Ii]]||{})[Ne]||Ye)}return function(){return Ye.apply(re,arguments)}}var Y=Va(null);So(T,function(re){Y[re]=R(_,T,re)});for(var q=Wo(d),K=[];q&&!Mv(q)&&!Rc(K,q);)So(q,function(re){!Y[re]&&Hi(q,re,!Ni)&&(Y[re]=R(_,q,re))}),K.push(q),q=Wo(q);return Y}function Gu(d,_,T,D){var R=null;if(d&&rr(T,Ii)){var Y=d[fu]||Va(null);if(R=(Y[T[Ii]]||Va(null))[_],R||pu("Missing ["+_+"] "+si),!R[Bu]&&Y[Pc]!==!1){for(var q=!rr(d,_),K=Wo(d),re=[];q&&K&&!Mv(K)&&!Rc(re,K);){var ae=K[_];if(ae){q=ae===D;break}re.push(K),K=Wo(K)}try{q&&(d[_]=R),R[Bu]=1}catch{Y[Pc]=!1}}}return R}function Vf(d,_,T){var D=_[d];return D===T&&(D=Wo(_)[d]),typeof D!==si&&pu("["+d+"] is not a "+si),D}function Pl(d,_,T,D,R){function Y(re,ae){var Ne=function(){var Ye=Gu(this,ae,re,Ne)||Vf(ae,re,Ne);return Ye.apply(this,arguments)};return Ne[$p]=1,Ne}if(!Vi(d)){var q=T[fu]=T[fu]||Va(null);if(!Vi(q)){var K=q[_]=q[_]||Va(null);q[Pc]!==!1&&(q[Pc]=!!R),Vi(K)||So(T,function(re){Hi(T,re,!1)&&T[re]!==D[re]&&(K[re]=T[re],delete T[re],(!rr(d,re)||d[re]&&!d[re][$p])&&(d[re]=Y(d,re)))})}}}function Hf(d,_){if(Ni){for(var T=[],D=Wo(_);D&&!Mv(D)&&!Rc(T,D);){if(D===d)return!0;T.push(D),D=Wo(D)}return!1}return!0}function Vu(d,_){return rr(d,Gi)?d.name||_||Bf:((d||{})[Dl]||{}).name||_||Bf}function Ki(d,_,T,D){rr(d,Gi)||pu("theClass is an invalid class definition.");var R=d[Gi];Hf(R,_)||pu("["+Vu(d)+"] not in hierarchy of ["+Vu(_)+"]");var Y=null;rr(R,Ii)?Y=R[Ii]:(Y=Gd+Vu(d,"_")+"$"+Ac.n,Ac.n++,R[Ii]=Y);var q=Ki[Cl],K=!!q[Hd];K&&D&&D[Hd]!==void 0&&(K=!!D[Hd]);var re=Gf(_),ae=kc(R,_,re,K);T(_,ae);var Ne=!!Ni&&!!q[Ds];Ne&&D&&(Ne=!!D[Ds]),Pl(R,Y,_,re,Ne!==!1)}Ki[Cl]=Ac.o;var Oc=Ba,bo=Oc({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),ui="toLowerCase",Jo="blkVal",zr="length",Cs="rdOnly",Wi="notify",Mc="warnToConsole",Lc="throwInternal",Zo="setDf",Al="watch",Xo="logger",vu="apply",Ka="push",Kd="splice",Hu="hdlr",Pa="cancel",Kf="initialize",Wd="identifier",Rl="isInitialized",kl="value",Jd="getPlugin",Lv="name",Ku="time",Eo="processNext",Ji="getProcessTelContext",mn="unload",Ol="loggingLevelConsole",Wu="createNew",Ju="teardown",Zd="messageId",Di="message",mu="isAsync",xs="diagLog",cr="_doTeardown",To="update",Qo="getNext",Ci="setNextPlugin",Wf="protocol",xi="userAgent",hu="split",un="nodeType",Wa="replace",Or="logInternalMessage",pt="type",Zu="handler",wo="status",Ps="getResponseHeader",Zi="getAllResponseHeaders",_u="isChildEvt",Pi="data",Fr="getCtx",Io="setCtx",Mr="complete",No="urlString",Jf="sendPOST",Do="headers",An="timeout",Xi="setRequestHeader",es;function Sa(d,_){es||(es=kv("AggregationError",function(D,R){R[zr]>1&&(D.errors=R[1])}));var T=d||"One or more errors occurred.";throw hr(_,function(D,R){T+=`
`.concat(R," > ").concat(fr(D))}),new es(T,_||[])}var Aa="Promise",Fc="rejected";function Xu(d,_){return Zf(d,function(T){return _?_({status:"fulfilled",rejected:!1,value:T}):T},function(T){return _?_({status:Fc,rejected:!0,reason:T}):T})}function Zf(d,_,T,D){var R=d;try{if(jt(d))(_||T)&&(R=d.then(_,T));else try{_&&(R=_(d))}catch(Y){if(T)R=T(Y);else throw Y}}finally{D&&As(R,D)}return R}function As(d,_){var T=d;return _&&(jt(d)?d.finally?T=d.finally(_):T=d.then(function(D){return _(),D},function(D){throw _(),D}):_()),T}var Co=["pending","resolving","resolved",Fc],xo="dispatchEvent",Qu;function Po(d){var _;return d&&d.createEvent&&(_=d.createEvent("Event")),!!_&&_.initEvent}function Mn(d,_,T,D){var R=On();!Qu&&(Qu=zo(!!Ir(Po,[R]).v));var Y=Qu.v?R.createEvent("Event"):D?new Event(_):{};if(T&&T(Y),Qu.v&&Y.initEvent(_,!1,!0),Y&&d[xo])d[xo](Y);else{var q=d["on"+_];if(q)q(Y);else{var K=sn("console");K&&(K.error||K.log)(_,fr(Y))}}}var Xf="unhandledRejection",ec=Xf.toLowerCase(),Rs=10,ci;function ts(d){return Bt(d)?d.toString():fr(d)}function ks(d,_,T){var D=qf(arguments,3),R=0,Y=!1,q,K=[],re=!1,ae=null,Ne;function Ye(Ee,$e){try{re=!0,ae&&ae.cancel(),ae=null;var $t=d(function(Zt,or){K.push(function(){try{var Dr=R===2?Ee:$e,Lr=Gt(Dr)?q:Bt(Dr)?Dr(q):Dr;jt(Lr)?Lr.then(Zt,or):Dr?Zt(Lr):R===3?or(Lr):Zt(Lr)}catch(ln){or(ln)}}),Y&&Le()},D);return $t}finally{}}function Ue(Ee){return Ye(void 0,Ee)}function Ie(Ee){var $e=Ee,$t=Ee;return Bt(Ee)&&($e=function(Zt){return Ee&&Ee(),Zt},$t=function(Zt){throw Ee&&Ee(),Zt}),Ye($e,$t)}function fe(){return Co[R]}function Le(){if(K.length>0){var Ee=K.slice();K=[],re=!0,ae&&ae.cancel(),ae=null,_(Ee)}}function be(Ee,$e){return function($t){if(R===$e){if(Ee===2&&jt($t)){R=1,$t.then(be(2,1),be(3,1));return}R=Ee,Y=!0,q=$t,Le(),!re&&Ee===3&&!ae&&(ae=lu(He,Rs))}}}function He(){if(!re)if(re=!0,jf())process.emit(Xf,q,Ne);else{var Ee=ri()||za();!ci&&(ci=zo(Ir(sn,[Aa+"RejectionEvent"]).v)),Mn(Ee,ec,function($e){return Pn($e,"promise",{g:function(){return Ne}}),$e.reason=q,$e},!!ci.v)}}Ne={then:Ye,catch:Ue,finally:Ie},Hr(Ne,"state",{get:fe}),Yf()&&(Ne[El(11)]="IPromise");function De(){return"IPromise "+fe()+(Y?" - "+ts(q):"")}return Ne.toString=De,function(){Bt(T)||Br(Aa+": executor is not a function - "+ts(T));var $e=be(3,0);try{T.call(Ne,be(2,0),$e)}catch($t){$e($t)}}(),Ne}function Ai(d){hr(d,function(_){try{_()}catch{}})}function Uc(d){var _=It(d)?d:0;return function(T){lu(function(){Ai(T)},_)}}function gu(d,_){return ks(gu,Uc(_),d,_)}var ua;function yu(d,_){!ua&&(ua=zo(Ir(sn,[Aa]).v||null));var T=ua.v;if(!T)return gu(d);Bt(d)||Br(Aa+": executor is not a function - "+fr(d));var D=0;function R(){return Co[D]}var Y=new T(function(q,K){function re(Ne){D=2,q(Ne)}function ae(Ne){D=3,K(Ne)}d(re,ae)});return Hr(Y,"state",{get:R}),Y}var Os;function Ri(d,_){return!Os&&(Os=zo(yu)),Os.v.call(this,d,_)}var tc=void 0,cn="",Wn="core",ki="disabled",rc="extensionConfig",rs="processTelemetry",Xd="priority",li="getPerfMgr",jc="Not dynamic - ",ba=/-([a-z])/g,Qf=/([^\w\d_$])/g,Ja=/^(\d+[\w\d_$])/;function ns(d){return!Qe(d)}function as(d){var _=d;return _&&Dc(_)&&(_=_[Wa](ba,function(T,D){return D.toUpperCase()}),_=_[Wa](Qf,"_"),_=_[Wa](Ja,function(T,D){return"_"+D})),_}function Qd(d,_){return d&&_?qd(d,_)!==-1:!1}function Ml(d,_){var T=null,D=null;return Bt(d)?T=d:D=d,function(){var R=arguments;if(T&&(D=T()),D)return D[_][vu](D,R)}}function ed(d,_,T,D,R){d&&_&&T&&(R!==!1||Gt(d[_]))&&(d[_]=Ml(T,D))}function Ll(d,_,T,D){return d&&_&&mo(d)&&zt(T)&&hr(T,function(R){Dc(R)&&ed(d,R,_,R,D)}),d}function Ao(d){return d&&Uu&&(d=N(Uu({},d))),d}function Za(d){try{return d.responseText}catch{}return null}function Yc(d,_){return d?"XDomainRequest,Response:"+Za(d)||"":_}function Fv(d,_){return d?"XMLHttpRequest,Status:"+d[wo]+",Response:"+Za(d)||d.response||"":_}function nc(d,_){return _&&(It(_)?d=[_].concat(d):zt(_)&&(d=_.concat(d))),d}var ac="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",is="withCredentials",Fl="timeout";function Nm(d,_,T,D,R,Y){D===void 0&&(D=!1),R===void 0&&(R=!1);function q(re,ae,Ne){try{re[ae]=Ne}catch{}}var K=new XMLHttpRequest;return D&&q(K,ac,D),T&&q(K,is,T),K.open(d,_,!R),T&&q(K,is,T),!R&&Y&&q(K,Fl,Y),K}function ep(d){var _={};if(Dc(d)){var T=Ti(d)[hu](/[\r\n]+/);hr(T,function(D){if(D){var R=D.indexOf(": ");if(R!==-1){var Y=Ti(D.substring(0,R))[ui](),q=Ti(D.substring(R+1));_[Y]=q}else _[Ti(D)]=1}})}return _}function Ul(d,_,T){if(!d[T]&&_&&_[Ps]){var D=_[Ps](T);D&&(d[T]=Ti(D))}return d}var ic="kill-duration",zp="kill-duration-seconds",Uv="time-delta-millis";function oc(d,_){var T={};return d[Zi]?T=ep(d[Zi]()):_&&(T=Ul(T,d,Uv),T=Ul(T,d,ic),T=Ul(T,d,zp)),T}var jv="location",jl="console",tp="JSON",Qi="crypto",Gp="msCrypto",Dm="ReactNative",td="msie",Vp="trident/",rp="XMLHttpRequest",$c=null,rd=null,sc=!1,Ms=null,qc=null;function Yv(d,_){var T=!1;if(d){try{if(T=_ in d,!T){var D=d[b];D&&(T=_ in D)}}catch{}if(!T)try{var R=new d;T=!Gt(R[_])}catch{}}return T}function np(d){if(d&&sc){var _=sn("__mockLocation");if(_)return _}return typeof location===c&&location?location:sn(jv)}function Bc(){return typeof console!==h?console:sn(jl)}function ap(){return!!(typeof JSON===c&&JSON||sn(tp)!==null)}function Ls(){return ap()?JSON||sn(tp):null}function Ur(){return sn(Qi)}function uc(){return sn(Gp)}function ca(){var d=oa();return d&&d.product?d.product===Dm:!1}function ip(){var d=oa();if(d&&(d[xi]!==rd||$c===null)){rd=d[xi];var _=(rd||cn)[ui]();$c=Qd(_,td)||Qd(_,Vp)}return $c}function nd(d){return(qc===null||d===!1)&&(qc=wr()&&!!oa().sendBeacon),qc}function zc(d){var _=!1;try{_=!!sn("fetch");var T=sn("Request");_&&d&&T&&(_=Yv(T,"keepalive"))}catch{}return _}function cc(){return Ms===null&&(Ms=typeof XDomainRequest!==h,Ms&&Xa()&&(Ms=Ms&&!Yv(sn(rp),"withCredentials"))),Ms}function Xa(){var d=!1;try{var _=sn(rp);d=!!_}catch{}return d}var ad=4294967296,Jn=4294967295,vr=123456789,Fs=987654321,_n=!1,os=vr,lc=Fs;function fc(d){d<0&&(d>>>=0),os=vr+d&Jn,lc=Fs-d&Jn,_n=!0}function Us(){try{var d=Ei()&2147483647;fc((Math.random()*ad^d)+d)}catch{}}function eo(d){var _=0,T=Ur()||uc();return T&&T.getRandomValues&&(_=T.getRandomValues(new Uint32Array(1))[0]&Jn),_===0&&ip()&&(_n||Us(),_=Yl()&Jn),_===0&&(_=Math.floor(ad*Math.random()|0)),d||(_>>>=0),_}function Yl(d){lc=36969*(lc&65535)+(lc>>16)&Jn,os=18e3*(os&65535)+(os>>16)&Jn;var _=(lc<<16)+(os&65535)>>>0&Jn|0;return d||(_>>>=0),_}function Hp(d){d===void 0&&(d=22);for(var _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=eo()>>>0,D=0,R=cn;R[zr]<d;)D++,R+=_.charAt(T&63),T>>>=6,D===5&&(T=(eo()<<2&4294967295|T&3)>>>0,D=0);return R}var $l="3.3.4",Kp="."+Hp(6),ql=0;function Gc(d){return d[un]===1||d[un]===9||!+d[un]}function op(d,_){var T=_[d.id];if(!T){T={};try{Gc(_)&&Pn(_,d.id,{e:!1,v:T})}catch{}}return T}function zn(d,_){return _===void 0&&(_=!1),as(d+ql+++(_?"."+$l:cn)+Kp)}function Vc(d){var _={id:zn("_aiData-"+(d||cn)+"."+$l),accept:function(T){return Gc(T)},get:function(T,D,R,Y){var q=T[_.id];return q?q[as(D)]:(Y&&(q=op(_,T),q[as(D)]=R),R)},kill:function(T,D){if(T&&T[D])try{delete T[D]}catch{}}};return _}function la(d){return d&&mo(d)&&(d.isVal||d.fb||ti(d,"v")||ti(d,"mrg")||ti(d,"ref")||d.set)}function Su(d,_,T){var D,R=T.dfVal||rt;if(_&&T.fb){var Y=T.fb;zt(Y)||(Y=[Y]);for(var q=0;q<Y[zr];q++){var K=Y[q],re=_[K];if(R(re)?D=re:d&&(re=d.cfg[K],R(re)&&(D=re),d.set(d.cfg,Yr(K),re)),R(D))break}}return!R(D)&&R(T.v)&&(D=T.v),D}function sp(d,_,T){var D=T;if(T&&la(T)&&(D=Su(d,_,T)),D){la(D)&&(D=sp(d,_,D));var R;zt(D)?(R=[],R[zr]=D[zr]):Ns(D)&&(R={}),R&&(qr(D,function(Y,q){q&&la(q)&&(q=sp(d,_,q)),R[Y]=q}),D=R)}return D}function id(d,_,T,D){var R,Y,q,K=D,re,ae,Ne,Ye;la(K)?(R=K.isVal,Y=K.set,Ne=K[Cs],Ye=K[Jo],re=K.mrg,ae=K.ref,!ae&&Gt(ae)&&(ae=!!re),q=Su(d,_,K)):q=D,Ye&&d[Jo](_,T);var Ue,Ie=!0,fe=_[T];(fe||!Qe(fe))&&(Ue=fe,Ie=!1,R&&Ue!==q&&!R(Ue)&&(Ue=q,Ie=!0),Y&&(Ue=Y(Ue,q,_),Ie=Ue===q)),Ie?q?Ue=sp(d,_,q):Ue=q:(Ns(Ue)||zt(q))&&re&&q&&(Ns(q)||zt(q))&&qr(q,function(Le,be){id(d,Ue,Le,be)}),d.set(_,T,Ue),ae&&d.ref(_,T),Ne&&d[Cs](_,T)}var fa=jd("[[ai_dynCfg_1]]"),od=jd("[[ai_blkDynCfg_1]]"),up=jd("[[ai_frcDynCfg_1]]");function js(d){if(d){var _;if(zt(d)?(_=[],_[zr]=d[zr]):Ns(d)&&(_={}),_)return qr(d,function(T,D){_[T]=js(D)}),_}return d}function Et(d){if(d){var _=d[fa]||d;if(_.cfg&&(_.cfg===d||_.cfg[fa]===_))return _}return null}function ss(d){if(d&&(Ns(d)||zt(d)))try{d[od]=!0}catch{}return d}function us(d,_,T){var D=!1;return T&&!d[_.blkVal]&&(D=T[up],!D&&!T[od]&&(D=Ns(T)||zt(T))),D}function fi(d){Br("InvalidAccess:"+d)}var Bl=["push","pop","shift","unshift","splice"],Hc=function(d,_,T,D){d&&d[Lc](3,108,"".concat(T," [").concat(_,"] failed - ")+fr(D))};function cs(d,_,T){zt(_)&&hr(Bl,function(D){var R=_[D];_[D]=function(){for(var Y=[],q=0;q<arguments.length;q++)Y[q]=arguments[q];var K=R[vu](this,Y);return zl(d,_,T,"Patching"),K}})}function Oi(d,_){var T=nt(d,_);return T&&T.get}function Kc(d,_,T,D){var R={n:T,h:[],trk:function(ae){ae&&ae.fn&&(Ko(R.h,ae)===-1&&R.h[Ka](ae),d.trk(ae,R))},clr:function(ae){var Ne=Ko(R.h,ae);Ne!==-1&&R.h[Kd](Ne,1)}},Y=!0,q=!1;function K(){Y&&(q=q||us(K,d,D),D&&!D[fa]&&q&&(D=zl(d,D,T,"Converting")),Y=!1);var ae=d.act;return ae&&R.trk(ae),D}K[d.prop]={chng:function(){d.add(R)}};function re(ae){if(D!==ae){K[d.ro]&&!d.upd&&fi("["+T+"] is read-only:"+fr(_)),Y&&(q=q||us(K,d,D),Y=!1);var Ne=q&&K[d.rf];if(q)if(Ne){qr(D,function(Ue){D[Ue]=ae?ae[Ue]:tc});try{qr(ae,function(Ue,Ie){sd(d,D,Ue,Ie)}),ae=D}catch(Ue){Hc((d.hdlr||{})[Xo],T,"Assigning",Ue),q=!1}}else D&&D[fa]&&qr(D,function(Ue){var Ie=Oi(D,Ue);if(Ie){var fe=Ie[d.prop];fe&&fe.chng()}});if(ae!==D){var Ye=ae&&us(K,d,ae);!Ne&&Ye&&(ae=zl(d,ae,T,"Converting")),D=ae,q=Ye}d.add(R)}}Pn(_,R.n,{g:K,s:re})}function sd(d,_,T,D){if(_){var R=Oi(_,T),Y=R&&!!R[d.prop];Y?_[T]=D:Kc(d,_,T,D)}return _}function Ys(d,_,T,D){if(_){var R=Oi(_,T),Y=R&&!!R[d.prop],q=D&&D[0],K=D&&D[1],re=D&&D[2];if(!Y){if(re)try{ss(_)}catch(ae){Hc((d.hdlr||{})[Xo],T,"Blocking",ae)}try{sd(d,_,T,_[T]),R=Oi(_,T)}catch(ae){Hc((d.hdlr||{})[Xo],T,"State",ae)}}q&&(R[d.rf]=q),K&&(R[d.ro]=K),re&&(R[d.blkVal]=!0)}return _}function zl(d,_,T,D){try{qr(_,function(R,Y){sd(d,_,R,Y)}),_[fa]||(Hr(_,fa,{get:function(){return d[Hu]}}),cs(d,_,T))}catch(R){Hc((d.hdlr||{})[Xo],T,D,R)}return _}var Wc="[[ai_",Gl="]]";function cp(d){var _,T=Ga(Wc+"get"+d.uid+Gl),D=Ga(Wc+"ro"+d.uid+Gl),R=Ga(Wc+"rf"+d.uid+Gl),Y=Ga(Wc+"blkVal"+d.uid+Gl),q=Ga(Wc+"dtl"+d.uid+Gl),K=null,re=null,ae;function Ne(fe,Le){var be=ae.act;try{ae.act=fe,fe&&fe[q]&&(hr(fe[q],function(De){De.clr(fe)}),fe[q]=[]),Le({cfg:d.cfg,set:d.set.bind(d),setDf:d[Zo].bind(d),ref:d.ref.bind(d),rdOnly:d[Cs].bind(d)})}catch(De){var He=d[Xo];throw He&&He[Lc](1,107,fr(De)),De}finally{ae.act=be||null}}function Ye(){if(K){var fe=K;K=null,re&&re[Pa](),re=null;var Le=[];if(hr(fe,function(be){if(be&&(be[q]&&(hr(be[q],function(He){He.clr(be)}),be[q]=null),be.fn))try{Ne(be,be.fn)}catch(He){Le[Ka](He)}}),K)try{Ye()}catch(be){Le[Ka](be)}Le[zr]>0&&Sa("Watcher error(s): ",Le)}}function Ue(fe){if(fe&&fe.h[zr]>0){K||(K=[]),re||(re=lu(function(){re=null,Ye()},0));for(var Le=0;Le<fe.h[zr];Le++){var be=fe.h[Le];be&&Ko(K,be)===-1&&K[Ka](be)}}}function Ie(fe,Le){if(fe){var be=fe[q]=fe[q]||[];Ko(be,Le)===-1&&be[Ka](Le)}}return ae=(_={prop:T,ro:D,rf:R},_[Jo]=Y,_[Hu]=d,_.add=Ue,_[Wi]=Ye,_.use=Ne,_.trk=Ie,_),ae}function lp(d,_){var T={fn:_,rm:function(){T.fn=null,d=null,_=null}};return Pn(T,"toJSON",{v:function(){return"WatcherHandler"+(T.fn?"":"[X]")}}),d.use(T,_),T}function Wp(d,_,T){var D,R=Et(_);if(R)return R;var Y=zn("dyncfg",!0),q=_&&T!==!1?_:js(_),K;function re(){K[Wi]()}function ae(He,De,Ee){try{He=sd(K,He,De,Ee)}catch($e){Hc(d,De,"Setting value",$e)}return He[De]}function Ne(He){return lp(K,He)}function Ye(He,De){K.use(null,function(Ee){var $e=K.upd;try{Gt(De)||(K.upd=De),He(Ee)}finally{K.upd=$e}})}function Ue(He,De){var Ee;return Ys(K,He,De,(Ee={},Ee[0]=!0,Ee))[De]}function Ie(He,De){var Ee;return Ys(K,He,De,(Ee={},Ee[1]=!0,Ee))[De]}function fe(He,De){var Ee;return Ys(K,He,De,(Ee={},Ee[2]=!0,Ee))[De]}function Le(He,De){return De&&qr(De,function(Ee,$e){id(be,He,Ee,$e)}),He}var be=(D={uid:null,cfg:q},D[Xo]=d,D[Wi]=re,D.set=ae,D[Zo]=Le,D[Al]=Ne,D.ref=Ue,D[Cs]=Ie,D[Jo]=fe,D._block=Ye,D);return Pn(be,"uid",{c:!1,e:!1,w:!1,v:Y}),K=cp(be),zl(K,q,"config","Creating"),be}function Cm(d,_){d?(d[Mc](_),d[Lc](2,108,_)):fi(_)}function ls(d,_,T,D){var R=Wp(T,d||{},D);return _&&R[Zo](R.cfg,_),R}function $s(d,_,T){var D=d[fa]||d;return D.cfg&&(D.cfg===d||D.cfg[fa]===D)?D[Al](_):(Cm(T,jc+fr(d)),ls(d,null,T)[Al](_))}var fs="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Mi=null;function qs(){var d=sn("Microsoft");return d&&(Mi=d.ApplicationInsights),Mi}function bu(d){var _=Mi;return!_&&d.disableDbgExt!==!0&&(_=Mi||qs()),_?_.ChromeDbgExt:null}var di,Jc="warnToConsole",$v="AI (Internal): ",dc="AI: ",Jp="AITR_",Vl={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Zc=(di={},di[0]=null,di[1]="errorToConsole",di[2]=Jc,di[3]="debugToConsole",di);function Hl(d){return d?'"'+d[Wa](/\"/g,cn)+'"':cn}function Bs(d,_){var T=Bc();if(T){var D="log";T[d]&&(D=d),Bt(T[D])&&T[D](_)}}var Li=function(){function d(_,T,D,R){D===void 0&&(D=!1);var Y=this;Y[Zd]=_,Y[Di]=(D?dc:$v)+_;var q=cn;ap()&&(q=Ls().stringify(R));var K=(T?" message:"+Hl(T):cn)+(R?" props:"+Hl(q):cn);Y[Di]+=K}return d.dataType="MessageData",d}();function Xc(d,_){return(d||{})[Xo]||new Kl(_)}var Kl=function(){function d(_){this.identifier="DiagnosticLogger",this.queue=[];var T=0,D={},R,Y,q,K,re;Ki(d,this,function(ae){re=Ye(_||{}),ae.consoleLoggingLevel=function(){return R},ae[Lc]=function(fe,Le,be,He,De){De===void 0&&(De=!1);var Ee=new Li(Le,be,De,He);if(K)throw fr(Ee);var $e=Zc[fe]||Jc;if(Gt(Ee[Di]))Ie("throw"+(fe===1?"Critical":"Warning"),Ee);else{if(De){var $t=+Ee[Zd];!D[$t]&&R>=fe&&(ae[$e](Ee[Di]),D[$t]=!0)}else R>=fe&&ae[$e](Ee[Di]);Ne(fe,Ee)}},ae.debugToConsole=function(fe){Bs("debug",fe),Ie("warning",fe)},ae[Mc]=function(fe){Bs("warn",fe),Ie("warning",fe)},ae.errorToConsole=function(fe){Bs("error",fe),Ie("error",fe)},ae.resetInternalMessageCount=function(){T=0,D={}},ae[Or]=Ne,ae[mn]=function(fe){re&&re.rm(),re=null};function Ne(fe,Le){if(!Ue()){var be=!0,He=Jp+Le[Zd];if(D[He]?be=!1:D[He]=!0,be&&(fe<=Y&&(ae.queue[Ka](Le),T++,Ie(fe===1?"error":"warn",Le)),T===q)){var De="Internal events throttle limit per PageView reached for this app.",Ee=new Li(23,De,!1);ae.queue[Ka](Ee),fe===1?ae.errorToConsole(De):ae[Mc](De)}}}function Ye(fe){return $s(ls(fe,Vl,ae).cfg,function(Le){var be=Le.cfg;R=be[Ol],Y=be.loggingLevelTelemetry,q=be.maxMessageLimit,K=be.enableDebug})}function Ue(){return T>=q}function Ie(fe,Le){var be=bu(_||{});be&&be[xs]&&be[xs](fe,Le)}})}return d.__ieDyn=1,d}();function ud(d){return d||new Kl}function da(d,_,T,D,R,Y){Y===void 0&&(Y=!1),ud(d)[Lc](_,T,D,R,Y)}function zs(d,_){ud(d)[Mc](_)}var pa="ctx",cd="ParentContextKey",Eu="ChildrenContextKey",ld=function(){function d(_,T,D){var R=this;if(R.start=Ei(),R[Lv]=_,R[mu]=D,R[_u]=function(){return!1},Bt(T)){var Y;Pn(R,"payload",{g:function(){return!Y&&Bt(T)&&(Y=T(),T=null),Y}})}R[Fr]=function(q){return q?q===d[cd]||q===d[Eu]?R[q]:(R[pa]||{})[q]:null},R[Io]=function(q,K){if(q)if(q===d[cd])R[q]||(R[_u]=function(){return!0}),R[q]=K;else if(q===d[Eu])R[q]=K;else{var re=R[pa]=R[pa]||{};re[q]=K}},R[Mr]=function(){var q=0,K=R[Fr](d[Eu]);if(zt(K))for(var re=0;re<K[zr];re++){var ae=K[re];ae&&(q+=ae[Ku])}R[Ku]=Ei()-R.start,R.exTime=R[Ku]-q,R[Mr]=function(){}}}return d.ParentContextKey="parent",d.ChildrenContextKey="childEvts",d}(),Ra="CoreUtils.doPerf";function va(d,_,T,D,R){if(d){var Y=d;if(Y[li]&&(Y=Y[li]()),Y){var q=void 0,K=Y[Fr](Ra);try{if(q=Y.create(_(),D,R),q){if(K&&q[Io]&&(q[Io](ld[cd],K),K[Fr]&&K[Io])){var re=K[Fr](ld[Eu]);re||(re=[],K[Io](ld[Eu],re)),re[Ka](q)}return Y[Io](Ra,q),T(q)}}catch(ae){q&&q[Io]&&q[Io]("exception",ae)}finally{q&&Y.fire(q),Y[Io](Ra,K)}}}return T()}var Zp=Vc("plugin");function Wl(d){return Zp.get(d,"state",{},!0)}var Jl="TelemetryPluginChain",Tu="_hasRun",qv="_getTelCtx",Bv=0;function Zl(d,_,T){for(;d;){if(d[Jd]()===T)return d;d=d[Qo]()}return Ql([T],_.config||{},_)}function Xp(d,_,T,D){var R=null,Y=[];_||(_=ls({},null,T[Xo])),D!==null&&(R=D?Zl(d,T,D):d);var q={_next:re,ctx:{core:function(){return T},diagLog:function(){return Xc(T,_.cfg)},getCfg:function(){return _.cfg},getExtCfg:Ne,getConfig:Ye,hasNext:function(){return!!R},getNext:function(){return R},setNext:function(Ie){R=Ie},iterate:Ue,onComplete:K}};function K(Ie,fe){for(var Le=[],be=2;be<arguments.length;be++)Le[be-2]=arguments[be];Ie&&Y[Ka]({func:Ie,self:Gt(fe)?q.ctx:fe,args:Le})}function re(){var Ie=R;if(R=Ie?Ie[Qo]():null,!Ie){var fe=Y;fe&&fe[zr]>0&&(hr(fe,function(Le){try{Le.func.call(Le.self,Le.args)}catch(be){da(T[Xo],2,73,"Unexpected Exception during onComplete - "+fr(be))}}),Y=[])}return Ie}function ae(Ie,fe){var Le=null,be=_.cfg;if(be&&Ie){var He=be[rc];!He&&fe&&(He={}),be[rc]=He,He=_.ref(be,rc),He&&(Le=He[Ie],!Le&&fe&&(Le={}),He[Ie]=Le,Le=_.ref(He,Ie))}return Le}function Ne(Ie,fe){var Le=ae(Ie,!0);return fe&&qr(fe,function(be,He){if(Qe(Le[be])){var De=_.cfg[be];(De||!Qe(De))&&(Le[be]=De)}id(_,Le,be,He)}),_[Zo](Le,fe)}function Ye(Ie,fe,Le){Le===void 0&&(Le=!1);var be,He=ae(Ie,!1),De=_.cfg;return He&&(He[fe]||!Qe(He[fe]))?be=He[fe]:(De[fe]||!Qe(De[fe]))&&(be=De[fe]),be||!Qe(be)?be:Le}function Ue(Ie){for(var fe;fe=q._next();){var Le=fe[Jd]();Le&&Ie(Le)}}return q}function Xl(d,_,T,D){var R=ls(_),Y=Xp(d,R,T,D),q=Y.ctx;function K(ae){var Ne=Y._next();return Ne&&Ne[rs](ae,q),!Ne}function re(ae,Ne){return ae===void 0&&(ae=null),zt(ae)&&(ae=Ql(ae,R.cfg,T,Ne)),Xl(ae||q[Qo](),R.cfg,T,Ne)}return q[Eo]=K,q[Wu]=re,q}function Qp(d,_,T){var D=ls(_.config),R=Xp(d,D,_,T),Y=R.ctx;function q(re){var ae=R._next();return ae&&ae[mn](Y,re),!ae}function K(re,ae){return re===void 0&&(re=null),zt(re)&&(re=Ql(re,D.cfg,_,ae)),Qp(re||Y[Qo](),_,ae)}return Y[Eo]=q,Y[Wu]=K,Y}function zv(d,_,T){var D=ls(_.config),R=Xp(d,D,_,T),Y=R.ctx;function q(re){return Y.iterate(function(ae){Bt(ae[To])&&ae[To](Y,re)})}function K(re,ae){return re===void 0&&(re=null),zt(re)&&(re=Ql(re,D.cfg,_,ae)),zv(re||Y[Qo](),_,ae)}return Y[Eo]=q,Y[Wu]=K,Y}function Ql(d,_,T,D){var R=null,Y=!D;if(zt(d)&&d[zr]>0){var q=null;hr(d,function(K){if(!Y&&D===K&&(Y=!0),Y&&K&&Bt(K[rs])){var re=Gv(K,_,T);R||(R=re),q&&q._setNext(re),q=re}})}return D&&!R?Ql([D],_,T):R}function Gv(d,_,T){var D=null,R=Bt(d[rs]),Y=Bt(d[Ci]),q;d?q=d[Wd]+"-"+d[Xd]+"-"+Bv++:q="Unknown-0-"+Bv++;var K={getPlugin:function(){return d},getNext:function(){return D},processTelemetry:Ne,unload:Ye,update:Ue,_id:q,_setNext:function(Ie){D=Ie}};function re(){var Ie;return d&&Bt(d[qv])&&(Ie=d[qv]()),Ie||(Ie=Xl(K,_,T)),Ie}function ae(Ie,fe,Le,be,He){var De=!1,Ee=d?d[Wd]:Jl,$e=Ie[Tu];return $e||($e=Ie[Tu]={}),Ie.setNext(D),d&&va(Ie[Wn](),function(){return Ee+":"+Le},function(){$e[q]=!0;try{var $t=D?D._id:cn;$t&&($e[$t]=!1),De=fe(Ie)}catch(or){var Zt=D?$e[D._id]:!0;Zt&&(De=!0),(!D||!Zt)&&da(Ie[xs](),1,73,"Plugin ["+Ee+"] failed during "+Le+" - "+fr(or)+", run flags: "+fr($e))}},be,He),De}function Ne(Ie,fe){fe=fe||re();function Le(be){if(!d||!R)return!1;var He=Wl(d);return He[Ju]||He[ki]?!1:(Y&&d[Ci](D),d[rs](Ie,be),!0)}ae(fe,Le,"processTelemetry",function(){return{item:Ie}},!Ie.sync)||fe[Eo](Ie)}function Ye(Ie,fe){function Le(){var be=!1;if(d){var He=Wl(d),De=d[Wn]||He[Wn];d&&(!De||De===Ie.core())&&!He[Ju]&&(He[Wn]=null,He[Ju]=!0,He[Rl]=!1,d[Ju]&&d[Ju](Ie,fe)===!0&&(be=!0))}return be}ae(Ie,Le,"unload",function(){},fe[mu])||Ie[Eo](fe)}function Ue(Ie,fe){function Le(){var be=!1;if(d){var He=Wl(d),De=d[Wn]||He[Wn];d&&(!De||De===Ie.core())&&!He[Ju]&&d[To]&&d[To](Ie,fe)===!0&&(be=!0)}return be}ae(Ie,Le,"update",function(){},!1)||Ie[Eo](fe)}return Vt(K)}function wu(){var d=[];function _(D){D&&d[Ka](D)}function T(D,R){hr(d,function(Y){try{Y(D,R)}catch(q){da(D[xs](),2,73,"Unexpected error calling unload handler - "+fr(q))}}),d=[]}return{add:_,run:T}}function Qc(){var d=[];function _(D){var R=d;d=[],hr(R,function(Y){try{(Y.rm||Y.remove).call(Y)}catch(q){da(D,2,73,"Unloading:"+fr(q))}})}function T(D){D&&$f(d,D)}return{run:_,add:T}}var fp,ds="getPlugin",fd=(fp={},fp[rc]={isVal:ns,v:{}},fp),ef=function(){function d(){var _=this,T,D,R,Y,q;ae(),Ki(d,_,function(Ne){Ne[Kf]=function(Ye,Ue,Ie,fe){re(Ye,Ue,fe),T=!0},Ne[Ju]=function(Ye,Ue){var Ie,fe=Ne[Wn];if(!fe||Ye&&fe!==Ye[Wn]())return;var Le,be=!1,He=Ye||Qp(null,fe,R&&R[ds]?R[ds]():R),De=Ue||(Ie={reason:0},Ie[mu]=!1,Ie);function Ee(){be||(be=!0,Y.run(He,Ue),q.run(He[xs]()),Le===!0&&He[Eo](De),ae())}return!Ne[cr]||Ne[cr](He,De,Ee)!==!0?Ee():Le=!0,Le},Ne[To]=function(Ye,Ue){var Ie=Ne[Wn];if(!Ie||Ye&&Ie!==Ye[Wn]())return;var fe,Le=!1,be=Ye||zv(null,Ie,R&&R[ds]?R[ds]():R),He=Ue||{reason:0};function De(){Le||(Le=!0,re(be.getCfg(),be.core(),be[Qo]()))}return!Ne._doUpdate||Ne._doUpdate(be,He,De)!==!0?De():fe=!0,fe},ed(Ne,"_addUnloadCb",function(){return Y},"add"),ed(Ne,"_addHook",function(){return q},"add"),Pn(Ne,"_unloadHooks",{g:function(){return q}})}),_[xs]=function(Ne){return K(Ne)[xs]()},_[Rl]=function(){return T},_.setInitialized=function(Ne){T=Ne},_[Ci]=function(Ne){R=Ne},_[Eo]=function(Ne,Ye){Ye?Ye[Eo](Ne):R&&Bt(R[rs])&&R[rs](Ne,null)},_._getTelCtx=K;function K(Ne){Ne===void 0&&(Ne=null);var Ye=Ne;if(!Ye){var Ue=D||Xl(null,{},_[Wn]);R&&R[ds]?Ye=Ue[Wu](null,R[ds]):Ye=Ue[Wu](null,R)}return Ye}function re(Ne,Ye,Ue){ls(Ne,fd,Xc(Ye)),!Ue&&Ye&&(Ue=Ye[Ji]()[Qo]());var Ie=R;R&&R[ds]&&(Ie=R[ds]()),_[Wn]=Ye,D=Xl(Ue,Ne,Ye,Ie)}function ae(){T=!1,_[Wn]=null,D=null,R=null,q=Qc(),Y=wu()}}return d.__ieDyn=1,d}(),Ro="",el="NoResponseBody",Vv="&"+el+"=true",tl="POST",xm=function(){function d(){var _=0,T,D,R,Y,q,K,re,ae,Ne,Ye,Ue,Ie,fe,Le;Ki(d,this,function(be,He){var De=!0;Qn(),be[Kf]=function(Je,lt){R=lt,D&&da(R,1,28,"Sender is already initialized"),be.SetConfig(Je),D=!0},be._getDbgPlgTargets=function(){return[D,Y,K,T]},be.SetConfig=function(Je){try{if(q=Je.senderOnCompleteCallBack||{},K=!!Je.disableCredentials,re=Je.fetchCredentials,Y=!!Je.isOneDs,T=!!Je.enableSendPromise,Ne=!!Je.disableXhr,Ye=!!Je.disableBeacon,Ue=!!Je.disableBeaconSync,Le=Je.timeWrapper,fe=!!Je.addNoResponse,Ie=!!Je.disableFetchKeepAlive,ae={sendPOST:ln},Y||(De=!1),K){var lt=np();lt&&lt.protocol&&lt.protocol[ui]()==="file:"&&(De=!1)}return!0}catch{}return!1},be.getSyncFetchPayload=function(){return _},be.getSenderInst=function(Je,lt){return Je&&Je[zr]?Zt(Je,lt):null},be.getFallbackInst=function(){return ae},be[cr]=function(Je,lt){Qn()};function Ee(Je,lt){or(lt,200,{},Je)}function $e(Je,lt){da(R,2,26,"Failed to send telemetry.",{message:Je}),or(lt,400,{})}function $t(Je){$e("No endpoint url is provided for the batch",Je)}function Zt(Je,lt){for(var Sr,lr=0,wt=null,Pr=0;wt==null&&Pr<Je[zr];)lr=Je[Pr],!Ne&&lr===1?cc()?wt=Xt:Xa()&&(wt=ln):lr===2&&zc(lt)&&(!lt||!Ie)?wt=nn:lr===3&&nd()&&(lt?!Ue:!Ye)&&(wt=Lr),Pr++;return wt?(Sr={_transport:lr,_isSync:lt},Sr[Jf]=wt,Sr):null}function or(Je,lt,Sr,lr){try{Je&&Je(lt,Sr,lr)}catch{}}function Dr(Je,lt){var Sr=oa(),lr=Je[No];if(!lr)return $t(lt),!0;lr=Je[No]+(fe?Vv:Ro);var wt=Je[Pi],Pr=Y?wt:new Blob([wt],{type:"text/plain;charset=UTF-8"}),Nt=Sr.sendBeacon(lr,Pr);return Nt}function Lr(Je,lt,Sr){var lr=Je[Pi];try{if(lr)if(Dr(Je,lt))Ee(Ro,lt);else{var wt=q&&q.beaconOnRetry;wt&&Bt(wt)?wt(Je,lt,Dr):(ae&&ae[Jf](Je,lt,!0),da(R,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Pr){Y&&zs(R,"Failed to send telemetry using sendBeacon API. Ex:"+fr(Pr)),or(lt,Y?0:400,{},Ro)}}function ln(Je,lt,Sr){var lr,wt,Pr,Nt=Je[Do]||{};!Sr&&T&&(lr=Ri(function(In,hi){wt=In,Pr=hi})),Y&&Sr&&Je.disableXhrSync&&(Sr=!1);var Ma=Je[No];if(!Ma){$t(lt),wt&&wt(!1);return}var ot=Nm(tl,Ma,De,!0,Sr,Je[An]);Y||ot[Xi]("Content-type","application/json"),hr(Wr(Nt),function(In){ot[Xi](In,Nt[In])}),ot.onreadystatechange=function(){Y||(wn(ot),ot.readyState===4&&wt&&wt(!0))},ot.onload=function(){Y&&wn(ot)};function wn(In){var hi=q&&q.xhrOnComplete,yc=hi&&Bt(hi);if(yc)hi(In,lt,Je);else{var Fi=Za(In);or(lt,In[wo],oc(In,Y),Fi)}}return ot.onerror=function(In){or(lt,Y?ot[wo]:400,oc(ot,Y),Y?Ro:Fv(ot)),Pr&&Pr(In)},ot.ontimeout=function(){or(lt,Y?ot[wo]:500,oc(ot,Y),Y?Ro:Fv(ot)),wt&&wt(!1)},ot.send(Je[Pi]),lr}function nn(Je,lt,Sr){var lr,wt=Je[No],Pr=Je[Pi],Nt=Y?Pr:new Blob([Pr],{type:"application/json"}),Ma,ot,wn,In=new Headers,hi=Pr[zr],yc=!1,Fi=!1,Tf=Je[Do]||{},ys=(lr={method:tl,body:Nt},lr[fs]=!0,lr);Je.headers&&Wr(Je.headers)[zr]>0&&(hr(Wr(Tf),function(Zr){In.append(Zr,Tf[Zr])}),ys[Do]=In),re?ys.credentials=re:De&&Y&&(ys.credentials="include"),Sr&&(ys.keepalive=!0,_+=hi,Y?Je._sendReason===2&&(yc=!0,fe&&(wt+=Vv)):yc=!0);var Uo=new Request(wt,ys);try{Uo[fs]=!0}catch{}if(!Sr&&T&&(Ma=Ri(function(Zr,ta){ot=Zr,wn=ta})),!wt){$t(lt),ot&&ot(!1);return}function Qs(Zr){or(lt,Y?0:400,{},Y?Ro:Zr)}function ea(Zr,ta,La){var eu=Zr[wo],Sc=q.fetchOnComplete;Sc&&Bt(Sc)?Sc(Zr,lt,La||Ro,ta):or(lt,eu,{},La||Ro)}try{Xu(fetch(Y?wt:Uo,Y?ys:null),function(Zr){if(Sr&&(_-=hi,hi=0),!Fi)if(Fi=!0,Zr.rejected)Qs(Zr.reason&&Zr.reason[Di]),wn&&wn(Zr.reason);else{var ta=Zr[kl];try{!Y&&!ta.ok?(Qs(ta.statusText),ot&&ot(!1)):Y&&!ta.body?(ea(ta,null,Ro),ot&&ot(!0)):Xu(ta.text(),function(La){ea(ta,Je,La[kl]),ot&&ot(!0)})}catch(La){Qs(fr(La)),wn&&wn(La)}}})}catch(Zr){Fi||(Qs(fr(Zr)),wn&&wn(Zr))}return yc&&!Fi&&(Fi=!0,or(lt,200,{}),ot&&ot(!0)),Y&&!Fi&&Je[An]>0&&Le&&Le.set(function(){Fi||(Fi=!0,or(lt,500,{}),ot&&ot(!0))},Je[An]),Ma}function Xt(Je,lt,Sr){var lr=ri(),wt=new XDomainRequest,Pr=Je[Pi];wt.onload=function(){var In=Za(wt),hi=q&&q.xdrOnComplete;hi&&Bt(hi)?hi(wt,lt,Je):or(lt,200,{},In)},wt.onerror=function(){or(lt,400,{},Y?Ro:Yc(wt))},wt.ontimeout=function(){or(lt,500,{})},wt.onprogress=function(){};var Nt=lr&&lr.location&&lr.location[Wf]||"",Ma=Je[No];if(!Ma){$t(lt);return}if(!Y&&Ma.lastIndexOf(Nt,0)!==0){var ot="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";da(R,2,40,". "+ot),$e(ot,lt);return}var wn=Y?Ma:Ma[Wa](/^(https?:)/,"");wt.open(tl,wn),Je[An]&&(wt[An]=Je[An]),wt.send(Pr),Y&&Sr?Le&&Le.set(function(){wt.send(Pr)},0):wt.send(Pr)}function Qn(){_=0,D=!1,T=!1,R=null,Y=null,q=null,K=null,re=null,ae=null,Ne=!1,Ye=!1,Ue=!1,Ie=!1,fe=!1,Le=null}})}return d.__ieDyn=1,d}(),tf="on",Hv="attachEvent",ev="addEventListener",Iu="detachEvent",Nu="removeEventListener",rl="events",ps="visibilitychange",Gs="pagehide",rf="pageshow",dd="unload",pd="beforeunload",nf=zn("aiEvtPageHide"),pi=zn("aiEvtPageShow"),af=/\.[\.]+/g,Kv=/[\.]+$/,Pm=1,nl=Vc("events"),Am=/^([^.]*)(?:\.(.+)|)/;function ko(d){return d&&d[Wa]?d[Wa](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,cn):d}function Du(d,_){var T;if(_){var D=cn;zt(_)?(D=cn,hr(_,function(Y){Y=ko(Y),Y&&(Y[0]!=="."&&(Y="."+Y),D+=Y)})):D=ko(_),D&&(D[0]!=="."&&(D="."+D),d=(d||cn)+D)}var R=Am.exec(d||cn)||[];return T={},T[pt]=R[1],T.ns=(R[2]||cn).replace(af,".").replace(Kv,cn)[hu](".").sort().join("."),T}function al(d,_,T){T===void 0&&(T=!0);var D=nl.get(d,rl,{},T),R=D[_];return R||(R=D[_]=[]),R}function Wv(d,_,T,D){d&&_&&_[pt]&&(d[Nu]?d[Nu](_[pt],T,D):d[Iu]&&d[Iu](tf+_[pt],T))}function dp(d,_,T,D){var R=!1;return d&&_&&_[pt]&&T&&(d[ev]?(d[ev](_[pt],T,D),R=!0):d[Hv]&&(d[Hv](tf+_[pt],T),R=!0)),R}function Jv(d,_,T,D){for(var R=_[zr];R--;){var Y=_[R];Y&&(!T.ns||T.ns===Y.evtName.ns)&&(!D||D(Y))&&(Wv(d,Y.evtName,Y[Zu],Y.capture),_[Kd](R,1))}}function tv(d,_,T){if(_[pt])Jv(d,al(d,_[pt]),_,T);else{var D=nl.get(d,rl,{});qr(D,function(R,Y){Jv(d,Y,_,T)}),Wr(D)[zr]===0&&nl.kill(d,rl)}}function vd(d,_){var T;return _?(zt(_)?T=[d].concat(_):T=[d,_],T=Du("xx",T).ns[hu](".")):T=d,T}function il(d,_,T,D,R){var Y;R===void 0&&(R=!1);var q=!1;if(d)try{var K=Du(_,D);if(q=dp(d,K,T,R),q&&nl.accept(d)){var re=(Y={guid:Pm++,evtName:K},Y[Zu]=T,Y.capture=R,Y);al(d,K.type)[Ka](re)}}catch{}return q}function to(d,_,T,D,R){if(R===void 0&&(R=!1),d)try{var Y=Du(_,D),q=!1;tv(d,Y,function(K){return Y.ns&&!T||K[Zu]===T?(q=!0,!0):!1}),q||Wv(d,Y,T,R)}catch{}}function md(d,_,T){var D=!1,R=ri();R&&(D=il(R,d,_,T),D=il(R.body,d,_,T)||D);var Y=On();return Y&&(D=il(Y,d,_,T)||D),D}function ol(d,_,T){var D=ri();D&&(to(D,d,_,T),to(D.body,d,_,T));var R=On();R&&to(R,d,_,T)}function ka(d,_,T,D){var R=!1;return _&&d&&d[zr]>0&&hr(d,function(Y){Y&&(!T||Ko(T,Y)===-1)&&(R=md(Y,_,D)||R)}),R}function ro(d,_,T,D){var R=!1;return _&&d&&zt(d)&&(R=ka(d,_,T,D),!R&&T&&T[zr]>0&&(R=ka(d,_,null,D))),R}function of(d,_,T){d&&zt(d)&&hr(d,function(D){D&&ol(D,_,T)})}function Zv(d,_,T){return ro([pd,dd,Gs],d,_,T)}function Xv(d,_){of([pd,dd,Gs],d,_)}function ma(d,_,T){function D(q){var K=On();d&&K&&K.visibilityState==="hidden"&&d(q)}var R=vd(nf,T),Y=ka([Gs],d,_,R);return(!_||Ko(_,ps)===-1)&&(Y=ka([ps],D,_,R)||Y),!Y&&_&&(Y=ma(d,null,T)),Y}function sl(d,_){var T=vd(nf,_);of([Gs],d,T),of([ps],null,T)}function sf(d,_,T){function D(q){var K=On();d&&K&&K.visibilityState==="visible"&&d(q)}var R=vd(pi,T),Y=ka([rf],d,_,R);return Y=ka([ps],D,_,R)||Y,!Y&&_&&(Y=sf(d,null,T)),Y}function Rm(d,_){var T=vd(pi,_);of([rf],d,T),of([ps],null,T)}var Qv="",uf="timings",Oa="value",pp="kind",pc="length",ul="processTelemetryStart",Vs,cf="4.3.4",vp="1DS-Web-JS-"+cf,St=k.hasOwnProperty,Cu=(Vs={},Vs[0]=0,Vs[2]=6,Vs[1]=1,Vs[3]=7,Vs[4098]=6,Vs[4097]=1,Vs[4099]=7,Vs);function Oo(d){return!(d===Qv||Qe(d))}function lf(d){if(d){var _=qd(d,"-");if(_>-1)return Bn(d,_)}return Qv}function km(d,_,T){if(!_&&!Oo(_)||typeof d!="string")return null;var D=typeof _;if(D==="string"||D==="number"||D==="boolean"||zt(_))_={value:_};else if(D==="object"&&!St.call(_,"value"))_={value:T?JSON.stringify(_):_};else if(Qe(_[Oa])||_[Oa]===Qv||!Dc(_[Oa])&&!It(_[Oa])&&!en(_[Oa])&&!zt(_[Oa]))return null;if(zt(_[Oa])&&!hp(_[Oa]))return null;if(!Qe(_[pp])){if(zt(_[Oa])||!em(_[pp]))return null;_[Oa]=_[Oa].toString()}return _}function ff(d,_,T){var D=-1;if(!Gt(d))if(_>0&&(_===32?D=8192:_<=13&&(D=_<<5)),mp(T))D===-1&&(D=0),D|=T;else{var R=Cu[vc(d)]||-1;D!==-1&&R!==-1?D|=R:R===6&&(D=R)}return D}function hd(d,_,T,D,R){var Y={},q=!1,K=0,re=arguments[pc],ae=arguments;for(en(ae[0])&&(q=ae[0],K++);K<re;K++){var d=ae[K];qr(d,function(Ye,Ue){q&&Ue&&mo(Ue)?zt(Ue)?(Y[Ye]=Y[Ye]||[],hr(Ue,function(Ie,fe){Ie&&mo(Ie)?Y[Ye][fe]=hd(!0,Y[Ye][fe],Ie):Y[Ye][fe]=Ie})):Y[Ye]=hd(!0,Y[Ye],Ue):Y[Ye]=Ue})}return Y}var Mo=$d;function em(d){return d===0||d>0&&d<=13||d===32}function mp(d){return d>=0&&d<=9}function hp(d){return d[pc]>0}function df(d,_){var T=d;T[uf]=T[uf]||{},T[uf][ul]=T[uf][ul]||{},T[uf][ul][_]=Mo()}function vc(d){var _=0;if(d!=null){var T=typeof d;T==="string"?_=1:T==="number"?_=2:T==="boolean"?_=3:T===c&&(_=4,zt(d)?(_=4096,d[pc]>0&&(_|=vc(d[0]))):St.call(d,"value")&&(_=8192|vc(d[Oa])))}return _}function rv(){return!!sn("chrome")}function $r(d){return d>0}var Hs="",nv="drop",xu="send",no="requeue",Ln="rspFail",_d="oth",mc="no-cache, no-store",cl="application/x-json-stream",vs="cache-control",ao="content-type",Lo="kill-tokens",gd="kill-duration",_p="time-delta-millis",av="client-version",ms="client-id",iv="time-delta-to-apply-millis",yd="upload-time",ov="apikey",hs="AuthMsaDeviceTicket",Om="WebAuthToken",Pu="AuthXToken",sv="NoResponseBody",f="msfpc",m="trace",y="user",I="allowRequestSending",F="firstRequestSent",V="shouldAddClockSkewHeaders",W="getClockSkewHeaderValue",ee="setClockSkew",Q="length",me="concat",et="iKey",Tt="count",Jt="events",at="push",ct="split",ir="splice",Mt="toLowerCase",yr="hdrs",Er="useHdrs",Pt="initialize",Tn="setTimeoutOverride",hc="clearTimeoutOverride",Ks="payloadPreprocessor",ll="overrideEndpointUrl",pf="avoidOptions",Sd="disableEventTimings",vf="stringifyObjects",mf="enableCompoundKey",bd="disableXhrSync",hf="disableFetchKeepAlive",xe="addNoResponse",vt="excludeCsMetaData",Yt="useSendBeacon",rn="fetchCredentials",Ea="alwaysUseXhrOverride",Ta="unloadTransports",Zn="serializeOfflineEvt",vi="getOfflineRequestDetails",_s="createPayload",fl="createOneDSPayload",tm="payloadBlob",Au="headers",Ed="_thePayload",Mm="urlString",Xn="batches",gs="sendType",rm="addHeader",Lm="canSendRequest",uv="sendQueuedRequests",Fm="isCompletelyIdle",Um="setUnloading",Gh="isTenantKilled",jm="resume",Ym="sendSynchronousBatch",dl="_transport",_f="getWParam",Ws="isBeacon",pl="timings",$m="isTeardown",nm="isSync",cv="data",lv="timeout",Td="_sendReason",ch="setKillSwitchTenants",qm="_backOffTransmission",gp="identifier",vl="disableOptimizeObj",A_="ignoreMc1Ms0CookieProcessing",lh="eventsLimitInMem",Vh="autoFlushEventsLimit",Bm="disableAutoBatchFlushLimit",R_="overrideInstrumentationKey",gf="disableTelemetry",fv="baseData",am="sendAttempt",yf="latency",dv="sync";function fh(d){var _=(d.ext||{}).intweb;return _&&Oo(_[f])?_[f]:null}function Hh(d){for(var _=null,T=0;_===null&&T<d[Q];T++)_=fh(d[T]);return _}var wd=function(){function d(_,T){var D=T?[][me](T):[],R=this,Y=Hh(D);R[et]=function(){return _},R.Msfpc=function(){return Y||Hs},R[Tt]=function(){return D[Q]},R[Jt]=function(){return D},R.addEvent=function(q){return q?(D[at](q),Y||(Y=fh(q)),!0):!1},R[ct]=function(q,K){var re;if(q<D[Q]){var ae=D[Q]-q;Qe(K)||(ae=K<ae?K:ae),re=D[ir](q,ae),Y=Hh(D)}return new d(_,re)}}return d.create=function(_,T){return new d(_,T)},d}(),Kh=function(){function d(){var _=!0,T=!0,D=!0,R="use-collector-delta",Y=!1;Ki(d,this,function(q){q[I]=function(){return _},q[F]=function(){D&&(D=!1,Y||(_=!1))},q[V]=function(){return T},q[W]=function(){return R},q[ee]=function(K){Y||(K?(R=K,T=!0,Y=!0):T=!1,_=!0)}})}return d.__ieDyn=1,d}(),k_=1e3,dh=function(){function d(){var _={};function T(D){var R=[];return D&&hr(D,function(Y){R[at](Ti(Y))}),R}Ki(d,this,function(D){D[ch]=function(R,Y){if(R&&Y)try{var q=T(R[ct](","));if(Y==="this-request-only")return q;for(var K=parseInt(Y,10)*k_,re=0;re<q[Q];++re)_[q[re]]=Ei()+K}catch{return[]}return[]},D[Gh]=function(R){var Y=_,q=Ti(R);return Y[q]!==void 0&&Y[q]>Ei()?!0:(delete Y[q],!1)}})}return d.__ieDyn=1,d}(),im=.8,ph=1.2,zm=3e3,pv=6e5;function Id(d){return!(d>=300&&d<500&&d!=429||d==501||d==505)}function vh(d){var _=0,T=zm*im,D=zm*ph,R=Math.floor(Math.random()*(D-T))+T;return _=Math.pow(2,d)*R,Math.min(_,pv)}var om=20,Gr=3984588,Js=65e3,Nd=2e6,yp=Math.min(Nd,Js),vv="metadata",sm="f",Sf=/\./,Dd=function(){function d(_,T,D,R,Y,q){var K="data",re="baseData",ae="ext",Ne=!!R,Ye=!0,Ue=T,Ie={},fe=!!q,Le=Y||ff;Ki(d,this,function(be){be.createPayload=function(Ee,$e,$t,Zt,or,Dr){return{apiKeys:[],payloadBlob:Hs,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:Ee,isTeardown:$e,isSync:$t,isBeacon:Zt,sendType:Dr,sendReason:or}},be.appendPayload=function(Ee,$e,$t){var Zt=Ee&&$e&&!Ee.overflow;return Zt&&va(_,function(){return"Serializer:appendPayload"},function(){for(var or=$e.events(),Dr=Ee.payloadBlob,Lr=Ee.numEvents,ln=!1,nn=[],Xt=[],Qn=Ee.isBeacon,Je=Qn?Js:Gr,lt=Qn?yp:Nd,Sr=0,lr=0;Sr<or.length;){var wt=or[Sr];if(wt){if(Lr>=$t){Ee.overflow=$e.split(Sr);break}var Pr=be.getEventBlob(wt);if(Pr&&Pr.length<=lt){var Nt=Pr.length,Ma=Dr.length;if(Ma+Nt>Je){Ee.overflow=$e.split(Sr);break}Dr&&(Dr+=`
`),Dr+=Pr,lr++,lr>om&&(En(Dr,0,1),lr=0),ln=!0,Lr++}else Pr?nn.push(wt):Xt.push(wt),or.splice(Sr,1),Sr--}Sr++}if(nn.length>0&&Ee.sizeExceed.push(wd.create($e.iKey(),nn)),Xt.length>0&&Ee.failedEvts.push(wd.create($e.iKey(),Xt)),ln){Ee.batches.push($e),Ee.payloadBlob=Dr,Ee.numEvents=Lr;var ot=$e.iKey();Ko(Ee.apiKeys,ot)===-1&&Ee.apiKeys.push(ot)}},function(){return{payload:Ee,theBatch:{iKey:$e.iKey(),evts:$e.events()},max:$t}}),Zt},be.getEventBlob=function(Ee){try{return va(_,function(){return"Serializer.getEventBlob"},function(){var $e={};$e.name=Ee.name,$e.time=Ee.time,$e.ver=Ee.ver,$e.iKey="o:"+lf(Ee.iKey);var $t={},Zt;fe||(Zt=function(ln,nn,Xt){Wh(Le,$t,ln,nn,Xt)});var or=Ee[ae];or&&($e[ae]=$t,qr(or,function(ln,nn){var Xt=$t[ln]={};De(nn,Xt,"ext."+ln,!0,null,null,!0)}));var Dr=$e[K]={};Dr.baseType=Ee.baseType;var Lr=Dr[re]={};return De(Ee.baseData,Lr,re,!1,[re],Zt,Ye),De(Ee.data,Dr,K,!1,[],Zt,Ye),JSON.stringify($e)},function(){return{item:Ee}})}catch{return null}};function He(Ee,$e){var $t=Ie[Ee];return $t===void 0&&(Ee.length>=7&&($t=Kn(Ee,"ext.metadata")||Kn(Ee,"ext.web")),Ie[Ee]=$t),$t}function De(Ee,$e,$t,Zt,or,Dr,Lr){qr(Ee,function(ln,nn){var Xt=null;if(nn||Oo(nn)){var Qn=$t,Je=ln,lt=or,Sr=$e;if(Ne&&!Zt&&Sf.test(ln)){var lr=ln.split("."),wt=lr.length;if(wt>1){lt&&(lt=lt.slice());for(var Pr=0;Pr<wt-1;Pr++){var Nt=lr[Pr];Sr=Sr[Nt]=Sr[Nt]||{},Qn+="."+Nt,lt&&lt.push(Nt)}Je=lr[wt-1]}}var Ma=Zt&&He(Qn);if(!Ma&&Ue&&Ue.handleField(Qn,Je)?Xt=Ue.value(Qn,Je,nn,D):Xt=km(Je,nn,D),Xt){var ot=Xt.value;if(Sr[Je]=ot,Dr&&Dr(lt,Je,Xt),Lr&&typeof ot=="object"&&!zt(ot)){var wn=lt;wn&&(wn=wn.slice(),wn.push(Je)),De(nn,ot,Qn+"."+Je,Zt,wn,Dr,Lr)}}}})}})}return d.__ieDyn=1,d}();function Wh(d,_,T,D,R){if(R&&_){var Y=d(R.value,R.kind,R.propertyType);if(Y>-1){var q=_[vv];q||(q=_[vv]={f:{}});var K=q[sm];if(K||(K=q[sm]={}),T)for(var re=0;re<T.length;re++){var ae=T[re];K[ae]||(K[ae]={f:{}});var Ne=K[ae][sm];Ne||(Ne=K[ae][sm]={}),K=Ne}K=K[D]={},zt(R.value)?K.a={t:Y}:K.t=Y}}}function Sp(d,_){return{set:function(T,D){for(var R=[],Y=2;Y<arguments.length;Y++)R[Y-2]=arguments[Y];return Yp([d,_],T,D,R)}}}var ml,_c="sendAttempt",Fo="&"+sv+"=true",Zs="?cors=true&"+ao[Mt]()+"="+cl,hl=(ml={},ml[1]=no,ml[100]=no,ml[200]="sent",ml[8004]=nv,ml[8003]=nv,ml),bf={},Ru={};function ku(d,_,T){bf[d]=_,T!==!1&&(Ru[_]=d)}ku(hs,hs,!1),ku(av,av),ku(ms,"Client-Id"),ku(ov,ov),ku(iv,iv),ku(yd,yd),ku(Pu,Pu);function bp(d,_){var T=!1;if(d&&_){var D=Wr(d);if(D&&D[Q]>0)for(var R=_[Mt](),Y=0;Y<D[Q];Y++){var q=D[Y];if(q&&rr(_,q)&&q[Mt]()===R){T=!0;break}}}return T}function Cd(d,_,T,D){_&&T&&T[Q]>0&&(D&&bf[_]?(d[yr][bf[_]]=T,d[Er]=!0):d.url+="&"+_+"="+T)}function Jh(d,_,T){for(var D=0;D<d[Q];D++)if(d[D].name===_){d[D].value=T;return}d[at]({name:_,value:T})}function mv(d,_){for(var T=0;T<d[Q];T++)if(d[T].name===_){d[ir](T,1);return}}var gc=function(){function d(_,T,D,R){var Y,q,K,re,ae=!1,Ne,Ye,Ue,Ie,fe,Le,be,He,De,Ee,$e,$t,Zt,or,Dr,Lr,ln,nn,Xt,Qn,Je,lt,Sr,lr,wt,Pr,Nt,Ma;Ki(d,this,function(ot){Fi();var wn=!0;ot[Pt]=function(a,u,p){lr||(fe=u,$t=u.getCookieMgr(),Ye=p,Ue=Ye.diagLog(),$f(Qn,$s(a,function(g){var E,C=g.cfg,A=g.cfg.extensionConfig[p.identifier];wt=Sp(A[Tn],A[hc]),Oo(C.anonCookieName)?Jh(be,"anoncknm",C.anonCookieName):mv(be,"anoncknm"),Je=A[Ks],lt=A.payloadListener;var x=A.httpXHROverride,M=A[ll]?A[ll]:C.endpointUrl;Y=M+Zs,or=Gt(A[pf])?!0:!A[pf],$e=!A[Sd];var U=A.valueSanitizer,z=A[vf],G=!!C[mf];Gt(A[mf])||(G=!!A[mf]),Dr=A.xhrTimeout,Lr=!!A[bd],ln=!!A[hf],Xt=A[xe]!==!1,Pr=!!A[vt],u.getPlugin("LocalStorage")&&(ln=!0),ae=!ca(),Ee=new Dd(fe,U,z,G,ff,Pr),Qe(A[Yt])||(ae=!!A[Yt]),A[rn]&&(Ma=A[rn]);var H=hi();Nt?Nt.SetConfig(H):(Nt=new xm,Nt[Pt](H,Ue));var X=x,J=A[Ea]?x:null,pe=A[Ea]?x:null,he=[3,2];if(!x){Le=!1;var Me=[];ca()?(Me=[2,1],he=[2,1,3]):Me=[1,2,3],Me=nc(Me,A.transports),x=In(Me,!1),x||zs(Ue,"No available transport to send events"),X=In(Me,!0)}J||(he=nc(he,A[Ta]),J=In(he,!0)),nn=!Le&&(ae&&nd()||!ln&&zc(!0)),Ie=(E={},E[0]=x,E[1]=X||In([1,2,3],!0),E[2]=J||X||In([1],!0),E[3]=pe||In([2,3],!0)||X||In([1],!0),E)})),lr=!0)},ot.addResponseHandler=function(a){return Sr[at](a),{rm:function(){var u=Sr.indexOf(a);u>=0&&Sr[ir](u,1)}}},ot[Zn]=function(a){try{if(Ee)return Ee.getEventBlob(a)}catch{}return Hs},ot[vi]=function(){try{var a=Ee&&Ee[_s](0,!1,!1,!1,1,0);return wf(a,or)}catch{}return null},ot[fl]=function(a,u){try{var p=[];hr(a,function(x){u&&(x=Ao(x));var M=wd.create(x[et],[x]);p[at](M)});for(var g=null;p[Q]>0&&Ee;){var E=p.shift();E&&E[Tt]()>0&&(g=g||Ee[_s](0,!1,!1,!1,1,0),Ee.appendPayload(g,E,_))}var C=wf(g,or),A={data:g[tm],urlString:C.url,headers:C[yr],timeout:Dr,disableXhrSync:Lr,disableFetchKeepAlive:ln};return or&&(bp(A[Au],vs)||(A[Au][vs]=mc),bp(A[Au],ao)||(A[Au][ao]=cl)),A}catch{}return null};function In(a,u){try{return Nt&&Nt.getSenderInst(a,u)}catch{}return null}ot._getDbgPlgTargets=function(){return[Ie[0],q,Ee,Ie,hi(),Y]};function hi(){try{var a={xdrOnComplete:yc,fetchOnComplete:Tf,xhrOnComplete:ys,beaconOnRetry:Qs},u={enableSendPromise:!1,isOneDs:!0,disableCredentials:!wn,fetchCredentials:Ma,disableXhr:!1,disableBeacon:!ae,disableBeaconSync:!ae,disableFetchKeepAlive:ln,timeWrapper:wt,addNoResponse:Xt,senderOnCompleteCallBack:a};return u}catch{}return null}function yc(a,u,p){var g=Za(a);Uo(u,200,{},g),Ou(g)}function Fi(){var a;Y=null,q=new dh,K=!1,re=new Kh,ae=!1,Ne=0,Ye=null,Ue=null,Ie=null,fe=null,Le=!0,be=[],He={},De=[],Ee=null,$e=!1,$t=null,Zt=!1,or=!1,Dr=a,Lr=a,ln=a,nn=a,Xt=a,Qn=[],Je=a,lt=a,Sr=[],lr=!1,wt=Sp(),Pr=!1,Nt=null}function Tf(a,u,p,g){var E=function(x,M,U){Uo(u,x,M,U),Ou(U)},C={},A=a[Au];A&&A.forEach(function(x,M){C[M]=x}),E(a.status,C,p||Hs)}function ys(a,u,p){var g=Za(a);Uo(u,a.status,oc(a,!0),g),Ou(g)}function Uo(a,u,p,g){try{a(u,p,g)}catch(E){da(Ue,2,518,fr(E))}}function Qs(a,u,p){var g=a,E=200,C=g[Ed],A=a[Mm]+(Xt?Fo:Hs);try{var x=oa();if(C){var M=!!fe.getPlugin("LocalStorage"),U=[],z=[];hr(C[Xn],function(G){if(U&&G&&G[Tt]()>0)for(var H=G[Jt](),X=0;X<H[Q];X++)if(x.sendBeacon(A,Ee.getEventBlob(H[X])))z[at](G[X]);else{U[at](G[ct](X));break}else U[at](G[ct](0))}),z[Q]>0&&(C.sentEvts=z),M||_i(U,8003,C[gs],!0)}else E=0}catch(G){zs(Ue,"Failed to send telemetry using sendBeacon API. Ex:"+fr(G)),E=0}finally{Uo(u,E,{},Hs)}}function ea(a){return a===2||a===3}function Zr(a){return Zt&&ea(a)&&(a=2),a}ot[rm]=function(a,u){He[a]=u},ot.removeHeader=function(a){delete He[a]},ot[Lm]=function(){return ta()&&re[I]()},ot[uv]=function(a,u){Gt(a)&&(a=0),Zt&&(a=Zr(a),u=2),eu(De,a,0)&&Ui(La(),0,!1,a,u||0)},ot[Fm]=function(){return!K&&Ne===0&&De[Q]===0},ot[Um]=function(a){Zt=a},ot.addBatch=function(a){if(a&&a[Tt]()>0){if(q.isTenantKilled(a[et]()))return!1;De[at](a)}return!0},ot.teardown=function(){De[Q]>0&&Ui(La(),0,!0,2,2),hr(Qn,function(a){a&&a.rm&&a.rm()}),Qn=[]},ot.pause=function(){K=!0},ot[jm]=function(){K=!1,ot[uv](0,4)},ot[Ym]=function(a,u,p){a&&a[Tt]()>0&&(Qe(u)&&(u=1),Zt&&(u=Zr(u),p=2),Ui([a],0,!1,u,p||0))};function ta(){return!K&&Ne<T}function La(){var a=De;return De=[],a}function eu(a,u,p){var g=!1;return a&&a[Q]>0&&!K&&Ie[u]&&Ee&&(g=u!==0||ta()&&(p>0||re[I]())),g}function Sc(a){var u={};return a&&hr(a,function(p,g){u[g]={iKey:p[et](),evts:p[Jt]()}}),u}function Ui(a,u,p,g,E){if(!(!a||a[Q]===0)){if(K){_i(a,1,g);return}g=Zr(g);try{var C=a,A=g!==0;va(fe,function(){return"HttpManager:_sendBatches"},function(x){x&&(a=a.slice(0));for(var M=[],U=null,z=Mo(),G=Ie[g]||(A?Ie[1]:Ie[0]),H=G&&G[dl],X=nn&&(Zt||ea(g)||H===3||G._isSync&&H===2);eu(a,g,u);){var J=a.shift();J&&J[Tt]()>0&&(q.isTenantKilled(J[et]())?M[at](J):(U=U||Ee[_s](u,p,A,X,E,g),Ee.appendPayload(U,J,_)?U.overflow!==null&&(a=[U.overflow][me](a),U.overflow=null,um(U,z,Mo(),E),z=Mo(),U=null):(um(U,z,Mo(),E),z=Mo(),a=[J][me](a),U=null)))}U&&um(U,z,Mo(),E),a[Q]>0&&(De=a[me](De)),_i(M,8004,g)},function(){return{batches:Sc(C),retryCount:u,isTeardown:p,isSynchronous:A,sendReason:E,useSendBeacon:ea(g),sendType:g}},!A)}catch(x){da(Ue,2,48,"Unexpected Exception sending batch: "+fr(x))}}}function wf(a,u){var p={url:Y,hdrs:{},useHdrs:!1};u?(p[yr]=hd(p[yr],He),p.useHdrs=Wr(p.hdrs)[Q]>0):qr(He,function(x,M){Ru[x]?Cd(p,Ru[x],M,!1):(p[yr][x]=M,p[Er]=!0)}),Cd(p,ms,"NO_AUTH",u),Cd(p,av,vp,u);var g=Hs;hr(a.apiKeys,function(x){g[Q]>0&&(g+=","),g+=x}),Cd(p,ov,g,u),Cd(p,yd,Ei().toString(),u);var E=yv(a);if(Oo(E)&&(p.url+="&ext.intweb.msfpc="+E),re[V]()&&Cd(p,iv,re[W](),u),fe[_f]){var C=fe[_f]();C>=0&&(p.url+="&w="+C)}for(var A=0;A<be[Q];A++)p.url+="&"+be[A].name+"="+be[A].value;return p}function tu(a,u,p){a[u]=a[u]||{},a[u][Ye.identifier]=p}function um(a,u,p,g){if(a&&a.payloadBlob&&a.payloadBlob[Q]>0){var E=!!Je,C=Ie[a.sendType];!ea(a[gs])&&a[Ws]&&a.sendReason===2&&(C=Ie[2]||Ie[3]||C);var A=or;(a.isBeacon||C[dl]===3)&&(A=!1);var x=wf(a,A);A=A||x[Er];var M=Mo();va(fe,function(){return"HttpManager:_doPayloadSend"},function(){for(var U=0;U<a.batches[Q];U++)for(var z=a[Xn][U],G=z[Jt](),H=0;H<G[Q];H++){var X=G[H];if($e){var J=X[pl]=X[pl]||{};tu(J,"sendEventStart",M),tu(J,"serializationStart",u),tu(J,"serializationCompleted",p)}X[_c]>0?X[_c]++:X[_c]=1}_i(a[Xn],1e3+(g||0),a[gs],!0);var pe={data:a[tm],urlString:x.url,headers:x[yr],_thePayload:a,_sendReason:g,timeout:Dr,disableXhrSync:Lr,disableFetchKeepAlive:ln};A&&(bp(pe[Au],vs)||(pe[Au][vs]=mc),bp(pe[Au],ao)||(pe[Au][ao]=cl));var he=null;C&&(he=function(Me){re[F]();var qe=function(nr,sr){If(nr,sr,a,g)},Xe=a[$m]||a[nm];try{C.sendPOST(Me,qe,Xe),lt&&lt(pe,Me,Xe,a[Ws])}catch(nr){zs(Ue,"Unexpected exception sending payload. Ex:"+fr(nr)),Uo(qe,0,{})}}),va(fe,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(he)if(a[gs]===0&&Ne++,E&&!a.isBeacon&&C[dl]!==3){var Me={data:pe[cv],urlString:pe[Mm],headers:hd({},pe[Au]),timeout:pe[lv],disableXhrSync:pe[bd],disableFetchKeepAlive:pe[hf]},qe=!1;va(fe,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{Je(Me,function(Xe){qe=!0,!Le&&!Xe[Ed]&&(Xe[Ed]=Xe[Ed]||pe[Ed],Xe[Td]=Xe[Td]||pe[Td]),he(Xe)},a.isSync||a[$m])}catch{qe||he(pe)}})}else he(pe)})},function(){return{thePayload:a,serializationStart:u,serializationCompleted:p,sendReason:g}},a[nm])}a.sizeExceed&&a.sizeExceed[Q]>0&&_i(a.sizeExceed,8003,a[gs]),a.failedEvts&&a.failedEvts[Q]>0&&_i(a.failedEvts,8002,a[gs])}function bc(a,u){$e&&hr(a,function(p){var g=p[pl]=p[pl]||{};tu(g,"sendEventCompleted",u)})}function If(a,u,p,g){var E=9e3,C=null,A=!1,x=!1;try{var M=!0;if(typeof a!==h){if(u){re[ee](u[_p]);var U=u[gd]||u["kill-duration-seconds"];hr(q[ch](u[Lo],U),function(G){hr(p[Xn],function(H){if(H[et]()===G){C=C||[];var X=H[ct](0);p.numEvents-=X[Tt](),C[at](X)}})})}if(a==200||a==204){E=200;return}(!Id(a)||p.numEvents<=0)&&(M=!1),E=9e3+a%1e3}if(M){E=100;var z=p.retryCnt;p[gs]===0&&(z<D?(A=!0,Nf(function(){p[gs]===0&&Ne--,Ui(p[Xn],z+1,p[$m],Zt?2:p[gs],5)},Zt,vh(z))):(x=!0,Zt&&(E=8001)))}}finally{A||(re[ee](),ha(p,E,g,x)),_i(C,8004,p[gs])}}function ha(a,u,p,g){try{g&&Ye[qm]();var E=a[Xn];u===200&&(E=a.sentEvts||a[Xn],!g&&!a[nm]&&Ye._clearBackOff(),Ip(E)),_i(E,u,a[gs],!0)}finally{a[gs]===0&&(Ne--,p!==5&&ot.sendQueuedRequests(a[gs],p))}}function Ip(a){if($e){var u=Mo();hr(a,function(p){p&&p[Tt]()>0&&bc(p[Jt](),u)})}}function Nf(a,u,p){u?a():wt.set(a,p)}function yv(a){for(var u=0;u<a.batches[Q];u++){var p=a[Xn][u].Msfpc();if(p)return encodeURIComponent(p)}return Hs}function Ou(a){var u=Sr;try{for(var p=0;p<u[Q];p++)try{u[p](a)}catch(E){da(Ue,1,519,"Response handler failed: "+E)}if(a){var g=JSON.parse(a);Oo(g.webResult)&&Oo(g.webResult[f])&&$t.set("MSFPC",g.webResult[f],365*86400)}}catch{}}function _i(a,u,p,g){if(a&&a[Q]>0&&R){var E=R[Df(u)];if(E){var C=p!==0;va(fe,function(){return"HttpManager:_sendBatchesNotification"},function(){Nf(function(){try{E.call(R,a,u,C,p)}catch(A){da(Ue,1,74,"send request notification failed: "+A)}},g||C,0)},function(){return{batches:Sc(a),reason:u,isSync:C,sendSync:g,sendType:p}},!C)}}}function Df(a){var u=hl[a];return Oo(u)||(u=_d,a>=9e3&&a<=9999?u=Ln:a>=8e3&&a<=8999?u=nv:a>=1e3&&a<=1999&&(u=xu)),u}})}return d.__ieDyn=1,d}(),Gm=.25,hv=500,Ef=20,_v=6,gv=2,mh=4,hh=2,Zh=1,mi=1e4,Xs="eventsDiscarded",Ep="",Gn=void 0,Tp=_o({eventsLimitInMem:{isVal:$r,v:mi},immediateEventLimit:{isVal:$r,v:500},autoFlushEventsLimit:{isVal:$r,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:wp,v:Gn},overrideInstrumentationKey:Gn,overrideEndpointUrl:Gn,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:Gn,clearTimeoutOverride:Gn,payloadPreprocessor:Gn,payloadListener:Gn,disableEventTimings:Gn,valueSanitizer:Gn,stringifyObjects:Gn,enableCompoundKey:Gn,disableOptimizeObj:!1,fetchCredentials:Gn,transports:Gn,unloadTransports:Gn,useSendBeacon:Gn,disableFetchKeepAlive:Gn,avoidOptions:!1,xhrTimeout:Gn,disableXhrSync:Gn,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:It,v:_v},maxUnloadEventRetryAttempts:{isVal:It,v:gv},addNoResponse:Gn,excludeCsMetaData:Gn});function wp(d){return d&&d.sendPOST}var Xh=function(d){xa(_,d);function _(){var T=d.call(this)||this;T.identifier="PostChannel",T.priority=1011,T.version="4.3.4";var D,R=!1,Y=[],q,K=!1,re=0,ae,Ne=0,Ye,Ue={},Ie=t,fe,Le,be,He,De,Ee,$e,$t,Zt,or,Dr,Lr,ln,nn,Xt,Qn,Je,lt,Sr,lr,wt,Pr;return Ki(_,T,function(Nt,Ma){Zr(),Nt._getDbgPlgTargets=function(){return[De,D]},Nt[Pt]=function(x,M,U){va(M,function(){return"PostChannel:initialize"},function(){Ma[Pt](x,M,U),Sr=M.getNotifyMgr();try{Xt=vd(zn(Nt[gp]),M.evtNamespace&&M.evtNamespace()),Nt._addHook($s(x,function(z){var G=z.cfg,H=Xl(null,G,M);D=H.getExtCfg(Nt[gp],Tp),Qn=Sp(D[Tn],D[hc]),Dr=!D[vl]&&rv(),Je=D[A_],wn(M),Ye=D[lh],ae=D.immediateEventLimit,$e=D[Vh],ln=D.maxEventRetryAttempts,nn=D.maxUnloadEventRetryAttempts,lt=D[Bm],jt(G.endpointUrl)?Nt.pause():K&&Nt[jm](),A(),wt=D[R_],Pr=!!D[gf],lr&&ot();var X=G.disablePageUnloadEvents||[];lr=Zv(yc,X,Xt),lr=ma(yc,X,Xt)||lr,lr=sf(Fi,G.disablePageShowEvents,Xt)||lr})),De[Pt](x,Nt.core,Nt)}catch(z){throw Nt.setInitialized(!1),z}},function(){return{theConfig:x,core:M,extensions:U}})},Nt.processTelemetry=function(x,M){df(x,Nt[gp]),M=M||Nt._getTelCtx(M);var U=x;!Pr&&!R&&(wt&&(U[et]=wt),ys(U,!0),Lr?eu(2,2):ea()),Nt.processNext(U,M)},Nt.getOfflineSupport=function(){try{var x=De&&De[vi]();if(De)return{getUrl:function(){return x?x.url:null},serialize:hi,batch:In,shouldProcess:function(M){return!Pr},createPayload:function(M){return null},createOneDSPayload:function(M){if(De[fl])return De[fl](M,Dr)}}}catch{}return null},Nt._doTeardown=function(x,M){eu(2,2),R=!0,De.teardown(),ot(),Zr()};function ot(){Xv(null,Xt),sl(null,Xt),Rm(null,Xt)}function wn(x){var M=x[_f];x[_f]=function(){var U=0;return Je&&(U=U|2),U|M.call(x)}}function In(x){var M=Ep;return x&&x[Q]&&hr(x,function(U){M&&(M+=`
`),M+=U}),M}function hi(x){var M=Ep;try{Tf(x),M=De[Zn](x)}catch{}return M}function yc(x){var M=x||ri().event;M.type!=="beforeunload"&&(Lr=!0,De[Um](Lr)),eu(2,2)}function Fi(x){Lr=!1,De[Um](Lr)}function Tf(x){x.ext&&x.ext[m]&&delete x.ext[m],x.ext&&x.ext[y]&&x.ext[y].id&&delete x.ext[y].id,Dr&&(x.ext=Ao(x.ext),x[fv]&&(x[fv]=Ao(x[fv])),x[cv]&&(x[cv]=Ao(x[cv])))}function ys(x,M){if(x[am]||(x[am]=0),x[yf]||(x[yf]=1),Tf(x),x[dv]){if(be||K)x[yf]=3,x[dv]=!1;else if(De){Dr&&(x=Ao(x)),De[Ym](wd.create(x[et],[x]),x[dv]===!0?1:x[dv],3);return}}var U=x[yf],z=Ne,G=Ye;U===4&&(z=re,G=ae);var H=!1;if(z<G)H=!tu(x,M);else{var X=1,J=Ef;U===4&&(X=4,J=1),H=!0,um(x[et],x[yf],X,J)&&(H=!tu(x,M))}H&&Df(Xs,[x],bo.QueueFull)}Nt.setEventQueueLimits=function(x,M){D[lh]=Ye=$r(x)?x:mi,D[Vh]=$e=$r(M)?M:0,A();var U=Ne>x;if(!U&&$t>0)for(var z=1;!U&&z<=3;z++){var G=Ee[z];G&&G[Xn]&&hr(G[Xn],function(H){H&&H[Tt]()>=$t&&(U=!0)})}wf(!0,U)},Nt.pause=function(){La(),K=!0,De&&De.pause()},Nt[jm]=function(){K=!1,De&&De[jm](),ea()},Nt._loadTransmitProfiles=function(x){Nf(),qr(x,function(M,U){var z=U[Q];if(z>=2){var G=z>2?U[2]:0;if(U[ir](0,z-2),U[1]<0&&(U[0]=-1),U[1]>0&&U[0]>0){var H=U[0]/U[1];U[0]=Math.ceil(H)*U[1]}G>=0&&U[1]>=0&&G>U[1]&&(G=U[1]),U[at](G),Ue[M]=U}})},Nt.flush=function(x,M,U){x===void 0&&(x=!0);var z;if(!K)if(U=U||1,x)M||(z=Ri(function(H){M=H})),q==null?(La(),If(1,0,U),q=ta(function(){q=null,ha(M,U)},0)):Y[at](M);else{var G=La();Uo(1,1,U),M&&M(),G&&ea()}return z},Nt.setMsaAuthTicket=function(x){De[rm](hs,x)},Nt.setAuthPluginHeader=function(x){De[rm](Om,x)},Nt.removeAuthPluginHeader=function(){De.removeHeader(Om)},Nt.hasEvents=Qs,Nt._setTransmitProfile=function(x){Ie!==x&&Ue[x]!==void 0&&(La(),Ie=x,ea())},Ll(Nt,function(){return De},["addResponseHandler"]);function Uo(x,M,U){var z=If(x,M,U);return De[uv](M,U),z}function Qs(){return Ne>0}function ea(){if(Zt>=0&&If(Zt,0,or)&&De[uv](0,or),re>0&&!Le&&!K){var x=Ue[Ie][2];x>=0&&(Le=ta(function(){Le=null,Uo(4,0,1),ea()},x))}var M=Ue[Ie][1];!fe&&!q&&M>=0&&!K&&(Qs()?fe=ta(function(){fe=null,Uo(He===0?3:1,0,1),He++,He%=2,ea()},M):He=0)}Nt[qm]=function(){be<mh&&(be++,La(),ea())},Nt._clearBackOff=function(){be&&(be=0,La(),ea())};function Zr(){D=null,R=!1,Y=[],q=null,K=!1,re=0,ae=500,Ne=0,Ye=mi,Ue={},Ie=t,fe=null,Le=null,be=0,He=0,Ee={},$e=0,lr=!1,$t=0,Zt=-1,or=null,Dr=!0,Lr=!1,ln=_v,nn=gv,Xt=null,wt=null,Pr=!1,Qn=Sp(),De=new gc(hv,hh,Zh,{requeue:Ou,send:u,sent:p,drop:g,rspFail:E,oth:C}),yv(),Sc(),A()}function ta(x,M){M===0&&be&&(M=1);var U=1e3;return be&&(U=vh(be-1)),Qn.set(x,M*U)}function La(){return fe!==null?(fe.cancel(),fe=null,He=0,!0):!1}function eu(x,M){La(),q&&(q.cancel(),q=null),K||Uo(1,x,M)}function Sc(){Ee[4]={batches:[],iKeyMap:{}},Ee[3]={batches:[],iKeyMap:{}},Ee[2]={batches:[],iKeyMap:{}},Ee[1]={batches:[],iKeyMap:{}}}function Ui(x,M,U){var z=Ee[M];z||(M=1,z=Ee[M]);var G=z.iKeyMap[x];return!G&&U&&(G=wd.create(x),z.batches[at](G),z.iKeyMap[x]=G),G}function wf(x,M){De[Lm]()&&!be&&($e>0&&Ne>$e&&(M=!0),M&&q==null&&Nt.flush(x,function(){},20))}function tu(x,M){Dr&&(x=Ao(x));var U=x[yf],z=Ui(x[et],U,!0);return z.addEvent(x)?(U!==4?(Ne++,M&&x[am]===0&&wf(!x.sync,$t>0&&z[Tt]()>=$t)):re++,!0):!1}function um(x,M,U,z){for(;U<=M;){var G=Ui(x,M,!0);if(G&&G[Tt]()>0){var H=G[ct](0,z),X=H[Tt]();if(X>0)return U===4?re-=X:Ne-=X,a(Xs,[H],bo.QueueFull),!0}U++}return bc(),!1}function bc(){for(var x=0,M=0,U=function(G){var H=Ee[G];H&&H[Xn]&&hr(H[Xn],function(X){G===4?x+=X[Tt]():M+=X[Tt]()})},z=1;z<=4;z++)U(z);Ne=M,re=x}function If(x,M,U){var z=!1,G=M===0;return!G||De[Lm]()?va(Nt.core,function(){return"PostChannel._queueBatches"},function(){for(var H=[],X=4;X>=x;){var J=Ee[X];J&&J.batches&&J.batches[Q]>0&&(hr(J[Xn],function(pe){De.addBatch(pe)?z=z||pe&&pe[Tt]()>0:H=H[me](pe[Jt]()),X===4?re-=pe[Tt]():Ne-=pe[Tt]()}),J[Xn]=[],J.iKeyMap={}),X--}H[Q]>0&&Df(Xs,H,bo.KillSwitch),z&&Zt>=x&&(Zt=-1,or=0)},function(){return{latency:x,sendType:M,sendReason:U}},!G):(Zt=Zt>=0?Math.min(Zt,x):x,or=Math.max(or,U)),z}function ha(x,M){Uo(1,0,M),bc(),Ip(function(){x&&x(),Y[Q]>0?q=ta(function(){q=null,ha(Y.shift(),M)},0):(q=null,ea())})}function Ip(x){De[Fm]()?x():q=ta(function(){q=null,Ip(x)},Gm)}function Nf(){La(),yv(),Ie=t,ea()}function yv(){Ue={},Ue[t]=[2,1,0],Ue[r]=[6,3,0],Ue[n]=[18,9,0]}function Ou(x,M){var U=[],z=ln;Lr&&(z=nn),hr(x,function(G){G&&G[Tt]()>0&&hr(G[Jt](),function(H){H&&(H[dv]&&(H[yf]=4,H[dv]=!1),H[am]<z?(df(H,Nt[gp]),ys(H,!1)):U[at](H))})}),U[Q]>0&&Df(Xs,U,bo.NonRetryableStatus),Lr&&eu(2,2)}function _i(x,M){var U=Sr||{},z=U[x];if(z)try{z.apply(U,M)}catch(G){da(Nt.diagLog(),1,74,x+" notification failed: "+G)}}function Df(x,M){for(var U=[],z=2;z<arguments.length;z++)U[z-2]=arguments[z];M&&M[Q]>0&&_i(x,[M][me](U))}function a(x,M){for(var U=[],z=2;z<arguments.length;z++)U[z-2]=arguments[z];M&&M[Q]>0&&hr(M,function(G){G&&G[Tt]()>0&&_i(x,[G.events()][me](U))})}function u(x,M,U){x&&x[Q]>0&&_i("eventsSendRequest",[M>=1e3&&M<=1999?M-1e3:0,U!==!0])}function p(x,M){a("eventsSent",x,M),ea()}function g(x,M){a(Xs,x,M>=8e3&&M<=8999?M-8e3:bo.Unknown)}function E(x){a(Xs,x,bo.NonRetryableStatus),ea()}function C(x,M){a(Xs,x,bo.Unknown),ea()}function A(){lt?$t=0:$t=Math.max(hv*(hh+1),Ye/6)}}),T}return _.__ieDyn=1,_}(ef);e.BE_PROFILE=n,e.NRT_PROFILE=r,e.PostChannel=Xh,e.RT_PROFILE=t})});var IS=Rd(wv=>{"use strict";var vN=wv&&wv.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),mN=wv&&wv.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),wS=wv&&wv.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&vN(t,e,r);return mN(t,e),t};Object.defineProperty(wv,"__esModule",{value:!0});wv.oneDataSystemClientFactory=void 0;var hN=async(e,t,r)=>{let n=await Promise.resolve().then(()=>wS(bS())),s=await Promise.resolve().then(()=>wS(TS())),c=new n.AppInsightsCore,h=new s.PostChannel,b={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[h]]};if(r){b.extensionConfig={};let $={alwaysUseXhrOverride:!0,httpXHROverride:r};b.extensionConfig[h.identifier]=$}let k=t.workspace.getConfiguration("telemetry").get("internalTesting");return c.initialize(b,[]),c.addTelemetryInitializer($=>{$.ext=$.ext??{},$.ext.web=$.ext.web??{},$.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',k&&($.ext.utc=$.ext.utc??{},$.ext.utc.flags=8462029)}),c},_N=async(e,t,r)=>{let n=await hN(e,t,r);return{logEvent:(h,b)=>{try{n==null||n.track({name:h,baseData:{name:h,properties:b==null?void 0:b.properties,measurements:b==null?void 0:b.measurements}})}catch(N){throw new Error(`Failed to log event to app insights!
`+N.message)}},flush:async()=>{try{return new Promise((b,N)=>{if(!n){b();return}n.flush(!0,k=>{if(!k){N("Failed to flush app 1DS!");return}})})}catch(h){throw new Error(`Failed to flush 1DS!
`+h.message)}},dispose:async()=>new Promise(b=>{if(!n){b();return}n.unload(!1,()=>{b(),n=void 0},1e3)})}};wv.oneDataSystemClientFactory=_N});var DS=Rd((Cg,NS)=>{(function(e,t){typeof Cg=="object"&&typeof NS<"u"?t(Cg):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{})))})(Cg,function(e){"use strict";function t(f,m){return f||m}function r(f,m){return f[m]}var n=void 0,s=null,c="",h="function",b="object",N="prototype",k="__proto__",$="undefined",ne="constructor",le="Symbol",we="_polyfill",ge="length",ve="name",ce="call",Pe="toString",Ke=t(Object),ut=r(Ke,N),Fe=t(String),ft=r(Fe,N),Ot=t(Math),tr=t(Array),ur=r(tr,N),gr=r(ur,"slice");function xr(f,m){try{return{v:f.apply(this,m)}}catch(y){return{e:y}}}function pn(f){return function(m){return typeof m===f}}function vo(f){var m="[object "+f+"]";return function(y){return!!(y&&Yi(y)===m)}}function Yi(f){return ut[Pe].call(f)}function Vr(f){return typeof f===$||f===$}function Sn(f){return!Ts(f)}function tt(f){return f===s||Vr(f)}function Ts(f){return!!f||f!==n}var Ve=pn("string"),Ir=pn(h);function vn(f){return!f&&tt(f)?!1:!!f&&typeof f===b}var Gt=r(tr,"isArray"),qt=vo("Error"),Qe=r(Ke,"getOwnPropertyDescriptor");function xn(f,m){return!!f&&ut.hasOwnProperty[ce](f,m)}var rt=t(r(Ke,"hasOwn"),Dc);function Dc(f,m){return xn(f,m)||!!Qe(f,m)}function Bt(f,m,y){if(f&&vn(f)){for(var I in f)if(rt(f,I)&&m[ce](y||f,I,f[I])===-1)break}}var mo={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function zt(f){var m={};if(m[mo.c]=!0,m[mo.e]=!0,f.l){m.get=function(){return f.l.v};var y=Qe(f.l,"v");y&&y.set&&(m.set=function(I){f.l.v=I})}return Bt(f,function(I,F){m[mo[I]]=Sn(F)?m[mo[I]]:F}),m}var It=r(Ke,"defineProperty");function en(f,m,y){return It(f,m,zt(y))}function jt(f,m,y,I,F){var V={};return Bt(f,function(W,ee){nt(V,W,m?ee:W,F),nt(V,ee,y?ee:W,F)}),I?I(V):V}function nt(f,m,y,I){It(f,m,{value:y,enumerable:!0,writable:!!I})}var rr=t(Fe),ti="[object Error]";function bt(f,m){var y=c,I=ut[Pe][ce](f);I===ti&&(f={stack:rr(f.stack),message:rr(f.message),name:rr(f.name)});try{y=JSON.stringify(f,s,m?typeof m=="number"?m:4:n),y=(y?y.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):s)||rr(f)}catch(F){y=" - "+bt(F,m)}return I+": "+y}function qr(f){throw new Error(f)}function ho(f){throw new TypeError(f)}var qa=r(Ke,"freeze");function Hr(f){return f}function Pn(f){return f[k]||s}var $i=r(Ke,"assign"),Vn=r(Ke,"keys"),Yr=t(qa,Hr),Wt=t(r(Ke,"getPrototypeOf"),Pn);function fr(f){return jt(f,1,0,Yr)}function Br(f){var m={};return Bt(f,function(y,I){nt(m,y,I[1]),nt(m,I[0],I[1])}),Yr(m)}function ou(f){return Br(f)}var Hn="__tsUtils$gblCfg",Ff;function Uu(){var f;return typeof globalThis!==$&&(f=globalThis),!f&&typeof self!==$&&(f=self),!f&&typeof window!==$&&(f=window),!f&&typeof global!==$&&(f=global),f}function Wr(){if(!Ff){var f=xr(Uu).v||{};Ff=f[Hn]=f[Hn]||{}}return Ff}var _o=Vt;function Vt(f,m,y){var I=m?m[f]:s;return function(F){var V=(F?F[f]:s)||I;if(V||y){var W=arguments;return(V||y).apply(F,V?gr[ce](W,1):W)}ho('"'+rr(f)+'" not defined for '+bt(F))}}var bn=r(Ot,"max"),Ba=_o("slice",ft),Bo=_o("substring",ft),qi=Vt("substr",ft,Ld);function Ld(f,m,y){return tt(f)&&ho("Invalid "+bt(f)),y<0?c:(m=m||0,m<0&&(m=bn(m+f[ge],0)),Vr(y)?Ba(f,m):Ba(f,m,m+y))}function ju(f,m){return Bo(f,0,m)}var qn="_urid",Si;function Bi(){if(!Si){var f=Wr();Si=f.gblSym=f.gblSym||{k:{},s:{}}}return Si}function Yu(f){var m={description:rr(f),toString:function(){return le+"("+f+")"}};return m[we]=!0,m}function ws(f){var m=Bi();if(!rt(m.k,f)){var y=Yu(f),I=Vn(m.s).length;y[qn]=function(){return I+"_"+y[Pe]()},m.k[f]=y,m.s[y[qn]()]=rr(f)}return m.k[f]}var ia;function Nr(){ia=Wr()}function En(f){return It({toJSON:function(){return f}},"v",{value:f})}var bi="window",Bn;function go(f,m){var y;return function(){return!ia&&Nr(),(!y||ia.lzy)&&(y=En(xr(f,m).v)),y.v}}function Is(f){return!ia&&Nr(),(!Bn||f===!1||ia.lzy)&&(Bn=En(xr(Uu).v||s)),Bn.v}function Jr(f,m){var y;if(!Bn||m===!1?y=Is(m):y=Bn.v,y&&y[f])return y[f];if(f===bi)try{return window}catch{}return s}var Ca=go(Jr,["document"]);function Fd(){return!!Uf()}var Uf=go(Jr,[bi]);function Ud(){return!!on()}var on=go(Jr,["navigator"]),yo,zo;function kn(){return yo=En(xr(Jr,[le]).v),yo}function Go(f){var m=(ia.lzy?0:yo)||kn();return m.v?m.v[f]:n}function su(f,m){!ia&&Nr();var y=(ia.lzy?0:yo)||kn();return y.v?y.v(f):m?s:Yu(f)}function za(f){return!ia&&Nr(),zo=(ia.lzy?0:zo)||En(xr(Go,["for"]).v),(zo.v||ws)(f)}function sn(f,m,y){return f.apply(m,y)}function On(f,m,y){if(f)for(var I=f[ge]>>>0,F=0;F<I&&!(F in f&&m[ce](y||f,f[F],F,f)===-1);F++);}var $u=_o("indexOf",ur),ri=_o("map",ur),wr=_o("reduce",ur),oa=t(r(Ke,"create"),jf);function jf(f){if(!f)return{};var m=typeof f;m!==b&&m!==h&&ho("Prototype must be an Object or function: "+bt(f));function y(){}return y[N]=f,new y}var ya;function Vo(f,m){var y=Ke.setPrototypeOf||function(I,F){var V;!ya&&(ya=En((V={},V[k]=[],V instanceof Array))),ya.v?I[k]=F:Bt(F,function(W,ee){return I[W]=ee})};return y(f,m)}function Cc(f,m,y){xr(en,[m,ve,{v:f,c:!0,e:!1}]),m=Vo(m,y);function I(){this[ne]=m,xr(en,[this,ve,{v:f,c:!0,e:!1}])}return m[N]=y===s?oa(y):(I[N]=y[N],new I),m}function Ho(f,m){m&&(f[ve]=m)}function Yf(f,m,y){var I=y||Error,F=I[N][ve],V=Error.captureStackTrace;return Cc(f,function(){var W=this,ee=arguments;try{xr(Ho,[I,f]);var Q=sn(I,W,gr[ce](ee))||W;if(Q!==W){var me=Wt(W);me!==Wt(Q)&&Vo(Q,me)}return V&&V(Q,W[ne]),m&&m(Q,ee),Q}finally{xr(Ho,[I,F])}},I)}function tn(){return(Date.now||El)()}function El(){return new Date().getTime()}function Ga(f){return function(y){return tt(y)&&ho("strTrim called ["+bt(y)+"]"),y&&y.replace&&(y=y.replace(f,c)),y}}var jd=Ga(/^\s+|(?=\s)\s+$/g),ni=Vt("trim",ft,jd),Up,ai,Tl;function zi(f){if(!f||typeof f!==b)return!1;Tl||(Tl=Fd()?Uf():!0);var m=!1;if(f!==Tl){ai||(Up=Function[N][Pe],ai=Up[ce](Ke));try{var y=Wt(f);m=!y,m||(xn(y,ne)&&(y=y[ne]),m=!!(y&&typeof y===h&&Up[ce](y)===ai))}catch{}}return m}var $f;function hr(){return!ia&&Nr(),(!$f||ia.lzy)&&($f=En(xr(Jr,["performance"]).v)),$f.v}var Ko=Vt("endsWith",ft,qf);function qf(f,m,y){Ve(f)||ho("'"+bt(f)+"' is not a string");var I=Ve(m)?m:rr(m),F=!Vr(y)&&y<f[ge]?y:f[ge];return Bo(f,F-I[ge],F)===I}var Va=_o("indexOf",ft),xc="ref",xt="unref",ii="hasRef",qu="enabled";function wl(f,m,y){var I=!0,F=f?m(s):s,V;function W(){return I=!1,F&&F[xt]&&F[xt](),V}function ee(){F&&y(F),F=s}function Q(){return F=m(F),I||W(),V}function me(et){!et&&F&&ee(),et&&!F&&Q()}return V={cancel:ee,refresh:Q},V[ii]=function(){return F&&F[ii]?F[ii]():I},V[xc]=function(){return I=!0,F&&F[xc]&&F[xc](),V},V[xt]=W,V=It(V,qu,{get:function(){return!!F},set:me}),{h:V,dn:function(){F=s}}}function kv(f,m,y){var I=Gt(m),F=I?m.length:0,V=(F>0?m[0]:I?n:m)||setTimeout,W=(F>1?m[1]:n)||clearTimeout,ee=y[0];y[0]=function(){Q.dn(),sn(ee,n,gr[ce](arguments))};var Q=wl(f,function(me){if(me){if(me.refresh)return me.refresh(),me;sn(W,n,[me])}return sn(V,n,y)},function(me){sn(W,n,[me])});return Q.h}function Ei(f,m){return kv(!0,n,gr[ce](arguments))}var Il=fr,Yd=ou,uu="toLowerCase",Ti="blkVal",dt="length",sa="rdOnly",cu="notify",Ns="warnToConsole",$d="throwInternal",qd="setDf",Kn="watch",oi="logger",Bd="apply",wi="push",Ha="splice",Im="hdlr",Ov="cancel",jp="name",lu="unload",Yp="version",uh="loggingLevelConsole",zd="messageId",xa="message",Nl="diagLog",Dl="userAgent",Gi="split",si="nodeType",fu="replace",$p="logInternalMessage",Ii="type",Gd="handler",Bu="traceId",Pc="spanId",Cl="traceFlags",Bf="getAttribute",Vd;function qp(f,m){Vd||(Vd=Yf("AggregationError",function(I,F){F[dt]>1&&(I.errors=F[1])}));var y=f||"One or more errors occurred.";throw On(m,function(I,F){y+=`
`.concat(F," > ").concat(bt(I))}),new Vd(y,m||[])}var Bp="function",du="object",Hd="undefined",Ds="prototype",zu=Object,Ni=zu[Ds];(Is()||{}).Symbol,(Is()||{}).Reflect;var xl="hasOwnProperty",zf=function(f){for(var m,y=1,I=arguments.length;y<I;y++){m=arguments[y];for(var F in m)Ni[xl].call(m,F)&&(f[F]=m[F])}return f},Ac=$i||zf,Vi=function(f,m){return Vi=zu.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,I){y.__proto__=I}||function(y,I){for(var F in I)I[xl](F)&&(y[F]=I[F])},Vi(f,m)};function Mv(f,m){typeof m!==Bp&&m!==null&&ho("Class extends value "+String(m)+" is not a constructor or null"),Vi(f,m);function y(){this.constructor=f}f[Ds]=m===null?oa(m):(y[Ds]=m[Ds],new y)}var Wo,So="constructor",Hi="prototype",pu="function",Gf="_dynInstFuncs",Rc="_isDynProxy",kc="_dynClass",Gu="_dynCls$",Vf="_dynInstChk",Pl=Vf,Hf="_dfOpts",Vu="_unknown_",Ki="__proto__",Oc="_dyn"+Ki,bo="__dynProto$Gbl",ui="_dynInstProto",Jo="useBaseInst",zr="setInstFuncs",Cs=Object,Wi=Cs.getPrototypeOf,Mc=Cs.getOwnPropertyNames,Lc=Is(),Zo=Lc[bo]||(Lc[bo]={o:(Wo={},Wo[zr]=!0,Wo[Jo]=!0,Wo),n:1e3});function Al(f){return f&&(f===Cs[Hi]||f===Array[Hi])}function Xo(f){return Al(f)||f===Function[Hi]}function vu(f){var m;if(f){if(Wi)return Wi(f);var y=f[Ki]||f[Hi]||(f[So]?f[So][Hi]:null);m=f[Oc]||y,xn(f,Oc)||(delete f[ui],m=f[Oc]=f[ui]||f[Oc],f[ui]=y)}return m}function Ka(f,m){var y=[];if(Mc)y=Mc(f);else for(var I in f)typeof I=="string"&&xn(f,I)&&y.push(I);if(y&&y.length>0)for(var F=0;F<y.length;F++)m(y[F])}function Kd(f,m,y){return m!==So&&typeof f[m]===pu&&(y||xn(f,m))&&m!==Ki&&m!==Hi}function Hu(f){ho("DynamicProto: "+f)}function Pa(f){var m=oa(null);return Ka(f,function(y){!m[y]&&Kd(f,y,!1)&&(m[y]=f[y])}),m}function Kf(f,m){for(var y=f.length-1;y>=0;y--)if(f[y]===m)return!0;return!1}function Wd(f,m,y,I){function F(Q,me,et){var Tt=me[et];if(Tt[Rc]&&I){var Jt=Q[Gf]||{};Jt[Pl]!==!1&&(Tt=(Jt[me[kc]]||{})[et]||Tt)}return function(){return Tt.apply(Q,arguments)}}var V=oa(null);Ka(y,function(Q){V[Q]=F(m,y,Q)});for(var W=vu(f),ee=[];W&&!Xo(W)&&!Kf(ee,W);)Ka(W,function(Q){!V[Q]&&Kd(W,Q,!Wi)&&(V[Q]=F(m,W,Q))}),ee.push(W),W=vu(W);return V}function Rl(f,m,y,I){var F=null;if(f&&xn(y,kc)){var V=f[Gf]||oa(null);if(F=(V[y[kc]]||oa(null))[m],F||Hu("Missing ["+m+"] "+pu),!F[Vf]&&V[Pl]!==!1){for(var W=!xn(f,m),ee=vu(f),Q=[];W&&ee&&!Xo(ee)&&!Kf(Q,ee);){var me=ee[m];if(me){W=me===I;break}Q.push(ee),ee=vu(ee)}try{W&&(f[m]=F),F[Vf]=1}catch{V[Pl]=!1}}}return F}function kl(f,m,y){var I=m[f];return I===y&&(I=vu(m)[f]),typeof I!==pu&&Hu("["+f+"] is not a "+pu),I}function Jd(f,m,y,I,F){function V(Q,me){var et=function(){var Tt=Rl(this,me,Q,et)||kl(me,Q,et);return Tt.apply(this,arguments)};return et[Rc]=1,et}if(!Al(f)){var W=y[Gf]=y[Gf]||oa(null);if(!Al(W)){var ee=W[m]=W[m]||oa(null);W[Pl]!==!1&&(W[Pl]=!!F),Al(ee)||Ka(y,function(Q){Kd(y,Q,!1)&&y[Q]!==I[Q]&&(ee[Q]=y[Q],delete y[Q],(!xn(f,Q)||f[Q]&&!f[Q][Rc])&&(f[Q]=V(f,Q)))})}}}function Lv(f,m){if(Wi){for(var y=[],I=vu(m);I&&!Xo(I)&&!Kf(y,I);){if(I===f)return!0;y.push(I),I=vu(I)}return!1}return!0}function Ku(f,m){return xn(f,Hi)?f.name||m||Vu:((f||{})[So]||{}).name||m||Vu}function Eo(f,m,y,I){xn(f,Hi)||Hu("theClass is an invalid class definition.");var F=f[Hi];Lv(F,m)||Hu("["+Ku(f)+"] not in hierarchy of ["+Ku(m)+"]");var V=null;xn(F,kc)?V=F[kc]:(V=Gu+Ku(f,"_")+"$"+Zo.n,Zo.n++,F[kc]=V);var W=Eo[Hf],ee=!!W[Jo];ee&&I&&I[Jo]!==void 0&&(ee=!!I[Jo]);var Q=Pa(m),me=Wd(F,m,Q,ee);y(m,me);var et=!!Wi&&!!W[zr];et&&I&&(et=!!I[zr]),Jd(F,V,m,Q,et!==!1)}Eo[Hf]=Zo.o;var Ji=void 0,mn="",Ol="Not dynamic - ",Wu=/-([a-z])/g,Ju=/([^\w\d_$])/g,Zd=/^(\d+[\w\d_$])/;function Di(f){return!tt(f)}function mu(f){var m=f;return m&&Ve(m)&&(m=m[fu](Wu,function(y,I){return I.toUpperCase()}),m=m[fu](Ju,"_"),m=m[fu](Zd,function(y,I){return"_"+I})),m}function xs(f,m){return f&&m?Va(f,m)!==-1:!1}function cr(f){return f&&f.toISOString()||""}function To(f){return qt(f)?f[jp]:mn}function Qo(f){return function(){function m(){var y=this;f&&Bt(f,function(I,F){y[I]=F})}return m}()}var Ci="console",Wf="JSON",xi="crypto",hu="msCrypto",un="msie",Wa="trident/",Or=null,pt=null,Zu=null;function wo(){return typeof console!==Hd?console:Jr(Ci)}function Ps(){return!!(typeof JSON===du&&JSON||Jr(Wf)!==null)}function Zi(){return Ps()?JSON||Jr(Wf):null}function _u(){return Jr(xi)}function Pi(){return Jr(hu)}function Fr(){var f=on();if(f&&(f[Dl]!==pt||Or===null)){pt=f[Dl];var m=(pt||mn)[uu]();Or=xs(m,un)||xs(m,Wa)}return Or}function Io(f){return(Zu===null||f===!1)&&(Zu=Ud()&&!!on().sendBeacon),Zu}function Mr(f,m){if(f)for(var y=0;y<f[dt];y++){var I=f[y];if(I[jp]&&I[jp]===m)return I}return{}}function No(f){var m=Ca();return m&&f?Mr(m.querySelectorAll("meta"),f).content:null}function Jf(f){var m,y=hr();if(y){var I=y.getEntriesByType("navigation")||[];m=Mr((I[dt]>0?I[0]:{}).serverTiming,f).description}return m}var Do=4294967296,An=4294967295,Xi=123456789,es=987654321,Sa=!1,Aa=Xi,Fc=es;function Xu(f){f<0&&(f>>>=0),Aa=Xi+f&An,Fc=es-f&An,Sa=!0}function Zf(){try{var f=tn()&2147483647;Xu((Math.random()*Do^f)+f)}catch{}}function As(f){return f>0?Math.floor(Co()/An*(f+1))>>>0:0}function Co(f){var m=0,y=_u()||Pi();return y&&y.getRandomValues&&(m=y.getRandomValues(new Uint32Array(1))[0]&An),m===0&&Fr()&&(Sa||Zf(),m=xo()&An),m===0&&(m=Math.floor(Do*Math.random()|0)),f||(m>>>=0),m}function xo(f){Fc=36969*(Fc&65535)+(Fc>>16)&An,Aa=18e3*(Aa&65535)+(Aa>>16)&An;var m=(Fc<<16)+(Aa&65535)>>>0&An|0;return f||(m>>>=0),m}function Qu(f){f===void 0&&(f=22);for(var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=Co()>>>0,I=0,F=mn;F[dt]<f;)I++,F+=m.charAt(y&63),y>>>=6,I===5&&(y=(Co()<<2&4294967295|y&3)>>>0,I=0);return F}var Po="3.3.4",Mn="."+Qu(6),Xf=0;function ec(f){return f[si]===1||f[si]===9||!+f[si]}function Rs(f,m){var y=m[f.id];if(!y){y={};try{ec(m)&&en(m,f.id,{e:!1,v:y})}catch{}}return y}function ci(f,m){return m===void 0&&(m=!1),mu(f+Xf+++(m?"."+Po:mn)+Mn)}function ts(f){var m={id:ci("_aiData-"+(f||mn)+"."+Po),accept:function(y){return ec(y)},get:function(y,I,F,V){var W=y[m.id];return W?W[mu(I)]:(V&&(W=Rs(m,y),W[mu(I)]=F),F)},kill:function(y,I){if(y&&y[I])try{delete y[I]}catch{}}};return m}function ks(f){return f&&vn(f)&&(f.isVal||f.fb||rt(f,"v")||rt(f,"mrg")||rt(f,"ref")||f.set)}function Ai(f,m,y){var I,F=y.dfVal||Ts;if(m&&y.fb){var V=y.fb;Gt(V)||(V=[V]);for(var W=0;W<V[dt];W++){var ee=V[W],Q=m[ee];if(F(Q)?I=Q:f&&(Q=f.cfg[ee],F(Q)&&(I=Q),f.set(f.cfg,rr(ee),Q)),F(I))break}}return!F(I)&&F(y.v)&&(I=y.v),I}function Uc(f,m,y){var I=y;if(y&&ks(y)&&(I=Ai(f,m,y)),I){ks(I)&&(I=Uc(f,m,I));var F;Gt(I)?(F=[],F[dt]=I[dt]):zi(I)&&(F={}),F&&(Bt(I,function(V,W){W&&ks(W)&&(W=Uc(f,m,W)),F[V]=W}),I=F)}return I}function gu(f,m,y,I){var F,V,W,ee=I,Q,me,et,Tt;ks(ee)?(F=ee.isVal,V=ee.set,et=ee[sa],Tt=ee[Ti],Q=ee.mrg,me=ee.ref,!me&&Vr(me)&&(me=!!Q),W=Ai(f,m,ee)):W=I,Tt&&f[Ti](m,y);var Jt,at=!0,ct=m[y];(ct||!tt(ct))&&(Jt=ct,at=!1,F&&Jt!==W&&!F(Jt)&&(Jt=W,at=!0),V&&(Jt=V(Jt,W,m),at=Jt===W)),at?W?Jt=Uc(f,m,W):Jt=W:(zi(Jt)||Gt(W))&&Q&&W&&(zi(W)||Gt(W))&&Bt(W,function(ir,Mt){gu(f,Jt,ir,Mt)}),f.set(m,y,Jt),me&&f.ref(m,y),et&&f[sa](m,y)}var ua=za("[[ai_dynCfg_1]]"),yu=za("[[ai_blkDynCfg_1]]"),Os=za("[[ai_frcDynCfg_1]]");function Ri(f){if(f){var m;if(Gt(f)?(m=[],m[dt]=f[dt]):zi(f)&&(m={}),m)return Bt(f,function(y,I){m[y]=Ri(I)}),m}return f}function tc(f){if(f){var m=f[ua]||f;if(m.cfg&&(m.cfg===f||m.cfg[ua]===m))return m}return null}function cn(f){if(f&&(zi(f)||Gt(f)))try{f[yu]=!0}catch{}return f}function Wn(f,m,y){var I=!1;return y&&!f[m.blkVal]&&(I=y[Os],!I&&!y[yu]&&(I=zi(y)||Gt(y))),I}function ki(f){ho("InvalidAccess:"+f)}var rc=["push","pop","shift","unshift","splice"],rs=function(f,m,y,I){f&&f[$d](3,108,"".concat(y," [").concat(m,"] failed - ")+bt(I))};function Xd(f,m,y){Gt(m)&&On(rc,function(I){var F=m[I];m[I]=function(){for(var V=[],W=0;W<arguments.length;W++)V[W]=arguments[W];var ee=F[Bd](this,V);return Ja(f,m,y,"Patching"),ee}})}function li(f,m){var y=Qe(f,m);return y&&y.get}function jc(f,m,y,I){var F={n:y,h:[],trk:function(me){me&&me.fn&&($u(F.h,me)===-1&&F.h[wi](me),f.trk(me,F))},clr:function(me){var et=$u(F.h,me);et!==-1&&F.h[Ha](et,1)}},V=!0,W=!1;function ee(){V&&(W=W||Wn(ee,f,I),I&&!I[ua]&&W&&(I=Ja(f,I,y,"Converting")),V=!1);var me=f.act;return me&&F.trk(me),I}ee[f.prop]={chng:function(){f.add(F)}};function Q(me){if(I!==me){ee[f.ro]&&!f.upd&&ki("["+y+"] is read-only:"+bt(m)),V&&(W=W||Wn(ee,f,I),V=!1);var et=W&&ee[f.rf];if(W)if(et){Bt(I,function(Jt){I[Jt]=me?me[Jt]:Ji});try{Bt(me,function(Jt,at){ba(f,I,Jt,at)}),me=I}catch(Jt){rs((f.hdlr||{})[oi],y,"Assigning",Jt),W=!1}}else I&&I[ua]&&Bt(I,function(Jt){var at=li(I,Jt);if(at){var ct=at[f.prop];ct&&ct.chng()}});if(me!==I){var Tt=me&&Wn(ee,f,me);!et&&Tt&&(me=Ja(f,me,y,"Converting")),I=me,W=Tt}f.add(F)}}en(m,F.n,{g:ee,s:Q})}function ba(f,m,y,I){if(m){var F=li(m,y),V=F&&!!F[f.prop];V?m[y]=I:jc(f,m,y,I)}return m}function Qf(f,m,y,I){if(m){var F=li(m,y),V=F&&!!F[f.prop],W=I&&I[0],ee=I&&I[1],Q=I&&I[2];if(!V){if(Q)try{cn(m)}catch(me){rs((f.hdlr||{})[oi],y,"Blocking",me)}try{ba(f,m,y,m[y]),F=li(m,y)}catch(me){rs((f.hdlr||{})[oi],y,"State",me)}}W&&(F[f.rf]=W),ee&&(F[f.ro]=ee),Q&&(F[f.blkVal]=!0)}return m}function Ja(f,m,y,I){try{Bt(m,function(F,V){ba(f,m,F,V)}),m[ua]||(It(m,ua,{get:function(){return f[Im]}}),Xd(f,m,y))}catch(F){rs((f.hdlr||{})[oi],y,I,F)}return m}var ns="[[ai_",as="]]";function Qd(f){var m,y=su(ns+"get"+f.uid+as),I=su(ns+"ro"+f.uid+as),F=su(ns+"rf"+f.uid+as),V=su(ns+"blkVal"+f.uid+as),W=su(ns+"dtl"+f.uid+as),ee=null,Q=null,me;function et(ct,ir){var Mt=me.act;try{me.act=ct,ct&&ct[W]&&(On(ct[W],function(Er){Er.clr(ct)}),ct[W]=[]),ir({cfg:f.cfg,set:f.set.bind(f),setDf:f[qd].bind(f),ref:f.ref.bind(f),rdOnly:f[sa].bind(f)})}catch(Er){var yr=f[oi];throw yr&&yr[$d](1,107,bt(Er)),Er}finally{me.act=Mt||null}}function Tt(){if(ee){var ct=ee;ee=null,Q&&Q[Ov](),Q=null;var ir=[];if(On(ct,function(Mt){if(Mt&&(Mt[W]&&(On(Mt[W],function(yr){yr.clr(Mt)}),Mt[W]=null),Mt.fn))try{et(Mt,Mt.fn)}catch(yr){ir[wi](yr)}}),ee)try{Tt()}catch(Mt){ir[wi](Mt)}ir[dt]>0&&qp("Watcher error(s): ",ir)}}function Jt(ct){if(ct&&ct.h[dt]>0){ee||(ee=[]),Q||(Q=Ei(function(){Q=null,Tt()},0));for(var ir=0;ir<ct.h[dt];ir++){var Mt=ct.h[ir];Mt&&$u(ee,Mt)===-1&&ee[wi](Mt)}}}function at(ct,ir){if(ct){var Mt=ct[W]=ct[W]||[];$u(Mt,ir)===-1&&Mt[wi](ir)}}return me=(m={prop:y,ro:I,rf:F},m[Ti]=V,m[Im]=f,m.add=Jt,m[cu]=Tt,m.use=et,m.trk=at,m),me}function Ml(f,m){var y={fn:m,rm:function(){y.fn=null,f=null,m=null}};return en(y,"toJSON",{v:function(){return"WatcherHandler"+(y.fn?"":"[X]")}}),f.use(y,m),y}function ed(f,m,y){var I,F=tc(m);if(F)return F;var V=ci("dyncfg",!0),W=m&&y!==!1?m:Ri(m),ee;function Q(){ee[cu]()}function me(yr,Er,Pt){try{yr=ba(ee,yr,Er,Pt)}catch(Tn){rs(f,Er,"Setting value",Tn)}return yr[Er]}function et(yr){return Ml(ee,yr)}function Tt(yr,Er){ee.use(null,function(Pt){var Tn=ee.upd;try{Vr(Er)||(ee.upd=Er),yr(Pt)}finally{ee.upd=Tn}})}function Jt(yr,Er){var Pt;return Qf(ee,yr,Er,(Pt={},Pt[0]=!0,Pt))[Er]}function at(yr,Er){var Pt;return Qf(ee,yr,Er,(Pt={},Pt[1]=!0,Pt))[Er]}function ct(yr,Er){var Pt;return Qf(ee,yr,Er,(Pt={},Pt[2]=!0,Pt))[Er]}function ir(yr,Er){return Er&&Bt(Er,function(Pt,Tn){gu(Mt,yr,Pt,Tn)}),yr}var Mt=(I={uid:null,cfg:W},I[oi]=f,I[cu]=Q,I.set=me,I[qd]=ir,I[Kn]=et,I.ref=Jt,I[sa]=at,I[Ti]=ct,I._block=Tt,I);return en(Mt,"uid",{c:!1,e:!1,w:!1,v:V}),ee=Qd(Mt),Ja(ee,W,"config","Creating"),Mt}function Ll(f,m){f?(f[Ns](m),f[$d](2,108,m)):ki(m)}function Ao(f,m,y,I){var F=ed(y,f||{},I);return m&&F[qd](F.cfg,m),F}function Za(f,m,y){var I=f[ua]||f;return I.cfg&&(I.cfg===f||I.cfg[ua]===I)?I[Kn](m):(Ll(y,Ol+bt(f)),Ao(f,null,y)[Kn](m))}var Yc=null;function Fv(){var f=Jr("Microsoft");return f&&(Yc=f.ApplicationInsights),Yc}function nc(f){var m=Yc;return!m&&f.disableDbgExt!==!0&&(m=Yc||Fv()),m?m.ChromeDbgExt:null}var ac,is="warnToConsole",Fl="AI (Internal): ",Nm="AI: ",ep="AITR_",Ul={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},ic=(ac={},ac[0]=null,ac[1]="errorToConsole",ac[2]=is,ac[3]="debugToConsole",ac);function zp(f){return f?'"'+f[fu](/\"/g,mn)+'"':mn}function Uv(f,m){var y=wo();if(y){var I="log";y[f]&&(I=f),Ir(y[I])&&y[I](m)}}var oc=function(){function f(m,y,I,F){I===void 0&&(I=!1);var V=this;V[zd]=m,V[xa]=(I?Nm:Fl)+m;var W=mn;Ps()&&(W=Zi().stringify(F));var ee=(y?" message:"+zp(y):mn)+(F?" props:"+zp(W):mn);V[xa]+=ee}return f.dataType="MessageData",f}();function jv(f,m){return(f||{})[oi]||new jl(m)}var jl=function(){function f(m){this.identifier="DiagnosticLogger",this.queue=[];var y=0,I={},F,V,W,ee,Q;Eo(f,this,function(me){Q=Tt(m||{}),me.consoleLoggingLevel=function(){return F},me[$d]=function(ct,ir,Mt,yr,Er){Er===void 0&&(Er=!1);var Pt=new oc(ir,Mt,Er,yr);if(ee)throw bt(Pt);var Tn=ic[ct]||is;if(Vr(Pt[xa]))at("throw"+(ct===1?"Critical":"Warning"),Pt);else{if(Er){var hc=+Pt[zd];!I[hc]&&F>=ct&&(me[Tn](Pt[xa]),I[hc]=!0)}else F>=ct&&me[Tn](Pt[xa]);et(ct,Pt)}},me.debugToConsole=function(ct){Uv("debug",ct),at("warning",ct)},me[Ns]=function(ct){Uv("warn",ct),at("warning",ct)},me.errorToConsole=function(ct){Uv("error",ct),at("error",ct)},me.resetInternalMessageCount=function(){y=0,I={}},me[$p]=et,me[lu]=function(ct){Q&&Q.rm(),Q=null};function et(ct,ir){if(!Jt()){var Mt=!0,yr=ep+ir[zd];if(I[yr]?Mt=!1:I[yr]=!0,Mt&&(ct<=V&&(me.queue[wi](ir),y++,at(ct===1?"error":"warn",ir)),y===W)){var Er="Internal events throttle limit per PageView reached for this app.",Pt=new oc(23,Er,!1);me.queue[wi](Pt),ct===1?me.errorToConsole(Er):me[Ns](Er)}}}function Tt(ct){return Za(Ao(ct,Ul,me).cfg,function(ir){var Mt=ir.cfg;F=Mt[uh],V=Mt.loggingLevelTelemetry,W=Mt.maxMessageLimit,ee=Mt.enableDebug})}function Jt(){return y>=W}function at(ct,ir){var Mt=nc(m||{});Mt&&Mt[Nl]&&Mt[Nl](ct,ir)}})}return f.__ieDyn=1,f}();function tp(f){return f||new jl}function Qi(f,m,y,I,F,V){V===void 0&&(V=!1),tp(f)[$d](m,y,I,F,V)}function Gp(){for(var f=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],m=mn,y,I=0;I<4;I++)y=Co(),m+=f[y&15]+f[y>>4&15]+f[y>>8&15]+f[y>>12&15]+f[y>>16&15]+f[y>>20&15]+f[y>>24&15]+f[y>>28&15];var F=f[8+(Co()&3)|0];return qi(m,0,8)+qi(m,9,4)+"4"+qi(m,13,3)+F+qi(m,16,3)+qi(m,19,12)}var Dm=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,td="00",Vp="ff",rp="00000000000000000000000000000000",$c="0000000000000000",rd=1;function sc(f,m,y){return f&&f[dt]===m&&f!==y?!!f.match(/^[\da-f]*$/i):!1}function Ms(f,m,y){return sc(f,m)?f:y}function qc(f){(isNaN(f)||f<0||f>255)&&(f=1);for(var m=f.toString(16);m[dt]<2;)m="0"+m;return m}function Yv(f,m,y,I){var F;return F={},F[Yp]=sc(I,2,Vp)?I:td,F[Bu]=Bc(f)?f:Gp(),F[Pc]=ap(m)?m:ju(Gp(),16),F.traceFlags=y>=0&&y<=255?y:1,F}function np(f,m){var y;if(!f||(Gt(f)&&(f=f[0]||""),!f||!Ve(f)||f[dt]>8192))return null;if(f.indexOf(",")!==-1){var I=f[Gi](",");f=I[m>0&&I[dt]>m?m:0]}var F=Dm.exec(ni(f));return!F||F[1]===Vp||F[2]===rp||F[3]===$c?null:(y={version:(F[1]||mn)[uu](),traceId:(F[2]||mn)[uu](),spanId:(F[3]||mn)[uu]()},y[Cl]=parseInt(F[4],16),y)}function Bc(f){return sc(f,32,rp)}function ap(f){return sc(f,16,$c)}function Ls(f){return!(!f||!sc(f[Yp],2,Vp)||!sc(f[Bu],32,rp)||!sc(f[Pc],16,$c)||!sc(qc(f[Cl]),2))}function Ur(f){return Ls(f)?(f[Cl]&rd)===rd:!1}function uc(f){if(f){var m=qc(f[Cl]);sc(m,2)||(m="01");var y=f[Yp]||td;return y!=="00"&&y!=="ff"&&(y=td),"".concat(y.toLowerCase(),"-").concat(Ms(f.traceId,32,rp).toLowerCase(),"-").concat(Ms(f.spanId,16,$c).toLowerCase(),"-").concat(m.toLowerCase())}return""}function ca(f){var m="traceparent",y=np(No(m),f);return y||(y=np(Jf(m),f)),y}function ip(f){var m=f.getElementsByTagName("script"),y=[];return On(m,function(I){var F=I[Bf]("src");if(F){var V=I[Bf]("crossorigin"),W=I.hasAttribute("async")===!0,ee=I.hasAttribute("defer")===!0,Q=I[Bf]("referrerpolicy"),me={url:F};V&&(me.crossOrigin=V),W&&(me.async=W),ee&&(me.defer=ee),Q&&(me.referrerPolicy=Q),y[wi](me)}}),y}var nd="on",zc="attachEvent",cc="addEventListener",Xa="detachEvent",ad="removeEventListener",Jn="events";ci("aiEvtPageHide"),ci("aiEvtPageShow");var vr=/\.[\.]+/g,Fs=/[\.]+$/,_n=1,os=ts("events"),lc=/^([^.]*)(?:\.(.+)|)/;function fc(f){return f&&f[fu]?f[fu](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,mn):f}function Us(f,m){var y;if(m){var I=mn;Gt(m)?(I=mn,On(m,function(V){V=fc(V),V&&(V[0]!=="."&&(V="."+V),I+=V)})):I=fc(m),I&&(I[0]!=="."&&(I="."+I),f=(f||mn)+I)}var F=lc.exec(f||mn)||[];return y={},y[Ii]=F[1],y.ns=(F[2]||mn).replace(vr,".").replace(Fs,mn)[Gi](".").sort().join("."),y}function eo(f,m,y){y===void 0&&(y=!0);var I=os.get(f,Jn,{},y),F=I[m];return F||(F=I[m]=[]),F}function Yl(f,m,y,I){f&&m&&m[Ii]&&(f[ad]?f[ad](m[Ii],y,I):f[Xa]&&f[Xa](nd+m[Ii],y))}function Hp(f,m,y,I){var F=!1;return f&&m&&m[Ii]&&y&&(f[cc]?(f[cc](m[Ii],y,I),F=!0):f[zc]&&(f[zc](nd+m[Ii],y),F=!0)),F}function $l(f,m,y,I){for(var F=m[dt];F--;){var V=m[F];V&&(!y.ns||y.ns===V.evtName.ns)&&(!I||I(V))&&(Yl(f,V.evtName,V[Gd],V.capture),m[Ha](F,1))}}function Kp(f,m,y){if(m[Ii])$l(f,eo(f,m[Ii]),m,y);else{var I=os.get(f,Jn,{});Bt(I,function(F,V){$l(f,V,m,y)}),Vn(I)[dt]===0&&os.kill(f,Jn)}}function ql(f,m){var y;return m?(Gt(m)?y=[f].concat(m):y=[f,m],y=Us("xx",y).ns[Gi](".")):y=f,y}function Gc(f,m,y,I,F){var V;F===void 0&&(F=!1);var W=!1;if(f)try{var ee=Us(m,I);if(W=Hp(f,ee,y,F),W&&os.accept(f)){var Q=(V={guid:_n++,evtName:ee},V[Gd]=y,V.capture=F,V);eo(f,ee.type)[wi](Q)}}catch{}return W}function op(f,m,y,I,F){if(F===void 0&&(F=!1),f)try{var V=Us(m,I),W=!1;Kp(f,V,function(ee){return V.ns&&!y||ee[Gd]===y?(W=!0,!0):!1}),W||Yl(f,V,y,F)}catch{}}var zn="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Vc="sampleRate",la="ProcessLegacy",Su="http.method",sp="https://dc.services.visualstudio.com",id="/v2/track",fa="not_specified",od="iKey",up=Yd({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),js="split",Et="length",ss="toLowerCase",us="ingestionendpoint",fi="toString",Bl="push",Hc="removeItem",cs="name",Oi="message",Kc="count",sd="preTriggerDate",Ys="disabled",zl="interval",Wc="daysOfMonth",Gl="date",cp="getUTCDate",lp="stringify",Wp="pathname",Cm="correlationHeaderExcludePatterns",ls="extensionConfig",$s="exceptions",fs="parsedStack",Mi="properties",qs="measurements",bu="sizeInBytes",di="typeName",Jc="severityLevel",$v="problemGroup",dc="isManual",Jp="CreateFromInterface",Vl="assembly",Zc="fileName",Hl="hasFullStack",Bs="level",Li="method",Xc="line",Kl="duration",ud="receivedResponse";function da(f,m,y){var I=m[Et],F=zs(f,m);if(F[Et]!==I){for(var V=0,W=F;y[W]!==void 0;)V++,W=Bo(F,0,147)+Jl(V);F=W}return F}function zs(f,m){var y;return m&&(m=ni(rr(m)),m[Et]>150&&(y=Bo(m,0,150),Qi(f,2,57,"name is too long.  It has been truncated to 150 characters.",{name:m},!0))),y||m}function pa(f,m,y){y===void 0&&(y=1024);var I;return m&&(y=y||1024,m=ni(rr(m)),m[Et]>y&&(I=Bo(m,0,y),Qi(f,2,61,"string value is too long. It has been truncated to "+y+" characters.",{value:m},!0))),I||m}function cd(f,m){return Wl(f,m,2048,66)}function Eu(f,m){var y;return m&&m[Et]>32768&&(y=Bo(m,0,32768),Qi(f,2,56,"message is too long, it has been truncated to 32768 characters.",{message:m},!0)),y||m}function ld(f,m){var y;if(m){var I=""+m;I[Et]>32768&&(y=Bo(I,0,32768),Qi(f,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:m},!0))}return y||m}function Ra(f,m){if(m){var y={};Bt(m,function(I,F){if(vn(F)&&Ps())try{F=Zi()[lp](F)}catch(V){Qi(f,2,49,"custom property is not valid",{exception:V},!0)}F=pa(f,F,8192),I=da(f,I,y),y[I]=F}),m=y}return m}function va(f,m){if(m){var y={};Bt(m,function(I,F){I=da(f,I,y),y[I]=F}),m=y}return m}function Zp(f,m){return m&&Wl(f,m,128,69)[fi]()}function Wl(f,m,y,I){var F;return m&&(m=ni(rr(m)),m[Et]>y&&(F=Bo(m,0,y),Qi(f,2,I,"input is too long, it has been truncated to "+y+" characters.",{data:m},!0))),F||m}function Jl(f){var m="00"+f;return qi(m,m[Et]-3)}var Tu=Ca()||{},qv=0,Bv=[null,null,null,null,null];function Zl(f){var m=qv,y=Bv,I=y[m];return Tu.createElement?y[m]||(I=y[m]=Tu.createElement("a")):I={host:zv(f,!0)},I.href=f,m++,m>=y[Et]&&(m=0),qv=m,I}function Xp(f){var m,y=Zl(f);return y&&(m=y.href),m}function Xl(f){var m,y=Zl(f);return y&&(m=y[Wp]),m}function Qp(f,m){return f?f.toUpperCase()+" "+m:m}function zv(f,m){var y=Ql(f,m)||"";if(y){var I=y.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(I!=null&&I[Et]>3&&Ve(I[2])&&I[2][Et]>0)return I[2]+(I[3]||"")}return y}function Ql(f,m){var y=null;if(f){var I=f.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(I!=null&&I[Et]>2&&Ve(I[2])&&I[2][Et]>0&&(y=I[2]||"",m&&I[Et]>2)){var F=(I[1]||"")[ss](),V=I[3]||"";(F==="http"&&V===":80"||F==="https"&&V===":443")&&(V=""),y+=V}}return y}var Gv=[sp+id,"https://breeze.aimon.applicationinsights.io"+id,"https://dc-int.services.visualstudio.com"+id],wu="cid-v1:";function Qc(f){return $u(Gv,f[ss]())!==-1}function fp(f){wu=f}function ds(){return wu}function fd(f,m,y){if(!m||f&&f.disableCorrelationHeaders)return!1;if(f&&f[Cm]){for(var I=0;I<f.correlationHeaderExcludePatterns[Et];I++)if(f[Cm][I].test(m))return!1}var F=Zl(m).host[ss]();if(F&&(Va(F,":443")!==-1||Va(F,":80")!==-1)&&(F=(Ql(m,!0)||"")[ss]()),(!f||!f.enableCorsCorrelation)&&F&&F!==y)return!1;var V=f&&f.correlationHeaderDomains;if(V){var W;if(On(V,function(me){var et=new RegExp(me.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));W=W||et.test(F)}),!W)return!1}var ee=f&&f.correlationHeaderExcludedDomains;if(!ee||ee[Et]===0)return!0;for(var I=0;I<ee[Et];I++){var Q=new RegExp(ee[I].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(Q.test(F))return!1}return F&&F[Et]>0}function ef(f){if(f){var m=Ro(f,up[1]);if(m&&m!==wu)return m}}function Ro(f,m){if(f)for(var y=f[js](","),I=0;I<y[Et];++I){var F=y[I][js]("=");if(F[Et]===2&&F[0]===m)return F[1]}}function el(f,m,y,I){var F,V=I,W=I;if(m&&m[Et]>0){var ee=Zl(m);if(F=ee.host,!V)if(ee[Wp]!=null){var Q=ee.pathname[Et]===0?"/":ee[Wp];Q.charAt(0)!=="/"&&(Q="/"+Q),W=ee[Wp],V=pa(f,y?y+" "+Q:Q)}else V=pa(f,m)}else F=I,V=I;return{target:F,name:V,data:W}}function Vv(){var f=hr();if(f&&f.now&&f.timing){var m=f.now()+f.timing.navigationStart;if(m>0)return m}return tn()}function tl(f,m){var y=null;return f!==0&&m!==0&&!tt(f)&&!tt(m)&&(y=m-f),y}function xm(f,m){var y=f||{};return{getName:function(){return y[cs]},setName:function(I){m&&m.setName(I),y[cs]=I},getTraceId:function(){return y.traceID},setTraceId:function(I){m&&m.setTraceId(I),Bc(I)&&(y.traceID=I)},getSpanId:function(){return y.parentID},setSpanId:function(I){m&&m.setSpanId(I),ap(I)&&(y.parentID=I)},getTraceFlags:function(){return y.traceFlags},setTraceFlags:function(I){m&&m.setTraceFlags(I),y.traceFlags=I}}}var tf=Il({LocalStorage:0,SessionStorage:1}),Hv=Il({AI:0,AI_AND_W3C:1,W3C:2}),ev=Il({Normal:1,Critical:2}),Iu=void 0,Nu=void 0,rl="";function ps(){return pi()?Gs(tf.LocalStorage):null}function Gs(f){try{if(tt(Is()))return null;var m=new Date()[fi](),y=Jr(f===tf.LocalStorage?"localStorage":"sessionStorage"),I=rl+m;y.setItem(I,m);var F=y.getItem(I)!==m;if(y[Hc](I),!F)return y}catch{}return null}function rf(){return nl()?Gs(tf.SessionStorage):null}function dd(){Iu=!1,Nu=!1}function pd(f){rl=f||""}function nf(){Iu=pi(!0),Nu=nl(!0)}function pi(f){return(f||Iu===void 0)&&(Iu=!!Gs(tf.LocalStorage)),Iu}function af(f,m){var y=ps();if(y!==null)try{return y.getItem(m)}catch(I){Iu=!1,Qi(f,2,1,"Browser failed read of local storage. "+To(I),{exception:bt(I)})}return null}function Kv(f,m,y){var I=ps();if(I!==null)try{return I.setItem(m,y),!0}catch(F){Iu=!1,Qi(f,2,3,"Browser failed write to local storage. "+To(F),{exception:bt(F)})}return!1}function Pm(f,m){var y=ps();if(y!==null)try{return y[Hc](m),!0}catch(I){Iu=!1,Qi(f,2,5,"Browser failed removal of local storage item. "+To(I),{exception:bt(I)})}return!1}function nl(f){return(f||Nu===void 0)&&(Nu=!!Gs(tf.SessionStorage)),Nu}function Am(){var f=[];return nl()&&Bt(Jr("sessionStorage"),function(m){f[Bl](m)}),f}function ko(f,m){var y=rf();if(y!==null)try{return y.getItem(m)}catch(I){Nu=!1,Qi(f,2,2,"Browser failed read of session storage. "+To(I),{exception:bt(I)})}return null}function Du(f,m,y){var I=rf();if(I!==null)try{return I.setItem(m,y),!0}catch(F){Nu=!1,Qi(f,2,4,"Browser failed write to session storage. "+To(F),{exception:bt(F)})}return!1}function al(f,m){var y=rf();if(y!==null)try{return y[Hc](m),!0}catch(I){Nu=!1,Qi(f,2,6,"Browser failed removal of session storage item. "+To(I),{exception:bt(I)})}return!1}var Wv="appInsightsThrottle",dp=function(){function f(m,y){var I=this,F,V,W,ee,Q,me,et,Tt=!1,Jt=!1;ct(),I._getDbgPlgTargets=function(){return[et]},I.getConfig=function(){return W},I.canThrottle=function(xe){var vt=mf(xe),Yt=ir(xe);return Er(Yt,F,vt)},I.isTriggered=function(xe){return bd(xe)},I.isReady=function(){return Tt},I.flush=function(xe){try{var vt=hf(xe);if(vt&&vt[Et]>0){var Yt=vt.slice(0);return et[xe]=[],On(Yt,function(rn){at(rn.msgID,rn[Oi],rn.severity,!1)}),!0}}catch{}return!1},I.flushAll=function(){try{if(et){var xe=!0;return Bt(et,function(vt){var Yt=I.flush(parseInt(vt));xe=xe&&Yt}),xe}}catch{}return!1},I.onReadyState=function(xe,vt){return vt===void 0&&(vt=!0),Tt=tt(xe)?!0:xe,Tt&&vt?I.flushAll():null},I.sendMessage=function(xe,vt,Yt){return at(xe,vt,Yt,!0)};function at(xe,vt,Yt,rn){if(Tt){var Ea=vf(xe);if(!Ea)return;var Ta=ir(xe),Zn=mf(xe),vi=Er(Ta,F,Zn),_s=!1,fl=0,tm=bd(xe);try{vi&&!tm?(fl=Math.min(Ta.limit.maxSendNumber,Zn[Kc]+1),Zn[Kc]=0,_s=!0,Q[xe]=!0,Zn[sd]=new Date):(Q[xe]=vi,Zn[Kc]+=1);var Au=Pt(xe);ll(V,Au,Zn);for(var Ed=0;Ed<fl;Ed++)Sd(xe,V,vt,Yt)}catch{}return{isThrottled:_s,throttleNum:fl}}else if(rn){var Mm=hf(xe);Mm[Bl]({msgID:xe,message:vt,severity:Yt})}return null}function ct(){V=jv(m),Q={},ee={},et={},W={},Mt(109),me=Di(y)?y:"",m.addUnloadHook(Za(m.config,function(xe){var vt=xe.cfg;F=pi();var Yt=vt.throttleMgrCfg||{};Bt(Yt,function(rn,Ea){Mt(parseInt(rn),Ea)})}))}function ir(xe){return W[xe]||W[109]}function Mt(xe,vt){var Yt,rn;try{var Ea=vt||{},Ta={};Ta[Ys]=!!Ea[Ys];var Zn=Ea[zl]||{};Jt=(Zn==null?void 0:Zn.daysOfMonth)&&(Zn==null?void 0:Zn.daysOfMonth[Et])>0,Ta[zl]=yr(Zn);var vi={samplingRate:((Yt=Ea.limit)===null||Yt===void 0?void 0:Yt.samplingRate)||100,maxSendNumber:((rn=Ea.limit)===null||rn===void 0?void 0:rn.maxSendNumber)||1};Ta.limit=vi,W[xe]=Ta}catch{}}function yr(xe){xe=xe||{};var vt=xe==null?void 0:xe.monthInterval,Yt=xe==null?void 0:xe.dayInterval;return tt(vt)&&tt(Yt)&&(xe.monthInterval=3,Jt||(xe[Wc]=[28],Jt=!0)),xe={monthInterval:xe==null?void 0:xe.monthInterval,dayInterval:xe==null?void 0:xe.dayInterval,daysOfMonth:xe==null?void 0:xe.daysOfMonth},xe}function Er(xe,vt,Yt){if(xe&&!xe[Ys]&&vt&&Di(Yt)){var rn=Ks(),Ea=Yt[Gl],Ta=xe[zl],Zn=1;if(Ta!=null&&Ta.monthInterval){var vi=(rn.getUTCFullYear()-Ea.getUTCFullYear())*12+rn.getUTCMonth()-Ea.getUTCMonth();Zn=pf(Ta.monthInterval,0,vi)}var _s=1;if(Jt)_s=$u(Ta[Wc],rn[cp]());else if(Ta!=null&&Ta.dayInterval){var fl=Math.floor((rn.getTime()-Ea.getTime())/864e5);_s=pf(Ta.dayInterval,0,fl)}return Zn>=0&&_s>=0}return!1}function Pt(xe,vt){var Yt=Di(vt)?vt:"";return xe?Wv+Yt+"-"+xe:null}function Tn(xe){try{if(xe){var vt=new Date;return xe.getUTCFullYear()===vt.getUTCFullYear()&&xe.getUTCMonth()===vt.getUTCMonth()&&xe[cp]()===vt[cp]()}}catch{}return!1}function hc(xe,vt,Yt){try{var rn={date:Ks(),count:0};if(xe){var Ea=JSON.parse(xe),Ta={date:Ks(Ea[Gl])||rn[Gl],count:Ea[Kc]||rn[Kc],preTriggerDate:Ea.preTriggerDate?Ks(Ea[sd]):void 0};return Ta}else return ll(vt,Yt,rn),rn}catch{}return null}function Ks(xe){try{if(xe){var vt=new Date(xe);if(!isNaN(vt.getDate()))return vt}else return new Date}catch{}return null}function ll(xe,vt,Yt){try{return Kv(xe,vt,ni(JSON[lp](Yt)))}catch{}return!1}function pf(xe,vt,Yt){return xe<=0?1:Yt>=vt&&(Yt-vt)%xe==0?Math.floor((Yt-vt)/xe)+1:-1}function Sd(xe,vt,Yt,rn){Qi(vt,rn||1,xe,Yt)}function vf(xe){try{var vt=ir(xe);return As(1e6)<=vt.limit.samplingRate}catch{}return!1}function mf(xe){try{var vt=ee[xe];if(!vt){var Yt=Pt(xe,me);vt=hc(af(V,Yt),V,Yt),ee[xe]=vt}return ee[xe]}catch{}return null}function bd(xe){var vt=Q[xe];if(tt(vt)){vt=!1;var Yt=mf(xe);Yt&&(vt=Tn(Yt[sd])),Q[xe]=vt}return Q[xe]}function hf(xe){return et=et||{},tt(et[xe])&&(et[xe]=[]),et[xe]}}return f}(),Jv=";",tv="=";function vd(f){if(!f)return{};var m=f[js](Jv),y=wr(m,function(F,V){var W=V[js](tv);if(W[Et]===2){var ee=W[0][ss](),Q=W[1];F[ee]=Q}return F},{});if(Vn(y)[Et]>0){if(y.endpointsuffix){var I=y.location?y.location+".":"";y[us]=y[us]||"https://"+I+"dc."+y.endpointsuffix}y[us]=y[us]||sp,Ko(y[us],"/")&&(y[us]=y[us].slice(0,-1))}return y}var il={parse:vd},to=function(){function f(m,y,I){var F=this,V=this;V.ver=1,V.sampleRate=100,V.tags={},V[cs]=pa(m,I)||fa,V.data=y,V.time=cr(new Date),V.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return F.sampleRate===100?4:1},tags:1,data:1}}return f}(),md=function(){function f(m,y,I,F){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var V=this;V.ver=2,V[cs]=pa(m,y)||fa,V[Mi]=Ra(m,I),V[qs]=va(m,F)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.Event",f.dataType="EventData",f}(),ol="<no_method>",ka="error",ro="stack",of="stackDetails",Zv="errorSrc",Xv="message",ma="description";function sl(f,m){var y=f;return y&&!Ve(y)&&(JSON&&JSON[lp]?(y=JSON[lp](f),m&&(!y||y==="{}")&&(Ir(f[fi])?y=f[fi]():y=""+f)):y=""+f+" - (Missing JSON.stringify)"),y||""}function sf(f,m){var y=f;return f&&(y&&!Ve(y)&&(y=f[Xv]||f[ma]||y),y&&!Ve(y)&&(y=sl(y,!0)),f.filename&&(y=y+" @"+(f.filename||"")+":"+(f.lineno||"?")+":"+(f.colno||"?"))),m&&m!=="String"&&m!=="Object"&&m!=="Error"&&Va(y||"",m)===-1&&(y=m+": "+y),y||""}function Rm(f){try{if(vn(f))return"hasFullStack"in f&&"typeName"in f}catch{}return!1}function Qv(f){try{if(vn(f))return"ver"in f&&"exceptions"in f&&"properties"in f}catch{}return!1}function uf(f){return f&&f.src&&Ve(f.src)&&f.obj&&Gt(f.obj)}function Oa(f){var m=f||"";Ve(m)||(Ve(m[ro])?m=m[ro]:m=""+m);var y=m[js](`
`);return{src:m,obj:y}}function pp(f){for(var m=[],y=f[js](`
`),I=0;I<y[Et];I++){var F=y[I];y[I+1]&&(F+="@"+y[I+1],I++),m[Bl](F)}return{src:f,obj:m}}function pc(f){var m=null;if(f)try{if(f[ro])m=Oa(f[ro]);else if(f[ka]&&f[ka][ro])m=Oa(f[ka][ro]);else if(f.exception&&f.exception[ro])m=Oa(f.exception[ro]);else if(uf(f))m=f;else if(uf(f[of]))m=f[of];else if(Uf()&&Uf().opera&&f[Xv])m=pp(f[Oi]);else if(f.reason&&f.reason[ro])m=Oa(f.reason[ro]);else if(Ve(f))m=Oa(f);else{var y=f[Xv]||f[ma]||"";Ve(f[Zv])&&(y&&(y+=`
`),y+=" from "+f[Zv]),y&&(m=Oa(y))}}catch(I){m=Oa(I)}return m||{src:"",obj:null}}function ul(f){var m="";return f&&(f.obj?On(f.obj,function(y){m+=y+`
`}):m=f.src||""),m}function Vs(f){var m,y=f.obj;if(y&&y[Et]>0){m=[];var I=0,F=0;On(y,function(ct){var ir=ct[fi]();if(Oo.regex.test(ir)){var Mt=new Oo(ir,I++);F+=Mt[bu],m[Bl](Mt)}});var V=32*1024;if(F>V)for(var W=0,ee=m[Et]-1,Q=0,me=W,et=ee;W<ee;){var Tt=m[W][bu],Jt=m[ee][bu];if(Q+=Tt+Jt,Q>V){var at=et-me+1;m.splice(me,at);break}me=W,et=ee,W++,ee--}}return m}function cf(f){var m="";if(f&&(m=f.typeName||f[cs]||"",!m))try{var y=/function (.{1,200})\(/,I=y.exec(f.constructor[fi]());m=I&&I[Et]>1?I[1]:""}catch{}return m}function vp(f){if(f)try{if(!Ve(f)){var m=cf(f),y=sl(f,!1);return(!y||y==="{}")&&(f[ka]&&(f=f[ka],m=cf(f)),y=sl(f,!0)),Va(y,m)!==0&&m!=="String"?m+":"+y:y}}catch{}return""+(f||"")}var St=function(){function f(m,y,I,F,V,W){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var ee=this;ee.ver=2,Qv(y)?(ee[$s]=y[$s]||[],ee[Mi]=y[Mi],ee[qs]=y[qs],y[Jc]&&(ee[Jc]=y[Jc]),y.id&&(ee.id=y.id,y[Mi].id=y.id),y[$v]&&(ee[$v]=y[$v]),tt(y[dc])||(ee[dc]=y[dc])):(I||(I={}),W&&(I.id=W),ee[$s]=[new Cu(m,y,I)],ee[Mi]=Ra(m,I),ee[qs]=va(m,F),V&&(ee[Jc]=V),W&&(ee.id=W))}return f.CreateAutoException=function(m,y,I,F,V,W,ee,Q){var me,et=cf(V||W||m);return me={},me[Oi]=sf(m,et),me.url=y,me.lineNumber=I,me.columnNumber=F,me.error=vp(V||W||m),me.evt=vp(W||m),me[di]=et,me.stackDetails=pc(ee||V||W),me.errorSrc=Q,me},f.CreateFromInterface=function(m,y,I,F){var V=y[$s]&&ri(y[$s],function(ee){return Cu[Jp](m,ee)}),W=new f(m,Ac(Ac({},y),{exceptions:V}),I,F);return W},f.prototype.toInterface=function(){var m,y=this,I=y.exceptions,F=y.properties,V=y.measurements,W=y.severityLevel,ee=y.problemGroup,Q=y.id,me=y.isManual,et=I instanceof Array&&ri(I,function(Tt){return Tt.toInterface()})||void 0;return m={ver:"4.0"},m[$s]=et,m.severityLevel=W,m.properties=F,m.measurements=V,m.problemGroup=ee,m.id=Q,m.isManual=me,m},f.CreateSimpleException=function(m,y,I,F,V,W){var ee;return{exceptions:[(ee={},ee[Hl]=!0,ee.message=m,ee.stack=V,ee.typeName=y,ee)]}},f.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",f.dataType="ExceptionData",f.formatError=vp,f}(),Cu=function(){function f(m,y,I){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var F=this;if(Rm(y))F[di]=y[di],F[Oi]=y[Oi],F[ro]=y[ro],F[fs]=y[fs]||[],F[Hl]=y[Hl];else{var V=y,W=V&&V.evt;qt(V)||(V=V[ka]||W||V),F[di]=pa(m,cf(V))||fa,F[Oi]=Eu(m,sf(y||V,F[di]))||fa;var ee=y[of]||pc(y);F[fs]=Vs(ee),Gt(F[fs])&&ri(F[fs],function(Q){Q[Vl]=pa(m,Q[Vl]),Q[Zc]=pa(m,Q[Zc])}),F[ro]=ld(m,ul(ee)),F.hasFullStack=Gt(F.parsedStack)&&F.parsedStack[Et]>0,I&&(I[di]=I[di]||F[di])}}return f.prototype.toInterface=function(){var m,y=this,I=y[fs]instanceof Array&&ri(y[fs],function(V){return V.toInterface()}),F=(m={id:y.id,outerId:y.outerId,typeName:y[di],message:y[Oi],hasFullStack:y[Hl],stack:y[ro]},m[fs]=I||void 0,m);return F},f.CreateFromInterface=function(m,y){var I=y[fs]instanceof Array&&ri(y[fs],function(V){return Oo[Jp](V)})||y[fs],F=new f(m,Ac(Ac({},y),{parsedStack:I}));return F},f}(),Oo=function(){function f(m,y){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var I=this;if(I[bu]=0,typeof m=="string"){var F=m;I[Bs]=y,I[Li]=ol,I[Vl]=ni(F),I[Zc]="",I[Xc]=0;var V=F.match(f.regex);V&&V[Et]>=5&&(I[Li]=ni(V[2])||I[Li],I[Zc]=ni(V[4]),I[Xc]=parseInt(V[5])||0)}else I[Bs]=m[Bs],I[Li]=m[Li],I[Vl]=m[Vl],I[Zc]=m[Zc],I[Xc]=m[Xc],I[bu]=0;I.sizeInBytes+=I.method[Et],I.sizeInBytes+=I.fileName[Et],I.sizeInBytes+=I.assembly[Et],I[bu]+=f.baseSize,I.sizeInBytes+=I.level.toString()[Et],I.sizeInBytes+=I.line.toString()[Et]}return f.CreateFromInterface=function(m){return new f(m,null)},f.prototype.toInterface=function(){var m=this;return{level:m[Bs],method:m[Li],assembly:m[Vl],fileName:m[Zc],line:m[Xc]}},f.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,f.baseSize=58,f}(),lf=function(){function f(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return f}(),km=function(){function f(m,y,I,F,V,W,ee,Q,me){this.aiDataContract={ver:1,metrics:1,properties:0};var et=this;et.ver=2;var Tt=new lf;Tt[Kc]=F>0?F:void 0,Tt.max=isNaN(W)||W===null?void 0:W,Tt.min=isNaN(V)||V===null?void 0:V,Tt[cs]=pa(m,y)||fa,Tt.value=I,Tt.stdDev=isNaN(ee)||ee===null?void 0:ee,et.metrics=[Tt],et[Mi]=Ra(m,Q),et[qs]=va(m,me)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",f.dataType="MetricData",f}(),ff="";function hd(f,m){return m===void 0&&(m=!1),f==null?m:f.toString()[ss]()==="true"}function Mo(f){(isNaN(f)||f<0)&&(f=0),f=Math.round(f);var m=ff+f%1e3,y=ff+Math.floor(f/1e3)%60,I=ff+Math.floor(f/(1e3*60))%60,F=ff+Math.floor(f/(1e3*60*60))%24,V=Math.floor(f/(1e3*60*60*24));return m=m[Et]===1?"00"+m:m[Et]===2?"0"+m:m,y=y[Et]<2?"0"+y:y,I=I[Et]<2?"0"+I:I,F=F[Et]<2?"0"+F:F,(V>0?V+".":ff)+F+":"+I+":"+y+"."+m}function em(f,m){var y=null;return On(f,function(I){if(I.identifier===m)return y=I,-1}),y}function mp(f,m,y,I,F){return!F&&Ve(f)&&(f==="Script error."||f==="Script error")}var hp=function(){function f(m,y,I,F,V,W,ee){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var Q=this;Q.ver=2,Q.id=Zp(m,ee),Q.url=cd(m,I),Q[cs]=pa(m,y)||fa,isNaN(F)||(Q[Kl]=Mo(F)),Q[Mi]=Ra(m,V),Q[qs]=va(m,W)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",f.dataType="PageviewData",f}(),df=function(){function f(m,y,I,F,V,W,ee,Q,me,et,Tt,Jt){me===void 0&&(me="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var at=this;at.ver=2,at.id=y,at[Kl]=Mo(V),at.success=W,at.resultCode=ee+"",at.type=pa(m,me);var ct=el(m,I,Q,F);at.data=cd(m,F)||ct.data,at.target=pa(m,ct.target),et&&(at.target="".concat(at.target," | ").concat(et)),at[cs]=pa(m,ct[cs]),at[Mi]=Ra(m,Tt),at[qs]=va(m,Jt)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",f.dataType="RemoteDependencyData",f}(),vc=function(){function f(m,y,I,F,V){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var W=this;W.ver=2,y=y||fa,W[Oi]=Eu(m,y),W[Mi]=Ra(m,F),W[qs]=va(m,V),I&&(W[Jc]=I)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.Message",f.dataType="MessageData",f}(),rv=function(){function f(m,y,I,F,V,W,ee){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var Q=this;Q.ver=2,Q.url=cd(m,I),Q[cs]=pa(m,y)||fa,Q[Mi]=Ra(m,V),Q[qs]=va(m,W),ee&&(Q.domProcessing=ee.domProcessing,Q[Kl]=ee[Kl],Q.networkConnect=ee.networkConnect,Q.perfTotal=ee.perfTotal,Q[ud]=ee[ud],Q.sentRequest=ee.sentRequest)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",f.dataType="PageviewPerformanceData",f}(),$r=function(){function f(m,y){this.aiDataContract={baseType:1,baseData:1},this.baseType=m,this.baseData=y}return f}(),Hs=Il({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),nv=function(){function f(){}return f.getConfig=function(m,y,I,F){F===void 0&&(F=!1);var V;return I&&m[ls]&&m[ls][I]&&!tt(m[ls][I][y])?V=m[ls][I][y]:V=m[y],tt(V)?F:V},f}();function xu(f){var m="ai."+f+".";return function(y){return m+y}}var no=xu("application"),Ln=xu("device"),_d=xu("location"),mc=xu("operation"),cl=xu("session"),vs=xu("user"),ao=xu("cloud"),Lo=xu("internal"),gd=function(f){Mv(m,f);function m(){return f.call(this)||this}return m}(Qo({applicationVersion:no("ver"),applicationBuild:no("build"),applicationTypeId:no("typeId"),applicationId:no("applicationId"),applicationLayer:no("layer"),deviceId:Ln("id"),deviceIp:Ln("ip"),deviceLanguage:Ln("language"),deviceLocale:Ln("locale"),deviceModel:Ln("model"),deviceFriendlyName:Ln("friendlyName"),deviceNetwork:Ln("network"),deviceNetworkName:Ln("networkName"),deviceOEMName:Ln("oemName"),deviceOS:Ln("os"),deviceOSVersion:Ln("osVersion"),deviceRoleInstance:Ln("roleInstance"),deviceRoleName:Ln("roleName"),deviceScreenResolution:Ln("screenResolution"),deviceType:Ln("type"),deviceMachineName:Ln("machineName"),deviceVMName:Ln("vmName"),deviceBrowser:Ln("browser"),deviceBrowserVersion:Ln("browserVersion"),locationIp:_d("ip"),locationCountry:_d("country"),locationProvince:_d("province"),locationCity:_d("city"),operationId:mc("id"),operationName:mc("name"),operationParentId:mc("parentId"),operationRootId:mc("rootId"),operationSyntheticSource:mc("syntheticSource"),operationCorrelationVector:mc("correlationVector"),sessionId:cl("id"),sessionIsFirst:cl("isFirst"),sessionIsNew:cl("isNew"),userAccountAcquisitionDate:vs("accountAcquisitionDate"),userAccountId:vs("accountId"),userAgent:vs("userAgent"),userId:vs("id"),userStoreRegion:vs("storeRegion"),userAuthUserId:vs("authUserId"),userAnonymousUserAcquisitionDate:vs("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:vs("authUserAcquisitionDate"),cloudName:ao("name"),cloudRole:ao("role"),cloudRoleVer:ao("roleVer"),cloudRoleInstance:ao("roleInstance"),cloudEnvironment:ao("environment"),cloudLocation:ao("location"),cloudDeploymentUnit:ao("deploymentUnit"),internalNodeName:Lo("nodeName"),internalSdkVersion:Lo("sdkVersion"),internalAgentVersion:Lo("agentVersion"),internalSnippet:Lo("snippet"),internalSdkSrc:Lo("sdkSrc")}));function _p(f,m,y,I,F,V){var W;y=pa(I,y)||fa,(tt(f)||tt(m)||tt(y))&&qr("Input doesn't contain all required fields");var ee="";f[od]&&(ee=f[od],delete f[od]);var Q=(W={},W[cs]=y,W.time=cr(new Date),W.iKey=ee,W.ext=V||{},W.tags=[],W.data={},W.baseType=m,W.baseData=f,W);return tt(F)||Bt(F,function(me,et){Q.data[me]=et}),Q}var av=function(){function f(){}return f.create=_p,f}(),ms={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},iv=new gd;function yd(f){var m=null;if(Ir(Event))m=new Event(f);else{var y=Ca();y&&y.createEvent&&(m=y.createEvent("Event"),m.initEvent(f,!0,!0))}return m}function ov(f,m){op(f,null,null,m)}function hs(f){var m=Ca(),y=on(),I=!1,F=[],V=1;y&&!tt(y.onLine)&&!y.onLine&&(V=2);var W=0,ee=Jt(),Q=ql(ci("OfflineListener"),f);try{if(et(Uf())&&(I=!0),m){var me=m.body||m;me.ononline&&et(me)&&(I=!0)}}catch{I=!1}function et(Pt){var Tn=!1;return Pt&&(Tn=Gc(Pt,"online",ir,Q),Tn&&Gc(Pt,"offline",Mt,Q)),Tn}function Tt(){return ee}function Jt(){return!(W===2||V===2)}function at(){var Pt=Jt();ee!==Pt&&(ee=Pt,On(F,function(Tn){var hc={isOnline:ee,rState:V,uState:W};try{Tn(hc)}catch{}}))}function ct(Pt){W=Pt,at()}function ir(){V=1,at()}function Mt(){V=2,at()}function yr(){var Pt=Uf();if(Pt&&I){if(ov(Pt,Q),m){var Tn=m.body||m;Vr(Tn.ononline)||ov(Tn,Q)}I=!1}}function Er(Pt){return F[Bl](Pt),{rm:function(){var Tn=F.indexOf(Pt);if(Tn>-1)return F.splice(Tn,1)}}}return{isOnline:Tt,isListening:function(){return I},unload:yr,addListener:Er,setOnlineState:ct}}var Om="AppInsightsPropertiesPlugin",Pu="AppInsightsChannelPlugin",sv="ApplicationInsightsAnalytics";e.AnalyticsPluginIdentifier=sv,e.BreezeChannelIdentifier=Pu,e.ConfigurationManager=nv,e.ConnectionStringParser=il,e.ContextTagKeys=gd,e.CtxTagKeys=iv,e.DEFAULT_BREEZE_ENDPOINT=sp,e.DEFAULT_BREEZE_PATH=id,e.Data=$r,e.DisabledPropertyName=zn,e.DistributedTracingModes=Hv,e.Envelope=to,e.Event=md,e.EventPersistence=ev,e.Exception=St,e.Extensions=ms,e.HttpMethod=Su,e.Metric=km,e.PageView=hp,e.PageViewPerformance=rv,e.ProcessLegacy=la,e.PropertiesPluginIdentifier=Om,e.RemoteDependencyData=df,e.RequestHeaders=up,e.SampleRate=Vc,e.SeverityLevel=Hs,e.TelemetryItemCreator=av,e.ThrottleMgr=dp,e.Trace=vc,e.correlationIdCanIncludeCorrelationHeader=fd,e.correlationIdGetCorrelationContext=ef,e.correlationIdGetCorrelationContextValue=Ro,e.correlationIdGetPrefix=ds,e.correlationIdSetPrefix=fp,e.createDistributedTraceContextFromTrace=xm,e.createDomEvent=yd,e.createOfflineListener=hs,e.createTelemetryItem=_p,e.createTraceParent=Yv,e.dataSanitizeException=ld,e.dataSanitizeId=Zp,e.dataSanitizeInput=Wl,e.dataSanitizeKey=zs,e.dataSanitizeKeyAndAddUniqueness=da,e.dataSanitizeMeasurements=va,e.dataSanitizeMessage=Eu,e.dataSanitizeProperties=Ra,e.dataSanitizeString=pa,e.dataSanitizeUrl=cd,e.dateTimeUtilsDuration=tl,e.dateTimeUtilsNow=Vv,e.dsPadNumber=Jl,e.findAllScripts=ip,e.findW3cTraceParent=ca,e.formatTraceParent=uc,e.getExtensionByName=em,e.isBeaconApiSupported=Io,e.isCrossOriginError=mp,e.isInternalApplicationInsightsEndpoint=Qc,e.isSampledFlag=Ur,e.isValidSpanId=ap,e.isValidTraceId=Bc,e.isValidTraceParent=Ls,e.msToTimeSpan=Mo,e.parseConnectionString=vd,e.parseTraceParent=np,e.strNotSpecified=fa,e.stringToBoolOrDefault=hd,e.urlGetAbsoluteUrl=Xp,e.urlGetCompleteUrl=Qp,e.urlGetPathName=Xl,e.urlParseFullHost=Ql,e.urlParseHost=zv,e.urlParseUrl=Zl,e.utlCanUseLocalStorage=pi,e.utlCanUseSessionStorage=nl,e.utlDisableStorage=dd,e.utlEnableStorage=nf,e.utlGetLocalStorage=af,e.utlGetSessionStorage=ko,e.utlGetSessionStorageKeys=Am,e.utlRemoveSessionStorage=al,e.utlRemoveStorage=Pm,e.utlSetLocalStorage=Kv,e.utlSetSessionStorage=Du,e.utlSetStoragePrefix=pd})});var qy=Rd(xg=>{"use strict";Object.defineProperty(xg,"__esModule",{value:!0});xg.TelemetryUtil=void 0;var $y=class e{static applyReplacements(t,r){for(let n of Object.keys(t))for(let s of r)s.lookup.test(n)&&(s.replacementString!==void 0?t[n]=s.replacementString:delete t[n])}static shouldUseOneDataSystemSDK(t){return t.length===74&&t[32]==="-"&&t[41]==="-"&&t[46]==="-"&&t[51]==="-"&&t[56]==="-"&&t[69]==="-"}static getAdditionalCommonProperties(t){return{"common.os":t.platform,"common.nodeArch":t.architecture,"common.platformversion":(t.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.8"}}static getInstance(){return e._instance||(e._instance=new e),e._instance}};xg.TelemetryUtil=$y});var xS=Rd((Pg,CS)=>{(function(e,t){typeof Pg=="object"&&typeof CS<"u"?t(Pg):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{})))})(Pg,function(e){"use strict";function t(i,o){return i||o}function r(i,o){return i[o]}var n=void 0,s=null,c="",h="function",b="object",N="prototype",k="__proto__",$="undefined",ne="constructor",le="Symbol",we="_polyfill",ge="length",ve="name",ce="call",Pe="toString",Ke=t(Object),ut=r(Ke,N),Fe=t(String),ft=r(Fe,N),Ot=t(Math),tr=t(Array),ur=r(tr,N),gr=r(ur,"slice");function xr(i,o){try{return{v:i.apply(this,o)}}catch(l){return{e:l}}}function pn(i,o){var l=xr(i);return l.e?o:l.v}var vo;function Yi(i){return function(o){return typeof o===i}}function Vr(i){var o="[object "+i+"]";return function(l){return!!(l&&Sn(l)===o)}}function Sn(i){return ut[Pe].call(i)}function tt(i){return typeof i===$||i===$}function Ts(i){return!vn(i)}function Ve(i){return i===s||tt(i)}function Ir(i){return i===s||!vn(i)}function vn(i){return!!i||i!==n}function Gt(i){return!vo&&(vo=["string","number","boolean",$,"symbol","bigint"]),i!==b&&vo.indexOf(i)!==-1}var qt=Yi("string"),Qe=Yi(h);function xn(i){return!i&&Ve(i)?!1:!!i&&typeof i===b}var rt=r(tr,"isArray"),Dc=Vr("Date"),Bt=Yi("number"),mo=Yi("boolean"),zt=Vr("Error");function It(i){return!!(i&&i.then&&Qe(i.then))}function en(i){return!(!i||pn(function(){return!(i&&0+i)},!i))}var jt=r(Ke,"getOwnPropertyDescriptor");function nt(i,o){return!!i&&ut.hasOwnProperty[ce](i,o)}var rr=t(r(Ke,"hasOwn"),ti);function ti(i,o){return nt(i,o)||!!jt(i,o)}function bt(i,o,l){if(i&&xn(i)){for(var v in i)if(rr(i,v)&&o[ce](l||i,v,i[v])===-1)break}}var qr={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function ho(i){var o={};if(o[qr.c]=!0,o[qr.e]=!0,i.l){o.get=function(){return i.l.v};var l=jt(i.l,"v");l&&l.set&&(o.set=function(v){i.l.v=v})}return bt(i,function(v,S){o[qr[v]]=Ts(S)?o[qr[v]]:S}),o}var qa=r(Ke,"defineProperty");function Hr(i,o,l){return qa(i,o,ho(l))}function Pn(i,o,l,v,S){var w={};return bt(i,function(P,L){$i(w,P,o?L:P,S),$i(w,L,l?L:P,S)}),v?v(w):w}function $i(i,o,l,v){qa(i,o,{value:l,enumerable:!0,writable:!!v})}var Vn=t(Fe),Yr="[object Error]";function Wt(i,o){var l=c,v=ut[Pe][ce](i);v===Yr&&(i={stack:Vn(i.stack),message:Vn(i.message),name:Vn(i.name)});try{l=JSON.stringify(i,s,o?typeof o=="number"?o:4:n),l=(l?l.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):s)||Vn(i)}catch(S){l=" - "+Wt(S,o)}return v+": "+l}function fr(i){throw new Error(i)}function Br(i){throw new TypeError(i)}var ou=r(Ke,"freeze");function Hn(i){return i}function Ff(i){return i[k]||s}var Uu=r(Ke,"assign"),Wr=r(Ke,"keys");function _o(i){return ou&&bt(i,function(o,l){(rt(l)||xn(l))&&_o(l)}),Vt(i)}var Vt=t(ou,Hn),bn=t(r(Ke,"getPrototypeOf"),Ff);function Ba(i){return Pn(i,1,0,Vt)}function Bo(i){return Pn(i,0,0,Vt)}function qi(i){var o={};return bt(i,function(l,v){$i(o,l,v[1]),$i(o,v[0],v[1])}),Vt(o)}function Ld(i){return qi(i)}var ju=Bo({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),qn="__tsUtils$gblCfg",Si;function Bi(){var i;return typeof globalThis!==$&&(i=globalThis),!i&&typeof self!==$&&(i=self),!i&&typeof window!==$&&(i=window),!i&&typeof global!==$&&(i=global),i}function Yu(){if(!Si){var i=xr(Bi).v||{};Si=i[qn]=i[qn]||{}}return Si}var ws=ia;function ia(i,o,l){var v=o?o[i]:s;return function(S){var w=(S?S[i]:s)||v;if(w||l){var P=arguments;return(w||l).apply(S,w?gr[ce](P,1):P)}Br('"'+Vn(i)+'" not defined for '+Wt(S))}}function Nr(i){return function(o){return o[i]}}var En=r(Ot,"max"),bi=ws("slice",ft),Bn=ws("substring",ft),go=ia("substr",ft,Is);function Is(i,o,l){return Ve(i)&&Br("Invalid "+Wt(i)),l<0?c:(o=o||0,o<0&&(o=En(o+i[ge],0)),tt(l)?bi(i,o):bi(i,o,o+l))}function Jr(i,o){return Bn(i,0,o)}var Ca="_urid",Fd;function Uf(){if(!Fd){var i=Yu();Fd=i.gblSym=i.gblSym||{k:{},s:{}}}return Fd}var Ud;function on(i){var o={description:Vn(i),toString:function(){return le+"("+i+")"}};return o[we]=!0,o}function yo(i){var o=Uf();if(!rr(o.k,i)){var l=on(i),v=Wr(o.s).length;l[Ca]=function(){return v+"_"+l[Pe]()},o.k[i]=l,o.s[l[Ca]()]=Vn(i)}return o.k[i]}function zo(i){!Ud&&(Ud={});var o,l=ju[i];return l&&(o=Ud[l]=Ud[l]||on(le+"."+l)),o}var kn;function Go(){kn=Yu()}function su(i){var o={};return!kn&&Go(),o.b=kn.lzy,qa(o,"v",{configurable:!0,get:function(){var l=i();return kn.lzy||qa(o,"v",{value:l}),o.b=kn.lzy,l}}),o}function za(i){return qa({toJSON:function(){return i}},"v",{value:i})}var sn="window",On;function $u(i,o){var l;return function(){return!kn&&Go(),(!l||kn.lzy)&&(l=za(xr(i,o).v)),l.v}}function ri(i){return!kn&&Go(),(!On||i===!1||kn.lzy)&&(On=za(xr(Bi).v||s)),On.v}function wr(i,o){var l;if(!On||o===!1?l=ri(o):l=On.v,l&&l[i])return l[i];if(i===sn)try{return window}catch{}return s}function oa(){return!!jf()}var jf=$u(wr,["document"]);function ya(){return!!Vo()}var Vo=$u(wr,[sn]);function Cc(){return!!Ho()}var Ho=$u(wr,["navigator"]),Yf=$u(function(){return!!xr(function(){return process&&(process.versions||{}).node}).v}),tn,El;function Ga(){return tn=za(xr(wr,[le]).v),tn}function jd(i){var o=(kn.lzy?0:tn)||Ga();return o.v?o.v[i]:n}function ni(){return!!Up()}function Up(){return!kn&&Go(),((kn.lzy?0:tn)||Ga()).v}function ai(i,o){var l=ju[i];!kn&&Go();var v=(kn.lzy?0:tn)||Ga();return v.v?v.v[l||i]:o?n:zo(i)}function Tl(i,o){!kn&&Go();var l=(kn.lzy?0:tn)||Ga();return l.v?l.v(i):o?s:on(i)}function zi(i){return!kn&&Go(),El=(kn.lzy?0:El)||za(xr(jd,["for"]).v),(El.v||yo)(i)}function $f(i){return!!i&&Qe(i.next)}function hr(i){return!Ir(i)&&Qe(i[ai(3)])}var Ko;function qf(i,o,l){if(i&&($f(i)||(!Ko&&(Ko=za(ai(3))),i=i[Ko.v]?i[Ko.v]():s),$f(i))){var v=n,S=n;try{for(var w=0;!(S=i.next()).done&&o[ce](l||i,S.value,w,i)!==-1;)w++}catch(P){v={e:P},i.throw&&(S=s,i.throw(v))}finally{try{S&&!S.done&&i.return&&i.return(S)}finally{if(v)throw v.e}}}}function Va(i,o,l){return i.apply(o,l)}function xc(i,o){return!tt(o)&&i&&(rt(o)?Va(i.push,i,o):$f(o)||hr(o)?qf(o,function(l){i.push(l)}):i.push(o)),i}function xt(i,o,l){if(i)for(var v=i[ge]>>>0,S=0;S<v&&!(S in i&&o[ce](l||i,i[S],S,i)===-1);S++);}var ii=ws("indexOf",ur),qu=ws("map",ur);function wl(i,o,l){return((i?i.slice:s)||gr).apply(i,gr[ce](arguments,1))}var kv=ws("reduce",ur),Ei=t(r(Ke,"create"),Il);function Il(i){if(!i)return{};var o=typeof i;o!==b&&o!==h&&Br("Prototype must be an Object or function: "+Wt(i));function l(){}return l[N]=i,new l}var Yd;function uu(i,o){var l=Ke.setPrototypeOf||function(v,S){var w;!Yd&&(Yd=za((w={},w[k]=[],w instanceof Array))),Yd.v?v[k]=S:bt(S,function(P,L){return v[P]=L})};return l(i,o)}function Ti(i,o,l){xr(Hr,[o,ve,{v:i,c:!0,e:!1}]),o=uu(o,l);function v(){this[ne]=o,xr(Hr,[this,ve,{v:i,c:!0,e:!1}])}return o[N]=l===s?Ei(l):(v[N]=l[N],new v),o}function dt(i,o){o&&(i[ve]=o)}function sa(i,o,l){var v=l||Error,S=v[N][ve],w=Error.captureStackTrace;return Ti(i,function(){var P=this,L=arguments;try{xr(dt,[v,i]);var j=Va(v,P,gr[ce](L))||P;if(j!==P){var B=bn(P);B!==bn(j)&&uu(j,B)}return w&&w(j,P[ne]),o&&o(j,L),j}finally{xr(dt,[v,S])}},v)}function cu(){return(Date.now||Ns)()}function Ns(){return new Date().getTime()}function $d(i){return function(l){return Ve(l)&&Br("strTrim called ["+Wt(l)+"]"),l&&l.replace&&(l=l.replace(i,c)),l}}var qd=$d(/^\s+|(?=\s)\s+$/g),Kn=ia("trim",ft,qd),oi,Bd,wi;function Ha(i){if(!i||typeof i!==b)return!1;wi||(wi=ya()?Vo():!0);var o=!1;if(i!==wi){Bd||(oi=Function[N][Pe],Bd=oi[ce](Ke));try{var l=bn(i);o=!l,o||(nt(l,ne)&&(l=l[ne]),o=!!(l&&typeof l===h&&oi[ce](l)===Bd))}catch{}}return o}function Im(i){return i.value&&Gi(i),!0}var Ov=[xa,Gi,Dl,Nl];function jp(i,o,l,v){var S;return xt(i,function(w){if(w.k===o)return S=w,-1}),S||(S={k:o,v:o},i.push(S),v(S)),S.v}function lu(i,o,l,v){var S=l.handler,w=l.path?v?l.path.concat(v):l.path:[],P={handler:l.handler,src:l.src,path:w},L=typeof o,j=!1,B=o===s;B||(o&&L===b?j=Ha(o):B=Gt(L));var Z={type:L,isPrim:B,isPlain:j,value:o,result:o,path:w,origin:l.src,copy:function(oe,se){return lu(i,oe,se?P:l,se)},copyTo:function(oe,se){return Yp(i,oe,se,P)}};return Z.isPrim?S&&S[ce](l,Z)?Z.result:o:jp(i,o,w,function(oe){Hr(Z,"result",{g:function(){return oe.v},s:function(ie){oe.v=ie}});for(var se=0,ue=S;!(ue||(se<Ov.length?Ov[se++]:Im))[ce](l,Z);)ue=s})}function Yp(i,o,l,v){if(!Ve(l))for(var S in l)o[S]=lu(i,l[S],v,S);return o}function uh(i,o,l){var v={handler:l,src:o,path:[]};return Yp([],i,o,v)}function zd(i,o){var l={handler:o,src:i};return lu([],i,l)}function xa(i){var o=i.value;if(rt(o)){var l=i.result=[];return l.length=o.length,i.copyTo(l,o),!0}return!1}function Nl(i){var o=i.value;return Dc(o)?(i.result=new Date(o.getTime()),!0):!1}function Dl(i){return i.type===h}function Gi(i){var o=i.value;if(o&&i.isPlain){var l=i.result={};return i.copyTo(l,o),!0}return!1}function si(i,o){return xt(o,function(l){uh(i,l)}),i}function fu(i,o,l,v,S,w,P){return si(zd(i)||{},gr[ce](arguments))}var $p=Nr(ge),Ii=ia("endsWith",ft,Gd);function Gd(i,o,l){qt(i)||Br("'"+Wt(i)+"' is not a string");var v=qt(o)?o:Vn(o),S=!tt(l)&&l<i[ge]?l:i[ge];return Bn(i,S-v[ge],S)===v}var Bu=ws("indexOf",ft),Pc="ref",Cl="unref",Bf="hasRef",Vd="enabled";function qp(i,o,l){var v=!0,S=i?o(s):s,w;function P(){return v=!1,S&&S[Cl]&&S[Cl](),w}function L(){S&&l(S),S=s}function j(){return S=o(S),v||P(),w}function B(Z){!Z&&S&&L(),Z&&!S&&j()}return w={cancel:L,refresh:j},w[Bf]=function(){return S&&S[Bf]?S[Bf]():v},w[Pc]=function(){return v=!0,S&&S[Pc]&&S[Pc](),w},w[Cl]=P,w=qa(w,Vd,{get:function(){return!!S},set:B}),{h:w,dn:function(){S=s}}}function Bp(i,o,l){var v=rt(o),S=v?o.length:0,w=(S>0?o[0]:v?n:o)||setTimeout,P=(S>1?o[1]:n)||clearTimeout,L=l[0];l[0]=function(){j.dn(),Va(L,n,gr[ce](arguments))};var j=qp(i,function(B){if(B){if(B.refresh)return B.refresh(),B;Va(P,n,[B])}return Va(w,n,l)},function(B){Va(P,n,[B])});return j.h}function du(i,o){return Bp(!0,n,gr[ce](arguments))}function Hd(i,o){return Bp(!1,n,gr[ce](arguments))}var Ds,zu="constructor",Ni="prototype",xl="function",zf="_dynInstFuncs",Ac="_isDynProxy",Vi="_dynClass",Mv="_dynCls$",Wo="_dynInstChk",So=Wo,Hi="_dfOpts",pu="_unknown_",Gf="__proto__",Rc="_dyn"+Gf,kc="__dynProto$Gbl",Gu="_dynInstProto",Vf="useBaseInst",Pl="setInstFuncs",Hf=Object,Vu=Hf.getPrototypeOf,Ki=Hf.getOwnPropertyNames,Oc=ri(),bo=Oc[kc]||(Oc[kc]={o:(Ds={},Ds[Pl]=!0,Ds[Vf]=!0,Ds),n:1e3});function ui(i){return i&&(i===Hf[Ni]||i===Array[Ni])}function Jo(i){return ui(i)||i===Function[Ni]}function zr(i){var o;if(i){if(Vu)return Vu(i);var l=i[Gf]||i[Ni]||(i[zu]?i[zu][Ni]:null);o=i[Rc]||l,nt(i,Rc)||(delete i[Gu],o=i[Rc]=i[Gu]||i[Rc],i[Gu]=l)}return o}function Cs(i,o){var l=[];if(Ki)l=Ki(i);else for(var v in i)typeof v=="string"&&nt(i,v)&&l.push(v);if(l&&l.length>0)for(var S=0;S<l.length;S++)o(l[S])}function Wi(i,o,l){return o!==zu&&typeof i[o]===xl&&(l||nt(i,o))&&o!==Gf&&o!==Ni}function Mc(i){Br("DynamicProto: "+i)}function Lc(i){var o=Ei(null);return Cs(i,function(l){!o[l]&&Wi(i,l,!1)&&(o[l]=i[l])}),o}function Zo(i,o){for(var l=i.length-1;l>=0;l--)if(i[l]===o)return!0;return!1}function Al(i,o,l,v){function S(j,B,Z){var oe=B[Z];if(oe[Ac]&&v){var se=j[zf]||{};se[So]!==!1&&(oe=(se[B[Vi]]||{})[Z]||oe)}return function(){return oe.apply(j,arguments)}}var w=Ei(null);Cs(l,function(j){w[j]=S(o,l,j)});for(var P=zr(i),L=[];P&&!Jo(P)&&!Zo(L,P);)Cs(P,function(j){!w[j]&&Wi(P,j,!Vu)&&(w[j]=S(o,P,j))}),L.push(P),P=zr(P);return w}function Xo(i,o,l,v){var S=null;if(i&&nt(l,Vi)){var w=i[zf]||Ei(null);if(S=(w[l[Vi]]||Ei(null))[o],S||Mc("Missing ["+o+"] "+xl),!S[Wo]&&w[So]!==!1){for(var P=!nt(i,o),L=zr(i),j=[];P&&L&&!Jo(L)&&!Zo(j,L);){var B=L[o];if(B){P=B===v;break}j.push(L),L=zr(L)}try{P&&(i[o]=S),S[Wo]=1}catch{w[So]=!1}}}return S}function vu(i,o,l){var v=o[i];return v===l&&(v=zr(o)[i]),typeof v!==xl&&Mc("["+i+"] is not a "+xl),v}function Ka(i,o,l,v,S){function w(j,B){var Z=function(){var oe=Xo(this,B,j,Z)||vu(B,j,Z);return oe.apply(this,arguments)};return Z[Ac]=1,Z}if(!ui(i)){var P=l[zf]=l[zf]||Ei(null);if(!ui(P)){var L=P[o]=P[o]||Ei(null);P[So]!==!1&&(P[So]=!!S),ui(L)||Cs(l,function(j){Wi(l,j,!1)&&l[j]!==v[j]&&(L[j]=l[j],delete l[j],(!nt(i,j)||i[j]&&!i[j][Ac])&&(i[j]=w(i,j)))})}}}function Kd(i,o){if(Vu){for(var l=[],v=zr(o);v&&!Jo(v)&&!Zo(l,v);){if(v===i)return!0;l.push(v),v=zr(v)}return!1}return!0}function Hu(i,o){return nt(i,Ni)?i.name||o||pu:((i||{})[zu]||{}).name||o||pu}function Pa(i,o,l,v){nt(i,Ni)||Mc("theClass is an invalid class definition.");var S=i[Ni];Kd(S,o)||Mc("["+Hu(i)+"] not in hierarchy of ["+Hu(o)+"]");var w=null;nt(S,Vi)?w=S[Vi]:(w=Mv+Hu(i,"_")+"$"+bo.n,bo.n++,S[Vi]=w);var P=Pa[Hi],L=!!P[Vf];L&&v&&v[Vf]!==void 0&&(L=!!v[Vf]);var j=Lc(o),B=Al(S,o,j,L);l(o,B);var Z=!!Vu&&!!P[Pl];Z&&v&&(Z=!!v[Pl]),Ka(S,w,o,j,Z!==!1)}Pa[Hi]=bo.o;var Kf="function",Wd="object",Rl="undefined",kl="prototype",Jd=Object,Lv=Jd[kl];(ri()||{}).Symbol,(ri()||{}).Reflect;var Ku="hasOwnProperty",Eo=function(i){for(var o,l=1,v=arguments.length;l<v;l++){o=arguments[l];for(var S in o)Lv[Ku].call(o,S)&&(i[S]=o[S])}return i},Ji=Uu||Eo,mn=function(i,o){return mn=Jd.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var S in v)v[Ku](S)&&(l[S]=v[S])},mn(i,o)};function Ol(i,o){typeof o!==Kf&&o!==null&&Br("Class extends value "+String(o)+" is not a constructor or null"),mn(i,o);function l(){this.constructor=i}i[kl]=o===null?Ei(o):(l[kl]=o[kl],new l)}function Wu(i,o){for(var l=0,v=o.length,S=i.length;l<v;l++,S++)i[S]=o[l];return i}var Ju=Ba,Zd=Ld,Di=Ju({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),mu="toLowerCase",xs="blkVal",cr="length",To="rdOnly",Qo="notify",Ci="warnToConsole",Wf="throwInternal",xi="setDf",hu="watch",un="logger",Wa="apply",Or="push",pt="splice",Zu="hdlr",wo="cancel",Ps="initialize",Zi="identifier",_u="removeNotificationListener",Pi="addNotificationListener",Fr="isInitialized",Io="instrumentationKey",Mr="INACTIVE",No="value",Jf="getNotifyMgr",Do="getPlugin",An="name",Xi="iKey",es="time",Sa="processNext",Aa="getProcessTelContext",Fc="pollInternalLogs",Xu="enabled",Zf="stopPollingInternalLogs",As="unload",Co="onComplete",xo="version",Qu="loggingLevelConsole",Po="createNew",Mn="teardown",Xf="messageId",ec="message",Rs="isAsync",ci="diagLog",ts="_doTeardown",ks="update",Ai="getNext",Uc="setNextPlugin",gu="protocol",ua="userAgent",yu="split",Os="nodeType",Ri="replace",tc="logInternalMessage",cn="type",Wn="handler",ki="status",rc="getResponseHeader",rs="getAllResponseHeaders",Xd="isChildEvt",li="data",jc="getCtx",ba="setCtx",Qf="complete",Ja="itemsReceived",ns="urlString",as="sendPOST",Qd="headers",Ml="timeout",ed="setRequestHeader",Ll="traceId",Ao="spanId",Za="traceFlags",Yc;function Fv(i,o){Yc||(Yc=sa("AggregationError",function(v,S){S[cr]>1&&(v.errors=S[1])}));var l=i||"One or more errors occurred.";throw xt(o,function(v,S){l+=`
`.concat(S," > ").concat(Wt(v))}),new Yc(l,o||[])}var nc="Promise",ac="rejected";function is(i,o){return Fl(i,function(l){return o?o({status:"fulfilled",rejected:!1,value:l}):l},function(l){return o?o({status:ac,rejected:!0,reason:l}):l})}function Fl(i,o,l,v){var S=i;try{if(It(i))(o||l)&&(S=i.then(o,l));else try{o&&(S=o(i))}catch(w){if(l)S=l(w);else throw w}}finally{v&&Nm(S,v)}return S}function Nm(i,o){var l=i;return o&&(It(i)?i.finally?l=i.finally(o):l=i.then(function(v){return o(),v},function(v){throw o(),v}):o()),l}var ep=["pending","resolving","resolved",ac],Ul="dispatchEvent",ic;function zp(i){var o;return i&&i.createEvent&&(o=i.createEvent("Event")),!!o&&o.initEvent}function Uv(i,o,l,v){var S=jf();!ic&&(ic=za(!!xr(zp,[S]).v));var w=ic.v?S.createEvent("Event"):v?new Event(o):{};if(l&&l(w),ic.v&&w.initEvent(o,!1,!0),w&&i[Ul])i[Ul](w);else{var P=i["on"+o];if(P)P(w);else{var L=wr("console");L&&(L.error||L.log)(o,Wt(w))}}}var oc="unhandledRejection",jv=oc.toLowerCase(),jl=10,tp;function Qi(i){return Qe(i)?i.toString():Wt(i)}function Gp(i,o,l){var v=wl(arguments,3),S=0,w=!1,P,L=[],j=!1,B=null,Z;function oe(Ge,st){try{j=!0,B&&B.cancel(),B=null;var br=i(function(Xr,Qr){L.push(function(){try{var gn=S===2?Ge:st,Qt=tt(gn)?P:Qe(gn)?gn(P):gn;It(Qt)?Qt.then(Xr,Qr):gn?Xr(Qt):S===3?Qr(Qt):Xr(Qt)}catch(Ft){Qr(Ft)}}),w&&Ce()},v);return br}finally{}}function se(Ge){return oe(void 0,Ge)}function ue(Ge){var st=Ge,br=Ge;return Qe(Ge)&&(st=function(Xr){return Ge&&Ge(),Xr},br=function(Xr){throw Ge&&Ge(),Xr}),oe(st,br)}function ie(){return ep[S]}function Ce(){if(L.length>0){var Ge=L.slice();L=[],j=!0,B&&B.cancel(),B=null,o(Ge)}}function de(Ge,st){return function(br){if(S===st){if(Ge===2&&It(br)){S=1,br.then(de(2,1),de(3,1));return}S=Ge,w=!0,P=br,Ce(),!j&&Ge===3&&!B&&(B=du(Re,jl))}}}function Re(){if(!j)if(j=!0,Yf())process.emit(oc,P,Z);else{var Ge=Vo()||ri();!tp&&(tp=za(xr(wr,[nc+"RejectionEvent"]).v)),Uv(Ge,jv,function(st){return Hr(st,"promise",{g:function(){return Z}}),st.reason=P,st},!!tp.v)}}Z={then:oe,catch:se,finally:ue},qa(Z,"state",{get:ie}),ni()&&(Z[ai(11)]="IPromise");function ke(){return"IPromise "+ie()+(w?" - "+Qi(P):"")}return Z.toString=ke,function(){Qe(l)||Br(nc+": executor is not a function - "+Qi(l));var st=de(3,0);try{l.call(Z,de(2,0),st)}catch(br){st(br)}}(),Z}function Dm(i){return function(o){var l=wl(arguments,1);return i(function(v,S){try{var w=[],P=1;qf(o,function(L,j){L&&(P++,Fl(L,function(B){w[j]=B,--P===0&&v(w)},S))}),P--,P===0&&v(w)}catch(L){S(L)}},l)}}function td(i){return za(function(o){var l=wl(arguments,1);return i(function(v,S){var w=[],P=1;function L(j,B){P++,is(j,function(Z){Z.rejected?w[B]={status:ac,reason:Z.reason}:w[B]={status:"fulfilled",value:Z.value},--P===0&&v(w)})}try{rt(o)?xt(o,L):hr(o)?qf(o,L):Br("Input is not an iterable"),P--,P===0&&v(w)}catch(j){S(j)}},l)})}function Vp(i){xt(i,function(o){try{o()}catch{}})}function rp(i){var o=Bt(i)?i:0;return function(l){du(function(){Vp(l)},o)}}function $c(i,o){return Gp($c,rp(o),i,o)}var rd;function sc(i,o){!rd&&(rd=za(xr(wr,[nc]).v||null));var l=rd.v;if(!l)return $c(i);Qe(i)||Br(nc+": executor is not a function - "+Wt(i));var v=0;function S(){return ep[v]}var w=new l(function(P,L){function j(Z){v=2,P(Z)}function B(Z){v=3,L(Z)}i(j,B)});return qa(w,"state",{get:S}),w}var Ms;function qc(i){return Gp(qc,Vp,i)}function Yv(i,o){return!Ms&&(Ms=td(qc)),Ms.v(i,o)}var np;function Bc(i,o){return!np&&(np=za(sc)),np.v.call(this,i,o)}var ap=Dm(Bc),Ls=void 0,Ur="",uc="channels",ca="core",ip="createPerfMgr",nd="disabled",zc="extensionConfig",cc="extensions",Xa="processTelemetry",ad="priority",Jn="eventsSent",vr="eventsDiscarded",Fs="eventsSendRequest",_n="perfEvent",os="offlineEventsStored",lc="offlineBatchSent",fc="offlineBatchDrop",Us="getPerfMgr",eo="domain",Yl="path",Hp="Not dynamic - ",$l=/-([a-z])/g,Kp=/([^\w\d_$])/g,ql=/^(\d+[\w\d_$])/;function Gc(i){return!Ve(i)}function op(i){var o=i;return o&&qt(o)&&(o=o[Ri]($l,function(l,v){return v.toUpperCase()}),o=o[Ri](Kp,"_"),o=o[Ri](ql,function(l,v){return"_"+v})),o}function zn(i,o){return i&&o?Bu(i,o)!==-1:!1}function Vc(i){return i&&i.toISOString()||""}function la(i){return zt(i)?i[An]:Ur}function Su(i,o,l,v,S){var w=l;return i&&(w=i[o],w!==l&&(!S||S(w))&&(!v||v(l))&&(w=l,i[o]=w)),w}function sp(i,o,l){var v;return i?(v=i[o],!v&&Ve(v)&&(v=tt(l)?{}:l,i[o]=v)):v=tt(l)?{}:l,v}function id(i,o){var l=null,v=null;return Qe(i)?l=i:v=i,function(){var S=arguments;if(l&&(v=l()),v)return v[o][Wa](v,S)}}function fa(i,o,l,v,S){i&&o&&l&&(S!==!1||tt(i[o]))&&(i[o]=id(l,v))}function od(i,o,l,v){return i&&o&&xn(i)&&rt(l)&&xt(l,function(S){qt(S)&&fa(i,S,o,S,v)}),i}function up(i){return function(){function o(){var l=this;i&&bt(i,function(v,S){l[v]=S})}return o}()}function js(i){return i&&Uu&&(i=Jd(Uu({},i))),i}function Et(i,o,l,v,S,w){var P=arguments,L=P[0]||{},j=P[cr],B=!1,Z=1;for(j>0&&mo(L)&&(B=L,L=P[Z]||{},Z++),xn(L)||(L={});Z<j;Z++){var oe=P[Z],se=rt(oe),ue=xn(oe);for(var ie in oe){var Ce=se&&ie in oe||ue&&rr(oe,ie);if(Ce){var de=oe[ie],Re=void 0;if(B&&de&&((Re=rt(de))||Ha(de))){var ke=L[ie];Re?rt(ke)||(ke=[]):Ha(ke)||(ke={}),de=Et(B,ke,de)}de!==void 0&&(L[ie]=de)}}}return L}function ss(i){try{return i.responseText}catch{}return null}function us(i,o){return i?"XDomainRequest,Response:"+ss(i)||"":o}function fi(i,o){return i?"XMLHttpRequest,Status:"+i[ki]+",Response:"+ss(i)||i.response||"":o}function Bl(i,o){return o&&(Bt(o)?i=[o].concat(i):rt(o)&&(i=o.concat(i))),i}var Hc="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",cs="withCredentials",Oi="timeout";function Kc(i,o,l,v,S,w){v===void 0&&(v=!1),S===void 0&&(S=!1);function P(j,B,Z){try{j[B]=Z}catch{}}var L=new XMLHttpRequest;return v&&P(L,Hc,v),l&&P(L,cs,l),L.open(i,o,!S),l&&P(L,cs,l),!S&&w&&P(L,Oi,w),L}function sd(i){var o={};if(qt(i)){var l=Kn(i)[yu](/[\r\n]+/);xt(l,function(v){if(v){var S=v.indexOf(": ");if(S!==-1){var w=Kn(v.substring(0,S))[mu](),P=Kn(v.substring(S+1));o[w]=P}else o[Kn(v)]=1}})}return o}function Ys(i,o,l){if(!i[l]&&o&&o[rc]){var v=o[rc](l);v&&(i[l]=Kn(v))}return i}var zl="kill-duration",Wc="kill-duration-seconds",Gl="time-delta-millis";function cp(i,o){var l={};return i[rs]?l=sd(i[rs]()):o&&(l=Ys(l,i,Gl),l=Ys(l,i,zl),l=Ys(l,i,Wc)),l}var lp="documentMode",Wp="location",Cm="console",ls="JSON",$s="crypto",fs="msCrypto",Mi="msie",qs="trident/",bu="XMLHttpRequest",di=null,Jc=null,$v=!1,dc=null,Jp=null;function Vl(i,o){var l=!1;if(i){try{if(l=o in i,!l){var v=i[kl];v&&(l=o in v)}}catch{}if(!l)try{var S=new i;l=!tt(S[o])}catch{}}return l}function Zc(i){if(i&&$v){var o=wr("__mockLocation");if(o)return o}return typeof location===Wd&&location?location:wr(Wp)}function Hl(){return typeof console!==Rl?console:wr(Cm)}function Bs(){return!!(typeof JSON===Wd&&JSON||wr(ls)!==null)}function Li(){return Bs()?JSON||wr(ls):null}function Xc(){return wr($s)}function Kl(){return wr(fs)}function ud(){var i=Ho();if(i&&(i[ua]!==Jc||di===null)){Jc=i[ua];var o=(Jc||Ur)[mu]();di=zn(o,Mi)||zn(o,qs)}return di}function da(i){if(i===void 0&&(i=null),!i){var o=Ho()||{};i=o?(o.userAgent||Ur)[mu]():Ur}var l=(i||Ur)[mu]();if(zn(l,Mi)){var v=jf()||{};return Math.max(parseInt(l[yu](Mi)[1]),v[lp]||0)}else if(zn(l,qs)){var S=parseInt(l[yu](qs)[1]);if(S)return S+4}return null}function zs(i){return(Jp===null||i===!1)&&(Jp=Cc()&&!!Ho().sendBeacon),Jp}function pa(i){var o=!1;try{o=!!wr("fetch");var l=wr("Request");o&&i&&l&&(o=Vl(l,"keepalive"))}catch{}return o}function cd(){return dc===null&&(dc=typeof XDomainRequest!==Rl,dc&&Eu()&&(dc=dc&&!Vl(wr(bu),"withCredentials"))),dc}function Eu(){var i=!1;try{var o=wr(bu);i=!!o}catch{}return i}var ld=4294967296,Ra=4294967295,va=123456789,Zp=987654321,Wl=!1,Jl=va,Tu=Zp;function qv(i){i<0&&(i>>>=0),Jl=va+i&Ra,Tu=Zp-i&Ra,Wl=!0}function Bv(){try{var i=cu()&2147483647;qv((Math.random()*ld^i)+i)}catch{}}function Zl(i){var o=0,l=Xc()||Kl();return l&&l.getRandomValues&&(o=l.getRandomValues(new Uint32Array(1))[0]&Ra),o===0&&ud()&&(Wl||Bv(),o=Xp()&Ra),o===0&&(o=Math.floor(ld*Math.random()|0)),i||(o>>>=0),o}function Xp(i){Tu=36969*(Tu&65535)+(Tu>>16)&Ra,Jl=18e3*(Jl&65535)+(Jl>>16)&Ra;var o=(Tu<<16)+(Jl&65535)>>>0&Ra|0;return i||(o>>>=0),o}function Xl(i){i===void 0&&(i=22);for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=Zl()>>>0,v=0,S=Ur;S[cr]<i;)v++,S+=o.charAt(l&63),l>>>=6,v===5&&(l=(Zl()<<2&4294967295|l&3)>>>0,v=0);return S}var Qp="3.3.4",zv="."+Xl(6),Ql=0;function Gv(i){return i[Os]===1||i[Os]===9||!+i[Os]}function wu(i,o){var l=o[i.id];if(!l){l={};try{Gv(o)&&Hr(o,i.id,{e:!1,v:l})}catch{}}return l}function Qc(i,o){return o===void 0&&(o=!1),op(i+Ql+++(o?"."+Qp:Ur)+zv)}function fp(i){var o={id:Qc("_aiData-"+(i||Ur)+"."+Qp),accept:function(l){return Gv(l)},get:function(l,v,S,w){var P=l[o.id];return P?P[op(v)]:(w&&(P=wu(o,l),P[op(v)]=S),S)},kill:function(l,v){if(l&&l[v])try{delete l[v]}catch{}}};return o}function ds(i){return i&&xn(i)&&(i.isVal||i.fb||rr(i,"v")||rr(i,"mrg")||rr(i,"ref")||i.set)}function fd(i,o,l){var v,S=l.dfVal||vn;if(o&&l.fb){var w=l.fb;rt(w)||(w=[w]);for(var P=0;P<w[cr];P++){var L=w[P],j=o[L];if(S(j)?v=j:i&&(j=i.cfg[L],S(j)&&(v=j),i.set(i.cfg,Vn(L),j)),S(v))break}}return!S(v)&&S(l.v)&&(v=l.v),v}function ef(i,o,l){var v=l;if(l&&ds(l)&&(v=fd(i,o,l)),v){ds(v)&&(v=ef(i,o,v));var S;rt(v)?(S=[],S[cr]=v[cr]):Ha(v)&&(S={}),S&&(bt(v,function(w,P){P&&ds(P)&&(P=ef(i,o,P)),S[w]=P}),v=S)}return v}function Ro(i,o,l,v){var S,w,P,L=v,j,B,Z,oe;ds(L)?(S=L.isVal,w=L.set,Z=L[To],oe=L[xs],j=L.mrg,B=L.ref,!B&&tt(B)&&(B=!!j),P=fd(i,o,L)):P=v,oe&&i[xs](o,l);var se,ue=!0,ie=o[l];(ie||!Ve(ie))&&(se=ie,ue=!1,S&&se!==P&&!S(se)&&(se=P,ue=!0),w&&(se=w(se,P,o),ue=se===P)),ue?P?se=ef(i,o,P):se=P:(Ha(se)||rt(P))&&j&&P&&(Ha(P)||rt(P))&&bt(P,function(Ce,de){Ro(i,se,Ce,de)}),i.set(o,l,se),B&&i.ref(o,l),Z&&i[To](o,l)}var el=zi("[[ai_dynCfg_1]]"),Vv=zi("[[ai_blkDynCfg_1]]"),tl=zi("[[ai_frcDynCfg_1]]");function xm(i){if(i){var o;if(rt(i)?(o=[],o[cr]=i[cr]):Ha(i)&&(o={}),o)return bt(i,function(l,v){o[l]=xm(v)}),o}return i}function tf(i){if(i){var o=i[el]||i;if(o.cfg&&(o.cfg===i||o.cfg[el]===o))return o}return null}function Hv(i){if(i&&(Ha(i)||rt(i)))try{i[Vv]=!0}catch{}return i}function ev(i,o,l){var v=!1;return l&&!i[o.blkVal]&&(v=l[tl],!v&&!l[Vv]&&(v=Ha(l)||rt(l))),v}function Iu(i){Br("InvalidAccess:"+i)}var Nu=["push","pop","shift","unshift","splice"],rl=function(i,o,l,v){i&&i[Wf](3,108,"".concat(l," [").concat(o,"] failed - ")+Wt(v))};function ps(i,o,l){rt(o)&&xt(Nu,function(v){var S=o[v];o[v]=function(){for(var w=[],P=0;P<arguments.length;P++)w[P]=arguments[P];var L=S[Wa](this,w);return nf(i,o,l,"Patching"),L}})}function Gs(i,o){var l=jt(i,o);return l&&l.get}function rf(i,o,l,v){var S={n:l,h:[],trk:function(B){B&&B.fn&&(ii(S.h,B)===-1&&S.h[Or](B),i.trk(B,S))},clr:function(B){var Z=ii(S.h,B);Z!==-1&&S.h[pt](Z,1)}},w=!0,P=!1;function L(){w&&(P=P||ev(L,i,v),v&&!v[el]&&P&&(v=nf(i,v,l,"Converting")),w=!1);var B=i.act;return B&&S.trk(B),v}L[i.prop]={chng:function(){i.add(S)}};function j(B){if(v!==B){L[i.ro]&&!i.upd&&Iu("["+l+"] is read-only:"+Wt(o)),w&&(P=P||ev(L,i,v),w=!1);var Z=P&&L[i.rf];if(P)if(Z){bt(v,function(se){v[se]=B?B[se]:Ls});try{bt(B,function(se,ue){dd(i,v,se,ue)}),B=v}catch(se){rl((i.hdlr||{})[un],l,"Assigning",se),P=!1}}else v&&v[el]&&bt(v,function(se){var ue=Gs(v,se);if(ue){var ie=ue[i.prop];ie&&ie.chng()}});if(B!==v){var oe=B&&ev(L,i,B);!Z&&oe&&(B=nf(i,B,l,"Converting")),v=B,P=oe}i.add(S)}}Hr(o,S.n,{g:L,s:j})}function dd(i,o,l,v){if(o){var S=Gs(o,l),w=S&&!!S[i.prop];w?o[l]=v:rf(i,o,l,v)}return o}function pd(i,o,l,v){if(o){var S=Gs(o,l),w=S&&!!S[i.prop],P=v&&v[0],L=v&&v[1],j=v&&v[2];if(!w){if(j)try{Hv(o)}catch(B){rl((i.hdlr||{})[un],l,"Blocking",B)}try{dd(i,o,l,o[l]),S=Gs(o,l)}catch(B){rl((i.hdlr||{})[un],l,"State",B)}}P&&(S[i.rf]=P),L&&(S[i.ro]=L),j&&(S[i.blkVal]=!0)}return o}function nf(i,o,l,v){try{bt(o,function(S,w){dd(i,o,S,w)}),o[el]||(qa(o,el,{get:function(){return i[Zu]}}),ps(i,o,l))}catch(S){rl((i.hdlr||{})[un],l,v,S)}return o}var pi="[[ai_",af="]]";function Kv(i){var o,l=Tl(pi+"get"+i.uid+af),v=Tl(pi+"ro"+i.uid+af),S=Tl(pi+"rf"+i.uid+af),w=Tl(pi+"blkVal"+i.uid+af),P=Tl(pi+"dtl"+i.uid+af),L=null,j=null,B;function Z(ie,Ce){var de=B.act;try{B.act=ie,ie&&ie[P]&&(xt(ie[P],function(ke){ke.clr(ie)}),ie[P]=[]),Ce({cfg:i.cfg,set:i.set.bind(i),setDf:i[xi].bind(i),ref:i.ref.bind(i),rdOnly:i[To].bind(i)})}catch(ke){var Re=i[un];throw Re&&Re[Wf](1,107,Wt(ke)),ke}finally{B.act=de||null}}function oe(){if(L){var ie=L;L=null,j&&j[wo](),j=null;var Ce=[];if(xt(ie,function(de){if(de&&(de[P]&&(xt(de[P],function(Re){Re.clr(de)}),de[P]=null),de.fn))try{Z(de,de.fn)}catch(Re){Ce[Or](Re)}}),L)try{oe()}catch(de){Ce[Or](de)}Ce[cr]>0&&Fv("Watcher error(s): ",Ce)}}function se(ie){if(ie&&ie.h[cr]>0){L||(L=[]),j||(j=du(function(){j=null,oe()},0));for(var Ce=0;Ce<ie.h[cr];Ce++){var de=ie.h[Ce];de&&ii(L,de)===-1&&L[Or](de)}}}function ue(ie,Ce){if(ie){var de=ie[P]=ie[P]||[];ii(de,Ce)===-1&&de[Or](Ce)}}return B=(o={prop:l,ro:v,rf:S},o[xs]=w,o[Zu]=i,o.add=se,o[Qo]=oe,o.use=Z,o.trk=ue,o),B}function Pm(i,o){var l={fn:o,rm:function(){l.fn=null,i=null,o=null}};return Hr(l,"toJSON",{v:function(){return"WatcherHandler"+(l.fn?"":"[X]")}}),i.use(l,o),l}function nl(i,o,l){var v,S=tf(o);if(S)return S;var w=Qc("dyncfg",!0),P=o&&l!==!1?o:xm(o),L;function j(){L[Qo]()}function B(Re,ke,Ge){try{Re=dd(L,Re,ke,Ge)}catch(st){rl(i,ke,"Setting value",st)}return Re[ke]}function Z(Re){return Pm(L,Re)}function oe(Re,ke){L.use(null,function(Ge){var st=L.upd;try{tt(ke)||(L.upd=ke),Re(Ge)}finally{L.upd=st}})}function se(Re,ke){var Ge;return pd(L,Re,ke,(Ge={},Ge[0]=!0,Ge))[ke]}function ue(Re,ke){var Ge;return pd(L,Re,ke,(Ge={},Ge[1]=!0,Ge))[ke]}function ie(Re,ke){var Ge;return pd(L,Re,ke,(Ge={},Ge[2]=!0,Ge))[ke]}function Ce(Re,ke){return ke&&bt(ke,function(Ge,st){Ro(de,Re,Ge,st)}),Re}var de=(v={uid:null,cfg:P},v[un]=i,v[Qo]=j,v.set=B,v[xi]=Ce,v[hu]=Z,v.ref=se,v[To]=ue,v[xs]=ie,v._block=oe,v);return Hr(de,"uid",{c:!1,e:!1,w:!1,v:w}),L=Kv(de),nf(L,P,"config","Creating"),de}function Am(i,o){i?(i[Ci](o),i[Wf](2,108,o)):Iu(o)}function ko(i,o,l,v){var S=nl(l,i||{},v);return o&&S[xi](S.cfg,o),S}function Du(i,o,l){var v=i[el]||i;return v.cfg&&(v.cfg===i||v.cfg[el]===v)?v[hu](o):(Am(l,Hp+Wt(i)),ko(i,null,l)[hu](o))}function al(i,o){if(i&&i[As])return i[As](o)}function Wv(i,o,l){var v;return l||(v=Bc(function(S){l=S})),i&&$p(i)>0?is(al(i[0],o),function(){Wv(wl(i,1),o,l)}):l(),v}var dp=500,Jv="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function tv(i,o,l){return!i&&Ve(i)?o:mo(i)?i:Vn(i)[mu]()==="true"}function vd(i){return{mrg:!0,v:i}}function il(i,o,l){return{fb:l,isVal:i,v:o}}function to(i,o){return{fb:o,set:tv,v:!!i}}var md=[Jn,vr,Fs,_n],ol=null,ka;function ro(i,o){return function(){var l=arguments,v=Zv(o);if(v){var S=v.listener;S&&S[i]&&S[i][Wa](S,l)}}}function of(){var i=wr("Microsoft");return i&&(ol=i.ApplicationInsights),ol}function Zv(i){var o=ol;return!o&&i.disableDbgExt!==!0&&(o=ol||of()),o?o.ChromeDbgExt:null}function Xv(i){if(!ka){ka={};for(var o=0;o<md[cr];o++)ka[md[o]]=ro(md[o],i)}return ka}var ma,sl="warnToConsole",sf="AI (Internal): ",Rm="AI: ",Qv="AITR_",uf={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Oa=(ma={},ma[0]=null,ma[1]="errorToConsole",ma[2]=sl,ma[3]="debugToConsole",ma);function pp(i){return i?'"'+i[Ri](/\"/g,Ur)+'"':Ur}function pc(i,o){var l=Hl();if(l){var v="log";l[i]&&(v=i),Qe(l[v])&&l[v](o)}}var ul=function(){function i(o,l,v,S){v===void 0&&(v=!1);var w=this;w[Xf]=o,w[ec]=(v?Rm:sf)+o;var P=Ur;Bs()&&(P=Li().stringify(S));var L=(l?" message:"+pp(l):Ur)+(S?" props:"+pp(P):Ur);w[ec]+=L}return i.dataType="MessageData",i}();function Vs(i,o){return(i||{})[un]||new cf(o)}var cf=function(){function i(o){this.identifier="DiagnosticLogger",this.queue=[];var l=0,v={},S,w,P,L,j;Pa(i,this,function(B){j=oe(o||{}),B.consoleLoggingLevel=function(){return S},B[Wf]=function(ie,Ce,de,Re,ke){ke===void 0&&(ke=!1);var Ge=new ul(Ce,de,ke,Re);if(L)throw Wt(Ge);var st=Oa[ie]||sl;if(tt(Ge[ec]))ue("throw"+(ie===1?"Critical":"Warning"),Ge);else{if(ke){var br=+Ge[Xf];!v[br]&&S>=ie&&(B[st](Ge[ec]),v[br]=!0)}else S>=ie&&B[st](Ge[ec]);Z(ie,Ge)}},B.debugToConsole=function(ie){pc("debug",ie),ue("warning",ie)},B[Ci]=function(ie){pc("warn",ie),ue("warning",ie)},B.errorToConsole=function(ie){pc("error",ie),ue("error",ie)},B.resetInternalMessageCount=function(){l=0,v={}},B[tc]=Z,B[As]=function(ie){j&&j.rm(),j=null};function Z(ie,Ce){if(!se()){var de=!0,Re=Qv+Ce[Xf];if(v[Re]?de=!1:v[Re]=!0,de&&(ie<=w&&(B.queue[Or](Ce),l++,ue(ie===1?"error":"warn",Ce)),l===P)){var ke="Internal events throttle limit per PageView reached for this app.",Ge=new ul(23,ke,!1);B.queue[Or](Ge),ie===1?B.errorToConsole(ke):B[Ci](ke)}}}function oe(ie){return Du(ko(ie,uf,B).cfg,function(Ce){var de=Ce.cfg;S=de[Qu],w=de.loggingLevelTelemetry,P=de.maxMessageLimit,L=de.enableDebug})}function se(){return l>=P}function ue(ie,Ce){var de=Zv(o||{});de&&de[ci]&&de[ci](ie,Ce)}})}return i.__ieDyn=1,i}();function vp(i){return i||new cf}function St(i,o,l,v,S,w){w===void 0&&(w=!1),vp(i)[Wf](o,l,v,S,w)}function Cu(i,o){vp(i)[Ci](o)}var Oo,lf,km="toGMTString",ff="toUTCString",hd="cookie",Mo="expires",em="isCookieUseDisabled",mp="disableCookiesUsage",hp="_ckMgr",df=null,vc=null,rv=null,$r,Hs={},nv={},xu=(Oo={cookieCfg:vd((lf={},lf[eo]={fb:"cookieDomain",dfVal:Gc},lf.path={fb:"cookiePath",dfVal:Gc},lf.enabled=Ls,lf.ignoreCookies=Ls,lf.blockedCookies=Ls,lf)),cookieDomain:Ls,cookiePath:Ls},Oo[mp]=Ls,Oo);function no(){!$r&&($r=su(function(){return jf()}))}function Ln(i){return i?i.isEnabled():!0}function _d(i,o){return o&&i&&rt(i.ignoreCookies)?ii(i.ignoreCookies,o)!==-1:!1}function mc(i,o){return o&&i&&rt(i.blockedCookies)&&ii(i.blockedCookies,o)!==-1?!0:_d(i,o)}function cl(i,o){var l=o[Xu];if(Ve(l)){var v=void 0;tt(i[em])||(v=!i[em]),tt(i[mp])||(v=!i[mp]),l=v}return l}function vs(i,o){var l,v,S,w,P,L,j,B,Z;i=ko(i||nv,null,o).cfg,P=Du(i,function(se){se[xi](se.cfg,xu),v=se.ref(se.cfg,"cookieCfg"),S=v[Yl]||"/",w=v[eo],L=cl(i,v)!==!1,j=v.getCookie||av,B=v.setCookie||ms,Z=v.delCookie||ms},o);var oe=(l={isEnabled:function(){var se=cl(i,v)!==!1&&L&&ao(o),ue=nv[hp];return se&&ue&&oe!==ue&&(se=Ln(ue)),se},setEnabled:function(se){L=se!==!1,v[Xu]=se},set:function(se,ue,ie,Ce,de){var Re=!1;if(Ln(oe)&&!mc(v,se)){var ke={},Ge=Kn(ue||Ur),st=Bu(Ge,";");if(st!==-1&&(Ge=Kn(Jr(ue,st)),ke=Lo(Bn(ue,st+1))),Su(ke,eo,Ce||w,en,tt),!Ve(ie)){var br=ud();if(tt(ke[Mo])){var Xr=cu(),Qr=Xr+ie*1e3;if(Qr>0){var gn=new Date;gn.setTime(Qr),Su(ke,Mo,gd(gn,br?km:ff)||gd(gn,br?km:ff)||Ur,en)}}br||Su(ke,"max-age",Ur+ie,null,tt)}var Qt=Zc();Qt&&Qt[gu]==="https:"&&(Su(ke,"secure",null,null,tt),vc===null&&(vc=!iv((Ho()||{})[ua])),vc&&Su(ke,"SameSite","None",null,tt)),Su(ke,Yl,de||S,null,tt),B(se,_p(Ge,ke)),Re=!0}return Re},get:function(se){var ue=Ur;return Ln(oe)&&!_d(v,se)&&(ue=j(se)),ue},del:function(se,ue){var ie=!1;return Ln(oe)&&(ie=oe.purge(se,ue)),ie},purge:function(se,ue){var ie,Ce=!1;if(ao(o)){var de=(ie={},ie[Yl]=ue||"/",ie[Mo]="Thu, 01 Jan 1970 00:00:01 GMT",ie);ud()||(de["max-age"]="0"),Z(se,_p(Ur,de)),Ce=!0}return Ce}},l[As]=function(se){P&&P.rm(),P=null},l);return oe[hp]=oe,oe}function ao(i){if(df===null){df=!1,!$r&&no();try{var o=$r.v||{};df=o[hd]!==void 0}catch(l){St(i,2,68,"Cannot access document.cookie - "+la(l),{exception:Wt(l)})}}return df}function Lo(i){var o={};if(i&&i[cr]){var l=Kn(i)[yu](";");xt(l,function(v){if(v=Kn(v||Ur),v){var S=Bu(v,"=");S===-1?o[v]=null:o[Kn(Jr(v,S))]=Kn(Bn(v,S+1))}})}return o}function gd(i,o){return Qe(i[o])?i[o]():null}function _p(i,o){var l=i||Ur;return bt(o,function(v,S){l+="; "+v+(Ve(S)?Ur:"="+S)}),l}function av(i){var o=Ur;if(!$r&&no(),$r.v){var l=$r.v[hd]||Ur;rv!==l&&(Hs=Lo(l),rv=l),o=Kn(Hs[i]||Ur)}return o}function ms(i,o){!$r&&no(),$r.v&&($r.v[hd]=i+"="+o)}function iv(i){return qt(i)?!!(zn(i,"CPU iPhone OS 12")||zn(i,"iPad; CPU OS 12")||zn(i,"Macintosh; Intel Mac OS X 10_14")&&zn(i,"Version/")&&zn(i,"Safari")||zn(i,"Macintosh; Intel Mac OS X 10_14")&&Ii(i,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||zn(i,"Chrome/5")||zn(i,"Chrome/6")||zn(i,"UnrealEngine")&&!zn(i,"Chrome")||zn(i,"UCBrowser/12")||zn(i,"UCBrowser/11")):!1}var yd={perfEvtsSendAll:!1};function ov(i){i.h=null;var o=i.cb;i.cb=[],xt(o,function(l){xr(l.fn,[l.arg])})}function hs(i,o,l,v){xt(i,function(S){S&&S[o]&&(l?(l.cb[Or]({fn:v,arg:S}),l.h=l.h||du(ov,0,l)):xr(v,[S]))})}var Om=function(){function i(o){this.listeners=[];var l,v,S=[],w={h:null,cb:[]},P=ko(o,yd);v=P[hu](function(L){l=!!L.cfg.perfEvtsSendAll}),Pa(i,this,function(L){Hr(L,"listeners",{g:function(){return S}}),L[Pi]=function(j){S[Or](j)},L[_u]=function(j){for(var B=ii(S,j);B>-1;)S[pt](B,1),B=ii(S,j)},L[Jn]=function(j){hs(S,Jn,w,function(B){B[Jn](j)})},L[vr]=function(j,B){hs(S,vr,w,function(Z){Z[vr](j,B)})},L[Fs]=function(j,B){hs(S,Fs,B?w:null,function(Z){Z[Fs](j,B)})},L[_n]=function(j){j&&(l||!j[Xd]())&&hs(S,_n,null,function(B){j[Rs]?du(function(){return B[_n](j)},0):B[_n](j)})},L[os]=function(j){j&&j[cr]&&hs(S,os,w,function(B){B[os](j)})},L[lc]=function(j){j&&j[li]&&hs(S,lc,w,function(B){B[lc](j)})},L[fc]=function(j,B){if(j>0){var Z=B||0;hs(S,fc,w,function(oe){oe[fc](j,Z)})}},L[As]=function(j){var B=function(){v&&v.rm(),v=null,S=[],w.h&&w.h[wo](),w.h=null,w.cb=[]},Z;if(hs(S,"unload",null,function(oe){var se=oe[As](j);se&&(Z||(Z=[]),Z[Or](se))}),Z)return Bc(function(oe){return is(ap(Z),function(){B(),oe()})});B()}})}return i.__ieDyn=1,i}(),Pu="ctx",sv="ParentContextKey",f="ChildrenContextKey",m=null,y=function(){function i(o,l,v){var S=this;if(S.start=cu(),S[An]=o,S[Rs]=v,S[Xd]=function(){return!1},Qe(l)){var w;Hr(S,"payload",{g:function(){return!w&&Qe(l)&&(w=l(),l=null),w}})}S[jc]=function(P){return P?P===i[sv]||P===i[f]?S[P]:(S[Pu]||{})[P]:null},S[ba]=function(P,L){if(P)if(P===i[sv])S[P]||(S[Xd]=function(){return!0}),S[P]=L;else if(P===i[f])S[P]=L;else{var j=S[Pu]=S[Pu]||{};j[P]=L}},S[Qf]=function(){var P=0,L=S[jc](i[f]);if(rt(L))for(var j=0;j<L[cr];j++){var B=L[j];B&&(P+=B[es])}S[es]=cu()-S.start,S.exTime=S[es]-P,S[Qf]=function(){}}}return i.ParentContextKey="parent",i.ChildrenContextKey="childEvts",i}(),I=function(){function i(o){this.ctx={},Pa(i,this,function(l){l.create=function(v,S,w){return new y(v,S,w)},l.fire=function(v){v&&(v[Qf](),o&&Qe(o[_n])&&o[_n](v))},l[ba]=function(v,S){if(v){var w=l[Pu]=l[Pu]||{};w[v]=S}},l[jc]=function(v){return(l[Pu]||{})[v]}})}return i.__ieDyn=1,i}(),F="CoreUtils.doPerf";function V(i,o,l,v,S){if(i){var w=i;if(w[Us]&&(w=w[Us]()),w){var P=void 0,L=w[jc](F);try{if(P=w.create(o(),v,S),P){if(L&&P[ba]&&(P[ba](y[sv],L),L[jc]&&L[ba])){var j=L[jc](y[f]);j||(j=[],L[ba](y[f],j)),j[Or](P)}return w[ba](F,P),l(P)}}catch(B){P&&P[ba]&&P[ba]("exception",B)}finally{P&&w.fire(P),w[ba](F,L)}}}return l()}function W(){return m}var ee="00000000000000000000000000000000",Q="0000000000000000";function me(i,o,l){return i&&i[cr]===o&&i!==l?!!i.match(/^[\da-f]*$/i):!1}function et(i){return me(i,32,ee)}function Tt(i){return me(i,16,Q)}var Jt=fp("plugin");function at(i){return Jt.get(i,"state",{},!0)}function ct(i,o){for(var l=[],v=null,S=i[Ai](),w;S;){var P=S[Do]();if(P){v&&v[Uc]&&P[Xa]&&v[Uc](P),w=at(P);var L=!!w[Fr];P[Fr]&&(L=P[Fr]()),L||l[Or](P),v=P,S=S[Ai]()}}xt(l,function(j){var B=i[ca]();j[Ps](i.getCfg(),B,o,i[Ai]()),w=at(j),!j[ca]&&!w[ca]&&(w[ca]=B),w[Fr]=!0,delete w[Mn]})}function ir(i){return i.sort(function(o,l){var v=0;if(l){var S=l[Xa];o[Xa]?v=S?o[ad]-l[ad]:1:S&&(v=-1)}else v=o?1:-1;return v})}function Mt(i){var o={};return{getName:function(){return o[An]},setName:function(l){i&&i.setName(l),o[An]=l},getTraceId:function(){return o[Ll]},setTraceId:function(l){i&&i.setTraceId(l),et(l)&&(o[Ll]=l)},getSpanId:function(){return o[Ao]},setSpanId:function(l){i&&i.setSpanId(l),Tt(l)&&(o[Ao]=l)},getTraceFlags:function(){return o[Za]},setTraceFlags:function(l){i&&i.setTraceFlags(l),o[Za]=l}}}var yr="TelemetryPluginChain",Er="_hasRun",Pt="_getTelCtx",Tn=0;function hc(i,o,l){for(;i;){if(i[Do]()===l)return i;i=i[Ai]()}return vf([l],o.config||{},o)}function Ks(i,o,l,v){var S=null,w=[];o||(o=ko({},null,l[un])),v!==null&&(S=v?hc(i,l,v):i);var P={_next:j,ctx:{core:function(){return l},diagLog:function(){return Vs(l,o.cfg)},getCfg:function(){return o.cfg},getExtCfg:Z,getConfig:oe,hasNext:function(){return!!S},getNext:function(){return S},setNext:function(ue){S=ue},iterate:se,onComplete:L}};function L(ue,ie){for(var Ce=[],de=2;de<arguments.length;de++)Ce[de-2]=arguments[de];ue&&w[Or]({func:ue,self:tt(ie)?P.ctx:ie,args:Ce})}function j(){var ue=S;if(S=ue?ue[Ai]():null,!ue){var ie=w;ie&&ie[cr]>0&&(xt(ie,function(Ce){try{Ce.func.call(Ce.self,Ce.args)}catch(de){St(l[un],2,73,"Unexpected Exception during onComplete - "+Wt(de))}}),w=[])}return ue}function B(ue,ie){var Ce=null,de=o.cfg;if(de&&ue){var Re=de[zc];!Re&&ie&&(Re={}),de[zc]=Re,Re=o.ref(de,zc),Re&&(Ce=Re[ue],!Ce&&ie&&(Ce={}),Re[ue]=Ce,Ce=o.ref(Re,ue))}return Ce}function Z(ue,ie){var Ce=B(ue,!0);return ie&&bt(ie,function(de,Re){if(Ve(Ce[de])){var ke=o.cfg[de];(ke||!Ve(ke))&&(Ce[de]=ke)}Ro(o,Ce,de,Re)}),o[xi](Ce,ie)}function oe(ue,ie,Ce){Ce===void 0&&(Ce=!1);var de,Re=B(ue,!1),ke=o.cfg;return Re&&(Re[ie]||!Ve(Re[ie]))?de=Re[ie]:(ke[ie]||!Ve(ke[ie]))&&(de=ke[ie]),de||!Ve(de)?de:Ce}function se(ue){for(var ie;ie=P._next();){var Ce=ie[Do]();Ce&&ue(Ce)}}return P}function ll(i,o,l,v){var S=ko(o),w=Ks(i,S,l,v),P=w.ctx;function L(B){var Z=w._next();return Z&&Z[Xa](B,P),!Z}function j(B,Z){return B===void 0&&(B=null),rt(B)&&(B=vf(B,S.cfg,l,Z)),ll(B||P[Ai](),S.cfg,l,Z)}return P[Sa]=L,P[Po]=j,P}function pf(i,o,l){var v=ko(o.config),S=Ks(i,v,o,l),w=S.ctx;function P(j){var B=S._next();return B&&B[As](w,j),!B}function L(j,B){return j===void 0&&(j=null),rt(j)&&(j=vf(j,v.cfg,o,B)),pf(j||w[Ai](),o,B)}return w[Sa]=P,w[Po]=L,w}function Sd(i,o,l){var v=ko(o.config),S=Ks(i,v,o,l),w=S.ctx;function P(j){return w.iterate(function(B){Qe(B[ks])&&B[ks](w,j)})}function L(j,B){return j===void 0&&(j=null),rt(j)&&(j=vf(j,v.cfg,o,B)),Sd(j||w[Ai](),o,B)}return w[Sa]=P,w[Po]=L,w}function vf(i,o,l,v){var S=null,w=!v;if(rt(i)&&i[cr]>0){var P=null;xt(i,function(L){if(!w&&v===L&&(w=!0),w&&L&&Qe(L[Xa])){var j=mf(L,o,l);S||(S=j),P&&P._setNext(j),P=j}})}return v&&!S?vf([v],o,l):S}function mf(i,o,l){var v=null,S=Qe(i[Xa]),w=Qe(i[Uc]),P;i?P=i[Zi]+"-"+i[ad]+"-"+Tn++:P="Unknown-0-"+Tn++;var L={getPlugin:function(){return i},getNext:function(){return v},processTelemetry:Z,unload:oe,update:se,_id:P,_setNext:function(ue){v=ue}};function j(){var ue;return i&&Qe(i[Pt])&&(ue=i[Pt]()),ue||(ue=ll(L,o,l)),ue}function B(ue,ie,Ce,de,Re){var ke=!1,Ge=i?i[Zi]:yr,st=ue[Er];return st||(st=ue[Er]={}),ue.setNext(v),i&&V(ue[ca](),function(){return Ge+":"+Ce},function(){st[P]=!0;try{var br=v?v._id:Ur;br&&(st[br]=!1),ke=ie(ue)}catch(Qr){var Xr=v?st[v._id]:!0;Xr&&(ke=!0),(!v||!Xr)&&St(ue[ci](),1,73,"Plugin ["+Ge+"] failed during "+Ce+" - "+Wt(Qr)+", run flags: "+Wt(st))}},de,Re),ke}function Z(ue,ie){ie=ie||j();function Ce(de){if(!i||!S)return!1;var Re=at(i);return Re[Mn]||Re[nd]?!1:(w&&i[Uc](v),i[Xa](ue,de),!0)}B(ie,Ce,"processTelemetry",function(){return{item:ue}},!ue.sync)||ie[Sa](ue)}function oe(ue,ie){function Ce(){var de=!1;if(i){var Re=at(i),ke=i[ca]||Re[ca];i&&(!ke||ke===ue.core())&&!Re[Mn]&&(Re[ca]=null,Re[Mn]=!0,Re[Fr]=!1,i[Mn]&&i[Mn](ue,ie)===!0&&(de=!0))}return de}B(ue,Ce,"unload",function(){},ie[Rs])||ue[Sa](ie)}function se(ue,ie){function Ce(){var de=!1;if(i){var Re=at(i),ke=i[ca]||Re[ca];i&&(!ke||ke===ue.core())&&!Re[Mn]&&i[ks]&&i[ks](ue,ie)===!0&&(de=!0)}return de}B(ue,Ce,"update",function(){},!1)||ue[Sa](ie)}return Vt(L)}function bd(){var i=[];function o(v){v&&i[Or](v)}function l(v,S){xt(i,function(w){try{w(v,S)}catch(P){St(v[ci](),2,73,"Unexpected error calling unload handler - "+Wt(P))}}),i=[]}return{add:o,run:l}}function hf(){var i=[];function o(v){var S=i;i=[],xt(S,function(w){try{(w.rm||w.remove).call(w)}catch(P){St(v,2,73,"Unloading:"+Wt(P))}})}function l(v){v&&xc(i,v)}return{run:o,add:l}}var xe,vt="getPlugin",Yt=(xe={},xe[zc]={isVal:Gc,v:{}},xe),rn=function(){function i(){var o=this,l,v,S,w,P;B(),Pa(i,o,function(Z){Z[Ps]=function(oe,se,ue,ie){j(oe,se,ie),l=!0},Z[Mn]=function(oe,se){var ue,ie=Z[ca];if(!ie||oe&&ie!==oe[ca]())return;var Ce,de=!1,Re=oe||pf(null,ie,S&&S[vt]?S[vt]():S),ke=se||(ue={reason:0},ue[Rs]=!1,ue);function Ge(){de||(de=!0,w.run(Re,se),P.run(Re[ci]()),Ce===!0&&Re[Sa](ke),B())}return!Z[ts]||Z[ts](Re,ke,Ge)!==!0?Ge():Ce=!0,Ce},Z[ks]=function(oe,se){var ue=Z[ca];if(!ue||oe&&ue!==oe[ca]())return;var ie,Ce=!1,de=oe||Sd(null,ue,S&&S[vt]?S[vt]():S),Re=se||{reason:0};function ke(){Ce||(Ce=!0,j(de.getCfg(),de.core(),de[Ai]()))}return!Z._doUpdate||Z._doUpdate(de,Re,ke)!==!0?ke():ie=!0,ie},fa(Z,"_addUnloadCb",function(){return w},"add"),fa(Z,"_addHook",function(){return P},"add"),Hr(Z,"_unloadHooks",{g:function(){return P}})}),o[ci]=function(Z){return L(Z)[ci]()},o[Fr]=function(){return l},o.setInitialized=function(Z){l=Z},o[Uc]=function(Z){S=Z},o[Sa]=function(Z,oe){oe?oe[Sa](Z):S&&Qe(S[Xa])&&S[Xa](Z,null)},o._getTelCtx=L;function L(Z){Z===void 0&&(Z=null);var oe=Z;if(!oe){var se=v||ll(null,{},o[ca]);S&&S[vt]?oe=se[Po](null,S[vt]):oe=se[Po](null,S)}return oe}function j(Z,oe,se){ko(Z,Yt,Vs(oe)),!se&&oe&&(se=oe[Aa]()[Ai]());var ue=S;S&&S[vt]&&(ue=S[vt]()),o[ca]=oe,v=ll(se,Z,oe,ue)}function B(){l=!1,o[ca]=null,v=null,S=null,P=hf(),w=bd()}}return i.__ieDyn=1,i}();function Ea(i,o,l){var v={id:o,fn:l};xc(i,v);var S={remove:function(){xt(i,function(w,P){if(w.id===v.id)return i[pt](P,1),-1})}};return S}function Ta(i,o,l){for(var v=!1,S=i[cr],w=0;w<S;++w){var P=i[w];if(P)try{if(P.fn[Wa](null,[o])===!1){v=!0;break}}catch(L){St(l,2,64,"Telemetry initializer failed: "+la(L),{exception:Wt(L)},!0)}}return!v}var Zn=function(i){Ol(o,i);function o(){var l=i.call(this)||this;l.identifier="TelemetryInitializerPlugin",l.priority=199;var v,S;w(),Pa(o,l,function(P,L){P.addTelemetryInitializer=function(j){return Ea(S,v++,j)},P[Xa]=function(j,B){Ta(S,j,B?B[ci]():P[ci]())&&P[Sa](j,B)},P[ts]=function(){w()}});function w(){v=0,S=[]}return l}return o.__ieDyn=1,o}(rn),vi,_s="Plugins must provide initialize method",fl="_notificationManager",tm="SDK is still unloading...",Au="SDK is not initialized",Ed=100,Mm=5e4,Xn=_o((vi={cookieCfg:{}},vi[cc]={rdOnly:!0,ref:!0,v:[]},vi[uc]={rdOnly:!0,ref:!0,v:[]},vi[zc]={ref:!0,v:{}},vi[ip]=Ls,vi.loggingLevelConsole=0,vi.diagnosticLogInterval=Ls,vi));function gs(i,o){return new I(o)}function rm(i,o,l){var v,S=[],w=[],P={};return xt(l,function(L){(Ve(L)||Ve(L[Ps]))&&fr(_s);var j=L[ad],B=L[Zi];L&&j&&(Ve(P[j])?P[j]=B:Cu(i,"Two extensions have same priority #"+j+" - "+P[j]+", "+B)),!j||j<o?S[Or](L):w[Or](L)}),v={},v[ca]=S,v[uc]=w,v}function Lm(i,o){var l=!1;return xt(o,function(v){if(v===i)return l=!0,-1}),l}function uv(i,o,l,v){l&&bt(l,function(S,w){v&&Ha(w)&&Ha(o[S])&&uv(i,o[S],w,v),v&&Ha(w)&&Ha(o[S])?uv(i,o[S],w,v):i.set(o,S,w)})}function Fm(i,o){var l=null,v=-1;return xt(i,function(S,w){if(S.w===o)return l=S,v=w,-1}),{i:v,l}}function Um(i,o){var l=Fm(i,o).l;return l||(l={w:o,rm:function(){var v=Fm(i,o);v.i!==-1&&i[pt](v.i,1)}},i[Or](l)),l}function Gh(i,o,l){xt(o,function(v){var S=Du(i,v.w,l);delete v.w,v.rm=function(){S.rm()}})}function jm(i,o,l,v){return o.add(i[hu](function(S){var w=S.cfg.disableDbgExt;w===!0&&v&&(l[_u](v),v=null),l&&!v&&w!==!0&&(v=Xv(S.cfg),l[Pi](v))})),v}function Ym(i){return Hr({rm:function(){i.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(i)+">"}})}var dl=function(){function i(){var o,l,v,S,w,P,L,j,B,Z,oe,se,ue,ie,Ce,de,Re,ke,Ge,st,br,Xr,Qr,gn,Qt,Ft,Kr,ja,na,We,Ut,Dn;Pa(i,this,function(Oe){_e(),Oe._getDbgPlgTargets=function(){return[Qr,S]},Oe[Fr]=function(){return l},Oe.activeStatus=function(){return Ft},Oe._setPendingStatus=function(){Ft=3},Oe[Ps]=function(Te,ht,er,Ct){ue&&fr(tm),Oe[Fr]()&&fr("Core cannot be initialized more than once"),o=ko(Te,Xn,er||Oe[un],!1),Te=o.cfg,ru(o[hu](function(yn){var $a=yn.cfg,$o=Ft===3;if(!$o){ja=$a.initInMemoMaxSize||Ed;var nu=$a[Io],Cp=$a.endpointUrl;if(Ve(nu)){br=null,Ft=Di[Mr];var xp="Please provide instrumentation key";l?(St(v,1,100,xp),aa()):fr(xp);return}var n_=[];if(It(nu)?(n_[Or](nu),br=null):br=nu,It(Cp)?(n_[Or](Cp),Kr=null):Kr=Cp,n_[cr]){na=!1,Ft=3;var L_=Gc($a.initTimeOut)?$a.initTimeOut:Mm,Ty=Yv(n_);du(function(){na||ar()},L_),is(Ty,function(Zm){try{if(na)return;if(!Zm.rejected){var Xm=Zm[No];if(Xm&&Xm[cr]){var hg=Xm[0];if(br=hg&&hg[No],Xm[cr]>1){var _g=Xm[1];Kr=_g&&_g[No]}}br&&(Te[Io]=br,Te.endpointUrl=Kr)}ar()}catch{na||ar()}})}else ar();var a_=yn.ref(yn.cfg,zc);bt(a_,function(Zm){yn.ref(a_,Zm)})}})),w=Ct,Ge=jm(o,ke,w&&Oe[Jf](),Ge),Wm(),Oe[un]=er;var dr=Te[cc];if(Z=[],Z[Or].apply(Z,Wu(Wu([],ht,!1),dr)),oe=Te[uc],ei(null),(!se||se[cr]===0)&&fr("No "+uc+" available"),oe&&oe[cr]>1){var Yn=Oe[Do]("TeeChannelController");(!Yn||!Yn.plugin)&&St(v,1,28,"TeeChannel required")}Gh(Te,Xr,v),Xr=null,l=!0,Ft===Di.ACTIVE&&aa()},Oe.getChannels=function(){var Te=[];return se&&xt(se,function(ht){Te[Or](ht)}),Vt(Te)},Oe.track=function(Te){V(Oe[Us](),function(){return"AppInsightsCore:track"},function(){Te===null&&(Ya(Te),fr("Invalid telemetry item")),!Te[An]&&Ve(Te[An])&&(Ya(Te),fr("telemetry name required")),Te[Xi]=Te[Xi]||br,Te[es]=Te[es]||Vc(new Date),Te.ver=Te.ver||"4.0",!ue&&Oe[Fr]()&&Ft===Di.ACTIVE?co()[Sa](Te):Ft!==Di[Mr]&&S[cr]<=ja&&S[Or](Te)},function(){return{item:Te}},!Te.sync)},Oe[Aa]=co,Oe[Jf]=function(){return w||(w=new Om(o.cfg),Oe[fl]=w),w},Oe[Pi]=function(Te){Oe.getNotifyMgr()[Pi](Te)},Oe[_u]=function(Te){w&&w[_u](Te)},Oe.getCookieMgr=function(){return j||(j=vs(o.cfg,Oe[un])),j},Oe.setCookieMgr=function(Te){j!==Te&&(al(j,!1),j=Te)},Oe[Us]=function(){return P||L||W()},Oe.setPerfMgr=function(Te){P=Te},Oe.eventCnt=function(){return S[cr]},Oe.releaseQueue=function(){if(l&&S[cr]>0){var Te=S;S=[],Ft===2?xt(Te,function(ht){ht[Xi]=ht[Xi]||br,co()[Sa](ht)}):St(v,2,20,"core init status is not active")}},Oe[Fc]=function(Te){return Ce=Te||null,Dn=!1,We&&We[wo](),Cn(!0)};function ar(){na=!0,Ve(br)?(Ft=Di[Mr],St(v,1,112,"ikey can't be resolved from promises")):Ft=Di.ACTIVE,aa()}function aa(){l&&(Oe.releaseQueue(),Oe[Fc]())}function Cn(Te){if((!We||!We[Xu])&&!Dn){var ht=Te||v&&v.queue[cr]>0;ht&&(Ut||(Ut=!0,ru(o[hu](function(er){var Ct=er.cfg.diagnosticLogInterval;(!Ct||!(Ct>0))&&(Ct=1e4);var dr=!1;We&&(dr=We[Xu],We[wo]()),We=Hd(Km,Ct),We.unref(),We[Xu]=dr}))),We[Xu]=!0)}return We}Oe[Zf]=function(){Dn=!0,We&&We[wo](),Km()},od(Oe,function(){return ie},["addTelemetryInitializer"]),Oe[As]=function(Te,ht,er){var Ct;Te===void 0&&(Te=!0),l||fr(Au),ue&&fr(tm);var dr=(Ct={reason:50},Ct[Rs]=Te,Ct.flushComplete=!1,Ct),Yn;Te&&!ht&&(Yn=Bc(function($o){ht=$o}));var yn=pf(Pd(),Oe);yn[Co](function(){ke.run(Oe[un]),Wv([j,w,v],Te,function(){_e(),ht&&ht(dr)})},Oe);function $a($o){dr.flushComplete=$o,ue=!0,Re.run(yn,dr),Oe[Zf](),yn[Sa](dr)}return Km(),Np(Te,$a,6,er),Yn},Oe[Do]=bs,Oe.addPlugin=function(Te,ht,er,Ct){if(!Te){Ct&&Ct(!1),Jm(_s);return}var dr=bs(Te[Zi]);if(dr&&!ht){Ct&&Ct(!1),Jm("Plugin ["+Te[Zi]+"] is already loaded!");return}var Yn={reason:16};function yn(nu){Z[Or](Te),Yn.added=[Te],ei(Yn),Ct&&Ct(!0)}if(dr){var $a=[dr.plugin],$o={reason:2,isAsync:!!er};Ec($a,$o,function(nu){nu?(Yn.removed=$a,Yn.reason|=32,yn()):Ct&&Ct(!1)})}else yn()},Oe.updateCfg=function(Te,ht){ht===void 0&&(ht=!0);var er;if(Oe[Fr]()){er={reason:1,cfg:o.cfg,oldCfg:fu({},o.cfg),newConfig:fu({},Te),merge:ht},Te=er.newConfig;var Ct=o.cfg;Te[cc]=Ct[cc],Te[uc]=Ct[uc]}o._block(function(dr){var Yn=dr.cfg;uv(dr,Yn,Te,ht),ht||bt(Yn,function(yn){rr(Te,yn)||dr.set(Yn,yn,Ls)}),dr[xi](Yn,Xn)},!0),o[Qo](),er&&Dp(er)},Oe.evtNamespace=function(){return de},Oe.flush=Np,Oe.getTraceCtx=function(Te){return st||(st=Mt()),st},Oe.setTraceCtx=function(Te){st=Te||null},Oe.addUnloadHook=ru,fa(Oe,"addUnloadCb",function(){return Re},"add"),Oe.onCfgChange=function(Te){var ht;return l?ht=Du(o.cfg,Te,Oe[un]):ht=Um(Xr,Te),Ym(ht)},Oe.getWParam=function(){return oa()||o.cfg.enableWParam?0:-1};function Ss(){var Te={};gn=[];var ht=function(er){er&&xt(er,function(Ct){if(Ct[Zi]&&Ct[xo]&&!Te[Ct.identifier]){var dr=Ct[Zi]+"="+Ct[xo];gn[Or](dr),Te[Ct.identifier]=Ct}})};ht(se),oe&&xt(oe,function(er){ht(er)}),ht(Z)}function _e(){l=!1,o=ko({},Xn,Oe[un]),o.cfg[Qu]=1,Hr(Oe,"config",{g:function(){return o.cfg},s:function(ht){Oe.updateCfg(ht,!1)}}),Hr(Oe,"pluginVersionStringArr",{g:function(){return gn||Ss(),gn}}),Hr(Oe,"pluginVersionString",{g:function(){return Qt||(gn||Ss(),Qt=gn.join(";")),Qt||Ur}}),Hr(Oe,"logger",{g:function(){return v||(v=new cf(o.cfg),o[un]=v),v},s:function(ht){o[un]=ht,v!==ht&&(al(v,!1),v=ht)}}),Oe[un]=new cf(o.cfg),Qr=[];var Te=Oe.config[cc]||[];Te.splice(0,Te[cr]),xc(Te,Qr),ie=new Zn,S=[],al(w,!1),w=null,P=null,L=null,al(j,!1),j=null,B=null,Z=[],oe=null,se=null,ue=!1,Ce=null,de=Qc("AIBaseCore",!0),Re=bd(),st=null,br=null,ke=hf(),Xr=[],Qt=null,gn=null,Dn=!1,We=null,Ut=!1,Ft=0,Kr=null,ja=null,na=!1}function co(){var Te=ll(Pd(),o.cfg,Oe);return Te[Co](Cn),Te}function ei(Te){var ht=rm(Oe[un],dp,Z);B=null,Qt=null,gn=null,se=(oe||[])[0]||[],se=ir(xc(se,ht[uc]));var er=xc(ir(ht[ca]),se);Qr=Vt(er);var Ct=Oe.config[cc]||[];Ct.splice(0,Ct[cr]),xc(Ct,Qr);var dr=co();se&&se[cr]>0&&ct(dr[Po](se),er),ct(dr,er),Te&&Dp(Te)}function bs(Te){var ht=null,er=null,Ct=[];return xt(Qr,function(dr){if(dr[Zi]===Te&&dr!==ie)return er=dr,-1;dr.getChannel&&Ct[Or](dr)}),!er&&Ct[cr]>0&&xt(Ct,function(dr){if(er=dr.getChannel(Te),!er)return-1}),er&&(ht={plugin:er,setEnabled:function(dr){at(er)[nd]=!dr},isEnabled:function(){var dr=at(er);return!dr[Mn]&&!dr[nd]},remove:function(dr,Yn){var yn;dr===void 0&&(dr=!0);var $a=[er],$o=(yn={reason:1},yn[Rs]=dr,yn);Ec($a,$o,function(nu){nu&&ei({reason:32,removed:$a}),Yn&&Yn(nu)})}}),ht}function Pd(){if(!B){var Te=(Qr||[]).slice();ii(Te,ie)===-1&&Te[Or](ie),B=vf(ir(Te),o.cfg,Oe)}return B}function Ec(Te,ht,er){if(Te&&Te[cr]>0){var Ct=vf(Te,o.cfg,Oe),dr=pf(Ct,Oe);dr[Co](function(){var Yn=!1,yn=[];xt(Z,function($o,nu){Lm($o,Te)?Yn=!0:yn[Or]($o)}),Z=yn,Qt=null,gn=null;var $a=[];oe&&(xt(oe,function($o,nu){var Cp=[];xt($o,function(xp){Lm(xp,Te)?Yn=!0:Cp[Or](xp)}),$a[Or](Cp)}),oe=$a),er&&er(Yn),Cn()}),dr[Sa](ht)}else er(!1)}function Km(){if(v&&v.queue){var Te=v.queue.slice(0);v.queue[cr]=0,xt(Te,function(ht){var er,Ct=(er={},er[An]=Ce||"InternalMessageId: "+ht[Xf],er[Xi]=br,er[es]=Vc(new Date),er.baseType=ul.dataType,er.baseData={message:ht[ec]},er);Oe.track(Ct)})}}function Np(Te,ht,er,Ct){var dr=1,Yn=!1,yn=null;Ct=Ct||5e3;function $a(){dr--,Yn&&dr===0&&(yn&&yn[wo](),yn=null,ht&&ht(Yn),ht=null)}if(se&&se[cr]>0){var $o=co()[Po](se);$o.iterate(function(nu){if(nu.flush){dr++;var Cp=!1;nu.flush(Te,function(){Cp=!0,$a()},er)||Cp||(Te&&yn==null?yn=du(function(){yn=null,$a()},Ct):$a())}})}return Yn=!0,$a(),!0}function Wm(){var Te;ru(o[hu](function(ht){var er=ht.cfg.enablePerfMgr;if(er){var Ct=ht.cfg[ip];(Te!==Ct||!Te)&&(Ct||(Ct=gs),sp(ht.cfg,ip,Ct),Te=Ct,L=null),!P&&!L&&Qe(Ct)&&(L=Ct(Oe,Oe[Jf]()))}else L=null,Te=null}))}function Dp(Te){var ht=Sd(Pd(),Oe);ht[Co](Cn),(!Oe._updateHook||Oe._updateHook(ht,Te)!==!0)&&ht[Sa](Te)}function Jm(Te){var ht=Oe[un];ht?(St(ht,2,73,Te),Cn()):fr(Te)}function Ya(Te){var ht=Oe[Jf]();ht&&ht[vr]([Te],2)}function ru(Te){ke.add(Te)}})}return i.__ieDyn=1,i}();function _f(i,o){try{if(i&&i!==""){var l=Li().parse(i);if(l&&l[Ja]&&l[Ja]>=l.itemsAccepted&&l.itemsReceived-l.itemsAccepted===l.errors[cr])return l}}catch(v){St(o,1,43,"Cannot parse the response. "+(v[An]||Wt(v)),{response:i})}return null}var Ws="",pl="NoResponseBody",$m="&"+pl+"=true",nm="POST",cv=function(){function i(){var o=0,l,v,S,w,P,L,j,B,Z,oe,se,ue,ie,Ce;Pa(i,this,function(de,Re){var ke=!0;na(),de[Ps]=function(We,Ut){S=Ut,v&&St(S,1,28,"Sender is already initialized"),de.SetConfig(We),v=!0},de._getDbgPlgTargets=function(){return[v,w,L,l]},de.SetConfig=function(We){try{if(P=We.senderOnCompleteCallBack||{},L=!!We.disableCredentials,j=We.fetchCredentials,w=!!We.isOneDs,l=!!We.enableSendPromise,Z=!!We.disableXhr,oe=!!We.disableBeacon,se=!!We.disableBeaconSync,Ce=We.timeWrapper,ie=!!We.addNoResponse,ue=!!We.disableFetchKeepAlive,B={sendPOST:Ft},w||(ke=!1),L){var Ut=Zc();Ut&&Ut.protocol&&Ut.protocol[mu]()==="file:"&&(ke=!1)}return!0}catch{}return!1},de.getSyncFetchPayload=function(){return o},de.getSenderInst=function(We,Ut){return We&&We[cr]?Xr(We,Ut):null},de.getFallbackInst=function(){return B},de[ts]=function(We,Ut){na()};function Ge(We,Ut){Qr(Ut,200,{},We)}function st(We,Ut){St(S,2,26,"Failed to send telemetry.",{message:We}),Qr(Ut,400,{})}function br(We){st("No endpoint url is provided for the batch",We)}function Xr(We,Ut){for(var Dn,Oe=0,ar=null,aa=0;ar==null&&aa<We[cr];)Oe=We[aa],!Z&&Oe===1?cd()?ar=ja:Eu()&&(ar=Ft):Oe===2&&pa(Ut)&&(!Ut||!ue)?ar=Kr:Oe===3&&zs()&&(Ut?!se:!oe)&&(ar=Qt),aa++;return ar?(Dn={_transport:Oe,_isSync:Ut},Dn[as]=ar,Dn):null}function Qr(We,Ut,Dn,Oe){try{We&&We(Ut,Dn,Oe)}catch{}}function gn(We,Ut){var Dn=Ho(),Oe=We[ns];if(!Oe)return br(Ut),!0;Oe=We[ns]+(ie?$m:Ws);var ar=We[li],aa=w?ar:new Blob([ar],{type:"text/plain;charset=UTF-8"}),Cn=Dn.sendBeacon(Oe,aa);return Cn}function Qt(We,Ut,Dn){var Oe=We[li];try{if(Oe)if(gn(We,Ut))Ge(Ws,Ut);else{var ar=P&&P.beaconOnRetry;ar&&Qe(ar)?ar(We,Ut,gn):(B&&B[as](We,Ut,!0),St(S,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(aa){w&&Cu(S,"Failed to send telemetry using sendBeacon API. Ex:"+Wt(aa)),Qr(Ut,w?0:400,{},Ws)}}function Ft(We,Ut,Dn){var Oe,ar,aa,Cn=We[Qd]||{};!Dn&&l&&(Oe=Bc(function(ei,bs){ar=ei,aa=bs})),w&&Dn&&We.disableXhrSync&&(Dn=!1);var Ss=We[ns];if(!Ss){br(Ut),ar&&ar(!1);return}var _e=Kc(nm,Ss,ke,!0,Dn,We[Ml]);w||_e[ed]("Content-type","application/json"),xt(Wr(Cn),function(ei){_e[ed](ei,Cn[ei])}),_e.onreadystatechange=function(){w||(co(_e),_e.readyState===4&&ar&&ar(!0))},_e.onload=function(){w&&co(_e)};function co(ei){var bs=P&&P.xhrOnComplete,Pd=bs&&Qe(bs);if(Pd)bs(ei,Ut,We);else{var Ec=ss(ei);Qr(Ut,ei[ki],cp(ei,w),Ec)}}return _e.onerror=function(ei){Qr(Ut,w?_e[ki]:400,cp(_e,w),w?Ws:fi(_e)),aa&&aa(ei)},_e.ontimeout=function(){Qr(Ut,w?_e[ki]:500,cp(_e,w),w?Ws:fi(_e)),ar&&ar(!1)},_e.send(We[li]),Oe}function Kr(We,Ut,Dn){var Oe,ar=We[ns],aa=We[li],Cn=w?aa:new Blob([aa],{type:"application/json"}),Ss,_e,co,ei=new Headers,bs=aa[cr],Pd=!1,Ec=!1,Km=We[Qd]||{},Np=(Oe={method:nm,body:Cn},Oe[Jv]=!0,Oe);We.headers&&Wr(We.headers)[cr]>0&&(xt(Wr(Km),function(Ya){ei.append(Ya,Km[Ya])}),Np[Qd]=ei),j?Np.credentials=j:ke&&w&&(Np.credentials="include"),Dn&&(Np.keepalive=!0,o+=bs,w?We._sendReason===2&&(Pd=!0,ie&&(ar+=$m)):Pd=!0);var Wm=new Request(ar,Np);try{Wm[Jv]=!0}catch{}if(!Dn&&l&&(Ss=Bc(function(Ya,ru){_e=Ya,co=ru})),!ar){br(Ut),_e&&_e(!1);return}function Dp(Ya){Qr(Ut,w?0:400,{},w?Ws:Ya)}function Jm(Ya,ru,Te){var ht=Ya[ki],er=P.fetchOnComplete;er&&Qe(er)?er(Ya,Ut,Te||Ws,ru):Qr(Ut,ht,{},Te||Ws)}try{is(fetch(w?ar:Wm,w?Np:null),function(Ya){if(Dn&&(o-=bs,bs=0),!Ec)if(Ec=!0,Ya.rejected)Dp(Ya.reason&&Ya.reason[ec]),co&&co(Ya.reason);else{var ru=Ya[No];try{!w&&!ru.ok?(Dp(ru.statusText),_e&&_e(!1)):w&&!ru.body?(Jm(ru,null,Ws),_e&&_e(!0)):is(ru.text(),function(Te){Jm(ru,We,Te[No]),_e&&_e(!0)})}catch(Te){Dp(Wt(Te)),co&&co(Te)}}})}catch(Ya){Ec||(Dp(Wt(Ya)),co&&co(Ya))}return Pd&&!Ec&&(Ec=!0,Qr(Ut,200,{}),_e&&_e(!0)),w&&!Ec&&We[Ml]>0&&Ce&&Ce.set(function(){Ec||(Ec=!0,Qr(Ut,500,{}),_e&&_e(!0))},We[Ml]),Ss}function ja(We,Ut,Dn){var Oe=Vo(),ar=new XDomainRequest,aa=We[li];ar.onload=function(){var ei=ss(ar),bs=P&&P.xdrOnComplete;bs&&Qe(bs)?bs(ar,Ut,We):Qr(Ut,200,{},ei)},ar.onerror=function(){Qr(Ut,400,{},w?Ws:us(ar))},ar.ontimeout=function(){Qr(Ut,500,{})},ar.onprogress=function(){};var Cn=Oe&&Oe.location&&Oe.location[gu]||"",Ss=We[ns];if(!Ss){br(Ut);return}if(!w&&Ss.lastIndexOf(Cn,0)!==0){var _e="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";St(S,2,40,". "+_e),st(_e,Ut);return}var co=w?Ss:Ss[Ri](/^(https?:)/,"");ar.open(nm,co),We[Ml]&&(ar[Ml]=We[Ml]),ar.send(aa),w&&Dn?Ce&&Ce.set(function(){ar.send(aa)},0):ar.send(aa)}function na(){o=0,v=!1,l=!1,S=null,w=null,P=null,L=null,j=null,B=null,Z=!1,oe=!1,se=!1,ue=!1,ie=!1,Ce=null}})}return i.__ieDyn=1,i}(),lv="on",Td="attachEvent",ch="addEventListener",qm="detachEvent",gp="removeEventListener",vl="events";Qc("aiEvtPageHide"),Qc("aiEvtPageShow");var A_=/\.[\.]+/g,lh=/[\.]+$/,Vh=1,Bm=fp("events"),R_=/^([^.]*)(?:\.(.+)|)/;function gf(i){return i&&i[Ri]?i[Ri](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Ur):i}function fv(i,o){var l;if(o){var v=Ur;rt(o)?(v=Ur,xt(o,function(w){w=gf(w),w&&(w[0]!=="."&&(w="."+w),v+=w)})):v=gf(o),v&&(v[0]!=="."&&(v="."+v),i=(i||Ur)+v)}var S=R_.exec(i||Ur)||[];return l={},l[cn]=S[1],l.ns=(S[2]||Ur).replace(A_,".").replace(lh,Ur)[yu](".").sort().join("."),l}function am(i,o,l){l===void 0&&(l=!0);var v=Bm.get(i,vl,{},l),S=v[o];return S||(S=v[o]=[]),S}function yf(i,o,l,v){i&&o&&o[cn]&&(i[gp]?i[gp](o[cn],l,v):i[qm]&&i[qm](lv+o[cn],l))}function dv(i,o,l,v){var S=!1;return i&&o&&o[cn]&&l&&(i[ch]?(i[ch](o[cn],l,v),S=!0):i[Td]&&(i[Td](lv+o[cn],l),S=!0)),S}function fh(i,o,l,v){for(var S=o[cr];S--;){var w=o[S];w&&(!l.ns||l.ns===w.evtName.ns)&&(!v||v(w))&&(yf(i,w.evtName,w[Wn],w.capture),o[pt](S,1))}}function Hh(i,o,l){if(o[cn])fh(i,am(i,o[cn]),o,l);else{var v=Bm.get(i,vl,{});bt(v,function(S,w){fh(i,w,o,l)}),Wr(v)[cr]===0&&Bm.kill(i,vl)}}function wd(i,o){var l;return o?(rt(o)?l=[i].concat(o):l=[i,o],l=fv("xx",l).ns[yu](".")):l=i,l}function Kh(i,o,l,v,S){var w;S===void 0&&(S=!1);var P=!1;if(i)try{var L=fv(o,v);if(P=dv(i,L,l,S),P&&Bm.accept(i)){var j=(w={guid:Vh++,evtName:L},w[Wn]=l,w.capture=S,w);am(i,L.type)[Or](j)}}catch{}return P}function k_(i,o,l,v,S){if(S===void 0&&(S=!1),i)try{var w=fv(o,v),P=!1;Hh(i,w,function(L){return w.ns&&!l||L[Wn]===l?(P=!0,!0):!1}),P||yf(i,w,l,S)}catch{}}var dh="sampleRate",im="ProcessLegacy",ph="http.method",zm="https://dc.services.visualstudio.com",pv="/v2/track",Id="not_specified",vh=Zd({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),om="split",Gr="length",Js="toLowerCase",Nd="ingestionendpoint",yp="toString",vv="push",sm="removeItem",Sf="name",Dd="message",Wh="count",Sp="stringify",ml="pathname",_c="exceptions",Fo="parsedStack",Zs="properties",hl="measurements",bf="sizeInBytes",Ru="typeName",ku="severityLevel",bp="problemGroup",Cd="isManual",Jh="CreateFromInterface",mv="assembly",gc="fileName",Gm="hasFullStack",hv="level",Ef="method",_v="line",gv="duration",mh="receivedResponse";function hh(i,o,l){var v=o[Gr],S=Zh(i,o);if(S[Gr]!==v){for(var w=0,P=S;l[P]!==void 0;)w++,P=Bn(S,0,147)+_(w);S=P}return S}function Zh(i,o){var l;return o&&(o=Kn(Vn(o)),o[Gr]>150&&(l=Bn(o,0,150),St(i,2,57,"name is too long.  It has been truncated to 150 characters.",{name:o},!0))),l||o}function mi(i,o,l){l===void 0&&(l=1024);var v;return o&&(l=l||1024,o=Kn(Vn(o)),o[Gr]>l&&(v=Bn(o,0,l),St(i,2,61,"string value is too long. It has been truncated to "+l+" characters.",{value:o},!0))),v||o}function Xs(i,o){return d(i,o,2048,66)}function Ep(i,o){var l;return o&&o[Gr]>32768&&(l=Bn(o,0,32768),St(i,2,56,"message is too long, it has been truncated to 32768 characters.",{message:o},!0)),l||o}function Gn(i,o){var l;if(o){var v=""+o;v[Gr]>32768&&(l=Bn(v,0,32768),St(i,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:o},!0))}return l||o}function Tp(i,o){if(o){var l={};bt(o,function(v,S){if(xn(S)&&Bs())try{S=Li()[Sp](S)}catch(w){St(i,2,49,"custom property is not valid",{exception:w},!0)}S=mi(i,S,8192),v=hh(i,v,l),l[v]=S}),o=l}return o}function wp(i,o){if(o){var l={};bt(o,function(v,S){v=hh(i,v,l),l[v]=S}),o=l}return o}function Xh(i,o){return o&&d(i,o,128,69)[yp]()}function d(i,o,l,v){var S;return o&&(o=Kn(Vn(o)),o[Gr]>l&&(S=Bn(o,0,l),St(i,2,v,"input is too long, it has been truncated to "+l+" characters.",{data:o},!0))),S||o}function _(i){var o="00"+i;return go(o,o[Gr]-3)}var T=jf()||{},D=0,R=[null,null,null,null,null];function Y(i){var o=D,l=R,v=l[o];return T.createElement?l[o]||(v=l[o]=T.createElement("a")):v={host:q(i,!0)},v.href=i,o++,o>=l[Gr]&&(o=0),D=o,v}function q(i,o){var l=K(i,o)||"";if(l){var v=l.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(v!=null&&v[Gr]>3&&qt(v[2])&&v[2][Gr]>0)return v[2]+(v[3]||"")}return l}function K(i,o){var l=null;if(i){var v=i.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(v!=null&&v[Gr]>2&&qt(v[2])&&v[2][Gr]>0&&(l=v[2]||"",o&&v[Gr]>2)){var S=(v[1]||"")[Js](),w=v[3]||"";(S==="http"&&w===":80"||S==="https"&&w===":443")&&(w=""),l+=w}}return l}var re=[zm+pv,"https://breeze.aimon.applicationinsights.io"+pv,"https://dc-int.services.visualstudio.com"+pv];function ae(i){return ii(re,i[Js]())!==-1}function Ne(i,o,l,v){var S,w=v,P=v;if(o&&o[Gr]>0){var L=Y(o);if(S=L.host,!w)if(L[ml]!=null){var j=L.pathname[Gr]===0?"/":L[ml];j.charAt(0)!=="/"&&(j="/"+j),P=L[ml],w=mi(i,l?l+" "+j:j)}else w=mi(i,o)}else S=v,w=v;return{target:S,name:w,data:P}}var Ye=Ju({LocalStorage:0,SessionStorage:1}),Ue=void 0,Ie="";function fe(i){try{if(Ve(ri()))return null;var o=new Date()[yp](),l=wr(i===Ye.LocalStorage?"localStorage":"sessionStorage"),v=Ie+o;l.setItem(v,o);var S=l.getItem(v)!==o;if(l[sm](v),!S)return l}catch{}return null}function Le(){return He()?fe(Ye.SessionStorage):null}function be(i){Ie=i||""}function He(i){return(i||Ue===void 0)&&(Ue=!!fe(Ye.SessionStorage)),Ue}function De(i,o){var l=Le();if(l!==null)try{return l.getItem(o)}catch(v){Ue=!1,St(i,2,2,"Browser failed read of session storage. "+la(v),{exception:Wt(v)})}return null}function Ee(i,o,l){var v=Le();if(v!==null)try{return v.setItem(o,l),!0}catch(S){Ue=!1,St(i,2,4,"Browser failed write to session storage. "+la(S),{exception:Wt(S)})}return!1}function $e(i,o){var l=Le();if(l!==null)try{return l[sm](o),!0}catch(v){Ue=!1,St(i,2,6,"Browser failed removal of session storage item. "+la(v),{exception:Wt(v)})}return!1}var $t=";",Zt="=";function or(i){if(!i)return{};var o=i[om]($t),l=kv(o,function(S,w){var P=w[om](Zt);if(P[Gr]===2){var L=P[0][Js](),j=P[1];S[L]=j}return S},{});if(Wr(l)[Gr]>0){if(l.endpointsuffix){var v=l.location?l.location+".":"";l[Nd]=l[Nd]||"https://"+v+"dc."+l.endpointsuffix}l[Nd]=l[Nd]||zm,Ii(l[Nd],"/")&&(l[Nd]=l[Nd].slice(0,-1))}return l}var Dr=function(){function i(o,l,v){var S=this,w=this;w.ver=1,w.sampleRate=100,w.tags={},w[Sf]=mi(o,v)||Id,w.data=l,w.time=Vc(new Date),w.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return S.sampleRate===100?4:1},tags:1,data:1}}return i}(),Lr=function(){function i(o,l,v,S){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var w=this;w.ver=2,w[Sf]=mi(o,l)||Id,w[Zs]=Tp(o,v),w[hl]=wp(o,S)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.Event",i.dataType="EventData",i}(),ln="<no_method>",nn="error",Xt="stack",Qn="stackDetails",Je="errorSrc",lt="message",Sr="description";function lr(i,o){var l=i;return l&&!qt(l)&&(JSON&&JSON[Sp]?(l=JSON[Sp](i),o&&(!l||l==="{}")&&(Qe(i[yp])?l=i[yp]():l=""+i)):l=""+i+" - (Missing JSON.stringify)"),l||""}function wt(i,o){var l=i;return i&&(l&&!qt(l)&&(l=i[lt]||i[Sr]||l),l&&!qt(l)&&(l=lr(l,!0)),i.filename&&(l=l+" @"+(i.filename||"")+":"+(i.lineno||"?")+":"+(i.colno||"?"))),o&&o!=="String"&&o!=="Object"&&o!=="Error"&&Bu(l||"",o)===-1&&(l=o+": "+l),l||""}function Pr(i){try{if(xn(i))return"hasFullStack"in i&&"typeName"in i}catch{}return!1}function Nt(i){try{if(xn(i))return"ver"in i&&"exceptions"in i&&"properties"in i}catch{}return!1}function Ma(i){return i&&i.src&&qt(i.src)&&i.obj&&rt(i.obj)}function ot(i){var o=i||"";qt(o)||(qt(o[Xt])?o=o[Xt]:o=""+o);var l=o[om](`
`);return{src:o,obj:l}}function wn(i){for(var o=[],l=i[om](`
`),v=0;v<l[Gr];v++){var S=l[v];l[v+1]&&(S+="@"+l[v+1],v++),o[vv](S)}return{src:i,obj:o}}function In(i){var o=null;if(i)try{if(i[Xt])o=ot(i[Xt]);else if(i[nn]&&i[nn][Xt])o=ot(i[nn][Xt]);else if(i.exception&&i.exception[Xt])o=ot(i.exception[Xt]);else if(Ma(i))o=i;else if(Ma(i[Qn]))o=i[Qn];else if(Vo()&&Vo().opera&&i[lt])o=wn(i[Dd]);else if(i.reason&&i.reason[Xt])o=ot(i.reason[Xt]);else if(qt(i))o=ot(i);else{var l=i[lt]||i[Sr]||"";qt(i[Je])&&(l&&(l+=`
`),l+=" from "+i[Je]),l&&(o=ot(l))}}catch(v){o=ot(v)}return o||{src:"",obj:null}}function hi(i){var o="";return i&&(i.obj?xt(i.obj,function(l){o+=l+`
`}):o=i.src||""),o}function yc(i){var o,l=i.obj;if(l&&l[Gr]>0){o=[];var v=0,S=0;xt(l,function(ie){var Ce=ie[yp]();if(Qs.regex.test(Ce)){var de=new Qs(Ce,v++);S+=de[bf],o[vv](de)}});var w=32*1024;if(S>w)for(var P=0,L=o[Gr]-1,j=0,B=P,Z=L;P<L;){var oe=o[P][bf],se=o[L][bf];if(j+=oe+se,j>w){var ue=Z-B+1;o.splice(B,ue);break}B=P,Z=L,P++,L--}}return o}function Fi(i){var o="";if(i&&(o=i.typeName||i[Sf]||"",!o))try{var l=/function (.{1,200})\(/,v=l.exec(i.constructor[yp]());o=v&&v[Gr]>1?v[1]:""}catch{}return o}function Tf(i){if(i)try{if(!qt(i)){var o=Fi(i),l=lr(i,!1);return(!l||l==="{}")&&(i[nn]&&(i=i[nn],o=Fi(i)),l=lr(i,!0)),Bu(l,o)!==0&&o!=="String"?o+":"+l:l}}catch{}return""+(i||"")}var ys=function(){function i(o,l,v,S,w,P){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var L=this;L.ver=2,Nt(l)?(L[_c]=l[_c]||[],L[Zs]=l[Zs],L[hl]=l[hl],l[ku]&&(L[ku]=l[ku]),l.id&&(L.id=l.id,l[Zs].id=l.id),l[bp]&&(L[bp]=l[bp]),Ve(l[Cd])||(L[Cd]=l[Cd])):(v||(v={}),P&&(v.id=P),L[_c]=[new Uo(o,l,v)],L[Zs]=Tp(o,v),L[hl]=wp(o,S),w&&(L[ku]=w),P&&(L.id=P))}return i.CreateAutoException=function(o,l,v,S,w,P,L,j){var B,Z=Fi(w||P||o);return B={},B[Dd]=wt(o,Z),B.url=l,B.lineNumber=v,B.columnNumber=S,B.error=Tf(w||P||o),B.evt=Tf(P||o),B[Ru]=Z,B.stackDetails=In(L||w||P),B.errorSrc=j,B},i.CreateFromInterface=function(o,l,v,S){var w=l[_c]&&qu(l[_c],function(L){return Uo[Jh](o,L)}),P=new i(o,Ji(Ji({},l),{exceptions:w}),v,S);return P},i.prototype.toInterface=function(){var o,l=this,v=l.exceptions,S=l.properties,w=l.measurements,P=l.severityLevel,L=l.problemGroup,j=l.id,B=l.isManual,Z=v instanceof Array&&qu(v,function(oe){return oe.toInterface()})||void 0;return o={ver:"4.0"},o[_c]=Z,o.severityLevel=P,o.properties=S,o.measurements=w,o.problemGroup=L,o.id=j,o.isManual=B,o},i.CreateSimpleException=function(o,l,v,S,w,P){var L;return{exceptions:[(L={},L[Gm]=!0,L.message=o,L.stack=w,L.typeName=l,L)]}},i.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",i.dataType="ExceptionData",i.formatError=Tf,i}(),Uo=function(){function i(o,l,v){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var S=this;if(Pr(l))S[Ru]=l[Ru],S[Dd]=l[Dd],S[Xt]=l[Xt],S[Fo]=l[Fo]||[],S[Gm]=l[Gm];else{var w=l,P=w&&w.evt;zt(w)||(w=w[nn]||P||w),S[Ru]=mi(o,Fi(w))||Id,S[Dd]=Ep(o,wt(l||w,S[Ru]))||Id;var L=l[Qn]||In(l);S[Fo]=yc(L),rt(S[Fo])&&qu(S[Fo],function(j){j[mv]=mi(o,j[mv]),j[gc]=mi(o,j[gc])}),S[Xt]=Gn(o,hi(L)),S.hasFullStack=rt(S.parsedStack)&&S.parsedStack[Gr]>0,v&&(v[Ru]=v[Ru]||S[Ru])}}return i.prototype.toInterface=function(){var o,l=this,v=l[Fo]instanceof Array&&qu(l[Fo],function(w){return w.toInterface()}),S=(o={id:l.id,outerId:l.outerId,typeName:l[Ru],message:l[Dd],hasFullStack:l[Gm],stack:l[Xt]},o[Fo]=v||void 0,o);return S},i.CreateFromInterface=function(o,l){var v=l[Fo]instanceof Array&&qu(l[Fo],function(w){return Qs[Jh](w)})||l[Fo],S=new i(o,Ji(Ji({},l),{parsedStack:v}));return S},i}(),Qs=function(){function i(o,l){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var v=this;if(v[bf]=0,typeof o=="string"){var S=o;v[hv]=l,v[Ef]=ln,v[mv]=Kn(S),v[gc]="",v[_v]=0;var w=S.match(i.regex);w&&w[Gr]>=5&&(v[Ef]=Kn(w[2])||v[Ef],v[gc]=Kn(w[4]),v[_v]=parseInt(w[5])||0)}else v[hv]=o[hv],v[Ef]=o[Ef],v[mv]=o[mv],v[gc]=o[gc],v[_v]=o[_v],v[bf]=0;v.sizeInBytes+=v.method[Gr],v.sizeInBytes+=v.fileName[Gr],v.sizeInBytes+=v.assembly[Gr],v[bf]+=i.baseSize,v.sizeInBytes+=v.level.toString()[Gr],v.sizeInBytes+=v.line.toString()[Gr]}return i.CreateFromInterface=function(o){return new i(o,null)},i.prototype.toInterface=function(){var o=this;return{level:o[hv],method:o[Ef],assembly:o[mv],fileName:o[gc],line:o[_v]}},i.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,i.baseSize=58,i}(),ea=function(){function i(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return i}(),Zr=function(){function i(o,l,v,S,w,P,L,j,B){this.aiDataContract={ver:1,metrics:1,properties:0};var Z=this;Z.ver=2;var oe=new ea;oe[Wh]=S>0?S:void 0,oe.max=isNaN(P)||P===null?void 0:P,oe.min=isNaN(w)||w===null?void 0:w,oe[Sf]=mi(o,l)||Id,oe.value=v,oe.stdDev=isNaN(L)||L===null?void 0:L,Z.metrics=[oe],Z[Zs]=Tp(o,j),Z[hl]=wp(o,B)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",i.dataType="MetricData",i}(),ta="";function La(i){(isNaN(i)||i<0)&&(i=0),i=Math.round(i);var o=ta+i%1e3,l=ta+Math.floor(i/1e3)%60,v=ta+Math.floor(i/(1e3*60))%60,S=ta+Math.floor(i/(1e3*60*60))%24,w=Math.floor(i/(1e3*60*60*24));return o=o[Gr]===1?"00"+o:o[Gr]===2?"0"+o:o,l=l[Gr]<2?"0"+l:l,v=v[Gr]<2?"0"+v:v,S=S[Gr]<2?"0"+S:S,(w>0?w+".":ta)+S+":"+v+":"+l+"."+o}var eu=function(){function i(o,l,v,S,w,P,L){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var j=this;j.ver=2,j.id=Xh(o,L),j.url=Xs(o,v),j[Sf]=mi(o,l)||Id,isNaN(S)||(j[gv]=La(S)),j[Zs]=Tp(o,w),j[hl]=wp(o,P)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",i.dataType="PageviewData",i}(),Sc=function(){function i(o,l,v,S,w,P,L,j,B,Z,oe,se){B===void 0&&(B="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var ue=this;ue.ver=2,ue.id=l,ue[gv]=La(w),ue.success=P,ue.resultCode=L+"",ue.type=mi(o,B);var ie=Ne(o,v,j,S);ue.data=Xs(o,S)||ie.data,ue.target=mi(o,ie.target),Z&&(ue.target="".concat(ue.target," | ").concat(Z)),ue[Sf]=mi(o,ie[Sf]),ue[Zs]=Tp(o,oe),ue[hl]=wp(o,se)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",i.dataType="RemoteDependencyData",i}(),Ui=function(){function i(o,l,v,S,w){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var P=this;P.ver=2,l=l||Id,P[Dd]=Ep(o,l),P[Zs]=Tp(o,S),P[hl]=wp(o,w),v&&(P[ku]=v)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.Message",i.dataType="MessageData",i}(),wf=function(){function i(o,l,v,S,w,P,L){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var j=this;j.ver=2,j.url=Xs(o,v),j[Sf]=mi(o,l)||Id,j[Zs]=Tp(o,w),j[hl]=wp(o,P),L&&(j.domProcessing=L.domProcessing,j[gv]=L[gv],j.networkConnect=L.networkConnect,j.perfTotal=L.perfTotal,j[mh]=L[mh],j.sentRequest=L.sentRequest)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",i.dataType="PageviewPerformanceData",i}(),tu=function(){function i(o,l){this.aiDataContract={baseType:1,baseData:1},this.baseType=o,this.baseData=l}return i}(),um=Ju({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function bc(i){var o="ai."+i+".";return function(l){return o+l}}var If=bc("application"),ha=bc("device"),Ip=bc("location"),Nf=bc("operation"),yv=bc("session"),Ou=bc("user"),_i=bc("cloud"),Df=bc("internal"),a=function(i){Ol(o,i);function o(){return i.call(this)||this}return o}(up({applicationVersion:If("ver"),applicationBuild:If("build"),applicationTypeId:If("typeId"),applicationId:If("applicationId"),applicationLayer:If("layer"),deviceId:ha("id"),deviceIp:ha("ip"),deviceLanguage:ha("language"),deviceLocale:ha("locale"),deviceModel:ha("model"),deviceFriendlyName:ha("friendlyName"),deviceNetwork:ha("network"),deviceNetworkName:ha("networkName"),deviceOEMName:ha("oemName"),deviceOS:ha("os"),deviceOSVersion:ha("osVersion"),deviceRoleInstance:ha("roleInstance"),deviceRoleName:ha("roleName"),deviceScreenResolution:ha("screenResolution"),deviceType:ha("type"),deviceMachineName:ha("machineName"),deviceVMName:ha("vmName"),deviceBrowser:ha("browser"),deviceBrowserVersion:ha("browserVersion"),locationIp:Ip("ip"),locationCountry:Ip("country"),locationProvince:Ip("province"),locationCity:Ip("city"),operationId:Nf("id"),operationName:Nf("name"),operationParentId:Nf("parentId"),operationRootId:Nf("rootId"),operationSyntheticSource:Nf("syntheticSource"),operationCorrelationVector:Nf("correlationVector"),sessionId:yv("id"),sessionIsFirst:yv("isFirst"),sessionIsNew:yv("isNew"),userAccountAcquisitionDate:Ou("accountAcquisitionDate"),userAccountId:Ou("accountId"),userAgent:Ou("userAgent"),userId:Ou("id"),userStoreRegion:Ou("storeRegion"),userAuthUserId:Ou("authUserId"),userAnonymousUserAcquisitionDate:Ou("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Ou("authUserAcquisitionDate"),cloudName:_i("name"),cloudRole:_i("role"),cloudRoleVer:_i("roleVer"),cloudRoleInstance:_i("roleInstance"),cloudEnvironment:_i("environment"),cloudLocation:_i("location"),cloudDeploymentUnit:_i("deploymentUnit"),internalNodeName:Df("nodeName"),internalSdkVersion:Df("sdkVersion"),internalAgentVersion:Df("agentVersion"),internalSnippet:Df("snippet"),internalSdkSrc:Df("sdkSrc")})),u=new a;function p(i,o){k_(i,null,null,o)}function g(i){var o=jf(),l=Ho(),v=!1,S=[],w=1;l&&!Ve(l.onLine)&&!l.onLine&&(w=2);var P=0,L=se(),j=wd(Qc("OfflineListener"),i);try{if(Z(Vo())&&(v=!0),o){var B=o.body||o;B.ononline&&Z(B)&&(v=!0)}}catch{v=!1}function Z(Ge){var st=!1;return Ge&&(st=Kh(Ge,"online",Ce,j),st&&Kh(Ge,"offline",de,j)),st}function oe(){return L}function se(){return!(P===2||w===2)}function ue(){var Ge=se();L!==Ge&&(L=Ge,xt(S,function(st){var br={isOnline:L,rState:w,uState:P};try{st(br)}catch{}}))}function ie(Ge){P=Ge,ue()}function Ce(){w=1,ue()}function de(){w=2,ue()}function Re(){var Ge=Vo();if(Ge&&v){if(p(Ge,j),o){var st=o.body||o;tt(st.ononline)||p(st,j)}v=!1}}function ke(Ge){return S[vv](Ge),{rm:function(){var st=S.indexOf(Ge);if(st>-1)return S.splice(st,1)}}}return{isOnline:oe,isListening:function(){return v},unload:Re,addListener:ke,setOnlineState:ie}}var E="AppInsightsChannelPlugin",C="duration",A="tags",x="deviceType",M="data",U="name",z="traceID",G="length",H="stringify",X="measurements",J="dataType",pe="envelopeType",he="toString",Me="_get",qe="enqueue",Xe="count",nr="eventsLimitInMem",sr="push",Fn="item",fn="emitLineDelimitedJson",Un="clear",ji="createNew",gi="markAsSent",Cf="clearSent",cm="bufferOverride",xf="BUFFER_KEY",Ze="SENT_BUFFER_KEY",Lt="concat",Nn="MAX_BUFFER_SIZE",Ae="triggerSend",Dt="diagLog",ra="initialize",io="_sender",jo="endpointUrl",Ar="instrumentationKey",yi="customHeaders",Qa="maxBatchSizeInBytes",oo="onunloadDisableBeacon",Pf="isBeaconApiDisabled",Mu="alwaysUseXhrOverride",Sv="disableXhr",xd="enableSessionStorageBuffer",Af="_buffer",bv="onunloadDisableFetch",Vm="disableSendBeaconSplit",wa="enableSendPromise",so="getSenderInst",Se="unloadTransports",mt="convertUndefined",Ht="maxBatchInterval",At="serialize",Kt="_onError",Rn="_onPartialSuccess",hn="_onSuccess",Ia="itemsReceived",uo="itemsAccepted",Yo="oriPayload",Rf="baseType",Ev="sampleRate",_h="eventsSendRequest",vg="getSamplingScore",Sy="getHashCodeScore",Qh="baseType",jn="baseData",Fa="properties",O_="true";function Ua(i,o,l){return Su(i,o,l,en)}function z0(i,o,l){var v=l[A]=l[A]||{},S=o.ext=o.ext||{},w=o[A]=o[A]||[],P=S.user;P&&(Ua(v,u.userAuthUserId,P.authId),Ua(v,u.userId,P.id||P.localId));var L=S.app;L&&Ua(v,u.sessionId,L.sesId);var j=S.device;j&&(Ua(v,u.deviceId,j.id||j.localId),Ua(v,u[x],j.deviceClass),Ua(v,u.deviceIp,j.ip),Ua(v,u.deviceModel,j.model),Ua(v,u[x],j[x]));var B=o.ext.web;if(B){Ua(v,u.deviceLanguage,B.browserLang),Ua(v,u.deviceBrowserVersion,B.browserVer),Ua(v,u.deviceBrowser,B.browser);var Z=l[M]=l[M]||{},oe=Z[jn]=Z[jn]||{},se=oe[Fa]=oe[Fa]||{};Ua(se,"domain",B.domain),Ua(se,"isManual",B.isManual?O_:null),Ua(se,"screenRes",B.screenRes),Ua(se,"userConsent",B.userConsent?O_:null)}var ue=S.os;ue&&(Ua(v,u.deviceOS,ue[U]),Ua(v,u.deviceOSVersion,ue.osVer));var ie=S.trace;ie&&(Ua(v,u.operationParentId,ie.parentID),Ua(v,u.operationName,mi(i,ie[U])),Ua(v,u.operationId,ie[z]));for(var Ce={},de=w[G]-1;de>=0;de--){var Re=w[de];bt(Re,function(Ge,st){Ce[Ge]=st}),w.splice(de,1)}bt(w,function(Ge,st){Ce[Ge]=st});var ke=Ji(Ji({},v),Ce);ke[u.internalSdkVersion]||(ke[u.internalSdkVersion]=mi(i,"javascript:".concat(mI.Version),64)),l[A]=js(ke)}function Hm(i,o,l){Ve(i)||bt(i,function(v,S){Bt(S)?l[v]=S:qt(S)?o[v]=S:Bs()&&(o[v]=Li()[H](S))})}function gh(i,o){Ve(i)||bt(i,function(l,v){i[l]=v||o})}function yh(i,o,l,v){var S=new Dr(i,v,o);Ua(S,"sampleRate",l[dh]),(l[jn]||{}).startTime&&(S.time=Vc(l[jn].startTime)),S.iKey=l.iKey;var w=l.iKey.replace(/-/g,"");return S[U]=S[U].replace("{0}",w),z0(i,l,S),l[A]=l[A]||[],js(S)}function Sh(i,o){Ve(o[jn])&&St(i,1,46,"telemetryItem.baseData cannot be null.")}var mI={Version:"3.3.4"};function hI(i,o,l){Sh(i,o);var v=o[jn][X]||{},S=o[jn][Fa]||{};Hm(o[M],S,v),Ve(l)||gh(S,l);var w=o[jn];if(Ve(w))return Cu(i,"Invalid input for dependency data"),null;var P=w[Fa]&&w[Fa][ph]?w[Fa][ph]:"GET",L=new Sc(i,w.id,w.target,w[U],w[C],w.success,w.responseCode,P,w.type,w.correlationContext,S,v),j=new tu(Sc[J],L);return yh(i,Sc[pe],o,j)}function G0(i,o,l){Sh(i,o);var v={},S={};o[Qh]!==Lr[J]&&(v.baseTypeSource=o[Qh]),o[Qh]===Lr[J]?(v=o[jn][Fa]||{},S=o[jn][X]||{}):o[jn]&&Hm(o[jn],v,S),Hm(o[M],v,S),Ve(l)||gh(v,l);var w=o[jn][U],P=new Lr(i,w,v,S),L=new tu(Lr[J],P);return yh(i,Lr[pe],o,L)}function _I(i,o,l){Sh(i,o);var v=o[jn][X]||{},S=o[jn][Fa]||{};Hm(o[M],S,v),Ve(l)||gh(S,l);var w=o[jn],P=ys.CreateFromInterface(i,w,S,v),L=new tu(ys[J],P);return yh(i,ys[pe],o,L)}function gI(i,o,l){Sh(i,o);var v=o[jn],S=v[Fa]||{},w=v[X]||{};Hm(o[M],S,w),Ve(l)||gh(S,l);var P=new Zr(i,v[U],v.average,v.sampleCount,v.min,v.max,v.stdDev,S,w),L=new tu(Zr[J],P);return yh(i,Zr[pe],o,L)}function yI(i,o,l){Sh(i,o);var v,S=o[jn];!Ve(S)&&!Ve(S[Fa])&&!Ve(S[Fa][C])?(v=S[Fa][C],delete S[Fa][C]):!Ve(o[M])&&!Ve(o[M][C])&&(v=o[M][C],delete o[M][C]);var w=o[jn],P;((o.ext||{}).trace||{})[z]&&(P=o.ext.trace[z]);var L=w.id||P,j=w[U],B=w.uri,Z=w[Fa]||{},oe=w[X]||{};if(Ve(w.refUri)||(Z.refUri=w.refUri),Ve(w.pageType)||(Z.pageType=w.pageType),Ve(w.isLoggedIn)||(Z.isLoggedIn=w.isLoggedIn[he]()),!Ve(w[Fa])){var se=w[Fa];bt(se,function(Ce,de){Z[Ce]=de})}Hm(o[M],Z,oe),Ve(l)||gh(Z,l);var ue=new eu(i,j,B,v,Z,oe,L),ie=new tu(eu[J],ue);return yh(i,eu[pe],o,ie)}function SI(i,o,l){Sh(i,o);var v=o[jn],S=v[U],w=v.uri||v.url,P=v[Fa]||{},L=v[X]||{};Hm(o[M],P,L),Ve(l)||gh(P,l);var j=new wf(i,S,w,void 0,P,L,v),B=new tu(wf[J],j);return yh(i,wf[pe],o,B)}function bI(i,o,l){Sh(i,o);var v=o[jn].message,S=o[jn].severityLevel,w=o[jn][Fa]||{},P=o[jn][X]||{};Hm(o[M],w,P),Ve(l)||gh(w,l);var L=new Ui(i,v,S,w,P),j=new tu(Ui[J],L);return yh(i,Ui[pe],o,j)}var V0=function(){function i(o,l){var v=[],S=!1,w=l.maxRetryCnt;this[Me]=function(){return v},this._set=function(P){return v=P,v},Pa(i,this,function(P){P[qe]=function(L){if(P[Xe]()>=l[nr]){S||(St(o,2,105,"Maximum in-memory buffer size reached: "+P[Xe](),!0),S=!0);return}L.cnt=L.cnt||0,!(!Ve(w)&&L.cnt>w)&&v[sr](L)},P[Xe]=function(){return v[G]},P.size=function(){for(var L=v[G],j=0;j<v[G];j++)L+=v[j].item[G];return l[fn]||(L+=2),L},P[Un]=function(){v=[],S=!1},P.getItems=function(){return v.slice(0)},P.batchPayloads=function(L){if(L&&L[G]>0){var j=[];xt(L,function(Z){j[sr](Z[Fn])});var B=l[fn]?j.join(`
`):"["+j.join(",")+"]";return B}return null},P[ji]=function(L,j,B){var Z=v.slice(0);L=L||o,j=j||{};var oe=B?new H0(L,j):new by(L,j);return xt(Z,function(se){oe[qe](se)}),oe}})}return i.__ieDyn=1,i}(),by=function(i){Ol(o,i);function o(l,v){var S=i.call(this,l,v)||this;return Pa(o,S,function(w,P){w[gi]=function(L){P[Un]()},w[Cf]=function(L){}}),S}return o.__ieDyn=1,o}(V0),EI=["AI_buffer","AI_sentBuffer"],H0=function(i){Ol(o,i);function o(v,S){var w=i.call(this,v,S)||this,P=!1,L=S==null?void 0:S.namePrefix,j=S[cm]||{getItem:De,setItem:Ee},B=j.getItem,Z=j.setItem,oe=S.maxRetryCnt;return Pa(o,w,function(se,ue){var ie=st(o[xf]),Ce=st(o[Ze]),de=Qr(),Re=Ce[Lt](de),ke=se._set(ie[Lt](Re));ke[G]>o[Nn]&&(ke[G]=o[Nn]),Xr(o[Ze],[]),Xr(o[xf],ke),se[qe]=function(Qt){if(se[Xe]()>=o[Nn]){P||(St(v,2,67,"Maximum buffer size reached: "+se[Xe](),!0),P=!0);return}Qt.cnt=Qt.cnt||0,!(!Ve(oe)&&Qt.cnt>oe)&&(ue[qe](Qt),Xr(o.BUFFER_KEY,se[Me]()))},se[Un]=function(){ue[Un](),Xr(o.BUFFER_KEY,se[Me]()),Xr(o[Ze],[]),P=!1},se[gi]=function(Qt){Xr(o[xf],se._set(Ge(Qt,se[Me]())));var Ft=st(o[Ze]);Ft instanceof Array&&Qt instanceof Array&&(Ft=Ft[Lt](Qt),Ft[G]>o[Nn]&&(St(v,1,67,"Sent buffer reached its maximum size: "+Ft[G],!0),Ft[G]=o[Nn]),Xr(o[Ze],Ft))},se[Cf]=function(Qt){var Ft=st(o[Ze]);Ft=Ge(Qt,Ft),Xr(o[Ze],Ft)},se[ji]=function(Qt,Ft,Kr){Kr=!!Kr;var ja=se[Me]().slice(0),na=st(o[Ze]).slice(0);Qt=Qt||v,Ft=Ft||{},se[Un]();var We=Kr?new o(Qt,Ft):new by(Qt,Ft);return xt(ja,function(Ut){We[qe](Ut)}),Kr&&We[gi](na),We};function Ge(Qt,Ft){var Kr=[],ja=[];return xt(Qt,function(na){ja[sr](na[Fn])}),xt(Ft,function(na){!Qe(na)&&ii(ja,na[Fn])===-1&&Kr[sr](na)}),Kr}function st(Qt){var Ft=Qt;return Ft=L?L+"_"+Ft:Ft,br(Ft)}function br(Qt){try{var Ft=B(v,Qt);if(Ft){var Kr=Li().parse(Ft);if(qt(Kr)&&(Kr=Li().parse(Kr)),Kr&&rt(Kr))return Kr}}catch(ja){St(v,1,42," storage key: "+Qt+", "+la(ja),{exception:Wt(ja)})}return[]}function Xr(Qt,Ft){var Kr=Qt;try{Kr=L?L+"_"+Kr:Kr;var ja=JSON[H](Ft);Z(v,Kr,ja)}catch(na){Z(v,Kr,JSON[H]([])),St(v,2,41," storage key: "+Kr+", "+la(na)+". Buffer cleared",{exception:Wt(na)})}}function Qr(){var Qt=[];try{return xt(EI,function(Ft){var Kr=gn(Ft);if(Qt=Qt[Lt](Kr),L){var ja=L+"_"+Ft,na=gn(ja);Qt=Qt[Lt](na)}}),Qt}catch(Ft){St(v,2,41,"Transfer events from previous buffers: "+la(Ft)+". previous Buffer items can not be removed",{exception:Wt(Ft)})}return[]}function gn(Qt){try{var Ft=br(Qt),Kr=[];return xt(Ft,function(ja){var na={item:ja,cnt:0};Kr[sr](na)}),$e(v,Qt),Kr}catch{}return[]}}),w}var l;return l=o,o.VERSION="_1",o.BUFFER_KEY="AI_buffer"+l.VERSION,o.SENT_BUFFER_KEY="AI_sentBuffer"+l.VERSION,o.MAX_BUFFER_SIZE=2e3,o}(V0),TI=function(){function i(o){Pa(i,this,function(l){l[At]=function(P){var L=v(P,"root");try{return Li()[H](L)}catch(j){St(o,1,48,j&&Qe(j[he])?j[he]():"Error serializing object",null,!0)}};function v(P,L){var j="__aiCircularRefCheck",B={};if(!P)return St(o,1,48,"cannot serialize object because it is null or undefined",{name:L},!0),B;if(P[j])return St(o,2,50,"Circular reference detected while serializing object",{name:L},!0),B;if(!P.aiDataContract){if(L==="measurements")B=w(P,"number",L);else if(L==="properties")B=w(P,"string",L);else if(L==="tags")B=w(P,"string",L);else if(rt(P))B=S(P,L);else{St(o,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:L},!0);try{Li()[H](P),B=P}catch(Z){St(o,1,48,Z&&Qe(Z[he])?Z[he]():"Error serializing object",null,!0)}}return B}return P[j]=!0,bt(P.aiDataContract,function(Z,oe){var se=Qe(oe)?oe()&1:oe&1,ue=Qe(oe)?oe()&4:oe&4,ie=oe&2,Ce=P[Z]!==void 0,de=xn(P[Z])&&P[Z]!==null;if(se&&!Ce&&!ie)St(o,1,24,"Missing required field specification. The field is required but not present on source",{field:Z,name:L});else if(!ue){var Re=void 0;de?ie?Re=S(P[Z],Z):Re=v(P[Z],Z):Re=P[Z],Re!==void 0&&(B[Z]=Re)}}),delete P[j],B}function S(P,L){var j;if(P)if(!rt(P))St(o,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:L},!0);else{j=[];for(var B=0;B<P[G];B++){var Z=P[B],oe=v(Z,L+"["+B+"]");j[sr](oe)}}return j}function w(P,L,j){var B;return P&&(B={},bt(P,function(Z,oe){if(L==="string")oe===void 0?B[Z]="undefined":oe===null?B[Z]="null":oe[he]?B[Z]=oe[he]():B[Z]="invalid field: toString() is not defined.";else if(L==="number")if(oe===void 0)B[Z]="undefined";else if(oe===null)B[Z]="null";else{var se=parseFloat(oe);B[Z]=se}else B[Z]="invalid field: "+j+" is of unknown type.",St(o,1,B[Z],null,!0)})),B}})}return i.__ieDyn=1,i}(),wI=8,II=function(){function i(){}return i.prototype.getHashCodeScore=function(o){var l=this.getHashCode(o)/i.INT_MAX_VALUE;return l*100},i.prototype.getHashCode=function(o){if(o==="")return 0;for(;o[G]<wI;)o=o[Lt](o);for(var l=5381,v=0;v<o[G];++v)l=(l<<5)+l+o.charCodeAt(v),l=l&l;return Math.abs(l)},i.INT_MAX_VALUE=2147483647,i}(),NI=function(){function i(){var o=this,l=new II,v=new a;o[vg]=function(S){var w=0;return S[A]&&S[A][v.userId]?w=l.getHashCodeScore(S[A][v.userId]):S.ext&&S.ext.user&&S.ext.user.id?w=l[Sy](S.ext.user.id):S[A]&&S[A][v.operationId]?w=l.getHashCodeScore(S[A][v.operationId]):S.ext&&S.ext.telemetryTrace&&S.ext.telemetryTrace[z]?w=l.getHashCodeScore(S.ext.telemetryTrace[z]):w=Math.random()*100,w}}return i}(),DI=function(){function i(o,l){this.INT_MAX_VALUE=2147483647;var v=l||Vs(null);(o>100||o<0)&&(v.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:o},!0),o=100),this[Ev]=o,this.samplingScoreGenerator=new NI}return i.prototype.isSampledIn=function(o){var l=this[Ev],v=!1;return l==null||l>=100||o.baseType===Zr[J]?!0:(v=this.samplingScoreGenerator[vg](o)<l,v)},i}(),Na,lm,Tv=void 0,K0="",CI=65e3;function W0(i){try{return i.responseText}catch{}return null}function xI(i){return i&&i.sendPOST}var J0=_o((Na={endpointUrl:il(en,zm+pv)},Na[fn]=to(),Na[Ht]=15e3,Na[Qa]=102400,Na.disableTelemetry=to(),Na[xd]=to(!0),Na.isRetryDisabled=to(),Na[Pf]=to(!0),Na[Vm]=to(!0),Na[Sv]=to(),Na[bv]=to(),Na[oo]=to(),Na[Ar]=Tv,Na.namePrefix=Tv,Na.samplingPercentage=il(PI,100),Na[yi]=Tv,Na[mt]=Tv,Na[nr]=1e4,Na[cm]=!1,Na.httpXHROverride={isVal:xI,v:Tv},Na[Mu]=to(),Na.transports=Tv,Na.retryCodes=Tv,Na.maxRetryCnt={isVal:Bt,v:10},Na));function PI(i){return!isNaN(i)&&i>0&&i<=100}var AI=(lm={},lm[Lr.dataType]=G0,lm[Ui.dataType]=bI,lm[eu.dataType]=yI,lm[wf.dataType]=SI,lm[ys.dataType]=_I,lm[Zr.dataType]=gI,lm[Sc.dataType]=hI,lm),Z0=function(i){Ol(o,i);function o(){var l=i.call(this)||this;l.priority=1001,l.identifier=E;var v,S,w,P,L,j,B,Z=0,oe,se,ue,ie,Ce,de,Re,ke,Ge,st,br,Xr,Qr,gn,Qt,Ft,Kr,ja,na,We,Ut,Dn,Oe,ar,aa,Cn,Ss;return Pa(o,l,function(_e,co){tS(),_e.pause=function(){Zm(),w=!0},_e.resume=function(){w&&(w=!1,S=null,yn(),a_())},_e.flush=function(te,ye,_t){if(te===void 0&&(te=!0),!w){Zm();try{return _e[Ae](te,null,_t||1)}catch(gt){St(_e[Dt](),1,22,"flush failed, telemetry will not be collected: "+la(gt),{exception:Wt(gt)})}}},_e.onunloadFlush=function(){if(!w)if(Re||We)try{return _e[Ae](!0,nu,2)}catch(te){St(_e[Dt](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+la(te),{exception:Wt(te)})}else _e.flush(!1)},_e.addHeader=function(te,ye){B[te]=ye},_e[ra]=function(te,ye,_t,gt){_e.isInitialized()&&St(_e[Dt](),1,28,"Sender is already initialized"),co[ra](te,ye,_t,gt);var Tr=_e.identifier;L=new TI(ye.logger),v=0,S=null,_e[io]=null,j=0;var mr=_e[Dt]();ue=wd(Qc("Sender"),ye.evtNamespace&&ye.evtNamespace()),se=g(ue),_e._addHook(Du(te,function(jr){var Da=jr.cfg;Da.storagePrefix&&be(Da.storagePrefix);var Ad=ll(null,Da,ye),Cr=Ad.getExtCfg(Tr,J0),rS=Cr[jo];if(ie&&rS===ie){var wy=Da[jo];wy&&wy!==rS&&(Cr[jo]=wy)}It(Cr[Ar])&&(Cr[Ar]=Da[Ar]),Hr(_e,"_senderConfig",{g:function(){return Cr}}),Ce!==Cr[jo]&&(ie=Ce=Cr[jo]),ye.activeStatus()===Di.PENDING?_e.pause():ye.activeStatus()===Di.ACTIVE&&_e.resume(),st&&st!==Cr[yi]&&xt(st,function(au){delete B[au.header]}),de=Cr[Qa],Re=(Cr[oo]===!1||Cr[Pf]===!1)&&zs(),ke=Cr[oo]===!1&&zs(),Ge=Cr[Pf]===!1&&zs(),We=Cr[Mu],Ut=!!Cr[Sv],Ss=Cr.retryCodes;var Iy=Cr[cm],i_=!!Cr[xd]&&(!!Iy||He()),nS=Cr.namePrefix,MI=i_!==Ft||i_&&ja!==nS||i_&&Kr!==Iy;if(_e[Af]){if(MI)try{_e._buffer=_e._buffer[ji](mr,Cr,i_)}catch(au){St(_e[Dt](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+la(au),{exception:Wt(au)})}yn()}else _e[Af]=i_?new H0(mr,Cr):new by(mr,Cr);ja=nS,Ft=i_,Kr=Iy,Dn=!Cr[bv]&&pa(!0),aa=!!Cr[Vm],_e._sample=new DI(Cr.samplingPercentage,mr),Xr=Cr[Ar],!It(Xr)&&!eS(Xr,Da)&&St(mr,1,100,"Invalid Instrumentation key "+Xr),st=Cr[yi],qt(ie)&&!ae(ie)&&st&&st[G]>0?xt(st,function(au){l.addHeader(au.header,au.value)}):st=null,na=Cr[wa];var aS=bs();Cn?Cn.SetConfig(aS):(Cn=new cv,Cn[ra](aS,mr));var gg=Cr.httpXHROverride,yg=null,F_=null,LI=Bl([3,1,2],Cr.transports);yg=Cn&&Cn[so](LI,!1);var Ny=Cn&&Cn.getFallbackInst();Oe=function(au,bh){return Ct(Ny,au,bh)},ar=function(au,bh){return Ct(Ny,au,bh,!1)},yg=We?gg:yg||gg||Ny,_e[io]=function(au,bh){return Ct(yg,au,bh)},Dn&&(oe=n_);var Dy=Bl([3,1],Cr[Se]);Dn||(Dy=Dy.filter(function(au){return au!==2})),F_=Cn&&Cn[so](Dy,!0),F_=We?gg:F_||gg,(We||Cr[Se]||!oe)&&F_&&(oe=function(au,bh){return Ct(F_,au,bh)}),oe||(oe=Oe),br=Cr.disableTelemetry,Qr=Cr[mt]||Tv,gn=Cr.isRetryDisabled,Qt=Cr[Ht]}))},_e.processTelemetry=function(te,ye){var _t;ye=_e._getTelCtx(ye);var gt=ye[Dt]();try{var Tr=Dp(te,gt);if(!Tr)return;var mr=Jm(te,gt);if(!mr)return;var jr=L[At](mr),Da=_e[Af];yn(jr);var Ad=(_t={},_t[Fn]=jr,_t.cnt=0,_t);Da[qe](Ad),a_()}catch(Cr){St(gt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+la(Cr),{exception:Wt(Cr)})}_e.processNext(te,ye)},_e.isCompletelyIdle=function(){return!w&&Z===0&&_e._buffer[Xe]()===0},_e.getOfflineListener=function(){return se},_e._xhrReadyStateChange=function(te,ye,_t){if(!xp(ye))return Pd(te,ye,_t)},_e[Ae]=function(te,ye,_t){te===void 0&&(te=!0);var gt;if(!w)try{var Tr=_e[Af];if(br)Tr[Un]();else if(Tr[Xe]()>0){var mr=Tr.getItems();_g(_t||0,te),ye?gt=ye.call(_e,mr,te):gt=_e[io](mr,te)}Zm()}catch(Da){var jr=da();(!jr||jr>9)&&St(_e[Dt](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+la(Da),{exception:Wt(Da)})}return gt},_e.getOfflineSupport=function(){var te;return te={getUrl:function(){return ie},createPayload:Te},te[At]=Ya,te.batch=ru,te.shouldProcess=function(ye){return!!Dp(ye)},te},_e._doTeardown=function(te,ye){_e.onunloadFlush(),al(se,!1),tS()},_e[Kt]=function(te,ye,_t){if(!xp(te))return Ec(te,ye)},_e[Rn]=function(te,ye){if(!xp(te))return Km(te,ye)},_e[hn]=function(te,ye){if(!xp(te))return Np(te)},_e._xdrOnLoad=function(te,ye){if(!xp(ye))return ei(te,ye)};function ei(te,ye){var _t=W0(te);if(te&&(_t+""=="200"||_t===""))v=0,_e[hn](ye,0);else{var gt=_f(_t);gt&&gt[Ia]&&gt[Ia]>gt[uo]&&!gn?_e[Rn](ye,gt):_e[Kt](ye,us(te))}}function bs(){var te;try{var ye={xdrOnComplete:function(gt,Tr,mr){var jr=Wm(mr);if(jr)return ei(gt,jr)},fetchOnComplete:function(gt,Tr,mr,jr){var Da=Wm(jr);if(Da)return $a(gt.status,Da,gt.url,Da[G],gt.statusText,mr||"")},xhrOnComplete:function(gt,Tr,mr){var jr=Wm(mr);if(jr)return Pd(gt,jr,jr[G])},beaconOnRetry:function(gt,Tr,mr){return Cp(gt,Tr,mr)}},_t=(te={},te[wa]=na,te.isOneDs=!1,te.disableCredentials=!1,te[Sv]=Ut,te.disableBeacon=!Ge,te.disableBeaconSync=!ke,te.senderOnCompleteCallBack=ye,te);return _t}catch{}return null}function Pd(te,ye,_t){te.readyState===4&&$a(te.status,ye,te.responseURL,_t,fi(te),W0(te)||te.response)}function Ec(te,ye,_t){St(_e[Dt](),2,26,"Failed to send telemetry.",{message:ye}),_e._buffer&&_e._buffer[Cf](te)}function Km(te,ye){for(var _t=[],gt=[],Tr=ye.errors.reverse(),mr=0,jr=Tr;mr<jr.length;mr++){var Da=jr[mr],Ad=te.splice(Da.index,1)[0];Xm(Da.statusCode)?gt[sr](Ad):_t[sr](Ad)}te[G]>0&&_e[hn](te,ye[uo]),_t[G]>0&&_e[Kt](_t,fi(null,["partial success",ye[uo],"of",ye.itemsReceived].join(" "))),gt[G]>0&&(L_(gt),St(_e[Dt](),2,40,"Partial success. Delivered: "+te[G]+", Failed: "+_t[G]+". Will retry to send "+gt[G]+" our of "+ye[Ia]+" items"))}function Np(te,ye){_e._buffer&&_e._buffer[Cf](te)}function Wm(te){try{if(te){var ye=te,_t=ye[Yo];return _t&&_t[G]?_t:null}}catch{}return null}function Dp(te,ye){if(br)return!1;if(!te)return ye&&St(ye,1,7,"Cannot send empty telemetry"),!1;if(te.baseData&&!te[Rf])return ye&&St(ye,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(te[Rf]||(te[Rf]="EventData"),!_e[io])return ye&&St(ye,1,28,"Sender was not initialized"),!1;if(ht(te))te[dh]=_e._sample[Ev];else return ye&&St(ye,2,33,"Telemetry item was sampled out and not sent",{SampleRate:_e._sample[Ev]}),!1;return!0}function Jm(te,ye){var _t=te.iKey||Xr,gt=o.constructEnvelope(te,_t,ye,Qr);if(!gt){St(ye,1,47,"Unable to create an AppInsights envelope");return}var Tr=!1;if(te[A]&&te[A][im]&&(xt(te[A][im],function(mr){try{mr&&mr(gt)===!1&&(Tr=!0,Cu(ye,"Telemetry processor check returns false"))}catch(jr){St(ye,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+la(jr),{exception:Wt(jr)},!0)}}),delete te[A][im]),!Tr)return gt}function Ya(te){var ye=K0,_t=_e[Dt]();try{var gt=Dp(te,_t),Tr=null;gt&&(Tr=Jm(te,_t)),Tr&&(ye=L[At](Tr))}catch{}return ye}function ru(te){var ye=K0;return te&&te[G]&&(ye="["+te.join(",")+"]"),ye}function Te(te){var ye,_t=Yn();return ye={urlString:ie},ye[M]=te,ye.headers=_t,ye}function ht(te){return _e._sample.isSampledIn(te)}function er(te,ye,_t,gt){ye===200&&te?_e._onSuccess(te,te[G]):gt&&_e[Kt](te,gt)}function Ct(te,ye,_t,gt){gt===void 0&&(gt=!0);var Tr=function(Da,Ad,Cr){return er(ye,Da,Ad,Cr)},mr=dr(ye),jr=te&&te.sendPOST;return jr&&mr?(gt&&_e._buffer[gi](ye),jr(mr,Tr,!_t)):null}function dr(te){var ye;if(rt(te)&&te[G]>0){var _t=_e[Af].batchPayloads(te),gt=Yn(),Tr=(ye={},ye[M]=_t,ye.urlString=ie,ye.headers=gt,ye.disableXhrSync=Ut,ye.disableFetchKeepAlive=!Dn,ye[Yo]=te,ye);return Tr}return null}function Yn(){try{var te=B||{};return ae(ie)&&(te[vh[6]]=vh[7]),te}catch{}return null}function yn(te){var ye=te?te[G]:0;return _e[Af].size()+ye>de?((!se||se.isOnline())&&_e[Ae](!0,null,10),!0):!1}function $a(te,ye,_t,gt,Tr,mr){var jr=null;if(_e._appId||(jr=_f(mr),jr&&jr.appId&&(_e._appId=jr.appId)),(te<200||te>=300)&&te!==0){if((te===301||te===307||te===308)&&!$o(_t)){_e[Kt](ye,Tr);return}if(se&&!se.isOnline()){if(!gn){var Da=10;L_(ye,Da),St(_e[Dt](),2,40,". Offline - Response Code: ".concat(te,". Offline status: ").concat(!se.isOnline(),". Will retry to send ").concat(ye.length," items."))}return}!gn&&Xm(te)?(L_(ye),St(_e[Dt](),2,40,". Response code "+te+". Will retry to send "+ye[G]+" items.")):_e[Kt](ye,Tr)}else $o(_t),te===206?(jr||(jr=_f(mr)),jr&&!gn?_e[Rn](ye,jr):_e[Kt](ye,Tr)):(v=0,_e[hn](ye,gt))}function $o(te){return j>=10?!1:!Ve(te)&&te!==""&&te!==ie?(ie=te,++j,!0):!1}function nu(te,ye){if(oe)oe(te,!1);else{var _t=Cn&&Cn[so]([3],!0);return Ct(_t,te,ye)}}function Cp(te,ye,_t){var gt=te,Tr=gt&&gt[Yo];if(aa)ar&&ar(Tr,!0),St(_e[Dt](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var mr=[],jr=0;jr<Tr[G];jr++){var Da=Tr[jr],Ad=[Da],Cr=dr(Ad);_t(Cr,ye)?_e._onSuccess(Ad,Ad[G]):mr[sr](Da)}mr[G]>0&&(ar&&ar(mr,!0),St(_e[Dt](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function xp(te){try{if(te&&te[G])return qt(te[0])}catch{}return null}function n_(te,ye){var _t=null;if(rt(te)){for(var gt=te[G],Tr=0;Tr<te[G];Tr++)gt+=te[Tr].item[G];var mr=Cn.getSyncFetchPayload();mr+gt<=CI?_t=2:zs()?_t=3:(_t=1,St(_e[Dt](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var jr=Cn&&Cn[so]([_t],!0);return Ct(jr,te,ye)}return null}function L_(te,ye){if(ye===void 0&&(ye=1),!(!te||te[G]===0)){var _t=_e[Af];_t[Cf](te),v++;for(var gt=0,Tr=te;gt<Tr.length;gt++){var mr=Tr[gt];mr.cnt=mr.cnt||0,mr.cnt++,_t[qe](mr)}Ty(ye),a_()}}function Ty(te){var ye=10,_t;if(v<=1)_t=ye;else{var gt=(Math.pow(2,v)-1)/2,Tr=Math.floor(Math.random()*gt*ye)+1;Tr=te*Tr,_t=Math.max(Math.min(Tr,3600),ye)}var mr=cu()+_t*1e3;S=mr}function a_(){if(!P&&!w){var te=S?Math.max(0,S-cu()):0,ye=Math.max(Qt,te);P=du(function(){P=null,_e[Ae](!0,null,1)},ye)}}function Zm(){P&&P.cancel(),P=null,S=null}function Xm(te){return Ve(Ss)?te===401||te===408||te===429||te===500||te===502||te===503||te===504:Ss[G]&&Ss.indexOf(te)>-1}function hg(){var te="getNotifyMgr";return _e.core[te]?_e.core[te]():_e.core._notificationManager}function _g(te,ye){var _t=hg();if(_t&&_t[_h])try{_t[_h](te,ye)}catch(gt){St(_e[Dt](),1,74,"send request notification failed: "+la(gt),{exception:Wt(gt)})}}function eS(te,ye){var _t=ye.disableInstrumentationKeyValidation,gt=Ve(_t)?!1:_t;if(gt)return!0;var Tr="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",mr=new RegExp(Tr);return mr.test(te)}function tS(){_e[io]=null,_e[Af]=null,_e._appId=null,_e._sample=null,B={},se=null,v=0,S=null,w=!1,P=null,L=null,j=0,Z=0,oe=null,ue=null,ie=null,Ce=null,de=0,Re=!1,st=null,br=!1,Xr=null,Qr=Tv,gn=!1,Ft=null,ja=Tv,Ut=!1,Dn=!1,aa=!1,Oe=null,ar=null,Cn=null,Hr(_e,"_senderConfig",{g:function(){return Et({},J0)}})}}),l}return o.constructEnvelope=function(l,v,S,w){var P;v!==l.iKey&&!Ve(v)?P=Ji(Ji({},l),{iKey:v}):P=l;var L=AI[P.baseType]||G0;return L(S,P,w)},o}(rn),e_="instrumentationKey",mg="connectionString",X0="instrumentationkey",t_="endpointUrl",Q0="ingestionendpoint",M_="userOverrideEndpointUrl",r_,Ey=void 0,RI=(r_={diagnosticLogInterval:il(kI,1e4)},r_[mg]=Ey,r_[t_]=Ey,r_[e_]=Ey,r_.extensionConfig={},r_);function kI(i){return i&&i>0}var OI=function(){function i(o){var l=new dl,v;(Ve(o)||Ve(o[e_])&&Ve(o[mg]))&&fr("Invalid input configuration"),Pa(i,this,function(w){Hr(w,"config",{g:function(){return v}}),P(),w.initialize=P,w.track=S,od(w,l,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function P(){var L=ko(o||{},RI);v=L.cfg,l.addUnloadHook(Du(L,function(){var j=v[mg];if(It(j)){var B=qc(function(ue,ie){is(j,function(Ce){var de=Ce.value,Re=v[e_];if(!Ce.rejected&&de){v[mg]=de;var ke=or(de);Re=ke[X0]||Re}ue(Re)})}),Z=qc(function(ue,ie){is(j,function(Ce){var de=Ce.value,Re=v[t_];if(!Ce.rejected&&de){var ke=or(de),Ge=ke[Q0];Re=Ge?Ge+pv:Re}ue(Re)})});v[e_]=B,v[t_]=v[M_]||Z}if(qt(j)){var oe=or(j),se=oe[Q0];v[t_]=v[M_]?v[M_]:se+pv,v[e_]=oe[X0]||v[e_]}v[t_]=v[M_]?v[M_]:v[t_]})),l.initialize(v,[new Z0])}});function S(w){w&&(w.baseData=w.baseData||{},w.baseType=w.baseType||"EventData"),l.track(w)}}return i.__ieDyn=1,i}();e.AppInsightsCore=dl,e.ApplicationInsights=OI,e.Sender=Z0,e.SeverityLevel=um,e.arrForEach=xt,e.isNullOrUndefined=Ve,e.proxyFunctions=od,e.throwError=fr})});var PS=Rd(Iv=>{"use strict";var gN=Iv&&Iv.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),yN=Iv&&Iv.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),SN=Iv&&Iv.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&gN(t,e,r);return yN(t,e),t};Object.defineProperty(Iv,"__esModule",{value:!0});Iv.appInsightsClientFactory=void 0;var bN=DS(),EN=qy(),TN=async(e,t,r,n,s)=>{let c;try{let b=await Promise.resolve().then(()=>SN(xS())),N={};if(n){let ne={alwaysUseXhrOverride:!0,httpXHROverride:n};N[bN.BreezeChannelIdentifier]=ne}let k;e.startsWith("InstrumentationKey=")||(k=e);let $=k?{instrumentationKey:k}:{connectionString:e};c=new b.ApplicationInsights({...$,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:N})}catch(b){return Promise.reject(b)}return{logEvent:(b,N)=>{let k={...N==null?void 0:N.properties,...N==null?void 0:N.measurements};s!=null&&s.length&&EN.TelemetryUtil.applyReplacements(k,s),c==null||c.track({name:b,data:k,baseType:"EventData",ext:{user:{id:t,authId:t},app:{sesId:r}},baseData:{name:b,properties:N==null?void 0:N.properties,measurements:N==null?void 0:N.measurements}})},flush:async()=>{c==null||c.flush(!1)},dispose:async()=>new Promise(N=>{c==null||c.unload(!0,()=>{N(),c=void 0},1e3)})}};Iv.appInsightsClientFactory=TN});var AS=Rd(Ag=>{"use strict";Object.defineProperty(Ag,"__esModule",{value:!0});Ag.BaseTelemetryReporter=void 0;var By=class{constructor(t,r,n){this.telemetrySender=t,this.vscodeAPI=r,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(t,r,n,s){s?this.telemetrySender.sendEventData(t,{properties:r,measurements:n}):this.telemetryLogger.logUsage(t,{properties:r,measurements:n})}sendTelemetryEvent(t,r,n){this.internalSendTelemetryEvent(t,r,n,!1)}sendRawTelemetryEvent(t,r,n){let s={...r};for(let c of Object.keys(s??{})){let h=s[c];typeof c=="string"&&h!==void 0&&(s[c]=new this.vscodeAPI.TelemetryTrustedValue(typeof h=="string"?h:h.value))}this.sendTelemetryEvent(t,s,n)}sendDangerousTelemetryEvent(t,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(t,r,n,!0)}internalSendTelemetryErrorEvent(t,r,n,s){s?this.telemetrySender.sendEventData(t,{properties:r,measurements:n}):this.telemetryLogger.logError(t,{properties:r,measurements:n})}sendTelemetryErrorEvent(t,r,n){this.internalSendTelemetryErrorEvent(t,r,n,!1)}sendDangerousTelemetryErrorEvent(t,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(t,r,n,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(t=>t.dispose()))}};Ag.BaseTelemetryReporter=By});var RS=Rd(Rg=>{"use strict";Object.defineProperty(Rg,"__esModule",{value:!0});Rg.BaseTelemetrySender=void 0;var dm;(function(e){e[e.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",e[e.INSTANTIATING=1]="INSTANTIATING",e[e.INSTANTIATED=2]="INSTANTIATED"})(dm||(dm={}));var zy=class{constructor(t,r){this._instantiationStatus=dm.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=r,this._key=t}sendEventData(t,r){if(!this._telemetryClient){this._instantiationStatus!==dm.INSTANTIATED&&this._eventQueue.push({eventName:t,data:r});return}this._telemetryClient.logEvent(t,r)}sendErrorData(t,r){if(!this._telemetryClient){this._instantiationStatus!==dm.INSTANTIATED&&this._exceptionQueue.push({exception:t,data:r});return}let n={stack:t.stack,message:t.message,name:t.name};if(r){let s=r.properties||r;r.properties={...s,...n}}else r={properties:n};this._telemetryClient.logEvent("unhandlederror",r)}async flush(){var t;return(t=this._telemetryClient)==null?void 0:t.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:t,data:r})=>this.sendEventData(t,r)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:t,data:r})=>this.sendErrorData(t,r)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===dm.NOT_INSTANTIATED&&(this._instantiationStatus=dm.INSTANTIATING,this._clientFactory(this._key).then(t=>{this._telemetryClient=t,this._instantiationStatus=dm.INSTANTIATED,this._flushQueues()}).catch(t=>{console.error(t),this._instantiationStatus=dm.INSTANTIATED}))}};Rg.BaseTelemetrySender=zy});var MS=Rd(pm=>{"use strict";var wN=pm&&pm.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),IN=pm&&pm.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Hy=pm&&pm.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&wN(t,e,r);return IN(t,e),t};Object.defineProperty(pm,"__esModule",{value:!0});var NN=Hy(require("https")),Gy=Hy(require("os")),kg=Hy(require("vscode")),DN=IS(),CN=PS(),xN=AS(),PN=RS(),kS=qy();function OS(){return{sendPOST:(t,r)=>{let n={method:"POST",headers:{...t.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(t.data)}};try{let s=NN.request(t.urlString,n,c=>{c.on("data",function(h){r(c.statusCode??200,c.headers,h.toString())}),c.on("error",function(){r(0,{})})});s.write(t.data,c=>{c&&r(0,{})}),s.end()}catch{r(0,{})}}}}var Vy=class extends xN.BaseTelemetryReporter{constructor(t,r){let n=h=>(0,CN.appInsightsClientFactory)(h,kg.env.machineId,kg.env.sessionId,OS(),r);kS.TelemetryUtil.shouldUseOneDataSystemSDK(t)&&(n=h=>(0,DN.oneDataSystemClientFactory)(h,kg,OS()));let s={release:Gy.release(),platform:Gy.platform(),architecture:Gy.arch()},c=new PN.BaseTelemetrySender(t,n);if(t&&t.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(c,kg,{additionalCommonProperties:kS.TelemetryUtil.getAdditionalCommonProperties(s)})}};pm.default=Vy});var Mb=Rd((MO,c_)=>{"use strict";var nD=typeof Buffer<"u",Ab=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,Rb=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function kb(e,t,r){r==null&&t!==null&&typeof t=="object"&&(r=t,t=void 0),nD&&Buffer.isBuffer(e)&&(e=e.toString()),e&&e.charCodeAt(0)===65279&&(e=e.slice(1));let n=JSON.parse(e,t);if(n===null||typeof n!="object")return n;let s=r&&r.protoAction||"error",c=r&&r.constructorAction||"error";if(s==="ignore"&&c==="ignore")return n;if(s!=="ignore"&&c!=="ignore"){if(Ab.test(e)===!1&&Rb.test(e)===!1)return n}else if(s!=="ignore"&&c==="ignore"){if(Ab.test(e)===!1)return n}else if(Rb.test(e)===!1)return n;return Ob(n,{protoAction:s,constructorAction:c,safe:r&&r.safe})}function Ob(e,{protoAction:t="error",constructorAction:r="error",safe:n}={}){let s=[e];for(;s.length;){let c=s;s=[];for(let h of c){if(t!=="ignore"&&Object.prototype.hasOwnProperty.call(h,"__proto__")){if(n===!0)return null;if(t==="error")throw new SyntaxError("Object contains forbidden prototype property");delete h.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(h,"constructor")&&Object.prototype.hasOwnProperty.call(h.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete h.constructor}for(let b in h){let N=h[b];N&&typeof N=="object"&&s.push(N)}}}return e}function e0(e,t,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return kb(e,t,r)}finally{Error.stackTraceLimit=n}}function aD(e,t){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return kb(e,t,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}c_.exports=e0;c_.exports.default=e0;c_.exports.parse=e0;c_.exports.safeParse=aD;c_.exports.scan=Ob});var gk={};Cy(gk,{activate:()=>hk,deactivate:()=>_k});module.exports=qI(gk);var vI=require("vscode");var Be={};var zS=require("vscode");var Jy={};Cy(Jy,{action:()=>BI,diffView:()=>kN,storeApiKey:()=>zI,work:()=>ON});function BI(){return e=>{typeof e=="function"&&e()}}var Py=require("vscode");function zI(){return async(e,t)=>{let r=await Py.window.showInputBox({prompt:`Enter the ${t}`});r&&(await Be.ext.secrets.store(e,r),Py.window.showInformationMessage(`${t} stored successfully`))}}var _l=require("vscode");var Es=require("vscode"),gS=xy(vS());var Fy=require("crypto");var uN=128,Eh,o_;function cN(e){!Eh||Eh.length<e?(Eh=Buffer.allocUnsafe(e*uN),Fy.webcrypto.getRandomValues(Eh),o_=0):o_+e>Eh.length&&(Fy.webcrypto.getRandomValues(Eh),o_=0),o_+=e}function lN(e){return cN(e|=0),Eh.subarray(o_-e,o_)}function fN(e,t,r){let n=(2<<31-Math.clz32(e.length-1|1))-1,s=Math.ceil(1.6*n*t/e.length);return(c=t)=>{let h="";for(;;){let b=r(s),N=s;for(;N--;)if(h+=e[b[N]&n]||"",h.length>=c)return h}}}function mS(e,t=21){return fN(e,t,lN)}var kd=require("vscode"),Uy="multicoder",hS,_S,Eg=(_S=(hS=kd.workspace.workspaceFolders)==null?void 0:hS[0])==null?void 0:_S.uri,Tg=new Map;function dN(e){return e.path.split("/").pop()}function Pp(e){let t=kd.workspace.getWorkspaceFolder(e);if(t){let c="";return String(t.uri)!==String(e)&&(c=kd.workspace.asRelativePath(e,!1).replace(/\\/g,"/")),String(t.uri)!==String(Eg)&&(c=".folders/"+dN(t.uri)+(c?"/"+c:"")),c||(c="."),c}if(e.scheme==="untitled")return".untitled/"+e.path;let r=e.path.split("/"),n=r.pop(),s=r.pop();return Tg.has(s)||Tg.set(s,kd.Uri.joinPath(e,"../")),".external/"+s+"/"+n}function _a(e){return(e=="."||e=="./")&&(e=""),e=e.startsWith("/")?e:"/"+e,kd.Uri.from({scheme:Uy,path:e})}function kf(e){let[t,r,...n]=e.path.split("/");if(r==".documents")return e.with({scheme:"file"});if(r==".untitled")return kd.Uri.from({scheme:"untitled",path:n.join("/")});if(r==".external"){let s=n.shift();if(Tg.has(s))return kd.Uri.joinPath(Tg.get(s),n.join("/"));throw new Error("Unknown external directory: "+s)}if(r==".folders"){let s=n.shift();for(let c of kd.workspace.workspaceFolders||[])if(c.uri.path.endsWith("/"+s))return kd.Uri.joinPath(c.uri,n.join("/"));throw new Error("Unknown workspace folder: "+s)}if(Eg)return e.path?kd.Uri.joinPath(Eg,e.path):Eg;throw new Error("Cannot find source Uri")}var{fs:jy}=Es.workspace,pN=mS("1234567890abcdef",10);function yS(){return pN()}function Yy(){let e=[];for(let t of Es.window.tabGroups.all.flatMap(r=>r.tabs))t.input instanceof Es.TabInputText&&e.push(t.input.uri);return e}async function Ap(e){return new TextDecoder().decode(await jy.readFile(e))}async function wg(e,t){return await jy.writeFile(e,new TextEncoder().encode(t))}async function Ig(e=""){let t=Es.workspace.workspaceFolders;if(!(t!=null&&t.length))return e?[]:Yy().map(h=>({name:Pp(h).split("/").pop(),path:Pp(h),uri:h,isFile:!0,isDirectory:!1,isSymbolicLink:!1}));let r=t[0],n=Es.Uri.joinPath(r.uri,e);if(t.length>1){let[h,...b]=e.split("/");if(!h)return t.map(({name:N,uri:k})=>({name:N,path:N,uri:k,isFile:!1,isDirectory:!0,isSymbolicLink:!1}));if(r=t.find(N=>N.name==h),!r)return[];n=Es.Uri.joinPath(r.uri,...b)}let s=(0,gS.default)().add([".git",".gitignore"]);try{s.add(await Ap(Es.Uri.joinPath(r.uri,".gitignore")))}catch{}let c=(await jy.readDirectory(n)).map(([h,b])=>({name:h,path:Pp(Es.Uri.joinPath(n,h)),uri:Es.Uri.joinPath(n,h),isFile:!!(b&Es.FileType.File),isDirectory:!!(b&Es.FileType.Directory),isSymbolicLink:!!(b&Es.FileType.SymbolicLink)})).filter(({uri:h})=>!s.ignores(Es.workspace.asRelativePath(h,!1)));return c.sort((h,b)=>h.isFile&&b.isDirectory?1:h.isDirectory&&b.isFile?-1:h.name.localeCompare(b.name)),c}var LS=xy(MS());var AN="InstrumentationKey=4a0957be-8ce1-4335-8aa5-1fb742355aa5;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com/;LiveEndpoint=https://westeurope.livediagnostics.monitor.azure.com/;ApplicationId=b0fce7b4-deeb-43b7-aa17-e5024c6c504c";function RN(e){return{logUsage(t,r){e.sendTelemetryEvent(t,r)},logError(t,r={}){if(t&&typeof t=="object"){let{message:n,stack:s}=t,c=String(t.name||"error").toLowerCase(),h=String(t);e.sendTelemetryErrorEvent(c,{...t,...r,message:n,stack:s,text:h})}else e.sendTelemetryErrorEvent(String(t).toLowerCase().replace(/\W+/g,"-"),r)}}}function FS(){let e=new LS.default(AN),t=RN(e);Be.telemetry=t,t.logUsage("activated"),Be.ext.subscriptions.push(e)}var US=require("vscode");function jS(){let e=US.window.createOutputChannel("Multicoder",{log:!0});function t(n){if(!n||typeof n!="object")return;let{event:s,...c}=n,h=Object.entries(c).map(([b,N])=>`
    ${b}: ${N}`);h.length&&e.trace(h.join(""))}function r(){let n={};return Be.model&&(n.modelId=Be.model.modelId,n.modelProvider=Be.model.provider),n}Be.log={error(n,s={}){e.error(n),Be.telemetry.logError(n,{...r(),...s}),t(s)},warn(n,s={}){e.warn((s!=null&&s.event?`[${s.event}] `:"")+n),Be.telemetry.logUsage((s==null?void 0:s.event)||"warning",{text:n,...r(),...s}),t(s)},info(n,s={}){e.info((s!=null&&s.event?`[${s.event}] `:"")+n),Be.telemetry.logUsage((s==null?void 0:s.event)||"info",{text:n,...r(),...s}),t(s)}},Be.ext.subscriptions.push(e)}var ga=require("vscode");var{fs:U_}=ga.workspace,vm=new Map,Th=new Map;function $S(){let e=new Wy,t=ga.workspace.registerFileSystemProvider(Uy,e,{isCaseSensitive:!0,isReadonly:!1});Be.ext.subscriptions.push(t)}function Of(e){return e.authority+e.path}async function YS(e){try{return await U_.stat(e)}catch{}}function Ky(e){let t=e?ga.FileType.Directory:ga.FileType.File,r=Date.now();return{type:t,ctime:r,mtime:r,size:0,content:null}}var Wy=class{async stat(t){let r=vm.get(Of(t));if(!r&&t.path.startsWith("/.documents"))throw ga.FileSystemError.FileNotFound(t);if(!r)return await U_.stat(kf(t));if(!r.type)throw ga.FileSystemError.FileNotFound(t);return r}async readFile(t){let r=vm.get(Of(t));if(!r&&t.path.startsWith("/.documents"))throw ga.FileSystemError.FileNotFound(t);if(!r)return await U_.readFile(kf(t));if(r.type&ga.FileType.Directory)throw ga.FileSystemError.FileIsADirectory(t);if(!r.type)throw ga.FileSystemError.FileNotFound(t);return r.content}async writeFile(t,r,n){let s=vm.get(Of(t)),c=!!(s!=null&&s.type);if(!s&&!t.path.startsWith("/.documents")&&(s=await YS(kf(t)),c=!!s),s||(s=Ky()),s.type&ga.FileType.Directory)throw ga.FileSystemError.FileIsADirectory(t);if(!c&&!n.create)throw ga.FileSystemError.FileNotFound(t);if(c&&n.create&&!n.overwrite)throw ga.FileSystemError.FileExists(t);s.mtime=Date.now(),s.content=r,s.size=r.length,vm.set(Of(t),s),Th.has(Of(t))&&this._emitter.fire([{type:ga.FileChangeType.Changed,uri:t}])}async readDirectory(t){let r=new Map,n=null;try{if(!t.path.startsWith("/.documents")){let s=kf(t),c=await U_.stat(s),h=await U_.readDirectory(kf(t));for(let[b,N]of h)r.set(b,N)}}catch(s){n=s}for(let[s,c]of vm){let h=s.split("/"),b=h.pop();h.join("/")===t.path&&(c.type?r.set(b,c.type):r.has(b)&&r.delete(b))}if(n&&r.size==0&&!t.path.startsWith("/.documents"))throw n;return Array.from(r.entries())}async delete(t,r){let n=vm.get(Of(t)),s=!!(n!=null&&n.type);if(!n&&!t.path.startsWith("/.documents")&&(n=await YS(kf(t)),s=!!n),!s)throw ga.FileSystemError.FileNotFound(t);n||(n=Ky()),n.type=0,n.content=null,n.size=0,vm.set(Of(t),n),Th.has(Of(t))&&this._emitter.fire([{type:ga.FileChangeType.Deleted,uri:t}])}rename(t,r,n){}async createDirectory(t){let r=Ky(!0);vm.set(Of(t),r),Th.has(Of(t))&&this._emitter.fire([{type:ga.FileChangeType.Created,uri:t}])}_emitter=new ga.EventEmitter;onDidChangeFile=this._emitter.event;watch(t,r){let n={},s=Th.get(Of(t))||new Set;return s.add(n),Th.set(Of(t),s),new ga.Disposable(()=>{s.delete(n),s.size||Th.set(Of(t),null)})}};function qS(){vm=new Map,Th=new Map}function kN(){return async(e,t)=>{var we,ge,ve;let r=_a(e),n=kf(r),s=e.split("/").pop();try{await _l.workspace.fs.stat(n)}catch{n=n.with({scheme:"untitled"})}await _l.workspace.openTextDocument(n),await _l.commands.executeCommand("vscode.diff",n,r,`${s} - proposed changes`);let c=(ge=(we=Be.shared)==null?void 0:we.edits)==null?void 0:ge.find(ce=>ce.id===t),h=_l.window.activeTextEditor,b=h==null?void 0:h.document,N=(ve=b==null?void 0:b.getText())==null?void 0:ve.replace(/\r\n/g,`
`);if(!c||!c.search||!h||!b||b.uri.path!==r.path)return;let k=N.indexOf(c.search);if(k==-1)return;let $=N.slice(0,k).split(`
`).length-1,ne=c.search.split(`
`).length,le=new _l.Position($,0);h.selection=new _l.Selection(le,le),h.revealRange(new _l.Range(le,new _l.Position($+ne,0)))}}var Qk=require("vscode");async function BS(){}function ON(){return()=>{BS()}}function GS(){Object.entries(Jy).forEach(([e,t])=>{let r=zS.commands.registerCommand(`multicoder.${e}`,t());Be.ext.subscriptions.push(r)})}var P_=require("vscode");var VS="vercel.ai.error",MN=Symbol.for(VS),HS,LN=class KS extends Error{constructor({name:t,message:r,cause:n}){super(r),this[HS]=!0,this.name=t,this.cause=n}static isInstance(t){return KS.hasMarker(t,VS)}static hasMarker(t,r){let n=Symbol.for(r);return t!=null&&typeof t=="object"&&n in t&&typeof t[n]=="boolean"&&t[n]===!0}};HS=MN;var kt=LN,WS="AI_APICallError",JS=`vercel.ai.error.${WS}`,FN=Symbol.for(JS),ZS,gl=class extends kt{constructor({message:e,url:t,requestBodyValues:r,statusCode:n,responseHeaders:s,responseBody:c,cause:h,isRetryable:b=n!=null&&(n===408||n===409||n===429||n>=500),data:N}){super({name:WS,message:e,cause:h}),this[ZS]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=s,this.responseBody=c,this.isRetryable=b,this.data=N}static isInstance(e){return kt.hasMarker(e,JS)}};ZS=FN;var XS="AI_EmptyResponseBodyError",QS=`vercel.ai.error.${XS}`,UN=Symbol.for(QS),eb,Xy=class extends kt{constructor({message:e="Empty response body"}={}){super({name:XS,message:e}),this[eb]=!0}static isInstance(e){return kt.hasMarker(e,QS)}};eb=UN;function Qm(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var tb="AI_InvalidArgumentError",rb=`vercel.ai.error.${tb}`,jN=Symbol.for(rb),nb,ab=class extends kt{constructor({message:e,cause:t,argument:r}){super({name:tb,message:e,cause:t}),this[nb]=!0,this.argument=r}static isInstance(e){return kt.hasMarker(e,rb)}};nb=jN;var ib="AI_InvalidPromptError",ob=`vercel.ai.error.${ib}`,YN=Symbol.for(ob),sb,Nv=class extends kt{constructor({prompt:e,message:t,cause:r}){super({name:ib,message:`Invalid prompt: ${t}`,cause:r}),this[sb]=!0,this.prompt=e}static isInstance(e){return kt.hasMarker(e,ob)}};sb=YN;var ub="AI_InvalidResponseDataError",cb=`vercel.ai.error.${ub}`,$N=Symbol.for(cb),lb,j_=class extends kt{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:ub,message:t}),this[lb]=!0,this.data=e}static isInstance(e){return kt.hasMarker(e,cb)}};lb=$N;var fb="AI_JSONParseError",db=`vercel.ai.error.${fb}`,qN=Symbol.for(db),pb,s_=class extends kt{constructor({text:e,cause:t}){super({name:fb,message:`JSON parsing failed: Text: ${e}.
Error message: ${Qm(t)}`,cause:t}),this[pb]=!0,this.text=e}static isInstance(e){return kt.hasMarker(e,db)}};pb=qN;var vb="AI_LoadAPIKeyError",mb=`vercel.ai.error.${vb}`,BN=Symbol.for(mb),hb,u_=class extends kt{constructor({message:e}){super({name:vb,message:e}),this[hb]=!0}static isInstance(e){return kt.hasMarker(e,mb)}};hb=BN;var zN="AI_LoadSettingError",GN=`vercel.ai.error.${zN}`,VN=Symbol.for(GN),HN;HN=VN;var KN="AI_NoContentGeneratedError",WN=`vercel.ai.error.${KN}`,JN=Symbol.for(WN),ZN;ZN=JN;var _b="AI_NoSuchModelError",gb=`vercel.ai.error.${_b}`,XN=Symbol.for(gb),yb,Qy=class extends kt{constructor({errorName:e=_b,modelId:t,modelType:r,message:n=`No such ${r}: ${t}`}){super({name:e,message:n}),this[yb]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return kt.hasMarker(e,gb)}};yb=XN;var Sb="AI_TooManyEmbeddingValuesForCallError",bb=`vercel.ai.error.${Sb}`,QN=Symbol.for(bb),Eb,Tb=class extends kt{constructor(e){super({name:Sb,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[Eb]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return kt.hasMarker(e,bb)}};Eb=QN;var wb="AI_TypeValidationError",Ib=`vercel.ai.error.${wb}`,eD=Symbol.for(Ib),Nb,tD=class Zy extends kt{constructor({value:t,cause:r}){super({name:wb,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${Qm(r)}`,cause:r}),this[Nb]=!0,this.value=t}static isInstance(t){return kt.hasMarker(t,Ib)}static wrap({value:t,cause:r}){return Zy.isInstance(r)&&r.value===t?r:new Zy({value:t,cause:r})}};Nb=eD;var mm=tD,Db="AI_UnsupportedFunctionalityError",Cb=`vercel.ai.error.${Db}`,rD=Symbol.for(Cb),xb,$n=class extends kt{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:Db,message:t}),this[xb]=!0,this.functionality=e}static isInstance(e){return kt.hasMarker(e,Cb)}};xb=rD;var Pb=(e,t=21)=>(r=t)=>{let n="",s=r|0;for(;s--;)n+=e[Math.random()*e.length|0];return n};var jg=xy(Mb(),1);var iD=Object.defineProperty,oD=(e,t,r)=>t in e?iD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Og=(e,t,r)=>oD(e,typeof t!="symbol"?t+"":t,r),Mg=class extends Error{constructor(t,r){super(t),Og(this,"type"),Og(this,"field"),Og(this,"value"),Og(this,"line"),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function t0(e){}function Lb(e){let{onEvent:t=t0,onError:r=t0,onRetry:n=t0,onComment:s}=e,c="",h=!0,b,N="",k="";function $(ve){let ce=h?ve.replace(/^\xEF\xBB\xBF/,""):ve,[Pe,Ke]=sD(`${c}${ce}`);for(let ut of Pe)ne(ut);c=Ke,h=!1}function ne(ve){if(ve===""){we();return}if(ve.startsWith(":")){s&&s(ve.slice(ve.startsWith(": ")?2:1));return}let ce=ve.indexOf(":");if(ce!==-1){let Pe=ve.slice(0,ce),Ke=ve[ce+1]===" "?2:1,ut=ve.slice(ce+Ke);le(Pe,ut,ve);return}le(ve,"",ve)}function le(ve,ce,Pe){switch(ve){case"event":k=ce;break;case"data":N=`${N}${ce}
`;break;case"id":b=ce.includes("\0")?void 0:ce;break;case"retry":/^\d+$/.test(ce)?n(parseInt(ce,10)):r(new Mg(`Invalid \`retry\` value: "${ce}"`,{type:"invalid-retry",value:ce,line:Pe}));break;default:r(new Mg(`Unknown field "${ve.length>20?`${ve.slice(0,20)}\u2026`:ve}"`,{type:"unknown-field",field:ve,value:ce,line:Pe}));break}}function we(){N.length>0&&t({id:b,event:k||void 0,data:N.endsWith(`
`)?N.slice(0,-1):N}),b=void 0,N="",k=""}function ge(ve={}){c&&ve.consume&&ne(c),b=void 0,N="",k="",c=""}return{feed:$,reset:ge}}function sD(e){let t=[],r="",n=e.length;for(let s=0;s<n;s++){let c=e[s];c==="\r"&&e[s+1]===`
`?(t.push(r),r="",s++):c==="\r"||c===`
`?(t.push(r),r=""):r+=c}return[t,r]}var Lg=class extends TransformStream{constructor({onError:t,onRetry:r,onComment:n}={}){let s;super({start(c){s=Lb({onEvent:h=>{c.enqueue(h)},onError(h){t==="terminate"?c.error(h):typeof t=="function"&&t(h)},onRetry:r,onComment:n})},transform(c){s.feed(c)}})}};function Od(...e){return e.reduce((t,r)=>({...t,...r??{}}),{})}function Fb(e){return new ReadableStream({async pull(t){try{let{value:r,done:n}=await e.next();n?t.close():t.enqueue(r)}catch(r){t.error(r)}},cancel(){}})}function Fg(e){let t={};return e.headers.forEach((r,n)=>{t[n]=r}),t}var Rp=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let s=Pb(r,t);if(e==null)return s;if(r.includes(n))throw new ab({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return c=>`${e}${n}${s(c)}`},hm=Rp();function Ub(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function Y_(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function Ug({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:n}){if(typeof e=="string")return e;if(e!=null)throw new u_({message:`${n} API key must be a string.`});if(typeof process>"u")throw new u_({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(e=process.env[t],e==null)throw new u_({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new u_({message:`${n} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var $_=Symbol.for("vercel.ai.validator");function uD(e){return{[$_]:!0,validate:e}}function cD(e){return typeof e=="object"&&e!==null&&$_ in e&&e[$_]===!0&&"validate"in e}function lD(e){return cD(e)?e:fD(e)}function fD(e){return uD(t=>{let r=e.safeParse(t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}})}function dD({value:e,schema:t}){let r=eh({value:e,schema:t});if(!r.success)throw mm.wrap({value:e,cause:r.error});return r.value}function eh({value:e,schema:t}){let r=lD(t);try{if(r.validate==null)return{success:!0,value:e};let n=r.validate(e);return n.success?n:{success:!1,error:mm.wrap({value:e,cause:n.error})}}catch(n){return{success:!1,error:mm.wrap({value:e,cause:n})}}}function pD({text:e,schema:t}){try{let r=jg.default.parse(e);return t==null?r:dD({value:r,schema:t})}catch(r){throw s_.isInstance(r)||mm.isInstance(r)?r:new s_({text:e,cause:r})}}function Dv({text:e,schema:t}){try{let r=jg.default.parse(e);return t==null?{success:!0,value:r}:eh({value:r,schema:t})}catch(r){return{success:!1,error:s_.isInstance(r)?r:new s_({text:e,cause:r})}}}function r0(e){try{return jg.default.parse(e),!0}catch{return!1}}function vD(e){return Object.fromEntries(Object.entries(e).filter(([t,r])=>r!=null))}var mD=()=>globalThis.fetch,Mf=async({url:e,headers:t,body:r,failedResponseHandler:n,successfulResponseHandler:s,abortSignal:c,fetch:h})=>hD({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:s,abortSignal:c,fetch:h}),hD=async({url:e,headers:t={},body:r,successfulResponseHandler:n,failedResponseHandler:s,abortSignal:c,fetch:h=mD()})=>{try{let b=await h(e,{method:"POST",headers:vD(t),body:r.content,signal:c}),N=Fg(b);if(!b.ok){let k;try{k=await s({response:b,url:e,requestBodyValues:r.values})}catch($){throw Y_($)||gl.isInstance($)?$:new gl({message:"Failed to process error response",cause:$,statusCode:b.status,url:e,responseHeaders:N,requestBodyValues:r.values})}throw k.value}try{return await n({response:b,url:e,requestBodyValues:r.values})}catch(k){throw k instanceof Error&&(Y_(k)||gl.isInstance(k))?k:new gl({message:"Failed to process successful response",cause:k,statusCode:b.status,url:e,responseHeaders:N,requestBodyValues:r.values})}}catch(b){if(Y_(b))throw b;if(b instanceof TypeError&&b.message==="fetch failed"){let N=b.cause;if(N!=null)throw new gl({message:`Cannot connect to API: ${N.message}`,cause:N,url:e,requestBodyValues:r.values,isRetryable:!0})}throw b}};async function jb(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var Yg=({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:n,url:s,requestBodyValues:c})=>{let h=await n.text(),b=Fg(n);if(h.trim()==="")return{responseHeaders:b,value:new gl({message:n.statusText,url:s,requestBodyValues:c,statusCode:n.status,responseHeaders:b,responseBody:h,isRetryable:r==null?void 0:r(n)})};try{let N=pD({text:h,schema:e});return{responseHeaders:b,value:new gl({message:t(N),url:s,requestBodyValues:c,statusCode:n.status,responseHeaders:b,responseBody:h,data:N,isRetryable:r==null?void 0:r(n,N)})}}catch{return{responseHeaders:b,value:new gl({message:n.statusText,url:s,requestBodyValues:c,statusCode:n.status,responseHeaders:b,responseBody:h,isRetryable:r==null?void 0:r(n)})}}},l_=e=>async({response:t})=>{let r=Fg(t);if(t.body==null)throw new Xy({});return{responseHeaders:r,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new Lg).pipeThrough(new TransformStream({transform({data:n},s){n!=="[DONE]"&&s.enqueue(Dv({text:n,schema:e}))}}))}};var Cv=e=>async({response:t,url:r,requestBodyValues:n})=>{let s=await t.text(),c=Dv({text:s,schema:e}),h=Fg(t);if(!c.success)throw new gl({message:"Invalid JSON response",cause:c.error,statusCode:t.status,responseHeaders:h,responseBody:s,url:r,requestBodyValues:n});return{responseHeaders:h,value:c.value}},{btoa:_D,atob:gD}=globalThis;function Yb(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=gD(t);return Uint8Array.from(r,n=>n.codePointAt(0))}function wh(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return _D(t)}function $g(e){return e==null?void 0:e.replace(/\/$/,"")}var dn;(function(e){e.assertEqual=s=>s;function t(s){}e.assertIs=t;function r(s){throw new Error}e.assertNever=r,e.arrayToEnum=s=>{let c={};for(let h of s)c[h]=h;return c},e.getValidEnumValues=s=>{let c=e.objectKeys(s).filter(b=>typeof s[s[b]]!="number"),h={};for(let b of c)h[b]=s[b];return e.objectValues(h)},e.objectValues=s=>e.objectKeys(s).map(function(c){return s[c]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let c=[];for(let h in s)Object.prototype.hasOwnProperty.call(s,h)&&c.push(h);return c},e.find=(s,c)=>{for(let h of s)if(c(h))return h},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,c=" | "){return s.map(h=>typeof h=="string"?`'${h}'`:h).join(c)}e.joinValues=n,e.jsonStringifyReplacer=(s,c)=>typeof c=="bigint"?c.toString():c})(dn||(dn={}));var a0;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(a0||(a0={}));var yt=dn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),gm=e=>{switch(typeof e){case"undefined":return yt.undefined;case"string":return yt.string;case"number":return isNaN(e)?yt.nan:yt.number;case"boolean":return yt.boolean;case"function":return yt.function;case"bigint":return yt.bigint;case"symbol":return yt.symbol;case"object":return Array.isArray(e)?yt.array:e===null?yt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?yt.promise:typeof Map<"u"&&e instanceof Map?yt.map:typeof Set<"u"&&e instanceof Set?yt.set:typeof Date<"u"&&e instanceof Date?yt.date:yt.object;default:return yt.unknown}},je=dn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),yD=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),Tc=class e extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){let r=t||function(c){return c.message},n={_errors:[]},s=c=>{for(let h of c.issues)if(h.code==="invalid_union")h.unionErrors.map(s);else if(h.code==="invalid_return_type")s(h.returnTypeError);else if(h.code==="invalid_arguments")s(h.argumentsError);else if(h.path.length===0)n._errors.push(r(h));else{let b=n,N=0;for(;N<h.path.length;){let k=h.path[N];N===h.path.length-1?(b[k]=b[k]||{_errors:[]},b[k]._errors.push(r(h))):b[k]=b[k]||{_errors:[]},b=b[k],N++}}};return s(this),n}static assert(t){if(!(t instanceof e))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,dn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){let r={},n=[];for(let s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Tc.create=e=>new Tc(e);var p_=(e,t)=>{let r;switch(e.code){case je.invalid_type:e.received===yt.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case je.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,dn.jsonStringifyReplacer)}`;break;case je.unrecognized_keys:r=`Unrecognized key(s) in object: ${dn.joinValues(e.keys,", ")}`;break;case je.invalid_union:r="Invalid input";break;case je.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${dn.joinValues(e.options)}`;break;case je.invalid_enum_value:r=`Invalid enum value. Expected ${dn.joinValues(e.options)}, received '${e.received}'`;break;case je.invalid_arguments:r="Invalid function arguments";break;case je.invalid_return_type:r="Invalid function return type";break;case je.invalid_date:r="Invalid date";break;case je.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:dn.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case je.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case je.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case je.custom:r="Invalid input";break;case je.invalid_intersection_types:r="Intersection results could not be merged";break;case je.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case je.not_finite:r="Number must be finite";break;default:r=t.defaultError,dn.assertNever(e)}return{message:r}},Bb=p_;function SD(e){Bb=e}function qg(){return Bb}var Bg=e=>{let{data:t,path:r,errorMaps:n,issueData:s}=e,c=[...r,...s.path||[]],h={...s,path:c};if(s.message!==void 0)return{...s,path:c,message:s.message};let b="",N=n.filter(k=>!!k).slice().reverse();for(let k of N)b=k(h,{data:t,defaultError:b}).message;return{...s,path:c,message:b}},bD=[];function it(e,t){let r=qg(),n=Bg({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===p_?void 0:p_].filter(s=>!!s)});e.common.issues.push(n)}var Lu=class e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){let n=[];for(let s of r){if(s.status==="aborted")return _r;s.status==="dirty"&&t.dirty(),n.push(s.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){let n=[];for(let s of r){let c=await s.key,h=await s.value;n.push({key:c,value:h})}return e.mergeObjectSync(t,n)}static mergeObjectSync(t,r){let n={};for(let s of r){let{key:c,value:h}=s;if(c.status==="aborted"||h.status==="aborted")return _r;c.status==="dirty"&&t.dirty(),h.status==="dirty"&&t.dirty(),c.value!=="__proto__"&&(typeof h.value<"u"||s.alwaysSet)&&(n[c.value]=h.value)}return{status:t.value,value:n}}},_r=Object.freeze({status:"aborted"}),d_=e=>({status:"dirty",value:e}),wc=e=>({status:"valid",value:e}),i0=e=>e.status==="aborted",o0=e=>e.status==="dirty",Ih=e=>e.status==="valid",z_=e=>typeof Promise<"u"&&e instanceof Promise;function zg(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function zb(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}var Rt;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Rt||(Rt={}));var q_,B_,Md=class{constructor(t,r,n,s){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},$b=(e,t)=>{if(Ih(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Tc(e.common.issues);return this._error=r,this._error}}};function Rr(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:s}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(h,b)=>{var N,k;let{message:$}=e;return h.code==="invalid_enum_value"?{message:$??b.defaultError}:typeof b.data>"u"?{message:(N=$??n)!==null&&N!==void 0?N:b.defaultError}:h.code!=="invalid_type"?{message:b.defaultError}:{message:(k=$??r)!==null&&k!==void 0?k:b.defaultError}},description:s}}var kr=class{get description(){return this._def.description}_getType(t){return gm(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:gm(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Lu,ctx:{common:t.parent.common,data:t.data,parsedType:gm(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let r=this._parse(t);if(z_(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){let r=this._parse(t);return Promise.resolve(r)}parse(t,r){let n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){var n;let s={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:gm(t)},c=this._parseSync({data:t,path:s.path,parent:s});return $b(s,c)}"~validate"(t){var r,n;let s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:gm(t)};if(!this["~standard"].async)try{let c=this._parseSync({data:t,path:[],parent:s});return Ih(c)?{value:c.value}:{issues:s.common.issues}}catch(c){!((n=(r=c==null?void 0:c.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:s}).then(c=>Ih(c)?{value:c.value}:{issues:s.common.issues})}async parseAsync(t,r){let n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){let n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:gm(t)},s=this._parse({data:t,path:n.path,parent:n}),c=await(z_(s)?s:Promise.resolve(s));return $b(n,c)}refine(t,r){let n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,c)=>{let h=t(s),b=()=>c.addIssue({code:je.custom,...n(s)});return typeof Promise<"u"&&h instanceof Promise?h.then(N=>N?!0:(b(),!1)):h?!0:(b(),!1)})}refinement(t,r){return this._refinement((n,s)=>t(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(t){return new Lf({schema:this,typeName:ze.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return yl.create(this,this._def)}nullable(){return Pv.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Sm.create(this)}promise(){return nh.create(this,this._def)}or(t){return Rh.create([this,t],this._def)}and(t){return kh.create(this,t,this._def)}transform(t){return new Lf({...Rr(this._def),schema:this,typeName:ze.ZodEffects,effect:{type:"transform",transform:t}})}default(t){let r=typeof t=="function"?t:()=>t;return new Uh({...Rr(this._def),innerType:this,defaultValue:r,typeName:ze.ZodDefault})}brand(){return new G_({typeName:ze.ZodBranded,type:this,...Rr(this._def)})}catch(t){let r=typeof t=="function"?t:()=>t;return new jh({...Rr(this._def),innerType:this,catchValue:r,typeName:ze.ZodCatch})}describe(t){let r=this.constructor;return new r({...this._def,description:t})}pipe(t){return V_.create(this,t)}readonly(){return Yh.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},ED=/^c[^\s-]{8,}$/i,TD=/^[0-9a-z]+$/,wD=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ID=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ND=/^[a-z0-9_-]{21}$/i,DD=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,CD=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,xD=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,PD="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",n0,AD=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,RD=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,kD=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,OD=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,MD=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,LD=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Gb="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",FD=new RegExp(`^${Gb}$`);function Vb(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function UD(e){return new RegExp(`^${Vb(e)}$`)}function Hb(e){let t=`${Gb}T${Vb(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function jD(e,t){return!!((t==="v4"||!t)&&AD.test(e)||(t==="v6"||!t)&&kD.test(e))}function YD(e,t){if(!DD.test(e))return!1;try{let[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||!s.typ||!s.alg||t&&s.alg!==t)}catch{return!1}}function $D(e,t){return!!((t==="v4"||!t)&&RD.test(e)||(t==="v6"||!t)&&OD.test(e))}var th=class e extends kr{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==yt.string){let c=this._getOrReturnCtx(t);return it(c,{code:je.invalid_type,expected:yt.string,received:c.parsedType}),_r}let n=new Lu,s;for(let c of this._def.checks)if(c.kind==="min")t.data.length<c.value&&(s=this._getOrReturnCtx(t,s),it(s,{code:je.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),n.dirty());else if(c.kind==="max")t.data.length>c.value&&(s=this._getOrReturnCtx(t,s),it(s,{code:je.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),n.dirty());else if(c.kind==="length"){let h=t.data.length>c.value,b=t.data.length<c.value;(h||b)&&(s=this._getOrReturnCtx(t,s),h?it(s,{code:je.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}):b&&it(s,{code:je.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}),n.dirty())}else if(c.kind==="email")xD.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"email",code:je.invalid_string,message:c.message}),n.dirty());else if(c.kind==="emoji")n0||(n0=new RegExp(PD,"u")),n0.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"emoji",code:je.invalid_string,message:c.message}),n.dirty());else if(c.kind==="uuid")ID.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"uuid",code:je.invalid_string,message:c.message}),n.dirty());else if(c.kind==="nanoid")ND.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"nanoid",code:je.invalid_string,message:c.message}),n.dirty());else if(c.kind==="cuid")ED.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"cuid",code:je.invalid_string,message:c.message}),n.dirty());else if(c.kind==="cuid2")TD.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"cuid2",code:je.invalid_string,message:c.message}),n.dirty());else if(c.kind==="ulid")wD.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"ulid",code:je.invalid_string,message:c.message}),n.dirty());else if(c.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),it(s,{validation:"url",code:je.invalid_string,message:c.message}),n.dirty()}else c.kind==="regex"?(c.regex.lastIndex=0,c.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"regex",code:je.invalid_string,message:c.message}),n.dirty())):c.kind==="trim"?t.data=t.data.trim():c.kind==="includes"?t.data.includes(c.value,c.position)||(s=this._getOrReturnCtx(t,s),it(s,{code:je.invalid_string,validation:{includes:c.value,position:c.position},message:c.message}),n.dirty()):c.kind==="toLowerCase"?t.data=t.data.toLowerCase():c.kind==="toUpperCase"?t.data=t.data.toUpperCase():c.kind==="startsWith"?t.data.startsWith(c.value)||(s=this._getOrReturnCtx(t,s),it(s,{code:je.invalid_string,validation:{startsWith:c.value},message:c.message}),n.dirty()):c.kind==="endsWith"?t.data.endsWith(c.value)||(s=this._getOrReturnCtx(t,s),it(s,{code:je.invalid_string,validation:{endsWith:c.value},message:c.message}),n.dirty()):c.kind==="datetime"?Hb(c).test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{code:je.invalid_string,validation:"datetime",message:c.message}),n.dirty()):c.kind==="date"?FD.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{code:je.invalid_string,validation:"date",message:c.message}),n.dirty()):c.kind==="time"?UD(c).test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{code:je.invalid_string,validation:"time",message:c.message}),n.dirty()):c.kind==="duration"?CD.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"duration",code:je.invalid_string,message:c.message}),n.dirty()):c.kind==="ip"?jD(t.data,c.version)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"ip",code:je.invalid_string,message:c.message}),n.dirty()):c.kind==="jwt"?YD(t.data,c.alg)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"jwt",code:je.invalid_string,message:c.message}),n.dirty()):c.kind==="cidr"?$D(t.data,c.version)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"cidr",code:je.invalid_string,message:c.message}),n.dirty()):c.kind==="base64"?MD.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"base64",code:je.invalid_string,message:c.message}),n.dirty()):c.kind==="base64url"?LD.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"base64url",code:je.invalid_string,message:c.message}),n.dirty()):dn.assertNever(c);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(s=>t.test(s),{validation:r,code:je.invalid_string,...Rt.errToObj(n)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Rt.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Rt.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Rt.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Rt.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Rt.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Rt.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Rt.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Rt.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Rt.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Rt.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Rt.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Rt.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Rt.errToObj(t)})}datetime(t){var r,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(r=t==null?void 0:t.offset)!==null&&r!==void 0?r:!1,local:(n=t==null?void 0:t.local)!==null&&n!==void 0?n:!1,...Rt.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Rt.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Rt.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Rt.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...Rt.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Rt.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Rt.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Rt.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Rt.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Rt.errToObj(r)})}nonempty(t){return this.min(1,Rt.errToObj(t))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};th.create=e=>{var t;return new th({checks:[],typeName:ze.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Rr(e)})};function qD(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,s=r>n?r:n,c=parseInt(e.toFixed(s).replace(".","")),h=parseInt(t.toFixed(s).replace(".",""));return c%h/Math.pow(10,s)}var Nh=class e extends kr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==yt.number){let c=this._getOrReturnCtx(t);return it(c,{code:je.invalid_type,expected:yt.number,received:c.parsedType}),_r}let n,s=new Lu;for(let c of this._def.checks)c.kind==="int"?dn.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),it(n,{code:je.invalid_type,expected:"integer",received:"float",message:c.message}),s.dirty()):c.kind==="min"?(c.inclusive?t.data<c.value:t.data<=c.value)&&(n=this._getOrReturnCtx(t,n),it(n,{code:je.too_small,minimum:c.value,type:"number",inclusive:c.inclusive,exact:!1,message:c.message}),s.dirty()):c.kind==="max"?(c.inclusive?t.data>c.value:t.data>=c.value)&&(n=this._getOrReturnCtx(t,n),it(n,{code:je.too_big,maximum:c.value,type:"number",inclusive:c.inclusive,exact:!1,message:c.message}),s.dirty()):c.kind==="multipleOf"?qD(t.data,c.value)!==0&&(n=this._getOrReturnCtx(t,n),it(n,{code:je.not_multiple_of,multipleOf:c.value,message:c.message}),s.dirty()):c.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),it(n,{code:je.not_finite,message:c.message}),s.dirty()):dn.assertNever(c);return{status:s.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Rt.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Rt.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Rt.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Rt.toString(r))}setLimit(t,r,n,s){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Rt.toString(s)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Rt.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Rt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Rt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Rt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Rt.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Rt.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Rt.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Rt.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Rt.toString(t)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&dn.isInteger(t.value))}get isFinite(){let t=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}};Nh.create=e=>new Nh({checks:[],typeName:ze.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Rr(e)});var Dh=class e extends kr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==yt.bigint)return this._getInvalidInput(t);let n,s=new Lu;for(let c of this._def.checks)c.kind==="min"?(c.inclusive?t.data<c.value:t.data<=c.value)&&(n=this._getOrReturnCtx(t,n),it(n,{code:je.too_small,type:"bigint",minimum:c.value,inclusive:c.inclusive,message:c.message}),s.dirty()):c.kind==="max"?(c.inclusive?t.data>c.value:t.data>=c.value)&&(n=this._getOrReturnCtx(t,n),it(n,{code:je.too_big,type:"bigint",maximum:c.value,inclusive:c.inclusive,message:c.message}),s.dirty()):c.kind==="multipleOf"?t.data%c.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),it(n,{code:je.not_multiple_of,multipleOf:c.value,message:c.message}),s.dirty()):dn.assertNever(c);return{status:s.value,value:t.data}}_getInvalidInput(t){let r=this._getOrReturnCtx(t);return it(r,{code:je.invalid_type,expected:yt.bigint,received:r.parsedType}),_r}gte(t,r){return this.setLimit("min",t,!0,Rt.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Rt.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Rt.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Rt.toString(r))}setLimit(t,r,n,s){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Rt.toString(s)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Rt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Rt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Rt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Rt.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Rt.toString(r)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};Dh.create=e=>{var t;return new Dh({checks:[],typeName:ze.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Rr(e)})};var Ch=class extends kr{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==yt.boolean){let n=this._getOrReturnCtx(t);return it(n,{code:je.invalid_type,expected:yt.boolean,received:n.parsedType}),_r}return wc(t.data)}};Ch.create=e=>new Ch({typeName:ze.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Rr(e)});var xh=class e extends kr{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==yt.date){let c=this._getOrReturnCtx(t);return it(c,{code:je.invalid_type,expected:yt.date,received:c.parsedType}),_r}if(isNaN(t.data.getTime())){let c=this._getOrReturnCtx(t);return it(c,{code:je.invalid_date}),_r}let n=new Lu,s;for(let c of this._def.checks)c.kind==="min"?t.data.getTime()<c.value&&(s=this._getOrReturnCtx(t,s),it(s,{code:je.too_small,message:c.message,inclusive:!0,exact:!1,minimum:c.value,type:"date"}),n.dirty()):c.kind==="max"?t.data.getTime()>c.value&&(s=this._getOrReturnCtx(t,s),it(s,{code:je.too_big,message:c.message,inclusive:!0,exact:!1,maximum:c.value,type:"date"}),n.dirty()):dn.assertNever(c);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Rt.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Rt.toString(r)})}get minDate(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}};xh.create=e=>new xh({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:ze.ZodDate,...Rr(e)});var v_=class extends kr{_parse(t){if(this._getType(t)!==yt.symbol){let n=this._getOrReturnCtx(t);return it(n,{code:je.invalid_type,expected:yt.symbol,received:n.parsedType}),_r}return wc(t.data)}};v_.create=e=>new v_({typeName:ze.ZodSymbol,...Rr(e)});var Ph=class extends kr{_parse(t){if(this._getType(t)!==yt.undefined){let n=this._getOrReturnCtx(t);return it(n,{code:je.invalid_type,expected:yt.undefined,received:n.parsedType}),_r}return wc(t.data)}};Ph.create=e=>new Ph({typeName:ze.ZodUndefined,...Rr(e)});var Ah=class extends kr{_parse(t){if(this._getType(t)!==yt.null){let n=this._getOrReturnCtx(t);return it(n,{code:je.invalid_type,expected:yt.null,received:n.parsedType}),_r}return wc(t.data)}};Ah.create=e=>new Ah({typeName:ze.ZodNull,...Rr(e)});var rh=class extends kr{constructor(){super(...arguments),this._any=!0}_parse(t){return wc(t.data)}};rh.create=e=>new rh({typeName:ze.ZodAny,...Rr(e)});var ym=class extends kr{constructor(){super(...arguments),this._unknown=!0}_parse(t){return wc(t.data)}};ym.create=e=>new ym({typeName:ze.ZodUnknown,...Rr(e)});var kp=class extends kr{_parse(t){let r=this._getOrReturnCtx(t);return it(r,{code:je.invalid_type,expected:yt.never,received:r.parsedType}),_r}};kp.create=e=>new kp({typeName:ze.ZodNever,...Rr(e)});var m_=class extends kr{_parse(t){if(this._getType(t)!==yt.undefined){let n=this._getOrReturnCtx(t);return it(n,{code:je.invalid_type,expected:yt.void,received:n.parsedType}),_r}return wc(t.data)}};m_.create=e=>new m_({typeName:ze.ZodVoid,...Rr(e)});var Sm=class e extends kr{_parse(t){let{ctx:r,status:n}=this._processInputParams(t),s=this._def;if(r.parsedType!==yt.array)return it(r,{code:je.invalid_type,expected:yt.array,received:r.parsedType}),_r;if(s.exactLength!==null){let h=r.data.length>s.exactLength.value,b=r.data.length<s.exactLength.value;(h||b)&&(it(r,{code:h?je.too_big:je.too_small,minimum:b?s.exactLength.value:void 0,maximum:h?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(it(r,{code:je.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(it(r,{code:je.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((h,b)=>s.type._parseAsync(new Md(r,h,r.path,b)))).then(h=>Lu.mergeArray(n,h));let c=[...r.data].map((h,b)=>s.type._parseSync(new Md(r,h,r.path,b)));return Lu.mergeArray(n,c)}get element(){return this._def.type}min(t,r){return new e({...this._def,minLength:{value:t,message:Rt.toString(r)}})}max(t,r){return new e({...this._def,maxLength:{value:t,message:Rt.toString(r)}})}length(t,r){return new e({...this._def,exactLength:{value:t,message:Rt.toString(r)}})}nonempty(t){return this.min(1,t)}};Sm.create=(e,t)=>new Sm({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ze.ZodArray,...Rr(t)});function f_(e){if(e instanceof Sl){let t={};for(let r in e.shape){let n=e.shape[r];t[r]=yl.create(f_(n))}return new Sl({...e._def,shape:()=>t})}else return e instanceof Sm?new Sm({...e._def,type:f_(e.element)}):e instanceof yl?yl.create(f_(e.unwrap())):e instanceof Pv?Pv.create(f_(e.unwrap())):e instanceof xv?xv.create(e.items.map(t=>f_(t))):e}var Sl=class e extends kr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let t=this._def.shape(),r=dn.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==yt.object){let k=this._getOrReturnCtx(t);return it(k,{code:je.invalid_type,expected:yt.object,received:k.parsedType}),_r}let{status:n,ctx:s}=this._processInputParams(t),{shape:c,keys:h}=this._getCached(),b=[];if(!(this._def.catchall instanceof kp&&this._def.unknownKeys==="strip"))for(let k in s.data)h.includes(k)||b.push(k);let N=[];for(let k of h){let $=c[k],ne=s.data[k];N.push({key:{status:"valid",value:k},value:$._parse(new Md(s,ne,s.path,k)),alwaysSet:k in s.data})}if(this._def.catchall instanceof kp){let k=this._def.unknownKeys;if(k==="passthrough")for(let $ of b)N.push({key:{status:"valid",value:$},value:{status:"valid",value:s.data[$]}});else if(k==="strict")b.length>0&&(it(s,{code:je.unrecognized_keys,keys:b}),n.dirty());else if(k!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let k=this._def.catchall;for(let $ of b){let ne=s.data[$];N.push({key:{status:"valid",value:$},value:k._parse(new Md(s,ne,s.path,$)),alwaysSet:$ in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let k=[];for(let $ of N){let ne=await $.key,le=await $.value;k.push({key:ne,value:le,alwaysSet:$.alwaysSet})}return k}).then(k=>Lu.mergeObjectSync(n,k)):Lu.mergeObjectSync(n,N)}get shape(){return this._def.shape()}strict(t){return Rt.errToObj,new e({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var s,c,h,b;let N=(h=(c=(s=this._def).errorMap)===null||c===void 0?void 0:c.call(s,r,n).message)!==null&&h!==void 0?h:n.defaultError;return r.code==="unrecognized_keys"?{message:(b=Rt.errToObj(t).message)!==null&&b!==void 0?b:N}:{message:N}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ze.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new e({...this._def,catchall:t})}pick(t){let r={};return dn.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new e({...this._def,shape:()=>r})}omit(t){let r={};return dn.objectKeys(this.shape).forEach(n=>{t[n]||(r[n]=this.shape[n])}),new e({...this._def,shape:()=>r})}deepPartial(){return f_(this)}partial(t){let r={};return dn.objectKeys(this.shape).forEach(n=>{let s=this.shape[n];t&&!t[n]?r[n]=s:r[n]=s.optional()}),new e({...this._def,shape:()=>r})}required(t){let r={};return dn.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])r[n]=this.shape[n];else{let c=this.shape[n];for(;c instanceof yl;)c=c._def.innerType;r[n]=c}}),new e({...this._def,shape:()=>r})}keyof(){return Kb(dn.objectKeys(this.shape))}};Sl.create=(e,t)=>new Sl({shape:()=>e,unknownKeys:"strip",catchall:kp.create(),typeName:ze.ZodObject,...Rr(t)});Sl.strictCreate=(e,t)=>new Sl({shape:()=>e,unknownKeys:"strict",catchall:kp.create(),typeName:ze.ZodObject,...Rr(t)});Sl.lazycreate=(e,t)=>new Sl({shape:e,unknownKeys:"strip",catchall:kp.create(),typeName:ze.ZodObject,...Rr(t)});var Rh=class extends kr{_parse(t){let{ctx:r}=this._processInputParams(t),n=this._def.options;function s(c){for(let b of c)if(b.result.status==="valid")return b.result;for(let b of c)if(b.result.status==="dirty")return r.common.issues.push(...b.ctx.common.issues),b.result;let h=c.map(b=>new Tc(b.ctx.common.issues));return it(r,{code:je.invalid_union,unionErrors:h}),_r}if(r.common.async)return Promise.all(n.map(async c=>{let h={...r,common:{...r.common,issues:[]},parent:null};return{result:await c._parseAsync({data:r.data,path:r.path,parent:h}),ctx:h}})).then(s);{let c,h=[];for(let N of n){let k={...r,common:{...r.common,issues:[]},parent:null},$=N._parseSync({data:r.data,path:r.path,parent:k});if($.status==="valid")return $;$.status==="dirty"&&!c&&(c={result:$,ctx:k}),k.common.issues.length&&h.push(k.common.issues)}if(c)return r.common.issues.push(...c.ctx.common.issues),c.result;let b=h.map(N=>new Tc(N));return it(r,{code:je.invalid_union,unionErrors:b}),_r}}get options(){return this._def.options}};Rh.create=(e,t)=>new Rh({options:e,typeName:ze.ZodUnion,...Rr(t)});var _m=e=>e instanceof Oh?_m(e.schema):e instanceof Lf?_m(e.innerType()):e instanceof Mh?[e.value]:e instanceof Lh?e.options:e instanceof Fh?dn.objectValues(e.enum):e instanceof Uh?_m(e._def.innerType):e instanceof Ph?[void 0]:e instanceof Ah?[null]:e instanceof yl?[void 0,..._m(e.unwrap())]:e instanceof Pv?[null,..._m(e.unwrap())]:e instanceof G_||e instanceof Yh?_m(e.unwrap()):e instanceof jh?_m(e._def.innerType):[],Gg=class e extends kr{_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.object)return it(r,{code:je.invalid_type,expected:yt.object,received:r.parsedType}),_r;let n=this.discriminator,s=r.data[n],c=this.optionsMap.get(s);return c?r.common.async?c._parseAsync({data:r.data,path:r.path,parent:r}):c._parseSync({data:r.data,path:r.path,parent:r}):(it(r,{code:je.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),_r)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,n){let s=new Map;for(let c of r){let h=_m(c.shape[t]);if(!h.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let b of h){if(s.has(b))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(b)}`);s.set(b,c)}}return new e({typeName:ze.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:s,...Rr(n)})}};function s0(e,t){let r=gm(e),n=gm(t);if(e===t)return{valid:!0,data:e};if(r===yt.object&&n===yt.object){let s=dn.objectKeys(t),c=dn.objectKeys(e).filter(b=>s.indexOf(b)!==-1),h={...e,...t};for(let b of c){let N=s0(e[b],t[b]);if(!N.valid)return{valid:!1};h[b]=N.data}return{valid:!0,data:h}}else if(r===yt.array&&n===yt.array){if(e.length!==t.length)return{valid:!1};let s=[];for(let c=0;c<e.length;c++){let h=e[c],b=t[c],N=s0(h,b);if(!N.valid)return{valid:!1};s.push(N.data)}return{valid:!0,data:s}}else return r===yt.date&&n===yt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var kh=class extends kr{_parse(t){let{status:r,ctx:n}=this._processInputParams(t),s=(c,h)=>{if(i0(c)||i0(h))return _r;let b=s0(c.value,h.value);return b.valid?((o0(c)||o0(h))&&r.dirty(),{status:r.value,value:b.data}):(it(n,{code:je.invalid_intersection_types}),_r)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([c,h])=>s(c,h)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};kh.create=(e,t,r)=>new kh({left:e,right:t,typeName:ze.ZodIntersection,...Rr(r)});var xv=class e extends kr{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.array)return it(n,{code:je.invalid_type,expected:yt.array,received:n.parsedType}),_r;if(n.data.length<this._def.items.length)return it(n,{code:je.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_r;!this._def.rest&&n.data.length>this._def.items.length&&(it(n,{code:je.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let c=[...n.data].map((h,b)=>{let N=this._def.items[b]||this._def.rest;return N?N._parse(new Md(n,h,n.path,b)):null}).filter(h=>!!h);return n.common.async?Promise.all(c).then(h=>Lu.mergeArray(r,h)):Lu.mergeArray(r,c)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};xv.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new xv({items:e,typeName:ze.ZodTuple,rest:null,...Rr(t)})};var Vg=class e extends kr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.object)return it(n,{code:je.invalid_type,expected:yt.object,received:n.parsedType}),_r;let s=[],c=this._def.keyType,h=this._def.valueType;for(let b in n.data)s.push({key:c._parse(new Md(n,b,n.path,b)),value:h._parse(new Md(n,n.data[b],n.path,b)),alwaysSet:b in n.data});return n.common.async?Lu.mergeObjectAsync(r,s):Lu.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof kr?new e({keyType:t,valueType:r,typeName:ze.ZodRecord,...Rr(n)}):new e({keyType:th.create(),valueType:t,typeName:ze.ZodRecord,...Rr(r)})}},h_=class extends kr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.map)return it(n,{code:je.invalid_type,expected:yt.map,received:n.parsedType}),_r;let s=this._def.keyType,c=this._def.valueType,h=[...n.data.entries()].map(([b,N],k)=>({key:s._parse(new Md(n,b,n.path,[k,"key"])),value:c._parse(new Md(n,N,n.path,[k,"value"]))}));if(n.common.async){let b=new Map;return Promise.resolve().then(async()=>{for(let N of h){let k=await N.key,$=await N.value;if(k.status==="aborted"||$.status==="aborted")return _r;(k.status==="dirty"||$.status==="dirty")&&r.dirty(),b.set(k.value,$.value)}return{status:r.value,value:b}})}else{let b=new Map;for(let N of h){let k=N.key,$=N.value;if(k.status==="aborted"||$.status==="aborted")return _r;(k.status==="dirty"||$.status==="dirty")&&r.dirty(),b.set(k.value,$.value)}return{status:r.value,value:b}}}};h_.create=(e,t,r)=>new h_({valueType:t,keyType:e,typeName:ze.ZodMap,...Rr(r)});var __=class e extends kr{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.set)return it(n,{code:je.invalid_type,expected:yt.set,received:n.parsedType}),_r;let s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(it(n,{code:je.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(it(n,{code:je.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());let c=this._def.valueType;function h(N){let k=new Set;for(let $ of N){if($.status==="aborted")return _r;$.status==="dirty"&&r.dirty(),k.add($.value)}return{status:r.value,value:k}}let b=[...n.data.values()].map((N,k)=>c._parse(new Md(n,N,n.path,k)));return n.common.async?Promise.all(b).then(N=>h(N)):h(b)}min(t,r){return new e({...this._def,minSize:{value:t,message:Rt.toString(r)}})}max(t,r){return new e({...this._def,maxSize:{value:t,message:Rt.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}};__.create=(e,t)=>new __({valueType:e,minSize:null,maxSize:null,typeName:ze.ZodSet,...Rr(t)});var Hg=class e extends kr{constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.function)return it(r,{code:je.invalid_type,expected:yt.function,received:r.parsedType}),_r;function n(b,N){return Bg({data:b,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,qg(),p_].filter(k=>!!k),issueData:{code:je.invalid_arguments,argumentsError:N}})}function s(b,N){return Bg({data:b,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,qg(),p_].filter(k=>!!k),issueData:{code:je.invalid_return_type,returnTypeError:N}})}let c={errorMap:r.common.contextualErrorMap},h=r.data;if(this._def.returns instanceof nh){let b=this;return wc(async function(...N){let k=new Tc([]),$=await b._def.args.parseAsync(N,c).catch(we=>{throw k.addIssue(n(N,we)),k}),ne=await Reflect.apply(h,this,$);return await b._def.returns._def.type.parseAsync(ne,c).catch(we=>{throw k.addIssue(s(ne,we)),k})})}else{let b=this;return wc(function(...N){let k=b._def.args.safeParse(N,c);if(!k.success)throw new Tc([n(N,k.error)]);let $=Reflect.apply(h,this,k.data),ne=b._def.returns.safeParse($,c);if(!ne.success)throw new Tc([s($,ne.error)]);return ne.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new e({...this._def,args:xv.create(t).rest(ym.create())})}returns(t){return new e({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,n){return new e({args:t||xv.create([]).rest(ym.create()),returns:r||ym.create(),typeName:ze.ZodFunction,...Rr(n)})}},Oh=class extends kr{get schema(){return this._def.getter()}_parse(t){let{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Oh.create=(e,t)=>new Oh({getter:e,typeName:ze.ZodLazy,...Rr(t)});var Mh=class extends kr{_parse(t){if(t.data!==this._def.value){let r=this._getOrReturnCtx(t);return it(r,{received:r.data,code:je.invalid_literal,expected:this._def.value}),_r}return{status:"valid",value:t.data}}get value(){return this._def.value}};Mh.create=(e,t)=>new Mh({value:e,typeName:ze.ZodLiteral,...Rr(t)});function Kb(e,t){return new Lh({values:e,typeName:ze.ZodEnum,...Rr(t)})}var Lh=class e extends kr{constructor(){super(...arguments),q_.set(this,void 0)}_parse(t){if(typeof t.data!="string"){let r=this._getOrReturnCtx(t),n=this._def.values;return it(r,{expected:dn.joinValues(n),received:r.parsedType,code:je.invalid_type}),_r}if(zg(this,q_,"f")||zb(this,q_,new Set(this._def.values),"f"),!zg(this,q_,"f").has(t.data)){let r=this._getOrReturnCtx(t),n=this._def.values;return it(r,{received:r.data,code:je.invalid_enum_value,options:n}),_r}return wc(t.data)}get options(){return this._def.values}get enum(){let t={};for(let r of this._def.values)t[r]=r;return t}get Values(){let t={};for(let r of this._def.values)t[r]=r;return t}get Enum(){let t={};for(let r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return e.create(t,{...this._def,...r})}exclude(t,r=this._def){return e.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}};q_=new WeakMap;Lh.create=Kb;var Fh=class extends kr{constructor(){super(...arguments),B_.set(this,void 0)}_parse(t){let r=dn.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==yt.string&&n.parsedType!==yt.number){let s=dn.objectValues(r);return it(n,{expected:dn.joinValues(s),received:n.parsedType,code:je.invalid_type}),_r}if(zg(this,B_,"f")||zb(this,B_,new Set(dn.getValidEnumValues(this._def.values)),"f"),!zg(this,B_,"f").has(t.data)){let s=dn.objectValues(r);return it(n,{received:n.data,code:je.invalid_enum_value,options:s}),_r}return wc(t.data)}get enum(){return this._def.values}};B_=new WeakMap;Fh.create=(e,t)=>new Fh({values:e,typeName:ze.ZodNativeEnum,...Rr(t)});var nh=class extends kr{unwrap(){return this._def.type}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.promise&&r.common.async===!1)return it(r,{code:je.invalid_type,expected:yt.promise,received:r.parsedType}),_r;let n=r.parsedType===yt.promise?r.data:Promise.resolve(r.data);return wc(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}};nh.create=(e,t)=>new nh({type:e,typeName:ze.ZodPromise,...Rr(t)});var Lf=class extends kr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ze.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:r,ctx:n}=this._processInputParams(t),s=this._def.effect||null,c={addIssue:h=>{it(n,h),h.fatal?r.abort():r.dirty()},get path(){return n.path}};if(c.addIssue=c.addIssue.bind(c),s.type==="preprocess"){let h=s.transform(n.data,c);if(n.common.async)return Promise.resolve(h).then(async b=>{if(r.value==="aborted")return _r;let N=await this._def.schema._parseAsync({data:b,path:n.path,parent:n});return N.status==="aborted"?_r:N.status==="dirty"||r.value==="dirty"?d_(N.value):N});{if(r.value==="aborted")return _r;let b=this._def.schema._parseSync({data:h,path:n.path,parent:n});return b.status==="aborted"?_r:b.status==="dirty"||r.value==="dirty"?d_(b.value):b}}if(s.type==="refinement"){let h=b=>{let N=s.refinement(b,c);if(n.common.async)return Promise.resolve(N);if(N instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return b};if(n.common.async===!1){let b=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return b.status==="aborted"?_r:(b.status==="dirty"&&r.dirty(),h(b.value),{status:r.value,value:b.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(b=>b.status==="aborted"?_r:(b.status==="dirty"&&r.dirty(),h(b.value).then(()=>({status:r.value,value:b.value}))))}if(s.type==="transform")if(n.common.async===!1){let h=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ih(h))return h;let b=s.transform(h.value,c);if(b instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:b}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(h=>Ih(h)?Promise.resolve(s.transform(h.value,c)).then(b=>({status:r.value,value:b})):h);dn.assertNever(s)}};Lf.create=(e,t,r)=>new Lf({schema:e,typeName:ze.ZodEffects,effect:t,...Rr(r)});Lf.createWithPreprocess=(e,t,r)=>new Lf({schema:t,effect:{type:"preprocess",transform:e},typeName:ze.ZodEffects,...Rr(r)});var yl=class extends kr{_parse(t){return this._getType(t)===yt.undefined?wc(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};yl.create=(e,t)=>new yl({innerType:e,typeName:ze.ZodOptional,...Rr(t)});var Pv=class extends kr{_parse(t){return this._getType(t)===yt.null?wc(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Pv.create=(e,t)=>new Pv({innerType:e,typeName:ze.ZodNullable,...Rr(t)});var Uh=class extends kr{_parse(t){let{ctx:r}=this._processInputParams(t),n=r.data;return r.parsedType===yt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Uh.create=(e,t)=>new Uh({innerType:e,typeName:ze.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Rr(t)});var jh=class extends kr{_parse(t){let{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return z_(s)?s.then(c=>({status:"valid",value:c.status==="valid"?c.value:this._def.catchValue({get error(){return new Tc(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Tc(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};jh.create=(e,t)=>new jh({innerType:e,typeName:ze.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Rr(t)});var g_=class extends kr{_parse(t){if(this._getType(t)!==yt.nan){let n=this._getOrReturnCtx(t);return it(n,{code:je.invalid_type,expected:yt.nan,received:n.parsedType}),_r}return{status:"valid",value:t.data}}};g_.create=e=>new g_({typeName:ze.ZodNaN,...Rr(e)});var BD=Symbol("zod_brand"),G_=class extends kr{_parse(t){let{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},V_=class e extends kr{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{let c=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?_r:c.status==="dirty"?(r.dirty(),d_(c.value)):this._def.out._parseAsync({data:c.value,path:n.path,parent:n})})();{let s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?_r:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(t,r){return new e({in:t,out:r,typeName:ze.ZodPipeline})}},Yh=class extends kr{_parse(t){let r=this._def.innerType._parse(t),n=s=>(Ih(s)&&(s.value=Object.freeze(s.value)),s);return z_(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}};Yh.create=(e,t)=>new Yh({innerType:e,typeName:ze.ZodReadonly,...Rr(t)});function Wb(e,t={},r){return e?rh.create().superRefine((n,s)=>{var c,h;if(!e(n)){let b=typeof t=="function"?t(n):typeof t=="string"?{message:t}:t,N=(h=(c=b.fatal)!==null&&c!==void 0?c:r)!==null&&h!==void 0?h:!0,k=typeof b=="string"?{message:b}:b;s.addIssue({code:"custom",...k,fatal:N})}}):rh.create()}var zD={object:Sl.lazycreate},ze;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ze||(ze={}));var GD=(e,t={message:`Input not instance of ${e.name}`})=>Wb(r=>r instanceof e,t),Jb=th.create,Zb=Nh.create,VD=g_.create,HD=Dh.create,Xb=Ch.create,KD=xh.create,WD=v_.create,JD=Ph.create,ZD=Ah.create,XD=rh.create,QD=ym.create,eC=kp.create,tC=m_.create,rC=Sm.create,nC=Sl.create,aC=Sl.strictCreate,iC=Rh.create,oC=Gg.create,sC=kh.create,uC=xv.create,cC=Vg.create,lC=h_.create,fC=__.create,dC=Hg.create,pC=Oh.create,vC=Mh.create,mC=Lh.create,hC=Fh.create,_C=nh.create,qb=Lf.create,gC=yl.create,yC=Pv.create,SC=Lf.createWithPreprocess,bC=V_.create,EC=()=>Jb().optional(),TC=()=>Zb().optional(),wC=()=>Xb().optional(),IC={string:e=>th.create({...e,coerce:!0}),number:e=>Nh.create({...e,coerce:!0}),boolean:e=>Ch.create({...e,coerce:!0}),bigint:e=>Dh.create({...e,coerce:!0}),date:e=>xh.create({...e,coerce:!0})},NC=_r,O=Object.freeze({__proto__:null,defaultErrorMap:p_,setErrorMap:SD,getErrorMap:qg,makeIssue:Bg,EMPTY_PATH:bD,addIssueToContext:it,ParseStatus:Lu,INVALID:_r,DIRTY:d_,OK:wc,isAborted:i0,isDirty:o0,isValid:Ih,isAsync:z_,get util(){return dn},get objectUtil(){return a0},ZodParsedType:yt,getParsedType:gm,ZodType:kr,datetimeRegex:Hb,ZodString:th,ZodNumber:Nh,ZodBigInt:Dh,ZodBoolean:Ch,ZodDate:xh,ZodSymbol:v_,ZodUndefined:Ph,ZodNull:Ah,ZodAny:rh,ZodUnknown:ym,ZodNever:kp,ZodVoid:m_,ZodArray:Sm,ZodObject:Sl,ZodUnion:Rh,ZodDiscriminatedUnion:Gg,ZodIntersection:kh,ZodTuple:xv,ZodRecord:Vg,ZodMap:h_,ZodSet:__,ZodFunction:Hg,ZodLazy:Oh,ZodLiteral:Mh,ZodEnum:Lh,ZodNativeEnum:Fh,ZodPromise:nh,ZodEffects:Lf,ZodTransformer:Lf,ZodOptional:yl,ZodNullable:Pv,ZodDefault:Uh,ZodCatch:jh,ZodNaN:g_,BRAND:BD,ZodBranded:G_,ZodPipeline:V_,ZodReadonly:Yh,custom:Wb,Schema:kr,ZodSchema:kr,late:zD,get ZodFirstPartyTypeKind(){return ze},coerce:IC,any:XD,array:rC,bigint:HD,boolean:Xb,date:KD,discriminatedUnion:oC,effect:qb,enum:mC,function:dC,instanceof:GD,intersection:sC,lazy:pC,literal:vC,map:lC,nan:VD,nativeEnum:hC,never:eC,null:ZD,nullable:yC,number:Zb,object:nC,oboolean:wC,onumber:TC,optional:gC,ostring:EC,pipeline:bC,preprocess:SC,promise:_C,record:cC,set:fC,strictObject:aC,string:Jb,symbol:WD,transformer:qb,tuple:uC,undefined:JD,union:iC,unknown:QD,void:tC,NEVER:NC,ZodIssueCode:je,quotelessJson:yD,ZodError:Tc});var DC=O.object({type:O.literal("error"),error:O.object({type:O.string(),message:O.string()})}),Qb=Yg({errorSchema:DC,errorToMessage:e=>e.error.message});function CC({prompt:e,cacheControl:t}){var r,n,s,c;let h=new Set,b=xC(e),N,k=[];function $(ne){var le;if(t===!1)return;let we=ne==null?void 0:ne.anthropic;return(le=we==null?void 0:we.cacheControl)!=null?le:we==null?void 0:we.cache_control}for(let ne=0;ne<b.length;ne++){let le=b[ne],we=ne===b.length-1,ge=le.type;switch(ge){case"system":{if(N!=null)throw new $n({functionality:"Multiple system messages that are separated by user/assistant messages"});N=le.messages.map(({content:ve,providerMetadata:ce})=>({type:"text",text:ve,cache_control:$(ce)}));break}case"user":{let ve=[];for(let ce of le.messages){let{role:Pe,content:Ke}=ce;switch(Pe){case"user":{for(let ut=0;ut<Ke.length;ut++){let Fe=Ke[ut],ft=ut===Ke.length-1,Ot=(r=$(Fe.providerMetadata))!=null?r:ft?$(ce.providerMetadata):void 0;switch(Fe.type){case"text":{ve.push({type:"text",text:Fe.text,cache_control:Ot});break}case"image":{if(Fe.image instanceof URL)throw new $n({functionality:"Image URLs in user messages"});ve.push({type:"image",source:{type:"base64",media_type:(n=Fe.mimeType)!=null?n:"image/jpeg",data:wh(Fe.image)},cache_control:Ot});break}case"file":{if(Fe.data instanceof URL)throw new $n({functionality:"Image URLs in user messages"});if(Fe.mimeType!=="application/pdf")throw new $n({functionality:"Non-PDF files in user messages"});h.add("pdfs-2024-09-25"),ve.push({type:"document",source:{type:"base64",media_type:"application/pdf",data:Fe.data},cache_control:Ot});break}}}break}case"tool":{for(let ut=0;ut<Ke.length;ut++){let Fe=Ke[ut],ft=ut===Ke.length-1,Ot=(s=$(Fe.providerMetadata))!=null?s:ft?$(ce.providerMetadata):void 0,tr=Fe.content!=null?Fe.content.map(ur=>{var gr;switch(ur.type){case"text":return{type:"text",text:ur.text,cache_control:void 0};case"image":return{type:"image",source:{type:"base64",media_type:(gr=ur.mimeType)!=null?gr:"image/jpeg",data:ur.data},cache_control:void 0}}}):JSON.stringify(Fe.result);ve.push({type:"tool_result",tool_use_id:Fe.toolCallId,content:tr,is_error:Fe.isError,cache_control:Ot})}break}default:{let ut=Pe;throw new Error(`Unsupported role: ${ut}`)}}}k.push({role:"user",content:ve});break}case"assistant":{let ve=[];for(let ce=0;ce<le.messages.length;ce++){let Pe=le.messages[ce],Ke=ce===le.messages.length-1,{content:ut}=Pe;for(let Fe=0;Fe<ut.length;Fe++){let ft=ut[Fe],Ot=Fe===ut.length-1,tr=(c=$(ft.providerMetadata))!=null?c:Ot?$(Pe.providerMetadata):void 0;switch(ft.type){case"text":{ve.push({type:"text",text:we&&Ke&&Ot?ft.text.trim():ft.text,cache_control:tr});break}case"tool-call":{ve.push({type:"tool_use",id:ft.toolCallId,name:ft.toolName,input:ft.args,cache_control:tr});break}}}}k.push({role:"assistant",content:ve});break}default:{let ve=ge;throw new Error(`Unsupported type: ${ve}`)}}}return{prompt:{system:N,messages:k},betas:h}}function xC(e){let t=[],r;for(let n of e){let{role:s}=n;switch(s){case"system":{(r==null?void 0:r.type)!=="system"&&(r={type:"system",messages:[]},t.push(r)),r.messages.push(n);break}case"assistant":{(r==null?void 0:r.type)!=="assistant"&&(r={type:"assistant",messages:[]},t.push(r)),r.messages.push(n);break}case"user":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},t.push(r)),r.messages.push(n);break}case"tool":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},t.push(r)),r.messages.push(n);break}default:{let c=s;throw new Error(`Unsupported role: ${c}`)}}}return t}function eE(e){switch(e){case"end_turn":case"stop_sequence":return"stop";case"tool_use":return"tool-calls";case"max_tokens":return"length";default:return"unknown"}}function PC(e){var t;let r=(t=e.tools)!=null&&t.length?e.tools:void 0,n=[],s=new Set;if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:n,betas:s};let c=[];for(let N of r)switch(N.type){case"function":c.push({name:N.name,description:N.description,input_schema:N.parameters});break;case"provider-defined":switch(s.add("computer-use-2024-10-22"),N.id){case"anthropic.computer_20241022":c.push({name:N.name,type:"computer_20241022",display_width_px:N.args.displayWidthPx,display_height_px:N.args.displayHeightPx,display_number:N.args.displayNumber});break;case"anthropic.text_editor_20241022":c.push({name:N.name,type:"text_editor_20241022"});break;case"anthropic.bash_20241022":c.push({name:N.name,type:"bash_20241022"});break;default:n.push({type:"unsupported-tool",tool:N});break}break;default:n.push({type:"unsupported-tool",tool:N});break}let h=e.toolChoice;if(h==null)return{tools:c,tool_choice:void 0,toolWarnings:n,betas:s};let b=h.type;switch(b){case"auto":return{tools:c,tool_choice:{type:"auto"},toolWarnings:n,betas:s};case"required":return{tools:c,tool_choice:{type:"any"},toolWarnings:n,betas:s};case"none":return{tools:void 0,tool_choice:void 0,toolWarnings:n,betas:s};case"tool":return{tools:c,tool_choice:{type:"tool",name:h.toolName},toolWarnings:n,betas:s};default:{let N=b;throw new $n({functionality:`Unsupported tool choice type: ${N}`})}}}var AC=class{constructor(e,t,r){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:r,temperature:n,topP:s,topK:c,frequencyPenalty:h,presencePenalty:b,stopSequences:N,responseFormat:k,seed:$}){var ne;let le=e.type,we=[];h!=null&&we.push({type:"unsupported-setting",setting:"frequencyPenalty"}),b!=null&&we.push({type:"unsupported-setting",setting:"presencePenalty"}),$!=null&&we.push({type:"unsupported-setting",setting:"seed"}),k!=null&&k.type!=="text"&&we.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:ge,betas:ve}=CC({prompt:t,cacheControl:(ne=this.settings.cacheControl)!=null?ne:!1}),ce={model:this.modelId,max_tokens:r??4096,temperature:n,top_k:c,top_p:s,stop_sequences:N,system:ge.system,messages:ge.messages};switch(le){case"regular":{let{tools:Pe,tool_choice:Ke,toolWarnings:ut,betas:Fe}=PC(e);return{args:{...ce,tools:Pe,tool_choice:Ke},warnings:[...we,...ut],betas:new Set([...ve,...Fe])}}case"object-json":throw new $n({functionality:"json-mode object generation"});case"object-tool":{let{name:Pe,description:Ke,parameters:ut}=e.tool;return{args:{...ce,tools:[{name:Pe,description:Ke,input_schema:ut}],tool_choice:{type:"tool",name:Pe}},warnings:we,betas:ve}}default:{let Pe=le;throw new Error(`Unsupported type: ${Pe}`)}}}async getHeaders({betas:e,headers:t}){return this.settings.cacheControl&&e.add("prompt-caching-2024-07-31"),Od(await jb(this.config.headers),e.size>0?{"anthropic-beta":Array.from(e).join(",")}:{},t)}buildRequestUrl(e){var t,r,n;return(n=(r=(t=this.config).buildRequestUrl)==null?void 0:r.call(t,this.config.baseURL,e))!=null?n:`${this.config.baseURL}/messages`}transformRequestBody(e){var t,r,n;return(n=(r=(t=this.config).transformRequestBody)==null?void 0:r.call(t,e))!=null?n:e}async doGenerate(e){var t,r,n,s;let{args:c,warnings:h,betas:b}=await this.getArgs(e),{responseHeaders:N,value:k}=await Mf({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:b,headers:e.headers}),body:this.transformRequestBody(c),failedResponseHandler:Qb,successfulResponseHandler:Cv(RC),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:$,...ne}=c,le="";for(let ge of k.content)ge.type==="text"&&(le+=ge.text);let we;if(k.content.some(ge=>ge.type==="tool_use")){we=[];for(let ge of k.content)ge.type==="tool_use"&&we.push({toolCallType:"function",toolCallId:ge.id,toolName:ge.name,args:JSON.stringify(ge.input)})}return{text:le,toolCalls:we,finishReason:eE(k.stop_reason),usage:{promptTokens:k.usage.input_tokens,completionTokens:k.usage.output_tokens},rawCall:{rawPrompt:$,rawSettings:ne},rawResponse:{headers:N},response:{id:(t=k.id)!=null?t:void 0,modelId:(r=k.model)!=null?r:void 0},warnings:h,providerMetadata:this.settings.cacheControl===!0?{anthropic:{cacheCreationInputTokens:(n=k.usage.cache_creation_input_tokens)!=null?n:null,cacheReadInputTokens:(s=k.usage.cache_read_input_tokens)!=null?s:null}}:void 0,request:{body:JSON.stringify(c)}}}async doStream(e){let{args:t,warnings:r,betas:n}=await this.getArgs(e),s={...t,stream:!0},{responseHeaders:c,value:h}=await Mf({url:this.buildRequestUrl(!0),headers:await this.getHeaders({betas:n,headers:e.headers}),body:this.transformRequestBody(s),failedResponseHandler:Qb,successfulResponseHandler:l_(kC),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:b,...N}=t,k="unknown",$={promptTokens:Number.NaN,completionTokens:Number.NaN},ne={},le,we=this;return{stream:h.pipeThrough(new TransformStream({transform(ge,ve){var ce,Pe,Ke,ut;if(!ge.success){ve.enqueue({type:"error",error:ge.error});return}let Fe=ge.value;switch(Fe.type){case"ping":return;case"content_block_start":{let ft=Fe.content_block.type;switch(ft){case"text":return;case"tool_use":{ne[Fe.index]={toolCallId:Fe.content_block.id,toolName:Fe.content_block.name,jsonText:""};return}default:{let Ot=ft;throw new Error(`Unsupported content block type: ${Ot}`)}}}case"content_block_stop":{if(ne[Fe.index]!=null){let ft=ne[Fe.index];ve.enqueue({type:"tool-call",toolCallType:"function",toolCallId:ft.toolCallId,toolName:ft.toolName,args:ft.jsonText}),delete ne[Fe.index]}return}case"content_block_delta":{let ft=Fe.delta.type;switch(ft){case"text_delta":{ve.enqueue({type:"text-delta",textDelta:Fe.delta.text});return}case"input_json_delta":{let Ot=ne[Fe.index];ve.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Ot.toolCallId,toolName:Ot.toolName,argsTextDelta:Fe.delta.partial_json}),Ot.jsonText+=Fe.delta.partial_json;return}default:{let Ot=ft;throw new Error(`Unsupported delta type: ${Ot}`)}}}case"message_start":{$.promptTokens=Fe.message.usage.input_tokens,$.completionTokens=Fe.message.usage.output_tokens,we.settings.cacheControl===!0&&(le={anthropic:{cacheCreationInputTokens:(ce=Fe.message.usage.cache_creation_input_tokens)!=null?ce:null,cacheReadInputTokens:(Pe=Fe.message.usage.cache_read_input_tokens)!=null?Pe:null}}),ve.enqueue({type:"response-metadata",id:(Ke=Fe.message.id)!=null?Ke:void 0,modelId:(ut=Fe.message.model)!=null?ut:void 0});return}case"message_delta":{$.completionTokens=Fe.usage.output_tokens,k=eE(Fe.delta.stop_reason);return}case"message_stop":{ve.enqueue({type:"finish",finishReason:k,usage:$,providerMetadata:le});return}case"error":{ve.enqueue({type:"error",error:Fe.error});return}default:{let ft=Fe;throw new Error(`Unsupported chunk type: ${ft}`)}}}})),rawCall:{rawPrompt:b,rawSettings:N},rawResponse:{headers:c},warnings:r,request:{body:JSON.stringify(s)}}}},RC=O.object({type:O.literal("message"),id:O.string().nullish(),model:O.string().nullish(),content:O.array(O.discriminatedUnion("type",[O.object({type:O.literal("text"),text:O.string()}),O.object({type:O.literal("tool_use"),id:O.string(),name:O.string(),input:O.unknown()})])),stop_reason:O.string().nullish(),usage:O.object({input_tokens:O.number(),output_tokens:O.number(),cache_creation_input_tokens:O.number().nullish(),cache_read_input_tokens:O.number().nullish()})}),kC=O.discriminatedUnion("type",[O.object({type:O.literal("message_start"),message:O.object({id:O.string().nullish(),model:O.string().nullish(),usage:O.object({input_tokens:O.number(),output_tokens:O.number(),cache_creation_input_tokens:O.number().nullish(),cache_read_input_tokens:O.number().nullish()})})}),O.object({type:O.literal("content_block_start"),index:O.number(),content_block:O.discriminatedUnion("type",[O.object({type:O.literal("text"),text:O.string()}),O.object({type:O.literal("tool_use"),id:O.string(),name:O.string()})])}),O.object({type:O.literal("content_block_delta"),index:O.number(),delta:O.discriminatedUnion("type",[O.object({type:O.literal("input_json_delta"),partial_json:O.string()}),O.object({type:O.literal("text_delta"),text:O.string()})])}),O.object({type:O.literal("content_block_stop"),index:O.number()}),O.object({type:O.literal("error"),error:O.object({type:O.string(),message:O.string()})}),O.object({type:O.literal("message_delta"),delta:O.object({stop_reason:O.string().nullish()}),usage:O.object({output_tokens:O.number()})}),O.object({type:O.literal("message_stop")}),O.object({type:O.literal("ping")})]),OC=O.object({command:O.string(),restart:O.boolean().optional()});function MC(e={}){return{type:"provider-defined",id:"anthropic.bash_20241022",args:{},parameters:OC,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}}var LC=O.object({command:O.enum(["view","create","str_replace","insert","undo_edit"]),path:O.string(),file_text:O.string().optional(),insert_line:O.number().int().optional(),new_str:O.string().optional(),old_str:O.string().optional(),view_range:O.array(O.number().int()).optional()});function FC(e={}){return{type:"provider-defined",id:"anthropic.text_editor_20241022",args:{},parameters:LC,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}}var UC=O.object({action:O.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:O.array(O.number().int()).optional(),text:O.string().optional()});function jC(e){return{type:"provider-defined",id:"anthropic.computer_20241022",args:{displayWidthPx:e.displayWidthPx,displayHeightPx:e.displayHeightPx,displayNumber:e.displayNumber},parameters:UC,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}}var YC={bash_20241022:MC,textEditor_20241022:FC,computer_20241022:jC};function u0(e={}){var t;let r=(t=$g(e.baseURL))!=null?t:"https://api.anthropic.com/v1",n=()=>({"anthropic-version":"2023-06-01","x-api-key":Ug({apiKey:e.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...e.headers}),s=(h,b={})=>new AC(h,b,{provider:"anthropic.messages",baseURL:r,headers:n,fetch:e.fetch}),c=function(h,b){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return s(h,b)};return c.languageModel=s,c.chat=s,c.messages=s,c.textEmbeddingModel=h=>{throw new Qy({modelId:h,modelType:"textEmbeddingModel"})},c.tools=YC,c}var o1=u0();function $C({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:r="system"}){let n=[];for(let{role:s,content:c}of e)switch(s){case"system":{switch(r){case"system":{n.push({role:"system",content:c});break}case"developer":{n.push({role:"developer",content:c});break}case"remove":break;default:{let h=r;throw new Error(`Unsupported system message mode: ${h}`)}}break}case"user":{if(c.length===1&&c[0].type==="text"){n.push({role:"user",content:c[0].text});break}n.push({role:"user",content:c.map(h=>{var b,N,k;switch(h.type){case"text":return{type:"text",text:h.text};case"image":return{type:"image_url",image_url:{url:h.image instanceof URL?h.image.toString():`data:${(b=h.mimeType)!=null?b:"image/jpeg"};base64,${wh(h.image)}`,detail:(k=(N=h.providerMetadata)==null?void 0:N.openai)==null?void 0:k.imageDetail}};case"file":{if(h.data instanceof URL)throw new $n({functionality:"'File content parts with URL data' functionality not supported."});switch(h.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:h.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:h.data,format:"mp3"}};default:throw new $n({functionality:`File content part type ${h.mimeType} in user messages`})}}}})});break}case"assistant":{let h="",b=[];for(let N of c)switch(N.type){case"text":{h+=N.text;break}case"tool-call":{b.push({id:N.toolCallId,type:"function",function:{name:N.toolName,arguments:JSON.stringify(N.args)}});break}default:{let k=N;throw new Error(`Unsupported part: ${k}`)}}if(t){if(b.length>1)throw new $n({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});n.push({role:"assistant",content:h,function_call:b.length>0?b[0].function:void 0})}else n.push({role:"assistant",content:h,tool_calls:b.length>0?b:void 0});break}case"tool":{for(let h of c)t?n.push({role:"function",name:h.toolName,content:JSON.stringify(h.result)}):n.push({role:"tool",tool_call_id:h.toolCallId,content:JSON.stringify(h.result)});break}default:{let h=s;throw new Error(`Unsupported role: ${h}`)}}return n}function tE(e){var t,r;return(r=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:n,logprob:s,top_logprobs:c})=>({token:n,logprob:s,topLogprobs:c?c.map(({token:h,logprob:b})=>({token:h,logprob:b})):[]})))!=null?r:void 0}function Kg(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var c0=O.object({error:O.object({message:O.string(),type:O.string().nullish(),param:O.any().nullish(),code:O.union([O.string(),O.number()]).nullish()})}),y_=Yg({errorSchema:c0,errorToMessage:e=>e.error.message});function Wg({id:e,model:t,created:r}){return{id:e??void 0,modelId:t??void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function qC({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:r}){var n;let s=(n=e.tools)!=null&&n.length?e.tools:void 0,c=[];if(s==null)return{tools:void 0,tool_choice:void 0,toolWarnings:c};let h=e.toolChoice;if(t){let k=[];for(let ne of s)ne.type==="provider-defined"?c.push({type:"unsupported-tool",tool:ne}):k.push({name:ne.name,description:ne.description,parameters:ne.parameters});if(h==null)return{functions:k,function_call:void 0,toolWarnings:c};switch(h.type){case"auto":case"none":case void 0:return{functions:k,function_call:void 0,toolWarnings:c};case"required":throw new $n({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:k,function_call:{name:h.toolName},toolWarnings:c}}}let b=[];for(let k of s)k.type==="provider-defined"?c.push({type:"unsupported-tool",tool:k}):b.push({type:"function",function:{name:k.name,description:k.description,parameters:k.parameters,strict:r?!0:void 0}});if(h==null)return{tools:b,tool_choice:void 0,toolWarnings:c};let N=h.type;switch(N){case"auto":case"none":case"required":return{tools:b,tool_choice:N,toolWarnings:c};case"tool":return{tools:b,tool_choice:{type:"function",function:{name:h.toolName}},toolWarnings:c};default:{let k=N;throw new $n({functionality:`Unsupported tool choice type: ${k}`})}}}var BC=class{constructor(e,t,r){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=r}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:Jg(this.modelId)}get defaultObjectGenerationMode(){return VC(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:r,temperature:n,topP:s,topK:c,frequencyPenalty:h,presencePenalty:b,stopSequences:N,responseFormat:k,seed:$,providerMetadata:ne}){var le,we,ge,ve,ce,Pe,Ke,ut;let Fe=e.type,ft=[];c!=null&&ft.push({type:"unsupported-setting",setting:"topK"}),(k==null?void 0:k.type)==="json"&&k.schema!=null&&!this.supportsStructuredOutputs&&ft.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let Ot=this.settings.useLegacyFunctionCalling;if(Ot&&this.settings.parallelToolCalls===!0)throw new $n({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(Ot&&this.supportsStructuredOutputs)throw new $n({functionality:"structuredOutputs with useLegacyFunctionCalling"});rE(this.modelId)==="remove"&&t.some(ur=>ur.role==="system")&&ft.push({type:"other",message:"system messages are removed for this model"});let tr={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:r,temperature:n,top_p:s,frequency_penalty:h,presence_penalty:b,response_format:(k==null?void 0:k.type)==="json"?this.supportsStructuredOutputs&&k.schema!=null?{type:"json_schema",json_schema:{schema:k.schema,strict:!0,name:(le=k.name)!=null?le:"response",description:k.description}}:{type:"json_object"}:void 0,stop:N,seed:$,max_completion_tokens:(we=ne==null?void 0:ne.openai)==null?void 0:we.maxCompletionTokens,store:(ge=ne==null?void 0:ne.openai)==null?void 0:ge.store,metadata:(ve=ne==null?void 0:ne.openai)==null?void 0:ve.metadata,prediction:(ce=ne==null?void 0:ne.openai)==null?void 0:ce.prediction,reasoning_effort:(Ke=(Pe=ne==null?void 0:ne.openai)==null?void 0:Pe.reasoningEffort)!=null?Ke:this.settings.reasoningEffort,messages:$C({prompt:t,useLegacyFunctionCalling:Ot,systemMessageMode:rE(this.modelId)})};switch(Jg(this.modelId)&&(tr.temperature!=null&&(tr.temperature=void 0,ft.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),tr.top_p!=null&&(tr.top_p=void 0,ft.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),tr.frequency_penalty!=null&&(tr.frequency_penalty=void 0,ft.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),tr.presence_penalty!=null&&(tr.presence_penalty=void 0,ft.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),tr.logit_bias!=null&&(tr.logit_bias=void 0,ft.push({type:"other",message:"logitBias is not supported for reasoning models"})),tr.logprobs!=null&&(tr.logprobs=void 0,ft.push({type:"other",message:"logprobs is not supported for reasoning models"})),tr.top_logprobs!=null&&(tr.top_logprobs=void 0,ft.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),tr.max_tokens!=null&&(tr.max_completion_tokens==null&&(tr.max_completion_tokens=tr.max_tokens),tr.max_tokens=void 0)),Fe){case"regular":{let{tools:ur,tool_choice:gr,functions:xr,function_call:pn,toolWarnings:vo}=qC({mode:e,useLegacyFunctionCalling:Ot,structuredOutputs:this.supportsStructuredOutputs});return{args:{...tr,tools:ur,tool_choice:gr,functions:xr,function_call:pn},warnings:[...ft,...vo]}}case"object-json":return{args:{...tr,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(ut=e.name)!=null?ut:"response",description:e.description}}:{type:"json_object"}},warnings:ft};case"object-tool":return{args:Ot?{...tr,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...tr,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:ft};default:{let ur=Fe;throw new Error(`Unsupported type: ${ur}`)}}}async doGenerate(e){var t,r,n,s,c,h,b,N;let{args:k,warnings:$}=this.getArgs(e),{responseHeaders:ne,value:le}=await Mf({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Od(this.config.headers(),e.headers),body:k,failedResponseHandler:y_,successfulResponseHandler:Cv(zC),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:we,...ge}=k,ve=le.choices[0],ce=(t=le.usage)==null?void 0:t.completion_tokens_details,Pe=(r=le.usage)==null?void 0:r.prompt_tokens_details,Ke={openai:{}};return(ce==null?void 0:ce.reasoning_tokens)!=null&&(Ke.openai.reasoningTokens=ce==null?void 0:ce.reasoning_tokens),(ce==null?void 0:ce.accepted_prediction_tokens)!=null&&(Ke.openai.acceptedPredictionTokens=ce==null?void 0:ce.accepted_prediction_tokens),(ce==null?void 0:ce.rejected_prediction_tokens)!=null&&(Ke.openai.rejectedPredictionTokens=ce==null?void 0:ce.rejected_prediction_tokens),(Pe==null?void 0:Pe.cached_tokens)!=null&&(Ke.openai.cachedPromptTokens=Pe==null?void 0:Pe.cached_tokens),{text:(n=ve.message.content)!=null?n:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&ve.message.function_call?[{toolCallType:"function",toolCallId:hm(),toolName:ve.message.function_call.name,args:ve.message.function_call.arguments}]:(s=ve.message.tool_calls)==null?void 0:s.map(ut=>{var Fe;return{toolCallType:"function",toolCallId:(Fe=ut.id)!=null?Fe:hm(),toolName:ut.function.name,args:ut.function.arguments}}),finishReason:Kg(ve.finish_reason),usage:{promptTokens:(h=(c=le.usage)==null?void 0:c.prompt_tokens)!=null?h:NaN,completionTokens:(N=(b=le.usage)==null?void 0:b.completion_tokens)!=null?N:NaN},rawCall:{rawPrompt:we,rawSettings:ge},rawResponse:{headers:ne},request:{body:JSON.stringify(k)},response:Wg(le),warnings:$,logprobs:tE(ve.logprobs),providerMetadata:Ke}}async doStream(e){var t;if((t=this.settings.simulateStreaming)!=null?t:HC(this.modelId)){let ce=await this.doGenerate(e);return{stream:new ReadableStream({start(Ke){if(Ke.enqueue({type:"response-metadata",...ce.response}),ce.text&&Ke.enqueue({type:"text-delta",textDelta:ce.text}),ce.toolCalls)for(let ut of ce.toolCalls)Ke.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ut.toolCallId,toolName:ut.toolName,argsTextDelta:ut.args}),Ke.enqueue({type:"tool-call",...ut});Ke.enqueue({type:"finish",finishReason:ce.finishReason,usage:ce.usage,logprobs:ce.logprobs,providerMetadata:ce.providerMetadata}),Ke.close()}}),rawCall:ce.rawCall,rawResponse:ce.rawResponse,warnings:ce.warnings}}let{args:r,warnings:n}=this.getArgs(e),s={...r,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:c,value:h}=await Mf({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Od(this.config.headers(),e.headers),body:s,failedResponseHandler:y_,successfulResponseHandler:l_(GC),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:b,...N}=r,k=[],$="unknown",ne={promptTokens:void 0,completionTokens:void 0},le,we=!0,{useLegacyFunctionCalling:ge}=this.settings,ve={openai:{}};return{stream:h.pipeThrough(new TransformStream({transform(ce,Pe){var Ke,ut,Fe,ft,Ot,tr,ur,gr,xr,pn,vo,Yi;if(!ce.success){$="error",Pe.enqueue({type:"error",error:ce.error});return}let Vr=ce.value;if("error"in Vr){$="error",Pe.enqueue({type:"error",error:Vr.error});return}if(we&&(we=!1,Pe.enqueue({type:"response-metadata",...Wg(Vr)})),Vr.usage!=null){let{prompt_tokens:Ir,completion_tokens:vn,prompt_tokens_details:Gt,completion_tokens_details:qt}=Vr.usage;ne={promptTokens:Ir??void 0,completionTokens:vn??void 0},(qt==null?void 0:qt.reasoning_tokens)!=null&&(ve.openai.reasoningTokens=qt==null?void 0:qt.reasoning_tokens),(qt==null?void 0:qt.accepted_prediction_tokens)!=null&&(ve.openai.acceptedPredictionTokens=qt==null?void 0:qt.accepted_prediction_tokens),(qt==null?void 0:qt.rejected_prediction_tokens)!=null&&(ve.openai.rejectedPredictionTokens=qt==null?void 0:qt.rejected_prediction_tokens),(Gt==null?void 0:Gt.cached_tokens)!=null&&(ve.openai.cachedPromptTokens=Gt==null?void 0:Gt.cached_tokens)}let Sn=Vr.choices[0];if((Sn==null?void 0:Sn.finish_reason)!=null&&($=Kg(Sn.finish_reason)),(Sn==null?void 0:Sn.delta)==null)return;let tt=Sn.delta;tt.content!=null&&Pe.enqueue({type:"text-delta",textDelta:tt.content});let Ts=tE(Sn==null?void 0:Sn.logprobs);Ts!=null&&Ts.length&&(le===void 0&&(le=[]),le.push(...Ts));let Ve=ge&&tt.function_call!=null?[{type:"function",id:hm(),function:tt.function_call,index:0}]:tt.tool_calls;if(Ve!=null)for(let Ir of Ve){let vn=Ir.index;if(k[vn]==null){if(Ir.type!=="function")throw new j_({data:Ir,message:"Expected 'function' type."});if(Ir.id==null)throw new j_({data:Ir,message:"Expected 'id' to be a string."});if(((Ke=Ir.function)==null?void 0:Ke.name)==null)throw new j_({data:Ir,message:"Expected 'function.name' to be a string."});k[vn]={id:Ir.id,type:"function",function:{name:Ir.function.name,arguments:(ut=Ir.function.arguments)!=null?ut:""},hasFinished:!1};let qt=k[vn];((Fe=qt.function)==null?void 0:Fe.name)!=null&&((ft=qt.function)==null?void 0:ft.arguments)!=null&&(qt.function.arguments.length>0&&Pe.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:qt.id,toolName:qt.function.name,argsTextDelta:qt.function.arguments}),r0(qt.function.arguments)&&(Pe.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Ot=qt.id)!=null?Ot:hm(),toolName:qt.function.name,args:qt.function.arguments}),qt.hasFinished=!0));continue}let Gt=k[vn];Gt.hasFinished||(((tr=Ir.function)==null?void 0:tr.arguments)!=null&&(Gt.function.arguments+=(gr=(ur=Ir.function)==null?void 0:ur.arguments)!=null?gr:""),Pe.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Gt.id,toolName:Gt.function.name,argsTextDelta:(xr=Ir.function.arguments)!=null?xr:""}),((pn=Gt.function)==null?void 0:pn.name)!=null&&((vo=Gt.function)==null?void 0:vo.arguments)!=null&&r0(Gt.function.arguments)&&(Pe.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Yi=Gt.id)!=null?Yi:hm(),toolName:Gt.function.name,args:Gt.function.arguments}),Gt.hasFinished=!0))}},flush(ce){var Pe,Ke;ce.enqueue({type:"finish",finishReason:$,logprobs:le,usage:{promptTokens:(Pe=ne.promptTokens)!=null?Pe:NaN,completionTokens:(Ke=ne.completionTokens)!=null?Ke:NaN},...ve!=null?{providerMetadata:ve}:{}})}})),rawCall:{rawPrompt:b,rawSettings:N},rawResponse:{headers:c},request:{body:JSON.stringify(s)},warnings:n}}},aE=O.object({prompt_tokens:O.number().nullish(),completion_tokens:O.number().nullish(),prompt_tokens_details:O.object({cached_tokens:O.number().nullish()}).nullish(),completion_tokens_details:O.object({reasoning_tokens:O.number().nullish(),accepted_prediction_tokens:O.number().nullish(),rejected_prediction_tokens:O.number().nullish()}).nullish()}).nullish(),zC=O.object({id:O.string().nullish(),created:O.number().nullish(),model:O.string().nullish(),choices:O.array(O.object({message:O.object({role:O.literal("assistant").nullish(),content:O.string().nullish(),function_call:O.object({arguments:O.string(),name:O.string()}).nullish(),tool_calls:O.array(O.object({id:O.string().nullish(),type:O.literal("function"),function:O.object({name:O.string(),arguments:O.string()})})).nullish()}),index:O.number(),logprobs:O.object({content:O.array(O.object({token:O.string(),logprob:O.number(),top_logprobs:O.array(O.object({token:O.string(),logprob:O.number()}))})).nullable()}).nullish(),finish_reason:O.string().nullish()})),usage:aE}),GC=O.union([O.object({id:O.string().nullish(),created:O.number().nullish(),model:O.string().nullish(),choices:O.array(O.object({delta:O.object({role:O.enum(["assistant"]).nullish(),content:O.string().nullish(),function_call:O.object({name:O.string().optional(),arguments:O.string().optional()}).nullish(),tool_calls:O.array(O.object({index:O.number(),id:O.string().nullish(),type:O.literal("function").optional(),function:O.object({name:O.string().nullish(),arguments:O.string().nullish()})})).nullish()}).nullish(),logprobs:O.object({content:O.array(O.object({token:O.string(),logprob:O.number(),top_logprobs:O.array(O.object({token:O.string(),logprob:O.number()}))})).nullable()}).nullish(),finish_reason:O.string().nullable().optional(),index:O.number()})),usage:aE}),c0]);function Jg(e){return e==="o1"||e.startsWith("o1-")||e==="o3"||e.startsWith("o3-")}function VC(e){return e.startsWith("gpt-4o-audio-preview")}function rE(e){var t,r;return Jg(e)?(r=(t=iE[e])==null?void 0:t.systemMessageMode)!=null?r:"developer":"system"}function HC(e){var t,r;return Jg(e)?(r=(t=iE[e])==null?void 0:t.simulateStreamingByDefault)!=null?r:!0:!1}var iE={"o1-mini":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o1-mini-2024-09-12":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o1-preview":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o1-preview-2024-09-12":{systemMessageMode:"remove",simulateStreamingByDefault:!1}};function KC({prompt:e,inputFormat:t,user:r="user",assistant:n="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let s="";e[0].role==="system"&&(s+=`${e[0].content}

`,e=e.slice(1));for(let{role:c,content:h}of e)switch(c){case"system":throw new Nv({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{let b=h.map(N=>{switch(N.type){case"text":return N.text;case"image":throw new $n({functionality:"images"})}}).join("");s+=`${r}:
${b}

`;break}case"assistant":{let b=h.map(N=>{switch(N.type){case"text":return N.text;case"tool-call":throw new $n({functionality:"tool-call messages"})}}).join("");s+=`${n}:
${b}

`;break}case"tool":throw new $n({functionality:"tool messages"});default:{let b=c;throw new Error(`Unsupported role: ${b}`)}}return s+=`${n}:
`,{prompt:s,stopSequences:[`
${r}:`]}}function nE(e){return e==null?void 0:e.tokens.map((t,r)=>({token:t,logprob:e.token_logprobs[r],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[r]).map(([n,s])=>({token:n,logprob:s})):[]}))}var WC=class{constructor(e,t,r){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:r,maxTokens:n,temperature:s,topP:c,topK:h,frequencyPenalty:b,presencePenalty:N,stopSequences:k,responseFormat:$,seed:ne}){var le;let we=e.type,ge=[];h!=null&&ge.push({type:"unsupported-setting",setting:"topK"}),$!=null&&$.type!=="text"&&ge.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:ve,stopSequences:ce}=KC({prompt:r,inputFormat:t}),Pe=[...ce??[],...k??[]],Ke={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:n,temperature:s,top_p:c,frequency_penalty:b,presence_penalty:N,seed:ne,prompt:ve,stop:Pe.length>0?Pe:void 0};switch(we){case"regular":{if((le=e.tools)!=null&&le.length)throw new $n({functionality:"tools"});if(e.toolChoice)throw new $n({functionality:"toolChoice"});return{args:Ke,warnings:ge}}case"object-json":throw new $n({functionality:"object-json mode"});case"object-tool":throw new $n({functionality:"object-tool mode"});default:{let ut=we;throw new Error(`Unsupported type: ${ut}`)}}}async doGenerate(e){let{args:t,warnings:r}=this.getArgs(e),{responseHeaders:n,value:s}=await Mf({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Od(this.config.headers(),e.headers),body:t,failedResponseHandler:y_,successfulResponseHandler:Cv(JC),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:c,...h}=t,b=s.choices[0];return{text:b.text,usage:{promptTokens:s.usage.prompt_tokens,completionTokens:s.usage.completion_tokens},finishReason:Kg(b.finish_reason),logprobs:nE(b.logprobs),rawCall:{rawPrompt:c,rawSettings:h},rawResponse:{headers:n},response:Wg(s),warnings:r,request:{body:JSON.stringify(t)}}}async doStream(e){let{args:t,warnings:r}=this.getArgs(e),n={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:s,value:c}=await Mf({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Od(this.config.headers(),e.headers),body:n,failedResponseHandler:y_,successfulResponseHandler:l_(ZC),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:h,...b}=t,N="unknown",k={promptTokens:Number.NaN,completionTokens:Number.NaN},$,ne=!0;return{stream:c.pipeThrough(new TransformStream({transform(le,we){if(!le.success){N="error",we.enqueue({type:"error",error:le.error});return}let ge=le.value;if("error"in ge){N="error",we.enqueue({type:"error",error:ge.error});return}ne&&(ne=!1,we.enqueue({type:"response-metadata",...Wg(ge)})),ge.usage!=null&&(k={promptTokens:ge.usage.prompt_tokens,completionTokens:ge.usage.completion_tokens});let ve=ge.choices[0];(ve==null?void 0:ve.finish_reason)!=null&&(N=Kg(ve.finish_reason)),(ve==null?void 0:ve.text)!=null&&we.enqueue({type:"text-delta",textDelta:ve.text});let ce=nE(ve==null?void 0:ve.logprobs);ce!=null&&ce.length&&($===void 0&&($=[]),$.push(...ce))},flush(le){le.enqueue({type:"finish",finishReason:N,logprobs:$,usage:k})}})),rawCall:{rawPrompt:h,rawSettings:b},rawResponse:{headers:s},warnings:r,request:{body:JSON.stringify(n)}}}},JC=O.object({id:O.string().nullish(),created:O.number().nullish(),model:O.string().nullish(),choices:O.array(O.object({text:O.string(),finish_reason:O.string(),logprobs:O.object({tokens:O.array(O.string()),token_logprobs:O.array(O.number()),top_logprobs:O.array(O.record(O.string(),O.number())).nullable()}).nullish()})),usage:O.object({prompt_tokens:O.number(),completion_tokens:O.number()})}),ZC=O.union([O.object({id:O.string().nullish(),created:O.number().nullish(),model:O.string().nullish(),choices:O.array(O.object({text:O.string(),finish_reason:O.string().nullish(),index:O.number(),logprobs:O.object({tokens:O.array(O.string()),token_logprobs:O.array(O.number()),top_logprobs:O.array(O.record(O.string(),O.number())).nullable()}).nullish()})),usage:O.object({prompt_tokens:O.number(),completion_tokens:O.number()}).nullish()}),c0]),XC=class{constructor(e,t,r){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:r}){if(e.length>this.maxEmbeddingsPerCall)throw new Tb({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let{responseHeaders:n,value:s}=await Mf({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Od(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:y_,successfulResponseHandler:Cv(QC),abortSignal:r,fetch:this.config.fetch});return{embeddings:s.data.map(c=>c.embedding),usage:s.usage?{tokens:s.usage.prompt_tokens}:void 0,rawResponse:{headers:n}}}},QC=O.object({data:O.array(O.object({embedding:O.array(O.number())})),usage:O.object({prompt_tokens:O.number()}).nullish()}),ex={"dall-e-3":1,"dall-e-2":10},tx=class{constructor(e,t,r){this.modelId=e,this.settings=t,this.config=r,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:ex[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:r,aspectRatio:n,seed:s,providerOptions:c,headers:h,abortSignal:b}){var N;let k=[];n!=null&&k.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),s!=null&&k.push({type:"unsupported-setting",setting:"seed"});let{value:$}=await Mf({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Od(this.config.headers(),h),body:{model:this.modelId,prompt:e,n:t,size:r,...(N=c.openai)!=null?N:{},response_format:"b64_json"},failedResponseHandler:y_,successfulResponseHandler:Cv(rx),abortSignal:b,fetch:this.config.fetch});return{images:$.data.map(ne=>ne.b64_json),warnings:k}}},rx=O.object({data:O.array(O.object({b64_json:O.string()}))});function l0(e={}){var t,r,n;let s=(t=$g(e.baseURL))!=null?t:"https://api.openai.com/v1",c=(r=e.compatibility)!=null?r:"compatible",h=(n=e.name)!=null?n:"openai",b=()=>({Authorization:`Bearer ${Ug({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),N=(ge,ve={})=>new BC(ge,ve,{provider:`${h}.chat`,url:({path:ce})=>`${s}${ce}`,headers:b,compatibility:c,fetch:e.fetch}),k=(ge,ve={})=>new WC(ge,ve,{provider:`${h}.completion`,url:({path:ce})=>`${s}${ce}`,headers:b,compatibility:c,fetch:e.fetch}),$=(ge,ve={})=>new XC(ge,ve,{provider:`${h}.embedding`,url:({path:ce})=>`${s}${ce}`,headers:b,fetch:e.fetch}),ne=(ge,ve={})=>new tx(ge,ve,{provider:`${h}.image`,url:({path:ce})=>`${s}${ce}`,headers:b,fetch:e.fetch}),le=(ge,ve)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return ge==="gpt-3.5-turbo-instruct"?k(ge,ve):N(ge,ve)},we=function(ge,ve){return le(ge,ve)};return we.languageModel=le,we.chat=N,we.completion=k,we.embedding=$,we.textEmbedding=$,we.textEmbeddingModel=$,we.image=ne,we}var D1=l0({compatibility:"strict"});var lo=require("vscode"),nx=["rate limit exceeded","net::err","check your network connection","check your firewall","request failed","400 bad request","server error","error on conversation request","response contained no choices","response got filtered"];function ax({role:e,content:t}){switch(e){case"system":return lo.LanguageModelChatMessage.User(t);case"user":let r=t.map(c=>{switch(c.type){case"text":return new lo.LanguageModelTextPart(c.text);case"image":throw new Error("Image content not supported");case"file":throw new Error("File content not supported")}});return lo.LanguageModelChatMessage.User(r);case"tool":let n=t.map(c=>{switch(c.type){case"tool-result":let h=typeof c.result=="string"?c.result:JSON.stringify(c.result);return new lo.LanguageModelToolResultPart(c.toolCallId,[new lo.LanguageModelTextPart(h)])}});return lo.LanguageModelChatMessage.User(n);case"assistant":let s=t.map(c=>{switch(c.type){case"text":return new lo.LanguageModelTextPart(c.text);case"tool-call":return new lo.LanguageModelToolCallPart(c.toolCallId,c.toolName,c.args)}});return s[0]instanceof lo.LanguageModelTextPart||s.unshift(new lo.LanguageModelTextPart("ok")),lo.LanguageModelChatMessage.Assistant(s)}}function ix(e){switch(e.type){case"function":return{name:e.name,description:e.description,inputSchema:e.parameters};case"provider-defined":throw new Error("Provider-defined tools not supported")}}function ox(e){let t=String(e.message).toLowerCase();for(let r of nx)if(t.includes(r))return!0;return!1}var f0=class{specificationVersion="v1";defaultObjectGenerationMode="json";provider="copilot";supportsImageUrls=!1;constructor(t,r,n){this.modelId=t,this.settings=r,this.config=n}async doGenerate(t){throw new Error("Not implemented")}async doStream(t){var k;let[r]=await lo.lm.selectChatModels({family:this.modelId,vendor:"copilot"});if(!r)throw new Error("Model not found: "+this.modelId);let{prompt:n,abortSignal:s,mode:c}=t;if(c.type!=="regular")throw new Error("Request mode not supported: "+c.type);let h=n.map(ax),b=(k=c.tools)==null?void 0:k.map(ix);return n.slice(-1)[0].role=="tool"&&h.push(lo.LanguageModelChatMessage.User("Follow the instructions in the tool call results above")),{stream:new ReadableStream({async start($){let ne=0;for(;;){try{let le=await r.sendRequest(h,{tools:b,modelOptions:{temperature:.2,max_tokens:8192}});for await(let we of le.stream)we instanceof lo.LanguageModelTextPart?$.enqueue({type:"text-delta",textDelta:we.value}):we instanceof lo.LanguageModelToolCallPart?$.enqueue({type:"tool-call",toolCallType:"function",toolCallId:we.callId,toolName:we.name,args:JSON.stringify(we.input)}):$.error(new Error("Unknown content format"));$.close();return}catch(le){if(!ox(le)||++ne>5){$.error(le);return}$.enqueue({type:"error",error:{event:"retry",count:ne,message:le.message||String(le),cause:le}}),String(le.message).toLowerCase().includes("rate limit exceeded")&&await oE(30)}await oE(5*ne)}}}),rawCall:{rawPrompt:"",rawSettings:{}}}}};function sE(e){let t=(n,s={})=>new f0(n,s,{provider:"copilot"}),r=function(n,s={}){return t(n,s)};return r.chat=t,r}async function oE(e){return new Promise(t=>setTimeout(t,e*1e3))}var sx={anthropic:u0,openai:l0,copilot:sE},uE={};function d0({id:e,provider:t,apiKey:r}){let n=uE[t];if(!n){let s=sx[t];if(!s)throw new Error("Unknown provider: "+t);n=s({apiKey:r}),uE[t]=n}return n(e,{cacheControl:!0})}var lE=function(e,t,r,n){var s;t[0]=0;for(var c=1;c<t.length;c++){var h=t[c++],b=t[c]?(t[0]|=h?1:2,r[t[c++]]):t[++c];h===3?n[0]=b:h===4?n[1]=Object.assign(n[1]||{},b):h===5?(n[1]=n[1]||{})[t[++c]]=b:h===6?n[1][t[++c]]+=b+"":h?(s=e.apply(b,lE(e,b,r,["",null])),n.push(s),b[0]?t[0]|=2:(t[c-2]=0,t[c]=s)):n.push(b)}return n},cE=new Map;function fE(e){var t=cE.get(this);return t||(t=new Map,cE.set(this,t)),(t=lE(this,t.get(e)||(t.set(e,t=function(r){for(var n,s,c=1,h="",b="",N=[0],k=function(le){c===1&&(le||(h=h.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?N.push(0,le,h):c===3&&(le||h)?(N.push(3,le,h),c=2):c===2&&h==="..."&&le?N.push(4,le,0):c===2&&h&&!le?N.push(5,0,!0,h):c>=5&&((h||!le&&c===5)&&(N.push(c,0,h,s),c=6),le&&(N.push(c,le,0,s),c=6)),h=""},$=0;$<r.length;$++){$&&(c===1&&k(),k($));for(var ne=0;ne<r[$].length;ne++)n=r[$][ne],c===1?n==="<"?(k(),N=[N],c=3):h+=n:c===4?h==="--"&&n===">"?(c=1,h=""):h=n+h[0]:b?n===b?b="":h+=n:n==='"'||n==="'"?b=n:n===">"?(k(),c=1):c&&(n==="="?(c=5,s=h,h=""):n==="/"&&(c<5||r[$][ne+1]===">")?(k(),c===3&&(N=N[0]),c=N,(N=N[0]).push(2,0,c),c=0):n===" "||n==="	"||n===`
`||n==="\r"?(k(),c=2):h+=n),c===3&&h==="!--"&&(c=4,N=N[0])}return k(),N}(e)),t),arguments,[])).length>1?t:t[0]}function p0(e){if(Array.isArray(e))return e.map(p0);if(typeof e!="string")return e;let t=e.split(`
`),r=100;if(t.forEach((n,s)=>{let c=n.match(/^(\s*)\S/);s&&c&&(r=Math.min(r,c[1].length))}),r<100)for(let n=1;n<t.length;n++)t[n]=t[n].slice(r);return t.join(`
`)}function ux(e,t,...r){return{type:e,props:t,children:p0(r)}}var cx=fE.bind(ux);function S_(...e){return p0(cx(...e))}function ah(e,t=""){if(Array.isArray(e))return e.reduce((r,n)=>{let s=ah(n,t);return/^[\n]/.test(s)&&/[\n]$/.test(r)?r+s.slice(1):/^[\s\n]/.test(s)||/[\s\n]$/.test(r)?r+s:r&&s?r+" "+s:r||s||""},"");if((e==null?void 0:e.type)=="markdown"){let{props:r}=e;return r.text}if((e==null?void 0:e.type)=="code"){let{props:r}=e;return"\n```"+(r.type||"")+`
`+r.text+"\n```\n"}if(typeof(e==null?void 0:e.type)=="string"){let{type:r,children:n}=e;return ah([`
`+t+"<"+r+`>
`,ah(n,t+"  "),`
`+t+"</"+r+`>
`])}if(typeof(e==null?void 0:e.type)=="function"){let{type:r,props:n,children:s}=e;return ah(r(n,s),t)}return String(e??"").split(`
`).map(r=>t+r).join(`
`)}var v0=[{provider:"anthropic",family:"claude-3.5-sonnet",id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet",cacheControl:!0},{provider:"openai",family:"gpt-4o",id:"gpt-4o-2024-08-06",name:"GPT 4o"},{provider:"openrouter",family:"claude-3.5-sonnet",id:"anthropic/claude-3.5-sonnet:beta",name:"Claude 3.5 Sonnet",cacheControl:!0},{provider:"openrouter",family:"gpt-4o",id:"openai/gpt-4o-2024-08-06",name:"GPT 4o"}];var dE=[{id:"anthropic",name:"Anthropic",envKeyName:"ANTHROPIC_API_KEY",website:"https://console.anthropic.com"},{id:"openai",name:"OpenAI",envKeyName:"OPENAI_API_KEY",website:"https://platform.openai.com"},{id:"openrouter",name:"Open Router",envKeyName:"OPENROUTER_API_KEY",website:"https://openrouter.ai"}];var vE=Symbol("Let zodToJsonSchema decide on which parser to use"),pE={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},mE=e=>typeof e=="string"?{...pE,name:e}:{...pE,...e};var hE=e=>{let t=mE(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([n,s])=>[s._def,{def:s._def,path:[...t.basePath,t.definitionPath,n],jsonSchema:void 0}]))}};function m0(e,t,r,n){n!=null&&n.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function an(e,t,r,n,s){e[t]=r,m0(e,t,n,s)}function _E(){return{}}function gE(e,t){var n,s,c;let r={type:"array"};return(n=e.type)!=null&&n._def&&((c=(s=e.type)==null?void 0:s._def)==null?void 0:c.typeName)!==ze.ZodAny&&(r.items=pr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&an(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&an(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(an(r,"minItems",e.exactLength.value,e.exactLength.message,t),an(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}function yE(e,t){let r={type:"integer",format:"int64"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"min":t.target==="jsonSchema7"?n.inclusive?an(r,"minimum",n.value,n.message,t):an(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),an(r,"minimum",n.value,n.message,t));break;case"max":t.target==="jsonSchema7"?n.inclusive?an(r,"maximum",n.value,n.message,t):an(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),an(r,"maximum",n.value,n.message,t));break;case"multipleOf":an(r,"multipleOf",n.value,n.message,t);break}return r}function SE(){return{type:"boolean"}}function Zg(e,t){return pr(e.type._def,t)}var bE=(e,t)=>pr(e.innerType._def,t);function h0(e,t,r){let n=r??t.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((s,c)=>h0(e,t,s))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return lx(e,t)}}var lx=(e,t)=>{let r={type:"integer",format:"unix-time"};if(t.target==="openApi3")return r;for(let n of e.checks)switch(n.kind){case"min":an(r,"minimum",n.value,n.message,t);break;case"max":an(r,"maximum",n.value,n.message,t);break}return r};function EE(e,t){return{...pr(e.innerType._def,t),default:e.defaultValue()}}function TE(e,t){return t.effectStrategy==="input"?pr(e.schema._def,t):{}}function wE(e){return{type:"string",enum:Array.from(e.values)}}var fx=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function IE(e,t){let r=[pr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),pr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(c=>!!c),n=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,s=[];return r.forEach(c=>{if(fx(c))s.push(...c.allOf),c.unevaluatedProperties===void 0&&(n=void 0);else{let h=c;if("additionalProperties"in c&&c.additionalProperties===!1){let{additionalProperties:b,...N}=c;h=N}else n=void 0;s.push(h)}}),s.length?{allOf:s,...n}:void 0}function NE(e,t){let r=typeof e.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[e.value]}:{type:r==="bigint"?"integer":r,const:e.value}}var _0,Op={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(_0===void 0&&(_0=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),_0),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Xg(e,t){let r={type:"string"};if(e.checks)for(let n of e.checks)switch(n.kind){case"min":an(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,t);break;case"max":an(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Mp(r,"email",n.message,t);break;case"format:idn-email":Mp(r,"idn-email",n.message,t);break;case"pattern:zod":Ic(r,Op.email,n.message,t);break}break;case"url":Mp(r,"uri",n.message,t);break;case"uuid":Mp(r,"uuid",n.message,t);break;case"regex":Ic(r,n.regex,n.message,t);break;case"cuid":Ic(r,Op.cuid,n.message,t);break;case"cuid2":Ic(r,Op.cuid2,n.message,t);break;case"startsWith":Ic(r,RegExp(`^${g0(n.value,t)}`),n.message,t);break;case"endsWith":Ic(r,RegExp(`${g0(n.value,t)}$`),n.message,t);break;case"datetime":Mp(r,"date-time",n.message,t);break;case"date":Mp(r,"date",n.message,t);break;case"time":Mp(r,"time",n.message,t);break;case"duration":Mp(r,"duration",n.message,t);break;case"length":an(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,t),an(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"includes":{Ic(r,RegExp(g0(n.value,t)),n.message,t);break}case"ip":{n.version!=="v6"&&Mp(r,"ipv4",n.message,t),n.version!=="v4"&&Mp(r,"ipv6",n.message,t);break}case"base64url":Ic(r,Op.base64url,n.message,t);break;case"jwt":Ic(r,Op.jwt,n.message,t);break;case"cidr":{n.version!=="v6"&&Ic(r,Op.ipv4Cidr,n.message,t),n.version!=="v4"&&Ic(r,Op.ipv6Cidr,n.message,t);break}case"emoji":Ic(r,Op.emoji(),n.message,t);break;case"ulid":{Ic(r,Op.ulid,n.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Mp(r,"binary",n.message,t);break}case"contentEncoding:base64":{an(r,"contentEncoding","base64",n.message,t);break}case"pattern:zod":{Ic(r,Op.base64,n.message,t);break}}break}case"nanoid":Ic(r,Op.nanoid,n.message,t);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function g0(e,t){return t.patternStrategy==="escape"?px(e):e}var dx=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function px(e){let t="";for(let r=0;r<e.length;r++)dx.has(e[r])||(t+="\\"),t+=e[r];return t}function Mp(e,t,r,n){var s;e.format||(s=e.anyOf)!=null&&s.some(c=>c.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&n.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):an(e,"format",t,r,n)}function Ic(e,t,r,n){var s;e.pattern||(s=e.allOf)!=null&&s.some(c=>c.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&n.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:DE(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):an(e,"pattern",DE(t,n),r,n)}function DE(e,t){var N;if(!t.applyRegexFlags||!e.flags)return e.source;let r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=r.i?e.source.toLowerCase():e.source,s="",c=!1,h=!1,b=!1;for(let k=0;k<n.length;k++){if(c){s+=n[k],c=!1;continue}if(r.i){if(h){if(n[k].match(/[a-z]/)){b?(s+=n[k],s+=`${n[k-2]}-${n[k]}`.toUpperCase(),b=!1):n[k+1]==="-"&&((N=n[k+2])!=null&&N.match(/[a-z]/))?(s+=n[k],b=!0):s+=`${n[k]}${n[k].toUpperCase()}`;continue}}else if(n[k].match(/[a-z]/)){s+=`[${n[k]}${n[k].toUpperCase()}]`;continue}}if(r.m){if(n[k]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(n[k]==="$"){s+=`($|(?=[\r
]))`;continue}}if(r.s&&n[k]==="."){s+=h?`${n[k]}\r
`:`[${n[k]}\r
]`;continue}s+=n[k],n[k]==="\\"?c=!0:h&&n[k]==="]"?h=!1:!h&&n[k]==="["&&(h=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return s}function Qg(e,t){var n,s,c,h,b,N;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((n=e.keyType)==null?void 0:n._def.typeName)===ze.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((k,$)=>({...k,[$]:pr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",$]})??{}}),{}),additionalProperties:!1};let r={type:"object",additionalProperties:pr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??{}};if(t.target==="openApi3")return r;if(((s=e.keyType)==null?void 0:s._def.typeName)===ze.ZodString&&((c=e.keyType._def.checks)!=null&&c.length)){let{type:k,...$}=Xg(e.keyType._def,t);return{...r,propertyNames:$}}else{if(((h=e.keyType)==null?void 0:h._def.typeName)===ze.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(((b=e.keyType)==null?void 0:b._def.typeName)===ze.ZodBranded&&e.keyType._def.type._def.typeName===ze.ZodString&&((N=e.keyType._def.type._def.checks)!=null&&N.length)){let{type:k,...$}=Zg(e.keyType._def,t);return{...r,propertyNames:$}}}return r}function CE(e,t){if(t.mapStrategy==="record")return Qg(e,t);let r=pr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},n=pr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function xE(e){let t=e.values,n=Object.keys(e.values).filter(c=>typeof t[t[c]]!="number").map(c=>t[c]),s=Array.from(new Set(n.map(c=>typeof c)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:n}}function PE(){return{not:{}}}function AE(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var H_={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function kE(e,t){if(t.target==="openApi3")return RE(e,t);let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(n=>n._def.typeName in H_&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((s,c)=>{let h=H_[c._def.typeName];return h&&!s.includes(h)?[...s,h]:s},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((s,c)=>{let h=typeof c._def.value;switch(h){case"string":case"number":case"boolean":return[...s,h];case"bigint":return[...s,"integer"];case"object":if(c._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(n.length===r.length){let s=n.filter((c,h,b)=>b.indexOf(c)===h);return{type:s.length>1?s:s[0],enum:r.reduce((c,h)=>c.includes(h._def.value)?c:[...c,h._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,s)=>[...n,...s._def.values.filter(c=>!n.includes(c))],[])};return RE(e,t)}var RE=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((n,s)=>pr(n._def,{...t,currentPath:[...t.currentPath,"anyOf",`${s}`]})).filter(n=>!!n&&(!t.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function OE(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:H_[e.innerType._def.typeName],nullable:!0}:{type:[H_[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){let n=pr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let r=pr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function ME(e,t){let r={type:"number"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"int":r.type="integer",m0(r,"type",n.message,t);break;case"min":t.target==="jsonSchema7"?n.inclusive?an(r,"minimum",n.value,n.message,t):an(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),an(r,"minimum",n.value,n.message,t));break;case"max":t.target==="jsonSchema7"?n.inclusive?an(r,"maximum",n.value,n.message,t):an(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),an(r,"maximum",n.value,n.message,t));break;case"multipleOf":an(r,"multipleOf",n.value,n.message,t);break}return r}function vx(e,t){return t.removeAdditionalStrategy==="strict"?e.catchall._def.typeName==="ZodNever"?e.unknownKeys!=="strict":pr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0:e.catchall._def.typeName==="ZodNever"?e.unknownKeys==="passthrough":pr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0}function LE(e,t){let r=t.target==="openAi",n={type:"object",...Object.entries(e.shape()).reduce((s,[c,h])=>{if(h===void 0||h._def===void 0)return s;let b=h.isOptional();b&&r&&(h instanceof yl&&(h=h._def.innerType),h.isNullable()||(h=h.nullable()),b=!1);let N=pr(h._def,{...t,currentPath:[...t.currentPath,"properties",c],propertyPath:[...t.currentPath,"properties",c]});return N===void 0?s:{properties:{...s.properties,[c]:N},required:b?s.required:[...s.required,c]}},{properties:{},required:[]}),additionalProperties:vx(e,t)};return n.required.length||delete n.required,n}var FE=(e,t)=>{var n;if(t.currentPath.toString()===((n=t.propertyPath)==null?void 0:n.toString()))return pr(e.innerType._def,t);let r=pr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}};var UE=(e,t)=>{if(t.pipeStrategy==="input")return pr(e.in._def,t);if(t.pipeStrategy==="output")return pr(e.out._def,t);let r=pr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),n=pr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(s=>s!==void 0)}};function jE(e,t){return pr(e.type._def,t)}function YE(e,t){let n={type:"array",uniqueItems:!0,items:pr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&an(n,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&an(n,"maxItems",e.maxSize.value,e.maxSize.message,t),n}function $E(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,n)=>pr(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:pr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,n)=>pr(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function qE(){return{not:{}}}function BE(){return{}}var zE=(e,t)=>pr(e.innerType._def,t);function pr(e,t,r=!1){var h;let n=t.seen.get(e);if(t.override){let b=(h=t.override)==null?void 0:h.call(t,e,t,n,r);if(b!==vE)return b}if(n&&!r){let b=mx(n,t);if(b!==void 0)return b}let s={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,s);let c=_x(e,e.typeName,t);return c&&gx(e,t,c),s.jsonSchema=c,c}var mx=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:hx(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,n)=>t.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},hx=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},_x=(e,t,r)=>{switch(t){case ze.ZodString:return Xg(e,r);case ze.ZodNumber:return ME(e,r);case ze.ZodObject:return LE(e,r);case ze.ZodBigInt:return yE(e,r);case ze.ZodBoolean:return SE();case ze.ZodDate:return h0(e,r);case ze.ZodUndefined:return qE();case ze.ZodNull:return AE(r);case ze.ZodArray:return gE(e,r);case ze.ZodUnion:case ze.ZodDiscriminatedUnion:return kE(e,r);case ze.ZodIntersection:return IE(e,r);case ze.ZodTuple:return $E(e,r);case ze.ZodRecord:return Qg(e,r);case ze.ZodLiteral:return NE(e,r);case ze.ZodEnum:return wE(e);case ze.ZodNativeEnum:return xE(e);case ze.ZodNullable:return OE(e,r);case ze.ZodOptional:return FE(e,r);case ze.ZodMap:return CE(e,r);case ze.ZodSet:return YE(e,r);case ze.ZodLazy:return pr(e.getter()._def,r);case ze.ZodPromise:return jE(e,r);case ze.ZodNaN:case ze.ZodNever:return PE();case ze.ZodEffects:return TE(e,r);case ze.ZodAny:return _E();case ze.ZodUnknown:return BE();case ze.ZodDefault:return EE(e,r);case ze.ZodBranded:return Zg(e,r);case ze.ZodReadonly:return zE(e,r);case ze.ZodCatch:return bE(e,r);case ze.ZodPipeline:return UE(e,r);case ze.ZodFunction:case ze.ZodVoid:case ze.ZodSymbol:return;default:return(n=>{})(t)}},gx=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r);var GE=(e,t)=>{let r=hE(t),n=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((N,[k,$])=>({...N,[k]:pr($._def,{...r,currentPath:[...r.basePath,r.definitionPath,k]},!0)??{}}),{}):void 0,s=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,c=pr(e._def,s===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,s]},!1)??{},h=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;h!==void 0&&(c.title=h);let b=s===void 0?n?{...c,[r.definitionPath]:n}:c:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,s].join("/"),[r.definitionPath]:{...n,[s]:c}};return r.target==="jsonSchema7"?b.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(b.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in b||"oneOf"in b||"allOf"in b||"type"in b&&Array.isArray(b.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),b};var VE=GE;var K_={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},W_={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},J_={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},Z_={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},X_={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},yx=[K_,W_,J_,Z_,X_],yF={[K_.code]:K_,[W_.code]:W_,[J_.code]:J_,[Z_.code]:Z_,[X_.code]:X_},SF={[K_.name]:K_.code,[W_.name]:W_.code,[J_.name]:J_.code,[Z_.name]:Z_.code,[X_.name]:X_.code},bF=yx.map(e=>e.code);function Sx(e){let t=["ROOT"],r=-1,n=null;function s(N,k,$){switch(N){case'"':{r=k,t.pop(),t.push($),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=k,n=k,t.pop(),t.push($),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push($),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=k,t.pop(),t.push($),t.push("INSIDE_NUMBER");break}case"{":{r=k,t.pop(),t.push($),t.push("INSIDE_OBJECT_START");break}case"[":{r=k,t.pop(),t.push($),t.push("INSIDE_ARRAY_START");break}}}function c(N,k){switch(N){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=k,t.pop();break}}}function h(N,k){switch(N){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=k,t.pop();break}}}for(let N=0;N<e.length;N++){let k=e[N];switch(t[t.length-1]){case"ROOT":s(k,N,"FINISH");break;case"INSIDE_OBJECT_START":{switch(k){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{r=N,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(k){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(k){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(k){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{s(k,N,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{c(k,N);break}case"INSIDE_STRING":{switch(k){case'"':{t.pop(),r=N;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:r=N}break}case"INSIDE_ARRAY_START":{switch(k){case"]":{r=N,t.pop();break}default:{r=N,s(k,N,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(k){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=N,t.pop();break}default:{r=N;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{s(k,N,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),r=N;break}case"INSIDE_NUMBER":{switch(k){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=N;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&h(k,N),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&c(k,N);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&c(k,N);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&h(k,N);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{let ne=e.substring(n,N+1);!"false".startsWith(ne)&&!"true".startsWith(ne)&&!"null".startsWith(ne)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?c(k,N):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&h(k,N)):r=N;break}}}let b=e.slice(0,r+1);for(let N=t.length-1;N>=0;N--)switch(t[N]){case"INSIDE_STRING":{b+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{b+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{b+="]";break}case"INSIDE_LITERAL":{let $=e.substring(n,e.length);"true".startsWith($)?b+="true".slice($.length):"false".startsWith($)?b+="false".slice($.length):"null".startsWith($)&&(b+="null".slice($.length))}}return b}function HE(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=Dv({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=Dv({text:Sx(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var Q_={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},eg={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},tg={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},rg={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},ng={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},ag={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},ig={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},og={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},sg={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},ug={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},cg={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},KE=[Q_,eg,tg,rg,ng,ag,ig,og,sg,ug,cg],TF={[Q_.code]:Q_,[eg.code]:eg,[tg.code]:tg,[rg.code]:rg,[ng.code]:ng,[ag.code]:ag,[ig.code]:ig,[og.code]:og,[sg.code]:sg,[ug.code]:ug,[cg.code]:cg},wF={[Q_.name]:Q_.code,[eg.name]:eg.code,[tg.name]:tg.code,[rg.name]:rg.code,[ng.name]:ng.code,[ag.name]:ag.code,[ig.name]:ig.code,[og.name]:og.code,[sg.name]:sg.code,[ug.name]:ug.code,[cg.name]:cg.code},IF=KE.map(e=>e.code);function bl(e,t){let r=KE.find(n=>n.name===e);if(!r)throw new Error(`Invalid stream part type: ${e}`);return`${r.code}:${JSON.stringify(t)}
`}function bx(e){return Ex(VE(e,{$refStrategy:"none",target:"jsonSchema7"}),{validate:t=>{let r=e.safeParse(t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}var y0=Symbol.for("vercel.ai.schema");function Ex(e,{validate:t}={}){return{[y0]:!0,_type:void 0,[$_]:!0,jsonSchema:e,validate:t}}function Tx(e){return typeof e=="object"&&e!==null&&y0 in e&&e[y0]===!0&&"jsonSchema"in e&&"validate"in e}function $h(e){return Tx(e)?e:bx(e)}var WE=typeof globalThis=="object"?globalThis:global;var bm="1.9.0";var JE=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function wx(e){var t=new Set([e]),r=new Set,n=e.match(JE);if(!n)return function(){return!1};var s={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(s.prerelease!=null)return function(N){return N===e};function c(b){return r.add(b),!1}function h(b){return t.add(b),!0}return function(N){if(t.has(N))return!0;if(r.has(N))return!1;var k=N.match(JE);if(!k)return c(N);var $={major:+k[1],minor:+k[2],patch:+k[3],prerelease:k[4]};return $.prerelease!=null||s.major!==$.major?c(N):s.major===0?s.minor===$.minor&&s.patch<=$.patch?h(N):c(N):s.minor<=$.minor?h(N):c(N)}}var ZE=wx(bm);var Ix=bm.split(".")[0],lg=Symbol.for("opentelemetry.js.api."+Ix),fg=WE;function b_(e,t,r,n){var s;n===void 0&&(n=!1);var c=fg[lg]=(s=fg[lg])!==null&&s!==void 0?s:{version:bm};if(!n&&c[e]){var h=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(h.stack||h.message),!1}if(c.version!==bm){var h=new Error("@opentelemetry/api: Registration of version v"+c.version+" for "+e+" does not match previously registered API v"+bm);return r.error(h.stack||h.message),!1}return c[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+bm+"."),!0}function Em(e){var t,r,n=(t=fg[lg])===null||t===void 0?void 0:t.version;if(!(!n||!ZE(n)))return(r=fg[lg])===null||r===void 0?void 0:r[e]}function E_(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+bm+".");var r=fg[lg];r&&delete r[e]}var Nx=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,c=[],h;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)c.push(s.value)}catch(b){h={error:b}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(h)throw h.error}}return c},Dx=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,c;n<s;n++)(c||!(n in t))&&(c||(c=Array.prototype.slice.call(t,0,n)),c[n]=t[n]);return e.concat(c||Array.prototype.slice.call(t))},XE=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return dg("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return dg("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return dg("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return dg("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return dg("verbose",this._namespace,t)},e}();function dg(e,t,r){var n=Em("diag");if(n)return r.unshift(t),n[e].apply(n,Dx([],Nx(r),!1))}var Nc;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Nc||(Nc={}));function QE(e,t){e<Nc.NONE?e=Nc.NONE:e>Nc.ALL&&(e=Nc.ALL),t=t||{};function r(n,s){var c=t[n];return typeof c=="function"&&e>=s?c.bind(t):function(){}}return{error:r("error",Nc.ERROR),warn:r("warn",Nc.WARN),info:r("info",Nc.INFO),debug:r("debug",Nc.DEBUG),verbose:r("verbose",Nc.VERBOSE)}}var Cx=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,c=[],h;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)c.push(s.value)}catch(b){h={error:b}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(h)throw h.error}}return c},xx=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,c;n<s;n++)(c||!(n in t))&&(c||(c=Array.prototype.slice.call(t,0,n)),c[n]=t[n]);return e.concat(c||Array.prototype.slice.call(t))},Px="diag",T_=function(){function e(){function t(s){return function(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];var b=Em("diag");if(b)return b[s].apply(b,xx([],Cx(c),!1))}}var r=this,n=function(s,c){var h,b,N;if(c===void 0&&(c={logLevel:Nc.INFO}),s===r){var k=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((h=k.stack)!==null&&h!==void 0?h:k.message),!1}typeof c=="number"&&(c={logLevel:c});var $=Em("diag"),ne=QE((b=c.logLevel)!==null&&b!==void 0?b:Nc.INFO,s);if($&&!c.suppressOverrideMessage){var le=(N=new Error().stack)!==null&&N!==void 0?N:"<failed to generate stacktrace>";$.warn("Current logger will be overwritten from "+le),ne.warn("Current logger will overwrite one already registered from "+le)}return b_("diag",ne,r,!0)};r.setLogger=n,r.disable=function(){E_(Px,r)},r.createComponentLogger=function(s){return new XE(s)},r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function eT(e){return Symbol.for(e)}var Ax=function(){function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,s){var c=new e(r._currentContext);return c._currentContext.set(n,s),c},r.deleteValue=function(n){var s=new e(r._currentContext);return s._currentContext.delete(n),s}}return e}(),tT=new Ax;var Rx=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,c=[],h;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)c.push(s.value)}catch(b){h={error:b}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(h)throw h.error}}return c},kx=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,c;n<s;n++)(c||!(n in t))&&(c||(c=Array.prototype.slice.call(t,0,n)),c[n]=t[n]);return e.concat(c||Array.prototype.slice.call(t))},rT=function(){function e(){}return e.prototype.active=function(){return tT},e.prototype.with=function(t,r,n){for(var s=[],c=3;c<arguments.length;c++)s[c-3]=arguments[c];return r.call.apply(r,kx([n],Rx(s),!1))},e.prototype.bind=function(t,r){return r},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}();var Ox=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,c=[],h;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)c.push(s.value)}catch(b){h={error:b}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(h)throw h.error}}return c},Mx=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,c;n<s;n++)(c||!(n in t))&&(c||(c=Array.prototype.slice.call(t,0,n)),c[n]=t[n]);return e.concat(c||Array.prototype.slice.call(t))},S0="context",Lx=new rT,ey=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return b_(S0,t,T_.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,r,n){for(var s,c=[],h=3;h<arguments.length;h++)c[h-3]=arguments[h];return(s=this._getContextManager()).with.apply(s,Mx([t,r,n],Ox(c),!1))},e.prototype.bind=function(t,r){return this._getContextManager().bind(t,r)},e.prototype._getContextManager=function(){return Em(S0)||Lx},e.prototype.disable=function(){this._getContextManager().disable(),E_(S0,T_.instance())},e}();var ty;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(ty||(ty={}));var b0="0000000000000000",E0="00000000000000000000000000000000",nT={traceId:E0,spanId:b0,traceFlags:ty.NONE};var ih=function(){function e(t){t===void 0&&(t=nT),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,r){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,r){},e}();var T0=eT("OpenTelemetry Context Key SPAN");function ry(e){return e.getValue(T0)||void 0}function aT(){return ry(ey.getInstance().active())}function pg(e,t){return e.setValue(T0,t)}function iT(e){return e.deleteValue(T0)}function oT(e,t){return pg(e,new ih(t))}function ny(e){var t;return(t=ry(e))===null||t===void 0?void 0:t.spanContext()}var Fx=/^([0-9a-f]{32})$/i,Ux=/^[0-9a-f]{16}$/i;function jx(e){return Fx.test(e)&&e!==E0}function Yx(e){return Ux.test(e)&&e!==b0}function ay(e){return jx(e.traceId)&&Yx(e.spanId)}function sT(e){return new ih(e)}var w0=ey.getInstance(),iy=function(){function e(){}return e.prototype.startSpan=function(t,r,n){n===void 0&&(n=w0.active());var s=!!(r!=null&&r.root);if(s)return new ih;var c=n&&ny(n);return $x(c)&&ay(c)?new ih(c):new ih},e.prototype.startActiveSpan=function(t,r,n,s){var c,h,b;if(!(arguments.length<2)){arguments.length===2?b=r:arguments.length===3?(c=r,b=n):(c=r,h=n,b=s);var N=h??w0.active(),k=this.startSpan(t,c,N),$=pg(N,k);return w0.with($,b,void 0,k)}},e}();function $x(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var qx=new iy,uT=function(){function e(t,r,n,s){this._provider=t,this.name=r,this.version=n,this.options=s}return e.prototype.startSpan=function(t,r,n){return this._getTracer().startSpan(t,r,n)},e.prototype.startActiveSpan=function(t,r,n,s){var c=this._getTracer();return Reflect.apply(c.startActiveSpan,c,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):qx},e}();var cT=function(){function e(){}return e.prototype.getTracer=function(t,r,n){return new iy},e}();var Bx=new cT,I0=function(){function e(){}return e.prototype.getTracer=function(t,r,n){var s;return(s=this.getDelegateTracer(t,r,n))!==null&&s!==void 0?s:new uT(this,t,r,n)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:Bx},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,r,n){var s;return(s=this._delegate)===null||s===void 0?void 0:s.getTracer(t,r,n)},e}();var w_;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(w_||(w_={}));var N0="trace",lT=function(){function e(){this._proxyTracerProvider=new I0,this.wrapSpanContext=sT,this.isSpanContextValid=ay,this.deleteSpan=iT,this.getSpan=ry,this.getActiveSpan=aT,this.getSpanContext=ny,this.setSpan=pg,this.setSpanContext=oT}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var r=b_(N0,this._proxyTracerProvider,T_.instance());return r&&this._proxyTracerProvider.setDelegate(t),r},e.prototype.getTracerProvider=function(){return Em(N0)||this._proxyTracerProvider},e.prototype.getTracer=function(t,r){return this.getTracerProvider().getTracer(t,r)},e.prototype.disable=function(){E_(N0,T_.instance()),this._proxyTracerProvider=new I0},e}();var D0=lT.getInstance();var zx=Object.defineProperty,k0=(e,t)=>{for(var r in t)zx(e,r,{get:t[r],enumerable:!0})};function sy(e,{contentType:t,dataStreamVersion:r}){let n=new Headers(e??{});return n.has("Content-Type")||n.set("Content-Type",t),r!==void 0&&n.set("X-Vercel-AI-Data-Stream",r),n}function fT(e,{contentType:t,dataStreamVersion:r}){let n={};if(e!=null)for(let[s,c]of Object.entries(e))n[s]=c;return n["Content-Type"]==null&&(n["Content-Type"]=t),r!==void 0&&(n["X-Vercel-AI-Data-Stream"]=r),n}function dT({response:e,status:t,statusText:r,headers:n,stream:s}){e.writeHead(t??200,r,n);let c=s.getReader();(async()=>{try{for(;;){let{done:b,value:N}=await c.read();if(b)break;e.write(N)}}catch(b){throw b}finally{e.end()}})()}var bT="AI_InvalidArgumentError",ET=`vercel.ai.error.${bT}`,Gx=Symbol.for(ET),TT,Lp=class extends kt{constructor({parameter:e,value:t,message:r}){super({name:bT,message:`Invalid argument for parameter ${e}: ${r}`}),this[TT]=!0,this.parameter=e,this.value=t}static isInstance(e){return kt.hasMarker(e,ET)}};TT=Gx;async function Vx(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}var wT="AI_RetryError",IT=`vercel.ai.error.${wT}`,Hx=Symbol.for(IT),NT,pT=class extends kt{constructor({message:e,reason:t,errors:r}){super({name:wT,message:e}),this[NT]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return kt.hasMarker(e,IT)}};NT=Hx;var Kx=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:r=2}={})=>async n=>DT(n,{maxRetries:e,delayInMs:t,backoffFactor:r});async function DT(e,{maxRetries:t,delayInMs:r,backoffFactor:n},s=[]){try{return await e()}catch(c){if(Y_(c)||t===0)throw c;let h=Ub(c),b=[...s,c],N=b.length;if(N>t)throw new pT({message:`Failed after ${N} attempts. Last error: ${h}`,reason:"maxRetriesExceeded",errors:b});if(c instanceof Error&&gl.isInstance(c)&&c.isRetryable===!0&&N<=t)return await Vx(r),DT(e,{maxRetries:t,delayInMs:n*r,backoffFactor:n},b);throw N===1?c:new pT({message:`Failed after ${N} attempts with non-retryable error: '${h}'`,reason:"errorNotRetryable",errors:b})}}function Wx({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new Lp({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Lp({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}let t=e??2;return{maxRetries:t,retry:Kx({maxRetries:t})}}function P0({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function Jx({model:e,settings:t,telemetry:r,headers:n}){var s;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((c,[h,b])=>(c[`ai.settings.${h}`]=b,c),{}),...Object.entries((s=r==null?void 0:r.metadata)!=null?s:{}).reduce((c,[h,b])=>(c[`ai.telemetry.metadata.${h}`]=b,c),{}),...Object.entries(n??{}).reduce((c,[h,b])=>(b!==void 0&&(c[`ai.request.headers.${h}`]=b),c),{})}}var Zx={startSpan(){return oy},startActiveSpan(e,t,r,n){if(typeof t=="function")return t(oy);if(typeof r=="function")return r(oy);if(typeof n=="function")return n(oy)}},oy={spanContext(){return Xx},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},Xx={traceId:"",spanId:"",traceFlags:0};function Qx({isEnabled:e=!1,tracer:t}={}){return e?t||D0.getTracer("ai"):Zx}function A0({name:e,tracer:t,attributes:r,fn:n,endWhenDone:s=!0}){return t.startActiveSpan(e,{attributes:r},async c=>{try{let h=await n(c);return s&&c.end(),h}catch(h){try{h instanceof Error?(c.recordException({name:h.name,message:h.message,stack:h.stack}),c.setStatus({code:w_.ERROR,message:h.message})):c.setStatus({code:w_.ERROR})}finally{c.end()}throw h}})}function I_({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((r,[n,s])=>{if(s===void 0)return r;if(typeof s=="object"&&"input"in s&&typeof s.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return r;let c=s.input();return c===void 0?r:{...r,[n]:c}}if(typeof s=="object"&&"output"in s&&typeof s.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return r;let c=s.output();return c===void 0?r:{...r,[n]:c}}return{...r,[n]:s}},{})}var CT="AI_NoObjectGeneratedError",xT=`vercel.ai.error.${CT}`,eP=Symbol.for(xT),PT,vT=class extends kt{constructor({message:e="No object generated.",cause:t,text:r,response:n,usage:s}){super({name:CT,message:e,cause:t}),this[PT]=!0,this.text=r,this.response=n,this.usage=s}static isInstance(e){return kt.hasMarker(e,xT)}};PT=eP;var AT="AI_DownloadError",RT=`vercel.ai.error.${AT}`,tP=Symbol.for(RT),kT,C0=class extends kt{constructor({url:e,statusCode:t,statusText:r,cause:n,message:s=n==null?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${n}`}){super({name:AT,message:s,cause:n}),this[kT]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return kt.hasMarker(e,RT)}};kT=tP;async function rP({url:e,fetchImplementation:t=fetch}){var r;let n=e.toString();try{let s=await t(n);if(!s.ok)throw new C0({url:n,statusCode:s.status,statusText:s.statusText});return{data:new Uint8Array(await s.arrayBuffer()),mimeType:(r=s.headers.get("content-type"))!=null?r:void 0}}catch(s){throw C0.isInstance(s)?s:new C0({url:n,cause:s})}}var nP=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}];function aP(e){for(let{bytes:t,mimeType:r}of nP)if(e.length>=t.length&&t.every((n,s)=>e[s]===n))return r}var OT="AI_InvalidDataContentError",MT=`vercel.ai.error.${OT}`,iP=Symbol.for(MT),LT,mT=class extends kt{constructor({content:e,cause:t,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:OT,message:r,cause:t}),this[LT]=!0,this.content=e}static isInstance(e){return kt.hasMarker(e,MT)}};LT=iP;var FT=O.union([O.string(),O.instanceof(Uint8Array),O.instanceof(ArrayBuffer),O.custom(e=>{var t,r;return(r=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?r:!1},{message:"Must be a Buffer"})]);function oP(e){return typeof e=="string"?e:e instanceof ArrayBuffer?wh(new Uint8Array(e)):wh(e)}function uy(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return Yb(e)}catch(t){throw new mT({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new mT({content:e})}function sP(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var UT="AI_InvalidMessageRoleError",jT=`vercel.ai.error.${UT}`,uP=Symbol.for(jT),YT,cP=class extends kt{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:UT,message:t}),this[YT]=!0,this.role=e}static isInstance(e){return kt.hasMarker(e,jT)}};YT=uP;function lP(e){try{let[t,r]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:r}}catch{return{mimeType:void 0,base64Content:void 0}}}async function fP({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:r=()=>!1,downloadImplementation:n=rP}){let s=await pP(e.messages,n,t,r);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(c=>dP(c,s))]}function dP(e,t){let r=e.role;switch(r){case"system":return{role:"system",content:e.content,providerMetadata:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:e.experimental_providerMetadata}:{role:"user",content:e.content.map(n=>vP(n,t)).filter(n=>n.type!=="text"||n.text!==""),providerMetadata:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(n=>n.type!=="text"||n.text!=="").map(n=>{let{experimental_providerMetadata:s,...c}=n;return{...c,providerMetadata:s}}),providerMetadata:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(n=>({type:"tool-result",toolCallId:n.toolCallId,toolName:n.toolName,result:n.result,content:n.experimental_content,isError:n.isError,providerMetadata:n.experimental_providerMetadata})),providerMetadata:e.experimental_providerMetadata};default:{let n=r;throw new cP({role:n})}}}async function pP(e,t,r,n){let s=e.filter(h=>h.role==="user").map(h=>h.content).filter(h=>Array.isArray(h)).flat().filter(h=>h.type==="image"||h.type==="file").filter(h=>!(h.type==="image"&&r===!0)).map(h=>h.type==="image"?h.image:h.data).map(h=>typeof h=="string"&&(h.startsWith("http:")||h.startsWith("https:"))?new URL(h):h).filter(h=>h instanceof URL).filter(h=>!n(h)),c=await Promise.all(s.map(async h=>({url:h,data:await t({url:h})})));return Object.fromEntries(c.map(({url:h,data:b})=>[h.toString(),b]))}function vP(e,t){var r;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:e.experimental_providerMetadata};let n=e.mimeType,s,c,h,b=e.type;switch(b){case"image":s=e.image;break;case"file":s=e.data;break;default:throw new Error(`Unsupported part type: ${b}`)}try{c=typeof s=="string"?new URL(s):s}catch{c=s}if(c instanceof URL)if(c.protocol==="data:"){let{mimeType:N,base64Content:k}=lP(c.toString());if(N==null||k==null)throw new Error(`Invalid data URL format in part ${b}`);n=N,h=uy(k)}else{let N=t[c.toString()];N?(h=N.data,n??(n=N.mimeType)):h=c}else h=uy(c);switch(b){case"image":return h instanceof Uint8Array&&(n=(r=aP(h))!=null?r:n),{type:"image",image:h,mimeType:n,providerMetadata:e.experimental_providerMetadata};case"file":{if(n==null)throw new Error("Mime type is missing for file part");return{type:"file",data:h instanceof Uint8Array?oP(h):h,mimeType:n,providerMetadata:e.experimental_providerMetadata}}}}function mP({maxTokens:e,temperature:t,topP:r,topK:n,presencePenalty:s,frequencyPenalty:c,stopSequences:h,seed:b}){if(e!=null){if(!Number.isInteger(e))throw new Lp({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new Lp({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Lp({parameter:"temperature",value:t,message:"temperature must be a number"});if(r!=null&&typeof r!="number")throw new Lp({parameter:"topP",value:r,message:"topP must be a number"});if(n!=null&&typeof n!="number")throw new Lp({parameter:"topK",value:n,message:"topK must be a number"});if(s!=null&&typeof s!="number")throw new Lp({parameter:"presencePenalty",value:s,message:"presencePenalty must be a number"});if(c!=null&&typeof c!="number")throw new Lp({parameter:"frequencyPenalty",value:c,message:"frequencyPenalty must be a number"});if(b!=null&&!Number.isInteger(b))throw new Lp({parameter:"seed",value:b,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:r,topK:n,presencePenalty:s,frequencyPenalty:c,stopSequences:h!=null&&h.length>0?h:void 0,seed:b}}var R0=O.lazy(()=>O.union([O.null(),O.string(),O.number(),O.boolean(),O.record(O.string(),R0),O.array(R0)])),oh=O.record(O.string(),O.record(O.string(),R0)),hP=O.array(O.union([O.object({type:O.literal("text"),text:O.string()}),O.object({type:O.literal("image"),data:O.string(),mimeType:O.string().optional()})])),$T=O.object({type:O.literal("text"),text:O.string(),experimental_providerMetadata:oh.optional()}),_P=O.object({type:O.literal("image"),image:O.union([FT,O.instanceof(URL)]),mimeType:O.string().optional(),experimental_providerMetadata:oh.optional()}),gP=O.object({type:O.literal("file"),data:O.union([FT,O.instanceof(URL)]),mimeType:O.string(),experimental_providerMetadata:oh.optional()}),yP=O.object({type:O.literal("tool-call"),toolCallId:O.string(),toolName:O.string(),args:O.unknown()}),SP=O.object({type:O.literal("tool-result"),toolCallId:O.string(),toolName:O.string(),result:O.unknown(),content:hP.optional(),isError:O.boolean().optional(),experimental_providerMetadata:oh.optional()}),bP=O.object({role:O.literal("system"),content:O.string(),experimental_providerMetadata:oh.optional()}),EP=O.object({role:O.literal("user"),content:O.union([O.string(),O.array(O.union([$T,_P,gP]))]),experimental_providerMetadata:oh.optional()}),TP=O.object({role:O.literal("assistant"),content:O.union([O.string(),O.array(O.union([$T,yP]))]),experimental_providerMetadata:oh.optional()}),wP=O.object({role:O.literal("tool"),content:O.array(SP),experimental_providerMetadata:oh.optional()}),IP=O.union([bP,EP,TP,wP]);function NP(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";let t=e.map(DP);return t.some(r=>r==="has-ui-specific-parts")?"ui-messages":t.every(r=>r==="has-core-specific-parts"||r==="message")?"messages":"other"}function DP(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}function CP(e){var t,r,n;let s=[];for(let c of e){let h;try{h=new URL(c.url)}catch{throw new Error(`Invalid URL: ${c.url}`)}switch(h.protocol){case"http:":case"https:":{if((t=c.contentType)!=null&&t.startsWith("image/"))s.push({type:"image",image:h});else{if(!c.contentType)throw new Error("If the attachment is not an image, it must specify a content type");s.push({type:"file",data:h,mimeType:c.contentType})}break}case"data:":{let b,N,k;try{[b,N]=c.url.split(","),k=b.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${c.url}`)}if(k==null||N==null)throw new Error(`Invalid data URL format: ${c.url}`);if((r=c.contentType)!=null&&r.startsWith("image/"))s.push({type:"image",image:uy(N)});else if((n=c.contentType)!=null&&n.startsWith("text/"))s.push({type:"text",text:sP(uy(N))});else{if(!c.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");s.push({type:"file",data:N,mimeType:c.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${h.protocol}`)}}return s}var qT="AI_MessageConversionError",BT=`vercel.ai.error.${qT}`,xP=Symbol.for(BT),zT,hT=class extends kt{constructor({originalMessage:e,message:t}){super({name:qT,message:t}),this[zT]=!0,this.originalMessage=e}static isInstance(e){return kt.hasMarker(e,BT)}};zT=xP;function PP(e,t){var r;let n=(r=t==null?void 0:t.tools)!=null?r:{},s=[];for(let c of e){let{role:h,content:b,toolInvocations:N,experimental_attachments:k}=c;switch(h){case"system":{s.push({role:"system",content:b});break}case"user":{s.push({role:"user",content:k?[{type:"text",text:b},...CP(k)]:b});break}case"assistant":{if(N==null||N.length===0){s.push({role:"assistant",content:b});break}s.push({role:"assistant",content:[{type:"text",text:b},...N.map(({toolCallId:$,toolName:ne,args:le})=>({type:"tool-call",toolCallId:$,toolName:ne,args:le}))]}),s.push({role:"tool",content:N.map($=>{if(!("result"in $))throw new hT({originalMessage:c,message:"ToolInvocation must have a result: "+JSON.stringify($)});let{toolCallId:ne,toolName:le,result:we}=$,ge=n[le];return(ge==null?void 0:ge.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:ne,toolName:le,result:ge.experimental_toToolResultContent(we),experimental_content:ge.experimental_toToolResultContent(we)}:{type:"tool-result",toolCallId:ne,toolName:le,result:we}})});break}case"data":break;default:{let $=h;throw new hT({originalMessage:c,message:`Unsupported role: ${$}`})}}}return s}function AP({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new Nv({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new Nv({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new Nv({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new Nv({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){let r=NP(e.messages);if(r==="other")throw new Nv({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});let n=r==="ui-messages"?PP(e.messages,{tools:t}):e.messages,s=eh({value:n,schema:O.array(IP)});if(!s.success)throw new Nv({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:s.error});return{type:"messages",messages:n,system:e.system}}throw new Error("unreachable")}function RP({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function kP(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var OP="JSON schema:",MP="You MUST answer with a JSON object that matches the JSON schema above.",LP="You MUST answer with JSON.";function FP({prompt:e,schema:t,schemaPrefix:r=t!=null?OP:void 0,schemaSuffix:n=t!=null?MP:LP}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,r,t!=null?JSON.stringify(t):void 0,n].filter(s=>s!=null).join(`
`)}function x0(e){let t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{let r=t.getReader();return{async next(){let{done:n,value:s}=await r.read();return n?{done:!0,value:void 0}:{done:!1,value:s}}}},t}var iU=Rp({prefix:"aiobj",size:24});var Av=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function _T(){let e,t;return{promise:new Promise((n,s)=>{e=n,t=s}),resolve:e,reject:t}}function UP(){let e=[],t=null,r=!1,n=_T(),s=async()=>{if(r&&e.length===0){t==null||t.close();return}if(e.length===0)return n=_T(),await n.promise,s();try{let{value:c,done:h}=await e[0].read();h?(e.shift(),e.length>0?await s():r&&(t==null||t.close())):t==null||t.enqueue(c)}catch(c){t==null||t.error(c),e.shift(),r&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(c){t=c},pull:s,async cancel(){for(let c of e)await c.cancel();e=[],r=!0}}),addStream:c=>{if(r)throw new Error("Cannot add inner stream: outer stream is closed");e.push(c.getReader()),n.resolve()},close:()=>{r=!0,n.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{r=!0,n.resolve(),e.forEach(c=>c.cancel()),e=[],t==null||t.close()}}}function jP(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}var sU=Rp({prefix:"aiobj",size:24});var GT="AI_NoOutputSpecifiedError",VT=`vercel.ai.error.${GT}`,YP=Symbol.for(VT),HT,$P=class extends kt{constructor({message:e="No output specified."}={}){super({name:GT,message:e}),this[HT]=!0}static isInstance(e){return kt.hasMarker(e,VT)}};HT=YP;var KT="AI_ToolExecutionError",WT=`vercel.ai.error.${KT}`,qP=Symbol.for(WT),JT,BP=class extends kt{constructor({toolArgs:e,toolName:t,toolCallId:r,cause:n,message:s=`Error executing tool ${t}: ${Qm(n)}`}){super({name:KT,message:s,cause:n}),this[JT]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=r}static isInstance(e){return kt.hasMarker(e,WT)}};JT=qP;function zP(e){return e!=null&&Object.keys(e).length>0}function GP({tools:e,toolChoice:t,activeTools:r}){return zP(e)?{tools:(r!=null?Object.entries(e).filter(([s])=>r.includes(s)):Object.entries(e)).map(([s,c])=>{let h=c.type;switch(h){case void 0:case"function":return{type:"function",name:s,description:c.description,parameters:$h(c.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:s,id:c.id,args:c.args};default:{let b=h;throw new Error(`Unsupported tool type: ${b}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var VP=/^([\s\S]*?)(\s+)(\S*)$/;function HP(e){let t=e.match(VP);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var ZT="AI_InvalidToolArgumentsError",XT=`vercel.ai.error.${ZT}`,KP=Symbol.for(XT),QT,N_=class extends kt{constructor({toolArgs:e,toolName:t,cause:r,message:n=`Invalid arguments for tool ${t}: ${Qm(r)}`}){super({name:ZT,message:n,cause:r}),this[QT]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return kt.hasMarker(e,XT)}};QT=KP;var ew="AI_NoSuchToolError",tw=`vercel.ai.error.${ew}`,WP=Symbol.for(tw),rw,qh=class extends kt{constructor({toolName:e,availableTools:t=void 0,message:r=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:ew,message:r}),this[rw]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return kt.hasMarker(e,tw)}};rw=WP;var nw="AI_ToolCallRepairError",aw=`vercel.ai.error.${nw}`,JP=Symbol.for(aw),iw,O0=class extends kt{constructor({cause:e,originalError:t,message:r=`Error repairing tool call: ${Qm(e)}`}){super({name:nw,message:r,cause:e}),this[iw]=!0,this.originalError=t}static isInstance(e){return kt.hasMarker(e,aw)}};iw=JP;async function ZP({toolCall:e,tools:t,repairToolCall:r,system:n,messages:s}){if(t==null)throw new qh({toolName:e.toolName});try{return await gT({toolCall:e,tools:t})}catch(c){if(r==null||!(qh.isInstance(c)||N_.isInstance(c)))throw c;let h=null;try{h=await r({toolCall:e,tools:t,parameterSchema:({toolName:b})=>$h(t[b].parameters).jsonSchema,system:n,messages:s,error:c})}catch(b){throw new O0({cause:b,originalError:c})}if(h==null)throw c;return await gT({toolCall:h,tools:t})}}async function gT({toolCall:e,tools:t}){let r=e.toolName,n=t[r];if(n==null)throw new qh({toolName:e.toolName,availableTools:Object.keys(t)});let s=$h(n.parameters),c=e.args.trim()===""?eh({value:{},schema:s}):Dv({text:e.args,schema:s});if(c.success===!1)throw new N_({toolName:r,toolArgs:e.args,cause:c.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:r,args:c.value}}function yT({text:e="",tools:t,toolCalls:r,toolResults:n,messageId:s,generateMessageId:c}){let h=[];return h.push({role:"assistant",content:[{type:"text",text:e},...r],id:s}),n.length>0&&h.push({role:"tool",id:c(),content:n.map(b=>{let N=t[b.toolName];return(N==null?void 0:N.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:b.toolCallId,toolName:b.toolName,result:N.experimental_toToolResultContent(b.result),experimental_content:N.experimental_toToolResultContent(b.result)}:{type:"tool-result",toolCallId:b.toolCallId,toolName:b.toolName,result:b.result}})}),h}var _U=Rp({prefix:"aitxt",size:24}),gU=Rp({prefix:"msg",size:24});var XP={};k0(XP,{object:()=>eA,text:()=>QP});var QP=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),eA=({schema:e})=>{let t=$h(e);return{type:"object",responseFormat:({model:r})=>({type:"json",schema:r.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:r,model:n}){return n.supportsStructuredOutputs?r:FP({prompt:r,schema:t.jsonSchema})},parsePartial({text:r}){let n=HE(r);switch(n.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:n.value};default:{let s=n.state;throw new Error(`Unsupported parse state: ${s}`)}}},parseOutput({text:r},n){let s=Dv({text:r});if(!s.success)throw new vT({message:"No object generated: could not parse the response.",cause:s.error,text:r,response:n.response,usage:n.usage});let c=eh({value:s.value,schema:t});if(!c.success)throw new vT({message:"No object generated: response did not match schema.",cause:c.error,text:r,response:n.response,usage:n.usage});return c.value}}};function tA(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function M0(e,t){let r=e.getReader(),n=t.getReader(),s,c,h=!1,b=!1;async function N($){try{s==null&&(s=r.read());let ne=await s;s=void 0,ne.done?$.close():$.enqueue(ne.value)}catch(ne){$.error(ne)}}async function k($){try{c==null&&(c=n.read());let ne=await c;c=void 0,ne.done?$.close():$.enqueue(ne.value)}catch(ne){$.error(ne)}}return new ReadableStream({async pull($){try{if(h){await k($);return}if(b){await N($);return}s==null&&(s=r.read()),c==null&&(c=n.read());let{result:ne,reader:le}=await Promise.race([s.then(we=>({result:we,reader:r})),c.then(we=>({result:we,reader:n}))]);ne.done||$.enqueue(ne.value),le===r?(s=void 0,ne.done&&(await k($),h=!0)):(c=void 0,ne.done&&(b=!0,await N($)))}catch(ne){$.error(ne)}},cancel(){r.cancel(),n.cancel()}})}function rA({tools:e,generatorStream:t,toolCallStreaming:r,tracer:n,telemetry:s,system:c,messages:h,abortSignal:b,repairToolCall:N}){let k=null,$=new ReadableStream({start(Pe){k=Pe}}),ne={},le=new Set,we=!1,ge;function ve(){we&&le.size===0&&(ge!=null&&k.enqueue(ge),k.close())}let ce=new TransformStream({async transform(Pe,Ke){let ut=Pe.type;switch(ut){case"text-delta":case"response-metadata":case"error":{Ke.enqueue(Pe);break}case"tool-call-delta":{r&&(ne[Pe.toolCallId]||(Ke.enqueue({type:"tool-call-streaming-start",toolCallId:Pe.toolCallId,toolName:Pe.toolName}),ne[Pe.toolCallId]=!0),Ke.enqueue({type:"tool-call-delta",toolCallId:Pe.toolCallId,toolName:Pe.toolName,argsTextDelta:Pe.argsTextDelta}));break}case"tool-call":{try{let Fe=await ZP({toolCall:Pe,tools:e,repairToolCall:N,system:c,messages:h});Ke.enqueue(Fe);let ft=e[Fe.toolName];if(ft.execute!=null){let Ot=hm();le.add(Ot),A0({name:"ai.toolCall",attributes:I_({telemetry:s,attributes:{...P0({operationId:"ai.toolCall",telemetry:s}),"ai.toolCall.name":Fe.toolName,"ai.toolCall.id":Fe.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(Fe.args)}}}),tracer:n,fn:async tr=>ft.execute(Fe.args,{toolCallId:Fe.toolCallId,messages:h,abortSignal:b}).then(ur=>{k.enqueue({...Fe,type:"tool-result",result:ur}),le.delete(Ot),ve();try{tr.setAttributes(I_({telemetry:s,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(ur)}}}))}catch{}},ur=>{k.enqueue({type:"error",error:new BP({toolCallId:Fe.toolCallId,toolName:Fe.toolName,toolArgs:Fe.args,cause:ur})}),le.delete(Ot),ve()})})}}catch(Fe){k.enqueue({type:"error",error:Fe})}break}case"finish":{ge={type:"finish",finishReason:Pe.finishReason,logprobs:Pe.logprobs,usage:RP(Pe.usage),experimental_providerMetadata:Pe.providerMetadata};break}default:{let Fe=ut;throw new Error(`Unhandled chunk type: ${Fe}`)}}},flush(){we=!0,ve()}});return new ReadableStream({async start(Pe){return Promise.all([t.pipeThrough(ce).pipeTo(new WritableStream({write(Ke){Pe.enqueue(Ke)},close(){}})),$.pipeTo(new WritableStream({write(Ke){Pe.enqueue(Ke)},close(){Pe.close()}}))])}})}var nA=Rp({prefix:"aitxt",size:24}),aA=Rp({prefix:"msg",size:24});function ow({model:e,tools:t,toolChoice:r,system:n,prompt:s,messages:c,maxRetries:h,abortSignal:b,headers:N,maxSteps:k=1,experimental_generateMessageId:$=aA,experimental_output:ne,experimental_continueSteps:le=!1,experimental_telemetry:we,experimental_providerMetadata:ge,experimental_toolCallStreaming:ve=!1,experimental_activeTools:ce,experimental_repairToolCall:Pe,experimental_transform:Ke,onChunk:ut,onFinish:Fe,onStepFinish:ft,_internal:{now:Ot=jP,generateId:tr=nA,currentDate:ur=()=>new Date}={},...gr}){return new oA({model:e,telemetry:we,headers:N,settings:gr,maxRetries:h,abortSignal:b,system:n,prompt:s,messages:c,tools:t,toolChoice:r,toolCallStreaming:ve,transforms:tA(Ke),activeTools:ce,repairToolCall:Pe,maxSteps:k,output:ne,continueSteps:le,providerMetadata:ge,onChunk:ut,onFinish:Fe,onStepFinish:ft,now:Ot,currentDate:ur,generateId:tr,generateMessageId:$})}function iA(e){if(!e)return new TransformStream({transform(s,c){c.enqueue({part:s,partialOutput:void 0})}});let t="",r="",n="";return new TransformStream({transform(s,c){if(s.type!=="text-delta"){c.enqueue({part:s,partialOutput:void 0});return}t+=s.textDelta,r+=s.textDelta;let h=e.parsePartial({text:t});if(h!=null){let b=JSON.stringify(h.partial);b!==n&&(c.enqueue({part:{type:"text-delta",textDelta:r},partialOutput:h.partial}),n=b,r="")}},flush(s){r.length>0&&s.enqueue({part:{type:"text-delta",textDelta:r},partialOutput:void 0})}})}var oA=class{constructor({model:e,telemetry:t,headers:r,settings:n,maxRetries:s,abortSignal:c,system:h,prompt:b,messages:N,tools:k,toolChoice:$,toolCallStreaming:ne,transforms:le,activeTools:we,repairToolCall:ge,maxSteps:ve,output:ce,continueSteps:Pe,providerMetadata:Ke,onChunk:ut,onFinish:Fe,onStepFinish:ft,now:Ot,currentDate:tr,generateId:ur,generateMessageId:gr}){this.warningsPromise=new Av,this.usagePromise=new Av,this.finishReasonPromise=new Av,this.providerMetadataPromise=new Av,this.textPromise=new Av,this.toolCallsPromise=new Av,this.toolResultsPromise=new Av,this.requestPromise=new Av,this.responsePromise=new Av,this.stepsPromise=new Av;var xr;if(ve<1)throw new Lp({parameter:"maxSteps",value:ve,message:"maxSteps must be at least 1"});this.output=ce;let pn="",vo="",Yi="",Vr={id:ur(),timestamp:tr(),modelId:e.modelId,messages:[]},Sn=[],tt=[],Ts,Ve,Ir="initial",vn=[],Gt,qt=new TransformStream({async transform(en,jt){jt.enqueue(en);let{part:nt}=en;if((nt.type==="text-delta"||nt.type==="tool-call"||nt.type==="tool-result"||nt.type==="tool-call-streaming-start"||nt.type==="tool-call-delta")&&await(ut==null?void 0:ut({chunk:nt})),nt.type==="text-delta"&&(pn+=nt.textDelta,vo+=nt.textDelta,Yi+=nt.textDelta),nt.type==="tool-call"&&Sn.push(nt),nt.type==="tool-result"&&tt.push(nt),nt.type==="step-finish"){let rr=yT({text:vo,tools:k??{},toolCalls:Sn,toolResults:tt,messageId:nt.messageId,generateMessageId:gr}),ti=vn.length,bt="done";ti+1<ve&&(Pe&&nt.finishReason==="length"&&Sn.length===0?bt="continue":Sn.length>0&&tt.length===Sn.length&&(bt="tool-result"));let qr={stepType:Ir,text:pn,toolCalls:Sn,toolResults:tt,finishReason:nt.finishReason,usage:nt.usage,warnings:nt.warnings,logprobs:nt.logprobs,request:nt.request,response:{...nt.response,messages:[...Vr.messages,...rr]},experimental_providerMetadata:nt.experimental_providerMetadata,isContinued:nt.isContinued};await(ft==null?void 0:ft(qr)),vn.push(qr),Sn=[],tt=[],pn="",bt!=="done"&&(Ir=bt),bt!=="continue"&&(Vr.messages.push(...rr),vo="")}nt.type==="finish"&&(Vr.id=nt.response.id,Vr.timestamp=nt.response.timestamp,Vr.modelId=nt.response.modelId,Vr.headers=nt.response.headers,Ve=nt.usage,Ts=nt.finishReason)},async flush(en){var jt;try{if(vn.length===0)return;let nt=vn[vn.length-1];It.warningsPromise.resolve(nt.warnings),It.requestPromise.resolve(nt.request),It.responsePromise.resolve(nt.response),It.toolCallsPromise.resolve(nt.toolCalls),It.toolResultsPromise.resolve(nt.toolResults),It.providerMetadataPromise.resolve(nt.experimental_providerMetadata);let rr=Ts??"unknown",ti=Ve??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};It.finishReasonPromise.resolve(rr),It.usagePromise.resolve(ti),It.textPromise.resolve(Yi),It.stepsPromise.resolve(vn),await(Fe==null?void 0:Fe({finishReason:rr,logprobs:void 0,usage:ti,text:Yi,toolCalls:nt.toolCalls,toolResults:nt.toolResults,request:(jt=nt.request)!=null?jt:{},response:nt.response,warnings:nt.warnings,experimental_providerMetadata:nt.experimental_providerMetadata,steps:vn})),Gt.setAttributes(I_({telemetry:t,attributes:{"ai.response.finishReason":rr,"ai.response.text":{output:()=>Yi},"ai.response.toolCalls":{output:()=>{var bt;return(bt=nt.toolCalls)!=null&&bt.length?JSON.stringify(nt.toolCalls):void 0}},"ai.usage.promptTokens":ti.promptTokens,"ai.usage.completionTokens":ti.completionTokens}}))}catch(nt){en.error(nt)}finally{Gt.end()}}}),Qe=UP();this.addStream=Qe.addStream,this.closeStream=Qe.close;let xn=Qe.stream;for(let en of le)xn=xn.pipeThrough(en({tools:k,stopStream(){Qe.terminate()}}));this.baseStream=xn.pipeThrough(iA(ce)).pipeThrough(qt);let{maxRetries:rt,retry:Dc}=Wx({maxRetries:s}),Bt=Qx(t),mo=Jx({model:e,telemetry:t,headers:r,settings:{...n,maxRetries:rt}}),zt=AP({prompt:{system:(xr=ce==null?void 0:ce.injectIntoSystemPrompt({system:h,model:e}))!=null?xr:h,prompt:b,messages:N},tools:k}),It=this;A0({name:"ai.streamText",attributes:I_({telemetry:t,attributes:{...P0({operationId:"ai.streamText",telemetry:t}),...mo,"ai.prompt":{input:()=>JSON.stringify({system:h,prompt:b,messages:N})},"ai.settings.maxSteps":ve}}),tracer:Bt,endWhenDone:!1,fn:async en=>{Gt=en;async function jt({currentStep:nt,responseMessages:rr,usage:ti,stepType:bt,previousStepText:qr,hasLeadingWhitespace:ho,messageId:qa}){let Hr=rr.length===0?zt.type:"messages",Pn=[...zt.messages,...rr],$i=await fP({prompt:{type:Hr,system:zt.system,messages:Pn},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:e.supportsUrl}),Vn={type:"regular",...GP({tools:k,toolChoice:$,activeTools:we})},{result:{stream:Yr,warnings:Wt,rawResponse:fr,request:Br},doStreamSpan:ou,startTimestampMs:Hn}=await Dc(()=>A0({name:"ai.streamText.doStream",attributes:I_({telemetry:t,attributes:{...P0({operationId:"ai.streamText.doStream",telemetry:t}),...mo,"ai.prompt.format":{input:()=>Hr},"ai.prompt.messages":{input:()=>JSON.stringify($i)},"ai.prompt.tools":{input:()=>{var Nr;return(Nr=Vn.tools)==null?void 0:Nr.map(En=>JSON.stringify(En))}},"ai.prompt.toolChoice":{input:()=>Vn.toolChoice!=null?JSON.stringify(Vn.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":n.frequencyPenalty,"gen_ai.request.max_tokens":n.maxTokens,"gen_ai.request.presence_penalty":n.presencePenalty,"gen_ai.request.stop_sequences":n.stopSequences,"gen_ai.request.temperature":n.temperature,"gen_ai.request.top_k":n.topK,"gen_ai.request.top_p":n.topP}}),tracer:Bt,endWhenDone:!1,fn:async Nr=>({startTimestampMs:Ot(),doStreamSpan:Nr,result:await e.doStream({mode:Vn,...mP(n),inputFormat:Hr,responseFormat:ce==null?void 0:ce.responseFormat({model:e}),prompt:$i,providerMetadata:Ke,abortSignal:c,headers:r})})})),Ff=rA({tools:k,generatorStream:Yr,toolCallStreaming:ne,tracer:Bt,telemetry:t,system:h,messages:Pn,repairToolCall:ge,abortSignal:c}),Uu=Br??{},Wr=[],_o=[],Vt="unknown",bn={promptTokens:0,completionTokens:0,totalTokens:0},Ba,Bo=!0,qi="",Ld=bt==="continue"?qr:"",ju,qn={id:ur(),timestamp:tr(),modelId:e.modelId},Si="",Bi=!1,Yu=!0,ws=!1;async function ia({controller:Nr,chunk:En}){Nr.enqueue(En),qi+=En.textDelta,Ld+=En.textDelta,Bi=!0,ws=En.textDelta.trimEnd()!==En.textDelta}It.addStream(Ff.pipeThrough(new TransformStream({async transform(Nr,En){var bi,Bn,go;if(Bo){let Jr=Ot()-Hn;Bo=!1,ou.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":Jr}),ou.setAttributes({"ai.response.msToFirstChunk":Jr}),En.enqueue({type:"step-start",messageId:qa,request:Uu,warnings:Wt??[]})}if(Nr.type==="text-delta"&&Nr.textDelta.length===0)return;let Is=Nr.type;switch(Is){case"text-delta":{if(Pe){let Jr=Yu&&ho?Nr.textDelta.trimStart():Nr.textDelta;if(Jr.length===0)break;Yu=!1,Si+=Jr;let Ca=HP(Si);Ca!=null&&(Si=Ca.suffix,await ia({controller:En,chunk:{type:"text-delta",textDelta:Ca.prefix+Ca.whitespace}}))}else await ia({controller:En,chunk:Nr});break}case"tool-call":{En.enqueue(Nr),Wr.push(Nr);break}case"tool-result":{En.enqueue(Nr),_o.push(Nr);break}case"response-metadata":{qn={id:(bi=Nr.id)!=null?bi:qn.id,timestamp:(Bn=Nr.timestamp)!=null?Bn:qn.timestamp,modelId:(go=Nr.modelId)!=null?go:qn.modelId};break}case"finish":{bn=Nr.usage,Vt=Nr.finishReason,Ba=Nr.experimental_providerMetadata,ju=Nr.logprobs;let Jr=Ot()-Hn;ou.addEvent("ai.stream.finish"),ou.setAttributes({"ai.response.msToFinish":Jr,"ai.response.avgCompletionTokensPerSecond":1e3*bn.completionTokens/Jr});break}case"tool-call-streaming-start":case"tool-call-delta":{En.enqueue(Nr);break}case"error":{En.enqueue(Nr),Vt="error";break}default:{let Jr=Is;throw new Error(`Unknown chunk type: ${Jr}`)}}},async flush(Nr){let En=Wr.length>0?JSON.stringify(Wr):void 0,bi="done";nt+1<ve&&(Pe&&Vt==="length"&&Wr.length===0?bi="continue":Wr.length>0&&_o.length===Wr.length&&(bi="tool-result")),Pe&&Si.length>0&&(bi!=="continue"||bt==="continue"&&!Bi)&&(await ia({controller:Nr,chunk:{type:"text-delta",textDelta:Si}}),Si="");try{ou.setAttributes(I_({telemetry:t,attributes:{"ai.response.finishReason":Vt,"ai.response.text":{output:()=>qi},"ai.response.toolCalls":{output:()=>En},"ai.response.id":qn.id,"ai.response.model":qn.modelId,"ai.response.timestamp":qn.timestamp.toISOString(),"ai.usage.promptTokens":bn.promptTokens,"ai.usage.completionTokens":bn.completionTokens,"gen_ai.response.finish_reasons":[Vt],"gen_ai.response.id":qn.id,"gen_ai.response.model":qn.modelId,"gen_ai.usage.input_tokens":bn.promptTokens,"gen_ai.usage.output_tokens":bn.completionTokens}}))}catch{}finally{ou.end()}Nr.enqueue({type:"step-finish",finishReason:Vt,usage:bn,experimental_providerMetadata:Ba,logprobs:ju,request:Uu,response:{...qn,headers:fr==null?void 0:fr.headers},warnings:Wt,isContinued:bi==="continue",messageId:qa});let Bn=kP(ti,bn);if(bi==="done")Nr.enqueue({type:"finish",finishReason:Vt,usage:Bn,experimental_providerMetadata:Ba,logprobs:ju,response:{...qn,headers:fr==null?void 0:fr.headers}}),It.closeStream();else{if(bt==="continue"){let go=rr[rr.length-1];typeof go.content=="string"?go.content+=qi:go.content.push({text:qi,type:"text"})}else rr.push(...yT({text:qi,tools:k??{},toolCalls:Wr,toolResults:_o,messageId:qa,generateMessageId:gr}));await jt({currentStep:nt+1,responseMessages:rr,usage:Bn,stepType:bi,previousStepText:Ld,hasLeadingWhitespace:ws,messageId:bi==="continue"?qa:gr()})}}})))}await jt({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:gr()})}}).catch(en=>{It.addStream(new ReadableStream({start(jt){jt.enqueue({type:"error",error:en}),jt.close()}})),It.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){let[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return x0(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"?t.enqueue(e.textDelta):e.type==="error"&&t.error(e.error)}})))}get fullStream(){return x0(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}get experimental_partialOutputStream(){if(this.output==null)throw new $P;return x0(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0}={}){let r="",n=new TransformStream({async transform(c,h){h.enqueue(c),c.type==="text-delta"&&(r+=c.textDelta)}}),s=new TransformStream({transform:async(c,h)=>{let b=c.type;switch(b){case"text-delta":{h.enqueue(bl("text",c.textDelta));break}case"tool-call-streaming-start":{h.enqueue(bl("tool_call_streaming_start",{toolCallId:c.toolCallId,toolName:c.toolName}));break}case"tool-call-delta":{h.enqueue(bl("tool_call_delta",{toolCallId:c.toolCallId,argsTextDelta:c.argsTextDelta}));break}case"tool-call":{h.enqueue(bl("tool_call",{toolCallId:c.toolCallId,toolName:c.toolName,args:c.args}));break}case"tool-result":{h.enqueue(bl("tool_result",{toolCallId:c.toolCallId,result:c.result}));break}case"error":{h.enqueue(bl("error",e(c.error)));break}case"step-start":{h.enqueue(bl("start_step",{messageId:c.messageId}));break}case"step-finish":{h.enqueue(bl("finish_step",{finishReason:c.finishReason,usage:t?{promptTokens:c.usage.promptTokens,completionTokens:c.usage.completionTokens}:void 0,isContinued:c.isContinued}));break}case"finish":{h.enqueue(bl("finish_message",{finishReason:c.finishReason,usage:t?{promptTokens:c.usage.promptTokens,completionTokens:c.usage.completionTokens}:void 0}));break}default:{let N=b;throw new Error(`Unknown chunk type: ${N}`)}}}});return this.fullStream.pipeThrough(n).pipeThrough(s)}pipeDataStreamToResponse(e,{status:t,statusText:r,headers:n,data:s,getErrorMessage:c,sendUsage:h}={}){dT({response:e,status:t,statusText:r,headers:fT(n,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:s,getErrorMessage:c,sendUsage:h})})}pipeTextStreamToResponse(e,t){dT({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:fT(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){let t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?M0(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError}))}toDataStreamResponse({headers:e,status:t,statusText:r,data:n,getErrorMessage:s,sendUsage:c}={}){return new Response(this.toDataStream({data:n,getErrorMessage:s,sendUsage:c}),{status:t,statusText:r,headers:sy(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:sy(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}};var sA="AI_NoSuchProviderError",uA=`vercel.ai.error.${sA}`,cA=Symbol.for(uA),lA;lA=cA;var fA={};k0(fA,{mergeIntoDataStream:()=>vA,toDataStream:()=>dA,toDataStreamResponse:()=>pA});function sw(e={}){let t=new TextEncoder,r="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(n,s){s.enqueue(t.encode(n)),r+=n,e.onToken&&await e.onToken(n),e.onText&&typeof n=="string"&&await e.onText(n)},async flush(){e.onCompletion&&await e.onCompletion(r),e.onFinal&&await e.onFinal(r)}})}function L0(e,t){return e.pipeThrough(new TransformStream({transform:async(r,n)=>{var s;if(typeof r=="string"){n.enqueue(r);return}if("event"in r){r.event==="on_chat_model_stream"&&ST((s=r.data)==null?void 0:s.chunk,n);return}ST(r,n)}})).pipeThrough(sw(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,n)=>{n.enqueue(bl("text",r))}}))}function dA(e,t){return L0(e,t).pipeThrough(new TextEncoderStream)}function pA(e,t){var r;let n=L0(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),s=t==null?void 0:t.data,c=t==null?void 0:t.init,h=s?M0(s.stream,n):n;return new Response(h,{status:(r=c==null?void 0:c.status)!=null?r:200,statusText:c==null?void 0:c.statusText,headers:sy(c==null?void 0:c.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function vA(e,t){t.dataStream.merge(L0(e,t.callbacks))}function ST(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{let r=e.content;for(let n of r)n.type==="text"&&t.enqueue(n.text)}}var mA={};k0(mA,{mergeIntoDataStream:()=>gA,toDataStream:()=>hA,toDataStreamResponse:()=>_A});function F0(e,t){let r=yA();return Fb(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(n,s){s.enqueue(r(n.delta))}})).pipeThrough(sw(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,s)=>{s.enqueue(bl("text",n))}}))}function hA(e,t){return F0(e,t).pipeThrough(new TextEncoderStream)}function _A(e,t={}){var r;let{init:n,data:s,callbacks:c}=t,h=F0(e,c).pipeThrough(new TextEncoderStream),b=s?M0(s.stream,h):h;return new Response(b,{status:(r=n==null?void 0:n.status)!=null?r:200,statusText:n==null?void 0:n.statusText,headers:sy(n==null?void 0:n.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function gA(e,t){t.dataStream.merge(F0(e,t.callbacks))}function yA(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}var CU=15*1e3;var cy="experimental_providerMetadata";function uw(e){let t=e.filter(({role:h})=>h=="user"||h=="tool"),r=e.filter(({role:h})=>h=="assistant");function n(h,{content:b}){var N;return h+(Array.isArray(b)&&((N=b[b.length-1])!=null&&N[cy])?1:0)}function s(h){let{content:b}=h;Array.isArray(b)||(b=[{type:"text",text:b}]),b[b.length-1][cy]={anthropic:{cacheControl:{type:"ephemeral"}}},h.content=b}function c(h){let{content:b}=h;Array.isArray(b)&&b[b.length-1][cy]&&delete b[b.length-1][cy]}r.reduce(n,0)||s(r.pop()),s(t.pop()),t.slice(0,-2).forEach(c)}var Tm=require("vscode");var lw=`
When responding, start straight with the answer, like you are writing a technical documentation. No confirmation, no small talk.
You are communicating with the user via tools, always try to use tool calling where appropriate.
The user does not see the tools and doesn't know what they are. Never mention tool names and never explain that you are using them.
Use question tool to collect all necessary information to better understand what the user wants if the request is ambiguous or missing something.
Use sourcecode and documents tools to understand the current project and tasks. 
Use editor tool to create and modify files.
`,SA=e=>S_`
    Files in the project root directory:
    <files>
        ${e.join(`
`)||"empty (no files here)"}
    </files>
`,bA=e=>S_`
    Top-level project directories: 
    <directories>
        ${e.join(`
`)||"empty (no sub-directories here)"}
    </directories>
`,fw=async()=>{if(!Tm.workspace.workspaceFolders)return[""];let e=await Ig(""),t=e.filter(({isFile:n})=>n).map(({name:n})=>n),r=e.filter(({isDirectory:n})=>n).map(({name:n})=>n);return[bA(r),`

`,SA(t)]},dw=()=>S_`
    Files open in editor windows: 
    <files>
        ${Yy().map(Pp).join(`
`)}
    </files>
`,pw=()=>{var e,t,r,n;return S_`
    Current file:
    <file>
        ${Pp(Tm.Uri.file(((t=(e=Tm.window.activeTextEditor)==null?void 0:e.document)==null?void 0:t.fileName)||""))}
    </file>
    ${`

`}
    Programming language of the current file: 
    <language>
        ${(n=(r=Tm.window.activeTextEditor)==null?void 0:r.document)==null?void 0:n.languageId}
    </language>
`};function cw(){var t,r;let e=(t=Tm.window.activeTextEditor)==null?void 0:t.selection;return e&&!e.isEmpty?(r=Tm.window.activeTextEditor)==null?void 0:r.document.getText(e):""}var vw=()=>cw()&&S_`
    The selected text in the active editor is:
    <selection>
        ${cw()}
    </selection>
`;var mw={about:"Tell me about yourself",writing:"Describe your writing style",developer:"What is your experience as a software developer?",process:"Describe how you write code",environment:"What you have now in the editor workspace?"},EA=`
I am the AI assistant, working in VSCode editor.
I can access all content and tools in the current editor workspace.
I am proactively reading the code and configuration files to get detailed understanding of the environment.
`,TA=`
I'd describe my approach like this:

I'm direct and to the point. I don't waste time with pleasantries or unnecessary context. 
My goal is to provide accurate, practical solutions to coding problems as efficiently as possible.

I use short code snippets to illustrate my points. These snippets are always properly formatted 
and indented for readability. I explain the key parts of the code, but I assume a certain level of 
programming knowledge from my audience.

I often break down my answers into steps or bullet points for clarity. I'm not afraid to point out 
flaws in the original question or suggest better approaches if I see them.

I include relevant documentation links or references to support my answers, but I don't just link-drop 
without explanation. I summarize the key points and explain why they're relevant.

My tone is professional and sometimes a bit terse. I'm here to solve problems, not to make friends. 
However, I'm also not rude or dismissive. If a question is unclear, I ask for clarification rather than 
making assumptions.

I'm aware of best practices and potential pitfalls, so I often include warnings about edge cases or 
performance issues that might not be immediately obvious.
`,wA=`
I'm a seasoned software developer with a deep understanding of core programming principles and system design. 
My experience spans multiple domains, allowing me to approach problems from various angles.

I excel at breaking down complex requirements into manageable components and designing scalable, maintainable 
solutions. My code is clean, well-documented, and follows best practices for readability and efficiency.

I'm particularly strong in algorithmic thinking and optimization. I can analyze performance bottlenecks 
and implement effective solutions, whether it's improving time complexity or reducing resource usage.

I have a solid grasp of software architecture patterns and can adapt them to fit project needs. 
I'm comfortable designing and implementing APIs, working with databases, and integrating various system components.

Testing is integral to my development process. I write comprehensive unit tests and understand 
the value of integration and end-to-end testing in ensuring robust, reliable software.

I stay current with industry trends and continuously refine my skills. However, I'm pragmatic in my approach, 
focusing on proven technologies that add real value rather than chasing every new trend.

Debugging and troubleshooting are areas where I shine. I can quickly isolate issues in complex systems 
and implement effective fixes.

Lastly, I'm a strong communicator. I can explain technical concepts clearly to both technical 
and non-technical stakeholders, facilitating better collaboration across teams.
`,IA=`
When designing and building complex code, my thought process typically follows these steps:

I start by thoroughly analyzing the problem domain. I break down the requirements, 
identifying the core functionalities and potential edge cases.

Next, I consider the overall architecture. I think about how different components will interact, 
data flow, and potential bottlenecks. I often sketch out high-level diagrams to visualize the system structure.

I evaluate trade-offs between different design patterns and approaches. I consider factors like scalability, 
maintainability, and performance. I try to anticipate future requirements to make the system extensible.

Before diving into implementation, I plan out the data structures and algorithms I'll use. 
I consider time and space complexity, thinking about how the solution will perform with larger datasets.

I break the problem down into smaller, manageable modules or functions. I define clear interfaces 
between these components, thinking about how they'll be tested in isolation.

As I start coding, I focus on creating a minimal viable implementation of each component. 
I write unit tests alongside the code, using test-driven development where appropriate.

I constantly refactor as I go, looking for opportunities to improve code clarity and efficiency. 
I'm always thinking about how another developer would read and understand my code.

For particularly complex parts, I often step back and reconsider my approach. Sometimes I'll implement 
a quick prototype to validate a concept before fully committing to it.

Throughout the process, I document my code and decisions. I write clear comments explaining the 'why' 
behind complex logic, not just the 'what'.

As the system comes together, I start thinking about integration testing and how different components interact. 
I look for potential race conditions or unexpected behaviors in the system as a whole.

Finally, I review the entire solution, considering aspects like error handling, logging, and monitoring. 
I think about how the system will behave in production and what tools will be needed to maintain it.

This process is iterative, and I'm always ready to revisit earlier decisions as new information or challenges arise. The goal is to create a robust, efficient, and maintainable solution that solves the problem at hand while being flexible enough to adapt to future needs.
`;async function hw(){let e=[],t=ah([await fw(),`

`,dw(),`

`,pw(),`

`,vw()]),r={about:EA,writing:TA,developer:wA,process:IA,environment:t};for(let n in mw)r[n]&&(e.push({role:"user",content:ah(mw[n])}),e.push({role:"assistant",content:ah(r[n])}));return e}var Fp=require("vscode");async function _w(){let e=[];for(let{id:t,name:r,modelDescription:n,value:s}of Be.request.references){let c=String(s);if(t!="vscode.implicit.viewport"){if(s instanceof Fp.Uri){let h=await Fp.workspace.fs.stat(s);if(h.type&Fp.FileType.File)c=(await Fp.workspace.openTextDocument(s)).getText();else if(h.type&Fp.FileType.Directory){let b=await Ig(Pp(s)),N=b.filter(({isFile:$})=>$).map(({path:$})=>$),k=b.filter(({isDirectory:$})=>$).map(({path:$})=>$);c=DA(k)+NA(N)}r=Pp(s)}else s instanceof Fp.Location&&(c=(await Fp.workspace.openTextDocument(s.uri)).getText(s.range),r+=" from "+Pp(s.uri));n&&(r+=` (${n})`),e.push({role:"user",content:`Read ${r}`}),e.push({role:"assistant",content:c})}}return e}var NA=e=>`
<files>
${e.join(`
`)||"empty (no files here)"}
</files>
`,DA=e=>`
<directories>
    ${e.join(`
`)||"empty (no sub-directories here)"}
</directories>
`;var D_=require("vscode");var{fs:gw}=D_.workspace,yw="sourcecode",CA=`
Read and analyze source code files in the project

Commands:
- /stat: checks if the specified path exists and returns basic information about it
- /read: returns the content of a file or directory at the given path
`,xA=O.object({command:O.enum(["stat","read"]).describe("Command"),path:O.string().describe("File or directory path")}),PA="Looking at the source files ...",AA=(e,t,r)=>`
Found ${e} directory containing ${t} sub-directories and ${r} files.
`,RA=(e,t)=>`
Found ${e} file (${t} lines).
`,kA=(e,t)=>`
<file_content path="${e}">
${t}
</file_content>
`;async function OA({command:e,path:t}){let{log:r,stream:n}=Be;r.info(t,{command:e,event:`tool.${yw}.${e}`});let s=_a(t),c=null;try{c=await gw.stat(s)}catch{return e!=="stat"&&r.warn("[sourcecode] Path does not exist",{path:t,command:e}),"Error: Path does not exist - "+t}if(c.type&D_.FileType.Directory)return await MA(e,t,s);e!=="stat"&&n.reference(kf(s));let h=await Ap(s),b=h.split(`
`),N=RA(t,b.length);return e=="read"&&(N+=kA(t,h)),N}async function MA(e,t,r){let n=[],s=[];for(let[h,b]of await gw.readDirectory(r))b&D_.FileType.File?s.push(h):b&D_.FileType.Directory&&n.push(h+"/");let c=AA(t,n.length,s.length);return e=="read"&&(c+=`
`+n.concat(s).join("/n")),c}var Sw={name:yw,description:CA,parameters:xA,execute:OA,progress:PA};var C_=require("vscode");var{fs:bw}=C_.workspace,Ew="documents",LA=`
Read task-related documentation files

Commands:
- /stat: checks if the specified documentation path exists and returns basic information about it
- /read: returns the content of a documentation file or directory at the given path
`,FA=O.object({command:O.enum(["stat","read"]).describe("Command"),path:O.string().describe("File or directory path")}),UA="Looking at the available documents ...",jA=(e,t,r)=>`
Found ${e} directory containing ${t} sub-directories and ${r} files.
`,YA=(e,t)=>`
Found ${e} file (${t} lines).
`,$A=(e,t)=>`
<file_content path="${e}">
${t}
</file_content>
`;async function qA({command:e,path:t}){let{log:r,stream:n}=Be;r.info(t,{command:e,event:`tool.${Ew}.${e}`});let s=_a(t),c=null;try{c=await bw.stat(s)}catch{return e!=="stat"&&r.warn("[documents] Path does not exist",{path:t,command:e}),"Error: Path does not exist - "+t}if(c.type&C_.FileType.Directory)return await BA(e,t,s);let h=await Ap(s),b=h.split(`
`),N=YA(t,b.length);return e=="read"&&(N+=$A(t,h)),N}async function BA(e,t,r){let n=[],s=[];for(let[h,b]of await bw.readDirectory(r))b&C_.FileType.File?s.push(h):b&C_.FileType.Directory&&n.push(h+"/");let c=jA(t,n.length,s.length);return e=="read"&&(c+=`
`+n.concat(s).join("/n")),c}var Tw={name:Ew,description:LA,parameters:FA,execute:qA,progress:UA};var x_=require("vscode");var fo=require("vscode");async function ly(e,t){var k,$,ne;let r=e.edits.find(le=>le.id==t);if(!r)return;let n=new fo.WorkspaceEdit,s=kf(_a(r.path));try{await fo.workspace.fs.stat(s)}catch{s=s.with({scheme:"untitled"})}let c=await fo.workspace.openTextDocument(s),h=c.getText().replace(/\r\n/g,`
`),b=h==r.after.replace(/\r\n/g,`
`)?r.before:r.after,N=new fo.Range(new fo.Position(0,0),new fo.Position(c.lineCount,0));n.replace(s,N,b),await fo.workspace.applyEdit(n),((ne=($=(k=fo.window.activeTextEditor)==null?void 0:k.document)==null?void 0:$.uri)==null?void 0:ne.path)!=s.path&&await fo.window.showTextDocument(c),zA(r.search)}function zA(e){var N;let t=fo.window.activeTextEditor,r=t==null?void 0:t.document,n=(N=r==null?void 0:r.getText())==null?void 0:N.replace(/\r\n/g,`
`);if(!e||!t||!r)return;let s=n.indexOf(e);if(s==-1)return;let c=n.slice(0,s).split(`
`).length-1,h=e.split(`
`).length,b=new fo.Position(c,0);t.selection=new fo.Selection(b,b),t.revealRange(new fo.Range(b,new fo.Position(c+h,0)))}var Bh=require("vscode");function ww(e,t,r,n,s,c,h){if(c.startsWith(".documents"))return U0(e,s,c);let b=new Bh.MarkdownString(`

`),N=encodeURIComponent(JSON.stringify([c,r])),k=`command:multicoder.diffView?${N}`,$=le=>`<sub><span class="codicon codicon-${le}" style="color:var(--vscode-textLink-foreground);"></span></sub>`;b.supportThemeIcons=!0,b.isTrusted={enabledCommands:["multicoder.diffView"]},b.supportHtml=!0,b.appendMarkdown(`[${$("diff-single")} ${n} (${c})](${k} 'Open Diff')`),b.appendCodeblock(s,h),e.markdown(b),e.button({title:"Apply",command:"multicoder.action",arguments:[ne],tooltip:"Click to apply changes, click again to revert"});function ne(){ly(t,r)}}function U0(e,t,r){let n=new Bh.MarkdownString(`

`);n.supportHtml=!0,n.appendMarkdown(t),e.markdown(n),e.button({title:"Edit",command:"multicoder.action",arguments:[s],tooltip:"Click to edit the document"});async function s(){let c=_a(r),h=await Bh.workspace.openTextDocument(c);Bh.window.showTextDocument(h)}}var Nw="editor",GA=`
Create and modify source files or documents

Commands:
- /create: creates a new file with the specified content
- /insert: inserts new content just before the matched lines
- /append: adds new content immediately after the matched lines
- /update: replaces matched text block with new content

Usage:
- To add new content always use /insert or /append
- To replace content use /update
- To delete content, use /update with empty content
- Keep modifications focused and atomic
- Test changes in small increments
`,VA=`
Matching lines to find in the original file:
- For /create: Always use empty string ("")
- For entire file content: Use empty string ("")
- For specific blocks: Use exact lines including whitespace (but NOT the entire file)
- For /insert: Use first 1-3 lines of target block
- For /append: Use last 3-5 lines of target block
- Ensure match is unique within file to avoid ambiguity
`,HA=O.object({command:O.enum(["create","insert","append","update"]).describe("Command"),path:O.string().describe("File path"),match:O.string().describe(VA),content:O.string().describe("New or updated text"),summary:O.string().describe("A very short (3-10 words) summary of this change")}),KA="Writing code ...";async function WA(e){if(Be.shared.phase&&!e.path.startsWith(".documents"))return"Error: cannot modify source code yet. At this point you should only work on task documents.";let{error:t}=await Dw(e);if(t)return"Tool error: "+t;let r=e.command=="create"?"created":"modified";return Be.shared.phase?`Document ${r}. Provide a very short summary using summary tool`:`${e.path} ${r}`}async function Dw({path:e,command:t,match:r,content:n}){let s=_a(e),c=null,h=null,b=n;try{if(await x_.workspace.fs.stat(s),t==="create")return{error:"File already exists: "+e}}catch{if(t!=="create")return{error:"File not found: "+e}}switch(t){case"insert":case"append":case"update":if(c=await x_.workspace.openTextDocument(s),h=await Ap(s),b=XA(h,r,n,c.eol,t),!b)return{error:"Cannot find exact match. The file has not been modified. Read the file again to get the current content."}}return{document:c,before:h,after:b}}async function JA(e){let{log:t,stream:r,shared:n}=Be,{path:s,summary:c,command:h,match:b,content:N}=e;if(n.phase&&!e.path.startsWith(".documents")){t.warn(`[workflow] Code not allowed: ${c}`,{path:s,command:h,summary:c});return}let{document:k,before:$,after:ne,error:le}=await Dw(e);if(le)return;let we=_a(s);t.info(c,{path:s,command:h,event:`tool.${Nw}.${h}`});try{await wg(we,ne)}catch(ce){throw t.warn("Cannot write file - "+ce.message,{path:s,command:h,summary:c,...ce}),ce}k=await x_.workspace.openTextDocument(we);let ge=k.languageId,ve=yS();n.edits.push({id:ve,summary:c,path:s,before:$,after:ne,search:N}),h=="create"?QA(r,n,ve,c,N,s,ge):ww(r,n,ve,c,N||b,s,ge)}function ZA(e){return/^\s*\/\//.test(e)||/^\s*\/\*/.test(e)}function Iw(e,t){let r=ZA(e)?"":`
`;return e.endsWith(`
`)&&t.startsWith(`
`)?e+t:e.endsWith(`
`)||t.startsWith(`
`)?e+r+t:e+r+`
`+t}function XA(e,t,r,n,s){let c=e.replace(/\r\n/g,`
`);t||(t=c),s=="insert"&&(r=Iw(r,t)),s=="append"&&(r=Iw(t,r));let h=c.replace(t,r);return c==h?null:(n==2&&(h=h.replace(/\n/g,`\r
`)),h)}function QA(e,t,r,n,s,c,h){if(c.startsWith(".documents"))return U0(e,s,c);async function b(){ly(t,r)}let N=new x_.MarkdownString(`

`),k=encodeURIComponent(JSON.stringify([c,r])),$=`command:multicoder.diffView?${k}`,ne=le=>`<sub><span class="codicon codicon-${le}" style="color:var(--vscode-textLink-foreground);"></span></sub>`;N.supportThemeIcons=!0,N.isTrusted={enabledCommands:["multicoder.diffView"]},N.supportHtml=!0,N.appendMarkdown(`[${ne("diff-single")} ${n} (${c})](${$} 'Open Diff')`),N.appendCodeblock(s,h),e.markdown(N),e.button({title:"Create",command:"multicoder.action",arguments:[b],tooltip:"Click to create file, click again to revert"})}var Cw={name:Nw,description:GA,parameters:HA,execute:WA,finalize:JA,progress:KA};var xw=require("vscode");var{fs:Cj}=xw.workspace,Pw="filesystem",eR=`
Manage files and directories

Commands:
- /create: creates a new directory at the specified path
- /delete: deletes a file or directory at the specified path
`,tR=O.object({command:O.enum(["create","delete"]).describe("Command"),path:O.string().describe("File or directory path")}),rR="Working with files ...";async function nR({command:e,path:t}){let{log:r}=Be;r.info(t,{command:e,event:`tool.${Pw}.${e}`});let n=_a(t);return"ok"}var Aw={name:Pw,description:eR,parameters:tR,execute:nR,progress:rR};var Rw="question",aR=`
    Use this tool to ask questions in order to collect all relevant info for the task.
    You can ask one question at a time. If you have more questions, use this tool several times.
    Provide also the of suggested answers, so that the user can just click on answer text instead of typing.
`,iR=O.object({question:O.string().describe("Question text"),answers:O.array(O.string()).describe("Suggested answers to display to the user"),multiple_choice:O.boolean().describe("Is this a multiple choice question?")}),oR="Preparing questions ...",j0=[];async function sR({question:e,answers:t,multiple_choice:r}){let n=[],{log:s,stream:c}=Be;for(s.info(e,{answers:t,multiple_choice:r,event:"tool."+Rw});;){c.markdown(uR({question:e})),r&&c.markdown(cR(n));let h=await Rv({followups:lR(t,n,r)});if({stream:c}=Be,r){if(h.prompt=="continue")return j0.push({question:e,items:n}),n.join(`
`);h.prompt&&n.push(h.prompt)}else return j0.push({question:e,answer:h.prompt}),h.prompt}}var uR=({question:e})=>`

---
Q: **${e}**
`,cR=e=>`
${e.map(t=>`
- ${t}`)}
`;function lR(e,t,r){let n=[];return e.forEach(s=>{t.indexOf(s)==-1&&!/please/i.test(s)&&n.push({prompt:s})}),r&&n.push({prompt:"continue",label:"\u25B6 continue to the next question..."}),n}var kw={name:Rw,description:aR,parameters:iR,execute:sR,progress:oR,latest:j0};var Ow="list",fR=`
    Allows to present the information as a list
`,dR=O.object({header:O.string().describe("Item header"),content:O.string().describe("Item content")}),pR=O.object({title:O.string().describe("Title"),items:O.array(dR).describe("List items"),comments:O.string().describe("Comments")});async function vR({title:e,items:t,comments:r}){let{log:n,stream:s}=Be;return n.info(e,{event:"tool."+Ow}),s.markdown(`

# `+e+`
`),t.forEach(({header:c,content:h})=>{s.markdown(`
## `+c+`
`),s.markdown(`
`+h+`
`)}),"ok"}var Mw={name:Ow,description:fR,parameters:pR,execute:vR};var Lw="summary",mR=`
    Shows summary, explanations or walkthrough section at the end of the response or after each task step.
    Allows the user to see the progress of completing the task.
    Always use this tool at the end of each step or when the task is finished.
`,hR=O.object({text:O.string().describe("Short walkthrough or summary of this step")});async function _R({text:e}){return Be.log.info(`${e==null?void 0:e.length} chars`,{text:e,event:"tool."+Lw}),Be.stream.markdown(`

`+e+`

`),"ok"}var Fw={name:Lw,description:mR,parameters:hR,execute:_R};var Uw="followups",gR=`
    Displays followup actions to the user at the end of the conversation turn.
`,yR=O.object({actions:O.array(O.string()).describe("Short followup actions (5-10 words)")});async function SR({actions:e}){return Be.log.info(`${e==null?void 0:e.length} options`,{actions:e,event:"tool."+Uw}),"ok"}var jw={name:Uw,description:gR,parameters:yR,execute:SR};var Yw="evaluation",bR=`
    Reports the task evaluation results. Use this tool when requested to evaluate a task.

    Evaluate the task for 
    - clarity (ambiguity, incompleteness, imprecision),
    - complexity (functional scope, architectural scale, required skills level)
    - workload (workflow type, projected effort, budget estimate)

    Carefully choose the most appropriate level for each evaluated dimension.
`,ER=O.number().describe(`
The ambiguity level:
    0 - n/a (not applicable)
    1 - very low
    2 - low
    3 - medium
    4 - high
    5 - very high

Ambiguity implies that something can be interpreted in multiple valid ways.
`),TR=O.number().describe(`
The incompleteness level:
    0 - n/a (not applicable)
    1 - very low
    2 - low
    3 - medium
    4 - high
    5 - very high

Incompleteness refers to missing information or parts.
`),wR=O.number().describe(`
The imprecision level:
    0 - n/a (not applicable)
    1 - very low
    2 - low
    3 - medium
    4 - high
    5 - very high

Imprecision refers to lack of exactness or accuracy.
`),IR=O.number().describe(`
The functional scope level:
    0 - n/a (not applicable)
    1 - implementation details, simple bugfix, code formatting
    2 - user story, issue, enhancement, complex bugfix
    3 - product feature, architectural refactoring
    4 - epic, application, library, subsystem
    5 - full product, platform, framework
`),NR=O.number().describe(`
The architectural scale level:
    0 - n/a (not applicable)
    1 - code level (local scope): variable naming, control flow, error handling
    2 - component level (single module): classes, functions, state management, data structures
    3 - service level (multiple modules): APIs, database models, service integrations
    4 - application level (system-wide): application architecture, system design
    5 - enterprise level (cross-system): distributed systems, cloud infrastructure, scalability
`),DR=O.number().describe(`
The required software engineering skills level:
    0 - n/a (not applicable)
    1 - junior (1 year)
    2 - mid (1-3 years)
    3 - senior (3-5 years)
    4 - stuff (5-10 years)
    5 - principal (10+) years
`),CR=O.number().describe(`
The applicable workflow type:
    0 - n/a (not applicable)
    1 - single commit
    2 - pull request
    3 - sprint/iteration
    4 - small project
    5 - large project
`),xR=O.number().describe(`
The projected effort level:
    0 - n/a (not applicable)
    1 - very small (minutes)
    2 - small (hours)
    3 - medium (days)
    4 - large (weeks)
    5 - very large (months)
`),PR=O.number().describe(`
The development budget estimate:
    0 - n/a (not applicable)
    1 - very low
    2 - $20-200
    3 - $200-2000
    4 - $2000-20000
    5 - above $20000
`),AR=O.string().describe("Suggestions how to improve the request"),RR=O.boolean().describe(`
    true if task requirements need further clarification or refinement
`),kR=O.boolean().describe(`
    true if solution is not trivial and will benefit from detailed design
`),OR=O.boolean().describe(`
    true to split the task into smaller, manageable steps
`),MR=O.object({ambiguity:ER,incompleteness:TR,imprecision:wR,functionalScope:IR,architecturalScale:NR,skillsLevel:DR,workflowType:CR,projectedEffort:xR,budgetEstimate:PR,clarifyRequirements:RR,designSolution:kR,splitIntoParts:OR,suggestions:AR});async function LR(e){let t=b=>b.toFixed(1),[r,n,s]=$w(e),c=`${t(r)} ${t(n)} ${t(s)} `,h=`${e.clarifyRequirements} ${e.designSolution} ${e.splitIntoParts}`;return Be.log.info(c+h,{uncertainty:r,complexity:n,workload:s,...e,event:"tool."+Yw}),"ok"}function $w(e){let t=(e.ambiguity+e.incompleteness+e.imprecision)/3,r=(e.architecturalScale+e.functionalScope+e.skillsLevel)/3,n=(e.projectedEffort+e.workflowType+e.budgetEstimate)/3;return[t,r,n]}var qw={name:Yw,description:bR,parameters:MR,execute:LR,compute:$w};var FR=[Sw,Tw,Cw,Aw,kw,Mw,Fw,jw,qw],po=Object.fromEntries(FR.map(e=>[e.name,UR(e)]));function UR(e){return{execute:async()=>"ok",...e}}function Bw(e){try{return JSON.parse(e)}catch{return null}}function zw(e){return JSON.stringify(e)}async function Gw({error:e,toolCall:t}){if(qh.isInstance(e)){let r=e.toolName.split(".");if(r.length==2){let[n,s]=r,c=po[n],h=Bw(t.args);if(c){let b={...e,event:"repair.tool"};return Be.log.warn(`Tool name: ${e.toolName}`,b),"command"in c.parameters.shape&&h&&!h.command?(h.command=s,{...t,toolName:n,args:zw(h)}):{...t,toolName:n}}}return null}if(N_.isInstance(e)){let r=e.toolName,n=Bw(e.toolArgs),s=e.cause,c=[];if(n&&mm.isInstance(s)){let h=s.cause;if(h instanceof Tc){for(let N of h.issues){let k=N.path.join(".");if(c.push(k),r==po.followups.name&&k=="actions"&&N.code=="invalid_type"&&N.expected=="array"&&N.received=="string")n.actions=n.actions.split(`
`);else if(r==po.editor.name&&k=="match"&&N.code=="invalid_type"&&N.expected=="string"&&N.received=="undefined")n.match="";else if(r==po.editor.name&&k=="content"&&N.code=="invalid_type"&&N.expected=="string"&&N.received=="undefined")n.content="";else if(r==po.editor.name&&k=="summary"&&N.code=="invalid_type"&&N.expected=="string"&&N.received=="undefined")n.summary=`${n.command} ${n.path}`;else return null}let b={...e,event:"repair.args"};return Be.log.warn(`Tool arguments: ${e.toolName}.${c.join(", ")}`,b),{...t,args:zw(n)}}}return null}return null}var fy,jR,Kw,Vw;function Rv(e){return new Promise((t,r)=>{fy=t,jR=r,Kw(e)})}var qo=[];async function Ww(e){let{shared:t}=Be;return t.edits=[],t.plan=null,qo=[...await hw()],fy=e,{async next(r){return qo.push(...await _w()),new Promise((n,s)=>{Kw=n,Vw=s,Promise.resolve(fy(r)).catch(c=>Vw(c))})},return(){qo=[],fy=e}}}function sh(e,t,r={}){Be.stream.markdown(""),Be.stream.progress(`Retrying (${t}): ${e}`),Be.log.warn(e,{...r,count:t,event:"retry"})}async function Y0(e,t=""){let{model:r}=Be;wm(e);let n=0,s=0,c=0,h=0,b=0;for(;;){uw(qo);let N=await ow({model:r,system:lw,messages:qo,tools:po,temperature:.2,maxTokens:8192,maxSteps:1,experimental_toolCallStreaming:!0,experimental_repairToolCall:Gw}),k=!1;for await(let ge of N.fullStream){if(Be.token.isCancellationRequested)break;switch(ge.type){case"text-delta":Be.stream.markdown(ge.textDelta);break;case"tool-call-streaming-start":let ve=po[ge.toolName].progress;ve&&(Be.stream.markdown(""),Be.stream.progress(ve));break;case"error":if(qh.isInstance(ge.error)&&++n<=5){k=!0;let ut=`Unknown tool ${ge.error.toolName}`;sh(ut,n,ge.error);break}if(N_.isInstance(ge.error)&&++n<=5){k=!0;let ut=`Invalid arguments for tool ${ge.error.toolName}`;sh(ut,n,ge.error);break}if(O0.isInstance(ge.error)&&++n<=5){k=!0,sh("Tool call repair failed",n,ge.error);break}let{event:ce,count:Pe,message:Ke}=ge.error;if(ce=="retry"){sh(Ke,Pe,ge.error);break}throw ge.error}}let $=await N.response,ne=await N.toolCalls,le=await N.toolResults;if(k)continue;n=0;let we="";for(let ge of le)ge.result.startsWith("Tool error: ")&&(we=ge.result.slice(12));if(we)if(++s<3){sh(we,s);continue}else if(++c<2)sh("Tool execution error",c);else throw new Error(we);else c=0;if(s=0,$.messages.length==1){let{role:ge,content:ve}=$.messages[0];if(ge=="assistant"&&Array.isArray(ve)&&ve.length==1){let ce=ve[0];if(ce.type=="text"&&ce.text===""&&++h<=5){sh("Empty response",h),await Hw(5*h);continue}}}h=0;for(let{toolName:ge,args:ve,result:ce}of le){let Pe=po[ge];Pe!=null&&Pe.finalize&&await Pe.finalize(ve,ce)}if(qo=[...qo,...$.messages],ne.length){b=0;for(let ge of ne)if(ge.toolName==t)return ge.args}else if(t){if(++b>3)throw new Error(`Unable to call ${t} tool`);sh("Unexpected stop",b,{name:t}),await Hw(5*b),qo=[...qo,{role:"user",content:`Reply using ${t} tool`}]}else return}}async function iu(e,t,r=""){return r&&(Be.stream.markdown(""),Be.stream.progress(r)),Y0(t,e.name)}function Fu(){let e=qo.concat();return{restore(){qo=e.concat()}}}function wm(e,t=""){if(qo=qo.slice(),!e&&t){qo.push({role:"assistant",content:t});return}let r=qo.pop();if(r.role=="system"||r.role=="assistant")qo.push(r,{role:"user",content:e||"?"});else if(r.role=="tool"){let n=r.content.slice();n.push({...n.pop(),result:e}),qo.push({role:"tool",content:n})}else if(r.role=="user"){let{content:n}=r;n=Array.isArray(n)?n.slice():[{type:"text",text:n}],n.push({type:"text",text:e}),qo.push({role:"user",content:n})}else throw new Error("Unsupported prompt structure");t&&qo.push({role:"assistant",content:t})}async function Hw(e){return new Promise(t=>setTimeout(t,e*1e3))}var gy=require("vscode");var{evaluation:$0}=po,YR=()=>`
    Evaluate the task and reply using ${$0.name} tool, taking into account the included documents (if any)
`,Jw=$0.compute;async function Zw(){let e=Fu(),t=await iu($0,YR(),"Deciding next steps...");return e.restore(),t}var py=require("vscode");var{editor:$R,question:qR,summary:dy,followups:Qw}=po,{fs:Xw}=py.workspace,BR=(e,t)=>`
    Use ${$R.name} tool to create requirements document in the ${e}/ directory.
    Clarify the request, removing any ambiguities or omissions.
    Use ${qR.name} tool to obtain the missing information.
    For the existing project, include implied requirements derived from the project configuration and context.
    Focus strictly on the requirements - DO NOT try to design the solution, define data structures or write some code at this point.
    Adjust the content and structure according to the task complexity (should very short and simple for trivial tasks).
    Produce a minimal, but complete document, do not leave any open questions for the future.

    Also consider the suggestions below:
    <suggestions>
      ${t}
    </suggestions>

    Use a very dense, concise, minimalist writing style.
    Provide a short summary using ${dy.name} tool.
`,zR=(e,t)=>`Read the existing requirements document(s):
    <document-filenames>
      ${e}
    </document-filenames>

    Make the following changes in the document(s):
    <changes>
      ${t}
    </changes>

    Modify the document(s), then deliver a very short summary using ${dy.name} tool.
`,GR=()=>`
    Carefully review the requirements document to find any missing elements.
    Add or correct any significant items and remove anything that is not strictly necessary.
    Focus strictly on the requirements - DO NOT try to design the solution, define data structures or write some code at this point.
`,VR=()=>`
    Suggest possible high-level modifications which may make the requirements more clear and easy to understand. 
    For example, increase or decrease detalization, add/remove sections, split/merge sections etc.
    Offer them as followup actions using ${Qw.name} tool.
    Never ever include any other actions, only modifications of the requirements.
`;async function eI(e,t){Be.shared.phase="clarify";let r=Fu(),n=new Set;for(let[s]of await Xw.readDirectory(_a(e)))n.add(s);for(await iu(dy,BR(e,t),"Clarifying requirements...");;){let s=Fu(),{actions:c}=await iu(Qw,VR());s.restore();let h={followups:c.map(k=>({prompt:k,label:k}))};h.followups.push({prompt:"improve",label:"\u2B6E Review and improve"}),h.followups.push({prompt:"continue",label:"\u25B6 Continue to design/planning (Enter)"});let b=await Rv(h);if(r.restore(),!b.prompt||b.prompt=="continue")break;let N=[];for(let[k,$]of await Xw.readDirectory(_a(e)))$&py.FileType.File&&!n.has(k)&&N.push(e+"/"+k);t=b.prompt=="improve"?GR():b.prompt,await iu(dy,zR(N,t),"Updating requirements...")}Be.shared.phase=""}var my=require("vscode");var{editor:HR,summary:vy,followups:rI}=po,{fs:tI}=my.workspace,KR=e=>`
    Use ${HR.name} tool to create solution design document(s) in the ${e}/ directory.
    Analyze the current project, do the research and design the solution.
    Your goal is to find the most simple solution, very easy to understand and maintain. 
    Only include the features which are explicitely required. Skip anything that can be added at a later stage.
    Adjust the content and structure of the spec according to the task complexity (should very short and simple for trivial tasks).
    Apply a very dense, concise, minimalist writing style.
    Provide a short specification summary using ${vy.name} tool.
`,WR=(e,t)=>`Read the existing design document(s):
    <document-filenames>
      ${e}
    </document-filenames>

    Make the following changes in the document(s):
    <changes>
      ${t}
    </changes>

    Modify the document(s), then deliver a very short summary using ${vy.name} tool.
`,JR=()=>`
    Carefully review the design document(s) to find any missing elements.
    Add or correct any significant items and remove anything that is not strictly necessary.
    Focus strictly on the solution design - DO NOT try to write code, DO NOT make step-by-step plan at this point.
`,ZR=()=>`
    Suggest possible high-level modifications which may make the solution design more clear and easy to understand. 
    For example, increase or decrease detalization, add/remove sections, split/merge sections etc.
    Offer them as followup actions using ${rI.name} tool.
    Never ever include any other actions, only modifications of the solution design.
`;async function nI(e,t){Be.shared.phase="design";let r=Fu(),n=new Set;for(let[s]of await tI.readDirectory(_a(e)))n.add(s);for(await iu(vy,KR(e),"Designing solution...");;){let s=Fu(),{actions:c}=await iu(rI,ZR());s.restore();let h={followups:c.map($=>({prompt:$,label:$}))};h.followups.push({prompt:"improve",label:"\u2B6E Review and improve"}),h.followups.push({prompt:"continue",label:"\u25B6 Continue to planning/implementation (Enter)"});let b=await Rv(h);if(r.restore(),!b.prompt||b.prompt=="continue")break;let N=[];for(let[$,ne]of await tI.readDirectory(_a(e)))ne&my.FileType.File&&!n.has($)&&N.push(e+"/"+$);let k=b.prompt=="improve"?JR():b.prompt;await iu(vy,WR(N,k),"Updating design...")}Be.shared.phase=""}var zh=require("vscode");var{list:hy,followups:aI}=po,XR=()=>`
    Split the task into smaller, more manageable steps and present them using the ${hy.name} tool.
    The list should contain task steps. If the work is very small, use just one single step.
    Each step has a name (header) and a specification of the work to do in this step.
    Strictly follow the requirements and design documents if available.
    Take into account the changes made in the previous tasks.
    Carefully think through all steps and mentally verify the proposed implementation.
    Follow KISS, YAGNI and SOLID principles, focus on simplicity above all other things.
    Use a very dense, concise, minimalist writing style.
`,QR=(e,t)=>`Read the existing implementation plan:
    <document-filename>
      ${e}/implementation_plan.md
    </document-filename>

    Make the following changes in the plan:
    <changes>
      ${t}
    </changes>

    Modify the plan, then present it using the ${hy.name} tool.
    The list should contain task steps. If the work is very small, use just one single step.
    Each step has a name (header) and a specification of the work to do in this step.
    Strictly follow the requirements and design documents if available.
    Take into account the changes made in the previous tasks.
    Carefully think through all steps and mentally verify the proposed implementation.
    Follow KISS, YAGNI and SOLID principles.
`,ek=()=>`
    Carefully analyse each section of the plan to identify any inconsistencies or logical errors. 
    Check for edge cases, cross-dependencies and anything, that can affect successful implementation.
`,tk=()=>`
    Suggest possible high-level modifications which may improve this implementation plan. 
    For example, increase or decrease detalization, add/remove sections, split/merge sections etc.
    Offer them as followup actions using ${aI.name} tool.
    Never ever include any other actions, only modifications of the implementation plan.
`,rk=({title:e,items:t})=>`# ${e}

${t.map(({header:r,content:n})=>`## ${r}

${n}

`).join("")}
`;function nk(e,t){Be.stream.button({title:"Edit",command:"multicoder.action",arguments:[r],tooltip:"Click to edit the plan"});async function r(){let n=await zh.workspace.openTextDocument(t);zh.window.showTextDocument(n)}Be.stream.markdown(`
`+e.comments+`
`)}async function ak(e,t,r){if(await Ap(r)==t)return;let s=await zh.commands.executeCommand("vscode.executeDocumentSymbolProvider",r);if(!s||s.length===0)return;let c=await zh.workspace.openTextDocument(r),h=s[0],b=h.name.replace(/^[#\s]+/,""),N=h.children.map(({name:k,range:$})=>({header:k.replace(/^[#\s]+/,""),content:c.getText($).slice(k.length).trim()}));e.title=b,e.items=N}async function iI(e,t){Be.shared.phase="plan";let r=Fu(),n=await iu(hy,XR(),"Planning..."),s=_a(e+"/implementation_plan.md");for(;;){let c=rk(n);await wg(s,c),nk(n,s);let h=Fu(),{actions:b}=await iu(aI,tk());h.restore();let N={followups:b.map($=>({prompt:$,label:$}))};N.followups.push({prompt:"improve",label:"\u2B6E Review and improve"}),N.followups.push({prompt:"continue",label:"\u25B6 Start implementation (Enter)"});let k=await Rv(N);if(r.restore(),!k.prompt||k.prompt=="continue"){await ak(n,c,s);break}t=k.prompt=="improve"?ek():k.prompt,n=await iu(hy,QR(e,t),"Updating planning...")}return Be.shared.phase="",n}var oI=require("vscode");var{summary:_y}=po,ik=()=>`
    Implement the task, then deliver the summary using ${_y.name} tool.
`,ok=e=>`
    We have now implemented all the steps of the plan:
    <implemented>
    ${e.title}
    </implemented>
    Deliver the summary of this work using ${_y.name} tool.
`,sk=(e,t,r,n)=>`Step ${e+1} (${t}) is now completed.

${r}

${n.length?"Completed changes:":""}
${n.map(({summary:s,filename:c})=>`- ${s} (${c})`).join(`
`)}
`,uk=(e,t)=>`We will now work on the step ${t+1}:

## ${e.header}

${e.content}
`,ck=(e,t,r)=>`
<table><tr><th> $(list-tree) ${e} (${t+1}/${r})</th></tr></table>
`;async function q0(e,t,r,n){if(!e||e.items.length==1)return await iu(_y,ik());wm("",`Do you want me to work on ${e.title}?`);for(let s=0;s<e.items.length;s++){let c=Fu(),h=e.items[s],b=h.header.replace(/^[\d\.\s]+/,""),N=Be.shared.edits.length,k=new oI.MarkdownString("");k.supportHtml=!0,k.supportThemeIcons=!0,k.appendMarkdown(ck(b,s,e.items.length)),Be.stream.markdown(k),wm(uk(h,s));let $=await n(t+1,r+"/"+(s+1));c.restore();let ne=Be.shared.edits.slice(N);wm(sk(s,b,$.text,ne))}return await iu(_y,ok(e))}var{fs:lk}=gy.workspace,fk=".documents/task",dk=(e,t,r)=>`<document filename="${r}/${t}">
${e}
</document>
`;async function sI(e=0,t=fk){let r=Fu(),n=0,s=0,c=null;for(;;){r.restore(),Be.shared.phase="";for(let[ne,le]of await lk.readDirectory(_a(t)))if(le&gy.FileType.File){let we=await Ap(_a(t+"/"+ne));wm(dk(we,ne,t))}if(c)return await q0(c,e,t,sI);let h=await Zw(),b="implement",[N,k,$]=Jw(h);if(h.architecturalScale==0&&!e)return{};if(h.splitIntoParts&&(b="plan"),h.designSolution&&!s&&(b="design"),h.clarifyRequirements&&!n&&!s&&!e&&(b="clarify"),!s&&k>2.5&&b!="clarify"&&(b="design"),$>2&&b=="implement"&&(b="plan"),b=="clarify"){await eI(t,h.suggestions),++n;continue}if(b=="design"){await nI(t,h.suggestions),++s;continue}if(b=="plan"){c=await iI(t,h.suggestions);continue}return await q0()}}var pk=e=>`We have a new request:
<request>
${e}
</request>
`;async function uI(e){for(;;){let t=e.prompt,r=Fu();wm(pk(t)),(await sI()).text?wm(""," "):(r.restore(),await Y0(t)),e=await Rv()}}var yy={};Cy(yy,{config:()=>B0});var lI=require("vscode");var vk=()=>`
Multicoder can work with LLM models provided by **GitHub Copilot** (default configuration) or 
send requests directly to the core provider APIs (**Anthropic**, **OpenAI**).

If you have your own API key and want to use it instead of the Github models, select 'Core Providers' in the Model Provider dropdown (settings panel)
and set your API key(s) using the buttons below.

`;async function cI(e){var r;let t=await Be.ext.secrets.get(e)||((r=process==null?void 0:process.env)==null?void 0:r[e]);return t&&t.slice(0,12)+"..."+t.slice(-4)}async function B0(){let{stream:e,telemetry:t}=Be;lI.commands.executeCommand("workbench.action.openSettings","@ext:multicoder.multicoder"),t.logUsage("config"),e.markdown(vk());let r=await cI("ANTHROPIC_API_KEY");e.markdown(`Anthropic API key: ${r}`),e.button({command:"multicoder.storeApiKey",title:"Set Anthropic key",arguments:["ANTHROPIC_API_KEY","Anthropic API key"]}),e.markdown(`

`);let n=await cI("OPENAI_API_KEY");e.markdown(`OpenAI API key: ${n}`),e.button({command:"multicoder.storeApiKey",title:"Set OpenAI key",arguments:["OPENAI_API_KEY","OpenAI API key"]})}var fI,dI;async function mk(){var ne,le;let{request:e,ext:t,telemetry:r}=Be,n=e.model.id,s=P_.workspace.getConfiguration("multicoder"),c=s.get("modelProvider");if(n==fI&&c==dI&&Be.model)return;fI=n,dI=c;let h=e.model.family;if(h.startsWith("o1")&&(h="gpt-4o"),Be.id=h,c=="default"&&(c="copilot"),c=="copilot"){Be.model=d0({id:h,provider:"copilot",apiKey:""}),r.logUsage("model",{model:h});return}if(c=="auto"&&(c=(ne=v0.find(we=>we.family==h))==null?void 0:ne.provider,!c))throw new Error("Cannot find model: "+h);let b=dE.find(we=>we.id==c),N=v0.find(we=>we.provider==c&&we.family==h),{envKeyName:k}=b,$=await t.secrets.get(k)||((le=process==null?void 0:process.env)==null?void 0:le[k]);if(!$){await B0();return}Be.model=d0({...N,apiKey:$}),r.logUsage("model",{model:h})}function pI(){let{ext:e,log:t}=Be,r,n=P_.chat.createChatParticipant("multicoder",async(s,c,h,b)=>{try{if(Object.assign(Be,{request:s,chat:c,stream:h,token:b}),await mk(),!Be.model)return;c.history.length||(r==null||r.return(),r=null,qS());let N=s.references.map(({id:ne,name:le})=>le+" "+ne).join(`
`),k=s.toolReferences.map(({name:ne})=>ne).join(`
`);return r?t.info(s.prompt,{event:"chat.next",references:N,toolrefs:k}):(r=await Ww(uI),t.info(s.prompt,{event:"chat.start",references:N,toolrefs:k})),yy[s.command]?(await yy[s.command](),{metadata:{command:s.command}}):{metadata:await r.next(s)}}catch(N){throw t.error(N),Be.model=null,r=null,N}});n.iconPath=P_.Uri.joinPath(e.extensionUri,"resources","multicoder.png"),n.followupProvider={provideFollowups(s){var c;return((c=s.metadata)==null?void 0:c.followups)||[]}}}function hk(e){Be.ext=e,Be.config=vI.workspace.getConfiguration("multicoder"),Be.shared={},FS(),jS(),$S(),GS(),pI()}function _k(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

@microsoft/1ds-core-js/dist/es5/ms.core.js:
  (*!
   * 1DS JS SDK Core, 4.3.4
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.5 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.3
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

@microsoft/1ds-post-js/dist/es5/ms.post.js:
  (*!
   * 1DS JS SDK POST plugin, 4.3.4
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.5 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.3
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.4
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.5 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.4
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.5 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.3
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)
*/
//# sourceMappingURL=extension.js.map
