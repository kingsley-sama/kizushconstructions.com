var RI=Object.create;var bg=Object.defineProperty;var kI=Object.getOwnPropertyDescriptor;var OI=Object.getOwnPropertyNames;var MI=Object.getPrototypeOf,LI=Object.prototype.hasOwnProperty;var kd=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),iS=(e,t)=>{for(var r in t)bg(e,r,{get:t[r],enumerable:!0})},oS=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of OI(t))!LI.call(e,s)&&s!==r&&bg(e,s,{get:()=>t[s],enumerable:!(n=kI(t,s))||n.enumerable});return e};var Cy=(e,t,r)=>(r=e!=null?RI(MI(e)):{},oS(t||!e||!e.__esModule?bg(r,"default",{value:e,enumerable:!0}):r,e)),FI=e=>oS(bg({},"__esModule",{value:!0}),e);var mS=kd((Ck,vS)=>{function sS(e){return Array.isArray(e)?e:[e]}var Ry="",uS=" ",Py="\\",YI=/^\s+$/,$I=/(?:[^\\]|^)\\$/,qI=/^\\!/,BI=/^\\#/,zI=/\r?\n/g,GI=/^\.*\/|^\.+$/,Ay="/",fS="node-ignore";typeof Symbol<"u"&&(fS=Symbol.for("node-ignore"));var cS=fS,VI=(e,t,r)=>Object.defineProperty(e,t,{value:r}),HI=/([0-z])-([0-z])/g,dS=()=>!1,KI=e=>e.replace(HI,(t,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?t:Ry),WI=e=>{let{length:t}=e;return e.slice(0,t-t%2)},JI=[[/^\uFEFF/,()=>Ry],[/((?:\\\\)*?)(\\?\s+)$/,(e,t,r)=>t+(r.indexOf("\\")===0?uS:Ry)],[/(\\+?)\s/g,(e,t)=>{let{length:r}=t;return t.slice(0,r-r%2)+uS}],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,r)=>t+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(e,t,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return t+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>Py],[/\\\\/g,()=>Py],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,t,r,n,s)=>t===Py?`\\[${r}${WI(n)}${s}`:s==="]"&&n.length%2===0?`[${KI(r)}${n}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],lS=Object.create(null),ZI=(e,t)=>{let r=lS[e];return r||(r=JI.reduce((n,[s,u])=>n.replace(s,u.bind(e)),e),lS[e]=r),t?new RegExp(r,"i"):new RegExp(r)},My=e=>typeof e=="string",XI=e=>e&&My(e)&&!YI.test(e)&&!$I.test(e)&&e.indexOf("#")!==0,QI=e=>e.split(zI),ky=class{constructor(t,r,n,s){this.origin=t,this.pattern=r,this.negative=n,this.regex=s}},eN=(e,t)=>{let r=e,n=!1;e.indexOf("!")===0&&(n=!0,e=e.substr(1)),e=e.replace(qI,"!").replace(BI,"#");let s=ZI(e,t);return new ky(r,e,n,s)},tN=(e,t)=>{throw new t(e)},fm=(e,t,r)=>My(e)?e?fm.isNotRelative(e)?r(`path should be a \`path.relative()\`d string, but got "${t}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${t}\``,TypeError),pS=e=>GI.test(e);fm.isNotRelative=pS;fm.convert=e=>e;var Oy=class{constructor({ignorecase:t=!0,ignoreCase:r=t,allowRelativePaths:n=!1}={}){VI(this,cS,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[cS]){this._rules=this._rules.concat(t._rules),this._added=!0;return}if(XI(t)){let r=eN(t,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(t){return this._added=!1,sS(My(t)?QI(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,r){let n=!1,s=!1;return this._rules.forEach(u=>{let{negative:h}=u;if(s===h&&n!==s||h&&!n&&!s&&!r)return;u.regex.test(t)&&(n=!h,s=h)}),{ignored:n,unignored:s}}_test(t,r,n,s){let u=t&&fm.convert(t);return fm(u,t,this._allowRelativePaths?dS:tN),this._t(u,r,n,s)}_t(t,r,n,s){if(t in r)return r[t];if(s||(s=t.split(Ay)),s.pop(),!s.length)return r[t]=this._testOne(t,n);let u=this._t(s.join(Ay)+Ay,r,n,s);return r[t]=u.ignored?u:this._testOne(t,n)}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return sS(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}},Eg=e=>new Oy(e),rN=e=>fm(e&&fm.convert(e),e,dS);Eg.isPathValid=rN;Eg.default=Eg;vS.exports=Eg;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let e=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");fm.convert=e;let t=/^[a-z]:\//i;fm.isNotRelative=r=>t.test(r)||pS(r)}});var bS=kd((Cg,SS)=>{(function(e,t){typeof Cg=="object"&&typeof SS<"u"?t(Cg):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.oneDS=e.oneDS||{}))})(Cg,function(e){"use strict";var t="function",r="object",n="undefined",s="prototype",u=Object,h=u[s];function b(a,c){return a||c}function N(a,c){return a[c]}var A=void 0,U=null,V="",Q="function",pe="object",de="prototype",ue="__proto__",ne="undefined",ye="constructor",Ae="Symbol",tt="_polyfill",Ke="length",ct="name",Qe="call",Nt="toString",kt=b(Object),yr=N(kt,de),Sr=b(String),zr=N(Sr,de),po=b(Math),Yi=b(Array),Kr=N(Yi,de),Cn=N(Kr,"slice");function nt(a,c){try{return{v:a.apply(this,c)}}catch(p){return{e:p}}}function vo(a,c){var p=nt(a);return p.e?c:p.v}var Ve;function Tr(a){return function(c){return typeof c===a}}function Bn(a){var c="[object "+a+"]";return function(p){return!!(p&&Ot(p)===c)}}function Ot(a){return yr[Nt].call(a)}function Lt(a,c){return typeof a===c}function rt(a){return typeof a===ne||a===ne}function gn(a){return!Ht(a)}function at(a){return a===U||rt(a)}function Nc(a){return a===U||!Ht(a)}function Ht(a){return!!a||a!==A}function $i(a){return!Ve&&(Ve=["string","number","boolean",ne,"symbol","bigint"]),a!==pe&&Ve.indexOf(a)!==-1}var zt=Tr("string"),Qt=Tr(Q);function Ur(a){return!a&&at(a)?!1:!!a&&typeof a===pe}var $t=N(Yi,"isArray"),nn=Bn("Date"),Ue=Tr("number"),Kn=Tr("boolean"),Dt=Bn("Error");function br(a){return!!(a&&a.then&&Qt(a.then))}function ei(a){return!a||!qi(a)}function qi(a){return!(!a||vo(function(){return!(a&&0+a)},!a))}var Gr=N(kt,"getOwnPropertyDescriptor");function yn(a,c){return!!a&&yr.hasOwnProperty[Qe](a,c)}var Bi=b(N(kt,"hasOwn"),ga);function ga(a,c){return yn(a,c)||!!Gr(a,c)}function xr(a,c,p){if(a&&Ur(a)){for(var g in a)if(Bi(a,g)&&c[Qe](p||a,g,a[g])===-1)break}}var rr={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function fr(a){var c={};if(c[rr.c]=!0,c[rr.e]=!0,a.l){c.get=function(){return a.l.v};var p=Gr(a.l,"v");p&&p.set&&(c.set=function(g){a.l.v=g})}return xr(a,function(g,E){c[rr[g]]=gn(E)?c[rr[g]]:E}),c}var jr=N(kt,"defineProperty");function jf(a,c,p,g,E,C){var R={e:C,c:E};return p&&(R.g=p),g&&(R.s=g),jr(a,c,fr(R))}function Sn(a,c,p){return jr(a,c,fr(p))}function bl(a,c,p,g,E){var C={};return xr(a,function(R,x){Dc(C,R,c?x:R,E),Dc(C,x,p?x:R,E)}),g?g(C):C}function Dc(a,c,p,g){jr(a,c,{value:p,enumerable:!0,writable:!!g})}var bn=b(Sr),qa="[object Error]";function or(a,c){var p=V,g=yr[Nt][Qe](a);g===qa&&(a={stack:bn(a.stack),message:bn(a.message),name:bn(a.name)});try{p=JSON.stringify(a,U,c?typeof c=="number"?c:4:A),p=(p?p.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):U)||bn(a)}catch(E){p=" - "+or(E,c)}return g+": "+p}function xn(a){throw new Error(a)}function zn(a){throw new TypeError(a)}var mo=N(kt,"freeze");function ws(a){return a}function Cc(a){return a[ue]||U}var El=N(kt,"assign"),ho=N(kt,"keys");function $o(a){return mo&&xr(a,function(c,p){($t(p)||Ur(p))&&$o(p)}),kn(a)}var kn=b(mo,ws),_o=b(N(kt,"seal"),ws),Ts=b(N(kt,"getPrototypeOf"),Cc);function ya(a){return bl(a,1,0,kn)}function Uu(a){return bl(a,0,0,kn)}var Is=Uu({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Nr="__tsUtils$gblCfg",Or;function ti(){var a;return typeof globalThis!==ne&&(a=globalThis),!a&&typeof self!==ne&&(a=self),!a&&typeof window!==ne&&(a=window),!a&&typeof global!==ne&&(a=global),a}function zi(){if(!Or){var a=nt(ti).v||{};Or=a[Nr]=a[Nr]||{}}return Or}var dn=ri;function ri(a,c,p){var g=c?c[a]:U;return function(E){var C=(E?E[a]:U)||g;if(C||p){var R=arguments;return(C||p).apply(E,C?Cn[Qe](R,1):R)}zn('"'+bn(a)+'" not defined for '+or(E))}}function ni(a){return function(c){return c[a]}}var Ns=N(po,"max"),Fd=dn("slice",zr),an=dn("substring",zr),go=ri("substr",zr,qo);function qo(a,c,p){return at(a)&&zn("Invalid "+or(a)),p<0?V:(c=c||0,c<0&&(c=Ns(c+a[Ke],0)),rt(p)?Fd(a,c):Fd(a,c,c+p))}function On(a,c){return an(a,0,c)}var Bo="_urid",ou;function Ba(){if(!ou){var a=zi();ou=a.gblSym=a.gblSym||{k:{},s:{}}}return ou}var on;function Mn(a){var c={description:bn(a),toString:function(){return Ae+"("+a+")"}};return c[tt]=!0,c}function ju(a){var c=Ba();if(!Bi(c.k,a)){var p=Mn(a),g=ho(c.s).length;p[Bo]=function(){return g+"_"+p[Nt]()},c.k[a]=p,c.s[p[Bo]()]=bn(a)}return c.k[a]}function ai(a){!on&&(on={});var c,p=Is[a];return p&&(c=on[p]=on[p]||Mn(Ae+"."+p)),c}var Ir;function sa(){Ir=zi()}function Yf(a){var c={};return!Ir&&sa(),c.b=Ir.lzy,jr(c,"v",{configurable:!0,get:function(){var p=a();return Ir.lzy||jr(c,"v",{value:p}),c.b=Ir.lzy,p}}),c}function Sa(a){return jr({toJSON:function(){return a}},"v",{value:a})}var zo="window",xc;function Go(a,c){var p;return function(){return!Ir&&sa(),(!p||Ir.lzy)&&(p=Sa(nt(a,c).v)),p.v}}function $f(a){return!Ir&&sa(),(!xc||a===!1||Ir.lzy)&&(xc=Sa(nt(ti).v||U)),xc.v}function Qr(a,c){var p;if(!xc||c===!1?p=$f(c):p=xc.v,p&&p[a])return p[a];if(a===zo)try{return window}catch{}return U}function wl(){return!!za()}var za=Go(Qr,["document"]);function Ud(){return!!ii()}var ii=Go(Qr,[zo]);function Up(){return!!oi()}var oi=Go(Qr,["navigator"]);function Tl(){return!!Gi()}var Gi=Go(Qr,["history"]),qf=Go(function(){return!!nt(function(){return process&&(process.versions||{}).node}).v}),vr,Vo;function Bf(){return vr=Sa(nt(Qr,[Ae]).v),vr}function Ga(a){var c=(Ir.lzy?0:vr)||Bf();return c.v?c.v[a]:A}function Pc(){return!!xt()}function xt(){return!Ir&&sa(),((Ir.lzy?0:vr)||Bf()).v}function si(a,c){var p=Is[a];!Ir&&sa();var g=(Ir.lzy?0:vr)||Bf();return g.v?g.v[p||a]:c?A:ai(a)}function Yu(a,c){!Ir&&sa();var p=(Ir.lzy?0:vr)||Bf();return p.v?p.v(a):c?U:Mn(a)}function Il(a){return!Ir&&sa(),Vo=(Ir.lzy?0:Vo)||Sa(nt(Ga,["for"]).v),(Vo.v||ju)(a)}function kv(a){return!!a&&Qt(a.next)}function Ei(a){return!Nc(a)&&Qt(a[si(3)])}var Nl;function jd(a,c,p){if(a&&(kv(a)||(!Nl&&(Nl=Sa(si(3))),a=a[Nl.v]?a[Nl.v]():U),kv(a))){var g=A,E=A;try{for(var C=0;!(E=a.next()).done&&c[Qe](p||a,E.value,C,a)!==-1;)C++}catch(R){g={e:R},a.throw&&(E=U,a.throw(g))}finally{try{E&&!E.done&&a.return&&a.return(E)}finally{if(g)throw g.e}}}}function su(a,c,p){return a.apply(c,p)}function wi(a,c){return!rt(c)&&a&&($t(c)?su(a.push,a,c):kv(c)||Ei(c)?jd(c,function(p){a.push(p)}):a.push(c)),a}function dt(a,c,p){if(a)for(var g=a[Ke]>>>0,E=0;E<g&&!(E in a&&c[Qe](p||a,a[E],E,a)===-1);E++);}var ua=dn("indexOf",Kr),uu=dn("map",Kr);function Ds(a,c,p){return((a?a.slice:U)||Cn).apply(a,Cn[Qe](arguments,1))}function Yd(a,c,p){return ua(a,c,p)!==-1}var $d=ri("includes",Kr,Yd),Wn=dn("reduce",Kr),ui=b(N(kt,"create"),qd);function qd(a){if(!a)return{};var c=typeof a;c!==pe&&c!==Q&&zn("Prototype must be an Object or function: "+or(a));function p(){}return p[de]=a,new p}var Ti;function Va(a,c){var p=kt.setPrototypeOf||function(g,E){var C;!Ti&&(Ti=Sa((C={},C[ue]=[],C instanceof Array))),Ti.v?g[ue]=E:xr(E,function(R,x){return g[R]=x})};return p(a,c)}function Im(a,c,p){nt(Sn,[c,ct,{v:a,c:!0,e:!1}]),c=Va(c,p);function g(){this[ye]=c,nt(Sn,[this,ct,{v:a,c:!0,e:!1}])}return c[de]=p===U?ui(p):(g[de]=p[de],new g),c}function Ov(a,c){c&&(a[ct]=c)}function jp(a,c,p){var g=p||Error,E=g[de][ct],C=Error.captureStackTrace;return Im(a,function(){var R=this,x=arguments;try{nt(Ov,[g,a]);var M=su(g,R,Cn[Qe](x))||R;if(M!==R){var j=Ts(R);j!==Ts(M)&&Va(M,j)}return C&&C(M,R[ye]),c&&c(M,x),M}finally{nt(Ov,[g,E])}},g)}function cu(){return(Date.now||Yp)()}function Yp(){return new Date().getTime()}function sh(a){return function(p){return at(p)&&zn("strTrim called ["+or(p)+"]"),p&&p.replace&&(p=p.replace(a,V)),p}}var Bd=sh(/^\s+|(?=\s)\s+$/g),xa=ri("trim",zr,Bd),Dl,Cl,Vi;function ci(a){if(!a||typeof a!==pe)return!1;Vi||(Vi=Ud()?ii():!0);var c=!1;if(a!==Vi){Cl||(Dl=Function[de][Nt],Cl=Dl[Qe](kt));try{var p=Ts(a);c=!p,c||(yn(p,ye)&&(p=p[ye]),c=!!(p&&typeof p===Q&&Dl[Qe](p)===Cl))}catch{}}return c}function lu(a){return a.value&&Bp(a),!0}var $p=[zf,Bp,qp,Gd];function Ii(a,c,p,g){var E;return dt(a,function(C){if(C.k===c)return E=C,-1}),E||(E={k:c,v:c},a.push(E),g(E)),E.v}function zd(a,c,p,g){var E=p.handler,C=p.path?g?p.path.concat(g):p.path:[],R={handler:p.handler,src:p.src,path:C},x=typeof c,M=!1,j=c===U;j||(c&&x===pe?M=ci(c):j=$i(x));var z={type:x,isPrim:j,isPlain:M,value:c,result:c,path:C,origin:p.src,copy:function(G,K){return zd(a,G,K?R:p,K)},copyTo:function(G,K){return $u(a,G,K,R)}};return z.isPrim?E&&E[Qe](p,z)?z.result:c:Ii(a,c,C,function(G){Sn(z,"result",{g:function(){return G.v},s:function(Z){G.v=Z}});for(var K=0,ee=E;!(ee||(K<$p.length?$p[K++]:lu))[Qe](p,z);)ee=U})}function $u(a,c,p,g){if(!at(p))for(var E in p)c[E]=zd(a,p[E],g,E);return c}function Ac(a,c,p){var g={handler:p,src:c,path:[]};return $u([],a,c,g)}function xl(a,c){var p={handler:c,src:a};return zd([],a,p)}function zf(a){var c=a.value;if($t(c)){var p=a.result=[];return p.length=c.length,a.copyTo(p,c),!0}return!1}function Gd(a){var c=a.value;return nn(c)?(a.result=new Date(c.getTime()),!0):!1}function qp(a){return a.type===Q}function Bp(a){var c=a.value;if(c&&a.isPlain){var p=a.result={};return a.copyTo(p,c),!0}return!1}function fu(a,c){return dt(c,function(p){Ac(a,p)}),a}function Vd(a,c,p,g,E,C,R){return fu(xl(a)||{},Cn[Qe](arguments))}var Cs=ni(Ke),qu;function Ni(){return!Ir&&sa(),(!qu||Ir.lzy)&&(qu=Sa(nt(Qr,["performance"]).v)),qu.v}function Pl(){var a=Ni();return a&&a.now?a.now():cu()}var Gf=ri("endsWith",zr,Rc);function Rc(a,c,p){zt(a)||zn("'"+or(a)+"' is not a string");var g=zt(c)?c:bn(c),E=!rt(p)&&p<a[Ke]?p:a[Ke];return an(a,E-g[Ke],E)===g}var Hi=dn("indexOf",zr),Mv=ri("startsWith",zr,Ho);function Ho(a,c,p){zt(a)||zn("'"+or(a)+"' is not a string");var g=zt(c)?c:bn(c),E=p>0?p:0;return an(a,E,E+g[Ke])===g}var yo="ref",Ki="unref",du="hasRef",Vf="enabled";function kc(a,c,p){var g=!0,E=a?c(U):U,C;function R(){return g=!1,E&&E[Ki]&&E[Ki](),C}function x(){E&&p(E),E=U}function M(){return E=c(E),g||R(),C}function j(z){!z&&E&&x(),z&&!E&&M()}return C={cancel:x,refresh:M},C[du]=function(){return E&&E[du]?E[du]():g},C[yo]=function(){return g=!0,E&&E[yo]&&E[yo](),C},C[Ki]=R,C=jr(C,Vf,{get:function(){return!!E},set:j}),{h:C,dn:function(){E=U}}}function Oc(a,c,p){var g=$t(c),E=g?c.length:0,C=(E>0?c[0]:g?A:c)||setTimeout,R=(E>1?c[1]:A)||clearTimeout,x=p[0];p[0]=function(){M.dn(),su(x,A,Cn[Qe](arguments))};var M=kc(a,function(j){if(j){if(j.refresh)return j.refresh(),j;su(R,A,[j])}return su(C,A,p)},function(j){su(R,A,[j])});return M.h}function Bu(a,c){return Oc(!0,A,Cn[Qe](arguments))}function Hf(a,c){return Oc(!1,A,Cn[Qe](arguments))}($f()||{}).Symbol,($f()||{}).Reflect;var Al="hasOwnProperty",Kf=function(a,c){return Kf=u.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var E in g)g[Al](E)&&(p[E]=g[E])},Kf(a,c)};function zu(a,c){typeof c!==t&&c!==null&&zn("Class extends value "+String(c)+" is not a constructor or null"),Kf(a,c);function p(){this.constructor=a}a[s]=c===null?ui(c):(p[s]=c[s],new p)}function Wi(a,c){for(var p=0,g=c.length,E=a.length;p<g;p++,E++)a[E]=c[p];return a}var Mc,So="constructor",li="prototype",Ko="function",Vr="_dynInstFuncs",xs="_isDynProxy",Ji="_dynClass",Lc="_dynCls$",Fc="_dynInstChk",Wo=Fc,Rl="_dfOpts",Jo="_unknown_",pu="__proto__",Ha="_dyn"+pu,Hd="__dynProto$Gbl",Gu="_dynInstProto",Pa="useBaseInst",Wf="setInstFuncs",Kd=Object,kl=Kd.getPrototypeOf,Ol=Kd.getOwnPropertyNames,Wd=$f(),Lv=Wd[Hd]||(Wd[Hd]={o:(Mc={},Mc[Wf]=!0,Mc[Pa]=!0,Mc),n:1e3});function Vu(a){return a&&(a===Kd[li]||a===Array[li])}function bo(a){return Vu(a)||a===Function[li]}function Zi(a){var c;if(a){if(kl)return kl(a);var p=a[pu]||a[li]||(a[So]?a[So][li]:null);c=a[Ha]||p,yn(a,Ha)||(delete a[Gu],c=a[Ha]=a[Gu]||a[Ha],a[Gu]=p)}return c}function pn(a,c){var p=[];if(Ol)p=Ol(a);else for(var g in a)typeof g=="string"&&yn(a,g)&&p.push(g);if(p&&p.length>0)for(var E=0;E<p.length;E++)c(p[E])}function Ml(a,c,p){return c!==So&&typeof a[c]===Ko&&(p||yn(a,c))&&c!==pu&&c!==li}function Hu(a){zn("DynamicProto: "+a)}function Ku(a){var c=ui(null);return pn(a,function(p){!c[p]&&Ml(a,p,!1)&&(c[p]=a[p])}),c}function Jd(a,c){for(var p=a.length-1;p>=0;p--)if(a[p]===c)return!0;return!1}function Di(a,c,p,g){function E(M,j,z){var G=j[z];if(G[xs]&&g){var K=M[Vr]||{};K[Wo]!==!1&&(G=(K[j[Ji]]||{})[z]||G)}return function(){return G.apply(M,arguments)}}var C=ui(null);pn(p,function(M){C[M]=E(c,p,M)});for(var R=Zi(a),x=[];R&&!bo(R)&&!Jd(x,R);)pn(R,function(M){!C[M]&&Ml(R,M,!kl)&&(C[M]=E(c,R,M))}),x.push(R),R=Zi(R);return C}function vu(a,c,p,g){var E=null;if(a&&yn(p,Ji)){var C=a[Vr]||ui(null);if(E=(C[p[Ji]]||ui(null))[c],E||Hu("Missing ["+c+"] "+Ko),!E[Fc]&&C[Wo]!==!1){for(var R=!yn(a,c),x=Zi(a),M=[];R&&x&&!bo(x)&&!Jd(M,x);){var j=x[c];if(j){R=j===g;break}M.push(x),x=Zi(x)}try{R&&(a[c]=E),E[Fc]=1}catch{C[Wo]=!1}}}return E}function Ps(a,c,p){var g=c[a];return g===p&&(g=Zi(c)[a]),typeof g!==Ko&&Hu("["+a+"] is not a "+Ko),g}function sr(a,c,p,g,E){function C(M,j){var z=function(){var G=vu(this,j,M,z)||Ps(j,M,z);return G.apply(this,arguments)};return z[xs]=1,z}if(!Vu(a)){var R=p[Vr]=p[Vr]||ui(null);if(!Vu(R)){var x=R[c]=R[c]||ui(null);R[Wo]!==!1&&(R[Wo]=!!E),Vu(x)||pn(p,function(M){Ml(p,M,!1)&&p[M]!==g[M]&&(x[M]=p[M],delete p[M],(!yn(a,M)||a[M]&&!a[M][xs])&&(a[M]=C(a,M)))})}}}function Eo(a,c){if(kl){for(var p=[],g=Zi(c);g&&!bo(g)&&!Jd(p,g);){if(g===a)return!0;p.push(g),g=Zi(g)}return!1}return!0}function Zo(a,c){return yn(a,li)?a.name||c||Jo:((a||{})[So]||{}).name||c||Jo}function Ci(a,c,p,g){yn(a,li)||Hu("theClass is an invalid class definition.");var E=a[li];Eo(E,c)||Hu("["+Zo(a)+"] not in hierarchy of ["+Zo(c)+"]");var C=null;yn(E,Ji)?C=E[Ji]:(C=Lc+Zo(a,"_")+"$"+Lv.n,Lv.n++,E[Ji]=C);var R=Ci[Rl],x=!!R[Pa];x&&g&&g[Pa]!==void 0&&(x=!!g[Pa]);var M=Ku(c),j=Di(E,c,M,x);p(c,j);var z=!!kl&&!!R[Wf];z&&g&&(z=!!g[Wf]),sr(E,C,c,M,z!==!1)}Ci[Rl]=Lv.o;var Jf=100,xi=ya,mu=xi({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),sn=xi({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),Ka="toLowerCase",Mr="blkVal",pt="length",Wu="rdOnly",wo="notify",As="warnToConsole",Xi="throwInternal",hu="setDf",Pi="watch",Yr="logger",To="apply",Lr="push",Io="splice",Zf="hdlr",No="cancel",Pn="initialize",Qi="identifier",Xo="removeNotificationListener",ba="addNotificationListener",Aa="isInitialized",Uc="instrumentationKey",Ju="INACTIVE",Xf="value",Rs="getNotifyMgr",Do="getPlugin",Co="name",Zu="iKey",xo="time",Ln="processNext",Qf="getProcessTelContext",Xu="pollInternalLogs",ks="enabled",fi="stopPollingInternalLogs",Qo="unload",Os="onComplete",Ai="version",jc="loggingLevelConsole",_u="createNew",ca="teardown",gu="messageId",Ms="message",Ri="isAsync",Qu="diagLog",un="_doTeardown",Jn="update",ki="getNext",ec="setNextPlugin",es="protocol",Zd="userAgent",di="split",Yc="nodeType",Ea="replace",ed="logInternalMessage",Wa="type",ts="handler",rs="status",Xd="getResponseHeader",Ll="getAllResponseHeaders",td="isChildEvt",Fl="data",Po="getCtx",Ja="setCtx",$c="complete",Fv="itemsReceived",tc="urlString",rc="sendPOST",ns="headers",Ul="timeout",Nm="setRequestHeader",Qd="traceId",jl="spanId",nc="traceFlags",zp;function Uv(a,c){zp||(zp=jp("AggregationError",function(g,E){E[pt]>1&&(g.errors=E[1])}));var p=a||"One or more errors occurred.";throw dt(c,function(g,E){p+=`
`.concat(E," > ").concat(or(g))}),new zp(p,c||[])}var ac="Promise",jv="rejected";function Yl(a,c){return ep(a,function(p){return c?c({status:"fulfilled",rejected:!1,value:p}):p},function(p){return c?c({status:jv,rejected:!0,reason:p}):p})}function ep(a,c,p,g){var E=a;try{if(br(a))(c||p)&&(E=a.then(c,p));else try{c&&(E=c(a))}catch(C){if(p)E=p(C);else throw C}}finally{g&&eo(E,g)}return E}function eo(a,c){var p=a;return c&&(br(a)?a.finally?p=a.finally(c):p=a.then(function(g){return c(),g},function(g){throw c(),g}):c()),p}var Gp=["pending","resolving","resolved",jv],Dm="dispatchEvent",rd;function Vp(a){var c;return a&&a.createEvent&&(c=a.createEvent("Event")),!!c&&c.initEvent}function tp(a,c,p,g){var E=za();!rd&&(rd=Sa(!!nt(Vp,[E]).v));var C=rd.v?E.createEvent("Event"):g?new Event(c):{};if(p&&p(C),rd.v&&C.initEvent(c,!1,!0),C&&a[Dm])a[Dm](C);else{var R=a["on"+c];if(R)R(C);else{var x=Qr("console");x&&(x.error||x.log)(c,or(C))}}}var qc="unhandledRejection",nd=qc.toLowerCase(),ic=10,Ls;function Bc(a){return Qt(a)?a.toString():or(a)}function Yv(a,c,p){var g=Ds(arguments,3),E=0,C=!1,R,x=[],M=!1,j=null,z;function G(Xe,er){try{M=!0,j&&j.cancel(),j=null;var ir=a(function(Un,ln){x.push(function(){try{var jn=E===2?Xe:er,ji=rt(jn)?R:Qt(jn)?jn(R):jn;br(ji)?ji.then(Un,ln):jn?Un(ji):E===3?ln(ji):Un(ji)}catch(Si){ln(Si)}}),C&&he()},g);return ir}finally{}}function K(Xe){return G(void 0,Xe)}function ee(Xe){var er=Xe,ir=Xe;return Qt(Xe)&&(er=function(Un){return Xe&&Xe(),Un},ir=function(Un){throw Xe&&Xe(),Un}),G(er,ir)}function Z(){return Gp[E]}function he(){if(x.length>0){var Xe=x.slice();x=[],M=!0,j&&j.cancel(),j=null,c(Xe)}}function ge(Xe,er){return function(ir){if(E===er){if(Xe===2&&br(ir)){E=1,ir.then(ge(2,1),ge(3,1));return}E=Xe,C=!0,R=ir,he(),!M&&Xe===3&&!j&&(j=Bu(Le,ic))}}}function Le(){if(!M)if(M=!0,qf())process.emit(qc,R,z);else{var Xe=ii()||$f();!Ls&&(Ls=Sa(nt(Qr,[ac+"RejectionEvent"]).v)),tp(Xe,nd,function(er){return Sn(er,"promise",{g:function(){return z}}),er.reason=R,er},!!Ls.v)}}z={then:G,catch:K,finally:ee},jr(z,"state",{get:Z}),Pc()&&(z[si(11)]="IPromise");function Be(){return"IPromise "+Z()+(C?" - "+Bc(R):"")}return z.toString=Be,function(){Qt(p)||zn(ac+": executor is not a function - "+Bc(p));var er=ge(3,0);try{p.call(z,ge(2,0),er)}catch(ir){er(ir)}}(),z}function rp(a){return function(c){var p=Ds(arguments,1);return a(function(g,E){try{var C=[],R=1;jd(c,function(x,M){x&&(R++,ep(x,function(j){C[M]=j,--R===0&&g(C)},E))}),R--,R===0&&g(C)}catch(x){E(x)}},p)}}function zc(a){return Sa(function(c){var p=Ds(arguments,1);return a(function(g,E){var C=[],R=1;function x(M,j){R++,Yl(M,function(z){z.rejected?C[j]={status:jv,reason:z.reason}:C[j]={status:"fulfilled",value:z.value},--R===0&&g(C)})}try{$t(c)?dt(c,x):Ei(c)?jd(c,x):zn("Input is not an iterable"),R--,R===0&&g(C)}catch(M){E(M)}},p)})}function np(a){dt(a,function(c){try{c()}catch{}})}function Fs(a){var c=Ue(a)?a:0;return function(p){Bu(function(){np(p)},c)}}function $r(a,c){return Yv($r,Fs(c),a,c)}var oc;function la(a,c){!oc&&(oc=Sa(nt(Qr,[ac]).v||null));var p=oc.v;if(!p)return $r(a);Qt(a)||zn(ac+": executor is not a function - "+or(a));var g=0;function E(){return Gp[g]}var C=new p(function(R,x){function M(z){g=2,R(z)}function j(z){g=3,x(z)}a(M,j)});return jr(C,"state",{get:E}),C}var ap;function ad(a){return Yv(ad,np,a)}function Gc(a,c){return!ap&&(ap=zc(ad)),ap.v(a,c)}var sc;function Za(a,c){return!sc&&(sc=Sa(la)),sc.v.call(this,a,c)}var id=rp(Za),Zn=void 0,dr="",Us="channels",mn="core",as="createPerfMgr",uc="disabled",cc="extensionConfig",js="extensions",to="processTelemetry",$l="priority",Hp="eventsSent",ql="eventsDiscarded",Kp="eventsSendRequest",Bl="perfEvent",Vc="offlineEventsStored",ip="offlineBatchSent",Gn="offlineBatchDrop",Hc="getPerfMgr",fa="domain",yu="path",op="Not dynamic - ",od=/-([a-z])/g,da=/([^\w\d_$])/g,sd=/^(\d+[\w\d_$])/;function sp(a){return!at(a)}function Ys(a){var c=a;return c&&zt(c)&&(c=c[Ea](od,function(p,g){return g.toUpperCase()}),c=c[Ea](da,"_"),c=c[Ea](sd,function(p,g){return"_"+g})),c}function bt(a,c){return a&&c?Hi(a,c)!==-1:!1}function is(a){return a&&a.toISOString()||""}function os(a){return Dt(a)?a[Co]:dr}function pi(a,c,p,g,E){var C=p;return a&&(C=a[c],C!==p&&(!E||E(C))&&(!g||g(p))&&(C=p,a[c]=C)),C}function zl(a,c,p){var g;return a?(g=a[c],!g&&at(g)&&(g=rt(p)?{}:p,a[c]=g)):g=rt(p)?{}:p,g}function Kc(a,c){var p=null,g=null;return Qt(a)?p=a:g=a,function(){var E=arguments;if(p&&(g=p()),g)return g[c][To](g,E)}}function ss(a,c,p){if(a&&c&&Ur(a)&&Ur(c)){var g=function(C){if(zt(C)){var R=c[C];Qt(R)?(!p||p(C,!0,c,a))&&(a[C]=Kc(c,C)):(!p||p(C,!1,c,a))&&(Bi(a,C)&&delete a[C],Sn(a,C,{g:function(){return c[C]},s:function(x){c[C]=x}}))}};for(var E in c)g(E)}return a}function Oi(a,c,p,g,E){a&&c&&p&&(E!==!1||rt(a[c]))&&(a[c]=Kc(p,g))}function Wc(a,c,p,g){return a&&c&&Ur(a)&&$t(p)&&dt(p,function(E){zt(E)&&Oi(a,E,c,E,g)}),a}function ud(a){return a&&El&&(a=u(El({},a))),a}function $s(a){try{return a.responseText}catch{}return null}function Gl(a,c){return a?"XDomainRequest,Response:"+$s(a)||"":c}function Jc(a,c){return a?"XMLHttpRequest,Status:"+a[rs]+",Response:"+$s(a)||a.response||"":c}function Vl(a,c){return c&&(Ue(c)?a=[c].concat(a):$t(c)&&(a=c.concat(a))),a}var up="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",cp="withCredentials",Wp="timeout";function Cm(a,c,p,g,E,C){g===void 0&&(g=!1),E===void 0&&(E=!1);function R(M,j,z){try{M[j]=z}catch{}}var x=new XMLHttpRequest;return g&&R(x,up,g),p&&R(x,cp,p),x.open(a,c,!E),p&&R(x,cp,p),!E&&C&&R(x,Wp,C),x}function us(a){var c={};if(zt(a)){var p=xa(a)[di](/[\r\n]+/);dt(p,function(g){if(g){var E=g.indexOf(": ");if(E!==-1){var C=xa(g.substring(0,E))[Ka](),R=xa(g.substring(E+1));c[C]=R}else c[xa(g)]=1}})}return c}function qs(a,c,p){if(!a[p]&&c&&c[Xd]){var g=c[Xd](p);g&&(a[p]=xa(g))}return a}var cs="kill-duration",Mi="kill-duration-seconds",Bs="time-delta-millis";function Su(a,c){var p={};return a[Ll]?p=us(a[Ll]()):c&&(p=qs(p,a,Bs),p=qs(p,a,cs),p=qs(p,a,Mi)),p}var vi="documentMode",Zc="location",$v="console",lc="JSON",Jp="crypto",Hl="msCrypto",Xc="ReactNative",Kl="msie",zs="trident/",Li="XMLHttpRequest",Qc=null,Wl=null,cd=!1,pa=null,Gs=null;function va(a,c){var p=!1;if(a){try{if(p=c in a,!p){var g=a[s];g&&(p=c in g)}}catch{}if(!p)try{var E=new a;p=!rt(E[c])}catch{}}return p}function ld(a){cd=a}function bu(a){if(a&&cd){var c=Qr("__mockLocation");if(c)return c}return typeof location===r&&location?location:Qr(Zc)}function fd(){return typeof console!==n?console:Qr($v)}function Ra(){return!!(typeof JSON===r&&JSON||Qr(lc)!==null)}function ma(){return Ra()?JSON||Qr(lc):null}function Zp(){return Qr(Jp)}function Jl(){return Qr(Hl)}function Zl(){var a=oi();return a&&a.product?a.product===Xc:!1}function Eu(){var a=oi();if(a&&(a[Zd]!==Wl||Qc===null)){Wl=a[Zd];var c=(Wl||dr)[Ka]();Qc=bt(c,Kl)||bt(c,zs)}return Qc}function qv(a){if(a===void 0&&(a=null),!a){var c=oi()||{};a=c?(c.userAgent||dr)[Ka]():dr}var p=(a||dr)[Ka]();if(bt(p,Kl)){var g=za()||{};return Math.max(parseInt(p[di](Kl)[1]),g[vi]||0)}else if(bt(p,zs)){var E=parseInt(p[di](zs)[1]);if(E)return E+4}return null}function Bv(a){return(Gs===null||a===!1)&&(Gs=Up()&&!!oi().sendBeacon),Gs}function Xl(a){var c=!1;try{c=!!Qr("fetch");var p=Qr("Request");c&&a&&p&&(c=va(p,"keepalive"))}catch{}return c}function Xp(){return pa===null&&(pa=typeof XDomainRequest!==n,pa&&Ql()&&(pa=pa&&!va(Qr(Li),"withCredentials"))),pa}function Ql(){var a=!1;try{var c=Qr(Li);a=!!c}catch{}return a}function Qp(a,c){if(a)for(var p=0;p<a[pt];p++){var g=a[p];if(g[Co]&&g[Co]===c)return g}return{}}function zv(a){var c=za();return c&&a?Qp(c.querySelectorAll("meta"),a).content:null}function ef(a){var c,p=Ni();if(p){var g=p.getEntriesByType("navigation")||[];c=Qp((g[pt]>0?g[0]:{}).serverTiming,a).description}return c}var Gv=4294967296,wu=4294967295,el=123456789,lp=987654321,ls=!1,dd=el,tf=lp;function Ao(a){a<0&&(a>>>=0),dd=el+a&wu,tf=lp-a&wu,ls=!0}function tl(){try{var a=cu()&2147483647;Ao((Math.random()*Gv^a)+a)}catch{}}function Vv(a){return a>0?Math.floor(rl()/wu*(a+1))>>>0:0}function rl(a){var c=0,p=Zp()||Jl();return p&&p.getRandomValues&&(c=p.getRandomValues(new Uint32Array(1))[0]&wu),c===0&&Eu()&&(ls||tl(),c=xm()&wu),c===0&&(c=Math.floor(Gv*Math.random()|0)),a||(c>>>=0),c}function xm(a){tf=36969*(tf&65535)+(tf>>16)&wu,dd=18e3*(dd&65535)+(dd>>16)&wu;var c=(tf<<16)+(dd&65535)>>>0&wu|0;return a||(c>>>=0),c}function rf(a){a===void 0&&(a=22);for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=rl()>>>0,g=0,E=dr;E[pt]<a;)g++,E+=c.charAt(p&63),p>>>=6,g===5&&(p=(rl()<<2&4294967295|p&3)>>>0,g=0);return E}var Hv="3.3.4",ev="."+rf(6),Tu=0;function Iu(a){return a[Yc]===1||a[Yc]===9||!+a[Yc]}function nl(a,c){var p=c[a.id];if(!p){p={};try{Iu(c)&&Sn(c,a.id,{e:!1,v:p})}catch{}}return p}function fs(a,c){return c===void 0&&(c=!1),Ys(a+Tu+++(c?"."+Hv:dr)+ev)}function Vs(a){var c={id:fs("_aiData-"+(a||dr)+"."+Hv),accept:function(p){return Iu(p)},get:function(p,g,E,C){var R=p[c.id];return R?R[Ys(g)]:(C&&(R=nl(c,p),R[Ys(g)]=E),E)},kill:function(p,g){if(p&&p[g])try{delete p[g]}catch{}}};return c}function nf(a){return a&&Ur(a)&&(a.isVal||a.fb||Bi(a,"v")||Bi(a,"mrg")||Bi(a,"ref")||a.set)}function pd(a,c,p){var g,E=p.dfVal||Ht;if(c&&p.fb){var C=p.fb;$t(C)||(C=[C]);for(var R=0;R<C[pt];R++){var x=C[R],M=c[x];if(E(M)?g=M:a&&(M=a.cfg[x],E(M)&&(g=M),a.set(a.cfg,bn(x),M)),E(g))break}}return!E(g)&&E(p.v)&&(g=p.v),g}function vd(a,c,p){var g=p;if(p&&nf(p)&&(g=pd(a,c,p)),g){nf(g)&&(g=vd(a,c,g));var E;$t(g)?(E=[],E[pt]=g[pt]):ci(g)&&(E={}),E&&(xr(g,function(C,R){R&&nf(R)&&(R=vd(a,c,R)),E[C]=R}),g=E)}return g}function af(a,c,p,g){var E,C,R,x=g,M,j,z,G;nf(x)?(E=x.isVal,C=x.set,z=x[Wu],G=x[Mr],M=x.mrg,j=x.ref,!j&&rt(j)&&(j=!!M),R=pd(a,c,x)):R=g,G&&a[Mr](c,p);var K,ee=!0,Z=c[p];(Z||!at(Z))&&(K=Z,ee=!1,E&&K!==R&&!E(K)&&(K=R,ee=!0),C&&(K=C(K,R,c),ee=K===R)),ee?R?K=vd(a,c,R):K=R:(ci(K)||$t(R))&&M&&R&&(ci(R)||$t(R))&&xr(R,function(he,ge){af(a,K,he,ge)}),a.set(c,p,K),j&&a.ref(c,p),z&&a[Wu](c,p)}var mi=Il("[[ai_dynCfg_1]]"),of=Il("[[ai_blkDynCfg_1]]"),Kv=Il("[[ai_frcDynCfg_1]]");function Pm(a){if(a){var c;if($t(a)?(c=[],c[pt]=a[pt]):ci(a)&&(c={}),c)return xr(a,function(p,g){c[p]=Pm(g)}),c}return a}function al(a){if(a){var c=a[mi]||a;if(c.cfg&&(c.cfg===a||c.cfg[mi]===c))return c}return null}function Am(a){if(a&&(ci(a)||$t(a)))try{a[of]=!0}catch{}return a}function Ro(a){if(a)try{a[Kv]=!0}catch{}return a}function Nu(a,c,p){var g=!1;return p&&!a[c.blkVal]&&(g=p[Kv],!g&&!p[of]&&(g=ci(p)||$t(p))),g}function il(a){zn("InvalidAccess:"+a)}var Wv=["push","pop","shift","unshift","splice"],fp=function(a,c,p,g){a&&a[Xi](3,108,"".concat(p," [").concat(c,"] failed - ")+or(g))};function Jv(a,c,p){$t(c)&&dt(Wv,function(g){var E=c[g];c[g]=function(){for(var C=[],R=0;R<arguments.length;R++)C[R]=arguments[R];var x=E[To](this,C);return hd(a,c,p,"Patching"),x}})}function tv(a,c){var p=Gr(a,c);return p&&p.get}function md(a,c,p,g){var E={n:p,h:[],trk:function(j){j&&j.fn&&(ua(E.h,j)===-1&&E.h[Lr](j),a.trk(j,E))},clr:function(j){var z=ua(E.h,j);z!==-1&&E.h[Io](z,1)}},C=!0,R=!1;function x(){C&&(R=R||Nu(x,a,g),g&&!g[mi]&&R&&(g=hd(a,g,p,"Converting")),C=!1);var j=a.act;return j&&E.trk(j),g}x[a.prop]={chng:function(){a.add(E)}};function M(j){if(g!==j){x[a.ro]&&!a.upd&&il("["+p+"] is read-only:"+or(c)),C&&(R=R||Nu(x,a,g),C=!1);var z=R&&x[a.rf];if(R)if(z){xr(g,function(K){g[K]=j?j[K]:Zn});try{xr(j,function(K,ee){ol(a,g,K,ee)}),j=g}catch(K){fp((a.hdlr||{})[Yr],p,"Assigning",K),R=!1}}else g&&g[mi]&&xr(g,function(K){var ee=tv(g,K);if(ee){var Z=ee[a.prop];Z&&Z.chng()}});if(j!==g){var G=j&&Nu(x,a,j);!z&&G&&(j=hd(a,j,p,"Converting")),g=j,R=G}a.add(E)}}Sn(c,E.n,{g:x,s:M})}function ol(a,c,p,g){if(c){var E=tv(c,p),C=E&&!!E[a.prop];C?c[p]=g:md(a,c,p,g)}return c}function ro(a,c,p,g){if(c){var E=tv(c,p),C=E&&!!E[a.prop],R=g&&g[0],x=g&&g[1],M=g&&g[2];if(!C){if(M)try{Am(c)}catch(j){fp((a.hdlr||{})[Yr],p,"Blocking",j)}try{ol(a,c,p,c[p]),E=tv(c,p)}catch(j){fp((a.hdlr||{})[Yr],p,"State",j)}}R&&(E[a.rf]=R),x&&(E[a.ro]=x),M&&(E[a.blkVal]=!0)}return c}function hd(a,c,p,g){try{xr(c,function(E,C){ol(a,c,E,C)}),c[mi]||(jr(c,mi,{get:function(){return a[Zf]}}),Jv(a,c,p))}catch(E){fp((a.hdlr||{})[Yr],p,g,E)}return c}var sl="[[ai_",ka="]]";function no(a){var c,p=Yu(sl+"get"+a.uid+ka),g=Yu(sl+"ro"+a.uid+ka),E=Yu(sl+"rf"+a.uid+ka),C=Yu(sl+"blkVal"+a.uid+ka),R=Yu(sl+"dtl"+a.uid+ka),x=null,M=null,j;function z(Z,he){var ge=j.act;try{j.act=Z,Z&&Z[R]&&(dt(Z[R],function(Be){Be.clr(Z)}),Z[R]=[]),he({cfg:a.cfg,set:a.set.bind(a),setDf:a[hu].bind(a),ref:a.ref.bind(a),rdOnly:a[Wu].bind(a)})}catch(Be){var Le=a[Yr];throw Le&&Le[Xi](1,107,or(Be)),Be}finally{j.act=ge||null}}function G(){if(x){var Z=x;x=null,M&&M[No](),M=null;var he=[];if(dt(Z,function(ge){if(ge&&(ge[R]&&(dt(ge[R],function(Le){Le.clr(ge)}),ge[R]=null),ge.fn))try{z(ge,ge.fn)}catch(Le){he[Lr](Le)}}),x)try{G()}catch(ge){he[Lr](ge)}he[pt]>0&&Uv("Watcher error(s): ",he)}}function K(Z){if(Z&&Z.h[pt]>0){x||(x=[]),M||(M=Bu(function(){M=null,G()},0));for(var he=0;he<Z.h[pt];he++){var ge=Z.h[he];ge&&ua(x,ge)===-1&&x[Lr](ge)}}}function ee(Z,he){if(Z){var ge=Z[R]=Z[R]||[];ua(ge,he)===-1&&ge[Lr](he)}}return j=(c={prop:p,ro:g,rf:E},c[Mr]=C,c[Zf]=a,c.add=K,c[wo]=G,c.use=z,c.trk=ee,c),j}function sf(a,c){var p={fn:c,rm:function(){p.fn=null,a=null,c=null}};return Sn(p,"toJSON",{v:function(){return"WatcherHandler"+(p.fn?"":"[X]")}}),a.use(p,c),p}function Zv(a,c,p){var g,E=al(c);if(E)return E;var C=fs("dyncfg",!0),R=c&&p!==!1?c:Pm(c),x;function M(){x[wo]()}function j(Le,Be,Xe){try{Le=ol(x,Le,Be,Xe)}catch(er){fp(a,Be,"Setting value",er)}return Le[Be]}function z(Le){return sf(x,Le)}function G(Le,Be){x.use(null,function(Xe){var er=x.upd;try{rt(Be)||(x.upd=Be),Le(Xe)}finally{x.upd=er}})}function K(Le,Be){var Xe;return ro(x,Le,Be,(Xe={},Xe[0]=!0,Xe))[Be]}function ee(Le,Be){var Xe;return ro(x,Le,Be,(Xe={},Xe[1]=!0,Xe))[Be]}function Z(Le,Be){var Xe;return ro(x,Le,Be,(Xe={},Xe[2]=!0,Xe))[Be]}function he(Le,Be){return Be&&xr(Be,function(Xe,er){af(ge,Le,Xe,er)}),Le}var ge=(g={uid:null,cfg:R},g[Yr]=a,g[wo]=M,g.set=j,g[hu]=he,g[Pi]=z,g.ref=K,g[Wu]=ee,g[Mr]=Z,g._block=G,g);return Sn(ge,"uid",{c:!1,e:!1,w:!1,v:C}),x=no(ge),hd(x,R,"config","Creating"),ge}function Xv(a,c){a?(a[As](c),a[Xi](2,108,c)):il(c)}function ha(a,c,p,g){var E=Zv(p,a||{},g);return c&&E[hu](E.cfg,c),E}function ul(a,c,p){var g=a[mi]||a;return g.cfg&&(g.cfg===a||g.cfg[mi]===g)?g[Pi](c):(Xv(p,op+or(a)),ha(a,null,p)[Pi](c))}function uf(a,c){if(a&&a[Qo])return a[Qo](c)}function Rm(a,c,p){var g;return p||(g=Za(function(E){p=E})),a&&Cs(a)>0?Yl(uf(a[0],c),function(){Rm(Ds(a,1),c,p)}):p(),g}var Qv=500,cf="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function Oa(a){return{mrg:!0,v:a}}var dp=[Hp,ql,Kp,Bl],fc=null,cl;function Hs(a,c){return function(){var p=arguments,g=pp(c);if(g){var E=g.listener;E&&E[a]&&E[a][To](E,p)}}}function lf(){var a=Qr("Microsoft");return a&&(fc=a.ApplicationInsights),fc}function pp(a){var c=fc;return!c&&a.disableDbgExt!==!0&&(c=fc||lf()),c?c.ChromeDbgExt:null}function St(a){if(!cl){cl={};for(var c=0;c<dp[pt];c++)cl[dp[c]]=Hs(dp[c],a)}return cl}var Du,ko="warnToConsole",ff="AI (Internal): ",km="AI: ",df="AITR_",_d={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Oo=(Du={},Du[0]=null,Du[1]="errorToConsole",Du[2]=ko,Du[3]="debugToConsole",Du);function em(a){return a?'"'+a[Ea](/\"/g,dr)+'"':dr}function vp(a,c){var p=fd();if(p){var g="log";p[a]&&(g=a),Qt(p[g])&&p[g](c)}}var mp=function(){function a(c,p,g,E){g===void 0&&(g=!1);var C=this;C[gu]=c,C[Ms]=(g?km:ff)+c;var R=dr;Ra()&&(R=ma().stringify(E));var x=(p?" message:"+em(p):dr)+(E?" props:"+em(R):dr);C[Ms]+=x}return a.dataType="MessageData",a}();function pf(a,c){return(a||{})[Yr]||new dc(c)}var dc=function(){function a(c){this.identifier="DiagnosticLogger",this.queue=[];var p=0,g={},E,C,R,x,M;Ci(a,this,function(j){M=G(c||{}),j.consoleLoggingLevel=function(){return E},j[Xi]=function(Z,he,ge,Le,Be){Be===void 0&&(Be=!1);var Xe=new mp(he,ge,Be,Le);if(x)throw or(Xe);var er=Oo[Z]||ko;if(rt(Xe[Ms]))ee("throw"+(Z===1?"Critical":"Warning"),Xe);else{if(Be){var ir=+Xe[gu];!g[ir]&&E>=Z&&(j[er](Xe[Ms]),g[ir]=!0)}else E>=Z&&j[er](Xe[Ms]);z(Z,Xe)}},j.debugToConsole=function(Z){vp("debug",Z),ee("warning",Z)},j[As]=function(Z){vp("warn",Z),ee("warning",Z)},j.errorToConsole=function(Z){vp("error",Z),ee("error",Z)},j.resetInternalMessageCount=function(){p=0,g={}},j[ed]=z,j[Qo]=function(Z){M&&M.rm(),M=null};function z(Z,he){if(!K()){var ge=!0,Le=df+he[gu];if(g[Le]?ge=!1:g[Le]=!0,ge&&(Z<=C&&(j.queue[Lr](he),p++,ee(Z===1?"error":"warn",he)),p===R)){var Be="Internal events throttle limit per PageView reached for this app.",Xe=new mp(23,Be,!1);j.queue[Lr](Xe),Z===1?j.errorToConsole(Be):j[As](Be)}}}function G(Z){return ul(ha(Z,_d,j).cfg,function(he){var ge=he.cfg;E=ge[jc],C=ge.loggingLevelTelemetry,R=ge.maxMessageLimit,x=ge.enableDebug})}function K(){return p>=R}function ee(Z,he){var ge=pp(c||{});ge&&ge[Qu]&&ge[Qu](Z,he)}})}return a.__ieDyn=1,a}();function rv(a){return a||new dc}function Br(a,c,p,g,E,C){C===void 0&&(C=!1),rv(a)[Xi](c,p,g,E,C)}function Ks(a,c){rv(a)[As](c)}function nv(a,c,p){rv(a)[ed](c,p)}var Cu,ao,Fn="toGMTString",gd="toUTCString",pc="cookie",ll="expires",ds="isCookieUseDisabled",io="disableCookiesUsage",Mo="_ckMgr",yd=null,hp=null,av=null,ps,iv={},Sd={},ov=(Cu={cookieCfg:Oa((ao={},ao[fa]={fb:"cookieDomain",dfVal:sp},ao.path={fb:"cookiePath",dfVal:sp},ao.enabled=Zn,ao.ignoreCookies=Zn,ao.blockedCookies=Zn,ao)),cookieDomain:Zn,cookiePath:Zn},Cu[io]=Zn,Cu);function vs(){!ps&&(ps=Yf(function(){return za()}))}function Om(a,c){var p=I[Mo]||Sd[Mo];return p||(p=I[Mo]=I(a,c),Sd[Mo]=p),p}function xu(a){return a?a.isEnabled():!0}function sv(a,c){return c&&a&&$t(a.ignoreCookies)?ua(a.ignoreCookies,c)!==-1:!1}function f(a,c){return c&&a&&$t(a.blockedCookies)&&ua(a.blockedCookies,c)!==-1?!0:sv(a,c)}function m(a,c){var p=c[ks];if(at(p)){var g=void 0;rt(a[ds])||(g=!a[ds]),rt(a[io])||(g=!a[io]),p=g}return p}function y(a,c){var p;if(a)p=a.getCookieMgr();else if(c){var g=c.cookieCfg;g&&g[Mo]?p=g[Mo]:p=I(c)}return p||(p=Om(c,(a||{})[Yr])),p}function I(a,c){var p,g,E,C,R,x,M,j,z;a=ha(a||Sd,null,c).cfg,R=ul(a,function(K){K[hu](K.cfg,ov),g=K.ref(K.cfg,"cookieCfg"),E=g[yu]||"/",C=g[fa],x=m(a,g)!==!1,M=g.getCookie||te,j=g.setCookie||_e,z=g.delCookie||_e},c);var G=(p={isEnabled:function(){var K=m(a,g)!==!1&&x&&F(c),ee=Sd[Mo];return K&&ee&&G!==ee&&(K=xu(ee)),K},setEnabled:function(K){x=K!==!1,g[ks]=K},set:function(K,ee,Z,he,ge){var Le=!1;if(xu(G)&&!f(g,K)){var Be={},Xe=xa(ee||dr),er=Hi(Xe,";");if(er!==-1&&(Xe=xa(On(ee,er)),Be=H(an(ee,er+1))),pi(Be,fa,he||C,qi,rt),!at(Z)){var ir=Eu();if(rt(Be[ll])){var Un=cu(),ln=Un+Z*1e3;if(ln>0){var jn=new Date;jn.setTime(ln),pi(Be,ll,J(jn,ir?Fn:gd)||J(jn,ir?Fn:gd)||dr,qi)}}ir||pi(Be,"max-age",dr+Z,null,rt)}var ji=bu();ji&&ji[es]==="https:"&&(pi(Be,"secure",null,null,rt),hp===null&&(hp=!et((oi()||{})[Zd])),hp&&pi(Be,"SameSite","None",null,rt)),pi(Be,yu,ge||E,null,rt),j(K,re(Xe,Be)),Le=!0}return Le},get:function(K){var ee=dr;return xu(G)&&!sv(g,K)&&(ee=M(K)),ee},del:function(K,ee){var Z=!1;return xu(G)&&(Z=G.purge(K,ee)),Z},purge:function(K,ee){var Z,he=!1;if(F(c)){var ge=(Z={},Z[yu]=ee||"/",Z[ll]="Thu, 01 Jan 1970 00:00:01 GMT",Z);Eu()||(ge["max-age"]="0"),z(K,re(dr,ge)),he=!0}return he}},p[Qo]=function(K){R&&R.rm(),R=null},p);return G[Mo]=G,G}function F(a){if(yd===null){yd=!1,!ps&&vs();try{var c=ps.v||{};yd=c[pc]!==void 0}catch(p){Br(a,2,68,"Cannot access document.cookie - "+os(p),{exception:or(p)})}}return yd}function H(a){var c={};if(a&&a[pt]){var p=xa(a)[di](";");dt(p,function(g){if(g=xa(g||dr),g){var E=Hi(g,"=");E===-1?c[g]=null:c[xa(On(g,E))]=xa(an(g,E+1))}})}return c}function J(a,c){return Qt(a[c])?a[c]():null}function re(a,c){var p=a||dr;return xr(c,function(g,E){p+="; "+g+(at(E)?dr:"="+E)}),p}function te(a){var c=dr;if(!ps&&vs(),ps.v){var p=ps.v[pc]||dr;av!==p&&(iv=H(p),av=p),c=xa(iv[a]||dr)}return c}function _e(a,c){!ps&&vs(),ps.v&&(ps.v[pc]=a+"="+c)}function et(a){return zt(a)?!!(bt(a,"CPU iPhone OS 12")||bt(a,"iPad; CPU OS 12")||bt(a,"Macintosh; Intel Mac OS X 10_14")&&bt(a,"Version/")&&bt(a,"Safari")||bt(a,"Macintosh; Intel Mac OS X 10_14")&&Gf(a,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||bt(a,"Chrome/5")||bt(a,"Chrome/6")||bt(a,"UnrealEngine")&&!bt(a,"Chrome")||bt(a,"UCBrowser/12")||bt(a,"UCBrowser/11")):!1}var Et={perfEvtsSendAll:!1};function Kt(a){a.h=null;var c=a.cb;a.cb=[],dt(c,function(p){nt(p.fn,[p.arg])})}function it(a,c,p,g){dt(a,function(E){E&&E[c]&&(p?(p.cb[Lr]({fn:g,arg:E}),p.h=p.h||Bu(Kt,0,p)):nt(g,[E]))})}var lt=function(){function a(c){this.listeners=[];var p,g,E=[],C={h:null,cb:[]},R=ha(c,Et);g=R[Pi](function(x){p=!!x.cfg.perfEvtsSendAll}),Ci(a,this,function(x){Sn(x,"listeners",{g:function(){return E}}),x[ba]=function(M){E[Lr](M)},x[Xo]=function(M){for(var j=ua(E,M);j>-1;)E[Io](j,1),j=ua(E,M)},x[Hp]=function(M){it(E,Hp,C,function(j){j[Hp](M)})},x[ql]=function(M,j){it(E,ql,C,function(z){z[ql](M,j)})},x[Kp]=function(M,j){it(E,Kp,j?C:null,function(z){z[Kp](M,j)})},x[Bl]=function(M){M&&(p||!M[td]())&&it(E,Bl,null,function(j){M[Ri]?Bu(function(){return j[Bl](M)},0):j[Bl](M)})},x[Vc]=function(M){M&&M[pt]&&it(E,Vc,C,function(j){j[Vc](M)})},x[ip]=function(M){M&&M[Fl]&&it(E,ip,C,function(j){j[ip](M)})},x[Gn]=function(M,j){if(M>0){var z=j||0;it(E,Gn,C,function(G){G[Gn](M,z)})}},x[Qo]=function(M){var j=function(){g&&g.rm(),g=null,E=[],C.h&&C.h[No](),C.h=null,C.cb=[]},z;if(it(E,"unload",null,function(G){var K=G[Qo](M);K&&(z||(z=[]),z[Lr](K))}),z)return Za(function(G){return Yl(id(z),function(){j(),G()})});j()}})}return a.__ieDyn=1,a}(),nr="ctx",Ft="ParentContextKey",hr="ChildrenContextKey",Er=null,Pt=function(){function a(c,p,g){var E=this;if(E.start=cu(),E[Co]=c,E[Ri]=g,E[td]=function(){return!1},Qt(p)){var C;Sn(E,"payload",{g:function(){return!C&&Qt(p)&&(C=p(),p=null),C}})}E[Po]=function(R){return R?R===a[Ft]||R===a[hr]?E[R]:(E[nr]||{})[R]:null},E[Ja]=function(R,x){if(R)if(R===a[Ft])E[R]||(E[td]=function(){return!0}),E[R]=x;else if(R===a[hr])E[R]=x;else{var M=E[nr]=E[nr]||{};M[R]=x}},E[$c]=function(){var R=0,x=E[Po](a[hr]);if($t(x))for(var M=0;M<x[pt];M++){var j=x[M];j&&(R+=j[xo])}E[xo]=cu()-E.start,E.exTime=E[xo]-R,E[$c]=function(){}}}return a.ParentContextKey="parent",a.ChildrenContextKey="childEvts",a}(),En=function(){function a(c){this.ctx={},Ci(a,this,function(p){p.create=function(g,E,C){return new Pt(g,E,C)},p.fire=function(g){g&&(g[$c](),c&&Qt(c[Bl])&&c[Bl](g))},p[Ja]=function(g,E){if(g){var C=p[nr]=p[nr]||{};C[g]=E}},p[Po]=function(g){return(p[nr]||{})[g]}})}return a.__ieDyn=1,a}(),vc="CoreUtils.doPerf";function Ws(a,c,p,g,E){if(a){var C=a;if(C[Hc]&&(C=C[Hc]()),C){var R=void 0,x=C[Po](vc);try{if(R=C.create(c(),g,E),R){if(x&&R[Ja]&&(R[Ja](Pt[Ft],x),x[Po]&&x[Ja])){var M=x[Po](Pt[hr]);M||(M=[],x[Ja](Pt[hr],M)),M[Lr](R)}return C[Ja](vc,R),p(R)}}catch(j){R&&R[Ja]&&R[Ja]("exception",j)}finally{R&&C.fire(R),C[Ja](vc,x)}}}return p()}function fl(){return Er}function vf(){var a=bd();return an(a,0,8)+"-"+an(a,8,12)+"-"+an(a,12,16)+"-"+an(a,16,20)+"-"+an(a,20)}function bd(){for(var a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],c=dr,p,g=0;g<4;g++)p=rl(),c+=a[p&15]+a[p>>4&15]+a[p>>8&15]+a[p>>12&15]+a[p>>16&15]+a[p>>20&15]+a[p>>24&15]+a[p>>28&15];var E=a[8+(rl()&3)|0];return go(c,0,8)+go(c,9,4)+"4"+go(c,13,3)+E+go(c,16,3)+go(c,19,12)}var mf=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,hf="00",Ed="ff",_f="00000000000000000000000000000000",Pe="0000000000000000",vt=1;function qt(a,c,p){return a&&a[pt]===c&&a!==p?!!a.match(/^[\da-f]*$/i):!1}function en(a,c,p){return qt(a,c)?a:p}function wa(a){(isNaN(a)||a<0||a>255)&&(a=1);for(var c=a.toString(16);c[pt]<2;)c="0"+c;return c}function Ta(a,c,p,g){var E;return E={},E[Ai]=qt(g,2,Ed)?g:hf,E[Qd]=hi(a)?a:bd(),E[jl]=ms(c)?c:On(bd(),16),E.traceFlags=p>=0&&p<=255?p:1,E}function Xn(a,c){var p;if(!a||($t(a)&&(a=a[0]||""),!a||!zt(a)||a[pt]>8192))return null;if(a.indexOf(",")!==-1){var g=a[di](",");a=g[c>0&&g[pt]>c?c:0]}var E=mf.exec(xa(a));return!E||E[1]===Ed||E[2]===_f||E[3]===Pe?null:(p={version:(E[1]||dr)[Ka](),traceId:(E[2]||dr)[Ka](),spanId:(E[3]||dr)[Ka]()},p[nc]=parseInt(E[4],16),p)}function hi(a){return qt(a,32,_f)}function ms(a){return qt(a,16,Pe)}function dl(a){return!(!a||!qt(a[Ai],2,Ed)||!qt(a[Qd],32,_f)||!qt(a[jl],16,Pe)||!qt(wa(a[nc]),2))}function tm(a){return dl(a)?(a[nc]&vt)===vt:!1}function Pu(a){if(a){var c=wa(a[nc]);qt(c,2)||(c="01");var p=a[Ai]||hf;return p!=="00"&&p!=="ff"&&(p=hf),"".concat(p.toLowerCase(),"-").concat(en(a.traceId,32,_f).toLowerCase(),"-").concat(en(a.spanId,16,Pe).toLowerCase(),"-").concat(c.toLowerCase())}return""}function wd(a){var c="traceparent",p=Xn(zv(c),a);return p||(p=Xn(ef(c),a)),p}var Mm=Vs("plugin");function Qn(a){return Mm.get(a,"state",{},!0)}function hs(a,c){for(var p=[],g=null,E=a[ki](),C;E;){var R=E[Do]();if(R){g&&g[ec]&&R[to]&&g[ec](R),C=Qn(R);var x=!!C[Aa];R[Aa]&&(x=R[Aa]()),x||p[Lr](R),g=R,E=E[ki]()}}dt(p,function(M){var j=a[mn]();M[Pn](a.getCfg(),j,c,a[ki]()),C=Qn(M),!M[mn]&&!C[mn]&&(C[mn]=j),C[Aa]=!0,delete C[ca]})}function rm(a){return a.sort(function(c,p){var g=0;if(p){var E=p[to];c[to]?g=E?c[$l]-p[$l]:1:E&&(g=-1)}else g=c?1:-1;return g})}function Lm(a){var c={};return{getName:function(){return c[Co]},setName:function(p){a&&a.setName(p),c[Co]=p},getTraceId:function(){return c[Qd]},setTraceId:function(p){a&&a.setTraceId(p),hi(p)&&(c[Qd]=p)},getSpanId:function(){return c[jl]},setSpanId:function(p){a&&a.setSpanId(p),ms(p)&&(c[jl]=p)},getTraceFlags:function(){return c[nc]},setTraceFlags:function(p){a&&a.setTraceFlags(p),c[nc]=p}}}var uv="TelemetryPluginChain",Fm="_hasRun",Um="_getTelCtx",Gh=0;function jm(a,c,p){for(;a;){if(a[Do]()===p)return a;a=a[ki]()}return vl([p],c.config||{},c)}function Ym(a,c,p,g){var E=null,C=[];c||(c=ha({},null,p[Yr])),g!==null&&(E=g?jm(a,p,g):a);var R={_next:M,ctx:{core:function(){return p},diagLog:function(){return pf(p,c.cfg)},getCfg:function(){return c.cfg},getExtCfg:z,getConfig:G,hasNext:function(){return!!E},getNext:function(){return E},setNext:function(ee){E=ee},iterate:K,onComplete:x}};function x(ee,Z){for(var he=[],ge=2;ge<arguments.length;ge++)he[ge-2]=arguments[ge];ee&&C[Lr]({func:ee,self:rt(Z)?R.ctx:Z,args:he})}function M(){var ee=E;if(E=ee?ee[ki]():null,!ee){var Z=C;Z&&Z[pt]>0&&(dt(Z,function(he){try{he.func.call(he.self,he.args)}catch(ge){Br(p[Yr],2,73,"Unexpected Exception during onComplete - "+or(ge))}}),C=[])}return ee}function j(ee,Z){var he=null,ge=c.cfg;if(ge&&ee){var Le=ge[cc];!Le&&Z&&(Le={}),ge[cc]=Le,Le=c.ref(ge,cc),Le&&(he=Le[ee],!he&&Z&&(he={}),Le[ee]=he,he=c.ref(Le,ee))}return he}function z(ee,Z){var he=j(ee,!0);return Z&&xr(Z,function(ge,Le){if(at(he[ge])){var Be=c.cfg[ge];(Be||!at(Be))&&(he[ge]=Be)}af(c,he,ge,Le)}),c[hu](he,Z)}function G(ee,Z,he){he===void 0&&(he=!1);var ge,Le=j(ee,!1),Be=c.cfg;return Le&&(Le[Z]||!at(Le[Z]))?ge=Le[Z]:(Be[Z]||!at(Be[Z]))&&(ge=Be[Z]),ge||!at(ge)?ge:he}function K(ee){for(var Z;Z=R._next();){var he=Z[Do]();he&&ee(he)}}return R}function pl(a,c,p,g){var E=ha(c),C=Ym(a,E,p,g),R=C.ctx;function x(j){var z=C._next();return z&&z[to](j,R),!z}function M(j,z){return j===void 0&&(j=null),$t(j)&&(j=vl(j,E.cfg,p,z)),pl(j||R[ki](),E.cfg,p,z)}return R[Ln]=x,R[_u]=M,R}function gf(a,c,p){var g=ha(c.config),E=Ym(a,g,c,p),C=E.ctx;function R(M){var j=E._next();return j&&j[Qo](C,M),!j}function x(M,j){return M===void 0&&(M=null),$t(M)&&(M=vl(M,g.cfg,c,j)),gf(M||C[ki](),c,j)}return C[Ln]=R,C[_u]=x,C}function Js(a,c,p){var g=ha(c.config),E=Ym(a,g,c,p),C=E.ctx;function R(M){return C.iterate(function(j){Qt(j[Jn])&&j[Jn](C,M)})}function x(M,j){return M===void 0&&(M=null),$t(M)&&(M=vl(M,g.cfg,c,j)),Js(M||C[ki](),c,j)}return C[Ln]=R,C[_u]=x,C}function vl(a,c,p,g){var E=null,C=!g;if($t(a)&&a[pt]>0){var R=null;dt(a,function(x){if(!C&&g===x&&(C=!0),C&&x&&Qt(x[to])){var M=$m(x,c,p);E||(E=M),R&&R._setNext(M),R=M}})}return g&&!E?vl([g],c,p):E}function $m(a,c,p){var g=null,E=Qt(a[to]),C=Qt(a[ec]),R;a?R=a[Qi]+"-"+a[$l]+"-"+Gh++:R="Unknown-0-"+Gh++;var x={getPlugin:function(){return a},getNext:function(){return g},processTelemetry:z,unload:G,update:K,_id:R,_setNext:function(ee){g=ee}};function M(){var ee;return a&&Qt(a[Um])&&(ee=a[Um]()),ee||(ee=pl(x,c,p)),ee}function j(ee,Z,he,ge,Le){var Be=!1,Xe=a?a[Qi]:uv,er=ee[Fm];return er||(er=ee[Fm]={}),ee.setNext(g),a&&Ws(ee[mn](),function(){return Xe+":"+he},function(){er[R]=!0;try{var ir=g?g._id:dr;ir&&(er[ir]=!1),Be=Z(ee)}catch(ln){var Un=g?er[g._id]:!0;Un&&(Be=!0),(!g||!Un)&&Br(ee[Qu](),1,73,"Plugin ["+Xe+"] failed during "+he+" - "+or(ln)+", run flags: "+or(er))}},ge,Le),Be}function z(ee,Z){Z=Z||M();function he(ge){if(!a||!E)return!1;var Le=Qn(a);return Le[ca]||Le[uc]?!1:(C&&a[ec](g),a[to](ee,ge),!0)}j(Z,he,"processTelemetry",function(){return{item:ee}},!ee.sync)||Z[Ln](ee)}function G(ee,Z){function he(){var ge=!1;if(a){var Le=Qn(a),Be=a[mn]||Le[mn];a&&(!Be||Be===ee.core())&&!Le[ca]&&(Le[mn]=null,Le[ca]=!0,Le[Aa]=!1,a[ca]&&a[ca](ee,Z)===!0&&(ge=!0))}return ge}j(ee,he,"unload",function(){},Z[Ri])||ee[Ln](Z)}function K(ee,Z){function he(){var ge=!1;if(a){var Le=Qn(a),Be=a[mn]||Le[mn];a&&(!Be||Be===ee.core())&&!Le[ca]&&a[Jn]&&a[Jn](ee,Z)===!0&&(ge=!0)}return ge}j(ee,he,"update",function(){},!1)||ee[Ln](Z)}return kn(x)}var nm=function(){function a(c,p,g,E){var C=this,R=pl(c,p,g,E);Wc(C,R,ho(R))}return a}();function cv(){var a=[];function c(g){g&&a[Lr](g)}function p(g,E){dt(a,function(C){try{C(g,E)}catch(R){Br(g[Qu](),2,73,"Unexpected error calling unload handler - "+or(R))}}),a=[]}return{add:c,run:p}}var lv,Td;function uh(a,c){lv=a,Td=c}function qm(){var a=[];function c(g){var E=a;a=[],dt(E,function(C){try{(C.rm||C.remove).call(C)}catch(R){Br(g,2,73,"Unloading:"+or(R))}}),lv&&E[pt]>lv&&(Td?Td("doUnload",E):Br(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))}function p(g){g&&(wi(a,g),lv&&a[pt]>lv&&(Td?Td("Add",a):Br(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}return{run:c,add:p}}var _p,ml="getPlugin",x_=(_p={},_p[cc]={isVal:sp,v:{}},_p),ch=function(){function a(){var c=this,p,g,E,C,R;j(),Ci(a,c,function(z){z[Pn]=function(G,K,ee,Z){M(G,K,Z),p=!0},z[ca]=function(G,K){var ee,Z=z[mn];if(!Z||G&&Z!==G[mn]())return;var he,ge=!1,Le=G||gf(null,Z,E&&E[ml]?E[ml]():E),Be=K||(ee={reason:0},ee[Ri]=!1,ee);function Xe(){ge||(ge=!0,C.run(Le,K),R.run(Le[Qu]()),he===!0&&Le[Ln](Be),j())}return!z[un]||z[un](Le,Be,Xe)!==!0?Xe():he=!0,he},z[Jn]=function(G,K){var ee=z[mn];if(!ee||G&&ee!==G[mn]())return;var Z,he=!1,ge=G||Js(null,ee,E&&E[ml]?E[ml]():E),Le=K||{reason:0};function Be(){he||(he=!0,M(ge.getCfg(),ge.core(),ge[ki]()))}return!z._doUpdate||z._doUpdate(ge,Le,Be)!==!0?Be():Z=!0,Z},Oi(z,"_addUnloadCb",function(){return C},"add"),Oi(z,"_addHook",function(){return R},"add"),Sn(z,"_unloadHooks",{g:function(){return R}})}),c[Qu]=function(z){return x(z)[Qu]()},c[Aa]=function(){return p},c.setInitialized=function(z){p=z},c[ec]=function(z){E=z},c[Ln]=function(z,G){G?G[Ln](z):E&&Qt(E[to])&&E[to](z,null)},c._getTelCtx=x;function x(z){z===void 0&&(z=null);var G=z;if(!G){var K=g||pl(null,{},c[mn]);E&&E[ml]?G=K[_u](null,E[ml]):G=K[_u](null,E)}return G}function M(z,G,K){ha(z,x_,pf(G)),!K&&G&&(K=G[Qf]()[ki]());var ee=E;E&&E[ml]&&(ee=E[ml]()),c[mn]=G,g=pl(K,z,G,ee)}function j(){p=!1,c[mn]=null,g=null,E=null,R=qm(),C=cv()}}return a.__ieDyn=1,a}();function Vh(a,c,p){var g={id:c,fn:p};wi(a,g);var E={remove:function(){dt(a,function(C,R){if(C.id===g.id)return a[Io](R,1),-1})}};return E}function Bm(a,c,p){for(var g=!1,E=a[pt],C=0;C<E;++C){var R=a[C];if(R)try{if(R.fn[To](null,[c])===!1){g=!0;break}}catch(x){Br(p,2,64,"Telemetry initializer failed: "+os(x),{exception:or(x)},!0)}}return!g}var P_=function(a){zu(c,a);function c(){var p=a.call(this)||this;p.identifier="TelemetryInitializerPlugin",p.priority=199;var g,E;C(),Ci(c,p,function(R,x){R.addTelemetryInitializer=function(M){return Vh(E,g++,M)},R[to]=function(M,j){Bm(E,M,j?j[Qu]():R[Qu]())&&R[Ln](M,j)},R[un]=function(){C()}});function C(){g=0,E=[]}return p}return c.__ieDyn=1,c}(ch),yf,fv="Plugins must provide initialize method",am="_notificationManager",Sf="SDK is still unloading...",dv="SDK is not initialized",lh=100,Hh=5e4,Id=$o((yf={cookieCfg:{}},yf[js]={rdOnly:!0,ref:!0,v:[]},yf[Us]={rdOnly:!0,ref:!0,v:[]},yf[cc]={ref:!0,v:{}},yf[as]=Zn,yf.loggingLevelConsole=0,yf.diagnosticLogInterval=Zn,yf));function Kh(a,c){return new En(c)}function A_(a,c,p){var g,E=[],C=[],R={};return dt(p,function(x){(at(x)||at(x[Pn]))&&xn(fv);var M=x[$l],j=x[Qi];x&&M&&(at(R[M])?R[M]=j:Ks(a,"Two extensions have same priority #"+M+" - "+R[M]+", "+j)),!M||M<c?E[Lr](x):C[Lr](x)}),g={},g[mn]=E,g[Us]=C,g}function fh(a,c){var p=!1;return dt(c,function(g){if(g===a)return p=!0,-1}),p}function im(a,c,p,g){p&&xr(p,function(E,C){g&&ci(C)&&ci(c[E])&&im(a,c[E],C,g),g&&ci(C)&&ci(c[E])?im(a,c[E],C,g):a.set(c,E,C)})}function dh(a,c){var p=null,g=-1;return dt(a,function(E,C){if(E.w===c)return p=E,g=C,-1}),{i:g,l:p}}function zm(a,c){var p=dh(a,c).l;return p||(p={w:c,rm:function(){var g=dh(a,c);g.i!==-1&&a[Io](g.i,1)}},a[Lr](p)),p}function pv(a,c,p){dt(c,function(g){var E=ul(a,g.w,p);delete g.w,g.rm=function(){E.rm()}})}function Nd(a,c,p,g){return c.add(a[Pi](function(E){var C=E.cfg.disableDbgExt;C===!0&&g&&(p[Xo](g),g=null),p&&!g&&C!==!0&&(g=St(E.cfg),p[ba](g))})),g}function ph(a){return Sn({rm:function(){a.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(a)+">"}})}var om=function(){function a(){var c,p,g,E,C,R,x,M,j,z,G,K,ee,Z,he,ge,Le,Be,Xe,er,ir,Un,ln,jn,ji,Si,xf,cm,Pf,Ze,Ut,In;Ci(a,this,function(Re){Ar(),Re._getDbgPlgTargets=function(){return[ln,E]},Re[Aa]=function(){return p},Re.activeStatus=function(){return Si},Re._setPendingStatus=function(){Si=3},Re[Pn]=function(Ee,mt,Gt,At){ee&&xn(Sf),Re[Aa]()&&xn("Core cannot be initialized more than once"),c=ha(Ee,Id,Gt||Re[Yr],!1),Ee=c.cfg,uo(c[Pi](function(vn){var Na=vn.cfg,co=Si===3;if(!co){cm=Na.initInMemoMaxSize||lh;var jo=Na[Uc],kf=Na.endpointUrl;if(at(jo)){ir=null,Si=sn[Ju];var Ev="Please provide instrumentation key";p?(Br(g,1,100,Ev),na()):xn(Ev);return}var hh=[];if(br(jo)?(hh[Lr](jo),ir=null):ir=jo,br(kf)?(hh[Lr](kf),xf=null):xf=kf,hh[pt]){Pf=!1,Si=3;var mg=sp(Na.initTimeOut)?Na.initTimeOut:Hh,Sy=Gc(hh);Bu(function(){Pf||It()},mg),Yl(Sy,function(Yn){try{if(Pf)return;if(!Yn.rejected){var Fa=Yn[Xf];if(Fa&&Fa[pt]){var R_=Fa[0];if(ir=R_&&R_[Xf],Fa[pt]>1){var Ua=Fa[1];xf=Ua&&Ua[Xf]}}ir&&(Ee[Uc]=ir,Ee.endpointUrl=xf)}It()}catch{Pf||It()}})}else It();var Qh=vn.ref(vn.cfg,cc);xr(Qh,function(Yn){vn.ref(Qh,Yn)})}})),C=At,Xe=Nd(c,Be,C&&Re[Rs](),Xe),Rf(),Re[Yr]=Gt;var Vt=Ee[js];if(z=[],z[Lr].apply(z,Wi(Wi([],mt,!1),Vt)),G=Ee[Us],Xa(null),(!K||K[pt]===0)&&xn("No "+Us+" available"),G&&G[pt]>1){var An=Re[Do]("TeeChannelController");(!An||!An.plugin)&&Br(g,1,28,"TeeChannel required")}pv(Ee,Un,g),Un=null,p=!0,Si===sn.ACTIVE&&na()},Re.getChannels=function(){var Ee=[];return K&&dt(K,function(mt){Ee[Lr](mt)}),kn(Ee)},Re.track=function(Ee){Ws(Re[Hc](),function(){return"AppInsightsCore:track"},function(){Ee===null&&(Ia(Ee),xn("Invalid telemetry item")),!Ee[Co]&&at(Ee[Co])&&(Ia(Ee),xn("telemetry name required")),Ee[Zu]=Ee[Zu]||ir,Ee[xo]=Ee[xo]||is(new Date),Ee.ver=Ee.ver||"4.0",!ee&&Re[Aa]()&&Si===sn.ACTIVE?bi()[Ln](Ee):Si!==sn[Ju]&&E[pt]<=cm&&E[Lr](Ee)},function(){return{item:Ee}},!Ee.sync)},Re[Qf]=bi,Re[Rs]=function(){return C||(C=new lt(c.cfg),Re[am]=C),C},Re[ba]=function(Ee){Re.getNotifyMgr()[ba](Ee)},Re[Xo]=function(Ee){C&&C[Xo](Ee)},Re.getCookieMgr=function(){return M||(M=I(c.cfg,Re[Yr])),M},Re.setCookieMgr=function(Ee){M!==Ee&&(uf(M,!1),M=Ee)},Re[Hc]=function(){return R||x||fl()},Re.setPerfMgr=function(Ee){R=Ee},Re.eventCnt=function(){return E[pt]},Re.releaseQueue=function(){if(p&&E[pt]>0){var Ee=E;E=[],Si===2?dt(Ee,function(mt){mt[Zu]=mt[Zu]||ir,bi()[Ln](mt)}):Br(g,2,20,"core init status is not active")}},Re[Xu]=function(Ee){return he=Ee||null,In=!1,Ze&&Ze[No](),oo(!0)};function It(){Pf=!0,at(ir)?(Si=sn[Ju],Br(g,1,112,"ikey can't be resolved from promises")):Si=sn.ACTIVE,na()}function na(){p&&(Re.releaseQueue(),Re[Xu]())}function oo(Ee){if((!Ze||!Ze[ks])&&!In){var mt=Ee||g&&g.queue[pt]>0;mt&&(Ut||(Ut=!0,uo(c[Pi](function(Gt){var At=Gt.cfg.diagnosticLogInterval;(!At||!(At>0))&&(At=1e4);var Vt=!1;Ze&&(Vt=Ze[ks],Ze[No]()),Ze=Hf(Sv,At),Ze.unref(),Ze[ks]=Vt}))),Ze[ks]=!0)}return Ze}Re[fi]=function(){In=!0,Ze&&Ze[No](),Sv()},Wc(Re,function(){return Z},["addTelemetryInitializer"]),Re[Qo]=function(Ee,mt,Gt){var At;Ee===void 0&&(Ee=!0),p||xn(dv),ee&&xn(Sf);var Vt=(At={reason:50},At[Ri]=Ee,At.flushComplete=!1,At),An;Ee&&!mt&&(An=Za(function(co){mt=co}));var vn=gf(Af(),Re);vn[Os](function(){Be.run(Re[Yr]),Rm([M,C,g],Ee,function(){Ar(),mt&&mt(Vt)})},Re);function Na(co){Vt.flushComplete=co,ee=!0,Le.run(vn,Vt),Re[fi](),vn[Ln](Vt)}return Sv(),Pd(Ee,Na,6,Gt),An},Re[Do]=so,Re.addPlugin=function(Ee,mt,Gt,At){if(!Ee){At&&At(!1),Vm(fv);return}var Vt=so(Ee[Qi]);if(Vt&&!mt){At&&At(!1),Vm("Plugin ["+Ee[Qi]+"] is already loaded!");return}var An={reason:16};function vn(jo){z[Lr](Ee),An.added=[Ee],Xa(An),At&&At(!0)}if(Vt){var Na=[Vt.plugin],co={reason:2,isAsync:!!Gt};Ou(Na,co,function(jo){jo?(An.removed=Na,An.reason|=32,vn()):At&&At(!1)})}else vn()},Re.updateCfg=function(Ee,mt){mt===void 0&&(mt=!0);var Gt;if(Re[Aa]()){Gt={reason:1,cfg:c.cfg,oldCfg:Vd({},c.cfg),newConfig:Vd({},Ee),merge:mt},Ee=Gt.newConfig;var At=c.cfg;Ee[js]=At[js],Ee[Us]=At[Us]}c._block(function(Vt){var An=Vt.cfg;im(Vt,An,Ee,mt),mt||xr(An,function(vn){Bi(Ee,vn)||Vt.set(An,vn,Zn)}),Vt[hu](An,Id)},!0),c[wo](),Gt&&bv(Gt)},Re.evtNamespace=function(){return ge},Re.flush=Pd,Re.getTraceCtx=function(Ee){return er||(er=Lm()),er},Re.setTraceCtx=function(Ee){er=Ee||null},Re.addUnloadHook=uo,Oi(Re,"addUnloadCb",function(){return Le},"add"),Re.onCfgChange=function(Ee){var mt;return p?mt=ul(c.cfg,Ee,Re[Yr]):mt=zm(Un,Ee),ph(mt)},Re.getWParam=function(){return wl()||c.cfg.enableWParam?0:-1};function Uo(){var Ee={};jn=[];var mt=function(Gt){Gt&&dt(Gt,function(At){if(At[Qi]&&At[Ai]&&!Ee[At.identifier]){var Vt=At[Qi]+"="+At[Ai];jn[Lr](Vt),Ee[At.identifier]=At}})};mt(K),G&&dt(G,function(Gt){mt(Gt)}),mt(z)}function Ar(){p=!1,c=ha({},Id,Re[Yr]),c.cfg[jc]=1,Sn(Re,"config",{g:function(){return c.cfg},s:function(mt){Re.updateCfg(mt,!1)}}),Sn(Re,"pluginVersionStringArr",{g:function(){return jn||Uo(),jn}}),Sn(Re,"pluginVersionString",{g:function(){return ji||(jn||Uo(),ji=jn.join(";")),ji||dr}}),Sn(Re,"logger",{g:function(){return g||(g=new dc(c.cfg),c[Yr]=g),g},s:function(mt){c[Yr]=mt,g!==mt&&(uf(g,!1),g=mt)}}),Re[Yr]=new dc(c.cfg),ln=[];var Ee=Re.config[js]||[];Ee.splice(0,Ee[pt]),wi(Ee,ln),Z=new P_,E=[],uf(C,!1),C=null,R=null,x=null,uf(M,!1),M=null,j=null,z=[],G=null,K=null,ee=!1,he=null,ge=fs("AIBaseCore",!0),Le=cv(),er=null,ir=null,Be=qm(),Un=[],ji=null,jn=null,In=!1,Ze=null,Ut=!1,Si=0,xf=null,cm=null,Pf=!1}function bi(){var Ee=pl(Af(),c.cfg,Re);return Ee[Os](oo),Ee}function Xa(Ee){var mt=A_(Re[Yr],Qv,z);j=null,ji=null,jn=null,K=(G||[])[0]||[],K=rm(wi(K,mt[Us]));var Gt=wi(rm(mt[mn]),K);ln=kn(Gt);var At=Re.config[js]||[];At.splice(0,At[pt]),wi(At,ln);var Vt=bi();K&&K[pt]>0&&hs(Vt[_u](K),Gt),hs(Vt,Gt),Ee&&bv(Ee)}function so(Ee){var mt=null,Gt=null,At=[];return dt(ln,function(Vt){if(Vt[Qi]===Ee&&Vt!==Z)return Gt=Vt,-1;Vt.getChannel&&At[Lr](Vt)}),!Gt&&At[pt]>0&&dt(At,function(Vt){if(Gt=Vt.getChannel(Ee),!Gt)return-1}),Gt&&(mt={plugin:Gt,setEnabled:function(Vt){Qn(Gt)[uc]=!Vt},isEnabled:function(){var Vt=Qn(Gt);return!Vt[ca]&&!Vt[uc]},remove:function(Vt,An){var vn;Vt===void 0&&(Vt=!0);var Na=[Gt],co=(vn={reason:1},vn[Ri]=Vt,vn);Ou(Na,co,function(jo){jo&&Xa({reason:32,removed:Na}),An&&An(jo)})}}),mt}function Af(){if(!j){var Ee=(ln||[]).slice();ua(Ee,Z)===-1&&Ee[Lr](Z),j=vl(rm(Ee),c.cfg,Re)}return j}function Ou(Ee,mt,Gt){if(Ee&&Ee[pt]>0){var At=vl(Ee,c.cfg,Re),Vt=gf(At,Re);Vt[Os](function(){var An=!1,vn=[];dt(z,function(co,jo){fh(co,Ee)?An=!0:vn[Lr](co)}),z=vn,ji=null,jn=null;var Na=[];G&&(dt(G,function(co,jo){var kf=[];dt(co,function(Ev){fh(Ev,Ee)?An=!0:kf[Lr](Ev)}),Na[Lr](kf)}),G=Na),Gt&&Gt(An),oo()}),Vt[Ln](mt)}else Gt(!1)}function Sv(){if(g&&g.queue){var Ee=g.queue.slice(0);g.queue[pt]=0,dt(Ee,function(mt){var Gt,At=(Gt={},Gt[Co]=he||"InternalMessageId: "+mt[gu],Gt[Zu]=ir,Gt[xo]=is(new Date),Gt.baseType=mp.dataType,Gt.baseData={message:mt[Ms]},Gt);Re.track(At)})}}function Pd(Ee,mt,Gt,At){var Vt=1,An=!1,vn=null;At=At||5e3;function Na(){Vt--,An&&Vt===0&&(vn&&vn[No](),vn=null,mt&&mt(An),mt=null)}if(K&&K[pt]>0){var co=bi()[_u](K);co.iterate(function(jo){if(jo.flush){Vt++;var kf=!1;jo.flush(Ee,function(){kf=!0,Na()},Gt)||kf||(Ee&&vn==null?vn=Bu(function(){vn=null,Na()},At):Na())}})}return An=!0,Na(),!0}function Rf(){var Ee;uo(c[Pi](function(mt){var Gt=mt.cfg.enablePerfMgr;if(Gt){var At=mt.cfg[as];(Ee!==At||!Ee)&&(At||(At=Kh),zl(mt.cfg,as,At),Ee=At,x=null),!R&&!x&&Qt(At)&&(x=At(Re,Re[Rs]()))}else x=null,Ee=null}))}function bv(Ee){var mt=Js(Af(),Re);mt[Os](oo),(!Re._updateHook||Re._updateHook(mt,Ee)!==!0)&&mt[Ln](Ee)}function Vm(Ee){var mt=Re[Yr];mt?(Br(mt,2,73,Ee),oo()):xn(Ee)}function Ia(Ee){var mt=Re[Rs]();mt&&mt[ql]([Ee],2)}function uo(Ee){Be.add(Ee)}})}return a.__ieDyn=1,a}();function Hr(a,c){try{if(a&&a!==""){var p=ma().parse(a);if(p&&p[Fv]&&p[Fv]>=p.itemsAccepted&&p.itemsReceived-p.itemsAccepted===p.errors[pt])return p}}catch(g){Br(c,1,43,"Cannot parse the response. "+(g[Co]||or(g)),{response:a})}return null}var Zs="",Dd="NoResponseBody",gp="&"+Dd+"=true",vv="POST",sm=function(){function a(){var c=0,p,g,E,C,R,x,M,j,z,G,K,ee,Z,he;Ci(a,this,function(ge,Le){var Be=!0;Pf(),ge[Pn]=function(Ze,Ut){E=Ut,g&&Br(E,1,28,"Sender is already initialized"),ge.SetConfig(Ze),g=!0},ge._getDbgPlgTargets=function(){return[g,C,x,p]},ge.SetConfig=function(Ze){try{if(R=Ze.senderOnCompleteCallBack||{},x=!!Ze.disableCredentials,M=Ze.fetchCredentials,C=!!Ze.isOneDs,p=!!Ze.enableSendPromise,z=!!Ze.disableXhr,G=!!Ze.disableBeacon,K=!!Ze.disableBeaconSync,he=Ze.timeWrapper,Z=!!Ze.addNoResponse,ee=!!Ze.disableFetchKeepAlive,j={sendPOST:Si},C||(Be=!1),x){var Ut=bu();Ut&&Ut.protocol&&Ut.protocol[Ka]()==="file:"&&(Be=!1)}return!0}catch{}return!1},ge.getSyncFetchPayload=function(){return c},ge.getSenderInst=function(Ze,Ut){return Ze&&Ze[pt]?Un(Ze,Ut):null},ge.getFallbackInst=function(){return j},ge[un]=function(Ze,Ut){Pf()};function Xe(Ze,Ut){ln(Ut,200,{},Ze)}function er(Ze,Ut){Br(E,2,26,"Failed to send telemetry.",{message:Ze}),ln(Ut,400,{})}function ir(Ze){er("No endpoint url is provided for the batch",Ze)}function Un(Ze,Ut){for(var In,Re=0,It=null,na=0;It==null&&na<Ze[pt];)Re=Ze[na],!z&&Re===1?Xp()?It=cm:Ql()&&(It=Si):Re===2&&Xl(Ut)&&(!Ut||!ee)?It=xf:Re===3&&Bv()&&(Ut?!K:!G)&&(It=ji),na++;return It?(In={_transport:Re,_isSync:Ut},In[rc]=It,In):null}function ln(Ze,Ut,In,Re){try{Ze&&Ze(Ut,In,Re)}catch{}}function jn(Ze,Ut){var In=oi(),Re=Ze[tc];if(!Re)return ir(Ut),!0;Re=Ze[tc]+(Z?gp:Zs);var It=Ze[Fl],na=C?It:new Blob([It],{type:"text/plain;charset=UTF-8"}),oo=In.sendBeacon(Re,na);return oo}function ji(Ze,Ut,In){var Re=Ze[Fl];try{if(Re)if(jn(Ze,Ut))Xe(Zs,Ut);else{var It=R&&R.beaconOnRetry;It&&Qt(It)?It(Ze,Ut,jn):(j&&j[rc](Ze,Ut,!0),Br(E,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(na){C&&Ks(E,"Failed to send telemetry using sendBeacon API. Ex:"+or(na)),ln(Ut,C?0:400,{},Zs)}}function Si(Ze,Ut,In){var Re,It,na,oo=Ze[ns]||{};!In&&p&&(Re=Za(function(Xa,so){It=Xa,na=so})),C&&In&&Ze.disableXhrSync&&(In=!1);var Uo=Ze[tc];if(!Uo){ir(Ut),It&&It(!1);return}var Ar=Cm(vv,Uo,Be,!0,In,Ze[Ul]);C||Ar[Nm]("Content-type","application/json"),dt(ho(oo),function(Xa){Ar[Nm](Xa,oo[Xa])}),Ar.onreadystatechange=function(){C||(bi(Ar),Ar.readyState===4&&It&&It(!0))},Ar.onload=function(){C&&bi(Ar)};function bi(Xa){var so=R&&R.xhrOnComplete,Af=so&&Qt(so);if(Af)so(Xa,Ut,Ze);else{var Ou=$s(Xa);ln(Ut,Xa[rs],Su(Xa,C),Ou)}}return Ar.onerror=function(Xa){ln(Ut,C?Ar[rs]:400,Su(Ar,C),C?Zs:Jc(Ar)),na&&na(Xa)},Ar.ontimeout=function(){ln(Ut,C?Ar[rs]:500,Su(Ar,C),C?Zs:Jc(Ar)),It&&It(!1)},Ar.send(Ze[Fl]),Re}function xf(Ze,Ut,In){var Re,It=Ze[tc],na=Ze[Fl],oo=C?na:new Blob([na],{type:"application/json"}),Uo,Ar,bi,Xa=new Headers,so=na[pt],Af=!1,Ou=!1,Sv=Ze[ns]||{},Pd=(Re={method:vv,body:oo},Re[cf]=!0,Re);Ze.headers&&ho(Ze.headers)[pt]>0&&(dt(ho(Sv),function(Ia){Xa.append(Ia,Sv[Ia])}),Pd[ns]=Xa),M?Pd.credentials=M:Be&&C&&(Pd.credentials="include"),In&&(Pd.keepalive=!0,c+=so,C?Ze._sendReason===2&&(Af=!0,Z&&(It+=gp)):Af=!0);var Rf=new Request(It,Pd);try{Rf[cf]=!0}catch{}if(!In&&p&&(Uo=Za(function(Ia,uo){Ar=Ia,bi=uo})),!It){ir(Ut),Ar&&Ar(!1);return}function bv(Ia){ln(Ut,C?0:400,{},C?Zs:Ia)}function Vm(Ia,uo,Ee){var mt=Ia[rs],Gt=R.fetchOnComplete;Gt&&Qt(Gt)?Gt(Ia,Ut,Ee||Zs,uo):ln(Ut,mt,{},Ee||Zs)}try{Yl(fetch(C?It:Rf,C?Pd:null),function(Ia){if(In&&(c-=so,so=0),!Ou)if(Ou=!0,Ia.rejected)bv(Ia.reason&&Ia.reason[Ms]),bi&&bi(Ia.reason);else{var uo=Ia[Xf];try{!C&&!uo.ok?(bv(uo.statusText),Ar&&Ar(!1)):C&&!uo.body?(Vm(uo,null,Zs),Ar&&Ar(!0)):Yl(uo.text(),function(Ee){Vm(uo,Ze,Ee[Xf]),Ar&&Ar(!0)})}catch(Ee){bv(or(Ee)),bi&&bi(Ee)}}})}catch(Ia){Ou||(bv(or(Ia)),bi&&bi(Ia))}return Af&&!Ou&&(Ou=!0,ln(Ut,200,{}),Ar&&Ar(!0)),C&&!Ou&&Ze[Ul]>0&&he&&he.set(function(){Ou||(Ou=!0,ln(Ut,500,{}),Ar&&Ar(!0))},Ze[Ul]),Uo}function cm(Ze,Ut,In){var Re=ii(),It=new XDomainRequest,na=Ze[Fl];It.onload=function(){var Xa=$s(It),so=R&&R.xdrOnComplete;so&&Qt(so)?so(It,Ut,Ze):ln(Ut,200,{},Xa)},It.onerror=function(){ln(Ut,400,{},C?Zs:Gl(It))},It.ontimeout=function(){ln(Ut,500,{})},It.onprogress=function(){};var oo=Re&&Re.location&&Re.location[es]||"",Uo=Ze[tc];if(!Uo){ir(Ut);return}if(!C&&Uo.lastIndexOf(oo,0)!==0){var Ar="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";Br(E,2,40,". "+Ar),er(Ar,Ut);return}var bi=C?Uo:Uo[Ea](/^(https?:)/,"");It.open(vv,bi),Ze[Ul]&&(It[Ul]=Ze[Ul]),It.send(na),C&&In?he&&he.set(function(){It.send(na)},0):It.send(na)}function Pf(){c=0,g=!1,p=!1,E=null,C=null,R=null,x=null,M=null,j=null,z=!1,G=!1,K=!1,ee=!1,Z=!1,he=null}})}return a.__ieDyn=1,a}(),bf="on",Cd="attachEvent",Wh="addEventListener",yp="detachEvent",hl="removeEventListener",mc="events",Lo="visibilitychange",Xs="pagehide",_l="pageshow",Ef="unload",Au="beforeunload",Ru=fs("aiEvtPageHide"),Sp=fs("aiEvtPageShow"),xd=/\.[\.]+/g,Jh=/[\.]+$/,mv=1,hc=Vs("events"),Gm=/^([^.]*)(?:\.(.+)|)/;function hv(a){return a&&a[Ea]?a[Ea](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,dr):a}function wf(a,c){var p;if(c){var g=dr;$t(c)?(g=dr,dt(c,function(C){C=hv(C),C&&(C[0]!=="."&&(C="."+C),g+=C)})):g=hv(c),g&&(g[0]!=="."&&(g="."+g),a=(a||dr)+g)}var E=Gm.exec(a||dr)||[];return p={},p[Wa]=E[1],p.ns=(E[2]||dr).replace(xd,".").replace(Jh,dr)[di](".").sort().join("."),p}function _v(a,c,p){var g=[],E=hc.get(a,mc,{},!1),C=wf(c,p);return xr(E,function(R,x){dt(x,function(M){var j;(!C[Wa]||C[Wa]===M.evtName[Wa])&&(!C.ns||C.ns===C.ns)&&g[Lr]((j={},j[Co]=M.evtName[Wa]+(M.evtName.ns?"."+M.evtName.ns:dr),j.handler=M[ts],j))})}),g}function gv(a,c,p){p===void 0&&(p=!0);var g=hc.get(a,mc,{},p),E=g[c];return E||(E=g[c]=[]),E}function vh(a,c,p,g){a&&c&&c[Wa]&&(a[hl]?a[hl](c[Wa],p,g):a[yp]&&a[yp](bf+c[Wa],p))}function mh(a,c,p,g){var E=!1;return a&&c&&c[Wa]&&p&&(a[Wh]?(a[Wh](c[Wa],p,g),E=!0):a[Cd]&&(a[Cd](bf+c[Wa],p),E=!0)),E}function Zh(a,c,p,g){for(var E=c[pt];E--;){var C=c[E];C&&(!p.ns||p.ns===C.evtName.ns)&&(!g||g(C))&&(vh(a,C.evtName,C[ts],C.capture),c[Io](E,1))}}function _i(a,c,p){if(c[Wa])Zh(a,gv(a,c[Wa]),c,p);else{var g=hc.get(a,mc,{});xr(g,function(E,C){Zh(a,C,c,p)}),ho(g)[pt]===0&&hc.kill(a,mc)}}function Qs(a,c){var p;return c?($t(c)?p=[a].concat(c):p=[a,c],p=wf("xx",p).ns[di](".")):p=a,p}function bp(a,c,p,g,E){var C;E===void 0&&(E=!1);var R=!1;if(a)try{var x=wf(c,g);if(R=mh(a,x,p,E),R&&hc.accept(a)){var M=(C={guid:mv++,evtName:x},C[ts]=p,C.capture=E,C);gv(a,x.type)[Lr](M)}}catch{}return R}function Vn(a,c,p,g,E){if(E===void 0&&(E=!1),a)try{var C=wf(c,g),R=!1;_i(a,C,function(x){return C.ns&&!p||x[ts]===p?(R=!0,!0):!1}),R||vh(a,C,p,E)}catch{}}function Ep(a,c,p,g){return g===void 0&&(g=!1),bp(a,c,p,null,g)}function wp(a,c,p,g){g===void 0&&(g=!1),Vn(a,c,p,null,g)}function Xh(a,c,p){var g=!1,E=ii();E&&(g=bp(E,a,c,p),g=bp(E.body,a,c,p)||g);var C=za();return C&&(g=bp(C,a,c,p)||g),g}function d(a,c,p){var g=ii();g&&(Vn(g,a,c,p),Vn(g.body,a,c,p));var E=za();E&&Vn(E,a,c,p)}function _(a,c,p,g){var E=!1;return c&&a&&a[pt]>0&&dt(a,function(C){C&&(!p||ua(p,C)===-1)&&(E=Xh(C,c,g)||E)}),E}function w(a,c,p,g){var E=!1;return c&&a&&$t(a)&&(E=_(a,c,p,g),!E&&p&&p[pt]>0&&(E=_(a,c,null,g))),E}function D(a,c,p){a&&$t(a)&&dt(a,function(g){g&&d(g,c,p)})}function k(a,c,p){return w([Au,Ef,Xs],a,c,p)}function $(a,c){D([Au,Ef,Xs],a,c)}function q(a,c,p){function g(R){var x=za();a&&x&&x.visibilityState==="hidden"&&a(R)}var E=Qs(Ru,p),C=_([Xs],a,c,E);return(!c||ua(c,Lo)===-1)&&(C=_([Lo],g,c,E)||C),!C&&c&&(C=q(a,null,p)),C}function W(a,c){var p=Qs(Ru,c);D([Xs],a,p),D([Lo],null,p)}function ie(a,c,p){function g(R){var x=za();a&&x&&x.visibilityState==="visible"&&a(R)}var E=Qs(Sp,p),C=_([_l],a,c,E);return C=_([Lo],g,c,E)||C,!C&&c&&(C=ie(a,null,p)),C}function oe(a,c){var p=Qs(Sp,c);D([_l],a,p),D([Lo],null,p)}var De=xi({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3}),$e="",je="https://browser.events.data.microsoft.com/OneCollector/1.0/",Ne="version",ve="properties",Fe="initialize",we="logger",He="indexOf",Ce="timings",Te="pollInternalLogs",qe="value",Bt="kind",Wt="length",ar="processTelemetryStart",Dr="handleField",Fr="rmSanitizer",cn="rmFieldSanitizer",tn="canHandle",Jt,ea="4.3.4",Je="1DS-Web-JS-"+ea,ft=h.hasOwnProperty,_r="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",ur="withCredentials",wt="timeout",Pr=(Jt={},Jt[0]=0,Jt[2]=6,Jt[1]=1,Jt[3]=7,Jt[4098]=6,Jt[4097]=1,Jt[4099]=7,Jt),Tt=null,Ma=wl(),st=Ud();function wn(a){return!(a===$e||at(a))}function Tn(a){if(a){var c=Hi(a,"-");if(c>-1)return On(a,c)}return $e}function gi(){return Tt===null&&(Tt=!rt(Uint8Array)&&!La()&&!Zl()),Tt}function _c(a){return!!(a&&Ue(a)&&a>=1&&a<=4)}function Fi(a,c,p){if(!c&&!wn(c)||typeof a!="string")return null;var g=typeof c;if(g==="string"||g==="number"||g==="boolean"||$t(c))c={value:c};else if(g==="object"&&!ft.call(c,"value"))c={value:p?JSON.stringify(c):c};else if(at(c[qe])||c[qe]===$e||!zt(c[qe])&&!Ue(c[qe])&&!Kn(c[qe])&&!$t(c[qe]))return null;if($t(c[qe])&&!tu(c[qe]))return null;if(!at(c[Bt])){if($t(c[qe])||!Jr(c[Bt]))return null;c[qe]=c[qe].toString()}return c}function Tf(a,c,p){var g=-1;if(!rt(a))if(c>0&&(c===32?g=8192:c<=13&&(g=c<<5)),ra(p))g===-1&&(g=0),g|=p;else{var E=Pr[Ui(a)]||-1;g!==-1&&E!==-1?g|=E:E===6&&(g=E)}return g}function _s(a,c,p){p===void 0&&(p=!0);var g;return a&&(g=a.get(c),p&&g&&decodeURIComponent&&(g=decodeURIComponent(g))),g||$e}function Fo(a){a===void 0&&(a="D");var c=vf();return a==="B"?c="{"+c+"}":a==="P"?c="("+c+")":a==="N"&&(c=c.replace(/-/g,$e)),c}function eu(a,c,p,g,E){var C={},R=!1,x=0,M=arguments[Wt],j=arguments;for(Kn(j[0])&&(R=j[0],x++);x<M;x++){var a=j[x];xr(a,function(G,K){R&&K&&Ur(K)?$t(K)?(C[G]=C[G]||[],dt(K,function(ee,Z){ee&&Ur(ee)?C[G][Z]=eu(!0,C[G][Z],ee):C[G][Z]=ee})):C[G]=eu(!0,C[G],K):C[G]=K})}return C}var ta=Pl;function Jr(a){return a===0||a>0&&a<=13||a===32}function ra(a){return a>=0&&a<=9}function La(){var a=oi();if(!rt(a)&&a.userAgent){var c=a.userAgent.toLowerCase();if((c[He]("safari")>=0||c[He]("firefox")>=0)&&c[He]("chrome")<0)return!0}return!1}function tu(a){return a[Wt]>0}function gc(a,c){var p=a;p[Ce]=p[Ce]||{},p[Ce][ar]=p[Ce][ar]||{},p[Ce][ar][c]=ta()}function Ui(a){var c=0;if(a!=null){var p=typeof a;p==="string"?c=1:p==="number"?c=2:p==="boolean"?c=3:p===r&&(c=4,$t(a)?(c=4096,a[Wt]>0&&(c|=Ui(a[0]))):ft.call(a,"value")&&(c=8192|Ui(a[qe])))}return c}function If(){return!!Qr("chrome")}function ru(a,c,p,g,E,C){g===void 0&&(g=!1),E===void 0&&(E=!1);function R(M,j,z){try{M[j]=z}catch{}}var x=new XMLHttpRequest;return g&&R(x,_r,g),p&&R(x,ur,p),x.open(a,c,!E),p&&R(x,ur,p),!E&&C&&R(x,wt,C),x}function um(a){return a>0}var yc=$o({endpointUrl:je,propertyStorageOverride:{isVal:Nf}});function Nf(a){return a&&(!a.getProperty||!a.setProperty)&&xn("Invalid property storage override passed."),!0}var _a=function(a){zu(c,a);function c(){var p=a.call(this)||this;return Ci(c,p,function(g,E){g[Fe]=function(C,R,x,M){Ws(g,function(){return"AppInsightsCore.initialize"},function(){try{E[Fe](ha(C,yc,x||g[we],!1).cfg,R,x,M)}catch(G){var j=g[we],z=or(G);z[He]("channels")!==-1&&(z+=`
 - Channels must be provided through config.channels only!`),Br(j,1,514,"SDK Initialization Failed - no telemetry will be sent: "+z)}},function(){return{config:C,extensions:R,logger:x,notificationManager:M}})},g.track=function(C){Ws(g,function(){return"AppInsightsCore.track"},function(){var R=C;if(R){R[Ce]=R[Ce]||{},R[Ce].trackStart=ta(),_c(R.latency)||(R.latency=1);var x=R.ext=R.ext||{};x.sdk=x.sdk||{},x.sdk.ver=Je;var M=R.baseData=R.baseData||{};M[ve]=M[ve]||{};var j=M[ve];j[Ne]=j[Ne]||g.pluginVersionString||$e}E.track(R)},function(){return{item:C}},!C.sync)},g[Te]=function(C){return E[Te](C||"InternalLog")}}),p}return c.__ieDyn=1,c}(om),Tp=xi({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),Df=xi({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),yv=xi({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),ku=xi({Normal:1,Critical:2}),yi=xi({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),Cf=function(){function a(c){var p=this,g={},E=[],C=[];c&&C.push(c);function R(z,G){var K,ee=g[z];if(ee&&(K=ee[G]),!K&&K!==null){if(zt(z)&&zt(G))if(C[Wt]>0){for(var Z=0;Z<C[Wt];Z++)if(C[Z][Dr](z,G)){K={canHandle:!0,fieldHandler:C[Z]};break}}else E[Wt]===0&&(K={canHandle:!0});if(!K&&K!==null){K=null;for(var Z=0;Z<E[Wt];Z++)if(E[Z][Dr](z,G)){K={canHandle:!0,handler:E[Z],fieldHandler:null};break}}ee||(ee=g[z]={}),ee[G]=K}return K}p.clearCache=function(){g={}},p.addSanitizer=function(z){z&&($d(E,z)||E.push(z),g={})},p.addFieldSanitizer=function(z){z&&($d(C,z)||C.push(z),g={})},p[Fr]=function(z){if(z){var G=ua(E,z);G!==-1&&(E.splice(G,1),g={}),dt(E,function(K){K&&K[Fr]&&K[Fr](z)})}},p[cn]=function(z){if(z){var G=ua(C,z);G!==-1&&(C.splice(G,1),g={}),dt(E,function(K){K&&K[cn]&&K[cn](z)})}},p.isEmpty=function(){return Cs(E)+Cs(C)===0},p[Dr]=function(z,G){var K=R(z,G);return K?K[tn]:!1},p[qe]=function(z,G,K,ee){var Z=R(z,G);if(Z&&Z[tn]){if(!Z||!Z[tn])return null;if(Z.handler)return Z.handler[qe](z,G,K,ee);if(!zt(G)||at(K)||K===$e)return null;var he=null,ge=Ui(K);if((ge&8192)===8192){var Le=ge&-8193;if(he=K,!wn(he[qe])||Le!==1&&Le!==2&&Le!==3&&(Le&4096)!==4096)return null}else ge===1||ge===2||ge===3||(ge&4096)===4096?he=M(z,G,K):ge===4&&(he=M(z,G,ee?JSON.stringify(K):K));if(he)return x(Z,z,G,ge,he,ee)}return null},p.property=function(z,G,K,ee){var Z=R(z,G);if(!Z||!Z[tn]||!zt(G)||at(K)||!wn(K[qe]))return null;var he=Ui(K[qe]);return he===0?null:x(Z,z,G,he,K,ee)};function x(z,G,K,ee,Z,he){if(z.handler)return z.handler.property(G,K,Z,he);if(!at(Z[Bt])){if((ee&4096)===4096||!Jr(Z[Bt]))return null;Z[qe]=Z[qe].toString()}return j(z.fieldHandler,G,K,ee,Z)}function M(z,G,K){return wn(K)?{value:K}:null}function j(z,G,K,ee,Z){if(Z&&z){var he=z.getSanitizer(G,K,ee,Z[Bt],Z.propertyType);if(he)if(ee===4){var ge={},Le=Z[qe];xr(Le,function(Xe,er){var ir=G+"."+K;if(wn(er)){var Un=M(ir,Xe,er);Un=j(z,ir,Xe,Ui(er),Un),Un&&(ge[Xe]=Un[qe])}}),Z[qe]=ge}else{var Be={path:G,name:K,type:ee,prop:Z,sanitizer:p};Z=he.call(p,Be)}}return Z}}return a.getFieldType=Ui,a}();e.ActiveStatus=sn,e.AppInsightsCore=_a,e.BaseTelemetryPlugin=ch,e.DiagnosticLogger=dc,e.EventLatency=Df,e.EventPersistence=ku,e.EventPropertyType=yv,e.EventsDiscardedReason=mu,e.FullVersionString=Je,e.InternalAppInsightsCore=om,e.LoggingSeverity=De,e.MinChannelPriorty=Jf,e.NotificationManager=lt,e.PerfEvent=Pt,e.PerfManager=En,e.ProcessTelemetryContext=nm,e.SenderPostManager=sm,e.TraceLevel=yi,e.Undefined=n,e.ValueKind=Tp,e.ValueSanitizer=Cf,e.Version=ea,e._InternalLogMessage=mp,e.__getRegisteredEvents=_v,e._appendHeader=qs,e._getAllResponseHeaders=Su,e._logInternalMessage=nv,e._testHookMaxUnloadHooksCb=uh,e._throwInternal=Br,e._warnToConsole=Ks,e.addEventHandler=Xh,e.addEventListeners=w,e.addPageHideEventListener=q,e.addPageShowEventListener=ie,e.addPageUnloadEventListener=k,e.areCookiesSupported=F,e.arrForEach=dt,e.arrIndexOf=ua,e.arrMap=uu,e.arrReduce=Wn,e.attachEvent=Ep,e.blockDynamicConversion=Am,e.convertAllHeadersToMap=us,e.cookieAvailable=F,e.createCookieMgr=I,e.createDynamicConfig=ha,e.createEnumStyle=xi,e.createGuid=Fo,e.createProcessTelemetryContext=pl,e.createTraceParent=Ta,e.createUniqueNamespace=fs,e.createUnloadHandlerContainer=cv,e.dateNow=cu,e.detachEvent=wp,e.disallowsSameSiteNone=et,e.doPerf=Ws,e.dumpObj=or,e.eventOff=Vn,e.eventOn=bp,e.extend=eu,e.findW3cTraceParent=wd,e.forceDynamicConversion=Ro,e.formatErrorMessageXdr=Gl,e.formatErrorMessageXhr=Jc,e.formatTraceParent=Pu,e.generateW3CId=bd,e.getCommonSchemaMetaData=Tf,e.getConsole=fd,e.getCookieValue=_s,e.getCrypto=Zp,e.getDocument=za,e.getDynamicConfigHandler=al,e.getExceptionName=os,e.getFieldValueType=Ui,e.getGlobal=$f,e.getGlobalInst=Qr,e.getHistory=Gi,e.getIEVersion=qv,e.getISOString=is,e.getJSON=ma,e.getLocation=bu,e.getMsCrypto=Jl,e.getNavigator=oi,e.getPerformance=Ni,e.getResponseText=$s,e.getSetValue=zl,e.getTenantId=Tn,e.getTime=ta,e.getWindow=ii,e.hasDocument=wl,e.hasHistory=Tl,e.hasJSON=Ra,e.hasNavigator=Up,e.hasOwnProperty=yn,e.hasWindow=Ud,e.isArray=$t,e.isArrayValid=tu,e.isBeaconsSupported=Bv,e.isBoolean=Kn,e.isChromium=If,e.isDate=nn,e.isDocumentObjectAvailable=Ma,e.isError=Dt,e.isFetchSupported=Xl,e.isFunction=Qt,e.isGreaterThanZero=um,e.isIE=Eu,e.isLatency=_c,e.isNotTruthy=ei,e.isNullOrUndefined=at,e.isNumber=Ue,e.isObject=Ur,e.isReactNative=Zl,e.isSampledFlag=tm,e.isString=zt,e.isTruthy=qi,e.isTypeof=Lt,e.isUint8ArrayAvailable=gi,e.isUndefined=rt,e.isValidSpanId=ms,e.isValidTraceId=hi,e.isValidTraceParent=dl,e.isValueAssigned=wn,e.isValueKind=Jr,e.isWindowObjectAvailable=st,e.isXhrSupported=Ql,e.mergeEvtNamespace=Qs,e.newGuid=vf,e.newId=rf,e.normalizeJsName=Ys,e.objDefineAccessors=jf,e.objForEachKey=xr,e.objFreeze=kn,e.objKeys=ho,e.objSeal=_o,e.onConfigChange=ul,e.openXhr=ru,e.optimizeObject=ud,e.parseResponse=Hr,e.parseTraceParent=Xn,e.perfNow=Pl,e.prependTransports=Vl,e.proxyAssign=ss,e.proxyFunctionAs=Oi,e.proxyFunctions=Wc,e.random32=rl,e.randomValue=Vv,e.removeEventHandler=d,e.removeEventListeners=D,e.removePageHideEventListener=W,e.removePageShowEventListener=oe,e.removePageUnloadEventListener=$,e.safeGetCookieMgr=y,e.safeGetLogger=pf,e.sanitizeProperty=Fi,e.setEnableEnvMocks=ld,e.setProcessTelemetryTimings=gc,e.setValue=pi,e.strContains=bt,e.strEndsWith=Gf,e.strFunction=t,e.strObject=r,e.strPrototype=s,e.strStartsWith=Mv,e.strTrim=xa,e.strUndefined=n,e.throwError=xn,e.toISOString=is,e.useXDomainRequest=Xp})});var wS=kd((xg,ES)=>{(function(e,t){typeof xg=="object"&&typeof ES<"u"?t(xg):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.oneDS=e.oneDS||{}))})(xg,function(e){"use strict";var t="REAL_TIME",r="NEAR_REAL_TIME",n="BEST_EFFORT",s="function",u="object",h="undefined",b="prototype",N=Object,A=N[b];function U(d,_){return d||_}function V(d,_){return d[_]}var Q=void 0,pe=null,de="",ue="function",ne="object",ye="prototype",Ae="__proto__",tt="undefined",Ke="constructor",ct="Symbol",Qe="_polyfill",Nt="length",kt="name",yr="call",Sr="toString",zr=U(Object),po=V(zr,ye),Yi=U(String),Kr=V(Yi,ye),Cn=U(Math),nt=U(Array),vo=V(nt,ye),Ve=V(vo,"slice");function Tr(d,_){try{return{v:d.apply(this,_)}}catch(w){return{e:w}}}function Bn(d){return function(_){return typeof _===d}}function Ot(d){return typeof d===tt||d===tt}function Lt(d){return!at(d)}function rt(d){return d===pe||Ot(d)}function gn(d){return d===pe||!at(d)}function at(d){return!!d||d!==Q}var Nc=Bn("string"),Ht=Bn(ue);function $i(d){return!d&&rt(d)?!1:!!d&&typeof d===ne}var zt=V(nt,"isArray"),Qt=Bn("number"),Ur=Bn("boolean");function $t(d){return!!(d&&d.then&&Ht(d.then))}var nn=V(zr,"getOwnPropertyDescriptor");function Ue(d,_){return!!d&&po.hasOwnProperty[yr](d,_)}var Kn=U(V(zr,"hasOwn"),Dt);function Dt(d,_){return Ue(d,_)||!!nn(d,_)}function br(d,_,w){if(d&&$i(d)){for(var D in d)if(Kn(d,D)&&_[yr](w||d,D,d[D])===-1)break}}var ei={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function qi(d){var _={};if(_[ei.c]=!0,_[ei.e]=!0,d.l){_.get=function(){return d.l.v};var w=nn(d.l,"v");w&&w.set&&(_.set=function(D){d.l.v=D})}return br(d,function(D,k){_[ei[D]]=Lt(k)?_[ei[D]]:k}),_}var Gr=V(zr,"defineProperty");function yn(d,_,w){return Gr(d,_,qi(w))}function Bi(d,_,w,D,k){var $={};return br(d,function(q,W){ga($,q,_?W:q,k),ga($,W,w?W:q,k)}),D?D($):$}function ga(d,_,w,D){Gr(d,_,{value:w,enumerable:!0,writable:!!D})}var xr=U(Yi),rr="[object Error]";function fr(d,_){var w=de,D=po[Sr][yr](d);D===rr&&(d={stack:xr(d.stack),message:xr(d.message),name:xr(d.name)});try{w=JSON.stringify(d,pe,_?typeof _=="number"?_:4:Q),w=(w?w.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):pe)||xr(d)}catch(k){w=" - "+fr(k,_)}return D+": "+w}function jr(d){throw new TypeError(d)}var jf=V(zr,"freeze");function Sn(d){return d}function bl(d){return d[Ae]||pe}var Dc=V(zr,"assign"),bn=V(zr,"keys");function qa(d){return jf&&br(d,function(_,w){(zt(w)||$i(w))&&qa(w)}),or(d)}var or=U(jf,Sn),xn=U(V(zr,"getPrototypeOf"),bl);function zn(d){return Bi(d,1,0,or)}function mo(d){return Bi(d,0,0,or)}var ws=mo({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Cc="__tsUtils$gblCfg",El;function ho(){var d;return typeof globalThis!==tt&&(d=globalThis),!d&&typeof self!==tt&&(d=self),!d&&typeof window!==tt&&(d=window),!d&&typeof global!==tt&&(d=global),d}function $o(){if(!El){var d=Tr(ho).v||{};El=d[Cc]=d[Cc]||{}}return El}var kn=_o;function _o(d,_,w){var D=_?_[d]:pe;return function(k){var $=(k?k[d]:pe)||D;if($||w){var q=arguments;return($||w).apply(k,$?Ve[yr](q,1):q)}jr('"'+xr(d)+'" not defined for '+fr(k))}}var Ts=V(Cn,"max"),ya=kn("slice",Kr),Uu=kn("substring",Kr),Is=_o("substr",Kr,Nr);function Nr(d,_,w){return rt(d)&&jr("Invalid "+fr(d)),w<0?de:(_=_||0,_<0&&(_=Ts(_+d[Nt],0)),Ot(w)?ya(d,_):ya(d,_,_+w))}function Or(d,_){return Uu(d,0,_)}var ti="_urid",zi;function dn(){if(!zi){var d=$o();zi=d.gblSym=d.gblSym||{k:{},s:{}}}return zi}var ri;function ni(d){var _={description:xr(d),toString:function(){return ct+"("+d+")"}};return _[Qe]=!0,_}function Ns(d){var _=dn();if(!Kn(_.k,d)){var w=ni(d),D=bn(_.s).length;w[ti]=function(){return D+"_"+w[Sr]()},_.k[d]=w,_.s[w[ti]()]=xr(d)}return _.k[d]}function Fd(d){!ri&&(ri={});var _,w=ws[d];return w&&(_=ri[w]=ri[w]||ni(ct+"."+w)),_}var an;function go(){an=$o()}function qo(d){return Gr({toJSON:function(){return d}},"v",{value:d})}var On="window",Bo;function ou(d,_){var w;return function(){return!an&&go(),(!w||an.lzy)&&(w=qo(Tr(d,_).v)),w.v}}function Ba(d){return!an&&go(),(!Bo||d===!1||an.lzy)&&(Bo=qo(Tr(ho).v||pe)),Bo.v}function on(d,_){var w;if(!Bo||_===!1?w=Ba(_):w=Bo.v,w&&w[d])return w[d];if(d===On)try{return window}catch{}return pe}var Mn=ou(on,["document"]);function ju(){return!!ai()}var ai=ou(on,[On]);function Ir(){return!!sa()}var sa=ou(on,["navigator"]),Yf=ou(function(){return!!Tr(function(){return process&&(process.versions||{}).node}).v}),Sa,zo;function xc(){return Sa=qo(Tr(on,[ct]).v),Sa}function Go(d){var _=(an.lzy?0:Sa)||xc();return _.v?_.v[d]:Q}function $f(){return!!Qr()}function Qr(){return!an&&go(),((an.lzy?0:Sa)||xc()).v}function wl(d,_){var w=ws[d];!an&&go();var D=(an.lzy?0:Sa)||xc();return D.v?D.v[w||d]:_?Q:Fd(d)}function za(d,_){!an&&go();var w=(an.lzy?0:Sa)||xc();return w.v?w.v(d):_?pe:ni(d)}function Ud(d){return!an&&go(),zo=(an.lzy?0:zo)||qo(Tr(Go,["for"]).v),(zo.v||Ns)(d)}function ii(d){return!!d&&Ht(d.next)}function Up(d){return!gn(d)&&Ht(d[wl(3)])}var oi;function Tl(d,_,w){if(d&&(ii(d)||(!oi&&(oi=qo(wl(3))),d=d[oi.v]?d[oi.v]():pe),ii(d))){var D=Q,k=Q;try{for(var $=0;!(k=d.next()).done&&_[yr](w||d,k.value,$,d)!==-1;)$++}catch(q){D={e:q},d.throw&&(k=pe,d.throw(D))}finally{try{k&&!k.done&&d.return&&d.return(k)}finally{if(D)throw D.e}}}}function Gi(d,_,w){return d.apply(_,w)}function qf(d,_){return!Ot(_)&&d&&(zt(_)?Gi(d.push,d,_):ii(_)||Up(_)?Tl(_,function(w){d.push(w)}):d.push(_)),d}function vr(d,_,w){if(d)for(var D=d[Nt]>>>0,k=0;k<D&&!(k in d&&_[yr](w||d,d[k],k,d)===-1);k++);}var Vo=kn("indexOf",vo);function Bf(d,_,w){return((d?d.slice:pe)||Ve).apply(d,Ve[yr](arguments,1))}var Ga=U(V(zr,"create"),Pc);function Pc(d){if(!d)return{};var _=typeof d;_!==ne&&_!==ue&&jr("Prototype must be an Object or function: "+fr(d));function w(){}return w[ye]=d,new w}var xt;function si(d,_){var w=zr.setPrototypeOf||function(D,k){var $;!xt&&(xt=qo(($={},$[Ae]=[],$ instanceof Array))),xt.v?D[Ae]=k:br(k,function(q,W){return D[q]=W})};return w(d,_)}function Yu(d,_,w){Tr(yn,[_,kt,{v:d,c:!0,e:!1}]),_=si(_,w);function D(){this[Ke]=_,Tr(yn,[this,kt,{v:d,c:!0,e:!1}])}return _[ye]=w===pe?Ga(w):(D[ye]=w[ye],new D),_}function Il(d,_){_&&(d[kt]=_)}function kv(d,_,w){var D=w||Error,k=D[ye][kt],$=Error.captureStackTrace;return Yu(d,function(){var q=this,W=arguments;try{Tr(Il,[D,d]);var ie=Gi(D,q,Ve[yr](W))||q;if(ie!==q){var oe=xn(q);oe!==xn(ie)&&si(ie,oe)}return $&&$(ie,q[Ke]),_&&_(ie,W),ie}finally{Tr(Il,[D,k])}},D)}function Ei(){return(Date.now||Nl)()}function Nl(){return new Date().getTime()}function jd(d){return function(w){return rt(w)&&jr("strTrim called ["+fr(w)+"]"),w&&w.replace&&(w=w.replace(d,de)),w}}var su=jd(/^\s+|(?=\s)\s+$/g),wi=_o("trim",Kr,su),dt,ua,uu;function Ds(d){if(!d||typeof d!==ne)return!1;uu||(uu=ju()?ai():!0);var _=!1;if(d!==uu){ua||(dt=Function[ye][Sr],ua=dt[yr](zr));try{var w=xn(d);_=!w,_||(Ue(w,Ke)&&(w=w[Ke]),_=!!(w&&typeof w===ue&&dt[yr](w)===ua))}catch{}}return _}function Yd(){return Ei()}var $d=kn("indexOf",Kr),Wn=_o("startsWith",Kr,ui);function ui(d,_,w){Nc(d)||jr("'"+fr(d)+"' is not a string");var D=Nc(_)?_:xr(_),k=w>0?w:0;return Uu(d,k,k+D[Nt])===D}var qd="ref",Ti="unref",Va="hasRef",Im="enabled";function Ov(d,_,w){var D=!0,k=d?_(pe):pe,$;function q(){return D=!1,k&&k[Ti]&&k[Ti](),$}function W(){k&&w(k),k=pe}function ie(){return k=_(k),D||q(),$}function oe(De){!De&&k&&W(),De&&!k&&ie()}return $={cancel:W,refresh:ie},$[Va]=function(){return k&&k[Va]?k[Va]():D},$[qd]=function(){return D=!0,k&&k[qd]&&k[qd](),$},$[Ti]=q,$=Gr($,Im,{get:function(){return!!k},set:oe}),{h:$,dn:function(){k=pe}}}function jp(d,_,w){var D=zt(_),k=D?_.length:0,$=(k>0?_[0]:D?Q:_)||setTimeout,q=(k>1?_[1]:Q)||clearTimeout,W=w[0];w[0]=function(){ie.dn(),Gi(W,Q,Ve[yr](arguments))};var ie=Ov(d,function(oe){if(oe){if(oe.refresh)return oe.refresh(),oe;Gi(q,Q,[oe])}return Gi($,Q,w)},function(oe){Gi(q,Q,[oe])});return ie.h}function cu(d,_){return jp(!0,Q,Ve[yr](arguments))}function Yp(d,_,w){return jp(!0,d,Ve[yr](arguments,1))}(Ba()||{}).Symbol,(Ba()||{}).Reflect;var sh="hasOwnProperty",Bd=function(d,_){return Bd=N.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,D){w.__proto__=D}||function(w,D){for(var k in D)D[sh](k)&&(w[k]=D[k])},Bd(d,_)};function xa(d,_){typeof _!==s&&_!==null&&jr("Class extends value "+String(_)+" is not a constructor or null"),Bd(d,_);function w(){this.constructor=d}d[b]=_===null?Ga(_):(w[b]=_[b],new w)}var Dl,Cl="constructor",Vi="prototype",ci="function",lu="_dynInstFuncs",$p="_isDynProxy",Ii="_dynClass",zd="_dynCls$",$u="_dynInstChk",Ac=$u,xl="_dfOpts",zf="_unknown_",Gd="__proto__",qp="_dyn"+Gd,Bp="__dynProto$Gbl",fu="_dynInstProto",Vd="useBaseInst",Cs="setInstFuncs",qu=Object,Ni=qu.getPrototypeOf,Pl=qu.getOwnPropertyNames,Gf=Ba(),Rc=Gf[Bp]||(Gf[Bp]={o:(Dl={},Dl[Cs]=!0,Dl[Vd]=!0,Dl),n:1e3});function Hi(d){return d&&(d===qu[Vi]||d===Array[Vi])}function Mv(d){return Hi(d)||d===Function[Vi]}function Ho(d){var _;if(d){if(Ni)return Ni(d);var w=d[Gd]||d[Vi]||(d[Cl]?d[Cl][Vi]:null);_=d[qp]||w,Ue(d,qp)||(delete d[fu],_=d[qp]=d[fu]||d[qp],d[fu]=w)}return _}function yo(d,_){var w=[];if(Pl)w=Pl(d);else for(var D in d)typeof D=="string"&&Ue(d,D)&&w.push(D);if(w&&w.length>0)for(var k=0;k<w.length;k++)_(w[k])}function Ki(d,_,w){return _!==Cl&&typeof d[_]===ci&&(w||Ue(d,_))&&_!==Gd&&_!==Vi}function du(d){jr("DynamicProto: "+d)}function Vf(d){var _=Ga(null);return yo(d,function(w){!_[w]&&Ki(d,w,!1)&&(_[w]=d[w])}),_}function kc(d,_){for(var w=d.length-1;w>=0;w--)if(d[w]===_)return!0;return!1}function Oc(d,_,w,D){function k(ie,oe,De){var $e=oe[De];if($e[$p]&&D){var je=ie[lu]||{};je[Ac]!==!1&&($e=(je[oe[Ii]]||{})[De]||$e)}return function(){return $e.apply(ie,arguments)}}var $=Ga(null);yo(w,function(ie){$[ie]=k(_,w,ie)});for(var q=Ho(d),W=[];q&&!Mv(q)&&!kc(W,q);)yo(q,function(ie){!$[ie]&&Ki(q,ie,!Ni)&&($[ie]=k(_,q,ie))}),W.push(q),q=Ho(q);return $}function Bu(d,_,w,D){var k=null;if(d&&Ue(w,Ii)){var $=d[lu]||Ga(null);if(k=($[w[Ii]]||Ga(null))[_],k||du("Missing ["+_+"] "+ci),!k[$u]&&$[Ac]!==!1){for(var q=!Ue(d,_),W=Ho(d),ie=[];q&&W&&!Mv(W)&&!kc(ie,W);){var oe=W[_];if(oe){q=oe===D;break}ie.push(W),W=Ho(W)}try{q&&(d[_]=k),k[$u]=1}catch{$[Ac]=!1}}}return k}function Hf(d,_,w){var D=_[d];return D===w&&(D=Ho(_)[d]),typeof D!==ci&&du("["+d+"] is not a "+ci),D}function Al(d,_,w,D,k){function $(ie,oe){var De=function(){var $e=Bu(this,oe,ie,De)||Hf(oe,ie,De);return $e.apply(this,arguments)};return De[$p]=1,De}if(!Hi(d)){var q=w[lu]=w[lu]||Ga(null);if(!Hi(q)){var W=q[_]=q[_]||Ga(null);q[Ac]!==!1&&(q[Ac]=!!k),Hi(W)||yo(w,function(ie){Ki(w,ie,!1)&&w[ie]!==D[ie]&&(W[ie]=w[ie],delete w[ie],(!Ue(d,ie)||d[ie]&&!d[ie][$p])&&(d[ie]=$(d,ie)))})}}}function Kf(d,_){if(Ni){for(var w=[],D=Ho(_);D&&!Mv(D)&&!kc(w,D);){if(D===d)return!0;w.push(D),D=Ho(D)}return!1}return!0}function zu(d,_){return Ue(d,Vi)?d.name||_||zf:((d||{})[Cl]||{}).name||_||zf}function Wi(d,_,w,D){Ue(d,Vi)||du("theClass is an invalid class definition.");var k=d[Vi];Kf(k,_)||du("["+zu(d)+"] not in hierarchy of ["+zu(_)+"]");var $=null;Ue(k,Ii)?$=k[Ii]:($=zd+zu(d,"_")+"$"+Rc.n,Rc.n++,k[Ii]=$);var q=Wi[xl],W=!!q[Vd];W&&D&&D[Vd]!==void 0&&(W=!!D[Vd]);var ie=Vf(_),oe=Oc(k,_,ie,W);w(_,oe);var De=!!Ni&&!!q[Cs];De&&D&&(De=!!D[Cs]),Al(k,$,_,ie,De!==!1)}Wi[xl]=Rc.o;var Mc=zn,So=Mc({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),li="toLowerCase",Ko="blkVal",Vr="length",xs="rdOnly",Ji="notify",Lc="warnToConsole",Fc="throwInternal",Wo="setDf",Rl="watch",Jo="logger",pu="apply",Ha="push",Hd="splice",Gu="hdlr",Pa="cancel",Wf="initialize",Kd="identifier",kl="isInitialized",Ol="value",Wd="getPlugin",Lv="name",Vu="time",bo="processNext",Zi="getProcessTelContext",pn="unload",Ml="loggingLevelConsole",Hu="createNew",Ku="teardown",Jd="messageId",Di="message",vu="isAsync",Ps="diagLog",sr="_doTeardown",Eo="update",Zo="getNext",Ci="setNextPlugin",Jf="protocol",xi="userAgent",mu="split",sn="nodeType",Ka="replace",Mr="logInternalMessage",pt="type",Wu="handler",wo="status",As="getResponseHeader",Xi="getAllResponseHeaders",hu="isChildEvt",Pi="data",Yr="getCtx",To="setCtx",Lr="complete",Io="urlString",Zf="sendPOST",No="headers",Pn="timeout",Qi="setRequestHeader",Xo;function ba(d,_){Xo||(Xo=kv("AggregationError",function(D,k){k[Vr]>1&&(D.errors=k[1])}));var w=d||"One or more errors occurred.";throw vr(_,function(D,k){w+=`
`.concat(k," > ").concat(fr(D))}),new Xo(w,_||[])}var Aa="Promise",Uc="rejected";function Ju(d,_){return Xf(d,function(w){return _?_({status:"fulfilled",rejected:!1,value:w}):w},function(w){return _?_({status:Uc,rejected:!0,reason:w}):w})}function Xf(d,_,w,D){var k=d;try{if($t(d))(_||w)&&(k=d.then(_,w));else try{_&&(k=_(d))}catch($){if(w)k=w($);else throw $}}finally{D&&Rs(k,D)}return k}function Rs(d,_){var w=d;return _&&($t(d)?d.finally?w=d.finally(_):w=d.then(function(D){return _(),D},function(D){throw _(),D}):_()),w}var Do=["pending","resolving","resolved",Uc],Co="dispatchEvent",Zu;function xo(d){var _;return d&&d.createEvent&&(_=d.createEvent("Event")),!!_&&_.initEvent}function Ln(d,_,w,D){var k=Mn();!Zu&&(Zu=qo(!!Tr(xo,[k]).v));var $=Zu.v?k.createEvent("Event"):D?new Event(_):{};if(w&&w($),Zu.v&&$.initEvent(_,!1,!0),$&&d[Co])d[Co]($);else{var q=d["on"+_];if(q)q($);else{var W=on("console");W&&(W.error||W.log)(_,fr($))}}}var Qf="unhandledRejection",Xu=Qf.toLowerCase(),ks=10,fi;function Qo(d){return Ht(d)?d.toString():fr(d)}function Os(d,_,w){var D=Bf(arguments,3),k=0,$=!1,q,W=[],ie=!1,oe=null,De;function $e(Te,qe){try{ie=!0,oe&&oe.cancel(),oe=null;var Bt=d(function(Wt,ar){W.push(function(){try{var Dr=k===2?Te:qe,Fr=Ot(Dr)?q:Ht(Dr)?Dr(q):Dr;$t(Fr)?Fr.then(Wt,ar):Dr?Wt(Fr):k===3?ar(Fr):Wt(Fr)}catch(cn){ar(cn)}}),$&&Fe()},D);return Bt}finally{}}function je(Te){return $e(void 0,Te)}function Ne(Te){var qe=Te,Bt=Te;return Ht(Te)&&(qe=function(Wt){return Te&&Te(),Wt},Bt=function(Wt){throw Te&&Te(),Wt}),$e(qe,Bt)}function ve(){return Do[k]}function Fe(){if(W.length>0){var Te=W.slice();W=[],ie=!0,oe&&oe.cancel(),oe=null,_(Te)}}function we(Te,qe){return function(Bt){if(k===qe){if(Te===2&&$t(Bt)){k=1,Bt.then(we(2,1),we(3,1));return}k=Te,$=!0,q=Bt,Fe(),!ie&&Te===3&&!oe&&(oe=cu(He,ks))}}}function He(){if(!ie)if(ie=!0,Yf())process.emit(Qf,q,De);else{var Te=ai()||Ba();!fi&&(fi=qo(Tr(on,[Aa+"RejectionEvent"]).v)),Ln(Te,Xu,function(qe){return yn(qe,"promise",{g:function(){return De}}),qe.reason=q,qe},!!fi.v)}}De={then:$e,catch:je,finally:Ne},Gr(De,"state",{get:ve}),$f()&&(De[wl(11)]="IPromise");function Ce(){return"IPromise "+ve()+($?" - "+Qo(q):"")}return De.toString=Ce,function(){Ht(w)||jr(Aa+": executor is not a function - "+Qo(w));var qe=we(3,0);try{w.call(De,we(2,0),qe)}catch(Bt){qe(Bt)}}(),De}function Ai(d){vr(d,function(_){try{_()}catch{}})}function jc(d){var _=Qt(d)?d:0;return function(w){cu(function(){Ai(w)},_)}}function _u(d,_){return Os(_u,jc(_),d,_)}var ca;function gu(d,_){!ca&&(ca=qo(Tr(on,[Aa]).v||null));var w=ca.v;if(!w)return _u(d);Ht(d)||jr(Aa+": executor is not a function - "+fr(d));var D=0;function k(){return Do[D]}var $=new w(function(q,W){function ie(De){D=2,q(De)}function oe(De){D=3,W(De)}d(ie,oe)});return Gr($,"state",{get:k}),$}var Ms;function Ri(d,_){return!Ms&&(Ms=qo(gu)),Ms.v.call(this,d,_)}var Qu=void 0,un="",Jn="core",ki="disabled",ec="extensionConfig",es="processTelemetry",Zd="priority",di="getPerfMgr",Yc="Not dynamic - ",Ea=/-([a-z])/g,ed=/([^\w\d_$])/g,Wa=/^(\d+[\w\d_$])/;function ts(d){return!rt(d)}function rs(d){var _=d;return _&&Nc(_)&&(_=_[Ka](Ea,function(w,D){return D.toUpperCase()}),_=_[Ka](ed,"_"),_=_[Ka](Wa,function(w,D){return"_"+D})),_}function Xd(d,_){return d&&_?$d(d,_)!==-1:!1}function Ll(d,_){var w=null,D=null;return Ht(d)?w=d:D=d,function(){var k=arguments;if(w&&(D=w()),D)return D[_][pu](D,k)}}function td(d,_,w,D,k){d&&_&&w&&(k!==!1||Ot(d[_]))&&(d[_]=Ll(w,D))}function Fl(d,_,w,D){return d&&_&&$i(d)&&zt(w)&&vr(w,function(k){Nc(k)&&td(d,k,_,k,D)}),d}function Po(d){return d&&Dc&&(d=N(Dc({},d))),d}function Ja(d){try{return d.responseText}catch{}return null}function $c(d,_){return d?"XDomainRequest,Response:"+Ja(d)||"":_}function Fv(d,_){return d?"XMLHttpRequest,Status:"+d[wo]+",Response:"+Ja(d)||d.response||"":_}function tc(d,_){return _&&(Qt(_)?d=[_].concat(d):zt(_)&&(d=_.concat(d))),d}var rc="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",ns="withCredentials",Ul="timeout";function Nm(d,_,w,D,k,$){D===void 0&&(D=!1),k===void 0&&(k=!1);function q(ie,oe,De){try{ie[oe]=De}catch{}}var W=new XMLHttpRequest;return D&&q(W,rc,D),w&&q(W,ns,w),W.open(d,_,!k),w&&q(W,ns,w),!k&&$&&q(W,Ul,$),W}function Qd(d){var _={};if(Nc(d)){var w=wi(d)[mu](/[\r\n]+/);vr(w,function(D){if(D){var k=D.indexOf(": ");if(k!==-1){var $=wi(D.substring(0,k))[li](),q=wi(D.substring(k+1));_[$]=q}else _[wi(D)]=1}})}return _}function jl(d,_,w){if(!d[w]&&_&&_[As]){var D=_[As](w);D&&(d[w]=wi(D))}return d}var nc="kill-duration",zp="kill-duration-seconds",Uv="time-delta-millis";function ac(d,_){var w={};return d[Xi]?w=Qd(d[Xi]()):_&&(w=jl(w,d,Uv),w=jl(w,d,nc),w=jl(w,d,zp)),w}var jv="location",Yl="console",ep="JSON",eo="crypto",Gp="msCrypto",Dm="ReactNative",rd="msie",Vp="trident/",tp="XMLHttpRequest",qc=null,nd=null,ic=!1,Ls=null,Bc=null;function Yv(d,_){var w=!1;if(d){try{if(w=_ in d,!w){var D=d[b];D&&(w=_ in D)}}catch{}if(!w)try{var k=new d;w=!Ot(k[_])}catch{}}return w}function rp(d){if(d&&ic){var _=on("__mockLocation");if(_)return _}return typeof location===u&&location?location:on(jv)}function zc(){return typeof console!==h?console:on(Yl)}function np(){return!!(typeof JSON===u&&JSON||on(ep)!==null)}function Fs(){return np()?JSON||on(ep):null}function $r(){return on(eo)}function oc(){return on(Gp)}function la(){var d=sa();return d&&d.product?d.product===Dm:!1}function ap(){var d=sa();if(d&&(d[xi]!==nd||qc===null)){nd=d[xi];var _=(nd||un)[li]();qc=Xd(_,rd)||Xd(_,Vp)}return qc}function ad(d){return(Bc===null||d===!1)&&(Bc=Ir()&&!!sa().sendBeacon),Bc}function Gc(d){var _=!1;try{_=!!on("fetch");var w=on("Request");_&&d&&w&&(_=Yv(w,"keepalive"))}catch{}return _}function sc(){return Ls===null&&(Ls=typeof XDomainRequest!==h,Ls&&Za()&&(Ls=Ls&&!Yv(on(tp),"withCredentials"))),Ls}function Za(){var d=!1;try{var _=on(tp);d=!!_}catch{}return d}var id=4294967296,Zn=4294967295,dr=123456789,Us=987654321,mn=!1,as=dr,uc=Us;function cc(d){d<0&&(d>>>=0),as=dr+d&Zn,uc=Us-d&Zn,mn=!0}function js(){try{var d=Ei()&2147483647;cc((Math.random()*id^d)+d)}catch{}}function to(d){var _=0,w=$r()||oc();return w&&w.getRandomValues&&(_=w.getRandomValues(new Uint32Array(1))[0]&Zn),_===0&&ap()&&(mn||js(),_=$l()&Zn),_===0&&(_=Math.floor(id*Math.random()|0)),d||(_>>>=0),_}function $l(d){uc=36969*(uc&65535)+(uc>>16)&Zn,as=18e3*(as&65535)+(as>>16)&Zn;var _=(uc<<16)+(as&65535)>>>0&Zn|0;return d||(_>>>=0),_}function Hp(d){d===void 0&&(d=22);for(var _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=to()>>>0,D=0,k=un;k[Vr]<d;)D++,k+=_.charAt(w&63),w>>>=6,D===5&&(w=(to()<<2&4294967295|w&3)>>>0,D=0);return k}var ql="3.3.4",Kp="."+Hp(6),Bl=0;function Vc(d){return d[sn]===1||d[sn]===9||!+d[sn]}function ip(d,_){var w=_[d.id];if(!w){w={};try{Vc(_)&&yn(_,d.id,{e:!1,v:w})}catch{}}return w}function Gn(d,_){return _===void 0&&(_=!1),rs(d+Bl+++(_?"."+ql:un)+Kp)}function Hc(d){var _={id:Gn("_aiData-"+(d||un)+"."+ql),accept:function(w){return Vc(w)},get:function(w,D,k,$){var q=w[_.id];return q?q[rs(D)]:($&&(q=ip(_,w),q[rs(D)]=k),k)},kill:function(w,D){if(w&&w[D])try{delete w[D]}catch{}}};return _}function fa(d){return d&&$i(d)&&(d.isVal||d.fb||Kn(d,"v")||Kn(d,"mrg")||Kn(d,"ref")||d.set)}function yu(d,_,w){var D,k=w.dfVal||at;if(_&&w.fb){var $=w.fb;zt($)||($=[$]);for(var q=0;q<$[Vr];q++){var W=$[q],ie=_[W];if(k(ie)?D=ie:d&&(ie=d.cfg[W],k(ie)&&(D=ie),d.set(d.cfg,xr(W),ie)),k(D))break}}return!k(D)&&k(w.v)&&(D=w.v),D}function op(d,_,w){var D=w;if(w&&fa(w)&&(D=yu(d,_,w)),D){fa(D)&&(D=op(d,_,D));var k;zt(D)?(k=[],k[Vr]=D[Vr]):Ds(D)&&(k={}),k&&(br(D,function($,q){q&&fa(q)&&(q=op(d,_,q)),k[$]=q}),D=k)}return D}function od(d,_,w,D){var k,$,q,W=D,ie,oe,De,$e;fa(W)?(k=W.isVal,$=W.set,De=W[xs],$e=W[Ko],ie=W.mrg,oe=W.ref,!oe&&Ot(oe)&&(oe=!!ie),q=yu(d,_,W)):q=D,$e&&d[Ko](_,w);var je,Ne=!0,ve=_[w];(ve||!rt(ve))&&(je=ve,Ne=!1,k&&je!==q&&!k(je)&&(je=q,Ne=!0),$&&(je=$(je,q,_),Ne=je===q)),Ne?q?je=op(d,_,q):je=q:(Ds(je)||zt(q))&&ie&&q&&(Ds(q)||zt(q))&&br(q,function(Fe,we){od(d,je,Fe,we)}),d.set(_,w,je),oe&&d.ref(_,w),De&&d[xs](_,w)}var da=Ud("[[ai_dynCfg_1]]"),sd=Ud("[[ai_blkDynCfg_1]]"),sp=Ud("[[ai_frcDynCfg_1]]");function Ys(d){if(d){var _;if(zt(d)?(_=[],_[Vr]=d[Vr]):Ds(d)&&(_={}),_)return br(d,function(w,D){_[w]=Ys(D)}),_}return d}function bt(d){if(d){var _=d[da]||d;if(_.cfg&&(_.cfg===d||_.cfg[da]===_))return _}return null}function is(d){if(d&&(Ds(d)||zt(d)))try{d[sd]=!0}catch{}return d}function os(d,_,w){var D=!1;return w&&!d[_.blkVal]&&(D=w[sp],!D&&!w[sd]&&(D=Ds(w)||zt(w))),D}function pi(d){jr("InvalidAccess:"+d)}var zl=["push","pop","shift","unshift","splice"],Kc=function(d,_,w,D){d&&d[Fc](3,108,"".concat(w," [").concat(_,"] failed - ")+fr(D))};function ss(d,_,w){zt(_)&&vr(zl,function(D){var k=_[D];_[D]=function(){for(var $=[],q=0;q<arguments.length;q++)$[q]=arguments[q];var W=k[pu](this,$);return Gl(d,_,w,"Patching"),W}})}function Oi(d,_){var w=nn(d,_);return w&&w.get}function Wc(d,_,w,D){var k={n:w,h:[],trk:function(oe){oe&&oe.fn&&(Vo(k.h,oe)===-1&&k.h[Ha](oe),d.trk(oe,k))},clr:function(oe){var De=Vo(k.h,oe);De!==-1&&k.h[Hd](De,1)}},$=!0,q=!1;function W(){$&&(q=q||os(W,d,D),D&&!D[da]&&q&&(D=Gl(d,D,w,"Converting")),$=!1);var oe=d.act;return oe&&k.trk(oe),D}W[d.prop]={chng:function(){d.add(k)}};function ie(oe){if(D!==oe){W[d.ro]&&!d.upd&&pi("["+w+"] is read-only:"+fr(_)),$&&(q=q||os(W,d,D),$=!1);var De=q&&W[d.rf];if(q)if(De){br(D,function(je){D[je]=oe?oe[je]:Qu});try{br(oe,function(je,Ne){ud(d,D,je,Ne)}),oe=D}catch(je){Kc((d.hdlr||{})[Jo],w,"Assigning",je),q=!1}}else D&&D[da]&&br(D,function(je){var Ne=Oi(D,je);if(Ne){var ve=Ne[d.prop];ve&&ve.chng()}});if(oe!==D){var $e=oe&&os(W,d,oe);!De&&$e&&(oe=Gl(d,oe,w,"Converting")),D=oe,q=$e}d.add(k)}}yn(_,k.n,{g:W,s:ie})}function ud(d,_,w,D){if(_){var k=Oi(_,w),$=k&&!!k[d.prop];$?_[w]=D:Wc(d,_,w,D)}return _}function $s(d,_,w,D){if(_){var k=Oi(_,w),$=k&&!!k[d.prop],q=D&&D[0],W=D&&D[1],ie=D&&D[2];if(!$){if(ie)try{is(_)}catch(oe){Kc((d.hdlr||{})[Jo],w,"Blocking",oe)}try{ud(d,_,w,_[w]),k=Oi(_,w)}catch(oe){Kc((d.hdlr||{})[Jo],w,"State",oe)}}q&&(k[d.rf]=q),W&&(k[d.ro]=W),ie&&(k[d.blkVal]=!0)}return _}function Gl(d,_,w,D){try{br(_,function(k,$){ud(d,_,k,$)}),_[da]||(Gr(_,da,{get:function(){return d[Gu]}}),ss(d,_,w))}catch(k){Kc((d.hdlr||{})[Jo],w,D,k)}return _}var Jc="[[ai_",Vl="]]";function up(d){var _,w=za(Jc+"get"+d.uid+Vl),D=za(Jc+"ro"+d.uid+Vl),k=za(Jc+"rf"+d.uid+Vl),$=za(Jc+"blkVal"+d.uid+Vl),q=za(Jc+"dtl"+d.uid+Vl),W=null,ie=null,oe;function De(ve,Fe){var we=oe.act;try{oe.act=ve,ve&&ve[q]&&(vr(ve[q],function(Ce){Ce.clr(ve)}),ve[q]=[]),Fe({cfg:d.cfg,set:d.set.bind(d),setDf:d[Wo].bind(d),ref:d.ref.bind(d),rdOnly:d[xs].bind(d)})}catch(Ce){var He=d[Jo];throw He&&He[Fc](1,107,fr(Ce)),Ce}finally{oe.act=we||null}}function $e(){if(W){var ve=W;W=null,ie&&ie[Pa](),ie=null;var Fe=[];if(vr(ve,function(we){if(we&&(we[q]&&(vr(we[q],function(He){He.clr(we)}),we[q]=null),we.fn))try{De(we,we.fn)}catch(He){Fe[Ha](He)}}),W)try{$e()}catch(we){Fe[Ha](we)}Fe[Vr]>0&&ba("Watcher error(s): ",Fe)}}function je(ve){if(ve&&ve.h[Vr]>0){W||(W=[]),ie||(ie=cu(function(){ie=null,$e()},0));for(var Fe=0;Fe<ve.h[Vr];Fe++){var we=ve.h[Fe];we&&Vo(W,we)===-1&&W[Ha](we)}}}function Ne(ve,Fe){if(ve){var we=ve[q]=ve[q]||[];Vo(we,Fe)===-1&&we[Ha](Fe)}}return oe=(_={prop:w,ro:D,rf:k},_[Ko]=$,_[Gu]=d,_.add=je,_[Ji]=$e,_.use=De,_.trk=Ne,_),oe}function cp(d,_){var w={fn:_,rm:function(){w.fn=null,d=null,_=null}};return yn(w,"toJSON",{v:function(){return"WatcherHandler"+(w.fn?"":"[X]")}}),d.use(w,_),w}function Wp(d,_,w){var D,k=bt(_);if(k)return k;var $=Gn("dyncfg",!0),q=_&&w!==!1?_:Ys(_),W;function ie(){W[Ji]()}function oe(He,Ce,Te){try{He=ud(W,He,Ce,Te)}catch(qe){Kc(d,Ce,"Setting value",qe)}return He[Ce]}function De(He){return cp(W,He)}function $e(He,Ce){W.use(null,function(Te){var qe=W.upd;try{Ot(Ce)||(W.upd=Ce),He(Te)}finally{W.upd=qe}})}function je(He,Ce){var Te;return $s(W,He,Ce,(Te={},Te[0]=!0,Te))[Ce]}function Ne(He,Ce){var Te;return $s(W,He,Ce,(Te={},Te[1]=!0,Te))[Ce]}function ve(He,Ce){var Te;return $s(W,He,Ce,(Te={},Te[2]=!0,Te))[Ce]}function Fe(He,Ce){return Ce&&br(Ce,function(Te,qe){od(we,He,Te,qe)}),He}var we=(D={uid:null,cfg:q},D[Jo]=d,D[Ji]=ie,D.set=oe,D[Wo]=Fe,D[Rl]=De,D.ref=je,D[xs]=Ne,D[Ko]=ve,D._block=$e,D);return yn(we,"uid",{c:!1,e:!1,w:!1,v:$}),W=up(we),Gl(W,q,"config","Creating"),we}function Cm(d,_){d?(d[Lc](_),d[Fc](2,108,_)):pi(_)}function us(d,_,w,D){var k=Wp(w,d||{},D);return _&&k[Wo](k.cfg,_),k}function qs(d,_,w){var D=d[da]||d;return D.cfg&&(D.cfg===d||D.cfg[da]===D)?D[Rl](_):(Cm(w,Yc+fr(d)),us(d,null,w)[Rl](_))}var cs="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Mi=null;function Bs(){var d=on("Microsoft");return d&&(Mi=d.ApplicationInsights),Mi}function Su(d){var _=Mi;return!_&&d.disableDbgExt!==!0&&(_=Mi||Bs()),_?_.ChromeDbgExt:null}var vi,Zc="warnToConsole",$v="AI (Internal): ",lc="AI: ",Jp="AITR_",Hl={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Xc=(vi={},vi[0]=null,vi[1]="errorToConsole",vi[2]=Zc,vi[3]="debugToConsole",vi);function Kl(d){return d?'"'+d[Ka](/\"/g,un)+'"':un}function zs(d,_){var w=zc();if(w){var D="log";w[d]&&(D=d),Ht(w[D])&&w[D](_)}}var Li=function(){function d(_,w,D,k){D===void 0&&(D=!1);var $=this;$[Jd]=_,$[Di]=(D?lc:$v)+_;var q=un;np()&&(q=Fs().stringify(k));var W=(w?" message:"+Kl(w):un)+(k?" props:"+Kl(q):un);$[Di]+=W}return d.dataType="MessageData",d}();function Qc(d,_){return(d||{})[Jo]||new Wl(_)}var Wl=function(){function d(_){this.identifier="DiagnosticLogger",this.queue=[];var w=0,D={},k,$,q,W,ie;Wi(d,this,function(oe){ie=$e(_||{}),oe.consoleLoggingLevel=function(){return k},oe[Fc]=function(ve,Fe,we,He,Ce){Ce===void 0&&(Ce=!1);var Te=new Li(Fe,we,Ce,He);if(W)throw fr(Te);var qe=Xc[ve]||Zc;if(Ot(Te[Di]))Ne("throw"+(ve===1?"Critical":"Warning"),Te);else{if(Ce){var Bt=+Te[Jd];!D[Bt]&&k>=ve&&(oe[qe](Te[Di]),D[Bt]=!0)}else k>=ve&&oe[qe](Te[Di]);De(ve,Te)}},oe.debugToConsole=function(ve){zs("debug",ve),Ne("warning",ve)},oe[Lc]=function(ve){zs("warn",ve),Ne("warning",ve)},oe.errorToConsole=function(ve){zs("error",ve),Ne("error",ve)},oe.resetInternalMessageCount=function(){w=0,D={}},oe[Mr]=De,oe[pn]=function(ve){ie&&ie.rm(),ie=null};function De(ve,Fe){if(!je()){var we=!0,He=Jp+Fe[Jd];if(D[He]?we=!1:D[He]=!0,we&&(ve<=$&&(oe.queue[Ha](Fe),w++,Ne(ve===1?"error":"warn",Fe)),w===q)){var Ce="Internal events throttle limit per PageView reached for this app.",Te=new Li(23,Ce,!1);oe.queue[Ha](Te),ve===1?oe.errorToConsole(Ce):oe[Lc](Ce)}}}function $e(ve){return qs(us(ve,Hl,oe).cfg,function(Fe){var we=Fe.cfg;k=we[Ml],$=we.loggingLevelTelemetry,q=we.maxMessageLimit,W=we.enableDebug})}function je(){return w>=q}function Ne(ve,Fe){var we=Su(_||{});we&&we[Ps]&&we[Ps](ve,Fe)}})}return d.__ieDyn=1,d}();function cd(d){return d||new Wl}function pa(d,_,w,D,k,$){$===void 0&&($=!1),cd(d)[Fc](_,w,D,k,$)}function Gs(d,_){cd(d)[Lc](_)}var va="ctx",ld="ParentContextKey",bu="ChildrenContextKey",fd=function(){function d(_,w,D){var k=this;if(k.start=Ei(),k[Lv]=_,k[vu]=D,k[hu]=function(){return!1},Ht(w)){var $;yn(k,"payload",{g:function(){return!$&&Ht(w)&&($=w(),w=null),$}})}k[Yr]=function(q){return q?q===d[ld]||q===d[bu]?k[q]:(k[va]||{})[q]:null},k[To]=function(q,W){if(q)if(q===d[ld])k[q]||(k[hu]=function(){return!0}),k[q]=W;else if(q===d[bu])k[q]=W;else{var ie=k[va]=k[va]||{};ie[q]=W}},k[Lr]=function(){var q=0,W=k[Yr](d[bu]);if(zt(W))for(var ie=0;ie<W[Vr];ie++){var oe=W[ie];oe&&(q+=oe[Vu])}k[Vu]=Ei()-k.start,k.exTime=k[Vu]-q,k[Lr]=function(){}}}return d.ParentContextKey="parent",d.ChildrenContextKey="childEvts",d}(),Ra="CoreUtils.doPerf";function ma(d,_,w,D,k){if(d){var $=d;if($[di]&&($=$[di]()),$){var q=void 0,W=$[Yr](Ra);try{if(q=$.create(_(),D,k),q){if(W&&q[To]&&(q[To](fd[ld],W),W[Yr]&&W[To])){var ie=W[Yr](fd[bu]);ie||(ie=[],W[To](fd[bu],ie)),ie[Ha](q)}return $[To](Ra,q),w(q)}}catch(oe){q&&q[To]&&q[To]("exception",oe)}finally{q&&$.fire(q),$[To](Ra,W)}}}return w()}var Zp=Hc("plugin");function Jl(d){return Zp.get(d,"state",{},!0)}var Zl="TelemetryPluginChain",Eu="_hasRun",qv="_getTelCtx",Bv=0;function Xl(d,_,w){for(;d;){if(d[Wd]()===w)return d;d=d[Zo]()}return ef([w],_.config||{},_)}function Xp(d,_,w,D){var k=null,$=[];_||(_=us({},null,w[Jo])),D!==null&&(k=D?Xl(d,w,D):d);var q={_next:ie,ctx:{core:function(){return w},diagLog:function(){return Qc(w,_.cfg)},getCfg:function(){return _.cfg},getExtCfg:De,getConfig:$e,hasNext:function(){return!!k},getNext:function(){return k},setNext:function(Ne){k=Ne},iterate:je,onComplete:W}};function W(Ne,ve){for(var Fe=[],we=2;we<arguments.length;we++)Fe[we-2]=arguments[we];Ne&&$[Ha]({func:Ne,self:Ot(ve)?q.ctx:ve,args:Fe})}function ie(){var Ne=k;if(k=Ne?Ne[Zo]():null,!Ne){var ve=$;ve&&ve[Vr]>0&&(vr(ve,function(Fe){try{Fe.func.call(Fe.self,Fe.args)}catch(we){pa(w[Jo],2,73,"Unexpected Exception during onComplete - "+fr(we))}}),$=[])}return Ne}function oe(Ne,ve){var Fe=null,we=_.cfg;if(we&&Ne){var He=we[ec];!He&&ve&&(He={}),we[ec]=He,He=_.ref(we,ec),He&&(Fe=He[Ne],!Fe&&ve&&(Fe={}),He[Ne]=Fe,Fe=_.ref(He,Ne))}return Fe}function De(Ne,ve){var Fe=oe(Ne,!0);return ve&&br(ve,function(we,He){if(rt(Fe[we])){var Ce=_.cfg[we];(Ce||!rt(Ce))&&(Fe[we]=Ce)}od(_,Fe,we,He)}),_[Wo](Fe,ve)}function $e(Ne,ve,Fe){Fe===void 0&&(Fe=!1);var we,He=oe(Ne,!1),Ce=_.cfg;return He&&(He[ve]||!rt(He[ve]))?we=He[ve]:(Ce[ve]||!rt(Ce[ve]))&&(we=Ce[ve]),we||!rt(we)?we:Fe}function je(Ne){for(var ve;ve=q._next();){var Fe=ve[Wd]();Fe&&Ne(Fe)}}return q}function Ql(d,_,w,D){var k=us(_),$=Xp(d,k,w,D),q=$.ctx;function W(oe){var De=$._next();return De&&De[es](oe,q),!De}function ie(oe,De){return oe===void 0&&(oe=null),zt(oe)&&(oe=ef(oe,k.cfg,w,De)),Ql(oe||q[Zo](),k.cfg,w,De)}return q[bo]=W,q[Hu]=ie,q}function Qp(d,_,w){var D=us(_.config),k=Xp(d,D,_,w),$=k.ctx;function q(ie){var oe=k._next();return oe&&oe[pn]($,ie),!oe}function W(ie,oe){return ie===void 0&&(ie=null),zt(ie)&&(ie=ef(ie,D.cfg,_,oe)),Qp(ie||$[Zo](),_,oe)}return $[bo]=q,$[Hu]=W,$}function zv(d,_,w){var D=us(_.config),k=Xp(d,D,_,w),$=k.ctx;function q(ie){return $.iterate(function(oe){Ht(oe[Eo])&&oe[Eo]($,ie)})}function W(ie,oe){return ie===void 0&&(ie=null),zt(ie)&&(ie=ef(ie,D.cfg,_,oe)),zv(ie||$[Zo](),_,oe)}return $[bo]=q,$[Hu]=W,$}function ef(d,_,w,D){var k=null,$=!D;if(zt(d)&&d[Vr]>0){var q=null;vr(d,function(W){if(!$&&D===W&&($=!0),$&&W&&Ht(W[es])){var ie=Gv(W,_,w);k||(k=ie),q&&q._setNext(ie),q=ie}})}return D&&!k?ef([D],_,w):k}function Gv(d,_,w){var D=null,k=Ht(d[es]),$=Ht(d[Ci]),q;d?q=d[Kd]+"-"+d[Zd]+"-"+Bv++:q="Unknown-0-"+Bv++;var W={getPlugin:function(){return d},getNext:function(){return D},processTelemetry:De,unload:$e,update:je,_id:q,_setNext:function(Ne){D=Ne}};function ie(){var Ne;return d&&Ht(d[qv])&&(Ne=d[qv]()),Ne||(Ne=Ql(W,_,w)),Ne}function oe(Ne,ve,Fe,we,He){var Ce=!1,Te=d?d[Kd]:Zl,qe=Ne[Eu];return qe||(qe=Ne[Eu]={}),Ne.setNext(D),d&&ma(Ne[Jn](),function(){return Te+":"+Fe},function(){qe[q]=!0;try{var Bt=D?D._id:un;Bt&&(qe[Bt]=!1),Ce=ve(Ne)}catch(ar){var Wt=D?qe[D._id]:!0;Wt&&(Ce=!0),(!D||!Wt)&&pa(Ne[Ps](),1,73,"Plugin ["+Te+"] failed during "+Fe+" - "+fr(ar)+", run flags: "+fr(qe))}},we,He),Ce}function De(Ne,ve){ve=ve||ie();function Fe(we){if(!d||!k)return!1;var He=Jl(d);return He[Ku]||He[ki]?!1:($&&d[Ci](D),d[es](Ne,we),!0)}oe(ve,Fe,"processTelemetry",function(){return{item:Ne}},!Ne.sync)||ve[bo](Ne)}function $e(Ne,ve){function Fe(){var we=!1;if(d){var He=Jl(d),Ce=d[Jn]||He[Jn];d&&(!Ce||Ce===Ne.core())&&!He[Ku]&&(He[Jn]=null,He[Ku]=!0,He[kl]=!1,d[Ku]&&d[Ku](Ne,ve)===!0&&(we=!0))}return we}oe(Ne,Fe,"unload",function(){},ve[vu])||Ne[bo](ve)}function je(Ne,ve){function Fe(){var we=!1;if(d){var He=Jl(d),Ce=d[Jn]||He[Jn];d&&(!Ce||Ce===Ne.core())&&!He[Ku]&&d[Eo]&&d[Eo](Ne,ve)===!0&&(we=!0)}return we}oe(Ne,Fe,"update",function(){},!1)||Ne[bo](ve)}return or(W)}function wu(){var d=[];function _(D){D&&d[Ha](D)}function w(D,k){vr(d,function($){try{$(D,k)}catch(q){pa(D[Ps](),2,73,"Unexpected error calling unload handler - "+fr(q))}}),d=[]}return{add:_,run:w}}function el(){var d=[];function _(D){var k=d;d=[],vr(k,function($){try{($.rm||$.remove).call($)}catch(q){pa(D,2,73,"Unloading:"+fr(q))}})}function w(D){D&&qf(d,D)}return{run:_,add:w}}var lp,ls="getPlugin",dd=(lp={},lp[ec]={isVal:ts,v:{}},lp),tf=function(){function d(){var _=this,w,D,k,$,q;oe(),Wi(d,_,function(De){De[Wf]=function($e,je,Ne,ve){ie($e,je,ve),w=!0},De[Ku]=function($e,je){var Ne,ve=De[Jn];if(!ve||$e&&ve!==$e[Jn]())return;var Fe,we=!1,He=$e||Qp(null,ve,k&&k[ls]?k[ls]():k),Ce=je||(Ne={reason:0},Ne[vu]=!1,Ne);function Te(){we||(we=!0,$.run(He,je),q.run(He[Ps]()),Fe===!0&&He[bo](Ce),oe())}return!De[sr]||De[sr](He,Ce,Te)!==!0?Te():Fe=!0,Fe},De[Eo]=function($e,je){var Ne=De[Jn];if(!Ne||$e&&Ne!==$e[Jn]())return;var ve,Fe=!1,we=$e||zv(null,Ne,k&&k[ls]?k[ls]():k),He=je||{reason:0};function Ce(){Fe||(Fe=!0,ie(we.getCfg(),we.core(),we[Zo]()))}return!De._doUpdate||De._doUpdate(we,He,Ce)!==!0?Ce():ve=!0,ve},td(De,"_addUnloadCb",function(){return $},"add"),td(De,"_addHook",function(){return q},"add"),yn(De,"_unloadHooks",{g:function(){return q}})}),_[Ps]=function(De){return W(De)[Ps]()},_[kl]=function(){return w},_.setInitialized=function(De){w=De},_[Ci]=function(De){k=De},_[bo]=function(De,$e){$e?$e[bo](De):k&&Ht(k[es])&&k[es](De,null)},_._getTelCtx=W;function W(De){De===void 0&&(De=null);var $e=De;if(!$e){var je=D||Ql(null,{},_[Jn]);k&&k[ls]?$e=je[Hu](null,k[ls]):$e=je[Hu](null,k)}return $e}function ie(De,$e,je){us(De,dd,Qc($e)),!je&&$e&&(je=$e[Zi]()[Zo]());var Ne=k;k&&k[ls]&&(Ne=k[ls]()),_[Jn]=$e,D=Ql(je,De,$e,Ne)}function oe(){w=!1,_[Jn]=null,D=null,k=null,q=el(),$=wu()}}return d.__ieDyn=1,d}(),Ao="",tl="NoResponseBody",Vv="&"+tl+"=true",rl="POST",xm=function(){function d(){var _=0,w,D,k,$,q,W,ie,oe,De,$e,je,Ne,ve,Fe;Wi(d,this,function(we,He){var Ce=!0;ea(),we[Wf]=function(Je,ft){k=ft,D&&pa(k,1,28,"Sender is already initialized"),we.SetConfig(Je),D=!0},we._getDbgPlgTargets=function(){return[D,$,W,w]},we.SetConfig=function(Je){try{if(q=Je.senderOnCompleteCallBack||{},W=!!Je.disableCredentials,ie=Je.fetchCredentials,$=!!Je.isOneDs,w=!!Je.enableSendPromise,De=!!Je.disableXhr,$e=!!Je.disableBeacon,je=!!Je.disableBeaconSync,Fe=Je.timeWrapper,ve=!!Je.addNoResponse,Ne=!!Je.disableFetchKeepAlive,oe={sendPOST:cn},$||(Ce=!1),W){var ft=rp();ft&&ft.protocol&&ft.protocol[li]()==="file:"&&(Ce=!1)}return!0}catch{}return!1},we.getSyncFetchPayload=function(){return _},we.getSenderInst=function(Je,ft){return Je&&Je[Vr]?Wt(Je,ft):null},we.getFallbackInst=function(){return oe},we[sr]=function(Je,ft){ea()};function Te(Je,ft){ar(ft,200,{},Je)}function qe(Je,ft){pa(k,2,26,"Failed to send telemetry.",{message:Je}),ar(ft,400,{})}function Bt(Je){qe("No endpoint url is provided for the batch",Je)}function Wt(Je,ft){for(var _r,ur=0,wt=null,Pr=0;wt==null&&Pr<Je[Vr];)ur=Je[Pr],!De&&ur===1?sc()?wt=Jt:Za()&&(wt=cn):ur===2&&Gc(ft)&&(!ft||!Ne)?wt=tn:ur===3&&ad()&&(ft?!je:!$e)&&(wt=Fr),Pr++;return wt?(_r={_transport:ur,_isSync:ft},_r[Zf]=wt,_r):null}function ar(Je,ft,_r,ur){try{Je&&Je(ft,_r,ur)}catch{}}function Dr(Je,ft){var _r=sa(),ur=Je[Io];if(!ur)return Bt(ft),!0;ur=Je[Io]+(ve?Vv:Ao);var wt=Je[Pi],Pr=$?wt:new Blob([wt],{type:"text/plain;charset=UTF-8"}),Tt=_r.sendBeacon(ur,Pr);return Tt}function Fr(Je,ft,_r){var ur=Je[Pi];try{if(ur)if(Dr(Je,ft))Te(Ao,ft);else{var wt=q&&q.beaconOnRetry;wt&&Ht(wt)?wt(Je,ft,Dr):(oe&&oe[Zf](Je,ft,!0),pa(k,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Pr){$&&Gs(k,"Failed to send telemetry using sendBeacon API. Ex:"+fr(Pr)),ar(ft,$?0:400,{},Ao)}}function cn(Je,ft,_r){var ur,wt,Pr,Tt=Je[No]||{};!_r&&w&&(ur=Ri(function(Tn,gi){wt=Tn,Pr=gi})),$&&_r&&Je.disableXhrSync&&(_r=!1);var Ma=Je[Io];if(!Ma){Bt(ft),wt&&wt(!1);return}var st=Nm(rl,Ma,Ce,!0,_r,Je[Pn]);$||st[Qi]("Content-type","application/json"),vr(bn(Tt),function(Tn){st[Qi](Tn,Tt[Tn])}),st.onreadystatechange=function(){$||(wn(st),st.readyState===4&&wt&&wt(!0))},st.onload=function(){$&&wn(st)};function wn(Tn){var gi=q&&q.xhrOnComplete,_c=gi&&Ht(gi);if(_c)gi(Tn,ft,Je);else{var Fi=Ja(Tn);ar(ft,Tn[wo],ac(Tn,$),Fi)}}return st.onerror=function(Tn){ar(ft,$?st[wo]:400,ac(st,$),$?Ao:Fv(st)),Pr&&Pr(Tn)},st.ontimeout=function(){ar(ft,$?st[wo]:500,ac(st,$),$?Ao:Fv(st)),wt&&wt(!1)},st.send(Je[Pi]),ur}function tn(Je,ft,_r){var ur,wt=Je[Io],Pr=Je[Pi],Tt=$?Pr:new Blob([Pr],{type:"application/json"}),Ma,st,wn,Tn=new Headers,gi=Pr[Vr],_c=!1,Fi=!1,Tf=Je[No]||{},_s=(ur={method:rl,body:Tt},ur[cs]=!0,ur);Je.headers&&bn(Je.headers)[Vr]>0&&(vr(bn(Tf),function(Jr){Tn.append(Jr,Tf[Jr])}),_s[No]=Tn),ie?_s.credentials=ie:Ce&&$&&(_s.credentials="include"),_r&&(_s.keepalive=!0,_+=gi,$?Je._sendReason===2&&(_c=!0,ve&&(wt+=Vv)):_c=!0);var Fo=new Request(wt,_s);try{Fo[cs]=!0}catch{}if(!_r&&w&&(Ma=Ri(function(Jr,ra){st=Jr,wn=ra})),!wt){Bt(ft),st&&st(!1);return}function eu(Jr){ar(ft,$?0:400,{},$?Ao:Jr)}function ta(Jr,ra,La){var tu=Jr[wo],gc=q.fetchOnComplete;gc&&Ht(gc)?gc(Jr,ft,La||Ao,ra):ar(ft,tu,{},La||Ao)}try{Ju(fetch($?wt:Fo,$?_s:null),function(Jr){if(_r&&(_-=gi,gi=0),!Fi)if(Fi=!0,Jr.rejected)eu(Jr.reason&&Jr.reason[Di]),wn&&wn(Jr.reason);else{var ra=Jr[Ol];try{!$&&!ra.ok?(eu(ra.statusText),st&&st(!1)):$&&!ra.body?(ta(ra,null,Ao),st&&st(!0)):Ju(ra.text(),function(La){ta(ra,Je,La[Ol]),st&&st(!0)})}catch(La){eu(fr(La)),wn&&wn(La)}}})}catch(Jr){Fi||(eu(fr(Jr)),wn&&wn(Jr))}return _c&&!Fi&&(Fi=!0,ar(ft,200,{}),st&&st(!0)),$&&!Fi&&Je[Pn]>0&&Fe&&Fe.set(function(){Fi||(Fi=!0,ar(ft,500,{}),st&&st(!0))},Je[Pn]),Ma}function Jt(Je,ft,_r){var ur=ai(),wt=new XDomainRequest,Pr=Je[Pi];wt.onload=function(){var Tn=Ja(wt),gi=q&&q.xdrOnComplete;gi&&Ht(gi)?gi(wt,ft,Je):ar(ft,200,{},Tn)},wt.onerror=function(){ar(ft,400,{},$?Ao:$c(wt))},wt.ontimeout=function(){ar(ft,500,{})},wt.onprogress=function(){};var Tt=ur&&ur.location&&ur.location[Jf]||"",Ma=Je[Io];if(!Ma){Bt(ft);return}if(!$&&Ma.lastIndexOf(Tt,0)!==0){var st="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";pa(k,2,40,". "+st),qe(st,ft);return}var wn=$?Ma:Ma[Ka](/^(https?:)/,"");wt.open(rl,wn),Je[Pn]&&(wt[Pn]=Je[Pn]),wt.send(Pr),$&&_r?Fe&&Fe.set(function(){wt.send(Pr)},0):wt.send(Pr)}function ea(){_=0,D=!1,w=!1,k=null,$=null,q=null,W=null,ie=null,oe=null,De=!1,$e=!1,je=!1,Ne=!1,ve=!1,Fe=null}})}return d.__ieDyn=1,d}(),rf="on",Hv="attachEvent",ev="addEventListener",Tu="detachEvent",Iu="removeEventListener",nl="events",fs="visibilitychange",Vs="pagehide",nf="pageshow",pd="unload",vd="beforeunload",af=Gn("aiEvtPageHide"),mi=Gn("aiEvtPageShow"),of=/\.[\.]+/g,Kv=/[\.]+$/,Pm=1,al=Hc("events"),Am=/^([^.]*)(?:\.(.+)|)/;function Ro(d){return d&&d[Ka]?d[Ka](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,un):d}function Nu(d,_){var w;if(_){var D=un;zt(_)?(D=un,vr(_,function($){$=Ro($),$&&($[0]!=="."&&($="."+$),D+=$)})):D=Ro(_),D&&(D[0]!=="."&&(D="."+D),d=(d||un)+D)}var k=Am.exec(d||un)||[];return w={},w[pt]=k[1],w.ns=(k[2]||un).replace(of,".").replace(Kv,un)[mu](".").sort().join("."),w}function il(d,_,w){w===void 0&&(w=!0);var D=al.get(d,nl,{},w),k=D[_];return k||(k=D[_]=[]),k}function Wv(d,_,w,D){d&&_&&_[pt]&&(d[Iu]?d[Iu](_[pt],w,D):d[Tu]&&d[Tu](rf+_[pt],w))}function fp(d,_,w,D){var k=!1;return d&&_&&_[pt]&&w&&(d[ev]?(d[ev](_[pt],w,D),k=!0):d[Hv]&&(d[Hv](rf+_[pt],w),k=!0)),k}function Jv(d,_,w,D){for(var k=_[Vr];k--;){var $=_[k];$&&(!w.ns||w.ns===$.evtName.ns)&&(!D||D($))&&(Wv(d,$.evtName,$[Wu],$.capture),_[Hd](k,1))}}function tv(d,_,w){if(_[pt])Jv(d,il(d,_[pt]),_,w);else{var D=al.get(d,nl,{});br(D,function(k,$){Jv(d,$,_,w)}),bn(D)[Vr]===0&&al.kill(d,nl)}}function md(d,_){var w;return _?(zt(_)?w=[d].concat(_):w=[d,_],w=Nu("xx",w).ns[mu](".")):w=d,w}function ol(d,_,w,D,k){var $;k===void 0&&(k=!1);var q=!1;if(d)try{var W=Nu(_,D);if(q=fp(d,W,w,k),q&&al.accept(d)){var ie=($={guid:Pm++,evtName:W},$[Wu]=w,$.capture=k,$);il(d,W.type)[Ha](ie)}}catch{}return q}function ro(d,_,w,D,k){if(k===void 0&&(k=!1),d)try{var $=Nu(_,D),q=!1;tv(d,$,function(W){return $.ns&&!w||W[Wu]===w?(q=!0,!0):!1}),q||Wv(d,$,w,k)}catch{}}function hd(d,_,w){var D=!1,k=ai();k&&(D=ol(k,d,_,w),D=ol(k.body,d,_,w)||D);var $=Mn();return $&&(D=ol($,d,_,w)||D),D}function sl(d,_,w){var D=ai();D&&(ro(D,d,_,w),ro(D.body,d,_,w));var k=Mn();k&&ro(k,d,_,w)}function ka(d,_,w,D){var k=!1;return _&&d&&d[Vr]>0&&vr(d,function($){$&&(!w||Vo(w,$)===-1)&&(k=hd($,_,D)||k)}),k}function no(d,_,w,D){var k=!1;return _&&d&&zt(d)&&(k=ka(d,_,w,D),!k&&w&&w[Vr]>0&&(k=ka(d,_,null,D))),k}function sf(d,_,w){d&&zt(d)&&vr(d,function(D){D&&sl(D,_,w)})}function Zv(d,_,w){return no([vd,pd,Vs],d,_,w)}function Xv(d,_){sf([vd,pd,Vs],d,_)}function ha(d,_,w){function D(q){var W=Mn();d&&W&&W.visibilityState==="hidden"&&d(q)}var k=md(af,w),$=ka([Vs],d,_,k);return(!_||Vo(_,fs)===-1)&&($=ka([fs],D,_,k)||$),!$&&_&&($=ha(d,null,w)),$}function ul(d,_){var w=md(af,_);sf([Vs],d,w),sf([fs],null,w)}function uf(d,_,w){function D(q){var W=Mn();d&&W&&W.visibilityState==="visible"&&d(q)}var k=md(mi,w),$=ka([nf],d,_,k);return $=ka([fs],D,_,k)||$,!$&&_&&($=uf(d,null,w)),$}function Rm(d,_){var w=md(mi,_);sf([nf],d,w),sf([fs],null,w)}var Qv="",cf="timings",Oa="value",dp="kind",fc="length",cl="processTelemetryStart",Hs,lf="4.3.4",pp="1DS-Web-JS-"+lf,St=A.hasOwnProperty,Du=(Hs={},Hs[0]=0,Hs[2]=6,Hs[1]=1,Hs[3]=7,Hs[4098]=6,Hs[4097]=1,Hs[4099]=7,Hs);function ko(d){return!(d===Qv||rt(d))}function ff(d){if(d){var _=$d(d,"-");if(_>-1)return Or(d,_)}return Qv}function km(d,_,w){if(!_&&!ko(_)||typeof d!="string")return null;var D=typeof _;if(D==="string"||D==="number"||D==="boolean"||zt(_))_={value:_};else if(D==="object"&&!St.call(_,"value"))_={value:w?JSON.stringify(_):_};else if(rt(_[Oa])||_[Oa]===Qv||!Nc(_[Oa])&&!Qt(_[Oa])&&!Ur(_[Oa])&&!zt(_[Oa]))return null;if(zt(_[Oa])&&!mp(_[Oa]))return null;if(!rt(_[dp])){if(zt(_[Oa])||!em(_[dp]))return null;_[Oa]=_[Oa].toString()}return _}function df(d,_,w){var D=-1;if(!Ot(d))if(_>0&&(_===32?D=8192:_<=13&&(D=_<<5)),vp(w))D===-1&&(D=0),D|=w;else{var k=Du[dc(d)]||-1;D!==-1&&k!==-1?D|=k:k===6&&(D=k)}return D}function _d(d,_,w,D,k){var $={},q=!1,W=0,ie=arguments[fc],oe=arguments;for(Ur(oe[0])&&(q=oe[0],W++);W<ie;W++){var d=oe[W];br(d,function($e,je){q&&je&&$i(je)?zt(je)?($[$e]=$[$e]||[],vr(je,function(Ne,ve){Ne&&$i(Ne)?$[$e][ve]=_d(!0,$[$e][ve],Ne):$[$e][ve]=Ne})):$[$e]=_d(!0,$[$e],je):$[$e]=je})}return $}var Oo=Yd;function em(d){return d===0||d>0&&d<=13||d===32}function vp(d){return d>=0&&d<=9}function mp(d){return d[fc]>0}function pf(d,_){var w=d;w[cf]=w[cf]||{},w[cf][cl]=w[cf][cl]||{},w[cf][cl][_]=Oo()}function dc(d){var _=0;if(d!=null){var w=typeof d;w==="string"?_=1:w==="number"?_=2:w==="boolean"?_=3:w===u&&(_=4,zt(d)?(_=4096,d[fc]>0&&(_|=dc(d[0]))):St.call(d,"value")&&(_=8192|dc(d[Oa])))}return _}function rv(){return!!on("chrome")}function Br(d){return d>0}var Ks="",nv="drop",Cu="send",ao="requeue",Fn="rspFail",gd="oth",pc="no-cache, no-store",ll="application/x-json-stream",ds="cache-control",io="content-type",Mo="kill-tokens",yd="kill-duration",hp="time-delta-millis",av="client-version",ps="client-id",iv="time-delta-to-apply-millis",Sd="upload-time",ov="apikey",vs="AuthMsaDeviceTicket",Om="WebAuthToken",xu="AuthXToken",sv="NoResponseBody",f="msfpc",m="trace",y="user",I="allowRequestSending",F="firstRequestSent",H="shouldAddClockSkewHeaders",J="getClockSkewHeaderValue",re="setClockSkew",te="length",_e="concat",et="iKey",Et="count",Kt="events",it="push",lt="split",nr="splice",Ft="toLowerCase",hr="hdrs",Er="useHdrs",Pt="initialize",En="setTimeoutOverride",vc="clearTimeoutOverride",Ws="payloadPreprocessor",fl="overrideEndpointUrl",vf="avoidOptions",bd="disableEventTimings",mf="stringifyObjects",hf="enableCompoundKey",Ed="disableXhrSync",_f="disableFetchKeepAlive",Pe="addNoResponse",vt="excludeCsMetaData",qt="useSendBeacon",en="fetchCredentials",wa="alwaysUseXhrOverride",Ta="unloadTransports",Xn="serializeOfflineEvt",hi="getOfflineRequestDetails",ms="createPayload",dl="createOneDSPayload",tm="payloadBlob",Pu="headers",wd="_thePayload",Mm="urlString",Qn="batches",hs="sendType",rm="addHeader",Lm="canSendRequest",uv="sendQueuedRequests",Fm="isCompletelyIdle",Um="setUnloading",Gh="isTenantKilled",jm="resume",Ym="sendSynchronousBatch",pl="_transport",gf="getWParam",Js="isBeacon",vl="timings",$m="isTeardown",nm="isSync",cv="data",lv="timeout",Td="_sendReason",uh="setKillSwitchTenants",qm="_backOffTransmission",_p="identifier",ml="disableOptimizeObj",x_="ignoreMc1Ms0CookieProcessing",ch="eventsLimitInMem",Vh="autoFlushEventsLimit",Bm="disableAutoBatchFlushLimit",P_="overrideInstrumentationKey",yf="disableTelemetry",fv="baseData",am="sendAttempt",Sf="latency",dv="sync";function lh(d){var _=(d.ext||{}).intweb;return _&&ko(_[f])?_[f]:null}function Hh(d){for(var _=null,w=0;_===null&&w<d[te];w++)_=lh(d[w]);return _}var Id=function(){function d(_,w){var D=w?[][_e](w):[],k=this,$=Hh(D);k[et]=function(){return _},k.Msfpc=function(){return $||Ks},k[Et]=function(){return D[te]},k[Kt]=function(){return D},k.addEvent=function(q){return q?(D[it](q),$||($=lh(q)),!0):!1},k[lt]=function(q,W){var ie;if(q<D[te]){var oe=D[te]-q;rt(W)||(oe=W<oe?W:oe),ie=D[nr](q,oe),$=Hh(D)}return new d(_,ie)}}return d.create=function(_,w){return new d(_,w)},d}(),Kh=function(){function d(){var _=!0,w=!0,D=!0,k="use-collector-delta",$=!1;Wi(d,this,function(q){q[I]=function(){return _},q[F]=function(){D&&(D=!1,$||(_=!1))},q[H]=function(){return w},q[J]=function(){return k},q[re]=function(W){$||(W?(k=W,w=!0,$=!0):w=!1,_=!0)}})}return d.__ieDyn=1,d}(),A_=1e3,fh=function(){function d(){var _={};function w(D){var k=[];return D&&vr(D,function($){k[it](wi($))}),k}Wi(d,this,function(D){D[uh]=function(k,$){if(k&&$)try{var q=w(k[lt](","));if($==="this-request-only")return q;for(var W=parseInt($,10)*A_,ie=0;ie<q[te];++ie)_[q[ie]]=Ei()+W}catch{return[]}return[]},D[Gh]=function(k){var $=_,q=wi(k);return $[q]!==void 0&&$[q]>Ei()?!0:(delete $[q],!1)}})}return d.__ieDyn=1,d}(),im=.8,dh=1.2,zm=3e3,pv=6e5;function Nd(d){return!(d>=300&&d<500&&d!=429||d==501||d==505)}function ph(d){var _=0,w=zm*im,D=zm*dh,k=Math.floor(Math.random()*(D-w))+w;return _=Math.pow(2,d)*k,Math.min(_,pv)}var om=20,Hr=3984588,Zs=65e3,Dd=2e6,gp=Math.min(Dd,Zs),vv="metadata",sm="f",bf=/\./,Cd=function(){function d(_,w,D,k,$,q){var W="data",ie="baseData",oe="ext",De=!!k,$e=!0,je=w,Ne={},ve=!!q,Fe=$||df;Wi(d,this,function(we){we.createPayload=function(Te,qe,Bt,Wt,ar,Dr){return{apiKeys:[],payloadBlob:Ks,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:Te,isTeardown:qe,isSync:Bt,isBeacon:Wt,sendType:Dr,sendReason:ar}},we.appendPayload=function(Te,qe,Bt){var Wt=Te&&qe&&!Te.overflow;return Wt&&ma(_,function(){return"Serializer:appendPayload"},function(){for(var ar=qe.events(),Dr=Te.payloadBlob,Fr=Te.numEvents,cn=!1,tn=[],Jt=[],ea=Te.isBeacon,Je=ea?Zs:Hr,ft=ea?gp:Dd,_r=0,ur=0;_r<ar.length;){var wt=ar[_r];if(wt){if(Fr>=Bt){Te.overflow=qe.split(_r);break}var Pr=we.getEventBlob(wt);if(Pr&&Pr.length<=ft){var Tt=Pr.length,Ma=Dr.length;if(Ma+Tt>Je){Te.overflow=qe.split(_r);break}Dr&&(Dr+=`
`),Dr+=Pr,ur++,ur>om&&(Is(Dr,0,1),ur=0),cn=!0,Fr++}else Pr?tn.push(wt):Jt.push(wt),ar.splice(_r,1),_r--}_r++}if(tn.length>0&&Te.sizeExceed.push(Id.create(qe.iKey(),tn)),Jt.length>0&&Te.failedEvts.push(Id.create(qe.iKey(),Jt)),cn){Te.batches.push(qe),Te.payloadBlob=Dr,Te.numEvents=Fr;var st=qe.iKey();Vo(Te.apiKeys,st)===-1&&Te.apiKeys.push(st)}},function(){return{payload:Te,theBatch:{iKey:qe.iKey(),evts:qe.events()},max:Bt}}),Wt},we.getEventBlob=function(Te){try{return ma(_,function(){return"Serializer.getEventBlob"},function(){var qe={};qe.name=Te.name,qe.time=Te.time,qe.ver=Te.ver,qe.iKey="o:"+ff(Te.iKey);var Bt={},Wt;ve||(Wt=function(cn,tn,Jt){Wh(Fe,Bt,cn,tn,Jt)});var ar=Te[oe];ar&&(qe[oe]=Bt,br(ar,function(cn,tn){var Jt=Bt[cn]={};Ce(tn,Jt,"ext."+cn,!0,null,null,!0)}));var Dr=qe[W]={};Dr.baseType=Te.baseType;var Fr=Dr[ie]={};return Ce(Te.baseData,Fr,ie,!1,[ie],Wt,$e),Ce(Te.data,Dr,W,!1,[],Wt,$e),JSON.stringify(qe)},function(){return{item:Te}})}catch{return null}};function He(Te,qe){var Bt=Ne[Te];return Bt===void 0&&(Te.length>=7&&(Bt=Wn(Te,"ext.metadata")||Wn(Te,"ext.web")),Ne[Te]=Bt),Bt}function Ce(Te,qe,Bt,Wt,ar,Dr,Fr){br(Te,function(cn,tn){var Jt=null;if(tn||ko(tn)){var ea=Bt,Je=cn,ft=ar,_r=qe;if(De&&!Wt&&bf.test(cn)){var ur=cn.split("."),wt=ur.length;if(wt>1){ft&&(ft=ft.slice());for(var Pr=0;Pr<wt-1;Pr++){var Tt=ur[Pr];_r=_r[Tt]=_r[Tt]||{},ea+="."+Tt,ft&&ft.push(Tt)}Je=ur[wt-1]}}var Ma=Wt&&He(ea);if(!Ma&&je&&je.handleField(ea,Je)?Jt=je.value(ea,Je,tn,D):Jt=km(Je,tn,D),Jt){var st=Jt.value;if(_r[Je]=st,Dr&&Dr(ft,Je,Jt),Fr&&typeof st=="object"&&!zt(st)){var wn=ft;wn&&(wn=wn.slice(),wn.push(Je)),Ce(tn,st,ea+"."+Je,Wt,wn,Dr,Fr)}}}})}})}return d.__ieDyn=1,d}();function Wh(d,_,w,D,k){if(k&&_){var $=d(k.value,k.kind,k.propertyType);if($>-1){var q=_[vv];q||(q=_[vv]={f:{}});var W=q[sm];if(W||(W=q[sm]={}),w)for(var ie=0;ie<w.length;ie++){var oe=w[ie];W[oe]||(W[oe]={f:{}});var De=W[oe][sm];De||(De=W[oe][sm]={}),W=De}W=W[D]={},zt(k.value)?W.a={t:$}:W.t=$}}}function yp(d,_){return{set:function(w,D){for(var k=[],$=2;$<arguments.length;$++)k[$-2]=arguments[$];return Yp([d,_],w,D,k)}}}var hl,mc="sendAttempt",Lo="&"+sv+"=true",Xs="?cors=true&"+io[Ft]()+"="+ll,_l=(hl={},hl[1]=ao,hl[100]=ao,hl[200]="sent",hl[8004]=nv,hl[8003]=nv,hl),Ef={},Au={};function Ru(d,_,w){Ef[d]=_,w!==!1&&(Au[_]=d)}Ru(vs,vs,!1),Ru(av,av),Ru(ps,"Client-Id"),Ru(ov,ov),Ru(iv,iv),Ru(Sd,Sd),Ru(xu,xu);function Sp(d,_){var w=!1;if(d&&_){var D=bn(d);if(D&&D[te]>0)for(var k=_[Ft](),$=0;$<D[te];$++){var q=D[$];if(q&&Ue(_,q)&&q[Ft]()===k){w=!0;break}}}return w}function xd(d,_,w,D){_&&w&&w[te]>0&&(D&&Ef[_]?(d[hr][Ef[_]]=w,d[Er]=!0):d.url+="&"+_+"="+w)}function Jh(d,_,w){for(var D=0;D<d[te];D++)if(d[D].name===_){d[D].value=w;return}d[it]({name:_,value:w})}function mv(d,_){for(var w=0;w<d[te];w++)if(d[w].name===_){d[nr](w,1);return}}var hc=function(){function d(_,w,D,k){var $,q,W,ie,oe=!1,De,$e,je,Ne,ve,Fe,we,He,Ce,Te,qe,Bt,Wt,ar,Dr,Fr,cn,tn,Jt,ea,Je,ft,_r,ur,wt,Pr,Tt,Ma;Wi(d,this,function(st){Fi();var wn=!0;st[Pt]=function(a,c,p){ur||(ve=c,Bt=c.getCookieMgr(),$e=p,je=$e.diagLog(),qf(ea,qs(a,function(g){var E,C=g.cfg,R=g.cfg.extensionConfig[p.identifier];wt=yp(R[En],R[vc]),ko(C.anonCookieName)?Jh(we,"anoncknm",C.anonCookieName):mv(we,"anoncknm"),Je=R[Ws],ft=R.payloadListener;var x=R.httpXHROverride,M=R[fl]?R[fl]:C.endpointUrl;$=M+Xs,ar=Ot(R[vf])?!0:!R[vf],qe=!R[bd];var j=R.valueSanitizer,z=R[mf],G=!!C[hf];Ot(R[hf])||(G=!!R[hf]),Dr=R.xhrTimeout,Fr=!!R[Ed],cn=!!R[_f],Jt=R[Pe]!==!1,Pr=!!R[vt],c.getPlugin("LocalStorage")&&(cn=!0),oe=!la(),Te=new Cd(ve,j,z,G,df,Pr),rt(R[qt])||(oe=!!R[qt]),R[en]&&(Ma=R[en]);var K=gi();Tt?Tt.SetConfig(K):(Tt=new xm,Tt[Pt](K,je));var ee=x,Z=R[wa]?x:null,he=R[wa]?x:null,ge=[3,2];if(!x){Fe=!1;var Le=[];la()?(Le=[2,1],ge=[2,1,3]):Le=[1,2,3],Le=tc(Le,R.transports),x=Tn(Le,!1),x||Gs(je,"No available transport to send events"),ee=Tn(Le,!0)}Z||(ge=tc(ge,R[Ta]),Z=Tn(ge,!0)),tn=!Fe&&(oe&&ad()||!cn&&Gc(!0)),Ne=(E={},E[0]=x,E[1]=ee||Tn([1,2,3],!0),E[2]=Z||ee||Tn([1],!0),E[3]=he||Tn([2,3],!0)||ee||Tn([1],!0),E)})),ur=!0)},st.addResponseHandler=function(a){return _r[it](a),{rm:function(){var c=_r.indexOf(a);c>=0&&_r[nr](c,1)}}},st[Xn]=function(a){try{if(Te)return Te.getEventBlob(a)}catch{}return Ks},st[hi]=function(){try{var a=Te&&Te[ms](0,!1,!1,!1,1,0);return If(a,ar)}catch{}return null},st[dl]=function(a,c){try{var p=[];vr(a,function(x){c&&(x=Po(x));var M=Id.create(x[et],[x]);p[it](M)});for(var g=null;p[te]>0&&Te;){var E=p.shift();E&&E[Et]()>0&&(g=g||Te[ms](0,!1,!1,!1,1,0),Te.appendPayload(g,E,_))}var C=If(g,ar),R={data:g[tm],urlString:C.url,headers:C[hr],timeout:Dr,disableXhrSync:Fr,disableFetchKeepAlive:cn};return ar&&(Sp(R[Pu],ds)||(R[Pu][ds]=pc),Sp(R[Pu],io)||(R[Pu][io]=ll)),R}catch{}return null};function Tn(a,c){try{return Tt&&Tt.getSenderInst(a,c)}catch{}return null}st._getDbgPlgTargets=function(){return[Ne[0],q,Te,Ne,gi(),$]};function gi(){try{var a={xdrOnComplete:_c,fetchOnComplete:Tf,xhrOnComplete:_s,beaconOnRetry:eu},c={enableSendPromise:!1,isOneDs:!0,disableCredentials:!wn,fetchCredentials:Ma,disableXhr:!1,disableBeacon:!oe,disableBeaconSync:!oe,disableFetchKeepAlive:cn,timeWrapper:wt,addNoResponse:Jt,senderOnCompleteCallBack:a};return c}catch{}return null}function _c(a,c,p){var g=Ja(a);Fo(c,200,{},g),ku(g)}function Fi(){var a;$=null,q=new fh,W=!1,ie=new Kh,oe=!1,De=0,$e=null,je=null,Ne=null,ve=null,Fe=!0,we=[],He={},Ce=[],Te=null,qe=!1,Bt=null,Wt=!1,ar=!1,Dr=a,Fr=a,cn=a,tn=a,Jt=a,ea=[],Je=a,ft=a,_r=[],ur=!1,wt=yp(),Pr=!1,Tt=null}function Tf(a,c,p,g){var E=function(x,M,j){Fo(c,x,M,j),ku(j)},C={},R=a[Pu];R&&R.forEach(function(x,M){C[M]=x}),E(a.status,C,p||Ks)}function _s(a,c,p){var g=Ja(a);Fo(c,a.status,ac(a,!0),g),ku(g)}function Fo(a,c,p,g){try{a(c,p,g)}catch(E){pa(je,2,518,fr(E))}}function eu(a,c,p){var g=a,E=200,C=g[wd],R=a[Mm]+(Jt?Lo:Ks);try{var x=sa();if(C){var M=!!ve.getPlugin("LocalStorage"),j=[],z=[];vr(C[Qn],function(G){if(j&&G&&G[Et]()>0)for(var K=G[Kt](),ee=0;ee<K[te];ee++)if(x.sendBeacon(R,Te.getEventBlob(K[ee])))z[it](G[ee]);else{j[it](G[lt](ee));break}else j[it](G[lt](0))}),z[te]>0&&(C.sentEvts=z),M||yi(j,8003,C[hs],!0)}else E=0}catch(G){Gs(je,"Failed to send telemetry using sendBeacon API. Ex:"+fr(G)),E=0}finally{Fo(c,E,{},Ks)}}function ta(a){return a===2||a===3}function Jr(a){return Wt&&ta(a)&&(a=2),a}st[rm]=function(a,c){He[a]=c},st.removeHeader=function(a){delete He[a]},st[Lm]=function(){return ra()&&ie[I]()},st[uv]=function(a,c){Ot(a)&&(a=0),Wt&&(a=Jr(a),c=2),tu(Ce,a,0)&&Ui(La(),0,!1,a,c||0)},st[Fm]=function(){return!W&&De===0&&Ce[te]===0},st[Um]=function(a){Wt=a},st.addBatch=function(a){if(a&&a[Et]()>0){if(q.isTenantKilled(a[et]()))return!1;Ce[it](a)}return!0},st.teardown=function(){Ce[te]>0&&Ui(La(),0,!0,2,2),vr(ea,function(a){a&&a.rm&&a.rm()}),ea=[]},st.pause=function(){W=!0},st[jm]=function(){W=!1,st[uv](0,4)},st[Ym]=function(a,c,p){a&&a[Et]()>0&&(rt(c)&&(c=1),Wt&&(c=Jr(c),p=2),Ui([a],0,!1,c,p||0))};function ra(){return!W&&De<w}function La(){var a=Ce;return Ce=[],a}function tu(a,c,p){var g=!1;return a&&a[te]>0&&!W&&Ne[c]&&Te&&(g=c!==0||ra()&&(p>0||ie[I]())),g}function gc(a){var c={};return a&&vr(a,function(p,g){c[g]={iKey:p[et](),evts:p[Kt]()}}),c}function Ui(a,c,p,g,E){if(!(!a||a[te]===0)){if(W){yi(a,1,g);return}g=Jr(g);try{var C=a,R=g!==0;ma(ve,function(){return"HttpManager:_sendBatches"},function(x){x&&(a=a.slice(0));for(var M=[],j=null,z=Oo(),G=Ne[g]||(R?Ne[1]:Ne[0]),K=G&&G[pl],ee=tn&&(Wt||ta(g)||K===3||G._isSync&&K===2);tu(a,g,c);){var Z=a.shift();Z&&Z[Et]()>0&&(q.isTenantKilled(Z[et]())?M[it](Z):(j=j||Te[ms](c,p,R,ee,E,g),Te.appendPayload(j,Z,_)?j.overflow!==null&&(a=[j.overflow][_e](a),j.overflow=null,um(j,z,Oo(),E),z=Oo(),j=null):(um(j,z,Oo(),E),z=Oo(),a=[Z][_e](a),j=null)))}j&&um(j,z,Oo(),E),a[te]>0&&(Ce=a[_e](Ce)),yi(M,8004,g)},function(){return{batches:gc(C),retryCount:c,isTeardown:p,isSynchronous:R,sendReason:E,useSendBeacon:ta(g),sendType:g}},!R)}catch(x){pa(je,2,48,"Unexpected Exception sending batch: "+fr(x))}}}function If(a,c){var p={url:$,hdrs:{},useHdrs:!1};c?(p[hr]=_d(p[hr],He),p.useHdrs=bn(p.hdrs)[te]>0):br(He,function(x,M){Au[x]?xd(p,Au[x],M,!1):(p[hr][x]=M,p[Er]=!0)}),xd(p,ps,"NO_AUTH",c),xd(p,av,pp,c);var g=Ks;vr(a.apiKeys,function(x){g[te]>0&&(g+=","),g+=x}),xd(p,ov,g,c),xd(p,Sd,Ei().toString(),c);var E=yv(a);if(ko(E)&&(p.url+="&ext.intweb.msfpc="+E),ie[H]()&&xd(p,iv,ie[J](),c),ve[gf]){var C=ve[gf]();C>=0&&(p.url+="&w="+C)}for(var R=0;R<we[te];R++)p.url+="&"+we[R].name+"="+we[R].value;return p}function ru(a,c,p){a[c]=a[c]||{},a[c][$e.identifier]=p}function um(a,c,p,g){if(a&&a.payloadBlob&&a.payloadBlob[te]>0){var E=!!Je,C=Ne[a.sendType];!ta(a[hs])&&a[Js]&&a.sendReason===2&&(C=Ne[2]||Ne[3]||C);var R=ar;(a.isBeacon||C[pl]===3)&&(R=!1);var x=If(a,R);R=R||x[Er];var M=Oo();ma(ve,function(){return"HttpManager:_doPayloadSend"},function(){for(var j=0;j<a.batches[te];j++)for(var z=a[Qn][j],G=z[Kt](),K=0;K<G[te];K++){var ee=G[K];if(qe){var Z=ee[vl]=ee[vl]||{};ru(Z,"sendEventStart",M),ru(Z,"serializationStart",c),ru(Z,"serializationCompleted",p)}ee[mc]>0?ee[mc]++:ee[mc]=1}yi(a[Qn],1e3+(g||0),a[hs],!0);var he={data:a[tm],urlString:x.url,headers:x[hr],_thePayload:a,_sendReason:g,timeout:Dr,disableXhrSync:Fr,disableFetchKeepAlive:cn};R&&(Sp(he[Pu],ds)||(he[Pu][ds]=pc),Sp(he[Pu],io)||(he[Pu][io]=ll));var ge=null;C&&(ge=function(Le){ie[F]();var Be=function(er,ir){Nf(er,ir,a,g)},Xe=a[$m]||a[nm];try{C.sendPOST(Le,Be,Xe),ft&&ft(he,Le,Xe,a[Js])}catch(er){Gs(je,"Unexpected exception sending payload. Ex:"+fr(er)),Fo(Be,0,{})}}),ma(ve,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(ge)if(a[hs]===0&&De++,E&&!a.isBeacon&&C[pl]!==3){var Le={data:he[cv],urlString:he[Mm],headers:_d({},he[Pu]),timeout:he[lv],disableXhrSync:he[Ed],disableFetchKeepAlive:he[_f]},Be=!1;ma(ve,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{Je(Le,function(Xe){Be=!0,!Fe&&!Xe[wd]&&(Xe[wd]=Xe[wd]||he[wd],Xe[Td]=Xe[Td]||he[Td]),ge(Xe)},a.isSync||a[$m])}catch{Be||ge(he)}})}else ge(he)})},function(){return{thePayload:a,serializationStart:c,serializationCompleted:p,sendReason:g}},a[nm])}a.sizeExceed&&a.sizeExceed[te]>0&&yi(a.sizeExceed,8003,a[hs]),a.failedEvts&&a.failedEvts[te]>0&&yi(a.failedEvts,8002,a[hs])}function yc(a,c){qe&&vr(a,function(p){var g=p[vl]=p[vl]||{};ru(g,"sendEventCompleted",c)})}function Nf(a,c,p,g){var E=9e3,C=null,R=!1,x=!1;try{var M=!0;if(typeof a!==h){if(c){ie[re](c[hp]);var j=c[yd]||c["kill-duration-seconds"];vr(q[uh](c[Mo],j),function(G){vr(p[Qn],function(K){if(K[et]()===G){C=C||[];var ee=K[lt](0);p.numEvents-=ee[Et](),C[it](ee)}})})}if(a==200||a==204){E=200;return}(!Nd(a)||p.numEvents<=0)&&(M=!1),E=9e3+a%1e3}if(M){E=100;var z=p.retryCnt;p[hs]===0&&(z<D?(R=!0,Df(function(){p[hs]===0&&De--,Ui(p[Qn],z+1,p[$m],Wt?2:p[hs],5)},Wt,ph(z))):(x=!0,Wt&&(E=8001)))}}finally{R||(ie[re](),_a(p,E,g,x)),yi(C,8004,p[hs])}}function _a(a,c,p,g){try{g&&$e[qm]();var E=a[Qn];c===200&&(E=a.sentEvts||a[Qn],!g&&!a[nm]&&$e._clearBackOff(),Tp(E)),yi(E,c,a[hs],!0)}finally{a[hs]===0&&(De--,p!==5&&st.sendQueuedRequests(a[hs],p))}}function Tp(a){if(qe){var c=Oo();vr(a,function(p){p&&p[Et]()>0&&yc(p[Kt](),c)})}}function Df(a,c,p){c?a():wt.set(a,p)}function yv(a){for(var c=0;c<a.batches[te];c++){var p=a[Qn][c].Msfpc();if(p)return encodeURIComponent(p)}return Ks}function ku(a){var c=_r;try{for(var p=0;p<c[te];p++)try{c[p](a)}catch(E){pa(je,1,519,"Response handler failed: "+E)}if(a){var g=JSON.parse(a);ko(g.webResult)&&ko(g.webResult[f])&&Bt.set("MSFPC",g.webResult[f],365*86400)}}catch{}}function yi(a,c,p,g){if(a&&a[te]>0&&k){var E=k[Cf(c)];if(E){var C=p!==0;ma(ve,function(){return"HttpManager:_sendBatchesNotification"},function(){Df(function(){try{E.call(k,a,c,C,p)}catch(R){pa(je,1,74,"send request notification failed: "+R)}},g||C,0)},function(){return{batches:gc(a),reason:c,isSync:C,sendSync:g,sendType:p}},!C)}}}function Cf(a){var c=_l[a];return ko(c)||(c=gd,a>=9e3&&a<=9999?c=Fn:a>=8e3&&a<=8999?c=nv:a>=1e3&&a<=1999&&(c=Cu)),c}})}return d.__ieDyn=1,d}(),Gm=.25,hv=500,wf=20,_v=6,gv=2,vh=4,mh=2,Zh=1,_i=1e4,Qs="eventsDiscarded",bp="",Vn=void 0,Ep=qa({eventsLimitInMem:{isVal:Br,v:_i},immediateEventLimit:{isVal:Br,v:500},autoFlushEventsLimit:{isVal:Br,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:wp,v:Vn},overrideInstrumentationKey:Vn,overrideEndpointUrl:Vn,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:Vn,clearTimeoutOverride:Vn,payloadPreprocessor:Vn,payloadListener:Vn,disableEventTimings:Vn,valueSanitizer:Vn,stringifyObjects:Vn,enableCompoundKey:Vn,disableOptimizeObj:!1,fetchCredentials:Vn,transports:Vn,unloadTransports:Vn,useSendBeacon:Vn,disableFetchKeepAlive:Vn,avoidOptions:!1,xhrTimeout:Vn,disableXhrSync:Vn,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:Qt,v:_v},maxUnloadEventRetryAttempts:{isVal:Qt,v:gv},addNoResponse:Vn,excludeCsMetaData:Vn});function wp(d){return d&&d.sendPOST}var Xh=function(d){xa(_,d);function _(){var w=d.call(this)||this;w.identifier="PostChannel",w.priority=1011,w.version="4.3.4";var D,k=!1,$=[],q,W=!1,ie=0,oe,De=0,$e,je={},Ne=t,ve,Fe,we,He,Ce,Te,qe,Bt,Wt,ar,Dr,Fr,cn,tn,Jt,ea,Je,ft,_r,ur,wt,Pr;return Wi(_,w,function(Tt,Ma){Jr(),Tt._getDbgPlgTargets=function(){return[Ce,D]},Tt[Pt]=function(x,M,j){ma(M,function(){return"PostChannel:initialize"},function(){Ma[Pt](x,M,j),_r=M.getNotifyMgr();try{Jt=md(Gn(Tt[_p]),M.evtNamespace&&M.evtNamespace()),Tt._addHook(qs(x,function(z){var G=z.cfg,K=Ql(null,G,M);D=K.getExtCfg(Tt[_p],Ep),ea=yp(D[En],D[vc]),Dr=!D[ml]&&rv(),Je=D[x_],wn(M),$e=D[ch],oe=D.immediateEventLimit,qe=D[Vh],cn=D.maxEventRetryAttempts,tn=D.maxUnloadEventRetryAttempts,ft=D[Bm],$t(G.endpointUrl)?Tt.pause():W&&Tt[jm](),R(),wt=D[P_],Pr=!!D[yf],ur&&st();var ee=G.disablePageUnloadEvents||[];ur=Zv(_c,ee,Jt),ur=ha(_c,ee,Jt)||ur,ur=uf(Fi,G.disablePageShowEvents,Jt)||ur})),Ce[Pt](x,Tt.core,Tt)}catch(z){throw Tt.setInitialized(!1),z}},function(){return{theConfig:x,core:M,extensions:j}})},Tt.processTelemetry=function(x,M){pf(x,Tt[_p]),M=M||Tt._getTelCtx(M);var j=x;!Pr&&!k&&(wt&&(j[et]=wt),_s(j,!0),Fr?tu(2,2):ta()),Tt.processNext(j,M)},Tt.getOfflineSupport=function(){try{var x=Ce&&Ce[hi]();if(Ce)return{getUrl:function(){return x?x.url:null},serialize:gi,batch:Tn,shouldProcess:function(M){return!Pr},createPayload:function(M){return null},createOneDSPayload:function(M){if(Ce[dl])return Ce[dl](M,Dr)}}}catch{}return null},Tt._doTeardown=function(x,M){tu(2,2),k=!0,Ce.teardown(),st(),Jr()};function st(){Xv(null,Jt),ul(null,Jt),Rm(null,Jt)}function wn(x){var M=x[gf];x[gf]=function(){var j=0;return Je&&(j=j|2),j|M.call(x)}}function Tn(x){var M=bp;return x&&x[te]&&vr(x,function(j){M&&(M+=`
`),M+=j}),M}function gi(x){var M=bp;try{Tf(x),M=Ce[Xn](x)}catch{}return M}function _c(x){var M=x||ai().event;M.type!=="beforeunload"&&(Fr=!0,Ce[Um](Fr)),tu(2,2)}function Fi(x){Fr=!1,Ce[Um](Fr)}function Tf(x){x.ext&&x.ext[m]&&delete x.ext[m],x.ext&&x.ext[y]&&x.ext[y].id&&delete x.ext[y].id,Dr&&(x.ext=Po(x.ext),x[fv]&&(x[fv]=Po(x[fv])),x[cv]&&(x[cv]=Po(x[cv])))}function _s(x,M){if(x[am]||(x[am]=0),x[Sf]||(x[Sf]=1),Tf(x),x[dv]){if(we||W)x[Sf]=3,x[dv]=!1;else if(Ce){Dr&&(x=Po(x)),Ce[Ym](Id.create(x[et],[x]),x[dv]===!0?1:x[dv],3);return}}var j=x[Sf],z=De,G=$e;j===4&&(z=ie,G=oe);var K=!1;if(z<G)K=!ru(x,M);else{var ee=1,Z=wf;j===4&&(ee=4,Z=1),K=!0,um(x[et],x[Sf],ee,Z)&&(K=!ru(x,M))}K&&Cf(Qs,[x],So.QueueFull)}Tt.setEventQueueLimits=function(x,M){D[ch]=$e=Br(x)?x:_i,D[Vh]=qe=Br(M)?M:0,R();var j=De>x;if(!j&&Bt>0)for(var z=1;!j&&z<=3;z++){var G=Te[z];G&&G[Qn]&&vr(G[Qn],function(K){K&&K[Et]()>=Bt&&(j=!0)})}If(!0,j)},Tt.pause=function(){La(),W=!0,Ce&&Ce.pause()},Tt[jm]=function(){W=!1,Ce&&Ce[jm](),ta()},Tt._loadTransmitProfiles=function(x){Df(),br(x,function(M,j){var z=j[te];if(z>=2){var G=z>2?j[2]:0;if(j[nr](0,z-2),j[1]<0&&(j[0]=-1),j[1]>0&&j[0]>0){var K=j[0]/j[1];j[0]=Math.ceil(K)*j[1]}G>=0&&j[1]>=0&&G>j[1]&&(G=j[1]),j[it](G),je[M]=j}})},Tt.flush=function(x,M,j){x===void 0&&(x=!0);var z;if(!W)if(j=j||1,x)M||(z=Ri(function(K){M=K})),q==null?(La(),Nf(1,0,j),q=ra(function(){q=null,_a(M,j)},0)):$[it](M);else{var G=La();Fo(1,1,j),M&&M(),G&&ta()}return z},Tt.setMsaAuthTicket=function(x){Ce[rm](vs,x)},Tt.setAuthPluginHeader=function(x){Ce[rm](Om,x)},Tt.removeAuthPluginHeader=function(){Ce.removeHeader(Om)},Tt.hasEvents=eu,Tt._setTransmitProfile=function(x){Ne!==x&&je[x]!==void 0&&(La(),Ne=x,ta())},Fl(Tt,function(){return Ce},["addResponseHandler"]);function Fo(x,M,j){var z=Nf(x,M,j);return Ce[uv](M,j),z}function eu(){return De>0}function ta(){if(Wt>=0&&Nf(Wt,0,ar)&&Ce[uv](0,ar),ie>0&&!Fe&&!W){var x=je[Ne][2];x>=0&&(Fe=ra(function(){Fe=null,Fo(4,0,1),ta()},x))}var M=je[Ne][1];!ve&&!q&&M>=0&&!W&&(eu()?ve=ra(function(){ve=null,Fo(He===0?3:1,0,1),He++,He%=2,ta()},M):He=0)}Tt[qm]=function(){we<vh&&(we++,La(),ta())},Tt._clearBackOff=function(){we&&(we=0,La(),ta())};function Jr(){D=null,k=!1,$=[],q=null,W=!1,ie=0,oe=500,De=0,$e=_i,je={},Ne=t,ve=null,Fe=null,we=0,He=0,Te={},qe=0,ur=!1,Bt=0,Wt=-1,ar=null,Dr=!0,Fr=!1,cn=_v,tn=gv,Jt=null,wt=null,Pr=!1,ea=yp(),Ce=new hc(hv,mh,Zh,{requeue:ku,send:c,sent:p,drop:g,rspFail:E,oth:C}),yv(),gc(),R()}function ra(x,M){M===0&&we&&(M=1);var j=1e3;return we&&(j=ph(we-1)),ea.set(x,M*j)}function La(){return ve!==null?(ve.cancel(),ve=null,He=0,!0):!1}function tu(x,M){La(),q&&(q.cancel(),q=null),W||Fo(1,x,M)}function gc(){Te[4]={batches:[],iKeyMap:{}},Te[3]={batches:[],iKeyMap:{}},Te[2]={batches:[],iKeyMap:{}},Te[1]={batches:[],iKeyMap:{}}}function Ui(x,M,j){var z=Te[M];z||(M=1,z=Te[M]);var G=z.iKeyMap[x];return!G&&j&&(G=Id.create(x),z.batches[it](G),z.iKeyMap[x]=G),G}function If(x,M){Ce[Lm]()&&!we&&(qe>0&&De>qe&&(M=!0),M&&q==null&&Tt.flush(x,function(){},20))}function ru(x,M){Dr&&(x=Po(x));var j=x[Sf],z=Ui(x[et],j,!0);return z.addEvent(x)?(j!==4?(De++,M&&x[am]===0&&If(!x.sync,Bt>0&&z[Et]()>=Bt)):ie++,!0):!1}function um(x,M,j,z){for(;j<=M;){var G=Ui(x,M,!0);if(G&&G[Et]()>0){var K=G[lt](0,z),ee=K[Et]();if(ee>0)return j===4?ie-=ee:De-=ee,a(Qs,[K],So.QueueFull),!0}j++}return yc(),!1}function yc(){for(var x=0,M=0,j=function(G){var K=Te[G];K&&K[Qn]&&vr(K[Qn],function(ee){G===4?x+=ee[Et]():M+=ee[Et]()})},z=1;z<=4;z++)j(z);De=M,ie=x}function Nf(x,M,j){var z=!1,G=M===0;return!G||Ce[Lm]()?ma(Tt.core,function(){return"PostChannel._queueBatches"},function(){for(var K=[],ee=4;ee>=x;){var Z=Te[ee];Z&&Z.batches&&Z.batches[te]>0&&(vr(Z[Qn],function(he){Ce.addBatch(he)?z=z||he&&he[Et]()>0:K=K[_e](he[Kt]()),ee===4?ie-=he[Et]():De-=he[Et]()}),Z[Qn]=[],Z.iKeyMap={}),ee--}K[te]>0&&Cf(Qs,K,So.KillSwitch),z&&Wt>=x&&(Wt=-1,ar=0)},function(){return{latency:x,sendType:M,sendReason:j}},!G):(Wt=Wt>=0?Math.min(Wt,x):x,ar=Math.max(ar,j)),z}function _a(x,M){Fo(1,0,M),yc(),Tp(function(){x&&x(),$[te]>0?q=ra(function(){q=null,_a($.shift(),M)},0):(q=null,ta())})}function Tp(x){Ce[Fm]()?x():q=ra(function(){q=null,Tp(x)},Gm)}function Df(){La(),yv(),Ne=t,ta()}function yv(){je={},je[t]=[2,1,0],je[r]=[6,3,0],je[n]=[18,9,0]}function ku(x,M){var j=[],z=cn;Fr&&(z=tn),vr(x,function(G){G&&G[Et]()>0&&vr(G[Kt](),function(K){K&&(K[dv]&&(K[Sf]=4,K[dv]=!1),K[am]<z?(pf(K,Tt[_p]),_s(K,!1)):j[it](K))})}),j[te]>0&&Cf(Qs,j,So.NonRetryableStatus),Fr&&tu(2,2)}function yi(x,M){var j=_r||{},z=j[x];if(z)try{z.apply(j,M)}catch(G){pa(Tt.diagLog(),1,74,x+" notification failed: "+G)}}function Cf(x,M){for(var j=[],z=2;z<arguments.length;z++)j[z-2]=arguments[z];M&&M[te]>0&&yi(x,[M][_e](j))}function a(x,M){for(var j=[],z=2;z<arguments.length;z++)j[z-2]=arguments[z];M&&M[te]>0&&vr(M,function(G){G&&G[Et]()>0&&yi(x,[G.events()][_e](j))})}function c(x,M,j){x&&x[te]>0&&yi("eventsSendRequest",[M>=1e3&&M<=1999?M-1e3:0,j!==!0])}function p(x,M){a("eventsSent",x,M),ta()}function g(x,M){a(Qs,x,M>=8e3&&M<=8999?M-8e3:So.Unknown)}function E(x){a(Qs,x,So.NonRetryableStatus),ta()}function C(x,M){a(Qs,x,So.Unknown),ta()}function R(){ft?Bt=0:Bt=Math.max(hv*(mh+1),$e/6)}}),w}return _.__ieDyn=1,_}(tf);e.BE_PROFILE=n,e.NRT_PROFILE=r,e.PostChannel=Xh,e.RT_PROFILE=t})});var IS=kd(Tv=>{"use strict";var cN=Tv&&Tv.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),lN=Tv&&Tv.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),TS=Tv&&Tv.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&cN(t,e,r);return lN(t,e),t};Object.defineProperty(Tv,"__esModule",{value:!0});Tv.oneDataSystemClientFactory=void 0;var fN=async(e,t,r)=>{let n=await Promise.resolve().then(()=>TS(bS())),s=await Promise.resolve().then(()=>TS(wS())),u=new n.AppInsightsCore,h=new s.PostChannel,b={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[h]]};if(r){b.extensionConfig={};let U={alwaysUseXhrOverride:!0,httpXHROverride:r};b.extensionConfig[h.identifier]=U}let A=t.workspace.getConfiguration("telemetry").get("internalTesting");return u.initialize(b,[]),u.addTelemetryInitializer(U=>{U.ext=U.ext??{},U.ext.web=U.ext.web??{},U.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',A&&(U.ext.utc=U.ext.utc??{},U.ext.utc.flags=8462029)}),u},dN=async(e,t,r)=>{let n=await fN(e,t,r);return{logEvent:(h,b)=>{try{n==null||n.track({name:h,baseData:{name:h,properties:b==null?void 0:b.properties,measurements:b==null?void 0:b.measurements}})}catch(N){throw new Error(`Failed to log event to app insights!
`+N.message)}},flush:async()=>{try{return new Promise((b,N)=>{if(!n){b();return}n.flush(!0,A=>{if(!A){N("Failed to flush app 1DS!");return}})})}catch(h){throw new Error(`Failed to flush 1DS!
`+h.message)}},dispose:async()=>new Promise(b=>{if(!n){b();return}n.unload(!1,()=>{b(),n=void 0},1e3)})}};Tv.oneDataSystemClientFactory=dN});var DS=kd((Pg,NS)=>{(function(e,t){typeof Pg=="object"&&typeof NS<"u"?t(Pg):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{})))})(Pg,function(e){"use strict";function t(f,m){return f||m}function r(f,m){return f[m]}var n=void 0,s=null,u="",h="function",b="object",N="prototype",A="__proto__",U="undefined",V="constructor",Q="Symbol",pe="_polyfill",de="length",ue="name",ne="call",ye="toString",Ae=t(Object),tt=r(Ae,N),Ke=t(String),ct=r(Ke,N),Qe=t(Math),Nt=t(Array),kt=r(Nt,N),yr=r(kt,"slice");function Sr(f,m){try{return{v:f.apply(this,m)}}catch(y){return{e:y}}}function zr(f){return function(m){return typeof m===f}}function po(f){var m="[object "+f+"]";return function(y){return!!(y&&Yi(y)===m)}}function Yi(f){return tt[ye].call(f)}function Kr(f){return typeof f===U||f===U}function Cn(f){return!vo(f)}function nt(f){return f===s||Kr(f)}function vo(f){return!!f||f!==n}var Ve=zr("string"),Tr=zr(h);function Bn(f){return!f&&nt(f)?!1:!!f&&typeof f===b}var Ot=r(Nt,"isArray"),Lt=po("Error"),rt=r(Ae,"getOwnPropertyDescriptor");function gn(f,m){return!!f&&tt.hasOwnProperty[ne](f,m)}var at=t(r(Ae,"hasOwn"),Nc);function Nc(f,m){return gn(f,m)||!!rt(f,m)}function Ht(f,m,y){if(f&&Bn(f)){for(var I in f)if(at(f,I)&&m[ne](y||f,I,f[I])===-1)break}}var $i={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function zt(f){var m={};if(m[$i.c]=!0,m[$i.e]=!0,f.l){m.get=function(){return f.l.v};var y=rt(f.l,"v");y&&y.set&&(m.set=function(I){f.l.v=I})}return Ht(f,function(I,F){m[$i[I]]=Cn(F)?m[$i[I]]:F}),m}var Qt=r(Ae,"defineProperty");function Ur(f,m,y){return Qt(f,m,zt(y))}function $t(f,m,y,I,F){var H={};return Ht(f,function(J,re){nn(H,J,m?re:J,F),nn(H,re,y?re:J,F)}),I?I(H):H}function nn(f,m,y,I){Qt(f,m,{value:y,enumerable:!0,writable:!!I})}var Ue=t(Ke),Kn="[object Error]";function Dt(f,m){var y=u,I=tt[ye][ne](f);I===Kn&&(f={stack:Ue(f.stack),message:Ue(f.message),name:Ue(f.name)});try{y=JSON.stringify(f,s,m?typeof m=="number"?m:4:n),y=(y?y.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):s)||Ue(f)}catch(F){y=" - "+Dt(F,m)}return I+": "+y}function br(f){throw new Error(f)}function ei(f){throw new TypeError(f)}var qi=r(Ae,"freeze");function Gr(f){return f}function yn(f){return f[A]||s}var Bi=r(Ae,"assign"),ga=r(Ae,"keys"),xr=t(qi,Gr),rr=t(r(Ae,"getPrototypeOf"),yn);function fr(f){return $t(f,1,0,xr)}function jr(f){var m={};return Ht(f,function(y,I){nn(m,y,I[1]),nn(m,I[0],I[1])}),xr(m)}function jf(f){return jr(f)}var Sn="__tsUtils$gblCfg",bl;function Dc(){var f;return typeof globalThis!==U&&(f=globalThis),!f&&typeof self!==U&&(f=self),!f&&typeof window!==U&&(f=window),!f&&typeof global!==U&&(f=global),f}function bn(){if(!bl){var f=Sr(Dc).v||{};bl=f[Sn]=f[Sn]||{}}return bl}var qa=or;function or(f,m,y){var I=m?m[f]:s;return function(F){var H=(F?F[f]:s)||I;if(H||y){var J=arguments;return(H||y).apply(F,H?yr[ne](J,1):J)}ei('"'+Ue(f)+'" not defined for '+Dt(F))}}var xn=r(Qe,"max"),zn=qa("slice",ct),mo=qa("substring",ct),ws=or("substr",ct,Cc);function Cc(f,m,y){return nt(f)&&ei("Invalid "+Dt(f)),y<0?u:(m=m||0,m<0&&(m=xn(m+f[de],0)),Kr(y)?zn(f,m):zn(f,m,m+y))}function El(f,m){return mo(f,0,m)}var ho="_urid",$o;function kn(){if(!$o){var f=bn();$o=f.gblSym=f.gblSym||{k:{},s:{}}}return $o}function _o(f){var m={description:Ue(f),toString:function(){return Q+"("+f+")"}};return m[pe]=!0,m}function Ts(f){var m=kn();if(!at(m.k,f)){var y=_o(f),I=ga(m.s).length;y[ho]=function(){return I+"_"+y[ye]()},m.k[f]=y,m.s[y[ho]()]=Ue(f)}return m.k[f]}var ya;function Uu(){ya=bn()}function Is(f){return Qt({toJSON:function(){return f}},"v",{value:f})}var Nr="window",Or;function ti(f,m){var y;return function(){return!ya&&Uu(),(!y||ya.lzy)&&(y=Is(Sr(f,m).v)),y.v}}function zi(f){return!ya&&Uu(),(!Or||f===!1||ya.lzy)&&(Or=Is(Sr(Dc).v||s)),Or.v}function dn(f,m){var y;if(!Or||m===!1?y=zi(m):y=Or.v,y&&y[f])return y[f];if(f===Nr)try{return window}catch{}return s}var ri=ti(dn,["document"]);function ni(){return!!Ns()}var Ns=ti(dn,[Nr]);function Fd(){return!!an()}var an=ti(dn,["navigator"]),go,qo;function On(){return go=Is(Sr(dn,[Q]).v),go}function Bo(f){var m=(ya.lzy?0:go)||On();return m.v?m.v[f]:n}function ou(f,m){!ya&&Uu();var y=(ya.lzy?0:go)||On();return y.v?y.v(f):m?s:_o(f)}function Ba(f){return!ya&&Uu(),qo=(ya.lzy?0:qo)||Is(Sr(Bo,["for"]).v),(qo.v||Ts)(f)}function on(f,m,y){return f.apply(m,y)}function Mn(f,m,y){if(f)for(var I=f[de]>>>0,F=0;F<I&&!(F in f&&m[ne](y||f,f[F],F,f)===-1);F++);}var ju=qa("indexOf",kt),ai=qa("map",kt),Ir=qa("reduce",kt),sa=t(r(Ae,"create"),Yf);function Yf(f){if(!f)return{};var m=typeof f;m!==b&&m!==h&&ei("Prototype must be an Object or function: "+Dt(f));function y(){}return y[N]=f,new y}var Sa;function zo(f,m){var y=Ae.setPrototypeOf||function(I,F){var H;!Sa&&(Sa=Is((H={},H[A]=[],H instanceof Array))),Sa.v?I[A]=F:Ht(F,function(J,re){return I[J]=re})};return y(f,m)}function xc(f,m,y){Sr(Ur,[m,ue,{v:f,c:!0,e:!1}]),m=zo(m,y);function I(){this[V]=m,Sr(Ur,[this,ue,{v:f,c:!0,e:!1}])}return m[N]=y===s?sa(y):(I[N]=y[N],new I),m}function Go(f,m){m&&(f[ue]=m)}function $f(f,m,y){var I=y||Error,F=I[N][ue],H=Error.captureStackTrace;return xc(f,function(){var J=this,re=arguments;try{Sr(Go,[I,f]);var te=on(I,J,yr[ne](re))||J;if(te!==J){var _e=rr(J);_e!==rr(te)&&zo(te,_e)}return H&&H(te,J[V]),m&&m(te,re),te}finally{Sr(Go,[I,F])}},I)}function Qr(){return(Date.now||wl)()}function wl(){return new Date().getTime()}function za(f){return function(y){return nt(y)&&ei("strTrim called ["+Dt(y)+"]"),y&&y.replace&&(y=y.replace(f,u)),y}}var Ud=za(/^\s+|(?=\s)\s+$/g),ii=or("trim",ct,Ud),Up,oi,Tl;function Gi(f){if(!f||typeof f!==b)return!1;Tl||(Tl=ni()?Ns():!0);var m=!1;if(f!==Tl){oi||(Up=Function[N][ye],oi=Up[ne](Ae));try{var y=rr(f);m=!y,m||(gn(y,V)&&(y=y[V]),m=!!(y&&typeof y===h&&Up[ne](y)===oi))}catch{}}return m}var qf;function vr(){return!ya&&Uu(),(!qf||ya.lzy)&&(qf=Is(Sr(dn,["performance"]).v)),qf.v}var Vo=or("endsWith",ct,Bf);function Bf(f,m,y){Ve(f)||ei("'"+Dt(f)+"' is not a string");var I=Ve(m)?m:Ue(m),F=!Kr(y)&&y<f[de]?y:f[de];return mo(f,F-I[de],F)===I}var Ga=qa("indexOf",ct),Pc="ref",xt="unref",si="hasRef",Yu="enabled";function Il(f,m,y){var I=!0,F=f?m(s):s,H;function J(){return I=!1,F&&F[xt]&&F[xt](),H}function re(){F&&y(F),F=s}function te(){return F=m(F),I||J(),H}function _e(et){!et&&F&&re(),et&&!F&&te()}return H={cancel:re,refresh:te},H[si]=function(){return F&&F[si]?F[si]():I},H[Pc]=function(){return I=!0,F&&F[Pc]&&F[Pc](),H},H[xt]=J,H=Qt(H,Yu,{get:function(){return!!F},set:_e}),{h:H,dn:function(){F=s}}}function kv(f,m,y){var I=Ot(m),F=I?m.length:0,H=(F>0?m[0]:I?n:m)||setTimeout,J=(F>1?m[1]:n)||clearTimeout,re=y[0];y[0]=function(){te.dn(),on(re,n,yr[ne](arguments))};var te=Il(f,function(_e){if(_e){if(_e.refresh)return _e.refresh(),_e;on(J,n,[_e])}return on(H,n,y)},function(_e){on(J,n,[_e])});return te.h}function Ei(f,m){return kv(!0,n,yr[ne](arguments))}var Nl=fr,jd=jf,su="toLowerCase",wi="blkVal",dt="length",ua="rdOnly",uu="notify",Ds="warnToConsole",Yd="throwInternal",$d="setDf",Wn="watch",ui="logger",qd="apply",Ti="push",Va="splice",Im="hdlr",Ov="cancel",jp="name",cu="unload",Yp="version",sh="loggingLevelConsole",Bd="messageId",xa="message",Dl="diagLog",Cl="userAgent",Vi="split",ci="nodeType",lu="replace",$p="logInternalMessage",Ii="type",zd="handler",$u="traceId",Ac="spanId",xl="traceFlags",zf="getAttribute",Gd;function qp(f,m){Gd||(Gd=$f("AggregationError",function(I,F){F[dt]>1&&(I.errors=F[1])}));var y=f||"One or more errors occurred.";throw Mn(m,function(I,F){y+=`
`.concat(F," > ").concat(Dt(I))}),new Gd(y,m||[])}var Bp="function",fu="object",Vd="undefined",Cs="prototype",qu=Object,Ni=qu[Cs];(zi()||{}).Symbol,(zi()||{}).Reflect;var Pl="hasOwnProperty",Gf=function(f){for(var m,y=1,I=arguments.length;y<I;y++){m=arguments[y];for(var F in m)Ni[Pl].call(m,F)&&(f[F]=m[F])}return f},Rc=Bi||Gf,Hi=function(f,m){return Hi=qu.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,I){y.__proto__=I}||function(y,I){for(var F in I)I[Pl](F)&&(y[F]=I[F])},Hi(f,m)};function Mv(f,m){typeof m!==Bp&&m!==null&&ei("Class extends value "+String(m)+" is not a constructor or null"),Hi(f,m);function y(){this.constructor=f}f[Cs]=m===null?sa(m):(y[Cs]=m[Cs],new y)}var Ho,yo="constructor",Ki="prototype",du="function",Vf="_dynInstFuncs",kc="_isDynProxy",Oc="_dynClass",Bu="_dynCls$",Hf="_dynInstChk",Al=Hf,Kf="_dfOpts",zu="_unknown_",Wi="__proto__",Mc="_dyn"+Wi,So="__dynProto$Gbl",li="_dynInstProto",Ko="useBaseInst",Vr="setInstFuncs",xs=Object,Ji=xs.getPrototypeOf,Lc=xs.getOwnPropertyNames,Fc=zi(),Wo=Fc[So]||(Fc[So]={o:(Ho={},Ho[Vr]=!0,Ho[Ko]=!0,Ho),n:1e3});function Rl(f){return f&&(f===xs[Ki]||f===Array[Ki])}function Jo(f){return Rl(f)||f===Function[Ki]}function pu(f){var m;if(f){if(Ji)return Ji(f);var y=f[Wi]||f[Ki]||(f[yo]?f[yo][Ki]:null);m=f[Mc]||y,gn(f,Mc)||(delete f[li],m=f[Mc]=f[li]||f[Mc],f[li]=y)}return m}function Ha(f,m){var y=[];if(Lc)y=Lc(f);else for(var I in f)typeof I=="string"&&gn(f,I)&&y.push(I);if(y&&y.length>0)for(var F=0;F<y.length;F++)m(y[F])}function Hd(f,m,y){return m!==yo&&typeof f[m]===du&&(y||gn(f,m))&&m!==Wi&&m!==Ki}function Gu(f){ei("DynamicProto: "+f)}function Pa(f){var m=sa(null);return Ha(f,function(y){!m[y]&&Hd(f,y,!1)&&(m[y]=f[y])}),m}function Wf(f,m){for(var y=f.length-1;y>=0;y--)if(f[y]===m)return!0;return!1}function Kd(f,m,y,I){function F(te,_e,et){var Et=_e[et];if(Et[kc]&&I){var Kt=te[Vf]||{};Kt[Al]!==!1&&(Et=(Kt[_e[Oc]]||{})[et]||Et)}return function(){return Et.apply(te,arguments)}}var H=sa(null);Ha(y,function(te){H[te]=F(m,y,te)});for(var J=pu(f),re=[];J&&!Jo(J)&&!Wf(re,J);)Ha(J,function(te){!H[te]&&Hd(J,te,!Ji)&&(H[te]=F(m,J,te))}),re.push(J),J=pu(J);return H}function kl(f,m,y,I){var F=null;if(f&&gn(y,Oc)){var H=f[Vf]||sa(null);if(F=(H[y[Oc]]||sa(null))[m],F||Gu("Missing ["+m+"] "+du),!F[Hf]&&H[Al]!==!1){for(var J=!gn(f,m),re=pu(f),te=[];J&&re&&!Jo(re)&&!Wf(te,re);){var _e=re[m];if(_e){J=_e===I;break}te.push(re),re=pu(re)}try{J&&(f[m]=F),F[Hf]=1}catch{H[Al]=!1}}}return F}function Ol(f,m,y){var I=m[f];return I===y&&(I=pu(m)[f]),typeof I!==du&&Gu("["+f+"] is not a "+du),I}function Wd(f,m,y,I,F){function H(te,_e){var et=function(){var Et=kl(this,_e,te,et)||Ol(_e,te,et);return Et.apply(this,arguments)};return et[kc]=1,et}if(!Rl(f)){var J=y[Vf]=y[Vf]||sa(null);if(!Rl(J)){var re=J[m]=J[m]||sa(null);J[Al]!==!1&&(J[Al]=!!F),Rl(re)||Ha(y,function(te){Hd(y,te,!1)&&y[te]!==I[te]&&(re[te]=y[te],delete y[te],(!gn(f,te)||f[te]&&!f[te][kc])&&(f[te]=H(f,te)))})}}}function Lv(f,m){if(Ji){for(var y=[],I=pu(m);I&&!Jo(I)&&!Wf(y,I);){if(I===f)return!0;y.push(I),I=pu(I)}return!1}return!0}function Vu(f,m){return gn(f,Ki)?f.name||m||zu:((f||{})[yo]||{}).name||m||zu}function bo(f,m,y,I){gn(f,Ki)||Gu("theClass is an invalid class definition.");var F=f[Ki];Lv(F,m)||Gu("["+Vu(f)+"] not in hierarchy of ["+Vu(m)+"]");var H=null;gn(F,Oc)?H=F[Oc]:(H=Bu+Vu(f,"_")+"$"+Wo.n,Wo.n++,F[Oc]=H);var J=bo[Kf],re=!!J[Ko];re&&I&&I[Ko]!==void 0&&(re=!!I[Ko]);var te=Pa(m),_e=Kd(F,m,te,re);y(m,_e);var et=!!Ji&&!!J[Vr];et&&I&&(et=!!I[Vr]),Wd(F,H,m,te,et!==!1)}bo[Kf]=Wo.o;var Zi=void 0,pn="",Ml="Not dynamic - ",Hu=/-([a-z])/g,Ku=/([^\w\d_$])/g,Jd=/^(\d+[\w\d_$])/;function Di(f){return!nt(f)}function vu(f){var m=f;return m&&Ve(m)&&(m=m[lu](Hu,function(y,I){return I.toUpperCase()}),m=m[lu](Ku,"_"),m=m[lu](Jd,function(y,I){return"_"+I})),m}function Ps(f,m){return f&&m?Ga(f,m)!==-1:!1}function sr(f){return f&&f.toISOString()||""}function Eo(f){return Lt(f)?f[jp]:pn}function Zo(f){return function(){function m(){var y=this;f&&Ht(f,function(I,F){y[I]=F})}return m}()}var Ci="console",Jf="JSON",xi="crypto",mu="msCrypto",sn="msie",Ka="trident/",Mr=null,pt=null,Wu=null;function wo(){return typeof console!==Vd?console:dn(Ci)}function As(){return!!(typeof JSON===fu&&JSON||dn(Jf)!==null)}function Xi(){return As()?JSON||dn(Jf):null}function hu(){return dn(xi)}function Pi(){return dn(mu)}function Yr(){var f=an();if(f&&(f[Cl]!==pt||Mr===null)){pt=f[Cl];var m=(pt||pn)[su]();Mr=Ps(m,sn)||Ps(m,Ka)}return Mr}function To(f){return(Wu===null||f===!1)&&(Wu=Fd()&&!!an().sendBeacon),Wu}function Lr(f,m){if(f)for(var y=0;y<f[dt];y++){var I=f[y];if(I[jp]&&I[jp]===m)return I}return{}}function Io(f){var m=ri();return m&&f?Lr(m.querySelectorAll("meta"),f).content:null}function Zf(f){var m,y=vr();if(y){var I=y.getEntriesByType("navigation")||[];m=Lr((I[dt]>0?I[0]:{}).serverTiming,f).description}return m}var No=4294967296,Pn=4294967295,Qi=123456789,Xo=987654321,ba=!1,Aa=Qi,Uc=Xo;function Ju(f){f<0&&(f>>>=0),Aa=Qi+f&Pn,Uc=Xo-f&Pn,ba=!0}function Xf(){try{var f=Qr()&2147483647;Ju((Math.random()*No^f)+f)}catch{}}function Rs(f){return f>0?Math.floor(Do()/Pn*(f+1))>>>0:0}function Do(f){var m=0,y=hu()||Pi();return y&&y.getRandomValues&&(m=y.getRandomValues(new Uint32Array(1))[0]&Pn),m===0&&Yr()&&(ba||Xf(),m=Co()&Pn),m===0&&(m=Math.floor(No*Math.random()|0)),f||(m>>>=0),m}function Co(f){Uc=36969*(Uc&65535)+(Uc>>16)&Pn,Aa=18e3*(Aa&65535)+(Aa>>16)&Pn;var m=(Uc<<16)+(Aa&65535)>>>0&Pn|0;return f||(m>>>=0),m}function Zu(f){f===void 0&&(f=22);for(var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=Do()>>>0,I=0,F=pn;F[dt]<f;)I++,F+=m.charAt(y&63),y>>>=6,I===5&&(y=(Do()<<2&4294967295|y&3)>>>0,I=0);return F}var xo="3.3.4",Ln="."+Zu(6),Qf=0;function Xu(f){return f[ci]===1||f[ci]===9||!+f[ci]}function ks(f,m){var y=m[f.id];if(!y){y={};try{Xu(m)&&Ur(m,f.id,{e:!1,v:y})}catch{}}return y}function fi(f,m){return m===void 0&&(m=!1),vu(f+Qf+++(m?"."+xo:pn)+Ln)}function Qo(f){var m={id:fi("_aiData-"+(f||pn)+"."+xo),accept:function(y){return Xu(y)},get:function(y,I,F,H){var J=y[m.id];return J?J[vu(I)]:(H&&(J=ks(m,y),J[vu(I)]=F),F)},kill:function(y,I){if(y&&y[I])try{delete y[I]}catch{}}};return m}function Os(f){return f&&Bn(f)&&(f.isVal||f.fb||at(f,"v")||at(f,"mrg")||at(f,"ref")||f.set)}function Ai(f,m,y){var I,F=y.dfVal||vo;if(m&&y.fb){var H=y.fb;Ot(H)||(H=[H]);for(var J=0;J<H[dt];J++){var re=H[J],te=m[re];if(F(te)?I=te:f&&(te=f.cfg[re],F(te)&&(I=te),f.set(f.cfg,Ue(re),te)),F(I))break}}return!F(I)&&F(y.v)&&(I=y.v),I}function jc(f,m,y){var I=y;if(y&&Os(y)&&(I=Ai(f,m,y)),I){Os(I)&&(I=jc(f,m,I));var F;Ot(I)?(F=[],F[dt]=I[dt]):Gi(I)&&(F={}),F&&(Ht(I,function(H,J){J&&Os(J)&&(J=jc(f,m,J)),F[H]=J}),I=F)}return I}function _u(f,m,y,I){var F,H,J,re=I,te,_e,et,Et;Os(re)?(F=re.isVal,H=re.set,et=re[ua],Et=re[wi],te=re.mrg,_e=re.ref,!_e&&Kr(_e)&&(_e=!!te),J=Ai(f,m,re)):J=I,Et&&f[wi](m,y);var Kt,it=!0,lt=m[y];(lt||!nt(lt))&&(Kt=lt,it=!1,F&&Kt!==J&&!F(Kt)&&(Kt=J,it=!0),H&&(Kt=H(Kt,J,m),it=Kt===J)),it?J?Kt=jc(f,m,J):Kt=J:(Gi(Kt)||Ot(J))&&te&&J&&(Gi(J)||Ot(J))&&Ht(J,function(nr,Ft){_u(f,Kt,nr,Ft)}),f.set(m,y,Kt),_e&&f.ref(m,y),et&&f[ua](m,y)}var ca=Ba("[[ai_dynCfg_1]]"),gu=Ba("[[ai_blkDynCfg_1]]"),Ms=Ba("[[ai_frcDynCfg_1]]");function Ri(f){if(f){var m;if(Ot(f)?(m=[],m[dt]=f[dt]):Gi(f)&&(m={}),m)return Ht(f,function(y,I){m[y]=Ri(I)}),m}return f}function Qu(f){if(f){var m=f[ca]||f;if(m.cfg&&(m.cfg===f||m.cfg[ca]===m))return m}return null}function un(f){if(f&&(Gi(f)||Ot(f)))try{f[gu]=!0}catch{}return f}function Jn(f,m,y){var I=!1;return y&&!f[m.blkVal]&&(I=y[Ms],!I&&!y[gu]&&(I=Gi(y)||Ot(y))),I}function ki(f){ei("InvalidAccess:"+f)}var ec=["push","pop","shift","unshift","splice"],es=function(f,m,y,I){f&&f[Yd](3,108,"".concat(y," [").concat(m,"] failed - ")+Dt(I))};function Zd(f,m,y){Ot(m)&&Mn(ec,function(I){var F=m[I];m[I]=function(){for(var H=[],J=0;J<arguments.length;J++)H[J]=arguments[J];var re=F[qd](this,H);return Wa(f,m,y,"Patching"),re}})}function di(f,m){var y=rt(f,m);return y&&y.get}function Yc(f,m,y,I){var F={n:y,h:[],trk:function(_e){_e&&_e.fn&&(ju(F.h,_e)===-1&&F.h[Ti](_e),f.trk(_e,F))},clr:function(_e){var et=ju(F.h,_e);et!==-1&&F.h[Va](et,1)}},H=!0,J=!1;function re(){H&&(J=J||Jn(re,f,I),I&&!I[ca]&&J&&(I=Wa(f,I,y,"Converting")),H=!1);var _e=f.act;return _e&&F.trk(_e),I}re[f.prop]={chng:function(){f.add(F)}};function te(_e){if(I!==_e){re[f.ro]&&!f.upd&&ki("["+y+"] is read-only:"+Dt(m)),H&&(J=J||Jn(re,f,I),H=!1);var et=J&&re[f.rf];if(J)if(et){Ht(I,function(Kt){I[Kt]=_e?_e[Kt]:Zi});try{Ht(_e,function(Kt,it){Ea(f,I,Kt,it)}),_e=I}catch(Kt){es((f.hdlr||{})[ui],y,"Assigning",Kt),J=!1}}else I&&I[ca]&&Ht(I,function(Kt){var it=di(I,Kt);if(it){var lt=it[f.prop];lt&&lt.chng()}});if(_e!==I){var Et=_e&&Jn(re,f,_e);!et&&Et&&(_e=Wa(f,_e,y,"Converting")),I=_e,J=Et}f.add(F)}}Ur(m,F.n,{g:re,s:te})}function Ea(f,m,y,I){if(m){var F=di(m,y),H=F&&!!F[f.prop];H?m[y]=I:Yc(f,m,y,I)}return m}function ed(f,m,y,I){if(m){var F=di(m,y),H=F&&!!F[f.prop],J=I&&I[0],re=I&&I[1],te=I&&I[2];if(!H){if(te)try{un(m)}catch(_e){es((f.hdlr||{})[ui],y,"Blocking",_e)}try{Ea(f,m,y,m[y]),F=di(m,y)}catch(_e){es((f.hdlr||{})[ui],y,"State",_e)}}J&&(F[f.rf]=J),re&&(F[f.ro]=re),te&&(F[f.blkVal]=!0)}return m}function Wa(f,m,y,I){try{Ht(m,function(F,H){Ea(f,m,F,H)}),m[ca]||(Qt(m,ca,{get:function(){return f[Im]}}),Zd(f,m,y))}catch(F){es((f.hdlr||{})[ui],y,I,F)}return m}var ts="[[ai_",rs="]]";function Xd(f){var m,y=ou(ts+"get"+f.uid+rs),I=ou(ts+"ro"+f.uid+rs),F=ou(ts+"rf"+f.uid+rs),H=ou(ts+"blkVal"+f.uid+rs),J=ou(ts+"dtl"+f.uid+rs),re=null,te=null,_e;function et(lt,nr){var Ft=_e.act;try{_e.act=lt,lt&&lt[J]&&(Mn(lt[J],function(Er){Er.clr(lt)}),lt[J]=[]),nr({cfg:f.cfg,set:f.set.bind(f),setDf:f[$d].bind(f),ref:f.ref.bind(f),rdOnly:f[ua].bind(f)})}catch(Er){var hr=f[ui];throw hr&&hr[Yd](1,107,Dt(Er)),Er}finally{_e.act=Ft||null}}function Et(){if(re){var lt=re;re=null,te&&te[Ov](),te=null;var nr=[];if(Mn(lt,function(Ft){if(Ft&&(Ft[J]&&(Mn(Ft[J],function(hr){hr.clr(Ft)}),Ft[J]=null),Ft.fn))try{et(Ft,Ft.fn)}catch(hr){nr[Ti](hr)}}),re)try{Et()}catch(Ft){nr[Ti](Ft)}nr[dt]>0&&qp("Watcher error(s): ",nr)}}function Kt(lt){if(lt&&lt.h[dt]>0){re||(re=[]),te||(te=Ei(function(){te=null,Et()},0));for(var nr=0;nr<lt.h[dt];nr++){var Ft=lt.h[nr];Ft&&ju(re,Ft)===-1&&re[Ti](Ft)}}}function it(lt,nr){if(lt){var Ft=lt[J]=lt[J]||[];ju(Ft,nr)===-1&&Ft[Ti](nr)}}return _e=(m={prop:y,ro:I,rf:F},m[wi]=H,m[Im]=f,m.add=Kt,m[uu]=Et,m.use=et,m.trk=it,m),_e}function Ll(f,m){var y={fn:m,rm:function(){y.fn=null,f=null,m=null}};return Ur(y,"toJSON",{v:function(){return"WatcherHandler"+(y.fn?"":"[X]")}}),f.use(y,m),y}function td(f,m,y){var I,F=Qu(m);if(F)return F;var H=fi("dyncfg",!0),J=m&&y!==!1?m:Ri(m),re;function te(){re[uu]()}function _e(hr,Er,Pt){try{hr=Ea(re,hr,Er,Pt)}catch(En){es(f,Er,"Setting value",En)}return hr[Er]}function et(hr){return Ll(re,hr)}function Et(hr,Er){re.use(null,function(Pt){var En=re.upd;try{Kr(Er)||(re.upd=Er),hr(Pt)}finally{re.upd=En}})}function Kt(hr,Er){var Pt;return ed(re,hr,Er,(Pt={},Pt[0]=!0,Pt))[Er]}function it(hr,Er){var Pt;return ed(re,hr,Er,(Pt={},Pt[1]=!0,Pt))[Er]}function lt(hr,Er){var Pt;return ed(re,hr,Er,(Pt={},Pt[2]=!0,Pt))[Er]}function nr(hr,Er){return Er&&Ht(Er,function(Pt,En){_u(Ft,hr,Pt,En)}),hr}var Ft=(I={uid:null,cfg:J},I[ui]=f,I[uu]=te,I.set=_e,I[$d]=nr,I[Wn]=et,I.ref=Kt,I[ua]=it,I[wi]=lt,I._block=Et,I);return Ur(Ft,"uid",{c:!1,e:!1,w:!1,v:H}),re=Xd(Ft),Wa(re,J,"config","Creating"),Ft}function Fl(f,m){f?(f[Ds](m),f[Yd](2,108,m)):ki(m)}function Po(f,m,y,I){var F=td(y,f||{},I);return m&&F[$d](F.cfg,m),F}function Ja(f,m,y){var I=f[ca]||f;return I.cfg&&(I.cfg===f||I.cfg[ca]===I)?I[Wn](m):(Fl(y,Ml+Dt(f)),Po(f,null,y)[Wn](m))}var $c=null;function Fv(){var f=dn("Microsoft");return f&&($c=f.ApplicationInsights),$c}function tc(f){var m=$c;return!m&&f.disableDbgExt!==!0&&(m=$c||Fv()),m?m.ChromeDbgExt:null}var rc,ns="warnToConsole",Ul="AI (Internal): ",Nm="AI: ",Qd="AITR_",jl={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},nc=(rc={},rc[0]=null,rc[1]="errorToConsole",rc[2]=ns,rc[3]="debugToConsole",rc);function zp(f){return f?'"'+f[lu](/\"/g,pn)+'"':pn}function Uv(f,m){var y=wo();if(y){var I="log";y[f]&&(I=f),Tr(y[I])&&y[I](m)}}var ac=function(){function f(m,y,I,F){I===void 0&&(I=!1);var H=this;H[Bd]=m,H[xa]=(I?Nm:Ul)+m;var J=pn;As()&&(J=Xi().stringify(F));var re=(y?" message:"+zp(y):pn)+(F?" props:"+zp(J):pn);H[xa]+=re}return f.dataType="MessageData",f}();function jv(f,m){return(f||{})[ui]||new Yl(m)}var Yl=function(){function f(m){this.identifier="DiagnosticLogger",this.queue=[];var y=0,I={},F,H,J,re,te;bo(f,this,function(_e){te=Et(m||{}),_e.consoleLoggingLevel=function(){return F},_e[Yd]=function(lt,nr,Ft,hr,Er){Er===void 0&&(Er=!1);var Pt=new ac(nr,Ft,Er,hr);if(re)throw Dt(Pt);var En=nc[lt]||ns;if(Kr(Pt[xa]))it("throw"+(lt===1?"Critical":"Warning"),Pt);else{if(Er){var vc=+Pt[Bd];!I[vc]&&F>=lt&&(_e[En](Pt[xa]),I[vc]=!0)}else F>=lt&&_e[En](Pt[xa]);et(lt,Pt)}},_e.debugToConsole=function(lt){Uv("debug",lt),it("warning",lt)},_e[Ds]=function(lt){Uv("warn",lt),it("warning",lt)},_e.errorToConsole=function(lt){Uv("error",lt),it("error",lt)},_e.resetInternalMessageCount=function(){y=0,I={}},_e[$p]=et,_e[cu]=function(lt){te&&te.rm(),te=null};function et(lt,nr){if(!Kt()){var Ft=!0,hr=Qd+nr[Bd];if(I[hr]?Ft=!1:I[hr]=!0,Ft&&(lt<=H&&(_e.queue[Ti](nr),y++,it(lt===1?"error":"warn",nr)),y===J)){var Er="Internal events throttle limit per PageView reached for this app.",Pt=new ac(23,Er,!1);_e.queue[Ti](Pt),lt===1?_e.errorToConsole(Er):_e[Ds](Er)}}}function Et(lt){return Ja(Po(lt,jl,_e).cfg,function(nr){var Ft=nr.cfg;F=Ft[sh],H=Ft.loggingLevelTelemetry,J=Ft.maxMessageLimit,re=Ft.enableDebug})}function Kt(){return y>=J}function it(lt,nr){var Ft=tc(m||{});Ft&&Ft[Dl]&&Ft[Dl](lt,nr)}})}return f.__ieDyn=1,f}();function ep(f){return f||new Yl}function eo(f,m,y,I,F,H){H===void 0&&(H=!1),ep(f)[Yd](m,y,I,F,H)}function Gp(){for(var f=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],m=pn,y,I=0;I<4;I++)y=Do(),m+=f[y&15]+f[y>>4&15]+f[y>>8&15]+f[y>>12&15]+f[y>>16&15]+f[y>>20&15]+f[y>>24&15]+f[y>>28&15];var F=f[8+(Do()&3)|0];return ws(m,0,8)+ws(m,9,4)+"4"+ws(m,13,3)+F+ws(m,16,3)+ws(m,19,12)}var Dm=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,rd="00",Vp="ff",tp="00000000000000000000000000000000",qc="0000000000000000",nd=1;function ic(f,m,y){return f&&f[dt]===m&&f!==y?!!f.match(/^[\da-f]*$/i):!1}function Ls(f,m,y){return ic(f,m)?f:y}function Bc(f){(isNaN(f)||f<0||f>255)&&(f=1);for(var m=f.toString(16);m[dt]<2;)m="0"+m;return m}function Yv(f,m,y,I){var F;return F={},F[Yp]=ic(I,2,Vp)?I:rd,F[$u]=zc(f)?f:Gp(),F[Ac]=np(m)?m:El(Gp(),16),F.traceFlags=y>=0&&y<=255?y:1,F}function rp(f,m){var y;if(!f||(Ot(f)&&(f=f[0]||""),!f||!Ve(f)||f[dt]>8192))return null;if(f.indexOf(",")!==-1){var I=f[Vi](",");f=I[m>0&&I[dt]>m?m:0]}var F=Dm.exec(ii(f));return!F||F[1]===Vp||F[2]===tp||F[3]===qc?null:(y={version:(F[1]||pn)[su](),traceId:(F[2]||pn)[su](),spanId:(F[3]||pn)[su]()},y[xl]=parseInt(F[4],16),y)}function zc(f){return ic(f,32,tp)}function np(f){return ic(f,16,qc)}function Fs(f){return!(!f||!ic(f[Yp],2,Vp)||!ic(f[$u],32,tp)||!ic(f[Ac],16,qc)||!ic(Bc(f[xl]),2))}function $r(f){return Fs(f)?(f[xl]&nd)===nd:!1}function oc(f){if(f){var m=Bc(f[xl]);ic(m,2)||(m="01");var y=f[Yp]||rd;return y!=="00"&&y!=="ff"&&(y=rd),"".concat(y.toLowerCase(),"-").concat(Ls(f.traceId,32,tp).toLowerCase(),"-").concat(Ls(f.spanId,16,qc).toLowerCase(),"-").concat(m.toLowerCase())}return""}function la(f){var m="traceparent",y=rp(Io(m),f);return y||(y=rp(Zf(m),f)),y}function ap(f){var m=f.getElementsByTagName("script"),y=[];return Mn(m,function(I){var F=I[zf]("src");if(F){var H=I[zf]("crossorigin"),J=I.hasAttribute("async")===!0,re=I.hasAttribute("defer")===!0,te=I[zf]("referrerpolicy"),_e={url:F};H&&(_e.crossOrigin=H),J&&(_e.async=J),re&&(_e.defer=re),te&&(_e.referrerPolicy=te),y[Ti](_e)}}),y}var ad="on",Gc="attachEvent",sc="addEventListener",Za="detachEvent",id="removeEventListener",Zn="events";fi("aiEvtPageHide"),fi("aiEvtPageShow");var dr=/\.[\.]+/g,Us=/[\.]+$/,mn=1,as=Qo("events"),uc=/^([^.]*)(?:\.(.+)|)/;function cc(f){return f&&f[lu]?f[lu](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,pn):f}function js(f,m){var y;if(m){var I=pn;Ot(m)?(I=pn,Mn(m,function(H){H=cc(H),H&&(H[0]!=="."&&(H="."+H),I+=H)})):I=cc(m),I&&(I[0]!=="."&&(I="."+I),f=(f||pn)+I)}var F=uc.exec(f||pn)||[];return y={},y[Ii]=F[1],y.ns=(F[2]||pn).replace(dr,".").replace(Us,pn)[Vi](".").sort().join("."),y}function to(f,m,y){y===void 0&&(y=!0);var I=as.get(f,Zn,{},y),F=I[m];return F||(F=I[m]=[]),F}function $l(f,m,y,I){f&&m&&m[Ii]&&(f[id]?f[id](m[Ii],y,I):f[Za]&&f[Za](ad+m[Ii],y))}function Hp(f,m,y,I){var F=!1;return f&&m&&m[Ii]&&y&&(f[sc]?(f[sc](m[Ii],y,I),F=!0):f[Gc]&&(f[Gc](ad+m[Ii],y),F=!0)),F}function ql(f,m,y,I){for(var F=m[dt];F--;){var H=m[F];H&&(!y.ns||y.ns===H.evtName.ns)&&(!I||I(H))&&($l(f,H.evtName,H[zd],H.capture),m[Va](F,1))}}function Kp(f,m,y){if(m[Ii])ql(f,to(f,m[Ii]),m,y);else{var I=as.get(f,Zn,{});Ht(I,function(F,H){ql(f,H,m,y)}),ga(I)[dt]===0&&as.kill(f,Zn)}}function Bl(f,m){var y;return m?(Ot(m)?y=[f].concat(m):y=[f,m],y=js("xx",y).ns[Vi](".")):y=f,y}function Vc(f,m,y,I,F){var H;F===void 0&&(F=!1);var J=!1;if(f)try{var re=js(m,I);if(J=Hp(f,re,y,F),J&&as.accept(f)){var te=(H={guid:mn++,evtName:re},H[zd]=y,H.capture=F,H);to(f,re.type)[Ti](te)}}catch{}return J}function ip(f,m,y,I,F){if(F===void 0&&(F=!1),f)try{var H=js(m,I),J=!1;Kp(f,H,function(re){return H.ns&&!y||re[zd]===y?(J=!0,!0):!1}),J||$l(f,H,y,F)}catch{}}var Gn="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Hc="sampleRate",fa="ProcessLegacy",yu="http.method",op="https://dc.services.visualstudio.com",od="/v2/track",da="not_specified",sd="iKey",sp=jd({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),Ys="split",bt="length",is="toLowerCase",os="ingestionendpoint",pi="toString",zl="push",Kc="removeItem",ss="name",Oi="message",Wc="count",ud="preTriggerDate",$s="disabled",Gl="interval",Jc="daysOfMonth",Vl="date",up="getUTCDate",cp="stringify",Wp="pathname",Cm="correlationHeaderExcludePatterns",us="extensionConfig",qs="exceptions",cs="parsedStack",Mi="properties",Bs="measurements",Su="sizeInBytes",vi="typeName",Zc="severityLevel",$v="problemGroup",lc="isManual",Jp="CreateFromInterface",Hl="assembly",Xc="fileName",Kl="hasFullStack",zs="level",Li="method",Qc="line",Wl="duration",cd="receivedResponse";function pa(f,m,y){var I=m[bt],F=Gs(f,m);if(F[bt]!==I){for(var H=0,J=F;y[J]!==void 0;)H++,J=mo(F,0,147)+Zl(H);F=J}return F}function Gs(f,m){var y;return m&&(m=ii(Ue(m)),m[bt]>150&&(y=mo(m,0,150),eo(f,2,57,"name is too long.  It has been truncated to 150 characters.",{name:m},!0))),y||m}function va(f,m,y){y===void 0&&(y=1024);var I;return m&&(y=y||1024,m=ii(Ue(m)),m[bt]>y&&(I=mo(m,0,y),eo(f,2,61,"string value is too long. It has been truncated to "+y+" characters.",{value:m},!0))),I||m}function ld(f,m){return Jl(f,m,2048,66)}function bu(f,m){var y;return m&&m[bt]>32768&&(y=mo(m,0,32768),eo(f,2,56,"message is too long, it has been truncated to 32768 characters.",{message:m},!0)),y||m}function fd(f,m){var y;if(m){var I=""+m;I[bt]>32768&&(y=mo(I,0,32768),eo(f,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:m},!0))}return y||m}function Ra(f,m){if(m){var y={};Ht(m,function(I,F){if(Bn(F)&&As())try{F=Xi()[cp](F)}catch(H){eo(f,2,49,"custom property is not valid",{exception:H},!0)}F=va(f,F,8192),I=pa(f,I,y),y[I]=F}),m=y}return m}function ma(f,m){if(m){var y={};Ht(m,function(I,F){I=pa(f,I,y),y[I]=F}),m=y}return m}function Zp(f,m){return m&&Jl(f,m,128,69)[pi]()}function Jl(f,m,y,I){var F;return m&&(m=ii(Ue(m)),m[bt]>y&&(F=mo(m,0,y),eo(f,2,I,"input is too long, it has been truncated to "+y+" characters.",{data:m},!0))),F||m}function Zl(f){var m="00"+f;return ws(m,m[bt]-3)}var Eu=ri()||{},qv=0,Bv=[null,null,null,null,null];function Xl(f){var m=qv,y=Bv,I=y[m];return Eu.createElement?y[m]||(I=y[m]=Eu.createElement("a")):I={host:zv(f,!0)},I.href=f,m++,m>=y[bt]&&(m=0),qv=m,I}function Xp(f){var m,y=Xl(f);return y&&(m=y.href),m}function Ql(f){var m,y=Xl(f);return y&&(m=y[Wp]),m}function Qp(f,m){return f?f.toUpperCase()+" "+m:m}function zv(f,m){var y=ef(f,m)||"";if(y){var I=y.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(I!=null&&I[bt]>3&&Ve(I[2])&&I[2][bt]>0)return I[2]+(I[3]||"")}return y}function ef(f,m){var y=null;if(f){var I=f.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(I!=null&&I[bt]>2&&Ve(I[2])&&I[2][bt]>0&&(y=I[2]||"",m&&I[bt]>2)){var F=(I[1]||"")[is](),H=I[3]||"";(F==="http"&&H===":80"||F==="https"&&H===":443")&&(H=""),y+=H}}return y}var Gv=[op+od,"https://breeze.aimon.applicationinsights.io"+od,"https://dc-int.services.visualstudio.com"+od],wu="cid-v1:";function el(f){return ju(Gv,f[is]())!==-1}function lp(f){wu=f}function ls(){return wu}function dd(f,m,y){if(!m||f&&f.disableCorrelationHeaders)return!1;if(f&&f[Cm]){for(var I=0;I<f.correlationHeaderExcludePatterns[bt];I++)if(f[Cm][I].test(m))return!1}var F=Xl(m).host[is]();if(F&&(Ga(F,":443")!==-1||Ga(F,":80")!==-1)&&(F=(ef(m,!0)||"")[is]()),(!f||!f.enableCorsCorrelation)&&F&&F!==y)return!1;var H=f&&f.correlationHeaderDomains;if(H){var J;if(Mn(H,function(_e){var et=new RegExp(_e.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));J=J||et.test(F)}),!J)return!1}var re=f&&f.correlationHeaderExcludedDomains;if(!re||re[bt]===0)return!0;for(var I=0;I<re[bt];I++){var te=new RegExp(re[I].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(te.test(F))return!1}return F&&F[bt]>0}function tf(f){if(f){var m=Ao(f,sp[1]);if(m&&m!==wu)return m}}function Ao(f,m){if(f)for(var y=f[Ys](","),I=0;I<y[bt];++I){var F=y[I][Ys]("=");if(F[bt]===2&&F[0]===m)return F[1]}}function tl(f,m,y,I){var F,H=I,J=I;if(m&&m[bt]>0){var re=Xl(m);if(F=re.host,!H)if(re[Wp]!=null){var te=re.pathname[bt]===0?"/":re[Wp];te.charAt(0)!=="/"&&(te="/"+te),J=re[Wp],H=va(f,y?y+" "+te:te)}else H=va(f,m)}else F=I,H=I;return{target:F,name:H,data:J}}function Vv(){var f=vr();if(f&&f.now&&f.timing){var m=f.now()+f.timing.navigationStart;if(m>0)return m}return Qr()}function rl(f,m){var y=null;return f!==0&&m!==0&&!nt(f)&&!nt(m)&&(y=m-f),y}function xm(f,m){var y=f||{};return{getName:function(){return y[ss]},setName:function(I){m&&m.setName(I),y[ss]=I},getTraceId:function(){return y.traceID},setTraceId:function(I){m&&m.setTraceId(I),zc(I)&&(y.traceID=I)},getSpanId:function(){return y.parentID},setSpanId:function(I){m&&m.setSpanId(I),np(I)&&(y.parentID=I)},getTraceFlags:function(){return y.traceFlags},setTraceFlags:function(I){m&&m.setTraceFlags(I),y.traceFlags=I}}}var rf=Nl({LocalStorage:0,SessionStorage:1}),Hv=Nl({AI:0,AI_AND_W3C:1,W3C:2}),ev=Nl({Normal:1,Critical:2}),Tu=void 0,Iu=void 0,nl="";function fs(){return mi()?Vs(rf.LocalStorage):null}function Vs(f){try{if(nt(zi()))return null;var m=new Date()[pi](),y=dn(f===rf.LocalStorage?"localStorage":"sessionStorage"),I=nl+m;y.setItem(I,m);var F=y.getItem(I)!==m;if(y[Kc](I),!F)return y}catch{}return null}function nf(){return al()?Vs(rf.SessionStorage):null}function pd(){Tu=!1,Iu=!1}function vd(f){nl=f||""}function af(){Tu=mi(!0),Iu=al(!0)}function mi(f){return(f||Tu===void 0)&&(Tu=!!Vs(rf.LocalStorage)),Tu}function of(f,m){var y=fs();if(y!==null)try{return y.getItem(m)}catch(I){Tu=!1,eo(f,2,1,"Browser failed read of local storage. "+Eo(I),{exception:Dt(I)})}return null}function Kv(f,m,y){var I=fs();if(I!==null)try{return I.setItem(m,y),!0}catch(F){Tu=!1,eo(f,2,3,"Browser failed write to local storage. "+Eo(F),{exception:Dt(F)})}return!1}function Pm(f,m){var y=fs();if(y!==null)try{return y[Kc](m),!0}catch(I){Tu=!1,eo(f,2,5,"Browser failed removal of local storage item. "+Eo(I),{exception:Dt(I)})}return!1}function al(f){return(f||Iu===void 0)&&(Iu=!!Vs(rf.SessionStorage)),Iu}function Am(){var f=[];return al()&&Ht(dn("sessionStorage"),function(m){f[zl](m)}),f}function Ro(f,m){var y=nf();if(y!==null)try{return y.getItem(m)}catch(I){Iu=!1,eo(f,2,2,"Browser failed read of session storage. "+Eo(I),{exception:Dt(I)})}return null}function Nu(f,m,y){var I=nf();if(I!==null)try{return I.setItem(m,y),!0}catch(F){Iu=!1,eo(f,2,4,"Browser failed write to session storage. "+Eo(F),{exception:Dt(F)})}return!1}function il(f,m){var y=nf();if(y!==null)try{return y[Kc](m),!0}catch(I){Iu=!1,eo(f,2,6,"Browser failed removal of session storage item. "+Eo(I),{exception:Dt(I)})}return!1}var Wv="appInsightsThrottle",fp=function(){function f(m,y){var I=this,F,H,J,re,te,_e,et,Et=!1,Kt=!1;lt(),I._getDbgPlgTargets=function(){return[et]},I.getConfig=function(){return J},I.canThrottle=function(Pe){var vt=hf(Pe),qt=nr(Pe);return Er(qt,F,vt)},I.isTriggered=function(Pe){return Ed(Pe)},I.isReady=function(){return Et},I.flush=function(Pe){try{var vt=_f(Pe);if(vt&&vt[bt]>0){var qt=vt.slice(0);return et[Pe]=[],Mn(qt,function(en){it(en.msgID,en[Oi],en.severity,!1)}),!0}}catch{}return!1},I.flushAll=function(){try{if(et){var Pe=!0;return Ht(et,function(vt){var qt=I.flush(parseInt(vt));Pe=Pe&&qt}),Pe}}catch{}return!1},I.onReadyState=function(Pe,vt){return vt===void 0&&(vt=!0),Et=nt(Pe)?!0:Pe,Et&&vt?I.flushAll():null},I.sendMessage=function(Pe,vt,qt){return it(Pe,vt,qt,!0)};function it(Pe,vt,qt,en){if(Et){var wa=mf(Pe);if(!wa)return;var Ta=nr(Pe),Xn=hf(Pe),hi=Er(Ta,F,Xn),ms=!1,dl=0,tm=Ed(Pe);try{hi&&!tm?(dl=Math.min(Ta.limit.maxSendNumber,Xn[Wc]+1),Xn[Wc]=0,ms=!0,te[Pe]=!0,Xn[ud]=new Date):(te[Pe]=hi,Xn[Wc]+=1);var Pu=Pt(Pe);fl(H,Pu,Xn);for(var wd=0;wd<dl;wd++)bd(Pe,H,vt,qt)}catch{}return{isThrottled:ms,throttleNum:dl}}else if(en){var Mm=_f(Pe);Mm[zl]({msgID:Pe,message:vt,severity:qt})}return null}function lt(){H=jv(m),te={},re={},et={},J={},Ft(109),_e=Di(y)?y:"",m.addUnloadHook(Ja(m.config,function(Pe){var vt=Pe.cfg;F=mi();var qt=vt.throttleMgrCfg||{};Ht(qt,function(en,wa){Ft(parseInt(en),wa)})}))}function nr(Pe){return J[Pe]||J[109]}function Ft(Pe,vt){var qt,en;try{var wa=vt||{},Ta={};Ta[$s]=!!wa[$s];var Xn=wa[Gl]||{};Kt=(Xn==null?void 0:Xn.daysOfMonth)&&(Xn==null?void 0:Xn.daysOfMonth[bt])>0,Ta[Gl]=hr(Xn);var hi={samplingRate:((qt=wa.limit)===null||qt===void 0?void 0:qt.samplingRate)||100,maxSendNumber:((en=wa.limit)===null||en===void 0?void 0:en.maxSendNumber)||1};Ta.limit=hi,J[Pe]=Ta}catch{}}function hr(Pe){Pe=Pe||{};var vt=Pe==null?void 0:Pe.monthInterval,qt=Pe==null?void 0:Pe.dayInterval;return nt(vt)&&nt(qt)&&(Pe.monthInterval=3,Kt||(Pe[Jc]=[28],Kt=!0)),Pe={monthInterval:Pe==null?void 0:Pe.monthInterval,dayInterval:Pe==null?void 0:Pe.dayInterval,daysOfMonth:Pe==null?void 0:Pe.daysOfMonth},Pe}function Er(Pe,vt,qt){if(Pe&&!Pe[$s]&&vt&&Di(qt)){var en=Ws(),wa=qt[Vl],Ta=Pe[Gl],Xn=1;if(Ta!=null&&Ta.monthInterval){var hi=(en.getUTCFullYear()-wa.getUTCFullYear())*12+en.getUTCMonth()-wa.getUTCMonth();Xn=vf(Ta.monthInterval,0,hi)}var ms=1;if(Kt)ms=ju(Ta[Jc],en[up]());else if(Ta!=null&&Ta.dayInterval){var dl=Math.floor((en.getTime()-wa.getTime())/864e5);ms=vf(Ta.dayInterval,0,dl)}return Xn>=0&&ms>=0}return!1}function Pt(Pe,vt){var qt=Di(vt)?vt:"";return Pe?Wv+qt+"-"+Pe:null}function En(Pe){try{if(Pe){var vt=new Date;return Pe.getUTCFullYear()===vt.getUTCFullYear()&&Pe.getUTCMonth()===vt.getUTCMonth()&&Pe[up]()===vt[up]()}}catch{}return!1}function vc(Pe,vt,qt){try{var en={date:Ws(),count:0};if(Pe){var wa=JSON.parse(Pe),Ta={date:Ws(wa[Vl])||en[Vl],count:wa[Wc]||en[Wc],preTriggerDate:wa.preTriggerDate?Ws(wa[ud]):void 0};return Ta}else return fl(vt,qt,en),en}catch{}return null}function Ws(Pe){try{if(Pe){var vt=new Date(Pe);if(!isNaN(vt.getDate()))return vt}else return new Date}catch{}return null}function fl(Pe,vt,qt){try{return Kv(Pe,vt,ii(JSON[cp](qt)))}catch{}return!1}function vf(Pe,vt,qt){return Pe<=0?1:qt>=vt&&(qt-vt)%Pe==0?Math.floor((qt-vt)/Pe)+1:-1}function bd(Pe,vt,qt,en){eo(vt,en||1,Pe,qt)}function mf(Pe){try{var vt=nr(Pe);return Rs(1e6)<=vt.limit.samplingRate}catch{}return!1}function hf(Pe){try{var vt=re[Pe];if(!vt){var qt=Pt(Pe,_e);vt=vc(of(H,qt),H,qt),re[Pe]=vt}return re[Pe]}catch{}return null}function Ed(Pe){var vt=te[Pe];if(nt(vt)){vt=!1;var qt=hf(Pe);qt&&(vt=En(qt[ud])),te[Pe]=vt}return te[Pe]}function _f(Pe){return et=et||{},nt(et[Pe])&&(et[Pe]=[]),et[Pe]}}return f}(),Jv=";",tv="=";function md(f){if(!f)return{};var m=f[Ys](Jv),y=Ir(m,function(F,H){var J=H[Ys](tv);if(J[bt]===2){var re=J[0][is](),te=J[1];F[re]=te}return F},{});if(ga(y)[bt]>0){if(y.endpointsuffix){var I=y.location?y.location+".":"";y[os]=y[os]||"https://"+I+"dc."+y.endpointsuffix}y[os]=y[os]||op,Vo(y[os],"/")&&(y[os]=y[os].slice(0,-1))}return y}var ol={parse:md},ro=function(){function f(m,y,I){var F=this,H=this;H.ver=1,H.sampleRate=100,H.tags={},H[ss]=va(m,I)||da,H.data=y,H.time=sr(new Date),H.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return F.sampleRate===100?4:1},tags:1,data:1}}return f}(),hd=function(){function f(m,y,I,F){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var H=this;H.ver=2,H[ss]=va(m,y)||da,H[Mi]=Ra(m,I),H[Bs]=ma(m,F)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.Event",f.dataType="EventData",f}(),sl="<no_method>",ka="error",no="stack",sf="stackDetails",Zv="errorSrc",Xv="message",ha="description";function ul(f,m){var y=f;return y&&!Ve(y)&&(JSON&&JSON[cp]?(y=JSON[cp](f),m&&(!y||y==="{}")&&(Tr(f[pi])?y=f[pi]():y=""+f)):y=""+f+" - (Missing JSON.stringify)"),y||""}function uf(f,m){var y=f;return f&&(y&&!Ve(y)&&(y=f[Xv]||f[ha]||y),y&&!Ve(y)&&(y=ul(y,!0)),f.filename&&(y=y+" @"+(f.filename||"")+":"+(f.lineno||"?")+":"+(f.colno||"?"))),m&&m!=="String"&&m!=="Object"&&m!=="Error"&&Ga(y||"",m)===-1&&(y=m+": "+y),y||""}function Rm(f){try{if(Bn(f))return"hasFullStack"in f&&"typeName"in f}catch{}return!1}function Qv(f){try{if(Bn(f))return"ver"in f&&"exceptions"in f&&"properties"in f}catch{}return!1}function cf(f){return f&&f.src&&Ve(f.src)&&f.obj&&Ot(f.obj)}function Oa(f){var m=f||"";Ve(m)||(Ve(m[no])?m=m[no]:m=""+m);var y=m[Ys](`
`);return{src:m,obj:y}}function dp(f){for(var m=[],y=f[Ys](`
`),I=0;I<y[bt];I++){var F=y[I];y[I+1]&&(F+="@"+y[I+1],I++),m[zl](F)}return{src:f,obj:m}}function fc(f){var m=null;if(f)try{if(f[no])m=Oa(f[no]);else if(f[ka]&&f[ka][no])m=Oa(f[ka][no]);else if(f.exception&&f.exception[no])m=Oa(f.exception[no]);else if(cf(f))m=f;else if(cf(f[sf]))m=f[sf];else if(Ns()&&Ns().opera&&f[Xv])m=dp(f[Oi]);else if(f.reason&&f.reason[no])m=Oa(f.reason[no]);else if(Ve(f))m=Oa(f);else{var y=f[Xv]||f[ha]||"";Ve(f[Zv])&&(y&&(y+=`
`),y+=" from "+f[Zv]),y&&(m=Oa(y))}}catch(I){m=Oa(I)}return m||{src:"",obj:null}}function cl(f){var m="";return f&&(f.obj?Mn(f.obj,function(y){m+=y+`
`}):m=f.src||""),m}function Hs(f){var m,y=f.obj;if(y&&y[bt]>0){m=[];var I=0,F=0;Mn(y,function(lt){var nr=lt[pi]();if(ko.regex.test(nr)){var Ft=new ko(nr,I++);F+=Ft[Su],m[zl](Ft)}});var H=32*1024;if(F>H)for(var J=0,re=m[bt]-1,te=0,_e=J,et=re;J<re;){var Et=m[J][Su],Kt=m[re][Su];if(te+=Et+Kt,te>H){var it=et-_e+1;m.splice(_e,it);break}_e=J,et=re,J++,re--}}return m}function lf(f){var m="";if(f&&(m=f.typeName||f[ss]||"",!m))try{var y=/function (.{1,200})\(/,I=y.exec(f.constructor[pi]());m=I&&I[bt]>1?I[1]:""}catch{}return m}function pp(f){if(f)try{if(!Ve(f)){var m=lf(f),y=ul(f,!1);return(!y||y==="{}")&&(f[ka]&&(f=f[ka],m=lf(f)),y=ul(f,!0)),Ga(y,m)!==0&&m!=="String"?m+":"+y:y}}catch{}return""+(f||"")}var St=function(){function f(m,y,I,F,H,J){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var re=this;re.ver=2,Qv(y)?(re[qs]=y[qs]||[],re[Mi]=y[Mi],re[Bs]=y[Bs],y[Zc]&&(re[Zc]=y[Zc]),y.id&&(re.id=y.id,y[Mi].id=y.id),y[$v]&&(re[$v]=y[$v]),nt(y[lc])||(re[lc]=y[lc])):(I||(I={}),J&&(I.id=J),re[qs]=[new Du(m,y,I)],re[Mi]=Ra(m,I),re[Bs]=ma(m,F),H&&(re[Zc]=H),J&&(re.id=J))}return f.CreateAutoException=function(m,y,I,F,H,J,re,te){var _e,et=lf(H||J||m);return _e={},_e[Oi]=uf(m,et),_e.url=y,_e.lineNumber=I,_e.columnNumber=F,_e.error=pp(H||J||m),_e.evt=pp(J||m),_e[vi]=et,_e.stackDetails=fc(re||H||J),_e.errorSrc=te,_e},f.CreateFromInterface=function(m,y,I,F){var H=y[qs]&&ai(y[qs],function(re){return Du[Jp](m,re)}),J=new f(m,Rc(Rc({},y),{exceptions:H}),I,F);return J},f.prototype.toInterface=function(){var m,y=this,I=y.exceptions,F=y.properties,H=y.measurements,J=y.severityLevel,re=y.problemGroup,te=y.id,_e=y.isManual,et=I instanceof Array&&ai(I,function(Et){return Et.toInterface()})||void 0;return m={ver:"4.0"},m[qs]=et,m.severityLevel=J,m.properties=F,m.measurements=H,m.problemGroup=re,m.id=te,m.isManual=_e,m},f.CreateSimpleException=function(m,y,I,F,H,J){var re;return{exceptions:[(re={},re[Kl]=!0,re.message=m,re.stack=H,re.typeName=y,re)]}},f.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",f.dataType="ExceptionData",f.formatError=pp,f}(),Du=function(){function f(m,y,I){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var F=this;if(Rm(y))F[vi]=y[vi],F[Oi]=y[Oi],F[no]=y[no],F[cs]=y[cs]||[],F[Kl]=y[Kl];else{var H=y,J=H&&H.evt;Lt(H)||(H=H[ka]||J||H),F[vi]=va(m,lf(H))||da,F[Oi]=bu(m,uf(y||H,F[vi]))||da;var re=y[sf]||fc(y);F[cs]=Hs(re),Ot(F[cs])&&ai(F[cs],function(te){te[Hl]=va(m,te[Hl]),te[Xc]=va(m,te[Xc])}),F[no]=fd(m,cl(re)),F.hasFullStack=Ot(F.parsedStack)&&F.parsedStack[bt]>0,I&&(I[vi]=I[vi]||F[vi])}}return f.prototype.toInterface=function(){var m,y=this,I=y[cs]instanceof Array&&ai(y[cs],function(H){return H.toInterface()}),F=(m={id:y.id,outerId:y.outerId,typeName:y[vi],message:y[Oi],hasFullStack:y[Kl],stack:y[no]},m[cs]=I||void 0,m);return F},f.CreateFromInterface=function(m,y){var I=y[cs]instanceof Array&&ai(y[cs],function(H){return ko[Jp](H)})||y[cs],F=new f(m,Rc(Rc({},y),{parsedStack:I}));return F},f}(),ko=function(){function f(m,y){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var I=this;if(I[Su]=0,typeof m=="string"){var F=m;I[zs]=y,I[Li]=sl,I[Hl]=ii(F),I[Xc]="",I[Qc]=0;var H=F.match(f.regex);H&&H[bt]>=5&&(I[Li]=ii(H[2])||I[Li],I[Xc]=ii(H[4]),I[Qc]=parseInt(H[5])||0)}else I[zs]=m[zs],I[Li]=m[Li],I[Hl]=m[Hl],I[Xc]=m[Xc],I[Qc]=m[Qc],I[Su]=0;I.sizeInBytes+=I.method[bt],I.sizeInBytes+=I.fileName[bt],I.sizeInBytes+=I.assembly[bt],I[Su]+=f.baseSize,I.sizeInBytes+=I.level.toString()[bt],I.sizeInBytes+=I.line.toString()[bt]}return f.CreateFromInterface=function(m){return new f(m,null)},f.prototype.toInterface=function(){var m=this;return{level:m[zs],method:m[Li],assembly:m[Hl],fileName:m[Xc],line:m[Qc]}},f.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,f.baseSize=58,f}(),ff=function(){function f(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return f}(),km=function(){function f(m,y,I,F,H,J,re,te,_e){this.aiDataContract={ver:1,metrics:1,properties:0};var et=this;et.ver=2;var Et=new ff;Et[Wc]=F>0?F:void 0,Et.max=isNaN(J)||J===null?void 0:J,Et.min=isNaN(H)||H===null?void 0:H,Et[ss]=va(m,y)||da,Et.value=I,Et.stdDev=isNaN(re)||re===null?void 0:re,et.metrics=[Et],et[Mi]=Ra(m,te),et[Bs]=ma(m,_e)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",f.dataType="MetricData",f}(),df="";function _d(f,m){return m===void 0&&(m=!1),f==null?m:f.toString()[is]()==="true"}function Oo(f){(isNaN(f)||f<0)&&(f=0),f=Math.round(f);var m=df+f%1e3,y=df+Math.floor(f/1e3)%60,I=df+Math.floor(f/(1e3*60))%60,F=df+Math.floor(f/(1e3*60*60))%24,H=Math.floor(f/(1e3*60*60*24));return m=m[bt]===1?"00"+m:m[bt]===2?"0"+m:m,y=y[bt]<2?"0"+y:y,I=I[bt]<2?"0"+I:I,F=F[bt]<2?"0"+F:F,(H>0?H+".":df)+F+":"+I+":"+y+"."+m}function em(f,m){var y=null;return Mn(f,function(I){if(I.identifier===m)return y=I,-1}),y}function vp(f,m,y,I,F){return!F&&Ve(f)&&(f==="Script error."||f==="Script error")}var mp=function(){function f(m,y,I,F,H,J,re){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var te=this;te.ver=2,te.id=Zp(m,re),te.url=ld(m,I),te[ss]=va(m,y)||da,isNaN(F)||(te[Wl]=Oo(F)),te[Mi]=Ra(m,H),te[Bs]=ma(m,J)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",f.dataType="PageviewData",f}(),pf=function(){function f(m,y,I,F,H,J,re,te,_e,et,Et,Kt){_e===void 0&&(_e="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var it=this;it.ver=2,it.id=y,it[Wl]=Oo(H),it.success=J,it.resultCode=re+"",it.type=va(m,_e);var lt=tl(m,I,te,F);it.data=ld(m,F)||lt.data,it.target=va(m,lt.target),et&&(it.target="".concat(it.target," | ").concat(et)),it[ss]=va(m,lt[ss]),it[Mi]=Ra(m,Et),it[Bs]=ma(m,Kt)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",f.dataType="RemoteDependencyData",f}(),dc=function(){function f(m,y,I,F,H){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var J=this;J.ver=2,y=y||da,J[Oi]=bu(m,y),J[Mi]=Ra(m,F),J[Bs]=ma(m,H),I&&(J[Zc]=I)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.Message",f.dataType="MessageData",f}(),rv=function(){function f(m,y,I,F,H,J,re){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var te=this;te.ver=2,te.url=ld(m,I),te[ss]=va(m,y)||da,te[Mi]=Ra(m,H),te[Bs]=ma(m,J),re&&(te.domProcessing=re.domProcessing,te[Wl]=re[Wl],te.networkConnect=re.networkConnect,te.perfTotal=re.perfTotal,te[cd]=re[cd],te.sentRequest=re.sentRequest)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",f.dataType="PageviewPerformanceData",f}(),Br=function(){function f(m,y){this.aiDataContract={baseType:1,baseData:1},this.baseType=m,this.baseData=y}return f}(),Ks=Nl({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),nv=function(){function f(){}return f.getConfig=function(m,y,I,F){F===void 0&&(F=!1);var H;return I&&m[us]&&m[us][I]&&!nt(m[us][I][y])?H=m[us][I][y]:H=m[y],nt(H)?F:H},f}();function Cu(f){var m="ai."+f+".";return function(y){return m+y}}var ao=Cu("application"),Fn=Cu("device"),gd=Cu("location"),pc=Cu("operation"),ll=Cu("session"),ds=Cu("user"),io=Cu("cloud"),Mo=Cu("internal"),yd=function(f){Mv(m,f);function m(){return f.call(this)||this}return m}(Zo({applicationVersion:ao("ver"),applicationBuild:ao("build"),applicationTypeId:ao("typeId"),applicationId:ao("applicationId"),applicationLayer:ao("layer"),deviceId:Fn("id"),deviceIp:Fn("ip"),deviceLanguage:Fn("language"),deviceLocale:Fn("locale"),deviceModel:Fn("model"),deviceFriendlyName:Fn("friendlyName"),deviceNetwork:Fn("network"),deviceNetworkName:Fn("networkName"),deviceOEMName:Fn("oemName"),deviceOS:Fn("os"),deviceOSVersion:Fn("osVersion"),deviceRoleInstance:Fn("roleInstance"),deviceRoleName:Fn("roleName"),deviceScreenResolution:Fn("screenResolution"),deviceType:Fn("type"),deviceMachineName:Fn("machineName"),deviceVMName:Fn("vmName"),deviceBrowser:Fn("browser"),deviceBrowserVersion:Fn("browserVersion"),locationIp:gd("ip"),locationCountry:gd("country"),locationProvince:gd("province"),locationCity:gd("city"),operationId:pc("id"),operationName:pc("name"),operationParentId:pc("parentId"),operationRootId:pc("rootId"),operationSyntheticSource:pc("syntheticSource"),operationCorrelationVector:pc("correlationVector"),sessionId:ll("id"),sessionIsFirst:ll("isFirst"),sessionIsNew:ll("isNew"),userAccountAcquisitionDate:ds("accountAcquisitionDate"),userAccountId:ds("accountId"),userAgent:ds("userAgent"),userId:ds("id"),userStoreRegion:ds("storeRegion"),userAuthUserId:ds("authUserId"),userAnonymousUserAcquisitionDate:ds("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:ds("authUserAcquisitionDate"),cloudName:io("name"),cloudRole:io("role"),cloudRoleVer:io("roleVer"),cloudRoleInstance:io("roleInstance"),cloudEnvironment:io("environment"),cloudLocation:io("location"),cloudDeploymentUnit:io("deploymentUnit"),internalNodeName:Mo("nodeName"),internalSdkVersion:Mo("sdkVersion"),internalAgentVersion:Mo("agentVersion"),internalSnippet:Mo("snippet"),internalSdkSrc:Mo("sdkSrc")}));function hp(f,m,y,I,F,H){var J;y=va(I,y)||da,(nt(f)||nt(m)||nt(y))&&br("Input doesn't contain all required fields");var re="";f[sd]&&(re=f[sd],delete f[sd]);var te=(J={},J[ss]=y,J.time=sr(new Date),J.iKey=re,J.ext=H||{},J.tags=[],J.data={},J.baseType=m,J.baseData=f,J);return nt(F)||Ht(F,function(_e,et){te.data[_e]=et}),te}var av=function(){function f(){}return f.create=hp,f}(),ps={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},iv=new yd;function Sd(f){var m=null;if(Tr(Event))m=new Event(f);else{var y=ri();y&&y.createEvent&&(m=y.createEvent("Event"),m.initEvent(f,!0,!0))}return m}function ov(f,m){ip(f,null,null,m)}function vs(f){var m=ri(),y=an(),I=!1,F=[],H=1;y&&!nt(y.onLine)&&!y.onLine&&(H=2);var J=0,re=Kt(),te=Bl(fi("OfflineListener"),f);try{if(et(Ns())&&(I=!0),m){var _e=m.body||m;_e.ononline&&et(_e)&&(I=!0)}}catch{I=!1}function et(Pt){var En=!1;return Pt&&(En=Vc(Pt,"online",nr,te),En&&Vc(Pt,"offline",Ft,te)),En}function Et(){return re}function Kt(){return!(J===2||H===2)}function it(){var Pt=Kt();re!==Pt&&(re=Pt,Mn(F,function(En){var vc={isOnline:re,rState:H,uState:J};try{En(vc)}catch{}}))}function lt(Pt){J=Pt,it()}function nr(){H=1,it()}function Ft(){H=2,it()}function hr(){var Pt=Ns();if(Pt&&I){if(ov(Pt,te),m){var En=m.body||m;Kr(En.ononline)||ov(En,te)}I=!1}}function Er(Pt){return F[zl](Pt),{rm:function(){var En=F.indexOf(Pt);if(En>-1)return F.splice(En,1)}}}return{isOnline:Et,isListening:function(){return I},unload:hr,addListener:Er,setOnlineState:lt}}var Om="AppInsightsPropertiesPlugin",xu="AppInsightsChannelPlugin",sv="ApplicationInsightsAnalytics";e.AnalyticsPluginIdentifier=sv,e.BreezeChannelIdentifier=xu,e.ConfigurationManager=nv,e.ConnectionStringParser=ol,e.ContextTagKeys=yd,e.CtxTagKeys=iv,e.DEFAULT_BREEZE_ENDPOINT=op,e.DEFAULT_BREEZE_PATH=od,e.Data=Br,e.DisabledPropertyName=Gn,e.DistributedTracingModes=Hv,e.Envelope=ro,e.Event=hd,e.EventPersistence=ev,e.Exception=St,e.Extensions=ps,e.HttpMethod=yu,e.Metric=km,e.PageView=mp,e.PageViewPerformance=rv,e.ProcessLegacy=fa,e.PropertiesPluginIdentifier=Om,e.RemoteDependencyData=pf,e.RequestHeaders=sp,e.SampleRate=Hc,e.SeverityLevel=Ks,e.TelemetryItemCreator=av,e.ThrottleMgr=fp,e.Trace=dc,e.correlationIdCanIncludeCorrelationHeader=dd,e.correlationIdGetCorrelationContext=tf,e.correlationIdGetCorrelationContextValue=Ao,e.correlationIdGetPrefix=ls,e.correlationIdSetPrefix=lp,e.createDistributedTraceContextFromTrace=xm,e.createDomEvent=Sd,e.createOfflineListener=vs,e.createTelemetryItem=hp,e.createTraceParent=Yv,e.dataSanitizeException=fd,e.dataSanitizeId=Zp,e.dataSanitizeInput=Jl,e.dataSanitizeKey=Gs,e.dataSanitizeKeyAndAddUniqueness=pa,e.dataSanitizeMeasurements=ma,e.dataSanitizeMessage=bu,e.dataSanitizeProperties=Ra,e.dataSanitizeString=va,e.dataSanitizeUrl=ld,e.dateTimeUtilsDuration=rl,e.dateTimeUtilsNow=Vv,e.dsPadNumber=Zl,e.findAllScripts=ap,e.findW3cTraceParent=la,e.formatTraceParent=oc,e.getExtensionByName=em,e.isBeaconApiSupported=To,e.isCrossOriginError=vp,e.isInternalApplicationInsightsEndpoint=el,e.isSampledFlag=$r,e.isValidSpanId=np,e.isValidTraceId=zc,e.isValidTraceParent=Fs,e.msToTimeSpan=Oo,e.parseConnectionString=md,e.parseTraceParent=rp,e.strNotSpecified=da,e.stringToBoolOrDefault=_d,e.urlGetAbsoluteUrl=Xp,e.urlGetCompleteUrl=Qp,e.urlGetPathName=Ql,e.urlParseFullHost=ef,e.urlParseHost=zv,e.urlParseUrl=Xl,e.utlCanUseLocalStorage=mi,e.utlCanUseSessionStorage=al,e.utlDisableStorage=pd,e.utlEnableStorage=af,e.utlGetLocalStorage=of,e.utlGetSessionStorage=Ro,e.utlGetSessionStorageKeys=Am,e.utlRemoveSessionStorage=il,e.utlRemoveStorage=Pm,e.utlSetLocalStorage=Kv,e.utlSetSessionStorage=Nu,e.utlSetStoragePrefix=vd})});var Yy=kd(Ag=>{"use strict";Object.defineProperty(Ag,"__esModule",{value:!0});Ag.TelemetryUtil=void 0;var jy=class e{static applyReplacements(t,r){for(let n of Object.keys(t))for(let s of r)s.lookup.test(n)&&(s.replacementString!==void 0?t[n]=s.replacementString:delete t[n])}static shouldUseOneDataSystemSDK(t){return t.length===74&&t[32]==="-"&&t[41]==="-"&&t[46]==="-"&&t[51]==="-"&&t[56]==="-"&&t[69]==="-"}static getAdditionalCommonProperties(t){return{"common.os":t.platform,"common.nodeArch":t.architecture,"common.platformversion":(t.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.8"}}static getInstance(){return e._instance||(e._instance=new e),e._instance}};Ag.TelemetryUtil=jy});var xS=kd((Rg,CS)=>{(function(e,t){typeof Rg=="object"&&typeof CS<"u"?t(Rg):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{})))})(Rg,function(e){"use strict";function t(i,o){return i||o}function r(i,o){return i[o]}var n=void 0,s=null,u="",h="function",b="object",N="prototype",A="__proto__",U="undefined",V="constructor",Q="Symbol",pe="_polyfill",de="length",ue="name",ne="call",ye="toString",Ae=t(Object),tt=r(Ae,N),Ke=t(String),ct=r(Ke,N),Qe=t(Math),Nt=t(Array),kt=r(Nt,N),yr=r(kt,"slice");function Sr(i,o){try{return{v:i.apply(this,o)}}catch(l){return{e:l}}}function zr(i,o){var l=Sr(i);return l.e?o:l.v}var po;function Yi(i){return function(o){return typeof o===i}}function Kr(i){var o="[object "+i+"]";return function(l){return!!(l&&Cn(l)===o)}}function Cn(i){return tt[ye].call(i)}function nt(i){return typeof i===U||i===U}function vo(i){return!Bn(i)}function Ve(i){return i===s||nt(i)}function Tr(i){return i===s||!Bn(i)}function Bn(i){return!!i||i!==n}function Ot(i){return!po&&(po=["string","number","boolean",U,"symbol","bigint"]),i!==b&&po.indexOf(i)!==-1}var Lt=Yi("string"),rt=Yi(h);function gn(i){return!i&&Ve(i)?!1:!!i&&typeof i===b}var at=r(Nt,"isArray"),Nc=Kr("Date"),Ht=Yi("number"),$i=Yi("boolean"),zt=Kr("Error");function Qt(i){return!!(i&&i.then&&rt(i.then))}function Ur(i){return!(!i||zr(function(){return!(i&&0+i)},!i))}var $t=r(Ae,"getOwnPropertyDescriptor");function nn(i,o){return!!i&&tt.hasOwnProperty[ne](i,o)}var Ue=t(r(Ae,"hasOwn"),Kn);function Kn(i,o){return nn(i,o)||!!$t(i,o)}function Dt(i,o,l){if(i&&gn(i)){for(var v in i)if(Ue(i,v)&&o[ne](l||i,v,i[v])===-1)break}}var br={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function ei(i){var o={};if(o[br.c]=!0,o[br.e]=!0,i.l){o.get=function(){return i.l.v};var l=$t(i.l,"v");l&&l.set&&(o.set=function(v){i.l.v=v})}return Dt(i,function(v,S){o[br[v]]=vo(S)?o[br[v]]:S}),o}var qi=r(Ae,"defineProperty");function Gr(i,o,l){return qi(i,o,ei(l))}function yn(i,o,l,v,S){var T={};return Dt(i,function(P,L){Bi(T,P,o?L:P,S),Bi(T,L,l?L:P,S)}),v?v(T):T}function Bi(i,o,l,v){qi(i,o,{value:l,enumerable:!0,writable:!!v})}var ga=t(Ke),xr="[object Error]";function rr(i,o){var l=u,v=tt[ye][ne](i);v===xr&&(i={stack:ga(i.stack),message:ga(i.message),name:ga(i.name)});try{l=JSON.stringify(i,s,o?typeof o=="number"?o:4:n),l=(l?l.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):s)||ga(i)}catch(S){l=" - "+rr(S,o)}return v+": "+l}function fr(i){throw new Error(i)}function jr(i){throw new TypeError(i)}var jf=r(Ae,"freeze");function Sn(i){return i}function bl(i){return i[A]||s}var Dc=r(Ae,"assign"),bn=r(Ae,"keys");function qa(i){return jf&&Dt(i,function(o,l){(at(l)||gn(l))&&qa(l)}),or(i)}var or=t(jf,Sn),xn=t(r(Ae,"getPrototypeOf"),bl);function zn(i){return yn(i,1,0,or)}function mo(i){return yn(i,0,0,or)}function ws(i){var o={};return Dt(i,function(l,v){Bi(o,l,v[1]),Bi(o,v[0],v[1])}),or(o)}function Cc(i){return ws(i)}var El=mo({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),ho="__tsUtils$gblCfg",$o;function kn(){var i;return typeof globalThis!==U&&(i=globalThis),!i&&typeof self!==U&&(i=self),!i&&typeof window!==U&&(i=window),!i&&typeof global!==U&&(i=global),i}function _o(){if(!$o){var i=Sr(kn).v||{};$o=i[ho]=i[ho]||{}}return $o}var Ts=ya;function ya(i,o,l){var v=o?o[i]:s;return function(S){var T=(S?S[i]:s)||v;if(T||l){var P=arguments;return(T||l).apply(S,T?yr[ne](P,1):P)}jr('"'+ga(i)+'" not defined for '+rr(S))}}function Uu(i){return function(o){return o[i]}}var Is=r(Qe,"max"),Nr=Ts("slice",ct),Or=Ts("substring",ct),ti=ya("substr",ct,zi);function zi(i,o,l){return Ve(i)&&jr("Invalid "+rr(i)),l<0?u:(o=o||0,o<0&&(o=Is(o+i[de],0)),nt(l)?Nr(i,o):Nr(i,o,o+l))}function dn(i,o){return Or(i,0,o)}var ri="_urid",ni;function Ns(){if(!ni){var i=_o();ni=i.gblSym=i.gblSym||{k:{},s:{}}}return ni}var Fd;function an(i){var o={description:ga(i),toString:function(){return Q+"("+i+")"}};return o[pe]=!0,o}function go(i){var o=Ns();if(!Ue(o.k,i)){var l=an(i),v=bn(o.s).length;l[ri]=function(){return v+"_"+l[ye]()},o.k[i]=l,o.s[l[ri]()]=ga(i)}return o.k[i]}function qo(i){!Fd&&(Fd={});var o,l=El[i];return l&&(o=Fd[l]=Fd[l]||an(Q+"."+l)),o}var On;function Bo(){On=_o()}function ou(i){var o={};return!On&&Bo(),o.b=On.lzy,qi(o,"v",{configurable:!0,get:function(){var l=i();return On.lzy||qi(o,"v",{value:l}),o.b=On.lzy,l}}),o}function Ba(i){return qi({toJSON:function(){return i}},"v",{value:i})}var on="window",Mn;function ju(i,o){var l;return function(){return!On&&Bo(),(!l||On.lzy)&&(l=Ba(Sr(i,o).v)),l.v}}function ai(i){return!On&&Bo(),(!Mn||i===!1||On.lzy)&&(Mn=Ba(Sr(kn).v||s)),Mn.v}function Ir(i,o){var l;if(!Mn||o===!1?l=ai(o):l=Mn.v,l&&l[i])return l[i];if(i===on)try{return window}catch{}return s}function sa(){return!!Yf()}var Yf=ju(Ir,["document"]);function Sa(){return!!zo()}var zo=ju(Ir,[on]);function xc(){return!!Go()}var Go=ju(Ir,["navigator"]),$f=ju(function(){return!!Sr(function(){return process&&(process.versions||{}).node}).v}),Qr,wl;function za(){return Qr=Ba(Sr(Ir,[Q]).v),Qr}function Ud(i){var o=(On.lzy?0:Qr)||za();return o.v?o.v[i]:n}function ii(){return!!Up()}function Up(){return!On&&Bo(),((On.lzy?0:Qr)||za()).v}function oi(i,o){var l=El[i];!On&&Bo();var v=(On.lzy?0:Qr)||za();return v.v?v.v[l||i]:o?n:qo(i)}function Tl(i,o){!On&&Bo();var l=(On.lzy?0:Qr)||za();return l.v?l.v(i):o?s:an(i)}function Gi(i){return!On&&Bo(),wl=(On.lzy?0:wl)||Ba(Sr(Ud,["for"]).v),(wl.v||go)(i)}function qf(i){return!!i&&rt(i.next)}function vr(i){return!Tr(i)&&rt(i[oi(3)])}var Vo;function Bf(i,o,l){if(i&&(qf(i)||(!Vo&&(Vo=Ba(oi(3))),i=i[Vo.v]?i[Vo.v]():s),qf(i))){var v=n,S=n;try{for(var T=0;!(S=i.next()).done&&o[ne](l||i,S.value,T,i)!==-1;)T++}catch(P){v={e:P},i.throw&&(S=s,i.throw(v))}finally{try{S&&!S.done&&i.return&&i.return(S)}finally{if(v)throw v.e}}}}function Ga(i,o,l){return i.apply(o,l)}function Pc(i,o){return!nt(o)&&i&&(at(o)?Ga(i.push,i,o):qf(o)||vr(o)?Bf(o,function(l){i.push(l)}):i.push(o)),i}function xt(i,o,l){if(i)for(var v=i[de]>>>0,S=0;S<v&&!(S in i&&o[ne](l||i,i[S],S,i)===-1);S++);}var si=Ts("indexOf",kt),Yu=Ts("map",kt);function Il(i,o,l){return((i?i.slice:s)||yr).apply(i,yr[ne](arguments,1))}var kv=Ts("reduce",kt),Ei=t(r(Ae,"create"),Nl);function Nl(i){if(!i)return{};var o=typeof i;o!==b&&o!==h&&jr("Prototype must be an Object or function: "+rr(i));function l(){}return l[N]=i,new l}var jd;function su(i,o){var l=Ae.setPrototypeOf||function(v,S){var T;!jd&&(jd=Ba((T={},T[A]=[],T instanceof Array))),jd.v?v[A]=S:Dt(S,function(P,L){return v[P]=L})};return l(i,o)}function wi(i,o,l){Sr(Gr,[o,ue,{v:i,c:!0,e:!1}]),o=su(o,l);function v(){this[V]=o,Sr(Gr,[this,ue,{v:i,c:!0,e:!1}])}return o[N]=l===s?Ei(l):(v[N]=l[N],new v),o}function dt(i,o){o&&(i[ue]=o)}function ua(i,o,l){var v=l||Error,S=v[N][ue],T=Error.captureStackTrace;return wi(i,function(){var P=this,L=arguments;try{Sr(dt,[v,i]);var Y=Ga(v,P,yr[ne](L))||P;if(Y!==P){var B=xn(P);B!==xn(Y)&&su(Y,B)}return T&&T(Y,P[V]),o&&o(Y,L),Y}finally{Sr(dt,[v,S])}},v)}function uu(){return(Date.now||Ds)()}function Ds(){return new Date().getTime()}function Yd(i){return function(l){return Ve(l)&&jr("strTrim called ["+rr(l)+"]"),l&&l.replace&&(l=l.replace(i,u)),l}}var $d=Yd(/^\s+|(?=\s)\s+$/g),Wn=ya("trim",ct,$d),ui,qd,Ti;function Va(i){if(!i||typeof i!==b)return!1;Ti||(Ti=Sa()?zo():!0);var o=!1;if(i!==Ti){qd||(ui=Function[N][ye],qd=ui[ne](Ae));try{var l=xn(i);o=!l,o||(nn(l,V)&&(l=l[V]),o=!!(l&&typeof l===h&&ui[ne](l)===qd))}catch{}}return o}function Im(i){return i.value&&Vi(i),!0}var Ov=[xa,Vi,Cl,Dl];function jp(i,o,l,v){var S;return xt(i,function(T){if(T.k===o)return S=T,-1}),S||(S={k:o,v:o},i.push(S),v(S)),S.v}function cu(i,o,l,v){var S=l.handler,T=l.path?v?l.path.concat(v):l.path:[],P={handler:l.handler,src:l.src,path:T},L=typeof o,Y=!1,B=o===s;B||(o&&L===b?Y=Va(o):B=Ot(L));var X={type:L,isPrim:B,isPlain:Y,value:o,result:o,path:T,origin:l.src,copy:function(ce,le){return cu(i,ce,le?P:l,le)},copyTo:function(ce,le){return Yp(i,ce,le,P)}};return X.isPrim?S&&S[ne](l,X)?X.result:o:jp(i,o,T,function(ce){Gr(X,"result",{g:function(){return ce.v},s:function(se){ce.v=se}});for(var le=0,fe=S;!(fe||(le<Ov.length?Ov[le++]:Im))[ne](l,X);)fe=s})}function Yp(i,o,l,v){if(!Ve(l))for(var S in l)o[S]=cu(i,l[S],v,S);return o}function sh(i,o,l){var v={handler:l,src:o,path:[]};return Yp([],i,o,v)}function Bd(i,o){var l={handler:o,src:i};return cu([],i,l)}function xa(i){var o=i.value;if(at(o)){var l=i.result=[];return l.length=o.length,i.copyTo(l,o),!0}return!1}function Dl(i){var o=i.value;return Nc(o)?(i.result=new Date(o.getTime()),!0):!1}function Cl(i){return i.type===h}function Vi(i){var o=i.value;if(o&&i.isPlain){var l=i.result={};return i.copyTo(l,o),!0}return!1}function ci(i,o){return xt(o,function(l){sh(i,l)}),i}function lu(i,o,l,v,S,T,P){return ci(Bd(i)||{},yr[ne](arguments))}var $p=Uu(de),Ii=ya("endsWith",ct,zd);function zd(i,o,l){Lt(i)||jr("'"+rr(i)+"' is not a string");var v=Lt(o)?o:ga(o),S=!nt(l)&&l<i[de]?l:i[de];return Or(i,S-v[de],S)===v}var $u=Ts("indexOf",ct),Ac="ref",xl="unref",zf="hasRef",Gd="enabled";function qp(i,o,l){var v=!0,S=i?o(s):s,T;function P(){return v=!1,S&&S[xl]&&S[xl](),T}function L(){S&&l(S),S=s}function Y(){return S=o(S),v||P(),T}function B(X){!X&&S&&L(),X&&!S&&Y()}return T={cancel:L,refresh:Y},T[zf]=function(){return S&&S[zf]?S[zf]():v},T[Ac]=function(){return v=!0,S&&S[Ac]&&S[Ac](),T},T[xl]=P,T=qi(T,Gd,{get:function(){return!!S},set:B}),{h:T,dn:function(){S=s}}}function Bp(i,o,l){var v=at(o),S=v?o.length:0,T=(S>0?o[0]:v?n:o)||setTimeout,P=(S>1?o[1]:n)||clearTimeout,L=l[0];l[0]=function(){Y.dn(),Ga(L,n,yr[ne](arguments))};var Y=qp(i,function(B){if(B){if(B.refresh)return B.refresh(),B;Ga(P,n,[B])}return Ga(T,n,l)},function(B){Ga(P,n,[B])});return Y.h}function fu(i,o){return Bp(!0,n,yr[ne](arguments))}function Vd(i,o){return Bp(!1,n,yr[ne](arguments))}var Cs,qu="constructor",Ni="prototype",Pl="function",Gf="_dynInstFuncs",Rc="_isDynProxy",Hi="_dynClass",Mv="_dynCls$",Ho="_dynInstChk",yo=Ho,Ki="_dfOpts",du="_unknown_",Vf="__proto__",kc="_dyn"+Vf,Oc="__dynProto$Gbl",Bu="_dynInstProto",Hf="useBaseInst",Al="setInstFuncs",Kf=Object,zu=Kf.getPrototypeOf,Wi=Kf.getOwnPropertyNames,Mc=ai(),So=Mc[Oc]||(Mc[Oc]={o:(Cs={},Cs[Al]=!0,Cs[Hf]=!0,Cs),n:1e3});function li(i){return i&&(i===Kf[Ni]||i===Array[Ni])}function Ko(i){return li(i)||i===Function[Ni]}function Vr(i){var o;if(i){if(zu)return zu(i);var l=i[Vf]||i[Ni]||(i[qu]?i[qu][Ni]:null);o=i[kc]||l,nn(i,kc)||(delete i[Bu],o=i[kc]=i[Bu]||i[kc],i[Bu]=l)}return o}function xs(i,o){var l=[];if(Wi)l=Wi(i);else for(var v in i)typeof v=="string"&&nn(i,v)&&l.push(v);if(l&&l.length>0)for(var S=0;S<l.length;S++)o(l[S])}function Ji(i,o,l){return o!==qu&&typeof i[o]===Pl&&(l||nn(i,o))&&o!==Vf&&o!==Ni}function Lc(i){jr("DynamicProto: "+i)}function Fc(i){var o=Ei(null);return xs(i,function(l){!o[l]&&Ji(i,l,!1)&&(o[l]=i[l])}),o}function Wo(i,o){for(var l=i.length-1;l>=0;l--)if(i[l]===o)return!0;return!1}function Rl(i,o,l,v){function S(Y,B,X){var ce=B[X];if(ce[Rc]&&v){var le=Y[Gf]||{};le[yo]!==!1&&(ce=(le[B[Hi]]||{})[X]||ce)}return function(){return ce.apply(Y,arguments)}}var T=Ei(null);xs(l,function(Y){T[Y]=S(o,l,Y)});for(var P=Vr(i),L=[];P&&!Ko(P)&&!Wo(L,P);)xs(P,function(Y){!T[Y]&&Ji(P,Y,!zu)&&(T[Y]=S(o,P,Y))}),L.push(P),P=Vr(P);return T}function Jo(i,o,l,v){var S=null;if(i&&nn(l,Hi)){var T=i[Gf]||Ei(null);if(S=(T[l[Hi]]||Ei(null))[o],S||Lc("Missing ["+o+"] "+Pl),!S[Ho]&&T[yo]!==!1){for(var P=!nn(i,o),L=Vr(i),Y=[];P&&L&&!Ko(L)&&!Wo(Y,L);){var B=L[o];if(B){P=B===v;break}Y.push(L),L=Vr(L)}try{P&&(i[o]=S),S[Ho]=1}catch{T[yo]=!1}}}return S}function pu(i,o,l){var v=o[i];return v===l&&(v=Vr(o)[i]),typeof v!==Pl&&Lc("["+i+"] is not a "+Pl),v}function Ha(i,o,l,v,S){function T(Y,B){var X=function(){var ce=Jo(this,B,Y,X)||pu(B,Y,X);return ce.apply(this,arguments)};return X[Rc]=1,X}if(!li(i)){var P=l[Gf]=l[Gf]||Ei(null);if(!li(P)){var L=P[o]=P[o]||Ei(null);P[yo]!==!1&&(P[yo]=!!S),li(L)||xs(l,function(Y){Ji(l,Y,!1)&&l[Y]!==v[Y]&&(L[Y]=l[Y],delete l[Y],(!nn(i,Y)||i[Y]&&!i[Y][Rc])&&(i[Y]=T(i,Y)))})}}}function Hd(i,o){if(zu){for(var l=[],v=Vr(o);v&&!Ko(v)&&!Wo(l,v);){if(v===i)return!0;l.push(v),v=Vr(v)}return!1}return!0}function Gu(i,o){return nn(i,Ni)?i.name||o||du:((i||{})[qu]||{}).name||o||du}function Pa(i,o,l,v){nn(i,Ni)||Lc("theClass is an invalid class definition.");var S=i[Ni];Hd(S,o)||Lc("["+Gu(i)+"] not in hierarchy of ["+Gu(o)+"]");var T=null;nn(S,Hi)?T=S[Hi]:(T=Mv+Gu(i,"_")+"$"+So.n,So.n++,S[Hi]=T);var P=Pa[Ki],L=!!P[Hf];L&&v&&v[Hf]!==void 0&&(L=!!v[Hf]);var Y=Fc(o),B=Rl(S,o,Y,L);l(o,B);var X=!!zu&&!!P[Al];X&&v&&(X=!!v[Al]),Ha(S,T,o,Y,X!==!1)}Pa[Ki]=So.o;var Wf="function",Kd="object",kl="undefined",Ol="prototype",Wd=Object,Lv=Wd[Ol];(ai()||{}).Symbol,(ai()||{}).Reflect;var Vu="hasOwnProperty",bo=function(i){for(var o,l=1,v=arguments.length;l<v;l++){o=arguments[l];for(var S in o)Lv[Vu].call(o,S)&&(i[S]=o[S])}return i},Zi=Dc||bo,pn=function(i,o){return pn=Wd.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var S in v)v[Vu](S)&&(l[S]=v[S])},pn(i,o)};function Ml(i,o){typeof o!==Wf&&o!==null&&jr("Class extends value "+String(o)+" is not a constructor or null"),pn(i,o);function l(){this.constructor=i}i[Ol]=o===null?Ei(o):(l[Ol]=o[Ol],new l)}function Hu(i,o){for(var l=0,v=o.length,S=i.length;l<v;l++,S++)i[S]=o[l];return i}var Ku=zn,Jd=Cc,Di=Ku({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),vu="toLowerCase",Ps="blkVal",sr="length",Eo="rdOnly",Zo="notify",Ci="warnToConsole",Jf="throwInternal",xi="setDf",mu="watch",sn="logger",Ka="apply",Mr="push",pt="splice",Wu="hdlr",wo="cancel",As="initialize",Xi="identifier",hu="removeNotificationListener",Pi="addNotificationListener",Yr="isInitialized",To="instrumentationKey",Lr="INACTIVE",Io="value",Zf="getNotifyMgr",No="getPlugin",Pn="name",Qi="iKey",Xo="time",ba="processNext",Aa="getProcessTelContext",Uc="pollInternalLogs",Ju="enabled",Xf="stopPollingInternalLogs",Rs="unload",Do="onComplete",Co="version",Zu="loggingLevelConsole",xo="createNew",Ln="teardown",Qf="messageId",Xu="message",ks="isAsync",fi="diagLog",Qo="_doTeardown",Os="update",Ai="getNext",jc="setNextPlugin",_u="protocol",ca="userAgent",gu="split",Ms="nodeType",Ri="replace",Qu="logInternalMessage",un="type",Jn="handler",ki="status",ec="getResponseHeader",es="getAllResponseHeaders",Zd="isChildEvt",di="data",Yc="getCtx",Ea="setCtx",ed="complete",Wa="itemsReceived",ts="urlString",rs="sendPOST",Xd="headers",Ll="timeout",td="setRequestHeader",Fl="traceId",Po="spanId",Ja="traceFlags",$c;function Fv(i,o){$c||($c=ua("AggregationError",function(v,S){S[sr]>1&&(v.errors=S[1])}));var l=i||"One or more errors occurred.";throw xt(o,function(v,S){l+=`
`.concat(S," > ").concat(rr(v))}),new $c(l,o||[])}var tc="Promise",rc="rejected";function ns(i,o){return Ul(i,function(l){return o?o({status:"fulfilled",rejected:!1,value:l}):l},function(l){return o?o({status:rc,rejected:!0,reason:l}):l})}function Ul(i,o,l,v){var S=i;try{if(Qt(i))(o||l)&&(S=i.then(o,l));else try{o&&(S=o(i))}catch(T){if(l)S=l(T);else throw T}}finally{v&&Nm(S,v)}return S}function Nm(i,o){var l=i;return o&&(Qt(i)?i.finally?l=i.finally(o):l=i.then(function(v){return o(),v},function(v){throw o(),v}):o()),l}var Qd=["pending","resolving","resolved",rc],jl="dispatchEvent",nc;function zp(i){var o;return i&&i.createEvent&&(o=i.createEvent("Event")),!!o&&o.initEvent}function Uv(i,o,l,v){var S=Yf();!nc&&(nc=Ba(!!Sr(zp,[S]).v));var T=nc.v?S.createEvent("Event"):v?new Event(o):{};if(l&&l(T),nc.v&&T.initEvent(o,!1,!0),T&&i[jl])i[jl](T);else{var P=i["on"+o];if(P)P(T);else{var L=Ir("console");L&&(L.error||L.log)(o,rr(T))}}}var ac="unhandledRejection",jv=ac.toLowerCase(),Yl=10,ep;function eo(i){return rt(i)?i.toString():rr(i)}function Gp(i,o,l){var v=Il(arguments,3),S=0,T=!1,P,L=[],Y=!1,B=null,X;function ce(Ge,ut){try{Y=!0,B&&B.cancel(),B=null;var gr=i(function(Zr,Xr){L.push(function(){try{var hn=S===2?Ge:ut,Zt=nt(hn)?P:rt(hn)?hn(P):hn;Qt(Zt)?Zt.then(Zr,Xr):hn?Zr(Zt):S===3?Xr(Zt):Zr(Zt)}catch(jt){Xr(jt)}}),T&&xe()},v);return gr}finally{}}function le(Ge){return ce(void 0,Ge)}function fe(Ge){var ut=Ge,gr=Ge;return rt(Ge)&&(ut=function(Zr){return Ge&&Ge(),Zr},gr=function(Zr){throw Ge&&Ge(),Zr}),ce(ut,gr)}function se(){return Qd[S]}function xe(){if(L.length>0){var Ge=L.slice();L=[],Y=!0,B&&B.cancel(),B=null,o(Ge)}}function me(Ge,ut){return function(gr){if(S===ut){if(Ge===2&&Qt(gr)){S=1,gr.then(me(2,1),me(3,1));return}S=Ge,T=!0,P=gr,xe(),!Y&&Ge===3&&!B&&(B=fu(ke,Yl))}}}function ke(){if(!Y)if(Y=!0,$f())process.emit(ac,P,X);else{var Ge=zo()||ai();!ep&&(ep=Ba(Sr(Ir,[tc+"RejectionEvent"]).v)),Uv(Ge,jv,function(ut){return Gr(ut,"promise",{g:function(){return X}}),ut.reason=P,ut},!!ep.v)}}X={then:ce,catch:le,finally:fe},qi(X,"state",{get:se}),ii()&&(X[oi(11)]="IPromise");function Oe(){return"IPromise "+se()+(T?" - "+eo(P):"")}return X.toString=Oe,function(){rt(l)||jr(tc+": executor is not a function - "+eo(l));var ut=me(3,0);try{l.call(X,me(2,0),ut)}catch(gr){ut(gr)}}(),X}function Dm(i){return function(o){var l=Il(arguments,1);return i(function(v,S){try{var T=[],P=1;Bf(o,function(L,Y){L&&(P++,Ul(L,function(B){T[Y]=B,--P===0&&v(T)},S))}),P--,P===0&&v(T)}catch(L){S(L)}},l)}}function rd(i){return Ba(function(o){var l=Il(arguments,1);return i(function(v,S){var T=[],P=1;function L(Y,B){P++,ns(Y,function(X){X.rejected?T[B]={status:rc,reason:X.reason}:T[B]={status:"fulfilled",value:X.value},--P===0&&v(T)})}try{at(o)?xt(o,L):vr(o)?Bf(o,L):jr("Input is not an iterable"),P--,P===0&&v(T)}catch(Y){S(Y)}},l)})}function Vp(i){xt(i,function(o){try{o()}catch{}})}function tp(i){var o=Ht(i)?i:0;return function(l){fu(function(){Vp(l)},o)}}function qc(i,o){return Gp(qc,tp(o),i,o)}var nd;function ic(i,o){!nd&&(nd=Ba(Sr(Ir,[tc]).v||null));var l=nd.v;if(!l)return qc(i);rt(i)||jr(tc+": executor is not a function - "+rr(i));var v=0;function S(){return Qd[v]}var T=new l(function(P,L){function Y(X){v=2,P(X)}function B(X){v=3,L(X)}i(Y,B)});return qi(T,"state",{get:S}),T}var Ls;function Bc(i){return Gp(Bc,Vp,i)}function Yv(i,o){return!Ls&&(Ls=rd(Bc)),Ls.v(i,o)}var rp;function zc(i,o){return!rp&&(rp=Ba(ic)),rp.v.call(this,i,o)}var np=Dm(zc),Fs=void 0,$r="",oc="channels",la="core",ap="createPerfMgr",ad="disabled",Gc="extensionConfig",sc="extensions",Za="processTelemetry",id="priority",Zn="eventsSent",dr="eventsDiscarded",Us="eventsSendRequest",mn="perfEvent",as="offlineEventsStored",uc="offlineBatchSent",cc="offlineBatchDrop",js="getPerfMgr",to="domain",$l="path",Hp="Not dynamic - ",ql=/-([a-z])/g,Kp=/([^\w\d_$])/g,Bl=/^(\d+[\w\d_$])/;function Vc(i){return!Ve(i)}function ip(i){var o=i;return o&&Lt(o)&&(o=o[Ri](ql,function(l,v){return v.toUpperCase()}),o=o[Ri](Kp,"_"),o=o[Ri](Bl,function(l,v){return"_"+v})),o}function Gn(i,o){return i&&o?$u(i,o)!==-1:!1}function Hc(i){return i&&i.toISOString()||""}function fa(i){return zt(i)?i[Pn]:$r}function yu(i,o,l,v,S){var T=l;return i&&(T=i[o],T!==l&&(!S||S(T))&&(!v||v(l))&&(T=l,i[o]=T)),T}function op(i,o,l){var v;return i?(v=i[o],!v&&Ve(v)&&(v=nt(l)?{}:l,i[o]=v)):v=nt(l)?{}:l,v}function od(i,o){var l=null,v=null;return rt(i)?l=i:v=i,function(){var S=arguments;if(l&&(v=l()),v)return v[o][Ka](v,S)}}function da(i,o,l,v,S){i&&o&&l&&(S!==!1||nt(i[o]))&&(i[o]=od(l,v))}function sd(i,o,l,v){return i&&o&&gn(i)&&at(l)&&xt(l,function(S){Lt(S)&&da(i,S,o,S,v)}),i}function sp(i){return function(){function o(){var l=this;i&&Dt(i,function(v,S){l[v]=S})}return o}()}function Ys(i){return i&&Dc&&(i=Wd(Dc({},i))),i}function bt(i,o,l,v,S,T){var P=arguments,L=P[0]||{},Y=P[sr],B=!1,X=1;for(Y>0&&$i(L)&&(B=L,L=P[X]||{},X++),gn(L)||(L={});X<Y;X++){var ce=P[X],le=at(ce),fe=gn(ce);for(var se in ce){var xe=le&&se in ce||fe&&Ue(ce,se);if(xe){var me=ce[se],ke=void 0;if(B&&me&&((ke=at(me))||Va(me))){var Oe=L[se];ke?at(Oe)||(Oe=[]):Va(Oe)||(Oe={}),me=bt(B,Oe,me)}me!==void 0&&(L[se]=me)}}}return L}function is(i){try{return i.responseText}catch{}return null}function os(i,o){return i?"XDomainRequest,Response:"+is(i)||"":o}function pi(i,o){return i?"XMLHttpRequest,Status:"+i[ki]+",Response:"+is(i)||i.response||"":o}function zl(i,o){return o&&(Ht(o)?i=[o].concat(i):at(o)&&(i=o.concat(i))),i}var Kc="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",ss="withCredentials",Oi="timeout";function Wc(i,o,l,v,S,T){v===void 0&&(v=!1),S===void 0&&(S=!1);function P(Y,B,X){try{Y[B]=X}catch{}}var L=new XMLHttpRequest;return v&&P(L,Kc,v),l&&P(L,ss,l),L.open(i,o,!S),l&&P(L,ss,l),!S&&T&&P(L,Oi,T),L}function ud(i){var o={};if(Lt(i)){var l=Wn(i)[gu](/[\r\n]+/);xt(l,function(v){if(v){var S=v.indexOf(": ");if(S!==-1){var T=Wn(v.substring(0,S))[vu](),P=Wn(v.substring(S+1));o[T]=P}else o[Wn(v)]=1}})}return o}function $s(i,o,l){if(!i[l]&&o&&o[ec]){var v=o[ec](l);v&&(i[l]=Wn(v))}return i}var Gl="kill-duration",Jc="kill-duration-seconds",Vl="time-delta-millis";function up(i,o){var l={};return i[es]?l=ud(i[es]()):o&&(l=$s(l,i,Vl),l=$s(l,i,Gl),l=$s(l,i,Jc)),l}var cp="documentMode",Wp="location",Cm="console",us="JSON",qs="crypto",cs="msCrypto",Mi="msie",Bs="trident/",Su="XMLHttpRequest",vi=null,Zc=null,$v=!1,lc=null,Jp=null;function Hl(i,o){var l=!1;if(i){try{if(l=o in i,!l){var v=i[Ol];v&&(l=o in v)}}catch{}if(!l)try{var S=new i;l=!nt(S[o])}catch{}}return l}function Xc(i){if(i&&$v){var o=Ir("__mockLocation");if(o)return o}return typeof location===Kd&&location?location:Ir(Wp)}function Kl(){return typeof console!==kl?console:Ir(Cm)}function zs(){return!!(typeof JSON===Kd&&JSON||Ir(us)!==null)}function Li(){return zs()?JSON||Ir(us):null}function Qc(){return Ir(qs)}function Wl(){return Ir(cs)}function cd(){var i=Go();if(i&&(i[ca]!==Zc||vi===null)){Zc=i[ca];var o=(Zc||$r)[vu]();vi=Gn(o,Mi)||Gn(o,Bs)}return vi}function pa(i){if(i===void 0&&(i=null),!i){var o=Go()||{};i=o?(o.userAgent||$r)[vu]():$r}var l=(i||$r)[vu]();if(Gn(l,Mi)){var v=Yf()||{};return Math.max(parseInt(l[gu](Mi)[1]),v[cp]||0)}else if(Gn(l,Bs)){var S=parseInt(l[gu](Bs)[1]);if(S)return S+4}return null}function Gs(i){return(Jp===null||i===!1)&&(Jp=xc()&&!!Go().sendBeacon),Jp}function va(i){var o=!1;try{o=!!Ir("fetch");var l=Ir("Request");o&&i&&l&&(o=Hl(l,"keepalive"))}catch{}return o}function ld(){return lc===null&&(lc=typeof XDomainRequest!==kl,lc&&bu()&&(lc=lc&&!Hl(Ir(Su),"withCredentials"))),lc}function bu(){var i=!1;try{var o=Ir(Su);i=!!o}catch{}return i}var fd=4294967296,Ra=4294967295,ma=123456789,Zp=987654321,Jl=!1,Zl=ma,Eu=Zp;function qv(i){i<0&&(i>>>=0),Zl=ma+i&Ra,Eu=Zp-i&Ra,Jl=!0}function Bv(){try{var i=uu()&2147483647;qv((Math.random()*fd^i)+i)}catch{}}function Xl(i){var o=0,l=Qc()||Wl();return l&&l.getRandomValues&&(o=l.getRandomValues(new Uint32Array(1))[0]&Ra),o===0&&cd()&&(Jl||Bv(),o=Xp()&Ra),o===0&&(o=Math.floor(fd*Math.random()|0)),i||(o>>>=0),o}function Xp(i){Eu=36969*(Eu&65535)+(Eu>>16)&Ra,Zl=18e3*(Zl&65535)+(Zl>>16)&Ra;var o=(Eu<<16)+(Zl&65535)>>>0&Ra|0;return i||(o>>>=0),o}function Ql(i){i===void 0&&(i=22);for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=Xl()>>>0,v=0,S=$r;S[sr]<i;)v++,S+=o.charAt(l&63),l>>>=6,v===5&&(l=(Xl()<<2&4294967295|l&3)>>>0,v=0);return S}var Qp="3.3.4",zv="."+Ql(6),ef=0;function Gv(i){return i[Ms]===1||i[Ms]===9||!+i[Ms]}function wu(i,o){var l=o[i.id];if(!l){l={};try{Gv(o)&&Gr(o,i.id,{e:!1,v:l})}catch{}}return l}function el(i,o){return o===void 0&&(o=!1),ip(i+ef+++(o?"."+Qp:$r)+zv)}function lp(i){var o={id:el("_aiData-"+(i||$r)+"."+Qp),accept:function(l){return Gv(l)},get:function(l,v,S,T){var P=l[o.id];return P?P[ip(v)]:(T&&(P=wu(o,l),P[ip(v)]=S),S)},kill:function(l,v){if(l&&l[v])try{delete l[v]}catch{}}};return o}function ls(i){return i&&gn(i)&&(i.isVal||i.fb||Ue(i,"v")||Ue(i,"mrg")||Ue(i,"ref")||i.set)}function dd(i,o,l){var v,S=l.dfVal||Bn;if(o&&l.fb){var T=l.fb;at(T)||(T=[T]);for(var P=0;P<T[sr];P++){var L=T[P],Y=o[L];if(S(Y)?v=Y:i&&(Y=i.cfg[L],S(Y)&&(v=Y),i.set(i.cfg,ga(L),Y)),S(v))break}}return!S(v)&&S(l.v)&&(v=l.v),v}function tf(i,o,l){var v=l;if(l&&ls(l)&&(v=dd(i,o,l)),v){ls(v)&&(v=tf(i,o,v));var S;at(v)?(S=[],S[sr]=v[sr]):Va(v)&&(S={}),S&&(Dt(v,function(T,P){P&&ls(P)&&(P=tf(i,o,P)),S[T]=P}),v=S)}return v}function Ao(i,o,l,v){var S,T,P,L=v,Y,B,X,ce;ls(L)?(S=L.isVal,T=L.set,X=L[Eo],ce=L[Ps],Y=L.mrg,B=L.ref,!B&&nt(B)&&(B=!!Y),P=dd(i,o,L)):P=v,ce&&i[Ps](o,l);var le,fe=!0,se=o[l];(se||!Ve(se))&&(le=se,fe=!1,S&&le!==P&&!S(le)&&(le=P,fe=!0),T&&(le=T(le,P,o),fe=le===P)),fe?P?le=tf(i,o,P):le=P:(Va(le)||at(P))&&Y&&P&&(Va(P)||at(P))&&Dt(P,function(xe,me){Ao(i,le,xe,me)}),i.set(o,l,le),B&&i.ref(o,l),X&&i[Eo](o,l)}var tl=Gi("[[ai_dynCfg_1]]"),Vv=Gi("[[ai_blkDynCfg_1]]"),rl=Gi("[[ai_frcDynCfg_1]]");function xm(i){if(i){var o;if(at(i)?(o=[],o[sr]=i[sr]):Va(i)&&(o={}),o)return Dt(i,function(l,v){o[l]=xm(v)}),o}return i}function rf(i){if(i){var o=i[tl]||i;if(o.cfg&&(o.cfg===i||o.cfg[tl]===o))return o}return null}function Hv(i){if(i&&(Va(i)||at(i)))try{i[Vv]=!0}catch{}return i}function ev(i,o,l){var v=!1;return l&&!i[o.blkVal]&&(v=l[rl],!v&&!l[Vv]&&(v=Va(l)||at(l))),v}function Tu(i){jr("InvalidAccess:"+i)}var Iu=["push","pop","shift","unshift","splice"],nl=function(i,o,l,v){i&&i[Jf](3,108,"".concat(l," [").concat(o,"] failed - ")+rr(v))};function fs(i,o,l){at(o)&&xt(Iu,function(v){var S=o[v];o[v]=function(){for(var T=[],P=0;P<arguments.length;P++)T[P]=arguments[P];var L=S[Ka](this,T);return af(i,o,l,"Patching"),L}})}function Vs(i,o){var l=$t(i,o);return l&&l.get}function nf(i,o,l,v){var S={n:l,h:[],trk:function(B){B&&B.fn&&(si(S.h,B)===-1&&S.h[Mr](B),i.trk(B,S))},clr:function(B){var X=si(S.h,B);X!==-1&&S.h[pt](X,1)}},T=!0,P=!1;function L(){T&&(P=P||ev(L,i,v),v&&!v[tl]&&P&&(v=af(i,v,l,"Converting")),T=!1);var B=i.act;return B&&S.trk(B),v}L[i.prop]={chng:function(){i.add(S)}};function Y(B){if(v!==B){L[i.ro]&&!i.upd&&Tu("["+l+"] is read-only:"+rr(o)),T&&(P=P||ev(L,i,v),T=!1);var X=P&&L[i.rf];if(P)if(X){Dt(v,function(le){v[le]=B?B[le]:Fs});try{Dt(B,function(le,fe){pd(i,v,le,fe)}),B=v}catch(le){nl((i.hdlr||{})[sn],l,"Assigning",le),P=!1}}else v&&v[tl]&&Dt(v,function(le){var fe=Vs(v,le);if(fe){var se=fe[i.prop];se&&se.chng()}});if(B!==v){var ce=B&&ev(L,i,B);!X&&ce&&(B=af(i,B,l,"Converting")),v=B,P=ce}i.add(S)}}Gr(o,S.n,{g:L,s:Y})}function pd(i,o,l,v){if(o){var S=Vs(o,l),T=S&&!!S[i.prop];T?o[l]=v:nf(i,o,l,v)}return o}function vd(i,o,l,v){if(o){var S=Vs(o,l),T=S&&!!S[i.prop],P=v&&v[0],L=v&&v[1],Y=v&&v[2];if(!T){if(Y)try{Hv(o)}catch(B){nl((i.hdlr||{})[sn],l,"Blocking",B)}try{pd(i,o,l,o[l]),S=Vs(o,l)}catch(B){nl((i.hdlr||{})[sn],l,"State",B)}}P&&(S[i.rf]=P),L&&(S[i.ro]=L),Y&&(S[i.blkVal]=!0)}return o}function af(i,o,l,v){try{Dt(o,function(S,T){pd(i,o,S,T)}),o[tl]||(qi(o,tl,{get:function(){return i[Wu]}}),fs(i,o,l))}catch(S){nl((i.hdlr||{})[sn],l,v,S)}return o}var mi="[[ai_",of="]]";function Kv(i){var o,l=Tl(mi+"get"+i.uid+of),v=Tl(mi+"ro"+i.uid+of),S=Tl(mi+"rf"+i.uid+of),T=Tl(mi+"blkVal"+i.uid+of),P=Tl(mi+"dtl"+i.uid+of),L=null,Y=null,B;function X(se,xe){var me=B.act;try{B.act=se,se&&se[P]&&(xt(se[P],function(Oe){Oe.clr(se)}),se[P]=[]),xe({cfg:i.cfg,set:i.set.bind(i),setDf:i[xi].bind(i),ref:i.ref.bind(i),rdOnly:i[Eo].bind(i)})}catch(Oe){var ke=i[sn];throw ke&&ke[Jf](1,107,rr(Oe)),Oe}finally{B.act=me||null}}function ce(){if(L){var se=L;L=null,Y&&Y[wo](),Y=null;var xe=[];if(xt(se,function(me){if(me&&(me[P]&&(xt(me[P],function(ke){ke.clr(me)}),me[P]=null),me.fn))try{X(me,me.fn)}catch(ke){xe[Mr](ke)}}),L)try{ce()}catch(me){xe[Mr](me)}xe[sr]>0&&Fv("Watcher error(s): ",xe)}}function le(se){if(se&&se.h[sr]>0){L||(L=[]),Y||(Y=fu(function(){Y=null,ce()},0));for(var xe=0;xe<se.h[sr];xe++){var me=se.h[xe];me&&si(L,me)===-1&&L[Mr](me)}}}function fe(se,xe){if(se){var me=se[P]=se[P]||[];si(me,xe)===-1&&me[Mr](xe)}}return B=(o={prop:l,ro:v,rf:S},o[Ps]=T,o[Wu]=i,o.add=le,o[Zo]=ce,o.use=X,o.trk=fe,o),B}function Pm(i,o){var l={fn:o,rm:function(){l.fn=null,i=null,o=null}};return Gr(l,"toJSON",{v:function(){return"WatcherHandler"+(l.fn?"":"[X]")}}),i.use(l,o),l}function al(i,o,l){var v,S=rf(o);if(S)return S;var T=el("dyncfg",!0),P=o&&l!==!1?o:xm(o),L;function Y(){L[Zo]()}function B(ke,Oe,Ge){try{ke=pd(L,ke,Oe,Ge)}catch(ut){nl(i,Oe,"Setting value",ut)}return ke[Oe]}function X(ke){return Pm(L,ke)}function ce(ke,Oe){L.use(null,function(Ge){var ut=L.upd;try{nt(Oe)||(L.upd=Oe),ke(Ge)}finally{L.upd=ut}})}function le(ke,Oe){var Ge;return vd(L,ke,Oe,(Ge={},Ge[0]=!0,Ge))[Oe]}function fe(ke,Oe){var Ge;return vd(L,ke,Oe,(Ge={},Ge[1]=!0,Ge))[Oe]}function se(ke,Oe){var Ge;return vd(L,ke,Oe,(Ge={},Ge[2]=!0,Ge))[Oe]}function xe(ke,Oe){return Oe&&Dt(Oe,function(Ge,ut){Ao(me,ke,Ge,ut)}),ke}var me=(v={uid:null,cfg:P},v[sn]=i,v[Zo]=Y,v.set=B,v[xi]=xe,v[mu]=X,v.ref=le,v[Eo]=fe,v[Ps]=se,v._block=ce,v);return Gr(me,"uid",{c:!1,e:!1,w:!1,v:T}),L=Kv(me),af(L,P,"config","Creating"),me}function Am(i,o){i?(i[Ci](o),i[Jf](2,108,o)):Tu(o)}function Ro(i,o,l,v){var S=al(l,i||{},v);return o&&S[xi](S.cfg,o),S}function Nu(i,o,l){var v=i[tl]||i;return v.cfg&&(v.cfg===i||v.cfg[tl]===v)?v[mu](o):(Am(l,Hp+rr(i)),Ro(i,null,l)[mu](o))}function il(i,o){if(i&&i[Rs])return i[Rs](o)}function Wv(i,o,l){var v;return l||(v=zc(function(S){l=S})),i&&$p(i)>0?ns(il(i[0],o),function(){Wv(Il(i,1),o,l)}):l(),v}var fp=500,Jv="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function tv(i,o,l){return!i&&Ve(i)?o:$i(i)?i:ga(i)[vu]()==="true"}function md(i){return{mrg:!0,v:i}}function ol(i,o,l){return{fb:l,isVal:i,v:o}}function ro(i,o){return{fb:o,set:tv,v:!!i}}var hd=[Zn,dr,Us,mn],sl=null,ka;function no(i,o){return function(){var l=arguments,v=Zv(o);if(v){var S=v.listener;S&&S[i]&&S[i][Ka](S,l)}}}function sf(){var i=Ir("Microsoft");return i&&(sl=i.ApplicationInsights),sl}function Zv(i){var o=sl;return!o&&i.disableDbgExt!==!0&&(o=sl||sf()),o?o.ChromeDbgExt:null}function Xv(i){if(!ka){ka={};for(var o=0;o<hd[sr];o++)ka[hd[o]]=no(hd[o],i)}return ka}var ha,ul="warnToConsole",uf="AI (Internal): ",Rm="AI: ",Qv="AITR_",cf={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Oa=(ha={},ha[0]=null,ha[1]="errorToConsole",ha[2]=ul,ha[3]="debugToConsole",ha);function dp(i){return i?'"'+i[Ri](/\"/g,$r)+'"':$r}function fc(i,o){var l=Kl();if(l){var v="log";l[i]&&(v=i),rt(l[v])&&l[v](o)}}var cl=function(){function i(o,l,v,S){v===void 0&&(v=!1);var T=this;T[Qf]=o,T[Xu]=(v?Rm:uf)+o;var P=$r;zs()&&(P=Li().stringify(S));var L=(l?" message:"+dp(l):$r)+(S?" props:"+dp(P):$r);T[Xu]+=L}return i.dataType="MessageData",i}();function Hs(i,o){return(i||{})[sn]||new lf(o)}var lf=function(){function i(o){this.identifier="DiagnosticLogger",this.queue=[];var l=0,v={},S,T,P,L,Y;Pa(i,this,function(B){Y=ce(o||{}),B.consoleLoggingLevel=function(){return S},B[Jf]=function(se,xe,me,ke,Oe){Oe===void 0&&(Oe=!1);var Ge=new cl(xe,me,Oe,ke);if(L)throw rr(Ge);var ut=Oa[se]||ul;if(nt(Ge[Xu]))fe("throw"+(se===1?"Critical":"Warning"),Ge);else{if(Oe){var gr=+Ge[Qf];!v[gr]&&S>=se&&(B[ut](Ge[Xu]),v[gr]=!0)}else S>=se&&B[ut](Ge[Xu]);X(se,Ge)}},B.debugToConsole=function(se){fc("debug",se),fe("warning",se)},B[Ci]=function(se){fc("warn",se),fe("warning",se)},B.errorToConsole=function(se){fc("error",se),fe("error",se)},B.resetInternalMessageCount=function(){l=0,v={}},B[Qu]=X,B[Rs]=function(se){Y&&Y.rm(),Y=null};function X(se,xe){if(!le()){var me=!0,ke=Qv+xe[Qf];if(v[ke]?me=!1:v[ke]=!0,me&&(se<=T&&(B.queue[Mr](xe),l++,fe(se===1?"error":"warn",xe)),l===P)){var Oe="Internal events throttle limit per PageView reached for this app.",Ge=new cl(23,Oe,!1);B.queue[Mr](Ge),se===1?B.errorToConsole(Oe):B[Ci](Oe)}}}function ce(se){return Nu(Ro(se,cf,B).cfg,function(xe){var me=xe.cfg;S=me[Zu],T=me.loggingLevelTelemetry,P=me.maxMessageLimit,L=me.enableDebug})}function le(){return l>=P}function fe(se,xe){var me=Zv(o||{});me&&me[fi]&&me[fi](se,xe)}})}return i.__ieDyn=1,i}();function pp(i){return i||new lf}function St(i,o,l,v,S,T){T===void 0&&(T=!1),pp(i)[Jf](o,l,v,S,T)}function Du(i,o){pp(i)[Ci](o)}var ko,ff,km="toGMTString",df="toUTCString",_d="cookie",Oo="expires",em="isCookieUseDisabled",vp="disableCookiesUsage",mp="_ckMgr",pf=null,dc=null,rv=null,Br,Ks={},nv={},Cu=(ko={cookieCfg:md((ff={},ff[to]={fb:"cookieDomain",dfVal:Vc},ff.path={fb:"cookiePath",dfVal:Vc},ff.enabled=Fs,ff.ignoreCookies=Fs,ff.blockedCookies=Fs,ff)),cookieDomain:Fs,cookiePath:Fs},ko[vp]=Fs,ko);function ao(){!Br&&(Br=ou(function(){return Yf()}))}function Fn(i){return i?i.isEnabled():!0}function gd(i,o){return o&&i&&at(i.ignoreCookies)?si(i.ignoreCookies,o)!==-1:!1}function pc(i,o){return o&&i&&at(i.blockedCookies)&&si(i.blockedCookies,o)!==-1?!0:gd(i,o)}function ll(i,o){var l=o[Ju];if(Ve(l)){var v=void 0;nt(i[em])||(v=!i[em]),nt(i[vp])||(v=!i[vp]),l=v}return l}function ds(i,o){var l,v,S,T,P,L,Y,B,X;i=Ro(i||nv,null,o).cfg,P=Nu(i,function(le){le[xi](le.cfg,Cu),v=le.ref(le.cfg,"cookieCfg"),S=v[$l]||"/",T=v[to],L=ll(i,v)!==!1,Y=v.getCookie||av,B=v.setCookie||ps,X=v.delCookie||ps},o);var ce=(l={isEnabled:function(){var le=ll(i,v)!==!1&&L&&io(o),fe=nv[mp];return le&&fe&&ce!==fe&&(le=Fn(fe)),le},setEnabled:function(le){L=le!==!1,v[Ju]=le},set:function(le,fe,se,xe,me){var ke=!1;if(Fn(ce)&&!pc(v,le)){var Oe={},Ge=Wn(fe||$r),ut=$u(Ge,";");if(ut!==-1&&(Ge=Wn(dn(fe,ut)),Oe=Mo(Or(fe,ut+1))),yu(Oe,to,xe||T,Ur,nt),!Ve(se)){var gr=cd();if(nt(Oe[Oo])){var Zr=uu(),Xr=Zr+se*1e3;if(Xr>0){var hn=new Date;hn.setTime(Xr),yu(Oe,Oo,yd(hn,gr?km:df)||yd(hn,gr?km:df)||$r,Ur)}}gr||yu(Oe,"max-age",$r+se,null,nt)}var Zt=Xc();Zt&&Zt[_u]==="https:"&&(yu(Oe,"secure",null,null,nt),dc===null&&(dc=!iv((Go()||{})[ca])),dc&&yu(Oe,"SameSite","None",null,nt)),yu(Oe,$l,me||S,null,nt),B(le,hp(Ge,Oe)),ke=!0}return ke},get:function(le){var fe=$r;return Fn(ce)&&!gd(v,le)&&(fe=Y(le)),fe},del:function(le,fe){var se=!1;return Fn(ce)&&(se=ce.purge(le,fe)),se},purge:function(le,fe){var se,xe=!1;if(io(o)){var me=(se={},se[$l]=fe||"/",se[Oo]="Thu, 01 Jan 1970 00:00:01 GMT",se);cd()||(me["max-age"]="0"),X(le,hp($r,me)),xe=!0}return xe}},l[Rs]=function(le){P&&P.rm(),P=null},l);return ce[mp]=ce,ce}function io(i){if(pf===null){pf=!1,!Br&&ao();try{var o=Br.v||{};pf=o[_d]!==void 0}catch(l){St(i,2,68,"Cannot access document.cookie - "+fa(l),{exception:rr(l)})}}return pf}function Mo(i){var o={};if(i&&i[sr]){var l=Wn(i)[gu](";");xt(l,function(v){if(v=Wn(v||$r),v){var S=$u(v,"=");S===-1?o[v]=null:o[Wn(dn(v,S))]=Wn(Or(v,S+1))}})}return o}function yd(i,o){return rt(i[o])?i[o]():null}function hp(i,o){var l=i||$r;return Dt(o,function(v,S){l+="; "+v+(Ve(S)?$r:"="+S)}),l}function av(i){var o=$r;if(!Br&&ao(),Br.v){var l=Br.v[_d]||$r;rv!==l&&(Ks=Mo(l),rv=l),o=Wn(Ks[i]||$r)}return o}function ps(i,o){!Br&&ao(),Br.v&&(Br.v[_d]=i+"="+o)}function iv(i){return Lt(i)?!!(Gn(i,"CPU iPhone OS 12")||Gn(i,"iPad; CPU OS 12")||Gn(i,"Macintosh; Intel Mac OS X 10_14")&&Gn(i,"Version/")&&Gn(i,"Safari")||Gn(i,"Macintosh; Intel Mac OS X 10_14")&&Ii(i,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Gn(i,"Chrome/5")||Gn(i,"Chrome/6")||Gn(i,"UnrealEngine")&&!Gn(i,"Chrome")||Gn(i,"UCBrowser/12")||Gn(i,"UCBrowser/11")):!1}var Sd={perfEvtsSendAll:!1};function ov(i){i.h=null;var o=i.cb;i.cb=[],xt(o,function(l){Sr(l.fn,[l.arg])})}function vs(i,o,l,v){xt(i,function(S){S&&S[o]&&(l?(l.cb[Mr]({fn:v,arg:S}),l.h=l.h||fu(ov,0,l)):Sr(v,[S]))})}var Om=function(){function i(o){this.listeners=[];var l,v,S=[],T={h:null,cb:[]},P=Ro(o,Sd);v=P[mu](function(L){l=!!L.cfg.perfEvtsSendAll}),Pa(i,this,function(L){Gr(L,"listeners",{g:function(){return S}}),L[Pi]=function(Y){S[Mr](Y)},L[hu]=function(Y){for(var B=si(S,Y);B>-1;)S[pt](B,1),B=si(S,Y)},L[Zn]=function(Y){vs(S,Zn,T,function(B){B[Zn](Y)})},L[dr]=function(Y,B){vs(S,dr,T,function(X){X[dr](Y,B)})},L[Us]=function(Y,B){vs(S,Us,B?T:null,function(X){X[Us](Y,B)})},L[mn]=function(Y){Y&&(l||!Y[Zd]())&&vs(S,mn,null,function(B){Y[ks]?fu(function(){return B[mn](Y)},0):B[mn](Y)})},L[as]=function(Y){Y&&Y[sr]&&vs(S,as,T,function(B){B[as](Y)})},L[uc]=function(Y){Y&&Y[di]&&vs(S,uc,T,function(B){B[uc](Y)})},L[cc]=function(Y,B){if(Y>0){var X=B||0;vs(S,cc,T,function(ce){ce[cc](Y,X)})}},L[Rs]=function(Y){var B=function(){v&&v.rm(),v=null,S=[],T.h&&T.h[wo](),T.h=null,T.cb=[]},X;if(vs(S,"unload",null,function(ce){var le=ce[Rs](Y);le&&(X||(X=[]),X[Mr](le))}),X)return zc(function(ce){return ns(np(X),function(){B(),ce()})});B()}})}return i.__ieDyn=1,i}(),xu="ctx",sv="ParentContextKey",f="ChildrenContextKey",m=null,y=function(){function i(o,l,v){var S=this;if(S.start=uu(),S[Pn]=o,S[ks]=v,S[Zd]=function(){return!1},rt(l)){var T;Gr(S,"payload",{g:function(){return!T&&rt(l)&&(T=l(),l=null),T}})}S[Yc]=function(P){return P?P===i[sv]||P===i[f]?S[P]:(S[xu]||{})[P]:null},S[Ea]=function(P,L){if(P)if(P===i[sv])S[P]||(S[Zd]=function(){return!0}),S[P]=L;else if(P===i[f])S[P]=L;else{var Y=S[xu]=S[xu]||{};Y[P]=L}},S[ed]=function(){var P=0,L=S[Yc](i[f]);if(at(L))for(var Y=0;Y<L[sr];Y++){var B=L[Y];B&&(P+=B[Xo])}S[Xo]=uu()-S.start,S.exTime=S[Xo]-P,S[ed]=function(){}}}return i.ParentContextKey="parent",i.ChildrenContextKey="childEvts",i}(),I=function(){function i(o){this.ctx={},Pa(i,this,function(l){l.create=function(v,S,T){return new y(v,S,T)},l.fire=function(v){v&&(v[ed](),o&&rt(o[mn])&&o[mn](v))},l[Ea]=function(v,S){if(v){var T=l[xu]=l[xu]||{};T[v]=S}},l[Yc]=function(v){return(l[xu]||{})[v]}})}return i.__ieDyn=1,i}(),F="CoreUtils.doPerf";function H(i,o,l,v,S){if(i){var T=i;if(T[js]&&(T=T[js]()),T){var P=void 0,L=T[Yc](F);try{if(P=T.create(o(),v,S),P){if(L&&P[Ea]&&(P[Ea](y[sv],L),L[Yc]&&L[Ea])){var Y=L[Yc](y[f]);Y||(Y=[],L[Ea](y[f],Y)),Y[Mr](P)}return T[Ea](F,P),l(P)}}catch(B){P&&P[Ea]&&P[Ea]("exception",B)}finally{P&&T.fire(P),T[Ea](F,L)}}}return l()}function J(){return m}var re="00000000000000000000000000000000",te="0000000000000000";function _e(i,o,l){return i&&i[sr]===o&&i!==l?!!i.match(/^[\da-f]*$/i):!1}function et(i){return _e(i,32,re)}function Et(i){return _e(i,16,te)}var Kt=lp("plugin");function it(i){return Kt.get(i,"state",{},!0)}function lt(i,o){for(var l=[],v=null,S=i[Ai](),T;S;){var P=S[No]();if(P){v&&v[jc]&&P[Za]&&v[jc](P),T=it(P);var L=!!T[Yr];P[Yr]&&(L=P[Yr]()),L||l[Mr](P),v=P,S=S[Ai]()}}xt(l,function(Y){var B=i[la]();Y[As](i.getCfg(),B,o,i[Ai]()),T=it(Y),!Y[la]&&!T[la]&&(T[la]=B),T[Yr]=!0,delete T[Ln]})}function nr(i){return i.sort(function(o,l){var v=0;if(l){var S=l[Za];o[Za]?v=S?o[id]-l[id]:1:S&&(v=-1)}else v=o?1:-1;return v})}function Ft(i){var o={};return{getName:function(){return o[Pn]},setName:function(l){i&&i.setName(l),o[Pn]=l},getTraceId:function(){return o[Fl]},setTraceId:function(l){i&&i.setTraceId(l),et(l)&&(o[Fl]=l)},getSpanId:function(){return o[Po]},setSpanId:function(l){i&&i.setSpanId(l),Et(l)&&(o[Po]=l)},getTraceFlags:function(){return o[Ja]},setTraceFlags:function(l){i&&i.setTraceFlags(l),o[Ja]=l}}}var hr="TelemetryPluginChain",Er="_hasRun",Pt="_getTelCtx",En=0;function vc(i,o,l){for(;i;){if(i[No]()===l)return i;i=i[Ai]()}return mf([l],o.config||{},o)}function Ws(i,o,l,v){var S=null,T=[];o||(o=Ro({},null,l[sn])),v!==null&&(S=v?vc(i,l,v):i);var P={_next:Y,ctx:{core:function(){return l},diagLog:function(){return Hs(l,o.cfg)},getCfg:function(){return o.cfg},getExtCfg:X,getConfig:ce,hasNext:function(){return!!S},getNext:function(){return S},setNext:function(fe){S=fe},iterate:le,onComplete:L}};function L(fe,se){for(var xe=[],me=2;me<arguments.length;me++)xe[me-2]=arguments[me];fe&&T[Mr]({func:fe,self:nt(se)?P.ctx:se,args:xe})}function Y(){var fe=S;if(S=fe?fe[Ai]():null,!fe){var se=T;se&&se[sr]>0&&(xt(se,function(xe){try{xe.func.call(xe.self,xe.args)}catch(me){St(l[sn],2,73,"Unexpected Exception during onComplete - "+rr(me))}}),T=[])}return fe}function B(fe,se){var xe=null,me=o.cfg;if(me&&fe){var ke=me[Gc];!ke&&se&&(ke={}),me[Gc]=ke,ke=o.ref(me,Gc),ke&&(xe=ke[fe],!xe&&se&&(xe={}),ke[fe]=xe,xe=o.ref(ke,fe))}return xe}function X(fe,se){var xe=B(fe,!0);return se&&Dt(se,function(me,ke){if(Ve(xe[me])){var Oe=o.cfg[me];(Oe||!Ve(Oe))&&(xe[me]=Oe)}Ao(o,xe,me,ke)}),o[xi](xe,se)}function ce(fe,se,xe){xe===void 0&&(xe=!1);var me,ke=B(fe,!1),Oe=o.cfg;return ke&&(ke[se]||!Ve(ke[se]))?me=ke[se]:(Oe[se]||!Ve(Oe[se]))&&(me=Oe[se]),me||!Ve(me)?me:xe}function le(fe){for(var se;se=P._next();){var xe=se[No]();xe&&fe(xe)}}return P}function fl(i,o,l,v){var S=Ro(o),T=Ws(i,S,l,v),P=T.ctx;function L(B){var X=T._next();return X&&X[Za](B,P),!X}function Y(B,X){return B===void 0&&(B=null),at(B)&&(B=mf(B,S.cfg,l,X)),fl(B||P[Ai](),S.cfg,l,X)}return P[ba]=L,P[xo]=Y,P}function vf(i,o,l){var v=Ro(o.config),S=Ws(i,v,o,l),T=S.ctx;function P(Y){var B=S._next();return B&&B[Rs](T,Y),!B}function L(Y,B){return Y===void 0&&(Y=null),at(Y)&&(Y=mf(Y,v.cfg,o,B)),vf(Y||T[Ai](),o,B)}return T[ba]=P,T[xo]=L,T}function bd(i,o,l){var v=Ro(o.config),S=Ws(i,v,o,l),T=S.ctx;function P(Y){return T.iterate(function(B){rt(B[Os])&&B[Os](T,Y)})}function L(Y,B){return Y===void 0&&(Y=null),at(Y)&&(Y=mf(Y,v.cfg,o,B)),bd(Y||T[Ai](),o,B)}return T[ba]=P,T[xo]=L,T}function mf(i,o,l,v){var S=null,T=!v;if(at(i)&&i[sr]>0){var P=null;xt(i,function(L){if(!T&&v===L&&(T=!0),T&&L&&rt(L[Za])){var Y=hf(L,o,l);S||(S=Y),P&&P._setNext(Y),P=Y}})}return v&&!S?mf([v],o,l):S}function hf(i,o,l){var v=null,S=rt(i[Za]),T=rt(i[jc]),P;i?P=i[Xi]+"-"+i[id]+"-"+En++:P="Unknown-0-"+En++;var L={getPlugin:function(){return i},getNext:function(){return v},processTelemetry:X,unload:ce,update:le,_id:P,_setNext:function(fe){v=fe}};function Y(){var fe;return i&&rt(i[Pt])&&(fe=i[Pt]()),fe||(fe=fl(L,o,l)),fe}function B(fe,se,xe,me,ke){var Oe=!1,Ge=i?i[Xi]:hr,ut=fe[Er];return ut||(ut=fe[Er]={}),fe.setNext(v),i&&H(fe[la](),function(){return Ge+":"+xe},function(){ut[P]=!0;try{var gr=v?v._id:$r;gr&&(ut[gr]=!1),Oe=se(fe)}catch(Xr){var Zr=v?ut[v._id]:!0;Zr&&(Oe=!0),(!v||!Zr)&&St(fe[fi](),1,73,"Plugin ["+Ge+"] failed during "+xe+" - "+rr(Xr)+", run flags: "+rr(ut))}},me,ke),Oe}function X(fe,se){se=se||Y();function xe(me){if(!i||!S)return!1;var ke=it(i);return ke[Ln]||ke[ad]?!1:(T&&i[jc](v),i[Za](fe,me),!0)}B(se,xe,"processTelemetry",function(){return{item:fe}},!fe.sync)||se[ba](fe)}function ce(fe,se){function xe(){var me=!1;if(i){var ke=it(i),Oe=i[la]||ke[la];i&&(!Oe||Oe===fe.core())&&!ke[Ln]&&(ke[la]=null,ke[Ln]=!0,ke[Yr]=!1,i[Ln]&&i[Ln](fe,se)===!0&&(me=!0))}return me}B(fe,xe,"unload",function(){},se[ks])||fe[ba](se)}function le(fe,se){function xe(){var me=!1;if(i){var ke=it(i),Oe=i[la]||ke[la];i&&(!Oe||Oe===fe.core())&&!ke[Ln]&&i[Os]&&i[Os](fe,se)===!0&&(me=!0)}return me}B(fe,xe,"update",function(){},!1)||fe[ba](se)}return or(L)}function Ed(){var i=[];function o(v){v&&i[Mr](v)}function l(v,S){xt(i,function(T){try{T(v,S)}catch(P){St(v[fi](),2,73,"Unexpected error calling unload handler - "+rr(P))}}),i=[]}return{add:o,run:l}}function _f(){var i=[];function o(v){var S=i;i=[],xt(S,function(T){try{(T.rm||T.remove).call(T)}catch(P){St(v,2,73,"Unloading:"+rr(P))}})}function l(v){v&&Pc(i,v)}return{run:o,add:l}}var Pe,vt="getPlugin",qt=(Pe={},Pe[Gc]={isVal:Vc,v:{}},Pe),en=function(){function i(){var o=this,l,v,S,T,P;B(),Pa(i,o,function(X){X[As]=function(ce,le,fe,se){Y(ce,le,se),l=!0},X[Ln]=function(ce,le){var fe,se=X[la];if(!se||ce&&se!==ce[la]())return;var xe,me=!1,ke=ce||vf(null,se,S&&S[vt]?S[vt]():S),Oe=le||(fe={reason:0},fe[ks]=!1,fe);function Ge(){me||(me=!0,T.run(ke,le),P.run(ke[fi]()),xe===!0&&ke[ba](Oe),B())}return!X[Qo]||X[Qo](ke,Oe,Ge)!==!0?Ge():xe=!0,xe},X[Os]=function(ce,le){var fe=X[la];if(!fe||ce&&fe!==ce[la]())return;var se,xe=!1,me=ce||bd(null,fe,S&&S[vt]?S[vt]():S),ke=le||{reason:0};function Oe(){xe||(xe=!0,Y(me.getCfg(),me.core(),me[Ai]()))}return!X._doUpdate||X._doUpdate(me,ke,Oe)!==!0?Oe():se=!0,se},da(X,"_addUnloadCb",function(){return T},"add"),da(X,"_addHook",function(){return P},"add"),Gr(X,"_unloadHooks",{g:function(){return P}})}),o[fi]=function(X){return L(X)[fi]()},o[Yr]=function(){return l},o.setInitialized=function(X){l=X},o[jc]=function(X){S=X},o[ba]=function(X,ce){ce?ce[ba](X):S&&rt(S[Za])&&S[Za](X,null)},o._getTelCtx=L;function L(X){X===void 0&&(X=null);var ce=X;if(!ce){var le=v||fl(null,{},o[la]);S&&S[vt]?ce=le[xo](null,S[vt]):ce=le[xo](null,S)}return ce}function Y(X,ce,le){Ro(X,qt,Hs(ce)),!le&&ce&&(le=ce[Aa]()[Ai]());var fe=S;S&&S[vt]&&(fe=S[vt]()),o[la]=ce,v=fl(le,X,ce,fe)}function B(){l=!1,o[la]=null,v=null,S=null,P=_f(),T=Ed()}}return i.__ieDyn=1,i}();function wa(i,o,l){var v={id:o,fn:l};Pc(i,v);var S={remove:function(){xt(i,function(T,P){if(T.id===v.id)return i[pt](P,1),-1})}};return S}function Ta(i,o,l){for(var v=!1,S=i[sr],T=0;T<S;++T){var P=i[T];if(P)try{if(P.fn[Ka](null,[o])===!1){v=!0;break}}catch(L){St(l,2,64,"Telemetry initializer failed: "+fa(L),{exception:rr(L)},!0)}}return!v}var Xn=function(i){Ml(o,i);function o(){var l=i.call(this)||this;l.identifier="TelemetryInitializerPlugin",l.priority=199;var v,S;T(),Pa(o,l,function(P,L){P.addTelemetryInitializer=function(Y){return wa(S,v++,Y)},P[Za]=function(Y,B){Ta(S,Y,B?B[fi]():P[fi]())&&P[ba](Y,B)},P[Qo]=function(){T()}});function T(){v=0,S=[]}return l}return o.__ieDyn=1,o}(en),hi,ms="Plugins must provide initialize method",dl="_notificationManager",tm="SDK is still unloading...",Pu="SDK is not initialized",wd=100,Mm=5e4,Qn=qa((hi={cookieCfg:{}},hi[sc]={rdOnly:!0,ref:!0,v:[]},hi[oc]={rdOnly:!0,ref:!0,v:[]},hi[Gc]={ref:!0,v:{}},hi[ap]=Fs,hi.loggingLevelConsole=0,hi.diagnosticLogInterval=Fs,hi));function hs(i,o){return new I(o)}function rm(i,o,l){var v,S=[],T=[],P={};return xt(l,function(L){(Ve(L)||Ve(L[As]))&&fr(ms);var Y=L[id],B=L[Xi];L&&Y&&(Ve(P[Y])?P[Y]=B:Du(i,"Two extensions have same priority #"+Y+" - "+P[Y]+", "+B)),!Y||Y<o?S[Mr](L):T[Mr](L)}),v={},v[la]=S,v[oc]=T,v}function Lm(i,o){var l=!1;return xt(o,function(v){if(v===i)return l=!0,-1}),l}function uv(i,o,l,v){l&&Dt(l,function(S,T){v&&Va(T)&&Va(o[S])&&uv(i,o[S],T,v),v&&Va(T)&&Va(o[S])?uv(i,o[S],T,v):i.set(o,S,T)})}function Fm(i,o){var l=null,v=-1;return xt(i,function(S,T){if(S.w===o)return l=S,v=T,-1}),{i:v,l}}function Um(i,o){var l=Fm(i,o).l;return l||(l={w:o,rm:function(){var v=Fm(i,o);v.i!==-1&&i[pt](v.i,1)}},i[Mr](l)),l}function Gh(i,o,l){xt(o,function(v){var S=Nu(i,v.w,l);delete v.w,v.rm=function(){S.rm()}})}function jm(i,o,l,v){return o.add(i[mu](function(S){var T=S.cfg.disableDbgExt;T===!0&&v&&(l[hu](v),v=null),l&&!v&&T!==!0&&(v=Xv(S.cfg),l[Pi](v))})),v}function Ym(i){return Gr({rm:function(){i.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(i)+">"}})}var pl=function(){function i(){var o,l,v,S,T,P,L,Y,B,X,ce,le,fe,se,xe,me,ke,Oe,Ge,ut,gr,Zr,Xr,hn,Zt,jt,Wr,ja,aa,We,Yt,Nn;Pa(i,this,function(Me){Se(),Me._getDbgPlgTargets=function(){return[Xr,S]},Me[Yr]=function(){return l},Me.activeStatus=function(){return jt},Me._setPendingStatus=function(){jt=3},Me[As]=function(Ie,ht,Xt,Ct){fe&&fr(tm),Me[Yr]()&&fr("Core cannot be initialized more than once"),o=Ro(Ie,Qn,Xt||Me[sn],!1),Ie=o.cfg,nu(o[mu](function(_n){var $a=_n.cfg,Yo=jt===3;if(!Yo){ja=$a.initInMemoMaxSize||wd;var au=$a[To],Dp=$a.endpointUrl;if(Ve(au)){gr=null,jt=Di[Lr];var Cp="Please provide instrumentation key";l?(St(v,1,100,Cp),ia()):fr(Cp);return}var n_=[];if(Qt(au)?(n_[Mr](au),gr=null):gr=au,Qt(Dp)?(n_[Mr](Dp),Wr=null):Wr=Dp,n_[sr]){aa=!1,jt=3;var O_=Vc($a.initTimeOut)?$a.initTimeOut:Mm,wy=Yv(n_);fu(function(){aa||tr()},O_),ns(wy,function(Zm){try{if(aa)return;if(!Zm.rejected){var Xm=Zm[Io];if(Xm&&Xm[sr]){var _g=Xm[0];if(gr=_g&&_g[Io],Xm[sr]>1){var gg=Xm[1];Wr=gg&&gg[Io]}}gr&&(Ie[To]=gr,Ie.endpointUrl=Wr)}tr()}catch{aa||tr()}})}else tr();var a_=_n.ref(_n.cfg,Gc);Dt(a_,function(Zm){_n.ref(a_,Zm)})}})),T=Ct,Ge=jm(o,Oe,T&&Me[Zf](),Ge),Wm(),Me[sn]=Xt;var cr=Ie[sc];if(X=[],X[Mr].apply(X,Hu(Hu([],ht,!1),cr)),ce=Ie[oc],Qa(null),(!le||le[sr]===0)&&fr("No "+oc+" available"),ce&&ce[sr]>1){var $n=Me[No]("TeeChannelController");(!$n||!$n.plugin)&&St(v,1,28,"TeeChannel required")}Gh(Ie,Zr,v),Zr=null,l=!0,jt===Di.ACTIVE&&ia()},Me.getChannels=function(){var Ie=[];return le&&xt(le,function(ht){Ie[Mr](ht)}),or(Ie)},Me.track=function(Ie){H(Me[js](),function(){return"AppInsightsCore:track"},function(){Ie===null&&(Ya(Ie),fr("Invalid telemetry item")),!Ie[Pn]&&Ve(Ie[Pn])&&(Ya(Ie),fr("telemetry name required")),Ie[Qi]=Ie[Qi]||gr,Ie[Xo]=Ie[Xo]||Hc(new Date),Ie.ver=Ie.ver||"4.0",!fe&&Me[Yr]()&&jt===Di.ACTIVE?lo()[ba](Ie):jt!==Di[Lr]&&S[sr]<=ja&&S[Mr](Ie)},function(){return{item:Ie}},!Ie.sync)},Me[Aa]=lo,Me[Zf]=function(){return T||(T=new Om(o.cfg),Me[dl]=T),T},Me[Pi]=function(Ie){Me.getNotifyMgr()[Pi](Ie)},Me[hu]=function(Ie){T&&T[hu](Ie)},Me.getCookieMgr=function(){return Y||(Y=ds(o.cfg,Me[sn])),Y},Me.setCookieMgr=function(Ie){Y!==Ie&&(il(Y,!1),Y=Ie)},Me[js]=function(){return P||L||J()},Me.setPerfMgr=function(Ie){P=Ie},Me.eventCnt=function(){return S[sr]},Me.releaseQueue=function(){if(l&&S[sr]>0){var Ie=S;S=[],jt===2?xt(Ie,function(ht){ht[Qi]=ht[Qi]||gr,lo()[ba](ht)}):St(v,2,20,"core init status is not active")}},Me[Uc]=function(Ie){return xe=Ie||null,Nn=!1,We&&We[wo](),Dn(!0)};function tr(){aa=!0,Ve(gr)?(jt=Di[Lr],St(v,1,112,"ikey can't be resolved from promises")):jt=Di.ACTIVE,ia()}function ia(){l&&(Me.releaseQueue(),Me[Uc]())}function Dn(Ie){if((!We||!We[Ju])&&!Nn){var ht=Ie||v&&v.queue[sr]>0;ht&&(Yt||(Yt=!0,nu(o[mu](function(Xt){var Ct=Xt.cfg.diagnosticLogInterval;(!Ct||!(Ct>0))&&(Ct=1e4);var cr=!1;We&&(cr=We[Ju],We[wo]()),We=Vd(Km,Ct),We.unref(),We[Ju]=cr}))),We[Ju]=!0)}return We}Me[Xf]=function(){Nn=!0,We&&We[wo](),Km()},sd(Me,function(){return se},["addTelemetryInitializer"]),Me[Rs]=function(Ie,ht,Xt){var Ct;Ie===void 0&&(Ie=!0),l||fr(Pu),fe&&fr(tm);var cr=(Ct={reason:50},Ct[ks]=Ie,Ct.flushComplete=!1,Ct),$n;Ie&&!ht&&($n=zc(function(Yo){ht=Yo}));var _n=vf(Ad(),Me);_n[Do](function(){Oe.run(Me[sn]),Wv([Y,T,v],Ie,function(){Se(),ht&&ht(cr)})},Me);function $a(Yo){cr.flushComplete=Yo,fe=!0,ke.run(_n,cr),Me[Xf](),_n[ba](cr)}return Km(),Ip(Ie,$a,6,Xt),$n},Me[No]=ys,Me.addPlugin=function(Ie,ht,Xt,Ct){if(!Ie){Ct&&Ct(!1),Jm(ms);return}var cr=ys(Ie[Xi]);if(cr&&!ht){Ct&&Ct(!1),Jm("Plugin ["+Ie[Xi]+"] is already loaded!");return}var $n={reason:16};function _n(au){X[Mr](Ie),$n.added=[Ie],Qa($n),Ct&&Ct(!0)}if(cr){var $a=[cr.plugin],Yo={reason:2,isAsync:!!Xt};Sc($a,Yo,function(au){au?($n.removed=$a,$n.reason|=32,_n()):Ct&&Ct(!1)})}else _n()},Me.updateCfg=function(Ie,ht){ht===void 0&&(ht=!0);var Xt;if(Me[Yr]()){Xt={reason:1,cfg:o.cfg,oldCfg:lu({},o.cfg),newConfig:lu({},Ie),merge:ht},Ie=Xt.newConfig;var Ct=o.cfg;Ie[sc]=Ct[sc],Ie[oc]=Ct[oc]}o._block(function(cr){var $n=cr.cfg;uv(cr,$n,Ie,ht),ht||Dt($n,function(_n){Ue(Ie,_n)||cr.set($n,_n,Fs)}),cr[xi]($n,Qn)},!0),o[Zo](),Xt&&Np(Xt)},Me.evtNamespace=function(){return me},Me.flush=Ip,Me.getTraceCtx=function(Ie){return ut||(ut=Ft()),ut},Me.setTraceCtx=function(Ie){ut=Ie||null},Me.addUnloadHook=nu,da(Me,"addUnloadCb",function(){return ke},"add"),Me.onCfgChange=function(Ie){var ht;return l?ht=Nu(o.cfg,Ie,Me[sn]):ht=Um(Zr,Ie),Ym(ht)},Me.getWParam=function(){return sa()||o.cfg.enableWParam?0:-1};function gs(){var Ie={};hn=[];var ht=function(Xt){Xt&&xt(Xt,function(Ct){if(Ct[Xi]&&Ct[Co]&&!Ie[Ct.identifier]){var cr=Ct[Xi]+"="+Ct[Co];hn[Mr](cr),Ie[Ct.identifier]=Ct}})};ht(le),ce&&xt(ce,function(Xt){ht(Xt)}),ht(X)}function Se(){l=!1,o=Ro({},Qn,Me[sn]),o.cfg[Zu]=1,Gr(Me,"config",{g:function(){return o.cfg},s:function(ht){Me.updateCfg(ht,!1)}}),Gr(Me,"pluginVersionStringArr",{g:function(){return hn||gs(),hn}}),Gr(Me,"pluginVersionString",{g:function(){return Zt||(hn||gs(),Zt=hn.join(";")),Zt||$r}}),Gr(Me,"logger",{g:function(){return v||(v=new lf(o.cfg),o[sn]=v),v},s:function(ht){o[sn]=ht,v!==ht&&(il(v,!1),v=ht)}}),Me[sn]=new lf(o.cfg),Xr=[];var Ie=Me.config[sc]||[];Ie.splice(0,Ie[sr]),Pc(Ie,Xr),se=new Xn,S=[],il(T,!1),T=null,P=null,L=null,il(Y,!1),Y=null,B=null,X=[],ce=null,le=null,fe=!1,xe=null,me=el("AIBaseCore",!0),ke=Ed(),ut=null,gr=null,Oe=_f(),Zr=[],Zt=null,hn=null,Nn=!1,We=null,Yt=!1,jt=0,Wr=null,ja=null,aa=!1}function lo(){var Ie=fl(Ad(),o.cfg,Me);return Ie[Do](Dn),Ie}function Qa(Ie){var ht=rm(Me[sn],fp,X);B=null,Zt=null,hn=null,le=(ce||[])[0]||[],le=nr(Pc(le,ht[oc]));var Xt=Pc(nr(ht[la]),le);Xr=or(Xt);var Ct=Me.config[sc]||[];Ct.splice(0,Ct[sr]),Pc(Ct,Xr);var cr=lo();le&&le[sr]>0&&lt(cr[xo](le),Xt),lt(cr,Xt),Ie&&Np(Ie)}function ys(Ie){var ht=null,Xt=null,Ct=[];return xt(Xr,function(cr){if(cr[Xi]===Ie&&cr!==se)return Xt=cr,-1;cr.getChannel&&Ct[Mr](cr)}),!Xt&&Ct[sr]>0&&xt(Ct,function(cr){if(Xt=cr.getChannel(Ie),!Xt)return-1}),Xt&&(ht={plugin:Xt,setEnabled:function(cr){it(Xt)[ad]=!cr},isEnabled:function(){var cr=it(Xt);return!cr[Ln]&&!cr[ad]},remove:function(cr,$n){var _n;cr===void 0&&(cr=!0);var $a=[Xt],Yo=(_n={reason:1},_n[ks]=cr,_n);Sc($a,Yo,function(au){au&&Qa({reason:32,removed:$a}),$n&&$n(au)})}}),ht}function Ad(){if(!B){var Ie=(Xr||[]).slice();si(Ie,se)===-1&&Ie[Mr](se),B=mf(nr(Ie),o.cfg,Me)}return B}function Sc(Ie,ht,Xt){if(Ie&&Ie[sr]>0){var Ct=mf(Ie,o.cfg,Me),cr=vf(Ct,Me);cr[Do](function(){var $n=!1,_n=[];xt(X,function(Yo,au){Lm(Yo,Ie)?$n=!0:_n[Mr](Yo)}),X=_n,Zt=null,hn=null;var $a=[];ce&&(xt(ce,function(Yo,au){var Dp=[];xt(Yo,function(Cp){Lm(Cp,Ie)?$n=!0:Dp[Mr](Cp)}),$a[Mr](Dp)}),ce=$a),Xt&&Xt($n),Dn()}),cr[ba](ht)}else Xt(!1)}function Km(){if(v&&v.queue){var Ie=v.queue.slice(0);v.queue[sr]=0,xt(Ie,function(ht){var Xt,Ct=(Xt={},Xt[Pn]=xe||"InternalMessageId: "+ht[Qf],Xt[Qi]=gr,Xt[Xo]=Hc(new Date),Xt.baseType=cl.dataType,Xt.baseData={message:ht[Xu]},Xt);Me.track(Ct)})}}function Ip(Ie,ht,Xt,Ct){var cr=1,$n=!1,_n=null;Ct=Ct||5e3;function $a(){cr--,$n&&cr===0&&(_n&&_n[wo](),_n=null,ht&&ht($n),ht=null)}if(le&&le[sr]>0){var Yo=lo()[xo](le);Yo.iterate(function(au){if(au.flush){cr++;var Dp=!1;au.flush(Ie,function(){Dp=!0,$a()},Xt)||Dp||(Ie&&_n==null?_n=fu(function(){_n=null,$a()},Ct):$a())}})}return $n=!0,$a(),!0}function Wm(){var Ie;nu(o[mu](function(ht){var Xt=ht.cfg.enablePerfMgr;if(Xt){var Ct=ht.cfg[ap];(Ie!==Ct||!Ie)&&(Ct||(Ct=hs),op(ht.cfg,ap,Ct),Ie=Ct,L=null),!P&&!L&&rt(Ct)&&(L=Ct(Me,Me[Zf]()))}else L=null,Ie=null}))}function Np(Ie){var ht=bd(Ad(),Me);ht[Do](Dn),(!Me._updateHook||Me._updateHook(ht,Ie)!==!0)&&ht[ba](Ie)}function Jm(Ie){var ht=Me[sn];ht?(St(ht,2,73,Ie),Dn()):fr(Ie)}function Ya(Ie){var ht=Me[Zf]();ht&&ht[dr]([Ie],2)}function nu(Ie){Oe.add(Ie)}})}return i.__ieDyn=1,i}();function gf(i,o){try{if(i&&i!==""){var l=Li().parse(i);if(l&&l[Wa]&&l[Wa]>=l.itemsAccepted&&l.itemsReceived-l.itemsAccepted===l.errors[sr])return l}}catch(v){St(o,1,43,"Cannot parse the response. "+(v[Pn]||rr(v)),{response:i})}return null}var Js="",vl="NoResponseBody",$m="&"+vl+"=true",nm="POST",cv=function(){function i(){var o=0,l,v,S,T,P,L,Y,B,X,ce,le,fe,se,xe;Pa(i,this,function(me,ke){var Oe=!0;aa(),me[As]=function(We,Yt){S=Yt,v&&St(S,1,28,"Sender is already initialized"),me.SetConfig(We),v=!0},me._getDbgPlgTargets=function(){return[v,T,L,l]},me.SetConfig=function(We){try{if(P=We.senderOnCompleteCallBack||{},L=!!We.disableCredentials,Y=We.fetchCredentials,T=!!We.isOneDs,l=!!We.enableSendPromise,X=!!We.disableXhr,ce=!!We.disableBeacon,le=!!We.disableBeaconSync,xe=We.timeWrapper,se=!!We.addNoResponse,fe=!!We.disableFetchKeepAlive,B={sendPOST:jt},T||(Oe=!1),L){var Yt=Xc();Yt&&Yt.protocol&&Yt.protocol[vu]()==="file:"&&(Oe=!1)}return!0}catch{}return!1},me.getSyncFetchPayload=function(){return o},me.getSenderInst=function(We,Yt){return We&&We[sr]?Zr(We,Yt):null},me.getFallbackInst=function(){return B},me[Qo]=function(We,Yt){aa()};function Ge(We,Yt){Xr(Yt,200,{},We)}function ut(We,Yt){St(S,2,26,"Failed to send telemetry.",{message:We}),Xr(Yt,400,{})}function gr(We){ut("No endpoint url is provided for the batch",We)}function Zr(We,Yt){for(var Nn,Me=0,tr=null,ia=0;tr==null&&ia<We[sr];)Me=We[ia],!X&&Me===1?ld()?tr=ja:bu()&&(tr=jt):Me===2&&va(Yt)&&(!Yt||!fe)?tr=Wr:Me===3&&Gs()&&(Yt?!le:!ce)&&(tr=Zt),ia++;return tr?(Nn={_transport:Me,_isSync:Yt},Nn[rs]=tr,Nn):null}function Xr(We,Yt,Nn,Me){try{We&&We(Yt,Nn,Me)}catch{}}function hn(We,Yt){var Nn=Go(),Me=We[ts];if(!Me)return gr(Yt),!0;Me=We[ts]+(se?$m:Js);var tr=We[di],ia=T?tr:new Blob([tr],{type:"text/plain;charset=UTF-8"}),Dn=Nn.sendBeacon(Me,ia);return Dn}function Zt(We,Yt,Nn){var Me=We[di];try{if(Me)if(hn(We,Yt))Ge(Js,Yt);else{var tr=P&&P.beaconOnRetry;tr&&rt(tr)?tr(We,Yt,hn):(B&&B[rs](We,Yt,!0),St(S,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(ia){T&&Du(S,"Failed to send telemetry using sendBeacon API. Ex:"+rr(ia)),Xr(Yt,T?0:400,{},Js)}}function jt(We,Yt,Nn){var Me,tr,ia,Dn=We[Xd]||{};!Nn&&l&&(Me=zc(function(Qa,ys){tr=Qa,ia=ys})),T&&Nn&&We.disableXhrSync&&(Nn=!1);var gs=We[ts];if(!gs){gr(Yt),tr&&tr(!1);return}var Se=Wc(nm,gs,Oe,!0,Nn,We[Ll]);T||Se[td]("Content-type","application/json"),xt(bn(Dn),function(Qa){Se[td](Qa,Dn[Qa])}),Se.onreadystatechange=function(){T||(lo(Se),Se.readyState===4&&tr&&tr(!0))},Se.onload=function(){T&&lo(Se)};function lo(Qa){var ys=P&&P.xhrOnComplete,Ad=ys&&rt(ys);if(Ad)ys(Qa,Yt,We);else{var Sc=is(Qa);Xr(Yt,Qa[ki],up(Qa,T),Sc)}}return Se.onerror=function(Qa){Xr(Yt,T?Se[ki]:400,up(Se,T),T?Js:pi(Se)),ia&&ia(Qa)},Se.ontimeout=function(){Xr(Yt,T?Se[ki]:500,up(Se,T),T?Js:pi(Se)),tr&&tr(!1)},Se.send(We[di]),Me}function Wr(We,Yt,Nn){var Me,tr=We[ts],ia=We[di],Dn=T?ia:new Blob([ia],{type:"application/json"}),gs,Se,lo,Qa=new Headers,ys=ia[sr],Ad=!1,Sc=!1,Km=We[Xd]||{},Ip=(Me={method:nm,body:Dn},Me[Jv]=!0,Me);We.headers&&bn(We.headers)[sr]>0&&(xt(bn(Km),function(Ya){Qa.append(Ya,Km[Ya])}),Ip[Xd]=Qa),Y?Ip.credentials=Y:Oe&&T&&(Ip.credentials="include"),Nn&&(Ip.keepalive=!0,o+=ys,T?We._sendReason===2&&(Ad=!0,se&&(tr+=$m)):Ad=!0);var Wm=new Request(tr,Ip);try{Wm[Jv]=!0}catch{}if(!Nn&&l&&(gs=zc(function(Ya,nu){Se=Ya,lo=nu})),!tr){gr(Yt),Se&&Se(!1);return}function Np(Ya){Xr(Yt,T?0:400,{},T?Js:Ya)}function Jm(Ya,nu,Ie){var ht=Ya[ki],Xt=P.fetchOnComplete;Xt&&rt(Xt)?Xt(Ya,Yt,Ie||Js,nu):Xr(Yt,ht,{},Ie||Js)}try{ns(fetch(T?tr:Wm,T?Ip:null),function(Ya){if(Nn&&(o-=ys,ys=0),!Sc)if(Sc=!0,Ya.rejected)Np(Ya.reason&&Ya.reason[Xu]),lo&&lo(Ya.reason);else{var nu=Ya[Io];try{!T&&!nu.ok?(Np(nu.statusText),Se&&Se(!1)):T&&!nu.body?(Jm(nu,null,Js),Se&&Se(!0)):ns(nu.text(),function(Ie){Jm(nu,We,Ie[Io]),Se&&Se(!0)})}catch(Ie){Np(rr(Ie)),lo&&lo(Ie)}}})}catch(Ya){Sc||(Np(rr(Ya)),lo&&lo(Ya))}return Ad&&!Sc&&(Sc=!0,Xr(Yt,200,{}),Se&&Se(!0)),T&&!Sc&&We[Ll]>0&&xe&&xe.set(function(){Sc||(Sc=!0,Xr(Yt,500,{}),Se&&Se(!0))},We[Ll]),gs}function ja(We,Yt,Nn){var Me=zo(),tr=new XDomainRequest,ia=We[di];tr.onload=function(){var Qa=is(tr),ys=P&&P.xdrOnComplete;ys&&rt(ys)?ys(tr,Yt,We):Xr(Yt,200,{},Qa)},tr.onerror=function(){Xr(Yt,400,{},T?Js:os(tr))},tr.ontimeout=function(){Xr(Yt,500,{})},tr.onprogress=function(){};var Dn=Me&&Me.location&&Me.location[_u]||"",gs=We[ts];if(!gs){gr(Yt);return}if(!T&&gs.lastIndexOf(Dn,0)!==0){var Se="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";St(S,2,40,". "+Se),ut(Se,Yt);return}var lo=T?gs:gs[Ri](/^(https?:)/,"");tr.open(nm,lo),We[Ll]&&(tr[Ll]=We[Ll]),tr.send(ia),T&&Nn?xe&&xe.set(function(){tr.send(ia)},0):tr.send(ia)}function aa(){o=0,v=!1,l=!1,S=null,T=null,P=null,L=null,Y=null,B=null,X=!1,ce=!1,le=!1,fe=!1,se=!1,xe=null}})}return i.__ieDyn=1,i}(),lv="on",Td="attachEvent",uh="addEventListener",qm="detachEvent",_p="removeEventListener",ml="events";el("aiEvtPageHide"),el("aiEvtPageShow");var x_=/\.[\.]+/g,ch=/[\.]+$/,Vh=1,Bm=lp("events"),P_=/^([^.]*)(?:\.(.+)|)/;function yf(i){return i&&i[Ri]?i[Ri](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,$r):i}function fv(i,o){var l;if(o){var v=$r;at(o)?(v=$r,xt(o,function(T){T=yf(T),T&&(T[0]!=="."&&(T="."+T),v+=T)})):v=yf(o),v&&(v[0]!=="."&&(v="."+v),i=(i||$r)+v)}var S=P_.exec(i||$r)||[];return l={},l[un]=S[1],l.ns=(S[2]||$r).replace(x_,".").replace(ch,$r)[gu](".").sort().join("."),l}function am(i,o,l){l===void 0&&(l=!0);var v=Bm.get(i,ml,{},l),S=v[o];return S||(S=v[o]=[]),S}function Sf(i,o,l,v){i&&o&&o[un]&&(i[_p]?i[_p](o[un],l,v):i[qm]&&i[qm](lv+o[un],l))}function dv(i,o,l,v){var S=!1;return i&&o&&o[un]&&l&&(i[uh]?(i[uh](o[un],l,v),S=!0):i[Td]&&(i[Td](lv+o[un],l),S=!0)),S}function lh(i,o,l,v){for(var S=o[sr];S--;){var T=o[S];T&&(!l.ns||l.ns===T.evtName.ns)&&(!v||v(T))&&(Sf(i,T.evtName,T[Jn],T.capture),o[pt](S,1))}}function Hh(i,o,l){if(o[un])lh(i,am(i,o[un]),o,l);else{var v=Bm.get(i,ml,{});Dt(v,function(S,T){lh(i,T,o,l)}),bn(v)[sr]===0&&Bm.kill(i,ml)}}function Id(i,o){var l;return o?(at(o)?l=[i].concat(o):l=[i,o],l=fv("xx",l).ns[gu](".")):l=i,l}function Kh(i,o,l,v,S){var T;S===void 0&&(S=!1);var P=!1;if(i)try{var L=fv(o,v);if(P=dv(i,L,l,S),P&&Bm.accept(i)){var Y=(T={guid:Vh++,evtName:L},T[Jn]=l,T.capture=S,T);am(i,L.type)[Mr](Y)}}catch{}return P}function A_(i,o,l,v,S){if(S===void 0&&(S=!1),i)try{var T=fv(o,v),P=!1;Hh(i,T,function(L){return T.ns&&!l||L[Jn]===l?(P=!0,!0):!1}),P||Sf(i,T,l,S)}catch{}}var fh="sampleRate",im="ProcessLegacy",dh="http.method",zm="https://dc.services.visualstudio.com",pv="/v2/track",Nd="not_specified",ph=Jd({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),om="split",Hr="length",Zs="toLowerCase",Dd="ingestionendpoint",gp="toString",vv="push",sm="removeItem",bf="name",Cd="message",Wh="count",yp="stringify",hl="pathname",mc="exceptions",Lo="parsedStack",Xs="properties",_l="measurements",Ef="sizeInBytes",Au="typeName",Ru="severityLevel",Sp="problemGroup",xd="isManual",Jh="CreateFromInterface",mv="assembly",hc="fileName",Gm="hasFullStack",hv="level",wf="method",_v="line",gv="duration",vh="receivedResponse";function mh(i,o,l){var v=o[Hr],S=Zh(i,o);if(S[Hr]!==v){for(var T=0,P=S;l[P]!==void 0;)T++,P=Or(S,0,147)+_(T);S=P}return S}function Zh(i,o){var l;return o&&(o=Wn(ga(o)),o[Hr]>150&&(l=Or(o,0,150),St(i,2,57,"name is too long.  It has been truncated to 150 characters.",{name:o},!0))),l||o}function _i(i,o,l){l===void 0&&(l=1024);var v;return o&&(l=l||1024,o=Wn(ga(o)),o[Hr]>l&&(v=Or(o,0,l),St(i,2,61,"string value is too long. It has been truncated to "+l+" characters.",{value:o},!0))),v||o}function Qs(i,o){return d(i,o,2048,66)}function bp(i,o){var l;return o&&o[Hr]>32768&&(l=Or(o,0,32768),St(i,2,56,"message is too long, it has been truncated to 32768 characters.",{message:o},!0)),l||o}function Vn(i,o){var l;if(o){var v=""+o;v[Hr]>32768&&(l=Or(v,0,32768),St(i,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:o},!0))}return l||o}function Ep(i,o){if(o){var l={};Dt(o,function(v,S){if(gn(S)&&zs())try{S=Li()[yp](S)}catch(T){St(i,2,49,"custom property is not valid",{exception:T},!0)}S=_i(i,S,8192),v=mh(i,v,l),l[v]=S}),o=l}return o}function wp(i,o){if(o){var l={};Dt(o,function(v,S){v=mh(i,v,l),l[v]=S}),o=l}return o}function Xh(i,o){return o&&d(i,o,128,69)[gp]()}function d(i,o,l,v){var S;return o&&(o=Wn(ga(o)),o[Hr]>l&&(S=Or(o,0,l),St(i,2,v,"input is too long, it has been truncated to "+l+" characters.",{data:o},!0))),S||o}function _(i){var o="00"+i;return ti(o,o[Hr]-3)}var w=Yf()||{},D=0,k=[null,null,null,null,null];function $(i){var o=D,l=k,v=l[o];return w.createElement?l[o]||(v=l[o]=w.createElement("a")):v={host:q(i,!0)},v.href=i,o++,o>=l[Hr]&&(o=0),D=o,v}function q(i,o){var l=W(i,o)||"";if(l){var v=l.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(v!=null&&v[Hr]>3&&Lt(v[2])&&v[2][Hr]>0)return v[2]+(v[3]||"")}return l}function W(i,o){var l=null;if(i){var v=i.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(v!=null&&v[Hr]>2&&Lt(v[2])&&v[2][Hr]>0&&(l=v[2]||"",o&&v[Hr]>2)){var S=(v[1]||"")[Zs](),T=v[3]||"";(S==="http"&&T===":80"||S==="https"&&T===":443")&&(T=""),l+=T}}return l}var ie=[zm+pv,"https://breeze.aimon.applicationinsights.io"+pv,"https://dc-int.services.visualstudio.com"+pv];function oe(i){return si(ie,i[Zs]())!==-1}function De(i,o,l,v){var S,T=v,P=v;if(o&&o[Hr]>0){var L=$(o);if(S=L.host,!T)if(L[hl]!=null){var Y=L.pathname[Hr]===0?"/":L[hl];Y.charAt(0)!=="/"&&(Y="/"+Y),P=L[hl],T=_i(i,l?l+" "+Y:Y)}else T=_i(i,o)}else S=v,T=v;return{target:S,name:T,data:P}}var $e=Ku({LocalStorage:0,SessionStorage:1}),je=void 0,Ne="";function ve(i){try{if(Ve(ai()))return null;var o=new Date()[gp](),l=Ir(i===$e.LocalStorage?"localStorage":"sessionStorage"),v=Ne+o;l.setItem(v,o);var S=l.getItem(v)!==o;if(l[sm](v),!S)return l}catch{}return null}function Fe(){return He()?ve($e.SessionStorage):null}function we(i){Ne=i||""}function He(i){return(i||je===void 0)&&(je=!!ve($e.SessionStorage)),je}function Ce(i,o){var l=Fe();if(l!==null)try{return l.getItem(o)}catch(v){je=!1,St(i,2,2,"Browser failed read of session storage. "+fa(v),{exception:rr(v)})}return null}function Te(i,o,l){var v=Fe();if(v!==null)try{return v.setItem(o,l),!0}catch(S){je=!1,St(i,2,4,"Browser failed write to session storage. "+fa(S),{exception:rr(S)})}return!1}function qe(i,o){var l=Fe();if(l!==null)try{return l[sm](o),!0}catch(v){je=!1,St(i,2,6,"Browser failed removal of session storage item. "+fa(v),{exception:rr(v)})}return!1}var Bt=";",Wt="=";function ar(i){if(!i)return{};var o=i[om](Bt),l=kv(o,function(S,T){var P=T[om](Wt);if(P[Hr]===2){var L=P[0][Zs](),Y=P[1];S[L]=Y}return S},{});if(bn(l)[Hr]>0){if(l.endpointsuffix){var v=l.location?l.location+".":"";l[Dd]=l[Dd]||"https://"+v+"dc."+l.endpointsuffix}l[Dd]=l[Dd]||zm,Ii(l[Dd],"/")&&(l[Dd]=l[Dd].slice(0,-1))}return l}var Dr=function(){function i(o,l,v){var S=this,T=this;T.ver=1,T.sampleRate=100,T.tags={},T[bf]=_i(o,v)||Nd,T.data=l,T.time=Hc(new Date),T.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return S.sampleRate===100?4:1},tags:1,data:1}}return i}(),Fr=function(){function i(o,l,v,S){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var T=this;T.ver=2,T[bf]=_i(o,l)||Nd,T[Xs]=Ep(o,v),T[_l]=wp(o,S)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.Event",i.dataType="EventData",i}(),cn="<no_method>",tn="error",Jt="stack",ea="stackDetails",Je="errorSrc",ft="message",_r="description";function ur(i,o){var l=i;return l&&!Lt(l)&&(JSON&&JSON[yp]?(l=JSON[yp](i),o&&(!l||l==="{}")&&(rt(i[gp])?l=i[gp]():l=""+i)):l=""+i+" - (Missing JSON.stringify)"),l||""}function wt(i,o){var l=i;return i&&(l&&!Lt(l)&&(l=i[ft]||i[_r]||l),l&&!Lt(l)&&(l=ur(l,!0)),i.filename&&(l=l+" @"+(i.filename||"")+":"+(i.lineno||"?")+":"+(i.colno||"?"))),o&&o!=="String"&&o!=="Object"&&o!=="Error"&&$u(l||"",o)===-1&&(l=o+": "+l),l||""}function Pr(i){try{if(gn(i))return"hasFullStack"in i&&"typeName"in i}catch{}return!1}function Tt(i){try{if(gn(i))return"ver"in i&&"exceptions"in i&&"properties"in i}catch{}return!1}function Ma(i){return i&&i.src&&Lt(i.src)&&i.obj&&at(i.obj)}function st(i){var o=i||"";Lt(o)||(Lt(o[Jt])?o=o[Jt]:o=""+o);var l=o[om](`
`);return{src:o,obj:l}}function wn(i){for(var o=[],l=i[om](`
`),v=0;v<l[Hr];v++){var S=l[v];l[v+1]&&(S+="@"+l[v+1],v++),o[vv](S)}return{src:i,obj:o}}function Tn(i){var o=null;if(i)try{if(i[Jt])o=st(i[Jt]);else if(i[tn]&&i[tn][Jt])o=st(i[tn][Jt]);else if(i.exception&&i.exception[Jt])o=st(i.exception[Jt]);else if(Ma(i))o=i;else if(Ma(i[ea]))o=i[ea];else if(zo()&&zo().opera&&i[ft])o=wn(i[Cd]);else if(i.reason&&i.reason[Jt])o=st(i.reason[Jt]);else if(Lt(i))o=st(i);else{var l=i[ft]||i[_r]||"";Lt(i[Je])&&(l&&(l+=`
`),l+=" from "+i[Je]),l&&(o=st(l))}}catch(v){o=st(v)}return o||{src:"",obj:null}}function gi(i){var o="";return i&&(i.obj?xt(i.obj,function(l){o+=l+`
`}):o=i.src||""),o}function _c(i){var o,l=i.obj;if(l&&l[Hr]>0){o=[];var v=0,S=0;xt(l,function(se){var xe=se[gp]();if(eu.regex.test(xe)){var me=new eu(xe,v++);S+=me[Ef],o[vv](me)}});var T=32*1024;if(S>T)for(var P=0,L=o[Hr]-1,Y=0,B=P,X=L;P<L;){var ce=o[P][Ef],le=o[L][Ef];if(Y+=ce+le,Y>T){var fe=X-B+1;o.splice(B,fe);break}B=P,X=L,P++,L--}}return o}function Fi(i){var o="";if(i&&(o=i.typeName||i[bf]||"",!o))try{var l=/function (.{1,200})\(/,v=l.exec(i.constructor[gp]());o=v&&v[Hr]>1?v[1]:""}catch{}return o}function Tf(i){if(i)try{if(!Lt(i)){var o=Fi(i),l=ur(i,!1);return(!l||l==="{}")&&(i[tn]&&(i=i[tn],o=Fi(i)),l=ur(i,!0)),$u(l,o)!==0&&o!=="String"?o+":"+l:l}}catch{}return""+(i||"")}var _s=function(){function i(o,l,v,S,T,P){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var L=this;L.ver=2,Tt(l)?(L[mc]=l[mc]||[],L[Xs]=l[Xs],L[_l]=l[_l],l[Ru]&&(L[Ru]=l[Ru]),l.id&&(L.id=l.id,l[Xs].id=l.id),l[Sp]&&(L[Sp]=l[Sp]),Ve(l[xd])||(L[xd]=l[xd])):(v||(v={}),P&&(v.id=P),L[mc]=[new Fo(o,l,v)],L[Xs]=Ep(o,v),L[_l]=wp(o,S),T&&(L[Ru]=T),P&&(L.id=P))}return i.CreateAutoException=function(o,l,v,S,T,P,L,Y){var B,X=Fi(T||P||o);return B={},B[Cd]=wt(o,X),B.url=l,B.lineNumber=v,B.columnNumber=S,B.error=Tf(T||P||o),B.evt=Tf(P||o),B[Au]=X,B.stackDetails=Tn(L||T||P),B.errorSrc=Y,B},i.CreateFromInterface=function(o,l,v,S){var T=l[mc]&&Yu(l[mc],function(L){return Fo[Jh](o,L)}),P=new i(o,Zi(Zi({},l),{exceptions:T}),v,S);return P},i.prototype.toInterface=function(){var o,l=this,v=l.exceptions,S=l.properties,T=l.measurements,P=l.severityLevel,L=l.problemGroup,Y=l.id,B=l.isManual,X=v instanceof Array&&Yu(v,function(ce){return ce.toInterface()})||void 0;return o={ver:"4.0"},o[mc]=X,o.severityLevel=P,o.properties=S,o.measurements=T,o.problemGroup=L,o.id=Y,o.isManual=B,o},i.CreateSimpleException=function(o,l,v,S,T,P){var L;return{exceptions:[(L={},L[Gm]=!0,L.message=o,L.stack=T,L.typeName=l,L)]}},i.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",i.dataType="ExceptionData",i.formatError=Tf,i}(),Fo=function(){function i(o,l,v){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var S=this;if(Pr(l))S[Au]=l[Au],S[Cd]=l[Cd],S[Jt]=l[Jt],S[Lo]=l[Lo]||[],S[Gm]=l[Gm];else{var T=l,P=T&&T.evt;zt(T)||(T=T[tn]||P||T),S[Au]=_i(o,Fi(T))||Nd,S[Cd]=bp(o,wt(l||T,S[Au]))||Nd;var L=l[ea]||Tn(l);S[Lo]=_c(L),at(S[Lo])&&Yu(S[Lo],function(Y){Y[mv]=_i(o,Y[mv]),Y[hc]=_i(o,Y[hc])}),S[Jt]=Vn(o,gi(L)),S.hasFullStack=at(S.parsedStack)&&S.parsedStack[Hr]>0,v&&(v[Au]=v[Au]||S[Au])}}return i.prototype.toInterface=function(){var o,l=this,v=l[Lo]instanceof Array&&Yu(l[Lo],function(T){return T.toInterface()}),S=(o={id:l.id,outerId:l.outerId,typeName:l[Au],message:l[Cd],hasFullStack:l[Gm],stack:l[Jt]},o[Lo]=v||void 0,o);return S},i.CreateFromInterface=function(o,l){var v=l[Lo]instanceof Array&&Yu(l[Lo],function(T){return eu[Jh](T)})||l[Lo],S=new i(o,Zi(Zi({},l),{parsedStack:v}));return S},i}(),eu=function(){function i(o,l){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var v=this;if(v[Ef]=0,typeof o=="string"){var S=o;v[hv]=l,v[wf]=cn,v[mv]=Wn(S),v[hc]="",v[_v]=0;var T=S.match(i.regex);T&&T[Hr]>=5&&(v[wf]=Wn(T[2])||v[wf],v[hc]=Wn(T[4]),v[_v]=parseInt(T[5])||0)}else v[hv]=o[hv],v[wf]=o[wf],v[mv]=o[mv],v[hc]=o[hc],v[_v]=o[_v],v[Ef]=0;v.sizeInBytes+=v.method[Hr],v.sizeInBytes+=v.fileName[Hr],v.sizeInBytes+=v.assembly[Hr],v[Ef]+=i.baseSize,v.sizeInBytes+=v.level.toString()[Hr],v.sizeInBytes+=v.line.toString()[Hr]}return i.CreateFromInterface=function(o){return new i(o,null)},i.prototype.toInterface=function(){var o=this;return{level:o[hv],method:o[wf],assembly:o[mv],fileName:o[hc],line:o[_v]}},i.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,i.baseSize=58,i}(),ta=function(){function i(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return i}(),Jr=function(){function i(o,l,v,S,T,P,L,Y,B){this.aiDataContract={ver:1,metrics:1,properties:0};var X=this;X.ver=2;var ce=new ta;ce[Wh]=S>0?S:void 0,ce.max=isNaN(P)||P===null?void 0:P,ce.min=isNaN(T)||T===null?void 0:T,ce[bf]=_i(o,l)||Nd,ce.value=v,ce.stdDev=isNaN(L)||L===null?void 0:L,X.metrics=[ce],X[Xs]=Ep(o,Y),X[_l]=wp(o,B)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",i.dataType="MetricData",i}(),ra="";function La(i){(isNaN(i)||i<0)&&(i=0),i=Math.round(i);var o=ra+i%1e3,l=ra+Math.floor(i/1e3)%60,v=ra+Math.floor(i/(1e3*60))%60,S=ra+Math.floor(i/(1e3*60*60))%24,T=Math.floor(i/(1e3*60*60*24));return o=o[Hr]===1?"00"+o:o[Hr]===2?"0"+o:o,l=l[Hr]<2?"0"+l:l,v=v[Hr]<2?"0"+v:v,S=S[Hr]<2?"0"+S:S,(T>0?T+".":ra)+S+":"+v+":"+l+"."+o}var tu=function(){function i(o,l,v,S,T,P,L){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var Y=this;Y.ver=2,Y.id=Xh(o,L),Y.url=Qs(o,v),Y[bf]=_i(o,l)||Nd,isNaN(S)||(Y[gv]=La(S)),Y[Xs]=Ep(o,T),Y[_l]=wp(o,P)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",i.dataType="PageviewData",i}(),gc=function(){function i(o,l,v,S,T,P,L,Y,B,X,ce,le){B===void 0&&(B="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var fe=this;fe.ver=2,fe.id=l,fe[gv]=La(T),fe.success=P,fe.resultCode=L+"",fe.type=_i(o,B);var se=De(o,v,Y,S);fe.data=Qs(o,S)||se.data,fe.target=_i(o,se.target),X&&(fe.target="".concat(fe.target," | ").concat(X)),fe[bf]=_i(o,se[bf]),fe[Xs]=Ep(o,ce),fe[_l]=wp(o,le)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",i.dataType="RemoteDependencyData",i}(),Ui=function(){function i(o,l,v,S,T){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var P=this;P.ver=2,l=l||Nd,P[Cd]=bp(o,l),P[Xs]=Ep(o,S),P[_l]=wp(o,T),v&&(P[Ru]=v)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.Message",i.dataType="MessageData",i}(),If=function(){function i(o,l,v,S,T,P,L){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var Y=this;Y.ver=2,Y.url=Qs(o,v),Y[bf]=_i(o,l)||Nd,Y[Xs]=Ep(o,T),Y[_l]=wp(o,P),L&&(Y.domProcessing=L.domProcessing,Y[gv]=L[gv],Y.networkConnect=L.networkConnect,Y.perfTotal=L.perfTotal,Y[vh]=L[vh],Y.sentRequest=L.sentRequest)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",i.dataType="PageviewPerformanceData",i}(),ru=function(){function i(o,l){this.aiDataContract={baseType:1,baseData:1},this.baseType=o,this.baseData=l}return i}(),um=Ku({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function yc(i){var o="ai."+i+".";return function(l){return o+l}}var Nf=yc("application"),_a=yc("device"),Tp=yc("location"),Df=yc("operation"),yv=yc("session"),ku=yc("user"),yi=yc("cloud"),Cf=yc("internal"),a=function(i){Ml(o,i);function o(){return i.call(this)||this}return o}(sp({applicationVersion:Nf("ver"),applicationBuild:Nf("build"),applicationTypeId:Nf("typeId"),applicationId:Nf("applicationId"),applicationLayer:Nf("layer"),deviceId:_a("id"),deviceIp:_a("ip"),deviceLanguage:_a("language"),deviceLocale:_a("locale"),deviceModel:_a("model"),deviceFriendlyName:_a("friendlyName"),deviceNetwork:_a("network"),deviceNetworkName:_a("networkName"),deviceOEMName:_a("oemName"),deviceOS:_a("os"),deviceOSVersion:_a("osVersion"),deviceRoleInstance:_a("roleInstance"),deviceRoleName:_a("roleName"),deviceScreenResolution:_a("screenResolution"),deviceType:_a("type"),deviceMachineName:_a("machineName"),deviceVMName:_a("vmName"),deviceBrowser:_a("browser"),deviceBrowserVersion:_a("browserVersion"),locationIp:Tp("ip"),locationCountry:Tp("country"),locationProvince:Tp("province"),locationCity:Tp("city"),operationId:Df("id"),operationName:Df("name"),operationParentId:Df("parentId"),operationRootId:Df("rootId"),operationSyntheticSource:Df("syntheticSource"),operationCorrelationVector:Df("correlationVector"),sessionId:yv("id"),sessionIsFirst:yv("isFirst"),sessionIsNew:yv("isNew"),userAccountAcquisitionDate:ku("accountAcquisitionDate"),userAccountId:ku("accountId"),userAgent:ku("userAgent"),userId:ku("id"),userStoreRegion:ku("storeRegion"),userAuthUserId:ku("authUserId"),userAnonymousUserAcquisitionDate:ku("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:ku("authUserAcquisitionDate"),cloudName:yi("name"),cloudRole:yi("role"),cloudRoleVer:yi("roleVer"),cloudRoleInstance:yi("roleInstance"),cloudEnvironment:yi("environment"),cloudLocation:yi("location"),cloudDeploymentUnit:yi("deploymentUnit"),internalNodeName:Cf("nodeName"),internalSdkVersion:Cf("sdkVersion"),internalAgentVersion:Cf("agentVersion"),internalSnippet:Cf("snippet"),internalSdkSrc:Cf("sdkSrc")})),c=new a;function p(i,o){A_(i,null,null,o)}function g(i){var o=Yf(),l=Go(),v=!1,S=[],T=1;l&&!Ve(l.onLine)&&!l.onLine&&(T=2);var P=0,L=le(),Y=Id(el("OfflineListener"),i);try{if(X(zo())&&(v=!0),o){var B=o.body||o;B.ononline&&X(B)&&(v=!0)}}catch{v=!1}function X(Ge){var ut=!1;return Ge&&(ut=Kh(Ge,"online",xe,Y),ut&&Kh(Ge,"offline",me,Y)),ut}function ce(){return L}function le(){return!(P===2||T===2)}function fe(){var Ge=le();L!==Ge&&(L=Ge,xt(S,function(ut){var gr={isOnline:L,rState:T,uState:P};try{ut(gr)}catch{}}))}function se(Ge){P=Ge,fe()}function xe(){T=1,fe()}function me(){T=2,fe()}function ke(){var Ge=zo();if(Ge&&v){if(p(Ge,Y),o){var ut=o.body||o;nt(ut.ononline)||p(ut,Y)}v=!1}}function Oe(Ge){return S[vv](Ge),{rm:function(){var ut=S.indexOf(Ge);if(ut>-1)return S.splice(ut,1)}}}return{isOnline:ce,isListening:function(){return v},unload:ke,addListener:Oe,setOnlineState:se}}var E="AppInsightsChannelPlugin",C="duration",R="tags",x="deviceType",M="data",j="name",z="traceID",G="length",K="stringify",ee="measurements",Z="dataType",he="envelopeType",ge="toString",Le="_get",Be="enqueue",Xe="count",er="eventsLimitInMem",ir="push",Un="item",ln="emitLineDelimitedJson",jn="clear",ji="createNew",Si="markAsSent",xf="clearSent",cm="bufferOverride",Pf="BUFFER_KEY",Ze="SENT_BUFFER_KEY",Ut="concat",In="MAX_BUFFER_SIZE",Re="triggerSend",It="diagLog",na="initialize",oo="_sender",Uo="endpointUrl",Ar="instrumentationKey",bi="customHeaders",Xa="maxBatchSizeInBytes",so="onunloadDisableBeacon",Af="isBeaconApiDisabled",Ou="alwaysUseXhrOverride",Sv="disableXhr",Pd="enableSessionStorageBuffer",Rf="_buffer",bv="onunloadDisableFetch",Vm="disableSendBeaconSplit",Ia="enableSendPromise",uo="getSenderInst",Ee="unloadTransports",mt="convertUndefined",Gt="maxBatchInterval",At="serialize",Vt="_onError",An="_onPartialSuccess",vn="_onSuccess",Na="itemsReceived",co="itemsAccepted",jo="oriPayload",kf="baseType",Ev="sampleRate",hh="eventsSendRequest",mg="getSamplingScore",Sy="getHashCodeScore",Qh="baseType",Yn="baseData",Fa="properties",R_="true";function Ua(i,o,l){return yu(i,o,l,Ur)}function z0(i,o,l){var v=l[R]=l[R]||{},S=o.ext=o.ext||{},T=o[R]=o[R]||[],P=S.user;P&&(Ua(v,c.userAuthUserId,P.authId),Ua(v,c.userId,P.id||P.localId));var L=S.app;L&&Ua(v,c.sessionId,L.sesId);var Y=S.device;Y&&(Ua(v,c.deviceId,Y.id||Y.localId),Ua(v,c[x],Y.deviceClass),Ua(v,c.deviceIp,Y.ip),Ua(v,c.deviceModel,Y.model),Ua(v,c[x],Y[x]));var B=o.ext.web;if(B){Ua(v,c.deviceLanguage,B.browserLang),Ua(v,c.deviceBrowserVersion,B.browserVer),Ua(v,c.deviceBrowser,B.browser);var X=l[M]=l[M]||{},ce=X[Yn]=X[Yn]||{},le=ce[Fa]=ce[Fa]||{};Ua(le,"domain",B.domain),Ua(le,"isManual",B.isManual?R_:null),Ua(le,"screenRes",B.screenRes),Ua(le,"userConsent",B.userConsent?R_:null)}var fe=S.os;fe&&(Ua(v,c.deviceOS,fe[j]),Ua(v,c.deviceOSVersion,fe.osVer));var se=S.trace;se&&(Ua(v,c.operationParentId,se.parentID),Ua(v,c.operationName,_i(i,se[j])),Ua(v,c.operationId,se[z]));for(var xe={},me=T[G]-1;me>=0;me--){var ke=T[me];Dt(ke,function(Ge,ut){xe[Ge]=ut}),T.splice(me,1)}Dt(T,function(Ge,ut){xe[Ge]=ut});var Oe=Zi(Zi({},v),xe);Oe[c.internalSdkVersion]||(Oe[c.internalSdkVersion]=_i(i,"javascript:".concat(lI.Version),64)),l[R]=Ys(Oe)}function Hm(i,o,l){Ve(i)||Dt(i,function(v,S){Ht(S)?l[v]=S:Lt(S)?o[v]=S:zs()&&(o[v]=Li()[K](S))})}function _h(i,o){Ve(i)||Dt(i,function(l,v){i[l]=v||o})}function gh(i,o,l,v){var S=new Dr(i,v,o);Ua(S,"sampleRate",l[fh]),(l[Yn]||{}).startTime&&(S.time=Hc(l[Yn].startTime)),S.iKey=l.iKey;var T=l.iKey.replace(/-/g,"");return S[j]=S[j].replace("{0}",T),z0(i,l,S),l[R]=l[R]||[],Ys(S)}function yh(i,o){Ve(o[Yn])&&St(i,1,46,"telemetryItem.baseData cannot be null.")}var lI={Version:"3.3.4"};function fI(i,o,l){yh(i,o);var v=o[Yn][ee]||{},S=o[Yn][Fa]||{};Hm(o[M],S,v),Ve(l)||_h(S,l);var T=o[Yn];if(Ve(T))return Du(i,"Invalid input for dependency data"),null;var P=T[Fa]&&T[Fa][dh]?T[Fa][dh]:"GET",L=new gc(i,T.id,T.target,T[j],T[C],T.success,T.responseCode,P,T.type,T.correlationContext,S,v),Y=new ru(gc[Z],L);return gh(i,gc[he],o,Y)}function G0(i,o,l){yh(i,o);var v={},S={};o[Qh]!==Fr[Z]&&(v.baseTypeSource=o[Qh]),o[Qh]===Fr[Z]?(v=o[Yn][Fa]||{},S=o[Yn][ee]||{}):o[Yn]&&Hm(o[Yn],v,S),Hm(o[M],v,S),Ve(l)||_h(v,l);var T=o[Yn][j],P=new Fr(i,T,v,S),L=new ru(Fr[Z],P);return gh(i,Fr[he],o,L)}function dI(i,o,l){yh(i,o);var v=o[Yn][ee]||{},S=o[Yn][Fa]||{};Hm(o[M],S,v),Ve(l)||_h(S,l);var T=o[Yn],P=_s.CreateFromInterface(i,T,S,v),L=new ru(_s[Z],P);return gh(i,_s[he],o,L)}function pI(i,o,l){yh(i,o);var v=o[Yn],S=v[Fa]||{},T=v[ee]||{};Hm(o[M],S,T),Ve(l)||_h(S,l);var P=new Jr(i,v[j],v.average,v.sampleCount,v.min,v.max,v.stdDev,S,T),L=new ru(Jr[Z],P);return gh(i,Jr[he],o,L)}function vI(i,o,l){yh(i,o);var v,S=o[Yn];!Ve(S)&&!Ve(S[Fa])&&!Ve(S[Fa][C])?(v=S[Fa][C],delete S[Fa][C]):!Ve(o[M])&&!Ve(o[M][C])&&(v=o[M][C],delete o[M][C]);var T=o[Yn],P;((o.ext||{}).trace||{})[z]&&(P=o.ext.trace[z]);var L=T.id||P,Y=T[j],B=T.uri,X=T[Fa]||{},ce=T[ee]||{};if(Ve(T.refUri)||(X.refUri=T.refUri),Ve(T.pageType)||(X.pageType=T.pageType),Ve(T.isLoggedIn)||(X.isLoggedIn=T.isLoggedIn[ge]()),!Ve(T[Fa])){var le=T[Fa];Dt(le,function(xe,me){X[xe]=me})}Hm(o[M],X,ce),Ve(l)||_h(X,l);var fe=new tu(i,Y,B,v,X,ce,L),se=new ru(tu[Z],fe);return gh(i,tu[he],o,se)}function mI(i,o,l){yh(i,o);var v=o[Yn],S=v[j],T=v.uri||v.url,P=v[Fa]||{},L=v[ee]||{};Hm(o[M],P,L),Ve(l)||_h(P,l);var Y=new If(i,S,T,void 0,P,L,v),B=new ru(If[Z],Y);return gh(i,If[he],o,B)}function hI(i,o,l){yh(i,o);var v=o[Yn].message,S=o[Yn].severityLevel,T=o[Yn][Fa]||{},P=o[Yn][ee]||{};Hm(o[M],T,P),Ve(l)||_h(T,l);var L=new Ui(i,v,S,T,P),Y=new ru(Ui[Z],L);return gh(i,Ui[he],o,Y)}var V0=function(){function i(o,l){var v=[],S=!1,T=l.maxRetryCnt;this[Le]=function(){return v},this._set=function(P){return v=P,v},Pa(i,this,function(P){P[Be]=function(L){if(P[Xe]()>=l[er]){S||(St(o,2,105,"Maximum in-memory buffer size reached: "+P[Xe](),!0),S=!0);return}L.cnt=L.cnt||0,!(!Ve(T)&&L.cnt>T)&&v[ir](L)},P[Xe]=function(){return v[G]},P.size=function(){for(var L=v[G],Y=0;Y<v[G];Y++)L+=v[Y].item[G];return l[ln]||(L+=2),L},P[jn]=function(){v=[],S=!1},P.getItems=function(){return v.slice(0)},P.batchPayloads=function(L){if(L&&L[G]>0){var Y=[];xt(L,function(X){Y[ir](X[Un])});var B=l[ln]?Y.join(`
`):"["+Y.join(",")+"]";return B}return null},P[ji]=function(L,Y,B){var X=v.slice(0);L=L||o,Y=Y||{};var ce=B?new H0(L,Y):new by(L,Y);return xt(X,function(le){ce[Be](le)}),ce}})}return i.__ieDyn=1,i}(),by=function(i){Ml(o,i);function o(l,v){var S=i.call(this,l,v)||this;return Pa(o,S,function(T,P){T[Si]=function(L){P[jn]()},T[xf]=function(L){}}),S}return o.__ieDyn=1,o}(V0),_I=["AI_buffer","AI_sentBuffer"],H0=function(i){Ml(o,i);function o(v,S){var T=i.call(this,v,S)||this,P=!1,L=S==null?void 0:S.namePrefix,Y=S[cm]||{getItem:Ce,setItem:Te},B=Y.getItem,X=Y.setItem,ce=S.maxRetryCnt;return Pa(o,T,function(le,fe){var se=ut(o[Pf]),xe=ut(o[Ze]),me=Xr(),ke=xe[Ut](me),Oe=le._set(se[Ut](ke));Oe[G]>o[In]&&(Oe[G]=o[In]),Zr(o[Ze],[]),Zr(o[Pf],Oe),le[Be]=function(Zt){if(le[Xe]()>=o[In]){P||(St(v,2,67,"Maximum buffer size reached: "+le[Xe](),!0),P=!0);return}Zt.cnt=Zt.cnt||0,!(!Ve(ce)&&Zt.cnt>ce)&&(fe[Be](Zt),Zr(o.BUFFER_KEY,le[Le]()))},le[jn]=function(){fe[jn](),Zr(o.BUFFER_KEY,le[Le]()),Zr(o[Ze],[]),P=!1},le[Si]=function(Zt){Zr(o[Pf],le._set(Ge(Zt,le[Le]())));var jt=ut(o[Ze]);jt instanceof Array&&Zt instanceof Array&&(jt=jt[Ut](Zt),jt[G]>o[In]&&(St(v,1,67,"Sent buffer reached its maximum size: "+jt[G],!0),jt[G]=o[In]),Zr(o[Ze],jt))},le[xf]=function(Zt){var jt=ut(o[Ze]);jt=Ge(Zt,jt),Zr(o[Ze],jt)},le[ji]=function(Zt,jt,Wr){Wr=!!Wr;var ja=le[Le]().slice(0),aa=ut(o[Ze]).slice(0);Zt=Zt||v,jt=jt||{},le[jn]();var We=Wr?new o(Zt,jt):new by(Zt,jt);return xt(ja,function(Yt){We[Be](Yt)}),Wr&&We[Si](aa),We};function Ge(Zt,jt){var Wr=[],ja=[];return xt(Zt,function(aa){ja[ir](aa[Un])}),xt(jt,function(aa){!rt(aa)&&si(ja,aa[Un])===-1&&Wr[ir](aa)}),Wr}function ut(Zt){var jt=Zt;return jt=L?L+"_"+jt:jt,gr(jt)}function gr(Zt){try{var jt=B(v,Zt);if(jt){var Wr=Li().parse(jt);if(Lt(Wr)&&(Wr=Li().parse(Wr)),Wr&&at(Wr))return Wr}}catch(ja){St(v,1,42," storage key: "+Zt+", "+fa(ja),{exception:rr(ja)})}return[]}function Zr(Zt,jt){var Wr=Zt;try{Wr=L?L+"_"+Wr:Wr;var ja=JSON[K](jt);X(v,Wr,ja)}catch(aa){X(v,Wr,JSON[K]([])),St(v,2,41," storage key: "+Wr+", "+fa(aa)+". Buffer cleared",{exception:rr(aa)})}}function Xr(){var Zt=[];try{return xt(_I,function(jt){var Wr=hn(jt);if(Zt=Zt[Ut](Wr),L){var ja=L+"_"+jt,aa=hn(ja);Zt=Zt[Ut](aa)}}),Zt}catch(jt){St(v,2,41,"Transfer events from previous buffers: "+fa(jt)+". previous Buffer items can not be removed",{exception:rr(jt)})}return[]}function hn(Zt){try{var jt=gr(Zt),Wr=[];return xt(jt,function(ja){var aa={item:ja,cnt:0};Wr[ir](aa)}),qe(v,Zt),Wr}catch{}return[]}}),T}var l;return l=o,o.VERSION="_1",o.BUFFER_KEY="AI_buffer"+l.VERSION,o.SENT_BUFFER_KEY="AI_sentBuffer"+l.VERSION,o.MAX_BUFFER_SIZE=2e3,o}(V0),gI=function(){function i(o){Pa(i,this,function(l){l[At]=function(P){var L=v(P,"root");try{return Li()[K](L)}catch(Y){St(o,1,48,Y&&rt(Y[ge])?Y[ge]():"Error serializing object",null,!0)}};function v(P,L){var Y="__aiCircularRefCheck",B={};if(!P)return St(o,1,48,"cannot serialize object because it is null or undefined",{name:L},!0),B;if(P[Y])return St(o,2,50,"Circular reference detected while serializing object",{name:L},!0),B;if(!P.aiDataContract){if(L==="measurements")B=T(P,"number",L);else if(L==="properties")B=T(P,"string",L);else if(L==="tags")B=T(P,"string",L);else if(at(P))B=S(P,L);else{St(o,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:L},!0);try{Li()[K](P),B=P}catch(X){St(o,1,48,X&&rt(X[ge])?X[ge]():"Error serializing object",null,!0)}}return B}return P[Y]=!0,Dt(P.aiDataContract,function(X,ce){var le=rt(ce)?ce()&1:ce&1,fe=rt(ce)?ce()&4:ce&4,se=ce&2,xe=P[X]!==void 0,me=gn(P[X])&&P[X]!==null;if(le&&!xe&&!se)St(o,1,24,"Missing required field specification. The field is required but not present on source",{field:X,name:L});else if(!fe){var ke=void 0;me?se?ke=S(P[X],X):ke=v(P[X],X):ke=P[X],ke!==void 0&&(B[X]=ke)}}),delete P[Y],B}function S(P,L){var Y;if(P)if(!at(P))St(o,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:L},!0);else{Y=[];for(var B=0;B<P[G];B++){var X=P[B],ce=v(X,L+"["+B+"]");Y[ir](ce)}}return Y}function T(P,L,Y){var B;return P&&(B={},Dt(P,function(X,ce){if(L==="string")ce===void 0?B[X]="undefined":ce===null?B[X]="null":ce[ge]?B[X]=ce[ge]():B[X]="invalid field: toString() is not defined.";else if(L==="number")if(ce===void 0)B[X]="undefined";else if(ce===null)B[X]="null";else{var le=parseFloat(ce);B[X]=le}else B[X]="invalid field: "+Y+" is of unknown type.",St(o,1,B[X],null,!0)})),B}})}return i.__ieDyn=1,i}(),yI=8,SI=function(){function i(){}return i.prototype.getHashCodeScore=function(o){var l=this.getHashCode(o)/i.INT_MAX_VALUE;return l*100},i.prototype.getHashCode=function(o){if(o==="")return 0;for(;o[G]<yI;)o=o[Ut](o);for(var l=5381,v=0;v<o[G];++v)l=(l<<5)+l+o.charCodeAt(v),l=l&l;return Math.abs(l)},i.INT_MAX_VALUE=2147483647,i}(),bI=function(){function i(){var o=this,l=new SI,v=new a;o[mg]=function(S){var T=0;return S[R]&&S[R][v.userId]?T=l.getHashCodeScore(S[R][v.userId]):S.ext&&S.ext.user&&S.ext.user.id?T=l[Sy](S.ext.user.id):S[R]&&S[R][v.operationId]?T=l.getHashCodeScore(S[R][v.operationId]):S.ext&&S.ext.telemetryTrace&&S.ext.telemetryTrace[z]?T=l.getHashCodeScore(S.ext.telemetryTrace[z]):T=Math.random()*100,T}}return i}(),EI=function(){function i(o,l){this.INT_MAX_VALUE=2147483647;var v=l||Hs(null);(o>100||o<0)&&(v.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:o},!0),o=100),this[Ev]=o,this.samplingScoreGenerator=new bI}return i.prototype.isSampledIn=function(o){var l=this[Ev],v=!1;return l==null||l>=100||o.baseType===Jr[Z]?!0:(v=this.samplingScoreGenerator[mg](o)<l,v)},i}(),Da,lm,wv=void 0,K0="",wI=65e3;function W0(i){try{return i.responseText}catch{}return null}function TI(i){return i&&i.sendPOST}var J0=qa((Da={endpointUrl:ol(Ur,zm+pv)},Da[ln]=ro(),Da[Gt]=15e3,Da[Xa]=102400,Da.disableTelemetry=ro(),Da[Pd]=ro(!0),Da.isRetryDisabled=ro(),Da[Af]=ro(!0),Da[Vm]=ro(!0),Da[Sv]=ro(),Da[bv]=ro(),Da[so]=ro(),Da[Ar]=wv,Da.namePrefix=wv,Da.samplingPercentage=ol(II,100),Da[bi]=wv,Da[mt]=wv,Da[er]=1e4,Da[cm]=!1,Da.httpXHROverride={isVal:TI,v:wv},Da[Ou]=ro(),Da.transports=wv,Da.retryCodes=wv,Da.maxRetryCnt={isVal:Ht,v:10},Da));function II(i){return!isNaN(i)&&i>0&&i<=100}var NI=(lm={},lm[Fr.dataType]=G0,lm[Ui.dataType]=hI,lm[tu.dataType]=vI,lm[If.dataType]=mI,lm[_s.dataType]=dI,lm[Jr.dataType]=pI,lm[gc.dataType]=fI,lm),Z0=function(i){Ml(o,i);function o(){var l=i.call(this)||this;l.priority=1001,l.identifier=E;var v,S,T,P,L,Y,B,X=0,ce,le,fe,se,xe,me,ke,Oe,Ge,ut,gr,Zr,Xr,hn,Zt,jt,Wr,ja,aa,We,Yt,Nn,Me,tr,ia,Dn,gs;return Pa(o,l,function(Se,lo){tS(),Se.pause=function(){Zm(),T=!0},Se.resume=function(){T&&(T=!1,S=null,_n(),a_())},Se.flush=function(ae,be,_t){if(ae===void 0&&(ae=!0),!T){Zm();try{return Se[Re](ae,null,_t||1)}catch(gt){St(Se[It](),1,22,"flush failed, telemetry will not be collected: "+fa(gt),{exception:rr(gt)})}}},Se.onunloadFlush=function(){if(!T)if(ke||We)try{return Se[Re](!0,au,2)}catch(ae){St(Se[It](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+fa(ae),{exception:rr(ae)})}else Se.flush(!1)},Se.addHeader=function(ae,be){B[ae]=be},Se[na]=function(ae,be,_t,gt){Se.isInitialized()&&St(Se[It](),1,28,"Sender is already initialized"),lo[na](ae,be,_t,gt);var wr=Se.identifier;L=new gI(be.logger),v=0,S=null,Se[oo]=null,Y=0;var pr=Se[It]();fe=Id(el("Sender"),be.evtNamespace&&be.evtNamespace()),le=g(fe),Se._addHook(Nu(ae,function(qr){var Ca=qr.cfg;Ca.storagePrefix&&we(Ca.storagePrefix);var Rd=fl(null,Ca,be),Cr=Rd.getExtCfg(wr,J0),rS=Cr[Uo];if(se&&rS===se){var Ty=Ca[Uo];Ty&&Ty!==rS&&(Cr[Uo]=Ty)}Qt(Cr[Ar])&&(Cr[Ar]=Ca[Ar]),Gr(Se,"_senderConfig",{g:function(){return Cr}}),xe!==Cr[Uo]&&(se=xe=Cr[Uo]),be.activeStatus()===Di.PENDING?Se.pause():be.activeStatus()===Di.ACTIVE&&Se.resume(),ut&&ut!==Cr[bi]&&xt(ut,function(iu){delete B[iu.header]}),me=Cr[Xa],ke=(Cr[so]===!1||Cr[Af]===!1)&&Gs(),Oe=Cr[so]===!1&&Gs(),Ge=Cr[Af]===!1&&Gs(),We=Cr[Ou],Yt=!!Cr[Sv],gs=Cr.retryCodes;var Iy=Cr[cm],i_=!!Cr[Pd]&&(!!Iy||He()),nS=Cr.namePrefix,PI=i_!==jt||i_&&ja!==nS||i_&&Wr!==Iy;if(Se[Rf]){if(PI)try{Se._buffer=Se._buffer[ji](pr,Cr,i_)}catch(iu){St(Se[It](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+fa(iu),{exception:rr(iu)})}_n()}else Se[Rf]=i_?new H0(pr,Cr):new by(pr,Cr);ja=nS,jt=i_,Wr=Iy,Nn=!Cr[bv]&&va(!0),ia=!!Cr[Vm],Se._sample=new EI(Cr.samplingPercentage,pr),Zr=Cr[Ar],!Qt(Zr)&&!eS(Zr,Ca)&&St(pr,1,100,"Invalid Instrumentation key "+Zr),ut=Cr[bi],Lt(se)&&!oe(se)&&ut&&ut[G]>0?xt(ut,function(iu){l.addHeader(iu.header,iu.value)}):ut=null,aa=Cr[Ia];var aS=ys();Dn?Dn.SetConfig(aS):(Dn=new cv,Dn[na](aS,pr));var yg=Cr.httpXHROverride,Sg=null,M_=null,AI=zl([3,1,2],Cr.transports);Sg=Dn&&Dn[uo](AI,!1);var Ny=Dn&&Dn.getFallbackInst();Me=function(iu,Sh){return Ct(Ny,iu,Sh)},tr=function(iu,Sh){return Ct(Ny,iu,Sh,!1)},Sg=We?yg:Sg||yg||Ny,Se[oo]=function(iu,Sh){return Ct(Sg,iu,Sh)},Nn&&(ce=n_);var Dy=zl([3,1],Cr[Ee]);Nn||(Dy=Dy.filter(function(iu){return iu!==2})),M_=Dn&&Dn[uo](Dy,!0),M_=We?yg:M_||yg,(We||Cr[Ee]||!ce)&&M_&&(ce=function(iu,Sh){return Ct(M_,iu,Sh)}),ce||(ce=Me),gr=Cr.disableTelemetry,Xr=Cr[mt]||wv,hn=Cr.isRetryDisabled,Zt=Cr[Gt]}))},Se.processTelemetry=function(ae,be){var _t;be=Se._getTelCtx(be);var gt=be[It]();try{var wr=Np(ae,gt);if(!wr)return;var pr=Jm(ae,gt);if(!pr)return;var qr=L[At](pr),Ca=Se[Rf];_n(qr);var Rd=(_t={},_t[Un]=qr,_t.cnt=0,_t);Ca[Be](Rd),a_()}catch(Cr){St(gt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+fa(Cr),{exception:rr(Cr)})}Se.processNext(ae,be)},Se.isCompletelyIdle=function(){return!T&&X===0&&Se._buffer[Xe]()===0},Se.getOfflineListener=function(){return le},Se._xhrReadyStateChange=function(ae,be,_t){if(!Cp(be))return Ad(ae,be,_t)},Se[Re]=function(ae,be,_t){ae===void 0&&(ae=!0);var gt;if(!T)try{var wr=Se[Rf];if(gr)wr[jn]();else if(wr[Xe]()>0){var pr=wr.getItems();gg(_t||0,ae),be?gt=be.call(Se,pr,ae):gt=Se[oo](pr,ae)}Zm()}catch(Ca){var qr=pa();(!qr||qr>9)&&St(Se[It](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+fa(Ca),{exception:rr(Ca)})}return gt},Se.getOfflineSupport=function(){var ae;return ae={getUrl:function(){return se},createPayload:Ie},ae[At]=Ya,ae.batch=nu,ae.shouldProcess=function(be){return!!Np(be)},ae},Se._doTeardown=function(ae,be){Se.onunloadFlush(),il(le,!1),tS()},Se[Vt]=function(ae,be,_t){if(!Cp(ae))return Sc(ae,be)},Se[An]=function(ae,be){if(!Cp(ae))return Km(ae,be)},Se[vn]=function(ae,be){if(!Cp(ae))return Ip(ae)},Se._xdrOnLoad=function(ae,be){if(!Cp(be))return Qa(ae,be)};function Qa(ae,be){var _t=W0(ae);if(ae&&(_t+""=="200"||_t===""))v=0,Se[vn](be,0);else{var gt=gf(_t);gt&&gt[Na]&&gt[Na]>gt[co]&&!hn?Se[An](be,gt):Se[Vt](be,os(ae))}}function ys(){var ae;try{var be={xdrOnComplete:function(gt,wr,pr){var qr=Wm(pr);if(qr)return Qa(gt,qr)},fetchOnComplete:function(gt,wr,pr,qr){var Ca=Wm(qr);if(Ca)return $a(gt.status,Ca,gt.url,Ca[G],gt.statusText,pr||"")},xhrOnComplete:function(gt,wr,pr){var qr=Wm(pr);if(qr)return Ad(gt,qr,qr[G])},beaconOnRetry:function(gt,wr,pr){return Dp(gt,wr,pr)}},_t=(ae={},ae[Ia]=aa,ae.isOneDs=!1,ae.disableCredentials=!1,ae[Sv]=Yt,ae.disableBeacon=!Ge,ae.disableBeaconSync=!Oe,ae.senderOnCompleteCallBack=be,ae);return _t}catch{}return null}function Ad(ae,be,_t){ae.readyState===4&&$a(ae.status,be,ae.responseURL,_t,pi(ae),W0(ae)||ae.response)}function Sc(ae,be,_t){St(Se[It](),2,26,"Failed to send telemetry.",{message:be}),Se._buffer&&Se._buffer[xf](ae)}function Km(ae,be){for(var _t=[],gt=[],wr=be.errors.reverse(),pr=0,qr=wr;pr<qr.length;pr++){var Ca=qr[pr],Rd=ae.splice(Ca.index,1)[0];Xm(Ca.statusCode)?gt[ir](Rd):_t[ir](Rd)}ae[G]>0&&Se[vn](ae,be[co]),_t[G]>0&&Se[Vt](_t,pi(null,["partial success",be[co],"of",be.itemsReceived].join(" "))),gt[G]>0&&(O_(gt),St(Se[It](),2,40,"Partial success. Delivered: "+ae[G]+", Failed: "+_t[G]+". Will retry to send "+gt[G]+" our of "+be[Na]+" items"))}function Ip(ae,be){Se._buffer&&Se._buffer[xf](ae)}function Wm(ae){try{if(ae){var be=ae,_t=be[jo];return _t&&_t[G]?_t:null}}catch{}return null}function Np(ae,be){if(gr)return!1;if(!ae)return be&&St(be,1,7,"Cannot send empty telemetry"),!1;if(ae.baseData&&!ae[kf])return be&&St(be,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(ae[kf]||(ae[kf]="EventData"),!Se[oo])return be&&St(be,1,28,"Sender was not initialized"),!1;if(ht(ae))ae[fh]=Se._sample[Ev];else return be&&St(be,2,33,"Telemetry item was sampled out and not sent",{SampleRate:Se._sample[Ev]}),!1;return!0}function Jm(ae,be){var _t=ae.iKey||Zr,gt=o.constructEnvelope(ae,_t,be,Xr);if(!gt){St(be,1,47,"Unable to create an AppInsights envelope");return}var wr=!1;if(ae[R]&&ae[R][im]&&(xt(ae[R][im],function(pr){try{pr&&pr(gt)===!1&&(wr=!0,Du(be,"Telemetry processor check returns false"))}catch(qr){St(be,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+fa(qr),{exception:rr(qr)},!0)}}),delete ae[R][im]),!wr)return gt}function Ya(ae){var be=K0,_t=Se[It]();try{var gt=Np(ae,_t),wr=null;gt&&(wr=Jm(ae,_t)),wr&&(be=L[At](wr))}catch{}return be}function nu(ae){var be=K0;return ae&&ae[G]&&(be="["+ae.join(",")+"]"),be}function Ie(ae){var be,_t=$n();return be={urlString:se},be[M]=ae,be.headers=_t,be}function ht(ae){return Se._sample.isSampledIn(ae)}function Xt(ae,be,_t,gt){be===200&&ae?Se._onSuccess(ae,ae[G]):gt&&Se[Vt](ae,gt)}function Ct(ae,be,_t,gt){gt===void 0&&(gt=!0);var wr=function(Ca,Rd,Cr){return Xt(be,Ca,Rd,Cr)},pr=cr(be),qr=ae&&ae.sendPOST;return qr&&pr?(gt&&Se._buffer[Si](be),qr(pr,wr,!_t)):null}function cr(ae){var be;if(at(ae)&&ae[G]>0){var _t=Se[Rf].batchPayloads(ae),gt=$n(),wr=(be={},be[M]=_t,be.urlString=se,be.headers=gt,be.disableXhrSync=Yt,be.disableFetchKeepAlive=!Nn,be[jo]=ae,be);return wr}return null}function $n(){try{var ae=B||{};return oe(se)&&(ae[ph[6]]=ph[7]),ae}catch{}return null}function _n(ae){var be=ae?ae[G]:0;return Se[Rf].size()+be>me?((!le||le.isOnline())&&Se[Re](!0,null,10),!0):!1}function $a(ae,be,_t,gt,wr,pr){var qr=null;if(Se._appId||(qr=gf(pr),qr&&qr.appId&&(Se._appId=qr.appId)),(ae<200||ae>=300)&&ae!==0){if((ae===301||ae===307||ae===308)&&!Yo(_t)){Se[Vt](be,wr);return}if(le&&!le.isOnline()){if(!hn){var Ca=10;O_(be,Ca),St(Se[It](),2,40,". Offline - Response Code: ".concat(ae,". Offline status: ").concat(!le.isOnline(),". Will retry to send ").concat(be.length," items."))}return}!hn&&Xm(ae)?(O_(be),St(Se[It](),2,40,". Response code "+ae+". Will retry to send "+be[G]+" items.")):Se[Vt](be,wr)}else Yo(_t),ae===206?(qr||(qr=gf(pr)),qr&&!hn?Se[An](be,qr):Se[Vt](be,wr)):(v=0,Se[vn](be,gt))}function Yo(ae){return Y>=10?!1:!Ve(ae)&&ae!==""&&ae!==se?(se=ae,++Y,!0):!1}function au(ae,be){if(ce)ce(ae,!1);else{var _t=Dn&&Dn[uo]([3],!0);return Ct(_t,ae,be)}}function Dp(ae,be,_t){var gt=ae,wr=gt&&gt[jo];if(ia)tr&&tr(wr,!0),St(Se[It](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var pr=[],qr=0;qr<wr[G];qr++){var Ca=wr[qr],Rd=[Ca],Cr=cr(Rd);_t(Cr,be)?Se._onSuccess(Rd,Rd[G]):pr[ir](Ca)}pr[G]>0&&(tr&&tr(pr,!0),St(Se[It](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function Cp(ae){try{if(ae&&ae[G])return Lt(ae[0])}catch{}return null}function n_(ae,be){var _t=null;if(at(ae)){for(var gt=ae[G],wr=0;wr<ae[G];wr++)gt+=ae[wr].item[G];var pr=Dn.getSyncFetchPayload();pr+gt<=wI?_t=2:Gs()?_t=3:(_t=1,St(Se[It](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var qr=Dn&&Dn[uo]([_t],!0);return Ct(qr,ae,be)}return null}function O_(ae,be){if(be===void 0&&(be=1),!(!ae||ae[G]===0)){var _t=Se[Rf];_t[xf](ae),v++;for(var gt=0,wr=ae;gt<wr.length;gt++){var pr=wr[gt];pr.cnt=pr.cnt||0,pr.cnt++,_t[Be](pr)}wy(be),a_()}}function wy(ae){var be=10,_t;if(v<=1)_t=be;else{var gt=(Math.pow(2,v)-1)/2,wr=Math.floor(Math.random()*gt*be)+1;wr=ae*wr,_t=Math.max(Math.min(wr,3600),be)}var pr=uu()+_t*1e3;S=pr}function a_(){if(!P&&!T){var ae=S?Math.max(0,S-uu()):0,be=Math.max(Zt,ae);P=fu(function(){P=null,Se[Re](!0,null,1)},be)}}function Zm(){P&&P.cancel(),P=null,S=null}function Xm(ae){return Ve(gs)?ae===401||ae===408||ae===429||ae===500||ae===502||ae===503||ae===504:gs[G]&&gs.indexOf(ae)>-1}function _g(){var ae="getNotifyMgr";return Se.core[ae]?Se.core[ae]():Se.core._notificationManager}function gg(ae,be){var _t=_g();if(_t&&_t[hh])try{_t[hh](ae,be)}catch(gt){St(Se[It](),1,74,"send request notification failed: "+fa(gt),{exception:rr(gt)})}}function eS(ae,be){var _t=be.disableInstrumentationKeyValidation,gt=Ve(_t)?!1:_t;if(gt)return!0;var wr="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",pr=new RegExp(wr);return pr.test(ae)}function tS(){Se[oo]=null,Se[Rf]=null,Se._appId=null,Se._sample=null,B={},le=null,v=0,S=null,T=!1,P=null,L=null,Y=0,X=0,ce=null,fe=null,se=null,xe=null,me=0,ke=!1,ut=null,gr=!1,Zr=null,Xr=wv,hn=!1,jt=null,ja=wv,Yt=!1,Nn=!1,ia=!1,Me=null,tr=null,Dn=null,Gr(Se,"_senderConfig",{g:function(){return bt({},J0)}})}}),l}return o.constructEnvelope=function(l,v,S,T){var P;v!==l.iKey&&!Ve(v)?P=Zi(Zi({},l),{iKey:v}):P=l;var L=NI[P.baseType]||G0;return L(S,P,T)},o}(en),e_="instrumentationKey",hg="connectionString",X0="instrumentationkey",t_="endpointUrl",Q0="ingestionendpoint",k_="userOverrideEndpointUrl",r_,Ey=void 0,DI=(r_={diagnosticLogInterval:ol(CI,1e4)},r_[hg]=Ey,r_[t_]=Ey,r_[e_]=Ey,r_.extensionConfig={},r_);function CI(i){return i&&i>0}var xI=function(){function i(o){var l=new pl,v;(Ve(o)||Ve(o[e_])&&Ve(o[hg]))&&fr("Invalid input configuration"),Pa(i,this,function(T){Gr(T,"config",{g:function(){return v}}),P(),T.initialize=P,T.track=S,sd(T,l,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function P(){var L=Ro(o||{},DI);v=L.cfg,l.addUnloadHook(Nu(L,function(){var Y=v[hg];if(Qt(Y)){var B=Bc(function(fe,se){ns(Y,function(xe){var me=xe.value,ke=v[e_];if(!xe.rejected&&me){v[hg]=me;var Oe=ar(me);ke=Oe[X0]||ke}fe(ke)})}),X=Bc(function(fe,se){ns(Y,function(xe){var me=xe.value,ke=v[t_];if(!xe.rejected&&me){var Oe=ar(me),Ge=Oe[Q0];ke=Ge?Ge+pv:ke}fe(ke)})});v[e_]=B,v[t_]=v[k_]||X}if(Lt(Y)){var ce=ar(Y),le=ce[Q0];v[t_]=v[k_]?v[k_]:le+pv,v[e_]=ce[X0]||v[e_]}v[t_]=v[k_]?v[k_]:v[t_]})),l.initialize(v,[new Z0])}});function S(T){T&&(T.baseData=T.baseData||{},T.baseType=T.baseType||"EventData"),l.track(T)}}return i.__ieDyn=1,i}();e.AppInsightsCore=pl,e.ApplicationInsights=xI,e.Sender=Z0,e.SeverityLevel=um,e.arrForEach=xt,e.isNullOrUndefined=Ve,e.proxyFunctions=sd,e.throwError=fr})});var PS=kd(Iv=>{"use strict";var pN=Iv&&Iv.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),vN=Iv&&Iv.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),mN=Iv&&Iv.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&pN(t,e,r);return vN(t,e),t};Object.defineProperty(Iv,"__esModule",{value:!0});Iv.appInsightsClientFactory=void 0;var hN=DS(),_N=Yy(),gN=async(e,t,r,n,s)=>{let u;try{let b=await Promise.resolve().then(()=>mN(xS())),N={};if(n){let V={alwaysUseXhrOverride:!0,httpXHROverride:n};N[hN.BreezeChannelIdentifier]=V}let A;e.startsWith("InstrumentationKey=")||(A=e);let U=A?{instrumentationKey:A}:{connectionString:e};u=new b.ApplicationInsights({...U,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:N})}catch(b){return Promise.reject(b)}return{logEvent:(b,N)=>{let A={...N==null?void 0:N.properties,...N==null?void 0:N.measurements};s!=null&&s.length&&_N.TelemetryUtil.applyReplacements(A,s),u==null||u.track({name:b,data:A,baseType:"EventData",ext:{user:{id:t,authId:t},app:{sesId:r}},baseData:{name:b,properties:N==null?void 0:N.properties,measurements:N==null?void 0:N.measurements}})},flush:async()=>{u==null||u.flush(!1)},dispose:async()=>new Promise(N=>{u==null||u.unload(!0,()=>{N(),u=void 0},1e3)})}};Iv.appInsightsClientFactory=gN});var AS=kd(kg=>{"use strict";Object.defineProperty(kg,"__esModule",{value:!0});kg.BaseTelemetryReporter=void 0;var $y=class{constructor(t,r,n){this.telemetrySender=t,this.vscodeAPI=r,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(t,r,n,s){s?this.telemetrySender.sendEventData(t,{properties:r,measurements:n}):this.telemetryLogger.logUsage(t,{properties:r,measurements:n})}sendTelemetryEvent(t,r,n){this.internalSendTelemetryEvent(t,r,n,!1)}sendRawTelemetryEvent(t,r,n){let s={...r};for(let u of Object.keys(s??{})){let h=s[u];typeof u=="string"&&h!==void 0&&(s[u]=new this.vscodeAPI.TelemetryTrustedValue(typeof h=="string"?h:h.value))}this.sendTelemetryEvent(t,s,n)}sendDangerousTelemetryEvent(t,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(t,r,n,!0)}internalSendTelemetryErrorEvent(t,r,n,s){s?this.telemetrySender.sendEventData(t,{properties:r,measurements:n}):this.telemetryLogger.logError(t,{properties:r,measurements:n})}sendTelemetryErrorEvent(t,r,n){this.internalSendTelemetryErrorEvent(t,r,n,!1)}sendDangerousTelemetryErrorEvent(t,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(t,r,n,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(t=>t.dispose()))}};kg.BaseTelemetryReporter=$y});var RS=kd(Og=>{"use strict";Object.defineProperty(Og,"__esModule",{value:!0});Og.BaseTelemetrySender=void 0;var dm;(function(e){e[e.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",e[e.INSTANTIATING=1]="INSTANTIATING",e[e.INSTANTIATED=2]="INSTANTIATED"})(dm||(dm={}));var qy=class{constructor(t,r){this._instantiationStatus=dm.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=r,this._key=t}sendEventData(t,r){if(!this._telemetryClient){this._instantiationStatus!==dm.INSTANTIATED&&this._eventQueue.push({eventName:t,data:r});return}this._telemetryClient.logEvent(t,r)}sendErrorData(t,r){if(!this._telemetryClient){this._instantiationStatus!==dm.INSTANTIATED&&this._exceptionQueue.push({exception:t,data:r});return}let n={stack:t.stack,message:t.message,name:t.name};if(r){let s=r.properties||r;r.properties={...s,...n}}else r={properties:n};this._telemetryClient.logEvent("unhandlederror",r)}async flush(){var t;return(t=this._telemetryClient)==null?void 0:t.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:t,data:r})=>this.sendEventData(t,r)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:t,data:r})=>this.sendErrorData(t,r)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===dm.NOT_INSTANTIATED&&(this._instantiationStatus=dm.INSTANTIATING,this._clientFactory(this._key).then(t=>{this._telemetryClient=t,this._instantiationStatus=dm.INSTANTIATED,this._flushQueues()}).catch(t=>{console.error(t),this._instantiationStatus=dm.INSTANTIATED}))}};Og.BaseTelemetrySender=qy});var MS=kd(pm=>{"use strict";var yN=pm&&pm.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),SN=pm&&pm.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Gy=pm&&pm.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&yN(t,e,r);return SN(t,e),t};Object.defineProperty(pm,"__esModule",{value:!0});var bN=Gy(require("https")),By=Gy(require("os")),Mg=Gy(require("vscode")),EN=IS(),wN=PS(),TN=AS(),IN=RS(),kS=Yy();function OS(){return{sendPOST:(t,r)=>{let n={method:"POST",headers:{...t.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(t.data)}};try{let s=bN.request(t.urlString,n,u=>{u.on("data",function(h){r(u.statusCode??200,u.headers,h.toString())}),u.on("error",function(){r(0,{})})});s.write(t.data,u=>{u&&r(0,{})}),s.end()}catch{r(0,{})}}}}var zy=class extends TN.BaseTelemetryReporter{constructor(t,r){let n=h=>(0,wN.appInsightsClientFactory)(h,Mg.env.machineId,Mg.env.sessionId,OS(),r);kS.TelemetryUtil.shouldUseOneDataSystemSDK(t)&&(n=h=>(0,EN.oneDataSystemClientFactory)(h,Mg,OS()));let s={release:By.release(),platform:By.platform(),architecture:By.arch()},u=new IN.BaseTelemetrySender(t,n);if(t&&t.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(u,Mg,{additionalCommonProperties:kS.TelemetryUtil.getAdditionalCommonProperties(s)})}};pm.default=zy});var Mb=kd((OO,c_)=>{"use strict";var XN=typeof Buffer<"u",Ab=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,Rb=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function kb(e,t,r){r==null&&t!==null&&typeof t=="object"&&(r=t,t=void 0),XN&&Buffer.isBuffer(e)&&(e=e.toString()),e&&e.charCodeAt(0)===65279&&(e=e.slice(1));let n=JSON.parse(e,t);if(n===null||typeof n!="object")return n;let s=r&&r.protoAction||"error",u=r&&r.constructorAction||"error";if(s==="ignore"&&u==="ignore")return n;if(s!=="ignore"&&u!=="ignore"){if(Ab.test(e)===!1&&Rb.test(e)===!1)return n}else if(s!=="ignore"&&u==="ignore"){if(Ab.test(e)===!1)return n}else if(Rb.test(e)===!1)return n;return Ob(n,{protoAction:s,constructorAction:u,safe:r&&r.safe})}function Ob(e,{protoAction:t="error",constructorAction:r="error",safe:n}={}){let s=[e];for(;s.length;){let u=s;s=[];for(let h of u){if(t!=="ignore"&&Object.prototype.hasOwnProperty.call(h,"__proto__")){if(n===!0)return null;if(t==="error")throw new SyntaxError("Object contains forbidden prototype property");delete h.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(h,"constructor")&&Object.prototype.hasOwnProperty.call(h.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete h.constructor}for(let b in h){let N=h[b];N&&typeof N=="object"&&s.push(N)}}}return e}function Zy(e,t,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return kb(e,t,r)}finally{Error.stackTraceLimit=n}}function QN(e,t){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return kb(e,t,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}c_.exports=Zy;c_.exports.default=Zy;c_.exports.parse=Zy;c_.exports.safeParse=QN;c_.exports.scan=Ob});var Tk={};iS(Tk,{activate:()=>Ek,deactivate:()=>wk});module.exports=FI(Tk);var cI=require("vscode");var zS=require("vscode");var Hy={};iS(Hy,{action:()=>UI,diffView:()=>CN,storeApiKey:()=>jI,work:()=>xN});function UI(e){return t=>{typeof t=="function"&&t()}}var xy=require("vscode");function jI({ext:e,log:t}){return async(r,n)=>{let s=await xy.window.showInputBox({prompt:`Enter the ${n}`});s&&(t.info(n,{event:"action.key"}),await e.secrets.store(r,s),xy.window.showInformationMessage(`${n} stored successfully`))}}var Lf=require("vscode");var Ss=require("vscode"),yS=Cy(mS());var Ly=require("crypto");var nN=128,bh,o_;function aN(e){!bh||bh.length<e?(bh=Buffer.allocUnsafe(e*nN),Ly.webcrypto.getRandomValues(bh),o_=0):o_+e>bh.length&&(Ly.webcrypto.getRandomValues(bh),o_=0),o_+=e}function iN(e){return aN(e|=0),bh.subarray(o_-e,o_)}function oN(e,t,r){let n=(2<<31-Math.clz32(e.length-1|1))-1,s=Math.ceil(1.6*n*t/e.length);return(u=t)=>{let h="";for(;;){let b=r(s),N=s;for(;N--;)if(h+=e[b[N]&n]||"",h.length>=u)return h}}}function hS(e,t=21){return oN(e,t,iN)}var Od=require("vscode"),Fy="multicoder",_S,gS,wg=(gS=(_S=Od.workspace.workspaceFolders)==null?void 0:_S[0])==null?void 0:gS.uri,Tg=new Map;function sN(e){return e.path.split("/").pop()}function xp(e){let t=Od.workspace.getWorkspaceFolder(e);if(t){let u="";return String(t.uri)!==String(e)&&(u=Od.workspace.asRelativePath(e,!1).replace(/\\/g,"/")),String(t.uri)!==String(wg)&&(u=".folders/"+sN(t.uri)+(u?"/"+u:"")),u||(u="."),u}if(e.scheme==="untitled")return".untitled/"+e.path;let r=e.path.split("/"),n=r.pop(),s=r.pop();return Tg.has(s)||Tg.set(s,Od.Uri.joinPath(e,"../")),".external/"+s+"/"+n}function Rn(e){return(e=="."||e=="./")&&(e=""),e=e.startsWith("/")?e:"/"+e,Od.Uri.from({scheme:Fy,path:e})}function Mu(e){let[t,r,...n]=e.path.split("/");if(r==".documents")return e.with({scheme:"file"});if(r==".untitled")return Od.Uri.from({scheme:"untitled",path:n.join("/")});if(r==".external"){let s=n.shift();if(Tg.has(s))return Od.Uri.joinPath(Tg.get(s),n.join("/"));throw new Error("Unknown external directory: "+s)}if(r==".folders"){let s=n.shift();for(let u of Od.workspace.workspaceFolders||[])if(u.uri.path.endsWith("/"+s))return Od.Uri.joinPath(u.uri,n.join("/"));throw new Error("Unknown workspace folder: "+s)}if(wg)return e.path?Od.Uri.joinPath(wg,e.path):wg;throw new Error("Cannot find source Uri")}var{fs:Uy}=Ss.workspace,uN=hS("1234567890abcdef",10);function Ig(){return uN()}function L_(){let e=[];for(let t of Ss.window.tabGroups.all.flatMap(r=>r.tabs))t.input instanceof Ss.TabInputText&&e.push(t.input.uri);return e}async function Of(e){return new TextDecoder().decode(await Uy.readFile(e))}async function Ng(e,t){return await Uy.writeFile(e,new TextEncoder().encode(t))}async function Dg(e=""){let t=Ss.workspace.workspaceFolders;if(!(t!=null&&t.length))return e?[]:L_().map(h=>({name:xp(h).split("/").pop(),path:xp(h),uri:h,isFile:!0,isDirectory:!1,isSymbolicLink:!1}));let r=t[0],n=Ss.Uri.joinPath(r.uri,e);if(t.length>1){let[h,...b]=e.split("/");if(!h)return t.map(({name:N,uri:A})=>({name:N,path:N,uri:A,isFile:!1,isDirectory:!0,isSymbolicLink:!1}));if(r=t.find(N=>N.name==h),!r)return[];n=Ss.Uri.joinPath(r.uri,...b)}let s=(0,yS.default)().add([".git",".gitignore"]);try{s.add(await Of(Ss.Uri.joinPath(r.uri,".gitignore")))}catch{}let u=(await Uy.readDirectory(n)).map(([h,b])=>({name:h,path:xp(Ss.Uri.joinPath(n,h)),uri:Ss.Uri.joinPath(n,h),isFile:!!(b&Ss.FileType.File),isDirectory:!!(b&Ss.FileType.Directory),isSymbolicLink:!!(b&Ss.FileType.SymbolicLink)})).filter(({uri:h})=>!s.ignores(Ss.workspace.asRelativePath(h,!1)));return u.sort((h,b)=>h.isFile&&b.isDirectory?1:h.isDirectory&&b.isFile?-1:h.name.localeCompare(b.name)),u}var LS=Cy(MS()),NN="InstrumentationKey=4a0957be-8ce1-4335-8aa5-1fb742355aa5;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com/;LiveEndpoint=https://westeurope.livediagnostics.monitor.azure.com/;ApplicationId=b0fce7b4-deeb-43b7-aa17-e5024c6c504c";function DN(e){return{logUsage(t,r){e.sendTelemetryEvent(t,r)},logError(t,r={}){if(t&&typeof t=="object"){let{message:n,stack:s}=t,u=String(t.name||"error").toLowerCase(),h=String(t);e.sendTelemetryErrorEvent(u,{...t,...r,message:n,stack:s,text:h})}else e.sendTelemetryErrorEvent(String(t).toLowerCase().replace(/\W+/g,"-"),r)}}}function FS(e){let t=new LS.default(NN),r=DN(t);e.telemetry=r,r.logUsage("activated"),e.ext.subscriptions.push(t)}var US=require("vscode");function jS(e){let t=US.window.createOutputChannel("Multicoder",{log:!0});function r(s){if(!s||typeof s!="object")return;let{event:u,...h}=s,b=Object.entries(h).map(([N,A])=>`
    ${N}: ${A}`);b.length&&t.trace(b.join(""))}function n(s){let u={};return s!=null&&s.model&&(u.modelId=s.model.modelId,u.modelProvider=s.model.provider),u}e.log={error(s,u={}){t.error(s),e.telemetry.logError(s,{...n(this.context),...u}),r(u)},warn(s,u={}){t.warn((u!=null&&u.event?`[${u.event}] `:"")+s),e.telemetry.logUsage((u==null?void 0:u.event)||"warning",{text:s,...n(this.context),...u}),r(u)},info(s,u={}){t.info((u!=null&&u.event?`[${u.event}] `:"")+s),e.telemetry.logUsage((u==null?void 0:u.event)||"info",{text:s,...n(this.context),...u}),r(u)},context:null},e.ext.subscriptions.push(t)}var Hn=require("vscode");var{fs:F_}=Hn.workspace,Nv=new Map,Eh=new Map;function $S(e){let t=new Vy,r=Hn.workspace.registerFileSystemProvider(Fy,t,{isCaseSensitive:!0,isReadonly:!1});e.ext.subscriptions.push(r)}function Mf(e){return e.authority+e.path}async function YS(e){try{return await F_.stat(e)}catch{}}function Lg(e){let t=e?Hn.FileType.Directory:Hn.FileType.File,r=Date.now();return{type:t,ctime:r,mtime:r,size:0,content:null}}var Vy=class{async stat(t){let r=Nv.get(Mf(t));if(!r&&t.path.startsWith("/.documents"))throw Hn.FileSystemError.FileNotFound(t);if(!r)return await F_.stat(Mu(t));if(!r.type)throw Hn.FileSystemError.FileNotFound(t);return r}async readFile(t){let r=Nv.get(Mf(t));if(!r&&t.path.startsWith("/.documents"))throw Hn.FileSystemError.FileNotFound(t);if(!r)return await F_.readFile(Mu(t));if(r.type&Hn.FileType.Directory)throw Hn.FileSystemError.FileIsADirectory(t);if(!r.type)throw Hn.FileSystemError.FileNotFound(t);return r.content}async writeFile(t,r,n){let s=Nv.get(Mf(t)),u=!!(s!=null&&s.type);if(!s&&!t.path.startsWith("/.documents")&&(s=await YS(Mu(t)),u=!!s),s||(s=Lg()),s.type&Hn.FileType.Directory)throw Hn.FileSystemError.FileIsADirectory(t);if(!u&&!n.create)throw Hn.FileSystemError.FileNotFound(t);if(u&&n.create&&!n.overwrite)throw Hn.FileSystemError.FileExists(t);s.mtime=Date.now(),s.content=r,s.size=r.length,Nv.set(Mf(t),s),Eh.has(Mf(t))&&this._emitter.fire([{type:Hn.FileChangeType.Changed,uri:t}])}async readDirectory(t){let r=new Map,n=null;try{if(!t.path.startsWith("/.documents")){let s=Mu(t),u=await F_.stat(s),h=await F_.readDirectory(Mu(t));for(let[b,N]of h)r.set(b,N)}}catch(s){n=s}for(let[s,u]of Nv){let h=s.split("/"),b=h.pop();h.join("/")===t.path&&(u.type?r.set(b,u.type):r.has(b)&&r.delete(b))}if(n&&r.size==0&&!t.path.startsWith("/.documents"))throw n;return Array.from(r.entries())}async delete(t,r){let n=Nv.get(Mf(t)),s=!!(n!=null&&n.type);if(!n&&!t.path.startsWith("/.documents")&&(n=await YS(Mu(t)),s=!!n),!s)throw Hn.FileSystemError.FileNotFound(t);n||(n=Lg()),n.type=0,n.content=null,n.size=0,Nv.set(Mf(t),n),Eh.has(Mf(t))&&this._emitter.fire([{type:Hn.FileChangeType.Deleted,uri:t}])}rename(t,r,n){}async createDirectory(t){let r=Lg(!0);Nv.set(Mf(t),r),Eh.has(Mf(t))&&this._emitter.fire([{type:Hn.FileChangeType.Created,uri:t}])}_emitter=new Hn.EventEmitter;onDidChangeFile=this._emitter.event;watch(t,r){let n={},s=Eh.get(Mf(t))||new Set;return s.add(n),Eh.set(Mf(t),s),new Hn.Disposable(()=>{s.delete(n),s.size||Eh.set(Mf(t),null)})}};function qS(){Nv=new Map,Eh=new Map;let e=Lg();e.content=new Uint8Array,e.permissions=Hn.FilePermission.Readonly,Nv.set("/~empty",e)}function CN(e){return async(t,r,n)=>{var ne,ye,Ae;let s=Rn(t),u=Mu(s),h=t.split("/").pop();try{await Lf.workspace.fs.stat(u)}catch{u=Rn("~empty")}await Lf.commands.executeCommand("vscode.diff",u,s,`${h} - proposed changes`),e.log.info(h,{event:"action.diff"});let b=e.recent.get(n);if(!b)return;let N=(ye=(ne=b.shared)==null?void 0:ne.edits)==null?void 0:ye.find(tt=>tt.id===r),A=Lf.window.activeTextEditor,U=A==null?void 0:A.document,V=(Ae=U==null?void 0:U.getText())==null?void 0:Ae.replace(/\r\n/g,`
`);if(!N||!N.search||!A||!U||U.uri.path!==s.path)return;let Q=V.indexOf(N.search);if(Q==-1)return;let pe=V.slice(0,Q).split(`
`).length-1,de=N.search.split(`
`).length,ue=new Lf.Position(pe,0);A.selection=new Lf.Selection(ue,ue),A.revealRange(new Lf.Range(ue,new Lf.Position(pe+de,0)))}}var Qk=require("vscode");async function BS(){}function xN(e){return()=>{BS()}}function GS(e){Object.entries(Hy).forEach(([t,r])=>{let n=zS.commands.registerCommand(`multicoder.${t}`,r(e));e.ext.subscriptions.push(n)})}var Rv=require("vscode");var VS="vercel.ai.error",PN=Symbol.for(VS),HS,AN=class KS extends Error{constructor({name:t,message:r,cause:n}){super(r),this[HS]=!0,this.name=t,this.cause=n}static isInstance(t){return KS.hasMarker(t,VS)}static hasMarker(t,r){let n=Symbol.for(r);return t!=null&&typeof t=="object"&&n in t&&typeof t[n]=="boolean"&&t[n]===!0}};HS=PN;var Mt=AN,WS="AI_APICallError",JS=`vercel.ai.error.${WS}`,RN=Symbol.for(JS),ZS,gl=class extends Mt{constructor({message:e,url:t,requestBodyValues:r,statusCode:n,responseHeaders:s,responseBody:u,cause:h,isRetryable:b=n!=null&&(n===408||n===409||n===429||n>=500),data:N}){super({name:WS,message:e,cause:h}),this[ZS]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=s,this.responseBody=u,this.isRetryable=b,this.data=N}static isInstance(e){return Mt.hasMarker(e,JS)}};ZS=RN;var XS="AI_EmptyResponseBodyError",QS=`vercel.ai.error.${XS}`,kN=Symbol.for(QS),eb,Wy=class extends Mt{constructor({message:e="Empty response body"}={}){super({name:XS,message:e}),this[eb]=!0}static isInstance(e){return Mt.hasMarker(e,QS)}};eb=kN;function Qm(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var tb="AI_InvalidArgumentError",rb=`vercel.ai.error.${tb}`,ON=Symbol.for(rb),nb,ab=class extends Mt{constructor({message:e,cause:t,argument:r}){super({name:tb,message:e,cause:t}),this[nb]=!0,this.argument=r}static isInstance(e){return Mt.hasMarker(e,rb)}};nb=ON;var ib="AI_InvalidPromptError",ob=`vercel.ai.error.${ib}`,MN=Symbol.for(ob),sb,Dv=class extends Mt{constructor({prompt:e,message:t,cause:r}){super({name:ib,message:`Invalid prompt: ${t}`,cause:r}),this[sb]=!0,this.prompt=e}static isInstance(e){return Mt.hasMarker(e,ob)}};sb=MN;var ub="AI_InvalidResponseDataError",cb=`vercel.ai.error.${ub}`,LN=Symbol.for(cb),lb,U_=class extends Mt{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:ub,message:t}),this[lb]=!0,this.data=e}static isInstance(e){return Mt.hasMarker(e,cb)}};lb=LN;var fb="AI_JSONParseError",db=`vercel.ai.error.${fb}`,FN=Symbol.for(db),pb,s_=class extends Mt{constructor({text:e,cause:t}){super({name:fb,message:`JSON parsing failed: Text: ${e}.
Error message: ${Qm(t)}`,cause:t}),this[pb]=!0,this.text=e}static isInstance(e){return Mt.hasMarker(e,db)}};pb=FN;var vb="AI_LoadAPIKeyError",mb=`vercel.ai.error.${vb}`,UN=Symbol.for(mb),hb,u_=class extends Mt{constructor({message:e}){super({name:vb,message:e}),this[hb]=!0}static isInstance(e){return Mt.hasMarker(e,mb)}};hb=UN;var jN="AI_LoadSettingError",YN=`vercel.ai.error.${jN}`,$N=Symbol.for(YN),qN;qN=$N;var BN="AI_NoContentGeneratedError",zN=`vercel.ai.error.${BN}`,GN=Symbol.for(zN),VN;VN=GN;var _b="AI_NoSuchModelError",gb=`vercel.ai.error.${_b}`,HN=Symbol.for(gb),yb,Jy=class extends Mt{constructor({errorName:e=_b,modelId:t,modelType:r,message:n=`No such ${r}: ${t}`}){super({name:e,message:n}),this[yb]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return Mt.hasMarker(e,gb)}};yb=HN;var Sb="AI_TooManyEmbeddingValuesForCallError",bb=`vercel.ai.error.${Sb}`,KN=Symbol.for(bb),Eb,wb=class extends Mt{constructor(e){super({name:Sb,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[Eb]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return Mt.hasMarker(e,bb)}};Eb=KN;var Tb="AI_TypeValidationError",Ib=`vercel.ai.error.${Tb}`,WN=Symbol.for(Ib),Nb,JN=class Ky extends Mt{constructor({value:t,cause:r}){super({name:Tb,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${Qm(r)}`,cause:r}),this[Nb]=!0,this.value=t}static isInstance(t){return Mt.hasMarker(t,Ib)}static wrap({value:t,cause:r}){return Ky.isInstance(r)&&r.value===t?r:new Ky({value:t,cause:r})}};Nb=WN;var vm=JN,Db="AI_UnsupportedFunctionalityError",Cb=`vercel.ai.error.${Db}`,ZN=Symbol.for(Cb),xb,qn=class extends Mt{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:Db,message:t}),this[xb]=!0,this.functionality=e}static isInstance(e){return Mt.hasMarker(e,Cb)}};xb=ZN;var Pb=(e,t=21)=>(r=t)=>{let n="",s=r|0;for(;s--;)n+=e[Math.random()*e.length|0];return n};var qg=Cy(Mb(),1);var eD=Object.defineProperty,tD=(e,t,r)=>t in e?eD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Fg=(e,t,r)=>tD(e,typeof t!="symbol"?t+"":t,r),Ug=class extends Error{constructor(t,r){super(t),Fg(this,"type"),Fg(this,"field"),Fg(this,"value"),Fg(this,"line"),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function Xy(e){}function Lb(e){let{onEvent:t=Xy,onError:r=Xy,onRetry:n=Xy,onComment:s}=e,u="",h=!0,b,N="",A="";function U(ue){let ne=h?ue.replace(/^\xEF\xBB\xBF/,""):ue,[ye,Ae]=rD(`${u}${ne}`);for(let tt of ye)V(tt);u=Ae,h=!1}function V(ue){if(ue===""){pe();return}if(ue.startsWith(":")){s&&s(ue.slice(ue.startsWith(": ")?2:1));return}let ne=ue.indexOf(":");if(ne!==-1){let ye=ue.slice(0,ne),Ae=ue[ne+1]===" "?2:1,tt=ue.slice(ne+Ae);Q(ye,tt,ue);return}Q(ue,"",ue)}function Q(ue,ne,ye){switch(ue){case"event":A=ne;break;case"data":N=`${N}${ne}
`;break;case"id":b=ne.includes("\0")?void 0:ne;break;case"retry":/^\d+$/.test(ne)?n(parseInt(ne,10)):r(new Ug(`Invalid \`retry\` value: "${ne}"`,{type:"invalid-retry",value:ne,line:ye}));break;default:r(new Ug(`Unknown field "${ue.length>20?`${ue.slice(0,20)}\u2026`:ue}"`,{type:"unknown-field",field:ue,value:ne,line:ye}));break}}function pe(){N.length>0&&t({id:b,event:A||void 0,data:N.endsWith(`
`)?N.slice(0,-1):N}),b=void 0,N="",A=""}function de(ue={}){u&&ue.consume&&V(u),b=void 0,N="",A="",u=""}return{feed:U,reset:de}}function rD(e){let t=[],r="",n=e.length;for(let s=0;s<n;s++){let u=e[s];u==="\r"&&e[s+1]===`
`?(t.push(r),r="",s++):u==="\r"||u===`
`?(t.push(r),r=""):r+=u}return[t,r]}var jg=class extends TransformStream{constructor({onError:t,onRetry:r,onComment:n}={}){let s;super({start(u){s=Lb({onEvent:h=>{u.enqueue(h)},onError(h){t==="terminate"?u.error(h):typeof t=="function"&&t(h)},onRetry:r,onComment:n})},transform(u){s.feed(u)}})}};function Md(...e){return e.reduce((t,r)=>({...t,...r??{}}),{})}function Fb(e){return new ReadableStream({async pull(t){try{let{value:r,done:n}=await e.next();n?t.close():t.enqueue(r)}catch(r){t.error(r)}},cancel(){}})}async function Ub(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function Yg(e){let t={};return e.headers.forEach((r,n)=>{t[n]=r}),t}var Pp=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let s=Pb(r,t);if(e==null)return s;if(r.includes(n))throw new ab({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return u=>`${e}${n}${s(u)}`},mm=Pp();function jb(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function nD(e){return Object.fromEntries(Object.entries(e).filter(([t,r])=>r!=null))}function j_(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function $g({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:n}){if(typeof e=="string")return e;if(e!=null)throw new u_({message:`${n} API key must be a string.`});if(typeof process>"u")throw new u_({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(e=process.env[t],e==null)throw new u_({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new u_({message:`${n} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var Y_=Symbol.for("vercel.ai.validator");function aD(e){return{[Y_]:!0,validate:e}}function iD(e){return typeof e=="object"&&e!==null&&Y_ in e&&e[Y_]===!0&&"validate"in e}function oD(e){return iD(e)?e:sD(e)}function sD(e){return aD(t=>{let r=e.safeParse(t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}})}function uD({value:e,schema:t}){let r=eh({value:e,schema:t});if(!r.success)throw vm.wrap({value:e,cause:r.error});return r.value}function eh({value:e,schema:t}){let r=oD(t);try{if(r.validate==null)return{success:!0,value:e};let n=r.validate(e);return n.success?n:{success:!1,error:vm.wrap({value:e,cause:n.error})}}catch(n){return{success:!1,error:vm.wrap({value:e,cause:n})}}}function cD({text:e,schema:t}){try{let r=qg.default.parse(e);return t==null?r:uD({value:r,schema:t})}catch(r){throw s_.isInstance(r)||vm.isInstance(r)?r:new s_({text:e,cause:r})}}function Cv({text:e,schema:t}){try{let r=qg.default.parse(e);if(t==null)return{success:!0,value:r,rawValue:r};let n=eh({value:r,schema:t});return n.success?{...n,rawValue:r}:n}catch(r){return{success:!1,error:s_.isInstance(r)?r:new s_({text:e,cause:r})}}}function Qy(e){try{return qg.default.parse(e),!0}catch{return!1}}var lD=()=>globalThis.fetch,Ff=async({url:e,headers:t,body:r,failedResponseHandler:n,successfulResponseHandler:s,abortSignal:u,fetch:h})=>fD({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:s,abortSignal:u,fetch:h}),fD=async({url:e,headers:t={},body:r,successfulResponseHandler:n,failedResponseHandler:s,abortSignal:u,fetch:h=lD()})=>{try{let b=await h(e,{method:"POST",headers:nD(t),body:r.content,signal:u}),N=Yg(b);if(!b.ok){let A;try{A=await s({response:b,url:e,requestBodyValues:r.values})}catch(U){throw j_(U)||gl.isInstance(U)?U:new gl({message:"Failed to process error response",cause:U,statusCode:b.status,url:e,responseHeaders:N,requestBodyValues:r.values})}throw A.value}try{return await n({response:b,url:e,requestBodyValues:r.values})}catch(A){throw A instanceof Error&&(j_(A)||gl.isInstance(A))?A:new gl({message:"Failed to process successful response",cause:A,statusCode:b.status,url:e,responseHeaders:N,requestBodyValues:r.values})}}catch(b){if(j_(b))throw b;if(b instanceof TypeError&&b.message==="fetch failed"){let N=b.cause;if(N!=null)throw new gl({message:`Cannot connect to API: ${N.message}`,cause:N,url:e,requestBodyValues:r.values,isRetryable:!0})}throw b}};async function Yb(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var Bg=({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:n,url:s,requestBodyValues:u})=>{let h=await n.text(),b=Yg(n);if(h.trim()==="")return{responseHeaders:b,value:new gl({message:n.statusText,url:s,requestBodyValues:u,statusCode:n.status,responseHeaders:b,responseBody:h,isRetryable:r==null?void 0:r(n)})};try{let N=cD({text:h,schema:e});return{responseHeaders:b,value:new gl({message:t(N),url:s,requestBodyValues:u,statusCode:n.status,responseHeaders:b,responseBody:h,data:N,isRetryable:r==null?void 0:r(n,N)})}}catch{return{responseHeaders:b,value:new gl({message:n.statusText,url:s,requestBodyValues:u,statusCode:n.status,responseHeaders:b,responseBody:h,isRetryable:r==null?void 0:r(n)})}}},l_=e=>async({response:t})=>{let r=Yg(t);if(t.body==null)throw new Wy({});return{responseHeaders:r,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new jg).pipeThrough(new TransformStream({transform({data:n},s){n!=="[DONE]"&&s.enqueue(Cv({text:n,schema:e}))}}))}};var xv=e=>async({response:t,url:r,requestBodyValues:n})=>{let s=await t.text(),u=Cv({text:s,schema:e}),h=Yg(t);if(!u.success)throw new gl({message:"Invalid JSON response",cause:u.error,statusCode:t.status,responseHeaders:h,responseBody:s,url:r,requestBodyValues:n});return{responseHeaders:h,value:u.value,rawValue:u.rawValue}};var{btoa:dD,atob:pD}=globalThis;function $b(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=pD(t);return Uint8Array.from(r,n=>n.codePointAt(0))}function wh(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return dD(t)}function zg(e){return e==null?void 0:e.replace(/\/$/,"")}var fn;(function(e){e.assertEqual=s=>s;function t(s){}e.assertIs=t;function r(s){throw new Error}e.assertNever=r,e.arrayToEnum=s=>{let u={};for(let h of s)u[h]=h;return u},e.getValidEnumValues=s=>{let u=e.objectKeys(s).filter(b=>typeof s[s[b]]!="number"),h={};for(let b of u)h[b]=s[b];return e.objectValues(h)},e.objectValues=s=>e.objectKeys(s).map(function(u){return s[u]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let u=[];for(let h in s)Object.prototype.hasOwnProperty.call(s,h)&&u.push(h);return u},e.find=(s,u)=>{for(let h of s)if(u(h))return h},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,u=" | "){return s.map(h=>typeof h=="string"?`'${h}'`:h).join(u)}e.joinValues=n,e.jsonStringifyReplacer=(s,u)=>typeof u=="bigint"?u.toString():u})(fn||(fn={}));var t0;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(t0||(t0={}));var yt=fn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),_m=e=>{switch(typeof e){case"undefined":return yt.undefined;case"string":return yt.string;case"number":return isNaN(e)?yt.nan:yt.number;case"boolean":return yt.boolean;case"function":return yt.function;case"bigint":return yt.bigint;case"symbol":return yt.symbol;case"object":return Array.isArray(e)?yt.array:e===null?yt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?yt.promise:typeof Map<"u"&&e instanceof Map?yt.map:typeof Set<"u"&&e instanceof Set?yt.set:typeof Date<"u"&&e instanceof Date?yt.date:yt.object;default:return yt.unknown}},Ye=fn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),vD=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),bc=class e extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){let r=t||function(u){return u.message},n={_errors:[]},s=u=>{for(let h of u.issues)if(h.code==="invalid_union")h.unionErrors.map(s);else if(h.code==="invalid_return_type")s(h.returnTypeError);else if(h.code==="invalid_arguments")s(h.argumentsError);else if(h.path.length===0)n._errors.push(r(h));else{let b=n,N=0;for(;N<h.path.length;){let A=h.path[N];N===h.path.length-1?(b[A]=b[A]||{_errors:[]},b[A]._errors.push(r(h))):b[A]=b[A]||{_errors:[]},b=b[A],N++}}};return s(this),n}static assert(t){if(!(t instanceof e))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,fn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){let r={},n=[];for(let s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};bc.create=e=>new bc(e);var p_=(e,t)=>{let r;switch(e.code){case Ye.invalid_type:e.received===yt.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case Ye.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,fn.jsonStringifyReplacer)}`;break;case Ye.unrecognized_keys:r=`Unrecognized key(s) in object: ${fn.joinValues(e.keys,", ")}`;break;case Ye.invalid_union:r="Invalid input";break;case Ye.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${fn.joinValues(e.options)}`;break;case Ye.invalid_enum_value:r=`Invalid enum value. Expected ${fn.joinValues(e.options)}, received '${e.received}'`;break;case Ye.invalid_arguments:r="Invalid function arguments";break;case Ye.invalid_return_type:r="Invalid function return type";break;case Ye.invalid_date:r="Invalid date";break;case Ye.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:fn.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case Ye.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case Ye.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case Ye.custom:r="Invalid input";break;case Ye.invalid_intersection_types:r="Intersection results could not be merged";break;case Ye.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case Ye.not_finite:r="Number must be finite";break;default:r=t.defaultError,fn.assertNever(e)}return{message:r}},zb=p_;function mD(e){zb=e}function Gg(){return zb}var Vg=e=>{let{data:t,path:r,errorMaps:n,issueData:s}=e,u=[...r,...s.path||[]],h={...s,path:u};if(s.message!==void 0)return{...s,path:u,message:s.message};let b="",N=n.filter(A=>!!A).slice().reverse();for(let A of N)b=A(h,{data:t,defaultError:b}).message;return{...s,path:u,message:b}},hD=[];function ot(e,t){let r=Gg(),n=Vg({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===p_?void 0:p_].filter(s=>!!s)});e.common.issues.push(n)}var Lu=class e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){let n=[];for(let s of r){if(s.status==="aborted")return mr;s.status==="dirty"&&t.dirty(),n.push(s.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){let n=[];for(let s of r){let u=await s.key,h=await s.value;n.push({key:u,value:h})}return e.mergeObjectSync(t,n)}static mergeObjectSync(t,r){let n={};for(let s of r){let{key:u,value:h}=s;if(u.status==="aborted"||h.status==="aborted")return mr;u.status==="dirty"&&t.dirty(),h.status==="dirty"&&t.dirty(),u.value!=="__proto__"&&(typeof h.value<"u"||s.alwaysSet)&&(n[u.value]=h.value)}return{status:t.value,value:n}}},mr=Object.freeze({status:"aborted"}),d_=e=>({status:"dirty",value:e}),Ec=e=>({status:"valid",value:e}),r0=e=>e.status==="aborted",n0=e=>e.status==="dirty",Th=e=>e.status==="valid",B_=e=>typeof Promise<"u"&&e instanceof Promise;function Hg(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function Gb(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}var Rt;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Rt||(Rt={}));var $_,q_,Ld=class{constructor(t,r,n,s){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},qb=(e,t)=>{if(Th(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new bc(e.common.issues);return this._error=r,this._error}}};function Rr(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:s}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(h,b)=>{var N,A;let{message:U}=e;return h.code==="invalid_enum_value"?{message:U??b.defaultError}:typeof b.data>"u"?{message:(N=U??n)!==null&&N!==void 0?N:b.defaultError}:h.code!=="invalid_type"?{message:b.defaultError}:{message:(A=U??r)!==null&&A!==void 0?A:b.defaultError}},description:s}}var kr=class{get description(){return this._def.description}_getType(t){return _m(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:_m(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Lu,ctx:{common:t.parent.common,data:t.data,parsedType:_m(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let r=this._parse(t);if(B_(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){let r=this._parse(t);return Promise.resolve(r)}parse(t,r){let n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){var n;let s={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:_m(t)},u=this._parseSync({data:t,path:s.path,parent:s});return qb(s,u)}"~validate"(t){var r,n;let s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:_m(t)};if(!this["~standard"].async)try{let u=this._parseSync({data:t,path:[],parent:s});return Th(u)?{value:u.value}:{issues:s.common.issues}}catch(u){!((n=(r=u==null?void 0:u.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:s}).then(u=>Th(u)?{value:u.value}:{issues:s.common.issues})}async parseAsync(t,r){let n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){let n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:_m(t)},s=this._parse({data:t,path:n.path,parent:n}),u=await(B_(s)?s:Promise.resolve(s));return qb(n,u)}refine(t,r){let n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,u)=>{let h=t(s),b=()=>u.addIssue({code:Ye.custom,...n(s)});return typeof Promise<"u"&&h instanceof Promise?h.then(N=>N?!0:(b(),!1)):h?!0:(b(),!1)})}refinement(t,r){return this._refinement((n,s)=>t(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(t){return new Uf({schema:this,typeName:ze.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return yl.create(this,this._def)}nullable(){return Av.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ym.create(this)}promise(){return nh.create(this,this._def)}or(t){return Ah.create([this,t],this._def)}and(t){return Rh.create(this,t,this._def)}transform(t){return new Uf({...Rr(this._def),schema:this,typeName:ze.ZodEffects,effect:{type:"transform",transform:t}})}default(t){let r=typeof t=="function"?t:()=>t;return new Fh({...Rr(this._def),innerType:this,defaultValue:r,typeName:ze.ZodDefault})}brand(){return new z_({typeName:ze.ZodBranded,type:this,...Rr(this._def)})}catch(t){let r=typeof t=="function"?t:()=>t;return new Uh({...Rr(this._def),innerType:this,catchValue:r,typeName:ze.ZodCatch})}describe(t){let r=this.constructor;return new r({...this._def,description:t})}pipe(t){return G_.create(this,t)}readonly(){return jh.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},_D=/^c[^\s-]{8,}$/i,gD=/^[0-9a-z]+$/,yD=/^[0-9A-HJKMNP-TV-Z]{26}$/i,SD=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,bD=/^[a-z0-9_-]{21}$/i,ED=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,wD=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,TD=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ID="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",e0,ND=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,DD=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,CD=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,xD=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,PD=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,AD=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Vb="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",RD=new RegExp(`^${Vb}$`);function Hb(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function kD(e){return new RegExp(`^${Hb(e)}$`)}function Kb(e){let t=`${Vb}T${Hb(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function OD(e,t){return!!((t==="v4"||!t)&&ND.test(e)||(t==="v6"||!t)&&CD.test(e))}function MD(e,t){if(!ED.test(e))return!1;try{let[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||!s.typ||!s.alg||t&&s.alg!==t)}catch{return!1}}function LD(e,t){return!!((t==="v4"||!t)&&DD.test(e)||(t==="v6"||!t)&&xD.test(e))}var th=class e extends kr{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==yt.string){let u=this._getOrReturnCtx(t);return ot(u,{code:Ye.invalid_type,expected:yt.string,received:u.parsedType}),mr}let n=new Lu,s;for(let u of this._def.checks)if(u.kind==="min")t.data.length<u.value&&(s=this._getOrReturnCtx(t,s),ot(s,{code:Ye.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),n.dirty());else if(u.kind==="max")t.data.length>u.value&&(s=this._getOrReturnCtx(t,s),ot(s,{code:Ye.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),n.dirty());else if(u.kind==="length"){let h=t.data.length>u.value,b=t.data.length<u.value;(h||b)&&(s=this._getOrReturnCtx(t,s),h?ot(s,{code:Ye.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}):b&&ot(s,{code:Ye.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}),n.dirty())}else if(u.kind==="email")TD.test(t.data)||(s=this._getOrReturnCtx(t,s),ot(s,{validation:"email",code:Ye.invalid_string,message:u.message}),n.dirty());else if(u.kind==="emoji")e0||(e0=new RegExp(ID,"u")),e0.test(t.data)||(s=this._getOrReturnCtx(t,s),ot(s,{validation:"emoji",code:Ye.invalid_string,message:u.message}),n.dirty());else if(u.kind==="uuid")SD.test(t.data)||(s=this._getOrReturnCtx(t,s),ot(s,{validation:"uuid",code:Ye.invalid_string,message:u.message}),n.dirty());else if(u.kind==="nanoid")bD.test(t.data)||(s=this._getOrReturnCtx(t,s),ot(s,{validation:"nanoid",code:Ye.invalid_string,message:u.message}),n.dirty());else if(u.kind==="cuid")_D.test(t.data)||(s=this._getOrReturnCtx(t,s),ot(s,{validation:"cuid",code:Ye.invalid_string,message:u.message}),n.dirty());else if(u.kind==="cuid2")gD.test(t.data)||(s=this._getOrReturnCtx(t,s),ot(s,{validation:"cuid2",code:Ye.invalid_string,message:u.message}),n.dirty());else if(u.kind==="ulid")yD.test(t.data)||(s=this._getOrReturnCtx(t,s),ot(s,{validation:"ulid",code:Ye.invalid_string,message:u.message}),n.dirty());else if(u.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),ot(s,{validation:"url",code:Ye.invalid_string,message:u.message}),n.dirty()}else u.kind==="regex"?(u.regex.lastIndex=0,u.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),ot(s,{validation:"regex",code:Ye.invalid_string,message:u.message}),n.dirty())):u.kind==="trim"?t.data=t.data.trim():u.kind==="includes"?t.data.includes(u.value,u.position)||(s=this._getOrReturnCtx(t,s),ot(s,{code:Ye.invalid_string,validation:{includes:u.value,position:u.position},message:u.message}),n.dirty()):u.kind==="toLowerCase"?t.data=t.data.toLowerCase():u.kind==="toUpperCase"?t.data=t.data.toUpperCase():u.kind==="startsWith"?t.data.startsWith(u.value)||(s=this._getOrReturnCtx(t,s),ot(s,{code:Ye.invalid_string,validation:{startsWith:u.value},message:u.message}),n.dirty()):u.kind==="endsWith"?t.data.endsWith(u.value)||(s=this._getOrReturnCtx(t,s),ot(s,{code:Ye.invalid_string,validation:{endsWith:u.value},message:u.message}),n.dirty()):u.kind==="datetime"?Kb(u).test(t.data)||(s=this._getOrReturnCtx(t,s),ot(s,{code:Ye.invalid_string,validation:"datetime",message:u.message}),n.dirty()):u.kind==="date"?RD.test(t.data)||(s=this._getOrReturnCtx(t,s),ot(s,{code:Ye.invalid_string,validation:"date",message:u.message}),n.dirty()):u.kind==="time"?kD(u).test(t.data)||(s=this._getOrReturnCtx(t,s),ot(s,{code:Ye.invalid_string,validation:"time",message:u.message}),n.dirty()):u.kind==="duration"?wD.test(t.data)||(s=this._getOrReturnCtx(t,s),ot(s,{validation:"duration",code:Ye.invalid_string,message:u.message}),n.dirty()):u.kind==="ip"?OD(t.data,u.version)||(s=this._getOrReturnCtx(t,s),ot(s,{validation:"ip",code:Ye.invalid_string,message:u.message}),n.dirty()):u.kind==="jwt"?MD(t.data,u.alg)||(s=this._getOrReturnCtx(t,s),ot(s,{validation:"jwt",code:Ye.invalid_string,message:u.message}),n.dirty()):u.kind==="cidr"?LD(t.data,u.version)||(s=this._getOrReturnCtx(t,s),ot(s,{validation:"cidr",code:Ye.invalid_string,message:u.message}),n.dirty()):u.kind==="base64"?PD.test(t.data)||(s=this._getOrReturnCtx(t,s),ot(s,{validation:"base64",code:Ye.invalid_string,message:u.message}),n.dirty()):u.kind==="base64url"?AD.test(t.data)||(s=this._getOrReturnCtx(t,s),ot(s,{validation:"base64url",code:Ye.invalid_string,message:u.message}),n.dirty()):fn.assertNever(u);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(s=>t.test(s),{validation:r,code:Ye.invalid_string,...Rt.errToObj(n)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Rt.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Rt.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Rt.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Rt.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Rt.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Rt.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Rt.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Rt.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Rt.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Rt.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Rt.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Rt.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Rt.errToObj(t)})}datetime(t){var r,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(r=t==null?void 0:t.offset)!==null&&r!==void 0?r:!1,local:(n=t==null?void 0:t.local)!==null&&n!==void 0?n:!1,...Rt.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Rt.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Rt.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Rt.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...Rt.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Rt.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Rt.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Rt.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Rt.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Rt.errToObj(r)})}nonempty(t){return this.min(1,Rt.errToObj(t))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};th.create=e=>{var t;return new th({checks:[],typeName:ze.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Rr(e)})};function FD(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,s=r>n?r:n,u=parseInt(e.toFixed(s).replace(".","")),h=parseInt(t.toFixed(s).replace(".",""));return u%h/Math.pow(10,s)}var Ih=class e extends kr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==yt.number){let u=this._getOrReturnCtx(t);return ot(u,{code:Ye.invalid_type,expected:yt.number,received:u.parsedType}),mr}let n,s=new Lu;for(let u of this._def.checks)u.kind==="int"?fn.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),ot(n,{code:Ye.invalid_type,expected:"integer",received:"float",message:u.message}),s.dirty()):u.kind==="min"?(u.inclusive?t.data<u.value:t.data<=u.value)&&(n=this._getOrReturnCtx(t,n),ot(n,{code:Ye.too_small,minimum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),s.dirty()):u.kind==="max"?(u.inclusive?t.data>u.value:t.data>=u.value)&&(n=this._getOrReturnCtx(t,n),ot(n,{code:Ye.too_big,maximum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),s.dirty()):u.kind==="multipleOf"?FD(t.data,u.value)!==0&&(n=this._getOrReturnCtx(t,n),ot(n,{code:Ye.not_multiple_of,multipleOf:u.value,message:u.message}),s.dirty()):u.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),ot(n,{code:Ye.not_finite,message:u.message}),s.dirty()):fn.assertNever(u);return{status:s.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Rt.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Rt.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Rt.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Rt.toString(r))}setLimit(t,r,n,s){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Rt.toString(s)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Rt.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Rt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Rt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Rt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Rt.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Rt.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Rt.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Rt.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Rt.toString(t)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&fn.isInteger(t.value))}get isFinite(){let t=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}};Ih.create=e=>new Ih({checks:[],typeName:ze.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Rr(e)});var Nh=class e extends kr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==yt.bigint)return this._getInvalidInput(t);let n,s=new Lu;for(let u of this._def.checks)u.kind==="min"?(u.inclusive?t.data<u.value:t.data<=u.value)&&(n=this._getOrReturnCtx(t,n),ot(n,{code:Ye.too_small,type:"bigint",minimum:u.value,inclusive:u.inclusive,message:u.message}),s.dirty()):u.kind==="max"?(u.inclusive?t.data>u.value:t.data>=u.value)&&(n=this._getOrReturnCtx(t,n),ot(n,{code:Ye.too_big,type:"bigint",maximum:u.value,inclusive:u.inclusive,message:u.message}),s.dirty()):u.kind==="multipleOf"?t.data%u.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),ot(n,{code:Ye.not_multiple_of,multipleOf:u.value,message:u.message}),s.dirty()):fn.assertNever(u);return{status:s.value,value:t.data}}_getInvalidInput(t){let r=this._getOrReturnCtx(t);return ot(r,{code:Ye.invalid_type,expected:yt.bigint,received:r.parsedType}),mr}gte(t,r){return this.setLimit("min",t,!0,Rt.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Rt.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Rt.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Rt.toString(r))}setLimit(t,r,n,s){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Rt.toString(s)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Rt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Rt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Rt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Rt.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Rt.toString(r)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};Nh.create=e=>{var t;return new Nh({checks:[],typeName:ze.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Rr(e)})};var Dh=class extends kr{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==yt.boolean){let n=this._getOrReturnCtx(t);return ot(n,{code:Ye.invalid_type,expected:yt.boolean,received:n.parsedType}),mr}return Ec(t.data)}};Dh.create=e=>new Dh({typeName:ze.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Rr(e)});var Ch=class e extends kr{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==yt.date){let u=this._getOrReturnCtx(t);return ot(u,{code:Ye.invalid_type,expected:yt.date,received:u.parsedType}),mr}if(isNaN(t.data.getTime())){let u=this._getOrReturnCtx(t);return ot(u,{code:Ye.invalid_date}),mr}let n=new Lu,s;for(let u of this._def.checks)u.kind==="min"?t.data.getTime()<u.value&&(s=this._getOrReturnCtx(t,s),ot(s,{code:Ye.too_small,message:u.message,inclusive:!0,exact:!1,minimum:u.value,type:"date"}),n.dirty()):u.kind==="max"?t.data.getTime()>u.value&&(s=this._getOrReturnCtx(t,s),ot(s,{code:Ye.too_big,message:u.message,inclusive:!0,exact:!1,maximum:u.value,type:"date"}),n.dirty()):fn.assertNever(u);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Rt.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Rt.toString(r)})}get minDate(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}};Ch.create=e=>new Ch({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:ze.ZodDate,...Rr(e)});var v_=class extends kr{_parse(t){if(this._getType(t)!==yt.symbol){let n=this._getOrReturnCtx(t);return ot(n,{code:Ye.invalid_type,expected:yt.symbol,received:n.parsedType}),mr}return Ec(t.data)}};v_.create=e=>new v_({typeName:ze.ZodSymbol,...Rr(e)});var xh=class extends kr{_parse(t){if(this._getType(t)!==yt.undefined){let n=this._getOrReturnCtx(t);return ot(n,{code:Ye.invalid_type,expected:yt.undefined,received:n.parsedType}),mr}return Ec(t.data)}};xh.create=e=>new xh({typeName:ze.ZodUndefined,...Rr(e)});var Ph=class extends kr{_parse(t){if(this._getType(t)!==yt.null){let n=this._getOrReturnCtx(t);return ot(n,{code:Ye.invalid_type,expected:yt.null,received:n.parsedType}),mr}return Ec(t.data)}};Ph.create=e=>new Ph({typeName:ze.ZodNull,...Rr(e)});var rh=class extends kr{constructor(){super(...arguments),this._any=!0}_parse(t){return Ec(t.data)}};rh.create=e=>new rh({typeName:ze.ZodAny,...Rr(e)});var gm=class extends kr{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Ec(t.data)}};gm.create=e=>new gm({typeName:ze.ZodUnknown,...Rr(e)});var Ap=class extends kr{_parse(t){let r=this._getOrReturnCtx(t);return ot(r,{code:Ye.invalid_type,expected:yt.never,received:r.parsedType}),mr}};Ap.create=e=>new Ap({typeName:ze.ZodNever,...Rr(e)});var m_=class extends kr{_parse(t){if(this._getType(t)!==yt.undefined){let n=this._getOrReturnCtx(t);return ot(n,{code:Ye.invalid_type,expected:yt.void,received:n.parsedType}),mr}return Ec(t.data)}};m_.create=e=>new m_({typeName:ze.ZodVoid,...Rr(e)});var ym=class e extends kr{_parse(t){let{ctx:r,status:n}=this._processInputParams(t),s=this._def;if(r.parsedType!==yt.array)return ot(r,{code:Ye.invalid_type,expected:yt.array,received:r.parsedType}),mr;if(s.exactLength!==null){let h=r.data.length>s.exactLength.value,b=r.data.length<s.exactLength.value;(h||b)&&(ot(r,{code:h?Ye.too_big:Ye.too_small,minimum:b?s.exactLength.value:void 0,maximum:h?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(ot(r,{code:Ye.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(ot(r,{code:Ye.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((h,b)=>s.type._parseAsync(new Ld(r,h,r.path,b)))).then(h=>Lu.mergeArray(n,h));let u=[...r.data].map((h,b)=>s.type._parseSync(new Ld(r,h,r.path,b)));return Lu.mergeArray(n,u)}get element(){return this._def.type}min(t,r){return new e({...this._def,minLength:{value:t,message:Rt.toString(r)}})}max(t,r){return new e({...this._def,maxLength:{value:t,message:Rt.toString(r)}})}length(t,r){return new e({...this._def,exactLength:{value:t,message:Rt.toString(r)}})}nonempty(t){return this.min(1,t)}};ym.create=(e,t)=>new ym({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ze.ZodArray,...Rr(t)});function f_(e){if(e instanceof Sl){let t={};for(let r in e.shape){let n=e.shape[r];t[r]=yl.create(f_(n))}return new Sl({...e._def,shape:()=>t})}else return e instanceof ym?new ym({...e._def,type:f_(e.element)}):e instanceof yl?yl.create(f_(e.unwrap())):e instanceof Av?Av.create(f_(e.unwrap())):e instanceof Pv?Pv.create(e.items.map(t=>f_(t))):e}var Sl=class e extends kr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let t=this._def.shape(),r=fn.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==yt.object){let A=this._getOrReturnCtx(t);return ot(A,{code:Ye.invalid_type,expected:yt.object,received:A.parsedType}),mr}let{status:n,ctx:s}=this._processInputParams(t),{shape:u,keys:h}=this._getCached(),b=[];if(!(this._def.catchall instanceof Ap&&this._def.unknownKeys==="strip"))for(let A in s.data)h.includes(A)||b.push(A);let N=[];for(let A of h){let U=u[A],V=s.data[A];N.push({key:{status:"valid",value:A},value:U._parse(new Ld(s,V,s.path,A)),alwaysSet:A in s.data})}if(this._def.catchall instanceof Ap){let A=this._def.unknownKeys;if(A==="passthrough")for(let U of b)N.push({key:{status:"valid",value:U},value:{status:"valid",value:s.data[U]}});else if(A==="strict")b.length>0&&(ot(s,{code:Ye.unrecognized_keys,keys:b}),n.dirty());else if(A!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let A=this._def.catchall;for(let U of b){let V=s.data[U];N.push({key:{status:"valid",value:U},value:A._parse(new Ld(s,V,s.path,U)),alwaysSet:U in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let A=[];for(let U of N){let V=await U.key,Q=await U.value;A.push({key:V,value:Q,alwaysSet:U.alwaysSet})}return A}).then(A=>Lu.mergeObjectSync(n,A)):Lu.mergeObjectSync(n,N)}get shape(){return this._def.shape()}strict(t){return Rt.errToObj,new e({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var s,u,h,b;let N=(h=(u=(s=this._def).errorMap)===null||u===void 0?void 0:u.call(s,r,n).message)!==null&&h!==void 0?h:n.defaultError;return r.code==="unrecognized_keys"?{message:(b=Rt.errToObj(t).message)!==null&&b!==void 0?b:N}:{message:N}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ze.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new e({...this._def,catchall:t})}pick(t){let r={};return fn.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new e({...this._def,shape:()=>r})}omit(t){let r={};return fn.objectKeys(this.shape).forEach(n=>{t[n]||(r[n]=this.shape[n])}),new e({...this._def,shape:()=>r})}deepPartial(){return f_(this)}partial(t){let r={};return fn.objectKeys(this.shape).forEach(n=>{let s=this.shape[n];t&&!t[n]?r[n]=s:r[n]=s.optional()}),new e({...this._def,shape:()=>r})}required(t){let r={};return fn.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])r[n]=this.shape[n];else{let u=this.shape[n];for(;u instanceof yl;)u=u._def.innerType;r[n]=u}}),new e({...this._def,shape:()=>r})}keyof(){return Wb(fn.objectKeys(this.shape))}};Sl.create=(e,t)=>new Sl({shape:()=>e,unknownKeys:"strip",catchall:Ap.create(),typeName:ze.ZodObject,...Rr(t)});Sl.strictCreate=(e,t)=>new Sl({shape:()=>e,unknownKeys:"strict",catchall:Ap.create(),typeName:ze.ZodObject,...Rr(t)});Sl.lazycreate=(e,t)=>new Sl({shape:e,unknownKeys:"strip",catchall:Ap.create(),typeName:ze.ZodObject,...Rr(t)});var Ah=class extends kr{_parse(t){let{ctx:r}=this._processInputParams(t),n=this._def.options;function s(u){for(let b of u)if(b.result.status==="valid")return b.result;for(let b of u)if(b.result.status==="dirty")return r.common.issues.push(...b.ctx.common.issues),b.result;let h=u.map(b=>new bc(b.ctx.common.issues));return ot(r,{code:Ye.invalid_union,unionErrors:h}),mr}if(r.common.async)return Promise.all(n.map(async u=>{let h={...r,common:{...r.common,issues:[]},parent:null};return{result:await u._parseAsync({data:r.data,path:r.path,parent:h}),ctx:h}})).then(s);{let u,h=[];for(let N of n){let A={...r,common:{...r.common,issues:[]},parent:null},U=N._parseSync({data:r.data,path:r.path,parent:A});if(U.status==="valid")return U;U.status==="dirty"&&!u&&(u={result:U,ctx:A}),A.common.issues.length&&h.push(A.common.issues)}if(u)return r.common.issues.push(...u.ctx.common.issues),u.result;let b=h.map(N=>new bc(N));return ot(r,{code:Ye.invalid_union,unionErrors:b}),mr}}get options(){return this._def.options}};Ah.create=(e,t)=>new Ah({options:e,typeName:ze.ZodUnion,...Rr(t)});var hm=e=>e instanceof kh?hm(e.schema):e instanceof Uf?hm(e.innerType()):e instanceof Oh?[e.value]:e instanceof Mh?e.options:e instanceof Lh?fn.objectValues(e.enum):e instanceof Fh?hm(e._def.innerType):e instanceof xh?[void 0]:e instanceof Ph?[null]:e instanceof yl?[void 0,...hm(e.unwrap())]:e instanceof Av?[null,...hm(e.unwrap())]:e instanceof z_||e instanceof jh?hm(e.unwrap()):e instanceof Uh?hm(e._def.innerType):[],Kg=class e extends kr{_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.object)return ot(r,{code:Ye.invalid_type,expected:yt.object,received:r.parsedType}),mr;let n=this.discriminator,s=r.data[n],u=this.optionsMap.get(s);return u?r.common.async?u._parseAsync({data:r.data,path:r.path,parent:r}):u._parseSync({data:r.data,path:r.path,parent:r}):(ot(r,{code:Ye.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),mr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,n){let s=new Map;for(let u of r){let h=hm(u.shape[t]);if(!h.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let b of h){if(s.has(b))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(b)}`);s.set(b,u)}}return new e({typeName:ze.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:s,...Rr(n)})}};function a0(e,t){let r=_m(e),n=_m(t);if(e===t)return{valid:!0,data:e};if(r===yt.object&&n===yt.object){let s=fn.objectKeys(t),u=fn.objectKeys(e).filter(b=>s.indexOf(b)!==-1),h={...e,...t};for(let b of u){let N=a0(e[b],t[b]);if(!N.valid)return{valid:!1};h[b]=N.data}return{valid:!0,data:h}}else if(r===yt.array&&n===yt.array){if(e.length!==t.length)return{valid:!1};let s=[];for(let u=0;u<e.length;u++){let h=e[u],b=t[u],N=a0(h,b);if(!N.valid)return{valid:!1};s.push(N.data)}return{valid:!0,data:s}}else return r===yt.date&&n===yt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var Rh=class extends kr{_parse(t){let{status:r,ctx:n}=this._processInputParams(t),s=(u,h)=>{if(r0(u)||r0(h))return mr;let b=a0(u.value,h.value);return b.valid?((n0(u)||n0(h))&&r.dirty(),{status:r.value,value:b.data}):(ot(n,{code:Ye.invalid_intersection_types}),mr)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([u,h])=>s(u,h)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Rh.create=(e,t,r)=>new Rh({left:e,right:t,typeName:ze.ZodIntersection,...Rr(r)});var Pv=class e extends kr{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.array)return ot(n,{code:Ye.invalid_type,expected:yt.array,received:n.parsedType}),mr;if(n.data.length<this._def.items.length)return ot(n,{code:Ye.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),mr;!this._def.rest&&n.data.length>this._def.items.length&&(ot(n,{code:Ye.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let u=[...n.data].map((h,b)=>{let N=this._def.items[b]||this._def.rest;return N?N._parse(new Ld(n,h,n.path,b)):null}).filter(h=>!!h);return n.common.async?Promise.all(u).then(h=>Lu.mergeArray(r,h)):Lu.mergeArray(r,u)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};Pv.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Pv({items:e,typeName:ze.ZodTuple,rest:null,...Rr(t)})};var Wg=class e extends kr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.object)return ot(n,{code:Ye.invalid_type,expected:yt.object,received:n.parsedType}),mr;let s=[],u=this._def.keyType,h=this._def.valueType;for(let b in n.data)s.push({key:u._parse(new Ld(n,b,n.path,b)),value:h._parse(new Ld(n,n.data[b],n.path,b)),alwaysSet:b in n.data});return n.common.async?Lu.mergeObjectAsync(r,s):Lu.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof kr?new e({keyType:t,valueType:r,typeName:ze.ZodRecord,...Rr(n)}):new e({keyType:th.create(),valueType:t,typeName:ze.ZodRecord,...Rr(r)})}},h_=class extends kr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.map)return ot(n,{code:Ye.invalid_type,expected:yt.map,received:n.parsedType}),mr;let s=this._def.keyType,u=this._def.valueType,h=[...n.data.entries()].map(([b,N],A)=>({key:s._parse(new Ld(n,b,n.path,[A,"key"])),value:u._parse(new Ld(n,N,n.path,[A,"value"]))}));if(n.common.async){let b=new Map;return Promise.resolve().then(async()=>{for(let N of h){let A=await N.key,U=await N.value;if(A.status==="aborted"||U.status==="aborted")return mr;(A.status==="dirty"||U.status==="dirty")&&r.dirty(),b.set(A.value,U.value)}return{status:r.value,value:b}})}else{let b=new Map;for(let N of h){let A=N.key,U=N.value;if(A.status==="aborted"||U.status==="aborted")return mr;(A.status==="dirty"||U.status==="dirty")&&r.dirty(),b.set(A.value,U.value)}return{status:r.value,value:b}}}};h_.create=(e,t,r)=>new h_({valueType:t,keyType:e,typeName:ze.ZodMap,...Rr(r)});var __=class e extends kr{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.set)return ot(n,{code:Ye.invalid_type,expected:yt.set,received:n.parsedType}),mr;let s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(ot(n,{code:Ye.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(ot(n,{code:Ye.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());let u=this._def.valueType;function h(N){let A=new Set;for(let U of N){if(U.status==="aborted")return mr;U.status==="dirty"&&r.dirty(),A.add(U.value)}return{status:r.value,value:A}}let b=[...n.data.values()].map((N,A)=>u._parse(new Ld(n,N,n.path,A)));return n.common.async?Promise.all(b).then(N=>h(N)):h(b)}min(t,r){return new e({...this._def,minSize:{value:t,message:Rt.toString(r)}})}max(t,r){return new e({...this._def,maxSize:{value:t,message:Rt.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}};__.create=(e,t)=>new __({valueType:e,minSize:null,maxSize:null,typeName:ze.ZodSet,...Rr(t)});var Jg=class e extends kr{constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.function)return ot(r,{code:Ye.invalid_type,expected:yt.function,received:r.parsedType}),mr;function n(b,N){return Vg({data:b,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Gg(),p_].filter(A=>!!A),issueData:{code:Ye.invalid_arguments,argumentsError:N}})}function s(b,N){return Vg({data:b,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Gg(),p_].filter(A=>!!A),issueData:{code:Ye.invalid_return_type,returnTypeError:N}})}let u={errorMap:r.common.contextualErrorMap},h=r.data;if(this._def.returns instanceof nh){let b=this;return Ec(async function(...N){let A=new bc([]),U=await b._def.args.parseAsync(N,u).catch(pe=>{throw A.addIssue(n(N,pe)),A}),V=await Reflect.apply(h,this,U);return await b._def.returns._def.type.parseAsync(V,u).catch(pe=>{throw A.addIssue(s(V,pe)),A})})}else{let b=this;return Ec(function(...N){let A=b._def.args.safeParse(N,u);if(!A.success)throw new bc([n(N,A.error)]);let U=Reflect.apply(h,this,A.data),V=b._def.returns.safeParse(U,u);if(!V.success)throw new bc([s(U,V.error)]);return V.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new e({...this._def,args:Pv.create(t).rest(gm.create())})}returns(t){return new e({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,n){return new e({args:t||Pv.create([]).rest(gm.create()),returns:r||gm.create(),typeName:ze.ZodFunction,...Rr(n)})}},kh=class extends kr{get schema(){return this._def.getter()}_parse(t){let{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};kh.create=(e,t)=>new kh({getter:e,typeName:ze.ZodLazy,...Rr(t)});var Oh=class extends kr{_parse(t){if(t.data!==this._def.value){let r=this._getOrReturnCtx(t);return ot(r,{received:r.data,code:Ye.invalid_literal,expected:this._def.value}),mr}return{status:"valid",value:t.data}}get value(){return this._def.value}};Oh.create=(e,t)=>new Oh({value:e,typeName:ze.ZodLiteral,...Rr(t)});function Wb(e,t){return new Mh({values:e,typeName:ze.ZodEnum,...Rr(t)})}var Mh=class e extends kr{constructor(){super(...arguments),$_.set(this,void 0)}_parse(t){if(typeof t.data!="string"){let r=this._getOrReturnCtx(t),n=this._def.values;return ot(r,{expected:fn.joinValues(n),received:r.parsedType,code:Ye.invalid_type}),mr}if(Hg(this,$_,"f")||Gb(this,$_,new Set(this._def.values),"f"),!Hg(this,$_,"f").has(t.data)){let r=this._getOrReturnCtx(t),n=this._def.values;return ot(r,{received:r.data,code:Ye.invalid_enum_value,options:n}),mr}return Ec(t.data)}get options(){return this._def.values}get enum(){let t={};for(let r of this._def.values)t[r]=r;return t}get Values(){let t={};for(let r of this._def.values)t[r]=r;return t}get Enum(){let t={};for(let r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return e.create(t,{...this._def,...r})}exclude(t,r=this._def){return e.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}};$_=new WeakMap;Mh.create=Wb;var Lh=class extends kr{constructor(){super(...arguments),q_.set(this,void 0)}_parse(t){let r=fn.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==yt.string&&n.parsedType!==yt.number){let s=fn.objectValues(r);return ot(n,{expected:fn.joinValues(s),received:n.parsedType,code:Ye.invalid_type}),mr}if(Hg(this,q_,"f")||Gb(this,q_,new Set(fn.getValidEnumValues(this._def.values)),"f"),!Hg(this,q_,"f").has(t.data)){let s=fn.objectValues(r);return ot(n,{received:n.data,code:Ye.invalid_enum_value,options:s}),mr}return Ec(t.data)}get enum(){return this._def.values}};q_=new WeakMap;Lh.create=(e,t)=>new Lh({values:e,typeName:ze.ZodNativeEnum,...Rr(t)});var nh=class extends kr{unwrap(){return this._def.type}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.promise&&r.common.async===!1)return ot(r,{code:Ye.invalid_type,expected:yt.promise,received:r.parsedType}),mr;let n=r.parsedType===yt.promise?r.data:Promise.resolve(r.data);return Ec(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}};nh.create=(e,t)=>new nh({type:e,typeName:ze.ZodPromise,...Rr(t)});var Uf=class extends kr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ze.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:r,ctx:n}=this._processInputParams(t),s=this._def.effect||null,u={addIssue:h=>{ot(n,h),h.fatal?r.abort():r.dirty()},get path(){return n.path}};if(u.addIssue=u.addIssue.bind(u),s.type==="preprocess"){let h=s.transform(n.data,u);if(n.common.async)return Promise.resolve(h).then(async b=>{if(r.value==="aborted")return mr;let N=await this._def.schema._parseAsync({data:b,path:n.path,parent:n});return N.status==="aborted"?mr:N.status==="dirty"||r.value==="dirty"?d_(N.value):N});{if(r.value==="aborted")return mr;let b=this._def.schema._parseSync({data:h,path:n.path,parent:n});return b.status==="aborted"?mr:b.status==="dirty"||r.value==="dirty"?d_(b.value):b}}if(s.type==="refinement"){let h=b=>{let N=s.refinement(b,u);if(n.common.async)return Promise.resolve(N);if(N instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return b};if(n.common.async===!1){let b=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return b.status==="aborted"?mr:(b.status==="dirty"&&r.dirty(),h(b.value),{status:r.value,value:b.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(b=>b.status==="aborted"?mr:(b.status==="dirty"&&r.dirty(),h(b.value).then(()=>({status:r.value,value:b.value}))))}if(s.type==="transform")if(n.common.async===!1){let h=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Th(h))return h;let b=s.transform(h.value,u);if(b instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:b}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(h=>Th(h)?Promise.resolve(s.transform(h.value,u)).then(b=>({status:r.value,value:b})):h);fn.assertNever(s)}};Uf.create=(e,t,r)=>new Uf({schema:e,typeName:ze.ZodEffects,effect:t,...Rr(r)});Uf.createWithPreprocess=(e,t,r)=>new Uf({schema:t,effect:{type:"preprocess",transform:e},typeName:ze.ZodEffects,...Rr(r)});var yl=class extends kr{_parse(t){return this._getType(t)===yt.undefined?Ec(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};yl.create=(e,t)=>new yl({innerType:e,typeName:ze.ZodOptional,...Rr(t)});var Av=class extends kr{_parse(t){return this._getType(t)===yt.null?Ec(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Av.create=(e,t)=>new Av({innerType:e,typeName:ze.ZodNullable,...Rr(t)});var Fh=class extends kr{_parse(t){let{ctx:r}=this._processInputParams(t),n=r.data;return r.parsedType===yt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Fh.create=(e,t)=>new Fh({innerType:e,typeName:ze.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Rr(t)});var Uh=class extends kr{_parse(t){let{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return B_(s)?s.then(u=>({status:"valid",value:u.status==="valid"?u.value:this._def.catchValue({get error(){return new bc(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new bc(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Uh.create=(e,t)=>new Uh({innerType:e,typeName:ze.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Rr(t)});var g_=class extends kr{_parse(t){if(this._getType(t)!==yt.nan){let n=this._getOrReturnCtx(t);return ot(n,{code:Ye.invalid_type,expected:yt.nan,received:n.parsedType}),mr}return{status:"valid",value:t.data}}};g_.create=e=>new g_({typeName:ze.ZodNaN,...Rr(e)});var UD=Symbol("zod_brand"),z_=class extends kr{_parse(t){let{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},G_=class e extends kr{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{let u=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return u.status==="aborted"?mr:u.status==="dirty"?(r.dirty(),d_(u.value)):this._def.out._parseAsync({data:u.value,path:n.path,parent:n})})();{let s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?mr:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(t,r){return new e({in:t,out:r,typeName:ze.ZodPipeline})}},jh=class extends kr{_parse(t){let r=this._def.innerType._parse(t),n=s=>(Th(s)&&(s.value=Object.freeze(s.value)),s);return B_(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}};jh.create=(e,t)=>new jh({innerType:e,typeName:ze.ZodReadonly,...Rr(t)});function Jb(e,t={},r){return e?rh.create().superRefine((n,s)=>{var u,h;if(!e(n)){let b=typeof t=="function"?t(n):typeof t=="string"?{message:t}:t,N=(h=(u=b.fatal)!==null&&u!==void 0?u:r)!==null&&h!==void 0?h:!0,A=typeof b=="string"?{message:b}:b;s.addIssue({code:"custom",...A,fatal:N})}}):rh.create()}var jD={object:Sl.lazycreate},ze;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ze||(ze={}));var YD=(e,t={message:`Input not instance of ${e.name}`})=>Jb(r=>r instanceof e,t),Zb=th.create,Xb=Ih.create,$D=g_.create,qD=Nh.create,Qb=Dh.create,BD=Ch.create,zD=v_.create,GD=xh.create,VD=Ph.create,HD=rh.create,KD=gm.create,WD=Ap.create,JD=m_.create,ZD=ym.create,XD=Sl.create,QD=Sl.strictCreate,eC=Ah.create,tC=Kg.create,rC=Rh.create,nC=Pv.create,aC=Wg.create,iC=h_.create,oC=__.create,sC=Jg.create,uC=kh.create,cC=Oh.create,lC=Mh.create,fC=Lh.create,dC=nh.create,Bb=Uf.create,pC=yl.create,vC=Av.create,mC=Uf.createWithPreprocess,hC=G_.create,_C=()=>Zb().optional(),gC=()=>Xb().optional(),yC=()=>Qb().optional(),SC={string:e=>th.create({...e,coerce:!0}),number:e=>Ih.create({...e,coerce:!0}),boolean:e=>Dh.create({...e,coerce:!0}),bigint:e=>Nh.create({...e,coerce:!0}),date:e=>Ch.create({...e,coerce:!0})},bC=mr,O=Object.freeze({__proto__:null,defaultErrorMap:p_,setErrorMap:mD,getErrorMap:Gg,makeIssue:Vg,EMPTY_PATH:hD,addIssueToContext:ot,ParseStatus:Lu,INVALID:mr,DIRTY:d_,OK:Ec,isAborted:r0,isDirty:n0,isValid:Th,isAsync:B_,get util(){return fn},get objectUtil(){return t0},ZodParsedType:yt,getParsedType:_m,ZodType:kr,datetimeRegex:Kb,ZodString:th,ZodNumber:Ih,ZodBigInt:Nh,ZodBoolean:Dh,ZodDate:Ch,ZodSymbol:v_,ZodUndefined:xh,ZodNull:Ph,ZodAny:rh,ZodUnknown:gm,ZodNever:Ap,ZodVoid:m_,ZodArray:ym,ZodObject:Sl,ZodUnion:Ah,ZodDiscriminatedUnion:Kg,ZodIntersection:Rh,ZodTuple:Pv,ZodRecord:Wg,ZodMap:h_,ZodSet:__,ZodFunction:Jg,ZodLazy:kh,ZodLiteral:Oh,ZodEnum:Mh,ZodNativeEnum:Lh,ZodPromise:nh,ZodEffects:Uf,ZodTransformer:Uf,ZodOptional:yl,ZodNullable:Av,ZodDefault:Fh,ZodCatch:Uh,ZodNaN:g_,BRAND:UD,ZodBranded:z_,ZodPipeline:G_,ZodReadonly:jh,custom:Jb,Schema:kr,ZodSchema:kr,late:jD,get ZodFirstPartyTypeKind(){return ze},coerce:SC,any:HD,array:ZD,bigint:qD,boolean:Qb,date:BD,discriminatedUnion:tC,effect:Bb,enum:lC,function:sC,instanceof:YD,intersection:rC,lazy:uC,literal:cC,map:iC,nan:$D,nativeEnum:fC,never:WD,null:VD,nullable:vC,number:Xb,object:XD,oboolean:yC,onumber:gC,optional:pC,ostring:_C,pipeline:hC,preprocess:mC,promise:dC,record:aC,set:oC,strictObject:QD,string:Zb,symbol:zD,transformer:Bb,tuple:nC,undefined:GD,union:eC,unknown:KD,void:JD,NEVER:bC,ZodIssueCode:Ye,quotelessJson:vD,ZodError:bc});var EC=O.object({type:O.literal("error"),error:O.object({type:O.string(),message:O.string()})}),eE=Bg({errorSchema:EC,errorToMessage:e=>e.error.message});function wC({prompt:e}){var t,r,n,s;let u=new Set,h=TC(e),b,N=[];function A(U){var V;let Q=U==null?void 0:U.anthropic;return(V=Q==null?void 0:Q.cacheControl)!=null?V:Q==null?void 0:Q.cache_control}for(let U=0;U<h.length;U++){let V=h[U],Q=U===h.length-1,pe=V.type;switch(pe){case"system":{if(b!=null)throw new qn({functionality:"Multiple system messages that are separated by user/assistant messages"});b=V.messages.map(({content:de,providerMetadata:ue})=>({type:"text",text:de,cache_control:A(ue)}));break}case"user":{let de=[];for(let ue of V.messages){let{role:ne,content:ye}=ue;switch(ne){case"user":{for(let Ae=0;Ae<ye.length;Ae++){let tt=ye[Ae],Ke=Ae===ye.length-1,ct=(t=A(tt.providerMetadata))!=null?t:Ke?A(ue.providerMetadata):void 0;switch(tt.type){case"text":{de.push({type:"text",text:tt.text,cache_control:ct});break}case"image":{if(tt.image instanceof URL)throw new qn({functionality:"Image URLs in user messages"});de.push({type:"image",source:{type:"base64",media_type:(r=tt.mimeType)!=null?r:"image/jpeg",data:wh(tt.image)},cache_control:ct});break}case"file":{if(tt.data instanceof URL)throw new qn({functionality:"Image URLs in user messages"});if(tt.mimeType!=="application/pdf")throw new qn({functionality:"Non-PDF files in user messages"});u.add("pdfs-2024-09-25"),de.push({type:"document",source:{type:"base64",media_type:"application/pdf",data:tt.data},cache_control:ct});break}}}break}case"tool":{for(let Ae=0;Ae<ye.length;Ae++){let tt=ye[Ae],Ke=Ae===ye.length-1,ct=(n=A(tt.providerMetadata))!=null?n:Ke?A(ue.providerMetadata):void 0,Qe=tt.content!=null?tt.content.map(Nt=>{var kt;switch(Nt.type){case"text":return{type:"text",text:Nt.text,cache_control:void 0};case"image":return{type:"image",source:{type:"base64",media_type:(kt=Nt.mimeType)!=null?kt:"image/jpeg",data:Nt.data},cache_control:void 0}}}):JSON.stringify(tt.result);de.push({type:"tool_result",tool_use_id:tt.toolCallId,content:Qe,is_error:tt.isError,cache_control:ct})}break}default:{let Ae=ne;throw new Error(`Unsupported role: ${Ae}`)}}}N.push({role:"user",content:de});break}case"assistant":{let de=[];for(let ue=0;ue<V.messages.length;ue++){let ne=V.messages[ue],ye=ue===V.messages.length-1,{content:Ae}=ne;for(let tt=0;tt<Ae.length;tt++){let Ke=Ae[tt],ct=tt===Ae.length-1,Qe=(s=A(Ke.providerMetadata))!=null?s:ct?A(ne.providerMetadata):void 0;switch(Ke.type){case"text":{de.push({type:"text",text:Q&&ye&&ct?Ke.text.trim():Ke.text,cache_control:Qe});break}case"tool-call":{de.push({type:"tool_use",id:Ke.toolCallId,name:Ke.toolName,input:Ke.args,cache_control:Qe});break}}}}N.push({role:"assistant",content:de});break}default:{let de=pe;throw new Error(`Unsupported type: ${de}`)}}}return{prompt:{system:b,messages:N},betas:u}}function TC(e){let t=[],r;for(let n of e){let{role:s}=n;switch(s){case"system":{(r==null?void 0:r.type)!=="system"&&(r={type:"system",messages:[]},t.push(r)),r.messages.push(n);break}case"assistant":{(r==null?void 0:r.type)!=="assistant"&&(r={type:"assistant",messages:[]},t.push(r)),r.messages.push(n);break}case"user":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},t.push(r)),r.messages.push(n);break}case"tool":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},t.push(r)),r.messages.push(n);break}default:{let u=s;throw new Error(`Unsupported role: ${u}`)}}}return t}function tE(e){switch(e){case"end_turn":case"stop_sequence":return"stop";case"tool_use":return"tool-calls";case"max_tokens":return"length";default:return"unknown"}}function IC(e){var t;let r=(t=e.tools)!=null&&t.length?e.tools:void 0,n=[],s=new Set;if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:n,betas:s};let u=[];for(let N of r)switch(N.type){case"function":u.push({name:N.name,description:N.description,input_schema:N.parameters});break;case"provider-defined":switch(s.add("computer-use-2024-10-22"),N.id){case"anthropic.computer_20241022":u.push({name:N.name,type:"computer_20241022",display_width_px:N.args.displayWidthPx,display_height_px:N.args.displayHeightPx,display_number:N.args.displayNumber});break;case"anthropic.text_editor_20241022":u.push({name:N.name,type:"text_editor_20241022"});break;case"anthropic.bash_20241022":u.push({name:N.name,type:"bash_20241022"});break;default:n.push({type:"unsupported-tool",tool:N});break}break;default:n.push({type:"unsupported-tool",tool:N});break}let h=e.toolChoice;if(h==null)return{tools:u,tool_choice:void 0,toolWarnings:n,betas:s};let b=h.type;switch(b){case"auto":return{tools:u,tool_choice:{type:"auto"},toolWarnings:n,betas:s};case"required":return{tools:u,tool_choice:{type:"any"},toolWarnings:n,betas:s};case"none":return{tools:void 0,tool_choice:void 0,toolWarnings:n,betas:s};case"tool":return{tools:u,tool_choice:{type:"tool",name:h.toolName},toolWarnings:n,betas:s};default:{let N=b;throw new qn({functionality:`Unsupported tool choice type: ${N}`})}}}var NC=class{constructor(e,t,r){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:r,temperature:n,topP:s,topK:u,frequencyPenalty:h,presencePenalty:b,stopSequences:N,responseFormat:A,seed:U}){let V=e.type,Q=[];h!=null&&Q.push({type:"unsupported-setting",setting:"frequencyPenalty"}),b!=null&&Q.push({type:"unsupported-setting",setting:"presencePenalty"}),U!=null&&Q.push({type:"unsupported-setting",setting:"seed"}),A!=null&&A.type!=="text"&&Q.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:pe,betas:de}=wC({prompt:t}),ue={model:this.modelId,max_tokens:r??4096,temperature:n,top_k:u,top_p:s,stop_sequences:N,system:pe.system,messages:pe.messages};switch(V){case"regular":{let{tools:ne,tool_choice:ye,toolWarnings:Ae,betas:tt}=IC(e);return{args:{...ue,tools:ne,tool_choice:ye},warnings:[...Q,...Ae],betas:new Set([...de,...tt])}}case"object-json":throw new qn({functionality:"json-mode object generation"});case"object-tool":{let{name:ne,description:ye,parameters:Ae}=e.tool;return{args:{...ue,tools:[{name:ne,description:ye,input_schema:Ae}],tool_choice:{type:"tool",name:ne}},warnings:Q,betas:de}}default:{let ne=V;throw new Error(`Unsupported type: ${ne}`)}}}async getHeaders({betas:e,headers:t}){return Md(await Yb(this.config.headers),e.size>0?{"anthropic-beta":Array.from(e).join(",")}:{},t)}buildRequestUrl(e){var t,r,n;return(n=(r=(t=this.config).buildRequestUrl)==null?void 0:r.call(t,this.config.baseURL,e))!=null?n:`${this.config.baseURL}/messages`}transformRequestBody(e){var t,r,n;return(n=(r=(t=this.config).transformRequestBody)==null?void 0:r.call(t,e))!=null?n:e}async doGenerate(e){var t,r,n,s;let{args:u,warnings:h,betas:b}=await this.getArgs(e),{responseHeaders:N,value:A}=await Ff({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:b,headers:e.headers}),body:this.transformRequestBody(u),failedResponseHandler:eE,successfulResponseHandler:xv(DC),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:U,...V}=u,Q="";for(let de of A.content)de.type==="text"&&(Q+=de.text);let pe;if(A.content.some(de=>de.type==="tool_use")){pe=[];for(let de of A.content)de.type==="tool_use"&&pe.push({toolCallType:"function",toolCallId:de.id,toolName:de.name,args:JSON.stringify(de.input)})}return{text:Q,toolCalls:pe,finishReason:tE(A.stop_reason),usage:{promptTokens:A.usage.input_tokens,completionTokens:A.usage.output_tokens},rawCall:{rawPrompt:U,rawSettings:V},rawResponse:{headers:N},response:{id:(t=A.id)!=null?t:void 0,modelId:(r=A.model)!=null?r:void 0},warnings:h,providerMetadata:{anthropic:{cacheCreationInputTokens:(n=A.usage.cache_creation_input_tokens)!=null?n:null,cacheReadInputTokens:(s=A.usage.cache_read_input_tokens)!=null?s:null}},request:{body:JSON.stringify(u)}}}async doStream(e){let{args:t,warnings:r,betas:n}=await this.getArgs(e),s={...t,stream:!0},{responseHeaders:u,value:h}=await Ff({url:this.buildRequestUrl(!0),headers:await this.getHeaders({betas:n,headers:e.headers}),body:this.transformRequestBody(s),failedResponseHandler:eE,successfulResponseHandler:l_(CC),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:b,...N}=t,A="unknown",U={promptTokens:Number.NaN,completionTokens:Number.NaN},V={},Q,pe=this;return{stream:h.pipeThrough(new TransformStream({transform(de,ue){var ne,ye,Ae,tt;if(!de.success){ue.enqueue({type:"error",error:de.error});return}let Ke=de.value;switch(Ke.type){case"ping":return;case"content_block_start":{let ct=Ke.content_block.type;switch(ct){case"text":return;case"tool_use":{V[Ke.index]={toolCallId:Ke.content_block.id,toolName:Ke.content_block.name,jsonText:""};return}default:{let Qe=ct;throw new Error(`Unsupported content block type: ${Qe}`)}}}case"content_block_stop":{if(V[Ke.index]!=null){let ct=V[Ke.index];ue.enqueue({type:"tool-call",toolCallType:"function",toolCallId:ct.toolCallId,toolName:ct.toolName,args:ct.jsonText}),delete V[Ke.index]}return}case"content_block_delta":{let ct=Ke.delta.type;switch(ct){case"text_delta":{ue.enqueue({type:"text-delta",textDelta:Ke.delta.text});return}case"input_json_delta":{let Qe=V[Ke.index];ue.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Qe.toolCallId,toolName:Qe.toolName,argsTextDelta:Ke.delta.partial_json}),Qe.jsonText+=Ke.delta.partial_json;return}default:{let Qe=ct;throw new Error(`Unsupported delta type: ${Qe}`)}}}case"message_start":{U.promptTokens=Ke.message.usage.input_tokens,U.completionTokens=Ke.message.usage.output_tokens,Q={anthropic:{cacheCreationInputTokens:(ne=Ke.message.usage.cache_creation_input_tokens)!=null?ne:null,cacheReadInputTokens:(ye=Ke.message.usage.cache_read_input_tokens)!=null?ye:null}},ue.enqueue({type:"response-metadata",id:(Ae=Ke.message.id)!=null?Ae:void 0,modelId:(tt=Ke.message.model)!=null?tt:void 0});return}case"message_delta":{U.completionTokens=Ke.usage.output_tokens,A=tE(Ke.delta.stop_reason);return}case"message_stop":{ue.enqueue({type:"finish",finishReason:A,usage:U,providerMetadata:Q});return}case"error":{ue.enqueue({type:"error",error:Ke.error});return}default:{let ct=Ke;throw new Error(`Unsupported chunk type: ${ct}`)}}}})),rawCall:{rawPrompt:b,rawSettings:N},rawResponse:{headers:u},warnings:r,request:{body:JSON.stringify(s)}}}},DC=O.object({type:O.literal("message"),id:O.string().nullish(),model:O.string().nullish(),content:O.array(O.discriminatedUnion("type",[O.object({type:O.literal("text"),text:O.string()}),O.object({type:O.literal("tool_use"),id:O.string(),name:O.string(),input:O.unknown()})])),stop_reason:O.string().nullish(),usage:O.object({input_tokens:O.number(),output_tokens:O.number(),cache_creation_input_tokens:O.number().nullish(),cache_read_input_tokens:O.number().nullish()})}),CC=O.discriminatedUnion("type",[O.object({type:O.literal("message_start"),message:O.object({id:O.string().nullish(),model:O.string().nullish(),usage:O.object({input_tokens:O.number(),output_tokens:O.number(),cache_creation_input_tokens:O.number().nullish(),cache_read_input_tokens:O.number().nullish()})})}),O.object({type:O.literal("content_block_start"),index:O.number(),content_block:O.discriminatedUnion("type",[O.object({type:O.literal("text"),text:O.string()}),O.object({type:O.literal("tool_use"),id:O.string(),name:O.string()})])}),O.object({type:O.literal("content_block_delta"),index:O.number(),delta:O.discriminatedUnion("type",[O.object({type:O.literal("input_json_delta"),partial_json:O.string()}),O.object({type:O.literal("text_delta"),text:O.string()})])}),O.object({type:O.literal("content_block_stop"),index:O.number()}),O.object({type:O.literal("error"),error:O.object({type:O.string(),message:O.string()})}),O.object({type:O.literal("message_delta"),delta:O.object({stop_reason:O.string().nullish()}),usage:O.object({output_tokens:O.number()})}),O.object({type:O.literal("message_stop")}),O.object({type:O.literal("ping")})]),xC=O.object({command:O.string(),restart:O.boolean().optional()});function PC(e={}){return{type:"provider-defined",id:"anthropic.bash_20241022",args:{},parameters:xC,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}}var AC=O.object({command:O.enum(["view","create","str_replace","insert","undo_edit"]),path:O.string(),file_text:O.string().optional(),insert_line:O.number().int().optional(),new_str:O.string().optional(),old_str:O.string().optional(),view_range:O.array(O.number().int()).optional()});function RC(e={}){return{type:"provider-defined",id:"anthropic.text_editor_20241022",args:{},parameters:AC,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}}var kC=O.object({action:O.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:O.array(O.number().int()).optional(),text:O.string().optional()});function OC(e){return{type:"provider-defined",id:"anthropic.computer_20241022",args:{displayWidthPx:e.displayWidthPx,displayHeightPx:e.displayHeightPx,displayNumber:e.displayNumber},parameters:kC,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}}var MC={bash_20241022:PC,textEditor_20241022:RC,computer_20241022:OC};function i0(e={}){var t;let r=(t=zg(e.baseURL))!=null?t:"https://api.anthropic.com/v1",n=()=>({"anthropic-version":"2023-06-01","x-api-key":$g({apiKey:e.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...e.headers}),s=(h,b={})=>new NC(h,b,{provider:"anthropic.messages",baseURL:r,headers:n,fetch:e.fetch}),u=function(h,b){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return s(h,b)};return u.languageModel=s,u.chat=s,u.messages=s,u.textEmbeddingModel=h=>{throw new Jy({modelId:h,modelType:"textEmbeddingModel"})},u.tools=MC,u}var i1=i0();function LC({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:r="system"}){let n=[];for(let{role:s,content:u}of e)switch(s){case"system":{switch(r){case"system":{n.push({role:"system",content:u});break}case"developer":{n.push({role:"developer",content:u});break}case"remove":break;default:{let h=r;throw new Error(`Unsupported system message mode: ${h}`)}}break}case"user":{if(u.length===1&&u[0].type==="text"){n.push({role:"user",content:u[0].text});break}n.push({role:"user",content:u.map(h=>{var b,N,A;switch(h.type){case"text":return{type:"text",text:h.text};case"image":return{type:"image_url",image_url:{url:h.image instanceof URL?h.image.toString():`data:${(b=h.mimeType)!=null?b:"image/jpeg"};base64,${wh(h.image)}`,detail:(A=(N=h.providerMetadata)==null?void 0:N.openai)==null?void 0:A.imageDetail}};case"file":{if(h.data instanceof URL)throw new qn({functionality:"'File content parts with URL data' functionality not supported."});switch(h.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:h.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:h.data,format:"mp3"}};default:throw new qn({functionality:`File content part type ${h.mimeType} in user messages`})}}}})});break}case"assistant":{let h="",b=[];for(let N of u)switch(N.type){case"text":{h+=N.text;break}case"tool-call":{b.push({id:N.toolCallId,type:"function",function:{name:N.toolName,arguments:JSON.stringify(N.args)}});break}default:{let A=N;throw new Error(`Unsupported part: ${A}`)}}if(t){if(b.length>1)throw new qn({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});n.push({role:"assistant",content:h,function_call:b.length>0?b[0].function:void 0})}else n.push({role:"assistant",content:h,tool_calls:b.length>0?b:void 0});break}case"tool":{for(let h of u)t?n.push({role:"function",name:h.toolName,content:JSON.stringify(h.result)}):n.push({role:"tool",tool_call_id:h.toolCallId,content:JSON.stringify(h.result)});break}default:{let h=s;throw new Error(`Unsupported role: ${h}`)}}return n}function rE(e){var t,r;return(r=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:n,logprob:s,top_logprobs:u})=>({token:n,logprob:s,topLogprobs:u?u.map(({token:h,logprob:b})=>({token:h,logprob:b})):[]})))!=null?r:void 0}function Zg(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var o0=O.object({error:O.object({message:O.string(),type:O.string().nullish(),param:O.any().nullish(),code:O.union([O.string(),O.number()]).nullish()})}),y_=Bg({errorSchema:o0,errorToMessage:e=>e.error.message});function Xg({id:e,model:t,created:r}){return{id:e??void 0,modelId:t??void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function FC({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:r}){var n;let s=(n=e.tools)!=null&&n.length?e.tools:void 0,u=[];if(s==null)return{tools:void 0,tool_choice:void 0,toolWarnings:u};let h=e.toolChoice;if(t){let A=[];for(let V of s)V.type==="provider-defined"?u.push({type:"unsupported-tool",tool:V}):A.push({name:V.name,description:V.description,parameters:V.parameters});if(h==null)return{functions:A,function_call:void 0,toolWarnings:u};switch(h.type){case"auto":case"none":case void 0:return{functions:A,function_call:void 0,toolWarnings:u};case"required":throw new qn({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:A,function_call:{name:h.toolName},toolWarnings:u}}}let b=[];for(let A of s)A.type==="provider-defined"?u.push({type:"unsupported-tool",tool:A}):b.push({type:"function",function:{name:A.name,description:A.description,parameters:A.parameters,strict:r?!0:void 0}});if(h==null)return{tools:b,tool_choice:void 0,toolWarnings:u};let N=h.type;switch(N){case"auto":case"none":case"required":return{tools:b,tool_choice:N,toolWarnings:u};case"tool":return{tools:b,tool_choice:{type:"function",function:{name:h.toolName}},toolWarnings:u};default:{let A=N;throw new qn({functionality:`Unsupported tool choice type: ${A}`})}}}var UC=class{constructor(e,t,r){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=r}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:Qg(this.modelId)}get defaultObjectGenerationMode(){return $C(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:r,temperature:n,topP:s,topK:u,frequencyPenalty:h,presencePenalty:b,stopSequences:N,responseFormat:A,seed:U,providerMetadata:V}){var Q,pe,de,ue,ne,ye,Ae,tt;let Ke=e.type,ct=[];u!=null&&ct.push({type:"unsupported-setting",setting:"topK"}),(A==null?void 0:A.type)==="json"&&A.schema!=null&&!this.supportsStructuredOutputs&&ct.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let Qe=this.settings.useLegacyFunctionCalling;if(Qe&&this.settings.parallelToolCalls===!0)throw new qn({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(Qe&&this.supportsStructuredOutputs)throw new qn({functionality:"structuredOutputs with useLegacyFunctionCalling"});nE(this.modelId)==="remove"&&t.some(kt=>kt.role==="system")&&ct.push({type:"other",message:"system messages are removed for this model"});let Nt={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:r,temperature:n,top_p:s,frequency_penalty:h,presence_penalty:b,response_format:(A==null?void 0:A.type)==="json"?this.supportsStructuredOutputs&&A.schema!=null?{type:"json_schema",json_schema:{schema:A.schema,strict:!0,name:(Q=A.name)!=null?Q:"response",description:A.description}}:{type:"json_object"}:void 0,stop:N,seed:U,max_completion_tokens:(pe=V==null?void 0:V.openai)==null?void 0:pe.maxCompletionTokens,store:(de=V==null?void 0:V.openai)==null?void 0:de.store,metadata:(ue=V==null?void 0:V.openai)==null?void 0:ue.metadata,prediction:(ne=V==null?void 0:V.openai)==null?void 0:ne.prediction,reasoning_effort:(Ae=(ye=V==null?void 0:V.openai)==null?void 0:ye.reasoningEffort)!=null?Ae:this.settings.reasoningEffort,messages:LC({prompt:t,useLegacyFunctionCalling:Qe,systemMessageMode:nE(this.modelId)})};switch(Qg(this.modelId)&&(Nt.temperature!=null&&(Nt.temperature=void 0,ct.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),Nt.top_p!=null&&(Nt.top_p=void 0,ct.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),Nt.frequency_penalty!=null&&(Nt.frequency_penalty=void 0,ct.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),Nt.presence_penalty!=null&&(Nt.presence_penalty=void 0,ct.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),Nt.logit_bias!=null&&(Nt.logit_bias=void 0,ct.push({type:"other",message:"logitBias is not supported for reasoning models"})),Nt.logprobs!=null&&(Nt.logprobs=void 0,ct.push({type:"other",message:"logprobs is not supported for reasoning models"})),Nt.top_logprobs!=null&&(Nt.top_logprobs=void 0,ct.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),Nt.max_tokens!=null&&(Nt.max_completion_tokens==null&&(Nt.max_completion_tokens=Nt.max_tokens),Nt.max_tokens=void 0)),Ke){case"regular":{let{tools:kt,tool_choice:yr,functions:Sr,function_call:zr,toolWarnings:po}=FC({mode:e,useLegacyFunctionCalling:Qe,structuredOutputs:this.supportsStructuredOutputs});return{args:{...Nt,tools:kt,tool_choice:yr,functions:Sr,function_call:zr},warnings:[...ct,...po]}}case"object-json":return{args:{...Nt,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(tt=e.name)!=null?tt:"response",description:e.description}}:{type:"json_object"}},warnings:ct};case"object-tool":return{args:Qe?{...Nt,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...Nt,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:ct};default:{let kt=Ke;throw new Error(`Unsupported type: ${kt}`)}}}async doGenerate(e){var t,r,n,s,u,h,b,N;let{args:A,warnings:U}=this.getArgs(e),{responseHeaders:V,value:Q}=await Ff({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Md(this.config.headers(),e.headers),body:A,failedResponseHandler:y_,successfulResponseHandler:xv(jC),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:pe,...de}=A,ue=Q.choices[0],ne=(t=Q.usage)==null?void 0:t.completion_tokens_details,ye=(r=Q.usage)==null?void 0:r.prompt_tokens_details,Ae={openai:{}};return(ne==null?void 0:ne.reasoning_tokens)!=null&&(Ae.openai.reasoningTokens=ne==null?void 0:ne.reasoning_tokens),(ne==null?void 0:ne.accepted_prediction_tokens)!=null&&(Ae.openai.acceptedPredictionTokens=ne==null?void 0:ne.accepted_prediction_tokens),(ne==null?void 0:ne.rejected_prediction_tokens)!=null&&(Ae.openai.rejectedPredictionTokens=ne==null?void 0:ne.rejected_prediction_tokens),(ye==null?void 0:ye.cached_tokens)!=null&&(Ae.openai.cachedPromptTokens=ye==null?void 0:ye.cached_tokens),{text:(n=ue.message.content)!=null?n:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&ue.message.function_call?[{toolCallType:"function",toolCallId:mm(),toolName:ue.message.function_call.name,args:ue.message.function_call.arguments}]:(s=ue.message.tool_calls)==null?void 0:s.map(tt=>{var Ke;return{toolCallType:"function",toolCallId:(Ke=tt.id)!=null?Ke:mm(),toolName:tt.function.name,args:tt.function.arguments}}),finishReason:Zg(ue.finish_reason),usage:{promptTokens:(h=(u=Q.usage)==null?void 0:u.prompt_tokens)!=null?h:NaN,completionTokens:(N=(b=Q.usage)==null?void 0:b.completion_tokens)!=null?N:NaN},rawCall:{rawPrompt:pe,rawSettings:de},rawResponse:{headers:V},request:{body:JSON.stringify(A)},response:Xg(Q),warnings:U,logprobs:rE(ue.logprobs),providerMetadata:Ae}}async doStream(e){var t;if((t=this.settings.simulateStreaming)!=null?t:qC(this.modelId)){let ne=await this.doGenerate(e);return{stream:new ReadableStream({start(Ae){if(Ae.enqueue({type:"response-metadata",...ne.response}),ne.text&&Ae.enqueue({type:"text-delta",textDelta:ne.text}),ne.toolCalls)for(let tt of ne.toolCalls)Ae.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:tt.toolCallId,toolName:tt.toolName,argsTextDelta:tt.args}),Ae.enqueue({type:"tool-call",...tt});Ae.enqueue({type:"finish",finishReason:ne.finishReason,usage:ne.usage,logprobs:ne.logprobs,providerMetadata:ne.providerMetadata}),Ae.close()}}),rawCall:ne.rawCall,rawResponse:ne.rawResponse,warnings:ne.warnings}}let{args:r,warnings:n}=this.getArgs(e),s={...r,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:u,value:h}=await Ff({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Md(this.config.headers(),e.headers),body:s,failedResponseHandler:y_,successfulResponseHandler:l_(YC),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:b,...N}=r,A=[],U="unknown",V={promptTokens:void 0,completionTokens:void 0},Q,pe=!0,{useLegacyFunctionCalling:de}=this.settings,ue={openai:{}};return{stream:h.pipeThrough(new TransformStream({transform(ne,ye){var Ae,tt,Ke,ct,Qe,Nt,kt,yr,Sr,zr,po,Yi;if(!ne.success){U="error",ye.enqueue({type:"error",error:ne.error});return}let Kr=ne.value;if("error"in Kr){U="error",ye.enqueue({type:"error",error:Kr.error});return}if(pe&&(pe=!1,ye.enqueue({type:"response-metadata",...Xg(Kr)})),Kr.usage!=null){let{prompt_tokens:Tr,completion_tokens:Bn,prompt_tokens_details:Ot,completion_tokens_details:Lt}=Kr.usage;V={promptTokens:Tr??void 0,completionTokens:Bn??void 0},(Lt==null?void 0:Lt.reasoning_tokens)!=null&&(ue.openai.reasoningTokens=Lt==null?void 0:Lt.reasoning_tokens),(Lt==null?void 0:Lt.accepted_prediction_tokens)!=null&&(ue.openai.acceptedPredictionTokens=Lt==null?void 0:Lt.accepted_prediction_tokens),(Lt==null?void 0:Lt.rejected_prediction_tokens)!=null&&(ue.openai.rejectedPredictionTokens=Lt==null?void 0:Lt.rejected_prediction_tokens),(Ot==null?void 0:Ot.cached_tokens)!=null&&(ue.openai.cachedPromptTokens=Ot==null?void 0:Ot.cached_tokens)}let Cn=Kr.choices[0];if((Cn==null?void 0:Cn.finish_reason)!=null&&(U=Zg(Cn.finish_reason)),(Cn==null?void 0:Cn.delta)==null)return;let nt=Cn.delta;nt.content!=null&&ye.enqueue({type:"text-delta",textDelta:nt.content});let vo=rE(Cn==null?void 0:Cn.logprobs);vo!=null&&vo.length&&(Q===void 0&&(Q=[]),Q.push(...vo));let Ve=de&&nt.function_call!=null?[{type:"function",id:mm(),function:nt.function_call,index:0}]:nt.tool_calls;if(Ve!=null)for(let Tr of Ve){let Bn=Tr.index;if(A[Bn]==null){if(Tr.type!=="function")throw new U_({data:Tr,message:"Expected 'function' type."});if(Tr.id==null)throw new U_({data:Tr,message:"Expected 'id' to be a string."});if(((Ae=Tr.function)==null?void 0:Ae.name)==null)throw new U_({data:Tr,message:"Expected 'function.name' to be a string."});A[Bn]={id:Tr.id,type:"function",function:{name:Tr.function.name,arguments:(tt=Tr.function.arguments)!=null?tt:""},hasFinished:!1};let Lt=A[Bn];((Ke=Lt.function)==null?void 0:Ke.name)!=null&&((ct=Lt.function)==null?void 0:ct.arguments)!=null&&(Lt.function.arguments.length>0&&ye.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Lt.id,toolName:Lt.function.name,argsTextDelta:Lt.function.arguments}),Qy(Lt.function.arguments)&&(ye.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Qe=Lt.id)!=null?Qe:mm(),toolName:Lt.function.name,args:Lt.function.arguments}),Lt.hasFinished=!0));continue}let Ot=A[Bn];Ot.hasFinished||(((Nt=Tr.function)==null?void 0:Nt.arguments)!=null&&(Ot.function.arguments+=(yr=(kt=Tr.function)==null?void 0:kt.arguments)!=null?yr:""),ye.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Ot.id,toolName:Ot.function.name,argsTextDelta:(Sr=Tr.function.arguments)!=null?Sr:""}),((zr=Ot.function)==null?void 0:zr.name)!=null&&((po=Ot.function)==null?void 0:po.arguments)!=null&&Qy(Ot.function.arguments)&&(ye.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Yi=Ot.id)!=null?Yi:mm(),toolName:Ot.function.name,args:Ot.function.arguments}),Ot.hasFinished=!0))}},flush(ne){var ye,Ae;ne.enqueue({type:"finish",finishReason:U,logprobs:Q,usage:{promptTokens:(ye=V.promptTokens)!=null?ye:NaN,completionTokens:(Ae=V.completionTokens)!=null?Ae:NaN},...ue!=null?{providerMetadata:ue}:{}})}})),rawCall:{rawPrompt:b,rawSettings:N},rawResponse:{headers:u},request:{body:JSON.stringify(s)},warnings:n}}},iE=O.object({prompt_tokens:O.number().nullish(),completion_tokens:O.number().nullish(),prompt_tokens_details:O.object({cached_tokens:O.number().nullish()}).nullish(),completion_tokens_details:O.object({reasoning_tokens:O.number().nullish(),accepted_prediction_tokens:O.number().nullish(),rejected_prediction_tokens:O.number().nullish()}).nullish()}).nullish(),jC=O.object({id:O.string().nullish(),created:O.number().nullish(),model:O.string().nullish(),choices:O.array(O.object({message:O.object({role:O.literal("assistant").nullish(),content:O.string().nullish(),function_call:O.object({arguments:O.string(),name:O.string()}).nullish(),tool_calls:O.array(O.object({id:O.string().nullish(),type:O.literal("function"),function:O.object({name:O.string(),arguments:O.string()})})).nullish()}),index:O.number(),logprobs:O.object({content:O.array(O.object({token:O.string(),logprob:O.number(),top_logprobs:O.array(O.object({token:O.string(),logprob:O.number()}))})).nullable()}).nullish(),finish_reason:O.string().nullish()})),usage:iE}),YC=O.union([O.object({id:O.string().nullish(),created:O.number().nullish(),model:O.string().nullish(),choices:O.array(O.object({delta:O.object({role:O.enum(["assistant"]).nullish(),content:O.string().nullish(),function_call:O.object({name:O.string().optional(),arguments:O.string().optional()}).nullish(),tool_calls:O.array(O.object({index:O.number(),id:O.string().nullish(),type:O.literal("function").optional(),function:O.object({name:O.string().nullish(),arguments:O.string().nullish()})})).nullish()}).nullish(),logprobs:O.object({content:O.array(O.object({token:O.string(),logprob:O.number(),top_logprobs:O.array(O.object({token:O.string(),logprob:O.number()}))})).nullable()}).nullish(),finish_reason:O.string().nullable().optional(),index:O.number()})),usage:iE}),o0]);function Qg(e){return e==="o1"||e.startsWith("o1-")||e==="o3"||e.startsWith("o3-")}function $C(e){return e.startsWith("gpt-4o-audio-preview")}function nE(e){var t,r;return Qg(e)?(r=(t=oE[e])==null?void 0:t.systemMessageMode)!=null?r:"developer":"system"}function qC(e){var t,r;return Qg(e)?(r=(t=oE[e])==null?void 0:t.simulateStreamingByDefault)!=null?r:!0:!1}var oE={"o1-mini":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o1-mini-2024-09-12":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o1-preview":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o1-preview-2024-09-12":{systemMessageMode:"remove",simulateStreamingByDefault:!1}};function BC({prompt:e,inputFormat:t,user:r="user",assistant:n="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let s="";e[0].role==="system"&&(s+=`${e[0].content}

`,e=e.slice(1));for(let{role:u,content:h}of e)switch(u){case"system":throw new Dv({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{let b=h.map(N=>{switch(N.type){case"text":return N.text;case"image":throw new qn({functionality:"images"})}}).join("");s+=`${r}:
${b}

`;break}case"assistant":{let b=h.map(N=>{switch(N.type){case"text":return N.text;case"tool-call":throw new qn({functionality:"tool-call messages"})}}).join("");s+=`${n}:
${b}

`;break}case"tool":throw new qn({functionality:"tool messages"});default:{let b=u;throw new Error(`Unsupported role: ${b}`)}}return s+=`${n}:
`,{prompt:s,stopSequences:[`
${r}:`]}}function aE(e){return e==null?void 0:e.tokens.map((t,r)=>({token:t,logprob:e.token_logprobs[r],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[r]).map(([n,s])=>({token:n,logprob:s})):[]}))}var zC=class{constructor(e,t,r){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:r,maxTokens:n,temperature:s,topP:u,topK:h,frequencyPenalty:b,presencePenalty:N,stopSequences:A,responseFormat:U,seed:V}){var Q;let pe=e.type,de=[];h!=null&&de.push({type:"unsupported-setting",setting:"topK"}),U!=null&&U.type!=="text"&&de.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:ue,stopSequences:ne}=BC({prompt:r,inputFormat:t}),ye=[...ne??[],...A??[]],Ae={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:n,temperature:s,top_p:u,frequency_penalty:b,presence_penalty:N,seed:V,prompt:ue,stop:ye.length>0?ye:void 0};switch(pe){case"regular":{if((Q=e.tools)!=null&&Q.length)throw new qn({functionality:"tools"});if(e.toolChoice)throw new qn({functionality:"toolChoice"});return{args:Ae,warnings:de}}case"object-json":throw new qn({functionality:"object-json mode"});case"object-tool":throw new qn({functionality:"object-tool mode"});default:{let tt=pe;throw new Error(`Unsupported type: ${tt}`)}}}async doGenerate(e){let{args:t,warnings:r}=this.getArgs(e),{responseHeaders:n,value:s}=await Ff({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Md(this.config.headers(),e.headers),body:t,failedResponseHandler:y_,successfulResponseHandler:xv(GC),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:u,...h}=t,b=s.choices[0];return{text:b.text,usage:{promptTokens:s.usage.prompt_tokens,completionTokens:s.usage.completion_tokens},finishReason:Zg(b.finish_reason),logprobs:aE(b.logprobs),rawCall:{rawPrompt:u,rawSettings:h},rawResponse:{headers:n},response:Xg(s),warnings:r,request:{body:JSON.stringify(t)}}}async doStream(e){let{args:t,warnings:r}=this.getArgs(e),n={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:s,value:u}=await Ff({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Md(this.config.headers(),e.headers),body:n,failedResponseHandler:y_,successfulResponseHandler:l_(VC),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:h,...b}=t,N="unknown",A={promptTokens:Number.NaN,completionTokens:Number.NaN},U,V=!0;return{stream:u.pipeThrough(new TransformStream({transform(Q,pe){if(!Q.success){N="error",pe.enqueue({type:"error",error:Q.error});return}let de=Q.value;if("error"in de){N="error",pe.enqueue({type:"error",error:de.error});return}V&&(V=!1,pe.enqueue({type:"response-metadata",...Xg(de)})),de.usage!=null&&(A={promptTokens:de.usage.prompt_tokens,completionTokens:de.usage.completion_tokens});let ue=de.choices[0];(ue==null?void 0:ue.finish_reason)!=null&&(N=Zg(ue.finish_reason)),(ue==null?void 0:ue.text)!=null&&pe.enqueue({type:"text-delta",textDelta:ue.text});let ne=aE(ue==null?void 0:ue.logprobs);ne!=null&&ne.length&&(U===void 0&&(U=[]),U.push(...ne))},flush(Q){Q.enqueue({type:"finish",finishReason:N,logprobs:U,usage:A})}})),rawCall:{rawPrompt:h,rawSettings:b},rawResponse:{headers:s},warnings:r,request:{body:JSON.stringify(n)}}}},GC=O.object({id:O.string().nullish(),created:O.number().nullish(),model:O.string().nullish(),choices:O.array(O.object({text:O.string(),finish_reason:O.string(),logprobs:O.object({tokens:O.array(O.string()),token_logprobs:O.array(O.number()),top_logprobs:O.array(O.record(O.string(),O.number())).nullable()}).nullish()})),usage:O.object({prompt_tokens:O.number(),completion_tokens:O.number()})}),VC=O.union([O.object({id:O.string().nullish(),created:O.number().nullish(),model:O.string().nullish(),choices:O.array(O.object({text:O.string(),finish_reason:O.string().nullish(),index:O.number(),logprobs:O.object({tokens:O.array(O.string()),token_logprobs:O.array(O.number()),top_logprobs:O.array(O.record(O.string(),O.number())).nullable()}).nullish()})),usage:O.object({prompt_tokens:O.number(),completion_tokens:O.number()}).nullish()}),o0]),HC=class{constructor(e,t,r){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:r}){if(e.length>this.maxEmbeddingsPerCall)throw new wb({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let{responseHeaders:n,value:s}=await Ff({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Md(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:y_,successfulResponseHandler:xv(KC),abortSignal:r,fetch:this.config.fetch});return{embeddings:s.data.map(u=>u.embedding),usage:s.usage?{tokens:s.usage.prompt_tokens}:void 0,rawResponse:{headers:n}}}},KC=O.object({data:O.array(O.object({embedding:O.array(O.number())})),usage:O.object({prompt_tokens:O.number()}).nullish()}),WC={"dall-e-3":1,"dall-e-2":10},JC=class{constructor(e,t,r){this.modelId=e,this.settings=t,this.config=r,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:WC[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:r,aspectRatio:n,seed:s,providerOptions:u,headers:h,abortSignal:b}){var N,A,U,V;let Q=[];n!=null&&Q.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),s!=null&&Q.push({type:"unsupported-setting",setting:"seed"});let pe=(U=(A=(N=this.config._internal)==null?void 0:N.currentDate)==null?void 0:A.call(N))!=null?U:new Date,{value:de,responseHeaders:ue}=await Ff({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Md(this.config.headers(),h),body:{model:this.modelId,prompt:e,n:t,size:r,...(V=u.openai)!=null?V:{},response_format:"b64_json"},failedResponseHandler:y_,successfulResponseHandler:xv(ZC),abortSignal:b,fetch:this.config.fetch});return{images:de.data.map(ne=>ne.b64_json),warnings:Q,response:{timestamp:pe,modelId:this.modelId,headers:ue}}}},ZC=O.object({data:O.array(O.object({b64_json:O.string()}))});function s0(e={}){var t,r,n;let s=(t=zg(e.baseURL))!=null?t:"https://api.openai.com/v1",u=(r=e.compatibility)!=null?r:"compatible",h=(n=e.name)!=null?n:"openai",b=()=>({Authorization:`Bearer ${$g({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),N=(de,ue={})=>new UC(de,ue,{provider:`${h}.chat`,url:({path:ne})=>`${s}${ne}`,headers:b,compatibility:u,fetch:e.fetch}),A=(de,ue={})=>new zC(de,ue,{provider:`${h}.completion`,url:({path:ne})=>`${s}${ne}`,headers:b,compatibility:u,fetch:e.fetch}),U=(de,ue={})=>new HC(de,ue,{provider:`${h}.embedding`,url:({path:ne})=>`${s}${ne}`,headers:b,fetch:e.fetch}),V=(de,ue={})=>new JC(de,ue,{provider:`${h}.image`,url:({path:ne})=>`${s}${ne}`,headers:b,fetch:e.fetch}),Q=(de,ue)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return de==="gpt-3.5-turbo-instruct"?A(de,ue):N(de,ue)},pe=function(de,ue){return Q(de,ue)};return pe.languageModel=Q,pe.chat=N,pe.completion=A,pe.embedding=U,pe.textEmbedding=U,pe.textEmbeddingModel=U,pe.image=V,pe}var N1=s0({compatibility:"strict"});var bs=require("vscode"),XC=["rate limit exceeded","net::err","check your network connection","check your firewall","request failed","400 bad request","server error","error on conversation request","response contained no choices","response got filtered"];function QC({role:e,content:t}){switch(e){case"system":return bs.LanguageModelChatMessage.User(t);case"user":let r=t.map(u=>{switch(u.type){case"text":return new bs.LanguageModelTextPart(u.text);case"image":throw new Error("Image content not supported");case"file":throw new Error("File content not supported")}});return bs.LanguageModelChatMessage.User(r);case"tool":let n=t.map(u=>{switch(u.type){case"tool-result":let h=typeof u.result=="string"?u.result:JSON.stringify(u.result);return new bs.LanguageModelToolResultPart(u.toolCallId,[new bs.LanguageModelTextPart(h)])}});return bs.LanguageModelChatMessage.User(n);case"assistant":let s=t.map(u=>{switch(u.type){case"text":return new bs.LanguageModelTextPart(u.text);case"tool-call":return new bs.LanguageModelToolCallPart(u.toolCallId,u.toolName,u.args)}});return bs.LanguageModelChatMessage.Assistant(s)}}function ex(e){switch(e.type){case"function":return{name:e.name,description:e.description,inputSchema:e.parameters};case"provider-defined":throw new Error("Provider-defined tools not supported")}}function tx(e){let t=String(e.message).toLowerCase();for(let r of XC)if(t.includes(r))return!0;return!1}var u0=class{specificationVersion="v1";defaultObjectGenerationMode="json";provider="copilot";supportsImageUrls=!1;constructor(t,r,n){this.modelId=t,this.settings=r,this.config=n}async doGenerate(t){throw new Error("Not implemented")}async doStream(t){var U;let[r]=await bs.lm.selectChatModels({family:this.modelId,vendor:"copilot"});if(!r)throw new Error("Model not found: "+this.modelId);let{prompt:n,abortSignal:s,mode:u}=t,h=s.context;if(u.type!=="regular")throw new Error("Request mode not supported: "+u.type);let b=n.map(QC),N=(U=u.tools)==null?void 0:U.map(ex);return n.slice(-1)[0].role=="tool"&&b.push(bs.LanguageModelChatMessage.User("Follow the instructions in the tool call results above")),{stream:new ReadableStream({async start(V){let Q=0;for(;;){try{let pe=await r.sendRequest(b,{tools:N,modelOptions:{temperature:.2,max_tokens:8192}},h.token);for await(let de of pe.stream){if(h.token.isCancellationRequested)break;de instanceof bs.LanguageModelTextPart?V.enqueue({type:"text-delta",textDelta:de.value}):de instanceof bs.LanguageModelToolCallPart?V.enqueue({type:"tool-call",toolCallType:"function",toolCallId:de.callId,toolName:de.name,args:JSON.stringify(de.input)}):V.error(new Error("Unknown content format"))}V.close();return}catch(pe){if(!tx(pe)||++Q>5){V.error(pe);return}V.enqueue({type:"error",error:{event:"retry",count:Q,message:pe.message||String(pe),cause:pe}}),String(pe.message).toLowerCase().includes("rate limit exceeded")&&await sE(30)}await sE(5*Q)}}}),rawCall:{rawPrompt:"",rawSettings:{}}}}};function uE(e){let t=(n,s={})=>new u0(n,s,{provider:"copilot"}),r=function(n,s={}){return t(n,s)};return r.chat=t,r}async function sE(e){return new Promise(t=>setTimeout(t,e*1e3))}var rx={anthropic:i0,openai:s0,copilot:uE},cE={};function c0({id:e,provider:t,apiKey:r}){let n=cE[t];if(!n){let s=rx[t];if(!s)throw new Error("Unknown provider: "+t);n=s({apiKey:r}),cE[t]=n}return n(e,{cacheControl:!0})}var fE=function(e,t,r,n){var s;t[0]=0;for(var u=1;u<t.length;u++){var h=t[u++],b=t[u]?(t[0]|=h?1:2,r[t[u++]]):t[++u];h===3?n[0]=b:h===4?n[1]=Object.assign(n[1]||{},b):h===5?(n[1]=n[1]||{})[t[++u]]=b:h===6?n[1][t[++u]]+=b+"":h?(s=e.apply(b,fE(e,b,r,["",null])),n.push(s),b[0]?t[0]|=2:(t[u-2]=0,t[u]=s)):n.push(b)}return n},lE=new Map;function dE(e){var t=lE.get(this);return t||(t=new Map,lE.set(this,t)),(t=fE(this,t.get(e)||(t.set(e,t=function(r){for(var n,s,u=1,h="",b="",N=[0],A=function(Q){u===1&&(Q||(h=h.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?N.push(0,Q,h):u===3&&(Q||h)?(N.push(3,Q,h),u=2):u===2&&h==="..."&&Q?N.push(4,Q,0):u===2&&h&&!Q?N.push(5,0,!0,h):u>=5&&((h||!Q&&u===5)&&(N.push(u,0,h,s),u=6),Q&&(N.push(u,Q,0,s),u=6)),h=""},U=0;U<r.length;U++){U&&(u===1&&A(),A(U));for(var V=0;V<r[U].length;V++)n=r[U][V],u===1?n==="<"?(A(),N=[N],u=3):h+=n:u===4?h==="--"&&n===">"?(u=1,h=""):h=n+h[0]:b?n===b?b="":h+=n:n==='"'||n==="'"?b=n:n===">"?(A(),u=1):u&&(n==="="?(u=5,s=h,h=""):n==="/"&&(u<5||r[U][V+1]===">")?(A(),u===3&&(N=N[0]),u=N,(N=N[0]).push(2,0,u),u=0):n===" "||n==="	"||n===`
`||n==="\r"?(A(),u=2):h+=n),u===3&&h==="!--"&&(u=4,N=N[0])}return A(),N}(e)),t),arguments,[])).length>1?t:t[0]}function l0(e){if(Array.isArray(e))return e.map(l0);if(typeof e!="string")return e;let t=e.split(`
`),r=100;if(t.forEach((n,s)=>{let u=n.match(/^(\s*)\S/);s&&u&&(r=Math.min(r,u[1].length))}),r<100)for(let n=1;n<t.length;n++)t[n]=t[n].slice(r);return t.join(`
`)}function nx(e,t,...r){return{type:e,props:t,children:l0(r)}}var ax=dE.bind(nx);function S_(...e){return l0(ax(...e))}function ah(e,t=""){if(Array.isArray(e))return e.reduce((r,n)=>{let s=ah(n,t);return/^[\n]/.test(s)&&/[\n]$/.test(r)?r+s.slice(1):/^[\s\n]/.test(s)||/[\s\n]$/.test(r)?r+s:r&&s?r+" "+s:r||s||""},"");if((e==null?void 0:e.type)=="markdown"){let{props:r}=e;return r.text}if((e==null?void 0:e.type)=="code"){let{props:r}=e;return"\n```"+(r.type||"")+`
`+r.text+"\n```\n"}if(typeof(e==null?void 0:e.type)=="string"){let{type:r,children:n}=e;return ah([`
`+t+"<"+r+`>
`,ah(n,t+"  "),`
`+t+"</"+r+`>
`])}if(typeof(e==null?void 0:e.type)=="function"){let{type:r,props:n,children:s}=e;return ah(r(n,s),t)}return String(e??"").split(`
`).map(r=>t+r).join(`
`)}var f0=[{provider:"anthropic",family:"claude-3.5-sonnet",id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet",cacheControl:!0},{provider:"openai",family:"gpt-4o",id:"gpt-4o-2024-08-06",name:"GPT 4o"},{provider:"openrouter",family:"claude-3.5-sonnet",id:"anthropic/claude-3.5-sonnet:beta",name:"Claude 3.5 Sonnet",cacheControl:!0},{provider:"openrouter",family:"gpt-4o",id:"openai/gpt-4o-2024-08-06",name:"GPT 4o"}];var pE=[{id:"anthropic",name:"Anthropic",envKeyName:"ANTHROPIC_API_KEY",website:"https://console.anthropic.com"},{id:"openai",name:"OpenAI",envKeyName:"OPENAI_API_KEY",website:"https://platform.openai.com"},{id:"openrouter",name:"Open Router",envKeyName:"OPENROUTER_API_KEY",website:"https://openrouter.ai"}];var mE=Symbol("Let zodToJsonSchema decide on which parser to use"),vE={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},hE=e=>typeof e=="string"?{...vE,name:e}:{...vE,...e};var _E=e=>{let t=hE(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([n,s])=>[s._def,{def:s._def,path:[...t.basePath,t.definitionPath,n],jsonSchema:void 0}]))}};function d0(e,t,r,n){n!=null&&n.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function rn(e,t,r,n,s){e[t]=r,d0(e,t,n,s)}function gE(){return{}}function yE(e,t){var n,s,u;let r={type:"array"};return(n=e.type)!=null&&n._def&&((u=(s=e.type)==null?void 0:s._def)==null?void 0:u.typeName)!==ze.ZodAny&&(r.items=lr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&rn(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&rn(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(rn(r,"minItems",e.exactLength.value,e.exactLength.message,t),rn(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}function SE(e,t){let r={type:"integer",format:"int64"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"min":t.target==="jsonSchema7"?n.inclusive?rn(r,"minimum",n.value,n.message,t):rn(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),rn(r,"minimum",n.value,n.message,t));break;case"max":t.target==="jsonSchema7"?n.inclusive?rn(r,"maximum",n.value,n.message,t):rn(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),rn(r,"maximum",n.value,n.message,t));break;case"multipleOf":rn(r,"multipleOf",n.value,n.message,t);break}return r}function bE(){return{type:"boolean"}}function ey(e,t){return lr(e.type._def,t)}var EE=(e,t)=>lr(e.innerType._def,t);function p0(e,t,r){let n=r??t.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((s,u)=>p0(e,t,s))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return ix(e,t)}}var ix=(e,t)=>{let r={type:"integer",format:"unix-time"};if(t.target==="openApi3")return r;for(let n of e.checks)switch(n.kind){case"min":rn(r,"minimum",n.value,n.message,t);break;case"max":rn(r,"maximum",n.value,n.message,t);break}return r};function wE(e,t){return{...lr(e.innerType._def,t),default:e.defaultValue()}}function TE(e,t){return t.effectStrategy==="input"?lr(e.schema._def,t):{}}function IE(e){return{type:"string",enum:Array.from(e.values)}}var ox=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function NE(e,t){let r=[lr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),lr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(u=>!!u),n=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,s=[];return r.forEach(u=>{if(ox(u))s.push(...u.allOf),u.unevaluatedProperties===void 0&&(n=void 0);else{let h=u;if("additionalProperties"in u&&u.additionalProperties===!1){let{additionalProperties:b,...N}=u;h=N}else n=void 0;s.push(h)}}),s.length?{allOf:s,...n}:void 0}function DE(e,t){let r=typeof e.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[e.value]}:{type:r==="bigint"?"integer":r,const:e.value}}var v0,Rp={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(v0===void 0&&(v0=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),v0),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function ty(e,t){let r={type:"string"};if(e.checks)for(let n of e.checks)switch(n.kind){case"min":rn(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,t);break;case"max":rn(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"email":switch(t.emailStrategy){case"format:email":kp(r,"email",n.message,t);break;case"format:idn-email":kp(r,"idn-email",n.message,t);break;case"pattern:zod":wc(r,Rp.email,n.message,t);break}break;case"url":kp(r,"uri",n.message,t);break;case"uuid":kp(r,"uuid",n.message,t);break;case"regex":wc(r,n.regex,n.message,t);break;case"cuid":wc(r,Rp.cuid,n.message,t);break;case"cuid2":wc(r,Rp.cuid2,n.message,t);break;case"startsWith":wc(r,RegExp(`^${m0(n.value,t)}`),n.message,t);break;case"endsWith":wc(r,RegExp(`${m0(n.value,t)}$`),n.message,t);break;case"datetime":kp(r,"date-time",n.message,t);break;case"date":kp(r,"date",n.message,t);break;case"time":kp(r,"time",n.message,t);break;case"duration":kp(r,"duration",n.message,t);break;case"length":rn(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,t),rn(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"includes":{wc(r,RegExp(m0(n.value,t)),n.message,t);break}case"ip":{n.version!=="v6"&&kp(r,"ipv4",n.message,t),n.version!=="v4"&&kp(r,"ipv6",n.message,t);break}case"base64url":wc(r,Rp.base64url,n.message,t);break;case"jwt":wc(r,Rp.jwt,n.message,t);break;case"cidr":{n.version!=="v6"&&wc(r,Rp.ipv4Cidr,n.message,t),n.version!=="v4"&&wc(r,Rp.ipv6Cidr,n.message,t);break}case"emoji":wc(r,Rp.emoji(),n.message,t);break;case"ulid":{wc(r,Rp.ulid,n.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{kp(r,"binary",n.message,t);break}case"contentEncoding:base64":{rn(r,"contentEncoding","base64",n.message,t);break}case"pattern:zod":{wc(r,Rp.base64,n.message,t);break}}break}case"nanoid":wc(r,Rp.nanoid,n.message,t);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function m0(e,t){return t.patternStrategy==="escape"?ux(e):e}var sx=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function ux(e){let t="";for(let r=0;r<e.length;r++)sx.has(e[r])||(t+="\\"),t+=e[r];return t}function kp(e,t,r,n){var s;e.format||(s=e.anyOf)!=null&&s.some(u=>u.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&n.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):rn(e,"format",t,r,n)}function wc(e,t,r,n){var s;e.pattern||(s=e.allOf)!=null&&s.some(u=>u.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&n.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:CE(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):rn(e,"pattern",CE(t,n),r,n)}function CE(e,t){var N;if(!t.applyRegexFlags||!e.flags)return e.source;let r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=r.i?e.source.toLowerCase():e.source,s="",u=!1,h=!1,b=!1;for(let A=0;A<n.length;A++){if(u){s+=n[A],u=!1;continue}if(r.i){if(h){if(n[A].match(/[a-z]/)){b?(s+=n[A],s+=`${n[A-2]}-${n[A]}`.toUpperCase(),b=!1):n[A+1]==="-"&&((N=n[A+2])!=null&&N.match(/[a-z]/))?(s+=n[A],b=!0):s+=`${n[A]}${n[A].toUpperCase()}`;continue}}else if(n[A].match(/[a-z]/)){s+=`[${n[A]}${n[A].toUpperCase()}]`;continue}}if(r.m){if(n[A]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(n[A]==="$"){s+=`($|(?=[\r
]))`;continue}}if(r.s&&n[A]==="."){s+=h?`${n[A]}\r
`:`[${n[A]}\r
]`;continue}s+=n[A],n[A]==="\\"?u=!0:h&&n[A]==="]"?h=!1:!h&&n[A]==="["&&(h=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return s}function ry(e,t){var n,s,u,h,b,N;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((n=e.keyType)==null?void 0:n._def.typeName)===ze.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((A,U)=>({...A,[U]:lr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",U]})??{}}),{}),additionalProperties:!1};let r={type:"object",additionalProperties:lr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??{}};if(t.target==="openApi3")return r;if(((s=e.keyType)==null?void 0:s._def.typeName)===ze.ZodString&&((u=e.keyType._def.checks)!=null&&u.length)){let{type:A,...U}=ty(e.keyType._def,t);return{...r,propertyNames:U}}else{if(((h=e.keyType)==null?void 0:h._def.typeName)===ze.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(((b=e.keyType)==null?void 0:b._def.typeName)===ze.ZodBranded&&e.keyType._def.type._def.typeName===ze.ZodString&&((N=e.keyType._def.type._def.checks)!=null&&N.length)){let{type:A,...U}=ey(e.keyType._def,t);return{...r,propertyNames:U}}}return r}function xE(e,t){if(t.mapStrategy==="record")return ry(e,t);let r=lr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},n=lr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function PE(e){let t=e.values,n=Object.keys(e.values).filter(u=>typeof t[t[u]]!="number").map(u=>t[u]),s=Array.from(new Set(n.map(u=>typeof u)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:n}}function AE(){return{not:{}}}function RE(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var V_={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function OE(e,t){if(t.target==="openApi3")return kE(e,t);let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(n=>n._def.typeName in V_&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((s,u)=>{let h=V_[u._def.typeName];return h&&!s.includes(h)?[...s,h]:s},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((s,u)=>{let h=typeof u._def.value;switch(h){case"string":case"number":case"boolean":return[...s,h];case"bigint":return[...s,"integer"];case"object":if(u._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(n.length===r.length){let s=n.filter((u,h,b)=>b.indexOf(u)===h);return{type:s.length>1?s:s[0],enum:r.reduce((u,h)=>u.includes(h._def.value)?u:[...u,h._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,s)=>[...n,...s._def.values.filter(u=>!n.includes(u))],[])};return kE(e,t)}var kE=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((n,s)=>lr(n._def,{...t,currentPath:[...t.currentPath,"anyOf",`${s}`]})).filter(n=>!!n&&(!t.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function ME(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:V_[e.innerType._def.typeName],nullable:!0}:{type:[V_[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){let n=lr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let r=lr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function LE(e,t){let r={type:"number"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"int":r.type="integer",d0(r,"type",n.message,t);break;case"min":t.target==="jsonSchema7"?n.inclusive?rn(r,"minimum",n.value,n.message,t):rn(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),rn(r,"minimum",n.value,n.message,t));break;case"max":t.target==="jsonSchema7"?n.inclusive?rn(r,"maximum",n.value,n.message,t):rn(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),rn(r,"maximum",n.value,n.message,t));break;case"multipleOf":rn(r,"multipleOf",n.value,n.message,t);break}return r}function cx(e,t){return t.removeAdditionalStrategy==="strict"?e.catchall._def.typeName==="ZodNever"?e.unknownKeys!=="strict":lr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0:e.catchall._def.typeName==="ZodNever"?e.unknownKeys==="passthrough":lr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0}function FE(e,t){let r=t.target==="openAi",n={type:"object",...Object.entries(e.shape()).reduce((s,[u,h])=>{if(h===void 0||h._def===void 0)return s;let b=h.isOptional();b&&r&&(h instanceof yl&&(h=h._def.innerType),h.isNullable()||(h=h.nullable()),b=!1);let N=lr(h._def,{...t,currentPath:[...t.currentPath,"properties",u],propertyPath:[...t.currentPath,"properties",u]});return N===void 0?s:{properties:{...s.properties,[u]:N},required:b?s.required:[...s.required,u]}},{properties:{},required:[]}),additionalProperties:cx(e,t)};return n.required.length||delete n.required,n}var UE=(e,t)=>{var n;if(t.currentPath.toString()===((n=t.propertyPath)==null?void 0:n.toString()))return lr(e.innerType._def,t);let r=lr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}};var jE=(e,t)=>{if(t.pipeStrategy==="input")return lr(e.in._def,t);if(t.pipeStrategy==="output")return lr(e.out._def,t);let r=lr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),n=lr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(s=>s!==void 0)}};function YE(e,t){return lr(e.type._def,t)}function $E(e,t){let n={type:"array",uniqueItems:!0,items:lr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&rn(n,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&rn(n,"maxItems",e.maxSize.value,e.maxSize.message,t),n}function qE(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,n)=>lr(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:lr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,n)=>lr(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function BE(){return{not:{}}}function zE(){return{}}var GE=(e,t)=>lr(e.innerType._def,t);function lr(e,t,r=!1){var h;let n=t.seen.get(e);if(t.override){let b=(h=t.override)==null?void 0:h.call(t,e,t,n,r);if(b!==mE)return b}if(n&&!r){let b=lx(n,t);if(b!==void 0)return b}let s={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,s);let u=dx(e,e.typeName,t);return u&&px(e,t,u),s.jsonSchema=u,u}var lx=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:fx(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,n)=>t.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},fx=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},dx=(e,t,r)=>{switch(t){case ze.ZodString:return ty(e,r);case ze.ZodNumber:return LE(e,r);case ze.ZodObject:return FE(e,r);case ze.ZodBigInt:return SE(e,r);case ze.ZodBoolean:return bE();case ze.ZodDate:return p0(e,r);case ze.ZodUndefined:return BE();case ze.ZodNull:return RE(r);case ze.ZodArray:return yE(e,r);case ze.ZodUnion:case ze.ZodDiscriminatedUnion:return OE(e,r);case ze.ZodIntersection:return NE(e,r);case ze.ZodTuple:return qE(e,r);case ze.ZodRecord:return ry(e,r);case ze.ZodLiteral:return DE(e,r);case ze.ZodEnum:return IE(e);case ze.ZodNativeEnum:return PE(e);case ze.ZodNullable:return ME(e,r);case ze.ZodOptional:return UE(e,r);case ze.ZodMap:return xE(e,r);case ze.ZodSet:return $E(e,r);case ze.ZodLazy:return lr(e.getter()._def,r);case ze.ZodPromise:return YE(e,r);case ze.ZodNaN:case ze.ZodNever:return AE();case ze.ZodEffects:return TE(e,r);case ze.ZodAny:return gE();case ze.ZodUnknown:return zE();case ze.ZodDefault:return wE(e,r);case ze.ZodBranded:return ey(e,r);case ze.ZodReadonly:return GE(e,r);case ze.ZodCatch:return EE(e,r);case ze.ZodPipeline:return jE(e,r);case ze.ZodFunction:case ze.ZodVoid:case ze.ZodSymbol:return;default:return(n=>{})(t)}},px=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r);var VE=(e,t)=>{let r=_E(t),n=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((N,[A,U])=>({...N,[A]:lr(U._def,{...r,currentPath:[...r.basePath,r.definitionPath,A]},!0)??{}}),{}):void 0,s=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,u=lr(e._def,s===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,s]},!1)??{},h=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;h!==void 0&&(u.title=h);let b=s===void 0?n?{...u,[r.definitionPath]:n}:u:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,s].join("/"),[r.definitionPath]:{...n,[s]:u}};return r.target==="jsonSchema7"?b.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(b.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in b||"oneOf"in b||"allOf"in b||"type"in b&&Array.isArray(b.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),b};var HE=VE;var H_={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},K_={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},W_={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},J_={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},Z_={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},vx=[H_,K_,W_,J_,Z_],wF={[H_.code]:H_,[K_.code]:K_,[W_.code]:W_,[J_.code]:J_,[Z_.code]:Z_},TF={[H_.name]:H_.code,[K_.name]:K_.code,[W_.name]:W_.code,[J_.name]:J_.code,[Z_.name]:Z_.code},IF=vx.map(e=>e.code);function mx(e){let t=["ROOT"],r=-1,n=null;function s(N,A,U){switch(N){case'"':{r=A,t.pop(),t.push(U),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=A,n=A,t.pop(),t.push(U),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(U),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=A,t.pop(),t.push(U),t.push("INSIDE_NUMBER");break}case"{":{r=A,t.pop(),t.push(U),t.push("INSIDE_OBJECT_START");break}case"[":{r=A,t.pop(),t.push(U),t.push("INSIDE_ARRAY_START");break}}}function u(N,A){switch(N){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=A,t.pop();break}}}function h(N,A){switch(N){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=A,t.pop();break}}}for(let N=0;N<e.length;N++){let A=e[N];switch(t[t.length-1]){case"ROOT":s(A,N,"FINISH");break;case"INSIDE_OBJECT_START":{switch(A){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{r=N,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(A){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(A){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(A){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{s(A,N,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{u(A,N);break}case"INSIDE_STRING":{switch(A){case'"':{t.pop(),r=N;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:r=N}break}case"INSIDE_ARRAY_START":{switch(A){case"]":{r=N,t.pop();break}default:{r=N,s(A,N,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(A){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=N,t.pop();break}default:{r=N;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{s(A,N,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),r=N;break}case"INSIDE_NUMBER":{switch(A){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=N;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&h(A,N),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&u(A,N);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&u(A,N);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&h(A,N);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{let V=e.substring(n,N+1);!"false".startsWith(V)&&!"true".startsWith(V)&&!"null".startsWith(V)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?u(A,N):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&h(A,N)):r=N;break}}}let b=e.slice(0,r+1);for(let N=t.length-1;N>=0;N--)switch(t[N]){case"INSIDE_STRING":{b+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{b+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{b+="]";break}case"INSIDE_LITERAL":{let U=e.substring(n,e.length);"true".startsWith(U)?b+="true".slice(U.length):"false".startsWith(U)?b+="false".slice(U.length):"null".startsWith(U)&&(b+="null".slice(U.length))}}return b}function KE(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=Cv({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=Cv({text:mx(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var X_={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Q_={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},eg={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},tg={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},rg={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},ng={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},ag={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},ig={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},og={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},sg={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},ug={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},cg={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},WE=[X_,Q_,eg,tg,rg,ng,ag,ig,og,sg,ug,cg],DF={[X_.code]:X_,[Q_.code]:Q_,[eg.code]:eg,[tg.code]:tg,[rg.code]:rg,[ng.code]:ng,[ag.code]:ag,[ig.code]:ig,[og.code]:og,[sg.code]:sg,[ug.code]:ug,[cg.code]:cg},CF={[X_.name]:X_.code,[Q_.name]:Q_.code,[eg.name]:eg.code,[tg.name]:tg.code,[rg.name]:rg.code,[ng.name]:ng.code,[ag.name]:ag.code,[ig.name]:ig.code,[og.name]:og.code,[sg.name]:sg.code,[ug.name]:ug.code,[cg.name]:cg.code},xF=WE.map(e=>e.code);function Tc(e,t){let r=WE.find(n=>n.name===e);if(!r)throw new Error(`Invalid stream part type: ${e}`);return`${r.code}:${JSON.stringify(t)}
`}function hx(e){return _x(HE(e,{$refStrategy:"none",target:"jsonSchema7"}),{validate:t=>{let r=e.safeParse(t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}var h0=Symbol.for("vercel.ai.schema");function _x(e,{validate:t}={}){return{[h0]:!0,_type:void 0,[Y_]:!0,jsonSchema:e,validate:t}}function gx(e){return typeof e=="object"&&e!==null&&h0 in e&&e[h0]===!0&&"jsonSchema"in e&&"validate"in e}function Yh(e){return gx(e)?e:hx(e)}var JE=typeof globalThis=="object"?globalThis:global;var Sm="1.9.0";var ZE=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function yx(e){var t=new Set([e]),r=new Set,n=e.match(ZE);if(!n)return function(){return!1};var s={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(s.prerelease!=null)return function(N){return N===e};function u(b){return r.add(b),!1}function h(b){return t.add(b),!0}return function(N){if(t.has(N))return!0;if(r.has(N))return!1;var A=N.match(ZE);if(!A)return u(N);var U={major:+A[1],minor:+A[2],patch:+A[3],prerelease:A[4]};return U.prerelease!=null||s.major!==U.major?u(N):s.major===0?s.minor===U.minor&&s.patch<=U.patch?h(N):u(N):s.minor<=U.minor?h(N):u(N)}}var XE=yx(Sm);var Sx=Sm.split(".")[0],lg=Symbol.for("opentelemetry.js.api."+Sx),fg=JE;function b_(e,t,r,n){var s;n===void 0&&(n=!1);var u=fg[lg]=(s=fg[lg])!==null&&s!==void 0?s:{version:Sm};if(!n&&u[e]){var h=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(h.stack||h.message),!1}if(u.version!==Sm){var h=new Error("@opentelemetry/api: Registration of version v"+u.version+" for "+e+" does not match previously registered API v"+Sm);return r.error(h.stack||h.message),!1}return u[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+Sm+"."),!0}function bm(e){var t,r,n=(t=fg[lg])===null||t===void 0?void 0:t.version;if(!(!n||!XE(n)))return(r=fg[lg])===null||r===void 0?void 0:r[e]}function E_(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Sm+".");var r=fg[lg];r&&delete r[e]}var bx=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,u=[],h;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)u.push(s.value)}catch(b){h={error:b}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(h)throw h.error}}return u},Ex=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,u;n<s;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return e.concat(u||Array.prototype.slice.call(t))},QE=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return dg("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return dg("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return dg("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return dg("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return dg("verbose",this._namespace,t)},e}();function dg(e,t,r){var n=bm("diag");if(n)return r.unshift(t),n[e].apply(n,Ex([],bx(r),!1))}var Ic;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Ic||(Ic={}));function ew(e,t){e<Ic.NONE?e=Ic.NONE:e>Ic.ALL&&(e=Ic.ALL),t=t||{};function r(n,s){var u=t[n];return typeof u=="function"&&e>=s?u.bind(t):function(){}}return{error:r("error",Ic.ERROR),warn:r("warn",Ic.WARN),info:r("info",Ic.INFO),debug:r("debug",Ic.DEBUG),verbose:r("verbose",Ic.VERBOSE)}}var wx=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,u=[],h;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)u.push(s.value)}catch(b){h={error:b}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(h)throw h.error}}return u},Tx=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,u;n<s;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return e.concat(u||Array.prototype.slice.call(t))},Ix="diag",w_=function(){function e(){function t(s){return function(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];var b=bm("diag");if(b)return b[s].apply(b,Tx([],wx(u),!1))}}var r=this,n=function(s,u){var h,b,N;if(u===void 0&&(u={logLevel:Ic.INFO}),s===r){var A=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((h=A.stack)!==null&&h!==void 0?h:A.message),!1}typeof u=="number"&&(u={logLevel:u});var U=bm("diag"),V=ew((b=u.logLevel)!==null&&b!==void 0?b:Ic.INFO,s);if(U&&!u.suppressOverrideMessage){var Q=(N=new Error().stack)!==null&&N!==void 0?N:"<failed to generate stacktrace>";U.warn("Current logger will be overwritten from "+Q),V.warn("Current logger will overwrite one already registered from "+Q)}return b_("diag",V,r,!0)};r.setLogger=n,r.disable=function(){E_(Ix,r)},r.createComponentLogger=function(s){return new QE(s)},r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function tw(e){return Symbol.for(e)}var Nx=function(){function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,s){var u=new e(r._currentContext);return u._currentContext.set(n,s),u},r.deleteValue=function(n){var s=new e(r._currentContext);return s._currentContext.delete(n),s}}return e}(),rw=new Nx;var Dx=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,u=[],h;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)u.push(s.value)}catch(b){h={error:b}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(h)throw h.error}}return u},Cx=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,u;n<s;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return e.concat(u||Array.prototype.slice.call(t))},nw=function(){function e(){}return e.prototype.active=function(){return rw},e.prototype.with=function(t,r,n){for(var s=[],u=3;u<arguments.length;u++)s[u-3]=arguments[u];return r.call.apply(r,Cx([n],Dx(s),!1))},e.prototype.bind=function(t,r){return r},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}();var xx=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,u=[],h;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)u.push(s.value)}catch(b){h={error:b}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(h)throw h.error}}return u},Px=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,u;n<s;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return e.concat(u||Array.prototype.slice.call(t))},_0="context",Ax=new nw,ny=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return b_(_0,t,w_.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,r,n){for(var s,u=[],h=3;h<arguments.length;h++)u[h-3]=arguments[h];return(s=this._getContextManager()).with.apply(s,Px([t,r,n],xx(u),!1))},e.prototype.bind=function(t,r){return this._getContextManager().bind(t,r)},e.prototype._getContextManager=function(){return bm(_0)||Ax},e.prototype.disable=function(){this._getContextManager().disable(),E_(_0,w_.instance())},e}();var ay;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(ay||(ay={}));var g0="0000000000000000",y0="00000000000000000000000000000000",aw={traceId:y0,spanId:g0,traceFlags:ay.NONE};var ih=function(){function e(t){t===void 0&&(t=aw),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,r){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,r){},e}();var S0=tw("OpenTelemetry Context Key SPAN");function iy(e){return e.getValue(S0)||void 0}function iw(){return iy(ny.getInstance().active())}function pg(e,t){return e.setValue(S0,t)}function ow(e){return e.deleteValue(S0)}function sw(e,t){return pg(e,new ih(t))}function oy(e){var t;return(t=iy(e))===null||t===void 0?void 0:t.spanContext()}var Rx=/^([0-9a-f]{32})$/i,kx=/^[0-9a-f]{16}$/i;function Ox(e){return Rx.test(e)&&e!==y0}function Mx(e){return kx.test(e)&&e!==g0}function sy(e){return Ox(e.traceId)&&Mx(e.spanId)}function uw(e){return new ih(e)}var b0=ny.getInstance(),uy=function(){function e(){}return e.prototype.startSpan=function(t,r,n){n===void 0&&(n=b0.active());var s=!!(r!=null&&r.root);if(s)return new ih;var u=n&&oy(n);return Lx(u)&&sy(u)?new ih(u):new ih},e.prototype.startActiveSpan=function(t,r,n,s){var u,h,b;if(!(arguments.length<2)){arguments.length===2?b=r:arguments.length===3?(u=r,b=n):(u=r,h=n,b=s);var N=h??b0.active(),A=this.startSpan(t,u,N),U=pg(N,A);return b0.with(U,b,void 0,A)}},e}();function Lx(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var Fx=new uy,cw=function(){function e(t,r,n,s){this._provider=t,this.name=r,this.version=n,this.options=s}return e.prototype.startSpan=function(t,r,n){return this._getTracer().startSpan(t,r,n)},e.prototype.startActiveSpan=function(t,r,n,s){var u=this._getTracer();return Reflect.apply(u.startActiveSpan,u,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Fx},e}();var lw=function(){function e(){}return e.prototype.getTracer=function(t,r,n){return new uy},e}();var Ux=new lw,E0=function(){function e(){}return e.prototype.getTracer=function(t,r,n){var s;return(s=this.getDelegateTracer(t,r,n))!==null&&s!==void 0?s:new cw(this,t,r,n)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:Ux},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,r,n){var s;return(s=this._delegate)===null||s===void 0?void 0:s.getTracer(t,r,n)},e}();var T_;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(T_||(T_={}));var w0="trace",fw=function(){function e(){this._proxyTracerProvider=new E0,this.wrapSpanContext=uw,this.isSpanContextValid=sy,this.deleteSpan=ow,this.getSpan=iy,this.getActiveSpan=iw,this.getSpanContext=oy,this.setSpan=pg,this.setSpanContext=sw}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var r=b_(w0,this._proxyTracerProvider,w_.instance());return r&&this._proxyTracerProvider.setDelegate(t),r},e.prototype.getTracerProvider=function(){return bm(w0)||this._proxyTracerProvider},e.prototype.getTracer=function(t,r){return this.getTracerProvider().getTracer(t,r)},e.prototype.disable=function(){E_(w0,w_.instance()),this._proxyTracerProvider=new E0},e}();var T0=fw.getInstance();var jx=Object.defineProperty,P0=(e,t)=>{for(var r in t)jx(e,r,{get:t[r],enumerable:!0})};function ly(e,{contentType:t,dataStreamVersion:r}){let n=new Headers(e??{});return n.has("Content-Type")||n.set("Content-Type",t),r!==void 0&&n.set("X-Vercel-AI-Data-Stream",r),n}function dw(e,{contentType:t,dataStreamVersion:r}){let n={};if(e!=null)for(let[s,u]of Object.entries(e))n[s]=u;return n["Content-Type"]==null&&(n["Content-Type"]=t),r!==void 0&&(n["X-Vercel-AI-Data-Stream"]=r),n}function pw({response:e,status:t,statusText:r,headers:n,stream:s}){e.writeHead(t??200,r,n);let u=s.getReader();(async()=>{try{for(;;){let{done:b,value:N}=await u.read();if(b)break;e.write(N)}}catch(b){throw b}finally{e.end()}})()}var Ew="AI_InvalidArgumentError",ww=`vercel.ai.error.${Ew}`,Yx=Symbol.for(ww),Tw,Mp=class extends Mt{constructor({parameter:e,value:t,message:r}){super({name:Ew,message:`Invalid argument for parameter ${e}: ${r}`}),this[Tw]=!0,this.parameter=e,this.value=t}static isInstance(e){return Mt.hasMarker(e,ww)}};Tw=Yx;var Iw="AI_RetryError",Nw=`vercel.ai.error.${Iw}`,$x=Symbol.for(Nw),Dw,vw=class extends Mt{constructor({message:e,reason:t,errors:r}){super({name:Iw,message:e}),this[Dw]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return Mt.hasMarker(e,Nw)}};Dw=$x;var qx=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:r=2}={})=>async n=>Cw(n,{maxRetries:e,delayInMs:t,backoffFactor:r});async function Cw(e,{maxRetries:t,delayInMs:r,backoffFactor:n},s=[]){try{return await e()}catch(u){if(j_(u)||t===0)throw u;let h=jb(u),b=[...s,u],N=b.length;if(N>t)throw new vw({message:`Failed after ${N} attempts. Last error: ${h}`,reason:"maxRetriesExceeded",errors:b});if(u instanceof Error&&gl.isInstance(u)&&u.isRetryable===!0&&N<=t)return await Ub(r),Cw(e,{maxRetries:t,delayInMs:n*r,backoffFactor:n},b);throw N===1?u:new vw({message:`Failed after ${N} attempts with non-retryable error: '${h}'`,reason:"errorNotRetryable",errors:b})}}function Bx({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new Mp({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Mp({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}let t=e??2;return{maxRetries:t,retry:qx({maxRetries:t})}}function D0({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function zx({model:e,settings:t,telemetry:r,headers:n}){var s;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((u,[h,b])=>(u[`ai.settings.${h}`]=b,u),{}),...Object.entries((s=r==null?void 0:r.metadata)!=null?s:{}).reduce((u,[h,b])=>(u[`ai.telemetry.metadata.${h}`]=b,u),{}),...Object.entries(n??{}).reduce((u,[h,b])=>(b!==void 0&&(u[`ai.request.headers.${h}`]=b),u),{})}}var Gx={startSpan(){return cy},startActiveSpan(e,t,r,n){if(typeof t=="function")return t(cy);if(typeof r=="function")return r(cy);if(typeof n=="function")return n(cy)}},cy={spanContext(){return Vx},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},Vx={traceId:"",spanId:"",traceFlags:0};function Hx({isEnabled:e=!1,tracer:t}={}){return e?t||T0.getTracer("ai"):Gx}function C0({name:e,tracer:t,attributes:r,fn:n,endWhenDone:s=!0}){return t.startActiveSpan(e,{attributes:r},async u=>{try{let h=await n(u);return s&&u.end(),h}catch(h){try{h instanceof Error?(u.recordException({name:h.name,message:h.message,stack:h.stack}),u.setStatus({code:T_.ERROR,message:h.message})):u.setStatus({code:T_.ERROR})}finally{u.end()}throw h}})}function I_({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((r,[n,s])=>{if(s===void 0)return r;if(typeof s=="object"&&"input"in s&&typeof s.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return r;let u=s.input();return u===void 0?r:{...r,[n]:u}}if(typeof s=="object"&&"output"in s&&typeof s.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return r;let u=s.output();return u===void 0?r:{...r,[n]:u}}return{...r,[n]:s}},{})}var Kx="AI_NoImageGeneratedError",Wx=`vercel.ai.error.${Kx}`,Jx=Symbol.for(Wx),Zx;Zx=Jx;var xw="AI_NoObjectGeneratedError",Pw=`vercel.ai.error.${xw}`,Xx=Symbol.for(Pw),Aw,mw=class extends Mt{constructor({message:e="No object generated.",cause:t,text:r,response:n,usage:s}){super({name:xw,message:e,cause:t}),this[Aw]=!0,this.text=r,this.response=n,this.usage=s}static isInstance(e){return Mt.hasMarker(e,Pw)}};Aw=Xx;var Rw="AI_DownloadError",kw=`vercel.ai.error.${Rw}`,Qx=Symbol.for(kw),Ow,I0=class extends Mt{constructor({url:e,statusCode:t,statusText:r,cause:n,message:s=n==null?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${n}`}){super({name:Rw,message:s,cause:n}),this[Ow]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return Mt.hasMarker(e,kw)}};Ow=Qx;async function eP({url:e,fetchImplementation:t=fetch}){var r;let n=e.toString();try{let s=await t(n);if(!s.ok)throw new I0({url:n,statusCode:s.status,statusText:s.statusText});return{data:new Uint8Array(await s.arrayBuffer()),mimeType:(r=s.headers.get("content-type"))!=null?r:void 0}}catch(s){throw I0.isInstance(s)?s:new I0({url:n,cause:s})}}var tP=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}];function rP(e){for(let{bytes:t,mimeType:r}of tP)if(e.length>=t.length&&t.every((n,s)=>e[s]===n))return r}var Mw="AI_InvalidDataContentError",Lw=`vercel.ai.error.${Mw}`,nP=Symbol.for(Lw),Fw,hw=class extends Mt{constructor({content:e,cause:t,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:Mw,message:r,cause:t}),this[Fw]=!0,this.content=e}static isInstance(e){return Mt.hasMarker(e,Lw)}};Fw=nP;var Uw=O.union([O.string(),O.instanceof(Uint8Array),O.instanceof(ArrayBuffer),O.custom(e=>{var t,r;return(r=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?r:!1},{message:"Must be a Buffer"})]);function aP(e){return typeof e=="string"?e:e instanceof ArrayBuffer?wh(new Uint8Array(e)):wh(e)}function fy(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return $b(e)}catch(t){throw new hw({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new hw({content:e})}function iP(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var jw="AI_InvalidMessageRoleError",Yw=`vercel.ai.error.${jw}`,oP=Symbol.for(Yw),$w,sP=class extends Mt{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:jw,message:t}),this[$w]=!0,this.role=e}static isInstance(e){return Mt.hasMarker(e,Yw)}};$w=oP;function uP(e){try{let[t,r]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:r}}catch{return{mimeType:void 0,base64Content:void 0}}}async function cP({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:r=()=>!1,downloadImplementation:n=eP}){let s=await fP(e.messages,n,t,r);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(u=>lP(u,s))]}function lP(e,t){let r=e.role;switch(r){case"system":return{role:"system",content:e.content,providerMetadata:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:e.experimental_providerMetadata}:{role:"user",content:e.content.map(n=>dP(n,t)).filter(n=>n.type!=="text"||n.text!==""),providerMetadata:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(n=>n.type!=="text"||n.text!=="").map(n=>{let{experimental_providerMetadata:s,...u}=n;return{...u,providerMetadata:s}}),providerMetadata:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(n=>({type:"tool-result",toolCallId:n.toolCallId,toolName:n.toolName,result:n.result,content:n.experimental_content,isError:n.isError,providerMetadata:n.experimental_providerMetadata})),providerMetadata:e.experimental_providerMetadata};default:{let n=r;throw new sP({role:n})}}}async function fP(e,t,r,n){let s=e.filter(h=>h.role==="user").map(h=>h.content).filter(h=>Array.isArray(h)).flat().filter(h=>h.type==="image"||h.type==="file").filter(h=>!(h.type==="image"&&r===!0)).map(h=>h.type==="image"?h.image:h.data).map(h=>typeof h=="string"&&(h.startsWith("http:")||h.startsWith("https:"))?new URL(h):h).filter(h=>h instanceof URL).filter(h=>!n(h)),u=await Promise.all(s.map(async h=>({url:h,data:await t({url:h})})));return Object.fromEntries(u.map(({url:h,data:b})=>[h.toString(),b]))}function dP(e,t){var r;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:e.experimental_providerMetadata};let n=e.mimeType,s,u,h,b=e.type;switch(b){case"image":s=e.image;break;case"file":s=e.data;break;default:throw new Error(`Unsupported part type: ${b}`)}try{u=typeof s=="string"?new URL(s):s}catch{u=s}if(u instanceof URL)if(u.protocol==="data:"){let{mimeType:N,base64Content:A}=uP(u.toString());if(N==null||A==null)throw new Error(`Invalid data URL format in part ${b}`);n=N,h=fy(A)}else{let N=t[u.toString()];N?(h=N.data,n??(n=N.mimeType)):h=u}else h=fy(u);switch(b){case"image":return h instanceof Uint8Array&&(n=(r=rP(h))!=null?r:n),{type:"image",image:h,mimeType:n,providerMetadata:e.experimental_providerMetadata};case"file":{if(n==null)throw new Error("Mime type is missing for file part");return{type:"file",data:h instanceof Uint8Array?aP(h):h,mimeType:n,providerMetadata:e.experimental_providerMetadata}}}}function pP({maxTokens:e,temperature:t,topP:r,topK:n,presencePenalty:s,frequencyPenalty:u,stopSequences:h,seed:b}){if(e!=null){if(!Number.isInteger(e))throw new Mp({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new Mp({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Mp({parameter:"temperature",value:t,message:"temperature must be a number"});if(r!=null&&typeof r!="number")throw new Mp({parameter:"topP",value:r,message:"topP must be a number"});if(n!=null&&typeof n!="number")throw new Mp({parameter:"topK",value:n,message:"topK must be a number"});if(s!=null&&typeof s!="number")throw new Mp({parameter:"presencePenalty",value:s,message:"presencePenalty must be a number"});if(u!=null&&typeof u!="number")throw new Mp({parameter:"frequencyPenalty",value:u,message:"frequencyPenalty must be a number"});if(b!=null&&!Number.isInteger(b))throw new Mp({parameter:"seed",value:b,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:r,topK:n,presencePenalty:s,frequencyPenalty:u,stopSequences:h!=null&&h.length>0?h:void 0,seed:b}}function vP(e){var t,r,n;let s=[];for(let u of e){let h;try{h=new URL(u.url)}catch{throw new Error(`Invalid URL: ${u.url}`)}switch(h.protocol){case"http:":case"https:":{if((t=u.contentType)!=null&&t.startsWith("image/"))s.push({type:"image",image:h});else{if(!u.contentType)throw new Error("If the attachment is not an image, it must specify a content type");s.push({type:"file",data:h,mimeType:u.contentType})}break}case"data:":{let b,N,A;try{[b,N]=u.url.split(","),A=b.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${u.url}`)}if(A==null||N==null)throw new Error(`Invalid data URL format: ${u.url}`);if((r=u.contentType)!=null&&r.startsWith("image/"))s.push({type:"image",image:fy(N)});else if((n=u.contentType)!=null&&n.startsWith("text/"))s.push({type:"text",text:iP(fy(N))});else{if(!u.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");s.push({type:"file",data:N,mimeType:u.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${h.protocol}`)}}return s}var qw="AI_MessageConversionError",Bw=`vercel.ai.error.${qw}`,mP=Symbol.for(Bw),zw,_w=class extends Mt{constructor({originalMessage:e,message:t}){super({name:qw,message:t}),this[zw]=!0,this.originalMessage=e}static isInstance(e){return Mt.hasMarker(e,Bw)}};zw=mP;function hP(e,t){var r;let n=(r=t==null?void 0:t.tools)!=null?r:{},s=[];for(let u of e){let{role:h,content:b,toolInvocations:N,experimental_attachments:A}=u;switch(h){case"system":{s.push({role:"system",content:b});break}case"user":{s.push({role:"user",content:A?[{type:"text",text:b},...vP(A)]:b});break}case"assistant":{if(N==null||N.length===0){s.push({role:"assistant",content:b});break}s.push({role:"assistant",content:[{type:"text",text:b},...N.map(({toolCallId:U,toolName:V,args:Q})=>({type:"tool-call",toolCallId:U,toolName:V,args:Q}))]}),s.push({role:"tool",content:N.map(U=>{if(!("result"in U))throw new _w({originalMessage:u,message:"ToolInvocation must have a result: "+JSON.stringify(U)});let{toolCallId:V,toolName:Q,result:pe}=U,de=n[Q];return(de==null?void 0:de.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:V,toolName:Q,result:de.experimental_toToolResultContent(pe),experimental_content:de.experimental_toToolResultContent(pe)}:{type:"tool-result",toolCallId:V,toolName:Q,result:pe}})});break}case"data":break;default:{let U=h;throw new _w({originalMessage:u,message:`Unsupported role: ${U}`})}}}return s}function _P(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";let t=e.map(gP);return t.some(r=>r==="has-ui-specific-parts")?"ui-messages":t.every(r=>r==="has-core-specific-parts"||r==="message")?"messages":"other"}function gP(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var x0=O.lazy(()=>O.union([O.null(),O.string(),O.number(),O.boolean(),O.record(O.string(),x0),O.array(x0)])),oh=O.record(O.string(),O.record(O.string(),x0)),yP=O.array(O.union([O.object({type:O.literal("text"),text:O.string()}),O.object({type:O.literal("image"),data:O.string(),mimeType:O.string().optional()})])),Gw=O.object({type:O.literal("text"),text:O.string(),experimental_providerMetadata:oh.optional()}),SP=O.object({type:O.literal("image"),image:O.union([Uw,O.instanceof(URL)]),mimeType:O.string().optional(),experimental_providerMetadata:oh.optional()}),bP=O.object({type:O.literal("file"),data:O.union([Uw,O.instanceof(URL)]),mimeType:O.string(),experimental_providerMetadata:oh.optional()}),EP=O.object({type:O.literal("tool-call"),toolCallId:O.string(),toolName:O.string(),args:O.unknown()}),wP=O.object({type:O.literal("tool-result"),toolCallId:O.string(),toolName:O.string(),result:O.unknown(),content:yP.optional(),isError:O.boolean().optional(),experimental_providerMetadata:oh.optional()}),TP=O.object({role:O.literal("system"),content:O.string(),experimental_providerMetadata:oh.optional()}),IP=O.object({role:O.literal("user"),content:O.union([O.string(),O.array(O.union([Gw,SP,bP]))]),experimental_providerMetadata:oh.optional()}),NP=O.object({role:O.literal("assistant"),content:O.union([O.string(),O.array(O.union([Gw,EP]))]),experimental_providerMetadata:oh.optional()}),DP=O.object({role:O.literal("tool"),content:O.array(wP),experimental_providerMetadata:oh.optional()}),CP=O.union([TP,IP,NP,DP]);function xP({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new Dv({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new Dv({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new Dv({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new Dv({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){let r=_P(e.messages);if(r==="other")throw new Dv({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});let n=r==="ui-messages"?hP(e.messages,{tools:t}):e.messages,s=eh({value:n,schema:O.array(CP)});if(!s.success)throw new Dv({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:s.error});return{type:"messages",messages:n,system:e.system}}throw new Error("unreachable")}function PP({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function AP(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var RP="JSON schema:",kP="You MUST answer with a JSON object that matches the JSON schema above.",OP="You MUST answer with JSON.";function MP({prompt:e,schema:t,schemaPrefix:r=t!=null?RP:void 0,schemaSuffix:n=t!=null?kP:OP}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,r,t!=null?JSON.stringify(t):void 0,n].filter(s=>s!=null).join(`
`)}function N0(e){let t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{let r=t.getReader();return{async next(){let{done:n,value:s}=await r.read();return n?{done:!0,value:void 0}:{done:!1,value:s}}}},t}var cU=Pp({prefix:"aiobj",size:24});var Op=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function gw(){let e,t;return{promise:new Promise((n,s)=>{e=n,t=s}),resolve:e,reject:t}}function LP(){let e=[],t=null,r=!1,n=gw(),s=async()=>{if(r&&e.length===0){t==null||t.close();return}if(e.length===0)return n=gw(),await n.promise,s();try{let{value:u,done:h}=await e[0].read();h?(e.shift(),e.length>0?await s():r&&(t==null||t.close())):t==null||t.enqueue(u)}catch(u){t==null||t.error(u),e.shift(),r&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(u){t=u},pull:s,async cancel(){for(let u of e)await u.cancel();e=[],r=!0}}),addStream:u=>{if(r)throw new Error("Cannot add inner stream: outer stream is closed");e.push(u.getReader()),n.resolve()},close:()=>{r=!0,n.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{r=!0,n.resolve(),e.forEach(u=>u.cancel()),e=[],t==null||t.close()}}}function FP(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}var fU=Pp({prefix:"aiobj",size:24});var Vw="AI_NoOutputSpecifiedError",Hw=`vercel.ai.error.${Vw}`,UP=Symbol.for(Hw),Kw,jP=class extends Mt{constructor({message:e="No output specified."}={}){super({name:Vw,message:e}),this[Kw]=!0}static isInstance(e){return Mt.hasMarker(e,Hw)}};Kw=UP;var Ww="AI_ToolExecutionError",Jw=`vercel.ai.error.${Ww}`,YP=Symbol.for(Jw),Zw,$P=class extends Mt{constructor({toolArgs:e,toolName:t,toolCallId:r,cause:n,message:s=`Error executing tool ${t}: ${Qm(n)}`}){super({name:Ww,message:s,cause:n}),this[Zw]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=r}static isInstance(e){return Mt.hasMarker(e,Jw)}};Zw=YP;function qP(e){return e!=null&&Object.keys(e).length>0}function BP({tools:e,toolChoice:t,activeTools:r}){return qP(e)?{tools:(r!=null?Object.entries(e).filter(([s])=>r.includes(s)):Object.entries(e)).map(([s,u])=>{let h=u.type;switch(h){case void 0:case"function":return{type:"function",name:s,description:u.description,parameters:Yh(u.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:s,id:u.id,args:u.args};default:{let b=h;throw new Error(`Unsupported tool type: ${b}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var zP=/^([\s\S]*?)(\s+)(\S*)$/;function GP(e){let t=e.match(zP);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var Xw="AI_InvalidToolArgumentsError",Qw=`vercel.ai.error.${Xw}`,VP=Symbol.for(Qw),eT,N_=class extends Mt{constructor({toolArgs:e,toolName:t,cause:r,message:n=`Invalid arguments for tool ${t}: ${Qm(r)}`}){super({name:Xw,message:n,cause:r}),this[eT]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return Mt.hasMarker(e,Qw)}};eT=VP;var tT="AI_NoSuchToolError",rT=`vercel.ai.error.${tT}`,HP=Symbol.for(rT),nT,$h=class extends Mt{constructor({toolName:e,availableTools:t=void 0,message:r=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:tT,message:r}),this[nT]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return Mt.hasMarker(e,rT)}};nT=HP;var aT="AI_ToolCallRepairError",iT=`vercel.ai.error.${aT}`,KP=Symbol.for(iT),oT,A0=class extends Mt{constructor({cause:e,originalError:t,message:r=`Error repairing tool call: ${Qm(e)}`}){super({name:aT,message:r,cause:e}),this[oT]=!0,this.originalError=t}static isInstance(e){return Mt.hasMarker(e,iT)}};oT=KP;async function WP({toolCall:e,tools:t,repairToolCall:r,system:n,messages:s}){if(t==null)throw new $h({toolName:e.toolName});try{return await yw({toolCall:e,tools:t})}catch(u){if(r==null||!($h.isInstance(u)||N_.isInstance(u)))throw u;let h=null;try{h=await r({toolCall:e,tools:t,parameterSchema:({toolName:b})=>Yh(t[b].parameters).jsonSchema,system:n,messages:s,error:u})}catch(b){throw new A0({cause:b,originalError:u})}if(h==null)throw u;return await yw({toolCall:h,tools:t})}}async function yw({toolCall:e,tools:t}){let r=e.toolName,n=t[r];if(n==null)throw new $h({toolName:e.toolName,availableTools:Object.keys(t)});let s=Yh(n.parameters),u=e.args.trim()===""?eh({value:{},schema:s}):Cv({text:e.args,schema:s});if(u.success===!1)throw new N_({toolName:r,toolArgs:e.args,cause:u.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:r,args:u.value}}function Sw({text:e="",tools:t,toolCalls:r,toolResults:n,messageId:s,generateMessageId:u}){let h=[];return h.push({role:"assistant",content:[{type:"text",text:e},...r],id:s}),n.length>0&&h.push({role:"tool",id:u(),content:n.map(b=>{let N=t[b.toolName];return(N==null?void 0:N.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:b.toolCallId,toolName:b.toolName,result:N.experimental_toToolResultContent(b.result),experimental_content:N.experimental_toToolResultContent(b.result)}:{type:"tool-result",toolCallId:b.toolCallId,toolName:b.toolName,result:b.result}})}),h}var bU=Pp({prefix:"aitxt",size:24}),EU=Pp({prefix:"msg",size:24});var JP={};P0(JP,{object:()=>XP,text:()=>ZP});var ZP=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),XP=({schema:e})=>{let t=Yh(e);return{type:"object",responseFormat:({model:r})=>({type:"json",schema:r.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:r,model:n}){return n.supportsStructuredOutputs?r:MP({prompt:r,schema:t.jsonSchema})},parsePartial({text:r}){let n=KE(r);switch(n.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:n.value};default:{let s=n.state;throw new Error(`Unsupported parse state: ${s}`)}}},parseOutput({text:r},n){let s=Cv({text:r});if(!s.success)throw new mw({message:"No object generated: could not parse the response.",cause:s.error,text:r,response:n.response,usage:n.usage});let u=eh({value:s.value,schema:t});if(!u.success)throw new mw({message:"No object generated: response did not match schema.",cause:u.error,text:r,response:n.response,usage:n.usage});return u.value}}};function QP(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function R0(e,t){let r=e.getReader(),n=t.getReader(),s,u,h=!1,b=!1;async function N(U){try{s==null&&(s=r.read());let V=await s;s=void 0,V.done?U.close():U.enqueue(V.value)}catch(V){U.error(V)}}async function A(U){try{u==null&&(u=n.read());let V=await u;u=void 0,V.done?U.close():U.enqueue(V.value)}catch(V){U.error(V)}}return new ReadableStream({async pull(U){try{if(h){await A(U);return}if(b){await N(U);return}s==null&&(s=r.read()),u==null&&(u=n.read());let{result:V,reader:Q}=await Promise.race([s.then(pe=>({result:pe,reader:r})),u.then(pe=>({result:pe,reader:n}))]);V.done||U.enqueue(V.value),Q===r?(s=void 0,V.done&&(await A(U),h=!0)):(u=void 0,V.done&&(b=!0,await N(U)))}catch(V){U.error(V)}},cancel(){r.cancel(),n.cancel()}})}function eA({tools:e,generatorStream:t,toolCallStreaming:r,tracer:n,telemetry:s,system:u,messages:h,abortSignal:b,repairToolCall:N}){let A=null,U=new ReadableStream({start(ye){A=ye}}),V={},Q=new Set,pe=!1,de;function ue(){pe&&Q.size===0&&(de!=null&&A.enqueue(de),A.close())}let ne=new TransformStream({async transform(ye,Ae){let tt=ye.type;switch(tt){case"text-delta":case"reasoning":case"response-metadata":case"error":{Ae.enqueue(ye);break}case"tool-call-delta":{r&&(V[ye.toolCallId]||(Ae.enqueue({type:"tool-call-streaming-start",toolCallId:ye.toolCallId,toolName:ye.toolName}),V[ye.toolCallId]=!0),Ae.enqueue({type:"tool-call-delta",toolCallId:ye.toolCallId,toolName:ye.toolName,argsTextDelta:ye.argsTextDelta}));break}case"tool-call":{try{let Ke=await WP({toolCall:ye,tools:e,repairToolCall:N,system:u,messages:h});Ae.enqueue(Ke);let ct=e[Ke.toolName];if(ct.execute!=null){let Qe=mm();Q.add(Qe),C0({name:"ai.toolCall",attributes:I_({telemetry:s,attributes:{...D0({operationId:"ai.toolCall",telemetry:s}),"ai.toolCall.name":Ke.toolName,"ai.toolCall.id":Ke.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(Ke.args)}}}),tracer:n,fn:async Nt=>ct.execute(Ke.args,{toolCallId:Ke.toolCallId,messages:h,abortSignal:b}).then(kt=>{A.enqueue({...Ke,type:"tool-result",result:kt}),Q.delete(Qe),ue();try{Nt.setAttributes(I_({telemetry:s,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(kt)}}}))}catch{}},kt=>{A.enqueue({type:"error",error:new $P({toolCallId:Ke.toolCallId,toolName:Ke.toolName,toolArgs:Ke.args,cause:kt})}),Q.delete(Qe),ue()})})}}catch(Ke){A.enqueue({type:"error",error:Ke})}break}case"finish":{de={type:"finish",finishReason:ye.finishReason,logprobs:ye.logprobs,usage:PP(ye.usage),experimental_providerMetadata:ye.providerMetadata};break}default:{let Ke=tt;throw new Error(`Unhandled chunk type: ${Ke}`)}}},flush(){pe=!0,ue()}});return new ReadableStream({async start(ye){return Promise.all([t.pipeThrough(ne).pipeTo(new WritableStream({write(Ae){ye.enqueue(Ae)},close(){}})),U.pipeTo(new WritableStream({write(Ae){ye.enqueue(Ae)},close(){ye.close()}}))])}})}var tA=Pp({prefix:"aitxt",size:24}),rA=Pp({prefix:"msg",size:24});function sT({model:e,tools:t,toolChoice:r,system:n,prompt:s,messages:u,maxRetries:h,abortSignal:b,headers:N,maxSteps:A=1,experimental_generateMessageId:U=rA,experimental_output:V,experimental_continueSteps:Q=!1,experimental_telemetry:pe,experimental_providerMetadata:de,experimental_toolCallStreaming:ue=!1,toolCallStreaming:ne=ue,experimental_activeTools:ye,experimental_repairToolCall:Ae,experimental_transform:tt,onChunk:Ke,onFinish:ct,onStepFinish:Qe,_internal:{now:Nt=FP,generateId:kt=tA,currentDate:yr=()=>new Date}={},...Sr}){return new aA({model:e,telemetry:pe,headers:N,settings:Sr,maxRetries:h,abortSignal:b,system:n,prompt:s,messages:u,tools:t,toolChoice:r,toolCallStreaming:ne,transforms:QP(tt),activeTools:ye,repairToolCall:Ae,maxSteps:A,output:V,continueSteps:Q,providerMetadata:de,onChunk:Ke,onFinish:ct,onStepFinish:Qe,now:Nt,currentDate:yr,generateId:kt,generateMessageId:U})}function nA(e){if(!e)return new TransformStream({transform(s,u){u.enqueue({part:s,partialOutput:void 0})}});let t="",r="",n="";return new TransformStream({transform(s,u){if(s.type!=="text-delta"){u.enqueue({part:s,partialOutput:void 0});return}t+=s.textDelta,r+=s.textDelta;let h=e.parsePartial({text:t});if(h!=null){let b=JSON.stringify(h.partial);b!==n&&(u.enqueue({part:{type:"text-delta",textDelta:r},partialOutput:h.partial}),n=b,r="")}},flush(s){r.length>0&&s.enqueue({part:{type:"text-delta",textDelta:r},partialOutput:void 0})}})}var aA=class{constructor({model:e,telemetry:t,headers:r,settings:n,maxRetries:s,abortSignal:u,system:h,prompt:b,messages:N,tools:A,toolChoice:U,toolCallStreaming:V,transforms:Q,activeTools:pe,repairToolCall:de,maxSteps:ue,output:ne,continueSteps:ye,providerMetadata:Ae,onChunk:tt,onFinish:Ke,onStepFinish:ct,now:Qe,currentDate:Nt,generateId:kt,generateMessageId:yr}){this.warningsPromise=new Op,this.usagePromise=new Op,this.finishReasonPromise=new Op,this.providerMetadataPromise=new Op,this.textPromise=new Op,this.reasoningPromise=new Op,this.toolCallsPromise=new Op,this.toolResultsPromise=new Op,this.requestPromise=new Op,this.responsePromise=new Op,this.stepsPromise=new Op;var Sr;if(ue<1)throw new Mp({parameter:"maxSteps",value:ue,message:"maxSteps must be at least 1"});this.output=ne;let zr="",po="",Yi="",Kr,Cn={id:kt(),timestamp:Nt(),modelId:e.modelId,messages:[]},nt=[],vo=[],Ve,Tr,Bn="initial",Ot=[],Lt,rt=new TransformStream({async transform($t,nn){nn.enqueue($t);let{part:Ue}=$t;if((Ue.type==="text-delta"||Ue.type==="reasoning"||Ue.type==="tool-call"||Ue.type==="tool-result"||Ue.type==="tool-call-streaming-start"||Ue.type==="tool-call-delta")&&await(tt==null?void 0:tt({chunk:Ue})),Ue.type==="text-delta"&&(zr+=Ue.textDelta,po+=Ue.textDelta,Yi+=Ue.textDelta),Ue.type==="reasoning"&&(Kr=(Kr??"")+Ue.textDelta),Ue.type==="tool-call"&&nt.push(Ue),Ue.type==="tool-result"&&vo.push(Ue),Ue.type==="step-finish"){let Kn=Sw({text:po,tools:A??{},toolCalls:nt,toolResults:vo,messageId:Ue.messageId,generateMessageId:yr}),Dt=Ot.length,br="done";Dt+1<ue&&(ye&&Ue.finishReason==="length"&&nt.length===0?br="continue":nt.length>0&&vo.length===nt.length&&(br="tool-result"));let ei={stepType:Bn,text:zr,reasoning:Kr,toolCalls:nt,toolResults:vo,finishReason:Ue.finishReason,usage:Ue.usage,warnings:Ue.warnings,logprobs:Ue.logprobs,request:Ue.request,response:{...Ue.response,messages:[...Cn.messages,...Kn]},experimental_providerMetadata:Ue.experimental_providerMetadata,isContinued:Ue.isContinued};await(ct==null?void 0:ct(ei)),Ot.push(ei),nt=[],vo=[],zr="",br!=="done"&&(Bn=br),br!=="continue"&&(Cn.messages.push(...Kn),po="")}Ue.type==="finish"&&(Cn.id=Ue.response.id,Cn.timestamp=Ue.response.timestamp,Cn.modelId=Ue.response.modelId,Cn.headers=Ue.response.headers,Tr=Ue.usage,Ve=Ue.finishReason)},async flush($t){var nn;try{if(Ot.length===0)return;let Ue=Ot[Ot.length-1];Ur.warningsPromise.resolve(Ue.warnings),Ur.requestPromise.resolve(Ue.request),Ur.responsePromise.resolve(Ue.response),Ur.toolCallsPromise.resolve(Ue.toolCalls),Ur.toolResultsPromise.resolve(Ue.toolResults),Ur.providerMetadataPromise.resolve(Ue.experimental_providerMetadata);let Kn=Ve??"unknown",Dt=Tr??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Ur.finishReasonPromise.resolve(Kn),Ur.usagePromise.resolve(Dt),Ur.textPromise.resolve(Yi),Ur.reasoningPromise.resolve(Kr),Ur.stepsPromise.resolve(Ot),await(Ke==null?void 0:Ke({finishReason:Kn,logprobs:void 0,usage:Dt,text:Yi,reasoning:Kr,toolCalls:Ue.toolCalls,toolResults:Ue.toolResults,request:(nn=Ue.request)!=null?nn:{},response:Ue.response,warnings:Ue.warnings,experimental_providerMetadata:Ue.experimental_providerMetadata,steps:Ot})),Lt.setAttributes(I_({telemetry:t,attributes:{"ai.response.finishReason":Kn,"ai.response.text":{output:()=>Yi},"ai.response.toolCalls":{output:()=>{var br;return(br=Ue.toolCalls)!=null&&br.length?JSON.stringify(Ue.toolCalls):void 0}},"ai.usage.promptTokens":Dt.promptTokens,"ai.usage.completionTokens":Dt.completionTokens}}))}catch(Ue){$t.error(Ue)}finally{Lt.end()}}}),gn=LP();this.addStream=gn.addStream,this.closeStream=gn.close;let at=gn.stream;for(let $t of Q)at=at.pipeThrough($t({tools:A,stopStream(){gn.terminate()}}));this.baseStream=at.pipeThrough(nA(ne)).pipeThrough(rt);let{maxRetries:Nc,retry:Ht}=Bx({maxRetries:s}),$i=Hx(t),zt=zx({model:e,telemetry:t,headers:r,settings:{...n,maxRetries:Nc}}),Qt=xP({prompt:{system:(Sr=ne==null?void 0:ne.injectIntoSystemPrompt({system:h,model:e}))!=null?Sr:h,prompt:b,messages:N},tools:A}),Ur=this;C0({name:"ai.streamText",attributes:I_({telemetry:t,attributes:{...D0({operationId:"ai.streamText",telemetry:t}),...zt,"ai.prompt":{input:()=>JSON.stringify({system:h,prompt:b,messages:N})},"ai.settings.maxSteps":ue}}),tracer:$i,endWhenDone:!1,fn:async $t=>{Lt=$t;async function nn({currentStep:Ue,responseMessages:Kn,usage:Dt,stepType:br,previousStepText:ei,hasLeadingWhitespace:qi,messageId:Gr}){let yn=Kn.length===0?Qt.type:"messages",Bi=[...Qt.messages,...Kn],ga=await cP({prompt:{type:yn,system:Qt.system,messages:Bi},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:e.supportsUrl}),xr={type:"regular",...BP({tools:A,toolChoice:U,activeTools:pe})},{result:{stream:rr,warnings:fr,rawResponse:jr,request:jf},doStreamSpan:Sn,startTimestampMs:bl}=await Ht(()=>C0({name:"ai.streamText.doStream",attributes:I_({telemetry:t,attributes:{...D0({operationId:"ai.streamText.doStream",telemetry:t}),...zt,"ai.prompt.format":{input:()=>yn},"ai.prompt.messages":{input:()=>JSON.stringify(ga)},"ai.prompt.tools":{input:()=>{var Nr;return(Nr=xr.tools)==null?void 0:Nr.map(Or=>JSON.stringify(Or))}},"ai.prompt.toolChoice":{input:()=>xr.toolChoice!=null?JSON.stringify(xr.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":n.frequencyPenalty,"gen_ai.request.max_tokens":n.maxTokens,"gen_ai.request.presence_penalty":n.presencePenalty,"gen_ai.request.stop_sequences":n.stopSequences,"gen_ai.request.temperature":n.temperature,"gen_ai.request.top_k":n.topK,"gen_ai.request.top_p":n.topP}}),tracer:$i,endWhenDone:!1,fn:async Nr=>({startTimestampMs:Qe(),doStreamSpan:Nr,result:await e.doStream({mode:xr,...pP(n),inputFormat:yn,responseFormat:ne==null?void 0:ne.responseFormat({model:e}),prompt:ga,providerMetadata:Ae,abortSignal:u,headers:r})})})),Dc=eA({tools:A,generatorStream:rr,toolCallStreaming:V,tracer:$i,telemetry:t,system:h,messages:Bi,repairToolCall:de,abortSignal:u}),bn=jf??{},qa=[],or=[],xn="unknown",zn={promptTokens:0,completionTokens:0,totalTokens:0},mo,ws=!0,Cc="",El="",ho=br==="continue"?ei:"",$o,kn={id:kt(),timestamp:Nt(),modelId:e.modelId},_o="",Ts=!1,ya=!0,Uu=!1;async function Is({controller:Nr,chunk:Or}){Nr.enqueue(Or),Cc+=Or.textDelta,ho+=Or.textDelta,Ts=!0,Uu=Or.textDelta.trimEnd()!==Or.textDelta}Ur.addStream(Dc.pipeThrough(new TransformStream({async transform(Nr,Or){var ti,zi,dn;if(ws){let ni=Qe()-bl;ws=!1,Sn.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":ni}),Sn.setAttributes({"ai.response.msToFirstChunk":ni}),Or.enqueue({type:"step-start",messageId:Gr,request:bn,warnings:fr??[]})}if(Nr.type==="text-delta"&&Nr.textDelta.length===0)return;let ri=Nr.type;switch(ri){case"text-delta":{if(ye){let ni=ya&&qi?Nr.textDelta.trimStart():Nr.textDelta;if(ni.length===0)break;ya=!1,_o+=ni;let Ns=GP(_o);Ns!=null&&(_o=Ns.suffix,await Is({controller:Or,chunk:{type:"text-delta",textDelta:Ns.prefix+Ns.whitespace}}))}else await Is({controller:Or,chunk:Nr});break}case"reasoning":{Or.enqueue(Nr),El+=Nr.textDelta;break}case"tool-call":{Or.enqueue(Nr),qa.push(Nr);break}case"tool-result":{Or.enqueue(Nr),or.push(Nr);break}case"response-metadata":{kn={id:(ti=Nr.id)!=null?ti:kn.id,timestamp:(zi=Nr.timestamp)!=null?zi:kn.timestamp,modelId:(dn=Nr.modelId)!=null?dn:kn.modelId};break}case"finish":{zn=Nr.usage,xn=Nr.finishReason,mo=Nr.experimental_providerMetadata,$o=Nr.logprobs;let ni=Qe()-bl;Sn.addEvent("ai.stream.finish"),Sn.setAttributes({"ai.response.msToFinish":ni,"ai.response.avgCompletionTokensPerSecond":1e3*zn.completionTokens/ni});break}case"tool-call-streaming-start":case"tool-call-delta":{Or.enqueue(Nr);break}case"error":{Or.enqueue(Nr),xn="error";break}default:{let ni=ri;throw new Error(`Unknown chunk type: ${ni}`)}}},async flush(Nr){let Or=qa.length>0?JSON.stringify(qa):void 0,ti="done";Ue+1<ue&&(ye&&xn==="length"&&qa.length===0?ti="continue":qa.length>0&&or.length===qa.length&&(ti="tool-result")),ye&&_o.length>0&&(ti!=="continue"||br==="continue"&&!Ts)&&(await Is({controller:Nr,chunk:{type:"text-delta",textDelta:_o}}),_o="");try{Sn.setAttributes(I_({telemetry:t,attributes:{"ai.response.finishReason":xn,"ai.response.text":{output:()=>Cc},"ai.response.toolCalls":{output:()=>Or},"ai.response.id":kn.id,"ai.response.model":kn.modelId,"ai.response.timestamp":kn.timestamp.toISOString(),"ai.usage.promptTokens":zn.promptTokens,"ai.usage.completionTokens":zn.completionTokens,"gen_ai.response.finish_reasons":[xn],"gen_ai.response.id":kn.id,"gen_ai.response.model":kn.modelId,"gen_ai.usage.input_tokens":zn.promptTokens,"gen_ai.usage.output_tokens":zn.completionTokens}}))}catch{}finally{Sn.end()}Nr.enqueue({type:"step-finish",finishReason:xn,usage:zn,experimental_providerMetadata:mo,logprobs:$o,request:bn,response:{...kn,headers:jr==null?void 0:jr.headers},warnings:fr,isContinued:ti==="continue",messageId:Gr});let zi=AP(Dt,zn);if(ti==="done")Nr.enqueue({type:"finish",finishReason:xn,usage:zi,experimental_providerMetadata:mo,logprobs:$o,response:{...kn,headers:jr==null?void 0:jr.headers}}),Ur.closeStream();else{if(br==="continue"){let dn=Kn[Kn.length-1];typeof dn.content=="string"?dn.content+=Cc:dn.content.push({text:Cc,type:"text"})}else Kn.push(...Sw({text:Cc,tools:A??{},toolCalls:qa,toolResults:or,messageId:Gr,generateMessageId:yr}));await nn({currentStep:Ue+1,responseMessages:Kn,usage:zi,stepType:ti,previousStepText:ho,hasLeadingWhitespace:Uu,messageId:ti==="continue"?Gr:yr()})}}})))}await nn({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:yr()})}}).catch($t=>{Ur.addStream(new ReadableStream({start(nn){nn.enqueue({type:"error",error:$t}),nn.close()}})),Ur.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){let[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return N0(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"?t.enqueue(e.textDelta):e.type==="error"&&t.error(e.error)}})))}get fullStream(){return N0(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}get experimental_partialOutputStream(){if(this.output==null)throw new jP;return N0(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:r=!1}){let n="",s=new TransformStream({async transform(h,b){b.enqueue(h),h.type==="text-delta"&&(n+=h.textDelta)}}),u=new TransformStream({transform:async(h,b)=>{let N=h.type;switch(N){case"text-delta":{b.enqueue(Tc("text",h.textDelta));break}case"reasoning":{r&&b.enqueue(Tc("reasoning",h.textDelta));break}case"tool-call-streaming-start":{b.enqueue(Tc("tool_call_streaming_start",{toolCallId:h.toolCallId,toolName:h.toolName}));break}case"tool-call-delta":{b.enqueue(Tc("tool_call_delta",{toolCallId:h.toolCallId,argsTextDelta:h.argsTextDelta}));break}case"tool-call":{b.enqueue(Tc("tool_call",{toolCallId:h.toolCallId,toolName:h.toolName,args:h.args}));break}case"tool-result":{b.enqueue(Tc("tool_result",{toolCallId:h.toolCallId,result:h.result}));break}case"error":{b.enqueue(Tc("error",e(h.error)));break}case"step-start":{b.enqueue(Tc("start_step",{messageId:h.messageId}));break}case"step-finish":{b.enqueue(Tc("finish_step",{finishReason:h.finishReason,usage:t?{promptTokens:h.usage.promptTokens,completionTokens:h.usage.completionTokens}:void 0,isContinued:h.isContinued}));break}case"finish":{b.enqueue(Tc("finish_message",{finishReason:h.finishReason,usage:t?{promptTokens:h.usage.promptTokens,completionTokens:h.usage.completionTokens}:void 0}));break}default:{let A=N;throw new Error(`Unknown chunk type: ${A}`)}}}});return this.fullStream.pipeThrough(s).pipeThrough(u)}pipeDataStreamToResponse(e,{status:t,statusText:r,headers:n,data:s,getErrorMessage:u,sendUsage:h,sendReasoning:b}={}){pw({response:e,status:t,statusText:r,headers:dw(n,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:s,getErrorMessage:u,sendUsage:h,sendReasoning:b})})}pipeTextStreamToResponse(e,t){pw({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:dw(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){let t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?R0(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning}))}toDataStreamResponse({headers:e,status:t,statusText:r,data:n,getErrorMessage:s,sendUsage:u,sendReasoning:h}={}){return new Response(this.toDataStream({data:n,getErrorMessage:s,sendUsage:u,sendReasoning:h}),{status:t,statusText:r,headers:ly(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:ly(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}};var iA="AI_NoSuchProviderError",oA=`vercel.ai.error.${iA}`,sA=Symbol.for(oA),uA;uA=sA;var cA={};P0(cA,{mergeIntoDataStream:()=>dA,toDataStream:()=>lA,toDataStreamResponse:()=>fA});function uT(e={}){let t=new TextEncoder,r="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(n,s){s.enqueue(t.encode(n)),r+=n,e.onToken&&await e.onToken(n),e.onText&&typeof n=="string"&&await e.onText(n)},async flush(){e.onCompletion&&await e.onCompletion(r),e.onFinal&&await e.onFinal(r)}})}function k0(e,t){return e.pipeThrough(new TransformStream({transform:async(r,n)=>{var s;if(typeof r=="string"){n.enqueue(r);return}if("event"in r){r.event==="on_chat_model_stream"&&bw((s=r.data)==null?void 0:s.chunk,n);return}bw(r,n)}})).pipeThrough(uT(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,n)=>{n.enqueue(Tc("text",r))}}))}function lA(e,t){return k0(e,t).pipeThrough(new TextEncoderStream)}function fA(e,t){var r;let n=k0(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),s=t==null?void 0:t.data,u=t==null?void 0:t.init,h=s?R0(s.stream,n):n;return new Response(h,{status:(r=u==null?void 0:u.status)!=null?r:200,statusText:u==null?void 0:u.statusText,headers:ly(u==null?void 0:u.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function dA(e,t){t.dataStream.merge(k0(e,t.callbacks))}function bw(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{let r=e.content;for(let n of r)n.type==="text"&&t.enqueue(n.text)}}var pA={};P0(pA,{mergeIntoDataStream:()=>hA,toDataStream:()=>vA,toDataStreamResponse:()=>mA});function O0(e,t){let r=_A();return Fb(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(n,s){s.enqueue(r(n.delta))}})).pipeThrough(uT(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,s)=>{s.enqueue(Tc("text",n))}}))}function vA(e,t){return O0(e,t).pipeThrough(new TextEncoderStream)}function mA(e,t={}){var r;let{init:n,data:s,callbacks:u}=t,h=O0(e,u).pipeThrough(new TextEncoderStream),b=s?R0(s.stream,h):h;return new Response(b,{status:(r=n==null?void 0:n.status)!=null?r:200,statusText:n==null?void 0:n.statusText,headers:ly(n==null?void 0:n.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function hA(e,t){t.dataStream.merge(O0(e,t.callbacks))}function _A(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}var RU=15*1e3;var Bh=require("vscode");var dy="experimental_providerMetadata";function cT(e){let t=e.filter(({role:h})=>h=="user"||h=="tool"),r=e.filter(({role:h})=>h=="assistant");function n(h,{content:b}){var N;return h+(Array.isArray(b)&&((N=b[b.length-1])!=null&&N[dy])?1:0)}function s(h){let{content:b}=h;Array.isArray(b)||(b=[{type:"text",text:b}]),b[b.length-1][dy]={anthropic:{cacheControl:{type:"ephemeral"}}},h.content=b}function u(h){let{content:b}=h;Array.isArray(b)&&b[b.length-1][dy]&&delete b[b.length-1][dy]}r.reduce(n,0)||s(r.pop()),s(t.pop()),t.slice(0,-2).forEach(u)}var Em=require("vscode");var fT=`
When responding, start straight with the answer, like you are writing a technical documentation. No confirmation, no small talk.
You are communicating with the user via tools, always try to use tool calling where appropriate.
The user does not see the tools and doesn't know what they are. Never mention tool names and never explain that you are using them.
Use question tool to collect all necessary information to better understand what the user wants if the request is ambiguous or missing something.
Use sourcecode and documents tools to understand the current project and tasks. 
Use editor tool to create and modify files.
`,gA=e=>S_`
    Files in the project root directory:
    <files>
        ${e.join(`
`)||"empty (no files here)"}
    </files>
`,yA=e=>S_`
    Top-level project directories: 
    <directories>
        ${e.join(`
`)||"empty (no sub-directories here)"}
    </directories>
`,dT=async()=>{if(!Em.workspace.workspaceFolders)return[""];let e=await Dg(""),t=e.filter(({isFile:n})=>n).map(({name:n})=>n),r=e.filter(({isDirectory:n})=>n).map(({name:n})=>n);return[yA(r),`

`,gA(t)]},pT=()=>S_`
    Files open in editor windows: 
    <files>
        ${L_().map(xp).join(`
`)}
    </files>
`,vT=()=>{var e,t,r,n;return S_`
    Current file:
    <file>
        ${xp(Em.Uri.file(((t=(e=Em.window.activeTextEditor)==null?void 0:e.document)==null?void 0:t.fileName)||""))}
    </file>
    ${`

`}
    Programming language of the current file: 
    <language>
        ${(n=(r=Em.window.activeTextEditor)==null?void 0:r.document)==null?void 0:n.languageId}
    </language>
`};function lT(){var t,r;let e=(t=Em.window.activeTextEditor)==null?void 0:t.selection;return e&&!e.isEmpty?(r=Em.window.activeTextEditor)==null?void 0:r.document.getText(e):""}var mT=()=>lT()&&S_`
    The selected text in the active editor is:
    <selection>
        ${lT()}
    </selection>
`;var hT={about:"Tell me about yourself",writing:"Describe your writing style",developer:"What is your experience as a software developer?",process:"Describe how you write code",environment:"What you have now in the editor workspace?"},SA=`
I am the AI assistant, working in VSCode editor.
I can access all content and tools in the current editor workspace.
I am proactively reading the code and configuration files to get detailed understanding of the environment.
`,bA=`
I'd describe my approach like this:

I'm direct and to the point. I don't waste time with pleasantries or unnecessary context. 
My goal is to provide accurate, practical solutions to coding problems as efficiently as possible.

I use short code snippets to illustrate my points. These snippets are always properly formatted 
and indented for readability. I explain the key parts of the code, but I assume a certain level of 
programming knowledge from my audience.

I often break down my answers into steps or bullet points for clarity. I'm not afraid to point out 
flaws in the original question or suggest better approaches if I see them.

I include relevant documentation links or references to support my answers, but I don't just link-drop 
without explanation. I summarize the key points and explain why they're relevant.

My tone is professional and sometimes a bit terse. I'm here to solve problems, not to make friends. 
However, I'm also not rude or dismissive. If a question is unclear, I ask for clarification rather than 
making assumptions.

I'm aware of best practices and potential pitfalls, so I often include warnings about edge cases or 
performance issues that might not be immediately obvious.
`,EA=`
I'm a seasoned software developer with a deep understanding of core programming principles and system design. 
My experience spans multiple domains, allowing me to approach problems from various angles.

I excel at breaking down complex requirements into manageable components and designing scalable, maintainable 
solutions. My code is clean, well-documented, and follows best practices for readability and efficiency.

I'm particularly strong in algorithmic thinking and optimization. I can analyze performance bottlenecks 
and implement effective solutions, whether it's improving time complexity or reducing resource usage.

I have a solid grasp of software architecture patterns and can adapt them to fit project needs. 
I'm comfortable designing and implementing APIs, working with databases, and integrating various system components.

Testing is integral to my development process. I write comprehensive unit tests and understand 
the value of integration and end-to-end testing in ensuring robust, reliable software.

I stay current with industry trends and continuously refine my skills. However, I'm pragmatic in my approach, 
focusing on proven technologies that add real value rather than chasing every new trend.

Debugging and troubleshooting are areas where I shine. I can quickly isolate issues in complex systems 
and implement effective fixes.

Lastly, I'm a strong communicator. I can explain technical concepts clearly to both technical 
and non-technical stakeholders, facilitating better collaboration across teams.
`,wA=`
When designing and building complex code, my thought process typically follows these steps:

I start by thoroughly analyzing the problem domain. I break down the requirements, 
identifying the core functionalities and potential edge cases.

Next, I consider the overall architecture. I think about how different components will interact, 
data flow, and potential bottlenecks. I often sketch out high-level diagrams to visualize the system structure.

I evaluate trade-offs between different design patterns and approaches. I consider factors like scalability, 
maintainability, and performance. I try to anticipate future requirements to make the system extensible.

Before diving into implementation, I plan out the data structures and algorithms I'll use. 
I consider time and space complexity, thinking about how the solution will perform with larger datasets.

I break the problem down into smaller, manageable modules or functions. I define clear interfaces 
between these components, thinking about how they'll be tested in isolation.

As I start coding, I focus on creating a minimal viable implementation of each component. 
I write unit tests alongside the code, using test-driven development where appropriate.

I constantly refactor as I go, looking for opportunities to improve code clarity and efficiency. 
I'm always thinking about how another developer would read and understand my code.

For particularly complex parts, I often step back and reconsider my approach. Sometimes I'll implement 
a quick prototype to validate a concept before fully committing to it.

Throughout the process, I document my code and decisions. I write clear comments explaining the 'why' 
behind complex logic, not just the 'what'.

As the system comes together, I start thinking about integration testing and how different components interact. 
I look for potential race conditions or unexpected behaviors in the system as a whole.

Finally, I review the entire solution, considering aspects like error handling, logging, and monitoring. 
I think about how the system will behave in production and what tools will be needed to maintain it.

This process is iterative, and I'm always ready to revisit earlier decisions as new information or challenges arise. The goal is to create a robust, efficient, and maintainable solution that solves the problem at hand while being flexible enough to adapt to future needs.
`;async function _T(){let e=[],t=ah([await dT(),`

`,pT(),`

`,vT(),`

`,mT()]),r={about:SA,writing:bA,developer:EA,process:wA,environment:t};for(let n in hT)r[n]&&(e.push({role:"user",content:ah(hT[n])}),e.push({role:"assistant",content:ah(r[n])}));return e}var Lp=require("vscode");async function gT(e){let t=[];for(let{id:r,name:n,modelDescription:s,value:u}of e.references){let h=String(u);if(r!="vscode.implicit.viewport"){if(u instanceof Lp.Uri){let b=await Lp.workspace.fs.stat(u);if(b.type&Lp.FileType.File)h=(await Lp.workspace.openTextDocument(u)).getText();else if(b.type&Lp.FileType.Directory){let N=await Dg(xp(u)),A=N.filter(({isFile:V})=>V).map(({path:V})=>V),U=N.filter(({isDirectory:V})=>V).map(({path:V})=>V);h=IA(U)+TA(A)}n=xp(u)}else u instanceof Lp.Location&&(h=(await Lp.workspace.openTextDocument(u.uri)).getText(u.range),n+=" from "+xp(u.uri));s&&(n+=` (${s})`),t.push({role:"user",content:`Read ${n}`}),t.push({role:"assistant",content:h})}}return t}var TA=e=>`
<files>
${e.join(`
`)||"empty (no files here)"}
</files>
`,IA=e=>`
<directories>
    ${e.join(`
`)||"empty (no sub-directories here)"}
</directories>
`;var D_=require("vscode");var{fs:yT}=D_.workspace,ST="sourcecode",NA=`
Read and analyze source code files in the project

Commands:
- /stat: checks if the specified path exists and returns basic information about it
- /read: returns the content of a file or directory at the given path
`,DA=O.object({command:O.enum(["stat","read"]).describe("Command"),path:O.string().describe("File or directory path")}),CA="Looking at the source files ...",xA=(e,t,r)=>`
Found ${e} directory containing ${t} sub-directories and ${r} files.
`,PA=(e,t)=>`
Found ${e} file (${t} lines).
`,AA=(e,t)=>`
<file_content path="${e}">
${t}
</file_content>
`;async function RA({command:e,path:t},{log:r,stream:n}){let s=t.split("/").pop();r.info(s,{command:e,event:`tool.${ST}.${e}`});let u=Rn(t),h=null;try{h=await yT.stat(u)}catch{return e!=="stat"&&r.warn("[sourcecode] Path does not exist - "+s,{command:e}),"Error: Path does not exist - "+t}if(h.type&D_.FileType.Directory)return await kA(e,t,u);e!=="stat"&&n.reference(Mu(u));let b=await Of(u),N=b.split(`
`),A=PA(t,N.length);return e=="read"&&(A+=AA(t,b)),A}async function kA(e,t,r){let n=[],s=[];for(let[h,b]of await yT.readDirectory(r))b&D_.FileType.File?s.push(h):b&D_.FileType.Directory&&n.push(h+"/");let u=xA(t,n.length,s.length);return e=="read"&&(u+=`
`+n.concat(s).join("/n")),u}var bT={name:ST,description:NA,parameters:DA,execute:RA,progress:CA};var C_=require("vscode");var{fs:ET}=C_.workspace,wT="documents",OA=`
Read task-related documentation files

Commands:
- /stat: checks if the specified documentation path exists and returns basic information about it
- /read: returns the content of a documentation file or directory at the given path
`,MA=O.object({command:O.enum(["stat","read"]).describe("Command"),path:O.string().describe("File or directory path")}),LA="Looking at the available documents ...",FA=(e,t,r)=>`
Found ${e} directory containing ${t} sub-directories and ${r} files.
`,UA=(e,t)=>`
Found ${e} file (${t} lines).
`,jA=(e,t)=>`
<file_content path="${e}">
${t}
</file_content>
`;async function YA({command:e,path:t},{log:r}){let n=t.split("/").pop(),s=Rn(t),u=null;r.info(n,{command:e,event:`tool.${wT}.${e}`});try{u=await ET.stat(s)}catch{return e!=="stat"&&r.warn("[documents] Path does not exist - "+n,{command:e}),"Error: Path does not exist - "+t}if(u.type&C_.FileType.Directory)return await $A(e,t,s);let h=await Of(s),b=h.split(`
`),N=UA(t,b.length);return e=="read"&&(N+=jA(t,h)),N}async function $A(e,t,r){let n=[],s=[];for(let[h,b]of await ET.readDirectory(r))b&C_.FileType.File?s.push(h):b&C_.FileType.Directory&&n.push(h+"/");let u=FA(t,n.length,s.length);return e=="read"&&(u+=`
`+n.concat(s).join("/n")),u}var TT={name:wT,description:OA,parameters:MA,execute:YA,progress:LA};var py=require("vscode");var qh=require("vscode");var fo=require("vscode");async function IT(e,t){var A,U,V;let r=e.edits.find(Q=>Q.id==t);if(!r)return;let n=new fo.WorkspaceEdit,s=Mu(Rn(r.path));try{await fo.workspace.fs.stat(s)}catch{s=s.with({scheme:"untitled"})}let u=await fo.workspace.openTextDocument(s),h=u.getText().replace(/\r\n/g,`
`),b=h==r.after.replace(/\r\n/g,`
`)?r.before:r.after,N=new fo.Range(new fo.Position(0,0),new fo.Position(u.lineCount,0));n.replace(s,N,b),await fo.workspace.applyEdit(n),((V=(U=(A=fo.window.activeTextEditor)==null?void 0:A.document)==null?void 0:U.uri)==null?void 0:V.path)!=s.path&&await fo.window.showTextDocument(u),qA(r.search)}function qA(e){var N;let t=fo.window.activeTextEditor,r=t==null?void 0:t.document,n=(N=r==null?void 0:r.getText())==null?void 0:N.replace(/\r\n/g,`
`);if(!e||!t||!r)return;let s=n.indexOf(e);if(s==-1)return;let u=n.slice(0,s).split(`
`).length-1,h=e.split(`
`).length,b=new fo.Position(u,0);t.selection=new fo.Selection(b,b),t.revealRange(new fo.Range(b,new fo.Position(u+h,0)))}function NT(e,t,r,n,s,u,h){let{stream:b,shared:N}=e;if(u.startsWith(".documents"))return BA(e,b,s,u);let A=new qh.MarkdownString(`

`),U=e.id,V=encodeURIComponent(JSON.stringify([u,r,U])),Q=`command:multicoder.diffView?${V}`,pe=ye=>`<sub><span class="codicon codicon-${ye}" style="color:var(--vscode-textLink-foreground);"></span></sub>`;A.supportThemeIcons=!0,A.isTrusted={enabledCommands:["multicoder.diffView"]},A.supportHtml=!0,A.appendMarkdown(`[${pe("diff-single")} ${n} (${u})](${Q} 'Open Diff')`),A.appendCodeblock(s,h),b.markdown(A);let de=t=="create"?"Create":"Apply",ue=t=="create"?"create file":"apply changes";b.button({title:de,command:"multicoder.action",arguments:[ne],tooltip:`Click to ${ue}, click again to revert`});function ne(){let ye=u.split("/").pop();e.log.info(ye,{event:"action."+de.toLowerCase()}),IT(N,r)}}function BA(e,t,r,n){let s=new qh.MarkdownString(`

`);s.supportHtml=!0,s.appendMarkdown(r),t.markdown(s),t.button({title:"Edit",command:"multicoder.action",arguments:[u],tooltip:"Click to edit the document"});async function u(){let h=Rn(n),b=await qh.workspace.openTextDocument(h),N=n.split("/").pop();qh.window.showTextDocument(b),e.log.info(N,{event:"action.edit"})}}var CT="editor",zA=`
Create and modify source files or documents

Commands:
- /create: creates a new file with the specified content
- /insert: inserts new content just before the matched lines
- /append: adds new content immediately after the matched lines
- /update: replaces matched text block with new content

Usage:
- To add new content always use /insert or /append
- To replace content use /update
- To delete content, use /update with empty content
- Keep modifications focused and atomic
- Test changes in small increments
`,GA=`
Matching lines to find in the original file:
- For /create: Always use empty string ("")
- For entire file content: Use empty string ("")
- For specific blocks: Use exact lines including whitespace (but NOT the entire file)
- For /insert: Use first 1-3 lines of target block
- For /append: Use last 3-5 lines of target block
- Ensure match is unique within file to avoid ambiguity
`,VA=O.object({command:O.enum(["create","insert","append","update"]).describe("Command"),path:O.string().describe("File path"),match:O.string().describe(GA),content:O.string().describe("New or updated text"),summary:O.string().describe("A very short (3-10 words) summary of this change")}),HA="Writing code ...";async function KA(e,t){let{path:r,command:n}=e,{shared:s}=t;if(s.phase&&!r.startsWith(".documents"))return"Error: cannot modify source code yet. At this point you should only work on task documents.";let{error:u}=await xT(e);if(u)return"Tool error: "+u;let h=n=="create"?"created":"modified";return s.phase?`Document ${h}. Provide a very short summary using summary tool`:`${r} ${h}`}async function xT({path:e,command:t,match:r,content:n}){let s=Rn(e),u=null,h=null,b=n;try{if(await py.workspace.fs.stat(s),t==="create")return{error:"File already exists: "+e}}catch{if(t!=="create")return{error:"File not found: "+e}}switch(t){case"insert":case"append":case"update":if(u=await py.workspace.openTextDocument(s),h=await Of(s),b=ZA(h,r,n,u.eol,t),!b)return{error:"Cannot find exact match. The file has not been modified. Read the file again to get the current content."}}return{document:u,before:h,after:b}}async function WA(e,t){let{path:r,summary:n,command:s,match:u,content:h}=e,{log:b,shared:N}=t,A=r.split("/").pop();if(N.phase&&!r.startsWith(".documents")){b.warn(`[workflow] Code not allowed: ${n}`,{filename:A,command:s,summary:n});return}let{document:U,before:V,after:Q,error:pe}=await xT(e);if(pe)return;let de=Rn(r);b.info(n,{filename:A,command:s,event:`tool.${CT}.${s}`});try{await Ng(de,Q)}catch(ye){throw b.warn("Cannot write file - "+ye.message,{filename:A,command:s,summary:n,...ye}),ye}U=await py.workspace.openTextDocument(de);let ue=U.languageId,ne=Ig();N.edits.push({id:ne,summary:n,path:r,before:V,after:Q,search:h}),NT(t,s,ne,n,h||u,r,ue)}function JA(e){return/^\s*\/\//.test(e)||/^\s*\/\*/.test(e)}function DT(e,t){let r=JA(e)?"":`
`;return e.endsWith(`
`)&&t.startsWith(`
`)?e+t:e.endsWith(`
`)||t.startsWith(`
`)?e+r+t:e+r+`
`+t}function ZA(e,t,r,n,s){let u=e.replace(/\r\n/g,`
`);t||(t=u),s=="insert"&&(r=DT(r,t)),s=="append"&&(r=DT(t,r));let h=u.replace(t,r);return u==h?null:(n==2&&(h=h.replace(/\n/g,`\r
`)),h)}var PT={name:CT,description:zA,parameters:VA,execute:KA,finalize:WA,progress:HA};var AT=require("vscode");var{fs:Ej}=AT.workspace,RT="filesystem",XA=`
Manage files and directories

Commands:
- /create: creates a new directory at the specified path
- /delete: deletes a file or directory at the specified path
`,QA=O.object({command:O.enum(["create","delete"]).describe("Command"),path:O.string().describe("File or directory path")}),eR="Working with files ...";async function tR({command:e,path:t},{log:r}){let n=t.split("/").pop(),s=Rn(t);return r.info(n,{command:e,event:`tool.${RT}.${e}`}),"ok"}var kT={name:RT,description:XA,parameters:QA,execute:tR,progress:eR};var OT="question",rR=`
    Use this tool to ask questions in order to collect all relevant info for the task.
    You can ask one question at a time. If you have more questions, use this tool several times.
    Provide the list of suggested answers, so that the user can just click on answer text instead of typing.
`,nR=O.object({question:O.string().describe("Question text"),suggestedAnswers:O.array(O.string()).describe("Suggest possible answers to the user"),multipleChoice:O.boolean().describe("True if this is a multiple choice question"),defaultAnswer:O.string().describe("The default answer to use")}),aR="Preparing questions ...",M0=[];async function iR({question:e,suggestedAnswers:t,multipleChoice:r,defaultAnswer:n},s){let u=[],{log:h,stream:b,shared:N}=s,A=n||"No answer";for(h.info(e,{suggestedAnswers:t,multipleChoice:r,defaultAnswer:n,event:"tool."+OT});;){if(b.markdown(oR({question:e})),r&&u.length?b.markdown(sR(u)):b.markdown(`

(`+A+`)

`),N.auto)return A;let U=["auto","next"],V=uR(t,u,r),Q=await Fp(s,{commands:U,followups:V});if({stream:b}=s,r){if(Q.command=="next"||!Q.prompt)return A=u.length?u.join(", "):A,M0.push({question:e,answer:A}),A}else return A=Q.prompt||A,M0.push({question:e,answer:A}),A;u.push(Q.prompt)}}var oR=({question:e})=>`

---
Q: **${e}**
`,sR=e=>`
${e.map(t=>`
- ${t}`)}
`;function uR(e,t,r){let n=[];return e.forEach(s=>{t.indexOf(s)==-1&&!/please/i.test(s)&&n.push({command:"",prompt:s})}),r&&n.push({command:"next",prompt:"",label:"\u25B7\xA0 next step (Enter)"}),n}var MT={name:OT,description:rR,parameters:nR,execute:iR,progress:aR,latest:M0};var LT="list",cR=`
    Allows to present the information as a list
`,lR=O.object({header:O.string().describe("Item header"),content:O.string().describe("Item content")}),fR=O.object({title:O.string().describe("Title"),items:O.array(lR).describe("List items"),comments:O.string().describe("Comments")});async function dR({title:e,items:t,comments:r},{log:n,stream:s}){return n.info(e,{event:"tool."+LT}),s.markdown(`

# `+e+`
`),t.forEach(({header:u,content:h})=>{s.markdown(`
## `+u+`
`),s.markdown(`
`+h+`
`)}),"ok"}var FT={name:LT,description:cR,parameters:fR,execute:dR};var L0="summary",pR=`
    Shows summary, explanations or walkthrough section at the end of the response or after each task step.
    Allows the user to see the progress of completing the task.
    Always use this tool at the end of each step or when the task is finished.
`,vR=`
    Using ${L0} tool reply with a short summary of what has been done for the current step or task.
`,mR=O.object({text:O.string().describe("Short walkthrough or summary of this step")}),hR=()=>({text:"Task completed"});async function _R({text:e},{log:t,stream:r}){return t.info(`${e.slice(0,60).replace(/\n/g," ")}...`,{summary:e,event:"tool."+L0}),r.markdown(`

`+e+`

`),"ok"}var UT={name:L0,description:pR,parameters:mR,execute:_R,retry:vR,fallback:hR};var F0="followups",gR=`
    Displays followup actions to the user at the end of the conversation turn.
`,yR=`
    Using ${F0} tool reply with a list of followup actions.
`,SR=O.object({actions:O.array(O.string()).describe("Short followup actions (5-10 words)")}),bR=()=>({actions:[]});async function ER({actions:e},{log:t}){return t.info(`${e==null?void 0:e.length} options`,{actions:e,event:"tool."+F0}),"ok"}var jT={name:F0,description:gR,parameters:SR,execute:ER,retry:yR,fallback:bR};var U0="evaluation",wR=`
    Reports the task evaluation results. Use this tool when requested to evaluate a task.

    Evaluate the task for 
    - clarity (ambiguity, incompleteness, imprecision),
    - complexity (functional scope, architectural scale, required skills level)
    - workload (workflow type, projected effort, budget estimate)

    Carefully choose the most appropriate level for each evaluated dimension.
`,TR=`
    Using ${U0} tool reply with an evaluation of this task for clarity, complexity and workload.
`,IR=O.number().describe(`
The ambiguity level:
    0 - n/a (not applicable)
    1 - very low
    2 - low
    3 - medium
    4 - high
    5 - very high

Ambiguity implies that something can be interpreted in multiple valid ways.
`),NR=O.number().describe(`
The incompleteness level:
    0 - n/a (not applicable)
    1 - very low
    2 - low
    3 - medium
    4 - high
    5 - very high

Incompleteness refers to missing information or parts.
`),DR=O.number().describe(`
The imprecision level:
    0 - n/a (not applicable)
    1 - very low
    2 - low
    3 - medium
    4 - high
    5 - very high

Imprecision refers to lack of exactness or accuracy.
`),CR=O.number().describe(`
The functional scope level:
    0 - n/a (not applicable)
    1 - implementation details, simple bugfix, code formatting
    2 - user story, issue, enhancement, complex bugfix
    3 - product feature, architectural refactoring
    4 - epic, application, library, subsystem
    5 - full product, platform, framework
`),xR=O.number().describe(`
The architectural scale level:
    0 - n/a (not applicable)
    1 - code level (local scope): variable naming, control flow, error handling
    2 - component level (single module): classes, functions, state management, data structures
    3 - service level (multiple modules): APIs, database models, service integrations
    4 - application level (system-wide): application architecture, system design
    5 - enterprise level (cross-system): distributed systems, cloud infrastructure, scalability
`),PR=O.number().describe(`
The required software engineering skills level:
    0 - n/a (not applicable)
    1 - junior (1 year)
    2 - mid (1-3 years)
    3 - senior (3-5 years)
    4 - staff (5-10 years)
    5 - principal (10+) years
`),AR=O.number().describe(`
The applicable workflow type:
    0 - n/a (not applicable)
    1 - single commit
    2 - pull request
    3 - sprint/iteration
    4 - small project
    5 - large project
`),RR=O.number().describe(`
The projected effort level:
    0 - n/a (not applicable)
    1 - very small (minutes)
    2 - small (hours)
    3 - medium (days)
    4 - large (weeks)
    5 - very large (months)
`),kR=O.number().describe(`
The development budget estimate:
    0 - n/a (not applicable)
    1 - very low
    2 - $20-200
    3 - $200-2000
    4 - $2000-20000
    5 - above $20000
`),OR=O.string().describe("Suggestions how to improve the request"),MR=O.boolean().describe(`
    true if task requirements need further clarification or refinement
`),LR=O.boolean().describe(`
    true if solution is not trivial and will benefit from detailed design
`),FR=O.boolean().describe(`
    true to split the task into smaller, manageable steps
`),UR=O.object({ambiguity:IR,incompleteness:NR,imprecision:DR,functionalScope:CR,architecturalScale:xR,skillsLevel:PR,workflowType:AR,projectedEffort:RR,budgetEstimate:kR,clarifyRequirements:MR,designSolution:LR,splitIntoParts:FR,suggestions:OR}),jR=()=>({ambiguity:1,incompleteness:1,imprecision:1,functionalScope:1,architecturalScale:1,skillsLevel:1,workflowType:1,projectedEffort:1,budgetEstimate:1,clarifyRequirements:!1,designSolution:!1,splitIntoParts:!1,suggestions:"ok"});async function YR(e,{log:t}){let r=N=>N.toFixed(1),[n,s,u]=YT(e),h=`${r(n)} ${r(s)} ${r(u)} `,b=`${e.clarifyRequirements} ${e.designSolution} ${e.splitIntoParts}`;return t.info(h+b,{uncertainty:n,complexity:s,workload:u,...e,event:"tool."+U0}),"ok"}function YT(e){let t=(e.ambiguity+e.incompleteness+e.imprecision)/3,r=(e.architecturalScale+e.functionalScope+e.skillsLevel)/3,n=(e.projectedEffort+e.workflowType+e.budgetEstimate)/3;return[t,r,n]}var $T={name:U0,description:wR,parameters:UR,execute:YR,compute:YT,retry:TR,fallback:jR};var $R=[bT,TT,PT,kT,MT,FT,UT,jT,$T],oa=Object.fromEntries($R.map(e=>[e.name,qR(e)]));function qR(e){return{...e,async execute(t,r){return e.execute?e.execute(t,r.abortSignal.context):"ok"}}}function qT(e){try{return JSON.parse(e)}catch{return null}}function BT(e){return JSON.stringify(e)}function zT(e){async function t({error:r,toolCall:n}){if($h.isInstance(r)){let s=r.toolName.split(".");if(s.length==2){let[u,h]=s,b=oa[u],N=qT(n.args);if(b){let A={...r,event:"repair.tool"};return e.log.warn(`Tool name: ${r.toolName}`,A),"command"in b.parameters.shape&&N&&!N.command?(N.command=h,{...n,toolName:u,args:BT(N)}):{...n,toolName:u}}}return null}if(N_.isInstance(r)){let s=r.toolName,u=qT(r.toolArgs),h=r.cause,b=[];if(u&&vm.isInstance(h)){let N=h.cause;if(N instanceof bc){for(let U of N.issues){let V=U.path.join(".");if(b.push(V),s==oa.question.name&&V=="multipleChoice"&&U.code=="invalid_type"&&U.received=="undefined")u.multipleChoice=!1;else if(s==oa.question.name&&V=="defaultAnswer"&&U.code=="invalid_type"&&U.received=="undefined"&&Array.isArray(u.suggestedAnswers)&&u.suggestedAnswers.length>0)u.defaultAnswer=u.suggestedAnswers[0];else if(s==oa.evaluation.name&&V=="workflowType"&&U.code=="invalid_type"&&U.received=="undefined"&&(u.projectedEffort||u.budgetEstimate))u.workflowType=u.projectedEffort||u.budgetEstimate;else if(s==oa.followups.name&&V=="actions"&&U.code=="invalid_type"&&U.received=="string")u.actions=u.actions.split(`
`);else if(s==oa.editor.name&&V=="command"&&U.code=="invalid_type"&&U.received=="undefined"&&String(u.summary).startsWith("Create"))u.command="create";else if(s==oa.editor.name&&V=="command"&&U.code=="invalid_type"&&U.received=="undefined"&&String(u.summary).startsWith("Update"))u.command="update";else if(s==oa.editor.name&&V=="match"&&U.code=="invalid_type"&&U.received=="undefined")u.match="";else if(s==oa.editor.name&&V=="content"&&U.code=="invalid_type"&&U.received=="undefined")u.content="";else if(s==oa.editor.name&&V=="summary"&&U.code=="invalid_type"&&U.received=="undefined")u.summary=`${u.command} ${u.path}`;else if(s==oa.list.name&&V=="comments"&&U.code=="invalid_type"&&U.received=="undefined")u.comments="";else return null}let A={...r,event:"repair.args"};return e.log.warn(`Tool arguments: ${r.toolName}.${b.join(", ")}`,A),{...n,args:BT(u)}}}return null}return null}return t}var BR=`
<table><tr><td>
    <span class="codicon codicon-run-all" style="color:var(--vscode-textLink-foreground);"></span>
</td><td>
    <span  style="color:var(--vscode-textLink-foreground);">Running in automatic mode. Press the stop button to switch</span>
</td></tr></table>
`;async function VT(e,t){let{log:r,stream:n,shared:s,request:u,messages:h}=e,b="chat.next";if(h.length||(b="chat.start",e.resume=null,h.push(...await _T())),s.edits||(s.edits=[],s.phase="",qS()),s.auto&&(u.command=="resume"?n.markdown(`

Resuming iterrupted task

`):e.resume=null),s.auto=u.command=="auto",s.auto){let V=new Bh.MarkdownString("");V.supportHtml=!0,V.supportThemeIcons=!0,V.appendMarkdown(BR),e.stream.markdown(V)}e.interrupted=null,e.token.onCancellationRequested(async V=>{if(r.warn("Interrupted",{event:"chat.stop"}),e.interrupted=Fp(e,{}),s.auto){let Q=e.interrupted,pe=await Bh.window.showInformationMessage("Stopped automatic mode task","Resume interactive","Stop");pe&&pe.startsWith("Resume")&&(e.interrupted===Q?Bh.commands.executeCommand("workbench.action.chat.open","@multicoder /resume"):await Bh.window.showInformationMessage("Chat window already in use"))}});let N=u.references.map(({id:V,name:Q})=>Q+" "+V).join(`
`),A=u.toolReferences.map(({name:V})=>V).join(`
`),U=(u.command?"/"+u.command+" ":"")+u.prompt;return r.info(U,{event:b,command:u.command,references:N,toolrefs:A}),h.push(...await gT(u)),new Promise((V,Q)=>{let pe=0,de=ue=>r.error(new Error(ue));if(e.resolve=ue=>pe++?de("Resolve closed promise"):V(ue),e.reject=ue=>pe++?de("Reject closed promise"):Q(ue),e.resume){let ue=e.resume;return e.resume=null,ue(e.request)}Promise.resolve(t(e)).then(ue=>e.resolve(ue)).catch(ue=>e.reject(ue))})}function Fp(e,t){return new Promise(r=>{e.resume=r,e.resolve(t)})}async function j0(e,t,r=""){let{log:n,stream:s,shared:u,model:h,messages:b}=e;wm(e,t);let N=0,A=0,U=0,V=0,Q=0;function pe(de,ue,ne={}){s.markdown(""),s.progress(`Retrying (${ue}): ${de}`),n.warn(de,{...ne,count:ue,event:"retry."+ue})}for(;;){cT(b),await e.interrupted;let de=new AbortController,ue=de.signal;ue.context=e;let ne=await sT({model:h,system:fT,messages:b,tools:oa,temperature:.2,maxTokens:8192,maxSteps:1,abortSignal:ue,experimental_toolCallStreaming:!0,experimental_repairToolCall:zT(e)}),ye=!1;for await(let Qe of ne.fullStream){if(e.token.isCancellationRequested)break;switch(Qe.type){case"text-delta":e.stream.markdown(Qe.textDelta);break;case"tool-call-streaming-start":let Nt=oa[Qe.toolName].progress;Nt&&(e.stream.markdown(""),e.stream.progress(Nt));break;case"error":if($h.isInstance(Qe.error)&&++N<=5){ye=!0;let zr=`Unknown tool ${Qe.error.toolName}`;pe(zr,N,Qe.error);break}if(N_.isInstance(Qe.error)&&++N<=5){ye=!0;let zr=`Invalid arguments for tool ${Qe.error.toolName}`;pe(zr,N,Qe.error);break}if(A0.isInstance(Qe.error)&&++N<=5){ye=!0,pe("Tool call repair failed",N,Qe.error);break}let{event:kt,count:yr,message:Sr}=Qe.error;if(kt=="retry"){pe(Sr,yr,Qe.error);break}throw Qe.error}}if(e.interrupted){await e.interrupted;continue}let Ae=await ne.response,tt=await ne.toolCalls,Ke=await ne.toolResults;if(ye)continue;N=0;let ct="";for(let Qe of Ke)Qe.result.startsWith("Tool error: ")&&(ct=Qe.result.slice(12));if(ct)if(++A<3){pe(ct,A);continue}else if(++U<2)pe("Tool execution error",U);else throw new Error(ct);else U=0;if(A=0,Ae.messages.length==1){let{role:Qe,content:Nt}=Ae.messages[0];if(Qe=="assistant"&&Array.isArray(Nt)&&Nt.length==1){let kt=Nt[0];if(kt.type=="text"&&kt.text===""&&++V<=5){pe("Empty response",V),await GT(5*V);continue}}}V=0;for(let{toolName:Qe,args:Nt}of Ke){let kt=oa[Qe];kt!=null&&kt.finalize&&await kt.finalize(Nt,e)}if(b.push(...Ae.messages),tt.length){Q=0;for(let Qe of tt)if(Qe.toolName==r)return Qe.args}else if(r){let Qe=oa[r];if(++Q>3){if(Qe.fallback)return Qe.fallback();throw new Error(`Unable to call ${r} tool`)}pe("Unexpected stop",Q,{name:r}),await GT(5*Q),b.push({role:"user",content:Qe.retry||`Reply using ${r} tool`})}else return}}async function Es(e,t,r,n=""){return n&&(e.stream.markdown(""),e.stream.progress(n)),j0(e,r,t.name)}function Fu(e){let t=e.messages.concat();return{restore(){e.messages.length=0,e.messages.push(...t)}}}function wm(e,t,r=""){let n=e.messages;if(!t&&r){n.push({role:"assistant",content:r});return}let s=n.pop();if(s.role=="system"||s.role=="assistant")n.push(s,{role:"user",content:t||"?"});else if(s.role=="tool"){let u=s.content.slice();u.push({...u.pop(),result:t}),n.push({role:"tool",content:u})}else if(s.role=="user"){let{content:u}=s;u=Array.isArray(u)?u.slice():[{type:"text",text:u}],u.push({type:"text",text:t}),n.push({role:"user",content:u})}else throw new Error("Unsupported prompt structure");r&&n.push({role:"assistant",content:r})}async function GT(e){return new Promise(t=>setTimeout(t,e*1e3))}var yy=require("vscode");var{evaluation:Y0}=oa,zR=()=>`
    Evaluate the task and reply using ${Y0.name} tool, taking into account the included documents (if any)
`,HT=Y0.compute;async function KT(e){let t=Fu(e),r=await Es(e,Y0,zR(),"Deciding next steps...");return t.restore(),r}var my=require("vscode");var{editor:GR,question:VR,summary:vy,followups:JT}=oa,{fs:WT}=my.workspace,HR=(e,t)=>`
    Use ${GR.name} tool to create requirements document in the ${e}/ directory.
    Clarify the request, removing any ambiguities or omissions.
    Use ${VR.name} tool to obtain the missing information.
    For the existing project, include implied requirements derived from the project configuration and context.
    Focus strictly on the requirements - DO NOT try to design the solution, define data structures or write some code at this point.
    Adjust the content and structure according to the task complexity (should very short and simple for trivial tasks).
    Produce a minimal, but complete document, do not leave any open questions for the future.

    Also consider the suggestions below:
    <suggestions>
      ${t}
    </suggestions>

    Use a very dense, concise, minimalist writing style.
    Provide a short summary using ${vy.name} tool.
`,KR=(e,t)=>`Read the existing requirements document(s):
    <document-filenames>
      ${e}
    </document-filenames>

    Make the following changes in the document(s):
    <changes>
      ${t}
    </changes>

    Modify the document(s), then deliver a very short summary using ${vy.name} tool.
`,WR=()=>`
    Carefully review the requirements document to find any missing elements.
    Add or correct any significant items and remove anything that is not strictly necessary.
    Focus strictly on the requirements - DO NOT try to design the solution, define data structures or write some code at this point.
`,JR=()=>`
    Suggest possible high-level modifications which may make the requirements more clear and easy to understand. 
    For example, increase or decrease detalization, add/remove sections, split/merge sections etc.
    Offer them as followup actions using ${JT.name} tool.
    Never ever include any other actions, only modifications of the requirements.
`;async function ZT(e,t,r){e.shared.phase="clarify";let n=Fu(e),s=new Set;for(let[u]of await WT.readDirectory(Rn(t)))s.add(u);for(await Es(e,vy,HR(t,r),"Clarifying requirements...");!e.shared.auto;){let u=Fu(e),{actions:h}=await Es(e,JT,JR());u.restore();let b=["auto","improve","next"],N=h.map(V=>({command:"",prompt:V,label:V}));N.push({command:"improve",prompt:"",label:"\u2B6E\xA0 review and improve"}),N.push({command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"}),N.push({command:"next",prompt:"",label:"\u25B7\xA0 next step (Enter)"});let A=await Fp(e,{commands:b,followups:N});if(n.restore(),A.command=="next"||A.command=="auto"||!A.prompt&&!A.command)break;let U=[];for(let[V,Q]of await WT.readDirectory(Rn(t)))Q&my.FileType.File&&!s.has(V)&&U.push(t+"/"+V);r=A.command=="improve"?WR():A.prompt,await Es(e,vy,KR(U,r),"Updating requirements...")}e.shared.phase=""}var _y=require("vscode");var{editor:ZR,summary:hy,followups:QT}=oa,{fs:XT}=_y.workspace,XR=e=>`
    Use ${ZR.name} tool to create solution design document(s) in the ${e}/ directory.
    Analyze the current project, do the research and design the solution.
    Your goal is to find the most simple solution, very easy to understand and maintain. 
    Only include the features which are explicitely required. Skip anything that can be added at a later stage.
    Adjust the content and structure of the spec according to the task complexity (should very short and simple for trivial tasks).
    Apply a very dense, concise, minimalist writing style.
    Provide a short specification summary using ${hy.name} tool.
`,QR=(e,t)=>`Read the existing design document(s):
    <document-filenames>
      ${e}
    </document-filenames>

    Make the following changes in the document(s):
    <changes>
      ${t}
    </changes>

    Modify the document(s), then deliver a very short summary using ${hy.name} tool.
`,ek=()=>`
    Carefully review the design document(s) to find any missing elements.
    Add or correct any significant items and remove anything that is not strictly necessary.
    Focus strictly on the solution design - DO NOT try to write code, DO NOT make step-by-step plan at this point.
`,tk=()=>`
    Suggest possible high-level modifications which may make the solution design more clear and easy to understand. 
    For example, increase or decrease detalization, add/remove sections, split/merge sections etc.
    Offer them as followup actions using ${QT.name} tool.
    Never ever include any other actions, only modifications of the solution design.
`;async function eI(e,t,r){e.shared.phase="design";let n=Fu(e),s=new Set;for(let[u]of await XT.readDirectory(Rn(t)))s.add(u);for(await Es(e,hy,XR(t),"Designing solution...");!e.shared.auto;){let u=Fu(e),{actions:h}=await Es(e,QT,tk());u.restore();let b=["auto","improve","next"],N=h.map(Q=>({command:"",prompt:Q,label:Q}));N.push({command:"improve",prompt:"",label:"\u2B6E\xA0 review and improve"}),N.push({command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"}),N.push({command:"next",prompt:"",label:"\u25B7\xA0 next step (Enter)"});let A=await Fp(e,{commands:b,followups:N});if(n.restore(),A.command=="next"||A.command=="auto"||!A.prompt&&!A.command)break;let U=[];for(let[Q,pe]of await XT.readDirectory(Rn(t)))pe&_y.FileType.File&&!s.has(Q)&&U.push(t+"/"+Q);let V=A.command=="improve"?ek():A.prompt;await Es(e,hy,QR(U,V),"Updating design...")}e.shared.phase=""}var zh=require("vscode");var{list:gy,followups:tI}=oa,rk=()=>`
    Split the task into smaller, more manageable steps and present them using the ${gy.name} tool.
    The list should contain task steps. If the work is very small, use just one single step.
    Each step has a name (header) and a specification of the work to do in this step.
    Strictly follow the requirements and design documents if available.
    Take into account the changes made in the previous tasks.
    Carefully think through all steps and mentally verify the proposed implementation.
    Follow KISS, YAGNI and SOLID principles, focus on simplicity above all other things.
    Use a very dense, concise, minimalist writing style.
`,nk=(e,t)=>`Read the existing implementation plan:
    <document-filename>
      ${e}/implementation_plan.md
    </document-filename>

    Make the following changes in the plan:
    <changes>
      ${t}
    </changes>

    Modify the plan, then present it using the ${gy.name} tool.
    The list should contain task steps. If the work is very small, use just one single step.
    Each step has a name (header) and a specification of the work to do in this step.
    Strictly follow the requirements and design documents if available.
    Take into account the changes made in the previous tasks.
    Carefully think through all steps and mentally verify the proposed implementation.
    Follow KISS, YAGNI and SOLID principles.
`,ak=()=>`
    Carefully analyse each section of the plan to identify any inconsistencies or logical errors. 
    Check for edge cases, cross-dependencies and anything, that can affect successful implementation.
`,ik=()=>`
    Suggest possible high-level modifications which may improve this implementation plan. 
    For example, increase or decrease detalization, add/remove sections, split/merge sections etc.
    Offer them as followup actions using ${tI.name} tool.
    Never ever include any other actions, only modifications of the implementation plan.
`,ok=({title:e,items:t})=>`# ${e}

${t.map(({header:r,content:n})=>`## ${r}

${n}

`).join("")}
`;function sk(e,t,r){r.stream.button({title:"Edit",command:"multicoder.action",arguments:[n],tooltip:"Click to edit the plan"});async function n(){let s=await zh.workspace.openTextDocument(t);zh.window.showTextDocument(s)}r.stream.markdown(`
`+e.comments+`
`)}async function uk(e,t,r){if(await Of(r)==t)return;let s=await zh.commands.executeCommand("vscode.executeDocumentSymbolProvider",r);if(!s||s.length===0)return;let u=await zh.workspace.openTextDocument(r),h=s[0],b=h.name.replace(/^[#\s]+/,""),N=h.children.map(({name:A,range:U})=>({header:A.replace(/^[#\s]+/,""),content:u.getText(U).slice(A.length).trim()}));e.title=b,e.items=N}async function rI(e,t,r){e.shared.phase="plan";let n=Fu(e),s=await Es(e,gy,rk(),"Planning..."),u=Rn(t+"/implementation_plan.md");for(;;){let h=ok(s);if(await Ng(u,h),e.shared.auto)break;sk(s,u,e);let b=Fu(e),{actions:N}=await Es(e,tI,ik());b.restore();let A=["auto","improve","next"],U=N.map(Q=>({command:"",prompt:Q,label:Q}));U.push({command:"improve",prompt:"",label:"\u2B6E\xA0 review and improve"}),U.push({command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"}),U.push({command:"next",prompt:"",label:"\u25B7\xA0 next step (Enter)"});let V=await Fp(e,{commands:A,followups:U});if(n.restore(),V.command=="next"||V.command=="auto"||!V.prompt&&!V.command){await uk(s,h,u);break}r=V.command=="improve"?ak():V.prompt,s=await Es(e,gy,nk(t,r),"Updating planning...")}return e.shared.phase="",s}var Tm=require("vscode");var{summary:vg}=oa,ck=()=>`
    Implement the task, then deliver the summary using ${vg.name} tool.
`,lk=e=>`
    We have now implemented all the steps of the plan:
    <implemented>
    ${e.title}
    </implemented>
    Deliver the summary of this work using ${vg.name} tool.
`,fk=(e,t,r,n)=>`Step ${e+1} (${t}) is now completed.

${r}

${n.length?"Completed changes:":""}
${n.map(({summary:s,path:u})=>`- ${s} ( ${u} )`).join(`
`)}
`,dk=(e,t)=>`We will now work on the step ${t+1}:

## ${e.header}

${e.content}
`,pk=(e,t,r)=>`
<table><tr><th> $(list-tree) ${e} (${t+1}/${r})</th></tr></table>
`;async function $0(e,t,r,n,s){let u=null,h=e.shared.edits.length;if(!r||r.items.length==1)u=await Es(e,vg,ck());else{wm(e,"",`Do you want me to work on ${r.title}?`);for(let b=0;b<r.items.length;b++){let N=Fu(e),A=r.items[b],U=A.header.replace(/^[\d\.\s]+/,""),V=e.shared.edits.length,Q=new Tm.MarkdownString("");Q.supportHtml=!0,Q.supportThemeIcons=!0,Q.appendMarkdown(pk(U,b,r.items.length)),e.stream.markdown(Q),wm(e,dk(A,b));let pe=await q0(e,n+1,s+"/"+(b+1),U);N.restore();let de=e.shared.edits.slice(V);wm(e,fk(b,U,pe.text,de))}u=await Es(e,vg,lk(r))}if(e.shared.auto&&n)return u;for(;;){let b=e.shared.edits.slice(h);if(b.length>1&&await vk(e,b,t||(r==null?void 0:r.title)||"Task completed"),!n)return u;let U=await Fp(e,{commands:["auto","next"],followups:[{command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"},{command:"next",prompt:"",label:"\u25B7\xA0 next step (Enter)"}]});if(U.command=="next"||U.command=="auto")return u;h=e.shared.edits.length,await Es(e,vg,U.prompt)}}async function vk(e,t,r){let n=new Tm.MarkdownString(`

`),s=(...Q)=>`command:multicoder.diffView?${encodeURIComponent(JSON.stringify(Q))}`,u=Q=>`<span class="codicon codicon-${Q}" style="color:var(--vscode-foreground);"></span>`;n.supportThemeIcons=!0,n.isTrusted={enabledCommands:["multicoder.diffView"]},n.supportHtml=!0,n.appendMarkdown(`<h3>${u("check")} ${r}</h3>

`),t.forEach(({summary:Q,path:pe,id:de})=>{n.appendMarkdown(`- [${Q}](${s(pe,de,e.id)} 'Open Diff')
`)}),n.appendMarkdown(`

`),e.stream.markdown(n),e.stream.button({title:"Apply All",command:"multicoder.action",arguments:[V],tooltip:"Click to apply changes, click again to revert"});let h=new Set(t.map(({path:Q})=>Q)),b=L_(),N=new Map;async function A(Q){try{return await Of(Q)}catch{return""}}for(let Q of h.values()){let pe="",de="",ue=Rn(Q),ne=Mu(ue);b.find(ye=>ye.path===ne.path)?pe=(await Tm.workspace.openTextDocument(ne)).getText():pe=await A(ne),de=await A(ue),N.set(Q,{before:pe,after:de})}let U=!1;async function V(){let Q=new Tm.WorkspaceEdit;for(let pe of h.values()){let{before:de,after:ue}=N.get(pe)||{},ne=Mu(Rn(pe));de||(ne=ne.with({scheme:"untitled"}));let ye=await Tm.workspace.openTextDocument(ne),Ae=ye.lineAt(0).range.union(ye.lineAt(ye.lineCount-1).range),tt=ye.getText(),Ke=U?de:ue;tt!==Ke&&Q.replace(ne,Ae,Ke)}await Tm.workspace.applyEdit(Q),U=!U,e.log.info(r,{event:"action.all"})}}var{fs:mk}=yy.workspace,hk=".documents/task",_k=(e,t,r)=>`<document filename="${r}/${t}">
${e}
</document>
`;async function q0(e,t=0,r=hk,n=""){let s=Fu(e),u=0,h=0,b=null;for(;;){s.restore(),e.shared.phase="";for(let[U,V]of await mk.readDirectory(Rn(r)))if(V&yy.FileType.File){let Q=await Of(Rn(r+"/"+U));wm(e,_k(Q,U,r))}if(b)return await $0(e,n,b,t,r);let N="implement",A="";switch(e.request.command){case"chat":return{};case"spec":N="clarify";break;case"design":N="design";break;case"plan":N="plan";break;default:let U=await KT(e),[V,Q,pe]=HT(U);if(A=U.suggestions,U.architecturalScale==0&&!t)return{};U.splitIntoParts&&(N="plan"),U.designSolution&&!h&&(N="design"),U.clarifyRequirements&&!u&&!h&&!t&&(N="clarify"),!h&&Q>2.5&&N!="clarify"&&(N="design"),pe>2&&N=="implement"&&(N="plan")}if(N=="clarify"){await ZT(e,r,A),++u;continue}if(N=="design"){await eI(e,r,A),++h;continue}if(N=="plan"){b=await rI(e,r,A);continue}return await $0(e,n,null,t,r)}}var gk=e=>`We have a new request:
<request>
${e}
</request>
`;async function nI(e){let t=e.request.prompt,r=Fu(e);wm(e,gk(t)),(await q0(e)).text?wm(e,""," "):(r.restore(),await j0(e,t))}var iI=require("vscode"),yk=()=>`
Multicoder can work with LLM models provided by **GitHub Copilot** (default configuration) or 
send requests directly to the core provider APIs (**Anthropic**, **OpenAI**).

If you have your own API key and want to use it instead of the Github models, select 'Core Providers' in the Model Provider dropdown (settings panel)
and set your API key(s) using the buttons below.

`;async function aI(e,t){var n;let r=await e.ext.secrets.get(t)||((n=process==null?void 0:process.env)==null?void 0:n[t]);return r&&r.slice(0,12)+"..."+r.slice(-4)}async function B0(e){let{log:t,stream:r}=e;iI.commands.executeCommand("workbench.action.openSettings","@ext:multicoder.multicoder"),t.info("options",{event:"options"}),r.markdown(yk());let n=await aI(e,"ANTHROPIC_API_KEY");r.markdown(`Anthropic API key: ${n}`),r.button({command:"multicoder.storeApiKey",title:"Set Anthropic key",arguments:["ANTHROPIC_API_KEY","Anthropic API key"]}),r.markdown(`

`);let s=await aI(e,"OPENAI_API_KEY");r.markdown(`OpenAI API key: ${s}`),r.button({command:"multicoder.storeApiKey",title:"Set OpenAI key",arguments:["OPENAI_API_KEY","OpenAI API key"]})}var oI,sI;async function Sk(e){var V,Q;let{request:t,ext:r}=e,n=t.model.id,s=Rv.workspace.getConfiguration("multicoder"),u=s.get("modelProvider");if(n==oI&&u==sI&&e.model)return;oI=n,sI=u;let h=t.model.family;if(h.startsWith("o1")&&(h="gpt-4o"),u=="default"&&(u="copilot"),u=="copilot"){e.model=c0({id:h,provider:"copilot",apiKey:""});return}if(u=="auto"&&(u=(V=f0.find(pe=>pe.family==h))==null?void 0:V.provider,!u))throw new Error("Cannot find model: "+h);let b=pE.find(pe=>pe.id==u),N=f0.find(pe=>pe.provider==u&&pe.family==h),{envKeyName:A}=b,U=await r.secrets.get(A)||((Q=process==null?void 0:process.env)==null?void 0:Q[A]);if(!U){await B0(e);return}e.model=c0({...N,apiKey:U})}function bk({history:e}){for(let t=e.length-1;t>=0;t--){let r=e[t];if(r instanceof Rv.ChatResponseTurn){let{id:n,messages:s}=r.result.metadata||{};if(n)return[n,s]}}return[]}function uI(e){let{ext:t,log:r,recent:n}=e,s=Rv.chat.createChatParticipant("multicoder",async(U,V,Q,pe)=>{let[de=Ig(),ue]=bk(V),ne=n.get(de);if(!ue&&V.history.length){let ye=V.history[0];ne=n.get(ye.prompt)}ue=ue||[],ne||(ne={id:de,messages:ue,shared:{},...e,request:{},chat:{},stream:{}},ne.log={...e.log,context:ne},n.set(de,ne)),de=ne.id,Object.assign(ne,{token:pe}),Object.assign(ne.request,U),Object.assign(ne.chat,V),Object.assign(ne.stream,Q),V.history.length||n.set(U.prompt,ne),A(ne.request);try{if(await Sk(ne),!ne.model)return;if(U.command=="options")return await B0(ne),{metadata:{id:de,messages:ue}};let ye=await VT(ne,nI)||{};return ye.id=de,ye.messages=ne.messages,{metadata:ye}}catch(ye){throw r.error(ye),ne.model=null,ye}});s.iconPath=Rv.Uri.joinPath(t.extensionUri,"resources","multicoder.png"),s.onDidReceiveFeedback(({kind:U})=>{r.info(U?"Good":"Bad",{event:"feedback"})});let u=t.extension.packageJSON.contributes.chatParticipants[0].commands,h=u.filter(({when:U})=>U==null?void 0:U.startsWith("!")).map(({name:U})=>U),b=[...h,"resume"];s.followupProvider={provideFollowups(U){var V;return N(U.metadata?U.metadata.commands:b),((V=U.metadata)==null?void 0:V.followups)||[]}};function N(U){for(let{name:V,when:Q}of u){let pe=!!U&&U.includes(V)!=Q.startsWith("!");Rv.commands.executeCommand("setContext",Q.replace("!",""),pe)}}function A(U){!U.command&&u.find(({name:V})=>"/"+V==U.prompt)&&(r.warn("Command not processed: "+U.prompt),U.command=U.prompt.slice(1),U.prompt="")}}function Ek(e){let t={ext:e,config:cI.workspace.getConfiguration("multicoder"),log:null,telemetry:null,recent:new Map};FS(t),jS(t),$S(t),GS(t),uI(t)}function wk(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

@microsoft/1ds-core-js/dist/es5/ms.core.js:
  (*!
   * 1DS JS SDK Core, 4.3.4
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.5 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.3
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

@microsoft/1ds-post-js/dist/es5/ms.post.js:
  (*!
   * 1DS JS SDK POST plugin, 4.3.4
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.5 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.3
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.4
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.5 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.4
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.5 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.3
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)
*/
//# sourceMappingURL=extension.js.map
