var kR=Object.create;var Hy=Object.defineProperty;var AR=Object.getOwnPropertyDescriptor;var PR=Object.getOwnPropertyNames;var MR=Object.getPrototypeOf,LR=Object.prototype.hasOwnProperty;var FR=(t,e)=>()=>(t&&(e=t(t=0)),e);var ln=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Zb=(t,e)=>{for(var r in e)Hy(t,r,{get:e[r],enumerable:!0})},_E=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of PR(e))!LR.call(t,i)&&i!==r&&Hy(t,i,{get:()=>e[i],enumerable:!(n=AR(e,i))||n.enumerable});return t};var Z_=(t,e,r)=>(r=t!=null?kR(MR(t)):{},_E(e||!t||!t.__esModule?Hy(r,"default",{value:t,enumerable:!0}):r,t)),yE=t=>_E(Hy({},"__esModule",{value:!0}),t);var Uh=ln(Gy=>{"use strict";Object.defineProperty(Gy,"__esModule",{value:!0});Gy.constants=void 0;Gy.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_SYMLINK:2097152,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4}});var zy=ln(X_=>{"use strict";Object.defineProperty(X_,"__esModule",{value:!0});X_.Stats=void 0;var YR=Uh(),{S_IFMT:$R,S_IFDIR:BR,S_IFREG:qR,S_IFBLK:HR,S_IFCHR:GR,S_IFLNK:VR,S_IFIFO:zR,S_IFSOCK:WR}=YR.constants,Vy=class t{static build(e,r=!1){let n=new t,{uid:i,gid:a,atime:l,mtime:v,ctime:_}=e,y=r?U=>BigInt(U):U=>U;n.uid=y(i),n.gid=y(a),n.rdev=y(e.rdev),n.blksize=y(4096),n.ino=y(e.ino),n.size=y(e.getSize()),n.blocks=y(1),n.atime=l,n.mtime=v,n.ctime=_,n.birthtime=_,n.atimeMs=y(l.getTime()),n.mtimeMs=y(v.getTime());let C=y(_.getTime());if(n.ctimeMs=C,n.birthtimeMs=C,r){n.atimeNs=BigInt(l.getTime())*BigInt(1e6),n.mtimeNs=BigInt(v.getTime())*BigInt(1e6);let U=BigInt(_.getTime())*BigInt(1e6);n.ctimeNs=U,n.birthtimeNs=U}return n.dev=y(0),n.mode=y(e.mode),n.nlink=y(e.nlink),n}_checkModeProperty(e){return(Number(this.mode)&$R)===e}isDirectory(){return this._checkModeProperty(BR)}isFile(){return this._checkModeProperty(qR)}isBlockDevice(){return this._checkModeProperty(HR)}isCharacterDevice(){return this._checkModeProperty(GR)}isSymbolicLink(){return this._checkModeProperty(VR)}isFIFO(){return this._checkModeProperty(zR)}isSocket(){return this._checkModeProperty(WR)}};X_.Stats=Vy;X_.default=Vy});var u_=ln(jh=>{"use strict";Object.defineProperty(jh,"__esModule",{value:!0});jh.bufferFrom=jh.bufferAllocUnsafe=jh.Buffer=void 0;var Wy=require("buffer");Object.defineProperty(jh,"Buffer",{enumerable:!0,get:function(){return Wy.Buffer}});function bE(t,...e){return new Wy.Buffer(t,...e)}var KR=Wy.Buffer.allocUnsafe||bE;jh.bufferAllocUnsafe=KR;var JR=Wy.Buffer.from||bE;jh.bufferFrom=JR});var rw=ln(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});Wc.AssertionError=Wc.RangeError=Wc.TypeError=Wc.Error=void 0;Wc.message=EE;Wc.E=Ct;var Yh=require("assert"),Qb=require("util"),wE=typeof Symbol>"u"?"_kCode":Symbol("code"),SE={};function tw(t){return class extends t{constructor(r,...n){super(EE(r,n)),this.code=r,this[wE]=r,this.name=`${super.name} [${this[wE]}]`}}}var Jy=typeof globalThis<"u"?globalThis:global,ew=class extends Jy.Error{constructor(e){if(typeof e!="object"||e===null)throw new Wc.TypeError("ERR_INVALID_ARG_TYPE","options","object");e.message?super(e.message):super(`${Qb.inspect(e.actual).slice(0,128)} ${e.operator} ${Qb.inspect(e.expected).slice(0,128)}`),this.generatedMessage=!e.message,this.name="AssertionError [ERR_ASSERTION]",this.code="ERR_ASSERTION",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,Wc.Error.captureStackTrace(this,e.stackStartFunction)}};Wc.AssertionError=ew;function EE(t,e){Yh.strictEqual(typeof t,"string");let r=SE[t];Yh(r,`An invalid error message key was used: ${t}.`);let n;if(typeof r=="function")n=r;else{if(n=Qb.format,e===void 0||e.length===0)return r;e.unshift(r)}return String(n.apply(null,e))}function Ct(t,e){SE[t]=typeof e=="function"?e:String(e)}Wc.Error=tw(Jy.Error);Wc.TypeError=tw(Jy.TypeError);Wc.RangeError=tw(Jy.RangeError);Ct("ERR_ARG_NOT_ITERABLE","%s must be iterable");Ct("ERR_ASSERTION","%s");Ct("ERR_BUFFER_OUT_OF_BOUNDS",QR);Ct("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received");Ct("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s");Ct("ERR_CPU_USAGE","Unable to obtain cpu usage %s");Ct("ERR_DNS_SET_SERVERS_FAILED",(t,e)=>`c-ares failed to set servers: "${t}" [${e}]`);Ct("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value");Ct("ERR_ENCODING_NOT_SUPPORTED",t=>`The "${t}" encoding is not supported`);Ct("ERR_ENCODING_INVALID_ENCODED_DATA",t=>`The encoded data was not valid for encoding ${t}`);Ct("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client");Ct("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s");Ct("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding");Ct("ERR_INDEX_OUT_OF_RANGE","Index out of range");Ct("ERR_INVALID_ARG_TYPE",ZR);Ct("ERR_INVALID_ARRAY_LENGTH",(t,e,r)=>(Yh.strictEqual(typeof r,"number"),`The array "${t}" (length ${r}) must be of length ${e}.`));Ct("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s");Ct("ERR_INVALID_CALLBACK","Callback must be a function");Ct("ERR_INVALID_CHAR","Invalid character in %s");Ct("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column");Ct("ERR_INVALID_FD",'"fd" must be a positive integer: %s');Ct("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s');Ct("ERR_INVALID_FILE_URL_PATH","File URL path %s");Ct("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent");Ct("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s");Ct("ERR_INVALID_OPT_VALUE",(t,e)=>`The value "${String(e)}" is invalid for option "${t}"`);Ct("ERR_INVALID_OPT_VALUE_ENCODING",t=>`The value "${String(t)}" is invalid for option "encoding"`);Ct("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL');Ct("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s");Ct("ERR_INVALID_THIS",'Value of "this" must be of type %s');Ct("ERR_INVALID_TUPLE","%s must be an iterable %s tuple");Ct("ERR_INVALID_URL","Invalid URL: %s");Ct("ERR_INVALID_URL_SCHEME",t=>`The URL must be ${Ky(t,"scheme")}`);Ct("ERR_IPC_CHANNEL_CLOSED","Channel closed");Ct("ERR_IPC_DISCONNECTED","IPC channel is already disconnected");Ct("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe");Ct("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks");Ct("ERR_MISSING_ARGS",XR);Ct("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Ct("ERR_NAPI_CONS_FUNCTION","Constructor must be a function");Ct("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object");Ct("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support");Ct("ERR_NO_LONGER_SUPPORTED","%s is no longer supported");Ct("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s");Ct("ERR_SOCKET_ALREADY_BOUND","Socket is already bound");Ct("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536");Ct("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6");Ct("ERR_SOCKET_CANNOT_SEND","Unable to send data");Ct("ERR_SOCKET_CLOSED","Socket is closed");Ct("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running");Ct("ERR_STDERR_CLOSE","process.stderr cannot be closed");Ct("ERR_STDOUT_CLOSE","process.stdout cannot be closed");Ct("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode");Ct("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s");Ct("ERR_TLS_DH_PARAM_SIZE",t=>`DH parameter size ${t} is less than 2048`);Ct("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout");Ct("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate");Ct("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext');Ct("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected");Ct("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming");Ct("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0");Ct("ERR_UNKNOWN_ENCODING","Unknown encoding: %s");Ct("ERR_UNKNOWN_SIGNAL","Unknown signal: %s");Ct("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type");Ct("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type");Ct("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl");function ZR(t,e,r){Yh(t,"name is required");let n;e.includes("not ")?(n="must not be",e=e.split("not ")[1]):n="must be";let i;if(Array.isArray(t))i=`The ${t.map(l=>`"${l}"`).join(", ")} arguments ${n} ${Ky(e,"type")}`;else if(t.includes(" argument"))i=`The ${t} ${n} ${Ky(e,"type")}`;else{let a=t.includes(".")?"property":"argument";i=`The "${t}" ${a} ${n} ${Ky(e,"type")}`}return arguments.length>=3&&(i+=`. Received type ${r!==null?typeof r:"null"}`),i}function XR(...t){Yh(t.length>0,"At least one arg needs to be specified");let e="The ",r=t.length;switch(t=t.map(n=>`"${n}"`),r){case 1:e+=`${t[0]} argument`;break;case 2:e+=`${t[0]} and ${t[1]} arguments`;break;default:e+=t.slice(0,r-1).join(", "),e+=`, and ${t[r-1]} arguments`;break}return`${e} must be specified`}function Ky(t,e){if(Yh(t,"expected is required"),Yh(typeof e=="string","thing is required"),Array.isArray(t)){let r=t.length;return Yh(r>0,"At least one expected value needs to be specified"),t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function QR(t,e){return e?"Attempt to write outside buffer bounds":`"${t}" is outside of buffer bounds`}});var Q_=ln(Tg=>{"use strict";Object.defineProperty(Tg,"__esModule",{value:!0});Tg.ENCODING_UTF8=void 0;Tg.assertEncoding=tO;Tg.strToEncoding=rO;var nw=u_(),eO=rw();Tg.ENCODING_UTF8="utf8";function tO(t){if(t&&!nw.Buffer.isEncoding(t))throw new eO.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",t)}function rO(t,e){return!e||e===Tg.ENCODING_UTF8?t:e==="buffer"?new nw.Buffer(t):new nw.Buffer(t).toString(e)}});var Xy=ln(ey=>{"use strict";Object.defineProperty(ey,"__esModule",{value:!0});ey.Dirent=void 0;var nO=Uh(),iO=Q_(),{S_IFMT:aO,S_IFDIR:oO,S_IFREG:sO,S_IFBLK:uO,S_IFCHR:lO,S_IFLNK:cO,S_IFIFO:fO,S_IFSOCK:dO}=nO.constants,Zy=class t{constructor(){this.name="",this.path="",this.parentPath="",this.mode=0}static build(e,r){let n=new t,{mode:i}=e.getNode();return n.name=(0,iO.strToEncoding)(e.getName(),r),n.mode=i,n.path=e.getParentPath(),n.parentPath=n.path,n}_checkModeProperty(e){return(this.mode&aO)===e}isDirectory(){return this._checkModeProperty(oO)}isFile(){return this._checkModeProperty(sO)}isBlockDevice(){return this._checkModeProperty(uO)}isCharacterDevice(){return this._checkModeProperty(lO)}isSymbolicLink(){return this._checkModeProperty(cO)}isFIFO(){return this._checkModeProperty(fO)}isSocket(){return this._checkModeProperty(dO)}};ey.Dirent=Zy;ey.default=Zy});var iw=ln(Qy=>{"use strict";Object.defineProperty(Qy,"__esModule",{value:!0});Qy.createProcess=TE;var pO=()=>{if(typeof process<"u")return process;try{return require("process")}catch{return}};function TE(){let t=pO()||{};return t.cwd||(t.cwd=()=>"/"),t.emitWarning||(t.emitWarning=(e,r)=>{console.warn(`${r}${r?": ":""}${e}`)}),t.env||(t.env={}),t}Qy.default=TE()});var xE=ln(ap=>{"use strict";Object.defineProperty(ap,"__esModule",{value:!0});ap.File=ap.Link=ap.Node=ap.SEP=void 0;var r0=iw(),ip=u_(),mO=Uh(),NE=require("events"),vO=zy(),{S_IFMT:ih,S_IFDIR:hO,S_IFREG:CE,S_IFLNK:IE,S_IFCHR:gO,O_APPEND:_O}=mO.constants,e0=()=>{var t,e;return(e=(t=r0.default.getuid)===null||t===void 0?void 0:t.call(r0.default))!==null&&e!==void 0?e:0},t0=()=>{var t,e;return(e=(t=r0.default.getgid)===null||t===void 0?void 0:t.call(r0.default))!==null&&e!==void 0?e:0};ap.SEP="/";var aw=class extends NE.EventEmitter{constructor(e,r=438){super(),this._uid=e0(),this._gid=t0(),this._atime=new Date,this._mtime=new Date,this._ctime=new Date,this.rdev=0,this._nlink=1,this.mode=r,this.ino=e}set ctime(e){this._ctime=e}get ctime(){return this._ctime}set uid(e){this._uid=e,this.ctime=new Date}get uid(){return this._uid}set gid(e){this._gid=e,this.ctime=new Date}get gid(){return this._gid}set atime(e){this._atime=e,this.ctime=new Date}get atime(){return this._atime}set mtime(e){this._mtime=e,this.ctime=new Date}get mtime(){return this._mtime}get perm(){return this.mode&~ih}set perm(e){this.mode=this.mode&ih|e&~ih,this.ctime=new Date}set nlink(e){this._nlink=e,this.ctime=new Date}get nlink(){return this._nlink}getString(e="utf8"){return this.atime=new Date,this.getBuffer().toString(e)}setString(e){this.buf=(0,ip.bufferFrom)(e,"utf8"),this.touch()}getBuffer(){return this.atime=new Date,this.buf||this.setBuffer((0,ip.bufferAllocUnsafe)(0)),(0,ip.bufferFrom)(this.buf)}setBuffer(e){this.buf=(0,ip.bufferFrom)(e),this.touch()}getSize(){return this.buf?this.buf.length:0}setModeProperty(e){this.mode=e}isFile(){return(this.mode&ih)===CE}isDirectory(){return(this.mode&ih)===hO}isSymlink(){return(this.mode&ih)===IE}isCharacterDevice(){return(this.mode&ih)===gO}makeSymlink(e){this.mode=IE|438,this.symlink=e}write(e,r=0,n=e.length,i=0){if(this.buf||(this.buf=(0,ip.bufferAllocUnsafe)(0)),i+n>this.buf.length){let a=(0,ip.bufferAllocUnsafe)(i+n);this.buf.copy(a,0,0,this.buf.length),this.buf=a}return e.copy(this.buf,i,r,r+n),this.touch(),n}read(e,r=0,n=e.byteLength,i=0){this.atime=new Date,this.buf||(this.buf=(0,ip.bufferAllocUnsafe)(0));let a=n;a>e.byteLength&&(a=e.byteLength),a+i>this.buf.length&&(a=this.buf.length-i);let l=e instanceof ip.Buffer?e:ip.Buffer.from(e.buffer);return this.buf.copy(l,r,i,i+a),a}truncate(e=0){if(!e)this.buf=(0,ip.bufferAllocUnsafe)(0);else if(this.buf||(this.buf=(0,ip.bufferAllocUnsafe)(0)),e<=this.buf.length)this.buf=this.buf.slice(0,e);else{let r=(0,ip.bufferAllocUnsafe)(e);this.buf.copy(r),r.fill(0,this.buf.length),this.buf=r}this.touch()}chmod(e){this.mode=this.mode&ih|e&~ih,this.touch()}chown(e,r){this.uid=e,this.gid=r,this.touch()}touch(){this.mtime=new Date,this.emit("change",this)}canRead(e=e0(),r=t0()){return!!(this.perm&4||r===this.gid&&this.perm&32||e===this.uid&&this.perm&256)}canWrite(e=e0(),r=t0()){return!!(this.perm&2||r===this.gid&&this.perm&16||e===this.uid&&this.perm&128)}canExecute(e=e0(),r=t0()){return!!(this.perm&1||r===this.gid&&this.perm&8||e===this.uid&&this.perm&64)}del(){this.emit("delete",this)}toJSON(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}}};ap.Node=aw;var ow=class t extends NE.EventEmitter{get steps(){return this._steps}set steps(e){this._steps=e;for(let[r,n]of this.children.entries())r==="."||r===".."||n==null||n.syncSteps()}constructor(e,r,n){super(),this.children=new Map,this._steps=[],this.ino=0,this.length=0,this.vol=e,this.parent=r,this.name=n,this.syncSteps()}setNode(e){this.node=e,this.ino=e.ino}getNode(){return this.node}createChild(e,r=this.vol.createNode(CE|438)){let n=new t(this.vol,this,e);return n.setNode(r),r.isDirectory()&&(n.children.set(".",n),n.getNode().nlink++),this.setChild(e,n),n}setChild(e,r=new t(this.vol,this,e)){return this.children.set(e,r),r.parent=this,this.length++,r.getNode().isDirectory()&&(r.children.set("..",this),this.getNode().nlink++),this.getNode().mtime=new Date,this.emit("child:add",r,this),r}deleteChild(e){e.getNode().isDirectory()&&(e.children.delete(".."),this.getNode().nlink--),this.children.delete(e.getName()),this.length--,this.getNode().mtime=new Date,this.emit("child:delete",e,this)}getChild(e){return this.getNode().mtime=new Date,this.children.get(e)}getPath(){return this.steps.join(ap.SEP)}getParentPath(){return this.steps.slice(0,-1).join(ap.SEP)}getName(){return this.steps[this.steps.length-1]}toJSON(){return{steps:this.steps,ino:this.ino,children:Array.from(this.children.keys())}}syncSteps(){this.steps=this.parent?this.parent.steps.concat([this.name]):[this.name]}};ap.Link=ow;var sw=class{constructor(e,r,n,i){this.link=e,this.node=r,this.flags=n,this.fd=i,this.position=0,this.flags&_O&&(this.position=this.getSize())}getString(e="utf8"){return this.node.getString()}setString(e){this.node.setString(e)}getBuffer(){return this.node.getBuffer()}setBuffer(e){this.node.setBuffer(e)}getSize(){return this.node.getSize()}truncate(e){this.node.truncate(e)}seekTo(e){this.position=e}stats(){return vO.default.build(this.node)}write(e,r=0,n=e.length,i){typeof i!="number"&&(i=this.position);let a=this.node.write(e,r,n,i);return this.position=i+a,a}read(e,r=0,n=e.byteLength,i){typeof i!="number"&&(i=this.position);let a=this.node.read(e,r,n,i);return this.position=i+a,a}chmod(e){this.node.chmod(e)}chown(e,r){this.node.chown(e,r)}};ap.File=sw});var DE=ln(lw=>{"use strict";Object.defineProperty(lw,"__esModule",{value:!0});var uw;typeof setImmediate=="function"?uw=setImmediate.bind(typeof globalThis<"u"?globalThis:global):uw=setTimeout.bind(typeof globalThis<"u"?globalThis:global);lw.default=uw});var fw=ln(cw=>{"use strict";Object.defineProperty(cw,"__esModule",{value:!0});cw.default=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(()=>t()).catch(()=>{})});var RE=ln(dw=>{"use strict";Object.defineProperty(dw,"__esModule",{value:!0});function yO(t,e,r){let n=setTimeout.apply(typeof globalThis<"u"?globalThis:global,arguments);return n&&typeof n=="object"&&typeof n.unref=="function"&&n.unref(),n}dw.default=yO});var s0=ln(c_=>{"use strict";Object.defineProperty(c_,"__esModule",{value:!0});c_.FLAGS=c_.ERRSTR=void 0;var bO=Uh();c_.ERRSTR={PATH_STR:"path must be a string, Buffer, or Uint8Array",FD:"fd must be a file descriptor",MODE_INT:"mode must be an int",CB:"callback must be a function",UID:"uid must be an unsigned int",GID:"gid must be an unsigned int",LEN:"len must be an integer",ATIME:"atime must be an integer",MTIME:"mtime must be an integer",PREFIX:"filename prefix is required",BUFFER:"buffer must be an instance of Buffer or StaticBuffer",OFFSET:"offset must be an integer",LENGTH:"length must be an integer",POSITION:"position must be an integer"};var{O_RDONLY:OE,O_WRONLY:n0,O_RDWR:l_,O_CREAT:$h,O_EXCL:i0,O_TRUNC:a0,O_APPEND:o0,O_SYNC:kE}=bO.constants,AE;(function(t){t[t.r=OE]="r",t[t["r+"]=l_]="r+",t[t.rs=OE|kE]="rs",t[t.sr=t.rs]="sr",t[t["rs+"]=l_|kE]="rs+",t[t["sr+"]=t["rs+"]]="sr+",t[t.w=n0|$h|a0]="w",t[t.wx=n0|$h|a0|i0]="wx",t[t.xw=t.wx]="xw",t[t["w+"]=l_|$h|a0]="w+",t[t["wx+"]=l_|$h|a0|i0]="wx+",t[t["xw+"]=t["wx+"]]="xw+",t[t.a=n0|o0|$h]="a",t[t.ax=n0|o0|$h|i0]="ax",t[t.xa=t.ax]="xa",t[t["a+"]=l_|o0|$h]="a+",t[t["ax+"]=l_|o0|$h|i0]="ax+",t[t["xa+"]=t["ax+"]]="xa+"})(AE||(c_.FLAGS=AE={}))});var d_=ln(vi=>{"use strict";Object.defineProperty(vi,"__esModule",{value:!0});vi.unixify=vi.getWriteSyncArgs=vi.getWriteArgs=vi.bufToUint8=vi.isWin=void 0;vi.promisify=EO;vi.validateCallback=PE;vi.modeToNumber=ME;vi.nullCheck=LE;vi.pathToFilename=NO;vi.createError=BO;vi.genRndStr6=FE;vi.flagsToNumber=qO;vi.isFd=UE;vi.validateFd=hw;vi.streamToBuffer=HO;vi.dataToBuffer=gw;vi.bufferToEncoding=WO;vi.isReadableStream=KO;var f_=s0(),pw=rw(),vw=u_(),wO=Q_(),mw=u_(),SO=fw();vi.isWin=process.platform==="win32";function EO(t,e,r=n=>n){return(...n)=>new Promise((i,a)=>{t[e].bind(t)(...n,(l,v)=>l?a(l):i(r(v)))})}function PE(t){if(typeof t!="function")throw TypeError(f_.ERRSTR.CB);return t}function TO(t,e){if(typeof t=="number")return t;if(typeof t=="string")return parseInt(t,8);if(e)return ME(e)}function ME(t,e){let r=TO(t,e);if(typeof r!="number"||isNaN(r))throw new TypeError(f_.ERRSTR.MODE_INT);return r}function LE(t,e){if((""+t).indexOf("\0")!==-1){let r=new Error("Path must be a string without null bytes");if(r.code="ENOENT",typeof e!="function")throw r;return(0,SO.default)(()=>{e(r)}),!1}return!0}function IO(t){if(t.hostname!=="")throw new pw.TypeError("ERR_INVALID_FILE_URL_HOST",process.platform);let e=t.pathname;for(let r=0;r<e.length;r++)if(e[r]==="%"){let n=e.codePointAt(r+2)|32;if(e[r+1]==="2"&&n===102)throw new pw.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters")}return decodeURIComponent(e)}function NO(t){if(t instanceof Uint8Array&&(t=(0,mw.bufferFrom)(t)),typeof t!="string"&&!vw.Buffer.isBuffer(t)){try{if(!(t instanceof require("url").URL))throw new TypeError(f_.ERRSTR.PATH_STR)}catch{throw new TypeError(f_.ERRSTR.PATH_STR)}t=IO(t)}let e=String(t);return LE(e),e}var CO="ENOENT",xO="EBADF",DO="EINVAL",RO="EPERM",OO="EPROTO",kO="EEXIST",AO="ENOTDIR",PO="EMFILE",MO="EACCES",LO="EISDIR",FO="ENOTEMPTY",UO="ENOSYS",jO="ERR_FS_EISDIR",YO="ERR_OUT_OF_RANGE";function $O(t,e="",r="",n=""){let i="";switch(r&&(i=` '${r}'`),n&&(i+=` -> '${n}'`),t){case CO:return`ENOENT: no such file or directory, ${e}${i}`;case xO:return`EBADF: bad file descriptor, ${e}${i}`;case DO:return`EINVAL: invalid argument, ${e}${i}`;case RO:return`EPERM: operation not permitted, ${e}${i}`;case OO:return`EPROTO: protocol error, ${e}${i}`;case kO:return`EEXIST: file already exists, ${e}${i}`;case AO:return`ENOTDIR: not a directory, ${e}${i}`;case LO:return`EISDIR: illegal operation on a directory, ${e}${i}`;case MO:return`EACCES: permission denied, ${e}${i}`;case FO:return`ENOTEMPTY: directory not empty, ${e}${i}`;case PO:return`EMFILE: too many open files, ${e}${i}`;case UO:return`ENOSYS: function not implemented, ${e}${i}`;case jO:return`[ERR_FS_EISDIR]: Path is a directory: ${e} returned EISDIR (is a directory) ${r}`;case YO:return`[ERR_OUT_OF_RANGE]: value out of range, ${e}${i}`;default:return`${t}: error occurred, ${e}${i}`}}function BO(t,e="",r="",n="",i=Error){let a=new i($O(t,e,r,n));return a.code=t,r&&(a.path=r),a}function FE(){let t=(Math.random()+1).toString(36).substring(2,8);return t.length===6?t:FE()}function qO(t){if(typeof t=="number")return t;if(typeof t=="string"){let e=f_.FLAGS[t];if(typeof e<"u")return e}throw new pw.TypeError("ERR_INVALID_OPT_VALUE","flags",t)}function UE(t){return t>>>0===t}function hw(t){if(!UE(t))throw TypeError(f_.ERRSTR.FD)}function HO(t){let e=[];return new Promise((r,n)=>{t.on("data",i=>e.push(i)),t.on("end",()=>r(vw.Buffer.concat(e))),t.on("error",n)})}function gw(t,e=wO.ENCODING_UTF8){return vw.Buffer.isBuffer(t)?t:t instanceof Uint8Array?(0,mw.bufferFrom)(t):(0,mw.bufferFrom)(String(t),e)}var GO=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength);vi.bufToUint8=GO;var VO=(t,e,r,n,i,a)=>{hw(t);let l=0,v,_=null,y,C,U=typeof e,W=typeof r,K=typeof n,q=typeof i;U!=="string"?W==="function"?C=r:K==="function"?(l=r|0,C=n):q==="function"?(l=r|0,v=n,C=i):(l=r|0,v=n,_=i,C=a):W==="function"?C=r:K==="function"?(_=r,C=n):q==="function"&&(_=r,y=n,C=i);let V=gw(e,y);U!=="string"?typeof v>"u"&&(v=V.length):(l=0,v=V.length);let J=PE(C);return[t,U==="string",V,l,v,_,J]};vi.getWriteArgs=VO;var zO=(t,e,r,n,i)=>{hw(t);let a,l,v,_,y=typeof e!="string";y?(l=(r||0)|0,v=n,_=i):(_=r,a=n);let C=gw(e,a);return y?typeof v>"u"&&(v=C.length):(l=0,v=C.length),[t,C,l||0,v,_]};vi.getWriteSyncArgs=zO;function WO(t,e){return!e||e==="buffer"?t:t.toString(e)}function KO(t){return t!==null&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"&&t.readable===!0}var JO=(t,e)=>{let r=t[e];return e>0&&(r==="/"||vi.isWin&&r==="\\")},ZO=t=>{let e=t.length-1;if(e<2)return t;for(;JO(t,e);)e--;return t.substr(0,e+1)},XO=(t,e)=>{if(typeof t!="string")throw new TypeError("expected a string");return t=t.replace(/[\\\/]+/g,"/"),e!==!1&&(t=ZO(t)),t},QO=(t,e=!0)=>vi.isWin?(t=XO(t,e),t.replace(/^([a-zA-Z]+:|\.\/)/,"")):t;vi.unixify=QO});var jE=ln(u0=>{"use strict";Object.defineProperty(u0,"__esModule",{value:!0});u0.FileHandle=void 0;var Kl=d_(),_w=class{constructor(e,r){this.fs=e,this.fd=r}appendFile(e,r){return(0,Kl.promisify)(this.fs,"appendFile")(this.fd,e,r)}chmod(e){return(0,Kl.promisify)(this.fs,"fchmod")(this.fd,e)}chown(e,r){return(0,Kl.promisify)(this.fs,"fchown")(this.fd,e,r)}close(){return(0,Kl.promisify)(this.fs,"close")(this.fd)}datasync(){return(0,Kl.promisify)(this.fs,"fdatasync")(this.fd)}createReadStream(e){return this.fs.createReadStream("",Object.assign(Object.assign({},e),{fd:this}))}createWriteStream(e){return this.fs.createWriteStream("",Object.assign(Object.assign({},e),{fd:this}))}readableWebStream(e){return new ReadableStream({pull:async r=>{let n=await this.readFile();r.enqueue(n),r.close()}})}read(e,r,n,i){return(0,Kl.promisify)(this.fs,"read",a=>({bytesRead:a,buffer:e}))(this.fd,e,r,n,i)}readv(e,r){return(0,Kl.promisify)(this.fs,"readv",n=>({bytesRead:n,buffers:e}))(this.fd,e,r)}readFile(e){return(0,Kl.promisify)(this.fs,"readFile")(this.fd,e)}stat(e){return(0,Kl.promisify)(this.fs,"fstat")(this.fd,e)}sync(){return(0,Kl.promisify)(this.fs,"fsync")(this.fd)}truncate(e){return(0,Kl.promisify)(this.fs,"ftruncate")(this.fd,e)}utimes(e,r){return(0,Kl.promisify)(this.fs,"futimes")(this.fd,e,r)}write(e,r,n,i){return(0,Kl.promisify)(this.fs,"write",a=>({bytesWritten:a,buffer:e}))(this.fd,e,r,n,i)}writev(e,r){return(0,Kl.promisify)(this.fs,"writev",n=>({bytesWritten:n,buffers:e}))(this.fd,e,r)}writeFile(e,r){return(0,Kl.promisify)(this.fs,"writeFile")(this.fd,e,r)}};u0.FileHandle=_w});var YE=ln(l0=>{"use strict";Object.defineProperty(l0,"__esModule",{value:!0});l0.FsPromises=void 0;var Kn=d_(),ek=Uh(),yw=class{constructor(e,r){this.fs=e,this.FileHandle=r,this.constants=ek.constants,this.cp=(0,Kn.promisify)(this.fs,"cp"),this.opendir=(0,Kn.promisify)(this.fs,"opendir"),this.statfs=(0,Kn.promisify)(this.fs,"statfs"),this.lutimes=(0,Kn.promisify)(this.fs,"lutimes"),this.access=(0,Kn.promisify)(this.fs,"access"),this.chmod=(0,Kn.promisify)(this.fs,"chmod"),this.chown=(0,Kn.promisify)(this.fs,"chown"),this.copyFile=(0,Kn.promisify)(this.fs,"copyFile"),this.lchmod=(0,Kn.promisify)(this.fs,"lchmod"),this.lchown=(0,Kn.promisify)(this.fs,"lchown"),this.link=(0,Kn.promisify)(this.fs,"link"),this.lstat=(0,Kn.promisify)(this.fs,"lstat"),this.mkdir=(0,Kn.promisify)(this.fs,"mkdir"),this.mkdtemp=(0,Kn.promisify)(this.fs,"mkdtemp"),this.readdir=(0,Kn.promisify)(this.fs,"readdir"),this.readlink=(0,Kn.promisify)(this.fs,"readlink"),this.realpath=(0,Kn.promisify)(this.fs,"realpath"),this.rename=(0,Kn.promisify)(this.fs,"rename"),this.rmdir=(0,Kn.promisify)(this.fs,"rmdir"),this.rm=(0,Kn.promisify)(this.fs,"rm"),this.stat=(0,Kn.promisify)(this.fs,"stat"),this.symlink=(0,Kn.promisify)(this.fs,"symlink"),this.truncate=(0,Kn.promisify)(this.fs,"truncate"),this.unlink=(0,Kn.promisify)(this.fs,"unlink"),this.utimes=(0,Kn.promisify)(this.fs,"utimes"),this.readFile=(n,i)=>(0,Kn.promisify)(this.fs,"readFile")(n instanceof this.FileHandle?n.fd:n,i),this.appendFile=(n,i,a)=>(0,Kn.promisify)(this.fs,"appendFile")(n instanceof this.FileHandle?n.fd:n,i,a),this.open=(n,i="r",a)=>(0,Kn.promisify)(this.fs,"open",l=>new this.FileHandle(this.fs,l))(n,i,a),this.writeFile=(n,i,a)=>((0,Kn.isReadableStream)(i)?(0,Kn.streamToBuffer)(i):Promise.resolve(i)).then(v=>(0,Kn.promisify)(this.fs,"writeFile")(n instanceof this.FileHandle?n.fd:n,v,a)),this.watch=()=>{throw new Error("Not implemented")}}};l0.FsPromises=yw});var mT={};Zb(mT,{__addDisposableResource:()=>fT,__assign:()=>c0,__asyncDelegator:()=>nT,__asyncGenerator:()=>rT,__asyncValues:()=>iT,__await:()=>p_,__awaiter:()=>JE,__classPrivateFieldGet:()=>uT,__classPrivateFieldIn:()=>cT,__classPrivateFieldSet:()=>lT,__createBinding:()=>d0,__decorate:()=>qE,__disposeResources:()=>dT,__esDecorate:()=>GE,__exportStar:()=>XE,__extends:()=>$E,__generator:()=>ZE,__importDefault:()=>sT,__importStar:()=>oT,__makeTemplateObject:()=>aT,__metadata:()=>KE,__param:()=>HE,__propKey:()=>zE,__read:()=>Sw,__rest:()=>BE,__rewriteRelativeImportExtension:()=>pT,__runInitializers:()=>VE,__setFunctionName:()=>WE,__spread:()=>QE,__spreadArray:()=>tT,__spreadArrays:()=>eT,__values:()=>f0,default:()=>nk});function $E(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");bw(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function BE(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function qE(t,e,r,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,r,n);else for(var v=t.length-1;v>=0;v--)(l=t[v])&&(a=(i<3?l(a):i>3?l(e,r,a):l(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a}function HE(t,e){return function(r,n){e(r,n,t)}}function GE(t,e,r,n,i,a){function l(re){if(re!==void 0&&typeof re!="function")throw new TypeError("Function expected");return re}for(var v=n.kind,_=v==="getter"?"get":v==="setter"?"set":"value",y=!e&&t?n.static?t:t.prototype:null,C=e||(y?Object.getOwnPropertyDescriptor(y,n.name):{}),U,W=!1,K=r.length-1;K>=0;K--){var q={};for(var V in n)q[V]=V==="access"?{}:n[V];for(var V in n.access)q.access[V]=n.access[V];q.addInitializer=function(re){if(W)throw new TypeError("Cannot add initializers after decoration has completed");a.push(l(re||null))};var J=(0,r[K])(v==="accessor"?{get:C.get,set:C.set}:C[_],q);if(v==="accessor"){if(J===void 0)continue;if(J===null||typeof J!="object")throw new TypeError("Object expected");(U=l(J.get))&&(C.get=U),(U=l(J.set))&&(C.set=U),(U=l(J.init))&&i.unshift(U)}else(U=l(J))&&(v==="field"?i.unshift(U):C[_]=U)}y&&Object.defineProperty(y,n.name,C),W=!0}function VE(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function zE(t){return typeof t=="symbol"?t:"".concat(t)}function WE(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function KE(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function JE(t,e,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function v(C){try{y(n.next(C))}catch(U){l(U)}}function _(C){try{y(n.throw(C))}catch(U){l(U)}}function y(C){C.done?a(C.value):i(C.value).then(v,_)}y((n=n.apply(t,e||[])).next())})}function ZE(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=v(0),l.throw=v(1),l.return=v(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function v(y){return function(C){return _([y,C])}}function _(y){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,y[0]&&(r=0)),r;)try{if(n=1,i&&(a=y[0]&2?i.return:y[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,y[1])).done)return a;switch(i=0,a&&(y=[y[0]&2,a.value]),y[0]){case 0:case 1:a=y;break;case 4:return r.label++,{value:y[1],done:!1};case 5:r.label++,i=y[1],y=[0];continue;case 7:y=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(y[0]===6||y[0]===2)){r=0;continue}if(y[0]===3&&(!a||y[1]>a[0]&&y[1]<a[3])){r.label=y[1];break}if(y[0]===6&&r.label<a[1]){r.label=a[1],a=y;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(y);break}a[2]&&r.ops.pop(),r.trys.pop();continue}y=e.call(t,r)}catch(C){y=[6,C],i=0}finally{n=a=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}function XE(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&d0(e,t,r)}function f0(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Sw(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],l;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(v){l={error:v}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return a}function QE(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Sw(arguments[e]));return t}function eT(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],l=0,v=a.length;l<v;l++,i++)n[i]=a[l];return n}function tT(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function p_(t){return this instanceof p_?(this.v=t,this):new p_(t)}function rT(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),v("next"),v("throw"),v("return",l),i[Symbol.asyncIterator]=function(){return this},i;function l(K){return function(q){return Promise.resolve(q).then(K,U)}}function v(K,q){n[K]&&(i[K]=function(V){return new Promise(function(J,re){a.push([K,V,J,re])>1||_(K,V)})},q&&(i[K]=q(i[K])))}function _(K,q){try{y(n[K](q))}catch(V){W(a[0][3],V)}}function y(K){K.value instanceof p_?Promise.resolve(K.value.v).then(C,U):W(a[0][2],K)}function C(K){_("next",K)}function U(K){_("throw",K)}function W(K,q){K(q),a.shift(),a.length&&_(a[0][0],a[0][1])}}function nT(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,a){e[i]=t[i]?function(l){return(r=!r)?{value:p_(t[i](l)),done:!1}:a?a(l):l}:a}}function iT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof f0=="function"?f0(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(l){return new Promise(function(v,_){l=t[a](l),i(v,_,l.done,l.value)})}}function i(a,l,v,_){Promise.resolve(_).then(function(y){a({value:y,done:v})},l)}}function aT(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function oT(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=ww(t),n=0;n<r.length;n++)r[n]!=="default"&&d0(e,t,r[n]);return tk(e,t),e}function sT(t){return t&&t.__esModule?t:{default:t}}function uT(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function lT(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function cT(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function fT(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function dT(t){function e(a){t.error=t.hasError?new rk(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(a).then(i,function(l){return e(l),i()})}else n|=1}catch(l){e(l)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function pT(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,a,l){return n?e?".jsx":".js":i&&(!a||!l)?r:i+a+"."+l.toLowerCase()+"js"}):t}var bw,c0,d0,tk,ww,rk,nk,vT=FR(()=>{bw=function(t,e){return bw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},bw(t,e)};c0=function(){return c0=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},c0.apply(this,arguments)};d0=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};tk=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},ww=function(t){return ww=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},ww(t)};rk=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};nk={__extends:$E,__assign:c0,__rest:BE,__decorate:qE,__param:HE,__esDecorate:GE,__runInitializers:VE,__propKey:zE,__setFunctionName:WE,__metadata:KE,__awaiter:JE,__generator:ZE,__createBinding:d0,__exportStar:XE,__values:f0,__read:Sw,__spread:QE,__spreadArrays:eT,__spreadArray:tT,__await:p_,__asyncGenerator:rT,__asyncDelegator:nT,__asyncValues:iT,__makeTemplateObject:aT,__importStar:oT,__importDefault:sT,__classPrivateFieldGet:uT,__classPrivateFieldSet:lT,__classPrivateFieldIn:cT,__addDisposableResource:fT,__disposeResources:dT,__rewriteRelativeImportExtension:pT}});var hT=ln(p0=>{"use strict";Object.defineProperty(p0,"__esModule",{value:!0});p0.printTree=void 0;var ik=(t="",e)=>{let r="",n=e.length-1;for(;n>=0&&!e[n];n--);for(let i=0;i<=n;i++){let a=e[i];if(!a)continue;let l=i===n,v=a(t+(l?" ":"\u2502")+"  "),_=v?l?"\u2514\u2500":"\u251C\u2500":"\u2502";r+=`
`+t+_+(v?" "+v:"")}return r};p0.printTree=ik});var gT=ln(m0=>{"use strict";Object.defineProperty(m0,"__esModule",{value:!0});m0.printBinary=void 0;var ak=(t="",e)=>{let r=e[0],n=e[1],i="";return r&&(i+=`
`+t+"\u2190 "+r(t+"  ")),n&&(i+=`
`+t+"\u2192 "+n(t+"  ")),i};m0.printBinary=ak});var yT=ln(v0=>{"use strict";Object.defineProperty(v0,"__esModule",{value:!0});var _T=(vT(),yE(mT));_T.__exportStar(hT(),v0);_T.__exportStar(gT(),v0)});var bT=ln(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.newNotAllowedError=el.newTypeMismatchError=el.newNotFoundError=el.assertCanWrite=el.assertName=el.basename=el.ctx=void 0;var ok=(t={})=>Object.assign({separator:"/",syncHandleAllowed:!1,mode:"read"},t);el.ctx=ok;var sk=(t,e)=>{t[t.length-1]===e&&(t=t.slice(0,-1));let r=t.lastIndexOf(e);return r===-1?t:t.slice(r+1)};el.basename=sk;var uk=/^(\.{1,2})$|^(.*([\/\\]).*)$/,lk=(t,e,r)=>{if(!t||uk.test(t))throw new TypeError(`Failed to execute '${e}' on '${r}': Name is not allowed.`)};el.assertName=lk;var ck=t=>{if(t!=="readwrite")throw new DOMException("The request is not allowed by the user agent or the platform in the current context.","NotAllowedError")};el.assertCanWrite=ck;var fk=()=>new DOMException("A requested file or directory could not be found at the time an operation was processed.","NotFoundError");el.newNotFoundError=fk;var dk=()=>new DOMException("The path supplied exists, but was not an entry of requested type.","TypeMismatchError");el.newTypeMismatchError=dk;var pk=()=>new DOMException("Permission not granted.","NotAllowedError");el.newNotAllowedError=pk});var wT=ln(ty=>{"use strict";Object.defineProperty(ty,"__esModule",{value:!0});ty.toTreeSync=void 0;var mk=yT(),vk=bT(),hk=(t,e={})=>{var r;let n=e.separator||"/",i=e.dir||n;i[i.length-1]!==n&&(i+=n);let a=e.tab||"",l=(r=e.depth)!==null&&r!==void 0?r:10,v=" (...)";if(l>0){let y=t.readdirSync(i,{withFileTypes:!0});v=(0,mk.printTree)(a,y.map(C=>U=>C.isDirectory()?(0,ty.toTreeSync)(t,{dir:i+C.name,depth:l-1,tab:U}):C.isSymbolicLink()?""+C.name+" \u2192 "+t.readlinkSync(i+C.name):""+C.name))}return(0,vk.basename)(i,n)+n+v};ty.toTreeSync=hk});var IT=ln(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.getWriteFileOptions=rr.writeFileDefaults=rr.getRealpathOptsAndCb=rr.getRealpathOptions=rr.getStatOptsAndCb=rr.getStatOptions=rr.getAppendFileOptsAndCb=rr.getAppendFileOpts=rr.getOpendirOptsAndCb=rr.getOpendirOptions=rr.getReaddirOptsAndCb=rr.getReaddirOptions=rr.getReadFileOptions=rr.getRmOptsAndCb=rr.getRmdirOptions=rr.getDefaultOptsAndCb=rr.getDefaultOpts=rr.optsDefaults=rr.getMkdirOptions=void 0;rr.getOptions=TT;rr.optsGenerator=ah;rr.optsAndCbGenerator=Ig;var h0=s0(),gk=Q_(),ET=d_(),ST={mode:511,recursive:!1},_k=t=>typeof t=="number"?Object.assign({},ST,{mode:t}):Object.assign({},ST,t);rr.getMkdirOptions=_k;var yk=t=>`Expected options to be either an object or a string, but got ${t} instead`;function TT(t,e){let r;if(e){let n=typeof e;switch(n){case"string":r=Object.assign({},t,{encoding:e});break;case"object":r=Object.assign({},t,e);break;default:throw TypeError(yk(n))}}else return t;return r.encoding!=="buffer"&&(0,gk.assertEncoding)(r.encoding),r}function ah(t){return e=>TT(t,e)}function Ig(t){return(e,r)=>typeof e=="function"?[t(),e]:[t(e),(0,ET.validateCallback)(r)]}rr.optsDefaults={encoding:"utf8"};rr.getDefaultOpts=ah(rr.optsDefaults);rr.getDefaultOptsAndCb=Ig(rr.getDefaultOpts);var bk={recursive:!1},wk=t=>Object.assign({},bk,t);rr.getRmdirOptions=wk;var Sk=ah(rr.optsDefaults);rr.getRmOptsAndCb=Ig(Sk);var Ek={flag:"r"};rr.getReadFileOptions=ah(Ek);var Tk={encoding:"utf8",recursive:!1,withFileTypes:!1};rr.getReaddirOptions=ah(Tk);rr.getReaddirOptsAndCb=Ig(rr.getReaddirOptions);var Ik={encoding:"utf8",bufferSize:32,recursive:!1};rr.getOpendirOptions=ah(Ik);rr.getOpendirOptsAndCb=Ig(rr.getOpendirOptions);var Nk={encoding:"utf8",mode:438,flag:h0.FLAGS[h0.FLAGS.a]};rr.getAppendFileOpts=ah(Nk);rr.getAppendFileOptsAndCb=Ig(rr.getAppendFileOpts);var Ck={bigint:!1},xk=(t={})=>Object.assign({},Ck,t);rr.getStatOptions=xk;var Dk=(t,e)=>typeof t=="function"?[(0,rr.getStatOptions)(),t]:[(0,rr.getStatOptions)(t),(0,ET.validateCallback)(e)];rr.getStatOptsAndCb=Dk;var Rk=rr.optsDefaults;rr.getRealpathOptions=ah(Rk);rr.getRealpathOptsAndCb=Ig(rr.getRealpathOptions);rr.writeFileDefaults={encoding:"utf8",mode:438,flag:h0.FLAGS[h0.FLAGS.w]};rr.getWriteFileOptions=ah(rr.writeFileDefaults)});var NT=ln(g0=>{"use strict";Object.defineProperty(g0,"__esModule",{value:!0});g0.Dir=void 0;var Ok=d_(),kk=Xy(),Ew=class{constructor(e,r){this.link=e,this.options=r,this.iteratorInfo=[],this.path=e.getParentPath(),this.iteratorInfo.push(e.children[Symbol.iterator]())}wrapAsync(e,r,n){(0,Ok.validateCallback)(n),setImmediate(()=>{let i;try{i=e.apply(this,r)}catch(a){n(a);return}n(null,i)})}isFunction(e){return typeof e=="function"}promisify(e,r){return(...n)=>new Promise((i,a)=>{this.isFunction(e[r])?e[r].bind(e)(...n,(l,v)=>{l&&a(l),i(v)}):a("Not a function")})}closeBase(){}readBase(e){let r,n,i,a;do{do if({done:r,value:n}=e[e.length-1].next(),!r)[i,a]=n;else break;while(i==="."||i==="..");if(r){if(e.pop(),e.length===0)break;r=!1}else return this.options.recursive&&a.children.size&&e.push(a.children[Symbol.iterator]()),kk.default.build(a,this.options.encoding)}while(!r);return null}closeBaseAsync(e){this.wrapAsync(this.closeBase,[],e)}close(e){if(typeof e=="function")this.closeBaseAsync(e);else return this.promisify(this,"closeBaseAsync")()}closeSync(){this.closeBase()}readBaseAsync(e){this.wrapAsync(this.readBase,[this.iteratorInfo],e)}read(e){if(typeof e=="function")this.readBaseAsync(e);else return this.promisify(this,"readBaseAsync")()}readSync(){return this.readBase(this.iteratorInfo)}[Symbol.asyncIterator](){let e=[],r=this;e.push(r.link.children[Symbol.iterator]());let n={readBaseAsync(i){r.wrapAsync(r.readBase,[e],i)}};return{async next(){let i=await r.promisify(n,"readBaseAsync")();return i!==null?{done:!1,value:i}:{done:!0,value:void 0}},[Symbol.asyncIterator](){throw new Error("Not implemented")}}}};g0.Dir=Ew});var FT=ln(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.FSWatcher=Kc.StatWatcher=Kc.Volume=void 0;Kc.filenameToSteps=mm;Kc.pathToSteps=rA;Kc.dataToStr=nA;Kc.toUnixTimestamp=Zf;var sp=require("path"),_0=xE(),Tw=zy(),Ak=Xy(),Hh=u_(),m_=DE(),E0=fw(),kT=iw(),Pk=RE(),T0=require("stream"),lv=Uh(),AT=require("events"),Cg=Q_(),Mk=jE(),PT=require("util"),Lk=YE(),Fk=wT(),ny=s0(),Bn=IT(),de=d_(),Uk=NT(),jk=sp.resolve,{O_RDONLY:Iw,O_WRONLY:CT,O_RDWR:Yk,O_CREAT:xT,O_EXCL:$k,O_TRUNC:Bk,O_APPEND:qk,O_DIRECTORY:Hk,O_SYMLINK:DT,F_OK:RT,COPYFILE_EXCL:Gk,COPYFILE_FICLONE_FORCE:Vk}=lv.constants,{sep:cv,relative:iy,join:MT,dirname:zk}=sp.posix?sp.posix:sp,Wk=128,Kk="EPERM",Bh="ENOENT",Nw="EBADF",Jk="EINVAL",Ng="EEXIST",qh="ENOTDIR",Zk="EMFILE",uv="EACCES",OT="EISDIR",Xk="ENOTEMPTY",Qk="ENOSYS",eA="ERR_FS_EISDIR",tA="ERR_OUT_OF_RANGE",y0=(t,e=kT.default.cwd())=>jk(e,t);if(de.isWin){let t=y0;y0=(e,r)=>(0,de.unixify)(t(e,r))}function mm(t,e){let n=y0(t,e).substring(1);return n?n.split(cv):[]}function rA(t){return mm((0,de.pathToFilename)(t))}function nA(t,e=Cg.ENCODING_UTF8){return Hh.Buffer.isBuffer(t)?t.toString(e):t instanceof Uint8Array?(0,Hh.bufferFrom)(t).toString(e):String(t)}function Zf(t){if(typeof t=="string"&&+t==t)return+t;if(t instanceof Date)return t.getTime()/1e3;if(isFinite(t))return t<0?Date.now()/1e3:t;throw new Error("Cannot parse time: "+t)}function v_(t){if(typeof t!="number")throw TypeError(ny.ERRSTR.UID)}function h_(t){if(typeof t!="number")throw TypeError(ny.ERRSTR.GID)}function iA(t){let e={};function r(n,i){for(let a in i){let l=i[a],v=MT(n,a);typeof l=="string"||l instanceof Hh.Buffer?e[v]=l:typeof l=="object"&&l!==null&&Object.keys(l).length>0?r(v,l):e[v]=null}}return r("",t),e}var ry=()=>{throw new Error("Not implemented")},b0=class t{static fromJSON(e,r){let n=new t;return n.fromJSON(e,r),n}static fromNestedJSON(e,r){let n=new t;return n.fromNestedJSON(e,r),n}get promises(){if(this.promisesApi===null)throw new Error("Promise is not supported in this environment.");return this.promisesApi}constructor(e={}){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.maxFiles=1e4,this.openFiles=0,this.promisesApi=new Lk.FsPromises(this,Mk.FileHandle),this.statWatchers={},this.cpSync=ry,this.statfsSync=ry,this.cp=ry,this.statfs=ry,this.openAsBlob=ry,this.props=Object.assign({Node:_0.Node,Link:_0.Link,File:_0.File},e);let r=this.createLink();r.setNode(this.createNode(lv.constants.S_IFDIR|511));let n=this;this.StatWatcher=class extends w0{constructor(){super(n)}};let i=fv;this.ReadStream=class extends i{constructor(...l){super(n,...l)}};let a=up;this.WriteStream=class extends a{constructor(...l){super(n,...l)}},this.FSWatcher=class extends S0{constructor(){super(n)}},r.setChild(".",r),r.getNode().nlink++,r.setChild("..",r),r.getNode().nlink++,this.root=r}createLink(e,r,n=!1,i){if(!e)return new this.props.Link(this,null,"");if(!r)throw new Error("createLink: name cannot be empty");let a=i??(n?511:438),v=i&&i&lv.constants.S_IFMT?i&lv.constants.S_IFMT:n?lv.constants.S_IFDIR:lv.constants.S_IFREG,_=a&~lv.constants.S_IFMT|v;return e.createChild(r,this.createNode(_))}deleteLink(e){let r=e.parent;return r?(r.deleteChild(e),!0):!1}newInoNumber(){let e=this.releasedInos.pop();return e||(this.ino=(this.ino+1)%4294967295,this.ino)}newFdNumber(){let e=this.releasedFds.pop();return typeof e=="number"?e:t.fd--}createNode(e){let r=new this.props.Node(this.newInoNumber(),e);return this.inodes[r.ino]=r,r}deleteNode(e){e.del(),delete this.inodes[e.ino],this.releasedInos.push(e.ino)}walk(e,r=!1,n=!1,i=!1,a){var l;let v,_;e instanceof _0.Link?(v=e.steps,_=cv+v.join(cv)):typeof e=="string"?(v=mm(e),_=e):(v=e,_=cv+v.join(cv));let y=this.root,C=0;for(;C<v.length;){let U=y.getNode();if(U.isDirectory()){if(i&&!U.canExecute())throw(0,de.createError)(uv,a,_)}else if(C<v.length-1)throw(0,de.createError)(qh,a,_);if(y=(l=y.getChild(v[C]))!==null&&l!==void 0?l:null,!y){if(n)throw(0,de.createError)(Bh,a,_);return null}if(U=y==null?void 0:y.getNode(),r&&U.isSymlink()){let W=sp.isAbsolute(U.symlink)?U.symlink:MT(sp.dirname(y.getPath()),U.symlink);v=mm(W).concat(v.slice(C+1)),y=this.root,C=0;continue}C++}return y}getLink(e){return this.walk(e,!1,!1,!1)}getLinkOrThrow(e,r){return this.walk(e,!1,!0,!0,r)}getResolvedLink(e){return this.walk(e,!0,!1,!1)}getResolvedLinkOrThrow(e,r){return this.walk(e,!0,!0,!0,r)}resolveSymlinks(e){return this.getResolvedLink(e.steps.slice(1))}getLinkAsDirOrThrow(e,r){let n=this.getLinkOrThrow(e,r);if(!n.getNode().isDirectory())throw(0,de.createError)(qh,r,e);return n}getLinkParent(e){return this.getLink(e.slice(0,-1))}getLinkParentAsDirOrThrow(e,r){let n=(e instanceof Array?e:mm(e)).slice(0,-1),i=cv+n.join(cv),a=this.getLinkOrThrow(i,r);if(!a.getNode().isDirectory())throw(0,de.createError)(qh,r,i);return a}getFileByFd(e){return this.fds[String(e)]}getFileByFdOrThrow(e,r){if(!(0,de.isFd)(e))throw TypeError(ny.ERRSTR.FD);let n=this.getFileByFd(e);if(!n)throw(0,de.createError)(Nw,r);return n}wrapAsync(e,r,n){(0,de.validateCallback)(n),(0,m_.default)(()=>{let i;try{i=e.apply(this,r)}catch(a){n(a);return}n(null,i)})}_toJSON(e=this.root,r={},n,i){let a=!0,l=e.children;e.getNode().isFile()&&(l=new Map([[e.getName(),e.parent.getChild(e.getName())]]),e=e.parent);for(let _ of l.keys()){if(_==="."||_==="..")continue;a=!1;let y=e.getChild(_);if(!y)throw new Error("_toJSON: unexpected undefined");let C=y.getNode();if(C.isFile()){let U=y.getPath();n&&(U=iy(n,U)),r[U]=i?C.getBuffer():C.getString()}else C.isDirectory()&&this._toJSON(y,r,n,i)}let v=e.getPath();return n&&(v=iy(n,v)),v&&a&&(r[v]=null),r}toJSON(e,r={},n=!1,i=!1){let a=[];if(e){Array.isArray(e)||(e=[e]);for(let l of e){let v=(0,de.pathToFilename)(l),_=this.getResolvedLink(v);_&&a.push(_)}}else a.push(this.root);if(!a.length)return r;for(let l of a)this._toJSON(l,r,n?l.getPath():"",i);return r}fromJSON(e,r=kT.default.cwd()){for(let n in e){let i=e[n];if(n=y0(n,r),typeof i=="string"||i instanceof Hh.Buffer){let a=zk(n);this.mkdirpBase(a,511),this.writeFileSync(n,i)}else this.mkdirpBase(n,511)}}fromNestedJSON(e,r){this.fromJSON(iA(e),r)}toTree(e={separator:cv}){return(0,Fk.toTreeSync)(this,e)}reset(){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.openFiles=0,this.root=this.createLink(),this.root.setNode(this.createNode(lv.constants.S_IFDIR|511))}mountSync(e,r){this.fromJSON(r,e)}openLink(e,r,n=!0){if(this.openFiles>=this.maxFiles)throw(0,de.createError)(Zk,"open",e.getPath());let i=e;n&&(i=this.getResolvedLinkOrThrow(e.getPath(),"open"));let a=i.getNode();if(a.isDirectory()){if((r&(Iw|Yk|CT))!==Iw)throw(0,de.createError)(OT,"open",e.getPath())}else if(r&Hk)throw(0,de.createError)(qh,"open",e.getPath());if(!(r&CT)&&!a.canRead()||!(r&Iw)&&!a.canWrite())throw(0,de.createError)(uv,"open",e.getPath());let l=new this.props.File(e,a,r,this.newFdNumber());return this.fds[l.fd]=l,this.openFiles++,r&Bk&&l.truncate(),l}openFile(e,r,n,i=!0){let a=mm(e),l;try{if(l=i?this.getResolvedLinkOrThrow(e,"open"):this.getLinkOrThrow(e,"open"),l&&r&xT&&r&$k)throw(0,de.createError)(Ng,"open",e)}catch(v){if(v.code===Bh&&r&xT){let _=sp.dirname(e),y=this.getResolvedLinkOrThrow(_),C=y.getNode();if(!C.isDirectory())throw(0,de.createError)(qh,"open",e);if(!C.canExecute()||!C.canWrite())throw(0,de.createError)(uv,"open",e);n??(n=438),l=this.createLink(y,a[a.length-1],!1,n)}else throw v}if(l)return this.openLink(l,r,i);throw(0,de.createError)(Bh,"open",e)}openBase(e,r,n,i=!0){let a=this.openFile(e,r,n,i);if(!a)throw(0,de.createError)(Bh,"open",e);return a.fd}openSync(e,r,n=438){let i=(0,de.modeToNumber)(n),a=(0,de.pathToFilename)(e),l=(0,de.flagsToNumber)(r);return this.openBase(a,l,i,!(l&DT))}open(e,r,n,i){let a=n,l=i;typeof n=="function"&&(a=438,l=n),a=a||438;let v=(0,de.modeToNumber)(a),_=(0,de.pathToFilename)(e),y=(0,de.flagsToNumber)(r);this.wrapAsync(this.openBase,[_,y,v,!(y&DT)],l)}closeFile(e){this.fds[e.fd]&&(this.openFiles--,delete this.fds[e.fd],this.releasedFds.push(e.fd))}closeSync(e){(0,de.validateFd)(e);let r=this.getFileByFdOrThrow(e,"close");this.closeFile(r)}close(e,r){(0,de.validateFd)(e);let n=this.getFileByFdOrThrow(e,"close");this.wrapAsync(this.closeFile,[n],r)}openFileOrGetById(e,r,n){if(typeof e=="number"){let i=this.fds[e];if(!i)throw(0,de.createError)(Bh);return i}else return this.openFile((0,de.pathToFilename)(e),r,n)}readBase(e,r,n,i,a){if(r.byteLength<i)throw(0,de.createError)(tA,"read",void 0,void 0,RangeError);let l=this.getFileByFdOrThrow(e);if(l.node.isSymlink())throw(0,de.createError)(Kk,"read",l.link.getPath());return l.read(r,Number(n),Number(i),a===-1||typeof a!="number"?void 0:a)}readSync(e,r,n,i,a){return(0,de.validateFd)(e),this.readBase(e,r,n,i,a)}read(e,r,n,i,a,l){if((0,de.validateCallback)(l),i===0)return(0,E0.default)(()=>{l&&l(null,0,r)});(0,m_.default)(()=>{try{let v=this.readBase(e,r,n,i,a);l(null,v,r)}catch(v){l(v)}})}readvBase(e,r,n){let i=this.getFileByFdOrThrow(e),a=n??void 0;a===-1&&(a=void 0);let l=0;for(let v of r){let _=i.read(v,0,v.byteLength,a);if(a=void 0,l+=_,_<v.byteLength)break}return l}readv(e,r,n,i){let a=n,l=i;typeof n=="function"&&(a=null,l=n),(0,de.validateCallback)(l),(0,m_.default)(()=>{try{let v=this.readvBase(e,r,a);l(null,v,r)}catch(v){l(v)}})}readvSync(e,r,n){return(0,de.validateFd)(e),this.readvBase(e,r,n)}readFileBase(e,r,n){let i,l=typeof e=="number"&&(0,de.isFd)(e),v;if(l)v=e;else{let _=(0,de.pathToFilename)(e),y=this.getResolvedLinkOrThrow(_,"open");if(y.getNode().isDirectory())throw(0,de.createError)(OT,"open",y.getPath());v=this.openSync(e,r)}try{i=(0,de.bufferToEncoding)(this.getFileByFdOrThrow(v).getBuffer(),n)}finally{l||this.closeSync(v)}return i}readFileSync(e,r){let n=(0,Bn.getReadFileOptions)(r),i=(0,de.flagsToNumber)(n.flag);return this.readFileBase(e,i,n.encoding)}readFile(e,r,n){let[i,a]=(0,Bn.optsAndCbGenerator)(Bn.getReadFileOptions)(r,n),l=(0,de.flagsToNumber)(i.flag);this.wrapAsync(this.readFileBase,[e,l,i.encoding],a)}writeBase(e,r,n,i,a){let l=this.getFileByFdOrThrow(e,"write");if(l.node.isSymlink())throw(0,de.createError)(Nw,"write",l.link.getPath());return l.write(r,n,i,a===-1||typeof a!="number"?void 0:a)}writeSync(e,r,n,i,a){let[,l,v,_,y]=(0,de.getWriteSyncArgs)(e,r,n,i,a);return this.writeBase(e,l,v,_,y)}write(e,r,n,i,a,l){let[,v,_,y,C,U,W]=(0,de.getWriteArgs)(e,r,n,i,a,l);(0,m_.default)(()=>{try{let K=this.writeBase(e,_,y,C,U);v?W(null,K,r):W(null,K,_)}catch(K){W(K)}})}writevBase(e,r,n){let i=this.getFileByFdOrThrow(e),a=n??void 0;a===-1&&(a=void 0);let l=0;for(let v of r){let _=Hh.Buffer.from(v.buffer,v.byteOffset,v.byteLength),y=i.write(_,0,_.byteLength,a);if(a=void 0,l+=y,y<_.byteLength)break}return l}writev(e,r,n,i){let a=n,l=i;typeof n=="function"&&(a=null,l=n),(0,de.validateCallback)(l),(0,m_.default)(()=>{try{let v=this.writevBase(e,r,a);l(null,v,r)}catch(v){l(v)}})}writevSync(e,r,n){return(0,de.validateFd)(e),this.writevBase(e,r,n)}writeFileBase(e,r,n,i){let a=typeof e=="number",l;a?l=e:l=this.openBase((0,de.pathToFilename)(e),n,i);let v=0,_=r.length,y=n&qk?void 0:0;try{for(;_>0;){let C=this.writeSync(l,r,v,_,y);v+=C,_-=C,y!==void 0&&(y+=C)}}finally{a||this.closeSync(l)}}writeFileSync(e,r,n){let i=(0,Bn.getWriteFileOptions)(n),a=(0,de.flagsToNumber)(i.flag),l=(0,de.modeToNumber)(i.mode),v=(0,de.dataToBuffer)(r,i.encoding);this.writeFileBase(e,v,a,l)}writeFile(e,r,n,i){let a=n,l=i;typeof n=="function"&&(a=Bn.writeFileDefaults,l=n);let v=(0,de.validateCallback)(l),_=(0,Bn.getWriteFileOptions)(a),y=(0,de.flagsToNumber)(_.flag),C=(0,de.modeToNumber)(_.mode),U=(0,de.dataToBuffer)(r,_.encoding);this.wrapAsync(this.writeFileBase,[e,U,y,C],v)}linkBase(e,r){let n;try{n=this.getLinkOrThrow(e,"link")}catch(_){throw _.code&&(_=(0,de.createError)(_.code,"link",e,r)),_}let i=sp.dirname(r),a;try{a=this.getLinkOrThrow(i,"link")}catch(_){throw _.code&&(_=(0,de.createError)(_.code,"link",e,r)),_}let l=sp.basename(r);if(a.getChild(l))throw(0,de.createError)(Ng,"link",e,r);let v=n.getNode();v.nlink++,a.createChild(l,v)}copyFileBase(e,r,n){let i=this.readFileSync(e);if(n&Gk&&this.existsSync(r))throw(0,de.createError)(Ng,"copyFile",e,r);if(n&Vk)throw(0,de.createError)(Qk,"copyFile",e,r);this.writeFileBase(r,i,ny.FLAGS.w,438)}copyFileSync(e,r,n){let i=(0,de.pathToFilename)(e),a=(0,de.pathToFilename)(r);return this.copyFileBase(i,a,(n||0)|0)}copyFile(e,r,n,i){let a=(0,de.pathToFilename)(e),l=(0,de.pathToFilename)(r),v,_;typeof n=="function"?(v=0,_=n):(v=n,_=i),(0,de.validateCallback)(_),this.wrapAsync(this.copyFileBase,[a,l,v],_)}linkSync(e,r){let n=(0,de.pathToFilename)(e),i=(0,de.pathToFilename)(r);this.linkBase(n,i)}link(e,r,n){let i=(0,de.pathToFilename)(e),a=(0,de.pathToFilename)(r);this.wrapAsync(this.linkBase,[i,a],n)}unlinkBase(e){let r=this.getLinkOrThrow(e,"unlink");if(r.length)throw Error("Dir not empty...");this.deleteLink(r);let n=r.getNode();n.nlink--,n.nlink<=0&&this.deleteNode(n)}unlinkSync(e){let r=(0,de.pathToFilename)(e);this.unlinkBase(r)}unlink(e,r){let n=(0,de.pathToFilename)(e);this.wrapAsync(this.unlinkBase,[n],r)}symlinkBase(e,r){let n=mm(r),i;try{i=this.getLinkParentAsDirOrThrow(n)}catch(_){throw _.code&&(_=(0,de.createError)(_.code,"symlink",e,r)),_}let a=n[n.length-1];if(i.getChild(a))throw(0,de.createError)(Ng,"symlink",e,r);let l=i.getNode();if(!l.canExecute()||!l.canWrite())throw(0,de.createError)(uv,"symlink",e,r);let v=i.createChild(a);return v.getNode().makeSymlink(e),v}symlinkSync(e,r,n){let i=(0,de.pathToFilename)(e),a=(0,de.pathToFilename)(r);this.symlinkBase(i,a)}symlink(e,r,n,i){let a=(0,de.validateCallback)(typeof n=="function"?n:i),l=(0,de.pathToFilename)(e),v=(0,de.pathToFilename)(r);this.wrapAsync(this.symlinkBase,[l,v],a)}realpathBase(e,r){let n=this.getResolvedLinkOrThrow(e,"realpath");return(0,Cg.strToEncoding)(n.getPath()||"/",r)}realpathSync(e,r){return this.realpathBase((0,de.pathToFilename)(e),(0,Bn.getRealpathOptions)(r).encoding)}realpath(e,r,n){let[i,a]=(0,Bn.getRealpathOptsAndCb)(r,n),l=(0,de.pathToFilename)(e);this.wrapAsync(this.realpathBase,[l,i.encoding],a)}lstatBase(e,r=!1,n=!1){let i;try{i=this.getLinkOrThrow(e,"lstat")}catch(a){if(a.code===Bh&&!n)return;throw a}return Tw.default.build(i.getNode(),r)}lstatSync(e,r){let{throwIfNoEntry:n=!0,bigint:i=!1}=(0,Bn.getStatOptions)(r);return this.lstatBase((0,de.pathToFilename)(e),i,n)}lstat(e,r,n){let[{throwIfNoEntry:i=!0,bigint:a=!1},l]=(0,Bn.getStatOptsAndCb)(r,n);this.wrapAsync(this.lstatBase,[(0,de.pathToFilename)(e),a,i],l)}statBase(e,r=!1,n=!0){let i;try{i=this.getResolvedLinkOrThrow(e,"stat")}catch(a){if(a.code===Bh&&!n)return;throw a}return Tw.default.build(i.getNode(),r)}statSync(e,r){let{bigint:n=!0,throwIfNoEntry:i=!0}=(0,Bn.getStatOptions)(r);return this.statBase((0,de.pathToFilename)(e),n,i)}stat(e,r,n){let[{bigint:i=!1,throwIfNoEntry:a=!0},l]=(0,Bn.getStatOptsAndCb)(r,n);this.wrapAsync(this.statBase,[(0,de.pathToFilename)(e),i,a],l)}fstatBase(e,r=!1){let n=this.getFileByFd(e);if(!n)throw(0,de.createError)(Nw,"fstat");return Tw.default.build(n.node,r)}fstatSync(e,r){return this.fstatBase(e,(0,Bn.getStatOptions)(r).bigint)}fstat(e,r,n){let[i,a]=(0,Bn.getStatOptsAndCb)(r,n);this.wrapAsync(this.fstatBase,[e,i.bigint],a)}renameBase(e,r){let n;try{n=this.getResolvedLinkOrThrow(e)}catch(y){throw y.code&&(y=(0,de.createError)(y.code,"rename",e,r)),y}let i;try{i=this.getLinkParentAsDirOrThrow(r)}catch(y){throw y.code&&(y=(0,de.createError)(y.code,"rename",e,r)),y}let a=n.parent,l=a.getNode(),v=i.getNode();if(!l.canExecute()||!l.canWrite()||!v.canExecute()||!v.canWrite())throw(0,de.createError)(uv,"rename",e,r);a.deleteChild(n);let _=sp.basename(r);n.name=_,n.steps=[...i.steps,_],i.setChild(n.getName(),n)}renameSync(e,r){let n=(0,de.pathToFilename)(e),i=(0,de.pathToFilename)(r);this.renameBase(n,i)}rename(e,r,n){let i=(0,de.pathToFilename)(e),a=(0,de.pathToFilename)(r);this.wrapAsync(this.renameBase,[i,a],n)}existsBase(e){return!!this.statBase(e)}existsSync(e){try{return this.existsBase((0,de.pathToFilename)(e))}catch{return!1}}exists(e,r){let n=(0,de.pathToFilename)(e);if(typeof r!="function")throw Error(ny.ERRSTR.CB);(0,m_.default)(()=>{try{r(this.existsBase(n))}catch{r(!1)}})}accessBase(e,r){let n=this.getLinkOrThrow(e,"access")}accessSync(e,r=RT){let n=(0,de.pathToFilename)(e);r=r|0,this.accessBase(n,r)}access(e,r,n){let i=RT,a;typeof r!="function"?(i=r|0,a=(0,de.validateCallback)(n)):a=r;let l=(0,de.pathToFilename)(e);this.wrapAsync(this.accessBase,[l,i],a)}appendFileSync(e,r,n){let i=(0,Bn.getAppendFileOpts)(n);(!i.flag||(0,de.isFd)(e))&&(i.flag="a"),this.writeFileSync(e,r,i)}appendFile(e,r,n,i){let[a,l]=(0,Bn.getAppendFileOptsAndCb)(n,i);(!a.flag||(0,de.isFd)(e))&&(a.flag="a"),this.writeFile(e,r,a,l)}readdirBase(e,r){let n=mm(e),i=this.getResolvedLinkOrThrow(e,"scandir"),a=i.getNode();if(!a.isDirectory())throw(0,de.createError)(qh,"scandir",e);if(!a.canRead())throw(0,de.createError)(uv,"scandir",e);let l=[];for(let _ of i.children.keys()){let y=i.getChild(_);if(!(!y||_==="."||_==="..")&&(l.push(Ak.default.build(y,r.encoding)),r.recursive&&y.children.size)){let C=Object.assign(Object.assign({},r),{recursive:!0,withFileTypes:!0}),U=this.readdirBase(y.getPath(),C);l.push(...U)}}if(!de.isWin&&r.encoding!=="buffer"&&l.sort((_,y)=>_.name<y.name?-1:_.name>y.name?1:0),r.withFileTypes)return l;let v=e;return de.isWin&&(v=v.replace(/\\/g,"/")),l.map(_=>{if(r.recursive){let y=sp.join(_.parentPath,_.name.toString());return de.isWin&&(y=y.replace(/\\/g,"/")),y.replace(v+sp.posix.sep,"")}return _.name})}readdirSync(e,r){let n=(0,Bn.getReaddirOptions)(r),i=(0,de.pathToFilename)(e);return this.readdirBase(i,n)}readdir(e,r,n){let[i,a]=(0,Bn.getReaddirOptsAndCb)(r,n),l=(0,de.pathToFilename)(e);this.wrapAsync(this.readdirBase,[l,i],a)}readlinkBase(e,r){let i=this.getLinkOrThrow(e,"readlink").getNode();if(!i.isSymlink())throw(0,de.createError)(Jk,"readlink",e);return(0,Cg.strToEncoding)(i.symlink,r)}readlinkSync(e,r){let n=(0,Bn.getDefaultOpts)(r),i=(0,de.pathToFilename)(e);return this.readlinkBase(i,n.encoding)}readlink(e,r,n){let[i,a]=(0,Bn.getDefaultOptsAndCb)(r,n),l=(0,de.pathToFilename)(e);this.wrapAsync(this.readlinkBase,[l,i.encoding],a)}fsyncBase(e){this.getFileByFdOrThrow(e,"fsync")}fsyncSync(e){this.fsyncBase(e)}fsync(e,r){this.wrapAsync(this.fsyncBase,[e],r)}fdatasyncBase(e){this.getFileByFdOrThrow(e,"fdatasync")}fdatasyncSync(e){this.fdatasyncBase(e)}fdatasync(e,r){this.wrapAsync(this.fdatasyncBase,[e],r)}ftruncateBase(e,r){this.getFileByFdOrThrow(e,"ftruncate").truncate(r)}ftruncateSync(e,r){this.ftruncateBase(e,r)}ftruncate(e,r,n){let i=typeof r=="number"?r:0,a=(0,de.validateCallback)(typeof r=="number"?n:r);this.wrapAsync(this.ftruncateBase,[e,i],a)}truncateBase(e,r){let n=this.openSync(e,"r+");try{this.ftruncateSync(n,r)}finally{this.closeSync(n)}}truncateSync(e,r){if((0,de.isFd)(e))return this.ftruncateSync(e,r);this.truncateBase(e,r)}truncate(e,r,n){let i=typeof r=="number"?r:0,a=(0,de.validateCallback)(typeof r=="number"?n:r);if((0,de.isFd)(e))return this.ftruncate(e,i,a);this.wrapAsync(this.truncateBase,[e,i],a)}futimesBase(e,r,n){let a=this.getFileByFdOrThrow(e,"futimes").node;a.atime=new Date(r*1e3),a.mtime=new Date(n*1e3)}futimesSync(e,r,n){this.futimesBase(e,Zf(r),Zf(n))}futimes(e,r,n,i){this.wrapAsync(this.futimesBase,[e,Zf(r),Zf(n)],i)}utimesBase(e,r,n,i=!0){let l=(i?this.getResolvedLinkOrThrow(e,"utimes"):this.getLinkOrThrow(e,"lutimes")).getNode();l.atime=new Date(r*1e3),l.mtime=new Date(n*1e3)}utimesSync(e,r,n){this.utimesBase((0,de.pathToFilename)(e),Zf(r),Zf(n),!0)}utimes(e,r,n,i){this.wrapAsync(this.utimesBase,[(0,de.pathToFilename)(e),Zf(r),Zf(n),!0],i)}lutimesSync(e,r,n){this.utimesBase((0,de.pathToFilename)(e),Zf(r),Zf(n),!1)}lutimes(e,r,n,i){this.wrapAsync(this.utimesBase,[(0,de.pathToFilename)(e),Zf(r),Zf(n),!1],i)}mkdirBase(e,r){let n=mm(e);if(!n.length)throw(0,de.createError)(Ng,"mkdir",e);let i=this.getLinkParentAsDirOrThrow(e,"mkdir"),a=n[n.length-1];if(i.getChild(a))throw(0,de.createError)(Ng,"mkdir",e);let l=i.getNode();if(!l.canWrite()||!l.canExecute())throw(0,de.createError)(uv,"mkdir",e);i.createChild(a,this.createNode(lv.constants.S_IFDIR|r))}mkdirpBase(e,r){let n=!1,i=mm(e),a=null,l=i.length;for(l=i.length;l>=0&&(a=this.getResolvedLink(i.slice(0,l)),!a);l--);for(a||(a=this.root,l=0),a=this.getResolvedLinkOrThrow(cv+i.slice(0,l).join(cv),"mkdir"),l;l<i.length;l++){let v=a.getNode();if(v.isDirectory()){if(!v.canExecute()||!v.canWrite())throw(0,de.createError)(uv,"mkdir",e)}else throw(0,de.createError)(qh,"mkdir",e);n=!0,a=a.createChild(i[l],this.createNode(lv.constants.S_IFDIR|r))}return n?e:void 0}mkdirSync(e,r){let n=(0,Bn.getMkdirOptions)(r),i=(0,de.modeToNumber)(n.mode,511),a=(0,de.pathToFilename)(e);if(n.recursive)return this.mkdirpBase(a,i);this.mkdirBase(a,i)}mkdir(e,r,n){let i=(0,Bn.getMkdirOptions)(r),a=(0,de.validateCallback)(typeof r=="function"?r:n),l=(0,de.modeToNumber)(i.mode,511),v=(0,de.pathToFilename)(e);i.recursive?this.wrapAsync(this.mkdirpBase,[v,l],a):this.wrapAsync(this.mkdirBase,[v,l],a)}mkdtempBase(e,r,n=5){let i=e+(0,de.genRndStr6)();try{return this.mkdirBase(i,511),(0,Cg.strToEncoding)(i,r)}catch(a){if(a.code===Ng){if(n>1)return this.mkdtempBase(e,r,n-1);throw Error("Could not create temp dir.")}else throw a}}mkdtempSync(e,r){let{encoding:n}=(0,Bn.getDefaultOpts)(r);if(!e||typeof e!="string")throw new TypeError("filename prefix is required");return(0,de.nullCheck)(e),this.mkdtempBase(e,n)}mkdtemp(e,r,n){let[{encoding:i},a]=(0,Bn.getDefaultOptsAndCb)(r,n);if(!e||typeof e!="string")throw new TypeError("filename prefix is required");(0,de.nullCheck)(e)&&this.wrapAsync(this.mkdtempBase,[e,i],a)}rmdirBase(e,r){let n=(0,Bn.getRmdirOptions)(r),i=this.getLinkAsDirOrThrow(e,"rmdir");if(i.length&&!n.recursive)throw(0,de.createError)(Xk,"rmdir",e);this.deleteLink(i)}rmdirSync(e,r){this.rmdirBase((0,de.pathToFilename)(e),r)}rmdir(e,r,n){let i=(0,Bn.getRmdirOptions)(r),a=(0,de.validateCallback)(typeof r=="function"?r:n);this.wrapAsync(this.rmdirBase,[(0,de.pathToFilename)(e),i],a)}rmBase(e,r={}){let n;try{n=this.getResolvedLinkOrThrow(e,"stat")}catch(i){if(i.code===Bh&&r.force)return;throw i}if(n.getNode().isDirectory()&&!r.recursive)throw(0,de.createError)(eA,"rm",e);if(!n.parent.getNode().canWrite())throw(0,de.createError)(uv,"rm",e);this.deleteLink(n)}rmSync(e,r){this.rmBase((0,de.pathToFilename)(e),r)}rm(e,r,n){let[i,a]=(0,Bn.getRmOptsAndCb)(r,n);this.wrapAsync(this.rmBase,[(0,de.pathToFilename)(e),i],a)}fchmodBase(e,r){this.getFileByFdOrThrow(e,"fchmod").chmod(r)}fchmodSync(e,r){this.fchmodBase(e,(0,de.modeToNumber)(r))}fchmod(e,r,n){this.wrapAsync(this.fchmodBase,[e,(0,de.modeToNumber)(r)],n)}chmodBase(e,r,n=!0){(n?this.getResolvedLinkOrThrow(e,"chmod"):this.getLinkOrThrow(e,"chmod")).getNode().chmod(r)}chmodSync(e,r){let n=(0,de.modeToNumber)(r),i=(0,de.pathToFilename)(e);this.chmodBase(i,n,!0)}chmod(e,r,n){let i=(0,de.modeToNumber)(r),a=(0,de.pathToFilename)(e);this.wrapAsync(this.chmodBase,[a,i],n)}lchmodBase(e,r){this.chmodBase(e,r,!1)}lchmodSync(e,r){let n=(0,de.modeToNumber)(r),i=(0,de.pathToFilename)(e);this.lchmodBase(i,n)}lchmod(e,r,n){let i=(0,de.modeToNumber)(r),a=(0,de.pathToFilename)(e);this.wrapAsync(this.lchmodBase,[a,i],n)}fchownBase(e,r,n){this.getFileByFdOrThrow(e,"fchown").chown(r,n)}fchownSync(e,r,n){v_(r),h_(n),this.fchownBase(e,r,n)}fchown(e,r,n,i){v_(r),h_(n),this.wrapAsync(this.fchownBase,[e,r,n],i)}chownBase(e,r,n){this.getResolvedLinkOrThrow(e,"chown").getNode().chown(r,n)}chownSync(e,r,n){v_(r),h_(n),this.chownBase((0,de.pathToFilename)(e),r,n)}chown(e,r,n,i){v_(r),h_(n),this.wrapAsync(this.chownBase,[(0,de.pathToFilename)(e),r,n],i)}lchownBase(e,r,n){this.getLinkOrThrow(e,"lchown").getNode().chown(r,n)}lchownSync(e,r,n){v_(r),h_(n),this.lchownBase((0,de.pathToFilename)(e),r,n)}lchown(e,r,n,i){v_(r),h_(n),this.wrapAsync(this.lchownBase,[(0,de.pathToFilename)(e),r,n],i)}watchFile(e,r,n){let i=(0,de.pathToFilename)(e),a=r,l=n;if(typeof a=="function"&&(l=r,a=null),typeof l!="function")throw Error('"watchFile()" requires a listener function');let v=5007,_=!0;a&&typeof a=="object"&&(typeof a.interval=="number"&&(v=a.interval),typeof a.persistent=="boolean"&&(_=a.persistent));let y=this.statWatchers[i];return y||(y=new this.StatWatcher,y.start(i,_,v),this.statWatchers[i]=y),y.addListener("change",l),y}unwatchFile(e,r){let n=(0,de.pathToFilename)(e),i=this.statWatchers[n];i&&(typeof r=="function"?i.removeListener("change",r):i.removeAllListeners("change"),i.listenerCount("change")===0&&(i.stop(),delete this.statWatchers[n]))}createReadStream(e,r){return new this.ReadStream(e,r)}createWriteStream(e,r){return new this.WriteStream(e,r)}watch(e,r,n){let i=(0,de.pathToFilename)(e),a=r;typeof r=="function"&&(n=r,a=null);let{persistent:l,recursive:v,encoding:_}=(0,Bn.getDefaultOpts)(a);l===void 0&&(l=!0),v===void 0&&(v=!1);let y=new this.FSWatcher;return y.start(i,l,v,_),n&&y.addListener("change",n),y}opendirBase(e,r){let n=this.getResolvedLinkOrThrow(e,"scandir");if(!n.getNode().isDirectory())throw(0,de.createError)(qh,"scandir",e);return new Uk.Dir(n,r)}opendirSync(e,r){let n=(0,Bn.getOpendirOptions)(r),i=(0,de.pathToFilename)(e);return this.opendirBase(i,n)}opendir(e,r,n){let[i,a]=(0,Bn.getOpendirOptsAndCb)(r,n),l=(0,de.pathToFilename)(e);this.wrapAsync(this.opendirBase,[l,i],a)}};Kc.Volume=b0;b0.fd=2147483647;function aA(t){t.emit("stop")}var w0=class extends AT.EventEmitter{constructor(e){super(),this.onInterval=()=>{try{let r=this.vol.statSync(this.filename);this.hasChanged(r)&&(this.emit("change",r,this.prev),this.prev=r)}finally{this.loop()}},this.vol=e}loop(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)}hasChanged(e){return e.mtimeMs>this.prev.mtimeMs||e.nlink!==this.prev.nlink}start(e,r=!0,n=5007){this.filename=(0,de.pathToFilename)(e),this.setTimeout=r?setTimeout.bind(typeof globalThis<"u"?globalThis:global):Pk.default,this.interval=n,this.prev=this.vol.statSync(this.filename),this.loop()}stop(){clearTimeout(this.timeoutRef),(0,E0.default)(()=>{aA.call(this,this)})}};Kc.StatWatcher=w0;var op;function oA(t){op=(0,Hh.bufferAllocUnsafe)(t),op.used=0}PT.inherits(fv,T0.Readable);Kc.ReadStream=fv;function fv(t,e,r){if(!(this instanceof fv))return new fv(t,e,r);if(this._vol=t,r=Object.assign({},(0,Bn.getOptions)(r,{})),r.highWaterMark===void 0&&(r.highWaterMark=64*1024),T0.Readable.call(this,r),this.path=(0,de.pathToFilename)(e),this.fd=r.fd===void 0?null:typeof r.fd!="number"?r.fd.fd:r.fd,this.flags=r.flags===void 0?"r":r.flags,this.mode=r.mode===void 0?438:r.mode,this.start=r.start,this.end=r.end,this.autoClose=r.autoClose===void 0?!0:r.autoClose,this.pos=void 0,this.bytesRead=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw new Error('"start" option must be <= "end" option');this.pos=this.start}typeof this.fd!="number"&&this.open(),this.on("end",function(){this.autoClose&&this.destroy&&this.destroy()})}fv.prototype.open=function(){var t=this;this._vol.open(this.path,this.flags,this.mode,(e,r)=>{if(e){t.autoClose&&t.destroy&&t.destroy(),t.emit("error",e);return}t.fd=r,t.emit("open",r),t.read()})};fv.prototype._read=function(t){if(typeof this.fd!="number")return this.once("open",function(){this._read(t)});if(this.destroyed)return;(!op||op.length-op.used<Wk)&&oA(this._readableState.highWaterMark);var e=op,r=Math.min(op.length-op.used,t),n=op.used;if(this.pos!==void 0&&(r=Math.min(this.end-this.pos+1,r)),r<=0)return this.push(null);var i=this;this._vol.read(this.fd,op,op.used,r,this.pos,a),this.pos!==void 0&&(this.pos+=r),op.used+=r;function a(l,v){if(l)i.autoClose&&i.destroy&&i.destroy(),i.emit("error",l);else{var _=null;v>0&&(i.bytesRead+=v,_=e.slice(n,n+v)),i.push(_)}}};fv.prototype._destroy=function(t,e){this.close(r=>{e(t||r)})};fv.prototype.close=function(t){var e;if(t&&this.once("close",t),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",LT);return}return(0,E0.default)(()=>this.emit("close"))}typeof((e=this._readableState)===null||e===void 0?void 0:e.closed)=="boolean"?this._readableState.closed=!0:this.closed=!0,this._vol.close(this.fd,r=>{r?this.emit("error",r):this.emit("close")}),this.fd=null};function LT(t){this.close()}PT.inherits(up,T0.Writable);Kc.WriteStream=up;function up(t,e,r){if(!(this instanceof up))return new up(t,e,r);if(this._vol=t,r=Object.assign({},(0,Bn.getOptions)(r,{})),T0.Writable.call(this,r),this.path=(0,de.pathToFilename)(e),this.fd=r.fd===void 0?null:typeof r.fd!="number"?r.fd.fd:r.fd,this.flags=r.flags===void 0?"w":r.flags,this.mode=r.mode===void 0?438:r.mode,this.start=r.start,this.autoClose=r.autoClose===void 0?!0:!!r.autoClose,this.pos=void 0,this.bytesWritten=0,this.pending=!0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.start<0)throw new Error('"start" must be >= zero');this.pos=this.start}r.encoding&&this.setDefaultEncoding(r.encoding),typeof this.fd!="number"&&this.open(),this.once("finish",function(){this.autoClose&&this.close()})}up.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,function(t,e){if(t){this.autoClose&&this.destroy&&this.destroy(),this.emit("error",t);return}this.fd=e,this.pending=!1,this.emit("open",e)}.bind(this))};up.prototype._write=function(t,e,r){if(!(t instanceof Hh.Buffer||t instanceof Uint8Array))return this.emit("error",new Error("Invalid data"));if(typeof this.fd!="number")return this.once("open",function(){this._write(t,e,r)});var n=this;this._vol.write(this.fd,t,0,t.length,this.pos,(i,a)=>{if(i)return n.autoClose&&n.destroy&&n.destroy(),r(i);n.bytesWritten+=a,r()}),this.pos!==void 0&&(this.pos+=t.length)};up.prototype._writev=function(t,e){if(typeof this.fd!="number")return this.once("open",function(){this._writev(t,e)});let r=this,n=t.length,i=new Array(n);for(var a=0,l=0;l<n;l++){var v=t[l].chunk;i[l]=v,a+=v.length}let _=Hh.Buffer.concat(i);this._vol.write(this.fd,_,0,_.length,this.pos,(y,C)=>{if(y)return r.destroy&&r.destroy(),e(y);r.bytesWritten+=C,e()}),this.pos!==void 0&&(this.pos+=a)};up.prototype.close=function(t){var e;if(t&&this.once("close",t),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",LT);return}return(0,E0.default)(()=>this.emit("close"))}typeof((e=this._writableState)===null||e===void 0?void 0:e.closed)=="boolean"?this._writableState.closed=!0:this.closed=!0,this._vol.close(this.fd,r=>{r?this.emit("error",r):this.emit("close")}),this.fd=null};up.prototype._destroy=fv.prototype._destroy;up.prototype.destroySoon=up.prototype.end;var S0=class extends AT.EventEmitter{constructor(e){super(),this._filename="",this._filenameEncoded="",this._recursive=!1,this._encoding=Cg.ENCODING_UTF8,this._listenerRemovers=new Map,this._onParentChild=r=>{r.getName()===this._getName()&&this._emit("rename")},this._emit=r=>{this.emit("change",r,this._filenameEncoded)},this._persist=()=>{this._timer=setTimeout(this._persist,1e6)},this._vol=e}_getName(){return this._steps[this._steps.length-1]}start(e,r=!0,n=!1,i=Cg.ENCODING_UTF8){this._filename=(0,de.pathToFilename)(e),this._steps=mm(this._filename),this._filenameEncoded=(0,Cg.strToEncoding)(this._filename),this._recursive=n,this._encoding=i;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(_){let y=new Error(`watch ${this._filename} ${_.code}`);throw y.code=_.code,y.errno=_.code,y}let a=_=>{var y;let C=_.getPath(),U=_.getNode(),W=()=>{let q=iy(this._filename,C);return q||(q=this._getName()),this.emit("change","change",q)};U.on("change",W);let K=(y=this._listenerRemovers.get(U.ino))!==null&&y!==void 0?y:[];K.push(()=>U.removeListener("change",W)),this._listenerRemovers.set(U.ino,K)},l=_=>{var y;let C=_.getNode(),U=q=>{this.emit("change","rename",iy(this._filename,q.getPath())),setTimeout(()=>{a(q),l(q)})},W=q=>{let V=J=>{let re=J.getNode().ino,_e=this._listenerRemovers.get(re);_e&&(_e.forEach(Le=>Le()),this._listenerRemovers.delete(re));for(let[Le,ge]of J.children.entries())ge&&Le!=="."&&Le!==".."&&V(ge)};V(q),this.emit("change","rename",iy(this._filename,q.getPath()))};for(let[q,V]of _.children.entries())V&&q!=="."&&q!==".."&&a(V);if(_.on("child:add",U),_.on("child:delete",W),((y=this._listenerRemovers.get(C.ino))!==null&&y!==void 0?y:[]).push(()=>{_.removeListener("child:add",U),_.removeListener("child:delete",W)}),n)for(let[q,V]of _.children.entries())V&&q!=="."&&q!==".."&&l(V)};a(this._link),l(this._link);let v=this._link.parent;v&&(v.setMaxListeners(v.getMaxListeners()+1),v.on("child:delete",this._onParentChild)),r&&this._persist()}close(){clearTimeout(this._timer),this._listenerRemovers.forEach(r=>{r.forEach(n=>n())}),this._listenerRemovers.clear();let e=this._link.parent;e&&e.removeListener("child:delete",this._onParentChild)}};Kc.FSWatcher=S0});var UT=ln(I0=>{"use strict";Object.defineProperty(I0,"__esModule",{value:!0});I0.fsSynchronousApiList=void 0;I0.fsSynchronousApiList=["accessSync","appendFileSync","chmodSync","chownSync","closeSync","copyFileSync","existsSync","fchmodSync","fchownSync","fdatasyncSync","fstatSync","fsyncSync","ftruncateSync","futimesSync","lchmodSync","lchownSync","linkSync","lstatSync","mkdirSync","mkdtempSync","openSync","readdirSync","readFileSync","readlinkSync","readSync","readvSync","realpathSync","renameSync","rmdirSync","rmSync","statSync","symlinkSync","truncateSync","unlinkSync","utimesSync","lutimesSync","writeFileSync","writeSync","writevSync"]});var jT=ln(N0=>{"use strict";Object.defineProperty(N0,"__esModule",{value:!0});N0.fsCallbackApiList=void 0;N0.fsCallbackApiList=["access","appendFile","chmod","chown","close","copyFile","createReadStream","createWriteStream","exists","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","read","readv","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","unwatchFile","utimes","lutimes","watch","watchFile","write","writev","writeFile"]});var Dw=ln((Jc,C0)=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});Jc.memfs=Jc.fs=Jc.vol=Jc.Volume=void 0;Jc.createFsFromVolume=xw;var sA=zy(),uA=Xy(),Cw=FT(),YT=Uh(),lA=UT(),cA=jT(),{F_OK:fA,R_OK:dA,W_OK:pA,X_OK:mA}=YT.constants;Jc.Volume=Cw.Volume;Jc.vol=new Cw.Volume;function xw(t){let e={F_OK:fA,R_OK:dA,W_OK:pA,X_OK:mA,constants:YT.constants,Stats:sA.default,Dirent:uA.default};for(let r of lA.fsSynchronousApiList)typeof t[r]=="function"&&(e[r]=t[r].bind(t));for(let r of cA.fsCallbackApiList)typeof t[r]=="function"&&(e[r]=t[r].bind(t));return e.StatWatcher=t.StatWatcher,e.FSWatcher=t.FSWatcher,e.WriteStream=t.WriteStream,e.ReadStream=t.ReadStream,e.promises=t.promises,e._toUnixTimestamp=Cw.toUnixTimestamp,e.__vol=t,e}Jc.fs=xw(Jc.vol);var vA=(t={},e="/")=>{let r=Jc.Volume.fromNestedJSON(t,e);return{fs:xw(r),vol:r}};Jc.memfs=vA;C0.exports=Object.assign(Object.assign({},C0.exports),Jc.fs);C0.exports.semantic=!0});var XT=ln((VY,Fw)=>{function zT(t){return Array.isArray(t)?t:[t]}var yA=void 0,kw="",GT=" ",Ow="\\",bA=/^\s+$/,wA=/(?:[^\\]|^)\\$/,SA=/^\\!/,EA=/^\\#/,TA=/\r?\n/g,IA=/^\.*\/|^\.+$/,NA=/\/$/,g_="/",WT="node-ignore";typeof Symbol<"u"&&(WT=Symbol.for("node-ignore"));var KT=WT,ay=(t,e,r)=>(Object.defineProperty(t,e,{value:r}),r),CA=/([0-z])-([0-z])/g,JT=()=>!1,xA=t=>t.replace(CA,(e,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?e:kw),DA=t=>{let{length:e}=t;return t.slice(0,e-e%2)},RA=[[/^\uFEFF/,()=>kw],[/((?:\\\\)*?)(\\?\s+)$/,(t,e,r)=>e+(r.indexOf("\\")===0?GT:kw)],[/(\\+?)\s/g,(t,e)=>{let{length:r}=e;return e.slice(0,r-r%2)+GT}],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,r)=>e+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return e+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>Ow],[/\\\\/g,()=>Ow],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,r,n,i)=>e===Ow?`\\[${r}${DA(n)}${i}`:i==="]"&&n.length%2===0?`[${xA(r)}${n}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`]],OA=/(^|\\\/)?\\\*$/,oy="regex",x0="checkRegex",VT="_",kA={[oy](t,e){return`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`},[x0](t,e){return`${e?`${e}[^/]*`:"[^/]*"}(?=$|\\/$)`}},AA=t=>RA.reduce((e,[r,n])=>e.replace(r,n.bind(t)),t),D0=t=>typeof t=="string",PA=t=>t&&D0(t)&&!bA.test(t)&&!wA.test(t)&&t.indexOf("#")!==0,MA=t=>t.split(TA).filter(Boolean),Aw=class{constructor(e,r,n,i,a,l){this.pattern=e,this.mark=r,this.negative=a,ay(this,"body",n),ay(this,"ignoreCase",i),ay(this,"regexPrefix",l)}get regex(){let e=VT+oy;return this[e]?this[e]:this._make(oy,e)}get checkRegex(){let e=VT+x0;return this[e]?this[e]:this._make(x0,e)}_make(e,r){let n=this.regexPrefix.replace(OA,kA[e]),i=this.ignoreCase?new RegExp(n,"i"):new RegExp(n);return ay(this,r,i)}},LA=({pattern:t,mark:e},r)=>{let n=!1,i=t;i.indexOf("!")===0&&(n=!0,i=i.substr(1)),i=i.replace(SA,"!").replace(EA,"#");let a=AA(i);return new Aw(t,e,i,r,n,a)},Pw=class{constructor(e){this._ignoreCase=e,this._rules=[]}_add(e){if(e&&e[KT]){this._rules=this._rules.concat(e._rules._rules),this._added=!0;return}if(D0(e)&&(e={pattern:e}),PA(e.pattern)){let r=LA(e,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(e){return this._added=!1,zT(D0(e)?MA(e):e).forEach(this._add,this),this._added}test(e,r,n){let i=!1,a=!1,l;this._rules.forEach(_=>{let{negative:y}=_;a===y&&i!==a||y&&!i&&!a&&!r||!_[n].test(e)||(i=!y,a=y,l=y?yA:_)});let v={ignored:i,unignored:a};return l&&(v.rule=l),v}},FA=(t,e)=>{throw new e(t)},oh=(t,e,r)=>D0(t)?t?oh.isNotRelative(t)?r(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${e}\``,TypeError),ZT=t=>IA.test(t);oh.isNotRelative=ZT;oh.convert=t=>t;var Mw=class{constructor({ignorecase:e=!0,ignoreCase:r=e,allowRelativePaths:n=!1}={}){ay(this,KT,!0),this._rules=new Pw(r),this._strictPathCheck=!n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}add(e){return this._rules.add(e)&&this._initCache(),this}addPattern(e){return this.add(e)}_test(e,r,n,i){let a=e&&oh.convert(e);return oh(a,e,this._strictPathCheck?FA:JT),this._t(a,r,n,i)}checkIgnore(e){if(!NA.test(e))return this.test(e);let r=e.split(g_).filter(Boolean);if(r.pop(),r.length){let n=this._t(r.join(g_)+g_,this._testCache,!0,r);if(n.ignored)return n}return this._rules.test(e,!1,x0)}_t(e,r,n,i){if(e in r)return r[e];if(i||(i=e.split(g_).filter(Boolean)),i.pop(),!i.length)return r[e]=this._rules.test(e,n,oy);let a=this._t(i.join(g_)+g_,r,n,i);return r[e]=a.ignored?a:this._rules.test(e,n,oy)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return zT(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}},Lw=t=>new Mw(t),UA=t=>oh(t&&oh.convert(t),t,JT);if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let t=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");oh.convert=t;let e=/^[a-z]:\//i;oh.isNotRelative=r=>e.test(r)||ZT(r)}Fw.exports=Lw;Lw.default=Lw;Fw.exports.isPathValid=UA});var rI=ln((F0,tI)=>{(function(t,e){typeof F0=="object"&&typeof tI<"u"?e(F0):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.oneDS=t.oneDS||{}))})(F0,function(t){"use strict";var e="function",r="object",n="undefined",i="prototype",a=Object,l=a[i];function v(o,c){return o||c}function _(o,c){return o[c]}var y=void 0,C=null,U="",W="function",K="object",q="prototype",V="__proto__",J="undefined",re="constructor",_e="Symbol",Le="_polyfill",ge="length",Ee="name",Be="call",We="toString",st=v(Object),mt=_(st,q),At=v(String),Ur=_(At,q),on=v(Math),kn=v(Array),ct=_(kn,q),Dr=_(ct,"slice");function Ke(o,c){try{return{v:o.apply(this,c)}}catch(m){return{e:m}}}function _n(o,c){var m=Ke(o);return m.e?c:m.v}var Pe;function $t(o){return function(c){return typeof c===o}}function Vt(o){var c="[object "+o+"]";return function(m){return!!(m&&wt(m)===c)}}function wt(o){return mt[We].call(o)}function mn(o,c){return typeof o===c}function ut(o){return typeof o===J||o===J}function ti(o){return!Xt(o)}function ot(o){return o===C||ut(o)}function Su(o){return o===C||!Xt(o)}function Xt(o){return!!o||o!==y}function $a(o){return!Pe&&(Pe=["string","number","boolean",J,"symbol","bigint"]),o!==K&&Pe.indexOf(o)!==-1}var Kt=$t("string"),lr=$t(W);function Ci(o){return!o&&ot(o)?!1:!!o&&typeof o===K}var pr=_(kn,"isArray"),xi=Vt("Date"),Pr=$t("number"),qn=$t("boolean"),Dt=Vt("Error");function Mr(o){return!!(o&&o.then&&lr(o.then))}function Qe(o){return!o||!An(o)}function An(o){return!(!o||_n(function(){return!(o&&0+o)},!o))}var qr=_(st,"getOwnPropertyDescriptor");function Kr(o,c){return!!o&&mt.hasOwnProperty[Be](o,c)}var Ia=v(_(st,"hasOwn"),Ui);function Ui(o,c){return Kr(o,c)||!!qr(o,c)}function Lr(o,c,m){if(o&&Ci(o)){for(var w in o)if(Ia(o,w)&&c[Be](m||o,w,o[w])===-1)break}}var nr={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function _r(o){var c={};if(c[nr.c]=!0,c[nr.e]=!0,o.l){c.get=function(){return o.l.v};var m=qr(o.l,"v");m&&m.set&&(c.set=function(w){o.l.v=w})}return Lr(o,function(w,I){c[nr[w]]=ti(I)?c[nr[w]]:I}),c}var sn=_(st,"defineProperty");function td(o,c,m,w,I,O){var M={e:O,c:I};return m&&(M.g=m),w&&(M.s=w),sn(o,c,_r(M))}function ri(o,c,m){return sn(o,c,_r(m))}function rd(o,c,m,w,I){var O={};return Lr(o,function(M,k){Eu(O,M,c?k:M,I),Eu(O,k,m?k:M,I)}),w?w(O):O}function Eu(o,c,m,w){sn(o,c,{value:m,enumerable:!0,writable:!!w})}var Cn=v(At),as="[object Error]";function Jt(o,c){var m=U,w=mt[We][Be](o);w===as&&(o={stack:Cn(o.stack),message:Cn(o.message),name:Cn(o.name)});try{m=JSON.stringify(o,C,c?typeof c=="number"?c:4:y),m=(m?m.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):C)||Cn(o)}catch(I){m=" - "+Jt(I,c)}return w+": "+m}function ji(o){throw new Error(o)}function Ba(o){throw new TypeError(o)}var os=_(st,"freeze");function Na(o){return o}function nd(o){return o[V]||C}var al=_(st,"assign"),Ji=_(st,"keys");function Ca(o){return os&&Lr(o,function(c,m){(pr(m)||Ci(m))&&Ca(m)}),Di(o)}var Di=v(os,Na),ss=v(_(st,"seal"),Na),Gs=v(_(st,"getPrototypeOf"),nd);function ui(o){return rd(o,1,0,Di)}function ol(o){return rd(o,0,0,Di)}var Vs=ol({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),xa="__tsUtils$gblCfg",ni;function nc(){var o;return typeof globalThis!==J&&(o=globalThis),!o&&typeof self!==J&&(o=self),!o&&typeof window!==J&&(o=window),!o&&typeof global!==J&&(o=global),o}function zs(){if(!ni){var o=Ke(nc).v||{};ni=o[xa]=o[xa]||{}}return ni}var li=ua;function ua(o,c,m){var w=c?c[o]:C;return function(I){var O=(I?I[o]:C)||w;if(O||m){var M=arguments;return(O||m).apply(I,O?Dr[Be](M,1):M)}Ba('"'+Cn(o)+'" not defined for '+Jt(I))}}function mr(o){return function(c){return c[o]}}var xn=_(on,"max"),Da=li("slice",Ur),Jr=li("substring",Ur),_i=ua("substr",Ur,qa);function qa(o,c,m){return ot(o)&&Ba("Invalid "+Jt(o)),m<0?U:(c=c||0,c<0&&(c=xn(c+o[ge],0)),ut(m)?Da(o,c):Da(o,c,c+m))}function Zr(o,c){return Jr(o,0,c)}var la="_urid",Tu;function ca(){if(!Tu){var o=zs();Tu=o.gblSym=o.gblSym||{k:{},s:{}}}return Tu}var yn;function ci(o){var c={description:Cn(o),toString:function(){return _e+"("+o+")"}};return c[Le]=!0,c}function sl(o){var c=ca();if(!Ia(c.k,o)){var m=ci(o),w=Ji(c.s).length;m[la]=function(){return w+"_"+m[We]()},c.k[o]=m,c.s[m[la]()]=Cn(o)}return c.k[o]}function Ra(o){!yn&&(yn={});var c,m=Vs[o];return m&&(c=yn[m]=yn[m]||ci(_e+"."+m)),c}var Rr;function Ri(){Rr=zs()}function id(o){var c={};return!Rr&&Ri(),c.b=Rr.lzy,sn(c,"v",{configurable:!0,get:function(){var m=o();return Rr.lzy||sn(c,"v",{value:m}),c.b=Rr.lzy,m}}),c}function Yi(o){return sn({toJSON:function(){return o}},"v",{value:o})}var us="window",ic;function ls(o,c){var m;return function(){return!Rr&&Ri(),(!m||Rr.lzy)&&(m=Yi(Ke(o,c).v)),m.v}}function ad(o){return!Rr&&Ri(),(!ic||o===!1||Rr.lzy)&&(ic=Yi(Ke(nc).v||C)),ic.v}function vn(o,c){var m;if(!ic||c===!1?m=ad(c):m=ic.v,m&&m[o])return m[o];if(o===us)try{return window}catch{}return C}function nf(){return!!fa()}var fa=ls(vn,["document"]);function pp(){return!!fi()}var fi=ls(vn,[us]);function Im(){return!!Oa()}var Oa=ls(vn,["navigator"]);function af(){return!!fo()}var fo=ls(vn,["history"]),od=ls(function(){return!!Ke(function(){return process&&(process.versions||{}).node}).v}),Er,cs;function sd(){return Er=Yi(Ke(vn,[_e]).v),Er}function Zi(o){var c=(Rr.lzy?0:Er)||sd();return c.v?c.v[o]:y}function ac(){return!!Ft()}function Ft(){return!Rr&&Ri(),((Rr.lzy?0:Er)||sd()).v}function ka(o,c){var m=Vs[o];!Rr&&Ri();var w=(Rr.lzy?0:Er)||sd();return w.v?w.v[m||o]:c?y:Ra(o)}function ul(o,c){!Rr&&Ri();var m=(Rr.lzy?0:Er)||sd();return m.v?m.v(o):c?C:ci(o)}function of(o){return!Rr&&Ri(),cs=(Rr.lzy?0:cs)||Yi(Ke(Zi,["for"]).v),(cs.v||sl)(o)}function wv(o){return!!o&&lr(o.next)}function Ha(o){return!Su(o)&&lr(o[ka(3)])}var sf;function mp(o,c,m){if(o&&(wv(o)||(!sf&&(sf=Yi(ka(3))),o=o[sf.v]?o[sf.v]():C),wv(o))){var w=y,I=y;try{for(var O=0;!(I=o.next()).done&&c[Be](m||o,I.value,O,o)!==-1;)O++}catch(M){w={e:M},o.throw&&(I=C,o.throw(w))}finally{try{I&&!I.done&&o.return&&o.return(I)}finally{if(w)throw w.e}}}}function Iu(o,c,m){return o.apply(c,m)}function Ga(o,c){return!ut(c)&&o&&(pr(c)?Iu(o.push,o,c):wv(c)||Ha(c)?mp(c,function(m){o.push(m)}):o.push(c)),o}function vt(o,c,m){if(o)for(var w=o[ge]>>>0,I=0;I<w&&!(I in o&&c[Be](m||o,o[I],I,o)===-1);I++);}var Oi=li("indexOf",ct),Nu=li("map",ct);function Ws(o,c,m){return((o?o.slice:C)||Dr).apply(o,Dr[Be](arguments,1))}function vp(o,c,m){return Oi(o,c,m)!==-1}var hp=ua("includes",ct,vp),Dn=li("reduce",ct),Aa=v(_(st,"create"),gp);function gp(o){if(!o)return{};var c=typeof o;c!==K&&c!==W&&Ba("Prototype must be an Object or function: "+Jt(o));function m(){}return m[q]=o,new m}var Va;function da(o,c){var m=st.setPrototypeOf||function(w,I){var O;!Va&&(Va=Yi((O={},O[V]=[],O instanceof Array))),Va.v?w[V]=I:Lr(I,function(M,k){return w[M]=k})};return m(o,c)}function gh(o,c,m){Ke(ri,[c,Ee,{v:o,c:!0,e:!1}]),c=da(c,m);function w(){this[re]=c,Ke(ri,[this,Ee,{v:o,c:!0,e:!1}])}return c[q]=m===C?Aa(m):(w[q]=m[q],new w),c}function Sv(o,c){c&&(o[Ee]=c)}function Nm(o,c,m){var w=m||Error,I=w[q][Ee],O=Error.captureStackTrace;return gh(o,function(){var M=this,k=arguments;try{Ke(Sv,[w,o]);var L=Iu(w,M,Dr[Be](k))||M;if(L!==M){var Y=Gs(M);Y!==Gs(L)&&da(L,Y)}return O&&O(L,M[re]),c&&c(L,k),L}finally{Ke(Sv,[w,I])}},w)}function Cu(){return(Date.now||Cm)()}function Cm(){return new Date().getTime()}function og(o){return function(m){return ot(m)&&Ba("strTrim called ["+Jt(m)+"]"),m&&m.replace&&(m=m.replace(o,U)),m}}var _p=og(/^\s+|(?=\s)\s+$/g),Xi=ua("trim",Ur,_p),uf,lf,po;function Pa(o){if(!o||typeof o!==K)return!1;po||(po=pp()?fi():!0);var c=!1;if(o!==po){lf||(uf=Function[q][We],lf=uf[Be](st));try{var m=Gs(o);c=!m,c||(Kr(m,re)&&(m=m[re]),c=!!(m&&typeof m===W&&uf[Be](m)===lf))}catch{}}return c}function xu(o){return o.value&&Rm(o),!0}var xm=[ud,Rm,Dm,bp];function za(o,c,m,w){var I;return vt(o,function(O){if(O.k===c)return I=O,-1}),I||(I={k:c,v:c},o.push(I),w(I)),I.v}function yp(o,c,m,w){var I=m.handler,O=m.path?w?m.path.concat(w):m.path:[],M={handler:m.handler,src:m.src,path:O},k=typeof c,L=!1,Y=c===C;Y||(c&&k===K?L=Pa(c):Y=$a(k));var z={type:k,isPrim:Y,isPlain:L,value:c,result:c,path:O,origin:m.src,copy:function(te,Q){return yp(o,te,Q?M:m,Q)},copyTo:function(te,Q){return Du(o,te,Q,M)}};return z.isPrim?I&&I[Be](m,z)?z.result:c:za(o,c,O,function(te){ri(z,"result",{g:function(){return te.v},s:function(ie){te.v=ie}});for(var Q=0,ae=I;!(ae||(Q<xm.length?xm[Q++]:xu))[Be](m,z);)ae=C})}function Du(o,c,m,w){if(!ot(m))for(var I in m)c[I]=yp(o,m[I],w,I);return c}function oc(o,c,m){var w={handler:m,src:c,path:[]};return Du([],o,c,w)}function cf(o,c){var m={handler:c,src:o};return yp([],o,m)}function ud(o){var c=o.value;if(pr(c)){var m=o.result=[];return m.length=c.length,o.copyTo(m,c),!0}return!1}function bp(o){var c=o.value;return xi(c)?(o.result=new Date(c.getTime()),!0):!1}function Dm(o){return o.type===W}function Rm(o){var c=o.value;if(c&&o.isPlain){var m=o.result={};return o.copyTo(m,c),!0}return!1}function Ru(o,c){return vt(c,function(m){oc(o,m)}),o}function wp(o,c,m,w,I,O,M){return Ru(cf(o)||{},Dr[Be](arguments))}var Ks=mr(ge),ll;function Wa(){return!Rr&&Ri(),(!ll||Rr.lzy)&&(ll=Yi(Ke(vn,["performance"]).v)),ll.v}function ff(){var o=Wa();return o&&o.now?o.now():Cu()}var ld=ua("endsWith",Ur,sc);function sc(o,c,m){Kt(o)||Ba("'"+Jt(o)+"' is not a string");var w=Kt(c)?c:Cn(c),I=!ut(m)&&m<o[ge]?m:o[ge];return Jr(o,I-w[ge],I)===w}var mo=li("indexOf",Ur),Ev=ua("startsWith",Ur,fs);function fs(o,c,m){Kt(o)||Ba("'"+Jt(o)+"' is not a string");var w=Kt(c)?c:Cn(c),I=m>0?m:0;return Jr(o,I,I+w[ge])===w}var ko="ref",vo="unref",Ou="hasRef",cd="enabled";function uc(o,c,m){var w=!0,I=o?c(C):C,O;function M(){return w=!1,I&&I[vo]&&I[vo](),O}function k(){I&&m(I),I=C}function L(){return I=c(I),w||M(),O}function Y(z){!z&&I&&k(),z&&!I&&L()}return O={cancel:k,refresh:L},O[Ou]=function(){return I&&I[Ou]?I[Ou]():w},O[ko]=function(){return w=!0,I&&I[ko]&&I[ko](),O},O[vo]=M,O=sn(O,cd,{get:function(){return!!I},set:Y}),{h:O,dn:function(){I=C}}}function lc(o,c,m){var w=pr(c),I=w?c.length:0,O=(I>0?c[0]:w?y:c)||setTimeout,M=(I>1?c[1]:y)||clearTimeout,k=m[0];m[0]=function(){L.dn(),Iu(k,y,Dr[Be](arguments))};var L=uc(o,function(Y){if(Y){if(Y.refresh)return Y.refresh(),Y;Iu(M,y,[Y])}return Iu(O,y,m)},function(Y){Iu(M,y,[Y])});return L.h}function cl(o,c){return lc(!0,y,Dr[Be](arguments))}function fd(o,c){return lc(!1,y,Dr[Be](arguments))}(ad()||{}).Symbol,(ad()||{}).Reflect;var df="hasOwnProperty",dd=function(o,c){return dd=a.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,w){m.__proto__=w}||function(m,w){for(var I in w)w[df](I)&&(m[I]=w[I])},dd(o,c)};function fl(o,c){typeof c!==e&&c!==null&&Ba("Class extends value "+String(c)+" is not a constructor or null"),dd(o,c);function m(){this.constructor=o}o[i]=c===null?Aa(c):(m[i]=c[i],new m)}function ho(o,c){for(var m=0,w=c.length,I=o.length;m<w;m++,I++)o[I]=c[m];return o}var cc,Ao="constructor",Ma="prototype",ds="function",un="_dynInstFuncs",Js="_isDynProxy",go="_dynClass",fc="_dynCls$",dc="_dynInstChk",ps=dc,pf="_dfOpts",ms="_unknown_",ku="__proto__",pa="_dyn"+ku,Sp="__dynProto$Gbl",dl="_dynInstProto",Qi="useBaseInst",pd="setInstFuncs",Ep=Object,mf=Ep.getPrototypeOf,vf=Ep.getOwnPropertyNames,Tp=ad(),Tv=Tp[Sp]||(Tp[Sp]={o:(cc={},cc[pd]=!0,cc[Qi]=!0,cc),n:1e3});function pl(o){return o&&(o===Ep[Ma]||o===Array[Ma])}function Po(o){return pl(o)||o===Function[Ma]}function _o(o){var c;if(o){if(mf)return mf(o);var m=o[ku]||o[Ma]||(o[Ao]?o[Ao][Ma]:null);c=o[pa]||m,Kr(o,pa)||(delete o[dl],c=o[pa]=o[dl]||o[pa],o[dl]=m)}return c}function Rn(o,c){var m=[];if(vf)m=vf(o);else for(var w in o)typeof w=="string"&&Kr(o,w)&&m.push(w);if(m&&m.length>0)for(var I=0;I<m.length;I++)c(m[I])}function hf(o,c,m){return c!==Ao&&typeof o[c]===ds&&(m||Kr(o,c))&&c!==ku&&c!==Ma}function ml(o){Ba("DynamicProto: "+o)}function vl(o){var c=Aa(null);return Rn(o,function(m){!c[m]&&hf(o,m,!1)&&(c[m]=o[m])}),c}function Ip(o,c){for(var m=o.length-1;m>=0;m--)if(o[m]===c)return!0;return!1}function Ka(o,c,m,w){function I(L,Y,z){var te=Y[z];if(te[Js]&&w){var Q=L[un]||{};Q[ps]!==!1&&(te=(Q[Y[go]]||{})[z]||te)}return function(){return te.apply(L,arguments)}}var O=Aa(null);Rn(m,function(L){O[L]=I(c,m,L)});for(var M=_o(o),k=[];M&&!Po(M)&&!Ip(k,M);)Rn(M,function(L){!O[L]&&hf(M,L,!mf)&&(O[L]=I(c,M,L))}),k.push(M),M=_o(M);return O}function Au(o,c,m,w){var I=null;if(o&&Kr(m,go)){var O=o[un]||Aa(null);if(I=(O[m[go]]||Aa(null))[c],I||ml("Missing ["+c+"] "+ds),!I[dc]&&O[ps]!==!1){for(var M=!Kr(o,c),k=_o(o),L=[];M&&k&&!Po(k)&&!Ip(L,k);){var Y=k[c];if(Y){M=Y===w;break}L.push(k),k=_o(k)}try{M&&(o[c]=I),I[dc]=1}catch{O[ps]=!1}}}return I}function Zs(o,c,m){var w=c[o];return w===m&&(w=_o(c)[o]),typeof w!==ds&&ml("["+o+"] is not a "+ds),w}function cr(o,c,m,w,I){function O(L,Y){var z=function(){var te=Au(this,Y,L,z)||Zs(Y,L,z);return te.apply(this,arguments)};return z[Js]=1,z}if(!pl(o)){var M=m[un]=m[un]||Aa(null);if(!pl(M)){var k=M[c]=M[c]||Aa(null);M[ps]!==!1&&(M[ps]=!!I),pl(k)||Rn(m,function(L){hf(m,L,!1)&&m[L]!==w[L]&&(k[L]=m[L],delete m[L],(!Kr(o,L)||o[L]&&!o[L][Js])&&(o[L]=O(o,L)))})}}}function Mo(o,c){if(mf){for(var m=[],w=_o(c);w&&!Po(w)&&!Ip(m,w);){if(w===o)return!0;m.push(w),w=_o(w)}return!1}return!0}function vs(o,c){return Kr(o,Ma)?o.name||c||ms:((o||{})[Ao]||{}).name||c||ms}function Ja(o,c,m,w){Kr(o,Ma)||ml("theClass is an invalid class definition.");var I=o[Ma];Mo(I,c)||ml("["+vs(o)+"] not in hierarchy of ["+vs(c)+"]");var O=null;Kr(I,go)?O=I[go]:(O=fc+vs(o,"_")+"$"+Tv.n,Tv.n++,I[go]=O);var M=Ja[pf],k=!!M[Qi];k&&w&&w[Qi]!==void 0&&(k=!!w[Qi]);var L=vl(c),Y=Ka(I,c,L,k);m(c,Y);var z=!!mf&&!!M[pd];z&&w&&(z=!!w[pd]),cr(I,O,c,L,z!==!1)}Ja[pf]=Tv.o;var md=100,Za=ui,Pu=Za({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),bn=Za({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),ma="toLowerCase",Vr="blkVal",ht="length",hl="rdOnly",Lo="notify",Xs="warnToConsole",yo="throwInternal",Mu="setDf",Xa="watch",Xr="logger",Fo="apply",zr="push",Uo="splice",vd="hdlr",jo="cancel",Zn="initialize",bo="identifier",hs="removeNotificationListener",$i="addNotificationListener",ea="isInitialized",pc="instrumentationKey",gl="INACTIVE",hd="value",Qs="getNotifyMgr",Yo="getPlugin",$o="name",_l="iKey",Bo="time",ii="processNext",gd="getProcessTelContext",yl="pollInternalLogs",eu="enabled",La="stopPollingInternalLogs",gs="unload",tu="onComplete",Qa="version",mc="loggingLevelConsole",Lu="createNew",ki="teardown",Fu="messageId",ru="message",eo="isAsync",bl="diagLog",wn="_doTeardown",yi="update",to="getNext",wl="setNextPlugin",_s="protocol",Np="userAgent",Fa="split",vc="nodeType",Bi="replace",_d="logInternalMessage",va="type",ys="handler",bs="status",Cp="getResponseHeader",gf="getAllResponseHeaders",yd="isChildEvt",_f="data",qo="getCtx",ha="setCtx",hc="complete",Iv="itemsReceived",Sl="urlString",El="sendPOST",ws="headers",yf="timeout",_h="setRequestHeader",xp="traceId",bf="spanId",Tl="traceFlags",Om;function Nv(o,c){Om||(Om=Nm("AggregationError",function(w,I){I[ht]>1&&(w.errors=I[1])}));var m=o||"One or more errors occurred.";throw vt(c,function(w,I){m+=`
`.concat(I," > ").concat(Jt(w))}),new Om(m,c||[])}var Il="Promise",Cv="rejected";function wf(o,c){return Dp(o,function(m){return c?c({status:"fulfilled",rejected:!1,value:m}):m},function(m){return c?c({status:Cv,rejected:!0,reason:m}):m})}function Dp(o,c,m,w){var I=o;try{if(Mr(o))(c||m)&&(I=o.then(c,m));else try{c&&(I=c(o))}catch(O){if(m)I=m(O);else throw O}}finally{w&&wo(I,w)}return I}function wo(o,c){var m=o;return c&&(Mr(o)?o.finally?m=o.finally(c):m=o.then(function(w){return c(),w},function(w){throw c(),w}):c()),m}var km=["pending","resolving","resolved",Cv],yh="dispatchEvent",bd;function Am(o){var c;return o&&o.createEvent&&(c=o.createEvent("Event")),!!c&&c.initEvent}function Rp(o,c,m,w){var I=fa();!bd&&(bd=Yi(!!Ke(Am,[I]).v));var O=bd.v?I.createEvent("Event"):w?new Event(c):{};if(m&&m(O),bd.v&&O.initEvent(c,!1,!0),O&&o[yh])o[yh](O);else{var M=o["on"+c];if(M)M(O);else{var k=vn("console");k&&(k.error||k.log)(c,Jt(O))}}}var gc="unhandledRejection",wd=gc.toLowerCase(),Nl=10,nu;function _c(o){return lr(o)?o.toString():Jt(o)}function xv(o,c,m){var w=Ws(arguments,3),I=0,O=!1,M,k=[],L=!1,Y=null,z;function te(it,qt){try{L=!0,Y&&Y.cancel(),Y=null;var Tr=o(function(Ei,wr){k.push(function(){try{var Vi=I===2?it:qt,es=ut(Vi)?M:lr(Vi)?Vi(M):Vi;Mr(es)?es.then(Ei,wr):Vi?Ei(es):I===3?wr(es):Ei(es)}catch(ts){wr(ts)}}),O&&he()},w);return Tr}finally{}}function Q(it){return te(void 0,it)}function ae(it){var qt=it,Tr=it;return lr(it)&&(qt=function(Ei){return it&&it(),Ei},Tr=function(Ei){throw it&&it(),Ei}),te(qt,Tr)}function ie(){return km[I]}function he(){if(k.length>0){var it=k.slice();k=[],L=!0,Y&&Y.cancel(),Y=null,c(it)}}function Te(it,qt){return function(Tr){if(I===qt){if(it===2&&Mr(Tr)){I=1,Tr.then(Te(2,1),Te(3,1));return}I=it,O=!0,M=Tr,he(),!L&&it===3&&!Y&&(Y=cl(je,Nl))}}}function je(){if(!L)if(L=!0,od())process.emit(gc,M,z);else{var it=fi()||ad();!nu&&(nu=Yi(Ke(vn,[Il+"RejectionEvent"]).v)),Rp(it,wd,function(qt){return ri(qt,"promise",{g:function(){return z}}),qt.reason=M,qt},!!nu.v)}}z={then:te,catch:Q,finally:ae},sn(z,"state",{get:ie}),ac()&&(z[ka(11)]="IPromise");function rt(){return"IPromise "+ie()+(O?" - "+_c(M):"")}return z.toString=rt,function(){lr(m)||Ba(Il+": executor is not a function - "+_c(m));var qt=Te(3,0);try{m.call(z,Te(2,0),qt)}catch(Tr){qt(Tr)}}(),z}function Op(o){return function(c){var m=Ws(arguments,1);return o(function(w,I){try{var O=[],M=1;mp(c,function(k,L){k&&(M++,Dp(k,function(Y){O[L]=Y,--M===0&&w(O)},I))}),M--,M===0&&w(O)}catch(k){I(k)}},m)}}function yc(o){return Yi(function(c){var m=Ws(arguments,1);return o(function(w,I){var O=[],M=1;function k(L,Y){M++,wf(L,function(z){z.rejected?O[Y]={status:Cv,reason:z.reason}:O[Y]={status:"fulfilled",value:z.value},--M===0&&w(O)})}try{pr(c)?vt(c,k):Ha(c)?mp(c,k):Ba("Input is not an iterable"),M--,M===0&&w(O)}catch(L){I(L)}},m)})}function kp(o){vt(o,function(c){try{c()}catch{}})}function iu(o){var c=Pr(o)?o:0;return function(m){cl(function(){kp(m)},c)}}function Qr(o,c){return xv(Qr,iu(c),o,c)}var Cl;function Ai(o,c){!Cl&&(Cl=Yi(Ke(vn,[Il]).v||null));var m=Cl.v;if(!m)return Qr(o);lr(o)||Ba(Il+": executor is not a function - "+Jt(o));var w=0;function I(){return km[w]}var O=new m(function(M,k){function L(z){w=2,M(z)}function Y(z){w=3,k(z)}o(L,Y)});return sn(O,"state",{get:I}),O}var Ap;function Sd(o){return xv(Sd,kp,o)}function bc(o,c){return!Ap&&(Ap=yc(Sd)),Ap.v(o,c)}var xl;function ga(o,c){return!xl&&(xl=Yi(Ai)),xl.v.call(this,o,c)}var Ed=Op(ga),bi=void 0,yr="",au="channels",Pn="core",Ss="createPerfMgr",Dl="disabled",Rl="extensionConfig",ou="extensions",So="processTelemetry",Sf="priority",Pm="eventsSent",Ef="eventsDiscarded",Mm="eventsSendRequest",Tf="perfEvent",wc="offlineEventsStored",Pp="offlineBatchSent",di="offlineBatchDrop",Sc="getPerfMgr",Pi="domain",Uu="path",Mp="Not dynamic - ",Td=/-([a-z])/g,Mi=/([^\w\d_$])/g,Id=/^(\d+[\w\d_$])/;function Lp(o){return!ot(o)}function su(o){var c=o;return c&&Kt(c)&&(c=c[Bi](Td,function(m,w){return w.toUpperCase()}),c=c[Bi](Mi,"_"),c=c[Bi](Id,function(m,w){return"_"+w})),c}function gt(o,c){return o&&c?mo(o,c)!==-1:!1}function Es(o){return o&&o.toISOString()||""}function Ts(o){return Dt(o)?o[$o]:yr}function ro(o,c,m,w,I){var O=m;return o&&(O=o[c],O!==m&&(!I||I(O))&&(!w||w(m))&&(O=m,o[c]=O)),O}function If(o,c,m){var w;return o?(w=o[c],!w&&ot(w)&&(w=ut(m)?{}:m,o[c]=w)):w=ut(m)?{}:m,w}function Ec(o,c){var m=null,w=null;return lr(o)?m=o:w=o,function(){var I=arguments;if(m&&(w=m()),w)return w[c][Fo](w,I)}}function Is(o,c,m){if(o&&c&&Ci(o)&&Ci(c)){var w=function(O){if(Kt(O)){var M=c[O];lr(M)?(!m||m(O,!0,c,o))&&(o[O]=Ec(c,O)):(!m||m(O,!1,c,o))&&(Ia(o,O)&&delete o[O],ri(o,O,{g:function(){return c[O]},s:function(k){c[O]=k}}))}};for(var I in c)w(I)}return o}function Eo(o,c,m,w,I){o&&c&&m&&(I!==!1||ut(o[c]))&&(o[c]=Ec(m,w))}function Tc(o,c,m,w){return o&&c&&Ci(o)&&pr(m)&&vt(m,function(I){Kt(I)&&Eo(o,I,c,I,w)}),o}function Nd(o){return o&&al&&(o=a(al({},o))),o}function uu(o){try{return o.responseText}catch{}return null}function Nf(o,c){return o?"XDomainRequest,Response:"+uu(o)||"":c}function Ic(o,c){return o?"XMLHttpRequest,Status:"+o[bs]+",Response:"+uu(o)||o.response||"":c}function Cf(o,c){return c&&(Pr(c)?o=[c].concat(o):pr(c)&&(o=c.concat(o))),o}var Fp="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Up="withCredentials",Lm="timeout";function jp(o,c,m,w,I,O){w===void 0&&(w=!1),I===void 0&&(I=!1);function M(L,Y,z){try{L[Y]=z}catch{}}var k=new XMLHttpRequest;return w&&M(k,Fp,w),m&&M(k,Up,m),k.open(o,c,!I),m&&M(k,Up,m),!I&&O&&M(k,Lm,O),k}function ju(o){var c={};if(Kt(o)){var m=Xi(o)[Fa](/[\r\n]+/);vt(m,function(w){if(w){var I=w.indexOf(": ");if(I!==-1){var O=Xi(w.substring(0,I))[ma](),M=Xi(w.substring(I+1));c[O]=M}else c[Xi(w)]=1}})}return c}function Ol(o,c,m){if(!o[m]&&c&&c[Cp]){var w=c[Cp](m);w&&(o[m]=Xi(w))}return o}var xf="kill-duration",Ho="kill-duration-seconds",Ns="time-delta-millis";function Go(o,c){var m={};return o[gf]?m=ju(o[gf]()):c&&(m=Ol(m,o,Ns),m=Ol(m,o,xf),m=Ol(m,o,Ho)),m}var Vo="documentMode",kl="location",Yp="console",Al="JSON",$p="crypto",Bp="msCrypto",Cd="ReactNative",Cs="msie",zo="trident/",Wo="XMLHttpRequest",xd=null,Df=null,Nc=!1,qi=null,xs=null;function Dd(o,c){var m=!1;if(o){try{if(m=c in o,!m){var w=o[i];w&&(m=c in w)}}catch{}if(!m)try{var I=new o;m=!ut(I[c])}catch{}}return m}function ta(o){Nc=o}function lu(o){if(o&&Nc){var c=vn("__mockLocation");if(c)return c}return typeof location===r&&location?location:vn(kl)}function Rf(){return typeof console!==n?console:vn(Yp)}function Ds(){return!!(typeof JSON===r&&JSON||vn(Al)!==null)}function Li(){return Ds()?JSON||vn(Al):null}function Yu(){return vn($p)}function Rd(){return vn(Bp)}function Cc(){var o=Oa();return o&&o.product?o.product===Cd:!1}function $u(){var o=Oa();if(o&&(o[Np]!==Df||xd===null)){Df=o[Np];var c=(Df||yr)[ma]();xd=gt(c,Cs)||gt(c,zo)}return xd}function Dv(o){if(o===void 0&&(o=null),!o){var c=Oa()||{};o=c?(c.userAgent||yr)[ma]():yr}var m=(o||yr)[ma]();if(gt(m,Cs)){var w=fa()||{};return Math.max(parseInt(m[Fa](Cs)[1]),w[Vo]||0)}else if(gt(m,zo)){var I=parseInt(m[Fa](zo)[1]);if(I)return I+4}return null}function Fm(o){return(xs===null||o===!1)&&(xs=Im()&&!!Oa().sendBeacon),xs}function Rv(o){var c=!1;try{c=!!vn("fetch");var m=vn("Request");c&&o&&m&&(c=Dd(m,"keepalive"))}catch{}return c}function xc(){return qi===null&&(qi=typeof XDomainRequest!==n,qi&&Of()&&(qi=qi&&!Dd(vn(Wo),"withCredentials"))),qi}function Of(){var o=!1;try{var c=vn(Wo);o=!!c}catch{}return o}function Um(o,c){if(o)for(var m=0;m<o[ht];m++){var w=o[m];if(w[$o]&&w[$o]===c)return w}return{}}function bh(o){var c=fa();return c&&o?Um(c.querySelectorAll("meta"),o).content:null}function Od(o){var c,m=Wa();if(m){var w=m.getEntriesByType("navigation")||[];c=Um((w[ht]>0?w[0]:{}).serverTiming,o).description}return c}var qp=4294967296,Dc=4294967295,Bu=123456789,Hp=987654321,Rs=!1,kd=Bu,kf=Hp;function Os(o){o<0&&(o>>>=0),kd=Bu+o&Dc,kf=Hp-o&Dc,Rs=!0}function Pl(){try{var o=Cu()&2147483647;Os((Math.random()*qp^o)+o)}catch{}}function Ov(o){return o>0?Math.floor(Rc()/Dc*(o+1))>>>0:0}function Rc(o){var c=0,m=Yu()||Rd();return m&&m.getRandomValues&&(c=m.getRandomValues(new Uint32Array(1))[0]&Dc),c===0&&$u()&&(Rs||Pl(),c=wh()&Dc),c===0&&(c=Math.floor(qp*Math.random()|0)),o||(c>>>=0),c}function wh(o){kf=36969*(kf&65535)+(kf>>16)&Dc,kd=18e3*(kd&65535)+(kd>>16)&Dc;var c=(kf<<16)+(kd&65535)>>>0&Dc|0;return o||(c>>>=0),c}function kv(o){o===void 0&&(o=22);for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=Rc()>>>0,w=0,I=yr;I[ht]<o;)w++,I+=c.charAt(m&63),m>>>=6,w===5&&(m=(Rc()<<2&4294967295|m&3)>>>0,w=0);return I}var Af="3.3.5",jm="."+kv(6),Av=0;function qu(o){return o[vc]===1||o[vc]===9||!+o[vc]}function To(o,c){var m=c[o.id];if(!m){m={};try{qu(c)&&ri(c,o.id,{e:!1,v:m})}catch{}}return m}function cu(o,c){return c===void 0&&(c=!1),su(o+Av+++(c?"."+Af:yr)+jm)}function Hu(o){var c={id:cu("_aiData-"+(o||yr)+"."+Af),accept:function(m){return qu(m)},get:function(m,w,I,O){var M=m[c.id];return M?M[su(w)]:(O&&(M=To(c,m),M[su(w)]=I),I)},kill:function(m,w){if(m&&m[w])try{delete m[w]}catch{}}};return c}function Oc(o){return o&&Ci(o)&&(o.isVal||o.fb||Ia(o,"v")||Ia(o,"mrg")||Ia(o,"ref")||o.set)}function kc(o,c,m){var w,I=m.dfVal||Xt;if(c&&m.fb){var O=m.fb;pr(O)||(O=[O]);for(var M=0;M<O[ht];M++){var k=O[M],L=c[k];if(I(L)?w=L:o&&(L=o.cfg[k],I(L)&&(w=L),o.set(o.cfg,Cn(k),L)),I(w))break}}return!I(w)&&I(m.v)&&(w=m.v),w}function Ad(o,c,m){var w=m;if(m&&Oc(m)&&(w=kc(o,c,m)),w){Oc(w)&&(w=Ad(o,c,w));var I;pr(w)?(I=[],I[ht]=w[ht]):Pa(w)&&(I={}),I&&(Lr(w,function(O,M){M&&Oc(M)&&(M=Ad(o,c,M)),I[O]=M}),w=I)}return w}function Pf(o,c,m,w){var I,O,M,k=w,L,Y,z,te;Oc(k)?(I=k.isVal,O=k.set,z=k[hl],te=k[Vr],L=k.mrg,Y=k.ref,!Y&&ut(Y)&&(Y=!!L),M=kc(o,c,k)):M=w,te&&o[Vr](c,m);var Q,ae=!0,ie=c[m];(ie||!ot(ie))&&(Q=ie,ae=!1,I&&Q!==M&&!I(Q)&&(Q=M,ae=!0),O&&(Q=O(Q,M,c),ae=Q===M)),ae?M?Q=Ad(o,c,M):Q=M:(Pa(Q)||pr(M))&&L&&M&&(Pa(M)||pr(M))&&Lr(M,function(he,Te){Pf(o,Q,he,Te)}),o.set(c,m,Q),Y&&o.ref(c,m),z&&o[hl](c,m)}var Ko=of("[[ai_dynCfg_1]]"),Ml=of("[[ai_blkDynCfg_1]]"),Pv=of("[[ai_frcDynCfg_1]]");function Mv(o){if(o){var c;if(pr(o)?(c=[],c[ht]=o[ht]):Pa(o)&&(c={}),c)return Lr(o,function(m,w){c[m]=Mv(w)}),c}return o}function Gp(o){if(o){var c=o[Ko]||o;if(c.cfg&&(c.cfg===o||c.cfg[Ko]===c))return c}return null}function Vp(o){if(o&&(Pa(o)||pr(o)))try{o[Ml]=!0}catch{}return o}function Jo(o){if(o)try{o[Pv]=!0}catch{}return o}function Gu(o,c,m){var w=!1;return m&&!o[c.blkVal]&&(w=m[Pv],!w&&!m[Ml]&&(w=Pa(m)||pr(m))),w}function Ac(o){Ba("InvalidAccess:"+o)}var Lv=["push","pop","shift","unshift","splice"],zp=function(o,c,m,w){o&&o[yo](3,108,"".concat(m," [").concat(c,"] failed - ")+Jt(w))};function Fv(o,c,m){pr(c)&&vt(Lv,function(w){var I=c[w];c[w]=function(){for(var O=[],M=0;M<arguments.length;M++)O[M]=arguments[M];var k=I[Fo](this,O);return Pd(o,c,m,"Patching"),k}})}function Ym(o,c){var m=qr(o,c);return m&&m.get}function Wp(o,c,m,w){var I={n:m,h:[],trk:function(Y){Y&&Y.fn&&(Oi(I.h,Y)===-1&&I.h[zr](Y),o.trk(Y,I))},clr:function(Y){var z=Oi(I.h,Y);z!==-1&&I.h[Uo](z,1)}},O=!0,M=!1;function k(){O&&(M=M||Gu(k,o,w),w&&!w[Ko]&&M&&(w=Pd(o,w,m,"Converting")),O=!1);var Y=o.act;return Y&&I.trk(Y),w}k[o.prop]={chng:function(){o.add(I)}};function L(Y){if(w!==Y){k[o.ro]&&!o.upd&&Ac("["+m+"] is read-only:"+Jt(c)),O&&(M=M||Gu(k,o,w),O=!1);var z=M&&k[o.rf];if(M)if(z){Lr(w,function(Q){w[Q]=Y?Y[Q]:bi});try{Lr(Y,function(Q,ae){Ll(o,w,Q,ae)}),Y=w}catch(Q){zp((o.hdlr||{})[Xr],m,"Assigning",Q),M=!1}}else w&&w[Ko]&&Lr(w,function(Q){var ae=Ym(w,Q);if(ae){var ie=ae[o.prop];ie&&ie.chng()}});if(Y!==w){var te=Y&&Gu(k,o,Y);!z&&te&&(Y=Pd(o,Y,m,"Converting")),w=Y,M=te}o.add(I)}}ri(c,I.n,{g:k,s:L})}function Ll(o,c,m,w){if(c){var I=Ym(c,m),O=I&&!!I[o.prop];O?c[m]=w:Wp(o,c,m,w)}return c}function Io(o,c,m,w){if(c){var I=Ym(c,m),O=I&&!!I[o.prop],M=w&&w[0],k=w&&w[1],L=w&&w[2];if(!O){if(L)try{Vp(c)}catch(Y){zp((o.hdlr||{})[Xr],m,"Blocking",Y)}try{Ll(o,c,m,c[m]),I=Ym(c,m)}catch(Y){zp((o.hdlr||{})[Xr],m,"State",Y)}}M&&(I[o.rf]=M),k&&(I[o.ro]=k),L&&(I[o.blkVal]=!0)}return c}function Pd(o,c,m,w){try{Lr(c,function(I,O){Ll(o,c,I,O)}),c[Ko]||(sn(c,Ko,{get:function(){return o[vd]}}),Fv(o,c,m))}catch(I){zp((o.hdlr||{})[Xr],m,w,I)}return c}var Pc="[[ai_",Zo="]]";function sg(o){var c,m=ul(Pc+"get"+o.uid+Zo),w=ul(Pc+"ro"+o.uid+Zo),I=ul(Pc+"rf"+o.uid+Zo),O=ul(Pc+"blkVal"+o.uid+Zo),M=ul(Pc+"dtl"+o.uid+Zo),k=null,L=null,Y;function z(ie,he){var Te=Y.act;try{Y.act=ie,ie&&ie[M]&&(vt(ie[M],function(rt){rt.clr(ie)}),ie[M]=[]),he({cfg:o.cfg,set:o.set.bind(o),setDf:o[Mu].bind(o),ref:o.ref.bind(o),rdOnly:o[hl].bind(o)})}catch(rt){var je=o[Xr];throw je&&je[yo](1,107,Jt(rt)),rt}finally{Y.act=Te||null}}function te(){if(k){var ie=k;k=null,L&&L[jo](),L=null;var he=[];if(vt(ie,function(Te){if(Te&&(Te[M]&&(vt(Te[M],function(je){je.clr(Te)}),Te[M]=null),Te.fn))try{z(Te,Te.fn)}catch(je){he[zr](je)}}),k)try{te()}catch(Te){he[zr](Te)}he[ht]>0&&Nv("Watcher error(s): ",he)}}function Q(ie){if(ie&&ie.h[ht]>0){k||(k=[]),L||(L=cl(function(){L=null,te()},0));for(var he=0;he<ie.h[ht];he++){var Te=ie.h[he];Te&&Oi(k,Te)===-1&&k[zr](Te)}}}function ae(ie,he){if(ie){var Te=ie[M]=ie[M]||[];Oi(Te,he)===-1&&Te[zr](he)}}return Y=(c={prop:m,ro:w,rf:I},c[Vr]=O,c[vd]=o,c.add=Q,c[Lo]=te,c.use=z,c.trk=ae,c),Y}function Kp(o,c){var m={fn:c,rm:function(){m.fn=null,o=null,c=null}};return ri(m,"toJSON",{v:function(){return"WatcherHandler"+(m.fn?"":"[X]")}}),o.use(m,c),m}function Sh(o,c,m){var w,I=Gp(c);if(I)return I;var O=cu("dyncfg",!0),M=c&&m!==!1?c:Mv(c),k;function L(){k[Lo]()}function Y(je,rt,it){try{je=Ll(k,je,rt,it)}catch(qt){zp(o,rt,"Setting value",qt)}return je[rt]}function z(je){return Kp(k,je)}function te(je,rt){k.use(null,function(it){var qt=k.upd;try{ut(rt)||(k.upd=rt),je(it)}finally{k.upd=qt}})}function Q(je,rt){var it;return Io(k,je,rt,(it={},it[0]=!0,it))[rt]}function ae(je,rt){var it;return Io(k,je,rt,(it={},it[1]=!0,it))[rt]}function ie(je,rt){var it;return Io(k,je,rt,(it={},it[2]=!0,it))[rt]}function he(je,rt){return rt&&Lr(rt,function(it,qt){Pf(Te,je,it,qt)}),je}var Te=(w={uid:null,cfg:M},w[Xr]=o,w[Lo]=L,w.set=Y,w[Mu]=he,w[Xa]=z,w.ref=Q,w[hl]=ae,w[Vr]=ie,w._block=te,w);return ri(Te,"uid",{c:!1,e:!1,w:!1,v:O}),k=sg(Te),Pd(k,M,"config","Creating"),Te}function ug(o,c){o?(o[Xs](c),o[yo](2,108,c)):Ac(c)}function Hi(o,c,m,w){var I=Sh(m,o||{},w);return c&&I[Mu](I.cfg,c),I}function Md(o,c,m){var w=o[Ko]||o;return w.cfg&&(w.cfg===o||w.cfg[Ko]===w)?w[Xa](c):(ug(m,Mp+Jt(o)),Hi(o,null,m)[Xa](c))}function Ld(o,c){if(o&&o[gs])return o[gs](c)}function Uv(o,c,m){var w;return m||(w=ga(function(I){m=I})),o&&Ks(o)>0?wf(Ld(o[0],c),function(){Uv(Ws(o,1),c,m)}):m(),w}var Mc=500,_a="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function No(o){return{mrg:!0,v:o}}var Fd=[Pm,Ef,Mm,Tf],Vu=null,Fl;function ks(o,c){return function(){var m=arguments,w=jv(c);if(w){var I=w.listener;I&&I[o]&&I[o][Fo](I,m)}}}function $m(){var o=vn("Microsoft");return o&&(Vu=o.ApplicationInsights),Vu}function jv(o){var c=Vu;return!c&&o.disableDbgExt!==!0&&(c=Vu||$m()),c?c.ChromeDbgExt:null}function _t(o){if(!Fl){Fl={};for(var c=0;c<Fd[ht];c++)Fl[Fd[c]]=ks(Fd[c],o)}return Fl}var zu,fu="warnToConsole",Mf="AI (Internal): ",Yv="AI: ",Ul="AITR_",Ud={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},As=(zu={},zu[0]=null,zu[1]="errorToConsole",zu[2]=fu,zu[3]="debugToConsole",zu);function $v(o){return o?'"'+o[Bi](/\"/g,yr)+'"':yr}function Jp(o,c){var m=Rf();if(m){var w="log";m[o]&&(w=o),lr(m[w])&&m[w](c)}}var Lc=function(){function o(c,m,w,I){w===void 0&&(w=!1);var O=this;O[Fu]=c,O[ru]=(w?Yv:Mf)+c;var M=yr;Ds()&&(M=Li().stringify(I));var k=(m?" message:"+$v(m):yr)+(I?" props:"+$v(M):yr);O[ru]+=k}return o.dataType="MessageData",o}();function jl(o,c){return(o||{})[Xr]||new Yl(c)}var Yl=function(){function o(c){this.identifier="DiagnosticLogger",this.queue=[];var m=0,w={},I,O,M,k,L;Ja(o,this,function(Y){L=te(c||{}),Y.consoleLoggingLevel=function(){return I},Y[yo]=function(ie,he,Te,je,rt){rt===void 0&&(rt=!1);var it=new Lc(he,Te,rt,je);if(k)throw Jt(it);var qt=As[ie]||fu;if(ut(it[ru]))ae("throw"+(ie===1?"Critical":"Warning"),it);else{if(rt){var Tr=+it[Fu];!w[Tr]&&I>=ie&&(Y[qt](it[ru]),w[Tr]=!0)}else I>=ie&&Y[qt](it[ru]);z(ie,it)}},Y.debugToConsole=function(ie){Jp("debug",ie),ae("warning",ie)},Y[Xs]=function(ie){Jp("warn",ie),ae("warning",ie)},Y.errorToConsole=function(ie){Jp("error",ie),ae("error",ie)},Y.resetInternalMessageCount=function(){m=0,w={}},Y[_d]=z,Y[gs]=function(ie){L&&L.rm(),L=null};function z(ie,he){if(!Q()){var Te=!0,je=Ul+he[Fu];if(w[je]?Te=!1:w[je]=!0,Te&&(ie<=O&&(Y.queue[zr](he),m++,ae(ie===1?"error":"warn",he)),m===M)){var rt="Internal events throttle limit per PageView reached for this app.",it=new Lc(23,rt,!1);Y.queue[zr](it),ie===1?Y.errorToConsole(rt):Y[Xs](rt)}}}function te(ie){return Md(Hi(ie,Ud,Y).cfg,function(he){var Te=he.cfg;I=Te[mc],O=Te.loggingLevelTelemetry,M=Te.maxMessageLimit,k=Te.enableDebug})}function Q(){return m>=M}function ae(ie,he){var Te=jv(c||{});Te&&Te[bl]&&Te[bl](ie,he)}})}return o.__ieDyn=1,o}();function Bm(o){return o||new Yl}function rn(o,c,m,w,I,O){O===void 0&&(O=!1),Bm(o)[yo](c,m,w,I,O)}function Ps(o,c){Bm(o)[Xs](c)}function qm(o,c,m){Bm(o)[_d](c,m)}var Hm,du,Zp="toGMTString",Gm="toUTCString",Vm="cookie",jd="expires",Yd="isCookieUseDisabled",Fc="disableCookiesUsage",$l="_ckMgr",Xp=null,Uc=null,zm=null,Co,Wm={},$d={},Bv=(Hm={cookieCfg:No((du={},du[Pi]={fb:"cookieDomain",dfVal:Lp},du.path={fb:"cookiePath",dfVal:Lp},du.enabled=bi,du.ignoreCookies=bi,du.blockedCookies=bi,du)),cookieDomain:bi,cookiePath:bi},Hm[Fc]=bi,Hm);function Ms(){!Co&&(Co=id(function(){return fa()}))}function Eh(o,c){var m=Ls[$l]||$d[$l];return m||(m=Ls[$l]=Ls(o,c),$d[$l]=m),m}function Wu(o){return o?o.isEnabled():!0}function Km(o,c){return c&&o&&pr(o.ignoreCookies)?Oi(o.ignoreCookies,c)!==-1:!1}function jc(o,c){return c&&o&&pr(o.blockedCookies)&&Oi(o.blockedCookies,c)!==-1?!0:Km(o,c)}function qv(o,c){var m=c[eu];if(ot(m)){var w=void 0;ut(o[Yd])||(w=!o[Yd]),ut(o[Fc])||(w=!o[Fc]),m=w}return m}function Xo(o,c){var m;if(o)m=o.getCookieMgr();else if(c){var w=c.cookieCfg;w&&w[$l]?m=w[$l]:m=Ls(c)}return m||(m=Eh(c,(o||{})[Xr])),m}function Ls(o,c){var m,w,I,O,M,k,L,Y,z;o=Hi(o||$d,null,c).cfg,M=Md(o,function(Q){Q[Mu](Q.cfg,Bv),w=Q.ref(Q.cfg,"cookieCfg"),I=w[Uu]||"/",O=w[Pi],k=qv(o,w)!==!1,L=w.getCookie||fr,Y=w.setCookie||no,z=w.delCookie||no},c);var te=(m={isEnabled:function(){var Q=qv(o,w)!==!1&&k&&Hn(c),ae=$d[$l];return Q&&ae&&te!==ae&&(Q=Wu(ae)),Q},setEnabled:function(Q){k=Q!==!1,w[eu]=Q},set:function(Q,ae,ie,he,Te){var je=!1;if(Wu(te)&&!jc(w,Q)){var rt={},it=Xi(ae||yr),qt=mo(it,";");if(qt!==-1&&(it=Xi(Zr(ae,qt)),rt=Lf(Jr(ae,qt+1))),ro(rt,Pi,he||O,An,ut),!ot(ie)){var Tr=$u();if(ut(rt[jd])){var Ei=Cu(),wr=Ei+ie*1e3;if(wr>0){var Vi=new Date;Vi.setTime(wr),ro(rt,jd,Yc(Vi,Tr?Zp:Gm)||Yc(Vi,Tr?Zp:Gm)||yr,An)}}Tr||ro(rt,"max-age",yr+ie,null,ut)}var es=lu();es&&es[_s]==="https:"&&(ro(rt,"secure",null,null,ut),Uc===null&&(Uc=!io((Oa()||{})[Np])),Uc&&ro(rt,"SameSite","None",null,ut)),ro(rt,Uu,Te||I,null,ut),Y(Q,Bd(it,rt)),je=!0}return je},get:function(Q){var ae=yr;return Wu(te)&&!Km(w,Q)&&(ae=L(Q)),ae},del:function(Q,ae){var ie=!1;return Wu(te)&&(ie=te.purge(Q,ae)),ie},purge:function(Q,ae){var ie,he=!1;if(Hn(c)){var Te=(ie={},ie[Uu]=ae||"/",ie[jd]="Thu, 01 Jan 1970 00:00:01 GMT",ie);$u()||(Te["max-age"]="0"),z(Q,Bd(yr,Te)),he=!0}return he}},m[gs]=function(Q){M&&M.rm(),M=null},m);return te[$l]=te,te}function Hn(o){if(Xp===null){Xp=!1,!Co&&Ms();try{var c=Co.v||{};Xp=c[Vm]!==void 0}catch(m){rn(o,2,68,"Cannot access document.cookie - "+Ts(m),{exception:Jt(m)})}}return Xp}function Lf(o){var c={};if(o&&o[ht]){var m=Xi(o)[Fa](";");vt(m,function(w){if(w=Xi(w||yr),w){var I=mo(w,"=");I===-1?c[w]=null:c[Xi(Zr(w,I))]=Xi(Jr(w,I+1))}})}return c}function Yc(o,c){return lr(o[c])?o[c]():null}function Bd(o,c){var m=o||yr;return Lr(c,function(w,I){m+="; "+w+(ot(I)?yr:"="+I)}),m}function fr(o){var c=yr;if(!Co&&Ms(),Co.v){var m=Co.v[Vm]||yr;zm!==m&&(Wm=Lf(m),zm=m),c=Xi(Wm[o]||yr)}return c}function no(o,c){!Co&&Ms(),Co.v&&(Co.v[Vm]=o+"="+c)}function io(o){return Kt(o)?!!(gt(o,"CPU iPhone OS 12")||gt(o,"iPad; CPU OS 12")||gt(o,"Macintosh; Intel Mac OS X 10_14")&&gt(o,"Version/")&&gt(o,"Safari")||gt(o,"Macintosh; Intel Mac OS X 10_14")&&ld(o,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||gt(o,"Chrome/5")||gt(o,"Chrome/6")||gt(o,"UnrealEngine")&&!gt(o,"Chrome")||gt(o,"UCBrowser/12")||gt(o,"UCBrowser/11")):!1}var Fi={perfEvtsSendAll:!1};function $c(o){o.h=null;var c=o.cb;o.cb=[],vt(c,function(m){Ke(m.fn,[m.arg])})}function Sn(o,c,m,w){vt(o,function(I){I&&I[c]&&(m?(m.cb[zr]({fn:w,arg:I}),m.h=m.h||cl($c,0,m)):Ke(w,[I]))})}var Bc=function(){function o(c){this.listeners=[];var m,w,I=[],O={h:null,cb:[]},M=Hi(c,Fi);w=M[Xa](function(k){m=!!k.cfg.perfEvtsSendAll}),Ja(o,this,function(k){ri(k,"listeners",{g:function(){return I}}),k[$i]=function(L){I[zr](L)},k[hs]=function(L){for(var Y=Oi(I,L);Y>-1;)I[Uo](Y,1),Y=Oi(I,L)},k[Pm]=function(L){Sn(I,Pm,O,function(Y){Y[Pm](L)})},k[Ef]=function(L,Y){Sn(I,Ef,O,function(z){z[Ef](L,Y)})},k[Mm]=function(L,Y){Sn(I,Mm,Y?O:null,function(z){z[Mm](L,Y)})},k[Tf]=function(L){L&&(m||!L[yd]())&&Sn(I,Tf,null,function(Y){L[eo]?cl(function(){return Y[Tf](L)},0):Y[Tf](L)})},k[wc]=function(L){L&&L[ht]&&Sn(I,wc,O,function(Y){Y[wc](L)})},k[Pp]=function(L){L&&L[_f]&&Sn(I,Pp,O,function(Y){Y[Pp](L)})},k[di]=function(L,Y){if(L>0){var z=Y||0;Sn(I,di,O,function(te){te[di](L,z)})}},k[gs]=function(L){var Y=function(){w&&w.rm(),w=null,I=[],O.h&&O.h[jo](),O.h=null,O.cb=[]},z;if(Sn(I,"unload",null,function(te){var Q=te[gs](L);Q&&(z||(z=[]),z[zr](Q))}),z)return ga(function(te){return wf(Ed(z),function(){Y(),te()})});Y()}})}return o.__ieDyn=1,o}(),pu="ctx",Qp="ParentContextKey",mu="ChildrenContextKey",Jm=null,Ku=function(){function o(c,m,w){var I=this;if(I.start=Cu(),I[$o]=c,I[eo]=w,I[yd]=function(){return!1},lr(m)){var O;ri(I,"payload",{g:function(){return!O&&lr(m)&&(O=m(),m=null),O}})}I[qo]=function(M){return M?M===o[Qp]||M===o[mu]?I[M]:(I[pu]||{})[M]:null},I[ha]=function(M,k){if(M)if(M===o[Qp])I[M]||(I[yd]=function(){return!0}),I[M]=k;else if(M===o[mu])I[M]=k;else{var L=I[pu]=I[pu]||{};L[M]=k}},I[hc]=function(){var M=0,k=I[qo](o[mu]);if(pr(k))for(var L=0;L<k[ht];L++){var Y=k[L];Y&&(M+=Y[Bo])}I[Bo]=Cu()-I.start,I.exTime=I[Bo]-M,I[hc]=function(){}}}return o.ParentContextKey="parent",o.ChildrenContextKey="childEvts",o}(),Zm=function(){function o(c){this.ctx={},Ja(o,this,function(m){m.create=function(w,I,O){return new Ku(w,I,O)},m.fire=function(w){w&&(w[hc](),c&&lr(c[Tf])&&c[Tf](w))},m[ha]=function(w,I){if(w){var O=m[pu]=m[pu]||{};O[w]=I}},m[qo]=function(w){return(m[pu]||{})[w]}})}return o.__ieDyn=1,o}(),Xm="CoreUtils.doPerf";function d(o,c,m,w,I){if(o){var O=o;if(O[Sc]&&(O=O[Sc]()),O){var M=void 0,k=O[qo](Xm);try{if(M=O.create(c(),w,I),M){if(k&&M[ha]&&(M[ha](Ku[Qp],k),k[qo]&&k[ha])){var L=k[qo](Ku[mu]);L||(L=[],k[ha](Ku[mu],L)),L[zr](M)}return O[ha](Xm,M),m(M)}}catch(Y){M&&M[ha]&&M[ha]("exception",Y)}finally{M&&O.fire(M),O[ha](Xm,k)}}}return m()}function g(){return Jm}function S(){var o=D();return Jr(o,0,8)+"-"+Jr(o,8,12)+"-"+Jr(o,12,16)+"-"+Jr(o,16,20)+"-"+Jr(o,20)}function D(){for(var o=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],c=yr,m,w=0;w<4;w++)m=Rc(),c+=o[m&15]+o[m>>4&15]+o[m>>8&15]+o[m>>12&15]+o[m>>16&15]+o[m>>20&15]+o[m>>24&15]+o[m>>28&15];var I=o[8+(Rc()&3)|0];return _i(c,0,8)+_i(c,9,4)+"4"+_i(c,13,3)+I+_i(c,16,3)+_i(c,19,12)}var j=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,Z="00",X="ff",oe="00000000000000000000000000000000",ve="0000000000000000",ye=1;function et(o,c,m){return o&&o[ht]===c&&o!==m?!!o.match(/^[\da-f]*$/i):!1}function Ut(o,c,m){return et(o,c)?o:m}function or(o){(isNaN(o)||o<0||o>255)&&(o=1);for(var c=o.toString(16);c[ht]<2;)c="0"+c;return c}function dr(o,c,m,w){var I;return I={},I[Qa]=et(w,2,X)?w:Z,I[xp]=sr(o)?o:D(),I[bf]=Bt(c)?c:Zr(D(),16),I.traceFlags=m>=0&&m<=255?m:1,I}function dt(o,c){var m;if(!o||(pr(o)&&(o=o[0]||""),!o||!Kt(o)||o[ht]>8192))return null;if(o.indexOf(",")!==-1){var w=o[Fa](",");o=w[c>0&&w[ht]>c?c:0]}var I=j.exec(Xi(o));return!I||I[1]===X||I[2]===oe||I[3]===ve?null:(m={version:(I[1]||yr)[ma](),traceId:(I[2]||yr)[ma](),spanId:(I[3]||yr)[ma]()},m[Tl]=parseInt(I[4],16),m)}function sr(o){return et(o,32,oe)}function Bt(o){return et(o,16,ve)}function Or(o){return!(!o||!et(o[Qa],2,X)||!et(o[xp],32,oe)||!et(o[bf],16,ve)||!et(or(o[Tl]),2))}function kr(o){return Or(o)?(o[Tl]&ye)===ye:!1}function Pt(o){if(o){var c=or(o[Tl]);et(c,2)||(c="01");var m=o[Qa]||Z;return m!=="00"&&m!=="ff"&&(m=Z),"".concat(m.toLowerCase(),"-").concat(Ut(o.traceId,32,oe).toLowerCase(),"-").concat(Ut(o.spanId,16,ve).toLowerCase(),"-").concat(c.toLowerCase())}return""}function Mn(o){var c="traceparent",m=dt(bh(c),o);return m||(m=dt(Od(c),o)),m}var Ff=Hu("plugin");function Ln(o){return Ff.get(o,"state",{},!0)}function ao(o,c){for(var m=[],w=null,I=o[to](),O;I;){var M=I[Yo]();if(M){w&&w[wl]&&M[So]&&w[wl](M),O=Ln(M);var k=!!O[ea];M[ea]&&(k=M[ea]()),k||m[zr](M),w=M,I=I[to]()}}vt(m,function(L){var Y=o[Pn]();L[Zn](o.getCfg(),Y,c,o[to]()),O=Ln(L),!L[Pn]&&!O[Pn]&&(O[Pn]=Y),O[ea]=!0,delete O[ki]})}function qd(o){return o.sort(function(c,m){var w=0;if(m){var I=m[So];c[So]?w=I?c[Sf]-m[Sf]:1:I&&(w=-1)}else w=c?1:-1;return w})}function Qm(o){var c={};return{getName:function(){return c[$o]},setName:function(m){o&&o.setName(m),c[$o]=m},getTraceId:function(){return c[xp]},setTraceId:function(m){o&&o.setTraceId(m),sr(m)&&(c[xp]=m)},getSpanId:function(){return c[bf]},setSpanId:function(m){o&&o.setSpanId(m),Bt(m)&&(c[bf]=m)},getTraceFlags:function(){return c[Tl]},setTraceFlags:function(m){o&&o.setTraceFlags(m),c[Tl]=m}}}var Hd="TelemetryPluginChain",Gd="_hasRun",em="_getTelCtx",Hv=0;function Fe(o,c,m){for(;o;){if(o[Yo]()===m)return o;o=o[to]()}return En([m],c.config||{},c)}function xt(o,c,m,w){var I=null,O=[];c||(c=Hi({},null,m[Xr])),w!==null&&(I=w?Fe(o,m,w):o);var M={_next:L,ctx:{core:function(){return m},diagLog:function(){return jl(m,c.cfg)},getCfg:function(){return c.cfg},getExtCfg:z,getConfig:te,hasNext:function(){return!!I},getNext:function(){return I},setNext:function(ae){I=ae},iterate:Q,onComplete:k}};function k(ae,ie){for(var he=[],Te=2;Te<arguments.length;Te++)he[Te-2]=arguments[Te];ae&&O[zr]({func:ae,self:ut(ie)?M.ctx:ie,args:he})}function L(){var ae=I;if(I=ae?ae[to]():null,!ae){var ie=O;ie&&ie[ht]>0&&(vt(ie,function(he){try{he.func.call(he.self,he.args)}catch(Te){rn(m[Xr],2,73,"Unexpected Exception during onComplete - "+Jt(Te))}}),O=[])}return ae}function Y(ae,ie){var he=null,Te=c.cfg;if(Te&&ae){var je=Te[Rl];!je&&ie&&(je={}),Te[Rl]=je,je=c.ref(Te,Rl),je&&(he=je[ae],!he&&ie&&(he={}),je[ae]=he,he=c.ref(je,ae))}return he}function z(ae,ie){var he=Y(ae,!0);return ie&&Lr(ie,function(Te,je){if(ot(he[Te])){var rt=c.cfg[Te];(rt||!ot(rt))&&(he[Te]=rt)}Pf(c,he,Te,je)}),c[Mu](he,ie)}function te(ae,ie,he){he===void 0&&(he=!1);var Te,je=Y(ae,!1),rt=c.cfg;return je&&(je[ie]||!ot(je[ie]))?Te=je[ie]:(rt[ie]||!ot(rt[ie]))&&(Te=rt[ie]),Te||!ot(Te)?Te:he}function Q(ae){for(var ie;ie=M._next();){var he=ie[Yo]();he&&ae(he)}}return M}function zt(o,c,m,w){var I=Hi(c),O=xt(o,I,m,w),M=O.ctx;function k(Y){var z=O._next();return z&&z[So](Y,M),!z}function L(Y,z){return Y===void 0&&(Y=null),pr(Y)&&(Y=En(Y,I.cfg,m,z)),zt(Y||M[to](),I.cfg,m,z)}return M[ii]=k,M[Lu]=L,M}function en(o,c,m){var w=Hi(c.config),I=xt(o,w,c,m),O=I.ctx;function M(L){var Y=I._next();return Y&&Y[gs](O,L),!Y}function k(L,Y){return L===void 0&&(L=null),pr(L)&&(L=En(L,w.cfg,c,Y)),en(L||O[to](),c,Y)}return O[ii]=M,O[Lu]=k,O}function hn(o,c,m){var w=Hi(c.config),I=xt(o,w,c,m),O=I.ctx;function M(L){return O.iterate(function(Y){lr(Y[yi])&&Y[yi](O,L)})}function k(L,Y){return L===void 0&&(L=null),pr(L)&&(L=En(L,w.cfg,c,Y)),hn(L||O[to](),c,Y)}return O[ii]=M,O[Lu]=k,O}function En(o,c,m,w){var I=null,O=!w;if(pr(o)&&o[ht]>0){var M=null;vt(o,function(k){if(!O&&w===k&&(O=!0),O&&k&&lr(k[So])){var L=wi(k,c,m);I||(I=L),M&&M._setNext(L),M=L}})}return w&&!I?En([w],c,m):I}function wi(o,c,m){var w=null,I=lr(o[So]),O=lr(o[wl]),M;o?M=o[bo]+"-"+o[Sf]+"-"+Hv++:M="Unknown-0-"+Hv++;var k={getPlugin:function(){return o},getNext:function(){return w},processTelemetry:z,unload:te,update:Q,_id:M,_setNext:function(ae){w=ae}};function L(){var ae;return o&&lr(o[em])&&(ae=o[em]()),ae||(ae=zt(k,c,m)),ae}function Y(ae,ie,he,Te,je){var rt=!1,it=o?o[bo]:Hd,qt=ae[Gd];return qt||(qt=ae[Gd]={}),ae.setNext(w),o&&d(ae[Pn](),function(){return it+":"+he},function(){qt[M]=!0;try{var Tr=w?w._id:yr;Tr&&(qt[Tr]=!1),rt=ie(ae)}catch(wr){var Ei=w?qt[w._id]:!0;Ei&&(rt=!0),(!w||!Ei)&&rn(ae[bl](),1,73,"Plugin ["+it+"] failed during "+he+" - "+Jt(wr)+", run flags: "+Jt(qt))}},Te,je),rt}function z(ae,ie){ie=ie||L();function he(Te){if(!o||!I)return!1;var je=Ln(o);return je[ki]||je[Dl]?!1:(O&&o[wl](w),o[So](ae,Te),!0)}Y(ie,he,"processTelemetry",function(){return{item:ae}},!ae.sync)||ie[ii](ae)}function te(ae,ie){function he(){var Te=!1;if(o){var je=Ln(o),rt=o[Pn]||je[Pn];o&&(!rt||rt===ae.core())&&!je[ki]&&(je[Pn]=null,je[ki]=!0,je[ea]=!1,o[ki]&&o[ki](ae,ie)===!0&&(Te=!0))}return Te}Y(ae,he,"unload",function(){},ie[eo])||ae[ii](ie)}function Q(ae,ie){function he(){var Te=!1;if(o){var je=Ln(o),rt=o[Pn]||je[Pn];o&&(!rt||rt===ae.core())&&!je[ki]&&o[yi]&&o[yi](ae,ie)===!0&&(Te=!0)}return Te}Y(ae,he,"update",function(){},!1)||ae[ii](ie)}return Di(k)}var Ju=function(){function o(c,m,w,I){var O=this,M=zt(c,m,w,I);Tc(O,M,Ji(M))}return o}();function Fs(){var o=[];function c(w){w&&o[zr](w)}function m(w,I){vt(o,function(O){try{O(w,I)}catch(M){rn(w[bl](),2,73,"Unexpected error calling unload handler - "+Jt(M))}}),o=[]}return{add:c,run:m}}var Zu,qc;function Gv(o,c){Zu=o,qc=c}function tm(){var o=[];function c(w){var I=o;o=[],vt(I,function(O){try{(O.rm||O.remove).call(O)}catch(M){rn(w,2,73,"Unloading:"+Jt(M))}}),Zu&&I[ht]>Zu&&(qc?qc("doUnload",I):rn(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))}function m(w){w&&(Ga(o,w),Zu&&o[ht]>Zu&&(qc?qc("Add",o):rn(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}return{run:c,add:m}}var Uf,Bl="getPlugin",$_=(Uf={},Uf[Rl]={isVal:Lp,v:{}},Uf),lg=function(){function o(){var c=this,m,w,I,O,M;Y(),Ja(o,c,function(z){z[Zn]=function(te,Q,ae,ie){L(te,Q,ie),m=!0},z[ki]=function(te,Q){var ae,ie=z[Pn];if(!ie||te&&ie!==te[Pn]())return;var he,Te=!1,je=te||en(null,ie,I&&I[Bl]?I[Bl]():I),rt=Q||(ae={reason:0},ae[eo]=!1,ae);function it(){Te||(Te=!0,O.run(je,Q),M.run(je[bl]()),he===!0&&je[ii](rt),Y())}return!z[wn]||z[wn](je,rt,it)!==!0?it():he=!0,he},z[yi]=function(te,Q){var ae=z[Pn];if(!ae||te&&ae!==te[Pn]())return;var ie,he=!1,Te=te||hn(null,ae,I&&I[Bl]?I[Bl]():I),je=Q||{reason:0};function rt(){he||(he=!0,L(Te.getCfg(),Te.core(),Te[to]()))}return!z._doUpdate||z._doUpdate(Te,je,rt)!==!0?rt():ie=!0,ie},Eo(z,"_addUnloadCb",function(){return O},"add"),Eo(z,"_addHook",function(){return M},"add"),ri(z,"_unloadHooks",{g:function(){return M}})}),c[bl]=function(z){return k(z)[bl]()},c[ea]=function(){return m},c.setInitialized=function(z){m=z},c[wl]=function(z){I=z},c[ii]=function(z,te){te?te[ii](z):I&&lr(I[So])&&I[So](z,null)},c._getTelCtx=k;function k(z){z===void 0&&(z=null);var te=z;if(!te){var Q=w||zt(null,{},c[Pn]);I&&I[Bl]?te=Q[Lu](null,I[Bl]):te=Q[Lu](null,I)}return te}function L(z,te,Q){Hi(z,$_,jl(te)),!Q&&te&&(Q=te[gd]()[to]());var ae=I;I&&I[Bl]&&(ae=I[Bl]()),c[Pn]=te,w=zt(Q,z,te,ae)}function Y(){m=!1,c[Pn]=null,w=null,I=null,M=tm(),O=Fs()}}return o.__ieDyn=1,o}();function Zg(o,c,m){var w={id:c,fn:m};Ga(o,w);var I={remove:function(){vt(o,function(O,M){if(O.id===w.id)return o[Uo](M,1),-1})}};return I}function Th(o,c,m){for(var w=!1,I=o[ht],O=0;O<I;++O){var M=o[O];if(M)try{if(M.fn[Fo](null,[c])===!1){w=!0;break}}catch(k){rn(m,2,64,"Telemetry initializer failed: "+Ts(k),{exception:Jt(k)},!0)}}return!w}var B_=function(o){fl(c,o);function c(){var m=o.call(this)||this;m.identifier="TelemetryInitializerPlugin",m.priority=199;var w,I;O(),Ja(c,m,function(M,k){M.addTelemetryInitializer=function(L){return Zg(I,w++,L)},M[So]=function(L,Y){Th(I,L,Y?Y[bl]():M[bl]())&&M[ii](L,Y)},M[wn]=function(){O()}});function O(){w=0,I=[]}return m}return c.__ieDyn=1,c}(lg),jf,ev="Plugins must provide initialize method",Vv="_notificationManager",Yf="SDK is still unloading...",tv="SDK is not initialized",cg=100,Xg=5e4,Vd=Ca((jf={cookieCfg:{}},jf[ou]={rdOnly:!0,ref:!0,v:[]},jf[au]={rdOnly:!0,ref:!0,v:[]},jf[Rl]={ref:!0,v:{}},jf[Ss]=bi,jf.loggingLevelConsole=0,jf.diagnosticLogInterval=bi,jf));function Qg(o,c){return new Zm(c)}function q_(o,c,m){var w,I=[],O=[],M={};return vt(m,function(k){(ot(k)||ot(k[Zn]))&&ji(ev);var L=k[Sf],Y=k[bo];k&&L&&(ot(M[L])?M[L]=Y:Ps(o,"Two extensions have same priority #"+L+" - "+M[L]+", "+Y)),!L||L<c?I[zr](k):O[zr](k)}),w={},w[Pn]=I,w[au]=O,w}function fg(o,c){var m=!1;return vt(c,function(w){if(w===o)return m=!0,-1}),m}function zv(o,c,m,w){m&&Lr(m,function(I,O){w&&Pa(O)&&Pa(c[I])&&zv(o,c[I],O,w),w&&Pa(O)&&Pa(c[I])?zv(o,c[I],O,w):o.set(c,I,O)})}function dg(o,c){var m=null,w=-1;return vt(o,function(I,O){if(I.w===c)return m=I,w=O,-1}),{i:w,l:m}}function Ih(o,c){var m=dg(o,c).l;return m||(m={w:c,rm:function(){var w=dg(o,c);w.i!==-1&&o[Uo](w.i,1)}},o[zr](m)),m}function rv(o,c,m){vt(c,function(w){var I=Md(o,w.w,m);delete w.w,w.rm=function(){I.rm()}})}function zd(o,c,m,w){return c.add(o[Xa](function(I){var O=I.cfg.disableDbgExt;O===!0&&w&&(m[hs](w),w=null),m&&!w&&O!==!0&&(w=_t(I.cfg),m[$i](w))})),w}function pg(o){return ri({rm:function(){o.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(o)+">"}})}var Wv=function(){function o(){var c,m,w,I,O,M,k,L,Y,z,te,Q,ae,ie,he,Te,je,rt,it,qt,Tr,Ei,wr,Vi,es,ts,zl,wa,Wf,Ve,Mt,Gn;Ja(o,this,function(Se){Fr(),Se._getDbgPlgTargets=function(){return[wr,I]},Se[ea]=function(){return m},Se.activeStatus=function(){return ts},Se._setPendingStatus=function(){ts=3},Se[Zn]=function(Ce,lt,Yt,Lt){ae&&ji(Yf),Se[ea]()&&ji("Core cannot be initialized more than once"),c=Hi(Ce,Vd,Yt||Se[Xr],!1),Ce=c.cfg,rs(c[Xa](function(jn){var Ti=jn.cfg,Ua=ts===3;if(!Ua){wa=Ti.initInMemoMaxSize||cg;var so=Ti[pc],Jf=Ti.endpointUrl;if(ot(so)){Tr=null,ts=bn[gl];var Rh="Please provide instrumentation key";m?(rn(w,1,100,Rh),Vn()):ji(Rh);return}var Oh=[];if(Mr(so)?(Oh[zr](so),Tr=null):Tr=so,Mr(Jf)?(Oh[zr](Jf),zl=null):zl=Jf,Oh[ht]){Wf=!1,ts=3;var G_=Lp(Ti.initTimeOut)?Ti.initTimeOut:Xg,Py=bc(Oh);cl(function(){Wf||ur()},G_),wf(Py,function(_g){try{if(Wf)return;if(!_g.rejected){var zc=_g[hd];if(zc&&zc[ht]){var V_=zc[0];if(Tr=V_&&V_[hd],zc[ht]>1){var z_=zc[1];zl=z_&&z_[hd]}}Tr&&(Ce[pc]=Tr,Ce.endpointUrl=zl)}ur()}catch{Wf||ur()}})}else ur();var t_=jn.ref(jn.cfg,Rl);Lr(t_,function(_g){jn.ref(t_,_g)})}})),O=Lt,it=zd(c,rt,O&&Se[Qs](),it),um(),Se[Xr]=Yt;var ir=Ce[ou];if(z=[],z[zr].apply(z,ho(ho([],lt,!1),ir)),te=Ce[au],pi(null),(!Q||Q[ht]===0)&&ji("No "+au+" available"),te&&te[ht]>1){var $r=Se[Yo]("TeeChannelController");(!$r||!$r.plugin)&&rn(w,1,28,"TeeChannel required")}rv(Ce,Ei,w),Ei=null,m=!0,ts===bn.ACTIVE&&Vn()},Se.getChannels=function(){var Ce=[];return Q&&vt(Q,function(lt){Ce[zr](lt)}),Di(Ce)},Se.track=function(Ce){d(Se[Sc](),function(){return"AppInsightsCore:track"},function(){Ce===null&&(mi(Ce),ji("Invalid telemetry item")),!Ce[$o]&&ot(Ce[$o])&&(mi(Ce),ji("telemetry name required")),Ce[_l]=Ce[_l]||Tr,Ce[Bo]=Ce[Bo]||Es(new Date),Ce.ver=Ce.ver||"4.0",!ae&&Se[ea]()&&ts===bn.ACTIVE?ra()[ii](Ce):ts!==bn[gl]&&I[ht]<=wa&&I[zr](Ce)},function(){return{item:Ce}},!Ce.sync)},Se[gd]=ra,Se[Qs]=function(){return O||(O=new Bc(c.cfg),Se[Vv]=O),O},Se[$i]=function(Ce){Se.getNotifyMgr()[$i](Ce)},Se[hs]=function(Ce){O&&O[hs](Ce)},Se.getCookieMgr=function(){return L||(L=Ls(c.cfg,Se[Xr])),L},Se.setCookieMgr=function(Ce){L!==Ce&&(Ld(L,!1),L=Ce)},Se[Sc]=function(){return M||k||g()},Se.setPerfMgr=function(Ce){M=Ce},Se.eventCnt=function(){return I[ht]},Se.releaseQueue=function(){if(m&&I[ht]>0){var Ce=I;I=[],ts===2?vt(Ce,function(lt){lt[_l]=lt[_l]||Tr,ra()[ii](lt)}):rn(w,2,20,"core init status is not active")}},Se[yl]=function(Ce){return he=Ce||null,Gn=!1,Ve&&Ve[jo](),zi(!0)};function ur(){Wf=!0,ot(Tr)?(ts=bn[gl],rn(w,1,112,"ikey can't be resolved from promises")):ts=bn.ACTIVE,Vn()}function Vn(){m&&(Se.releaseQueue(),Se[yl]())}function zi(Ce){if((!Ve||!Ve[eu])&&!Gn){var lt=Ce||w&&w.queue[ht]>0;lt&&(Mt||(Mt=!0,rs(c[Xa](function(Yt){var Lt=Yt.cfg.diagnosticLogInterval;(!Lt||!(Lt>0))&&(Lt=1e4);var ir=!1;Ve&&(ir=Ve[eu],Ve[jo]()),Ve=fd(sm,Lt),Ve.unref(),Ve[eu]=ir}))),Ve[eu]=!0)}return Ve}Se[La]=function(){Gn=!0,Ve&&Ve[jo](),sm()},Tc(Se,function(){return ie},["addTelemetryInitializer"]),Se[gs]=function(Ce,lt,Yt){var Lt;Ce===void 0&&(Ce=!0),m||ji(tv),ae&&ji(Yf);var ir=(Lt={reason:50},Lt[eo]=Ce,Lt.flushComplete=!1,Lt),$r;Ce&&!lt&&($r=ga(function(Ua){lt=Ua}));var jn=en(tp(),Se);jn[tu](function(){rt.run(Se[Xr]),Uv([L,O,w],Ce,function(){Fr(),lt&&lt(ir)})},Se);function Ti(Ua){ir.flushComplete=Ua,ae=!0,je.run(jn,ir),Se[La](),jn[ii](ir)}return sm(),Kf(Ce,Ti,6,Yt),$r},Se[Yo]=na,Se.addPlugin=function(Ce,lt,Yt,Lt){if(!Ce){Lt&&Lt(!1),ov(ev);return}var ir=na(Ce[bo]);if(ir&&!lt){Lt&&Lt(!1),ov("Plugin ["+Ce[bo]+"] is already loaded!");return}var $r={reason:16};function jn(so){z[zr](Ce),$r.added=[Ce],pi($r),Lt&&Lt(!0)}if(ir){var Ti=[ir.plugin],Ua={reason:2,isAsync:!!Yt};Sa(Ti,Ua,function(so){so?($r.removed=Ti,$r.reason|=32,jn()):Lt&&Lt(!1)})}else jn()},Se.updateCfg=function(Ce,lt){lt===void 0&&(lt=!0);var Yt;if(Se[ea]()){Yt={reason:1,cfg:c.cfg,oldCfg:wp({},c.cfg),newConfig:wp({},Ce),merge:lt},Ce=Yt.newConfig;var Lt=c.cfg;Ce[ou]=Lt[ou],Ce[au]=Lt[au]}c._block(function(ir){var $r=ir.cfg;zv(ir,$r,Ce,lt),lt||Lr($r,function(jn){Ia(Ce,jn)||ir.set($r,jn,bi)}),ir[Mu]($r,Vd)},!0),c[Lo](),Yt&&lm(Yt)},Se.evtNamespace=function(){return Te},Se.flush=Kf,Se.getTraceCtx=function(Ce){return qt||(qt=Qm()),qt},Se.setTraceCtx=function(Ce){qt=Ce||null},Se.addUnloadHook=rs,Eo(Se,"addUnloadCb",function(){return je},"add"),Se.onCfgChange=function(Ce){var lt;return m?lt=Md(c.cfg,Ce,Se[Xr]):lt=Ih(Ei,Ce),pg(lt)},Se.getWParam=function(){return nf()||c.cfg.enableWParam?0:-1};function oo(){var Ce={};Vi=[];var lt=function(Yt){Yt&&vt(Yt,function(Lt){if(Lt[bo]&&Lt[Qa]&&!Ce[Lt.identifier]){var ir=Lt[bo]+"="+Lt[Qa];Vi[zr](ir),Ce[Lt.identifier]=Lt}})};lt(Q),te&&vt(te,function(Yt){lt(Yt)}),lt(z)}function Fr(){m=!1,c=Hi({},Vd,Se[Xr]),c.cfg[mc]=1,ri(Se,"config",{g:function(){return c.cfg},s:function(lt){Se.updateCfg(lt,!1)}}),ri(Se,"pluginVersionStringArr",{g:function(){return Vi||oo(),Vi}}),ri(Se,"pluginVersionString",{g:function(){return es||(Vi||oo(),es=Vi.join(";")),es||yr}}),ri(Se,"logger",{g:function(){return w||(w=new Yl(c.cfg),c[Xr]=w),w},s:function(lt){c[Xr]=lt,w!==lt&&(Ld(w,!1),w=lt)}}),Se[Xr]=new Yl(c.cfg),wr=[];var Ce=Se.config[ou]||[];Ce.splice(0,Ce[ht]),Ga(Ce,wr),ie=new B_,I=[],Ld(O,!1),O=null,M=null,k=null,Ld(L,!1),L=null,Y=null,z=[],te=null,Q=null,ae=!1,he=null,Te=cu("AIBaseCore",!0),je=Fs(),qt=null,Tr=null,rt=tm(),Ei=[],es=null,Vi=null,Gn=!1,Ve=null,Mt=!1,ts=0,zl=null,wa=null,Wf=!1}function ra(){var Ce=zt(tp(),c.cfg,Se);return Ce[tu](zi),Ce}function pi(Ce){var lt=q_(Se[Xr],Mc,z);Y=null,es=null,Vi=null,Q=(te||[])[0]||[],Q=qd(Ga(Q,lt[au]));var Yt=Ga(qd(lt[Pn]),Q);wr=Di(Yt);var Lt=Se.config[ou]||[];Lt.splice(0,Lt[ht]),Ga(Lt,wr);var ir=ra();Q&&Q[ht]>0&&ao(ir[Lu](Q),Yt),ao(ir,Yt),Ce&&lm(Ce)}function na(Ce){var lt=null,Yt=null,Lt=[];return vt(wr,function(ir){if(ir[bo]===Ce&&ir!==ie)return Yt=ir,-1;ir.getChannel&&Lt[zr](ir)}),!Yt&&Lt[ht]>0&&vt(Lt,function(ir){if(Yt=ir.getChannel(Ce),!Yt)return-1}),Yt&&(lt={plugin:Yt,setEnabled:function(ir){Ln(Yt)[Dl]=!ir},isEnabled:function(){var ir=Ln(Yt);return!ir[ki]&&!ir[Dl]},remove:function(ir,$r){var jn;ir===void 0&&(ir=!0);var Ti=[Yt],Ua=(jn={reason:1},jn[eo]=ir,jn);Sa(Ti,Ua,function(so){so&&pi({reason:32,removed:Ti}),$r&&$r(so)})}}),lt}function tp(){if(!Y){var Ce=(wr||[]).slice();Oi(Ce,ie)===-1&&Ce[zr](ie),Y=En(qd(Ce),c.cfg,Se)}return Y}function Sa(Ce,lt,Yt){if(Ce&&Ce[ht]>0){var Lt=En(Ce,c.cfg,Se),ir=en(Lt,Se);ir[tu](function(){var $r=!1,jn=[];vt(z,function(Ua,so){fg(Ua,Ce)?$r=!0:jn[zr](Ua)}),z=jn,es=null,Vi=null;var Ti=[];te&&(vt(te,function(Ua,so){var Jf=[];vt(Ua,function(Rh){fg(Rh,Ce)?$r=!0:Jf[zr](Rh)}),Ti[zr](Jf)}),te=Ti),Yt&&Yt($r),zi()}),ir[ii](lt)}else Yt(!1)}function sm(){if(w&&w.queue){var Ce=w.queue.slice(0);w.queue[ht]=0,vt(Ce,function(lt){var Yt,Lt=(Yt={},Yt[$o]=he||"InternalMessageId: "+lt[Fu],Yt[_l]=Tr,Yt[Bo]=Es(new Date),Yt.baseType=Lc.dataType,Yt.baseData={message:lt[ru]},Yt);Se.track(Lt)})}}function Kf(Ce,lt,Yt,Lt){var ir=1,$r=!1,jn=null;Lt=Lt||5e3;function Ti(){ir--,$r&&ir===0&&(jn&&jn[jo](),jn=null,lt&&lt($r),lt=null)}if(Q&&Q[ht]>0){var Ua=ra()[Lu](Q);Ua.iterate(function(so){if(so.flush){ir++;var Jf=!1;so.flush(Ce,function(){Jf=!0,Ti()},Yt)||Jf||(Ce&&jn==null?jn=cl(function(){jn=null,Ti()},Lt):Ti())}})}return $r=!0,Ti(),!0}function um(){var Ce;rs(c[Xa](function(lt){var Yt=lt.cfg.enablePerfMgr;if(Yt){var Lt=lt.cfg[Ss];(Ce!==Lt||!Ce)&&(Lt||(Lt=Qg),If(lt.cfg,Ss,Lt),Ce=Lt,k=null),!M&&!k&&lr(Lt)&&(k=Lt(Se,Se[Qs]()))}else k=null,Ce=null}))}function lm(Ce){var lt=hn(tp(),Se);lt[tu](zi),(!Se._updateHook||Se._updateHook(lt,Ce)!==!0)&&lt[ii](Ce)}function ov(Ce){var lt=Se[Xr];lt?(rn(lt,2,73,Ce),zi()):ji(Ce)}function mi(Ce){var lt=Se[Qs]();lt&&lt[Ef]([Ce],2)}function rs(Ce){rt.add(Ce)}})}return o.__ieDyn=1,o}();function jr(o,c){try{if(o&&o!==""){var m=Li().parse(o);if(m&&m[Iv]&&m[Iv]>=m.itemsAccepted&&m.itemsReceived-m.itemsAccepted===m.errors[ht])return m}}catch(w){rn(c,1,43,"Cannot parse the response. "+(w[$o]||Jt(w)),{response:o})}return null}var vu="",Wd="NoResponseBody",nv="&"+Wd+"=true",iv="POST",Kv=function(){function o(){var c=0,m,w,I,O,M,k,L,Y,z,te,Q,ae,ie,he;Ja(o,this,function(Te,je){var rt=!0;Wf(),Te[Zn]=function(Ve,Mt){I=Mt,w&&rn(I,1,28,"Sender is already initialized"),Te.SetConfig(Ve),w=!0},Te._getDbgPlgTargets=function(){return[w,O,k,m]},Te.SetConfig=function(Ve){try{if(M=Ve.senderOnCompleteCallBack||{},k=!!Ve.disableCredentials,L=Ve.fetchCredentials,O=!!Ve.isOneDs,m=!!Ve.enableSendPromise,z=!!Ve.disableXhr,te=!!Ve.disableBeacon,Q=!!Ve.disableBeaconSync,he=Ve.timeWrapper,ie=!!Ve.addNoResponse,ae=!!Ve.disableFetchKeepAlive,Y={sendPOST:ts},O||(rt=!1),k){var Mt=lu();Mt&&Mt.protocol&&Mt.protocol[ma]()==="file:"&&(rt=!1)}return!0}catch{}return!1},Te.getSyncFetchPayload=function(){return c},Te.getSenderInst=function(Ve,Mt){return Ve&&Ve[ht]?Ei(Ve,Mt):null},Te.getFallbackInst=function(){return Y},Te[wn]=function(Ve,Mt){Wf()};function it(Ve,Mt){wr(Mt,200,{},Ve)}function qt(Ve,Mt){rn(I,2,26,"Failed to send telemetry.",{message:Ve}),wr(Mt,400,{})}function Tr(Ve){qt("No endpoint url is provided for the batch",Ve)}function Ei(Ve,Mt){for(var Gn,Se=0,ur=null,Vn=0;ur==null&&Vn<Ve[ht];)Se=Ve[Vn],!z&&Se===1?xc()?ur=wa:Of()&&(ur=ts):Se===2&&Rv(Mt)&&(!Mt||!ae)?ur=zl:Se===3&&Fm()&&(Mt?!Q:!te)&&(ur=es),Vn++;return ur?(Gn={_transport:Se,_isSync:Mt},Gn[El]=ur,Gn):null}function wr(Ve,Mt,Gn,Se){try{Ve&&Ve(Mt,Gn,Se)}catch{}}function Vi(Ve,Mt){var Gn=Oa(),Se=Ve[Sl];if(!Se)return Tr(Mt),!0;Se=Ve[Sl]+(ie?nv:vu);var ur=Ve[_f],Vn=O?ur:new Blob([ur],{type:"text/plain;charset=UTF-8"}),zi=Gn.sendBeacon(Se,Vn);return zi}function es(Ve,Mt,Gn){var Se=Ve[_f];try{if(Se)if(Vi(Ve,Mt))it(vu,Mt);else{var ur=M&&M.beaconOnRetry;ur&&lr(ur)?ur(Ve,Mt,Vi):(Y&&Y[El](Ve,Mt,!0),rn(I,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Vn){O&&Ps(I,"Failed to send telemetry using sendBeacon API. Ex:"+Jt(Vn)),wr(Mt,O?0:400,{},vu)}}function ts(Ve,Mt,Gn){var Se,ur,Vn,zi=Ve[ws]||{};!Gn&&m&&(Se=ga(function(pi,na){ur=pi,Vn=na})),O&&Gn&&Ve.disableXhrSync&&(Gn=!1);var oo=Ve[Sl];if(!oo){Tr(Mt),ur&&ur(!1);return}var Fr=jp(iv,oo,rt,!0,Gn,Ve[yf]);O||Fr[_h]("Content-type","application/json"),vt(Ji(zi),function(pi){Fr[_h](pi,zi[pi])}),Fr.onreadystatechange=function(){O||(ra(Fr),Fr.readyState===4&&ur&&ur(!0))},Fr.onload=function(){O&&ra(Fr)};function ra(pi){var na=M&&M.xhrOnComplete,tp=na&&lr(na);if(tp)na(pi,Mt,Ve);else{var Sa=uu(pi);wr(Mt,pi[bs],Go(pi,O),Sa)}}return Fr.onerror=function(pi){wr(Mt,O?Fr[bs]:400,Go(Fr,O),O?vu:Ic(Fr)),Vn&&Vn(pi)},Fr.ontimeout=function(){wr(Mt,O?Fr[bs]:500,Go(Fr,O),O?vu:Ic(Fr)),ur&&ur(!1)},Fr.send(Ve[_f]),Se}function zl(Ve,Mt,Gn){var Se,ur=Ve[Sl],Vn=Ve[_f],zi=O?Vn:new Blob([Vn],{type:"application/json"}),oo,Fr,ra,pi=new Headers,na=Vn[ht],tp=!1,Sa=!1,sm=Ve[ws]||{},Kf=(Se={method:iv,body:zi},Se[_a]=!0,Se);Ve.headers&&Ji(Ve.headers)[ht]>0&&(vt(Ji(sm),function(mi){pi.append(mi,sm[mi])}),Kf[ws]=pi),L?Kf.credentials=L:rt&&O&&(Kf.credentials="include"),Gn&&(Kf.keepalive=!0,c+=na,O?Ve._sendReason===2&&(tp=!0,ie&&(ur+=nv)):tp=!0);var um=new Request(ur,Kf);try{um[_a]=!0}catch{}if(!Gn&&m&&(oo=ga(function(mi,rs){Fr=mi,ra=rs})),!ur){Tr(Mt),Fr&&Fr(!1);return}function lm(mi){wr(Mt,O?0:400,{},O?vu:mi)}function ov(mi,rs,Ce){var lt=mi[bs],Yt=M.fetchOnComplete;Yt&&lr(Yt)?Yt(mi,Mt,Ce||vu,rs):wr(Mt,lt,{},Ce||vu)}try{wf(fetch(O?ur:um,O?Kf:null),function(mi){if(Gn&&(c-=na,na=0),!Sa)if(Sa=!0,mi.rejected)lm(mi.reason&&mi.reason[ru]),ra&&ra(mi.reason);else{var rs=mi[hd];try{!O&&!rs.ok?(lm(rs.statusText),Fr&&Fr(!1)):O&&!rs.body?(ov(rs,null,vu),Fr&&Fr(!0)):wf(rs.text(),function(Ce){ov(rs,Ve,Ce[hd]),Fr&&Fr(!0)})}catch(Ce){lm(Jt(Ce)),ra&&ra(Ce)}}})}catch(mi){Sa||(lm(Jt(mi)),ra&&ra(mi))}return tp&&!Sa&&(Sa=!0,wr(Mt,200,{}),Fr&&Fr(!0)),O&&!Sa&&Ve[yf]>0&&he&&he.set(function(){Sa||(Sa=!0,wr(Mt,500,{}),Fr&&Fr(!0))},Ve[yf]),oo}function wa(Ve,Mt,Gn){var Se=fi(),ur=new XDomainRequest,Vn=Ve[_f];ur.onload=function(){var pi=uu(ur),na=M&&M.xdrOnComplete;na&&lr(na)?na(ur,Mt,Ve):wr(Mt,200,{},pi)},ur.onerror=function(){wr(Mt,400,{},O?vu:Nf(ur))},ur.ontimeout=function(){wr(Mt,500,{})},ur.onprogress=function(){};var zi=Se&&Se.location&&Se.location[_s]||"",oo=Ve[Sl];if(!oo){Tr(Mt);return}if(!O&&oo.lastIndexOf(zi,0)!==0){var Fr="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";rn(I,2,40,". "+Fr),qt(Fr,Mt);return}var ra=O?oo:oo[Bi](/^(https?:)/,"");ur.open(iv,ra),Ve[yf]&&(ur[yf]=Ve[yf]),ur.send(Vn),O&&Gn?he&&he.set(function(){ur.send(Vn)},0):ur.send(Vn)}function Wf(){c=0,w=!1,m=!1,I=null,O=null,M=null,k=null,L=null,Y=null,z=!1,te=!1,Q=!1,ae=!1,ie=!1,he=null}})}return o.__ieDyn=1,o}(),$f="on",rm="attachEvent",e_="addEventListener",nm="detachEvent",Hc="removeEventListener",Gc="events",Vc="visibilitychange",ql="pagehide",Hl="pageshow",Xu="unload",Bf="beforeunload",hu=cu("aiEvtPageHide"),qf=cu("aiEvtPageShow"),Kd=/\.[\.]+/g,mg=/[\.]+$/,Nh=1,Hf=Hu("events"),Gf=/^([^.]*)(?:\.(.+)|)/;function Jd(o){return o&&o[Bi]?o[Bi](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,yr):o}function im(o,c){var m;if(c){var w=yr;pr(c)?(w=yr,vt(c,function(O){O=Jd(O),O&&(O[0]!=="."&&(O="."+O),w+=O)})):w=Jd(c),w&&(w[0]!=="."&&(w="."+w),o=(o||yr)+w)}var I=Gf.exec(o||yr)||[];return m={},m[va]=I[1],m.ns=(I[2]||yr).replace(Kd,".").replace(mg,yr)[Fa](".").sort().join("."),m}function Ch(o,c,m){var w=[],I=Hf.get(o,Gc,{},!1),O=im(c,m);return Lr(I,function(M,k){vt(k,function(L){var Y;(!O[va]||O[va]===L.evtName[va])&&(!O.ns||O.ns===O.ns)&&w[zr]((Y={},Y[$o]=L.evtName[va]+(L.evtName.ns?"."+L.evtName.ns:yr),Y.handler=L[ys],Y))})}),w}function av(o,c,m){m===void 0&&(m=!0);var w=Hf.get(o,Gc,{},m),I=w[c];return I||(I=w[c]=[]),I}function Jv(o,c,m,w){o&&c&&c[va]&&(o[Hc]?o[Hc](c[va],m,w):o[nm]&&o[nm]($f+c[va],m))}function vg(o,c,m,w){var I=!1;return o&&c&&c[va]&&m&&(o[e_]?(o[e_](c[va],m,w),I=!0):o[rm]&&(o[rm]($f+c[va],m),I=!0)),I}function hg(o,c,m,w){for(var I=c[ht];I--;){var O=c[I];O&&(!m.ns||m.ns===O.evtName.ns)&&(!w||w(O))&&(Jv(o,O.evtName,O[ys],O.capture),c[Uo](I,1))}}function gg(o,c,m){if(c[va])hg(o,av(o,c[va]),c,m);else{var w=Hf.get(o,Gc,{});Lr(w,function(I,O){hg(o,O,c,m)}),Ji(w)[ht]===0&&Hf.kill(o,Gc)}}function Xn(o,c){var m;return c?(pr(c)?m=[o].concat(c):m=[o,c],m=im("xx",m).ns[Fa](".")):m=o,m}function Zd(o,c,m,w,I){var O;I===void 0&&(I=!1);var M=!1;if(o)try{var k=im(c,w);if(M=vg(o,k,m,I),M&&Hf.accept(o)){var L=(O={guid:Nh++,evtName:k},O[ys]=m,O.capture=I,O);av(o,k.type)[zr](L)}}catch{}return M}function ai(o,c,m,w,I){if(I===void 0&&(I=!1),o)try{var O=im(c,w),M=!1;gg(o,O,function(k){return O.ns&&!m||k[ys]===m?(M=!0,!0):!1}),M||Jv(o,O,m,I)}catch{}}function H_(o,c,m,w){return w===void 0&&(w=!1),Zd(o,c,m,null,w)}function am(o,c,m,w){w===void 0&&(w=!1),ai(o,c,m,null,w)}function Xd(o,c,m){var w=!1,I=fi();I&&(w=Zd(I,o,c,m),w=Zd(I.body,o,c,m)||w);var O=fa();return O&&(w=Zd(O,o,c,m)||w),w}function p(o,c,m){var w=fi();w&&(ai(w,o,c,m),ai(w.body,o,c,m));var I=fa();I&&ai(I,o,c,m)}function b(o,c,m,w){var I=!1;return c&&o&&o[ht]>0&&vt(o,function(O){O&&(!m||Oi(m,O)===-1)&&(I=Xd(O,c,w)||I)}),I}function N(o,c,m,w){var I=!1;return c&&o&&pr(o)&&(I=b(o,c,m,w),!I&&m&&m[ht]>0&&(I=b(o,c,null,w))),I}function R(o,c,m){o&&pr(o)&&vt(o,function(w){w&&p(w,c,m)})}function P(o,c,m){return N([Bf,Xu,ql],o,c,m)}function B(o,c){R([Bf,Xu,ql],o,c)}function H(o,c,m){function w(M){var k=fa();o&&k&&k.visibilityState==="hidden"&&o(M)}var I=Xn(hu,m),O=b([ql],o,c,I);return(!c||Oi(c,Vc)===-1)&&(O=b([Vc],w,c,I)||O),!O&&c&&(O=H(o,null,m)),O}function ne(o,c){var m=Xn(hu,c);R([ql],o,m),R([Vc],null,m)}function ue(o,c,m){function w(M){var k=fa();o&&k&&k.visibilityState==="visible"&&o(M)}var I=Xn(qf,m),O=b([Hl],o,c,I);return O=b([Vc],w,c,I)||O,!O&&c&&(O=ue(o,null,m)),O}function ce(o,c){var m=Xn(qf,c);R([Hl],o,m),R([Vc],null,m)}var ke=Za({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3}),Je="",Ze="https://browser.events.data.microsoft.com/OneCollector/1.0/",De="version",be="properties",qe="initialize",Ne="logger",tt="indexOf",Ae="timings",Re="pollInternalLogs",Ge="value",Wt="kind",Qt="length",vr="processTelemetryStart",Ar="handleField",fn="rmSanitizer",nn="rmFieldSanitizer",Qn="canHandle",Wr,Gi="4.3.5",at="1DS-Web-JS-"+Gi,yt=l.hasOwnProperty,Cr="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",br="withCredentials",Rt="timeout",Yr=(Wr={},Wr[0]=0,Wr[2]=6,Wr[1]=1,Wr[3]=7,Wr[4098]=6,Wr[4097]=1,Wr[4099]=7,Wr),Nt=null,Tn=nf(),bt=pp();function Fn(o){return!(o===Je||ot(o))}function Un(o){if(o){var c=mo(o,"-");if(c>-1)return Zr(o,c)}return Je}function ya(){return Nt===null&&(Nt=!ut(Uint8Array)&&!ba()&&!Cc()),Nt}function Qu(o){return!!(o&&Pr(o)&&o>=1&&o<=4)}function Us(o,c,m){if(!c&&!Fn(c)||typeof o!="string")return null;var w=typeof c;if(w==="string"||w==="number"||w==="boolean"||pr(c))c={value:c};else if(w==="object"&&!yt.call(c,"value"))c={value:m?JSON.stringify(c):c};else if(ot(c[Ge])||c[Ge]===Je||!Kt(c[Ge])&&!Pr(c[Ge])&&!qn(c[Ge])&&!pr(c[Ge]))return null;if(pr(c[Ge])&&!Vl(c[Ge]))return null;if(!ot(c[Wt])){if(pr(c[Ge])||!On(c[Wt]))return null;c[Ge]=c[Ge].toString()}return c}function om(o,c,m){var w=-1;if(!ut(o))if(c>0&&(c===32?w=8192:c<=13&&(w=c<<5)),oi(m))w===-1&&(w=0),w|=m;else{var I=Yr[js(o)]||-1;w!==-1&&I!==-1?w|=I:I===6&&(w=I)}return w}function gu(o,c,m){m===void 0&&(m=!0);var w;return o&&(w=o.get(c),m&&w&&decodeURIComponent&&(w=decodeURIComponent(w))),w||Je}function Qo(o){o===void 0&&(o="D");var c=S();return o==="B"?c="{"+c+"}":o==="P"?c="("+c+")":o==="N"&&(c=c.replace(/-/g,Je)),c}function Gl(o,c,m,w,I){var O={},M=!1,k=0,L=arguments[Qt],Y=arguments;for(qn(Y[0])&&(M=Y[0],k++);k<L;k++){var o=Y[k];Lr(o,function(te,Q){M&&Q&&Ci(Q)?pr(Q)?(O[te]=O[te]||[],vt(Q,function(ae,ie){ae&&Ci(ae)?O[te][ie]=Gl(!0,O[te][ie],ae):O[te][ie]=ae})):O[te]=Gl(!0,O[te],Q):O[te]=Q})}return O}var Si=ff;function On(o){return o===0||o>0&&o<=13||o===32}function oi(o){return o>=0&&o<=9}function ba(){var o=Oa();if(!ut(o)&&o.userAgent){var c=o.userAgent.toLowerCase();if((c[tt]("safari")>=0||c[tt]("firefox")>=0)&&c[tt]("chrome")<0)return!0}return!1}function Vl(o){return o[Qt]>0}function Qd(o,c){var m=o;m[Ae]=m[Ae]||{},m[Ae][vr]=m[Ae][vr]||{},m[Ae][vr][c]=Si()}function js(o){var c=0;if(o!=null){var m=typeof o;m==="string"?c=1:m==="number"?c=2:m==="boolean"?c=3:m===r&&(c=4,pr(o)?(c=4096,o[Qt]>0&&(c|=js(o[0]))):yt.call(o,"value")&&(c=8192|js(o[Ge])))}return c}function Vf(){return!!vn("chrome")}function zf(o,c,m,w,I,O){w===void 0&&(w=!1),I===void 0&&(I=!1);function M(L,Y,z){try{L[Y]=z}catch{}}var k=new XMLHttpRequest;return w&&M(k,Cr,w),m&&M(k,br,m),k.open(o,c,!I),m&&M(k,br,m),!I&&O&&M(k,Rt,O),k}function ep(o){return o>0}var xh=Ca({endpointUrl:Ze,propertyStorageOverride:{isVal:Zv}});function Zv(o){return o&&(!o.getProperty||!o.setProperty)&&ji("Invalid property storage override passed."),!0}var Xv=function(o){fl(c,o);function c(){var m=o.call(this)||this;return Ja(c,m,function(w,I){w[qe]=function(O,M,k,L){d(w,function(){return"AppInsightsCore.initialize"},function(){try{I[qe](Hi(O,xh,k||w[Ne],!1).cfg,M,k,L)}catch(te){var Y=w[Ne],z=Jt(te);z[tt]("channels")!==-1&&(z+=`
 - Channels must be provided through config.channels only!`),rn(Y,1,514,"SDK Initialization Failed - no telemetry will be sent: "+z)}},function(){return{config:O,extensions:M,logger:k,notificationManager:L}})},w.track=function(O){d(w,function(){return"AppInsightsCore.track"},function(){var M=O;if(M){M[Ae]=M[Ae]||{},M[Ae].trackStart=Si(),Qu(M.latency)||(M.latency=1);var k=M.ext=M.ext||{};k.sdk=k.sdk||{},k.sdk.ver=at;var L=M.baseData=M.baseData||{};L[be]=L[be]||{};var Y=L[be];Y[De]=Y[De]||w.pluginVersionString||Je}I.track(M)},function(){return{item:O}},!O.sync)},w[Re]=function(O){return I[Re](O||"InternalLog")}}),m}return c.__ieDyn=1,c}(Wv),Dh=Za({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),Qv=Za({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),eh=Za({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),th=Za({Normal:1,Critical:2}),_u=Za({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),rh=function(){function o(c){var m=this,w={},I=[],O=[];c&&O.push(c);function M(z,te){var Q,ae=w[z];if(ae&&(Q=ae[te]),!Q&&Q!==null){if(Kt(z)&&Kt(te))if(O[Qt]>0){for(var ie=0;ie<O[Qt];ie++)if(O[ie][Ar](z,te)){Q={canHandle:!0,fieldHandler:O[ie]};break}}else I[Qt]===0&&(Q={canHandle:!0});if(!Q&&Q!==null){Q=null;for(var ie=0;ie<I[Qt];ie++)if(I[ie][Ar](z,te)){Q={canHandle:!0,handler:I[ie],fieldHandler:null};break}}ae||(ae=w[z]={}),ae[te]=Q}return Q}m.clearCache=function(){w={}},m.addSanitizer=function(z){z&&(hp(I,z)||I.push(z),w={})},m.addFieldSanitizer=function(z){z&&(hp(O,z)||O.push(z),w={})},m[fn]=function(z){if(z){var te=Oi(I,z);te!==-1&&(I.splice(te,1),w={}),vt(I,function(Q){Q&&Q[fn]&&Q[fn](z)})}},m[nn]=function(z){if(z){var te=Oi(O,z);te!==-1&&(O.splice(te,1),w={}),vt(I,function(Q){Q&&Q[nn]&&Q[nn](z)})}},m.isEmpty=function(){return Ks(I)+Ks(O)===0},m[Ar]=function(z,te){var Q=M(z,te);return Q?Q[Qn]:!1},m[Ge]=function(z,te,Q,ae){var ie=M(z,te);if(ie&&ie[Qn]){if(!ie||!ie[Qn])return null;if(ie.handler)return ie.handler[Ge](z,te,Q,ae);if(!Kt(te)||ot(Q)||Q===Je)return null;var he=null,Te=js(Q);if((Te&8192)===8192){var je=Te&-8193;if(he=Q,!Fn(he[Ge])||je!==1&&je!==2&&je!==3&&(je&4096)!==4096)return null}else Te===1||Te===2||Te===3||(Te&4096)===4096?he=L(z,te,Q):Te===4&&(he=L(z,te,ae?JSON.stringify(Q):Q));if(he)return k(ie,z,te,Te,he,ae)}return null},m.property=function(z,te,Q,ae){var ie=M(z,te);if(!ie||!ie[Qn]||!Kt(te)||ot(Q)||!Fn(Q[Ge]))return null;var he=js(Q[Ge]);return he===0?null:k(ie,z,te,he,Q,ae)};function k(z,te,Q,ae,ie,he){if(z.handler)return z.handler.property(te,Q,ie,he);if(!ot(ie[Wt])){if((ae&4096)===4096||!On(ie[Wt]))return null;ie[Ge]=ie[Ge].toString()}return Y(z.fieldHandler,te,Q,ae,ie)}function L(z,te,Q){return Fn(Q)?{value:Q}:null}function Y(z,te,Q,ae,ie){if(ie&&z){var he=z.getSanitizer(te,Q,ae,ie[Wt],ie.propertyType);if(he)if(ae===4){var Te={},je=ie[Ge];Lr(je,function(it,qt){var Tr=te+"."+Q;if(Fn(qt)){var Ei=L(Tr,it,qt);Ei=Y(z,Tr,it,js(qt),Ei),Ei&&(Te[it]=Ei[Ge])}}),ie[Ge]=Te}else{var rt={path:te,name:Q,type:ae,prop:ie,sanitizer:m};ie=he.call(m,rt)}}return ie}}return o.getFieldType=js,o}();t.ActiveStatus=bn,t.AppInsightsCore=Xv,t.BaseTelemetryPlugin=lg,t.DiagnosticLogger=Yl,t.EventLatency=Qv,t.EventPersistence=th,t.EventPropertyType=eh,t.EventsDiscardedReason=Pu,t.FullVersionString=at,t.InternalAppInsightsCore=Wv,t.LoggingSeverity=ke,t.MinChannelPriorty=md,t.NotificationManager=Bc,t.PerfEvent=Ku,t.PerfManager=Zm,t.ProcessTelemetryContext=Ju,t.SenderPostManager=Kv,t.TraceLevel=_u,t.Undefined=n,t.ValueKind=Dh,t.ValueSanitizer=rh,t.Version=Gi,t._InternalLogMessage=Lc,t.__getRegisteredEvents=Ch,t._appendHeader=Ol,t._getAllResponseHeaders=Go,t._logInternalMessage=qm,t._testHookMaxUnloadHooksCb=Gv,t._throwInternal=rn,t._warnToConsole=Ps,t.addEventHandler=Xd,t.addEventListeners=N,t.addPageHideEventListener=H,t.addPageShowEventListener=ue,t.addPageUnloadEventListener=P,t.areCookiesSupported=Hn,t.arrForEach=vt,t.arrIndexOf=Oi,t.arrMap=Nu,t.arrReduce=Dn,t.attachEvent=H_,t.blockDynamicConversion=Vp,t.convertAllHeadersToMap=ju,t.cookieAvailable=Hn,t.createCookieMgr=Ls,t.createDynamicConfig=Hi,t.createEnumStyle=Za,t.createGuid=Qo,t.createProcessTelemetryContext=zt,t.createTraceParent=dr,t.createUniqueNamespace=cu,t.createUnloadHandlerContainer=Fs,t.dateNow=Cu,t.detachEvent=am,t.disallowsSameSiteNone=io,t.doPerf=d,t.dumpObj=Jt,t.eventOff=ai,t.eventOn=Zd,t.extend=Gl,t.findW3cTraceParent=Mn,t.forceDynamicConversion=Jo,t.formatErrorMessageXdr=Nf,t.formatErrorMessageXhr=Ic,t.formatTraceParent=Pt,t.generateW3CId=D,t.getCommonSchemaMetaData=om,t.getConsole=Rf,t.getCookieValue=gu,t.getCrypto=Yu,t.getDocument=fa,t.getDynamicConfigHandler=Gp,t.getExceptionName=Ts,t.getFieldValueType=js,t.getGlobal=ad,t.getGlobalInst=vn,t.getHistory=fo,t.getIEVersion=Dv,t.getISOString=Es,t.getJSON=Li,t.getLocation=lu,t.getMsCrypto=Rd,t.getNavigator=Oa,t.getPerformance=Wa,t.getResponseText=uu,t.getSetValue=If,t.getTenantId=Un,t.getTime=Si,t.getWindow=fi,t.hasDocument=nf,t.hasHistory=af,t.hasJSON=Ds,t.hasNavigator=Im,t.hasOwnProperty=Kr,t.hasWindow=pp,t.isArray=pr,t.isArrayValid=Vl,t.isBeaconsSupported=Fm,t.isBoolean=qn,t.isChromium=Vf,t.isDate=xi,t.isDocumentObjectAvailable=Tn,t.isError=Dt,t.isFetchSupported=Rv,t.isFunction=lr,t.isGreaterThanZero=ep,t.isIE=$u,t.isLatency=Qu,t.isNotTruthy=Qe,t.isNullOrUndefined=ot,t.isNumber=Pr,t.isObject=Ci,t.isReactNative=Cc,t.isSampledFlag=kr,t.isString=Kt,t.isTruthy=An,t.isTypeof=mn,t.isUint8ArrayAvailable=ya,t.isUndefined=ut,t.isValidSpanId=Bt,t.isValidTraceId=sr,t.isValidTraceParent=Or,t.isValueAssigned=Fn,t.isValueKind=On,t.isWindowObjectAvailable=bt,t.isXhrSupported=Of,t.mergeEvtNamespace=Xn,t.newGuid=S,t.newId=kv,t.normalizeJsName=su,t.objDefineAccessors=td,t.objForEachKey=Lr,t.objFreeze=Di,t.objKeys=Ji,t.objSeal=ss,t.onConfigChange=Md,t.openXhr=zf,t.optimizeObject=Nd,t.parseResponse=jr,t.parseTraceParent=dt,t.perfNow=ff,t.prependTransports=Cf,t.proxyAssign=Is,t.proxyFunctionAs=Eo,t.proxyFunctions=Tc,t.random32=Rc,t.randomValue=Ov,t.removeEventHandler=p,t.removeEventListeners=R,t.removePageHideEventListener=ne,t.removePageShowEventListener=ce,t.removePageUnloadEventListener=B,t.safeGetCookieMgr=Xo,t.safeGetLogger=jl,t.sanitizeProperty=Us,t.setEnableEnvMocks=ta,t.setProcessTelemetryTimings=Qd,t.setValue=ro,t.strContains=gt,t.strEndsWith=ld,t.strFunction=e,t.strObject=r,t.strPrototype=i,t.strStartsWith=Ev,t.strTrim=Xi,t.strUndefined=n,t.throwError=ji,t.toISOString=Es,t.useXDomainRequest=xc})});var iI=ln((U0,nI)=>{(function(t,e){typeof U0=="object"&&typeof nI<"u"?e(U0):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.oneDS=t.oneDS||{}))})(U0,function(t){"use strict";var e="REAL_TIME",r="NEAR_REAL_TIME",n="BEST_EFFORT",i="function",a="object",l="undefined",v="prototype",_=Object,y=_[v];function C(p,b){return p||b}function U(p,b){return p[b]}var W=void 0,K=null,q="",V="function",J="object",re="prototype",_e="__proto__",Le="undefined",ge="constructor",Ee="Symbol",Be="_polyfill",We="length",st="name",mt="call",At="toString",Ur=C(Object),on=U(Ur,re),kn=C(String),ct=U(kn,re),Dr=C(Math),Ke=C(Array),_n=U(Ke,re),Pe=U(_n,"slice");function $t(p,b){try{return{v:p.apply(this,b)}}catch(N){return{e:N}}}function Vt(p){return function(b){return typeof b===p}}function wt(p){return typeof p===Le||p===Le}function mn(p){return!ot(p)}function ut(p){return p===K||wt(p)}function ti(p){return p===K||!ot(p)}function ot(p){return!!p||p!==W}var Su=Vt("string"),Xt=Vt(V);function $a(p){return!p&&ut(p)?!1:!!p&&typeof p===J}var Kt=U(Ke,"isArray"),lr=Vt("number"),Ci=Vt("boolean");function pr(p){return!!(p&&p.then&&Xt(p.then))}var xi=U(Ur,"getOwnPropertyDescriptor");function Pr(p,b){return!!p&&on.hasOwnProperty[mt](p,b)}var qn=C(U(Ur,"hasOwn"),Dt);function Dt(p,b){return Pr(p,b)||!!xi(p,b)}function Mr(p,b,N){if(p&&$a(p)){for(var R in p)if(qn(p,R)&&b[mt](N||p,R,p[R])===-1)break}}var Qe={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function An(p){var b={};if(b[Qe.c]=!0,b[Qe.e]=!0,p.l){b.get=function(){return p.l.v};var N=xi(p.l,"v");N&&N.set&&(b.set=function(R){p.l.v=R})}return Mr(p,function(R,P){b[Qe[R]]=mn(P)?b[Qe[R]]:P}),b}var qr=U(Ur,"defineProperty");function Kr(p,b,N){return qr(p,b,An(N))}function Ia(p,b,N,R,P){var B={};return Mr(p,function(H,ne){Ui(B,H,b?ne:H,P),Ui(B,ne,N?ne:H,P)}),R?R(B):B}function Ui(p,b,N,R){qr(p,b,{value:N,enumerable:!0,writable:!!R})}var Lr=C(kn),nr="[object Error]";function _r(p,b){var N=q,R=on[At][mt](p);R===nr&&(p={stack:Lr(p.stack),message:Lr(p.message),name:Lr(p.name)});try{N=JSON.stringify(p,K,b?typeof b=="number"?b:4:W),N=(N?N.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):K)||Lr(p)}catch(P){N=" - "+_r(P,b)}return R+": "+N}function sn(p){throw new TypeError(p)}var td=U(Ur,"freeze");function ri(p){return p}function rd(p){return p[_e]||K}var Eu=U(Ur,"assign"),Cn=U(Ur,"keys");function as(p){return td&&Mr(p,function(b,N){(Kt(N)||$a(N))&&as(N)}),Jt(p)}var Jt=C(td,ri),ji=C(U(Ur,"getPrototypeOf"),rd);function Ba(p){return Ia(p,1,0,Jt)}function os(p){return Ia(p,0,0,Jt)}var Na=os({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),nd="__tsUtils$gblCfg",al;function Ji(){var p;return typeof globalThis!==Le&&(p=globalThis),!p&&typeof self!==Le&&(p=self),!p&&typeof window!==Le&&(p=window),!p&&typeof global!==Le&&(p=global),p}function Ca(){if(!al){var p=$t(Ji).v||{};al=p[nd]=p[nd]||{}}return al}var Di=ss;function ss(p,b,N){var R=b?b[p]:K;return function(P){var B=(P?P[p]:K)||R;if(B||N){var H=arguments;return(B||N).apply(P,B?Pe[mt](H,1):H)}sn('"'+Lr(p)+'" not defined for '+_r(P))}}var Gs=U(Dr,"max"),ui=Di("slice",ct),ol=Di("substring",ct),Vs=ss("substr",ct,xa);function xa(p,b,N){return ut(p)&&sn("Invalid "+_r(p)),N<0?q:(b=b||0,b<0&&(b=Gs(b+p[We],0)),wt(N)?ui(p,b):ui(p,b,b+N))}function ni(p,b){return ol(p,0,b)}var nc="_urid",zs;function li(){if(!zs){var p=Ca();zs=p.gblSym=p.gblSym||{k:{},s:{}}}return zs}var ua;function mr(p){var b={description:Lr(p),toString:function(){return Ee+"("+p+")"}};return b[Be]=!0,b}function xn(p){var b=li();if(!qn(b.k,p)){var N=mr(p),R=Cn(b.s).length;N[nc]=function(){return R+"_"+N[At]()},b.k[p]=N,b.s[N[nc]()]=Lr(p)}return b.k[p]}function Da(p){!ua&&(ua={});var b,N=Na[p];return N&&(b=ua[N]=ua[N]||mr(Ee+"."+N)),b}var Jr;function _i(){Jr=Ca()}function qa(p){return qr({toJSON:function(){return p}},"v",{value:p})}var Zr="window",la;function Tu(p,b){var N;return function(){return!Jr&&_i(),(!N||Jr.lzy)&&(N=qa($t(p,b).v)),N.v}}function ca(p){return!Jr&&_i(),(!la||p===!1||Jr.lzy)&&(la=qa($t(Ji).v||K)),la.v}function yn(p,b){var N;if(!la||b===!1?N=ca(b):N=la.v,N&&N[p])return N[p];if(p===Zr)try{return window}catch{}return K}var ci=Tu(yn,["document"]);function sl(){return!!Ra()}var Ra=Tu(yn,[Zr]);function Rr(){return!!Ri()}var Ri=Tu(yn,["navigator"]),id=Tu(function(){return!!$t(function(){return process&&(process.versions||{}).node}).v}),Yi,us;function ic(){return Yi=qa($t(yn,[Ee]).v),Yi}function ls(p){var b=(Jr.lzy?0:Yi)||ic();return b.v?b.v[p]:W}function ad(){return!!vn()}function vn(){return!Jr&&_i(),((Jr.lzy?0:Yi)||ic()).v}function nf(p,b){var N=Na[p];!Jr&&_i();var R=(Jr.lzy?0:Yi)||ic();return R.v?R.v[N||p]:b?W:Da(p)}function fa(p,b){!Jr&&_i();var N=(Jr.lzy?0:Yi)||ic();return N.v?N.v(p):b?K:mr(p)}function pp(p){return!Jr&&_i(),us=(Jr.lzy?0:us)||qa($t(ls,["for"]).v),(us.v||xn)(p)}function fi(p){return!!p&&Xt(p.next)}function Im(p){return!ti(p)&&Xt(p[nf(3)])}var Oa;function af(p,b,N){if(p&&(fi(p)||(!Oa&&(Oa=qa(nf(3))),p=p[Oa.v]?p[Oa.v]():K),fi(p))){var R=W,P=W;try{for(var B=0;!(P=p.next()).done&&b[mt](N||p,P.value,B,p)!==-1;)B++}catch(H){R={e:H},p.throw&&(P=K,p.throw(R))}finally{try{P&&!P.done&&p.return&&p.return(P)}finally{if(R)throw R.e}}}}function fo(p,b,N){return p.apply(b,N)}function od(p,b){return!wt(b)&&p&&(Kt(b)?fo(p.push,p,b):fi(b)||Im(b)?af(b,function(N){p.push(N)}):p.push(b)),p}function Er(p,b,N){if(p)for(var R=p[We]>>>0,P=0;P<R&&!(P in p&&b[mt](N||p,p[P],P,p)===-1);P++);}var cs=Di("indexOf",_n);function sd(p,b,N){return((p?p.slice:K)||Pe).apply(p,Pe[mt](arguments,1))}var Zi=C(U(Ur,"create"),ac);function ac(p){if(!p)return{};var b=typeof p;b!==J&&b!==V&&sn("Prototype must be an Object or function: "+_r(p));function N(){}return N[re]=p,new N}var Ft;function ka(p,b){var N=Ur.setPrototypeOf||function(R,P){var B;!Ft&&(Ft=qa((B={},B[_e]=[],B instanceof Array))),Ft.v?R[_e]=P:Mr(P,function(H,ne){return R[H]=ne})};return N(p,b)}function ul(p,b,N){$t(Kr,[b,st,{v:p,c:!0,e:!1}]),b=ka(b,N);function R(){this[ge]=b,$t(Kr,[this,st,{v:p,c:!0,e:!1}])}return b[re]=N===K?Zi(N):(R[re]=N[re],new R),b}function of(p,b){b&&(p[st]=b)}function wv(p,b,N){var R=N||Error,P=R[re][st],B=Error.captureStackTrace;return ul(p,function(){var H=this,ne=arguments;try{$t(of,[R,p]);var ue=fo(R,H,Pe[mt](ne))||H;if(ue!==H){var ce=ji(H);ce!==ji(ue)&&ka(ue,ce)}return B&&B(ue,H[ge]),b&&b(ue,ne),ue}finally{$t(of,[R,P])}},R)}function Ha(){return(Date.now||sf)()}function sf(){return new Date().getTime()}function mp(p){return function(N){return ut(N)&&sn("strTrim called ["+_r(N)+"]"),N&&N.replace&&(N=N.replace(p,q)),N}}var Iu=mp(/^\s+|(?=\s)\s+$/g),Ga=ss("trim",ct,Iu),vt,Oi,Nu;function Ws(p){if(!p||typeof p!==J)return!1;Nu||(Nu=sl()?Ra():!0);var b=!1;if(p!==Nu){Oi||(vt=Function[re][At],Oi=vt[mt](Ur));try{var N=ji(p);b=!N,b||(Pr(N,ge)&&(N=N[ge]),b=!!(N&&typeof N===V&&vt[mt](N)===Oi))}catch{}}return b}function vp(){return Ha()}var hp=Di("indexOf",ct),Dn=ss("startsWith",ct,Aa);function Aa(p,b,N){Su(p)||sn("'"+_r(p)+"' is not a string");var R=Su(b)?b:Lr(b),P=N>0?N:0;return ol(p,P,P+R[We])===R}var gp="ref",Va="unref",da="hasRef",gh="enabled";function Sv(p,b,N){var R=!0,P=p?b(K):K,B;function H(){return R=!1,P&&P[Va]&&P[Va](),B}function ne(){P&&N(P),P=K}function ue(){return P=b(P),R||H(),B}function ce(ke){!ke&&P&&ne(),ke&&!P&&ue()}return B={cancel:ne,refresh:ue},B[da]=function(){return P&&P[da]?P[da]():R},B[gp]=function(){return R=!0,P&&P[gp]&&P[gp](),B},B[Va]=H,B=qr(B,gh,{get:function(){return!!P},set:ce}),{h:B,dn:function(){P=K}}}function Nm(p,b,N){var R=Kt(b),P=R?b.length:0,B=(P>0?b[0]:R?W:b)||setTimeout,H=(P>1?b[1]:W)||clearTimeout,ne=N[0];N[0]=function(){ue.dn(),fo(ne,W,Pe[mt](arguments))};var ue=Sv(p,function(ce){if(ce){if(ce.refresh)return ce.refresh(),ce;fo(H,W,[ce])}return fo(B,W,N)},function(ce){fo(H,W,[ce])});return ue.h}function Cu(p,b){return Nm(!0,W,Pe[mt](arguments))}function Cm(p,b,N){return Nm(!0,p,Pe[mt](arguments,1))}(ca()||{}).Symbol,(ca()||{}).Reflect;var og="hasOwnProperty",_p=function(p,b){return _p=_.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,R){N.__proto__=R}||function(N,R){for(var P in R)R[og](P)&&(N[P]=R[P])},_p(p,b)};function Xi(p,b){typeof b!==i&&b!==null&&sn("Class extends value "+String(b)+" is not a constructor or null"),_p(p,b);function N(){this.constructor=p}p[v]=b===null?Zi(b):(N[v]=b[v],new N)}var uf,lf="constructor",po="prototype",Pa="function",xu="_dynInstFuncs",xm="_isDynProxy",za="_dynClass",yp="_dynCls$",Du="_dynInstChk",oc=Du,cf="_dfOpts",ud="_unknown_",bp="__proto__",Dm="_dyn"+bp,Rm="__dynProto$Gbl",Ru="_dynInstProto",wp="useBaseInst",Ks="setInstFuncs",ll=Object,Wa=ll.getPrototypeOf,ff=ll.getOwnPropertyNames,ld=ca(),sc=ld[Rm]||(ld[Rm]={o:(uf={},uf[Ks]=!0,uf[wp]=!0,uf),n:1e3});function mo(p){return p&&(p===ll[po]||p===Array[po])}function Ev(p){return mo(p)||p===Function[po]}function fs(p){var b;if(p){if(Wa)return Wa(p);var N=p[bp]||p[po]||(p[lf]?p[lf][po]:null);b=p[Dm]||N,Pr(p,Dm)||(delete p[Ru],b=p[Dm]=p[Ru]||p[Dm],p[Ru]=N)}return b}function ko(p,b){var N=[];if(ff)N=ff(p);else for(var R in p)typeof R=="string"&&Pr(p,R)&&N.push(R);if(N&&N.length>0)for(var P=0;P<N.length;P++)b(N[P])}function vo(p,b,N){return b!==lf&&typeof p[b]===Pa&&(N||Pr(p,b))&&b!==bp&&b!==po}function Ou(p){sn("DynamicProto: "+p)}function cd(p){var b=Zi(null);return ko(p,function(N){!b[N]&&vo(p,N,!1)&&(b[N]=p[N])}),b}function uc(p,b){for(var N=p.length-1;N>=0;N--)if(p[N]===b)return!0;return!1}function lc(p,b,N,R){function P(ue,ce,ke){var Je=ce[ke];if(Je[xm]&&R){var Ze=ue[xu]||{};Ze[oc]!==!1&&(Je=(Ze[ce[za]]||{})[ke]||Je)}return function(){return Je.apply(ue,arguments)}}var B=Zi(null);ko(N,function(ue){B[ue]=P(b,N,ue)});for(var H=fs(p),ne=[];H&&!Ev(H)&&!uc(ne,H);)ko(H,function(ue){!B[ue]&&vo(H,ue,!Wa)&&(B[ue]=P(b,H,ue))}),ne.push(H),H=fs(H);return B}function cl(p,b,N,R){var P=null;if(p&&Pr(N,za)){var B=p[xu]||Zi(null);if(P=(B[N[za]]||Zi(null))[b],P||Ou("Missing ["+b+"] "+Pa),!P[Du]&&B[oc]!==!1){for(var H=!Pr(p,b),ne=fs(p),ue=[];H&&ne&&!Ev(ne)&&!uc(ue,ne);){var ce=ne[b];if(ce){H=ce===R;break}ue.push(ne),ne=fs(ne)}try{H&&(p[b]=P),P[Du]=1}catch{B[oc]=!1}}}return P}function fd(p,b,N){var R=b[p];return R===N&&(R=fs(b)[p]),typeof R!==Pa&&Ou("["+p+"] is not a "+Pa),R}function df(p,b,N,R,P){function B(ue,ce){var ke=function(){var Je=cl(this,ce,ue,ke)||fd(ce,ue,ke);return Je.apply(this,arguments)};return ke[xm]=1,ke}if(!mo(p)){var H=N[xu]=N[xu]||Zi(null);if(!mo(H)){var ne=H[b]=H[b]||Zi(null);H[oc]!==!1&&(H[oc]=!!P),mo(ne)||ko(N,function(ue){vo(N,ue,!1)&&N[ue]!==R[ue]&&(ne[ue]=N[ue],delete N[ue],(!Pr(p,ue)||p[ue]&&!p[ue][xm])&&(p[ue]=B(p,ue)))})}}}function dd(p,b){if(Wa){for(var N=[],R=fs(b);R&&!Ev(R)&&!uc(N,R);){if(R===p)return!0;N.push(R),R=fs(R)}return!1}return!0}function fl(p,b){return Pr(p,po)?p.name||b||ud:((p||{})[lf]||{}).name||b||ud}function ho(p,b,N,R){Pr(p,po)||Ou("theClass is an invalid class definition.");var P=p[po];dd(P,b)||Ou("["+fl(p)+"] not in hierarchy of ["+fl(b)+"]");var B=null;Pr(P,za)?B=P[za]:(B=yp+fl(p,"_")+"$"+sc.n,sc.n++,P[za]=B);var H=ho[cf],ne=!!H[wp];ne&&R&&R[wp]!==void 0&&(ne=!!R[wp]);var ue=cd(b),ce=lc(P,b,ue,ne);N(b,ce);var ke=!!Wa&&!!H[Ks];ke&&R&&(ke=!!R[Ks]),df(P,B,b,ue,ke!==!1)}ho[cf]=sc.o;var cc=Ba,Ao=cc({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),Ma="toLowerCase",ds="blkVal",un="length",Js="rdOnly",go="notify",fc="warnToConsole",dc="throwInternal",ps="setDf",pf="watch",ms="logger",ku="apply",pa="push",Sp="splice",dl="hdlr",Qi="cancel",pd="initialize",Ep="identifier",mf="isInitialized",vf="value",Tp="getPlugin",Tv="name",pl="time",Po="processNext",_o="getProcessTelContext",Rn="unload",hf="loggingLevelConsole",ml="createNew",vl="teardown",Ip="messageId",Ka="message",Au="isAsync",Zs="diagLog",cr="_doTeardown",Mo="update",vs="getNext",Ja="setNextPlugin",md="protocol",Za="userAgent",Pu="split",bn="nodeType",ma="replace",Vr="logInternalMessage",ht="type",hl="handler",Lo="status",Xs="getResponseHeader",yo="getAllResponseHeaders",Mu="isChildEvt",Xa="data",Xr="getCtx",Fo="setCtx",zr="complete",Uo="urlString",vd="sendPOST",jo="headers",Zn="timeout",bo="setRequestHeader",hs;function $i(p,b){hs||(hs=wv("AggregationError",function(R,P){P[un]>1&&(R.errors=P[1])}));var N=p||"One or more errors occurred.";throw Er(b,function(R,P){N+=`
`.concat(P," > ").concat(_r(R))}),new hs(N,b||[])}var ea="Promise",pc="rejected";function gl(p,b){return hd(p,function(N){return b?b({status:"fulfilled",rejected:!1,value:N}):N},function(N){return b?b({status:pc,rejected:!0,reason:N}):N})}function hd(p,b,N,R){var P=p;try{if(pr(p))(b||N)&&(P=p.then(b,N));else try{b&&(P=b(p))}catch(B){if(N)P=N(B);else throw B}}finally{R&&Qs(P,R)}return P}function Qs(p,b){var N=p;return b&&(pr(p)?p.finally?N=p.finally(b):N=p.then(function(R){return b(),R},function(R){throw b(),R}):b()),N}var Yo=["pending","resolving","resolved",pc],$o="dispatchEvent",_l;function Bo(p){var b;return p&&p.createEvent&&(b=p.createEvent("Event")),!!b&&b.initEvent}function ii(p,b,N,R){var P=ci();!_l&&(_l=qa(!!$t(Bo,[P]).v));var B=_l.v?P.createEvent("Event"):R?new Event(b):{};if(N&&N(B),_l.v&&B.initEvent(b,!1,!0),B&&p[$o])p[$o](B);else{var H=p["on"+b];if(H)H(B);else{var ne=yn("console");ne&&(ne.error||ne.log)(b,_r(B))}}}var gd="unhandledRejection",yl=gd.toLowerCase(),eu=10,La;function gs(p){return Xt(p)?p.toString():_r(p)}function tu(p,b,N){var R=sd(arguments,3),P=0,B=!1,H,ne=[],ue=!1,ce=null,ke;function Je(Re,Ge){try{ue=!0,ce&&ce.cancel(),ce=null;var Wt=p(function(Qt,vr){ne.push(function(){try{var Ar=P===2?Re:Ge,fn=wt(Ar)?H:Xt(Ar)?Ar(H):Ar;pr(fn)?fn.then(Qt,vr):Ar?Qt(fn):P===3?vr(fn):Qt(fn)}catch(nn){vr(nn)}}),B&&qe()},R);return Wt}finally{}}function Ze(Re){return Je(void 0,Re)}function De(Re){var Ge=Re,Wt=Re;return Xt(Re)&&(Ge=function(Qt){return Re&&Re(),Qt},Wt=function(Qt){throw Re&&Re(),Qt}),Je(Ge,Wt)}function be(){return Yo[P]}function qe(){if(ne.length>0){var Re=ne.slice();ne=[],ue=!0,ce&&ce.cancel(),ce=null,b(Re)}}function Ne(Re,Ge){return function(Wt){if(P===Ge){if(Re===2&&pr(Wt)){P=1,Wt.then(Ne(2,1),Ne(3,1));return}P=Re,B=!0,H=Wt,qe(),!ue&&Re===3&&!ce&&(ce=Cu(tt,eu))}}}function tt(){if(!ue)if(ue=!0,id())process.emit(gd,H,ke);else{var Re=Ra()||ca();!La&&(La=qa($t(yn,[ea+"RejectionEvent"]).v)),ii(Re,yl,function(Ge){return Kr(Ge,"promise",{g:function(){return ke}}),Ge.reason=H,Ge},!!La.v)}}ke={then:Je,catch:Ze,finally:De},qr(ke,"state",{get:be}),ad()&&(ke[nf(11)]="IPromise");function Ae(){return"IPromise "+be()+(B?" - "+gs(H):"")}return ke.toString=Ae,function(){Xt(N)||sn(ea+": executor is not a function - "+gs(N));var Ge=Ne(3,0);try{N.call(ke,Ne(2,0),Ge)}catch(Wt){Ge(Wt)}}(),ke}function Qa(p){Er(p,function(b){try{b()}catch{}})}function mc(p){var b=lr(p)?p:0;return function(N){Cu(function(){Qa(N)},b)}}function Lu(p,b){return tu(Lu,mc(b),p,b)}var ki;function Fu(p,b){!ki&&(ki=qa($t(yn,[ea]).v||null));var N=ki.v;if(!N)return Lu(p);Xt(p)||sn(ea+": executor is not a function - "+_r(p));var R=0;function P(){return Yo[R]}var B=new N(function(H,ne){function ue(ke){R=2,H(ke)}function ce(ke){R=3,ne(ke)}p(ue,ce)});return qr(B,"state",{get:P}),B}var ru;function eo(p,b){return!ru&&(ru=qa(Fu)),ru.v.call(this,p,b)}var bl=void 0,wn="",yi="core",to="disabled",wl="extensionConfig",_s="processTelemetry",Np="priority",Fa="getPerfMgr",vc="Not dynamic - ",Bi=/-([a-z])/g,_d=/([^\w\d_$])/g,va=/^(\d+[\w\d_$])/;function ys(p){return!ut(p)}function bs(p){var b=p;return b&&Su(b)&&(b=b[ma](Bi,function(N,R){return R.toUpperCase()}),b=b[ma](_d,"_"),b=b[ma](va,function(N,R){return"_"+R})),b}function Cp(p,b){return p&&b?hp(p,b)!==-1:!1}function gf(p,b){var N=null,R=null;return Xt(p)?N=p:R=p,function(){var P=arguments;if(N&&(R=N()),R)return R[b][ku](R,P)}}function yd(p,b,N,R,P){p&&b&&N&&(P!==!1||wt(p[b]))&&(p[b]=gf(N,R))}function _f(p,b,N,R){return p&&b&&$a(p)&&Kt(N)&&Er(N,function(P){Su(P)&&yd(p,P,b,P,R)}),p}function qo(p){return p&&Eu&&(p=_(Eu({},p))),p}function ha(p){try{return p.responseText}catch{}return null}function hc(p,b){return p?"XDomainRequest,Response:"+ha(p)||"":b}function Iv(p,b){return p?"XMLHttpRequest,Status:"+p[Lo]+",Response:"+ha(p)||p.response||"":b}function Sl(p,b){return b&&(lr(b)?p=[b].concat(p):Kt(b)&&(p=b.concat(p))),p}var El="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",ws="withCredentials",yf="timeout";function _h(p,b,N,R,P,B){R===void 0&&(R=!1),P===void 0&&(P=!1);function H(ue,ce,ke){try{ue[ce]=ke}catch{}}var ne=new XMLHttpRequest;return R&&H(ne,El,R),N&&H(ne,ws,N),ne.open(p,b,!P),N&&H(ne,ws,N),!P&&B&&H(ne,yf,B),ne}function xp(p){var b={};if(Su(p)){var N=Ga(p)[Pu](/[\r\n]+/);Er(N,function(R){if(R){var P=R.indexOf(": ");if(P!==-1){var B=Ga(R.substring(0,P))[Ma](),H=Ga(R.substring(P+1));b[B]=H}else b[Ga(R)]=1}})}return b}function bf(p,b,N){if(!p[N]&&b&&b[Xs]){var R=b[Xs](N);R&&(p[N]=Ga(R))}return p}var Tl="kill-duration",Om="kill-duration-seconds",Nv="time-delta-millis";function Il(p,b){var N={};return p[yo]?N=xp(p[yo]()):b&&(N=bf(N,p,Nv),N=bf(N,p,Tl),N=bf(N,p,Om)),N}var Cv="location",wf="console",Dp="JSON",wo="crypto",km="msCrypto",yh="ReactNative",bd="msie",Am="trident/",Rp="XMLHttpRequest",gc=null,wd=null,Nl=!1,nu=null,_c=null;function xv(p,b){var N=!1;if(p){try{if(N=b in p,!N){var R=p[v];R&&(N=b in R)}}catch{}if(!N)try{var P=new p;N=!wt(P[b])}catch{}}return N}function Op(p){if(p&&Nl){var b=yn("__mockLocation");if(b)return b}return typeof location===a&&location?location:yn(Cv)}function yc(){return typeof console!==l?console:yn(wf)}function kp(){return!!(typeof JSON===a&&JSON||yn(Dp)!==null)}function iu(){return kp()?JSON||yn(Dp):null}function Qr(){return yn(wo)}function Cl(){return yn(km)}function Ai(){var p=Ri();return p&&p.product?p.product===yh:!1}function Ap(){var p=Ri();if(p&&(p[Za]!==wd||gc===null)){wd=p[Za];var b=(wd||wn)[Ma]();gc=Cp(b,bd)||Cp(b,Am)}return gc}function Sd(p){return(_c===null||p===!1)&&(_c=Rr()&&!!Ri().sendBeacon),_c}function bc(p){var b=!1;try{b=!!yn("fetch");var N=yn("Request");b&&p&&N&&(b=xv(N,"keepalive"))}catch{}return b}function xl(){return nu===null&&(nu=typeof XDomainRequest!==l,nu&&ga()&&(nu=nu&&!xv(yn(Rp),"withCredentials"))),nu}function ga(){var p=!1;try{var b=yn(Rp);p=!!b}catch{}return p}var Ed=4294967296,bi=4294967295,yr=123456789,au=987654321,Pn=!1,Ss=yr,Dl=au;function Rl(p){p<0&&(p>>>=0),Ss=yr+p&bi,Dl=au-p&bi,Pn=!0}function ou(){try{var p=Ha()&2147483647;Rl((Math.random()*Ed^p)+p)}catch{}}function So(p){var b=0,N=Qr()||Cl();return N&&N.getRandomValues&&(b=N.getRandomValues(new Uint32Array(1))[0]&bi),b===0&&Ap()&&(Pn||ou(),b=Sf()&bi),b===0&&(b=Math.floor(Ed*Math.random()|0)),p||(b>>>=0),b}function Sf(p){Dl=36969*(Dl&65535)+(Dl>>16)&bi,Ss=18e3*(Ss&65535)+(Ss>>16)&bi;var b=(Dl<<16)+(Ss&65535)>>>0&bi|0;return p||(b>>>=0),b}function Pm(p){p===void 0&&(p=22);for(var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=So()>>>0,R=0,P=wn;P[un]<p;)R++,P+=b.charAt(N&63),N>>>=6,R===5&&(N=(So()<<2&4294967295|N&3)>>>0,R=0);return P}var Ef="3.3.5",Mm="."+Pm(6),Tf=0;function wc(p){return p[bn]===1||p[bn]===9||!+p[bn]}function Pp(p,b){var N=b[p.id];if(!N){N={};try{wc(b)&&Kr(b,p.id,{e:!1,v:N})}catch{}}return N}function di(p,b){return b===void 0&&(b=!1),bs(p+Tf+++(b?"."+Ef:wn)+Mm)}function Sc(p){var b={id:di("_aiData-"+(p||wn)+"."+Ef),accept:function(N){return wc(N)},get:function(N,R,P,B){var H=N[b.id];return H?H[bs(R)]:(B&&(H=Pp(b,N),H[bs(R)]=P),P)},kill:function(N,R){if(N&&N[R])try{delete N[R]}catch{}}};return b}function Pi(p){return p&&$a(p)&&(p.isVal||p.fb||qn(p,"v")||qn(p,"mrg")||qn(p,"ref")||p.set)}function Uu(p,b,N){var R,P=N.dfVal||ot;if(b&&N.fb){var B=N.fb;Kt(B)||(B=[B]);for(var H=0;H<B[un];H++){var ne=B[H],ue=b[ne];if(P(ue)?R=ue:p&&(ue=p.cfg[ne],P(ue)&&(R=ue),p.set(p.cfg,Lr(ne),ue)),P(R))break}}return!P(R)&&P(N.v)&&(R=N.v),R}function Mp(p,b,N){var R=N;if(N&&Pi(N)&&(R=Uu(p,b,N)),R){Pi(R)&&(R=Mp(p,b,R));var P;Kt(R)?(P=[],P[un]=R[un]):Ws(R)&&(P={}),P&&(Mr(R,function(B,H){H&&Pi(H)&&(H=Mp(p,b,H)),P[B]=H}),R=P)}return R}function Td(p,b,N,R){var P,B,H,ne=R,ue,ce,ke,Je;Pi(ne)?(P=ne.isVal,B=ne.set,ke=ne[Js],Je=ne[ds],ue=ne.mrg,ce=ne.ref,!ce&&wt(ce)&&(ce=!!ue),H=Uu(p,b,ne)):H=R,Je&&p[ds](b,N);var Ze,De=!0,be=b[N];(be||!ut(be))&&(Ze=be,De=!1,P&&Ze!==H&&!P(Ze)&&(Ze=H,De=!0),B&&(Ze=B(Ze,H,b),De=Ze===H)),De?H?Ze=Mp(p,b,H):Ze=H:(Ws(Ze)||Kt(H))&&ue&&H&&(Ws(H)||Kt(H))&&Mr(H,function(qe,Ne){Td(p,Ze,qe,Ne)}),p.set(b,N,Ze),ce&&p.ref(b,N),ke&&p[Js](b,N)}var Mi=pp("[[ai_dynCfg_1]]"),Id=pp("[[ai_blkDynCfg_1]]"),Lp=pp("[[ai_frcDynCfg_1]]");function su(p){if(p){var b;if(Kt(p)?(b=[],b[un]=p[un]):Ws(p)&&(b={}),b)return Mr(p,function(N,R){b[N]=su(R)}),b}return p}function gt(p){if(p){var b=p[Mi]||p;if(b.cfg&&(b.cfg===p||b.cfg[Mi]===b))return b}return null}function Es(p){if(p&&(Ws(p)||Kt(p)))try{p[Id]=!0}catch{}return p}function Ts(p,b,N){var R=!1;return N&&!p[b.blkVal]&&(R=N[Lp],!R&&!N[Id]&&(R=Ws(N)||Kt(N))),R}function ro(p){sn("InvalidAccess:"+p)}var If=["push","pop","shift","unshift","splice"],Ec=function(p,b,N,R){p&&p[dc](3,108,"".concat(N," [").concat(b,"] failed - ")+_r(R))};function Is(p,b,N){Kt(b)&&Er(If,function(R){var P=b[R];b[R]=function(){for(var B=[],H=0;H<arguments.length;H++)B[H]=arguments[H];var ne=P[ku](this,B);return Nf(p,b,N,"Patching"),ne}})}function Eo(p,b){var N=xi(p,b);return N&&N.get}function Tc(p,b,N,R){var P={n:N,h:[],trk:function(ce){ce&&ce.fn&&(cs(P.h,ce)===-1&&P.h[pa](ce),p.trk(ce,P))},clr:function(ce){var ke=cs(P.h,ce);ke!==-1&&P.h[Sp](ke,1)}},B=!0,H=!1;function ne(){B&&(H=H||Ts(ne,p,R),R&&!R[Mi]&&H&&(R=Nf(p,R,N,"Converting")),B=!1);var ce=p.act;return ce&&P.trk(ce),R}ne[p.prop]={chng:function(){p.add(P)}};function ue(ce){if(R!==ce){ne[p.ro]&&!p.upd&&ro("["+N+"] is read-only:"+_r(b)),B&&(H=H||Ts(ne,p,R),B=!1);var ke=H&&ne[p.rf];if(H)if(ke){Mr(R,function(Ze){R[Ze]=ce?ce[Ze]:bl});try{Mr(ce,function(Ze,De){Nd(p,R,Ze,De)}),ce=R}catch(Ze){Ec((p.hdlr||{})[ms],N,"Assigning",Ze),H=!1}}else R&&R[Mi]&&Mr(R,function(Ze){var De=Eo(R,Ze);if(De){var be=De[p.prop];be&&be.chng()}});if(ce!==R){var Je=ce&&Ts(ne,p,ce);!ke&&Je&&(ce=Nf(p,ce,N,"Converting")),R=ce,H=Je}p.add(P)}}Kr(b,P.n,{g:ne,s:ue})}function Nd(p,b,N,R){if(b){var P=Eo(b,N),B=P&&!!P[p.prop];B?b[N]=R:Tc(p,b,N,R)}return b}function uu(p,b,N,R){if(b){var P=Eo(b,N),B=P&&!!P[p.prop],H=R&&R[0],ne=R&&R[1],ue=R&&R[2];if(!B){if(ue)try{Es(b)}catch(ce){Ec((p.hdlr||{})[ms],N,"Blocking",ce)}try{Nd(p,b,N,b[N]),P=Eo(b,N)}catch(ce){Ec((p.hdlr||{})[ms],N,"State",ce)}}H&&(P[p.rf]=H),ne&&(P[p.ro]=ne),ue&&(P[p.blkVal]=!0)}return b}function Nf(p,b,N,R){try{Mr(b,function(P,B){Nd(p,b,P,B)}),b[Mi]||(qr(b,Mi,{get:function(){return p[dl]}}),Is(p,b,N))}catch(P){Ec((p.hdlr||{})[ms],N,R,P)}return b}var Ic="[[ai_",Cf="]]";function Fp(p){var b,N=fa(Ic+"get"+p.uid+Cf),R=fa(Ic+"ro"+p.uid+Cf),P=fa(Ic+"rf"+p.uid+Cf),B=fa(Ic+"blkVal"+p.uid+Cf),H=fa(Ic+"dtl"+p.uid+Cf),ne=null,ue=null,ce;function ke(be,qe){var Ne=ce.act;try{ce.act=be,be&&be[H]&&(Er(be[H],function(Ae){Ae.clr(be)}),be[H]=[]),qe({cfg:p.cfg,set:p.set.bind(p),setDf:p[ps].bind(p),ref:p.ref.bind(p),rdOnly:p[Js].bind(p)})}catch(Ae){var tt=p[ms];throw tt&&tt[dc](1,107,_r(Ae)),Ae}finally{ce.act=Ne||null}}function Je(){if(ne){var be=ne;ne=null,ue&&ue[Qi](),ue=null;var qe=[];if(Er(be,function(Ne){if(Ne&&(Ne[H]&&(Er(Ne[H],function(tt){tt.clr(Ne)}),Ne[H]=null),Ne.fn))try{ke(Ne,Ne.fn)}catch(tt){qe[pa](tt)}}),ne)try{Je()}catch(Ne){qe[pa](Ne)}qe[un]>0&&$i("Watcher error(s): ",qe)}}function Ze(be){if(be&&be.h[un]>0){ne||(ne=[]),ue||(ue=Cu(function(){ue=null,Je()},0));for(var qe=0;qe<be.h[un];qe++){var Ne=be.h[qe];Ne&&cs(ne,Ne)===-1&&ne[pa](Ne)}}}function De(be,qe){if(be){var Ne=be[H]=be[H]||[];cs(Ne,qe)===-1&&Ne[pa](qe)}}return ce=(b={prop:N,ro:R,rf:P},b[ds]=B,b[dl]=p,b.add=Ze,b[go]=Je,b.use=ke,b.trk=De,b),ce}function Up(p,b){var N={fn:b,rm:function(){N.fn=null,p=null,b=null}};return Kr(N,"toJSON",{v:function(){return"WatcherHandler"+(N.fn?"":"[X]")}}),p.use(N,b),N}function Lm(p,b,N){var R,P=gt(b);if(P)return P;var B=di("dyncfg",!0),H=b&&N!==!1?b:su(b),ne;function ue(){ne[go]()}function ce(tt,Ae,Re){try{tt=Nd(ne,tt,Ae,Re)}catch(Ge){Ec(p,Ae,"Setting value",Ge)}return tt[Ae]}function ke(tt){return Up(ne,tt)}function Je(tt,Ae){ne.use(null,function(Re){var Ge=ne.upd;try{wt(Ae)||(ne.upd=Ae),tt(Re)}finally{ne.upd=Ge}})}function Ze(tt,Ae){var Re;return uu(ne,tt,Ae,(Re={},Re[0]=!0,Re))[Ae]}function De(tt,Ae){var Re;return uu(ne,tt,Ae,(Re={},Re[1]=!0,Re))[Ae]}function be(tt,Ae){var Re;return uu(ne,tt,Ae,(Re={},Re[2]=!0,Re))[Ae]}function qe(tt,Ae){return Ae&&Mr(Ae,function(Re,Ge){Td(Ne,tt,Re,Ge)}),tt}var Ne=(R={uid:null,cfg:H},R[ms]=p,R[go]=ue,R.set=ce,R[ps]=qe,R[pf]=ke,R.ref=Ze,R[Js]=De,R[ds]=be,R._block=Je,R);return Kr(Ne,"uid",{c:!1,e:!1,w:!1,v:B}),ne=Fp(Ne),Nf(ne,H,"config","Creating"),Ne}function jp(p,b){p?(p[fc](b),p[dc](2,108,b)):ro(b)}function ju(p,b,N,R){var P=Lm(N,p||{},R);return b&&P[ps](P.cfg,b),P}function Ol(p,b,N){var R=p[Mi]||p;return R.cfg&&(R.cfg===p||R.cfg[Mi]===R)?R[pf](b):(jp(N,vc+_r(p)),ju(p,null,N)[pf](b))}var xf="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Ho=null;function Ns(){var p=yn("Microsoft");return p&&(Ho=p.ApplicationInsights),Ho}function Go(p){var b=Ho;return!b&&p.disableDbgExt!==!0&&(b=Ho||Ns()),b?b.ChromeDbgExt:null}var Vo,kl="warnToConsole",Yp="AI (Internal): ",Al="AI: ",$p="AITR_",Bp={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Cd=(Vo={},Vo[0]=null,Vo[1]="errorToConsole",Vo[2]=kl,Vo[3]="debugToConsole",Vo);function Cs(p){return p?'"'+p[ma](/\"/g,wn)+'"':wn}function zo(p,b){var N=yc();if(N){var R="log";N[p]&&(R=p),Xt(N[R])&&N[R](b)}}var Wo=function(){function p(b,N,R,P){R===void 0&&(R=!1);var B=this;B[Ip]=b,B[Ka]=(R?Al:Yp)+b;var H=wn;kp()&&(H=iu().stringify(P));var ne=(N?" message:"+Cs(N):wn)+(P?" props:"+Cs(H):wn);B[Ka]+=ne}return p.dataType="MessageData",p}();function xd(p,b){return(p||{})[ms]||new Df(b)}var Df=function(){function p(b){this.identifier="DiagnosticLogger",this.queue=[];var N=0,R={},P,B,H,ne,ue;ho(p,this,function(ce){ue=Je(b||{}),ce.consoleLoggingLevel=function(){return P},ce[dc]=function(be,qe,Ne,tt,Ae){Ae===void 0&&(Ae=!1);var Re=new Wo(qe,Ne,Ae,tt);if(ne)throw _r(Re);var Ge=Cd[be]||kl;if(wt(Re[Ka]))De("throw"+(be===1?"Critical":"Warning"),Re);else{if(Ae){var Wt=+Re[Ip];!R[Wt]&&P>=be&&(ce[Ge](Re[Ka]),R[Wt]=!0)}else P>=be&&ce[Ge](Re[Ka]);ke(be,Re)}},ce.debugToConsole=function(be){zo("debug",be),De("warning",be)},ce[fc]=function(be){zo("warn",be),De("warning",be)},ce.errorToConsole=function(be){zo("error",be),De("error",be)},ce.resetInternalMessageCount=function(){N=0,R={}},ce[Vr]=ke,ce[Rn]=function(be){ue&&ue.rm(),ue=null};function ke(be,qe){if(!Ze()){var Ne=!0,tt=$p+qe[Ip];if(R[tt]?Ne=!1:R[tt]=!0,Ne&&(be<=B&&(ce.queue[pa](qe),N++,De(be===1?"error":"warn",qe)),N===H)){var Ae="Internal events throttle limit per PageView reached for this app.",Re=new Wo(23,Ae,!1);ce.queue[pa](Re),be===1?ce.errorToConsole(Ae):ce[fc](Ae)}}}function Je(be){return Ol(ju(be,Bp,ce).cfg,function(qe){var Ne=qe.cfg;P=Ne[hf],B=Ne.loggingLevelTelemetry,H=Ne.maxMessageLimit,ne=Ne.enableDebug})}function Ze(){return N>=H}function De(be,qe){var Ne=Go(b||{});Ne&&Ne[Zs]&&Ne[Zs](be,qe)}})}return p.__ieDyn=1,p}();function Nc(p){return p||new Df}function qi(p,b,N,R,P,B){B===void 0&&(B=!1),Nc(p)[dc](b,N,R,P,B)}function xs(p,b){Nc(p)[fc](b)}var Dd="ctx",ta="ParentContextKey",lu="ChildrenContextKey",Rf=function(){function p(b,N,R){var P=this;if(P.start=Ha(),P[Tv]=b,P[Au]=R,P[Mu]=function(){return!1},Xt(N)){var B;Kr(P,"payload",{g:function(){return!B&&Xt(N)&&(B=N(),N=null),B}})}P[Xr]=function(H){return H?H===p[ta]||H===p[lu]?P[H]:(P[Dd]||{})[H]:null},P[Fo]=function(H,ne){if(H)if(H===p[ta])P[H]||(P[Mu]=function(){return!0}),P[H]=ne;else if(H===p[lu])P[H]=ne;else{var ue=P[Dd]=P[Dd]||{};ue[H]=ne}},P[zr]=function(){var H=0,ne=P[Xr](p[lu]);if(Kt(ne))for(var ue=0;ue<ne[un];ue++){var ce=ne[ue];ce&&(H+=ce[pl])}P[pl]=Ha()-P.start,P.exTime=P[pl]-H,P[zr]=function(){}}}return p.ParentContextKey="parent",p.ChildrenContextKey="childEvts",p}(),Ds="CoreUtils.doPerf";function Li(p,b,N,R,P){if(p){var B=p;if(B[Fa]&&(B=B[Fa]()),B){var H=void 0,ne=B[Xr](Ds);try{if(H=B.create(b(),R,P),H){if(ne&&H[Fo]&&(H[Fo](Rf[ta],ne),ne[Xr]&&ne[Fo])){var ue=ne[Xr](Rf[lu]);ue||(ue=[],ne[Fo](Rf[lu],ue)),ue[pa](H)}return B[Fo](Ds,H),N(H)}}catch(ce){H&&H[Fo]&&H[Fo]("exception",ce)}finally{H&&B.fire(H),B[Fo](Ds,ne)}}}return N()}var Yu=Sc("plugin");function Rd(p){return Yu.get(p,"state",{},!0)}var Cc="TelemetryPluginChain",$u="_hasRun",Dv="_getTelCtx",Fm=0;function Rv(p,b,N){for(;p;){if(p[Tp]()===N)return p;p=p[vs]()}return Od([N],b.config||{},b)}function xc(p,b,N,R){var P=null,B=[];b||(b=ju({},null,N[ms])),R!==null&&(P=R?Rv(p,N,R):p);var H={_next:ue,ctx:{core:function(){return N},diagLog:function(){return xd(N,b.cfg)},getCfg:function(){return b.cfg},getExtCfg:ke,getConfig:Je,hasNext:function(){return!!P},getNext:function(){return P},setNext:function(De){P=De},iterate:Ze,onComplete:ne}};function ne(De,be){for(var qe=[],Ne=2;Ne<arguments.length;Ne++)qe[Ne-2]=arguments[Ne];De&&B[pa]({func:De,self:wt(be)?H.ctx:be,args:qe})}function ue(){var De=P;if(P=De?De[vs]():null,!De){var be=B;be&&be[un]>0&&(Er(be,function(qe){try{qe.func.call(qe.self,qe.args)}catch(Ne){qi(N[ms],2,73,"Unexpected Exception during onComplete - "+_r(Ne))}}),B=[])}return De}function ce(De,be){var qe=null,Ne=b.cfg;if(Ne&&De){var tt=Ne[wl];!tt&&be&&(tt={}),Ne[wl]=tt,tt=b.ref(Ne,wl),tt&&(qe=tt[De],!qe&&be&&(qe={}),tt[De]=qe,qe=b.ref(tt,De))}return qe}function ke(De,be){var qe=ce(De,!0);return be&&Mr(be,function(Ne,tt){if(ut(qe[Ne])){var Ae=b.cfg[Ne];(Ae||!ut(Ae))&&(qe[Ne]=Ae)}Td(b,qe,Ne,tt)}),b[ps](qe,be)}function Je(De,be,qe){qe===void 0&&(qe=!1);var Ne,tt=ce(De,!1),Ae=b.cfg;return tt&&(tt[be]||!ut(tt[be]))?Ne=tt[be]:(Ae[be]||!ut(Ae[be]))&&(Ne=Ae[be]),Ne||!ut(Ne)?Ne:qe}function Ze(De){for(var be;be=H._next();){var qe=be[Tp]();qe&&De(qe)}}return H}function Of(p,b,N,R){var P=ju(b),B=xc(p,P,N,R),H=B.ctx;function ne(ce){var ke=B._next();return ke&&ke[_s](ce,H),!ke}function ue(ce,ke){return ce===void 0&&(ce=null),Kt(ce)&&(ce=Od(ce,P.cfg,N,ke)),Of(ce||H[vs](),P.cfg,N,ke)}return H[Po]=ne,H[ml]=ue,H}function Um(p,b,N){var R=ju(b.config),P=xc(p,R,b,N),B=P.ctx;function H(ue){var ce=P._next();return ce&&ce[Rn](B,ue),!ce}function ne(ue,ce){return ue===void 0&&(ue=null),Kt(ue)&&(ue=Od(ue,R.cfg,b,ce)),Um(ue||B[vs](),b,ce)}return B[Po]=H,B[ml]=ne,B}function bh(p,b,N){var R=ju(b.config),P=xc(p,R,b,N),B=P.ctx;function H(ue){return B.iterate(function(ce){Xt(ce[Mo])&&ce[Mo](B,ue)})}function ne(ue,ce){return ue===void 0&&(ue=null),Kt(ue)&&(ue=Od(ue,R.cfg,b,ce)),bh(ue||B[vs](),b,ce)}return B[Po]=H,B[ml]=ne,B}function Od(p,b,N,R){var P=null,B=!R;if(Kt(p)&&p[un]>0){var H=null;Er(p,function(ne){if(!B&&R===ne&&(B=!0),B&&ne&&Xt(ne[_s])){var ue=qp(ne,b,N);P||(P=ue),H&&H._setNext(ue),H=ue}})}return R&&!P?Od([R],b,N):P}function qp(p,b,N){var R=null,P=Xt(p[_s]),B=Xt(p[Ja]),H;p?H=p[Ep]+"-"+p[Np]+"-"+Fm++:H="Unknown-0-"+Fm++;var ne={getPlugin:function(){return p},getNext:function(){return R},processTelemetry:ke,unload:Je,update:Ze,_id:H,_setNext:function(De){R=De}};function ue(){var De;return p&&Xt(p[Dv])&&(De=p[Dv]()),De||(De=Of(ne,b,N)),De}function ce(De,be,qe,Ne,tt){var Ae=!1,Re=p?p[Ep]:Cc,Ge=De[$u];return Ge||(Ge=De[$u]={}),De.setNext(R),p&&Li(De[yi](),function(){return Re+":"+qe},function(){Ge[H]=!0;try{var Wt=R?R._id:wn;Wt&&(Ge[Wt]=!1),Ae=be(De)}catch(vr){var Qt=R?Ge[R._id]:!0;Qt&&(Ae=!0),(!R||!Qt)&&qi(De[Zs](),1,73,"Plugin ["+Re+"] failed during "+qe+" - "+_r(vr)+", run flags: "+_r(Ge))}},Ne,tt),Ae}function ke(De,be){be=be||ue();function qe(Ne){if(!p||!P)return!1;var tt=Rd(p);return tt[vl]||tt[to]?!1:(B&&p[Ja](R),p[_s](De,Ne),!0)}ce(be,qe,"processTelemetry",function(){return{item:De}},!De.sync)||be[Po](De)}function Je(De,be){function qe(){var Ne=!1;if(p){var tt=Rd(p),Ae=p[yi]||tt[yi];p&&(!Ae||Ae===De.core())&&!tt[vl]&&(tt[yi]=null,tt[vl]=!0,tt[mf]=!1,p[vl]&&p[vl](De,be)===!0&&(Ne=!0))}return Ne}ce(De,qe,"unload",function(){},be[Au])||De[Po](be)}function Ze(De,be){function qe(){var Ne=!1;if(p){var tt=Rd(p),Ae=p[yi]||tt[yi];p&&(!Ae||Ae===De.core())&&!tt[vl]&&p[Mo]&&p[Mo](De,be)===!0&&(Ne=!0)}return Ne}ce(De,qe,"update",function(){},!1)||De[Po](be)}return Jt(ne)}function Dc(){var p=[];function b(R){R&&p[pa](R)}function N(R,P){Er(p,function(B){try{B(R,P)}catch(H){qi(R[Zs](),2,73,"Unexpected error calling unload handler - "+_r(H))}}),p=[]}return{add:b,run:N}}function Bu(){var p=[];function b(R){var P=p;p=[],Er(P,function(B){try{(B.rm||B.remove).call(B)}catch(H){qi(R,2,73,"Unloading:"+_r(H))}})}function N(R){R&&od(p,R)}return{run:b,add:N}}var Hp,Rs="getPlugin",kd=(Hp={},Hp[wl]={isVal:ys,v:{}},Hp),kf=function(){function p(){var b=this,N,R,P,B,H;ce(),ho(p,b,function(ke){ke[pd]=function(Je,Ze,De,be){ue(Je,Ze,be),N=!0},ke[vl]=function(Je,Ze){var De,be=ke[yi];if(!be||Je&&be!==Je[yi]())return;var qe,Ne=!1,tt=Je||Um(null,be,P&&P[Rs]?P[Rs]():P),Ae=Ze||(De={reason:0},De[Au]=!1,De);function Re(){Ne||(Ne=!0,B.run(tt,Ze),H.run(tt[Zs]()),qe===!0&&tt[Po](Ae),ce())}return!ke[cr]||ke[cr](tt,Ae,Re)!==!0?Re():qe=!0,qe},ke[Mo]=function(Je,Ze){var De=ke[yi];if(!De||Je&&De!==Je[yi]())return;var be,qe=!1,Ne=Je||bh(null,De,P&&P[Rs]?P[Rs]():P),tt=Ze||{reason:0};function Ae(){qe||(qe=!0,ue(Ne.getCfg(),Ne.core(),Ne[vs]()))}return!ke._doUpdate||ke._doUpdate(Ne,tt,Ae)!==!0?Ae():be=!0,be},yd(ke,"_addUnloadCb",function(){return B},"add"),yd(ke,"_addHook",function(){return H},"add"),Kr(ke,"_unloadHooks",{g:function(){return H}})}),b[Zs]=function(ke){return ne(ke)[Zs]()},b[mf]=function(){return N},b.setInitialized=function(ke){N=ke},b[Ja]=function(ke){P=ke},b[Po]=function(ke,Je){Je?Je[Po](ke):P&&Xt(P[_s])&&P[_s](ke,null)},b._getTelCtx=ne;function ne(ke){ke===void 0&&(ke=null);var Je=ke;if(!Je){var Ze=R||Of(null,{},b[yi]);P&&P[Rs]?Je=Ze[ml](null,P[Rs]):Je=Ze[ml](null,P)}return Je}function ue(ke,Je,Ze){ju(ke,kd,xd(Je)),!Ze&&Je&&(Ze=Je[_o]()[vs]());var De=P;P&&P[Rs]&&(De=P[Rs]()),b[yi]=Je,R=Of(Ze,ke,Je,De)}function ce(){N=!1,b[yi]=null,R=null,P=null,H=Bu(),B=Dc()}}return p.__ieDyn=1,p}(),Os="",Pl="NoResponseBody",Ov="&"+Pl+"=true",Rc="POST",wh=function(){function p(){var b=0,N,R,P,B,H,ne,ue,ce,ke,Je,Ze,De,be,qe;ho(p,this,function(Ne,tt){var Ae=!0;Gi(),Ne[pd]=function(at,yt){P=yt,R&&qi(P,1,28,"Sender is already initialized"),Ne.SetConfig(at),R=!0},Ne._getDbgPlgTargets=function(){return[R,B,ne,N]},Ne.SetConfig=function(at){try{if(H=at.senderOnCompleteCallBack||{},ne=!!at.disableCredentials,ue=at.fetchCredentials,B=!!at.isOneDs,N=!!at.enableSendPromise,ke=!!at.disableXhr,Je=!!at.disableBeacon,Ze=!!at.disableBeaconSync,qe=at.timeWrapper,be=!!at.addNoResponse,De=!!at.disableFetchKeepAlive,ce={sendPOST:nn},B||(Ae=!1),ne){var yt=Op();yt&&yt.protocol&&yt.protocol[Ma]()==="file:"&&(Ae=!1)}return!0}catch{}return!1},Ne.getSyncFetchPayload=function(){return b},Ne.getSenderInst=function(at,yt){return at&&at[un]?Qt(at,yt):null},Ne.getFallbackInst=function(){return ce},Ne[cr]=function(at,yt){Gi()};function Re(at,yt){vr(yt,200,{},at)}function Ge(at,yt){qi(P,2,26,"Failed to send telemetry.",{message:at}),vr(yt,400,{})}function Wt(at){Ge("No endpoint url is provided for the batch",at)}function Qt(at,yt){for(var Cr,br=0,Rt=null,Yr=0;Rt==null&&Yr<at[un];)br=at[Yr],!ke&&br===1?xl()?Rt=Wr:ga()&&(Rt=nn):br===2&&bc(yt)&&(!yt||!De)?Rt=Qn:br===3&&Sd()&&(yt?!Ze:!Je)&&(Rt=fn),Yr++;return Rt?(Cr={_transport:br,_isSync:yt},Cr[vd]=Rt,Cr):null}function vr(at,yt,Cr,br){try{at&&at(yt,Cr,br)}catch{}}function Ar(at,yt){var Cr=Ri(),br=at[Uo];if(!br)return Wt(yt),!0;br=at[Uo]+(be?Ov:Os);var Rt=at[Xa],Yr=B?Rt:new Blob([Rt],{type:"text/plain;charset=UTF-8"}),Nt=Cr.sendBeacon(br,Yr);return Nt}function fn(at,yt,Cr){var br=at[Xa];try{if(br)if(Ar(at,yt))Re(Os,yt);else{var Rt=H&&H.beaconOnRetry;Rt&&Xt(Rt)?Rt(at,yt,Ar):(ce&&ce[vd](at,yt,!0),qi(P,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Yr){B&&xs(P,"Failed to send telemetry using sendBeacon API. Ex:"+_r(Yr)),vr(yt,B?0:400,{},Os)}}function nn(at,yt,Cr){var br,Rt,Yr,Nt=at[jo]||{};!Cr&&N&&(br=eo(function(Un,ya){Rt=Un,Yr=ya})),B&&Cr&&at.disableXhrSync&&(Cr=!1);var Tn=at[Uo];if(!Tn){Wt(yt),Rt&&Rt(!1);return}var bt=_h(Rc,Tn,Ae,!0,Cr,at[Zn]);B||bt[bo]("Content-type","application/json"),Er(Cn(Nt),function(Un){bt[bo](Un,Nt[Un])}),bt.onreadystatechange=function(){B||(Fn(bt),bt.readyState===4&&Rt&&Rt(!0))},bt.onload=function(){B&&Fn(bt)};function Fn(Un){var ya=H&&H.xhrOnComplete,Qu=ya&&Xt(ya);if(Qu)ya(Un,yt,at);else{var Us=ha(Un);vr(yt,Un[Lo],Il(Un,B),Us)}}return bt.onerror=function(Un){vr(yt,B?bt[Lo]:400,Il(bt,B),B?Os:Iv(bt)),Yr&&Yr(Un)},bt.ontimeout=function(){vr(yt,B?bt[Lo]:500,Il(bt,B),B?Os:Iv(bt)),Rt&&Rt(!1)},bt.send(at[Xa]),br}function Qn(at,yt,Cr){var br,Rt=at[Uo],Yr=at[Xa],Nt=B?Yr:new Blob([Yr],{type:"application/json"}),Tn,bt,Fn,Un=new Headers,ya=Yr[un],Qu=!1,Us=!1,om=at[jo]||{},gu=(br={method:Rc,body:Nt},br[xf]=!0,br);at.headers&&Cn(at.headers)[un]>0&&(Er(Cn(om),function(On){Un.append(On,om[On])}),gu[jo]=Un),ue?gu.credentials=ue:Ae&&B&&(gu.credentials="include"),Cr&&(gu.keepalive=!0,b+=ya,B?at._sendReason===2&&(Qu=!0,be&&(Rt+=Ov)):Qu=!0);var Qo=new Request(Rt,gu);try{Qo[xf]=!0}catch{}if(!Cr&&N&&(Tn=eo(function(On,oi){bt=On,Fn=oi})),!Rt){Wt(yt),bt&&bt(!1);return}function Gl(On){vr(yt,B?0:400,{},B?Os:On)}function Si(On,oi,ba){var Vl=On[Lo],Qd=H.fetchOnComplete;Qd&&Xt(Qd)?Qd(On,yt,ba||Os,oi):vr(yt,Vl,{},ba||Os)}try{gl(fetch(B?Rt:Qo,B?gu:null),function(On){if(Cr&&(b-=ya,ya=0),!Us)if(Us=!0,On.rejected)Gl(On.reason&&On.reason[Ka]),Fn&&Fn(On.reason);else{var oi=On[vf];try{!B&&!oi.ok?(Gl(oi.statusText),bt&&bt(!1)):B&&!oi.body?(Si(oi,null,Os),bt&&bt(!0)):gl(oi.text(),function(ba){Si(oi,at,ba[vf]),bt&&bt(!0)})}catch(ba){Gl(_r(ba)),Fn&&Fn(ba)}}})}catch(On){Us||(Gl(_r(On)),Fn&&Fn(On))}return Qu&&!Us&&(Us=!0,vr(yt,200,{}),bt&&bt(!0)),B&&!Us&&at[Zn]>0&&qe&&qe.set(function(){Us||(Us=!0,vr(yt,500,{}),bt&&bt(!0))},at[Zn]),Tn}function Wr(at,yt,Cr){var br=Ra(),Rt=new XDomainRequest,Yr=at[Xa];Rt.onload=function(){var Un=ha(Rt),ya=H&&H.xdrOnComplete;ya&&Xt(ya)?ya(Rt,yt,at):vr(yt,200,{},Un)},Rt.onerror=function(){vr(yt,400,{},B?Os:hc(Rt))},Rt.ontimeout=function(){vr(yt,500,{})},Rt.onprogress=function(){};var Nt=br&&br.location&&br.location[md]||"",Tn=at[Uo];if(!Tn){Wt(yt);return}if(!B&&Tn.lastIndexOf(Nt,0)!==0){var bt="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";qi(P,2,40,". "+bt),Ge(bt,yt);return}var Fn=B?Tn:Tn[ma](/^(https?:)/,"");Rt.open(Rc,Fn),at[Zn]&&(Rt[Zn]=at[Zn]),Rt.send(Yr),B&&Cr?qe&&qe.set(function(){Rt.send(Yr)},0):Rt.send(Yr)}function Gi(){b=0,R=!1,N=!1,P=null,B=null,H=null,ne=null,ue=null,ce=null,ke=!1,Je=!1,Ze=!1,De=!1,be=!1,qe=null}})}return p.__ieDyn=1,p}(),kv="on",Af="attachEvent",jm="addEventListener",Av="detachEvent",qu="removeEventListener",To="events",cu="visibilitychange",Hu="pagehide",Oc="pageshow",kc="unload",Ad="beforeunload",Pf=di("aiEvtPageHide"),Ko=di("aiEvtPageShow"),Ml=/\.[\.]+/g,Pv=/[\.]+$/,Mv=1,Gp=Sc("events"),Vp=/^([^.]*)(?:\.(.+)|)/;function Jo(p){return p&&p[ma]?p[ma](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,wn):p}function Gu(p,b){var N;if(b){var R=wn;Kt(b)?(R=wn,Er(b,function(B){B=Jo(B),B&&(B[0]!=="."&&(B="."+B),R+=B)})):R=Jo(b),R&&(R[0]!=="."&&(R="."+R),p=(p||wn)+R)}var P=Vp.exec(p||wn)||[];return N={},N[ht]=P[1],N.ns=(P[2]||wn).replace(Ml,".").replace(Pv,wn)[Pu](".").sort().join("."),N}function Ac(p,b,N){N===void 0&&(N=!0);var R=Gp.get(p,To,{},N),P=R[b];return P||(P=R[b]=[]),P}function Lv(p,b,N,R){p&&b&&b[ht]&&(p[qu]?p[qu](b[ht],N,R):p[Av]&&p[Av](kv+b[ht],N))}function zp(p,b,N,R){var P=!1;return p&&b&&b[ht]&&N&&(p[jm]?(p[jm](b[ht],N,R),P=!0):p[Af]&&(p[Af](kv+b[ht],N),P=!0)),P}function Fv(p,b,N,R){for(var P=b[un];P--;){var B=b[P];B&&(!N.ns||N.ns===B.evtName.ns)&&(!R||R(B))&&(Lv(p,B.evtName,B[hl],B.capture),b[Sp](P,1))}}function Ym(p,b,N){if(b[ht])Fv(p,Ac(p,b[ht]),b,N);else{var R=Gp.get(p,To,{});Mr(R,function(P,B){Fv(p,B,b,N)}),Cn(R)[un]===0&&Gp.kill(p,To)}}function Wp(p,b){var N;return b?(Kt(b)?N=[p].concat(b):N=[p,b],N=Gu("xx",N).ns[Pu](".")):N=p,N}function Ll(p,b,N,R,P){var B;P===void 0&&(P=!1);var H=!1;if(p)try{var ne=Gu(b,R);if(H=zp(p,ne,N,P),H&&Gp.accept(p)){var ue=(B={guid:Mv++,evtName:ne},B[hl]=N,B.capture=P,B);Ac(p,ne.type)[pa](ue)}}catch{}return H}function Io(p,b,N,R,P){if(P===void 0&&(P=!1),p)try{var B=Gu(b,R),H=!1;Ym(p,B,function(ne){return B.ns&&!N||ne[hl]===N?(H=!0,!0):!1}),H||Lv(p,B,N,P)}catch{}}function Pd(p,b,N){var R=!1,P=Ra();P&&(R=Ll(P,p,b,N),R=Ll(P.body,p,b,N)||R);var B=ci();return B&&(R=Ll(B,p,b,N)||R),R}function Pc(p,b,N){var R=Ra();R&&(Io(R,p,b,N),Io(R.body,p,b,N));var P=ci();P&&Io(P,p,b,N)}function Zo(p,b,N,R){var P=!1;return b&&p&&p[un]>0&&Er(p,function(B){B&&(!N||cs(N,B)===-1)&&(P=Pd(B,b,R)||P)}),P}function sg(p,b,N,R){var P=!1;return b&&p&&Kt(p)&&(P=Zo(p,b,N,R),!P&&N&&N[un]>0&&(P=Zo(p,b,null,R))),P}function Kp(p,b,N){p&&Kt(p)&&Er(p,function(R){R&&Pc(R,b,N)})}function Sh(p,b,N){return sg([Ad,kc,Hu],p,b,N)}function ug(p,b){Kp([Ad,kc,Hu],p,b)}function Hi(p,b,N){function R(H){var ne=ci();p&&ne&&ne.visibilityState==="hidden"&&p(H)}var P=Wp(Pf,N),B=Zo([Hu],p,b,P);return(!b||cs(b,cu)===-1)&&(B=Zo([cu],R,b,P)||B),!B&&b&&(B=Hi(p,null,N)),B}function Md(p,b){var N=Wp(Pf,b);Kp([Hu],p,N),Kp([cu],null,N)}function Ld(p,b,N){function R(H){var ne=ci();p&&ne&&ne.visibilityState==="visible"&&p(H)}var P=Wp(Ko,N),B=Zo([Oc],p,b,P);return B=Zo([cu],R,b,P)||B,!B&&b&&(B=Ld(p,null,N)),B}function Uv(p,b){var N=Wp(Ko,b);Kp([Oc],p,N),Kp([cu],null,N)}var Mc="",_a="timings",No="value",Fd="kind",Vu="length",Fl="processTelemetryStart",ks,$m="4.3.5",jv="1DS-Web-JS-"+$m,_t=y.hasOwnProperty,zu=(ks={},ks[0]=0,ks[2]=6,ks[1]=1,ks[3]=7,ks[4098]=6,ks[4097]=1,ks[4099]=7,ks);function fu(p){return!(p===Mc||ut(p))}function Mf(p){if(p){var b=hp(p,"-");if(b>-1)return ni(p,b)}return Mc}function Yv(p,b,N){if(!b&&!fu(b)||typeof p!="string")return null;var R=typeof b;if(R==="string"||R==="number"||R==="boolean"||Kt(b))b={value:b};else if(R==="object"&&!_t.call(b,"value"))b={value:N?JSON.stringify(b):b};else if(ut(b[No])||b[No]===Mc||!Su(b[No])&&!lr(b[No])&&!Ci(b[No])&&!Kt(b[No]))return null;if(Kt(b[No])&&!Lc(b[No]))return null;if(!ut(b[Fd])){if(Kt(b[No])||!$v(b[Fd]))return null;b[No]=b[No].toString()}return b}function Ul(p,b,N){var R=-1;if(!wt(p))if(b>0&&(b===32?R=8192:b<=13&&(R=b<<5)),Jp(N))R===-1&&(R=0),R|=N;else{var P=zu[Yl(p)]||-1;R!==-1&&P!==-1?R|=P:P===6&&(R=P)}return R}function Ud(p,b,N,R,P){var B={},H=!1,ne=0,ue=arguments[Vu],ce=arguments;for(Ci(ce[0])&&(H=ce[0],ne++);ne<ue;ne++){var p=ce[ne];Mr(p,function(Je,Ze){H&&Ze&&$a(Ze)?Kt(Ze)?(B[Je]=B[Je]||[],Er(Ze,function(De,be){De&&$a(De)?B[Je][be]=Ud(!0,B[Je][be],De):B[Je][be]=De})):B[Je]=Ud(!0,B[Je],Ze):B[Je]=Ze})}return B}var As=vp;function $v(p){return p===0||p>0&&p<=13||p===32}function Jp(p){return p>=0&&p<=9}function Lc(p){return p[Vu]>0}function jl(p,b){var N=p;N[_a]=N[_a]||{},N[_a][Fl]=N[_a][Fl]||{},N[_a][Fl][b]=As()}function Yl(p){var b=0;if(p!=null){var N=typeof p;N==="string"?b=1:N==="number"?b=2:N==="boolean"?b=3:N===a&&(b=4,Kt(p)?(b=4096,p[Vu]>0&&(b|=Yl(p[0]))):_t.call(p,"value")&&(b=8192|Yl(p[No])))}return b}function Bm(){return!!yn("chrome")}function rn(p){return p>0}var Ps="",qm="drop",Hm="send",du="requeue",Zp="rspFail",Gm="oth",Vm="no-cache, no-store",jd="application/x-json-stream",Yd="cache-control",Fc="content-type",$l="kill-tokens",Xp="kill-duration",Uc="time-delta-millis",zm="client-version",Co="client-id",Wm="time-delta-to-apply-millis",$d="upload-time",Bv="apikey",Ms="AuthMsaDeviceTicket",Eh="WebAuthToken",Wu="AuthXToken",Km="NoResponseBody",jc="msfpc",qv="trace",Xo="user",Ls="allowRequestSending",Hn="firstRequestSent",Lf="shouldAddClockSkewHeaders",Yc="getClockSkewHeaderValue",Bd="setClockSkew",fr="length",no="concat",io="iKey",Fi="count",$c="events",Sn="push",Bc="split",pu="splice",Qp="toLowerCase",mu="hdrs",Jm="useHdrs",Ku="initialize",Zm="setTimeoutOverride",Xm="clearTimeoutOverride",d="payloadPreprocessor",g="overrideEndpointUrl",S="avoidOptions",D="disableEventTimings",j="stringifyObjects",Z="enableCompoundKey",X="disableXhrSync",oe="disableFetchKeepAlive",ve="addNoResponse",ye="excludeCsMetaData",et="useSendBeacon",Ut="fetchCredentials",or="alwaysUseXhrOverride",dr="unloadTransports",dt="serializeOfflineEvt",sr="getOfflineRequestDetails",Bt="createPayload",Or="createOneDSPayload",kr="payloadBlob",Pt="headers",Mn="_thePayload",Ff="urlString",Ln="batches",ao="sendType",qd="addHeader",Qm="canSendRequest",Hd="sendQueuedRequests",Gd="isCompletelyIdle",em="setUnloading",Hv="isTenantKilled",Fe="resume",xt="sendSynchronousBatch",zt="_transport",en="getWParam",hn="isBeacon",En="timings",wi="isTeardown",Ju="isSync",Fs="data",Zu="timeout",qc="_sendReason",Gv="setKillSwitchTenants",tm="_backOffTransmission",Uf="identifier",Bl="disableOptimizeObj",$_="ignoreMc1Ms0CookieProcessing",lg="eventsLimitInMem",Zg="autoFlushEventsLimit",Th="disableAutoBatchFlushLimit",B_="overrideInstrumentationKey",jf="disableTelemetry",ev="baseData",Vv="sendAttempt",Yf="latency",tv="sync";function cg(p){var b=(p.ext||{}).intweb;return b&&fu(b[jc])?b[jc]:null}function Xg(p){for(var b=null,N=0;b===null&&N<p[fr];N++)b=cg(p[N]);return b}var Vd=function(){function p(b,N){var R=N?[][no](N):[],P=this,B=Xg(R);P[io]=function(){return b},P.Msfpc=function(){return B||Ps},P[Fi]=function(){return R[fr]},P[$c]=function(){return R},P.addEvent=function(H){return H?(R[Sn](H),B||(B=cg(H)),!0):!1},P[Bc]=function(H,ne){var ue;if(H<R[fr]){var ce=R[fr]-H;ut(ne)||(ce=ne<ce?ne:ce),ue=R[pu](H,ce),B=Xg(R)}return new p(b,ue)}}return p.create=function(b,N){return new p(b,N)},p}(),Qg=function(){function p(){var b=!0,N=!0,R=!0,P="use-collector-delta",B=!1;ho(p,this,function(H){H[Ls]=function(){return b},H[Hn]=function(){R&&(R=!1,B||(b=!1))},H[Lf]=function(){return N},H[Yc]=function(){return P},H[Bd]=function(ne){B||(ne?(P=ne,N=!0,B=!0):N=!1,b=!0)}})}return p.__ieDyn=1,p}(),q_=1e3,fg=function(){function p(){var b={};function N(R){var P=[];return R&&Er(R,function(B){P[Sn](Ga(B))}),P}ho(p,this,function(R){R[Gv]=function(P,B){if(P&&B)try{var H=N(P[Bc](","));if(B==="this-request-only")return H;for(var ne=parseInt(B,10)*q_,ue=0;ue<H[fr];++ue)b[H[ue]]=Ha()+ne}catch{return[]}return[]},R[Hv]=function(P){var B=b,H=Ga(P);return B[H]!==void 0&&B[H]>Ha()?!0:(delete B[H],!1)}})}return p.__ieDyn=1,p}(),zv=.8,dg=1.2,Ih=3e3,rv=6e5;function zd(p){return!(p>=300&&p<500&&p!=429||p==501||p==505)}function pg(p){var b=0,N=Ih*zv,R=Ih*dg,P=Math.floor(Math.random()*(R-N))+N;return b=Math.pow(2,p)*P,Math.min(b,rv)}var Wv=20,jr=3984588,vu=65e3,Wd=2e6,nv=Math.min(Wd,vu),iv="metadata",Kv="f",$f=/\./,rm=function(){function p(b,N,R,P,B,H){var ne="data",ue="baseData",ce="ext",ke=!!P,Je=!0,Ze=N,De={},be=!!H,qe=B||Ul;ho(p,this,function(Ne){Ne.createPayload=function(Re,Ge,Wt,Qt,vr,Ar){return{apiKeys:[],payloadBlob:Ps,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:Re,isTeardown:Ge,isSync:Wt,isBeacon:Qt,sendType:Ar,sendReason:vr}},Ne.appendPayload=function(Re,Ge,Wt){var Qt=Re&&Ge&&!Re.overflow;return Qt&&Li(b,function(){return"Serializer:appendPayload"},function(){for(var vr=Ge.events(),Ar=Re.payloadBlob,fn=Re.numEvents,nn=!1,Qn=[],Wr=[],Gi=Re.isBeacon,at=Gi?vu:jr,yt=Gi?nv:Wd,Cr=0,br=0;Cr<vr.length;){var Rt=vr[Cr];if(Rt){if(fn>=Wt){Re.overflow=Ge.split(Cr);break}var Yr=Ne.getEventBlob(Rt);if(Yr&&Yr.length<=yt){var Nt=Yr.length,Tn=Ar.length;if(Tn+Nt>at){Re.overflow=Ge.split(Cr);break}Ar&&(Ar+=`
`),Ar+=Yr,br++,br>Wv&&(Vs(Ar,0,1),br=0),nn=!0,fn++}else Yr?Qn.push(Rt):Wr.push(Rt),vr.splice(Cr,1),Cr--}Cr++}if(Qn.length>0&&Re.sizeExceed.push(Vd.create(Ge.iKey(),Qn)),Wr.length>0&&Re.failedEvts.push(Vd.create(Ge.iKey(),Wr)),nn){Re.batches.push(Ge),Re.payloadBlob=Ar,Re.numEvents=fn;var bt=Ge.iKey();cs(Re.apiKeys,bt)===-1&&Re.apiKeys.push(bt)}},function(){return{payload:Re,theBatch:{iKey:Ge.iKey(),evts:Ge.events()},max:Wt}}),Qt},Ne.getEventBlob=function(Re){try{return Li(b,function(){return"Serializer.getEventBlob"},function(){var Ge={};Ge.name=Re.name,Ge.time=Re.time,Ge.ver=Re.ver,Ge.iKey="o:"+Mf(Re.iKey);var Wt={},Qt;be||(Qt=function(nn,Qn,Wr){e_(qe,Wt,nn,Qn,Wr)});var vr=Re[ce];vr&&(Ge[ce]=Wt,Mr(vr,function(nn,Qn){var Wr=Wt[nn]={};Ae(Qn,Wr,"ext."+nn,!0,null,null,!0)}));var Ar=Ge[ne]={};Ar.baseType=Re.baseType;var fn=Ar[ue]={};return Ae(Re.baseData,fn,ue,!1,[ue],Qt,Je),Ae(Re.data,Ar,ne,!1,[],Qt,Je),JSON.stringify(Ge)},function(){return{item:Re}})}catch{return null}};function tt(Re,Ge){var Wt=De[Re];return Wt===void 0&&(Re.length>=7&&(Wt=Dn(Re,"ext.metadata")||Dn(Re,"ext.web")),De[Re]=Wt),Wt}function Ae(Re,Ge,Wt,Qt,vr,Ar,fn){Mr(Re,function(nn,Qn){var Wr=null;if(Qn||fu(Qn)){var Gi=Wt,at=nn,yt=vr,Cr=Ge;if(ke&&!Qt&&$f.test(nn)){var br=nn.split("."),Rt=br.length;if(Rt>1){yt&&(yt=yt.slice());for(var Yr=0;Yr<Rt-1;Yr++){var Nt=br[Yr];Cr=Cr[Nt]=Cr[Nt]||{},Gi+="."+Nt,yt&&yt.push(Nt)}at=br[Rt-1]}}var Tn=Qt&&tt(Gi);if(!Tn&&Ze&&Ze.handleField(Gi,at)?Wr=Ze.value(Gi,at,Qn,R):Wr=Yv(at,Qn,R),Wr){var bt=Wr.value;if(Cr[at]=bt,Ar&&Ar(yt,at,Wr),fn&&typeof bt=="object"&&!Kt(bt)){var Fn=yt;Fn&&(Fn=Fn.slice(),Fn.push(at)),Ae(Qn,bt,Gi+"."+at,Qt,Fn,Ar,fn)}}}})}})}return p.__ieDyn=1,p}();function e_(p,b,N,R,P){if(P&&b){var B=p(P.value,P.kind,P.propertyType);if(B>-1){var H=b[iv];H||(H=b[iv]={f:{}});var ne=H[Kv];if(ne||(ne=H[Kv]={}),N)for(var ue=0;ue<N.length;ue++){var ce=N[ue];ne[ce]||(ne[ce]={f:{}});var ke=ne[ce][Kv];ke||(ke=ne[ce][Kv]={}),ne=ke}ne=ne[R]={},Kt(P.value)?ne.a={t:B}:ne.t=B}}}function nm(p,b){return{set:function(N,R){for(var P=[],B=2;B<arguments.length;B++)P[B-2]=arguments[B];return Cm([p,b],N,R,P)}}}var Hc,Gc="sendAttempt",Vc="&"+Km+"=true",ql="?cors=true&"+Fc[Qp]()+"="+jd,Hl=(Hc={},Hc[1]=du,Hc[100]=du,Hc[200]="sent",Hc[8004]=qm,Hc[8003]=qm,Hc),Xu={},Bf={};function hu(p,b,N){Xu[p]=b,N!==!1&&(Bf[b]=p)}hu(Ms,Ms,!1),hu(zm,zm),hu(Co,"Client-Id"),hu(Bv,Bv),hu(Wm,Wm),hu($d,$d),hu(Wu,Wu);function qf(p,b){var N=!1;if(p&&b){var R=Cn(p);if(R&&R[fr]>0)for(var P=b[Qp](),B=0;B<R[fr];B++){var H=R[B];if(H&&Pr(b,H)&&H[Qp]()===P){N=!0;break}}}return N}function Kd(p,b,N,R){b&&N&&N[fr]>0&&(R&&Xu[b]?(p[mu][Xu[b]]=N,p[Jm]=!0):p.url+="&"+b+"="+N)}function mg(p,b,N){for(var R=0;R<p[fr];R++)if(p[R].name===b){p[R].value=N;return}p[Sn]({name:b,value:N})}function Nh(p,b){for(var N=0;N<p[fr];N++)if(p[N].name===b){p[pu](N,1);return}}var Hf=function(){function p(b,N,R,P){var B,H,ne,ue,ce=!1,ke,Je,Ze,De,be,qe,Ne,tt,Ae,Re,Ge,Wt,Qt,vr,Ar,fn,nn,Qn,Wr,Gi,at,yt,Cr,br,Rt,Yr,Nt,Tn;ho(p,this,function(bt){Us();var Fn=!0;bt[Ku]=function(o,c,m){br||(be=c,Wt=c.getCookieMgr(),Je=m,Ze=Je.diagLog(),od(Gi,Ol(o,function(w){var I,O=w.cfg,M=w.cfg.extensionConfig[m.identifier];Rt=nm(M[Zm],M[Xm]),fu(O.anonCookieName)?mg(Ne,"anoncknm",O.anonCookieName):Nh(Ne,"anoncknm"),at=M[d],yt=M.payloadListener;var k=M.httpXHROverride,L=M[g]?M[g]:O.endpointUrl;B=L+ql,vr=wt(M[S])?!0:!M[S],Ge=!M[D];var Y=M.valueSanitizer,z=M[j],te=!!O[Z];wt(M[Z])||(te=!!M[Z]),Ar=M.xhrTimeout,fn=!!M[X],nn=!!M[oe],Wr=M[ve]!==!1,Yr=!!M[ye],c.getPlugin("LocalStorage")&&(nn=!0),ce=!Ai(),Re=new rm(be,Y,z,te,Ul,Yr),ut(M[et])||(ce=!!M[et]),M[Ut]&&(Tn=M[Ut]);var Q=ya();Nt?Nt.SetConfig(Q):(Nt=new wh,Nt[Ku](Q,Ze));var ae=k,ie=M[or]?k:null,he=M[or]?k:null,Te=[3,2];if(!k){qe=!1;var je=[];Ai()?(je=[2,1],Te=[2,1,3]):je=[1,2,3],je=Sl(je,M.transports),k=Un(je,!1),k||xs(Ze,"No available transport to send events"),ae=Un(je,!0)}ie||(Te=Sl(Te,M[dr]),ie=Un(Te,!0)),Qn=!qe&&(ce&&Sd()||!nn&&bc(!0)),De=(I={},I[0]=k,I[1]=ae||Un([1,2,3],!0),I[2]=ie||ae||Un([1],!0),I[3]=he||Un([2,3],!0)||ae||Un([1],!0),I)})),br=!0)},bt.addResponseHandler=function(o){return Cr[Sn](o),{rm:function(){var c=Cr.indexOf(o);c>=0&&Cr[pu](c,1)}}},bt[dt]=function(o){try{if(Re)return Re.getEventBlob(o)}catch{}return Ps},bt[sr]=function(){try{var o=Re&&Re[Bt](0,!1,!1,!1,1,0);return Vf(o,vr)}catch{}return null},bt[Or]=function(o,c){try{var m=[];Er(o,function(k){c&&(k=qo(k));var L=Vd.create(k[io],[k]);m[Sn](L)});for(var w=null;m[fr]>0&&Re;){var I=m.shift();I&&I[Fi]()>0&&(w=w||Re[Bt](0,!1,!1,!1,1,0),Re.appendPayload(w,I,b))}var O=Vf(w,vr),M={data:w[kr],urlString:O.url,headers:O[mu],timeout:Ar,disableXhrSync:fn,disableFetchKeepAlive:nn};return vr&&(qf(M[Pt],Yd)||(M[Pt][Yd]=Vm),qf(M[Pt],Fc)||(M[Pt][Fc]=jd)),M}catch{}return null};function Un(o,c){try{return Nt&&Nt.getSenderInst(o,c)}catch{}return null}bt._getDbgPlgTargets=function(){return[De[0],H,Re,De,ya(),B]};function ya(){try{var o={xdrOnComplete:Qu,fetchOnComplete:om,xhrOnComplete:gu,beaconOnRetry:Gl},c={enableSendPromise:!1,isOneDs:!0,disableCredentials:!Fn,fetchCredentials:Tn,disableXhr:!1,disableBeacon:!ce,disableBeaconSync:!ce,disableFetchKeepAlive:nn,timeWrapper:Rt,addNoResponse:Wr,senderOnCompleteCallBack:o};return c}catch{}return null}function Qu(o,c,m){var w=ha(o);Qo(c,200,{},w),th(w)}function Us(){var o;B=null,H=new fg,ne=!1,ue=new Qg,ce=!1,ke=0,Je=null,Ze=null,De=null,be=null,qe=!0,Ne=[],tt={},Ae=[],Re=null,Ge=!1,Wt=null,Qt=!1,vr=!1,Ar=o,fn=o,nn=o,Qn=o,Wr=o,Gi=[],at=o,yt=o,Cr=[],br=!1,Rt=nm(),Yr=!1,Nt=null}function om(o,c,m,w){var I=function(k,L,Y){Qo(c,k,L,Y),th(Y)},O={},M=o[Pt];M&&M.forEach(function(k,L){O[L]=k}),I(o.status,O,m||Ps)}function gu(o,c,m){var w=ha(o);Qo(c,o.status,Il(o,!0),w),th(w)}function Qo(o,c,m,w){try{o(c,m,w)}catch(I){qi(Ze,2,518,_r(I))}}function Gl(o,c,m){var w=o,I=200,O=w[Mn],M=o[Ff]+(Wr?Vc:Ps);try{var k=Ri();if(O){var L=!!be.getPlugin("LocalStorage"),Y=[],z=[];Er(O[Ln],function(te){if(Y&&te&&te[Fi]()>0)for(var Q=te[$c](),ae=0;ae<Q[fr];ae++)if(k.sendBeacon(M,Re.getEventBlob(Q[ae])))z[Sn](te[ae]);else{Y[Sn](te[Bc](ae));break}else Y[Sn](te[Bc](0))}),z[fr]>0&&(O.sentEvts=z),L||_u(Y,8003,O[ao],!0)}else I=0}catch(te){xs(Ze,"Failed to send telemetry using sendBeacon API. Ex:"+_r(te)),I=0}finally{Qo(c,I,{},Ps)}}function Si(o){return o===2||o===3}function On(o){return Qt&&Si(o)&&(o=2),o}bt[qd]=function(o,c){tt[o]=c},bt.removeHeader=function(o){delete tt[o]},bt[Qm]=function(){return oi()&&ue[Ls]()},bt[Hd]=function(o,c){wt(o)&&(o=0),Qt&&(o=On(o),c=2),Vl(Ae,o,0)&&js(ba(),0,!1,o,c||0)},bt[Gd]=function(){return!ne&&ke===0&&Ae[fr]===0},bt[em]=function(o){Qt=o},bt.addBatch=function(o){if(o&&o[Fi]()>0){if(H.isTenantKilled(o[io]()))return!1;Ae[Sn](o)}return!0},bt.teardown=function(){Ae[fr]>0&&js(ba(),0,!0,2,2),Er(Gi,function(o){o&&o.rm&&o.rm()}),Gi=[]},bt.pause=function(){ne=!0},bt[Fe]=function(){ne=!1,bt[Hd](0,4)},bt[xt]=function(o,c,m){o&&o[Fi]()>0&&(ut(c)&&(c=1),Qt&&(c=On(c),m=2),js([o],0,!1,c,m||0))};function oi(){return!ne&&ke<N}function ba(){var o=Ae;return Ae=[],o}function Vl(o,c,m){var w=!1;return o&&o[fr]>0&&!ne&&De[c]&&Re&&(w=c!==0||oi()&&(m>0||ue[Ls]())),w}function Qd(o){var c={};return o&&Er(o,function(m,w){c[w]={iKey:m[io](),evts:m[$c]()}}),c}function js(o,c,m,w,I){if(!(!o||o[fr]===0)){if(ne){_u(o,1,w);return}w=On(w);try{var O=o,M=w!==0;Li(be,function(){return"HttpManager:_sendBatches"},function(k){k&&(o=o.slice(0));for(var L=[],Y=null,z=As(),te=De[w]||(M?De[1]:De[0]),Q=te&&te[zt],ae=Qn&&(Qt||Si(w)||Q===3||te._isSync&&Q===2);Vl(o,w,c);){var ie=o.shift();ie&&ie[Fi]()>0&&(H.isTenantKilled(ie[io]())?L[Sn](ie):(Y=Y||Re[Bt](c,m,M,ae,I,w),Re.appendPayload(Y,ie,b)?Y.overflow!==null&&(o=[Y.overflow][no](o),Y.overflow=null,ep(Y,z,As(),I),z=As(),Y=null):(ep(Y,z,As(),I),z=As(),o=[ie][no](o),Y=null)))}Y&&ep(Y,z,As(),I),o[fr]>0&&(Ae=o[no](Ae)),_u(L,8004,w)},function(){return{batches:Qd(O),retryCount:c,isTeardown:m,isSynchronous:M,sendReason:I,useSendBeacon:Si(w),sendType:w}},!M)}catch(k){qi(Ze,2,48,"Unexpected Exception sending batch: "+_r(k))}}}function Vf(o,c){var m={url:B,hdrs:{},useHdrs:!1};c?(m[mu]=Ud(m[mu],tt),m.useHdrs=Cn(m.hdrs)[fr]>0):Mr(tt,function(k,L){Bf[k]?Kd(m,Bf[k],L,!1):(m[mu][k]=L,m[Jm]=!0)}),Kd(m,Co,"NO_AUTH",c),Kd(m,zm,jv,c);var w=Ps;Er(o.apiKeys,function(k){w[fr]>0&&(w+=","),w+=k}),Kd(m,Bv,w,c),Kd(m,$d,Ha().toString(),c);var I=eh(o);if(fu(I)&&(m.url+="&ext.intweb.msfpc="+I),ue[Lf]()&&Kd(m,Wm,ue[Yc](),c),be[en]){var O=be[en]();O>=0&&(m.url+="&w="+O)}for(var M=0;M<Ne[fr];M++)m.url+="&"+Ne[M].name+"="+Ne[M].value;return m}function zf(o,c,m){o[c]=o[c]||{},o[c][Je.identifier]=m}function ep(o,c,m,w){if(o&&o.payloadBlob&&o.payloadBlob[fr]>0){var I=!!at,O=De[o.sendType];!Si(o[ao])&&o[hn]&&o.sendReason===2&&(O=De[2]||De[3]||O);var M=vr;(o.isBeacon||O[zt]===3)&&(M=!1);var k=Vf(o,M);M=M||k[Jm];var L=As();Li(be,function(){return"HttpManager:_doPayloadSend"},function(){for(var Y=0;Y<o.batches[fr];Y++)for(var z=o[Ln][Y],te=z[$c](),Q=0;Q<te[fr];Q++){var ae=te[Q];if(Ge){var ie=ae[En]=ae[En]||{};zf(ie,"sendEventStart",L),zf(ie,"serializationStart",c),zf(ie,"serializationCompleted",m)}ae[Gc]>0?ae[Gc]++:ae[Gc]=1}_u(o[Ln],1e3+(w||0),o[ao],!0);var he={data:o[kr],urlString:k.url,headers:k[mu],_thePayload:o,_sendReason:w,timeout:Ar,disableXhrSync:fn,disableFetchKeepAlive:nn};M&&(qf(he[Pt],Yd)||(he[Pt][Yd]=Vm),qf(he[Pt],Fc)||(he[Pt][Fc]=jd));var Te=null;O&&(Te=function(je){ue[Hn]();var rt=function(qt,Tr){Zv(qt,Tr,o,w)},it=o[wi]||o[Ju];try{O.sendPOST(je,rt,it),yt&&yt(he,je,it,o[hn])}catch(qt){xs(Ze,"Unexpected exception sending payload. Ex:"+_r(qt)),Qo(rt,0,{})}}),Li(be,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Te)if(o[ao]===0&&ke++,I&&!o.isBeacon&&O[zt]!==3){var je={data:he[Fs],urlString:he[Ff],headers:Ud({},he[Pt]),timeout:he[Zu],disableXhrSync:he[X],disableFetchKeepAlive:he[oe]},rt=!1;Li(be,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{at(je,function(it){rt=!0,!qe&&!it[Mn]&&(it[Mn]=it[Mn]||he[Mn],it[qc]=it[qc]||he[qc]),Te(it)},o.isSync||o[wi])}catch{rt||Te(he)}})}else Te(he)})},function(){return{thePayload:o,serializationStart:c,serializationCompleted:m,sendReason:w}},o[Ju])}o.sizeExceed&&o.sizeExceed[fr]>0&&_u(o.sizeExceed,8003,o[ao]),o.failedEvts&&o.failedEvts[fr]>0&&_u(o.failedEvts,8002,o[ao])}function xh(o,c){Ge&&Er(o,function(m){var w=m[En]=m[En]||{};zf(w,"sendEventCompleted",c)})}function Zv(o,c,m,w){var I=9e3,O=null,M=!1,k=!1;try{var L=!0;if(typeof o!==l){if(c){ue[Bd](c[Uc]);var Y=c[Xp]||c["kill-duration-seconds"];Er(H[Gv](c[$l],Y),function(te){Er(m[Ln],function(Q){if(Q[io]()===te){O=O||[];var ae=Q[Bc](0);m.numEvents-=ae[Fi](),O[Sn](ae)}})})}if(o==200||o==204){I=200;return}(!zd(o)||m.numEvents<=0)&&(L=!1),I=9e3+o%1e3}if(L){I=100;var z=m.retryCnt;m[ao]===0&&(z<R?(M=!0,Qv(function(){m[ao]===0&&ke--,js(m[Ln],z+1,m[wi],Qt?2:m[ao],5)},Qt,pg(z))):(k=!0,Qt&&(I=8001)))}}finally{M||(ue[Bd](),Xv(m,I,w,k)),_u(O,8004,m[ao])}}function Xv(o,c,m,w){try{w&&Je[tm]();var I=o[Ln];c===200&&(I=o.sentEvts||o[Ln],!w&&!o[Ju]&&Je._clearBackOff(),Dh(I)),_u(I,c,o[ao],!0)}finally{o[ao]===0&&(ke--,m!==5&&bt.sendQueuedRequests(o[ao],m))}}function Dh(o){if(Ge){var c=As();Er(o,function(m){m&&m[Fi]()>0&&xh(m[$c](),c)})}}function Qv(o,c,m){c?o():Rt.set(o,m)}function eh(o){for(var c=0;c<o.batches[fr];c++){var m=o[Ln][c].Msfpc();if(m)return encodeURIComponent(m)}return Ps}function th(o){var c=Cr;try{for(var m=0;m<c[fr];m++)try{c[m](o)}catch(I){qi(Ze,1,519,"Response handler failed: "+I)}if(o){var w=JSON.parse(o);fu(w.webResult)&&fu(w.webResult[jc])&&Wt.set("MSFPC",w.webResult[jc],365*86400)}}catch{}}function _u(o,c,m,w){if(o&&o[fr]>0&&P){var I=P[rh(c)];if(I){var O=m!==0;Li(be,function(){return"HttpManager:_sendBatchesNotification"},function(){Qv(function(){try{I.call(P,o,c,O,m)}catch(M){qi(Ze,1,74,"send request notification failed: "+M)}},w||O,0)},function(){return{batches:Qd(o),reason:c,isSync:O,sendSync:w,sendType:m}},!O)}}}function rh(o){var c=Hl[o];return fu(c)||(c=Gm,o>=9e3&&o<=9999?c=Zp:o>=8e3&&o<=8999?c=qm:o>=1e3&&o<=1999&&(c=Hm)),c}})}return p.__ieDyn=1,p}(),Gf=.25,Jd=500,im=20,Ch=6,av=2,Jv=4,vg=2,hg=1,gg=1e4,Xn="eventsDiscarded",Zd="",ai=void 0,H_=as({eventsLimitInMem:{isVal:rn,v:gg},immediateEventLimit:{isVal:rn,v:500},autoFlushEventsLimit:{isVal:rn,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:am,v:ai},overrideInstrumentationKey:ai,overrideEndpointUrl:ai,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:ai,clearTimeoutOverride:ai,payloadPreprocessor:ai,payloadListener:ai,disableEventTimings:ai,valueSanitizer:ai,stringifyObjects:ai,enableCompoundKey:ai,disableOptimizeObj:!1,fetchCredentials:ai,transports:ai,unloadTransports:ai,useSendBeacon:ai,disableFetchKeepAlive:ai,avoidOptions:!1,xhrTimeout:ai,disableXhrSync:ai,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:lr,v:Ch},maxUnloadEventRetryAttempts:{isVal:lr,v:av},addNoResponse:ai,excludeCsMetaData:ai});function am(p){return p&&p.sendPOST}var Xd=function(p){Xi(b,p);function b(){var N=p.call(this)||this;N.identifier="PostChannel",N.priority=1011,N.version="4.3.5";var R,P=!1,B=[],H,ne=!1,ue=0,ce,ke=0,Je,Ze={},De=e,be,qe,Ne,tt,Ae,Re,Ge,Wt,Qt,vr,Ar,fn,nn,Qn,Wr,Gi,at,yt,Cr,br,Rt,Yr;return ho(b,N,function(Nt,Tn){On(),Nt._getDbgPlgTargets=function(){return[Ae,R]},Nt[Ku]=function(k,L,Y){Li(L,function(){return"PostChannel:initialize"},function(){Tn[Ku](k,L,Y),Cr=L.getNotifyMgr();try{Wr=Wp(di(Nt[Uf]),L.evtNamespace&&L.evtNamespace()),Nt._addHook(Ol(k,function(z){var te=z.cfg,Q=Of(null,te,L);R=Q.getExtCfg(Nt[Uf],H_),Gi=nm(R[Zm],R[Xm]),Ar=!R[Bl]&&Bm(),at=R[$_],Fn(L),Je=R[lg],ce=R.immediateEventLimit,Ge=R[Zg],nn=R.maxEventRetryAttempts,Qn=R.maxUnloadEventRetryAttempts,yt=R[Th],pr(te.endpointUrl)?Nt.pause():ne&&Nt[Fe](),M(),Rt=R[B_],Yr=!!R[jf],br&&bt();var ae=te.disablePageUnloadEvents||[];br=Sh(Qu,ae,Wr),br=Hi(Qu,ae,Wr)||br,br=Ld(Us,te.disablePageShowEvents,Wr)||br})),Ae[Ku](k,Nt.core,Nt)}catch(z){throw Nt.setInitialized(!1),z}},function(){return{theConfig:k,core:L,extensions:Y}})},Nt.processTelemetry=function(k,L){jl(k,Nt[Uf]),L=L||Nt._getTelCtx(L);var Y=k;!Yr&&!P&&(Rt&&(Y[io]=Rt),gu(Y,!0),fn?Vl(2,2):Si()),Nt.processNext(Y,L)},Nt.getOfflineSupport=function(){try{var k=Ae&&Ae[sr]();if(Ae)return{getUrl:function(){return k?k.url:null},serialize:ya,batch:Un,shouldProcess:function(L){return!Yr},createPayload:function(L){return null},createOneDSPayload:function(L){if(Ae[Or])return Ae[Or](L,Ar)}}}catch{}return null},Nt._doTeardown=function(k,L){Vl(2,2),P=!0,Ae.teardown(),bt(),On()};function bt(){ug(null,Wr),Md(null,Wr),Uv(null,Wr)}function Fn(k){var L=k[en];k[en]=function(){var Y=0;return at&&(Y=Y|2),Y|L.call(k)}}function Un(k){var L=Zd;return k&&k[fr]&&Er(k,function(Y){L&&(L+=`
`),L+=Y}),L}function ya(k){var L=Zd;try{om(k),L=Ae[dt](k)}catch{}return L}function Qu(k){var L=k||Ra().event;L.type!=="beforeunload"&&(fn=!0,Ae[em](fn)),Vl(2,2)}function Us(k){fn=!1,Ae[em](fn)}function om(k){k.ext&&k.ext[qv]&&delete k.ext[qv],k.ext&&k.ext[Xo]&&k.ext[Xo].id&&delete k.ext[Xo].id,Ar&&(k.ext=qo(k.ext),k[ev]&&(k[ev]=qo(k[ev])),k[Fs]&&(k[Fs]=qo(k[Fs])))}function gu(k,L){if(k[Vv]||(k[Vv]=0),k[Yf]||(k[Yf]=1),om(k),k[tv]){if(Ne||ne)k[Yf]=3,k[tv]=!1;else if(Ae){Ar&&(k=qo(k)),Ae[xt](Vd.create(k[io],[k]),k[tv]===!0?1:k[tv],3);return}}var Y=k[Yf],z=ke,te=Je;Y===4&&(z=ue,te=ce);var Q=!1;if(z<te)Q=!zf(k,L);else{var ae=1,ie=im;Y===4&&(ae=4,ie=1),Q=!0,ep(k[io],k[Yf],ae,ie)&&(Q=!zf(k,L))}Q&&rh(Xn,[k],Ao.QueueFull)}Nt.setEventQueueLimits=function(k,L){R[lg]=Je=rn(k)?k:gg,R[Zg]=Ge=rn(L)?L:0,M();var Y=ke>k;if(!Y&&Wt>0)for(var z=1;!Y&&z<=3;z++){var te=Re[z];te&&te[Ln]&&Er(te[Ln],function(Q){Q&&Q[Fi]()>=Wt&&(Y=!0)})}Vf(!0,Y)},Nt.pause=function(){ba(),ne=!0,Ae&&Ae.pause()},Nt[Fe]=function(){ne=!1,Ae&&Ae[Fe](),Si()},Nt._loadTransmitProfiles=function(k){Qv(),Mr(k,function(L,Y){var z=Y[fr];if(z>=2){var te=z>2?Y[2]:0;if(Y[pu](0,z-2),Y[1]<0&&(Y[0]=-1),Y[1]>0&&Y[0]>0){var Q=Y[0]/Y[1];Y[0]=Math.ceil(Q)*Y[1]}te>=0&&Y[1]>=0&&te>Y[1]&&(te=Y[1]),Y[Sn](te),Ze[L]=Y}})},Nt.flush=function(k,L,Y){k===void 0&&(k=!0);var z;if(!ne)if(Y=Y||1,k)L||(z=eo(function(Q){L=Q})),H==null?(ba(),Zv(1,0,Y),H=oi(function(){H=null,Xv(L,Y)},0)):B[Sn](L);else{var te=ba();Qo(1,1,Y),L&&L(),te&&Si()}return z},Nt.setMsaAuthTicket=function(k){Ae[qd](Ms,k)},Nt.setAuthPluginHeader=function(k){Ae[qd](Eh,k)},Nt.removeAuthPluginHeader=function(){Ae.removeHeader(Eh)},Nt.hasEvents=Gl,Nt._setTransmitProfile=function(k){De!==k&&Ze[k]!==void 0&&(ba(),De=k,Si())},_f(Nt,function(){return Ae},["addResponseHandler"]);function Qo(k,L,Y){var z=Zv(k,L,Y);return Ae[Hd](L,Y),z}function Gl(){return ke>0}function Si(){if(Qt>=0&&Zv(Qt,0,vr)&&Ae[Hd](0,vr),ue>0&&!qe&&!ne){var k=Ze[De][2];k>=0&&(qe=oi(function(){qe=null,Qo(4,0,1),Si()},k))}var L=Ze[De][1];!be&&!H&&L>=0&&!ne&&(Gl()?be=oi(function(){be=null,Qo(tt===0?3:1,0,1),tt++,tt%=2,Si()},L):tt=0)}Nt[tm]=function(){Ne<Jv&&(Ne++,ba(),Si())},Nt._clearBackOff=function(){Ne&&(Ne=0,ba(),Si())};function On(){R=null,P=!1,B=[],H=null,ne=!1,ue=0,ce=500,ke=0,Je=gg,Ze={},De=e,be=null,qe=null,Ne=0,tt=0,Re={},Ge=0,br=!1,Wt=0,Qt=-1,vr=null,Ar=!0,fn=!1,nn=Ch,Qn=av,Wr=null,Rt=null,Yr=!1,Gi=nm(),Ae=new Hf(Jd,vg,hg,{requeue:th,send:c,sent:m,drop:w,rspFail:I,oth:O}),eh(),Qd(),M()}function oi(k,L){L===0&&Ne&&(L=1);var Y=1e3;return Ne&&(Y=pg(Ne-1)),Gi.set(k,L*Y)}function ba(){return be!==null?(be.cancel(),be=null,tt=0,!0):!1}function Vl(k,L){ba(),H&&(H.cancel(),H=null),ne||Qo(1,k,L)}function Qd(){Re[4]={batches:[],iKeyMap:{}},Re[3]={batches:[],iKeyMap:{}},Re[2]={batches:[],iKeyMap:{}},Re[1]={batches:[],iKeyMap:{}}}function js(k,L,Y){var z=Re[L];z||(L=1,z=Re[L]);var te=z.iKeyMap[k];return!te&&Y&&(te=Vd.create(k),z.batches[Sn](te),z.iKeyMap[k]=te),te}function Vf(k,L){Ae[Qm]()&&!Ne&&(Ge>0&&ke>Ge&&(L=!0),L&&H==null&&Nt.flush(k,function(){},20))}function zf(k,L){Ar&&(k=qo(k));var Y=k[Yf],z=js(k[io],Y,!0);return z.addEvent(k)?(Y!==4?(ke++,L&&k[Vv]===0&&Vf(!k.sync,Wt>0&&z[Fi]()>=Wt)):ue++,!0):!1}function ep(k,L,Y,z){for(;Y<=L;){var te=js(k,L,!0);if(te&&te[Fi]()>0){var Q=te[Bc](0,z),ae=Q[Fi]();if(ae>0)return Y===4?ue-=ae:ke-=ae,o(Xn,[Q],Ao.QueueFull),!0}Y++}return xh(),!1}function xh(){for(var k=0,L=0,Y=function(te){var Q=Re[te];Q&&Q[Ln]&&Er(Q[Ln],function(ae){te===4?k+=ae[Fi]():L+=ae[Fi]()})},z=1;z<=4;z++)Y(z);ke=L,ue=k}function Zv(k,L,Y){var z=!1,te=L===0;return!te||Ae[Qm]()?Li(Nt.core,function(){return"PostChannel._queueBatches"},function(){for(var Q=[],ae=4;ae>=k;){var ie=Re[ae];ie&&ie.batches&&ie.batches[fr]>0&&(Er(ie[Ln],function(he){Ae.addBatch(he)?z=z||he&&he[Fi]()>0:Q=Q[no](he[$c]()),ae===4?ue-=he[Fi]():ke-=he[Fi]()}),ie[Ln]=[],ie.iKeyMap={}),ae--}Q[fr]>0&&rh(Xn,Q,Ao.KillSwitch),z&&Qt>=k&&(Qt=-1,vr=0)},function(){return{latency:k,sendType:L,sendReason:Y}},!te):(Qt=Qt>=0?Math.min(Qt,k):k,vr=Math.max(vr,Y)),z}function Xv(k,L){Qo(1,0,L),xh(),Dh(function(){k&&k(),B[fr]>0?H=oi(function(){H=null,Xv(B.shift(),L)},0):(H=null,Si())})}function Dh(k){Ae[Gd]()?k():H=oi(function(){H=null,Dh(k)},Gf)}function Qv(){ba(),eh(),De=e,Si()}function eh(){Ze={},Ze[e]=[2,1,0],Ze[r]=[6,3,0],Ze[n]=[18,9,0]}function th(k,L){var Y=[],z=nn;fn&&(z=Qn),Er(k,function(te){te&&te[Fi]()>0&&Er(te[$c](),function(Q){Q&&(Q[tv]&&(Q[Yf]=4,Q[tv]=!1),Q[Vv]<z?(jl(Q,Nt[Uf]),gu(Q,!1)):Y[Sn](Q))})}),Y[fr]>0&&rh(Xn,Y,Ao.NonRetryableStatus),fn&&Vl(2,2)}function _u(k,L){var Y=Cr||{},z=Y[k];if(z)try{z.apply(Y,L)}catch(te){qi(Nt.diagLog(),1,74,k+" notification failed: "+te)}}function rh(k,L){for(var Y=[],z=2;z<arguments.length;z++)Y[z-2]=arguments[z];L&&L[fr]>0&&_u(k,[L][no](Y))}function o(k,L){for(var Y=[],z=2;z<arguments.length;z++)Y[z-2]=arguments[z];L&&L[fr]>0&&Er(L,function(te){te&&te[Fi]()>0&&_u(k,[te.events()][no](Y))})}function c(k,L,Y){k&&k[fr]>0&&_u("eventsSendRequest",[L>=1e3&&L<=1999?L-1e3:0,Y!==!0])}function m(k,L){o("eventsSent",k,L),Si()}function w(k,L){o(Xn,k,L>=8e3&&L<=8999?L-8e3:Ao.Unknown)}function I(k){o(Xn,k,Ao.NonRetryableStatus),Si()}function O(k,L){o(Xn,k,Ao.Unknown),Si()}function M(){yt?Wt=0:Wt=Math.max(Jd*(vg+1),Je/6)}}),N}return b.__ieDyn=1,b}(kf);t.BE_PROFILE=n,t.NRT_PROFILE=r,t.PostChannel=Xd,t.RT_PROFILE=e})});var oI=ln(dv=>{"use strict";var BA=dv&&dv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qA=dv&&dv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),aI=dv&&dv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&BA(e,t,r);return qA(e,t),e};Object.defineProperty(dv,"__esModule",{value:!0});dv.oneDataSystemClientFactory=void 0;var HA=async(t,e,r)=>{let n=await Promise.resolve().then(()=>aI(rI())),i=await Promise.resolve().then(()=>aI(iI())),a=new n.AppInsightsCore,l=new i.PostChannel,v={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[l]]};if(r){v.extensionConfig={};let C={alwaysUseXhrOverride:!0,httpXHROverride:r};v.extensionConfig[l.identifier]=C}let y=e.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(v,[]),a.addTelemetryInitializer(C=>{C.ext=C.ext??{},C.ext.web=C.ext.web??{},C.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',y&&(C.ext.utc=C.ext.utc??{},C.ext.utc.flags=8462029)}),a},GA=async(t,e,r)=>{let n=await HA(t,e,r);return{logEvent:(l,v)=>{try{n==null||n.track({name:l,baseData:{name:l,properties:v==null?void 0:v.properties,measurements:v==null?void 0:v.measurements}})}catch(_){throw new Error(`Failed to log event to app insights!
`+_.message)}},flush:async()=>{try{return new Promise((v,_)=>{if(!n){v();return}n.flush(!0,y=>{if(!y){_("Failed to flush app 1DS!");return}})})}catch(l){throw new Error(`Failed to flush 1DS!
`+l.message)}},dispose:async()=>new Promise(v=>{if(!n){v();return}n.unload(!1,()=>{v(),n=void 0},1e3)})}};dv.oneDataSystemClientFactory=GA});var uI=ln((j0,sI)=>{(function(t,e){typeof j0=="object"&&typeof sI<"u"?e(j0):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(j0,function(t){"use strict";function e(d,g){return d||g}function r(d,g){return d[g]}var n=void 0,i=null,a="",l="function",v="object",_="prototype",y="__proto__",C="undefined",U="constructor",W="Symbol",K="_polyfill",q="length",V="name",J="call",re="toString",_e=e(Object),Le=r(_e,_),ge=e(String),Ee=r(ge,_),Be=e(Math),We=e(Array),st=r(We,_),mt=r(st,"slice");function At(d,g){try{return{v:d.apply(this,g)}}catch(S){return{e:S}}}function Ur(d){return function(g){return typeof g===d}}function on(d){var g="[object "+d+"]";return function(S){return!!(S&&kn(S)===g)}}function kn(d){return Le[re].call(d)}function ct(d){return typeof d===C||d===C}function Dr(d){return!_n(d)}function Ke(d){return d===i||ct(d)}function _n(d){return!!d||d!==n}var Pe=Ur("string"),$t=Ur(l);function Vt(d){return!d&&Ke(d)?!1:!!d&&typeof d===v}var wt=r(We,"isArray"),mn=on("Error"),ut=r(_e,"getOwnPropertyDescriptor");function ti(d,g){return!!d&&Le.hasOwnProperty[J](d,g)}var ot=e(r(_e,"hasOwn"),Su);function Su(d,g){return ti(d,g)||!!ut(d,g)}function Xt(d,g,S){if(d&&Vt(d)){for(var D in d)if(ot(d,D)&&g[J](S||d,D,d[D])===-1)break}}var $a={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Kt(d){var g={};if(g[$a.c]=!0,g[$a.e]=!0,d.l){g.get=function(){return d.l.v};var S=ut(d.l,"v");S&&S.set&&(g.set=function(D){d.l.v=D})}return Xt(d,function(D,j){g[$a[D]]=Dr(j)?g[$a[D]]:j}),g}var lr=r(_e,"defineProperty");function Ci(d,g,S){return lr(d,g,Kt(S))}function pr(d,g,S,D,j){var Z={};return Xt(d,function(X,oe){xi(Z,X,g?oe:X,j),xi(Z,oe,S?oe:X,j)}),D?D(Z):Z}function xi(d,g,S,D){lr(d,g,{value:S,enumerable:!0,writable:!!D})}var Pr=e(ge),qn="[object Error]";function Dt(d,g){var S=a,D=Le[re][J](d);D===qn&&(d={stack:Pr(d.stack),message:Pr(d.message),name:Pr(d.name)});try{S=JSON.stringify(d,i,g?typeof g=="number"?g:4:n),S=(S?S.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||Pr(d)}catch(j){S=" - "+Dt(j,g)}return D+": "+S}function Mr(d){throw new Error(d)}function Qe(d){throw new TypeError(d)}var An=r(_e,"freeze");function qr(d){return d}function Kr(d){return d[y]||i}var Ia=r(_e,"assign"),Ui=r(_e,"keys"),Lr=e(An,qr),nr=e(r(_e,"getPrototypeOf"),Kr);function _r(d){return pr(d,1,0,Lr)}function sn(d){var g={};return Xt(d,function(S,D){xi(g,S,D[1]),xi(g,D[0],D[1])}),Lr(g)}function td(d){return sn(d)}var ri="__tsUtils$gblCfg",rd;function Eu(){var d;return typeof globalThis!==C&&(d=globalThis),!d&&typeof self!==C&&(d=self),!d&&typeof window!==C&&(d=window),!d&&typeof global!==C&&(d=global),d}function Cn(){if(!rd){var d=At(Eu).v||{};rd=d[ri]=d[ri]||{}}return rd}var as=Jt;function Jt(d,g,S){var D=g?g[d]:i;return function(j){var Z=(j?j[d]:i)||D;if(Z||S){var X=arguments;return(Z||S).apply(j,Z?mt[J](X,1):X)}Qe('"'+Pr(d)+'" not defined for '+Dt(j))}}var ji=r(Be,"max"),Ba=as("slice",Ee),os=as("substring",Ee),Na=Jt("substr",Ee,nd);function nd(d,g,S){return Ke(d)&&Qe("Invalid "+Dt(d)),S<0?a:(g=g||0,g<0&&(g=ji(g+d[q],0)),ct(S)?Ba(d,g):Ba(d,g,g+S))}function al(d,g){return os(d,0,g)}var Ji="_urid",Ca;function Di(){if(!Ca){var d=Cn();Ca=d.gblSym=d.gblSym||{k:{},s:{}}}return Ca}function ss(d){var g={description:Pr(d),toString:function(){return W+"("+d+")"}};return g[K]=!0,g}function Gs(d){var g=Di();if(!ot(g.k,d)){var S=ss(d),D=Ui(g.s).length;S[Ji]=function(){return D+"_"+S[re]()},g.k[d]=S,g.s[S[Ji]()]=Pr(d)}return g.k[d]}var ui;function ol(){ui=Cn()}function Vs(d){return lr({toJSON:function(){return d}},"v",{value:d})}var xa="window",ni;function nc(d,g){var S;return function(){return!ui&&ol(),(!S||ui.lzy)&&(S=Vs(At(d,g).v)),S.v}}function zs(d){return!ui&&ol(),(!ni||d===!1||ui.lzy)&&(ni=Vs(At(Eu).v||i)),ni.v}function li(d,g){var S;if(!ni||g===!1?S=zs(g):S=ni.v,S&&S[d])return S[d];if(d===xa)try{return window}catch{}return i}var ua=nc(li,["document"]);function mr(){return!!xn()}var xn=nc(li,[xa]);function Da(){return!!Jr()}var Jr=nc(li,["navigator"]),_i,qa;function Zr(){return _i=Vs(At(li,[W]).v),_i}function la(d){var g=(ui.lzy?0:_i)||Zr();return g.v?g.v[d]:n}function Tu(d,g){!ui&&ol();var S=(ui.lzy?0:_i)||Zr();return S.v?S.v(d):g?i:ss(d)}function ca(d){return!ui&&ol(),qa=(ui.lzy?0:qa)||Vs(At(la,["for"]).v),(qa.v||Gs)(d)}function yn(d,g,S){return d.apply(g,S)}function ci(d,g,S){if(d)for(var D=d[q]>>>0,j=0;j<D&&!(j in d&&g[J](S||d,d[j],j,d)===-1);j++);}var sl=as("indexOf",st),Ra=as("map",st),Rr=as("reduce",st),Ri=e(r(_e,"create"),id);function id(d){if(!d)return{};var g=typeof d;g!==v&&g!==l&&Qe("Prototype must be an Object or function: "+Dt(d));function S(){}return S[_]=d,new S}var Yi;function us(d,g){var S=_e.setPrototypeOf||function(D,j){var Z;!Yi&&(Yi=Vs((Z={},Z[y]=[],Z instanceof Array))),Yi.v?D[y]=j:Xt(j,function(X,oe){return D[X]=oe})};return S(d,g)}function ic(d,g,S){At(Ci,[g,V,{v:d,c:!0,e:!1}]),g=us(g,S);function D(){this[U]=g,At(Ci,[this,V,{v:d,c:!0,e:!1}])}return g[_]=S===i?Ri(S):(D[_]=S[_],new D),g}function ls(d,g){g&&(d[V]=g)}function ad(d,g,S){var D=S||Error,j=D[_][V],Z=Error.captureStackTrace;return ic(d,function(){var X=this,oe=arguments;try{At(ls,[D,d]);var ve=yn(D,X,mt[J](oe))||X;if(ve!==X){var ye=nr(X);ye!==nr(ve)&&us(ve,ye)}return Z&&Z(ve,X[U]),g&&g(ve,oe),ve}finally{At(ls,[D,j])}},D)}function vn(){return(Date.now||nf)()}function nf(){return new Date().getTime()}function fa(d){return function(S){return Ke(S)&&Qe("strTrim called ["+Dt(S)+"]"),S&&S.replace&&(S=S.replace(d,a)),S}}var pp=fa(/^\s+|(?=\s)\s+$/g),fi=Jt("trim",Ee,pp),Im,Oa,af;function fo(d){if(!d||typeof d!==v)return!1;af||(af=mr()?xn():!0);var g=!1;if(d!==af){Oa||(Im=Function[_][re],Oa=Im[J](_e));try{var S=nr(d);g=!S,g||(ti(S,U)&&(S=S[U]),g=!!(S&&typeof S===l&&Im[J](S)===Oa))}catch{}}return g}var od;function Er(){return!ui&&ol(),(!od||ui.lzy)&&(od=Vs(At(li,["performance"]).v)),od.v}var cs=Jt("endsWith",Ee,sd);function sd(d,g,S){Pe(d)||Qe("'"+Dt(d)+"' is not a string");var D=Pe(g)?g:Pr(g),j=!ct(S)&&S<d[q]?S:d[q];return os(d,j-D[q],j)===D}var Zi=as("indexOf",Ee),ac="ref",Ft="unref",ka="hasRef",ul="enabled";function of(d,g,S){var D=!0,j=d?g(i):i,Z;function X(){return D=!1,j&&j[Ft]&&j[Ft](),Z}function oe(){j&&S(j),j=i}function ve(){return j=g(j),D||X(),Z}function ye(et){!et&&j&&oe(),et&&!j&&ve()}return Z={cancel:oe,refresh:ve},Z[ka]=function(){return j&&j[ka]?j[ka]():D},Z[ac]=function(){return D=!0,j&&j[ac]&&j[ac](),Z},Z[Ft]=X,Z=lr(Z,ul,{get:function(){return!!j},set:ye}),{h:Z,dn:function(){j=i}}}function wv(d,g,S){var D=wt(g),j=D?g.length:0,Z=(j>0?g[0]:D?n:g)||setTimeout,X=(j>1?g[1]:n)||clearTimeout,oe=S[0];S[0]=function(){ve.dn(),yn(oe,n,mt[J](arguments))};var ve=of(d,function(ye){if(ye){if(ye.refresh)return ye.refresh(),ye;yn(X,n,[ye])}return yn(Z,n,S)},function(ye){yn(X,n,[ye])});return ve.h}function Ha(d,g){return wv(!0,n,mt[J](arguments))}var sf=_r,mp=td,Iu="toLowerCase",Ga="blkVal",vt="length",Oi="rdOnly",Nu="notify",Ws="warnToConsole",vp="throwInternal",hp="setDf",Dn="watch",Aa="logger",gp="apply",Va="push",da="splice",gh="hdlr",Sv="cancel",Nm="name",Cu="unload",Cm="version",og="loggingLevelConsole",_p="messageId",Xi="message",uf="diagLog",lf="userAgent",po="split",Pa="nodeType",xu="replace",xm="logInternalMessage",za="type",yp="handler",Du="traceId",oc="spanId",cf="traceFlags",ud="getAttribute",bp;function Dm(d,g){bp||(bp=ad("AggregationError",function(D,j){j[vt]>1&&(D.errors=j[1])}));var S=d||"One or more errors occurred.";throw ci(g,function(D,j){S+=`
`.concat(j," > ").concat(Dt(D))}),new bp(S,g||[])}var Rm="function",Ru="object",wp="undefined",Ks="prototype",ll=Object,Wa=ll[Ks];(zs()||{}).Symbol,(zs()||{}).Reflect;var ff="hasOwnProperty",ld=function(d){for(var g,S=1,D=arguments.length;S<D;S++){g=arguments[S];for(var j in g)Wa[ff].call(g,j)&&(d[j]=g[j])}return d},sc=Ia||ld,mo=function(d,g){return mo=ll.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,D){S.__proto__=D}||function(S,D){for(var j in D)D[ff](j)&&(S[j]=D[j])},mo(d,g)};function Ev(d,g){typeof g!==Rm&&g!==null&&Qe("Class extends value "+String(g)+" is not a constructor or null"),mo(d,g);function S(){this.constructor=d}d[Ks]=g===null?Ri(g):(S[Ks]=g[Ks],new S)}var fs,ko="constructor",vo="prototype",Ou="function",cd="_dynInstFuncs",uc="_isDynProxy",lc="_dynClass",cl="_dynCls$",fd="_dynInstChk",df=fd,dd="_dfOpts",fl="_unknown_",ho="__proto__",cc="_dyn"+ho,Ao="__dynProto$Gbl",Ma="_dynInstProto",ds="useBaseInst",un="setInstFuncs",Js=Object,go=Js.getPrototypeOf,fc=Js.getOwnPropertyNames,dc=zs(),ps=dc[Ao]||(dc[Ao]={o:(fs={},fs[un]=!0,fs[ds]=!0,fs),n:1e3});function pf(d){return d&&(d===Js[vo]||d===Array[vo])}function ms(d){return pf(d)||d===Function[vo]}function ku(d){var g;if(d){if(go)return go(d);var S=d[ho]||d[vo]||(d[ko]?d[ko][vo]:null);g=d[cc]||S,ti(d,cc)||(delete d[Ma],g=d[cc]=d[Ma]||d[cc],d[Ma]=S)}return g}function pa(d,g){var S=[];if(fc)S=fc(d);else for(var D in d)typeof D=="string"&&ti(d,D)&&S.push(D);if(S&&S.length>0)for(var j=0;j<S.length;j++)g(S[j])}function Sp(d,g,S){return g!==ko&&typeof d[g]===Ou&&(S||ti(d,g))&&g!==ho&&g!==vo}function dl(d){Qe("DynamicProto: "+d)}function Qi(d){var g=Ri(null);return pa(d,function(S){!g[S]&&Sp(d,S,!1)&&(g[S]=d[S])}),g}function pd(d,g){for(var S=d.length-1;S>=0;S--)if(d[S]===g)return!0;return!1}function Ep(d,g,S,D){function j(ve,ye,et){var Ut=ye[et];if(Ut[uc]&&D){var or=ve[cd]||{};or[df]!==!1&&(Ut=(or[ye[lc]]||{})[et]||Ut)}return function(){return Ut.apply(ve,arguments)}}var Z=Ri(null);pa(S,function(ve){Z[ve]=j(g,S,ve)});for(var X=ku(d),oe=[];X&&!ms(X)&&!pd(oe,X);)pa(X,function(ve){!Z[ve]&&Sp(X,ve,!go)&&(Z[ve]=j(g,X,ve))}),oe.push(X),X=ku(X);return Z}function mf(d,g,S,D){var j=null;if(d&&ti(S,lc)){var Z=d[cd]||Ri(null);if(j=(Z[S[lc]]||Ri(null))[g],j||dl("Missing ["+g+"] "+Ou),!j[fd]&&Z[df]!==!1){for(var X=!ti(d,g),oe=ku(d),ve=[];X&&oe&&!ms(oe)&&!pd(ve,oe);){var ye=oe[g];if(ye){X=ye===D;break}ve.push(oe),oe=ku(oe)}try{X&&(d[g]=j),j[fd]=1}catch{Z[df]=!1}}}return j}function vf(d,g,S){var D=g[d];return D===S&&(D=ku(g)[d]),typeof D!==Ou&&dl("["+d+"] is not a "+Ou),D}function Tp(d,g,S,D,j){function Z(ve,ye){var et=function(){var Ut=mf(this,ye,ve,et)||vf(ye,ve,et);return Ut.apply(this,arguments)};return et[uc]=1,et}if(!pf(d)){var X=S[cd]=S[cd]||Ri(null);if(!pf(X)){var oe=X[g]=X[g]||Ri(null);X[df]!==!1&&(X[df]=!!j),pf(oe)||pa(S,function(ve){Sp(S,ve,!1)&&S[ve]!==D[ve]&&(oe[ve]=S[ve],delete S[ve],(!ti(d,ve)||d[ve]&&!d[ve][uc])&&(d[ve]=Z(d,ve)))})}}}function Tv(d,g){if(go){for(var S=[],D=ku(g);D&&!ms(D)&&!pd(S,D);){if(D===d)return!0;S.push(D),D=ku(D)}return!1}return!0}function pl(d,g){return ti(d,vo)?d.name||g||fl:((d||{})[ko]||{}).name||g||fl}function Po(d,g,S,D){ti(d,vo)||dl("theClass is an invalid class definition.");var j=d[vo];Tv(j,g)||dl("["+pl(d)+"] not in hierarchy of ["+pl(g)+"]");var Z=null;ti(j,lc)?Z=j[lc]:(Z=cl+pl(d,"_")+"$"+ps.n,ps.n++,j[lc]=Z);var X=Po[dd],oe=!!X[ds];oe&&D&&D[ds]!==void 0&&(oe=!!D[ds]);var ve=Qi(g),ye=Ep(j,g,ve,oe);S(g,ye);var et=!!go&&!!X[un];et&&D&&(et=!!D[un]),Tp(j,Z,g,ve,et!==!1)}Po[dd]=ps.o;var _o=void 0,Rn="",hf="Not dynamic - ",ml=/-([a-z])/g,vl=/([^\w\d_$])/g,Ip=/^(\d+[\w\d_$])/;function Ka(d){return!Ke(d)}function Au(d){var g=d;return g&&Pe(g)&&(g=g[xu](ml,function(S,D){return D.toUpperCase()}),g=g[xu](vl,"_"),g=g[xu](Ip,function(S,D){return"_"+D})),g}function Zs(d,g){return d&&g?Zi(d,g)!==-1:!1}function cr(d){return d&&d.toISOString()||""}function Mo(d){return mn(d)?d[Nm]:Rn}function vs(d){return function(){function g(){var S=this;d&&Xt(d,function(D,j){S[D]=j})}return g}()}var Ja="console",md="JSON",Za="crypto",Pu="msCrypto",bn="msie",ma="trident/",Vr=null,ht=null,hl=null;function Lo(){return typeof console!==wp?console:li(Ja)}function Xs(){return!!(typeof JSON===Ru&&JSON||li(md)!==null)}function yo(){return Xs()?JSON||li(md):null}function Mu(){return li(Za)}function Xa(){return li(Pu)}function Xr(){var d=Jr();if(d&&(d[lf]!==ht||Vr===null)){ht=d[lf];var g=(ht||Rn)[Iu]();Vr=Zs(g,bn)||Zs(g,ma)}return Vr}function Fo(d){return(hl===null||d===!1)&&(hl=Da()&&!!Jr().sendBeacon),hl}function zr(d,g){if(d)for(var S=0;S<d[vt];S++){var D=d[S];if(D[Nm]&&D[Nm]===g)return D}return{}}function Uo(d){var g=ua();return g&&d?zr(g.querySelectorAll("meta"),d).content:null}function vd(d){var g,S=Er();if(S){var D=S.getEntriesByType("navigation")||[];g=zr((D[vt]>0?D[0]:{}).serverTiming,d).description}return g}var jo=4294967296,Zn=4294967295,bo=123456789,hs=987654321,$i=!1,ea=bo,pc=hs;function gl(d){d<0&&(d>>>=0),ea=bo+d&Zn,pc=hs-d&Zn,$i=!0}function hd(){try{var d=vn()&2147483647;gl((Math.random()*jo^d)+d)}catch{}}function Qs(d){return d>0?Math.floor(Yo()/Zn*(d+1))>>>0:0}function Yo(d){var g=0,S=Mu()||Xa();return S&&S.getRandomValues&&(g=S.getRandomValues(new Uint32Array(1))[0]&Zn),g===0&&Xr()&&($i||hd(),g=$o()&Zn),g===0&&(g=Math.floor(jo*Math.random()|0)),d||(g>>>=0),g}function $o(d){pc=36969*(pc&65535)+(pc>>16)&Zn,ea=18e3*(ea&65535)+(ea>>16)&Zn;var g=(pc<<16)+(ea&65535)>>>0&Zn|0;return d||(g>>>=0),g}function _l(d){d===void 0&&(d=22);for(var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S=Yo()>>>0,D=0,j=Rn;j[vt]<d;)D++,j+=g.charAt(S&63),S>>>=6,D===5&&(S=(Yo()<<2&4294967295|S&3)>>>0,D=0);return j}var Bo="3.3.5",ii="."+_l(6),gd=0;function yl(d){return d[Pa]===1||d[Pa]===9||!+d[Pa]}function eu(d,g){var S=g[d.id];if(!S){S={};try{yl(g)&&Ci(g,d.id,{e:!1,v:S})}catch{}}return S}function La(d,g){return g===void 0&&(g=!1),Au(d+gd+++(g?"."+Bo:Rn)+ii)}function gs(d){var g={id:La("_aiData-"+(d||Rn)+"."+Bo),accept:function(S){return yl(S)},get:function(S,D,j,Z){var X=S[g.id];return X?X[Au(D)]:(Z&&(X=eu(g,S),X[Au(D)]=j),j)},kill:function(S,D){if(S&&S[D])try{delete S[D]}catch{}}};return g}function tu(d){return d&&Vt(d)&&(d.isVal||d.fb||ot(d,"v")||ot(d,"mrg")||ot(d,"ref")||d.set)}function Qa(d,g,S){var D,j=S.dfVal||_n;if(g&&S.fb){var Z=S.fb;wt(Z)||(Z=[Z]);for(var X=0;X<Z[vt];X++){var oe=Z[X],ve=g[oe];if(j(ve)?D=ve:d&&(ve=d.cfg[oe],j(ve)&&(D=ve),d.set(d.cfg,Pr(oe),ve)),j(D))break}}return!j(D)&&j(S.v)&&(D=S.v),D}function mc(d,g,S){var D=S;if(S&&tu(S)&&(D=Qa(d,g,S)),D){tu(D)&&(D=mc(d,g,D));var j;wt(D)?(j=[],j[vt]=D[vt]):fo(D)&&(j={}),j&&(Xt(D,function(Z,X){X&&tu(X)&&(X=mc(d,g,X)),j[Z]=X}),D=j)}return D}function Lu(d,g,S,D){var j,Z,X,oe=D,ve,ye,et,Ut;tu(oe)?(j=oe.isVal,Z=oe.set,et=oe[Oi],Ut=oe[Ga],ve=oe.mrg,ye=oe.ref,!ye&&ct(ye)&&(ye=!!ve),X=Qa(d,g,oe)):X=D,Ut&&d[Ga](g,S);var or,dr=!0,dt=g[S];(dt||!Ke(dt))&&(or=dt,dr=!1,j&&or!==X&&!j(or)&&(or=X,dr=!0),Z&&(or=Z(or,X,g),dr=or===X)),dr?X?or=mc(d,g,X):or=X:(fo(or)||wt(X))&&ve&&X&&(fo(X)||wt(X))&&Xt(X,function(sr,Bt){Lu(d,or,sr,Bt)}),d.set(g,S,or),ye&&d.ref(g,S),et&&d[Oi](g,S)}var ki=ca("[[ai_dynCfg_1]]"),Fu=ca("[[ai_blkDynCfg_1]]"),ru=ca("[[ai_frcDynCfg_1]]");function eo(d){if(d){var g;if(wt(d)?(g=[],g[vt]=d[vt]):fo(d)&&(g={}),g)return Xt(d,function(S,D){g[S]=eo(D)}),g}return d}function bl(d){if(d){var g=d[ki]||d;if(g.cfg&&(g.cfg===d||g.cfg[ki]===g))return g}return null}function wn(d){if(d&&(fo(d)||wt(d)))try{d[Fu]=!0}catch{}return d}function yi(d,g,S){var D=!1;return S&&!d[g.blkVal]&&(D=S[ru],!D&&!S[Fu]&&(D=fo(S)||wt(S))),D}function to(d){Qe("InvalidAccess:"+d)}var wl=["push","pop","shift","unshift","splice"],_s=function(d,g,S,D){d&&d[vp](3,108,"".concat(S," [").concat(g,"] failed - ")+Dt(D))};function Np(d,g,S){wt(g)&&ci(wl,function(D){var j=g[D];g[D]=function(){for(var Z=[],X=0;X<arguments.length;X++)Z[X]=arguments[X];var oe=j[gp](this,Z);return va(d,g,S,"Patching"),oe}})}function Fa(d,g){var S=ut(d,g);return S&&S.get}function vc(d,g,S,D){var j={n:S,h:[],trk:function(ye){ye&&ye.fn&&(sl(j.h,ye)===-1&&j.h[Va](ye),d.trk(ye,j))},clr:function(ye){var et=sl(j.h,ye);et!==-1&&j.h[da](et,1)}},Z=!0,X=!1;function oe(){Z&&(X=X||yi(oe,d,D),D&&!D[ki]&&X&&(D=va(d,D,S,"Converting")),Z=!1);var ye=d.act;return ye&&j.trk(ye),D}oe[d.prop]={chng:function(){d.add(j)}};function ve(ye){if(D!==ye){oe[d.ro]&&!d.upd&&to("["+S+"] is read-only:"+Dt(g)),Z&&(X=X||yi(oe,d,D),Z=!1);var et=X&&oe[d.rf];if(X)if(et){Xt(D,function(or){D[or]=ye?ye[or]:_o});try{Xt(ye,function(or,dr){Bi(d,D,or,dr)}),ye=D}catch(or){_s((d.hdlr||{})[Aa],S,"Assigning",or),X=!1}}else D&&D[ki]&&Xt(D,function(or){var dr=Fa(D,or);if(dr){var dt=dr[d.prop];dt&&dt.chng()}});if(ye!==D){var Ut=ye&&yi(oe,d,ye);!et&&Ut&&(ye=va(d,ye,S,"Converting")),D=ye,X=Ut}d.add(j)}}Ci(g,j.n,{g:oe,s:ve})}function Bi(d,g,S,D){if(g){var j=Fa(g,S),Z=j&&!!j[d.prop];Z?g[S]=D:vc(d,g,S,D)}return g}function _d(d,g,S,D){if(g){var j=Fa(g,S),Z=j&&!!j[d.prop],X=D&&D[0],oe=D&&D[1],ve=D&&D[2];if(!Z){if(ve)try{wn(g)}catch(ye){_s((d.hdlr||{})[Aa],S,"Blocking",ye)}try{Bi(d,g,S,g[S]),j=Fa(g,S)}catch(ye){_s((d.hdlr||{})[Aa],S,"State",ye)}}X&&(j[d.rf]=X),oe&&(j[d.ro]=oe),ve&&(j[d.blkVal]=!0)}return g}function va(d,g,S,D){try{Xt(g,function(j,Z){Bi(d,g,j,Z)}),g[ki]||(lr(g,ki,{get:function(){return d[gh]}}),Np(d,g,S))}catch(j){_s((d.hdlr||{})[Aa],S,D,j)}return g}var ys="[[ai_",bs="]]";function Cp(d){var g,S=Tu(ys+"get"+d.uid+bs),D=Tu(ys+"ro"+d.uid+bs),j=Tu(ys+"rf"+d.uid+bs),Z=Tu(ys+"blkVal"+d.uid+bs),X=Tu(ys+"dtl"+d.uid+bs),oe=null,ve=null,ye;function et(dt,sr){var Bt=ye.act;try{ye.act=dt,dt&&dt[X]&&(ci(dt[X],function(kr){kr.clr(dt)}),dt[X]=[]),sr({cfg:d.cfg,set:d.set.bind(d),setDf:d[hp].bind(d),ref:d.ref.bind(d),rdOnly:d[Oi].bind(d)})}catch(kr){var Or=d[Aa];throw Or&&Or[vp](1,107,Dt(kr)),kr}finally{ye.act=Bt||null}}function Ut(){if(oe){var dt=oe;oe=null,ve&&ve[Sv](),ve=null;var sr=[];if(ci(dt,function(Bt){if(Bt&&(Bt[X]&&(ci(Bt[X],function(Or){Or.clr(Bt)}),Bt[X]=null),Bt.fn))try{et(Bt,Bt.fn)}catch(Or){sr[Va](Or)}}),oe)try{Ut()}catch(Bt){sr[Va](Bt)}sr[vt]>0&&Dm("Watcher error(s): ",sr)}}function or(dt){if(dt&&dt.h[vt]>0){oe||(oe=[]),ve||(ve=Ha(function(){ve=null,Ut()},0));for(var sr=0;sr<dt.h[vt];sr++){var Bt=dt.h[sr];Bt&&sl(oe,Bt)===-1&&oe[Va](Bt)}}}function dr(dt,sr){if(dt){var Bt=dt[X]=dt[X]||[];sl(Bt,sr)===-1&&Bt[Va](sr)}}return ye=(g={prop:S,ro:D,rf:j},g[Ga]=Z,g[gh]=d,g.add=or,g[Nu]=Ut,g.use=et,g.trk=dr,g),ye}function gf(d,g){var S={fn:g,rm:function(){S.fn=null,d=null,g=null}};return Ci(S,"toJSON",{v:function(){return"WatcherHandler"+(S.fn?"":"[X]")}}),d.use(S,g),S}function yd(d,g,S){var D,j=bl(g);if(j)return j;var Z=La("dyncfg",!0),X=g&&S!==!1?g:eo(g),oe;function ve(){oe[Nu]()}function ye(Or,kr,Pt){try{Or=Bi(oe,Or,kr,Pt)}catch(Mn){_s(d,kr,"Setting value",Mn)}return Or[kr]}function et(Or){return gf(oe,Or)}function Ut(Or,kr){oe.use(null,function(Pt){var Mn=oe.upd;try{ct(kr)||(oe.upd=kr),Or(Pt)}finally{oe.upd=Mn}})}function or(Or,kr){var Pt;return _d(oe,Or,kr,(Pt={},Pt[0]=!0,Pt))[kr]}function dr(Or,kr){var Pt;return _d(oe,Or,kr,(Pt={},Pt[1]=!0,Pt))[kr]}function dt(Or,kr){var Pt;return _d(oe,Or,kr,(Pt={},Pt[2]=!0,Pt))[kr]}function sr(Or,kr){return kr&&Xt(kr,function(Pt,Mn){Lu(Bt,Or,Pt,Mn)}),Or}var Bt=(D={uid:null,cfg:X},D[Aa]=d,D[Nu]=ve,D.set=ye,D[hp]=sr,D[Dn]=et,D.ref=or,D[Oi]=dr,D[Ga]=dt,D._block=Ut,D);return Ci(Bt,"uid",{c:!1,e:!1,w:!1,v:Z}),oe=Cp(Bt),va(oe,X,"config","Creating"),Bt}function _f(d,g){d?(d[Ws](g),d[vp](2,108,g)):to(g)}function qo(d,g,S,D){var j=yd(S,d||{},D);return g&&j[hp](j.cfg,g),j}function ha(d,g,S){var D=d[ki]||d;return D.cfg&&(D.cfg===d||D.cfg[ki]===D)?D[Dn](g):(_f(S,hf+Dt(d)),qo(d,null,S)[Dn](g))}var hc=null;function Iv(){var d=li("Microsoft");return d&&(hc=d.ApplicationInsights),hc}function Sl(d){var g=hc;return!g&&d.disableDbgExt!==!0&&(g=hc||Iv()),g?g.ChromeDbgExt:null}var El,ws="warnToConsole",yf="AI (Internal): ",_h="AI: ",xp="AITR_",bf={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Tl=(El={},El[0]=null,El[1]="errorToConsole",El[2]=ws,El[3]="debugToConsole",El);function Om(d){return d?'"'+d[xu](/\"/g,Rn)+'"':Rn}function Nv(d,g){var S=Lo();if(S){var D="log";S[d]&&(D=d),$t(S[D])&&S[D](g)}}var Il=function(){function d(g,S,D,j){D===void 0&&(D=!1);var Z=this;Z[_p]=g,Z[Xi]=(D?_h:yf)+g;var X=Rn;Xs()&&(X=yo().stringify(j));var oe=(S?" message:"+Om(S):Rn)+(j?" props:"+Om(X):Rn);Z[Xi]+=oe}return d.dataType="MessageData",d}();function Cv(d,g){return(d||{})[Aa]||new wf(g)}var wf=function(){function d(g){this.identifier="DiagnosticLogger",this.queue=[];var S=0,D={},j,Z,X,oe,ve;Po(d,this,function(ye){ve=Ut(g||{}),ye.consoleLoggingLevel=function(){return j},ye[vp]=function(dt,sr,Bt,Or,kr){kr===void 0&&(kr=!1);var Pt=new Il(sr,Bt,kr,Or);if(oe)throw Dt(Pt);var Mn=Tl[dt]||ws;if(ct(Pt[Xi]))dr("throw"+(dt===1?"Critical":"Warning"),Pt);else{if(kr){var Ff=+Pt[_p];!D[Ff]&&j>=dt&&(ye[Mn](Pt[Xi]),D[Ff]=!0)}else j>=dt&&ye[Mn](Pt[Xi]);et(dt,Pt)}},ye.debugToConsole=function(dt){Nv("debug",dt),dr("warning",dt)},ye[Ws]=function(dt){Nv("warn",dt),dr("warning",dt)},ye.errorToConsole=function(dt){Nv("error",dt),dr("error",dt)},ye.resetInternalMessageCount=function(){S=0,D={}},ye[xm]=et,ye[Cu]=function(dt){ve&&ve.rm(),ve=null};function et(dt,sr){if(!or()){var Bt=!0,Or=xp+sr[_p];if(D[Or]?Bt=!1:D[Or]=!0,Bt&&(dt<=Z&&(ye.queue[Va](sr),S++,dr(dt===1?"error":"warn",sr)),S===X)){var kr="Internal events throttle limit per PageView reached for this app.",Pt=new Il(23,kr,!1);ye.queue[Va](Pt),dt===1?ye.errorToConsole(kr):ye[Ws](kr)}}}function Ut(dt){return ha(qo(dt,bf,ye).cfg,function(sr){var Bt=sr.cfg;j=Bt[og],Z=Bt.loggingLevelTelemetry,X=Bt.maxMessageLimit,oe=Bt.enableDebug})}function or(){return S>=X}function dr(dt,sr){var Bt=Sl(g||{});Bt&&Bt[uf]&&Bt[uf](dt,sr)}})}return d.__ieDyn=1,d}();function Dp(d){return d||new wf}function wo(d,g,S,D,j,Z){Z===void 0&&(Z=!1),Dp(d)[vp](g,S,D,j,Z)}function km(){for(var d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],g=Rn,S,D=0;D<4;D++)S=Yo(),g+=d[S&15]+d[S>>4&15]+d[S>>8&15]+d[S>>12&15]+d[S>>16&15]+d[S>>20&15]+d[S>>24&15]+d[S>>28&15];var j=d[8+(Yo()&3)|0];return Na(g,0,8)+Na(g,9,4)+"4"+Na(g,13,3)+j+Na(g,16,3)+Na(g,19,12)}var yh=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,bd="00",Am="ff",Rp="00000000000000000000000000000000",gc="0000000000000000",wd=1;function Nl(d,g,S){return d&&d[vt]===g&&d!==S?!!d.match(/^[\da-f]*$/i):!1}function nu(d,g,S){return Nl(d,g)?d:S}function _c(d){(isNaN(d)||d<0||d>255)&&(d=1);for(var g=d.toString(16);g[vt]<2;)g="0"+g;return g}function xv(d,g,S,D){var j;return j={},j[Cm]=Nl(D,2,Am)?D:bd,j[Du]=yc(d)?d:km(),j[oc]=kp(g)?g:al(km(),16),j.traceFlags=S>=0&&S<=255?S:1,j}function Op(d,g){var S;if(!d||(wt(d)&&(d=d[0]||""),!d||!Pe(d)||d[vt]>8192))return null;if(d.indexOf(",")!==-1){var D=d[po](",");d=D[g>0&&D[vt]>g?g:0]}var j=yh.exec(fi(d));return!j||j[1]===Am||j[2]===Rp||j[3]===gc?null:(S={version:(j[1]||Rn)[Iu](),traceId:(j[2]||Rn)[Iu](),spanId:(j[3]||Rn)[Iu]()},S[cf]=parseInt(j[4],16),S)}function yc(d){return Nl(d,32,Rp)}function kp(d){return Nl(d,16,gc)}function iu(d){return!(!d||!Nl(d[Cm],2,Am)||!Nl(d[Du],32,Rp)||!Nl(d[oc],16,gc)||!Nl(_c(d[cf]),2))}function Qr(d){return iu(d)?(d[cf]&wd)===wd:!1}function Cl(d){if(d){var g=_c(d[cf]);Nl(g,2)||(g="01");var S=d[Cm]||bd;return S!=="00"&&S!=="ff"&&(S=bd),"".concat(S.toLowerCase(),"-").concat(nu(d.traceId,32,Rp).toLowerCase(),"-").concat(nu(d.spanId,16,gc).toLowerCase(),"-").concat(g.toLowerCase())}return""}function Ai(d){var g="traceparent",S=Op(Uo(g),d);return S||(S=Op(vd(g),d)),S}function Ap(d){var g=d.getElementsByTagName("script"),S=[];return ci(g,function(D){var j=D[ud]("src");if(j){var Z=D[ud]("crossorigin"),X=D.hasAttribute("async")===!0,oe=D.hasAttribute("defer")===!0,ve=D[ud]("referrerpolicy"),ye={url:j};Z&&(ye.crossOrigin=Z),X&&(ye.async=X),oe&&(ye.defer=oe),ve&&(ye.referrerPolicy=ve),S[Va](ye)}}),S}var Sd="on",bc="attachEvent",xl="addEventListener",ga="detachEvent",Ed="removeEventListener",bi="events";La("aiEvtPageHide"),La("aiEvtPageShow");var yr=/\.[\.]+/g,au=/[\.]+$/,Pn=1,Ss=gs("events"),Dl=/^([^.]*)(?:\.(.+)|)/;function Rl(d){return d&&d[xu]?d[xu](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Rn):d}function ou(d,g){var S;if(g){var D=Rn;wt(g)?(D=Rn,ci(g,function(Z){Z=Rl(Z),Z&&(Z[0]!=="."&&(Z="."+Z),D+=Z)})):D=Rl(g),D&&(D[0]!=="."&&(D="."+D),d=(d||Rn)+D)}var j=Dl.exec(d||Rn)||[];return S={},S[za]=j[1],S.ns=(j[2]||Rn).replace(yr,".").replace(au,Rn)[po](".").sort().join("."),S}function So(d,g,S){S===void 0&&(S=!0);var D=Ss.get(d,bi,{},S),j=D[g];return j||(j=D[g]=[]),j}function Sf(d,g,S,D){d&&g&&g[za]&&(d[Ed]?d[Ed](g[za],S,D):d[ga]&&d[ga](Sd+g[za],S))}function Pm(d,g,S,D){var j=!1;return d&&g&&g[za]&&S&&(d[xl]?(d[xl](g[za],S,D),j=!0):d[bc]&&(d[bc](Sd+g[za],S),j=!0)),j}function Ef(d,g,S,D){for(var j=g[vt];j--;){var Z=g[j];Z&&(!S.ns||S.ns===Z.evtName.ns)&&(!D||D(Z))&&(Sf(d,Z.evtName,Z[yp],Z.capture),g[da](j,1))}}function Mm(d,g,S){if(g[za])Ef(d,So(d,g[za]),g,S);else{var D=Ss.get(d,bi,{});Xt(D,function(j,Z){Ef(d,Z,g,S)}),Ui(D)[vt]===0&&Ss.kill(d,bi)}}function Tf(d,g){var S;return g?(wt(g)?S=[d].concat(g):S=[d,g],S=ou("xx",S).ns[po](".")):S=d,S}function wc(d,g,S,D,j){var Z;j===void 0&&(j=!1);var X=!1;if(d)try{var oe=ou(g,D);if(X=Pm(d,oe,S,j),X&&Ss.accept(d)){var ve=(Z={guid:Pn++,evtName:oe},Z[yp]=S,Z.capture=j,Z);So(d,oe.type)[Va](ve)}}catch{}return X}function Pp(d,g,S,D,j){if(j===void 0&&(j=!1),d)try{var Z=ou(g,D),X=!1;Mm(d,Z,function(oe){return Z.ns&&!S||oe[yp]===S?(X=!0,!0):!1}),X||Sf(d,Z,S,j)}catch{}}var di="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Sc="sampleRate",Pi="ProcessLegacy",Uu="http.method",Mp="https://dc.services.visualstudio.com",Td="/v2/track",Mi="not_specified",Id="iKey",Lp=mp({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),su="split",gt="length",Es="toLowerCase",Ts="ingestionendpoint",ro="toString",If="push",Ec="removeItem",Is="name",Eo="message",Tc="count",Nd="preTriggerDate",uu="disabled",Nf="interval",Ic="daysOfMonth",Cf="date",Fp="getUTCDate",Up="stringify",Lm="pathname",jp="match",ju="correlationHeaderExcludePatterns",Ol="extensionConfig",xf="exceptions",Ho="parsedStack",Ns="properties",Go="measurements",Vo="sizeInBytes",kl="typeName",Yp="severityLevel",Al="problemGroup",$p="isManual",Bp="hasFullStack",Cd="assembly",Cs="fileName",zo="line",Wo="method",xd="level",Df="aiDataContract",Nc="duration",qi="receivedResponse";function xs(d,g,S){var D=g[gt],j=Dd(d,g);if(j[gt]!==D){for(var Z=0,X=j;S[X]!==void 0;)Z++,X=os(j,0,147)+$u(Z);j=X}return j}function Dd(d,g){var S;return g&&(g=fi(Pr(g)),g[gt]>150&&(S=os(g,0,150),wo(d,2,57,"name is too long.  It has been truncated to 150 characters.",{name:g},!0))),S||g}function ta(d,g,S){S===void 0&&(S=1024);var D;return g&&(S=S||1024,g=fi(Pr(g)),g[gt]>S&&(D=os(g,0,S),wo(d,2,61,"string value is too long. It has been truncated to "+S+" characters.",{value:g},!0))),D||g}function lu(d,g){return Cc(d,g,2048,66)}function Rf(d,g){var S;return g&&g[gt]>32768&&(S=os(g,0,32768),wo(d,2,56,"message is too long, it has been truncated to 32768 characters.",{message:g},!0)),S||g}function Ds(d,g){var S;if(g){var D=""+g;D[gt]>32768&&(S=os(D,0,32768),wo(d,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:g},!0))}return S||g}function Li(d,g){if(g){var S={};Xt(g,function(D,j){if(Vt(j)&&Xs())try{j=yo()[Up](j)}catch(Z){wo(d,2,49,"custom property is not valid",{exception:Z},!0)}j=ta(d,j,8192),D=xs(d,D,S),S[D]=j}),g=S}return g}function Yu(d,g){if(g){var S={};Xt(g,function(D,j){D=xs(d,D,S),S[D]=j}),g=S}return g}function Rd(d,g){return g&&Cc(d,g,128,69)[ro]()}function Cc(d,g,S,D){var j;return g&&(g=fi(Pr(g)),g[gt]>S&&(j=os(g,0,S),wo(d,2,D,"input is too long, it has been truncated to "+S+" characters.",{data:g},!0))),j||g}function $u(d){var g="00"+d;return Na(g,g[gt]-3)}var Dv=ua()||{},Fm=0,Rv=[null,null,null,null,null];function xc(d){var g=Fm,S=Rv,D=S[g];return Dv.createElement?S[g]||(D=S[g]=Dv.createElement("a")):D={host:Od(d,!0)},D.href=d,g++,g>=S[gt]&&(g=0),Fm=g,D}function Of(d){var g,S=xc(d);return S&&(g=S.href),g}function Um(d){var g,S=xc(d);return S&&(g=S[Lm]),g}function bh(d,g){return d?d.toUpperCase()+" "+g:g}function Od(d,g){var S=qp(d,g)||"";if(S){var D=S[jp](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(D!=null&&D[gt]>3&&Pe(D[2])&&D[2][gt]>0)return D[2]+(D[3]||"")}return S}function qp(d,g){var S=null;if(d){var D=d[jp](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(D!=null&&D[gt]>2&&Pe(D[2])&&D[2][gt]>0&&(S=D[2]||"",g&&D[gt]>2)){var j=(D[1]||"")[Es](),Z=D[3]||"";(j==="http"&&Z===":80"||j==="https"&&Z===":443")&&(Z=""),S+=Z}}return S}var Dc=[Mp+Td,"https://breeze.aimon.applicationinsights.io"+Td,"https://dc-int.services.visualstudio.com"+Td],Bu="cid-v1:";function Hp(d){return sl(Dc,d[Es]())!==-1}function Rs(d){Bu=d}function kd(){return Bu}function kf(d,g,S){if(!g||d&&d.disableCorrelationHeaders)return!1;if(d&&d[ju]){for(var D=0;D<d.correlationHeaderExcludePatterns[gt];D++)if(d[ju][D].test(g))return!1}var j=xc(g).host[Es]();if(j&&(Zi(j,":443")!==-1||Zi(j,":80")!==-1)&&(j=(qp(g,!0)||"")[Es]()),(!d||!d.enableCorsCorrelation)&&j&&j!==S)return!1;var Z=d&&d.correlationHeaderDomains;if(Z){var X;if(ci(Z,function(ye){var et=new RegExp(ye.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));X=X||et.test(j)}),!X)return!1}var oe=d&&d.correlationHeaderExcludedDomains;if(!oe||oe[gt]===0)return!0;for(var D=0;D<oe[gt];D++){var ve=new RegExp(oe[D].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(ve.test(j))return!1}return j&&j[gt]>0}function Os(d){if(d){var g=Pl(d,Lp[1]);if(g&&g!==Bu)return g}}function Pl(d,g){if(d)for(var S=d[su](","),D=0;D<S[gt];++D){var j=S[D][su]("=");if(j[gt]===2&&j[0]===g)return j[1]}}function Ov(d,g,S,D){var j,Z=D,X=D;if(g&&g[gt]>0){var oe=xc(g);if(j=oe.host,!Z)if(oe[Lm]!=null){var ve=oe.pathname[gt]===0?"/":oe[Lm];ve.charAt(0)!=="/"&&(ve="/"+ve),X=oe[Lm],Z=ta(d,S?S+" "+ve:ve)}else Z=ta(d,g)}else j=D,Z=D;return{target:j,name:Z,data:X}}function Rc(){var d=Er();if(d&&d.now&&d.timing){var g=d.now()+d.timing.navigationStart;if(g>0)return g}return vn()}function wh(d,g){var S=null;return d!==0&&g!==0&&!Ke(d)&&!Ke(g)&&(S=g-d),S}function kv(d,g){var S=d||{};return{getName:function(){return S[Is]},setName:function(D){g&&g.setName(D),S[Is]=D},getTraceId:function(){return S.traceID},setTraceId:function(D){g&&g.setTraceId(D),yc(D)&&(S.traceID=D)},getSpanId:function(){return S.parentID},setSpanId:function(D){g&&g.setSpanId(D),kp(D)&&(S.parentID=D)},getTraceFlags:function(){return S.traceFlags},setTraceFlags:function(D){g&&g.setTraceFlags(D),S.traceFlags=D}}}var Af=sf({LocalStorage:0,SessionStorage:1}),jm=sf({AI:0,AI_AND_W3C:1,W3C:2}),Av=sf({Normal:1,Critical:2}),qu=void 0,To=void 0,cu="";function Hu(){return Ml()?Oc(Af.LocalStorage):null}function Oc(d){try{if(Ke(zs()))return null;var g=new Date()[ro](),S=li(d===Af.LocalStorage?"localStorage":"sessionStorage"),D=cu+g;S.setItem(D,g);var j=S.getItem(D)!==g;if(S[Ec](D),!j)return S}catch{}return null}function kc(){return Vp()?Oc(Af.SessionStorage):null}function Ad(){qu=!1,To=!1}function Pf(d){cu=d||""}function Ko(){qu=Ml(!0),To=Vp(!0)}function Ml(d){return(d||qu===void 0)&&(qu=!!Oc(Af.LocalStorage)),qu}function Pv(d,g){var S=Hu();if(S!==null)try{return S.getItem(g)}catch(D){qu=!1,wo(d,2,1,"Browser failed read of local storage. "+Mo(D),{exception:Dt(D)})}return null}function Mv(d,g,S){var D=Hu();if(D!==null)try{return D.setItem(g,S),!0}catch(j){qu=!1,wo(d,2,3,"Browser failed write to local storage. "+Mo(j),{exception:Dt(j)})}return!1}function Gp(d,g){var S=Hu();if(S!==null)try{return S[Ec](g),!0}catch(D){qu=!1,wo(d,2,5,"Browser failed removal of local storage item. "+Mo(D),{exception:Dt(D)})}return!1}function Vp(d){return(d||To===void 0)&&(To=!!Oc(Af.SessionStorage)),To}function Jo(){var d=[];return Vp()&&Xt(li("sessionStorage"),function(g){d[If](g)}),d}function Gu(d,g){var S=kc();if(S!==null)try{return S.getItem(g)}catch(D){To=!1,wo(d,2,2,"Browser failed read of session storage. "+Mo(D),{exception:Dt(D)})}return null}function Ac(d,g,S){var D=kc();if(D!==null)try{return D.setItem(g,S),!0}catch(j){To=!1,wo(d,2,4,"Browser failed write to session storage. "+Mo(j),{exception:Dt(j)})}return!1}function Lv(d,g){var S=kc();if(S!==null)try{return S[Ec](g),!0}catch(D){To=!1,wo(d,2,6,"Browser failed removal of session storage item. "+Mo(D),{exception:Dt(D)})}return!1}var zp="appInsightsThrottle",Fv=function(){function d(g,S){var D=this,j,Z,X,oe,ve,ye,et,Ut=!1,or=!1;dt(),D._getDbgPlgTargets=function(){return[et]},D.getConfig=function(){return X},D.canThrottle=function(Fe){var xt=Gd(Fe),zt=sr(Fe);return kr(zt,j,xt)},D.isTriggered=function(Fe){return em(Fe)},D.isReady=function(){return Ut},D.flush=function(Fe){try{var xt=Hv(Fe);if(xt&&xt[gt]>0){var zt=xt.slice(0);return et[Fe]=[],ci(zt,function(en){dr(en.msgID,en[Eo],en.severity,!1)}),!0}}catch{}return!1},D.flushAll=function(){try{if(et){var Fe=!0;return Xt(et,function(xt){var zt=D.flush(parseInt(xt));Fe=Fe&&zt}),Fe}}catch{}return!1},D.onReadyState=function(Fe,xt){return xt===void 0&&(xt=!0),Ut=Ke(Fe)?!0:Fe,Ut&&xt?D.flushAll():null},D.sendMessage=function(Fe,xt,zt){return dr(Fe,xt,zt,!0)};function dr(Fe,xt,zt,en){if(Ut){var hn=Hd(Fe);if(!hn)return;var En=sr(Fe),wi=Gd(Fe),Ju=kr(En,j,wi),Fs=!1,Zu=0,qc=em(Fe);try{Ju&&!qc?(Zu=Math.min(En.limit.maxSendNumber,wi[Tc]+1),wi[Tc]=0,Fs=!0,ve[Fe]=!0,wi[Nd]=new Date):(ve[Fe]=Ju,wi[Tc]+=1);var Gv=Pt(Fe);ao(Z,Gv,wi);for(var tm=0;tm<Zu;tm++)Qm(Fe,Z,xt,zt)}catch{}return{isThrottled:Fs,throttleNum:Zu}}else if(en){var Uf=Hv(Fe);Uf[If]({msgID:Fe,message:xt,severity:zt})}return null}function dt(){Z=Cv(g),ve={},oe={},et={},X={},Bt(109),ye=Ka(S)?S:"",g.addUnloadHook(ha(g.config,function(Fe){var xt=Fe.cfg;j=Ml();var zt=xt.throttleMgrCfg||{};Xt(zt,function(en,hn){Bt(parseInt(en),hn)})}))}function sr(Fe){return X[Fe]||X[109]}function Bt(Fe,xt){var zt,en;try{var hn=xt||{},En={};En[uu]=!!hn[uu];var wi=hn[Nf]||{};or=(wi==null?void 0:wi.daysOfMonth)&&(wi==null?void 0:wi.daysOfMonth[gt])>0,En[Nf]=Or(wi);var Ju={samplingRate:((zt=hn.limit)===null||zt===void 0?void 0:zt.samplingRate)||100,maxSendNumber:((en=hn.limit)===null||en===void 0?void 0:en.maxSendNumber)||1};En.limit=Ju,X[Fe]=En}catch{}}function Or(Fe){Fe=Fe||{};var xt=Fe==null?void 0:Fe.monthInterval,zt=Fe==null?void 0:Fe.dayInterval;return Ke(xt)&&Ke(zt)&&(Fe.monthInterval=3,or||(Fe[Ic]=[28],or=!0)),Fe={monthInterval:Fe==null?void 0:Fe.monthInterval,dayInterval:Fe==null?void 0:Fe.dayInterval,daysOfMonth:Fe==null?void 0:Fe.daysOfMonth},Fe}function kr(Fe,xt,zt){if(Fe&&!Fe[uu]&&xt&&Ka(zt)){var en=Ln(),hn=zt[Cf],En=Fe[Nf],wi=1;if(En!=null&&En.monthInterval){var Ju=(en.getUTCFullYear()-hn.getUTCFullYear())*12+en.getUTCMonth()-hn.getUTCMonth();wi=qd(En.monthInterval,0,Ju)}var Fs=1;if(or)Fs=sl(En[Ic],en[Fp]());else if(En!=null&&En.dayInterval){var Zu=Math.floor((en.getTime()-hn.getTime())/864e5);Fs=qd(En.dayInterval,0,Zu)}return wi>=0&&Fs>=0}return!1}function Pt(Fe,xt){var zt=Ka(xt)?xt:"";return Fe?zp+zt+"-"+Fe:null}function Mn(Fe){try{if(Fe){var xt=new Date;return Fe.getUTCFullYear()===xt.getUTCFullYear()&&Fe.getUTCMonth()===xt.getUTCMonth()&&Fe[Fp]()===xt[Fp]()}}catch{}return!1}function Ff(Fe,xt,zt){try{var en={date:Ln(),count:0};if(Fe){var hn=JSON.parse(Fe),En={date:Ln(hn[Cf])||en[Cf],count:hn[Tc]||en[Tc],preTriggerDate:hn.preTriggerDate?Ln(hn[Nd]):void 0};return En}else return ao(xt,zt,en),en}catch{}return null}function Ln(Fe){try{if(Fe){var xt=new Date(Fe);if(!isNaN(xt.getDate()))return xt}else return new Date}catch{}return null}function ao(Fe,xt,zt){try{return Mv(Fe,xt,fi(JSON[Up](zt)))}catch{}return!1}function qd(Fe,xt,zt){return Fe<=0?1:zt>=xt&&(zt-xt)%Fe==0?Math.floor((zt-xt)/Fe)+1:-1}function Qm(Fe,xt,zt,en){wo(xt,en||1,Fe,zt)}function Hd(Fe){try{var xt=sr(Fe);return Qs(1e6)<=xt.limit.samplingRate}catch{}return!1}function Gd(Fe){try{var xt=oe[Fe];if(!xt){var zt=Pt(Fe,ye);xt=Ff(Pv(Z,zt),Z,zt),oe[Fe]=xt}return oe[Fe]}catch{}return null}function em(Fe){var xt=ve[Fe];if(Ke(xt)){xt=!1;var zt=Gd(Fe);zt&&(xt=Mn(zt[Nd])),ve[Fe]=xt}return ve[Fe]}function Hv(Fe){return et=et||{},Ke(et[Fe])&&(et[Fe]=[]),et[Fe]}}return d}(),Ym=";",Wp="=";function Ll(d){if(!d)return{};var g=d[su](Ym),S=Rr(g,function(j,Z){var X=Z[su](Wp);if(X[gt]===2){var oe=X[0][Es](),ve=X[1];j[oe]=ve}return j},{});if(Ui(S)[gt]>0){if(S.endpointsuffix){var D=S.location?S.location+".":"";S[Ts]=S[Ts]||"https://"+D+"dc."+S.endpointsuffix}S[Ts]=S[Ts]||Mp,cs(S[Ts],"/")&&(S[Ts]=S[Ts].slice(0,-1))}return S}var Io={parse:Ll},Pd=function(){function d(g,S,D){var j=this,Z=this;Z.ver=1,Z.sampleRate=100,Z.tags={},Z[Is]=ta(g,D)||Mi,Z.data=S,Z.time=cr(new Date),Z[Df]={time:1,iKey:1,name:1,sampleRate:function(){return j.sampleRate===100?4:1},tags:1,data:1}}return d}(),Pc=function(){function d(g,S,D,j){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var Z=this;Z.ver=2,Z[Is]=ta(g,S)||Mi,Z[Ns]=Li(g,D),Z[Go]=Yu(g,j)}return d.envelopeType="Microsoft.ApplicationInsights.{0}.Event",d.dataType="EventData",d}(),Zo=58,sg=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Kp=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,Sh=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,ug=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,Hi=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,Md=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,Ld=/([^\(\s\n]+):([0-9]+)$/,Uv="<no_method>",Mc="error",_a="stack",No="stackDetails",Fd="errorSrc",Vu="message",Fl="description",ks=[{re:Kp,len:5,m:1,fn:2,ln:3,col:4},{chk:jv,pre:$m,re:Sh,len:4,m:1,fn:2,ln:3},{re:ug,len:3,m:1,fn:2,hdl:du},{re:Hi,len:2,fn:1,hdl:du}];function $m(d){return d.replace(/(\(anonymous\))/,"<anonymous>")}function jv(d){return Zi(d,"[native")<0}function _t(d,g){var S=d;return S&&!Pe(S)&&(JSON&&JSON[Up]?(S=JSON[Up](d),g&&(!S||S==="{}")&&($t(d[ro])?S=d[ro]():S=""+d)):S=""+d+" - (Missing JSON.stringify)"),S||""}function zu(d,g){var S=d;return d&&(S&&!Pe(S)&&(S=d[Vu]||d[Fl]||S),S&&!Pe(S)&&(S=_t(S,!0)),d.filename&&(S=S+" @"+(d.filename||"")+":"+(d.lineno||"?")+":"+(d.colno||"?"))),g&&g!=="String"&&g!=="Object"&&g!=="Error"&&Zi(S||"",g)===-1&&(S=g+": "+S),S||""}function fu(d){try{if(Vt(d))return"hasFullStack"in d&&"typeName"in d}catch{}return!1}function Mf(d){try{if(Vt(d))return"ver"in d&&"exceptions"in d&&"properties"in d}catch{}return!1}function Yv(d){return d&&d.src&&Pe(d.src)&&d.obj&&wt(d.obj)}function Ul(d){var g=d||"";Pe(g)||(Pe(g[_a])?g=g[_a]:g=""+g);var S=g[su](`
`);return{src:g,obj:S}}function Ud(d){for(var g=[],S=d[su](`
`),D=0;D<S[gt];D++){var j=S[D];S[D+1]&&(j+="@"+S[D+1],D++),g[If](j)}return{src:d,obj:g}}function As(d){var g=null;if(d)try{if(d[_a])g=Ul(d[_a]);else if(d[Mc]&&d[Mc][_a])g=Ul(d[Mc][_a]);else if(d.exception&&d.exception[_a])g=Ul(d.exception[_a]);else if(Yv(d))g=d;else if(Yv(d[No]))g=d[No];else if(xn()&&xn().opera&&d[Vu])g=Ud(d[Eo]);else if(d.reason&&d.reason[_a])g=Ul(d.reason[_a]);else if(Pe(d))g=Ul(d);else{var S=d[Vu]||d[Fl]||"";Pe(d[Fd])&&(S&&(S+=`
`),S+=" from "+d[Fd]),S&&(g=Ul(S))}}catch(D){g=Ul(D)}return g||{src:"",obj:null}}function $v(d){var g="";return d&&(d.obj?g=d.obj.join(`
`):g=d.src||""),g}function Jp(d){var g,S=d.obj;if(S&&S[gt]>0){g=[];var D=0,j=!1,Z=0;ci(S,function(sr){if(j||Zp(sr)){var Bt=Pr(sr);j=!0;var Or=Vm(Bt,D);Or&&(Z+=Or[Vo],g[If](Or),D++)}});var X=32*1024;if(Z>X)for(var oe=0,ve=g[gt]-1,ye=0,et=oe,Ut=ve;oe<ve;){var or=g[oe][Vo],dr=g[ve][Vo];if(ye+=or+dr,ye>X){var dt=Ut-et+1;g.splice(et,dt);break}et=oe,Ut=ve,oe++,ve--}}return g}function Lc(d){var g="";if(d&&(g=d.typeName||d[Is]||"",!g))try{var S=/function (.{1,200})\(/,D=S.exec(d.constructor[ro]());g=D&&D[gt]>1?D[1]:""}catch{}return g}function jl(d){if(d)try{if(!Pe(d)){var g=Lc(d),S=_t(d,!1);return(!S||S==="{}")&&(d[Mc]&&(d=d[Mc],g=Lc(d)),S=_t(d,!0)),Zi(S,g)!==0&&g!=="String"?g+":"+S:S}}catch{}return""+(d||"")}var Yl=function(){function d(g,S,D,j,Z,X){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var oe=this;oe.ver=2,Mf(S)?(oe[xf]=S[xf]||[],oe[Ns]=S[Ns],oe[Go]=S[Go],S[Yp]&&(oe[Yp]=S[Yp]),S.id&&(oe.id=S.id,S[Ns].id=S.id),S[Al]&&(oe[Al]=S[Al]),Ke(S[$p])||(oe[$p]=S[$p])):(D||(D={}),X&&(D.id=X),oe[xf]=[Ps(g,S,D)],oe[Ns]=Li(g,D),oe[Go]=Yu(g,j),Z&&(oe[Yp]=Z),X&&(oe.id=X))}return d.CreateAutoException=function(g,S,D,j,Z,X,oe,ve){var ye,et=Lc(Z||X||g);return ye={},ye[Eo]=zu(g,et),ye.url=S,ye.lineNumber=D,ye.columnNumber=j,ye.error=jl(Z||X||g),ye.evt=jl(X||g),ye[kl]=et,ye.stackDetails=As(oe||Z||X),ye.errorSrc=ve,ye},d.CreateFromInterface=function(g,S,D,j){var Z=S[xf]&&Ra(S[xf],function(oe){return qm(g,oe)}),X=new d(g,sc(sc({},S),{exceptions:Z}),D,j);return X},d.prototype.toInterface=function(){var g,S=this,D=S.exceptions,j=S.properties,Z=S.measurements,X=S.severityLevel,oe=S.problemGroup,ve=S.id,ye=S.isManual,et=D instanceof Array&&Ra(D,function(Ut){return Ut.toInterface()})||void 0;return g={ver:"4.0"},g[xf]=et,g.severityLevel=X,g.properties=j,g.measurements=Z,g.problemGroup=oe,g.id=ve,g.isManual=ye,g},d.CreateSimpleException=function(g,S,D,j,Z,X){var oe;return{exceptions:[(oe={},oe[Bp]=!0,oe.message=g,oe.stack=Z,oe.typeName=S,oe)]}},d.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",d.dataType="ExceptionData",d.formatError=jl,d}(),Bm=Lr({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function rn(){var d,g=this,S=wt(g[Ho])&&Ra(g[Ho],function(j){return Fc(j)}),D=(d={id:g.id,outerId:g.outerId,typeName:g[kl],message:g[Eo],hasFullStack:g[Bp],stack:g[_a]},d[Ho]=S||void 0,d);return D}function Ps(d,g,S){var D,j,Z,X,oe,ve,ye,et;if(fu(g))X=g[kl],oe=g[Eo],ye=g[_a],et=g[Ho]||[],ve=g[Bp];else{var Ut=g,or=Ut&&Ut.evt;mn(Ut)||(Ut=Ut[Mc]||or||Ut),X=ta(d,Lc(Ut))||Mi,oe=Rf(d,zu(g||Ut,X))||Mi;var dr=g[No]||As(g);et=Jp(dr),wt(et)&&Ra(et,function(dt){dt[Cd]=ta(d,dt[Cd]),dt[Cs]=ta(d,dt[Cs])}),ye=Ds(d,$v(dr)),ve=wt(et)&&et[gt]>0,S&&(S[kl]=S[kl]||X)}return D={},D[Df]=Bm,D.id=j,D.outerId=Z,D[kl]=X,D[Eo]=oe,D[Bp]=ve,D.stack=ye,D[Ho]=et,D.toInterface=rn,D}function qm(d,g){var S=wt(g[Ho])&&Ra(g[Ho],function(j){return jd(j)})||g[Ho],D=Ps(d,sc(sc({},g),{parsedStack:S}));return D}function Hm(d,g){var S=g[jp](Md);if(S&&S[gt]>=4)d[Cs]=S[1],d[zo]=parseInt(S[2]);else{var D=g[jp](Ld);D&&D[gt]>=3?(d[Cs]=D[1],d[zo]=parseInt(D[2])):d[Cs]=g}}function du(d,g,S){var D=d[Cs];g.fn&&S&&S[gt]>g.fn&&(g.ln&&S[gt]>g.ln?(D=fi(S[g.fn]||""),d[zo]=parseInt(fi(S[g.ln]||""))||0):D=fi(S[g.fn]||"")),D&&Hm(d,D)}function Zp(d){var g=!1;if(d&&Pe(d)){var S=fi(d);S&&(g=sg.test(S))}return g}var Gm=Lr({level:1,method:1,assembly:0,fileName:0,line:0});function Vm(d,g){var S,D;if(d&&Pe(d)&&fi(d)){D=(S={},S[Df]=Gm,S[xd]=g,S[Cd]=fi(d),S[Wo]=Uv,S.fileName="",S.line=0,S[Vo]=0,S);for(var j=0;j<ks[gt];){var Z=ks[j];if(Z.chk&&!Z.chk(d))break;Z.pre&&(d=Z.pre(d));var X=d[jp](Z.re);if(X&&X[gt]>=Z.len){Z.m&&(D[Wo]=fi(X[Z.m]||Uv)),Z.hdl?Z.hdl(D,Z,X):Z.fn&&(Z.ln?(D[Cs]=fi(X[Z.fn]||""),D[zo]=parseInt(fi(X[Z.ln]||""))||0):Hm(D,X[Z.fn]||""));break}j++}}return Yd(D)}function jd(d){var g,S=(g={},g[Df]=Gm,g.level=d[xd],g.method=d[Wo],g.assembly=d[Cd],g.fileName=d[Cs],g.line=d[zo],g[Vo]=0,g);return Yd(S)}function Yd(d){var g=Zo;return d&&(g+=d.method[gt],g+=d.assembly[gt],g+=d.fileName[gt],g+=d.level.toString()[gt],g+=d.line.toString()[gt],d[Vo]=g),d}function Fc(d){return{level:d[xd],method:d[Wo],assembly:d[Cd],fileName:d[Cs],line:d[zo]}}var $l=function(){function d(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return d}(),Xp=function(){function d(g,S,D,j,Z,X,oe,ve,ye){this.aiDataContract={ver:1,metrics:1,properties:0};var et=this;et.ver=2;var Ut=new $l;Ut[Tc]=j>0?j:void 0,Ut.max=isNaN(X)||X===null?void 0:X,Ut.min=isNaN(Z)||Z===null?void 0:Z,Ut[Is]=ta(g,S)||Mi,Ut.value=D,Ut.stdDev=isNaN(oe)||oe===null?void 0:oe,et.metrics=[Ut],et[Ns]=Li(g,ve),et[Go]=Yu(g,ye)}return d.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",d.dataType="MetricData",d}(),Uc="";function zm(d,g){return g===void 0&&(g=!1),d==null?g:d.toString()[Es]()==="true"}function Co(d){(isNaN(d)||d<0)&&(d=0),d=Math.round(d);var g=Uc+d%1e3,S=Uc+Math.floor(d/1e3)%60,D=Uc+Math.floor(d/(1e3*60))%60,j=Uc+Math.floor(d/(1e3*60*60))%24,Z=Math.floor(d/(1e3*60*60*24));return g=g[gt]===1?"00"+g:g[gt]===2?"0"+g:g,S=S[gt]<2?"0"+S:S,D=D[gt]<2?"0"+D:D,j=j[gt]<2?"0"+j:j,(Z>0?Z+".":Uc)+j+":"+D+":"+S+"."+g}function Wm(d,g){var S=null;return ci(d,function(D){if(D.identifier===g)return S=D,-1}),S}function $d(d,g,S,D,j){return!j&&Pe(d)&&(d==="Script error."||d==="Script error")}var Bv=function(){function d(g,S,D,j,Z,X,oe){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var ve=this;ve.ver=2,ve.id=Rd(g,oe),ve.url=lu(g,D),ve[Is]=ta(g,S)||Mi,isNaN(j)||(ve[Nc]=Co(j)),ve[Ns]=Li(g,Z),ve[Go]=Yu(g,X)}return d.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",d.dataType="PageviewData",d}(),Ms=function(){function d(g,S,D,j,Z,X,oe,ve,ye,et,Ut,or){ye===void 0&&(ye="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var dr=this;dr.ver=2,dr.id=S,dr[Nc]=Co(Z),dr.success=X,dr.resultCode=oe+"",dr.type=ta(g,ye);var dt=Ov(g,D,ve,j);dr.data=lu(g,j)||dt.data,dr.target=ta(g,dt.target),et&&(dr.target="".concat(dr.target," | ").concat(et)),dr[Is]=ta(g,dt[Is]),dr[Ns]=Li(g,Ut),dr[Go]=Yu(g,or)}return d.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",d.dataType="RemoteDependencyData",d}(),Eh=function(){function d(g,S,D,j,Z){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var X=this;X.ver=2,S=S||Mi,X[Eo]=Rf(g,S),X[Ns]=Li(g,j),X[Go]=Yu(g,Z),D&&(X[Yp]=D)}return d.envelopeType="Microsoft.ApplicationInsights.{0}.Message",d.dataType="MessageData",d}(),Wu=function(){function d(g,S,D,j,Z,X,oe){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var ve=this;ve.ver=2,ve.url=lu(g,D),ve[Is]=ta(g,S)||Mi,ve[Ns]=Li(g,Z),ve[Go]=Yu(g,X),oe&&(ve.domProcessing=oe.domProcessing,ve[Nc]=oe[Nc],ve.networkConnect=oe.networkConnect,ve.perfTotal=oe.perfTotal,ve[qi]=oe[qi],ve.sentRequest=oe.sentRequest)}return d.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",d.dataType="PageviewPerformanceData",d}(),Km=function(){function d(g,S){this.aiDataContract={baseType:1,baseData:1},this.baseType=g,this.baseData=S}return d}(),jc=sf({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),qv=function(){function d(){}return d.getConfig=function(g,S,D,j){j===void 0&&(j=!1);var Z;return D&&g[Ol]&&g[Ol][D]&&!Ke(g[Ol][D][S])?Z=g[Ol][D][S]:Z=g[S],Ke(Z)?j:Z},d}();function Xo(d){var g="ai."+d+".";return function(S){return g+S}}var Ls=Xo("application"),Hn=Xo("device"),Lf=Xo("location"),Yc=Xo("operation"),Bd=Xo("session"),fr=Xo("user"),no=Xo("cloud"),io=Xo("internal"),Fi=function(d){Ev(g,d);function g(){return d.call(this)||this}return g}(vs({applicationVersion:Ls("ver"),applicationBuild:Ls("build"),applicationTypeId:Ls("typeId"),applicationId:Ls("applicationId"),applicationLayer:Ls("layer"),deviceId:Hn("id"),deviceIp:Hn("ip"),deviceLanguage:Hn("language"),deviceLocale:Hn("locale"),deviceModel:Hn("model"),deviceFriendlyName:Hn("friendlyName"),deviceNetwork:Hn("network"),deviceNetworkName:Hn("networkName"),deviceOEMName:Hn("oemName"),deviceOS:Hn("os"),deviceOSVersion:Hn("osVersion"),deviceRoleInstance:Hn("roleInstance"),deviceRoleName:Hn("roleName"),deviceScreenResolution:Hn("screenResolution"),deviceType:Hn("type"),deviceMachineName:Hn("machineName"),deviceVMName:Hn("vmName"),deviceBrowser:Hn("browser"),deviceBrowserVersion:Hn("browserVersion"),locationIp:Lf("ip"),locationCountry:Lf("country"),locationProvince:Lf("province"),locationCity:Lf("city"),operationId:Yc("id"),operationName:Yc("name"),operationParentId:Yc("parentId"),operationRootId:Yc("rootId"),operationSyntheticSource:Yc("syntheticSource"),operationCorrelationVector:Yc("correlationVector"),sessionId:Bd("id"),sessionIsFirst:Bd("isFirst"),sessionIsNew:Bd("isNew"),userAccountAcquisitionDate:fr("accountAcquisitionDate"),userAccountId:fr("accountId"),userAgent:fr("userAgent"),userId:fr("id"),userStoreRegion:fr("storeRegion"),userAuthUserId:fr("authUserId"),userAnonymousUserAcquisitionDate:fr("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:fr("authUserAcquisitionDate"),cloudName:no("name"),cloudRole:no("role"),cloudRoleVer:no("roleVer"),cloudRoleInstance:no("roleInstance"),cloudEnvironment:no("environment"),cloudLocation:no("location"),cloudDeploymentUnit:no("deploymentUnit"),internalNodeName:io("nodeName"),internalSdkVersion:io("sdkVersion"),internalAgentVersion:io("agentVersion"),internalSnippet:io("snippet"),internalSdkSrc:io("sdkSrc")}));function $c(d,g,S,D,j,Z){var X;S=ta(D,S)||Mi,(Ke(d)||Ke(g)||Ke(S))&&Mr("Input doesn't contain all required fields");var oe="";d[Id]&&(oe=d[Id],delete d[Id]);var ve=(X={},X[Is]=S,X.time=cr(new Date),X.iKey=oe,X.ext=Z||{},X.tags=[],X.data={},X.baseType=g,X.baseData=d,X);return Ke(j)||Xt(j,function(ye,et){ve.data[ye]=et}),ve}var Sn=function(){function d(){}return d.create=$c,d}(),Bc={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},pu=new Fi;function Qp(d){var g=null;if($t(Event))g=new Event(d);else{var S=ua();S&&S.createEvent&&(g=S.createEvent("Event"),g.initEvent(d,!0,!0))}return g}function mu(d,g){Pp(d,null,null,g)}function Jm(d){var g=ua(),S=Jr(),D=!1,j=[],Z=1;S&&!Ke(S.onLine)&&!S.onLine&&(Z=2);var X=0,oe=or(),ve=Tf(La("OfflineListener"),d);try{if(et(xn())&&(D=!0),g){var ye=g.body||g;ye.ononline&&et(ye)&&(D=!0)}}catch{D=!1}function et(Pt){var Mn=!1;return Pt&&(Mn=wc(Pt,"online",sr,ve),Mn&&wc(Pt,"offline",Bt,ve)),Mn}function Ut(){return oe}function or(){return!(X===2||Z===2)}function dr(){var Pt=or();oe!==Pt&&(oe=Pt,ci(j,function(Mn){var Ff={isOnline:oe,rState:Z,uState:X};try{Mn(Ff)}catch{}}))}function dt(Pt){X=Pt,dr()}function sr(){Z=1,dr()}function Bt(){Z=2,dr()}function Or(){var Pt=xn();if(Pt&&D){if(mu(Pt,ve),g){var Mn=g.body||g;ct(Mn.ononline)||mu(Mn,ve)}D=!1}}function kr(Pt){return j[If](Pt),{rm:function(){var Mn=j.indexOf(Pt);if(Mn>-1)return j.splice(Mn,1)}}}return{isOnline:Ut,isListening:function(){return D},unload:Or,addListener:kr,setOnlineState:dt}}var Ku="AppInsightsPropertiesPlugin",Zm="AppInsightsChannelPlugin",Xm="ApplicationInsightsAnalytics";t.AnalyticsPluginIdentifier=Xm,t.BreezeChannelIdentifier=Zm,t.ConfigurationManager=qv,t.ConnectionStringParser=Io,t.ContextTagKeys=Fi,t.CtxTagKeys=pu,t.DEFAULT_BREEZE_ENDPOINT=Mp,t.DEFAULT_BREEZE_PATH=Td,t.Data=Km,t.DisabledPropertyName=di,t.DistributedTracingModes=jm,t.Envelope=Pd,t.Event=Pc,t.EventPersistence=Av,t.Exception=Yl,t.Extensions=Bc,t.HttpMethod=Uu,t.Metric=Xp,t.PageView=Bv,t.PageViewPerformance=Wu,t.ProcessLegacy=Pi,t.PropertiesPluginIdentifier=Ku,t.RemoteDependencyData=Ms,t.RequestHeaders=Lp,t.SampleRate=Sc,t.SeverityLevel=jc,t.TelemetryItemCreator=Sn,t.ThrottleMgr=Fv,t.Trace=Eh,t.correlationIdCanIncludeCorrelationHeader=kf,t.correlationIdGetCorrelationContext=Os,t.correlationIdGetCorrelationContextValue=Pl,t.correlationIdGetPrefix=kd,t.correlationIdSetPrefix=Rs,t.createDistributedTraceContextFromTrace=kv,t.createDomEvent=Qp,t.createOfflineListener=Jm,t.createTelemetryItem=$c,t.createTraceParent=xv,t.dataSanitizeException=Ds,t.dataSanitizeId=Rd,t.dataSanitizeInput=Cc,t.dataSanitizeKey=Dd,t.dataSanitizeKeyAndAddUniqueness=xs,t.dataSanitizeMeasurements=Yu,t.dataSanitizeMessage=Rf,t.dataSanitizeProperties=Li,t.dataSanitizeString=ta,t.dataSanitizeUrl=lu,t.dateTimeUtilsDuration=wh,t.dateTimeUtilsNow=Rc,t.dsPadNumber=$u,t.findAllScripts=Ap,t.findW3cTraceParent=Ai,t.formatTraceParent=Cl,t.getExtensionByName=Wm,t.isBeaconApiSupported=Fo,t.isCrossOriginError=$d,t.isInternalApplicationInsightsEndpoint=Hp,t.isSampledFlag=Qr,t.isValidSpanId=kp,t.isValidTraceId=yc,t.isValidTraceParent=iu,t.msToTimeSpan=Co,t.parseConnectionString=Ll,t.parseTraceParent=Op,t.strNotSpecified=Mi,t.stringToBoolOrDefault=zm,t.urlGetAbsoluteUrl=Of,t.urlGetCompleteUrl=bh,t.urlGetPathName=Um,t.urlParseFullHost=qp,t.urlParseHost=Od,t.urlParseUrl=xc,t.utlCanUseLocalStorage=Ml,t.utlCanUseSessionStorage=Vp,t.utlDisableStorage=Ad,t.utlEnableStorage=Ko,t.utlGetLocalStorage=Pv,t.utlGetSessionStorage=Gu,t.utlGetSessionStorageKeys=Jo,t.utlRemoveSessionStorage=Lv,t.utlRemoveStorage=Gp,t.utlSetLocalStorage=Mv,t.utlSetSessionStorage=Ac,t.utlSetStoragePrefix=Pf})});var jw=ln(Y0=>{"use strict";Object.defineProperty(Y0,"__esModule",{value:!0});Y0.TelemetryUtil=void 0;var Uw=class t{static applyReplacements(e,r){for(let n of Object.keys(e))for(let i of r)i.lookup.test(n)&&(i.replacementString!==void 0?e[n]=i.replacementString:delete e[n])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.8"}}static getInstance(){return t._instance||(t._instance=new t),t._instance}};Y0.TelemetryUtil=Uw});var cI=ln(($0,lI)=>{(function(t,e){typeof $0=="object"&&typeof lI<"u"?e($0):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})($0,function(t){"use strict";function e(s,u){return s||u}function r(s,u){return s[u]}var n=void 0,i=null,a="",l="function",v="object",_="prototype",y="__proto__",C="undefined",U="constructor",W="Symbol",K="_polyfill",q="length",V="name",J="call",re="toString",_e=e(Object),Le=r(_e,_),ge=e(String),Ee=r(ge,_),Be=e(Math),We=e(Array),st=r(We,_),mt=r(st,"slice");function At(s,u){try{return{v:s.apply(this,u)}}catch(f){return{e:f}}}function Ur(s,u){var f=At(s);return f.e?u:f.v}var on;function kn(s){return function(u){return typeof u===s}}function ct(s){var u="[object "+s+"]";return function(f){return!!(f&&Dr(f)===u)}}function Dr(s){return Le[re].call(s)}function Ke(s){return typeof s===C||s===C}function _n(s){return!Vt(s)}function Pe(s){return s===i||Ke(s)}function $t(s){return s===i||!Vt(s)}function Vt(s){return!!s||s!==n}function wt(s){return!on&&(on=["string","number","boolean",C,"symbol","bigint"]),s!==v&&on.indexOf(s)!==-1}var mn=kn("string"),ut=kn(l);function ti(s){return!s&&Pe(s)?!1:!!s&&typeof s===v}var ot=r(We,"isArray"),Su=ct("Date"),Xt=kn("number"),$a=kn("boolean"),Kt=ct("Error");function lr(s){return!!(s&&s.then&&ut(s.then))}function Ci(s){return!(!s||Ur(function(){return!(s&&0+s)},!s))}var pr=r(_e,"getOwnPropertyDescriptor");function xi(s,u){return!!s&&Le.hasOwnProperty[J](s,u)}var Pr=e(r(_e,"hasOwn"),qn);function qn(s,u){return xi(s,u)||!!pr(s,u)}function Dt(s,u,f){if(s&&ti(s)){for(var h in s)if(Pr(s,h)&&u[J](f||s,h,s[h])===-1)break}}var Mr={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Qe(s){var u={};if(u[Mr.c]=!0,u[Mr.e]=!0,s.l){u.get=function(){return s.l.v};var f=pr(s.l,"v");f&&f.set&&(u.set=function(h){s.l.v=h})}return Dt(s,function(h,E){u[Mr[h]]=_n(E)?u[Mr[h]]:E}),u}var An=r(_e,"defineProperty");function qr(s,u,f){return An(s,u,Qe(f))}function Kr(s,u,f,h,E){var x={};return Dt(s,function(A,F){Ia(x,A,u?F:A,E),Ia(x,F,f?F:A,E)}),h?h(x):x}function Ia(s,u,f,h){An(s,u,{value:f,enumerable:!0,writable:!!h})}var Ui=e(ge),Lr="[object Error]";function nr(s,u){var f=a,h=Le[re][J](s);h===Lr&&(s={stack:Ui(s.stack),message:Ui(s.message),name:Ui(s.name)});try{f=JSON.stringify(s,i,u?typeof u=="number"?u:4:n),f=(f?f.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||Ui(s)}catch(E){f=" - "+nr(E,u)}return h+": "+f}function _r(s){throw new Error(s)}function sn(s){throw new TypeError(s)}var td=r(_e,"freeze");function ri(s){return s}function rd(s){return s[y]||i}var Eu=r(_e,"assign"),Cn=r(_e,"keys");function as(s){return td&&Dt(s,function(u,f){(ot(f)||ti(f))&&as(f)}),Jt(s)}var Jt=e(td,ri),ji=e(r(_e,"getPrototypeOf"),rd);function Ba(s){return Kr(s,1,0,Jt)}function os(s){return Kr(s,0,0,Jt)}function Na(s){var u={};return Dt(s,function(f,h){Ia(u,f,h[1]),Ia(u,h[0],h[1])}),Jt(u)}function nd(s){return Na(s)}var al=os({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Ji="__tsUtils$gblCfg",Ca;function Di(){var s;return typeof globalThis!==C&&(s=globalThis),!s&&typeof self!==C&&(s=self),!s&&typeof window!==C&&(s=window),!s&&typeof global!==C&&(s=global),s}function ss(){if(!Ca){var s=At(Di).v||{};Ca=s[Ji]=s[Ji]||{}}return Ca}var Gs=ui;function ui(s,u,f){var h=u?u[s]:i;return function(E){var x=(E?E[s]:i)||h;if(x||f){var A=arguments;return(x||f).apply(E,x?mt[J](A,1):A)}sn('"'+Ui(s)+'" not defined for '+nr(E))}}function ol(s){return function(u){return u[s]}}var Vs=r(Be,"max"),xa=Gs("slice",Ee),ni=Gs("substring",Ee),nc=ui("substr",Ee,zs);function zs(s,u,f){return Pe(s)&&sn("Invalid "+nr(s)),f<0?a:(u=u||0,u<0&&(u=Vs(u+s[q],0)),Ke(f)?xa(s,u):xa(s,u,u+f))}function li(s,u){return ni(s,0,u)}var ua="_urid",mr;function xn(){if(!mr){var s=ss();mr=s.gblSym=s.gblSym||{k:{},s:{}}}return mr}var Da;function Jr(s){var u={description:Ui(s),toString:function(){return W+"("+s+")"}};return u[K]=!0,u}function _i(s){var u=xn();if(!Pr(u.k,s)){var f=Jr(s),h=Cn(u.s).length;f[ua]=function(){return h+"_"+f[re]()},u.k[s]=f,u.s[f[ua]()]=Ui(s)}return u.k[s]}function qa(s){!Da&&(Da={});var u,f=al[s];return f&&(u=Da[f]=Da[f]||Jr(W+"."+f)),u}var Zr;function la(){Zr=ss()}function Tu(s){var u={};return!Zr&&la(),u.b=Zr.lzy,An(u,"v",{configurable:!0,get:function(){var f=s();return Zr.lzy||An(u,"v",{value:f}),u.b=Zr.lzy,f}}),u}function ca(s){return An({toJSON:function(){return s}},"v",{value:s})}var yn="window",ci;function sl(s,u){var f;return function(){return!Zr&&la(),(!f||Zr.lzy)&&(f=ca(At(s,u).v)),f.v}}function Ra(s){return!Zr&&la(),(!ci||s===!1||Zr.lzy)&&(ci=ca(At(Di).v||i)),ci.v}function Rr(s,u){var f;if(!ci||u===!1?f=Ra(u):f=ci.v,f&&f[s])return f[s];if(s===yn)try{return window}catch{}return i}function Ri(){return!!id()}var id=sl(Rr,["document"]);function Yi(){return!!us()}var us=sl(Rr,[yn]);function ic(){return!!ls()}var ls=sl(Rr,["navigator"]),ad=sl(function(){return!!At(function(){return process&&(process.versions||{}).node}).v}),vn,nf;function fa(){return vn=ca(At(Rr,[W]).v),vn}function pp(s){var u=(Zr.lzy?0:vn)||fa();return u.v?u.v[s]:n}function fi(){return!!Im()}function Im(){return!Zr&&la(),((Zr.lzy?0:vn)||fa()).v}function Oa(s,u){var f=al[s];!Zr&&la();var h=(Zr.lzy?0:vn)||fa();return h.v?h.v[f||s]:u?n:qa(s)}function af(s,u){!Zr&&la();var f=(Zr.lzy?0:vn)||fa();return f.v?f.v(s):u?i:Jr(s)}function fo(s){return!Zr&&la(),nf=(Zr.lzy?0:nf)||ca(At(pp,["for"]).v),(nf.v||_i)(s)}function od(s){return!!s&&ut(s.next)}function Er(s){return!$t(s)&&ut(s[Oa(3)])}var cs;function sd(s,u,f){if(s&&(od(s)||(!cs&&(cs=ca(Oa(3))),s=s[cs.v]?s[cs.v]():i),od(s))){var h=n,E=n;try{for(var x=0;!(E=s.next()).done&&u[J](f||s,E.value,x,s)!==-1;)x++}catch(A){h={e:A},s.throw&&(E=i,s.throw(h))}finally{try{E&&!E.done&&s.return&&s.return(E)}finally{if(h)throw h.e}}}}function Zi(s,u,f){return s.apply(u,f)}function ac(s,u){return!Ke(u)&&s&&(ot(u)?Zi(s.push,s,u):od(u)||Er(u)?sd(u,function(f){s.push(f)}):s.push(u)),s}function Ft(s,u,f){if(s)for(var h=s[q]>>>0,E=0;E<h&&!(E in s&&u[J](f||s,s[E],E,s)===-1);E++);}var ka=Gs("indexOf",st),ul=Gs("map",st);function of(s,u,f){return((s?s.slice:i)||mt).apply(s,mt[J](arguments,1))}var wv=Gs("reduce",st),Ha=e(r(_e,"create"),sf);function sf(s){if(!s)return{};var u=typeof s;u!==v&&u!==l&&sn("Prototype must be an Object or function: "+nr(s));function f(){}return f[_]=s,new f}var mp;function Iu(s,u){var f=_e.setPrototypeOf||function(h,E){var x;!mp&&(mp=ca((x={},x[y]=[],x instanceof Array))),mp.v?h[y]=E:Dt(E,function(A,F){return h[A]=F})};return f(s,u)}function Ga(s,u,f){At(qr,[u,V,{v:s,c:!0,e:!1}]),u=Iu(u,f);function h(){this[U]=u,At(qr,[this,V,{v:s,c:!0,e:!1}])}return u[_]=f===i?Ha(f):(h[_]=f[_],new h),u}function vt(s,u){u&&(s[V]=u)}function Oi(s,u,f){var h=f||Error,E=h[_][V],x=Error.captureStackTrace;return Ga(s,function(){var A=this,F=arguments;try{At(vt,[h,s]);var $=Zi(h,A,mt[J](F))||A;if($!==A){var G=ji(A);G!==ji($)&&Iu($,G)}return x&&x($,A[U]),u&&u($,F),$}finally{At(vt,[h,E])}},h)}function Nu(){return(Date.now||Ws)()}function Ws(){return new Date().getTime()}function vp(s){return function(f){return Pe(f)&&sn("strTrim called ["+nr(f)+"]"),f&&f.replace&&(f=f.replace(s,a)),f}}var hp=vp(/^\s+|(?=\s)\s+$/g),Dn=ui("trim",Ee,hp),Aa,gp,Va;function da(s){if(!s||typeof s!==v)return!1;Va||(Va=Yi()?us():!0);var u=!1;if(s!==Va){gp||(Aa=Function[_][re],gp=Aa[J](_e));try{var f=ji(s);u=!f,u||(xi(f,U)&&(f=f[U]),u=!!(f&&typeof f===l&&Aa[J](f)===gp))}catch{}}return u}function gh(s){return s.value&&po(s),!0}var Sv=[Xi,po,lf,uf];function Nm(s,u,f,h){var E;return Ft(s,function(x){if(x.k===u)return E=x,-1}),E||(E={k:u,v:u},s.push(E),h(E)),E.v}function Cu(s,u,f,h){var E=f.handler,x=f.path?h?f.path.concat(h):f.path:[],A={handler:f.handler,src:f.src,path:x},F=typeof u,$=!1,G=u===i;G||(u&&F===v?$=da(u):G=wt(F));var ee={type:F,isPrim:G,isPlain:$,value:u,result:u,path:x,origin:f.src,copy:function(fe,pe){return Cu(s,fe,pe?A:f,pe)},copyTo:function(fe,pe){return Cm(s,fe,pe,A)}};return ee.isPrim?E&&E[J](f,ee)?ee.result:u:Nm(s,u,x,function(fe){qr(ee,"result",{g:function(){return fe.v},s:function(le){fe.v=le}});for(var pe=0,me=E;!(me||(pe<Sv.length?Sv[pe++]:gh))[J](f,ee);)me=i})}function Cm(s,u,f,h){if(!Pe(f))for(var E in f)u[E]=Cu(s,f[E],h,E);return u}function og(s,u,f){var h={handler:f,src:u,path:[]};return Cm([],s,u,h)}function _p(s,u){var f={handler:u,src:s};return Cu([],s,f)}function Xi(s){var u=s.value;if(ot(u)){var f=s.result=[];return f.length=u.length,s.copyTo(f,u),!0}return!1}function uf(s){var u=s.value;return Su(u)?(s.result=new Date(u.getTime()),!0):!1}function lf(s){return s.type===l}function po(s){var u=s.value;if(u&&s.isPlain){var f=s.result={};return s.copyTo(f,u),!0}return!1}function Pa(s,u){return Ft(u,function(f){og(s,f)}),s}function xu(s,u,f,h,E,x,A){return Pa(_p(s)||{},mt[J](arguments))}var xm=ol(q),za=ui("endsWith",Ee,yp);function yp(s,u,f){mn(s)||sn("'"+nr(s)+"' is not a string");var h=mn(u)?u:Ui(u),E=!Ke(f)&&f<s[q]?f:s[q];return ni(s,E-h[q],E)===h}var Du=Gs("indexOf",Ee),oc="ref",cf="unref",ud="hasRef",bp="enabled";function Dm(s,u,f){var h=!0,E=s?u(i):i,x;function A(){return h=!1,E&&E[cf]&&E[cf](),x}function F(){E&&f(E),E=i}function $(){return E=u(E),h||A(),x}function G(ee){!ee&&E&&F(),ee&&!E&&$()}return x={cancel:F,refresh:$},x[ud]=function(){return E&&E[ud]?E[ud]():h},x[oc]=function(){return h=!0,E&&E[oc]&&E[oc](),x},x[cf]=A,x=An(x,bp,{get:function(){return!!E},set:G}),{h:x,dn:function(){E=i}}}function Rm(s,u,f){var h=ot(u),E=h?u.length:0,x=(E>0?u[0]:h?n:u)||setTimeout,A=(E>1?u[1]:n)||clearTimeout,F=f[0];f[0]=function(){$.dn(),Zi(F,n,mt[J](arguments))};var $=Dm(s,function(G){if(G){if(G.refresh)return G.refresh(),G;Zi(A,n,[G])}return Zi(x,n,f)},function(G){Zi(A,n,[G])});return $.h}function Ru(s,u){return Rm(!0,n,mt[J](arguments))}function wp(s,u){return Rm(!1,n,mt[J](arguments))}var Ks,ll="constructor",Wa="prototype",ff="function",ld="_dynInstFuncs",sc="_isDynProxy",mo="_dynClass",Ev="_dynCls$",fs="_dynInstChk",ko=fs,vo="_dfOpts",Ou="_unknown_",cd="__proto__",uc="_dyn"+cd,lc="__dynProto$Gbl",cl="_dynInstProto",fd="useBaseInst",df="setInstFuncs",dd=Object,fl=dd.getPrototypeOf,ho=dd.getOwnPropertyNames,cc=Ra(),Ao=cc[lc]||(cc[lc]={o:(Ks={},Ks[df]=!0,Ks[fd]=!0,Ks),n:1e3});function Ma(s){return s&&(s===dd[Wa]||s===Array[Wa])}function ds(s){return Ma(s)||s===Function[Wa]}function un(s){var u;if(s){if(fl)return fl(s);var f=s[cd]||s[Wa]||(s[ll]?s[ll][Wa]:null);u=s[uc]||f,xi(s,uc)||(delete s[cl],u=s[uc]=s[cl]||s[uc],s[cl]=f)}return u}function Js(s,u){var f=[];if(ho)f=ho(s);else for(var h in s)typeof h=="string"&&xi(s,h)&&f.push(h);if(f&&f.length>0)for(var E=0;E<f.length;E++)u(f[E])}function go(s,u,f){return u!==ll&&typeof s[u]===ff&&(f||xi(s,u))&&u!==cd&&u!==Wa}function fc(s){sn("DynamicProto: "+s)}function dc(s){var u=Ha(null);return Js(s,function(f){!u[f]&&go(s,f,!1)&&(u[f]=s[f])}),u}function ps(s,u){for(var f=s.length-1;f>=0;f--)if(s[f]===u)return!0;return!1}function pf(s,u,f,h){function E($,G,ee){var fe=G[ee];if(fe[sc]&&h){var pe=$[ld]||{};pe[ko]!==!1&&(fe=(pe[G[mo]]||{})[ee]||fe)}return function(){return fe.apply($,arguments)}}var x=Ha(null);Js(f,function($){x[$]=E(u,f,$)});for(var A=un(s),F=[];A&&!ds(A)&&!ps(F,A);)Js(A,function($){!x[$]&&go(A,$,!fl)&&(x[$]=E(u,A,$))}),F.push(A),A=un(A);return x}function ms(s,u,f,h){var E=null;if(s&&xi(f,mo)){var x=s[ld]||Ha(null);if(E=(x[f[mo]]||Ha(null))[u],E||fc("Missing ["+u+"] "+ff),!E[fs]&&x[ko]!==!1){for(var A=!xi(s,u),F=un(s),$=[];A&&F&&!ds(F)&&!ps($,F);){var G=F[u];if(G){A=G===h;break}$.push(F),F=un(F)}try{A&&(s[u]=E),E[fs]=1}catch{x[ko]=!1}}}return E}function ku(s,u,f){var h=u[s];return h===f&&(h=un(u)[s]),typeof h!==ff&&fc("["+s+"] is not a "+ff),h}function pa(s,u,f,h,E){function x($,G){var ee=function(){var fe=ms(this,G,$,ee)||ku(G,$,ee);return fe.apply(this,arguments)};return ee[sc]=1,ee}if(!Ma(s)){var A=f[ld]=f[ld]||Ha(null);if(!Ma(A)){var F=A[u]=A[u]||Ha(null);A[ko]!==!1&&(A[ko]=!!E),Ma(F)||Js(f,function($){go(f,$,!1)&&f[$]!==h[$]&&(F[$]=f[$],delete f[$],(!xi(s,$)||s[$]&&!s[$][sc])&&(s[$]=x(s,$)))})}}}function Sp(s,u){if(fl){for(var f=[],h=un(u);h&&!ds(h)&&!ps(f,h);){if(h===s)return!0;f.push(h),h=un(h)}return!1}return!0}function dl(s,u){return xi(s,Wa)?s.name||u||Ou:((s||{})[ll]||{}).name||u||Ou}function Qi(s,u,f,h){xi(s,Wa)||fc("theClass is an invalid class definition.");var E=s[Wa];Sp(E,u)||fc("["+dl(s)+"] not in hierarchy of ["+dl(u)+"]");var x=null;xi(E,mo)?x=E[mo]:(x=Ev+dl(s,"_")+"$"+Ao.n,Ao.n++,E[mo]=x);var A=Qi[vo],F=!!A[fd];F&&h&&h[fd]!==void 0&&(F=!!h[fd]);var $=dc(u),G=pf(E,u,$,F);f(u,G);var ee=!!fl&&!!A[df];ee&&h&&(ee=!!h[df]),pa(E,x,u,$,ee!==!1)}Qi[vo]=Ao.o;var pd="function",Ep="object",mf="undefined",vf="prototype",Tp=Object,Tv=Tp[vf];(Ra()||{}).Symbol,(Ra()||{}).Reflect;var pl="hasOwnProperty",Po=function(s){for(var u,f=1,h=arguments.length;f<h;f++){u=arguments[f];for(var E in u)Tv[pl].call(u,E)&&(s[E]=u[E])}return s},_o=Eu||Po,Rn=function(s,u){return Rn=Tp.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var E in h)h[pl](E)&&(f[E]=h[E])},Rn(s,u)};function hf(s,u){typeof u!==pd&&u!==null&&sn("Class extends value "+String(u)+" is not a constructor or null"),Rn(s,u);function f(){this.constructor=s}s[vf]=u===null?Ha(u):(f[vf]=u[vf],new f)}function ml(s,u){for(var f=0,h=u.length,E=s.length;f<h;f++,E++)s[E]=u[f];return s}var vl=Ba,Ip=nd,Ka=vl({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),Au="toLowerCase",Zs="blkVal",cr="length",Mo="rdOnly",vs="notify",Ja="warnToConsole",md="throwInternal",Za="setDf",Pu="watch",bn="logger",ma="apply",Vr="push",ht="splice",hl="hdlr",Lo="cancel",Xs="initialize",yo="identifier",Mu="removeNotificationListener",Xa="addNotificationListener",Xr="isInitialized",Fo="instrumentationKey",zr="INACTIVE",Uo="value",vd="getNotifyMgr",jo="getPlugin",Zn="name",bo="iKey",hs="time",$i="processNext",ea="getProcessTelContext",pc="pollInternalLogs",gl="enabled",hd="stopPollingInternalLogs",Qs="unload",Yo="onComplete",$o="version",_l="loggingLevelConsole",Bo="createNew",ii="teardown",gd="messageId",yl="message",eu="isAsync",La="diagLog",gs="_doTeardown",tu="update",Qa="getNext",mc="setNextPlugin",Lu="protocol",ki="userAgent",Fu="split",ru="nodeType",eo="replace",bl="logInternalMessage",wn="type",yi="handler",to="status",wl="getResponseHeader",_s="getAllResponseHeaders",Np="isChildEvt",Fa="data",vc="getCtx",Bi="setCtx",_d="complete",va="itemsReceived",ys="urlString",bs="sendPOST",Cp="headers",gf="timeout",yd="setRequestHeader",_f="traceId",qo="spanId",ha="traceFlags",hc;function Iv(s,u){hc||(hc=Oi("AggregationError",function(h,E){E[cr]>1&&(h.errors=E[1])}));var f=s||"One or more errors occurred.";throw Ft(u,function(h,E){f+=`
`.concat(E," > ").concat(nr(h))}),new hc(f,u||[])}var Sl="Promise",El="rejected";function ws(s,u){return yf(s,function(f){return u?u({status:"fulfilled",rejected:!1,value:f}):f},function(f){return u?u({status:El,rejected:!0,reason:f}):f})}function yf(s,u,f,h){var E=s;try{if(lr(s))(u||f)&&(E=s.then(u,f));else try{u&&(E=u(s))}catch(x){if(f)E=f(x);else throw x}}finally{h&&_h(E,h)}return E}function _h(s,u){var f=s;return u&&(lr(s)?s.finally?f=s.finally(u):f=s.then(function(h){return u(),h},function(h){throw u(),h}):u()),f}var xp=["pending","resolving","resolved",El],bf="dispatchEvent",Tl;function Om(s){var u;return s&&s.createEvent&&(u=s.createEvent("Event")),!!u&&u.initEvent}function Nv(s,u,f,h){var E=id();!Tl&&(Tl=ca(!!At(Om,[E]).v));var x=Tl.v?E.createEvent("Event"):h?new Event(u):{};if(f&&f(x),Tl.v&&x.initEvent(u,!1,!0),x&&s[bf])s[bf](x);else{var A=s["on"+u];if(A)A(x);else{var F=Rr("console");F&&(F.error||F.log)(u,nr(x))}}}var Il="unhandledRejection",Cv=Il.toLowerCase(),wf=10,Dp;function wo(s){return ut(s)?s.toString():nr(s)}function km(s,u,f){var h=of(arguments,3),E=0,x=!1,A,F=[],$=!1,G=null,ee;function fe(Xe,pt){try{$=!0,G&&G.cancel(),G=null;var Nr=s(function(dn,pn){F.push(function(){try{var Yn=E===2?Xe:pt,er=Ke(Yn)?A:ut(Yn)?Yn(A):Yn;lr(er)?er.then(dn,pn):Yn?dn(er):E===3?pn(er):dn(er)}catch(Ht){pn(Ht)}}),x&&Me()},h);return Nr}finally{}}function pe(Xe){return fe(void 0,Xe)}function me(Xe){var pt=Xe,Nr=Xe;return ut(Xe)&&(pt=function(dn){return Xe&&Xe(),dn},Nr=function(dn){throw Xe&&Xe(),dn}),fe(pt,Nr)}function le(){return xp[E]}function Me(){if(F.length>0){var Xe=F.slice();F=[],$=!0,G&&G.cancel(),G=null,u(Xe)}}function we(Xe,pt){return function(Nr){if(E===pt){if(Xe===2&&lr(Nr)){E=1,Nr.then(we(2,1),we(3,1));return}E=Xe,x=!0,A=Nr,Me(),!$&&Xe===3&&!G&&(G=Ru(Ue,wf))}}}function Ue(){if(!$)if($=!0,ad())process.emit(Il,A,ee);else{var Xe=us()||Ra();!Dp&&(Dp=ca(At(Rr,[Sl+"RejectionEvent"]).v)),Nv(Xe,Cv,function(pt){return qr(pt,"promise",{g:function(){return ee}}),pt.reason=A,pt},!!Dp.v)}}ee={then:fe,catch:pe,finally:me},An(ee,"state",{get:le}),fi()&&(ee[Oa(11)]="IPromise");function Ye(){return"IPromise "+le()+(x?" - "+wo(A):"")}return ee.toString=Ye,function(){ut(f)||sn(Sl+": executor is not a function - "+wo(f));var pt=we(3,0);try{f.call(ee,we(2,0),pt)}catch(Nr){pt(Nr)}}(),ee}function yh(s){return function(u){var f=of(arguments,1);return s(function(h,E){try{var x=[],A=1;sd(u,function(F,$){F&&(A++,yf(F,function(G){x[$]=G,--A===0&&h(x)},E))}),A--,A===0&&h(x)}catch(F){E(F)}},f)}}function bd(s){return ca(function(u){var f=of(arguments,1);return s(function(h,E){var x=[],A=1;function F($,G){A++,ws($,function(ee){ee.rejected?x[G]={status:El,reason:ee.reason}:x[G]={status:"fulfilled",value:ee.value},--A===0&&h(x)})}try{ot(u)?Ft(u,F):Er(u)?sd(u,F):sn("Input is not an iterable"),A--,A===0&&h(x)}catch($){E($)}},f)})}function Am(s){Ft(s,function(u){try{u()}catch{}})}function Rp(s){var u=Xt(s)?s:0;return function(f){Ru(function(){Am(f)},u)}}function gc(s,u){return km(gc,Rp(u),s,u)}var wd;function Nl(s,u){!wd&&(wd=ca(At(Rr,[Sl]).v||null));var f=wd.v;if(!f)return gc(s);ut(s)||sn(Sl+": executor is not a function - "+nr(s));var h=0;function E(){return xp[h]}var x=new f(function(A,F){function $(ee){h=2,A(ee)}function G(ee){h=3,F(ee)}s($,G)});return An(x,"state",{get:E}),x}var nu;function _c(s){return km(_c,Am,s)}function xv(s,u){return!nu&&(nu=bd(_c)),nu.v(s,u)}var Op;function yc(s,u){return!Op&&(Op=ca(Nl)),Op.v.call(this,s,u)}var kp=yh(yc),iu=void 0,Qr="",Cl="channels",Ai="core",Ap="createPerfMgr",Sd="disabled",bc="extensionConfig",xl="extensions",ga="processTelemetry",Ed="priority",bi="eventsSent",yr="eventsDiscarded",au="eventsSendRequest",Pn="perfEvent",Ss="offlineEventsStored",Dl="offlineBatchSent",Rl="offlineBatchDrop",ou="getPerfMgr",So="domain",Sf="path",Pm="Not dynamic - ",Ef=/-([a-z])/g,Mm=/([^\w\d_$])/g,Tf=/^(\d+[\w\d_$])/;function wc(s){return!Pe(s)}function Pp(s){var u=s;return u&&mn(u)&&(u=u[eo](Ef,function(f,h){return h.toUpperCase()}),u=u[eo](Mm,"_"),u=u[eo](Tf,function(f,h){return"_"+h})),u}function di(s,u){return s&&u?Du(s,u)!==-1:!1}function Sc(s){return s&&s.toISOString()||""}function Pi(s){return Kt(s)?s[Zn]:Qr}function Uu(s,u,f,h,E){var x=f;return s&&(x=s[u],x!==f&&(!E||E(x))&&(!h||h(f))&&(x=f,s[u]=x)),x}function Mp(s,u,f){var h;return s?(h=s[u],!h&&Pe(h)&&(h=Ke(f)?{}:f,s[u]=h)):h=Ke(f)?{}:f,h}function Td(s,u){var f=null,h=null;return ut(s)?f=s:h=s,function(){var E=arguments;if(f&&(h=f()),h)return h[u][ma](h,E)}}function Mi(s,u,f,h,E){s&&u&&f&&(E!==!1||Ke(s[u]))&&(s[u]=Td(f,h))}function Id(s,u,f,h){return s&&u&&ti(s)&&ot(f)&&Ft(f,function(E){mn(E)&&Mi(s,E,u,E,h)}),s}function Lp(s){return function(){function u(){var f=this;s&&Dt(s,function(h,E){f[h]=E})}return u}()}function su(s){return s&&Eu&&(s=Tp(Eu({},s))),s}function gt(s,u,f,h,E,x){var A=arguments,F=A[0]||{},$=A[cr],G=!1,ee=1;for($>0&&$a(F)&&(G=F,F=A[ee]||{},ee++),ti(F)||(F={});ee<$;ee++){var fe=A[ee],pe=ot(fe),me=ti(fe);for(var le in fe){var Me=pe&&le in fe||me&&Pr(fe,le);if(Me){var we=fe[le],Ue=void 0;if(G&&we&&((Ue=ot(we))||da(we))){var Ye=F[le];Ue?ot(Ye)||(Ye=[]):da(Ye)||(Ye={}),we=gt(G,Ye,we)}we!==void 0&&(F[le]=we)}}}return F}function Es(s){try{return s.responseText}catch{}return null}function Ts(s,u){return s?"XDomainRequest,Response:"+Es(s)||"":u}function ro(s,u){return s?"XMLHttpRequest,Status:"+s[to]+",Response:"+Es(s)||s.response||"":u}function If(s,u){return u&&(Xt(u)?s=[u].concat(s):ot(u)&&(s=u.concat(s))),s}var Ec="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Is="withCredentials",Eo="timeout";function Tc(s,u,f,h,E,x){h===void 0&&(h=!1),E===void 0&&(E=!1);function A($,G,ee){try{$[G]=ee}catch{}}var F=new XMLHttpRequest;return h&&A(F,Ec,h),f&&A(F,Is,f),F.open(s,u,!E),f&&A(F,Is,f),!E&&x&&A(F,Eo,x),F}function Nd(s){var u={};if(mn(s)){var f=Dn(s)[Fu](/[\r\n]+/);Ft(f,function(h){if(h){var E=h.indexOf(": ");if(E!==-1){var x=Dn(h.substring(0,E))[Au](),A=Dn(h.substring(E+1));u[x]=A}else u[Dn(h)]=1}})}return u}function uu(s,u,f){if(!s[f]&&u&&u[wl]){var h=u[wl](f);h&&(s[f]=Dn(h))}return s}var Nf="kill-duration",Ic="kill-duration-seconds",Cf="time-delta-millis";function Fp(s,u){var f={};return s[_s]?f=Nd(s[_s]()):u&&(f=uu(f,s,Cf),f=uu(f,s,Nf),f=uu(f,s,Ic)),f}var Up="documentMode",Lm="location",jp="console",ju="JSON",Ol="crypto",xf="msCrypto",Ho="msie",Ns="trident/",Go="XMLHttpRequest",Vo=null,kl=null,Yp=!1,Al=null,$p=null;function Bp(s,u){var f=!1;if(s){try{if(f=u in s,!f){var h=s[vf];h&&(f=u in h)}}catch{}if(!f)try{var E=new s;f=!Ke(E[u])}catch{}}return f}function Cd(s){if(s&&Yp){var u=Rr("__mockLocation");if(u)return u}return typeof location===Ep&&location?location:Rr(Lm)}function Cs(){return typeof console!==mf?console:Rr(jp)}function zo(){return!!(typeof JSON===Ep&&JSON||Rr(ju)!==null)}function Wo(){return zo()?JSON||Rr(ju):null}function xd(){return Rr(Ol)}function Df(){return Rr(xf)}function Nc(){var s=ls();if(s&&(s[ki]!==kl||Vo===null)){kl=s[ki];var u=(kl||Qr)[Au]();Vo=di(u,Ho)||di(u,Ns)}return Vo}function qi(s){if(s===void 0&&(s=null),!s){var u=ls()||{};s=u?(u.userAgent||Qr)[Au]():Qr}var f=(s||Qr)[Au]();if(di(f,Ho)){var h=id()||{};return Math.max(parseInt(f[Fu](Ho)[1]),h[Up]||0)}else if(di(f,Ns)){var E=parseInt(f[Fu](Ns)[1]);if(E)return E+4}return null}function xs(s){return($p===null||s===!1)&&($p=ic()&&!!ls().sendBeacon),$p}function Dd(s){var u=!1;try{u=!!Rr("fetch");var f=Rr("Request");u&&s&&f&&(u=Bp(f,"keepalive"))}catch{}return u}function ta(){return Al===null&&(Al=typeof XDomainRequest!==mf,Al&&lu()&&(Al=Al&&!Bp(Rr(Go),"withCredentials"))),Al}function lu(){var s=!1;try{var u=Rr(Go);s=!!u}catch{}return s}var Rf=4294967296,Ds=4294967295,Li=123456789,Yu=987654321,Rd=!1,Cc=Li,$u=Yu;function Dv(s){s<0&&(s>>>=0),Cc=Li+s&Ds,$u=Yu-s&Ds,Rd=!0}function Fm(){try{var s=Nu()&2147483647;Dv((Math.random()*Rf^s)+s)}catch{}}function Rv(s){var u=0,f=xd()||Df();return f&&f.getRandomValues&&(u=f.getRandomValues(new Uint32Array(1))[0]&Ds),u===0&&Nc()&&(Rd||Fm(),u=xc()&Ds),u===0&&(u=Math.floor(Rf*Math.random()|0)),s||(u>>>=0),u}function xc(s){$u=36969*($u&65535)+($u>>16)&Ds,Cc=18e3*(Cc&65535)+(Cc>>16)&Ds;var u=($u<<16)+(Cc&65535)>>>0&Ds|0;return s||(u>>>=0),u}function Of(s){s===void 0&&(s=22);for(var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=Rv()>>>0,h=0,E=Qr;E[cr]<s;)h++,E+=u.charAt(f&63),f>>>=6,h===5&&(f=(Rv()<<2&4294967295|f&3)>>>0,h=0);return E}var Um="3.3.5",bh="."+Of(6),Od=0;function qp(s){return s[ru]===1||s[ru]===9||!+s[ru]}function Dc(s,u){var f=u[s.id];if(!f){f={};try{qp(u)&&qr(u,s.id,{e:!1,v:f})}catch{}}return f}function Bu(s,u){return u===void 0&&(u=!1),Pp(s+Od+++(u?"."+Um:Qr)+bh)}function Hp(s){var u={id:Bu("_aiData-"+(s||Qr)+"."+Um),accept:function(f){return qp(f)},get:function(f,h,E,x){var A=f[u.id];return A?A[Pp(h)]:(x&&(A=Dc(u,f),A[Pp(h)]=E),E)},kill:function(f,h){if(f&&f[h])try{delete f[h]}catch{}}};return u}function Rs(s){return s&&ti(s)&&(s.isVal||s.fb||Pr(s,"v")||Pr(s,"mrg")||Pr(s,"ref")||s.set)}function kd(s,u,f){var h,E=f.dfVal||Vt;if(u&&f.fb){var x=f.fb;ot(x)||(x=[x]);for(var A=0;A<x[cr];A++){var F=x[A],$=u[F];if(E($)?h=$:s&&($=s.cfg[F],E($)&&(h=$),s.set(s.cfg,Ui(F),$)),E(h))break}}return!E(h)&&E(f.v)&&(h=f.v),h}function kf(s,u,f){var h=f;if(f&&Rs(f)&&(h=kd(s,u,f)),h){Rs(h)&&(h=kf(s,u,h));var E;ot(h)?(E=[],E[cr]=h[cr]):da(h)&&(E={}),E&&(Dt(h,function(x,A){A&&Rs(A)&&(A=kf(s,u,A)),E[x]=A}),h=E)}return h}function Os(s,u,f,h){var E,x,A,F=h,$,G,ee,fe;Rs(F)?(E=F.isVal,x=F.set,ee=F[Mo],fe=F[Zs],$=F.mrg,G=F.ref,!G&&Ke(G)&&(G=!!$),A=kd(s,u,F)):A=h,fe&&s[Zs](u,f);var pe,me=!0,le=u[f];(le||!Pe(le))&&(pe=le,me=!1,E&&pe!==A&&!E(pe)&&(pe=A,me=!0),x&&(pe=x(pe,A,u),me=pe===A)),me?A?pe=kf(s,u,A):pe=A:(da(pe)||ot(A))&&$&&A&&(da(A)||ot(A))&&Dt(A,function(Me,we){Os(s,pe,Me,we)}),s.set(u,f,pe),G&&s.ref(u,f),ee&&s[Mo](u,f)}var Pl=fo("[[ai_dynCfg_1]]"),Ov=fo("[[ai_blkDynCfg_1]]"),Rc=fo("[[ai_frcDynCfg_1]]");function wh(s){if(s){var u;if(ot(s)?(u=[],u[cr]=s[cr]):da(s)&&(u={}),u)return Dt(s,function(f,h){u[f]=wh(h)}),u}return s}function kv(s){if(s){var u=s[Pl]||s;if(u.cfg&&(u.cfg===s||u.cfg[Pl]===u))return u}return null}function Af(s){if(s&&(da(s)||ot(s)))try{s[Ov]=!0}catch{}return s}function jm(s,u,f){var h=!1;return f&&!s[u.blkVal]&&(h=f[Rc],!h&&!f[Ov]&&(h=da(f)||ot(f))),h}function Av(s){sn("InvalidAccess:"+s)}var qu=["push","pop","shift","unshift","splice"],To=function(s,u,f,h){s&&s[md](3,108,"".concat(f," [").concat(u,"] failed - ")+nr(h))};function cu(s,u,f){ot(u)&&Ft(qu,function(h){var E=u[h];u[h]=function(){for(var x=[],A=0;A<arguments.length;A++)x[A]=arguments[A];var F=E[ma](this,x);return Pf(s,u,f,"Patching"),F}})}function Hu(s,u){var f=pr(s,u);return f&&f.get}function Oc(s,u,f,h){var E={n:f,h:[],trk:function(G){G&&G.fn&&(ka(E.h,G)===-1&&E.h[Vr](G),s.trk(G,E))},clr:function(G){var ee=ka(E.h,G);ee!==-1&&E.h[ht](ee,1)}},x=!0,A=!1;function F(){x&&(A=A||jm(F,s,h),h&&!h[Pl]&&A&&(h=Pf(s,h,f,"Converting")),x=!1);var G=s.act;return G&&E.trk(G),h}F[s.prop]={chng:function(){s.add(E)}};function $(G){if(h!==G){F[s.ro]&&!s.upd&&Av("["+f+"] is read-only:"+nr(u)),x&&(A=A||jm(F,s,h),x=!1);var ee=A&&F[s.rf];if(A)if(ee){Dt(h,function(pe){h[pe]=G?G[pe]:iu});try{Dt(G,function(pe,me){kc(s,h,pe,me)}),G=h}catch(pe){To((s.hdlr||{})[bn],f,"Assigning",pe),A=!1}}else h&&h[Pl]&&Dt(h,function(pe){var me=Hu(h,pe);if(me){var le=me[s.prop];le&&le.chng()}});if(G!==h){var fe=G&&jm(F,s,G);!ee&&fe&&(G=Pf(s,G,f,"Converting")),h=G,A=fe}s.add(E)}}qr(u,E.n,{g:F,s:$})}function kc(s,u,f,h){if(u){var E=Hu(u,f),x=E&&!!E[s.prop];x?u[f]=h:Oc(s,u,f,h)}return u}function Ad(s,u,f,h){if(u){var E=Hu(u,f),x=E&&!!E[s.prop],A=h&&h[0],F=h&&h[1],$=h&&h[2];if(!x){if($)try{Af(u)}catch(G){To((s.hdlr||{})[bn],f,"Blocking",G)}try{kc(s,u,f,u[f]),E=Hu(u,f)}catch(G){To((s.hdlr||{})[bn],f,"State",G)}}A&&(E[s.rf]=A),F&&(E[s.ro]=F),$&&(E[s.blkVal]=!0)}return u}function Pf(s,u,f,h){try{Dt(u,function(E,x){kc(s,u,E,x)}),u[Pl]||(An(u,Pl,{get:function(){return s[hl]}}),cu(s,u,f))}catch(E){To((s.hdlr||{})[bn],f,h,E)}return u}var Ko="[[ai_",Ml="]]";function Pv(s){var u,f=af(Ko+"get"+s.uid+Ml),h=af(Ko+"ro"+s.uid+Ml),E=af(Ko+"rf"+s.uid+Ml),x=af(Ko+"blkVal"+s.uid+Ml),A=af(Ko+"dtl"+s.uid+Ml),F=null,$=null,G;function ee(le,Me){var we=G.act;try{G.act=le,le&&le[A]&&(Ft(le[A],function(Ye){Ye.clr(le)}),le[A]=[]),Me({cfg:s.cfg,set:s.set.bind(s),setDf:s[Za].bind(s),ref:s.ref.bind(s),rdOnly:s[Mo].bind(s)})}catch(Ye){var Ue=s[bn];throw Ue&&Ue[md](1,107,nr(Ye)),Ye}finally{G.act=we||null}}function fe(){if(F){var le=F;F=null,$&&$[Lo](),$=null;var Me=[];if(Ft(le,function(we){if(we&&(we[A]&&(Ft(we[A],function(Ue){Ue.clr(we)}),we[A]=null),we.fn))try{ee(we,we.fn)}catch(Ue){Me[Vr](Ue)}}),F)try{fe()}catch(we){Me[Vr](we)}Me[cr]>0&&Iv("Watcher error(s): ",Me)}}function pe(le){if(le&&le.h[cr]>0){F||(F=[]),$||($=Ru(function(){$=null,fe()},0));for(var Me=0;Me<le.h[cr];Me++){var we=le.h[Me];we&&ka(F,we)===-1&&F[Vr](we)}}}function me(le,Me){if(le){var we=le[A]=le[A]||[];ka(we,Me)===-1&&we[Vr](Me)}}return G=(u={prop:f,ro:h,rf:E},u[Zs]=x,u[hl]=s,u.add=pe,u[vs]=fe,u.use=ee,u.trk=me,u),G}function Mv(s,u){var f={fn:u,rm:function(){f.fn=null,s=null,u=null}};return qr(f,"toJSON",{v:function(){return"WatcherHandler"+(f.fn?"":"[X]")}}),s.use(f,u),f}function Gp(s,u,f){var h,E=kv(u);if(E)return E;var x=Bu("dyncfg",!0),A=u&&f!==!1?u:wh(u),F;function $(){F[vs]()}function G(Ue,Ye,Xe){try{Ue=kc(F,Ue,Ye,Xe)}catch(pt){To(s,Ye,"Setting value",pt)}return Ue[Ye]}function ee(Ue){return Mv(F,Ue)}function fe(Ue,Ye){F.use(null,function(Xe){var pt=F.upd;try{Ke(Ye)||(F.upd=Ye),Ue(Xe)}finally{F.upd=pt}})}function pe(Ue,Ye){var Xe;return Ad(F,Ue,Ye,(Xe={},Xe[0]=!0,Xe))[Ye]}function me(Ue,Ye){var Xe;return Ad(F,Ue,Ye,(Xe={},Xe[1]=!0,Xe))[Ye]}function le(Ue,Ye){var Xe;return Ad(F,Ue,Ye,(Xe={},Xe[2]=!0,Xe))[Ye]}function Me(Ue,Ye){return Ye&&Dt(Ye,function(Xe,pt){Os(we,Ue,Xe,pt)}),Ue}var we=(h={uid:null,cfg:A},h[bn]=s,h[vs]=$,h.set=G,h[Za]=Me,h[Pu]=ee,h.ref=pe,h[Mo]=me,h[Zs]=le,h._block=fe,h);return qr(we,"uid",{c:!1,e:!1,w:!1,v:x}),F=Pv(we),Pf(F,A,"config","Creating"),we}function Vp(s,u){s?(s[Ja](u),s[md](2,108,u)):Av(u)}function Jo(s,u,f,h){var E=Gp(f,s||{},h);return u&&E[Za](E.cfg,u),E}function Gu(s,u,f){var h=s[Pl]||s;return h.cfg&&(h.cfg===s||h.cfg[Pl]===h)?h[Pu](u):(Vp(f,Pm+nr(s)),Jo(s,null,f)[Pu](u))}function Ac(s,u){if(s&&s[Qs])return s[Qs](u)}function Lv(s,u,f){var h;return f||(h=yc(function(E){f=E})),s&&xm(s)>0?ws(Ac(s[0],u),function(){Lv(of(s,1),u,f)}):f(),h}var zp=500,Fv="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function Ym(s,u,f){return!s&&Pe(s)?u:$a(s)?s:Ui(s)[Au]()==="true"}function Wp(s){return{mrg:!0,v:s}}function Ll(s,u,f){return{fb:f,isVal:s,v:u}}function Io(s,u){return{fb:u,set:Ym,v:!!s}}var Pd=[bi,yr,au,Pn],Pc=null,Zo;function sg(s,u){return function(){var f=arguments,h=Sh(u);if(h){var E=h.listener;E&&E[s]&&E[s][ma](E,f)}}}function Kp(){var s=Rr("Microsoft");return s&&(Pc=s.ApplicationInsights),Pc}function Sh(s){var u=Pc;return!u&&s.disableDbgExt!==!0&&(u=Pc||Kp()),u?u.ChromeDbgExt:null}function ug(s){if(!Zo){Zo={};for(var u=0;u<Pd[cr];u++)Zo[Pd[u]]=sg(Pd[u],s)}return Zo}var Hi,Md="warnToConsole",Ld="AI (Internal): ",Uv="AI: ",Mc="AITR_",_a={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},No=(Hi={},Hi[0]=null,Hi[1]="errorToConsole",Hi[2]=Md,Hi[3]="debugToConsole",Hi);function Fd(s){return s?'"'+s[eo](/\"/g,Qr)+'"':Qr}function Vu(s,u){var f=Cs();if(f){var h="log";f[s]&&(h=s),ut(f[h])&&f[h](u)}}var Fl=function(){function s(u,f,h,E){h===void 0&&(h=!1);var x=this;x[gd]=u,x[yl]=(h?Uv:Ld)+u;var A=Qr;zo()&&(A=Wo().stringify(E));var F=(f?" message:"+Fd(f):Qr)+(E?" props:"+Fd(A):Qr);x[yl]+=F}return s.dataType="MessageData",s}();function ks(s,u){return(s||{})[bn]||new $m(u)}var $m=function(){function s(u){this.identifier="DiagnosticLogger",this.queue=[];var f=0,h={},E,x,A,F,$;Qi(s,this,function(G){$=fe(u||{}),G.consoleLoggingLevel=function(){return E},G[md]=function(le,Me,we,Ue,Ye){Ye===void 0&&(Ye=!1);var Xe=new Fl(Me,we,Ye,Ue);if(F)throw nr(Xe);var pt=No[le]||Md;if(Ke(Xe[yl]))me("throw"+(le===1?"Critical":"Warning"),Xe);else{if(Ye){var Nr=+Xe[gd];!h[Nr]&&E>=le&&(G[pt](Xe[yl]),h[Nr]=!0)}else E>=le&&G[pt](Xe[yl]);ee(le,Xe)}},G.debugToConsole=function(le){Vu("debug",le),me("warning",le)},G[Ja]=function(le){Vu("warn",le),me("warning",le)},G.errorToConsole=function(le){Vu("error",le),me("error",le)},G.resetInternalMessageCount=function(){f=0,h={}},G[bl]=ee,G[Qs]=function(le){$&&$.rm(),$=null};function ee(le,Me){if(!pe()){var we=!0,Ue=Mc+Me[gd];if(h[Ue]?we=!1:h[Ue]=!0,we&&(le<=x&&(G.queue[Vr](Me),f++,me(le===1?"error":"warn",Me)),f===A)){var Ye="Internal events throttle limit per PageView reached for this app.",Xe=new Fl(23,Ye,!1);G.queue[Vr](Xe),le===1?G.errorToConsole(Ye):G[Ja](Ye)}}}function fe(le){return Gu(Jo(le,_a,G).cfg,function(Me){var we=Me.cfg;E=we[_l],x=we.loggingLevelTelemetry,A=we.maxMessageLimit,F=we.enableDebug})}function pe(){return f>=A}function me(le,Me){var we=Sh(u||{});we&&we[La]&&we[La](le,Me)}})}return s.__ieDyn=1,s}();function jv(s){return s||new $m}function _t(s,u,f,h,E,x){x===void 0&&(x=!1),jv(s)[md](u,f,h,E,x)}function zu(s,u){jv(s)[Ja](u)}var fu,Mf,Yv="toGMTString",Ul="toUTCString",Ud="cookie",As="expires",$v="isCookieUseDisabled",Jp="disableCookiesUsage",Lc="_ckMgr",jl=null,Yl=null,Bm=null,rn,Ps={},qm={},Hm=(fu={cookieCfg:Wp((Mf={},Mf[So]={fb:"cookieDomain",dfVal:wc},Mf.path={fb:"cookiePath",dfVal:wc},Mf.enabled=iu,Mf.ignoreCookies=iu,Mf.blockedCookies=iu,Mf)),cookieDomain:iu,cookiePath:iu},fu[Jp]=iu,fu);function du(){!rn&&(rn=Tu(function(){return id()}))}function Zp(s){return s?s.isEnabled():!0}function Gm(s,u){return u&&s&&ot(s.ignoreCookies)?ka(s.ignoreCookies,u)!==-1:!1}function Vm(s,u){return u&&s&&ot(s.blockedCookies)&&ka(s.blockedCookies,u)!==-1?!0:Gm(s,u)}function jd(s,u){var f=u[gl];if(Pe(f)){var h=void 0;Ke(s[$v])||(h=!s[$v]),Ke(s[Jp])||(h=!s[Jp]),f=h}return f}function Yd(s,u){var f,h,E,x,A,F,$,G,ee;s=Jo(s||qm,null,u).cfg,A=Gu(s,function(pe){pe[Za](pe.cfg,Hm),h=pe.ref(pe.cfg,"cookieCfg"),E=h[Sf]||"/",x=h[So],F=jd(s,h)!==!1,$=h.getCookie||zm,G=h.setCookie||Co,ee=h.delCookie||Co},u);var fe=(f={isEnabled:function(){var pe=jd(s,h)!==!1&&F&&Fc(u),me=qm[Lc];return pe&&me&&fe!==me&&(pe=Zp(me)),pe},setEnabled:function(pe){F=pe!==!1,h[gl]=pe},set:function(pe,me,le,Me,we){var Ue=!1;if(Zp(fe)&&!Vm(h,pe)){var Ye={},Xe=Dn(me||Qr),pt=Du(Xe,";");if(pt!==-1&&(Xe=Dn(li(me,pt)),Ye=$l(ni(me,pt+1))),Uu(Ye,So,Me||x,Ci,Ke),!Pe(le)){var Nr=Nc();if(Ke(Ye[As])){var dn=Nu(),pn=dn+le*1e3;if(pn>0){var Yn=new Date;Yn.setTime(pn),Uu(Ye,As,Xp(Yn,Nr?Yv:Ul)||Xp(Yn,Nr?Yv:Ul)||Qr,Ci)}}Nr||Uu(Ye,"max-age",Qr+le,null,Ke)}var er=Cd();er&&er[Lu]==="https:"&&(Uu(Ye,"secure",null,null,Ke),Yl===null&&(Yl=!Wm((ls()||{})[ki])),Yl&&Uu(Ye,"SameSite","None",null,Ke)),Uu(Ye,Sf,we||E,null,Ke),G(pe,Uc(Xe,Ye)),Ue=!0}return Ue},get:function(pe){var me=Qr;return Zp(fe)&&!Gm(h,pe)&&(me=$(pe)),me},del:function(pe,me){var le=!1;return Zp(fe)&&(le=fe.purge(pe,me)),le},purge:function(pe,me){var le,Me=!1;if(Fc(u)){var we=(le={},le[Sf]=me||"/",le[As]="Thu, 01 Jan 1970 00:00:01 GMT",le);Nc()||(we["max-age"]="0"),ee(pe,Uc(Qr,we)),Me=!0}return Me}},f[Qs]=function(pe){A&&A.rm(),A=null},f);return fe[Lc]=fe,fe}function Fc(s){if(jl===null){jl=!1,!rn&&du();try{var u=rn.v||{};jl=u[Ud]!==void 0}catch(f){_t(s,2,68,"Cannot access document.cookie - "+Pi(f),{exception:nr(f)})}}return jl}function $l(s){var u={};if(s&&s[cr]){var f=Dn(s)[Fu](";");Ft(f,function(h){if(h=Dn(h||Qr),h){var E=Du(h,"=");E===-1?u[h]=null:u[Dn(li(h,E))]=Dn(ni(h,E+1))}})}return u}function Xp(s,u){return ut(s[u])?s[u]():null}function Uc(s,u){var f=s||Qr;return Dt(u,function(h,E){f+="; "+h+(Pe(E)?Qr:"="+E)}),f}function zm(s){var u=Qr;if(!rn&&du(),rn.v){var f=rn.v[Ud]||Qr;Bm!==f&&(Ps=$l(f),Bm=f),u=Dn(Ps[s]||Qr)}return u}function Co(s,u){!rn&&du(),rn.v&&(rn.v[Ud]=s+"="+u)}function Wm(s){return mn(s)?!!(di(s,"CPU iPhone OS 12")||di(s,"iPad; CPU OS 12")||di(s,"Macintosh; Intel Mac OS X 10_14")&&di(s,"Version/")&&di(s,"Safari")||di(s,"Macintosh; Intel Mac OS X 10_14")&&za(s,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||di(s,"Chrome/5")||di(s,"Chrome/6")||di(s,"UnrealEngine")&&!di(s,"Chrome")||di(s,"UCBrowser/12")||di(s,"UCBrowser/11")):!1}var $d={perfEvtsSendAll:!1};function Bv(s){s.h=null;var u=s.cb;s.cb=[],Ft(u,function(f){At(f.fn,[f.arg])})}function Ms(s,u,f,h){Ft(s,function(E){E&&E[u]&&(f?(f.cb[Vr]({fn:h,arg:E}),f.h=f.h||Ru(Bv,0,f)):At(h,[E]))})}var Eh=function(){function s(u){this.listeners=[];var f,h,E=[],x={h:null,cb:[]},A=Jo(u,$d);h=A[Pu](function(F){f=!!F.cfg.perfEvtsSendAll}),Qi(s,this,function(F){qr(F,"listeners",{g:function(){return E}}),F[Xa]=function($){E[Vr]($)},F[Mu]=function($){for(var G=ka(E,$);G>-1;)E[ht](G,1),G=ka(E,$)},F[bi]=function($){Ms(E,bi,x,function(G){G[bi]($)})},F[yr]=function($,G){Ms(E,yr,x,function(ee){ee[yr]($,G)})},F[au]=function($,G){Ms(E,au,G?x:null,function(ee){ee[au]($,G)})},F[Pn]=function($){$&&(f||!$[Np]())&&Ms(E,Pn,null,function(G){$[eu]?Ru(function(){return G[Pn]($)},0):G[Pn]($)})},F[Ss]=function($){$&&$[cr]&&Ms(E,Ss,x,function(G){G[Ss]($)})},F[Dl]=function($){$&&$[Fa]&&Ms(E,Dl,x,function(G){G[Dl]($)})},F[Rl]=function($,G){if($>0){var ee=G||0;Ms(E,Rl,x,function(fe){fe[Rl]($,ee)})}},F[Qs]=function($){var G=function(){h&&h.rm(),h=null,E=[],x.h&&x.h[Lo](),x.h=null,x.cb=[]},ee;if(Ms(E,"unload",null,function(fe){var pe=fe[Qs]($);pe&&(ee||(ee=[]),ee[Vr](pe))}),ee)return yc(function(fe){return ws(kp(ee),function(){G(),fe()})});G()}})}return s.__ieDyn=1,s}(),Wu="ctx",Km="ParentContextKey",jc="ChildrenContextKey",qv=null,Xo=function(){function s(u,f,h){var E=this;if(E.start=Nu(),E[Zn]=u,E[eu]=h,E[Np]=function(){return!1},ut(f)){var x;qr(E,"payload",{g:function(){return!x&&ut(f)&&(x=f(),f=null),x}})}E[vc]=function(A){return A?A===s[Km]||A===s[jc]?E[A]:(E[Wu]||{})[A]:null},E[Bi]=function(A,F){if(A)if(A===s[Km])E[A]||(E[Np]=function(){return!0}),E[A]=F;else if(A===s[jc])E[A]=F;else{var $=E[Wu]=E[Wu]||{};$[A]=F}},E[_d]=function(){var A=0,F=E[vc](s[jc]);if(ot(F))for(var $=0;$<F[cr];$++){var G=F[$];G&&(A+=G[hs])}E[hs]=Nu()-E.start,E.exTime=E[hs]-A,E[_d]=function(){}}}return s.ParentContextKey="parent",s.ChildrenContextKey="childEvts",s}(),Ls=function(){function s(u){this.ctx={},Qi(s,this,function(f){f.create=function(h,E,x){return new Xo(h,E,x)},f.fire=function(h){h&&(h[_d](),u&&ut(u[Pn])&&u[Pn](h))},f[Bi]=function(h,E){if(h){var x=f[Wu]=f[Wu]||{};x[h]=E}},f[vc]=function(h){return(f[Wu]||{})[h]}})}return s.__ieDyn=1,s}(),Hn="CoreUtils.doPerf";function Lf(s,u,f,h,E){if(s){var x=s;if(x[ou]&&(x=x[ou]()),x){var A=void 0,F=x[vc](Hn);try{if(A=x.create(u(),h,E),A){if(F&&A[Bi]&&(A[Bi](Xo[Km],F),F[vc]&&F[Bi])){var $=F[vc](Xo[jc]);$||($=[],F[Bi](Xo[jc],$)),$[Vr](A)}return x[Bi](Hn,A),f(A)}}catch(G){A&&A[Bi]&&A[Bi]("exception",G)}finally{A&&x.fire(A),x[Bi](Hn,F)}}}return f()}function Yc(){return qv}var Bd="00000000000000000000000000000000",fr="0000000000000000";function no(s,u,f){return s&&s[cr]===u&&s!==f?!!s.match(/^[\da-f]*$/i):!1}function io(s){return no(s,32,Bd)}function Fi(s){return no(s,16,fr)}var $c=Hp("plugin");function Sn(s){return $c.get(s,"state",{},!0)}function Bc(s,u){for(var f=[],h=null,E=s[Qa](),x;E;){var A=E[jo]();if(A){h&&h[mc]&&A[ga]&&h[mc](A),x=Sn(A);var F=!!x[Xr];A[Xr]&&(F=A[Xr]()),F||f[Vr](A),h=A,E=E[Qa]()}}Ft(f,function($){var G=s[Ai]();$[Xs](s.getCfg(),G,u,s[Qa]()),x=Sn($),!$[Ai]&&!x[Ai]&&(x[Ai]=G),x[Xr]=!0,delete x[ii]})}function pu(s){return s.sort(function(u,f){var h=0;if(f){var E=f[ga];u[ga]?h=E?u[Ed]-f[Ed]:1:E&&(h=-1)}else h=u?1:-1;return h})}function Qp(s){var u={};return{getName:function(){return u[Zn]},setName:function(f){s&&s.setName(f),u[Zn]=f},getTraceId:function(){return u[_f]},setTraceId:function(f){s&&s.setTraceId(f),io(f)&&(u[_f]=f)},getSpanId:function(){return u[qo]},setSpanId:function(f){s&&s.setSpanId(f),Fi(f)&&(u[qo]=f)},getTraceFlags:function(){return u[ha]},setTraceFlags:function(f){s&&s.setTraceFlags(f),u[ha]=f}}}var mu="TelemetryPluginChain",Jm="_hasRun",Ku="_getTelCtx",Zm=0;function Xm(s,u,f){for(;s;){if(s[jo]()===f)return s;s=s[Qa]()}return j([f],u.config||{},u)}function d(s,u,f,h){var E=null,x=[];u||(u=Jo({},null,f[bn])),h!==null&&(E=h?Xm(s,f,h):s);var A={_next:$,ctx:{core:function(){return f},diagLog:function(){return ks(f,u.cfg)},getCfg:function(){return u.cfg},getExtCfg:ee,getConfig:fe,hasNext:function(){return!!E},getNext:function(){return E},setNext:function(me){E=me},iterate:pe,onComplete:F}};function F(me,le){for(var Me=[],we=2;we<arguments.length;we++)Me[we-2]=arguments[we];me&&x[Vr]({func:me,self:Ke(le)?A.ctx:le,args:Me})}function $(){var me=E;if(E=me?me[Qa]():null,!me){var le=x;le&&le[cr]>0&&(Ft(le,function(Me){try{Me.func.call(Me.self,Me.args)}catch(we){_t(f[bn],2,73,"Unexpected Exception during onComplete - "+nr(we))}}),x=[])}return me}function G(me,le){var Me=null,we=u.cfg;if(we&&me){var Ue=we[bc];!Ue&&le&&(Ue={}),we[bc]=Ue,Ue=u.ref(we,bc),Ue&&(Me=Ue[me],!Me&&le&&(Me={}),Ue[me]=Me,Me=u.ref(Ue,me))}return Me}function ee(me,le){var Me=G(me,!0);return le&&Dt(le,function(we,Ue){if(Pe(Me[we])){var Ye=u.cfg[we];(Ye||!Pe(Ye))&&(Me[we]=Ye)}Os(u,Me,we,Ue)}),u[Za](Me,le)}function fe(me,le,Me){Me===void 0&&(Me=!1);var we,Ue=G(me,!1),Ye=u.cfg;return Ue&&(Ue[le]||!Pe(Ue[le]))?we=Ue[le]:(Ye[le]||!Pe(Ye[le]))&&(we=Ye[le]),we||!Pe(we)?we:Me}function pe(me){for(var le;le=A._next();){var Me=le[jo]();Me&&me(Me)}}return A}function g(s,u,f,h){var E=Jo(u),x=d(s,E,f,h),A=x.ctx;function F(G){var ee=x._next();return ee&&ee[ga](G,A),!ee}function $(G,ee){return G===void 0&&(G=null),ot(G)&&(G=j(G,E.cfg,f,ee)),g(G||A[Qa](),E.cfg,f,ee)}return A[$i]=F,A[Bo]=$,A}function S(s,u,f){var h=Jo(u.config),E=d(s,h,u,f),x=E.ctx;function A($){var G=E._next();return G&&G[Qs](x,$),!G}function F($,G){return $===void 0&&($=null),ot($)&&($=j($,h.cfg,u,G)),S($||x[Qa](),u,G)}return x[$i]=A,x[Bo]=F,x}function D(s,u,f){var h=Jo(u.config),E=d(s,h,u,f),x=E.ctx;function A($){return x.iterate(function(G){ut(G[tu])&&G[tu](x,$)})}function F($,G){return $===void 0&&($=null),ot($)&&($=j($,h.cfg,u,G)),D($||x[Qa](),u,G)}return x[$i]=A,x[Bo]=F,x}function j(s,u,f,h){var E=null,x=!h;if(ot(s)&&s[cr]>0){var A=null;Ft(s,function(F){if(!x&&h===F&&(x=!0),x&&F&&ut(F[ga])){var $=Z(F,u,f);E||(E=$),A&&A._setNext($),A=$}})}return h&&!E?j([h],u,f):E}function Z(s,u,f){var h=null,E=ut(s[ga]),x=ut(s[mc]),A;s?A=s[yo]+"-"+s[Ed]+"-"+Zm++:A="Unknown-0-"+Zm++;var F={getPlugin:function(){return s},getNext:function(){return h},processTelemetry:ee,unload:fe,update:pe,_id:A,_setNext:function(me){h=me}};function $(){var me;return s&&ut(s[Ku])&&(me=s[Ku]()),me||(me=g(F,u,f)),me}function G(me,le,Me,we,Ue){var Ye=!1,Xe=s?s[yo]:mu,pt=me[Jm];return pt||(pt=me[Jm]={}),me.setNext(h),s&&Lf(me[Ai](),function(){return Xe+":"+Me},function(){pt[A]=!0;try{var Nr=h?h._id:Qr;Nr&&(pt[Nr]=!1),Ye=le(me)}catch(pn){var dn=h?pt[h._id]:!0;dn&&(Ye=!0),(!h||!dn)&&_t(me[La](),1,73,"Plugin ["+Xe+"] failed during "+Me+" - "+nr(pn)+", run flags: "+nr(pt))}},we,Ue),Ye}function ee(me,le){le=le||$();function Me(we){if(!s||!E)return!1;var Ue=Sn(s);return Ue[ii]||Ue[Sd]?!1:(x&&s[mc](h),s[ga](me,we),!0)}G(le,Me,"processTelemetry",function(){return{item:me}},!me.sync)||le[$i](me)}function fe(me,le){function Me(){var we=!1;if(s){var Ue=Sn(s),Ye=s[Ai]||Ue[Ai];s&&(!Ye||Ye===me.core())&&!Ue[ii]&&(Ue[Ai]=null,Ue[ii]=!0,Ue[Xr]=!1,s[ii]&&s[ii](me,le)===!0&&(we=!0))}return we}G(me,Me,"unload",function(){},le[eu])||me[$i](le)}function pe(me,le){function Me(){var we=!1;if(s){var Ue=Sn(s),Ye=s[Ai]||Ue[Ai];s&&(!Ye||Ye===me.core())&&!Ue[ii]&&s[tu]&&s[tu](me,le)===!0&&(we=!0)}return we}G(me,Me,"update",function(){},!1)||me[$i](le)}return Jt(F)}function X(){var s=[];function u(h){h&&s[Vr](h)}function f(h,E){Ft(s,function(x){try{x(h,E)}catch(A){_t(h[La](),2,73,"Unexpected error calling unload handler - "+nr(A))}}),s=[]}return{add:u,run:f}}function oe(){var s=[];function u(h){var E=s;s=[],Ft(E,function(x){try{(x.rm||x.remove).call(x)}catch(A){_t(h,2,73,"Unloading:"+nr(A))}})}function f(h){h&&ac(s,h)}return{run:u,add:f}}var ve,ye="getPlugin",et=(ve={},ve[bc]={isVal:wc,v:{}},ve),Ut=function(){function s(){var u=this,f,h,E,x,A;G(),Qi(s,u,function(ee){ee[Xs]=function(fe,pe,me,le){$(fe,pe,le),f=!0},ee[ii]=function(fe,pe){var me,le=ee[Ai];if(!le||fe&&le!==fe[Ai]())return;var Me,we=!1,Ue=fe||S(null,le,E&&E[ye]?E[ye]():E),Ye=pe||(me={reason:0},me[eu]=!1,me);function Xe(){we||(we=!0,x.run(Ue,pe),A.run(Ue[La]()),Me===!0&&Ue[$i](Ye),G())}return!ee[gs]||ee[gs](Ue,Ye,Xe)!==!0?Xe():Me=!0,Me},ee[tu]=function(fe,pe){var me=ee[Ai];if(!me||fe&&me!==fe[Ai]())return;var le,Me=!1,we=fe||D(null,me,E&&E[ye]?E[ye]():E),Ue=pe||{reason:0};function Ye(){Me||(Me=!0,$(we.getCfg(),we.core(),we[Qa]()))}return!ee._doUpdate||ee._doUpdate(we,Ue,Ye)!==!0?Ye():le=!0,le},Mi(ee,"_addUnloadCb",function(){return x},"add"),Mi(ee,"_addHook",function(){return A},"add"),qr(ee,"_unloadHooks",{g:function(){return A}})}),u[La]=function(ee){return F(ee)[La]()},u[Xr]=function(){return f},u.setInitialized=function(ee){f=ee},u[mc]=function(ee){E=ee},u[$i]=function(ee,fe){fe?fe[$i](ee):E&&ut(E[ga])&&E[ga](ee,null)},u._getTelCtx=F;function F(ee){ee===void 0&&(ee=null);var fe=ee;if(!fe){var pe=h||g(null,{},u[Ai]);E&&E[ye]?fe=pe[Bo](null,E[ye]):fe=pe[Bo](null,E)}return fe}function $(ee,fe,pe){Jo(ee,et,ks(fe)),!pe&&fe&&(pe=fe[ea]()[Qa]());var me=E;E&&E[ye]&&(me=E[ye]()),u[Ai]=fe,h=g(pe,ee,fe,me)}function G(){f=!1,u[Ai]=null,h=null,E=null,A=oe(),x=X()}}return s.__ieDyn=1,s}();function or(s,u,f){var h={id:u,fn:f};ac(s,h);var E={remove:function(){Ft(s,function(x,A){if(x.id===h.id)return s[ht](A,1),-1})}};return E}function dr(s,u,f){for(var h=!1,E=s[cr],x=0;x<E;++x){var A=s[x];if(A)try{if(A.fn[ma](null,[u])===!1){h=!0;break}}catch(F){_t(f,2,64,"Telemetry initializer failed: "+Pi(F),{exception:nr(F)},!0)}}return!h}var dt=function(s){hf(u,s);function u(){var f=s.call(this)||this;f.identifier="TelemetryInitializerPlugin",f.priority=199;var h,E;x(),Qi(u,f,function(A,F){A.addTelemetryInitializer=function($){return or(E,h++,$)},A[ga]=function($,G){dr(E,$,G?G[La]():A[La]())&&A[$i]($,G)},A[gs]=function(){x()}});function x(){h=0,E=[]}return f}return u.__ieDyn=1,u}(Ut),sr,Bt="Plugins must provide initialize method",Or="_notificationManager",kr="SDK is still unloading...",Pt="SDK is not initialized",Mn=100,Ff=5e4,Ln=as((sr={cookieCfg:{}},sr[xl]={rdOnly:!0,ref:!0,v:[]},sr[Cl]={rdOnly:!0,ref:!0,v:[]},sr[bc]={ref:!0,v:{}},sr[Ap]=iu,sr.loggingLevelConsole=0,sr.diagnosticLogInterval=iu,sr));function ao(s,u){return new Ls(u)}function qd(s,u,f){var h,E=[],x=[],A={};return Ft(f,function(F){(Pe(F)||Pe(F[Xs]))&&_r(Bt);var $=F[Ed],G=F[yo];F&&$&&(Pe(A[$])?A[$]=G:zu(s,"Two extensions have same priority #"+$+" - "+A[$]+", "+G)),!$||$<u?E[Vr](F):x[Vr](F)}),h={},h[Ai]=E,h[Cl]=x,h}function Qm(s,u){var f=!1;return Ft(u,function(h){if(h===s)return f=!0,-1}),f}function Hd(s,u,f,h){f&&Dt(f,function(E,x){h&&da(x)&&da(u[E])&&Hd(s,u[E],x,h),h&&da(x)&&da(u[E])?Hd(s,u[E],x,h):s.set(u,E,x)})}function Gd(s,u){var f=null,h=-1;return Ft(s,function(E,x){if(E.w===u)return f=E,h=x,-1}),{i:h,l:f}}function em(s,u){var f=Gd(s,u).l;return f||(f={w:u,rm:function(){var h=Gd(s,u);h.i!==-1&&s[ht](h.i,1)}},s[Vr](f)),f}function Hv(s,u,f){Ft(u,function(h){var E=Gu(s,h.w,f);delete h.w,h.rm=function(){E.rm()}})}function Fe(s,u,f,h){return u.add(s[Pu](function(E){var x=E.cfg.disableDbgExt;x===!0&&h&&(f[Mu](h),h=null),f&&!h&&x!==!0&&(h=ug(E.cfg),f[Xa](h))})),h}function xt(s){return qr({rm:function(){s.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(s)+">"}})}var zt=function(){function s(){var u,f,h,E,x,A,F,$,G,ee,fe,pe,me,le,Me,we,Ue,Ye,Xe,pt,Nr,dn,pn,Yn,er,Ht,cn,aa,Ii,nt,Gt,zn;Qi(s,this,function($e){Ie(),$e._getDbgPlgTargets=function(){return[pn,E]},$e[Xr]=function(){return f},$e.activeStatus=function(){return Ht},$e._setPendingStatus=function(){Ht=3},$e[Xs]=function(Oe,St,tr,kt){me&&_r(kr),$e[Xr]()&&_r("Core cannot be initialized more than once"),u=Jo(Oe,Ln,tr||$e[bn],!1),Oe=u.cfg,yu(u[Pu](function($n){var sa=$n.cfg,ns=Ht===3;if(!ns){aa=sa.initInMemoMaxSize||Mn;var bu=sa[Fo],dm=sa.endpointUrl;if(Pe(bu)){Nr=null,Ht=Ka[zr];var pm="Please provide instrumentation key";f?(_t(h,1,100,pm),Ni()):_r(pm);return}var a_=[];if(lr(bu)?(a_[Vr](bu),Nr=null):Nr=bu,lr(dm)?(a_[Vr](dm),cn=null):cn=dm,a_[cr]){Ii=!1,Ht=3;var K_=wc(sa.initTimeOut)?sa.initTimeOut:Ff,Vb=xv(a_);Ru(function(){Ii||ar()},K_),ws(Vb,function(Lh){try{if(Ii)return;if(!Lh.rejected){var Fh=Lh[Uo];if(Fh&&Fh[cr]){var Yy=Fh[0];if(Nr=Yy&&Yy[Uo],Fh[cr]>1){var $y=Fh[1];cn=$y&&$y[Uo]}}Nr&&(Oe[Fo]=Nr,Oe.endpointUrl=cn)}ar()}catch{Ii||ar()}})}else ar();var o_=$n.ref($n.cfg,bc);Dt(o_,function(Lh){$n.ref(o_,Lh)})}})),x=kt,Xe=Fe(u,Ye,x&&$e[vd](),Xe),Ph(),$e[bn]=tr;var hr=Oe[xl];if(ee=[],ee[Vr].apply(ee,ml(ml([],St,!1),hr)),fe=Oe[Cl],Ea(null),(!pe||pe[cr]===0)&&_r("No "+Cl+" available"),fe&&fe[cr]>1){var si=$e[jo]("TeeChannelController");(!si||!si.plugin)&&_t(h,1,28,"TeeChannel required")}Hv(Oe,dn,h),dn=null,f=!0,Ht===Ka.ACTIVE&&Ni()},$e.getChannels=function(){var Oe=[];return pe&&Ft(pe,function(St){Oe[Vr](St)}),Jt(Oe)},$e.track=function(Oe){Lf($e[ou](),function(){return"AppInsightsCore:track"},function(){Oe===null&&(oa(Oe),_r("Invalid telemetry item")),!Oe[Zn]&&Pe(Oe[Zn])&&(oa(Oe),_r("telemetry name required")),Oe[bo]=Oe[bo]||Nr,Oe[hs]=Oe[hs]||Sc(new Date),Oe.ver=Oe.ver||"4.0",!me&&$e[Xr]()&&Ht===Ka.ACTIVE?xo()[$i](Oe):Ht!==Ka[zr]&&E[cr]<=aa&&E[Vr](Oe)},function(){return{item:Oe}},!Oe.sync)},$e[ea]=xo,$e[vd]=function(){return x||(x=new Eh(u.cfg),$e[Or]=x),x},$e[Xa]=function(Oe){$e.getNotifyMgr()[Xa](Oe)},$e[Mu]=function(Oe){x&&x[Mu](Oe)},$e.getCookieMgr=function(){return $||($=Yd(u.cfg,$e[bn])),$},$e.setCookieMgr=function(Oe){$!==Oe&&(Ac($,!1),$=Oe)},$e[ou]=function(){return A||F||Yc()},$e.setPerfMgr=function(Oe){A=Oe},$e.eventCnt=function(){return E[cr]},$e.releaseQueue=function(){if(f&&E[cr]>0){var Oe=E;E=[],Ht===2?Ft(Oe,function(St){St[bo]=St[bo]||Nr,xo()[$i](St)}):_t(h,2,20,"core init status is not active")}},$e[pc]=function(Oe){return Me=Oe||null,zn=!1,nt&&nt[Lo](),Wn(!0)};function ar(){Ii=!0,Pe(Nr)?(Ht=Ka[zr],_t(h,1,112,"ikey can't be resolved from promises")):Ht=Ka.ACTIVE,Ni()}function Ni(){f&&($e.releaseQueue(),$e[pc]())}function Wn(Oe){if((!nt||!nt[gl])&&!zn){var St=Oe||h&&h.queue[cr]>0;St&&(Gt||(Gt=!0,yu(u[Pu](function(tr){var kt=tr.cfg.diagnosticLogInterval;(!kt||!(kt>0))&&(kt=1e4);var hr=!1;nt&&(hr=nt[gl],nt[Lo]()),nt=wp(Ah,kt),nt.unref(),nt[gl]=hr}))),nt[gl]=!0)}return nt}$e[hd]=function(){zn=!0,nt&&nt[Lo](),Ah()},Id($e,function(){return le},["addTelemetryInitializer"]),$e[Qs]=function(Oe,St,tr){var kt;Oe===void 0&&(Oe=!0),f||_r(Pt),me&&_r(kr);var hr=(kt={reason:50},kt[eu]=Oe,kt.flushComplete=!1,kt),si;Oe&&!St&&(si=yc(function(ns){St=ns}));var $n=S(rp(),$e);$n[Yo](function(){Ye.run($e[bn]),Lv([$,x,h],Oe,function(){Ie(),St&&St(hr)})},$e);function sa(ns){hr.flushComplete=ns,me=!0,Ue.run($n,hr),$e[hd](),$n[$i](hr)}return Ah(),cm(Oe,sa,6,tr),si},$e[jo]=Bs,$e.addPlugin=function(Oe,St,tr,kt){if(!Oe){kt&&kt(!1),Mh(Bt);return}var hr=Bs(Oe[yo]);if(hr&&!St){kt&&kt(!1),Mh("Plugin ["+Oe[yo]+"] is already loaded!");return}var si={reason:16};function $n(bu){ee[Vr](Oe),si.added=[Oe],Ea(si),kt&&kt(!0)}if(hr){var sa=[hr.plugin],ns={reason:2,isAsync:!!tr};Wl(sa,ns,function(bu){bu?(si.removed=sa,si.reason|=32,$n()):kt&&kt(!1)})}else $n()},$e.updateCfg=function(Oe,St){St===void 0&&(St=!0);var tr;if($e[Xr]()){tr={reason:1,cfg:u.cfg,oldCfg:xu({},u.cfg),newConfig:xu({},Oe),merge:St},Oe=tr.newConfig;var kt=u.cfg;Oe[xl]=kt[xl],Oe[Cl]=kt[Cl]}u._block(function(hr){var si=hr.cfg;Hd(hr,si,Oe,St),St||Dt(si,function($n){Pr(Oe,$n)||hr.set(si,$n,iu)}),hr[Za](si,Ln)},!0),u[vs](),tr&&fm(tr)},$e.evtNamespace=function(){return we},$e.flush=cm,$e.getTraceCtx=function(Oe){return pt||(pt=Qp()),pt},$e.setTraceCtx=function(Oe){pt=Oe||null},$e.addUnloadHook=yu,Mi($e,"addUnloadCb",function(){return Ue},"add"),$e.onCfgChange=function(Oe){var St;return f?St=Gu(u.cfg,Oe,$e[bn]):St=em(dn,Oe),xt(St)},$e.getWParam=function(){return Ri()||u.cfg.enableWParam?0:-1};function $s(){var Oe={};Yn=[];var St=function(tr){tr&&Ft(tr,function(kt){if(kt[yo]&&kt[$o]&&!Oe[kt.identifier]){var hr=kt[yo]+"="+kt[$o];Yn[Vr](hr),Oe[kt.identifier]=kt}})};St(pe),fe&&Ft(fe,function(tr){St(tr)}),St(ee)}function Ie(){f=!1,u=Jo({},Ln,$e[bn]),u.cfg[_l]=1,qr($e,"config",{g:function(){return u.cfg},s:function(St){$e.updateCfg(St,!1)}}),qr($e,"pluginVersionStringArr",{g:function(){return Yn||$s(),Yn}}),qr($e,"pluginVersionString",{g:function(){return er||(Yn||$s(),er=Yn.join(";")),er||Qr}}),qr($e,"logger",{g:function(){return h||(h=new $m(u.cfg),u[bn]=h),h},s:function(St){u[bn]=St,h!==St&&(Ac(h,!1),h=St)}}),$e[bn]=new $m(u.cfg),pn=[];var Oe=$e.config[xl]||[];Oe.splice(0,Oe[cr]),ac(Oe,pn),le=new dt,E=[],Ac(x,!1),x=null,A=null,F=null,Ac($,!1),$=null,G=null,ee=[],fe=null,pe=null,me=!1,Me=null,we=Bu("AIBaseCore",!0),Ue=X(),pt=null,Nr=null,Ye=oe(),dn=[],er=null,Yn=null,zn=!1,nt=null,Gt=!1,Ht=0,cn=null,aa=null,Ii=!1}function xo(){var Oe=g(rp(),u.cfg,$e);return Oe[Yo](Wn),Oe}function Ea(Oe){var St=qd($e[bn],zp,ee);G=null,er=null,Yn=null,pe=(fe||[])[0]||[],pe=pu(ac(pe,St[Cl]));var tr=ac(pu(St[Ai]),pe);pn=Jt(tr);var kt=$e.config[xl]||[];kt.splice(0,kt[cr]),ac(kt,pn);var hr=xo();pe&&pe[cr]>0&&Bc(hr[Bo](pe),tr),Bc(hr,tr),Oe&&fm(Oe)}function Bs(Oe){var St=null,tr=null,kt=[];return Ft(pn,function(hr){if(hr[yo]===Oe&&hr!==le)return tr=hr,-1;hr.getChannel&&kt[Vr](hr)}),!tr&&kt[cr]>0&&Ft(kt,function(hr){if(tr=hr.getChannel(Oe),!tr)return-1}),tr&&(St={plugin:tr,setEnabled:function(hr){Sn(tr)[Sd]=!hr},isEnabled:function(){var hr=Sn(tr);return!hr[ii]&&!hr[Sd]},remove:function(hr,si){var $n;hr===void 0&&(hr=!0);var sa=[tr],ns=($n={reason:1},$n[eu]=hr,$n);Wl(sa,ns,function(bu){bu&&Ea({reason:32,removed:sa}),si&&si(bu)})}}),St}function rp(){if(!G){var Oe=(pn||[]).slice();ka(Oe,le)===-1&&Oe[Vr](le),G=j(pu(Oe),u.cfg,$e)}return G}function Wl(Oe,St,tr){if(Oe&&Oe[cr]>0){var kt=j(Oe,u.cfg,$e),hr=S(kt,$e);hr[Yo](function(){var si=!1,$n=[];Ft(ee,function(ns,bu){Qm(ns,Oe)?si=!0:$n[Vr](ns)}),ee=$n,er=null,Yn=null;var sa=[];fe&&(Ft(fe,function(ns,bu){var dm=[];Ft(ns,function(pm){Qm(pm,Oe)?si=!0:dm[Vr](pm)}),sa[Vr](dm)}),fe=sa),tr&&tr(si),Wn()}),hr[$i](St)}else tr(!1)}function Ah(){if(h&&h.queue){var Oe=h.queue.slice(0);h.queue[cr]=0,Ft(Oe,function(St){var tr,kt=(tr={},tr[Zn]=Me||"InternalMessageId: "+St[gd],tr[bo]=Nr,tr[hs]=Sc(new Date),tr.baseType=Fl.dataType,tr.baseData={message:St[yl]},tr);$e.track(kt)})}}function cm(Oe,St,tr,kt){var hr=1,si=!1,$n=null;kt=kt||5e3;function sa(){hr--,si&&hr===0&&($n&&$n[Lo](),$n=null,St&&St(si),St=null)}if(pe&&pe[cr]>0){var ns=xo()[Bo](pe);ns.iterate(function(bu){if(bu.flush){hr++;var dm=!1;bu.flush(Oe,function(){dm=!0,sa()},tr)||dm||(Oe&&$n==null?$n=Ru(function(){$n=null,sa()},kt):sa())}})}return si=!0,sa(),!0}function Ph(){var Oe;yu(u[Pu](function(St){var tr=St.cfg.enablePerfMgr;if(tr){var kt=St.cfg[Ap];(Oe!==kt||!Oe)&&(kt||(kt=ao),Mp(St.cfg,Ap,kt),Oe=kt,F=null),!A&&!F&&ut(kt)&&(F=kt($e,$e[vd]()))}else F=null,Oe=null}))}function fm(Oe){var St=D(rp(),$e);St[Yo](Wn),(!$e._updateHook||$e._updateHook(St,Oe)!==!0)&&St[$i](Oe)}function Mh(Oe){var St=$e[bn];St?(_t(St,2,73,Oe),Wn()):_r(Oe)}function oa(Oe){var St=$e[vd]();St&&St[yr]([Oe],2)}function yu(Oe){Ye.add(Oe)}})}return s.__ieDyn=1,s}();function en(s,u){try{if(s&&s!==""){var f=Wo().parse(s);if(f&&f[va]&&f[va]>=f.itemsAccepted&&f.itemsReceived-f.itemsAccepted===f.errors[cr])return f}}catch(h){_t(u,1,43,"Cannot parse the response. "+(h[Zn]||nr(h)),{response:s})}return null}var hn="",En="NoResponseBody",wi="&"+En+"=true",Ju="POST",Fs=function(){function s(){var u=0,f,h,E,x,A,F,$,G,ee,fe,pe,me,le,Me;Qi(s,this,function(we,Ue){var Ye=!0;Ii(),we[Xs]=function(nt,Gt){E=Gt,h&&_t(E,1,28,"Sender is already initialized"),we.SetConfig(nt),h=!0},we._getDbgPlgTargets=function(){return[h,x,F,f]},we.SetConfig=function(nt){try{if(A=nt.senderOnCompleteCallBack||{},F=!!nt.disableCredentials,$=nt.fetchCredentials,x=!!nt.isOneDs,f=!!nt.enableSendPromise,ee=!!nt.disableXhr,fe=!!nt.disableBeacon,pe=!!nt.disableBeaconSync,Me=nt.timeWrapper,le=!!nt.addNoResponse,me=!!nt.disableFetchKeepAlive,G={sendPOST:Ht},x||(Ye=!1),F){var Gt=Cd();Gt&&Gt.protocol&&Gt.protocol[Au]()==="file:"&&(Ye=!1)}return!0}catch{}return!1},we.getSyncFetchPayload=function(){return u},we.getSenderInst=function(nt,Gt){return nt&&nt[cr]?dn(nt,Gt):null},we.getFallbackInst=function(){return G},we[gs]=function(nt,Gt){Ii()};function Xe(nt,Gt){pn(Gt,200,{},nt)}function pt(nt,Gt){_t(E,2,26,"Failed to send telemetry.",{message:nt}),pn(Gt,400,{})}function Nr(nt){pt("No endpoint url is provided for the batch",nt)}function dn(nt,Gt){for(var zn,$e=0,ar=null,Ni=0;ar==null&&Ni<nt[cr];)$e=nt[Ni],!ee&&$e===1?ta()?ar=aa:lu()&&(ar=Ht):$e===2&&Dd(Gt)&&(!Gt||!me)?ar=cn:$e===3&&xs()&&(Gt?!pe:!fe)&&(ar=er),Ni++;return ar?(zn={_transport:$e,_isSync:Gt},zn[bs]=ar,zn):null}function pn(nt,Gt,zn,$e){try{nt&&nt(Gt,zn,$e)}catch{}}function Yn(nt,Gt){var zn=ls(),$e=nt[ys];if(!$e)return Nr(Gt),!0;$e=nt[ys]+(le?wi:hn);var ar=nt[Fa],Ni=x?ar:new Blob([ar],{type:"text/plain;charset=UTF-8"}),Wn=zn.sendBeacon($e,Ni);return Wn}function er(nt,Gt,zn){var $e=nt[Fa];try{if($e)if(Yn(nt,Gt))Xe(hn,Gt);else{var ar=A&&A.beaconOnRetry;ar&&ut(ar)?ar(nt,Gt,Yn):(G&&G[bs](nt,Gt,!0),_t(E,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Ni){x&&zu(E,"Failed to send telemetry using sendBeacon API. Ex:"+nr(Ni)),pn(Gt,x?0:400,{},hn)}}function Ht(nt,Gt,zn){var $e,ar,Ni,Wn=nt[Cp]||{};!zn&&f&&($e=yc(function(Ea,Bs){ar=Ea,Ni=Bs})),x&&zn&&nt.disableXhrSync&&(zn=!1);var $s=nt[ys];if(!$s){Nr(Gt),ar&&ar(!1);return}var Ie=Tc(Ju,$s,Ye,!0,zn,nt[gf]);x||Ie[yd]("Content-type","application/json"),Ft(Cn(Wn),function(Ea){Ie[yd](Ea,Wn[Ea])}),Ie.onreadystatechange=function(){x||(xo(Ie),Ie.readyState===4&&ar&&ar(!0))},Ie.onload=function(){x&&xo(Ie)};function xo(Ea){var Bs=A&&A.xhrOnComplete,rp=Bs&&ut(Bs);if(rp)Bs(Ea,Gt,nt);else{var Wl=Es(Ea);pn(Gt,Ea[to],Fp(Ea,x),Wl)}}return Ie.onerror=function(Ea){pn(Gt,x?Ie[to]:400,Fp(Ie,x),x?hn:ro(Ie)),Ni&&Ni(Ea)},Ie.ontimeout=function(){pn(Gt,x?Ie[to]:500,Fp(Ie,x),x?hn:ro(Ie)),ar&&ar(!1)},Ie.send(nt[Fa]),$e}function cn(nt,Gt,zn){var $e,ar=nt[ys],Ni=nt[Fa],Wn=x?Ni:new Blob([Ni],{type:"application/json"}),$s,Ie,xo,Ea=new Headers,Bs=Ni[cr],rp=!1,Wl=!1,Ah=nt[Cp]||{},cm=($e={method:Ju,body:Wn},$e[Fv]=!0,$e);nt.headers&&Cn(nt.headers)[cr]>0&&(Ft(Cn(Ah),function(oa){Ea.append(oa,Ah[oa])}),cm[Cp]=Ea),$?cm.credentials=$:Ye&&x&&(cm.credentials="include"),zn&&(cm.keepalive=!0,u+=Bs,x?nt._sendReason===2&&(rp=!0,le&&(ar+=wi)):rp=!0);var Ph=new Request(ar,cm);try{Ph[Fv]=!0}catch{}if(!zn&&f&&($s=yc(function(oa,yu){Ie=oa,xo=yu})),!ar){Nr(Gt),Ie&&Ie(!1);return}function fm(oa){pn(Gt,x?0:400,{},x?hn:oa)}function Mh(oa,yu,Oe){var St=oa[to],tr=A.fetchOnComplete;tr&&ut(tr)?tr(oa,Gt,Oe||hn,yu):pn(Gt,St,{},Oe||hn)}try{ws(fetch(x?ar:Ph,x?cm:null),function(oa){if(zn&&(u-=Bs,Bs=0),!Wl)if(Wl=!0,oa.rejected)fm(oa.reason&&oa.reason[yl]),xo&&xo(oa.reason);else{var yu=oa[Uo];try{!x&&!yu.ok?(fm(yu.statusText),Ie&&Ie(!1)):x&&!yu.body?(Mh(yu,null,hn),Ie&&Ie(!0)):ws(yu.text(),function(Oe){Mh(yu,nt,Oe[Uo]),Ie&&Ie(!0)})}catch(Oe){fm(nr(Oe)),xo&&xo(Oe)}}})}catch(oa){Wl||(fm(nr(oa)),xo&&xo(oa))}return rp&&!Wl&&(Wl=!0,pn(Gt,200,{}),Ie&&Ie(!0)),x&&!Wl&&nt[gf]>0&&Me&&Me.set(function(){Wl||(Wl=!0,pn(Gt,500,{}),Ie&&Ie(!0))},nt[gf]),$s}function aa(nt,Gt,zn){var $e=us(),ar=new XDomainRequest,Ni=nt[Fa];ar.onload=function(){var Ea=Es(ar),Bs=A&&A.xdrOnComplete;Bs&&ut(Bs)?Bs(ar,Gt,nt):pn(Gt,200,{},Ea)},ar.onerror=function(){pn(Gt,400,{},x?hn:Ts(ar))},ar.ontimeout=function(){pn(Gt,500,{})},ar.onprogress=function(){};var Wn=$e&&$e.location&&$e.location[Lu]||"",$s=nt[ys];if(!$s){Nr(Gt);return}if(!x&&$s.lastIndexOf(Wn,0)!==0){var Ie="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";_t(E,2,40,". "+Ie),pt(Ie,Gt);return}var xo=x?$s:$s[eo](/^(https?:)/,"");ar.open(Ju,xo),nt[gf]&&(ar[gf]=nt[gf]),ar.send(Ni),x&&zn?Me&&Me.set(function(){ar.send(Ni)},0):ar.send(Ni)}function Ii(){u=0,h=!1,f=!1,E=null,x=null,A=null,F=null,$=null,G=null,ee=!1,fe=!1,pe=!1,me=!1,le=!1,Me=null}})}return s.__ieDyn=1,s}(),Zu="on",qc="attachEvent",Gv="addEventListener",tm="detachEvent",Uf="removeEventListener",Bl="events";Bu("aiEvtPageHide"),Bu("aiEvtPageShow");var $_=/\.[\.]+/g,lg=/[\.]+$/,Zg=1,Th=Hp("events"),B_=/^([^.]*)(?:\.(.+)|)/;function jf(s){return s&&s[eo]?s[eo](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Qr):s}function ev(s,u){var f;if(u){var h=Qr;ot(u)?(h=Qr,Ft(u,function(x){x=jf(x),x&&(x[0]!=="."&&(x="."+x),h+=x)})):h=jf(u),h&&(h[0]!=="."&&(h="."+h),s=(s||Qr)+h)}var E=B_.exec(s||Qr)||[];return f={},f[wn]=E[1],f.ns=(E[2]||Qr).replace($_,".").replace(lg,Qr)[Fu](".").sort().join("."),f}function Vv(s,u,f){f===void 0&&(f=!0);var h=Th.get(s,Bl,{},f),E=h[u];return E||(E=h[u]=[]),E}function Yf(s,u,f,h){s&&u&&u[wn]&&(s[Uf]?s[Uf](u[wn],f,h):s[tm]&&s[tm](Zu+u[wn],f))}function tv(s,u,f,h){var E=!1;return s&&u&&u[wn]&&f&&(s[Gv]?(s[Gv](u[wn],f,h),E=!0):s[qc]&&(s[qc](Zu+u[wn],f),E=!0)),E}function cg(s,u,f,h){for(var E=u[cr];E--;){var x=u[E];x&&(!f.ns||f.ns===x.evtName.ns)&&(!h||h(x))&&(Yf(s,x.evtName,x[yi],x.capture),u[ht](E,1))}}function Xg(s,u,f){if(u[wn])cg(s,Vv(s,u[wn]),u,f);else{var h=Th.get(s,Bl,{});Dt(h,function(E,x){cg(s,x,u,f)}),Cn(h)[cr]===0&&Th.kill(s,Bl)}}function Vd(s,u){var f;return u?(ot(u)?f=[s].concat(u):f=[s,u],f=ev("xx",f).ns[Fu](".")):f=s,f}function Qg(s,u,f,h,E){var x;E===void 0&&(E=!1);var A=!1;if(s)try{var F=ev(u,h);if(A=tv(s,F,f,E),A&&Th.accept(s)){var $=(x={guid:Zg++,evtName:F},x[yi]=f,x.capture=E,x);Vv(s,F.type)[Vr]($)}}catch{}return A}function q_(s,u,f,h,E){if(E===void 0&&(E=!1),s)try{var x=ev(u,h),A=!1;Xg(s,x,function(F){return x.ns&&!f||F[yi]===f?(A=!0,!0):!1}),A||Yf(s,x,f,E)}catch{}}var fg="sampleRate",zv="ProcessLegacy",dg="http.method",Ih="https://dc.services.visualstudio.com",rv="/v2/track",zd="not_specified",pg=Ip({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),Wv="split",jr="length",vu="toLowerCase",Wd="ingestionendpoint",nv="toString",iv="push",Kv="removeItem",$f="name",rm="message",e_="count",nm="stringify",Hc="pathname",Gc="match",Vc="exceptions",ql="parsedStack",Hl="properties",Xu="measurements",Bf="sizeInBytes",hu="typeName",qf="severityLevel",Kd="problemGroup",mg="isManual",Nh="hasFullStack",Hf="assembly",Gf="fileName",Jd="line",im="method",Ch="level",av="aiDataContract",Jv="duration",vg="receivedResponse";function hg(s,u,f){var h=u[jr],E=gg(s,u);if(E[jr]!==h){for(var x=0,A=E;f[A]!==void 0;)x++,A=ni(E,0,147)+N(x);E=A}return E}function gg(s,u){var f;return u&&(u=Dn(Ui(u)),u[jr]>150&&(f=ni(u,0,150),_t(s,2,57,"name is too long.  It has been truncated to 150 characters.",{name:u},!0))),f||u}function Xn(s,u,f){f===void 0&&(f=1024);var h;return u&&(f=f||1024,u=Dn(Ui(u)),u[jr]>f&&(h=ni(u,0,f),_t(s,2,61,"string value is too long. It has been truncated to "+f+" characters.",{value:u},!0))),h||u}function Zd(s,u){return b(s,u,2048,66)}function ai(s,u){var f;return u&&u[jr]>32768&&(f=ni(u,0,32768),_t(s,2,56,"message is too long, it has been truncated to 32768 characters.",{message:u},!0)),f||u}function H_(s,u){var f;if(u){var h=""+u;h[jr]>32768&&(f=ni(h,0,32768),_t(s,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:u},!0))}return f||u}function am(s,u){if(u){var f={};Dt(u,function(h,E){if(ti(E)&&zo())try{E=Wo()[nm](E)}catch(x){_t(s,2,49,"custom property is not valid",{exception:x},!0)}E=Xn(s,E,8192),h=hg(s,h,f),f[h]=E}),u=f}return u}function Xd(s,u){if(u){var f={};Dt(u,function(h,E){h=hg(s,h,f),f[h]=E}),u=f}return u}function p(s,u){return u&&b(s,u,128,69)[nv]()}function b(s,u,f,h){var E;return u&&(u=Dn(Ui(u)),u[jr]>f&&(E=ni(u,0,f),_t(s,2,h,"input is too long, it has been truncated to "+f+" characters.",{data:u},!0))),E||u}function N(s){var u="00"+s;return nc(u,u[jr]-3)}var R=id()||{},P=0,B=[null,null,null,null,null];function H(s){var u=P,f=B,h=f[u];return R.createElement?f[u]||(h=f[u]=R.createElement("a")):h={host:ne(s,!0)},h.href=s,u++,u>=f[jr]&&(u=0),P=u,h}function ne(s,u){var f=ue(s,u)||"";if(f){var h=f[Gc](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(h!=null&&h[jr]>3&&mn(h[2])&&h[2][jr]>0)return h[2]+(h[3]||"")}return f}function ue(s,u){var f=null;if(s){var h=s[Gc](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(h!=null&&h[jr]>2&&mn(h[2])&&h[2][jr]>0&&(f=h[2]||"",u&&h[jr]>2)){var E=(h[1]||"")[vu](),x=h[3]||"";(E==="http"&&x===":80"||E==="https"&&x===":443")&&(x=""),f+=x}}return f}var ce=[Ih+rv,"https://breeze.aimon.applicationinsights.io"+rv,"https://dc-int.services.visualstudio.com"+rv];function ke(s){return ka(ce,s[vu]())!==-1}function Je(s,u,f,h){var E,x=h,A=h;if(u&&u[jr]>0){var F=H(u);if(E=F.host,!x)if(F[Hc]!=null){var $=F.pathname[jr]===0?"/":F[Hc];$.charAt(0)!=="/"&&($="/"+$),A=F[Hc],x=Xn(s,f?f+" "+$:$)}else x=Xn(s,u)}else E=h,x=h;return{target:E,name:x,data:A}}var Ze=vl({LocalStorage:0,SessionStorage:1}),De=void 0,be="";function qe(s){try{if(Pe(Ra()))return null;var u=new Date()[nv](),f=Rr(s===Ze.LocalStorage?"localStorage":"sessionStorage"),h=be+u;f.setItem(h,u);var E=f.getItem(h)!==u;if(f[Kv](h),!E)return f}catch{}return null}function Ne(){return Ae()?qe(Ze.SessionStorage):null}function tt(s){be=s||""}function Ae(s){return(s||De===void 0)&&(De=!!qe(Ze.SessionStorage)),De}function Re(s,u){var f=Ne();if(f!==null)try{return f.getItem(u)}catch(h){De=!1,_t(s,2,2,"Browser failed read of session storage. "+Pi(h),{exception:nr(h)})}return null}function Ge(s,u,f){var h=Ne();if(h!==null)try{return h.setItem(u,f),!0}catch(E){De=!1,_t(s,2,4,"Browser failed write to session storage. "+Pi(E),{exception:nr(E)})}return!1}function Wt(s,u){var f=Ne();if(f!==null)try{return f[Kv](u),!0}catch(h){De=!1,_t(s,2,6,"Browser failed removal of session storage item. "+Pi(h),{exception:nr(h)})}return!1}var Qt=";",vr="=";function Ar(s){if(!s)return{};var u=s[Wv](Qt),f=wv(u,function(E,x){var A=x[Wv](vr);if(A[jr]===2){var F=A[0][vu](),$=A[1];E[F]=$}return E},{});if(Cn(f)[jr]>0){if(f.endpointsuffix){var h=f.location?f.location+".":"";f[Wd]=f[Wd]||"https://"+h+"dc."+f.endpointsuffix}f[Wd]=f[Wd]||Ih,za(f[Wd],"/")&&(f[Wd]=f[Wd].slice(0,-1))}return f}var fn=function(){function s(u,f,h){var E=this,x=this;x.ver=1,x.sampleRate=100,x.tags={},x[$f]=Xn(u,h)||zd,x.data=f,x.time=Sc(new Date),x[av]={time:1,iKey:1,name:1,sampleRate:function(){return E.sampleRate===100?4:1},tags:1,data:1}}return s}(),nn=function(){function s(u,f,h,E){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var x=this;x.ver=2,x[$f]=Xn(u,f)||zd,x[Hl]=am(u,h),x[Xu]=Xd(u,E)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.Event",s.dataType="EventData",s}(),Qn=58,Wr=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Gi=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,at=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,yt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,Cr=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,br=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,Rt=/([^\(\s\n]+):([0-9]+)$/,Yr="<no_method>",Nt="error",Tn="stack",bt="stackDetails",Fn="errorSrc",Un="message",ya="description",Qu=[{re:Gi,len:5,m:1,fn:2,ln:3,col:4},{chk:om,pre:Us,re:at,len:4,m:1,fn:2,ln:3},{re:yt,len:3,m:1,fn:2,hdl:eh},{re:Cr,len:2,fn:1,hdl:eh}];function Us(s){return s.replace(/(\(anonymous\))/,"<anonymous>")}function om(s){return Du(s,"[native")<0}function gu(s,u){var f=s;return f&&!mn(f)&&(JSON&&JSON[nm]?(f=JSON[nm](s),u&&(!f||f==="{}")&&(ut(s[nv])?f=s[nv]():f=""+s)):f=""+s+" - (Missing JSON.stringify)"),f||""}function Qo(s,u){var f=s;return s&&(f&&!mn(f)&&(f=s[Un]||s[ya]||f),f&&!mn(f)&&(f=gu(f,!0)),s.filename&&(f=f+" @"+(s.filename||"")+":"+(s.lineno||"?")+":"+(s.colno||"?"))),u&&u!=="String"&&u!=="Object"&&u!=="Error"&&Du(f||"",u)===-1&&(f=u+": "+f),f||""}function Gl(s){try{if(ti(s))return"hasFullStack"in s&&"typeName"in s}catch{}return!1}function Si(s){try{if(ti(s))return"ver"in s&&"exceptions"in s&&"properties"in s}catch{}return!1}function On(s){return s&&s.src&&mn(s.src)&&s.obj&&ot(s.obj)}function oi(s){var u=s||"";mn(u)||(mn(u[Tn])?u=u[Tn]:u=""+u);var f=u[Wv](`
`);return{src:u,obj:f}}function ba(s){for(var u=[],f=s[Wv](`
`),h=0;h<f[jr];h++){var E=f[h];f[h+1]&&(E+="@"+f[h+1],h++),u[iv](E)}return{src:s,obj:u}}function Vl(s){var u=null;if(s)try{if(s[Tn])u=oi(s[Tn]);else if(s[Nt]&&s[Nt][Tn])u=oi(s[Nt][Tn]);else if(s.exception&&s.exception[Tn])u=oi(s.exception[Tn]);else if(On(s))u=s;else if(On(s[bt]))u=s[bt];else if(us()&&us().opera&&s[Un])u=ba(s[rm]);else if(s.reason&&s.reason[Tn])u=oi(s.reason[Tn]);else if(mn(s))u=oi(s);else{var f=s[Un]||s[ya]||"";mn(s[Fn])&&(f&&(f+=`
`),f+=" from "+s[Fn]),f&&(u=oi(f))}}catch(h){u=oi(h)}return u||{src:"",obj:null}}function Qd(s){var u="";return s&&(s.obj?u=s.obj.join(`
`):u=s.src||""),u}function js(s){var u,f=s.obj;if(f&&f[jr]>0){u=[];var h=0,E=!1,x=0;Ft(f,function(Me){if(E||th(Me)){var we=Ui(Me);E=!0;var Ue=rh(we,h);Ue&&(x+=Ue[Bf],u[iv](Ue),h++)}});var A=32*1024;if(x>A)for(var F=0,$=u[jr]-1,G=0,ee=F,fe=$;F<$;){var pe=u[F][Bf],me=u[$][Bf];if(G+=pe+me,G>A){var le=fe-ee+1;u.splice(ee,le);break}ee=F,fe=$,F++,$--}}return u}function Vf(s){var u="";if(s&&(u=s.typeName||s[$f]||"",!u))try{var f=/function (.{1,200})\(/,h=f.exec(s.constructor[nv]());u=h&&h[jr]>1?h[1]:""}catch{}return u}function zf(s){if(s)try{if(!mn(s)){var u=Vf(s),f=gu(s,!1);return(!f||f==="{}")&&(s[Nt]&&(s=s[Nt],u=Vf(s)),f=gu(s,!0)),Du(f,u)!==0&&u!=="String"?u+":"+f:f}}catch{}return""+(s||"")}var ep=function(){function s(u,f,h,E,x,A){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var F=this;F.ver=2,Si(f)?(F[Vc]=f[Vc]||[],F[Hl]=f[Hl],F[Xu]=f[Xu],f[qf]&&(F[qf]=f[qf]),f.id&&(F.id=f.id,f[Hl].id=f.id),f[Kd]&&(F[Kd]=f[Kd]),Pe(f[mg])||(F[mg]=f[mg])):(h||(h={}),A&&(h.id=A),F[Vc]=[Xv(u,f,h)],F[Hl]=am(u,h),F[Xu]=Xd(u,E),x&&(F[qf]=x),A&&(F.id=A))}return s.CreateAutoException=function(u,f,h,E,x,A,F,$){var G,ee=Vf(x||A||u);return G={},G[rm]=Qo(u,ee),G.url=f,G.lineNumber=h,G.columnNumber=E,G.error=zf(x||A||u),G.evt=zf(A||u),G[hu]=ee,G.stackDetails=Vl(F||x||A),G.errorSrc=$,G},s.CreateFromInterface=function(u,f,h,E){var x=f[Vc]&&ul(f[Vc],function(F){return Dh(u,F)}),A=new s(u,_o(_o({},f),{exceptions:x}),h,E);return A},s.prototype.toInterface=function(){var u,f=this,h=f.exceptions,E=f.properties,x=f.measurements,A=f.severityLevel,F=f.problemGroup,$=f.id,G=f.isManual,ee=h instanceof Array&&ul(h,function(fe){return fe.toInterface()})||void 0;return u={ver:"4.0"},u[Vc]=ee,u.severityLevel=A,u.properties=E,u.measurements=x,u.problemGroup=F,u.id=$,u.isManual=G,u},s.CreateSimpleException=function(u,f,h,E,x,A){var F;return{exceptions:[(F={},F[Nh]=!0,F.message=u,F.stack=x,F.typeName=f,F)]}},s.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",s.dataType="ExceptionData",s.formatError=zf,s}(),xh=Jt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function Zv(){var s,u=this,f=ot(u[ql])&&ul(u[ql],function(E){return m(E)}),h=(s={id:u.id,outerId:u.outerId,typeName:u[hu],message:u[rm],hasFullStack:u[Nh],stack:u[Tn]},s[ql]=f||void 0,s);return h}function Xv(s,u,f){var h,E,x,A,F,$,G,ee;if(Gl(u))A=u[hu],F=u[rm],G=u[Tn],ee=u[ql]||[],$=u[Nh];else{var fe=u,pe=fe&&fe.evt;Kt(fe)||(fe=fe[Nt]||pe||fe),A=Xn(s,Vf(fe))||zd,F=ai(s,Qo(u||fe,A))||zd;var me=u[bt]||Vl(u);ee=js(me),ot(ee)&&ul(ee,function(le){le[Hf]=Xn(s,le[Hf]),le[Gf]=Xn(s,le[Gf])}),G=H_(s,Qd(me)),$=ot(ee)&&ee[jr]>0,f&&(f[hu]=f[hu]||A)}return h={},h[av]=xh,h.id=E,h.outerId=x,h[hu]=A,h[rm]=F,h[Nh]=$,h.stack=G,h[ql]=ee,h.toInterface=Zv,h}function Dh(s,u){var f=ot(u[ql])&&ul(u[ql],function(E){return o(E)})||u[ql],h=Xv(s,_o(_o({},u),{parsedStack:f}));return h}function Qv(s,u){var f=u[Gc](br);if(f&&f[jr]>=4)s[Gf]=f[1],s[Jd]=parseInt(f[2]);else{var h=u[Gc](Rt);h&&h[jr]>=3?(s[Gf]=h[1],s[Jd]=parseInt(h[2])):s[Gf]=u}}function eh(s,u,f){var h=s[Gf];u.fn&&f&&f[jr]>u.fn&&(u.ln&&f[jr]>u.ln?(h=Dn(f[u.fn]||""),s[Jd]=parseInt(Dn(f[u.ln]||""))||0):h=Dn(f[u.fn]||"")),h&&Qv(s,h)}function th(s){var u=!1;if(s&&mn(s)){var f=Dn(s);f&&(u=Wr.test(f))}return u}var _u=Jt({level:1,method:1,assembly:0,fileName:0,line:0});function rh(s,u){var f,h;if(s&&mn(s)&&Dn(s)){h=(f={},f[av]=_u,f[Ch]=u,f[Hf]=Dn(s),f[im]=Yr,f.fileName="",f.line=0,f[Bf]=0,f);for(var E=0;E<Qu[jr];){var x=Qu[E];if(x.chk&&!x.chk(s))break;x.pre&&(s=x.pre(s));var A=s[Gc](x.re);if(A&&A[jr]>=x.len){x.m&&(h[im]=Dn(A[x.m]||Yr)),x.hdl?x.hdl(h,x,A):x.fn&&(x.ln?(h[Gf]=Dn(A[x.fn]||""),h[Jd]=parseInt(Dn(A[x.ln]||""))||0):Qv(h,A[x.fn]||""));break}E++}}return c(h)}function o(s){var u,f=(u={},u[av]=_u,u.level=s[Ch],u.method=s[im],u.assembly=s[Hf],u.fileName=s[Gf],u.line=s[Jd],u[Bf]=0,u);return c(f)}function c(s){var u=Qn;return s&&(u+=s.method[jr],u+=s.assembly[jr],u+=s.fileName[jr],u+=s.level.toString()[jr],u+=s.line.toString()[jr],s[Bf]=u),s}function m(s){return{level:s[Ch],method:s[im],assembly:s[Hf],fileName:s[Gf],line:s[Jd]}}var w=function(){function s(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s}(),I=function(){function s(u,f,h,E,x,A,F,$,G){this.aiDataContract={ver:1,metrics:1,properties:0};var ee=this;ee.ver=2;var fe=new w;fe[e_]=E>0?E:void 0,fe.max=isNaN(A)||A===null?void 0:A,fe.min=isNaN(x)||x===null?void 0:x,fe[$f]=Xn(u,f)||zd,fe.value=h,fe.stdDev=isNaN(F)||F===null?void 0:F,ee.metrics=[fe],ee[Hl]=am(u,$),ee[Xu]=Xd(u,G)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",s.dataType="MetricData",s}(),O="";function M(s){(isNaN(s)||s<0)&&(s=0),s=Math.round(s);var u=O+s%1e3,f=O+Math.floor(s/1e3)%60,h=O+Math.floor(s/(1e3*60))%60,E=O+Math.floor(s/(1e3*60*60))%24,x=Math.floor(s/(1e3*60*60*24));return u=u[jr]===1?"00"+u:u[jr]===2?"0"+u:u,f=f[jr]<2?"0"+f:f,h=h[jr]<2?"0"+h:h,E=E[jr]<2?"0"+E:E,(x>0?x+".":O)+E+":"+h+":"+f+"."+u}var k=function(){function s(u,f,h,E,x,A,F){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var $=this;$.ver=2,$.id=p(u,F),$.url=Zd(u,h),$[$f]=Xn(u,f)||zd,isNaN(E)||($[Jv]=M(E)),$[Hl]=am(u,x),$[Xu]=Xd(u,A)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",s.dataType="PageviewData",s}(),L=function(){function s(u,f,h,E,x,A,F,$,G,ee,fe,pe){G===void 0&&(G="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var me=this;me.ver=2,me.id=f,me[Jv]=M(x),me.success=A,me.resultCode=F+"",me.type=Xn(u,G);var le=Je(u,h,$,E);me.data=Zd(u,E)||le.data,me.target=Xn(u,le.target),ee&&(me.target="".concat(me.target," | ").concat(ee)),me[$f]=Xn(u,le[$f]),me[Hl]=am(u,fe),me[Xu]=Xd(u,pe)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",s.dataType="RemoteDependencyData",s}(),Y=function(){function s(u,f,h,E,x){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var A=this;A.ver=2,f=f||zd,A[rm]=ai(u,f),A[Hl]=am(u,E),A[Xu]=Xd(u,x),h&&(A[qf]=h)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.Message",s.dataType="MessageData",s}(),z=function(){function s(u,f,h,E,x,A,F){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var $=this;$.ver=2,$.url=Zd(u,h),$[$f]=Xn(u,f)||zd,$[Hl]=am(u,x),$[Xu]=Xd(u,A),F&&($.domProcessing=F.domProcessing,$[Jv]=F[Jv],$.networkConnect=F.networkConnect,$.perfTotal=F.perfTotal,$[vg]=F[vg],$.sentRequest=F.sentRequest)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",s.dataType="PageviewPerformanceData",s}(),te=function(){function s(u,f){this.aiDataContract={baseType:1,baseData:1},this.baseType=u,this.baseData=f}return s}(),Q=vl({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function ae(s){var u="ai."+s+".";return function(f){return u+f}}var ie=ae("application"),he=ae("device"),Te=ae("location"),je=ae("operation"),rt=ae("session"),it=ae("user"),qt=ae("cloud"),Tr=ae("internal"),Ei=function(s){hf(u,s);function u(){return s.call(this)||this}return u}(Lp({applicationVersion:ie("ver"),applicationBuild:ie("build"),applicationTypeId:ie("typeId"),applicationId:ie("applicationId"),applicationLayer:ie("layer"),deviceId:he("id"),deviceIp:he("ip"),deviceLanguage:he("language"),deviceLocale:he("locale"),deviceModel:he("model"),deviceFriendlyName:he("friendlyName"),deviceNetwork:he("network"),deviceNetworkName:he("networkName"),deviceOEMName:he("oemName"),deviceOS:he("os"),deviceOSVersion:he("osVersion"),deviceRoleInstance:he("roleInstance"),deviceRoleName:he("roleName"),deviceScreenResolution:he("screenResolution"),deviceType:he("type"),deviceMachineName:he("machineName"),deviceVMName:he("vmName"),deviceBrowser:he("browser"),deviceBrowserVersion:he("browserVersion"),locationIp:Te("ip"),locationCountry:Te("country"),locationProvince:Te("province"),locationCity:Te("city"),operationId:je("id"),operationName:je("name"),operationParentId:je("parentId"),operationRootId:je("rootId"),operationSyntheticSource:je("syntheticSource"),operationCorrelationVector:je("correlationVector"),sessionId:rt("id"),sessionIsFirst:rt("isFirst"),sessionIsNew:rt("isNew"),userAccountAcquisitionDate:it("accountAcquisitionDate"),userAccountId:it("accountId"),userAgent:it("userAgent"),userId:it("id"),userStoreRegion:it("storeRegion"),userAuthUserId:it("authUserId"),userAnonymousUserAcquisitionDate:it("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:it("authUserAcquisitionDate"),cloudName:qt("name"),cloudRole:qt("role"),cloudRoleVer:qt("roleVer"),cloudRoleInstance:qt("roleInstance"),cloudEnvironment:qt("environment"),cloudLocation:qt("location"),cloudDeploymentUnit:qt("deploymentUnit"),internalNodeName:Tr("nodeName"),internalSdkVersion:Tr("sdkVersion"),internalAgentVersion:Tr("agentVersion"),internalSnippet:Tr("snippet"),internalSdkSrc:Tr("sdkSrc")})),wr=new Ei;function Vi(s,u){q_(s,null,null,u)}function es(s){var u=id(),f=ls(),h=!1,E=[],x=1;f&&!Pe(f.onLine)&&!f.onLine&&(x=2);var A=0,F=pe(),$=Vd(Bu("OfflineListener"),s);try{if(ee(us())&&(h=!0),u){var G=u.body||u;G.ononline&&ee(G)&&(h=!0)}}catch{h=!1}function ee(Xe){var pt=!1;return Xe&&(pt=Qg(Xe,"online",Me,$),pt&&Qg(Xe,"offline",we,$)),pt}function fe(){return F}function pe(){return!(A===2||x===2)}function me(){var Xe=pe();F!==Xe&&(F=Xe,Ft(E,function(pt){var Nr={isOnline:F,rState:x,uState:A};try{pt(Nr)}catch{}}))}function le(Xe){A=Xe,me()}function Me(){x=1,me()}function we(){x=2,me()}function Ue(){var Xe=us();if(Xe&&h){if(Vi(Xe,$),u){var pt=u.body||u;Ke(pt.ononline)||Vi(pt,$)}h=!1}}function Ye(Xe){return E[iv](Xe),{rm:function(){var pt=E.indexOf(Xe);if(pt>-1)return E.splice(pt,1)}}}return{isOnline:fe,isListening:function(){return h},unload:Ue,addListener:Ye,setOnlineState:le}}var ts="AppInsightsChannelPlugin",zl="duration",wa="tags",Wf="deviceType",Ve="data",Mt="name",Gn="traceID",Se="length",ur="stringify",Vn="measurements",zi="dataType",oo="envelopeType",Fr="toString",ra="_get",pi="enqueue",na="count",tp="eventsLimitInMem",Sa="push",sm="item",Kf="emitLineDelimitedJson",um="clear",lm="createNew",ov="markAsSent",mi="clearSent",rs="bufferOverride",Ce="BUFFER_KEY",lt="SENT_BUFFER_KEY",Yt="concat",Lt="MAX_BUFFER_SIZE",ir="triggerSend",$r="diagLog",jn="initialize",Ti="_sender",Ua="endpointUrl",so="instrumentationKey",Jf="customHeaders",Rh="maxBatchSizeInBytes",Oh="onunloadDisableBeacon",G_="isBeaconApiDisabled",Py="alwaysUseXhrOverride",t_="disableXhr",_g="enableSessionStorageBuffer",zc="_buffer",V_="onunloadDisableFetch",z_="disableSendBeaconSplit",Fb="enableSendPromise",My="getSenderInst",XS="unloadTransports",QS="convertUndefined",eE="maxBatchInterval",Ly="serialize",yg="_onError",Ub="_onPartialSuccess",Fy="_onSuccess",jb="itemsReceived",Yb="itemsAccepted",$b="oriPayload",Bb="baseType",Uy="sampleRate",tE="eventsSendRequest",rE="getSamplingScore",uR="getHashCodeScore",qb="baseType",ia="baseData",Ys="properties",nE="true";function uo(s,u,f){return Uu(s,u,f,Ci)}function lR(s,u,f){var h=f[wa]=f[wa]||{},E=u.ext=u.ext||{},x=u[wa]=u[wa]||[],A=E.user;A&&(uo(h,wr.userAuthUserId,A.authId),uo(h,wr.userId,A.id||A.localId));var F=E.app;F&&uo(h,wr.sessionId,F.sesId);var $=E.device;$&&(uo(h,wr.deviceId,$.id||$.localId),uo(h,wr[Wf],$.deviceClass),uo(h,wr.deviceIp,$.ip),uo(h,wr.deviceModel,$.model),uo(h,wr[Wf],$[Wf]));var G=u.ext.web;if(G){uo(h,wr.deviceLanguage,G.browserLang),uo(h,wr.deviceBrowserVersion,G.browserVer),uo(h,wr.deviceBrowser,G.browser);var ee=f[Ve]=f[Ve]||{},fe=ee[ia]=ee[ia]||{},pe=fe[Ys]=fe[Ys]||{};uo(pe,"domain",G.domain),uo(pe,"isManual",G.isManual?nE:null),uo(pe,"screenRes",G.screenRes),uo(pe,"userConsent",G.userConsent?nE:null)}var me=E.os;me&&(uo(h,wr.deviceOS,me[Mt]),uo(h,wr.deviceOSVersion,me.osVer));var le=E.trace;le&&(uo(h,wr.operationParentId,le.parentID),uo(h,wr.operationName,Xn(s,le[Mt])),uo(h,wr.operationId,le[Gn]));for(var Me={},we=x[Se]-1;we>=0;we--){var Ue=x[we];Dt(Ue,function(Xe,pt){Me[Xe]=pt}),x.splice(we,1)}Dt(x,function(Xe,pt){Me[Xe]=pt});var Ye=_o(_o({},h),Me);Ye[wr.internalSdkVersion]||(Ye[wr.internalSdkVersion]=Xn(s,"javascript:".concat(cR.Version),64)),f[wa]=su(Ye)}function kh(s,u,f){Pe(s)||Dt(s,function(h,E){Xt(E)?f[h]=E:mn(E)?u[h]=E:zo()&&(u[h]=Wo()[ur](E))})}function bg(s,u){Pe(s)||Dt(s,function(f,h){s[f]=h||u})}function wg(s,u,f,h){var E=new fn(s,h,u);uo(E,"sampleRate",f[fg]),(f[ia]||{}).startTime&&(E.time=Sc(f[ia].startTime)),E.iKey=f.iKey;var x=f.iKey.replace(/-/g,"");return E[Mt]=E[Mt].replace("{0}",x),lR(s,f,E),f[wa]=f[wa]||[],su(E)}function Sg(s,u){Pe(u[ia])&&_t(s,1,46,"telemetryItem.baseData cannot be null.")}var cR={Version:"3.3.5"};function fR(s,u,f){Sg(s,u);var h=u[ia][Vn]||{},E=u[ia][Ys]||{};kh(u[Ve],E,h),Pe(f)||bg(E,f);var x=u[ia];if(Pe(x))return zu(s,"Invalid input for dependency data"),null;var A=x[Ys]&&x[Ys][dg]?x[Ys][dg]:"GET",F=new L(s,x.id,x.target,x[Mt],x[zl],x.success,x.responseCode,A,x.type,x.correlationContext,E,h),$=new te(L[zi],F);return wg(s,L[oo],u,$)}function iE(s,u,f){Sg(s,u);var h={},E={};u[qb]!==nn[zi]&&(h.baseTypeSource=u[qb]),u[qb]===nn[zi]?(h=u[ia][Ys]||{},E=u[ia][Vn]||{}):u[ia]&&kh(u[ia],h,E),kh(u[Ve],h,E),Pe(f)||bg(h,f);var x=u[ia][Mt],A=new nn(s,x,h,E),F=new te(nn[zi],A);return wg(s,nn[oo],u,F)}function dR(s,u,f){Sg(s,u);var h=u[ia][Vn]||{},E=u[ia][Ys]||{};kh(u[Ve],E,h),Pe(f)||bg(E,f);var x=u[ia],A=ep.CreateFromInterface(s,x,E,h),F=new te(ep[zi],A);return wg(s,ep[oo],u,F)}function pR(s,u,f){Sg(s,u);var h=u[ia],E=h[Ys]||{},x=h[Vn]||{};kh(u[Ve],E,x),Pe(f)||bg(E,f);var A=new I(s,h[Mt],h.average,h.sampleCount,h.min,h.max,h.stdDev,E,x),F=new te(I[zi],A);return wg(s,I[oo],u,F)}function mR(s,u,f){Sg(s,u);var h,E=u[ia];!Pe(E)&&!Pe(E[Ys])&&!Pe(E[Ys][zl])?(h=E[Ys][zl],delete E[Ys][zl]):!Pe(u[Ve])&&!Pe(u[Ve][zl])&&(h=u[Ve][zl],delete u[Ve][zl]);var x=u[ia],A;((u.ext||{}).trace||{})[Gn]&&(A=u.ext.trace[Gn]);var F=x.id||A,$=x[Mt],G=x.uri,ee=x[Ys]||{},fe=x[Vn]||{};if(Pe(x.refUri)||(ee.refUri=x.refUri),Pe(x.pageType)||(ee.pageType=x.pageType),Pe(x.isLoggedIn)||(ee.isLoggedIn=x.isLoggedIn[Fr]()),!Pe(x[Ys])){var pe=x[Ys];Dt(pe,function(Me,we){ee[Me]=we})}kh(u[Ve],ee,fe),Pe(f)||bg(ee,f);var me=new k(s,$,G,h,ee,fe,F),le=new te(k[zi],me);return wg(s,k[oo],u,le)}function vR(s,u,f){Sg(s,u);var h=u[ia],E=h[Mt],x=h.uri||h.url,A=h[Ys]||{},F=h[Vn]||{};kh(u[Ve],A,F),Pe(f)||bg(A,f);var $=new z(s,E,x,void 0,A,F,h),G=new te(z[zi],$);return wg(s,z[oo],u,G)}function hR(s,u,f){Sg(s,u);var h=u[ia].message,E=u[ia].severityLevel,x=u[ia][Ys]||{},A=u[ia][Vn]||{};kh(u[Ve],x,A),Pe(f)||bg(x,f);var F=new Y(s,h,E,x,A),$=new te(Y[zi],F);return wg(s,Y[oo],u,$)}var aE=function(){function s(u,f){var h=[],E=!1,x=f.maxRetryCnt;this[ra]=function(){return h},this._set=function(A){return h=A,h},Qi(s,this,function(A){A[pi]=function(F){if(A[na]()>=f[tp]){E||(_t(u,2,105,"Maximum in-memory buffer size reached: "+A[na](),!0),E=!0);return}F.cnt=F.cnt||0,!(!Pe(x)&&F.cnt>x)&&h[Sa](F)},A[na]=function(){return h[Se]},A.size=function(){for(var F=h[Se],$=0;$<h[Se];$++)F+=h[$].item[Se];return f[Kf]||(F+=2),F},A[um]=function(){h=[],E=!1},A.getItems=function(){return h.slice(0)},A.batchPayloads=function(F){if(F&&F[Se]>0){var $=[];Ft(F,function(ee){$[Sa](ee[sm])});var G=f[Kf]?$.join(`
`):"["+$.join(",")+"]";return G}return null},A[lm]=function(F,$,G){var ee=h.slice(0);F=F||u,$=$||{};var fe=G?new oE(F,$):new Hb(F,$);return Ft(ee,function(pe){fe[pi](pe)}),fe}})}return s.__ieDyn=1,s}(),Hb=function(s){hf(u,s);function u(f,h){var E=s.call(this,f,h)||this;return Qi(u,E,function(x,A){x[ov]=function(F){A[um]()},x[mi]=function(F){}}),E}return u.__ieDyn=1,u}(aE),gR=["AI_buffer","AI_sentBuffer"],oE=function(s){hf(u,s);function u(h,E){var x=s.call(this,h,E)||this,A=!1,F=E==null?void 0:E.namePrefix,$=E[rs]||{getItem:Re,setItem:Ge},G=$.getItem,ee=$.setItem,fe=E.maxRetryCnt;return Qi(u,x,function(pe,me){var le=pt(u[Ce]),Me=pt(u[lt]),we=pn(),Ue=Me[Yt](we),Ye=pe._set(le[Yt](Ue));Ye[Se]>u[Lt]&&(Ye[Se]=u[Lt]),dn(u[lt],[]),dn(u[Ce],Ye),pe[pi]=function(er){if(pe[na]()>=u[Lt]){A||(_t(h,2,67,"Maximum buffer size reached: "+pe[na](),!0),A=!0);return}er.cnt=er.cnt||0,!(!Pe(fe)&&er.cnt>fe)&&(me[pi](er),dn(u.BUFFER_KEY,pe[ra]()))},pe[um]=function(){me[um](),dn(u.BUFFER_KEY,pe[ra]()),dn(u[lt],[]),A=!1},pe[ov]=function(er){dn(u[Ce],pe._set(Xe(er,pe[ra]())));var Ht=pt(u[lt]);Ht instanceof Array&&er instanceof Array&&(Ht=Ht[Yt](er),Ht[Se]>u[Lt]&&(_t(h,1,67,"Sent buffer reached its maximum size: "+Ht[Se],!0),Ht[Se]=u[Lt]),dn(u[lt],Ht))},pe[mi]=function(er){var Ht=pt(u[lt]);Ht=Xe(er,Ht),dn(u[lt],Ht)},pe[lm]=function(er,Ht,cn){cn=!!cn;var aa=pe[ra]().slice(0),Ii=pt(u[lt]).slice(0);er=er||h,Ht=Ht||{},pe[um]();var nt=cn?new u(er,Ht):new Hb(er,Ht);return Ft(aa,function(Gt){nt[pi](Gt)}),cn&&nt[ov](Ii),nt};function Xe(er,Ht){var cn=[],aa=[];return Ft(er,function(Ii){aa[Sa](Ii[sm])}),Ft(Ht,function(Ii){!ut(Ii)&&ka(aa,Ii[sm])===-1&&cn[Sa](Ii)}),cn}function pt(er){var Ht=er;return Ht=F?F+"_"+Ht:Ht,Nr(Ht)}function Nr(er){try{var Ht=G(h,er);if(Ht){var cn=Wo().parse(Ht);if(mn(cn)&&(cn=Wo().parse(cn)),cn&&ot(cn))return cn}}catch(aa){_t(h,1,42," storage key: "+er+", "+Pi(aa),{exception:nr(aa)})}return[]}function dn(er,Ht){var cn=er;try{cn=F?F+"_"+cn:cn;var aa=JSON[ur](Ht);ee(h,cn,aa)}catch(Ii){ee(h,cn,JSON[ur]([])),_t(h,2,41," storage key: "+cn+", "+Pi(Ii)+". Buffer cleared",{exception:nr(Ii)})}}function pn(){var er=[];try{return Ft(gR,function(Ht){var cn=Yn(Ht);if(er=er[Yt](cn),F){var aa=F+"_"+Ht,Ii=Yn(aa);er=er[Yt](Ii)}}),er}catch(Ht){_t(h,2,41,"Transfer events from previous buffers: "+Pi(Ht)+". previous Buffer items can not be removed",{exception:nr(Ht)})}return[]}function Yn(er){try{var Ht=Nr(er),cn=[];return Ft(Ht,function(aa){var Ii={item:aa,cnt:0};cn[Sa](Ii)}),Wt(h,er),cn}catch{}return[]}}),x}var f;return f=u,u.VERSION="_1",u.BUFFER_KEY="AI_buffer"+f.VERSION,u.SENT_BUFFER_KEY="AI_sentBuffer"+f.VERSION,u.MAX_BUFFER_SIZE=2e3,u}(aE),_R=function(){function s(u){Qi(s,this,function(f){f[Ly]=function(A){var F=h(A,"root");try{return Wo()[ur](F)}catch($){_t(u,1,48,$&&ut($[Fr])?$[Fr]():"Error serializing object",null,!0)}};function h(A,F){var $="__aiCircularRefCheck",G={};if(!A)return _t(u,1,48,"cannot serialize object because it is null or undefined",{name:F},!0),G;if(A[$])return _t(u,2,50,"Circular reference detected while serializing object",{name:F},!0),G;if(!A.aiDataContract){if(F==="measurements")G=x(A,"number",F);else if(F==="properties")G=x(A,"string",F);else if(F==="tags")G=x(A,"string",F);else if(ot(A))G=E(A,F);else{_t(u,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:F},!0);try{Wo()[ur](A),G=A}catch(ee){_t(u,1,48,ee&&ut(ee[Fr])?ee[Fr]():"Error serializing object",null,!0)}}return G}return A[$]=!0,Dt(A.aiDataContract,function(ee,fe){var pe=ut(fe)?fe()&1:fe&1,me=ut(fe)?fe()&4:fe&4,le=fe&2,Me=A[ee]!==void 0,we=ti(A[ee])&&A[ee]!==null;if(pe&&!Me&&!le)_t(u,1,24,"Missing required field specification. The field is required but not present on source",{field:ee,name:F});else if(!me){var Ue=void 0;we?le?Ue=E(A[ee],ee):Ue=h(A[ee],ee):Ue=A[ee],Ue!==void 0&&(G[ee]=Ue)}}),delete A[$],G}function E(A,F){var $;if(A)if(!ot(A))_t(u,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:F},!0);else{$=[];for(var G=0;G<A[Se];G++){var ee=A[G],fe=h(ee,F+"["+G+"]");$[Sa](fe)}}return $}function x(A,F,$){var G;return A&&(G={},Dt(A,function(ee,fe){if(F==="string")fe===void 0?G[ee]="undefined":fe===null?G[ee]="null":fe[Fr]?G[ee]=fe[Fr]():G[ee]="invalid field: toString() is not defined.";else if(F==="number")if(fe===void 0)G[ee]="undefined";else if(fe===null)G[ee]="null";else{var pe=parseFloat(fe);G[ee]=pe}else G[ee]="invalid field: "+$+" is of unknown type.",_t(u,1,G[ee],null,!0)})),G}})}return s.__ieDyn=1,s}(),yR=8,bR=function(){function s(){}return s.prototype.getHashCodeScore=function(u){var f=this.getHashCode(u)/s.INT_MAX_VALUE;return f*100},s.prototype.getHashCode=function(u){if(u==="")return 0;for(;u[Se]<yR;)u=u[Yt](u);for(var f=5381,h=0;h<u[Se];++h)f=(f<<5)+f+u.charCodeAt(h),f=f&f;return Math.abs(f)},s.INT_MAX_VALUE=2147483647,s}(),wR=function(){function s(){var u=this,f=new bR,h=new Ei;u[rE]=function(E){var x=0;return E[wa]&&E[wa][h.userId]?x=f.getHashCodeScore(E[wa][h.userId]):E.ext&&E.ext.user&&E.ext.user.id?x=f[uR](E.ext.user.id):E[wa]&&E[wa][h.operationId]?x=f.getHashCodeScore(E[wa][h.operationId]):E.ext&&E.ext.telemetryTrace&&E.ext.telemetryTrace[Gn]?x=f.getHashCodeScore(E.ext.telemetryTrace[Gn]):x=Math.random()*100,x}}return s}(),SR=function(){function s(u,f){this.INT_MAX_VALUE=2147483647;var h=f||ks(null);(u>100||u<0)&&(h.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:u},!0),u=100),this[Uy]=u,this.samplingScoreGenerator=new wR}return s.prototype.isSampledIn=function(u){var f=this[Uy],h=!1;return f==null||f>=100||u.baseType===I[zi]?!0:(h=this.samplingScoreGenerator[rE](u)<f,h)},s}(),Wi,nh,sv=void 0,sE="",ER=65e3;function uE(s){try{return s.responseText}catch{}return null}function TR(s){return s&&s.sendPOST}var lE=as((Wi={endpointUrl:Ll(Ci,Ih+rv)},Wi[Kf]=Io(),Wi[eE]=15e3,Wi[Rh]=102400,Wi.disableTelemetry=Io(),Wi[_g]=Io(!0),Wi.isRetryDisabled=Io(),Wi[G_]=Io(!0),Wi[z_]=Io(!0),Wi[t_]=Io(),Wi[V_]=Io(),Wi[Oh]=Io(),Wi[so]=sv,Wi.namePrefix=sv,Wi.samplingPercentage=Ll(IR,100),Wi[Jf]=sv,Wi[QS]=sv,Wi[tp]=1e4,Wi[rs]=!1,Wi.httpXHROverride={isVal:TR,v:sv},Wi[Py]=Io(),Wi.transports=sv,Wi.retryCodes=sv,Wi.maxRetryCnt={isVal:Xt,v:10},Wi));function IR(s){return!isNaN(s)&&s>0&&s<=100}var NR=(nh={},nh[nn.dataType]=iE,nh[Y.dataType]=hR,nh[k.dataType]=mR,nh[z.dataType]=vR,nh[ep.dataType]=dR,nh[I.dataType]=pR,nh[L.dataType]=fR,nh),cE=function(s){hf(u,s);function u(){var f=s.call(this)||this;f.priority=1001,f.identifier=ts;var h,E,x,A,F,$,G,ee=0,fe,pe,me,le,Me,we,Ue,Ye,Xe,pt,Nr,dn,pn,Yn,er,Ht,cn,aa,Ii,nt,Gt,zn,$e,ar,Ni,Wn,$s;return Qi(u,f,function(Ie,xo){mE(),Ie.pause=function(){Lh(),x=!0},Ie.resume=function(){x&&(x=!1,E=null,$n(),o_())},Ie.flush=function(se,xe,Et){if(se===void 0&&(se=!0),!x){Lh();try{return Ie[ir](se,null,Et||1)}catch(Tt){_t(Ie[$r](),1,22,"flush failed, telemetry will not be collected: "+Pi(Tt),{exception:nr(Tt)})}}},Ie.onunloadFlush=function(){if(!x)if(Ue||nt)try{return Ie[ir](!0,bu,2)}catch(se){_t(Ie[$r](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Pi(se),{exception:nr(se)})}else Ie.flush(!1)},Ie.addHeader=function(se,xe){G[se]=xe},Ie[jn]=function(se,xe,Et,Tt){Ie.isInitialized()&&_t(Ie[$r](),1,28,"Sender is already initialized"),xo[jn](se,xe,Et,Tt);var xr=Ie.identifier;F=new _R(xe.logger),h=0,E=null,Ie[Ti]=null,$=0;var Sr=Ie[$r]();me=Vd(Bu("Sender"),xe.evtNamespace&&xe.evtNamespace()),pe=es(me),Ie._addHook(Gu(se,function(tn){var Ki=tn.cfg;Ki.storagePrefix&&tt(Ki.storagePrefix);var np=g(null,Ki,xe),Br=np.getExtCfg(xr,lE),vE=Br[Ua];if(le&&vE===le){var zb=Ki[Ua];zb&&zb!==vE&&(Br[Ua]=zb)}lr(Br[so])&&(Br[so]=Ki[so]),qr(Ie,"_senderConfig",{g:function(){return Br}}),Me!==Br[Ua]&&(le=Me=Br[Ua]),xe.activeStatus()===Ka.PENDING?Ie.pause():xe.activeStatus()===Ka.ACTIVE&&Ie.resume(),pt&&pt!==Br[Jf]&&Ft(pt,function(wu){delete G[wu.header]}),we=Br[Rh],Ue=(Br[Oh]===!1||Br[G_]===!1)&&xs(),Ye=Br[Oh]===!1&&xs(),Xe=Br[G_]===!1&&xs(),nt=Br[Py],Gt=!!Br[t_],$s=Br.retryCodes;var Wb=Br[rs],s_=!!Br[_g]&&(!!Wb||Ae()),hE=Br.namePrefix,RR=s_!==Ht||s_&&aa!==hE||s_&&cn!==Wb;if(Ie[zc]){if(RR)try{Ie._buffer=Ie._buffer[lm](Sr,Br,s_)}catch(wu){_t(Ie[$r](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+Pi(wu),{exception:nr(wu)})}$n()}else Ie[zc]=s_?new oE(Sr,Br):new Hb(Sr,Br);aa=hE,Ht=s_,cn=Wb,zn=!Br[V_]&&Dd(!0),Ni=!!Br[z_],Ie._sample=new SR(Br.samplingPercentage,Sr),dn=Br[so],!lr(dn)&&!pE(dn,Ki)&&_t(Sr,1,100,"Invalid Instrumentation key "+dn),pt=Br[Jf],mn(le)&&!ke(le)&&pt&&pt[Se]>0?Ft(pt,function(wu){f.addHeader(wu.header,wu.value)}):pt=null,Ii=Br[Fb];var gE=Bs();Wn?Wn.SetConfig(gE):(Wn=new Fs,Wn[jn](gE,Sr));var By=Br.httpXHROverride,qy=null,J_=null,OR=If([3,1,2],Br.transports);qy=Wn&&Wn[My](OR,!1);var Kb=Wn&&Wn.getFallbackInst();$e=function(wu,Eg){return kt(Kb,wu,Eg)},ar=function(wu,Eg){return kt(Kb,wu,Eg,!1)},qy=nt?By:qy||By||Kb,Ie[Ti]=function(wu,Eg){return kt(qy,wu,Eg)},zn&&(fe=a_);var Jb=If([3,1],Br[XS]);zn||(Jb=Jb.filter(function(wu){return wu!==2})),J_=Wn&&Wn[My](Jb,!0),J_=nt?By:J_||By,(nt||Br[XS]||!fe)&&J_&&(fe=function(wu,Eg){return kt(J_,wu,Eg)}),fe||(fe=$e),Nr=Br.disableTelemetry,pn=Br[QS]||sv,Yn=Br.isRetryDisabled,er=Br[eE]}))},Ie.processTelemetry=function(se,xe){var Et;xe=Ie._getTelCtx(xe);var Tt=xe[$r]();try{var xr=fm(se,Tt);if(!xr)return;var Sr=Mh(se,Tt);if(!Sr)return;var tn=F[Ly](Sr),Ki=Ie[zc];$n(tn);var np=(Et={},Et[sm]=tn,Et.cnt=0,Et);Ki[pi](np),o_()}catch(Br){_t(Tt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Pi(Br),{exception:nr(Br)})}Ie.processNext(se,xe)},Ie.isCompletelyIdle=function(){return!x&&ee===0&&Ie._buffer[na]()===0},Ie.getOfflineListener=function(){return pe},Ie._xhrReadyStateChange=function(se,xe,Et){if(!pm(xe))return rp(se,xe,Et)},Ie[ir]=function(se,xe,Et){se===void 0&&(se=!0);var Tt;if(!x)try{var xr=Ie[zc];if(Nr)xr[um]();else if(xr[na]()>0){var Sr=xr.getItems();$y(Et||0,se),xe?Tt=xe.call(Ie,Sr,se):Tt=Ie[Ti](Sr,se)}Lh()}catch(Ki){var tn=qi();(!tn||tn>9)&&_t(Ie[$r](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+Pi(Ki),{exception:nr(Ki)})}return Tt},Ie.getOfflineSupport=function(){var se;return se={getUrl:function(){return le},createPayload:Oe},se[Ly]=oa,se.batch=yu,se.shouldProcess=function(xe){return!!fm(xe)},se},Ie._doTeardown=function(se,xe){Ie.onunloadFlush(),Ac(pe,!1),mE()},Ie[yg]=function(se,xe,Et){if(!pm(se))return Wl(se,xe)},Ie[Ub]=function(se,xe){if(!pm(se))return Ah(se,xe)},Ie[Fy]=function(se,xe){if(!pm(se))return cm(se)},Ie._xdrOnLoad=function(se,xe){if(!pm(xe))return Ea(se,xe)};function Ea(se,xe){var Et=uE(se);if(se&&(Et+""=="200"||Et===""))h=0,Ie[Fy](xe,0);else{var Tt=en(Et);Tt&&Tt[jb]&&Tt[jb]>Tt[Yb]&&!Yn?Ie[Ub](xe,Tt):Ie[yg](xe,Ts(se))}}function Bs(){var se;try{var xe={xdrOnComplete:function(Tt,xr,Sr){var tn=Ph(Sr);if(tn)return Ea(Tt,tn)},fetchOnComplete:function(Tt,xr,Sr,tn){var Ki=Ph(tn);if(Ki)return sa(Tt.status,Ki,Tt.url,Ki[Se],Tt.statusText,Sr||"")},xhrOnComplete:function(Tt,xr,Sr){var tn=Ph(Sr);if(tn)return rp(Tt,tn,tn[Se])},beaconOnRetry:function(Tt,xr,Sr){return dm(Tt,xr,Sr)}},Et=(se={},se[Fb]=Ii,se.isOneDs=!1,se.disableCredentials=!1,se[t_]=Gt,se.disableBeacon=!Xe,se.disableBeaconSync=!Ye,se.senderOnCompleteCallBack=xe,se);return Et}catch{}return null}function rp(se,xe,Et){se.readyState===4&&sa(se.status,xe,se.responseURL,Et,ro(se),uE(se)||se.response)}function Wl(se,xe,Et){_t(Ie[$r](),2,26,"Failed to send telemetry.",{message:xe}),Ie._buffer&&Ie._buffer[mi](se)}function Ah(se,xe){for(var Et=[],Tt=[],xr=xe.errors.reverse(),Sr=0,tn=xr;Sr<tn.length;Sr++){var Ki=tn[Sr],np=se.splice(Ki.index,1)[0];Fh(Ki.statusCode)?Tt[Sa](np):Et[Sa](np)}se[Se]>0&&Ie[Fy](se,xe[Yb]),Et[Se]>0&&Ie[yg](Et,ro(null,["partial success",xe[Yb],"of",xe.itemsReceived].join(" "))),Tt[Se]>0&&(K_(Tt),_t(Ie[$r](),2,40,"Partial success. Delivered: "+se[Se]+", Failed: "+Et[Se]+". Will retry to send "+Tt[Se]+" our of "+xe[jb]+" items"))}function cm(se,xe){Ie._buffer&&Ie._buffer[mi](se)}function Ph(se){try{if(se){var xe=se,Et=xe[$b];return Et&&Et[Se]?Et:null}}catch{}return null}function fm(se,xe){if(Nr)return!1;if(!se)return xe&&_t(xe,1,7,"Cannot send empty telemetry"),!1;if(se.baseData&&!se[Bb])return xe&&_t(xe,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(se[Bb]||(se[Bb]="EventData"),!Ie[Ti])return xe&&_t(xe,1,28,"Sender was not initialized"),!1;if(St(se))se[fg]=Ie._sample[Uy];else return xe&&_t(xe,2,33,"Telemetry item was sampled out and not sent",{SampleRate:Ie._sample[Uy]}),!1;return!0}function Mh(se,xe){var Et=se.iKey||dn,Tt=u.constructEnvelope(se,Et,xe,pn);if(!Tt){_t(xe,1,47,"Unable to create an AppInsights envelope");return}var xr=!1;if(se[wa]&&se[wa][zv]&&(Ft(se[wa][zv],function(Sr){try{Sr&&Sr(Tt)===!1&&(xr=!0,zu(xe,"Telemetry processor check returns false"))}catch(tn){_t(xe,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Pi(tn),{exception:nr(tn)},!0)}}),delete se[wa][zv]),!xr)return Tt}function oa(se){var xe=sE,Et=Ie[$r]();try{var Tt=fm(se,Et),xr=null;Tt&&(xr=Mh(se,Et)),xr&&(xe=F[Ly](xr))}catch{}return xe}function yu(se){var xe=sE;return se&&se[Se]&&(xe="["+se.join(",")+"]"),xe}function Oe(se){var xe,Et=si();return xe={urlString:le},xe[Ve]=se,xe.headers=Et,xe}function St(se){return Ie._sample.isSampledIn(se)}function tr(se,xe,Et,Tt){xe===200&&se?Ie._onSuccess(se,se[Se]):Tt&&Ie[yg](se,Tt)}function kt(se,xe,Et,Tt){Tt===void 0&&(Tt=!0);var xr=function(Ki,np,Br){return tr(xe,Ki,np,Br)},Sr=hr(xe),tn=se&&se.sendPOST;return tn&&Sr?(Tt&&Ie._buffer[ov](xe),tn(Sr,xr,!Et)):null}function hr(se){var xe;if(ot(se)&&se[Se]>0){var Et=Ie[zc].batchPayloads(se),Tt=si(),xr=(xe={},xe[Ve]=Et,xe.urlString=le,xe.headers=Tt,xe.disableXhrSync=Gt,xe.disableFetchKeepAlive=!zn,xe[$b]=se,xe);return xr}return null}function si(){try{var se=G||{};return ke(le)&&(se[pg[6]]=pg[7]),se}catch{}return null}function $n(se){var xe=se?se[Se]:0;return Ie[zc].size()+xe>we?((!pe||pe.isOnline())&&Ie[ir](!0,null,10),!0):!1}function sa(se,xe,Et,Tt,xr,Sr){var tn=null;if(Ie._appId||(tn=en(Sr),tn&&tn.appId&&(Ie._appId=tn.appId)),(se<200||se>=300)&&se!==0){if((se===301||se===307||se===308)&&!ns(Et)){Ie[yg](xe,xr);return}if(pe&&!pe.isOnline()){if(!Yn){var Ki=10;K_(xe,Ki),_t(Ie[$r](),2,40,". Offline - Response Code: ".concat(se,". Offline status: ").concat(!pe.isOnline(),". Will retry to send ").concat(xe.length," items."))}return}!Yn&&Fh(se)?(K_(xe),_t(Ie[$r](),2,40,". Response code "+se+". Will retry to send "+xe[Se]+" items.")):Ie[yg](xe,xr)}else ns(Et),se===206?(tn||(tn=en(Sr)),tn&&!Yn?Ie[Ub](xe,tn):Ie[yg](xe,xr)):(h=0,Ie[Fy](xe,Tt))}function ns(se){return $>=10?!1:!Pe(se)&&se!==""&&se!==le?(le=se,++$,!0):!1}function bu(se,xe){if(fe)fe(se,!1);else{var Et=Wn&&Wn[My]([3],!0);return kt(Et,se,xe)}}function dm(se,xe,Et){var Tt=se,xr=Tt&&Tt[$b];if(Ni)ar&&ar(xr,!0),_t(Ie[$r](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var Sr=[],tn=0;tn<xr[Se];tn++){var Ki=xr[tn],np=[Ki],Br=hr(np);Et(Br,xe)?Ie._onSuccess(np,np[Se]):Sr[Sa](Ki)}Sr[Se]>0&&(ar&&ar(Sr,!0),_t(Ie[$r](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function pm(se){try{if(se&&se[Se])return mn(se[0])}catch{}return null}function a_(se,xe){var Et=null;if(ot(se)){for(var Tt=se[Se],xr=0;xr<se[Se];xr++)Tt+=se[xr].item[Se];var Sr=Wn.getSyncFetchPayload();Sr+Tt<=ER?Et=2:xs()?Et=3:(Et=1,_t(Ie[$r](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var tn=Wn&&Wn[My]([Et],!0);return kt(tn,se,xe)}return null}function K_(se,xe){if(xe===void 0&&(xe=1),!(!se||se[Se]===0)){var Et=Ie[zc];Et[mi](se),h++;for(var Tt=0,xr=se;Tt<xr.length;Tt++){var Sr=xr[Tt];Sr.cnt=Sr.cnt||0,Sr.cnt++,Et[pi](Sr)}Vb(xe),o_()}}function Vb(se){var xe=10,Et;if(h<=1)Et=xe;else{var Tt=(Math.pow(2,h)-1)/2,xr=Math.floor(Math.random()*Tt*xe)+1;xr=se*xr,Et=Math.max(Math.min(xr,3600),xe)}var Sr=Nu()+Et*1e3;E=Sr}function o_(){if(!A&&!x){var se=E?Math.max(0,E-Nu()):0,xe=Math.max(er,se);A=Ru(function(){A=null,Ie[ir](!0,null,1)},xe)}}function Lh(){A&&A.cancel(),A=null,E=null}function Fh(se){return Pe($s)?se===401||se===408||se===429||se===500||se===502||se===503||se===504:$s[Se]&&$s.indexOf(se)>-1}function Yy(){var se="getNotifyMgr";return Ie.core[se]?Ie.core[se]():Ie.core._notificationManager}function $y(se,xe){var Et=Yy();if(Et&&Et[tE])try{Et[tE](se,xe)}catch(Tt){_t(Ie[$r](),1,74,"send request notification failed: "+Pi(Tt),{exception:nr(Tt)})}}function pE(se,xe){var Et=xe.disableInstrumentationKeyValidation,Tt=Pe(Et)?!1:Et;if(Tt)return!0;var xr="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",Sr=new RegExp(xr);return Sr.test(se)}function mE(){Ie[Ti]=null,Ie[zc]=null,Ie._appId=null,Ie._sample=null,G={},pe=null,h=0,E=null,x=!1,A=null,F=null,$=0,ee=0,fe=null,me=null,le=null,Me=null,we=0,Ue=!1,pt=null,Nr=!1,dn=null,pn=sv,Yn=!1,Ht=null,aa=sv,Gt=!1,zn=!1,Ni=!1,$e=null,ar=null,Wn=null,qr(Ie,"_senderConfig",{g:function(){return gt({},lE)}})}}),f}return u.constructEnvelope=function(f,h,E,x){var A;h!==f.iKey&&!Pe(h)?A=_o(_o({},f),{iKey:h}):A=f;var F=NR[A.baseType]||iE;return F(E,A,x)},u}(Ut),r_="instrumentationKey",jy="connectionString",fE="instrumentationkey",n_="endpointUrl",dE="ingestionendpoint",W_="userOverrideEndpointUrl",i_,Gb=void 0,CR=(i_={diagnosticLogInterval:Ll(xR,1e4)},i_[jy]=Gb,i_[n_]=Gb,i_[r_]=Gb,i_.extensionConfig={},i_);function xR(s){return s&&s>0}var DR=function(){function s(u){var f=new zt,h;(Pe(u)||Pe(u[r_])&&Pe(u[jy]))&&_r("Invalid input configuration"),Qi(s,this,function(x){qr(x,"config",{g:function(){return h}}),A(),x.initialize=A,x.track=E,Id(x,f,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function A(){var F=Jo(u||{},CR);h=F.cfg,f.addUnloadHook(Gu(F,function(){var $=h[jy];if(lr($)){var G=_c(function(me,le){ws($,function(Me){var we=Me.value,Ue=h[r_];if(!Me.rejected&&we){h[jy]=we;var Ye=Ar(we);Ue=Ye[fE]||Ue}me(Ue)})}),ee=_c(function(me,le){ws($,function(Me){var we=Me.value,Ue=h[n_];if(!Me.rejected&&we){var Ye=Ar(we),Xe=Ye[dE];Ue=Xe?Xe+rv:Ue}me(Ue)})});h[r_]=G,h[n_]=h[W_]||ee}if(mn($)){var fe=Ar($),pe=fe[dE];h[n_]=h[W_]?h[W_]:pe+rv,h[r_]=fe[fE]||h[r_]}h[n_]=h[W_]?h[W_]:h[n_]})),f.initialize(h,[new cE])}});function E(x){x&&(x.baseData=x.baseData||{},x.baseType=x.baseType||"EventData"),f.track(x)}}return s.__ieDyn=1,s}();t.AppInsightsCore=zt,t.ApplicationInsights=DR,t.Sender=cE,t.SeverityLevel=Q,t.arrForEach=Ft,t.isNullOrUndefined=Pe,t.proxyFunctions=Id,t.throwError=_r})});var fI=ln(pv=>{"use strict";var VA=pv&&pv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),zA=pv&&pv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),WA=pv&&pv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&VA(e,t,r);return zA(e,t),e};Object.defineProperty(pv,"__esModule",{value:!0});pv.appInsightsClientFactory=void 0;var KA=uI(),JA=jw(),ZA=async(t,e,r,n,i)=>{let a;try{let v=await Promise.resolve().then(()=>WA(cI())),_={};if(n){let U={alwaysUseXhrOverride:!0,httpXHROverride:n};_[KA.BreezeChannelIdentifier]=U}let y;t.startsWith("InstrumentationKey=")||(y=t);let C=y?{instrumentationKey:y}:{connectionString:t};a=new v.ApplicationInsights({...C,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:_})}catch(v){return Promise.reject(v)}return{logEvent:(v,_)=>{let y={..._==null?void 0:_.properties,..._==null?void 0:_.measurements};i!=null&&i.length&&JA.TelemetryUtil.applyReplacements(y,i),a==null||a.track({name:v,data:y,baseType:"EventData",ext:{user:{id:e,authId:e},app:{sesId:r}},baseData:{name:v,properties:_==null?void 0:_.properties,measurements:_==null?void 0:_.measurements}})},flush:async()=>{a==null||a.flush(!1)},dispose:async()=>new Promise(_=>{a==null||a.unload(!0,()=>{_(),a=void 0},1e3)})}};pv.appInsightsClientFactory=ZA});var dI=ln(B0=>{"use strict";Object.defineProperty(B0,"__esModule",{value:!0});B0.BaseTelemetryReporter=void 0;var Yw=class{constructor(e,r,n){this.telemetrySender=e,this.vscodeAPI=r,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,r,n,i){i?this.telemetrySender.sendEventData(e,{properties:r,measurements:n}):this.telemetryLogger.logUsage(e,{properties:r,measurements:n})}sendTelemetryEvent(e,r,n){this.internalSendTelemetryEvent(e,r,n,!1)}sendRawTelemetryEvent(e,r,n){let i={...r};for(let a of Object.keys(i??{})){let l=i[a];typeof a=="string"&&l!==void 0&&(i[a]=new this.vscodeAPI.TelemetryTrustedValue(typeof l=="string"?l:l.value))}this.sendTelemetryEvent(e,i,n)}sendDangerousTelemetryEvent(e,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,r,n,!0)}internalSendTelemetryErrorEvent(e,r,n,i){i?this.telemetrySender.sendEventData(e,{properties:r,measurements:n}):this.telemetryLogger.logError(e,{properties:r,measurements:n})}sendTelemetryErrorEvent(e,r,n){this.internalSendTelemetryErrorEvent(e,r,n,!1)}sendDangerousTelemetryErrorEvent(e,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,r,n,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}};B0.BaseTelemetryReporter=Yw});var pI=ln(q0=>{"use strict";Object.defineProperty(q0,"__esModule",{value:!0});q0.BaseTelemetrySender=void 0;var sh;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(sh||(sh={}));var $w=class{constructor(e,r){this._instantiationStatus=sh.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=r,this._key=e}sendEventData(e,r){if(!this._telemetryClient){this._instantiationStatus!==sh.INSTANTIATED&&this._eventQueue.push({eventName:e,data:r});return}this._telemetryClient.logEvent(e,r)}sendErrorData(e,r){if(!this._telemetryClient){this._instantiationStatus!==sh.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:r});return}let n={stack:e.stack,message:e.message,name:e.name};if(r){let i=r.properties||r;r.properties={...i,...n}}else r={properties:n};this._telemetryClient.logEvent("unhandlederror",r)}async flush(){var e;return(e=this._telemetryClient)==null?void 0:e.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:r})=>this.sendEventData(e,r)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:r})=>this.sendErrorData(e,r)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===sh.NOT_INSTANTIATED&&(this._instantiationStatus=sh.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=sh.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=sh.INSTANTIATED}))}};q0.BaseTelemetrySender=$w});var hI=ln(uh=>{"use strict";var XA=uh&&uh.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),QA=uh&&uh.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Hw=uh&&uh.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&XA(e,t,r);return QA(e,t),e};Object.defineProperty(uh,"__esModule",{value:!0});var eP=Hw(require("https")),Bw=Hw(require("os")),H0=Hw(require("vscode")),tP=oI(),rP=fI(),nP=dI(),iP=pI(),mI=jw();function vI(){return{sendPOST:(e,r)=>{let n={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{let i=eP.request(e.urlString,n,a=>{a.on("data",function(l){r(a.statusCode??200,a.headers,l.toString())}),a.on("error",function(){r(0,{})})});i.write(e.data,a=>{a&&r(0,{})}),i.end()}catch{r(0,{})}}}}var qw=class extends nP.BaseTelemetryReporter{constructor(e,r){let n=l=>(0,rP.appInsightsClientFactory)(l,H0.env.machineId,H0.env.sessionId,vI(),r);mI.TelemetryUtil.shouldUseOneDataSystemSDK(e)&&(n=l=>(0,tP.oneDataSystemClientFactory)(l,H0,vI()));let i={release:Bw.release(),platform:Bw.platform(),architecture:Bw.arch()},a=new iP.BaseTelemetrySender(e,n);if(e&&e.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(a,H0,{additionalCommonProperties:mI.TelemetryUtil.getAdditionalCommonProperties(i)})}};uh.default=qw});var gN=ln((sB,w_)=>{"use strict";var PP=typeof Buffer<"u",pN=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,mN=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function vN(t,e,r){r==null&&e!==null&&typeof e=="object"&&(r=e,e=void 0),PP&&Buffer.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));let n=JSON.parse(t,e);if(n===null||typeof n!="object")return n;let i=r&&r.protoAction||"error",a=r&&r.constructorAction||"error";if(i==="ignore"&&a==="ignore")return n;if(i!=="ignore"&&a!=="ignore"){if(pN.test(t)===!1&&mN.test(t)===!1)return n}else if(i!=="ignore"&&a==="ignore"){if(pN.test(t)===!1)return n}else if(mN.test(t)===!1)return n;return hN(n,{protoAction:i,constructorAction:a,safe:r&&r.safe})}function hN(t,{protoAction:e="error",constructorAction:r="error",safe:n}={}){let i=[t];for(;i.length;){let a=i;i=[];for(let l of a){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(l,"__proto__")){if(n===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete l.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(l,"constructor")&&Object.prototype.hasOwnProperty.call(l.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete l.constructor}for(let v in l){let _=l[v];_&&typeof _=="object"&&i.push(_)}}}return t}function Zw(t,e,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return vN(t,e,r)}finally{Error.stackTraceLimit=n}}function MP(t,e){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return vN(t,e,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}w_.exports=Zw;w_.exports.default=Zw;w_.exports.parse=Zw;w_.exports.safeParse=MP;w_.exports.scan=hN});var lY={};Zb(lY,{activate:()=>sY,deactivate:()=>uY});module.exports=yE(lY);var sR=require("vscode");var xI=require("vscode");var Ww={};Zb(Ww,{action:()=>UR,diffView:()=>cP,storeApiKey:()=>jR,work:()=>fP});function UR(t){return e=>{typeof e=="function"&&e()}}var Xb=require("vscode");function jR({ext:t,log:e}){return async(r,n)=>{let i=await Xb.window.showInputBox({prompt:`Enter the ${n}`});i&&(e.info(n,{event:"action.key"}),await t.secrets.store(r,i),Xb.window.showInformationMessage(`${n} stored successfully`))}}var NI=require("vscode");var ja=require("vscode"),EI=Z_(Dw());var Rw=require("crypto");var $T="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var hA=128,Gh,Vh;function BT(t){!Gh||Gh.length<t?(Gh=Buffer.allocUnsafe(t*hA),Rw.webcrypto.getRandomValues(Gh),Vh=0):Vh+t>Gh.length&&(Rw.webcrypto.getRandomValues(Gh),Vh=0),Vh+=t}function gA(t){return BT(t|=0),Gh.subarray(Vh-t,Vh)}function _A(t,e,r){let n=(2<<31-Math.clz32(t.length-1|1))-1,i=Math.ceil(1.6*n*e/t.length);return(a=e)=>{let l="";for(;;){let v=r(i),_=i;for(;_--;)if(l+=t[v[_]&n]||"",l.length>=a)return l}}}function qT(t,e=21){return _A(t,e,gA)}function HT(t=21){BT(t|=0);let e="";for(let r=Vh-t;r<Vh;r++)e+=$T[Gh[r]&63];return e}var Zl=require("vscode"),YA=Z_(XT());var lp=require("vscode"),k0="multicoder",QT,eI,R0=(eI=(QT=lp.workspace.workspaceFolders)==null?void 0:QT[0])==null?void 0:eI.uri,O0=new Map;function jA(t){return t.path.split("/").pop()}function Zc(t){if(t.scheme==k0)return t.path=="/"?"./":t.path.slice(1);let e=lp.workspace.getWorkspaceFolder(t);if(e){let a="";return String(e.uri)!==String(t)&&(a=lp.workspace.asRelativePath(t,!1).replace(/\\/g,"/")),String(e.uri)!==String(R0)&&(a=".folders/"+jA(e.uri)+(a?"/"+a:"")),a||(a="."),a}if(t.scheme==="untitled")return".untitled/"+t.path;let r=t.path.split("/"),n=r.pop(),i=r.pop();return O0.has(i)||O0.set(i,lp.Uri.joinPath(t,"../")),".external/"+i+"/"+n}function hi(t,e){return(t=="."||t=="./")&&(t=""),t=t.startsWith("/")?t:"/"+t,lp.Uri.from({scheme:k0,path:t,authority:e})}function Jl(t){let[e,r,...n]=t.path.split("/");if(r==".multicoder")return t.with({scheme:"file",authority:""});if(r==".untitled")return lp.Uri.from({scheme:"untitled",path:n.join("/")});if(r==".external"){let i=n.shift();if(O0.has(i))return lp.Uri.joinPath(O0.get(i),n.join("/"));throw new Error("Unknown external directory: "+i)}if(r==".folders"){let i=n.shift();for(let a of lp.workspace.workspaceFolders||[])if(a.uri.path.endsWith("/"+i))return lp.Uri.joinPath(a.uri,n.join("/"));throw new Error("Unknown workspace folder: "+i)}if(R0)return t.path?lp.Uri.joinPath(R0,t.path):R0;throw new Error("Cannot find source Uri")}var{fs:sy}=Zl.workspace,$A=qT("1234567890abcdef",10);function A0(){return $A()}function P0(){let t=[];for(let e of Zl.window.tabGroups.all.flatMap(r=>r.tabs))e.input instanceof Zl.TabInputText&&t.push(e.input.uri);return t}async function zh(t){return new TextDecoder().decode(await sy.readFile(t))}async function M0(t,e){return await sy.writeFile(t,new TextEncoder().encode(e))}async function Xc(t){try{let e=await sy.stat(t);return e&&!!(e.type&Zl.FileType.File)}catch{return!1}}async function vm(t){try{let e=await sy.stat(t);return e&&!!(e.type&Zl.FileType.Directory)}catch{return!1}}async function L0(t){return(await sy.readDirectory(t)).map(([e,r])=>({name:e,path:Zc(Zl.Uri.joinPath(t,e)),uri:Zl.Uri.joinPath(t,e),isFile:!!(r&Zl.FileType.File),isDirectory:!!(r&Zl.FileType.Directory),isSymbolicLink:!!(r&Zl.FileType.SymbolicLink)}))}var gI=Z_(hI()),aP="InstrumentationKey=4a0957be-8ce1-4335-8aa5-1fb742355aa5;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com/;LiveEndpoint=https://westeurope.livediagnostics.monitor.azure.com/;ApplicationId=b0fce7b4-deeb-43b7-aa17-e5024c6c504c";function oP(t){return{logUsage(e,r){t.sendTelemetryEvent(e,r)},logError(e,r={}){if(e&&typeof e=="object"){let{message:n,stack:i}=e,a=String(e.name||"error").toLowerCase(),l=String(e);t.sendTelemetryErrorEvent(a,{...e,...r,message:n,stack:i,text:l})}else t.sendTelemetryErrorEvent(String(e).toLowerCase().replace(/\W+/g,"-"),r)}}}function _I(t){let e=new gI.default(aP),r=oP(e);t.telemetry=r,r.logUsage("activated"),t.ext.subscriptions.push(e)}var yI=require("vscode");function bI(t){let e=yI.window.createOutputChannel("Multicoder",{log:!0});function r(i){if(!i||typeof i!="object")return;let{event:a,...l}=i,v=Object.entries(l).map(([_,y])=>`
    ${_}: ${y}`);v.length&&e.trace(v.join(""))}function n(i){let a={};return i!=null&&i.model&&(a.modelId=i.model.modelId,a.modelProvider=i.model.provider),a}t.log={error(i,a={}){e.error(i),t.telemetry.logError(i,{...n(this.session),...a}),r(a)},warn(i,a={}){e.warn((a!=null&&a.event?`[${a.event}] `:"")+i),t.telemetry.logUsage((a==null?void 0:a.event)||"warning",{text:i,...n(this.session),...a}),r(a)},info(i,a={}){e.info((a!=null&&a.event?`[${a.event}] `:"")+i),t.telemetry.logUsage((a==null?void 0:a.event)||"info",{text:i,...n(this.session),...a}),r(a)},session:null},t.ext.subscriptions.push(e)}async function __(t,e){return new Promise(r=>{let n=!1,i=null;function a(){n||(n=!0,i==null||i.dispose(),r())}e&&(i=e.onCancellationRequested(a)),setTimeout(a,t*1e3)})}var wI=Z_(Dw()),uy=new wI.Volume,Gw=uy,SI={recursive:!0};Gw.mkdirSync("/.multicoder/task",SI);Gw.mkdirSync("/.multicoder/snapshots",SI);Gw.writeFileSync("/.multicoder/snapshots/~empty","");var z0=".wh.",{fs:ly}=ja.workspace,Vw=new Map,xg=new Map;Vw.set("shared",uy);function Wh(t){let e=Vw.get(t.authority);return e||(e=new EI.Volume,Vw.set(t.authority,e)),e}function cy(t){let e=Wh(t).statSync(t.path,{throwIfNoEntry:!1});if(!e)return null;let r=0,n=Number(e.birthtimeMs),i=Number(e.mtimeMs),a=Number(e.size);return e.isFile()?r=ja.FileType.File:e.isDirectory()&&(r=ja.FileType.Directory),{type:r,ctime:n,mtime:i,size:a}}function V0(t){return cy(t.with({authority:"shared"}))}function sP(t){let e=cy(W0(t))||V0(W0(t));return e&&(e.permissions=ja.FilePermission.Readonly),e}function W0(t){return t.with({path:"/.multicoder/snapshots/"+t.query,query:""})}function uP(t){let e=t.path.split("/");for(;e.length>1;){let r=z0+e.pop(),n=[...e,r].join("/");if(Wh(t).statSync(n,{throwIfNoEntry:!1}))return!0}return!1}function G0(t){let e=t.path.split("/"),r=e.pop(),n=e.join("/"),i=n+"/"+z0+r;return[n,i]}async function lP(t){try{return await ly.stat(Jl(t))}catch{return null}}function Dg(t){return t.authority+t.path}var K0=class{async stat(e){if(e.query)return sP(e);if(uP(e))throw ja.FileSystemError.FileNotFound(e);return cy(e)||V0(e)||await ly.stat(Jl(e))}async readFile(e){return e.query&&(e=W0(e)),cy(e)?Wh(e).readFileSync(e.path):V0(e)?uy.readFileSync(e.path):ly.readFile(Jl(e))}async writeFile(e,r,n){let[i,a]=G0(e),l=Wh(e);l.mkdirSync(i,{recursive:!0}),l.writeFileSync(e.path,r),l.statSync(a,{throwIfNoEntry:!1})&&l.unlinkSync(a),xg.has(Dg(e))&&this._emitter.fire([{type:ja.FileChangeType.Changed,uri:e}])}async readDirectory(e){let r=await lP(e),n=V0(e),i=cy(e),a=Wh(e),l=new Map,v=[];if(r)for(let[_,y]of await ly.readDirectory(Jl(e)))l.set(_,y);return n&&uy.readdirSync(e.path,{withFileTypes:!0}).forEach(_=>{l.set(_.name,_.isDirectory()?ja.FileType.Directory:ja.FileType.File)}),i&&a.readdirSync(e.path,{withFileTypes:!0}).forEach(_=>{_.name.startsWith(z0)?v.push(_.name.slice(z0.length)):l.set(_.name,_.isDirectory()?ja.FileType.Directory:ja.FileType.File)}),v.forEach(_=>l.delete(_)),Array.from(l.entries())}async delete(e,r){let[n,i]=G0(e),a=Wh(e);a.statSync(e.path,{throwIfNoEntry:!1})&&a.unlinkSync(e.path),a.mkdirSync(n,{recursive:!0}),a.writeFileSync(i,""),xg.has(Dg(e))&&this._emitter.fire([{type:ja.FileChangeType.Deleted,uri:e}])}async rename(e,r,n){let[i,a]=G0(e),[l,v]=G0(r),_=Wh(e);if(_.mkdirSync(i,{recursive:!0}),_.mkdirSync(l,{recursive:!0}),_.statSync(e.path,{throwIfNoEntry:!1}))_.renameSync(e.path,r.path);else{let y=await ly.readFile(Jl(e));_.writeFileSync(r.path,y)}_.statSync(v,{throwIfNoEntry:!1})&&_.unlinkSync(v),_.writeFileSync(a,""),xg.has(Dg(e)||xg.has(Dg(r)))&&this._emitter.fire([{type:ja.FileChangeType.Deleted,oldUri:e},{type:ja.FileChangeType.Created,newUri:r}])}async createDirectory(e){Wh(e).mkdirSync(e.path,{recursive:!0})}_emitter=new ja.EventEmitter;onDidChangeFile=this._emitter.event;watch(e,r){let n={},i=xg.get(Dg(e))||new Set;return i.add(n),xg.set(Dg(e),i),new ja.Disposable(()=>{i.delete(n),i.size||xg.set(Dg(e),null)})}};async function zw(t,e){let r=e?HT():"~empty",n=t.with({query:r});return e&&await M0(W0(n),e),n}var TI=require("vscode");function II(t){let e=new K0,r=TI.workspace.registerFileSystemProvider(k0,e,{isCaseSensitive:!0,isReadonly:!1});t.ext.subscriptions.push(r)}function cP(t){return async(e,r,n)=>{let i=t.recent.get(n),a=e.split("/").pop(),l=i==null?void 0:i.task,v=null;for(;l&&!v;)v=l.edits.find(U=>U.id===r),l=l.parent;if(!v)return;let _=hi(e,i.id),y=await zw(_,v.before),C=await zw(_,v.after);await NI.commands.executeCommand("vscode.diff",y,C,`${a} (Multicoder)`),t.log.info(a,{event:"action.diff"})}}var N$=require("vscode");async function CI(){}function fP(t){return()=>{CI()}}function DI(t){Object.entries(Ww).forEach(([e,r])=>{let n=xI.commands.registerCommand(`multicoder.${e}`,r(t));t.ext.subscriptions.push(n)})}var bv=require("vscode");var RI="vercel.ai.error",dP=Symbol.for(RI),OI,pP=class kI extends Error{constructor({name:e,message:r,cause:n}){super(r),this[OI]=!0,this.name=e,this.cause=n}static isInstance(e){return kI.hasMarker(e,RI)}static hasMarker(e,r){let n=Symbol.for(r);return e!=null&&typeof e=="object"&&n in e&&typeof e[n]=="boolean"&&e[n]===!0}};OI=dP;var Ot=pP,AI="AI_APICallError",PI=`vercel.ai.error.${AI}`,mP=Symbol.for(PI),MI,Qc=class extends Ot{constructor({message:t,url:e,requestBodyValues:r,statusCode:n,responseHeaders:i,responseBody:a,cause:l,isRetryable:v=n!=null&&(n===408||n===409||n===429||n>=500),data:_}){super({name:AI,message:t,cause:l}),this[MI]=!0,this.url=e,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=i,this.responseBody=a,this.isRetryable=v,this.data=_}static isInstance(t){return Ot.hasMarker(t,PI)}};MI=mP;var LI="AI_EmptyResponseBodyError",FI=`vercel.ai.error.${LI}`,vP=Symbol.for(FI),UI,Jw=class extends Ot{constructor({message:t="Empty response body"}={}){super({name:LI,message:t}),this[UI]=!0}static isInstance(t){return Ot.hasMarker(t,FI)}};UI=vP;function Kh(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var jI="AI_InvalidArgumentError",YI=`vercel.ai.error.${jI}`,hP=Symbol.for(YI),$I,J0=class extends Ot{constructor({message:t,cause:e,argument:r}){super({name:jI,message:t,cause:e}),this[$I]=!0,this.argument=r}static isInstance(t){return Ot.hasMarker(t,YI)}};$I=hP;var BI="AI_InvalidPromptError",qI=`vercel.ai.error.${BI}`,gP=Symbol.for(qI),HI,mv=class extends Ot{constructor({prompt:t,message:e,cause:r}){super({name:BI,message:`Invalid prompt: ${e}`,cause:r}),this[HI]=!0,this.prompt=t}static isInstance(t){return Ot.hasMarker(t,qI)}};HI=gP;var GI="AI_InvalidResponseDataError",VI=`vercel.ai.error.${GI}`,_P=Symbol.for(VI),zI,lh=class extends Ot{constructor({data:t,message:e=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:GI,message:e}),this[zI]=!0,this.data=t}static isInstance(t){return Ot.hasMarker(t,VI)}};zI=_P;var WI="AI_JSONParseError",KI=`vercel.ai.error.${WI}`,yP=Symbol.for(KI),JI,y_=class extends Ot{constructor({text:t,cause:e}){super({name:WI,message:`JSON parsing failed: Text: ${t}.
Error message: ${Kh(e)}`,cause:e}),this[JI]=!0,this.text=t}static isInstance(t){return Ot.hasMarker(t,KI)}};JI=yP;var ZI="AI_LoadAPIKeyError",XI=`vercel.ai.error.${ZI}`,bP=Symbol.for(XI),QI,b_=class extends Ot{constructor({message:t}){super({name:ZI,message:t}),this[QI]=!0}static isInstance(t){return Ot.hasMarker(t,XI)}};QI=bP;var wP="AI_LoadSettingError",SP=`vercel.ai.error.${wP}`,EP=Symbol.for(SP),TP;TP=EP;var IP="AI_NoContentGeneratedError",NP=`vercel.ai.error.${IP}`,CP=Symbol.for(NP),xP;xP=CP;var eN="AI_NoSuchModelError",tN=`vercel.ai.error.${eN}`,DP=Symbol.for(tN),rN,fy=class extends Ot{constructor({errorName:t=eN,modelId:e,modelType:r,message:n=`No such ${r}: ${e}`}){super({name:t,message:n}),this[rN]=!0,this.modelId=e,this.modelType=r}static isInstance(t){return Ot.hasMarker(t,tN)}};rN=DP;var nN="AI_TooManyEmbeddingValuesForCallError",iN=`vercel.ai.error.${nN}`,RP=Symbol.for(iN),aN,Z0=class extends Ot{constructor(t){super({name:nN,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[aN]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return Ot.hasMarker(t,iN)}};aN=RP;var oN="AI_TypeValidationError",sN=`vercel.ai.error.${oN}`,OP=Symbol.for(sN),uN,kP=class Kw extends Ot{constructor({value:e,cause:r}){super({name:oN,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${Kh(r)}`,cause:r}),this[uN]=!0,this.value=e}static isInstance(e){return Ot.hasMarker(e,sN)}static wrap({value:e,cause:r}){return Kw.isInstance(r)&&r.value===e?r:new Kw({value:e,cause:r})}};uN=OP;var ch=kP,lN="AI_UnsupportedFunctionalityError",cN=`vercel.ai.error.${lN}`,AP=Symbol.for(cN),fN,an=class extends Ot{constructor({functionality:t,message:e=`'${t}' functionality not supported.`}){super({name:lN,message:e}),this[fN]=!0,this.functionality=t}static isInstance(t){return Ot.hasMarker(t,cN)}};fN=AP;var dN=(t,e=21)=>(r=e)=>{let n="",i=r|0;for(;i--;)n+=t[Math.random()*t.length|0];return n};var rb=Z_(gN(),1);var LP=Object.defineProperty,FP=(t,e,r)=>e in t?LP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,X0=(t,e,r)=>FP(t,typeof e!="symbol"?e+"":e,r),Q0=class extends Error{constructor(e,r){super(e),X0(this,"type"),X0(this,"field"),X0(this,"value"),X0(this,"line"),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function Xw(t){}function _N(t){let{onEvent:e=Xw,onError:r=Xw,onRetry:n=Xw,onComment:i}=t,a="",l=!0,v,_="",y="";function C(V){let J=l?V.replace(/^\xEF\xBB\xBF/,""):V,[re,_e]=UP(`${a}${J}`);for(let Le of re)U(Le);a=_e,l=!1}function U(V){if(V===""){K();return}if(V.startsWith(":")){i&&i(V.slice(V.startsWith(": ")?2:1));return}let J=V.indexOf(":");if(J!==-1){let re=V.slice(0,J),_e=V[J+1]===" "?2:1,Le=V.slice(J+_e);W(re,Le,V);return}W(V,"",V)}function W(V,J,re){switch(V){case"event":y=J;break;case"data":_=`${_}${J}
`;break;case"id":v=J.includes("\0")?void 0:J;break;case"retry":/^\d+$/.test(J)?n(parseInt(J,10)):r(new Q0(`Invalid \`retry\` value: "${J}"`,{type:"invalid-retry",value:J,line:re}));break;default:r(new Q0(`Unknown field "${V.length>20?`${V.slice(0,20)}\u2026`:V}"`,{type:"unknown-field",field:V,value:J,line:re}));break}}function K(){_.length>0&&e({id:v,event:y||void 0,data:_.endsWith(`
`)?_.slice(0,-1):_}),v=void 0,_="",y=""}function q(V={}){a&&V.consume&&U(a),v=void 0,_="",y="",a=""}return{feed:C,reset:q}}function UP(t){let e=[],r="",n=t.length;for(let i=0;i<n;i++){let a=t[i];a==="\r"&&t[i+1]===`
`?(e.push(r),r="",i++):a==="\r"||a===`
`?(e.push(r),r=""):r+=a}return[e,r]}var eb=class extends TransformStream{constructor({onError:e,onRetry:r,onComment:n}={}){let i;super({start(a){i=_N({onEvent:l=>{a.enqueue(l)},onError(l){e==="terminate"?a.error(l):typeof e=="function"&&e(l)},onRetry:r,onComment:n})},transform(a){i.feed(a)}})}};function Do(...t){return t.reduce((e,r)=>({...e,...r??{}}),{})}function yN(t){return new ReadableStream({async pull(e){try{let{value:r,done:n}=await t.next();n?e.close():e.enqueue(r)}catch(r){e.error(r)}},cancel(){}})}async function bN(t){return t==null?Promise.resolve():new Promise(e=>setTimeout(e,t))}function tb(t){let e={};return t.headers.forEach((r,n)=>{e[n]=r}),e}var hm=({prefix:t,size:e=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let i=dN(r,e);if(t==null)return i;if(r.includes(n))throw new J0({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return a=>`${t}${n}${i(a)}`},Xl=hm();function wN(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}function jP(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>r!=null))}function dy(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}function Jh({apiKey:t,environmentVariableName:e,apiKeyParameterName:r="apiKey",description:n}){if(typeof t=="string")return t;if(t!=null)throw new b_({message:`${n} API key must be a string.`});if(typeof process>"u")throw new b_({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(t=process.env[e],t==null)throw new b_({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new b_({message:`${n} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}var py=Symbol.for("vercel.ai.validator");function YP(t){return{[py]:!0,validate:t}}function $P(t){return typeof t=="object"&&t!==null&&py in t&&t[py]===!0&&"validate"in t}function BP(t){return $P(t)?t:qP(t)}function qP(t){return YP(e=>{let r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}})}function HP({value:t,schema:e}){let r=gm({value:t,schema:e});if(!r.success)throw ch.wrap({value:t,cause:r.error});return r.value}function gm({value:t,schema:e}){let r=BP(e);try{if(r.validate==null)return{success:!0,value:t};let n=r.validate(t);return n.success?n:{success:!1,error:ch.wrap({value:t,cause:n.error})}}catch(n){return{success:!1,error:ch.wrap({value:t,cause:n})}}}function GP({text:t,schema:e}){try{let r=rb.default.parse(t);return e==null?r:HP({value:r,schema:e})}catch(r){throw y_.isInstance(r)||ch.isInstance(r)?r:new y_({text:t,cause:r})}}function vv({text:t,schema:e}){try{let r=rb.default.parse(t);if(e==null)return{success:!0,value:r,rawValue:r};let n=gm({value:r,schema:e});return n.success?{...n,rawValue:r}:n}catch(r){return{success:!1,error:y_.isInstance(r)?r:new y_({text:t,cause:r})}}}function S_(t){try{return rb.default.parse(t),!0}catch{return!1}}var VP=()=>globalThis.fetch,lo=async({url:t,headers:e,body:r,failedResponseHandler:n,successfulResponseHandler:i,abortSignal:a,fetch:l})=>zP({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:i,abortSignal:a,fetch:l}),zP=async({url:t,headers:e={},body:r,successfulResponseHandler:n,failedResponseHandler:i,abortSignal:a,fetch:l=VP()})=>{try{let v=await l(t,{method:"POST",headers:jP(e),body:r.content,signal:a}),_=tb(v);if(!v.ok){let y;try{y=await i({response:v,url:t,requestBodyValues:r.values})}catch(C){throw dy(C)||Qc.isInstance(C)?C:new Qc({message:"Failed to process error response",cause:C,statusCode:v.status,url:t,responseHeaders:_,requestBodyValues:r.values})}throw y.value}try{return await n({response:v,url:t,requestBodyValues:r.values})}catch(y){throw y instanceof Error&&(dy(y)||Qc.isInstance(y))?y:new Qc({message:"Failed to process successful response",cause:y,statusCode:v.status,url:t,responseHeaders:_,requestBodyValues:r.values})}}catch(v){if(dy(v))throw v;if(v instanceof TypeError&&v.message==="fetch failed"){let _=v.cause;if(_!=null)throw new Qc({message:`Cannot connect to API: ${_.message}`,cause:_,url:t,requestBodyValues:r.values,isRetryable:!0})}throw v}};async function Rg(t){return typeof t=="function"&&(t=t()),Promise.resolve(t)}var Zh=({errorSchema:t,errorToMessage:e,isRetryable:r})=>async({response:n,url:i,requestBodyValues:a})=>{let l=await n.text(),v=tb(n);if(l.trim()==="")return{responseHeaders:v,value:new Qc({message:n.statusText,url:i,requestBodyValues:a,statusCode:n.status,responseHeaders:v,responseBody:l,isRetryable:r==null?void 0:r(n)})};try{let _=GP({text:l,schema:t});return{responseHeaders:v,value:new Qc({message:e(_),url:i,requestBodyValues:a,statusCode:n.status,responseHeaders:v,responseBody:l,data:_,isRetryable:r==null?void 0:r(n,_)})}}catch{return{responseHeaders:v,value:new Qc({message:n.statusText,url:i,requestBodyValues:a,statusCode:n.status,responseHeaders:v,responseBody:l,isRetryable:r==null?void 0:r(n)})}}},hv=t=>async({response:e})=>{let r=tb(e);if(e.body==null)throw new Jw({});return{responseHeaders:r,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new eb).pipeThrough(new TransformStream({transform({data:n},i){n!=="[DONE]"&&i.enqueue(vv({text:n,schema:t}))}}))}};var tl=t=>async({response:e,url:r,requestBodyValues:n})=>{let i=await e.text(),a=vv({text:i,schema:t}),l=tb(e);if(!a.success)throw new Qc({message:"Invalid JSON response",cause:a.error,statusCode:e.status,responseHeaders:l,responseBody:i,url:r,requestBodyValues:n});return{responseHeaders:l,value:a.value,rawValue:a.rawValue}};var{btoa:WP,atob:KP}=globalThis;function SN(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r=KP(e);return Uint8Array.from(r,n=>n.codePointAt(0))}function _m(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCodePoint(t[r]);return WP(e)}function Xh(t){return t==null?void 0:t.replace(/\/$/,"")}var In;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let a={};for(let l of i)a[l]=l;return a},t.getValidEnumValues=i=>{let a=t.objectKeys(i).filter(v=>typeof i[i[v]]!="number"),l={};for(let v of a)l[v]=i[v];return t.objectValues(l)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let a=[];for(let l in i)Object.prototype.hasOwnProperty.call(i,l)&&a.push(l);return a},t.find=(i,a)=>{for(let l of i)if(a(l))return l},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(l=>typeof l=="string"?`'${l}'`:l).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(In||(In={}));var eS;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(eS||(eS={}));var It=In.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),dh=t=>{switch(typeof t){case"undefined":return It.undefined;case"string":return It.string;case"number":return isNaN(t)?It.nan:It.number;case"boolean":return It.boolean;case"function":return It.function;case"bigint":return It.bigint;case"symbol":return It.symbol;case"object":return Array.isArray(t)?It.array:t===null?It.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?It.promise:typeof Map<"u"&&t instanceof Map?It.map:typeof Set<"u"&&t instanceof Set?It.set:typeof Date<"u"&&t instanceof Date?It.date:It.object;default:return It.unknown}},He=In.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),JP=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Ql=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(a){return a.message},n={_errors:[]},i=a=>{for(let l of a.issues)if(l.code==="invalid_union")l.unionErrors.map(i);else if(l.code==="invalid_return_type")i(l.returnTypeError);else if(l.code==="invalid_arguments")i(l.argumentsError);else if(l.path.length===0)n._errors.push(r(l));else{let v=n,_=0;for(;_<l.path.length;){let y=l.path[_];_===l.path.length-1?(v[y]=v[y]||{_errors:[]},v[y]._errors.push(r(l))):v[y]=v[y]||{_errors:[]},v=v[y],_++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,In.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Ql.create=t=>new Ql(t);var I_=(t,e)=>{let r;switch(t.code){case He.invalid_type:t.received===It.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case He.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,In.jsonStringifyReplacer)}`;break;case He.unrecognized_keys:r=`Unrecognized key(s) in object: ${In.joinValues(t.keys,", ")}`;break;case He.invalid_union:r="Invalid input";break;case He.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${In.joinValues(t.options)}`;break;case He.invalid_enum_value:r=`Invalid enum value. Expected ${In.joinValues(t.options)}, received '${t.received}'`;break;case He.invalid_arguments:r="Invalid function arguments";break;case He.invalid_return_type:r="Invalid function return type";break;case He.invalid_date:r="Invalid date";break;case He.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:In.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case He.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case He.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case He.custom:r="Invalid input";break;case He.invalid_intersection_types:r="Intersection results could not be merged";break;case He.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case He.not_finite:r="Number must be finite";break;default:r=e.defaultError,In.assertNever(t)}return{message:r}},NN=I_;function ZP(t){NN=t}function nb(){return NN}var ib=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,a=[...r,...i.path||[]],l={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let v="",_=n.filter(y=>!!y).slice().reverse();for(let y of _)v=y(l,{data:e,defaultError:v}).message;return{...i,path:a,message:v}},XP=[];function ft(t,e){let r=nb(),n=ib({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===I_?void 0:I_].filter(i=>!!i)});t.common.issues.push(n)}var rl=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return Ir;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let a=await i.key,l=await i.value;n.push({key:a,value:l})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:a,value:l}=i;if(a.status==="aborted"||l.status==="aborted")return Ir;a.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof l.value<"u"||i.alwaysSet)&&(n[a.value]=l.value)}return{status:e.value,value:n}}},Ir=Object.freeze({status:"aborted"}),T_=t=>({status:"dirty",value:t}),ec=t=>({status:"valid",value:t}),tS=t=>t.status==="aborted",rS=t=>t.status==="dirty",Og=t=>t.status==="valid",hy=t=>typeof Promise<"u"&&t instanceof Promise;function ab(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function CN(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}var jt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(jt||(jt={}));var my,vy,cp=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},EN=(t,e)=>{if(Og(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Ql(t.common.issues);return this._error=r,this._error}}};function Hr(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(l,v)=>{var _,y;let{message:C}=t;return l.code==="invalid_enum_value"?{message:C??v.defaultError}:typeof v.data>"u"?{message:(_=C??n)!==null&&_!==void 0?_:v.defaultError}:l.code!=="invalid_type"?{message:v.defaultError}:{message:(y=C??r)!==null&&y!==void 0?y:v.defaultError}},description:i}}var Gr=class{get description(){return this._def.description}_getType(e){return dh(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:dh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new rl,ctx:{common:e.parent.common,data:e.data,parsedType:dh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(hy(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:dh(e)},a=this._parseSync({data:e,path:i.path,parent:i});return EN(i,a)}"~validate"(e){var r,n;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:dh(e)};if(!this["~standard"].async)try{let a=this._parseSync({data:e,path:[],parent:i});return Og(a)?{value:a.value}:{issues:i.common.issues}}catch(a){!((n=(r=a==null?void 0:a.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(a=>Og(a)?{value:a.value}:{issues:i.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:dh(e)},i=this._parse({data:e,path:n.path,parent:n}),a=await(hy(i)?i:Promise.resolve(i));return EN(n,a)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,a)=>{let l=e(i),v=()=>a.addIssue({code:He.custom,...n(i)});return typeof Promise<"u"&&l instanceof Promise?l.then(_=>_?!0:(v(),!1)):l?!0:(v(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Xf({schema:this,typeName:ze.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return ef.create(this,this._def)}nullable(){return _v.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return mh.create(this)}promise(){return tg.create(this,this._def)}or(e){return Ug.create([this,e],this._def)}and(e){return jg.create(this,e,this._def)}transform(e){return new Xf({...Hr(this._def),schema:this,typeName:ze.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Hg({...Hr(this._def),innerType:this,defaultValue:r,typeName:ze.ZodDefault})}brand(){return new gy({typeName:ze.ZodBranded,type:this,...Hr(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Gg({...Hr(this._def),innerType:this,catchValue:r,typeName:ze.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return _y.create(this,e)}readonly(){return Vg.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},QP=/^c[^\s-]{8,}$/i,e1=/^[0-9a-z]+$/,t1=/^[0-9A-HJKMNP-TV-Z]{26}$/i,r1=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,n1=/^[a-z0-9_-]{21}$/i,i1=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,a1=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,o1=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,s1="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Qw,u1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,l1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,c1=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,f1=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,d1=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,p1=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,xN="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",m1=new RegExp(`^${xN}$`);function DN(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function v1(t){return new RegExp(`^${DN(t)}$`)}function RN(t){let e=`${xN}T${DN(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function h1(t,e){return!!((e==="v4"||!e)&&u1.test(t)||(e==="v6"||!e)&&c1.test(t))}function g1(t,e){if(!i1.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function _1(t,e){return!!((e==="v4"||!e)&&l1.test(t)||(e==="v6"||!e)&&f1.test(t))}var Qh=class t extends Gr{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==It.string){let a=this._getOrReturnCtx(e);return ft(a,{code:He.invalid_type,expected:It.string,received:a.parsedType}),Ir}let n=new rl,i;for(let a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),ft(i,{code:He.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),ft(i,{code:He.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){let l=e.data.length>a.value,v=e.data.length<a.value;(l||v)&&(i=this._getOrReturnCtx(e,i),l?ft(i,{code:He.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):v&&ft(i,{code:He.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")o1.test(e.data)||(i=this._getOrReturnCtx(e,i),ft(i,{validation:"email",code:He.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Qw||(Qw=new RegExp(s1,"u")),Qw.test(e.data)||(i=this._getOrReturnCtx(e,i),ft(i,{validation:"emoji",code:He.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")r1.test(e.data)||(i=this._getOrReturnCtx(e,i),ft(i,{validation:"uuid",code:He.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")n1.test(e.data)||(i=this._getOrReturnCtx(e,i),ft(i,{validation:"nanoid",code:He.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")QP.test(e.data)||(i=this._getOrReturnCtx(e,i),ft(i,{validation:"cuid",code:He.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")e1.test(e.data)||(i=this._getOrReturnCtx(e,i),ft(i,{validation:"cuid2",code:He.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")t1.test(e.data)||(i=this._getOrReturnCtx(e,i),ft(i,{validation:"ulid",code:He.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ft(i,{validation:"url",code:He.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ft(i,{validation:"regex",code:He.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),ft(i,{code:He.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),ft(i,{code:He.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),ft(i,{code:He.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?RN(a).test(e.data)||(i=this._getOrReturnCtx(e,i),ft(i,{code:He.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?m1.test(e.data)||(i=this._getOrReturnCtx(e,i),ft(i,{code:He.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?v1(a).test(e.data)||(i=this._getOrReturnCtx(e,i),ft(i,{code:He.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?a1.test(e.data)||(i=this._getOrReturnCtx(e,i),ft(i,{validation:"duration",code:He.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?h1(e.data,a.version)||(i=this._getOrReturnCtx(e,i),ft(i,{validation:"ip",code:He.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?g1(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),ft(i,{validation:"jwt",code:He.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?_1(e.data,a.version)||(i=this._getOrReturnCtx(e,i),ft(i,{validation:"cidr",code:He.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?d1.test(e.data)||(i=this._getOrReturnCtx(e,i),ft(i,{validation:"base64",code:He.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?p1.test(e.data)||(i=this._getOrReturnCtx(e,i),ft(i,{validation:"base64url",code:He.invalid_string,message:a.message}),n.dirty()):In.assertNever(a);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:He.invalid_string,...jt.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...jt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...jt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...jt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...jt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...jt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...jt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...jt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...jt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...jt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...jt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...jt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...jt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...jt.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...jt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...jt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...jt.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...jt.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...jt.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...jt.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...jt.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...jt.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...jt.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...jt.errToObj(r)})}nonempty(e){return this.min(1,jt.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Qh.create=t=>{var e;return new Qh({checks:[],typeName:ze.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Hr(t)})};function y1(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,a=parseInt(t.toFixed(i).replace(".","")),l=parseInt(e.toFixed(i).replace(".",""));return a%l/Math.pow(10,i)}var kg=class t extends Gr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==It.number){let a=this._getOrReturnCtx(e);return ft(a,{code:He.invalid_type,expected:It.number,received:a.parsedType}),Ir}let n,i=new rl;for(let a of this._def.checks)a.kind==="int"?In.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ft(n,{code:He.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),ft(n,{code:He.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),ft(n,{code:He.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?y1(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),ft(n,{code:He.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ft(n,{code:He.not_finite,message:a.message}),i.dirty()):In.assertNever(a);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,jt.toString(r))}gt(e,r){return this.setLimit("min",e,!1,jt.toString(r))}lte(e,r){return this.setLimit("max",e,!0,jt.toString(r))}lt(e,r){return this.setLimit("max",e,!1,jt.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:jt.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:jt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:jt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:jt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:jt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:jt.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:jt.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:jt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:jt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:jt.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&In.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};kg.create=t=>new kg({checks:[],typeName:ze.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Hr(t)});var Ag=class t extends Gr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==It.bigint)return this._getInvalidInput(e);let n,i=new rl;for(let a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),ft(n,{code:He.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),ft(n,{code:He.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ft(n,{code:He.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):In.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return ft(r,{code:He.invalid_type,expected:It.bigint,received:r.parsedType}),Ir}gte(e,r){return this.setLimit("min",e,!0,jt.toString(r))}gt(e,r){return this.setLimit("min",e,!1,jt.toString(r))}lte(e,r){return this.setLimit("max",e,!0,jt.toString(r))}lt(e,r){return this.setLimit("max",e,!1,jt.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:jt.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:jt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:jt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:jt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:jt.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:jt.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Ag.create=t=>{var e;return new Ag({checks:[],typeName:ze.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Hr(t)})};var Pg=class extends Gr{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==It.boolean){let n=this._getOrReturnCtx(e);return ft(n,{code:He.invalid_type,expected:It.boolean,received:n.parsedType}),Ir}return ec(e.data)}};Pg.create=t=>new Pg({typeName:ze.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Hr(t)});var Mg=class t extends Gr{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==It.date){let a=this._getOrReturnCtx(e);return ft(a,{code:He.invalid_type,expected:It.date,received:a.parsedType}),Ir}if(isNaN(e.data.getTime())){let a=this._getOrReturnCtx(e);return ft(a,{code:He.invalid_date}),Ir}let n=new rl,i;for(let a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),ft(i,{code:He.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),ft(i,{code:He.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):In.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:jt.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:jt.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Mg.create=t=>new Mg({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ze.ZodDate,...Hr(t)});var N_=class extends Gr{_parse(e){if(this._getType(e)!==It.symbol){let n=this._getOrReturnCtx(e);return ft(n,{code:He.invalid_type,expected:It.symbol,received:n.parsedType}),Ir}return ec(e.data)}};N_.create=t=>new N_({typeName:ze.ZodSymbol,...Hr(t)});var Lg=class extends Gr{_parse(e){if(this._getType(e)!==It.undefined){let n=this._getOrReturnCtx(e);return ft(n,{code:He.invalid_type,expected:It.undefined,received:n.parsedType}),Ir}return ec(e.data)}};Lg.create=t=>new Lg({typeName:ze.ZodUndefined,...Hr(t)});var Fg=class extends Gr{_parse(e){if(this._getType(e)!==It.null){let n=this._getOrReturnCtx(e);return ft(n,{code:He.invalid_type,expected:It.null,received:n.parsedType}),Ir}return ec(e.data)}};Fg.create=t=>new Fg({typeName:ze.ZodNull,...Hr(t)});var eg=class extends Gr{constructor(){super(...arguments),this._any=!0}_parse(e){return ec(e.data)}};eg.create=t=>new eg({typeName:ze.ZodAny,...Hr(t)});var ph=class extends Gr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ec(e.data)}};ph.create=t=>new ph({typeName:ze.ZodUnknown,...Hr(t)});var ym=class extends Gr{_parse(e){let r=this._getOrReturnCtx(e);return ft(r,{code:He.invalid_type,expected:It.never,received:r.parsedType}),Ir}};ym.create=t=>new ym({typeName:ze.ZodNever,...Hr(t)});var C_=class extends Gr{_parse(e){if(this._getType(e)!==It.undefined){let n=this._getOrReturnCtx(e);return ft(n,{code:He.invalid_type,expected:It.void,received:n.parsedType}),Ir}return ec(e.data)}};C_.create=t=>new C_({typeName:ze.ZodVoid,...Hr(t)});var mh=class t extends Gr{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==It.array)return ft(r,{code:He.invalid_type,expected:It.array,received:r.parsedType}),Ir;if(i.exactLength!==null){let l=r.data.length>i.exactLength.value,v=r.data.length<i.exactLength.value;(l||v)&&(ft(r,{code:l?He.too_big:He.too_small,minimum:v?i.exactLength.value:void 0,maximum:l?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(ft(r,{code:He.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(ft(r,{code:He.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((l,v)=>i.type._parseAsync(new cp(r,l,r.path,v)))).then(l=>rl.mergeArray(n,l));let a=[...r.data].map((l,v)=>i.type._parseSync(new cp(r,l,r.path,v)));return rl.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:jt.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:jt.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:jt.toString(r)}})}nonempty(e){return this.min(1,e)}};mh.create=(t,e)=>new mh({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ze.ZodArray,...Hr(e)});function E_(t){if(t instanceof tf){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=ef.create(E_(n))}return new tf({...t._def,shape:()=>e})}else return t instanceof mh?new mh({...t._def,type:E_(t.element)}):t instanceof ef?ef.create(E_(t.unwrap())):t instanceof _v?_v.create(E_(t.unwrap())):t instanceof gv?gv.create(t.items.map(e=>E_(e))):t}var tf=class t extends Gr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=In.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==It.object){let y=this._getOrReturnCtx(e);return ft(y,{code:He.invalid_type,expected:It.object,received:y.parsedType}),Ir}let{status:n,ctx:i}=this._processInputParams(e),{shape:a,keys:l}=this._getCached(),v=[];if(!(this._def.catchall instanceof ym&&this._def.unknownKeys==="strip"))for(let y in i.data)l.includes(y)||v.push(y);let _=[];for(let y of l){let C=a[y],U=i.data[y];_.push({key:{status:"valid",value:y},value:C._parse(new cp(i,U,i.path,y)),alwaysSet:y in i.data})}if(this._def.catchall instanceof ym){let y=this._def.unknownKeys;if(y==="passthrough")for(let C of v)_.push({key:{status:"valid",value:C},value:{status:"valid",value:i.data[C]}});else if(y==="strict")v.length>0&&(ft(i,{code:He.unrecognized_keys,keys:v}),n.dirty());else if(y!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let y=this._def.catchall;for(let C of v){let U=i.data[C];_.push({key:{status:"valid",value:C},value:y._parse(new cp(i,U,i.path,C)),alwaysSet:C in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let y=[];for(let C of _){let U=await C.key,W=await C.value;y.push({key:U,value:W,alwaysSet:C.alwaysSet})}return y}).then(y=>rl.mergeObjectSync(n,y)):rl.mergeObjectSync(n,_)}get shape(){return this._def.shape()}strict(e){return jt.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,a,l,v;let _=(l=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,r,n).message)!==null&&l!==void 0?l:n.defaultError;return r.code==="unrecognized_keys"?{message:(v=jt.errToObj(e).message)!==null&&v!==void 0?v:_}:{message:_}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ze.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return In.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return In.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return E_(this)}partial(e){let r={};return In.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return In.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof ef;)a=a._def.innerType;r[n]=a}}),new t({...this._def,shape:()=>r})}keyof(){return ON(In.objectKeys(this.shape))}};tf.create=(t,e)=>new tf({shape:()=>t,unknownKeys:"strip",catchall:ym.create(),typeName:ze.ZodObject,...Hr(e)});tf.strictCreate=(t,e)=>new tf({shape:()=>t,unknownKeys:"strict",catchall:ym.create(),typeName:ze.ZodObject,...Hr(e)});tf.lazycreate=(t,e)=>new tf({shape:t,unknownKeys:"strip",catchall:ym.create(),typeName:ze.ZodObject,...Hr(e)});var Ug=class extends Gr{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(a){for(let v of a)if(v.result.status==="valid")return v.result;for(let v of a)if(v.result.status==="dirty")return r.common.issues.push(...v.ctx.common.issues),v.result;let l=a.map(v=>new Ql(v.ctx.common.issues));return ft(r,{code:He.invalid_union,unionErrors:l}),Ir}if(r.common.async)return Promise.all(n.map(async a=>{let l={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:l}),ctx:l}})).then(i);{let a,l=[];for(let _ of n){let y={...r,common:{...r.common,issues:[]},parent:null},C=_._parseSync({data:r.data,path:r.path,parent:y});if(C.status==="valid")return C;C.status==="dirty"&&!a&&(a={result:C,ctx:y}),y.common.issues.length&&l.push(y.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;let v=l.map(_=>new Ql(_));return ft(r,{code:He.invalid_union,unionErrors:v}),Ir}}get options(){return this._def.options}};Ug.create=(t,e)=>new Ug({options:t,typeName:ze.ZodUnion,...Hr(e)});var fh=t=>t instanceof Yg?fh(t.schema):t instanceof Xf?fh(t.innerType()):t instanceof $g?[t.value]:t instanceof Bg?t.options:t instanceof qg?In.objectValues(t.enum):t instanceof Hg?fh(t._def.innerType):t instanceof Lg?[void 0]:t instanceof Fg?[null]:t instanceof ef?[void 0,...fh(t.unwrap())]:t instanceof _v?[null,...fh(t.unwrap())]:t instanceof gy||t instanceof Vg?fh(t.unwrap()):t instanceof Gg?fh(t._def.innerType):[],ob=class t extends Gr{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==It.object)return ft(r,{code:He.invalid_type,expected:It.object,received:r.parsedType}),Ir;let n=this.discriminator,i=r.data[n],a=this.optionsMap.get(i);return a?r.common.async?a._parseAsync({data:r.data,path:r.path,parent:r}):a._parseSync({data:r.data,path:r.path,parent:r}):(ft(r,{code:He.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Ir)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let a of r){let l=fh(a.shape[e]);if(!l.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let v of l){if(i.has(v))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(v)}`);i.set(v,a)}}return new t({typeName:ze.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Hr(n)})}};function nS(t,e){let r=dh(t),n=dh(e);if(t===e)return{valid:!0,data:t};if(r===It.object&&n===It.object){let i=In.objectKeys(e),a=In.objectKeys(t).filter(v=>i.indexOf(v)!==-1),l={...t,...e};for(let v of a){let _=nS(t[v],e[v]);if(!_.valid)return{valid:!1};l[v]=_.data}return{valid:!0,data:l}}else if(r===It.array&&n===It.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let a=0;a<t.length;a++){let l=t[a],v=e[a],_=nS(l,v);if(!_.valid)return{valid:!1};i.push(_.data)}return{valid:!0,data:i}}else return r===It.date&&n===It.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var jg=class extends Gr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(a,l)=>{if(tS(a)||tS(l))return Ir;let v=nS(a.value,l.value);return v.valid?((rS(a)||rS(l))&&r.dirty(),{status:r.value,value:v.data}):(ft(n,{code:He.invalid_intersection_types}),Ir)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,l])=>i(a,l)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};jg.create=(t,e,r)=>new jg({left:t,right:e,typeName:ze.ZodIntersection,...Hr(r)});var gv=class t extends Gr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==It.array)return ft(n,{code:He.invalid_type,expected:It.array,received:n.parsedType}),Ir;if(n.data.length<this._def.items.length)return ft(n,{code:He.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ir;!this._def.rest&&n.data.length>this._def.items.length&&(ft(n,{code:He.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let a=[...n.data].map((l,v)=>{let _=this._def.items[v]||this._def.rest;return _?_._parse(new cp(n,l,n.path,v)):null}).filter(l=>!!l);return n.common.async?Promise.all(a).then(l=>rl.mergeArray(r,l)):rl.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};gv.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new gv({items:t,typeName:ze.ZodTuple,rest:null,...Hr(e)})};var sb=class t extends Gr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==It.object)return ft(n,{code:He.invalid_type,expected:It.object,received:n.parsedType}),Ir;let i=[],a=this._def.keyType,l=this._def.valueType;for(let v in n.data)i.push({key:a._parse(new cp(n,v,n.path,v)),value:l._parse(new cp(n,n.data[v],n.path,v)),alwaysSet:v in n.data});return n.common.async?rl.mergeObjectAsync(r,i):rl.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Gr?new t({keyType:e,valueType:r,typeName:ze.ZodRecord,...Hr(n)}):new t({keyType:Qh.create(),valueType:e,typeName:ze.ZodRecord,...Hr(r)})}},x_=class extends Gr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==It.map)return ft(n,{code:He.invalid_type,expected:It.map,received:n.parsedType}),Ir;let i=this._def.keyType,a=this._def.valueType,l=[...n.data.entries()].map(([v,_],y)=>({key:i._parse(new cp(n,v,n.path,[y,"key"])),value:a._parse(new cp(n,_,n.path,[y,"value"]))}));if(n.common.async){let v=new Map;return Promise.resolve().then(async()=>{for(let _ of l){let y=await _.key,C=await _.value;if(y.status==="aborted"||C.status==="aborted")return Ir;(y.status==="dirty"||C.status==="dirty")&&r.dirty(),v.set(y.value,C.value)}return{status:r.value,value:v}})}else{let v=new Map;for(let _ of l){let y=_.key,C=_.value;if(y.status==="aborted"||C.status==="aborted")return Ir;(y.status==="dirty"||C.status==="dirty")&&r.dirty(),v.set(y.value,C.value)}return{status:r.value,value:v}}}};x_.create=(t,e,r)=>new x_({valueType:e,keyType:t,typeName:ze.ZodMap,...Hr(r)});var D_=class t extends Gr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==It.set)return ft(n,{code:He.invalid_type,expected:It.set,received:n.parsedType}),Ir;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(ft(n,{code:He.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(ft(n,{code:He.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let a=this._def.valueType;function l(_){let y=new Set;for(let C of _){if(C.status==="aborted")return Ir;C.status==="dirty"&&r.dirty(),y.add(C.value)}return{status:r.value,value:y}}let v=[...n.data.values()].map((_,y)=>a._parse(new cp(n,_,n.path,y)));return n.common.async?Promise.all(v).then(_=>l(_)):l(v)}min(e,r){return new t({...this._def,minSize:{value:e,message:jt.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:jt.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};D_.create=(t,e)=>new D_({valueType:t,minSize:null,maxSize:null,typeName:ze.ZodSet,...Hr(e)});var ub=class t extends Gr{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==It.function)return ft(r,{code:He.invalid_type,expected:It.function,received:r.parsedType}),Ir;function n(v,_){return ib({data:v,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,nb(),I_].filter(y=>!!y),issueData:{code:He.invalid_arguments,argumentsError:_}})}function i(v,_){return ib({data:v,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,nb(),I_].filter(y=>!!y),issueData:{code:He.invalid_return_type,returnTypeError:_}})}let a={errorMap:r.common.contextualErrorMap},l=r.data;if(this._def.returns instanceof tg){let v=this;return ec(async function(..._){let y=new Ql([]),C=await v._def.args.parseAsync(_,a).catch(K=>{throw y.addIssue(n(_,K)),y}),U=await Reflect.apply(l,this,C);return await v._def.returns._def.type.parseAsync(U,a).catch(K=>{throw y.addIssue(i(U,K)),y})})}else{let v=this;return ec(function(..._){let y=v._def.args.safeParse(_,a);if(!y.success)throw new Ql([n(_,y.error)]);let C=Reflect.apply(l,this,y.data),U=v._def.returns.safeParse(C,a);if(!U.success)throw new Ql([i(C,U.error)]);return U.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:gv.create(e).rest(ph.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||gv.create([]).rest(ph.create()),returns:r||ph.create(),typeName:ze.ZodFunction,...Hr(n)})}},Yg=class extends Gr{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Yg.create=(t,e)=>new Yg({getter:t,typeName:ze.ZodLazy,...Hr(e)});var $g=class extends Gr{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return ft(r,{received:r.data,code:He.invalid_literal,expected:this._def.value}),Ir}return{status:"valid",value:e.data}}get value(){return this._def.value}};$g.create=(t,e)=>new $g({value:t,typeName:ze.ZodLiteral,...Hr(e)});function ON(t,e){return new Bg({values:t,typeName:ze.ZodEnum,...Hr(e)})}var Bg=class t extends Gr{constructor(){super(...arguments),my.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return ft(r,{expected:In.joinValues(n),received:r.parsedType,code:He.invalid_type}),Ir}if(ab(this,my,"f")||CN(this,my,new Set(this._def.values),"f"),!ab(this,my,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return ft(r,{received:r.data,code:He.invalid_enum_value,options:n}),Ir}return ec(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};my=new WeakMap;Bg.create=ON;var qg=class extends Gr{constructor(){super(...arguments),vy.set(this,void 0)}_parse(e){let r=In.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==It.string&&n.parsedType!==It.number){let i=In.objectValues(r);return ft(n,{expected:In.joinValues(i),received:n.parsedType,code:He.invalid_type}),Ir}if(ab(this,vy,"f")||CN(this,vy,new Set(In.getValidEnumValues(this._def.values)),"f"),!ab(this,vy,"f").has(e.data)){let i=In.objectValues(r);return ft(n,{received:n.data,code:He.invalid_enum_value,options:i}),Ir}return ec(e.data)}get enum(){return this._def.values}};vy=new WeakMap;qg.create=(t,e)=>new qg({values:t,typeName:ze.ZodNativeEnum,...Hr(e)});var tg=class extends Gr{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==It.promise&&r.common.async===!1)return ft(r,{code:He.invalid_type,expected:It.promise,received:r.parsedType}),Ir;let n=r.parsedType===It.promise?r.data:Promise.resolve(r.data);return ec(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};tg.create=(t,e)=>new tg({type:t,typeName:ze.ZodPromise,...Hr(e)});var Xf=class extends Gr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ze.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:l=>{ft(n,l),l.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){let l=i.transform(n.data,a);if(n.common.async)return Promise.resolve(l).then(async v=>{if(r.value==="aborted")return Ir;let _=await this._def.schema._parseAsync({data:v,path:n.path,parent:n});return _.status==="aborted"?Ir:_.status==="dirty"||r.value==="dirty"?T_(_.value):_});{if(r.value==="aborted")return Ir;let v=this._def.schema._parseSync({data:l,path:n.path,parent:n});return v.status==="aborted"?Ir:v.status==="dirty"||r.value==="dirty"?T_(v.value):v}}if(i.type==="refinement"){let l=v=>{let _=i.refinement(v,a);if(n.common.async)return Promise.resolve(_);if(_ instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return v};if(n.common.async===!1){let v=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return v.status==="aborted"?Ir:(v.status==="dirty"&&r.dirty(),l(v.value),{status:r.value,value:v.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(v=>v.status==="aborted"?Ir:(v.status==="dirty"&&r.dirty(),l(v.value).then(()=>({status:r.value,value:v.value}))))}if(i.type==="transform")if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Og(l))return l;let v=i.transform(l.value,a);if(v instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:v}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>Og(l)?Promise.resolve(i.transform(l.value,a)).then(v=>({status:r.value,value:v})):l);In.assertNever(i)}};Xf.create=(t,e,r)=>new Xf({schema:t,typeName:ze.ZodEffects,effect:e,...Hr(r)});Xf.createWithPreprocess=(t,e,r)=>new Xf({schema:e,effect:{type:"preprocess",transform:t},typeName:ze.ZodEffects,...Hr(r)});var ef=class extends Gr{_parse(e){return this._getType(e)===It.undefined?ec(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ef.create=(t,e)=>new ef({innerType:t,typeName:ze.ZodOptional,...Hr(e)});var _v=class extends Gr{_parse(e){return this._getType(e)===It.null?ec(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};_v.create=(t,e)=>new _v({innerType:t,typeName:ze.ZodNullable,...Hr(e)});var Hg=class extends Gr{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===It.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Hg.create=(t,e)=>new Hg({innerType:t,typeName:ze.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Hr(e)});var Gg=class extends Gr{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return hy(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ql(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ql(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Gg.create=(t,e)=>new Gg({innerType:t,typeName:ze.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Hr(e)});var R_=class extends Gr{_parse(e){if(this._getType(e)!==It.nan){let n=this._getOrReturnCtx(e);return ft(n,{code:He.invalid_type,expected:It.nan,received:n.parsedType}),Ir}return{status:"valid",value:e.data}}};R_.create=t=>new R_({typeName:ze.ZodNaN,...Hr(t)});var b1=Symbol("zod_brand"),gy=class extends Gr{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},_y=class t extends Gr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Ir:a.status==="dirty"?(r.dirty(),T_(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Ir:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:ze.ZodPipeline})}},Vg=class extends Gr{_parse(e){let r=this._def.innerType._parse(e),n=i=>(Og(i)&&(i.value=Object.freeze(i.value)),i);return hy(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};Vg.create=(t,e)=>new Vg({innerType:t,typeName:ze.ZodReadonly,...Hr(e)});function TN(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function kN(t,e={},r){return t?eg.create().superRefine((n,i)=>{var a,l;let v=t(n);if(v instanceof Promise)return v.then(_=>{var y,C;if(!_){let U=TN(e,n),W=(C=(y=U.fatal)!==null&&y!==void 0?y:r)!==null&&C!==void 0?C:!0;i.addIssue({code:"custom",...U,fatal:W})}});if(!v){let _=TN(e,n),y=(l=(a=_.fatal)!==null&&a!==void 0?a:r)!==null&&l!==void 0?l:!0;i.addIssue({code:"custom",..._,fatal:y})}}):eg.create()}var w1={object:tf.lazycreate},ze;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ze||(ze={}));var S1=(t,e={message:`Input not instance of ${t.name}`})=>kN(r=>r instanceof t,e),AN=Qh.create,PN=kg.create,E1=R_.create,T1=Ag.create,MN=Pg.create,I1=Mg.create,N1=N_.create,C1=Lg.create,x1=Fg.create,D1=eg.create,R1=ph.create,O1=ym.create,k1=C_.create,A1=mh.create,P1=tf.create,M1=tf.strictCreate,L1=Ug.create,F1=ob.create,U1=jg.create,j1=gv.create,Y1=sb.create,$1=x_.create,B1=D_.create,q1=ub.create,H1=Yg.create,G1=$g.create,V1=Bg.create,z1=qg.create,W1=tg.create,IN=Xf.create,K1=ef.create,J1=_v.create,Z1=Xf.createWithPreprocess,X1=_y.create,Q1=()=>AN().optional(),eM=()=>PN().optional(),tM=()=>MN().optional(),rM={string:t=>Qh.create({...t,coerce:!0}),number:t=>kg.create({...t,coerce:!0}),boolean:t=>Pg.create({...t,coerce:!0}),bigint:t=>Ag.create({...t,coerce:!0}),date:t=>Mg.create({...t,coerce:!0})},nM=Ir,T=Object.freeze({__proto__:null,defaultErrorMap:I_,setErrorMap:ZP,getErrorMap:nb,makeIssue:ib,EMPTY_PATH:XP,addIssueToContext:ft,ParseStatus:rl,INVALID:Ir,DIRTY:T_,OK:ec,isAborted:tS,isDirty:rS,isValid:Og,isAsync:hy,get util(){return In},get objectUtil(){return eS},ZodParsedType:It,getParsedType:dh,ZodType:Gr,datetimeRegex:RN,ZodString:Qh,ZodNumber:kg,ZodBigInt:Ag,ZodBoolean:Pg,ZodDate:Mg,ZodSymbol:N_,ZodUndefined:Lg,ZodNull:Fg,ZodAny:eg,ZodUnknown:ph,ZodNever:ym,ZodVoid:C_,ZodArray:mh,ZodObject:tf,ZodUnion:Ug,ZodDiscriminatedUnion:ob,ZodIntersection:jg,ZodTuple:gv,ZodRecord:sb,ZodMap:x_,ZodSet:D_,ZodFunction:ub,ZodLazy:Yg,ZodLiteral:$g,ZodEnum:Bg,ZodNativeEnum:qg,ZodPromise:tg,ZodEffects:Xf,ZodTransformer:Xf,ZodOptional:ef,ZodNullable:_v,ZodDefault:Hg,ZodCatch:Gg,ZodNaN:R_,BRAND:b1,ZodBranded:gy,ZodPipeline:_y,ZodReadonly:Vg,custom:kN,Schema:Gr,ZodSchema:Gr,late:w1,get ZodFirstPartyTypeKind(){return ze},coerce:rM,any:D1,array:A1,bigint:T1,boolean:MN,date:I1,discriminatedUnion:F1,effect:IN,enum:V1,function:q1,instanceof:S1,intersection:U1,lazy:H1,literal:G1,map:$1,nan:E1,nativeEnum:z1,never:O1,null:x1,nullable:J1,number:PN,object:P1,oboolean:tM,onumber:eM,optional:K1,ostring:Q1,pipeline:X1,preprocess:Z1,promise:W1,record:Y1,set:B1,strictObject:M1,string:AN,symbol:N1,transformer:IN,tuple:j1,undefined:C1,union:L1,unknown:R1,void:k1,NEVER:nM,ZodIssueCode:He,quotelessJson:JP,ZodError:Ql});var iM=T.object({type:T.literal("error"),error:T.object({type:T.string(),message:T.string()})}),LN=Zh({errorSchema:iM,errorToMessage:t=>t.error.message});function aM(t){var e;let r=(e=t.tools)!=null&&e.length?t.tools:void 0,n=[],i=new Set;if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:n,betas:i};let a=[];for(let _ of r)switch(_.type){case"function":a.push({name:_.name,description:_.description,input_schema:_.parameters});break;case"provider-defined":switch(_.id){case"anthropic.computer_20250124":i.add("computer-use-2025-01-24"),a.push({name:_.name,type:"computer_20250124",display_width_px:_.args.displayWidthPx,display_height_px:_.args.displayHeightPx,display_number:_.args.displayNumber});break;case"anthropic.computer_20241022":i.add("computer-use-2024-10-22"),a.push({name:_.name,type:"computer_20241022",display_width_px:_.args.displayWidthPx,display_height_px:_.args.displayHeightPx,display_number:_.args.displayNumber});break;case"anthropic.text_editor_20250124":i.add("computer-use-2025-01-24"),a.push({name:_.name,type:"text_editor_20250124"});break;case"anthropic.text_editor_20241022":i.add("computer-use-2024-10-22"),a.push({name:_.name,type:"text_editor_20241022"});break;case"anthropic.bash_20250124":i.add("computer-use-2025-01-24"),a.push({name:_.name,type:"bash_20250124"});break;case"anthropic.bash_20241022":i.add("computer-use-2024-10-22"),a.push({name:_.name,type:"bash_20241022"});break;default:n.push({type:"unsupported-tool",tool:_});break}break;default:n.push({type:"unsupported-tool",tool:_});break}let l=t.toolChoice;if(l==null)return{tools:a,tool_choice:void 0,toolWarnings:n,betas:i};let v=l.type;switch(v){case"auto":return{tools:a,tool_choice:{type:"auto"},toolWarnings:n,betas:i};case"required":return{tools:a,tool_choice:{type:"any"},toolWarnings:n,betas:i};case"none":return{tools:void 0,tool_choice:void 0,toolWarnings:n,betas:i};case"tool":return{tools:a,tool_choice:{type:"tool",name:l.toolName},toolWarnings:n,betas:i};default:{let _=v;throw new an({functionality:`Unsupported tool choice type: ${_}`})}}}function oM({prompt:t,sendReasoning:e,warnings:r}){var n,i,a,l;let v=new Set,_=sM(t),y,C=[];function U(W){var K;let q=W==null?void 0:W.anthropic;return(K=q==null?void 0:q.cacheControl)!=null?K:q==null?void 0:q.cache_control}for(let W=0;W<_.length;W++){let K=_[W],q=W===_.length-1,V=K.type;switch(V){case"system":{if(y!=null)throw new an({functionality:"Multiple system messages that are separated by user/assistant messages"});y=K.messages.map(({content:J,providerMetadata:re})=>({type:"text",text:J,cache_control:U(re)}));break}case"user":{let J=[];for(let re of K.messages){let{role:_e,content:Le}=re;switch(_e){case"user":{for(let ge=0;ge<Le.length;ge++){let Ee=Le[ge],Be=ge===Le.length-1,We=(n=U(Ee.providerMetadata))!=null?n:Be?U(re.providerMetadata):void 0;switch(Ee.type){case"text":{J.push({type:"text",text:Ee.text,cache_control:We});break}case"image":{if(Ee.image instanceof URL)throw new an({functionality:"Image URLs in user messages"});J.push({type:"image",source:{type:"base64",media_type:(i=Ee.mimeType)!=null?i:"image/jpeg",data:_m(Ee.image)},cache_control:We});break}case"file":{if(Ee.data instanceof URL)throw new an({functionality:"Image URLs in user messages"});if(Ee.mimeType!=="application/pdf")throw new an({functionality:"Non-PDF files in user messages"});v.add("pdfs-2024-09-25"),J.push({type:"document",source:{type:"base64",media_type:"application/pdf",data:Ee.data},cache_control:We});break}}}break}case"tool":{for(let ge=0;ge<Le.length;ge++){let Ee=Le[ge],Be=ge===Le.length-1,We=(a=U(Ee.providerMetadata))!=null?a:Be?U(re.providerMetadata):void 0,st=Ee.content!=null?Ee.content.map(mt=>{var At;switch(mt.type){case"text":return{type:"text",text:mt.text,cache_control:void 0};case"image":return{type:"image",source:{type:"base64",media_type:(At=mt.mimeType)!=null?At:"image/jpeg",data:mt.data},cache_control:void 0}}}):JSON.stringify(Ee.result);J.push({type:"tool_result",tool_use_id:Ee.toolCallId,content:st,is_error:Ee.isError,cache_control:We})}break}default:{let ge=_e;throw new Error(`Unsupported role: ${ge}`)}}}C.push({role:"user",content:J});break}case"assistant":{let J=[];for(let re=0;re<K.messages.length;re++){let _e=K.messages[re],Le=re===K.messages.length-1,{content:ge}=_e;for(let Ee=0;Ee<ge.length;Ee++){let Be=ge[Ee],We=Ee===ge.length-1,st=(l=U(Be.providerMetadata))!=null?l:We?U(_e.providerMetadata):void 0;switch(Be.type){case"text":{J.push({type:"text",text:q&&Le&&We?Be.text.trim():Be.text,cache_control:st});break}case"reasoning":{e?J.push({type:"thinking",thinking:Be.text,signature:Be.signature,cache_control:st}):r.push({type:"other",message:"sending reasoning content is disabled for this model"});break}case"redacted-reasoning":{J.push({type:"redacted_thinking",data:Be.data,cache_control:st});break}case"tool-call":{J.push({type:"tool_use",id:Be.toolCallId,name:Be.toolName,input:Be.args,cache_control:st});break}default:{let mt=Be;throw new Error(`Unsupported part: ${mt}`)}}}}C.push({role:"assistant",content:J});break}default:{let J=V;throw new Error(`Unsupported type: ${J}`)}}}return{prompt:{system:y,messages:C},betas:v}}function sM(t){let e=[],r;for(let n of t){let{role:i}=n;switch(i){case"system":{(r==null?void 0:r.type)!=="system"&&(r={type:"system",messages:[]},e.push(r)),r.messages.push(n);break}case"assistant":{(r==null?void 0:r.type)!=="assistant"&&(r={type:"assistant",messages:[]},e.push(r)),r.messages.push(n);break}case"user":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},e.push(r)),r.messages.push(n);break}case"tool":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},e.push(r)),r.messages.push(n);break}default:{let a=i;throw new Error(`Unsupported role: ${a}`)}}}return e}function FN(t){switch(t){case"end_turn":case"stop_sequence":return"stop";case"tool_use":return"tool-calls";case"max_tokens":return"length";default:return"unknown"}}var uM=class{constructor(t,e,r){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.supportsImageUrls=!1,this.modelId=t,this.settings=e,this.config=r}get provider(){return this.config.provider}async getArgs({mode:t,prompt:e,maxTokens:r=4096,temperature:n,topP:i,topK:a,frequencyPenalty:l,presencePenalty:v,stopSequences:_,responseFormat:y,seed:C,providerMetadata:U}){var W,K,q,V;let J=t.type,re=[];l!=null&&re.push({type:"unsupported-setting",setting:"frequencyPenalty"}),v!=null&&re.push({type:"unsupported-setting",setting:"presencePenalty"}),C!=null&&re.push({type:"unsupported-setting",setting:"seed"}),y!=null&&y.type!=="text"&&re.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:_e,betas:Le}=oM({prompt:e,sendReasoning:(W=this.settings.sendReasoning)!=null?W:!0,warnings:re}),ge=fM.safeParse((K=U==null?void 0:U.anthropic)==null?void 0:K.thinking);if(!ge.success)throw new J0({argument:"providerOptions.anthropic.thinking",message:"invalid thinking options",cause:ge.error});let Ee=((q=ge.data)==null?void 0:q.type)==="enabled",Be=(V=ge.data)==null?void 0:V.budgetTokens,We={model:this.modelId,max_tokens:r,temperature:n,top_k:a,top_p:i,stop_sequences:_,...Ee&&{thinking:{type:"enabled",budget_tokens:Be}},system:_e.system,messages:_e.messages};if(Ee){if(Be==null)throw new an({functionality:"thinking requires a budget"});We.temperature!=null&&(We.temperature=void 0,re.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported when thinking is enabled"})),a!=null&&(We.top_k=void 0,re.push({type:"unsupported-setting",setting:"topK",details:"topK is not supported when thinking is enabled"})),i!=null&&(We.top_p=void 0,re.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported when thinking is enabled"})),We.max_tokens=r+Be}switch(J){case"regular":{let{tools:st,tool_choice:mt,toolWarnings:At,betas:Ur}=aM(t);return{args:{...We,tools:st,tool_choice:mt},warnings:[...re,...At],betas:new Set([...Le,...Ur])}}case"object-json":throw new an({functionality:"json-mode object generation"});case"object-tool":{let{name:st,description:mt,parameters:At}=t.tool;return{args:{...We,tools:[{name:st,description:mt,input_schema:At}],tool_choice:{type:"tool",name:st}},warnings:re,betas:Le}}default:{let st=J;throw new Error(`Unsupported type: ${st}`)}}}async getHeaders({betas:t,headers:e}){return Do(await Rg(this.config.headers),t.size>0?{"anthropic-beta":Array.from(t).join(",")}:{},e)}buildRequestUrl(t){var e,r,n;return(n=(r=(e=this.config).buildRequestUrl)==null?void 0:r.call(e,this.config.baseURL,t))!=null?n:`${this.config.baseURL}/messages`}transformRequestBody(t){var e,r,n;return(n=(r=(e=this.config).transformRequestBody)==null?void 0:r.call(e,t))!=null?n:t}async doGenerate(t){var e,r,n,i;let{args:a,warnings:l,betas:v}=await this.getArgs(t),{responseHeaders:_,value:y}=await lo({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:v,headers:t.headers}),body:this.transformRequestBody(a),failedResponseHandler:LN,successfulResponseHandler:tl(lM),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:C,...U}=a,W="";for(let V of y.content)V.type==="text"&&(W+=V.text);let K;if(y.content.some(V=>V.type==="tool_use")){K=[];for(let V of y.content)V.type==="tool_use"&&K.push({toolCallType:"function",toolCallId:V.id,toolName:V.name,args:JSON.stringify(V.input)})}let q=y.content.filter(V=>V.type==="redacted_thinking"||V.type==="thinking").map(V=>V.type==="thinking"?{type:"text",text:V.thinking,signature:V.signature}:{type:"redacted",data:V.data});return{text:W,reasoning:q.length>0?q:void 0,toolCalls:K,finishReason:FN(y.stop_reason),usage:{promptTokens:y.usage.input_tokens,completionTokens:y.usage.output_tokens},rawCall:{rawPrompt:C,rawSettings:U},rawResponse:{headers:_},response:{id:(e=y.id)!=null?e:void 0,modelId:(r=y.model)!=null?r:void 0},warnings:l,providerMetadata:{anthropic:{cacheCreationInputTokens:(n=y.usage.cache_creation_input_tokens)!=null?n:null,cacheReadInputTokens:(i=y.usage.cache_read_input_tokens)!=null?i:null}},request:{body:JSON.stringify(a)}}}async doStream(t){let{args:e,warnings:r,betas:n}=await this.getArgs(t),i={...e,stream:!0},{responseHeaders:a,value:l}=await lo({url:this.buildRequestUrl(!0),headers:await this.getHeaders({betas:n,headers:t.headers}),body:this.transformRequestBody(i),failedResponseHandler:LN,successfulResponseHandler:hv(cM),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:v,..._}=e,y="unknown",C={promptTokens:Number.NaN,completionTokens:Number.NaN},U={},W,K;return{stream:l.pipeThrough(new TransformStream({transform(q,V){var J,re,_e,Le;if(!q.success){V.enqueue({type:"error",error:q.error});return}let ge=q.value;switch(ge.type){case"ping":return;case"content_block_start":{let Ee=ge.content_block.type;switch(K=Ee,Ee){case"text":case"thinking":return;case"redacted_thinking":{V.enqueue({type:"redacted-reasoning",data:ge.content_block.data});return}case"tool_use":{U[ge.index]={toolCallId:ge.content_block.id,toolName:ge.content_block.name,jsonText:""};return}default:{let Be=Ee;throw new Error(`Unsupported content block type: ${Be}`)}}}case"content_block_stop":{if(U[ge.index]!=null){let Ee=U[ge.index];V.enqueue({type:"tool-call",toolCallType:"function",toolCallId:Ee.toolCallId,toolName:Ee.toolName,args:Ee.jsonText}),delete U[ge.index]}K=void 0;return}case"content_block_delta":{let Ee=ge.delta.type;switch(Ee){case"text_delta":{V.enqueue({type:"text-delta",textDelta:ge.delta.text});return}case"thinking_delta":{V.enqueue({type:"reasoning",textDelta:ge.delta.thinking});return}case"signature_delta":{K==="thinking"&&V.enqueue({type:"reasoning-signature",signature:ge.delta.signature});return}case"input_json_delta":{let Be=U[ge.index];V.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Be.toolCallId,toolName:Be.toolName,argsTextDelta:ge.delta.partial_json}),Be.jsonText+=ge.delta.partial_json;return}default:{let Be=Ee;throw new Error(`Unsupported delta type: ${Be}`)}}}case"message_start":{C.promptTokens=ge.message.usage.input_tokens,C.completionTokens=ge.message.usage.output_tokens,W={anthropic:{cacheCreationInputTokens:(J=ge.message.usage.cache_creation_input_tokens)!=null?J:null,cacheReadInputTokens:(re=ge.message.usage.cache_read_input_tokens)!=null?re:null}},V.enqueue({type:"response-metadata",id:(_e=ge.message.id)!=null?_e:void 0,modelId:(Le=ge.message.model)!=null?Le:void 0});return}case"message_delta":{C.completionTokens=ge.usage.output_tokens,y=FN(ge.delta.stop_reason);return}case"message_stop":{V.enqueue({type:"finish",finishReason:y,usage:C,providerMetadata:W});return}case"error":{V.enqueue({type:"error",error:ge.error});return}default:{let Ee=ge;throw new Error(`Unsupported chunk type: ${Ee}`)}}}})),rawCall:{rawPrompt:v,rawSettings:_},rawResponse:{headers:a},warnings:r,request:{body:JSON.stringify(i)}}}},lM=T.object({type:T.literal("message"),id:T.string().nullish(),model:T.string().nullish(),content:T.array(T.discriminatedUnion("type",[T.object({type:T.literal("text"),text:T.string()}),T.object({type:T.literal("thinking"),thinking:T.string(),signature:T.string()}),T.object({type:T.literal("redacted_thinking"),data:T.string()}),T.object({type:T.literal("tool_use"),id:T.string(),name:T.string(),input:T.unknown()})])),stop_reason:T.string().nullish(),usage:T.object({input_tokens:T.number(),output_tokens:T.number(),cache_creation_input_tokens:T.number().nullish(),cache_read_input_tokens:T.number().nullish()})}),cM=T.discriminatedUnion("type",[T.object({type:T.literal("message_start"),message:T.object({id:T.string().nullish(),model:T.string().nullish(),usage:T.object({input_tokens:T.number(),output_tokens:T.number(),cache_creation_input_tokens:T.number().nullish(),cache_read_input_tokens:T.number().nullish()})})}),T.object({type:T.literal("content_block_start"),index:T.number(),content_block:T.discriminatedUnion("type",[T.object({type:T.literal("text"),text:T.string()}),T.object({type:T.literal("thinking"),thinking:T.string()}),T.object({type:T.literal("tool_use"),id:T.string(),name:T.string()}),T.object({type:T.literal("redacted_thinking"),data:T.string()})])}),T.object({type:T.literal("content_block_delta"),index:T.number(),delta:T.discriminatedUnion("type",[T.object({type:T.literal("input_json_delta"),partial_json:T.string()}),T.object({type:T.literal("text_delta"),text:T.string()}),T.object({type:T.literal("thinking_delta"),thinking:T.string()}),T.object({type:T.literal("signature_delta"),signature:T.string()})])}),T.object({type:T.literal("content_block_stop"),index:T.number()}),T.object({type:T.literal("error"),error:T.object({type:T.string(),message:T.string()})}),T.object({type:T.literal("message_delta"),delta:T.object({stop_reason:T.string().nullish()}),usage:T.object({output_tokens:T.number()})}),T.object({type:T.literal("message_stop")}),T.object({type:T.literal("ping")})]),fM=T.object({type:T.union([T.literal("enabled"),T.literal("disabled")]),budgetTokens:T.number().optional()}).optional(),dM=T.object({command:T.string(),restart:T.boolean().optional()});function pM(t={}){return{type:"provider-defined",id:"anthropic.bash_20241022",args:{},parameters:dM,execute:t.execute,experimental_toToolResultContent:t.experimental_toToolResultContent}}var mM=T.object({command:T.string(),restart:T.boolean().optional()});function vM(t={}){return{type:"provider-defined",id:"anthropic.bash_20250124",args:{},parameters:mM,execute:t.execute,experimental_toToolResultContent:t.experimental_toToolResultContent}}var hM=T.object({command:T.enum(["view","create","str_replace","insert","undo_edit"]),path:T.string(),file_text:T.string().optional(),insert_line:T.number().int().optional(),new_str:T.string().optional(),old_str:T.string().optional(),view_range:T.array(T.number().int()).optional()});function gM(t={}){return{type:"provider-defined",id:"anthropic.text_editor_20241022",args:{},parameters:hM,execute:t.execute,experimental_toToolResultContent:t.experimental_toToolResultContent}}var _M=T.object({command:T.enum(["view","create","str_replace","insert","undo_edit"]),path:T.string(),file_text:T.string().optional(),insert_line:T.number().int().optional(),new_str:T.string().optional(),old_str:T.string().optional(),view_range:T.array(T.number().int()).optional()});function yM(t={}){return{type:"provider-defined",id:"anthropic.text_editor_20250124",args:{},parameters:_M,execute:t.execute,experimental_toToolResultContent:t.experimental_toToolResultContent}}var bM=T.object({action:T.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:T.array(T.number().int()).optional(),text:T.string().optional()});function wM(t){return{type:"provider-defined",id:"anthropic.computer_20241022",args:{displayWidthPx:t.displayWidthPx,displayHeightPx:t.displayHeightPx,displayNumber:t.displayNumber},parameters:bM,execute:t.execute,experimental_toToolResultContent:t.experimental_toToolResultContent}}var SM=T.object({action:T.enum(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot"]),coordinate:T.tuple([T.number().int(),T.number().int()]).optional(),duration:T.number().optional(),scroll_amount:T.number().optional(),scroll_direction:T.enum(["up","down","left","right"]).optional(),start_coordinate:T.tuple([T.number().int(),T.number().int()]).optional(),text:T.string().optional()});function EM(t){return{type:"provider-defined",id:"anthropic.computer_20250124",args:{displayWidthPx:t.displayWidthPx,displayHeightPx:t.displayHeightPx,displayNumber:t.displayNumber},parameters:SM,execute:t.execute,experimental_toToolResultContent:t.experimental_toToolResultContent}}var TM={bash_20241022:pM,bash_20250124:vM,textEditor_20241022:gM,textEditor_20250124:yM,computer_20241022:wM,computer_20250124:EM};function iS(t={}){var e;let r=(e=Xh(t.baseURL))!=null?e:"https://api.anthropic.com/v1",n=()=>({"anthropic-version":"2023-06-01","x-api-key":Jh({apiKey:t.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...t.headers}),i=(l,v={})=>new uM(l,v,{provider:"anthropic.messages",baseURL:r,headers:n,fetch:t.fetch}),a=function(l,v){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return i(l,v)};return a.languageModel=i,a.chat=i,a.messages=i,a.textEmbeddingModel=l=>{throw new fy({modelId:l,modelType:"textEmbeddingModel"})},a.tools=TM,a}var kB=iS();function yy(t){var e,r;return(r=(e=t==null?void 0:t.providerMetadata)==null?void 0:e.openaiCompatible)!=null?r:{}}function IM(t){let e=[];for(let{role:r,content:n,...i}of t){let a=yy({...i});switch(r){case"system":{e.push({role:"system",content:n,...a});break}case"user":{if(n.length===1&&n[0].type==="text"){e.push({role:"user",content:n[0].text,...yy(n[0])});break}e.push({role:"user",content:n.map(l=>{var v;let _=yy(l);switch(l.type){case"text":return{type:"text",text:l.text,..._};case"image":return{type:"image_url",image_url:{url:l.image instanceof URL?l.image.toString():`data:${(v=l.mimeType)!=null?v:"image/jpeg"};base64,${_m(l.image)}`},..._};case"file":throw new an({functionality:"File content parts in user messages"})}}),...a});break}case"assistant":{let l="",v=[];for(let _ of n){let y=yy(_);switch(_.type){case"text":{l+=_.text;break}case"redacted-reasoning":case"reasoning":break;case"tool-call":{v.push({id:_.toolCallId,type:"function",function:{name:_.toolName,arguments:JSON.stringify(_.args)},...y});break}default:{let C=_;throw new Error(`Unsupported part: ${C}`)}}}e.push({role:"assistant",content:l,tool_calls:v.length>0?v:void 0,...a});break}case"tool":{for(let l of n){let v=yy(l);e.push({role:"tool",tool_call_id:l.toolCallId,content:JSON.stringify(l.result),...v})}break}default:{let l=r;throw new Error(`Unsupported role: ${l}`)}}}return e}function UN({id:t,model:e,created:r}){return{id:t??void 0,modelId:e??void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function jN(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var NM=T.object({error:T.object({message:T.string(),type:T.string().nullish(),param:T.any().nullish(),code:T.union([T.string(),T.number()]).nullish()})}),CM={errorSchema:NM,errorToMessage:t=>t.error.message};function xM({mode:t,structuredOutputs:e}){var r;let n=(r=t.tools)!=null&&r.length?t.tools:void 0,i=[];if(n==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};let a=t.toolChoice,l=[];for(let _ of n)_.type==="provider-defined"?i.push({type:"unsupported-tool",tool:_}):l.push({type:"function",function:{name:_.name,description:_.description,parameters:_.parameters}});if(a==null)return{tools:l,tool_choice:void 0,toolWarnings:i};let v=a.type;switch(v){case"auto":case"none":case"required":return{tools:l,tool_choice:v,toolWarnings:i};case"tool":return{tools:l,tool_choice:{type:"function",function:{name:a.toolName}},toolWarnings:i};default:{let _=v;throw new an({functionality:`Unsupported tool choice type: ${_}`})}}}var YN=class{constructor(t,e,r){this.specificationVersion="v1";var n,i;this.modelId=t,this.settings=e,this.config=r;let a=(n=r.errorStructure)!=null?n:CM;this.chunkSchema=RM(a.errorSchema),this.failedResponseHandler=Zh(a),this.supportsStructuredOutputs=(i=r.supportsStructuredOutputs)!=null?i:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:t,prompt:e,maxTokens:r,temperature:n,topP:i,topK:a,frequencyPenalty:l,presencePenalty:v,providerMetadata:_,stopSequences:y,responseFormat:C,seed:U}){var W,K;let q=t.type,V=[];a!=null&&V.push({type:"unsupported-setting",setting:"topK"}),(C==null?void 0:C.type)==="json"&&C.schema!=null&&!this.supportsStructuredOutputs&&V.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let J={model:this.modelId,user:this.settings.user,max_tokens:r,temperature:n,top_p:i,frequency_penalty:l,presence_penalty:v,response_format:(C==null?void 0:C.type)==="json"?this.supportsStructuredOutputs===!0&&C.schema!=null?{type:"json_schema",json_schema:{schema:C.schema,name:(W=C.name)!=null?W:"response",description:C.description}}:{type:"json_object"}:void 0,stop:y,seed:U,..._==null?void 0:_[this.providerOptionsName],messages:IM(e)};switch(q){case"regular":{let{tools:re,tool_choice:_e,toolWarnings:Le}=xM({mode:t,structuredOutputs:this.supportsStructuredOutputs});return{args:{...J,tools:re,tool_choice:_e},warnings:[...V,...Le]}}case"object-json":return{args:{...J,response_format:this.supportsStructuredOutputs===!0&&t.schema!=null?{type:"json_schema",json_schema:{schema:t.schema,name:(K=t.name)!=null?K:"response",description:t.description}}:{type:"json_object"}},warnings:V};case"object-tool":return{args:{...J,tool_choice:{type:"function",function:{name:t.tool.name}},tools:[{type:"function",function:{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters}}]},warnings:V};default:{let re=q;throw new Error(`Unsupported type: ${re}`)}}}async doGenerate(t){var e,r,n,i,a,l,v,_,y;let{args:C,warnings:U}=this.getArgs({...t}),W=JSON.stringify(C),{responseHeaders:K,value:q,rawValue:V}=await lo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Do(this.config.headers(),t.headers),body:C,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:tl(DM),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:J,...re}=C,_e=q.choices[0],Le=(r=(e=this.config.metadataExtractor)==null?void 0:e.extractMetadata)==null?void 0:r.call(e,{parsedBody:V});return{text:(n=_e.message.content)!=null?n:void 0,reasoning:(i=_e.message.reasoning_content)!=null?i:void 0,toolCalls:(a=_e.message.tool_calls)==null?void 0:a.map(ge=>{var Ee;return{toolCallType:"function",toolCallId:(Ee=ge.id)!=null?Ee:Xl(),toolName:ge.function.name,args:ge.function.arguments}}),finishReason:jN(_e.finish_reason),usage:{promptTokens:(v=(l=q.usage)==null?void 0:l.prompt_tokens)!=null?v:NaN,completionTokens:(y=(_=q.usage)==null?void 0:_.completion_tokens)!=null?y:NaN},...Le&&{providerMetadata:Le},rawCall:{rawPrompt:J,rawSettings:re},rawResponse:{headers:K},response:UN(q),warnings:U,request:{body:W}}}async doStream(t){var e;if(this.settings.simulateStreaming){let q=await this.doGenerate(t);return{stream:new ReadableStream({start(J){if(J.enqueue({type:"response-metadata",...q.response}),q.reasoning)if(Array.isArray(q.reasoning))for(let re of q.reasoning)re.type==="text"&&J.enqueue({type:"reasoning",textDelta:re.text});else J.enqueue({type:"reasoning",textDelta:q.reasoning});if(q.text&&J.enqueue({type:"text-delta",textDelta:q.text}),q.toolCalls)for(let re of q.toolCalls)J.enqueue({type:"tool-call",...re});J.enqueue({type:"finish",finishReason:q.finishReason,usage:q.usage,logprobs:q.logprobs,providerMetadata:q.providerMetadata}),J.close()}}),rawCall:q.rawCall,rawResponse:q.rawResponse,warnings:q.warnings}}let{args:r,warnings:n}=this.getArgs({...t}),i=JSON.stringify({...r,stream:!0}),a=(e=this.config.metadataExtractor)==null?void 0:e.createStreamExtractor(),{responseHeaders:l,value:v}=await lo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Do(this.config.headers(),t.headers),body:{...r,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:hv(this.chunkSchema),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:_,...y}=r,C=[],U="unknown",W={promptTokens:void 0,completionTokens:void 0},K=!0;return{stream:v.pipeThrough(new TransformStream({transform(q,V){var J,re,_e,Le,ge,Ee,Be,We,st,mt,At,Ur,on,kn;if(!q.success){U="error",V.enqueue({type:"error",error:q.error});return}let ct=q.value;if(a==null||a.processChunk(q.rawValue),"error"in ct){U="error",V.enqueue({type:"error",error:ct.error.message});return}K&&(K=!1,V.enqueue({type:"response-metadata",...UN(ct)})),ct.usage!=null&&(W={promptTokens:(J=ct.usage.prompt_tokens)!=null?J:void 0,completionTokens:(re=ct.usage.completion_tokens)!=null?re:void 0});let Dr=ct.choices[0];if((Dr==null?void 0:Dr.finish_reason)!=null&&(U=jN(Dr.finish_reason)),(Dr==null?void 0:Dr.delta)==null)return;let Ke=Dr.delta;if(Ke.reasoning_content!=null&&V.enqueue({type:"reasoning",textDelta:Ke.reasoning_content}),Ke.content!=null&&V.enqueue({type:"text-delta",textDelta:Ke.content}),Ke.tool_calls!=null)for(let _n of Ke.tool_calls){let Pe=_n.index;if(C[Pe]==null){if(_n.type!=="function")throw new lh({data:_n,message:"Expected 'function' type."});if(_n.id==null)throw new lh({data:_n,message:"Expected 'id' to be a string."});if(((_e=_n.function)==null?void 0:_e.name)==null)throw new lh({data:_n,message:"Expected 'function.name' to be a string."});C[Pe]={id:_n.id,type:"function",function:{name:_n.function.name,arguments:(Le=_n.function.arguments)!=null?Le:""},hasFinished:!1};let Vt=C[Pe];((ge=Vt.function)==null?void 0:ge.name)!=null&&((Ee=Vt.function)==null?void 0:Ee.arguments)!=null&&(Vt.function.arguments.length>0&&V.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Vt.id,toolName:Vt.function.name,argsTextDelta:Vt.function.arguments}),S_(Vt.function.arguments)&&(V.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Be=Vt.id)!=null?Be:Xl(),toolName:Vt.function.name,args:Vt.function.arguments}),Vt.hasFinished=!0));continue}let $t=C[Pe];$t.hasFinished||(((We=_n.function)==null?void 0:We.arguments)!=null&&($t.function.arguments+=(mt=(st=_n.function)==null?void 0:st.arguments)!=null?mt:""),V.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:$t.id,toolName:$t.function.name,argsTextDelta:(At=_n.function.arguments)!=null?At:""}),((Ur=$t.function)==null?void 0:Ur.name)!=null&&((on=$t.function)==null?void 0:on.arguments)!=null&&S_($t.function.arguments)&&(V.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(kn=$t.id)!=null?kn:Xl(),toolName:$t.function.name,args:$t.function.arguments}),$t.hasFinished=!0))}},flush(q){var V,J;let re=a==null?void 0:a.buildMetadata();q.enqueue({type:"finish",finishReason:U,usage:{promptTokens:(V=W.promptTokens)!=null?V:NaN,completionTokens:(J=W.completionTokens)!=null?J:NaN},...re&&{providerMetadata:re}})}})),rawCall:{rawPrompt:_,rawSettings:y},rawResponse:{headers:l},warnings:n,request:{body:i}}}},DM=T.object({id:T.string().nullish(),created:T.number().nullish(),model:T.string().nullish(),choices:T.array(T.object({message:T.object({role:T.literal("assistant").nullish(),content:T.string().nullish(),reasoning_content:T.string().nullish(),tool_calls:T.array(T.object({id:T.string().nullish(),type:T.literal("function"),function:T.object({name:T.string(),arguments:T.string()})})).nullish()}),finish_reason:T.string().nullish()})),usage:T.object({prompt_tokens:T.number().nullish(),completion_tokens:T.number().nullish()}).nullish()}),RM=t=>T.union([T.object({id:T.string().nullish(),created:T.number().nullish(),model:T.string().nullish(),choices:T.array(T.object({delta:T.object({role:T.enum(["assistant"]).nullish(),content:T.string().nullish(),reasoning_content:T.string().nullish(),tool_calls:T.array(T.object({index:T.number(),id:T.string().nullish(),type:T.literal("function").optional(),function:T.object({name:T.string().nullish(),arguments:T.string().nullish()})})).nullish()}).nullish(),finish_reason:T.string().nullish()})),usage:T.object({prompt_tokens:T.number().nullish(),completion_tokens:T.number().nullish()}).nullish()}),t]);var qB=T.object({id:T.string().nullish(),created:T.number().nullish(),model:T.string().nullish(),choices:T.array(T.object({text:T.string(),finish_reason:T.string()})),usage:T.object({prompt_tokens:T.number(),completion_tokens:T.number()}).nullish()});var GB=T.object({data:T.array(T.object({embedding:T.array(T.number())})),usage:T.object({prompt_tokens:T.number()}).nullish()});var $N=t=>{var e,r;return t==null?void 0:{deepseek:{promptCacheHitTokens:(e=t.prompt_cache_hit_tokens)!=null?e:NaN,promptCacheMissTokens:(r=t.prompt_cache_miss_tokens)!=null?r:NaN}}},OM={extractMetadata:({parsedBody:t})=>{let e=gm({value:t,schema:kM});return!e.success||e.value.usage==null?void 0:$N(e.value.usage)},createStreamExtractor:()=>{let t;return{processChunk:e=>{var r,n;let i=gm({value:e,schema:AM});i.success&&((n=(r=i.value.choices)==null?void 0:r[0])==null?void 0:n.finish_reason)==="stop"&&i.value.usage&&(t=i.value.usage)},buildMetadata:()=>$N(t)}}},BN=T.object({prompt_cache_hit_tokens:T.number().nullish(),prompt_cache_miss_tokens:T.number().nullish()}),kM=T.object({usage:BN.nullish()}),AM=T.object({choices:T.array(T.object({finish_reason:T.string().nullish()})).nullish(),usage:BN.nullish()});function aS(t={}){var e;let r=Xh((e=t.baseURL)!=null?e:"https://api.deepseek.com/v1"),n=()=>({Authorization:`Bearer ${Jh({apiKey:t.apiKey,environmentVariableName:"DEEPSEEK_API_KEY",description:"DeepSeek API key"})}`,...t.headers}),i=(l,v={})=>new YN(l,v,{provider:"deepseek.chat",url:({path:_})=>`${r}${_}`,headers:n,fetch:t.fetch,defaultObjectGenerationMode:"json",metadataExtractor:OM}),a=(l,v)=>i(l,v);return a.languageModel=i,a.chat=i,a.textEmbeddingModel=l=>{throw new fy({modelId:l,modelType:"textEmbeddingModel"})},a}var QB=aS();function fp(t){if(PM(t))return;if(typeof t=="boolean")return{type:"boolean",properties:{}};let{type:e,description:r,required:n,properties:i,items:a,allOf:l,anyOf:v,oneOf:_,format:y,const:C,minLength:U,enum:W}=t,K={};if(r&&(K.description=r),n&&(K.required=n),y&&(K.format=y),C!==void 0&&(K.enum=[C]),e&&(Array.isArray(e)?e.includes("null")?(K.type=e.filter(q=>q!=="null")[0],K.nullable=!0):K.type=e:e==="null"?K.type="null":K.type=e),W!==void 0&&(K.enum=W),i!=null&&(K.properties=Object.entries(i).reduce((q,[V,J])=>(q[V]=fp(J),q),{})),a&&(K.items=Array.isArray(a)?a.map(fp):fp(a)),l&&(K.allOf=l.map(fp)),v)if(v.some(q=>typeof q=="object"&&(q==null?void 0:q.type)==="null")){let q=v.filter(V=>!(typeof V=="object"&&(V==null?void 0:V.type)==="null"));if(q.length===1){let V=fp(q[0]);typeof V=="object"&&(K.nullable=!0,Object.assign(K,V))}else K.anyOf=q.map(fp),K.nullable=!0}else K.anyOf=v.map(fp);return _&&(K.oneOf=_.map(fp)),U!==void 0&&(K.minLength=U),K}function PM(t){return t!=null&&typeof t=="object"&&t.type==="object"&&(t.properties==null||Object.keys(t.properties).length===0)}function MM(t){var e,r;let n=[],i=[],a=!0;for(let{role:l,content:v}of t)switch(l){case"system":{if(!a)throw new an({functionality:"system messages are only supported at the beginning of the conversation"});n.push({text:v});break}case"user":{a=!1;let _=[];for(let y of v)switch(y.type){case"text":{_.push({text:y.text});break}case"image":{_.push(y.image instanceof URL?{fileData:{mimeType:(e=y.mimeType)!=null?e:"image/jpeg",fileUri:y.image.toString()}}:{inlineData:{mimeType:(r=y.mimeType)!=null?r:"image/jpeg",data:_m(y.image)}});break}case"file":{_.push(y.data instanceof URL?{fileData:{mimeType:y.mimeType,fileUri:y.data.toString()}}:{inlineData:{mimeType:y.mimeType,data:y.data}});break}default:{let C=y;throw new an({functionality:`prompt part: ${C}`})}}i.push({role:"user",parts:_});break}case"assistant":{a=!1,i.push({role:"model",parts:v.map(_=>{switch(_.type){case"text":return _.text.length===0?void 0:{text:_.text};case"tool-call":return{functionCall:{name:_.toolName,args:_.args}}}}).filter(_=>_!==void 0)});break}case"tool":{a=!1,i.push({role:"user",parts:v.map(_=>({functionResponse:{name:_.toolName,response:{name:_.toolName,content:_.result}}}))});break}default:{let _=l;throw new Error(`Unsupported role: ${_}`)}}return{systemInstruction:n.length>0?{parts:n}:void 0,contents:i}}function qN(t){return t.includes("/")?t:`models/${t}`}var LM=T.object({error:T.object({code:T.number().nullable(),message:T.string(),status:T.string()})}),oS=Zh({errorSchema:LM,errorToMessage:t=>t.error.message});function FM(t,e,r){var n,i;let a=(n=t.tools)!=null&&n.length?t.tools:void 0,l=[];if(e)return{tools:r?{googleSearch:{}}:{googleSearchRetrieval:{}},toolConfig:void 0,toolWarnings:l};if(a==null)return{tools:void 0,toolConfig:void 0,toolWarnings:l};let v=[];for(let C of a)C.type==="provider-defined"?l.push({type:"unsupported-tool",tool:C}):v.push({name:C.name,description:(i=C.description)!=null?i:"",parameters:fp(C.parameters)});let _=t.toolChoice;if(_==null)return{tools:{functionDeclarations:v},toolConfig:void 0,toolWarnings:l};let y=_.type;switch(y){case"auto":return{tools:{functionDeclarations:v},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:l};case"none":return{tools:{functionDeclarations:v},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:l};case"required":return{tools:{functionDeclarations:v},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:l};case"tool":return{tools:{functionDeclarations:v},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[_.toolName]}},toolWarnings:l};default:{let C=y;throw new an({functionality:`Unsupported tool choice type: ${C}`})}}}function HN({finishReason:t,hasToolCalls:e}){switch(t){case"STOP":return e?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"RECITATION":case"SAFETY":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";default:return"unknown"}}var UM=class{constructor(t,e,r){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=t,this.settings=e,this.config=r}get supportsStructuredOutputs(){var t;return(t=this.settings.structuredOutputs)!=null?t:!0}get provider(){return this.config.provider}async getArgs({mode:t,prompt:e,maxTokens:r,temperature:n,topP:i,topK:a,frequencyPenalty:l,presencePenalty:v,stopSequences:_,responseFormat:y,seed:C}){var U,W;let K=t.type,q=[],V={maxOutputTokens:r,temperature:n,topK:a,topP:i,frequencyPenalty:l,presencePenalty:v,stopSequences:_,seed:C,responseMimeType:(y==null?void 0:y.type)==="json"?"application/json":void 0,responseSchema:(y==null?void 0:y.type)==="json"&&y.schema!=null&&this.supportsStructuredOutputs?fp(y.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp}},{contents:J,systemInstruction:re}=MM(e);switch(K){case"regular":{let{tools:_e,toolConfig:Le,toolWarnings:ge}=FM(t,(U=this.settings.useSearchGrounding)!=null?U:!1,this.modelId.includes("gemini-2"));return{args:{generationConfig:V,contents:J,systemInstruction:re,safetySettings:this.settings.safetySettings,tools:_e,toolConfig:Le,cachedContent:this.settings.cachedContent},warnings:[...q,...ge]}}case"object-json":return{args:{generationConfig:{...V,responseMimeType:"application/json",responseSchema:t.schema!=null&&this.supportsStructuredOutputs?fp(t.schema):void 0},contents:J,systemInstruction:re,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:q};case"object-tool":return{args:{generationConfig:V,contents:J,tools:{functionDeclarations:[{name:t.tool.name,description:(W=t.tool.description)!=null?W:"",parameters:fp(t.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:q};default:{let _e=K;throw new Error(`Unsupported type: ${_e}`)}}}supportsUrl(t){return this.config.isSupportedUrl(t)}async doGenerate(t){var e,r,n,i,a,l,v,_;let{args:y,warnings:C}=await this.getArgs(t),U=JSON.stringify(y),W=Do(await Rg(this.config.headers),t.headers),{responseHeaders:K,value:q}=await lo({url:`${this.config.baseURL}/${qN(this.modelId)}:generateContent`,headers:W,body:y,failedResponseHandler:oS,successfulResponseHandler:tl(YM),abortSignal:t.abortSignal,fetch:this.config.fetch}),{contents:V,...J}=y,re=q.candidates[0],_e=GN({parts:(r=(e=re.content)==null?void 0:e.parts)!=null?r:[],generateId:this.config.generateId}),Le=q.usageMetadata;return{text:VN((i=(n=re.content)==null?void 0:n.parts)!=null?i:[]),toolCalls:_e,finishReason:HN({finishReason:re.finishReason,hasToolCalls:_e!=null&&_e.length>0}),usage:{promptTokens:(a=Le==null?void 0:Le.promptTokenCount)!=null?a:NaN,completionTokens:(l=Le==null?void 0:Le.candidatesTokenCount)!=null?l:NaN},rawCall:{rawPrompt:V,rawSettings:J},rawResponse:{headers:K},warnings:C,providerMetadata:{google:{groundingMetadata:(v=re.groundingMetadata)!=null?v:null,safetyRatings:(_=re.safetyRatings)!=null?_:null}},sources:zN({groundingMetadata:re.groundingMetadata,generateId:this.config.generateId}),request:{body:U}}}async doStream(t){let{args:e,warnings:r}=await this.getArgs(t),n=JSON.stringify(e),i=Do(await Rg(this.config.headers),t.headers),{responseHeaders:a,value:l}=await lo({url:`${this.config.baseURL}/${qN(this.modelId)}:streamGenerateContent?alt=sse`,headers:i,body:e,failedResponseHandler:oS,successfulResponseHandler:hv($M),abortSignal:t.abortSignal,fetch:this.config.fetch}),{contents:v,..._}=e,y="unknown",C={promptTokens:Number.NaN,completionTokens:Number.NaN},U,W=this.config.generateId,K=!1;return{stream:l.pipeThrough(new TransformStream({transform(q,V){var J,re,_e,Le,ge,Ee;if(!q.success){V.enqueue({type:"error",error:q.error});return}let Be=q.value,We=Be.usageMetadata;We!=null&&(C={promptTokens:(J=We.promptTokenCount)!=null?J:NaN,completionTokens:(re=We.candidatesTokenCount)!=null?re:NaN});let st=(_e=Be.candidates)==null?void 0:_e[0];if(st==null)return;if(st.finishReason!=null){y=HN({finishReason:st.finishReason,hasToolCalls:K});let on=(Le=zN({groundingMetadata:st.groundingMetadata,generateId:W}))!=null?Le:[];for(let kn of on)V.enqueue({type:"source",source:kn});U={google:{groundingMetadata:(ge=st.groundingMetadata)!=null?ge:null,safetyRatings:(Ee=st.safetyRatings)!=null?Ee:null}}}let mt=st.content;if(mt==null)return;let At=VN(mt.parts);At!=null&&V.enqueue({type:"text-delta",textDelta:At});let Ur=GN({parts:mt.parts,generateId:W});if(Ur!=null)for(let on of Ur)V.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:on.toolCallId,toolName:on.toolName,argsTextDelta:on.args}),V.enqueue({type:"tool-call",toolCallType:"function",toolCallId:on.toolCallId,toolName:on.toolName,args:on.args}),K=!0},flush(q){q.enqueue({type:"finish",finishReason:y,usage:C,providerMetadata:U})}})),rawCall:{rawPrompt:v,rawSettings:_},rawResponse:{headers:a},warnings:r,request:{body:n}}}};function GN({parts:t,generateId:e}){let r=t==null?void 0:t.filter(n=>"functionCall"in n);return r==null||r.length===0?void 0:r.map(n=>({toolCallType:"function",toolCallId:e(),toolName:n.functionCall.name,args:JSON.stringify(n.functionCall.args)}))}function VN(t){let e=t==null?void 0:t.filter(r=>"text"in r);return e==null||e.length===0?void 0:e.map(r=>r.text).join("")}var WN=T.object({role:T.string(),parts:T.array(T.union([T.object({text:T.string()}),T.object({functionCall:T.object({name:T.string(),args:T.unknown()})})])).nullish()}),jM=T.object({web:T.object({uri:T.string(),title:T.string()}).nullish(),retrievedContext:T.object({uri:T.string(),title:T.string()}).nullish()}),KN=T.object({webSearchQueries:T.array(T.string()).nullish(),retrievalQueries:T.array(T.string()).nullish(),searchEntryPoint:T.object({renderedContent:T.string()}).nullish(),groundingChunks:T.array(jM).nullish(),groundingSupports:T.array(T.object({segment:T.object({startIndex:T.number().nullish(),endIndex:T.number().nullish(),text:T.string().nullish()}),segment_text:T.string().nullish(),groundingChunkIndices:T.array(T.number()).nullish(),supportChunkIndices:T.array(T.number()).nullish(),confidenceScores:T.array(T.number()).nullish(),confidenceScore:T.array(T.number()).nullish()})).nullish(),retrievalMetadata:T.union([T.object({webDynamicRetrievalScore:T.number()}),T.object({})]).nullish()}),JN=T.object({category:T.string(),probability:T.string(),probabilityScore:T.number().nullish(),severity:T.string().nullish(),severityScore:T.number().nullish(),blocked:T.boolean().nullish()}),YM=T.object({candidates:T.array(T.object({content:WN.nullish(),finishReason:T.string().nullish(),safetyRatings:T.array(JN).nullish(),groundingMetadata:KN.nullish()})),usageMetadata:T.object({promptTokenCount:T.number().nullish(),candidatesTokenCount:T.number().nullish(),totalTokenCount:T.number().nullish()}).nullish()}),$M=T.object({candidates:T.array(T.object({content:WN.nullish(),finishReason:T.string().nullish(),safetyRatings:T.array(JN).nullish(),groundingMetadata:KN.nullish()})).nullish(),usageMetadata:T.object({promptTokenCount:T.number().nullish(),candidatesTokenCount:T.number().nullish(),totalTokenCount:T.number().nullish()}).nullish()});function zN({groundingMetadata:t,generateId:e}){var r;return(r=t==null?void 0:t.groundingChunks)==null?void 0:r.filter(n=>n.web!=null).map(n=>({sourceType:"url",id:e(),url:n.web.uri,title:n.web.title}))}var BM=class{constructor(t,e,r){this.specificationVersion="v1",this.modelId=t,this.settings=e,this.config=r}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:t,headers:e,abortSignal:r}){if(t.length>this.maxEmbeddingsPerCall)throw new Z0({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});let n=Do(await Rg(this.config.headers),e),{responseHeaders:i,value:a}=await lo({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:n,body:{requests:t.map(l=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:l}]},outputDimensionality:this.settings.outputDimensionality}))},failedResponseHandler:oS,successfulResponseHandler:tl(qM),abortSignal:r,fetch:this.config.fetch});return{embeddings:a.embeddings.map(l=>l.values),usage:void 0,rawResponse:{headers:i}}}},qM=T.object({embeddings:T.array(T.object({values:T.array(T.number())}))});function HM(t){return t.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function sS(t={}){var e;let r=(e=Xh(t.baseURL))!=null?e:"https://generativelanguage.googleapis.com/v1beta",n=()=>({"x-goog-api-key":Jh({apiKey:t.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...t.headers}),i=(v,_={})=>{var y;return new UM(v,_,{provider:"google.generative-ai",baseURL:r,headers:n,generateId:(y=t.generateId)!=null?y:Xl,isSupportedUrl:HM,fetch:t.fetch})},a=(v,_={})=>new BM(v,_,{provider:"google.generative-ai",baseURL:r,headers:n,fetch:t.fetch}),l=function(v,_){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return i(v,_)};return l.languageModel=i,l.chat=i,l.generativeAI=i,l.embedding=a,l.textEmbedding=a,l.textEmbeddingModel=a,l}var dq=sS();function GM({prompt:t,useLegacyFunctionCalling:e=!1,systemMessageMode:r="system"}){let n=[];for(let{role:i,content:a}of t)switch(i){case"system":{switch(r){case"system":{n.push({role:"system",content:a});break}case"developer":{n.push({role:"developer",content:a});break}case"remove":break;default:{let l=r;throw new Error(`Unsupported system message mode: ${l}`)}}break}case"user":{if(a.length===1&&a[0].type==="text"){n.push({role:"user",content:a[0].text});break}n.push({role:"user",content:a.map(l=>{var v,_,y;switch(l.type){case"text":return{type:"text",text:l.text};case"image":return{type:"image_url",image_url:{url:l.image instanceof URL?l.image.toString():`data:${(v=l.mimeType)!=null?v:"image/jpeg"};base64,${_m(l.image)}`,detail:(y=(_=l.providerMetadata)==null?void 0:_.openai)==null?void 0:y.imageDetail}};case"file":{if(l.data instanceof URL)throw new an({functionality:"'File content parts with URL data' functionality not supported."});switch(l.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:l.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:l.data,format:"mp3"}};default:throw new an({functionality:`File content part type ${l.mimeType} in user messages`})}}}})});break}case"assistant":{let l="",v=[];for(let _ of a)switch(_.type){case"text":{l+=_.text;break}case"redacted-reasoning":case"reasoning":break;case"tool-call":{v.push({id:_.toolCallId,type:"function",function:{name:_.toolName,arguments:JSON.stringify(_.args)}});break}default:{let y=_;throw new Error(`Unsupported part: ${y}`)}}if(e){if(v.length>1)throw new an({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});n.push({role:"assistant",content:l,function_call:v.length>0?v[0].function:void 0})}else n.push({role:"assistant",content:l,tool_calls:v.length>0?v:void 0});break}case"tool":{for(let l of a)e?n.push({role:"function",name:l.toolName,content:JSON.stringify(l.result)}):n.push({role:"tool",tool_call_id:l.toolCallId,content:JSON.stringify(l.result)});break}default:{let l=i;throw new Error(`Unsupported role: ${l}`)}}return n}function ZN(t){var e,r;return(r=(e=t==null?void 0:t.content)==null?void 0:e.map(({token:n,logprob:i,top_logprobs:a})=>({token:n,logprob:i,topLogprobs:a?a.map(({token:l,logprob:v})=>({token:l,logprob:v})):[]})))!=null?r:void 0}function lb(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var lS=T.object({error:T.object({message:T.string(),type:T.string().nullish(),param:T.any().nullish(),code:T.union([T.string(),T.number()]).nullish()})}),O_=Zh({errorSchema:lS,errorToMessage:t=>t.error.message});function cb({id:t,model:e,created:r}){return{id:t??void 0,modelId:e??void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function VM({mode:t,useLegacyFunctionCalling:e=!1,structuredOutputs:r}){var n;let i=(n=t.tools)!=null&&n.length?t.tools:void 0,a=[];if(i==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};let l=t.toolChoice;if(e){let y=[];for(let U of i)U.type==="provider-defined"?a.push({type:"unsupported-tool",tool:U}):y.push({name:U.name,description:U.description,parameters:U.parameters});if(l==null)return{functions:y,function_call:void 0,toolWarnings:a};switch(l.type){case"auto":case"none":case void 0:return{functions:y,function_call:void 0,toolWarnings:a};case"required":throw new an({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:y,function_call:{name:l.toolName},toolWarnings:a}}}let v=[];for(let y of i)y.type==="provider-defined"?a.push({type:"unsupported-tool",tool:y}):v.push({type:"function",function:{name:y.name,description:y.description,parameters:y.parameters,strict:r?!0:void 0}});if(l==null)return{tools:v,tool_choice:void 0,toolWarnings:a};let _=l.type;switch(_){case"auto":case"none":case"required":return{tools:v,tool_choice:_,toolWarnings:a};case"tool":return{tools:v,tool_choice:{type:"function",function:{name:l.toolName}},toolWarnings:a};default:{let y=_;throw new an({functionality:`Unsupported tool choice type: ${y}`})}}}var zM=class{constructor(t,e,r){this.specificationVersion="v1",this.modelId=t,this.settings=e,this.config=r}get supportsStructuredOutputs(){var t;return(t=this.settings.structuredOutputs)!=null?t:uS(this.modelId)}get defaultObjectGenerationMode(){return JM(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:t,prompt:e,maxTokens:r,temperature:n,topP:i,topK:a,frequencyPenalty:l,presencePenalty:v,stopSequences:_,responseFormat:y,seed:C,providerMetadata:U}){var W,K,q,V,J,re,_e,Le;let ge=t.type,Ee=[];a!=null&&Ee.push({type:"unsupported-setting",setting:"topK"}),(y==null?void 0:y.type)==="json"&&y.schema!=null&&!this.supportsStructuredOutputs&&Ee.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let Be=this.settings.useLegacyFunctionCalling;if(Be&&this.settings.parallelToolCalls===!0)throw new an({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(Be&&this.supportsStructuredOutputs)throw new an({functionality:"structuredOutputs with useLegacyFunctionCalling"});XN(this.modelId)==="remove"&&e.some(st=>st.role==="system")&&Ee.push({type:"other",message:"system messages are removed for this model"});let We={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:r,temperature:n,top_p:i,frequency_penalty:l,presence_penalty:v,response_format:(y==null?void 0:y.type)==="json"?this.supportsStructuredOutputs&&y.schema!=null?{type:"json_schema",json_schema:{schema:y.schema,strict:!0,name:(W=y.name)!=null?W:"response",description:y.description}}:{type:"json_object"}:void 0,stop:_,seed:C,max_completion_tokens:(K=U==null?void 0:U.openai)==null?void 0:K.maxCompletionTokens,store:(q=U==null?void 0:U.openai)==null?void 0:q.store,metadata:(V=U==null?void 0:U.openai)==null?void 0:V.metadata,prediction:(J=U==null?void 0:U.openai)==null?void 0:J.prediction,reasoning_effort:(_e=(re=U==null?void 0:U.openai)==null?void 0:re.reasoningEffort)!=null?_e:this.settings.reasoningEffort,messages:GM({prompt:e,useLegacyFunctionCalling:Be,systemMessageMode:XN(this.modelId)})};switch(uS(this.modelId)&&(We.temperature!=null&&(We.temperature=void 0,Ee.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),We.top_p!=null&&(We.top_p=void 0,Ee.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),We.frequency_penalty!=null&&(We.frequency_penalty=void 0,Ee.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),We.presence_penalty!=null&&(We.presence_penalty=void 0,Ee.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),We.logit_bias!=null&&(We.logit_bias=void 0,Ee.push({type:"other",message:"logitBias is not supported for reasoning models"})),We.logprobs!=null&&(We.logprobs=void 0,Ee.push({type:"other",message:"logprobs is not supported for reasoning models"})),We.top_logprobs!=null&&(We.top_logprobs=void 0,Ee.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),We.max_tokens!=null&&(We.max_completion_tokens==null&&(We.max_completion_tokens=We.max_tokens),We.max_tokens=void 0)),ge){case"regular":{let{tools:st,tool_choice:mt,functions:At,function_call:Ur,toolWarnings:on}=VM({mode:t,useLegacyFunctionCalling:Be,structuredOutputs:this.supportsStructuredOutputs});return{args:{...We,tools:st,tool_choice:mt,functions:At,function_call:Ur},warnings:[...Ee,...on]}}case"object-json":return{args:{...We,response_format:this.supportsStructuredOutputs&&t.schema!=null?{type:"json_schema",json_schema:{schema:t.schema,strict:!0,name:(Le=t.name)!=null?Le:"response",description:t.description}}:{type:"json_object"}},warnings:Ee};case"object-tool":return{args:Be?{...We,function_call:{name:t.tool.name},functions:[{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters}]}:{...We,tool_choice:{type:"function",function:{name:t.tool.name}},tools:[{type:"function",function:{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:Ee};default:{let st=ge;throw new Error(`Unsupported type: ${st}`)}}}async doGenerate(t){var e,r,n,i,a,l,v,_;let{args:y,warnings:C}=this.getArgs(t),{responseHeaders:U,value:W}=await lo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Do(this.config.headers(),t.headers),body:y,failedResponseHandler:O_,successfulResponseHandler:tl(WM),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:K,...q}=y,V=W.choices[0],J=(e=W.usage)==null?void 0:e.completion_tokens_details,re=(r=W.usage)==null?void 0:r.prompt_tokens_details,_e={openai:{}};return(J==null?void 0:J.reasoning_tokens)!=null&&(_e.openai.reasoningTokens=J==null?void 0:J.reasoning_tokens),(J==null?void 0:J.accepted_prediction_tokens)!=null&&(_e.openai.acceptedPredictionTokens=J==null?void 0:J.accepted_prediction_tokens),(J==null?void 0:J.rejected_prediction_tokens)!=null&&(_e.openai.rejectedPredictionTokens=J==null?void 0:J.rejected_prediction_tokens),(re==null?void 0:re.cached_tokens)!=null&&(_e.openai.cachedPromptTokens=re==null?void 0:re.cached_tokens),{text:(n=V.message.content)!=null?n:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&V.message.function_call?[{toolCallType:"function",toolCallId:Xl(),toolName:V.message.function_call.name,args:V.message.function_call.arguments}]:(i=V.message.tool_calls)==null?void 0:i.map(Le=>{var ge;return{toolCallType:"function",toolCallId:(ge=Le.id)!=null?ge:Xl(),toolName:Le.function.name,args:Le.function.arguments}}),finishReason:lb(V.finish_reason),usage:{promptTokens:(l=(a=W.usage)==null?void 0:a.prompt_tokens)!=null?l:NaN,completionTokens:(_=(v=W.usage)==null?void 0:v.completion_tokens)!=null?_:NaN},rawCall:{rawPrompt:K,rawSettings:q},rawResponse:{headers:U},request:{body:JSON.stringify(y)},response:cb(W),warnings:C,logprobs:ZN(V.logprobs),providerMetadata:_e}}async doStream(t){if(this.settings.simulateStreaming){let V=await this.doGenerate(t);return{stream:new ReadableStream({start(re){if(re.enqueue({type:"response-metadata",...V.response}),V.text&&re.enqueue({type:"text-delta",textDelta:V.text}),V.toolCalls)for(let _e of V.toolCalls)re.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:_e.toolCallId,toolName:_e.toolName,argsTextDelta:_e.args}),re.enqueue({type:"tool-call",..._e});re.enqueue({type:"finish",finishReason:V.finishReason,usage:V.usage,logprobs:V.logprobs,providerMetadata:V.providerMetadata}),re.close()}}),rawCall:V.rawCall,rawResponse:V.rawResponse,warnings:V.warnings}}let{args:e,warnings:r}=this.getArgs(t),n={...e,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:i,value:a}=await lo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Do(this.config.headers(),t.headers),body:n,failedResponseHandler:O_,successfulResponseHandler:hv(KM),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:l,...v}=e,_=[],y="unknown",C={promptTokens:void 0,completionTokens:void 0},U,W=!0,{useLegacyFunctionCalling:K}=this.settings,q={openai:{}};return{stream:a.pipeThrough(new TransformStream({transform(V,J){var re,_e,Le,ge,Ee,Be,We,st,mt,At,Ur,on;if(!V.success){y="error",J.enqueue({type:"error",error:V.error});return}let kn=V.value;if("error"in kn){y="error",J.enqueue({type:"error",error:kn.error});return}if(W&&(W=!1,J.enqueue({type:"response-metadata",...cb(kn)})),kn.usage!=null){let{prompt_tokens:Pe,completion_tokens:$t,prompt_tokens_details:Vt,completion_tokens_details:wt}=kn.usage;C={promptTokens:Pe??void 0,completionTokens:$t??void 0},(wt==null?void 0:wt.reasoning_tokens)!=null&&(q.openai.reasoningTokens=wt==null?void 0:wt.reasoning_tokens),(wt==null?void 0:wt.accepted_prediction_tokens)!=null&&(q.openai.acceptedPredictionTokens=wt==null?void 0:wt.accepted_prediction_tokens),(wt==null?void 0:wt.rejected_prediction_tokens)!=null&&(q.openai.rejectedPredictionTokens=wt==null?void 0:wt.rejected_prediction_tokens),(Vt==null?void 0:Vt.cached_tokens)!=null&&(q.openai.cachedPromptTokens=Vt==null?void 0:Vt.cached_tokens)}let ct=kn.choices[0];if((ct==null?void 0:ct.finish_reason)!=null&&(y=lb(ct.finish_reason)),(ct==null?void 0:ct.delta)==null)return;let Dr=ct.delta;Dr.content!=null&&J.enqueue({type:"text-delta",textDelta:Dr.content});let Ke=ZN(ct==null?void 0:ct.logprobs);Ke!=null&&Ke.length&&(U===void 0&&(U=[]),U.push(...Ke));let _n=K&&Dr.function_call!=null?[{type:"function",id:Xl(),function:Dr.function_call,index:0}]:Dr.tool_calls;if(_n!=null)for(let Pe of _n){let $t=Pe.index;if(_[$t]==null){if(Pe.type!=="function")throw new lh({data:Pe,message:"Expected 'function' type."});if(Pe.id==null)throw new lh({data:Pe,message:"Expected 'id' to be a string."});if(((re=Pe.function)==null?void 0:re.name)==null)throw new lh({data:Pe,message:"Expected 'function.name' to be a string."});_[$t]={id:Pe.id,type:"function",function:{name:Pe.function.name,arguments:(_e=Pe.function.arguments)!=null?_e:""},hasFinished:!1};let wt=_[$t];((Le=wt.function)==null?void 0:Le.name)!=null&&((ge=wt.function)==null?void 0:ge.arguments)!=null&&(wt.function.arguments.length>0&&J.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:wt.id,toolName:wt.function.name,argsTextDelta:wt.function.arguments}),S_(wt.function.arguments)&&(J.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Ee=wt.id)!=null?Ee:Xl(),toolName:wt.function.name,args:wt.function.arguments}),wt.hasFinished=!0));continue}let Vt=_[$t];Vt.hasFinished||(((Be=Pe.function)==null?void 0:Be.arguments)!=null&&(Vt.function.arguments+=(st=(We=Pe.function)==null?void 0:We.arguments)!=null?st:""),J.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Vt.id,toolName:Vt.function.name,argsTextDelta:(mt=Pe.function.arguments)!=null?mt:""}),((At=Vt.function)==null?void 0:At.name)!=null&&((Ur=Vt.function)==null?void 0:Ur.arguments)!=null&&S_(Vt.function.arguments)&&(J.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(on=Vt.id)!=null?on:Xl(),toolName:Vt.function.name,args:Vt.function.arguments}),Vt.hasFinished=!0))}},flush(V){var J,re;V.enqueue({type:"finish",finishReason:y,logprobs:U,usage:{promptTokens:(J=C.promptTokens)!=null?J:NaN,completionTokens:(re=C.completionTokens)!=null?re:NaN},...q!=null?{providerMetadata:q}:{}})}})),rawCall:{rawPrompt:l,rawSettings:v},rawResponse:{headers:i},request:{body:JSON.stringify(n)},warnings:r}}},eC=T.object({prompt_tokens:T.number().nullish(),completion_tokens:T.number().nullish(),prompt_tokens_details:T.object({cached_tokens:T.number().nullish()}).nullish(),completion_tokens_details:T.object({reasoning_tokens:T.number().nullish(),accepted_prediction_tokens:T.number().nullish(),rejected_prediction_tokens:T.number().nullish()}).nullish()}).nullish(),WM=T.object({id:T.string().nullish(),created:T.number().nullish(),model:T.string().nullish(),choices:T.array(T.object({message:T.object({role:T.literal("assistant").nullish(),content:T.string().nullish(),function_call:T.object({arguments:T.string(),name:T.string()}).nullish(),tool_calls:T.array(T.object({id:T.string().nullish(),type:T.literal("function"),function:T.object({name:T.string(),arguments:T.string()})})).nullish()}),index:T.number(),logprobs:T.object({content:T.array(T.object({token:T.string(),logprob:T.number(),top_logprobs:T.array(T.object({token:T.string(),logprob:T.number()}))})).nullable()}).nullish(),finish_reason:T.string().nullish()})),usage:eC}),KM=T.union([T.object({id:T.string().nullish(),created:T.number().nullish(),model:T.string().nullish(),choices:T.array(T.object({delta:T.object({role:T.enum(["assistant"]).nullish(),content:T.string().nullish(),function_call:T.object({name:T.string().optional(),arguments:T.string().optional()}).nullish(),tool_calls:T.array(T.object({index:T.number(),id:T.string().nullish(),type:T.literal("function").optional(),function:T.object({name:T.string().nullish(),arguments:T.string().nullish()})})).nullish()}).nullish(),logprobs:T.object({content:T.array(T.object({token:T.string(),logprob:T.number(),top_logprobs:T.array(T.object({token:T.string(),logprob:T.number()}))})).nullable()}).nullish(),finish_reason:T.string().nullable().optional(),index:T.number()})),usage:eC}),lS]);function uS(t){return t==="o1"||t.startsWith("o1-")||t==="o3"||t.startsWith("o3-")}function JM(t){return t.startsWith("gpt-4o-audio-preview")}function XN(t){var e,r;return uS(t)?(r=(e=ZM[t])==null?void 0:e.systemMessageMode)!=null?r:"developer":"system"}var ZM={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"}};function XM({prompt:t,inputFormat:e,user:r="user",assistant:n="assistant"}){if(e==="prompt"&&t.length===1&&t[0].role==="user"&&t[0].content.length===1&&t[0].content[0].type==="text")return{prompt:t[0].content[0].text};let i="";t[0].role==="system"&&(i+=`${t[0].content}

`,t=t.slice(1));for(let{role:a,content:l}of t)switch(a){case"system":throw new mv({message:"Unexpected system message in prompt: ${content}",prompt:t});case"user":{let v=l.map(_=>{switch(_.type){case"text":return _.text;case"image":throw new an({functionality:"images"})}}).join("");i+=`${r}:
${v}

`;break}case"assistant":{let v=l.map(_=>{switch(_.type){case"text":return _.text;case"tool-call":throw new an({functionality:"tool-call messages"})}}).join("");i+=`${n}:
${v}

`;break}case"tool":throw new an({functionality:"tool messages"});default:{let v=a;throw new Error(`Unsupported role: ${v}`)}}return i+=`${n}:
`,{prompt:i,stopSequences:[`
${r}:`]}}function QN(t){return t==null?void 0:t.tokens.map((e,r)=>({token:e,logprob:t.token_logprobs[r],topLogprobs:t.top_logprobs?Object.entries(t.top_logprobs[r]).map(([n,i])=>({token:n,logprob:i})):[]}))}var QM=class{constructor(t,e,r){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=t,this.settings=e,this.config=r}get provider(){return this.config.provider}getArgs({mode:t,inputFormat:e,prompt:r,maxTokens:n,temperature:i,topP:a,topK:l,frequencyPenalty:v,presencePenalty:_,stopSequences:y,responseFormat:C,seed:U}){var W;let K=t.type,q=[];l!=null&&q.push({type:"unsupported-setting",setting:"topK"}),C!=null&&C.type!=="text"&&q.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:V,stopSequences:J}=XM({prompt:r,inputFormat:e}),re=[...J??[],...y??[]],_e={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:n,temperature:i,top_p:a,frequency_penalty:v,presence_penalty:_,seed:U,prompt:V,stop:re.length>0?re:void 0};switch(K){case"regular":{if((W=t.tools)!=null&&W.length)throw new an({functionality:"tools"});if(t.toolChoice)throw new an({functionality:"toolChoice"});return{args:_e,warnings:q}}case"object-json":throw new an({functionality:"object-json mode"});case"object-tool":throw new an({functionality:"object-tool mode"});default:{let Le=K;throw new Error(`Unsupported type: ${Le}`)}}}async doGenerate(t){let{args:e,warnings:r}=this.getArgs(t),{responseHeaders:n,value:i}=await lo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Do(this.config.headers(),t.headers),body:e,failedResponseHandler:O_,successfulResponseHandler:tl(eL),abortSignal:t.abortSignal,fetch:this.config.fetch}),{prompt:a,...l}=e,v=i.choices[0];return{text:v.text,usage:{promptTokens:i.usage.prompt_tokens,completionTokens:i.usage.completion_tokens},finishReason:lb(v.finish_reason),logprobs:QN(v.logprobs),rawCall:{rawPrompt:a,rawSettings:l},rawResponse:{headers:n},response:cb(i),warnings:r,request:{body:JSON.stringify(e)}}}async doStream(t){let{args:e,warnings:r}=this.getArgs(t),n={...e,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:i,value:a}=await lo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Do(this.config.headers(),t.headers),body:n,failedResponseHandler:O_,successfulResponseHandler:hv(tL),abortSignal:t.abortSignal,fetch:this.config.fetch}),{prompt:l,...v}=e,_="unknown",y={promptTokens:Number.NaN,completionTokens:Number.NaN},C,U=!0;return{stream:a.pipeThrough(new TransformStream({transform(W,K){if(!W.success){_="error",K.enqueue({type:"error",error:W.error});return}let q=W.value;if("error"in q){_="error",K.enqueue({type:"error",error:q.error});return}U&&(U=!1,K.enqueue({type:"response-metadata",...cb(q)})),q.usage!=null&&(y={promptTokens:q.usage.prompt_tokens,completionTokens:q.usage.completion_tokens});let V=q.choices[0];(V==null?void 0:V.finish_reason)!=null&&(_=lb(V.finish_reason)),(V==null?void 0:V.text)!=null&&K.enqueue({type:"text-delta",textDelta:V.text});let J=QN(V==null?void 0:V.logprobs);J!=null&&J.length&&(C===void 0&&(C=[]),C.push(...J))},flush(W){W.enqueue({type:"finish",finishReason:_,logprobs:C,usage:y})}})),rawCall:{rawPrompt:l,rawSettings:v},rawResponse:{headers:i},warnings:r,request:{body:JSON.stringify(n)}}}},eL=T.object({id:T.string().nullish(),created:T.number().nullish(),model:T.string().nullish(),choices:T.array(T.object({text:T.string(),finish_reason:T.string(),logprobs:T.object({tokens:T.array(T.string()),token_logprobs:T.array(T.number()),top_logprobs:T.array(T.record(T.string(),T.number())).nullable()}).nullish()})),usage:T.object({prompt_tokens:T.number(),completion_tokens:T.number()})}),tL=T.union([T.object({id:T.string().nullish(),created:T.number().nullish(),model:T.string().nullish(),choices:T.array(T.object({text:T.string(),finish_reason:T.string().nullish(),index:T.number(),logprobs:T.object({tokens:T.array(T.string()),token_logprobs:T.array(T.number()),top_logprobs:T.array(T.record(T.string(),T.number())).nullable()}).nullish()})),usage:T.object({prompt_tokens:T.number(),completion_tokens:T.number()}).nullish()}),lS]),rL=class{constructor(t,e,r){this.specificationVersion="v1",this.modelId=t,this.settings=e,this.config=r}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var t;return(t=this.settings.maxEmbeddingsPerCall)!=null?t:2048}get supportsParallelCalls(){var t;return(t=this.settings.supportsParallelCalls)!=null?t:!0}async doEmbed({values:t,headers:e,abortSignal:r}){if(t.length>this.maxEmbeddingsPerCall)throw new Z0({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});let{responseHeaders:n,value:i}=await lo({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Do(this.config.headers(),e),body:{model:this.modelId,input:t,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:O_,successfulResponseHandler:tl(nL),abortSignal:r,fetch:this.config.fetch});return{embeddings:i.data.map(a=>a.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:n}}}},nL=T.object({data:T.array(T.object({embedding:T.array(T.number())})),usage:T.object({prompt_tokens:T.number()}).nullish()}),iL={"dall-e-3":1,"dall-e-2":10},aL=class{constructor(t,e,r){this.modelId=t,this.settings=e,this.config=r,this.specificationVersion="v1"}get maxImagesPerCall(){var t,e;return(e=(t=this.settings.maxImagesPerCall)!=null?t:iL[this.modelId])!=null?e:1}get provider(){return this.config.provider}async doGenerate({prompt:t,n:e,size:r,aspectRatio:n,seed:i,providerOptions:a,headers:l,abortSignal:v}){var _,y,C,U;let W=[];n!=null&&W.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),i!=null&&W.push({type:"unsupported-setting",setting:"seed"});let K=(C=(y=(_=this.config._internal)==null?void 0:_.currentDate)==null?void 0:y.call(_))!=null?C:new Date,{value:q,responseHeaders:V}=await lo({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Do(this.config.headers(),l),body:{model:this.modelId,prompt:t,n:e,size:r,...(U=a.openai)!=null?U:{},response_format:"b64_json"},failedResponseHandler:O_,successfulResponseHandler:tl(oL),abortSignal:v,fetch:this.config.fetch});return{images:q.data.map(J=>J.b64_json),warnings:W,response:{timestamp:K,modelId:this.modelId,headers:V}}}},oL=T.object({data:T.array(T.object({b64_json:T.string()}))});function cS(t={}){var e,r,n;let i=(e=Xh(t.baseURL))!=null?e:"https://api.openai.com/v1",a=(r=t.compatibility)!=null?r:"compatible",l=(n=t.name)!=null?n:"openai",v=()=>({Authorization:`Bearer ${Jh({apiKey:t.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":t.organization,"OpenAI-Project":t.project,...t.headers}),_=(q,V={})=>new zM(q,V,{provider:`${l}.chat`,url:({path:J})=>`${i}${J}`,headers:v,compatibility:a,fetch:t.fetch}),y=(q,V={})=>new QM(q,V,{provider:`${l}.completion`,url:({path:J})=>`${i}${J}`,headers:v,compatibility:a,fetch:t.fetch}),C=(q,V={})=>new rL(q,V,{provider:`${l}.embedding`,url:({path:J})=>`${i}${J}`,headers:v,fetch:t.fetch}),U=(q,V={})=>new aL(q,V,{provider:`${l}.image`,url:({path:J})=>`${i}${J}`,headers:v,fetch:t.fetch}),W=(q,V)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return q==="gpt-3.5-turbo-instruct"?y(q,V):_(q,V)},K=function(q,V){return W(q,V)};return K.languageModel=W,K.chat=_,K.completion=y,K.embedding=C,K.textEmbedding=C,K.textEmbeddingModel=C,K.image=U,K.imageModel=U,K}var Pq=cS({compatibility:"strict"});var co=require("vscode");var sL=["rate limit exceeded","net::err","check your network connection","check your firewall","request failed","400 bad request","server error","error on conversation request","response contained no choices","response got filtered"];function uL({role:t,content:e}){switch(t){case"system":return co.LanguageModelChatMessage.User(e);case"user":let r=e.map(a=>{switch(a.type){case"text":return new co.LanguageModelTextPart(a.text);case"image":throw new Error("Image content not supported");case"file":throw new Error("File content not supported")}});return co.LanguageModelChatMessage.User(r);case"tool":let n=e.map(a=>{switch(a.type){case"tool-result":let l=typeof a.result=="string"?a.result:JSON.stringify(a.result);return new co.LanguageModelToolResultPart(a.toolCallId,[new co.LanguageModelTextPart(l)])}});return co.LanguageModelChatMessage.User(n);case"assistant":let i=e.map(a=>{switch(a.type){case"text":return new co.LanguageModelTextPart(a.text);case"tool-call":return new co.LanguageModelToolCallPart(a.toolCallId,a.toolName,a.args)}});return co.LanguageModelChatMessage.Assistant(i)}}function lL(t){switch(t.type){case"function":return{name:t.name,description:t.description,inputSchema:t.parameters};case"provider-defined":throw new Error("Provider-defined tools not supported")}}function cL(t){let e=String(t.message).toLowerCase();for(let r of sL)if(e.includes(r))return!0;return!1}var fS=class{specificationVersion="v1";defaultObjectGenerationMode="json";provider="copilot";supportsImageUrls=!1;constructor(e,r,n){this.modelId=e,this.settings=r,this.config=n}async doGenerate(e){throw new Error("Not implemented")}async doStream(e){var K;let[r]=await co.lm.selectChatModels({family:this.modelId,vendor:"copilot"});if(!r)throw new Error("Model not found: "+this.modelId);let{prompt:n,abortSignal:i,mode:a}=e,l=i.session,{token:v}=l;if(a.type!=="regular")throw new Error("Request mode not supported: "+a.type);let _=n.map(uL),y=(K=a.tools)==null?void 0:K.map(lL),C=n.slice(-1)[0],U=!1;if(C.role=="tool")if(C.content[0].result=="stop")U=!0;else{let q=new co.LanguageModelTextPart("Should I process the last tool result now?"),V=new co.LanguageModelTextPart("Yes");_.push(co.LanguageModelChatMessage.Assistant([q])),_.push(co.LanguageModelChatMessage.User([V]))}return{stream:new ReadableStream({async start(q){let V=0;if(U){q.enqueue({type:"text-delta",textDelta:`

`}),q.close();return}for(;;){try{if(v.isCancellationRequested){q.close();return}let J=await r.sendRequest(_,{tools:y,modelOptions:{temperature:e.temperature,max_tokens:e.maxTokens}},v);for await(let re of J.stream){if(v.isCancellationRequested)break;re instanceof co.LanguageModelTextPart?q.enqueue({type:"text-delta",textDelta:re.value}):re instanceof co.LanguageModelToolCallPart?q.enqueue({type:"tool-call",toolCallType:"function",toolCallId:re.callId,toolName:re.name,args:JSON.stringify(re.input)}):q.error(new Error("Unknown content format"))}q.close();return}catch(J){if(v.isCancellationRequested){q.close();return}if(String(J.message).includes("Model is not supported for this request")){q.error(new Error(`${r.name} is not available to 3rd party extensions`));return}if(!cL(J)||++V>5){q.error(J);return}q.enqueue({type:"error",error:{event:"retry",count:V,message:J.message||String(J),cause:J}}),String(J.message).toLowerCase().includes("rate limit exceeded")&&await __(30,v)}await __(5*V,v)}}}),rawCall:{rawPrompt:"",rawSettings:{}}}}};function tC(t){let e=(n,i={})=>new fS(n,i,{provider:"copilot"}),r=function(n,i={}){return e(n,i)};return r.chat=e,r}var fL={anthropic:iS,deepseek:aS,google:sS,openai:cS,copilot:tC},rC={};function dS({id:t,provider:e,apiKey:r}){let n=rC[e];if(!n){let i=fL[e];if(!i)throw new Error("Unknown provider: "+e);n=i({apiKey:r}),rC[e]=n}return n(t)}var pS=[{provider:"anthropic",family:"claude-3.5-sonnet",id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet"},{provider:"anthropic",family:"claude-3.7-sonnet",id:"claude-3-7-sonnet-20250219",name:"Claude 3.7 Sonnet"},{provider:"anthropic",family:"claude-3.7-sonnet-thought",id:"claude-3-7-sonnet-20250219",name:"Claude 3.7 Sonnet Thinking"},{provider:"deepseek",family:"deepseek-chat",id:"deepseek-chat",name:"DeepSeek V3"},{provider:"google",family:"gemini-2.0-flash",id:"gemini-2.0-flash-001",name:"Gemini 2.0 Flash"},{provider:"openai",family:"gpt-4o",id:"gpt-4o-2024-11-20",name:"GPT 4o"},{provider:"openai",family:"o3-mini",id:"o3-mini-2025-01-31",name:"o3-mini"},{provider:"openrouter",family:"claude-3.5-sonnet",id:"anthropic/claude-3.5-sonnet:beta",name:"Claude 3.5 Sonnet"},{provider:"openrouter",family:"gpt-4o",id:"openai/gpt-4o-2024-08-06",name:"GPT 4o"}];var nC=[{id:"anthropic",name:"Anthropic",envKeyName:"ANTHROPIC_API_KEY",website:"https://console.anthropic.com"},{id:"google",name:"Google AI",envKeyName:"GOOGLE_GENERATIVE_AI_API_KEY",website:"https://aistudio.google.com"},{id:"deepseek",name:"DeepSeek",envKeyName:"DEEPSEEK_API_KEY",website:"https://platform.deepseek.com"},{id:"openai",name:"OpenAI",envKeyName:"OPENAI_API_KEY",website:"https://platform.openai.com"},{id:"openrouter",name:"Open Router",envKeyName:"OPENROUTER_API_KEY",website:"https://openrouter.ai"}];var Jg=require("vscode");function Ta(t,e={depth:2}){switch(typeof t){case"undefined":return"";case"number":return String(t);case"string":return t;case"function":return Ta(t(e),e);case"object":let r=[];return Array.isArray(t)?r=t.map(n=>Ta(n,e)).filter(n=>!!n):r=Object.entries(t).map(([n,i])=>{let a="#".repeat(e.depth),l=Ta(i,{depth:e.depth+1});return l&&`${a} ${n}

`+l}),r.join(`

`)}}var Zt=function(t,...e){let r=C=>/^\s*$/.test(C),n=C=>C.match(/^\s*/)[0].length,i=t.map(C=>C.split(`
`)),a=100;i.forEach(C=>{C.slice(1).forEach(U=>{r(U)||(a=Math.min(a,n(U)))})});let l=C=>C[0],v=C=>C[C.length-1],_=C=>!r(v(i[C]))||!r(l(i[C+1])),y=[];return i.forEach((C,U)=>{let W=C.slice();if(a<100)for(let q=1;q<W.length;q++)W[q]=C[q].slice(a);if(U==0||!_(U-1))for(;W.length&&r(W[0]);)W.shift();if(U==i.length-1||!_(U))for(;W.length&&r(W[W.length-1]);)W.pop();let K=W.join(`
`);if(U==0)y.push(K);else{let q=e[U-1]??"";if(typeof q=="object"||typeof q=="function"){if(_(U-1))throw new Error("Markdown inline value not supported");y.push(q),y.push(K)}else{let V=y.pop();_(U-1)||(V&&(q=`

`+q),K&&(q=q+`

`),q==`



`&&(q=`

`)),y.push(V+q+K)}}}),y.length==1?y[0]:y};function Ro(t,e="- ",r="",n=`
`,i=": "){return a=>Array.isArray(t)?t.map(l=>e+Ta(l,a)+r).join(n):Object.entries(t).map(([l,v])=>e+l+i+Ta(v,a)+r).join(n)}function gi(t,e){return r=>{let n=Ta(e,r);return n?`<${t}>
`+n+`
</${t}>`:""}}function iC(t,e){return r=>{let n=Ta(t,r);return n||e}}var o4=require("vscode");async function rg(t,e=!1){let r=Zc(t),n={path:r},i=await zh(t),a=[];return n.lines=i.split(`
`).length,n.status="ok",a.push(gi("file_metadata",Ro(n))),e||a.push(gi("file_content",i)),Ta(a)}async function bm(t,e=!1){let r=Zc(t),n=[],i=[],a={path:r},l=[];for(let{name:v,isFile:_,isDirectory:y}of await L0(t))_?i.push(v):y&&n.push(v+"/");if(a["sub-directories"]=n.length,a.files=i.length,a.status="ok",l.push(gi("directory_metadata",Ro(a))),!e){let v=[].concat(n,i);l.push(iC(gi("directory_content",v),"Directory is empty."))}return Ta(l)}var aC=require("vscode");async function oC(t,e,r,n=!1){let i=Zc(t),a={path:i,name:e},l=[];if(a.start=`Ln ${r.start.line+1}, Col ${r.start.character+1}`,a.end=`Ln ${r.end.line+1}, Col ${r.end.character+1}`,a.lines=r.start.line-r.end.line+1,l.push(gi("symbol_metadata",Ro(a))),!n){let v=await aC.workspace.openTextDocument(t),_=v.getText(r);l.push(gi("symbol_content",_))}return Ta(l)}var sC=require("vscode");async function k_(t,e=!1){let r=Zc(t),n={path:r},i=await zh(t),a=[],l=[],v=await sC.commands.executeCommand("vscode.executeDocumentSymbolProvider",t);function _(y){var C;a.push(y.name),(C=y.children)==null||C.forEach(_)}if(v&&v.length>0){let y=v[0];y.name.startsWith("# ")&&(n.title=y.name.slice(2)),v.forEach(_)}return n.lines=i.split(`
`).length,n.status="ok",l.push(gi("document_metadata",Ro(n))),a.length&&l.push(gi("document_outline",Ro(a,"","",`

`))),e||l.push(gi("document_content",i)),Ta(l)}var uC=require("vscode");async function lC(){let{activeTextEditor:t}=uC.window,{document:e,selection:r}=t||{},n="",i=[];if(!t)return"No files are currently open in the editor.";let a={path:Zc(t.document.uri)};return r.isEmpty||(n=e.getText(r),a.selection=`${r.end.line-r.start.line+1} line(s)`),i.push(gi("active_text_editor",Ro(a))),i.push(gi("active_selection",n)),Ta(i)}var dL="multicoder_sourcecode",pL=Zt`
    Read and analyze source code files in the project

    Commands:
    - /stat: checks if the specified path exists and returns basic information about it
    - /read: returns the content of a file or directory at the given path
`,cC=T.object({command:T.enum(["stat","read"]).describe("Command"),path:T.string().describe("File or directory path")}),mL="Looking at the source files ...";function vL(t,e){let r=t.path[0];if(t.code=="invalid_enum_value"&&r=="command"&&String(t.received).startsWith("/")){let n=cC.shape.command.enum[String(t.received).slice(1)];if(n)return{command:n}}}async function hL({command:t,path:e},{id:r,log:n,stream:i}){let a=e.split("/").pop();n.info(a,{command:t,event:`tool.sourcecode.${t}`});let l=hi(e,r);return await vm(l)?await bm(l,t=="stat"):await Xc(l)?(t!=="stat"&&i.reference(Jl(l)),await rg(l,t=="stat")):(t!=="stat"&&n.warn("[sourcecode] Path does not exist - "+a,{command:t}),"Error: Path does not exist - "+e)}var fb={name:dL,description:pL,parameters:cC,execute:hL,progress:mL,repair:vL};var gL="multicoder_documents",_L=Zt`
    Read task-related documentation files

    Commands:
    - /stat: checks if the specified documentation path exists and returns basic information about it
    - /read: returns the content of a documentation file or directory at the given path
`,fC=T.object({command:T.enum(["stat","read"]).describe("Command"),path:T.string().describe("File or directory path")}),yL="Looking at the available documents ...";function bL(t,e){let r=t.path[0];if(t.code=="invalid_enum_value"&&r=="command"&&String(t.received).startsWith("/")){let n=fC.shape.command.enum[String(t.received).slice(1)];if(n)return{command:n}}}async function wL({command:t,path:e},{id:r,log:n,stream:i}){let a=e.split("/").pop(),l=hi(e,r);return n.info(a,{command:t,event:`tool.documents.${t}`}),await vm(l)?await bm(l,t=="stat"):await Xc(l)?(t!=="stat"&&!e.startsWith(".multicoder")&&i.reference(Jl(l)),await k_(l,t=="stat")):(t!=="stat"&&n.warn("[documents] Path does not exist - "+a,{command:t}),"Error: Path does not exist - "+e)}var db={name:gL,description:_L,parameters:fC,execute:wL,progress:yL,repair:bL};var vS=require("vscode");var zg=require("vscode");var is=require("vscode");async function dC(t,e){var C,U,W;let r=t.task,n=null;for(;r&&!n;)n=r.edits.find(K=>K.id==e),r=r.parent;if(!n)return;let i=new is.WorkspaceEdit,a=Jl(hi(n.path,t.id));await Xc(a)||(a=a.with({scheme:"untitled"}));let l=await is.workspace.openTextDocument(a),v=l.getText().replace(/\r\n/g,`
`),_=v==n.after.replace(/\r\n/g,`
`)?n.before:n.after,y=new is.Range(new is.Position(0,0),new is.Position(l.lineCount,0));i.replace(a,y,_),await is.workspace.applyEdit(i),((W=(U=(C=is.window.activeTextEditor)==null?void 0:C.document)==null?void 0:U.uri)==null?void 0:W.path)!=a.path&&await is.window.showTextDocument(l),SL(n.search)}function SL(t){var _;let e=is.window.activeTextEditor,r=e==null?void 0:e.document,n=(_=r==null?void 0:r.getText())==null?void 0:_.replace(/\r\n/g,`
`);if(!t||!e||!r)return;let i=n.indexOf(t);if(i==-1)return;let a=n.slice(0,i).split(`
`).length-1,l=t.split(`
`).length,v=new is.Position(a,0);e.selection=new is.Selection(v,v),e.revealRange(new is.Range(v,new is.Position(a+l,0)))}function pC(t,e,r,n,i,a,l){let{stream:v}=t;if(a.startsWith(".multicoder"))return EL(t,v,i,a);let _=new zg.MarkdownString(`

`),y=t.id,C=encodeURIComponent(JSON.stringify([a,r,y])),U=`command:multicoder.diffView?${C}`,W=J=>`<span class="codicon codicon-${J}" style="color:var(--vscode-textLink-foreground);"></span>`;_.supportThemeIcons=!0,_.isTrusted={enabledCommands:["multicoder.diffView"]},_.supportHtml=!0,_.appendMarkdown(`[${W("diff-single")} ${n} (${a})](${U} 'Open Diff')`),_.appendCodeblock(i,l),v.markdown(_);let K=e=="create"?"Create":"Apply",q=e=="create"?"create file":"apply changes";v.button({title:K,command:"multicoder.action",arguments:[V],tooltip:`Click to ${q}, click again to revert`});function V(){let J=a.split("/").pop();t.log.info(J,{event:"action."+K.toLowerCase()}),dC(t,r)}}function EL(t,e,r,n){r=r.replace(/^#/gm,"##");let i=new zg.MarkdownString(`

`);i.supportHtml=!0,i.appendMarkdown(r),e.markdown(i),e.button({title:"Edit",command:"multicoder.action",arguments:[a],tooltip:"Click to edit the document"});async function a(){let l=hi(n,t.id),v=await zg.workspace.openTextDocument(l),_=n.split("/").pop();zg.window.showTextDocument(v),t.log.info(_,{event:"action.edit"})}}var mC="multicoder_followups",TL=Zt`
    Displays followup actions to the user at the end of the conversation turn.
`,IL=Zt`
    Using ${mC} tool reply with a list of followup actions.
`,NL=T.object({actions:T.array(T.string()).describe("Short followup actions (5-10 words)")}),CL=()=>({actions:[]});function xL(t,{actions:e}){if(t.code=="invalid_type"){let r=t.path[0];if(t.received=="string"&&r=="actions")return{actions:String(e).split(`
`)}}}async function DL({actions:t},{log:e}){return e.info(`${t==null?void 0:t.length} options`,{actions:t,event:"tool.followups"}),"stop"}var qs={name:mC,description:TL,parameters:NL,execute:DL,retry:IL,fallback:CL,repair:xL};var vC="multicoder_summary",RL=Zt`
    Shows summary, explanations or walkthrough section at the end of the response or after each task step.
    Allows the user to see the progress of completing the task.
    Always use this tool at the end of each step or when the task is finished.
`,OL=Zt`
    Using ${vC} tool reply with a short summary of what has been done for the current step or task.
`,kL=T.object({text:T.string().describe("Short walkthrough or summary of this step")}),AL=()=>({text:"Task completed"});async function PL({text:t},{log:e,stream:r}){return e.info(`${t.slice(0,60).replace(/\n/g," ")}...`,{summary:t,event:"tool.summary"}),r.markdown(`

`+t+`

`),`This is the end of the response. Use ${qs.name} tool to suggest the next actions.`}var ei={name:vC,description:RL,parameters:kL,execute:PL,retry:OL,fallback:AL};var ML="multicoder_editor",LL=Zt`
    Create and modify source files or documents

    Usage:
    - To add new content always use /insert or /append
    - To change more than half of the file use /update
    - To replace part of the file use /replace
    - To delete part of the file, use /replace with empty content
    - Split large edits into multiple small ones

    Important:
    - Selection must be unique within file, select 3 lines or more to avoid ambiguity
`,FL=Zt`
    Editing operation to execute with the given selection and content:
    - /create: creates a new file with the specified content
    - /update: updates the entire file
    - /insert: inserts new content before selection
    - /append: adds new content after selection
    - /replace: replaces selection with new content
`,UL=Zt`
    Provide exact text including whitespace:
    - For /create and /update: use empty string ("") 
    - For /insert: at least 3 full lines immediately following new content, no overlap
    - For /append: at least 3 full lines immediately preceding new content, no overlap
`,gC=T.object({command:T.enum(["create","insert","append","replace","update"]).describe(FL),path:T.string().describe("File path"),select:T.string().describe(UL),content:T.string().describe("New content"),summary:T.string().describe("A very short (3-10 words) summary of this change")}),jL="Writing code ...";function YL(t,{command:e,path:r,summary:n}){let i=t.path[0];if(t.code=="invalid_enum_value"&&i=="command"&&String(t.received).startsWith("/")){let a=gC.shape.command.enum[String(t.received).slice(1)];if(a)return{command:a}}if(t.code=="invalid_type"&&t.received=="undefined"){if(i=="command"&&String(n).startsWith("Create"))return{command:"create"};if(i=="command"&&String(n).startsWith("Update"))return{command:"update"};if(i=="select")return{select:""};if(i=="summary")return{summary:`${e} ${r}`}}}var mS={spec:1,design:1,plan:1};async function $L(t,e){let{path:r,command:n,select:i}=t,{task:a}=e;if(a.state in mS&&!r.startsWith(".multicoder"))return"Error: cannot modify source code yet. At this point you should only work on task documents.";let{error:l}=await _C(t,e);return i&&i.split(`
`).length<2&&n=="append"&&(r.endsWith(".md")?l="Selection is too small, use the full section text":l="Selection is too small, provide at least 3-5 lines"),l?"Tool error: "+l:"ok"}async function _C({path:t,command:e,select:r,content:n},i){let a=hi(t,i.id),l=null,v=null,_=n;if(await Xc(a)){if(e==="create")return{error:"File already exists: "+t}}else if(e!=="create")return{error:"File not found: "+t};switch(e=="insert"&&n.endsWith(r)&&(n=n.replace(r,"")),e=="update"&&r&&(r=""),e){case"insert":case"append":case"replace":case"update":if(l=await vS.workspace.openTextDocument(a),v=await zh(a),_=GL(v,r,n,l.eol,e),typeof _=="object")return _}return{document:l,before:v,after:_}}async function BL(t,e,r){let{path:n,summary:i,command:a,select:l,content:v}=t,{log:_,task:y}=e,C=hi(n,e.id),U=n.split("/").pop();if(r!="ok")return y.state in mS&&!n.startsWith(".multicoder")&&_.warn(`[workflow] Code not allowed: ${i}`,{filename:U,command:a,summary:i}),r;let{document:W,before:K,after:q,error:V}=await _C(t,e);if(V)return V;let J=We=>We?We.split(`
`).length:0,re=J(l),_e=J(v);_.info(i,{filename:U,command:a,selectedLines:re,contentLines:_e,event:`tool.editor.${a}`});try{await M0(C,q)}catch(We){throw _.warn("Cannot write file - "+We.message,{filename:U,command:a,summary:i,...We}),We}W=await vS.workspace.openTextDocument(C);let Le=W.languageId,ge=A0();n.startsWith(".multicoder")||y.edits.push({id:ge,summary:i,path:n,before:K,after:q,search:v}),pC(e,a,ge,i,v||l,n,Le),await qL(.1);let Ee="";n.endsWith(".md")?Ee=await k_(C,!0):Ee=await rg(C,!0);let Be=a=="create"?"created":"modified";return y.state in mS?Ee+`

Document ${Be}. Provide a very short summary using ${ei.name} tool`:Ee+`

File ${n} ${Be} successfully.`}async function qL(t){return new Promise(e=>setTimeout(e,t*1e3))}function HL(t){return/^\s*\/\//.test(t)||/^\s*\/\*/.test(t)}function hC(t,e){let r=HL(t)?"":`
`;return t.endsWith(`
`)&&e.startsWith(`
`)?t+e:t.endsWith(`
`)||e.startsWith(`
`)?t+r+e:t+r+`
`+e}function GL(t,e,r,n,i){let a=t.replace(/\r\n/g,`
`);if(i=="update"&&a==r)return{error:"The new content is the same as the original file. No changes were made."};if(i=="replace"&&e==r)return{error:"The new content is the same as the selection. No changes were made."};e||(e=a),(a+`
`).endsWith(e)&&(a+=`
`),i=="insert"&&(r=hC(r,e)),i=="append"&&(r=hC(e,r));let l=a.replace(e,r);return a==l?{error:"The selected text cannot be found in the current file. Did you provide exact full consecutive lines including whitespace?"}:(n==2&&(l=l.replace(/\n/g,`\r
`)),l)}var dp={name:ML,description:LL,parameters:gC,execute:$L,finalize:BL,progress:jL,repair:YL};var yC=require("vscode");var{fs:hS}=yC.workspace,VL="multicoder_filesystem",zL=Zt`
    Manage files and directories
`,WL=Zt`
    Commands:
    - /create: creates a new directory at the specified path.
    - /delete: deletes a file or directory at the specified path (recursive)
`,KL=Zt`
    File or directory path:
    - use full path, not just a filename
    - directory path MUST end with '/' (slash)
`,bC=T.object({command:T.enum(["create","delete"]).describe(WL),path:T.string().describe(KL)}),JL="Working with files ...";function ZL(t,e){let r=t.path[0];if(t.code=="invalid_enum_value"&&r=="command"&&String(t.received).startsWith("/")){let n=bC.shape.command.enum[String(t.received).slice(1)];if(n)return{command:n}}}async function XL({command:t,path:e},{id:r,log:n}){let i=e.replace(/\/$/,"").split("/").pop(),a=hi(e,r);switch(n.info(i,{command:t,event:`tool.filesystem.${t}`}),t){case"create":return e.endsWith("/")?await vm(a)?`Directory already exists - ${e}`:(await hS.createDirectory(a),`Directory created - ${e}`):`Tool error: directory path must end with a slash (/). To create a file use ${dp.name} tool.`;case"delete":return await vm(a)?(await hS.delete(a,{recursive:!0}),`Directory deleted - ${e}`):await Xc(a)?(await hS.delete(a),`File deleted - ${e}`):`Tool error: File or directory does not exist - ${e}`}}var pb={name:VL,description:zL,parameters:bC,execute:XL,progress:JL,repair:ZL};var QL="multicoder_question",eF=Zt`
    Ask a single focused question to collect missing information from the user.

    Purpose:
    - Gather specific information needed to proceed with a task
    - Resolve ambiguity in user requests
    - Guide user through decisions with clear options

    Usage guidelines:
    - Collect all necessary information step-by-step, use this tool up to 10 times if needed
    - Limit choices to 3-7 options for optimal readability
    - Avoid open-ended questions - provide concrete choices
    - Always provide most appropriate and useful default value

    Examples:
    - Yes/No decisions: "Should this function handle null values?"
    - Multiple choice: "Which HTTP method should this endpoint use?"
    - Technology selection: "Which database type best fits these requirements?"
`,tF="The main question text to display to the user. Should be clear, specific and end with question mark.",rF="Additional explanation, background information, or guidance to help user make an informed choice.",nF="List of possible answers the user can select from. Each choice should be distinct and meaningful.",iF="When true, user can select multiple choices. When false, only single choice is allowed.",aF="Pre-selected choice(s) shown initially. Must be one of the provided choices or comma-separated list.",oF=T.object({text:T.string().describe(tF),context:T.string().max(2e3).describe(rF),choices:T.array(T.string()).describe(nF),allowMultiple:T.boolean().describe(iF),defaultValue:T.string().describe(aF)}),sF="Preparing questions ...";function uF(t,{choices:e}){if(t.code=="invalid_type"){let r=t.path[0];if(t.received=="undefined"){if(r=="allowMultiple")return{allowMultiple:!1};if(r=="defaultValue"&&Array.isArray(e)&&e.length>0)return{defaultValue:e[0]}}}}var gS=[];async function lF(t,e){return t.defaultValue||"No answer"}async function cF({text:t,context:e,choices:r,allowMultiple:n,defaultValue:i},a,l){let v=[],{log:_,stream:y}=a,C=i||"No answer";for(_.info(t,{choices:r,context:e,allowMultiple:n,defaultValue:i,event:"tool.question"});;){if(y.markdown(fF(t,e)),n&&v.length?y.markdown(dF(v)):y.markdown(`

(`+C+`)

`),a.auto)return C;let U=pF(r,v,n),W=await _S(a,{suggestions:U});if(n){if(!W.prompt)return C=v.length?v.join(", "):C,gS.push({question:t,answer:C}),C}else return C=W.prompt||C,gS.push({question:t,answer:C}),C;v.push(W.prompt)}}var fF=(t,e)=>`

---
Q: **${t}**

${e}
`,dF=t=>`
${t.map(e=>`
- ${e}`)}
`;function pF(t,e,r){let n=[];return t.forEach(i=>{e.indexOf(i)==-1&&!/please/i.test(i)&&n.push({command:"",prompt:i})}),r&&n.push({command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"}),n}var A_={name:QL,description:eF,parameters:oF,execute:lF,finalize:cF,progress:sF,repair:uF,latest:gS};var wC="multicoder_evaluation",mF=Zt`
    Reports the evaluation results. Use this tool when requested to evaluate the next step or task.

    Evaluate the next step for 
    - lack of clarity (ambiguity, incompleteness, imprecision),
    - complexity (functional scope, architectural scale, expertise required)
    - workload (amount of code, projected effort, budget estimate)

    Carefully choose the most appropriate level for each evaluated dimension.
`,vF=Zt`
    Using ${wC} tool reply with an evaluation of the next step for lack of clarity, complexity and workload.
`,hF=Zt`
    Ambiguity:
        0 - n/a
        1 - very low
        2 - low
        3 - medium
        4 - high
        5 - very high
`,gF=Zt`
    Incompleteness:
        0 - n/a
        1 - very low
        2 - low
        3 - medium
        4 - high
        5 - very high
`,_F=Zt`
    Imprecision:
        0 - n/a
        1 - very low
        2 - low
        3 - medium
        4 - high
        5 - very high
`,yF=Zt`
    Functional scope:
        0 - n/a
        1 - implementation details, simple bugfix, code formatting
        2 - user story, issue, enhancement, complex bugfix
        3 - product feature, architectural refactoring
        4 - epic, application, library, subsystem
        5 - full product, platform, framework
`,bF=Zt`
    Architectural scale:
        0 - n/a
        1 - code level (local scope): variable naming, control flow, error handling
        2 - component level (single module): classes, functions, state management, data structures
        3 - service level (multiple modules): APIs, database models, service integrations
        4 - application level (system-wide): application architecture, system design
        5 - enterprise level (cross-system): distributed systems, cloud infrastructure, scalability
`,wF=Zt`
    Software development expertise required:
        0 - n/a
        1 - junior (1 year)
        2 - mid (1-3 years)
        3 - senior (3-5 years)
        4 - staff (5-10 years)
        5 - principal (10+) years
`,SF=Zt`
    Volume of sourcecode changes, lines of code (LoC):
        0 - n/a
        1 - 20-50 LoC, small change
        2 - 100-200 LoC, single commit
        3 - 500-1000 LoC, multiple commits, single pull request (PR)
        4 - 2000-5000 LoC, multiple PRs, dedicated branch, small repository
        5 - above 10000 LoC, large repository or multiple repositories
`,EF=Zt`
    Projected effort:
        0 - n/a
        1 - minutes
        2 - hours
        3 - days
        4 - weeks
        5 - months
`,TF=Zt`
    Development budget estimate:
        0 - n/a
        1 - very low
        2 - $20-200
        3 - $200-2000
        4 - $2000-20000
        5 - above $20000
`,IF=Zt`
    true if task requirements need further clarification or refinement
`,NF=Zt`
    true if solution is not trivial and will benefit from detailed design
`,CF=Zt`
    true to split the task into smaller, manageable steps
`,xF=T.object({ambiguity:T.number().describe(hF),incompleteness:T.number().describe(gF),imprecision:T.number().describe(_F),functional:T.number().describe(yF),architectural:T.number().describe(bF),expertise:T.number().describe(wF),sourcecode:T.number().describe(SF),effort:T.number().describe(EF),budget:T.number().describe(TF),requirements:T.boolean().describe(IF),design:T.boolean().describe(NF),planning:T.boolean().describe(CF)}),DF=()=>({ambiguity:1,incompleteness:1,imprecision:1,functional:1,architectural:1,expertise:1,sourcecode:1,effort:1,budget:1,requirements:!1,design:!1,planning:!1});function RF(t,{effort:e,budget:r}){if(t.code=="invalid_type"){let n=t.path[0];if(t.received=="undefined"&&n=="sourcecode"&&(e||r))return{sourcecode:e||r}}}async function OF(t,{log:e}){let r=_=>_.toFixed(1),[n,i,a]=SC(t),l=`${r(n)} ${r(i)} ${r(a)} `,v=`${t.requirements} ${t.design} ${t.planning}`;return e.info(l+v,{vagueness:n,complexity:i,workload:a,...t,event:"tool.evaluation"}),"ok"}function SC(t){let e=(t.ambiguity+t.incompleteness+t.imprecision)/3,r=(t.architectural+t.functional+t.expertise)/3,n=(t.effort+t.sourcecode+t.budget)/3;return[e,r,n]}var P_={name:wC,description:mF,parameters:xF,execute:OF,retry:vF,fallback:DF,repair:RF,compute:SC};var TC=Symbol("Let zodToJsonSchema decide on which parser to use");var EC={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},IC=t=>typeof t=="string"?{...EC,name:t}:{...EC,...t};var NC=t=>{let e=IC(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}};function yS(t,e,r,n){n!=null&&n.errorMessages&&r&&(t.errorMessage={...t.errorMessage,[e]:r})}function gn(t,e,r,n,i){t[e]=r,yS(t,e,n,i)}function CC(){return{}}function xC(t,e){var n,i,a;let r={type:"array"};return(n=t.type)!=null&&n._def&&((a=(i=t.type)==null?void 0:i._def)==null?void 0:a.typeName)!==ze.ZodAny&&(r.items=gr(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&gn(r,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&gn(r,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(gn(r,"minItems",t.exactLength.value,t.exactLength.message,e),gn(r,"maxItems",t.exactLength.value,t.exactLength.message,e)),r}function DC(t,e){let r={type:"integer",format:"int64"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?gn(r,"minimum",n.value,n.message,e):gn(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),gn(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?gn(r,"maximum",n.value,n.message,e):gn(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),gn(r,"maximum",n.value,n.message,e));break;case"multipleOf":gn(r,"multipleOf",n.value,n.message,e);break}return r}function RC(){return{type:"boolean"}}function mb(t,e){return gr(t.type._def,e)}var OC=(t,e)=>gr(t.innerType._def,e);function bS(t,e,r){let n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((i,a)=>bS(t,e,i))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return kF(t,e)}}var kF=(t,e)=>{let r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(let n of t.checks)switch(n.kind){case"min":gn(r,"minimum",n.value,n.message,e);break;case"max":gn(r,"maximum",n.value,n.message,e);break}return r};function kC(t,e){return{...gr(t.innerType._def,e),default:t.defaultValue()}}function AC(t,e){return e.effectStrategy==="input"?gr(t.schema._def,e):{}}function PC(t){return{type:"string",enum:Array.from(t.values)}}var AF=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function MC(t,e){let r=[gr(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),gr(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a),n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,i=[];return r.forEach(a=>{if(AF(a))i.push(...a.allOf),a.unevaluatedProperties===void 0&&(n=void 0);else{let l=a;if("additionalProperties"in a&&a.additionalProperties===!1){let{additionalProperties:v,..._}=a;l=_}else n=void 0;i.push(l)}}),i.length?{allOf:i,...n}:void 0}function LC(t,e){let r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}var wS,wm={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(wS===void 0&&(wS=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),wS),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function vb(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":gn(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e);break;case"max":gn(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Sm(r,"email",n.message,e);break;case"format:idn-email":Sm(r,"idn-email",n.message,e);break;case"pattern:zod":tc(r,wm.email,n.message,e);break}break;case"url":Sm(r,"uri",n.message,e);break;case"uuid":Sm(r,"uuid",n.message,e);break;case"regex":tc(r,n.regex,n.message,e);break;case"cuid":tc(r,wm.cuid,n.message,e);break;case"cuid2":tc(r,wm.cuid2,n.message,e);break;case"startsWith":tc(r,RegExp(`^${SS(n.value,e)}`),n.message,e);break;case"endsWith":tc(r,RegExp(`${SS(n.value,e)}$`),n.message,e);break;case"datetime":Sm(r,"date-time",n.message,e);break;case"date":Sm(r,"date",n.message,e);break;case"time":Sm(r,"time",n.message,e);break;case"duration":Sm(r,"duration",n.message,e);break;case"length":gn(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e),gn(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"includes":{tc(r,RegExp(SS(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&Sm(r,"ipv4",n.message,e),n.version!=="v4"&&Sm(r,"ipv6",n.message,e);break}case"base64url":tc(r,wm.base64url,n.message,e);break;case"jwt":tc(r,wm.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&tc(r,wm.ipv4Cidr,n.message,e),n.version!=="v4"&&tc(r,wm.ipv6Cidr,n.message,e);break}case"emoji":tc(r,wm.emoji(),n.message,e);break;case"ulid":{tc(r,wm.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Sm(r,"binary",n.message,e);break}case"contentEncoding:base64":{gn(r,"contentEncoding","base64",n.message,e);break}case"pattern:zod":{tc(r,wm.base64,n.message,e);break}}break}case"nanoid":tc(r,wm.nanoid,n.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function SS(t,e){return e.patternStrategy==="escape"?MF(t):t}var PF=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function MF(t){let e="";for(let r=0;r<t.length;r++)PF.has(t[r])||(e+="\\"),e+=t[r];return e}function Sm(t,e,r,n){var i;t.format||(i=t.anyOf)!=null&&i.some(a=>a.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):gn(t,"format",e,r,n)}function tc(t,e,r,n){var i;t.pattern||(i=t.allOf)!=null&&i.some(a=>a.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:FC(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):gn(t,"pattern",FC(e,n),r,n)}function FC(t,e){var _;if(!e.applyRegexFlags||!t.flags)return t.source;let r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},n=r.i?t.source.toLowerCase():t.source,i="",a=!1,l=!1,v=!1;for(let y=0;y<n.length;y++){if(a){i+=n[y],a=!1;continue}if(r.i){if(l){if(n[y].match(/[a-z]/)){v?(i+=n[y],i+=`${n[y-2]}-${n[y]}`.toUpperCase(),v=!1):n[y+1]==="-"&&((_=n[y+2])!=null&&_.match(/[a-z]/))?(i+=n[y],v=!0):i+=`${n[y]}${n[y].toUpperCase()}`;continue}}else if(n[y].match(/[a-z]/)){i+=`[${n[y]}${n[y].toUpperCase()}]`;continue}}if(r.m){if(n[y]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(n[y]==="$"){i+=`($|(?=[\r
]))`;continue}}if(r.s&&n[y]==="."){i+=l?`${n[y]}\r
`:`[${n[y]}\r
]`;continue}i+=n[y],n[y]==="\\"?a=!0:l&&n[y]==="]"?l=!1:!l&&n[y]==="["&&(l=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}function hb(t,e){var n,i,a,l,v,_;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((n=t.keyType)==null?void 0:n._def.typeName)===ze.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((y,C)=>({...y,[C]:gr(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",C]})??{}}),{}),additionalProperties:!1};let r={type:"object",additionalProperties:gr(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return r;if(((i=t.keyType)==null?void 0:i._def.typeName)===ze.ZodString&&((a=t.keyType._def.checks)!=null&&a.length)){let{type:y,...C}=vb(t.keyType._def,e);return{...r,propertyNames:C}}else{if(((l=t.keyType)==null?void 0:l._def.typeName)===ze.ZodEnum)return{...r,propertyNames:{enum:t.keyType._def.values}};if(((v=t.keyType)==null?void 0:v._def.typeName)===ze.ZodBranded&&t.keyType._def.type._def.typeName===ze.ZodString&&((_=t.keyType._def.type._def.checks)!=null&&_.length)){let{type:y,...C}=mb(t.keyType._def,e);return{...r,propertyNames:C}}}return r}function UC(t,e){if(e.mapStrategy==="record")return hb(t,e);let r=gr(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},n=gr(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function jC(t){let e=t.values,n=Object.keys(t.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),i=Array.from(new Set(n.map(a=>typeof a)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:n}}function YC(){return{not:{}}}function $C(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var by={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function qC(t,e){if(e.target==="openApi3")return BC(t,e);let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in by&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((i,a)=>{let l=by[a._def.typeName];return l&&!i.includes(l)?[...i,l]:i},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((i,a)=>{let l=typeof a._def.value;switch(l){case"string":case"number":case"boolean":return[...i,l];case"bigint":return[...i,"integer"];case"object":if(a._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(n.length===r.length){let i=n.filter((a,l,v)=>v.indexOf(a)===l);return{type:i.length>1?i:i[0],enum:r.reduce((a,l)=>a.includes(l._def.value)?a:[...a,l._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,i)=>[...n,...i._def.values.filter(a=>!n.includes(a))],[])};return BC(t,e)}var BC=(t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,i)=>gr(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function HC(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:by[t.innerType._def.typeName],nullable:!0}:{type:[by[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let n=gr(t.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let r=gr(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function GC(t,e){let r={type:"number"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"int":r.type="integer",yS(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?gn(r,"minimum",n.value,n.message,e):gn(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),gn(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?gn(r,"maximum",n.value,n.message,e):gn(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),gn(r,"maximum",n.value,n.message,e));break;case"multipleOf":gn(r,"multipleOf",n.value,n.message,e);break}return r}function LF(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":gr(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":gr(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function VC(t,e){let r=e.target==="openAi",n={type:"object",...Object.entries(t.shape()).reduce((i,[a,l])=>{if(l===void 0||l._def===void 0)return i;let v=l.isOptional();v&&r&&(l instanceof ef&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),v=!1);let _=gr(l._def,{...e,currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]});return _===void 0?i:{properties:{...i.properties,[a]:_},required:v?i.required:[...i.required,a]}},{properties:{},required:[]}),additionalProperties:LF(t,e)};return n.required.length||delete n.required,n}var zC=(t,e)=>{var n;if(e.currentPath.toString()===((n=e.propertyPath)==null?void 0:n.toString()))return gr(t.innerType._def,e);let r=gr(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}};var WC=(t,e)=>{if(e.pipeStrategy==="input")return gr(t.in._def,e);if(e.pipeStrategy==="output")return gr(t.out._def,e);let r=gr(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=gr(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(i=>i!==void 0)}};function KC(t,e){return gr(t.type._def,e)}function JC(t,e){let n={type:"array",uniqueItems:!0,items:gr(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&gn(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&gn(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}function ZC(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>gr(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:gr(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>gr(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function XC(){return{not:{}}}function QC(){return{}}var ex=(t,e)=>gr(t.innerType._def,e);var tx=(t,e,r)=>{switch(e){case ze.ZodString:return vb(t,r);case ze.ZodNumber:return GC(t,r);case ze.ZodObject:return VC(t,r);case ze.ZodBigInt:return DC(t,r);case ze.ZodBoolean:return RC();case ze.ZodDate:return bS(t,r);case ze.ZodUndefined:return XC();case ze.ZodNull:return $C(r);case ze.ZodArray:return xC(t,r);case ze.ZodUnion:case ze.ZodDiscriminatedUnion:return qC(t,r);case ze.ZodIntersection:return MC(t,r);case ze.ZodTuple:return ZC(t,r);case ze.ZodRecord:return hb(t,r);case ze.ZodLiteral:return LC(t,r);case ze.ZodEnum:return PC(t);case ze.ZodNativeEnum:return jC(t);case ze.ZodNullable:return HC(t,r);case ze.ZodOptional:return zC(t,r);case ze.ZodMap:return UC(t,r);case ze.ZodSet:return JC(t,r);case ze.ZodLazy:return()=>t.getter()._def;case ze.ZodPromise:return KC(t,r);case ze.ZodNaN:case ze.ZodNever:return YC();case ze.ZodEffects:return AC(t,r);case ze.ZodAny:return CC();case ze.ZodUnknown:return QC();case ze.ZodDefault:return kC(t,r);case ze.ZodBranded:return mb(t,r);case ze.ZodReadonly:return ex(t,r);case ze.ZodCatch:return OC(t,r);case ze.ZodPipeline:return WC(t,r);case ze.ZodFunction:case ze.ZodVoid:case ze.ZodSymbol:return;default:return(n=>{})(e)}};function gr(t,e,r=!1){var v;let n=e.seen.get(t);if(e.override){let _=(v=e.override)==null?void 0:v.call(e,t,e,n,r);if(_!==TC)return _}if(n&&!r){let _=FF(n,e);if(_!==void 0)return _}let i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);let a=tx(t,t.typeName,e),l=typeof a=="function"?gr(a(),e):a;if(l&&jF(t,e,l),e.postProcess){let _=e.postProcess(l,t,e);return i.jsonSchema=l,_}return i.jsonSchema=l,l}var FF=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:UF(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},UF=(t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},jF=(t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r);var rx=(t,e)=>{let r=NC(e),n=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((_,[y,C])=>({..._,[y]:gr(C._def,{...r,currentPath:[...r.basePath,r.definitionPath,y]},!0)??{}}),{}):void 0,i=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,a=gr(t._def,i===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,i]},!1)??{},l=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;l!==void 0&&(a.title=l);let v=i===void 0?n?{...a,[r.definitionPath]:n}:a:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,i].join("/"),[r.definitionPath]:{...n,[i]:a}};return r.target==="jsonSchema7"?v.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(v.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in v||"oneOf"in v||"allOf"in v||"type"in v&&Array.isArray(v.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),v};var nx=rx;var wy={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},Sy={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},Ey={code:"4",name:"assistant_message",parse:t=>{if(t==null||typeof t!="object"||!("id"in t)||!("role"in t)||!("content"in t)||typeof t.id!="string"||typeof t.role!="string"||t.role!=="assistant"||!Array.isArray(t.content)||!t.content.every(e=>e!=null&&typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&e.text!=null&&typeof e.text=="object"&&"value"in e.text&&typeof e.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:t}}},Ty={code:"5",name:"assistant_control_data",parse:t=>{if(t==null||typeof t!="object"||!("threadId"in t)||!("messageId"in t)||typeof t.threadId!="string"||typeof t.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:t.threadId,messageId:t.messageId}}}},Iy={code:"6",name:"data_message",parse:t=>{if(t==null||typeof t!="object"||!("role"in t)||!("data"in t)||typeof t.role!="string"||t.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:t}}},YF=[wy,Sy,Ey,Ty,Iy],dz={[wy.code]:wy,[Sy.code]:Sy,[Ey.code]:Ey,[Ty.code]:Ty,[Iy.code]:Iy},pz={[wy.name]:wy.code,[Sy.name]:Sy.code,[Ey.name]:Ey.code,[Ty.name]:Ty.code,[Iy.name]:Iy.code},mz=YF.map(t=>t.code);function $F(t){let e=["ROOT"],r=-1,n=null;function i(_,y,C){switch(_){case'"':{r=y,e.pop(),e.push(C),e.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=y,n=y,e.pop(),e.push(C),e.push("INSIDE_LITERAL");break}case"-":{e.pop(),e.push(C),e.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=y,e.pop(),e.push(C),e.push("INSIDE_NUMBER");break}case"{":{r=y,e.pop(),e.push(C),e.push("INSIDE_OBJECT_START");break}case"[":{r=y,e.pop(),e.push(C),e.push("INSIDE_ARRAY_START");break}}}function a(_,y){switch(_){case",":{e.pop(),e.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=y,e.pop();break}}}function l(_,y){switch(_){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=y,e.pop();break}}}for(let _=0;_<t.length;_++){let y=t[_];switch(e[e.length-1]){case"ROOT":i(y,_,"FINISH");break;case"INSIDE_OBJECT_START":{switch(y){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}case"}":{r=_,e.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(y){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(y){case'"':{e.pop(),e.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(y){case":":{e.pop(),e.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{i(y,_,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{a(y,_);break}case"INSIDE_STRING":{switch(y){case'"':{e.pop(),r=_;break}case"\\":{e.push("INSIDE_STRING_ESCAPE");break}default:r=_}break}case"INSIDE_ARRAY_START":{switch(y){case"]":{r=_,e.pop();break}default:{r=_,i(y,_,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(y){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=_,e.pop();break}default:{r=_;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{i(y,_,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{e.pop(),r=_;break}case"INSIDE_NUMBER":{switch(y){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=_;break}case"e":case"E":case"-":case".":break;case",":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&l(y,_),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(y,_);break}case"}":{e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(y,_);break}case"]":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&l(y,_);break}default:{e.pop();break}}break}case"INSIDE_LITERAL":{let U=t.substring(n,_+1);!"false".startsWith(U)&&!"true".startsWith(U)&&!"null".startsWith(U)?(e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?a(y,_):e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&l(y,_)):r=_;break}}}let v=t.slice(0,r+1);for(let _=e.length-1;_>=0;_--)switch(e[_]){case"INSIDE_STRING":{v+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{v+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{v+="]";break}case"INSIDE_LITERAL":{let C=t.substring(n,t.length);"true".startsWith(C)?v+="true".slice(C.length):"false".startsWith(C)?v+="false".slice(C.length):"null".startsWith(C)&&(v+="null".slice(C.length))}}return v}function ix(t){if(t===void 0)return{value:void 0,state:"undefined-input"};let e=vv({text:t});return e.success?{value:e.value,state:"successful-parse"}:(e=vv({text:$F(t)}),e.success?{value:e.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var BF={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},qF={code:"2",name:"data",parse:t=>{if(!Array.isArray(t))throw new Error('"data" parts expect an array value.');return{type:"data",value:t}}},HF={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},GF={code:"8",name:"message_annotations",parse:t=>{if(!Array.isArray(t))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:t}}},VF={code:"9",name:"tool_call",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string"||!("args"in t)||typeof t.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:t}}},zF={code:"a",name:"tool_result",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("result"in t))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:t}}},WF={code:"b",name:"tool_call_streaming_start",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:t}}},KF={code:"c",name:"tool_call_delta",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("argsTextDelta"in t)||typeof t.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:t}}},JF={code:"d",name:"finish_message",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');let e={finishReason:t.finishReason};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),{type:"finish_message",value:e}}},ZF={code:"e",name:"finish_step",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');let e={finishReason:t.finishReason,isContinued:!1};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),"isContinued"in t&&typeof t.isContinued=="boolean"&&(e.isContinued=t.isContinued),{type:"finish_step",value:e}}},XF={code:"f",name:"start_step",parse:t=>{if(t==null||typeof t!="object"||!("messageId"in t)||typeof t.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:t.messageId}}}},QF={code:"g",name:"reasoning",parse:t=>{if(typeof t!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:t}}},e2={code:"h",name:"source",parse:t=>{if(t==null||typeof t!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:t}}},t2={code:"i",name:"redacted_reasoning",parse:t=>{if(t==null||typeof t!="object"||!("data"in t)||typeof t.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:t.data}}}},r2={code:"j",name:"reasoning_signature",parse:t=>{if(t==null||typeof t!="object"||!("signature"in t)||typeof t.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:t.signature}}}},gb=[BF,qF,HF,GF,VF,zF,WF,KF,JF,ZF,XF,QF,e2,t2,r2],hz=Object.fromEntries(gb.map(t=>[t.code,t])),gz=Object.fromEntries(gb.map(t=>[t.name,t.code])),_z=gb.map(t=>t.code);function Hs(t,e){let r=gb.find(n=>n.name===t);if(!r)throw new Error(`Invalid stream part type: ${t}`);return`${r.code}:${JSON.stringify(e)}
`}function n2(t,e){var r;let n=(r=e==null?void 0:e.useReferences)!=null?r:!1;return i2(nx(t,{$refStrategy:n?"root":"none",target:"jsonSchema7"}),{validate:i=>{let a=t.safeParse(i);return a.success?{success:!0,value:a.data}:{success:!1,error:a.error}}})}var ES=Symbol.for("vercel.ai.schema");function i2(t,{validate:e}={}){return{[ES]:!0,_type:void 0,[py]:!0,jsonSchema:t,validate:e}}function a2(t){return typeof t=="object"&&t!==null&&ES in t&&t[ES]===!0&&"jsonSchema"in t&&"validate"in t}function Wg(t){return a2(t)?t:n2(t)}var ax=typeof globalThis=="object"?globalThis:global;var vh="1.9.0";var ox=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function o2(t){var e=new Set([t]),r=new Set,n=t.match(ox);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(_){return _===t};function a(v){return r.add(v),!1}function l(v){return e.add(v),!0}return function(_){if(e.has(_))return!0;if(r.has(_))return!1;var y=_.match(ox);if(!y)return a(_);var C={major:+y[1],minor:+y[2],patch:+y[3],prerelease:y[4]};return C.prerelease!=null||i.major!==C.major?a(_):i.major===0?i.minor===C.minor&&i.patch<=C.patch?l(_):a(_):i.minor<=C.minor?l(_):a(_)}}var sx=o2(vh);var s2=vh.split(".")[0],Ny=Symbol.for("opentelemetry.js.api."+s2),Cy=ax;function M_(t,e,r,n){var i;n===void 0&&(n=!1);var a=Cy[Ny]=(i=Cy[Ny])!==null&&i!==void 0?i:{version:vh};if(!n&&a[t]){var l=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(l.stack||l.message),!1}if(a.version!==vh){var l=new Error("@opentelemetry/api: Registration of version v"+a.version+" for "+t+" does not match previously registered API v"+vh);return r.error(l.stack||l.message),!1}return a[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+vh+"."),!0}function hh(t){var e,r,n=(e=Cy[Ny])===null||e===void 0?void 0:e.version;if(!(!n||!sx(n)))return(r=Cy[Ny])===null||r===void 0?void 0:r[t]}function L_(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+vh+".");var r=Cy[Ny];r&&delete r[t]}var u2=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],l;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(v){l={error:v}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return a},l2=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},ux=function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return xy("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return xy("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return xy("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return xy("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return xy("verbose",this._namespace,e)},t}();function xy(t,e,r){var n=hh("diag");if(n)return r.unshift(e),n[t].apply(n,l2([],u2(r),!1))}var rc;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(rc||(rc={}));function lx(t,e){t<rc.NONE?t=rc.NONE:t>rc.ALL&&(t=rc.ALL),e=e||{};function r(n,i){var a=e[n];return typeof a=="function"&&t>=i?a.bind(e):function(){}}return{error:r("error",rc.ERROR),warn:r("warn",rc.WARN),info:r("info",rc.INFO),debug:r("debug",rc.DEBUG),verbose:r("verbose",rc.VERBOSE)}}var c2=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],l;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(v){l={error:v}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return a},f2=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},d2="diag",F_=function(){function t(){function e(i){return function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];var v=hh("diag");if(v)return v[i].apply(v,f2([],c2(a),!1))}}var r=this,n=function(i,a){var l,v,_;if(a===void 0&&(a={logLevel:rc.INFO}),i===r){var y=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((l=y.stack)!==null&&l!==void 0?l:y.message),!1}typeof a=="number"&&(a={logLevel:a});var C=hh("diag"),U=lx((v=a.logLevel)!==null&&v!==void 0?v:rc.INFO,i);if(C&&!a.suppressOverrideMessage){var W=(_=new Error().stack)!==null&&_!==void 0?_:"<failed to generate stacktrace>";C.warn("Current logger will be overwritten from "+W),U.warn("Current logger will overwrite one already registered from "+W)}return M_("diag",U,r,!0)};r.setLogger=n,r.disable=function(){L_(d2,r)},r.createComponentLogger=function(i){return new ux(i)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}();function cx(t){return Symbol.for(t)}var p2=function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,i){var a=new t(r._currentContext);return a._currentContext.set(n,i),a},r.deleteValue=function(n){var i=new t(r._currentContext);return i._currentContext.delete(n),i}}return t}(),fx=new p2;var m2=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],l;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(v){l={error:v}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return a},v2=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},dx=function(){function t(){}return t.prototype.active=function(){return fx},t.prototype.with=function(e,r,n){for(var i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];return r.call.apply(r,v2([n],m2(i),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}();var h2=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],l;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(v){l={error:v}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return a},g2=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},TS="context",_2=new dx,_b=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return M_(TS,e,F_.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var i,a=[],l=3;l<arguments.length;l++)a[l-3]=arguments[l];return(i=this._getContextManager()).with.apply(i,g2([e,r,n],h2(a),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return hh(TS)||_2},t.prototype.disable=function(){this._getContextManager().disable(),L_(TS,F_.instance())},t}();var yb;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(yb||(yb={}));var IS="0000000000000000",NS="00000000000000000000000000000000",px={traceId:NS,spanId:IS,traceFlags:yb.NONE};var ng=function(){function t(e){e===void 0&&(e=px),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.addLink=function(e){return this},t.prototype.addLinks=function(e){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t}();var CS=cx("OpenTelemetry Context Key SPAN");function bb(t){return t.getValue(CS)||void 0}function mx(){return bb(_b.getInstance().active())}function Dy(t,e){return t.setValue(CS,e)}function vx(t){return t.deleteValue(CS)}function hx(t,e){return Dy(t,new ng(e))}function wb(t){var e;return(e=bb(t))===null||e===void 0?void 0:e.spanContext()}var y2=/^([0-9a-f]{32})$/i,b2=/^[0-9a-f]{16}$/i;function w2(t){return y2.test(t)&&t!==NS}function S2(t){return b2.test(t)&&t!==IS}function Sb(t){return w2(t.traceId)&&S2(t.spanId)}function gx(t){return new ng(t)}var xS=_b.getInstance(),Eb=function(){function t(){}return t.prototype.startSpan=function(e,r,n){n===void 0&&(n=xS.active());var i=!!(r!=null&&r.root);if(i)return new ng;var a=n&&wb(n);return E2(a)&&Sb(a)?new ng(a):new ng},t.prototype.startActiveSpan=function(e,r,n,i){var a,l,v;if(!(arguments.length<2)){arguments.length===2?v=r:arguments.length===3?(a=r,v=n):(a=r,l=n,v=i);var _=l??xS.active(),y=this.startSpan(e,a,_),C=Dy(_,y);return xS.with(C,v,void 0,y)}},t}();function E2(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var T2=new Eb,_x=function(){function t(e,r,n,i){this._provider=e,this.name=r,this.version=n,this.options=i}return t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,i){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):T2},t}();var yx=function(){function t(){}return t.prototype.getTracer=function(e,r,n){return new Eb},t}();var I2=new yx,DS=function(){function t(){}return t.prototype.getTracer=function(e,r,n){var i;return(i=this.getDelegateTracer(e,r,n))!==null&&i!==void 0?i:new _x(this,e,r,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:I2},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(e,r,n)},t}();var U_;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(U_||(U_={}));var RS="trace",bx=function(){function t(){this._proxyTracerProvider=new DS,this.wrapSpanContext=gx,this.isSpanContextValid=Sb,this.deleteSpan=vx,this.getSpan=bb,this.getActiveSpan=mx,this.getSpanContext=wb,this.setSpan=Dy,this.setSpanContext=hx}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=M_(RS,this._proxyTracerProvider,F_.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return hh(RS)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){L_(RS,F_.instance()),this._proxyTracerProvider=new DS},t}();var OS=bx.getInstance();var N2=Object.defineProperty,US=(t,e)=>{for(var r in e)N2(t,r,{get:e[r],enumerable:!0})};function Ib(t,{contentType:e,dataStreamVersion:r}){let n=new Headers(t??{});return n.has("Content-Type")||n.set("Content-Type",e),r!==void 0&&n.set("X-Vercel-AI-Data-Stream",r),n}function wx(t,{contentType:e,dataStreamVersion:r}){let n={};if(t!=null)for(let[i,a]of Object.entries(t))n[i]=a;return n["Content-Type"]==null&&(n["Content-Type"]=e),r!==void 0&&(n["X-Vercel-AI-Data-Stream"]=r),n}function Sx({response:t,status:e,statusText:r,headers:n,stream:i}){t.writeHead(e??200,r,n);let a=i.getReader();(async()=>{try{for(;;){let{done:v,value:_}=await a.read();if(v)break;t.write(_)}}catch(v){throw v}finally{t.end()}})()}var Rx="AI_InvalidArgumentError",Ox=`vercel.ai.error.${Rx}`,C2=Symbol.for(Ox),kx,Em=class extends Ot{constructor({parameter:t,value:e,message:r}){super({name:Rx,message:`Invalid argument for parameter ${t}: ${r}`}),this[kx]=!0,this.parameter=t,this.value=e}static isInstance(t){return Ot.hasMarker(t,Ox)}};kx=C2;var Ax="AI_RetryError",Px=`vercel.ai.error.${Ax}`,x2=Symbol.for(Px),Mx,Ex=class extends Ot{constructor({message:t,reason:e,errors:r}){super({name:Ax,message:t}),this[Mx]=!0,this.reason=e,this.errors=r,this.lastError=r[r.length-1]}static isInstance(t){return Ot.hasMarker(t,Px)}};Mx=x2;var D2=({maxRetries:t=2,initialDelayInMs:e=2e3,backoffFactor:r=2}={})=>async n=>Lx(n,{maxRetries:t,delayInMs:e,backoffFactor:r});async function Lx(t,{maxRetries:e,delayInMs:r,backoffFactor:n},i=[]){try{return await t()}catch(a){if(dy(a)||e===0)throw a;let l=wN(a),v=[...i,a],_=v.length;if(_>e)throw new Ex({message:`Failed after ${_} attempts. Last error: ${l}`,reason:"maxRetriesExceeded",errors:v});if(a instanceof Error&&Qc.isInstance(a)&&a.isRetryable===!0&&_<=e)return await bN(r),Lx(t,{maxRetries:e,delayInMs:n*r,backoffFactor:n},v);throw _===1?a:new Ex({message:`Failed after ${_} attempts with non-retryable error: '${l}'`,reason:"errorNotRetryable",errors:v})}}function R2({maxRetries:t}){if(t!=null){if(!Number.isInteger(t))throw new Em({parameter:"maxRetries",value:t,message:"maxRetries must be an integer"});if(t<0)throw new Em({parameter:"maxRetries",value:t,message:"maxRetries must be >= 0"})}let e=t??2;return{maxRetries:e,retry:D2({maxRetries:e})}}function MS({operationId:t,telemetry:e}){return{"operation.name":`${t}${(e==null?void 0:e.functionId)!=null?` ${e.functionId}`:""}`,"resource.name":e==null?void 0:e.functionId,"ai.operationId":t,"ai.telemetry.functionId":e==null?void 0:e.functionId}}function O2({model:t,settings:e,telemetry:r,headers:n}){var i;return{"ai.model.provider":t.provider,"ai.model.id":t.modelId,...Object.entries(e).reduce((a,[l,v])=>(a[`ai.settings.${l}`]=v,a),{}),...Object.entries((i=r==null?void 0:r.metadata)!=null?i:{}).reduce((a,[l,v])=>(a[`ai.telemetry.metadata.${l}`]=v,a),{}),...Object.entries(n??{}).reduce((a,[l,v])=>(v!==void 0&&(a[`ai.request.headers.${l}`]=v),a),{})}}var k2={startSpan(){return Tb},startActiveSpan(t,e,r,n){if(typeof e=="function")return e(Tb);if(typeof r=="function")return r(Tb);if(typeof n=="function")return n(Tb)}},Tb={spanContext(){return A2},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},A2={traceId:"",spanId:"",traceFlags:0};function P2({isEnabled:t=!1,tracer:e}={}){return t?e||OS.getTracer("ai"):k2}function LS({name:t,tracer:e,attributes:r,fn:n,endWhenDone:i=!0}){return e.startActiveSpan(t,{attributes:r},async a=>{try{let l=await n(a);return i&&a.end(),l}catch(l){try{l instanceof Error?(a.recordException({name:l.name,message:l.message,stack:l.stack}),a.setStatus({code:U_.ERROR,message:l.message})):a.setStatus({code:U_.ERROR})}finally{a.end()}throw l}})}function j_({telemetry:t,attributes:e}){return(t==null?void 0:t.isEnabled)!==!0?{}:Object.entries(e).reduce((r,[n,i])=>{if(i===void 0)return r;if(typeof i=="object"&&"input"in i&&typeof i.input=="function"){if((t==null?void 0:t.recordInputs)===!1)return r;let a=i.input();return a===void 0?r:{...r,[n]:a}}if(typeof i=="object"&&"output"in i&&typeof i.output=="function"){if((t==null?void 0:t.recordOutputs)===!1)return r;let a=i.output();return a===void 0?r:{...r,[n]:a}}return{...r,[n]:i}},{})}var M2="AI_NoImageGeneratedError",L2=`vercel.ai.error.${M2}`,F2=Symbol.for(L2),U2;U2=F2;var Fx="AI_NoObjectGeneratedError",Ux=`vercel.ai.error.${Fx}`,j2=Symbol.for(Ux),jx,Tx=class extends Ot{constructor({message:t="No object generated.",cause:e,text:r,response:n,usage:i}){super({name:Fx,message:t,cause:e}),this[jx]=!0,this.text=r,this.response=n,this.usage=i}static isInstance(t){return Ot.hasMarker(t,Ux)}};jx=j2;var Yx="AI_DownloadError",$x=`vercel.ai.error.${Yx}`,Y2=Symbol.for($x),Bx,kS=class extends Ot{constructor({url:t,statusCode:e,statusText:r,cause:n,message:i=n==null?`Failed to download ${t}: ${e} ${r}`:`Failed to download ${t}: ${n}`}){super({name:Yx,message:i,cause:n}),this[Bx]=!0,this.url=t,this.statusCode=e,this.statusText=r}static isInstance(t){return Ot.hasMarker(t,$x)}};Bx=Y2;async function $2({url:t,fetchImplementation:e=fetch}){var r;let n=t.toString();try{let i=await e(n);if(!i.ok)throw new kS({url:n,statusCode:i.status,statusText:i.statusText});return{data:new Uint8Array(await i.arrayBuffer()),mimeType:(r=i.headers.get("content-type"))!=null?r:void 0}}catch(i){throw kS.isInstance(i)?i:new kS({url:n,cause:i})}}var B2=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}];function q2(t){for(let{bytes:e,mimeType:r}of B2)if(t.length>=e.length&&e.every((n,i)=>t[i]===n))return r}var qx="AI_InvalidDataContentError",Hx=`vercel.ai.error.${qx}`,H2=Symbol.for(Hx),Gx,Ix=class extends Ot{constructor({content:t,cause:e,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof t}.`}){super({name:qx,message:r,cause:e}),this[Gx]=!0,this.content=t}static isInstance(t){return Ot.hasMarker(t,Hx)}};Gx=H2;var Vx=T.union([T.string(),T.instanceof(Uint8Array),T.instanceof(ArrayBuffer),T.custom(t=>{var e,r;return(r=(e=globalThis.Buffer)==null?void 0:e.isBuffer(t))!=null?r:!1},{message:"Must be a Buffer"})]);function G2(t){return typeof t=="string"?t:t instanceof ArrayBuffer?_m(new Uint8Array(t)):_m(t)}function Nb(t){if(t instanceof Uint8Array)return t;if(typeof t=="string")try{return SN(t)}catch(e){throw new Ix({message:"Invalid data content. Content string is not a base64-encoded media.",content:t,cause:e})}if(t instanceof ArrayBuffer)return new Uint8Array(t);throw new Ix({content:t})}function V2(t){try{return new TextDecoder().decode(t)}catch{throw new Error("Error decoding Uint8Array to text")}}var zx="AI_InvalidMessageRoleError",Wx=`vercel.ai.error.${zx}`,z2=Symbol.for(Wx),Kx,W2=class extends Ot{constructor({role:t,message:e=`Invalid message role: '${t}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:zx,message:e}),this[Kx]=!0,this.role=t}static isInstance(t){return Ot.hasMarker(t,Wx)}};Kx=z2;function K2(t){try{let[e,r]=t.split(",");return{mimeType:e.split(";")[0].split(":")[1],base64Content:r}}catch{return{mimeType:void 0,base64Content:void 0}}}async function J2({prompt:t,modelSupportsImageUrls:e=!0,modelSupportsUrl:r=()=>!1,downloadImplementation:n=$2}){let i=await X2(t.messages,n,e,r);return[...t.system!=null?[{role:"system",content:t.system}]:[],...t.messages.map(a=>Z2(a,i))]}function Z2(t,e){var r,n,i,a,l,v;let _=t.role;switch(_){case"system":return{role:"system",content:t.content,providerMetadata:(r=t.providerOptions)!=null?r:t.experimental_providerMetadata};case"user":return typeof t.content=="string"?{role:"user",content:[{type:"text",text:t.content}],providerMetadata:(n=t.providerOptions)!=null?n:t.experimental_providerMetadata}:{role:"user",content:t.content.map(y=>Q2(y,e)).filter(y=>y.type!=="text"||y.text!==""),providerMetadata:(i=t.providerOptions)!=null?i:t.experimental_providerMetadata};case"assistant":return typeof t.content=="string"?{role:"assistant",content:[{type:"text",text:t.content}],providerMetadata:(a=t.providerOptions)!=null?a:t.experimental_providerMetadata}:{role:"assistant",content:t.content.filter(y=>y.type!=="text"||y.text!=="").map(y=>{let{experimental_providerMetadata:C,providerOptions:U,...W}=y;return{...W,providerMetadata:U??C}}),providerMetadata:(l=t.providerOptions)!=null?l:t.experimental_providerMetadata};case"tool":return{role:"tool",content:t.content.map(y=>{var C;return{type:"tool-result",toolCallId:y.toolCallId,toolName:y.toolName,result:y.result,content:y.experimental_content,isError:y.isError,providerMetadata:(C=y.providerOptions)!=null?C:y.experimental_providerMetadata}}),providerMetadata:(v=t.providerOptions)!=null?v:t.experimental_providerMetadata};default:{let y=_;throw new W2({role:y})}}}async function X2(t,e,r,n){let i=t.filter(l=>l.role==="user").map(l=>l.content).filter(l=>Array.isArray(l)).flat().filter(l=>l.type==="image"||l.type==="file").filter(l=>!(l.type==="image"&&r===!0)).map(l=>l.type==="image"?l.image:l.data).map(l=>typeof l=="string"&&(l.startsWith("http:")||l.startsWith("https:"))?new URL(l):l).filter(l=>l instanceof URL).filter(l=>!n(l)),a=await Promise.all(i.map(async l=>({url:l,data:await e({url:l})})));return Object.fromEntries(a.map(({url:l,data:v})=>[l.toString(),v]))}function Q2(t,e){var r,n,i,a;if(t.type==="text")return{type:"text",text:t.text,providerMetadata:(r=t.providerOptions)!=null?r:t.experimental_providerMetadata};let l=t.mimeType,v,_,y,C=t.type;switch(C){case"image":v=t.image;break;case"file":v=t.data;break;default:throw new Error(`Unsupported part type: ${C}`)}try{_=typeof v=="string"?new URL(v):v}catch{_=v}if(_ instanceof URL)if(_.protocol==="data:"){let{mimeType:U,base64Content:W}=K2(_.toString());if(U==null||W==null)throw new Error(`Invalid data URL format in part ${C}`);l=U,y=Nb(W)}else{let U=e[_.toString()];U?(y=U.data,l??(l=U.mimeType)):y=_}else y=Nb(_);switch(C){case"image":return y instanceof Uint8Array&&(l=(n=q2(y))!=null?n:l),{type:"image",image:y,mimeType:l,providerMetadata:(i=t.providerOptions)!=null?i:t.experimental_providerMetadata};case"file":{if(l==null)throw new Error("Mime type is missing for file part");return{type:"file",data:y instanceof Uint8Array?G2(y):y,mimeType:l,providerMetadata:(a=t.providerOptions)!=null?a:t.experimental_providerMetadata}}}}function eU({maxTokens:t,temperature:e,topP:r,topK:n,presencePenalty:i,frequencyPenalty:a,stopSequences:l,seed:v}){if(t!=null){if(!Number.isInteger(t))throw new Em({parameter:"maxTokens",value:t,message:"maxTokens must be an integer"});if(t<1)throw new Em({parameter:"maxTokens",value:t,message:"maxTokens must be >= 1"})}if(e!=null&&typeof e!="number")throw new Em({parameter:"temperature",value:e,message:"temperature must be a number"});if(r!=null&&typeof r!="number")throw new Em({parameter:"topP",value:r,message:"topP must be a number"});if(n!=null&&typeof n!="number")throw new Em({parameter:"topK",value:n,message:"topK must be a number"});if(i!=null&&typeof i!="number")throw new Em({parameter:"presencePenalty",value:i,message:"presencePenalty must be a number"});if(a!=null&&typeof a!="number")throw new Em({parameter:"frequencyPenalty",value:a,message:"frequencyPenalty must be a number"});if(v!=null&&!Number.isInteger(v))throw new Em({parameter:"seed",value:v,message:"seed must be an integer"});return{maxTokens:t,temperature:e??0,topP:r,topK:n,presencePenalty:i,frequencyPenalty:a,stopSequences:l!=null&&l.length>0?l:void 0,seed:v}}function tU(t){var e,r,n;let i=[];for(let a of t){let l;try{l=new URL(a.url)}catch{throw new Error(`Invalid URL: ${a.url}`)}switch(l.protocol){case"http:":case"https:":{if((e=a.contentType)!=null&&e.startsWith("image/"))i.push({type:"image",image:l});else{if(!a.contentType)throw new Error("If the attachment is not an image, it must specify a content type");i.push({type:"file",data:l,mimeType:a.contentType})}break}case"data:":{let v,_,y;try{[v,_]=a.url.split(","),y=v.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${a.url}`)}if(y==null||_==null)throw new Error(`Invalid data URL format: ${a.url}`);if((r=a.contentType)!=null&&r.startsWith("image/"))i.push({type:"image",image:Nb(_)});else if((n=a.contentType)!=null&&n.startsWith("text/"))i.push({type:"text",text:V2(Nb(_))});else{if(!a.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");i.push({type:"file",data:_,mimeType:a.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${l.protocol}`)}}return i}var Jx="AI_MessageConversionError",Zx=`vercel.ai.error.${Jx}`,rU=Symbol.for(Zx),Xx,AS=class extends Ot{constructor({originalMessage:t,message:e}){super({name:Jx,message:e}),this[Xx]=!0,this.originalMessage=t}static isInstance(t){return Ot.hasMarker(t,Zx)}};Xx=rU;function nU(t,e){var r,n;let i=(r=e==null?void 0:e.tools)!=null?r:{},a=[];for(let v=0;v<t.length;v++){let _=t[v],y=v===t.length-1,{role:C,content:U,experimental_attachments:W}=_;switch(C){case"system":{a.push({role:"system",content:U});break}case"user":{a.push({role:"user",content:W?[{type:"text",text:U},...tU(W)]:U});break}case"assistant":{if(_.parts!=null){let V=function(){let Le=[];for(let Ee of _e)switch(Ee.type){case"text":Le.push({type:"text",text:Ee.text});break;case"reasoning":{for(let Be of Ee.details)switch(Be.type){case"text":Le.push({type:"reasoning",text:Be.text,signature:Be.signature});break;case"redacted":Le.push({type:"redacted-reasoning",data:Be.data});break}break}case"tool-invocation":Le.push({type:"tool-call",toolCallId:Ee.toolInvocation.toolCallId,toolName:Ee.toolInvocation.toolName,args:Ee.toolInvocation.args});break;default:{let Be=Ee;throw new Error(`Unsupported part: ${Be}`)}}a.push({role:"assistant",content:Le});let ge=_e.filter(Ee=>Ee.type==="tool-invocation").map(Ee=>Ee.toolInvocation);ge.length>0&&a.push({role:"tool",content:ge.map(Ee=>{if(!("result"in Ee))throw new AS({originalMessage:_,message:"ToolInvocation must have a result: "+JSON.stringify(Ee)});let{toolCallId:Be,toolName:We,result:st}=Ee,mt=i[We];return(mt==null?void 0:mt.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:Be,toolName:We,result:mt.experimental_toToolResultContent(st),experimental_content:mt.experimental_toToolResultContent(st)}:{type:"tool-result",toolCallId:Be,toolName:We,result:st}})}),_e=[],re=!1,J++};var l=V;let J=0,re=!1,_e=[];for(let Le of _.parts)switch(Le.type){case"reasoning":_e.push(Le);break;case"text":{re&&V(),_e.push(Le);break}case"tool-invocation":{((n=Le.toolInvocation.step)!=null?n:0)!==J&&V(),_e.push(Le),re=!0;break}}V();break}let K=_.toolInvocations;if(K==null||K.length===0){a.push({role:"assistant",content:U});break}let q=K.reduce((V,J)=>{var re;return Math.max(V,(re=J.step)!=null?re:0)},0);for(let V=0;V<=q;V++){let J=K.filter(re=>{var _e;return((_e=re.step)!=null?_e:0)===V});J.length!==0&&(a.push({role:"assistant",content:[...y&&U&&V===0?[{type:"text",text:U}]:[],...J.map(({toolCallId:re,toolName:_e,args:Le})=>({type:"tool-call",toolCallId:re,toolName:_e,args:Le}))]}),a.push({role:"tool",content:J.map(re=>{if(!("result"in re))throw new AS({originalMessage:_,message:"ToolInvocation must have a result: "+JSON.stringify(re)});let{toolCallId:_e,toolName:Le,result:ge}=re,Ee=i[Le];return(Ee==null?void 0:Ee.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:_e,toolName:Le,result:Ee.experimental_toToolResultContent(ge),experimental_content:Ee.experimental_toToolResultContent(ge)}:{type:"tool-result",toolCallId:_e,toolName:Le,result:ge}})}))}U&&!y&&a.push({role:"assistant",content:U});break}case"data":break;default:{let K=C;throw new AS({originalMessage:_,message:`Unsupported role: ${K}`})}}}return a}function iU(t){if(!Array.isArray(t))return"other";if(t.length===0)return"messages";let e=t.map(aU);return e.some(r=>r==="has-ui-specific-parts")?"ui-messages":e.every(r=>r==="has-core-specific-parts"||r==="message")?"messages":"other"}function aU(t){return typeof t=="object"&&t!==null&&(t.role==="function"||t.role==="data"||"toolInvocations"in t||"experimental_attachments"in t)?"has-ui-specific-parts":typeof t=="object"&&t!==null&&"content"in t&&(Array.isArray(t.content)||"experimental_providerMetadata"in t||"providerOptions"in t)?"has-core-specific-parts":typeof t=="object"&&t!==null&&"role"in t&&"content"in t&&typeof t.content=="string"&&["system","user","assistant","tool"].includes(t.role)?"message":"other"}var FS=T.lazy(()=>T.union([T.null(),T.string(),T.number(),T.boolean(),T.record(T.string(),FS),T.array(FS)])),Ya=T.record(T.string(),T.record(T.string(),FS)),oU=T.array(T.union([T.object({type:T.literal("text"),text:T.string()}),T.object({type:T.literal("image"),data:T.string(),mimeType:T.string().optional()})])),Qx=T.object({type:T.literal("text"),text:T.string(),providerOptions:Ya.optional(),experimental_providerMetadata:Ya.optional()}),sU=T.object({type:T.literal("image"),image:T.union([Vx,T.instanceof(URL)]),mimeType:T.string().optional(),providerOptions:Ya.optional(),experimental_providerMetadata:Ya.optional()}),uU=T.object({type:T.literal("file"),data:T.union([Vx,T.instanceof(URL)]),mimeType:T.string(),providerOptions:Ya.optional(),experimental_providerMetadata:Ya.optional()}),lU=T.object({type:T.literal("reasoning"),text:T.string(),providerOptions:Ya.optional(),experimental_providerMetadata:Ya.optional()}),cU=T.object({type:T.literal("redacted-reasoning"),data:T.string(),providerOptions:Ya.optional(),experimental_providerMetadata:Ya.optional()}),fU=T.object({type:T.literal("tool-call"),toolCallId:T.string(),toolName:T.string(),args:T.unknown(),providerOptions:Ya.optional(),experimental_providerMetadata:Ya.optional()}),dU=T.object({type:T.literal("tool-result"),toolCallId:T.string(),toolName:T.string(),result:T.unknown(),content:oU.optional(),isError:T.boolean().optional(),providerOptions:Ya.optional(),experimental_providerMetadata:Ya.optional()}),pU=T.object({role:T.literal("system"),content:T.string(),providerOptions:Ya.optional(),experimental_providerMetadata:Ya.optional()}),mU=T.object({role:T.literal("user"),content:T.union([T.string(),T.array(T.union([Qx,sU,uU]))]),providerOptions:Ya.optional(),experimental_providerMetadata:Ya.optional()}),vU=T.object({role:T.literal("assistant"),content:T.union([T.string(),T.array(T.union([Qx,lU,cU,fU]))]),providerOptions:Ya.optional(),experimental_providerMetadata:Ya.optional()}),hU=T.object({role:T.literal("tool"),content:T.array(dU),providerOptions:Ya.optional(),experimental_providerMetadata:Ya.optional()}),gU=T.union([pU,mU,vU,hU]);function _U({prompt:t,tools:e}){if(t.prompt==null&&t.messages==null)throw new mv({prompt:t,message:"prompt or messages must be defined"});if(t.prompt!=null&&t.messages!=null)throw new mv({prompt:t,message:"prompt and messages cannot be defined at the same time"});if(t.system!=null&&typeof t.system!="string")throw new mv({prompt:t,message:"system must be a string"});if(t.prompt!=null){if(typeof t.prompt!="string")throw new mv({prompt:t,message:"prompt must be a string"});return{type:"prompt",system:t.system,messages:[{role:"user",content:t.prompt}]}}if(t.messages!=null){let r=iU(t.messages);if(r==="other")throw new mv({prompt:t,message:"messages must be an array of CoreMessage or UIMessage"});let n=r==="ui-messages"?nU(t.messages,{tools:e}):t.messages,i=gm({value:n,schema:T.array(gU)});if(!i.success)throw new mv({prompt:t,message:"messages must be an array of CoreMessage or UIMessage",cause:i.error});return{type:"messages",messages:n,system:t.system}}throw new Error("unreachable")}function yU({promptTokens:t,completionTokens:e}){return{promptTokens:t,completionTokens:e,totalTokens:t+e}}function bU(t,e){return{promptTokens:t.promptTokens+e.promptTokens,completionTokens:t.completionTokens+e.completionTokens,totalTokens:t.totalTokens+e.totalTokens}}var wU="JSON schema:",SU="You MUST answer with a JSON object that matches the JSON schema above.",EU="You MUST answer with JSON.";function TU({prompt:t,schema:e,schemaPrefix:r=e!=null?wU:void 0,schemaSuffix:n=e!=null?SU:EU}){return[t!=null&&t.length>0?t:void 0,t!=null&&t.length>0?"":void 0,r,e!=null?JSON.stringify(e):void 0,n].filter(i=>i!=null).join(`
`)}function PS(t){let e=t.pipeThrough(new TransformStream);return e[Symbol.asyncIterator]=()=>{let r=e.getReader();return{async next(){let{done:n,value:i}=await r.read();return n?{done:!0,value:void 0}:{done:!1,value:i}}}},e}var X3=hm({prefix:"aiobj",size:24});var Qf=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((t,e)=>{this.status.type==="resolved"?t(this.status.value):this.status.type==="rejected"&&e(this.status.error),this._resolve=t,this._reject=e}),this.promise)}resolve(t){var e;this.status={type:"resolved",value:t},this.promise&&((e=this._resolve)==null||e.call(this,t))}reject(t){var e;this.status={type:"rejected",error:t},this.promise&&((e=this._reject)==null||e.call(this,t))}};function Nx(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}function IU(){let t=[],e=null,r=!1,n=Nx(),i=async()=>{if(r&&t.length===0){e==null||e.close();return}if(t.length===0)return n=Nx(),await n.promise,i();try{let{value:a,done:l}=await t[0].read();l?(t.shift(),t.length>0?await i():r&&(e==null||e.close())):e==null||e.enqueue(a)}catch(a){e==null||e.error(a),t.shift(),r&&t.length===0&&(e==null||e.close())}};return{stream:new ReadableStream({start(a){e=a},pull:i,async cancel(){for(let a of t)await a.cancel();t=[],r=!0}}),addStream:a=>{if(r)throw new Error("Cannot add inner stream: outer stream is closed");t.push(a.getReader()),n.resolve()},close:()=>{r=!0,n.resolve(),t.length===0&&(e==null||e.close())},terminate:()=>{r=!0,n.resolve(),t.forEach(a=>a.cancel()),t=[],e==null||e.close()}}}function NU(){var t,e;return(e=(t=globalThis==null?void 0:globalThis.performance)==null?void 0:t.now())!=null?e:Date.now()}var eW=hm({prefix:"aiobj",size:24});var eD="AI_NoOutputSpecifiedError",tD=`vercel.ai.error.${eD}`,CU=Symbol.for(tD),rD,xU=class extends Ot{constructor({message:t="No output specified."}={}){super({name:eD,message:t}),this[rD]=!0}static isInstance(t){return Ot.hasMarker(t,tD)}};rD=CU;var nD="AI_ToolExecutionError",iD=`vercel.ai.error.${nD}`,DU=Symbol.for(iD),aD,RU=class extends Ot{constructor({toolArgs:t,toolName:e,toolCallId:r,cause:n,message:i=`Error executing tool ${e}: ${Kh(n)}`}){super({name:nD,message:i,cause:n}),this[aD]=!0,this.toolArgs=t,this.toolName=e,this.toolCallId=r}static isInstance(t){return Ot.hasMarker(t,iD)}};aD=DU;function OU(t){return t!=null&&Object.keys(t).length>0}function kU({tools:t,toolChoice:e,activeTools:r}){return OU(t)?{tools:(r!=null?Object.entries(t).filter(([i])=>r.includes(i)):Object.entries(t)).map(([i,a])=>{let l=a.type;switch(l){case void 0:case"function":return{type:"function",name:i,description:a.description,parameters:Wg(a.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:i,id:a.id,args:a.args};default:{let v=l;throw new Error(`Unsupported tool type: ${v}`)}}}),toolChoice:e==null?{type:"auto"}:typeof e=="string"?{type:e}:{type:"tool",toolName:e.toolName}}:{tools:void 0,toolChoice:void 0}}var AU=/^([\s\S]*?)(\s+)(\S*)$/;function PU(t){let e=t.match(AU);return e?{prefix:e[1],whitespace:e[2],suffix:e[3]}:void 0}var oD="AI_InvalidToolArgumentsError",sD=`vercel.ai.error.${oD}`,MU=Symbol.for(sD),uD,Y_=class extends Ot{constructor({toolArgs:t,toolName:e,cause:r,message:n=`Invalid arguments for tool ${e}: ${Kh(r)}`}){super({name:oD,message:n,cause:r}),this[uD]=!0,this.toolArgs=t,this.toolName=e}static isInstance(t){return Ot.hasMarker(t,sD)}};uD=MU;var lD="AI_NoSuchToolError",cD=`vercel.ai.error.${lD}`,LU=Symbol.for(cD),fD,Kg=class extends Ot{constructor({toolName:t,availableTools:e=void 0,message:r=`Model tried to call unavailable tool '${t}'. ${e===void 0?"No tools are available.":`Available tools: ${e.join(", ")}.`}`}){super({name:lD,message:r}),this[fD]=!0,this.toolName=t,this.availableTools=e}static isInstance(t){return Ot.hasMarker(t,cD)}};fD=LU;var dD="AI_ToolCallRepairError",pD=`vercel.ai.error.${dD}`,FU=Symbol.for(pD),mD,jS=class extends Ot{constructor({cause:t,originalError:e,message:r=`Error repairing tool call: ${Kh(t)}`}){super({name:dD,message:r,cause:t}),this[mD]=!0,this.originalError=e}static isInstance(t){return Ot.hasMarker(t,pD)}};mD=FU;async function UU({toolCall:t,tools:e,repairToolCall:r,system:n,messages:i}){if(e==null)throw new Kg({toolName:t.toolName});try{return await Cx({toolCall:t,tools:e})}catch(a){if(r==null||!(Kg.isInstance(a)||Y_.isInstance(a)))throw a;let l=null;try{l=await r({toolCall:t,tools:e,parameterSchema:({toolName:v})=>Wg(e[v].parameters).jsonSchema,system:n,messages:i,error:a})}catch(v){throw new jS({cause:v,originalError:a})}if(l==null)throw a;return await Cx({toolCall:l,tools:e})}}async function Cx({toolCall:t,tools:e}){let r=t.toolName,n=e[r];if(n==null)throw new Kg({toolName:t.toolName,availableTools:Object.keys(e)});let i=Wg(n.parameters),a=t.args.trim()===""?gm({value:{},schema:i}):vv({text:t.args,schema:i});if(a.success===!1)throw new Y_({toolName:r,toolArgs:t.args,cause:a.error});return{type:"tool-call",toolCallId:t.toolCallId,toolName:r,args:a.value}}function xx({text:t="",reasoning:e,tools:r,toolCalls:n,toolResults:i,messageId:a,generateMessageId:l}){let v=[];return v.push({role:"assistant",content:[...e.map(_=>_.type==="text"?{..._,type:"reasoning"}:{..._,type:"redacted-reasoning"}),{type:"text",text:t},...n],id:a}),i.length>0&&v.push({role:"tool",id:l(),content:i.map(_=>{let y=r[_.toolName];return(y==null?void 0:y.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:_.toolCallId,toolName:_.toolName,result:y.experimental_toToolResultContent(_.result),experimental_content:y.experimental_toToolResultContent(_.result)}:{type:"tool-result",toolCallId:_.toolCallId,toolName:_.toolName,result:_.result}})}),v}function jU(t){let e=t.filter(r=>r.type==="text").map(r=>r.text).join("");return e.length>0?e:void 0}var cW=hm({prefix:"aitxt",size:24}),fW=hm({prefix:"msg",size:24});var YU={};US(YU,{object:()=>HU,text:()=>qU});var vD="AI_InvalidStreamPartError",hD=`vercel.ai.error.${vD}`,$U=Symbol.for(hD),gD,BU=class extends Ot{constructor({chunk:t,message:e}){super({name:vD,message:e}),this[gD]=!0,this.chunk=t}static isInstance(t){return Ot.hasMarker(t,hD)}};gD=$U;var qU=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:t}){return t},parsePartial({text:t}){return{partial:t}},parseOutput({text:t}){return t}}),HU=({schema:t})=>{let e=Wg(t);return{type:"object",responseFormat:({model:r})=>({type:"json",schema:r.supportsStructuredOutputs?e.jsonSchema:void 0}),injectIntoSystemPrompt({system:r,model:n}){return n.supportsStructuredOutputs?r:TU({prompt:r,schema:e.jsonSchema})},parsePartial({text:r}){let n=ix(r);switch(n.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:n.value};default:{let i=n.state;throw new Error(`Unsupported parse state: ${i}`)}}},parseOutput({text:r},n){let i=vv({text:r});if(!i.success)throw new Tx({message:"No object generated: could not parse the response.",cause:i.error,text:r,response:n.response,usage:n.usage});let a=gm({value:i.value,schema:e});if(!a.success)throw new Tx({message:"No object generated: response did not match schema.",cause:a.error,text:r,response:n.response,usage:n.usage});return a.value}}};function GU(t){return t===void 0?[]:Array.isArray(t)?t:[t]}function YS(t,e){let r=t.getReader(),n=e.getReader(),i,a,l=!1,v=!1;async function _(C){try{i==null&&(i=r.read());let U=await i;i=void 0,U.done?C.close():C.enqueue(U.value)}catch(U){C.error(U)}}async function y(C){try{a==null&&(a=n.read());let U=await a;a=void 0,U.done?C.close():C.enqueue(U.value)}catch(U){C.error(U)}}return new ReadableStream({async pull(C){try{if(l){await y(C);return}if(v){await _(C);return}i==null&&(i=r.read()),a==null&&(a=n.read());let{result:U,reader:W}=await Promise.race([i.then(K=>({result:K,reader:r})),a.then(K=>({result:K,reader:n}))]);U.done||C.enqueue(U.value),W===r?(i=void 0,U.done&&(await y(C),l=!0)):(a=void 0,U.done&&(v=!0,await _(C)))}catch(U){C.error(U)}},cancel(){r.cancel(),n.cancel()}})}function VU({tools:t,generatorStream:e,toolCallStreaming:r,tracer:n,telemetry:i,system:a,messages:l,abortSignal:v,repairToolCall:_}){let y=null,C=new ReadableStream({start(re){y=re}}),U={},W=new Set,K=!1,q;function V(){K&&W.size===0&&(q!=null&&y.enqueue(q),y.close())}let J=new TransformStream({async transform(re,_e){let Le=re.type;switch(Le){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{_e.enqueue(re);break}case"tool-call-delta":{r&&(U[re.toolCallId]||(_e.enqueue({type:"tool-call-streaming-start",toolCallId:re.toolCallId,toolName:re.toolName}),U[re.toolCallId]=!0),_e.enqueue({type:"tool-call-delta",toolCallId:re.toolCallId,toolName:re.toolName,argsTextDelta:re.argsTextDelta}));break}case"tool-call":{try{let ge=await UU({toolCall:re,tools:t,repairToolCall:_,system:a,messages:l});_e.enqueue(ge);let Ee=t[ge.toolName];if(Ee.execute!=null){let Be=Xl();W.add(Be),LS({name:"ai.toolCall",attributes:j_({telemetry:i,attributes:{...MS({operationId:"ai.toolCall",telemetry:i}),"ai.toolCall.name":ge.toolName,"ai.toolCall.id":ge.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(ge.args)}}}),tracer:n,fn:async We=>Ee.execute(ge.args,{toolCallId:ge.toolCallId,messages:l,abortSignal:v}).then(st=>{y.enqueue({...ge,type:"tool-result",result:st}),W.delete(Be),V();try{We.setAttributes(j_({telemetry:i,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(st)}}}))}catch{}},st=>{y.enqueue({type:"error",error:new RU({toolCallId:ge.toolCallId,toolName:ge.toolName,toolArgs:ge.args,cause:st})}),W.delete(Be),V()})})}}catch(ge){y.enqueue({type:"error",error:ge})}break}case"finish":{q={type:"finish",finishReason:re.finishReason,logprobs:re.logprobs,usage:yU(re.usage),experimental_providerMetadata:re.providerMetadata};break}default:{let ge=Le;throw new Error(`Unhandled chunk type: ${ge}`)}}},flush(){K=!0,V()}});return new ReadableStream({async start(re){return Promise.all([e.pipeThrough(J).pipeTo(new WritableStream({write(_e){re.enqueue(_e)},close(){}})),C.pipeTo(new WritableStream({write(_e){re.enqueue(_e)},close(){re.close()}}))])}})}var zU=hm({prefix:"aitxt",size:24}),WU=hm({prefix:"msg",size:24});function _D({model:t,tools:e,toolChoice:r,system:n,prompt:i,messages:a,maxRetries:l,abortSignal:v,headers:_,maxSteps:y=1,experimental_generateMessageId:C=WU,experimental_output:U,experimental_continueSteps:W=!1,experimental_telemetry:K,experimental_providerMetadata:q,providerOptions:V=q,experimental_toolCallStreaming:J=!1,toolCallStreaming:re=J,experimental_activeTools:_e,experimental_repairToolCall:Le,experimental_transform:ge,onChunk:Ee,onError:Be,onFinish:We,onStepFinish:st,_internal:{now:mt=NU,generateId:At=zU,currentDate:Ur=()=>new Date}={},...on}){return new JU({model:t,telemetry:K,headers:_,settings:on,maxRetries:l,abortSignal:v,system:n,prompt:i,messages:a,tools:e,toolChoice:r,toolCallStreaming:re,transforms:GU(ge),activeTools:_e,repairToolCall:Le,maxSteps:y,output:U,continueSteps:W,providerOptions:V,onChunk:Ee,onError:Be,onFinish:We,onStepFinish:st,now:mt,currentDate:Ur,generateId:At,generateMessageId:C})}function KU(t){if(!t)return new TransformStream({transform(a,l){l.enqueue({part:a,partialOutput:void 0})}});let e="",r="",n="";function i({controller:a,partialOutput:l=void 0}){a.enqueue({part:{type:"text-delta",textDelta:r},partialOutput:l}),r=""}return new TransformStream({transform(a,l){if(a.type==="step-finish"&&i({controller:l}),a.type!=="text-delta"){l.enqueue({part:a,partialOutput:void 0});return}e+=a.textDelta,r+=a.textDelta;let v=t.parsePartial({text:e});if(v!=null){let _=JSON.stringify(v.partial);_!==n&&(i({controller:l,partialOutput:v.partial}),n=_)}},flush(a){r.length>0&&i({controller:a})}})}var JU=class{constructor({model:t,telemetry:e,headers:r,settings:n,maxRetries:i,abortSignal:a,system:l,prompt:v,messages:_,tools:y,toolChoice:C,toolCallStreaming:U,transforms:W,activeTools:K,repairToolCall:q,maxSteps:V,output:J,continueSteps:re,providerOptions:_e,now:Le,currentDate:ge,generateId:Ee,generateMessageId:Be,onChunk:We,onError:st,onFinish:mt,onStepFinish:At}){this.warningsPromise=new Qf,this.usagePromise=new Qf,this.finishReasonPromise=new Qf,this.providerMetadataPromise=new Qf,this.textPromise=new Qf,this.reasoningPromise=new Qf,this.reasoningDetailsPromise=new Qf,this.sourcesPromise=new Qf,this.toolCallsPromise=new Qf,this.toolResultsPromise=new Qf,this.requestPromise=new Qf,this.responsePromise=new Qf,this.stepsPromise=new Qf;var Ur;if(V<1)throw new Em({parameter:"maxSteps",value:V,message:"maxSteps must be at least 1"});this.output=J;let on="",kn="",ct="",Dr=[],Ke,_n=[],Pe=[],$t={id:Ee(),timestamp:ge(),modelId:t.modelId,messages:[]},Vt=[],wt=[],mn,ut,ti="initial",ot=[],Su,Xt=new TransformStream({async transform(Dt,Mr){Mr.enqueue(Dt);let{part:Qe}=Dt;if((Qe.type==="text-delta"||Qe.type==="reasoning"||Qe.type==="source"||Qe.type==="tool-call"||Qe.type==="tool-result"||Qe.type==="tool-call-streaming-start"||Qe.type==="tool-call-delta")&&await(We==null?void 0:We({chunk:Qe})),Qe.type==="error"&&await(st==null?void 0:st({error:Qe.error})),Qe.type==="text-delta"&&(on+=Qe.textDelta,kn+=Qe.textDelta,ct+=Qe.textDelta),Qe.type==="reasoning"&&(Ke==null?(Ke={type:"text",text:Qe.textDelta},Dr.push(Ke)):Ke.text+=Qe.textDelta),Qe.type==="reasoning-signature"){if(Ke==null)throw new Ot({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});Ke.signature=Qe.signature,Ke=void 0}if(Qe.type==="redacted-reasoning"&&Dr.push({type:"redacted",data:Qe.data}),Qe.type==="source"&&(Pe.push(Qe.source),_n.push(Qe.source)),Qe.type==="tool-call"&&Vt.push(Qe),Qe.type==="tool-result"&&wt.push(Qe),Qe.type==="step-finish"){let An=xx({text:kn,reasoning:Dr,tools:y??{},toolCalls:Vt,toolResults:wt,messageId:Qe.messageId,generateMessageId:Be}),qr=ot.length,Kr="done";qr+1<V&&(re&&Qe.finishReason==="length"&&Vt.length===0?Kr="continue":Vt.length>0&&wt.length===Vt.length&&(Kr="tool-result"));let Ia={stepType:ti,text:on,reasoning:jU(Dr),reasoningDetails:Dr,sources:_n,toolCalls:Vt,toolResults:wt,finishReason:Qe.finishReason,usage:Qe.usage,warnings:Qe.warnings,logprobs:Qe.logprobs,request:Qe.request,response:{...Qe.response,messages:[...$t.messages,...An]},providerMetadata:Qe.experimental_providerMetadata,experimental_providerMetadata:Qe.experimental_providerMetadata,isContinued:Qe.isContinued};await(At==null?void 0:At(Ia)),ot.push(Ia),Vt=[],wt=[],on="",_n=[],Kr!=="done"&&(ti=Kr),Kr!=="continue"&&($t.messages.push(...An),kn="")}Qe.type==="finish"&&($t.id=Qe.response.id,$t.timestamp=Qe.response.timestamp,$t.modelId=Qe.response.modelId,$t.headers=Qe.response.headers,ut=Qe.usage,mn=Qe.finishReason)},async flush(Dt){var Mr;try{if(ot.length===0)return;let Qe=ot[ot.length-1];qn.warningsPromise.resolve(Qe.warnings),qn.requestPromise.resolve(Qe.request),qn.responsePromise.resolve(Qe.response),qn.toolCallsPromise.resolve(Qe.toolCalls),qn.toolResultsPromise.resolve(Qe.toolResults),qn.providerMetadataPromise.resolve(Qe.experimental_providerMetadata),qn.reasoningPromise.resolve(Qe.reasoning),qn.reasoningDetailsPromise.resolve(Qe.reasoningDetails);let An=mn??"unknown",qr=ut??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};qn.finishReasonPromise.resolve(An),qn.usagePromise.resolve(qr),qn.textPromise.resolve(ct),qn.sourcesPromise.resolve(Pe),qn.stepsPromise.resolve(ot),await(mt==null?void 0:mt({finishReason:An,logprobs:void 0,usage:qr,text:ct,reasoning:Qe.reasoning,reasoningDetails:Qe.reasoningDetails,sources:Qe.sources,toolCalls:Qe.toolCalls,toolResults:Qe.toolResults,request:(Mr=Qe.request)!=null?Mr:{},response:Qe.response,warnings:Qe.warnings,providerMetadata:Qe.providerMetadata,experimental_providerMetadata:Qe.experimental_providerMetadata,steps:ot})),Su.setAttributes(j_({telemetry:e,attributes:{"ai.response.finishReason":An,"ai.response.text":{output:()=>ct},"ai.response.toolCalls":{output:()=>{var Kr;return(Kr=Qe.toolCalls)!=null&&Kr.length?JSON.stringify(Qe.toolCalls):void 0}},"ai.usage.promptTokens":qr.promptTokens,"ai.usage.completionTokens":qr.completionTokens}}))}catch(Qe){Dt.error(Qe)}finally{Su.end()}}}),$a=IU();this.addStream=$a.addStream,this.closeStream=$a.close;let Kt=$a.stream;for(let Dt of W)Kt=Kt.pipeThrough(Dt({tools:y,stopStream(){$a.terminate()}}));this.baseStream=Kt.pipeThrough(KU(J)).pipeThrough(Xt);let{maxRetries:lr,retry:Ci}=R2({maxRetries:i}),pr=P2(e),xi=O2({model:t,telemetry:e,headers:r,settings:{...n,maxRetries:lr}}),Pr=_U({prompt:{system:(Ur=J==null?void 0:J.injectIntoSystemPrompt({system:l,model:t}))!=null?Ur:l,prompt:v,messages:_},tools:y}),qn=this;LS({name:"ai.streamText",attributes:j_({telemetry:e,attributes:{...MS({operationId:"ai.streamText",telemetry:e}),...xi,"ai.prompt":{input:()=>JSON.stringify({system:l,prompt:v,messages:_})},"ai.settings.maxSteps":V}}),tracer:pr,endWhenDone:!1,fn:async Dt=>{Su=Dt;async function Mr({currentStep:Qe,responseMessages:An,usage:qr,stepType:Kr,previousStepText:Ia,hasLeadingWhitespace:Ui,messageId:Lr}){var nr;let _r=An.length===0?Pr.type:"messages",sn=[...Pr.messages,...An],td=await J2({prompt:{type:_r,system:Pr.system,messages:sn},modelSupportsImageUrls:t.supportsImageUrls,modelSupportsUrl:(nr=t.supportsUrl)==null?void 0:nr.bind(t)}),ri={type:"regular",...kU({tools:y,toolChoice:C,activeTools:K})},{result:{stream:rd,warnings:Eu,rawResponse:Cn,request:as},doStreamSpan:Jt,startTimestampMs:ji}=await Ci(()=>LS({name:"ai.streamText.doStream",attributes:j_({telemetry:e,attributes:{...MS({operationId:"ai.streamText.doStream",telemetry:e}),...xi,"ai.prompt.format":{input:()=>_r},"ai.prompt.messages":{input:()=>JSON.stringify(td)},"ai.prompt.tools":{input:()=>{var mr;return(mr=ri.tools)==null?void 0:mr.map(xn=>JSON.stringify(xn))}},"ai.prompt.toolChoice":{input:()=>ri.toolChoice!=null?JSON.stringify(ri.toolChoice):void 0},"gen_ai.system":t.provider,"gen_ai.request.model":t.modelId,"gen_ai.request.frequency_penalty":n.frequencyPenalty,"gen_ai.request.max_tokens":n.maxTokens,"gen_ai.request.presence_penalty":n.presencePenalty,"gen_ai.request.stop_sequences":n.stopSequences,"gen_ai.request.temperature":n.temperature,"gen_ai.request.top_k":n.topK,"gen_ai.request.top_p":n.topP}}),tracer:pr,endWhenDone:!1,fn:async mr=>({startTimestampMs:Le(),doStreamSpan:mr,result:await t.doStream({mode:ri,...eU(n),inputFormat:_r,responseFormat:J==null?void 0:J.responseFormat({model:t}),prompt:td,providerMetadata:_e,abortSignal:a,headers:r})})})),Ba=VU({tools:y,generatorStream:rd,toolCallStreaming:U,tracer:pr,telemetry:e,system:l,messages:sn,repairToolCall:q,abortSignal:a}),os=as??{},Na=[],nd=[],al=[],Ji,Ca="unknown",Di={promptTokens:0,completionTokens:0,totalTokens:0},ss,Gs=!0,ui="",ol=Kr==="continue"?Ia:"",Vs,xa={id:Ee(),timestamp:ge(),modelId:t.modelId},ni="",nc=!1,zs=!0,li=!1;async function ua({controller:mr,chunk:xn}){mr.enqueue(xn),ui+=xn.textDelta,ol+=xn.textDelta,nc=!0,li=xn.textDelta.trimEnd()!==xn.textDelta}qn.addStream(Ba.pipeThrough(new TransformStream({async transform(mr,xn){var Da,Jr,_i;if(Gs){let Zr=Le()-ji;Gs=!1,Jt.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":Zr}),Jt.setAttributes({"ai.response.msToFirstChunk":Zr}),xn.enqueue({type:"step-start",messageId:Lr,request:os,warnings:Eu??[]})}if(mr.type==="text-delta"&&mr.textDelta.length===0)return;let qa=mr.type;switch(qa){case"text-delta":{if(re){let Zr=zs&&Ui?mr.textDelta.trimStart():mr.textDelta;if(Zr.length===0)break;zs=!1,ni+=Zr;let la=PU(ni);la!=null&&(ni=la.suffix,await ua({controller:xn,chunk:{type:"text-delta",textDelta:la.prefix+la.whitespace}}))}else await ua({controller:xn,chunk:mr});break}case"reasoning":{xn.enqueue(mr),Ji==null?(Ji={type:"text",text:mr.textDelta},al.push(Ji)):Ji.text+=mr.textDelta;break}case"reasoning-signature":{if(xn.enqueue(mr),Ji==null)throw new BU({chunk:mr,message:"reasoning-signature without reasoning"});Ji.signature=mr.signature,Ji=void 0;break}case"redacted-reasoning":{xn.enqueue(mr),al.push({type:"redacted",data:mr.data});break}case"tool-call":{xn.enqueue(mr),Na.push(mr);break}case"tool-result":{xn.enqueue(mr),nd.push(mr);break}case"response-metadata":{xa={id:(Da=mr.id)!=null?Da:xa.id,timestamp:(Jr=mr.timestamp)!=null?Jr:xa.timestamp,modelId:(_i=mr.modelId)!=null?_i:xa.modelId};break}case"finish":{Di=mr.usage,Ca=mr.finishReason,ss=mr.experimental_providerMetadata,Vs=mr.logprobs;let Zr=Le()-ji;Jt.addEvent("ai.stream.finish"),Jt.setAttributes({"ai.response.msToFinish":Zr,"ai.response.avgCompletionTokensPerSecond":1e3*Di.completionTokens/Zr});break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{xn.enqueue(mr);break}case"error":{xn.enqueue(mr),Ca="error";break}default:{let Zr=qa;throw new Error(`Unknown chunk type: ${Zr}`)}}},async flush(mr){let xn=Na.length>0?JSON.stringify(Na):void 0,Da="done";Qe+1<V&&(re&&Ca==="length"&&Na.length===0?Da="continue":Na.length>0&&nd.length===Na.length&&(Da="tool-result")),re&&ni.length>0&&(Da!=="continue"||Kr==="continue"&&!nc)&&(await ua({controller:mr,chunk:{type:"text-delta",textDelta:ni}}),ni="");try{Jt.setAttributes(j_({telemetry:e,attributes:{"ai.response.finishReason":Ca,"ai.response.text":{output:()=>ui},"ai.response.toolCalls":{output:()=>xn},"ai.response.id":xa.id,"ai.response.model":xa.modelId,"ai.response.timestamp":xa.timestamp.toISOString(),"ai.usage.promptTokens":Di.promptTokens,"ai.usage.completionTokens":Di.completionTokens,"gen_ai.response.finish_reasons":[Ca],"gen_ai.response.id":xa.id,"gen_ai.response.model":xa.modelId,"gen_ai.usage.input_tokens":Di.promptTokens,"gen_ai.usage.output_tokens":Di.completionTokens}}))}catch{}finally{Jt.end()}mr.enqueue({type:"step-finish",finishReason:Ca,usage:Di,providerMetadata:ss,experimental_providerMetadata:ss,logprobs:Vs,request:os,response:{...xa,headers:Cn==null?void 0:Cn.headers},warnings:Eu,isContinued:Da==="continue",messageId:Lr});let Jr=bU(qr,Di);if(Da==="done")mr.enqueue({type:"finish",finishReason:Ca,usage:Jr,providerMetadata:ss,experimental_providerMetadata:ss,logprobs:Vs,response:{...xa,headers:Cn==null?void 0:Cn.headers}}),qn.closeStream();else{if(Kr==="continue"){let _i=An[An.length-1];typeof _i.content=="string"?_i.content+=ui:_i.content.push({text:ui,type:"text"})}else An.push(...xx({text:ui,reasoning:al,tools:y??{},toolCalls:Na,toolResults:nd,messageId:Lr,generateMessageId:Be}));await Mr({currentStep:Qe+1,responseMessages:An,usage:Jr,stepType:Da,previousStepText:ol,hasLeadingWhitespace:li,messageId:Da==="continue"?Lr:Be()})}}})))}await Mr({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:Be()})}}).catch(Dt=>{qn.addStream(new ReadableStream({start(Mr){Mr.enqueue({type:"error",error:Dt}),Mr.close()}})),qn.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){let[t,e]=this.baseStream.tee();return this.baseStream=e,t}get textStream(){return PS(this.teeStream().pipeThrough(new TransformStream({transform({part:t},e){t.type==="text-delta"&&e.enqueue(t.textDelta)}})))}get fullStream(){return PS(this.teeStream().pipeThrough(new TransformStream({transform({part:t},e){e.enqueue(t)}})))}async consumeStream(){let t=this.fullStream;for await(let e of t);}get experimental_partialOutputStream(){if(this.output==null)throw new xU;return PS(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:t},e){t!=null&&e.enqueue(t)}})))}toDataStreamInternal({getErrorMessage:t=()=>"An error occurred.",sendUsage:e=!0,sendReasoning:r=!1,sendSources:n=!1}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,a)=>{let l=i.type;switch(l){case"text-delta":{a.enqueue(Hs("text",i.textDelta));break}case"reasoning":{r&&a.enqueue(Hs("reasoning",i.textDelta));break}case"redacted-reasoning":{r&&a.enqueue(Hs("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{r&&a.enqueue(Hs("reasoning_signature",{signature:i.signature}));break}case"source":{n&&a.enqueue(Hs("source",i.source));break}case"tool-call-streaming-start":{a.enqueue(Hs("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{a.enqueue(Hs("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{a.enqueue(Hs("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{a.enqueue(Hs("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{a.enqueue(Hs("error",t(i.error)));break}case"step-start":{a.enqueue(Hs("start_step",{messageId:i.messageId}));break}case"step-finish":{a.enqueue(Hs("finish_step",{finishReason:i.finishReason,usage:e?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{a.enqueue(Hs("finish_message",{finishReason:i.finishReason,usage:e?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{let v=l;throw new Error(`Unknown chunk type: ${v}`)}}}}))}pipeDataStreamToResponse(t,{status:e,statusText:r,headers:n,data:i,getErrorMessage:a,sendUsage:l,sendReasoning:v,sendSources:_}={}){Sx({response:t,status:e,statusText:r,headers:wx(n,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:i,getErrorMessage:a,sendUsage:l,sendReasoning:v,sendSources:_})})}pipeTextStreamToResponse(t,e){Sx({response:t,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText,headers:wx(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(t){let e=this.toDataStreamInternal({getErrorMessage:t==null?void 0:t.getErrorMessage,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources}).pipeThrough(new TextEncoderStream);return t!=null&&t.data?YS(t==null?void 0:t.data.stream,e):e}mergeIntoDataStream(t,e){t.merge(this.toDataStreamInternal({getErrorMessage:t.onError,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources}))}toDataStreamResponse({headers:t,status:e,statusText:r,data:n,getErrorMessage:i,sendUsage:a,sendReasoning:l,sendSources:v}={}){return new Response(this.toDataStream({data:n,getErrorMessage:i,sendUsage:a,sendReasoning:l,sendSources:v}),{status:e,statusText:r,headers:Ib(t,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(t){var e;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(e=t==null?void 0:t.status)!=null?e:200,headers:Ib(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"})})}};var ZU="AI_NoSuchProviderError",XU=`vercel.ai.error.${ZU}`,QU=Symbol.for(XU),ej;ej=QU;var tj={};US(tj,{mergeIntoDataStream:()=>ij,toDataStream:()=>rj,toDataStreamResponse:()=>nj});function yD(t={}){let e=new TextEncoder,r="";return new TransformStream({async start(){t.onStart&&await t.onStart()},async transform(n,i){i.enqueue(e.encode(n)),r+=n,t.onToken&&await t.onToken(n),t.onText&&typeof n=="string"&&await t.onText(n)},async flush(){t.onCompletion&&await t.onCompletion(r),t.onFinal&&await t.onFinal(r)}})}function $S(t,e){return t.pipeThrough(new TransformStream({transform:async(r,n)=>{var i;if(typeof r=="string"){n.enqueue(r);return}if("event"in r){r.event==="on_chat_model_stream"&&Dx((i=r.data)==null?void 0:i.chunk,n);return}Dx(r,n)}})).pipeThrough(yD(e)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,n)=>{n.enqueue(Hs("text",r))}}))}function rj(t,e){return $S(t,e).pipeThrough(new TextEncoderStream)}function nj(t,e){var r;let n=$S(t,e==null?void 0:e.callbacks).pipeThrough(new TextEncoderStream),i=e==null?void 0:e.data,a=e==null?void 0:e.init,l=i?YS(i.stream,n):n;return new Response(l,{status:(r=a==null?void 0:a.status)!=null?r:200,statusText:a==null?void 0:a.statusText,headers:Ib(a==null?void 0:a.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function ij(t,e){e.dataStream.merge($S(t,e.callbacks))}function Dx(t,e){if(typeof t.content=="string")e.enqueue(t.content);else{let r=t.content;for(let n of r)n.type==="text"&&e.enqueue(n.text)}}var aj={};US(aj,{mergeIntoDataStream:()=>uj,toDataStream:()=>oj,toDataStreamResponse:()=>sj});function BS(t,e){let r=lj();return yN(t[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(n,i){i.enqueue(r(n.delta))}})).pipeThrough(yD(e)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,i)=>{i.enqueue(Hs("text",n))}}))}function oj(t,e){return BS(t,e).pipeThrough(new TextEncoderStream)}function sj(t,e={}){var r;let{init:n,data:i,callbacks:a}=e,l=BS(t,a).pipeThrough(new TextEncoderStream),v=i?YS(i.stream,l):l;return new Response(v,{status:(r=n==null?void 0:n.status)!=null?r:200,statusText:n==null?void 0:n.statusText,headers:Ib(n==null?void 0:n.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function uj(t,e){e.dataStream.merge(BS(t,e.callbacks))}function lj(){let t=!0;return e=>(t&&(e=e.trimStart(),e&&(t=!1)),e)}var EW=15*1e3;function bD(t){try{return JSON.parse(t)}catch{return null}}function wD(t){return JSON.stringify(t)}function SD(t){async function e({error:r,toolCall:n}){if(Kg.isInstance(r)){let i=r.toolName.split(".");if(i.length==2){let[a,l]=i,v=ig[a],_=bD(n.args);if(v){let y={...r,event:"repair.tool"};return t.log.warn(`Tool name: ${r.toolName}`,y),"command"in v.parameters.shape&&_&&!_.command?(_.command=l,{...n,toolName:a,args:wD(_)}):{...n,toolName:a}}}if(ig["multicoder_"+r.toolName]){let a="multicoder_"+r.toolName;return{...n,toolName:a}}return null}if(Y_.isInstance(r)){let i=r.toolName,a=bD(r.toolArgs),l=r.cause,v=[];if(a&&ch.isInstance(l)){let _=l.cause;if(_ instanceof Ql){for(let C of _.issues){let U=ig[i];if(U!=null&&U.repair){let W=U.repair(C,a);if(typeof W=="object")Object.assign(a,W);else return null}else return null;v.push(C.path.join("."))}let y={...r,event:"repair.args"};return t.log.warn(`Tool arguments: ${r.toolName}.${v.join(", ")}`,y),{...n,args:wD(a)}}}return null}return null}return e}var cj=[fb,db,dp,pb,A_,ei,qs,P_],ig=Object.fromEntries(cj.map(t=>[t.name,fj(t)]));function fj(t){return{...t,description:Ta(t.description),async execute(e,r){return t.execute?t.execute(e,r.abortSignal.session):"ok"}}}var ED=t=>`# Multicoder Agent

## Role and Identity

### Role Definition
You are Multicoder Agent - an AI coding assistant integrated into VS Code. Your purpose is to help developers write better code through structured requirements gathering, solution design and implementation.

### Agentic Coding
You deliver complete, high quality, fully integrated solutions to the user requests:
- Take some time to inspect and fully undestand the existing codebase
- Maintain a clear picture of project parts, interdependencies and execution flow
- Proactively ask clarifying questions
- Collect complete detailed requirements, constraints and success criteria for each task
- Investigate the existing code and find all missing information before making any decisions
- Consider multiple paths before choosing the right solution
- Use the right level of details for the design or planning documents
- Spend as much efforts and resources as required for a high quality outcome

### Technical Competencies
- Deep understanding of software engineering principles
- Strong algorithmic and system design skills
- Experience with multiple programming languages and paradigms
- Knowledge of development best practices and patterns
- Ability to analyze tradeoffs and make design decisions

## Operating Environment

### VS Code Extension
You were added to the user's development environment by installing and activating Multicoder Agent VS Code extension. As an AI Agent, you can access the project workspace using the provided tools for:
- Editor windows and open files
- Workspace folders and file system
- Source control integration
- Terminal and output panels
- Problems and diagnostics
- Testing frameworks

### Interactive Chat
You interact with a user as a chat participant in GitHub Copilot Chat. 
- Proactively ask clarifying questions using ${A_.name} tool
- Finish your responses invoking ${ei.name} tool
- Use ${qs.name} tool to provide followup actions

### Source Code
You inspect and analyze the project structure using ${fb.name} tool
- Read the content of the project source files
- List available files and folders in project directories
- Check if the source file or directory exists

### Project Documents
The requirement specifications, design documents and implementation plans are stored separately from the project source code and available through the ${db.name} tool.
- Read the document content
- List available documents or document folders

### File System
You manipulate workspace files and directories using ${pb.name} tool.
- Create new directories
- Delete directories or files

### Editor
You create and modify source files and documents using ${dp.name} tool.
- Insert, modify and delete text
- Handle selections and cursors
- Format code and documents
- Apply workspace edits


## Development Workflow

### Project Understanding
- Analyze existing codebase
- Review documentation
- Identify patterns and conventions
- Map dependencies and structure

### Requirements Gathering
- Ask clarifying questions
- Validate assumptions
- Define acceptance criteria
- Document constraints

### Solution Design
- Create high-level architecture
- Define interfaces and components
- Choose appropriate patterns
- Consider alternatives
- Review tradeoffs

### Implementation Planning
- Break down into steps
- Estimate complexity
- Identify dependencies
- Define milestones

### Hierarchical Execution
- Execute step-by-step plan
- Handle subtasks recursively
- Maintain context stack
- Track progress

## Behavioral Guidelines

### Input Validation and Clarification
- Verify requirements completeness
- Resolve ambiguities early
- Ask focused questions
- Provide examples

### Response Format & Structure
- Use clear headings
- Include code blocks
- Add explanatory comments
- Show progress summaries

### Writing Style
- Be concise and direct
- Use technical terminology
- Focus on solutions
- Explain key decisions

### Coding Conventions
- Follow project style
- Use consistent naming
- Add proper comments
- Structure logically

### Development Best Practices
- Write maintainable code
- Consider performance
- Handle errors properly
- Add proper validation

### Iterative Development Approach
- Start simple
- Refine gradually
- Get feedback early
- Improve incrementally

### Error Handling and Uncertainty
- Validate inputs
- Handle edge cases
- Provide fallbacks
- Report issues clearly
`;var dj=`
You are direct and to the point. You don't waste time with pleasantries or unnecessary context. 
Your goal is to provide accurate, practical solutions to coding problems as efficiently as possible.

You use short code snippets to illustrate your points. These snippets are always properly formatted 
and indented for readability. You explain the key parts of the code, but assume a certain level of 
programming knowledge from your audience.

You often break down your answers into steps or bullet points for clarity. You're not afraid to point out 
flaws in the original question or suggest better approaches if you see them.

You include relevant documentation links or references to support your answers, but you don't just link-drop 
without explanation. You summarize the key points and explain why they're relevant.

Your tone is professional and sometimes a bit terse. You're here to solve problems, not to make friends. 
However, you're also not rude or dismissive. If a question is unclear, you ask for clarification rather than 
making assumptions.

You're aware of best practices and potential pitfalls, so you often include warnings about edge cases or 
performance issues that might not be immediately obvious.
`,pj=`
You are a seasoned software developer with a deep understanding of core programming principles and system design. 
Your experience spans multiple domains, allowing you to approach problems from various angles.

You excel at breaking down complex requirements into manageable components and designing scalable, maintainable 
solutions. Your code is clean, well-documented, and follows best practices for readability and efficiency.

You are particularly strong in algorithmic thinking and optimization. You can analyze performance bottlenecks 
and implement effective solutions, whether it's improving time complexity or reducing resource usage.

You have a solid grasp of software architecture patterns and can adapt them to fit project needs. 
You're comfortable designing and implementing APIs, working with databases, and integrating various system components.

Testing is integral to your development process. You write comprehensive unit tests and understand 
the value of integration and end-to-end testing in ensuring robust, reliable software.

You stay current with industry trends and continuously refine your skills. However, you're pragmatic in your approach, 
focusing on proven technologies that add real value rather than chasing every new trend.

Debugging and troubleshooting are areas where you shine. You can quickly isolate issues in complex systems 
and implement effective fixes.

Lastly, you're a strong communicator. You can explain technical concepts clearly to both technical 
and non-technical stakeholders, facilitating better collaboration across teams.
`,mj=`
When designing and building complex code, your thought process typically follows these steps:

You start by thoroughly analyzing the problem domain. You break down the requirements, 
identifying the core functionalities and potential edge cases.

Next, you consider the overall architecture. You think about how different components will interact, 
data flow, and potential bottlenecks. You often sketch out high-level diagrams to visualize the system structure.

You evaluate trade-offs between different design patterns and approaches. You consider factors like scalability, 
maintainability, and performance. You try to anticipate future requirements to make the system extensible.

Before diving into implementation, you plan out the data structures and algorithms you'll use. 
You consider time and space complexity, thinking about how the solution will perform with larger datasets.

You break the problem down into smaller, manageable modules or functions. You define clear interfaces 
between these components, thinking about how they'll be tested in isolation.

As you start coding, you focus on creating a minimal viable implementation of each component. 
You write unit tests alongside the code, using test-driven development where appropriate.

You constantly refactor as you go, looking for opportunities to improve code clarity and efficiency. 
You're always thinking about how another developer would read and understand your code.

For particularly complex parts, you often step back and reconsider your approach. Sometimes you'll implement 
a quick prototype to validate a concept before fully committing to it.

Throughout the process, you document your code and decisions. You write clear comments explaining the 'why' 
behind complex logic, not just the 'what'.

As the system comes together, you start thinking about integration testing and how different components interact. 
You look for potential race conditions or unexpected behaviors in the system as a whole.

Finally, you review the entire solution, considering aspects like error handling, logging, and monitoring. 
You think about how the system will behave in production and what tools will be needed to maintain it.

This process is iterative, and you're always ready to revisit earlier decisions as new information or challenges arise. The goal is to create a robust, efficient, and maintainable solution that solves the problem at hand while being flexible enough to adapt to future needs.
`;async function TD(){return[Nn([{"Writing style":dj,"Software development experience":pj,"Coding process":mj}]),Jn("Agreed. I will strictly follow these instructions.")]}var Ry=require("vscode");async function ID(t){let e=[];if(Ry.workspace.workspaceFolders&&e.push(await bm(hi(".",t.id))),Ry.window.activeTextEditor){let r=Zc(Ry.window.activeTextEditor.document.uri).split("/");for(let n=1;n<r.length;n++)e.push(await bm(hi(r.slice(0,n).join("/"),t.id)));e.push(await lC())}return e.length?[Nn(...e),Jn("Ok. How can I help you?")]:[]}var nl=require("vscode");async function ND(t){let{request:e}=t,r=[];for(let{id:n,name:i,modelDescription:a,value:l}of e.references){let v=String(l);n!="vscode.implicit.viewport"&&(l instanceof nl.Uri?await Xc(l)?v=await rg(l):await vm(l)&&(v=await bm(l)):l instanceof nl.Location&&(v=await oC(l.uri,i,l.range)),a&&(i+=` (${a})`),r.push(v))}for(let{name:n}of e.toolReferences){let i=nl.lm.tools.find(v=>v.name==n),a=i==null?void 0:i.inputSchema;if(!a)continue;let{required:l}=a;if(n=="copilot_getChangedFiles"&&String(l)=="workspacePaths"&&nl.workspace.workspaceFolders){let v=nl.workspace.workspaceFolders.map(({uri:C})=>C.fsPath),_={workspacePaths:v},y=await Cb(n,_,t);r.push(...y)}else if(n=="copilot_getErrors"&&String(l)=="filePaths"){let v=P0(),_=v.map(({path:U})=>U),y={filePaths:_},C=await Cb(n,y,t);r.push(...C)}else if(n=="copilot_testFailure"){let v=await Cb(n,{},t);r.push(...v)}else if(String(l)=="query"){let v=e.prompt,_={query:v},y=await Cb(n,_,t);r.push(...y)}}return r.length?[Nn(...r),Jn("Ok. How should I proceed?")]:[]}async function Cb(t,e,{request:r,stream:n,token:i}){let a=await nl.lm.invokeTool(t,{input:e,toolInvocationToken:r.toolInvocationToken},i),l=[];for(let v of a.content)if(v instanceof nl.LanguageModelTextPart)l.push(v.value);else if(v instanceof nl.LanguageModelPromptTsxPart){let{text:_,refs:y}=vj(v);l.push(_),y.forEach(C=>n.reference(C))}return l}function vj(t){let e=[],r=[];function n({text:i,children:a,references:l,lineBreakBefore:v}){v&&e.push(`
`),Array.isArray(l)&&l.forEach(({anchor:_})=>{try{let{external:y,scheme:C,authority:U,path:W,query:K,fragment:q}=_;y?r.push(nl.Uri.parse(y)):r.push(nl.Uri.from({scheme:C,authority:U,path:W,query:K,fragment:q}))}catch{}}),Array.isArray(a)?a.forEach(n):typeof i=="string"&&e.push(i)}return n(t.value.node),{text:e.join(""),refs:r}}var hj=`
<table><tr><td>
    <span class="codicon codicon-run-all" style="color:var(--vscode-textLink-foreground);"></span>
</td><td>
    <span  style="color:var(--vscode-textLink-foreground);">Running in automatic mode. Press the stop button to switch</span>
</td></tr></table>
`;async function CD(t,e){let{log:r,stream:n,request:i,messages:a}=t,l="chat.next";if(a.length||(l="chat.start",t.resume=null,a.push(...await TD()),a.push(...await ID(t))),t.auto&&(i.command=="resume"?n.markdown(`

Resuming iterrupted task

`):t.resume=null),t.auto=i.command=="auto",t.auto){let C=new Jg.MarkdownString("");C.supportHtml=!0,C.supportThemeIcons=!0,C.appendMarkdown(hj),t.stream.markdown(C)}t.interrupted=null,t.token.onCancellationRequested(async C=>{if(r.warn("Interrupted",{event:"chat.stop"}),t.interrupted=_S(t,{}),t.auto){let U=t.interrupted,W=await Jg.window.showInformationMessage("Stopped automatic mode task","Resume interactive","Stop");W&&W.startsWith("Resume")&&(t.interrupted===U?Jg.commands.executeCommand("workbench.action.chat.open","@multicoder /resume"):await Jg.window.showInformationMessage("Chat window already in use"))}});let v=i.references.map(({id:C,name:U})=>U+" "+C).join(`
`),_=i.toolReferences.map(({name:C})=>C).join(`
`),y=(i.command?"/"+i.command+" ":"")+i.prompt;return r.info(y,{event:l,command:i.command,references:v,toolrefs:_}),a.push(...await ND(t)),new Promise((C,U)=>{let W=0,K=q=>r.error(new Error(q));if(t.resolve=q=>W++?K("Resolve closed promise"):C(q),t.reject=q=>W++?K("Reject closed promise"):U(q),t.resume){let q=t.resume;return t.resume=null,q(t.request)}Promise.resolve(e(t)).then(q=>t.resolve(q)).catch(q=>t.reject(q))})}function _S(t,e){return new Promise(r=>{t.resume=r,t.resolve(e)})}function xD(t){let e=t.filter(({role:v})=>v=="user"||v=="tool");e.forEach(({content:v})=>{Array.isArray(v)&&v.forEach(_=>{_.providerOptions&&delete _.providerOptions})});let r=0,n=e.length-1,{role:i,content:a}=e[n],l=a.length-1;for(;++r<=4;){let v=a[l];if(typeof v=="object"&&(v.providerOptions={anthropic:{cache_control:{type:"ephemeral"}}}),i=="tool"||--l<0){if(--n<0)break;({role:i,content:a}=e[n]),l=a.length-1}}}function Nn(...t){return{role:"user",content:t.map(r=>({type:"text",text:Ta(r)}))}}function Jn(...t){return{role:"assistant",content:t.map(r=>({type:"text",text:Ta(r)}))}}var gj=1e3,_j=100;async function il(t,e,r=null,n=!1){let{log:i,stream:a,model:l}=t,v={};t.request.model.family.endsWith("sonnet-thought")&&(v.anthropic={thinking:{type:"enabled",budgetTokens:4096}});let _=0,y=0,C=0,U=0,W=0,K=.2,q=K,V=q;function J(_e,Le,ge={}){a.markdown(""),a.progress(`Retrying (${Le}): ${_e}`),V=q+.2*Le,i.warn(_e,{...ge,count:Le,temperature:V,event:"retry."+Le})}let re=0;for(;;){if(xD(e),await t.interrupted,++re>_j)throw new Error("Max requests per turn achieved: "+re);if(++t.counter>gj)throw new Error("Max total requests achieved: "+t.counter);let _e=new AbortController,Le=_e.signal,ge=t.token;Le.session=t;let Ee=await _D({model:l,system:ED(l),messages:e,tools:ig,temperature:V,maxTokens:8192,maxSteps:1,abortSignal:Le,experimental_toolCallStreaming:!0,experimental_repairToolCall:SD(t),providerOptions:v}),Be=!1;for await(let ct of Ee.fullStream){if(ge.isCancellationRequested)break;switch(ct.type){case"text-delta":n||a.markdown(ct.textDelta);break;case"tool-call-streaming-start":let Dr=ig[ct.toolName].progress;Dr&&!n&&(a.markdown(""),a.progress(Dr));break;case"reasoning":n||a.markdown(ct.textDelta);break;case"error":if(Kg.isInstance(ct.error)&&++_<=5){Be=!0;let $t=`Unknown tool ${ct.error.toolName}`;J($t,_,ct.error);break}if(Y_.isInstance(ct.error)&&++_<=5){Be=!0;let $t=`Invalid arguments for tool ${ct.error.toolName}`;J($t,_,ct.error);break}if(jS.isInstance(ct.error)&&++_<=5){Be=!0,J("Tool call repair failed",_,ct.error);break}let{event:Ke,count:_n,message:Pe}=ct.error;if(Ke=="retry"){J(Pe,_n,ct.error),V=q;break}throw ct.error}}if(t.interrupted){await t.interrupted;continue}let We=await Ee.response,st=await Ee.toolCalls,mt=await Ee.toolResults,At=await Ee.usage,Ur=await Ee.providerMetadata;if(Be)continue;_=0;let on="";for(let ct of mt)ct.result.startsWith("Tool error: ")&&(on=ct.result.slice(12));if(on)if(++y<3){J(on,y);continue}else if(++C<3)J("Tool execution error",C),q=K+.2*C;else throw new Error(on);else C=0,q=K;if(y=0,r&&We.messages.length==1){let{role:ct,content:Dr}=We.messages[0];if(ct=="assistant"&&Array.isArray(Dr)&&Dr.length==1){let Ke=Dr[0];if(Ke.type=="text"&&Ke.text===""&&++U<=5){J("Empty response",U),await __(5*U,ge);continue}}}U=0,V=q,e.push(...We.messages);let kn=e.pop();for(let{toolName:ct,toolCallId:Dr,args:Ke,result:_n}of mt){let Pe=ig[ct];if(Pe!=null&&Pe.finalize){let $t=await Pe.finalize(Ke,t,_n);if(kn.role=="tool"){let Vt=kn.content.find(wt=>wt.toolCallId==Dr);Vt&&(Vt.result=$t)}}}if(e.push(kn),st.length){W=0;for(let ct of st)if(ct.toolName==(r==null?void 0:r.name))return ct.args}else{if((r==null?void 0:r.name)===ei.name)return e.push(Nn("ok")),ei.fallback();if(r){let{name:ct,fallback:Dr,retry:Ke}=r;if(++W>3){if(Dr)return e.push(Nn("ok")),Dr();throw new Error(`Unable to call ${ct} tool`)}J("Unexpected stop",W,{name:ct}),await __(5*W,ge),e.push(Nn(Ke||`Reply using ${ct} tool`))}else return}}}var xb=require("vscode");var RD=".multicoder/task";async function qS(t){if(!await Xc(t))return null;let e=await xb.commands.executeCommand("vscode.executeDocumentSymbolProvider",t);if(!e||e.length===0)return null;let r=await xb.workspace.openTextDocument(t),n=e[0],i=DD(n.name),a=n.children.map(({name:l,range:v})=>({header:DD(l),content:r.getText(v).slice(l.length).trim()}));return{title:i,items:a}}function DD(t){return t=t.replace(/^#+\s+/,""),t=t.replace(/^Step \d+[\.:]*\s+/,""),t=t.replace(/^\d+[\.:]+\s+/,""),t}var yj=10;function bj(t){if(!t)return"";let{composite:e,followers:r,index:n}=t;if(e&&(n=r.length?r.slice(-1)[0].index:""),typeof n=="number")return n+1+"a";let i=parseInt(n,10),a=i>0?String(i):"",l=n.slice(a.length),v=l.slice(-1),_=l.length>1?l[0]:"",y=W=>W==""||W=="z"?"a":String.fromCharCode(W.charCodeAt(0)+1),C=y(v),U=v=="z"?y(_):_;return a+U+C}function rf(t,e={}){let{messages:r}=t,n=t.task,i=n?n.depth+(n.composite?1:0):0;if(i>=yj)throw new Error("Max depth exceeded");if(n&&!n.parent&&e.composite)return t.task={...n,...e},t.task;let a=e.index??bj(n),l=(n==null?void 0:n.id)||"";n&&!n.composite&&(l=l.split(".").slice(0,-1).join(".")),l+=(l?".":"")+(typeof a=="number"?a+1:a);let v={id:l,depth:i,folder:RD+(l?"/"+l:""),title:"",start:r.length,prompt:"",state:"",evals:null,parent:n,composite:!1,index:a,summary:"",completed:[],followers:[],edits:[],cid:t.id,...e};return t.task=v,v}async function wj(t){let e=[];if(vm(t))for(let{uri:r,isFile:n}of await L0(t))n&&e.push(await k_(r));return e}async function Oo({state:t,id:e,folder:r,depth:n,title:i,prompt:a,index:l,completed:v,edits:_,summary:y,parent:C,cid:U},W=""){let K=[];if(!n)K.push(gi("request",a));else if(typeof l=="number"){let q={id:e,name:i,parent:C.title};K.push([gi("task_metadata",Ro(q)),gi("task_instructions",a)])}else K.push(gi("task_instructions",a));if(!t&&!n&&K.push(await bm(hi(r,U))),K.push(...await wj(hi(r,U))),v.forEach(q=>K.push(Sj(q[0]))),_.length&&!v.length){let q=new Set(_.map(V=>V.path));for(let V of q)K.push(await rg(hi(V,U)))}return y&&K.push(y),W&&K.push(W),Nn(...K)}function Sj({id:t,title:e,summary:r,completed:n,edits:i}){let a={step:t,title:e,status:"completed"},l=[];l.push(gi("step_metadata",Ro(a)));let v=i.map(W=>W.summary),_=n.map(Ej);_.length?l.push(..._.map(W=>gi("implementation_details",W))):l.push(gi("implementation_details",Ro(v)));let y=new Set(i.filter(W=>!W.before).map(W=>W.path)),C=new Set(i.filter(W=>W.before&&W.after).map(W=>W.path)),U=new Set(i.filter(W=>W.before&&!W.after).map(W=>W.path));return y.forEach(W=>C.delete(W)),U.forEach(W=>C.delete(W)),l.push(gi("files_created",Ro([...y]))),l.push(gi("files_modified",Ro([...C]))),l.push(gi("files_deleted",Ro([...U]))),l.push(gi("step_summary",r)),l}function Ej(t){let{id:e,title:r,summary:n,completed:i,edits:a}=t[0],l=a.map(y=>y.summary),v=i.map(y=>y[0].summary),_=[];return _.push(e+": "+r),v.length?_.push(Ro(v)):l.length>1&&_.push(Ro(l)),_.push(n),_}async function ag(t){let{task:e,messages:r,stream:n}=t,{id:i}=e,{length:a}=r,l=i?"task "+i:"the request";n.progress("Deciding next steps..."),r.push(Jn(`Let me evaluate ${l} for clarity, complexity and workload.`)),r.push(Nn(`Sure. Reply with ${P_.name} tool only, no text.`));let v=await il(t,r,P_,!0),[_,y,C]=P_.compute(v);e.evals={...v,vagueness:_,complexity:y,workload:C},r.length=a,n.markdown("")}var ed=require("vscode");function Tm(){}Tm.prototype={diff:function(e,r){var n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.callback;typeof i=="function"&&(a=i,i={});var l=this;function v(ge){return ge=l.postProcess(ge,i),a?(setTimeout(function(){a(ge)},0),!0):ge}e=this.castInput(e,i),r=this.castInput(r,i),e=this.removeEmpty(this.tokenize(e,i)),r=this.removeEmpty(this.tokenize(r,i));var _=r.length,y=e.length,C=1,U=_+y;i.maxEditLength!=null&&(U=Math.min(U,i.maxEditLength));var W=(n=i.timeout)!==null&&n!==void 0?n:1/0,K=Date.now()+W,q=[{oldPos:-1,lastComponent:void 0}],V=this.extractCommon(q[0],r,e,0,i);if(q[0].oldPos+1>=y&&V+1>=_)return v(OD(l,q[0].lastComponent,r,e,l.useLongestToken));var J=-1/0,re=1/0;function _e(){for(var ge=Math.max(J,-C);ge<=Math.min(re,C);ge+=2){var Ee=void 0,Be=q[ge-1],We=q[ge+1];Be&&(q[ge-1]=void 0);var st=!1;if(We){var mt=We.oldPos-ge;st=We&&0<=mt&&mt<_}var At=Be&&Be.oldPos+1<y;if(!st&&!At){q[ge]=void 0;continue}if(!At||st&&Be.oldPos<We.oldPos?Ee=l.addToPath(We,!0,!1,0,i):Ee=l.addToPath(Be,!1,!0,1,i),V=l.extractCommon(Ee,r,e,ge,i),Ee.oldPos+1>=y&&V+1>=_)return v(OD(l,Ee.lastComponent,r,e,l.useLongestToken));q[ge]=Ee,Ee.oldPos+1>=y&&(re=Math.min(re,ge-1)),V+1>=_&&(J=Math.max(J,ge+1))}C++}if(a)(function ge(){setTimeout(function(){if(C>U||Date.now()>K)return a();_e()||ge()},0)})();else for(;C<=U&&Date.now()<=K;){var Le=_e();if(Le)return Le}},addToPath:function(e,r,n,i,a){var l=e.lastComponent;return l&&!a.oneChangePerToken&&l.added===r&&l.removed===n?{oldPos:e.oldPos+i,lastComponent:{count:l.count+1,added:r,removed:n,previousComponent:l.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:r,removed:n,previousComponent:l}}},extractCommon:function(e,r,n,i,a){for(var l=r.length,v=n.length,_=e.oldPos,y=_-i,C=0;y+1<l&&_+1<v&&this.equals(n[_+1],r[y+1],a);)y++,_++,C++,a.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return C&&!a.oneChangePerToken&&(e.lastComponent={count:C,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=_,y},equals:function(e,r,n){return n.comparator?n.comparator(e,r):e===r||n.ignoreCase&&e.toLowerCase()===r.toLowerCase()},removeEmpty:function(e){for(var r=[],n=0;n<e.length;n++)e[n]&&r.push(e[n]);return r},castInput:function(e){return e},tokenize:function(e){return Array.from(e)},join:function(e){return e.join("")},postProcess:function(e){return e}};function OD(t,e,r,n,i){for(var a=[],l;e;)a.push(e),l=e.previousComponent,delete e.previousComponent,e=l;a.reverse();for(var v=0,_=a.length,y=0,C=0;v<_;v++){var U=a[v];if(U.removed)U.value=t.join(n.slice(C,C+U.count)),C+=U.count;else{if(!U.added&&i){var W=r.slice(y,y+U.count);W=W.map(function(K,q){var V=n[C+q];return V.length>K.length?V:K}),U.value=t.join(W)}else U.value=t.join(r.slice(y,y+U.count));y+=U.count,U.added||(C+=U.count)}}return a}var K6=new Tm;function kD(t,e){var r;for(r=0;r<t.length&&r<e.length;r++)if(t[r]!=e[r])return t.slice(0,r);return t.slice(0,r)}function AD(t,e){var r;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(r=0;r<t.length&&r<e.length;r++)if(t[t.length-(r+1)]!=e[e.length-(r+1)])return t.slice(-r);return t.slice(-r)}function HS(t,e,r){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return r+t.slice(e.length)}function GS(t,e,r){if(!e)return t+r;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+r}function Oy(t,e){return HS(t,e,"")}function Db(t,e){return GS(t,e,"")}function PD(t,e){return e.slice(0,Tj(t,e))}function Tj(t,e){var r=0;t.length>e.length&&(r=t.length-e.length);var n=e.length;t.length<e.length&&(n=t.length);var i=Array(n),a=0;i[0]=0;for(var l=1;l<n;l++){for(e[l]==e[a]?i[l]=i[a]:i[l]=a;a>0&&e[l]!=e[a];)a=i[a];e[l]==e[a]&&a++}a=0;for(var v=r;v<t.length;v++){for(;a>0&&t[v]!=e[a];)a=i[a];t[v]==e[a]&&a++}return a}var Rb="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Ij=new RegExp("[".concat(Rb,"]+|\\s+|[^").concat(Rb,"]"),"ug"),Ob=new Tm;Ob.equals=function(t,e,r){return r.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};Ob.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(e.intlSegmenter.segment(t),function(a){return a.segment})}else r=t.match(Ij)||[];var n=[],i=null;return r.forEach(function(a){/\s/.test(a)?i==null?n.push(a):n.push(n.pop()+a):/\s/.test(i)?n[n.length-1]==i?n.push(n.pop()+a):n.push(i+a):n.push(a),i=a}),n};Ob.join=function(t){return t.map(function(e,r){return r==0?e:e.replace(/^\s+/,"")}).join("")};Ob.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var r=null,n=null,i=null;return t.forEach(function(a){a.added?n=a:a.removed?i=a:((n||i)&&MD(r,i,n,a),r=a,n=null,i=null)}),(n||i)&&MD(r,i,n,null),t};function MD(t,e,r,n){if(e&&r){var i=e.value.match(/^\s*/)[0],a=e.value.match(/\s*$/)[0],l=r.value.match(/^\s*/)[0],v=r.value.match(/\s*$/)[0];if(t){var _=kD(i,l);t.value=GS(t.value,l,_),e.value=Oy(e.value,_),r.value=Oy(r.value,_)}if(n){var y=AD(a,v);n.value=HS(n.value,v,y),e.value=Db(e.value,y),r.value=Db(r.value,y)}}else if(r)t&&(r.value=r.value.replace(/^\s*/,"")),n&&(n.value=n.value.replace(/^\s*/,""));else if(t&&n){var C=n.value.match(/^\s*/)[0],U=e.value.match(/^\s*/)[0],W=e.value.match(/\s*$/)[0],K=kD(C,U);e.value=Oy(e.value,K);var q=AD(Oy(C,K),W);e.value=Db(e.value,q),n.value=HS(n.value,C,q),t.value=GS(t.value,C,C.slice(0,C.length-q.length))}else if(n){var V=n.value.match(/^\s*/)[0],J=e.value.match(/\s*$/)[0],re=PD(J,V);e.value=Db(e.value,re)}else if(t){var _e=t.value.match(/\s*$/)[0],Le=e.value.match(/^\s*/)[0],ge=PD(_e,Le);e.value=Oy(e.value,ge)}}var Nj=new Tm;Nj.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(Rb,"]+|[^\\S\\n\\r]+|[^").concat(Rb,"]"),"ug");return t.match(e)||[]};var kb=new Tm;kb.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var r=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var i=0;i<n.length;i++){var a=n[i];i%2&&!e.newlineIsToken?r[r.length-1]+=a:r.push(a)}return r};kb.equals=function(t,e,r){return r.ignoreWhitespace?((!r.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),Tm.prototype.equals.call(this,t,e,r)};function LD(t,e,r){return kb.diff(t,e,r)}var Cj=new Tm;Cj.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var xj=new Tm;xj.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function VS(t){"@babel/helpers - typeof";return VS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VS(t)}var ky=new Tm;ky.useLongestToken=!0;ky.tokenize=kb.tokenize;ky.castInput=function(t,e){var r=e.undefinedReplacement,n=e.stringifyReplacer,i=n===void 0?function(a,l){return typeof l>"u"?r:l}:n;return typeof t=="string"?t:JSON.stringify(zS(t,null,null,i),i,"  ")};ky.equals=function(t,e,r){return Tm.prototype.equals.call(ky,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),r)};function zS(t,e,r,n,i){e=e||[],r=r||[],n&&(t=n(i,t));var a;for(a=0;a<e.length;a+=1)if(e[a]===t)return r[a];var l;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),l=new Array(t.length),r.push(l),a=0;a<t.length;a+=1)l[a]=zS(t[a],e,r,n,i);return e.pop(),r.pop(),l}if(t&&t.toJSON&&(t=t.toJSON()),VS(t)==="object"&&t!==null){e.push(t),l={},r.push(l);var v=[],_;for(_ in t)Object.prototype.hasOwnProperty.call(t,_)&&v.push(_);for(v.sort(),a=0;a<v.length;a+=1)_=v[a],l[_]=zS(t[_],e,r,n,_);e.pop(),r.pop()}else l=t;return l}var WS=new Tm;WS.tokenize=function(t){return t.slice()};WS.join=WS.removeEmpty=function(t){return t};function KS(t){let{task:e,stream:r}=t,{id:n,title:i}=e,a=`<table><tr><th> $(list-tree) ${n} ${i} </th></tr></table>`,l=new ed.MarkdownString(a);l.supportHtml=!0,l.supportThemeIcons=!0,r.markdown(l)}async function Ab(t,e,r){let n=(...U)=>`command:multicoder.diffView?${encodeURIComponent(JSON.stringify(U))}`,i=U=>`<span class="codicon codicon-${U}" style="color:var(--vscode-foreground);"></span>`,a=new ed.MarkdownString(`

`);a.supportHtml=!0,a.supportThemeIcons=!0,a.isTrusted={enabledCommands:["multicoder.diffView"]},a.appendMarkdown(`<h3>${i("check")} ${r}</h3>

`),e.forEach(({summary:U,path:W,id:K})=>{a.appendMarkdown(`- [${U}](${n(W,K,t.id)} 'Open Diff')
`)}),a.appendMarkdown(`

`),t.stream.markdown(a),t.stream.button({title:"Apply All",command:"multicoder.action",arguments:[C],tooltip:"Shows confirmation panel (refactor preview)"});let l=new Set(e.map(({path:U})=>U)),v=P0(),_=new Map;async function y(U){try{return await zh(U)}catch{return""}}for(let U of l.values()){let W="",K="",q=hi(U,t.id),V=Jl(q);v.find(J=>J.path===V.path)?W=(await ed.workspace.openTextDocument(V)).getText():W=await y(V),K=await y(q),_.set(U,{before:W,after:K})}async function C(){let U=new ed.WorkspaceEdit;for(let W of l.values()){let{before:K,after:q}=_.get(W)||{},V=Jl(hi(W,t.id));K||(V=V.with({scheme:"untitled"}));let J=await ed.workspace.openTextDocument(V),re=J.getText(),_e=q;re!==_e&&Dj(U,V,re,_e,!0)}await ed.workspace.applyEdit(U),t.log.info(r,{event:"action.all"})}}function Dj(t,e,r,n,i=!1,a=""){let l=LD(r,n,{ignoreWhitespace:!1}),v=0,_={needsConfirmation:i,label:a};for(let y=0;y<l.length;y++){let C=l[y];if(C.removed){let U=new ed.Range(v,0,v+C.count,0),W=l[++y];W.added?t.replace(e,U,W.value,_):(t.delete(e,U,_),v+=(W==null?void 0:W.count)||0)}else C.added&&(t.insert(e,new ed.Position(v,0),C.value,_),v-=C.count);v+=C.count}}async function yv(t,e,r){let n=e.length;if(t.auto)return[];e.slice(-1)[0].role!="assistant"&&e.push(Jn("I will now suggest some followup actions.")),e.push(Nn(r));let i=await il(t,e,qs,!0);return e.length=n,i.actions.map(a=>({command:"",prompt:a.replace(/^-\s+/,"")}))}var Rj=()=>Zt`
    Suggest possible changes or improvements to the code created or updated in the current implementation step. 
    Include optional elements, alternative approaches or high-level improvements.
    Offer them as followup actions using ${qs.name} tool.
    Only include the actions which are in scope for this current step.
`;async function JS(t){let{task:e}=t,{title:r,folder:n}=e,i=await qS(hi(n+"/implementation_plan.md",t.id));return i&&!r&&(e.title=i.title),!i||i.items.length<2?Oj(t):kj(t,i)}async function Oj(t){let{task:e,messages:r,log:n}=t,{id:i,depth:a,title:l}=e;n.info(`${i} ${l}`,{event:"step.implement"});let v=a?"this task":"the request";r.length=e.start,r.push(await Oo(e),Jn(`Let me implement ${v} now`),Nn(`Sure. Finish ${v}, then deliver a summary using ${ei.name} tool.`));let _=await il(t,r,ei);return e.summary=_.text||(l||v)+" is completed.",await Pb(t)}async function kj(t,e){let{task:r,messages:n}=t,{header:i,content:a}=e.items[0];n.length=r.start,n.push(await Oo(r),Jn(`I will start working on ${e.title}. The first step is: ${i}`));let l=rf(t,{index:0,title:i,prompt:a});return KS(t),n.push(await Oo(l)),await ag(t),await Ay(t,!0)}async function FD(t){let{task:e,messages:r}=t,n=[],i=[];do n.unshift(e),i.unshift(...e.edits),e=e.parent,n[0].parent=null;while(!e.composite);let{folder:a,completed:l}=e,v=await qS(hi(a+"/implementation_plan.md",t.id));if(l.push(n),e.edits.push(...i),t.task=e,l.length>=v.items.length)return await Aj(t);let _=l.length,{header:y,content:C}=v.items[_];return r.length=e.start,r.push(await Oo(e),Jn(`I will continue working on ${v.title}. The next step is ${_+1}: ${y}`)),e=rf(t,{index:_,title:y,prompt:C}),KS(t),r.push(await Oo(e)),await ag(t),await Ay(t,!0)}async function UD(t,e){let{messages:r}=t,n=rf(t,{prompt:e,composite:!0});return r.push(await Oo(n)),await ag(t),await Ay(t,!0)}async function Aj(t){let{task:e,messages:r}=t;r.length=e.start,r.push(await Oo(e),Jn(`All the steps of ${e.title} are now completed. Let me summarize what has been done.`),Nn(`Sure. Deliver a summary using ${ei.name} tool.`));let n=await il(t,r,ei);return e.summary=n.text||e.title+" is completed.",await Pb(t)}async function Pb(t){let{task:e,messages:r,stream:n}=t,{index:i,title:a,parent:l,edits:v,followers:_,summary:y}=e;e.state="ready",_.length&&(y&&(n.markdown(y),n.markdown(`

`)),_.forEach(U=>{n.markdown(U.summary),n.markdown(`

`)})),v.length>1&&await Ab(t,v,a||"Task completed"),l||(t.auto=!1);let C=await yv(t,r,Rj());return l&&(typeof i=="number"?C.push({command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"},{command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"}):C.push({command:"",prompt:"",label:"\u25B7\xA0 back to parent (Enter)"})),r.length=e.start,r.push(await Oo(e)),r.push(Jn("I will make some changes in this last step")),{suggestions:C}}var Pj=t=>Zt`
    Use ${dp.name} tool to create ${t} file containing the detailed implementation plan for this task.
    Split the task into smaller, more manageable steps and specify what should be done at each step.
    Strictly follow the requirements and design documents if available. 
    Only plan for elements and features which are explicitely included in the specs and design.
    Take into account the changes already made in the previous tasks.
    Carefully think through all steps and mentally verify the proposed implementation.
    Follow KISS, YAGNI and SOLID principles, focus on simplicity above all other things.
    This plan is for an implementation by an AI coding agent, it must exclude any human activities (meetings, peer review, manual testing etc)
    Only use the capabilities and the information which you as an AI coding agent have explicit access to as part of this project.
    The document should contain a title and multiple sections (linear structure, no nested sub-sections)
    Each section represents one step of the plan and consists of a header and a step description.
    If the amount of work is very small, describe it as one single step (title with plain text, no section heading).
    Apply a very dense, concise writing style, but keep all minor details.
    Provide a short summary using ${ei.name} tool.
`,jD=t=>Zt`
    ${t}
    ---
    Modify the document, then deliver a very short summary using ${ei.name} tool.
`,Mj=()=>Zt`
    Carefully analyse each section of the plan to identify any inconsistencies or logical errors. 
    Check for edge cases, cross-dependencies and anything, that can affect successful implementation.
`,Lj=()=>Zt`
    Suggest possible changes which will make the implementation plan more clear, precise and easy to understand. 
    Include optional elements, alternative implementations or high-level improvements.
    Offer them as followup actions using ${qs.name} tool.
    Only include the actions which improve the content of the implementation plan.
`;async function YD(t,e){return rf(t,{prompt:e,composite:!0}),Mb(t)}async function Mb(t,e=!1){let{task:r,log:n}=t,{id:i,title:a,depth:l,folder:v,evals:_}=r,y=v+"/implementation_plan.md",C=l?"this task":"this request";if(e&&(!_.planning&&_.workload<2.5||_.workload<l))return JS(t);r.composite=!0,n.info(`${i} ${a}`,{event:"step.plan"});let U="Planning...",W=Jn(`Let me create an implementation plan for ${C}.`),K=Nn(Pj(y));return $D(t,U,W,K)}async function Fj(t,e){let r="Updating plan...",n=Jn("Let me do some changes in the implementation plan."),i=Nn(jD(e));return e=="i"&&(r="Improving plan...",n=Jn("Let me review and improve the implementation plan."),i=Nn(jD(Mj()))),$D(t,r,n,i)}async function $D(t,e,r,n){let{task:i,messages:a,stream:l}=t;return l.progress(e),a.length=i.start,a.push(await Oo(i),r,n),await il(t,a,ei),Uj(t)}async function Uj(t){let{task:e,messages:r}=t;e.state="plan";let n=await yv(t,r,Lj());return n.push({command:"",prompt:"i",label:"\u2B6E\xA0 review and improve"},{command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"},{command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"}),r.length=e.start,r.push(await Oo(e)),r.push(Jn("Let me do some changes in the implementation plan.")),{suggestions:n}}var BD={handlePrompt:Fj,handleNext:JS};var jj=t=>Zt`
    Use ${dp.name} tool to create solution design document(s) in the ${t}/ directory.
    Analyze the current code, research possible options and design an optimal solution.
    Your goal is to find the most simple solution, very easy to understand and maintain. 
    Only include the features which are explicitely required. Skip anything that can be added at a later stage. Skip implementation steps.
    Keep it short and simple for trivial tasks but include enough details for larger elements.
    Apply a very dense, concise writing style, but keep all minor details.
    Provide a short summary using ${ei.name} tool.
`,qD=t=>Zt`
    ${t}
    ---
    Modify the document(s), then deliver a very short summary using ${ei.name} tool.
`,Yj=()=>Zt`
    Carefully review the design document(s) to find any missing elements.
    Add or correct any significant items and remove anything that is not strictly necessary.
    Focus strictly on the solution design - DO NOT try to write code, DO NOT make step-by-step plan at this point.
`,$j=()=>Zt`
    Suggest possible changes which may make the solution design more clear, precise and easy to understand. 
    Include optional elements, alternative solutions or high-level improvements.
    Offer them as followup actions using ${qs.name} tool.
    Only include the actions which improve the content of the solution design document(s).
`;async function HD(t,e){return rf(t,{prompt:e,composite:!0}),Lb(t)}async function Lb(t,e=!1){let{task:r,log:n}=t,{id:i,title:a,depth:l,folder:v,evals:_}=r,y=l?"this task":"the request";if(e&&(!_.design&&_.complexity<3||_.complexity<l))return Mb(t,!0);n.info(`${i} ${a}`,{event:"step.design"});let C="Designing solution...",U=Jn(`Let me analyze ${y}, explore the existing code and design a solution.`),W=Nn(jj(v));return GD(t,C,U,W)}async function Bj(t,e){let r="Updating requirements...",n=Jn("Let me do some changes in the requirements document."),i=Nn(qD(e));return e=="i"&&(r="Improving requirements...",n=Jn("Let me review and improve the requirements document."),i=Nn(qD(Yj()))),GD(t,r,n,i)}async function GD(t,e,r,n){let{task:i,messages:a,stream:l}=t;return l.progress(e),a.length=i.start,a.push(await Oo(i),r,n),await il(t,a,ei),qj(t)}async function qj(t){let{task:e,messages:r}=t;e.state="design";let n=await yv(t,r,$j());return n.push({command:"",prompt:"i",label:"\u2B6E\xA0 review and improve"},{command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"},{command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"}),r.length=e.start,r.push(await Oo(e)),await ag(t),r.push(Jn("Let me do some changes in the solution design document(s).")),{suggestions:n}}var VD={handlePrompt:Bj,handleNext:Mb};var Hj=t=>Zt`
    Use ${dp.name} tool to create requirements document in the ${t}/ directory.
    Clarify the request, removing any ambiguities or omissions.
    Use ${A_.name} tool to obtain the missing information.
    Include implied requirements derived from the project configuration and context.
    Skip implementation, focus strictly on the requirements.
    Keep it short and simple for trivial tasks but include enough details for larger requests.
    Produce a minimal, but complete document, do not leave any open questions for the future.
    Apply a very dense, concise writing style, but keep all minor details.
    Provide a short summary using ${ei.name} tool.
`,zD=t=>Zt`
    ${t}
    ---
    Modify the document, then deliver a very short summary using ${ei.name} tool.
`,Gj=()=>Zt`
    Carefully review the requirements document to find any missing elements.
    Add or correct any significant items and remove anything that is not strictly necessary.
    Focus strictly on the requirements - DO NOT try to design the solution, define data structures or write some code at this point.
`,Vj=()=>Zt`
    Suggest possible changes which may make the requirements more clear, precise and easy to understand. 
    Include optional elements, alternative approaches or high-level improvements.
    Offer them as followup actions using ${qs.name} tool.
    Only include the actions which improve the content of the requirement specification document(s).
`;async function WD(t,e){return rf(t,{prompt:e,composite:!0}),Ay(t)}async function Ay(t,e=!1){let{task:r,log:n}=t,{id:i,title:a,depth:l,folder:v,evals:_}=r;if(e&&(!_.requirements&&_.vagueness<3||l>0))return Lb(t,!0);n.info(`${i} ${a}`,{event:"step.spec"});let y="Creating requirements spec...",C=Jn("Let me clarify the request and create a requirements document."),U=Nn(Hj(v));return KD(t,y,C,U)}async function zj(t,e){let r="Updating requirements...",n=Jn("Let me do some changes in the requirements document."),i=Nn(zD(e));return e=="i"&&(r="Improving requirements...",n=Jn("Let me review and improve the requirements document."),i=Nn(zD(Gj()))),KD(t,r,n,i)}async function KD(t,e,r,n){let{task:i,messages:a,stream:l}=t;return l.progress(e),a.length=i.start,a.push(await Oo(i),r,n),await il(t,a,ei),Wj(t)}async function Wj(t){let{task:e,messages:r}=t;e.state="spec";let n=await yv(t,r,Vj());return n.push({command:"",prompt:"i",label:"\u2B6E\xA0 review and improve"},{command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"},{command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"}),r.length=e.start,r.push(await Oo(e)),await ag(t),r.push(Jn("Let me do some changes in the requirements document.")),{suggestions:n}}var JD={handlePrompt:zj,handleNext:Lb};var Kj=Zt`
    Tell about yourself and how you can help here.
`,Jj=()=>Zt`
    Suggest possible changes or improvements to the code created or updated in the current turn. 
    Include optional elements, alternative approaches or high-level improvements.
    Offer them as followup actions using ${qs.name} tool.
    Only include the actions which are in scope for this current turn.
`;async function ZD(t,e){return rf(t,{prompt:e}),Zj(t,"Thinking...",Nn(e))}async function Zj(t,e,r){let{task:n,messages:i,stream:a}=t;a.progress(e),i.push(r);let l=await il(t,i,ei),v=i.pop(),_=i.pop(),y=i.length+1;if(v.role=="tool"&&Array.isArray(_.content)){let C=_.content.filter(U=>U.type!="tool-call");C.push({type:"text",text:l.text}),i.push({role:"assistant",content:C}),n.summary=l.text}else{i.push(_),i.push(Nn(`Reply with a short summary of this turn using ${ei.name} tool.`));let C=await il(t,i,ei,!0);i.length=y,n.summary=C.text}return Xj(t)}async function Xj(t){let{task:e,messages:r}=t;e.state="ready";let n=e.edits;return n.length>1&&await Ab(t,n,e.title||"Task completed"),e.parent||(t.auto=!1),{suggestions:await yv(t,r,Jj())}}async function Qj(t){let{task:e,messages:r}=t,{parent:n,index:i}=e;if(typeof i=="number"||parseInt(i,10)>0)return await FD(t);if(n){let a=[],l=[];do a.unshift(e),l.unshift(...e.edits),e=e.parent,a[0].parent=null;while(!e.composite);return e.followers.push(...a),e.edits.push(...l),t.task=e,r.length=e.start,r.push(await Oo(e)),await Pb(t)}else return await ZD(t,Kj)}var XD={handlePrompt:ZD,handleNext:Qj};var eY=1e3,tY={auto:UD,spec:WD,design:HD,plan:YD},eR={spec:JD,design:VD,plan:BD,ready:XD};async function tR(t){let{task:e,request:r}=t,{command:n,prompt:i}=r;e||(e=rf(t,{state:"ready",composite:!0})),e.state||(e=e.parent,t.task=e),n=="auto"&&!i&&(n="");let a=null,l=0;for(n?a=await rY(t,n,i):i?a=await nY(t,i):a=await QD(t);t.auto;)if(a=await QD(t),++l>eY)throw new Error("Too many steps in autonomous run");return a}async function rY(t,e,r){let n=tY[e];if(typeof n!="function")throw new Error("Unknown command: "+e);return n(t,r)}async function nY(t,e){let{task:r}=t;return eR[r.state].handlePrompt(t,e)}async function QD(t){let{task:e}=t;return eR[e.state].handleNext(t)}var nR=require("vscode"),iY=()=>`
Multicoder can work with LLM models provided by **GitHub Copilot** (default configuration) or 
send requests directly to the core provider APIs (**Anthropic**, **OpenAI**).

If you have your own API key and want to use it instead of the Github models, select 'Core Providers' in the Model Provider dropdown (settings panel)
and set your API key(s) using the buttons below.

`;async function rR(t,e){var n;let r=await t.ext.secrets.get(e)||((n=process==null?void 0:process.env)==null?void 0:n[e]);return r&&r.slice(0,12)+"..."+r.slice(-4)}async function ZS(t){let{log:e,stream:r}=t;nR.commands.executeCommand("workbench.action.openSettings","@ext:multicoder.multicoder"),e.info("options",{event:"options"}),r.markdown(iY());let n=await rR(t,"ANTHROPIC_API_KEY");r.markdown(`Anthropic API key: ${n}`),r.button({command:"multicoder.storeApiKey",title:"Set Anthropic key",arguments:["ANTHROPIC_API_KEY","Anthropic API key"]}),r.markdown(`

`);let i=await rR(t,"OPENAI_API_KEY");r.markdown(`OpenAI API key: ${i}`),r.button({command:"multicoder.storeApiKey",title:"Set OpenAI key",arguments:["OPENAI_API_KEY","OpenAI API key"]})}var iR,aR;async function aY(t){var U,W;let{request:e,ext:r}=t,n=e.model.id,i=bv.workspace.getConfiguration("multicoder"),a=i.get("modelProvider");if(n==iR&&a==aR&&t.model)return;iR=n,aR=a;let l=e.model.family;if(l.startsWith("o1")&&(l=a=="auto"?"deepseek-chat":"o3-mini"),a=="default"&&(a="copilot"),a=="copilot"){t.model=dS({id:l,provider:"copilot",apiKey:""});return}if(a=="auto"&&(a=(U=pS.find(K=>K.family==l))==null?void 0:U.provider,!a))throw new Error("Cannot find model: "+l);let v=nC.find(K=>K.id==a),_=pS.find(K=>K.provider==a&&K.family==l),{envKeyName:y}=v,C=await r.secrets.get(y)||((W=process==null?void 0:process.env)==null?void 0:W[y]);if(!C){await ZS(t);return}t.model=dS({..._,apiKey:C})}function oY({history:t}){for(let e=t.length-1;e>=0;e--){let r=t[e];if(r instanceof bv.ChatResponseTurn){let{id:n,messages:i}=r.result.metadata||{};if(n)return[n,i]}}return[]}function oR(t){let{ext:e,log:r,recent:n}=t,i=bv.chat.createChatParticipant("multicoder",async(C,U,W,K)=>{let[q,V]=oY(U),{sessionId:J}=C.toolInvocationToken,re=q&&n.get(q);!re&&J&&(re=n.get(J)),q??(q=A0()),V??(V=[]),re||(re={id:q,messages:V,...t,request:{},chat:{},stream:{}},re.log={...t.log,session:re}),q=re.id,n.set(q,re),J&&n.set(J,re),Object.assign(re,{token:K}),Object.assign(re.request,C),Object.assign(re.chat,U),Object.assign(re.stream,W),re.counter=0,y(re.request);try{if(await aY(re),!re.model)return;if(C.command=="options")return await ZS(re),{metadata:{id:q,messages:V}};let _e=await CD(re,tR);return{metadata:{id:q,messages:re.messages,followups:(_e==null?void 0:_e.suggestions)||[]}}}catch(_e){throw r.error(_e),re.model=null,_e}});i.iconPath=bv.Uri.joinPath(e.extensionUri,"resources","multicoder.png"),i.onDidReceiveFeedback(({kind:C})=>{r.info(C?"Good":"Bad",{event:"feedback"})});let a=e.extension.packageJSON.contributes.chatParticipants[0].commands,l=a.filter(({when:C})=>C==null?void 0:C.startsWith("!")).map(({name:C})=>C),v=[...l,"resume"];i.followupProvider={provideFollowups(C){var U;return _(C.metadata?C.metadata.commands:v),((U=C.metadata)==null?void 0:U.followups)||[]}};function _(C){for(let{name:U,when:W}of a){let K=!!C&&C.includes(U)!=W.startsWith("!");bv.commands.executeCommand("setContext",W.replace("!",""),K)}}function y(C){!C.command&&a.find(({name:U})=>"/"+U==C.prompt)&&(r.warn("Command not processed: "+C.prompt),C.command=C.prompt.slice(1),C.prompt="")}}function sY(t){let e={ext:t,config:sR.workspace.getConfiguration("multicoder"),log:null,telemetry:null,recent:new Map};_I(e),bI(e),II(e),DI(e),oR(e)}function uY(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

@microsoft/1ds-core-js/dist/es5/ms.core.js:
  (*!
   * 1DS JS SDK Core, 4.3.5
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.6 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

@microsoft/1ds-post-js/dist/es5/ms.post.js:
  (*!
   * 1DS JS SDK POST plugin, 4.3.5
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.6 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.5
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.6 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.5
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.6 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)
*/
//# sourceMappingURL=extension.js.map
