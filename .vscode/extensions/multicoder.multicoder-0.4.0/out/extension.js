var QI=Object.create;var Ag=Object.defineProperty;var eN=Object.getOwnPropertyDescriptor;var tN=Object.getOwnPropertyNames;var rN=Object.getPrototypeOf,nN=Object.prototype.hasOwnProperty;var Ld=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),mS=(e,t)=>{for(var r in t)Ag(e,r,{get:t[r],enumerable:!0})},hS=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of tN(t))!nN.call(e,o)&&o!==r&&Ag(e,o,{get:()=>t[o],enumerable:!(n=eN(t,o))||n.enumerable});return e};var ky=(e,t,r)=>(r=e!=null?QI(rN(e)):{},hS(t||!e||!e.__esModule?Ag(r,"default",{value:e,enumerable:!0}):r,e)),aN=e=>hS(Ag({},"__esModule",{value:!0}),e);var IS=Ld((nk,TS)=>{function _S(e){return Array.isArray(e)?e:[e]}var Uy="",gS=" ",Ly="\\",sN=/^\s+$/,uN=/(?:[^\\]|^)\\$/,cN=/^\\!/,lN=/^\\#/,fN=/\r?\n/g,dN=/^\.*\/|^\.+$/,Fy="/",wS="node-ignore";typeof Symbol<"u"&&(wS=Symbol.for("node-ignore"));var yS=wS,pN=(e,t,r)=>Object.defineProperty(e,t,{value:r}),vN=/([0-z])-([0-z])/g,bS=()=>!1,mN=e=>e.replace(vN,(t,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?t:Uy),hN=e=>{let{length:t}=e;return e.slice(0,t-t%2)},_N=[[/^\uFEFF/,()=>Uy],[/((?:\\\\)*?)(\\?\s+)$/,(e,t,r)=>t+(r.indexOf("\\")===0?gS:Uy)],[/(\\+?)\s/g,(e,t)=>{let{length:r}=t;return t.slice(0,r-r%2)+gS}],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,r)=>t+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(e,t,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return t+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>Ly],[/\\\\/g,()=>Ly],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,t,r,n,o)=>t===Ly?`\\[${r}${hN(n)}${o}`:o==="]"&&n.length%2===0?`[${mN(r)}${n}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],SS=Object.create(null),gN=(e,t)=>{let r=SS[e];return r||(r=_N.reduce((n,[o,u])=>n.replace(o,u.bind(e)),e),SS[e]=r),t?new RegExp(r,"i"):new RegExp(r)},$y=e=>typeof e=="string",yN=e=>e&&$y(e)&&!sN.test(e)&&!uN.test(e)&&e.indexOf("#")!==0,SN=e=>e.split(fN),jy=class{constructor(t,r,n,o){this.origin=t,this.pattern=r,this.negative=n,this.regex=o}},wN=(e,t)=>{let r=e,n=!1;e.indexOf("!")===0&&(n=!0,e=e.substr(1)),e=e.replace(cN,"!").replace(lN,"#");let o=gN(e,t);return new jy(r,e,n,o)},bN=(e,t)=>{throw new t(e)},hm=(e,t,r)=>$y(e)?e?hm.isNotRelative(e)?r(`path should be a \`path.relative()\`d string, but got "${t}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${t}\``,TypeError),ES=e=>dN.test(e);hm.isNotRelative=ES;hm.convert=e=>e;var Yy=class{constructor({ignorecase:t=!0,ignoreCase:r=t,allowRelativePaths:n=!1}={}){pN(this,yS,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[yS]){this._rules=this._rules.concat(t._rules),this._added=!0;return}if(yN(t)){let r=wN(t,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(t){return this._added=!1,_S($y(t)?SN(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,r){let n=!1,o=!1;return this._rules.forEach(u=>{let{negative:m}=u;if(o===m&&n!==o||m&&!n&&!o&&!r)return;u.regex.test(t)&&(n=!m,o=m)}),{ignored:n,unignored:o}}_test(t,r,n,o){let u=t&&hm.convert(t);return hm(u,t,this._allowRelativePaths?bS:bN),this._t(u,r,n,o)}_t(t,r,n,o){if(t in r)return r[t];if(o||(o=t.split(Fy)),o.pop(),!o.length)return r[t]=this._testOne(t,n);let u=this._t(o.join(Fy)+Fy,r,n,o);return r[t]=u.ignored?u:this._testOne(t,n)}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return _S(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}},Rg=e=>new Yy(e),EN=e=>hm(e&&hm.convert(e),e,bS);Rg.isPathValid=EN;Rg.default=Rg;TS.exports=Rg;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let e=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");hm.convert=e;let t=/^[a-z]:\//i;hm.isNotRelative=r=>t.test(r)||ES(r)}});var LS=Ld((Lg,MS)=>{(function(e,t){typeof Lg=="object"&&typeof MS<"u"?t(Lg):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.oneDS=e.oneDS||{}))})(Lg,function(e){"use strict";var t="function",r="object",n="undefined",o="prototype",u=Object,m=u[o];function y(a,c){return a||c}function T(a,c){return a[c]}var D=void 0,U=null,H="",ne="function",pe="object",ce="prototype",ee="__proto__",Q="undefined",ve="constructor",Pe="Symbol",We="_polyfill",Ae="length",Ze="name",Tt="call",Dt="toString",Lt=y(Object),it=T(Lt,ce),Ht=y(String),xr=T(Ht,ce),oa=y(Math),ei=y(Array),Pr=T(ei,ce),xn=T(Pr,"slice");function nt(a,c){try{return{v:a.apply(this,c)}}catch(p){return{e:p}}}function ho(a,c){var p=nt(a);return p.e?c:p.v}var Ve;function Tr(a){return function(c){return typeof c===a}}function Bn(a){var c="[object "+a+"]";return function(p){return!!(p&&kt(p)===c)}}function kt(a){return it[Dt].call(a)}function Ft(a,c){return typeof a===c}function rt(a){return typeof a===Q||a===Q}function yn(a){return!Wt(a)}function at(a){return a===U||rt(a)}function Dc(a){return a===U||!Wt(a)}function Wt(a){return!!a||a!==D}function qi(a){return!Ve&&(Ve=["string","number","boolean",Q,"symbol","bigint"]),a!==pe&&Ve.indexOf(a)!==-1}var Gt=Tr("string"),tr=Tr(ne);function Yr(a){return!a&&at(a)?!1:!!a&&typeof a===pe}var qt=T(ei,"isArray"),an=Bn("Date"),je=Tr("number"),Kn=Tr("boolean"),Ct=Bn("Error");function wr(a){return!!(a&&a.then&&tr(a.then))}function ti(a){return!a||!Bi(a)}function Bi(a){return!(!a||ho(function(){return!(a&&0+a)},!a))}var Gr=T(Lt,"getOwnPropertyDescriptor");function Sn(a,c){return!!a&&it.hasOwnProperty[Tt](a,c)}var zi=y(T(Lt,"hasOwn"),ga);function ga(a,c){return Sn(a,c)||!!Gr(a,c)}function Ar(a,c,p){if(a&&Yr(a)){for(var g in a)if(zi(a,g)&&c[Tt](p||a,g,a[g])===-1)break}}var ar={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function pr(a){var c={};if(c[ar.c]=!0,c[ar.e]=!0,a.l){c.get=function(){return a.l.v};var p=Gr(a.l,"v");p&&p.set&&(c.set=function(g){a.l.v=g})}return Ar(a,function(g,b){c[ar[g]]=yn(b)?c[ar[g]]:b}),c}var $r=T(Lt,"defineProperty");function qf(a,c,p,g,b,x){var R={e:x,c:b};return p&&(R.g=p),g&&(R.s=g),$r(a,c,pr(R))}function wn(a,c,p){return $r(a,c,pr(p))}function El(a,c,p,g,b){var x={};return Ar(a,function(R,P){Cc(x,R,c?P:R,b),Cc(x,P,p?P:R,b)}),g?g(x):x}function Cc(a,c,p,g){$r(a,c,{value:p,enumerable:!0,writable:!!g})}var bn=y(Ht),qa="[object Error]";function ur(a,c){var p=H,g=it[Dt][Tt](a);g===qa&&(a={stack:bn(a.stack),message:bn(a.message),name:bn(a.name)});try{p=JSON.stringify(a,U,c?typeof c=="number"?c:4:D),p=(p?p.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):U)||bn(a)}catch(b){p=" - "+ur(b,c)}return g+": "+p}function Pn(a){throw new Error(a)}function zn(a){throw new TypeError(a)}var _o=T(Lt,"freeze");function Is(a){return a}function xc(a){return a[ee]||U}var Tl=T(Lt,"assign"),go=T(Lt,"keys");function Bo(a){return _o&&Ar(a,function(c,p){(qt(p)||Yr(p))&&Bo(p)}),On(a)}var On=y(_o,Is),yo=y(T(Lt,"seal"),Is),Ns=y(T(Lt,"getPrototypeOf"),xc);function ya(a){return El(a,1,0,On)}function ju(a){return El(a,0,0,On)}var Ds=ju({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Nr="__tsUtils$gblCfg",Lr;function ri(){var a;return typeof globalThis!==Q&&(a=globalThis),!a&&typeof self!==Q&&(a=self),!a&&typeof window!==Q&&(a=window),!a&&typeof global!==Q&&(a=global),a}function Hi(){if(!Lr){var a=nt(ri).v||{};Lr=a[Nr]=a[Nr]||{}}return Lr}var pn=ni;function ni(a,c,p){var g=c?c[a]:U;return function(b){var x=(b?b[a]:U)||g;if(x||p){var R=arguments;return(x||p).apply(b,x?xn[Tt](R,1):R)}zn('"'+bn(a)+'" not defined for '+ur(b))}}function ai(a){return function(c){return c[a]}}var Cs=T(oa,"max"),Yd=pn("slice",xr),on=pn("substring",xr),So=ni("substr",xr,zo);function zo(a,c,p){return at(a)&&zn("Invalid "+ur(a)),p<0?H:(c=c||0,c<0&&(c=Cs(c+a[Ae],0)),rt(p)?Yd(a,c):Yd(a,c,c+p))}function kn(a,c){return on(a,0,c)}var Ho="_urid",uu;function Ba(){if(!uu){var a=Hi();uu=a.gblSym=a.gblSym||{k:{},s:{}}}return uu}var sn;function Mn(a){var c={description:bn(a),toString:function(){return Pe+"("+a+")"}};return c[We]=!0,c}function Yu(a){var c=Ba();if(!zi(c.k,a)){var p=Mn(a),g=go(c.s).length;p[Ho]=function(){return g+"_"+p[Dt]()},c.k[a]=p,c.s[p[Ho]()]=bn(a)}return c.k[a]}function ii(a){!sn&&(sn={});var c,p=Ds[a];return p&&(c=sn[p]=sn[p]||Mn(Pe+"."+p)),c}var Ir;function sa(){Ir=Hi()}function Bf(a){var c={};return!Ir&&sa(),c.b=Ir.lzy,$r(c,"v",{configurable:!0,get:function(){var p=a();return Ir.lzy||$r(c,"v",{value:p}),c.b=Ir.lzy,p}}),c}function Sa(a){return $r({toJSON:function(){return a}},"v",{value:a})}var Go="window",Pc;function Vo(a,c){var p;return function(){return!Ir&&sa(),(!p||Ir.lzy)&&(p=Sa(nt(a,c).v)),p.v}}function zf(a){return!Ir&&sa(),(!Pc||a===!1||Ir.lzy)&&(Pc=Sa(nt(ri).v||U)),Pc.v}function Qr(a,c){var p;if(!Pc||c===!1?p=zf(c):p=Pc.v,p&&p[a])return p[a];if(a===Go)try{return window}catch{}return U}function Il(){return!!za()}var za=Vo(Qr,["document"]);function $d(){return!!oi()}var oi=Vo(Qr,[Go]);function Yp(){return!!si()}var si=Vo(Qr,["navigator"]);function Nl(){return!!Gi()}var Gi=Vo(Qr,["history"]),Hf=Vo(function(){return!!nt(function(){return process&&(process.versions||{}).node}).v}),hr,Ko;function Gf(){return hr=Sa(nt(Qr,[Pe]).v),hr}function Ha(a){var c=(Ir.lzy?0:hr)||Gf();return c.v?c.v[a]:D}function Ac(){return!!Pt()}function Pt(){return!Ir&&sa(),((Ir.lzy?0:hr)||Gf()).v}function ui(a,c){var p=Ds[a];!Ir&&sa();var g=(Ir.lzy?0:hr)||Gf();return g.v?g.v[p||a]:c?D:ii(a)}function $u(a,c){!Ir&&sa();var p=(Ir.lzy?0:hr)||Gf();return p.v?p.v(a):c?U:Mn(a)}function Dl(a){return!Ir&&sa(),Ko=(Ir.lzy?0:Ko)||Sa(nt(Ha,["for"]).v),(Ko.v||Yu)(a)}function Uv(a){return!!a&&tr(a.next)}function Ei(a){return!Dc(a)&&tr(a[ui(3)])}var Cl;function qd(a,c,p){if(a&&(Uv(a)||(!Cl&&(Cl=Sa(ui(3))),a=a[Cl.v]?a[Cl.v]():U),Uv(a))){var g=D,b=D;try{for(var x=0;!(b=a.next()).done&&c[Tt](p||a,b.value,x,a)!==-1;)x++}catch(R){g={e:R},a.throw&&(b=U,a.throw(g))}finally{try{b&&!b.done&&a.return&&a.return(b)}finally{if(g)throw g.e}}}}function cu(a,c,p){return a.apply(c,p)}function Ti(a,c){return!rt(c)&&a&&(qt(c)?cu(a.push,a,c):Uv(c)||Ei(c)?qd(c,function(p){a.push(p)}):a.push(c)),a}function dt(a,c,p){if(a)for(var g=a[Ae]>>>0,b=0;b<g&&!(b in a&&c[Tt](p||a,a[b],b,a)===-1);b++);}var ua=pn("indexOf",Pr),lu=pn("map",Pr);function xs(a,c,p){return((a?a.slice:U)||xn).apply(a,xn[Tt](arguments,1))}function Bd(a,c,p){return ua(a,c,p)!==-1}var zd=ni("includes",Pr,Bd),Wn=pn("reduce",Pr),ci=y(T(Lt,"create"),Hd);function Hd(a){if(!a)return{};var c=typeof a;c!==pe&&c!==ne&&zn("Prototype must be an Object or function: "+ur(a));function p(){}return p[ce]=a,new p}var Ii;function Ga(a,c){var p=Lt.setPrototypeOf||function(g,b){var x;!Ii&&(Ii=Sa((x={},x[ee]=[],x instanceof Array))),Ii.v?g[ee]=b:Ar(b,function(R,P){return g[R]=P})};return p(a,c)}function Pm(a,c,p){nt(wn,[c,Ze,{v:a,c:!0,e:!1}]),c=Ga(c,p);function g(){this[ve]=c,nt(wn,[this,Ze,{v:a,c:!0,e:!1}])}return c[ce]=p===U?ci(p):(g[ce]=p[ce],new g),c}function jv(a,c){c&&(a[Ze]=c)}function $p(a,c,p){var g=p||Error,b=g[ce][Ze],x=Error.captureStackTrace;return Pm(a,function(){var R=this,P=arguments;try{nt(jv,[g,a]);var k=cu(g,R,xn[Tt](P))||R;if(k!==R){var j=Ns(R);j!==Ns(k)&&Ga(k,j)}return x&&x(k,R[ve]),c&&c(k,P),k}finally{nt(jv,[g,b])}},g)}function fu(){return(Date.now||qp)()}function qp(){return new Date().getTime()}function ph(a){return function(p){return at(p)&&zn("strTrim called ["+ur(p)+"]"),p&&p.replace&&(p=p.replace(a,H)),p}}var Gd=ph(/^\s+|(?=\s)\s+$/g),xa=ni("trim",xr,Gd),xl,Pl,Vi;function li(a){if(!a||typeof a!==pe)return!1;Vi||(Vi=$d()?oi():!0);var c=!1;if(a!==Vi){Pl||(xl=Function[ce][Dt],Pl=xl[Tt](Lt));try{var p=Ns(a);c=!p,c||(Sn(p,ve)&&(p=p[ve]),c=!!(p&&typeof p===ne&&xl[Tt](p)===Pl))}catch{}}return c}function du(a){return a.value&&Hp(a),!0}var Bp=[Vf,Hp,zp,Kd];function Ni(a,c,p,g){var b;return dt(a,function(x){if(x.k===c)return b=x,-1}),b||(b={k:c,v:c},a.push(b),g(b)),b.v}function Vd(a,c,p,g){var b=p.handler,x=p.path?g?p.path.concat(g):p.path:[],R={handler:p.handler,src:p.src,path:x},P=typeof c,k=!1,j=c===U;j||(c&&P===pe?k=li(c):j=qi(P));var z={type:P,isPrim:j,isPlain:k,value:c,result:c,path:x,origin:p.src,copy:function(G,K){return Vd(a,G,K?R:p,K)},copyTo:function(G,K){return qu(a,G,K,R)}};return z.isPrim?b&&b[Tt](p,z)?z.result:c:Ni(a,c,x,function(G){wn(z,"result",{g:function(){return G.v},s:function(Z){G.v=Z}});for(var K=0,te=b;!(te||(K<Bp.length?Bp[K++]:du))[Tt](p,z);)te=U})}function qu(a,c,p,g){if(!at(p))for(var b in p)c[b]=Vd(a,p[b],g,b);return c}function Rc(a,c,p){var g={handler:p,src:c,path:[]};return qu([],a,c,g)}function Al(a,c){var p={handler:c,src:a};return Vd([],a,p)}function Vf(a){var c=a.value;if(qt(c)){var p=a.result=[];return p.length=c.length,a.copyTo(p,c),!0}return!1}function Kd(a){var c=a.value;return an(c)?(a.result=new Date(c.getTime()),!0):!1}function zp(a){return a.type===ne}function Hp(a){var c=a.value;if(c&&a.isPlain){var p=a.result={};return a.copyTo(p,c),!0}return!1}function pu(a,c){return dt(c,function(p){Rc(a,p)}),a}function Wd(a,c,p,g,b,x,R){return pu(Al(a)||{},xn[Tt](arguments))}var Ps=ai(Ae),Bu;function Di(){return!Ir&&sa(),(!Bu||Ir.lzy)&&(Bu=Sa(nt(Qr,["performance"]).v)),Bu.v}function Rl(){var a=Di();return a&&a.now?a.now():fu()}var Kf=ni("endsWith",xr,Oc);function Oc(a,c,p){Gt(a)||zn("'"+ur(a)+"' is not a string");var g=Gt(c)?c:bn(c),b=!rt(p)&&p<a[Ae]?p:a[Ae];return on(a,b-g[Ae],b)===g}var Ki=pn("indexOf",xr),Yv=ni("startsWith",xr,Wo);function Wo(a,c,p){Gt(a)||zn("'"+ur(a)+"' is not a string");var g=Gt(c)?c:bn(c),b=p>0?p:0;return on(a,b,b+g[Ae])===g}var wo="ref",Wi="unref",vu="hasRef",Wf="enabled";function kc(a,c,p){var g=!0,b=a?c(U):U,x;function R(){return g=!1,b&&b[Wi]&&b[Wi](),x}function P(){b&&p(b),b=U}function k(){return b=c(b),g||R(),x}function j(z){!z&&b&&P(),z&&!b&&k()}return x={cancel:P,refresh:k},x[vu]=function(){return b&&b[vu]?b[vu]():g},x[wo]=function(){return g=!0,b&&b[wo]&&b[wo](),x},x[Wi]=R,x=$r(x,Wf,{get:function(){return!!b},set:j}),{h:x,dn:function(){b=U}}}function Mc(a,c,p){var g=qt(c),b=g?c.length:0,x=(b>0?c[0]:g?D:c)||setTimeout,R=(b>1?c[1]:D)||clearTimeout,P=p[0];p[0]=function(){k.dn(),cu(P,D,xn[Tt](arguments))};var k=kc(a,function(j){if(j){if(j.refresh)return j.refresh(),j;cu(R,D,[j])}return cu(x,D,p)},function(j){cu(R,D,[j])});return k.h}function zu(a,c){return Mc(!0,D,xn[Tt](arguments))}function Jf(a,c){return Mc(!1,D,xn[Tt](arguments))}(zf()||{}).Symbol,(zf()||{}).Reflect;var Ol="hasOwnProperty",Zf=function(a,c){return Zf=u.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var b in g)g[Ol](b)&&(p[b]=g[b])},Zf(a,c)};function Hu(a,c){typeof c!==t&&c!==null&&zn("Class extends value "+String(c)+" is not a constructor or null"),Zf(a,c);function p(){this.constructor=a}a[o]=c===null?ci(c):(p[o]=c[o],new p)}function Ji(a,c){for(var p=0,g=c.length,b=a.length;p<g;p++,b++)a[b]=c[p];return a}var Lc,bo="constructor",fi="prototype",Jo="function",Vr="_dynInstFuncs",As="_isDynProxy",Zi="_dynClass",Fc="_dynCls$",Uc="_dynInstChk",Zo=Uc,kl="_dfOpts",Xo="_unknown_",mu="__proto__",Va="_dyn"+mu,Jd="__dynProto$Gbl",Gu="_dynInstProto",Pa="useBaseInst",Xf="setInstFuncs",Zd=Object,Ml=Zd.getPrototypeOf,Ll=Zd.getOwnPropertyNames,Xd=zf(),$v=Xd[Jd]||(Xd[Jd]={o:(Lc={},Lc[Xf]=!0,Lc[Pa]=!0,Lc),n:1e3});function Vu(a){return a&&(a===Zd[fi]||a===Array[fi])}function Eo(a){return Vu(a)||a===Function[fi]}function Xi(a){var c;if(a){if(Ml)return Ml(a);var p=a[mu]||a[fi]||(a[bo]?a[bo][fi]:null);c=a[Va]||p,Sn(a,Va)||(delete a[Gu],c=a[Va]=a[Gu]||a[Va],a[Gu]=p)}return c}function vn(a,c){var p=[];if(Ll)p=Ll(a);else for(var g in a)typeof g=="string"&&Sn(a,g)&&p.push(g);if(p&&p.length>0)for(var b=0;b<p.length;b++)c(p[b])}function Fl(a,c,p){return c!==bo&&typeof a[c]===Jo&&(p||Sn(a,c))&&c!==mu&&c!==fi}function Ku(a){zn("DynamicProto: "+a)}function Wu(a){var c=ci(null);return vn(a,function(p){!c[p]&&Fl(a,p,!1)&&(c[p]=a[p])}),c}function Qd(a,c){for(var p=a.length-1;p>=0;p--)if(a[p]===c)return!0;return!1}function Ci(a,c,p,g){function b(k,j,z){var G=j[z];if(G[As]&&g){var K=k[Vr]||{};K[Zo]!==!1&&(G=(K[j[Zi]]||{})[z]||G)}return function(){return G.apply(k,arguments)}}var x=ci(null);vn(p,function(k){x[k]=b(c,p,k)});for(var R=Xi(a),P=[];R&&!Eo(R)&&!Qd(P,R);)vn(R,function(k){!x[k]&&Fl(R,k,!Ml)&&(x[k]=b(c,R,k))}),P.push(R),R=Xi(R);return x}function hu(a,c,p,g){var b=null;if(a&&Sn(p,Zi)){var x=a[Vr]||ci(null);if(b=(x[p[Zi]]||ci(null))[c],b||Ku("Missing ["+c+"] "+Jo),!b[Uc]&&x[Zo]!==!1){for(var R=!Sn(a,c),P=Xi(a),k=[];R&&P&&!Eo(P)&&!Qd(k,P);){var j=P[c];if(j){R=j===g;break}k.push(P),P=Xi(P)}try{R&&(a[c]=b),b[Uc]=1}catch{x[Zo]=!1}}}return b}function Rs(a,c,p){var g=c[a];return g===p&&(g=Xi(c)[a]),typeof g!==Jo&&Ku("["+a+"] is not a "+Jo),g}function cr(a,c,p,g,b){function x(k,j){var z=function(){var G=hu(this,j,k,z)||Rs(j,k,z);return G.apply(this,arguments)};return z[As]=1,z}if(!Vu(a)){var R=p[Vr]=p[Vr]||ci(null);if(!Vu(R)){var P=R[c]=R[c]||ci(null);R[Zo]!==!1&&(R[Zo]=!!b),Vu(P)||vn(p,function(k){Fl(p,k,!1)&&p[k]!==g[k]&&(P[k]=p[k],delete p[k],(!Sn(a,k)||a[k]&&!a[k][As])&&(a[k]=x(a,k)))})}}}function To(a,c){if(Ml){for(var p=[],g=Xi(c);g&&!Eo(g)&&!Qd(p,g);){if(g===a)return!0;p.push(g),g=Xi(g)}return!1}return!0}function Qo(a,c){return Sn(a,fi)?a.name||c||Xo:((a||{})[bo]||{}).name||c||Xo}function xi(a,c,p,g){Sn(a,fi)||Ku("theClass is an invalid class definition.");var b=a[fi];To(b,c)||Ku("["+Qo(a)+"] not in hierarchy of ["+Qo(c)+"]");var x=null;Sn(b,Zi)?x=b[Zi]:(x=Fc+Qo(a,"_")+"$"+$v.n,$v.n++,b[Zi]=x);var R=xi[kl],P=!!R[Pa];P&&g&&g[Pa]!==void 0&&(P=!!g[Pa]);var k=Wu(c),j=Ci(b,c,k,P);p(c,j);var z=!!Ml&&!!R[Xf];z&&g&&(z=!!g[Xf]),cr(b,x,c,k,z!==!1)}xi[kl]=$v.o;var Qf=100,Pi=ya,_u=Pi({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),un=Pi({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),Ka="toLowerCase",Fr="blkVal",pt="length",Ju="rdOnly",Io="notify",Os="warnToConsole",Qi="throwInternal",gu="setDf",Ai="watch",qr="logger",No="apply",Ur="push",Do="splice",ed="hdlr",Co="cancel",An="initialize",eo="identifier",es="removeNotificationListener",wa="addNotificationListener",Aa="isInitialized",jc="instrumentationKey",Zu="INACTIVE",td="value",ks="getNotifyMgr",xo="getPlugin",Po="name",Xu="iKey",Ao="time",Ln="processNext",rd="getProcessTelContext",Qu="pollInternalLogs",Ms="enabled",di="stopPollingInternalLogs",ts="unload",Ls="onComplete",Ri="version",Yc="loggingLevelConsole",yu="createNew",ca="teardown",Su="messageId",Fs="message",Oi="isAsync",ec="diagLog",cn="_doTeardown",Jn="update",ki="getNext",tc="setNextPlugin",rs="protocol",ep="userAgent",pi="split",$c="nodeType",ba="replace",nd="logInternalMessage",Wa="type",ns="handler",as="status",tp="getResponseHeader",Ul="getAllResponseHeaders",ad="isChildEvt",jl="data",Ro="getCtx",Ja="setCtx",qc="complete",qv="itemsReceived",rc="urlString",nc="sendPOST",is="headers",Yl="timeout",Am="setRequestHeader",rp="traceId",$l="spanId",ac="traceFlags",Gp;function Bv(a,c){Gp||(Gp=$p("AggregationError",function(g,b){b[pt]>1&&(g.errors=b[1])}));var p=a||"One or more errors occurred.";throw dt(c,function(g,b){p+=`
`.concat(b," > ").concat(ur(g))}),new Gp(p,c||[])}var ic="Promise",zv="rejected";function ql(a,c){return np(a,function(p){return c?c({status:"fulfilled",rejected:!1,value:p}):p},function(p){return c?c({status:zv,rejected:!0,reason:p}):p})}function np(a,c,p,g){var b=a;try{if(wr(a))(c||p)&&(b=a.then(c,p));else try{c&&(b=c(a))}catch(x){if(p)b=p(x);else throw x}}finally{g&&to(b,g)}return b}function to(a,c){var p=a;return c&&(wr(a)?a.finally?p=a.finally(c):p=a.then(function(g){return c(),g},function(g){throw c(),g}):c()),p}var Vp=["pending","resolving","resolved",zv],Rm="dispatchEvent",id;function Kp(a){var c;return a&&a.createEvent&&(c=a.createEvent("Event")),!!c&&c.initEvent}function ap(a,c,p,g){var b=za();!id&&(id=Sa(!!nt(Kp,[b]).v));var x=id.v?b.createEvent("Event"):g?new Event(c):{};if(p&&p(x),id.v&&x.initEvent(c,!1,!0),x&&a[Rm])a[Rm](x);else{var R=a["on"+c];if(R)R(x);else{var P=Qr("console");P&&(P.error||P.log)(c,ur(x))}}}var Bc="unhandledRejection",od=Bc.toLowerCase(),oc=10,Us;function zc(a){return tr(a)?a.toString():ur(a)}function Hv(a,c,p){var g=xs(arguments,3),b=0,x=!1,R,P=[],k=!1,j=null,z;function G(et,rr){try{k=!0,j&&j.cancel(),j=null;var sr=a(function(Un,fn){P.push(function(){try{var jn=b===2?et:rr,Yi=rt(jn)?R:tr(jn)?jn(R):jn;wr(Yi)?Yi.then(Un,fn):jn?Un(Yi):b===3?fn(Yi):Un(Yi)}catch(wi){fn(wi)}}),x&&_e()},g);return sr}finally{}}function K(et){return G(void 0,et)}function te(et){var rr=et,sr=et;return tr(et)&&(rr=function(Un){return et&&et(),Un},sr=function(Un){throw et&&et(),Un}),G(rr,sr)}function Z(){return Vp[b]}function _e(){if(P.length>0){var et=P.slice();P=[],k=!0,j&&j.cancel(),j=null,c(et)}}function ye(et,rr){return function(sr){if(b===rr){if(et===2&&wr(sr)){b=1,sr.then(ye(2,1),ye(3,1));return}b=et,x=!0,R=sr,_e(),!k&&et===3&&!j&&(j=zu(Fe,oc))}}}function Fe(){if(!k)if(k=!0,Hf())process.emit(Bc,R,z);else{var et=oi()||zf();!Us&&(Us=Sa(nt(Qr,[ic+"RejectionEvent"]).v)),ap(et,od,function(rr){return wn(rr,"promise",{g:function(){return z}}),rr.reason=R,rr},!!Us.v)}}z={then:G,catch:K,finally:te},$r(z,"state",{get:Z}),Ac()&&(z[ui(11)]="IPromise");function ze(){return"IPromise "+Z()+(x?" - "+zc(R):"")}return z.toString=ze,function(){tr(p)||zn(ic+": executor is not a function - "+zc(p));var rr=ye(3,0);try{p.call(z,ye(2,0),rr)}catch(sr){rr(sr)}}(),z}function ip(a){return function(c){var p=xs(arguments,1);return a(function(g,b){try{var x=[],R=1;qd(c,function(P,k){P&&(R++,np(P,function(j){x[k]=j,--R===0&&g(x)},b))}),R--,R===0&&g(x)}catch(P){b(P)}},p)}}function Hc(a){return Sa(function(c){var p=xs(arguments,1);return a(function(g,b){var x=[],R=1;function P(k,j){R++,ql(k,function(z){z.rejected?x[j]={status:zv,reason:z.reason}:x[j]={status:"fulfilled",value:z.value},--R===0&&g(x)})}try{qt(c)?dt(c,P):Ei(c)?qd(c,P):zn("Input is not an iterable"),R--,R===0&&g(x)}catch(k){b(k)}},p)})}function op(a){dt(a,function(c){try{c()}catch{}})}function js(a){var c=je(a)?a:0;return function(p){zu(function(){op(p)},c)}}function Br(a,c){return Hv(Br,js(c),a,c)}var sc;function la(a,c){!sc&&(sc=Sa(nt(Qr,[ic]).v||null));var p=sc.v;if(!p)return Br(a);tr(a)||zn(ic+": executor is not a function - "+ur(a));var g=0;function b(){return Vp[g]}var x=new p(function(R,P){function k(z){g=2,R(z)}function j(z){g=3,P(z)}a(k,j)});return $r(x,"state",{get:b}),x}var sp;function sd(a){return Hv(sd,op,a)}function Gc(a,c){return!sp&&(sp=Hc(sd)),sp.v(a,c)}var uc;function Za(a,c){return!uc&&(uc=Sa(la)),uc.v.call(this,a,c)}var ud=ip(Za),Zn=void 0,vr="",Ys="channels",hn="core",os="createPerfMgr",cc="disabled",lc="extensionConfig",$s="extensions",ro="processTelemetry",Bl="priority",Wp="eventsSent",zl="eventsDiscarded",Jp="eventsSendRequest",Hl="perfEvent",Vc="offlineEventsStored",up="offlineBatchSent",Hn="offlineBatchDrop",Kc="getPerfMgr",fa="domain",wu="path",cp="Not dynamic - ",cd=/-([a-z])/g,da=/([^\w\d_$])/g,ld=/^(\d+[\w\d_$])/;function lp(a){return!at(a)}function qs(a){var c=a;return c&&Gt(c)&&(c=c[ba](cd,function(p,g){return g.toUpperCase()}),c=c[ba](da,"_"),c=c[ba](ld,function(p,g){return"_"+g})),c}function wt(a,c){return a&&c?Ki(a,c)!==-1:!1}function ss(a){return a&&a.toISOString()||""}function us(a){return Ct(a)?a[Po]:vr}function vi(a,c,p,g,b){var x=p;return a&&(x=a[c],x!==p&&(!b||b(x))&&(!g||g(p))&&(x=p,a[c]=x)),x}function Gl(a,c,p){var g;return a?(g=a[c],!g&&at(g)&&(g=rt(p)?{}:p,a[c]=g)):g=rt(p)?{}:p,g}function Wc(a,c){var p=null,g=null;return tr(a)?p=a:g=a,function(){var b=arguments;if(p&&(g=p()),g)return g[c][No](g,b)}}function cs(a,c,p){if(a&&c&&Yr(a)&&Yr(c)){var g=function(x){if(Gt(x)){var R=c[x];tr(R)?(!p||p(x,!0,c,a))&&(a[x]=Wc(c,x)):(!p||p(x,!1,c,a))&&(zi(a,x)&&delete a[x],wn(a,x,{g:function(){return c[x]},s:function(P){c[x]=P}}))}};for(var b in c)g(b)}return a}function Mi(a,c,p,g,b){a&&c&&p&&(b!==!1||rt(a[c]))&&(a[c]=Wc(p,g))}function Jc(a,c,p,g){return a&&c&&Yr(a)&&qt(p)&&dt(p,function(b){Gt(b)&&Mi(a,b,c,b,g)}),a}function fd(a){return a&&Tl&&(a=u(Tl({},a))),a}function Bs(a){try{return a.responseText}catch{}return null}function Vl(a,c){return a?"XDomainRequest,Response:"+Bs(a)||"":c}function Zc(a,c){return a?"XMLHttpRequest,Status:"+a[as]+",Response:"+Bs(a)||a.response||"":c}function Kl(a,c){return c&&(je(c)?a=[c].concat(a):qt(c)&&(a=c.concat(a))),a}var fp="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",dp="withCredentials",Zp="timeout";function Om(a,c,p,g,b,x){g===void 0&&(g=!1),b===void 0&&(b=!1);function R(k,j,z){try{k[j]=z}catch{}}var P=new XMLHttpRequest;return g&&R(P,fp,g),p&&R(P,dp,p),P.open(a,c,!b),p&&R(P,dp,p),!b&&x&&R(P,Zp,x),P}function ls(a){var c={};if(Gt(a)){var p=xa(a)[pi](/[\r\n]+/);dt(p,function(g){if(g){var b=g.indexOf(": ");if(b!==-1){var x=xa(g.substring(0,b))[Ka](),R=xa(g.substring(b+1));c[x]=R}else c[xa(g)]=1}})}return c}function zs(a,c,p){if(!a[p]&&c&&c[tp]){var g=c[tp](p);g&&(a[p]=xa(g))}return a}var fs="kill-duration",Li="kill-duration-seconds",Hs="time-delta-millis";function bu(a,c){var p={};return a[Ul]?p=ls(a[Ul]()):c&&(p=zs(p,a,Hs),p=zs(p,a,fs),p=zs(p,a,Li)),p}var mi="documentMode",Xc="location",Gv="console",fc="JSON",Xp="crypto",Wl="msCrypto",Qc="ReactNative",Jl="msie",Gs="trident/",Fi="XMLHttpRequest",el=null,Zl=null,dd=!1,pa=null,Vs=null;function va(a,c){var p=!1;if(a){try{if(p=c in a,!p){var g=a[o];g&&(p=c in g)}}catch{}if(!p)try{var b=new a;p=!rt(b[c])}catch{}}return p}function pd(a){dd=a}function Eu(a){if(a&&dd){var c=Qr("__mockLocation");if(c)return c}return typeof location===r&&location?location:Qr(Xc)}function vd(){return typeof console!==n?console:Qr(Gv)}function Ra(){return!!(typeof JSON===r&&JSON||Qr(fc)!==null)}function ma(){return Ra()?JSON||Qr(fc):null}function Qp(){return Qr(Xp)}function Xl(){return Qr(Wl)}function Ql(){var a=si();return a&&a.product?a.product===Qc:!1}function Tu(){var a=si();if(a&&(a[ep]!==Zl||el===null)){Zl=a[ep];var c=(Zl||vr)[Ka]();el=wt(c,Jl)||wt(c,Gs)}return el}function Vv(a){if(a===void 0&&(a=null),!a){var c=si()||{};a=c?(c.userAgent||vr)[Ka]():vr}var p=(a||vr)[Ka]();if(wt(p,Jl)){var g=za()||{};return Math.max(parseInt(p[pi](Jl)[1]),g[mi]||0)}else if(wt(p,Gs)){var b=parseInt(p[pi](Gs)[1]);if(b)return b+4}return null}function Kv(a){return(Vs===null||a===!1)&&(Vs=Yp()&&!!si().sendBeacon),Vs}function ef(a){var c=!1;try{c=!!Qr("fetch");var p=Qr("Request");c&&a&&p&&(c=va(p,"keepalive"))}catch{}return c}function ev(){return pa===null&&(pa=typeof XDomainRequest!==n,pa&&tf()&&(pa=pa&&!va(Qr(Fi),"withCredentials"))),pa}function tf(){var a=!1;try{var c=Qr(Fi);a=!!c}catch{}return a}function tv(a,c){if(a)for(var p=0;p<a[pt];p++){var g=a[p];if(g[Po]&&g[Po]===c)return g}return{}}function Wv(a){var c=za();return c&&a?tv(c.querySelectorAll("meta"),a).content:null}function rf(a){var c,p=Di();if(p){var g=p.getEntriesByType("navigation")||[];c=tv((g[pt]>0?g[0]:{}).serverTiming,a).description}return c}var Jv=4294967296,Iu=4294967295,tl=123456789,pp=987654321,ds=!1,md=tl,nf=pp;function Oo(a){a<0&&(a>>>=0),md=tl+a&Iu,nf=pp-a&Iu,ds=!0}function rl(){try{var a=fu()&2147483647;Oo((Math.random()*Jv^a)+a)}catch{}}function Zv(a){return a>0?Math.floor(nl()/Iu*(a+1))>>>0:0}function nl(a){var c=0,p=Qp()||Xl();return p&&p.getRandomValues&&(c=p.getRandomValues(new Uint32Array(1))[0]&Iu),c===0&&Tu()&&(ds||rl(),c=km()&Iu),c===0&&(c=Math.floor(Jv*Math.random()|0)),a||(c>>>=0),c}function km(a){nf=36969*(nf&65535)+(nf>>16)&Iu,md=18e3*(md&65535)+(md>>16)&Iu;var c=(nf<<16)+(md&65535)>>>0&Iu|0;return a||(c>>>=0),c}function af(a){a===void 0&&(a=22);for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=nl()>>>0,g=0,b=vr;b[pt]<a;)g++,b+=c.charAt(p&63),p>>>=6,g===5&&(p=(nl()<<2&4294967295|p&3)>>>0,g=0);return b}var Xv="3.3.4",rv="."+af(6),Nu=0;function Du(a){return a[$c]===1||a[$c]===9||!+a[$c]}function al(a,c){var p=c[a.id];if(!p){p={};try{Du(c)&&wn(c,a.id,{e:!1,v:p})}catch{}}return p}function ps(a,c){return c===void 0&&(c=!1),qs(a+Nu+++(c?"."+Xv:vr)+rv)}function Ks(a){var c={id:ps("_aiData-"+(a||vr)+"."+Xv),accept:function(p){return Du(p)},get:function(p,g,b,x){var R=p[c.id];return R?R[qs(g)]:(x&&(R=al(c,p),R[qs(g)]=b),b)},kill:function(p,g){if(p&&p[g])try{delete p[g]}catch{}}};return c}function of(a){return a&&Yr(a)&&(a.isVal||a.fb||zi(a,"v")||zi(a,"mrg")||zi(a,"ref")||a.set)}function hd(a,c,p){var g,b=p.dfVal||Wt;if(c&&p.fb){var x=p.fb;qt(x)||(x=[x]);for(var R=0;R<x[pt];R++){var P=x[R],k=c[P];if(b(k)?g=k:a&&(k=a.cfg[P],b(k)&&(g=k),a.set(a.cfg,bn(P),k)),b(g))break}}return!b(g)&&b(p.v)&&(g=p.v),g}function _d(a,c,p){var g=p;if(p&&of(p)&&(g=hd(a,c,p)),g){of(g)&&(g=_d(a,c,g));var b;qt(g)?(b=[],b[pt]=g[pt]):li(g)&&(b={}),b&&(Ar(g,function(x,R){R&&of(R)&&(R=_d(a,c,R)),b[x]=R}),g=b)}return g}function sf(a,c,p,g){var b,x,R,P=g,k,j,z,G;of(P)?(b=P.isVal,x=P.set,z=P[Ju],G=P[Fr],k=P.mrg,j=P.ref,!j&&rt(j)&&(j=!!k),R=hd(a,c,P)):R=g,G&&a[Fr](c,p);var K,te=!0,Z=c[p];(Z||!at(Z))&&(K=Z,te=!1,b&&K!==R&&!b(K)&&(K=R,te=!0),x&&(K=x(K,R,c),te=K===R)),te?R?K=_d(a,c,R):K=R:(li(K)||qt(R))&&k&&R&&(li(R)||qt(R))&&Ar(R,function(_e,ye){sf(a,K,_e,ye)}),a.set(c,p,K),j&&a.ref(c,p),z&&a[Ju](c,p)}var hi=Dl("[[ai_dynCfg_1]]"),uf=Dl("[[ai_blkDynCfg_1]]"),Qv=Dl("[[ai_frcDynCfg_1]]");function Mm(a){if(a){var c;if(qt(a)?(c=[],c[pt]=a[pt]):li(a)&&(c={}),c)return Ar(a,function(p,g){c[p]=Mm(g)}),c}return a}function il(a){if(a){var c=a[hi]||a;if(c.cfg&&(c.cfg===a||c.cfg[hi]===c))return c}return null}function Lm(a){if(a&&(li(a)||qt(a)))try{a[uf]=!0}catch{}return a}function ko(a){if(a)try{a[Qv]=!0}catch{}return a}function Cu(a,c,p){var g=!1;return p&&!a[c.blkVal]&&(g=p[Qv],!g&&!p[uf]&&(g=li(p)||qt(p))),g}function ol(a){zn("InvalidAccess:"+a)}var em=["push","pop","shift","unshift","splice"],vp=function(a,c,p,g){a&&a[Qi](3,108,"".concat(p," [").concat(c,"] failed - ")+ur(g))};function tm(a,c,p){qt(c)&&dt(em,function(g){var b=c[g];c[g]=function(){for(var x=[],R=0;R<arguments.length;R++)x[R]=arguments[R];var P=b[No](this,x);return yd(a,c,p,"Patching"),P}})}function nv(a,c){var p=Gr(a,c);return p&&p.get}function gd(a,c,p,g){var b={n:p,h:[],trk:function(j){j&&j.fn&&(ua(b.h,j)===-1&&b.h[Ur](j),a.trk(j,b))},clr:function(j){var z=ua(b.h,j);z!==-1&&b.h[Do](z,1)}},x=!0,R=!1;function P(){x&&(R=R||Cu(P,a,g),g&&!g[hi]&&R&&(g=yd(a,g,p,"Converting")),x=!1);var j=a.act;return j&&b.trk(j),g}P[a.prop]={chng:function(){a.add(b)}};function k(j){if(g!==j){P[a.ro]&&!a.upd&&ol("["+p+"] is read-only:"+ur(c)),x&&(R=R||Cu(P,a,g),x=!1);var z=R&&P[a.rf];if(R)if(z){Ar(g,function(K){g[K]=j?j[K]:Zn});try{Ar(j,function(K,te){sl(a,g,K,te)}),j=g}catch(K){vp((a.hdlr||{})[qr],p,"Assigning",K),R=!1}}else g&&g[hi]&&Ar(g,function(K){var te=nv(g,K);if(te){var Z=te[a.prop];Z&&Z.chng()}});if(j!==g){var G=j&&Cu(P,a,j);!z&&G&&(j=yd(a,j,p,"Converting")),g=j,R=G}a.add(b)}}wn(c,b.n,{g:P,s:k})}function sl(a,c,p,g){if(c){var b=nv(c,p),x=b&&!!b[a.prop];x?c[p]=g:gd(a,c,p,g)}return c}function no(a,c,p,g){if(c){var b=nv(c,p),x=b&&!!b[a.prop],R=g&&g[0],P=g&&g[1],k=g&&g[2];if(!x){if(k)try{Lm(c)}catch(j){vp((a.hdlr||{})[qr],p,"Blocking",j)}try{sl(a,c,p,c[p]),b=nv(c,p)}catch(j){vp((a.hdlr||{})[qr],p,"State",j)}}R&&(b[a.rf]=R),P&&(b[a.ro]=P),k&&(b[a.blkVal]=!0)}return c}function yd(a,c,p,g){try{Ar(c,function(b,x){sl(a,c,b,x)}),c[hi]||($r(c,hi,{get:function(){return a[ed]}}),tm(a,c,p))}catch(b){vp((a.hdlr||{})[qr],p,g,b)}return c}var ul="[[ai_",Oa="]]";function ao(a){var c,p=$u(ul+"get"+a.uid+Oa),g=$u(ul+"ro"+a.uid+Oa),b=$u(ul+"rf"+a.uid+Oa),x=$u(ul+"blkVal"+a.uid+Oa),R=$u(ul+"dtl"+a.uid+Oa),P=null,k=null,j;function z(Z,_e){var ye=j.act;try{j.act=Z,Z&&Z[R]&&(dt(Z[R],function(ze){ze.clr(Z)}),Z[R]=[]),_e({cfg:a.cfg,set:a.set.bind(a),setDf:a[gu].bind(a),ref:a.ref.bind(a),rdOnly:a[Ju].bind(a)})}catch(ze){var Fe=a[qr];throw Fe&&Fe[Qi](1,107,ur(ze)),ze}finally{j.act=ye||null}}function G(){if(P){var Z=P;P=null,k&&k[Co](),k=null;var _e=[];if(dt(Z,function(ye){if(ye&&(ye[R]&&(dt(ye[R],function(Fe){Fe.clr(ye)}),ye[R]=null),ye.fn))try{z(ye,ye.fn)}catch(Fe){_e[Ur](Fe)}}),P)try{G()}catch(ye){_e[Ur](ye)}_e[pt]>0&&Bv("Watcher error(s): ",_e)}}function K(Z){if(Z&&Z.h[pt]>0){P||(P=[]),k||(k=zu(function(){k=null,G()},0));for(var _e=0;_e<Z.h[pt];_e++){var ye=Z.h[_e];ye&&ua(P,ye)===-1&&P[Ur](ye)}}}function te(Z,_e){if(Z){var ye=Z[R]=Z[R]||[];ua(ye,_e)===-1&&ye[Ur](_e)}}return j=(c={prop:p,ro:g,rf:b},c[Fr]=x,c[ed]=a,c.add=K,c[Io]=G,c.use=z,c.trk=te,c),j}function cf(a,c){var p={fn:c,rm:function(){p.fn=null,a=null,c=null}};return wn(p,"toJSON",{v:function(){return"WatcherHandler"+(p.fn?"":"[X]")}}),a.use(p,c),p}function rm(a,c,p){var g,b=il(c);if(b)return b;var x=ps("dyncfg",!0),R=c&&p!==!1?c:Mm(c),P;function k(){P[Io]()}function j(Fe,ze,et){try{Fe=sl(P,Fe,ze,et)}catch(rr){vp(a,ze,"Setting value",rr)}return Fe[ze]}function z(Fe){return cf(P,Fe)}function G(Fe,ze){P.use(null,function(et){var rr=P.upd;try{rt(ze)||(P.upd=ze),Fe(et)}finally{P.upd=rr}})}function K(Fe,ze){var et;return no(P,Fe,ze,(et={},et[0]=!0,et))[ze]}function te(Fe,ze){var et;return no(P,Fe,ze,(et={},et[1]=!0,et))[ze]}function Z(Fe,ze){var et;return no(P,Fe,ze,(et={},et[2]=!0,et))[ze]}function _e(Fe,ze){return ze&&Ar(ze,function(et,rr){sf(ye,Fe,et,rr)}),Fe}var ye=(g={uid:null,cfg:R},g[qr]=a,g[Io]=k,g.set=j,g[gu]=_e,g[Ai]=z,g.ref=K,g[Ju]=te,g[Fr]=Z,g._block=G,g);return wn(ye,"uid",{c:!1,e:!1,w:!1,v:x}),P=ao(ye),yd(P,R,"config","Creating"),ye}function nm(a,c){a?(a[Os](c),a[Qi](2,108,c)):ol(c)}function ha(a,c,p,g){var b=rm(p,a||{},g);return c&&b[gu](b.cfg,c),b}function cl(a,c,p){var g=a[hi]||a;return g.cfg&&(g.cfg===a||g.cfg[hi]===g)?g[Ai](c):(nm(p,cp+ur(a)),ha(a,null,p)[Ai](c))}function lf(a,c){if(a&&a[ts])return a[ts](c)}function Fm(a,c,p){var g;return p||(g=Za(function(b){p=b})),a&&Ps(a)>0?ql(lf(a[0],c),function(){Fm(xs(a,1),c,p)}):p(),g}var am=500,ff="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function ka(a){return{mrg:!0,v:a}}var mp=[Wp,zl,Jp,Hl],dc=null,ll;function Ws(a,c){return function(){var p=arguments,g=hp(c);if(g){var b=g.listener;b&&b[a]&&b[a][No](b,p)}}}function df(){var a=Qr("Microsoft");return a&&(dc=a.ApplicationInsights),dc}function hp(a){var c=dc;return!c&&a.disableDbgExt!==!0&&(c=dc||df()),c?c.ChromeDbgExt:null}function St(a){if(!ll){ll={};for(var c=0;c<mp[pt];c++)ll[mp[c]]=Ws(mp[c],a)}return ll}var xu,Mo="warnToConsole",pf="AI (Internal): ",Um="AI: ",vf="AITR_",Sd={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Lo=(xu={},xu[0]=null,xu[1]="errorToConsole",xu[2]=Mo,xu[3]="debugToConsole",xu);function im(a){return a?'"'+a[ba](/\"/g,vr)+'"':vr}function _p(a,c){var p=vd();if(p){var g="log";p[a]&&(g=a),tr(p[g])&&p[g](c)}}var gp=function(){function a(c,p,g,b){g===void 0&&(g=!1);var x=this;x[Su]=c,x[Fs]=(g?Um:pf)+c;var R=vr;Ra()&&(R=ma().stringify(b));var P=(p?" message:"+im(p):vr)+(b?" props:"+im(R):vr);x[Fs]+=P}return a.dataType="MessageData",a}();function mf(a,c){return(a||{})[qr]||new pc(c)}var pc=function(){function a(c){this.identifier="DiagnosticLogger",this.queue=[];var p=0,g={},b,x,R,P,k;xi(a,this,function(j){k=G(c||{}),j.consoleLoggingLevel=function(){return b},j[Qi]=function(Z,_e,ye,Fe,ze){ze===void 0&&(ze=!1);var et=new gp(_e,ye,ze,Fe);if(P)throw ur(et);var rr=Lo[Z]||Mo;if(rt(et[Fs]))te("throw"+(Z===1?"Critical":"Warning"),et);else{if(ze){var sr=+et[Su];!g[sr]&&b>=Z&&(j[rr](et[Fs]),g[sr]=!0)}else b>=Z&&j[rr](et[Fs]);z(Z,et)}},j.debugToConsole=function(Z){_p("debug",Z),te("warning",Z)},j[Os]=function(Z){_p("warn",Z),te("warning",Z)},j.errorToConsole=function(Z){_p("error",Z),te("error",Z)},j.resetInternalMessageCount=function(){p=0,g={}},j[nd]=z,j[ts]=function(Z){k&&k.rm(),k=null};function z(Z,_e){if(!K()){var ye=!0,Fe=vf+_e[Su];if(g[Fe]?ye=!1:g[Fe]=!0,ye&&(Z<=x&&(j.queue[Ur](_e),p++,te(Z===1?"error":"warn",_e)),p===R)){var ze="Internal events throttle limit per PageView reached for this app.",et=new gp(23,ze,!1);j.queue[Ur](et),Z===1?j.errorToConsole(ze):j[Os](ze)}}}function G(Z){return cl(ha(Z,Sd,j).cfg,function(_e){var ye=_e.cfg;b=ye[Yc],x=ye.loggingLevelTelemetry,R=ye.maxMessageLimit,P=ye.enableDebug})}function K(){return p>=R}function te(Z,_e){var ye=hp(c||{});ye&&ye[ec]&&ye[ec](Z,_e)}})}return a.__ieDyn=1,a}();function av(a){return a||new pc}function Hr(a,c,p,g,b,x){x===void 0&&(x=!1),av(a)[Qi](c,p,g,b,x)}function Js(a,c){av(a)[Os](c)}function iv(a,c,p){av(a)[nd](c,p)}var Pu,io,Fn="toGMTString",wd="toUTCString",vc="cookie",fl="expires",vs="isCookieUseDisabled",oo="disableCookiesUsage",Fo="_ckMgr",bd=null,yp=null,ov=null,ms,sv={},Ed={},uv=(Pu={cookieCfg:ka((io={},io[fa]={fb:"cookieDomain",dfVal:lp},io.path={fb:"cookiePath",dfVal:lp},io.enabled=Zn,io.ignoreCookies=Zn,io.blockedCookies=Zn,io)),cookieDomain:Zn,cookiePath:Zn},Pu[oo]=Zn,Pu);function hs(){!ms&&(ms=Bf(function(){return za()}))}function jm(a,c){var p=N[Fo]||Ed[Fo];return p||(p=N[Fo]=N(a,c),Ed[Fo]=p),p}function Au(a){return a?a.isEnabled():!0}function cv(a,c){return c&&a&&qt(a.ignoreCookies)?ua(a.ignoreCookies,c)!==-1:!1}function f(a,c){return c&&a&&qt(a.blockedCookies)&&ua(a.blockedCookies,c)!==-1?!0:cv(a,c)}function h(a,c){var p=c[Ms];if(at(p)){var g=void 0;rt(a[vs])||(g=!a[vs]),rt(a[oo])||(g=!a[oo]),p=g}return p}function S(a,c){var p;if(a)p=a.getCookieMgr();else if(c){var g=c.cookieCfg;g&&g[Fo]?p=g[Fo]:p=N(c)}return p||(p=jm(c,(a||{})[qr])),p}function N(a,c){var p,g,b,x,R,P,k,j,z;a=ha(a||Ed,null,c).cfg,R=cl(a,function(K){K[gu](K.cfg,uv),g=K.ref(K.cfg,"cookieCfg"),b=g[wu]||"/",x=g[fa],P=h(a,g)!==!1,k=g.getCookie||re,j=g.setCookie||ge,z=g.delCookie||ge},c);var G=(p={isEnabled:function(){var K=h(a,g)!==!1&&P&&F(c),te=Ed[Fo];return K&&te&&G!==te&&(K=Au(te)),K},setEnabled:function(K){P=K!==!1,g[Ms]=K},set:function(K,te,Z,_e,ye){var Fe=!1;if(Au(G)&&!f(g,K)){var ze={},et=xa(te||vr),rr=Ki(et,";");if(rr!==-1&&(et=xa(kn(te,rr)),ze=V(on(te,rr+1))),vi(ze,fa,_e||x,Bi,rt),!at(Z)){var sr=Tu();if(rt(ze[fl])){var Un=fu(),fn=Un+Z*1e3;if(fn>0){var jn=new Date;jn.setTime(fn),vi(ze,fl,J(jn,sr?Fn:wd)||J(jn,sr?Fn:wd)||vr,Bi)}}sr||vi(ze,"max-age",vr+Z,null,rt)}var Yi=Eu();Yi&&Yi[rs]==="https:"&&(vi(ze,"secure",null,null,rt),yp===null&&(yp=!tt((si()||{})[ep])),yp&&vi(ze,"SameSite","None",null,rt)),vi(ze,wu,ye||b,null,rt),j(K,ae(et,ze)),Fe=!0}return Fe},get:function(K){var te=vr;return Au(G)&&!cv(g,K)&&(te=k(K)),te},del:function(K,te){var Z=!1;return Au(G)&&(Z=G.purge(K,te)),Z},purge:function(K,te){var Z,_e=!1;if(F(c)){var ye=(Z={},Z[wu]=te||"/",Z[fl]="Thu, 01 Jan 1970 00:00:01 GMT",Z);Tu()||(ye["max-age"]="0"),z(K,ae(vr,ye)),_e=!0}return _e}},p[ts]=function(K){R&&R.rm(),R=null},p);return G[Fo]=G,G}function F(a){if(bd===null){bd=!1,!ms&&hs();try{var c=ms.v||{};bd=c[vc]!==void 0}catch(p){Hr(a,2,68,"Cannot access document.cookie - "+us(p),{exception:ur(p)})}}return bd}function V(a){var c={};if(a&&a[pt]){var p=xa(a)[pi](";");dt(p,function(g){if(g=xa(g||vr),g){var b=Ki(g,"=");b===-1?c[g]=null:c[xa(kn(g,b))]=xa(on(g,b+1))}})}return c}function J(a,c){return tr(a[c])?a[c]():null}function ae(a,c){var p=a||vr;return Ar(c,function(g,b){p+="; "+g+(at(b)?vr:"="+b)}),p}function re(a){var c=vr;if(!ms&&hs(),ms.v){var p=ms.v[vc]||vr;ov!==p&&(sv=V(p),ov=p),c=xa(sv[a]||vr)}return c}function ge(a,c){!ms&&hs(),ms.v&&(ms.v[vc]=a+"="+c)}function tt(a){return Gt(a)?!!(wt(a,"CPU iPhone OS 12")||wt(a,"iPad; CPU OS 12")||wt(a,"Macintosh; Intel Mac OS X 10_14")&&wt(a,"Version/")&&wt(a,"Safari")||wt(a,"Macintosh; Intel Mac OS X 10_14")&&Kf(a,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||wt(a,"Chrome/5")||wt(a,"Chrome/6")||wt(a,"UnrealEngine")&&!wt(a,"Chrome")||wt(a,"UCBrowser/12")||wt(a,"UCBrowser/11")):!1}var bt={perfEvtsSendAll:!1};function Jt(a){a.h=null;var c=a.cb;a.cb=[],dt(c,function(p){nt(p.fn,[p.arg])})}function ot(a,c,p,g){dt(a,function(b){b&&b[c]&&(p?(p.cb[Ur]({fn:g,arg:b}),p.h=p.h||zu(Jt,0,p)):nt(g,[b]))})}var lt=function(){function a(c){this.listeners=[];var p,g,b=[],x={h:null,cb:[]},R=ha(c,bt);g=R[Ai](function(P){p=!!P.cfg.perfEvtsSendAll}),xi(a,this,function(P){wn(P,"listeners",{g:function(){return b}}),P[wa]=function(k){b[Ur](k)},P[es]=function(k){for(var j=ua(b,k);j>-1;)b[Do](j,1),j=ua(b,k)},P[Wp]=function(k){ot(b,Wp,x,function(j){j[Wp](k)})},P[zl]=function(k,j){ot(b,zl,x,function(z){z[zl](k,j)})},P[Jp]=function(k,j){ot(b,Jp,j?x:null,function(z){z[Jp](k,j)})},P[Hl]=function(k){k&&(p||!k[ad]())&&ot(b,Hl,null,function(j){k[Oi]?zu(function(){return j[Hl](k)},0):j[Hl](k)})},P[Vc]=function(k){k&&k[pt]&&ot(b,Vc,x,function(j){j[Vc](k)})},P[up]=function(k){k&&k[jl]&&ot(b,up,x,function(j){j[up](k)})},P[Hn]=function(k,j){if(k>0){var z=j||0;ot(b,Hn,x,function(G){G[Hn](k,z)})}},P[ts]=function(k){var j=function(){g&&g.rm(),g=null,b=[],x.h&&x.h[Co](),x.h=null,x.cb=[]},z;if(ot(b,"unload",null,function(G){var K=G[ts](k);K&&(z||(z=[]),z[Ur](K))}),z)return Za(function(G){return ql(ud(z),function(){j(),G()})});j()}})}return a.__ieDyn=1,a}(),ir="ctx",Ut="ParentContextKey",gr="ChildrenContextKey",br=null,At=function(){function a(c,p,g){var b=this;if(b.start=fu(),b[Po]=c,b[Oi]=g,b[ad]=function(){return!1},tr(p)){var x;wn(b,"payload",{g:function(){return!x&&tr(p)&&(x=p(),p=null),x}})}b[Ro]=function(R){return R?R===a[Ut]||R===a[gr]?b[R]:(b[ir]||{})[R]:null},b[Ja]=function(R,P){if(R)if(R===a[Ut])b[R]||(b[ad]=function(){return!0}),b[R]=P;else if(R===a[gr])b[R]=P;else{var k=b[ir]=b[ir]||{};k[R]=P}},b[qc]=function(){var R=0,P=b[Ro](a[gr]);if(qt(P))for(var k=0;k<P[pt];k++){var j=P[k];j&&(R+=j[Ao])}b[Ao]=fu()-b.start,b.exTime=b[Ao]-R,b[qc]=function(){}}}return a.ParentContextKey="parent",a.ChildrenContextKey="childEvts",a}(),En=function(){function a(c){this.ctx={},xi(a,this,function(p){p.create=function(g,b,x){return new At(g,b,x)},p.fire=function(g){g&&(g[qc](),c&&tr(c[Hl])&&c[Hl](g))},p[Ja]=function(g,b){if(g){var x=p[ir]=p[ir]||{};x[g]=b}},p[Ro]=function(g){return(p[ir]||{})[g]}})}return a.__ieDyn=1,a}(),mc="CoreUtils.doPerf";function Zs(a,c,p,g,b){if(a){var x=a;if(x[Kc]&&(x=x[Kc]()),x){var R=void 0,P=x[Ro](mc);try{if(R=x.create(c(),g,b),R){if(P&&R[Ja]&&(R[Ja](At[Ut],P),P[Ro]&&P[Ja])){var k=P[Ro](At[gr]);k||(k=[],P[Ja](At[gr],k)),k[Ur](R)}return x[Ja](mc,R),p(R)}}catch(j){R&&R[Ja]&&R[Ja]("exception",j)}finally{R&&x.fire(R),x[Ja](mc,P)}}}return p()}function dl(){return br}function hf(){var a=Td();return on(a,0,8)+"-"+on(a,8,12)+"-"+on(a,12,16)+"-"+on(a,16,20)+"-"+on(a,20)}function Td(){for(var a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],c=vr,p,g=0;g<4;g++)p=nl(),c+=a[p&15]+a[p>>4&15]+a[p>>8&15]+a[p>>12&15]+a[p>>16&15]+a[p>>20&15]+a[p>>24&15]+a[p>>28&15];var b=a[8+(nl()&3)|0];return So(c,0,8)+So(c,9,4)+"4"+So(c,13,3)+b+So(c,16,3)+So(c,19,12)}var _f=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,gf="00",Id="ff",yf="00000000000000000000000000000000",Re="0000000000000000",vt=1;function Bt(a,c,p){return a&&a[pt]===c&&a!==p?!!a.match(/^[\da-f]*$/i):!1}function en(a,c,p){return Bt(a,c)?a:p}function Ea(a){(isNaN(a)||a<0||a>255)&&(a=1);for(var c=a.toString(16);c[pt]<2;)c="0"+c;return c}function Ta(a,c,p,g){var b;return b={},b[Ri]=Bt(g,2,Id)?g:gf,b[rp]=_i(a)?a:Td(),b[$l]=_s(c)?c:kn(Td(),16),b.traceFlags=p>=0&&p<=255?p:1,b}function Xn(a,c){var p;if(!a||(qt(a)&&(a=a[0]||""),!a||!Gt(a)||a[pt]>8192))return null;if(a.indexOf(",")!==-1){var g=a[pi](",");a=g[c>0&&g[pt]>c?c:0]}var b=_f.exec(xa(a));return!b||b[1]===Id||b[2]===yf||b[3]===Re?null:(p={version:(b[1]||vr)[Ka](),traceId:(b[2]||vr)[Ka](),spanId:(b[3]||vr)[Ka]()},p[ac]=parseInt(b[4],16),p)}function _i(a){return Bt(a,32,yf)}function _s(a){return Bt(a,16,Re)}function pl(a){return!(!a||!Bt(a[Ri],2,Id)||!Bt(a[rp],32,yf)||!Bt(a[$l],16,Re)||!Bt(Ea(a[ac]),2))}function om(a){return pl(a)?(a[ac]&vt)===vt:!1}function Ru(a){if(a){var c=Ea(a[ac]);Bt(c,2)||(c="01");var p=a[Ri]||gf;return p!=="00"&&p!=="ff"&&(p=gf),"".concat(p.toLowerCase(),"-").concat(en(a.traceId,32,yf).toLowerCase(),"-").concat(en(a.spanId,16,Re).toLowerCase(),"-").concat(c.toLowerCase())}return""}function Nd(a){var c="traceparent",p=Xn(Wv(c),a);return p||(p=Xn(rf(c),a)),p}var Ym=Ks("plugin");function Qn(a){return Ym.get(a,"state",{},!0)}function gs(a,c){for(var p=[],g=null,b=a[ki](),x;b;){var R=b[xo]();if(R){g&&g[tc]&&R[ro]&&g[tc](R),x=Qn(R);var P=!!x[Aa];R[Aa]&&(P=R[Aa]()),P||p[Ur](R),g=R,b=b[ki]()}}dt(p,function(k){var j=a[hn]();k[An](a.getCfg(),j,c,a[ki]()),x=Qn(k),!k[hn]&&!x[hn]&&(x[hn]=j),x[Aa]=!0,delete x[ca]})}function sm(a){return a.sort(function(c,p){var g=0;if(p){var b=p[ro];c[ro]?g=b?c[Bl]-p[Bl]:1:b&&(g=-1)}else g=c?1:-1;return g})}function $m(a){var c={};return{getName:function(){return c[Po]},setName:function(p){a&&a.setName(p),c[Po]=p},getTraceId:function(){return c[rp]},setTraceId:function(p){a&&a.setTraceId(p),_i(p)&&(c[rp]=p)},getSpanId:function(){return c[$l]},setSpanId:function(p){a&&a.setSpanId(p),_s(p)&&(c[$l]=p)},getTraceFlags:function(){return c[ac]},setTraceFlags:function(p){a&&a.setTraceFlags(p),c[ac]=p}}}var lv="TelemetryPluginChain",qm="_hasRun",Bm="_getTelCtx",Jh=0;function zm(a,c,p){for(;a;){if(a[xo]()===p)return a;a=a[ki]()}return ml([p],c.config||{},c)}function Hm(a,c,p,g){var b=null,x=[];c||(c=ha({},null,p[qr])),g!==null&&(b=g?zm(a,p,g):a);var R={_next:k,ctx:{core:function(){return p},diagLog:function(){return mf(p,c.cfg)},getCfg:function(){return c.cfg},getExtCfg:z,getConfig:G,hasNext:function(){return!!b},getNext:function(){return b},setNext:function(te){b=te},iterate:K,onComplete:P}};function P(te,Z){for(var _e=[],ye=2;ye<arguments.length;ye++)_e[ye-2]=arguments[ye];te&&x[Ur]({func:te,self:rt(Z)?R.ctx:Z,args:_e})}function k(){var te=b;if(b=te?te[ki]():null,!te){var Z=x;Z&&Z[pt]>0&&(dt(Z,function(_e){try{_e.func.call(_e.self,_e.args)}catch(ye){Hr(p[qr],2,73,"Unexpected Exception during onComplete - "+ur(ye))}}),x=[])}return te}function j(te,Z){var _e=null,ye=c.cfg;if(ye&&te){var Fe=ye[lc];!Fe&&Z&&(Fe={}),ye[lc]=Fe,Fe=c.ref(ye,lc),Fe&&(_e=Fe[te],!_e&&Z&&(_e={}),Fe[te]=_e,_e=c.ref(Fe,te))}return _e}function z(te,Z){var _e=j(te,!0);return Z&&Ar(Z,function(ye,Fe){if(at(_e[ye])){var ze=c.cfg[ye];(ze||!at(ze))&&(_e[ye]=ze)}sf(c,_e,ye,Fe)}),c[gu](_e,Z)}function G(te,Z,_e){_e===void 0&&(_e=!1);var ye,Fe=j(te,!1),ze=c.cfg;return Fe&&(Fe[Z]||!at(Fe[Z]))?ye=Fe[Z]:(ze[Z]||!at(ze[Z]))&&(ye=ze[Z]),ye||!at(ye)?ye:_e}function K(te){for(var Z;Z=R._next();){var _e=Z[xo]();_e&&te(_e)}}return R}function vl(a,c,p,g){var b=ha(c),x=Hm(a,b,p,g),R=x.ctx;function P(j){var z=x._next();return z&&z[ro](j,R),!z}function k(j,z){return j===void 0&&(j=null),qt(j)&&(j=ml(j,b.cfg,p,z)),vl(j||R[ki](),b.cfg,p,z)}return R[Ln]=P,R[yu]=k,R}function Sf(a,c,p){var g=ha(c.config),b=Hm(a,g,c,p),x=b.ctx;function R(k){var j=b._next();return j&&j[ts](x,k),!j}function P(k,j){return k===void 0&&(k=null),qt(k)&&(k=ml(k,g.cfg,c,j)),Sf(k||x[ki](),c,j)}return x[Ln]=R,x[yu]=P,x}function Xs(a,c,p){var g=ha(c.config),b=Hm(a,g,c,p),x=b.ctx;function R(k){return x.iterate(function(j){tr(j[Jn])&&j[Jn](x,k)})}function P(k,j){return k===void 0&&(k=null),qt(k)&&(k=ml(k,g.cfg,c,j)),Xs(k||x[ki](),c,j)}return x[Ln]=R,x[yu]=P,x}function ml(a,c,p,g){var b=null,x=!g;if(qt(a)&&a[pt]>0){var R=null;dt(a,function(P){if(!x&&g===P&&(x=!0),x&&P&&tr(P[ro])){var k=Gm(P,c,p);b||(b=k),R&&R._setNext(k),R=k}})}return g&&!b?ml([g],c,p):b}function Gm(a,c,p){var g=null,b=tr(a[ro]),x=tr(a[tc]),R;a?R=a[eo]+"-"+a[Bl]+"-"+Jh++:R="Unknown-0-"+Jh++;var P={getPlugin:function(){return a},getNext:function(){return g},processTelemetry:z,unload:G,update:K,_id:R,_setNext:function(te){g=te}};function k(){var te;return a&&tr(a[Bm])&&(te=a[Bm]()),te||(te=vl(P,c,p)),te}function j(te,Z,_e,ye,Fe){var ze=!1,et=a?a[eo]:lv,rr=te[qm];return rr||(rr=te[qm]={}),te.setNext(g),a&&Zs(te[hn](),function(){return et+":"+_e},function(){rr[R]=!0;try{var sr=g?g._id:vr;sr&&(rr[sr]=!1),ze=Z(te)}catch(fn){var Un=g?rr[g._id]:!0;Un&&(ze=!0),(!g||!Un)&&Hr(te[ec](),1,73,"Plugin ["+et+"] failed during "+_e+" - "+ur(fn)+", run flags: "+ur(rr))}},ye,Fe),ze}function z(te,Z){Z=Z||k();function _e(ye){if(!a||!b)return!1;var Fe=Qn(a);return Fe[ca]||Fe[cc]?!1:(x&&a[tc](g),a[ro](te,ye),!0)}j(Z,_e,"processTelemetry",function(){return{item:te}},!te.sync)||Z[Ln](te)}function G(te,Z){function _e(){var ye=!1;if(a){var Fe=Qn(a),ze=a[hn]||Fe[hn];a&&(!ze||ze===te.core())&&!Fe[ca]&&(Fe[hn]=null,Fe[ca]=!0,Fe[Aa]=!1,a[ca]&&a[ca](te,Z)===!0&&(ye=!0))}return ye}j(te,_e,"unload",function(){},Z[Oi])||te[Ln](Z)}function K(te,Z){function _e(){var ye=!1;if(a){var Fe=Qn(a),ze=a[hn]||Fe[hn];a&&(!ze||ze===te.core())&&!Fe[ca]&&a[Jn]&&a[Jn](te,Z)===!0&&(ye=!0)}return ye}j(te,_e,"update",function(){},!1)||te[Ln](Z)}return On(P)}var um=function(){function a(c,p,g,b){var x=this,R=vl(c,p,g,b);Jc(x,R,go(R))}return a}();function fv(){var a=[];function c(g){g&&a[Ur](g)}function p(g,b){dt(a,function(x){try{x(g,b)}catch(R){Hr(g[ec](),2,73,"Unexpected error calling unload handler - "+ur(R))}}),a=[]}return{add:c,run:p}}var dv,Dd;function vh(a,c){dv=a,Dd=c}function Vm(){var a=[];function c(g){var b=a;a=[],dt(b,function(x){try{(x.rm||x.remove).call(x)}catch(R){Hr(g,2,73,"Unloading:"+ur(R))}}),dv&&b[pt]>dv&&(Dd?Dd("doUnload",b):Hr(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))}function p(g){g&&(Ti(a,g),dv&&a[pt]>dv&&(Dd?Dd("Add",a):Hr(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}return{run:c,add:p}}var Sp,hl="getPlugin",F_=(Sp={},Sp[lc]={isVal:lp,v:{}},Sp),mh=function(){function a(){var c=this,p,g,b,x,R;j(),xi(a,c,function(z){z[An]=function(G,K,te,Z){k(G,K,Z),p=!0},z[ca]=function(G,K){var te,Z=z[hn];if(!Z||G&&Z!==G[hn]())return;var _e,ye=!1,Fe=G||Sf(null,Z,b&&b[hl]?b[hl]():b),ze=K||(te={reason:0},te[Oi]=!1,te);function et(){ye||(ye=!0,x.run(Fe,K),R.run(Fe[ec]()),_e===!0&&Fe[Ln](ze),j())}return!z[cn]||z[cn](Fe,ze,et)!==!0?et():_e=!0,_e},z[Jn]=function(G,K){var te=z[hn];if(!te||G&&te!==G[hn]())return;var Z,_e=!1,ye=G||Xs(null,te,b&&b[hl]?b[hl]():b),Fe=K||{reason:0};function ze(){_e||(_e=!0,k(ye.getCfg(),ye.core(),ye[ki]()))}return!z._doUpdate||z._doUpdate(ye,Fe,ze)!==!0?ze():Z=!0,Z},Mi(z,"_addUnloadCb",function(){return x},"add"),Mi(z,"_addHook",function(){return R},"add"),wn(z,"_unloadHooks",{g:function(){return R}})}),c[ec]=function(z){return P(z)[ec]()},c[Aa]=function(){return p},c.setInitialized=function(z){p=z},c[tc]=function(z){b=z},c[Ln]=function(z,G){G?G[Ln](z):b&&tr(b[ro])&&b[ro](z,null)},c._getTelCtx=P;function P(z){z===void 0&&(z=null);var G=z;if(!G){var K=g||vl(null,{},c[hn]);b&&b[hl]?G=K[yu](null,b[hl]):G=K[yu](null,b)}return G}function k(z,G,K){ha(z,F_,mf(G)),!K&&G&&(K=G[rd]()[ki]());var te=b;b&&b[hl]&&(te=b[hl]()),c[hn]=G,g=vl(K,z,G,te)}function j(){p=!1,c[hn]=null,g=null,b=null,R=Vm(),x=fv()}}return a.__ieDyn=1,a}();function Zh(a,c,p){var g={id:c,fn:p};Ti(a,g);var b={remove:function(){dt(a,function(x,R){if(x.id===g.id)return a[Do](R,1),-1})}};return b}function Km(a,c,p){for(var g=!1,b=a[pt],x=0;x<b;++x){var R=a[x];if(R)try{if(R.fn[No](null,[c])===!1){g=!0;break}}catch(P){Hr(p,2,64,"Telemetry initializer failed: "+us(P),{exception:ur(P)},!0)}}return!g}var U_=function(a){Hu(c,a);function c(){var p=a.call(this)||this;p.identifier="TelemetryInitializerPlugin",p.priority=199;var g,b;x(),xi(c,p,function(R,P){R.addTelemetryInitializer=function(k){return Zh(b,g++,k)},R[ro]=function(k,j){Km(b,k,j?j[ec]():R[ec]())&&R[Ln](k,j)},R[cn]=function(){x()}});function x(){g=0,b=[]}return p}return c.__ieDyn=1,c}(mh),wf,pv="Plugins must provide initialize method",cm="_notificationManager",bf="SDK is still unloading...",vv="SDK is not initialized",hh=100,Xh=5e4,Cd=Bo((wf={cookieCfg:{}},wf[$s]={rdOnly:!0,ref:!0,v:[]},wf[Ys]={rdOnly:!0,ref:!0,v:[]},wf[lc]={ref:!0,v:{}},wf[os]=Zn,wf.loggingLevelConsole=0,wf.diagnosticLogInterval=Zn,wf));function Qh(a,c){return new En(c)}function j_(a,c,p){var g,b=[],x=[],R={};return dt(p,function(P){(at(P)||at(P[An]))&&Pn(pv);var k=P[Bl],j=P[eo];P&&k&&(at(R[k])?R[k]=j:Js(a,"Two extensions have same priority #"+k+" - "+R[k]+", "+j)),!k||k<c?b[Ur](P):x[Ur](P)}),g={},g[hn]=b,g[Ys]=x,g}function _h(a,c){var p=!1;return dt(c,function(g){if(g===a)return p=!0,-1}),p}function lm(a,c,p,g){p&&Ar(p,function(b,x){g&&li(x)&&li(c[b])&&lm(a,c[b],x,g),g&&li(x)&&li(c[b])?lm(a,c[b],x,g):a.set(c,b,x)})}function gh(a,c){var p=null,g=-1;return dt(a,function(b,x){if(b.w===c)return p=b,g=x,-1}),{i:g,l:p}}function Wm(a,c){var p=gh(a,c).l;return p||(p={w:c,rm:function(){var g=gh(a,c);g.i!==-1&&a[Do](g.i,1)}},a[Ur](p)),p}function mv(a,c,p){dt(c,function(g){var b=cl(a,g.w,p);delete g.w,g.rm=function(){b.rm()}})}function xd(a,c,p,g){return c.add(a[Ai](function(b){var x=b.cfg.disableDbgExt;x===!0&&g&&(p[es](g),g=null),p&&!g&&x!==!0&&(g=St(b.cfg),p[wa](g))})),g}function yh(a){return wn({rm:function(){a.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(a)+">"}})}var fm=function(){function a(){var c,p,g,b,x,R,P,k,j,z,G,K,te,Z,_e,ye,Fe,ze,et,rr,sr,Un,fn,jn,Yi,wi,Af,vm,Rf,Qe,jt,Nn;xi(a,this,function(Oe){Or(),Oe._getDbgPlgTargets=function(){return[fn,b]},Oe[Aa]=function(){return p},Oe.activeStatus=function(){return wi},Oe._setPendingStatus=function(){wi=3},Oe[An]=function(be,mt,Vt,Rt){te&&Pn(bf),Oe[Aa]()&&Pn("Core cannot be initialized more than once"),c=ha(be,Cd,Vt||Oe[qr],!1),be=c.cfg,co(c[Ai](function(mn){var Na=mn.cfg,lo=wi===3;if(!lo){vm=Na.initInMemoMaxSize||hh;var $o=Na[jc],Mf=Na.endpointUrl;if(at($o)){sr=null,wi=un[Zu];var Tv="Please provide instrumentation key";p?(Hr(g,1,100,Tv),na()):Pn(Tv);return}var bh=[];if(wr($o)?(bh[Ur]($o),sr=null):sr=$o,wr(Mf)?(bh[Ur](Mf),Af=null):Af=Mf,bh[pt]){Rf=!1,wi=3;var Ig=lp(Na.initTimeOut)?Na.initTimeOut:Xh,Ny=Gc(bh);zu(function(){Rf||Nt()},Ig),ql(Ny,function(Yn){try{if(Rf)return;if(!Yn.rejected){var Fa=Yn[td];if(Fa&&Fa[pt]){var Y_=Fa[0];if(sr=Y_&&Y_[td],Fa[pt]>1){var Ua=Fa[1];Af=Ua&&Ua[td]}}sr&&(be[jc]=sr,be.endpointUrl=Af)}Nt()}catch{Rf||Nt()}})}else Nt();var a_=mn.ref(mn.cfg,lc);Ar(a_,function(Yn){mn.ref(a_,Yn)})}})),x=Rt,et=xd(c,ze,x&&Oe[ks](),et),kf(),Oe[qr]=Vt;var Kt=be[$s];if(z=[],z[Ur].apply(z,Ji(Ji([],mt,!1),Kt)),G=be[Ys],Xa(null),(!K||K[pt]===0)&&Pn("No "+Ys+" available"),G&&G[pt]>1){var Rn=Oe[xo]("TeeChannelController");(!Rn||!Rn.plugin)&&Hr(g,1,28,"TeeChannel required")}mv(be,Un,g),Un=null,p=!0,wi===un.ACTIVE&&na()},Oe.getChannels=function(){var be=[];return K&&dt(K,function(mt){be[Ur](mt)}),On(be)},Oe.track=function(be){Zs(Oe[Kc](),function(){return"AppInsightsCore:track"},function(){be===null&&(Ia(be),Pn("Invalid telemetry item")),!be[Po]&&at(be[Po])&&(Ia(be),Pn("telemetry name required")),be[Xu]=be[Xu]||sr,be[Ao]=be[Ao]||ss(new Date),be.ver=be.ver||"4.0",!te&&Oe[Aa]()&&wi===un.ACTIVE?bi()[Ln](be):wi!==un[Zu]&&b[pt]<=vm&&b[Ur](be)},function(){return{item:be}},!be.sync)},Oe[rd]=bi,Oe[ks]=function(){return x||(x=new lt(c.cfg),Oe[cm]=x),x},Oe[wa]=function(be){Oe.getNotifyMgr()[wa](be)},Oe[es]=function(be){x&&x[es](be)},Oe.getCookieMgr=function(){return k||(k=N(c.cfg,Oe[qr])),k},Oe.setCookieMgr=function(be){k!==be&&(lf(k,!1),k=be)},Oe[Kc]=function(){return R||P||dl()},Oe.setPerfMgr=function(be){R=be},Oe.eventCnt=function(){return b[pt]},Oe.releaseQueue=function(){if(p&&b[pt]>0){var be=b;b=[],wi===2?dt(be,function(mt){mt[Xu]=mt[Xu]||sr,bi()[Ln](mt)}):Hr(g,2,20,"core init status is not active")}},Oe[Qu]=function(be){return _e=be||null,Nn=!1,Qe&&Qe[Co](),so(!0)};function Nt(){Rf=!0,at(sr)?(wi=un[Zu],Hr(g,1,112,"ikey can't be resolved from promises")):wi=un.ACTIVE,na()}function na(){p&&(Oe.releaseQueue(),Oe[Qu]())}function so(be){if((!Qe||!Qe[Ms])&&!Nn){var mt=be||g&&g.queue[pt]>0;mt&&(jt||(jt=!0,co(c[Ai](function(Vt){var Rt=Vt.cfg.diagnosticLogInterval;(!Rt||!(Rt>0))&&(Rt=1e4);var Kt=!1;Qe&&(Kt=Qe[Ms],Qe[Co]()),Qe=Jf(bv,Rt),Qe.unref(),Qe[Ms]=Kt}))),Qe[Ms]=!0)}return Qe}Oe[di]=function(){Nn=!0,Qe&&Qe[Co](),bv()},Jc(Oe,function(){return Z},["addTelemetryInitializer"]),Oe[ts]=function(be,mt,Vt){var Rt;be===void 0&&(be=!0),p||Pn(vv),te&&Pn(bf);var Kt=(Rt={reason:50},Rt[Oi]=be,Rt.flushComplete=!1,Rt),Rn;be&&!mt&&(Rn=Za(function(lo){mt=lo}));var mn=Sf(Of(),Oe);mn[Ls](function(){ze.run(Oe[qr]),Fm([k,x,g],be,function(){Or(),mt&&mt(Kt)})},Oe);function Na(lo){Kt.flushComplete=lo,te=!0,Fe.run(mn,Kt),Oe[di](),mn[Ln](Kt)}return bv(),Od(be,Na,6,Vt),Rn},Oe[xo]=uo,Oe.addPlugin=function(be,mt,Vt,Rt){if(!be){Rt&&Rt(!1),Zm(pv);return}var Kt=uo(be[eo]);if(Kt&&!mt){Rt&&Rt(!1),Zm("Plugin ["+be[eo]+"] is already loaded!");return}var Rn={reason:16};function mn($o){z[Ur](be),Rn.added=[be],Xa(Rn),Rt&&Rt(!0)}if(Kt){var Na=[Kt.plugin],lo={reason:2,isAsync:!!Vt};Lu(Na,lo,function($o){$o?(Rn.removed=Na,Rn.reason|=32,mn()):Rt&&Rt(!1)})}else mn()},Oe.updateCfg=function(be,mt){mt===void 0&&(mt=!0);var Vt;if(Oe[Aa]()){Vt={reason:1,cfg:c.cfg,oldCfg:Wd({},c.cfg),newConfig:Wd({},be),merge:mt},be=Vt.newConfig;var Rt=c.cfg;be[$s]=Rt[$s],be[Ys]=Rt[Ys]}c._block(function(Kt){var Rn=Kt.cfg;lm(Kt,Rn,be,mt),mt||Ar(Rn,function(mn){zi(be,mn)||Kt.set(Rn,mn,Zn)}),Kt[gu](Rn,Cd)},!0),c[Io](),Vt&&Ev(Vt)},Oe.evtNamespace=function(){return ye},Oe.flush=Od,Oe.getTraceCtx=function(be){return rr||(rr=$m()),rr},Oe.setTraceCtx=function(be){rr=be||null},Oe.addUnloadHook=co,Mi(Oe,"addUnloadCb",function(){return Fe},"add"),Oe.onCfgChange=function(be){var mt;return p?mt=cl(c.cfg,be,Oe[qr]):mt=Wm(Un,be),yh(mt)},Oe.getWParam=function(){return Il()||c.cfg.enableWParam?0:-1};function Yo(){var be={};jn=[];var mt=function(Vt){Vt&&dt(Vt,function(Rt){if(Rt[eo]&&Rt[Ri]&&!be[Rt.identifier]){var Kt=Rt[eo]+"="+Rt[Ri];jn[Ur](Kt),be[Rt.identifier]=Rt}})};mt(K),G&&dt(G,function(Vt){mt(Vt)}),mt(z)}function Or(){p=!1,c=ha({},Cd,Oe[qr]),c.cfg[Yc]=1,wn(Oe,"config",{g:function(){return c.cfg},s:function(mt){Oe.updateCfg(mt,!1)}}),wn(Oe,"pluginVersionStringArr",{g:function(){return jn||Yo(),jn}}),wn(Oe,"pluginVersionString",{g:function(){return Yi||(jn||Yo(),Yi=jn.join(";")),Yi||vr}}),wn(Oe,"logger",{g:function(){return g||(g=new pc(c.cfg),c[qr]=g),g},s:function(mt){c[qr]=mt,g!==mt&&(lf(g,!1),g=mt)}}),Oe[qr]=new pc(c.cfg),fn=[];var be=Oe.config[$s]||[];be.splice(0,be[pt]),Ti(be,fn),Z=new U_,b=[],lf(x,!1),x=null,R=null,P=null,lf(k,!1),k=null,j=null,z=[],G=null,K=null,te=!1,_e=null,ye=ps("AIBaseCore",!0),Fe=fv(),rr=null,sr=null,ze=Vm(),Un=[],Yi=null,jn=null,Nn=!1,Qe=null,jt=!1,wi=0,Af=null,vm=null,Rf=!1}function bi(){var be=vl(Of(),c.cfg,Oe);return be[Ls](so),be}function Xa(be){var mt=j_(Oe[qr],am,z);j=null,Yi=null,jn=null,K=(G||[])[0]||[],K=sm(Ti(K,mt[Ys]));var Vt=Ti(sm(mt[hn]),K);fn=On(Vt);var Rt=Oe.config[$s]||[];Rt.splice(0,Rt[pt]),Ti(Rt,fn);var Kt=bi();K&&K[pt]>0&&gs(Kt[yu](K),Vt),gs(Kt,Vt),be&&Ev(be)}function uo(be){var mt=null,Vt=null,Rt=[];return dt(fn,function(Kt){if(Kt[eo]===be&&Kt!==Z)return Vt=Kt,-1;Kt.getChannel&&Rt[Ur](Kt)}),!Vt&&Rt[pt]>0&&dt(Rt,function(Kt){if(Vt=Kt.getChannel(be),!Vt)return-1}),Vt&&(mt={plugin:Vt,setEnabled:function(Kt){Qn(Vt)[cc]=!Kt},isEnabled:function(){var Kt=Qn(Vt);return!Kt[ca]&&!Kt[cc]},remove:function(Kt,Rn){var mn;Kt===void 0&&(Kt=!0);var Na=[Vt],lo=(mn={reason:1},mn[Oi]=Kt,mn);Lu(Na,lo,function($o){$o&&Xa({reason:32,removed:Na}),Rn&&Rn($o)})}}),mt}function Of(){if(!j){var be=(fn||[]).slice();ua(be,Z)===-1&&be[Ur](Z),j=ml(sm(be),c.cfg,Oe)}return j}function Lu(be,mt,Vt){if(be&&be[pt]>0){var Rt=ml(be,c.cfg,Oe),Kt=Sf(Rt,Oe);Kt[Ls](function(){var Rn=!1,mn=[];dt(z,function(lo,$o){_h(lo,be)?Rn=!0:mn[Ur](lo)}),z=mn,Yi=null,jn=null;var Na=[];G&&(dt(G,function(lo,$o){var Mf=[];dt(lo,function(Tv){_h(Tv,be)?Rn=!0:Mf[Ur](Tv)}),Na[Ur](Mf)}),G=Na),Vt&&Vt(Rn),so()}),Kt[Ln](mt)}else Vt(!1)}function bv(){if(g&&g.queue){var be=g.queue.slice(0);g.queue[pt]=0,dt(be,function(mt){var Vt,Rt=(Vt={},Vt[Po]=_e||"InternalMessageId: "+mt[Su],Vt[Xu]=sr,Vt[Ao]=ss(new Date),Vt.baseType=gp.dataType,Vt.baseData={message:mt[Fs]},Vt);Oe.track(Rt)})}}function Od(be,mt,Vt,Rt){var Kt=1,Rn=!1,mn=null;Rt=Rt||5e3;function Na(){Kt--,Rn&&Kt===0&&(mn&&mn[Co](),mn=null,mt&&mt(Rn),mt=null)}if(K&&K[pt]>0){var lo=bi()[yu](K);lo.iterate(function($o){if($o.flush){Kt++;var Mf=!1;$o.flush(be,function(){Mf=!0,Na()},Vt)||Mf||(be&&mn==null?mn=zu(function(){mn=null,Na()},Rt):Na())}})}return Rn=!0,Na(),!0}function kf(){var be;co(c[Ai](function(mt){var Vt=mt.cfg.enablePerfMgr;if(Vt){var Rt=mt.cfg[os];(be!==Rt||!be)&&(Rt||(Rt=Qh),Gl(mt.cfg,os,Rt),be=Rt,P=null),!R&&!P&&tr(Rt)&&(P=Rt(Oe,Oe[ks]()))}else P=null,be=null}))}function Ev(be){var mt=Xs(Of(),Oe);mt[Ls](so),(!Oe._updateHook||Oe._updateHook(mt,be)!==!0)&&mt[Ln](be)}function Zm(be){var mt=Oe[qr];mt?(Hr(mt,2,73,be),so()):Pn(be)}function Ia(be){var mt=Oe[ks]();mt&&mt[zl]([be],2)}function co(be){ze.add(be)}})}return a.__ieDyn=1,a}();function Kr(a,c){try{if(a&&a!==""){var p=ma().parse(a);if(p&&p[qv]&&p[qv]>=p.itemsAccepted&&p.itemsReceived-p.itemsAccepted===p.errors[pt])return p}}catch(g){Hr(c,1,43,"Cannot parse the response. "+(g[Po]||ur(g)),{response:a})}return null}var Qs="",Pd="NoResponseBody",wp="&"+Pd+"=true",hv="POST",dm=function(){function a(){var c=0,p,g,b,x,R,P,k,j,z,G,K,te,Z,_e;xi(a,this,function(ye,Fe){var ze=!0;Rf(),ye[An]=function(Qe,jt){b=jt,g&&Hr(b,1,28,"Sender is already initialized"),ye.SetConfig(Qe),g=!0},ye._getDbgPlgTargets=function(){return[g,x,P,p]},ye.SetConfig=function(Qe){try{if(R=Qe.senderOnCompleteCallBack||{},P=!!Qe.disableCredentials,k=Qe.fetchCredentials,x=!!Qe.isOneDs,p=!!Qe.enableSendPromise,z=!!Qe.disableXhr,G=!!Qe.disableBeacon,K=!!Qe.disableBeaconSync,_e=Qe.timeWrapper,Z=!!Qe.addNoResponse,te=!!Qe.disableFetchKeepAlive,j={sendPOST:wi},x||(ze=!1),P){var jt=Eu();jt&&jt.protocol&&jt.protocol[Ka]()==="file:"&&(ze=!1)}return!0}catch{}return!1},ye.getSyncFetchPayload=function(){return c},ye.getSenderInst=function(Qe,jt){return Qe&&Qe[pt]?Un(Qe,jt):null},ye.getFallbackInst=function(){return j},ye[cn]=function(Qe,jt){Rf()};function et(Qe,jt){fn(jt,200,{},Qe)}function rr(Qe,jt){Hr(b,2,26,"Failed to send telemetry.",{message:Qe}),fn(jt,400,{})}function sr(Qe){rr("No endpoint url is provided for the batch",Qe)}function Un(Qe,jt){for(var Nn,Oe=0,Nt=null,na=0;Nt==null&&na<Qe[pt];)Oe=Qe[na],!z&&Oe===1?ev()?Nt=vm:tf()&&(Nt=wi):Oe===2&&ef(jt)&&(!jt||!te)?Nt=Af:Oe===3&&Kv()&&(jt?!K:!G)&&(Nt=Yi),na++;return Nt?(Nn={_transport:Oe,_isSync:jt},Nn[nc]=Nt,Nn):null}function fn(Qe,jt,Nn,Oe){try{Qe&&Qe(jt,Nn,Oe)}catch{}}function jn(Qe,jt){var Nn=si(),Oe=Qe[rc];if(!Oe)return sr(jt),!0;Oe=Qe[rc]+(Z?wp:Qs);var Nt=Qe[jl],na=x?Nt:new Blob([Nt],{type:"text/plain;charset=UTF-8"}),so=Nn.sendBeacon(Oe,na);return so}function Yi(Qe,jt,Nn){var Oe=Qe[jl];try{if(Oe)if(jn(Qe,jt))et(Qs,jt);else{var Nt=R&&R.beaconOnRetry;Nt&&tr(Nt)?Nt(Qe,jt,jn):(j&&j[nc](Qe,jt,!0),Hr(b,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(na){x&&Js(b,"Failed to send telemetry using sendBeacon API. Ex:"+ur(na)),fn(jt,x?0:400,{},Qs)}}function wi(Qe,jt,Nn){var Oe,Nt,na,so=Qe[is]||{};!Nn&&p&&(Oe=Za(function(Xa,uo){Nt=Xa,na=uo})),x&&Nn&&Qe.disableXhrSync&&(Nn=!1);var Yo=Qe[rc];if(!Yo){sr(jt),Nt&&Nt(!1);return}var Or=Om(hv,Yo,ze,!0,Nn,Qe[Yl]);x||Or[Am]("Content-type","application/json"),dt(go(so),function(Xa){Or[Am](Xa,so[Xa])}),Or.onreadystatechange=function(){x||(bi(Or),Or.readyState===4&&Nt&&Nt(!0))},Or.onload=function(){x&&bi(Or)};function bi(Xa){var uo=R&&R.xhrOnComplete,Of=uo&&tr(uo);if(Of)uo(Xa,jt,Qe);else{var Lu=Bs(Xa);fn(jt,Xa[as],bu(Xa,x),Lu)}}return Or.onerror=function(Xa){fn(jt,x?Or[as]:400,bu(Or,x),x?Qs:Zc(Or)),na&&na(Xa)},Or.ontimeout=function(){fn(jt,x?Or[as]:500,bu(Or,x),x?Qs:Zc(Or)),Nt&&Nt(!1)},Or.send(Qe[jl]),Oe}function Af(Qe,jt,Nn){var Oe,Nt=Qe[rc],na=Qe[jl],so=x?na:new Blob([na],{type:"application/json"}),Yo,Or,bi,Xa=new Headers,uo=na[pt],Of=!1,Lu=!1,bv=Qe[is]||{},Od=(Oe={method:hv,body:so},Oe[ff]=!0,Oe);Qe.headers&&go(Qe.headers)[pt]>0&&(dt(go(bv),function(Ia){Xa.append(Ia,bv[Ia])}),Od[is]=Xa),k?Od.credentials=k:ze&&x&&(Od.credentials="include"),Nn&&(Od.keepalive=!0,c+=uo,x?Qe._sendReason===2&&(Of=!0,Z&&(Nt+=wp)):Of=!0);var kf=new Request(Nt,Od);try{kf[ff]=!0}catch{}if(!Nn&&p&&(Yo=Za(function(Ia,co){Or=Ia,bi=co})),!Nt){sr(jt),Or&&Or(!1);return}function Ev(Ia){fn(jt,x?0:400,{},x?Qs:Ia)}function Zm(Ia,co,be){var mt=Ia[as],Vt=R.fetchOnComplete;Vt&&tr(Vt)?Vt(Ia,jt,be||Qs,co):fn(jt,mt,{},be||Qs)}try{ql(fetch(x?Nt:kf,x?Od:null),function(Ia){if(Nn&&(c-=uo,uo=0),!Lu)if(Lu=!0,Ia.rejected)Ev(Ia.reason&&Ia.reason[Fs]),bi&&bi(Ia.reason);else{var co=Ia[td];try{!x&&!co.ok?(Ev(co.statusText),Or&&Or(!1)):x&&!co.body?(Zm(co,null,Qs),Or&&Or(!0)):ql(co.text(),function(be){Zm(co,Qe,be[td]),Or&&Or(!0)})}catch(be){Ev(ur(be)),bi&&bi(be)}}})}catch(Ia){Lu||(Ev(ur(Ia)),bi&&bi(Ia))}return Of&&!Lu&&(Lu=!0,fn(jt,200,{}),Or&&Or(!0)),x&&!Lu&&Qe[Yl]>0&&_e&&_e.set(function(){Lu||(Lu=!0,fn(jt,500,{}),Or&&Or(!0))},Qe[Yl]),Yo}function vm(Qe,jt,Nn){var Oe=oi(),Nt=new XDomainRequest,na=Qe[jl];Nt.onload=function(){var Xa=Bs(Nt),uo=R&&R.xdrOnComplete;uo&&tr(uo)?uo(Nt,jt,Qe):fn(jt,200,{},Xa)},Nt.onerror=function(){fn(jt,400,{},x?Qs:Vl(Nt))},Nt.ontimeout=function(){fn(jt,500,{})},Nt.onprogress=function(){};var so=Oe&&Oe.location&&Oe.location[rs]||"",Yo=Qe[rc];if(!Yo){sr(jt);return}if(!x&&Yo.lastIndexOf(so,0)!==0){var Or="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";Hr(b,2,40,". "+Or),rr(Or,jt);return}var bi=x?Yo:Yo[ba](/^(https?:)/,"");Nt.open(hv,bi),Qe[Yl]&&(Nt[Yl]=Qe[Yl]),Nt.send(na),x&&Nn?_e&&_e.set(function(){Nt.send(na)},0):Nt.send(na)}function Rf(){c=0,g=!1,p=!1,b=null,x=null,R=null,P=null,k=null,j=null,z=!1,G=!1,K=!1,te=!1,Z=!1,_e=null}})}return a.__ieDyn=1,a}(),Ef="on",Ad="attachEvent",e_="addEventListener",bp="detachEvent",_l="removeEventListener",hc="events",Uo="visibilitychange",eu="pagehide",gl="pageshow",Tf="unload",Ou="beforeunload",ku=ps("aiEvtPageHide"),Ep=ps("aiEvtPageShow"),Rd=/\.[\.]+/g,t_=/[\.]+$/,_v=1,_c=Ks("events"),Jm=/^([^.]*)(?:\.(.+)|)/;function gv(a){return a&&a[ba]?a[ba](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,vr):a}function If(a,c){var p;if(c){var g=vr;qt(c)?(g=vr,dt(c,function(x){x=gv(x),x&&(x[0]!=="."&&(x="."+x),g+=x)})):g=gv(c),g&&(g[0]!=="."&&(g="."+g),a=(a||vr)+g)}var b=Jm.exec(a||vr)||[];return p={},p[Wa]=b[1],p.ns=(b[2]||vr).replace(Rd,".").replace(t_,vr)[pi](".").sort().join("."),p}function yv(a,c,p){var g=[],b=_c.get(a,hc,{},!1),x=If(c,p);return Ar(b,function(R,P){dt(P,function(k){var j;(!x[Wa]||x[Wa]===k.evtName[Wa])&&(!x.ns||x.ns===x.ns)&&g[Ur]((j={},j[Po]=k.evtName[Wa]+(k.evtName.ns?"."+k.evtName.ns:vr),j.handler=k[ns],j))})}),g}function Sv(a,c,p){p===void 0&&(p=!0);var g=_c.get(a,hc,{},p),b=g[c];return b||(b=g[c]=[]),b}function Sh(a,c,p,g){a&&c&&c[Wa]&&(a[_l]?a[_l](c[Wa],p,g):a[bp]&&a[bp](Ef+c[Wa],p))}function wh(a,c,p,g){var b=!1;return a&&c&&c[Wa]&&p&&(a[e_]?(a[e_](c[Wa],p,g),b=!0):a[Ad]&&(a[Ad](Ef+c[Wa],p),b=!0)),b}function r_(a,c,p,g){for(var b=c[pt];b--;){var x=c[b];x&&(!p.ns||p.ns===x.evtName.ns)&&(!g||g(x))&&(Sh(a,x.evtName,x[ns],x.capture),c[Do](b,1))}}function gi(a,c,p){if(c[Wa])r_(a,Sv(a,c[Wa]),c,p);else{var g=_c.get(a,hc,{});Ar(g,function(b,x){r_(a,x,c,p)}),go(g)[pt]===0&&_c.kill(a,hc)}}function tu(a,c){var p;return c?(qt(c)?p=[a].concat(c):p=[a,c],p=If("xx",p).ns[pi](".")):p=a,p}function Tp(a,c,p,g,b){var x;b===void 0&&(b=!1);var R=!1;if(a)try{var P=If(c,g);if(R=wh(a,P,p,b),R&&_c.accept(a)){var k=(x={guid:_v++,evtName:P},x[ns]=p,x.capture=b,x);Sv(a,P.type)[Ur](k)}}catch{}return R}function Gn(a,c,p,g,b){if(b===void 0&&(b=!1),a)try{var x=If(c,g),R=!1;gi(a,x,function(P){return x.ns&&!p||P[ns]===p?(R=!0,!0):!1}),R||Sh(a,x,p,b)}catch{}}function Ip(a,c,p,g){return g===void 0&&(g=!1),Tp(a,c,p,null,g)}function Np(a,c,p,g){g===void 0&&(g=!1),Gn(a,c,p,null,g)}function n_(a,c,p){var g=!1,b=oi();b&&(g=Tp(b,a,c,p),g=Tp(b.body,a,c,p)||g);var x=za();return x&&(g=Tp(x,a,c,p)||g),g}function d(a,c,p){var g=oi();g&&(Gn(g,a,c,p),Gn(g.body,a,c,p));var b=za();b&&Gn(b,a,c,p)}function _(a,c,p,g){var b=!1;return c&&a&&a[pt]>0&&dt(a,function(x){x&&(!p||ua(p,x)===-1)&&(b=n_(x,c,g)||b)}),b}function E(a,c,p,g){var b=!1;return c&&a&&qt(a)&&(b=_(a,c,p,g),!b&&p&&p[pt]>0&&(b=_(a,c,null,g))),b}function C(a,c,p){a&&qt(a)&&dt(a,function(g){g&&d(g,c,p)})}function O(a,c,p){return E([Ou,Tf,eu],a,c,p)}function $(a,c){C([Ou,Tf,eu],a,c)}function q(a,c,p){function g(R){var P=za();a&&P&&P.visibilityState==="hidden"&&a(R)}var b=tu(ku,p),x=_([eu],a,c,b);return(!c||ua(c,Uo)===-1)&&(x=_([Uo],g,c,b)||x),!x&&c&&(x=q(a,null,p)),x}function W(a,c){var p=tu(ku,c);C([eu],a,p),C([Uo],null,p)}function oe(a,c,p){function g(R){var P=za();a&&P&&P.visibilityState==="visible"&&a(R)}var b=tu(Ep,p),x=_([gl],a,c,b);return x=_([Uo],g,c,b)||x,!x&&c&&(x=oe(a,null,p)),x}function se(a,c){var p=tu(Ep,c);C([gl],a,p),C([Uo],null,p)}var De=Pi({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3}),qe="",Ye="https://browser.events.data.microsoft.com/OneCollector/1.0/",Ne="version",me="properties",Ue="initialize",Ee="logger",Ke="indexOf",Ce="timings",Te="pollInternalLogs",Be="value",zt="kind",Zt="length",or="processTelemetryStart",Dr="handleField",jr="rmSanitizer",ln="rmFieldSanitizer",tn="canHandle",Xt,ea="4.3.4",Xe="1DS-Web-JS-"+ea,ft=m.hasOwnProperty,yr="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",lr="withCredentials",Et="timeout",Rr=(Xt={},Xt[0]=0,Xt[2]=6,Xt[1]=1,Xt[3]=7,Xt[4098]=6,Xt[4097]=1,Xt[4099]=7,Xt),It=null,Ma=Il(),ut=$d();function Tn(a){return!(a===qe||at(a))}function In(a){if(a){var c=Ki(a,"-");if(c>-1)return kn(a,c)}return qe}function yi(){return It===null&&(It=!rt(Uint8Array)&&!La()&&!Ql()),It}function gc(a){return!!(a&&je(a)&&a>=1&&a<=4)}function Ui(a,c,p){if(!c&&!Tn(c)||typeof a!="string")return null;var g=typeof c;if(g==="string"||g==="number"||g==="boolean"||qt(c))c={value:c};else if(g==="object"&&!ft.call(c,"value"))c={value:p?JSON.stringify(c):c};else if(at(c[Be])||c[Be]===qe||!Gt(c[Be])&&!je(c[Be])&&!Kn(c[Be])&&!qt(c[Be]))return null;if(qt(c[Be])&&!nu(c[Be]))return null;if(!at(c[zt])){if(qt(c[Be])||!Jr(c[zt]))return null;c[Be]=c[Be].toString()}return c}function Nf(a,c,p){var g=-1;if(!rt(a))if(c>0&&(c===32?g=8192:c<=13&&(g=c<<5)),ra(p))g===-1&&(g=0),g|=p;else{var b=Rr[ji(a)]||-1;g!==-1&&b!==-1?g|=b:b===6&&(g=b)}return g}function ys(a,c,p){p===void 0&&(p=!0);var g;return a&&(g=a.get(c),p&&g&&decodeURIComponent&&(g=decodeURIComponent(g))),g||qe}function jo(a){a===void 0&&(a="D");var c=hf();return a==="B"?c="{"+c+"}":a==="P"?c="("+c+")":a==="N"&&(c=c.replace(/-/g,qe)),c}function ru(a,c,p,g,b){var x={},R=!1,P=0,k=arguments[Zt],j=arguments;for(Kn(j[0])&&(R=j[0],P++);P<k;P++){var a=j[P];Ar(a,function(G,K){R&&K&&Yr(K)?qt(K)?(x[G]=x[G]||[],dt(K,function(te,Z){te&&Yr(te)?x[G][Z]=ru(!0,x[G][Z],te):x[G][Z]=te})):x[G]=ru(!0,x[G],K):x[G]=K})}return x}var ta=Rl;function Jr(a){return a===0||a>0&&a<=13||a===32}function ra(a){return a>=0&&a<=9}function La(){var a=si();if(!rt(a)&&a.userAgent){var c=a.userAgent.toLowerCase();if((c[Ke]("safari")>=0||c[Ke]("firefox")>=0)&&c[Ke]("chrome")<0)return!0}return!1}function nu(a){return a[Zt]>0}function yc(a,c){var p=a;p[Ce]=p[Ce]||{},p[Ce][or]=p[Ce][or]||{},p[Ce][or][c]=ta()}function ji(a){var c=0;if(a!=null){var p=typeof a;p==="string"?c=1:p==="number"?c=2:p==="boolean"?c=3:p===r&&(c=4,qt(a)?(c=4096,a[Zt]>0&&(c|=ji(a[0]))):ft.call(a,"value")&&(c=8192|ji(a[Be])))}return c}function Df(){return!!Qr("chrome")}function au(a,c,p,g,b,x){g===void 0&&(g=!1),b===void 0&&(b=!1);function R(k,j,z){try{k[j]=z}catch{}}var P=new XMLHttpRequest;return g&&R(P,yr,g),p&&R(P,lr,p),P.open(a,c,!b),p&&R(P,lr,p),!b&&x&&R(P,Et,x),P}function pm(a){return a>0}var Sc=Bo({endpointUrl:Ye,propertyStorageOverride:{isVal:Cf}});function Cf(a){return a&&(!a.getProperty||!a.setProperty)&&Pn("Invalid property storage override passed."),!0}var _a=function(a){Hu(c,a);function c(){var p=a.call(this)||this;return xi(c,p,function(g,b){g[Ue]=function(x,R,P,k){Zs(g,function(){return"AppInsightsCore.initialize"},function(){try{b[Ue](ha(x,Sc,P||g[Ee],!1).cfg,R,P,k)}catch(G){var j=g[Ee],z=ur(G);z[Ke]("channels")!==-1&&(z+=`
 - Channels must be provided through config.channels only!`),Hr(j,1,514,"SDK Initialization Failed - no telemetry will be sent: "+z)}},function(){return{config:x,extensions:R,logger:P,notificationManager:k}})},g.track=function(x){Zs(g,function(){return"AppInsightsCore.track"},function(){var R=x;if(R){R[Ce]=R[Ce]||{},R[Ce].trackStart=ta(),gc(R.latency)||(R.latency=1);var P=R.ext=R.ext||{};P.sdk=P.sdk||{},P.sdk.ver=Xe;var k=R.baseData=R.baseData||{};k[me]=k[me]||{};var j=k[me];j[Ne]=j[Ne]||g.pluginVersionString||qe}b.track(R)},function(){return{item:x}},!x.sync)},g[Te]=function(x){return b[Te](x||"InternalLog")}}),p}return c.__ieDyn=1,c}(fm),Dp=Pi({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),xf=Pi({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),wv=Pi({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),Mu=Pi({Normal:1,Critical:2}),Si=Pi({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),Pf=function(){function a(c){var p=this,g={},b=[],x=[];c&&x.push(c);function R(z,G){var K,te=g[z];if(te&&(K=te[G]),!K&&K!==null){if(Gt(z)&&Gt(G))if(x[Zt]>0){for(var Z=0;Z<x[Zt];Z++)if(x[Z][Dr](z,G)){K={canHandle:!0,fieldHandler:x[Z]};break}}else b[Zt]===0&&(K={canHandle:!0});if(!K&&K!==null){K=null;for(var Z=0;Z<b[Zt];Z++)if(b[Z][Dr](z,G)){K={canHandle:!0,handler:b[Z],fieldHandler:null};break}}te||(te=g[z]={}),te[G]=K}return K}p.clearCache=function(){g={}},p.addSanitizer=function(z){z&&(zd(b,z)||b.push(z),g={})},p.addFieldSanitizer=function(z){z&&(zd(x,z)||x.push(z),g={})},p[jr]=function(z){if(z){var G=ua(b,z);G!==-1&&(b.splice(G,1),g={}),dt(b,function(K){K&&K[jr]&&K[jr](z)})}},p[ln]=function(z){if(z){var G=ua(x,z);G!==-1&&(x.splice(G,1),g={}),dt(b,function(K){K&&K[ln]&&K[ln](z)})}},p.isEmpty=function(){return Ps(b)+Ps(x)===0},p[Dr]=function(z,G){var K=R(z,G);return K?K[tn]:!1},p[Be]=function(z,G,K,te){var Z=R(z,G);if(Z&&Z[tn]){if(!Z||!Z[tn])return null;if(Z.handler)return Z.handler[Be](z,G,K,te);if(!Gt(G)||at(K)||K===qe)return null;var _e=null,ye=ji(K);if((ye&8192)===8192){var Fe=ye&-8193;if(_e=K,!Tn(_e[Be])||Fe!==1&&Fe!==2&&Fe!==3&&(Fe&4096)!==4096)return null}else ye===1||ye===2||ye===3||(ye&4096)===4096?_e=k(z,G,K):ye===4&&(_e=k(z,G,te?JSON.stringify(K):K));if(_e)return P(Z,z,G,ye,_e,te)}return null},p.property=function(z,G,K,te){var Z=R(z,G);if(!Z||!Z[tn]||!Gt(G)||at(K)||!Tn(K[Be]))return null;var _e=ji(K[Be]);return _e===0?null:P(Z,z,G,_e,K,te)};function P(z,G,K,te,Z,_e){if(z.handler)return z.handler.property(G,K,Z,_e);if(!at(Z[zt])){if((te&4096)===4096||!Jr(Z[zt]))return null;Z[Be]=Z[Be].toString()}return j(z.fieldHandler,G,K,te,Z)}function k(z,G,K){return Tn(K)?{value:K}:null}function j(z,G,K,te,Z){if(Z&&z){var _e=z.getSanitizer(G,K,te,Z[zt],Z.propertyType);if(_e)if(te===4){var ye={},Fe=Z[Be];Ar(Fe,function(et,rr){var sr=G+"."+K;if(Tn(rr)){var Un=k(sr,et,rr);Un=j(z,sr,et,ji(rr),Un),Un&&(ye[et]=Un[Be])}}),Z[Be]=ye}else{var ze={path:G,name:K,type:te,prop:Z,sanitizer:p};Z=_e.call(p,ze)}}return Z}}return a.getFieldType=ji,a}();e.ActiveStatus=un,e.AppInsightsCore=_a,e.BaseTelemetryPlugin=mh,e.DiagnosticLogger=pc,e.EventLatency=xf,e.EventPersistence=Mu,e.EventPropertyType=wv,e.EventsDiscardedReason=_u,e.FullVersionString=Xe,e.InternalAppInsightsCore=fm,e.LoggingSeverity=De,e.MinChannelPriorty=Qf,e.NotificationManager=lt,e.PerfEvent=At,e.PerfManager=En,e.ProcessTelemetryContext=um,e.SenderPostManager=dm,e.TraceLevel=Si,e.Undefined=n,e.ValueKind=Dp,e.ValueSanitizer=Pf,e.Version=ea,e._InternalLogMessage=gp,e.__getRegisteredEvents=yv,e._appendHeader=zs,e._getAllResponseHeaders=bu,e._logInternalMessage=iv,e._testHookMaxUnloadHooksCb=vh,e._throwInternal=Hr,e._warnToConsole=Js,e.addEventHandler=n_,e.addEventListeners=E,e.addPageHideEventListener=q,e.addPageShowEventListener=oe,e.addPageUnloadEventListener=O,e.areCookiesSupported=F,e.arrForEach=dt,e.arrIndexOf=ua,e.arrMap=lu,e.arrReduce=Wn,e.attachEvent=Ip,e.blockDynamicConversion=Lm,e.convertAllHeadersToMap=ls,e.cookieAvailable=F,e.createCookieMgr=N,e.createDynamicConfig=ha,e.createEnumStyle=Pi,e.createGuid=jo,e.createProcessTelemetryContext=vl,e.createTraceParent=Ta,e.createUniqueNamespace=ps,e.createUnloadHandlerContainer=fv,e.dateNow=fu,e.detachEvent=Np,e.disallowsSameSiteNone=tt,e.doPerf=Zs,e.dumpObj=ur,e.eventOff=Gn,e.eventOn=Tp,e.extend=ru,e.findW3cTraceParent=Nd,e.forceDynamicConversion=ko,e.formatErrorMessageXdr=Vl,e.formatErrorMessageXhr=Zc,e.formatTraceParent=Ru,e.generateW3CId=Td,e.getCommonSchemaMetaData=Nf,e.getConsole=vd,e.getCookieValue=ys,e.getCrypto=Qp,e.getDocument=za,e.getDynamicConfigHandler=il,e.getExceptionName=us,e.getFieldValueType=ji,e.getGlobal=zf,e.getGlobalInst=Qr,e.getHistory=Gi,e.getIEVersion=Vv,e.getISOString=ss,e.getJSON=ma,e.getLocation=Eu,e.getMsCrypto=Xl,e.getNavigator=si,e.getPerformance=Di,e.getResponseText=Bs,e.getSetValue=Gl,e.getTenantId=In,e.getTime=ta,e.getWindow=oi,e.hasDocument=Il,e.hasHistory=Nl,e.hasJSON=Ra,e.hasNavigator=Yp,e.hasOwnProperty=Sn,e.hasWindow=$d,e.isArray=qt,e.isArrayValid=nu,e.isBeaconsSupported=Kv,e.isBoolean=Kn,e.isChromium=Df,e.isDate=an,e.isDocumentObjectAvailable=Ma,e.isError=Ct,e.isFetchSupported=ef,e.isFunction=tr,e.isGreaterThanZero=pm,e.isIE=Tu,e.isLatency=gc,e.isNotTruthy=ti,e.isNullOrUndefined=at,e.isNumber=je,e.isObject=Yr,e.isReactNative=Ql,e.isSampledFlag=om,e.isString=Gt,e.isTruthy=Bi,e.isTypeof=Ft,e.isUint8ArrayAvailable=yi,e.isUndefined=rt,e.isValidSpanId=_s,e.isValidTraceId=_i,e.isValidTraceParent=pl,e.isValueAssigned=Tn,e.isValueKind=Jr,e.isWindowObjectAvailable=ut,e.isXhrSupported=tf,e.mergeEvtNamespace=tu,e.newGuid=hf,e.newId=af,e.normalizeJsName=qs,e.objDefineAccessors=qf,e.objForEachKey=Ar,e.objFreeze=On,e.objKeys=go,e.objSeal=yo,e.onConfigChange=cl,e.openXhr=au,e.optimizeObject=fd,e.parseResponse=Kr,e.parseTraceParent=Xn,e.perfNow=Rl,e.prependTransports=Kl,e.proxyAssign=cs,e.proxyFunctionAs=Mi,e.proxyFunctions=Jc,e.random32=nl,e.randomValue=Zv,e.removeEventHandler=d,e.removeEventListeners=C,e.removePageHideEventListener=W,e.removePageShowEventListener=se,e.removePageUnloadEventListener=$,e.safeGetCookieMgr=S,e.safeGetLogger=mf,e.sanitizeProperty=Ui,e.setEnableEnvMocks=pd,e.setProcessTelemetryTimings=yc,e.setValue=vi,e.strContains=wt,e.strEndsWith=Kf,e.strFunction=t,e.strObject=r,e.strPrototype=o,e.strStartsWith=Yv,e.strTrim=xa,e.strUndefined=n,e.throwError=Pn,e.toISOString=ss,e.useXDomainRequest=ev})});var US=Ld((Fg,FS)=>{(function(e,t){typeof Fg=="object"&&typeof FS<"u"?t(Fg):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.oneDS=e.oneDS||{}))})(Fg,function(e){"use strict";var t="REAL_TIME",r="NEAR_REAL_TIME",n="BEST_EFFORT",o="function",u="object",m="undefined",y="prototype",T=Object,D=T[y];function U(d,_){return d||_}function H(d,_){return d[_]}var ne=void 0,pe=null,ce="",ee="function",Q="object",ve="prototype",Pe="__proto__",We="undefined",Ae="constructor",Ze="Symbol",Tt="_polyfill",Dt="length",Lt="name",it="call",Ht="toString",xr=U(Object),oa=H(xr,ve),ei=U(String),Pr=H(ei,ve),xn=U(Math),nt=U(Array),ho=H(nt,ve),Ve=H(ho,"slice");function Tr(d,_){try{return{v:d.apply(this,_)}}catch(E){return{e:E}}}function Bn(d){return function(_){return typeof _===d}}function kt(d){return typeof d===We||d===We}function Ft(d){return!at(d)}function rt(d){return d===pe||kt(d)}function yn(d){return d===pe||!at(d)}function at(d){return!!d||d!==ne}var Dc=Bn("string"),Wt=Bn(ee);function qi(d){return!d&&rt(d)?!1:!!d&&typeof d===Q}var Gt=H(nt,"isArray"),tr=Bn("number"),Yr=Bn("boolean");function qt(d){return!!(d&&d.then&&Wt(d.then))}var an=H(xr,"getOwnPropertyDescriptor");function je(d,_){return!!d&&oa.hasOwnProperty[it](d,_)}var Kn=U(H(xr,"hasOwn"),Ct);function Ct(d,_){return je(d,_)||!!an(d,_)}function wr(d,_,E){if(d&&qi(d)){for(var C in d)if(Kn(d,C)&&_[it](E||d,C,d[C])===-1)break}}var ti={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Bi(d){var _={};if(_[ti.c]=!0,_[ti.e]=!0,d.l){_.get=function(){return d.l.v};var E=an(d.l,"v");E&&E.set&&(_.set=function(C){d.l.v=C})}return wr(d,function(C,O){_[ti[C]]=Ft(O)?_[ti[C]]:O}),_}var Gr=H(xr,"defineProperty");function Sn(d,_,E){return Gr(d,_,Bi(E))}function zi(d,_,E,C,O){var $={};return wr(d,function(q,W){ga($,q,_?W:q,O),ga($,W,E?W:q,O)}),C?C($):$}function ga(d,_,E,C){Gr(d,_,{value:E,enumerable:!0,writable:!!C})}var Ar=U(ei),ar="[object Error]";function pr(d,_){var E=ce,C=oa[Ht][it](d);C===ar&&(d={stack:Ar(d.stack),message:Ar(d.message),name:Ar(d.name)});try{E=JSON.stringify(d,pe,_?typeof _=="number"?_:4:ne),E=(E?E.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):pe)||Ar(d)}catch(O){E=" - "+pr(O,_)}return C+": "+E}function $r(d){throw new TypeError(d)}var qf=H(xr,"freeze");function wn(d){return d}function El(d){return d[Pe]||pe}var Cc=H(xr,"assign"),bn=H(xr,"keys");function qa(d){return qf&&wr(d,function(_,E){(Gt(E)||qi(E))&&qa(E)}),ur(d)}var ur=U(qf,wn),Pn=U(H(xr,"getPrototypeOf"),El);function zn(d){return zi(d,1,0,ur)}function _o(d){return zi(d,0,0,ur)}var Is=_o({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),xc="__tsUtils$gblCfg",Tl;function go(){var d;return typeof globalThis!==We&&(d=globalThis),!d&&typeof self!==We&&(d=self),!d&&typeof window!==We&&(d=window),!d&&typeof global!==We&&(d=global),d}function Bo(){if(!Tl){var d=Tr(go).v||{};Tl=d[xc]=d[xc]||{}}return Tl}var On=yo;function yo(d,_,E){var C=_?_[d]:pe;return function(O){var $=(O?O[d]:pe)||C;if($||E){var q=arguments;return($||E).apply(O,$?Ve[it](q,1):q)}$r('"'+Ar(d)+'" not defined for '+pr(O))}}var Ns=H(xn,"max"),ya=On("slice",Pr),ju=On("substring",Pr),Ds=yo("substr",Pr,Nr);function Nr(d,_,E){return rt(d)&&$r("Invalid "+pr(d)),E<0?ce:(_=_||0,_<0&&(_=Ns(_+d[Dt],0)),kt(E)?ya(d,_):ya(d,_,_+E))}function Lr(d,_){return ju(d,0,_)}var ri="_urid",Hi;function pn(){if(!Hi){var d=Bo();Hi=d.gblSym=d.gblSym||{k:{},s:{}}}return Hi}var ni;function ai(d){var _={description:Ar(d),toString:function(){return Ze+"("+d+")"}};return _[Tt]=!0,_}function Cs(d){var _=pn();if(!Kn(_.k,d)){var E=ai(d),C=bn(_.s).length;E[ri]=function(){return C+"_"+E[Ht]()},_.k[d]=E,_.s[E[ri]()]=Ar(d)}return _.k[d]}function Yd(d){!ni&&(ni={});var _,E=Is[d];return E&&(_=ni[E]=ni[E]||ai(Ze+"."+E)),_}var on;function So(){on=Bo()}function zo(d){return Gr({toJSON:function(){return d}},"v",{value:d})}var kn="window",Ho;function uu(d,_){var E;return function(){return!on&&So(),(!E||on.lzy)&&(E=zo(Tr(d,_).v)),E.v}}function Ba(d){return!on&&So(),(!Ho||d===!1||on.lzy)&&(Ho=zo(Tr(go).v||pe)),Ho.v}function sn(d,_){var E;if(!Ho||_===!1?E=Ba(_):E=Ho.v,E&&E[d])return E[d];if(d===kn)try{return window}catch{}return pe}var Mn=uu(sn,["document"]);function Yu(){return!!ii()}var ii=uu(sn,[kn]);function Ir(){return!!sa()}var sa=uu(sn,["navigator"]),Bf=uu(function(){return!!Tr(function(){return process&&(process.versions||{}).node}).v}),Sa,Go;function Pc(){return Sa=zo(Tr(sn,[Ze]).v),Sa}function Vo(d){var _=(on.lzy?0:Sa)||Pc();return _.v?_.v[d]:ne}function zf(){return!!Qr()}function Qr(){return!on&&So(),((on.lzy?0:Sa)||Pc()).v}function Il(d,_){var E=Is[d];!on&&So();var C=(on.lzy?0:Sa)||Pc();return C.v?C.v[E||d]:_?ne:Yd(d)}function za(d,_){!on&&So();var E=(on.lzy?0:Sa)||Pc();return E.v?E.v(d):_?pe:ai(d)}function $d(d){return!on&&So(),Go=(on.lzy?0:Go)||zo(Tr(Vo,["for"]).v),(Go.v||Cs)(d)}function oi(d){return!!d&&Wt(d.next)}function Yp(d){return!yn(d)&&Wt(d[Il(3)])}var si;function Nl(d,_,E){if(d&&(oi(d)||(!si&&(si=zo(Il(3))),d=d[si.v]?d[si.v]():pe),oi(d))){var C=ne,O=ne;try{for(var $=0;!(O=d.next()).done&&_[it](E||d,O.value,$,d)!==-1;)$++}catch(q){C={e:q},d.throw&&(O=pe,d.throw(C))}finally{try{O&&!O.done&&d.return&&d.return(O)}finally{if(C)throw C.e}}}}function Gi(d,_,E){return d.apply(_,E)}function Hf(d,_){return!kt(_)&&d&&(Gt(_)?Gi(d.push,d,_):oi(_)||Yp(_)?Nl(_,function(E){d.push(E)}):d.push(_)),d}function hr(d,_,E){if(d)for(var C=d[Dt]>>>0,O=0;O<C&&!(O in d&&_[it](E||d,d[O],O,d)===-1);O++);}var Ko=On("indexOf",ho);function Gf(d,_,E){return((d?d.slice:pe)||Ve).apply(d,Ve[it](arguments,1))}var Ha=U(H(xr,"create"),Ac);function Ac(d){if(!d)return{};var _=typeof d;_!==Q&&_!==ee&&$r("Prototype must be an Object or function: "+pr(d));function E(){}return E[ve]=d,new E}var Pt;function ui(d,_){var E=xr.setPrototypeOf||function(C,O){var $;!Pt&&(Pt=zo(($={},$[Pe]=[],$ instanceof Array))),Pt.v?C[Pe]=O:wr(O,function(q,W){return C[q]=W})};return E(d,_)}function $u(d,_,E){Tr(Sn,[_,Lt,{v:d,c:!0,e:!1}]),_=ui(_,E);function C(){this[Ae]=_,Tr(Sn,[this,Lt,{v:d,c:!0,e:!1}])}return _[ve]=E===pe?Ha(E):(C[ve]=E[ve],new C),_}function Dl(d,_){_&&(d[Lt]=_)}function Uv(d,_,E){var C=E||Error,O=C[ve][Lt],$=Error.captureStackTrace;return $u(d,function(){var q=this,W=arguments;try{Tr(Dl,[C,d]);var oe=Gi(C,q,Ve[it](W))||q;if(oe!==q){var se=Pn(q);se!==Pn(oe)&&ui(oe,se)}return $&&$(oe,q[Ae]),_&&_(oe,W),oe}finally{Tr(Dl,[C,O])}},C)}function Ei(){return(Date.now||Cl)()}function Cl(){return new Date().getTime()}function qd(d){return function(E){return rt(E)&&$r("strTrim called ["+pr(E)+"]"),E&&E.replace&&(E=E.replace(d,ce)),E}}var cu=qd(/^\s+|(?=\s)\s+$/g),Ti=yo("trim",Pr,cu),dt,ua,lu;function xs(d){if(!d||typeof d!==Q)return!1;lu||(lu=Yu()?ii():!0);var _=!1;if(d!==lu){ua||(dt=Function[ve][Ht],ua=dt[it](xr));try{var E=Pn(d);_=!E,_||(je(E,Ae)&&(E=E[Ae]),_=!!(E&&typeof E===ee&&dt[it](E)===ua))}catch{}}return _}function Bd(){return Ei()}var zd=On("indexOf",Pr),Wn=yo("startsWith",Pr,ci);function ci(d,_,E){Dc(d)||$r("'"+pr(d)+"' is not a string");var C=Dc(_)?_:Ar(_),O=E>0?E:0;return ju(d,O,O+C[Dt])===C}var Hd="ref",Ii="unref",Ga="hasRef",Pm="enabled";function jv(d,_,E){var C=!0,O=d?_(pe):pe,$;function q(){return C=!1,O&&O[Ii]&&O[Ii](),$}function W(){O&&E(O),O=pe}function oe(){return O=_(O),C||q(),$}function se(De){!De&&O&&W(),De&&!O&&oe()}return $={cancel:W,refresh:oe},$[Ga]=function(){return O&&O[Ga]?O[Ga]():C},$[Hd]=function(){return C=!0,O&&O[Hd]&&O[Hd](),$},$[Ii]=q,$=Gr($,Pm,{get:function(){return!!O},set:se}),{h:$,dn:function(){O=pe}}}function $p(d,_,E){var C=Gt(_),O=C?_.length:0,$=(O>0?_[0]:C?ne:_)||setTimeout,q=(O>1?_[1]:ne)||clearTimeout,W=E[0];E[0]=function(){oe.dn(),Gi(W,ne,Ve[it](arguments))};var oe=jv(d,function(se){if(se){if(se.refresh)return se.refresh(),se;Gi(q,ne,[se])}return Gi($,ne,E)},function(se){Gi(q,ne,[se])});return oe.h}function fu(d,_){return $p(!0,ne,Ve[it](arguments))}function qp(d,_,E){return $p(!0,d,Ve[it](arguments,1))}(Ba()||{}).Symbol,(Ba()||{}).Reflect;var ph="hasOwnProperty",Gd=function(d,_){return Gd=T.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,C){E.__proto__=C}||function(E,C){for(var O in C)C[ph](O)&&(E[O]=C[O])},Gd(d,_)};function xa(d,_){typeof _!==o&&_!==null&&$r("Class extends value "+String(_)+" is not a constructor or null"),Gd(d,_);function E(){this.constructor=d}d[y]=_===null?Ha(_):(E[y]=_[y],new E)}var xl,Pl="constructor",Vi="prototype",li="function",du="_dynInstFuncs",Bp="_isDynProxy",Ni="_dynClass",Vd="_dynCls$",qu="_dynInstChk",Rc=qu,Al="_dfOpts",Vf="_unknown_",Kd="__proto__",zp="_dyn"+Kd,Hp="__dynProto$Gbl",pu="_dynInstProto",Wd="useBaseInst",Ps="setInstFuncs",Bu=Object,Di=Bu.getPrototypeOf,Rl=Bu.getOwnPropertyNames,Kf=Ba(),Oc=Kf[Hp]||(Kf[Hp]={o:(xl={},xl[Ps]=!0,xl[Wd]=!0,xl),n:1e3});function Ki(d){return d&&(d===Bu[Vi]||d===Array[Vi])}function Yv(d){return Ki(d)||d===Function[Vi]}function Wo(d){var _;if(d){if(Di)return Di(d);var E=d[Kd]||d[Vi]||(d[Pl]?d[Pl][Vi]:null);_=d[zp]||E,je(d,zp)||(delete d[pu],_=d[zp]=d[pu]||d[zp],d[pu]=E)}return _}function wo(d,_){var E=[];if(Rl)E=Rl(d);else for(var C in d)typeof C=="string"&&je(d,C)&&E.push(C);if(E&&E.length>0)for(var O=0;O<E.length;O++)_(E[O])}function Wi(d,_,E){return _!==Pl&&typeof d[_]===li&&(E||je(d,_))&&_!==Kd&&_!==Vi}function vu(d){$r("DynamicProto: "+d)}function Wf(d){var _=Ha(null);return wo(d,function(E){!_[E]&&Wi(d,E,!1)&&(_[E]=d[E])}),_}function kc(d,_){for(var E=d.length-1;E>=0;E--)if(d[E]===_)return!0;return!1}function Mc(d,_,E,C){function O(oe,se,De){var qe=se[De];if(qe[Bp]&&C){var Ye=oe[du]||{};Ye[Rc]!==!1&&(qe=(Ye[se[Ni]]||{})[De]||qe)}return function(){return qe.apply(oe,arguments)}}var $=Ha(null);wo(E,function(oe){$[oe]=O(_,E,oe)});for(var q=Wo(d),W=[];q&&!Yv(q)&&!kc(W,q);)wo(q,function(oe){!$[oe]&&Wi(q,oe,!Di)&&($[oe]=O(_,q,oe))}),W.push(q),q=Wo(q);return $}function zu(d,_,E,C){var O=null;if(d&&je(E,Ni)){var $=d[du]||Ha(null);if(O=($[E[Ni]]||Ha(null))[_],O||vu("Missing ["+_+"] "+li),!O[qu]&&$[Rc]!==!1){for(var q=!je(d,_),W=Wo(d),oe=[];q&&W&&!Yv(W)&&!kc(oe,W);){var se=W[_];if(se){q=se===C;break}oe.push(W),W=Wo(W)}try{q&&(d[_]=O),O[qu]=1}catch{$[Rc]=!1}}}return O}function Jf(d,_,E){var C=_[d];return C===E&&(C=Wo(_)[d]),typeof C!==li&&vu("["+d+"] is not a "+li),C}function Ol(d,_,E,C,O){function $(oe,se){var De=function(){var qe=zu(this,se,oe,De)||Jf(se,oe,De);return qe.apply(this,arguments)};return De[Bp]=1,De}if(!Ki(d)){var q=E[du]=E[du]||Ha(null);if(!Ki(q)){var W=q[_]=q[_]||Ha(null);q[Rc]!==!1&&(q[Rc]=!!O),Ki(W)||wo(E,function(oe){Wi(E,oe,!1)&&E[oe]!==C[oe]&&(W[oe]=E[oe],delete E[oe],(!je(d,oe)||d[oe]&&!d[oe][Bp])&&(d[oe]=$(d,oe)))})}}}function Zf(d,_){if(Di){for(var E=[],C=Wo(_);C&&!Yv(C)&&!kc(E,C);){if(C===d)return!0;E.push(C),C=Wo(C)}return!1}return!0}function Hu(d,_){return je(d,Vi)?d.name||_||Vf:((d||{})[Pl]||{}).name||_||Vf}function Ji(d,_,E,C){je(d,Vi)||vu("theClass is an invalid class definition.");var O=d[Vi];Zf(O,_)||vu("["+Hu(d)+"] not in hierarchy of ["+Hu(_)+"]");var $=null;je(O,Ni)?$=O[Ni]:($=Vd+Hu(d,"_")+"$"+Oc.n,Oc.n++,O[Ni]=$);var q=Ji[Al],W=!!q[Wd];W&&C&&C[Wd]!==void 0&&(W=!!C[Wd]);var oe=Wf(_),se=Mc(O,_,oe,W);E(_,se);var De=!!Di&&!!q[Ps];De&&C&&(De=!!C[Ps]),Ol(O,$,_,oe,De!==!1)}Ji[Al]=Oc.o;var Lc=zn,bo=Lc({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),fi="toLowerCase",Jo="blkVal",Vr="length",As="rdOnly",Zi="notify",Fc="warnToConsole",Uc="throwInternal",Zo="setDf",kl="watch",Xo="logger",mu="apply",Va="push",Jd="splice",Gu="hdlr",Pa="cancel",Xf="initialize",Zd="identifier",Ml="isInitialized",Ll="value",Xd="getPlugin",$v="name",Vu="time",Eo="processNext",Xi="getProcessTelContext",vn="unload",Fl="loggingLevelConsole",Ku="createNew",Wu="teardown",Qd="messageId",Ci="message",hu="isAsync",Rs="diagLog",cr="_doTeardown",To="update",Qo="getNext",xi="setNextPlugin",Qf="protocol",Pi="userAgent",_u="split",un="nodeType",Ka="replace",Fr="logInternalMessage",pt="type",Ju="handler",Io="status",Os="getResponseHeader",Qi="getAllResponseHeaders",gu="isChildEvt",Ai="data",qr="getCtx",No="setCtx",Ur="complete",Do="urlString",ed="sendPOST",Co="headers",An="timeout",eo="setRequestHeader",es;function wa(d,_){es||(es=Uv("AggregationError",function(C,O){O[Vr]>1&&(C.errors=O[1])}));var E=d||"One or more errors occurred.";throw hr(_,function(C,O){E+=`
`.concat(O," > ").concat(pr(C))}),new es(E,_||[])}var Aa="Promise",jc="rejected";function Zu(d,_){return td(d,function(E){return _?_({status:"fulfilled",rejected:!1,value:E}):E},function(E){return _?_({status:jc,rejected:!0,reason:E}):E})}function td(d,_,E,C){var O=d;try{if(qt(d))(_||E)&&(O=d.then(_,E));else try{_&&(O=_(d))}catch($){if(E)O=E($);else throw $}}finally{C&&ks(O,C)}return O}function ks(d,_){var E=d;return _&&(qt(d)?d.finally?E=d.finally(_):E=d.then(function(C){return _(),C},function(C){throw _(),C}):_()),E}var xo=["pending","resolving","resolved",jc],Po="dispatchEvent",Xu;function Ao(d){var _;return d&&d.createEvent&&(_=d.createEvent("Event")),!!_&&_.initEvent}function Ln(d,_,E,C){var O=Mn();!Xu&&(Xu=zo(!!Tr(Ao,[O]).v));var $=Xu.v?O.createEvent("Event"):C?new Event(_):{};if(E&&E($),Xu.v&&$.initEvent(_,!1,!0),$&&d[Po])d[Po]($);else{var q=d["on"+_];if(q)q($);else{var W=sn("console");W&&(W.error||W.log)(_,pr($))}}}var rd="unhandledRejection",Qu=rd.toLowerCase(),Ms=10,di;function ts(d){return Wt(d)?d.toString():pr(d)}function Ls(d,_,E){var C=Gf(arguments,3),O=0,$=!1,q,W=[],oe=!1,se=null,De;function qe(Te,Be){try{oe=!0,se&&se.cancel(),se=null;var zt=d(function(Zt,or){W.push(function(){try{var Dr=O===2?Te:Be,jr=kt(Dr)?q:Wt(Dr)?Dr(q):Dr;qt(jr)?jr.then(Zt,or):Dr?Zt(jr):O===3?or(jr):Zt(jr)}catch(ln){or(ln)}}),$&&Ue()},C);return zt}finally{}}function Ye(Te){return qe(void 0,Te)}function Ne(Te){var Be=Te,zt=Te;return Wt(Te)&&(Be=function(Zt){return Te&&Te(),Zt},zt=function(Zt){throw Te&&Te(),Zt}),qe(Be,zt)}function me(){return xo[O]}function Ue(){if(W.length>0){var Te=W.slice();W=[],oe=!0,se&&se.cancel(),se=null,_(Te)}}function Ee(Te,Be){return function(zt){if(O===Be){if(Te===2&&qt(zt)){O=1,zt.then(Ee(2,1),Ee(3,1));return}O=Te,$=!0,q=zt,Ue(),!oe&&Te===3&&!se&&(se=fu(Ke,Ms))}}}function Ke(){if(!oe)if(oe=!0,Bf())process.emit(rd,q,De);else{var Te=ii()||Ba();!di&&(di=zo(Tr(sn,[Aa+"RejectionEvent"]).v)),Ln(Te,Qu,function(Be){return Sn(Be,"promise",{g:function(){return De}}),Be.reason=q,Be},!!di.v)}}De={then:qe,catch:Ye,finally:Ne},Gr(De,"state",{get:me}),zf()&&(De[Il(11)]="IPromise");function Ce(){return"IPromise "+me()+($?" - "+ts(q):"")}return De.toString=Ce,function(){Wt(E)||$r(Aa+": executor is not a function - "+ts(E));var Be=Ee(3,0);try{E.call(De,Ee(2,0),Be)}catch(zt){Be(zt)}}(),De}function Ri(d){hr(d,function(_){try{_()}catch{}})}function Yc(d){var _=tr(d)?d:0;return function(E){fu(function(){Ri(E)},_)}}function yu(d,_){return Ls(yu,Yc(_),d,_)}var ca;function Su(d,_){!ca&&(ca=zo(Tr(sn,[Aa]).v||null));var E=ca.v;if(!E)return yu(d);Wt(d)||$r(Aa+": executor is not a function - "+pr(d));var C=0;function O(){return xo[C]}var $=new E(function(q,W){function oe(De){C=2,q(De)}function se(De){C=3,W(De)}d(oe,se)});return Gr($,"state",{get:O}),$}var Fs;function Oi(d,_){return!Fs&&(Fs=zo(Su)),Fs.v.call(this,d,_)}var ec=void 0,cn="",Jn="core",ki="disabled",tc="extensionConfig",rs="processTelemetry",ep="priority",pi="getPerfMgr",$c="Not dynamic - ",ba=/-([a-z])/g,nd=/([^\w\d_$])/g,Wa=/^(\d+[\w\d_$])/;function ns(d){return!rt(d)}function as(d){var _=d;return _&&Dc(_)&&(_=_[Ka](ba,function(E,C){return C.toUpperCase()}),_=_[Ka](nd,"_"),_=_[Ka](Wa,function(E,C){return"_"+C})),_}function tp(d,_){return d&&_?zd(d,_)!==-1:!1}function Ul(d,_){var E=null,C=null;return Wt(d)?E=d:C=d,function(){var O=arguments;if(E&&(C=E()),C)return C[_][mu](C,O)}}function ad(d,_,E,C,O){d&&_&&E&&(O!==!1||kt(d[_]))&&(d[_]=Ul(E,C))}function jl(d,_,E,C){return d&&_&&qi(d)&&Gt(E)&&hr(E,function(O){Dc(O)&&ad(d,O,_,O,C)}),d}function Ro(d){return d&&Cc&&(d=T(Cc({},d))),d}function Ja(d){try{return d.responseText}catch{}return null}function qc(d,_){return d?"XDomainRequest,Response:"+Ja(d)||"":_}function qv(d,_){return d?"XMLHttpRequest,Status:"+d[Io]+",Response:"+Ja(d)||d.response||"":_}function rc(d,_){return _&&(tr(_)?d=[_].concat(d):Gt(_)&&(d=_.concat(d))),d}var nc="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",is="withCredentials",Yl="timeout";function Am(d,_,E,C,O,$){C===void 0&&(C=!1),O===void 0&&(O=!1);function q(oe,se,De){try{oe[se]=De}catch{}}var W=new XMLHttpRequest;return C&&q(W,nc,C),E&&q(W,is,E),W.open(d,_,!O),E&&q(W,is,E),!O&&$&&q(W,Yl,$),W}function rp(d){var _={};if(Dc(d)){var E=Ti(d)[_u](/[\r\n]+/);hr(E,function(C){if(C){var O=C.indexOf(": ");if(O!==-1){var $=Ti(C.substring(0,O))[fi](),q=Ti(C.substring(O+1));_[$]=q}else _[Ti(C)]=1}})}return _}function $l(d,_,E){if(!d[E]&&_&&_[Os]){var C=_[Os](E);C&&(d[E]=Ti(C))}return d}var ac="kill-duration",Gp="kill-duration-seconds",Bv="time-delta-millis";function ic(d,_){var E={};return d[Qi]?E=rp(d[Qi]()):_&&(E=$l(E,d,Bv),E=$l(E,d,ac),E=$l(E,d,Gp)),E}var zv="location",ql="console",np="JSON",to="crypto",Vp="msCrypto",Rm="ReactNative",id="msie",Kp="trident/",ap="XMLHttpRequest",Bc=null,od=null,oc=!1,Us=null,zc=null;function Hv(d,_){var E=!1;if(d){try{if(E=_ in d,!E){var C=d[y];C&&(E=_ in C)}}catch{}if(!E)try{var O=new d;E=!kt(O[_])}catch{}}return E}function ip(d){if(d&&oc){var _=sn("__mockLocation");if(_)return _}return typeof location===u&&location?location:sn(zv)}function Hc(){return typeof console!==m?console:sn(ql)}function op(){return!!(typeof JSON===u&&JSON||sn(np)!==null)}function js(){return op()?JSON||sn(np):null}function Br(){return sn(to)}function sc(){return sn(Vp)}function la(){var d=sa();return d&&d.product?d.product===Rm:!1}function sp(){var d=sa();if(d&&(d[Pi]!==od||Bc===null)){od=d[Pi];var _=(od||cn)[fi]();Bc=tp(_,id)||tp(_,Kp)}return Bc}function sd(d){return(zc===null||d===!1)&&(zc=Ir()&&!!sa().sendBeacon),zc}function Gc(d){var _=!1;try{_=!!sn("fetch");var E=sn("Request");_&&d&&E&&(_=Hv(E,"keepalive"))}catch{}return _}function uc(){return Us===null&&(Us=typeof XDomainRequest!==m,Us&&Za()&&(Us=Us&&!Hv(sn(ap),"withCredentials"))),Us}function Za(){var d=!1;try{var _=sn(ap);d=!!_}catch{}return d}var ud=4294967296,Zn=4294967295,vr=123456789,Ys=987654321,hn=!1,os=vr,cc=Ys;function lc(d){d<0&&(d>>>=0),os=vr+d&Zn,cc=Ys-d&Zn,hn=!0}function $s(){try{var d=Ei()&2147483647;lc((Math.random()*ud^d)+d)}catch{}}function ro(d){var _=0,E=Br()||sc();return E&&E.getRandomValues&&(_=E.getRandomValues(new Uint32Array(1))[0]&Zn),_===0&&sp()&&(hn||$s(),_=Bl()&Zn),_===0&&(_=Math.floor(ud*Math.random()|0)),d||(_>>>=0),_}function Bl(d){cc=36969*(cc&65535)+(cc>>16)&Zn,os=18e3*(os&65535)+(os>>16)&Zn;var _=(cc<<16)+(os&65535)>>>0&Zn|0;return d||(_>>>=0),_}function Wp(d){d===void 0&&(d=22);for(var _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=ro()>>>0,C=0,O=cn;O[Vr]<d;)C++,O+=_.charAt(E&63),E>>>=6,C===5&&(E=(ro()<<2&4294967295|E&3)>>>0,C=0);return O}var zl="3.3.4",Jp="."+Wp(6),Hl=0;function Vc(d){return d[un]===1||d[un]===9||!+d[un]}function up(d,_){var E=_[d.id];if(!E){E={};try{Vc(_)&&Sn(_,d.id,{e:!1,v:E})}catch{}}return E}function Hn(d,_){return _===void 0&&(_=!1),as(d+Hl+++(_?"."+zl:cn)+Jp)}function Kc(d){var _={id:Hn("_aiData-"+(d||cn)+"."+zl),accept:function(E){return Vc(E)},get:function(E,C,O,$){var q=E[_.id];return q?q[as(C)]:($&&(q=up(_,E),q[as(C)]=O),O)},kill:function(E,C){if(E&&E[C])try{delete E[C]}catch{}}};return _}function fa(d){return d&&qi(d)&&(d.isVal||d.fb||Kn(d,"v")||Kn(d,"mrg")||Kn(d,"ref")||d.set)}function wu(d,_,E){var C,O=E.dfVal||at;if(_&&E.fb){var $=E.fb;Gt($)||($=[$]);for(var q=0;q<$[Vr];q++){var W=$[q],oe=_[W];if(O(oe)?C=oe:d&&(oe=d.cfg[W],O(oe)&&(C=oe),d.set(d.cfg,Ar(W),oe)),O(C))break}}return!O(C)&&O(E.v)&&(C=E.v),C}function cp(d,_,E){var C=E;if(E&&fa(E)&&(C=wu(d,_,E)),C){fa(C)&&(C=cp(d,_,C));var O;Gt(C)?(O=[],O[Vr]=C[Vr]):xs(C)&&(O={}),O&&(wr(C,function($,q){q&&fa(q)&&(q=cp(d,_,q)),O[$]=q}),C=O)}return C}function cd(d,_,E,C){var O,$,q,W=C,oe,se,De,qe;fa(W)?(O=W.isVal,$=W.set,De=W[As],qe=W[Jo],oe=W.mrg,se=W.ref,!se&&kt(se)&&(se=!!oe),q=wu(d,_,W)):q=C,qe&&d[Jo](_,E);var Ye,Ne=!0,me=_[E];(me||!rt(me))&&(Ye=me,Ne=!1,O&&Ye!==q&&!O(Ye)&&(Ye=q,Ne=!0),$&&(Ye=$(Ye,q,_),Ne=Ye===q)),Ne?q?Ye=cp(d,_,q):Ye=q:(xs(Ye)||Gt(q))&&oe&&q&&(xs(q)||Gt(q))&&wr(q,function(Ue,Ee){cd(d,Ye,Ue,Ee)}),d.set(_,E,Ye),se&&d.ref(_,E),De&&d[As](_,E)}var da=$d("[[ai_dynCfg_1]]"),ld=$d("[[ai_blkDynCfg_1]]"),lp=$d("[[ai_frcDynCfg_1]]");function qs(d){if(d){var _;if(Gt(d)?(_=[],_[Vr]=d[Vr]):xs(d)&&(_={}),_)return wr(d,function(E,C){_[E]=qs(C)}),_}return d}function wt(d){if(d){var _=d[da]||d;if(_.cfg&&(_.cfg===d||_.cfg[da]===_))return _}return null}function ss(d){if(d&&(xs(d)||Gt(d)))try{d[ld]=!0}catch{}return d}function us(d,_,E){var C=!1;return E&&!d[_.blkVal]&&(C=E[lp],!C&&!E[ld]&&(C=xs(E)||Gt(E))),C}function vi(d){$r("InvalidAccess:"+d)}var Gl=["push","pop","shift","unshift","splice"],Wc=function(d,_,E,C){d&&d[Uc](3,108,"".concat(E," [").concat(_,"] failed - ")+pr(C))};function cs(d,_,E){Gt(_)&&hr(Gl,function(C){var O=_[C];_[C]=function(){for(var $=[],q=0;q<arguments.length;q++)$[q]=arguments[q];var W=O[mu](this,$);return Vl(d,_,E,"Patching"),W}})}function Mi(d,_){var E=an(d,_);return E&&E.get}function Jc(d,_,E,C){var O={n:E,h:[],trk:function(se){se&&se.fn&&(Ko(O.h,se)===-1&&O.h[Va](se),d.trk(se,O))},clr:function(se){var De=Ko(O.h,se);De!==-1&&O.h[Jd](De,1)}},$=!0,q=!1;function W(){$&&(q=q||us(W,d,C),C&&!C[da]&&q&&(C=Vl(d,C,E,"Converting")),$=!1);var se=d.act;return se&&O.trk(se),C}W[d.prop]={chng:function(){d.add(O)}};function oe(se){if(C!==se){W[d.ro]&&!d.upd&&vi("["+E+"] is read-only:"+pr(_)),$&&(q=q||us(W,d,C),$=!1);var De=q&&W[d.rf];if(q)if(De){wr(C,function(Ye){C[Ye]=se?se[Ye]:ec});try{wr(se,function(Ye,Ne){fd(d,C,Ye,Ne)}),se=C}catch(Ye){Wc((d.hdlr||{})[Xo],E,"Assigning",Ye),q=!1}}else C&&C[da]&&wr(C,function(Ye){var Ne=Mi(C,Ye);if(Ne){var me=Ne[d.prop];me&&me.chng()}});if(se!==C){var qe=se&&us(W,d,se);!De&&qe&&(se=Vl(d,se,E,"Converting")),C=se,q=qe}d.add(O)}}Sn(_,O.n,{g:W,s:oe})}function fd(d,_,E,C){if(_){var O=Mi(_,E),$=O&&!!O[d.prop];$?_[E]=C:Jc(d,_,E,C)}return _}function Bs(d,_,E,C){if(_){var O=Mi(_,E),$=O&&!!O[d.prop],q=C&&C[0],W=C&&C[1],oe=C&&C[2];if(!$){if(oe)try{ss(_)}catch(se){Wc((d.hdlr||{})[Xo],E,"Blocking",se)}try{fd(d,_,E,_[E]),O=Mi(_,E)}catch(se){Wc((d.hdlr||{})[Xo],E,"State",se)}}q&&(O[d.rf]=q),W&&(O[d.ro]=W),oe&&(O[d.blkVal]=!0)}return _}function Vl(d,_,E,C){try{wr(_,function(O,$){fd(d,_,O,$)}),_[da]||(Gr(_,da,{get:function(){return d[Gu]}}),cs(d,_,E))}catch(O){Wc((d.hdlr||{})[Xo],E,C,O)}return _}var Zc="[[ai_",Kl="]]";function fp(d){var _,E=za(Zc+"get"+d.uid+Kl),C=za(Zc+"ro"+d.uid+Kl),O=za(Zc+"rf"+d.uid+Kl),$=za(Zc+"blkVal"+d.uid+Kl),q=za(Zc+"dtl"+d.uid+Kl),W=null,oe=null,se;function De(me,Ue){var Ee=se.act;try{se.act=me,me&&me[q]&&(hr(me[q],function(Ce){Ce.clr(me)}),me[q]=[]),Ue({cfg:d.cfg,set:d.set.bind(d),setDf:d[Zo].bind(d),ref:d.ref.bind(d),rdOnly:d[As].bind(d)})}catch(Ce){var Ke=d[Xo];throw Ke&&Ke[Uc](1,107,pr(Ce)),Ce}finally{se.act=Ee||null}}function qe(){if(W){var me=W;W=null,oe&&oe[Pa](),oe=null;var Ue=[];if(hr(me,function(Ee){if(Ee&&(Ee[q]&&(hr(Ee[q],function(Ke){Ke.clr(Ee)}),Ee[q]=null),Ee.fn))try{De(Ee,Ee.fn)}catch(Ke){Ue[Va](Ke)}}),W)try{qe()}catch(Ee){Ue[Va](Ee)}Ue[Vr]>0&&wa("Watcher error(s): ",Ue)}}function Ye(me){if(me&&me.h[Vr]>0){W||(W=[]),oe||(oe=fu(function(){oe=null,qe()},0));for(var Ue=0;Ue<me.h[Vr];Ue++){var Ee=me.h[Ue];Ee&&Ko(W,Ee)===-1&&W[Va](Ee)}}}function Ne(me,Ue){if(me){var Ee=me[q]=me[q]||[];Ko(Ee,Ue)===-1&&Ee[Va](Ue)}}return se=(_={prop:E,ro:C,rf:O},_[Jo]=$,_[Gu]=d,_.add=Ye,_[Zi]=qe,_.use=De,_.trk=Ne,_),se}function dp(d,_){var E={fn:_,rm:function(){E.fn=null,d=null,_=null}};return Sn(E,"toJSON",{v:function(){return"WatcherHandler"+(E.fn?"":"[X]")}}),d.use(E,_),E}function Zp(d,_,E){var C,O=wt(_);if(O)return O;var $=Hn("dyncfg",!0),q=_&&E!==!1?_:qs(_),W;function oe(){W[Zi]()}function se(Ke,Ce,Te){try{Ke=fd(W,Ke,Ce,Te)}catch(Be){Wc(d,Ce,"Setting value",Be)}return Ke[Ce]}function De(Ke){return dp(W,Ke)}function qe(Ke,Ce){W.use(null,function(Te){var Be=W.upd;try{kt(Ce)||(W.upd=Ce),Ke(Te)}finally{W.upd=Be}})}function Ye(Ke,Ce){var Te;return Bs(W,Ke,Ce,(Te={},Te[0]=!0,Te))[Ce]}function Ne(Ke,Ce){var Te;return Bs(W,Ke,Ce,(Te={},Te[1]=!0,Te))[Ce]}function me(Ke,Ce){var Te;return Bs(W,Ke,Ce,(Te={},Te[2]=!0,Te))[Ce]}function Ue(Ke,Ce){return Ce&&wr(Ce,function(Te,Be){cd(Ee,Ke,Te,Be)}),Ke}var Ee=(C={uid:null,cfg:q},C[Xo]=d,C[Zi]=oe,C.set=se,C[Zo]=Ue,C[kl]=De,C.ref=Ye,C[As]=Ne,C[Jo]=me,C._block=qe,C);return Sn(Ee,"uid",{c:!1,e:!1,w:!1,v:$}),W=fp(Ee),Vl(W,q,"config","Creating"),Ee}function Om(d,_){d?(d[Fc](_),d[Uc](2,108,_)):vi(_)}function ls(d,_,E,C){var O=Zp(E,d||{},C);return _&&O[Zo](O.cfg,_),O}function zs(d,_,E){var C=d[da]||d;return C.cfg&&(C.cfg===d||C.cfg[da]===C)?C[kl](_):(Om(E,$c+pr(d)),ls(d,null,E)[kl](_))}var fs="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Li=null;function Hs(){var d=sn("Microsoft");return d&&(Li=d.ApplicationInsights),Li}function bu(d){var _=Li;return!_&&d.disableDbgExt!==!0&&(_=Li||Hs()),_?_.ChromeDbgExt:null}var mi,Xc="warnToConsole",Gv="AI (Internal): ",fc="AI: ",Xp="AITR_",Wl={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Qc=(mi={},mi[0]=null,mi[1]="errorToConsole",mi[2]=Xc,mi[3]="debugToConsole",mi);function Jl(d){return d?'"'+d[Ka](/\"/g,cn)+'"':cn}function Gs(d,_){var E=Hc();if(E){var C="log";E[d]&&(C=d),Wt(E[C])&&E[C](_)}}var Fi=function(){function d(_,E,C,O){C===void 0&&(C=!1);var $=this;$[Qd]=_,$[Ci]=(C?fc:Gv)+_;var q=cn;op()&&(q=js().stringify(O));var W=(E?" message:"+Jl(E):cn)+(O?" props:"+Jl(q):cn);$[Ci]+=W}return d.dataType="MessageData",d}();function el(d,_){return(d||{})[Xo]||new Zl(_)}var Zl=function(){function d(_){this.identifier="DiagnosticLogger",this.queue=[];var E=0,C={},O,$,q,W,oe;Ji(d,this,function(se){oe=qe(_||{}),se.consoleLoggingLevel=function(){return O},se[Uc]=function(me,Ue,Ee,Ke,Ce){Ce===void 0&&(Ce=!1);var Te=new Fi(Ue,Ee,Ce,Ke);if(W)throw pr(Te);var Be=Qc[me]||Xc;if(kt(Te[Ci]))Ne("throw"+(me===1?"Critical":"Warning"),Te);else{if(Ce){var zt=+Te[Qd];!C[zt]&&O>=me&&(se[Be](Te[Ci]),C[zt]=!0)}else O>=me&&se[Be](Te[Ci]);De(me,Te)}},se.debugToConsole=function(me){Gs("debug",me),Ne("warning",me)},se[Fc]=function(me){Gs("warn",me),Ne("warning",me)},se.errorToConsole=function(me){Gs("error",me),Ne("error",me)},se.resetInternalMessageCount=function(){E=0,C={}},se[Fr]=De,se[vn]=function(me){oe&&oe.rm(),oe=null};function De(me,Ue){if(!Ye()){var Ee=!0,Ke=Xp+Ue[Qd];if(C[Ke]?Ee=!1:C[Ke]=!0,Ee&&(me<=$&&(se.queue[Va](Ue),E++,Ne(me===1?"error":"warn",Ue)),E===q)){var Ce="Internal events throttle limit per PageView reached for this app.",Te=new Fi(23,Ce,!1);se.queue[Va](Te),me===1?se.errorToConsole(Ce):se[Fc](Ce)}}}function qe(me){return zs(ls(me,Wl,se).cfg,function(Ue){var Ee=Ue.cfg;O=Ee[Fl],$=Ee.loggingLevelTelemetry,q=Ee.maxMessageLimit,W=Ee.enableDebug})}function Ye(){return E>=q}function Ne(me,Ue){var Ee=bu(_||{});Ee&&Ee[Rs]&&Ee[Rs](me,Ue)}})}return d.__ieDyn=1,d}();function dd(d){return d||new Zl}function pa(d,_,E,C,O,$){$===void 0&&($=!1),dd(d)[Uc](_,E,C,O,$)}function Vs(d,_){dd(d)[Fc](_)}var va="ctx",pd="ParentContextKey",Eu="ChildrenContextKey",vd=function(){function d(_,E,C){var O=this;if(O.start=Ei(),O[$v]=_,O[hu]=C,O[gu]=function(){return!1},Wt(E)){var $;Sn(O,"payload",{g:function(){return!$&&Wt(E)&&($=E(),E=null),$}})}O[qr]=function(q){return q?q===d[pd]||q===d[Eu]?O[q]:(O[va]||{})[q]:null},O[No]=function(q,W){if(q)if(q===d[pd])O[q]||(O[gu]=function(){return!0}),O[q]=W;else if(q===d[Eu])O[q]=W;else{var oe=O[va]=O[va]||{};oe[q]=W}},O[Ur]=function(){var q=0,W=O[qr](d[Eu]);if(Gt(W))for(var oe=0;oe<W[Vr];oe++){var se=W[oe];se&&(q+=se[Vu])}O[Vu]=Ei()-O.start,O.exTime=O[Vu]-q,O[Ur]=function(){}}}return d.ParentContextKey="parent",d.ChildrenContextKey="childEvts",d}(),Ra="CoreUtils.doPerf";function ma(d,_,E,C,O){if(d){var $=d;if($[pi]&&($=$[pi]()),$){var q=void 0,W=$[qr](Ra);try{if(q=$.create(_(),C,O),q){if(W&&q[No]&&(q[No](vd[pd],W),W[qr]&&W[No])){var oe=W[qr](vd[Eu]);oe||(oe=[],W[No](vd[Eu],oe)),oe[Va](q)}return $[No](Ra,q),E(q)}}catch(se){q&&q[No]&&q[No]("exception",se)}finally{q&&$.fire(q),$[No](Ra,W)}}}return E()}var Qp=Kc("plugin");function Xl(d){return Qp.get(d,"state",{},!0)}var Ql="TelemetryPluginChain",Tu="_hasRun",Vv="_getTelCtx",Kv=0;function ef(d,_,E){for(;d;){if(d[Xd]()===E)return d;d=d[Qo]()}return rf([E],_.config||{},_)}function ev(d,_,E,C){var O=null,$=[];_||(_=ls({},null,E[Xo])),C!==null&&(O=C?ef(d,E,C):d);var q={_next:oe,ctx:{core:function(){return E},diagLog:function(){return el(E,_.cfg)},getCfg:function(){return _.cfg},getExtCfg:De,getConfig:qe,hasNext:function(){return!!O},getNext:function(){return O},setNext:function(Ne){O=Ne},iterate:Ye,onComplete:W}};function W(Ne,me){for(var Ue=[],Ee=2;Ee<arguments.length;Ee++)Ue[Ee-2]=arguments[Ee];Ne&&$[Va]({func:Ne,self:kt(me)?q.ctx:me,args:Ue})}function oe(){var Ne=O;if(O=Ne?Ne[Qo]():null,!Ne){var me=$;me&&me[Vr]>0&&(hr(me,function(Ue){try{Ue.func.call(Ue.self,Ue.args)}catch(Ee){pa(E[Xo],2,73,"Unexpected Exception during onComplete - "+pr(Ee))}}),$=[])}return Ne}function se(Ne,me){var Ue=null,Ee=_.cfg;if(Ee&&Ne){var Ke=Ee[tc];!Ke&&me&&(Ke={}),Ee[tc]=Ke,Ke=_.ref(Ee,tc),Ke&&(Ue=Ke[Ne],!Ue&&me&&(Ue={}),Ke[Ne]=Ue,Ue=_.ref(Ke,Ne))}return Ue}function De(Ne,me){var Ue=se(Ne,!0);return me&&wr(me,function(Ee,Ke){if(rt(Ue[Ee])){var Ce=_.cfg[Ee];(Ce||!rt(Ce))&&(Ue[Ee]=Ce)}cd(_,Ue,Ee,Ke)}),_[Zo](Ue,me)}function qe(Ne,me,Ue){Ue===void 0&&(Ue=!1);var Ee,Ke=se(Ne,!1),Ce=_.cfg;return Ke&&(Ke[me]||!rt(Ke[me]))?Ee=Ke[me]:(Ce[me]||!rt(Ce[me]))&&(Ee=Ce[me]),Ee||!rt(Ee)?Ee:Ue}function Ye(Ne){for(var me;me=q._next();){var Ue=me[Xd]();Ue&&Ne(Ue)}}return q}function tf(d,_,E,C){var O=ls(_),$=ev(d,O,E,C),q=$.ctx;function W(se){var De=$._next();return De&&De[rs](se,q),!De}function oe(se,De){return se===void 0&&(se=null),Gt(se)&&(se=rf(se,O.cfg,E,De)),tf(se||q[Qo](),O.cfg,E,De)}return q[Eo]=W,q[Ku]=oe,q}function tv(d,_,E){var C=ls(_.config),O=ev(d,C,_,E),$=O.ctx;function q(oe){var se=O._next();return se&&se[vn]($,oe),!se}function W(oe,se){return oe===void 0&&(oe=null),Gt(oe)&&(oe=rf(oe,C.cfg,_,se)),tv(oe||$[Qo](),_,se)}return $[Eo]=q,$[Ku]=W,$}function Wv(d,_,E){var C=ls(_.config),O=ev(d,C,_,E),$=O.ctx;function q(oe){return $.iterate(function(se){Wt(se[To])&&se[To]($,oe)})}function W(oe,se){return oe===void 0&&(oe=null),Gt(oe)&&(oe=rf(oe,C.cfg,_,se)),Wv(oe||$[Qo](),_,se)}return $[Eo]=q,$[Ku]=W,$}function rf(d,_,E,C){var O=null,$=!C;if(Gt(d)&&d[Vr]>0){var q=null;hr(d,function(W){if(!$&&C===W&&($=!0),$&&W&&Wt(W[rs])){var oe=Jv(W,_,E);O||(O=oe),q&&q._setNext(oe),q=oe}})}return C&&!O?rf([C],_,E):O}function Jv(d,_,E){var C=null,O=Wt(d[rs]),$=Wt(d[xi]),q;d?q=d[Zd]+"-"+d[ep]+"-"+Kv++:q="Unknown-0-"+Kv++;var W={getPlugin:function(){return d},getNext:function(){return C},processTelemetry:De,unload:qe,update:Ye,_id:q,_setNext:function(Ne){C=Ne}};function oe(){var Ne;return d&&Wt(d[Vv])&&(Ne=d[Vv]()),Ne||(Ne=tf(W,_,E)),Ne}function se(Ne,me,Ue,Ee,Ke){var Ce=!1,Te=d?d[Zd]:Ql,Be=Ne[Tu];return Be||(Be=Ne[Tu]={}),Ne.setNext(C),d&&ma(Ne[Jn](),function(){return Te+":"+Ue},function(){Be[q]=!0;try{var zt=C?C._id:cn;zt&&(Be[zt]=!1),Ce=me(Ne)}catch(or){var Zt=C?Be[C._id]:!0;Zt&&(Ce=!0),(!C||!Zt)&&pa(Ne[Rs](),1,73,"Plugin ["+Te+"] failed during "+Ue+" - "+pr(or)+", run flags: "+pr(Be))}},Ee,Ke),Ce}function De(Ne,me){me=me||oe();function Ue(Ee){if(!d||!O)return!1;var Ke=Xl(d);return Ke[Wu]||Ke[ki]?!1:($&&d[xi](C),d[rs](Ne,Ee),!0)}se(me,Ue,"processTelemetry",function(){return{item:Ne}},!Ne.sync)||me[Eo](Ne)}function qe(Ne,me){function Ue(){var Ee=!1;if(d){var Ke=Xl(d),Ce=d[Jn]||Ke[Jn];d&&(!Ce||Ce===Ne.core())&&!Ke[Wu]&&(Ke[Jn]=null,Ke[Wu]=!0,Ke[Ml]=!1,d[Wu]&&d[Wu](Ne,me)===!0&&(Ee=!0))}return Ee}se(Ne,Ue,"unload",function(){},me[hu])||Ne[Eo](me)}function Ye(Ne,me){function Ue(){var Ee=!1;if(d){var Ke=Xl(d),Ce=d[Jn]||Ke[Jn];d&&(!Ce||Ce===Ne.core())&&!Ke[Wu]&&d[To]&&d[To](Ne,me)===!0&&(Ee=!0)}return Ee}se(Ne,Ue,"update",function(){},!1)||Ne[Eo](me)}return ur(W)}function Iu(){var d=[];function _(C){C&&d[Va](C)}function E(C,O){hr(d,function($){try{$(C,O)}catch(q){pa(C[Rs](),2,73,"Unexpected error calling unload handler - "+pr(q))}}),d=[]}return{add:_,run:E}}function tl(){var d=[];function _(C){var O=d;d=[],hr(O,function($){try{($.rm||$.remove).call($)}catch(q){pa(C,2,73,"Unloading:"+pr(q))}})}function E(C){C&&Hf(d,C)}return{run:_,add:E}}var pp,ds="getPlugin",md=(pp={},pp[tc]={isVal:ns,v:{}},pp),nf=function(){function d(){var _=this,E,C,O,$,q;se(),Ji(d,_,function(De){De[Xf]=function(qe,Ye,Ne,me){oe(qe,Ye,me),E=!0},De[Wu]=function(qe,Ye){var Ne,me=De[Jn];if(!me||qe&&me!==qe[Jn]())return;var Ue,Ee=!1,Ke=qe||tv(null,me,O&&O[ds]?O[ds]():O),Ce=Ye||(Ne={reason:0},Ne[hu]=!1,Ne);function Te(){Ee||(Ee=!0,$.run(Ke,Ye),q.run(Ke[Rs]()),Ue===!0&&Ke[Eo](Ce),se())}return!De[cr]||De[cr](Ke,Ce,Te)!==!0?Te():Ue=!0,Ue},De[To]=function(qe,Ye){var Ne=De[Jn];if(!Ne||qe&&Ne!==qe[Jn]())return;var me,Ue=!1,Ee=qe||Wv(null,Ne,O&&O[ds]?O[ds]():O),Ke=Ye||{reason:0};function Ce(){Ue||(Ue=!0,oe(Ee.getCfg(),Ee.core(),Ee[Qo]()))}return!De._doUpdate||De._doUpdate(Ee,Ke,Ce)!==!0?Ce():me=!0,me},ad(De,"_addUnloadCb",function(){return $},"add"),ad(De,"_addHook",function(){return q},"add"),Sn(De,"_unloadHooks",{g:function(){return q}})}),_[Rs]=function(De){return W(De)[Rs]()},_[Ml]=function(){return E},_.setInitialized=function(De){E=De},_[xi]=function(De){O=De},_[Eo]=function(De,qe){qe?qe[Eo](De):O&&Wt(O[rs])&&O[rs](De,null)},_._getTelCtx=W;function W(De){De===void 0&&(De=null);var qe=De;if(!qe){var Ye=C||tf(null,{},_[Jn]);O&&O[ds]?qe=Ye[Ku](null,O[ds]):qe=Ye[Ku](null,O)}return qe}function oe(De,qe,Ye){ls(De,md,el(qe)),!Ye&&qe&&(Ye=qe[Xi]()[Qo]());var Ne=O;O&&O[ds]&&(Ne=O[ds]()),_[Jn]=qe,C=tf(Ye,De,qe,Ne)}function se(){E=!1,_[Jn]=null,C=null,O=null,q=tl(),$=Iu()}}return d.__ieDyn=1,d}(),Oo="",rl="NoResponseBody",Zv="&"+rl+"=true",nl="POST",km=function(){function d(){var _=0,E,C,O,$,q,W,oe,se,De,qe,Ye,Ne,me,Ue;Ji(d,this,function(Ee,Ke){var Ce=!0;ea(),Ee[Xf]=function(Xe,ft){O=ft,C&&pa(O,1,28,"Sender is already initialized"),Ee.SetConfig(Xe),C=!0},Ee._getDbgPlgTargets=function(){return[C,$,W,E]},Ee.SetConfig=function(Xe){try{if(q=Xe.senderOnCompleteCallBack||{},W=!!Xe.disableCredentials,oe=Xe.fetchCredentials,$=!!Xe.isOneDs,E=!!Xe.enableSendPromise,De=!!Xe.disableXhr,qe=!!Xe.disableBeacon,Ye=!!Xe.disableBeaconSync,Ue=Xe.timeWrapper,me=!!Xe.addNoResponse,Ne=!!Xe.disableFetchKeepAlive,se={sendPOST:ln},$||(Ce=!1),W){var ft=ip();ft&&ft.protocol&&ft.protocol[fi]()==="file:"&&(Ce=!1)}return!0}catch{}return!1},Ee.getSyncFetchPayload=function(){return _},Ee.getSenderInst=function(Xe,ft){return Xe&&Xe[Vr]?Zt(Xe,ft):null},Ee.getFallbackInst=function(){return se},Ee[cr]=function(Xe,ft){ea()};function Te(Xe,ft){or(ft,200,{},Xe)}function Be(Xe,ft){pa(O,2,26,"Failed to send telemetry.",{message:Xe}),or(ft,400,{})}function zt(Xe){Be("No endpoint url is provided for the batch",Xe)}function Zt(Xe,ft){for(var yr,lr=0,Et=null,Rr=0;Et==null&&Rr<Xe[Vr];)lr=Xe[Rr],!De&&lr===1?uc()?Et=Xt:Za()&&(Et=ln):lr===2&&Gc(ft)&&(!ft||!Ne)?Et=tn:lr===3&&sd()&&(ft?!Ye:!qe)&&(Et=jr),Rr++;return Et?(yr={_transport:lr,_isSync:ft},yr[ed]=Et,yr):null}function or(Xe,ft,yr,lr){try{Xe&&Xe(ft,yr,lr)}catch{}}function Dr(Xe,ft){var yr=sa(),lr=Xe[Do];if(!lr)return zt(ft),!0;lr=Xe[Do]+(me?Zv:Oo);var Et=Xe[Ai],Rr=$?Et:new Blob([Et],{type:"text/plain;charset=UTF-8"}),It=yr.sendBeacon(lr,Rr);return It}function jr(Xe,ft,yr){var lr=Xe[Ai];try{if(lr)if(Dr(Xe,ft))Te(Oo,ft);else{var Et=q&&q.beaconOnRetry;Et&&Wt(Et)?Et(Xe,ft,Dr):(se&&se[ed](Xe,ft,!0),pa(O,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Rr){$&&Vs(O,"Failed to send telemetry using sendBeacon API. Ex:"+pr(Rr)),or(ft,$?0:400,{},Oo)}}function ln(Xe,ft,yr){var lr,Et,Rr,It=Xe[Co]||{};!yr&&E&&(lr=Oi(function(In,yi){Et=In,Rr=yi})),$&&yr&&Xe.disableXhrSync&&(yr=!1);var Ma=Xe[Do];if(!Ma){zt(ft),Et&&Et(!1);return}var ut=Am(nl,Ma,Ce,!0,yr,Xe[An]);$||ut[eo]("Content-type","application/json"),hr(bn(It),function(In){ut[eo](In,It[In])}),ut.onreadystatechange=function(){$||(Tn(ut),ut.readyState===4&&Et&&Et(!0))},ut.onload=function(){$&&Tn(ut)};function Tn(In){var yi=q&&q.xhrOnComplete,gc=yi&&Wt(yi);if(gc)yi(In,ft,Xe);else{var Ui=Ja(In);or(ft,In[Io],ic(In,$),Ui)}}return ut.onerror=function(In){or(ft,$?ut[Io]:400,ic(ut,$),$?Oo:qv(ut)),Rr&&Rr(In)},ut.ontimeout=function(){or(ft,$?ut[Io]:500,ic(ut,$),$?Oo:qv(ut)),Et&&Et(!1)},ut.send(Xe[Ai]),lr}function tn(Xe,ft,yr){var lr,Et=Xe[Do],Rr=Xe[Ai],It=$?Rr:new Blob([Rr],{type:"application/json"}),Ma,ut,Tn,In=new Headers,yi=Rr[Vr],gc=!1,Ui=!1,Nf=Xe[Co]||{},ys=(lr={method:nl,body:It},lr[fs]=!0,lr);Xe.headers&&bn(Xe.headers)[Vr]>0&&(hr(bn(Nf),function(Jr){In.append(Jr,Nf[Jr])}),ys[Co]=In),oe?ys.credentials=oe:Ce&&$&&(ys.credentials="include"),yr&&(ys.keepalive=!0,_+=yi,$?Xe._sendReason===2&&(gc=!0,me&&(Et+=Zv)):gc=!0);var jo=new Request(Et,ys);try{jo[fs]=!0}catch{}if(!yr&&E&&(Ma=Oi(function(Jr,ra){ut=Jr,Tn=ra})),!Et){zt(ft),ut&&ut(!1);return}function ru(Jr){or(ft,$?0:400,{},$?Oo:Jr)}function ta(Jr,ra,La){var nu=Jr[Io],yc=q.fetchOnComplete;yc&&Wt(yc)?yc(Jr,ft,La||Oo,ra):or(ft,nu,{},La||Oo)}try{Zu(fetch($?Et:jo,$?ys:null),function(Jr){if(yr&&(_-=yi,yi=0),!Ui)if(Ui=!0,Jr.rejected)ru(Jr.reason&&Jr.reason[Ci]),Tn&&Tn(Jr.reason);else{var ra=Jr[Ll];try{!$&&!ra.ok?(ru(ra.statusText),ut&&ut(!1)):$&&!ra.body?(ta(ra,null,Oo),ut&&ut(!0)):Zu(ra.text(),function(La){ta(ra,Xe,La[Ll]),ut&&ut(!0)})}catch(La){ru(pr(La)),Tn&&Tn(La)}}})}catch(Jr){Ui||(ru(pr(Jr)),Tn&&Tn(Jr))}return gc&&!Ui&&(Ui=!0,or(ft,200,{}),ut&&ut(!0)),$&&!Ui&&Xe[An]>0&&Ue&&Ue.set(function(){Ui||(Ui=!0,or(ft,500,{}),ut&&ut(!0))},Xe[An]),Ma}function Xt(Xe,ft,yr){var lr=ii(),Et=new XDomainRequest,Rr=Xe[Ai];Et.onload=function(){var In=Ja(Et),yi=q&&q.xdrOnComplete;yi&&Wt(yi)?yi(Et,ft,Xe):or(ft,200,{},In)},Et.onerror=function(){or(ft,400,{},$?Oo:qc(Et))},Et.ontimeout=function(){or(ft,500,{})},Et.onprogress=function(){};var It=lr&&lr.location&&lr.location[Qf]||"",Ma=Xe[Do];if(!Ma){zt(ft);return}if(!$&&Ma.lastIndexOf(It,0)!==0){var ut="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";pa(O,2,40,". "+ut),Be(ut,ft);return}var Tn=$?Ma:Ma[Ka](/^(https?:)/,"");Et.open(nl,Tn),Xe[An]&&(Et[An]=Xe[An]),Et.send(Rr),$&&yr?Ue&&Ue.set(function(){Et.send(Rr)},0):Et.send(Rr)}function ea(){_=0,C=!1,E=!1,O=null,$=null,q=null,W=null,oe=null,se=null,De=!1,qe=!1,Ye=!1,Ne=!1,me=!1,Ue=null}})}return d.__ieDyn=1,d}(),af="on",Xv="attachEvent",rv="addEventListener",Nu="detachEvent",Du="removeEventListener",al="events",ps="visibilitychange",Ks="pagehide",of="pageshow",hd="unload",_d="beforeunload",sf=Hn("aiEvtPageHide"),hi=Hn("aiEvtPageShow"),uf=/\.[\.]+/g,Qv=/[\.]+$/,Mm=1,il=Kc("events"),Lm=/^([^.]*)(?:\.(.+)|)/;function ko(d){return d&&d[Ka]?d[Ka](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,cn):d}function Cu(d,_){var E;if(_){var C=cn;Gt(_)?(C=cn,hr(_,function($){$=ko($),$&&($[0]!=="."&&($="."+$),C+=$)})):C=ko(_),C&&(C[0]!=="."&&(C="."+C),d=(d||cn)+C)}var O=Lm.exec(d||cn)||[];return E={},E[pt]=O[1],E.ns=(O[2]||cn).replace(uf,".").replace(Qv,cn)[_u](".").sort().join("."),E}function ol(d,_,E){E===void 0&&(E=!0);var C=il.get(d,al,{},E),O=C[_];return O||(O=C[_]=[]),O}function em(d,_,E,C){d&&_&&_[pt]&&(d[Du]?d[Du](_[pt],E,C):d[Nu]&&d[Nu](af+_[pt],E))}function vp(d,_,E,C){var O=!1;return d&&_&&_[pt]&&E&&(d[rv]?(d[rv](_[pt],E,C),O=!0):d[Xv]&&(d[Xv](af+_[pt],E),O=!0)),O}function tm(d,_,E,C){for(var O=_[Vr];O--;){var $=_[O];$&&(!E.ns||E.ns===$.evtName.ns)&&(!C||C($))&&(em(d,$.evtName,$[Ju],$.capture),_[Jd](O,1))}}function nv(d,_,E){if(_[pt])tm(d,ol(d,_[pt]),_,E);else{var C=il.get(d,al,{});wr(C,function(O,$){tm(d,$,_,E)}),bn(C)[Vr]===0&&il.kill(d,al)}}function gd(d,_){var E;return _?(Gt(_)?E=[d].concat(_):E=[d,_],E=Cu("xx",E).ns[_u](".")):E=d,E}function sl(d,_,E,C,O){var $;O===void 0&&(O=!1);var q=!1;if(d)try{var W=Cu(_,C);if(q=vp(d,W,E,O),q&&il.accept(d)){var oe=($={guid:Mm++,evtName:W},$[Ju]=E,$.capture=O,$);ol(d,W.type)[Va](oe)}}catch{}return q}function no(d,_,E,C,O){if(O===void 0&&(O=!1),d)try{var $=Cu(_,C),q=!1;nv(d,$,function(W){return $.ns&&!E||W[Ju]===E?(q=!0,!0):!1}),q||em(d,$,E,O)}catch{}}function yd(d,_,E){var C=!1,O=ii();O&&(C=sl(O,d,_,E),C=sl(O.body,d,_,E)||C);var $=Mn();return $&&(C=sl($,d,_,E)||C),C}function ul(d,_,E){var C=ii();C&&(no(C,d,_,E),no(C.body,d,_,E));var O=Mn();O&&no(O,d,_,E)}function Oa(d,_,E,C){var O=!1;return _&&d&&d[Vr]>0&&hr(d,function($){$&&(!E||Ko(E,$)===-1)&&(O=yd($,_,C)||O)}),O}function ao(d,_,E,C){var O=!1;return _&&d&&Gt(d)&&(O=Oa(d,_,E,C),!O&&E&&E[Vr]>0&&(O=Oa(d,_,null,C))),O}function cf(d,_,E){d&&Gt(d)&&hr(d,function(C){C&&ul(C,_,E)})}function rm(d,_,E){return ao([_d,hd,Ks],d,_,E)}function nm(d,_){cf([_d,hd,Ks],d,_)}function ha(d,_,E){function C(q){var W=Mn();d&&W&&W.visibilityState==="hidden"&&d(q)}var O=gd(sf,E),$=Oa([Ks],d,_,O);return(!_||Ko(_,ps)===-1)&&($=Oa([ps],C,_,O)||$),!$&&_&&($=ha(d,null,E)),$}function cl(d,_){var E=gd(sf,_);cf([Ks],d,E),cf([ps],null,E)}function lf(d,_,E){function C(q){var W=Mn();d&&W&&W.visibilityState==="visible"&&d(q)}var O=gd(hi,E),$=Oa([of],d,_,O);return $=Oa([ps],C,_,O)||$,!$&&_&&($=lf(d,null,E)),$}function Fm(d,_){var E=gd(hi,_);cf([of],d,E),cf([ps],null,E)}var am="",ff="timings",ka="value",mp="kind",dc="length",ll="processTelemetryStart",Ws,df="4.3.4",hp="1DS-Web-JS-"+df,St=D.hasOwnProperty,xu=(Ws={},Ws[0]=0,Ws[2]=6,Ws[1]=1,Ws[3]=7,Ws[4098]=6,Ws[4097]=1,Ws[4099]=7,Ws);function Mo(d){return!(d===am||rt(d))}function pf(d){if(d){var _=zd(d,"-");if(_>-1)return Lr(d,_)}return am}function Um(d,_,E){if(!_&&!Mo(_)||typeof d!="string")return null;var C=typeof _;if(C==="string"||C==="number"||C==="boolean"||Gt(_))_={value:_};else if(C==="object"&&!St.call(_,"value"))_={value:E?JSON.stringify(_):_};else if(rt(_[ka])||_[ka]===am||!Dc(_[ka])&&!tr(_[ka])&&!Yr(_[ka])&&!Gt(_[ka]))return null;if(Gt(_[ka])&&!gp(_[ka]))return null;if(!rt(_[mp])){if(Gt(_[ka])||!im(_[mp]))return null;_[ka]=_[ka].toString()}return _}function vf(d,_,E){var C=-1;if(!kt(d))if(_>0&&(_===32?C=8192:_<=13&&(C=_<<5)),_p(E))C===-1&&(C=0),C|=E;else{var O=xu[pc(d)]||-1;C!==-1&&O!==-1?C|=O:O===6&&(C=O)}return C}function Sd(d,_,E,C,O){var $={},q=!1,W=0,oe=arguments[dc],se=arguments;for(Yr(se[0])&&(q=se[0],W++);W<oe;W++){var d=se[W];wr(d,function(qe,Ye){q&&Ye&&qi(Ye)?Gt(Ye)?($[qe]=$[qe]||[],hr(Ye,function(Ne,me){Ne&&qi(Ne)?$[qe][me]=Sd(!0,$[qe][me],Ne):$[qe][me]=Ne})):$[qe]=Sd(!0,$[qe],Ye):$[qe]=Ye})}return $}var Lo=Bd;function im(d){return d===0||d>0&&d<=13||d===32}function _p(d){return d>=0&&d<=9}function gp(d){return d[dc]>0}function mf(d,_){var E=d;E[ff]=E[ff]||{},E[ff][ll]=E[ff][ll]||{},E[ff][ll][_]=Lo()}function pc(d){var _=0;if(d!=null){var E=typeof d;E==="string"?_=1:E==="number"?_=2:E==="boolean"?_=3:E===u&&(_=4,Gt(d)?(_=4096,d[dc]>0&&(_|=pc(d[0]))):St.call(d,"value")&&(_=8192|pc(d[ka])))}return _}function av(){return!!sn("chrome")}function Hr(d){return d>0}var Js="",iv="drop",Pu="send",io="requeue",Fn="rspFail",wd="oth",vc="no-cache, no-store",fl="application/x-json-stream",vs="cache-control",oo="content-type",Fo="kill-tokens",bd="kill-duration",yp="time-delta-millis",ov="client-version",ms="client-id",sv="time-delta-to-apply-millis",Ed="upload-time",uv="apikey",hs="AuthMsaDeviceTicket",jm="WebAuthToken",Au="AuthXToken",cv="NoResponseBody",f="msfpc",h="trace",S="user",N="allowRequestSending",F="firstRequestSent",V="shouldAddClockSkewHeaders",J="getClockSkewHeaderValue",ae="setClockSkew",re="length",ge="concat",tt="iKey",bt="count",Jt="events",ot="push",lt="split",ir="splice",Ut="toLowerCase",gr="hdrs",br="useHdrs",At="initialize",En="setTimeoutOverride",mc="clearTimeoutOverride",Zs="payloadPreprocessor",dl="overrideEndpointUrl",hf="avoidOptions",Td="disableEventTimings",_f="stringifyObjects",gf="enableCompoundKey",Id="disableXhrSync",yf="disableFetchKeepAlive",Re="addNoResponse",vt="excludeCsMetaData",Bt="useSendBeacon",en="fetchCredentials",Ea="alwaysUseXhrOverride",Ta="unloadTransports",Xn="serializeOfflineEvt",_i="getOfflineRequestDetails",_s="createPayload",pl="createOneDSPayload",om="payloadBlob",Ru="headers",Nd="_thePayload",Ym="urlString",Qn="batches",gs="sendType",sm="addHeader",$m="canSendRequest",lv="sendQueuedRequests",qm="isCompletelyIdle",Bm="setUnloading",Jh="isTenantKilled",zm="resume",Hm="sendSynchronousBatch",vl="_transport",Sf="getWParam",Xs="isBeacon",ml="timings",Gm="isTeardown",um="isSync",fv="data",dv="timeout",Dd="_sendReason",vh="setKillSwitchTenants",Vm="_backOffTransmission",Sp="identifier",hl="disableOptimizeObj",F_="ignoreMc1Ms0CookieProcessing",mh="eventsLimitInMem",Zh="autoFlushEventsLimit",Km="disableAutoBatchFlushLimit",U_="overrideInstrumentationKey",wf="disableTelemetry",pv="baseData",cm="sendAttempt",bf="latency",vv="sync";function hh(d){var _=(d.ext||{}).intweb;return _&&Mo(_[f])?_[f]:null}function Xh(d){for(var _=null,E=0;_===null&&E<d[re];E++)_=hh(d[E]);return _}var Cd=function(){function d(_,E){var C=E?[][ge](E):[],O=this,$=Xh(C);O[tt]=function(){return _},O.Msfpc=function(){return $||Js},O[bt]=function(){return C[re]},O[Jt]=function(){return C},O.addEvent=function(q){return q?(C[ot](q),$||($=hh(q)),!0):!1},O[lt]=function(q,W){var oe;if(q<C[re]){var se=C[re]-q;rt(W)||(se=W<se?W:se),oe=C[ir](q,se),$=Xh(C)}return new d(_,oe)}}return d.create=function(_,E){return new d(_,E)},d}(),Qh=function(){function d(){var _=!0,E=!0,C=!0,O="use-collector-delta",$=!1;Ji(d,this,function(q){q[N]=function(){return _},q[F]=function(){C&&(C=!1,$||(_=!1))},q[V]=function(){return E},q[J]=function(){return O},q[ae]=function(W){$||(W?(O=W,E=!0,$=!0):E=!1,_=!0)}})}return d.__ieDyn=1,d}(),j_=1e3,_h=function(){function d(){var _={};function E(C){var O=[];return C&&hr(C,function($){O[ot](Ti($))}),O}Ji(d,this,function(C){C[vh]=function(O,$){if(O&&$)try{var q=E(O[lt](","));if($==="this-request-only")return q;for(var W=parseInt($,10)*j_,oe=0;oe<q[re];++oe)_[q[oe]]=Ei()+W}catch{return[]}return[]},C[Jh]=function(O){var $=_,q=Ti(O);return $[q]!==void 0&&$[q]>Ei()?!0:(delete $[q],!1)}})}return d.__ieDyn=1,d}(),lm=.8,gh=1.2,Wm=3e3,mv=6e5;function xd(d){return!(d>=300&&d<500&&d!=429||d==501||d==505)}function yh(d){var _=0,E=Wm*lm,C=Wm*gh,O=Math.floor(Math.random()*(C-E))+E;return _=Math.pow(2,d)*O,Math.min(_,mv)}var fm=20,Kr=3984588,Qs=65e3,Pd=2e6,wp=Math.min(Pd,Qs),hv="metadata",dm="f",Ef=/\./,Ad=function(){function d(_,E,C,O,$,q){var W="data",oe="baseData",se="ext",De=!!O,qe=!0,Ye=E,Ne={},me=!!q,Ue=$||vf;Ji(d,this,function(Ee){Ee.createPayload=function(Te,Be,zt,Zt,or,Dr){return{apiKeys:[],payloadBlob:Js,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:Te,isTeardown:Be,isSync:zt,isBeacon:Zt,sendType:Dr,sendReason:or}},Ee.appendPayload=function(Te,Be,zt){var Zt=Te&&Be&&!Te.overflow;return Zt&&ma(_,function(){return"Serializer:appendPayload"},function(){for(var or=Be.events(),Dr=Te.payloadBlob,jr=Te.numEvents,ln=!1,tn=[],Xt=[],ea=Te.isBeacon,Xe=ea?Qs:Kr,ft=ea?wp:Pd,yr=0,lr=0;yr<or.length;){var Et=or[yr];if(Et){if(jr>=zt){Te.overflow=Be.split(yr);break}var Rr=Ee.getEventBlob(Et);if(Rr&&Rr.length<=ft){var It=Rr.length,Ma=Dr.length;if(Ma+It>Xe){Te.overflow=Be.split(yr);break}Dr&&(Dr+=`
`),Dr+=Rr,lr++,lr>fm&&(Ds(Dr,0,1),lr=0),ln=!0,jr++}else Rr?tn.push(Et):Xt.push(Et),or.splice(yr,1),yr--}yr++}if(tn.length>0&&Te.sizeExceed.push(Cd.create(Be.iKey(),tn)),Xt.length>0&&Te.failedEvts.push(Cd.create(Be.iKey(),Xt)),ln){Te.batches.push(Be),Te.payloadBlob=Dr,Te.numEvents=jr;var ut=Be.iKey();Ko(Te.apiKeys,ut)===-1&&Te.apiKeys.push(ut)}},function(){return{payload:Te,theBatch:{iKey:Be.iKey(),evts:Be.events()},max:zt}}),Zt},Ee.getEventBlob=function(Te){try{return ma(_,function(){return"Serializer.getEventBlob"},function(){var Be={};Be.name=Te.name,Be.time=Te.time,Be.ver=Te.ver,Be.iKey="o:"+pf(Te.iKey);var zt={},Zt;me||(Zt=function(ln,tn,Xt){e_(Ue,zt,ln,tn,Xt)});var or=Te[se];or&&(Be[se]=zt,wr(or,function(ln,tn){var Xt=zt[ln]={};Ce(tn,Xt,"ext."+ln,!0,null,null,!0)}));var Dr=Be[W]={};Dr.baseType=Te.baseType;var jr=Dr[oe]={};return Ce(Te.baseData,jr,oe,!1,[oe],Zt,qe),Ce(Te.data,Dr,W,!1,[],Zt,qe),JSON.stringify(Be)},function(){return{item:Te}})}catch{return null}};function Ke(Te,Be){var zt=Ne[Te];return zt===void 0&&(Te.length>=7&&(zt=Wn(Te,"ext.metadata")||Wn(Te,"ext.web")),Ne[Te]=zt),zt}function Ce(Te,Be,zt,Zt,or,Dr,jr){wr(Te,function(ln,tn){var Xt=null;if(tn||Mo(tn)){var ea=zt,Xe=ln,ft=or,yr=Be;if(De&&!Zt&&Ef.test(ln)){var lr=ln.split("."),Et=lr.length;if(Et>1){ft&&(ft=ft.slice());for(var Rr=0;Rr<Et-1;Rr++){var It=lr[Rr];yr=yr[It]=yr[It]||{},ea+="."+It,ft&&ft.push(It)}Xe=lr[Et-1]}}var Ma=Zt&&Ke(ea);if(!Ma&&Ye&&Ye.handleField(ea,Xe)?Xt=Ye.value(ea,Xe,tn,C):Xt=Um(Xe,tn,C),Xt){var ut=Xt.value;if(yr[Xe]=ut,Dr&&Dr(ft,Xe,Xt),jr&&typeof ut=="object"&&!Gt(ut)){var Tn=ft;Tn&&(Tn=Tn.slice(),Tn.push(Xe)),Ce(tn,ut,ea+"."+Xe,Zt,Tn,Dr,jr)}}}})}})}return d.__ieDyn=1,d}();function e_(d,_,E,C,O){if(O&&_){var $=d(O.value,O.kind,O.propertyType);if($>-1){var q=_[hv];q||(q=_[hv]={f:{}});var W=q[dm];if(W||(W=q[dm]={}),E)for(var oe=0;oe<E.length;oe++){var se=E[oe];W[se]||(W[se]={f:{}});var De=W[se][dm];De||(De=W[se][dm]={}),W=De}W=W[C]={},Gt(O.value)?W.a={t:$}:W.t=$}}}function bp(d,_){return{set:function(E,C){for(var O=[],$=2;$<arguments.length;$++)O[$-2]=arguments[$];return qp([d,_],E,C,O)}}}var _l,hc="sendAttempt",Uo="&"+cv+"=true",eu="?cors=true&"+oo[Ut]()+"="+fl,gl=(_l={},_l[1]=io,_l[100]=io,_l[200]="sent",_l[8004]=iv,_l[8003]=iv,_l),Tf={},Ou={};function ku(d,_,E){Tf[d]=_,E!==!1&&(Ou[_]=d)}ku(hs,hs,!1),ku(ov,ov),ku(ms,"Client-Id"),ku(uv,uv),ku(sv,sv),ku(Ed,Ed),ku(Au,Au);function Ep(d,_){var E=!1;if(d&&_){var C=bn(d);if(C&&C[re]>0)for(var O=_[Ut](),$=0;$<C[re];$++){var q=C[$];if(q&&je(_,q)&&q[Ut]()===O){E=!0;break}}}return E}function Rd(d,_,E,C){_&&E&&E[re]>0&&(C&&Tf[_]?(d[gr][Tf[_]]=E,d[br]=!0):d.url+="&"+_+"="+E)}function t_(d,_,E){for(var C=0;C<d[re];C++)if(d[C].name===_){d[C].value=E;return}d[ot]({name:_,value:E})}function _v(d,_){for(var E=0;E<d[re];E++)if(d[E].name===_){d[ir](E,1);return}}var _c=function(){function d(_,E,C,O){var $,q,W,oe,se=!1,De,qe,Ye,Ne,me,Ue,Ee,Ke,Ce,Te,Be,zt,Zt,or,Dr,jr,ln,tn,Xt,ea,Xe,ft,yr,lr,Et,Rr,It,Ma;Ji(d,this,function(ut){Ui();var Tn=!0;ut[At]=function(a,c,p){lr||(me=c,zt=c.getCookieMgr(),qe=p,Ye=qe.diagLog(),Hf(ea,zs(a,function(g){var b,x=g.cfg,R=g.cfg.extensionConfig[p.identifier];Et=bp(R[En],R[mc]),Mo(x.anonCookieName)?t_(Ee,"anoncknm",x.anonCookieName):_v(Ee,"anoncknm"),Xe=R[Zs],ft=R.payloadListener;var P=R.httpXHROverride,k=R[dl]?R[dl]:x.endpointUrl;$=k+eu,or=kt(R[hf])?!0:!R[hf],Be=!R[Td];var j=R.valueSanitizer,z=R[_f],G=!!x[gf];kt(R[gf])||(G=!!R[gf]),Dr=R.xhrTimeout,jr=!!R[Id],ln=!!R[yf],Xt=R[Re]!==!1,Rr=!!R[vt],c.getPlugin("LocalStorage")&&(ln=!0),se=!la(),Te=new Ad(me,j,z,G,vf,Rr),rt(R[Bt])||(se=!!R[Bt]),R[en]&&(Ma=R[en]);var K=yi();It?It.SetConfig(K):(It=new km,It[At](K,Ye));var te=P,Z=R[Ea]?P:null,_e=R[Ea]?P:null,ye=[3,2];if(!P){Ue=!1;var Fe=[];la()?(Fe=[2,1],ye=[2,1,3]):Fe=[1,2,3],Fe=rc(Fe,R.transports),P=In(Fe,!1),P||Vs(Ye,"No available transport to send events"),te=In(Fe,!0)}Z||(ye=rc(ye,R[Ta]),Z=In(ye,!0)),tn=!Ue&&(se&&sd()||!ln&&Gc(!0)),Ne=(b={},b[0]=P,b[1]=te||In([1,2,3],!0),b[2]=Z||te||In([1],!0),b[3]=_e||In([2,3],!0)||te||In([1],!0),b)})),lr=!0)},ut.addResponseHandler=function(a){return yr[ot](a),{rm:function(){var c=yr.indexOf(a);c>=0&&yr[ir](c,1)}}},ut[Xn]=function(a){try{if(Te)return Te.getEventBlob(a)}catch{}return Js},ut[_i]=function(){try{var a=Te&&Te[_s](0,!1,!1,!1,1,0);return Df(a,or)}catch{}return null},ut[pl]=function(a,c){try{var p=[];hr(a,function(P){c&&(P=Ro(P));var k=Cd.create(P[tt],[P]);p[ot](k)});for(var g=null;p[re]>0&&Te;){var b=p.shift();b&&b[bt]()>0&&(g=g||Te[_s](0,!1,!1,!1,1,0),Te.appendPayload(g,b,_))}var x=Df(g,or),R={data:g[om],urlString:x.url,headers:x[gr],timeout:Dr,disableXhrSync:jr,disableFetchKeepAlive:ln};return or&&(Ep(R[Ru],vs)||(R[Ru][vs]=vc),Ep(R[Ru],oo)||(R[Ru][oo]=fl)),R}catch{}return null};function In(a,c){try{return It&&It.getSenderInst(a,c)}catch{}return null}ut._getDbgPlgTargets=function(){return[Ne[0],q,Te,Ne,yi(),$]};function yi(){try{var a={xdrOnComplete:gc,fetchOnComplete:Nf,xhrOnComplete:ys,beaconOnRetry:ru},c={enableSendPromise:!1,isOneDs:!0,disableCredentials:!Tn,fetchCredentials:Ma,disableXhr:!1,disableBeacon:!se,disableBeaconSync:!se,disableFetchKeepAlive:ln,timeWrapper:Et,addNoResponse:Xt,senderOnCompleteCallBack:a};return c}catch{}return null}function gc(a,c,p){var g=Ja(a);jo(c,200,{},g),Mu(g)}function Ui(){var a;$=null,q=new _h,W=!1,oe=new Qh,se=!1,De=0,qe=null,Ye=null,Ne=null,me=null,Ue=!0,Ee=[],Ke={},Ce=[],Te=null,Be=!1,zt=null,Zt=!1,or=!1,Dr=a,jr=a,ln=a,tn=a,Xt=a,ea=[],Xe=a,ft=a,yr=[],lr=!1,Et=bp(),Rr=!1,It=null}function Nf(a,c,p,g){var b=function(P,k,j){jo(c,P,k,j),Mu(j)},x={},R=a[Ru];R&&R.forEach(function(P,k){x[k]=P}),b(a.status,x,p||Js)}function ys(a,c,p){var g=Ja(a);jo(c,a.status,ic(a,!0),g),Mu(g)}function jo(a,c,p,g){try{a(c,p,g)}catch(b){pa(Ye,2,518,pr(b))}}function ru(a,c,p){var g=a,b=200,x=g[Nd],R=a[Ym]+(Xt?Uo:Js);try{var P=sa();if(x){var k=!!me.getPlugin("LocalStorage"),j=[],z=[];hr(x[Qn],function(G){if(j&&G&&G[bt]()>0)for(var K=G[Jt](),te=0;te<K[re];te++)if(P.sendBeacon(R,Te.getEventBlob(K[te])))z[ot](G[te]);else{j[ot](G[lt](te));break}else j[ot](G[lt](0))}),z[re]>0&&(x.sentEvts=z),k||Si(j,8003,x[gs],!0)}else b=0}catch(G){Vs(Ye,"Failed to send telemetry using sendBeacon API. Ex:"+pr(G)),b=0}finally{jo(c,b,{},Js)}}function ta(a){return a===2||a===3}function Jr(a){return Zt&&ta(a)&&(a=2),a}ut[sm]=function(a,c){Ke[a]=c},ut.removeHeader=function(a){delete Ke[a]},ut[$m]=function(){return ra()&&oe[N]()},ut[lv]=function(a,c){kt(a)&&(a=0),Zt&&(a=Jr(a),c=2),nu(Ce,a,0)&&ji(La(),0,!1,a,c||0)},ut[qm]=function(){return!W&&De===0&&Ce[re]===0},ut[Bm]=function(a){Zt=a},ut.addBatch=function(a){if(a&&a[bt]()>0){if(q.isTenantKilled(a[tt]()))return!1;Ce[ot](a)}return!0},ut.teardown=function(){Ce[re]>0&&ji(La(),0,!0,2,2),hr(ea,function(a){a&&a.rm&&a.rm()}),ea=[]},ut.pause=function(){W=!0},ut[zm]=function(){W=!1,ut[lv](0,4)},ut[Hm]=function(a,c,p){a&&a[bt]()>0&&(rt(c)&&(c=1),Zt&&(c=Jr(c),p=2),ji([a],0,!1,c,p||0))};function ra(){return!W&&De<E}function La(){var a=Ce;return Ce=[],a}function nu(a,c,p){var g=!1;return a&&a[re]>0&&!W&&Ne[c]&&Te&&(g=c!==0||ra()&&(p>0||oe[N]())),g}function yc(a){var c={};return a&&hr(a,function(p,g){c[g]={iKey:p[tt](),evts:p[Jt]()}}),c}function ji(a,c,p,g,b){if(!(!a||a[re]===0)){if(W){Si(a,1,g);return}g=Jr(g);try{var x=a,R=g!==0;ma(me,function(){return"HttpManager:_sendBatches"},function(P){P&&(a=a.slice(0));for(var k=[],j=null,z=Lo(),G=Ne[g]||(R?Ne[1]:Ne[0]),K=G&&G[vl],te=tn&&(Zt||ta(g)||K===3||G._isSync&&K===2);nu(a,g,c);){var Z=a.shift();Z&&Z[bt]()>0&&(q.isTenantKilled(Z[tt]())?k[ot](Z):(j=j||Te[_s](c,p,R,te,b,g),Te.appendPayload(j,Z,_)?j.overflow!==null&&(a=[j.overflow][ge](a),j.overflow=null,pm(j,z,Lo(),b),z=Lo(),j=null):(pm(j,z,Lo(),b),z=Lo(),a=[Z][ge](a),j=null)))}j&&pm(j,z,Lo(),b),a[re]>0&&(Ce=a[ge](Ce)),Si(k,8004,g)},function(){return{batches:yc(x),retryCount:c,isTeardown:p,isSynchronous:R,sendReason:b,useSendBeacon:ta(g),sendType:g}},!R)}catch(P){pa(Ye,2,48,"Unexpected Exception sending batch: "+pr(P))}}}function Df(a,c){var p={url:$,hdrs:{},useHdrs:!1};c?(p[gr]=Sd(p[gr],Ke),p.useHdrs=bn(p.hdrs)[re]>0):wr(Ke,function(P,k){Ou[P]?Rd(p,Ou[P],k,!1):(p[gr][P]=k,p[br]=!0)}),Rd(p,ms,"NO_AUTH",c),Rd(p,ov,hp,c);var g=Js;hr(a.apiKeys,function(P){g[re]>0&&(g+=","),g+=P}),Rd(p,uv,g,c),Rd(p,Ed,Ei().toString(),c);var b=wv(a);if(Mo(b)&&(p.url+="&ext.intweb.msfpc="+b),oe[V]()&&Rd(p,sv,oe[J](),c),me[Sf]){var x=me[Sf]();x>=0&&(p.url+="&w="+x)}for(var R=0;R<Ee[re];R++)p.url+="&"+Ee[R].name+"="+Ee[R].value;return p}function au(a,c,p){a[c]=a[c]||{},a[c][qe.identifier]=p}function pm(a,c,p,g){if(a&&a.payloadBlob&&a.payloadBlob[re]>0){var b=!!Xe,x=Ne[a.sendType];!ta(a[gs])&&a[Xs]&&a.sendReason===2&&(x=Ne[2]||Ne[3]||x);var R=or;(a.isBeacon||x[vl]===3)&&(R=!1);var P=Df(a,R);R=R||P[br];var k=Lo();ma(me,function(){return"HttpManager:_doPayloadSend"},function(){for(var j=0;j<a.batches[re];j++)for(var z=a[Qn][j],G=z[Jt](),K=0;K<G[re];K++){var te=G[K];if(Be){var Z=te[ml]=te[ml]||{};au(Z,"sendEventStart",k),au(Z,"serializationStart",c),au(Z,"serializationCompleted",p)}te[hc]>0?te[hc]++:te[hc]=1}Si(a[Qn],1e3+(g||0),a[gs],!0);var _e={data:a[om],urlString:P.url,headers:P[gr],_thePayload:a,_sendReason:g,timeout:Dr,disableXhrSync:jr,disableFetchKeepAlive:ln};R&&(Ep(_e[Ru],vs)||(_e[Ru][vs]=vc),Ep(_e[Ru],oo)||(_e[Ru][oo]=fl));var ye=null;x&&(ye=function(Fe){oe[F]();var ze=function(rr,sr){Cf(rr,sr,a,g)},et=a[Gm]||a[um];try{x.sendPOST(Fe,ze,et),ft&&ft(_e,Fe,et,a[Xs])}catch(rr){Vs(Ye,"Unexpected exception sending payload. Ex:"+pr(rr)),jo(ze,0,{})}}),ma(me,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(ye)if(a[gs]===0&&De++,b&&!a.isBeacon&&x[vl]!==3){var Fe={data:_e[fv],urlString:_e[Ym],headers:Sd({},_e[Ru]),timeout:_e[dv],disableXhrSync:_e[Id],disableFetchKeepAlive:_e[yf]},ze=!1;ma(me,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{Xe(Fe,function(et){ze=!0,!Ue&&!et[Nd]&&(et[Nd]=et[Nd]||_e[Nd],et[Dd]=et[Dd]||_e[Dd]),ye(et)},a.isSync||a[Gm])}catch{ze||ye(_e)}})}else ye(_e)})},function(){return{thePayload:a,serializationStart:c,serializationCompleted:p,sendReason:g}},a[um])}a.sizeExceed&&a.sizeExceed[re]>0&&Si(a.sizeExceed,8003,a[gs]),a.failedEvts&&a.failedEvts[re]>0&&Si(a.failedEvts,8002,a[gs])}function Sc(a,c){Be&&hr(a,function(p){var g=p[ml]=p[ml]||{};au(g,"sendEventCompleted",c)})}function Cf(a,c,p,g){var b=9e3,x=null,R=!1,P=!1;try{var k=!0;if(typeof a!==m){if(c){oe[ae](c[yp]);var j=c[bd]||c["kill-duration-seconds"];hr(q[vh](c[Fo],j),function(G){hr(p[Qn],function(K){if(K[tt]()===G){x=x||[];var te=K[lt](0);p.numEvents-=te[bt](),x[ot](te)}})})}if(a==200||a==204){b=200;return}(!xd(a)||p.numEvents<=0)&&(k=!1),b=9e3+a%1e3}if(k){b=100;var z=p.retryCnt;p[gs]===0&&(z<C?(R=!0,xf(function(){p[gs]===0&&De--,ji(p[Qn],z+1,p[Gm],Zt?2:p[gs],5)},Zt,yh(z))):(P=!0,Zt&&(b=8001)))}}finally{R||(oe[ae](),_a(p,b,g,P)),Si(x,8004,p[gs])}}function _a(a,c,p,g){try{g&&qe[Vm]();var b=a[Qn];c===200&&(b=a.sentEvts||a[Qn],!g&&!a[um]&&qe._clearBackOff(),Dp(b)),Si(b,c,a[gs],!0)}finally{a[gs]===0&&(De--,p!==5&&ut.sendQueuedRequests(a[gs],p))}}function Dp(a){if(Be){var c=Lo();hr(a,function(p){p&&p[bt]()>0&&Sc(p[Jt](),c)})}}function xf(a,c,p){c?a():Et.set(a,p)}function wv(a){for(var c=0;c<a.batches[re];c++){var p=a[Qn][c].Msfpc();if(p)return encodeURIComponent(p)}return Js}function Mu(a){var c=yr;try{for(var p=0;p<c[re];p++)try{c[p](a)}catch(b){pa(Ye,1,519,"Response handler failed: "+b)}if(a){var g=JSON.parse(a);Mo(g.webResult)&&Mo(g.webResult[f])&&zt.set("MSFPC",g.webResult[f],365*86400)}}catch{}}function Si(a,c,p,g){if(a&&a[re]>0&&O){var b=O[Pf(c)];if(b){var x=p!==0;ma(me,function(){return"HttpManager:_sendBatchesNotification"},function(){xf(function(){try{b.call(O,a,c,x,p)}catch(R){pa(Ye,1,74,"send request notification failed: "+R)}},g||x,0)},function(){return{batches:yc(a),reason:c,isSync:x,sendSync:g,sendType:p}},!x)}}}function Pf(a){var c=gl[a];return Mo(c)||(c=wd,a>=9e3&&a<=9999?c=Fn:a>=8e3&&a<=8999?c=iv:a>=1e3&&a<=1999&&(c=Pu)),c}})}return d.__ieDyn=1,d}(),Jm=.25,gv=500,If=20,yv=6,Sv=2,Sh=4,wh=2,r_=1,gi=1e4,tu="eventsDiscarded",Tp="",Gn=void 0,Ip=qa({eventsLimitInMem:{isVal:Hr,v:gi},immediateEventLimit:{isVal:Hr,v:500},autoFlushEventsLimit:{isVal:Hr,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:Np,v:Gn},overrideInstrumentationKey:Gn,overrideEndpointUrl:Gn,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:Gn,clearTimeoutOverride:Gn,payloadPreprocessor:Gn,payloadListener:Gn,disableEventTimings:Gn,valueSanitizer:Gn,stringifyObjects:Gn,enableCompoundKey:Gn,disableOptimizeObj:!1,fetchCredentials:Gn,transports:Gn,unloadTransports:Gn,useSendBeacon:Gn,disableFetchKeepAlive:Gn,avoidOptions:!1,xhrTimeout:Gn,disableXhrSync:Gn,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:tr,v:yv},maxUnloadEventRetryAttempts:{isVal:tr,v:Sv},addNoResponse:Gn,excludeCsMetaData:Gn});function Np(d){return d&&d.sendPOST}var n_=function(d){xa(_,d);function _(){var E=d.call(this)||this;E.identifier="PostChannel",E.priority=1011,E.version="4.3.4";var C,O=!1,$=[],q,W=!1,oe=0,se,De=0,qe,Ye={},Ne=t,me,Ue,Ee,Ke,Ce,Te,Be,zt,Zt,or,Dr,jr,ln,tn,Xt,ea,Xe,ft,yr,lr,Et,Rr;return Ji(_,E,function(It,Ma){Jr(),It._getDbgPlgTargets=function(){return[Ce,C]},It[At]=function(P,k,j){ma(k,function(){return"PostChannel:initialize"},function(){Ma[At](P,k,j),yr=k.getNotifyMgr();try{Xt=gd(Hn(It[Sp]),k.evtNamespace&&k.evtNamespace()),It._addHook(zs(P,function(z){var G=z.cfg,K=tf(null,G,k);C=K.getExtCfg(It[Sp],Ip),ea=bp(C[En],C[mc]),Dr=!C[hl]&&av(),Xe=C[F_],Tn(k),qe=C[mh],se=C.immediateEventLimit,Be=C[Zh],ln=C.maxEventRetryAttempts,tn=C.maxUnloadEventRetryAttempts,ft=C[Km],qt(G.endpointUrl)?It.pause():W&&It[zm](),R(),Et=C[U_],Rr=!!C[wf],lr&&ut();var te=G.disablePageUnloadEvents||[];lr=rm(gc,te,Xt),lr=ha(gc,te,Xt)||lr,lr=lf(Ui,G.disablePageShowEvents,Xt)||lr})),Ce[At](P,It.core,It)}catch(z){throw It.setInitialized(!1),z}},function(){return{theConfig:P,core:k,extensions:j}})},It.processTelemetry=function(P,k){mf(P,It[Sp]),k=k||It._getTelCtx(k);var j=P;!Rr&&!O&&(Et&&(j[tt]=Et),ys(j,!0),jr?nu(2,2):ta()),It.processNext(j,k)},It.getOfflineSupport=function(){try{var P=Ce&&Ce[_i]();if(Ce)return{getUrl:function(){return P?P.url:null},serialize:yi,batch:In,shouldProcess:function(k){return!Rr},createPayload:function(k){return null},createOneDSPayload:function(k){if(Ce[pl])return Ce[pl](k,Dr)}}}catch{}return null},It._doTeardown=function(P,k){nu(2,2),O=!0,Ce.teardown(),ut(),Jr()};function ut(){nm(null,Xt),cl(null,Xt),Fm(null,Xt)}function Tn(P){var k=P[Sf];P[Sf]=function(){var j=0;return Xe&&(j=j|2),j|k.call(P)}}function In(P){var k=Tp;return P&&P[re]&&hr(P,function(j){k&&(k+=`
`),k+=j}),k}function yi(P){var k=Tp;try{Nf(P),k=Ce[Xn](P)}catch{}return k}function gc(P){var k=P||ii().event;k.type!=="beforeunload"&&(jr=!0,Ce[Bm](jr)),nu(2,2)}function Ui(P){jr=!1,Ce[Bm](jr)}function Nf(P){P.ext&&P.ext[h]&&delete P.ext[h],P.ext&&P.ext[S]&&P.ext[S].id&&delete P.ext[S].id,Dr&&(P.ext=Ro(P.ext),P[pv]&&(P[pv]=Ro(P[pv])),P[fv]&&(P[fv]=Ro(P[fv])))}function ys(P,k){if(P[cm]||(P[cm]=0),P[bf]||(P[bf]=1),Nf(P),P[vv]){if(Ee||W)P[bf]=3,P[vv]=!1;else if(Ce){Dr&&(P=Ro(P)),Ce[Hm](Cd.create(P[tt],[P]),P[vv]===!0?1:P[vv],3);return}}var j=P[bf],z=De,G=qe;j===4&&(z=oe,G=se);var K=!1;if(z<G)K=!au(P,k);else{var te=1,Z=If;j===4&&(te=4,Z=1),K=!0,pm(P[tt],P[bf],te,Z)&&(K=!au(P,k))}K&&Pf(tu,[P],bo.QueueFull)}It.setEventQueueLimits=function(P,k){C[mh]=qe=Hr(P)?P:gi,C[Zh]=Be=Hr(k)?k:0,R();var j=De>P;if(!j&&zt>0)for(var z=1;!j&&z<=3;z++){var G=Te[z];G&&G[Qn]&&hr(G[Qn],function(K){K&&K[bt]()>=zt&&(j=!0)})}Df(!0,j)},It.pause=function(){La(),W=!0,Ce&&Ce.pause()},It[zm]=function(){W=!1,Ce&&Ce[zm](),ta()},It._loadTransmitProfiles=function(P){xf(),wr(P,function(k,j){var z=j[re];if(z>=2){var G=z>2?j[2]:0;if(j[ir](0,z-2),j[1]<0&&(j[0]=-1),j[1]>0&&j[0]>0){var K=j[0]/j[1];j[0]=Math.ceil(K)*j[1]}G>=0&&j[1]>=0&&G>j[1]&&(G=j[1]),j[ot](G),Ye[k]=j}})},It.flush=function(P,k,j){P===void 0&&(P=!0);var z;if(!W)if(j=j||1,P)k||(z=Oi(function(K){k=K})),q==null?(La(),Cf(1,0,j),q=ra(function(){q=null,_a(k,j)},0)):$[ot](k);else{var G=La();jo(1,1,j),k&&k(),G&&ta()}return z},It.setMsaAuthTicket=function(P){Ce[sm](hs,P)},It.setAuthPluginHeader=function(P){Ce[sm](jm,P)},It.removeAuthPluginHeader=function(){Ce.removeHeader(jm)},It.hasEvents=ru,It._setTransmitProfile=function(P){Ne!==P&&Ye[P]!==void 0&&(La(),Ne=P,ta())},jl(It,function(){return Ce},["addResponseHandler"]);function jo(P,k,j){var z=Cf(P,k,j);return Ce[lv](k,j),z}function ru(){return De>0}function ta(){if(Zt>=0&&Cf(Zt,0,or)&&Ce[lv](0,or),oe>0&&!Ue&&!W){var P=Ye[Ne][2];P>=0&&(Ue=ra(function(){Ue=null,jo(4,0,1),ta()},P))}var k=Ye[Ne][1];!me&&!q&&k>=0&&!W&&(ru()?me=ra(function(){me=null,jo(Ke===0?3:1,0,1),Ke++,Ke%=2,ta()},k):Ke=0)}It[Vm]=function(){Ee<Sh&&(Ee++,La(),ta())},It._clearBackOff=function(){Ee&&(Ee=0,La(),ta())};function Jr(){C=null,O=!1,$=[],q=null,W=!1,oe=0,se=500,De=0,qe=gi,Ye={},Ne=t,me=null,Ue=null,Ee=0,Ke=0,Te={},Be=0,lr=!1,zt=0,Zt=-1,or=null,Dr=!0,jr=!1,ln=yv,tn=Sv,Xt=null,Et=null,Rr=!1,ea=bp(),Ce=new _c(gv,wh,r_,{requeue:Mu,send:c,sent:p,drop:g,rspFail:b,oth:x}),wv(),yc(),R()}function ra(P,k){k===0&&Ee&&(k=1);var j=1e3;return Ee&&(j=yh(Ee-1)),ea.set(P,k*j)}function La(){return me!==null?(me.cancel(),me=null,Ke=0,!0):!1}function nu(P,k){La(),q&&(q.cancel(),q=null),W||jo(1,P,k)}function yc(){Te[4]={batches:[],iKeyMap:{}},Te[3]={batches:[],iKeyMap:{}},Te[2]={batches:[],iKeyMap:{}},Te[1]={batches:[],iKeyMap:{}}}function ji(P,k,j){var z=Te[k];z||(k=1,z=Te[k]);var G=z.iKeyMap[P];return!G&&j&&(G=Cd.create(P),z.batches[ot](G),z.iKeyMap[P]=G),G}function Df(P,k){Ce[$m]()&&!Ee&&(Be>0&&De>Be&&(k=!0),k&&q==null&&It.flush(P,function(){},20))}function au(P,k){Dr&&(P=Ro(P));var j=P[bf],z=ji(P[tt],j,!0);return z.addEvent(P)?(j!==4?(De++,k&&P[cm]===0&&Df(!P.sync,zt>0&&z[bt]()>=zt)):oe++,!0):!1}function pm(P,k,j,z){for(;j<=k;){var G=ji(P,k,!0);if(G&&G[bt]()>0){var K=G[lt](0,z),te=K[bt]();if(te>0)return j===4?oe-=te:De-=te,a(tu,[K],bo.QueueFull),!0}j++}return Sc(),!1}function Sc(){for(var P=0,k=0,j=function(G){var K=Te[G];K&&K[Qn]&&hr(K[Qn],function(te){G===4?P+=te[bt]():k+=te[bt]()})},z=1;z<=4;z++)j(z);De=k,oe=P}function Cf(P,k,j){var z=!1,G=k===0;return!G||Ce[$m]()?ma(It.core,function(){return"PostChannel._queueBatches"},function(){for(var K=[],te=4;te>=P;){var Z=Te[te];Z&&Z.batches&&Z.batches[re]>0&&(hr(Z[Qn],function(_e){Ce.addBatch(_e)?z=z||_e&&_e[bt]()>0:K=K[ge](_e[Jt]()),te===4?oe-=_e[bt]():De-=_e[bt]()}),Z[Qn]=[],Z.iKeyMap={}),te--}K[re]>0&&Pf(tu,K,bo.KillSwitch),z&&Zt>=P&&(Zt=-1,or=0)},function(){return{latency:P,sendType:k,sendReason:j}},!G):(Zt=Zt>=0?Math.min(Zt,P):P,or=Math.max(or,j)),z}function _a(P,k){jo(1,0,k),Sc(),Dp(function(){P&&P(),$[re]>0?q=ra(function(){q=null,_a($.shift(),k)},0):(q=null,ta())})}function Dp(P){Ce[qm]()?P():q=ra(function(){q=null,Dp(P)},Jm)}function xf(){La(),wv(),Ne=t,ta()}function wv(){Ye={},Ye[t]=[2,1,0],Ye[r]=[6,3,0],Ye[n]=[18,9,0]}function Mu(P,k){var j=[],z=ln;jr&&(z=tn),hr(P,function(G){G&&G[bt]()>0&&hr(G[Jt](),function(K){K&&(K[vv]&&(K[bf]=4,K[vv]=!1),K[cm]<z?(mf(K,It[Sp]),ys(K,!1)):j[ot](K))})}),j[re]>0&&Pf(tu,j,bo.NonRetryableStatus),jr&&nu(2,2)}function Si(P,k){var j=yr||{},z=j[P];if(z)try{z.apply(j,k)}catch(G){pa(It.diagLog(),1,74,P+" notification failed: "+G)}}function Pf(P,k){for(var j=[],z=2;z<arguments.length;z++)j[z-2]=arguments[z];k&&k[re]>0&&Si(P,[k][ge](j))}function a(P,k){for(var j=[],z=2;z<arguments.length;z++)j[z-2]=arguments[z];k&&k[re]>0&&hr(k,function(G){G&&G[bt]()>0&&Si(P,[G.events()][ge](j))})}function c(P,k,j){P&&P[re]>0&&Si("eventsSendRequest",[k>=1e3&&k<=1999?k-1e3:0,j!==!0])}function p(P,k){a("eventsSent",P,k),ta()}function g(P,k){a(tu,P,k>=8e3&&k<=8999?k-8e3:bo.Unknown)}function b(P){a(tu,P,bo.NonRetryableStatus),ta()}function x(P,k){a(tu,P,bo.Unknown),ta()}function R(){ft?zt=0:zt=Math.max(gv*(wh+1),qe/6)}}),E}return _.__ieDyn=1,_}(nf);e.BE_PROFILE=n,e.NRT_PROFILE=r,e.PostChannel=n_,e.RT_PROFILE=t})});var YS=Ld(Dv=>{"use strict";var xN=Dv&&Dv.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),PN=Dv&&Dv.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),jS=Dv&&Dv.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&xN(t,e,r);return PN(t,e),t};Object.defineProperty(Dv,"__esModule",{value:!0});Dv.oneDataSystemClientFactory=void 0;var AN=async(e,t,r)=>{let n=await Promise.resolve().then(()=>jS(LS())),o=await Promise.resolve().then(()=>jS(US())),u=new n.AppInsightsCore,m=new o.PostChannel,y={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[m]]};if(r){y.extensionConfig={};let U={alwaysUseXhrOverride:!0,httpXHROverride:r};y.extensionConfig[m.identifier]=U}let D=t.workspace.getConfiguration("telemetry").get("internalTesting");return u.initialize(y,[]),u.addTelemetryInitializer(U=>{U.ext=U.ext??{},U.ext.web=U.ext.web??{},U.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',D&&(U.ext.utc=U.ext.utc??{},U.ext.utc.flags=8462029)}),u},RN=async(e,t,r)=>{let n=await AN(e,t,r);return{logEvent:(m,y)=>{try{n==null||n.track({name:m,baseData:{name:m,properties:y==null?void 0:y.properties,measurements:y==null?void 0:y.measurements}})}catch(T){throw new Error(`Failed to log event to app insights!
`+T.message)}},flush:async()=>{try{return new Promise((y,T)=>{if(!n){y();return}n.flush(!0,D=>{if(!D){T("Failed to flush app 1DS!");return}})})}catch(m){throw new Error(`Failed to flush 1DS!
`+m.message)}},dispose:async()=>new Promise(y=>{if(!n){y();return}n.unload(!1,()=>{y(),n=void 0},1e3)})}};Dv.oneDataSystemClientFactory=RN});var qS=Ld((Ug,$S)=>{(function(e,t){typeof Ug=="object"&&typeof $S<"u"?t(Ug):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{})))})(Ug,function(e){"use strict";function t(f,h){return f||h}function r(f,h){return f[h]}var n=void 0,o=null,u="",m="function",y="object",T="prototype",D="__proto__",U="undefined",H="constructor",ne="Symbol",pe="_polyfill",ce="length",ee="name",Q="call",ve="toString",Pe=t(Object),We=r(Pe,T),Ae=t(String),Ze=r(Ae,T),Tt=t(Math),Dt=t(Array),Lt=r(Dt,T),it=r(Lt,"slice");function Ht(f,h){try{return{v:f.apply(this,h)}}catch(S){return{e:S}}}function xr(f){return function(h){return typeof h===f}}function oa(f){var h="[object "+f+"]";return function(S){return!!(S&&ei(S)===h)}}function ei(f){return We[ve].call(f)}function Pr(f){return typeof f===U||f===U}function xn(f){return!ho(f)}function nt(f){return f===o||Pr(f)}function ho(f){return!!f||f!==n}var Ve=xr("string"),Tr=xr(m);function Bn(f){return!f&&nt(f)?!1:!!f&&typeof f===y}var kt=r(Dt,"isArray"),Ft=oa("Error"),rt=r(Pe,"getOwnPropertyDescriptor");function yn(f,h){return!!f&&We.hasOwnProperty[Q](f,h)}var at=t(r(Pe,"hasOwn"),Dc);function Dc(f,h){return yn(f,h)||!!rt(f,h)}function Wt(f,h,S){if(f&&Bn(f)){for(var N in f)if(at(f,N)&&h[Q](S||f,N,f[N])===-1)break}}var qi={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Gt(f){var h={};if(h[qi.c]=!0,h[qi.e]=!0,f.l){h.get=function(){return f.l.v};var S=rt(f.l,"v");S&&S.set&&(h.set=function(N){f.l.v=N})}return Wt(f,function(N,F){h[qi[N]]=xn(F)?h[qi[N]]:F}),h}var tr=r(Pe,"defineProperty");function Yr(f,h,S){return tr(f,h,Gt(S))}function qt(f,h,S,N,F){var V={};return Wt(f,function(J,ae){an(V,J,h?ae:J,F),an(V,ae,S?ae:J,F)}),N?N(V):V}function an(f,h,S,N){tr(f,h,{value:S,enumerable:!0,writable:!!N})}var je=t(Ae),Kn="[object Error]";function Ct(f,h){var S=u,N=We[ve][Q](f);N===Kn&&(f={stack:je(f.stack),message:je(f.message),name:je(f.name)});try{S=JSON.stringify(f,o,h?typeof h=="number"?h:4:n),S=(S?S.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):o)||je(f)}catch(F){S=" - "+Ct(F,h)}return N+": "+S}function wr(f){throw new Error(f)}function ti(f){throw new TypeError(f)}var Bi=r(Pe,"freeze");function Gr(f){return f}function Sn(f){return f[D]||o}var zi=r(Pe,"assign"),ga=r(Pe,"keys"),Ar=t(Bi,Gr),ar=t(r(Pe,"getPrototypeOf"),Sn);function pr(f){return qt(f,1,0,Ar)}function $r(f){var h={};return Wt(f,function(S,N){an(h,S,N[1]),an(h,N[0],N[1])}),Ar(h)}function qf(f){return $r(f)}var wn="__tsUtils$gblCfg",El;function Cc(){var f;return typeof globalThis!==U&&(f=globalThis),!f&&typeof self!==U&&(f=self),!f&&typeof window!==U&&(f=window),!f&&typeof global!==U&&(f=global),f}function bn(){if(!El){var f=Ht(Cc).v||{};El=f[wn]=f[wn]||{}}return El}var qa=ur;function ur(f,h,S){var N=h?h[f]:o;return function(F){var V=(F?F[f]:o)||N;if(V||S){var J=arguments;return(V||S).apply(F,V?it[Q](J,1):J)}ti('"'+je(f)+'" not defined for '+Ct(F))}}var Pn=r(Tt,"max"),zn=qa("slice",Ze),_o=qa("substring",Ze),Is=ur("substr",Ze,xc);function xc(f,h,S){return nt(f)&&ti("Invalid "+Ct(f)),S<0?u:(h=h||0,h<0&&(h=Pn(h+f[ce],0)),Pr(S)?zn(f,h):zn(f,h,h+S))}function Tl(f,h){return _o(f,0,h)}var go="_urid",Bo;function On(){if(!Bo){var f=bn();Bo=f.gblSym=f.gblSym||{k:{},s:{}}}return Bo}function yo(f){var h={description:je(f),toString:function(){return ne+"("+f+")"}};return h[pe]=!0,h}function Ns(f){var h=On();if(!at(h.k,f)){var S=yo(f),N=ga(h.s).length;S[go]=function(){return N+"_"+S[ve]()},h.k[f]=S,h.s[S[go]()]=je(f)}return h.k[f]}var ya;function ju(){ya=bn()}function Ds(f){return tr({toJSON:function(){return f}},"v",{value:f})}var Nr="window",Lr;function ri(f,h){var S;return function(){return!ya&&ju(),(!S||ya.lzy)&&(S=Ds(Ht(f,h).v)),S.v}}function Hi(f){return!ya&&ju(),(!Lr||f===!1||ya.lzy)&&(Lr=Ds(Ht(Cc).v||o)),Lr.v}function pn(f,h){var S;if(!Lr||h===!1?S=Hi(h):S=Lr.v,S&&S[f])return S[f];if(f===Nr)try{return window}catch{}return o}var ni=ri(pn,["document"]);function ai(){return!!Cs()}var Cs=ri(pn,[Nr]);function Yd(){return!!on()}var on=ri(pn,["navigator"]),So,zo;function kn(){return So=Ds(Ht(pn,[ne]).v),So}function Ho(f){var h=(ya.lzy?0:So)||kn();return h.v?h.v[f]:n}function uu(f,h){!ya&&ju();var S=(ya.lzy?0:So)||kn();return S.v?S.v(f):h?o:yo(f)}function Ba(f){return!ya&&ju(),zo=(ya.lzy?0:zo)||Ds(Ht(Ho,["for"]).v),(zo.v||Ns)(f)}function sn(f,h,S){return f.apply(h,S)}function Mn(f,h,S){if(f)for(var N=f[ce]>>>0,F=0;F<N&&!(F in f&&h[Q](S||f,f[F],F,f)===-1);F++);}var Yu=qa("indexOf",Lt),ii=qa("map",Lt),Ir=qa("reduce",Lt),sa=t(r(Pe,"create"),Bf);function Bf(f){if(!f)return{};var h=typeof f;h!==y&&h!==m&&ti("Prototype must be an Object or function: "+Ct(f));function S(){}return S[T]=f,new S}var Sa;function Go(f,h){var S=Pe.setPrototypeOf||function(N,F){var V;!Sa&&(Sa=Ds((V={},V[D]=[],V instanceof Array))),Sa.v?N[D]=F:Wt(F,function(J,ae){return N[J]=ae})};return S(f,h)}function Pc(f,h,S){Ht(Yr,[h,ee,{v:f,c:!0,e:!1}]),h=Go(h,S);function N(){this[H]=h,Ht(Yr,[this,ee,{v:f,c:!0,e:!1}])}return h[T]=S===o?sa(S):(N[T]=S[T],new N),h}function Vo(f,h){h&&(f[ee]=h)}function zf(f,h,S){var N=S||Error,F=N[T][ee],V=Error.captureStackTrace;return Pc(f,function(){var J=this,ae=arguments;try{Ht(Vo,[N,f]);var re=sn(N,J,it[Q](ae))||J;if(re!==J){var ge=ar(J);ge!==ar(re)&&Go(re,ge)}return V&&V(re,J[H]),h&&h(re,ae),re}finally{Ht(Vo,[N,F])}},N)}function Qr(){return(Date.now||Il)()}function Il(){return new Date().getTime()}function za(f){return function(S){return nt(S)&&ti("strTrim called ["+Ct(S)+"]"),S&&S.replace&&(S=S.replace(f,u)),S}}var $d=za(/^\s+|(?=\s)\s+$/g),oi=ur("trim",Ze,$d),Yp,si,Nl;function Gi(f){if(!f||typeof f!==y)return!1;Nl||(Nl=ai()?Cs():!0);var h=!1;if(f!==Nl){si||(Yp=Function[T][ve],si=Yp[Q](Pe));try{var S=ar(f);h=!S,h||(yn(S,H)&&(S=S[H]),h=!!(S&&typeof S===m&&Yp[Q](S)===si))}catch{}}return h}var Hf;function hr(){return!ya&&ju(),(!Hf||ya.lzy)&&(Hf=Ds(Ht(pn,["performance"]).v)),Hf.v}var Ko=ur("endsWith",Ze,Gf);function Gf(f,h,S){Ve(f)||ti("'"+Ct(f)+"' is not a string");var N=Ve(h)?h:je(h),F=!Pr(S)&&S<f[ce]?S:f[ce];return _o(f,F-N[ce],F)===N}var Ha=qa("indexOf",Ze),Ac="ref",Pt="unref",ui="hasRef",$u="enabled";function Dl(f,h,S){var N=!0,F=f?h(o):o,V;function J(){return N=!1,F&&F[Pt]&&F[Pt](),V}function ae(){F&&S(F),F=o}function re(){return F=h(F),N||J(),V}function ge(tt){!tt&&F&&ae(),tt&&!F&&re()}return V={cancel:ae,refresh:re},V[ui]=function(){return F&&F[ui]?F[ui]():N},V[Ac]=function(){return N=!0,F&&F[Ac]&&F[Ac](),V},V[Pt]=J,V=tr(V,$u,{get:function(){return!!F},set:ge}),{h:V,dn:function(){F=o}}}function Uv(f,h,S){var N=kt(h),F=N?h.length:0,V=(F>0?h[0]:N?n:h)||setTimeout,J=(F>1?h[1]:n)||clearTimeout,ae=S[0];S[0]=function(){re.dn(),sn(ae,n,it[Q](arguments))};var re=Dl(f,function(ge){if(ge){if(ge.refresh)return ge.refresh(),ge;sn(J,n,[ge])}return sn(V,n,S)},function(ge){sn(J,n,[ge])});return re.h}function Ei(f,h){return Uv(!0,n,it[Q](arguments))}var Cl=pr,qd=qf,cu="toLowerCase",Ti="blkVal",dt="length",ua="rdOnly",lu="notify",xs="warnToConsole",Bd="throwInternal",zd="setDf",Wn="watch",ci="logger",Hd="apply",Ii="push",Ga="splice",Pm="hdlr",jv="cancel",$p="name",fu="unload",qp="version",ph="loggingLevelConsole",Gd="messageId",xa="message",xl="diagLog",Pl="userAgent",Vi="split",li="nodeType",du="replace",Bp="logInternalMessage",Ni="type",Vd="handler",qu="traceId",Rc="spanId",Al="traceFlags",Vf="getAttribute",Kd;function zp(f,h){Kd||(Kd=zf("AggregationError",function(N,F){F[dt]>1&&(N.errors=F[1])}));var S=f||"One or more errors occurred.";throw Mn(h,function(N,F){S+=`
`.concat(F," > ").concat(Ct(N))}),new Kd(S,h||[])}var Hp="function",pu="object",Wd="undefined",Ps="prototype",Bu=Object,Di=Bu[Ps];(Hi()||{}).Symbol,(Hi()||{}).Reflect;var Rl="hasOwnProperty",Kf=function(f){for(var h,S=1,N=arguments.length;S<N;S++){h=arguments[S];for(var F in h)Di[Rl].call(h,F)&&(f[F]=h[F])}return f},Oc=zi||Kf,Ki=function(f,h){return Ki=Bu.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,N){S.__proto__=N}||function(S,N){for(var F in N)N[Rl](F)&&(S[F]=N[F])},Ki(f,h)};function Yv(f,h){typeof h!==Hp&&h!==null&&ti("Class extends value "+String(h)+" is not a constructor or null"),Ki(f,h);function S(){this.constructor=f}f[Ps]=h===null?sa(h):(S[Ps]=h[Ps],new S)}var Wo,wo="constructor",Wi="prototype",vu="function",Wf="_dynInstFuncs",kc="_isDynProxy",Mc="_dynClass",zu="_dynCls$",Jf="_dynInstChk",Ol=Jf,Zf="_dfOpts",Hu="_unknown_",Ji="__proto__",Lc="_dyn"+Ji,bo="__dynProto$Gbl",fi="_dynInstProto",Jo="useBaseInst",Vr="setInstFuncs",As=Object,Zi=As.getPrototypeOf,Fc=As.getOwnPropertyNames,Uc=Hi(),Zo=Uc[bo]||(Uc[bo]={o:(Wo={},Wo[Vr]=!0,Wo[Jo]=!0,Wo),n:1e3});function kl(f){return f&&(f===As[Wi]||f===Array[Wi])}function Xo(f){return kl(f)||f===Function[Wi]}function mu(f){var h;if(f){if(Zi)return Zi(f);var S=f[Ji]||f[Wi]||(f[wo]?f[wo][Wi]:null);h=f[Lc]||S,yn(f,Lc)||(delete f[fi],h=f[Lc]=f[fi]||f[Lc],f[fi]=S)}return h}function Va(f,h){var S=[];if(Fc)S=Fc(f);else for(var N in f)typeof N=="string"&&yn(f,N)&&S.push(N);if(S&&S.length>0)for(var F=0;F<S.length;F++)h(S[F])}function Jd(f,h,S){return h!==wo&&typeof f[h]===vu&&(S||yn(f,h))&&h!==Ji&&h!==Wi}function Gu(f){ti("DynamicProto: "+f)}function Pa(f){var h=sa(null);return Va(f,function(S){!h[S]&&Jd(f,S,!1)&&(h[S]=f[S])}),h}function Xf(f,h){for(var S=f.length-1;S>=0;S--)if(f[S]===h)return!0;return!1}function Zd(f,h,S,N){function F(re,ge,tt){var bt=ge[tt];if(bt[kc]&&N){var Jt=re[Wf]||{};Jt[Ol]!==!1&&(bt=(Jt[ge[Mc]]||{})[tt]||bt)}return function(){return bt.apply(re,arguments)}}var V=sa(null);Va(S,function(re){V[re]=F(h,S,re)});for(var J=mu(f),ae=[];J&&!Xo(J)&&!Xf(ae,J);)Va(J,function(re){!V[re]&&Jd(J,re,!Zi)&&(V[re]=F(h,J,re))}),ae.push(J),J=mu(J);return V}function Ml(f,h,S,N){var F=null;if(f&&yn(S,Mc)){var V=f[Wf]||sa(null);if(F=(V[S[Mc]]||sa(null))[h],F||Gu("Missing ["+h+"] "+vu),!F[Jf]&&V[Ol]!==!1){for(var J=!yn(f,h),ae=mu(f),re=[];J&&ae&&!Xo(ae)&&!Xf(re,ae);){var ge=ae[h];if(ge){J=ge===N;break}re.push(ae),ae=mu(ae)}try{J&&(f[h]=F),F[Jf]=1}catch{V[Ol]=!1}}}return F}function Ll(f,h,S){var N=h[f];return N===S&&(N=mu(h)[f]),typeof N!==vu&&Gu("["+f+"] is not a "+vu),N}function Xd(f,h,S,N,F){function V(re,ge){var tt=function(){var bt=Ml(this,ge,re,tt)||Ll(ge,re,tt);return bt.apply(this,arguments)};return tt[kc]=1,tt}if(!kl(f)){var J=S[Wf]=S[Wf]||sa(null);if(!kl(J)){var ae=J[h]=J[h]||sa(null);J[Ol]!==!1&&(J[Ol]=!!F),kl(ae)||Va(S,function(re){Jd(S,re,!1)&&S[re]!==N[re]&&(ae[re]=S[re],delete S[re],(!yn(f,re)||f[re]&&!f[re][kc])&&(f[re]=V(f,re)))})}}}function $v(f,h){if(Zi){for(var S=[],N=mu(h);N&&!Xo(N)&&!Xf(S,N);){if(N===f)return!0;S.push(N),N=mu(N)}return!1}return!0}function Vu(f,h){return yn(f,Wi)?f.name||h||Hu:((f||{})[wo]||{}).name||h||Hu}function Eo(f,h,S,N){yn(f,Wi)||Gu("theClass is an invalid class definition.");var F=f[Wi];$v(F,h)||Gu("["+Vu(f)+"] not in hierarchy of ["+Vu(h)+"]");var V=null;yn(F,Mc)?V=F[Mc]:(V=zu+Vu(f,"_")+"$"+Zo.n,Zo.n++,F[Mc]=V);var J=Eo[Zf],ae=!!J[Jo];ae&&N&&N[Jo]!==void 0&&(ae=!!N[Jo]);var re=Pa(h),ge=Zd(F,h,re,ae);S(h,ge);var tt=!!Zi&&!!J[Vr];tt&&N&&(tt=!!N[Vr]),Xd(F,V,h,re,tt!==!1)}Eo[Zf]=Zo.o;var Xi=void 0,vn="",Fl="Not dynamic - ",Ku=/-([a-z])/g,Wu=/([^\w\d_$])/g,Qd=/^(\d+[\w\d_$])/;function Ci(f){return!nt(f)}function hu(f){var h=f;return h&&Ve(h)&&(h=h[du](Ku,function(S,N){return N.toUpperCase()}),h=h[du](Wu,"_"),h=h[du](Qd,function(S,N){return"_"+N})),h}function Rs(f,h){return f&&h?Ha(f,h)!==-1:!1}function cr(f){return f&&f.toISOString()||""}function To(f){return Ft(f)?f[$p]:vn}function Qo(f){return function(){function h(){var S=this;f&&Wt(f,function(N,F){S[N]=F})}return h}()}var xi="console",Qf="JSON",Pi="crypto",_u="msCrypto",un="msie",Ka="trident/",Fr=null,pt=null,Ju=null;function Io(){return typeof console!==Wd?console:pn(xi)}function Os(){return!!(typeof JSON===pu&&JSON||pn(Qf)!==null)}function Qi(){return Os()?JSON||pn(Qf):null}function gu(){return pn(Pi)}function Ai(){return pn(_u)}function qr(){var f=on();if(f&&(f[Pl]!==pt||Fr===null)){pt=f[Pl];var h=(pt||vn)[cu]();Fr=Rs(h,un)||Rs(h,Ka)}return Fr}function No(f){return(Ju===null||f===!1)&&(Ju=Yd()&&!!on().sendBeacon),Ju}function Ur(f,h){if(f)for(var S=0;S<f[dt];S++){var N=f[S];if(N[$p]&&N[$p]===h)return N}return{}}function Do(f){var h=ni();return h&&f?Ur(h.querySelectorAll("meta"),f).content:null}function ed(f){var h,S=hr();if(S){var N=S.getEntriesByType("navigation")||[];h=Ur((N[dt]>0?N[0]:{}).serverTiming,f).description}return h}var Co=4294967296,An=4294967295,eo=123456789,es=987654321,wa=!1,Aa=eo,jc=es;function Zu(f){f<0&&(f>>>=0),Aa=eo+f&An,jc=es-f&An,wa=!0}function td(){try{var f=Qr()&2147483647;Zu((Math.random()*Co^f)+f)}catch{}}function ks(f){return f>0?Math.floor(xo()/An*(f+1))>>>0:0}function xo(f){var h=0,S=gu()||Ai();return S&&S.getRandomValues&&(h=S.getRandomValues(new Uint32Array(1))[0]&An),h===0&&qr()&&(wa||td(),h=Po()&An),h===0&&(h=Math.floor(Co*Math.random()|0)),f||(h>>>=0),h}function Po(f){jc=36969*(jc&65535)+(jc>>16)&An,Aa=18e3*(Aa&65535)+(Aa>>16)&An;var h=(jc<<16)+(Aa&65535)>>>0&An|0;return f||(h>>>=0),h}function Xu(f){f===void 0&&(f=22);for(var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S=xo()>>>0,N=0,F=vn;F[dt]<f;)N++,F+=h.charAt(S&63),S>>>=6,N===5&&(S=(xo()<<2&4294967295|S&3)>>>0,N=0);return F}var Ao="3.3.4",Ln="."+Xu(6),rd=0;function Qu(f){return f[li]===1||f[li]===9||!+f[li]}function Ms(f,h){var S=h[f.id];if(!S){S={};try{Qu(h)&&Yr(h,f.id,{e:!1,v:S})}catch{}}return S}function di(f,h){return h===void 0&&(h=!1),hu(f+rd+++(h?"."+Ao:vn)+Ln)}function ts(f){var h={id:di("_aiData-"+(f||vn)+"."+Ao),accept:function(S){return Qu(S)},get:function(S,N,F,V){var J=S[h.id];return J?J[hu(N)]:(V&&(J=Ms(h,S),J[hu(N)]=F),F)},kill:function(S,N){if(S&&S[N])try{delete S[N]}catch{}}};return h}function Ls(f){return f&&Bn(f)&&(f.isVal||f.fb||at(f,"v")||at(f,"mrg")||at(f,"ref")||f.set)}function Ri(f,h,S){var N,F=S.dfVal||ho;if(h&&S.fb){var V=S.fb;kt(V)||(V=[V]);for(var J=0;J<V[dt];J++){var ae=V[J],re=h[ae];if(F(re)?N=re:f&&(re=f.cfg[ae],F(re)&&(N=re),f.set(f.cfg,je(ae),re)),F(N))break}}return!F(N)&&F(S.v)&&(N=S.v),N}function Yc(f,h,S){var N=S;if(S&&Ls(S)&&(N=Ri(f,h,S)),N){Ls(N)&&(N=Yc(f,h,N));var F;kt(N)?(F=[],F[dt]=N[dt]):Gi(N)&&(F={}),F&&(Wt(N,function(V,J){J&&Ls(J)&&(J=Yc(f,h,J)),F[V]=J}),N=F)}return N}function yu(f,h,S,N){var F,V,J,ae=N,re,ge,tt,bt;Ls(ae)?(F=ae.isVal,V=ae.set,tt=ae[ua],bt=ae[Ti],re=ae.mrg,ge=ae.ref,!ge&&Pr(ge)&&(ge=!!re),J=Ri(f,h,ae)):J=N,bt&&f[Ti](h,S);var Jt,ot=!0,lt=h[S];(lt||!nt(lt))&&(Jt=lt,ot=!1,F&&Jt!==J&&!F(Jt)&&(Jt=J,ot=!0),V&&(Jt=V(Jt,J,h),ot=Jt===J)),ot?J?Jt=Yc(f,h,J):Jt=J:(Gi(Jt)||kt(J))&&re&&J&&(Gi(J)||kt(J))&&Wt(J,function(ir,Ut){yu(f,Jt,ir,Ut)}),f.set(h,S,Jt),ge&&f.ref(h,S),tt&&f[ua](h,S)}var ca=Ba("[[ai_dynCfg_1]]"),Su=Ba("[[ai_blkDynCfg_1]]"),Fs=Ba("[[ai_frcDynCfg_1]]");function Oi(f){if(f){var h;if(kt(f)?(h=[],h[dt]=f[dt]):Gi(f)&&(h={}),h)return Wt(f,function(S,N){h[S]=Oi(N)}),h}return f}function ec(f){if(f){var h=f[ca]||f;if(h.cfg&&(h.cfg===f||h.cfg[ca]===h))return h}return null}function cn(f){if(f&&(Gi(f)||kt(f)))try{f[Su]=!0}catch{}return f}function Jn(f,h,S){var N=!1;return S&&!f[h.blkVal]&&(N=S[Fs],!N&&!S[Su]&&(N=Gi(S)||kt(S))),N}function ki(f){ti("InvalidAccess:"+f)}var tc=["push","pop","shift","unshift","splice"],rs=function(f,h,S,N){f&&f[Bd](3,108,"".concat(S," [").concat(h,"] failed - ")+Ct(N))};function ep(f,h,S){kt(h)&&Mn(tc,function(N){var F=h[N];h[N]=function(){for(var V=[],J=0;J<arguments.length;J++)V[J]=arguments[J];var ae=F[Hd](this,V);return Wa(f,h,S,"Patching"),ae}})}function pi(f,h){var S=rt(f,h);return S&&S.get}function $c(f,h,S,N){var F={n:S,h:[],trk:function(ge){ge&&ge.fn&&(Yu(F.h,ge)===-1&&F.h[Ii](ge),f.trk(ge,F))},clr:function(ge){var tt=Yu(F.h,ge);tt!==-1&&F.h[Ga](tt,1)}},V=!0,J=!1;function ae(){V&&(J=J||Jn(ae,f,N),N&&!N[ca]&&J&&(N=Wa(f,N,S,"Converting")),V=!1);var ge=f.act;return ge&&F.trk(ge),N}ae[f.prop]={chng:function(){f.add(F)}};function re(ge){if(N!==ge){ae[f.ro]&&!f.upd&&ki("["+S+"] is read-only:"+Ct(h)),V&&(J=J||Jn(ae,f,N),V=!1);var tt=J&&ae[f.rf];if(J)if(tt){Wt(N,function(Jt){N[Jt]=ge?ge[Jt]:Xi});try{Wt(ge,function(Jt,ot){ba(f,N,Jt,ot)}),ge=N}catch(Jt){rs((f.hdlr||{})[ci],S,"Assigning",Jt),J=!1}}else N&&N[ca]&&Wt(N,function(Jt){var ot=pi(N,Jt);if(ot){var lt=ot[f.prop];lt&&lt.chng()}});if(ge!==N){var bt=ge&&Jn(ae,f,ge);!tt&&bt&&(ge=Wa(f,ge,S,"Converting")),N=ge,J=bt}f.add(F)}}Yr(h,F.n,{g:ae,s:re})}function ba(f,h,S,N){if(h){var F=pi(h,S),V=F&&!!F[f.prop];V?h[S]=N:$c(f,h,S,N)}return h}function nd(f,h,S,N){if(h){var F=pi(h,S),V=F&&!!F[f.prop],J=N&&N[0],ae=N&&N[1],re=N&&N[2];if(!V){if(re)try{cn(h)}catch(ge){rs((f.hdlr||{})[ci],S,"Blocking",ge)}try{ba(f,h,S,h[S]),F=pi(h,S)}catch(ge){rs((f.hdlr||{})[ci],S,"State",ge)}}J&&(F[f.rf]=J),ae&&(F[f.ro]=ae),re&&(F[f.blkVal]=!0)}return h}function Wa(f,h,S,N){try{Wt(h,function(F,V){ba(f,h,F,V)}),h[ca]||(tr(h,ca,{get:function(){return f[Pm]}}),ep(f,h,S))}catch(F){rs((f.hdlr||{})[ci],S,N,F)}return h}var ns="[[ai_",as="]]";function tp(f){var h,S=uu(ns+"get"+f.uid+as),N=uu(ns+"ro"+f.uid+as),F=uu(ns+"rf"+f.uid+as),V=uu(ns+"blkVal"+f.uid+as),J=uu(ns+"dtl"+f.uid+as),ae=null,re=null,ge;function tt(lt,ir){var Ut=ge.act;try{ge.act=lt,lt&&lt[J]&&(Mn(lt[J],function(br){br.clr(lt)}),lt[J]=[]),ir({cfg:f.cfg,set:f.set.bind(f),setDf:f[zd].bind(f),ref:f.ref.bind(f),rdOnly:f[ua].bind(f)})}catch(br){var gr=f[ci];throw gr&&gr[Bd](1,107,Ct(br)),br}finally{ge.act=Ut||null}}function bt(){if(ae){var lt=ae;ae=null,re&&re[jv](),re=null;var ir=[];if(Mn(lt,function(Ut){if(Ut&&(Ut[J]&&(Mn(Ut[J],function(gr){gr.clr(Ut)}),Ut[J]=null),Ut.fn))try{tt(Ut,Ut.fn)}catch(gr){ir[Ii](gr)}}),ae)try{bt()}catch(Ut){ir[Ii](Ut)}ir[dt]>0&&zp("Watcher error(s): ",ir)}}function Jt(lt){if(lt&&lt.h[dt]>0){ae||(ae=[]),re||(re=Ei(function(){re=null,bt()},0));for(var ir=0;ir<lt.h[dt];ir++){var Ut=lt.h[ir];Ut&&Yu(ae,Ut)===-1&&ae[Ii](Ut)}}}function ot(lt,ir){if(lt){var Ut=lt[J]=lt[J]||[];Yu(Ut,ir)===-1&&Ut[Ii](ir)}}return ge=(h={prop:S,ro:N,rf:F},h[Ti]=V,h[Pm]=f,h.add=Jt,h[lu]=bt,h.use=tt,h.trk=ot,h),ge}function Ul(f,h){var S={fn:h,rm:function(){S.fn=null,f=null,h=null}};return Yr(S,"toJSON",{v:function(){return"WatcherHandler"+(S.fn?"":"[X]")}}),f.use(S,h),S}function ad(f,h,S){var N,F=ec(h);if(F)return F;var V=di("dyncfg",!0),J=h&&S!==!1?h:Oi(h),ae;function re(){ae[lu]()}function ge(gr,br,At){try{gr=ba(ae,gr,br,At)}catch(En){rs(f,br,"Setting value",En)}return gr[br]}function tt(gr){return Ul(ae,gr)}function bt(gr,br){ae.use(null,function(At){var En=ae.upd;try{Pr(br)||(ae.upd=br),gr(At)}finally{ae.upd=En}})}function Jt(gr,br){var At;return nd(ae,gr,br,(At={},At[0]=!0,At))[br]}function ot(gr,br){var At;return nd(ae,gr,br,(At={},At[1]=!0,At))[br]}function lt(gr,br){var At;return nd(ae,gr,br,(At={},At[2]=!0,At))[br]}function ir(gr,br){return br&&Wt(br,function(At,En){yu(Ut,gr,At,En)}),gr}var Ut=(N={uid:null,cfg:J},N[ci]=f,N[lu]=re,N.set=ge,N[zd]=ir,N[Wn]=tt,N.ref=Jt,N[ua]=ot,N[Ti]=lt,N._block=bt,N);return Yr(Ut,"uid",{c:!1,e:!1,w:!1,v:V}),ae=tp(Ut),Wa(ae,J,"config","Creating"),Ut}function jl(f,h){f?(f[xs](h),f[Bd](2,108,h)):ki(h)}function Ro(f,h,S,N){var F=ad(S,f||{},N);return h&&F[zd](F.cfg,h),F}function Ja(f,h,S){var N=f[ca]||f;return N.cfg&&(N.cfg===f||N.cfg[ca]===N)?N[Wn](h):(jl(S,Fl+Ct(f)),Ro(f,null,S)[Wn](h))}var qc=null;function qv(){var f=pn("Microsoft");return f&&(qc=f.ApplicationInsights),qc}function rc(f){var h=qc;return!h&&f.disableDbgExt!==!0&&(h=qc||qv()),h?h.ChromeDbgExt:null}var nc,is="warnToConsole",Yl="AI (Internal): ",Am="AI: ",rp="AITR_",$l={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},ac=(nc={},nc[0]=null,nc[1]="errorToConsole",nc[2]=is,nc[3]="debugToConsole",nc);function Gp(f){return f?'"'+f[du](/\"/g,vn)+'"':vn}function Bv(f,h){var S=Io();if(S){var N="log";S[f]&&(N=f),Tr(S[N])&&S[N](h)}}var ic=function(){function f(h,S,N,F){N===void 0&&(N=!1);var V=this;V[Gd]=h,V[xa]=(N?Am:Yl)+h;var J=vn;Os()&&(J=Qi().stringify(F));var ae=(S?" message:"+Gp(S):vn)+(F?" props:"+Gp(J):vn);V[xa]+=ae}return f.dataType="MessageData",f}();function zv(f,h){return(f||{})[ci]||new ql(h)}var ql=function(){function f(h){this.identifier="DiagnosticLogger",this.queue=[];var S=0,N={},F,V,J,ae,re;Eo(f,this,function(ge){re=bt(h||{}),ge.consoleLoggingLevel=function(){return F},ge[Bd]=function(lt,ir,Ut,gr,br){br===void 0&&(br=!1);var At=new ic(ir,Ut,br,gr);if(ae)throw Ct(At);var En=ac[lt]||is;if(Pr(At[xa]))ot("throw"+(lt===1?"Critical":"Warning"),At);else{if(br){var mc=+At[Gd];!N[mc]&&F>=lt&&(ge[En](At[xa]),N[mc]=!0)}else F>=lt&&ge[En](At[xa]);tt(lt,At)}},ge.debugToConsole=function(lt){Bv("debug",lt),ot("warning",lt)},ge[xs]=function(lt){Bv("warn",lt),ot("warning",lt)},ge.errorToConsole=function(lt){Bv("error",lt),ot("error",lt)},ge.resetInternalMessageCount=function(){S=0,N={}},ge[Bp]=tt,ge[fu]=function(lt){re&&re.rm(),re=null};function tt(lt,ir){if(!Jt()){var Ut=!0,gr=rp+ir[Gd];if(N[gr]?Ut=!1:N[gr]=!0,Ut&&(lt<=V&&(ge.queue[Ii](ir),S++,ot(lt===1?"error":"warn",ir)),S===J)){var br="Internal events throttle limit per PageView reached for this app.",At=new ic(23,br,!1);ge.queue[Ii](At),lt===1?ge.errorToConsole(br):ge[xs](br)}}}function bt(lt){return Ja(Ro(lt,$l,ge).cfg,function(ir){var Ut=ir.cfg;F=Ut[ph],V=Ut.loggingLevelTelemetry,J=Ut.maxMessageLimit,ae=Ut.enableDebug})}function Jt(){return S>=J}function ot(lt,ir){var Ut=rc(h||{});Ut&&Ut[xl]&&Ut[xl](lt,ir)}})}return f.__ieDyn=1,f}();function np(f){return f||new ql}function to(f,h,S,N,F,V){V===void 0&&(V=!1),np(f)[Bd](h,S,N,F,V)}function Vp(){for(var f=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],h=vn,S,N=0;N<4;N++)S=xo(),h+=f[S&15]+f[S>>4&15]+f[S>>8&15]+f[S>>12&15]+f[S>>16&15]+f[S>>20&15]+f[S>>24&15]+f[S>>28&15];var F=f[8+(xo()&3)|0];return Is(h,0,8)+Is(h,9,4)+"4"+Is(h,13,3)+F+Is(h,16,3)+Is(h,19,12)}var Rm=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,id="00",Kp="ff",ap="00000000000000000000000000000000",Bc="0000000000000000",od=1;function oc(f,h,S){return f&&f[dt]===h&&f!==S?!!f.match(/^[\da-f]*$/i):!1}function Us(f,h,S){return oc(f,h)?f:S}function zc(f){(isNaN(f)||f<0||f>255)&&(f=1);for(var h=f.toString(16);h[dt]<2;)h="0"+h;return h}function Hv(f,h,S,N){var F;return F={},F[qp]=oc(N,2,Kp)?N:id,F[qu]=Hc(f)?f:Vp(),F[Rc]=op(h)?h:Tl(Vp(),16),F.traceFlags=S>=0&&S<=255?S:1,F}function ip(f,h){var S;if(!f||(kt(f)&&(f=f[0]||""),!f||!Ve(f)||f[dt]>8192))return null;if(f.indexOf(",")!==-1){var N=f[Vi](",");f=N[h>0&&N[dt]>h?h:0]}var F=Rm.exec(oi(f));return!F||F[1]===Kp||F[2]===ap||F[3]===Bc?null:(S={version:(F[1]||vn)[cu](),traceId:(F[2]||vn)[cu](),spanId:(F[3]||vn)[cu]()},S[Al]=parseInt(F[4],16),S)}function Hc(f){return oc(f,32,ap)}function op(f){return oc(f,16,Bc)}function js(f){return!(!f||!oc(f[qp],2,Kp)||!oc(f[qu],32,ap)||!oc(f[Rc],16,Bc)||!oc(zc(f[Al]),2))}function Br(f){return js(f)?(f[Al]&od)===od:!1}function sc(f){if(f){var h=zc(f[Al]);oc(h,2)||(h="01");var S=f[qp]||id;return S!=="00"&&S!=="ff"&&(S=id),"".concat(S.toLowerCase(),"-").concat(Us(f.traceId,32,ap).toLowerCase(),"-").concat(Us(f.spanId,16,Bc).toLowerCase(),"-").concat(h.toLowerCase())}return""}function la(f){var h="traceparent",S=ip(Do(h),f);return S||(S=ip(ed(h),f)),S}function sp(f){var h=f.getElementsByTagName("script"),S=[];return Mn(h,function(N){var F=N[Vf]("src");if(F){var V=N[Vf]("crossorigin"),J=N.hasAttribute("async")===!0,ae=N.hasAttribute("defer")===!0,re=N[Vf]("referrerpolicy"),ge={url:F};V&&(ge.crossOrigin=V),J&&(ge.async=J),ae&&(ge.defer=ae),re&&(ge.referrerPolicy=re),S[Ii](ge)}}),S}var sd="on",Gc="attachEvent",uc="addEventListener",Za="detachEvent",ud="removeEventListener",Zn="events";di("aiEvtPageHide"),di("aiEvtPageShow");var vr=/\.[\.]+/g,Ys=/[\.]+$/,hn=1,os=ts("events"),cc=/^([^.]*)(?:\.(.+)|)/;function lc(f){return f&&f[du]?f[du](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,vn):f}function $s(f,h){var S;if(h){var N=vn;kt(h)?(N=vn,Mn(h,function(V){V=lc(V),V&&(V[0]!=="."&&(V="."+V),N+=V)})):N=lc(h),N&&(N[0]!=="."&&(N="."+N),f=(f||vn)+N)}var F=cc.exec(f||vn)||[];return S={},S[Ni]=F[1],S.ns=(F[2]||vn).replace(vr,".").replace(Ys,vn)[Vi](".").sort().join("."),S}function ro(f,h,S){S===void 0&&(S=!0);var N=os.get(f,Zn,{},S),F=N[h];return F||(F=N[h]=[]),F}function Bl(f,h,S,N){f&&h&&h[Ni]&&(f[ud]?f[ud](h[Ni],S,N):f[Za]&&f[Za](sd+h[Ni],S))}function Wp(f,h,S,N){var F=!1;return f&&h&&h[Ni]&&S&&(f[uc]?(f[uc](h[Ni],S,N),F=!0):f[Gc]&&(f[Gc](sd+h[Ni],S),F=!0)),F}function zl(f,h,S,N){for(var F=h[dt];F--;){var V=h[F];V&&(!S.ns||S.ns===V.evtName.ns)&&(!N||N(V))&&(Bl(f,V.evtName,V[Vd],V.capture),h[Ga](F,1))}}function Jp(f,h,S){if(h[Ni])zl(f,ro(f,h[Ni]),h,S);else{var N=os.get(f,Zn,{});Wt(N,function(F,V){zl(f,V,h,S)}),ga(N)[dt]===0&&os.kill(f,Zn)}}function Hl(f,h){var S;return h?(kt(h)?S=[f].concat(h):S=[f,h],S=$s("xx",S).ns[Vi](".")):S=f,S}function Vc(f,h,S,N,F){var V;F===void 0&&(F=!1);var J=!1;if(f)try{var ae=$s(h,N);if(J=Wp(f,ae,S,F),J&&os.accept(f)){var re=(V={guid:hn++,evtName:ae},V[Vd]=S,V.capture=F,V);ro(f,ae.type)[Ii](re)}}catch{}return J}function up(f,h,S,N,F){if(F===void 0&&(F=!1),f)try{var V=$s(h,N),J=!1;Jp(f,V,function(ae){return V.ns&&!S||ae[Vd]===S?(J=!0,!0):!1}),J||Bl(f,V,S,F)}catch{}}var Hn="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Kc="sampleRate",fa="ProcessLegacy",wu="http.method",cp="https://dc.services.visualstudio.com",cd="/v2/track",da="not_specified",ld="iKey",lp=qd({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),qs="split",wt="length",ss="toLowerCase",us="ingestionendpoint",vi="toString",Gl="push",Wc="removeItem",cs="name",Mi="message",Jc="count",fd="preTriggerDate",Bs="disabled",Vl="interval",Zc="daysOfMonth",Kl="date",fp="getUTCDate",dp="stringify",Zp="pathname",Om="correlationHeaderExcludePatterns",ls="extensionConfig",zs="exceptions",fs="parsedStack",Li="properties",Hs="measurements",bu="sizeInBytes",mi="typeName",Xc="severityLevel",Gv="problemGroup",fc="isManual",Xp="CreateFromInterface",Wl="assembly",Qc="fileName",Jl="hasFullStack",Gs="level",Fi="method",el="line",Zl="duration",dd="receivedResponse";function pa(f,h,S){var N=h[wt],F=Vs(f,h);if(F[wt]!==N){for(var V=0,J=F;S[J]!==void 0;)V++,J=_o(F,0,147)+Ql(V);F=J}return F}function Vs(f,h){var S;return h&&(h=oi(je(h)),h[wt]>150&&(S=_o(h,0,150),to(f,2,57,"name is too long.  It has been truncated to 150 characters.",{name:h},!0))),S||h}function va(f,h,S){S===void 0&&(S=1024);var N;return h&&(S=S||1024,h=oi(je(h)),h[wt]>S&&(N=_o(h,0,S),to(f,2,61,"string value is too long. It has been truncated to "+S+" characters.",{value:h},!0))),N||h}function pd(f,h){return Xl(f,h,2048,66)}function Eu(f,h){var S;return h&&h[wt]>32768&&(S=_o(h,0,32768),to(f,2,56,"message is too long, it has been truncated to 32768 characters.",{message:h},!0)),S||h}function vd(f,h){var S;if(h){var N=""+h;N[wt]>32768&&(S=_o(N,0,32768),to(f,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:h},!0))}return S||h}function Ra(f,h){if(h){var S={};Wt(h,function(N,F){if(Bn(F)&&Os())try{F=Qi()[dp](F)}catch(V){to(f,2,49,"custom property is not valid",{exception:V},!0)}F=va(f,F,8192),N=pa(f,N,S),S[N]=F}),h=S}return h}function ma(f,h){if(h){var S={};Wt(h,function(N,F){N=pa(f,N,S),S[N]=F}),h=S}return h}function Qp(f,h){return h&&Xl(f,h,128,69)[vi]()}function Xl(f,h,S,N){var F;return h&&(h=oi(je(h)),h[wt]>S&&(F=_o(h,0,S),to(f,2,N,"input is too long, it has been truncated to "+S+" characters.",{data:h},!0))),F||h}function Ql(f){var h="00"+f;return Is(h,h[wt]-3)}var Tu=ni()||{},Vv=0,Kv=[null,null,null,null,null];function ef(f){var h=Vv,S=Kv,N=S[h];return Tu.createElement?S[h]||(N=S[h]=Tu.createElement("a")):N={host:Wv(f,!0)},N.href=f,h++,h>=S[wt]&&(h=0),Vv=h,N}function ev(f){var h,S=ef(f);return S&&(h=S.href),h}function tf(f){var h,S=ef(f);return S&&(h=S[Zp]),h}function tv(f,h){return f?f.toUpperCase()+" "+h:h}function Wv(f,h){var S=rf(f,h)||"";if(S){var N=S.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(N!=null&&N[wt]>3&&Ve(N[2])&&N[2][wt]>0)return N[2]+(N[3]||"")}return S}function rf(f,h){var S=null;if(f){var N=f.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(N!=null&&N[wt]>2&&Ve(N[2])&&N[2][wt]>0&&(S=N[2]||"",h&&N[wt]>2)){var F=(N[1]||"")[ss](),V=N[3]||"";(F==="http"&&V===":80"||F==="https"&&V===":443")&&(V=""),S+=V}}return S}var Jv=[cp+cd,"https://breeze.aimon.applicationinsights.io"+cd,"https://dc-int.services.visualstudio.com"+cd],Iu="cid-v1:";function tl(f){return Yu(Jv,f[ss]())!==-1}function pp(f){Iu=f}function ds(){return Iu}function md(f,h,S){if(!h||f&&f.disableCorrelationHeaders)return!1;if(f&&f[Om]){for(var N=0;N<f.correlationHeaderExcludePatterns[wt];N++)if(f[Om][N].test(h))return!1}var F=ef(h).host[ss]();if(F&&(Ha(F,":443")!==-1||Ha(F,":80")!==-1)&&(F=(rf(h,!0)||"")[ss]()),(!f||!f.enableCorsCorrelation)&&F&&F!==S)return!1;var V=f&&f.correlationHeaderDomains;if(V){var J;if(Mn(V,function(ge){var tt=new RegExp(ge.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));J=J||tt.test(F)}),!J)return!1}var ae=f&&f.correlationHeaderExcludedDomains;if(!ae||ae[wt]===0)return!0;for(var N=0;N<ae[wt];N++){var re=new RegExp(ae[N].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(re.test(F))return!1}return F&&F[wt]>0}function nf(f){if(f){var h=Oo(f,lp[1]);if(h&&h!==Iu)return h}}function Oo(f,h){if(f)for(var S=f[qs](","),N=0;N<S[wt];++N){var F=S[N][qs]("=");if(F[wt]===2&&F[0]===h)return F[1]}}function rl(f,h,S,N){var F,V=N,J=N;if(h&&h[wt]>0){var ae=ef(h);if(F=ae.host,!V)if(ae[Zp]!=null){var re=ae.pathname[wt]===0?"/":ae[Zp];re.charAt(0)!=="/"&&(re="/"+re),J=ae[Zp],V=va(f,S?S+" "+re:re)}else V=va(f,h)}else F=N,V=N;return{target:F,name:V,data:J}}function Zv(){var f=hr();if(f&&f.now&&f.timing){var h=f.now()+f.timing.navigationStart;if(h>0)return h}return Qr()}function nl(f,h){var S=null;return f!==0&&h!==0&&!nt(f)&&!nt(h)&&(S=h-f),S}function km(f,h){var S=f||{};return{getName:function(){return S[cs]},setName:function(N){h&&h.setName(N),S[cs]=N},getTraceId:function(){return S.traceID},setTraceId:function(N){h&&h.setTraceId(N),Hc(N)&&(S.traceID=N)},getSpanId:function(){return S.parentID},setSpanId:function(N){h&&h.setSpanId(N),op(N)&&(S.parentID=N)},getTraceFlags:function(){return S.traceFlags},setTraceFlags:function(N){h&&h.setTraceFlags(N),S.traceFlags=N}}}var af=Cl({LocalStorage:0,SessionStorage:1}),Xv=Cl({AI:0,AI_AND_W3C:1,W3C:2}),rv=Cl({Normal:1,Critical:2}),Nu=void 0,Du=void 0,al="";function ps(){return hi()?Ks(af.LocalStorage):null}function Ks(f){try{if(nt(Hi()))return null;var h=new Date()[vi](),S=pn(f===af.LocalStorage?"localStorage":"sessionStorage"),N=al+h;S.setItem(N,h);var F=S.getItem(N)!==h;if(S[Wc](N),!F)return S}catch{}return null}function of(){return il()?Ks(af.SessionStorage):null}function hd(){Nu=!1,Du=!1}function _d(f){al=f||""}function sf(){Nu=hi(!0),Du=il(!0)}function hi(f){return(f||Nu===void 0)&&(Nu=!!Ks(af.LocalStorage)),Nu}function uf(f,h){var S=ps();if(S!==null)try{return S.getItem(h)}catch(N){Nu=!1,to(f,2,1,"Browser failed read of local storage. "+To(N),{exception:Ct(N)})}return null}function Qv(f,h,S){var N=ps();if(N!==null)try{return N.setItem(h,S),!0}catch(F){Nu=!1,to(f,2,3,"Browser failed write to local storage. "+To(F),{exception:Ct(F)})}return!1}function Mm(f,h){var S=ps();if(S!==null)try{return S[Wc](h),!0}catch(N){Nu=!1,to(f,2,5,"Browser failed removal of local storage item. "+To(N),{exception:Ct(N)})}return!1}function il(f){return(f||Du===void 0)&&(Du=!!Ks(af.SessionStorage)),Du}function Lm(){var f=[];return il()&&Wt(pn("sessionStorage"),function(h){f[Gl](h)}),f}function ko(f,h){var S=of();if(S!==null)try{return S.getItem(h)}catch(N){Du=!1,to(f,2,2,"Browser failed read of session storage. "+To(N),{exception:Ct(N)})}return null}function Cu(f,h,S){var N=of();if(N!==null)try{return N.setItem(h,S),!0}catch(F){Du=!1,to(f,2,4,"Browser failed write to session storage. "+To(F),{exception:Ct(F)})}return!1}function ol(f,h){var S=of();if(S!==null)try{return S[Wc](h),!0}catch(N){Du=!1,to(f,2,6,"Browser failed removal of session storage item. "+To(N),{exception:Ct(N)})}return!1}var em="appInsightsThrottle",vp=function(){function f(h,S){var N=this,F,V,J,ae,re,ge,tt,bt=!1,Jt=!1;lt(),N._getDbgPlgTargets=function(){return[tt]},N.getConfig=function(){return J},N.canThrottle=function(Re){var vt=gf(Re),Bt=ir(Re);return br(Bt,F,vt)},N.isTriggered=function(Re){return Id(Re)},N.isReady=function(){return bt},N.flush=function(Re){try{var vt=yf(Re);if(vt&&vt[wt]>0){var Bt=vt.slice(0);return tt[Re]=[],Mn(Bt,function(en){ot(en.msgID,en[Mi],en.severity,!1)}),!0}}catch{}return!1},N.flushAll=function(){try{if(tt){var Re=!0;return Wt(tt,function(vt){var Bt=N.flush(parseInt(vt));Re=Re&&Bt}),Re}}catch{}return!1},N.onReadyState=function(Re,vt){return vt===void 0&&(vt=!0),bt=nt(Re)?!0:Re,bt&&vt?N.flushAll():null},N.sendMessage=function(Re,vt,Bt){return ot(Re,vt,Bt,!0)};function ot(Re,vt,Bt,en){if(bt){var Ea=_f(Re);if(!Ea)return;var Ta=ir(Re),Xn=gf(Re),_i=br(Ta,F,Xn),_s=!1,pl=0,om=Id(Re);try{_i&&!om?(pl=Math.min(Ta.limit.maxSendNumber,Xn[Jc]+1),Xn[Jc]=0,_s=!0,re[Re]=!0,Xn[fd]=new Date):(re[Re]=_i,Xn[Jc]+=1);var Ru=At(Re);dl(V,Ru,Xn);for(var Nd=0;Nd<pl;Nd++)Td(Re,V,vt,Bt)}catch{}return{isThrottled:_s,throttleNum:pl}}else if(en){var Ym=yf(Re);Ym[Gl]({msgID:Re,message:vt,severity:Bt})}return null}function lt(){V=zv(h),re={},ae={},tt={},J={},Ut(109),ge=Ci(S)?S:"",h.addUnloadHook(Ja(h.config,function(Re){var vt=Re.cfg;F=hi();var Bt=vt.throttleMgrCfg||{};Wt(Bt,function(en,Ea){Ut(parseInt(en),Ea)})}))}function ir(Re){return J[Re]||J[109]}function Ut(Re,vt){var Bt,en;try{var Ea=vt||{},Ta={};Ta[Bs]=!!Ea[Bs];var Xn=Ea[Vl]||{};Jt=(Xn==null?void 0:Xn.daysOfMonth)&&(Xn==null?void 0:Xn.daysOfMonth[wt])>0,Ta[Vl]=gr(Xn);var _i={samplingRate:((Bt=Ea.limit)===null||Bt===void 0?void 0:Bt.samplingRate)||100,maxSendNumber:((en=Ea.limit)===null||en===void 0?void 0:en.maxSendNumber)||1};Ta.limit=_i,J[Re]=Ta}catch{}}function gr(Re){Re=Re||{};var vt=Re==null?void 0:Re.monthInterval,Bt=Re==null?void 0:Re.dayInterval;return nt(vt)&&nt(Bt)&&(Re.monthInterval=3,Jt||(Re[Zc]=[28],Jt=!0)),Re={monthInterval:Re==null?void 0:Re.monthInterval,dayInterval:Re==null?void 0:Re.dayInterval,daysOfMonth:Re==null?void 0:Re.daysOfMonth},Re}function br(Re,vt,Bt){if(Re&&!Re[Bs]&&vt&&Ci(Bt)){var en=Zs(),Ea=Bt[Kl],Ta=Re[Vl],Xn=1;if(Ta!=null&&Ta.monthInterval){var _i=(en.getUTCFullYear()-Ea.getUTCFullYear())*12+en.getUTCMonth()-Ea.getUTCMonth();Xn=hf(Ta.monthInterval,0,_i)}var _s=1;if(Jt)_s=Yu(Ta[Zc],en[fp]());else if(Ta!=null&&Ta.dayInterval){var pl=Math.floor((en.getTime()-Ea.getTime())/864e5);_s=hf(Ta.dayInterval,0,pl)}return Xn>=0&&_s>=0}return!1}function At(Re,vt){var Bt=Ci(vt)?vt:"";return Re?em+Bt+"-"+Re:null}function En(Re){try{if(Re){var vt=new Date;return Re.getUTCFullYear()===vt.getUTCFullYear()&&Re.getUTCMonth()===vt.getUTCMonth()&&Re[fp]()===vt[fp]()}}catch{}return!1}function mc(Re,vt,Bt){try{var en={date:Zs(),count:0};if(Re){var Ea=JSON.parse(Re),Ta={date:Zs(Ea[Kl])||en[Kl],count:Ea[Jc]||en[Jc],preTriggerDate:Ea.preTriggerDate?Zs(Ea[fd]):void 0};return Ta}else return dl(vt,Bt,en),en}catch{}return null}function Zs(Re){try{if(Re){var vt=new Date(Re);if(!isNaN(vt.getDate()))return vt}else return new Date}catch{}return null}function dl(Re,vt,Bt){try{return Qv(Re,vt,oi(JSON[dp](Bt)))}catch{}return!1}function hf(Re,vt,Bt){return Re<=0?1:Bt>=vt&&(Bt-vt)%Re==0?Math.floor((Bt-vt)/Re)+1:-1}function Td(Re,vt,Bt,en){to(vt,en||1,Re,Bt)}function _f(Re){try{var vt=ir(Re);return ks(1e6)<=vt.limit.samplingRate}catch{}return!1}function gf(Re){try{var vt=ae[Re];if(!vt){var Bt=At(Re,ge);vt=mc(uf(V,Bt),V,Bt),ae[Re]=vt}return ae[Re]}catch{}return null}function Id(Re){var vt=re[Re];if(nt(vt)){vt=!1;var Bt=gf(Re);Bt&&(vt=En(Bt[fd])),re[Re]=vt}return re[Re]}function yf(Re){return tt=tt||{},nt(tt[Re])&&(tt[Re]=[]),tt[Re]}}return f}(),tm=";",nv="=";function gd(f){if(!f)return{};var h=f[qs](tm),S=Ir(h,function(F,V){var J=V[qs](nv);if(J[wt]===2){var ae=J[0][ss](),re=J[1];F[ae]=re}return F},{});if(ga(S)[wt]>0){if(S.endpointsuffix){var N=S.location?S.location+".":"";S[us]=S[us]||"https://"+N+"dc."+S.endpointsuffix}S[us]=S[us]||cp,Ko(S[us],"/")&&(S[us]=S[us].slice(0,-1))}return S}var sl={parse:gd},no=function(){function f(h,S,N){var F=this,V=this;V.ver=1,V.sampleRate=100,V.tags={},V[cs]=va(h,N)||da,V.data=S,V.time=cr(new Date),V.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return F.sampleRate===100?4:1},tags:1,data:1}}return f}(),yd=function(){function f(h,S,N,F){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var V=this;V.ver=2,V[cs]=va(h,S)||da,V[Li]=Ra(h,N),V[Hs]=ma(h,F)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.Event",f.dataType="EventData",f}(),ul="<no_method>",Oa="error",ao="stack",cf="stackDetails",rm="errorSrc",nm="message",ha="description";function cl(f,h){var S=f;return S&&!Ve(S)&&(JSON&&JSON[dp]?(S=JSON[dp](f),h&&(!S||S==="{}")&&(Tr(f[vi])?S=f[vi]():S=""+f)):S=""+f+" - (Missing JSON.stringify)"),S||""}function lf(f,h){var S=f;return f&&(S&&!Ve(S)&&(S=f[nm]||f[ha]||S),S&&!Ve(S)&&(S=cl(S,!0)),f.filename&&(S=S+" @"+(f.filename||"")+":"+(f.lineno||"?")+":"+(f.colno||"?"))),h&&h!=="String"&&h!=="Object"&&h!=="Error"&&Ha(S||"",h)===-1&&(S=h+": "+S),S||""}function Fm(f){try{if(Bn(f))return"hasFullStack"in f&&"typeName"in f}catch{}return!1}function am(f){try{if(Bn(f))return"ver"in f&&"exceptions"in f&&"properties"in f}catch{}return!1}function ff(f){return f&&f.src&&Ve(f.src)&&f.obj&&kt(f.obj)}function ka(f){var h=f||"";Ve(h)||(Ve(h[ao])?h=h[ao]:h=""+h);var S=h[qs](`
`);return{src:h,obj:S}}function mp(f){for(var h=[],S=f[qs](`
`),N=0;N<S[wt];N++){var F=S[N];S[N+1]&&(F+="@"+S[N+1],N++),h[Gl](F)}return{src:f,obj:h}}function dc(f){var h=null;if(f)try{if(f[ao])h=ka(f[ao]);else if(f[Oa]&&f[Oa][ao])h=ka(f[Oa][ao]);else if(f.exception&&f.exception[ao])h=ka(f.exception[ao]);else if(ff(f))h=f;else if(ff(f[cf]))h=f[cf];else if(Cs()&&Cs().opera&&f[nm])h=mp(f[Mi]);else if(f.reason&&f.reason[ao])h=ka(f.reason[ao]);else if(Ve(f))h=ka(f);else{var S=f[nm]||f[ha]||"";Ve(f[rm])&&(S&&(S+=`
`),S+=" from "+f[rm]),S&&(h=ka(S))}}catch(N){h=ka(N)}return h||{src:"",obj:null}}function ll(f){var h="";return f&&(f.obj?Mn(f.obj,function(S){h+=S+`
`}):h=f.src||""),h}function Ws(f){var h,S=f.obj;if(S&&S[wt]>0){h=[];var N=0,F=0;Mn(S,function(lt){var ir=lt[vi]();if(Mo.regex.test(ir)){var Ut=new Mo(ir,N++);F+=Ut[bu],h[Gl](Ut)}});var V=32*1024;if(F>V)for(var J=0,ae=h[wt]-1,re=0,ge=J,tt=ae;J<ae;){var bt=h[J][bu],Jt=h[ae][bu];if(re+=bt+Jt,re>V){var ot=tt-ge+1;h.splice(ge,ot);break}ge=J,tt=ae,J++,ae--}}return h}function df(f){var h="";if(f&&(h=f.typeName||f[cs]||"",!h))try{var S=/function (.{1,200})\(/,N=S.exec(f.constructor[vi]());h=N&&N[wt]>1?N[1]:""}catch{}return h}function hp(f){if(f)try{if(!Ve(f)){var h=df(f),S=cl(f,!1);return(!S||S==="{}")&&(f[Oa]&&(f=f[Oa],h=df(f)),S=cl(f,!0)),Ha(S,h)!==0&&h!=="String"?h+":"+S:S}}catch{}return""+(f||"")}var St=function(){function f(h,S,N,F,V,J){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var ae=this;ae.ver=2,am(S)?(ae[zs]=S[zs]||[],ae[Li]=S[Li],ae[Hs]=S[Hs],S[Xc]&&(ae[Xc]=S[Xc]),S.id&&(ae.id=S.id,S[Li].id=S.id),S[Gv]&&(ae[Gv]=S[Gv]),nt(S[fc])||(ae[fc]=S[fc])):(N||(N={}),J&&(N.id=J),ae[zs]=[new xu(h,S,N)],ae[Li]=Ra(h,N),ae[Hs]=ma(h,F),V&&(ae[Xc]=V),J&&(ae.id=J))}return f.CreateAutoException=function(h,S,N,F,V,J,ae,re){var ge,tt=df(V||J||h);return ge={},ge[Mi]=lf(h,tt),ge.url=S,ge.lineNumber=N,ge.columnNumber=F,ge.error=hp(V||J||h),ge.evt=hp(J||h),ge[mi]=tt,ge.stackDetails=dc(ae||V||J),ge.errorSrc=re,ge},f.CreateFromInterface=function(h,S,N,F){var V=S[zs]&&ii(S[zs],function(ae){return xu[Xp](h,ae)}),J=new f(h,Oc(Oc({},S),{exceptions:V}),N,F);return J},f.prototype.toInterface=function(){var h,S=this,N=S.exceptions,F=S.properties,V=S.measurements,J=S.severityLevel,ae=S.problemGroup,re=S.id,ge=S.isManual,tt=N instanceof Array&&ii(N,function(bt){return bt.toInterface()})||void 0;return h={ver:"4.0"},h[zs]=tt,h.severityLevel=J,h.properties=F,h.measurements=V,h.problemGroup=ae,h.id=re,h.isManual=ge,h},f.CreateSimpleException=function(h,S,N,F,V,J){var ae;return{exceptions:[(ae={},ae[Jl]=!0,ae.message=h,ae.stack=V,ae.typeName=S,ae)]}},f.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",f.dataType="ExceptionData",f.formatError=hp,f}(),xu=function(){function f(h,S,N){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var F=this;if(Fm(S))F[mi]=S[mi],F[Mi]=S[Mi],F[ao]=S[ao],F[fs]=S[fs]||[],F[Jl]=S[Jl];else{var V=S,J=V&&V.evt;Ft(V)||(V=V[Oa]||J||V),F[mi]=va(h,df(V))||da,F[Mi]=Eu(h,lf(S||V,F[mi]))||da;var ae=S[cf]||dc(S);F[fs]=Ws(ae),kt(F[fs])&&ii(F[fs],function(re){re[Wl]=va(h,re[Wl]),re[Qc]=va(h,re[Qc])}),F[ao]=vd(h,ll(ae)),F.hasFullStack=kt(F.parsedStack)&&F.parsedStack[wt]>0,N&&(N[mi]=N[mi]||F[mi])}}return f.prototype.toInterface=function(){var h,S=this,N=S[fs]instanceof Array&&ii(S[fs],function(V){return V.toInterface()}),F=(h={id:S.id,outerId:S.outerId,typeName:S[mi],message:S[Mi],hasFullStack:S[Jl],stack:S[ao]},h[fs]=N||void 0,h);return F},f.CreateFromInterface=function(h,S){var N=S[fs]instanceof Array&&ii(S[fs],function(V){return Mo[Xp](V)})||S[fs],F=new f(h,Oc(Oc({},S),{parsedStack:N}));return F},f}(),Mo=function(){function f(h,S){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var N=this;if(N[bu]=0,typeof h=="string"){var F=h;N[Gs]=S,N[Fi]=ul,N[Wl]=oi(F),N[Qc]="",N[el]=0;var V=F.match(f.regex);V&&V[wt]>=5&&(N[Fi]=oi(V[2])||N[Fi],N[Qc]=oi(V[4]),N[el]=parseInt(V[5])||0)}else N[Gs]=h[Gs],N[Fi]=h[Fi],N[Wl]=h[Wl],N[Qc]=h[Qc],N[el]=h[el],N[bu]=0;N.sizeInBytes+=N.method[wt],N.sizeInBytes+=N.fileName[wt],N.sizeInBytes+=N.assembly[wt],N[bu]+=f.baseSize,N.sizeInBytes+=N.level.toString()[wt],N.sizeInBytes+=N.line.toString()[wt]}return f.CreateFromInterface=function(h){return new f(h,null)},f.prototype.toInterface=function(){var h=this;return{level:h[Gs],method:h[Fi],assembly:h[Wl],fileName:h[Qc],line:h[el]}},f.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,f.baseSize=58,f}(),pf=function(){function f(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return f}(),Um=function(){function f(h,S,N,F,V,J,ae,re,ge){this.aiDataContract={ver:1,metrics:1,properties:0};var tt=this;tt.ver=2;var bt=new pf;bt[Jc]=F>0?F:void 0,bt.max=isNaN(J)||J===null?void 0:J,bt.min=isNaN(V)||V===null?void 0:V,bt[cs]=va(h,S)||da,bt.value=N,bt.stdDev=isNaN(ae)||ae===null?void 0:ae,tt.metrics=[bt],tt[Li]=Ra(h,re),tt[Hs]=ma(h,ge)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",f.dataType="MetricData",f}(),vf="";function Sd(f,h){return h===void 0&&(h=!1),f==null?h:f.toString()[ss]()==="true"}function Lo(f){(isNaN(f)||f<0)&&(f=0),f=Math.round(f);var h=vf+f%1e3,S=vf+Math.floor(f/1e3)%60,N=vf+Math.floor(f/(1e3*60))%60,F=vf+Math.floor(f/(1e3*60*60))%24,V=Math.floor(f/(1e3*60*60*24));return h=h[wt]===1?"00"+h:h[wt]===2?"0"+h:h,S=S[wt]<2?"0"+S:S,N=N[wt]<2?"0"+N:N,F=F[wt]<2?"0"+F:F,(V>0?V+".":vf)+F+":"+N+":"+S+"."+h}function im(f,h){var S=null;return Mn(f,function(N){if(N.identifier===h)return S=N,-1}),S}function _p(f,h,S,N,F){return!F&&Ve(f)&&(f==="Script error."||f==="Script error")}var gp=function(){function f(h,S,N,F,V,J,ae){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var re=this;re.ver=2,re.id=Qp(h,ae),re.url=pd(h,N),re[cs]=va(h,S)||da,isNaN(F)||(re[Zl]=Lo(F)),re[Li]=Ra(h,V),re[Hs]=ma(h,J)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",f.dataType="PageviewData",f}(),mf=function(){function f(h,S,N,F,V,J,ae,re,ge,tt,bt,Jt){ge===void 0&&(ge="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var ot=this;ot.ver=2,ot.id=S,ot[Zl]=Lo(V),ot.success=J,ot.resultCode=ae+"",ot.type=va(h,ge);var lt=rl(h,N,re,F);ot.data=pd(h,F)||lt.data,ot.target=va(h,lt.target),tt&&(ot.target="".concat(ot.target," | ").concat(tt)),ot[cs]=va(h,lt[cs]),ot[Li]=Ra(h,bt),ot[Hs]=ma(h,Jt)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",f.dataType="RemoteDependencyData",f}(),pc=function(){function f(h,S,N,F,V){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var J=this;J.ver=2,S=S||da,J[Mi]=Eu(h,S),J[Li]=Ra(h,F),J[Hs]=ma(h,V),N&&(J[Xc]=N)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.Message",f.dataType="MessageData",f}(),av=function(){function f(h,S,N,F,V,J,ae){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var re=this;re.ver=2,re.url=pd(h,N),re[cs]=va(h,S)||da,re[Li]=Ra(h,V),re[Hs]=ma(h,J),ae&&(re.domProcessing=ae.domProcessing,re[Zl]=ae[Zl],re.networkConnect=ae.networkConnect,re.perfTotal=ae.perfTotal,re[dd]=ae[dd],re.sentRequest=ae.sentRequest)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",f.dataType="PageviewPerformanceData",f}(),Hr=function(){function f(h,S){this.aiDataContract={baseType:1,baseData:1},this.baseType=h,this.baseData=S}return f}(),Js=Cl({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),iv=function(){function f(){}return f.getConfig=function(h,S,N,F){F===void 0&&(F=!1);var V;return N&&h[ls]&&h[ls][N]&&!nt(h[ls][N][S])?V=h[ls][N][S]:V=h[S],nt(V)?F:V},f}();function Pu(f){var h="ai."+f+".";return function(S){return h+S}}var io=Pu("application"),Fn=Pu("device"),wd=Pu("location"),vc=Pu("operation"),fl=Pu("session"),vs=Pu("user"),oo=Pu("cloud"),Fo=Pu("internal"),bd=function(f){Yv(h,f);function h(){return f.call(this)||this}return h}(Qo({applicationVersion:io("ver"),applicationBuild:io("build"),applicationTypeId:io("typeId"),applicationId:io("applicationId"),applicationLayer:io("layer"),deviceId:Fn("id"),deviceIp:Fn("ip"),deviceLanguage:Fn("language"),deviceLocale:Fn("locale"),deviceModel:Fn("model"),deviceFriendlyName:Fn("friendlyName"),deviceNetwork:Fn("network"),deviceNetworkName:Fn("networkName"),deviceOEMName:Fn("oemName"),deviceOS:Fn("os"),deviceOSVersion:Fn("osVersion"),deviceRoleInstance:Fn("roleInstance"),deviceRoleName:Fn("roleName"),deviceScreenResolution:Fn("screenResolution"),deviceType:Fn("type"),deviceMachineName:Fn("machineName"),deviceVMName:Fn("vmName"),deviceBrowser:Fn("browser"),deviceBrowserVersion:Fn("browserVersion"),locationIp:wd("ip"),locationCountry:wd("country"),locationProvince:wd("province"),locationCity:wd("city"),operationId:vc("id"),operationName:vc("name"),operationParentId:vc("parentId"),operationRootId:vc("rootId"),operationSyntheticSource:vc("syntheticSource"),operationCorrelationVector:vc("correlationVector"),sessionId:fl("id"),sessionIsFirst:fl("isFirst"),sessionIsNew:fl("isNew"),userAccountAcquisitionDate:vs("accountAcquisitionDate"),userAccountId:vs("accountId"),userAgent:vs("userAgent"),userId:vs("id"),userStoreRegion:vs("storeRegion"),userAuthUserId:vs("authUserId"),userAnonymousUserAcquisitionDate:vs("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:vs("authUserAcquisitionDate"),cloudName:oo("name"),cloudRole:oo("role"),cloudRoleVer:oo("roleVer"),cloudRoleInstance:oo("roleInstance"),cloudEnvironment:oo("environment"),cloudLocation:oo("location"),cloudDeploymentUnit:oo("deploymentUnit"),internalNodeName:Fo("nodeName"),internalSdkVersion:Fo("sdkVersion"),internalAgentVersion:Fo("agentVersion"),internalSnippet:Fo("snippet"),internalSdkSrc:Fo("sdkSrc")}));function yp(f,h,S,N,F,V){var J;S=va(N,S)||da,(nt(f)||nt(h)||nt(S))&&wr("Input doesn't contain all required fields");var ae="";f[ld]&&(ae=f[ld],delete f[ld]);var re=(J={},J[cs]=S,J.time=cr(new Date),J.iKey=ae,J.ext=V||{},J.tags=[],J.data={},J.baseType=h,J.baseData=f,J);return nt(F)||Wt(F,function(ge,tt){re.data[ge]=tt}),re}var ov=function(){function f(){}return f.create=yp,f}(),ms={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},sv=new bd;function Ed(f){var h=null;if(Tr(Event))h=new Event(f);else{var S=ni();S&&S.createEvent&&(h=S.createEvent("Event"),h.initEvent(f,!0,!0))}return h}function uv(f,h){up(f,null,null,h)}function hs(f){var h=ni(),S=on(),N=!1,F=[],V=1;S&&!nt(S.onLine)&&!S.onLine&&(V=2);var J=0,ae=Jt(),re=Hl(di("OfflineListener"),f);try{if(tt(Cs())&&(N=!0),h){var ge=h.body||h;ge.ononline&&tt(ge)&&(N=!0)}}catch{N=!1}function tt(At){var En=!1;return At&&(En=Vc(At,"online",ir,re),En&&Vc(At,"offline",Ut,re)),En}function bt(){return ae}function Jt(){return!(J===2||V===2)}function ot(){var At=Jt();ae!==At&&(ae=At,Mn(F,function(En){var mc={isOnline:ae,rState:V,uState:J};try{En(mc)}catch{}}))}function lt(At){J=At,ot()}function ir(){V=1,ot()}function Ut(){V=2,ot()}function gr(){var At=Cs();if(At&&N){if(uv(At,re),h){var En=h.body||h;Pr(En.ononline)||uv(En,re)}N=!1}}function br(At){return F[Gl](At),{rm:function(){var En=F.indexOf(At);if(En>-1)return F.splice(En,1)}}}return{isOnline:bt,isListening:function(){return N},unload:gr,addListener:br,setOnlineState:lt}}var jm="AppInsightsPropertiesPlugin",Au="AppInsightsChannelPlugin",cv="ApplicationInsightsAnalytics";e.AnalyticsPluginIdentifier=cv,e.BreezeChannelIdentifier=Au,e.ConfigurationManager=iv,e.ConnectionStringParser=sl,e.ContextTagKeys=bd,e.CtxTagKeys=sv,e.DEFAULT_BREEZE_ENDPOINT=cp,e.DEFAULT_BREEZE_PATH=cd,e.Data=Hr,e.DisabledPropertyName=Hn,e.DistributedTracingModes=Xv,e.Envelope=no,e.Event=yd,e.EventPersistence=rv,e.Exception=St,e.Extensions=ms,e.HttpMethod=wu,e.Metric=Um,e.PageView=gp,e.PageViewPerformance=av,e.ProcessLegacy=fa,e.PropertiesPluginIdentifier=jm,e.RemoteDependencyData=mf,e.RequestHeaders=lp,e.SampleRate=Kc,e.SeverityLevel=Js,e.TelemetryItemCreator=ov,e.ThrottleMgr=vp,e.Trace=pc,e.correlationIdCanIncludeCorrelationHeader=md,e.correlationIdGetCorrelationContext=nf,e.correlationIdGetCorrelationContextValue=Oo,e.correlationIdGetPrefix=ds,e.correlationIdSetPrefix=pp,e.createDistributedTraceContextFromTrace=km,e.createDomEvent=Ed,e.createOfflineListener=hs,e.createTelemetryItem=yp,e.createTraceParent=Hv,e.dataSanitizeException=vd,e.dataSanitizeId=Qp,e.dataSanitizeInput=Xl,e.dataSanitizeKey=Vs,e.dataSanitizeKeyAndAddUniqueness=pa,e.dataSanitizeMeasurements=ma,e.dataSanitizeMessage=Eu,e.dataSanitizeProperties=Ra,e.dataSanitizeString=va,e.dataSanitizeUrl=pd,e.dateTimeUtilsDuration=nl,e.dateTimeUtilsNow=Zv,e.dsPadNumber=Ql,e.findAllScripts=sp,e.findW3cTraceParent=la,e.formatTraceParent=sc,e.getExtensionByName=im,e.isBeaconApiSupported=No,e.isCrossOriginError=_p,e.isInternalApplicationInsightsEndpoint=tl,e.isSampledFlag=Br,e.isValidSpanId=op,e.isValidTraceId=Hc,e.isValidTraceParent=js,e.msToTimeSpan=Lo,e.parseConnectionString=gd,e.parseTraceParent=ip,e.strNotSpecified=da,e.stringToBoolOrDefault=Sd,e.urlGetAbsoluteUrl=ev,e.urlGetCompleteUrl=tv,e.urlGetPathName=tf,e.urlParseFullHost=rf,e.urlParseHost=Wv,e.urlParseUrl=ef,e.utlCanUseLocalStorage=hi,e.utlCanUseSessionStorage=il,e.utlDisableStorage=hd,e.utlEnableStorage=sf,e.utlGetLocalStorage=uf,e.utlGetSessionStorage=ko,e.utlGetSessionStorageKeys=Lm,e.utlRemoveSessionStorage=ol,e.utlRemoveStorage=Mm,e.utlSetLocalStorage=Qv,e.utlSetSessionStorage=Cu,e.utlSetStoragePrefix=_d})});var Gy=Ld(jg=>{"use strict";Object.defineProperty(jg,"__esModule",{value:!0});jg.TelemetryUtil=void 0;var Hy=class e{static applyReplacements(t,r){for(let n of Object.keys(t))for(let o of r)o.lookup.test(n)&&(o.replacementString!==void 0?t[n]=o.replacementString:delete t[n])}static shouldUseOneDataSystemSDK(t){return t.length===74&&t[32]==="-"&&t[41]==="-"&&t[46]==="-"&&t[51]==="-"&&t[56]==="-"&&t[69]==="-"}static getAdditionalCommonProperties(t){return{"common.os":t.platform,"common.nodeArch":t.architecture,"common.platformversion":(t.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.8"}}static getInstance(){return e._instance||(e._instance=new e),e._instance}};jg.TelemetryUtil=Hy});var zS=Ld((Yg,BS)=>{(function(e,t){typeof Yg=="object"&&typeof BS<"u"?t(Yg):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{})))})(Yg,function(e){"use strict";function t(i,s){return i||s}function r(i,s){return i[s]}var n=void 0,o=null,u="",m="function",y="object",T="prototype",D="__proto__",U="undefined",H="constructor",ne="Symbol",pe="_polyfill",ce="length",ee="name",Q="call",ve="toString",Pe=t(Object),We=r(Pe,T),Ae=t(String),Ze=r(Ae,T),Tt=t(Math),Dt=t(Array),Lt=r(Dt,T),it=r(Lt,"slice");function Ht(i,s){try{return{v:i.apply(this,s)}}catch(l){return{e:l}}}function xr(i,s){var l=Ht(i);return l.e?s:l.v}var oa;function ei(i){return function(s){return typeof s===i}}function Pr(i){var s="[object "+i+"]";return function(l){return!!(l&&xn(l)===s)}}function xn(i){return We[ve].call(i)}function nt(i){return typeof i===U||i===U}function ho(i){return!Bn(i)}function Ve(i){return i===o||nt(i)}function Tr(i){return i===o||!Bn(i)}function Bn(i){return!!i||i!==n}function kt(i){return!oa&&(oa=["string","number","boolean",U,"symbol","bigint"]),i!==y&&oa.indexOf(i)!==-1}var Ft=ei("string"),rt=ei(m);function yn(i){return!i&&Ve(i)?!1:!!i&&typeof i===y}var at=r(Dt,"isArray"),Dc=Pr("Date"),Wt=ei("number"),qi=ei("boolean"),Gt=Pr("Error");function tr(i){return!!(i&&i.then&&rt(i.then))}function Yr(i){return!(!i||xr(function(){return!(i&&0+i)},!i))}var qt=r(Pe,"getOwnPropertyDescriptor");function an(i,s){return!!i&&We.hasOwnProperty[Q](i,s)}var je=t(r(Pe,"hasOwn"),Kn);function Kn(i,s){return an(i,s)||!!qt(i,s)}function Ct(i,s,l){if(i&&yn(i)){for(var v in i)if(je(i,v)&&s[Q](l||i,v,i[v])===-1)break}}var wr={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function ti(i){var s={};if(s[wr.c]=!0,s[wr.e]=!0,i.l){s.get=function(){return i.l.v};var l=qt(i.l,"v");l&&l.set&&(s.set=function(v){i.l.v=v})}return Ct(i,function(v,w){s[wr[v]]=ho(w)?s[wr[v]]:w}),s}var Bi=r(Pe,"defineProperty");function Gr(i,s,l){return Bi(i,s,ti(l))}function Sn(i,s,l,v,w){var I={};return Ct(i,function(A,L){zi(I,A,s?L:A,w),zi(I,L,l?L:A,w)}),v?v(I):I}function zi(i,s,l,v){Bi(i,s,{value:l,enumerable:!0,writable:!!v})}var ga=t(Ae),Ar="[object Error]";function ar(i,s){var l=u,v=We[ve][Q](i);v===Ar&&(i={stack:ga(i.stack),message:ga(i.message),name:ga(i.name)});try{l=JSON.stringify(i,o,s?typeof s=="number"?s:4:n),l=(l?l.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):o)||ga(i)}catch(w){l=" - "+ar(w,s)}return v+": "+l}function pr(i){throw new Error(i)}function $r(i){throw new TypeError(i)}var qf=r(Pe,"freeze");function wn(i){return i}function El(i){return i[D]||o}var Cc=r(Pe,"assign"),bn=r(Pe,"keys");function qa(i){return qf&&Ct(i,function(s,l){(at(l)||yn(l))&&qa(l)}),ur(i)}var ur=t(qf,wn),Pn=t(r(Pe,"getPrototypeOf"),El);function zn(i){return Sn(i,1,0,ur)}function _o(i){return Sn(i,0,0,ur)}function Is(i){var s={};return Ct(i,function(l,v){zi(s,l,v[1]),zi(s,v[0],v[1])}),ur(s)}function xc(i){return Is(i)}var Tl=_o({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),go="__tsUtils$gblCfg",Bo;function On(){var i;return typeof globalThis!==U&&(i=globalThis),!i&&typeof self!==U&&(i=self),!i&&typeof window!==U&&(i=window),!i&&typeof global!==U&&(i=global),i}function yo(){if(!Bo){var i=Ht(On).v||{};Bo=i[go]=i[go]||{}}return Bo}var Ns=ya;function ya(i,s,l){var v=s?s[i]:o;return function(w){var I=(w?w[i]:o)||v;if(I||l){var A=arguments;return(I||l).apply(w,I?it[Q](A,1):A)}$r('"'+ga(i)+'" not defined for '+ar(w))}}function ju(i){return function(s){return s[i]}}var Ds=r(Tt,"max"),Nr=Ns("slice",Ze),Lr=Ns("substring",Ze),ri=ya("substr",Ze,Hi);function Hi(i,s,l){return Ve(i)&&$r("Invalid "+ar(i)),l<0?u:(s=s||0,s<0&&(s=Ds(s+i[ce],0)),nt(l)?Nr(i,s):Nr(i,s,s+l))}function pn(i,s){return Lr(i,0,s)}var ni="_urid",ai;function Cs(){if(!ai){var i=yo();ai=i.gblSym=i.gblSym||{k:{},s:{}}}return ai}var Yd;function on(i){var s={description:ga(i),toString:function(){return ne+"("+i+")"}};return s[pe]=!0,s}function So(i){var s=Cs();if(!je(s.k,i)){var l=on(i),v=bn(s.s).length;l[ni]=function(){return v+"_"+l[ve]()},s.k[i]=l,s.s[l[ni]()]=ga(i)}return s.k[i]}function zo(i){!Yd&&(Yd={});var s,l=Tl[i];return l&&(s=Yd[l]=Yd[l]||on(ne+"."+l)),s}var kn;function Ho(){kn=yo()}function uu(i){var s={};return!kn&&Ho(),s.b=kn.lzy,Bi(s,"v",{configurable:!0,get:function(){var l=i();return kn.lzy||Bi(s,"v",{value:l}),s.b=kn.lzy,l}}),s}function Ba(i){return Bi({toJSON:function(){return i}},"v",{value:i})}var sn="window",Mn;function Yu(i,s){var l;return function(){return!kn&&Ho(),(!l||kn.lzy)&&(l=Ba(Ht(i,s).v)),l.v}}function ii(i){return!kn&&Ho(),(!Mn||i===!1||kn.lzy)&&(Mn=Ba(Ht(On).v||o)),Mn.v}function Ir(i,s){var l;if(!Mn||s===!1?l=ii(s):l=Mn.v,l&&l[i])return l[i];if(i===sn)try{return window}catch{}return o}function sa(){return!!Bf()}var Bf=Yu(Ir,["document"]);function Sa(){return!!Go()}var Go=Yu(Ir,[sn]);function Pc(){return!!Vo()}var Vo=Yu(Ir,["navigator"]),zf=Yu(function(){return!!Ht(function(){return process&&(process.versions||{}).node}).v}),Qr,Il;function za(){return Qr=Ba(Ht(Ir,[ne]).v),Qr}function $d(i){var s=(kn.lzy?0:Qr)||za();return s.v?s.v[i]:n}function oi(){return!!Yp()}function Yp(){return!kn&&Ho(),((kn.lzy?0:Qr)||za()).v}function si(i,s){var l=Tl[i];!kn&&Ho();var v=(kn.lzy?0:Qr)||za();return v.v?v.v[l||i]:s?n:zo(i)}function Nl(i,s){!kn&&Ho();var l=(kn.lzy?0:Qr)||za();return l.v?l.v(i):s?o:on(i)}function Gi(i){return!kn&&Ho(),Il=(kn.lzy?0:Il)||Ba(Ht($d,["for"]).v),(Il.v||So)(i)}function Hf(i){return!!i&&rt(i.next)}function hr(i){return!Tr(i)&&rt(i[si(3)])}var Ko;function Gf(i,s,l){if(i&&(Hf(i)||(!Ko&&(Ko=Ba(si(3))),i=i[Ko.v]?i[Ko.v]():o),Hf(i))){var v=n,w=n;try{for(var I=0;!(w=i.next()).done&&s[Q](l||i,w.value,I,i)!==-1;)I++}catch(A){v={e:A},i.throw&&(w=o,i.throw(v))}finally{try{w&&!w.done&&i.return&&i.return(w)}finally{if(v)throw v.e}}}}function Ha(i,s,l){return i.apply(s,l)}function Ac(i,s){return!nt(s)&&i&&(at(s)?Ha(i.push,i,s):Hf(s)||hr(s)?Gf(s,function(l){i.push(l)}):i.push(s)),i}function Pt(i,s,l){if(i)for(var v=i[ce]>>>0,w=0;w<v&&!(w in i&&s[Q](l||i,i[w],w,i)===-1);w++);}var ui=Ns("indexOf",Lt),$u=Ns("map",Lt);function Dl(i,s,l){return((i?i.slice:o)||it).apply(i,it[Q](arguments,1))}var Uv=Ns("reduce",Lt),Ei=t(r(Pe,"create"),Cl);function Cl(i){if(!i)return{};var s=typeof i;s!==y&&s!==m&&$r("Prototype must be an Object or function: "+ar(i));function l(){}return l[T]=i,new l}var qd;function cu(i,s){var l=Pe.setPrototypeOf||function(v,w){var I;!qd&&(qd=Ba((I={},I[D]=[],I instanceof Array))),qd.v?v[D]=w:Ct(w,function(A,L){return v[A]=L})};return l(i,s)}function Ti(i,s,l){Ht(Gr,[s,ee,{v:i,c:!0,e:!1}]),s=cu(s,l);function v(){this[H]=s,Ht(Gr,[this,ee,{v:i,c:!0,e:!1}])}return s[T]=l===o?Ei(l):(v[T]=l[T],new v),s}function dt(i,s){s&&(i[ee]=s)}function ua(i,s,l){var v=l||Error,w=v[T][ee],I=Error.captureStackTrace;return Ti(i,function(){var A=this,L=arguments;try{Ht(dt,[v,i]);var Y=Ha(v,A,it[Q](L))||A;if(Y!==A){var B=Pn(A);B!==Pn(Y)&&cu(Y,B)}return I&&I(Y,A[H]),s&&s(Y,L),Y}finally{Ht(dt,[v,w])}},v)}function lu(){return(Date.now||xs)()}function xs(){return new Date().getTime()}function Bd(i){return function(l){return Ve(l)&&$r("strTrim called ["+ar(l)+"]"),l&&l.replace&&(l=l.replace(i,u)),l}}var zd=Bd(/^\s+|(?=\s)\s+$/g),Wn=ya("trim",Ze,zd),ci,Hd,Ii;function Ga(i){if(!i||typeof i!==y)return!1;Ii||(Ii=Sa()?Go():!0);var s=!1;if(i!==Ii){Hd||(ci=Function[T][ve],Hd=ci[Q](Pe));try{var l=Pn(i);s=!l,s||(an(l,H)&&(l=l[H]),s=!!(l&&typeof l===m&&ci[Q](l)===Hd))}catch{}}return s}function Pm(i){return i.value&&Vi(i),!0}var jv=[xa,Vi,Pl,xl];function $p(i,s,l,v){var w;return Pt(i,function(I){if(I.k===s)return w=I,-1}),w||(w={k:s,v:s},i.push(w),v(w)),w.v}function fu(i,s,l,v){var w=l.handler,I=l.path?v?l.path.concat(v):l.path:[],A={handler:l.handler,src:l.src,path:I},L=typeof s,Y=!1,B=s===o;B||(s&&L===y?Y=Ga(s):B=kt(L));var X={type:L,isPrim:B,isPlain:Y,value:s,result:s,path:I,origin:l.src,copy:function(le,fe){return fu(i,le,fe?A:l,fe)},copyTo:function(le,fe){return qp(i,le,fe,A)}};return X.isPrim?w&&w[Q](l,X)?X.result:s:$p(i,s,I,function(le){Gr(X,"result",{g:function(){return le.v},s:function(ue){le.v=ue}});for(var fe=0,de=w;!(de||(fe<jv.length?jv[fe++]:Pm))[Q](l,X);)de=o})}function qp(i,s,l,v){if(!Ve(l))for(var w in l)s[w]=fu(i,l[w],v,w);return s}function ph(i,s,l){var v={handler:l,src:s,path:[]};return qp([],i,s,v)}function Gd(i,s){var l={handler:s,src:i};return fu([],i,l)}function xa(i){var s=i.value;if(at(s)){var l=i.result=[];return l.length=s.length,i.copyTo(l,s),!0}return!1}function xl(i){var s=i.value;return Dc(s)?(i.result=new Date(s.getTime()),!0):!1}function Pl(i){return i.type===m}function Vi(i){var s=i.value;if(s&&i.isPlain){var l=i.result={};return i.copyTo(l,s),!0}return!1}function li(i,s){return Pt(s,function(l){ph(i,l)}),i}function du(i,s,l,v,w,I,A){return li(Gd(i)||{},it[Q](arguments))}var Bp=ju(ce),Ni=ya("endsWith",Ze,Vd);function Vd(i,s,l){Ft(i)||$r("'"+ar(i)+"' is not a string");var v=Ft(s)?s:ga(s),w=!nt(l)&&l<i[ce]?l:i[ce];return Lr(i,w-v[ce],w)===v}var qu=Ns("indexOf",Ze),Rc="ref",Al="unref",Vf="hasRef",Kd="enabled";function zp(i,s,l){var v=!0,w=i?s(o):o,I;function A(){return v=!1,w&&w[Al]&&w[Al](),I}function L(){w&&l(w),w=o}function Y(){return w=s(w),v||A(),I}function B(X){!X&&w&&L(),X&&!w&&Y()}return I={cancel:L,refresh:Y},I[Vf]=function(){return w&&w[Vf]?w[Vf]():v},I[Rc]=function(){return v=!0,w&&w[Rc]&&w[Rc](),I},I[Al]=A,I=Bi(I,Kd,{get:function(){return!!w},set:B}),{h:I,dn:function(){w=o}}}function Hp(i,s,l){var v=at(s),w=v?s.length:0,I=(w>0?s[0]:v?n:s)||setTimeout,A=(w>1?s[1]:n)||clearTimeout,L=l[0];l[0]=function(){Y.dn(),Ha(L,n,it[Q](arguments))};var Y=zp(i,function(B){if(B){if(B.refresh)return B.refresh(),B;Ha(A,n,[B])}return Ha(I,n,l)},function(B){Ha(A,n,[B])});return Y.h}function pu(i,s){return Hp(!0,n,it[Q](arguments))}function Wd(i,s){return Hp(!1,n,it[Q](arguments))}var Ps,Bu="constructor",Di="prototype",Rl="function",Kf="_dynInstFuncs",Oc="_isDynProxy",Ki="_dynClass",Yv="_dynCls$",Wo="_dynInstChk",wo=Wo,Wi="_dfOpts",vu="_unknown_",Wf="__proto__",kc="_dyn"+Wf,Mc="__dynProto$Gbl",zu="_dynInstProto",Jf="useBaseInst",Ol="setInstFuncs",Zf=Object,Hu=Zf.getPrototypeOf,Ji=Zf.getOwnPropertyNames,Lc=ii(),bo=Lc[Mc]||(Lc[Mc]={o:(Ps={},Ps[Ol]=!0,Ps[Jf]=!0,Ps),n:1e3});function fi(i){return i&&(i===Zf[Di]||i===Array[Di])}function Jo(i){return fi(i)||i===Function[Di]}function Vr(i){var s;if(i){if(Hu)return Hu(i);var l=i[Wf]||i[Di]||(i[Bu]?i[Bu][Di]:null);s=i[kc]||l,an(i,kc)||(delete i[zu],s=i[kc]=i[zu]||i[kc],i[zu]=l)}return s}function As(i,s){var l=[];if(Ji)l=Ji(i);else for(var v in i)typeof v=="string"&&an(i,v)&&l.push(v);if(l&&l.length>0)for(var w=0;w<l.length;w++)s(l[w])}function Zi(i,s,l){return s!==Bu&&typeof i[s]===Rl&&(l||an(i,s))&&s!==Wf&&s!==Di}function Fc(i){$r("DynamicProto: "+i)}function Uc(i){var s=Ei(null);return As(i,function(l){!s[l]&&Zi(i,l,!1)&&(s[l]=i[l])}),s}function Zo(i,s){for(var l=i.length-1;l>=0;l--)if(i[l]===s)return!0;return!1}function kl(i,s,l,v){function w(Y,B,X){var le=B[X];if(le[Oc]&&v){var fe=Y[Kf]||{};fe[wo]!==!1&&(le=(fe[B[Ki]]||{})[X]||le)}return function(){return le.apply(Y,arguments)}}var I=Ei(null);As(l,function(Y){I[Y]=w(s,l,Y)});for(var A=Vr(i),L=[];A&&!Jo(A)&&!Zo(L,A);)As(A,function(Y){!I[Y]&&Zi(A,Y,!Hu)&&(I[Y]=w(s,A,Y))}),L.push(A),A=Vr(A);return I}function Xo(i,s,l,v){var w=null;if(i&&an(l,Ki)){var I=i[Kf]||Ei(null);if(w=(I[l[Ki]]||Ei(null))[s],w||Fc("Missing ["+s+"] "+Rl),!w[Wo]&&I[wo]!==!1){for(var A=!an(i,s),L=Vr(i),Y=[];A&&L&&!Jo(L)&&!Zo(Y,L);){var B=L[s];if(B){A=B===v;break}Y.push(L),L=Vr(L)}try{A&&(i[s]=w),w[Wo]=1}catch{I[wo]=!1}}}return w}function mu(i,s,l){var v=s[i];return v===l&&(v=Vr(s)[i]),typeof v!==Rl&&Fc("["+i+"] is not a "+Rl),v}function Va(i,s,l,v,w){function I(Y,B){var X=function(){var le=Xo(this,B,Y,X)||mu(B,Y,X);return le.apply(this,arguments)};return X[Oc]=1,X}if(!fi(i)){var A=l[Kf]=l[Kf]||Ei(null);if(!fi(A)){var L=A[s]=A[s]||Ei(null);A[wo]!==!1&&(A[wo]=!!w),fi(L)||As(l,function(Y){Zi(l,Y,!1)&&l[Y]!==v[Y]&&(L[Y]=l[Y],delete l[Y],(!an(i,Y)||i[Y]&&!i[Y][Oc])&&(i[Y]=I(i,Y)))})}}}function Jd(i,s){if(Hu){for(var l=[],v=Vr(s);v&&!Jo(v)&&!Zo(l,v);){if(v===i)return!0;l.push(v),v=Vr(v)}return!1}return!0}function Gu(i,s){return an(i,Di)?i.name||s||vu:((i||{})[Bu]||{}).name||s||vu}function Pa(i,s,l,v){an(i,Di)||Fc("theClass is an invalid class definition.");var w=i[Di];Jd(w,s)||Fc("["+Gu(i)+"] not in hierarchy of ["+Gu(s)+"]");var I=null;an(w,Ki)?I=w[Ki]:(I=Yv+Gu(i,"_")+"$"+bo.n,bo.n++,w[Ki]=I);var A=Pa[Wi],L=!!A[Jf];L&&v&&v[Jf]!==void 0&&(L=!!v[Jf]);var Y=Uc(s),B=kl(w,s,Y,L);l(s,B);var X=!!Hu&&!!A[Ol];X&&v&&(X=!!v[Ol]),Va(w,I,s,Y,X!==!1)}Pa[Wi]=bo.o;var Xf="function",Zd="object",Ml="undefined",Ll="prototype",Xd=Object,$v=Xd[Ll];(ii()||{}).Symbol,(ii()||{}).Reflect;var Vu="hasOwnProperty",Eo=function(i){for(var s,l=1,v=arguments.length;l<v;l++){s=arguments[l];for(var w in s)$v[Vu].call(s,w)&&(i[w]=s[w])}return i},Xi=Cc||Eo,vn=function(i,s){return vn=Xd.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var w in v)v[Vu](w)&&(l[w]=v[w])},vn(i,s)};function Fl(i,s){typeof s!==Xf&&s!==null&&$r("Class extends value "+String(s)+" is not a constructor or null"),vn(i,s);function l(){this.constructor=i}i[Ll]=s===null?Ei(s):(l[Ll]=s[Ll],new l)}function Ku(i,s){for(var l=0,v=s.length,w=i.length;l<v;l++,w++)i[w]=s[l];return i}var Wu=zn,Qd=xc,Ci=Wu({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),hu="toLowerCase",Rs="blkVal",cr="length",To="rdOnly",Qo="notify",xi="warnToConsole",Qf="throwInternal",Pi="setDf",_u="watch",un="logger",Ka="apply",Fr="push",pt="splice",Ju="hdlr",Io="cancel",Os="initialize",Qi="identifier",gu="removeNotificationListener",Ai="addNotificationListener",qr="isInitialized",No="instrumentationKey",Ur="INACTIVE",Do="value",ed="getNotifyMgr",Co="getPlugin",An="name",eo="iKey",es="time",wa="processNext",Aa="getProcessTelContext",jc="pollInternalLogs",Zu="enabled",td="stopPollingInternalLogs",ks="unload",xo="onComplete",Po="version",Xu="loggingLevelConsole",Ao="createNew",Ln="teardown",rd="messageId",Qu="message",Ms="isAsync",di="diagLog",ts="_doTeardown",Ls="update",Ri="getNext",Yc="setNextPlugin",yu="protocol",ca="userAgent",Su="split",Fs="nodeType",Oi="replace",ec="logInternalMessage",cn="type",Jn="handler",ki="status",tc="getResponseHeader",rs="getAllResponseHeaders",ep="isChildEvt",pi="data",$c="getCtx",ba="setCtx",nd="complete",Wa="itemsReceived",ns="urlString",as="sendPOST",tp="headers",Ul="timeout",ad="setRequestHeader",jl="traceId",Ro="spanId",Ja="traceFlags",qc;function qv(i,s){qc||(qc=ua("AggregationError",function(v,w){w[cr]>1&&(v.errors=w[1])}));var l=i||"One or more errors occurred.";throw Pt(s,function(v,w){l+=`
`.concat(w," > ").concat(ar(v))}),new qc(l,s||[])}var rc="Promise",nc="rejected";function is(i,s){return Yl(i,function(l){return s?s({status:"fulfilled",rejected:!1,value:l}):l},function(l){return s?s({status:nc,rejected:!0,reason:l}):l})}function Yl(i,s,l,v){var w=i;try{if(tr(i))(s||l)&&(w=i.then(s,l));else try{s&&(w=s(i))}catch(I){if(l)w=l(I);else throw I}}finally{v&&Am(w,v)}return w}function Am(i,s){var l=i;return s&&(tr(i)?i.finally?l=i.finally(s):l=i.then(function(v){return s(),v},function(v){throw s(),v}):s()),l}var rp=["pending","resolving","resolved",nc],$l="dispatchEvent",ac;function Gp(i){var s;return i&&i.createEvent&&(s=i.createEvent("Event")),!!s&&s.initEvent}function Bv(i,s,l,v){var w=Bf();!ac&&(ac=Ba(!!Ht(Gp,[w]).v));var I=ac.v?w.createEvent("Event"):v?new Event(s):{};if(l&&l(I),ac.v&&I.initEvent(s,!1,!0),I&&i[$l])i[$l](I);else{var A=i["on"+s];if(A)A(I);else{var L=Ir("console");L&&(L.error||L.log)(s,ar(I))}}}var ic="unhandledRejection",zv=ic.toLowerCase(),ql=10,np;function to(i){return rt(i)?i.toString():ar(i)}function Vp(i,s,l){var v=Dl(arguments,3),w=0,I=!1,A,L=[],Y=!1,B=null,X;function le(Ge,ct){try{Y=!0,B&&B.cancel(),B=null;var Sr=i(function(Zr,Xr){L.push(function(){try{var _n=w===2?Ge:ct,Qt=nt(_n)?A:rt(_n)?_n(A):_n;tr(Qt)?Qt.then(Zr,Xr):_n?Zr(Qt):w===3?Xr(Qt):Zr(Qt)}catch(Yt){Xr(Yt)}}),I&&xe()},v);return Sr}finally{}}function fe(Ge){return le(void 0,Ge)}function de(Ge){var ct=Ge,Sr=Ge;return rt(Ge)&&(ct=function(Zr){return Ge&&Ge(),Zr},Sr=function(Zr){throw Ge&&Ge(),Zr}),le(ct,Sr)}function ue(){return rp[w]}function xe(){if(L.length>0){var Ge=L.slice();L=[],Y=!0,B&&B.cancel(),B=null,s(Ge)}}function he(Ge,ct){return function(Sr){if(w===ct){if(Ge===2&&tr(Sr)){w=1,Sr.then(he(2,1),he(3,1));return}w=Ge,I=!0,A=Sr,xe(),!Y&&Ge===3&&!B&&(B=pu(ke,ql))}}}function ke(){if(!Y)if(Y=!0,zf())process.emit(ic,A,X);else{var Ge=Go()||ii();!np&&(np=Ba(Ht(Ir,[rc+"RejectionEvent"]).v)),Bv(Ge,zv,function(ct){return Gr(ct,"promise",{g:function(){return X}}),ct.reason=A,ct},!!np.v)}}X={then:le,catch:fe,finally:de},Bi(X,"state",{get:ue}),oi()&&(X[si(11)]="IPromise");function Me(){return"IPromise "+ue()+(I?" - "+to(A):"")}return X.toString=Me,function(){rt(l)||$r(rc+": executor is not a function - "+to(l));var ct=he(3,0);try{l.call(X,he(2,0),ct)}catch(Sr){ct(Sr)}}(),X}function Rm(i){return function(s){var l=Dl(arguments,1);return i(function(v,w){try{var I=[],A=1;Gf(s,function(L,Y){L&&(A++,Yl(L,function(B){I[Y]=B,--A===0&&v(I)},w))}),A--,A===0&&v(I)}catch(L){w(L)}},l)}}function id(i){return Ba(function(s){var l=Dl(arguments,1);return i(function(v,w){var I=[],A=1;function L(Y,B){A++,is(Y,function(X){X.rejected?I[B]={status:nc,reason:X.reason}:I[B]={status:"fulfilled",value:X.value},--A===0&&v(I)})}try{at(s)?Pt(s,L):hr(s)?Gf(s,L):$r("Input is not an iterable"),A--,A===0&&v(I)}catch(Y){w(Y)}},l)})}function Kp(i){Pt(i,function(s){try{s()}catch{}})}function ap(i){var s=Wt(i)?i:0;return function(l){pu(function(){Kp(l)},s)}}function Bc(i,s){return Vp(Bc,ap(s),i,s)}var od;function oc(i,s){!od&&(od=Ba(Ht(Ir,[rc]).v||null));var l=od.v;if(!l)return Bc(i);rt(i)||$r(rc+": executor is not a function - "+ar(i));var v=0;function w(){return rp[v]}var I=new l(function(A,L){function Y(X){v=2,A(X)}function B(X){v=3,L(X)}i(Y,B)});return Bi(I,"state",{get:w}),I}var Us;function zc(i){return Vp(zc,Kp,i)}function Hv(i,s){return!Us&&(Us=id(zc)),Us.v(i,s)}var ip;function Hc(i,s){return!ip&&(ip=Ba(oc)),ip.v.call(this,i,s)}var op=Rm(Hc),js=void 0,Br="",sc="channels",la="core",sp="createPerfMgr",sd="disabled",Gc="extensionConfig",uc="extensions",Za="processTelemetry",ud="priority",Zn="eventsSent",vr="eventsDiscarded",Ys="eventsSendRequest",hn="perfEvent",os="offlineEventsStored",cc="offlineBatchSent",lc="offlineBatchDrop",$s="getPerfMgr",ro="domain",Bl="path",Wp="Not dynamic - ",zl=/-([a-z])/g,Jp=/([^\w\d_$])/g,Hl=/^(\d+[\w\d_$])/;function Vc(i){return!Ve(i)}function up(i){var s=i;return s&&Ft(s)&&(s=s[Oi](zl,function(l,v){return v.toUpperCase()}),s=s[Oi](Jp,"_"),s=s[Oi](Hl,function(l,v){return"_"+v})),s}function Hn(i,s){return i&&s?qu(i,s)!==-1:!1}function Kc(i){return i&&i.toISOString()||""}function fa(i){return Gt(i)?i[An]:Br}function wu(i,s,l,v,w){var I=l;return i&&(I=i[s],I!==l&&(!w||w(I))&&(!v||v(l))&&(I=l,i[s]=I)),I}function cp(i,s,l){var v;return i?(v=i[s],!v&&Ve(v)&&(v=nt(l)?{}:l,i[s]=v)):v=nt(l)?{}:l,v}function cd(i,s){var l=null,v=null;return rt(i)?l=i:v=i,function(){var w=arguments;if(l&&(v=l()),v)return v[s][Ka](v,w)}}function da(i,s,l,v,w){i&&s&&l&&(w!==!1||nt(i[s]))&&(i[s]=cd(l,v))}function ld(i,s,l,v){return i&&s&&yn(i)&&at(l)&&Pt(l,function(w){Ft(w)&&da(i,w,s,w,v)}),i}function lp(i){return function(){function s(){var l=this;i&&Ct(i,function(v,w){l[v]=w})}return s}()}function qs(i){return i&&Cc&&(i=Xd(Cc({},i))),i}function wt(i,s,l,v,w,I){var A=arguments,L=A[0]||{},Y=A[cr],B=!1,X=1;for(Y>0&&qi(L)&&(B=L,L=A[X]||{},X++),yn(L)||(L={});X<Y;X++){var le=A[X],fe=at(le),de=yn(le);for(var ue in le){var xe=fe&&ue in le||de&&je(le,ue);if(xe){var he=le[ue],ke=void 0;if(B&&he&&((ke=at(he))||Ga(he))){var Me=L[ue];ke?at(Me)||(Me=[]):Ga(Me)||(Me={}),he=wt(B,Me,he)}he!==void 0&&(L[ue]=he)}}}return L}function ss(i){try{return i.responseText}catch{}return null}function us(i,s){return i?"XDomainRequest,Response:"+ss(i)||"":s}function vi(i,s){return i?"XMLHttpRequest,Status:"+i[ki]+",Response:"+ss(i)||i.response||"":s}function Gl(i,s){return s&&(Wt(s)?i=[s].concat(i):at(s)&&(i=s.concat(i))),i}var Wc="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",cs="withCredentials",Mi="timeout";function Jc(i,s,l,v,w,I){v===void 0&&(v=!1),w===void 0&&(w=!1);function A(Y,B,X){try{Y[B]=X}catch{}}var L=new XMLHttpRequest;return v&&A(L,Wc,v),l&&A(L,cs,l),L.open(i,s,!w),l&&A(L,cs,l),!w&&I&&A(L,Mi,I),L}function fd(i){var s={};if(Ft(i)){var l=Wn(i)[Su](/[\r\n]+/);Pt(l,function(v){if(v){var w=v.indexOf(": ");if(w!==-1){var I=Wn(v.substring(0,w))[hu](),A=Wn(v.substring(w+1));s[I]=A}else s[Wn(v)]=1}})}return s}function Bs(i,s,l){if(!i[l]&&s&&s[tc]){var v=s[tc](l);v&&(i[l]=Wn(v))}return i}var Vl="kill-duration",Zc="kill-duration-seconds",Kl="time-delta-millis";function fp(i,s){var l={};return i[rs]?l=fd(i[rs]()):s&&(l=Bs(l,i,Kl),l=Bs(l,i,Vl),l=Bs(l,i,Zc)),l}var dp="documentMode",Zp="location",Om="console",ls="JSON",zs="crypto",fs="msCrypto",Li="msie",Hs="trident/",bu="XMLHttpRequest",mi=null,Xc=null,Gv=!1,fc=null,Xp=null;function Wl(i,s){var l=!1;if(i){try{if(l=s in i,!l){var v=i[Ll];v&&(l=s in v)}}catch{}if(!l)try{var w=new i;l=!nt(w[s])}catch{}}return l}function Qc(i){if(i&&Gv){var s=Ir("__mockLocation");if(s)return s}return typeof location===Zd&&location?location:Ir(Zp)}function Jl(){return typeof console!==Ml?console:Ir(Om)}function Gs(){return!!(typeof JSON===Zd&&JSON||Ir(ls)!==null)}function Fi(){return Gs()?JSON||Ir(ls):null}function el(){return Ir(zs)}function Zl(){return Ir(fs)}function dd(){var i=Vo();if(i&&(i[ca]!==Xc||mi===null)){Xc=i[ca];var s=(Xc||Br)[hu]();mi=Hn(s,Li)||Hn(s,Hs)}return mi}function pa(i){if(i===void 0&&(i=null),!i){var s=Vo()||{};i=s?(s.userAgent||Br)[hu]():Br}var l=(i||Br)[hu]();if(Hn(l,Li)){var v=Bf()||{};return Math.max(parseInt(l[Su](Li)[1]),v[dp]||0)}else if(Hn(l,Hs)){var w=parseInt(l[Su](Hs)[1]);if(w)return w+4}return null}function Vs(i){return(Xp===null||i===!1)&&(Xp=Pc()&&!!Vo().sendBeacon),Xp}function va(i){var s=!1;try{s=!!Ir("fetch");var l=Ir("Request");s&&i&&l&&(s=Wl(l,"keepalive"))}catch{}return s}function pd(){return fc===null&&(fc=typeof XDomainRequest!==Ml,fc&&Eu()&&(fc=fc&&!Wl(Ir(bu),"withCredentials"))),fc}function Eu(){var i=!1;try{var s=Ir(bu);i=!!s}catch{}return i}var vd=4294967296,Ra=4294967295,ma=123456789,Qp=987654321,Xl=!1,Ql=ma,Tu=Qp;function Vv(i){i<0&&(i>>>=0),Ql=ma+i&Ra,Tu=Qp-i&Ra,Xl=!0}function Kv(){try{var i=lu()&2147483647;Vv((Math.random()*vd^i)+i)}catch{}}function ef(i){var s=0,l=el()||Zl();return l&&l.getRandomValues&&(s=l.getRandomValues(new Uint32Array(1))[0]&Ra),s===0&&dd()&&(Xl||Kv(),s=ev()&Ra),s===0&&(s=Math.floor(vd*Math.random()|0)),i||(s>>>=0),s}function ev(i){Tu=36969*(Tu&65535)+(Tu>>16)&Ra,Ql=18e3*(Ql&65535)+(Ql>>16)&Ra;var s=(Tu<<16)+(Ql&65535)>>>0&Ra|0;return i||(s>>>=0),s}function tf(i){i===void 0&&(i=22);for(var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=ef()>>>0,v=0,w=Br;w[cr]<i;)v++,w+=s.charAt(l&63),l>>>=6,v===5&&(l=(ef()<<2&4294967295|l&3)>>>0,v=0);return w}var tv="3.3.4",Wv="."+tf(6),rf=0;function Jv(i){return i[Fs]===1||i[Fs]===9||!+i[Fs]}function Iu(i,s){var l=s[i.id];if(!l){l={};try{Jv(s)&&Gr(s,i.id,{e:!1,v:l})}catch{}}return l}function tl(i,s){return s===void 0&&(s=!1),up(i+rf+++(s?"."+tv:Br)+Wv)}function pp(i){var s={id:tl("_aiData-"+(i||Br)+"."+tv),accept:function(l){return Jv(l)},get:function(l,v,w,I){var A=l[s.id];return A?A[up(v)]:(I&&(A=Iu(s,l),A[up(v)]=w),w)},kill:function(l,v){if(l&&l[v])try{delete l[v]}catch{}}};return s}function ds(i){return i&&yn(i)&&(i.isVal||i.fb||je(i,"v")||je(i,"mrg")||je(i,"ref")||i.set)}function md(i,s,l){var v,w=l.dfVal||Bn;if(s&&l.fb){var I=l.fb;at(I)||(I=[I]);for(var A=0;A<I[cr];A++){var L=I[A],Y=s[L];if(w(Y)?v=Y:i&&(Y=i.cfg[L],w(Y)&&(v=Y),i.set(i.cfg,ga(L),Y)),w(v))break}}return!w(v)&&w(l.v)&&(v=l.v),v}function nf(i,s,l){var v=l;if(l&&ds(l)&&(v=md(i,s,l)),v){ds(v)&&(v=nf(i,s,v));var w;at(v)?(w=[],w[cr]=v[cr]):Ga(v)&&(w={}),w&&(Ct(v,function(I,A){A&&ds(A)&&(A=nf(i,s,A)),w[I]=A}),v=w)}return v}function Oo(i,s,l,v){var w,I,A,L=v,Y,B,X,le;ds(L)?(w=L.isVal,I=L.set,X=L[To],le=L[Rs],Y=L.mrg,B=L.ref,!B&&nt(B)&&(B=!!Y),A=md(i,s,L)):A=v,le&&i[Rs](s,l);var fe,de=!0,ue=s[l];(ue||!Ve(ue))&&(fe=ue,de=!1,w&&fe!==A&&!w(fe)&&(fe=A,de=!0),I&&(fe=I(fe,A,s),de=fe===A)),de?A?fe=nf(i,s,A):fe=A:(Ga(fe)||at(A))&&Y&&A&&(Ga(A)||at(A))&&Ct(A,function(xe,he){Oo(i,fe,xe,he)}),i.set(s,l,fe),B&&i.ref(s,l),X&&i[To](s,l)}var rl=Gi("[[ai_dynCfg_1]]"),Zv=Gi("[[ai_blkDynCfg_1]]"),nl=Gi("[[ai_frcDynCfg_1]]");function km(i){if(i){var s;if(at(i)?(s=[],s[cr]=i[cr]):Ga(i)&&(s={}),s)return Ct(i,function(l,v){s[l]=km(v)}),s}return i}function af(i){if(i){var s=i[rl]||i;if(s.cfg&&(s.cfg===i||s.cfg[rl]===s))return s}return null}function Xv(i){if(i&&(Ga(i)||at(i)))try{i[Zv]=!0}catch{}return i}function rv(i,s,l){var v=!1;return l&&!i[s.blkVal]&&(v=l[nl],!v&&!l[Zv]&&(v=Ga(l)||at(l))),v}function Nu(i){$r("InvalidAccess:"+i)}var Du=["push","pop","shift","unshift","splice"],al=function(i,s,l,v){i&&i[Qf](3,108,"".concat(l," [").concat(s,"] failed - ")+ar(v))};function ps(i,s,l){at(s)&&Pt(Du,function(v){var w=s[v];s[v]=function(){for(var I=[],A=0;A<arguments.length;A++)I[A]=arguments[A];var L=w[Ka](this,I);return sf(i,s,l,"Patching"),L}})}function Ks(i,s){var l=qt(i,s);return l&&l.get}function of(i,s,l,v){var w={n:l,h:[],trk:function(B){B&&B.fn&&(ui(w.h,B)===-1&&w.h[Fr](B),i.trk(B,w))},clr:function(B){var X=ui(w.h,B);X!==-1&&w.h[pt](X,1)}},I=!0,A=!1;function L(){I&&(A=A||rv(L,i,v),v&&!v[rl]&&A&&(v=sf(i,v,l,"Converting")),I=!1);var B=i.act;return B&&w.trk(B),v}L[i.prop]={chng:function(){i.add(w)}};function Y(B){if(v!==B){L[i.ro]&&!i.upd&&Nu("["+l+"] is read-only:"+ar(s)),I&&(A=A||rv(L,i,v),I=!1);var X=A&&L[i.rf];if(A)if(X){Ct(v,function(fe){v[fe]=B?B[fe]:js});try{Ct(B,function(fe,de){hd(i,v,fe,de)}),B=v}catch(fe){al((i.hdlr||{})[un],l,"Assigning",fe),A=!1}}else v&&v[rl]&&Ct(v,function(fe){var de=Ks(v,fe);if(de){var ue=de[i.prop];ue&&ue.chng()}});if(B!==v){var le=B&&rv(L,i,B);!X&&le&&(B=sf(i,B,l,"Converting")),v=B,A=le}i.add(w)}}Gr(s,w.n,{g:L,s:Y})}function hd(i,s,l,v){if(s){var w=Ks(s,l),I=w&&!!w[i.prop];I?s[l]=v:of(i,s,l,v)}return s}function _d(i,s,l,v){if(s){var w=Ks(s,l),I=w&&!!w[i.prop],A=v&&v[0],L=v&&v[1],Y=v&&v[2];if(!I){if(Y)try{Xv(s)}catch(B){al((i.hdlr||{})[un],l,"Blocking",B)}try{hd(i,s,l,s[l]),w=Ks(s,l)}catch(B){al((i.hdlr||{})[un],l,"State",B)}}A&&(w[i.rf]=A),L&&(w[i.ro]=L),Y&&(w[i.blkVal]=!0)}return s}function sf(i,s,l,v){try{Ct(s,function(w,I){hd(i,s,w,I)}),s[rl]||(Bi(s,rl,{get:function(){return i[Ju]}}),ps(i,s,l))}catch(w){al((i.hdlr||{})[un],l,v,w)}return s}var hi="[[ai_",uf="]]";function Qv(i){var s,l=Nl(hi+"get"+i.uid+uf),v=Nl(hi+"ro"+i.uid+uf),w=Nl(hi+"rf"+i.uid+uf),I=Nl(hi+"blkVal"+i.uid+uf),A=Nl(hi+"dtl"+i.uid+uf),L=null,Y=null,B;function X(ue,xe){var he=B.act;try{B.act=ue,ue&&ue[A]&&(Pt(ue[A],function(Me){Me.clr(ue)}),ue[A]=[]),xe({cfg:i.cfg,set:i.set.bind(i),setDf:i[Pi].bind(i),ref:i.ref.bind(i),rdOnly:i[To].bind(i)})}catch(Me){var ke=i[un];throw ke&&ke[Qf](1,107,ar(Me)),Me}finally{B.act=he||null}}function le(){if(L){var ue=L;L=null,Y&&Y[Io](),Y=null;var xe=[];if(Pt(ue,function(he){if(he&&(he[A]&&(Pt(he[A],function(ke){ke.clr(he)}),he[A]=null),he.fn))try{X(he,he.fn)}catch(ke){xe[Fr](ke)}}),L)try{le()}catch(he){xe[Fr](he)}xe[cr]>0&&qv("Watcher error(s): ",xe)}}function fe(ue){if(ue&&ue.h[cr]>0){L||(L=[]),Y||(Y=pu(function(){Y=null,le()},0));for(var xe=0;xe<ue.h[cr];xe++){var he=ue.h[xe];he&&ui(L,he)===-1&&L[Fr](he)}}}function de(ue,xe){if(ue){var he=ue[A]=ue[A]||[];ui(he,xe)===-1&&he[Fr](xe)}}return B=(s={prop:l,ro:v,rf:w},s[Rs]=I,s[Ju]=i,s.add=fe,s[Qo]=le,s.use=X,s.trk=de,s),B}function Mm(i,s){var l={fn:s,rm:function(){l.fn=null,i=null,s=null}};return Gr(l,"toJSON",{v:function(){return"WatcherHandler"+(l.fn?"":"[X]")}}),i.use(l,s),l}function il(i,s,l){var v,w=af(s);if(w)return w;var I=tl("dyncfg",!0),A=s&&l!==!1?s:km(s),L;function Y(){L[Qo]()}function B(ke,Me,Ge){try{ke=hd(L,ke,Me,Ge)}catch(ct){al(i,Me,"Setting value",ct)}return ke[Me]}function X(ke){return Mm(L,ke)}function le(ke,Me){L.use(null,function(Ge){var ct=L.upd;try{nt(Me)||(L.upd=Me),ke(Ge)}finally{L.upd=ct}})}function fe(ke,Me){var Ge;return _d(L,ke,Me,(Ge={},Ge[0]=!0,Ge))[Me]}function de(ke,Me){var Ge;return _d(L,ke,Me,(Ge={},Ge[1]=!0,Ge))[Me]}function ue(ke,Me){var Ge;return _d(L,ke,Me,(Ge={},Ge[2]=!0,Ge))[Me]}function xe(ke,Me){return Me&&Ct(Me,function(Ge,ct){Oo(he,ke,Ge,ct)}),ke}var he=(v={uid:null,cfg:A},v[un]=i,v[Qo]=Y,v.set=B,v[Pi]=xe,v[_u]=X,v.ref=fe,v[To]=de,v[Rs]=ue,v._block=le,v);return Gr(he,"uid",{c:!1,e:!1,w:!1,v:I}),L=Qv(he),sf(L,A,"config","Creating"),he}function Lm(i,s){i?(i[xi](s),i[Qf](2,108,s)):Nu(s)}function ko(i,s,l,v){var w=il(l,i||{},v);return s&&w[Pi](w.cfg,s),w}function Cu(i,s,l){var v=i[rl]||i;return v.cfg&&(v.cfg===i||v.cfg[rl]===v)?v[_u](s):(Lm(l,Wp+ar(i)),ko(i,null,l)[_u](s))}function ol(i,s){if(i&&i[ks])return i[ks](s)}function em(i,s,l){var v;return l||(v=Hc(function(w){l=w})),i&&Bp(i)>0?is(ol(i[0],s),function(){em(Dl(i,1),s,l)}):l(),v}var vp=500,tm="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function nv(i,s,l){return!i&&Ve(i)?s:qi(i)?i:ga(i)[hu]()==="true"}function gd(i){return{mrg:!0,v:i}}function sl(i,s,l){return{fb:l,isVal:i,v:s}}function no(i,s){return{fb:s,set:nv,v:!!i}}var yd=[Zn,vr,Ys,hn],ul=null,Oa;function ao(i,s){return function(){var l=arguments,v=rm(s);if(v){var w=v.listener;w&&w[i]&&w[i][Ka](w,l)}}}function cf(){var i=Ir("Microsoft");return i&&(ul=i.ApplicationInsights),ul}function rm(i){var s=ul;return!s&&i.disableDbgExt!==!0&&(s=ul||cf()),s?s.ChromeDbgExt:null}function nm(i){if(!Oa){Oa={};for(var s=0;s<yd[cr];s++)Oa[yd[s]]=ao(yd[s],i)}return Oa}var ha,cl="warnToConsole",lf="AI (Internal): ",Fm="AI: ",am="AITR_",ff={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},ka=(ha={},ha[0]=null,ha[1]="errorToConsole",ha[2]=cl,ha[3]="debugToConsole",ha);function mp(i){return i?'"'+i[Oi](/\"/g,Br)+'"':Br}function dc(i,s){var l=Jl();if(l){var v="log";l[i]&&(v=i),rt(l[v])&&l[v](s)}}var ll=function(){function i(s,l,v,w){v===void 0&&(v=!1);var I=this;I[rd]=s,I[Qu]=(v?Fm:lf)+s;var A=Br;Gs()&&(A=Fi().stringify(w));var L=(l?" message:"+mp(l):Br)+(w?" props:"+mp(A):Br);I[Qu]+=L}return i.dataType="MessageData",i}();function Ws(i,s){return(i||{})[un]||new df(s)}var df=function(){function i(s){this.identifier="DiagnosticLogger",this.queue=[];var l=0,v={},w,I,A,L,Y;Pa(i,this,function(B){Y=le(s||{}),B.consoleLoggingLevel=function(){return w},B[Qf]=function(ue,xe,he,ke,Me){Me===void 0&&(Me=!1);var Ge=new ll(xe,he,Me,ke);if(L)throw ar(Ge);var ct=ka[ue]||cl;if(nt(Ge[Qu]))de("throw"+(ue===1?"Critical":"Warning"),Ge);else{if(Me){var Sr=+Ge[rd];!v[Sr]&&w>=ue&&(B[ct](Ge[Qu]),v[Sr]=!0)}else w>=ue&&B[ct](Ge[Qu]);X(ue,Ge)}},B.debugToConsole=function(ue){dc("debug",ue),de("warning",ue)},B[xi]=function(ue){dc("warn",ue),de("warning",ue)},B.errorToConsole=function(ue){dc("error",ue),de("error",ue)},B.resetInternalMessageCount=function(){l=0,v={}},B[ec]=X,B[ks]=function(ue){Y&&Y.rm(),Y=null};function X(ue,xe){if(!fe()){var he=!0,ke=am+xe[rd];if(v[ke]?he=!1:v[ke]=!0,he&&(ue<=I&&(B.queue[Fr](xe),l++,de(ue===1?"error":"warn",xe)),l===A)){var Me="Internal events throttle limit per PageView reached for this app.",Ge=new ll(23,Me,!1);B.queue[Fr](Ge),ue===1?B.errorToConsole(Me):B[xi](Me)}}}function le(ue){return Cu(ko(ue,ff,B).cfg,function(xe){var he=xe.cfg;w=he[Xu],I=he.loggingLevelTelemetry,A=he.maxMessageLimit,L=he.enableDebug})}function fe(){return l>=A}function de(ue,xe){var he=rm(s||{});he&&he[di]&&he[di](ue,xe)}})}return i.__ieDyn=1,i}();function hp(i){return i||new df}function St(i,s,l,v,w,I){I===void 0&&(I=!1),hp(i)[Qf](s,l,v,w,I)}function xu(i,s){hp(i)[xi](s)}var Mo,pf,Um="toGMTString",vf="toUTCString",Sd="cookie",Lo="expires",im="isCookieUseDisabled",_p="disableCookiesUsage",gp="_ckMgr",mf=null,pc=null,av=null,Hr,Js={},iv={},Pu=(Mo={cookieCfg:gd((pf={},pf[ro]={fb:"cookieDomain",dfVal:Vc},pf.path={fb:"cookiePath",dfVal:Vc},pf.enabled=js,pf.ignoreCookies=js,pf.blockedCookies=js,pf)),cookieDomain:js,cookiePath:js},Mo[_p]=js,Mo);function io(){!Hr&&(Hr=uu(function(){return Bf()}))}function Fn(i){return i?i.isEnabled():!0}function wd(i,s){return s&&i&&at(i.ignoreCookies)?ui(i.ignoreCookies,s)!==-1:!1}function vc(i,s){return s&&i&&at(i.blockedCookies)&&ui(i.blockedCookies,s)!==-1?!0:wd(i,s)}function fl(i,s){var l=s[Zu];if(Ve(l)){var v=void 0;nt(i[im])||(v=!i[im]),nt(i[_p])||(v=!i[_p]),l=v}return l}function vs(i,s){var l,v,w,I,A,L,Y,B,X;i=ko(i||iv,null,s).cfg,A=Cu(i,function(fe){fe[Pi](fe.cfg,Pu),v=fe.ref(fe.cfg,"cookieCfg"),w=v[Bl]||"/",I=v[ro],L=fl(i,v)!==!1,Y=v.getCookie||ov,B=v.setCookie||ms,X=v.delCookie||ms},s);var le=(l={isEnabled:function(){var fe=fl(i,v)!==!1&&L&&oo(s),de=iv[gp];return fe&&de&&le!==de&&(fe=Fn(de)),fe},setEnabled:function(fe){L=fe!==!1,v[Zu]=fe},set:function(fe,de,ue,xe,he){var ke=!1;if(Fn(le)&&!vc(v,fe)){var Me={},Ge=Wn(de||Br),ct=qu(Ge,";");if(ct!==-1&&(Ge=Wn(pn(de,ct)),Me=Fo(Lr(de,ct+1))),wu(Me,ro,xe||I,Yr,nt),!Ve(ue)){var Sr=dd();if(nt(Me[Lo])){var Zr=lu(),Xr=Zr+ue*1e3;if(Xr>0){var _n=new Date;_n.setTime(Xr),wu(Me,Lo,bd(_n,Sr?Um:vf)||bd(_n,Sr?Um:vf)||Br,Yr)}}Sr||wu(Me,"max-age",Br+ue,null,nt)}var Qt=Qc();Qt&&Qt[yu]==="https:"&&(wu(Me,"secure",null,null,nt),pc===null&&(pc=!sv((Vo()||{})[ca])),pc&&wu(Me,"SameSite","None",null,nt)),wu(Me,Bl,he||w,null,nt),B(fe,yp(Ge,Me)),ke=!0}return ke},get:function(fe){var de=Br;return Fn(le)&&!wd(v,fe)&&(de=Y(fe)),de},del:function(fe,de){var ue=!1;return Fn(le)&&(ue=le.purge(fe,de)),ue},purge:function(fe,de){var ue,xe=!1;if(oo(s)){var he=(ue={},ue[Bl]=de||"/",ue[Lo]="Thu, 01 Jan 1970 00:00:01 GMT",ue);dd()||(he["max-age"]="0"),X(fe,yp(Br,he)),xe=!0}return xe}},l[ks]=function(fe){A&&A.rm(),A=null},l);return le[gp]=le,le}function oo(i){if(mf===null){mf=!1,!Hr&&io();try{var s=Hr.v||{};mf=s[Sd]!==void 0}catch(l){St(i,2,68,"Cannot access document.cookie - "+fa(l),{exception:ar(l)})}}return mf}function Fo(i){var s={};if(i&&i[cr]){var l=Wn(i)[Su](";");Pt(l,function(v){if(v=Wn(v||Br),v){var w=qu(v,"=");w===-1?s[v]=null:s[Wn(pn(v,w))]=Wn(Lr(v,w+1))}})}return s}function bd(i,s){return rt(i[s])?i[s]():null}function yp(i,s){var l=i||Br;return Ct(s,function(v,w){l+="; "+v+(Ve(w)?Br:"="+w)}),l}function ov(i){var s=Br;if(!Hr&&io(),Hr.v){var l=Hr.v[Sd]||Br;av!==l&&(Js=Fo(l),av=l),s=Wn(Js[i]||Br)}return s}function ms(i,s){!Hr&&io(),Hr.v&&(Hr.v[Sd]=i+"="+s)}function sv(i){return Ft(i)?!!(Hn(i,"CPU iPhone OS 12")||Hn(i,"iPad; CPU OS 12")||Hn(i,"Macintosh; Intel Mac OS X 10_14")&&Hn(i,"Version/")&&Hn(i,"Safari")||Hn(i,"Macintosh; Intel Mac OS X 10_14")&&Ni(i,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Hn(i,"Chrome/5")||Hn(i,"Chrome/6")||Hn(i,"UnrealEngine")&&!Hn(i,"Chrome")||Hn(i,"UCBrowser/12")||Hn(i,"UCBrowser/11")):!1}var Ed={perfEvtsSendAll:!1};function uv(i){i.h=null;var s=i.cb;i.cb=[],Pt(s,function(l){Ht(l.fn,[l.arg])})}function hs(i,s,l,v){Pt(i,function(w){w&&w[s]&&(l?(l.cb[Fr]({fn:v,arg:w}),l.h=l.h||pu(uv,0,l)):Ht(v,[w]))})}var jm=function(){function i(s){this.listeners=[];var l,v,w=[],I={h:null,cb:[]},A=ko(s,Ed);v=A[_u](function(L){l=!!L.cfg.perfEvtsSendAll}),Pa(i,this,function(L){Gr(L,"listeners",{g:function(){return w}}),L[Ai]=function(Y){w[Fr](Y)},L[gu]=function(Y){for(var B=ui(w,Y);B>-1;)w[pt](B,1),B=ui(w,Y)},L[Zn]=function(Y){hs(w,Zn,I,function(B){B[Zn](Y)})},L[vr]=function(Y,B){hs(w,vr,I,function(X){X[vr](Y,B)})},L[Ys]=function(Y,B){hs(w,Ys,B?I:null,function(X){X[Ys](Y,B)})},L[hn]=function(Y){Y&&(l||!Y[ep]())&&hs(w,hn,null,function(B){Y[Ms]?pu(function(){return B[hn](Y)},0):B[hn](Y)})},L[os]=function(Y){Y&&Y[cr]&&hs(w,os,I,function(B){B[os](Y)})},L[cc]=function(Y){Y&&Y[pi]&&hs(w,cc,I,function(B){B[cc](Y)})},L[lc]=function(Y,B){if(Y>0){var X=B||0;hs(w,lc,I,function(le){le[lc](Y,X)})}},L[ks]=function(Y){var B=function(){v&&v.rm(),v=null,w=[],I.h&&I.h[Io](),I.h=null,I.cb=[]},X;if(hs(w,"unload",null,function(le){var fe=le[ks](Y);fe&&(X||(X=[]),X[Fr](fe))}),X)return Hc(function(le){return is(op(X),function(){B(),le()})});B()}})}return i.__ieDyn=1,i}(),Au="ctx",cv="ParentContextKey",f="ChildrenContextKey",h=null,S=function(){function i(s,l,v){var w=this;if(w.start=lu(),w[An]=s,w[Ms]=v,w[ep]=function(){return!1},rt(l)){var I;Gr(w,"payload",{g:function(){return!I&&rt(l)&&(I=l(),l=null),I}})}w[$c]=function(A){return A?A===i[cv]||A===i[f]?w[A]:(w[Au]||{})[A]:null},w[ba]=function(A,L){if(A)if(A===i[cv])w[A]||(w[ep]=function(){return!0}),w[A]=L;else if(A===i[f])w[A]=L;else{var Y=w[Au]=w[Au]||{};Y[A]=L}},w[nd]=function(){var A=0,L=w[$c](i[f]);if(at(L))for(var Y=0;Y<L[cr];Y++){var B=L[Y];B&&(A+=B[es])}w[es]=lu()-w.start,w.exTime=w[es]-A,w[nd]=function(){}}}return i.ParentContextKey="parent",i.ChildrenContextKey="childEvts",i}(),N=function(){function i(s){this.ctx={},Pa(i,this,function(l){l.create=function(v,w,I){return new S(v,w,I)},l.fire=function(v){v&&(v[nd](),s&&rt(s[hn])&&s[hn](v))},l[ba]=function(v,w){if(v){var I=l[Au]=l[Au]||{};I[v]=w}},l[$c]=function(v){return(l[Au]||{})[v]}})}return i.__ieDyn=1,i}(),F="CoreUtils.doPerf";function V(i,s,l,v,w){if(i){var I=i;if(I[$s]&&(I=I[$s]()),I){var A=void 0,L=I[$c](F);try{if(A=I.create(s(),v,w),A){if(L&&A[ba]&&(A[ba](S[cv],L),L[$c]&&L[ba])){var Y=L[$c](S[f]);Y||(Y=[],L[ba](S[f],Y)),Y[Fr](A)}return I[ba](F,A),l(A)}}catch(B){A&&A[ba]&&A[ba]("exception",B)}finally{A&&I.fire(A),I[ba](F,L)}}}return l()}function J(){return h}var ae="00000000000000000000000000000000",re="0000000000000000";function ge(i,s,l){return i&&i[cr]===s&&i!==l?!!i.match(/^[\da-f]*$/i):!1}function tt(i){return ge(i,32,ae)}function bt(i){return ge(i,16,re)}var Jt=pp("plugin");function ot(i){return Jt.get(i,"state",{},!0)}function lt(i,s){for(var l=[],v=null,w=i[Ri](),I;w;){var A=w[Co]();if(A){v&&v[Yc]&&A[Za]&&v[Yc](A),I=ot(A);var L=!!I[qr];A[qr]&&(L=A[qr]()),L||l[Fr](A),v=A,w=w[Ri]()}}Pt(l,function(Y){var B=i[la]();Y[Os](i.getCfg(),B,s,i[Ri]()),I=ot(Y),!Y[la]&&!I[la]&&(I[la]=B),I[qr]=!0,delete I[Ln]})}function ir(i){return i.sort(function(s,l){var v=0;if(l){var w=l[Za];s[Za]?v=w?s[ud]-l[ud]:1:w&&(v=-1)}else v=s?1:-1;return v})}function Ut(i){var s={};return{getName:function(){return s[An]},setName:function(l){i&&i.setName(l),s[An]=l},getTraceId:function(){return s[jl]},setTraceId:function(l){i&&i.setTraceId(l),tt(l)&&(s[jl]=l)},getSpanId:function(){return s[Ro]},setSpanId:function(l){i&&i.setSpanId(l),bt(l)&&(s[Ro]=l)},getTraceFlags:function(){return s[Ja]},setTraceFlags:function(l){i&&i.setTraceFlags(l),s[Ja]=l}}}var gr="TelemetryPluginChain",br="_hasRun",At="_getTelCtx",En=0;function mc(i,s,l){for(;i;){if(i[Co]()===l)return i;i=i[Ri]()}return _f([l],s.config||{},s)}function Zs(i,s,l,v){var w=null,I=[];s||(s=ko({},null,l[un])),v!==null&&(w=v?mc(i,l,v):i);var A={_next:Y,ctx:{core:function(){return l},diagLog:function(){return Ws(l,s.cfg)},getCfg:function(){return s.cfg},getExtCfg:X,getConfig:le,hasNext:function(){return!!w},getNext:function(){return w},setNext:function(de){w=de},iterate:fe,onComplete:L}};function L(de,ue){for(var xe=[],he=2;he<arguments.length;he++)xe[he-2]=arguments[he];de&&I[Fr]({func:de,self:nt(ue)?A.ctx:ue,args:xe})}function Y(){var de=w;if(w=de?de[Ri]():null,!de){var ue=I;ue&&ue[cr]>0&&(Pt(ue,function(xe){try{xe.func.call(xe.self,xe.args)}catch(he){St(l[un],2,73,"Unexpected Exception during onComplete - "+ar(he))}}),I=[])}return de}function B(de,ue){var xe=null,he=s.cfg;if(he&&de){var ke=he[Gc];!ke&&ue&&(ke={}),he[Gc]=ke,ke=s.ref(he,Gc),ke&&(xe=ke[de],!xe&&ue&&(xe={}),ke[de]=xe,xe=s.ref(ke,de))}return xe}function X(de,ue){var xe=B(de,!0);return ue&&Ct(ue,function(he,ke){if(Ve(xe[he])){var Me=s.cfg[he];(Me||!Ve(Me))&&(xe[he]=Me)}Oo(s,xe,he,ke)}),s[Pi](xe,ue)}function le(de,ue,xe){xe===void 0&&(xe=!1);var he,ke=B(de,!1),Me=s.cfg;return ke&&(ke[ue]||!Ve(ke[ue]))?he=ke[ue]:(Me[ue]||!Ve(Me[ue]))&&(he=Me[ue]),he||!Ve(he)?he:xe}function fe(de){for(var ue;ue=A._next();){var xe=ue[Co]();xe&&de(xe)}}return A}function dl(i,s,l,v){var w=ko(s),I=Zs(i,w,l,v),A=I.ctx;function L(B){var X=I._next();return X&&X[Za](B,A),!X}function Y(B,X){return B===void 0&&(B=null),at(B)&&(B=_f(B,w.cfg,l,X)),dl(B||A[Ri](),w.cfg,l,X)}return A[wa]=L,A[Ao]=Y,A}function hf(i,s,l){var v=ko(s.config),w=Zs(i,v,s,l),I=w.ctx;function A(Y){var B=w._next();return B&&B[ks](I,Y),!B}function L(Y,B){return Y===void 0&&(Y=null),at(Y)&&(Y=_f(Y,v.cfg,s,B)),hf(Y||I[Ri](),s,B)}return I[wa]=A,I[Ao]=L,I}function Td(i,s,l){var v=ko(s.config),w=Zs(i,v,s,l),I=w.ctx;function A(Y){return I.iterate(function(B){rt(B[Ls])&&B[Ls](I,Y)})}function L(Y,B){return Y===void 0&&(Y=null),at(Y)&&(Y=_f(Y,v.cfg,s,B)),Td(Y||I[Ri](),s,B)}return I[wa]=A,I[Ao]=L,I}function _f(i,s,l,v){var w=null,I=!v;if(at(i)&&i[cr]>0){var A=null;Pt(i,function(L){if(!I&&v===L&&(I=!0),I&&L&&rt(L[Za])){var Y=gf(L,s,l);w||(w=Y),A&&A._setNext(Y),A=Y}})}return v&&!w?_f([v],s,l):w}function gf(i,s,l){var v=null,w=rt(i[Za]),I=rt(i[Yc]),A;i?A=i[Qi]+"-"+i[ud]+"-"+En++:A="Unknown-0-"+En++;var L={getPlugin:function(){return i},getNext:function(){return v},processTelemetry:X,unload:le,update:fe,_id:A,_setNext:function(de){v=de}};function Y(){var de;return i&&rt(i[At])&&(de=i[At]()),de||(de=dl(L,s,l)),de}function B(de,ue,xe,he,ke){var Me=!1,Ge=i?i[Qi]:gr,ct=de[br];return ct||(ct=de[br]={}),de.setNext(v),i&&V(de[la](),function(){return Ge+":"+xe},function(){ct[A]=!0;try{var Sr=v?v._id:Br;Sr&&(ct[Sr]=!1),Me=ue(de)}catch(Xr){var Zr=v?ct[v._id]:!0;Zr&&(Me=!0),(!v||!Zr)&&St(de[di](),1,73,"Plugin ["+Ge+"] failed during "+xe+" - "+ar(Xr)+", run flags: "+ar(ct))}},he,ke),Me}function X(de,ue){ue=ue||Y();function xe(he){if(!i||!w)return!1;var ke=ot(i);return ke[Ln]||ke[sd]?!1:(I&&i[Yc](v),i[Za](de,he),!0)}B(ue,xe,"processTelemetry",function(){return{item:de}},!de.sync)||ue[wa](de)}function le(de,ue){function xe(){var he=!1;if(i){var ke=ot(i),Me=i[la]||ke[la];i&&(!Me||Me===de.core())&&!ke[Ln]&&(ke[la]=null,ke[Ln]=!0,ke[qr]=!1,i[Ln]&&i[Ln](de,ue)===!0&&(he=!0))}return he}B(de,xe,"unload",function(){},ue[Ms])||de[wa](ue)}function fe(de,ue){function xe(){var he=!1;if(i){var ke=ot(i),Me=i[la]||ke[la];i&&(!Me||Me===de.core())&&!ke[Ln]&&i[Ls]&&i[Ls](de,ue)===!0&&(he=!0)}return he}B(de,xe,"update",function(){},!1)||de[wa](ue)}return ur(L)}function Id(){var i=[];function s(v){v&&i[Fr](v)}function l(v,w){Pt(i,function(I){try{I(v,w)}catch(A){St(v[di](),2,73,"Unexpected error calling unload handler - "+ar(A))}}),i=[]}return{add:s,run:l}}function yf(){var i=[];function s(v){var w=i;i=[],Pt(w,function(I){try{(I.rm||I.remove).call(I)}catch(A){St(v,2,73,"Unloading:"+ar(A))}})}function l(v){v&&Ac(i,v)}return{run:s,add:l}}var Re,vt="getPlugin",Bt=(Re={},Re[Gc]={isVal:Vc,v:{}},Re),en=function(){function i(){var s=this,l,v,w,I,A;B(),Pa(i,s,function(X){X[Os]=function(le,fe,de,ue){Y(le,fe,ue),l=!0},X[Ln]=function(le,fe){var de,ue=X[la];if(!ue||le&&ue!==le[la]())return;var xe,he=!1,ke=le||hf(null,ue,w&&w[vt]?w[vt]():w),Me=fe||(de={reason:0},de[Ms]=!1,de);function Ge(){he||(he=!0,I.run(ke,fe),A.run(ke[di]()),xe===!0&&ke[wa](Me),B())}return!X[ts]||X[ts](ke,Me,Ge)!==!0?Ge():xe=!0,xe},X[Ls]=function(le,fe){var de=X[la];if(!de||le&&de!==le[la]())return;var ue,xe=!1,he=le||Td(null,de,w&&w[vt]?w[vt]():w),ke=fe||{reason:0};function Me(){xe||(xe=!0,Y(he.getCfg(),he.core(),he[Ri]()))}return!X._doUpdate||X._doUpdate(he,ke,Me)!==!0?Me():ue=!0,ue},da(X,"_addUnloadCb",function(){return I},"add"),da(X,"_addHook",function(){return A},"add"),Gr(X,"_unloadHooks",{g:function(){return A}})}),s[di]=function(X){return L(X)[di]()},s[qr]=function(){return l},s.setInitialized=function(X){l=X},s[Yc]=function(X){w=X},s[wa]=function(X,le){le?le[wa](X):w&&rt(w[Za])&&w[Za](X,null)},s._getTelCtx=L;function L(X){X===void 0&&(X=null);var le=X;if(!le){var fe=v||dl(null,{},s[la]);w&&w[vt]?le=fe[Ao](null,w[vt]):le=fe[Ao](null,w)}return le}function Y(X,le,fe){ko(X,Bt,Ws(le)),!fe&&le&&(fe=le[Aa]()[Ri]());var de=w;w&&w[vt]&&(de=w[vt]()),s[la]=le,v=dl(fe,X,le,de)}function B(){l=!1,s[la]=null,v=null,w=null,A=yf(),I=Id()}}return i.__ieDyn=1,i}();function Ea(i,s,l){var v={id:s,fn:l};Ac(i,v);var w={remove:function(){Pt(i,function(I,A){if(I.id===v.id)return i[pt](A,1),-1})}};return w}function Ta(i,s,l){for(var v=!1,w=i[cr],I=0;I<w;++I){var A=i[I];if(A)try{if(A.fn[Ka](null,[s])===!1){v=!0;break}}catch(L){St(l,2,64,"Telemetry initializer failed: "+fa(L),{exception:ar(L)},!0)}}return!v}var Xn=function(i){Fl(s,i);function s(){var l=i.call(this)||this;l.identifier="TelemetryInitializerPlugin",l.priority=199;var v,w;I(),Pa(s,l,function(A,L){A.addTelemetryInitializer=function(Y){return Ea(w,v++,Y)},A[Za]=function(Y,B){Ta(w,Y,B?B[di]():A[di]())&&A[wa](Y,B)},A[ts]=function(){I()}});function I(){v=0,w=[]}return l}return s.__ieDyn=1,s}(en),_i,_s="Plugins must provide initialize method",pl="_notificationManager",om="SDK is still unloading...",Ru="SDK is not initialized",Nd=100,Ym=5e4,Qn=qa((_i={cookieCfg:{}},_i[uc]={rdOnly:!0,ref:!0,v:[]},_i[sc]={rdOnly:!0,ref:!0,v:[]},_i[Gc]={ref:!0,v:{}},_i[sp]=js,_i.loggingLevelConsole=0,_i.diagnosticLogInterval=js,_i));function gs(i,s){return new N(s)}function sm(i,s,l){var v,w=[],I=[],A={};return Pt(l,function(L){(Ve(L)||Ve(L[Os]))&&pr(_s);var Y=L[ud],B=L[Qi];L&&Y&&(Ve(A[Y])?A[Y]=B:xu(i,"Two extensions have same priority #"+Y+" - "+A[Y]+", "+B)),!Y||Y<s?w[Fr](L):I[Fr](L)}),v={},v[la]=w,v[sc]=I,v}function $m(i,s){var l=!1;return Pt(s,function(v){if(v===i)return l=!0,-1}),l}function lv(i,s,l,v){l&&Ct(l,function(w,I){v&&Ga(I)&&Ga(s[w])&&lv(i,s[w],I,v),v&&Ga(I)&&Ga(s[w])?lv(i,s[w],I,v):i.set(s,w,I)})}function qm(i,s){var l=null,v=-1;return Pt(i,function(w,I){if(w.w===s)return l=w,v=I,-1}),{i:v,l}}function Bm(i,s){var l=qm(i,s).l;return l||(l={w:s,rm:function(){var v=qm(i,s);v.i!==-1&&i[pt](v.i,1)}},i[Fr](l)),l}function Jh(i,s,l){Pt(s,function(v){var w=Cu(i,v.w,l);delete v.w,v.rm=function(){w.rm()}})}function zm(i,s,l,v){return s.add(i[_u](function(w){var I=w.cfg.disableDbgExt;I===!0&&v&&(l[gu](v),v=null),l&&!v&&I!==!0&&(v=nm(w.cfg),l[Ai](v))})),v}function Hm(i){return Gr({rm:function(){i.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(i)+">"}})}var vl=function(){function i(){var s,l,v,w,I,A,L,Y,B,X,le,fe,de,ue,xe,he,ke,Me,Ge,ct,Sr,Zr,Xr,_n,Qt,Yt,Wr,ja,aa,Je,$t,Dn;Pa(i,this,function(Le){Se(),Le._getDbgPlgTargets=function(){return[Xr,w]},Le[qr]=function(){return l},Le.activeStatus=function(){return Yt},Le._setPendingStatus=function(){Yt=3},Le[Os]=function(Ie,ht,er,xt){de&&pr(om),Le[qr]()&&pr("Core cannot be initialized more than once"),s=ko(Ie,Qn,er||Le[un],!1),Ie=s.cfg,iu(s[_u](function(gn){var $a=gn.cfg,qo=Yt===3;if(!qo){ja=$a.initInMemoMaxSize||Nd;var ou=$a[No],Pp=$a.endpointUrl;if(Ve(ou)){Sr=null,Yt=Ci[Ur];var Ap="Please provide instrumentation key";l?(St(v,1,100,Ap),ia()):pr(Ap);return}var u_=[];if(tr(ou)?(u_[Fr](ou),Sr=null):Sr=ou,tr(Pp)?(u_[Fr](Pp),Wr=null):Wr=Pp,u_[cr]){aa=!1,Yt=3;var q_=Vc($a.initTimeOut)?$a.initTimeOut:Ym,xy=Hv(u_);pu(function(){aa||nr()},q_),is(xy,function(rh){try{if(aa)return;if(!rh.rejected){var nh=rh[Do];if(nh&&nh[cr]){var Dg=nh[0];if(Sr=Dg&&Dg[Do],nh[cr]>1){var Cg=nh[1];Wr=Cg&&Cg[Do]}}Sr&&(Ie[No]=Sr,Ie.endpointUrl=Wr)}nr()}catch{aa||nr()}})}else nr();var c_=gn.ref(gn.cfg,Gc);Ct(c_,function(rh){gn.ref(c_,rh)})}})),I=xt,Ge=zm(s,Me,I&&Le[ed](),Ge),eh(),Le[un]=er;var fr=Ie[uc];if(X=[],X[Fr].apply(X,Ku(Ku([],ht,!1),fr)),le=Ie[sc],Qa(null),(!fe||fe[cr]===0)&&pr("No "+sc+" available"),le&&le[cr]>1){var $n=Le[Co]("TeeChannelController");(!$n||!$n.plugin)&&St(v,1,28,"TeeChannel required")}Jh(Ie,Zr,v),Zr=null,l=!0,Yt===Ci.ACTIVE&&ia()},Le.getChannels=function(){var Ie=[];return fe&&Pt(fe,function(ht){Ie[Fr](ht)}),ur(Ie)},Le.track=function(Ie){V(Le[$s](),function(){return"AppInsightsCore:track"},function(){Ie===null&&(Ya(Ie),pr("Invalid telemetry item")),!Ie[An]&&Ve(Ie[An])&&(Ya(Ie),pr("telemetry name required")),Ie[eo]=Ie[eo]||Sr,Ie[es]=Ie[es]||Kc(new Date),Ie.ver=Ie.ver||"4.0",!de&&Le[qr]()&&Yt===Ci.ACTIVE?fo()[wa](Ie):Yt!==Ci[Ur]&&w[cr]<=ja&&w[Fr](Ie)},function(){return{item:Ie}},!Ie.sync)},Le[Aa]=fo,Le[ed]=function(){return I||(I=new jm(s.cfg),Le[pl]=I),I},Le[Ai]=function(Ie){Le.getNotifyMgr()[Ai](Ie)},Le[gu]=function(Ie){I&&I[gu](Ie)},Le.getCookieMgr=function(){return Y||(Y=vs(s.cfg,Le[un])),Y},Le.setCookieMgr=function(Ie){Y!==Ie&&(ol(Y,!1),Y=Ie)},Le[$s]=function(){return A||L||J()},Le.setPerfMgr=function(Ie){A=Ie},Le.eventCnt=function(){return w[cr]},Le.releaseQueue=function(){if(l&&w[cr]>0){var Ie=w;w=[],Yt===2?Pt(Ie,function(ht){ht[eo]=ht[eo]||Sr,fo()[wa](ht)}):St(v,2,20,"core init status is not active")}},Le[jc]=function(Ie){return xe=Ie||null,Dn=!1,Je&&Je[Io](),Cn(!0)};function nr(){aa=!0,Ve(Sr)?(Yt=Ci[Ur],St(v,1,112,"ikey can't be resolved from promises")):Yt=Ci.ACTIVE,ia()}function ia(){l&&(Le.releaseQueue(),Le[jc]())}function Cn(Ie){if((!Je||!Je[Zu])&&!Dn){var ht=Ie||v&&v.queue[cr]>0;ht&&($t||($t=!0,iu(s[_u](function(er){var xt=er.cfg.diagnosticLogInterval;(!xt||!(xt>0))&&(xt=1e4);var fr=!1;Je&&(fr=Je[Zu],Je[Io]()),Je=Wd(Qm,xt),Je.unref(),Je[Zu]=fr}))),Je[Zu]=!0)}return Je}Le[td]=function(){Dn=!0,Je&&Je[Io](),Qm()},ld(Le,function(){return ue},["addTelemetryInitializer"]),Le[ks]=function(Ie,ht,er){var xt;Ie===void 0&&(Ie=!0),l||pr(Ru),de&&pr(om);var fr=(xt={reason:50},xt[Ms]=Ie,xt.flushComplete=!1,xt),$n;Ie&&!ht&&($n=Hc(function(qo){ht=qo}));var gn=hf(kd(),Le);gn[xo](function(){Me.run(Le[un]),em([Y,I,v],Ie,function(){Se(),ht&&ht(fr)})},Le);function $a(qo){fr.flushComplete=qo,de=!0,ke.run(gn,fr),Le[td](),gn[wa](fr)}return Qm(),Cp(Ie,$a,6,er),$n},Le[Co]=ws,Le.addPlugin=function(Ie,ht,er,xt){if(!Ie){xt&&xt(!1),th(_s);return}var fr=ws(Ie[Qi]);if(fr&&!ht){xt&&xt(!1),th("Plugin ["+Ie[Qi]+"] is already loaded!");return}var $n={reason:16};function gn(ou){X[Fr](Ie),$n.added=[Ie],Qa($n),xt&&xt(!0)}if(fr){var $a=[fr.plugin],qo={reason:2,isAsync:!!er};wc($a,qo,function(ou){ou?($n.removed=$a,$n.reason|=32,gn()):xt&&xt(!1)})}else gn()},Le.updateCfg=function(Ie,ht){ht===void 0&&(ht=!0);var er;if(Le[qr]()){er={reason:1,cfg:s.cfg,oldCfg:du({},s.cfg),newConfig:du({},Ie),merge:ht},Ie=er.newConfig;var xt=s.cfg;Ie[uc]=xt[uc],Ie[sc]=xt[sc]}s._block(function(fr){var $n=fr.cfg;lv(fr,$n,Ie,ht),ht||Ct($n,function(gn){je(Ie,gn)||fr.set($n,gn,js)}),fr[Pi]($n,Qn)},!0),s[Qo](),er&&xp(er)},Le.evtNamespace=function(){return he},Le.flush=Cp,Le.getTraceCtx=function(Ie){return ct||(ct=Ut()),ct},Le.setTraceCtx=function(Ie){ct=Ie||null},Le.addUnloadHook=iu,da(Le,"addUnloadCb",function(){return ke},"add"),Le.onCfgChange=function(Ie){var ht;return l?ht=Cu(s.cfg,Ie,Le[un]):ht=Bm(Zr,Ie),Hm(ht)},Le.getWParam=function(){return sa()||s.cfg.enableWParam?0:-1};function Ss(){var Ie={};_n=[];var ht=function(er){er&&Pt(er,function(xt){if(xt[Qi]&&xt[Po]&&!Ie[xt.identifier]){var fr=xt[Qi]+"="+xt[Po];_n[Fr](fr),Ie[xt.identifier]=xt}})};ht(fe),le&&Pt(le,function(er){ht(er)}),ht(X)}function Se(){l=!1,s=ko({},Qn,Le[un]),s.cfg[Xu]=1,Gr(Le,"config",{g:function(){return s.cfg},s:function(ht){Le.updateCfg(ht,!1)}}),Gr(Le,"pluginVersionStringArr",{g:function(){return _n||Ss(),_n}}),Gr(Le,"pluginVersionString",{g:function(){return Qt||(_n||Ss(),Qt=_n.join(";")),Qt||Br}}),Gr(Le,"logger",{g:function(){return v||(v=new df(s.cfg),s[un]=v),v},s:function(ht){s[un]=ht,v!==ht&&(ol(v,!1),v=ht)}}),Le[un]=new df(s.cfg),Xr=[];var Ie=Le.config[uc]||[];Ie.splice(0,Ie[cr]),Ac(Ie,Xr),ue=new Xn,w=[],ol(I,!1),I=null,A=null,L=null,ol(Y,!1),Y=null,B=null,X=[],le=null,fe=null,de=!1,xe=null,he=tl("AIBaseCore",!0),ke=Id(),ct=null,Sr=null,Me=yf(),Zr=[],Qt=null,_n=null,Dn=!1,Je=null,$t=!1,Yt=0,Wr=null,ja=null,aa=!1}function fo(){var Ie=dl(kd(),s.cfg,Le);return Ie[xo](Cn),Ie}function Qa(Ie){var ht=sm(Le[un],vp,X);B=null,Qt=null,_n=null,fe=(le||[])[0]||[],fe=ir(Ac(fe,ht[sc]));var er=Ac(ir(ht[la]),fe);Xr=ur(er);var xt=Le.config[uc]||[];xt.splice(0,xt[cr]),Ac(xt,Xr);var fr=fo();fe&&fe[cr]>0&&lt(fr[Ao](fe),er),lt(fr,er),Ie&&xp(Ie)}function ws(Ie){var ht=null,er=null,xt=[];return Pt(Xr,function(fr){if(fr[Qi]===Ie&&fr!==ue)return er=fr,-1;fr.getChannel&&xt[Fr](fr)}),!er&&xt[cr]>0&&Pt(xt,function(fr){if(er=fr.getChannel(Ie),!er)return-1}),er&&(ht={plugin:er,setEnabled:function(fr){ot(er)[sd]=!fr},isEnabled:function(){var fr=ot(er);return!fr[Ln]&&!fr[sd]},remove:function(fr,$n){var gn;fr===void 0&&(fr=!0);var $a=[er],qo=(gn={reason:1},gn[Ms]=fr,gn);wc($a,qo,function(ou){ou&&Qa({reason:32,removed:$a}),$n&&$n(ou)})}}),ht}function kd(){if(!B){var Ie=(Xr||[]).slice();ui(Ie,ue)===-1&&Ie[Fr](ue),B=_f(ir(Ie),s.cfg,Le)}return B}function wc(Ie,ht,er){if(Ie&&Ie[cr]>0){var xt=_f(Ie,s.cfg,Le),fr=hf(xt,Le);fr[xo](function(){var $n=!1,gn=[];Pt(X,function(qo,ou){$m(qo,Ie)?$n=!0:gn[Fr](qo)}),X=gn,Qt=null,_n=null;var $a=[];le&&(Pt(le,function(qo,ou){var Pp=[];Pt(qo,function(Ap){$m(Ap,Ie)?$n=!0:Pp[Fr](Ap)}),$a[Fr](Pp)}),le=$a),er&&er($n),Cn()}),fr[wa](ht)}else er(!1)}function Qm(){if(v&&v.queue){var Ie=v.queue.slice(0);v.queue[cr]=0,Pt(Ie,function(ht){var er,xt=(er={},er[An]=xe||"InternalMessageId: "+ht[rd],er[eo]=Sr,er[es]=Kc(new Date),er.baseType=ll.dataType,er.baseData={message:ht[Qu]},er);Le.track(xt)})}}function Cp(Ie,ht,er,xt){var fr=1,$n=!1,gn=null;xt=xt||5e3;function $a(){fr--,$n&&fr===0&&(gn&&gn[Io](),gn=null,ht&&ht($n),ht=null)}if(fe&&fe[cr]>0){var qo=fo()[Ao](fe);qo.iterate(function(ou){if(ou.flush){fr++;var Pp=!1;ou.flush(Ie,function(){Pp=!0,$a()},er)||Pp||(Ie&&gn==null?gn=pu(function(){gn=null,$a()},xt):$a())}})}return $n=!0,$a(),!0}function eh(){var Ie;iu(s[_u](function(ht){var er=ht.cfg.enablePerfMgr;if(er){var xt=ht.cfg[sp];(Ie!==xt||!Ie)&&(xt||(xt=gs),cp(ht.cfg,sp,xt),Ie=xt,L=null),!A&&!L&&rt(xt)&&(L=xt(Le,Le[ed]()))}else L=null,Ie=null}))}function xp(Ie){var ht=Td(kd(),Le);ht[xo](Cn),(!Le._updateHook||Le._updateHook(ht,Ie)!==!0)&&ht[wa](Ie)}function th(Ie){var ht=Le[un];ht?(St(ht,2,73,Ie),Cn()):pr(Ie)}function Ya(Ie){var ht=Le[ed]();ht&&ht[vr]([Ie],2)}function iu(Ie){Me.add(Ie)}})}return i.__ieDyn=1,i}();function Sf(i,s){try{if(i&&i!==""){var l=Fi().parse(i);if(l&&l[Wa]&&l[Wa]>=l.itemsAccepted&&l.itemsReceived-l.itemsAccepted===l.errors[cr])return l}}catch(v){St(s,1,43,"Cannot parse the response. "+(v[An]||ar(v)),{response:i})}return null}var Xs="",ml="NoResponseBody",Gm="&"+ml+"=true",um="POST",fv=function(){function i(){var s=0,l,v,w,I,A,L,Y,B,X,le,fe,de,ue,xe;Pa(i,this,function(he,ke){var Me=!0;aa(),he[Os]=function(Je,$t){w=$t,v&&St(w,1,28,"Sender is already initialized"),he.SetConfig(Je),v=!0},he._getDbgPlgTargets=function(){return[v,I,L,l]},he.SetConfig=function(Je){try{if(A=Je.senderOnCompleteCallBack||{},L=!!Je.disableCredentials,Y=Je.fetchCredentials,I=!!Je.isOneDs,l=!!Je.enableSendPromise,X=!!Je.disableXhr,le=!!Je.disableBeacon,fe=!!Je.disableBeaconSync,xe=Je.timeWrapper,ue=!!Je.addNoResponse,de=!!Je.disableFetchKeepAlive,B={sendPOST:Yt},I||(Me=!1),L){var $t=Qc();$t&&$t.protocol&&$t.protocol[hu]()==="file:"&&(Me=!1)}return!0}catch{}return!1},he.getSyncFetchPayload=function(){return s},he.getSenderInst=function(Je,$t){return Je&&Je[cr]?Zr(Je,$t):null},he.getFallbackInst=function(){return B},he[ts]=function(Je,$t){aa()};function Ge(Je,$t){Xr($t,200,{},Je)}function ct(Je,$t){St(w,2,26,"Failed to send telemetry.",{message:Je}),Xr($t,400,{})}function Sr(Je){ct("No endpoint url is provided for the batch",Je)}function Zr(Je,$t){for(var Dn,Le=0,nr=null,ia=0;nr==null&&ia<Je[cr];)Le=Je[ia],!X&&Le===1?pd()?nr=ja:Eu()&&(nr=Yt):Le===2&&va($t)&&(!$t||!de)?nr=Wr:Le===3&&Vs()&&($t?!fe:!le)&&(nr=Qt),ia++;return nr?(Dn={_transport:Le,_isSync:$t},Dn[as]=nr,Dn):null}function Xr(Je,$t,Dn,Le){try{Je&&Je($t,Dn,Le)}catch{}}function _n(Je,$t){var Dn=Vo(),Le=Je[ns];if(!Le)return Sr($t),!0;Le=Je[ns]+(ue?Gm:Xs);var nr=Je[pi],ia=I?nr:new Blob([nr],{type:"text/plain;charset=UTF-8"}),Cn=Dn.sendBeacon(Le,ia);return Cn}function Qt(Je,$t,Dn){var Le=Je[pi];try{if(Le)if(_n(Je,$t))Ge(Xs,$t);else{var nr=A&&A.beaconOnRetry;nr&&rt(nr)?nr(Je,$t,_n):(B&&B[as](Je,$t,!0),St(w,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(ia){I&&xu(w,"Failed to send telemetry using sendBeacon API. Ex:"+ar(ia)),Xr($t,I?0:400,{},Xs)}}function Yt(Je,$t,Dn){var Le,nr,ia,Cn=Je[tp]||{};!Dn&&l&&(Le=Hc(function(Qa,ws){nr=Qa,ia=ws})),I&&Dn&&Je.disableXhrSync&&(Dn=!1);var Ss=Je[ns];if(!Ss){Sr($t),nr&&nr(!1);return}var Se=Jc(um,Ss,Me,!0,Dn,Je[Ul]);I||Se[ad]("Content-type","application/json"),Pt(bn(Cn),function(Qa){Se[ad](Qa,Cn[Qa])}),Se.onreadystatechange=function(){I||(fo(Se),Se.readyState===4&&nr&&nr(!0))},Se.onload=function(){I&&fo(Se)};function fo(Qa){var ws=A&&A.xhrOnComplete,kd=ws&&rt(ws);if(kd)ws(Qa,$t,Je);else{var wc=ss(Qa);Xr($t,Qa[ki],fp(Qa,I),wc)}}return Se.onerror=function(Qa){Xr($t,I?Se[ki]:400,fp(Se,I),I?Xs:vi(Se)),ia&&ia(Qa)},Se.ontimeout=function(){Xr($t,I?Se[ki]:500,fp(Se,I),I?Xs:vi(Se)),nr&&nr(!1)},Se.send(Je[pi]),Le}function Wr(Je,$t,Dn){var Le,nr=Je[ns],ia=Je[pi],Cn=I?ia:new Blob([ia],{type:"application/json"}),Ss,Se,fo,Qa=new Headers,ws=ia[cr],kd=!1,wc=!1,Qm=Je[tp]||{},Cp=(Le={method:um,body:Cn},Le[tm]=!0,Le);Je.headers&&bn(Je.headers)[cr]>0&&(Pt(bn(Qm),function(Ya){Qa.append(Ya,Qm[Ya])}),Cp[tp]=Qa),Y?Cp.credentials=Y:Me&&I&&(Cp.credentials="include"),Dn&&(Cp.keepalive=!0,s+=ws,I?Je._sendReason===2&&(kd=!0,ue&&(nr+=Gm)):kd=!0);var eh=new Request(nr,Cp);try{eh[tm]=!0}catch{}if(!Dn&&l&&(Ss=Hc(function(Ya,iu){Se=Ya,fo=iu})),!nr){Sr($t),Se&&Se(!1);return}function xp(Ya){Xr($t,I?0:400,{},I?Xs:Ya)}function th(Ya,iu,Ie){var ht=Ya[ki],er=A.fetchOnComplete;er&&rt(er)?er(Ya,$t,Ie||Xs,iu):Xr($t,ht,{},Ie||Xs)}try{is(fetch(I?nr:eh,I?Cp:null),function(Ya){if(Dn&&(s-=ws,ws=0),!wc)if(wc=!0,Ya.rejected)xp(Ya.reason&&Ya.reason[Qu]),fo&&fo(Ya.reason);else{var iu=Ya[Do];try{!I&&!iu.ok?(xp(iu.statusText),Se&&Se(!1)):I&&!iu.body?(th(iu,null,Xs),Se&&Se(!0)):is(iu.text(),function(Ie){th(iu,Je,Ie[Do]),Se&&Se(!0)})}catch(Ie){xp(ar(Ie)),fo&&fo(Ie)}}})}catch(Ya){wc||(xp(ar(Ya)),fo&&fo(Ya))}return kd&&!wc&&(wc=!0,Xr($t,200,{}),Se&&Se(!0)),I&&!wc&&Je[Ul]>0&&xe&&xe.set(function(){wc||(wc=!0,Xr($t,500,{}),Se&&Se(!0))},Je[Ul]),Ss}function ja(Je,$t,Dn){var Le=Go(),nr=new XDomainRequest,ia=Je[pi];nr.onload=function(){var Qa=ss(nr),ws=A&&A.xdrOnComplete;ws&&rt(ws)?ws(nr,$t,Je):Xr($t,200,{},Qa)},nr.onerror=function(){Xr($t,400,{},I?Xs:us(nr))},nr.ontimeout=function(){Xr($t,500,{})},nr.onprogress=function(){};var Cn=Le&&Le.location&&Le.location[yu]||"",Ss=Je[ns];if(!Ss){Sr($t);return}if(!I&&Ss.lastIndexOf(Cn,0)!==0){var Se="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";St(w,2,40,". "+Se),ct(Se,$t);return}var fo=I?Ss:Ss[Oi](/^(https?:)/,"");nr.open(um,fo),Je[Ul]&&(nr[Ul]=Je[Ul]),nr.send(ia),I&&Dn?xe&&xe.set(function(){nr.send(ia)},0):nr.send(ia)}function aa(){s=0,v=!1,l=!1,w=null,I=null,A=null,L=null,Y=null,B=null,X=!1,le=!1,fe=!1,de=!1,ue=!1,xe=null}})}return i.__ieDyn=1,i}(),dv="on",Dd="attachEvent",vh="addEventListener",Vm="detachEvent",Sp="removeEventListener",hl="events";tl("aiEvtPageHide"),tl("aiEvtPageShow");var F_=/\.[\.]+/g,mh=/[\.]+$/,Zh=1,Km=pp("events"),U_=/^([^.]*)(?:\.(.+)|)/;function wf(i){return i&&i[Oi]?i[Oi](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Br):i}function pv(i,s){var l;if(s){var v=Br;at(s)?(v=Br,Pt(s,function(I){I=wf(I),I&&(I[0]!=="."&&(I="."+I),v+=I)})):v=wf(s),v&&(v[0]!=="."&&(v="."+v),i=(i||Br)+v)}var w=U_.exec(i||Br)||[];return l={},l[cn]=w[1],l.ns=(w[2]||Br).replace(F_,".").replace(mh,Br)[Su](".").sort().join("."),l}function cm(i,s,l){l===void 0&&(l=!0);var v=Km.get(i,hl,{},l),w=v[s];return w||(w=v[s]=[]),w}function bf(i,s,l,v){i&&s&&s[cn]&&(i[Sp]?i[Sp](s[cn],l,v):i[Vm]&&i[Vm](dv+s[cn],l))}function vv(i,s,l,v){var w=!1;return i&&s&&s[cn]&&l&&(i[vh]?(i[vh](s[cn],l,v),w=!0):i[Dd]&&(i[Dd](dv+s[cn],l),w=!0)),w}function hh(i,s,l,v){for(var w=s[cr];w--;){var I=s[w];I&&(!l.ns||l.ns===I.evtName.ns)&&(!v||v(I))&&(bf(i,I.evtName,I[Jn],I.capture),s[pt](w,1))}}function Xh(i,s,l){if(s[cn])hh(i,cm(i,s[cn]),s,l);else{var v=Km.get(i,hl,{});Ct(v,function(w,I){hh(i,I,s,l)}),bn(v)[cr]===0&&Km.kill(i,hl)}}function Cd(i,s){var l;return s?(at(s)?l=[i].concat(s):l=[i,s],l=pv("xx",l).ns[Su](".")):l=i,l}function Qh(i,s,l,v,w){var I;w===void 0&&(w=!1);var A=!1;if(i)try{var L=pv(s,v);if(A=vv(i,L,l,w),A&&Km.accept(i)){var Y=(I={guid:Zh++,evtName:L},I[Jn]=l,I.capture=w,I);cm(i,L.type)[Fr](Y)}}catch{}return A}function j_(i,s,l,v,w){if(w===void 0&&(w=!1),i)try{var I=pv(s,v),A=!1;Xh(i,I,function(L){return I.ns&&!l||L[Jn]===l?(A=!0,!0):!1}),A||bf(i,I,l,w)}catch{}}var _h="sampleRate",lm="ProcessLegacy",gh="http.method",Wm="https://dc.services.visualstudio.com",mv="/v2/track",xd="not_specified",yh=Qd({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),fm="split",Kr="length",Qs="toLowerCase",Pd="ingestionendpoint",wp="toString",hv="push",dm="removeItem",Ef="name",Ad="message",e_="count",bp="stringify",_l="pathname",hc="exceptions",Uo="parsedStack",eu="properties",gl="measurements",Tf="sizeInBytes",Ou="typeName",ku="severityLevel",Ep="problemGroup",Rd="isManual",t_="CreateFromInterface",_v="assembly",_c="fileName",Jm="hasFullStack",gv="level",If="method",yv="line",Sv="duration",Sh="receivedResponse";function wh(i,s,l){var v=s[Kr],w=r_(i,s);if(w[Kr]!==v){for(var I=0,A=w;l[A]!==void 0;)I++,A=Lr(w,0,147)+_(I);w=A}return w}function r_(i,s){var l;return s&&(s=Wn(ga(s)),s[Kr]>150&&(l=Lr(s,0,150),St(i,2,57,"name is too long.  It has been truncated to 150 characters.",{name:s},!0))),l||s}function gi(i,s,l){l===void 0&&(l=1024);var v;return s&&(l=l||1024,s=Wn(ga(s)),s[Kr]>l&&(v=Lr(s,0,l),St(i,2,61,"string value is too long. It has been truncated to "+l+" characters.",{value:s},!0))),v||s}function tu(i,s){return d(i,s,2048,66)}function Tp(i,s){var l;return s&&s[Kr]>32768&&(l=Lr(s,0,32768),St(i,2,56,"message is too long, it has been truncated to 32768 characters.",{message:s},!0)),l||s}function Gn(i,s){var l;if(s){var v=""+s;v[Kr]>32768&&(l=Lr(v,0,32768),St(i,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:s},!0))}return l||s}function Ip(i,s){if(s){var l={};Ct(s,function(v,w){if(yn(w)&&Gs())try{w=Fi()[bp](w)}catch(I){St(i,2,49,"custom property is not valid",{exception:I},!0)}w=gi(i,w,8192),v=wh(i,v,l),l[v]=w}),s=l}return s}function Np(i,s){if(s){var l={};Ct(s,function(v,w){v=wh(i,v,l),l[v]=w}),s=l}return s}function n_(i,s){return s&&d(i,s,128,69)[wp]()}function d(i,s,l,v){var w;return s&&(s=Wn(ga(s)),s[Kr]>l&&(w=Lr(s,0,l),St(i,2,v,"input is too long, it has been truncated to "+l+" characters.",{data:s},!0))),w||s}function _(i){var s="00"+i;return ri(s,s[Kr]-3)}var E=Bf()||{},C=0,O=[null,null,null,null,null];function $(i){var s=C,l=O,v=l[s];return E.createElement?l[s]||(v=l[s]=E.createElement("a")):v={host:q(i,!0)},v.href=i,s++,s>=l[Kr]&&(s=0),C=s,v}function q(i,s){var l=W(i,s)||"";if(l){var v=l.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(v!=null&&v[Kr]>3&&Ft(v[2])&&v[2][Kr]>0)return v[2]+(v[3]||"")}return l}function W(i,s){var l=null;if(i){var v=i.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(v!=null&&v[Kr]>2&&Ft(v[2])&&v[2][Kr]>0&&(l=v[2]||"",s&&v[Kr]>2)){var w=(v[1]||"")[Qs](),I=v[3]||"";(w==="http"&&I===":80"||w==="https"&&I===":443")&&(I=""),l+=I}}return l}var oe=[Wm+mv,"https://breeze.aimon.applicationinsights.io"+mv,"https://dc-int.services.visualstudio.com"+mv];function se(i){return ui(oe,i[Qs]())!==-1}function De(i,s,l,v){var w,I=v,A=v;if(s&&s[Kr]>0){var L=$(s);if(w=L.host,!I)if(L[_l]!=null){var Y=L.pathname[Kr]===0?"/":L[_l];Y.charAt(0)!=="/"&&(Y="/"+Y),A=L[_l],I=gi(i,l?l+" "+Y:Y)}else I=gi(i,s)}else w=v,I=v;return{target:w,name:I,data:A}}var qe=Wu({LocalStorage:0,SessionStorage:1}),Ye=void 0,Ne="";function me(i){try{if(Ve(ii()))return null;var s=new Date()[wp](),l=Ir(i===qe.LocalStorage?"localStorage":"sessionStorage"),v=Ne+s;l.setItem(v,s);var w=l.getItem(v)!==s;if(l[dm](v),!w)return l}catch{}return null}function Ue(){return Ke()?me(qe.SessionStorage):null}function Ee(i){Ne=i||""}function Ke(i){return(i||Ye===void 0)&&(Ye=!!me(qe.SessionStorage)),Ye}function Ce(i,s){var l=Ue();if(l!==null)try{return l.getItem(s)}catch(v){Ye=!1,St(i,2,2,"Browser failed read of session storage. "+fa(v),{exception:ar(v)})}return null}function Te(i,s,l){var v=Ue();if(v!==null)try{return v.setItem(s,l),!0}catch(w){Ye=!1,St(i,2,4,"Browser failed write to session storage. "+fa(w),{exception:ar(w)})}return!1}function Be(i,s){var l=Ue();if(l!==null)try{return l[dm](s),!0}catch(v){Ye=!1,St(i,2,6,"Browser failed removal of session storage item. "+fa(v),{exception:ar(v)})}return!1}var zt=";",Zt="=";function or(i){if(!i)return{};var s=i[fm](zt),l=Uv(s,function(w,I){var A=I[fm](Zt);if(A[Kr]===2){var L=A[0][Qs](),Y=A[1];w[L]=Y}return w},{});if(bn(l)[Kr]>0){if(l.endpointsuffix){var v=l.location?l.location+".":"";l[Pd]=l[Pd]||"https://"+v+"dc."+l.endpointsuffix}l[Pd]=l[Pd]||Wm,Ni(l[Pd],"/")&&(l[Pd]=l[Pd].slice(0,-1))}return l}var Dr=function(){function i(s,l,v){var w=this,I=this;I.ver=1,I.sampleRate=100,I.tags={},I[Ef]=gi(s,v)||xd,I.data=l,I.time=Kc(new Date),I.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return w.sampleRate===100?4:1},tags:1,data:1}}return i}(),jr=function(){function i(s,l,v,w){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var I=this;I.ver=2,I[Ef]=gi(s,l)||xd,I[eu]=Ip(s,v),I[gl]=Np(s,w)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.Event",i.dataType="EventData",i}(),ln="<no_method>",tn="error",Xt="stack",ea="stackDetails",Xe="errorSrc",ft="message",yr="description";function lr(i,s){var l=i;return l&&!Ft(l)&&(JSON&&JSON[bp]?(l=JSON[bp](i),s&&(!l||l==="{}")&&(rt(i[wp])?l=i[wp]():l=""+i)):l=""+i+" - (Missing JSON.stringify)"),l||""}function Et(i,s){var l=i;return i&&(l&&!Ft(l)&&(l=i[ft]||i[yr]||l),l&&!Ft(l)&&(l=lr(l,!0)),i.filename&&(l=l+" @"+(i.filename||"")+":"+(i.lineno||"?")+":"+(i.colno||"?"))),s&&s!=="String"&&s!=="Object"&&s!=="Error"&&qu(l||"",s)===-1&&(l=s+": "+l),l||""}function Rr(i){try{if(yn(i))return"hasFullStack"in i&&"typeName"in i}catch{}return!1}function It(i){try{if(yn(i))return"ver"in i&&"exceptions"in i&&"properties"in i}catch{}return!1}function Ma(i){return i&&i.src&&Ft(i.src)&&i.obj&&at(i.obj)}function ut(i){var s=i||"";Ft(s)||(Ft(s[Xt])?s=s[Xt]:s=""+s);var l=s[fm](`
`);return{src:s,obj:l}}function Tn(i){for(var s=[],l=i[fm](`
`),v=0;v<l[Kr];v++){var w=l[v];l[v+1]&&(w+="@"+l[v+1],v++),s[hv](w)}return{src:i,obj:s}}function In(i){var s=null;if(i)try{if(i[Xt])s=ut(i[Xt]);else if(i[tn]&&i[tn][Xt])s=ut(i[tn][Xt]);else if(i.exception&&i.exception[Xt])s=ut(i.exception[Xt]);else if(Ma(i))s=i;else if(Ma(i[ea]))s=i[ea];else if(Go()&&Go().opera&&i[ft])s=Tn(i[Ad]);else if(i.reason&&i.reason[Xt])s=ut(i.reason[Xt]);else if(Ft(i))s=ut(i);else{var l=i[ft]||i[yr]||"";Ft(i[Xe])&&(l&&(l+=`
`),l+=" from "+i[Xe]),l&&(s=ut(l))}}catch(v){s=ut(v)}return s||{src:"",obj:null}}function yi(i){var s="";return i&&(i.obj?Pt(i.obj,function(l){s+=l+`
`}):s=i.src||""),s}function gc(i){var s,l=i.obj;if(l&&l[Kr]>0){s=[];var v=0,w=0;Pt(l,function(ue){var xe=ue[wp]();if(ru.regex.test(xe)){var he=new ru(xe,v++);w+=he[Tf],s[hv](he)}});var I=32*1024;if(w>I)for(var A=0,L=s[Kr]-1,Y=0,B=A,X=L;A<L;){var le=s[A][Tf],fe=s[L][Tf];if(Y+=le+fe,Y>I){var de=X-B+1;s.splice(B,de);break}B=A,X=L,A++,L--}}return s}function Ui(i){var s="";if(i&&(s=i.typeName||i[Ef]||"",!s))try{var l=/function (.{1,200})\(/,v=l.exec(i.constructor[wp]());s=v&&v[Kr]>1?v[1]:""}catch{}return s}function Nf(i){if(i)try{if(!Ft(i)){var s=Ui(i),l=lr(i,!1);return(!l||l==="{}")&&(i[tn]&&(i=i[tn],s=Ui(i)),l=lr(i,!0)),qu(l,s)!==0&&s!=="String"?s+":"+l:l}}catch{}return""+(i||"")}var ys=function(){function i(s,l,v,w,I,A){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var L=this;L.ver=2,It(l)?(L[hc]=l[hc]||[],L[eu]=l[eu],L[gl]=l[gl],l[ku]&&(L[ku]=l[ku]),l.id&&(L.id=l.id,l[eu].id=l.id),l[Ep]&&(L[Ep]=l[Ep]),Ve(l[Rd])||(L[Rd]=l[Rd])):(v||(v={}),A&&(v.id=A),L[hc]=[new jo(s,l,v)],L[eu]=Ip(s,v),L[gl]=Np(s,w),I&&(L[ku]=I),A&&(L.id=A))}return i.CreateAutoException=function(s,l,v,w,I,A,L,Y){var B,X=Ui(I||A||s);return B={},B[Ad]=Et(s,X),B.url=l,B.lineNumber=v,B.columnNumber=w,B.error=Nf(I||A||s),B.evt=Nf(A||s),B[Ou]=X,B.stackDetails=In(L||I||A),B.errorSrc=Y,B},i.CreateFromInterface=function(s,l,v,w){var I=l[hc]&&$u(l[hc],function(L){return jo[t_](s,L)}),A=new i(s,Xi(Xi({},l),{exceptions:I}),v,w);return A},i.prototype.toInterface=function(){var s,l=this,v=l.exceptions,w=l.properties,I=l.measurements,A=l.severityLevel,L=l.problemGroup,Y=l.id,B=l.isManual,X=v instanceof Array&&$u(v,function(le){return le.toInterface()})||void 0;return s={ver:"4.0"},s[hc]=X,s.severityLevel=A,s.properties=w,s.measurements=I,s.problemGroup=L,s.id=Y,s.isManual=B,s},i.CreateSimpleException=function(s,l,v,w,I,A){var L;return{exceptions:[(L={},L[Jm]=!0,L.message=s,L.stack=I,L.typeName=l,L)]}},i.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",i.dataType="ExceptionData",i.formatError=Nf,i}(),jo=function(){function i(s,l,v){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var w=this;if(Rr(l))w[Ou]=l[Ou],w[Ad]=l[Ad],w[Xt]=l[Xt],w[Uo]=l[Uo]||[],w[Jm]=l[Jm];else{var I=l,A=I&&I.evt;Gt(I)||(I=I[tn]||A||I),w[Ou]=gi(s,Ui(I))||xd,w[Ad]=Tp(s,Et(l||I,w[Ou]))||xd;var L=l[ea]||In(l);w[Uo]=gc(L),at(w[Uo])&&$u(w[Uo],function(Y){Y[_v]=gi(s,Y[_v]),Y[_c]=gi(s,Y[_c])}),w[Xt]=Gn(s,yi(L)),w.hasFullStack=at(w.parsedStack)&&w.parsedStack[Kr]>0,v&&(v[Ou]=v[Ou]||w[Ou])}}return i.prototype.toInterface=function(){var s,l=this,v=l[Uo]instanceof Array&&$u(l[Uo],function(I){return I.toInterface()}),w=(s={id:l.id,outerId:l.outerId,typeName:l[Ou],message:l[Ad],hasFullStack:l[Jm],stack:l[Xt]},s[Uo]=v||void 0,s);return w},i.CreateFromInterface=function(s,l){var v=l[Uo]instanceof Array&&$u(l[Uo],function(I){return ru[t_](I)})||l[Uo],w=new i(s,Xi(Xi({},l),{parsedStack:v}));return w},i}(),ru=function(){function i(s,l){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var v=this;if(v[Tf]=0,typeof s=="string"){var w=s;v[gv]=l,v[If]=ln,v[_v]=Wn(w),v[_c]="",v[yv]=0;var I=w.match(i.regex);I&&I[Kr]>=5&&(v[If]=Wn(I[2])||v[If],v[_c]=Wn(I[4]),v[yv]=parseInt(I[5])||0)}else v[gv]=s[gv],v[If]=s[If],v[_v]=s[_v],v[_c]=s[_c],v[yv]=s[yv],v[Tf]=0;v.sizeInBytes+=v.method[Kr],v.sizeInBytes+=v.fileName[Kr],v.sizeInBytes+=v.assembly[Kr],v[Tf]+=i.baseSize,v.sizeInBytes+=v.level.toString()[Kr],v.sizeInBytes+=v.line.toString()[Kr]}return i.CreateFromInterface=function(s){return new i(s,null)},i.prototype.toInterface=function(){var s=this;return{level:s[gv],method:s[If],assembly:s[_v],fileName:s[_c],line:s[yv]}},i.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,i.baseSize=58,i}(),ta=function(){function i(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return i}(),Jr=function(){function i(s,l,v,w,I,A,L,Y,B){this.aiDataContract={ver:1,metrics:1,properties:0};var X=this;X.ver=2;var le=new ta;le[e_]=w>0?w:void 0,le.max=isNaN(A)||A===null?void 0:A,le.min=isNaN(I)||I===null?void 0:I,le[Ef]=gi(s,l)||xd,le.value=v,le.stdDev=isNaN(L)||L===null?void 0:L,X.metrics=[le],X[eu]=Ip(s,Y),X[gl]=Np(s,B)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",i.dataType="MetricData",i}(),ra="";function La(i){(isNaN(i)||i<0)&&(i=0),i=Math.round(i);var s=ra+i%1e3,l=ra+Math.floor(i/1e3)%60,v=ra+Math.floor(i/(1e3*60))%60,w=ra+Math.floor(i/(1e3*60*60))%24,I=Math.floor(i/(1e3*60*60*24));return s=s[Kr]===1?"00"+s:s[Kr]===2?"0"+s:s,l=l[Kr]<2?"0"+l:l,v=v[Kr]<2?"0"+v:v,w=w[Kr]<2?"0"+w:w,(I>0?I+".":ra)+w+":"+v+":"+l+"."+s}var nu=function(){function i(s,l,v,w,I,A,L){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var Y=this;Y.ver=2,Y.id=n_(s,L),Y.url=tu(s,v),Y[Ef]=gi(s,l)||xd,isNaN(w)||(Y[Sv]=La(w)),Y[eu]=Ip(s,I),Y[gl]=Np(s,A)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",i.dataType="PageviewData",i}(),yc=function(){function i(s,l,v,w,I,A,L,Y,B,X,le,fe){B===void 0&&(B="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var de=this;de.ver=2,de.id=l,de[Sv]=La(I),de.success=A,de.resultCode=L+"",de.type=gi(s,B);var ue=De(s,v,Y,w);de.data=tu(s,w)||ue.data,de.target=gi(s,ue.target),X&&(de.target="".concat(de.target," | ").concat(X)),de[Ef]=gi(s,ue[Ef]),de[eu]=Ip(s,le),de[gl]=Np(s,fe)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",i.dataType="RemoteDependencyData",i}(),ji=function(){function i(s,l,v,w,I){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var A=this;A.ver=2,l=l||xd,A[Ad]=Tp(s,l),A[eu]=Ip(s,w),A[gl]=Np(s,I),v&&(A[ku]=v)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.Message",i.dataType="MessageData",i}(),Df=function(){function i(s,l,v,w,I,A,L){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var Y=this;Y.ver=2,Y.url=tu(s,v),Y[Ef]=gi(s,l)||xd,Y[eu]=Ip(s,I),Y[gl]=Np(s,A),L&&(Y.domProcessing=L.domProcessing,Y[Sv]=L[Sv],Y.networkConnect=L.networkConnect,Y.perfTotal=L.perfTotal,Y[Sh]=L[Sh],Y.sentRequest=L.sentRequest)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",i.dataType="PageviewPerformanceData",i}(),au=function(){function i(s,l){this.aiDataContract={baseType:1,baseData:1},this.baseType=s,this.baseData=l}return i}(),pm=Wu({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function Sc(i){var s="ai."+i+".";return function(l){return s+l}}var Cf=Sc("application"),_a=Sc("device"),Dp=Sc("location"),xf=Sc("operation"),wv=Sc("session"),Mu=Sc("user"),Si=Sc("cloud"),Pf=Sc("internal"),a=function(i){Fl(s,i);function s(){return i.call(this)||this}return s}(lp({applicationVersion:Cf("ver"),applicationBuild:Cf("build"),applicationTypeId:Cf("typeId"),applicationId:Cf("applicationId"),applicationLayer:Cf("layer"),deviceId:_a("id"),deviceIp:_a("ip"),deviceLanguage:_a("language"),deviceLocale:_a("locale"),deviceModel:_a("model"),deviceFriendlyName:_a("friendlyName"),deviceNetwork:_a("network"),deviceNetworkName:_a("networkName"),deviceOEMName:_a("oemName"),deviceOS:_a("os"),deviceOSVersion:_a("osVersion"),deviceRoleInstance:_a("roleInstance"),deviceRoleName:_a("roleName"),deviceScreenResolution:_a("screenResolution"),deviceType:_a("type"),deviceMachineName:_a("machineName"),deviceVMName:_a("vmName"),deviceBrowser:_a("browser"),deviceBrowserVersion:_a("browserVersion"),locationIp:Dp("ip"),locationCountry:Dp("country"),locationProvince:Dp("province"),locationCity:Dp("city"),operationId:xf("id"),operationName:xf("name"),operationParentId:xf("parentId"),operationRootId:xf("rootId"),operationSyntheticSource:xf("syntheticSource"),operationCorrelationVector:xf("correlationVector"),sessionId:wv("id"),sessionIsFirst:wv("isFirst"),sessionIsNew:wv("isNew"),userAccountAcquisitionDate:Mu("accountAcquisitionDate"),userAccountId:Mu("accountId"),userAgent:Mu("userAgent"),userId:Mu("id"),userStoreRegion:Mu("storeRegion"),userAuthUserId:Mu("authUserId"),userAnonymousUserAcquisitionDate:Mu("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Mu("authUserAcquisitionDate"),cloudName:Si("name"),cloudRole:Si("role"),cloudRoleVer:Si("roleVer"),cloudRoleInstance:Si("roleInstance"),cloudEnvironment:Si("environment"),cloudLocation:Si("location"),cloudDeploymentUnit:Si("deploymentUnit"),internalNodeName:Pf("nodeName"),internalSdkVersion:Pf("sdkVersion"),internalAgentVersion:Pf("agentVersion"),internalSnippet:Pf("snippet"),internalSdkSrc:Pf("sdkSrc")})),c=new a;function p(i,s){j_(i,null,null,s)}function g(i){var s=Bf(),l=Vo(),v=!1,w=[],I=1;l&&!Ve(l.onLine)&&!l.onLine&&(I=2);var A=0,L=fe(),Y=Cd(tl("OfflineListener"),i);try{if(X(Go())&&(v=!0),s){var B=s.body||s;B.ononline&&X(B)&&(v=!0)}}catch{v=!1}function X(Ge){var ct=!1;return Ge&&(ct=Qh(Ge,"online",xe,Y),ct&&Qh(Ge,"offline",he,Y)),ct}function le(){return L}function fe(){return!(A===2||I===2)}function de(){var Ge=fe();L!==Ge&&(L=Ge,Pt(w,function(ct){var Sr={isOnline:L,rState:I,uState:A};try{ct(Sr)}catch{}}))}function ue(Ge){A=Ge,de()}function xe(){I=1,de()}function he(){I=2,de()}function ke(){var Ge=Go();if(Ge&&v){if(p(Ge,Y),s){var ct=s.body||s;nt(ct.ononline)||p(ct,Y)}v=!1}}function Me(Ge){return w[hv](Ge),{rm:function(){var ct=w.indexOf(Ge);if(ct>-1)return w.splice(ct,1)}}}return{isOnline:le,isListening:function(){return v},unload:ke,addListener:Me,setOnlineState:ue}}var b="AppInsightsChannelPlugin",x="duration",R="tags",P="deviceType",k="data",j="name",z="traceID",G="length",K="stringify",te="measurements",Z="dataType",_e="envelopeType",ye="toString",Fe="_get",ze="enqueue",et="count",rr="eventsLimitInMem",sr="push",Un="item",fn="emitLineDelimitedJson",jn="clear",Yi="createNew",wi="markAsSent",Af="clearSent",vm="bufferOverride",Rf="BUFFER_KEY",Qe="SENT_BUFFER_KEY",jt="concat",Nn="MAX_BUFFER_SIZE",Oe="triggerSend",Nt="diagLog",na="initialize",so="_sender",Yo="endpointUrl",Or="instrumentationKey",bi="customHeaders",Xa="maxBatchSizeInBytes",uo="onunloadDisableBeacon",Of="isBeaconApiDisabled",Lu="alwaysUseXhrOverride",bv="disableXhr",Od="enableSessionStorageBuffer",kf="_buffer",Ev="onunloadDisableFetch",Zm="disableSendBeaconSplit",Ia="enableSendPromise",co="getSenderInst",be="unloadTransports",mt="convertUndefined",Vt="maxBatchInterval",Rt="serialize",Kt="_onError",Rn="_onPartialSuccess",mn="_onSuccess",Na="itemsReceived",lo="itemsAccepted",$o="oriPayload",Mf="baseType",Tv="sampleRate",bh="eventsSendRequest",Ig="getSamplingScore",Ny="getHashCodeScore",a_="baseType",Yn="baseData",Fa="properties",Y_="true";function Ua(i,s,l){return wu(i,s,l,Yr)}function eS(i,s,l){var v=l[R]=l[R]||{},w=s.ext=s.ext||{},I=s[R]=s[R]||[],A=w.user;A&&(Ua(v,c.userAuthUserId,A.authId),Ua(v,c.userId,A.id||A.localId));var L=w.app;L&&Ua(v,c.sessionId,L.sesId);var Y=w.device;Y&&(Ua(v,c.deviceId,Y.id||Y.localId),Ua(v,c[P],Y.deviceClass),Ua(v,c.deviceIp,Y.ip),Ua(v,c.deviceModel,Y.model),Ua(v,c[P],Y[P]));var B=s.ext.web;if(B){Ua(v,c.deviceLanguage,B.browserLang),Ua(v,c.deviceBrowserVersion,B.browserVer),Ua(v,c.deviceBrowser,B.browser);var X=l[k]=l[k]||{},le=X[Yn]=X[Yn]||{},fe=le[Fa]=le[Fa]||{};Ua(fe,"domain",B.domain),Ua(fe,"isManual",B.isManual?Y_:null),Ua(fe,"screenRes",B.screenRes),Ua(fe,"userConsent",B.userConsent?Y_:null)}var de=w.os;de&&(Ua(v,c.deviceOS,de[j]),Ua(v,c.deviceOSVersion,de.osVer));var ue=w.trace;ue&&(Ua(v,c.operationParentId,ue.parentID),Ua(v,c.operationName,gi(i,ue[j])),Ua(v,c.operationId,ue[z]));for(var xe={},he=I[G]-1;he>=0;he--){var ke=I[he];Ct(ke,function(Ge,ct){xe[Ge]=ct}),I.splice(he,1)}Ct(I,function(Ge,ct){xe[Ge]=ct});var Me=Xi(Xi({},v),xe);Me[c.internalSdkVersion]||(Me[c.internalSdkVersion]=gi(i,"javascript:".concat(AI.Version),64)),l[R]=qs(Me)}function Xm(i,s,l){Ve(i)||Ct(i,function(v,w){Wt(w)?l[v]=w:Ft(w)?s[v]=w:Gs()&&(s[v]=Fi()[K](w))})}function Eh(i,s){Ve(i)||Ct(i,function(l,v){i[l]=v||s})}function Th(i,s,l,v){var w=new Dr(i,v,s);Ua(w,"sampleRate",l[_h]),(l[Yn]||{}).startTime&&(w.time=Kc(l[Yn].startTime)),w.iKey=l.iKey;var I=l.iKey.replace(/-/g,"");return w[j]=w[j].replace("{0}",I),eS(i,l,w),l[R]=l[R]||[],qs(w)}function Ih(i,s){Ve(s[Yn])&&St(i,1,46,"telemetryItem.baseData cannot be null.")}var AI={Version:"3.3.4"};function RI(i,s,l){Ih(i,s);var v=s[Yn][te]||{},w=s[Yn][Fa]||{};Xm(s[k],w,v),Ve(l)||Eh(w,l);var I=s[Yn];if(Ve(I))return xu(i,"Invalid input for dependency data"),null;var A=I[Fa]&&I[Fa][gh]?I[Fa][gh]:"GET",L=new yc(i,I.id,I.target,I[j],I[x],I.success,I.responseCode,A,I.type,I.correlationContext,w,v),Y=new au(yc[Z],L);return Th(i,yc[_e],s,Y)}function tS(i,s,l){Ih(i,s);var v={},w={};s[a_]!==jr[Z]&&(v.baseTypeSource=s[a_]),s[a_]===jr[Z]?(v=s[Yn][Fa]||{},w=s[Yn][te]||{}):s[Yn]&&Xm(s[Yn],v,w),Xm(s[k],v,w),Ve(l)||Eh(v,l);var I=s[Yn][j],A=new jr(i,I,v,w),L=new au(jr[Z],A);return Th(i,jr[_e],s,L)}function OI(i,s,l){Ih(i,s);var v=s[Yn][te]||{},w=s[Yn][Fa]||{};Xm(s[k],w,v),Ve(l)||Eh(w,l);var I=s[Yn],A=ys.CreateFromInterface(i,I,w,v),L=new au(ys[Z],A);return Th(i,ys[_e],s,L)}function kI(i,s,l){Ih(i,s);var v=s[Yn],w=v[Fa]||{},I=v[te]||{};Xm(s[k],w,I),Ve(l)||Eh(w,l);var A=new Jr(i,v[j],v.average,v.sampleCount,v.min,v.max,v.stdDev,w,I),L=new au(Jr[Z],A);return Th(i,Jr[_e],s,L)}function MI(i,s,l){Ih(i,s);var v,w=s[Yn];!Ve(w)&&!Ve(w[Fa])&&!Ve(w[Fa][x])?(v=w[Fa][x],delete w[Fa][x]):!Ve(s[k])&&!Ve(s[k][x])&&(v=s[k][x],delete s[k][x]);var I=s[Yn],A;((s.ext||{}).trace||{})[z]&&(A=s.ext.trace[z]);var L=I.id||A,Y=I[j],B=I.uri,X=I[Fa]||{},le=I[te]||{};if(Ve(I.refUri)||(X.refUri=I.refUri),Ve(I.pageType)||(X.pageType=I.pageType),Ve(I.isLoggedIn)||(X.isLoggedIn=I.isLoggedIn[ye]()),!Ve(I[Fa])){var fe=I[Fa];Ct(fe,function(xe,he){X[xe]=he})}Xm(s[k],X,le),Ve(l)||Eh(X,l);var de=new nu(i,Y,B,v,X,le,L),ue=new au(nu[Z],de);return Th(i,nu[_e],s,ue)}function LI(i,s,l){Ih(i,s);var v=s[Yn],w=v[j],I=v.uri||v.url,A=v[Fa]||{},L=v[te]||{};Xm(s[k],A,L),Ve(l)||Eh(A,l);var Y=new Df(i,w,I,void 0,A,L,v),B=new au(Df[Z],Y);return Th(i,Df[_e],s,B)}function FI(i,s,l){Ih(i,s);var v=s[Yn].message,w=s[Yn].severityLevel,I=s[Yn][Fa]||{},A=s[Yn][te]||{};Xm(s[k],I,A),Ve(l)||Eh(I,l);var L=new ji(i,v,w,I,A),Y=new au(ji[Z],L);return Th(i,ji[_e],s,Y)}var rS=function(){function i(s,l){var v=[],w=!1,I=l.maxRetryCnt;this[Fe]=function(){return v},this._set=function(A){return v=A,v},Pa(i,this,function(A){A[ze]=function(L){if(A[et]()>=l[rr]){w||(St(s,2,105,"Maximum in-memory buffer size reached: "+A[et](),!0),w=!0);return}L.cnt=L.cnt||0,!(!Ve(I)&&L.cnt>I)&&v[sr](L)},A[et]=function(){return v[G]},A.size=function(){for(var L=v[G],Y=0;Y<v[G];Y++)L+=v[Y].item[G];return l[fn]||(L+=2),L},A[jn]=function(){v=[],w=!1},A.getItems=function(){return v.slice(0)},A.batchPayloads=function(L){if(L&&L[G]>0){var Y=[];Pt(L,function(X){Y[sr](X[Un])});var B=l[fn]?Y.join(`
`):"["+Y.join(",")+"]";return B}return null},A[Yi]=function(L,Y,B){var X=v.slice(0);L=L||s,Y=Y||{};var le=B?new nS(L,Y):new Dy(L,Y);return Pt(X,function(fe){le[ze](fe)}),le}})}return i.__ieDyn=1,i}(),Dy=function(i){Fl(s,i);function s(l,v){var w=i.call(this,l,v)||this;return Pa(s,w,function(I,A){I[wi]=function(L){A[jn]()},I[Af]=function(L){}}),w}return s.__ieDyn=1,s}(rS),UI=["AI_buffer","AI_sentBuffer"],nS=function(i){Fl(s,i);function s(v,w){var I=i.call(this,v,w)||this,A=!1,L=w==null?void 0:w.namePrefix,Y=w[vm]||{getItem:Ce,setItem:Te},B=Y.getItem,X=Y.setItem,le=w.maxRetryCnt;return Pa(s,I,function(fe,de){var ue=ct(s[Rf]),xe=ct(s[Qe]),he=Xr(),ke=xe[jt](he),Me=fe._set(ue[jt](ke));Me[G]>s[Nn]&&(Me[G]=s[Nn]),Zr(s[Qe],[]),Zr(s[Rf],Me),fe[ze]=function(Qt){if(fe[et]()>=s[Nn]){A||(St(v,2,67,"Maximum buffer size reached: "+fe[et](),!0),A=!0);return}Qt.cnt=Qt.cnt||0,!(!Ve(le)&&Qt.cnt>le)&&(de[ze](Qt),Zr(s.BUFFER_KEY,fe[Fe]()))},fe[jn]=function(){de[jn](),Zr(s.BUFFER_KEY,fe[Fe]()),Zr(s[Qe],[]),A=!1},fe[wi]=function(Qt){Zr(s[Rf],fe._set(Ge(Qt,fe[Fe]())));var Yt=ct(s[Qe]);Yt instanceof Array&&Qt instanceof Array&&(Yt=Yt[jt](Qt),Yt[G]>s[Nn]&&(St(v,1,67,"Sent buffer reached its maximum size: "+Yt[G],!0),Yt[G]=s[Nn]),Zr(s[Qe],Yt))},fe[Af]=function(Qt){var Yt=ct(s[Qe]);Yt=Ge(Qt,Yt),Zr(s[Qe],Yt)},fe[Yi]=function(Qt,Yt,Wr){Wr=!!Wr;var ja=fe[Fe]().slice(0),aa=ct(s[Qe]).slice(0);Qt=Qt||v,Yt=Yt||{},fe[jn]();var Je=Wr?new s(Qt,Yt):new Dy(Qt,Yt);return Pt(ja,function($t){Je[ze]($t)}),Wr&&Je[wi](aa),Je};function Ge(Qt,Yt){var Wr=[],ja=[];return Pt(Qt,function(aa){ja[sr](aa[Un])}),Pt(Yt,function(aa){!rt(aa)&&ui(ja,aa[Un])===-1&&Wr[sr](aa)}),Wr}function ct(Qt){var Yt=Qt;return Yt=L?L+"_"+Yt:Yt,Sr(Yt)}function Sr(Qt){try{var Yt=B(v,Qt);if(Yt){var Wr=Fi().parse(Yt);if(Ft(Wr)&&(Wr=Fi().parse(Wr)),Wr&&at(Wr))return Wr}}catch(ja){St(v,1,42," storage key: "+Qt+", "+fa(ja),{exception:ar(ja)})}return[]}function Zr(Qt,Yt){var Wr=Qt;try{Wr=L?L+"_"+Wr:Wr;var ja=JSON[K](Yt);X(v,Wr,ja)}catch(aa){X(v,Wr,JSON[K]([])),St(v,2,41," storage key: "+Wr+", "+fa(aa)+". Buffer cleared",{exception:ar(aa)})}}function Xr(){var Qt=[];try{return Pt(UI,function(Yt){var Wr=_n(Yt);if(Qt=Qt[jt](Wr),L){var ja=L+"_"+Yt,aa=_n(ja);Qt=Qt[jt](aa)}}),Qt}catch(Yt){St(v,2,41,"Transfer events from previous buffers: "+fa(Yt)+". previous Buffer items can not be removed",{exception:ar(Yt)})}return[]}function _n(Qt){try{var Yt=Sr(Qt),Wr=[];return Pt(Yt,function(ja){var aa={item:ja,cnt:0};Wr[sr](aa)}),Be(v,Qt),Wr}catch{}return[]}}),I}var l;return l=s,s.VERSION="_1",s.BUFFER_KEY="AI_buffer"+l.VERSION,s.SENT_BUFFER_KEY="AI_sentBuffer"+l.VERSION,s.MAX_BUFFER_SIZE=2e3,s}(rS),jI=function(){function i(s){Pa(i,this,function(l){l[Rt]=function(A){var L=v(A,"root");try{return Fi()[K](L)}catch(Y){St(s,1,48,Y&&rt(Y[ye])?Y[ye]():"Error serializing object",null,!0)}};function v(A,L){var Y="__aiCircularRefCheck",B={};if(!A)return St(s,1,48,"cannot serialize object because it is null or undefined",{name:L},!0),B;if(A[Y])return St(s,2,50,"Circular reference detected while serializing object",{name:L},!0),B;if(!A.aiDataContract){if(L==="measurements")B=I(A,"number",L);else if(L==="properties")B=I(A,"string",L);else if(L==="tags")B=I(A,"string",L);else if(at(A))B=w(A,L);else{St(s,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:L},!0);try{Fi()[K](A),B=A}catch(X){St(s,1,48,X&&rt(X[ye])?X[ye]():"Error serializing object",null,!0)}}return B}return A[Y]=!0,Ct(A.aiDataContract,function(X,le){var fe=rt(le)?le()&1:le&1,de=rt(le)?le()&4:le&4,ue=le&2,xe=A[X]!==void 0,he=yn(A[X])&&A[X]!==null;if(fe&&!xe&&!ue)St(s,1,24,"Missing required field specification. The field is required but not present on source",{field:X,name:L});else if(!de){var ke=void 0;he?ue?ke=w(A[X],X):ke=v(A[X],X):ke=A[X],ke!==void 0&&(B[X]=ke)}}),delete A[Y],B}function w(A,L){var Y;if(A)if(!at(A))St(s,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:L},!0);else{Y=[];for(var B=0;B<A[G];B++){var X=A[B],le=v(X,L+"["+B+"]");Y[sr](le)}}return Y}function I(A,L,Y){var B;return A&&(B={},Ct(A,function(X,le){if(L==="string")le===void 0?B[X]="undefined":le===null?B[X]="null":le[ye]?B[X]=le[ye]():B[X]="invalid field: toString() is not defined.";else if(L==="number")if(le===void 0)B[X]="undefined";else if(le===null)B[X]="null";else{var fe=parseFloat(le);B[X]=fe}else B[X]="invalid field: "+Y+" is of unknown type.",St(s,1,B[X],null,!0)})),B}})}return i.__ieDyn=1,i}(),YI=8,$I=function(){function i(){}return i.prototype.getHashCodeScore=function(s){var l=this.getHashCode(s)/i.INT_MAX_VALUE;return l*100},i.prototype.getHashCode=function(s){if(s==="")return 0;for(;s[G]<YI;)s=s[jt](s);for(var l=5381,v=0;v<s[G];++v)l=(l<<5)+l+s.charCodeAt(v),l=l&l;return Math.abs(l)},i.INT_MAX_VALUE=2147483647,i}(),qI=function(){function i(){var s=this,l=new $I,v=new a;s[Ig]=function(w){var I=0;return w[R]&&w[R][v.userId]?I=l.getHashCodeScore(w[R][v.userId]):w.ext&&w.ext.user&&w.ext.user.id?I=l[Ny](w.ext.user.id):w[R]&&w[R][v.operationId]?I=l.getHashCodeScore(w[R][v.operationId]):w.ext&&w.ext.telemetryTrace&&w.ext.telemetryTrace[z]?I=l.getHashCodeScore(w.ext.telemetryTrace[z]):I=Math.random()*100,I}}return i}(),BI=function(){function i(s,l){this.INT_MAX_VALUE=2147483647;var v=l||Ws(null);(s>100||s<0)&&(v.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:s},!0),s=100),this[Tv]=s,this.samplingScoreGenerator=new qI}return i.prototype.isSampledIn=function(s){var l=this[Tv],v=!1;return l==null||l>=100||s.baseType===Jr[Z]?!0:(v=this.samplingScoreGenerator[Ig](s)<l,v)},i}(),Da,mm,Iv=void 0,aS="",zI=65e3;function iS(i){try{return i.responseText}catch{}return null}function HI(i){return i&&i.sendPOST}var oS=qa((Da={endpointUrl:sl(Yr,Wm+mv)},Da[fn]=no(),Da[Vt]=15e3,Da[Xa]=102400,Da.disableTelemetry=no(),Da[Od]=no(!0),Da.isRetryDisabled=no(),Da[Of]=no(!0),Da[Zm]=no(!0),Da[bv]=no(),Da[Ev]=no(),Da[uo]=no(),Da[Or]=Iv,Da.namePrefix=Iv,Da.samplingPercentage=sl(GI,100),Da[bi]=Iv,Da[mt]=Iv,Da[rr]=1e4,Da[vm]=!1,Da.httpXHROverride={isVal:HI,v:Iv},Da[Lu]=no(),Da.transports=Iv,Da.retryCodes=Iv,Da.maxRetryCnt={isVal:Wt,v:10},Da));function GI(i){return!isNaN(i)&&i>0&&i<=100}var VI=(mm={},mm[jr.dataType]=tS,mm[ji.dataType]=FI,mm[nu.dataType]=MI,mm[Df.dataType]=LI,mm[ys.dataType]=OI,mm[Jr.dataType]=kI,mm[yc.dataType]=RI,mm),sS=function(i){Fl(s,i);function s(){var l=i.call(this)||this;l.priority=1001,l.identifier=b;var v,w,I,A,L,Y,B,X=0,le,fe,de,ue,xe,he,ke,Me,Ge,ct,Sr,Zr,Xr,_n,Qt,Yt,Wr,ja,aa,Je,$t,Dn,Le,nr,ia,Cn,Ss;return Pa(s,l,function(Se,fo){fS(),Se.pause=function(){rh(),I=!0},Se.resume=function(){I&&(I=!1,w=null,gn(),c_())},Se.flush=function(ie,we,_t){if(ie===void 0&&(ie=!0),!I){rh();try{return Se[Oe](ie,null,_t||1)}catch(gt){St(Se[Nt](),1,22,"flush failed, telemetry will not be collected: "+fa(gt),{exception:ar(gt)})}}},Se.onunloadFlush=function(){if(!I)if(ke||Je)try{return Se[Oe](!0,ou,2)}catch(ie){St(Se[Nt](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+fa(ie),{exception:ar(ie)})}else Se.flush(!1)},Se.addHeader=function(ie,we){B[ie]=we},Se[na]=function(ie,we,_t,gt){Se.isInitialized()&&St(Se[Nt](),1,28,"Sender is already initialized"),fo[na](ie,we,_t,gt);var Er=Se.identifier;L=new jI(we.logger),v=0,w=null,Se[so]=null,Y=0;var mr=Se[Nt]();de=Cd(tl("Sender"),we.evtNamespace&&we.evtNamespace()),fe=g(de),Se._addHook(Cu(ie,function(zr){var Ca=zr.cfg;Ca.storagePrefix&&Ee(Ca.storagePrefix);var Md=dl(null,Ca,we),Cr=Md.getExtCfg(Er,oS),dS=Cr[Yo];if(ue&&dS===ue){var Py=Ca[Yo];Py&&Py!==dS&&(Cr[Yo]=Py)}tr(Cr[Or])&&(Cr[Or]=Ca[Or]),Gr(Se,"_senderConfig",{g:function(){return Cr}}),xe!==Cr[Yo]&&(ue=xe=Cr[Yo]),we.activeStatus()===Ci.PENDING?Se.pause():we.activeStatus()===Ci.ACTIVE&&Se.resume(),ct&&ct!==Cr[bi]&&Pt(ct,function(su){delete B[su.header]}),he=Cr[Xa],ke=(Cr[uo]===!1||Cr[Of]===!1)&&Vs(),Me=Cr[uo]===!1&&Vs(),Ge=Cr[Of]===!1&&Vs(),Je=Cr[Lu],$t=!!Cr[bv],Ss=Cr.retryCodes;var Ay=Cr[vm],l_=!!Cr[Od]&&(!!Ay||Ke()),pS=Cr.namePrefix,ZI=l_!==Yt||l_&&ja!==pS||l_&&Wr!==Ay;if(Se[kf]){if(ZI)try{Se._buffer=Se._buffer[Yi](mr,Cr,l_)}catch(su){St(Se[Nt](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+fa(su),{exception:ar(su)})}gn()}else Se[kf]=l_?new nS(mr,Cr):new Dy(mr,Cr);ja=pS,Yt=l_,Wr=Ay,Dn=!Cr[Ev]&&va(!0),ia=!!Cr[Zm],Se._sample=new BI(Cr.samplingPercentage,mr),Zr=Cr[Or],!tr(Zr)&&!lS(Zr,Ca)&&St(mr,1,100,"Invalid Instrumentation key "+Zr),ct=Cr[bi],Ft(ue)&&!se(ue)&&ct&&ct[G]>0?Pt(ct,function(su){l.addHeader(su.header,su.value)}):ct=null,aa=Cr[Ia];var vS=ws();Cn?Cn.SetConfig(vS):(Cn=new fv,Cn[na](vS,mr));var xg=Cr.httpXHROverride,Pg=null,B_=null,XI=Gl([3,1,2],Cr.transports);Pg=Cn&&Cn[co](XI,!1);var Ry=Cn&&Cn.getFallbackInst();Le=function(su,Nh){return xt(Ry,su,Nh)},nr=function(su,Nh){return xt(Ry,su,Nh,!1)},Pg=Je?xg:Pg||xg||Ry,Se[so]=function(su,Nh){return xt(Pg,su,Nh)},Dn&&(le=u_);var Oy=Gl([3,1],Cr[be]);Dn||(Oy=Oy.filter(function(su){return su!==2})),B_=Cn&&Cn[co](Oy,!0),B_=Je?xg:B_||xg,(Je||Cr[be]||!le)&&B_&&(le=function(su,Nh){return xt(B_,su,Nh)}),le||(le=Le),Sr=Cr.disableTelemetry,Xr=Cr[mt]||Iv,_n=Cr.isRetryDisabled,Qt=Cr[Vt]}))},Se.processTelemetry=function(ie,we){var _t;we=Se._getTelCtx(we);var gt=we[Nt]();try{var Er=xp(ie,gt);if(!Er)return;var mr=th(ie,gt);if(!mr)return;var zr=L[Rt](mr),Ca=Se[kf];gn(zr);var Md=(_t={},_t[Un]=zr,_t.cnt=0,_t);Ca[ze](Md),c_()}catch(Cr){St(gt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+fa(Cr),{exception:ar(Cr)})}Se.processNext(ie,we)},Se.isCompletelyIdle=function(){return!I&&X===0&&Se._buffer[et]()===0},Se.getOfflineListener=function(){return fe},Se._xhrReadyStateChange=function(ie,we,_t){if(!Ap(we))return kd(ie,we,_t)},Se[Oe]=function(ie,we,_t){ie===void 0&&(ie=!0);var gt;if(!I)try{var Er=Se[kf];if(Sr)Er[jn]();else if(Er[et]()>0){var mr=Er.getItems();Cg(_t||0,ie),we?gt=we.call(Se,mr,ie):gt=Se[so](mr,ie)}rh()}catch(Ca){var zr=pa();(!zr||zr>9)&&St(Se[Nt](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+fa(Ca),{exception:ar(Ca)})}return gt},Se.getOfflineSupport=function(){var ie;return ie={getUrl:function(){return ue},createPayload:Ie},ie[Rt]=Ya,ie.batch=iu,ie.shouldProcess=function(we){return!!xp(we)},ie},Se._doTeardown=function(ie,we){Se.onunloadFlush(),ol(fe,!1),fS()},Se[Kt]=function(ie,we,_t){if(!Ap(ie))return wc(ie,we)},Se[Rn]=function(ie,we){if(!Ap(ie))return Qm(ie,we)},Se[mn]=function(ie,we){if(!Ap(ie))return Cp(ie)},Se._xdrOnLoad=function(ie,we){if(!Ap(we))return Qa(ie,we)};function Qa(ie,we){var _t=iS(ie);if(ie&&(_t+""=="200"||_t===""))v=0,Se[mn](we,0);else{var gt=Sf(_t);gt&&gt[Na]&&gt[Na]>gt[lo]&&!_n?Se[Rn](we,gt):Se[Kt](we,us(ie))}}function ws(){var ie;try{var we={xdrOnComplete:function(gt,Er,mr){var zr=eh(mr);if(zr)return Qa(gt,zr)},fetchOnComplete:function(gt,Er,mr,zr){var Ca=eh(zr);if(Ca)return $a(gt.status,Ca,gt.url,Ca[G],gt.statusText,mr||"")},xhrOnComplete:function(gt,Er,mr){var zr=eh(mr);if(zr)return kd(gt,zr,zr[G])},beaconOnRetry:function(gt,Er,mr){return Pp(gt,Er,mr)}},_t=(ie={},ie[Ia]=aa,ie.isOneDs=!1,ie.disableCredentials=!1,ie[bv]=$t,ie.disableBeacon=!Ge,ie.disableBeaconSync=!Me,ie.senderOnCompleteCallBack=we,ie);return _t}catch{}return null}function kd(ie,we,_t){ie.readyState===4&&$a(ie.status,we,ie.responseURL,_t,vi(ie),iS(ie)||ie.response)}function wc(ie,we,_t){St(Se[Nt](),2,26,"Failed to send telemetry.",{message:we}),Se._buffer&&Se._buffer[Af](ie)}function Qm(ie,we){for(var _t=[],gt=[],Er=we.errors.reverse(),mr=0,zr=Er;mr<zr.length;mr++){var Ca=zr[mr],Md=ie.splice(Ca.index,1)[0];nh(Ca.statusCode)?gt[sr](Md):_t[sr](Md)}ie[G]>0&&Se[mn](ie,we[lo]),_t[G]>0&&Se[Kt](_t,vi(null,["partial success",we[lo],"of",we.itemsReceived].join(" "))),gt[G]>0&&(q_(gt),St(Se[Nt](),2,40,"Partial success. Delivered: "+ie[G]+", Failed: "+_t[G]+". Will retry to send "+gt[G]+" our of "+we[Na]+" items"))}function Cp(ie,we){Se._buffer&&Se._buffer[Af](ie)}function eh(ie){try{if(ie){var we=ie,_t=we[$o];return _t&&_t[G]?_t:null}}catch{}return null}function xp(ie,we){if(Sr)return!1;if(!ie)return we&&St(we,1,7,"Cannot send empty telemetry"),!1;if(ie.baseData&&!ie[Mf])return we&&St(we,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(ie[Mf]||(ie[Mf]="EventData"),!Se[so])return we&&St(we,1,28,"Sender was not initialized"),!1;if(ht(ie))ie[_h]=Se._sample[Tv];else return we&&St(we,2,33,"Telemetry item was sampled out and not sent",{SampleRate:Se._sample[Tv]}),!1;return!0}function th(ie,we){var _t=ie.iKey||Zr,gt=s.constructEnvelope(ie,_t,we,Xr);if(!gt){St(we,1,47,"Unable to create an AppInsights envelope");return}var Er=!1;if(ie[R]&&ie[R][lm]&&(Pt(ie[R][lm],function(mr){try{mr&&mr(gt)===!1&&(Er=!0,xu(we,"Telemetry processor check returns false"))}catch(zr){St(we,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+fa(zr),{exception:ar(zr)},!0)}}),delete ie[R][lm]),!Er)return gt}function Ya(ie){var we=aS,_t=Se[Nt]();try{var gt=xp(ie,_t),Er=null;gt&&(Er=th(ie,_t)),Er&&(we=L[Rt](Er))}catch{}return we}function iu(ie){var we=aS;return ie&&ie[G]&&(we="["+ie.join(",")+"]"),we}function Ie(ie){var we,_t=$n();return we={urlString:ue},we[k]=ie,we.headers=_t,we}function ht(ie){return Se._sample.isSampledIn(ie)}function er(ie,we,_t,gt){we===200&&ie?Se._onSuccess(ie,ie[G]):gt&&Se[Kt](ie,gt)}function xt(ie,we,_t,gt){gt===void 0&&(gt=!0);var Er=function(Ca,Md,Cr){return er(we,Ca,Md,Cr)},mr=fr(we),zr=ie&&ie.sendPOST;return zr&&mr?(gt&&Se._buffer[wi](we),zr(mr,Er,!_t)):null}function fr(ie){var we;if(at(ie)&&ie[G]>0){var _t=Se[kf].batchPayloads(ie),gt=$n(),Er=(we={},we[k]=_t,we.urlString=ue,we.headers=gt,we.disableXhrSync=$t,we.disableFetchKeepAlive=!Dn,we[$o]=ie,we);return Er}return null}function $n(){try{var ie=B||{};return se(ue)&&(ie[yh[6]]=yh[7]),ie}catch{}return null}function gn(ie){var we=ie?ie[G]:0;return Se[kf].size()+we>he?((!fe||fe.isOnline())&&Se[Oe](!0,null,10),!0):!1}function $a(ie,we,_t,gt,Er,mr){var zr=null;if(Se._appId||(zr=Sf(mr),zr&&zr.appId&&(Se._appId=zr.appId)),(ie<200||ie>=300)&&ie!==0){if((ie===301||ie===307||ie===308)&&!qo(_t)){Se[Kt](we,Er);return}if(fe&&!fe.isOnline()){if(!_n){var Ca=10;q_(we,Ca),St(Se[Nt](),2,40,". Offline - Response Code: ".concat(ie,". Offline status: ").concat(!fe.isOnline(),". Will retry to send ").concat(we.length," items."))}return}!_n&&nh(ie)?(q_(we),St(Se[Nt](),2,40,". Response code "+ie+". Will retry to send "+we[G]+" items.")):Se[Kt](we,Er)}else qo(_t),ie===206?(zr||(zr=Sf(mr)),zr&&!_n?Se[Rn](we,zr):Se[Kt](we,Er)):(v=0,Se[mn](we,gt))}function qo(ie){return Y>=10?!1:!Ve(ie)&&ie!==""&&ie!==ue?(ue=ie,++Y,!0):!1}function ou(ie,we){if(le)le(ie,!1);else{var _t=Cn&&Cn[co]([3],!0);return xt(_t,ie,we)}}function Pp(ie,we,_t){var gt=ie,Er=gt&&gt[$o];if(ia)nr&&nr(Er,!0),St(Se[Nt](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var mr=[],zr=0;zr<Er[G];zr++){var Ca=Er[zr],Md=[Ca],Cr=fr(Md);_t(Cr,we)?Se._onSuccess(Md,Md[G]):mr[sr](Ca)}mr[G]>0&&(nr&&nr(mr,!0),St(Se[Nt](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function Ap(ie){try{if(ie&&ie[G])return Ft(ie[0])}catch{}return null}function u_(ie,we){var _t=null;if(at(ie)){for(var gt=ie[G],Er=0;Er<ie[G];Er++)gt+=ie[Er].item[G];var mr=Cn.getSyncFetchPayload();mr+gt<=zI?_t=2:Vs()?_t=3:(_t=1,St(Se[Nt](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var zr=Cn&&Cn[co]([_t],!0);return xt(zr,ie,we)}return null}function q_(ie,we){if(we===void 0&&(we=1),!(!ie||ie[G]===0)){var _t=Se[kf];_t[Af](ie),v++;for(var gt=0,Er=ie;gt<Er.length;gt++){var mr=Er[gt];mr.cnt=mr.cnt||0,mr.cnt++,_t[ze](mr)}xy(we),c_()}}function xy(ie){var we=10,_t;if(v<=1)_t=we;else{var gt=(Math.pow(2,v)-1)/2,Er=Math.floor(Math.random()*gt*we)+1;Er=ie*Er,_t=Math.max(Math.min(Er,3600),we)}var mr=lu()+_t*1e3;w=mr}function c_(){if(!A&&!I){var ie=w?Math.max(0,w-lu()):0,we=Math.max(Qt,ie);A=pu(function(){A=null,Se[Oe](!0,null,1)},we)}}function rh(){A&&A.cancel(),A=null,w=null}function nh(ie){return Ve(Ss)?ie===401||ie===408||ie===429||ie===500||ie===502||ie===503||ie===504:Ss[G]&&Ss.indexOf(ie)>-1}function Dg(){var ie="getNotifyMgr";return Se.core[ie]?Se.core[ie]():Se.core._notificationManager}function Cg(ie,we){var _t=Dg();if(_t&&_t[bh])try{_t[bh](ie,we)}catch(gt){St(Se[Nt](),1,74,"send request notification failed: "+fa(gt),{exception:ar(gt)})}}function lS(ie,we){var _t=we.disableInstrumentationKeyValidation,gt=Ve(_t)?!1:_t;if(gt)return!0;var Er="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",mr=new RegExp(Er);return mr.test(ie)}function fS(){Se[so]=null,Se[kf]=null,Se._appId=null,Se._sample=null,B={},fe=null,v=0,w=null,I=!1,A=null,L=null,Y=0,X=0,le=null,de=null,ue=null,xe=null,he=0,ke=!1,ct=null,Sr=!1,Zr=null,Xr=Iv,_n=!1,Yt=null,ja=Iv,$t=!1,Dn=!1,ia=!1,Le=null,nr=null,Cn=null,Gr(Se,"_senderConfig",{g:function(){return wt({},oS)}})}}),l}return s.constructEnvelope=function(l,v,w,I){var A;v!==l.iKey&&!Ve(v)?A=Xi(Xi({},l),{iKey:v}):A=l;var L=VI[A.baseType]||tS;return L(w,A,I)},s}(en),i_="instrumentationKey",Ng="connectionString",uS="instrumentationkey",o_="endpointUrl",cS="ingestionendpoint",$_="userOverrideEndpointUrl",s_,Cy=void 0,KI=(s_={diagnosticLogInterval:sl(WI,1e4)},s_[Ng]=Cy,s_[o_]=Cy,s_[i_]=Cy,s_.extensionConfig={},s_);function WI(i){return i&&i>0}var JI=function(){function i(s){var l=new vl,v;(Ve(s)||Ve(s[i_])&&Ve(s[Ng]))&&pr("Invalid input configuration"),Pa(i,this,function(I){Gr(I,"config",{g:function(){return v}}),A(),I.initialize=A,I.track=w,ld(I,l,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function A(){var L=ko(s||{},KI);v=L.cfg,l.addUnloadHook(Cu(L,function(){var Y=v[Ng];if(tr(Y)){var B=zc(function(de,ue){is(Y,function(xe){var he=xe.value,ke=v[i_];if(!xe.rejected&&he){v[Ng]=he;var Me=or(he);ke=Me[uS]||ke}de(ke)})}),X=zc(function(de,ue){is(Y,function(xe){var he=xe.value,ke=v[o_];if(!xe.rejected&&he){var Me=or(he),Ge=Me[cS];ke=Ge?Ge+mv:ke}de(ke)})});v[i_]=B,v[o_]=v[$_]||X}if(Ft(Y)){var le=or(Y),fe=le[cS];v[o_]=v[$_]?v[$_]:fe+mv,v[i_]=le[uS]||v[i_]}v[o_]=v[$_]?v[$_]:v[o_]})),l.initialize(v,[new sS])}});function w(I){I&&(I.baseData=I.baseData||{},I.baseType=I.baseType||"EventData"),l.track(I)}}return i.__ieDyn=1,i}();e.AppInsightsCore=vl,e.ApplicationInsights=JI,e.Sender=sS,e.SeverityLevel=pm,e.arrForEach=Pt,e.isNullOrUndefined=Ve,e.proxyFunctions=ld,e.throwError=pr})});var HS=Ld(Cv=>{"use strict";var ON=Cv&&Cv.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),kN=Cv&&Cv.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),MN=Cv&&Cv.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&ON(t,e,r);return kN(t,e),t};Object.defineProperty(Cv,"__esModule",{value:!0});Cv.appInsightsClientFactory=void 0;var LN=qS(),FN=Gy(),UN=async(e,t,r,n,o)=>{let u;try{let y=await Promise.resolve().then(()=>MN(zS())),T={};if(n){let H={alwaysUseXhrOverride:!0,httpXHROverride:n};T[LN.BreezeChannelIdentifier]=H}let D;e.startsWith("InstrumentationKey=")||(D=e);let U=D?{instrumentationKey:D}:{connectionString:e};u=new y.ApplicationInsights({...U,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:T})}catch(y){return Promise.reject(y)}return{logEvent:(y,T)=>{let D={...T==null?void 0:T.properties,...T==null?void 0:T.measurements};o!=null&&o.length&&FN.TelemetryUtil.applyReplacements(D,o),u==null||u.track({name:y,data:D,baseType:"EventData",ext:{user:{id:t,authId:t},app:{sesId:r}},baseData:{name:y,properties:T==null?void 0:T.properties,measurements:T==null?void 0:T.measurements}})},flush:async()=>{u==null||u.flush(!1)},dispose:async()=>new Promise(T=>{u==null||u.unload(!0,()=>{T(),u=void 0},1e3)})}};Cv.appInsightsClientFactory=UN});var GS=Ld($g=>{"use strict";Object.defineProperty($g,"__esModule",{value:!0});$g.BaseTelemetryReporter=void 0;var Vy=class{constructor(t,r,n){this.telemetrySender=t,this.vscodeAPI=r,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(t,r,n,o){o?this.telemetrySender.sendEventData(t,{properties:r,measurements:n}):this.telemetryLogger.logUsage(t,{properties:r,measurements:n})}sendTelemetryEvent(t,r,n){this.internalSendTelemetryEvent(t,r,n,!1)}sendRawTelemetryEvent(t,r,n){let o={...r};for(let u of Object.keys(o??{})){let m=o[u];typeof u=="string"&&m!==void 0&&(o[u]=new this.vscodeAPI.TelemetryTrustedValue(typeof m=="string"?m:m.value))}this.sendTelemetryEvent(t,o,n)}sendDangerousTelemetryEvent(t,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(t,r,n,!0)}internalSendTelemetryErrorEvent(t,r,n,o){o?this.telemetrySender.sendEventData(t,{properties:r,measurements:n}):this.telemetryLogger.logError(t,{properties:r,measurements:n})}sendTelemetryErrorEvent(t,r,n){this.internalSendTelemetryErrorEvent(t,r,n,!1)}sendDangerousTelemetryErrorEvent(t,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(t,r,n,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(t=>t.dispose()))}};$g.BaseTelemetryReporter=Vy});var VS=Ld(qg=>{"use strict";Object.defineProperty(qg,"__esModule",{value:!0});qg.BaseTelemetrySender=void 0;var _m;(function(e){e[e.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",e[e.INSTANTIATING=1]="INSTANTIATING",e[e.INSTANTIATED=2]="INSTANTIATED"})(_m||(_m={}));var Ky=class{constructor(t,r){this._instantiationStatus=_m.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=r,this._key=t}sendEventData(t,r){if(!this._telemetryClient){this._instantiationStatus!==_m.INSTANTIATED&&this._eventQueue.push({eventName:t,data:r});return}this._telemetryClient.logEvent(t,r)}sendErrorData(t,r){if(!this._telemetryClient){this._instantiationStatus!==_m.INSTANTIATED&&this._exceptionQueue.push({exception:t,data:r});return}let n={stack:t.stack,message:t.message,name:t.name};if(r){let o=r.properties||r;r.properties={...o,...n}}else r={properties:n};this._telemetryClient.logEvent("unhandlederror",r)}async flush(){var t;return(t=this._telemetryClient)==null?void 0:t.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:t,data:r})=>this.sendEventData(t,r)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:t,data:r})=>this.sendErrorData(t,r)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===_m.NOT_INSTANTIATED&&(this._instantiationStatus=_m.INSTANTIATING,this._clientFactory(this._key).then(t=>{this._telemetryClient=t,this._instantiationStatus=_m.INSTANTIATED,this._flushQueues()}).catch(t=>{console.error(t),this._instantiationStatus=_m.INSTANTIATED}))}};qg.BaseTelemetrySender=Ky});var JS=Ld(gm=>{"use strict";var jN=gm&&gm.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),YN=gm&&gm.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Zy=gm&&gm.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&jN(t,e,r);return YN(t,e),t};Object.defineProperty(gm,"__esModule",{value:!0});var $N=Zy(require("https")),Wy=Zy(require("os")),Bg=Zy(require("vscode")),qN=YS(),BN=HS(),zN=GS(),HN=VS(),KS=Gy();function WS(){return{sendPOST:(t,r)=>{let n={method:"POST",headers:{...t.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(t.data)}};try{let o=$N.request(t.urlString,n,u=>{u.on("data",function(m){r(u.statusCode??200,u.headers,m.toString())}),u.on("error",function(){r(0,{})})});o.write(t.data,u=>{u&&r(0,{})}),o.end()}catch{r(0,{})}}}}var Jy=class extends zN.BaseTelemetryReporter{constructor(t,r){let n=m=>(0,BN.appInsightsClientFactory)(m,Bg.env.machineId,Bg.env.sessionId,WS(),r);KS.TelemetryUtil.shouldUseOneDataSystemSDK(t)&&(n=m=>(0,qN.oneDataSystemClientFactory)(m,Bg,WS()));let o={release:Wy.release(),platform:Wy.platform(),architecture:Wy.arch()},u=new HN.BaseTelemetrySender(t,n);if(t&&t.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(u,Bg,{additionalCommonProperties:KS.TelemetryUtil.getAdditionalCommonProperties(o)})}};gm.default=Jy});var Zw=Ld((d1,v_)=>{"use strict";var gD=typeof Buffer<"u",Vw=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,Kw=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function Ww(e,t,r){r==null&&t!==null&&typeof t=="object"&&(r=t,t=void 0),gD&&Buffer.isBuffer(e)&&(e=e.toString()),e&&e.charCodeAt(0)===65279&&(e=e.slice(1));let n=JSON.parse(e,t);if(n===null||typeof n!="object")return n;let o=r&&r.protoAction||"error",u=r&&r.constructorAction||"error";if(o==="ignore"&&u==="ignore")return n;if(o!=="ignore"&&u!=="ignore"){if(Vw.test(e)===!1&&Kw.test(e)===!1)return n}else if(o!=="ignore"&&u==="ignore"){if(Vw.test(e)===!1)return n}else if(Kw.test(e)===!1)return n;return Jw(n,{protoAction:o,constructorAction:u,safe:r&&r.safe})}function Jw(e,{protoAction:t="error",constructorAction:r="error",safe:n}={}){let o=[e];for(;o.length;){let u=o;o=[];for(let m of u){if(t!=="ignore"&&Object.prototype.hasOwnProperty.call(m,"__proto__")){if(n===!0)return null;if(t==="error")throw new SyntaxError("Object contains forbidden prototype property");delete m.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(m,"constructor")&&Object.prototype.hasOwnProperty.call(m.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete m.constructor}for(let y in m){let T=m[y];T&&typeof T=="object"&&o.push(T)}}}return e}function i0(e,t,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return Ww(e,t,r)}finally{Error.stackTraceLimit=n}}function yD(e,t){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return Ww(e,t,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}v_.exports=i0;v_.exports.default=i0;v_.exports.parse=i0;v_.exports.safeParse=yD;v_.exports.scan=Jw});var QO={};mS(QO,{activate:()=>ZO,deactivate:()=>XO});module.exports=aN(QO);var PI=require("vscode");var ow=require("vscode");var t0={};mS(t0,{action:()=>iN,diffView:()=>KN,storeApiKey:()=>oN,work:()=>WN});function iN(e){return t=>{typeof t=="function"&&t()}}var My=require("vscode");function oN({ext:e,log:t}){return async(r,n)=>{let o=await My.window.showInputBox({prompt:`Enter the ${n}`});o&&(t.info(n,{event:"action.key"}),await e.secrets.store(r,o),My.window.showInformationMessage(`${n} stored successfully`))}}var aw=require("vscode");var bs=require("vscode"),RS=ky(IS());var qy=require("crypto");var NS="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var TN=128,ah,ih;function DS(e){!ah||ah.length<e?(ah=Buffer.allocUnsafe(e*TN),qy.webcrypto.getRandomValues(ah),ih=0):ih+e>ah.length&&(qy.webcrypto.getRandomValues(ah),ih=0),ih+=e}function IN(e){return DS(e|=0),ah.subarray(ih-e,ih)}function NN(e,t,r){let n=(2<<31-Math.clz32(e.length-1|1))-1,o=Math.ceil(1.6*n*t/e.length);return(u=t)=>{let m="";for(;;){let y=r(o),T=o;for(;T--;)if(m+=e[y[T]&n]||"",m.length>=u)return m}}}function CS(e,t=21){return NN(e,t,IN)}function xS(e=21){DS(e|=0);let t="";for(let r=ih-e;r<ih;r++)t+=NS[ah[r]&63];return t}var Fd=require("vscode"),By="multicoder",PS,AS,Og=(AS=(PS=Fd.workspace.workspaceFolders)==null?void 0:PS[0])==null?void 0:AS.uri,kg=new Map;function DN(e){return e.path.split("/").pop()}function Nv(e){let t=Fd.workspace.getWorkspaceFolder(e);if(t){let u="";return String(t.uri)!==String(e)&&(u=Fd.workspace.asRelativePath(e,!1).replace(/\\/g,"/")),String(t.uri)!==String(Og)&&(u=".folders/"+DN(t.uri)+(u?"/"+u:"")),u||(u="."),u}if(e.scheme==="untitled")return".untitled/"+e.path;let r=e.path.split("/"),n=r.pop(),o=r.pop();return kg.has(o)||kg.set(o,Fd.Uri.joinPath(e,"../")),".external/"+o+"/"+n}function Vn(e){return(e=="."||e=="./")&&(e=""),e=e.startsWith("/")?e:"/"+e,Fd.Uri.from({scheme:By,path:e})}function yl(e){let[t,r,...n]=e.path.split("/");if(r==".multicoder")return e.with({scheme:"file"});if(r==".untitled")return Fd.Uri.from({scheme:"untitled",path:n.join("/")});if(r==".external"){let o=n.shift();if(kg.has(o))return Fd.Uri.joinPath(kg.get(o),n.join("/"));throw new Error("Unknown external directory: "+o)}if(r==".folders"){let o=n.shift();for(let u of Fd.workspace.workspaceFolders||[])if(u.uri.path.endsWith("/"+o))return Fd.Uri.joinPath(u.uri,n.join("/"));throw new Error("Unknown workspace folder: "+o)}if(Og)return e.path?Fd.Uri.joinPath(Og,e.path):Og;throw new Error("Cannot find source Uri")}var{fs:zy}=bs.workspace,CN=CS("1234567890abcdef",10);function Mg(){return CN()}function Dh(){let e=[];for(let t of bs.window.tabGroups.all.flatMap(r=>r.tabs))t.input instanceof bs.TabInputText&&e.push(t.input.uri);return e}async function Lf(e){return new TextDecoder().decode(await zy.readFile(e))}async function OS(e,t){return await zy.writeFile(e,new TextEncoder().encode(t))}async function kS(e=""){let t=bs.workspace.workspaceFolders;if(!(t!=null&&t.length))return e?[]:Dh().map(m=>({name:Nv(m).split("/").pop(),path:Nv(m),uri:m,isFile:!0,isDirectory:!1,isSymbolicLink:!1}));let r=t[0],n=bs.Uri.joinPath(r.uri,e);if(t.length>1){let[m,...y]=e.split("/");if(!m)return t.map(({name:T,uri:D})=>({name:T,path:T,uri:D,isFile:!1,isDirectory:!0,isSymbolicLink:!1}));if(r=t.find(T=>T.name==m),!r)return[];n=bs.Uri.joinPath(r.uri,...y)}let o=(0,RS.default)().add([".git",".gitignore"]);try{o.add(await Lf(bs.Uri.joinPath(r.uri,".gitignore")))}catch{}let u=(await zy.readDirectory(n)).map(([m,y])=>({name:m,path:Nv(bs.Uri.joinPath(n,m)),uri:bs.Uri.joinPath(n,m),isFile:!!(y&bs.FileType.File),isDirectory:!!(y&bs.FileType.Directory),isSymbolicLink:!!(y&bs.FileType.SymbolicLink)})).filter(({uri:m})=>!o.ignores(bs.workspace.asRelativePath(m,!1)));return u.sort((m,y)=>m.isFile&&y.isDirectory?1:m.isDirectory&&y.isFile?-1:m.name.localeCompare(y.name)),u}var ZS=ky(JS()),GN="InstrumentationKey=4a0957be-8ce1-4335-8aa5-1fb742355aa5;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com/;LiveEndpoint=https://westeurope.livediagnostics.monitor.azure.com/;ApplicationId=b0fce7b4-deeb-43b7-aa17-e5024c6c504c";function VN(e){return{logUsage(t,r){e.sendTelemetryEvent(t,r)},logError(t,r={}){if(t&&typeof t=="object"){let{message:n,stack:o}=t,u=String(t.name||"error").toLowerCase(),m=String(t);e.sendTelemetryErrorEvent(u,{...t,...r,message:n,stack:o,text:m})}else e.sendTelemetryErrorEvent(String(t).toLowerCase().replace(/\W+/g,"-"),r)}}}function XS(e){let t=new ZS.default(GN),r=VN(t);e.telemetry=r,r.logUsage("activated"),e.ext.subscriptions.push(t)}var QS=require("vscode");function ew(e){let t=QS.window.createOutputChannel("Multicoder",{log:!0});function r(o){if(!o||typeof o!="object")return;let{event:u,...m}=o,y=Object.entries(m).map(([T,D])=>`
    ${T}: ${D}`);y.length&&t.trace(y.join(""))}function n(o){let u={};return o!=null&&o.model&&(u.modelId=o.model.modelId,u.modelProvider=o.model.provider),u}e.log={error(o,u={}){t.error(o),e.telemetry.logError(o,{...n(this.context),...u}),r(u)},warn(o,u={}){t.warn((u!=null&&u.event?`[${u.event}] `:"")+o),e.telemetry.logUsage((u==null?void 0:u.event)||"warning",{text:o,...n(this.context),...u}),r(u)},info(o,u={}){t.info((u!=null&&u.event?`[${u.event}] `:"")+o),e.telemetry.logUsage((u==null?void 0:u.event)||"info",{text:o,...n(this.context),...u}),r(u)},context:null},e.ext.subscriptions.push(t)}var rn=require("vscode");var{fs:z_}=rn.workspace,xv=new Map,Ch=new Map,f_=new Map;function rw(e){let t=new Xy,r=rn.workspace.registerFileSystemProvider(By,t,{isCaseSensitive:!0,isReadonly:!1});e.ext.subscriptions.push(r)}function Ff(e){return e.authority+e.path}async function tw(e){try{return await z_.stat(e)}catch{}}function H_(e){let t=e?rn.FileType.Directory:rn.FileType.File,r=Date.now();return{type:t,ctime:r,mtime:r,size:0,content:null}}var Xy=class{async stat(t){if(t.query){if(f_.has(t.query))return f_.get(t.query);throw rn.FileSystemError.FileNotFound(t)}let r=xv.get(Ff(t));if(!r&&t.path.startsWith("/.multicoder"))throw rn.FileSystemError.FileNotFound(t);if(!r)return await z_.stat(yl(t));if(!r.type)throw rn.FileSystemError.FileNotFound(t);return r}async readFile(t){if(t.query){if(f_.has(t.query))return f_.get(t.query).content;throw rn.FileSystemError.FileNotFound(t)}let r=xv.get(Ff(t));if(!r&&t.path.startsWith("/.multicoder"))throw rn.FileSystemError.FileNotFound(t);if(!r)return await z_.readFile(yl(t));if(r.type&rn.FileType.Directory)throw rn.FileSystemError.FileIsADirectory(t);if(!r.type)throw rn.FileSystemError.FileNotFound(t);return r.content}async writeFile(t,r,n){if(t.query)throw rn.FileSystemError.NoPermissions;let o=xv.get(Ff(t)),u=!!(o!=null&&o.type);if(!o&&!t.path.startsWith("/.multicoder")&&(o=await tw(yl(t)),u=!!o),o||(o=H_()),o.type&rn.FileType.Directory)throw rn.FileSystemError.FileIsADirectory(t);if(!u&&!n.create)throw rn.FileSystemError.FileNotFound(t);if(u&&n.create&&!n.overwrite)throw rn.FileSystemError.FileExists(t);o.mtime=Date.now(),o.content=r,o.size=r.length,xv.set(Ff(t),o),Ch.has(Ff(t))&&this._emitter.fire([{type:rn.FileChangeType.Changed,uri:t}])}async readDirectory(t){if(t.query)throw rn.FileSystemError.NoPermissions;let r=new Map,n=null;try{if(!t.path.startsWith("/.multicoder")){let o=yl(t),u=await z_.stat(o),m=await z_.readDirectory(yl(t));for(let[y,T]of m)r.set(y,T)}}catch(o){n=o}for(let[o,u]of xv){let m=o.split("/"),y=m.pop();m.join("/")===t.path&&(u.type?r.set(y,u.type):r.has(y)&&r.delete(y))}if(n&&r.size==0&&!t.path.startsWith("/.multicoder"))throw n;return Array.from(r.entries())}async delete(t,r){if(t.query)throw rn.FileSystemError.NoPermissions;let n=xv.get(Ff(t)),o=!!(n!=null&&n.type);if(!n&&!t.path.startsWith("/.multicoder")&&(n=await tw(yl(t)),o=!!n),!o)throw rn.FileSystemError.FileNotFound(t);n||(n=H_()),n.type=0,n.content=null,n.size=0,xv.set(Ff(t),n),Ch.has(Ff(t))&&this._emitter.fire([{type:rn.FileChangeType.Deleted,uri:t}])}rename(t,r,n){}async createDirectory(t){if(t.query)throw rn.FileSystemError.NoPermissions;let r=H_(!0);xv.set(Ff(t),r),Ch.has(Ff(t))&&this._emitter.fire([{type:rn.FileChangeType.Created,uri:t}])}_emitter=new rn.EventEmitter;onDidChangeFile=this._emitter.event;watch(t,r){let n={},o=Ch.get(Ff(t))||new Set;return o.add(n),Ch.set(Ff(t),o),new rn.Disposable(()=>{o.delete(n),o.size||Ch.set(Ff(t),null)})}},Qy=new Map;function nw(){xv=new Map,Ch=new Map,f_=new Map,Qy=new Map;let e=H_();e.content=new Uint8Array,e.permissions=rn.FilePermission.Readonly,xv.set("/~empty",e)}function e0(e,t){let r=Qy.get(t);if(!r){let n=H_();n.content=new TextEncoder().encode(t),n.size=n.content.length,n.permissions=rn.FilePermission.Readonly,r=xS(),Qy.set(t,r),f_.set(r,n)}return Vn(e).with({query:r})}function KN(e){return async(t,r,n)=>{var D,U;let o=e.recent.get(n),u=t.split("/").pop();if(!o)return;let m=(U=(D=o.shared)==null?void 0:D.edits)==null?void 0:U.find(H=>H.id===r);if(!m)return;let y=e0(t,m.before),T=e0(t,m.after);await aw.commands.executeCommand("vscode.diff",y,T,`${u} (Multicoder)`),e.log.info(u,{event:"action.diff"})}}var Ak=require("vscode");async function iw(){}function WN(e){return()=>{iw()}}function sw(e){Object.entries(t0).forEach(([t,r])=>{let n=ow.commands.registerCommand(`multicoder.${t}`,r(e));e.ext.subscriptions.push(n)})}var Fv=require("vscode");var uw="vercel.ai.error",JN=Symbol.for(uw),cw,ZN=class lw extends Error{constructor({name:t,message:r,cause:n}){super(r),this[cw]=!0,this.name=t,this.cause=n}static isInstance(t){return lw.hasMarker(t,uw)}static hasMarker(t,r){let n=Symbol.for(r);return t!=null&&typeof t=="object"&&n in t&&typeof t[n]=="boolean"&&t[n]===!0}};cw=JN;var Mt=ZN,fw="AI_APICallError",dw=`vercel.ai.error.${fw}`,XN=Symbol.for(dw),pw,Sl=class extends Mt{constructor({message:e,url:t,requestBodyValues:r,statusCode:n,responseHeaders:o,responseBody:u,cause:m,isRetryable:y=n!=null&&(n===408||n===409||n===429||n>=500),data:T}){super({name:fw,message:e,cause:m}),this[pw]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=o,this.responseBody=u,this.isRetryable=y,this.data=T}static isInstance(e){return Mt.hasMarker(e,dw)}};pw=XN;var vw="AI_EmptyResponseBodyError",mw=`vercel.ai.error.${vw}`,QN=Symbol.for(mw),hw,n0=class extends Mt{constructor({message:e="Empty response body"}={}){super({name:vw,message:e}),this[hw]=!0}static isInstance(e){return Mt.hasMarker(e,mw)}};hw=QN;function oh(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var _w="AI_InvalidArgumentError",gw=`vercel.ai.error.${_w}`,eD=Symbol.for(gw),yw,Sw=class extends Mt{constructor({message:e,cause:t,argument:r}){super({name:_w,message:e,cause:t}),this[yw]=!0,this.argument=r}static isInstance(e){return Mt.hasMarker(e,gw)}};yw=eD;var ww="AI_InvalidPromptError",bw=`vercel.ai.error.${ww}`,tD=Symbol.for(bw),Ew,Pv=class extends Mt{constructor({prompt:e,message:t,cause:r}){super({name:ww,message:`Invalid prompt: ${t}`,cause:r}),this[Ew]=!0,this.prompt=e}static isInstance(e){return Mt.hasMarker(e,bw)}};Ew=tD;var Tw="AI_InvalidResponseDataError",Iw=`vercel.ai.error.${Tw}`,rD=Symbol.for(Iw),Nw,G_=class extends Mt{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:Tw,message:t}),this[Nw]=!0,this.data=e}static isInstance(e){return Mt.hasMarker(e,Iw)}};Nw=rD;var Dw="AI_JSONParseError",Cw=`vercel.ai.error.${Dw}`,nD=Symbol.for(Cw),xw,d_=class extends Mt{constructor({text:e,cause:t}){super({name:Dw,message:`JSON parsing failed: Text: ${e}.
Error message: ${oh(t)}`,cause:t}),this[xw]=!0,this.text=e}static isInstance(e){return Mt.hasMarker(e,Cw)}};xw=nD;var Pw="AI_LoadAPIKeyError",Aw=`vercel.ai.error.${Pw}`,aD=Symbol.for(Aw),Rw,p_=class extends Mt{constructor({message:e}){super({name:Pw,message:e}),this[Rw]=!0}static isInstance(e){return Mt.hasMarker(e,Aw)}};Rw=aD;var iD="AI_LoadSettingError",oD=`vercel.ai.error.${iD}`,sD=Symbol.for(oD),uD;uD=sD;var cD="AI_NoContentGeneratedError",lD=`vercel.ai.error.${cD}`,fD=Symbol.for(lD),dD;dD=fD;var Ow="AI_NoSuchModelError",kw=`vercel.ai.error.${Ow}`,pD=Symbol.for(kw),Mw,a0=class extends Mt{constructor({errorName:e=Ow,modelId:t,modelType:r,message:n=`No such ${r}: ${t}`}){super({name:e,message:n}),this[Mw]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return Mt.hasMarker(e,kw)}};Mw=pD;var Lw="AI_TooManyEmbeddingValuesForCallError",Fw=`vercel.ai.error.${Lw}`,vD=Symbol.for(Fw),Uw,jw=class extends Mt{constructor(e){super({name:Lw,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[Uw]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return Mt.hasMarker(e,Fw)}};Uw=vD;var Yw="AI_TypeValidationError",$w=`vercel.ai.error.${Yw}`,mD=Symbol.for($w),qw,hD=class r0 extends Mt{constructor({value:t,cause:r}){super({name:Yw,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${oh(r)}`,cause:r}),this[qw]=!0,this.value=t}static isInstance(t){return Mt.hasMarker(t,$w)}static wrap({value:t,cause:r}){return r0.isInstance(r)&&r.value===t?r:new r0({value:t,cause:r})}};qw=mD;var ym=hD,Bw="AI_UnsupportedFunctionalityError",zw=`vercel.ai.error.${Bw}`,_D=Symbol.for(zw),Hw,qn=class extends Mt{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:Bw,message:t}),this[Hw]=!0,this.functionality=e}static isInstance(e){return Mt.hasMarker(e,zw)}};Hw=_D;var Gw=(e,t=21)=>(r=t)=>{let n="",o=r|0;for(;o--;)n+=e[Math.random()*e.length|0];return n};var Wg=ky(Zw(),1);var SD=Object.defineProperty,wD=(e,t,r)=>t in e?SD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,zg=(e,t,r)=>wD(e,typeof t!="symbol"?t+"":t,r),Hg=class extends Error{constructor(t,r){super(t),zg(this,"type"),zg(this,"field"),zg(this,"value"),zg(this,"line"),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function o0(e){}function Xw(e){let{onEvent:t=o0,onError:r=o0,onRetry:n=o0,onComment:o}=e,u="",m=!0,y,T="",D="";function U(ee){let Q=m?ee.replace(/^\xEF\xBB\xBF/,""):ee,[ve,Pe]=bD(`${u}${Q}`);for(let We of ve)H(We);u=Pe,m=!1}function H(ee){if(ee===""){pe();return}if(ee.startsWith(":")){o&&o(ee.slice(ee.startsWith(": ")?2:1));return}let Q=ee.indexOf(":");if(Q!==-1){let ve=ee.slice(0,Q),Pe=ee[Q+1]===" "?2:1,We=ee.slice(Q+Pe);ne(ve,We,ee);return}ne(ee,"",ee)}function ne(ee,Q,ve){switch(ee){case"event":D=Q;break;case"data":T=`${T}${Q}
`;break;case"id":y=Q.includes("\0")?void 0:Q;break;case"retry":/^\d+$/.test(Q)?n(parseInt(Q,10)):r(new Hg(`Invalid \`retry\` value: "${Q}"`,{type:"invalid-retry",value:Q,line:ve}));break;default:r(new Hg(`Unknown field "${ee.length>20?`${ee.slice(0,20)}\u2026`:ee}"`,{type:"unknown-field",field:ee,value:Q,line:ve}));break}}function pe(){T.length>0&&t({id:y,event:D||void 0,data:T.endsWith(`
`)?T.slice(0,-1):T}),y=void 0,T="",D=""}function ce(ee={}){u&&ee.consume&&H(u),y=void 0,T="",D="",u=""}return{feed:U,reset:ce}}function bD(e){let t=[],r="",n=e.length;for(let o=0;o<n;o++){let u=e[o];u==="\r"&&e[o+1]===`
`?(t.push(r),r="",o++):u==="\r"||u===`
`?(t.push(r),r=""):r+=u}return[t,r]}var Gg=class extends TransformStream{constructor({onError:t,onRetry:r,onComment:n}={}){let o;super({start(u){o=Xw({onEvent:m=>{u.enqueue(m)},onError(m){t==="terminate"?u.error(m):typeof t=="function"&&t(m)},onRetry:r,onComment:n})},transform(u){o.feed(u)}})}};function Ud(...e){return e.reduce((t,r)=>({...t,...r??{}}),{})}function Qw(e){return new ReadableStream({async pull(t){try{let{value:r,done:n}=await e.next();n?t.close():t.enqueue(r)}catch(r){t.error(r)}},cancel(){}})}async function eb(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function Vg(e){let t={};return e.headers.forEach((r,n)=>{t[n]=r}),t}var Rp=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let o=Gw(r,t);if(e==null)return o;if(r.includes(n))throw new Sw({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return u=>`${e}${n}${o(u)}`},Sm=Rp();function tb(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function ED(e){return Object.fromEntries(Object.entries(e).filter(([t,r])=>r!=null))}function V_(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function Kg({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:n}){if(typeof e=="string")return e;if(e!=null)throw new p_({message:`${n} API key must be a string.`});if(typeof process>"u")throw new p_({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(e=process.env[t],e==null)throw new p_({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new p_({message:`${n} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var K_=Symbol.for("vercel.ai.validator");function TD(e){return{[K_]:!0,validate:e}}function ID(e){return typeof e=="object"&&e!==null&&K_ in e&&e[K_]===!0&&"validate"in e}function ND(e){return ID(e)?e:DD(e)}function DD(e){return TD(t=>{let r=e.safeParse(t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}})}function CD({value:e,schema:t}){let r=sh({value:e,schema:t});if(!r.success)throw ym.wrap({value:e,cause:r.error});return r.value}function sh({value:e,schema:t}){let r=ND(t);try{if(r.validate==null)return{success:!0,value:e};let n=r.validate(e);return n.success?n:{success:!1,error:ym.wrap({value:e,cause:n.error})}}catch(n){return{success:!1,error:ym.wrap({value:e,cause:n})}}}function xD({text:e,schema:t}){try{let r=Wg.default.parse(e);return t==null?r:CD({value:r,schema:t})}catch(r){throw d_.isInstance(r)||ym.isInstance(r)?r:new d_({text:e,cause:r})}}function Av({text:e,schema:t}){try{let r=Wg.default.parse(e);if(t==null)return{success:!0,value:r,rawValue:r};let n=sh({value:r,schema:t});return n.success?{...n,rawValue:r}:n}catch(r){return{success:!1,error:d_.isInstance(r)?r:new d_({text:e,cause:r})}}}function s0(e){try{return Wg.default.parse(e),!0}catch{return!1}}var PD=()=>globalThis.fetch,Uf=async({url:e,headers:t,body:r,failedResponseHandler:n,successfulResponseHandler:o,abortSignal:u,fetch:m})=>AD({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:o,abortSignal:u,fetch:m}),AD=async({url:e,headers:t={},body:r,successfulResponseHandler:n,failedResponseHandler:o,abortSignal:u,fetch:m=PD()})=>{try{let y=await m(e,{method:"POST",headers:ED(t),body:r.content,signal:u}),T=Vg(y);if(!y.ok){let D;try{D=await o({response:y,url:e,requestBodyValues:r.values})}catch(U){throw V_(U)||Sl.isInstance(U)?U:new Sl({message:"Failed to process error response",cause:U,statusCode:y.status,url:e,responseHeaders:T,requestBodyValues:r.values})}throw D.value}try{return await n({response:y,url:e,requestBodyValues:r.values})}catch(D){throw D instanceof Error&&(V_(D)||Sl.isInstance(D))?D:new Sl({message:"Failed to process successful response",cause:D,statusCode:y.status,url:e,responseHeaders:T,requestBodyValues:r.values})}}catch(y){if(V_(y))throw y;if(y instanceof TypeError&&y.message==="fetch failed"){let T=y.cause;if(T!=null)throw new Sl({message:`Cannot connect to API: ${T.message}`,cause:T,url:e,requestBodyValues:r.values,isRetryable:!0})}throw y}};async function rb(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var Jg=({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:n,url:o,requestBodyValues:u})=>{let m=await n.text(),y=Vg(n);if(m.trim()==="")return{responseHeaders:y,value:new Sl({message:n.statusText,url:o,requestBodyValues:u,statusCode:n.status,responseHeaders:y,responseBody:m,isRetryable:r==null?void 0:r(n)})};try{let T=xD({text:m,schema:e});return{responseHeaders:y,value:new Sl({message:t(T),url:o,requestBodyValues:u,statusCode:n.status,responseHeaders:y,responseBody:m,data:T,isRetryable:r==null?void 0:r(n,T)})}}catch{return{responseHeaders:y,value:new Sl({message:n.statusText,url:o,requestBodyValues:u,statusCode:n.status,responseHeaders:y,responseBody:m,isRetryable:r==null?void 0:r(n)})}}},m_=e=>async({response:t})=>{let r=Vg(t);if(t.body==null)throw new n0({});return{responseHeaders:r,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new Gg).pipeThrough(new TransformStream({transform({data:n},o){n!=="[DONE]"&&o.enqueue(Av({text:n,schema:e}))}}))}};var Rv=e=>async({response:t,url:r,requestBodyValues:n})=>{let o=await t.text(),u=Av({text:o,schema:e}),m=Vg(t);if(!u.success)throw new Sl({message:"Invalid JSON response",cause:u.error,statusCode:t.status,responseHeaders:m,responseBody:o,url:r,requestBodyValues:n});return{responseHeaders:m,value:u.value,rawValue:u.rawValue}};var{btoa:RD,atob:OD}=globalThis;function nb(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=OD(t);return Uint8Array.from(r,n=>n.codePointAt(0))}function xh(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return RD(t)}function Zg(e){return e==null?void 0:e.replace(/\/$/,"")}var dn;(function(e){e.assertEqual=o=>o;function t(o){}e.assertIs=t;function r(o){throw new Error}e.assertNever=r,e.arrayToEnum=o=>{let u={};for(let m of o)u[m]=m;return u},e.getValidEnumValues=o=>{let u=e.objectKeys(o).filter(y=>typeof o[o[y]]!="number"),m={};for(let y of u)m[y]=o[y];return e.objectValues(m)},e.objectValues=o=>e.objectKeys(o).map(function(u){return o[u]}),e.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{let u=[];for(let m in o)Object.prototype.hasOwnProperty.call(o,m)&&u.push(m);return u},e.find=(o,u)=>{for(let m of o)if(u(m))return m},e.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&isFinite(o)&&Math.floor(o)===o;function n(o,u=" | "){return o.map(m=>typeof m=="string"?`'${m}'`:m).join(u)}e.joinValues=n,e.jsonStringifyReplacer=(o,u)=>typeof u=="bigint"?u.toString():u})(dn||(dn={}));var c0;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(c0||(c0={}));var yt=dn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),bm=e=>{switch(typeof e){case"undefined":return yt.undefined;case"string":return yt.string;case"number":return isNaN(e)?yt.nan:yt.number;case"boolean":return yt.boolean;case"function":return yt.function;case"bigint":return yt.bigint;case"symbol":return yt.symbol;case"object":return Array.isArray(e)?yt.array:e===null?yt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?yt.promise:typeof Map<"u"&&e instanceof Map?yt.map:typeof Set<"u"&&e instanceof Set?yt.set:typeof Date<"u"&&e instanceof Date?yt.date:yt.object;default:return yt.unknown}},$e=dn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),kD=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),bc=class e extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){let r=t||function(u){return u.message},n={_errors:[]},o=u=>{for(let m of u.issues)if(m.code==="invalid_union")m.unionErrors.map(o);else if(m.code==="invalid_return_type")o(m.returnTypeError);else if(m.code==="invalid_arguments")o(m.argumentsError);else if(m.path.length===0)n._errors.push(r(m));else{let y=n,T=0;for(;T<m.path.length;){let D=m.path[T];T===m.path.length-1?(y[D]=y[D]||{_errors:[]},y[D]._errors.push(r(m))):y[D]=y[D]||{_errors:[]},y=y[D],T++}}};return o(this),n}static assert(t){if(!(t instanceof e))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,dn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){let r={},n=[];for(let o of this.issues)o.path.length>0?(r[o.path[0]]=r[o.path[0]]||[],r[o.path[0]].push(t(o))):n.push(t(o));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};bc.create=e=>new bc(e);var g_=(e,t)=>{let r;switch(e.code){case $e.invalid_type:e.received===yt.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case $e.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,dn.jsonStringifyReplacer)}`;break;case $e.unrecognized_keys:r=`Unrecognized key(s) in object: ${dn.joinValues(e.keys,", ")}`;break;case $e.invalid_union:r="Invalid input";break;case $e.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${dn.joinValues(e.options)}`;break;case $e.invalid_enum_value:r=`Invalid enum value. Expected ${dn.joinValues(e.options)}, received '${e.received}'`;break;case $e.invalid_arguments:r="Invalid function arguments";break;case $e.invalid_return_type:r="Invalid function return type";break;case $e.invalid_date:r="Invalid date";break;case $e.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:dn.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case $e.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case $e.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case $e.custom:r="Invalid input";break;case $e.invalid_intersection_types:r="Intersection results could not be merged";break;case $e.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case $e.not_finite:r="Number must be finite";break;default:r=t.defaultError,dn.assertNever(e)}return{message:r}},ob=g_;function MD(e){ob=e}function Xg(){return ob}var Qg=e=>{let{data:t,path:r,errorMaps:n,issueData:o}=e,u=[...r,...o.path||[]],m={...o,path:u};if(o.message!==void 0)return{...o,path:u,message:o.message};let y="",T=n.filter(D=>!!D).slice().reverse();for(let D of T)y=D(m,{data:t,defaultError:y}).message;return{...o,path:u,message:y}},LD=[];function st(e,t){let r=Xg(),n=Qg({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===g_?void 0:g_].filter(o=>!!o)});e.common.issues.push(n)}var Fu=class e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){let n=[];for(let o of r){if(o.status==="aborted")return _r;o.status==="dirty"&&t.dirty(),n.push(o.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){let n=[];for(let o of r){let u=await o.key,m=await o.value;n.push({key:u,value:m})}return e.mergeObjectSync(t,n)}static mergeObjectSync(t,r){let n={};for(let o of r){let{key:u,value:m}=o;if(u.status==="aborted"||m.status==="aborted")return _r;u.status==="dirty"&&t.dirty(),m.status==="dirty"&&t.dirty(),u.value!=="__proto__"&&(typeof m.value<"u"||o.alwaysSet)&&(n[u.value]=m.value)}return{status:t.value,value:n}}},_r=Object.freeze({status:"aborted"}),__=e=>({status:"dirty",value:e}),Ec=e=>({status:"valid",value:e}),l0=e=>e.status==="aborted",f0=e=>e.status==="dirty",Ph=e=>e.status==="valid",Z_=e=>typeof Promise<"u"&&e instanceof Promise;function ey(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function sb(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r}var Ot;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Ot||(Ot={}));var W_,J_,jd=class{constructor(t,r,n,o){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=o}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},ab=(e,t)=>{if(Ph(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new bc(e.common.issues);return this._error=r,this._error}}};function kr(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:o}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:o}:{errorMap:(m,y)=>{var T,D;let{message:U}=e;return m.code==="invalid_enum_value"?{message:U??y.defaultError}:typeof y.data>"u"?{message:(T=U??n)!==null&&T!==void 0?T:y.defaultError}:m.code!=="invalid_type"?{message:y.defaultError}:{message:(D=U??r)!==null&&D!==void 0?D:y.defaultError}},description:o}}var Mr=class{get description(){return this._def.description}_getType(t){return bm(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:bm(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Fu,ctx:{common:t.parent.common,data:t.data,parsedType:bm(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let r=this._parse(t);if(Z_(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){let r=this._parse(t);return Promise.resolve(r)}parse(t,r){let n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){var n;let o={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:bm(t)},u=this._parseSync({data:t,path:o.path,parent:o});return ab(o,u)}"~validate"(t){var r,n;let o={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:bm(t)};if(!this["~standard"].async)try{let u=this._parseSync({data:t,path:[],parent:o});return Ph(u)?{value:u.value}:{issues:o.common.issues}}catch(u){!((n=(r=u==null?void 0:u.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),o.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:o}).then(u=>Ph(u)?{value:u.value}:{issues:o.common.issues})}async parseAsync(t,r){let n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){let n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:bm(t)},o=this._parse({data:t,path:n.path,parent:n}),u=await(Z_(o)?o:Promise.resolve(o));return ab(n,u)}refine(t,r){let n=o=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(o):r;return this._refinement((o,u)=>{let m=t(o),y=()=>u.addIssue({code:$e.custom,...n(o)});return typeof Promise<"u"&&m instanceof Promise?m.then(T=>T?!0:(y(),!1)):m?!0:(y(),!1)})}refinement(t,r){return this._refinement((n,o)=>t(n)?!0:(o.addIssue(typeof r=="function"?r(n,o):r),!1))}_refinement(t){return new jf({schema:this,typeName:He.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return wl.create(this,this._def)}nullable(){return kv.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Tm.create(this)}promise(){return lh.create(this,this._def)}or(t){return Fh.create([this,t],this._def)}and(t){return Uh.create(this,t,this._def)}transform(t){return new jf({...kr(this._def),schema:this,typeName:He.ZodEffects,effect:{type:"transform",transform:t}})}default(t){let r=typeof t=="function"?t:()=>t;return new Bh({...kr(this._def),innerType:this,defaultValue:r,typeName:He.ZodDefault})}brand(){return new X_({typeName:He.ZodBranded,type:this,...kr(this._def)})}catch(t){let r=typeof t=="function"?t:()=>t;return new zh({...kr(this._def),innerType:this,catchValue:r,typeName:He.ZodCatch})}describe(t){let r=this.constructor;return new r({...this._def,description:t})}pipe(t){return Q_.create(this,t)}readonly(){return Hh.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},FD=/^c[^\s-]{8,}$/i,UD=/^[0-9a-z]+$/,jD=/^[0-9A-HJKMNP-TV-Z]{26}$/i,YD=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,$D=/^[a-z0-9_-]{21}$/i,qD=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,BD=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,zD=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,HD="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",u0,GD=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,VD=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,KD=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,WD=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,JD=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ZD=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ub="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",XD=new RegExp(`^${ub}$`);function cb(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function QD(e){return new RegExp(`^${cb(e)}$`)}function lb(e){let t=`${ub}T${cb(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function eC(e,t){return!!((t==="v4"||!t)&&GD.test(e)||(t==="v6"||!t)&&KD.test(e))}function tC(e,t){if(!qD.test(e))return!1;try{let[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),o=JSON.parse(atob(n));return!(typeof o!="object"||o===null||!o.typ||!o.alg||t&&o.alg!==t)}catch{return!1}}function rC(e,t){return!!((t==="v4"||!t)&&VD.test(e)||(t==="v6"||!t)&&WD.test(e))}var uh=class e extends Mr{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==yt.string){let u=this._getOrReturnCtx(t);return st(u,{code:$e.invalid_type,expected:yt.string,received:u.parsedType}),_r}let n=new Fu,o;for(let u of this._def.checks)if(u.kind==="min")t.data.length<u.value&&(o=this._getOrReturnCtx(t,o),st(o,{code:$e.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),n.dirty());else if(u.kind==="max")t.data.length>u.value&&(o=this._getOrReturnCtx(t,o),st(o,{code:$e.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),n.dirty());else if(u.kind==="length"){let m=t.data.length>u.value,y=t.data.length<u.value;(m||y)&&(o=this._getOrReturnCtx(t,o),m?st(o,{code:$e.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}):y&&st(o,{code:$e.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}),n.dirty())}else if(u.kind==="email")zD.test(t.data)||(o=this._getOrReturnCtx(t,o),st(o,{validation:"email",code:$e.invalid_string,message:u.message}),n.dirty());else if(u.kind==="emoji")u0||(u0=new RegExp(HD,"u")),u0.test(t.data)||(o=this._getOrReturnCtx(t,o),st(o,{validation:"emoji",code:$e.invalid_string,message:u.message}),n.dirty());else if(u.kind==="uuid")YD.test(t.data)||(o=this._getOrReturnCtx(t,o),st(o,{validation:"uuid",code:$e.invalid_string,message:u.message}),n.dirty());else if(u.kind==="nanoid")$D.test(t.data)||(o=this._getOrReturnCtx(t,o),st(o,{validation:"nanoid",code:$e.invalid_string,message:u.message}),n.dirty());else if(u.kind==="cuid")FD.test(t.data)||(o=this._getOrReturnCtx(t,o),st(o,{validation:"cuid",code:$e.invalid_string,message:u.message}),n.dirty());else if(u.kind==="cuid2")UD.test(t.data)||(o=this._getOrReturnCtx(t,o),st(o,{validation:"cuid2",code:$e.invalid_string,message:u.message}),n.dirty());else if(u.kind==="ulid")jD.test(t.data)||(o=this._getOrReturnCtx(t,o),st(o,{validation:"ulid",code:$e.invalid_string,message:u.message}),n.dirty());else if(u.kind==="url")try{new URL(t.data)}catch{o=this._getOrReturnCtx(t,o),st(o,{validation:"url",code:$e.invalid_string,message:u.message}),n.dirty()}else u.kind==="regex"?(u.regex.lastIndex=0,u.regex.test(t.data)||(o=this._getOrReturnCtx(t,o),st(o,{validation:"regex",code:$e.invalid_string,message:u.message}),n.dirty())):u.kind==="trim"?t.data=t.data.trim():u.kind==="includes"?t.data.includes(u.value,u.position)||(o=this._getOrReturnCtx(t,o),st(o,{code:$e.invalid_string,validation:{includes:u.value,position:u.position},message:u.message}),n.dirty()):u.kind==="toLowerCase"?t.data=t.data.toLowerCase():u.kind==="toUpperCase"?t.data=t.data.toUpperCase():u.kind==="startsWith"?t.data.startsWith(u.value)||(o=this._getOrReturnCtx(t,o),st(o,{code:$e.invalid_string,validation:{startsWith:u.value},message:u.message}),n.dirty()):u.kind==="endsWith"?t.data.endsWith(u.value)||(o=this._getOrReturnCtx(t,o),st(o,{code:$e.invalid_string,validation:{endsWith:u.value},message:u.message}),n.dirty()):u.kind==="datetime"?lb(u).test(t.data)||(o=this._getOrReturnCtx(t,o),st(o,{code:$e.invalid_string,validation:"datetime",message:u.message}),n.dirty()):u.kind==="date"?XD.test(t.data)||(o=this._getOrReturnCtx(t,o),st(o,{code:$e.invalid_string,validation:"date",message:u.message}),n.dirty()):u.kind==="time"?QD(u).test(t.data)||(o=this._getOrReturnCtx(t,o),st(o,{code:$e.invalid_string,validation:"time",message:u.message}),n.dirty()):u.kind==="duration"?BD.test(t.data)||(o=this._getOrReturnCtx(t,o),st(o,{validation:"duration",code:$e.invalid_string,message:u.message}),n.dirty()):u.kind==="ip"?eC(t.data,u.version)||(o=this._getOrReturnCtx(t,o),st(o,{validation:"ip",code:$e.invalid_string,message:u.message}),n.dirty()):u.kind==="jwt"?tC(t.data,u.alg)||(o=this._getOrReturnCtx(t,o),st(o,{validation:"jwt",code:$e.invalid_string,message:u.message}),n.dirty()):u.kind==="cidr"?rC(t.data,u.version)||(o=this._getOrReturnCtx(t,o),st(o,{validation:"cidr",code:$e.invalid_string,message:u.message}),n.dirty()):u.kind==="base64"?JD.test(t.data)||(o=this._getOrReturnCtx(t,o),st(o,{validation:"base64",code:$e.invalid_string,message:u.message}),n.dirty()):u.kind==="base64url"?ZD.test(t.data)||(o=this._getOrReturnCtx(t,o),st(o,{validation:"base64url",code:$e.invalid_string,message:u.message}),n.dirty()):dn.assertNever(u);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(o=>t.test(o),{validation:r,code:$e.invalid_string,...Ot.errToObj(n)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Ot.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Ot.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Ot.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Ot.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Ot.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Ot.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Ot.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Ot.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Ot.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Ot.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Ot.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Ot.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Ot.errToObj(t)})}datetime(t){var r,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(r=t==null?void 0:t.offset)!==null&&r!==void 0?r:!1,local:(n=t==null?void 0:t.local)!==null&&n!==void 0?n:!1,...Ot.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Ot.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Ot.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Ot.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...Ot.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Ot.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Ot.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Ot.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Ot.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Ot.errToObj(r)})}nonempty(t){return this.min(1,Ot.errToObj(t))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};uh.create=e=>{var t;return new uh({checks:[],typeName:He.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...kr(e)})};function nC(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,o=r>n?r:n,u=parseInt(e.toFixed(o).replace(".","")),m=parseInt(t.toFixed(o).replace(".",""));return u%m/Math.pow(10,o)}var Ah=class e extends Mr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==yt.number){let u=this._getOrReturnCtx(t);return st(u,{code:$e.invalid_type,expected:yt.number,received:u.parsedType}),_r}let n,o=new Fu;for(let u of this._def.checks)u.kind==="int"?dn.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),st(n,{code:$e.invalid_type,expected:"integer",received:"float",message:u.message}),o.dirty()):u.kind==="min"?(u.inclusive?t.data<u.value:t.data<=u.value)&&(n=this._getOrReturnCtx(t,n),st(n,{code:$e.too_small,minimum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),o.dirty()):u.kind==="max"?(u.inclusive?t.data>u.value:t.data>=u.value)&&(n=this._getOrReturnCtx(t,n),st(n,{code:$e.too_big,maximum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),o.dirty()):u.kind==="multipleOf"?nC(t.data,u.value)!==0&&(n=this._getOrReturnCtx(t,n),st(n,{code:$e.not_multiple_of,multipleOf:u.value,message:u.message}),o.dirty()):u.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),st(n,{code:$e.not_finite,message:u.message}),o.dirty()):dn.assertNever(u);return{status:o.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Ot.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ot.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ot.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ot.toString(r))}setLimit(t,r,n,o){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Ot.toString(o)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Ot.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ot.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ot.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ot.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ot.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ot.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Ot.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ot.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ot.toString(t)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&dn.isInteger(t.value))}get isFinite(){let t=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}};Ah.create=e=>new Ah({checks:[],typeName:He.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...kr(e)});var Rh=class e extends Mr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==yt.bigint)return this._getInvalidInput(t);let n,o=new Fu;for(let u of this._def.checks)u.kind==="min"?(u.inclusive?t.data<u.value:t.data<=u.value)&&(n=this._getOrReturnCtx(t,n),st(n,{code:$e.too_small,type:"bigint",minimum:u.value,inclusive:u.inclusive,message:u.message}),o.dirty()):u.kind==="max"?(u.inclusive?t.data>u.value:t.data>=u.value)&&(n=this._getOrReturnCtx(t,n),st(n,{code:$e.too_big,type:"bigint",maximum:u.value,inclusive:u.inclusive,message:u.message}),o.dirty()):u.kind==="multipleOf"?t.data%u.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),st(n,{code:$e.not_multiple_of,multipleOf:u.value,message:u.message}),o.dirty()):dn.assertNever(u);return{status:o.value,value:t.data}}_getInvalidInput(t){let r=this._getOrReturnCtx(t);return st(r,{code:$e.invalid_type,expected:yt.bigint,received:r.parsedType}),_r}gte(t,r){return this.setLimit("min",t,!0,Ot.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ot.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ot.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ot.toString(r))}setLimit(t,r,n,o){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Ot.toString(o)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ot.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ot.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ot.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ot.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ot.toString(r)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};Rh.create=e=>{var t;return new Rh({checks:[],typeName:He.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...kr(e)})};var Oh=class extends Mr{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==yt.boolean){let n=this._getOrReturnCtx(t);return st(n,{code:$e.invalid_type,expected:yt.boolean,received:n.parsedType}),_r}return Ec(t.data)}};Oh.create=e=>new Oh({typeName:He.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...kr(e)});var kh=class e extends Mr{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==yt.date){let u=this._getOrReturnCtx(t);return st(u,{code:$e.invalid_type,expected:yt.date,received:u.parsedType}),_r}if(isNaN(t.data.getTime())){let u=this._getOrReturnCtx(t);return st(u,{code:$e.invalid_date}),_r}let n=new Fu,o;for(let u of this._def.checks)u.kind==="min"?t.data.getTime()<u.value&&(o=this._getOrReturnCtx(t,o),st(o,{code:$e.too_small,message:u.message,inclusive:!0,exact:!1,minimum:u.value,type:"date"}),n.dirty()):u.kind==="max"?t.data.getTime()>u.value&&(o=this._getOrReturnCtx(t,o),st(o,{code:$e.too_big,message:u.message,inclusive:!0,exact:!1,maximum:u.value,type:"date"}),n.dirty()):dn.assertNever(u);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Ot.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Ot.toString(r)})}get minDate(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}};kh.create=e=>new kh({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:He.ZodDate,...kr(e)});var y_=class extends Mr{_parse(t){if(this._getType(t)!==yt.symbol){let n=this._getOrReturnCtx(t);return st(n,{code:$e.invalid_type,expected:yt.symbol,received:n.parsedType}),_r}return Ec(t.data)}};y_.create=e=>new y_({typeName:He.ZodSymbol,...kr(e)});var Mh=class extends Mr{_parse(t){if(this._getType(t)!==yt.undefined){let n=this._getOrReturnCtx(t);return st(n,{code:$e.invalid_type,expected:yt.undefined,received:n.parsedType}),_r}return Ec(t.data)}};Mh.create=e=>new Mh({typeName:He.ZodUndefined,...kr(e)});var Lh=class extends Mr{_parse(t){if(this._getType(t)!==yt.null){let n=this._getOrReturnCtx(t);return st(n,{code:$e.invalid_type,expected:yt.null,received:n.parsedType}),_r}return Ec(t.data)}};Lh.create=e=>new Lh({typeName:He.ZodNull,...kr(e)});var ch=class extends Mr{constructor(){super(...arguments),this._any=!0}_parse(t){return Ec(t.data)}};ch.create=e=>new ch({typeName:He.ZodAny,...kr(e)});var Em=class extends Mr{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Ec(t.data)}};Em.create=e=>new Em({typeName:He.ZodUnknown,...kr(e)});var Op=class extends Mr{_parse(t){let r=this._getOrReturnCtx(t);return st(r,{code:$e.invalid_type,expected:yt.never,received:r.parsedType}),_r}};Op.create=e=>new Op({typeName:He.ZodNever,...kr(e)});var S_=class extends Mr{_parse(t){if(this._getType(t)!==yt.undefined){let n=this._getOrReturnCtx(t);return st(n,{code:$e.invalid_type,expected:yt.void,received:n.parsedType}),_r}return Ec(t.data)}};S_.create=e=>new S_({typeName:He.ZodVoid,...kr(e)});var Tm=class e extends Mr{_parse(t){let{ctx:r,status:n}=this._processInputParams(t),o=this._def;if(r.parsedType!==yt.array)return st(r,{code:$e.invalid_type,expected:yt.array,received:r.parsedType}),_r;if(o.exactLength!==null){let m=r.data.length>o.exactLength.value,y=r.data.length<o.exactLength.value;(m||y)&&(st(r,{code:m?$e.too_big:$e.too_small,minimum:y?o.exactLength.value:void 0,maximum:m?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),n.dirty())}if(o.minLength!==null&&r.data.length<o.minLength.value&&(st(r,{code:$e.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),n.dirty()),o.maxLength!==null&&r.data.length>o.maxLength.value&&(st(r,{code:$e.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((m,y)=>o.type._parseAsync(new jd(r,m,r.path,y)))).then(m=>Fu.mergeArray(n,m));let u=[...r.data].map((m,y)=>o.type._parseSync(new jd(r,m,r.path,y)));return Fu.mergeArray(n,u)}get element(){return this._def.type}min(t,r){return new e({...this._def,minLength:{value:t,message:Ot.toString(r)}})}max(t,r){return new e({...this._def,maxLength:{value:t,message:Ot.toString(r)}})}length(t,r){return new e({...this._def,exactLength:{value:t,message:Ot.toString(r)}})}nonempty(t){return this.min(1,t)}};Tm.create=(e,t)=>new Tm({type:e,minLength:null,maxLength:null,exactLength:null,typeName:He.ZodArray,...kr(t)});function h_(e){if(e instanceof bl){let t={};for(let r in e.shape){let n=e.shape[r];t[r]=wl.create(h_(n))}return new bl({...e._def,shape:()=>t})}else return e instanceof Tm?new Tm({...e._def,type:h_(e.element)}):e instanceof wl?wl.create(h_(e.unwrap())):e instanceof kv?kv.create(h_(e.unwrap())):e instanceof Ov?Ov.create(e.items.map(t=>h_(t))):e}var bl=class e extends Mr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let t=this._def.shape(),r=dn.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==yt.object){let D=this._getOrReturnCtx(t);return st(D,{code:$e.invalid_type,expected:yt.object,received:D.parsedType}),_r}let{status:n,ctx:o}=this._processInputParams(t),{shape:u,keys:m}=this._getCached(),y=[];if(!(this._def.catchall instanceof Op&&this._def.unknownKeys==="strip"))for(let D in o.data)m.includes(D)||y.push(D);let T=[];for(let D of m){let U=u[D],H=o.data[D];T.push({key:{status:"valid",value:D},value:U._parse(new jd(o,H,o.path,D)),alwaysSet:D in o.data})}if(this._def.catchall instanceof Op){let D=this._def.unknownKeys;if(D==="passthrough")for(let U of y)T.push({key:{status:"valid",value:U},value:{status:"valid",value:o.data[U]}});else if(D==="strict")y.length>0&&(st(o,{code:$e.unrecognized_keys,keys:y}),n.dirty());else if(D!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let D=this._def.catchall;for(let U of y){let H=o.data[U];T.push({key:{status:"valid",value:U},value:D._parse(new jd(o,H,o.path,U)),alwaysSet:U in o.data})}}return o.common.async?Promise.resolve().then(async()=>{let D=[];for(let U of T){let H=await U.key,ne=await U.value;D.push({key:H,value:ne,alwaysSet:U.alwaysSet})}return D}).then(D=>Fu.mergeObjectSync(n,D)):Fu.mergeObjectSync(n,T)}get shape(){return this._def.shape()}strict(t){return Ot.errToObj,new e({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var o,u,m,y;let T=(m=(u=(o=this._def).errorMap)===null||u===void 0?void 0:u.call(o,r,n).message)!==null&&m!==void 0?m:n.defaultError;return r.code==="unrecognized_keys"?{message:(y=Ot.errToObj(t).message)!==null&&y!==void 0?y:T}:{message:T}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:He.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new e({...this._def,catchall:t})}pick(t){let r={};return dn.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new e({...this._def,shape:()=>r})}omit(t){let r={};return dn.objectKeys(this.shape).forEach(n=>{t[n]||(r[n]=this.shape[n])}),new e({...this._def,shape:()=>r})}deepPartial(){return h_(this)}partial(t){let r={};return dn.objectKeys(this.shape).forEach(n=>{let o=this.shape[n];t&&!t[n]?r[n]=o:r[n]=o.optional()}),new e({...this._def,shape:()=>r})}required(t){let r={};return dn.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])r[n]=this.shape[n];else{let u=this.shape[n];for(;u instanceof wl;)u=u._def.innerType;r[n]=u}}),new e({...this._def,shape:()=>r})}keyof(){return fb(dn.objectKeys(this.shape))}};bl.create=(e,t)=>new bl({shape:()=>e,unknownKeys:"strip",catchall:Op.create(),typeName:He.ZodObject,...kr(t)});bl.strictCreate=(e,t)=>new bl({shape:()=>e,unknownKeys:"strict",catchall:Op.create(),typeName:He.ZodObject,...kr(t)});bl.lazycreate=(e,t)=>new bl({shape:e,unknownKeys:"strip",catchall:Op.create(),typeName:He.ZodObject,...kr(t)});var Fh=class extends Mr{_parse(t){let{ctx:r}=this._processInputParams(t),n=this._def.options;function o(u){for(let y of u)if(y.result.status==="valid")return y.result;for(let y of u)if(y.result.status==="dirty")return r.common.issues.push(...y.ctx.common.issues),y.result;let m=u.map(y=>new bc(y.ctx.common.issues));return st(r,{code:$e.invalid_union,unionErrors:m}),_r}if(r.common.async)return Promise.all(n.map(async u=>{let m={...r,common:{...r.common,issues:[]},parent:null};return{result:await u._parseAsync({data:r.data,path:r.path,parent:m}),ctx:m}})).then(o);{let u,m=[];for(let T of n){let D={...r,common:{...r.common,issues:[]},parent:null},U=T._parseSync({data:r.data,path:r.path,parent:D});if(U.status==="valid")return U;U.status==="dirty"&&!u&&(u={result:U,ctx:D}),D.common.issues.length&&m.push(D.common.issues)}if(u)return r.common.issues.push(...u.ctx.common.issues),u.result;let y=m.map(T=>new bc(T));return st(r,{code:$e.invalid_union,unionErrors:y}),_r}}get options(){return this._def.options}};Fh.create=(e,t)=>new Fh({options:e,typeName:He.ZodUnion,...kr(t)});var wm=e=>e instanceof jh?wm(e.schema):e instanceof jf?wm(e.innerType()):e instanceof Yh?[e.value]:e instanceof $h?e.options:e instanceof qh?dn.objectValues(e.enum):e instanceof Bh?wm(e._def.innerType):e instanceof Mh?[void 0]:e instanceof Lh?[null]:e instanceof wl?[void 0,...wm(e.unwrap())]:e instanceof kv?[null,...wm(e.unwrap())]:e instanceof X_||e instanceof Hh?wm(e.unwrap()):e instanceof zh?wm(e._def.innerType):[],ty=class e extends Mr{_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.object)return st(r,{code:$e.invalid_type,expected:yt.object,received:r.parsedType}),_r;let n=this.discriminator,o=r.data[n],u=this.optionsMap.get(o);return u?r.common.async?u._parseAsync({data:r.data,path:r.path,parent:r}):u._parseSync({data:r.data,path:r.path,parent:r}):(st(r,{code:$e.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),_r)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,n){let o=new Map;for(let u of r){let m=wm(u.shape[t]);if(!m.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let y of m){if(o.has(y))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(y)}`);o.set(y,u)}}return new e({typeName:He.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:o,...kr(n)})}};function d0(e,t){let r=bm(e),n=bm(t);if(e===t)return{valid:!0,data:e};if(r===yt.object&&n===yt.object){let o=dn.objectKeys(t),u=dn.objectKeys(e).filter(y=>o.indexOf(y)!==-1),m={...e,...t};for(let y of u){let T=d0(e[y],t[y]);if(!T.valid)return{valid:!1};m[y]=T.data}return{valid:!0,data:m}}else if(r===yt.array&&n===yt.array){if(e.length!==t.length)return{valid:!1};let o=[];for(let u=0;u<e.length;u++){let m=e[u],y=t[u],T=d0(m,y);if(!T.valid)return{valid:!1};o.push(T.data)}return{valid:!0,data:o}}else return r===yt.date&&n===yt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var Uh=class extends Mr{_parse(t){let{status:r,ctx:n}=this._processInputParams(t),o=(u,m)=>{if(l0(u)||l0(m))return _r;let y=d0(u.value,m.value);return y.valid?((f0(u)||f0(m))&&r.dirty(),{status:r.value,value:y.data}):(st(n,{code:$e.invalid_intersection_types}),_r)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([u,m])=>o(u,m)):o(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Uh.create=(e,t,r)=>new Uh({left:e,right:t,typeName:He.ZodIntersection,...kr(r)});var Ov=class e extends Mr{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.array)return st(n,{code:$e.invalid_type,expected:yt.array,received:n.parsedType}),_r;if(n.data.length<this._def.items.length)return st(n,{code:$e.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_r;!this._def.rest&&n.data.length>this._def.items.length&&(st(n,{code:$e.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let u=[...n.data].map((m,y)=>{let T=this._def.items[y]||this._def.rest;return T?T._parse(new jd(n,m,n.path,y)):null}).filter(m=>!!m);return n.common.async?Promise.all(u).then(m=>Fu.mergeArray(r,m)):Fu.mergeArray(r,u)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};Ov.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ov({items:e,typeName:He.ZodTuple,rest:null,...kr(t)})};var ry=class e extends Mr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.object)return st(n,{code:$e.invalid_type,expected:yt.object,received:n.parsedType}),_r;let o=[],u=this._def.keyType,m=this._def.valueType;for(let y in n.data)o.push({key:u._parse(new jd(n,y,n.path,y)),value:m._parse(new jd(n,n.data[y],n.path,y)),alwaysSet:y in n.data});return n.common.async?Fu.mergeObjectAsync(r,o):Fu.mergeObjectSync(r,o)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof Mr?new e({keyType:t,valueType:r,typeName:He.ZodRecord,...kr(n)}):new e({keyType:uh.create(),valueType:t,typeName:He.ZodRecord,...kr(r)})}},w_=class extends Mr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.map)return st(n,{code:$e.invalid_type,expected:yt.map,received:n.parsedType}),_r;let o=this._def.keyType,u=this._def.valueType,m=[...n.data.entries()].map(([y,T],D)=>({key:o._parse(new jd(n,y,n.path,[D,"key"])),value:u._parse(new jd(n,T,n.path,[D,"value"]))}));if(n.common.async){let y=new Map;return Promise.resolve().then(async()=>{for(let T of m){let D=await T.key,U=await T.value;if(D.status==="aborted"||U.status==="aborted")return _r;(D.status==="dirty"||U.status==="dirty")&&r.dirty(),y.set(D.value,U.value)}return{status:r.value,value:y}})}else{let y=new Map;for(let T of m){let D=T.key,U=T.value;if(D.status==="aborted"||U.status==="aborted")return _r;(D.status==="dirty"||U.status==="dirty")&&r.dirty(),y.set(D.value,U.value)}return{status:r.value,value:y}}}};w_.create=(e,t,r)=>new w_({valueType:t,keyType:e,typeName:He.ZodMap,...kr(r)});var b_=class e extends Mr{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.set)return st(n,{code:$e.invalid_type,expected:yt.set,received:n.parsedType}),_r;let o=this._def;o.minSize!==null&&n.data.size<o.minSize.value&&(st(n,{code:$e.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),r.dirty()),o.maxSize!==null&&n.data.size>o.maxSize.value&&(st(n,{code:$e.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),r.dirty());let u=this._def.valueType;function m(T){let D=new Set;for(let U of T){if(U.status==="aborted")return _r;U.status==="dirty"&&r.dirty(),D.add(U.value)}return{status:r.value,value:D}}let y=[...n.data.values()].map((T,D)=>u._parse(new jd(n,T,n.path,D)));return n.common.async?Promise.all(y).then(T=>m(T)):m(y)}min(t,r){return new e({...this._def,minSize:{value:t,message:Ot.toString(r)}})}max(t,r){return new e({...this._def,maxSize:{value:t,message:Ot.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}};b_.create=(e,t)=>new b_({valueType:e,minSize:null,maxSize:null,typeName:He.ZodSet,...kr(t)});var ny=class e extends Mr{constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.function)return st(r,{code:$e.invalid_type,expected:yt.function,received:r.parsedType}),_r;function n(y,T){return Qg({data:y,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Xg(),g_].filter(D=>!!D),issueData:{code:$e.invalid_arguments,argumentsError:T}})}function o(y,T){return Qg({data:y,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Xg(),g_].filter(D=>!!D),issueData:{code:$e.invalid_return_type,returnTypeError:T}})}let u={errorMap:r.common.contextualErrorMap},m=r.data;if(this._def.returns instanceof lh){let y=this;return Ec(async function(...T){let D=new bc([]),U=await y._def.args.parseAsync(T,u).catch(pe=>{throw D.addIssue(n(T,pe)),D}),H=await Reflect.apply(m,this,U);return await y._def.returns._def.type.parseAsync(H,u).catch(pe=>{throw D.addIssue(o(H,pe)),D})})}else{let y=this;return Ec(function(...T){let D=y._def.args.safeParse(T,u);if(!D.success)throw new bc([n(T,D.error)]);let U=Reflect.apply(m,this,D.data),H=y._def.returns.safeParse(U,u);if(!H.success)throw new bc([o(U,H.error)]);return H.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new e({...this._def,args:Ov.create(t).rest(Em.create())})}returns(t){return new e({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,n){return new e({args:t||Ov.create([]).rest(Em.create()),returns:r||Em.create(),typeName:He.ZodFunction,...kr(n)})}},jh=class extends Mr{get schema(){return this._def.getter()}_parse(t){let{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};jh.create=(e,t)=>new jh({getter:e,typeName:He.ZodLazy,...kr(t)});var Yh=class extends Mr{_parse(t){if(t.data!==this._def.value){let r=this._getOrReturnCtx(t);return st(r,{received:r.data,code:$e.invalid_literal,expected:this._def.value}),_r}return{status:"valid",value:t.data}}get value(){return this._def.value}};Yh.create=(e,t)=>new Yh({value:e,typeName:He.ZodLiteral,...kr(t)});function fb(e,t){return new $h({values:e,typeName:He.ZodEnum,...kr(t)})}var $h=class e extends Mr{constructor(){super(...arguments),W_.set(this,void 0)}_parse(t){if(typeof t.data!="string"){let r=this._getOrReturnCtx(t),n=this._def.values;return st(r,{expected:dn.joinValues(n),received:r.parsedType,code:$e.invalid_type}),_r}if(ey(this,W_,"f")||sb(this,W_,new Set(this._def.values),"f"),!ey(this,W_,"f").has(t.data)){let r=this._getOrReturnCtx(t),n=this._def.values;return st(r,{received:r.data,code:$e.invalid_enum_value,options:n}),_r}return Ec(t.data)}get options(){return this._def.values}get enum(){let t={};for(let r of this._def.values)t[r]=r;return t}get Values(){let t={};for(let r of this._def.values)t[r]=r;return t}get Enum(){let t={};for(let r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return e.create(t,{...this._def,...r})}exclude(t,r=this._def){return e.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}};W_=new WeakMap;$h.create=fb;var qh=class extends Mr{constructor(){super(...arguments),J_.set(this,void 0)}_parse(t){let r=dn.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==yt.string&&n.parsedType!==yt.number){let o=dn.objectValues(r);return st(n,{expected:dn.joinValues(o),received:n.parsedType,code:$e.invalid_type}),_r}if(ey(this,J_,"f")||sb(this,J_,new Set(dn.getValidEnumValues(this._def.values)),"f"),!ey(this,J_,"f").has(t.data)){let o=dn.objectValues(r);return st(n,{received:n.data,code:$e.invalid_enum_value,options:o}),_r}return Ec(t.data)}get enum(){return this._def.values}};J_=new WeakMap;qh.create=(e,t)=>new qh({values:e,typeName:He.ZodNativeEnum,...kr(t)});var lh=class extends Mr{unwrap(){return this._def.type}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.promise&&r.common.async===!1)return st(r,{code:$e.invalid_type,expected:yt.promise,received:r.parsedType}),_r;let n=r.parsedType===yt.promise?r.data:Promise.resolve(r.data);return Ec(n.then(o=>this._def.type.parseAsync(o,{path:r.path,errorMap:r.common.contextualErrorMap})))}};lh.create=(e,t)=>new lh({type:e,typeName:He.ZodPromise,...kr(t)});var jf=class extends Mr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===He.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:r,ctx:n}=this._processInputParams(t),o=this._def.effect||null,u={addIssue:m=>{st(n,m),m.fatal?r.abort():r.dirty()},get path(){return n.path}};if(u.addIssue=u.addIssue.bind(u),o.type==="preprocess"){let m=o.transform(n.data,u);if(n.common.async)return Promise.resolve(m).then(async y=>{if(r.value==="aborted")return _r;let T=await this._def.schema._parseAsync({data:y,path:n.path,parent:n});return T.status==="aborted"?_r:T.status==="dirty"||r.value==="dirty"?__(T.value):T});{if(r.value==="aborted")return _r;let y=this._def.schema._parseSync({data:m,path:n.path,parent:n});return y.status==="aborted"?_r:y.status==="dirty"||r.value==="dirty"?__(y.value):y}}if(o.type==="refinement"){let m=y=>{let T=o.refinement(y,u);if(n.common.async)return Promise.resolve(T);if(T instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return y};if(n.common.async===!1){let y=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return y.status==="aborted"?_r:(y.status==="dirty"&&r.dirty(),m(y.value),{status:r.value,value:y.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(y=>y.status==="aborted"?_r:(y.status==="dirty"&&r.dirty(),m(y.value).then(()=>({status:r.value,value:y.value}))))}if(o.type==="transform")if(n.common.async===!1){let m=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ph(m))return m;let y=o.transform(m.value,u);if(y instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:y}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(m=>Ph(m)?Promise.resolve(o.transform(m.value,u)).then(y=>({status:r.value,value:y})):m);dn.assertNever(o)}};jf.create=(e,t,r)=>new jf({schema:e,typeName:He.ZodEffects,effect:t,...kr(r)});jf.createWithPreprocess=(e,t,r)=>new jf({schema:t,effect:{type:"preprocess",transform:e},typeName:He.ZodEffects,...kr(r)});var wl=class extends Mr{_parse(t){return this._getType(t)===yt.undefined?Ec(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};wl.create=(e,t)=>new wl({innerType:e,typeName:He.ZodOptional,...kr(t)});var kv=class extends Mr{_parse(t){return this._getType(t)===yt.null?Ec(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};kv.create=(e,t)=>new kv({innerType:e,typeName:He.ZodNullable,...kr(t)});var Bh=class extends Mr{_parse(t){let{ctx:r}=this._processInputParams(t),n=r.data;return r.parsedType===yt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Bh.create=(e,t)=>new Bh({innerType:e,typeName:He.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...kr(t)});var zh=class extends Mr{_parse(t){let{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},o=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Z_(o)?o.then(u=>({status:"valid",value:u.status==="valid"?u.value:this._def.catchValue({get error(){return new bc(n.common.issues)},input:n.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new bc(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};zh.create=(e,t)=>new zh({innerType:e,typeName:He.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...kr(t)});var E_=class extends Mr{_parse(t){if(this._getType(t)!==yt.nan){let n=this._getOrReturnCtx(t);return st(n,{code:$e.invalid_type,expected:yt.nan,received:n.parsedType}),_r}return{status:"valid",value:t.data}}};E_.create=e=>new E_({typeName:He.ZodNaN,...kr(e)});var aC=Symbol("zod_brand"),X_=class extends Mr{_parse(t){let{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Q_=class e extends Mr{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{let u=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return u.status==="aborted"?_r:u.status==="dirty"?(r.dirty(),__(u.value)):this._def.out._parseAsync({data:u.value,path:n.path,parent:n})})();{let o=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?_r:o.status==="dirty"?(r.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:n.path,parent:n})}}static create(t,r){return new e({in:t,out:r,typeName:He.ZodPipeline})}},Hh=class extends Mr{_parse(t){let r=this._def.innerType._parse(t),n=o=>(Ph(o)&&(o.value=Object.freeze(o.value)),o);return Z_(r)?r.then(o=>n(o)):n(r)}unwrap(){return this._def.innerType}};Hh.create=(e,t)=>new Hh({innerType:e,typeName:He.ZodReadonly,...kr(t)});function db(e,t={},r){return e?ch.create().superRefine((n,o)=>{var u,m;if(!e(n)){let y=typeof t=="function"?t(n):typeof t=="string"?{message:t}:t,T=(m=(u=y.fatal)!==null&&u!==void 0?u:r)!==null&&m!==void 0?m:!0,D=typeof y=="string"?{message:y}:y;o.addIssue({code:"custom",...D,fatal:T})}}):ch.create()}var iC={object:bl.lazycreate},He;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(He||(He={}));var oC=(e,t={message:`Input not instance of ${e.name}`})=>db(r=>r instanceof e,t),pb=uh.create,vb=Ah.create,sC=E_.create,uC=Rh.create,mb=Oh.create,cC=kh.create,lC=y_.create,fC=Mh.create,dC=Lh.create,pC=ch.create,vC=Em.create,mC=Op.create,hC=S_.create,_C=Tm.create,gC=bl.create,yC=bl.strictCreate,SC=Fh.create,wC=ty.create,bC=Uh.create,EC=Ov.create,TC=ry.create,IC=w_.create,NC=b_.create,DC=ny.create,CC=jh.create,xC=Yh.create,PC=$h.create,AC=qh.create,RC=lh.create,ib=jf.create,OC=wl.create,kC=kv.create,MC=jf.createWithPreprocess,LC=Q_.create,FC=()=>pb().optional(),UC=()=>vb().optional(),jC=()=>mb().optional(),YC={string:e=>uh.create({...e,coerce:!0}),number:e=>Ah.create({...e,coerce:!0}),boolean:e=>Oh.create({...e,coerce:!0}),bigint:e=>Rh.create({...e,coerce:!0}),date:e=>kh.create({...e,coerce:!0})},$C=_r,M=Object.freeze({__proto__:null,defaultErrorMap:g_,setErrorMap:MD,getErrorMap:Xg,makeIssue:Qg,EMPTY_PATH:LD,addIssueToContext:st,ParseStatus:Fu,INVALID:_r,DIRTY:__,OK:Ec,isAborted:l0,isDirty:f0,isValid:Ph,isAsync:Z_,get util(){return dn},get objectUtil(){return c0},ZodParsedType:yt,getParsedType:bm,ZodType:Mr,datetimeRegex:lb,ZodString:uh,ZodNumber:Ah,ZodBigInt:Rh,ZodBoolean:Oh,ZodDate:kh,ZodSymbol:y_,ZodUndefined:Mh,ZodNull:Lh,ZodAny:ch,ZodUnknown:Em,ZodNever:Op,ZodVoid:S_,ZodArray:Tm,ZodObject:bl,ZodUnion:Fh,ZodDiscriminatedUnion:ty,ZodIntersection:Uh,ZodTuple:Ov,ZodRecord:ry,ZodMap:w_,ZodSet:b_,ZodFunction:ny,ZodLazy:jh,ZodLiteral:Yh,ZodEnum:$h,ZodNativeEnum:qh,ZodPromise:lh,ZodEffects:jf,ZodTransformer:jf,ZodOptional:wl,ZodNullable:kv,ZodDefault:Bh,ZodCatch:zh,ZodNaN:E_,BRAND:aC,ZodBranded:X_,ZodPipeline:Q_,ZodReadonly:Hh,custom:db,Schema:Mr,ZodSchema:Mr,late:iC,get ZodFirstPartyTypeKind(){return He},coerce:YC,any:pC,array:_C,bigint:uC,boolean:mb,date:cC,discriminatedUnion:wC,effect:ib,enum:PC,function:DC,instanceof:oC,intersection:bC,lazy:CC,literal:xC,map:IC,nan:sC,nativeEnum:AC,never:mC,null:dC,nullable:kC,number:vb,object:gC,oboolean:jC,onumber:UC,optional:OC,ostring:FC,pipeline:LC,preprocess:MC,promise:RC,record:TC,set:NC,strictObject:yC,string:pb,symbol:lC,transformer:ib,tuple:EC,undefined:fC,union:SC,unknown:vC,void:hC,NEVER:$C,ZodIssueCode:$e,quotelessJson:kD,ZodError:bc});var qC=M.object({type:M.literal("error"),error:M.object({type:M.string(),message:M.string()})}),hb=Jg({errorSchema:qC,errorToMessage:e=>e.error.message});function BC({prompt:e}){var t,r,n,o;let u=new Set,m=zC(e),y,T=[];function D(U){var H;let ne=U==null?void 0:U.anthropic;return(H=ne==null?void 0:ne.cacheControl)!=null?H:ne==null?void 0:ne.cache_control}for(let U=0;U<m.length;U++){let H=m[U],ne=U===m.length-1,pe=H.type;switch(pe){case"system":{if(y!=null)throw new qn({functionality:"Multiple system messages that are separated by user/assistant messages"});y=H.messages.map(({content:ce,providerMetadata:ee})=>({type:"text",text:ce,cache_control:D(ee)}));break}case"user":{let ce=[];for(let ee of H.messages){let{role:Q,content:ve}=ee;switch(Q){case"user":{for(let Pe=0;Pe<ve.length;Pe++){let We=ve[Pe],Ae=Pe===ve.length-1,Ze=(t=D(We.providerMetadata))!=null?t:Ae?D(ee.providerMetadata):void 0;switch(We.type){case"text":{ce.push({type:"text",text:We.text,cache_control:Ze});break}case"image":{if(We.image instanceof URL)throw new qn({functionality:"Image URLs in user messages"});ce.push({type:"image",source:{type:"base64",media_type:(r=We.mimeType)!=null?r:"image/jpeg",data:xh(We.image)},cache_control:Ze});break}case"file":{if(We.data instanceof URL)throw new qn({functionality:"Image URLs in user messages"});if(We.mimeType!=="application/pdf")throw new qn({functionality:"Non-PDF files in user messages"});u.add("pdfs-2024-09-25"),ce.push({type:"document",source:{type:"base64",media_type:"application/pdf",data:We.data},cache_control:Ze});break}}}break}case"tool":{for(let Pe=0;Pe<ve.length;Pe++){let We=ve[Pe],Ae=Pe===ve.length-1,Ze=(n=D(We.providerMetadata))!=null?n:Ae?D(ee.providerMetadata):void 0,Tt=We.content!=null?We.content.map(Dt=>{var Lt;switch(Dt.type){case"text":return{type:"text",text:Dt.text,cache_control:void 0};case"image":return{type:"image",source:{type:"base64",media_type:(Lt=Dt.mimeType)!=null?Lt:"image/jpeg",data:Dt.data},cache_control:void 0}}}):JSON.stringify(We.result);ce.push({type:"tool_result",tool_use_id:We.toolCallId,content:Tt,is_error:We.isError,cache_control:Ze})}break}default:{let Pe=Q;throw new Error(`Unsupported role: ${Pe}`)}}}T.push({role:"user",content:ce});break}case"assistant":{let ce=[];for(let ee=0;ee<H.messages.length;ee++){let Q=H.messages[ee],ve=ee===H.messages.length-1,{content:Pe}=Q;for(let We=0;We<Pe.length;We++){let Ae=Pe[We],Ze=We===Pe.length-1,Tt=(o=D(Ae.providerMetadata))!=null?o:Ze?D(Q.providerMetadata):void 0;switch(Ae.type){case"text":{ce.push({type:"text",text:ne&&ve&&Ze?Ae.text.trim():Ae.text,cache_control:Tt});break}case"tool-call":{ce.push({type:"tool_use",id:Ae.toolCallId,name:Ae.toolName,input:Ae.args,cache_control:Tt});break}}}}T.push({role:"assistant",content:ce});break}default:{let ce=pe;throw new Error(`Unsupported type: ${ce}`)}}}return{prompt:{system:y,messages:T},betas:u}}function zC(e){let t=[],r;for(let n of e){let{role:o}=n;switch(o){case"system":{(r==null?void 0:r.type)!=="system"&&(r={type:"system",messages:[]},t.push(r)),r.messages.push(n);break}case"assistant":{(r==null?void 0:r.type)!=="assistant"&&(r={type:"assistant",messages:[]},t.push(r)),r.messages.push(n);break}case"user":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},t.push(r)),r.messages.push(n);break}case"tool":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},t.push(r)),r.messages.push(n);break}default:{let u=o;throw new Error(`Unsupported role: ${u}`)}}}return t}function _b(e){switch(e){case"end_turn":case"stop_sequence":return"stop";case"tool_use":return"tool-calls";case"max_tokens":return"length";default:return"unknown"}}function HC(e){var t;let r=(t=e.tools)!=null&&t.length?e.tools:void 0,n=[],o=new Set;if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:n,betas:o};let u=[];for(let T of r)switch(T.type){case"function":u.push({name:T.name,description:T.description,input_schema:T.parameters});break;case"provider-defined":switch(o.add("computer-use-2024-10-22"),T.id){case"anthropic.computer_20241022":u.push({name:T.name,type:"computer_20241022",display_width_px:T.args.displayWidthPx,display_height_px:T.args.displayHeightPx,display_number:T.args.displayNumber});break;case"anthropic.text_editor_20241022":u.push({name:T.name,type:"text_editor_20241022"});break;case"anthropic.bash_20241022":u.push({name:T.name,type:"bash_20241022"});break;default:n.push({type:"unsupported-tool",tool:T});break}break;default:n.push({type:"unsupported-tool",tool:T});break}let m=e.toolChoice;if(m==null)return{tools:u,tool_choice:void 0,toolWarnings:n,betas:o};let y=m.type;switch(y){case"auto":return{tools:u,tool_choice:{type:"auto"},toolWarnings:n,betas:o};case"required":return{tools:u,tool_choice:{type:"any"},toolWarnings:n,betas:o};case"none":return{tools:void 0,tool_choice:void 0,toolWarnings:n,betas:o};case"tool":return{tools:u,tool_choice:{type:"tool",name:m.toolName},toolWarnings:n,betas:o};default:{let T=y;throw new qn({functionality:`Unsupported tool choice type: ${T}`})}}}var GC=class{constructor(e,t,r){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:r,temperature:n,topP:o,topK:u,frequencyPenalty:m,presencePenalty:y,stopSequences:T,responseFormat:D,seed:U}){let H=e.type,ne=[];m!=null&&ne.push({type:"unsupported-setting",setting:"frequencyPenalty"}),y!=null&&ne.push({type:"unsupported-setting",setting:"presencePenalty"}),U!=null&&ne.push({type:"unsupported-setting",setting:"seed"}),D!=null&&D.type!=="text"&&ne.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:pe,betas:ce}=BC({prompt:t}),ee={model:this.modelId,max_tokens:r??4096,temperature:n,top_k:u,top_p:o,stop_sequences:T,system:pe.system,messages:pe.messages};switch(H){case"regular":{let{tools:Q,tool_choice:ve,toolWarnings:Pe,betas:We}=HC(e);return{args:{...ee,tools:Q,tool_choice:ve},warnings:[...ne,...Pe],betas:new Set([...ce,...We])}}case"object-json":throw new qn({functionality:"json-mode object generation"});case"object-tool":{let{name:Q,description:ve,parameters:Pe}=e.tool;return{args:{...ee,tools:[{name:Q,description:ve,input_schema:Pe}],tool_choice:{type:"tool",name:Q}},warnings:ne,betas:ce}}default:{let Q=H;throw new Error(`Unsupported type: ${Q}`)}}}async getHeaders({betas:e,headers:t}){return Ud(await rb(this.config.headers),e.size>0?{"anthropic-beta":Array.from(e).join(",")}:{},t)}buildRequestUrl(e){var t,r,n;return(n=(r=(t=this.config).buildRequestUrl)==null?void 0:r.call(t,this.config.baseURL,e))!=null?n:`${this.config.baseURL}/messages`}transformRequestBody(e){var t,r,n;return(n=(r=(t=this.config).transformRequestBody)==null?void 0:r.call(t,e))!=null?n:e}async doGenerate(e){var t,r,n,o;let{args:u,warnings:m,betas:y}=await this.getArgs(e),{responseHeaders:T,value:D}=await Uf({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:y,headers:e.headers}),body:this.transformRequestBody(u),failedResponseHandler:hb,successfulResponseHandler:Rv(VC),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:U,...H}=u,ne="";for(let ce of D.content)ce.type==="text"&&(ne+=ce.text);let pe;if(D.content.some(ce=>ce.type==="tool_use")){pe=[];for(let ce of D.content)ce.type==="tool_use"&&pe.push({toolCallType:"function",toolCallId:ce.id,toolName:ce.name,args:JSON.stringify(ce.input)})}return{text:ne,toolCalls:pe,finishReason:_b(D.stop_reason),usage:{promptTokens:D.usage.input_tokens,completionTokens:D.usage.output_tokens},rawCall:{rawPrompt:U,rawSettings:H},rawResponse:{headers:T},response:{id:(t=D.id)!=null?t:void 0,modelId:(r=D.model)!=null?r:void 0},warnings:m,providerMetadata:{anthropic:{cacheCreationInputTokens:(n=D.usage.cache_creation_input_tokens)!=null?n:null,cacheReadInputTokens:(o=D.usage.cache_read_input_tokens)!=null?o:null}},request:{body:JSON.stringify(u)}}}async doStream(e){let{args:t,warnings:r,betas:n}=await this.getArgs(e),o={...t,stream:!0},{responseHeaders:u,value:m}=await Uf({url:this.buildRequestUrl(!0),headers:await this.getHeaders({betas:n,headers:e.headers}),body:this.transformRequestBody(o),failedResponseHandler:hb,successfulResponseHandler:m_(KC),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:y,...T}=t,D="unknown",U={promptTokens:Number.NaN,completionTokens:Number.NaN},H={},ne,pe=this;return{stream:m.pipeThrough(new TransformStream({transform(ce,ee){var Q,ve,Pe,We;if(!ce.success){ee.enqueue({type:"error",error:ce.error});return}let Ae=ce.value;switch(Ae.type){case"ping":return;case"content_block_start":{let Ze=Ae.content_block.type;switch(Ze){case"text":return;case"tool_use":{H[Ae.index]={toolCallId:Ae.content_block.id,toolName:Ae.content_block.name,jsonText:""};return}default:{let Tt=Ze;throw new Error(`Unsupported content block type: ${Tt}`)}}}case"content_block_stop":{if(H[Ae.index]!=null){let Ze=H[Ae.index];ee.enqueue({type:"tool-call",toolCallType:"function",toolCallId:Ze.toolCallId,toolName:Ze.toolName,args:Ze.jsonText}),delete H[Ae.index]}return}case"content_block_delta":{let Ze=Ae.delta.type;switch(Ze){case"text_delta":{ee.enqueue({type:"text-delta",textDelta:Ae.delta.text});return}case"input_json_delta":{let Tt=H[Ae.index];ee.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Tt.toolCallId,toolName:Tt.toolName,argsTextDelta:Ae.delta.partial_json}),Tt.jsonText+=Ae.delta.partial_json;return}default:{let Tt=Ze;throw new Error(`Unsupported delta type: ${Tt}`)}}}case"message_start":{U.promptTokens=Ae.message.usage.input_tokens,U.completionTokens=Ae.message.usage.output_tokens,ne={anthropic:{cacheCreationInputTokens:(Q=Ae.message.usage.cache_creation_input_tokens)!=null?Q:null,cacheReadInputTokens:(ve=Ae.message.usage.cache_read_input_tokens)!=null?ve:null}},ee.enqueue({type:"response-metadata",id:(Pe=Ae.message.id)!=null?Pe:void 0,modelId:(We=Ae.message.model)!=null?We:void 0});return}case"message_delta":{U.completionTokens=Ae.usage.output_tokens,D=_b(Ae.delta.stop_reason);return}case"message_stop":{ee.enqueue({type:"finish",finishReason:D,usage:U,providerMetadata:ne});return}case"error":{ee.enqueue({type:"error",error:Ae.error});return}default:{let Ze=Ae;throw new Error(`Unsupported chunk type: ${Ze}`)}}}})),rawCall:{rawPrompt:y,rawSettings:T},rawResponse:{headers:u},warnings:r,request:{body:JSON.stringify(o)}}}},VC=M.object({type:M.literal("message"),id:M.string().nullish(),model:M.string().nullish(),content:M.array(M.discriminatedUnion("type",[M.object({type:M.literal("text"),text:M.string()}),M.object({type:M.literal("tool_use"),id:M.string(),name:M.string(),input:M.unknown()})])),stop_reason:M.string().nullish(),usage:M.object({input_tokens:M.number(),output_tokens:M.number(),cache_creation_input_tokens:M.number().nullish(),cache_read_input_tokens:M.number().nullish()})}),KC=M.discriminatedUnion("type",[M.object({type:M.literal("message_start"),message:M.object({id:M.string().nullish(),model:M.string().nullish(),usage:M.object({input_tokens:M.number(),output_tokens:M.number(),cache_creation_input_tokens:M.number().nullish(),cache_read_input_tokens:M.number().nullish()})})}),M.object({type:M.literal("content_block_start"),index:M.number(),content_block:M.discriminatedUnion("type",[M.object({type:M.literal("text"),text:M.string()}),M.object({type:M.literal("tool_use"),id:M.string(),name:M.string()})])}),M.object({type:M.literal("content_block_delta"),index:M.number(),delta:M.discriminatedUnion("type",[M.object({type:M.literal("input_json_delta"),partial_json:M.string()}),M.object({type:M.literal("text_delta"),text:M.string()})])}),M.object({type:M.literal("content_block_stop"),index:M.number()}),M.object({type:M.literal("error"),error:M.object({type:M.string(),message:M.string()})}),M.object({type:M.literal("message_delta"),delta:M.object({stop_reason:M.string().nullish()}),usage:M.object({output_tokens:M.number()})}),M.object({type:M.literal("message_stop")}),M.object({type:M.literal("ping")})]),WC=M.object({command:M.string(),restart:M.boolean().optional()});function JC(e={}){return{type:"provider-defined",id:"anthropic.bash_20241022",args:{},parameters:WC,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}}var ZC=M.object({command:M.enum(["view","create","str_replace","insert","undo_edit"]),path:M.string(),file_text:M.string().optional(),insert_line:M.number().int().optional(),new_str:M.string().optional(),old_str:M.string().optional(),view_range:M.array(M.number().int()).optional()});function XC(e={}){return{type:"provider-defined",id:"anthropic.text_editor_20241022",args:{},parameters:ZC,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}}var QC=M.object({action:M.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:M.array(M.number().int()).optional(),text:M.string().optional()});function ex(e){return{type:"provider-defined",id:"anthropic.computer_20241022",args:{displayWidthPx:e.displayWidthPx,displayHeightPx:e.displayHeightPx,displayNumber:e.displayNumber},parameters:QC,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}}var tx={bash_20241022:JC,textEditor_20241022:XC,computer_20241022:ex};function p0(e={}){var t;let r=(t=Zg(e.baseURL))!=null?t:"https://api.anthropic.com/v1",n=()=>({"anthropic-version":"2023-06-01","x-api-key":Kg({apiKey:e.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...e.headers}),o=(m,y={})=>new GC(m,y,{provider:"anthropic.messages",baseURL:r,headers:n,fetch:e.fetch}),u=function(m,y){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return o(m,y)};return u.languageModel=o,u.chat=o,u.messages=o,u.textEmbeddingModel=m=>{throw new a0({modelId:m,modelType:"textEmbeddingModel"})},u.tools=tx,u}var F1=p0();function rx({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:r="system"}){let n=[];for(let{role:o,content:u}of e)switch(o){case"system":{switch(r){case"system":{n.push({role:"system",content:u});break}case"developer":{n.push({role:"developer",content:u});break}case"remove":break;default:{let m=r;throw new Error(`Unsupported system message mode: ${m}`)}}break}case"user":{if(u.length===1&&u[0].type==="text"){n.push({role:"user",content:u[0].text});break}n.push({role:"user",content:u.map(m=>{var y,T,D;switch(m.type){case"text":return{type:"text",text:m.text};case"image":return{type:"image_url",image_url:{url:m.image instanceof URL?m.image.toString():`data:${(y=m.mimeType)!=null?y:"image/jpeg"};base64,${xh(m.image)}`,detail:(D=(T=m.providerMetadata)==null?void 0:T.openai)==null?void 0:D.imageDetail}};case"file":{if(m.data instanceof URL)throw new qn({functionality:"'File content parts with URL data' functionality not supported."});switch(m.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:m.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:m.data,format:"mp3"}};default:throw new qn({functionality:`File content part type ${m.mimeType} in user messages`})}}}})});break}case"assistant":{let m="",y=[];for(let T of u)switch(T.type){case"text":{m+=T.text;break}case"tool-call":{y.push({id:T.toolCallId,type:"function",function:{name:T.toolName,arguments:JSON.stringify(T.args)}});break}default:{let D=T;throw new Error(`Unsupported part: ${D}`)}}if(t){if(y.length>1)throw new qn({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});n.push({role:"assistant",content:m,function_call:y.length>0?y[0].function:void 0})}else n.push({role:"assistant",content:m,tool_calls:y.length>0?y:void 0});break}case"tool":{for(let m of u)t?n.push({role:"function",name:m.toolName,content:JSON.stringify(m.result)}):n.push({role:"tool",tool_call_id:m.toolCallId,content:JSON.stringify(m.result)});break}default:{let m=o;throw new Error(`Unsupported role: ${m}`)}}return n}function gb(e){var t,r;return(r=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:n,logprob:o,top_logprobs:u})=>({token:n,logprob:o,topLogprobs:u?u.map(({token:m,logprob:y})=>({token:m,logprob:y})):[]})))!=null?r:void 0}function ay(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var v0=M.object({error:M.object({message:M.string(),type:M.string().nullish(),param:M.any().nullish(),code:M.union([M.string(),M.number()]).nullish()})}),T_=Jg({errorSchema:v0,errorToMessage:e=>e.error.message});function iy({id:e,model:t,created:r}){return{id:e??void 0,modelId:t??void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function nx({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:r}){var n;let o=(n=e.tools)!=null&&n.length?e.tools:void 0,u=[];if(o==null)return{tools:void 0,tool_choice:void 0,toolWarnings:u};let m=e.toolChoice;if(t){let D=[];for(let H of o)H.type==="provider-defined"?u.push({type:"unsupported-tool",tool:H}):D.push({name:H.name,description:H.description,parameters:H.parameters});if(m==null)return{functions:D,function_call:void 0,toolWarnings:u};switch(m.type){case"auto":case"none":case void 0:return{functions:D,function_call:void 0,toolWarnings:u};case"required":throw new qn({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:D,function_call:{name:m.toolName},toolWarnings:u}}}let y=[];for(let D of o)D.type==="provider-defined"?u.push({type:"unsupported-tool",tool:D}):y.push({type:"function",function:{name:D.name,description:D.description,parameters:D.parameters,strict:r?!0:void 0}});if(m==null)return{tools:y,tool_choice:void 0,toolWarnings:u};let T=m.type;switch(T){case"auto":case"none":case"required":return{tools:y,tool_choice:T,toolWarnings:u};case"tool":return{tools:y,tool_choice:{type:"function",function:{name:m.toolName}},toolWarnings:u};default:{let D=T;throw new qn({functionality:`Unsupported tool choice type: ${D}`})}}}var ax=class{constructor(e,t,r){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=r}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:oy(this.modelId)}get defaultObjectGenerationMode(){return sx(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:r,temperature:n,topP:o,topK:u,frequencyPenalty:m,presencePenalty:y,stopSequences:T,responseFormat:D,seed:U,providerMetadata:H}){var ne,pe,ce,ee,Q,ve,Pe,We;let Ae=e.type,Ze=[];u!=null&&Ze.push({type:"unsupported-setting",setting:"topK"}),(D==null?void 0:D.type)==="json"&&D.schema!=null&&!this.supportsStructuredOutputs&&Ze.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let Tt=this.settings.useLegacyFunctionCalling;if(Tt&&this.settings.parallelToolCalls===!0)throw new qn({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(Tt&&this.supportsStructuredOutputs)throw new qn({functionality:"structuredOutputs with useLegacyFunctionCalling"});yb(this.modelId)==="remove"&&t.some(Lt=>Lt.role==="system")&&Ze.push({type:"other",message:"system messages are removed for this model"});let Dt={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:r,temperature:n,top_p:o,frequency_penalty:m,presence_penalty:y,response_format:(D==null?void 0:D.type)==="json"?this.supportsStructuredOutputs&&D.schema!=null?{type:"json_schema",json_schema:{schema:D.schema,strict:!0,name:(ne=D.name)!=null?ne:"response",description:D.description}}:{type:"json_object"}:void 0,stop:T,seed:U,max_completion_tokens:(pe=H==null?void 0:H.openai)==null?void 0:pe.maxCompletionTokens,store:(ce=H==null?void 0:H.openai)==null?void 0:ce.store,metadata:(ee=H==null?void 0:H.openai)==null?void 0:ee.metadata,prediction:(Q=H==null?void 0:H.openai)==null?void 0:Q.prediction,reasoning_effort:(Pe=(ve=H==null?void 0:H.openai)==null?void 0:ve.reasoningEffort)!=null?Pe:this.settings.reasoningEffort,messages:rx({prompt:t,useLegacyFunctionCalling:Tt,systemMessageMode:yb(this.modelId)})};switch(oy(this.modelId)&&(Dt.temperature!=null&&(Dt.temperature=void 0,Ze.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),Dt.top_p!=null&&(Dt.top_p=void 0,Ze.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),Dt.frequency_penalty!=null&&(Dt.frequency_penalty=void 0,Ze.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),Dt.presence_penalty!=null&&(Dt.presence_penalty=void 0,Ze.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),Dt.logit_bias!=null&&(Dt.logit_bias=void 0,Ze.push({type:"other",message:"logitBias is not supported for reasoning models"})),Dt.logprobs!=null&&(Dt.logprobs=void 0,Ze.push({type:"other",message:"logprobs is not supported for reasoning models"})),Dt.top_logprobs!=null&&(Dt.top_logprobs=void 0,Ze.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),Dt.max_tokens!=null&&(Dt.max_completion_tokens==null&&(Dt.max_completion_tokens=Dt.max_tokens),Dt.max_tokens=void 0)),Ae){case"regular":{let{tools:Lt,tool_choice:it,functions:Ht,function_call:xr,toolWarnings:oa}=nx({mode:e,useLegacyFunctionCalling:Tt,structuredOutputs:this.supportsStructuredOutputs});return{args:{...Dt,tools:Lt,tool_choice:it,functions:Ht,function_call:xr},warnings:[...Ze,...oa]}}case"object-json":return{args:{...Dt,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(We=e.name)!=null?We:"response",description:e.description}}:{type:"json_object"}},warnings:Ze};case"object-tool":return{args:Tt?{...Dt,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...Dt,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:Ze};default:{let Lt=Ae;throw new Error(`Unsupported type: ${Lt}`)}}}async doGenerate(e){var t,r,n,o,u,m,y,T;let{args:D,warnings:U}=this.getArgs(e),{responseHeaders:H,value:ne}=await Uf({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ud(this.config.headers(),e.headers),body:D,failedResponseHandler:T_,successfulResponseHandler:Rv(ix),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:pe,...ce}=D,ee=ne.choices[0],Q=(t=ne.usage)==null?void 0:t.completion_tokens_details,ve=(r=ne.usage)==null?void 0:r.prompt_tokens_details,Pe={openai:{}};return(Q==null?void 0:Q.reasoning_tokens)!=null&&(Pe.openai.reasoningTokens=Q==null?void 0:Q.reasoning_tokens),(Q==null?void 0:Q.accepted_prediction_tokens)!=null&&(Pe.openai.acceptedPredictionTokens=Q==null?void 0:Q.accepted_prediction_tokens),(Q==null?void 0:Q.rejected_prediction_tokens)!=null&&(Pe.openai.rejectedPredictionTokens=Q==null?void 0:Q.rejected_prediction_tokens),(ve==null?void 0:ve.cached_tokens)!=null&&(Pe.openai.cachedPromptTokens=ve==null?void 0:ve.cached_tokens),{text:(n=ee.message.content)!=null?n:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&ee.message.function_call?[{toolCallType:"function",toolCallId:Sm(),toolName:ee.message.function_call.name,args:ee.message.function_call.arguments}]:(o=ee.message.tool_calls)==null?void 0:o.map(We=>{var Ae;return{toolCallType:"function",toolCallId:(Ae=We.id)!=null?Ae:Sm(),toolName:We.function.name,args:We.function.arguments}}),finishReason:ay(ee.finish_reason),usage:{promptTokens:(m=(u=ne.usage)==null?void 0:u.prompt_tokens)!=null?m:NaN,completionTokens:(T=(y=ne.usage)==null?void 0:y.completion_tokens)!=null?T:NaN},rawCall:{rawPrompt:pe,rawSettings:ce},rawResponse:{headers:H},request:{body:JSON.stringify(D)},response:iy(ne),warnings:U,logprobs:gb(ee.logprobs),providerMetadata:Pe}}async doStream(e){var t;if((t=this.settings.simulateStreaming)!=null?t:ux(this.modelId)){let Q=await this.doGenerate(e);return{stream:new ReadableStream({start(Pe){if(Pe.enqueue({type:"response-metadata",...Q.response}),Q.text&&Pe.enqueue({type:"text-delta",textDelta:Q.text}),Q.toolCalls)for(let We of Q.toolCalls)Pe.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:We.toolCallId,toolName:We.toolName,argsTextDelta:We.args}),Pe.enqueue({type:"tool-call",...We});Pe.enqueue({type:"finish",finishReason:Q.finishReason,usage:Q.usage,logprobs:Q.logprobs,providerMetadata:Q.providerMetadata}),Pe.close()}}),rawCall:Q.rawCall,rawResponse:Q.rawResponse,warnings:Q.warnings}}let{args:r,warnings:n}=this.getArgs(e),o={...r,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:u,value:m}=await Uf({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ud(this.config.headers(),e.headers),body:o,failedResponseHandler:T_,successfulResponseHandler:m_(ox),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:y,...T}=r,D=[],U="unknown",H={promptTokens:void 0,completionTokens:void 0},ne,pe=!0,{useLegacyFunctionCalling:ce}=this.settings,ee={openai:{}};return{stream:m.pipeThrough(new TransformStream({transform(Q,ve){var Pe,We,Ae,Ze,Tt,Dt,Lt,it,Ht,xr,oa,ei;if(!Q.success){U="error",ve.enqueue({type:"error",error:Q.error});return}let Pr=Q.value;if("error"in Pr){U="error",ve.enqueue({type:"error",error:Pr.error});return}if(pe&&(pe=!1,ve.enqueue({type:"response-metadata",...iy(Pr)})),Pr.usage!=null){let{prompt_tokens:Tr,completion_tokens:Bn,prompt_tokens_details:kt,completion_tokens_details:Ft}=Pr.usage;H={promptTokens:Tr??void 0,completionTokens:Bn??void 0},(Ft==null?void 0:Ft.reasoning_tokens)!=null&&(ee.openai.reasoningTokens=Ft==null?void 0:Ft.reasoning_tokens),(Ft==null?void 0:Ft.accepted_prediction_tokens)!=null&&(ee.openai.acceptedPredictionTokens=Ft==null?void 0:Ft.accepted_prediction_tokens),(Ft==null?void 0:Ft.rejected_prediction_tokens)!=null&&(ee.openai.rejectedPredictionTokens=Ft==null?void 0:Ft.rejected_prediction_tokens),(kt==null?void 0:kt.cached_tokens)!=null&&(ee.openai.cachedPromptTokens=kt==null?void 0:kt.cached_tokens)}let xn=Pr.choices[0];if((xn==null?void 0:xn.finish_reason)!=null&&(U=ay(xn.finish_reason)),(xn==null?void 0:xn.delta)==null)return;let nt=xn.delta;nt.content!=null&&ve.enqueue({type:"text-delta",textDelta:nt.content});let ho=gb(xn==null?void 0:xn.logprobs);ho!=null&&ho.length&&(ne===void 0&&(ne=[]),ne.push(...ho));let Ve=ce&&nt.function_call!=null?[{type:"function",id:Sm(),function:nt.function_call,index:0}]:nt.tool_calls;if(Ve!=null)for(let Tr of Ve){let Bn=Tr.index;if(D[Bn]==null){if(Tr.type!=="function")throw new G_({data:Tr,message:"Expected 'function' type."});if(Tr.id==null)throw new G_({data:Tr,message:"Expected 'id' to be a string."});if(((Pe=Tr.function)==null?void 0:Pe.name)==null)throw new G_({data:Tr,message:"Expected 'function.name' to be a string."});D[Bn]={id:Tr.id,type:"function",function:{name:Tr.function.name,arguments:(We=Tr.function.arguments)!=null?We:""},hasFinished:!1};let Ft=D[Bn];((Ae=Ft.function)==null?void 0:Ae.name)!=null&&((Ze=Ft.function)==null?void 0:Ze.arguments)!=null&&(Ft.function.arguments.length>0&&ve.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Ft.id,toolName:Ft.function.name,argsTextDelta:Ft.function.arguments}),s0(Ft.function.arguments)&&(ve.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Tt=Ft.id)!=null?Tt:Sm(),toolName:Ft.function.name,args:Ft.function.arguments}),Ft.hasFinished=!0));continue}let kt=D[Bn];kt.hasFinished||(((Dt=Tr.function)==null?void 0:Dt.arguments)!=null&&(kt.function.arguments+=(it=(Lt=Tr.function)==null?void 0:Lt.arguments)!=null?it:""),ve.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:kt.id,toolName:kt.function.name,argsTextDelta:(Ht=Tr.function.arguments)!=null?Ht:""}),((xr=kt.function)==null?void 0:xr.name)!=null&&((oa=kt.function)==null?void 0:oa.arguments)!=null&&s0(kt.function.arguments)&&(ve.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(ei=kt.id)!=null?ei:Sm(),toolName:kt.function.name,args:kt.function.arguments}),kt.hasFinished=!0))}},flush(Q){var ve,Pe;Q.enqueue({type:"finish",finishReason:U,logprobs:ne,usage:{promptTokens:(ve=H.promptTokens)!=null?ve:NaN,completionTokens:(Pe=H.completionTokens)!=null?Pe:NaN},...ee!=null?{providerMetadata:ee}:{}})}})),rawCall:{rawPrompt:y,rawSettings:T},rawResponse:{headers:u},request:{body:JSON.stringify(o)},warnings:n}}},wb=M.object({prompt_tokens:M.number().nullish(),completion_tokens:M.number().nullish(),prompt_tokens_details:M.object({cached_tokens:M.number().nullish()}).nullish(),completion_tokens_details:M.object({reasoning_tokens:M.number().nullish(),accepted_prediction_tokens:M.number().nullish(),rejected_prediction_tokens:M.number().nullish()}).nullish()}).nullish(),ix=M.object({id:M.string().nullish(),created:M.number().nullish(),model:M.string().nullish(),choices:M.array(M.object({message:M.object({role:M.literal("assistant").nullish(),content:M.string().nullish(),function_call:M.object({arguments:M.string(),name:M.string()}).nullish(),tool_calls:M.array(M.object({id:M.string().nullish(),type:M.literal("function"),function:M.object({name:M.string(),arguments:M.string()})})).nullish()}),index:M.number(),logprobs:M.object({content:M.array(M.object({token:M.string(),logprob:M.number(),top_logprobs:M.array(M.object({token:M.string(),logprob:M.number()}))})).nullable()}).nullish(),finish_reason:M.string().nullish()})),usage:wb}),ox=M.union([M.object({id:M.string().nullish(),created:M.number().nullish(),model:M.string().nullish(),choices:M.array(M.object({delta:M.object({role:M.enum(["assistant"]).nullish(),content:M.string().nullish(),function_call:M.object({name:M.string().optional(),arguments:M.string().optional()}).nullish(),tool_calls:M.array(M.object({index:M.number(),id:M.string().nullish(),type:M.literal("function").optional(),function:M.object({name:M.string().nullish(),arguments:M.string().nullish()})})).nullish()}).nullish(),logprobs:M.object({content:M.array(M.object({token:M.string(),logprob:M.number(),top_logprobs:M.array(M.object({token:M.string(),logprob:M.number()}))})).nullable()}).nullish(),finish_reason:M.string().nullable().optional(),index:M.number()})),usage:wb}),v0]);function oy(e){return e==="o1"||e.startsWith("o1-")||e==="o3"||e.startsWith("o3-")}function sx(e){return e.startsWith("gpt-4o-audio-preview")}function yb(e){var t,r;return oy(e)?(r=(t=bb[e])==null?void 0:t.systemMessageMode)!=null?r:"developer":"system"}function ux(e){var t,r;return oy(e)?(r=(t=bb[e])==null?void 0:t.simulateStreamingByDefault)!=null?r:!0:!1}var bb={"o1-mini":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o1-mini-2024-09-12":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o1-preview":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o1-preview-2024-09-12":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o3-mini":{systemMessageMode:"developer",simulateStreamingByDefault:!1},"o3-mini-2025-01-31":{systemMessageMode:"developer",simulateStreamingByDefault:!1}};function cx({prompt:e,inputFormat:t,user:r="user",assistant:n="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let o="";e[0].role==="system"&&(o+=`${e[0].content}

`,e=e.slice(1));for(let{role:u,content:m}of e)switch(u){case"system":throw new Pv({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{let y=m.map(T=>{switch(T.type){case"text":return T.text;case"image":throw new qn({functionality:"images"})}}).join("");o+=`${r}:
${y}

`;break}case"assistant":{let y=m.map(T=>{switch(T.type){case"text":return T.text;case"tool-call":throw new qn({functionality:"tool-call messages"})}}).join("");o+=`${n}:
${y}

`;break}case"tool":throw new qn({functionality:"tool messages"});default:{let y=u;throw new Error(`Unsupported role: ${y}`)}}return o+=`${n}:
`,{prompt:o,stopSequences:[`
${r}:`]}}function Sb(e){return e==null?void 0:e.tokens.map((t,r)=>({token:t,logprob:e.token_logprobs[r],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[r]).map(([n,o])=>({token:n,logprob:o})):[]}))}var lx=class{constructor(e,t,r){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:r,maxTokens:n,temperature:o,topP:u,topK:m,frequencyPenalty:y,presencePenalty:T,stopSequences:D,responseFormat:U,seed:H}){var ne;let pe=e.type,ce=[];m!=null&&ce.push({type:"unsupported-setting",setting:"topK"}),U!=null&&U.type!=="text"&&ce.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:ee,stopSequences:Q}=cx({prompt:r,inputFormat:t}),ve=[...Q??[],...D??[]],Pe={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:n,temperature:o,top_p:u,frequency_penalty:y,presence_penalty:T,seed:H,prompt:ee,stop:ve.length>0?ve:void 0};switch(pe){case"regular":{if((ne=e.tools)!=null&&ne.length)throw new qn({functionality:"tools"});if(e.toolChoice)throw new qn({functionality:"toolChoice"});return{args:Pe,warnings:ce}}case"object-json":throw new qn({functionality:"object-json mode"});case"object-tool":throw new qn({functionality:"object-tool mode"});default:{let We=pe;throw new Error(`Unsupported type: ${We}`)}}}async doGenerate(e){let{args:t,warnings:r}=this.getArgs(e),{responseHeaders:n,value:o}=await Uf({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ud(this.config.headers(),e.headers),body:t,failedResponseHandler:T_,successfulResponseHandler:Rv(fx),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:u,...m}=t,y=o.choices[0];return{text:y.text,usage:{promptTokens:o.usage.prompt_tokens,completionTokens:o.usage.completion_tokens},finishReason:ay(y.finish_reason),logprobs:Sb(y.logprobs),rawCall:{rawPrompt:u,rawSettings:m},rawResponse:{headers:n},response:iy(o),warnings:r,request:{body:JSON.stringify(t)}}}async doStream(e){let{args:t,warnings:r}=this.getArgs(e),n={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:o,value:u}=await Uf({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ud(this.config.headers(),e.headers),body:n,failedResponseHandler:T_,successfulResponseHandler:m_(dx),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:m,...y}=t,T="unknown",D={promptTokens:Number.NaN,completionTokens:Number.NaN},U,H=!0;return{stream:u.pipeThrough(new TransformStream({transform(ne,pe){if(!ne.success){T="error",pe.enqueue({type:"error",error:ne.error});return}let ce=ne.value;if("error"in ce){T="error",pe.enqueue({type:"error",error:ce.error});return}H&&(H=!1,pe.enqueue({type:"response-metadata",...iy(ce)})),ce.usage!=null&&(D={promptTokens:ce.usage.prompt_tokens,completionTokens:ce.usage.completion_tokens});let ee=ce.choices[0];(ee==null?void 0:ee.finish_reason)!=null&&(T=ay(ee.finish_reason)),(ee==null?void 0:ee.text)!=null&&pe.enqueue({type:"text-delta",textDelta:ee.text});let Q=Sb(ee==null?void 0:ee.logprobs);Q!=null&&Q.length&&(U===void 0&&(U=[]),U.push(...Q))},flush(ne){ne.enqueue({type:"finish",finishReason:T,logprobs:U,usage:D})}})),rawCall:{rawPrompt:m,rawSettings:y},rawResponse:{headers:o},warnings:r,request:{body:JSON.stringify(n)}}}},fx=M.object({id:M.string().nullish(),created:M.number().nullish(),model:M.string().nullish(),choices:M.array(M.object({text:M.string(),finish_reason:M.string(),logprobs:M.object({tokens:M.array(M.string()),token_logprobs:M.array(M.number()),top_logprobs:M.array(M.record(M.string(),M.number())).nullable()}).nullish()})),usage:M.object({prompt_tokens:M.number(),completion_tokens:M.number()})}),dx=M.union([M.object({id:M.string().nullish(),created:M.number().nullish(),model:M.string().nullish(),choices:M.array(M.object({text:M.string(),finish_reason:M.string().nullish(),index:M.number(),logprobs:M.object({tokens:M.array(M.string()),token_logprobs:M.array(M.number()),top_logprobs:M.array(M.record(M.string(),M.number())).nullable()}).nullish()})),usage:M.object({prompt_tokens:M.number(),completion_tokens:M.number()}).nullish()}),v0]),px=class{constructor(e,t,r){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:r}){if(e.length>this.maxEmbeddingsPerCall)throw new jw({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let{responseHeaders:n,value:o}=await Uf({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Ud(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:T_,successfulResponseHandler:Rv(vx),abortSignal:r,fetch:this.config.fetch});return{embeddings:o.data.map(u=>u.embedding),usage:o.usage?{tokens:o.usage.prompt_tokens}:void 0,rawResponse:{headers:n}}}},vx=M.object({data:M.array(M.object({embedding:M.array(M.number())})),usage:M.object({prompt_tokens:M.number()}).nullish()}),mx={"dall-e-3":1,"dall-e-2":10},hx=class{constructor(e,t,r){this.modelId=e,this.settings=t,this.config=r,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:mx[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:r,aspectRatio:n,seed:o,providerOptions:u,headers:m,abortSignal:y}){var T,D,U,H;let ne=[];n!=null&&ne.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),o!=null&&ne.push({type:"unsupported-setting",setting:"seed"});let pe=(U=(D=(T=this.config._internal)==null?void 0:T.currentDate)==null?void 0:D.call(T))!=null?U:new Date,{value:ce,responseHeaders:ee}=await Uf({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Ud(this.config.headers(),m),body:{model:this.modelId,prompt:e,n:t,size:r,...(H=u.openai)!=null?H:{},response_format:"b64_json"},failedResponseHandler:T_,successfulResponseHandler:Rv(_x),abortSignal:y,fetch:this.config.fetch});return{images:ce.data.map(Q=>Q.b64_json),warnings:ne,response:{timestamp:pe,modelId:this.modelId,headers:ee}}}},_x=M.object({data:M.array(M.object({b64_json:M.string()}))});function m0(e={}){var t,r,n;let o=(t=Zg(e.baseURL))!=null?t:"https://api.openai.com/v1",u=(r=e.compatibility)!=null?r:"compatible",m=(n=e.name)!=null?n:"openai",y=()=>({Authorization:`Bearer ${Kg({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),T=(ce,ee={})=>new ax(ce,ee,{provider:`${m}.chat`,url:({path:Q})=>`${o}${Q}`,headers:y,compatibility:u,fetch:e.fetch}),D=(ce,ee={})=>new lx(ce,ee,{provider:`${m}.completion`,url:({path:Q})=>`${o}${Q}`,headers:y,compatibility:u,fetch:e.fetch}),U=(ce,ee={})=>new px(ce,ee,{provider:`${m}.embedding`,url:({path:Q})=>`${o}${Q}`,headers:y,fetch:e.fetch}),H=(ce,ee={})=>new hx(ce,ee,{provider:`${m}.image`,url:({path:Q})=>`${o}${Q}`,headers:y,fetch:e.fetch}),ne=(ce,ee)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return ce==="gpt-3.5-turbo-instruct"?D(ce,ee):T(ce,ee)},pe=function(ce,ee){return ne(ce,ee)};return pe.languageModel=ne,pe.chat=T,pe.completion=D,pe.embedding=U,pe.textEmbedding=U,pe.textEmbeddingModel=U,pe.image=H,pe.imageModel=H,pe}var aM=m0({compatibility:"strict"});var $i=require("vscode"),gx=["rate limit exceeded","net::err","check your network connection","check your firewall","request failed","400 bad request","server error","error on conversation request","response contained no choices","response got filtered"];function yx({role:e,content:t}){switch(e){case"system":return $i.LanguageModelChatMessage.User(t);case"user":let r=t.map(u=>{switch(u.type){case"text":return new $i.LanguageModelTextPart(u.text);case"image":throw new Error("Image content not supported");case"file":throw new Error("File content not supported")}});return $i.LanguageModelChatMessage.User(r);case"tool":let n=t.map(u=>{switch(u.type){case"tool-result":let m=typeof u.result=="string"?u.result:JSON.stringify(u.result);return new $i.LanguageModelToolResultPart(u.toolCallId,[new $i.LanguageModelTextPart(m)])}});return $i.LanguageModelChatMessage.User(n);case"assistant":let o=t.map(u=>{switch(u.type){case"text":return new $i.LanguageModelTextPart(u.text);case"tool-call":return new $i.LanguageModelToolCallPart(u.toolCallId,u.toolName,u.args)}});return $i.LanguageModelChatMessage.Assistant(o)}}function Sx(e){switch(e.type){case"function":return{name:e.name,description:e.description,inputSchema:e.parameters};case"provider-defined":throw new Error("Provider-defined tools not supported")}}function wx(e){let t=String(e.message).toLowerCase();for(let r of gx)if(t.includes(r))return!0;return!1}var h0=class{specificationVersion="v1";defaultObjectGenerationMode="json";provider="copilot";supportsImageUrls=!1;constructor(t,r,n){this.modelId=t,this.settings=r,this.config=n}async doGenerate(t){throw new Error("Not implemented")}async doStream(t){var ne;let[r]=await $i.lm.selectChatModels({family:this.modelId,vendor:"copilot"});if(!r)throw new Error("Model not found: "+this.modelId);let{prompt:n,abortSignal:o,mode:u}=t,m=o.context;if(u.type!=="regular")throw new Error("Request mode not supported: "+u.type);let y=n.map(yx),T=(ne=u.tools)==null?void 0:ne.map(Sx),D=n.slice(-1)[0],U=!1;if(D.role=="tool")if(D.content[0].result=="stop")U=!0;else{let pe=new $i.LanguageModelTextPart("Should I process the last tool result now?"),ce=new $i.LanguageModelTextPart("Yes");y.push($i.LanguageModelChatMessage.Assistant([pe])),y.push($i.LanguageModelChatMessage.User([ce]))}return{stream:new ReadableStream({async start(pe){let ce=0;if(U){pe.enqueue({type:"text-delta",textDelta:`

`}),pe.close();return}for(;;){try{let ee=await r.sendRequest(y,{tools:T,modelOptions:{temperature:t.temperature,max_tokens:t.maxTokens}},m.token);for await(let Q of ee.stream){if(m.token.isCancellationRequested)break;Q instanceof $i.LanguageModelTextPart?pe.enqueue({type:"text-delta",textDelta:Q.value}):Q instanceof $i.LanguageModelToolCallPart?pe.enqueue({type:"tool-call",toolCallType:"function",toolCallId:Q.callId,toolName:Q.name,args:JSON.stringify(Q.input)}):pe.error(new Error("Unknown content format"))}pe.close();return}catch(ee){if(!wx(ee)||++ce>5){pe.error(ee);return}pe.enqueue({type:"error",error:{event:"retry",count:ce,message:ee.message||String(ee),cause:ee}}),String(ee.message).toLowerCase().includes("rate limit exceeded")&&await Eb(30)}await Eb(5*ce)}}}),rawCall:{rawPrompt:"",rawSettings:{}}}}};function Tb(e){let t=(n,o={})=>new h0(n,o,{provider:"copilot"}),r=function(n,o={}){return t(n,o)};return r.chat=t,r}async function Eb(e){return new Promise(t=>setTimeout(t,e*1e3))}var bx={anthropic:p0,openai:m0,copilot:Tb},Ib={};function _0({id:e,provider:t,apiKey:r}){let n=Ib[t];if(!n){let o=bx[t];if(!o)throw new Error("Unknown provider: "+t);n=o({apiKey:r}),Ib[t]=n}return n(e,{cacheControl:!0})}var Db=function(e,t,r,n){var o;t[0]=0;for(var u=1;u<t.length;u++){var m=t[u++],y=t[u]?(t[0]|=m?1:2,r[t[u++]]):t[++u];m===3?n[0]=y:m===4?n[1]=Object.assign(n[1]||{},y):m===5?(n[1]=n[1]||{})[t[++u]]=y:m===6?n[1][t[++u]]+=y+"":m?(o=e.apply(y,Db(e,y,r,["",null])),n.push(o),y[0]?t[0]|=2:(t[u-2]=0,t[u]=o)):n.push(y)}return n},Nb=new Map;function Cb(e){var t=Nb.get(this);return t||(t=new Map,Nb.set(this,t)),(t=Db(this,t.get(e)||(t.set(e,t=function(r){for(var n,o,u=1,m="",y="",T=[0],D=function(ne){u===1&&(ne||(m=m.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?T.push(0,ne,m):u===3&&(ne||m)?(T.push(3,ne,m),u=2):u===2&&m==="..."&&ne?T.push(4,ne,0):u===2&&m&&!ne?T.push(5,0,!0,m):u>=5&&((m||!ne&&u===5)&&(T.push(u,0,m,o),u=6),ne&&(T.push(u,ne,0,o),u=6)),m=""},U=0;U<r.length;U++){U&&(u===1&&D(),D(U));for(var H=0;H<r[U].length;H++)n=r[U][H],u===1?n==="<"?(D(),T=[T],u=3):m+=n:u===4?m==="--"&&n===">"?(u=1,m=""):m=n+m[0]:y?n===y?y="":m+=n:n==='"'||n==="'"?y=n:n===">"?(D(),u=1):u&&(n==="="?(u=5,o=m,m=""):n==="/"&&(u<5||r[U][H+1]===">")?(D(),u===3&&(T=T[0]),u=T,(T=T[0]).push(2,0,u),u=0):n===" "||n==="	"||n===`
`||n==="\r"?(D(),u=2):m+=n),u===3&&m==="!--"&&(u=4,T=T[0])}return D(),T}(e)),t),arguments,[])).length>1?t:t[0]}function g0(e){if(Array.isArray(e))return e.map(g0);if(typeof e!="string")return e;let t=e.split(`
`),r=100;if(t.forEach((n,o)=>{let u=n.match(/^(\s*)\S/);o&&u&&(r=Math.min(r,u[1].length))}),r<100)for(let n=1;n<t.length;n++)t[n]=t[n].slice(r);return t.join(`
`)}function Ex(e,t,...r){return{type:e,props:t,children:g0(r)}}var Tx=Cb.bind(Ex);function N_(...e){return g0(Tx(...e))}function I_(e,t=""){if(Array.isArray(e))return e.reduce((r,n)=>{let o=I_(n,t);return/^[\n]/.test(o)&&/[\n]$/.test(r)?r+o.slice(1):/^[\s\n]/.test(o)||/[\s\n]$/.test(r)?r+o:r&&o?r+" "+o:r||o||""},"");if((e==null?void 0:e.type)=="markdown"){let{props:r}=e;return r.text}if((e==null?void 0:e.type)=="code"){let{props:r}=e;return"\n```"+(r.type||"")+`
`+r.text+"\n```\n"}if(typeof(e==null?void 0:e.type)=="string"){let{type:r,children:n}=e;return I_([`
`+t+"<"+r+`>
`,I_(n,t+"  "),`
`+t+"</"+r+`>
`])}if(typeof(e==null?void 0:e.type)=="function"){let{type:r,props:n,children:o}=e;return I_(r(n,o),t)}return String(e??"").split(`
`).map(r=>t+r).join(`
`)}var y0=[{provider:"anthropic",family:"claude-3.5-sonnet",id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet",cacheControl:!0},{provider:"openai",family:"gpt-4o",id:"gpt-4o-2024-08-06",name:"GPT 4o"},{provider:"openrouter",family:"claude-3.5-sonnet",id:"anthropic/claude-3.5-sonnet:beta",name:"Claude 3.5 Sonnet",cacheControl:!0},{provider:"openrouter",family:"gpt-4o",id:"openai/gpt-4o-2024-08-06",name:"GPT 4o"}];var xb=[{id:"anthropic",name:"Anthropic",envKeyName:"ANTHROPIC_API_KEY",website:"https://console.anthropic.com"},{id:"openai",name:"OpenAI",envKeyName:"OPENAI_API_KEY",website:"https://platform.openai.com"},{id:"openrouter",name:"Open Router",envKeyName:"OPENROUTER_API_KEY",website:"https://openrouter.ai"}];var Ab=Symbol("Let zodToJsonSchema decide on which parser to use"),Pb={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Rb=e=>typeof e=="string"?{...Pb,name:e}:{...Pb,...e};var Ob=e=>{let t=Rb(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([n,o])=>[o._def,{def:o._def,path:[...t.basePath,t.definitionPath,n],jsonSchema:void 0}]))}};function S0(e,t,r,n){n!=null&&n.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function nn(e,t,r,n,o){e[t]=r,S0(e,t,n,o)}function kb(){return{}}function Mb(e,t){var n,o,u;let r={type:"array"};return(n=e.type)!=null&&n._def&&((u=(o=e.type)==null?void 0:o._def)==null?void 0:u.typeName)!==He.ZodAny&&(r.items=dr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&nn(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&nn(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(nn(r,"minItems",e.exactLength.value,e.exactLength.message,t),nn(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}function Lb(e,t){let r={type:"integer",format:"int64"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"min":t.target==="jsonSchema7"?n.inclusive?nn(r,"minimum",n.value,n.message,t):nn(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),nn(r,"minimum",n.value,n.message,t));break;case"max":t.target==="jsonSchema7"?n.inclusive?nn(r,"maximum",n.value,n.message,t):nn(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),nn(r,"maximum",n.value,n.message,t));break;case"multipleOf":nn(r,"multipleOf",n.value,n.message,t);break}return r}function Fb(){return{type:"boolean"}}function sy(e,t){return dr(e.type._def,t)}var Ub=(e,t)=>dr(e.innerType._def,t);function w0(e,t,r){let n=r??t.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((o,u)=>w0(e,t,o))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Ix(e,t)}}var Ix=(e,t)=>{let r={type:"integer",format:"unix-time"};if(t.target==="openApi3")return r;for(let n of e.checks)switch(n.kind){case"min":nn(r,"minimum",n.value,n.message,t);break;case"max":nn(r,"maximum",n.value,n.message,t);break}return r};function jb(e,t){return{...dr(e.innerType._def,t),default:e.defaultValue()}}function Yb(e,t){return t.effectStrategy==="input"?dr(e.schema._def,t):{}}function $b(e){return{type:"string",enum:Array.from(e.values)}}var Nx=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function qb(e,t){let r=[dr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),dr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(u=>!!u),n=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,o=[];return r.forEach(u=>{if(Nx(u))o.push(...u.allOf),u.unevaluatedProperties===void 0&&(n=void 0);else{let m=u;if("additionalProperties"in u&&u.additionalProperties===!1){let{additionalProperties:y,...T}=u;m=T}else n=void 0;o.push(m)}}),o.length?{allOf:o,...n}:void 0}function Bb(e,t){let r=typeof e.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[e.value]}:{type:r==="bigint"?"integer":r,const:e.value}}var b0,kp={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(b0===void 0&&(b0=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),b0),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function uy(e,t){let r={type:"string"};if(e.checks)for(let n of e.checks)switch(n.kind){case"min":nn(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,t);break;case"max":nn(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Mp(r,"email",n.message,t);break;case"format:idn-email":Mp(r,"idn-email",n.message,t);break;case"pattern:zod":Tc(r,kp.email,n.message,t);break}break;case"url":Mp(r,"uri",n.message,t);break;case"uuid":Mp(r,"uuid",n.message,t);break;case"regex":Tc(r,n.regex,n.message,t);break;case"cuid":Tc(r,kp.cuid,n.message,t);break;case"cuid2":Tc(r,kp.cuid2,n.message,t);break;case"startsWith":Tc(r,RegExp(`^${E0(n.value,t)}`),n.message,t);break;case"endsWith":Tc(r,RegExp(`${E0(n.value,t)}$`),n.message,t);break;case"datetime":Mp(r,"date-time",n.message,t);break;case"date":Mp(r,"date",n.message,t);break;case"time":Mp(r,"time",n.message,t);break;case"duration":Mp(r,"duration",n.message,t);break;case"length":nn(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,t),nn(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"includes":{Tc(r,RegExp(E0(n.value,t)),n.message,t);break}case"ip":{n.version!=="v6"&&Mp(r,"ipv4",n.message,t),n.version!=="v4"&&Mp(r,"ipv6",n.message,t);break}case"base64url":Tc(r,kp.base64url,n.message,t);break;case"jwt":Tc(r,kp.jwt,n.message,t);break;case"cidr":{n.version!=="v6"&&Tc(r,kp.ipv4Cidr,n.message,t),n.version!=="v4"&&Tc(r,kp.ipv6Cidr,n.message,t);break}case"emoji":Tc(r,kp.emoji(),n.message,t);break;case"ulid":{Tc(r,kp.ulid,n.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Mp(r,"binary",n.message,t);break}case"contentEncoding:base64":{nn(r,"contentEncoding","base64",n.message,t);break}case"pattern:zod":{Tc(r,kp.base64,n.message,t);break}}break}case"nanoid":Tc(r,kp.nanoid,n.message,t);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function E0(e,t){return t.patternStrategy==="escape"?Cx(e):e}var Dx=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Cx(e){let t="";for(let r=0;r<e.length;r++)Dx.has(e[r])||(t+="\\"),t+=e[r];return t}function Mp(e,t,r,n){var o;e.format||(o=e.anyOf)!=null&&o.some(u=>u.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&n.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):nn(e,"format",t,r,n)}function Tc(e,t,r,n){var o;e.pattern||(o=e.allOf)!=null&&o.some(u=>u.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&n.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:zb(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):nn(e,"pattern",zb(t,n),r,n)}function zb(e,t){var T;if(!t.applyRegexFlags||!e.flags)return e.source;let r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=r.i?e.source.toLowerCase():e.source,o="",u=!1,m=!1,y=!1;for(let D=0;D<n.length;D++){if(u){o+=n[D],u=!1;continue}if(r.i){if(m){if(n[D].match(/[a-z]/)){y?(o+=n[D],o+=`${n[D-2]}-${n[D]}`.toUpperCase(),y=!1):n[D+1]==="-"&&((T=n[D+2])!=null&&T.match(/[a-z]/))?(o+=n[D],y=!0):o+=`${n[D]}${n[D].toUpperCase()}`;continue}}else if(n[D].match(/[a-z]/)){o+=`[${n[D]}${n[D].toUpperCase()}]`;continue}}if(r.m){if(n[D]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(n[D]==="$"){o+=`($|(?=[\r
]))`;continue}}if(r.s&&n[D]==="."){o+=m?`${n[D]}\r
`:`[${n[D]}\r
]`;continue}o+=n[D],n[D]==="\\"?u=!0:m&&n[D]==="]"?m=!1:!m&&n[D]==="["&&(m=!0)}try{new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return o}function cy(e,t){var n,o,u,m,y,T;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((n=e.keyType)==null?void 0:n._def.typeName)===He.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((D,U)=>({...D,[U]:dr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",U]})??{}}),{}),additionalProperties:!1};let r={type:"object",additionalProperties:dr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??{}};if(t.target==="openApi3")return r;if(((o=e.keyType)==null?void 0:o._def.typeName)===He.ZodString&&((u=e.keyType._def.checks)!=null&&u.length)){let{type:D,...U}=uy(e.keyType._def,t);return{...r,propertyNames:U}}else{if(((m=e.keyType)==null?void 0:m._def.typeName)===He.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(((y=e.keyType)==null?void 0:y._def.typeName)===He.ZodBranded&&e.keyType._def.type._def.typeName===He.ZodString&&((T=e.keyType._def.type._def.checks)!=null&&T.length)){let{type:D,...U}=sy(e.keyType._def,t);return{...r,propertyNames:U}}}return r}function Hb(e,t){if(t.mapStrategy==="record")return cy(e,t);let r=dr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},n=dr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function Gb(e){let t=e.values,n=Object.keys(e.values).filter(u=>typeof t[t[u]]!="number").map(u=>t[u]),o=Array.from(new Set(n.map(u=>typeof u)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:n}}function Vb(){return{not:{}}}function Kb(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var eg={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Jb(e,t){if(t.target==="openApi3")return Wb(e,t);let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(n=>n._def.typeName in eg&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((o,u)=>{let m=eg[u._def.typeName];return m&&!o.includes(m)?[...o,m]:o},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((o,u)=>{let m=typeof u._def.value;switch(m){case"string":case"number":case"boolean":return[...o,m];case"bigint":return[...o,"integer"];case"object":if(u._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(n.length===r.length){let o=n.filter((u,m,y)=>y.indexOf(u)===m);return{type:o.length>1?o:o[0],enum:r.reduce((u,m)=>u.includes(m._def.value)?u:[...u,m._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,o)=>[...n,...o._def.values.filter(u=>!n.includes(u))],[])};return Wb(e,t)}var Wb=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((n,o)=>dr(n._def,{...t,currentPath:[...t.currentPath,"anyOf",`${o}`]})).filter(n=>!!n&&(!t.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function Zb(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:eg[e.innerType._def.typeName],nullable:!0}:{type:[eg[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){let n=dr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let r=dr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function Xb(e,t){let r={type:"number"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"int":r.type="integer",S0(r,"type",n.message,t);break;case"min":t.target==="jsonSchema7"?n.inclusive?nn(r,"minimum",n.value,n.message,t):nn(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),nn(r,"minimum",n.value,n.message,t));break;case"max":t.target==="jsonSchema7"?n.inclusive?nn(r,"maximum",n.value,n.message,t):nn(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),nn(r,"maximum",n.value,n.message,t));break;case"multipleOf":nn(r,"multipleOf",n.value,n.message,t);break}return r}function xx(e,t){return t.removeAdditionalStrategy==="strict"?e.catchall._def.typeName==="ZodNever"?e.unknownKeys!=="strict":dr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0:e.catchall._def.typeName==="ZodNever"?e.unknownKeys==="passthrough":dr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0}function Qb(e,t){let r=t.target==="openAi",n={type:"object",...Object.entries(e.shape()).reduce((o,[u,m])=>{if(m===void 0||m._def===void 0)return o;let y=m.isOptional();y&&r&&(m instanceof wl&&(m=m._def.innerType),m.isNullable()||(m=m.nullable()),y=!1);let T=dr(m._def,{...t,currentPath:[...t.currentPath,"properties",u],propertyPath:[...t.currentPath,"properties",u]});return T===void 0?o:{properties:{...o.properties,[u]:T},required:y?o.required:[...o.required,u]}},{properties:{},required:[]}),additionalProperties:xx(e,t)};return n.required.length||delete n.required,n}var eE=(e,t)=>{var n;if(t.currentPath.toString()===((n=t.propertyPath)==null?void 0:n.toString()))return dr(e.innerType._def,t);let r=dr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}};var tE=(e,t)=>{if(t.pipeStrategy==="input")return dr(e.in._def,t);if(t.pipeStrategy==="output")return dr(e.out._def,t);let r=dr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),n=dr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(o=>o!==void 0)}};function rE(e,t){return dr(e.type._def,t)}function nE(e,t){let n={type:"array",uniqueItems:!0,items:dr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&nn(n,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&nn(n,"maxItems",e.maxSize.value,e.maxSize.message,t),n}function aE(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,n)=>dr(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:dr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,n)=>dr(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function iE(){return{not:{}}}function oE(){return{}}var sE=(e,t)=>dr(e.innerType._def,t);function dr(e,t,r=!1){var m;let n=t.seen.get(e);if(t.override){let y=(m=t.override)==null?void 0:m.call(t,e,t,n,r);if(y!==Ab)return y}if(n&&!r){let y=Px(n,t);if(y!==void 0)return y}let o={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,o);let u=Rx(e,e.typeName,t);return u&&Ox(e,t,u),o.jsonSchema=u,u}var Px=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Ax(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,n)=>t.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},Ax=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},Rx=(e,t,r)=>{switch(t){case He.ZodString:return uy(e,r);case He.ZodNumber:return Xb(e,r);case He.ZodObject:return Qb(e,r);case He.ZodBigInt:return Lb(e,r);case He.ZodBoolean:return Fb();case He.ZodDate:return w0(e,r);case He.ZodUndefined:return iE();case He.ZodNull:return Kb(r);case He.ZodArray:return Mb(e,r);case He.ZodUnion:case He.ZodDiscriminatedUnion:return Jb(e,r);case He.ZodIntersection:return qb(e,r);case He.ZodTuple:return aE(e,r);case He.ZodRecord:return cy(e,r);case He.ZodLiteral:return Bb(e,r);case He.ZodEnum:return $b(e);case He.ZodNativeEnum:return Gb(e);case He.ZodNullable:return Zb(e,r);case He.ZodOptional:return eE(e,r);case He.ZodMap:return Hb(e,r);case He.ZodSet:return nE(e,r);case He.ZodLazy:return dr(e.getter()._def,r);case He.ZodPromise:return rE(e,r);case He.ZodNaN:case He.ZodNever:return Vb();case He.ZodEffects:return Yb(e,r);case He.ZodAny:return kb();case He.ZodUnknown:return oE();case He.ZodDefault:return jb(e,r);case He.ZodBranded:return sy(e,r);case He.ZodReadonly:return sE(e,r);case He.ZodCatch:return Ub(e,r);case He.ZodPipeline:return tE(e,r);case He.ZodFunction:case He.ZodVoid:case He.ZodSymbol:return;default:return(n=>{})(t)}},Ox=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r);var uE=(e,t)=>{let r=Ob(t),n=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((T,[D,U])=>({...T,[D]:dr(U._def,{...r,currentPath:[...r.basePath,r.definitionPath,D]},!0)??{}}),{}):void 0,o=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,u=dr(e._def,o===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,o]},!1)??{},m=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;m!==void 0&&(u.title=m);let y=o===void 0?n?{...u,[r.definitionPath]:n}:u:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,o].join("/"),[r.definitionPath]:{...n,[o]:u}};return r.target==="jsonSchema7"?y.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(y.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in y||"oneOf"in y||"allOf"in y||"type"in y&&Array.isArray(y.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),y};var cE=uE;var tg={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},rg={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},ng={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},ag={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},ig={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},kx=[tg,rg,ng,ag,ig],t2={[tg.code]:tg,[rg.code]:rg,[ng.code]:ng,[ag.code]:ag,[ig.code]:ig},r2={[tg.name]:tg.code,[rg.name]:rg.code,[ng.name]:ng.code,[ag.name]:ag.code,[ig.name]:ig.code},n2=kx.map(e=>e.code);function Mx(e){let t=["ROOT"],r=-1,n=null;function o(T,D,U){switch(T){case'"':{r=D,t.pop(),t.push(U),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=D,n=D,t.pop(),t.push(U),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(U),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=D,t.pop(),t.push(U),t.push("INSIDE_NUMBER");break}case"{":{r=D,t.pop(),t.push(U),t.push("INSIDE_OBJECT_START");break}case"[":{r=D,t.pop(),t.push(U),t.push("INSIDE_ARRAY_START");break}}}function u(T,D){switch(T){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=D,t.pop();break}}}function m(T,D){switch(T){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=D,t.pop();break}}}for(let T=0;T<e.length;T++){let D=e[T];switch(t[t.length-1]){case"ROOT":o(D,T,"FINISH");break;case"INSIDE_OBJECT_START":{switch(D){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{r=T,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(D){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(D){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(D){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{o(D,T,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{u(D,T);break}case"INSIDE_STRING":{switch(D){case'"':{t.pop(),r=T;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:r=T}break}case"INSIDE_ARRAY_START":{switch(D){case"]":{r=T,t.pop();break}default:{r=T,o(D,T,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(D){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=T,t.pop();break}default:{r=T;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{o(D,T,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),r=T;break}case"INSIDE_NUMBER":{switch(D){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=T;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&m(D,T),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&u(D,T);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&u(D,T);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&m(D,T);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{let H=e.substring(n,T+1);!"false".startsWith(H)&&!"true".startsWith(H)&&!"null".startsWith(H)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?u(D,T):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&m(D,T)):r=T;break}}}let y=e.slice(0,r+1);for(let T=t.length-1;T>=0;T--)switch(t[T]){case"INSIDE_STRING":{y+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{y+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{y+="]";break}case"INSIDE_LITERAL":{let U=e.substring(n,e.length);"true".startsWith(U)?y+="true".slice(U.length):"false".startsWith(U)?y+="false".slice(U.length):"null".startsWith(U)&&(y+="null".slice(U.length))}}return y}function lE(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=Av({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=Av({text:Mx(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var og={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},sg={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},ug={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},cg={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},lg={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},fg={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},dg={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},pg={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},vg={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},mg={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},hg={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},_g={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},fE=[og,sg,ug,cg,lg,fg,dg,pg,vg,mg,hg,_g],i2={[og.code]:og,[sg.code]:sg,[ug.code]:ug,[cg.code]:cg,[lg.code]:lg,[fg.code]:fg,[dg.code]:dg,[pg.code]:pg,[vg.code]:vg,[mg.code]:mg,[hg.code]:hg,[_g.code]:_g},o2={[og.name]:og.code,[sg.name]:sg.code,[ug.name]:ug.code,[cg.name]:cg.code,[lg.name]:lg.code,[fg.name]:fg.code,[dg.name]:dg.code,[pg.name]:pg.code,[vg.name]:vg.code,[mg.name]:mg.code,[hg.name]:hg.code,[_g.name]:_g.code},s2=fE.map(e=>e.code);function Ic(e,t){let r=fE.find(n=>n.name===e);if(!r)throw new Error(`Invalid stream part type: ${e}`);return`${r.code}:${JSON.stringify(t)}
`}function Lx(e){return Fx(cE(e,{$refStrategy:"none",target:"jsonSchema7"}),{validate:t=>{let r=e.safeParse(t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}var T0=Symbol.for("vercel.ai.schema");function Fx(e,{validate:t}={}){return{[T0]:!0,_type:void 0,[K_]:!0,jsonSchema:e,validate:t}}function Ux(e){return typeof e=="object"&&e!==null&&T0 in e&&e[T0]===!0&&"jsonSchema"in e&&"validate"in e}function Gh(e){return Ux(e)?e:Lx(e)}var dE=typeof globalThis=="object"?globalThis:global;var Im="1.9.0";var pE=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function jx(e){var t=new Set([e]),r=new Set,n=e.match(pE);if(!n)return function(){return!1};var o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(o.prerelease!=null)return function(T){return T===e};function u(y){return r.add(y),!1}function m(y){return t.add(y),!0}return function(T){if(t.has(T))return!0;if(r.has(T))return!1;var D=T.match(pE);if(!D)return u(T);var U={major:+D[1],minor:+D[2],patch:+D[3],prerelease:D[4]};return U.prerelease!=null||o.major!==U.major?u(T):o.major===0?o.minor===U.minor&&o.patch<=U.patch?m(T):u(T):o.minor<=U.minor?m(T):u(T)}}var vE=jx(Im);var Yx=Im.split(".")[0],gg=Symbol.for("opentelemetry.js.api."+Yx),yg=dE;function D_(e,t,r,n){var o;n===void 0&&(n=!1);var u=yg[gg]=(o=yg[gg])!==null&&o!==void 0?o:{version:Im};if(!n&&u[e]){var m=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(m.stack||m.message),!1}if(u.version!==Im){var m=new Error("@opentelemetry/api: Registration of version v"+u.version+" for "+e+" does not match previously registered API v"+Im);return r.error(m.stack||m.message),!1}return u[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+Im+"."),!0}function Nm(e){var t,r,n=(t=yg[gg])===null||t===void 0?void 0:t.version;if(!(!n||!vE(n)))return(r=yg[gg])===null||r===void 0?void 0:r[e]}function C_(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Im+".");var r=yg[gg];r&&delete r[e]}var $x=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,u=[],m;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)u.push(o.value)}catch(y){m={error:y}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(m)throw m.error}}return u},qx=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,u;n<o;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return e.concat(u||Array.prototype.slice.call(t))},mE=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Sg("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Sg("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Sg("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Sg("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Sg("verbose",this._namespace,t)},e}();function Sg(e,t,r){var n=Nm("diag");if(n)return r.unshift(t),n[e].apply(n,qx([],$x(r),!1))}var Nc;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Nc||(Nc={}));function hE(e,t){e<Nc.NONE?e=Nc.NONE:e>Nc.ALL&&(e=Nc.ALL),t=t||{};function r(n,o){var u=t[n];return typeof u=="function"&&e>=o?u.bind(t):function(){}}return{error:r("error",Nc.ERROR),warn:r("warn",Nc.WARN),info:r("info",Nc.INFO),debug:r("debug",Nc.DEBUG),verbose:r("verbose",Nc.VERBOSE)}}var Bx=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,u=[],m;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)u.push(o.value)}catch(y){m={error:y}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(m)throw m.error}}return u},zx=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,u;n<o;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return e.concat(u||Array.prototype.slice.call(t))},Hx="diag",x_=function(){function e(){function t(o){return function(){for(var u=[],m=0;m<arguments.length;m++)u[m]=arguments[m];var y=Nm("diag");if(y)return y[o].apply(y,zx([],Bx(u),!1))}}var r=this,n=function(o,u){var m,y,T;if(u===void 0&&(u={logLevel:Nc.INFO}),o===r){var D=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((m=D.stack)!==null&&m!==void 0?m:D.message),!1}typeof u=="number"&&(u={logLevel:u});var U=Nm("diag"),H=hE((y=u.logLevel)!==null&&y!==void 0?y:Nc.INFO,o);if(U&&!u.suppressOverrideMessage){var ne=(T=new Error().stack)!==null&&T!==void 0?T:"<failed to generate stacktrace>";U.warn("Current logger will be overwritten from "+ne),H.warn("Current logger will overwrite one already registered from "+ne)}return D_("diag",H,r,!0)};r.setLogger=n,r.disable=function(){C_(Hx,r)},r.createComponentLogger=function(o){return new mE(o)},r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function _E(e){return Symbol.for(e)}var Gx=function(){function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,o){var u=new e(r._currentContext);return u._currentContext.set(n,o),u},r.deleteValue=function(n){var o=new e(r._currentContext);return o._currentContext.delete(n),o}}return e}(),gE=new Gx;var Vx=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,u=[],m;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)u.push(o.value)}catch(y){m={error:y}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(m)throw m.error}}return u},Kx=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,u;n<o;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return e.concat(u||Array.prototype.slice.call(t))},yE=function(){function e(){}return e.prototype.active=function(){return gE},e.prototype.with=function(t,r,n){for(var o=[],u=3;u<arguments.length;u++)o[u-3]=arguments[u];return r.call.apply(r,Kx([n],Vx(o),!1))},e.prototype.bind=function(t,r){return r},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}();var Wx=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,u=[],m;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)u.push(o.value)}catch(y){m={error:y}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(m)throw m.error}}return u},Jx=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,u;n<o;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return e.concat(u||Array.prototype.slice.call(t))},I0="context",Zx=new yE,ly=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return D_(I0,t,x_.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,r,n){for(var o,u=[],m=3;m<arguments.length;m++)u[m-3]=arguments[m];return(o=this._getContextManager()).with.apply(o,Jx([t,r,n],Wx(u),!1))},e.prototype.bind=function(t,r){return this._getContextManager().bind(t,r)},e.prototype._getContextManager=function(){return Nm(I0)||Zx},e.prototype.disable=function(){this._getContextManager().disable(),C_(I0,x_.instance())},e}();var fy;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(fy||(fy={}));var N0="0000000000000000",D0="00000000000000000000000000000000",SE={traceId:D0,spanId:N0,traceFlags:fy.NONE};var fh=function(){function e(t){t===void 0&&(t=SE),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,r){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,r){},e}();var C0=_E("OpenTelemetry Context Key SPAN");function dy(e){return e.getValue(C0)||void 0}function wE(){return dy(ly.getInstance().active())}function wg(e,t){return e.setValue(C0,t)}function bE(e){return e.deleteValue(C0)}function EE(e,t){return wg(e,new fh(t))}function py(e){var t;return(t=dy(e))===null||t===void 0?void 0:t.spanContext()}var Xx=/^([0-9a-f]{32})$/i,Qx=/^[0-9a-f]{16}$/i;function eP(e){return Xx.test(e)&&e!==D0}function tP(e){return Qx.test(e)&&e!==N0}function vy(e){return eP(e.traceId)&&tP(e.spanId)}function TE(e){return new fh(e)}var x0=ly.getInstance(),my=function(){function e(){}return e.prototype.startSpan=function(t,r,n){n===void 0&&(n=x0.active());var o=!!(r!=null&&r.root);if(o)return new fh;var u=n&&py(n);return rP(u)&&vy(u)?new fh(u):new fh},e.prototype.startActiveSpan=function(t,r,n,o){var u,m,y;if(!(arguments.length<2)){arguments.length===2?y=r:arguments.length===3?(u=r,y=n):(u=r,m=n,y=o);var T=m??x0.active(),D=this.startSpan(t,u,T),U=wg(T,D);return x0.with(U,y,void 0,D)}},e}();function rP(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var nP=new my,IE=function(){function e(t,r,n,o){this._provider=t,this.name=r,this.version=n,this.options=o}return e.prototype.startSpan=function(t,r,n){return this._getTracer().startSpan(t,r,n)},e.prototype.startActiveSpan=function(t,r,n,o){var u=this._getTracer();return Reflect.apply(u.startActiveSpan,u,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):nP},e}();var NE=function(){function e(){}return e.prototype.getTracer=function(t,r,n){return new my},e}();var aP=new NE,P0=function(){function e(){}return e.prototype.getTracer=function(t,r,n){var o;return(o=this.getDelegateTracer(t,r,n))!==null&&o!==void 0?o:new IE(this,t,r,n)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:aP},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,r,n){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(t,r,n)},e}();var P_;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(P_||(P_={}));var A0="trace",DE=function(){function e(){this._proxyTracerProvider=new P0,this.wrapSpanContext=TE,this.isSpanContextValid=vy,this.deleteSpan=bE,this.getSpan=dy,this.getActiveSpan=wE,this.getSpanContext=py,this.setSpan=wg,this.setSpanContext=EE}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var r=D_(A0,this._proxyTracerProvider,x_.instance());return r&&this._proxyTracerProvider.setDelegate(t),r},e.prototype.getTracerProvider=function(){return Nm(A0)||this._proxyTracerProvider},e.prototype.getTracer=function(t,r){return this.getTracerProvider().getTracer(t,r)},e.prototype.disable=function(){C_(A0,x_.instance()),this._proxyTracerProvider=new P0},e}();var R0=DE.getInstance();var iP=Object.defineProperty,U0=(e,t)=>{for(var r in t)iP(e,r,{get:t[r],enumerable:!0})};function _y(e,{contentType:t,dataStreamVersion:r}){let n=new Headers(e??{});return n.has("Content-Type")||n.set("Content-Type",t),r!==void 0&&n.set("X-Vercel-AI-Data-Stream",r),n}function CE(e,{contentType:t,dataStreamVersion:r}){let n={};if(e!=null)for(let[o,u]of Object.entries(e))n[o]=u;return n["Content-Type"]==null&&(n["Content-Type"]=t),r!==void 0&&(n["X-Vercel-AI-Data-Stream"]=r),n}function xE({response:e,status:t,statusText:r,headers:n,stream:o}){e.writeHead(t??200,r,n);let u=o.getReader();(async()=>{try{for(;;){let{done:y,value:T}=await u.read();if(y)break;e.write(T)}}catch(y){throw y}finally{e.end()}})()}var UE="AI_InvalidArgumentError",jE=`vercel.ai.error.${UE}`,oP=Symbol.for(jE),YE,Fp=class extends Mt{constructor({parameter:e,value:t,message:r}){super({name:UE,message:`Invalid argument for parameter ${e}: ${r}`}),this[YE]=!0,this.parameter=e,this.value=t}static isInstance(e){return Mt.hasMarker(e,jE)}};YE=oP;var $E="AI_RetryError",qE=`vercel.ai.error.${$E}`,sP=Symbol.for(qE),BE,PE=class extends Mt{constructor({message:e,reason:t,errors:r}){super({name:$E,message:e}),this[BE]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return Mt.hasMarker(e,qE)}};BE=sP;var uP=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:r=2}={})=>async n=>zE(n,{maxRetries:e,delayInMs:t,backoffFactor:r});async function zE(e,{maxRetries:t,delayInMs:r,backoffFactor:n},o=[]){try{return await e()}catch(u){if(V_(u)||t===0)throw u;let m=tb(u),y=[...o,u],T=y.length;if(T>t)throw new PE({message:`Failed after ${T} attempts. Last error: ${m}`,reason:"maxRetriesExceeded",errors:y});if(u instanceof Error&&Sl.isInstance(u)&&u.isRetryable===!0&&T<=t)return await eb(r),zE(e,{maxRetries:t,delayInMs:n*r,backoffFactor:n},y);throw T===1?u:new PE({message:`Failed after ${T} attempts with non-retryable error: '${m}'`,reason:"errorNotRetryable",errors:y})}}function cP({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new Fp({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Fp({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}let t=e??2;return{maxRetries:t,retry:uP({maxRetries:t})}}function M0({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function lP({model:e,settings:t,telemetry:r,headers:n}){var o;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((u,[m,y])=>(u[`ai.settings.${m}`]=y,u),{}),...Object.entries((o=r==null?void 0:r.metadata)!=null?o:{}).reduce((u,[m,y])=>(u[`ai.telemetry.metadata.${m}`]=y,u),{}),...Object.entries(n??{}).reduce((u,[m,y])=>(y!==void 0&&(u[`ai.request.headers.${m}`]=y),u),{})}}var fP={startSpan(){return hy},startActiveSpan(e,t,r,n){if(typeof t=="function")return t(hy);if(typeof r=="function")return r(hy);if(typeof n=="function")return n(hy)}},hy={spanContext(){return dP},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},dP={traceId:"",spanId:"",traceFlags:0};function pP({isEnabled:e=!1,tracer:t}={}){return e?t||R0.getTracer("ai"):fP}function L0({name:e,tracer:t,attributes:r,fn:n,endWhenDone:o=!0}){return t.startActiveSpan(e,{attributes:r},async u=>{try{let m=await n(u);return o&&u.end(),m}catch(m){try{m instanceof Error?(u.recordException({name:m.name,message:m.message,stack:m.stack}),u.setStatus({code:P_.ERROR,message:m.message})):u.setStatus({code:P_.ERROR})}finally{u.end()}throw m}})}function A_({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((r,[n,o])=>{if(o===void 0)return r;if(typeof o=="object"&&"input"in o&&typeof o.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return r;let u=o.input();return u===void 0?r:{...r,[n]:u}}if(typeof o=="object"&&"output"in o&&typeof o.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return r;let u=o.output();return u===void 0?r:{...r,[n]:u}}return{...r,[n]:o}},{})}var vP="AI_NoImageGeneratedError",mP=`vercel.ai.error.${vP}`,hP=Symbol.for(mP),_P;_P=hP;var HE="AI_NoObjectGeneratedError",GE=`vercel.ai.error.${HE}`,gP=Symbol.for(GE),VE,AE=class extends Mt{constructor({message:e="No object generated.",cause:t,text:r,response:n,usage:o}){super({name:HE,message:e,cause:t}),this[VE]=!0,this.text=r,this.response=n,this.usage=o}static isInstance(e){return Mt.hasMarker(e,GE)}};VE=gP;var KE="AI_DownloadError",WE=`vercel.ai.error.${KE}`,yP=Symbol.for(WE),JE,O0=class extends Mt{constructor({url:e,statusCode:t,statusText:r,cause:n,message:o=n==null?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${n}`}){super({name:KE,message:o,cause:n}),this[JE]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return Mt.hasMarker(e,WE)}};JE=yP;async function SP({url:e,fetchImplementation:t=fetch}){var r;let n=e.toString();try{let o=await t(n);if(!o.ok)throw new O0({url:n,statusCode:o.status,statusText:o.statusText});return{data:new Uint8Array(await o.arrayBuffer()),mimeType:(r=o.headers.get("content-type"))!=null?r:void 0}}catch(o){throw O0.isInstance(o)?o:new O0({url:n,cause:o})}}var wP=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}];function bP(e){for(let{bytes:t,mimeType:r}of wP)if(e.length>=t.length&&t.every((n,o)=>e[o]===n))return r}var ZE="AI_InvalidDataContentError",XE=`vercel.ai.error.${ZE}`,EP=Symbol.for(XE),QE,RE=class extends Mt{constructor({content:e,cause:t,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:ZE,message:r,cause:t}),this[QE]=!0,this.content=e}static isInstance(e){return Mt.hasMarker(e,XE)}};QE=EP;var eT=M.union([M.string(),M.instanceof(Uint8Array),M.instanceof(ArrayBuffer),M.custom(e=>{var t,r;return(r=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?r:!1},{message:"Must be a Buffer"})]);function TP(e){return typeof e=="string"?e:e instanceof ArrayBuffer?xh(new Uint8Array(e)):xh(e)}function gy(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return nb(e)}catch(t){throw new RE({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new RE({content:e})}function IP(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var tT="AI_InvalidMessageRoleError",rT=`vercel.ai.error.${tT}`,NP=Symbol.for(rT),nT,DP=class extends Mt{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:tT,message:t}),this[nT]=!0,this.role=e}static isInstance(e){return Mt.hasMarker(e,rT)}};nT=NP;function CP(e){try{let[t,r]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:r}}catch{return{mimeType:void 0,base64Content:void 0}}}async function xP({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:r=()=>!1,downloadImplementation:n=SP}){let o=await AP(e.messages,n,t,r);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(u=>PP(u,o))]}function PP(e,t){var r,n,o,u,m,y;let T=e.role;switch(T){case"system":return{role:"system",content:e.content,providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata}:{role:"user",content:e.content.map(D=>RP(D,t)).filter(D=>D.type!=="text"||D.text!==""),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(u=e.providerOptions)!=null?u:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(D=>D.type!=="text"||D.text!=="").map(D=>{let{experimental_providerMetadata:U,providerOptions:H,...ne}=D;return{...ne,providerMetadata:H??U}}),providerMetadata:(m=e.providerOptions)!=null?m:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(D=>{var U;return{type:"tool-result",toolCallId:D.toolCallId,toolName:D.toolName,result:D.result,content:D.experimental_content,isError:D.isError,providerMetadata:(U=D.providerOptions)!=null?U:D.experimental_providerMetadata}}),providerMetadata:(y=e.providerOptions)!=null?y:e.experimental_providerMetadata};default:{let D=T;throw new DP({role:D})}}}async function AP(e,t,r,n){let o=e.filter(m=>m.role==="user").map(m=>m.content).filter(m=>Array.isArray(m)).flat().filter(m=>m.type==="image"||m.type==="file").filter(m=>!(m.type==="image"&&r===!0)).map(m=>m.type==="image"?m.image:m.data).map(m=>typeof m=="string"&&(m.startsWith("http:")||m.startsWith("https:"))?new URL(m):m).filter(m=>m instanceof URL).filter(m=>!n(m)),u=await Promise.all(o.map(async m=>({url:m,data:await t({url:m})})));return Object.fromEntries(u.map(({url:m,data:y})=>[m.toString(),y]))}function RP(e,t){var r;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:e.experimental_providerMetadata};let n=e.mimeType,o,u,m,y=e.type;switch(y){case"image":o=e.image;break;case"file":o=e.data;break;default:throw new Error(`Unsupported part type: ${y}`)}try{u=typeof o=="string"?new URL(o):o}catch{u=o}if(u instanceof URL)if(u.protocol==="data:"){let{mimeType:T,base64Content:D}=CP(u.toString());if(T==null||D==null)throw new Error(`Invalid data URL format in part ${y}`);n=T,m=gy(D)}else{let T=t[u.toString()];T?(m=T.data,n??(n=T.mimeType)):m=u}else m=gy(u);switch(y){case"image":return m instanceof Uint8Array&&(n=(r=bP(m))!=null?r:n),{type:"image",image:m,mimeType:n,providerMetadata:e.experimental_providerMetadata};case"file":{if(n==null)throw new Error("Mime type is missing for file part");return{type:"file",data:m instanceof Uint8Array?TP(m):m,mimeType:n,providerMetadata:e.experimental_providerMetadata}}}}function OP({maxTokens:e,temperature:t,topP:r,topK:n,presencePenalty:o,frequencyPenalty:u,stopSequences:m,seed:y}){if(e!=null){if(!Number.isInteger(e))throw new Fp({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new Fp({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Fp({parameter:"temperature",value:t,message:"temperature must be a number"});if(r!=null&&typeof r!="number")throw new Fp({parameter:"topP",value:r,message:"topP must be a number"});if(n!=null&&typeof n!="number")throw new Fp({parameter:"topK",value:n,message:"topK must be a number"});if(o!=null&&typeof o!="number")throw new Fp({parameter:"presencePenalty",value:o,message:"presencePenalty must be a number"});if(u!=null&&typeof u!="number")throw new Fp({parameter:"frequencyPenalty",value:u,message:"frequencyPenalty must be a number"});if(y!=null&&!Number.isInteger(y))throw new Fp({parameter:"seed",value:y,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:r,topK:n,presencePenalty:o,frequencyPenalty:u,stopSequences:m!=null&&m.length>0?m:void 0,seed:y}}function kP(e){var t,r,n;let o=[];for(let u of e){let m;try{m=new URL(u.url)}catch{throw new Error(`Invalid URL: ${u.url}`)}switch(m.protocol){case"http:":case"https:":{if((t=u.contentType)!=null&&t.startsWith("image/"))o.push({type:"image",image:m});else{if(!u.contentType)throw new Error("If the attachment is not an image, it must specify a content type");o.push({type:"file",data:m,mimeType:u.contentType})}break}case"data:":{let y,T,D;try{[y,T]=u.url.split(","),D=y.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${u.url}`)}if(D==null||T==null)throw new Error(`Invalid data URL format: ${u.url}`);if((r=u.contentType)!=null&&r.startsWith("image/"))o.push({type:"image",image:gy(T)});else if((n=u.contentType)!=null&&n.startsWith("text/"))o.push({type:"text",text:IP(gy(T))});else{if(!u.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");o.push({type:"file",data:T,mimeType:u.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${m.protocol}`)}}return o}var aT="AI_MessageConversionError",iT=`vercel.ai.error.${aT}`,MP=Symbol.for(iT),oT,OE=class extends Mt{constructor({originalMessage:e,message:t}){super({name:aT,message:t}),this[oT]=!0,this.originalMessage=e}static isInstance(e){return Mt.hasMarker(e,iT)}};oT=MP;function LP(e,t){var r;let n=(r=t==null?void 0:t.tools)!=null?r:{},o=[];for(let u=0;u<e.length;u++){let m=e[u],y=u===e.length-1,{role:T,content:D,toolInvocations:U,experimental_attachments:H}=m;switch(T){case"system":{o.push({role:"system",content:D});break}case"user":{o.push({role:"user",content:H?[{type:"text",text:D},...kP(H)]:D});break}case"assistant":{if(U==null||U.length===0){o.push({role:"assistant",content:D});break}let ne=U.reduce((pe,ce)=>{var ee;return Math.max(pe,(ee=ce.step)!=null?ee:0)},0);for(let pe=0;pe<=ne;pe++){let ce=U.filter(ee=>{var Q;return((Q=ee.step)!=null?Q:0)===pe});ce.length!==0&&(o.push({role:"assistant",content:[...y&&D&&pe===0?[{type:"text",text:D}]:[],...ce.map(({toolCallId:ee,toolName:Q,args:ve})=>({type:"tool-call",toolCallId:ee,toolName:Q,args:ve}))]}),o.push({role:"tool",content:ce.map(ee=>{if(!("result"in ee))throw new OE({originalMessage:m,message:"ToolInvocation must have a result: "+JSON.stringify(ee)});let{toolCallId:Q,toolName:ve,result:Pe}=ee,We=n[ve];return(We==null?void 0:We.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:Q,toolName:ve,result:We.experimental_toToolResultContent(Pe),experimental_content:We.experimental_toToolResultContent(Pe)}:{type:"tool-result",toolCallId:Q,toolName:ve,result:Pe}})}))}D&&!y&&o.push({role:"assistant",content:D});break}case"data":break;default:{let ne=T;throw new OE({originalMessage:m,message:`Unsupported role: ${ne}`})}}}return o}function FP(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";let t=e.map(UP);return t.some(r=>r==="has-ui-specific-parts")?"ui-messages":t.every(r=>r==="has-core-specific-parts"||r==="message")?"messages":"other"}function UP(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var F0=M.lazy(()=>M.union([M.null(),M.string(),M.number(),M.boolean(),M.record(M.string(),F0),M.array(F0)])),Es=M.record(M.string(),M.record(M.string(),F0)),jP=M.array(M.union([M.object({type:M.literal("text"),text:M.string()}),M.object({type:M.literal("image"),data:M.string(),mimeType:M.string().optional()})])),sT=M.object({type:M.literal("text"),text:M.string(),providerOptions:Es.optional(),experimental_providerMetadata:Es.optional()}),YP=M.object({type:M.literal("image"),image:M.union([eT,M.instanceof(URL)]),mimeType:M.string().optional(),providerOptions:Es.optional(),experimental_providerMetadata:Es.optional()}),$P=M.object({type:M.literal("file"),data:M.union([eT,M.instanceof(URL)]),mimeType:M.string(),providerOptions:Es.optional(),experimental_providerMetadata:Es.optional()}),qP=M.object({type:M.literal("tool-call"),toolCallId:M.string(),toolName:M.string(),args:M.unknown(),providerOptions:Es.optional(),experimental_providerMetadata:Es.optional()}),BP=M.object({type:M.literal("tool-result"),toolCallId:M.string(),toolName:M.string(),result:M.unknown(),content:jP.optional(),isError:M.boolean().optional(),providerOptions:Es.optional(),experimental_providerMetadata:Es.optional()}),zP=M.object({role:M.literal("system"),content:M.string(),providerOptions:Es.optional(),experimental_providerMetadata:Es.optional()}),HP=M.object({role:M.literal("user"),content:M.union([M.string(),M.array(M.union([sT,YP,$P]))]),providerOptions:Es.optional(),experimental_providerMetadata:Es.optional()}),GP=M.object({role:M.literal("assistant"),content:M.union([M.string(),M.array(M.union([sT,qP]))]),providerOptions:Es.optional(),experimental_providerMetadata:Es.optional()}),VP=M.object({role:M.literal("tool"),content:M.array(BP),providerOptions:Es.optional(),experimental_providerMetadata:Es.optional()}),KP=M.union([zP,HP,GP,VP]);function WP({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new Pv({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new Pv({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new Pv({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new Pv({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){let r=FP(e.messages);if(r==="other")throw new Pv({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});let n=r==="ui-messages"?LP(e.messages,{tools:t}):e.messages,o=sh({value:n,schema:M.array(KP)});if(!o.success)throw new Pv({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:o.error});return{type:"messages",messages:n,system:e.system}}throw new Error("unreachable")}function JP({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function ZP(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var XP="JSON schema:",QP="You MUST answer with a JSON object that matches the JSON schema above.",eA="You MUST answer with JSON.";function tA({prompt:e,schema:t,schemaPrefix:r=t!=null?XP:void 0,schemaSuffix:n=t!=null?QP:eA}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,r,t!=null?JSON.stringify(t):void 0,n].filter(o=>o!=null).join(`
`)}function k0(e){let t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{let r=t.getReader();return{async next(){let{done:n,value:o}=await r.read();return n?{done:!0,value:void 0}:{done:!1,value:o}}}},t}var $U=Rp({prefix:"aiobj",size:24});var Lp=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function kE(){let e,t;return{promise:new Promise((n,o)=>{e=n,t=o}),resolve:e,reject:t}}function rA(){let e=[],t=null,r=!1,n=kE(),o=async()=>{if(r&&e.length===0){t==null||t.close();return}if(e.length===0)return n=kE(),await n.promise,o();try{let{value:u,done:m}=await e[0].read();m?(e.shift(),e.length>0?await o():r&&(t==null||t.close())):t==null||t.enqueue(u)}catch(u){t==null||t.error(u),e.shift(),r&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(u){t=u},pull:o,async cancel(){for(let u of e)await u.cancel();e=[],r=!0}}),addStream:u=>{if(r)throw new Error("Cannot add inner stream: outer stream is closed");e.push(u.getReader()),n.resolve()},close:()=>{r=!0,n.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{r=!0,n.resolve(),e.forEach(u=>u.cancel()),e=[],t==null||t.close()}}}function nA(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}var BU=Rp({prefix:"aiobj",size:24});var uT="AI_NoOutputSpecifiedError",cT=`vercel.ai.error.${uT}`,aA=Symbol.for(cT),lT,iA=class extends Mt{constructor({message:e="No output specified."}={}){super({name:uT,message:e}),this[lT]=!0}static isInstance(e){return Mt.hasMarker(e,cT)}};lT=aA;var fT="AI_ToolExecutionError",dT=`vercel.ai.error.${fT}`,oA=Symbol.for(dT),pT,sA=class extends Mt{constructor({toolArgs:e,toolName:t,toolCallId:r,cause:n,message:o=`Error executing tool ${t}: ${oh(n)}`}){super({name:fT,message:o,cause:n}),this[pT]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=r}static isInstance(e){return Mt.hasMarker(e,dT)}};pT=oA;function uA(e){return e!=null&&Object.keys(e).length>0}function cA({tools:e,toolChoice:t,activeTools:r}){return uA(e)?{tools:(r!=null?Object.entries(e).filter(([o])=>r.includes(o)):Object.entries(e)).map(([o,u])=>{let m=u.type;switch(m){case void 0:case"function":return{type:"function",name:o,description:u.description,parameters:Gh(u.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:o,id:u.id,args:u.args};default:{let y=m;throw new Error(`Unsupported tool type: ${y}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var lA=/^([\s\S]*?)(\s+)(\S*)$/;function fA(e){let t=e.match(lA);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var vT="AI_InvalidToolArgumentsError",mT=`vercel.ai.error.${vT}`,dA=Symbol.for(mT),hT,R_=class extends Mt{constructor({toolArgs:e,toolName:t,cause:r,message:n=`Invalid arguments for tool ${t}: ${oh(r)}`}){super({name:vT,message:n,cause:r}),this[hT]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return Mt.hasMarker(e,mT)}};hT=dA;var _T="AI_NoSuchToolError",gT=`vercel.ai.error.${_T}`,pA=Symbol.for(gT),yT,Vh=class extends Mt{constructor({toolName:e,availableTools:t=void 0,message:r=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:_T,message:r}),this[yT]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return Mt.hasMarker(e,gT)}};yT=pA;var ST="AI_ToolCallRepairError",wT=`vercel.ai.error.${ST}`,vA=Symbol.for(wT),bT,j0=class extends Mt{constructor({cause:e,originalError:t,message:r=`Error repairing tool call: ${oh(e)}`}){super({name:ST,message:r,cause:e}),this[bT]=!0,this.originalError=t}static isInstance(e){return Mt.hasMarker(e,wT)}};bT=vA;async function mA({toolCall:e,tools:t,repairToolCall:r,system:n,messages:o}){if(t==null)throw new Vh({toolName:e.toolName});try{return await ME({toolCall:e,tools:t})}catch(u){if(r==null||!(Vh.isInstance(u)||R_.isInstance(u)))throw u;let m=null;try{m=await r({toolCall:e,tools:t,parameterSchema:({toolName:y})=>Gh(t[y].parameters).jsonSchema,system:n,messages:o,error:u})}catch(y){throw new j0({cause:y,originalError:u})}if(m==null)throw u;return await ME({toolCall:m,tools:t})}}async function ME({toolCall:e,tools:t}){let r=e.toolName,n=t[r];if(n==null)throw new Vh({toolName:e.toolName,availableTools:Object.keys(t)});let o=Gh(n.parameters),u=e.args.trim()===""?sh({value:{},schema:o}):Av({text:e.args,schema:o});if(u.success===!1)throw new R_({toolName:r,toolArgs:e.args,cause:u.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:r,args:u.value}}function LE({text:e="",tools:t,toolCalls:r,toolResults:n,messageId:o,generateMessageId:u}){let m=[];return m.push({role:"assistant",content:[{type:"text",text:e},...r],id:o}),n.length>0&&m.push({role:"tool",id:u(),content:n.map(y=>{let T=t[y.toolName];return(T==null?void 0:T.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:y.toolCallId,toolName:y.toolName,result:T.experimental_toToolResultContent(y.result),experimental_content:T.experimental_toToolResultContent(y.result)}:{type:"tool-result",toolCallId:y.toolCallId,toolName:y.toolName,result:y.result}})}),m}var QU=Rp({prefix:"aitxt",size:24}),ej=Rp({prefix:"msg",size:24});var hA={};U0(hA,{object:()=>gA,text:()=>_A});var _A=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),gA=({schema:e})=>{let t=Gh(e);return{type:"object",responseFormat:({model:r})=>({type:"json",schema:r.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:r,model:n}){return n.supportsStructuredOutputs?r:tA({prompt:r,schema:t.jsonSchema})},parsePartial({text:r}){let n=lE(r);switch(n.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:n.value};default:{let o=n.state;throw new Error(`Unsupported parse state: ${o}`)}}},parseOutput({text:r},n){let o=Av({text:r});if(!o.success)throw new AE({message:"No object generated: could not parse the response.",cause:o.error,text:r,response:n.response,usage:n.usage});let u=sh({value:o.value,schema:t});if(!u.success)throw new AE({message:"No object generated: response did not match schema.",cause:u.error,text:r,response:n.response,usage:n.usage});return u.value}}};function yA(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function Y0(e,t){let r=e.getReader(),n=t.getReader(),o,u,m=!1,y=!1;async function T(U){try{o==null&&(o=r.read());let H=await o;o=void 0,H.done?U.close():U.enqueue(H.value)}catch(H){U.error(H)}}async function D(U){try{u==null&&(u=n.read());let H=await u;u=void 0,H.done?U.close():U.enqueue(H.value)}catch(H){U.error(H)}}return new ReadableStream({async pull(U){try{if(m){await D(U);return}if(y){await T(U);return}o==null&&(o=r.read()),u==null&&(u=n.read());let{result:H,reader:ne}=await Promise.race([o.then(pe=>({result:pe,reader:r})),u.then(pe=>({result:pe,reader:n}))]);H.done||U.enqueue(H.value),ne===r?(o=void 0,H.done&&(await D(U),m=!0)):(u=void 0,H.done&&(y=!0,await T(U)))}catch(H){U.error(H)}},cancel(){r.cancel(),n.cancel()}})}function SA({tools:e,generatorStream:t,toolCallStreaming:r,tracer:n,telemetry:o,system:u,messages:m,abortSignal:y,repairToolCall:T}){let D=null,U=new ReadableStream({start(ve){D=ve}}),H={},ne=new Set,pe=!1,ce;function ee(){pe&&ne.size===0&&(ce!=null&&D.enqueue(ce),D.close())}let Q=new TransformStream({async transform(ve,Pe){let We=ve.type;switch(We){case"text-delta":case"reasoning":case"response-metadata":case"error":{Pe.enqueue(ve);break}case"tool-call-delta":{r&&(H[ve.toolCallId]||(Pe.enqueue({type:"tool-call-streaming-start",toolCallId:ve.toolCallId,toolName:ve.toolName}),H[ve.toolCallId]=!0),Pe.enqueue({type:"tool-call-delta",toolCallId:ve.toolCallId,toolName:ve.toolName,argsTextDelta:ve.argsTextDelta}));break}case"tool-call":{try{let Ae=await mA({toolCall:ve,tools:e,repairToolCall:T,system:u,messages:m});Pe.enqueue(Ae);let Ze=e[Ae.toolName];if(Ze.execute!=null){let Tt=Sm();ne.add(Tt),L0({name:"ai.toolCall",attributes:A_({telemetry:o,attributes:{...M0({operationId:"ai.toolCall",telemetry:o}),"ai.toolCall.name":Ae.toolName,"ai.toolCall.id":Ae.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(Ae.args)}}}),tracer:n,fn:async Dt=>Ze.execute(Ae.args,{toolCallId:Ae.toolCallId,messages:m,abortSignal:y}).then(Lt=>{D.enqueue({...Ae,type:"tool-result",result:Lt}),ne.delete(Tt),ee();try{Dt.setAttributes(A_({telemetry:o,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(Lt)}}}))}catch{}},Lt=>{D.enqueue({type:"error",error:new sA({toolCallId:Ae.toolCallId,toolName:Ae.toolName,toolArgs:Ae.args,cause:Lt})}),ne.delete(Tt),ee()})})}}catch(Ae){D.enqueue({type:"error",error:Ae})}break}case"finish":{ce={type:"finish",finishReason:ve.finishReason,logprobs:ve.logprobs,usage:JP(ve.usage),experimental_providerMetadata:ve.providerMetadata};break}default:{let Ae=We;throw new Error(`Unhandled chunk type: ${Ae}`)}}},flush(){pe=!0,ee()}});return new ReadableStream({async start(ve){return Promise.all([t.pipeThrough(Q).pipeTo(new WritableStream({write(Pe){ve.enqueue(Pe)},close(){}})),U.pipeTo(new WritableStream({write(Pe){ve.enqueue(Pe)},close(){ve.close()}}))])}})}var wA=Rp({prefix:"aitxt",size:24}),bA=Rp({prefix:"msg",size:24});function ET({model:e,tools:t,toolChoice:r,system:n,prompt:o,messages:u,maxRetries:m,abortSignal:y,headers:T,maxSteps:D=1,experimental_generateMessageId:U=bA,experimental_output:H,experimental_continueSteps:ne=!1,experimental_telemetry:pe,experimental_providerMetadata:ce,providerOptions:ee=ce,experimental_toolCallStreaming:Q=!1,toolCallStreaming:ve=Q,experimental_activeTools:Pe,experimental_repairToolCall:We,experimental_transform:Ae,onChunk:Ze,onFinish:Tt,onStepFinish:Dt,_internal:{now:Lt=nA,generateId:it=wA,currentDate:Ht=()=>new Date}={},...xr}){return new TA({model:e,telemetry:pe,headers:T,settings:xr,maxRetries:m,abortSignal:y,system:n,prompt:o,messages:u,tools:t,toolChoice:r,toolCallStreaming:ve,transforms:yA(Ae),activeTools:Pe,repairToolCall:We,maxSteps:D,output:H,continueSteps:ne,providerOptions:ee,onChunk:Ze,onFinish:Tt,onStepFinish:Dt,now:Lt,currentDate:Ht,generateId:it,generateMessageId:U})}function EA(e){if(!e)return new TransformStream({transform(o,u){u.enqueue({part:o,partialOutput:void 0})}});let t="",r="",n="";return new TransformStream({transform(o,u){if(o.type!=="text-delta"){u.enqueue({part:o,partialOutput:void 0});return}t+=o.textDelta,r+=o.textDelta;let m=e.parsePartial({text:t});if(m!=null){let y=JSON.stringify(m.partial);y!==n&&(u.enqueue({part:{type:"text-delta",textDelta:r},partialOutput:m.partial}),n=y,r="")}},flush(o){r.length>0&&o.enqueue({part:{type:"text-delta",textDelta:r},partialOutput:void 0})}})}var TA=class{constructor({model:e,telemetry:t,headers:r,settings:n,maxRetries:o,abortSignal:u,system:m,prompt:y,messages:T,tools:D,toolChoice:U,toolCallStreaming:H,transforms:ne,activeTools:pe,repairToolCall:ce,maxSteps:ee,output:Q,continueSteps:ve,providerOptions:Pe,onChunk:We,onFinish:Ae,onStepFinish:Ze,now:Tt,currentDate:Dt,generateId:Lt,generateMessageId:it}){this.warningsPromise=new Lp,this.usagePromise=new Lp,this.finishReasonPromise=new Lp,this.providerMetadataPromise=new Lp,this.textPromise=new Lp,this.reasoningPromise=new Lp,this.toolCallsPromise=new Lp,this.toolResultsPromise=new Lp,this.requestPromise=new Lp,this.responsePromise=new Lp,this.stepsPromise=new Lp;var Ht;if(ee<1)throw new Fp({parameter:"maxSteps",value:ee,message:"maxSteps must be at least 1"});this.output=Q;let xr="",oa="",ei="",Pr,xn={id:Lt(),timestamp:Dt(),modelId:e.modelId,messages:[]},nt=[],ho=[],Ve,Tr,Bn="initial",kt=[],Ft,rt=new TransformStream({async transform(qt,an){an.enqueue(qt);let{part:je}=qt;if((je.type==="text-delta"||je.type==="reasoning"||je.type==="tool-call"||je.type==="tool-result"||je.type==="tool-call-streaming-start"||je.type==="tool-call-delta")&&await(We==null?void 0:We({chunk:je})),je.type==="text-delta"&&(xr+=je.textDelta,oa+=je.textDelta,ei+=je.textDelta),je.type==="reasoning"&&(Pr=(Pr??"")+je.textDelta),je.type==="tool-call"&&nt.push(je),je.type==="tool-result"&&ho.push(je),je.type==="step-finish"){let Kn=LE({text:oa,tools:D??{},toolCalls:nt,toolResults:ho,messageId:je.messageId,generateMessageId:it}),Ct=kt.length,wr="done";Ct+1<ee&&(ve&&je.finishReason==="length"&&nt.length===0?wr="continue":nt.length>0&&ho.length===nt.length&&(wr="tool-result"));let ti={stepType:Bn,text:xr,reasoning:Pr,toolCalls:nt,toolResults:ho,finishReason:je.finishReason,usage:je.usage,warnings:je.warnings,logprobs:je.logprobs,request:je.request,response:{...je.response,messages:[...xn.messages,...Kn]},experimental_providerMetadata:je.experimental_providerMetadata,isContinued:je.isContinued};await(Ze==null?void 0:Ze(ti)),kt.push(ti),nt=[],ho=[],xr="",wr!=="done"&&(Bn=wr),wr!=="continue"&&(xn.messages.push(...Kn),oa="")}je.type==="finish"&&(xn.id=je.response.id,xn.timestamp=je.response.timestamp,xn.modelId=je.response.modelId,xn.headers=je.response.headers,Tr=je.usage,Ve=je.finishReason)},async flush(qt){var an;try{if(kt.length===0)return;let je=kt[kt.length-1];Yr.warningsPromise.resolve(je.warnings),Yr.requestPromise.resolve(je.request),Yr.responsePromise.resolve(je.response),Yr.toolCallsPromise.resolve(je.toolCalls),Yr.toolResultsPromise.resolve(je.toolResults),Yr.providerMetadataPromise.resolve(je.experimental_providerMetadata);let Kn=Ve??"unknown",Ct=Tr??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Yr.finishReasonPromise.resolve(Kn),Yr.usagePromise.resolve(Ct),Yr.textPromise.resolve(ei),Yr.reasoningPromise.resolve(Pr),Yr.stepsPromise.resolve(kt),await(Ae==null?void 0:Ae({finishReason:Kn,logprobs:void 0,usage:Ct,text:ei,reasoning:Pr,toolCalls:je.toolCalls,toolResults:je.toolResults,request:(an=je.request)!=null?an:{},response:je.response,warnings:je.warnings,experimental_providerMetadata:je.experimental_providerMetadata,steps:kt})),Ft.setAttributes(A_({telemetry:t,attributes:{"ai.response.finishReason":Kn,"ai.response.text":{output:()=>ei},"ai.response.toolCalls":{output:()=>{var wr;return(wr=je.toolCalls)!=null&&wr.length?JSON.stringify(je.toolCalls):void 0}},"ai.usage.promptTokens":Ct.promptTokens,"ai.usage.completionTokens":Ct.completionTokens}}))}catch(je){qt.error(je)}finally{Ft.end()}}}),yn=rA();this.addStream=yn.addStream,this.closeStream=yn.close;let at=yn.stream;for(let qt of ne)at=at.pipeThrough(qt({tools:D,stopStream(){yn.terminate()}}));this.baseStream=at.pipeThrough(EA(Q)).pipeThrough(rt);let{maxRetries:Dc,retry:Wt}=cP({maxRetries:o}),qi=pP(t),Gt=lP({model:e,telemetry:t,headers:r,settings:{...n,maxRetries:Dc}}),tr=WP({prompt:{system:(Ht=Q==null?void 0:Q.injectIntoSystemPrompt({system:m,model:e}))!=null?Ht:m,prompt:y,messages:T},tools:D}),Yr=this;L0({name:"ai.streamText",attributes:A_({telemetry:t,attributes:{...M0({operationId:"ai.streamText",telemetry:t}),...Gt,"ai.prompt":{input:()=>JSON.stringify({system:m,prompt:y,messages:T})},"ai.settings.maxSteps":ee}}),tracer:qi,endWhenDone:!1,fn:async qt=>{Ft=qt;async function an({currentStep:je,responseMessages:Kn,usage:Ct,stepType:wr,previousStepText:ti,hasLeadingWhitespace:Bi,messageId:Gr}){let Sn=Kn.length===0?tr.type:"messages",zi=[...tr.messages,...Kn],ga=await xP({prompt:{type:Sn,system:tr.system,messages:zi},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:e.supportsUrl}),Ar={type:"regular",...cA({tools:D,toolChoice:U,activeTools:pe})},{result:{stream:ar,warnings:pr,rawResponse:$r,request:qf},doStreamSpan:wn,startTimestampMs:El}=await Wt(()=>L0({name:"ai.streamText.doStream",attributes:A_({telemetry:t,attributes:{...M0({operationId:"ai.streamText.doStream",telemetry:t}),...Gt,"ai.prompt.format":{input:()=>Sn},"ai.prompt.messages":{input:()=>JSON.stringify(ga)},"ai.prompt.tools":{input:()=>{var Nr;return(Nr=Ar.tools)==null?void 0:Nr.map(Lr=>JSON.stringify(Lr))}},"ai.prompt.toolChoice":{input:()=>Ar.toolChoice!=null?JSON.stringify(Ar.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":n.frequencyPenalty,"gen_ai.request.max_tokens":n.maxTokens,"gen_ai.request.presence_penalty":n.presencePenalty,"gen_ai.request.stop_sequences":n.stopSequences,"gen_ai.request.temperature":n.temperature,"gen_ai.request.top_k":n.topK,"gen_ai.request.top_p":n.topP}}),tracer:qi,endWhenDone:!1,fn:async Nr=>({startTimestampMs:Tt(),doStreamSpan:Nr,result:await e.doStream({mode:Ar,...OP(n),inputFormat:Sn,responseFormat:Q==null?void 0:Q.responseFormat({model:e}),prompt:ga,providerMetadata:Pe,abortSignal:u,headers:r})})})),Cc=SA({tools:D,generatorStream:ar,toolCallStreaming:H,tracer:qi,telemetry:t,system:m,messages:zi,repairToolCall:ce,abortSignal:u}),bn=qf??{},qa=[],ur=[],Pn="unknown",zn={promptTokens:0,completionTokens:0,totalTokens:0},_o,Is=!0,xc="",Tl="",go=wr==="continue"?ti:"",Bo,On={id:Lt(),timestamp:Dt(),modelId:e.modelId},yo="",Ns=!1,ya=!0,ju=!1;async function Ds({controller:Nr,chunk:Lr}){Nr.enqueue(Lr),xc+=Lr.textDelta,go+=Lr.textDelta,Ns=!0,ju=Lr.textDelta.trimEnd()!==Lr.textDelta}Yr.addStream(Cc.pipeThrough(new TransformStream({async transform(Nr,Lr){var ri,Hi,pn;if(Is){let ai=Tt()-El;Is=!1,wn.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":ai}),wn.setAttributes({"ai.response.msToFirstChunk":ai}),Lr.enqueue({type:"step-start",messageId:Gr,request:bn,warnings:pr??[]})}if(Nr.type==="text-delta"&&Nr.textDelta.length===0)return;let ni=Nr.type;switch(ni){case"text-delta":{if(ve){let ai=ya&&Bi?Nr.textDelta.trimStart():Nr.textDelta;if(ai.length===0)break;ya=!1,yo+=ai;let Cs=fA(yo);Cs!=null&&(yo=Cs.suffix,await Ds({controller:Lr,chunk:{type:"text-delta",textDelta:Cs.prefix+Cs.whitespace}}))}else await Ds({controller:Lr,chunk:Nr});break}case"reasoning":{Lr.enqueue(Nr),Tl+=Nr.textDelta;break}case"tool-call":{Lr.enqueue(Nr),qa.push(Nr);break}case"tool-result":{Lr.enqueue(Nr),ur.push(Nr);break}case"response-metadata":{On={id:(ri=Nr.id)!=null?ri:On.id,timestamp:(Hi=Nr.timestamp)!=null?Hi:On.timestamp,modelId:(pn=Nr.modelId)!=null?pn:On.modelId};break}case"finish":{zn=Nr.usage,Pn=Nr.finishReason,_o=Nr.experimental_providerMetadata,Bo=Nr.logprobs;let ai=Tt()-El;wn.addEvent("ai.stream.finish"),wn.setAttributes({"ai.response.msToFinish":ai,"ai.response.avgCompletionTokensPerSecond":1e3*zn.completionTokens/ai});break}case"tool-call-streaming-start":case"tool-call-delta":{Lr.enqueue(Nr);break}case"error":{Lr.enqueue(Nr),Pn="error";break}default:{let ai=ni;throw new Error(`Unknown chunk type: ${ai}`)}}},async flush(Nr){let Lr=qa.length>0?JSON.stringify(qa):void 0,ri="done";je+1<ee&&(ve&&Pn==="length"&&qa.length===0?ri="continue":qa.length>0&&ur.length===qa.length&&(ri="tool-result")),ve&&yo.length>0&&(ri!=="continue"||wr==="continue"&&!Ns)&&(await Ds({controller:Nr,chunk:{type:"text-delta",textDelta:yo}}),yo="");try{wn.setAttributes(A_({telemetry:t,attributes:{"ai.response.finishReason":Pn,"ai.response.text":{output:()=>xc},"ai.response.toolCalls":{output:()=>Lr},"ai.response.id":On.id,"ai.response.model":On.modelId,"ai.response.timestamp":On.timestamp.toISOString(),"ai.usage.promptTokens":zn.promptTokens,"ai.usage.completionTokens":zn.completionTokens,"gen_ai.response.finish_reasons":[Pn],"gen_ai.response.id":On.id,"gen_ai.response.model":On.modelId,"gen_ai.usage.input_tokens":zn.promptTokens,"gen_ai.usage.output_tokens":zn.completionTokens}}))}catch{}finally{wn.end()}Nr.enqueue({type:"step-finish",finishReason:Pn,usage:zn,experimental_providerMetadata:_o,logprobs:Bo,request:bn,response:{...On,headers:$r==null?void 0:$r.headers},warnings:pr,isContinued:ri==="continue",messageId:Gr});let Hi=ZP(Ct,zn);if(ri==="done")Nr.enqueue({type:"finish",finishReason:Pn,usage:Hi,experimental_providerMetadata:_o,logprobs:Bo,response:{...On,headers:$r==null?void 0:$r.headers}}),Yr.closeStream();else{if(wr==="continue"){let pn=Kn[Kn.length-1];typeof pn.content=="string"?pn.content+=xc:pn.content.push({text:xc,type:"text"})}else Kn.push(...LE({text:xc,tools:D??{},toolCalls:qa,toolResults:ur,messageId:Gr,generateMessageId:it}));await an({currentStep:je+1,responseMessages:Kn,usage:Hi,stepType:ri,previousStepText:go,hasLeadingWhitespace:ju,messageId:ri==="continue"?Gr:it()})}}})))}await an({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:it()})}}).catch(qt=>{Yr.addStream(new ReadableStream({start(an){an.enqueue({type:"error",error:qt}),an.close()}})),Yr.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){let[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return k0(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"?t.enqueue(e.textDelta):e.type==="error"&&t.error(e.error)}})))}get fullStream(){return k0(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}get experimental_partialOutputStream(){if(this.output==null)throw new iA;return k0(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:r=!1}){let n="",o=new TransformStream({async transform(m,y){y.enqueue(m),m.type==="text-delta"&&(n+=m.textDelta)}}),u=new TransformStream({transform:async(m,y)=>{let T=m.type;switch(T){case"text-delta":{y.enqueue(Ic("text",m.textDelta));break}case"reasoning":{r&&y.enqueue(Ic("reasoning",m.textDelta));break}case"tool-call-streaming-start":{y.enqueue(Ic("tool_call_streaming_start",{toolCallId:m.toolCallId,toolName:m.toolName}));break}case"tool-call-delta":{y.enqueue(Ic("tool_call_delta",{toolCallId:m.toolCallId,argsTextDelta:m.argsTextDelta}));break}case"tool-call":{y.enqueue(Ic("tool_call",{toolCallId:m.toolCallId,toolName:m.toolName,args:m.args}));break}case"tool-result":{y.enqueue(Ic("tool_result",{toolCallId:m.toolCallId,result:m.result}));break}case"error":{y.enqueue(Ic("error",e(m.error)));break}case"step-start":{y.enqueue(Ic("start_step",{messageId:m.messageId}));break}case"step-finish":{y.enqueue(Ic("finish_step",{finishReason:m.finishReason,usage:t?{promptTokens:m.usage.promptTokens,completionTokens:m.usage.completionTokens}:void 0,isContinued:m.isContinued}));break}case"finish":{y.enqueue(Ic("finish_message",{finishReason:m.finishReason,usage:t?{promptTokens:m.usage.promptTokens,completionTokens:m.usage.completionTokens}:void 0}));break}default:{let D=T;throw new Error(`Unknown chunk type: ${D}`)}}}});return this.fullStream.pipeThrough(o).pipeThrough(u)}pipeDataStreamToResponse(e,{status:t,statusText:r,headers:n,data:o,getErrorMessage:u,sendUsage:m,sendReasoning:y}={}){xE({response:e,status:t,statusText:r,headers:CE(n,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:o,getErrorMessage:u,sendUsage:m,sendReasoning:y})})}pipeTextStreamToResponse(e,t){xE({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:CE(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){let t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?Y0(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning}))}toDataStreamResponse({headers:e,status:t,statusText:r,data:n,getErrorMessage:o,sendUsage:u,sendReasoning:m}={}){return new Response(this.toDataStream({data:n,getErrorMessage:o,sendUsage:u,sendReasoning:m}),{status:t,statusText:r,headers:_y(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:_y(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}};var IA="AI_NoSuchProviderError",NA=`vercel.ai.error.${IA}`,DA=Symbol.for(NA),CA;CA=DA;var xA={};U0(xA,{mergeIntoDataStream:()=>RA,toDataStream:()=>PA,toDataStreamResponse:()=>AA});function TT(e={}){let t=new TextEncoder,r="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(n,o){o.enqueue(t.encode(n)),r+=n,e.onToken&&await e.onToken(n),e.onText&&typeof n=="string"&&await e.onText(n)},async flush(){e.onCompletion&&await e.onCompletion(r),e.onFinal&&await e.onFinal(r)}})}function $0(e,t){return e.pipeThrough(new TransformStream({transform:async(r,n)=>{var o;if(typeof r=="string"){n.enqueue(r);return}if("event"in r){r.event==="on_chat_model_stream"&&FE((o=r.data)==null?void 0:o.chunk,n);return}FE(r,n)}})).pipeThrough(TT(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,n)=>{n.enqueue(Ic("text",r))}}))}function PA(e,t){return $0(e,t).pipeThrough(new TextEncoderStream)}function AA(e,t){var r;let n=$0(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),o=t==null?void 0:t.data,u=t==null?void 0:t.init,m=o?Y0(o.stream,n):n;return new Response(m,{status:(r=u==null?void 0:u.status)!=null?r:200,statusText:u==null?void 0:u.statusText,headers:_y(u==null?void 0:u.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function RA(e,t){t.dataStream.merge($0(e,t.callbacks))}function FE(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{let r=e.content;for(let n of r)n.type==="text"&&t.enqueue(n.text)}}var OA={};U0(OA,{mergeIntoDataStream:()=>LA,toDataStream:()=>kA,toDataStreamResponse:()=>MA});function q0(e,t){let r=FA();return Qw(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(n,o){o.enqueue(r(n.delta))}})).pipeThrough(TT(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,o)=>{o.enqueue(Ic("text",n))}}))}function kA(e,t){return q0(e,t).pipeThrough(new TextEncoderStream)}function MA(e,t={}){var r;let{init:n,data:o,callbacks:u}=t,m=q0(e,u).pipeThrough(new TextEncoderStream),y=o?Y0(o.stream,m):m;return new Response(y,{status:(r=n==null?void 0:n.status)!=null?r:200,statusText:n==null?void 0:n.statusText,headers:_y(n==null?void 0:n.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function LA(e,t){t.dataStream.merge(q0(e,t.callbacks))}function FA(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}var lj=15*1e3;var Wh=require("vscode");var yy="experimental_providerMetadata";function IT(e){let t=e.filter(({role:m})=>m=="user"||m=="tool"),r=e.filter(({role:m})=>m=="assistant");function n(m,{content:y}){var T;return m+(Array.isArray(y)&&((T=y[y.length-1])!=null&&T[yy])?1:0)}function o(m){let{content:y}=m;Array.isArray(y)||(y=[{type:"text",text:y}]),y[y.length-1][yy]={anthropic:{cacheControl:{type:"ephemeral"}}},m.content=y}function u(m){let{content:y}=m;Array.isArray(y)&&y[y.length-1][yy]&&delete y[y.length-1][yy]}r.reduce(n,0)||o(r.pop()),o(t.pop()),t.slice(0,-2).forEach(u)}var NT=e=>`
When responding, start straight with the answer, like you are writing a technical documentation. No confirmation, no small talk.
You are communicating with the user via tools, always try to use tool calling where appropriate.
The user does not see the tools and doesn't know what they are. Never mention tool names and never explain that you are using them.
Use question tool to collect all necessary information to better understand what the user wants if the request is ambiguous or missing something.
Use sourcecode and documents tools to understand the current project and tasks. 
Use editor tool to create and modify files.
Finish your responses with summary and followup tools.
`;function Uu(e,t={depth:2}){switch(typeof e){case"undefined":return"";case"number":return String(e);case"string":return e;case"function":return Uu(e(t),t);case"object":let r=[];return Array.isArray(e)?r=e.map(n=>Uu(n,t)).filter(n=>!!n):r=Object.entries(e).map(([n,o])=>{let u="#".repeat(t.depth),m=Uu(o,{depth:t.depth+1});return m&&`${u} ${n}

`+m}),r.join(`

`)}}function O_(e,t="- ",r="",n=`
`,o=": "){return u=>Array.isArray(e)?e.map(m=>t+Uu(m,u)+r).join(n):Object.entries(e).map(([m,y])=>t+m+o+Uu(y,u)+r).join(n)}function Dm(e,t){return r=>{let n=Uu(t,r);return n?`<${e}>
`+n+`
</${e}>`:""}}function DT(e,t){return r=>{let n=Uu(e,r);return n||t}}var UA=`
You are the AI assistant, working in VSCode editor.
You can access all content and tools in the current editor workspace.
You are proactively reading the code and configuration files to get detailed understanding of the environment.
`,jA=`
You are direct and to the point. You don't waste time with pleasantries or unnecessary context. 
Your goal is to provide accurate, practical solutions to coding problems as efficiently as possible.

You use short code snippets to illustrate your points. These snippets are always properly formatted 
and indented for readability. You explain the key parts of the code, but assume a certain level of 
programming knowledge from your audience.

You often break down your answers into steps or bullet points for clarity. You're not afraid to point out 
flaws in the original question or suggest better approaches if you see them.

You include relevant documentation links or references to support your answers, but you don't just link-drop 
without explanation. You summarize the key points and explain why they're relevant.

Your tone is professional and sometimes a bit terse. You're here to solve problems, not to make friends. 
However, you're also not rude or dismissive. If a question is unclear, you ask for clarification rather than 
making assumptions.

You're aware of best practices and potential pitfalls, so you often include warnings about edge cases or 
performance issues that might not be immediately obvious.
`,YA=`
You are a seasoned software developer with a deep understanding of core programming principles and system design. 
Your experience spans multiple domains, allowing you to approach problems from various angles.

You excel at breaking down complex requirements into manageable components and designing scalable, maintainable 
solutions. Your code is clean, well-documented, and follows best practices for readability and efficiency.

You are particularly strong in algorithmic thinking and optimization. You can analyze performance bottlenecks 
and implement effective solutions, whether it's improving time complexity or reducing resource usage.

You have a solid grasp of software architecture patterns and can adapt them to fit project needs. 
You're comfortable designing and implementing APIs, working with databases, and integrating various system components.

Testing is integral to your development process. You write comprehensive unit tests and understand 
the value of integration and end-to-end testing in ensuring robust, reliable software.

You stay current with industry trends and continuously refine your skills. However, you're pragmatic in your approach, 
focusing on proven technologies that add real value rather than chasing every new trend.

Debugging and troubleshooting are areas where you shine. You can quickly isolate issues in complex systems 
and implement effective fixes.

Lastly, you're a strong communicator. You can explain technical concepts clearly to both technical 
and non-technical stakeholders, facilitating better collaboration across teams.
`,$A=`
When designing and building complex code, your thought process typically follows these steps:

You start by thoroughly analyzing the problem domain. You break down the requirements, 
identifying the core functionalities and potential edge cases.

Next, you consider the overall architecture. You think about how different components will interact, 
data flow, and potential bottlenecks. You often sketch out high-level diagrams to visualize the system structure.

You evaluate trade-offs between different design patterns and approaches. You consider factors like scalability, 
maintainability, and performance. You try to anticipate future requirements to make the system extensible.

Before diving into implementation, you plan out the data structures and algorithms you'll use. 
You consider time and space complexity, thinking about how the solution will perform with larger datasets.

You break the problem down into smaller, manageable modules or functions. You define clear interfaces 
between these components, thinking about how they'll be tested in isolation.

As you start coding, you focus on creating a minimal viable implementation of each component. 
You write unit tests alongside the code, using test-driven development where appropriate.

You constantly refactor as you go, looking for opportunities to improve code clarity and efficiency. 
You're always thinking about how another developer would read and understand your code.

For particularly complex parts, you often step back and reconsider your approach. Sometimes you'll implement 
a quick prototype to validate a concept before fully committing to it.

Throughout the process, you document your code and decisions. You write clear comments explaining the 'why' 
behind complex logic, not just the 'what'.

As the system comes together, you start thinking about integration testing and how different components interact. 
You look for potential race conditions or unexpected behaviors in the system as a whole.

Finally, you review the entire solution, considering aspects like error handling, logging, and monitoring. 
You think about how the system will behave in production and what tools will be needed to maintain it.

This process is iterative, and you're always ready to revisit earlier decisions as new information or challenges arise. The goal is to create a robust, efficient, and maintainable solution that solves the problem at hand while being flexible enough to adapt to future needs.
`;async function CT(){return[{role:"user",content:[{type:"text",text:Uu([UA,{"Writing style":jA,"Software development experience":YA,"Coding process":$A}])}]},{role:"assistant",content:[{type:"text",text:"Agreed. I will stricktly follow the instructions."}]}]}var Cm=require("vscode");var qA=e=>N_`
    Files in the project root directory:
    <files>
        ${e.join(`
`)||"empty (no files here)"}
    </files>
`,BA=e=>N_`
    Top-level project directories: 
    <directories>
        ${e.join(`
`)||"empty (no sub-directories here)"}
    </directories>
`,zA=async()=>{if(!Cm.workspace.workspaceFolders)return[""];let e=await kS(""),t=e.filter(({isFile:n})=>n).map(({name:n})=>n),r=e.filter(({isDirectory:n})=>n).map(({name:n})=>n);return[BA(r),`

`,qA(t)]},HA=()=>N_`
    Files open in editor windows: 
    <files>
        ${Dh().map(Nv).join(`
`)}
    </files>
`,GA=()=>{var e,t,r,n;return N_`
    Current file:
    <file>
        ${Nv(Cm.Uri.file(((t=(e=Cm.window.activeTextEditor)==null?void 0:e.document)==null?void 0:t.fileName)||""))}
    </file>
    ${`

`}
    Programming language of the current file: 
    <language>
        ${(n=(r=Cm.window.activeTextEditor)==null?void 0:r.document)==null?void 0:n.languageId}
    </language>
`};function xT(){var t,r;let e=(t=Cm.window.activeTextEditor)==null?void 0:t.selection;return e&&!e.isEmpty?(r=Cm.window.activeTextEditor)==null?void 0:r.document.getText(e):""}var VA=()=>xT()&&N_`
    The selected text in the active editor is:
    <selection>
        ${xT()}
    </selection>
`;async function PT(){return[{role:"user",content:[{type:"text",text:I_(["Here is our workspace:",`

`,await zA(),`

`,HA(),`

`,GA(),`

`,VA()])}]},{role:"assistant",content:[{type:"text",text:"Ok. How can I help you?"}]}]}var po=require("vscode");async function AT(e,t=!1){let r=Vn(e),n={path:e},o=await Lf(r),u=[];return n.lines=o.split(`
`).length,n.status="ok",u.push(Dm("file_metadata",O_(n))),t||u.push(Dm("file_content",o)),Uu(u)}var bg=require("vscode");var{fs:KA}=bg.workspace;async function RT(e,t=!1){let r=Vn(e),n=[],o=[],u={path:e},m=[];for(let[y,T]of await KA.readDirectory(r))T&bg.FileType.File?o.push(y):T&bg.FileType.Directory&&n.push(y+"/");if(u["sub-directories"]=n.length,u.files=o.length,u.status="ok",m.push(Dm("directory_metadata",O_(u))),!t){let y=[].concat(n,o);m.push(DT(Dm("directory_content",y),"Directory is empty."))}return Uu(m)}var OT=require("vscode");async function kT(e,t,r,n=!1){let o=Vn(e),u={path:e,name:t},m=[];if(u.start=`Ln ${r.start.line+1}, Col ${r.start.character+1}`,u.end=`Ln ${r.end.line+1}, Col ${r.end.character+1}`,u.lines=r.start.line-r.end.line+1,m.push(Dm("symbol_metadata",O_(u))),!n){let y=await OT.workspace.openTextDocument(o),T=y.getText(r);m.push(Dm("symbol_content",T))}return Uu(m)}async function MT(e){let t=[],{request:r}=e;for(let{id:n,name:o,modelDescription:u,value:m}of r.references){let y=String(m);if(n!="vscode.implicit.viewport"){if(m instanceof po.Uri){let T=await po.workspace.fs.stat(m),D=Nv(m);T.type&po.FileType.File?y=await AT(D):T.type&po.FileType.Directory&&(y=await RT(D))}else m instanceof po.Location&&(y=await kT(Nv(m.uri),o,m.range));u&&(o+=` (${u})`),t.push({type:"text",text:y})}}for(let{name:n}of r.toolReferences){let o=po.lm.tools.find(y=>y.name==n),u=o==null?void 0:o.inputSchema;if(!u)continue;let{required:m}=u;if(n=="copilot_getChangedFiles"&&String(m)=="workspacePaths"&&po.workspace.workspaceFolders){let y=po.workspace.workspaceFolders.map(({uri:U})=>U.fsPath),T={workspacePaths:y},D=await Sy(n,T,e);t.push(...D)}else if(n=="copilot_getErrors"&&String(m)=="filePaths"){let y=Dh(),T=y.map(({path:H})=>H),D={filePaths:T},U=await Sy(n,D,e);t.push(...U)}else if(n=="copilot_testFailure"){let y=await Sy(n,{},e);t.push(...y)}else if(String(m)=="query"){let y=r.prompt,T={query:y},D=await Sy(n,T,e);t.push(...D)}}return t.length?[{role:"user",content:t},{role:"assistant",content:[{type:"text",text:"Ok. How should I proceed?"}]}]:[]}async function Sy(e,t,{request:r,stream:n,token:o}){let u=await po.lm.invokeTool(e,{input:t,toolInvocationToken:r.toolInvocationToken},o),m=[];for(let y of u.content)if(y instanceof po.LanguageModelTextPart)m.push({type:"text",text:y.value});else if(y instanceof po.LanguageModelPromptTsxPart){let{text:T,refs:D}=WA(y);m.push({type:"text",text:T}),D.forEach(U=>n.reference(U))}return m}function WA(e){let t=[],r=[];function n({text:o,children:u,references:m,lineBreakBefore:y}){y&&t.push(`
`),Array.isArray(m)&&m.forEach(({anchor:T})=>{try{let{external:D,scheme:U,authority:H,path:ne,query:pe,fragment:ce}=T;D?r.push(po.Uri.parse(D)):r.push(po.Uri.from({scheme:U,authority:H,path:ne,query:pe,fragment:ce}))}catch{}}),Array.isArray(u)?u.forEach(n):typeof o=="string"&&t.push(o)}return n(e.value.node),{text:t.join(""),refs:r}}var k_=require("vscode");var{fs:LT}=k_.workspace,FT="sourcecode",JA=`
Read and analyze source code files in the project

Commands:
- /stat: checks if the specified path exists and returns basic information about it
- /read: returns the content of a file or directory at the given path
`,ZA=M.object({command:M.enum(["stat","read"]).describe("Command"),path:M.string().describe("File or directory path")}),XA="Looking at the source files ...",QA=(e,t,r)=>`
Found ${e} directory containing ${t} sub-directories and ${r} files.
`,eR=(e,t)=>`
Found ${e} file (${t} lines).
`,tR=(e,t)=>`
<file_content path="${e}">
${t}
</file_content>
`;async function rR({command:e,path:t},{log:r,stream:n}){let o=t.split("/").pop();r.info(o,{command:e,event:`tool.${FT}.${e}`});let u=Vn(t),m=null;try{m=await LT.stat(u)}catch{return e!=="stat"&&r.warn("[sourcecode] Path does not exist - "+o,{command:e}),"Error: Path does not exist - "+t}if(m.type&k_.FileType.Directory)return await nR(e,t,u);e!=="stat"&&n.reference(yl(u));let y=await Lf(u),T=y.split(`
`),D=eR(t,T.length);return e=="read"&&(D+=tR(t,y)),D}async function nR(e,t,r){let n=[],o=[];for(let[m,y]of await LT.readDirectory(r))y&k_.FileType.File?o.push(m):y&k_.FileType.Directory&&n.push(m+"/");let u=QA(t,n.length,o.length);return e=="read"&&(u+=`
`+n.concat(o).join("/n")),u}var UT={name:FT,description:JA,parameters:ZA,execute:rR,progress:XA};var M_=require("vscode");var{fs:jT}=M_.workspace,YT="documents",aR=`
Read task-related documentation files

Commands:
- /stat: checks if the specified documentation path exists and returns basic information about it
- /read: returns the content of a documentation file or directory at the given path
`,iR=M.object({command:M.enum(["stat","read"]).describe("Command"),path:M.string().describe("File or directory path")}),oR="Looking at the available documents ...",sR=(e,t,r)=>`
Found ${e} directory containing ${t} sub-directories and ${r} files.
`,uR=(e,t)=>`
Found ${e} file (${t} lines).
`,cR=(e,t)=>`
<file_content path="${e}">
${t}
</file_content>
`;async function lR({command:e,path:t},{log:r}){let n=t.split("/").pop(),o=Vn(t),u=null;r.info(n,{command:e,event:`tool.${YT}.${e}`});try{u=await jT.stat(o)}catch{return e!=="stat"&&r.warn("[documents] Path does not exist - "+n,{command:e}),"Error: Path does not exist - "+t}if(u.type&M_.FileType.Directory)return await fR(e,t,o);let m=await Lf(o),y=m.split(`
`),T=uR(t,y.length);return e=="read"&&(T+=cR(t,m)),T}async function fR(e,t,r){let n=[],o=[];for(let[m,y]of await jT.readDirectory(r))y&M_.FileType.File?o.push(m):y&M_.FileType.Directory&&n.push(m+"/");let u=sR(t,n.length,o.length);return e=="read"&&(u+=`
`+n.concat(o).join("/n")),u}var $T={name:YT,description:aR,parameters:iR,execute:lR,progress:oR};var wy=require("vscode");var Kh=require("vscode");var vo=require("vscode");async function qT(e,t){var D,U,H;let r=e.edits.find(ne=>ne.id==t);if(!r)return;let n=new vo.WorkspaceEdit,o=yl(Vn(r.path));try{await vo.workspace.fs.stat(o)}catch{o=o.with({scheme:"untitled"})}let u=await vo.workspace.openTextDocument(o),m=u.getText().replace(/\r\n/g,`
`),y=m==r.after.replace(/\r\n/g,`
`)?r.before:r.after,T=new vo.Range(new vo.Position(0,0),new vo.Position(u.lineCount,0));n.replace(o,T,y),await vo.workspace.applyEdit(n),((H=(U=(D=vo.window.activeTextEditor)==null?void 0:D.document)==null?void 0:U.uri)==null?void 0:H.path)!=o.path&&await vo.window.showTextDocument(u),dR(r.search)}function dR(e){var T;let t=vo.window.activeTextEditor,r=t==null?void 0:t.document,n=(T=r==null?void 0:r.getText())==null?void 0:T.replace(/\r\n/g,`
`);if(!e||!t||!r)return;let o=n.indexOf(e);if(o==-1)return;let u=n.slice(0,o).split(`
`).length-1,m=e.split(`
`).length,y=new vo.Position(u,0);t.selection=new vo.Selection(y,y),t.revealRange(new vo.Range(y,new vo.Position(u+m,0)))}function BT(e,t,r,n,o,u,m){let{stream:y,shared:T}=e;if(u.startsWith(".multicoder"))return pR(e,y,o,u);let D=new Kh.MarkdownString(`

`),U=e.id,H=encodeURIComponent(JSON.stringify([u,r,U])),ne=`command:multicoder.diffView?${H}`,pe=ve=>`<span class="codicon codicon-${ve}" style="color:var(--vscode-textLink-foreground);"></span>`;D.supportThemeIcons=!0,D.isTrusted={enabledCommands:["multicoder.diffView"]},D.supportHtml=!0,D.appendMarkdown(`[${pe("diff-single")} ${n} (${u})](${ne} 'Open Diff')`),D.appendCodeblock(o,m),y.markdown(D);let ce=t=="create"?"Create":"Apply",ee=t=="create"?"create file":"apply changes";y.button({title:ce,command:"multicoder.action",arguments:[Q],tooltip:`Click to ${ee}, click again to revert`});function Q(){let ve=u.split("/").pop();e.log.info(ve,{event:"action."+ce.toLowerCase()}),qT(T,r)}}function pR(e,t,r,n){r=r.replace(/^#/gm,"##");let o=new Kh.MarkdownString(`

`);o.supportHtml=!0,o.appendMarkdown(r),t.markdown(o),t.button({title:"Edit",command:"multicoder.action",arguments:[u],tooltip:"Click to edit the document"});async function u(){let m=Vn(n),y=await Kh.workspace.openTextDocument(m),T=n.split("/").pop();Kh.window.showTextDocument(y),e.log.info(T,{event:"action.edit"})}}var HT="editor",vR=`
Create and modify source files or documents

Commands:
- /create: creates a new file with the specified content
- /insert: inserts new content before selection
- /append: adds new content after selection
- /replace: replaces selection with new content
- /update: updates the entire file

Usage:
- To add new content always use /insert or /append
- To change more than half of the file use /update
- To replace part of the file use /replace
- To delete part of the file, use /replace with empty content
- Split large edits into multiple small ones

Important:
- Selection must be unique within file, select 3 lines or more to avoid ambiguity
`,mR=`
Select exact lines including whitespace:
- For /create and /update: use empty string ("") 
- For /insert: at least 3 lines immediately following new content, no overlap
- For /append: at least 3 lines immediately preceding new content, no overlap
`,hR=M.object({command:M.enum(["create","insert","append","replace","update"]).describe("Command"),path:M.string().describe("File path"),select:M.string().describe(mR),content:M.string().describe("New content"),summary:M.string().describe("A very short (3-10 words) summary of this change")}),_R="Writing code ...";function gR(e,{command:t,path:r,summary:n}){if(e.code=="invalid_type"){let o=e.path[0];if(e.received=="undefined"){if(o=="command"&&String(n).startsWith("Create"))return{command:"create"};if(o=="command"&&String(n).startsWith("Update"))return{command:"update"};if(o=="select")return{select:""};if(o=="content")return{content:""};if(o=="summary")return{summary:`${t} ${r}`}}}}async function yR(e,t){let{path:r,command:n,select:o}=e,{shared:u}=t;if(u.phase&&!r.startsWith(".multicoder"))return"Error: cannot modify source code yet. At this point you should only work on task documents.";let{error:m}=await GT(e);if(o&&o.split(`
`).length<2&&n!="insert"&&(r.endsWith(".md")?m="Selection is too small, use the full section text":m="Selection is too small, provide at least 3-5 lines"),m)return"Tool error: "+m;let y=n=="create"?"created":"modified";return u.phase?`Document ${y}. Provide a very short summary using summary tool`:`File ${r} ${y} successfully.`}async function GT({path:e,command:t,select:r,content:n}){let o=Vn(e),u=null,m=null,y=n;try{if(await wy.workspace.fs.stat(o),t==="create")return{error:"File already exists: "+e}}catch{if(t!=="create")return{error:"File not found: "+e}}switch(t=="insert"&&n.endsWith(r)&&(n=n.replace(r,"")),t=="update"&&r&&(r=""),t){case"insert":case"append":case"replace":case"update":if(u=await wy.workspace.openTextDocument(o),m=await Lf(o),y=bR(m,r,n,u.eol,t),typeof y=="object")return y}return{document:u,before:m,after:y}}async function SR(e,t,r){let{path:n,summary:o,command:u,select:m,content:y}=e,{log:T,shared:D}=t,U=Vn(n),H=n.split("/").pop();if(D.phase&&!n.startsWith(".multicoder")){T.warn(`[workflow] Code not allowed: ${o}`,{filename:H,command:u,summary:o});return}if(r.startsWith("Error: ")||r.startsWith("Tool error: "))return;let{document:ne,before:pe,after:ce,error:ee}=await GT(e);if(ee)return;let Q=Ze=>Ze?Ze.split(`
`).length:0,ve=Q(m),Pe=Q(y);T.info(o,{filename:H,command:u,selectedLines:ve,contentLines:Pe,event:`tool.${HT}.${u}`});try{await OS(U,ce)}catch(Ze){throw T.warn("Cannot write file - "+Ze.message,{filename:H,command:u,summary:o,...Ze}),Ze}ne=await wy.workspace.openTextDocument(U);let We=ne.languageId,Ae=Mg();n.startsWith(".multicoder")||D.edits.push({id:Ae,summary:o,path:n,before:pe,after:ce,search:y}),BT(t,u,Ae,o,y||m,n,We)}function wR(e){return/^\s*\/\//.test(e)||/^\s*\/\*/.test(e)}function zT(e,t){let r=wR(e)?"":`
`;return e.endsWith(`
`)&&t.startsWith(`
`)?e+t:e.endsWith(`
`)||t.startsWith(`
`)?e+r+t:e+r+`
`+t}function bR(e,t,r,n,o){let u=e.replace(/\r\n/g,`
`);if(o=="update"&&u==r)return{error:"The new content is the same as the original file. No changes were made."};if(o=="replace"&&t==r)return{error:"The new content is the same as the selection. No changes were made."};t||(t=u),(u+`
`).endsWith(t)&&(u+=`
`),o=="insert"&&(r=zT(r,t)),o=="append"&&(r=zT(t,r));let m=u.replace(t,r);return u==m?{error:"The selected text cannot be found in the current file. Did you provide exact full consecutive lines including whitespace?"}:(n==2&&(m=m.replace(/\n/g,`\r
`)),m)}var VT={name:HT,description:vR,parameters:hR,execute:yR,finalize:SR,progress:_R,repair:gR};var KT=require("vscode");var{fs:PY}=KT.workspace,WT="filesystem",ER=`
Manage files and directories

Commands:
- /create: creates a new directory at the specified path
- /delete: deletes a file or directory at the specified path
`,TR=M.object({command:M.enum(["create","delete"]).describe("Command"),path:M.string().describe("File or directory path")}),IR="Working with files ...";async function NR({command:e,path:t},{log:r}){let n=t.split("/").pop(),o=Vn(t);return r.info(n,{command:e,event:`tool.${WT}.${e}`}),"ok"}var JT={name:WT,description:ER,parameters:TR,execute:NR,progress:IR};var ZT="question",DR=`
Ask a single focused question to collect missing information from the user.

Purpose:
- Gather specific information needed to proceed with a task
- Resolve ambiguity in user requests
- Guide user through decisions with clear options

Usage guidelines:
- Collect all necessary information step-by-step, use this tool up to 10 times if needed
- Limit choices to 3-7 options for optimal readability
- Avoid open-ended questions - provide concrete choices
- Always provide most appropriate and useful default value

Examples:
- Yes/No decisions: "Should this function handle null values?"
- Multiple choice: "Which HTTP method should this endpoint use?"
- Technology selection: "Which database type best fits these requirements?"
`,CR="The main question text to display to the user. Should be clear, specific and end with question mark.",xR="Additional explanation, background information, or guidance to help user make an informed choice.",PR="List of possible answers the user can select from. Each choice should be distinct and meaningful.",AR="When true, user can select multiple choices. When false, only single choice is allowed.",RR="Pre-selected choice(s) shown initially. Must be one of the provided choices or comma-separated list.",OR=M.object({text:M.string().describe(CR),context:M.string().max(2e3).describe(xR),choices:M.array(M.string()).describe(PR),allowMultiple:M.boolean().describe(AR),defaultValue:M.string().describe(RR)}),kR="Preparing questions ...";function MR(e,{choices:t}){if(e.code=="invalid_type"){let r=e.path[0];if(e.received=="undefined"){if(r=="allowMultiple")return{allowMultiple:!1};if(r=="defaultValue"&&Array.isArray(t)&&t.length>0)return{defaultValue:t[0]}}}}var B0=[];async function LR({text:e,context:t,choices:r,allowMultiple:n,defaultValue:o},u){let m=[],{log:y,stream:T,shared:D}=u,U=o||"No answer";for(y.info(e,{choices:r,info:t,allowMultiple:n,defaultValue:o,event:"tool."+ZT});;){if(T.markdown(FR(e,t)),n&&m.length?T.markdown(UR(m)):T.markdown(`

(`+U+`)

`),D.auto)return U;let H=jR(r,m,n),ne=await Up(u,{followups:H});if({stream:T}=u,n){if(!ne.prompt)return U=m.length?m.join(", "):U,B0.push({question:e,answer:U}),U}else return U=ne.prompt||U,B0.push({question:e,answer:U}),U;m.push(ne.prompt)}}var FR=(e,t)=>`

---
Q: **${e}**

${t}
`,UR=e=>`
${e.map(t=>`
- ${t}`)}
`;function jR(e,t,r){let n=[];return e.forEach(o=>{t.indexOf(o)==-1&&!/please/i.test(o)&&n.push({command:"",prompt:o})}),r&&n.push({command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"}),n}var XT={name:ZT,description:DR,parameters:OR,execute:LR,progress:kR,repair:MR,latest:B0};var z0="summary",YR=`
    Shows summary, explanations or walkthrough section at the end of the response or after each task step.
    Allows the user to see the progress of completing the task.
    Always use this tool at the end of each step or when the task is finished.
`,$R=`
    Using ${z0} tool reply with a short summary of what has been done for the current step or task.
`,qR=M.object({text:M.string().describe("Short walkthrough or summary of this step")}),BR=()=>({text:"Task completed"});async function zR({text:e},{log:t,stream:r}){return t.info(`${e.slice(0,60).replace(/\n/g," ")}...`,{summary:e,event:"tool."+z0}),r.markdown(`

`+e+`

`),"This is the end of the response. Use followup tool to suggest the next actions."}var QT={name:z0,description:YR,parameters:qR,execute:zR,retry:$R,fallback:BR};var H0="followups",HR=`
    Displays followup actions to the user at the end of the conversation turn.
`,GR=`
    Using ${H0} tool reply with a list of followup actions.
`,VR=M.object({actions:M.array(M.string()).describe("Short followup actions (5-10 words)")}),KR=()=>({actions:[]});function WR(e,{actions:t}){if(e.code=="invalid_type"){let r=e.path[0];if(e.received=="string"&&r=="actions")return{actions:String(t).split(`
`)}}}async function JR({actions:e},t){return t.log.info(`${e==null?void 0:e.length} options`,{actions:e,event:"tool."+H0}),t.followups=e.map(r=>({command:"",prompt:r})),"stop"}var eI={name:H0,description:HR,parameters:VR,execute:JR,retry:GR,fallback:KR,repair:WR};var G0="evaluation",ZR=`
    Reports the task evaluation results. Use this tool when requested to evaluate a task.

    Evaluate the task for 
    - clarity (ambiguity, incompleteness, imprecision),
    - complexity (functional scope, architectural scale, required skills level)
    - workload (workflow type, projected effort, budget estimate)

    Carefully choose the most appropriate level for each evaluated dimension.
`,XR=`
    Using ${G0} tool reply with an evaluation of this task for clarity, complexity and workload.
`,QR=M.number().describe(`
The ambiguity level:
    0 - n/a (not applicable)
    1 - very low
    2 - low
    3 - medium
    4 - high
    5 - very high

Ambiguity implies that something can be interpreted in multiple valid ways.
`),eO=M.number().describe(`
The incompleteness level:
    0 - n/a (not applicable)
    1 - very low
    2 - low
    3 - medium
    4 - high
    5 - very high

Incompleteness refers to missing information or parts.
`),tO=M.number().describe(`
The imprecision level:
    0 - n/a (not applicable)
    1 - very low
    2 - low
    3 - medium
    4 - high
    5 - very high

Imprecision refers to lack of exactness or accuracy.
`),rO=M.number().describe(`
The functional scope level:
    0 - n/a (not applicable)
    1 - implementation details, simple bugfix, code formatting
    2 - user story, issue, enhancement, complex bugfix
    3 - product feature, architectural refactoring
    4 - epic, application, library, subsystem
    5 - full product, platform, framework
`),nO=M.number().describe(`
The architectural scale level:
    0 - n/a (not applicable)
    1 - code level (local scope): variable naming, control flow, error handling
    2 - component level (single module): classes, functions, state management, data structures
    3 - service level (multiple modules): APIs, database models, service integrations
    4 - application level (system-wide): application architecture, system design
    5 - enterprise level (cross-system): distributed systems, cloud infrastructure, scalability
`),aO=M.number().describe(`
The required software engineering skills level:
    0 - n/a (not applicable)
    1 - junior (1 year)
    2 - mid (1-3 years)
    3 - senior (3-5 years)
    4 - staff (5-10 years)
    5 - principal (10+) years
`),iO=M.number().describe(`
The applicable workflow type:
    0 - n/a (not applicable)
    1 - single commit
    2 - pull request
    3 - sprint/iteration
    4 - small project
    5 - large project
`),oO=M.number().describe(`
The projected effort level:
    0 - n/a (not applicable)
    1 - very small (minutes)
    2 - small (hours)
    3 - medium (days)
    4 - large (weeks)
    5 - very large (months)
`),sO=M.number().describe(`
The development budget estimate:
    0 - n/a (not applicable)
    1 - very low
    2 - $20-200
    3 - $200-2000
    4 - $2000-20000
    5 - above $20000
`),uO=M.boolean().describe(`
    true if task requirements need further clarification or refinement
`),cO=M.boolean().describe(`
    true if solution is not trivial and will benefit from detailed design
`),lO=M.boolean().describe(`
    true to split the task into smaller, manageable steps
`),fO=M.object({ambiguity:QR,incompleteness:eO,imprecision:tO,functionalScope:rO,architecturalScale:nO,skillsLevel:aO,workflowType:iO,projectedEffort:oO,budgetEstimate:sO,clarifyRequirements:uO,designSolution:cO,splitIntoParts:lO}),dO=()=>({ambiguity:1,incompleteness:1,imprecision:1,functionalScope:1,architecturalScale:1,skillsLevel:1,workflowType:1,projectedEffort:1,budgetEstimate:1,clarifyRequirements:!1,designSolution:!1,splitIntoParts:!1});function pO(e,{projectedEffort:t,budgetEstimate:r}){if(e.code=="invalid_type"){let n=e.path[0];if(e.received=="undefined"&&n=="workflowType"&&(t||r))return{workflowType:t||r}}}async function vO(e,{log:t}){let r=T=>T.toFixed(1),[n,o,u]=tI(e),m=`${r(n)} ${r(o)} ${r(u)} `,y=`${e.clarifyRequirements} ${e.designSolution} ${e.splitIntoParts}`;return t.info(m+y,{uncertainty:n,complexity:o,workload:u,...e,event:"tool."+G0}),"ok"}function tI(e){let t=(e.ambiguity+e.incompleteness+e.imprecision)/3,r=(e.architecturalScale+e.functionalScope+e.skillsLevel)/3,n=(e.projectedEffort+e.workflowType+e.budgetEstimate)/3;return[t,r,n]}var rI={name:G0,description:ZR,parameters:fO,execute:vO,retry:XR,fallback:dO,repair:pO,compute:tI};function nI(e){try{return JSON.parse(e)}catch{return null}}function aI(e){return JSON.stringify(e)}function iI(e){async function t({error:r,toolCall:n}){if(Vh.isInstance(r)){let o=r.toolName.split(".");if(o.length==2){let[u,m]=o,y=mo[u],T=nI(n.args);if(y){let D={...r,event:"repair.tool"};return e.log.warn(`Tool name: ${r.toolName}`,D),"command"in y.parameters.shape&&T&&!T.command?(T.command=m,{...n,toolName:u,args:aI(T)}):{...n,toolName:u}}}return null}if(R_.isInstance(r)){let o=r.toolName,u=nI(r.toolArgs),m=r.cause,y=[];if(u&&ym.isInstance(m)){let T=m.cause;if(T instanceof bc){for(let U of T.issues){let H=mo[o];if(H!=null&&H.repair){let ne=H.repair(U,u);if(typeof ne=="object")Object.assign(u,ne);else return null}else return null;y.push(U.path.join("."))}let D={...r,event:"repair.args"};return e.log.warn(`Tool arguments: ${r.toolName}.${y.join(", ")}`,D),{...n,args:aI(u)}}}return null}return null}return t}var mO=[UT,$T,VT,JT,XT,QT,eI,rI],mo=Object.fromEntries(mO.map(e=>[e.name,hO(e)]));function hO(e){return{...e,async execute(t,r){return e.execute?e.execute(t,r.abortSignal.context):"ok"}}}var _O=`
<table><tr><td>
    <span class="codicon codicon-run-all" style="color:var(--vscode-textLink-foreground);"></span>
</td><td>
    <span  style="color:var(--vscode-textLink-foreground);">Running in automatic mode. Press the stop button to switch</span>
</td></tr></table>
`;async function sI(e,t){let{log:r,stream:n,shared:o,request:u,messages:m}=e,y="chat.next";if(m.length||(y="chat.start",e.resume=null,m.push(...await CT()),m.push(...await PT())),o.edits||(o.edits=[],o.phase="",nw()),o.auto&&(u.command=="resume"?n.markdown(`

Resuming iterrupted task

`):e.resume=null),o.auto=u.command=="auto",o.auto){let H=new Wh.MarkdownString("");H.supportHtml=!0,H.supportThemeIcons=!0,H.appendMarkdown(_O),e.stream.markdown(H)}e.interrupted=null,e.token.onCancellationRequested(async H=>{if(r.warn("Interrupted",{event:"chat.stop"}),e.interrupted=Up(e,{}),o.auto){let ne=e.interrupted,pe=await Wh.window.showInformationMessage("Stopped automatic mode task","Resume interactive","Stop");pe&&pe.startsWith("Resume")&&(e.interrupted===ne?Wh.commands.executeCommand("workbench.action.chat.open","@multicoder /resume"):await Wh.window.showInformationMessage("Chat window already in use"))}});let T=u.references.map(({id:H,name:ne})=>ne+" "+H).join(`
`),D=u.toolReferences.map(({name:H})=>H).join(`
`),U=(u.command?"/"+u.command+" ":"")+u.prompt;return r.info(U,{event:y,command:u.command,references:T,toolrefs:D}),m.push(...await MT(e)),new Promise((H,ne)=>{let pe=0,ce=ee=>r.error(new Error(ee));if(e.resolve=ee=>pe++?ce("Resolve closed promise"):H(ee),e.reject=ee=>pe++?ce("Reject closed promise"):ne(ee),e.resume){let ee=e.resume;return e.resume=null,ee(e.request)}Promise.resolve(t(e)).then(ee=>e.resolve(ee)).catch(ee=>e.reject(ee))})}function Up(e,t){return new Promise(r=>{e.resume=r,e.resolve(t)})}async function V0(e,t,r=""){let{log:n,stream:o,shared:u,model:m,messages:y}=e;Mv(e,t);let T=0,D=0,U=0,H=0,ne=0,pe=.2,ce=pe,ee=ce;function Q(ve,Pe,We={}){o.markdown(""),o.progress(`Retrying (${Pe}): ${ve}`),ee=ce+.2*Pe,n.warn(ve,{...We,count:Pe,temperature:ee,event:"retry."+Pe})}for(;;){IT(y),await e.interrupted;let ve=new AbortController,Pe=ve.signal;Pe.context=e;let We=await ET({model:m,system:NT(m),messages:y,tools:mo,temperature:ee,maxTokens:8192,maxSteps:1,abortSignal:Pe,experimental_toolCallStreaming:!0,experimental_repairToolCall:iI(e)}),Ae=!1;for await(let it of We.fullStream){if(e.token.isCancellationRequested)break;switch(it.type){case"text-delta":e.stream.markdown(it.textDelta);break;case"tool-call-streaming-start":let Ht=mo[it.toolName].progress;Ht&&(e.stream.markdown(""),e.stream.progress(Ht));break;case"error":if(Vh.isInstance(it.error)&&++T<=5){Ae=!0;let Pr=`Unknown tool ${it.error.toolName}`;Q(Pr,T,it.error);break}if(R_.isInstance(it.error)&&++T<=5){Ae=!0;let Pr=`Invalid arguments for tool ${it.error.toolName}`;Q(Pr,T,it.error);break}if(j0.isInstance(it.error)&&++T<=5){Ae=!0,Q("Tool call repair failed",T,it.error);break}let{event:xr,count:oa,message:ei}=it.error;if(xr=="retry"){Q(ei,oa,it.error),ee=ce;break}throw it.error}}if(e.interrupted){await e.interrupted;continue}let Ze=await We.response,Tt=await We.toolCalls,Dt=await We.toolResults;if(Ae)continue;T=0;let Lt="";for(let it of Dt)it.result.startsWith("Tool error: ")&&(Lt=it.result.slice(12));if(Lt)if(++D<3){Q(Lt,D);continue}else if(++U<3)Q("Tool execution error",U),ce=pe+.2*U;else throw new Error(Lt);else U=0,ce=pe;if(D=0,Ze.messages.length==1){let{role:it,content:Ht}=Ze.messages[0];if(it=="assistant"&&Array.isArray(Ht)&&Ht.length==1){let xr=Ht[0];if(xr.type=="text"&&xr.text===""&&++H<=5){Q("Empty response",H),await oI(5*H);continue}}}H=0,ee=ce;for(let{toolName:it,args:Ht,result:xr}of Dt){let oa=mo[it];oa!=null&&oa.finalize&&await oa.finalize(Ht,e,xr)}if(y.push(...Ze.messages),Tt.length){ne=0;for(let it of Tt)if(it.toolName==r)return it.args}else if(r){let it=mo[r];if(++ne>3){if(it.fallback)return it.fallback();throw new Error(`Unable to call ${r} tool`)}Q("Unexpected stop",ne,{name:r}),await oI(5*ne),y.push({role:"user",content:it.retry||`Reply using ${r} tool`})}else return}}async function Ts(e,t,r,n=""){return n&&(e.stream.markdown(""),e.stream.progress(n)),V0(e,r,t.name)}function Yf(e){let t=e.messages.concat();return{restore(){e.messages.length=0,e.messages.push(...t)}}}function Mv(e,t,r=""){let n=e.messages;if(!t&&r){n.push({role:"assistant",content:r});return}let o=n.pop();if(o.role=="system"||o.role=="assistant")n.push(o,{role:"user",content:[{type:"text",text:t||"?"}]});else if(o.role=="tool"){let u=o.content.slice();u.push({...u.pop(),result:t}),n.push({role:"tool",content:u})}else if(o.role=="user"){let{content:u}=o;u=Array.isArray(u)?u.slice():[{type:"text",text:u}],u.push({type:"text",text:t}),n.push({role:"user",content:u})}else throw new Error("Unsupported prompt structure");r&&n.push({role:"assistant",content:[{type:"text",text:r}]})}async function oI(e){return new Promise(t=>setTimeout(t,e*1e3))}var{evaluation:K0}=mo,gO=()=>`
    Evaluate the task and reply using ${K0.name} tool, taking into account the included documents (if any)
`,L_={clarify:"Requirements",design:"Solution design",plan:"Planning"};async function Lv(e,t=0,r=0,n=0){switch(e.request.command){case"chat":return"";case"spec":return"spec";case"design":return"design";case"plan":return"plan"}let o=Yf(e),u=await Ts(e,K0,gO(),"Deciding next steps...");e.stream.markdown(""),o.restore();let[m,y,T]=K0.compute(u),D="implement";return u.architecturalScale==0&&!t?"":(u.splitIntoParts&&t<3&&(D="plan"),u.designSolution&&!n&&(D="design"),u.clarifyRequirements&&!r&&!n&&!t&&(D="spec"),!n&&y>2.5&&D!="spec"&&(D="design"),T>2&&D=="implement"&&t<1&&(D="plan"),D)}var dh=require("vscode");var{fs:cI}=dh.workspace,yO=(e,t)=>`<document path="${t}">
${e}
</document>`;async function jp(e,t){for(let[r,n]of await cI.readDirectory(Vn(t)))if(n&dh.FileType.File){let o=t+"/"+r,u=await Lf(Vn(o));Mv(e,yO(u,o))}}async function lI(e){let t=Vn(e+"/implementation_plan.md");try{if(!((await cI.stat(t)).type&dh.FileType.File))return null}catch{return null}let r=await dh.commands.executeCommand("vscode.executeDocumentSymbolProvider",t);if(!r||r.length===0)return null;let n=await dh.workspace.openTextDocument(t),o=r[0],u=uI(o.name),m=o.children.map(({name:y,range:T})=>({header:uI(y),content:n.getText(T).slice(y.length).trim()}));return{title:u,items:m}}function uI(e){return e=e.replace(/^#+\s+/,""),e=e.replace(/^Step \d+[\.:]*\s+/,""),e=e.replace(/^\d+[\.:]+\s+/,""),e}var{editor:SO,question:wO,summary:by,followups:fI}=mo,bO=e=>`
    Use ${SO.name} tool to create requirements document in the ${e}/ directory.
    Clarify the request, removing any ambiguities or omissions.
    Use ${wO.name} tool to obtain the missing information.
    For the existing project, include implied requirements derived from the project configuration and context.
    Focus strictly on the requirements - DO NOT try to design the solution, define data structures or write some code at this point.
    Adjust the content and structure according to the task complexity (should very short and simple for trivial tasks).
    Produce a minimal, but complete document, do not leave any open questions for the future.
    Use a very dense, concise writing style.
    Provide a short summary using ${by.name} tool.
`,EO=e=>`
    Make the following changes in the requirement document(s):
    <changes>
      ${e}
    </changes>
    Modify the document(s), then deliver a very short summary using ${by.name} tool.
`,TO=()=>`
    Carefully review the requirements document to find any missing elements.
    Add or correct any significant items and remove anything that is not strictly necessary.
    Focus strictly on the requirements - DO NOT try to design the solution, define data structures or write some code at this point.
`,IO=()=>`
    Suggest possible changes which may make the requirements more clear, precise and easy to understand. 
    Include optional elements, alternative approaches or high-level improvements.
    Offer them as followup actions using ${fI.name} tool.
    Only include the actions which improve the content of the requirement specification document(s).
`;async function dI(e,t,r){let{shared:n}=e,o=Yf(e),u="";for(n.phase="spec",await jp(e,r),await Ts(e,by,bO(r),"Creating requirements spec...");;){let m=[];if(!n.auto){let{actions:U}=await Ts(e,fI,IO());m=U.map(H=>({command:"",prompt:H,label:H}))}if(o.restore(),await jp(e,r),u=await Lv(e,t,1),n.auto)break;let y=(L_[u]||"implementation").toLowerCase();m.push({command:"",prompt:"i",label:"\u2B6E\xA0 review and improve"}),m.push({command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"}),m.push({command:"",prompt:"",label:`\u25B7\xA0 next step - ${y} (Enter)`});let T=await Up(e,{followups:m});if(T.command=="auto"||!T.prompt&&!T.command)break;let D=T.prompt=="i"?TO():T.prompt;await Ts(e,by,EO(D),"Updating requirements...")}return n.phase="",u}var{editor:NO,summary:Ey,followups:pI}=mo,DO=e=>`
    Use ${NO.name} tool to create solution design document(s) in the ${e}/ directory.
    Analyze the current project, do the research and design the solution.
    Your goal is to find the most simple solution, very easy to understand and maintain. 
    Only include the features which are explicitely required. Skip anything that can be added at a later stage.
    Adjust the content and structure of the spec according to the task complexity (should very short and simple for trivial tasks).
    Apply a very dense, concise writing style.
    Provide a short specification summary using ${Ey.name} tool.
`,CO=e=>`
    Make the following changes in the solution design document(s):
    <changes>
      ${e}
    </changes>
    Modify the document(s), then deliver a very short summary using ${Ey.name} tool.
`,xO=()=>`
    Carefully review the design document(s) to find any missing elements.
    Add or correct any significant items and remove anything that is not strictly necessary.
    Focus strictly on the solution design - DO NOT try to write code, DO NOT make step-by-step plan at this point.
`,PO=()=>`
    Suggest possible changes which may make the solution design more clear, precise and easy to understand. 
    Include optional elements, alternative solutions or high-level improvements.
    Offer them as followup actions using ${pI.name} tool.
    Only include the actions which improve the content of the solution design document(s).
`;async function vI(e,t,r){let{shared:n}=e,o=Yf(e),u="";for(n.phase="design",await jp(e,r),await Ts(e,Ey,DO(r),"Designing solution...");;){let m=[];if(!n.auto){let{actions:U}=await Ts(e,pI,PO());m=U.map(H=>({command:"",prompt:H,label:H}))}if(o.restore(),await jp(e,r),u=await Lv(e,t,1,1),n.auto)break;let y=(L_[u]||"implementation").toLowerCase();m.push({command:"",prompt:"i",label:"\u2B6E\xA0 review and improve"}),m.push({command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"}),m.push({command:"",prompt:"",label:`\u25B7\xA0 next step - ${y} (Enter)`});let T=await Up(e,{followups:m});if(T.command=="auto"||!T.prompt&&!T.command)break;let D=T.prompt=="i"?xO():T.prompt;await Ts(e,Ey,CO(D),"Updating design...")}return n.phase="",u}var{editor:AO,summary:Ty,followups:mI}=mo,RO=e=>`
    Use ${AO.name} tool to create ${e} file containing the detailed implementation plan for this task.
    Split the task into smaller, more manageable steps and specify what should be done at each step.
    Strictly follow the requirements and design documents if available. 
    Only plan for elements and features which are explicitely included in the specs and design.
    Take into account the changes already made in the previous tasks.
    Carefully think through all steps and mentally verify the proposed implementation.
    Follow KISS, YAGNI and SOLID principles, focus on simplicity above all other things.
    This plan is for an implementation by an AI coding agent, it must exclude any human activities (meetings, peer review, manual testing etc)
    Only use the capabilities and the information which you as an AI coding agent have explicit access to as part of this project.
    The document should contain a title and multiple sections (linear structure, no nested sub-sections)
    Each section represents one step of the plan and consists of a header and a step description.
    If the amount of work is very small, describe it as one single step (title with plain text, no section heading).
    Use a very dense, concise writing style.
    Provide a short summary using ${Ty.name} tool.
`,OO=e=>`
    Make the following changes in the implementation plan:
    <changes>
      ${e}
    </changes>
    Modify the document(s), then deliver a very short summary using ${Ty.name} tool.
`,kO=()=>`
    Carefully analyse each section of the plan to identify any inconsistencies or logical errors. 
    Check for edge cases, cross-dependencies and anything, that can affect successful implementation.
`,MO=()=>`
    Suggest possible changes which will make the implementation plan more clear, precise and easy to understand. 
    Include optional elements, alternative implementations or high-level improvements.
    Offer them as followup actions using ${mI.name} tool.
    Only include the actions which improve the content of the implementation plan.
`;async function hI(e,t,r){let{shared:n}=e,o=Yf(e),u=r+"/implementation_plan.md",m="";for(n.phase="plan",await jp(e,r),await Ts(e,Ty,RO(u),"Planning..."),e.shared.phase="plan";;){let y=[];if(!n.auto){let{actions:H}=await Ts(e,mI,MO());y=H.map(ne=>({command:"",prompt:ne,label:ne}))}if(o.restore(),await jp(e,r),m=await Lv(e,t,1,1),n.auto)break;let T=(L_[m]||"implementation").toLowerCase();y.push({command:"",prompt:"i",label:"\u2B6E\xA0 review and improve"}),y.push({command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"}),y.push({command:"",prompt:"",label:"\u25B7\xA0 next step - implementation (Enter)"});let D=await Up(e,{followups:y});if(o.restore(),D.command=="auto"||!D.prompt&&!D.command)break;let U=D.prompt=="i"?kO():D.prompt;await Ts(e,Ty,OO(U),"Updating planning...")}return n.phase="","implement"}var bI=require("vscode");var $f=require("vscode");function xm(){}xm.prototype={diff:function(t,r){var n,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=o.callback;typeof o=="function"&&(u=o,o={}),this.options=o;var m=this;function y(Ae){return u?(setTimeout(function(){u(void 0,Ae)},0),!0):Ae}t=this.castInput(t),r=this.castInput(r),t=this.removeEmpty(this.tokenize(t)),r=this.removeEmpty(this.tokenize(r));var T=r.length,D=t.length,U=1,H=T+D;o.maxEditLength&&(H=Math.min(H,o.maxEditLength));var ne=(n=o.timeout)!==null&&n!==void 0?n:1/0,pe=Date.now()+ne,ce=[{oldPos:-1,lastComponent:void 0}],ee=this.extractCommon(ce[0],r,t,0);if(ce[0].oldPos+1>=D&&ee+1>=T)return y([{value:this.join(r),count:r.length}]);var Q=-1/0,ve=1/0;function Pe(){for(var Ae=Math.max(Q,-U);Ae<=Math.min(ve,U);Ae+=2){var Ze=void 0,Tt=ce[Ae-1],Dt=ce[Ae+1];Tt&&(ce[Ae-1]=void 0);var Lt=!1;if(Dt){var it=Dt.oldPos-Ae;Lt=Dt&&0<=it&&it<T}var Ht=Tt&&Tt.oldPos+1<D;if(!Lt&&!Ht){ce[Ae]=void 0;continue}if(!Ht||Lt&&Tt.oldPos+1<Dt.oldPos?Ze=m.addToPath(Dt,!0,void 0,0):Ze=m.addToPath(Tt,void 0,!0,1),ee=m.extractCommon(Ze,r,t,Ae),Ze.oldPos+1>=D&&ee+1>=T)return y(LO(m,Ze.lastComponent,r,t,m.useLongestToken));ce[Ae]=Ze,Ze.oldPos+1>=D&&(ve=Math.min(ve,Ae-1)),ee+1>=T&&(Q=Math.max(Q,Ae+1))}U++}if(u)(function Ae(){setTimeout(function(){if(U>H||Date.now()>pe)return u();Pe()||Ae()},0)})();else for(;U<=H&&Date.now()<=pe;){var We=Pe();if(We)return We}},addToPath:function(t,r,n,o){var u=t.lastComponent;return u&&u.added===r&&u.removed===n?{oldPos:t.oldPos+o,lastComponent:{count:u.count+1,added:r,removed:n,previousComponent:u.previousComponent}}:{oldPos:t.oldPos+o,lastComponent:{count:1,added:r,removed:n,previousComponent:u}}},extractCommon:function(t,r,n,o){for(var u=r.length,m=n.length,y=t.oldPos,T=y-o,D=0;T+1<u&&y+1<m&&this.equals(r[T+1],n[y+1]);)T++,y++,D++;return D&&(t.lastComponent={count:D,previousComponent:t.lastComponent}),t.oldPos=y,T},equals:function(t,r){return this.options.comparator?this.options.comparator(t,r):t===r||this.options.ignoreCase&&t.toLowerCase()===r.toLowerCase()},removeEmpty:function(t){for(var r=[],n=0;n<t.length;n++)t[n]&&r.push(t[n]);return r},castInput:function(t){return t},tokenize:function(t){return t.split("")},join:function(t){return t.join("")}};function LO(e,t,r,n,o){for(var u=[],m;t;)u.push(t),m=t.previousComponent,delete t.previousComponent,t=m;u.reverse();for(var y=0,T=u.length,D=0,U=0;y<T;y++){var H=u[y];if(H.removed){if(H.value=e.join(n.slice(U,U+H.count)),U+=H.count,y&&u[y-1].added){var pe=u[y-1];u[y-1]=u[y],u[y]=pe}}else{if(!H.added&&o){var ne=r.slice(D,D+H.count);ne=ne.map(function(ee,Q){var ve=n[U+Q];return ve.length>ee.length?ve:ee}),H.value=e.join(ne)}else H.value=e.join(r.slice(D,D+H.count));D+=H.count,H.added||(U+=H.count)}}var ce=u[T-1];return T>1&&typeof ce.value=="string"&&(ce.added||ce.removed)&&e.equals("",ce.value)&&(u[T-2].value+=ce.value,u.pop()),u}var A$=new xm;var _I=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,gI=/\S/,yI=new xm;yI.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!gI.test(e)&&!gI.test(t)};yI.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),r=0;r<t.length-1;r++)!t[r+1]&&t[r+2]&&_I.test(t[r])&&_I.test(t[r+2])&&(t[r]+=t[r+2],t.splice(r+1,2),r--);return t};var Z0=new xm;Z0.tokenize=function(e){this.options.stripTrailingCr&&(e=e.replace(/\r\n/g,`
`));var t=[],r=e.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var n=0;n<r.length;n++){var o=r[n];n%2&&!this.options.newlineIsToken?t[t.length-1]+=o:(this.options.ignoreWhitespace&&(o=o.trim()),t.push(o))}return t};function SI(e,t,r){return Z0.diff(e,t,r)}var FO=new xm;FO.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var UO=new xm;UO.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function Iy(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Iy=function(t){return typeof t}:Iy=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iy(e)}var jO=Object.prototype.toString,Eg=new xm;Eg.useLongestToken=!0;Eg.tokenize=Z0.tokenize;Eg.castInput=function(e){var t=this.options,r=t.undefinedReplacement,n=t.stringifyReplacer,o=n===void 0?function(u,m){return typeof m>"u"?r:m}:n;return typeof e=="string"?e:JSON.stringify(W0(e,null,null,o),o,"  ")};Eg.equals=function(e,t){return xm.prototype.equals.call(Eg,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function W0(e,t,r,n,o){t=t||[],r=r||[],n&&(e=n(o,e));var u;for(u=0;u<t.length;u+=1)if(t[u]===e)return r[u];var m;if(jO.call(e)==="[object Array]"){for(t.push(e),m=new Array(e.length),r.push(m),u=0;u<e.length;u+=1)m[u]=W0(e[u],t,r,n,o);return t.pop(),r.pop(),m}if(e&&e.toJSON&&(e=e.toJSON()),Iy(e)==="object"&&e!==null){t.push(e),m={},r.push(m);var y=[],T;for(T in e)e.hasOwnProperty(T)&&y.push(T);for(y.sort(),u=0;u<y.length;u+=1)T=y[u],m[T]=W0(e[T],t,r,n,T);t.pop(),r.pop()}else m=e;return m}var J0=new xm;J0.tokenize=function(e){return e.slice()};J0.join=J0.removeEmpty=function(e){return e};var{summary:Z$}=mo,{fs:X$}=$f.workspace;async function wI(e,t,r){let n=new $f.MarkdownString(`

`),o=(...H)=>`command:multicoder.diffView?${encodeURIComponent(JSON.stringify(H))}`,u=H=>`<span class="codicon codicon-${H}" style="color:var(--vscode-foreground);"></span>`;n.supportThemeIcons=!0,n.isTrusted={enabledCommands:["multicoder.diffView"]},n.supportHtml=!0,n.appendMarkdown(`<h3>${u("check")} ${r}</h3>

`),t.forEach(({summary:H,path:ne,id:pe})=>{n.appendMarkdown(`- [${H}](${o(ne,pe,e.id)} 'Open Diff')
`)}),n.appendMarkdown(`

`),e.stream.markdown(n),e.stream.button({title:"Apply All",command:"multicoder.action",arguments:[U],tooltip:"Shows confirmation panel (refactor preview)"});let m=new Set(t.map(({path:H})=>H)),y=Dh(),T=new Map;async function D(H){try{return await Lf(H)}catch{return""}}for(let H of m.values()){let ne="",pe="",ce=Vn(H),ee=yl(ce);y.find(Q=>Q.path===ee.path)?ne=(await $f.workspace.openTextDocument(ee)).getText():ne=await D(ee),pe=await D(ce),T.set(H,{before:ne,after:pe})}async function U(){let H=new $f.WorkspaceEdit;for(let ne of m.values()){let{before:pe,after:ce}=T.get(ne)||{},ee=yl(Vn(ne));pe||(ee=ee.with({scheme:"untitled"}));let Q=await $f.workspace.openTextDocument(ee),ve=Q.getText(),Pe=ce;ve!==Pe&&YO(H,ee,ve,Pe,!0)}await $f.workspace.applyEdit(H),e.log.info(r,{event:"action.all"})}}function YO(e,t,r,n,o=!1,u=""){let m=SI(r,n,{ignoreWhitespace:!1}),y=0,T={needsConfirmation:o,label:u};for(let D=0;D<m.length;D++){let U=m[D];if(U.removed){let H=new $f.Range(y,0,y+U.count,0),ne=m[++D];ne.added?e.replace(t,H,ne.value,T):(e.delete(t,H,T),y+=(ne==null?void 0:ne.count)||0)}else U.added&&(e.insert(t,new $f.Position(y,0),U.value,T),y-=U.count);y+=U.count}}var{summary:Tg}=mo,$O=()=>`
    Implement the task, then deliver the summary using ${Tg.name} tool.
`,qO=e=>`
    We have now implemented all the steps of the plan:
    <implemented>
    ${e.title}
    </implemented>
    Deliver the summary of this work using ${Tg.name} tool.
`,BO=(e,t,r,n)=>`Step ${e+1} (${t}) is now completed.

${r}

${n.length?"Completed changes:":""}
${n.map(({summary:o,path:u})=>`- ${o} ( ${u} )`).join(`
`)}
`,zO=(e,t)=>`We will now work on the step ${t+1}:

## ${e.header}

${e.content}
`,HO=(e,t,r)=>`
<table><tr><th> $(list-tree) ${e} (${t+1}/${r})</th></tr></table>
`;async function EI(e,t,r,n){let o=null,u=await lI(n),m=e.shared.edits.length;if(await jp(e,n),!u||u.items.length==1)o=await Ts(e,Tg,$O());else{Mv(e,"",`Do you want me to work on ${u.title}?`);for(let y=0;y<u.items.length;y++){let T=Yf(e),D=u.items[y],U=D.header.replace(/^[\d\.\s]+/,""),H=e.shared.edits.length,ne=new bI.MarkdownString("");ne.supportHtml=!0,ne.supportThemeIcons=!0,ne.appendMarkdown(HO(U,y,u.items.length)),e.stream.markdown(ne),Mv(e,zO(D,y));let pe=await Lv(e,r+1,1),ce=await X0(e,pe,r+1,n+"/"+(y+1),U);T.restore();let ee=e.shared.edits.slice(H);Mv(e,BO(y,U,ce.text,ee))}o=await Ts(e,Tg,qO(u))}if(e.shared.auto&&r)return o;for(;;){let y=e.shared.edits.slice(m);if(y.length>1&&await wI(e,y,t||(u==null?void 0:u.title)||"Task completed"),!r)return o;let D=await Up(e,{followups:[{command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"},{command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"}]});if(D.command=="auto"||!D.command&&!D.prompt)return o;m=e.shared.edits.length,await Ts(e,Tg,D.prompt)}}var GO=".multicoder/task";async function X0(e,t,r=0,n=GO,o=""){let u=Yf(e);for(;;){if(u.restore(),e.shared.phase="",!t)return{};if(t=="spec"){t=await dI(e,r,n);continue}if(t=="design"){t=await vI(e,r,n);continue}if(t=="plan"){t=await hI(e,r,n);continue}return await EI(e,o,r,n)}}var VO=e=>`We have a new request:
<request>
${e}
</request>
`;async function TI(e){let t=e.request.prompt,r=Yf(e);Mv(e,VO(t));let n=await Lv(e);n?(await X0(e,n),Mv(e,""," ")):(r.restore(),await V0(e,t))}var NI=require("vscode"),KO=()=>`
Multicoder can work with LLM models provided by **GitHub Copilot** (default configuration) or 
send requests directly to the core provider APIs (**Anthropic**, **OpenAI**).

If you have your own API key and want to use it instead of the Github models, select 'Core Providers' in the Model Provider dropdown (settings panel)
and set your API key(s) using the buttons below.

`;async function II(e,t){var n;let r=await e.ext.secrets.get(t)||((n=process==null?void 0:process.env)==null?void 0:n[t]);return r&&r.slice(0,12)+"..."+r.slice(-4)}async function Q0(e){let{log:t,stream:r}=e;NI.commands.executeCommand("workbench.action.openSettings","@ext:multicoder.multicoder"),t.info("options",{event:"options"}),r.markdown(KO());let n=await II(e,"ANTHROPIC_API_KEY");r.markdown(`Anthropic API key: ${n}`),r.button({command:"multicoder.storeApiKey",title:"Set Anthropic key",arguments:["ANTHROPIC_API_KEY","Anthropic API key"]}),r.markdown(`

`);let o=await II(e,"OPENAI_API_KEY");r.markdown(`OpenAI API key: ${o}`),r.button({command:"multicoder.storeApiKey",title:"Set OpenAI key",arguments:["OPENAI_API_KEY","OpenAI API key"]})}var DI,CI;async function WO(e){var H,ne;let{request:t,ext:r}=e,n=t.model.id,o=Fv.workspace.getConfiguration("multicoder"),u=o.get("modelProvider");if(n==DI&&u==CI&&e.model)return;DI=n,CI=u;let m=t.model.family;if(m.startsWith("o1")&&(m="gpt-4o"),u=="default"&&(u="copilot"),u=="copilot"){e.model=_0({id:m,provider:"copilot",apiKey:""});return}if(u=="auto"&&(u=(H=y0.find(pe=>pe.family==m))==null?void 0:H.provider,!u))throw new Error("Cannot find model: "+m);let y=xb.find(pe=>pe.id==u),T=y0.find(pe=>pe.provider==u&&pe.family==m),{envKeyName:D}=y,U=await r.secrets.get(D)||((ne=process==null?void 0:process.env)==null?void 0:ne[D]);if(!U){await Q0(e);return}e.model=_0({...T,apiKey:U})}function JO({history:e}){for(let t=e.length-1;t>=0;t--){let r=e[t];if(r instanceof Fv.ChatResponseTurn){let{id:n,messages:o}=r.result.metadata||{};if(n)return[n,o]}}return[]}function xI(e){let{ext:t,log:r,recent:n}=e,o=Fv.chat.createChatParticipant("multicoder",async(U,H,ne,pe)=>{let[ce=Mg(),ee]=JO(H),Q=n.get(ce);if(!ee&&H.history.length){let ve=H.history[0];Q=n.get(ve.prompt)}ee=ee||[],Q||(Q={id:ce,messages:ee,shared:{},...e,request:{},chat:{},stream:{}},Q.log={...e.log,context:Q},n.set(ce,Q)),ce=Q.id,Object.assign(Q,{token:pe}),Object.assign(Q.request,U),Object.assign(Q.chat,H),Object.assign(Q.stream,ne),Q.followups=[],H.history.length||n.set(U.prompt,Q),D(Q.request);try{if(await WO(Q),!Q.model)return;if(U.command=="options")return await Q0(Q),{metadata:{id:ce,messages:ee}};let ve=await sI(Q,TI)||{};return ve.id=ce,ve.messages=Q.messages,ve.followups??(ve.followups=Q.followups),{metadata:ve}}catch(ve){throw r.error(ve),Q.model=null,ve}});o.iconPath=Fv.Uri.joinPath(t.extensionUri,"resources","multicoder.png"),o.onDidReceiveFeedback(({kind:U})=>{r.info(U?"Good":"Bad",{event:"feedback"})});let u=t.extension.packageJSON.contributes.chatParticipants[0].commands,m=u.filter(({when:U})=>U==null?void 0:U.startsWith("!")).map(({name:U})=>U),y=[...m,"resume"];o.followupProvider={provideFollowups(U){var H;return T(U.metadata?U.metadata.commands:y),((H=U.metadata)==null?void 0:H.followups)||[]}};function T(U){for(let{name:H,when:ne}of u){let pe=!!U&&U.includes(H)!=ne.startsWith("!");Fv.commands.executeCommand("setContext",ne.replace("!",""),pe)}}function D(U){!U.command&&u.find(({name:H})=>"/"+H==U.prompt)&&(r.warn("Command not processed: "+U.prompt),U.command=U.prompt.slice(1),U.prompt="")}}function ZO(e){let t={ext:e,config:PI.workspace.getConfiguration("multicoder"),log:null,telemetry:null,recent:new Map};XS(t),ew(t),rw(t),sw(t),xI(t)}function XO(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

@microsoft/1ds-core-js/dist/es5/ms.core.js:
  (*!
   * 1DS JS SDK Core, 4.3.4
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.5 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.3
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

@microsoft/1ds-post-js/dist/es5/ms.post.js:
  (*!
   * 1DS JS SDK POST plugin, 4.3.4
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.5 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.3
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.4
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.5 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.4
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.5 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.3
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)
*/
//# sourceMappingURL=extension.js.map
