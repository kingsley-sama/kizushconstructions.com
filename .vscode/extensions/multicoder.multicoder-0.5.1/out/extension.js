var tx=Object.create;var Ly=Object.defineProperty;var rx=Object.getOwnPropertyDescriptor;var nx=Object.getOwnPropertyNames;var ix=Object.getPrototypeOf,ax=Object.prototype.hasOwnProperty;var ox=(t,e)=>()=>(t&&(e=t(t=0)),e);var an=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Yw=(t,e)=>{for(var r in e)Ly(t,r,{get:e[r],enumerable:!0})},cE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of nx(e))!ax.call(t,i)&&i!==r&&Ly(t,i,{get:()=>e[i],enumerable:!(n=rx(e,i))||n.enumerable});return t};var q_=(t,e,r)=>(r=t!=null?tx(ix(t)):{},cE(e||!t||!t.__esModule?Ly(r,"default",{value:t,enumerable:!0}):r,t)),lE=t=>cE(Ly({},"__esModule",{value:!0}),t);var Ph=an(My=>{"use strict";Object.defineProperty(My,"__esModule",{value:!0});My.constants=void 0;My.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_SYMLINK:2097152,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4}});var Uy=an(H_=>{"use strict";Object.defineProperty(H_,"__esModule",{value:!0});H_.Stats=void 0;var cx=Ph(),{S_IFMT:lx,S_IFDIR:fx,S_IFREG:dx,S_IFBLK:px,S_IFCHR:vx,S_IFLNK:mx,S_IFIFO:hx,S_IFSOCK:gx}=cx.constants,Fy=class t{static build(e,r=!1){let n=new t,{uid:i,gid:a,atime:c,mtime:g,ctime:_}=e,b=r?j=>BigInt(j):j=>j;n.uid=b(i),n.gid=b(a),n.rdev=b(e.rdev),n.blksize=b(4096),n.ino=b(e.ino),n.size=b(e.getSize()),n.blocks=b(1),n.atime=c,n.mtime=g,n.ctime=_,n.birthtime=_,n.atimeMs=b(c.getTime()),n.mtimeMs=b(g.getTime());let C=b(_.getTime());if(n.ctimeMs=C,n.birthtimeMs=C,r){n.atimeNs=BigInt(c.getTime())*BigInt(1e6),n.mtimeNs=BigInt(g.getTime())*BigInt(1e6);let j=BigInt(_.getTime())*BigInt(1e6);n.ctimeNs=j,n.birthtimeNs=j}return n.dev=b(0),n.mode=b(e.mode),n.nlink=b(e.nlink),n}_checkModeProperty(e){return(Number(this.mode)&lx)===e}isDirectory(){return this._checkModeProperty(fx)}isFile(){return this._checkModeProperty(dx)}isBlockDevice(){return this._checkModeProperty(px)}isCharacterDevice(){return this._checkModeProperty(vx)}isSymbolicLink(){return this._checkModeProperty(mx)}isFIFO(){return this._checkModeProperty(hx)}isSocket(){return this._checkModeProperty(gx)}};H_.Stats=Fy;H_.default=Fy});var t_=an(kh=>{"use strict";Object.defineProperty(kh,"__esModule",{value:!0});kh.bufferFrom=kh.bufferAllocUnsafe=kh.Buffer=void 0;var jy=require("buffer");Object.defineProperty(kh,"Buffer",{enumerable:!0,get:function(){return jy.Buffer}});function fE(t,...e){return new jy.Buffer(t,...e)}var _x=jy.Buffer.allocUnsafe||fE;kh.bufferAllocUnsafe=_x;var yx=jy.Buffer.from||fE;kh.bufferFrom=yx});var Vw=an(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});Bl.AssertionError=Bl.RangeError=Bl.TypeError=Bl.Error=void 0;Bl.message=vE;Bl.E=It;var Lh=require("assert"),Bw=require("util"),dE=typeof Symbol>"u"?"_kCode":Symbol("code"),pE={};function Hw(t){return class extends t{constructor(r,...n){super(vE(r,n)),this.code=r,this[dE]=r,this.name=`${super.name} [${this[dE]}]`}}}var $y=typeof globalThis<"u"?globalThis:global,qw=class extends $y.Error{constructor(e){if(typeof e!="object"||e===null)throw new Bl.TypeError("ERR_INVALID_ARG_TYPE","options","object");e.message?super(e.message):super(`${Bw.inspect(e.actual).slice(0,128)} ${e.operator} ${Bw.inspect(e.expected).slice(0,128)}`),this.generatedMessage=!e.message,this.name="AssertionError [ERR_ASSERTION]",this.code="ERR_ASSERTION",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,Bl.Error.captureStackTrace(this,e.stackStartFunction)}};Bl.AssertionError=qw;function vE(t,e){Lh.strictEqual(typeof t,"string");let r=pE[t];Lh(r,`An invalid error message key was used: ${t}.`);let n;if(typeof r=="function")n=r;else{if(n=Bw.format,e===void 0||e.length===0)return r;e.unshift(r)}return String(n.apply(null,e))}function It(t,e){pE[t]=typeof e=="function"?e:String(e)}Bl.Error=Hw($y.Error);Bl.TypeError=Hw($y.TypeError);Bl.RangeError=Hw($y.RangeError);It("ERR_ARG_NOT_ITERABLE","%s must be iterable");It("ERR_ASSERTION","%s");It("ERR_BUFFER_OUT_OF_BOUNDS",bx);It("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received");It("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s");It("ERR_CPU_USAGE","Unable to obtain cpu usage %s");It("ERR_DNS_SET_SERVERS_FAILED",(t,e)=>`c-ares failed to set servers: "${t}" [${e}]`);It("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value");It("ERR_ENCODING_NOT_SUPPORTED",t=>`The "${t}" encoding is not supported`);It("ERR_ENCODING_INVALID_ENCODED_DATA",t=>`The encoded data was not valid for encoding ${t}`);It("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client");It("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s");It("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding");It("ERR_INDEX_OUT_OF_RANGE","Index out of range");It("ERR_INVALID_ARG_TYPE",wx);It("ERR_INVALID_ARRAY_LENGTH",(t,e,r)=>(Lh.strictEqual(typeof r,"number"),`The array "${t}" (length ${r}) must be of length ${e}.`));It("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s");It("ERR_INVALID_CALLBACK","Callback must be a function");It("ERR_INVALID_CHAR","Invalid character in %s");It("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column");It("ERR_INVALID_FD",'"fd" must be a positive integer: %s');It("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s');It("ERR_INVALID_FILE_URL_PATH","File URL path %s");It("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent");It("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s");It("ERR_INVALID_OPT_VALUE",(t,e)=>`The value "${String(e)}" is invalid for option "${t}"`);It("ERR_INVALID_OPT_VALUE_ENCODING",t=>`The value "${String(t)}" is invalid for option "encoding"`);It("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL');It("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s");It("ERR_INVALID_THIS",'Value of "this" must be of type %s');It("ERR_INVALID_TUPLE","%s must be an iterable %s tuple");It("ERR_INVALID_URL","Invalid URL: %s");It("ERR_INVALID_URL_SCHEME",t=>`The URL must be ${Yy(t,"scheme")}`);It("ERR_IPC_CHANNEL_CLOSED","Channel closed");It("ERR_IPC_DISCONNECTED","IPC channel is already disconnected");It("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe");It("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks");It("ERR_MISSING_ARGS",Sx);It("ERR_MULTIPLE_CALLBACK","Callback called multiple times");It("ERR_NAPI_CONS_FUNCTION","Constructor must be a function");It("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object");It("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support");It("ERR_NO_LONGER_SUPPORTED","%s is no longer supported");It("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s");It("ERR_SOCKET_ALREADY_BOUND","Socket is already bound");It("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536");It("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6");It("ERR_SOCKET_CANNOT_SEND","Unable to send data");It("ERR_SOCKET_CLOSED","Socket is closed");It("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running");It("ERR_STDERR_CLOSE","process.stderr cannot be closed");It("ERR_STDOUT_CLOSE","process.stdout cannot be closed");It("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode");It("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s");It("ERR_TLS_DH_PARAM_SIZE",t=>`DH parameter size ${t} is less than 2048`);It("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout");It("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate");It("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext');It("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected");It("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming");It("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0");It("ERR_UNKNOWN_ENCODING","Unknown encoding: %s");It("ERR_UNKNOWN_SIGNAL","Unknown signal: %s");It("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type");It("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type");It("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl");function wx(t,e,r){Lh(t,"name is required");let n;e.includes("not ")?(n="must not be",e=e.split("not ")[1]):n="must be";let i;if(Array.isArray(t))i=`The ${t.map(c=>`"${c}"`).join(", ")} arguments ${n} ${Yy(e,"type")}`;else if(t.includes(" argument"))i=`The ${t} ${n} ${Yy(e,"type")}`;else{let a=t.includes(".")?"property":"argument";i=`The "${t}" ${a} ${n} ${Yy(e,"type")}`}return arguments.length>=3&&(i+=`. Received type ${r!==null?typeof r:"null"}`),i}function Sx(...t){Lh(t.length>0,"At least one arg needs to be specified");let e="The ",r=t.length;switch(t=t.map(n=>`"${n}"`),r){case 1:e+=`${t[0]} argument`;break;case 2:e+=`${t[0]} and ${t[1]} arguments`;break;default:e+=t.slice(0,r-1).join(", "),e+=`, and ${t[r-1]} arguments`;break}return`${e} must be specified`}function Yy(t,e){if(Lh(t,"expected is required"),Lh(typeof e=="string","thing is required"),Array.isArray(t)){let r=t.length;return Lh(r>0,"At least one expected value needs to be specified"),t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function bx(t,e){return e?"Attempt to write outside buffer bounds":`"${t}" is outside of buffer bounds`}});var V_=an(gg=>{"use strict";Object.defineProperty(gg,"__esModule",{value:!0});gg.ENCODING_UTF8=void 0;gg.assertEncoding=Tx;gg.strToEncoding=Ix;var Gw=t_(),Ex=Vw();gg.ENCODING_UTF8="utf8";function Tx(t){if(t&&!Gw.Buffer.isEncoding(t))throw new Ex.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",t)}function Ix(t,e){return!e||e===gg.ENCODING_UTF8?t:e==="buffer"?new Gw.Buffer(t):new Gw.Buffer(t).toString(e)}});var qy=an(G_=>{"use strict";Object.defineProperty(G_,"__esModule",{value:!0});G_.Dirent=void 0;var Nx=Ph(),Dx=V_(),{S_IFMT:Cx,S_IFDIR:Rx,S_IFREG:xx,S_IFBLK:Ox,S_IFCHR:Ax,S_IFLNK:Px,S_IFIFO:kx,S_IFSOCK:Lx}=Nx.constants,By=class t{constructor(){this.name="",this.path="",this.parentPath="",this.mode=0}static build(e,r){let n=new t,{mode:i}=e.getNode();return n.name=(0,Dx.strToEncoding)(e.getName(),r),n.mode=i,n.path=e.getParentPath(),n.parentPath=n.path,n}_checkModeProperty(e){return(this.mode&Cx)===e}isDirectory(){return this._checkModeProperty(Rx)}isFile(){return this._checkModeProperty(xx)}isBlockDevice(){return this._checkModeProperty(Ox)}isCharacterDevice(){return this._checkModeProperty(Ax)}isSymbolicLink(){return this._checkModeProperty(Px)}isFIFO(){return this._checkModeProperty(kx)}isSocket(){return this._checkModeProperty(Lx)}};G_.Dirent=By;G_.default=By});var zw=an(Hy=>{"use strict";Object.defineProperty(Hy,"__esModule",{value:!0});Hy.createProcess=mE;var Mx=()=>{if(typeof process<"u")return process;try{return require("process")}catch{return}};function mE(){let t=Mx()||{};return t.cwd||(t.cwd=()=>"/"),t.emitWarning||(t.emitWarning=(e,r)=>{console.warn(`${r}${r?": ":""}${e}`)}),t.env||(t.env={}),t}Hy.default=mE()});var yE=an(ep=>{"use strict";Object.defineProperty(ep,"__esModule",{value:!0});ep.File=ep.Link=ep.Node=ep.SEP=void 0;var zy=zw(),Qd=t_(),Fx=Ph(),gE=require("events"),Ux=Uy(),{S_IFMT:Xm,S_IFDIR:jx,S_IFREG:_E,S_IFLNK:hE,S_IFCHR:Yx,O_APPEND:$x}=Fx.constants,Vy=()=>{var t,e;return(e=(t=zy.default.getuid)===null||t===void 0?void 0:t.call(zy.default))!==null&&e!==void 0?e:0},Gy=()=>{var t,e;return(e=(t=zy.default.getgid)===null||t===void 0?void 0:t.call(zy.default))!==null&&e!==void 0?e:0};ep.SEP="/";var Ww=class extends gE.EventEmitter{constructor(e,r=438){super(),this._uid=Vy(),this._gid=Gy(),this._atime=new Date,this._mtime=new Date,this._ctime=new Date,this.rdev=0,this._nlink=1,this.mode=r,this.ino=e}set ctime(e){this._ctime=e}get ctime(){return this._ctime}set uid(e){this._uid=e,this.ctime=new Date}get uid(){return this._uid}set gid(e){this._gid=e,this.ctime=new Date}get gid(){return this._gid}set atime(e){this._atime=e,this.ctime=new Date}get atime(){return this._atime}set mtime(e){this._mtime=e,this.ctime=new Date}get mtime(){return this._mtime}get perm(){return this.mode&~Xm}set perm(e){this.mode=this.mode&Xm|e&~Xm,this.ctime=new Date}set nlink(e){this._nlink=e,this.ctime=new Date}get nlink(){return this._nlink}getString(e="utf8"){return this.atime=new Date,this.getBuffer().toString(e)}setString(e){this.buf=(0,Qd.bufferFrom)(e,"utf8"),this.touch()}getBuffer(){return this.atime=new Date,this.buf||this.setBuffer((0,Qd.bufferAllocUnsafe)(0)),(0,Qd.bufferFrom)(this.buf)}setBuffer(e){this.buf=(0,Qd.bufferFrom)(e),this.touch()}getSize(){return this.buf?this.buf.length:0}setModeProperty(e){this.mode=e}isFile(){return(this.mode&Xm)===_E}isDirectory(){return(this.mode&Xm)===jx}isSymlink(){return(this.mode&Xm)===hE}isCharacterDevice(){return(this.mode&Xm)===Yx}makeSymlink(e){this.mode=hE|438,this.symlink=e}write(e,r=0,n=e.length,i=0){if(this.buf||(this.buf=(0,Qd.bufferAllocUnsafe)(0)),i+n>this.buf.length){let a=(0,Qd.bufferAllocUnsafe)(i+n);this.buf.copy(a,0,0,this.buf.length),this.buf=a}return e.copy(this.buf,i,r,r+n),this.touch(),n}read(e,r=0,n=e.byteLength,i=0){this.atime=new Date,this.buf||(this.buf=(0,Qd.bufferAllocUnsafe)(0));let a=n;a>e.byteLength&&(a=e.byteLength),a+i>this.buf.length&&(a=this.buf.length-i);let c=e instanceof Qd.Buffer?e:Qd.Buffer.from(e.buffer);return this.buf.copy(c,r,i,i+a),a}truncate(e=0){if(!e)this.buf=(0,Qd.bufferAllocUnsafe)(0);else if(this.buf||(this.buf=(0,Qd.bufferAllocUnsafe)(0)),e<=this.buf.length)this.buf=this.buf.slice(0,e);else{let r=(0,Qd.bufferAllocUnsafe)(e);this.buf.copy(r),r.fill(0,this.buf.length),this.buf=r}this.touch()}chmod(e){this.mode=this.mode&Xm|e&~Xm,this.touch()}chown(e,r){this.uid=e,this.gid=r,this.touch()}touch(){this.mtime=new Date,this.emit("change",this)}canRead(e=Vy(),r=Gy()){return!!(this.perm&4||r===this.gid&&this.perm&32||e===this.uid&&this.perm&256)}canWrite(e=Vy(),r=Gy()){return!!(this.perm&2||r===this.gid&&this.perm&16||e===this.uid&&this.perm&128)}canExecute(e=Vy(),r=Gy()){return!!(this.perm&1||r===this.gid&&this.perm&8||e===this.uid&&this.perm&64)}del(){this.emit("delete",this)}toJSON(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}}};ep.Node=Ww;var Kw=class t extends gE.EventEmitter{get steps(){return this._steps}set steps(e){this._steps=e;for(let[r,n]of this.children.entries())r==="."||r===".."||n==null||n.syncSteps()}constructor(e,r,n){super(),this.children=new Map,this._steps=[],this.ino=0,this.length=0,this.vol=e,this.parent=r,this.name=n,this.syncSteps()}setNode(e){this.node=e,this.ino=e.ino}getNode(){return this.node}createChild(e,r=this.vol.createNode(_E|438)){let n=new t(this.vol,this,e);return n.setNode(r),r.isDirectory()&&(n.children.set(".",n),n.getNode().nlink++),this.setChild(e,n),n}setChild(e,r=new t(this.vol,this,e)){return this.children.set(e,r),r.parent=this,this.length++,r.getNode().isDirectory()&&(r.children.set("..",this),this.getNode().nlink++),this.getNode().mtime=new Date,this.emit("child:add",r,this),r}deleteChild(e){e.getNode().isDirectory()&&(e.children.delete(".."),this.getNode().nlink--),this.children.delete(e.getName()),this.length--,this.getNode().mtime=new Date,this.emit("child:delete",e,this)}getChild(e){return this.getNode().mtime=new Date,this.children.get(e)}getPath(){return this.steps.join(ep.SEP)}getParentPath(){return this.steps.slice(0,-1).join(ep.SEP)}getName(){return this.steps[this.steps.length-1]}toJSON(){return{steps:this.steps,ino:this.ino,children:Array.from(this.children.keys())}}syncSteps(){this.steps=this.parent?this.parent.steps.concat([this.name]):[this.name]}};ep.Link=Kw;var Jw=class{constructor(e,r,n,i){this.link=e,this.node=r,this.flags=n,this.fd=i,this.position=0,this.flags&$x&&(this.position=this.getSize())}getString(e="utf8"){return this.node.getString()}setString(e){this.node.setString(e)}getBuffer(){return this.node.getBuffer()}setBuffer(e){this.node.setBuffer(e)}getSize(){return this.node.getSize()}truncate(e){this.node.truncate(e)}seekTo(e){this.position=e}stats(){return Ux.default.build(this.node)}write(e,r=0,n=e.length,i){typeof i!="number"&&(i=this.position);let a=this.node.write(e,r,n,i);return this.position=i+a,a}read(e,r=0,n=e.byteLength,i){typeof i!="number"&&(i=this.position);let a=this.node.read(e,r,n,i);return this.position=i+a,a}chmod(e){this.node.chmod(e)}chown(e,r){this.node.chown(e,r)}};ep.File=Jw});var wE=an(Xw=>{"use strict";Object.defineProperty(Xw,"__esModule",{value:!0});var Zw;typeof setImmediate=="function"?Zw=setImmediate.bind(typeof globalThis<"u"?globalThis:global):Zw=setTimeout.bind(typeof globalThis<"u"?globalThis:global);Xw.default=Zw});var eS=an(Qw=>{"use strict";Object.defineProperty(Qw,"__esModule",{value:!0});Qw.default=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(()=>t()).catch(()=>{})});var SE=an(tS=>{"use strict";Object.defineProperty(tS,"__esModule",{value:!0});function Bx(t,e,r){let n=setTimeout.apply(typeof globalThis<"u"?globalThis:global,arguments);return n&&typeof n=="object"&&typeof n.unref=="function"&&n.unref(),n}tS.default=Bx});var Xy=an(n_=>{"use strict";Object.defineProperty(n_,"__esModule",{value:!0});n_.FLAGS=n_.ERRSTR=void 0;var qx=Ph();n_.ERRSTR={PATH_STR:"path must be a string, Buffer, or Uint8Array",FD:"fd must be a file descriptor",MODE_INT:"mode must be an int",CB:"callback must be a function",UID:"uid must be an unsigned int",GID:"gid must be an unsigned int",LEN:"len must be an integer",ATIME:"atime must be an integer",MTIME:"mtime must be an integer",PREFIX:"filename prefix is required",BUFFER:"buffer must be an instance of Buffer or StaticBuffer",OFFSET:"offset must be an integer",LENGTH:"length must be an integer",POSITION:"position must be an integer"};var{O_RDONLY:bE,O_WRONLY:Wy,O_RDWR:r_,O_CREAT:Mh,O_EXCL:Ky,O_TRUNC:Jy,O_APPEND:Zy,O_SYNC:EE}=qx.constants,TE;(function(t){t[t.r=bE]="r",t[t["r+"]=r_]="r+",t[t.rs=bE|EE]="rs",t[t.sr=t.rs]="sr",t[t["rs+"]=r_|EE]="rs+",t[t["sr+"]=t["rs+"]]="sr+",t[t.w=Wy|Mh|Jy]="w",t[t.wx=Wy|Mh|Jy|Ky]="wx",t[t.xw=t.wx]="xw",t[t["w+"]=r_|Mh|Jy]="w+",t[t["wx+"]=r_|Mh|Jy|Ky]="wx+",t[t["xw+"]=t["wx+"]]="xw+",t[t.a=Wy|Zy|Mh]="a",t[t.ax=Wy|Zy|Mh|Ky]="ax",t[t.xa=t.ax]="xa",t[t["a+"]=r_|Zy|Mh]="a+",t[t["ax+"]=r_|Zy|Mh|Ky]="ax+",t[t["xa+"]=t["ax+"]]="xa+"})(TE||(n_.FLAGS=TE={}))});var a_=an(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.unixify=fi.getWriteSyncArgs=fi.getWriteArgs=fi.bufToUint8=fi.isWin=void 0;fi.promisify=Gx;fi.validateCallback=IE;fi.modeToNumber=NE;fi.nullCheck=DE;fi.pathToFilename=Kx;fi.createError=fO;fi.genRndStr6=CE;fi.flagsToNumber=dO;fi.isFd=RE;fi.validateFd=aS;fi.streamToBuffer=pO;fi.dataToBuffer=oS;fi.bufferToEncoding=gO;fi.isReadableStream=_O;var i_=Xy(),rS=Vw(),iS=t_(),Hx=V_(),nS=t_(),Vx=eS();fi.isWin=process.platform==="win32";function Gx(t,e,r=n=>n){return(...n)=>new Promise((i,a)=>{t[e].bind(t)(...n,(c,g)=>c?a(c):i(r(g)))})}function IE(t){if(typeof t!="function")throw TypeError(i_.ERRSTR.CB);return t}function zx(t,e){if(typeof t=="number")return t;if(typeof t=="string")return parseInt(t,8);if(e)return NE(e)}function NE(t,e){let r=zx(t,e);if(typeof r!="number"||isNaN(r))throw new TypeError(i_.ERRSTR.MODE_INT);return r}function DE(t,e){if((""+t).indexOf("\0")!==-1){let r=new Error("Path must be a string without null bytes");if(r.code="ENOENT",typeof e!="function")throw r;return(0,Vx.default)(()=>{e(r)}),!1}return!0}function Wx(t){if(t.hostname!=="")throw new rS.TypeError("ERR_INVALID_FILE_URL_HOST",process.platform);let e=t.pathname;for(let r=0;r<e.length;r++)if(e[r]==="%"){let n=e.codePointAt(r+2)|32;if(e[r+1]==="2"&&n===102)throw new rS.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters")}return decodeURIComponent(e)}function Kx(t){if(t instanceof Uint8Array&&(t=(0,nS.bufferFrom)(t)),typeof t!="string"&&!iS.Buffer.isBuffer(t)){try{if(!(t instanceof require("url").URL))throw new TypeError(i_.ERRSTR.PATH_STR)}catch{throw new TypeError(i_.ERRSTR.PATH_STR)}t=Wx(t)}let e=String(t);return DE(e),e}var Jx="ENOENT",Zx="EBADF",Xx="EINVAL",Qx="EPERM",eO="EPROTO",tO="EEXIST",rO="ENOTDIR",nO="EMFILE",iO="EACCES",aO="EISDIR",oO="ENOTEMPTY",sO="ENOSYS",uO="ERR_FS_EISDIR",cO="ERR_OUT_OF_RANGE";function lO(t,e="",r="",n=""){let i="";switch(r&&(i=` '${r}'`),n&&(i+=` -> '${n}'`),t){case Jx:return`ENOENT: no such file or directory, ${e}${i}`;case Zx:return`EBADF: bad file descriptor, ${e}${i}`;case Xx:return`EINVAL: invalid argument, ${e}${i}`;case Qx:return`EPERM: operation not permitted, ${e}${i}`;case eO:return`EPROTO: protocol error, ${e}${i}`;case tO:return`EEXIST: file already exists, ${e}${i}`;case rO:return`ENOTDIR: not a directory, ${e}${i}`;case aO:return`EISDIR: illegal operation on a directory, ${e}${i}`;case iO:return`EACCES: permission denied, ${e}${i}`;case oO:return`ENOTEMPTY: directory not empty, ${e}${i}`;case nO:return`EMFILE: too many open files, ${e}${i}`;case sO:return`ENOSYS: function not implemented, ${e}${i}`;case uO:return`[ERR_FS_EISDIR]: Path is a directory: ${e} returned EISDIR (is a directory) ${r}`;case cO:return`[ERR_OUT_OF_RANGE]: value out of range, ${e}${i}`;default:return`${t}: error occurred, ${e}${i}`}}function fO(t,e="",r="",n="",i=Error){let a=new i(lO(t,e,r,n));return a.code=t,r&&(a.path=r),a}function CE(){let t=(Math.random()+1).toString(36).substring(2,8);return t.length===6?t:CE()}function dO(t){if(typeof t=="number")return t;if(typeof t=="string"){let e=i_.FLAGS[t];if(typeof e<"u")return e}throw new rS.TypeError("ERR_INVALID_OPT_VALUE","flags",t)}function RE(t){return t>>>0===t}function aS(t){if(!RE(t))throw TypeError(i_.ERRSTR.FD)}function pO(t){let e=[];return new Promise((r,n)=>{t.on("data",i=>e.push(i)),t.on("end",()=>r(iS.Buffer.concat(e))),t.on("error",n)})}function oS(t,e=Hx.ENCODING_UTF8){return iS.Buffer.isBuffer(t)?t:t instanceof Uint8Array?(0,nS.bufferFrom)(t):(0,nS.bufferFrom)(String(t),e)}var vO=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength);fi.bufToUint8=vO;var mO=(t,e,r,n,i,a)=>{aS(t);let c=0,g,_=null,b,C,j=typeof e,K=typeof r,te=typeof n,z=typeof i;j!=="string"?K==="function"?C=r:te==="function"?(c=r|0,C=n):z==="function"?(c=r|0,g=n,C=i):(c=r|0,g=n,_=i,C=a):K==="function"?C=r:te==="function"?(_=r,C=n):z==="function"&&(_=r,b=n,C=i);let G=oS(e,b);j!=="string"?typeof g>"u"&&(g=G.length):(c=0,g=G.length);let ne=IE(C);return[t,j==="string",G,c,g,_,ne]};fi.getWriteArgs=mO;var hO=(t,e,r,n,i)=>{aS(t);let a,c,g,_,b=typeof e!="string";b?(c=(r||0)|0,g=n,_=i):(_=r,a=n);let C=oS(e,a);return b?typeof g>"u"&&(g=C.length):(c=0,g=C.length),[t,C,c||0,g,_]};fi.getWriteSyncArgs=hO;function gO(t,e){return!e||e==="buffer"?t:t.toString(e)}function _O(t){return t!==null&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"&&t.readable===!0}var yO=(t,e)=>{let r=t[e];return e>0&&(r==="/"||fi.isWin&&r==="\\")},wO=t=>{let e=t.length-1;if(e<2)return t;for(;yO(t,e);)e--;return t.substr(0,e+1)},SO=(t,e)=>{if(typeof t!="string")throw new TypeError("expected a string");return t=t.replace(/[\\\/]+/g,"/"),e!==!1&&(t=wO(t)),t},bO=(t,e=!0)=>fi.isWin?(t=SO(t,e),t.replace(/^([a-zA-Z]+:|\.\/)/,"")):t;fi.unixify=bO});var xE=an(Qy=>{"use strict";Object.defineProperty(Qy,"__esModule",{value:!0});Qy.FileHandle=void 0;var Hc=a_(),sS=class{constructor(e,r){this.fs=e,this.fd=r}appendFile(e,r){return(0,Hc.promisify)(this.fs,"appendFile")(this.fd,e,r)}chmod(e){return(0,Hc.promisify)(this.fs,"fchmod")(this.fd,e)}chown(e,r){return(0,Hc.promisify)(this.fs,"fchown")(this.fd,e,r)}close(){return(0,Hc.promisify)(this.fs,"close")(this.fd)}datasync(){return(0,Hc.promisify)(this.fs,"fdatasync")(this.fd)}createReadStream(e){return this.fs.createReadStream("",Object.assign(Object.assign({},e),{fd:this}))}createWriteStream(e){return this.fs.createWriteStream("",Object.assign(Object.assign({},e),{fd:this}))}readableWebStream(e){return new ReadableStream({pull:async r=>{let n=await this.readFile();r.enqueue(n),r.close()}})}read(e,r,n,i){return(0,Hc.promisify)(this.fs,"read",a=>({bytesRead:a,buffer:e}))(this.fd,e,r,n,i)}readv(e,r){return(0,Hc.promisify)(this.fs,"readv",n=>({bytesRead:n,buffers:e}))(this.fd,e,r)}readFile(e){return(0,Hc.promisify)(this.fs,"readFile")(this.fd,e)}stat(e){return(0,Hc.promisify)(this.fs,"fstat")(this.fd,e)}sync(){return(0,Hc.promisify)(this.fs,"fsync")(this.fd)}truncate(e){return(0,Hc.promisify)(this.fs,"ftruncate")(this.fd,e)}utimes(e,r){return(0,Hc.promisify)(this.fs,"futimes")(this.fd,e,r)}write(e,r,n,i){return(0,Hc.promisify)(this.fs,"write",a=>({bytesWritten:a,buffer:e}))(this.fd,e,r,n,i)}writev(e,r){return(0,Hc.promisify)(this.fs,"writev",n=>({bytesWritten:n,buffers:e}))(this.fd,e,r)}writeFile(e,r){return(0,Hc.promisify)(this.fs,"writeFile")(this.fd,e,r)}};Qy.FileHandle=sS});var OE=an(e0=>{"use strict";Object.defineProperty(e0,"__esModule",{value:!0});e0.FsPromises=void 0;var Hn=a_(),EO=Ph(),uS=class{constructor(e,r){this.fs=e,this.FileHandle=r,this.constants=EO.constants,this.cp=(0,Hn.promisify)(this.fs,"cp"),this.opendir=(0,Hn.promisify)(this.fs,"opendir"),this.statfs=(0,Hn.promisify)(this.fs,"statfs"),this.lutimes=(0,Hn.promisify)(this.fs,"lutimes"),this.access=(0,Hn.promisify)(this.fs,"access"),this.chmod=(0,Hn.promisify)(this.fs,"chmod"),this.chown=(0,Hn.promisify)(this.fs,"chown"),this.copyFile=(0,Hn.promisify)(this.fs,"copyFile"),this.lchmod=(0,Hn.promisify)(this.fs,"lchmod"),this.lchown=(0,Hn.promisify)(this.fs,"lchown"),this.link=(0,Hn.promisify)(this.fs,"link"),this.lstat=(0,Hn.promisify)(this.fs,"lstat"),this.mkdir=(0,Hn.promisify)(this.fs,"mkdir"),this.mkdtemp=(0,Hn.promisify)(this.fs,"mkdtemp"),this.readdir=(0,Hn.promisify)(this.fs,"readdir"),this.readlink=(0,Hn.promisify)(this.fs,"readlink"),this.realpath=(0,Hn.promisify)(this.fs,"realpath"),this.rename=(0,Hn.promisify)(this.fs,"rename"),this.rmdir=(0,Hn.promisify)(this.fs,"rmdir"),this.rm=(0,Hn.promisify)(this.fs,"rm"),this.stat=(0,Hn.promisify)(this.fs,"stat"),this.symlink=(0,Hn.promisify)(this.fs,"symlink"),this.truncate=(0,Hn.promisify)(this.fs,"truncate"),this.unlink=(0,Hn.promisify)(this.fs,"unlink"),this.utimes=(0,Hn.promisify)(this.fs,"utimes"),this.readFile=(n,i)=>(0,Hn.promisify)(this.fs,"readFile")(n instanceof this.FileHandle?n.fd:n,i),this.appendFile=(n,i,a)=>(0,Hn.promisify)(this.fs,"appendFile")(n instanceof this.FileHandle?n.fd:n,i,a),this.open=(n,i="r",a)=>(0,Hn.promisify)(this.fs,"open",c=>new this.FileHandle(this.fs,c))(n,i,a),this.writeFile=(n,i,a)=>((0,Hn.isReadableStream)(i)?(0,Hn.streamToBuffer)(i):Promise.resolve(i)).then(g=>(0,Hn.promisify)(this.fs,"writeFile")(n instanceof this.FileHandle?n.fd:n,g,a)),this.watch=()=>{throw new Error("Not implemented")}}};e0.FsPromises=uS});var aT={};Yw(aT,{__addDisposableResource:()=>rT,__assign:()=>t0,__asyncDelegator:()=>WE,__asyncGenerator:()=>zE,__asyncValues:()=>KE,__await:()=>o_,__awaiter:()=>$E,__classPrivateFieldGet:()=>QE,__classPrivateFieldIn:()=>tT,__classPrivateFieldSet:()=>eT,__createBinding:()=>n0,__decorate:()=>kE,__disposeResources:()=>nT,__esDecorate:()=>ME,__exportStar:()=>qE,__extends:()=>AE,__generator:()=>BE,__importDefault:()=>XE,__importStar:()=>ZE,__makeTemplateObject:()=>JE,__metadata:()=>YE,__param:()=>LE,__propKey:()=>UE,__read:()=>fS,__rest:()=>PE,__rewriteRelativeImportExtension:()=>iT,__runInitializers:()=>FE,__setFunctionName:()=>jE,__spread:()=>HE,__spreadArray:()=>GE,__spreadArrays:()=>VE,__values:()=>r0,default:()=>NO});function AE(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");cS(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function PE(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function kE(t,e,r,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,r,n);else for(var g=t.length-1;g>=0;g--)(c=t[g])&&(a=(i<3?c(a):i>3?c(e,r,a):c(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a}function LE(t,e){return function(r,n){e(r,n,t)}}function ME(t,e,r,n,i,a){function c(le){if(le!==void 0&&typeof le!="function")throw new TypeError("Function expected");return le}for(var g=n.kind,_=g==="getter"?"get":g==="setter"?"set":"value",b=!e&&t?n.static?t:t.prototype:null,C=e||(b?Object.getOwnPropertyDescriptor(b,n.name):{}),j,K=!1,te=r.length-1;te>=0;te--){var z={};for(var G in n)z[G]=G==="access"?{}:n[G];for(var G in n.access)z.access[G]=n.access[G];z.addInitializer=function(le){if(K)throw new TypeError("Cannot add initializers after decoration has completed");a.push(c(le||null))};var ne=(0,r[te])(g==="accessor"?{get:C.get,set:C.set}:C[_],z);if(g==="accessor"){if(ne===void 0)continue;if(ne===null||typeof ne!="object")throw new TypeError("Object expected");(j=c(ne.get))&&(C.get=j),(j=c(ne.set))&&(C.set=j),(j=c(ne.init))&&i.unshift(j)}else(j=c(ne))&&(g==="field"?i.unshift(j):C[_]=j)}b&&Object.defineProperty(b,n.name,C),K=!0}function FE(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function UE(t){return typeof t=="symbol"?t:"".concat(t)}function jE(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function YE(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function $E(t,e,r,n){function i(a){return a instanceof r?a:new r(function(c){c(a)})}return new(r||(r=Promise))(function(a,c){function g(C){try{b(n.next(C))}catch(j){c(j)}}function _(C){try{b(n.throw(C))}catch(j){c(j)}}function b(C){C.done?a(C.value):i(C.value).then(g,_)}b((n=n.apply(t,e||[])).next())})}function BE(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=g(0),c.throw=g(1),c.return=g(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function g(b){return function(C){return _([b,C])}}function _(b){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,b[0]&&(r=0)),r;)try{if(n=1,i&&(a=b[0]&2?i.return:b[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,b[1])).done)return a;switch(i=0,a&&(b=[b[0]&2,a.value]),b[0]){case 0:case 1:a=b;break;case 4:return r.label++,{value:b[1],done:!1};case 5:r.label++,i=b[1],b=[0];continue;case 7:b=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(b[0]===6||b[0]===2)){r=0;continue}if(b[0]===3&&(!a||b[1]>a[0]&&b[1]<a[3])){r.label=b[1];break}if(b[0]===6&&r.label<a[1]){r.label=a[1],a=b;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(b);break}a[2]&&r.ops.pop(),r.trys.pop();continue}b=e.call(t,r)}catch(C){b=[6,C],i=0}finally{n=a=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}}function qE(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&n0(e,t,r)}function r0(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fS(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(g){c={error:g}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return a}function HE(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(fS(arguments[e]));return t}function VE(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],c=0,g=a.length;c<g;c++,i++)n[i]=a[c];return n}function GE(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function o_(t){return this instanceof o_?(this.v=t,this):new o_(t)}function zE(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",c),i[Symbol.asyncIterator]=function(){return this},i;function c(te){return function(z){return Promise.resolve(z).then(te,j)}}function g(te,z){n[te]&&(i[te]=function(G){return new Promise(function(ne,le){a.push([te,G,ne,le])>1||_(te,G)})},z&&(i[te]=z(i[te])))}function _(te,z){try{b(n[te](z))}catch(G){K(a[0][3],G)}}function b(te){te.value instanceof o_?Promise.resolve(te.value.v).then(C,j):K(a[0][2],te)}function C(te){_("next",te)}function j(te){_("throw",te)}function K(te,z){te(z),a.shift(),a.length&&_(a[0][0],a[0][1])}}function WE(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,a){e[i]=t[i]?function(c){return(r=!r)?{value:o_(t[i](c)),done:!1}:a?a(c):c}:a}}function KE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof r0=="function"?r0(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(c){return new Promise(function(g,_){c=t[a](c),i(g,_,c.done,c.value)})}}function i(a,c,g,_){Promise.resolve(_).then(function(b){a({value:b,done:g})},c)}}function JE(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function ZE(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=lS(t),n=0;n<r.length;n++)r[n]!=="default"&&n0(e,t,r[n]);return TO(e,t),e}function XE(t){return t&&t.__esModule?t:{default:t}}function QE(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function eT(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function tT(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function rT(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function nT(t){function e(a){t.error=t.hasError?new IO(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(a).then(i,function(c){return e(c),i()})}else n|=1}catch(c){e(c)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function iT(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,a,c){return n?e?".jsx":".js":i&&(!a||!c)?r:i+a+"."+c.toLowerCase()+"js"}):t}var cS,t0,n0,TO,lS,IO,NO,oT=ox(()=>{cS=function(t,e){return cS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},cS(t,e)};t0=function(){return t0=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},t0.apply(this,arguments)};n0=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};TO=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},lS=function(t){return lS=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},lS(t)};IO=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};NO={__extends:AE,__assign:t0,__rest:PE,__decorate:kE,__param:LE,__esDecorate:ME,__runInitializers:FE,__propKey:UE,__setFunctionName:jE,__metadata:YE,__awaiter:$E,__generator:BE,__createBinding:n0,__exportStar:qE,__values:r0,__read:fS,__spread:HE,__spreadArrays:VE,__spreadArray:GE,__await:o_,__asyncGenerator:zE,__asyncDelegator:WE,__asyncValues:KE,__makeTemplateObject:JE,__importStar:ZE,__importDefault:XE,__classPrivateFieldGet:QE,__classPrivateFieldSet:eT,__classPrivateFieldIn:tT,__addDisposableResource:rT,__disposeResources:nT,__rewriteRelativeImportExtension:iT}});var sT=an(i0=>{"use strict";Object.defineProperty(i0,"__esModule",{value:!0});i0.printTree=void 0;var DO=(t="",e)=>{let r="",n=e.length-1;for(;n>=0&&!e[n];n--);for(let i=0;i<=n;i++){let a=e[i];if(!a)continue;let c=i===n,g=a(t+(c?" ":"\u2502")+"  "),_=g?c?"\u2514\u2500":"\u251C\u2500":"\u2502";r+=`
`+t+_+(g?" "+g:"")}return r};i0.printTree=DO});var uT=an(a0=>{"use strict";Object.defineProperty(a0,"__esModule",{value:!0});a0.printBinary=void 0;var CO=(t="",e)=>{let r=e[0],n=e[1],i="";return r&&(i+=`
`+t+"\u2190 "+r(t+"  ")),n&&(i+=`
`+t+"\u2192 "+n(t+"  ")),i};a0.printBinary=CO});var lT=an(o0=>{"use strict";Object.defineProperty(o0,"__esModule",{value:!0});var cT=(oT(),lE(aT));cT.__exportStar(sT(),o0);cT.__exportStar(uT(),o0)});var fT=an(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});Zu.newNotAllowedError=Zu.newTypeMismatchError=Zu.newNotFoundError=Zu.assertCanWrite=Zu.assertName=Zu.basename=Zu.ctx=void 0;var RO=(t={})=>Object.assign({separator:"/",syncHandleAllowed:!1,mode:"read"},t);Zu.ctx=RO;var xO=(t,e)=>{t[t.length-1]===e&&(t=t.slice(0,-1));let r=t.lastIndexOf(e);return r===-1?t:t.slice(r+1)};Zu.basename=xO;var OO=/^(\.{1,2})$|^(.*([\/\\]).*)$/,AO=(t,e,r)=>{if(!t||OO.test(t))throw new TypeError(`Failed to execute '${e}' on '${r}': Name is not allowed.`)};Zu.assertName=AO;var PO=t=>{if(t!=="readwrite")throw new DOMException("The request is not allowed by the user agent or the platform in the current context.","NotAllowedError")};Zu.assertCanWrite=PO;var kO=()=>new DOMException("A requested file or directory could not be found at the time an operation was processed.","NotFoundError");Zu.newNotFoundError=kO;var LO=()=>new DOMException("The path supplied exists, but was not an entry of requested type.","TypeMismatchError");Zu.newTypeMismatchError=LO;var MO=()=>new DOMException("Permission not granted.","NotAllowedError");Zu.newNotAllowedError=MO});var dT=an(z_=>{"use strict";Object.defineProperty(z_,"__esModule",{value:!0});z_.toTreeSync=void 0;var FO=lT(),UO=fT(),jO=(t,e={})=>{var r;let n=e.separator||"/",i=e.dir||n;i[i.length-1]!==n&&(i+=n);let a=e.tab||"",c=(r=e.depth)!==null&&r!==void 0?r:10,g=" (...)";if(c>0){let b=t.readdirSync(i,{withFileTypes:!0});g=(0,FO.printTree)(a,b.map(C=>j=>C.isDirectory()?(0,z_.toTreeSync)(t,{dir:i+C.name,depth:c-1,tab:j}):C.isSymbolicLink()?""+C.name+" \u2192 "+t.readlinkSync(i+C.name):""+C.name))}return(0,UO.basename)(i,n)+n+g};z_.toTreeSync=jO});var hT=an(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.getWriteFileOptions=Xt.writeFileDefaults=Xt.getRealpathOptsAndCb=Xt.getRealpathOptions=Xt.getStatOptsAndCb=Xt.getStatOptions=Xt.getAppendFileOptsAndCb=Xt.getAppendFileOpts=Xt.getOpendirOptsAndCb=Xt.getOpendirOptions=Xt.getReaddirOptsAndCb=Xt.getReaddirOptions=Xt.getReadFileOptions=Xt.getRmOptsAndCb=Xt.getRmdirOptions=Xt.getDefaultOptsAndCb=Xt.getDefaultOpts=Xt.optsDefaults=Xt.getMkdirOptions=void 0;Xt.getOptions=mT;Xt.optsGenerator=Qm;Xt.optsAndCbGenerator=_g;var s0=Xy(),YO=V_(),vT=a_(),pT={mode:511,recursive:!1},$O=t=>typeof t=="number"?Object.assign({},pT,{mode:t}):Object.assign({},pT,t);Xt.getMkdirOptions=$O;var BO=t=>`Expected options to be either an object or a string, but got ${t} instead`;function mT(t,e){let r;if(e){let n=typeof e;switch(n){case"string":r=Object.assign({},t,{encoding:e});break;case"object":r=Object.assign({},t,e);break;default:throw TypeError(BO(n))}}else return t;return r.encoding!=="buffer"&&(0,YO.assertEncoding)(r.encoding),r}function Qm(t){return e=>mT(t,e)}function _g(t){return(e,r)=>typeof e=="function"?[t(),e]:[t(e),(0,vT.validateCallback)(r)]}Xt.optsDefaults={encoding:"utf8"};Xt.getDefaultOpts=Qm(Xt.optsDefaults);Xt.getDefaultOptsAndCb=_g(Xt.getDefaultOpts);var qO={recursive:!1},HO=t=>Object.assign({},qO,t);Xt.getRmdirOptions=HO;var VO=Qm(Xt.optsDefaults);Xt.getRmOptsAndCb=_g(VO);var GO={flag:"r"};Xt.getReadFileOptions=Qm(GO);var zO={encoding:"utf8",recursive:!1,withFileTypes:!1};Xt.getReaddirOptions=Qm(zO);Xt.getReaddirOptsAndCb=_g(Xt.getReaddirOptions);var WO={encoding:"utf8",bufferSize:32,recursive:!1};Xt.getOpendirOptions=Qm(WO);Xt.getOpendirOptsAndCb=_g(Xt.getOpendirOptions);var KO={encoding:"utf8",mode:438,flag:s0.FLAGS[s0.FLAGS.a]};Xt.getAppendFileOpts=Qm(KO);Xt.getAppendFileOptsAndCb=_g(Xt.getAppendFileOpts);var JO={bigint:!1},ZO=(t={})=>Object.assign({},JO,t);Xt.getStatOptions=ZO;var XO=(t,e)=>typeof t=="function"?[(0,Xt.getStatOptions)(),t]:[(0,Xt.getStatOptions)(t),(0,vT.validateCallback)(e)];Xt.getStatOptsAndCb=XO;var QO=Xt.optsDefaults;Xt.getRealpathOptions=Qm(QO);Xt.getRealpathOptsAndCb=_g(Xt.getRealpathOptions);Xt.writeFileDefaults={encoding:"utf8",mode:438,flag:s0.FLAGS[s0.FLAGS.w]};Xt.getWriteFileOptions=Qm(Xt.writeFileDefaults)});var gT=an(u0=>{"use strict";Object.defineProperty(u0,"__esModule",{value:!0});u0.Dir=void 0;var eA=a_(),tA=qy(),dS=class{constructor(e,r){this.link=e,this.options=r,this.iteratorInfo=[],this.path=e.getParentPath(),this.iteratorInfo.push(e.children[Symbol.iterator]())}wrapAsync(e,r,n){(0,eA.validateCallback)(n),setImmediate(()=>{let i;try{i=e.apply(this,r)}catch(a){n(a);return}n(null,i)})}isFunction(e){return typeof e=="function"}promisify(e,r){return(...n)=>new Promise((i,a)=>{this.isFunction(e[r])?e[r].bind(e)(...n,(c,g)=>{c&&a(c),i(g)}):a("Not a function")})}closeBase(){}readBase(e){let r,n,i,a;do{do if({done:r,value:n}=e[e.length-1].next(),!r)[i,a]=n;else break;while(i==="."||i==="..");if(r){if(e.pop(),e.length===0)break;r=!1}else return this.options.recursive&&a.children.size&&e.push(a.children[Symbol.iterator]()),tA.default.build(a,this.options.encoding)}while(!r);return null}closeBaseAsync(e){this.wrapAsync(this.closeBase,[],e)}close(e){if(typeof e=="function")this.closeBaseAsync(e);else return this.promisify(this,"closeBaseAsync")()}closeSync(){this.closeBase()}readBaseAsync(e){this.wrapAsync(this.readBase,[this.iteratorInfo],e)}read(e){if(typeof e=="function")this.readBaseAsync(e);else return this.promisify(this,"readBaseAsync")()}readSync(){return this.readBase(this.iteratorInfo)}[Symbol.asyncIterator](){let e=[],r=this;e.push(r.link.children[Symbol.iterator]());let n={readBaseAsync(i){r.wrapAsync(r.readBase,[e],i)}};return{async next(){let i=await r.promisify(n,"readBaseAsync")();return i!==null?{done:!1,value:i}:{done:!0,value:void 0}},[Symbol.asyncIterator](){throw new Error("Not implemented")}}}};u0.Dir=dS});var CT=an(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});ql.FSWatcher=ql.StatWatcher=ql.Volume=void 0;ql.filenameToSteps=cv;ql.pathToSteps=IA;ql.dataToStr=NA;ql.toUnixTimestamp=Vf;var rp=require("path"),c0=yE(),pS=Uy(),rA=qy(),jh=t_(),s_=wE(),v0=eS(),ET=zw(),nA=SE(),m0=require("stream"),nm=Ph(),TT=require("events"),wg=V_(),iA=xE(),IT=require("util"),aA=OE(),oA=dT(),K_=Xy(),Fn=hT(),de=a_(),sA=gT(),uA=rp.resolve,{O_RDONLY:vS,O_WRONLY:_T,O_RDWR:cA,O_CREAT:yT,O_EXCL:lA,O_TRUNC:fA,O_APPEND:dA,O_DIRECTORY:pA,O_SYMLINK:wT,F_OK:ST,COPYFILE_EXCL:vA,COPYFILE_FICLONE_FORCE:mA}=nm.constants,{sep:im,relative:J_,join:NT,dirname:hA}=rp.posix?rp.posix:rp,gA=128,_A="EPERM",Fh="ENOENT",mS="EBADF",yA="EINVAL",yg="EEXIST",Uh="ENOTDIR",wA="EMFILE",rm="EACCES",bT="EISDIR",SA="ENOTEMPTY",bA="ENOSYS",EA="ERR_FS_EISDIR",TA="ERR_OUT_OF_RANGE",l0=(t,e=ET.default.cwd())=>uA(e,t);if(de.isWin){let t=l0;l0=(e,r)=>(0,de.unixify)(t(e,r))}function cv(t,e){let n=l0(t,e).substring(1);return n?n.split(im):[]}function IA(t){return cv((0,de.pathToFilename)(t))}function NA(t,e=wg.ENCODING_UTF8){return jh.Buffer.isBuffer(t)?t.toString(e):t instanceof Uint8Array?(0,jh.bufferFrom)(t).toString(e):String(t)}function Vf(t){if(typeof t=="string"&&+t==t)return+t;if(t instanceof Date)return t.getTime()/1e3;if(isFinite(t))return t<0?Date.now()/1e3:t;throw new Error("Cannot parse time: "+t)}function u_(t){if(typeof t!="number")throw TypeError(K_.ERRSTR.UID)}function c_(t){if(typeof t!="number")throw TypeError(K_.ERRSTR.GID)}function DA(t){let e={};function r(n,i){for(let a in i){let c=i[a],g=NT(n,a);typeof c=="string"||c instanceof jh.Buffer?e[g]=c:typeof c=="object"&&c!==null&&Object.keys(c).length>0?r(g,c):e[g]=null}}return r("",t),e}var W_=()=>{throw new Error("Not implemented")},f0=class t{static fromJSON(e,r){let n=new t;return n.fromJSON(e,r),n}static fromNestedJSON(e,r){let n=new t;return n.fromNestedJSON(e,r),n}get promises(){if(this.promisesApi===null)throw new Error("Promise is not supported in this environment.");return this.promisesApi}constructor(e={}){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.maxFiles=1e4,this.openFiles=0,this.promisesApi=new aA.FsPromises(this,iA.FileHandle),this.statWatchers={},this.cpSync=W_,this.statfsSync=W_,this.cp=W_,this.statfs=W_,this.openAsBlob=W_,this.props=Object.assign({Node:c0.Node,Link:c0.Link,File:c0.File},e);let r=this.createLink();r.setNode(this.createNode(nm.constants.S_IFDIR|511));let n=this;this.StatWatcher=class extends d0{constructor(){super(n)}};let i=am;this.ReadStream=class extends i{constructor(...c){super(n,...c)}};let a=np;this.WriteStream=class extends a{constructor(...c){super(n,...c)}},this.FSWatcher=class extends p0{constructor(){super(n)}},r.setChild(".",r),r.getNode().nlink++,r.setChild("..",r),r.getNode().nlink++,this.root=r}createLink(e,r,n=!1,i){if(!e)return new this.props.Link(this,null,"");if(!r)throw new Error("createLink: name cannot be empty");let a=i??(n?511:438),g=i&&i&nm.constants.S_IFMT?i&nm.constants.S_IFMT:n?nm.constants.S_IFDIR:nm.constants.S_IFREG,_=a&~nm.constants.S_IFMT|g;return e.createChild(r,this.createNode(_))}deleteLink(e){let r=e.parent;return r?(r.deleteChild(e),!0):!1}newInoNumber(){let e=this.releasedInos.pop();return e||(this.ino=(this.ino+1)%4294967295,this.ino)}newFdNumber(){let e=this.releasedFds.pop();return typeof e=="number"?e:t.fd--}createNode(e){let r=new this.props.Node(this.newInoNumber(),e);return this.inodes[r.ino]=r,r}deleteNode(e){e.del(),delete this.inodes[e.ino],this.releasedInos.push(e.ino)}walk(e,r=!1,n=!1,i=!1,a){var c;let g,_;e instanceof c0.Link?(g=e.steps,_=im+g.join(im)):typeof e=="string"?(g=cv(e),_=e):(g=e,_=im+g.join(im));let b=this.root,C=0;for(;C<g.length;){let j=b.getNode();if(j.isDirectory()){if(i&&!j.canExecute())throw(0,de.createError)(rm,a,_)}else if(C<g.length-1)throw(0,de.createError)(Uh,a,_);if(b=(c=b.getChild(g[C]))!==null&&c!==void 0?c:null,!b){if(n)throw(0,de.createError)(Fh,a,_);return null}if(j=b==null?void 0:b.getNode(),r&&j.isSymlink()){let K=rp.isAbsolute(j.symlink)?j.symlink:NT(rp.dirname(b.getPath()),j.symlink);g=cv(K).concat(g.slice(C+1)),b=this.root,C=0;continue}C++}return b}getLink(e){return this.walk(e,!1,!1,!1)}getLinkOrThrow(e,r){return this.walk(e,!1,!0,!0,r)}getResolvedLink(e){return this.walk(e,!0,!1,!1)}getResolvedLinkOrThrow(e,r){return this.walk(e,!0,!0,!0,r)}resolveSymlinks(e){return this.getResolvedLink(e.steps.slice(1))}getLinkAsDirOrThrow(e,r){let n=this.getLinkOrThrow(e,r);if(!n.getNode().isDirectory())throw(0,de.createError)(Uh,r,e);return n}getLinkParent(e){return this.getLink(e.slice(0,-1))}getLinkParentAsDirOrThrow(e,r){let n=(e instanceof Array?e:cv(e)).slice(0,-1),i=im+n.join(im),a=this.getLinkOrThrow(i,r);if(!a.getNode().isDirectory())throw(0,de.createError)(Uh,r,i);return a}getFileByFd(e){return this.fds[String(e)]}getFileByFdOrThrow(e,r){if(!(0,de.isFd)(e))throw TypeError(K_.ERRSTR.FD);let n=this.getFileByFd(e);if(!n)throw(0,de.createError)(mS,r);return n}wrapAsync(e,r,n){(0,de.validateCallback)(n),(0,s_.default)(()=>{let i;try{i=e.apply(this,r)}catch(a){n(a);return}n(null,i)})}_toJSON(e=this.root,r={},n,i){let a=!0,c=e.children;e.getNode().isFile()&&(c=new Map([[e.getName(),e.parent.getChild(e.getName())]]),e=e.parent);for(let _ of c.keys()){if(_==="."||_==="..")continue;a=!1;let b=e.getChild(_);if(!b)throw new Error("_toJSON: unexpected undefined");let C=b.getNode();if(C.isFile()){let j=b.getPath();n&&(j=J_(n,j)),r[j]=i?C.getBuffer():C.getString()}else C.isDirectory()&&this._toJSON(b,r,n,i)}let g=e.getPath();return n&&(g=J_(n,g)),g&&a&&(r[g]=null),r}toJSON(e,r={},n=!1,i=!1){let a=[];if(e){Array.isArray(e)||(e=[e]);for(let c of e){let g=(0,de.pathToFilename)(c),_=this.getResolvedLink(g);_&&a.push(_)}}else a.push(this.root);if(!a.length)return r;for(let c of a)this._toJSON(c,r,n?c.getPath():"",i);return r}fromJSON(e,r=ET.default.cwd()){for(let n in e){let i=e[n];if(n=l0(n,r),typeof i=="string"||i instanceof jh.Buffer){let a=hA(n);this.mkdirpBase(a,511),this.writeFileSync(n,i)}else this.mkdirpBase(n,511)}}fromNestedJSON(e,r){this.fromJSON(DA(e),r)}toTree(e={separator:im}){return(0,oA.toTreeSync)(this,e)}reset(){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.openFiles=0,this.root=this.createLink(),this.root.setNode(this.createNode(nm.constants.S_IFDIR|511))}mountSync(e,r){this.fromJSON(r,e)}openLink(e,r,n=!0){if(this.openFiles>=this.maxFiles)throw(0,de.createError)(wA,"open",e.getPath());let i=e;n&&(i=this.getResolvedLinkOrThrow(e.getPath(),"open"));let a=i.getNode();if(a.isDirectory()){if((r&(vS|cA|_T))!==vS)throw(0,de.createError)(bT,"open",e.getPath())}else if(r&pA)throw(0,de.createError)(Uh,"open",e.getPath());if(!(r&_T)&&!a.canRead()||!(r&vS)&&!a.canWrite())throw(0,de.createError)(rm,"open",e.getPath());let c=new this.props.File(e,a,r,this.newFdNumber());return this.fds[c.fd]=c,this.openFiles++,r&fA&&c.truncate(),c}openFile(e,r,n,i=!0){let a=cv(e),c;try{if(c=i?this.getResolvedLinkOrThrow(e,"open"):this.getLinkOrThrow(e,"open"),c&&r&yT&&r&lA)throw(0,de.createError)(yg,"open",e)}catch(g){if(g.code===Fh&&r&yT){let _=rp.dirname(e),b=this.getResolvedLinkOrThrow(_),C=b.getNode();if(!C.isDirectory())throw(0,de.createError)(Uh,"open",e);if(!C.canExecute()||!C.canWrite())throw(0,de.createError)(rm,"open",e);n??(n=438),c=this.createLink(b,a[a.length-1],!1,n)}else throw g}if(c)return this.openLink(c,r,i);throw(0,de.createError)(Fh,"open",e)}openBase(e,r,n,i=!0){let a=this.openFile(e,r,n,i);if(!a)throw(0,de.createError)(Fh,"open",e);return a.fd}openSync(e,r,n=438){let i=(0,de.modeToNumber)(n),a=(0,de.pathToFilename)(e),c=(0,de.flagsToNumber)(r);return this.openBase(a,c,i,!(c&wT))}open(e,r,n,i){let a=n,c=i;typeof n=="function"&&(a=438,c=n),a=a||438;let g=(0,de.modeToNumber)(a),_=(0,de.pathToFilename)(e),b=(0,de.flagsToNumber)(r);this.wrapAsync(this.openBase,[_,b,g,!(b&wT)],c)}closeFile(e){this.fds[e.fd]&&(this.openFiles--,delete this.fds[e.fd],this.releasedFds.push(e.fd))}closeSync(e){(0,de.validateFd)(e);let r=this.getFileByFdOrThrow(e,"close");this.closeFile(r)}close(e,r){(0,de.validateFd)(e);let n=this.getFileByFdOrThrow(e,"close");this.wrapAsync(this.closeFile,[n],r)}openFileOrGetById(e,r,n){if(typeof e=="number"){let i=this.fds[e];if(!i)throw(0,de.createError)(Fh);return i}else return this.openFile((0,de.pathToFilename)(e),r,n)}readBase(e,r,n,i,a){if(r.byteLength<i)throw(0,de.createError)(TA,"read",void 0,void 0,RangeError);let c=this.getFileByFdOrThrow(e);if(c.node.isSymlink())throw(0,de.createError)(_A,"read",c.link.getPath());return c.read(r,Number(n),Number(i),a===-1||typeof a!="number"?void 0:a)}readSync(e,r,n,i,a){return(0,de.validateFd)(e),this.readBase(e,r,n,i,a)}read(e,r,n,i,a,c){if((0,de.validateCallback)(c),i===0)return(0,v0.default)(()=>{c&&c(null,0,r)});(0,s_.default)(()=>{try{let g=this.readBase(e,r,n,i,a);c(null,g,r)}catch(g){c(g)}})}readvBase(e,r,n){let i=this.getFileByFdOrThrow(e),a=n??void 0;a===-1&&(a=void 0);let c=0;for(let g of r){let _=i.read(g,0,g.byteLength,a);if(a=void 0,c+=_,_<g.byteLength)break}return c}readv(e,r,n,i){let a=n,c=i;typeof n=="function"&&(a=null,c=n),(0,de.validateCallback)(c),(0,s_.default)(()=>{try{let g=this.readvBase(e,r,a);c(null,g,r)}catch(g){c(g)}})}readvSync(e,r,n){return(0,de.validateFd)(e),this.readvBase(e,r,n)}readFileBase(e,r,n){let i,c=typeof e=="number"&&(0,de.isFd)(e),g;if(c)g=e;else{let _=(0,de.pathToFilename)(e),b=this.getResolvedLinkOrThrow(_,"open");if(b.getNode().isDirectory())throw(0,de.createError)(bT,"open",b.getPath());g=this.openSync(e,r)}try{i=(0,de.bufferToEncoding)(this.getFileByFdOrThrow(g).getBuffer(),n)}finally{c||this.closeSync(g)}return i}readFileSync(e,r){let n=(0,Fn.getReadFileOptions)(r),i=(0,de.flagsToNumber)(n.flag);return this.readFileBase(e,i,n.encoding)}readFile(e,r,n){let[i,a]=(0,Fn.optsAndCbGenerator)(Fn.getReadFileOptions)(r,n),c=(0,de.flagsToNumber)(i.flag);this.wrapAsync(this.readFileBase,[e,c,i.encoding],a)}writeBase(e,r,n,i,a){let c=this.getFileByFdOrThrow(e,"write");if(c.node.isSymlink())throw(0,de.createError)(mS,"write",c.link.getPath());return c.write(r,n,i,a===-1||typeof a!="number"?void 0:a)}writeSync(e,r,n,i,a){let[,c,g,_,b]=(0,de.getWriteSyncArgs)(e,r,n,i,a);return this.writeBase(e,c,g,_,b)}write(e,r,n,i,a,c){let[,g,_,b,C,j,K]=(0,de.getWriteArgs)(e,r,n,i,a,c);(0,s_.default)(()=>{try{let te=this.writeBase(e,_,b,C,j);g?K(null,te,r):K(null,te,_)}catch(te){K(te)}})}writevBase(e,r,n){let i=this.getFileByFdOrThrow(e),a=n??void 0;a===-1&&(a=void 0);let c=0;for(let g of r){let _=jh.Buffer.from(g.buffer,g.byteOffset,g.byteLength),b=i.write(_,0,_.byteLength,a);if(a=void 0,c+=b,b<_.byteLength)break}return c}writev(e,r,n,i){let a=n,c=i;typeof n=="function"&&(a=null,c=n),(0,de.validateCallback)(c),(0,s_.default)(()=>{try{let g=this.writevBase(e,r,a);c(null,g,r)}catch(g){c(g)}})}writevSync(e,r,n){return(0,de.validateFd)(e),this.writevBase(e,r,n)}writeFileBase(e,r,n,i){let a=typeof e=="number",c;a?c=e:c=this.openBase((0,de.pathToFilename)(e),n,i);let g=0,_=r.length,b=n&dA?void 0:0;try{for(;_>0;){let C=this.writeSync(c,r,g,_,b);g+=C,_-=C,b!==void 0&&(b+=C)}}finally{a||this.closeSync(c)}}writeFileSync(e,r,n){let i=(0,Fn.getWriteFileOptions)(n),a=(0,de.flagsToNumber)(i.flag),c=(0,de.modeToNumber)(i.mode),g=(0,de.dataToBuffer)(r,i.encoding);this.writeFileBase(e,g,a,c)}writeFile(e,r,n,i){let a=n,c=i;typeof n=="function"&&(a=Fn.writeFileDefaults,c=n);let g=(0,de.validateCallback)(c),_=(0,Fn.getWriteFileOptions)(a),b=(0,de.flagsToNumber)(_.flag),C=(0,de.modeToNumber)(_.mode),j=(0,de.dataToBuffer)(r,_.encoding);this.wrapAsync(this.writeFileBase,[e,j,b,C],g)}linkBase(e,r){let n;try{n=this.getLinkOrThrow(e,"link")}catch(_){throw _.code&&(_=(0,de.createError)(_.code,"link",e,r)),_}let i=rp.dirname(r),a;try{a=this.getLinkOrThrow(i,"link")}catch(_){throw _.code&&(_=(0,de.createError)(_.code,"link",e,r)),_}let c=rp.basename(r);if(a.getChild(c))throw(0,de.createError)(yg,"link",e,r);let g=n.getNode();g.nlink++,a.createChild(c,g)}copyFileBase(e,r,n){let i=this.readFileSync(e);if(n&vA&&this.existsSync(r))throw(0,de.createError)(yg,"copyFile",e,r);if(n&mA)throw(0,de.createError)(bA,"copyFile",e,r);this.writeFileBase(r,i,K_.FLAGS.w,438)}copyFileSync(e,r,n){let i=(0,de.pathToFilename)(e),a=(0,de.pathToFilename)(r);return this.copyFileBase(i,a,(n||0)|0)}copyFile(e,r,n,i){let a=(0,de.pathToFilename)(e),c=(0,de.pathToFilename)(r),g,_;typeof n=="function"?(g=0,_=n):(g=n,_=i),(0,de.validateCallback)(_),this.wrapAsync(this.copyFileBase,[a,c,g],_)}linkSync(e,r){let n=(0,de.pathToFilename)(e),i=(0,de.pathToFilename)(r);this.linkBase(n,i)}link(e,r,n){let i=(0,de.pathToFilename)(e),a=(0,de.pathToFilename)(r);this.wrapAsync(this.linkBase,[i,a],n)}unlinkBase(e){let r=this.getLinkOrThrow(e,"unlink");if(r.length)throw Error("Dir not empty...");this.deleteLink(r);let n=r.getNode();n.nlink--,n.nlink<=0&&this.deleteNode(n)}unlinkSync(e){let r=(0,de.pathToFilename)(e);this.unlinkBase(r)}unlink(e,r){let n=(0,de.pathToFilename)(e);this.wrapAsync(this.unlinkBase,[n],r)}symlinkBase(e,r){let n=cv(r),i;try{i=this.getLinkParentAsDirOrThrow(n)}catch(_){throw _.code&&(_=(0,de.createError)(_.code,"symlink",e,r)),_}let a=n[n.length-1];if(i.getChild(a))throw(0,de.createError)(yg,"symlink",e,r);let c=i.getNode();if(!c.canExecute()||!c.canWrite())throw(0,de.createError)(rm,"symlink",e,r);let g=i.createChild(a);return g.getNode().makeSymlink(e),g}symlinkSync(e,r,n){let i=(0,de.pathToFilename)(e),a=(0,de.pathToFilename)(r);this.symlinkBase(i,a)}symlink(e,r,n,i){let a=(0,de.validateCallback)(typeof n=="function"?n:i),c=(0,de.pathToFilename)(e),g=(0,de.pathToFilename)(r);this.wrapAsync(this.symlinkBase,[c,g],a)}realpathBase(e,r){let n=this.getResolvedLinkOrThrow(e,"realpath");return(0,wg.strToEncoding)(n.getPath()||"/",r)}realpathSync(e,r){return this.realpathBase((0,de.pathToFilename)(e),(0,Fn.getRealpathOptions)(r).encoding)}realpath(e,r,n){let[i,a]=(0,Fn.getRealpathOptsAndCb)(r,n),c=(0,de.pathToFilename)(e);this.wrapAsync(this.realpathBase,[c,i.encoding],a)}lstatBase(e,r=!1,n=!1){let i;try{i=this.getLinkOrThrow(e,"lstat")}catch(a){if(a.code===Fh&&!n)return;throw a}return pS.default.build(i.getNode(),r)}lstatSync(e,r){let{throwIfNoEntry:n=!0,bigint:i=!1}=(0,Fn.getStatOptions)(r);return this.lstatBase((0,de.pathToFilename)(e),i,n)}lstat(e,r,n){let[{throwIfNoEntry:i=!0,bigint:a=!1},c]=(0,Fn.getStatOptsAndCb)(r,n);this.wrapAsync(this.lstatBase,[(0,de.pathToFilename)(e),a,i],c)}statBase(e,r=!1,n=!0){let i;try{i=this.getResolvedLinkOrThrow(e,"stat")}catch(a){if(a.code===Fh&&!n)return;throw a}return pS.default.build(i.getNode(),r)}statSync(e,r){let{bigint:n=!0,throwIfNoEntry:i=!0}=(0,Fn.getStatOptions)(r);return this.statBase((0,de.pathToFilename)(e),n,i)}stat(e,r,n){let[{bigint:i=!1,throwIfNoEntry:a=!0},c]=(0,Fn.getStatOptsAndCb)(r,n);this.wrapAsync(this.statBase,[(0,de.pathToFilename)(e),i,a],c)}fstatBase(e,r=!1){let n=this.getFileByFd(e);if(!n)throw(0,de.createError)(mS,"fstat");return pS.default.build(n.node,r)}fstatSync(e,r){return this.fstatBase(e,(0,Fn.getStatOptions)(r).bigint)}fstat(e,r,n){let[i,a]=(0,Fn.getStatOptsAndCb)(r,n);this.wrapAsync(this.fstatBase,[e,i.bigint],a)}renameBase(e,r){let n;try{n=this.getResolvedLinkOrThrow(e)}catch(b){throw b.code&&(b=(0,de.createError)(b.code,"rename",e,r)),b}let i;try{i=this.getLinkParentAsDirOrThrow(r)}catch(b){throw b.code&&(b=(0,de.createError)(b.code,"rename",e,r)),b}let a=n.parent,c=a.getNode(),g=i.getNode();if(!c.canExecute()||!c.canWrite()||!g.canExecute()||!g.canWrite())throw(0,de.createError)(rm,"rename",e,r);a.deleteChild(n);let _=rp.basename(r);n.name=_,n.steps=[...i.steps,_],i.setChild(n.getName(),n)}renameSync(e,r){let n=(0,de.pathToFilename)(e),i=(0,de.pathToFilename)(r);this.renameBase(n,i)}rename(e,r,n){let i=(0,de.pathToFilename)(e),a=(0,de.pathToFilename)(r);this.wrapAsync(this.renameBase,[i,a],n)}existsBase(e){return!!this.statBase(e)}existsSync(e){try{return this.existsBase((0,de.pathToFilename)(e))}catch{return!1}}exists(e,r){let n=(0,de.pathToFilename)(e);if(typeof r!="function")throw Error(K_.ERRSTR.CB);(0,s_.default)(()=>{try{r(this.existsBase(n))}catch{r(!1)}})}accessBase(e,r){let n=this.getLinkOrThrow(e,"access")}accessSync(e,r=ST){let n=(0,de.pathToFilename)(e);r=r|0,this.accessBase(n,r)}access(e,r,n){let i=ST,a;typeof r!="function"?(i=r|0,a=(0,de.validateCallback)(n)):a=r;let c=(0,de.pathToFilename)(e);this.wrapAsync(this.accessBase,[c,i],a)}appendFileSync(e,r,n){let i=(0,Fn.getAppendFileOpts)(n);(!i.flag||(0,de.isFd)(e))&&(i.flag="a"),this.writeFileSync(e,r,i)}appendFile(e,r,n,i){let[a,c]=(0,Fn.getAppendFileOptsAndCb)(n,i);(!a.flag||(0,de.isFd)(e))&&(a.flag="a"),this.writeFile(e,r,a,c)}readdirBase(e,r){let n=cv(e),i=this.getResolvedLinkOrThrow(e,"scandir"),a=i.getNode();if(!a.isDirectory())throw(0,de.createError)(Uh,"scandir",e);if(!a.canRead())throw(0,de.createError)(rm,"scandir",e);let c=[];for(let _ of i.children.keys()){let b=i.getChild(_);if(!(!b||_==="."||_==="..")&&(c.push(rA.default.build(b,r.encoding)),r.recursive&&b.children.size)){let C=Object.assign(Object.assign({},r),{recursive:!0,withFileTypes:!0}),j=this.readdirBase(b.getPath(),C);c.push(...j)}}if(!de.isWin&&r.encoding!=="buffer"&&c.sort((_,b)=>_.name<b.name?-1:_.name>b.name?1:0),r.withFileTypes)return c;let g=e;return de.isWin&&(g=g.replace(/\\/g,"/")),c.map(_=>{if(r.recursive){let b=rp.join(_.parentPath,_.name.toString());return de.isWin&&(b=b.replace(/\\/g,"/")),b.replace(g+rp.posix.sep,"")}return _.name})}readdirSync(e,r){let n=(0,Fn.getReaddirOptions)(r),i=(0,de.pathToFilename)(e);return this.readdirBase(i,n)}readdir(e,r,n){let[i,a]=(0,Fn.getReaddirOptsAndCb)(r,n),c=(0,de.pathToFilename)(e);this.wrapAsync(this.readdirBase,[c,i],a)}readlinkBase(e,r){let i=this.getLinkOrThrow(e,"readlink").getNode();if(!i.isSymlink())throw(0,de.createError)(yA,"readlink",e);return(0,wg.strToEncoding)(i.symlink,r)}readlinkSync(e,r){let n=(0,Fn.getDefaultOpts)(r),i=(0,de.pathToFilename)(e);return this.readlinkBase(i,n.encoding)}readlink(e,r,n){let[i,a]=(0,Fn.getDefaultOptsAndCb)(r,n),c=(0,de.pathToFilename)(e);this.wrapAsync(this.readlinkBase,[c,i.encoding],a)}fsyncBase(e){this.getFileByFdOrThrow(e,"fsync")}fsyncSync(e){this.fsyncBase(e)}fsync(e,r){this.wrapAsync(this.fsyncBase,[e],r)}fdatasyncBase(e){this.getFileByFdOrThrow(e,"fdatasync")}fdatasyncSync(e){this.fdatasyncBase(e)}fdatasync(e,r){this.wrapAsync(this.fdatasyncBase,[e],r)}ftruncateBase(e,r){this.getFileByFdOrThrow(e,"ftruncate").truncate(r)}ftruncateSync(e,r){this.ftruncateBase(e,r)}ftruncate(e,r,n){let i=typeof r=="number"?r:0,a=(0,de.validateCallback)(typeof r=="number"?n:r);this.wrapAsync(this.ftruncateBase,[e,i],a)}truncateBase(e,r){let n=this.openSync(e,"r+");try{this.ftruncateSync(n,r)}finally{this.closeSync(n)}}truncateSync(e,r){if((0,de.isFd)(e))return this.ftruncateSync(e,r);this.truncateBase(e,r)}truncate(e,r,n){let i=typeof r=="number"?r:0,a=(0,de.validateCallback)(typeof r=="number"?n:r);if((0,de.isFd)(e))return this.ftruncate(e,i,a);this.wrapAsync(this.truncateBase,[e,i],a)}futimesBase(e,r,n){let a=this.getFileByFdOrThrow(e,"futimes").node;a.atime=new Date(r*1e3),a.mtime=new Date(n*1e3)}futimesSync(e,r,n){this.futimesBase(e,Vf(r),Vf(n))}futimes(e,r,n,i){this.wrapAsync(this.futimesBase,[e,Vf(r),Vf(n)],i)}utimesBase(e,r,n,i=!0){let c=(i?this.getResolvedLinkOrThrow(e,"utimes"):this.getLinkOrThrow(e,"lutimes")).getNode();c.atime=new Date(r*1e3),c.mtime=new Date(n*1e3)}utimesSync(e,r,n){this.utimesBase((0,de.pathToFilename)(e),Vf(r),Vf(n),!0)}utimes(e,r,n,i){this.wrapAsync(this.utimesBase,[(0,de.pathToFilename)(e),Vf(r),Vf(n),!0],i)}lutimesSync(e,r,n){this.utimesBase((0,de.pathToFilename)(e),Vf(r),Vf(n),!1)}lutimes(e,r,n,i){this.wrapAsync(this.utimesBase,[(0,de.pathToFilename)(e),Vf(r),Vf(n),!1],i)}mkdirBase(e,r){let n=cv(e);if(!n.length)throw(0,de.createError)(yg,"mkdir",e);let i=this.getLinkParentAsDirOrThrow(e,"mkdir"),a=n[n.length-1];if(i.getChild(a))throw(0,de.createError)(yg,"mkdir",e);let c=i.getNode();if(!c.canWrite()||!c.canExecute())throw(0,de.createError)(rm,"mkdir",e);i.createChild(a,this.createNode(nm.constants.S_IFDIR|r))}mkdirpBase(e,r){let n=!1,i=cv(e),a=null,c=i.length;for(c=i.length;c>=0&&(a=this.getResolvedLink(i.slice(0,c)),!a);c--);for(a||(a=this.root,c=0),a=this.getResolvedLinkOrThrow(im+i.slice(0,c).join(im),"mkdir"),c;c<i.length;c++){let g=a.getNode();if(g.isDirectory()){if(!g.canExecute()||!g.canWrite())throw(0,de.createError)(rm,"mkdir",e)}else throw(0,de.createError)(Uh,"mkdir",e);n=!0,a=a.createChild(i[c],this.createNode(nm.constants.S_IFDIR|r))}return n?e:void 0}mkdirSync(e,r){let n=(0,Fn.getMkdirOptions)(r),i=(0,de.modeToNumber)(n.mode,511),a=(0,de.pathToFilename)(e);if(n.recursive)return this.mkdirpBase(a,i);this.mkdirBase(a,i)}mkdir(e,r,n){let i=(0,Fn.getMkdirOptions)(r),a=(0,de.validateCallback)(typeof r=="function"?r:n),c=(0,de.modeToNumber)(i.mode,511),g=(0,de.pathToFilename)(e);i.recursive?this.wrapAsync(this.mkdirpBase,[g,c],a):this.wrapAsync(this.mkdirBase,[g,c],a)}mkdtempBase(e,r,n=5){let i=e+(0,de.genRndStr6)();try{return this.mkdirBase(i,511),(0,wg.strToEncoding)(i,r)}catch(a){if(a.code===yg){if(n>1)return this.mkdtempBase(e,r,n-1);throw Error("Could not create temp dir.")}else throw a}}mkdtempSync(e,r){let{encoding:n}=(0,Fn.getDefaultOpts)(r);if(!e||typeof e!="string")throw new TypeError("filename prefix is required");return(0,de.nullCheck)(e),this.mkdtempBase(e,n)}mkdtemp(e,r,n){let[{encoding:i},a]=(0,Fn.getDefaultOptsAndCb)(r,n);if(!e||typeof e!="string")throw new TypeError("filename prefix is required");(0,de.nullCheck)(e)&&this.wrapAsync(this.mkdtempBase,[e,i],a)}rmdirBase(e,r){let n=(0,Fn.getRmdirOptions)(r),i=this.getLinkAsDirOrThrow(e,"rmdir");if(i.length&&!n.recursive)throw(0,de.createError)(SA,"rmdir",e);this.deleteLink(i)}rmdirSync(e,r){this.rmdirBase((0,de.pathToFilename)(e),r)}rmdir(e,r,n){let i=(0,Fn.getRmdirOptions)(r),a=(0,de.validateCallback)(typeof r=="function"?r:n);this.wrapAsync(this.rmdirBase,[(0,de.pathToFilename)(e),i],a)}rmBase(e,r={}){let n;try{n=this.getResolvedLinkOrThrow(e,"stat")}catch(i){if(i.code===Fh&&r.force)return;throw i}if(n.getNode().isDirectory()&&!r.recursive)throw(0,de.createError)(EA,"rm",e);if(!n.parent.getNode().canWrite())throw(0,de.createError)(rm,"rm",e);this.deleteLink(n)}rmSync(e,r){this.rmBase((0,de.pathToFilename)(e),r)}rm(e,r,n){let[i,a]=(0,Fn.getRmOptsAndCb)(r,n);this.wrapAsync(this.rmBase,[(0,de.pathToFilename)(e),i],a)}fchmodBase(e,r){this.getFileByFdOrThrow(e,"fchmod").chmod(r)}fchmodSync(e,r){this.fchmodBase(e,(0,de.modeToNumber)(r))}fchmod(e,r,n){this.wrapAsync(this.fchmodBase,[e,(0,de.modeToNumber)(r)],n)}chmodBase(e,r,n=!0){(n?this.getResolvedLinkOrThrow(e,"chmod"):this.getLinkOrThrow(e,"chmod")).getNode().chmod(r)}chmodSync(e,r){let n=(0,de.modeToNumber)(r),i=(0,de.pathToFilename)(e);this.chmodBase(i,n,!0)}chmod(e,r,n){let i=(0,de.modeToNumber)(r),a=(0,de.pathToFilename)(e);this.wrapAsync(this.chmodBase,[a,i],n)}lchmodBase(e,r){this.chmodBase(e,r,!1)}lchmodSync(e,r){let n=(0,de.modeToNumber)(r),i=(0,de.pathToFilename)(e);this.lchmodBase(i,n)}lchmod(e,r,n){let i=(0,de.modeToNumber)(r),a=(0,de.pathToFilename)(e);this.wrapAsync(this.lchmodBase,[a,i],n)}fchownBase(e,r,n){this.getFileByFdOrThrow(e,"fchown").chown(r,n)}fchownSync(e,r,n){u_(r),c_(n),this.fchownBase(e,r,n)}fchown(e,r,n,i){u_(r),c_(n),this.wrapAsync(this.fchownBase,[e,r,n],i)}chownBase(e,r,n){this.getResolvedLinkOrThrow(e,"chown").getNode().chown(r,n)}chownSync(e,r,n){u_(r),c_(n),this.chownBase((0,de.pathToFilename)(e),r,n)}chown(e,r,n,i){u_(r),c_(n),this.wrapAsync(this.chownBase,[(0,de.pathToFilename)(e),r,n],i)}lchownBase(e,r,n){this.getLinkOrThrow(e,"lchown").getNode().chown(r,n)}lchownSync(e,r,n){u_(r),c_(n),this.lchownBase((0,de.pathToFilename)(e),r,n)}lchown(e,r,n,i){u_(r),c_(n),this.wrapAsync(this.lchownBase,[(0,de.pathToFilename)(e),r,n],i)}watchFile(e,r,n){let i=(0,de.pathToFilename)(e),a=r,c=n;if(typeof a=="function"&&(c=r,a=null),typeof c!="function")throw Error('"watchFile()" requires a listener function');let g=5007,_=!0;a&&typeof a=="object"&&(typeof a.interval=="number"&&(g=a.interval),typeof a.persistent=="boolean"&&(_=a.persistent));let b=this.statWatchers[i];return b||(b=new this.StatWatcher,b.start(i,_,g),this.statWatchers[i]=b),b.addListener("change",c),b}unwatchFile(e,r){let n=(0,de.pathToFilename)(e),i=this.statWatchers[n];i&&(typeof r=="function"?i.removeListener("change",r):i.removeAllListeners("change"),i.listenerCount("change")===0&&(i.stop(),delete this.statWatchers[n]))}createReadStream(e,r){return new this.ReadStream(e,r)}createWriteStream(e,r){return new this.WriteStream(e,r)}watch(e,r,n){let i=(0,de.pathToFilename)(e),a=r;typeof r=="function"&&(n=r,a=null);let{persistent:c,recursive:g,encoding:_}=(0,Fn.getDefaultOpts)(a);c===void 0&&(c=!0),g===void 0&&(g=!1);let b=new this.FSWatcher;return b.start(i,c,g,_),n&&b.addListener("change",n),b}opendirBase(e,r){let n=this.getResolvedLinkOrThrow(e,"scandir");if(!n.getNode().isDirectory())throw(0,de.createError)(Uh,"scandir",e);return new sA.Dir(n,r)}opendirSync(e,r){let n=(0,Fn.getOpendirOptions)(r),i=(0,de.pathToFilename)(e);return this.opendirBase(i,n)}opendir(e,r,n){let[i,a]=(0,Fn.getOpendirOptsAndCb)(r,n),c=(0,de.pathToFilename)(e);this.wrapAsync(this.opendirBase,[c,i],a)}};ql.Volume=f0;f0.fd=2147483647;function CA(t){t.emit("stop")}var d0=class extends TT.EventEmitter{constructor(e){super(),this.onInterval=()=>{try{let r=this.vol.statSync(this.filename);this.hasChanged(r)&&(this.emit("change",r,this.prev),this.prev=r)}finally{this.loop()}},this.vol=e}loop(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)}hasChanged(e){return e.mtimeMs>this.prev.mtimeMs||e.nlink!==this.prev.nlink}start(e,r=!0,n=5007){this.filename=(0,de.pathToFilename)(e),this.setTimeout=r?setTimeout.bind(typeof globalThis<"u"?globalThis:global):nA.default,this.interval=n,this.prev=this.vol.statSync(this.filename),this.loop()}stop(){clearTimeout(this.timeoutRef),(0,v0.default)(()=>{CA.call(this,this)})}};ql.StatWatcher=d0;var tp;function RA(t){tp=(0,jh.bufferAllocUnsafe)(t),tp.used=0}IT.inherits(am,m0.Readable);ql.ReadStream=am;function am(t,e,r){if(!(this instanceof am))return new am(t,e,r);if(this._vol=t,r=Object.assign({},(0,Fn.getOptions)(r,{})),r.highWaterMark===void 0&&(r.highWaterMark=64*1024),m0.Readable.call(this,r),this.path=(0,de.pathToFilename)(e),this.fd=r.fd===void 0?null:typeof r.fd!="number"?r.fd.fd:r.fd,this.flags=r.flags===void 0?"r":r.flags,this.mode=r.mode===void 0?438:r.mode,this.start=r.start,this.end=r.end,this.autoClose=r.autoClose===void 0?!0:r.autoClose,this.pos=void 0,this.bytesRead=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw new Error('"start" option must be <= "end" option');this.pos=this.start}typeof this.fd!="number"&&this.open(),this.on("end",function(){this.autoClose&&this.destroy&&this.destroy()})}am.prototype.open=function(){var t=this;this._vol.open(this.path,this.flags,this.mode,(e,r)=>{if(e){t.autoClose&&t.destroy&&t.destroy(),t.emit("error",e);return}t.fd=r,t.emit("open",r),t.read()})};am.prototype._read=function(t){if(typeof this.fd!="number")return this.once("open",function(){this._read(t)});if(this.destroyed)return;(!tp||tp.length-tp.used<gA)&&RA(this._readableState.highWaterMark);var e=tp,r=Math.min(tp.length-tp.used,t),n=tp.used;if(this.pos!==void 0&&(r=Math.min(this.end-this.pos+1,r)),r<=0)return this.push(null);var i=this;this._vol.read(this.fd,tp,tp.used,r,this.pos,a),this.pos!==void 0&&(this.pos+=r),tp.used+=r;function a(c,g){if(c)i.autoClose&&i.destroy&&i.destroy(),i.emit("error",c);else{var _=null;g>0&&(i.bytesRead+=g,_=e.slice(n,n+g)),i.push(_)}}};am.prototype._destroy=function(t,e){this.close(r=>{e(t||r)})};am.prototype.close=function(t){var e;if(t&&this.once("close",t),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",DT);return}return(0,v0.default)(()=>this.emit("close"))}typeof((e=this._readableState)===null||e===void 0?void 0:e.closed)=="boolean"?this._readableState.closed=!0:this.closed=!0,this._vol.close(this.fd,r=>{r?this.emit("error",r):this.emit("close")}),this.fd=null};function DT(t){this.close()}IT.inherits(np,m0.Writable);ql.WriteStream=np;function np(t,e,r){if(!(this instanceof np))return new np(t,e,r);if(this._vol=t,r=Object.assign({},(0,Fn.getOptions)(r,{})),m0.Writable.call(this,r),this.path=(0,de.pathToFilename)(e),this.fd=r.fd===void 0?null:typeof r.fd!="number"?r.fd.fd:r.fd,this.flags=r.flags===void 0?"w":r.flags,this.mode=r.mode===void 0?438:r.mode,this.start=r.start,this.autoClose=r.autoClose===void 0?!0:!!r.autoClose,this.pos=void 0,this.bytesWritten=0,this.pending=!0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.start<0)throw new Error('"start" must be >= zero');this.pos=this.start}r.encoding&&this.setDefaultEncoding(r.encoding),typeof this.fd!="number"&&this.open(),this.once("finish",function(){this.autoClose&&this.close()})}np.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,function(t,e){if(t){this.autoClose&&this.destroy&&this.destroy(),this.emit("error",t);return}this.fd=e,this.pending=!1,this.emit("open",e)}.bind(this))};np.prototype._write=function(t,e,r){if(!(t instanceof jh.Buffer||t instanceof Uint8Array))return this.emit("error",new Error("Invalid data"));if(typeof this.fd!="number")return this.once("open",function(){this._write(t,e,r)});var n=this;this._vol.write(this.fd,t,0,t.length,this.pos,(i,a)=>{if(i)return n.autoClose&&n.destroy&&n.destroy(),r(i);n.bytesWritten+=a,r()}),this.pos!==void 0&&(this.pos+=t.length)};np.prototype._writev=function(t,e){if(typeof this.fd!="number")return this.once("open",function(){this._writev(t,e)});let r=this,n=t.length,i=new Array(n);for(var a=0,c=0;c<n;c++){var g=t[c].chunk;i[c]=g,a+=g.length}let _=jh.Buffer.concat(i);this._vol.write(this.fd,_,0,_.length,this.pos,(b,C)=>{if(b)return r.destroy&&r.destroy(),e(b);r.bytesWritten+=C,e()}),this.pos!==void 0&&(this.pos+=a)};np.prototype.close=function(t){var e;if(t&&this.once("close",t),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",DT);return}return(0,v0.default)(()=>this.emit("close"))}typeof((e=this._writableState)===null||e===void 0?void 0:e.closed)=="boolean"?this._writableState.closed=!0:this.closed=!0,this._vol.close(this.fd,r=>{r?this.emit("error",r):this.emit("close")}),this.fd=null};np.prototype._destroy=am.prototype._destroy;np.prototype.destroySoon=np.prototype.end;var p0=class extends TT.EventEmitter{constructor(e){super(),this._filename="",this._filenameEncoded="",this._recursive=!1,this._encoding=wg.ENCODING_UTF8,this._listenerRemovers=new Map,this._onParentChild=r=>{r.getName()===this._getName()&&this._emit("rename")},this._emit=r=>{this.emit("change",r,this._filenameEncoded)},this._persist=()=>{this._timer=setTimeout(this._persist,1e6)},this._vol=e}_getName(){return this._steps[this._steps.length-1]}start(e,r=!0,n=!1,i=wg.ENCODING_UTF8){this._filename=(0,de.pathToFilename)(e),this._steps=cv(this._filename),this._filenameEncoded=(0,wg.strToEncoding)(this._filename),this._recursive=n,this._encoding=i;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(_){let b=new Error(`watch ${this._filename} ${_.code}`);throw b.code=_.code,b.errno=_.code,b}let a=_=>{var b;let C=_.getPath(),j=_.getNode(),K=()=>{let z=J_(this._filename,C);return z||(z=this._getName()),this.emit("change","change",z)};j.on("change",K);let te=(b=this._listenerRemovers.get(j.ino))!==null&&b!==void 0?b:[];te.push(()=>j.removeListener("change",K)),this._listenerRemovers.set(j.ino,te)},c=_=>{var b;let C=_.getNode(),j=z=>{this.emit("change","rename",J_(this._filename,z.getPath())),setTimeout(()=>{a(z),c(z)})},K=z=>{let G=ne=>{let le=ne.getNode().ino,Te=this._listenerRemovers.get(le);Te&&(Te.forEach(Me=>Me()),this._listenerRemovers.delete(le));for(let[Me,Se]of ne.children.entries())Se&&Me!=="."&&Me!==".."&&G(Se)};G(z),this.emit("change","rename",J_(this._filename,z.getPath()))};for(let[z,G]of _.children.entries())G&&z!=="."&&z!==".."&&a(G);if(_.on("child:add",j),_.on("child:delete",K),((b=this._listenerRemovers.get(C.ino))!==null&&b!==void 0?b:[]).push(()=>{_.removeListener("child:add",j),_.removeListener("child:delete",K)}),n)for(let[z,G]of _.children.entries())G&&z!=="."&&z!==".."&&c(G)};a(this._link),c(this._link);let g=this._link.parent;g&&(g.setMaxListeners(g.getMaxListeners()+1),g.on("child:delete",this._onParentChild)),r&&this._persist()}close(){clearTimeout(this._timer),this._listenerRemovers.forEach(r=>{r.forEach(n=>n())}),this._listenerRemovers.clear();let e=this._link.parent;e&&e.removeListener("child:delete",this._onParentChild)}};ql.FSWatcher=p0});var RT=an(h0=>{"use strict";Object.defineProperty(h0,"__esModule",{value:!0});h0.fsSynchronousApiList=void 0;h0.fsSynchronousApiList=["accessSync","appendFileSync","chmodSync","chownSync","closeSync","copyFileSync","existsSync","fchmodSync","fchownSync","fdatasyncSync","fstatSync","fsyncSync","ftruncateSync","futimesSync","lchmodSync","lchownSync","linkSync","lstatSync","mkdirSync","mkdtempSync","openSync","readdirSync","readFileSync","readlinkSync","readSync","readvSync","realpathSync","renameSync","rmdirSync","rmSync","statSync","symlinkSync","truncateSync","unlinkSync","utimesSync","lutimesSync","writeFileSync","writeSync","writevSync"]});var xT=an(g0=>{"use strict";Object.defineProperty(g0,"__esModule",{value:!0});g0.fsCallbackApiList=void 0;g0.fsCallbackApiList=["access","appendFile","chmod","chown","close","copyFile","createReadStream","createWriteStream","exists","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","read","readv","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","unwatchFile","utimes","lutimes","watch","watchFile","write","writev","writeFile"]});var _S=an((Hl,_0)=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});Hl.memfs=Hl.fs=Hl.vol=Hl.Volume=void 0;Hl.createFsFromVolume=gS;var xA=Uy(),OA=qy(),hS=CT(),OT=Ph(),AA=RT(),PA=xT(),{F_OK:kA,R_OK:LA,W_OK:MA,X_OK:FA}=OT.constants;Hl.Volume=hS.Volume;Hl.vol=new hS.Volume;function gS(t){let e={F_OK:kA,R_OK:LA,W_OK:MA,X_OK:FA,constants:OT.constants,Stats:xA.default,Dirent:OA.default};for(let r of AA.fsSynchronousApiList)typeof t[r]=="function"&&(e[r]=t[r].bind(t));for(let r of PA.fsCallbackApiList)typeof t[r]=="function"&&(e[r]=t[r].bind(t));return e.StatWatcher=t.StatWatcher,e.FSWatcher=t.FSWatcher,e.WriteStream=t.WriteStream,e.ReadStream=t.ReadStream,e.promises=t.promises,e._toUnixTimestamp=hS.toUnixTimestamp,e.__vol=t,e}Hl.fs=gS(Hl.vol);var UA=(t={},e="/")=>{let r=Hl.Volume.fromNestedJSON(t,e);return{fs:gS(r),vol:r}};Hl.memfs=UA;_0.exports=Object.assign(Object.assign({},_0.exports),Hl.fs);_0.exports.semantic=!0});var qT=an((kj,NS)=>{function UT(t){return Array.isArray(t)?t:[t]}var BA=void 0,SS="",MT=" ",wS="\\",qA=/^\s+$/,HA=/(?:[^\\]|^)\\$/,VA=/^\\!/,GA=/^\\#/,zA=/\r?\n/g,WA=/^\.*\/|^\.+$/,KA=/\/$/,l_="/",jT="node-ignore";typeof Symbol<"u"&&(jT=Symbol.for("node-ignore"));var YT=jT,Z_=(t,e,r)=>(Object.defineProperty(t,e,{value:r}),r),JA=/([0-z])-([0-z])/g,$T=()=>!1,ZA=t=>t.replace(JA,(e,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?e:SS),XA=t=>{let{length:e}=t;return t.slice(0,e-e%2)},QA=[[/^\uFEFF/,()=>SS],[/((?:\\\\)*?)(\\?\s+)$/,(t,e,r)=>e+(r.indexOf("\\")===0?MT:SS)],[/(\\+?)\s/g,(t,e)=>{let{length:r}=e;return e.slice(0,r-r%2)+MT}],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,r)=>e+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return e+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>wS],[/\\\\/g,()=>wS],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,r,n,i)=>e===wS?`\\[${r}${XA(n)}${i}`:i==="]"&&n.length%2===0?`[${ZA(r)}${n}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`]],eP=/(^|\\\/)?\\\*$/,X_="regex",y0="checkRegex",FT="_",tP={[X_](t,e){return`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`},[y0](t,e){return`${e?`${e}[^/]*`:"[^/]*"}(?=$|\\/$)`}},rP=t=>QA.reduce((e,[r,n])=>e.replace(r,n.bind(t)),t),w0=t=>typeof t=="string",nP=t=>t&&w0(t)&&!qA.test(t)&&!HA.test(t)&&t.indexOf("#")!==0,iP=t=>t.split(zA).filter(Boolean),bS=class{constructor(e,r,n,i,a,c){this.pattern=e,this.mark=r,this.negative=a,Z_(this,"body",n),Z_(this,"ignoreCase",i),Z_(this,"regexPrefix",c)}get regex(){let e=FT+X_;return this[e]?this[e]:this._make(X_,e)}get checkRegex(){let e=FT+y0;return this[e]?this[e]:this._make(y0,e)}_make(e,r){let n=this.regexPrefix.replace(eP,tP[e]),i=this.ignoreCase?new RegExp(n,"i"):new RegExp(n);return Z_(this,r,i)}},aP=({pattern:t,mark:e},r)=>{let n=!1,i=t;i.indexOf("!")===0&&(n=!0,i=i.substr(1)),i=i.replace(VA,"!").replace(GA,"#");let a=rP(i);return new bS(t,e,i,r,n,a)},ES=class{constructor(e){this._ignoreCase=e,this._rules=[]}_add(e){if(e&&e[YT]){this._rules=this._rules.concat(e._rules._rules),this._added=!0;return}if(w0(e)&&(e={pattern:e}),nP(e.pattern)){let r=aP(e,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(e){return this._added=!1,UT(w0(e)?iP(e):e).forEach(this._add,this),this._added}test(e,r,n){let i=!1,a=!1,c;this._rules.forEach(_=>{let{negative:b}=_;a===b&&i!==a||b&&!i&&!a&&!r||!_[n].test(e)||(i=!b,a=b,c=b?BA:_)});let g={ignored:i,unignored:a};return c&&(g.rule=c),g}},oP=(t,e)=>{throw new e(t)},eh=(t,e,r)=>w0(t)?t?eh.isNotRelative(t)?r(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${e}\``,TypeError),BT=t=>WA.test(t);eh.isNotRelative=BT;eh.convert=t=>t;var TS=class{constructor({ignorecase:e=!0,ignoreCase:r=e,allowRelativePaths:n=!1}={}){Z_(this,YT,!0),this._rules=new ES(r),this._strictPathCheck=!n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}add(e){return this._rules.add(e)&&this._initCache(),this}addPattern(e){return this.add(e)}_test(e,r,n,i){let a=e&&eh.convert(e);return eh(a,e,this._strictPathCheck?oP:$T),this._t(a,r,n,i)}checkIgnore(e){if(!KA.test(e))return this.test(e);let r=e.split(l_).filter(Boolean);if(r.pop(),r.length){let n=this._t(r.join(l_)+l_,this._testCache,!0,r);if(n.ignored)return n}return this._rules.test(e,!1,y0)}_t(e,r,n,i){if(e in r)return r[e];if(i||(i=e.split(l_).filter(Boolean)),i.pop(),!i.length)return r[e]=this._rules.test(e,n,X_);let a=this._t(i.join(l_)+l_,r,n,i);return r[e]=a.ignored?a:this._rules.test(e,n,X_)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return UT(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}},IS=t=>new TS(t),sP=t=>eh(t&&eh.convert(t),t,$T);if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let t=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");eh.convert=t;let e=/^[a-z]:\//i;eh.isNotRelative=r=>e.test(r)||BT(r)}NS.exports=IS;IS.default=IS;NS.exports.isPathValid=sP});var zT=an((C0,GT)=>{(function(t,e){typeof C0=="object"&&typeof GT<"u"?e(C0):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.oneDS=t.oneDS||{}))})(C0,function(t){"use strict";var e="function",r="object",n="undefined",i="prototype",a=Object,c=a[i];function g(o,l){return o||l}function _(o,l){return o[l]}var b=void 0,C=null,j="",K="function",te="object",z="prototype",G="__proto__",ne="undefined",le="constructor",Te="Symbol",Me="_polyfill",Se="length",ke="name",et="call",ot="toString",Dt=g(Object),qt=_(Dt,z),lr=g(String),ln=_(lr,z),Ti=g(Math),pi=g(Array),Tt=_(pi,z),fn=_(Tt,"slice");function it(o,l){try{return{v:o.apply(this,l)}}catch(v){return{e:v}}}function lo(o,l){var v=it(o);return v.e?l:v.v}var Le;function Ir(o){return function(l){return typeof l===o}}function Cr(o){var l="[object "+o+"]";return function(v){return!!(v&&_t(v)===l)}}function _t(o){return qt[ot].call(o)}function dn(o,l){return typeof o===l}function st(o){return typeof o===ne||o===ne}function Jn(o){return!Wt(o)}function at(o){return o===C||st(o)}function yu(o){return o===C||!Wt(o)}function Wt(o){return!!o||o!==b}function Ya(o){return!Le&&(Le=["string","number","boolean",ne,"symbol","bigint"]),o!==te&&Le.indexOf(o)!==-1}var Gt=Ir("string"),or=Ir(K);function Ii(o){return!o&&at(o)?!1:!!o&&typeof o===te}var fr=_(pi,"isArray"),Ni=Cr("Date"),Pr=Ir("number"),Un=Ir("boolean"),Ct=Cr("Error");function kr(o){return!!(o&&o.then&&or(o.then))}function Je(o){return!o||!Cn(o)}function Cn(o){return!(!o||lo(function(){return!(o&&0+o)},!o))}var $r=_(Dt,"getOwnPropertyDescriptor");function zr(o,l){return!!o&&qt.hasOwnProperty[et](o,l)}var Ea=g(_(Dt,"hasOwn"),Mi);function Mi(o,l){return zr(o,l)||!!$r(o,l)}function Lr(o,l,v){if(o&&Ii(o)){for(var w in o)if(Ea(o,w)&&l[et](v||o,w,o[w])===-1)break}}var er={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function hr(o){var l={};if(l[er.c]=!0,l[er.e]=!0,o.l){l.get=function(){return o.l.v};var v=$r(o.l,"v");v&&v.set&&(l.set=function(w){o.l.v=w})}return Lr(o,function(w,T){l[er[w]]=Jn(T)?l[er[w]]:T}),l}var rn=_(Dt,"defineProperty");function Jf(o,l,v,w,T,x){var L={e:x,c:T};return v&&(L.g=v),w&&(L.s=w),rn(o,l,hr(L))}function Zn(o,l,v){return rn(o,l,hr(v))}function Zf(o,l,v,w,T){var x={};return Lr(o,function(L,O){wu(x,L,l?O:L,T),wu(x,O,v?O:L,T)}),w?w(x):x}function wu(o,l,v,w){rn(o,l,{value:v,enumerable:!0,writable:!!w})}var En=g(lr),ns="[object Error]";function zt(o,l){var v=j,w=qt[ot][et](o);w===ns&&(o={stack:En(o.stack),message:En(o.message),name:En(o.name)});try{v=JSON.stringify(o,C,l?typeof l=="number"?l:4:b),v=(v?v.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):C)||En(o)}catch(T){v=" - "+zt(T,l)}return w+": "+v}function Fi(o){throw new Error(o)}function $a(o){throw new TypeError(o)}var is=_(Dt,"freeze");function Ta(o){return o}function Xf(o){return o[G]||C}var ec=_(Dt,"assign"),Ki=_(Dt,"keys");function Ia(o){return is&&Lr(o,function(l,v){(fr(v)||Ii(v))&&Ia(v)}),Di(o)}var Di=g(is,Ta),as=g(_(Dt,"seal"),Ta),Bs=g(_(Dt,"getPrototypeOf"),Xf);function ii(o){return Zf(o,1,0,Di)}function tc(o){return Zf(o,0,0,Di)}var qs=tc({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Na="__tsUtils$gblCfg",Xn;function Zc(){var o;return typeof globalThis!==ne&&(o=globalThis),!o&&typeof self!==ne&&(o=self),!o&&typeof window!==ne&&(o=window),!o&&typeof global!==ne&&(o=global),o}function Hs(){if(!Xn){var o=it(Zc).v||{};Xn=o[Na]=o[Na]||{}}return Xn}var ai=sa;function sa(o,l,v){var w=l?l[o]:C;return function(T){var x=(T?T[o]:C)||w;if(x||v){var L=arguments;return(x||v).apply(T,x?fn[et](L,1):L)}$a('"'+En(o)+'" not defined for '+zt(T))}}function dr(o){return function(l){return l[o]}}var Tn=_(Ti,"max"),Da=ai("slice",ln),Wr=ai("substring",ln),vi=sa("substr",ln,Ba);function Ba(o,l,v){return at(o)&&$a("Invalid "+zt(o)),v<0?j:(l=l||0,l<0&&(l=Tn(l+o[Se],0)),st(v)?Da(o,l):Da(o,l,l+v))}function Kr(o,l){return Wr(o,0,l)}var ua="_urid",Su;function ca(){if(!Su){var o=Hs();Su=o.gblSym=o.gblSym||{k:{},s:{}}}return Su}var hn;function oi(o){var l={description:En(o),toString:function(){return Te+"("+o+")"}};return l[Me]=!0,l}function rc(o){var l=ca();if(!Ea(l.k,o)){var v=oi(o),w=Ki(l.s).length;v[ua]=function(){return w+"_"+v[ot]()},l.k[o]=v,l.s[v[ua]()]=En(o)}return l.k[o]}function Ca(o){!hn&&(hn={});var l,v=qs[o];return v&&(l=hn[v]=hn[v]||oi(Te+"."+v)),l}var Rr;function Ci(){Rr=Hs()}function Qf(o){var l={};return!Rr&&Ci(),l.b=Rr.lzy,rn(l,"v",{configurable:!0,get:function(){var v=o();return Rr.lzy||rn(l,"v",{value:v}),l.b=Rr.lzy,v}}),l}function Ui(o){return rn({toJSON:function(){return o}},"v",{value:o})}var os="window",Xc;function ss(o,l){var v;return function(){return!Rr&&Ci(),(!v||Rr.lzy)&&(v=Ui(it(o,l).v)),v.v}}function ed(o){return!Rr&&Ci(),(!Xc||o===!1||Rr.lzy)&&(Xc=Ui(it(Zc).v||C)),Xc.v}function pn(o,l){var v;if(!Xc||l===!1?v=ed(l):v=Xc.v,v&&v[o])return v[o];if(o===os)try{return window}catch{}return C}function Zl(){return!!la()}var la=ss(pn,["document"]);function up(){return!!si()}var si=ss(pn,[os]);function yv(){return!!Ra()}var Ra=ss(pn,["navigator"]);function Xl(){return!!fo()}var fo=ss(pn,["history"]),td=ss(function(){return!!it(function(){return process&&(process.versions||{}).node}).v}),Sr,us;function rd(){return Sr=Ui(it(pn,[Te]).v),Sr}function Ji(o){var l=(Rr.lzy?0:Sr)||rd();return l.v?l.v[o]:b}function Qc(){return!!Lt()}function Lt(){return!Rr&&Ci(),((Rr.lzy?0:Sr)||rd()).v}function xa(o,l){var v=qs[o];!Rr&&Ci();var w=(Rr.lzy?0:Sr)||rd();return w.v?w.v[v||o]:l?b:Ca(o)}function nc(o,l){!Rr&&Ci();var v=(Rr.lzy?0:Sr)||rd();return v.v?v.v(o):l?C:oi(o)}function Ql(o){return!Rr&&Ci(),us=(Rr.lzy?0:us)||Ui(it(Ji,["for"]).v),(us.v||rc)(o)}function mm(o){return!!o&&or(o.next)}function qa(o){return!yu(o)&&or(o[xa(3)])}var ef;function cp(o,l,v){if(o&&(mm(o)||(!ef&&(ef=Ui(xa(3))),o=o[ef.v]?o[ef.v]():C),mm(o))){var w=b,T=b;try{for(var x=0;!(T=o.next()).done&&l[et](v||o,T.value,x,o)!==-1;)x++}catch(L){w={e:L},o.throw&&(T=C,o.throw(w))}finally{try{T&&!T.done&&o.return&&o.return(T)}finally{if(w)throw w.e}}}}function bu(o,l,v){return o.apply(l,v)}function Ha(o,l){return!st(l)&&o&&(fr(l)?bu(o.push,o,l):mm(l)||qa(l)?cp(l,function(v){o.push(v)}):o.push(l)),o}function dt(o,l,v){if(o)for(var w=o[Se]>>>0,T=0;T<w&&!(T in o&&l[et](v||o,o[T],T,o)===-1);T++);}var Ri=ai("indexOf",Tt),Eu=ai("map",Tt);function Vs(o,l,v){return((o?o.slice:C)||fn).apply(o,fn[et](arguments,1))}function lp(o,l,v){return Ri(o,l,v)!==-1}var fp=sa("includes",Tt,lp),In=ai("reduce",Tt),Oa=g(_(Dt,"create"),dp);function dp(o){if(!o)return{};var l=typeof o;l!==te&&l!==K&&$a("Prototype must be an Object or function: "+zt(o));function v(){}return v[z]=o,new v}var Va;function fa(o,l){var v=Dt.setPrototypeOf||function(w,T){var x;!Va&&(Va=Ui((x={},x[G]=[],x instanceof Array))),Va.v?w[G]=T:Lr(T,function(L,O){return w[L]=O})};return v(o,l)}function dh(o,l,v){it(Zn,[l,ke,{v:o,c:!0,e:!1}]),l=fa(l,v);function w(){this[le]=l,it(Zn,[this,ke,{v:o,c:!0,e:!1}])}return l[z]=v===C?Oa(v):(w[z]=v[z],new w),l}function hm(o,l){l&&(o[ke]=l)}function wv(o,l,v){var w=v||Error,T=w[z][ke],x=Error.captureStackTrace;return dh(o,function(){var L=this,O=arguments;try{it(hm,[w,o]);var M=bu(w,L,fn[et](O))||L;if(M!==L){var Y=Bs(L);Y!==Bs(M)&&fa(M,Y)}return x&&x(M,L[le]),l&&l(M,O),M}finally{it(hm,[w,T])}},w)}function Tu(){return(Date.now||Sv)()}function Sv(){return new Date().getTime()}function Qh(o){return function(v){return at(v)&&$a("strTrim called ["+zt(v)+"]"),v&&v.replace&&(v=v.replace(o,j)),v}}var pp=Qh(/^\s+|(?=\s)\s+$/g),Zi=sa("trim",ln,pp),tf,rf,po;function Aa(o){if(!o||typeof o!==te)return!1;po||(po=up()?si():!0);var l=!1;if(o!==po){rf||(tf=Function[z][ot],rf=tf[et](Dt));try{var v=Bs(o);l=!v,l||(zr(v,le)&&(v=v[le]),l=!!(v&&typeof v===K&&tf[et](v)===rf))}catch{}}return l}function Iu(o){return o.value&&Tv(o),!0}var bv=[nd,Tv,Ev,mp];function Ga(o,l,v,w){var T;return dt(o,function(x){if(x.k===l)return T=x,-1}),T||(T={k:l,v:l},o.push(T),w(T)),T.v}function vp(o,l,v,w){var T=v.handler,x=v.path?w?v.path.concat(w):v.path:[],L={handler:v.handler,src:v.src,path:x},O=typeof l,M=!1,Y=l===C;Y||(l&&O===te?M=Aa(l):Y=Ya(O));var V={type:O,isPrim:Y,isPlain:M,value:l,result:l,path:x,origin:v.src,copy:function(Q,Z){return vp(o,Q,Z?L:v,Z)},copyTo:function(Q,Z){return Nu(o,Q,Z,L)}};return V.isPrim?T&&T[et](v,V)?V.result:l:Ga(o,l,x,function(Q){Zn(V,"result",{g:function(){return Q.v},s:function(re){Q.v=re}});for(var Z=0,ie=T;!(ie||(Z<bv.length?bv[Z++]:Iu))[et](v,V);)ie=C})}function Nu(o,l,v,w){if(!at(v))for(var T in v)l[T]=vp(o,v[T],w,T);return l}function el(o,l,v){var w={handler:v,src:l,path:[]};return Nu([],o,l,w)}function nf(o,l){var v={handler:l,src:o};return vp([],o,v)}function nd(o){var l=o.value;if(fr(l)){var v=o.result=[];return v.length=l.length,o.copyTo(v,l),!0}return!1}function mp(o){var l=o.value;return Ni(l)?(o.result=new Date(l.getTime()),!0):!1}function Ev(o){return o.type===K}function Tv(o){var l=o.value;if(l&&o.isPlain){var v=o.result={};return o.copyTo(v,l),!0}return!1}function Du(o,l){return dt(l,function(v){el(o,v)}),o}function hp(o,l,v,w,T,x,L){return Du(nf(o)||{},fn[et](arguments))}var Gs=dr(Se),ic;function za(){return!Rr&&Ci(),(!ic||Rr.lzy)&&(ic=Ui(it(pn,["performance"]).v)),ic.v}function af(){var o=za();return o&&o.now?o.now():Tu()}var id=sa("endsWith",ln,tl);function tl(o,l,v){Gt(o)||$a("'"+zt(o)+"' is not a string");var w=Gt(l)?l:En(l),T=!st(v)&&v<o[Se]?v:o[Se];return Wr(o,T-w[Se],T)===w}var vo=ai("indexOf",ln),gm=sa("startsWith",ln,cs);function cs(o,l,v){Gt(o)||$a("'"+zt(o)+"' is not a string");var w=Gt(l)?l:En(l),T=v>0?v:0;return Wr(o,T,T+w[Se])===w}var xo="ref",mo="unref",Cu="hasRef",ad="enabled";function rl(o,l,v){var w=!0,T=o?l(C):C,x;function L(){return w=!1,T&&T[mo]&&T[mo](),x}function O(){T&&v(T),T=C}function M(){return T=l(T),w||L(),x}function Y(V){!V&&T&&O(),V&&!T&&M()}return x={cancel:O,refresh:M},x[Cu]=function(){return T&&T[Cu]?T[Cu]():w},x[xo]=function(){return w=!0,T&&T[xo]&&T[xo](),x},x[mo]=L,x=rn(x,ad,{get:function(){return!!T},set:Y}),{h:x,dn:function(){T=C}}}function nl(o,l,v){var w=fr(l),T=w?l.length:0,x=(T>0?l[0]:w?b:l)||setTimeout,L=(T>1?l[1]:b)||clearTimeout,O=v[0];v[0]=function(){M.dn(),bu(O,b,fn[et](arguments))};var M=rl(o,function(Y){if(Y){if(Y.refresh)return Y.refresh(),Y;bu(L,b,[Y])}return bu(x,b,v)},function(Y){bu(L,b,[Y])});return M.h}function ac(o,l){return nl(!0,b,fn[et](arguments))}function od(o,l){return nl(!1,b,fn[et](arguments))}(ed()||{}).Symbol,(ed()||{}).Reflect;var of="hasOwnProperty",sd=function(o,l){return sd=a.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,w){v.__proto__=w}||function(v,w){for(var T in w)w[of](T)&&(v[T]=w[T])},sd(o,l)};function oc(o,l){typeof l!==e&&l!==null&&$a("Class extends value "+String(l)+" is not a constructor or null"),sd(o,l);function v(){this.constructor=o}o[i]=l===null?Oa(l):(v[i]=l[i],new v)}function ho(o,l){for(var v=0,w=l.length,T=o.length;v<w;v++,T++)o[T]=l[v];return o}var il,Oo="constructor",Pa="prototype",ls="function",nn="_dynInstFuncs",zs="_isDynProxy",go="_dynClass",al="_dynCls$",ol="_dynInstChk",fs=ol,sf="_dfOpts",ds="_unknown_",Ru="__proto__",da="_dyn"+Ru,gp="__dynProto$Gbl",sc="_dynInstProto",Xi="useBaseInst",ud="setInstFuncs",_p=Object,uf=_p.getPrototypeOf,cf=_p.getOwnPropertyNames,yp=ed(),_m=yp[gp]||(yp[gp]={o:(il={},il[ud]=!0,il[Xi]=!0,il),n:1e3});function uc(o){return o&&(o===_p[Pa]||o===Array[Pa])}function Ao(o){return uc(o)||o===Function[Pa]}function _o(o){var l;if(o){if(uf)return uf(o);var v=o[Ru]||o[Pa]||(o[Oo]?o[Oo][Pa]:null);l=o[da]||v,zr(o,da)||(delete o[sc],l=o[da]=o[sc]||o[da],o[sc]=v)}return l}function Nn(o,l){var v=[];if(cf)v=cf(o);else for(var w in o)typeof w=="string"&&zr(o,w)&&v.push(w);if(v&&v.length>0)for(var T=0;T<v.length;T++)l(v[T])}function lf(o,l,v){return l!==Oo&&typeof o[l]===ls&&(v||zr(o,l))&&l!==Ru&&l!==Pa}function cc(o){$a("DynamicProto: "+o)}function lc(o){var l=Oa(null);return Nn(o,function(v){!l[v]&&lf(o,v,!1)&&(l[v]=o[v])}),l}function wp(o,l){for(var v=o.length-1;v>=0;v--)if(o[v]===l)return!0;return!1}function Wa(o,l,v,w){function T(M,Y,V){var Q=Y[V];if(Q[zs]&&w){var Z=M[nn]||{};Z[fs]!==!1&&(Q=(Z[Y[go]]||{})[V]||Q)}return function(){return Q.apply(M,arguments)}}var x=Oa(null);Nn(v,function(M){x[M]=T(l,v,M)});for(var L=_o(o),O=[];L&&!Ao(L)&&!wp(O,L);)Nn(L,function(M){!x[M]&&lf(L,M,!uf)&&(x[M]=T(l,L,M))}),O.push(L),L=_o(L);return x}function xu(o,l,v,w){var T=null;if(o&&zr(v,go)){var x=o[nn]||Oa(null);if(T=(x[v[go]]||Oa(null))[l],T||cc("Missing ["+l+"] "+ls),!T[ol]&&x[fs]!==!1){for(var L=!zr(o,l),O=_o(o),M=[];L&&O&&!Ao(O)&&!wp(M,O);){var Y=O[l];if(Y){L=Y===w;break}M.push(O),O=_o(O)}try{L&&(o[l]=T),T[ol]=1}catch{x[fs]=!1}}}return T}function Ws(o,l,v){var w=l[o];return w===v&&(w=_o(l)[o]),typeof w!==ls&&cc("["+o+"] is not a "+ls),w}function sr(o,l,v,w,T){function x(M,Y){var V=function(){var Q=xu(this,Y,M,V)||Ws(Y,M,V);return Q.apply(this,arguments)};return V[zs]=1,V}if(!uc(o)){var L=v[nn]=v[nn]||Oa(null);if(!uc(L)){var O=L[l]=L[l]||Oa(null);L[fs]!==!1&&(L[fs]=!!T),uc(O)||Nn(v,function(M){lf(v,M,!1)&&v[M]!==w[M]&&(O[M]=v[M],delete v[M],(!zr(o,M)||o[M]&&!o[M][zs])&&(o[M]=x(o,M)))})}}}function Po(o,l){if(uf){for(var v=[],w=_o(l);w&&!Ao(w)&&!wp(v,w);){if(w===o)return!0;v.push(w),w=_o(w)}return!1}return!0}function ps(o,l){return zr(o,Pa)?o.name||l||ds:((o||{})[Oo]||{}).name||l||ds}function Ka(o,l,v,w){zr(o,Pa)||cc("theClass is an invalid class definition.");var T=o[Pa];Po(T,l)||cc("["+ps(o)+"] not in hierarchy of ["+ps(l)+"]");var x=null;zr(T,go)?x=T[go]:(x=al+ps(o,"_")+"$"+_m.n,_m.n++,T[go]=x);var L=Ka[sf],O=!!L[Xi];O&&w&&w[Xi]!==void 0&&(O=!!w[Xi]);var M=lc(l),Y=Wa(T,l,M,O);v(l,Y);var V=!!uf&&!!L[ud];V&&w&&(V=!!w[ud]),sr(T,x,l,M,V!==!1)}Ka[sf]=_m.o;var cd=100,Ja=ii,Ou=Ja({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),gn=Ja({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),pa="toLowerCase",Hr="blkVal",pt="length",fc="rdOnly",ko="notify",Ks="warnToConsole",yo="throwInternal",Au="setDf",Za="watch",Jr="logger",Lo="apply",Vr="push",Mo="splice",ld="hdlr",Fo="cancel",Vn="initialize",wo="identifier",vs="removeNotificationListener",ji="addNotificationListener",Qi="isInitialized",sl="instrumentationKey",dc="INACTIVE",fd="value",Js="getNotifyMgr",Uo="getPlugin",jo="name",pc="iKey",Yo="time",Qn="processNext",dd="getProcessTelContext",vc="pollInternalLogs",Zs="enabled",ka="stopPollingInternalLogs",ms="unload",Xs="onComplete",Xa="version",ul="loggingLevelConsole",Pu="createNew",xi="teardown",ku="messageId",Qs="message",Qa="isAsync",mc="diagLog",_n="_doTeardown",mi="update",eo="getNext",hc="setNextPlugin",hs="protocol",Sp="userAgent",La="split",cl="nodeType",Yi="replace",pd="logInternalMessage",va="type",gs="handler",_s="status",bp="getResponseHeader",ff="getAllResponseHeaders",vd="isChildEvt",df="data",$o="getCtx",ma="setCtx",ll="complete",ym="itemsReceived",gc="urlString",_c="sendPOST",ys="headers",pf="timeout",ph="setRequestHeader",Ep="traceId",vf="spanId",yc="traceFlags",Iv;function wm(o,l){Iv||(Iv=wv("AggregationError",function(w,T){T[pt]>1&&(w.errors=T[1])}));var v=o||"One or more errors occurred.";throw dt(l,function(w,T){v+=`
`.concat(T," > ").concat(zt(w))}),new Iv(v,l||[])}var wc="Promise",Sm="rejected";function mf(o,l){return Tp(o,function(v){return l?l({status:"fulfilled",rejected:!1,value:v}):v},function(v){return l?l({status:Sm,rejected:!0,reason:v}):v})}function Tp(o,l,v,w){var T=o;try{if(kr(o))(l||v)&&(T=o.then(l,v));else try{l&&(T=l(o))}catch(x){if(v)T=v(x);else throw x}}finally{w&&So(T,w)}return T}function So(o,l){var v=o;return l&&(kr(o)?o.finally?v=o.finally(l):v=o.then(function(w){return l(),w},function(w){throw l(),w}):l()),v}var Nv=["pending","resolving","resolved",Sm],vh="dispatchEvent",md;function Dv(o){var l;return o&&o.createEvent&&(l=o.createEvent("Event")),!!l&&l.initEvent}function Ip(o,l,v,w){var T=la();!md&&(md=Ui(!!it(Dv,[T]).v));var x=md.v?T.createEvent("Event"):w?new Event(l):{};if(v&&v(x),md.v&&x.initEvent(l,!1,!0),x&&o[vh])o[vh](x);else{var L=o["on"+l];if(L)L(x);else{var O=pn("console");O&&(O.error||O.log)(l,zt(x))}}}var fl="unhandledRejection",hd=fl.toLowerCase(),Sc=10,eu;function dl(o){return or(o)?o.toString():zt(o)}function bm(o,l,v){var w=Vs(arguments,3),T=0,x=!1,L,O=[],M=!1,Y=null,V;function Q(rt,Yt){try{M=!0,Y&&Y.cancel(),Y=null;var br=o(function(yi,yr){O.push(function(){try{var Hi=T===2?rt:Yt,Xo=st(Hi)?L:or(Hi)?Hi(L):Hi;kr(Xo)?Xo.then(yi,yr):Hi?yi(Xo):T===3?yr(Xo):yi(Xo)}catch(Qo){yr(Qo)}}),x&&he()},w);return br}finally{}}function Z(rt){return Q(void 0,rt)}function ie(rt){var Yt=rt,br=rt;return or(rt)&&(Yt=function(yi){return rt&&rt(),yi},br=function(yi){throw rt&&rt(),yi}),Q(Yt,br)}function re(){return Nv[T]}function he(){if(O.length>0){var rt=O.slice();O=[],M=!0,Y&&Y.cancel(),Y=null,l(rt)}}function be(rt,Yt){return function(br){if(T===Yt){if(rt===2&&kr(br)){T=1,br.then(be(2,1),be(3,1));return}T=rt,x=!0,L=br,he(),!M&&rt===3&&!Y&&(Y=ac(je,Sc))}}}function je(){if(!M)if(M=!0,td())process.emit(fl,L,V);else{var rt=si()||ed();!eu&&(eu=Ui(it(pn,[wc+"RejectionEvent"]).v)),Ip(rt,hd,function(Yt){return Zn(Yt,"promise",{g:function(){return V}}),Yt.reason=L,Yt},!!eu.v)}}V={then:Q,catch:Z,finally:ie},rn(V,"state",{get:re}),Qc()&&(V[xa(11)]="IPromise");function Qe(){return"IPromise "+re()+(x?" - "+dl(L):"")}return V.toString=Qe,function(){or(v)||$a(wc+": executor is not a function - "+dl(v));var Yt=be(3,0);try{v.call(V,be(2,0),Yt)}catch(br){Yt(br)}}(),V}function Np(o){return function(l){var v=Vs(arguments,1);return o(function(w,T){try{var x=[],L=1;cp(l,function(O,M){O&&(L++,Tp(O,function(Y){x[M]=Y,--L===0&&w(x)},T))}),L--,L===0&&w(x)}catch(O){T(O)}},v)}}function pl(o){return Ui(function(l){var v=Vs(arguments,1);return o(function(w,T){var x=[],L=1;function O(M,Y){L++,mf(M,function(V){V.rejected?x[Y]={status:Sm,reason:V.reason}:x[Y]={status:"fulfilled",value:V.value},--L===0&&w(x)})}try{fr(l)?dt(l,O):qa(l)?cp(l,O):$a("Input is not an iterable"),L--,L===0&&w(x)}catch(M){T(M)}},v)})}function Dp(o){dt(o,function(l){try{l()}catch{}})}function tu(o){var l=Pr(o)?o:0;return function(v){ac(function(){Dp(v)},l)}}function Zr(o,l){return bm(Zr,tu(l),o,l)}var bc;function Oi(o,l){!bc&&(bc=Ui(it(pn,[wc]).v||null));var v=bc.v;if(!v)return Zr(o);or(o)||$a(wc+": executor is not a function - "+zt(o));var w=0;function T(){return Nv[w]}var x=new v(function(L,O){function M(V){w=2,L(V)}function Y(V){w=3,O(V)}o(M,Y)});return rn(x,"state",{get:T}),x}var Cp;function gd(o){return bm(gd,Dp,o)}function vl(o,l){return!Cp&&(Cp=pl(gd)),Cp.v(o,l)}var Ec;function ha(o,l){return!Ec&&(Ec=Ui(Oi)),Ec.v.call(this,o,l)}var _d=Np(ha),hi=void 0,gr="",ru="channels",Rn="core",ws="createPerfMgr",Tc="disabled",Ic="extensionConfig",nu="extensions",bo="processTelemetry",hf="priority",Cv="eventsSent",gf="eventsDiscarded",Rv="eventsSendRequest",_f="perfEvent",ml="offlineEventsStored",Rp="offlineBatchSent",ui="offlineBatchDrop",hl="getPerfMgr",Ai="domain",Lu="path",xp="Not dynamic - ",yd=/-([a-z])/g,Pi=/([^\w\d_$])/g,wd=/^(\d+[\w\d_$])/;function Op(o){return!at(o)}function iu(o){var l=o;return l&&Gt(l)&&(l=l[Yi](yd,function(v,w){return w.toUpperCase()}),l=l[Yi](Pi,"_"),l=l[Yi](wd,function(v,w){return"_"+w})),l}function vt(o,l){return o&&l?vo(o,l)!==-1:!1}function Ss(o){return o&&o.toISOString()||""}function bs(o){return Ct(o)?o[jo]:gr}function to(o,l,v,w,T){var x=v;return o&&(x=o[l],x!==v&&(!T||T(x))&&(!w||w(v))&&(x=v,o[l]=x)),x}function yf(o,l,v){var w;return o?(w=o[l],!w&&at(w)&&(w=st(v)?{}:v,o[l]=w)):w=st(v)?{}:v,w}function gl(o,l){var v=null,w=null;return or(o)?v=o:w=o,function(){var T=arguments;if(v&&(w=v()),w)return w[l][Lo](w,T)}}function Es(o,l,v){if(o&&l&&Ii(o)&&Ii(l)){var w=function(x){if(Gt(x)){var L=l[x];or(L)?(!v||v(x,!0,l,o))&&(o[x]=gl(l,x)):(!v||v(x,!1,l,o))&&(Ea(o,x)&&delete o[x],Zn(o,x,{g:function(){return l[x]},s:function(O){l[x]=O}}))}};for(var T in l)w(T)}return o}function Eo(o,l,v,w,T){o&&l&&v&&(T!==!1||st(o[l]))&&(o[l]=gl(v,w))}function _l(o,l,v,w){return o&&l&&Ii(o)&&fr(v)&&dt(v,function(T){Gt(T)&&Eo(o,T,l,T,w)}),o}function Sd(o){return o&&ec&&(o=a(ec({},o))),o}function au(o){try{return o.responseText}catch{}return null}function wf(o,l){return o?"XDomainRequest,Response:"+au(o)||"":l}function yl(o,l){return o?"XMLHttpRequest,Status:"+o[_s]+",Response:"+au(o)||o.response||"":l}function Sf(o,l){return l&&(Pr(l)?o=[l].concat(o):fr(l)&&(o=l.concat(o))),o}var Ap="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Pp="withCredentials",xv="timeout";function kp(o,l,v,w,T,x){w===void 0&&(w=!1),T===void 0&&(T=!1);function L(M,Y,V){try{M[Y]=V}catch{}}var O=new XMLHttpRequest;return w&&L(O,Ap,w),v&&L(O,Pp,v),O.open(o,l,!T),v&&L(O,Pp,v),!T&&x&&L(O,xv,x),O}function Mu(o){var l={};if(Gt(o)){var v=Zi(o)[La](/[\r\n]+/);dt(v,function(w){if(w){var T=w.indexOf(": ");if(T!==-1){var x=Zi(w.substring(0,T))[pa](),L=Zi(w.substring(T+1));l[x]=L}else l[Zi(w)]=1}})}return l}function Nc(o,l,v){if(!o[v]&&l&&l[bp]){var w=l[bp](v);w&&(o[v]=Zi(w))}return o}var bf="kill-duration",Bo="kill-duration-seconds",Ts="time-delta-millis";function qo(o,l){var v={};return o[ff]?v=Mu(o[ff]()):l&&(v=Nc(v,o,Ts),v=Nc(v,o,bf),v=Nc(v,o,Bo)),v}var Ho="documentMode",Dc="location",Lp="console",Cc="JSON",Mp="crypto",Fp="msCrypto",bd="ReactNative",Is="msie",Vo="trident/",Go="XMLHttpRequest",Ed=null,Ef=null,wl=!1,$i=null,Ns=null;function Td(o,l){var v=!1;if(o){try{if(v=l in o,!v){var w=o[i];w&&(v=l in w)}}catch{}if(!v)try{var T=new o;v=!st(T[l])}catch{}}return v}function ea(o){wl=o}function ou(o){if(o&&wl){var l=pn("__mockLocation");if(l)return l}return typeof location===r&&location?location:pn(Dc)}function Tf(){return typeof console!==n?console:pn(Lp)}function Ds(){return!!(typeof JSON===r&&JSON||pn(Cc)!==null)}function ki(){return Ds()?JSON||pn(Cc):null}function Fu(){return pn(Mp)}function Id(){return pn(Fp)}function Sl(){var o=Ra();return o&&o.product?o.product===bd:!1}function Uu(){var o=Ra();if(o&&(o[Sp]!==Ef||Ed===null)){Ef=o[Sp];var l=(Ef||gr)[pa]();Ed=vt(l,Is)||vt(l,Vo)}return Ed}function Em(o){if(o===void 0&&(o=null),!o){var l=Ra()||{};o=l?(l.userAgent||gr)[pa]():gr}var v=(o||gr)[pa]();if(vt(v,Is)){var w=la()||{};return Math.max(parseInt(v[La](Is)[1]),w[Ho]||0)}else if(vt(v,Vo)){var T=parseInt(v[La](Vo)[1]);if(T)return T+4}return null}function Ov(o){return(Ns===null||o===!1)&&(Ns=yv()&&!!Ra().sendBeacon),Ns}function Tm(o){var l=!1;try{l=!!pn("fetch");var v=pn("Request");l&&o&&v&&(l=Td(v,"keepalive"))}catch{}return l}function bl(){return $i===null&&($i=typeof XDomainRequest!==n,$i&&If()&&($i=$i&&!Td(pn(Go),"withCredentials"))),$i}function If(){var o=!1;try{var l=pn(Go);o=!!l}catch{}return o}function Av(o,l){if(o)for(var v=0;v<o[pt];v++){var w=o[v];if(w[jo]&&w[jo]===l)return w}return{}}function mh(o){var l=la();return l&&o?Av(l.querySelectorAll("meta"),o).content:null}function Nd(o){var l,v=za();if(v){var w=v.getEntriesByType("navigation")||[];l=Av((w[pt]>0?w[0]:{}).serverTiming,o).description}return l}var Up=4294967296,El=4294967295,ju=123456789,jp=987654321,Cs=!1,Dd=ju,Nf=jp;function Rs(o){o<0&&(o>>>=0),Dd=ju+o&El,Nf=jp-o&El,Cs=!0}function Rc(){try{var o=Tu()&2147483647;Rs((Math.random()*Up^o)+o)}catch{}}function Im(o){return o>0?Math.floor(Tl()/El*(o+1))>>>0:0}function Tl(o){var l=0,v=Fu()||Id();return v&&v.getRandomValues&&(l=v.getRandomValues(new Uint32Array(1))[0]&El),l===0&&Uu()&&(Cs||Rc(),l=hh()&El),l===0&&(l=Math.floor(Up*Math.random()|0)),o||(l>>>=0),l}function hh(o){Nf=36969*(Nf&65535)+(Nf>>16)&El,Dd=18e3*(Dd&65535)+(Dd>>16)&El;var l=(Nf<<16)+(Dd&65535)>>>0&El|0;return o||(l>>>=0),l}function Nm(o){o===void 0&&(o=22);for(var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=Tl()>>>0,w=0,T=gr;T[pt]<o;)w++,T+=l.charAt(v&63),v>>>=6,w===5&&(v=(Tl()<<2&4294967295|v&3)>>>0,w=0);return T}var Df="3.3.5",Pv="."+Nm(6),Dm=0;function Yu(o){return o[cl]===1||o[cl]===9||!+o[cl]}function To(o,l){var v=l[o.id];if(!v){v={};try{Yu(l)&&Zn(l,o.id,{e:!1,v})}catch{}}return v}function su(o,l){return l===void 0&&(l=!1),iu(o+Dm+++(l?"."+Df:gr)+Pv)}function $u(o){var l={id:su("_aiData-"+(o||gr)+"."+Df),accept:function(v){return Yu(v)},get:function(v,w,T,x){var L=v[l.id];return L?L[iu(w)]:(x&&(L=To(l,v),L[iu(w)]=T),T)},kill:function(v,w){if(v&&v[w])try{delete v[w]}catch{}}};return l}function Il(o){return o&&Ii(o)&&(o.isVal||o.fb||Ea(o,"v")||Ea(o,"mrg")||Ea(o,"ref")||o.set)}function Nl(o,l,v){var w,T=v.dfVal||Wt;if(l&&v.fb){var x=v.fb;fr(x)||(x=[x]);for(var L=0;L<x[pt];L++){var O=x[L],M=l[O];if(T(M)?w=M:o&&(M=o.cfg[O],T(M)&&(w=M),o.set(o.cfg,En(O),M)),T(w))break}}return!T(w)&&T(v.v)&&(w=v.v),w}function Cd(o,l,v){var w=v;if(v&&Il(v)&&(w=Nl(o,l,v)),w){Il(w)&&(w=Cd(o,l,w));var T;fr(w)?(T=[],T[pt]=w[pt]):Aa(w)&&(T={}),T&&(Lr(w,function(x,L){L&&Il(L)&&(L=Cd(o,l,L)),T[x]=L}),w=T)}return w}function Cf(o,l,v,w){var T,x,L,O=w,M,Y,V,Q;Il(O)?(T=O.isVal,x=O.set,V=O[fc],Q=O[Hr],M=O.mrg,Y=O.ref,!Y&&st(Y)&&(Y=!!M),L=Nl(o,l,O)):L=w,Q&&o[Hr](l,v);var Z,ie=!0,re=l[v];(re||!at(re))&&(Z=re,ie=!1,T&&Z!==L&&!T(Z)&&(Z=L,ie=!0),x&&(Z=x(Z,L,l),ie=Z===L)),ie?L?Z=Cd(o,l,L):Z=L:(Aa(Z)||fr(L))&&M&&L&&(Aa(L)||fr(L))&&Lr(L,function(he,be){Cf(o,Z,he,be)}),o.set(l,v,Z),Y&&o.ref(l,v),V&&o[fc](l,v)}var zo=Ql("[[ai_dynCfg_1]]"),xc=Ql("[[ai_blkDynCfg_1]]"),Cm=Ql("[[ai_frcDynCfg_1]]");function Rm(o){if(o){var l;if(fr(o)?(l=[],l[pt]=o[pt]):Aa(o)&&(l={}),l)return Lr(o,function(v,w){l[v]=Rm(w)}),l}return o}function Yp(o){if(o){var l=o[zo]||o;if(l.cfg&&(l.cfg===o||l.cfg[zo]===l))return l}return null}function $p(o){if(o&&(Aa(o)||fr(o)))try{o[xc]=!0}catch{}return o}function Wo(o){if(o)try{o[Cm]=!0}catch{}return o}function Bu(o,l,v){var w=!1;return v&&!o[l.blkVal]&&(w=v[Cm],!w&&!v[xc]&&(w=Aa(v)||fr(v))),w}function Dl(o){$a("InvalidAccess:"+o)}var xm=["push","pop","shift","unshift","splice"],Bp=function(o,l,v,w){o&&o[yo](3,108,"".concat(v," [").concat(l,"] failed - ")+zt(w))};function Om(o,l,v){fr(l)&&dt(xm,function(w){var T=l[w];l[w]=function(){for(var x=[],L=0;L<arguments.length;L++)x[L]=arguments[L];var O=T[Lo](this,x);return Rd(o,l,v,"Patching"),O}})}function kv(o,l){var v=$r(o,l);return v&&v.get}function qp(o,l,v,w){var T={n:v,h:[],trk:function(Y){Y&&Y.fn&&(Ri(T.h,Y)===-1&&T.h[Vr](Y),o.trk(Y,T))},clr:function(Y){var V=Ri(T.h,Y);V!==-1&&T.h[Mo](V,1)}},x=!0,L=!1;function O(){x&&(L=L||Bu(O,o,w),w&&!w[zo]&&L&&(w=Rd(o,w,v,"Converting")),x=!1);var Y=o.act;return Y&&T.trk(Y),w}O[o.prop]={chng:function(){o.add(T)}};function M(Y){if(w!==Y){O[o.ro]&&!o.upd&&Dl("["+v+"] is read-only:"+zt(l)),x&&(L=L||Bu(O,o,w),x=!1);var V=L&&O[o.rf];if(L)if(V){Lr(w,function(Z){w[Z]=Y?Y[Z]:hi});try{Lr(Y,function(Z,ie){Oc(o,w,Z,ie)}),Y=w}catch(Z){Bp((o.hdlr||{})[Jr],v,"Assigning",Z),L=!1}}else w&&w[zo]&&Lr(w,function(Z){var ie=kv(w,Z);if(ie){var re=ie[o.prop];re&&re.chng()}});if(Y!==w){var Q=Y&&Bu(O,o,Y);!V&&Q&&(Y=Rd(o,Y,v,"Converting")),w=Y,L=Q}o.add(T)}}Zn(l,T.n,{g:O,s:M})}function Oc(o,l,v,w){if(l){var T=kv(l,v),x=T&&!!T[o.prop];x?l[v]=w:qp(o,l,v,w)}return l}function Io(o,l,v,w){if(l){var T=kv(l,v),x=T&&!!T[o.prop],L=w&&w[0],O=w&&w[1],M=w&&w[2];if(!x){if(M)try{$p(l)}catch(Y){Bp((o.hdlr||{})[Jr],v,"Blocking",Y)}try{Oc(o,l,v,l[v]),T=kv(l,v)}catch(Y){Bp((o.hdlr||{})[Jr],v,"State",Y)}}L&&(T[o.rf]=L),O&&(T[o.ro]=O),M&&(T[o.blkVal]=!0)}return l}function Rd(o,l,v,w){try{Lr(l,function(T,x){Oc(o,l,T,x)}),l[zo]||(rn(l,zo,{get:function(){return o[ld]}}),Om(o,l,v))}catch(T){Bp((o.hdlr||{})[Jr],v,w,T)}return l}var Cl="[[ai_",Ko="]]";function eg(o){var l,v=nc(Cl+"get"+o.uid+Ko),w=nc(Cl+"ro"+o.uid+Ko),T=nc(Cl+"rf"+o.uid+Ko),x=nc(Cl+"blkVal"+o.uid+Ko),L=nc(Cl+"dtl"+o.uid+Ko),O=null,M=null,Y;function V(re,he){var be=Y.act;try{Y.act=re,re&&re[L]&&(dt(re[L],function(Qe){Qe.clr(re)}),re[L]=[]),he({cfg:o.cfg,set:o.set.bind(o),setDf:o[Au].bind(o),ref:o.ref.bind(o),rdOnly:o[fc].bind(o)})}catch(Qe){var je=o[Jr];throw je&&je[yo](1,107,zt(Qe)),Qe}finally{Y.act=be||null}}function Q(){if(O){var re=O;O=null,M&&M[Fo](),M=null;var he=[];if(dt(re,function(be){if(be&&(be[L]&&(dt(be[L],function(je){je.clr(be)}),be[L]=null),be.fn))try{V(be,be.fn)}catch(je){he[Vr](je)}}),O)try{Q()}catch(be){he[Vr](be)}he[pt]>0&&wm("Watcher error(s): ",he)}}function Z(re){if(re&&re.h[pt]>0){O||(O=[]),M||(M=ac(function(){M=null,Q()},0));for(var he=0;he<re.h[pt];he++){var be=re.h[he];be&&Ri(O,be)===-1&&O[Vr](be)}}}function ie(re,he){if(re){var be=re[L]=re[L]||[];Ri(be,he)===-1&&be[Vr](he)}}return Y=(l={prop:v,ro:w,rf:T},l[Hr]=x,l[ld]=o,l.add=Z,l[ko]=Q,l.use=V,l.trk=ie,l),Y}function Hp(o,l){var v={fn:l,rm:function(){v.fn=null,o=null,l=null}};return Zn(v,"toJSON",{v:function(){return"WatcherHandler"+(v.fn?"":"[X]")}}),o.use(v,l),v}function gh(o,l,v){var w,T=Yp(l);if(T)return T;var x=su("dyncfg",!0),L=l&&v!==!1?l:Rm(l),O;function M(){O[ko]()}function Y(je,Qe,rt){try{je=Oc(O,je,Qe,rt)}catch(Yt){Bp(o,Qe,"Setting value",Yt)}return je[Qe]}function V(je){return Hp(O,je)}function Q(je,Qe){O.use(null,function(rt){var Yt=O.upd;try{st(Qe)||(O.upd=Qe),je(rt)}finally{O.upd=Yt}})}function Z(je,Qe){var rt;return Io(O,je,Qe,(rt={},rt[0]=!0,rt))[Qe]}function ie(je,Qe){var rt;return Io(O,je,Qe,(rt={},rt[1]=!0,rt))[Qe]}function re(je,Qe){var rt;return Io(O,je,Qe,(rt={},rt[2]=!0,rt))[Qe]}function he(je,Qe){return Qe&&Lr(Qe,function(rt,Yt){Cf(be,je,rt,Yt)}),je}var be=(w={uid:null,cfg:L},w[Jr]=o,w[ko]=M,w.set=Y,w[Au]=he,w[Za]=V,w.ref=Z,w[fc]=ie,w[Hr]=re,w._block=Q,w);return Zn(be,"uid",{c:!1,e:!1,w:!1,v:x}),O=eg(be),Rd(O,L,"config","Creating"),be}function tg(o,l){o?(o[Ks](l),o[yo](2,108,l)):Dl(l)}function Bi(o,l,v,w){var T=gh(v,o||{},w);return l&&T[Au](T.cfg,l),T}function xd(o,l,v){var w=o[zo]||o;return w.cfg&&(w.cfg===o||w.cfg[zo]===w)?w[Za](l):(tg(v,xp+zt(o)),Bi(o,null,v)[Za](l))}function Od(o,l){if(o&&o[ms])return o[ms](l)}function Am(o,l,v){var w;return v||(w=ha(function(T){v=T})),o&&Gs(o)>0?mf(Od(o[0],l),function(){Am(Vs(o,1),l,v)}):v(),w}var Rl=500,ga="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function No(o){return{mrg:!0,v:o}}var Ad=[Cv,gf,Rv,_f],qu=null,Ac;function xs(o,l){return function(){var v=arguments,w=Pm(l);if(w){var T=w.listener;T&&T[o]&&T[o][Lo](T,v)}}}function Lv(){var o=pn("Microsoft");return o&&(qu=o.ApplicationInsights),qu}function Pm(o){var l=qu;return!l&&o.disableDbgExt!==!0&&(l=qu||Lv()),l?l.ChromeDbgExt:null}function mt(o){if(!Ac){Ac={};for(var l=0;l<Ad[pt];l++)Ac[Ad[l]]=xs(Ad[l],o)}return Ac}var Hu,uu="warnToConsole",Rf="AI (Internal): ",km="AI: ",Pc="AITR_",Pd={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Os=(Hu={},Hu[0]=null,Hu[1]="errorToConsole",Hu[2]=uu,Hu[3]="debugToConsole",Hu);function Lm(o){return o?'"'+o[Yi](/\"/g,gr)+'"':gr}function Vp(o,l){var v=Tf();if(v){var w="log";v[o]&&(w=o),or(v[w])&&v[w](l)}}var xl=function(){function o(l,v,w,T){w===void 0&&(w=!1);var x=this;x[ku]=l,x[Qs]=(w?km:Rf)+l;var L=gr;Ds()&&(L=ki().stringify(T));var O=(v?" message:"+Lm(v):gr)+(T?" props:"+Lm(L):gr);x[Qs]+=O}return o.dataType="MessageData",o}();function kc(o,l){return(o||{})[Jr]||new Lc(l)}var Lc=function(){function o(l){this.identifier="DiagnosticLogger",this.queue=[];var v=0,w={},T,x,L,O,M;Ka(o,this,function(Y){M=Q(l||{}),Y.consoleLoggingLevel=function(){return T},Y[yo]=function(re,he,be,je,Qe){Qe===void 0&&(Qe=!1);var rt=new xl(he,be,Qe,je);if(O)throw zt(rt);var Yt=Os[re]||uu;if(st(rt[Qs]))ie("throw"+(re===1?"Critical":"Warning"),rt);else{if(Qe){var br=+rt[ku];!w[br]&&T>=re&&(Y[Yt](rt[Qs]),w[br]=!0)}else T>=re&&Y[Yt](rt[Qs]);V(re,rt)}},Y.debugToConsole=function(re){Vp("debug",re),ie("warning",re)},Y[Ks]=function(re){Vp("warn",re),ie("warning",re)},Y.errorToConsole=function(re){Vp("error",re),ie("error",re)},Y.resetInternalMessageCount=function(){v=0,w={}},Y[pd]=V,Y[ms]=function(re){M&&M.rm(),M=null};function V(re,he){if(!Z()){var be=!0,je=Pc+he[ku];if(w[je]?be=!1:w[je]=!0,be&&(re<=x&&(Y.queue[Vr](he),v++,ie(re===1?"error":"warn",he)),v===L)){var Qe="Internal events throttle limit per PageView reached for this app.",rt=new xl(23,Qe,!1);Y.queue[Vr](rt),re===1?Y.errorToConsole(Qe):Y[Ks](Qe)}}}function Q(re){return xd(Bi(re,Pd,Y).cfg,function(he){var be=he.cfg;T=be[ul],x=be.loggingLevelTelemetry,L=be.maxMessageLimit,O=be.enableDebug})}function Z(){return v>=L}function ie(re,he){var be=Pm(l||{});be&&be[mc]&&be[mc](re,he)}})}return o.__ieDyn=1,o}();function Mv(o){return o||new Lc}function en(o,l,v,w,T,x){x===void 0&&(x=!1),Mv(o)[yo](l,v,w,T,x)}function As(o,l){Mv(o)[Ks](l)}function Fv(o,l,v){Mv(o)[pd](l,v)}var Uv,cu,Gp="toGMTString",jv="toUTCString",Yv="cookie",kd="expires",Ld="isCookieUseDisabled",Ol="disableCookiesUsage",Mc="_ckMgr",zp=null,Al=null,$v=null,Do,Bv={},Md={},Mm=(Uv={cookieCfg:No((cu={},cu[Ai]={fb:"cookieDomain",dfVal:Op},cu.path={fb:"cookiePath",dfVal:Op},cu.enabled=hi,cu.ignoreCookies=hi,cu.blockedCookies=hi,cu)),cookieDomain:hi,cookiePath:hi},Uv[Ol]=hi,Uv);function Ps(){!Do&&(Do=Qf(function(){return la()}))}function _h(o,l){var v=ks[Mc]||Md[Mc];return v||(v=ks[Mc]=ks(o,l),Md[Mc]=v),v}function Vu(o){return o?o.isEnabled():!0}function qv(o,l){return l&&o&&fr(o.ignoreCookies)?Ri(o.ignoreCookies,l)!==-1:!1}function Pl(o,l){return l&&o&&fr(o.blockedCookies)&&Ri(o.blockedCookies,l)!==-1?!0:qv(o,l)}function Fm(o,l){var v=l[Zs];if(at(v)){var w=void 0;st(o[Ld])||(w=!o[Ld]),st(o[Ol])||(w=!o[Ol]),v=w}return v}function Jo(o,l){var v;if(o)v=o.getCookieMgr();else if(l){var w=l.cookieCfg;w&&w[Mc]?v=w[Mc]:v=ks(l)}return v||(v=_h(l,(o||{})[Jr])),v}function ks(o,l){var v,w,T,x,L,O,M,Y,V;o=Bi(o||Md,null,l).cfg,L=xd(o,function(Z){Z[Au](Z.cfg,Mm),w=Z.ref(Z.cfg,"cookieCfg"),T=w[Lu]||"/",x=w[Ai],O=Fm(o,w)!==!1,M=w.getCookie||ur,Y=w.setCookie||ro,V=w.delCookie||ro},l);var Q=(v={isEnabled:function(){var Z=Fm(o,w)!==!1&&O&&jn(l),ie=Md[Mc];return Z&&ie&&Q!==ie&&(Z=Vu(ie)),Z},setEnabled:function(Z){O=Z!==!1,w[Zs]=Z},set:function(Z,ie,re,he,be){var je=!1;if(Vu(Q)&&!Pl(w,Z)){var Qe={},rt=Zi(ie||gr),Yt=vo(rt,";");if(Yt!==-1&&(rt=Zi(Kr(ie,Yt)),Qe=xf(Wr(ie,Yt+1))),to(Qe,Ai,he||x,Cn,st),!at(re)){var br=Uu();if(st(Qe[kd])){var yi=Tu(),yr=yi+re*1e3;if(yr>0){var Hi=new Date;Hi.setTime(yr),to(Qe,kd,kl(Hi,br?Gp:jv)||kl(Hi,br?Gp:jv)||gr,Cn)}}br||to(Qe,"max-age",gr+re,null,st)}var Xo=ou();Xo&&Xo[hs]==="https:"&&(to(Qe,"secure",null,null,st),Al===null&&(Al=!no((Ra()||{})[Sp])),Al&&to(Qe,"SameSite","None",null,st)),to(Qe,Lu,be||T,null,st),Y(Z,Fd(rt,Qe)),je=!0}return je},get:function(Z){var ie=gr;return Vu(Q)&&!qv(w,Z)&&(ie=M(Z)),ie},del:function(Z,ie){var re=!1;return Vu(Q)&&(re=Q.purge(Z,ie)),re},purge:function(Z,ie){var re,he=!1;if(jn(l)){var be=(re={},re[Lu]=ie||"/",re[kd]="Thu, 01 Jan 1970 00:00:01 GMT",re);Uu()||(be["max-age"]="0"),V(Z,Fd(gr,be)),he=!0}return he}},v[ms]=function(Z){L&&L.rm(),L=null},v);return Q[Mc]=Q,Q}function jn(o){if(zp===null){zp=!1,!Do&&Ps();try{var l=Do.v||{};zp=l[Yv]!==void 0}catch(v){en(o,2,68,"Cannot access document.cookie - "+bs(v),{exception:zt(v)})}}return zp}function xf(o){var l={};if(o&&o[pt]){var v=Zi(o)[La](";");dt(v,function(w){if(w=Zi(w||gr),w){var T=vo(w,"=");T===-1?l[w]=null:l[Zi(Kr(w,T))]=Zi(Wr(w,T+1))}})}return l}function kl(o,l){return or(o[l])?o[l]():null}function Fd(o,l){var v=o||gr;return Lr(l,function(w,T){v+="; "+w+(at(T)?gr:"="+T)}),v}function ur(o){var l=gr;if(!Do&&Ps(),Do.v){var v=Do.v[Yv]||gr;$v!==v&&(Bv=xf(v),$v=v),l=Zi(Bv[o]||gr)}return l}function ro(o,l){!Do&&Ps(),Do.v&&(Do.v[Yv]=o+"="+l)}function no(o){return Gt(o)?!!(vt(o,"CPU iPhone OS 12")||vt(o,"iPad; CPU OS 12")||vt(o,"Macintosh; Intel Mac OS X 10_14")&&vt(o,"Version/")&&vt(o,"Safari")||vt(o,"Macintosh; Intel Mac OS X 10_14")&&id(o,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||vt(o,"Chrome/5")||vt(o,"Chrome/6")||vt(o,"UnrealEngine")&&!vt(o,"Chrome")||vt(o,"UCBrowser/12")||vt(o,"UCBrowser/11")):!1}var Li={perfEvtsSendAll:!1};function Ll(o){o.h=null;var l=o.cb;o.cb=[],dt(l,function(v){it(v.fn,[v.arg])})}function yn(o,l,v,w){dt(o,function(T){T&&T[l]&&(v?(v.cb[Vr]({fn:w,arg:T}),v.h=v.h||ac(Ll,0,v)):it(w,[T]))})}var Ml=function(){function o(l){this.listeners=[];var v,w,T=[],x={h:null,cb:[]},L=Bi(l,Li);w=L[Za](function(O){v=!!O.cfg.perfEvtsSendAll}),Ka(o,this,function(O){Zn(O,"listeners",{g:function(){return T}}),O[ji]=function(M){T[Vr](M)},O[vs]=function(M){for(var Y=Ri(T,M);Y>-1;)T[Mo](Y,1),Y=Ri(T,M)},O[Cv]=function(M){yn(T,Cv,x,function(Y){Y[Cv](M)})},O[gf]=function(M,Y){yn(T,gf,x,function(V){V[gf](M,Y)})},O[Rv]=function(M,Y){yn(T,Rv,Y?x:null,function(V){V[Rv](M,Y)})},O[_f]=function(M){M&&(v||!M[vd]())&&yn(T,_f,null,function(Y){M[Qa]?ac(function(){return Y[_f](M)},0):Y[_f](M)})},O[ml]=function(M){M&&M[pt]&&yn(T,ml,x,function(Y){Y[ml](M)})},O[Rp]=function(M){M&&M[df]&&yn(T,Rp,x,function(Y){Y[Rp](M)})},O[ui]=function(M,Y){if(M>0){var V=Y||0;yn(T,ui,x,function(Q){Q[ui](M,V)})}},O[ms]=function(M){var Y=function(){w&&w.rm(),w=null,T=[],x.h&&x.h[Fo](),x.h=null,x.cb=[]},V;if(yn(T,"unload",null,function(Q){var Z=Q[ms](M);Z&&(V||(V=[]),V[Vr](Z))}),V)return ha(function(Q){return mf(_d(V),function(){Y(),Q()})});Y()}})}return o.__ieDyn=1,o}(),lu="ctx",Wp="ParentContextKey",fu="ChildrenContextKey",Hv=null,Gu=function(){function o(l,v,w){var T=this;if(T.start=Tu(),T[jo]=l,T[Qa]=w,T[vd]=function(){return!1},or(v)){var x;Zn(T,"payload",{g:function(){return!x&&or(v)&&(x=v(),v=null),x}})}T[$o]=function(L){return L?L===o[Wp]||L===o[fu]?T[L]:(T[lu]||{})[L]:null},T[ma]=function(L,O){if(L)if(L===o[Wp])T[L]||(T[vd]=function(){return!0}),T[L]=O;else if(L===o[fu])T[L]=O;else{var M=T[lu]=T[lu]||{};M[L]=O}},T[ll]=function(){var L=0,O=T[$o](o[fu]);if(fr(O))for(var M=0;M<O[pt];M++){var Y=O[M];Y&&(L+=Y[Yo])}T[Yo]=Tu()-T.start,T.exTime=T[Yo]-L,T[ll]=function(){}}}return o.ParentContextKey="parent",o.ChildrenContextKey="childEvts",o}(),Vv=function(){function o(l){this.ctx={},Ka(o,this,function(v){v.create=function(w,T,x){return new Gu(w,T,x)},v.fire=function(w){w&&(w[ll](),l&&or(l[_f])&&l[_f](w))},v[ma]=function(w,T){if(w){var x=v[lu]=v[lu]||{};x[w]=T}},v[$o]=function(w){return(v[lu]||{})[w]}})}return o.__ieDyn=1,o}(),Gv="CoreUtils.doPerf";function d(o,l,v,w,T){if(o){var x=o;if(x[hl]&&(x=x[hl]()),x){var L=void 0,O=x[$o](Gv);try{if(L=x.create(l(),w,T),L){if(O&&L[ma]&&(L[ma](Gu[Wp],O),O[$o]&&O[ma])){var M=O[$o](Gu[fu]);M||(M=[],O[ma](Gu[fu],M)),M[Vr](L)}return x[ma](Gv,L),v(L)}}catch(Y){L&&L[ma]&&L[ma]("exception",Y)}finally{L&&x.fire(L),x[ma](Gv,O)}}}return v()}function h(){return Hv}function S(){var o=D();return Wr(o,0,8)+"-"+Wr(o,8,12)+"-"+Wr(o,12,16)+"-"+Wr(o,16,20)+"-"+Wr(o,20)}function D(){for(var o=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],l=gr,v,w=0;w<4;w++)v=Tl(),l+=o[v&15]+o[v>>4&15]+o[v>>8&15]+o[v>>12&15]+o[v>>16&15]+o[v>>20&15]+o[v>>24&15]+o[v>>28&15];var T=o[8+(Tl()&3)|0];return vi(l,0,8)+vi(l,9,4)+"4"+vi(l,13,3)+T+vi(l,16,3)+vi(l,19,12)}var U=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,W="00",J="ff",ae="00000000000000000000000000000000",me="0000000000000000",ge=1;function Ze(o,l,v){return o&&o[pt]===l&&o!==v?!!o.match(/^[\da-f]*$/i):!1}function Mt(o,l,v){return Ze(o,l)?o:v}function nr(o){(isNaN(o)||o<0||o>255)&&(o=1);for(var l=o.toString(16);l[pt]<2;)l="0"+l;return l}function cr(o,l,v,w){var T;return T={},T[Xa]=Ze(w,2,J)?w:W,T[Ep]=ir(o)?o:D(),T[vf]=jt(l)?l:Kr(D(),16),T.traceFlags=v>=0&&v<=255?v:1,T}function lt(o,l){var v;if(!o||(fr(o)&&(o=o[0]||""),!o||!Gt(o)||o[pt]>8192))return null;if(o.indexOf(",")!==-1){var w=o[La](",");o=w[l>0&&w[pt]>l?l:0]}var T=U.exec(Zi(o));return!T||T[1]===J||T[2]===ae||T[3]===me?null:(v={version:(T[1]||gr)[pa](),traceId:(T[2]||gr)[pa](),spanId:(T[3]||gr)[pa]()},v[yc]=parseInt(T[4],16),v)}function ir(o){return Ze(o,32,ae)}function jt(o){return Ze(o,16,me)}function xr(o){return!(!o||!Ze(o[Xa],2,J)||!Ze(o[Ep],32,ae)||!Ze(o[vf],16,me)||!Ze(nr(o[yc]),2))}function Or(o){return xr(o)?(o[yc]&ge)===ge:!1}function At(o){if(o){var l=nr(o[yc]);Ze(l,2)||(l="01");var v=o[Xa]||W;return v!=="00"&&v!=="ff"&&(v=W),"".concat(v.toLowerCase(),"-").concat(Mt(o.traceId,32,ae).toLowerCase(),"-").concat(Mt(o.spanId,16,me).toLowerCase(),"-").concat(l.toLowerCase())}return""}function xn(o){var l="traceparent",v=lt(mh(l),o);return v||(v=lt(Nd(l),o)),v}var Of=$u("plugin");function On(o){return Of.get(o,"state",{},!0)}function io(o,l){for(var v=[],w=null,T=o[eo](),x;T;){var L=T[Uo]();if(L){w&&w[hc]&&L[bo]&&w[hc](L),x=On(L);var O=!!x[Qi];L[Qi]&&(O=L[Qi]()),O||v[Vr](L),w=L,T=T[eo]()}}dt(v,function(M){var Y=o[Rn]();M[Vn](o.getCfg(),Y,l,o[eo]()),x=On(M),!M[Rn]&&!x[Rn]&&(x[Rn]=Y),x[Qi]=!0,delete x[xi]})}function Ud(o){return o.sort(function(l,v){var w=0;if(v){var T=v[bo];l[bo]?w=T?l[hf]-v[hf]:1:T&&(w=-1)}else w=l?1:-1;return w})}function zv(o){var l={};return{getName:function(){return l[jo]},setName:function(v){o&&o.setName(v),l[jo]=v},getTraceId:function(){return l[Ep]},setTraceId:function(v){o&&o.setTraceId(v),ir(v)&&(l[Ep]=v)},getSpanId:function(){return l[vf]},setSpanId:function(v){o&&o.setSpanId(v),jt(v)&&(l[vf]=v)},getTraceFlags:function(){return l[yc]},setTraceFlags:function(v){o&&o.setTraceFlags(v),l[yc]=v}}}var jd="TelemetryPluginChain",Yd="_hasRun",Kp="_getTelCtx",Um=0;function Fe(o,l,v){for(;o;){if(o[Uo]()===v)return o;o=o[eo]()}return wn([v],l.config||{},l)}function Nt(o,l,v,w){var T=null,x=[];l||(l=Bi({},null,v[Jr])),w!==null&&(T=w?Fe(o,v,w):o);var L={_next:M,ctx:{core:function(){return v},diagLog:function(){return kc(v,l.cfg)},getCfg:function(){return l.cfg},getExtCfg:V,getConfig:Q,hasNext:function(){return!!T},getNext:function(){return T},setNext:function(ie){T=ie},iterate:Z,onComplete:O}};function O(ie,re){for(var he=[],be=2;be<arguments.length;be++)he[be-2]=arguments[be];ie&&x[Vr]({func:ie,self:st(re)?L.ctx:re,args:he})}function M(){var ie=T;if(T=ie?ie[eo]():null,!ie){var re=x;re&&re[pt]>0&&(dt(re,function(he){try{he.func.call(he.self,he.args)}catch(be){en(v[Jr],2,73,"Unexpected Exception during onComplete - "+zt(be))}}),x=[])}return ie}function Y(ie,re){var he=null,be=l.cfg;if(be&&ie){var je=be[Ic];!je&&re&&(je={}),be[Ic]=je,je=l.ref(be,Ic),je&&(he=je[ie],!he&&re&&(he={}),je[ie]=he,he=l.ref(je,ie))}return he}function V(ie,re){var he=Y(ie,!0);return re&&Lr(re,function(be,je){if(at(he[be])){var Qe=l.cfg[be];(Qe||!at(Qe))&&(he[be]=Qe)}Cf(l,he,be,je)}),l[Au](he,re)}function Q(ie,re,he){he===void 0&&(he=!1);var be,je=Y(ie,!1),Qe=l.cfg;return je&&(je[re]||!at(je[re]))?be=je[re]:(Qe[re]||!at(Qe[re]))&&(be=Qe[re]),be||!at(be)?be:he}function Z(ie){for(var re;re=L._next();){var he=re[Uo]();he&&ie(he)}}return L}function Ht(o,l,v,w){var T=Bi(l),x=Nt(o,T,v,w),L=x.ctx;function O(Y){var V=x._next();return V&&V[bo](Y,L),!V}function M(Y,V){return Y===void 0&&(Y=null),fr(Y)&&(Y=wn(Y,T.cfg,v,V)),Ht(Y||L[eo](),T.cfg,v,V)}return L[Qn]=O,L[Pu]=M,L}function Xr(o,l,v){var w=Bi(l.config),T=Nt(o,w,l,v),x=T.ctx;function L(M){var Y=T._next();return Y&&Y[ms](x,M),!Y}function O(M,Y){return M===void 0&&(M=null),fr(M)&&(M=wn(M,w.cfg,l,Y)),Xr(M||x[eo](),l,Y)}return x[Qn]=L,x[Pu]=O,x}function vn(o,l,v){var w=Bi(l.config),T=Nt(o,w,l,v),x=T.ctx;function L(M){return x.iterate(function(Y){or(Y[mi])&&Y[mi](x,M)})}function O(M,Y){return M===void 0&&(M=null),fr(M)&&(M=wn(M,w.cfg,l,Y)),vn(M||x[eo](),l,Y)}return x[Qn]=L,x[Pu]=O,x}function wn(o,l,v,w){var T=null,x=!w;if(fr(o)&&o[pt]>0){var L=null;dt(o,function(O){if(!x&&w===O&&(x=!0),x&&O&&or(O[bo])){var M=gi(O,l,v);T||(T=M),L&&L._setNext(M),L=M}})}return w&&!T?wn([w],l,v):T}function gi(o,l,v){var w=null,T=or(o[bo]),x=or(o[hc]),L;o?L=o[wo]+"-"+o[hf]+"-"+Um++:L="Unknown-0-"+Um++;var O={getPlugin:function(){return o},getNext:function(){return w},processTelemetry:V,unload:Q,update:Z,_id:L,_setNext:function(ie){w=ie}};function M(){var ie;return o&&or(o[Kp])&&(ie=o[Kp]()),ie||(ie=Ht(O,l,v)),ie}function Y(ie,re,he,be,je){var Qe=!1,rt=o?o[wo]:jd,Yt=ie[Yd];return Yt||(Yt=ie[Yd]={}),ie.setNext(w),o&&d(ie[Rn](),function(){return rt+":"+he},function(){Yt[L]=!0;try{var br=w?w._id:gr;br&&(Yt[br]=!1),Qe=re(ie)}catch(yr){var yi=w?Yt[w._id]:!0;yi&&(Qe=!0),(!w||!yi)&&en(ie[mc](),1,73,"Plugin ["+rt+"] failed during "+he+" - "+zt(yr)+", run flags: "+zt(Yt))}},be,je),Qe}function V(ie,re){re=re||M();function he(be){if(!o||!T)return!1;var je=On(o);return je[xi]||je[Tc]?!1:(x&&o[hc](w),o[bo](ie,be),!0)}Y(re,he,"processTelemetry",function(){return{item:ie}},!ie.sync)||re[Qn](ie)}function Q(ie,re){function he(){var be=!1;if(o){var je=On(o),Qe=o[Rn]||je[Rn];o&&(!Qe||Qe===ie.core())&&!je[xi]&&(je[Rn]=null,je[xi]=!0,je[Qi]=!1,o[xi]&&o[xi](ie,re)===!0&&(be=!0))}return be}Y(ie,he,"unload",function(){},re[Qa])||ie[Qn](re)}function Z(ie,re){function he(){var be=!1;if(o){var je=On(o),Qe=o[Rn]||je[Rn];o&&(!Qe||Qe===ie.core())&&!je[xi]&&o[mi]&&o[mi](ie,re)===!0&&(be=!0)}return be}Y(ie,he,"update",function(){},!1)||ie[Qn](re)}return Di(O)}var zu=function(){function o(l,v,w,T){var x=this,L=Ht(l,v,w,T);_l(x,L,Ki(L))}return o}();function Ls(){var o=[];function l(w){w&&o[Vr](w)}function v(w,T){dt(o,function(x){try{x(w,T)}catch(L){en(w[mc](),2,73,"Unexpected error calling unload handler - "+zt(L))}}),o=[]}return{add:l,run:v}}var Wu,Fl;function jm(o,l){Wu=o,Fl=l}function Jp(){var o=[];function l(w){var T=o;o=[],dt(T,function(x){try{(x.rm||x.remove).call(x)}catch(L){en(w,2,73,"Unloading:"+zt(L))}}),Wu&&T[pt]>Wu&&(Fl?Fl("doUnload",T):en(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))}function v(w){w&&(Ha(o,w),Wu&&o[pt]>Wu&&(Fl?Fl("Add",o):en(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}return{run:l,add:v}}var Af,Fc="getPlugin",P_=(Af={},Af[Ic]={isVal:Op,v:{}},Af),rg=function(){function o(){var l=this,v,w,T,x,L;Y(),Ka(o,l,function(V){V[Vn]=function(Q,Z,ie,re){M(Q,Z,re),v=!0},V[xi]=function(Q,Z){var ie,re=V[Rn];if(!re||Q&&re!==Q[Rn]())return;var he,be=!1,je=Q||Xr(null,re,T&&T[Fc]?T[Fc]():T),Qe=Z||(ie={reason:0},ie[Qa]=!1,ie);function rt(){be||(be=!0,x.run(je,Z),L.run(je[mc]()),he===!0&&je[Qn](Qe),Y())}return!V[_n]||V[_n](je,Qe,rt)!==!0?rt():he=!0,he},V[mi]=function(Q,Z){var ie=V[Rn];if(!ie||Q&&ie!==Q[Rn]())return;var re,he=!1,be=Q||vn(null,ie,T&&T[Fc]?T[Fc]():T),je=Z||{reason:0};function Qe(){he||(he=!0,M(be.getCfg(),be.core(),be[eo]()))}return!V._doUpdate||V._doUpdate(be,je,Qe)!==!0?Qe():re=!0,re},Eo(V,"_addUnloadCb",function(){return x},"add"),Eo(V,"_addHook",function(){return L},"add"),Zn(V,"_unloadHooks",{g:function(){return L}})}),l[mc]=function(V){return O(V)[mc]()},l[Qi]=function(){return v},l.setInitialized=function(V){v=V},l[hc]=function(V){T=V},l[Qn]=function(V,Q){Q?Q[Qn](V):T&&or(T[bo])&&T[bo](V,null)},l._getTelCtx=O;function O(V){V===void 0&&(V=null);var Q=V;if(!Q){var Z=w||Ht(null,{},l[Rn]);T&&T[Fc]?Q=Z[Pu](null,T[Fc]):Q=Z[Pu](null,T)}return Q}function M(V,Q,Z){Bi(V,P_,kc(Q)),!Z&&Q&&(Z=Q[dd]()[eo]());var ie=T;T&&T[Fc]&&(ie=T[Fc]()),l[Rn]=Q,w=Ht(Z,V,Q,ie)}function Y(){v=!1,l[Rn]=null,w=null,T=null,L=Jp(),x=Ls()}}return o.__ieDyn=1,o}();function Hg(o,l,v){var w={id:l,fn:v};Ha(o,w);var T={remove:function(){dt(o,function(x,L){if(x.id===w.id)return o[Mo](L,1),-1})}};return T}function yh(o,l,v){for(var w=!1,T=o[pt],x=0;x<T;++x){var L=o[x];if(L)try{if(L.fn[Lo](null,[l])===!1){w=!0;break}}catch(O){en(v,2,64,"Telemetry initializer failed: "+bs(O),{exception:zt(O)},!0)}}return!w}var k_=function(o){oc(l,o);function l(){var v=o.call(this)||this;v.identifier="TelemetryInitializerPlugin",v.priority=199;var w,T;x(),Ka(l,v,function(L,O){L.addTelemetryInitializer=function(M){return Hg(T,w++,M)},L[bo]=function(M,Y){yh(T,M,Y?Y[mc]():L[mc]())&&L[Qn](M,Y)},L[_n]=function(){x()}});function x(){w=0,T=[]}return v}return l.__ieDyn=1,l}(rg),Pf,Wv="Plugins must provide initialize method",Ym="_notificationManager",kf="SDK is still unloading...",Kv="SDK is not initialized",ng=100,Vg=5e4,$d=Ia((Pf={cookieCfg:{}},Pf[nu]={rdOnly:!0,ref:!0,v:[]},Pf[ru]={rdOnly:!0,ref:!0,v:[]},Pf[Ic]={ref:!0,v:{}},Pf[ws]=hi,Pf.loggingLevelConsole=0,Pf.diagnosticLogInterval=hi,Pf));function Gg(o,l){return new Vv(l)}function L_(o,l,v){var w,T=[],x=[],L={};return dt(v,function(O){(at(O)||at(O[Vn]))&&Fi(Wv);var M=O[hf],Y=O[wo];O&&M&&(at(L[M])?L[M]=Y:As(o,"Two extensions have same priority #"+M+" - "+L[M]+", "+Y)),!M||M<l?T[Vr](O):x[Vr](O)}),w={},w[Rn]=T,w[ru]=x,w}function ig(o,l){var v=!1;return dt(l,function(w){if(w===o)return v=!0,-1}),v}function $m(o,l,v,w){v&&Lr(v,function(T,x){w&&Aa(x)&&Aa(l[T])&&$m(o,l[T],x,w),w&&Aa(x)&&Aa(l[T])?$m(o,l[T],x,w):o.set(l,T,x)})}function ag(o,l){var v=null,w=-1;return dt(o,function(T,x){if(T.w===l)return v=T,w=x,-1}),{i:w,l:v}}function wh(o,l){var v=ag(o,l).l;return v||(v={w:l,rm:function(){var w=ag(o,l);w.i!==-1&&o[Mo](w.i,1)}},o[Vr](v)),v}function Jv(o,l,v){dt(l,function(w){var T=xd(o,w.w,v);delete w.w,w.rm=function(){T.rm()}})}function Bd(o,l,v,w){return l.add(o[Za](function(T){var x=T.cfg.disableDbgExt;x===!0&&w&&(v[vs](w),w=null),v&&!w&&x!==!0&&(w=mt(T.cfg),v[ji](w))})),w}function og(o){return Zn({rm:function(){o.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(o)+">"}})}var Bm=function(){function o(){var l,v,w,T,x,L,O,M,Y,V,Q,Z,ie,re,he,be,je,Qe,rt,Yt,br,yi,yr,Hi,Xo,Qo,Bc,wa,Bf,Ve,Pt,Yn;Ka(o,this,function(we){Mr(),we._getDbgPlgTargets=function(){return[yr,T]},we[Qi]=function(){return v},we.activeStatus=function(){return Qo},we._setPendingStatus=function(){Qo=3},we[Vn]=function(Ne,ut,Ut,kt){ie&&Fi(kf),we[Qi]()&&Fi("Core cannot be initialized more than once"),l=Bi(Ne,$d,Ut||we[Jr],!1),Ne=l.cfg,es(l[Za](function(kn){var wi=kn.cfg,Ma=Qo===3;if(!Ma){wa=wi.initInMemoMaxSize||ng;var oo=wi[sl],Hf=wi.endpointUrl;if(at(oo)){br=null,Qo=gn[dc];var Ih="Please provide instrumentation key";v?(en(w,1,100,Ih),$n()):Fi(Ih);return}var Nh=[];if(kr(oo)?(Nh[Vr](oo),br=null):br=oo,kr(Hf)?(Nh[Vr](Hf),Bc=null):Bc=Hf,Nh[pt]){Bf=!1,Qo=3;var F_=Op(wi.initTimeOut)?wi.initTimeOut:Vg,Iy=vl(Nh);ac(function(){Bf||ar()},F_),mf(Iy,function(fg){try{if(Bf)return;if(!fg.rejected){var $l=fg[fd];if($l&&$l[pt]){var U_=$l[0];if(br=U_&&U_[fd],$l[pt]>1){var j_=$l[1];Bc=j_&&j_[fd]}}br&&(Ne[sl]=br,Ne.endpointUrl=Bc)}ar()}catch{Bf||ar()}})}else ar();var Wg=kn.ref(kn.cfg,Ic);Lr(Wg,function(fg){kn.ref(Wg,fg)})}})),x=kt,rt=Bd(l,Qe,x&&we[Js](),rt),nv(),we[Jr]=Ut;var tr=Ne[nu];if(V=[],V[Vr].apply(V,ho(ho([],ut,!1),tr)),Q=Ne[ru],ci(null),(!Z||Z[pt]===0)&&Fi("No "+ru+" available"),Q&&Q[pt]>1){var jr=we[Uo]("TeeChannelController");(!jr||!jr.plugin)&&en(w,1,28,"TeeChannel required")}Jv(Ne,yi,w),yi=null,v=!0,Qo===gn.ACTIVE&&$n()},we.getChannels=function(){var Ne=[];return Z&&dt(Z,function(ut){Ne[Vr](ut)}),Di(Ne)},we.track=function(Ne){d(we[hl](),function(){return"AppInsightsCore:track"},function(){Ne===null&&(li(Ne),Fi("Invalid telemetry item")),!Ne[jo]&&at(Ne[jo])&&(li(Ne),Fi("telemetry name required")),Ne[pc]=Ne[pc]||br,Ne[Yo]=Ne[Yo]||Ss(new Date),Ne.ver=Ne.ver||"4.0",!ie&&we[Qi]()&&Qo===gn.ACTIVE?ta()[Qn](Ne):Qo!==gn[dc]&&T[pt]<=wa&&T[Vr](Ne)},function(){return{item:Ne}},!Ne.sync)},we[dd]=ta,we[Js]=function(){return x||(x=new Ml(l.cfg),we[Ym]=x),x},we[ji]=function(Ne){we.getNotifyMgr()[ji](Ne)},we[vs]=function(Ne){x&&x[vs](Ne)},we.getCookieMgr=function(){return M||(M=ks(l.cfg,we[Jr])),M},we.setCookieMgr=function(Ne){M!==Ne&&(Od(M,!1),M=Ne)},we[hl]=function(){return L||O||h()},we.setPerfMgr=function(Ne){L=Ne},we.eventCnt=function(){return T[pt]},we.releaseQueue=function(){if(v&&T[pt]>0){var Ne=T;T=[],Qo===2?dt(Ne,function(ut){ut[pc]=ut[pc]||br,ta()[Qn](ut)}):en(w,2,20,"core init status is not active")}},we[vc]=function(Ne){return he=Ne||null,Yn=!1,Ve&&Ve[Fo](),Vi(!0)};function ar(){Bf=!0,at(br)?(Qo=gn[dc],en(w,1,112,"ikey can't be resolved from promises")):Qo=gn.ACTIVE,$n()}function $n(){v&&(we.releaseQueue(),we[vc]())}function Vi(Ne){if((!Ve||!Ve[Zs])&&!Yn){var ut=Ne||w&&w.queue[pt]>0;ut&&(Pt||(Pt=!0,es(l[Za](function(Ut){var kt=Ut.cfg.diagnosticLogInterval;(!kt||!(kt>0))&&(kt=1e4);var tr=!1;Ve&&(tr=Ve[Zs],Ve[Fo]()),Ve=od(rv,kt),Ve.unref(),Ve[Zs]=tr}))),Ve[Zs]=!0)}return Ve}we[ka]=function(){Yn=!0,Ve&&Ve[Fo](),rv()},_l(we,function(){return re},["addTelemetryInitializer"]),we[ms]=function(Ne,ut,Ut){var kt;Ne===void 0&&(Ne=!0),v||Fi(Kv),ie&&Fi(kf);var tr=(kt={reason:50},kt[Qa]=Ne,kt.flushComplete=!1,kt),jr;Ne&&!ut&&(jr=ha(function(Ma){ut=Ma}));var kn=Xr(Jd(),we);kn[Xs](function(){Qe.run(we[Jr]),Am([M,x,w],Ne,function(){Mr(),ut&&ut(tr)})},we);function wi(Ma){tr.flushComplete=Ma,ie=!0,je.run(kn,tr),we[ka](),kn[Qn](tr)}return rv(),qf(Ne,wi,6,Ut),jr},we[Uo]=ra,we.addPlugin=function(Ne,ut,Ut,kt){if(!Ne){kt&&kt(!1),em(Wv);return}var tr=ra(Ne[wo]);if(tr&&!ut){kt&&kt(!1),em("Plugin ["+Ne[wo]+"] is already loaded!");return}var jr={reason:16};function kn(oo){V[Vr](Ne),jr.added=[Ne],ci(jr),kt&&kt(!0)}if(tr){var wi=[tr.plugin],Ma={reason:2,isAsync:!!Ut};Sa(wi,Ma,function(oo){oo?(jr.removed=wi,jr.reason|=32,kn()):kt&&kt(!1)})}else kn()},we.updateCfg=function(Ne,ut){ut===void 0&&(ut=!0);var Ut;if(we[Qi]()){Ut={reason:1,cfg:l.cfg,oldCfg:hp({},l.cfg),newConfig:hp({},Ne),merge:ut},Ne=Ut.newConfig;var kt=l.cfg;Ne[nu]=kt[nu],Ne[ru]=kt[ru]}l._block(function(tr){var jr=tr.cfg;$m(tr,jr,Ne,ut),ut||Lr(jr,function(kn){Ea(Ne,kn)||tr.set(jr,kn,hi)}),tr[Au](jr,$d)},!0),l[ko](),Ut&&iv(Ut)},we.evtNamespace=function(){return be},we.flush=qf,we.getTraceCtx=function(Ne){return Yt||(Yt=zv()),Yt},we.setTraceCtx=function(Ne){Yt=Ne||null},we.addUnloadHook=es,Eo(we,"addUnloadCb",function(){return je},"add"),we.onCfgChange=function(Ne){var ut;return v?ut=xd(l.cfg,Ne,we[Jr]):ut=wh(yi,Ne),og(ut)},we.getWParam=function(){return Zl()||l.cfg.enableWParam?0:-1};function ao(){var Ne={};Hi=[];var ut=function(Ut){Ut&&dt(Ut,function(kt){if(kt[wo]&&kt[Xa]&&!Ne[kt.identifier]){var tr=kt[wo]+"="+kt[Xa];Hi[Vr](tr),Ne[kt.identifier]=kt}})};ut(Z),Q&&dt(Q,function(Ut){ut(Ut)}),ut(V)}function Mr(){v=!1,l=Bi({},$d,we[Jr]),l.cfg[ul]=1,Zn(we,"config",{g:function(){return l.cfg},s:function(ut){we.updateCfg(ut,!1)}}),Zn(we,"pluginVersionStringArr",{g:function(){return Hi||ao(),Hi}}),Zn(we,"pluginVersionString",{g:function(){return Xo||(Hi||ao(),Xo=Hi.join(";")),Xo||gr}}),Zn(we,"logger",{g:function(){return w||(w=new Lc(l.cfg),l[Jr]=w),w},s:function(ut){l[Jr]=ut,w!==ut&&(Od(w,!1),w=ut)}}),we[Jr]=new Lc(l.cfg),yr=[];var Ne=we.config[nu]||[];Ne.splice(0,Ne[pt]),Ha(Ne,yr),re=new k_,T=[],Od(x,!1),x=null,L=null,O=null,Od(M,!1),M=null,Y=null,V=[],Q=null,Z=null,ie=!1,he=null,be=su("AIBaseCore",!0),je=Ls(),Yt=null,br=null,Qe=Jp(),yi=[],Xo=null,Hi=null,Yn=!1,Ve=null,Pt=!1,Qo=0,Bc=null,wa=null,Bf=!1}function ta(){var Ne=Ht(Jd(),l.cfg,we);return Ne[Xs](Vi),Ne}function ci(Ne){var ut=L_(we[Jr],Rl,V);Y=null,Xo=null,Hi=null,Z=(Q||[])[0]||[],Z=Ud(Ha(Z,ut[ru]));var Ut=Ha(Ud(ut[Rn]),Z);yr=Di(Ut);var kt=we.config[nu]||[];kt.splice(0,kt[pt]),Ha(kt,yr);var tr=ta();Z&&Z[pt]>0&&io(tr[Pu](Z),Ut),io(tr,Ut),Ne&&iv(Ne)}function ra(Ne){var ut=null,Ut=null,kt=[];return dt(yr,function(tr){if(tr[wo]===Ne&&tr!==re)return Ut=tr,-1;tr.getChannel&&kt[Vr](tr)}),!Ut&&kt[pt]>0&&dt(kt,function(tr){if(Ut=tr.getChannel(Ne),!Ut)return-1}),Ut&&(ut={plugin:Ut,setEnabled:function(tr){On(Ut)[Tc]=!tr},isEnabled:function(){var tr=On(Ut);return!tr[xi]&&!tr[Tc]},remove:function(tr,jr){var kn;tr===void 0&&(tr=!0);var wi=[Ut],Ma=(kn={reason:1},kn[Qa]=tr,kn);Sa(wi,Ma,function(oo){oo&&ci({reason:32,removed:wi}),jr&&jr(oo)})}}),ut}function Jd(){if(!Y){var Ne=(yr||[]).slice();Ri(Ne,re)===-1&&Ne[Vr](re),Y=wn(Ud(Ne),l.cfg,we)}return Y}function Sa(Ne,ut,Ut){if(Ne&&Ne[pt]>0){var kt=wn(Ne,l.cfg,we),tr=Xr(kt,we);tr[Xs](function(){var jr=!1,kn=[];dt(V,function(Ma,oo){ig(Ma,Ne)?jr=!0:kn[Vr](Ma)}),V=kn,Xo=null,Hi=null;var wi=[];Q&&(dt(Q,function(Ma,oo){var Hf=[];dt(Ma,function(Ih){ig(Ih,Ne)?jr=!0:Hf[Vr](Ih)}),wi[Vr](Hf)}),Q=wi),Ut&&Ut(jr),Vi()}),tr[Qn](ut)}else Ut(!1)}function rv(){if(w&&w.queue){var Ne=w.queue.slice(0);w.queue[pt]=0,dt(Ne,function(ut){var Ut,kt=(Ut={},Ut[jo]=he||"InternalMessageId: "+ut[ku],Ut[pc]=br,Ut[Yo]=Ss(new Date),Ut.baseType=xl.dataType,Ut.baseData={message:ut[Qs]},Ut);we.track(kt)})}}function qf(Ne,ut,Ut,kt){var tr=1,jr=!1,kn=null;kt=kt||5e3;function wi(){tr--,jr&&tr===0&&(kn&&kn[Fo](),kn=null,ut&&ut(jr),ut=null)}if(Z&&Z[pt]>0){var Ma=ta()[Pu](Z);Ma.iterate(function(oo){if(oo.flush){tr++;var Hf=!1;oo.flush(Ne,function(){Hf=!0,wi()},Ut)||Hf||(Ne&&kn==null?kn=ac(function(){kn=null,wi()},kt):wi())}})}return jr=!0,wi(),!0}function nv(){var Ne;es(l[Za](function(ut){var Ut=ut.cfg.enablePerfMgr;if(Ut){var kt=ut.cfg[ws];(Ne!==kt||!Ne)&&(kt||(kt=Gg),yf(ut.cfg,ws,kt),Ne=kt,O=null),!L&&!O&&or(kt)&&(O=kt(we,we[Js]()))}else O=null,Ne=null}))}function iv(Ne){var ut=vn(Jd(),we);ut[Xs](Vi),(!we._updateHook||we._updateHook(ut,Ne)!==!0)&&ut[Qn](Ne)}function em(Ne){var ut=we[Jr];ut?(en(ut,2,73,Ne),Vi()):Fi(Ne)}function li(Ne){var ut=we[Js]();ut&&ut[gf]([Ne],2)}function es(Ne){Qe.add(Ne)}})}return o.__ieDyn=1,o}();function Fr(o,l){try{if(o&&o!==""){var v=ki().parse(o);if(v&&v[ym]&&v[ym]>=v.itemsAccepted&&v.itemsReceived-v.itemsAccepted===v.errors[pt])return v}}catch(w){en(l,1,43,"Cannot parse the response. "+(w[jo]||zt(w)),{response:o})}return null}var du="",qd="NoResponseBody",Zv="&"+qd+"=true",Xv="POST",qm=function(){function o(){var l=0,v,w,T,x,L,O,M,Y,V,Q,Z,ie,re,he;Ka(o,this,function(be,je){var Qe=!0;Bf(),be[Vn]=function(Ve,Pt){T=Pt,w&&en(T,1,28,"Sender is already initialized"),be.SetConfig(Ve),w=!0},be._getDbgPlgTargets=function(){return[w,x,O,v]},be.SetConfig=function(Ve){try{if(L=Ve.senderOnCompleteCallBack||{},O=!!Ve.disableCredentials,M=Ve.fetchCredentials,x=!!Ve.isOneDs,v=!!Ve.enableSendPromise,V=!!Ve.disableXhr,Q=!!Ve.disableBeacon,Z=!!Ve.disableBeaconSync,he=Ve.timeWrapper,re=!!Ve.addNoResponse,ie=!!Ve.disableFetchKeepAlive,Y={sendPOST:Qo},x||(Qe=!1),O){var Pt=ou();Pt&&Pt.protocol&&Pt.protocol[pa]()==="file:"&&(Qe=!1)}return!0}catch{}return!1},be.getSyncFetchPayload=function(){return l},be.getSenderInst=function(Ve,Pt){return Ve&&Ve[pt]?yi(Ve,Pt):null},be.getFallbackInst=function(){return Y},be[_n]=function(Ve,Pt){Bf()};function rt(Ve,Pt){yr(Pt,200,{},Ve)}function Yt(Ve,Pt){en(T,2,26,"Failed to send telemetry.",{message:Ve}),yr(Pt,400,{})}function br(Ve){Yt("No endpoint url is provided for the batch",Ve)}function yi(Ve,Pt){for(var Yn,we=0,ar=null,$n=0;ar==null&&$n<Ve[pt];)we=Ve[$n],!V&&we===1?bl()?ar=wa:If()&&(ar=Qo):we===2&&Tm(Pt)&&(!Pt||!ie)?ar=Bc:we===3&&Ov()&&(Pt?!Z:!Q)&&(ar=Xo),$n++;return ar?(Yn={_transport:we,_isSync:Pt},Yn[_c]=ar,Yn):null}function yr(Ve,Pt,Yn,we){try{Ve&&Ve(Pt,Yn,we)}catch{}}function Hi(Ve,Pt){var Yn=Ra(),we=Ve[gc];if(!we)return br(Pt),!0;we=Ve[gc]+(re?Zv:du);var ar=Ve[df],$n=x?ar:new Blob([ar],{type:"text/plain;charset=UTF-8"}),Vi=Yn.sendBeacon(we,$n);return Vi}function Xo(Ve,Pt,Yn){var we=Ve[df];try{if(we)if(Hi(Ve,Pt))rt(du,Pt);else{var ar=L&&L.beaconOnRetry;ar&&or(ar)?ar(Ve,Pt,Hi):(Y&&Y[_c](Ve,Pt,!0),en(T,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch($n){x&&As(T,"Failed to send telemetry using sendBeacon API. Ex:"+zt($n)),yr(Pt,x?0:400,{},du)}}function Qo(Ve,Pt,Yn){var we,ar,$n,Vi=Ve[ys]||{};!Yn&&v&&(we=ha(function(ci,ra){ar=ci,$n=ra})),x&&Yn&&Ve.disableXhrSync&&(Yn=!1);var ao=Ve[gc];if(!ao){br(Pt),ar&&ar(!1);return}var Mr=kp(Xv,ao,Qe,!0,Yn,Ve[pf]);x||Mr[ph]("Content-type","application/json"),dt(Ki(Vi),function(ci){Mr[ph](ci,Vi[ci])}),Mr.onreadystatechange=function(){x||(ta(Mr),Mr.readyState===4&&ar&&ar(!0))},Mr.onload=function(){x&&ta(Mr)};function ta(ci){var ra=L&&L.xhrOnComplete,Jd=ra&&or(ra);if(Jd)ra(ci,Pt,Ve);else{var Sa=au(ci);yr(Pt,ci[_s],qo(ci,x),Sa)}}return Mr.onerror=function(ci){yr(Pt,x?Mr[_s]:400,qo(Mr,x),x?du:yl(Mr)),$n&&$n(ci)},Mr.ontimeout=function(){yr(Pt,x?Mr[_s]:500,qo(Mr,x),x?du:yl(Mr)),ar&&ar(!1)},Mr.send(Ve[df]),we}function Bc(Ve,Pt,Yn){var we,ar=Ve[gc],$n=Ve[df],Vi=x?$n:new Blob([$n],{type:"application/json"}),ao,Mr,ta,ci=new Headers,ra=$n[pt],Jd=!1,Sa=!1,rv=Ve[ys]||{},qf=(we={method:Xv,body:Vi},we[ga]=!0,we);Ve.headers&&Ki(Ve.headers)[pt]>0&&(dt(Ki(rv),function(li){ci.append(li,rv[li])}),qf[ys]=ci),M?qf.credentials=M:Qe&&x&&(qf.credentials="include"),Yn&&(qf.keepalive=!0,l+=ra,x?Ve._sendReason===2&&(Jd=!0,re&&(ar+=Zv)):Jd=!0);var nv=new Request(ar,qf);try{nv[ga]=!0}catch{}if(!Yn&&v&&(ao=ha(function(li,es){Mr=li,ta=es})),!ar){br(Pt),Mr&&Mr(!1);return}function iv(li){yr(Pt,x?0:400,{},x?du:li)}function em(li,es,Ne){var ut=li[_s],Ut=L.fetchOnComplete;Ut&&or(Ut)?Ut(li,Pt,Ne||du,es):yr(Pt,ut,{},Ne||du)}try{mf(fetch(x?ar:nv,x?qf:null),function(li){if(Yn&&(l-=ra,ra=0),!Sa)if(Sa=!0,li.rejected)iv(li.reason&&li.reason[Qs]),ta&&ta(li.reason);else{var es=li[fd];try{!x&&!es.ok?(iv(es.statusText),Mr&&Mr(!1)):x&&!es.body?(em(es,null,du),Mr&&Mr(!0)):mf(es.text(),function(Ne){em(es,Ve,Ne[fd]),Mr&&Mr(!0)})}catch(Ne){iv(zt(Ne)),ta&&ta(Ne)}}})}catch(li){Sa||(iv(zt(li)),ta&&ta(li))}return Jd&&!Sa&&(Sa=!0,yr(Pt,200,{}),Mr&&Mr(!0)),x&&!Sa&&Ve[pf]>0&&he&&he.set(function(){Sa||(Sa=!0,yr(Pt,500,{}),Mr&&Mr(!0))},Ve[pf]),ao}function wa(Ve,Pt,Yn){var we=si(),ar=new XDomainRequest,$n=Ve[df];ar.onload=function(){var ci=au(ar),ra=L&&L.xdrOnComplete;ra&&or(ra)?ra(ar,Pt,Ve):yr(Pt,200,{},ci)},ar.onerror=function(){yr(Pt,400,{},x?du:wf(ar))},ar.ontimeout=function(){yr(Pt,500,{})},ar.onprogress=function(){};var Vi=we&&we.location&&we.location[hs]||"",ao=Ve[gc];if(!ao){br(Pt);return}if(!x&&ao.lastIndexOf(Vi,0)!==0){var Mr="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";en(T,2,40,". "+Mr),Yt(Mr,Pt);return}var ta=x?ao:ao[Yi](/^(https?:)/,"");ar.open(Xv,ta),Ve[pf]&&(ar[pf]=Ve[pf]),ar.send($n),x&&Yn?he&&he.set(function(){ar.send($n)},0):ar.send($n)}function Bf(){l=0,w=!1,v=!1,T=null,x=null,L=null,O=null,M=null,Y=null,V=!1,Q=!1,Z=!1,ie=!1,re=!1,he=null}})}return o.__ieDyn=1,o}(),Lf="on",Zp="attachEvent",zg="addEventListener",Xp="detachEvent",Ul="removeEventListener",jl="events",Yl="visibilitychange",Uc="pagehide",jc="pageshow",Ku="unload",Mf="beforeunload",pu=su("aiEvtPageHide"),Ff=su("aiEvtPageShow"),Hd=/\.[\.]+/g,sg=/[\.]+$/,Sh=1,Uf=$u("events"),jf=/^([^.]*)(?:\.(.+)|)/;function Vd(o){return o&&o[Yi]?o[Yi](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,gr):o}function Qp(o,l){var v;if(l){var w=gr;fr(l)?(w=gr,dt(l,function(x){x=Vd(x),x&&(x[0]!=="."&&(x="."+x),w+=x)})):w=Vd(l),w&&(w[0]!=="."&&(w="."+w),o=(o||gr)+w)}var T=jf.exec(o||gr)||[];return v={},v[va]=T[1],v.ns=(T[2]||gr).replace(Hd,".").replace(sg,gr)[La](".").sort().join("."),v}function bh(o,l,v){var w=[],T=Uf.get(o,jl,{},!1),x=Qp(l,v);return Lr(T,function(L,O){dt(O,function(M){var Y;(!x[va]||x[va]===M.evtName[va])&&(!x.ns||x.ns===x.ns)&&w[Vr]((Y={},Y[jo]=M.evtName[va]+(M.evtName.ns?"."+M.evtName.ns:gr),Y.handler=M[gs],Y))})}),w}function Qv(o,l,v){v===void 0&&(v=!0);var w=Uf.get(o,jl,{},v),T=w[l];return T||(T=w[l]=[]),T}function Hm(o,l,v,w){o&&l&&l[va]&&(o[Ul]?o[Ul](l[va],v,w):o[Xp]&&o[Xp](Lf+l[va],v))}function ug(o,l,v,w){var T=!1;return o&&l&&l[va]&&v&&(o[zg]?(o[zg](l[va],v,w),T=!0):o[Zp]&&(o[Zp](Lf+l[va],v),T=!0)),T}function cg(o,l,v,w){for(var T=l[pt];T--;){var x=l[T];x&&(!v.ns||v.ns===x.evtName.ns)&&(!w||w(x))&&(Hm(o,x.evtName,x[gs],x.capture),l[Mo](T,1))}}function lg(o,l,v){if(l[va])cg(o,Qv(o,l[va]),l,v);else{var w=Uf.get(o,jl,{});Lr(w,function(T,x){cg(o,x,l,v)}),Ki(w)[pt]===0&&Uf.kill(o,jl)}}function Gn(o,l){var v;return l?(fr(l)?v=[o].concat(l):v=[o,l],v=Qp("xx",v).ns[La](".")):v=o,v}function Gd(o,l,v,w,T){var x;T===void 0&&(T=!1);var L=!1;if(o)try{var O=Qp(l,w);if(L=ug(o,O,v,T),L&&Uf.accept(o)){var M=(x={guid:Sh++,evtName:O},x[gs]=v,x.capture=T,x);Qv(o,O.type)[Vr](M)}}catch{}return L}function ei(o,l,v,w,T){if(T===void 0&&(T=!1),o)try{var x=Qp(l,w),L=!1;lg(o,x,function(O){return x.ns&&!v||O[gs]===v?(L=!0,!0):!1}),L||Hm(o,x,v,T)}catch{}}function M_(o,l,v,w){return w===void 0&&(w=!1),Gd(o,l,v,null,w)}function ev(o,l,v,w){w===void 0&&(w=!1),ei(o,l,v,null,w)}function zd(o,l,v){var w=!1,T=si();T&&(w=Gd(T,o,l,v),w=Gd(T.body,o,l,v)||w);var x=la();return x&&(w=Gd(x,o,l,v)||w),w}function p(o,l,v){var w=si();w&&(ei(w,o,l,v),ei(w.body,o,l,v));var T=la();T&&ei(T,o,l,v)}function y(o,l,v,w){var T=!1;return l&&o&&o[pt]>0&&dt(o,function(x){x&&(!v||Ri(v,x)===-1)&&(T=zd(x,l,w)||T)}),T}function I(o,l,v,w){var T=!1;return l&&o&&fr(o)&&(T=y(o,l,v,w),!T&&v&&v[pt]>0&&(T=y(o,l,null,w))),T}function R(o,l,v){o&&fr(o)&&dt(o,function(w){w&&p(w,l,v)})}function k(o,l,v){return I([Mf,Ku,Uc],o,l,v)}function B(o,l){R([Mf,Ku,Uc],o,l)}function q(o,l,v){function w(L){var O=la();o&&O&&O.visibilityState==="hidden"&&o(L)}var T=Gn(pu,v),x=y([Uc],o,l,T);return(!l||Ri(l,Yl)===-1)&&(x=y([Yl],w,l,T)||x),!x&&l&&(x=q(o,null,v)),x}function ee(o,l){var v=Gn(pu,l);R([Uc],o,v),R([Yl],null,v)}function se(o,l,v){function w(L){var O=la();o&&O&&O.visibilityState==="visible"&&o(L)}var T=Gn(Ff,v),x=y([jc],o,l,T);return x=y([Yl],w,l,T)||x,!x&&l&&(x=se(o,null,v)),x}function ce(o,l){var v=Gn(Ff,l);R([jc],o,v),R([Yl],null,v)}var Oe=Ja({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3}),ze="",We="https://browser.events.data.microsoft.com/OneCollector/1.0/",Ce="version",_e="properties",Be="initialize",Ie="logger",Xe="indexOf",Ae="timings",Re="pollInternalLogs",He="value",Vt="kind",Kt="length",pr="processTelemetryStart",Ar="handleField",sn="rmSanitizer",tn="rmFieldSanitizer",zn="canHandle",Gr,qi="4.3.5",nt="1DS-Web-JS-"+qi,ht=c.hasOwnProperty,Nr="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",_r="withCredentials",Rt="timeout",Ur=(Gr={},Gr[0]=0,Gr[2]=6,Gr[1]=1,Gr[3]=7,Gr[4098]=6,Gr[4097]=1,Gr[4099]=7,Gr),Et=null,Sn=Zl(),gt=up();function An(o){return!(o===ze||at(o))}function Pn(o){if(o){var l=vo(o,"-");if(l>-1)return Kr(o,l)}return ze}function _a(){return Et===null&&(Et=!st(Uint8Array)&&!ya()&&!Sl()),Et}function Ju(o){return!!(o&&Pr(o)&&o>=1&&o<=4)}function Ms(o,l,v){if(!l&&!An(l)||typeof o!="string")return null;var w=typeof l;if(w==="string"||w==="number"||w==="boolean"||fr(l))l={value:l};else if(w==="object"&&!ht.call(l,"value"))l={value:v?JSON.stringify(l):l};else if(at(l[He])||l[He]===ze||!Gt(l[He])&&!Pr(l[He])&&!Un(l[He])&&!fr(l[He]))return null;if(fr(l[He])&&!$c(l[He]))return null;if(!at(l[Vt])){if(fr(l[He])||!Dn(l[Vt]))return null;l[He]=l[He].toString()}return l}function tv(o,l,v){var w=-1;if(!st(o))if(l>0&&(l===32?w=8192:l<=13&&(w=l<<5)),ti(v))w===-1&&(w=0),w|=v;else{var T=Ur[Fs(o)]||-1;w!==-1&&T!==-1?w|=T:T===6&&(w=T)}return w}function vu(o,l,v){v===void 0&&(v=!0);var w;return o&&(w=o.get(l),v&&w&&decodeURIComponent&&(w=decodeURIComponent(w))),w||ze}function Zo(o){o===void 0&&(o="D");var l=S();return o==="B"?l="{"+l+"}":o==="P"?l="("+l+")":o==="N"&&(l=l.replace(/-/g,ze)),l}function Yc(o,l,v,w,T){var x={},L=!1,O=0,M=arguments[Kt],Y=arguments;for(Un(Y[0])&&(L=Y[0],O++);O<M;O++){var o=Y[O];Lr(o,function(Q,Z){L&&Z&&Ii(Z)?fr(Z)?(x[Q]=x[Q]||[],dt(Z,function(ie,re){ie&&Ii(ie)?x[Q][re]=Yc(!0,x[Q][re],ie):x[Q][re]=ie})):x[Q]=Yc(!0,x[Q],Z):x[Q]=Z})}return x}var _i=af;function Dn(o){return o===0||o>0&&o<=13||o===32}function ti(o){return o>=0&&o<=9}function ya(){var o=Ra();if(!st(o)&&o.userAgent){var l=o.userAgent.toLowerCase();if((l[Xe]("safari")>=0||l[Xe]("firefox")>=0)&&l[Xe]("chrome")<0)return!0}return!1}function $c(o){return o[Kt]>0}function Wd(o,l){var v=o;v[Ae]=v[Ae]||{},v[Ae][pr]=v[Ae][pr]||{},v[Ae][pr][l]=_i()}function Fs(o){var l=0;if(o!=null){var v=typeof o;v==="string"?l=1:v==="number"?l=2:v==="boolean"?l=3:v===r&&(l=4,fr(o)?(l=4096,o[Kt]>0&&(l|=Fs(o[0]))):ht.call(o,"value")&&(l=8192|Fs(o[He])))}return l}function Yf(){return!!pn("chrome")}function $f(o,l,v,w,T,x){w===void 0&&(w=!1),T===void 0&&(T=!1);function L(M,Y,V){try{M[Y]=V}catch{}}var O=new XMLHttpRequest;return w&&L(O,Nr,w),v&&L(O,_r,v),O.open(o,l,!T),v&&L(O,_r,v),!T&&x&&L(O,Rt,x),O}function Kd(o){return o>0}var Eh=Ia({endpointUrl:We,propertyStorageOverride:{isVal:Vm}});function Vm(o){return o&&(!o.getProperty||!o.setProperty)&&Fi("Invalid property storage override passed."),!0}var Gm=function(o){oc(l,o);function l(){var v=o.call(this)||this;return Ka(l,v,function(w,T){w[Be]=function(x,L,O,M){d(w,function(){return"AppInsightsCore.initialize"},function(){try{T[Be](Bi(x,Eh,O||w[Ie],!1).cfg,L,O,M)}catch(Q){var Y=w[Ie],V=zt(Q);V[Xe]("channels")!==-1&&(V+=`
 - Channels must be provided through config.channels only!`),en(Y,1,514,"SDK Initialization Failed - no telemetry will be sent: "+V)}},function(){return{config:x,extensions:L,logger:O,notificationManager:M}})},w.track=function(x){d(w,function(){return"AppInsightsCore.track"},function(){var L=x;if(L){L[Ae]=L[Ae]||{},L[Ae].trackStart=_i(),Ju(L.latency)||(L.latency=1);var O=L.ext=L.ext||{};O.sdk=O.sdk||{},O.sdk.ver=nt;var M=L.baseData=L.baseData||{};M[_e]=M[_e]||{};var Y=M[_e];Y[Ce]=Y[Ce]||w.pluginVersionString||ze}T.track(L)},function(){return{item:x}},!x.sync)},w[Re]=function(x){return T[Re](x||"InternalLog")}}),v}return l.__ieDyn=1,l}(Bm),Th=Ja({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),zm=Ja({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),Wm=Ja({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),Km=Ja({Normal:1,Critical:2}),mu=Ja({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),Jm=function(){function o(l){var v=this,w={},T=[],x=[];l&&x.push(l);function L(V,Q){var Z,ie=w[V];if(ie&&(Z=ie[Q]),!Z&&Z!==null){if(Gt(V)&&Gt(Q))if(x[Kt]>0){for(var re=0;re<x[Kt];re++)if(x[re][Ar](V,Q)){Z={canHandle:!0,fieldHandler:x[re]};break}}else T[Kt]===0&&(Z={canHandle:!0});if(!Z&&Z!==null){Z=null;for(var re=0;re<T[Kt];re++)if(T[re][Ar](V,Q)){Z={canHandle:!0,handler:T[re],fieldHandler:null};break}}ie||(ie=w[V]={}),ie[Q]=Z}return Z}v.clearCache=function(){w={}},v.addSanitizer=function(V){V&&(fp(T,V)||T.push(V),w={})},v.addFieldSanitizer=function(V){V&&(fp(x,V)||x.push(V),w={})},v[sn]=function(V){if(V){var Q=Ri(T,V);Q!==-1&&(T.splice(Q,1),w={}),dt(T,function(Z){Z&&Z[sn]&&Z[sn](V)})}},v[tn]=function(V){if(V){var Q=Ri(x,V);Q!==-1&&(x.splice(Q,1),w={}),dt(T,function(Z){Z&&Z[tn]&&Z[tn](V)})}},v.isEmpty=function(){return Gs(T)+Gs(x)===0},v[Ar]=function(V,Q){var Z=L(V,Q);return Z?Z[zn]:!1},v[He]=function(V,Q,Z,ie){var re=L(V,Q);if(re&&re[zn]){if(!re||!re[zn])return null;if(re.handler)return re.handler[He](V,Q,Z,ie);if(!Gt(Q)||at(Z)||Z===ze)return null;var he=null,be=Fs(Z);if((be&8192)===8192){var je=be&-8193;if(he=Z,!An(he[He])||je!==1&&je!==2&&je!==3&&(je&4096)!==4096)return null}else be===1||be===2||be===3||(be&4096)===4096?he=M(V,Q,Z):be===4&&(he=M(V,Q,ie?JSON.stringify(Z):Z));if(he)return O(re,V,Q,be,he,ie)}return null},v.property=function(V,Q,Z,ie){var re=L(V,Q);if(!re||!re[zn]||!Gt(Q)||at(Z)||!An(Z[He]))return null;var he=Fs(Z[He]);return he===0?null:O(re,V,Q,he,Z,ie)};function O(V,Q,Z,ie,re,he){if(V.handler)return V.handler.property(Q,Z,re,he);if(!at(re[Vt])){if((ie&4096)===4096||!Dn(re[Vt]))return null;re[He]=re[He].toString()}return Y(V.fieldHandler,Q,Z,ie,re)}function M(V,Q,Z){return An(Z)?{value:Z}:null}function Y(V,Q,Z,ie,re){if(re&&V){var he=V.getSanitizer(Q,Z,ie,re[Vt],re.propertyType);if(he)if(ie===4){var be={},je=re[He];Lr(je,function(rt,Yt){var br=Q+"."+Z;if(An(Yt)){var yi=M(br,rt,Yt);yi=Y(V,br,rt,Fs(Yt),yi),yi&&(be[rt]=yi[He])}}),re[He]=be}else{var Qe={path:Q,name:Z,type:ie,prop:re,sanitizer:v};re=he.call(v,Qe)}}return re}}return o.getFieldType=Fs,o}();t.ActiveStatus=gn,t.AppInsightsCore=Gm,t.BaseTelemetryPlugin=rg,t.DiagnosticLogger=Lc,t.EventLatency=zm,t.EventPersistence=Km,t.EventPropertyType=Wm,t.EventsDiscardedReason=Ou,t.FullVersionString=nt,t.InternalAppInsightsCore=Bm,t.LoggingSeverity=Oe,t.MinChannelPriorty=cd,t.NotificationManager=Ml,t.PerfEvent=Gu,t.PerfManager=Vv,t.ProcessTelemetryContext=zu,t.SenderPostManager=qm,t.TraceLevel=mu,t.Undefined=n,t.ValueKind=Th,t.ValueSanitizer=Jm,t.Version=qi,t._InternalLogMessage=xl,t.__getRegisteredEvents=bh,t._appendHeader=Nc,t._getAllResponseHeaders=qo,t._logInternalMessage=Fv,t._testHookMaxUnloadHooksCb=jm,t._throwInternal=en,t._warnToConsole=As,t.addEventHandler=zd,t.addEventListeners=I,t.addPageHideEventListener=q,t.addPageShowEventListener=se,t.addPageUnloadEventListener=k,t.areCookiesSupported=jn,t.arrForEach=dt,t.arrIndexOf=Ri,t.arrMap=Eu,t.arrReduce=In,t.attachEvent=M_,t.blockDynamicConversion=$p,t.convertAllHeadersToMap=Mu,t.cookieAvailable=jn,t.createCookieMgr=ks,t.createDynamicConfig=Bi,t.createEnumStyle=Ja,t.createGuid=Zo,t.createProcessTelemetryContext=Ht,t.createTraceParent=cr,t.createUniqueNamespace=su,t.createUnloadHandlerContainer=Ls,t.dateNow=Tu,t.detachEvent=ev,t.disallowsSameSiteNone=no,t.doPerf=d,t.dumpObj=zt,t.eventOff=ei,t.eventOn=Gd,t.extend=Yc,t.findW3cTraceParent=xn,t.forceDynamicConversion=Wo,t.formatErrorMessageXdr=wf,t.formatErrorMessageXhr=yl,t.formatTraceParent=At,t.generateW3CId=D,t.getCommonSchemaMetaData=tv,t.getConsole=Tf,t.getCookieValue=vu,t.getCrypto=Fu,t.getDocument=la,t.getDynamicConfigHandler=Yp,t.getExceptionName=bs,t.getFieldValueType=Fs,t.getGlobal=ed,t.getGlobalInst=pn,t.getHistory=fo,t.getIEVersion=Em,t.getISOString=Ss,t.getJSON=ki,t.getLocation=ou,t.getMsCrypto=Id,t.getNavigator=Ra,t.getPerformance=za,t.getResponseText=au,t.getSetValue=yf,t.getTenantId=Pn,t.getTime=_i,t.getWindow=si,t.hasDocument=Zl,t.hasHistory=Xl,t.hasJSON=Ds,t.hasNavigator=yv,t.hasOwnProperty=zr,t.hasWindow=up,t.isArray=fr,t.isArrayValid=$c,t.isBeaconsSupported=Ov,t.isBoolean=Un,t.isChromium=Yf,t.isDate=Ni,t.isDocumentObjectAvailable=Sn,t.isError=Ct,t.isFetchSupported=Tm,t.isFunction=or,t.isGreaterThanZero=Kd,t.isIE=Uu,t.isLatency=Ju,t.isNotTruthy=Je,t.isNullOrUndefined=at,t.isNumber=Pr,t.isObject=Ii,t.isReactNative=Sl,t.isSampledFlag=Or,t.isString=Gt,t.isTruthy=Cn,t.isTypeof=dn,t.isUint8ArrayAvailable=_a,t.isUndefined=st,t.isValidSpanId=jt,t.isValidTraceId=ir,t.isValidTraceParent=xr,t.isValueAssigned=An,t.isValueKind=Dn,t.isWindowObjectAvailable=gt,t.isXhrSupported=If,t.mergeEvtNamespace=Gn,t.newGuid=S,t.newId=Nm,t.normalizeJsName=iu,t.objDefineAccessors=Jf,t.objForEachKey=Lr,t.objFreeze=Di,t.objKeys=Ki,t.objSeal=as,t.onConfigChange=xd,t.openXhr=$f,t.optimizeObject=Sd,t.parseResponse=Fr,t.parseTraceParent=lt,t.perfNow=af,t.prependTransports=Sf,t.proxyAssign=Es,t.proxyFunctionAs=Eo,t.proxyFunctions=_l,t.random32=Tl,t.randomValue=Im,t.removeEventHandler=p,t.removeEventListeners=R,t.removePageHideEventListener=ee,t.removePageShowEventListener=ce,t.removePageUnloadEventListener=B,t.safeGetCookieMgr=Jo,t.safeGetLogger=kc,t.sanitizeProperty=Ms,t.setEnableEnvMocks=ea,t.setProcessTelemetryTimings=Wd,t.setValue=to,t.strContains=vt,t.strEndsWith=id,t.strFunction=e,t.strObject=r,t.strPrototype=i,t.strStartsWith=gm,t.strTrim=Zi,t.strUndefined=n,t.throwError=Fi,t.toISOString=Ss,t.useXDomainRequest=bl})});var KT=an((R0,WT)=>{(function(t,e){typeof R0=="object"&&typeof WT<"u"?e(R0):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.oneDS=t.oneDS||{}))})(R0,function(t){"use strict";var e="REAL_TIME",r="NEAR_REAL_TIME",n="BEST_EFFORT",i="function",a="object",c="undefined",g="prototype",_=Object,b=_[g];function C(p,y){return p||y}function j(p,y){return p[y]}var K=void 0,te=null,z="",G="function",ne="object",le="prototype",Te="__proto__",Me="undefined",Se="constructor",ke="Symbol",et="_polyfill",ot="length",Dt="name",qt="call",lr="toString",ln=C(Object),Ti=j(ln,le),pi=C(String),Tt=j(pi,le),fn=C(Math),it=C(Array),lo=j(it,le),Le=j(lo,"slice");function Ir(p,y){try{return{v:p.apply(this,y)}}catch(I){return{e:I}}}function Cr(p){return function(y){return typeof y===p}}function _t(p){return typeof p===Me||p===Me}function dn(p){return!at(p)}function st(p){return p===te||_t(p)}function Jn(p){return p===te||!at(p)}function at(p){return!!p||p!==K}var yu=Cr("string"),Wt=Cr(G);function Ya(p){return!p&&st(p)?!1:!!p&&typeof p===ne}var Gt=j(it,"isArray"),or=Cr("number"),Ii=Cr("boolean");function fr(p){return!!(p&&p.then&&Wt(p.then))}var Ni=j(ln,"getOwnPropertyDescriptor");function Pr(p,y){return!!p&&Ti.hasOwnProperty[qt](p,y)}var Un=C(j(ln,"hasOwn"),Ct);function Ct(p,y){return Pr(p,y)||!!Ni(p,y)}function kr(p,y,I){if(p&&Ya(p)){for(var R in p)if(Un(p,R)&&y[qt](I||p,R,p[R])===-1)break}}var Je={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Cn(p){var y={};if(y[Je.c]=!0,y[Je.e]=!0,p.l){y.get=function(){return p.l.v};var I=Ni(p.l,"v");I&&I.set&&(y.set=function(R){p.l.v=R})}return kr(p,function(R,k){y[Je[R]]=dn(k)?y[Je[R]]:k}),y}var $r=j(ln,"defineProperty");function zr(p,y,I){return $r(p,y,Cn(I))}function Ea(p,y,I,R,k){var B={};return kr(p,function(q,ee){Mi(B,q,y?ee:q,k),Mi(B,ee,I?ee:q,k)}),R?R(B):B}function Mi(p,y,I,R){$r(p,y,{value:I,enumerable:!0,writable:!!R})}var Lr=C(pi),er="[object Error]";function hr(p,y){var I=z,R=Ti[lr][qt](p);R===er&&(p={stack:Lr(p.stack),message:Lr(p.message),name:Lr(p.name)});try{I=JSON.stringify(p,te,y?typeof y=="number"?y:4:K),I=(I?I.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):te)||Lr(p)}catch(k){I=" - "+hr(k,y)}return R+": "+I}function rn(p){throw new TypeError(p)}var Jf=j(ln,"freeze");function Zn(p){return p}function Zf(p){return p[Te]||te}var wu=j(ln,"assign"),En=j(ln,"keys");function ns(p){return Jf&&kr(p,function(y,I){(Gt(I)||Ya(I))&&ns(I)}),zt(p)}var zt=C(Jf,Zn),Fi=C(j(ln,"getPrototypeOf"),Zf);function $a(p){return Ea(p,1,0,zt)}function is(p){return Ea(p,0,0,zt)}var Ta=is({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Xf="__tsUtils$gblCfg",ec;function Ki(){var p;return typeof globalThis!==Me&&(p=globalThis),!p&&typeof self!==Me&&(p=self),!p&&typeof window!==Me&&(p=window),!p&&typeof global!==Me&&(p=global),p}function Ia(){if(!ec){var p=Ir(Ki).v||{};ec=p[Xf]=p[Xf]||{}}return ec}var Di=as;function as(p,y,I){var R=y?y[p]:te;return function(k){var B=(k?k[p]:te)||R;if(B||I){var q=arguments;return(B||I).apply(k,B?Le[qt](q,1):q)}rn('"'+Lr(p)+'" not defined for '+hr(k))}}var Bs=j(fn,"max"),ii=Di("slice",Tt),tc=Di("substring",Tt),qs=as("substr",Tt,Na);function Na(p,y,I){return st(p)&&rn("Invalid "+hr(p)),I<0?z:(y=y||0,y<0&&(y=Bs(y+p[ot],0)),_t(I)?ii(p,y):ii(p,y,y+I))}function Xn(p,y){return tc(p,0,y)}var Zc="_urid",Hs;function ai(){if(!Hs){var p=Ia();Hs=p.gblSym=p.gblSym||{k:{},s:{}}}return Hs}var sa;function dr(p){var y={description:Lr(p),toString:function(){return ke+"("+p+")"}};return y[et]=!0,y}function Tn(p){var y=ai();if(!Un(y.k,p)){var I=dr(p),R=En(y.s).length;I[Zc]=function(){return R+"_"+I[lr]()},y.k[p]=I,y.s[I[Zc]()]=Lr(p)}return y.k[p]}function Da(p){!sa&&(sa={});var y,I=Ta[p];return I&&(y=sa[I]=sa[I]||dr(ke+"."+I)),y}var Wr;function vi(){Wr=Ia()}function Ba(p){return $r({toJSON:function(){return p}},"v",{value:p})}var Kr="window",ua;function Su(p,y){var I;return function(){return!Wr&&vi(),(!I||Wr.lzy)&&(I=Ba(Ir(p,y).v)),I.v}}function ca(p){return!Wr&&vi(),(!ua||p===!1||Wr.lzy)&&(ua=Ba(Ir(Ki).v||te)),ua.v}function hn(p,y){var I;if(!ua||y===!1?I=ca(y):I=ua.v,I&&I[p])return I[p];if(p===Kr)try{return window}catch{}return te}var oi=Su(hn,["document"]);function rc(){return!!Ca()}var Ca=Su(hn,[Kr]);function Rr(){return!!Ci()}var Ci=Su(hn,["navigator"]),Qf=Su(function(){return!!Ir(function(){return process&&(process.versions||{}).node}).v}),Ui,os;function Xc(){return Ui=Ba(Ir(hn,[ke]).v),Ui}function ss(p){var y=(Wr.lzy?0:Ui)||Xc();return y.v?y.v[p]:K}function ed(){return!!pn()}function pn(){return!Wr&&vi(),((Wr.lzy?0:Ui)||Xc()).v}function Zl(p,y){var I=Ta[p];!Wr&&vi();var R=(Wr.lzy?0:Ui)||Xc();return R.v?R.v[I||p]:y?K:Da(p)}function la(p,y){!Wr&&vi();var I=(Wr.lzy?0:Ui)||Xc();return I.v?I.v(p):y?te:dr(p)}function up(p){return!Wr&&vi(),os=(Wr.lzy?0:os)||Ba(Ir(ss,["for"]).v),(os.v||Tn)(p)}function si(p){return!!p&&Wt(p.next)}function yv(p){return!Jn(p)&&Wt(p[Zl(3)])}var Ra;function Xl(p,y,I){if(p&&(si(p)||(!Ra&&(Ra=Ba(Zl(3))),p=p[Ra.v]?p[Ra.v]():te),si(p))){var R=K,k=K;try{for(var B=0;!(k=p.next()).done&&y[qt](I||p,k.value,B,p)!==-1;)B++}catch(q){R={e:q},p.throw&&(k=te,p.throw(R))}finally{try{k&&!k.done&&p.return&&p.return(k)}finally{if(R)throw R.e}}}}function fo(p,y,I){return p.apply(y,I)}function td(p,y){return!_t(y)&&p&&(Gt(y)?fo(p.push,p,y):si(y)||yv(y)?Xl(y,function(I){p.push(I)}):p.push(y)),p}function Sr(p,y,I){if(p)for(var R=p[ot]>>>0,k=0;k<R&&!(k in p&&y[qt](I||p,p[k],k,p)===-1);k++);}var us=Di("indexOf",lo);function rd(p,y,I){return((p?p.slice:te)||Le).apply(p,Le[qt](arguments,1))}var Ji=C(j(ln,"create"),Qc);function Qc(p){if(!p)return{};var y=typeof p;y!==ne&&y!==G&&rn("Prototype must be an Object or function: "+hr(p));function I(){}return I[le]=p,new I}var Lt;function xa(p,y){var I=ln.setPrototypeOf||function(R,k){var B;!Lt&&(Lt=Ba((B={},B[Te]=[],B instanceof Array))),Lt.v?R[Te]=k:kr(k,function(q,ee){return R[q]=ee})};return I(p,y)}function nc(p,y,I){Ir(zr,[y,Dt,{v:p,c:!0,e:!1}]),y=xa(y,I);function R(){this[Se]=y,Ir(zr,[this,Dt,{v:p,c:!0,e:!1}])}return y[le]=I===te?Ji(I):(R[le]=I[le],new R),y}function Ql(p,y){y&&(p[Dt]=y)}function mm(p,y,I){var R=I||Error,k=R[le][Dt],B=Error.captureStackTrace;return nc(p,function(){var q=this,ee=arguments;try{Ir(Ql,[R,p]);var se=fo(R,q,Le[qt](ee))||q;if(se!==q){var ce=Fi(q);ce!==Fi(se)&&xa(se,ce)}return B&&B(se,q[Se]),y&&y(se,ee),se}finally{Ir(Ql,[R,k])}},R)}function qa(){return(Date.now||ef)()}function ef(){return new Date().getTime()}function cp(p){return function(I){return st(I)&&rn("strTrim called ["+hr(I)+"]"),I&&I.replace&&(I=I.replace(p,z)),I}}var bu=cp(/^\s+|(?=\s)\s+$/g),Ha=as("trim",Tt,bu),dt,Ri,Eu;function Vs(p){if(!p||typeof p!==ne)return!1;Eu||(Eu=rc()?Ca():!0);var y=!1;if(p!==Eu){Ri||(dt=Function[le][lr],Ri=dt[qt](ln));try{var I=Fi(p);y=!I,y||(Pr(I,Se)&&(I=I[Se]),y=!!(I&&typeof I===G&&dt[qt](I)===Ri))}catch{}}return y}function lp(){return qa()}var fp=Di("indexOf",Tt),In=as("startsWith",Tt,Oa);function Oa(p,y,I){yu(p)||rn("'"+hr(p)+"' is not a string");var R=yu(y)?y:Lr(y),k=I>0?I:0;return tc(p,k,k+R[ot])===R}var dp="ref",Va="unref",fa="hasRef",dh="enabled";function hm(p,y,I){var R=!0,k=p?y(te):te,B;function q(){return R=!1,k&&k[Va]&&k[Va](),B}function ee(){k&&I(k),k=te}function se(){return k=y(k),R||q(),B}function ce(Oe){!Oe&&k&&ee(),Oe&&!k&&se()}return B={cancel:ee,refresh:se},B[fa]=function(){return k&&k[fa]?k[fa]():R},B[dp]=function(){return R=!0,k&&k[dp]&&k[dp](),B},B[Va]=q,B=$r(B,dh,{get:function(){return!!k},set:ce}),{h:B,dn:function(){k=te}}}function wv(p,y,I){var R=Gt(y),k=R?y.length:0,B=(k>0?y[0]:R?K:y)||setTimeout,q=(k>1?y[1]:K)||clearTimeout,ee=I[0];I[0]=function(){se.dn(),fo(ee,K,Le[qt](arguments))};var se=hm(p,function(ce){if(ce){if(ce.refresh)return ce.refresh(),ce;fo(q,K,[ce])}return fo(B,K,I)},function(ce){fo(q,K,[ce])});return se.h}function Tu(p,y){return wv(!0,K,Le[qt](arguments))}function Sv(p,y,I){return wv(!0,p,Le[qt](arguments,1))}(ca()||{}).Symbol,(ca()||{}).Reflect;var Qh="hasOwnProperty",pp=function(p,y){return pp=_.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,R){I.__proto__=R}||function(I,R){for(var k in R)R[Qh](k)&&(I[k]=R[k])},pp(p,y)};function Zi(p,y){typeof y!==i&&y!==null&&rn("Class extends value "+String(y)+" is not a constructor or null"),pp(p,y);function I(){this.constructor=p}p[g]=y===null?Ji(y):(I[g]=y[g],new I)}var tf,rf="constructor",po="prototype",Aa="function",Iu="_dynInstFuncs",bv="_isDynProxy",Ga="_dynClass",vp="_dynCls$",Nu="_dynInstChk",el=Nu,nf="_dfOpts",nd="_unknown_",mp="__proto__",Ev="_dyn"+mp,Tv="__dynProto$Gbl",Du="_dynInstProto",hp="useBaseInst",Gs="setInstFuncs",ic=Object,za=ic.getPrototypeOf,af=ic.getOwnPropertyNames,id=ca(),tl=id[Tv]||(id[Tv]={o:(tf={},tf[Gs]=!0,tf[hp]=!0,tf),n:1e3});function vo(p){return p&&(p===ic[po]||p===Array[po])}function gm(p){return vo(p)||p===Function[po]}function cs(p){var y;if(p){if(za)return za(p);var I=p[mp]||p[po]||(p[rf]?p[rf][po]:null);y=p[Ev]||I,Pr(p,Ev)||(delete p[Du],y=p[Ev]=p[Du]||p[Ev],p[Du]=I)}return y}function xo(p,y){var I=[];if(af)I=af(p);else for(var R in p)typeof R=="string"&&Pr(p,R)&&I.push(R);if(I&&I.length>0)for(var k=0;k<I.length;k++)y(I[k])}function mo(p,y,I){return y!==rf&&typeof p[y]===Aa&&(I||Pr(p,y))&&y!==mp&&y!==po}function Cu(p){rn("DynamicProto: "+p)}function ad(p){var y=Ji(null);return xo(p,function(I){!y[I]&&mo(p,I,!1)&&(y[I]=p[I])}),y}function rl(p,y){for(var I=p.length-1;I>=0;I--)if(p[I]===y)return!0;return!1}function nl(p,y,I,R){function k(se,ce,Oe){var ze=ce[Oe];if(ze[bv]&&R){var We=se[Iu]||{};We[el]!==!1&&(ze=(We[ce[Ga]]||{})[Oe]||ze)}return function(){return ze.apply(se,arguments)}}var B=Ji(null);xo(I,function(se){B[se]=k(y,I,se)});for(var q=cs(p),ee=[];q&&!gm(q)&&!rl(ee,q);)xo(q,function(se){!B[se]&&mo(q,se,!za)&&(B[se]=k(y,q,se))}),ee.push(q),q=cs(q);return B}function ac(p,y,I,R){var k=null;if(p&&Pr(I,Ga)){var B=p[Iu]||Ji(null);if(k=(B[I[Ga]]||Ji(null))[y],k||Cu("Missing ["+y+"] "+Aa),!k[Nu]&&B[el]!==!1){for(var q=!Pr(p,y),ee=cs(p),se=[];q&&ee&&!gm(ee)&&!rl(se,ee);){var ce=ee[y];if(ce){q=ce===R;break}se.push(ee),ee=cs(ee)}try{q&&(p[y]=k),k[Nu]=1}catch{B[el]=!1}}}return k}function od(p,y,I){var R=y[p];return R===I&&(R=cs(y)[p]),typeof R!==Aa&&Cu("["+p+"] is not a "+Aa),R}function of(p,y,I,R,k){function B(se,ce){var Oe=function(){var ze=ac(this,ce,se,Oe)||od(ce,se,Oe);return ze.apply(this,arguments)};return Oe[bv]=1,Oe}if(!vo(p)){var q=I[Iu]=I[Iu]||Ji(null);if(!vo(q)){var ee=q[y]=q[y]||Ji(null);q[el]!==!1&&(q[el]=!!k),vo(ee)||xo(I,function(se){mo(I,se,!1)&&I[se]!==R[se]&&(ee[se]=I[se],delete I[se],(!Pr(p,se)||p[se]&&!p[se][bv])&&(p[se]=B(p,se)))})}}}function sd(p,y){if(za){for(var I=[],R=cs(y);R&&!gm(R)&&!rl(I,R);){if(R===p)return!0;I.push(R),R=cs(R)}return!1}return!0}function oc(p,y){return Pr(p,po)?p.name||y||nd:((p||{})[rf]||{}).name||y||nd}function ho(p,y,I,R){Pr(p,po)||Cu("theClass is an invalid class definition.");var k=p[po];sd(k,y)||Cu("["+oc(p)+"] not in hierarchy of ["+oc(y)+"]");var B=null;Pr(k,Ga)?B=k[Ga]:(B=vp+oc(p,"_")+"$"+tl.n,tl.n++,k[Ga]=B);var q=ho[nf],ee=!!q[hp];ee&&R&&R[hp]!==void 0&&(ee=!!R[hp]);var se=ad(y),ce=nl(k,y,se,ee);I(y,ce);var Oe=!!za&&!!q[Gs];Oe&&R&&(Oe=!!R[Gs]),of(k,B,y,se,Oe!==!1)}ho[nf]=tl.o;var il=$a,Oo=il({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),Pa="toLowerCase",ls="blkVal",nn="length",zs="rdOnly",go="notify",al="warnToConsole",ol="throwInternal",fs="setDf",sf="watch",ds="logger",Ru="apply",da="push",gp="splice",sc="hdlr",Xi="cancel",ud="initialize",_p="identifier",uf="isInitialized",cf="value",yp="getPlugin",_m="name",uc="time",Ao="processNext",_o="getProcessTelContext",Nn="unload",lf="loggingLevelConsole",cc="createNew",lc="teardown",wp="messageId",Wa="message",xu="isAsync",Ws="diagLog",sr="_doTeardown",Po="update",ps="getNext",Ka="setNextPlugin",cd="protocol",Ja="userAgent",Ou="split",gn="nodeType",pa="replace",Hr="logInternalMessage",pt="type",fc="handler",ko="status",Ks="getResponseHeader",yo="getAllResponseHeaders",Au="isChildEvt",Za="data",Jr="getCtx",Lo="setCtx",Vr="complete",Mo="urlString",ld="sendPOST",Fo="headers",Vn="timeout",wo="setRequestHeader",vs;function ji(p,y){vs||(vs=mm("AggregationError",function(R,k){k[nn]>1&&(R.errors=k[1])}));var I=p||"One or more errors occurred.";throw Sr(y,function(R,k){I+=`
`.concat(k," > ").concat(hr(R))}),new vs(I,y||[])}var Qi="Promise",sl="rejected";function dc(p,y){return fd(p,function(I){return y?y({status:"fulfilled",rejected:!1,value:I}):I},function(I){return y?y({status:sl,rejected:!0,reason:I}):I})}function fd(p,y,I,R){var k=p;try{if(fr(p))(y||I)&&(k=p.then(y,I));else try{y&&(k=y(p))}catch(B){if(I)k=I(B);else throw B}}finally{R&&Js(k,R)}return k}function Js(p,y){var I=p;return y&&(fr(p)?p.finally?I=p.finally(y):I=p.then(function(R){return y(),R},function(R){throw y(),R}):y()),I}var Uo=["pending","resolving","resolved",sl],jo="dispatchEvent",pc;function Yo(p){var y;return p&&p.createEvent&&(y=p.createEvent("Event")),!!y&&y.initEvent}function Qn(p,y,I,R){var k=oi();!pc&&(pc=Ba(!!Ir(Yo,[k]).v));var B=pc.v?k.createEvent("Event"):R?new Event(y):{};if(I&&I(B),pc.v&&B.initEvent(y,!1,!0),B&&p[jo])p[jo](B);else{var q=p["on"+y];if(q)q(B);else{var ee=hn("console");ee&&(ee.error||ee.log)(y,hr(B))}}}var dd="unhandledRejection",vc=dd.toLowerCase(),Zs=10,ka;function ms(p){return Wt(p)?p.toString():hr(p)}function Xs(p,y,I){var R=rd(arguments,3),k=0,B=!1,q,ee=[],se=!1,ce=null,Oe;function ze(Re,He){try{se=!0,ce&&ce.cancel(),ce=null;var Vt=p(function(Kt,pr){ee.push(function(){try{var Ar=k===2?Re:He,sn=_t(Ar)?q:Wt(Ar)?Ar(q):Ar;fr(sn)?sn.then(Kt,pr):Ar?Kt(sn):k===3?pr(sn):Kt(sn)}catch(tn){pr(tn)}}),B&&Be()},R);return Vt}finally{}}function We(Re){return ze(void 0,Re)}function Ce(Re){var He=Re,Vt=Re;return Wt(Re)&&(He=function(Kt){return Re&&Re(),Kt},Vt=function(Kt){throw Re&&Re(),Kt}),ze(He,Vt)}function _e(){return Uo[k]}function Be(){if(ee.length>0){var Re=ee.slice();ee=[],se=!0,ce&&ce.cancel(),ce=null,y(Re)}}function Ie(Re,He){return function(Vt){if(k===He){if(Re===2&&fr(Vt)){k=1,Vt.then(Ie(2,1),Ie(3,1));return}k=Re,B=!0,q=Vt,Be(),!se&&Re===3&&!ce&&(ce=Tu(Xe,Zs))}}}function Xe(){if(!se)if(se=!0,Qf())process.emit(dd,q,Oe);else{var Re=Ca()||ca();!ka&&(ka=Ba(Ir(hn,[Qi+"RejectionEvent"]).v)),Qn(Re,vc,function(He){return zr(He,"promise",{g:function(){return Oe}}),He.reason=q,He},!!ka.v)}}Oe={then:ze,catch:We,finally:Ce},$r(Oe,"state",{get:_e}),ed()&&(Oe[Zl(11)]="IPromise");function Ae(){return"IPromise "+_e()+(B?" - "+ms(q):"")}return Oe.toString=Ae,function(){Wt(I)||rn(Qi+": executor is not a function - "+ms(I));var He=Ie(3,0);try{I.call(Oe,Ie(2,0),He)}catch(Vt){He(Vt)}}(),Oe}function Xa(p){Sr(p,function(y){try{y()}catch{}})}function ul(p){var y=or(p)?p:0;return function(I){Tu(function(){Xa(I)},y)}}function Pu(p,y){return Xs(Pu,ul(y),p,y)}var xi;function ku(p,y){!xi&&(xi=Ba(Ir(hn,[Qi]).v||null));var I=xi.v;if(!I)return Pu(p);Wt(p)||rn(Qi+": executor is not a function - "+hr(p));var R=0;function k(){return Uo[R]}var B=new I(function(q,ee){function se(Oe){R=2,q(Oe)}function ce(Oe){R=3,ee(Oe)}p(se,ce)});return $r(B,"state",{get:k}),B}var Qs;function Qa(p,y){return!Qs&&(Qs=Ba(ku)),Qs.v.call(this,p,y)}var mc=void 0,_n="",mi="core",eo="disabled",hc="extensionConfig",hs="processTelemetry",Sp="priority",La="getPerfMgr",cl="Not dynamic - ",Yi=/-([a-z])/g,pd=/([^\w\d_$])/g,va=/^(\d+[\w\d_$])/;function gs(p){return!st(p)}function _s(p){var y=p;return y&&yu(y)&&(y=y[pa](Yi,function(I,R){return R.toUpperCase()}),y=y[pa](pd,"_"),y=y[pa](va,function(I,R){return"_"+R})),y}function bp(p,y){return p&&y?fp(p,y)!==-1:!1}function ff(p,y){var I=null,R=null;return Wt(p)?I=p:R=p,function(){var k=arguments;if(I&&(R=I()),R)return R[y][Ru](R,k)}}function vd(p,y,I,R,k){p&&y&&I&&(k!==!1||_t(p[y]))&&(p[y]=ff(I,R))}function df(p,y,I,R){return p&&y&&Ya(p)&&Gt(I)&&Sr(I,function(k){yu(k)&&vd(p,k,y,k,R)}),p}function $o(p){return p&&wu&&(p=_(wu({},p))),p}function ma(p){try{return p.responseText}catch{}return null}function ll(p,y){return p?"XDomainRequest,Response:"+ma(p)||"":y}function ym(p,y){return p?"XMLHttpRequest,Status:"+p[ko]+",Response:"+ma(p)||p.response||"":y}function gc(p,y){return y&&(or(y)?p=[y].concat(p):Gt(y)&&(p=y.concat(p))),p}var _c="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",ys="withCredentials",pf="timeout";function ph(p,y,I,R,k,B){R===void 0&&(R=!1),k===void 0&&(k=!1);function q(se,ce,Oe){try{se[ce]=Oe}catch{}}var ee=new XMLHttpRequest;return R&&q(ee,_c,R),I&&q(ee,ys,I),ee.open(p,y,!k),I&&q(ee,ys,I),!k&&B&&q(ee,pf,B),ee}function Ep(p){var y={};if(yu(p)){var I=Ha(p)[Ou](/[\r\n]+/);Sr(I,function(R){if(R){var k=R.indexOf(": ");if(k!==-1){var B=Ha(R.substring(0,k))[Pa](),q=Ha(R.substring(k+1));y[B]=q}else y[Ha(R)]=1}})}return y}function vf(p,y,I){if(!p[I]&&y&&y[Ks]){var R=y[Ks](I);R&&(p[I]=Ha(R))}return p}var yc="kill-duration",Iv="kill-duration-seconds",wm="time-delta-millis";function wc(p,y){var I={};return p[yo]?I=Ep(p[yo]()):y&&(I=vf(I,p,wm),I=vf(I,p,yc),I=vf(I,p,Iv)),I}var Sm="location",mf="console",Tp="JSON",So="crypto",Nv="msCrypto",vh="ReactNative",md="msie",Dv="trident/",Ip="XMLHttpRequest",fl=null,hd=null,Sc=!1,eu=null,dl=null;function bm(p,y){var I=!1;if(p){try{if(I=y in p,!I){var R=p[g];R&&(I=y in R)}}catch{}if(!I)try{var k=new p;I=!_t(k[y])}catch{}}return I}function Np(p){if(p&&Sc){var y=hn("__mockLocation");if(y)return y}return typeof location===a&&location?location:hn(Sm)}function pl(){return typeof console!==c?console:hn(mf)}function Dp(){return!!(typeof JSON===a&&JSON||hn(Tp)!==null)}function tu(){return Dp()?JSON||hn(Tp):null}function Zr(){return hn(So)}function bc(){return hn(Nv)}function Oi(){var p=Ci();return p&&p.product?p.product===vh:!1}function Cp(){var p=Ci();if(p&&(p[Ja]!==hd||fl===null)){hd=p[Ja];var y=(hd||_n)[Pa]();fl=bp(y,md)||bp(y,Dv)}return fl}function gd(p){return(dl===null||p===!1)&&(dl=Rr()&&!!Ci().sendBeacon),dl}function vl(p){var y=!1;try{y=!!hn("fetch");var I=hn("Request");y&&p&&I&&(y=bm(I,"keepalive"))}catch{}return y}function Ec(){return eu===null&&(eu=typeof XDomainRequest!==c,eu&&ha()&&(eu=eu&&!bm(hn(Ip),"withCredentials"))),eu}function ha(){var p=!1;try{var y=hn(Ip);p=!!y}catch{}return p}var _d=4294967296,hi=4294967295,gr=123456789,ru=987654321,Rn=!1,ws=gr,Tc=ru;function Ic(p){p<0&&(p>>>=0),ws=gr+p&hi,Tc=ru-p&hi,Rn=!0}function nu(){try{var p=qa()&2147483647;Ic((Math.random()*_d^p)+p)}catch{}}function bo(p){var y=0,I=Zr()||bc();return I&&I.getRandomValues&&(y=I.getRandomValues(new Uint32Array(1))[0]&hi),y===0&&Cp()&&(Rn||nu(),y=hf()&hi),y===0&&(y=Math.floor(_d*Math.random()|0)),p||(y>>>=0),y}function hf(p){Tc=36969*(Tc&65535)+(Tc>>16)&hi,ws=18e3*(ws&65535)+(ws>>16)&hi;var y=(Tc<<16)+(ws&65535)>>>0&hi|0;return p||(y>>>=0),y}function Cv(p){p===void 0&&(p=22);for(var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I=bo()>>>0,R=0,k=_n;k[nn]<p;)R++,k+=y.charAt(I&63),I>>>=6,R===5&&(I=(bo()<<2&4294967295|I&3)>>>0,R=0);return k}var gf="3.3.5",Rv="."+Cv(6),_f=0;function ml(p){return p[gn]===1||p[gn]===9||!+p[gn]}function Rp(p,y){var I=y[p.id];if(!I){I={};try{ml(y)&&zr(y,p.id,{e:!1,v:I})}catch{}}return I}function ui(p,y){return y===void 0&&(y=!1),_s(p+_f+++(y?"."+gf:_n)+Rv)}function hl(p){var y={id:ui("_aiData-"+(p||_n)+"."+gf),accept:function(I){return ml(I)},get:function(I,R,k,B){var q=I[y.id];return q?q[_s(R)]:(B&&(q=Rp(y,I),q[_s(R)]=k),k)},kill:function(I,R){if(I&&I[R])try{delete I[R]}catch{}}};return y}function Ai(p){return p&&Ya(p)&&(p.isVal||p.fb||Un(p,"v")||Un(p,"mrg")||Un(p,"ref")||p.set)}function Lu(p,y,I){var R,k=I.dfVal||at;if(y&&I.fb){var B=I.fb;Gt(B)||(B=[B]);for(var q=0;q<B[nn];q++){var ee=B[q],se=y[ee];if(k(se)?R=se:p&&(se=p.cfg[ee],k(se)&&(R=se),p.set(p.cfg,Lr(ee),se)),k(R))break}}return!k(R)&&k(I.v)&&(R=I.v),R}function xp(p,y,I){var R=I;if(I&&Ai(I)&&(R=Lu(p,y,I)),R){Ai(R)&&(R=xp(p,y,R));var k;Gt(R)?(k=[],k[nn]=R[nn]):Vs(R)&&(k={}),k&&(kr(R,function(B,q){q&&Ai(q)&&(q=xp(p,y,q)),k[B]=q}),R=k)}return R}function yd(p,y,I,R){var k,B,q,ee=R,se,ce,Oe,ze;Ai(ee)?(k=ee.isVal,B=ee.set,Oe=ee[zs],ze=ee[ls],se=ee.mrg,ce=ee.ref,!ce&&_t(ce)&&(ce=!!se),q=Lu(p,y,ee)):q=R,ze&&p[ls](y,I);var We,Ce=!0,_e=y[I];(_e||!st(_e))&&(We=_e,Ce=!1,k&&We!==q&&!k(We)&&(We=q,Ce=!0),B&&(We=B(We,q,y),Ce=We===q)),Ce?q?We=xp(p,y,q):We=q:(Vs(We)||Gt(q))&&se&&q&&(Vs(q)||Gt(q))&&kr(q,function(Be,Ie){yd(p,We,Be,Ie)}),p.set(y,I,We),ce&&p.ref(y,I),Oe&&p[zs](y,I)}var Pi=up("[[ai_dynCfg_1]]"),wd=up("[[ai_blkDynCfg_1]]"),Op=up("[[ai_frcDynCfg_1]]");function iu(p){if(p){var y;if(Gt(p)?(y=[],y[nn]=p[nn]):Vs(p)&&(y={}),y)return kr(p,function(I,R){y[I]=iu(R)}),y}return p}function vt(p){if(p){var y=p[Pi]||p;if(y.cfg&&(y.cfg===p||y.cfg[Pi]===y))return y}return null}function Ss(p){if(p&&(Vs(p)||Gt(p)))try{p[wd]=!0}catch{}return p}function bs(p,y,I){var R=!1;return I&&!p[y.blkVal]&&(R=I[Op],!R&&!I[wd]&&(R=Vs(I)||Gt(I))),R}function to(p){rn("InvalidAccess:"+p)}var yf=["push","pop","shift","unshift","splice"],gl=function(p,y,I,R){p&&p[ol](3,108,"".concat(I," [").concat(y,"] failed - ")+hr(R))};function Es(p,y,I){Gt(y)&&Sr(yf,function(R){var k=y[R];y[R]=function(){for(var B=[],q=0;q<arguments.length;q++)B[q]=arguments[q];var ee=k[Ru](this,B);return wf(p,y,I,"Patching"),ee}})}function Eo(p,y){var I=Ni(p,y);return I&&I.get}function _l(p,y,I,R){var k={n:I,h:[],trk:function(ce){ce&&ce.fn&&(us(k.h,ce)===-1&&k.h[da](ce),p.trk(ce,k))},clr:function(ce){var Oe=us(k.h,ce);Oe!==-1&&k.h[gp](Oe,1)}},B=!0,q=!1;function ee(){B&&(q=q||bs(ee,p,R),R&&!R[Pi]&&q&&(R=wf(p,R,I,"Converting")),B=!1);var ce=p.act;return ce&&k.trk(ce),R}ee[p.prop]={chng:function(){p.add(k)}};function se(ce){if(R!==ce){ee[p.ro]&&!p.upd&&to("["+I+"] is read-only:"+hr(y)),B&&(q=q||bs(ee,p,R),B=!1);var Oe=q&&ee[p.rf];if(q)if(Oe){kr(R,function(We){R[We]=ce?ce[We]:mc});try{kr(ce,function(We,Ce){Sd(p,R,We,Ce)}),ce=R}catch(We){gl((p.hdlr||{})[ds],I,"Assigning",We),q=!1}}else R&&R[Pi]&&kr(R,function(We){var Ce=Eo(R,We);if(Ce){var _e=Ce[p.prop];_e&&_e.chng()}});if(ce!==R){var ze=ce&&bs(ee,p,ce);!Oe&&ze&&(ce=wf(p,ce,I,"Converting")),R=ce,q=ze}p.add(k)}}zr(y,k.n,{g:ee,s:se})}function Sd(p,y,I,R){if(y){var k=Eo(y,I),B=k&&!!k[p.prop];B?y[I]=R:_l(p,y,I,R)}return y}function au(p,y,I,R){if(y){var k=Eo(y,I),B=k&&!!k[p.prop],q=R&&R[0],ee=R&&R[1],se=R&&R[2];if(!B){if(se)try{Ss(y)}catch(ce){gl((p.hdlr||{})[ds],I,"Blocking",ce)}try{Sd(p,y,I,y[I]),k=Eo(y,I)}catch(ce){gl((p.hdlr||{})[ds],I,"State",ce)}}q&&(k[p.rf]=q),ee&&(k[p.ro]=ee),se&&(k[p.blkVal]=!0)}return y}function wf(p,y,I,R){try{kr(y,function(k,B){Sd(p,y,k,B)}),y[Pi]||($r(y,Pi,{get:function(){return p[sc]}}),Es(p,y,I))}catch(k){gl((p.hdlr||{})[ds],I,R,k)}return y}var yl="[[ai_",Sf="]]";function Ap(p){var y,I=la(yl+"get"+p.uid+Sf),R=la(yl+"ro"+p.uid+Sf),k=la(yl+"rf"+p.uid+Sf),B=la(yl+"blkVal"+p.uid+Sf),q=la(yl+"dtl"+p.uid+Sf),ee=null,se=null,ce;function Oe(_e,Be){var Ie=ce.act;try{ce.act=_e,_e&&_e[q]&&(Sr(_e[q],function(Ae){Ae.clr(_e)}),_e[q]=[]),Be({cfg:p.cfg,set:p.set.bind(p),setDf:p[fs].bind(p),ref:p.ref.bind(p),rdOnly:p[zs].bind(p)})}catch(Ae){var Xe=p[ds];throw Xe&&Xe[ol](1,107,hr(Ae)),Ae}finally{ce.act=Ie||null}}function ze(){if(ee){var _e=ee;ee=null,se&&se[Xi](),se=null;var Be=[];if(Sr(_e,function(Ie){if(Ie&&(Ie[q]&&(Sr(Ie[q],function(Xe){Xe.clr(Ie)}),Ie[q]=null),Ie.fn))try{Oe(Ie,Ie.fn)}catch(Xe){Be[da](Xe)}}),ee)try{ze()}catch(Ie){Be[da](Ie)}Be[nn]>0&&ji("Watcher error(s): ",Be)}}function We(_e){if(_e&&_e.h[nn]>0){ee||(ee=[]),se||(se=Tu(function(){se=null,ze()},0));for(var Be=0;Be<_e.h[nn];Be++){var Ie=_e.h[Be];Ie&&us(ee,Ie)===-1&&ee[da](Ie)}}}function Ce(_e,Be){if(_e){var Ie=_e[q]=_e[q]||[];us(Ie,Be)===-1&&Ie[da](Be)}}return ce=(y={prop:I,ro:R,rf:k},y[ls]=B,y[sc]=p,y.add=We,y[go]=ze,y.use=Oe,y.trk=Ce,y),ce}function Pp(p,y){var I={fn:y,rm:function(){I.fn=null,p=null,y=null}};return zr(I,"toJSON",{v:function(){return"WatcherHandler"+(I.fn?"":"[X]")}}),p.use(I,y),I}function xv(p,y,I){var R,k=vt(y);if(k)return k;var B=ui("dyncfg",!0),q=y&&I!==!1?y:iu(y),ee;function se(){ee[go]()}function ce(Xe,Ae,Re){try{Xe=Sd(ee,Xe,Ae,Re)}catch(He){gl(p,Ae,"Setting value",He)}return Xe[Ae]}function Oe(Xe){return Pp(ee,Xe)}function ze(Xe,Ae){ee.use(null,function(Re){var He=ee.upd;try{_t(Ae)||(ee.upd=Ae),Xe(Re)}finally{ee.upd=He}})}function We(Xe,Ae){var Re;return au(ee,Xe,Ae,(Re={},Re[0]=!0,Re))[Ae]}function Ce(Xe,Ae){var Re;return au(ee,Xe,Ae,(Re={},Re[1]=!0,Re))[Ae]}function _e(Xe,Ae){var Re;return au(ee,Xe,Ae,(Re={},Re[2]=!0,Re))[Ae]}function Be(Xe,Ae){return Ae&&kr(Ae,function(Re,He){yd(Ie,Xe,Re,He)}),Xe}var Ie=(R={uid:null,cfg:q},R[ds]=p,R[go]=se,R.set=ce,R[fs]=Be,R[sf]=Oe,R.ref=We,R[zs]=Ce,R[ls]=_e,R._block=ze,R);return zr(Ie,"uid",{c:!1,e:!1,w:!1,v:B}),ee=Ap(Ie),wf(ee,q,"config","Creating"),Ie}function kp(p,y){p?(p[al](y),p[ol](2,108,y)):to(y)}function Mu(p,y,I,R){var k=xv(I,p||{},R);return y&&k[fs](k.cfg,y),k}function Nc(p,y,I){var R=p[Pi]||p;return R.cfg&&(R.cfg===p||R.cfg[Pi]===R)?R[sf](y):(kp(I,cl+hr(p)),Mu(p,null,I)[sf](y))}var bf="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Bo=null;function Ts(){var p=hn("Microsoft");return p&&(Bo=p.ApplicationInsights),Bo}function qo(p){var y=Bo;return!y&&p.disableDbgExt!==!0&&(y=Bo||Ts()),y?y.ChromeDbgExt:null}var Ho,Dc="warnToConsole",Lp="AI (Internal): ",Cc="AI: ",Mp="AITR_",Fp={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},bd=(Ho={},Ho[0]=null,Ho[1]="errorToConsole",Ho[2]=Dc,Ho[3]="debugToConsole",Ho);function Is(p){return p?'"'+p[pa](/\"/g,_n)+'"':_n}function Vo(p,y){var I=pl();if(I){var R="log";I[p]&&(R=p),Wt(I[R])&&I[R](y)}}var Go=function(){function p(y,I,R,k){R===void 0&&(R=!1);var B=this;B[wp]=y,B[Wa]=(R?Cc:Lp)+y;var q=_n;Dp()&&(q=tu().stringify(k));var ee=(I?" message:"+Is(I):_n)+(k?" props:"+Is(q):_n);B[Wa]+=ee}return p.dataType="MessageData",p}();function Ed(p,y){return(p||{})[ds]||new Ef(y)}var Ef=function(){function p(y){this.identifier="DiagnosticLogger",this.queue=[];var I=0,R={},k,B,q,ee,se;ho(p,this,function(ce){se=ze(y||{}),ce.consoleLoggingLevel=function(){return k},ce[ol]=function(_e,Be,Ie,Xe,Ae){Ae===void 0&&(Ae=!1);var Re=new Go(Be,Ie,Ae,Xe);if(ee)throw hr(Re);var He=bd[_e]||Dc;if(_t(Re[Wa]))Ce("throw"+(_e===1?"Critical":"Warning"),Re);else{if(Ae){var Vt=+Re[wp];!R[Vt]&&k>=_e&&(ce[He](Re[Wa]),R[Vt]=!0)}else k>=_e&&ce[He](Re[Wa]);Oe(_e,Re)}},ce.debugToConsole=function(_e){Vo("debug",_e),Ce("warning",_e)},ce[al]=function(_e){Vo("warn",_e),Ce("warning",_e)},ce.errorToConsole=function(_e){Vo("error",_e),Ce("error",_e)},ce.resetInternalMessageCount=function(){I=0,R={}},ce[Hr]=Oe,ce[Nn]=function(_e){se&&se.rm(),se=null};function Oe(_e,Be){if(!We()){var Ie=!0,Xe=Mp+Be[wp];if(R[Xe]?Ie=!1:R[Xe]=!0,Ie&&(_e<=B&&(ce.queue[da](Be),I++,Ce(_e===1?"error":"warn",Be)),I===q)){var Ae="Internal events throttle limit per PageView reached for this app.",Re=new Go(23,Ae,!1);ce.queue[da](Re),_e===1?ce.errorToConsole(Ae):ce[al](Ae)}}}function ze(_e){return Nc(Mu(_e,Fp,ce).cfg,function(Be){var Ie=Be.cfg;k=Ie[lf],B=Ie.loggingLevelTelemetry,q=Ie.maxMessageLimit,ee=Ie.enableDebug})}function We(){return I>=q}function Ce(_e,Be){var Ie=qo(y||{});Ie&&Ie[Ws]&&Ie[Ws](_e,Be)}})}return p.__ieDyn=1,p}();function wl(p){return p||new Ef}function $i(p,y,I,R,k,B){B===void 0&&(B=!1),wl(p)[ol](y,I,R,k,B)}function Ns(p,y){wl(p)[al](y)}var Td="ctx",ea="ParentContextKey",ou="ChildrenContextKey",Tf=function(){function p(y,I,R){var k=this;if(k.start=qa(),k[_m]=y,k[xu]=R,k[Au]=function(){return!1},Wt(I)){var B;zr(k,"payload",{g:function(){return!B&&Wt(I)&&(B=I(),I=null),B}})}k[Jr]=function(q){return q?q===p[ea]||q===p[ou]?k[q]:(k[Td]||{})[q]:null},k[Lo]=function(q,ee){if(q)if(q===p[ea])k[q]||(k[Au]=function(){return!0}),k[q]=ee;else if(q===p[ou])k[q]=ee;else{var se=k[Td]=k[Td]||{};se[q]=ee}},k[Vr]=function(){var q=0,ee=k[Jr](p[ou]);if(Gt(ee))for(var se=0;se<ee[nn];se++){var ce=ee[se];ce&&(q+=ce[uc])}k[uc]=qa()-k.start,k.exTime=k[uc]-q,k[Vr]=function(){}}}return p.ParentContextKey="parent",p.ChildrenContextKey="childEvts",p}(),Ds="CoreUtils.doPerf";function ki(p,y,I,R,k){if(p){var B=p;if(B[La]&&(B=B[La]()),B){var q=void 0,ee=B[Jr](Ds);try{if(q=B.create(y(),R,k),q){if(ee&&q[Lo]&&(q[Lo](Tf[ea],ee),ee[Jr]&&ee[Lo])){var se=ee[Jr](Tf[ou]);se||(se=[],ee[Lo](Tf[ou],se)),se[da](q)}return B[Lo](Ds,q),I(q)}}catch(ce){q&&q[Lo]&&q[Lo]("exception",ce)}finally{q&&B.fire(q),B[Lo](Ds,ee)}}}return I()}var Fu=hl("plugin");function Id(p){return Fu.get(p,"state",{},!0)}var Sl="TelemetryPluginChain",Uu="_hasRun",Em="_getTelCtx",Ov=0;function Tm(p,y,I){for(;p;){if(p[yp]()===I)return p;p=p[ps]()}return Nd([I],y.config||{},y)}function bl(p,y,I,R){var k=null,B=[];y||(y=Mu({},null,I[ds])),R!==null&&(k=R?Tm(p,I,R):p);var q={_next:se,ctx:{core:function(){return I},diagLog:function(){return Ed(I,y.cfg)},getCfg:function(){return y.cfg},getExtCfg:Oe,getConfig:ze,hasNext:function(){return!!k},getNext:function(){return k},setNext:function(Ce){k=Ce},iterate:We,onComplete:ee}};function ee(Ce,_e){for(var Be=[],Ie=2;Ie<arguments.length;Ie++)Be[Ie-2]=arguments[Ie];Ce&&B[da]({func:Ce,self:_t(_e)?q.ctx:_e,args:Be})}function se(){var Ce=k;if(k=Ce?Ce[ps]():null,!Ce){var _e=B;_e&&_e[nn]>0&&(Sr(_e,function(Be){try{Be.func.call(Be.self,Be.args)}catch(Ie){$i(I[ds],2,73,"Unexpected Exception during onComplete - "+hr(Ie))}}),B=[])}return Ce}function ce(Ce,_e){var Be=null,Ie=y.cfg;if(Ie&&Ce){var Xe=Ie[hc];!Xe&&_e&&(Xe={}),Ie[hc]=Xe,Xe=y.ref(Ie,hc),Xe&&(Be=Xe[Ce],!Be&&_e&&(Be={}),Xe[Ce]=Be,Be=y.ref(Xe,Ce))}return Be}function Oe(Ce,_e){var Be=ce(Ce,!0);return _e&&kr(_e,function(Ie,Xe){if(st(Be[Ie])){var Ae=y.cfg[Ie];(Ae||!st(Ae))&&(Be[Ie]=Ae)}yd(y,Be,Ie,Xe)}),y[fs](Be,_e)}function ze(Ce,_e,Be){Be===void 0&&(Be=!1);var Ie,Xe=ce(Ce,!1),Ae=y.cfg;return Xe&&(Xe[_e]||!st(Xe[_e]))?Ie=Xe[_e]:(Ae[_e]||!st(Ae[_e]))&&(Ie=Ae[_e]),Ie||!st(Ie)?Ie:Be}function We(Ce){for(var _e;_e=q._next();){var Be=_e[yp]();Be&&Ce(Be)}}return q}function If(p,y,I,R){var k=Mu(y),B=bl(p,k,I,R),q=B.ctx;function ee(ce){var Oe=B._next();return Oe&&Oe[hs](ce,q),!Oe}function se(ce,Oe){return ce===void 0&&(ce=null),Gt(ce)&&(ce=Nd(ce,k.cfg,I,Oe)),If(ce||q[ps](),k.cfg,I,Oe)}return q[Ao]=ee,q[cc]=se,q}function Av(p,y,I){var R=Mu(y.config),k=bl(p,R,y,I),B=k.ctx;function q(se){var ce=k._next();return ce&&ce[Nn](B,se),!ce}function ee(se,ce){return se===void 0&&(se=null),Gt(se)&&(se=Nd(se,R.cfg,y,ce)),Av(se||B[ps](),y,ce)}return B[Ao]=q,B[cc]=ee,B}function mh(p,y,I){var R=Mu(y.config),k=bl(p,R,y,I),B=k.ctx;function q(se){return B.iterate(function(ce){Wt(ce[Po])&&ce[Po](B,se)})}function ee(se,ce){return se===void 0&&(se=null),Gt(se)&&(se=Nd(se,R.cfg,y,ce)),mh(se||B[ps](),y,ce)}return B[Ao]=q,B[cc]=ee,B}function Nd(p,y,I,R){var k=null,B=!R;if(Gt(p)&&p[nn]>0){var q=null;Sr(p,function(ee){if(!B&&R===ee&&(B=!0),B&&ee&&Wt(ee[hs])){var se=Up(ee,y,I);k||(k=se),q&&q._setNext(se),q=se}})}return R&&!k?Nd([R],y,I):k}function Up(p,y,I){var R=null,k=Wt(p[hs]),B=Wt(p[Ka]),q;p?q=p[_p]+"-"+p[Sp]+"-"+Ov++:q="Unknown-0-"+Ov++;var ee={getPlugin:function(){return p},getNext:function(){return R},processTelemetry:Oe,unload:ze,update:We,_id:q,_setNext:function(Ce){R=Ce}};function se(){var Ce;return p&&Wt(p[Em])&&(Ce=p[Em]()),Ce||(Ce=If(ee,y,I)),Ce}function ce(Ce,_e,Be,Ie,Xe){var Ae=!1,Re=p?p[_p]:Sl,He=Ce[Uu];return He||(He=Ce[Uu]={}),Ce.setNext(R),p&&ki(Ce[mi](),function(){return Re+":"+Be},function(){He[q]=!0;try{var Vt=R?R._id:_n;Vt&&(He[Vt]=!1),Ae=_e(Ce)}catch(pr){var Kt=R?He[R._id]:!0;Kt&&(Ae=!0),(!R||!Kt)&&$i(Ce[Ws](),1,73,"Plugin ["+Re+"] failed during "+Be+" - "+hr(pr)+", run flags: "+hr(He))}},Ie,Xe),Ae}function Oe(Ce,_e){_e=_e||se();function Be(Ie){if(!p||!k)return!1;var Xe=Id(p);return Xe[lc]||Xe[eo]?!1:(B&&p[Ka](R),p[hs](Ce,Ie),!0)}ce(_e,Be,"processTelemetry",function(){return{item:Ce}},!Ce.sync)||_e[Ao](Ce)}function ze(Ce,_e){function Be(){var Ie=!1;if(p){var Xe=Id(p),Ae=p[mi]||Xe[mi];p&&(!Ae||Ae===Ce.core())&&!Xe[lc]&&(Xe[mi]=null,Xe[lc]=!0,Xe[uf]=!1,p[lc]&&p[lc](Ce,_e)===!0&&(Ie=!0))}return Ie}ce(Ce,Be,"unload",function(){},_e[xu])||Ce[Ao](_e)}function We(Ce,_e){function Be(){var Ie=!1;if(p){var Xe=Id(p),Ae=p[mi]||Xe[mi];p&&(!Ae||Ae===Ce.core())&&!Xe[lc]&&p[Po]&&p[Po](Ce,_e)===!0&&(Ie=!0)}return Ie}ce(Ce,Be,"update",function(){},!1)||Ce[Ao](_e)}return zt(ee)}function El(){var p=[];function y(R){R&&p[da](R)}function I(R,k){Sr(p,function(B){try{B(R,k)}catch(q){$i(R[Ws](),2,73,"Unexpected error calling unload handler - "+hr(q))}}),p=[]}return{add:y,run:I}}function ju(){var p=[];function y(R){var k=p;p=[],Sr(k,function(B){try{(B.rm||B.remove).call(B)}catch(q){$i(R,2,73,"Unloading:"+hr(q))}})}function I(R){R&&td(p,R)}return{run:y,add:I}}var jp,Cs="getPlugin",Dd=(jp={},jp[hc]={isVal:gs,v:{}},jp),Nf=function(){function p(){var y=this,I,R,k,B,q;ce(),ho(p,y,function(Oe){Oe[ud]=function(ze,We,Ce,_e){se(ze,We,_e),I=!0},Oe[lc]=function(ze,We){var Ce,_e=Oe[mi];if(!_e||ze&&_e!==ze[mi]())return;var Be,Ie=!1,Xe=ze||Av(null,_e,k&&k[Cs]?k[Cs]():k),Ae=We||(Ce={reason:0},Ce[xu]=!1,Ce);function Re(){Ie||(Ie=!0,B.run(Xe,We),q.run(Xe[Ws]()),Be===!0&&Xe[Ao](Ae),ce())}return!Oe[sr]||Oe[sr](Xe,Ae,Re)!==!0?Re():Be=!0,Be},Oe[Po]=function(ze,We){var Ce=Oe[mi];if(!Ce||ze&&Ce!==ze[mi]())return;var _e,Be=!1,Ie=ze||mh(null,Ce,k&&k[Cs]?k[Cs]():k),Xe=We||{reason:0};function Ae(){Be||(Be=!0,se(Ie.getCfg(),Ie.core(),Ie[ps]()))}return!Oe._doUpdate||Oe._doUpdate(Ie,Xe,Ae)!==!0?Ae():_e=!0,_e},vd(Oe,"_addUnloadCb",function(){return B},"add"),vd(Oe,"_addHook",function(){return q},"add"),zr(Oe,"_unloadHooks",{g:function(){return q}})}),y[Ws]=function(Oe){return ee(Oe)[Ws]()},y[uf]=function(){return I},y.setInitialized=function(Oe){I=Oe},y[Ka]=function(Oe){k=Oe},y[Ao]=function(Oe,ze){ze?ze[Ao](Oe):k&&Wt(k[hs])&&k[hs](Oe,null)},y._getTelCtx=ee;function ee(Oe){Oe===void 0&&(Oe=null);var ze=Oe;if(!ze){var We=R||If(null,{},y[mi]);k&&k[Cs]?ze=We[cc](null,k[Cs]):ze=We[cc](null,k)}return ze}function se(Oe,ze,We){Mu(Oe,Dd,Ed(ze)),!We&&ze&&(We=ze[_o]()[ps]());var Ce=k;k&&k[Cs]&&(Ce=k[Cs]()),y[mi]=ze,R=If(We,Oe,ze,Ce)}function ce(){I=!1,y[mi]=null,R=null,k=null,q=ju(),B=El()}}return p.__ieDyn=1,p}(),Rs="",Rc="NoResponseBody",Im="&"+Rc+"=true",Tl="POST",hh=function(){function p(){var y=0,I,R,k,B,q,ee,se,ce,Oe,ze,We,Ce,_e,Be;ho(p,this,function(Ie,Xe){var Ae=!0;qi(),Ie[ud]=function(nt,ht){k=ht,R&&$i(k,1,28,"Sender is already initialized"),Ie.SetConfig(nt),R=!0},Ie._getDbgPlgTargets=function(){return[R,B,ee,I]},Ie.SetConfig=function(nt){try{if(q=nt.senderOnCompleteCallBack||{},ee=!!nt.disableCredentials,se=nt.fetchCredentials,B=!!nt.isOneDs,I=!!nt.enableSendPromise,Oe=!!nt.disableXhr,ze=!!nt.disableBeacon,We=!!nt.disableBeaconSync,Be=nt.timeWrapper,_e=!!nt.addNoResponse,Ce=!!nt.disableFetchKeepAlive,ce={sendPOST:tn},B||(Ae=!1),ee){var ht=Np();ht&&ht.protocol&&ht.protocol[Pa]()==="file:"&&(Ae=!1)}return!0}catch{}return!1},Ie.getSyncFetchPayload=function(){return y},Ie.getSenderInst=function(nt,ht){return nt&&nt[nn]?Kt(nt,ht):null},Ie.getFallbackInst=function(){return ce},Ie[sr]=function(nt,ht){qi()};function Re(nt,ht){pr(ht,200,{},nt)}function He(nt,ht){$i(k,2,26,"Failed to send telemetry.",{message:nt}),pr(ht,400,{})}function Vt(nt){He("No endpoint url is provided for the batch",nt)}function Kt(nt,ht){for(var Nr,_r=0,Rt=null,Ur=0;Rt==null&&Ur<nt[nn];)_r=nt[Ur],!Oe&&_r===1?Ec()?Rt=Gr:ha()&&(Rt=tn):_r===2&&vl(ht)&&(!ht||!Ce)?Rt=zn:_r===3&&gd()&&(ht?!We:!ze)&&(Rt=sn),Ur++;return Rt?(Nr={_transport:_r,_isSync:ht},Nr[ld]=Rt,Nr):null}function pr(nt,ht,Nr,_r){try{nt&&nt(ht,Nr,_r)}catch{}}function Ar(nt,ht){var Nr=Ci(),_r=nt[Mo];if(!_r)return Vt(ht),!0;_r=nt[Mo]+(_e?Im:Rs);var Rt=nt[Za],Ur=B?Rt:new Blob([Rt],{type:"text/plain;charset=UTF-8"}),Et=Nr.sendBeacon(_r,Ur);return Et}function sn(nt,ht,Nr){var _r=nt[Za];try{if(_r)if(Ar(nt,ht))Re(Rs,ht);else{var Rt=q&&q.beaconOnRetry;Rt&&Wt(Rt)?Rt(nt,ht,Ar):(ce&&ce[ld](nt,ht,!0),$i(k,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Ur){B&&Ns(k,"Failed to send telemetry using sendBeacon API. Ex:"+hr(Ur)),pr(ht,B?0:400,{},Rs)}}function tn(nt,ht,Nr){var _r,Rt,Ur,Et=nt[Fo]||{};!Nr&&I&&(_r=Qa(function(Pn,_a){Rt=Pn,Ur=_a})),B&&Nr&&nt.disableXhrSync&&(Nr=!1);var Sn=nt[Mo];if(!Sn){Vt(ht),Rt&&Rt(!1);return}var gt=ph(Tl,Sn,Ae,!0,Nr,nt[Vn]);B||gt[wo]("Content-type","application/json"),Sr(En(Et),function(Pn){gt[wo](Pn,Et[Pn])}),gt.onreadystatechange=function(){B||(An(gt),gt.readyState===4&&Rt&&Rt(!0))},gt.onload=function(){B&&An(gt)};function An(Pn){var _a=q&&q.xhrOnComplete,Ju=_a&&Wt(_a);if(Ju)_a(Pn,ht,nt);else{var Ms=ma(Pn);pr(ht,Pn[ko],wc(Pn,B),Ms)}}return gt.onerror=function(Pn){pr(ht,B?gt[ko]:400,wc(gt,B),B?Rs:ym(gt)),Ur&&Ur(Pn)},gt.ontimeout=function(){pr(ht,B?gt[ko]:500,wc(gt,B),B?Rs:ym(gt)),Rt&&Rt(!1)},gt.send(nt[Za]),_r}function zn(nt,ht,Nr){var _r,Rt=nt[Mo],Ur=nt[Za],Et=B?Ur:new Blob([Ur],{type:"application/json"}),Sn,gt,An,Pn=new Headers,_a=Ur[nn],Ju=!1,Ms=!1,tv=nt[Fo]||{},vu=(_r={method:Tl,body:Et},_r[bf]=!0,_r);nt.headers&&En(nt.headers)[nn]>0&&(Sr(En(tv),function(Dn){Pn.append(Dn,tv[Dn])}),vu[Fo]=Pn),se?vu.credentials=se:Ae&&B&&(vu.credentials="include"),Nr&&(vu.keepalive=!0,y+=_a,B?nt._sendReason===2&&(Ju=!0,_e&&(Rt+=Im)):Ju=!0);var Zo=new Request(Rt,vu);try{Zo[bf]=!0}catch{}if(!Nr&&I&&(Sn=Qa(function(Dn,ti){gt=Dn,An=ti})),!Rt){Vt(ht),gt&&gt(!1);return}function Yc(Dn){pr(ht,B?0:400,{},B?Rs:Dn)}function _i(Dn,ti,ya){var $c=Dn[ko],Wd=q.fetchOnComplete;Wd&&Wt(Wd)?Wd(Dn,ht,ya||Rs,ti):pr(ht,$c,{},ya||Rs)}try{dc(fetch(B?Rt:Zo,B?vu:null),function(Dn){if(Nr&&(y-=_a,_a=0),!Ms)if(Ms=!0,Dn.rejected)Yc(Dn.reason&&Dn.reason[Wa]),An&&An(Dn.reason);else{var ti=Dn[cf];try{!B&&!ti.ok?(Yc(ti.statusText),gt&&gt(!1)):B&&!ti.body?(_i(ti,null,Rs),gt&&gt(!0)):dc(ti.text(),function(ya){_i(ti,nt,ya[cf]),gt&&gt(!0)})}catch(ya){Yc(hr(ya)),An&&An(ya)}}})}catch(Dn){Ms||(Yc(hr(Dn)),An&&An(Dn))}return Ju&&!Ms&&(Ms=!0,pr(ht,200,{}),gt&&gt(!0)),B&&!Ms&&nt[Vn]>0&&Be&&Be.set(function(){Ms||(Ms=!0,pr(ht,500,{}),gt&&gt(!0))},nt[Vn]),Sn}function Gr(nt,ht,Nr){var _r=Ca(),Rt=new XDomainRequest,Ur=nt[Za];Rt.onload=function(){var Pn=ma(Rt),_a=q&&q.xdrOnComplete;_a&&Wt(_a)?_a(Rt,ht,nt):pr(ht,200,{},Pn)},Rt.onerror=function(){pr(ht,400,{},B?Rs:ll(Rt))},Rt.ontimeout=function(){pr(ht,500,{})},Rt.onprogress=function(){};var Et=_r&&_r.location&&_r.location[cd]||"",Sn=nt[Mo];if(!Sn){Vt(ht);return}if(!B&&Sn.lastIndexOf(Et,0)!==0){var gt="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";$i(k,2,40,". "+gt),He(gt,ht);return}var An=B?Sn:Sn[pa](/^(https?:)/,"");Rt.open(Tl,An),nt[Vn]&&(Rt[Vn]=nt[Vn]),Rt.send(Ur),B&&Nr?Be&&Be.set(function(){Rt.send(Ur)},0):Rt.send(Ur)}function qi(){y=0,R=!1,I=!1,k=null,B=null,q=null,ee=null,se=null,ce=null,Oe=!1,ze=!1,We=!1,Ce=!1,_e=!1,Be=null}})}return p.__ieDyn=1,p}(),Nm="on",Df="attachEvent",Pv="addEventListener",Dm="detachEvent",Yu="removeEventListener",To="events",su="visibilitychange",$u="pagehide",Il="pageshow",Nl="unload",Cd="beforeunload",Cf=ui("aiEvtPageHide"),zo=ui("aiEvtPageShow"),xc=/\.[\.]+/g,Cm=/[\.]+$/,Rm=1,Yp=hl("events"),$p=/^([^.]*)(?:\.(.+)|)/;function Wo(p){return p&&p[pa]?p[pa](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,_n):p}function Bu(p,y){var I;if(y){var R=_n;Gt(y)?(R=_n,Sr(y,function(B){B=Wo(B),B&&(B[0]!=="."&&(B="."+B),R+=B)})):R=Wo(y),R&&(R[0]!=="."&&(R="."+R),p=(p||_n)+R)}var k=$p.exec(p||_n)||[];return I={},I[pt]=k[1],I.ns=(k[2]||_n).replace(xc,".").replace(Cm,_n)[Ou](".").sort().join("."),I}function Dl(p,y,I){I===void 0&&(I=!0);var R=Yp.get(p,To,{},I),k=R[y];return k||(k=R[y]=[]),k}function xm(p,y,I,R){p&&y&&y[pt]&&(p[Yu]?p[Yu](y[pt],I,R):p[Dm]&&p[Dm](Nm+y[pt],I))}function Bp(p,y,I,R){var k=!1;return p&&y&&y[pt]&&I&&(p[Pv]?(p[Pv](y[pt],I,R),k=!0):p[Df]&&(p[Df](Nm+y[pt],I),k=!0)),k}function Om(p,y,I,R){for(var k=y[nn];k--;){var B=y[k];B&&(!I.ns||I.ns===B.evtName.ns)&&(!R||R(B))&&(xm(p,B.evtName,B[fc],B.capture),y[gp](k,1))}}function kv(p,y,I){if(y[pt])Om(p,Dl(p,y[pt]),y,I);else{var R=Yp.get(p,To,{});kr(R,function(k,B){Om(p,B,y,I)}),En(R)[nn]===0&&Yp.kill(p,To)}}function qp(p,y){var I;return y?(Gt(y)?I=[p].concat(y):I=[p,y],I=Bu("xx",I).ns[Ou](".")):I=p,I}function Oc(p,y,I,R,k){var B;k===void 0&&(k=!1);var q=!1;if(p)try{var ee=Bu(y,R);if(q=Bp(p,ee,I,k),q&&Yp.accept(p)){var se=(B={guid:Rm++,evtName:ee},B[fc]=I,B.capture=k,B);Dl(p,ee.type)[da](se)}}catch{}return q}function Io(p,y,I,R,k){if(k===void 0&&(k=!1),p)try{var B=Bu(y,R),q=!1;kv(p,B,function(ee){return B.ns&&!I||ee[fc]===I?(q=!0,!0):!1}),q||xm(p,B,I,k)}catch{}}function Rd(p,y,I){var R=!1,k=Ca();k&&(R=Oc(k,p,y,I),R=Oc(k.body,p,y,I)||R);var B=oi();return B&&(R=Oc(B,p,y,I)||R),R}function Cl(p,y,I){var R=Ca();R&&(Io(R,p,y,I),Io(R.body,p,y,I));var k=oi();k&&Io(k,p,y,I)}function Ko(p,y,I,R){var k=!1;return y&&p&&p[nn]>0&&Sr(p,function(B){B&&(!I||us(I,B)===-1)&&(k=Rd(B,y,R)||k)}),k}function eg(p,y,I,R){var k=!1;return y&&p&&Gt(p)&&(k=Ko(p,y,I,R),!k&&I&&I[nn]>0&&(k=Ko(p,y,null,R))),k}function Hp(p,y,I){p&&Gt(p)&&Sr(p,function(R){R&&Cl(R,y,I)})}function gh(p,y,I){return eg([Cd,Nl,$u],p,y,I)}function tg(p,y){Hp([Cd,Nl,$u],p,y)}function Bi(p,y,I){function R(q){var ee=oi();p&&ee&&ee.visibilityState==="hidden"&&p(q)}var k=qp(Cf,I),B=Ko([$u],p,y,k);return(!y||us(y,su)===-1)&&(B=Ko([su],R,y,k)||B),!B&&y&&(B=Bi(p,null,I)),B}function xd(p,y){var I=qp(Cf,y);Hp([$u],p,I),Hp([su],null,I)}function Od(p,y,I){function R(q){var ee=oi();p&&ee&&ee.visibilityState==="visible"&&p(q)}var k=qp(zo,I),B=Ko([Il],p,y,k);return B=Ko([su],R,y,k)||B,!B&&y&&(B=Od(p,null,I)),B}function Am(p,y){var I=qp(zo,y);Hp([Il],p,I),Hp([su],null,I)}var Rl="",ga="timings",No="value",Ad="kind",qu="length",Ac="processTelemetryStart",xs,Lv="4.3.5",Pm="1DS-Web-JS-"+Lv,mt=b.hasOwnProperty,Hu=(xs={},xs[0]=0,xs[2]=6,xs[1]=1,xs[3]=7,xs[4098]=6,xs[4097]=1,xs[4099]=7,xs);function uu(p){return!(p===Rl||st(p))}function Rf(p){if(p){var y=fp(p,"-");if(y>-1)return Xn(p,y)}return Rl}function km(p,y,I){if(!y&&!uu(y)||typeof p!="string")return null;var R=typeof y;if(R==="string"||R==="number"||R==="boolean"||Gt(y))y={value:y};else if(R==="object"&&!mt.call(y,"value"))y={value:I?JSON.stringify(y):y};else if(st(y[No])||y[No]===Rl||!yu(y[No])&&!or(y[No])&&!Ii(y[No])&&!Gt(y[No]))return null;if(Gt(y[No])&&!xl(y[No]))return null;if(!st(y[Ad])){if(Gt(y[No])||!Lm(y[Ad]))return null;y[No]=y[No].toString()}return y}function Pc(p,y,I){var R=-1;if(!_t(p))if(y>0&&(y===32?R=8192:y<=13&&(R=y<<5)),Vp(I))R===-1&&(R=0),R|=I;else{var k=Hu[Lc(p)]||-1;R!==-1&&k!==-1?R|=k:k===6&&(R=k)}return R}function Pd(p,y,I,R,k){var B={},q=!1,ee=0,se=arguments[qu],ce=arguments;for(Ii(ce[0])&&(q=ce[0],ee++);ee<se;ee++){var p=ce[ee];kr(p,function(ze,We){q&&We&&Ya(We)?Gt(We)?(B[ze]=B[ze]||[],Sr(We,function(Ce,_e){Ce&&Ya(Ce)?B[ze][_e]=Pd(!0,B[ze][_e],Ce):B[ze][_e]=Ce})):B[ze]=Pd(!0,B[ze],We):B[ze]=We})}return B}var Os=lp;function Lm(p){return p===0||p>0&&p<=13||p===32}function Vp(p){return p>=0&&p<=9}function xl(p){return p[qu]>0}function kc(p,y){var I=p;I[ga]=I[ga]||{},I[ga][Ac]=I[ga][Ac]||{},I[ga][Ac][y]=Os()}function Lc(p){var y=0;if(p!=null){var I=typeof p;I==="string"?y=1:I==="number"?y=2:I==="boolean"?y=3:I===a&&(y=4,Gt(p)?(y=4096,p[qu]>0&&(y|=Lc(p[0]))):mt.call(p,"value")&&(y=8192|Lc(p[No])))}return y}function Mv(){return!!hn("chrome")}function en(p){return p>0}var As="",Fv="drop",Uv="send",cu="requeue",Gp="rspFail",jv="oth",Yv="no-cache, no-store",kd="application/x-json-stream",Ld="cache-control",Ol="content-type",Mc="kill-tokens",zp="kill-duration",Al="time-delta-millis",$v="client-version",Do="client-id",Bv="time-delta-to-apply-millis",Md="upload-time",Mm="apikey",Ps="AuthMsaDeviceTicket",_h="WebAuthToken",Vu="AuthXToken",qv="NoResponseBody",Pl="msfpc",Fm="trace",Jo="user",ks="allowRequestSending",jn="firstRequestSent",xf="shouldAddClockSkewHeaders",kl="getClockSkewHeaderValue",Fd="setClockSkew",ur="length",ro="concat",no="iKey",Li="count",Ll="events",yn="push",Ml="split",lu="splice",Wp="toLowerCase",fu="hdrs",Hv="useHdrs",Gu="initialize",Vv="setTimeoutOverride",Gv="clearTimeoutOverride",d="payloadPreprocessor",h="overrideEndpointUrl",S="avoidOptions",D="disableEventTimings",U="stringifyObjects",W="enableCompoundKey",J="disableXhrSync",ae="disableFetchKeepAlive",me="addNoResponse",ge="excludeCsMetaData",Ze="useSendBeacon",Mt="fetchCredentials",nr="alwaysUseXhrOverride",cr="unloadTransports",lt="serializeOfflineEvt",ir="getOfflineRequestDetails",jt="createPayload",xr="createOneDSPayload",Or="payloadBlob",At="headers",xn="_thePayload",Of="urlString",On="batches",io="sendType",Ud="addHeader",zv="canSendRequest",jd="sendQueuedRequests",Yd="isCompletelyIdle",Kp="setUnloading",Um="isTenantKilled",Fe="resume",Nt="sendSynchronousBatch",Ht="_transport",Xr="getWParam",vn="isBeacon",wn="timings",gi="isTeardown",zu="isSync",Ls="data",Wu="timeout",Fl="_sendReason",jm="setKillSwitchTenants",Jp="_backOffTransmission",Af="identifier",Fc="disableOptimizeObj",P_="ignoreMc1Ms0CookieProcessing",rg="eventsLimitInMem",Hg="autoFlushEventsLimit",yh="disableAutoBatchFlushLimit",k_="overrideInstrumentationKey",Pf="disableTelemetry",Wv="baseData",Ym="sendAttempt",kf="latency",Kv="sync";function ng(p){var y=(p.ext||{}).intweb;return y&&uu(y[Pl])?y[Pl]:null}function Vg(p){for(var y=null,I=0;y===null&&I<p[ur];I++)y=ng(p[I]);return y}var $d=function(){function p(y,I){var R=I?[][ro](I):[],k=this,B=Vg(R);k[no]=function(){return y},k.Msfpc=function(){return B||As},k[Li]=function(){return R[ur]},k[Ll]=function(){return R},k.addEvent=function(q){return q?(R[yn](q),B||(B=ng(q)),!0):!1},k[Ml]=function(q,ee){var se;if(q<R[ur]){var ce=R[ur]-q;st(ee)||(ce=ee<ce?ee:ce),se=R[lu](q,ce),B=Vg(R)}return new p(y,se)}}return p.create=function(y,I){return new p(y,I)},p}(),Gg=function(){function p(){var y=!0,I=!0,R=!0,k="use-collector-delta",B=!1;ho(p,this,function(q){q[ks]=function(){return y},q[jn]=function(){R&&(R=!1,B||(y=!1))},q[xf]=function(){return I},q[kl]=function(){return k},q[Fd]=function(ee){B||(ee?(k=ee,I=!0,B=!0):I=!1,y=!0)}})}return p.__ieDyn=1,p}(),L_=1e3,ig=function(){function p(){var y={};function I(R){var k=[];return R&&Sr(R,function(B){k[yn](Ha(B))}),k}ho(p,this,function(R){R[jm]=function(k,B){if(k&&B)try{var q=I(k[Ml](","));if(B==="this-request-only")return q;for(var ee=parseInt(B,10)*L_,se=0;se<q[ur];++se)y[q[se]]=qa()+ee}catch{return[]}return[]},R[Um]=function(k){var B=y,q=Ha(k);return B[q]!==void 0&&B[q]>qa()?!0:(delete B[q],!1)}})}return p.__ieDyn=1,p}(),$m=.8,ag=1.2,wh=3e3,Jv=6e5;function Bd(p){return!(p>=300&&p<500&&p!=429||p==501||p==505)}function og(p){var y=0,I=wh*$m,R=wh*ag,k=Math.floor(Math.random()*(R-I))+I;return y=Math.pow(2,p)*k,Math.min(y,Jv)}var Bm=20,Fr=3984588,du=65e3,qd=2e6,Zv=Math.min(qd,du),Xv="metadata",qm="f",Lf=/\./,Zp=function(){function p(y,I,R,k,B,q){var ee="data",se="baseData",ce="ext",Oe=!!k,ze=!0,We=I,Ce={},_e=!!q,Be=B||Pc;ho(p,this,function(Ie){Ie.createPayload=function(Re,He,Vt,Kt,pr,Ar){return{apiKeys:[],payloadBlob:As,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:Re,isTeardown:He,isSync:Vt,isBeacon:Kt,sendType:Ar,sendReason:pr}},Ie.appendPayload=function(Re,He,Vt){var Kt=Re&&He&&!Re.overflow;return Kt&&ki(y,function(){return"Serializer:appendPayload"},function(){for(var pr=He.events(),Ar=Re.payloadBlob,sn=Re.numEvents,tn=!1,zn=[],Gr=[],qi=Re.isBeacon,nt=qi?du:Fr,ht=qi?Zv:qd,Nr=0,_r=0;Nr<pr.length;){var Rt=pr[Nr];if(Rt){if(sn>=Vt){Re.overflow=He.split(Nr);break}var Ur=Ie.getEventBlob(Rt);if(Ur&&Ur.length<=ht){var Et=Ur.length,Sn=Ar.length;if(Sn+Et>nt){Re.overflow=He.split(Nr);break}Ar&&(Ar+=`
`),Ar+=Ur,_r++,_r>Bm&&(qs(Ar,0,1),_r=0),tn=!0,sn++}else Ur?zn.push(Rt):Gr.push(Rt),pr.splice(Nr,1),Nr--}Nr++}if(zn.length>0&&Re.sizeExceed.push($d.create(He.iKey(),zn)),Gr.length>0&&Re.failedEvts.push($d.create(He.iKey(),Gr)),tn){Re.batches.push(He),Re.payloadBlob=Ar,Re.numEvents=sn;var gt=He.iKey();us(Re.apiKeys,gt)===-1&&Re.apiKeys.push(gt)}},function(){return{payload:Re,theBatch:{iKey:He.iKey(),evts:He.events()},max:Vt}}),Kt},Ie.getEventBlob=function(Re){try{return ki(y,function(){return"Serializer.getEventBlob"},function(){var He={};He.name=Re.name,He.time=Re.time,He.ver=Re.ver,He.iKey="o:"+Rf(Re.iKey);var Vt={},Kt;_e||(Kt=function(tn,zn,Gr){zg(Be,Vt,tn,zn,Gr)});var pr=Re[ce];pr&&(He[ce]=Vt,kr(pr,function(tn,zn){var Gr=Vt[tn]={};Ae(zn,Gr,"ext."+tn,!0,null,null,!0)}));var Ar=He[ee]={};Ar.baseType=Re.baseType;var sn=Ar[se]={};return Ae(Re.baseData,sn,se,!1,[se],Kt,ze),Ae(Re.data,Ar,ee,!1,[],Kt,ze),JSON.stringify(He)},function(){return{item:Re}})}catch{return null}};function Xe(Re,He){var Vt=Ce[Re];return Vt===void 0&&(Re.length>=7&&(Vt=In(Re,"ext.metadata")||In(Re,"ext.web")),Ce[Re]=Vt),Vt}function Ae(Re,He,Vt,Kt,pr,Ar,sn){kr(Re,function(tn,zn){var Gr=null;if(zn||uu(zn)){var qi=Vt,nt=tn,ht=pr,Nr=He;if(Oe&&!Kt&&Lf.test(tn)){var _r=tn.split("."),Rt=_r.length;if(Rt>1){ht&&(ht=ht.slice());for(var Ur=0;Ur<Rt-1;Ur++){var Et=_r[Ur];Nr=Nr[Et]=Nr[Et]||{},qi+="."+Et,ht&&ht.push(Et)}nt=_r[Rt-1]}}var Sn=Kt&&Xe(qi);if(!Sn&&We&&We.handleField(qi,nt)?Gr=We.value(qi,nt,zn,R):Gr=km(nt,zn,R),Gr){var gt=Gr.value;if(Nr[nt]=gt,Ar&&Ar(ht,nt,Gr),sn&&typeof gt=="object"&&!Gt(gt)){var An=ht;An&&(An=An.slice(),An.push(nt)),Ae(zn,gt,qi+"."+nt,Kt,An,Ar,sn)}}}})}})}return p.__ieDyn=1,p}();function zg(p,y,I,R,k){if(k&&y){var B=p(k.value,k.kind,k.propertyType);if(B>-1){var q=y[Xv];q||(q=y[Xv]={f:{}});var ee=q[qm];if(ee||(ee=q[qm]={}),I)for(var se=0;se<I.length;se++){var ce=I[se];ee[ce]||(ee[ce]={f:{}});var Oe=ee[ce][qm];Oe||(Oe=ee[ce][qm]={}),ee=Oe}ee=ee[R]={},Gt(k.value)?ee.a={t:B}:ee.t=B}}}function Xp(p,y){return{set:function(I,R){for(var k=[],B=2;B<arguments.length;B++)k[B-2]=arguments[B];return Sv([p,y],I,R,k)}}}var Ul,jl="sendAttempt",Yl="&"+qv+"=true",Uc="?cors=true&"+Ol[Wp]()+"="+kd,jc=(Ul={},Ul[1]=cu,Ul[100]=cu,Ul[200]="sent",Ul[8004]=Fv,Ul[8003]=Fv,Ul),Ku={},Mf={};function pu(p,y,I){Ku[p]=y,I!==!1&&(Mf[y]=p)}pu(Ps,Ps,!1),pu($v,$v),pu(Do,"Client-Id"),pu(Mm,Mm),pu(Bv,Bv),pu(Md,Md),pu(Vu,Vu);function Ff(p,y){var I=!1;if(p&&y){var R=En(p);if(R&&R[ur]>0)for(var k=y[Wp](),B=0;B<R[ur];B++){var q=R[B];if(q&&Pr(y,q)&&q[Wp]()===k){I=!0;break}}}return I}function Hd(p,y,I,R){y&&I&&I[ur]>0&&(R&&Ku[y]?(p[fu][Ku[y]]=I,p[Hv]=!0):p.url+="&"+y+"="+I)}function sg(p,y,I){for(var R=0;R<p[ur];R++)if(p[R].name===y){p[R].value=I;return}p[yn]({name:y,value:I})}function Sh(p,y){for(var I=0;I<p[ur];I++)if(p[I].name===y){p[lu](I,1);return}}var Uf=function(){function p(y,I,R,k){var B,q,ee,se,ce=!1,Oe,ze,We,Ce,_e,Be,Ie,Xe,Ae,Re,He,Vt,Kt,pr,Ar,sn,tn,zn,Gr,qi,nt,ht,Nr,_r,Rt,Ur,Et,Sn;ho(p,this,function(gt){Ms();var An=!0;gt[Gu]=function(o,l,v){_r||(_e=l,Vt=l.getCookieMgr(),ze=v,We=ze.diagLog(),td(qi,Nc(o,function(w){var T,x=w.cfg,L=w.cfg.extensionConfig[v.identifier];Rt=Xp(L[Vv],L[Gv]),uu(x.anonCookieName)?sg(Ie,"anoncknm",x.anonCookieName):Sh(Ie,"anoncknm"),nt=L[d],ht=L.payloadListener;var O=L.httpXHROverride,M=L[h]?L[h]:x.endpointUrl;B=M+Uc,pr=_t(L[S])?!0:!L[S],He=!L[D];var Y=L.valueSanitizer,V=L[U],Q=!!x[W];_t(L[W])||(Q=!!L[W]),Ar=L.xhrTimeout,sn=!!L[J],tn=!!L[ae],Gr=L[me]!==!1,Ur=!!L[ge],l.getPlugin("LocalStorage")&&(tn=!0),ce=!Oi(),Re=new Zp(_e,Y,V,Q,Pc,Ur),st(L[Ze])||(ce=!!L[Ze]),L[Mt]&&(Sn=L[Mt]);var Z=_a();Et?Et.SetConfig(Z):(Et=new hh,Et[Gu](Z,We));var ie=O,re=L[nr]?O:null,he=L[nr]?O:null,be=[3,2];if(!O){Be=!1;var je=[];Oi()?(je=[2,1],be=[2,1,3]):je=[1,2,3],je=gc(je,L.transports),O=Pn(je,!1),O||Ns(We,"No available transport to send events"),ie=Pn(je,!0)}re||(be=gc(be,L[cr]),re=Pn(be,!0)),zn=!Be&&(ce&&gd()||!tn&&vl(!0)),Ce=(T={},T[0]=O,T[1]=ie||Pn([1,2,3],!0),T[2]=re||ie||Pn([1],!0),T[3]=he||Pn([2,3],!0)||ie||Pn([1],!0),T)})),_r=!0)},gt.addResponseHandler=function(o){return Nr[yn](o),{rm:function(){var l=Nr.indexOf(o);l>=0&&Nr[lu](l,1)}}},gt[lt]=function(o){try{if(Re)return Re.getEventBlob(o)}catch{}return As},gt[ir]=function(){try{var o=Re&&Re[jt](0,!1,!1,!1,1,0);return Yf(o,pr)}catch{}return null},gt[xr]=function(o,l){try{var v=[];Sr(o,function(O){l&&(O=$o(O));var M=$d.create(O[no],[O]);v[yn](M)});for(var w=null;v[ur]>0&&Re;){var T=v.shift();T&&T[Li]()>0&&(w=w||Re[jt](0,!1,!1,!1,1,0),Re.appendPayload(w,T,y))}var x=Yf(w,pr),L={data:w[Or],urlString:x.url,headers:x[fu],timeout:Ar,disableXhrSync:sn,disableFetchKeepAlive:tn};return pr&&(Ff(L[At],Ld)||(L[At][Ld]=Yv),Ff(L[At],Ol)||(L[At][Ol]=kd)),L}catch{}return null};function Pn(o,l){try{return Et&&Et.getSenderInst(o,l)}catch{}return null}gt._getDbgPlgTargets=function(){return[Ce[0],q,Re,Ce,_a(),B]};function _a(){try{var o={xdrOnComplete:Ju,fetchOnComplete:tv,xhrOnComplete:vu,beaconOnRetry:Yc},l={enableSendPromise:!1,isOneDs:!0,disableCredentials:!An,fetchCredentials:Sn,disableXhr:!1,disableBeacon:!ce,disableBeaconSync:!ce,disableFetchKeepAlive:tn,timeWrapper:Rt,addNoResponse:Gr,senderOnCompleteCallBack:o};return l}catch{}return null}function Ju(o,l,v){var w=ma(o);Zo(l,200,{},w),Km(w)}function Ms(){var o;B=null,q=new ig,ee=!1,se=new Gg,ce=!1,Oe=0,ze=null,We=null,Ce=null,_e=null,Be=!0,Ie=[],Xe={},Ae=[],Re=null,He=!1,Vt=null,Kt=!1,pr=!1,Ar=o,sn=o,tn=o,zn=o,Gr=o,qi=[],nt=o,ht=o,Nr=[],_r=!1,Rt=Xp(),Ur=!1,Et=null}function tv(o,l,v,w){var T=function(O,M,Y){Zo(l,O,M,Y),Km(Y)},x={},L=o[At];L&&L.forEach(function(O,M){x[M]=O}),T(o.status,x,v||As)}function vu(o,l,v){var w=ma(o);Zo(l,o.status,wc(o,!0),w),Km(w)}function Zo(o,l,v,w){try{o(l,v,w)}catch(T){$i(We,2,518,hr(T))}}function Yc(o,l,v){var w=o,T=200,x=w[xn],L=o[Of]+(Gr?Yl:As);try{var O=Ci();if(x){var M=!!_e.getPlugin("LocalStorage"),Y=[],V=[];Sr(x[On],function(Q){if(Y&&Q&&Q[Li]()>0)for(var Z=Q[Ll](),ie=0;ie<Z[ur];ie++)if(O.sendBeacon(L,Re.getEventBlob(Z[ie])))V[yn](Q[ie]);else{Y[yn](Q[Ml](ie));break}else Y[yn](Q[Ml](0))}),V[ur]>0&&(x.sentEvts=V),M||mu(Y,8003,x[io],!0)}else T=0}catch(Q){Ns(We,"Failed to send telemetry using sendBeacon API. Ex:"+hr(Q)),T=0}finally{Zo(l,T,{},As)}}function _i(o){return o===2||o===3}function Dn(o){return Kt&&_i(o)&&(o=2),o}gt[Ud]=function(o,l){Xe[o]=l},gt.removeHeader=function(o){delete Xe[o]},gt[zv]=function(){return ti()&&se[ks]()},gt[jd]=function(o,l){_t(o)&&(o=0),Kt&&(o=Dn(o),l=2),$c(Ae,o,0)&&Fs(ya(),0,!1,o,l||0)},gt[Yd]=function(){return!ee&&Oe===0&&Ae[ur]===0},gt[Kp]=function(o){Kt=o},gt.addBatch=function(o){if(o&&o[Li]()>0){if(q.isTenantKilled(o[no]()))return!1;Ae[yn](o)}return!0},gt.teardown=function(){Ae[ur]>0&&Fs(ya(),0,!0,2,2),Sr(qi,function(o){o&&o.rm&&o.rm()}),qi=[]},gt.pause=function(){ee=!0},gt[Fe]=function(){ee=!1,gt[jd](0,4)},gt[Nt]=function(o,l,v){o&&o[Li]()>0&&(st(l)&&(l=1),Kt&&(l=Dn(l),v=2),Fs([o],0,!1,l,v||0))};function ti(){return!ee&&Oe<I}function ya(){var o=Ae;return Ae=[],o}function $c(o,l,v){var w=!1;return o&&o[ur]>0&&!ee&&Ce[l]&&Re&&(w=l!==0||ti()&&(v>0||se[ks]())),w}function Wd(o){var l={};return o&&Sr(o,function(v,w){l[w]={iKey:v[no](),evts:v[Ll]()}}),l}function Fs(o,l,v,w,T){if(!(!o||o[ur]===0)){if(ee){mu(o,1,w);return}w=Dn(w);try{var x=o,L=w!==0;ki(_e,function(){return"HttpManager:_sendBatches"},function(O){O&&(o=o.slice(0));for(var M=[],Y=null,V=Os(),Q=Ce[w]||(L?Ce[1]:Ce[0]),Z=Q&&Q[Ht],ie=zn&&(Kt||_i(w)||Z===3||Q._isSync&&Z===2);$c(o,w,l);){var re=o.shift();re&&re[Li]()>0&&(q.isTenantKilled(re[no]())?M[yn](re):(Y=Y||Re[jt](l,v,L,ie,T,w),Re.appendPayload(Y,re,y)?Y.overflow!==null&&(o=[Y.overflow][ro](o),Y.overflow=null,Kd(Y,V,Os(),T),V=Os(),Y=null):(Kd(Y,V,Os(),T),V=Os(),o=[re][ro](o),Y=null)))}Y&&Kd(Y,V,Os(),T),o[ur]>0&&(Ae=o[ro](Ae)),mu(M,8004,w)},function(){return{batches:Wd(x),retryCount:l,isTeardown:v,isSynchronous:L,sendReason:T,useSendBeacon:_i(w),sendType:w}},!L)}catch(O){$i(We,2,48,"Unexpected Exception sending batch: "+hr(O))}}}function Yf(o,l){var v={url:B,hdrs:{},useHdrs:!1};l?(v[fu]=Pd(v[fu],Xe),v.useHdrs=En(v.hdrs)[ur]>0):kr(Xe,function(O,M){Mf[O]?Hd(v,Mf[O],M,!1):(v[fu][O]=M,v[Hv]=!0)}),Hd(v,Do,"NO_AUTH",l),Hd(v,$v,Pm,l);var w=As;Sr(o.apiKeys,function(O){w[ur]>0&&(w+=","),w+=O}),Hd(v,Mm,w,l),Hd(v,Md,qa().toString(),l);var T=Wm(o);if(uu(T)&&(v.url+="&ext.intweb.msfpc="+T),se[xf]()&&Hd(v,Bv,se[kl](),l),_e[Xr]){var x=_e[Xr]();x>=0&&(v.url+="&w="+x)}for(var L=0;L<Ie[ur];L++)v.url+="&"+Ie[L].name+"="+Ie[L].value;return v}function $f(o,l,v){o[l]=o[l]||{},o[l][ze.identifier]=v}function Kd(o,l,v,w){if(o&&o.payloadBlob&&o.payloadBlob[ur]>0){var T=!!nt,x=Ce[o.sendType];!_i(o[io])&&o[vn]&&o.sendReason===2&&(x=Ce[2]||Ce[3]||x);var L=pr;(o.isBeacon||x[Ht]===3)&&(L=!1);var O=Yf(o,L);L=L||O[Hv];var M=Os();ki(_e,function(){return"HttpManager:_doPayloadSend"},function(){for(var Y=0;Y<o.batches[ur];Y++)for(var V=o[On][Y],Q=V[Ll](),Z=0;Z<Q[ur];Z++){var ie=Q[Z];if(He){var re=ie[wn]=ie[wn]||{};$f(re,"sendEventStart",M),$f(re,"serializationStart",l),$f(re,"serializationCompleted",v)}ie[jl]>0?ie[jl]++:ie[jl]=1}mu(o[On],1e3+(w||0),o[io],!0);var he={data:o[Or],urlString:O.url,headers:O[fu],_thePayload:o,_sendReason:w,timeout:Ar,disableXhrSync:sn,disableFetchKeepAlive:tn};L&&(Ff(he[At],Ld)||(he[At][Ld]=Yv),Ff(he[At],Ol)||(he[At][Ol]=kd));var be=null;x&&(be=function(je){se[jn]();var Qe=function(Yt,br){Vm(Yt,br,o,w)},rt=o[gi]||o[zu];try{x.sendPOST(je,Qe,rt),ht&&ht(he,je,rt,o[vn])}catch(Yt){Ns(We,"Unexpected exception sending payload. Ex:"+hr(Yt)),Zo(Qe,0,{})}}),ki(_e,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(be)if(o[io]===0&&Oe++,T&&!o.isBeacon&&x[Ht]!==3){var je={data:he[Ls],urlString:he[Of],headers:Pd({},he[At]),timeout:he[Wu],disableXhrSync:he[J],disableFetchKeepAlive:he[ae]},Qe=!1;ki(_e,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{nt(je,function(rt){Qe=!0,!Be&&!rt[xn]&&(rt[xn]=rt[xn]||he[xn],rt[Fl]=rt[Fl]||he[Fl]),be(rt)},o.isSync||o[gi])}catch{Qe||be(he)}})}else be(he)})},function(){return{thePayload:o,serializationStart:l,serializationCompleted:v,sendReason:w}},o[zu])}o.sizeExceed&&o.sizeExceed[ur]>0&&mu(o.sizeExceed,8003,o[io]),o.failedEvts&&o.failedEvts[ur]>0&&mu(o.failedEvts,8002,o[io])}function Eh(o,l){He&&Sr(o,function(v){var w=v[wn]=v[wn]||{};$f(w,"sendEventCompleted",l)})}function Vm(o,l,v,w){var T=9e3,x=null,L=!1,O=!1;try{var M=!0;if(typeof o!==c){if(l){se[Fd](l[Al]);var Y=l[zp]||l["kill-duration-seconds"];Sr(q[jm](l[Mc],Y),function(Q){Sr(v[On],function(Z){if(Z[no]()===Q){x=x||[];var ie=Z[Ml](0);v.numEvents-=ie[Li](),x[yn](ie)}})})}if(o==200||o==204){T=200;return}(!Bd(o)||v.numEvents<=0)&&(M=!1),T=9e3+o%1e3}if(M){T=100;var V=v.retryCnt;v[io]===0&&(V<R?(L=!0,zm(function(){v[io]===0&&Oe--,Fs(v[On],V+1,v[gi],Kt?2:v[io],5)},Kt,og(V))):(O=!0,Kt&&(T=8001)))}}finally{L||(se[Fd](),Gm(v,T,w,O)),mu(x,8004,v[io])}}function Gm(o,l,v,w){try{w&&ze[Jp]();var T=o[On];l===200&&(T=o.sentEvts||o[On],!w&&!o[zu]&&ze._clearBackOff(),Th(T)),mu(T,l,o[io],!0)}finally{o[io]===0&&(Oe--,v!==5&&gt.sendQueuedRequests(o[io],v))}}function Th(o){if(He){var l=Os();Sr(o,function(v){v&&v[Li]()>0&&Eh(v[Ll](),l)})}}function zm(o,l,v){l?o():Rt.set(o,v)}function Wm(o){for(var l=0;l<o.batches[ur];l++){var v=o[On][l].Msfpc();if(v)return encodeURIComponent(v)}return As}function Km(o){var l=Nr;try{for(var v=0;v<l[ur];v++)try{l[v](o)}catch(T){$i(We,1,519,"Response handler failed: "+T)}if(o){var w=JSON.parse(o);uu(w.webResult)&&uu(w.webResult[Pl])&&Vt.set("MSFPC",w.webResult[Pl],365*86400)}}catch{}}function mu(o,l,v,w){if(o&&o[ur]>0&&k){var T=k[Jm(l)];if(T){var x=v!==0;ki(_e,function(){return"HttpManager:_sendBatchesNotification"},function(){zm(function(){try{T.call(k,o,l,x,v)}catch(L){$i(We,1,74,"send request notification failed: "+L)}},w||x,0)},function(){return{batches:Wd(o),reason:l,isSync:x,sendSync:w,sendType:v}},!x)}}}function Jm(o){var l=jc[o];return uu(l)||(l=jv,o>=9e3&&o<=9999?l=Gp:o>=8e3&&o<=8999?l=Fv:o>=1e3&&o<=1999&&(l=Uv)),l}})}return p.__ieDyn=1,p}(),jf=.25,Vd=500,Qp=20,bh=6,Qv=2,Hm=4,ug=2,cg=1,lg=1e4,Gn="eventsDiscarded",Gd="",ei=void 0,M_=ns({eventsLimitInMem:{isVal:en,v:lg},immediateEventLimit:{isVal:en,v:500},autoFlushEventsLimit:{isVal:en,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:ev,v:ei},overrideInstrumentationKey:ei,overrideEndpointUrl:ei,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:ei,clearTimeoutOverride:ei,payloadPreprocessor:ei,payloadListener:ei,disableEventTimings:ei,valueSanitizer:ei,stringifyObjects:ei,enableCompoundKey:ei,disableOptimizeObj:!1,fetchCredentials:ei,transports:ei,unloadTransports:ei,useSendBeacon:ei,disableFetchKeepAlive:ei,avoidOptions:!1,xhrTimeout:ei,disableXhrSync:ei,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:or,v:bh},maxUnloadEventRetryAttempts:{isVal:or,v:Qv},addNoResponse:ei,excludeCsMetaData:ei});function ev(p){return p&&p.sendPOST}var zd=function(p){Zi(y,p);function y(){var I=p.call(this)||this;I.identifier="PostChannel",I.priority=1011,I.version="4.3.5";var R,k=!1,B=[],q,ee=!1,se=0,ce,Oe=0,ze,We={},Ce=e,_e,Be,Ie,Xe,Ae,Re,He,Vt,Kt,pr,Ar,sn,tn,zn,Gr,qi,nt,ht,Nr,_r,Rt,Ur;return ho(y,I,function(Et,Sn){Dn(),Et._getDbgPlgTargets=function(){return[Ae,R]},Et[Gu]=function(O,M,Y){ki(M,function(){return"PostChannel:initialize"},function(){Sn[Gu](O,M,Y),Nr=M.getNotifyMgr();try{Gr=qp(ui(Et[Af]),M.evtNamespace&&M.evtNamespace()),Et._addHook(Nc(O,function(V){var Q=V.cfg,Z=If(null,Q,M);R=Z.getExtCfg(Et[Af],M_),qi=Xp(R[Vv],R[Gv]),Ar=!R[Fc]&&Mv(),nt=R[P_],An(M),ze=R[rg],ce=R.immediateEventLimit,He=R[Hg],tn=R.maxEventRetryAttempts,zn=R.maxUnloadEventRetryAttempts,ht=R[yh],fr(Q.endpointUrl)?Et.pause():ee&&Et[Fe](),L(),Rt=R[k_],Ur=!!R[Pf],_r&&gt();var ie=Q.disablePageUnloadEvents||[];_r=gh(Ju,ie,Gr),_r=Bi(Ju,ie,Gr)||_r,_r=Od(Ms,Q.disablePageShowEvents,Gr)||_r})),Ae[Gu](O,Et.core,Et)}catch(V){throw Et.setInitialized(!1),V}},function(){return{theConfig:O,core:M,extensions:Y}})},Et.processTelemetry=function(O,M){kc(O,Et[Af]),M=M||Et._getTelCtx(M);var Y=O;!Ur&&!k&&(Rt&&(Y[no]=Rt),vu(Y,!0),sn?$c(2,2):_i()),Et.processNext(Y,M)},Et.getOfflineSupport=function(){try{var O=Ae&&Ae[ir]();if(Ae)return{getUrl:function(){return O?O.url:null},serialize:_a,batch:Pn,shouldProcess:function(M){return!Ur},createPayload:function(M){return null},createOneDSPayload:function(M){if(Ae[xr])return Ae[xr](M,Ar)}}}catch{}return null},Et._doTeardown=function(O,M){$c(2,2),k=!0,Ae.teardown(),gt(),Dn()};function gt(){tg(null,Gr),xd(null,Gr),Am(null,Gr)}function An(O){var M=O[Xr];O[Xr]=function(){var Y=0;return nt&&(Y=Y|2),Y|M.call(O)}}function Pn(O){var M=Gd;return O&&O[ur]&&Sr(O,function(Y){M&&(M+=`
`),M+=Y}),M}function _a(O){var M=Gd;try{tv(O),M=Ae[lt](O)}catch{}return M}function Ju(O){var M=O||Ca().event;M.type!=="beforeunload"&&(sn=!0,Ae[Kp](sn)),$c(2,2)}function Ms(O){sn=!1,Ae[Kp](sn)}function tv(O){O.ext&&O.ext[Fm]&&delete O.ext[Fm],O.ext&&O.ext[Jo]&&O.ext[Jo].id&&delete O.ext[Jo].id,Ar&&(O.ext=$o(O.ext),O[Wv]&&(O[Wv]=$o(O[Wv])),O[Ls]&&(O[Ls]=$o(O[Ls])))}function vu(O,M){if(O[Ym]||(O[Ym]=0),O[kf]||(O[kf]=1),tv(O),O[Kv]){if(Ie||ee)O[kf]=3,O[Kv]=!1;else if(Ae){Ar&&(O=$o(O)),Ae[Nt]($d.create(O[no],[O]),O[Kv]===!0?1:O[Kv],3);return}}var Y=O[kf],V=Oe,Q=ze;Y===4&&(V=se,Q=ce);var Z=!1;if(V<Q)Z=!$f(O,M);else{var ie=1,re=Qp;Y===4&&(ie=4,re=1),Z=!0,Kd(O[no],O[kf],ie,re)&&(Z=!$f(O,M))}Z&&Jm(Gn,[O],Oo.QueueFull)}Et.setEventQueueLimits=function(O,M){R[rg]=ze=en(O)?O:lg,R[Hg]=He=en(M)?M:0,L();var Y=Oe>O;if(!Y&&Vt>0)for(var V=1;!Y&&V<=3;V++){var Q=Re[V];Q&&Q[On]&&Sr(Q[On],function(Z){Z&&Z[Li]()>=Vt&&(Y=!0)})}Yf(!0,Y)},Et.pause=function(){ya(),ee=!0,Ae&&Ae.pause()},Et[Fe]=function(){ee=!1,Ae&&Ae[Fe](),_i()},Et._loadTransmitProfiles=function(O){zm(),kr(O,function(M,Y){var V=Y[ur];if(V>=2){var Q=V>2?Y[2]:0;if(Y[lu](0,V-2),Y[1]<0&&(Y[0]=-1),Y[1]>0&&Y[0]>0){var Z=Y[0]/Y[1];Y[0]=Math.ceil(Z)*Y[1]}Q>=0&&Y[1]>=0&&Q>Y[1]&&(Q=Y[1]),Y[yn](Q),We[M]=Y}})},Et.flush=function(O,M,Y){O===void 0&&(O=!0);var V;if(!ee)if(Y=Y||1,O)M||(V=Qa(function(Z){M=Z})),q==null?(ya(),Vm(1,0,Y),q=ti(function(){q=null,Gm(M,Y)},0)):B[yn](M);else{var Q=ya();Zo(1,1,Y),M&&M(),Q&&_i()}return V},Et.setMsaAuthTicket=function(O){Ae[Ud](Ps,O)},Et.setAuthPluginHeader=function(O){Ae[Ud](_h,O)},Et.removeAuthPluginHeader=function(){Ae.removeHeader(_h)},Et.hasEvents=Yc,Et._setTransmitProfile=function(O){Ce!==O&&We[O]!==void 0&&(ya(),Ce=O,_i())},df(Et,function(){return Ae},["addResponseHandler"]);function Zo(O,M,Y){var V=Vm(O,M,Y);return Ae[jd](M,Y),V}function Yc(){return Oe>0}function _i(){if(Kt>=0&&Vm(Kt,0,pr)&&Ae[jd](0,pr),se>0&&!Be&&!ee){var O=We[Ce][2];O>=0&&(Be=ti(function(){Be=null,Zo(4,0,1),_i()},O))}var M=We[Ce][1];!_e&&!q&&M>=0&&!ee&&(Yc()?_e=ti(function(){_e=null,Zo(Xe===0?3:1,0,1),Xe++,Xe%=2,_i()},M):Xe=0)}Et[Jp]=function(){Ie<Hm&&(Ie++,ya(),_i())},Et._clearBackOff=function(){Ie&&(Ie=0,ya(),_i())};function Dn(){R=null,k=!1,B=[],q=null,ee=!1,se=0,ce=500,Oe=0,ze=lg,We={},Ce=e,_e=null,Be=null,Ie=0,Xe=0,Re={},He=0,_r=!1,Vt=0,Kt=-1,pr=null,Ar=!0,sn=!1,tn=bh,zn=Qv,Gr=null,Rt=null,Ur=!1,qi=Xp(),Ae=new Uf(Vd,ug,cg,{requeue:Km,send:l,sent:v,drop:w,rspFail:T,oth:x}),Wm(),Wd(),L()}function ti(O,M){M===0&&Ie&&(M=1);var Y=1e3;return Ie&&(Y=og(Ie-1)),qi.set(O,M*Y)}function ya(){return _e!==null?(_e.cancel(),_e=null,Xe=0,!0):!1}function $c(O,M){ya(),q&&(q.cancel(),q=null),ee||Zo(1,O,M)}function Wd(){Re[4]={batches:[],iKeyMap:{}},Re[3]={batches:[],iKeyMap:{}},Re[2]={batches:[],iKeyMap:{}},Re[1]={batches:[],iKeyMap:{}}}function Fs(O,M,Y){var V=Re[M];V||(M=1,V=Re[M]);var Q=V.iKeyMap[O];return!Q&&Y&&(Q=$d.create(O),V.batches[yn](Q),V.iKeyMap[O]=Q),Q}function Yf(O,M){Ae[zv]()&&!Ie&&(He>0&&Oe>He&&(M=!0),M&&q==null&&Et.flush(O,function(){},20))}function $f(O,M){Ar&&(O=$o(O));var Y=O[kf],V=Fs(O[no],Y,!0);return V.addEvent(O)?(Y!==4?(Oe++,M&&O[Ym]===0&&Yf(!O.sync,Vt>0&&V[Li]()>=Vt)):se++,!0):!1}function Kd(O,M,Y,V){for(;Y<=M;){var Q=Fs(O,M,!0);if(Q&&Q[Li]()>0){var Z=Q[Ml](0,V),ie=Z[Li]();if(ie>0)return Y===4?se-=ie:Oe-=ie,o(Gn,[Z],Oo.QueueFull),!0}Y++}return Eh(),!1}function Eh(){for(var O=0,M=0,Y=function(Q){var Z=Re[Q];Z&&Z[On]&&Sr(Z[On],function(ie){Q===4?O+=ie[Li]():M+=ie[Li]()})},V=1;V<=4;V++)Y(V);Oe=M,se=O}function Vm(O,M,Y){var V=!1,Q=M===0;return!Q||Ae[zv]()?ki(Et.core,function(){return"PostChannel._queueBatches"},function(){for(var Z=[],ie=4;ie>=O;){var re=Re[ie];re&&re.batches&&re.batches[ur]>0&&(Sr(re[On],function(he){Ae.addBatch(he)?V=V||he&&he[Li]()>0:Z=Z[ro](he[Ll]()),ie===4?se-=he[Li]():Oe-=he[Li]()}),re[On]=[],re.iKeyMap={}),ie--}Z[ur]>0&&Jm(Gn,Z,Oo.KillSwitch),V&&Kt>=O&&(Kt=-1,pr=0)},function(){return{latency:O,sendType:M,sendReason:Y}},!Q):(Kt=Kt>=0?Math.min(Kt,O):O,pr=Math.max(pr,Y)),V}function Gm(O,M){Zo(1,0,M),Eh(),Th(function(){O&&O(),B[ur]>0?q=ti(function(){q=null,Gm(B.shift(),M)},0):(q=null,_i())})}function Th(O){Ae[Yd]()?O():q=ti(function(){q=null,Th(O)},jf)}function zm(){ya(),Wm(),Ce=e,_i()}function Wm(){We={},We[e]=[2,1,0],We[r]=[6,3,0],We[n]=[18,9,0]}function Km(O,M){var Y=[],V=tn;sn&&(V=zn),Sr(O,function(Q){Q&&Q[Li]()>0&&Sr(Q[Ll](),function(Z){Z&&(Z[Kv]&&(Z[kf]=4,Z[Kv]=!1),Z[Ym]<V?(kc(Z,Et[Af]),vu(Z,!1)):Y[yn](Z))})}),Y[ur]>0&&Jm(Gn,Y,Oo.NonRetryableStatus),sn&&$c(2,2)}function mu(O,M){var Y=Nr||{},V=Y[O];if(V)try{V.apply(Y,M)}catch(Q){$i(Et.diagLog(),1,74,O+" notification failed: "+Q)}}function Jm(O,M){for(var Y=[],V=2;V<arguments.length;V++)Y[V-2]=arguments[V];M&&M[ur]>0&&mu(O,[M][ro](Y))}function o(O,M){for(var Y=[],V=2;V<arguments.length;V++)Y[V-2]=arguments[V];M&&M[ur]>0&&Sr(M,function(Q){Q&&Q[Li]()>0&&mu(O,[Q.events()][ro](Y))})}function l(O,M,Y){O&&O[ur]>0&&mu("eventsSendRequest",[M>=1e3&&M<=1999?M-1e3:0,Y!==!0])}function v(O,M){o("eventsSent",O,M),_i()}function w(O,M){o(Gn,O,M>=8e3&&M<=8999?M-8e3:Oo.Unknown)}function T(O){o(Gn,O,Oo.NonRetryableStatus),_i()}function x(O,M){o(Gn,O,Oo.Unknown),_i()}function L(){ht?Vt=0:Vt=Math.max(Vd*(ug+1),ze/6)}}),I}return y.__ieDyn=1,y}(Nf);t.BE_PROFILE=n,t.NRT_PROFILE=r,t.PostChannel=zd,t.RT_PROFILE=e})});var ZT=an(om=>{"use strict";var fP=om&&om.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),dP=om&&om.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),JT=om&&om.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&fP(e,t,r);return dP(e,t),e};Object.defineProperty(om,"__esModule",{value:!0});om.oneDataSystemClientFactory=void 0;var pP=async(t,e,r)=>{let n=await Promise.resolve().then(()=>JT(zT())),i=await Promise.resolve().then(()=>JT(KT())),a=new n.AppInsightsCore,c=new i.PostChannel,g={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[c]]};if(r){g.extensionConfig={};let C={alwaysUseXhrOverride:!0,httpXHROverride:r};g.extensionConfig[c.identifier]=C}let b=e.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(g,[]),a.addTelemetryInitializer(C=>{C.ext=C.ext??{},C.ext.web=C.ext.web??{},C.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',b&&(C.ext.utc=C.ext.utc??{},C.ext.utc.flags=8462029)}),a},vP=async(t,e,r)=>{let n=await pP(t,e,r);return{logEvent:(c,g)=>{try{n==null||n.track({name:c,baseData:{name:c,properties:g==null?void 0:g.properties,measurements:g==null?void 0:g.measurements}})}catch(_){throw new Error(`Failed to log event to app insights!
`+_.message)}},flush:async()=>{try{return new Promise((g,_)=>{if(!n){g();return}n.flush(!0,b=>{if(!b){_("Failed to flush app 1DS!");return}})})}catch(c){throw new Error(`Failed to flush 1DS!
`+c.message)}},dispose:async()=>new Promise(g=>{if(!n){g();return}n.unload(!1,()=>{g(),n=void 0},1e3)})}};om.oneDataSystemClientFactory=vP});var QT=an((x0,XT)=>{(function(t,e){typeof x0=="object"&&typeof XT<"u"?e(x0):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(x0,function(t){"use strict";function e(d,h){return d||h}function r(d,h){return d[h]}var n=void 0,i=null,a="",c="function",g="object",_="prototype",b="__proto__",C="undefined",j="constructor",K="Symbol",te="_polyfill",z="length",G="name",ne="call",le="toString",Te=e(Object),Me=r(Te,_),Se=e(String),ke=r(Se,_),et=e(Math),ot=e(Array),Dt=r(ot,_),qt=r(Dt,"slice");function lr(d,h){try{return{v:d.apply(this,h)}}catch(S){return{e:S}}}function ln(d){return function(h){return typeof h===d}}function Ti(d){var h="[object "+d+"]";return function(S){return!!(S&&pi(S)===h)}}function pi(d){return Me[le].call(d)}function Tt(d){return typeof d===C||d===C}function fn(d){return!lo(d)}function it(d){return d===i||Tt(d)}function lo(d){return!!d||d!==n}var Le=ln("string"),Ir=ln(c);function Cr(d){return!d&&it(d)?!1:!!d&&typeof d===g}var _t=r(ot,"isArray"),dn=Ti("Error"),st=r(Te,"getOwnPropertyDescriptor");function Jn(d,h){return!!d&&Me.hasOwnProperty[ne](d,h)}var at=e(r(Te,"hasOwn"),yu);function yu(d,h){return Jn(d,h)||!!st(d,h)}function Wt(d,h,S){if(d&&Cr(d)){for(var D in d)if(at(d,D)&&h[ne](S||d,D,d[D])===-1)break}}var Ya={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Gt(d){var h={};if(h[Ya.c]=!0,h[Ya.e]=!0,d.l){h.get=function(){return d.l.v};var S=st(d.l,"v");S&&S.set&&(h.set=function(D){d.l.v=D})}return Wt(d,function(D,U){h[Ya[D]]=fn(U)?h[Ya[D]]:U}),h}var or=r(Te,"defineProperty");function Ii(d,h,S){return or(d,h,Gt(S))}function fr(d,h,S,D,U){var W={};return Wt(d,function(J,ae){Ni(W,J,h?ae:J,U),Ni(W,ae,S?ae:J,U)}),D?D(W):W}function Ni(d,h,S,D){or(d,h,{value:S,enumerable:!0,writable:!!D})}var Pr=e(Se),Un="[object Error]";function Ct(d,h){var S=a,D=Me[le][ne](d);D===Un&&(d={stack:Pr(d.stack),message:Pr(d.message),name:Pr(d.name)});try{S=JSON.stringify(d,i,h?typeof h=="number"?h:4:n),S=(S?S.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||Pr(d)}catch(U){S=" - "+Ct(U,h)}return D+": "+S}function kr(d){throw new Error(d)}function Je(d){throw new TypeError(d)}var Cn=r(Te,"freeze");function $r(d){return d}function zr(d){return d[b]||i}var Ea=r(Te,"assign"),Mi=r(Te,"keys"),Lr=e(Cn,$r),er=e(r(Te,"getPrototypeOf"),zr);function hr(d){return fr(d,1,0,Lr)}function rn(d){var h={};return Wt(d,function(S,D){Ni(h,S,D[1]),Ni(h,D[0],D[1])}),Lr(h)}function Jf(d){return rn(d)}var Zn="__tsUtils$gblCfg",Zf;function wu(){var d;return typeof globalThis!==C&&(d=globalThis),!d&&typeof self!==C&&(d=self),!d&&typeof window!==C&&(d=window),!d&&typeof global!==C&&(d=global),d}function En(){if(!Zf){var d=lr(wu).v||{};Zf=d[Zn]=d[Zn]||{}}return Zf}var ns=zt;function zt(d,h,S){var D=h?h[d]:i;return function(U){var W=(U?U[d]:i)||D;if(W||S){var J=arguments;return(W||S).apply(U,W?qt[ne](J,1):J)}Je('"'+Pr(d)+'" not defined for '+Ct(U))}}var Fi=r(et,"max"),$a=ns("slice",ke),is=ns("substring",ke),Ta=zt("substr",ke,Xf);function Xf(d,h,S){return it(d)&&Je("Invalid "+Ct(d)),S<0?a:(h=h||0,h<0&&(h=Fi(h+d[z],0)),Tt(S)?$a(d,h):$a(d,h,h+S))}function ec(d,h){return is(d,0,h)}var Ki="_urid",Ia;function Di(){if(!Ia){var d=En();Ia=d.gblSym=d.gblSym||{k:{},s:{}}}return Ia}function as(d){var h={description:Pr(d),toString:function(){return K+"("+d+")"}};return h[te]=!0,h}function Bs(d){var h=Di();if(!at(h.k,d)){var S=as(d),D=Mi(h.s).length;S[Ki]=function(){return D+"_"+S[le]()},h.k[d]=S,h.s[S[Ki]()]=Pr(d)}return h.k[d]}var ii;function tc(){ii=En()}function qs(d){return or({toJSON:function(){return d}},"v",{value:d})}var Na="window",Xn;function Zc(d,h){var S;return function(){return!ii&&tc(),(!S||ii.lzy)&&(S=qs(lr(d,h).v)),S.v}}function Hs(d){return!ii&&tc(),(!Xn||d===!1||ii.lzy)&&(Xn=qs(lr(wu).v||i)),Xn.v}function ai(d,h){var S;if(!Xn||h===!1?S=Hs(h):S=Xn.v,S&&S[d])return S[d];if(d===Na)try{return window}catch{}return i}var sa=Zc(ai,["document"]);function dr(){return!!Tn()}var Tn=Zc(ai,[Na]);function Da(){return!!Wr()}var Wr=Zc(ai,["navigator"]),vi,Ba;function Kr(){return vi=qs(lr(ai,[K]).v),vi}function ua(d){var h=(ii.lzy?0:vi)||Kr();return h.v?h.v[d]:n}function Su(d,h){!ii&&tc();var S=(ii.lzy?0:vi)||Kr();return S.v?S.v(d):h?i:as(d)}function ca(d){return!ii&&tc(),Ba=(ii.lzy?0:Ba)||qs(lr(ua,["for"]).v),(Ba.v||Bs)(d)}function hn(d,h,S){return d.apply(h,S)}function oi(d,h,S){if(d)for(var D=d[z]>>>0,U=0;U<D&&!(U in d&&h[ne](S||d,d[U],U,d)===-1);U++);}var rc=ns("indexOf",Dt),Ca=ns("map",Dt),Rr=ns("reduce",Dt),Ci=e(r(Te,"create"),Qf);function Qf(d){if(!d)return{};var h=typeof d;h!==g&&h!==c&&Je("Prototype must be an Object or function: "+Ct(d));function S(){}return S[_]=d,new S}var Ui;function os(d,h){var S=Te.setPrototypeOf||function(D,U){var W;!Ui&&(Ui=qs((W={},W[b]=[],W instanceof Array))),Ui.v?D[b]=U:Wt(U,function(J,ae){return D[J]=ae})};return S(d,h)}function Xc(d,h,S){lr(Ii,[h,G,{v:d,c:!0,e:!1}]),h=os(h,S);function D(){this[j]=h,lr(Ii,[this,G,{v:d,c:!0,e:!1}])}return h[_]=S===i?Ci(S):(D[_]=S[_],new D),h}function ss(d,h){h&&(d[G]=h)}function ed(d,h,S){var D=S||Error,U=D[_][G],W=Error.captureStackTrace;return Xc(d,function(){var J=this,ae=arguments;try{lr(ss,[D,d]);var me=hn(D,J,qt[ne](ae))||J;if(me!==J){var ge=er(J);ge!==er(me)&&os(me,ge)}return W&&W(me,J[j]),h&&h(me,ae),me}finally{lr(ss,[D,U])}},D)}function pn(){return(Date.now||Zl)()}function Zl(){return new Date().getTime()}function la(d){return function(S){return it(S)&&Je("strTrim called ["+Ct(S)+"]"),S&&S.replace&&(S=S.replace(d,a)),S}}var up=la(/^\s+|(?=\s)\s+$/g),si=zt("trim",ke,up),yv,Ra,Xl;function fo(d){if(!d||typeof d!==g)return!1;Xl||(Xl=dr()?Tn():!0);var h=!1;if(d!==Xl){Ra||(yv=Function[_][le],Ra=yv[ne](Te));try{var S=er(d);h=!S,h||(Jn(S,j)&&(S=S[j]),h=!!(S&&typeof S===c&&yv[ne](S)===Ra))}catch{}}return h}var td;function Sr(){return!ii&&tc(),(!td||ii.lzy)&&(td=qs(lr(ai,["performance"]).v)),td.v}var us=zt("endsWith",ke,rd);function rd(d,h,S){Le(d)||Je("'"+Ct(d)+"' is not a string");var D=Le(h)?h:Pr(h),U=!Tt(S)&&S<d[z]?S:d[z];return is(d,U-D[z],U)===D}var Ji=ns("indexOf",ke),Qc="ref",Lt="unref",xa="hasRef",nc="enabled";function Ql(d,h,S){var D=!0,U=d?h(i):i,W;function J(){return D=!1,U&&U[Lt]&&U[Lt](),W}function ae(){U&&S(U),U=i}function me(){return U=h(U),D||J(),W}function ge(Ze){!Ze&&U&&ae(),Ze&&!U&&me()}return W={cancel:ae,refresh:me},W[xa]=function(){return U&&U[xa]?U[xa]():D},W[Qc]=function(){return D=!0,U&&U[Qc]&&U[Qc](),W},W[Lt]=J,W=or(W,nc,{get:function(){return!!U},set:ge}),{h:W,dn:function(){U=i}}}function mm(d,h,S){var D=_t(h),U=D?h.length:0,W=(U>0?h[0]:D?n:h)||setTimeout,J=(U>1?h[1]:n)||clearTimeout,ae=S[0];S[0]=function(){me.dn(),hn(ae,n,qt[ne](arguments))};var me=Ql(d,function(ge){if(ge){if(ge.refresh)return ge.refresh(),ge;hn(J,n,[ge])}return hn(W,n,S)},function(ge){hn(J,n,[ge])});return me.h}function qa(d,h){return mm(!0,n,qt[ne](arguments))}var ef=hr,cp=Jf,bu="toLowerCase",Ha="blkVal",dt="length",Ri="rdOnly",Eu="notify",Vs="warnToConsole",lp="throwInternal",fp="setDf",In="watch",Oa="logger",dp="apply",Va="push",fa="splice",dh="hdlr",hm="cancel",wv="name",Tu="unload",Sv="version",Qh="loggingLevelConsole",pp="messageId",Zi="message",tf="diagLog",rf="userAgent",po="split",Aa="nodeType",Iu="replace",bv="logInternalMessage",Ga="type",vp="handler",Nu="traceId",el="spanId",nf="traceFlags",nd="getAttribute",mp;function Ev(d,h){mp||(mp=ed("AggregationError",function(D,U){U[dt]>1&&(D.errors=U[1])}));var S=d||"One or more errors occurred.";throw oi(h,function(D,U){S+=`
`.concat(U," > ").concat(Ct(D))}),new mp(S,h||[])}var Tv="function",Du="object",hp="undefined",Gs="prototype",ic=Object,za=ic[Gs];(Hs()||{}).Symbol,(Hs()||{}).Reflect;var af="hasOwnProperty",id=function(d){for(var h,S=1,D=arguments.length;S<D;S++){h=arguments[S];for(var U in h)za[af].call(h,U)&&(d[U]=h[U])}return d},tl=Ea||id,vo=function(d,h){return vo=ic.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,D){S.__proto__=D}||function(S,D){for(var U in D)D[af](U)&&(S[U]=D[U])},vo(d,h)};function gm(d,h){typeof h!==Tv&&h!==null&&Je("Class extends value "+String(h)+" is not a constructor or null"),vo(d,h);function S(){this.constructor=d}d[Gs]=h===null?Ci(h):(S[Gs]=h[Gs],new S)}var cs,xo="constructor",mo="prototype",Cu="function",ad="_dynInstFuncs",rl="_isDynProxy",nl="_dynClass",ac="_dynCls$",od="_dynInstChk",of=od,sd="_dfOpts",oc="_unknown_",ho="__proto__",il="_dyn"+ho,Oo="__dynProto$Gbl",Pa="_dynInstProto",ls="useBaseInst",nn="setInstFuncs",zs=Object,go=zs.getPrototypeOf,al=zs.getOwnPropertyNames,ol=Hs(),fs=ol[Oo]||(ol[Oo]={o:(cs={},cs[nn]=!0,cs[ls]=!0,cs),n:1e3});function sf(d){return d&&(d===zs[mo]||d===Array[mo])}function ds(d){return sf(d)||d===Function[mo]}function Ru(d){var h;if(d){if(go)return go(d);var S=d[ho]||d[mo]||(d[xo]?d[xo][mo]:null);h=d[il]||S,Jn(d,il)||(delete d[Pa],h=d[il]=d[Pa]||d[il],d[Pa]=S)}return h}function da(d,h){var S=[];if(al)S=al(d);else for(var D in d)typeof D=="string"&&Jn(d,D)&&S.push(D);if(S&&S.length>0)for(var U=0;U<S.length;U++)h(S[U])}function gp(d,h,S){return h!==xo&&typeof d[h]===Cu&&(S||Jn(d,h))&&h!==ho&&h!==mo}function sc(d){Je("DynamicProto: "+d)}function Xi(d){var h=Ci(null);return da(d,function(S){!h[S]&&gp(d,S,!1)&&(h[S]=d[S])}),h}function ud(d,h){for(var S=d.length-1;S>=0;S--)if(d[S]===h)return!0;return!1}function _p(d,h,S,D){function U(me,ge,Ze){var Mt=ge[Ze];if(Mt[rl]&&D){var nr=me[ad]||{};nr[of]!==!1&&(Mt=(nr[ge[nl]]||{})[Ze]||Mt)}return function(){return Mt.apply(me,arguments)}}var W=Ci(null);da(S,function(me){W[me]=U(h,S,me)});for(var J=Ru(d),ae=[];J&&!ds(J)&&!ud(ae,J);)da(J,function(me){!W[me]&&gp(J,me,!go)&&(W[me]=U(h,J,me))}),ae.push(J),J=Ru(J);return W}function uf(d,h,S,D){var U=null;if(d&&Jn(S,nl)){var W=d[ad]||Ci(null);if(U=(W[S[nl]]||Ci(null))[h],U||sc("Missing ["+h+"] "+Cu),!U[od]&&W[of]!==!1){for(var J=!Jn(d,h),ae=Ru(d),me=[];J&&ae&&!ds(ae)&&!ud(me,ae);){var ge=ae[h];if(ge){J=ge===D;break}me.push(ae),ae=Ru(ae)}try{J&&(d[h]=U),U[od]=1}catch{W[of]=!1}}}return U}function cf(d,h,S){var D=h[d];return D===S&&(D=Ru(h)[d]),typeof D!==Cu&&sc("["+d+"] is not a "+Cu),D}function yp(d,h,S,D,U){function W(me,ge){var Ze=function(){var Mt=uf(this,ge,me,Ze)||cf(ge,me,Ze);return Mt.apply(this,arguments)};return Ze[rl]=1,Ze}if(!sf(d)){var J=S[ad]=S[ad]||Ci(null);if(!sf(J)){var ae=J[h]=J[h]||Ci(null);J[of]!==!1&&(J[of]=!!U),sf(ae)||da(S,function(me){gp(S,me,!1)&&S[me]!==D[me]&&(ae[me]=S[me],delete S[me],(!Jn(d,me)||d[me]&&!d[me][rl])&&(d[me]=W(d,me)))})}}}function _m(d,h){if(go){for(var S=[],D=Ru(h);D&&!ds(D)&&!ud(S,D);){if(D===d)return!0;S.push(D),D=Ru(D)}return!1}return!0}function uc(d,h){return Jn(d,mo)?d.name||h||oc:((d||{})[xo]||{}).name||h||oc}function Ao(d,h,S,D){Jn(d,mo)||sc("theClass is an invalid class definition.");var U=d[mo];_m(U,h)||sc("["+uc(d)+"] not in hierarchy of ["+uc(h)+"]");var W=null;Jn(U,nl)?W=U[nl]:(W=ac+uc(d,"_")+"$"+fs.n,fs.n++,U[nl]=W);var J=Ao[sd],ae=!!J[ls];ae&&D&&D[ls]!==void 0&&(ae=!!D[ls]);var me=Xi(h),ge=_p(U,h,me,ae);S(h,ge);var Ze=!!go&&!!J[nn];Ze&&D&&(Ze=!!D[nn]),yp(U,W,h,me,Ze!==!1)}Ao[sd]=fs.o;var _o=void 0,Nn="",lf="Not dynamic - ",cc=/-([a-z])/g,lc=/([^\w\d_$])/g,wp=/^(\d+[\w\d_$])/;function Wa(d){return!it(d)}function xu(d){var h=d;return h&&Le(h)&&(h=h[Iu](cc,function(S,D){return D.toUpperCase()}),h=h[Iu](lc,"_"),h=h[Iu](wp,function(S,D){return"_"+D})),h}function Ws(d,h){return d&&h?Ji(d,h)!==-1:!1}function sr(d){return d&&d.toISOString()||""}function Po(d){return dn(d)?d[wv]:Nn}function ps(d){return function(){function h(){var S=this;d&&Wt(d,function(D,U){S[D]=U})}return h}()}var Ka="console",cd="JSON",Ja="crypto",Ou="msCrypto",gn="msie",pa="trident/",Hr=null,pt=null,fc=null;function ko(){return typeof console!==hp?console:ai(Ka)}function Ks(){return!!(typeof JSON===Du&&JSON||ai(cd)!==null)}function yo(){return Ks()?JSON||ai(cd):null}function Au(){return ai(Ja)}function Za(){return ai(Ou)}function Jr(){var d=Wr();if(d&&(d[rf]!==pt||Hr===null)){pt=d[rf];var h=(pt||Nn)[bu]();Hr=Ws(h,gn)||Ws(h,pa)}return Hr}function Lo(d){return(fc===null||d===!1)&&(fc=Da()&&!!Wr().sendBeacon),fc}function Vr(d,h){if(d)for(var S=0;S<d[dt];S++){var D=d[S];if(D[wv]&&D[wv]===h)return D}return{}}function Mo(d){var h=sa();return h&&d?Vr(h.querySelectorAll("meta"),d).content:null}function ld(d){var h,S=Sr();if(S){var D=S.getEntriesByType("navigation")||[];h=Vr((D[dt]>0?D[0]:{}).serverTiming,d).description}return h}var Fo=4294967296,Vn=4294967295,wo=123456789,vs=987654321,ji=!1,Qi=wo,sl=vs;function dc(d){d<0&&(d>>>=0),Qi=wo+d&Vn,sl=vs-d&Vn,ji=!0}function fd(){try{var d=pn()&2147483647;dc((Math.random()*Fo^d)+d)}catch{}}function Js(d){return d>0?Math.floor(Uo()/Vn*(d+1))>>>0:0}function Uo(d){var h=0,S=Au()||Za();return S&&S.getRandomValues&&(h=S.getRandomValues(new Uint32Array(1))[0]&Vn),h===0&&Jr()&&(ji||fd(),h=jo()&Vn),h===0&&(h=Math.floor(Fo*Math.random()|0)),d||(h>>>=0),h}function jo(d){sl=36969*(sl&65535)+(sl>>16)&Vn,Qi=18e3*(Qi&65535)+(Qi>>16)&Vn;var h=(sl<<16)+(Qi&65535)>>>0&Vn|0;return d||(h>>>=0),h}function pc(d){d===void 0&&(d=22);for(var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S=Uo()>>>0,D=0,U=Nn;U[dt]<d;)D++,U+=h.charAt(S&63),S>>>=6,D===5&&(S=(Uo()<<2&4294967295|S&3)>>>0,D=0);return U}var Yo="3.3.5",Qn="."+pc(6),dd=0;function vc(d){return d[Aa]===1||d[Aa]===9||!+d[Aa]}function Zs(d,h){var S=h[d.id];if(!S){S={};try{vc(h)&&Ii(h,d.id,{e:!1,v:S})}catch{}}return S}function ka(d,h){return h===void 0&&(h=!1),xu(d+dd+++(h?"."+Yo:Nn)+Qn)}function ms(d){var h={id:ka("_aiData-"+(d||Nn)+"."+Yo),accept:function(S){return vc(S)},get:function(S,D,U,W){var J=S[h.id];return J?J[xu(D)]:(W&&(J=Zs(h,S),J[xu(D)]=U),U)},kill:function(S,D){if(S&&S[D])try{delete S[D]}catch{}}};return h}function Xs(d){return d&&Cr(d)&&(d.isVal||d.fb||at(d,"v")||at(d,"mrg")||at(d,"ref")||d.set)}function Xa(d,h,S){var D,U=S.dfVal||lo;if(h&&S.fb){var W=S.fb;_t(W)||(W=[W]);for(var J=0;J<W[dt];J++){var ae=W[J],me=h[ae];if(U(me)?D=me:d&&(me=d.cfg[ae],U(me)&&(D=me),d.set(d.cfg,Pr(ae),me)),U(D))break}}return!U(D)&&U(S.v)&&(D=S.v),D}function ul(d,h,S){var D=S;if(S&&Xs(S)&&(D=Xa(d,h,S)),D){Xs(D)&&(D=ul(d,h,D));var U;_t(D)?(U=[],U[dt]=D[dt]):fo(D)&&(U={}),U&&(Wt(D,function(W,J){J&&Xs(J)&&(J=ul(d,h,J)),U[W]=J}),D=U)}return D}function Pu(d,h,S,D){var U,W,J,ae=D,me,ge,Ze,Mt;Xs(ae)?(U=ae.isVal,W=ae.set,Ze=ae[Ri],Mt=ae[Ha],me=ae.mrg,ge=ae.ref,!ge&&Tt(ge)&&(ge=!!me),J=Xa(d,h,ae)):J=D,Mt&&d[Ha](h,S);var nr,cr=!0,lt=h[S];(lt||!it(lt))&&(nr=lt,cr=!1,U&&nr!==J&&!U(nr)&&(nr=J,cr=!0),W&&(nr=W(nr,J,h),cr=nr===J)),cr?J?nr=ul(d,h,J):nr=J:(fo(nr)||_t(J))&&me&&J&&(fo(J)||_t(J))&&Wt(J,function(ir,jt){Pu(d,nr,ir,jt)}),d.set(h,S,nr),ge&&d.ref(h,S),Ze&&d[Ri](h,S)}var xi=ca("[[ai_dynCfg_1]]"),ku=ca("[[ai_blkDynCfg_1]]"),Qs=ca("[[ai_frcDynCfg_1]]");function Qa(d){if(d){var h;if(_t(d)?(h=[],h[dt]=d[dt]):fo(d)&&(h={}),h)return Wt(d,function(S,D){h[S]=Qa(D)}),h}return d}function mc(d){if(d){var h=d[xi]||d;if(h.cfg&&(h.cfg===d||h.cfg[xi]===h))return h}return null}function _n(d){if(d&&(fo(d)||_t(d)))try{d[ku]=!0}catch{}return d}function mi(d,h,S){var D=!1;return S&&!d[h.blkVal]&&(D=S[Qs],!D&&!S[ku]&&(D=fo(S)||_t(S))),D}function eo(d){Je("InvalidAccess:"+d)}var hc=["push","pop","shift","unshift","splice"],hs=function(d,h,S,D){d&&d[lp](3,108,"".concat(S," [").concat(h,"] failed - ")+Ct(D))};function Sp(d,h,S){_t(h)&&oi(hc,function(D){var U=h[D];h[D]=function(){for(var W=[],J=0;J<arguments.length;J++)W[J]=arguments[J];var ae=U[dp](this,W);return va(d,h,S,"Patching"),ae}})}function La(d,h){var S=st(d,h);return S&&S.get}function cl(d,h,S,D){var U={n:S,h:[],trk:function(ge){ge&&ge.fn&&(rc(U.h,ge)===-1&&U.h[Va](ge),d.trk(ge,U))},clr:function(ge){var Ze=rc(U.h,ge);Ze!==-1&&U.h[fa](Ze,1)}},W=!0,J=!1;function ae(){W&&(J=J||mi(ae,d,D),D&&!D[xi]&&J&&(D=va(d,D,S,"Converting")),W=!1);var ge=d.act;return ge&&U.trk(ge),D}ae[d.prop]={chng:function(){d.add(U)}};function me(ge){if(D!==ge){ae[d.ro]&&!d.upd&&eo("["+S+"] is read-only:"+Ct(h)),W&&(J=J||mi(ae,d,D),W=!1);var Ze=J&&ae[d.rf];if(J)if(Ze){Wt(D,function(nr){D[nr]=ge?ge[nr]:_o});try{Wt(ge,function(nr,cr){Yi(d,D,nr,cr)}),ge=D}catch(nr){hs((d.hdlr||{})[Oa],S,"Assigning",nr),J=!1}}else D&&D[xi]&&Wt(D,function(nr){var cr=La(D,nr);if(cr){var lt=cr[d.prop];lt&&lt.chng()}});if(ge!==D){var Mt=ge&&mi(ae,d,ge);!Ze&&Mt&&(ge=va(d,ge,S,"Converting")),D=ge,J=Mt}d.add(U)}}Ii(h,U.n,{g:ae,s:me})}function Yi(d,h,S,D){if(h){var U=La(h,S),W=U&&!!U[d.prop];W?h[S]=D:cl(d,h,S,D)}return h}function pd(d,h,S,D){if(h){var U=La(h,S),W=U&&!!U[d.prop],J=D&&D[0],ae=D&&D[1],me=D&&D[2];if(!W){if(me)try{_n(h)}catch(ge){hs((d.hdlr||{})[Oa],S,"Blocking",ge)}try{Yi(d,h,S,h[S]),U=La(h,S)}catch(ge){hs((d.hdlr||{})[Oa],S,"State",ge)}}J&&(U[d.rf]=J),ae&&(U[d.ro]=ae),me&&(U[d.blkVal]=!0)}return h}function va(d,h,S,D){try{Wt(h,function(U,W){Yi(d,h,U,W)}),h[xi]||(or(h,xi,{get:function(){return d[dh]}}),Sp(d,h,S))}catch(U){hs((d.hdlr||{})[Oa],S,D,U)}return h}var gs="[[ai_",_s="]]";function bp(d){var h,S=Su(gs+"get"+d.uid+_s),D=Su(gs+"ro"+d.uid+_s),U=Su(gs+"rf"+d.uid+_s),W=Su(gs+"blkVal"+d.uid+_s),J=Su(gs+"dtl"+d.uid+_s),ae=null,me=null,ge;function Ze(lt,ir){var jt=ge.act;try{ge.act=lt,lt&&lt[J]&&(oi(lt[J],function(Or){Or.clr(lt)}),lt[J]=[]),ir({cfg:d.cfg,set:d.set.bind(d),setDf:d[fp].bind(d),ref:d.ref.bind(d),rdOnly:d[Ri].bind(d)})}catch(Or){var xr=d[Oa];throw xr&&xr[lp](1,107,Ct(Or)),Or}finally{ge.act=jt||null}}function Mt(){if(ae){var lt=ae;ae=null,me&&me[hm](),me=null;var ir=[];if(oi(lt,function(jt){if(jt&&(jt[J]&&(oi(jt[J],function(xr){xr.clr(jt)}),jt[J]=null),jt.fn))try{Ze(jt,jt.fn)}catch(xr){ir[Va](xr)}}),ae)try{Mt()}catch(jt){ir[Va](jt)}ir[dt]>0&&Ev("Watcher error(s): ",ir)}}function nr(lt){if(lt&&lt.h[dt]>0){ae||(ae=[]),me||(me=qa(function(){me=null,Mt()},0));for(var ir=0;ir<lt.h[dt];ir++){var jt=lt.h[ir];jt&&rc(ae,jt)===-1&&ae[Va](jt)}}}function cr(lt,ir){if(lt){var jt=lt[J]=lt[J]||[];rc(jt,ir)===-1&&jt[Va](ir)}}return ge=(h={prop:S,ro:D,rf:U},h[Ha]=W,h[dh]=d,h.add=nr,h[Eu]=Mt,h.use=Ze,h.trk=cr,h),ge}function ff(d,h){var S={fn:h,rm:function(){S.fn=null,d=null,h=null}};return Ii(S,"toJSON",{v:function(){return"WatcherHandler"+(S.fn?"":"[X]")}}),d.use(S,h),S}function vd(d,h,S){var D,U=mc(h);if(U)return U;var W=ka("dyncfg",!0),J=h&&S!==!1?h:Qa(h),ae;function me(){ae[Eu]()}function ge(xr,Or,At){try{xr=Yi(ae,xr,Or,At)}catch(xn){hs(d,Or,"Setting value",xn)}return xr[Or]}function Ze(xr){return ff(ae,xr)}function Mt(xr,Or){ae.use(null,function(At){var xn=ae.upd;try{Tt(Or)||(ae.upd=Or),xr(At)}finally{ae.upd=xn}})}function nr(xr,Or){var At;return pd(ae,xr,Or,(At={},At[0]=!0,At))[Or]}function cr(xr,Or){var At;return pd(ae,xr,Or,(At={},At[1]=!0,At))[Or]}function lt(xr,Or){var At;return pd(ae,xr,Or,(At={},At[2]=!0,At))[Or]}function ir(xr,Or){return Or&&Wt(Or,function(At,xn){Pu(jt,xr,At,xn)}),xr}var jt=(D={uid:null,cfg:J},D[Oa]=d,D[Eu]=me,D.set=ge,D[fp]=ir,D[In]=Ze,D.ref=nr,D[Ri]=cr,D[Ha]=lt,D._block=Mt,D);return Ii(jt,"uid",{c:!1,e:!1,w:!1,v:W}),ae=bp(jt),va(ae,J,"config","Creating"),jt}function df(d,h){d?(d[Vs](h),d[lp](2,108,h)):eo(h)}function $o(d,h,S,D){var U=vd(S,d||{},D);return h&&U[fp](U.cfg,h),U}function ma(d,h,S){var D=d[xi]||d;return D.cfg&&(D.cfg===d||D.cfg[xi]===D)?D[In](h):(df(S,lf+Ct(d)),$o(d,null,S)[In](h))}var ll=null;function ym(){var d=ai("Microsoft");return d&&(ll=d.ApplicationInsights),ll}function gc(d){var h=ll;return!h&&d.disableDbgExt!==!0&&(h=ll||ym()),h?h.ChromeDbgExt:null}var _c,ys="warnToConsole",pf="AI (Internal): ",ph="AI: ",Ep="AITR_",vf={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},yc=(_c={},_c[0]=null,_c[1]="errorToConsole",_c[2]=ys,_c[3]="debugToConsole",_c);function Iv(d){return d?'"'+d[Iu](/\"/g,Nn)+'"':Nn}function wm(d,h){var S=ko();if(S){var D="log";S[d]&&(D=d),Ir(S[D])&&S[D](h)}}var wc=function(){function d(h,S,D,U){D===void 0&&(D=!1);var W=this;W[pp]=h,W[Zi]=(D?ph:pf)+h;var J=Nn;Ks()&&(J=yo().stringify(U));var ae=(S?" message:"+Iv(S):Nn)+(U?" props:"+Iv(J):Nn);W[Zi]+=ae}return d.dataType="MessageData",d}();function Sm(d,h){return(d||{})[Oa]||new mf(h)}var mf=function(){function d(h){this.identifier="DiagnosticLogger",this.queue=[];var S=0,D={},U,W,J,ae,me;Ao(d,this,function(ge){me=Mt(h||{}),ge.consoleLoggingLevel=function(){return U},ge[lp]=function(lt,ir,jt,xr,Or){Or===void 0&&(Or=!1);var At=new wc(ir,jt,Or,xr);if(ae)throw Ct(At);var xn=yc[lt]||ys;if(Tt(At[Zi]))cr("throw"+(lt===1?"Critical":"Warning"),At);else{if(Or){var Of=+At[pp];!D[Of]&&U>=lt&&(ge[xn](At[Zi]),D[Of]=!0)}else U>=lt&&ge[xn](At[Zi]);Ze(lt,At)}},ge.debugToConsole=function(lt){wm("debug",lt),cr("warning",lt)},ge[Vs]=function(lt){wm("warn",lt),cr("warning",lt)},ge.errorToConsole=function(lt){wm("error",lt),cr("error",lt)},ge.resetInternalMessageCount=function(){S=0,D={}},ge[bv]=Ze,ge[Tu]=function(lt){me&&me.rm(),me=null};function Ze(lt,ir){if(!nr()){var jt=!0,xr=Ep+ir[pp];if(D[xr]?jt=!1:D[xr]=!0,jt&&(lt<=W&&(ge.queue[Va](ir),S++,cr(lt===1?"error":"warn",ir)),S===J)){var Or="Internal events throttle limit per PageView reached for this app.",At=new wc(23,Or,!1);ge.queue[Va](At),lt===1?ge.errorToConsole(Or):ge[Vs](Or)}}}function Mt(lt){return ma($o(lt,vf,ge).cfg,function(ir){var jt=ir.cfg;U=jt[Qh],W=jt.loggingLevelTelemetry,J=jt.maxMessageLimit,ae=jt.enableDebug})}function nr(){return S>=J}function cr(lt,ir){var jt=gc(h||{});jt&&jt[tf]&&jt[tf](lt,ir)}})}return d.__ieDyn=1,d}();function Tp(d){return d||new mf}function So(d,h,S,D,U,W){W===void 0&&(W=!1),Tp(d)[lp](h,S,D,U,W)}function Nv(){for(var d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],h=Nn,S,D=0;D<4;D++)S=Uo(),h+=d[S&15]+d[S>>4&15]+d[S>>8&15]+d[S>>12&15]+d[S>>16&15]+d[S>>20&15]+d[S>>24&15]+d[S>>28&15];var U=d[8+(Uo()&3)|0];return Ta(h,0,8)+Ta(h,9,4)+"4"+Ta(h,13,3)+U+Ta(h,16,3)+Ta(h,19,12)}var vh=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,md="00",Dv="ff",Ip="00000000000000000000000000000000",fl="0000000000000000",hd=1;function Sc(d,h,S){return d&&d[dt]===h&&d!==S?!!d.match(/^[\da-f]*$/i):!1}function eu(d,h,S){return Sc(d,h)?d:S}function dl(d){(isNaN(d)||d<0||d>255)&&(d=1);for(var h=d.toString(16);h[dt]<2;)h="0"+h;return h}function bm(d,h,S,D){var U;return U={},U[Sv]=Sc(D,2,Dv)?D:md,U[Nu]=pl(d)?d:Nv(),U[el]=Dp(h)?h:ec(Nv(),16),U.traceFlags=S>=0&&S<=255?S:1,U}function Np(d,h){var S;if(!d||(_t(d)&&(d=d[0]||""),!d||!Le(d)||d[dt]>8192))return null;if(d.indexOf(",")!==-1){var D=d[po](",");d=D[h>0&&D[dt]>h?h:0]}var U=vh.exec(si(d));return!U||U[1]===Dv||U[2]===Ip||U[3]===fl?null:(S={version:(U[1]||Nn)[bu](),traceId:(U[2]||Nn)[bu](),spanId:(U[3]||Nn)[bu]()},S[nf]=parseInt(U[4],16),S)}function pl(d){return Sc(d,32,Ip)}function Dp(d){return Sc(d,16,fl)}function tu(d){return!(!d||!Sc(d[Sv],2,Dv)||!Sc(d[Nu],32,Ip)||!Sc(d[el],16,fl)||!Sc(dl(d[nf]),2))}function Zr(d){return tu(d)?(d[nf]&hd)===hd:!1}function bc(d){if(d){var h=dl(d[nf]);Sc(h,2)||(h="01");var S=d[Sv]||md;return S!=="00"&&S!=="ff"&&(S=md),"".concat(S.toLowerCase(),"-").concat(eu(d.traceId,32,Ip).toLowerCase(),"-").concat(eu(d.spanId,16,fl).toLowerCase(),"-").concat(h.toLowerCase())}return""}function Oi(d){var h="traceparent",S=Np(Mo(h),d);return S||(S=Np(ld(h),d)),S}function Cp(d){var h=d.getElementsByTagName("script"),S=[];return oi(h,function(D){var U=D[nd]("src");if(U){var W=D[nd]("crossorigin"),J=D.hasAttribute("async")===!0,ae=D.hasAttribute("defer")===!0,me=D[nd]("referrerpolicy"),ge={url:U};W&&(ge.crossOrigin=W),J&&(ge.async=J),ae&&(ge.defer=ae),me&&(ge.referrerPolicy=me),S[Va](ge)}}),S}var gd="on",vl="attachEvent",Ec="addEventListener",ha="detachEvent",_d="removeEventListener",hi="events";ka("aiEvtPageHide"),ka("aiEvtPageShow");var gr=/\.[\.]+/g,ru=/[\.]+$/,Rn=1,ws=ms("events"),Tc=/^([^.]*)(?:\.(.+)|)/;function Ic(d){return d&&d[Iu]?d[Iu](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Nn):d}function nu(d,h){var S;if(h){var D=Nn;_t(h)?(D=Nn,oi(h,function(W){W=Ic(W),W&&(W[0]!=="."&&(W="."+W),D+=W)})):D=Ic(h),D&&(D[0]!=="."&&(D="."+D),d=(d||Nn)+D)}var U=Tc.exec(d||Nn)||[];return S={},S[Ga]=U[1],S.ns=(U[2]||Nn).replace(gr,".").replace(ru,Nn)[po](".").sort().join("."),S}function bo(d,h,S){S===void 0&&(S=!0);var D=ws.get(d,hi,{},S),U=D[h];return U||(U=D[h]=[]),U}function hf(d,h,S,D){d&&h&&h[Ga]&&(d[_d]?d[_d](h[Ga],S,D):d[ha]&&d[ha](gd+h[Ga],S))}function Cv(d,h,S,D){var U=!1;return d&&h&&h[Ga]&&S&&(d[Ec]?(d[Ec](h[Ga],S,D),U=!0):d[vl]&&(d[vl](gd+h[Ga],S),U=!0)),U}function gf(d,h,S,D){for(var U=h[dt];U--;){var W=h[U];W&&(!S.ns||S.ns===W.evtName.ns)&&(!D||D(W))&&(hf(d,W.evtName,W[vp],W.capture),h[fa](U,1))}}function Rv(d,h,S){if(h[Ga])gf(d,bo(d,h[Ga]),h,S);else{var D=ws.get(d,hi,{});Wt(D,function(U,W){gf(d,W,h,S)}),Mi(D)[dt]===0&&ws.kill(d,hi)}}function _f(d,h){var S;return h?(_t(h)?S=[d].concat(h):S=[d,h],S=nu("xx",S).ns[po](".")):S=d,S}function ml(d,h,S,D,U){var W;U===void 0&&(U=!1);var J=!1;if(d)try{var ae=nu(h,D);if(J=Cv(d,ae,S,U),J&&ws.accept(d)){var me=(W={guid:Rn++,evtName:ae},W[vp]=S,W.capture=U,W);bo(d,ae.type)[Va](me)}}catch{}return J}function Rp(d,h,S,D,U){if(U===void 0&&(U=!1),d)try{var W=nu(h,D),J=!1;Rv(d,W,function(ae){return W.ns&&!S||ae[vp]===S?(J=!0,!0):!1}),J||hf(d,W,S,U)}catch{}}var ui="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",hl="sampleRate",Ai="ProcessLegacy",Lu="http.method",xp="https://dc.services.visualstudio.com",yd="/v2/track",Pi="not_specified",wd="iKey",Op=cp({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),iu="split",vt="length",Ss="toLowerCase",bs="ingestionendpoint",to="toString",yf="push",gl="removeItem",Es="name",Eo="message",_l="count",Sd="preTriggerDate",au="disabled",wf="interval",yl="daysOfMonth",Sf="date",Ap="getUTCDate",Pp="stringify",xv="pathname",kp="match",Mu="correlationHeaderExcludePatterns",Nc="extensionConfig",bf="exceptions",Bo="parsedStack",Ts="properties",qo="measurements",Ho="sizeInBytes",Dc="typeName",Lp="severityLevel",Cc="problemGroup",Mp="isManual",Fp="hasFullStack",bd="assembly",Is="fileName",Vo="line",Go="method",Ed="level",Ef="aiDataContract",wl="duration",$i="receivedResponse";function Ns(d,h,S){var D=h[vt],U=Td(d,h);if(U[vt]!==D){for(var W=0,J=U;S[J]!==void 0;)W++,J=is(U,0,147)+Uu(W);U=J}return U}function Td(d,h){var S;return h&&(h=si(Pr(h)),h[vt]>150&&(S=is(h,0,150),So(d,2,57,"name is too long.  It has been truncated to 150 characters.",{name:h},!0))),S||h}function ea(d,h,S){S===void 0&&(S=1024);var D;return h&&(S=S||1024,h=si(Pr(h)),h[vt]>S&&(D=is(h,0,S),So(d,2,61,"string value is too long. It has been truncated to "+S+" characters.",{value:h},!0))),D||h}function ou(d,h){return Sl(d,h,2048,66)}function Tf(d,h){var S;return h&&h[vt]>32768&&(S=is(h,0,32768),So(d,2,56,"message is too long, it has been truncated to 32768 characters.",{message:h},!0)),S||h}function Ds(d,h){var S;if(h){var D=""+h;D[vt]>32768&&(S=is(D,0,32768),So(d,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:h},!0))}return S||h}function ki(d,h){if(h){var S={};Wt(h,function(D,U){if(Cr(U)&&Ks())try{U=yo()[Pp](U)}catch(W){So(d,2,49,"custom property is not valid",{exception:W},!0)}U=ea(d,U,8192),D=Ns(d,D,S),S[D]=U}),h=S}return h}function Fu(d,h){if(h){var S={};Wt(h,function(D,U){D=Ns(d,D,S),S[D]=U}),h=S}return h}function Id(d,h){return h&&Sl(d,h,128,69)[to]()}function Sl(d,h,S,D){var U;return h&&(h=si(Pr(h)),h[vt]>S&&(U=is(h,0,S),So(d,2,D,"input is too long, it has been truncated to "+S+" characters.",{data:h},!0))),U||h}function Uu(d){var h="00"+d;return Ta(h,h[vt]-3)}var Em=sa()||{},Ov=0,Tm=[null,null,null,null,null];function bl(d){var h=Ov,S=Tm,D=S[h];return Em.createElement?S[h]||(D=S[h]=Em.createElement("a")):D={host:Nd(d,!0)},D.href=d,h++,h>=S[vt]&&(h=0),Ov=h,D}function If(d){var h,S=bl(d);return S&&(h=S.href),h}function Av(d){var h,S=bl(d);return S&&(h=S[xv]),h}function mh(d,h){return d?d.toUpperCase()+" "+h:h}function Nd(d,h){var S=Up(d,h)||"";if(S){var D=S[kp](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(D!=null&&D[vt]>3&&Le(D[2])&&D[2][vt]>0)return D[2]+(D[3]||"")}return S}function Up(d,h){var S=null;if(d){var D=d[kp](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(D!=null&&D[vt]>2&&Le(D[2])&&D[2][vt]>0&&(S=D[2]||"",h&&D[vt]>2)){var U=(D[1]||"")[Ss](),W=D[3]||"";(U==="http"&&W===":80"||U==="https"&&W===":443")&&(W=""),S+=W}}return S}var El=[xp+yd,"https://breeze.aimon.applicationinsights.io"+yd,"https://dc-int.services.visualstudio.com"+yd],ju="cid-v1:";function jp(d){return rc(El,d[Ss]())!==-1}function Cs(d){ju=d}function Dd(){return ju}function Nf(d,h,S){if(!h||d&&d.disableCorrelationHeaders)return!1;if(d&&d[Mu]){for(var D=0;D<d.correlationHeaderExcludePatterns[vt];D++)if(d[Mu][D].test(h))return!1}var U=bl(h).host[Ss]();if(U&&(Ji(U,":443")!==-1||Ji(U,":80")!==-1)&&(U=(Up(h,!0)||"")[Ss]()),(!d||!d.enableCorsCorrelation)&&U&&U!==S)return!1;var W=d&&d.correlationHeaderDomains;if(W){var J;if(oi(W,function(ge){var Ze=new RegExp(ge.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));J=J||Ze.test(U)}),!J)return!1}var ae=d&&d.correlationHeaderExcludedDomains;if(!ae||ae[vt]===0)return!0;for(var D=0;D<ae[vt];D++){var me=new RegExp(ae[D].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(me.test(U))return!1}return U&&U[vt]>0}function Rs(d){if(d){var h=Rc(d,Op[1]);if(h&&h!==ju)return h}}function Rc(d,h){if(d)for(var S=d[iu](","),D=0;D<S[vt];++D){var U=S[D][iu]("=");if(U[vt]===2&&U[0]===h)return U[1]}}function Im(d,h,S,D){var U,W=D,J=D;if(h&&h[vt]>0){var ae=bl(h);if(U=ae.host,!W)if(ae[xv]!=null){var me=ae.pathname[vt]===0?"/":ae[xv];me.charAt(0)!=="/"&&(me="/"+me),J=ae[xv],W=ea(d,S?S+" "+me:me)}else W=ea(d,h)}else U=D,W=D;return{target:U,name:W,data:J}}function Tl(){var d=Sr();if(d&&d.now&&d.timing){var h=d.now()+d.timing.navigationStart;if(h>0)return h}return pn()}function hh(d,h){var S=null;return d!==0&&h!==0&&!it(d)&&!it(h)&&(S=h-d),S}function Nm(d,h){var S=d||{};return{getName:function(){return S[Es]},setName:function(D){h&&h.setName(D),S[Es]=D},getTraceId:function(){return S.traceID},setTraceId:function(D){h&&h.setTraceId(D),pl(D)&&(S.traceID=D)},getSpanId:function(){return S.parentID},setSpanId:function(D){h&&h.setSpanId(D),Dp(D)&&(S.parentID=D)},getTraceFlags:function(){return S.traceFlags},setTraceFlags:function(D){h&&h.setTraceFlags(D),S.traceFlags=D}}}var Df=ef({LocalStorage:0,SessionStorage:1}),Pv=ef({AI:0,AI_AND_W3C:1,W3C:2}),Dm=ef({Normal:1,Critical:2}),Yu=void 0,To=void 0,su="";function $u(){return xc()?Il(Df.LocalStorage):null}function Il(d){try{if(it(Hs()))return null;var h=new Date()[to](),S=ai(d===Df.LocalStorage?"localStorage":"sessionStorage"),D=su+h;S.setItem(D,h);var U=S.getItem(D)!==h;if(S[gl](D),!U)return S}catch{}return null}function Nl(){return $p()?Il(Df.SessionStorage):null}function Cd(){Yu=!1,To=!1}function Cf(d){su=d||""}function zo(){Yu=xc(!0),To=$p(!0)}function xc(d){return(d||Yu===void 0)&&(Yu=!!Il(Df.LocalStorage)),Yu}function Cm(d,h){var S=$u();if(S!==null)try{return S.getItem(h)}catch(D){Yu=!1,So(d,2,1,"Browser failed read of local storage. "+Po(D),{exception:Ct(D)})}return null}function Rm(d,h,S){var D=$u();if(D!==null)try{return D.setItem(h,S),!0}catch(U){Yu=!1,So(d,2,3,"Browser failed write to local storage. "+Po(U),{exception:Ct(U)})}return!1}function Yp(d,h){var S=$u();if(S!==null)try{return S[gl](h),!0}catch(D){Yu=!1,So(d,2,5,"Browser failed removal of local storage item. "+Po(D),{exception:Ct(D)})}return!1}function $p(d){return(d||To===void 0)&&(To=!!Il(Df.SessionStorage)),To}function Wo(){var d=[];return $p()&&Wt(ai("sessionStorage"),function(h){d[yf](h)}),d}function Bu(d,h){var S=Nl();if(S!==null)try{return S.getItem(h)}catch(D){To=!1,So(d,2,2,"Browser failed read of session storage. "+Po(D),{exception:Ct(D)})}return null}function Dl(d,h,S){var D=Nl();if(D!==null)try{return D.setItem(h,S),!0}catch(U){To=!1,So(d,2,4,"Browser failed write to session storage. "+Po(U),{exception:Ct(U)})}return!1}function xm(d,h){var S=Nl();if(S!==null)try{return S[gl](h),!0}catch(D){To=!1,So(d,2,6,"Browser failed removal of session storage item. "+Po(D),{exception:Ct(D)})}return!1}var Bp="appInsightsThrottle",Om=function(){function d(h,S){var D=this,U,W,J,ae,me,ge,Ze,Mt=!1,nr=!1;lt(),D._getDbgPlgTargets=function(){return[Ze]},D.getConfig=function(){return J},D.canThrottle=function(Fe){var Nt=Yd(Fe),Ht=ir(Fe);return Or(Ht,U,Nt)},D.isTriggered=function(Fe){return Kp(Fe)},D.isReady=function(){return Mt},D.flush=function(Fe){try{var Nt=Um(Fe);if(Nt&&Nt[vt]>0){var Ht=Nt.slice(0);return Ze[Fe]=[],oi(Ht,function(Xr){cr(Xr.msgID,Xr[Eo],Xr.severity,!1)}),!0}}catch{}return!1},D.flushAll=function(){try{if(Ze){var Fe=!0;return Wt(Ze,function(Nt){var Ht=D.flush(parseInt(Nt));Fe=Fe&&Ht}),Fe}}catch{}return!1},D.onReadyState=function(Fe,Nt){return Nt===void 0&&(Nt=!0),Mt=it(Fe)?!0:Fe,Mt&&Nt?D.flushAll():null},D.sendMessage=function(Fe,Nt,Ht){return cr(Fe,Nt,Ht,!0)};function cr(Fe,Nt,Ht,Xr){if(Mt){var vn=jd(Fe);if(!vn)return;var wn=ir(Fe),gi=Yd(Fe),zu=Or(wn,U,gi),Ls=!1,Wu=0,Fl=Kp(Fe);try{zu&&!Fl?(Wu=Math.min(wn.limit.maxSendNumber,gi[_l]+1),gi[_l]=0,Ls=!0,me[Fe]=!0,gi[Sd]=new Date):(me[Fe]=zu,gi[_l]+=1);var jm=At(Fe);io(W,jm,gi);for(var Jp=0;Jp<Wu;Jp++)zv(Fe,W,Nt,Ht)}catch{}return{isThrottled:Ls,throttleNum:Wu}}else if(Xr){var Af=Um(Fe);Af[yf]({msgID:Fe,message:Nt,severity:Ht})}return null}function lt(){W=Sm(h),me={},ae={},Ze={},J={},jt(109),ge=Wa(S)?S:"",h.addUnloadHook(ma(h.config,function(Fe){var Nt=Fe.cfg;U=xc();var Ht=Nt.throttleMgrCfg||{};Wt(Ht,function(Xr,vn){jt(parseInt(Xr),vn)})}))}function ir(Fe){return J[Fe]||J[109]}function jt(Fe,Nt){var Ht,Xr;try{var vn=Nt||{},wn={};wn[au]=!!vn[au];var gi=vn[wf]||{};nr=(gi==null?void 0:gi.daysOfMonth)&&(gi==null?void 0:gi.daysOfMonth[vt])>0,wn[wf]=xr(gi);var zu={samplingRate:((Ht=vn.limit)===null||Ht===void 0?void 0:Ht.samplingRate)||100,maxSendNumber:((Xr=vn.limit)===null||Xr===void 0?void 0:Xr.maxSendNumber)||1};wn.limit=zu,J[Fe]=wn}catch{}}function xr(Fe){Fe=Fe||{};var Nt=Fe==null?void 0:Fe.monthInterval,Ht=Fe==null?void 0:Fe.dayInterval;return it(Nt)&&it(Ht)&&(Fe.monthInterval=3,nr||(Fe[yl]=[28],nr=!0)),Fe={monthInterval:Fe==null?void 0:Fe.monthInterval,dayInterval:Fe==null?void 0:Fe.dayInterval,daysOfMonth:Fe==null?void 0:Fe.daysOfMonth},Fe}function Or(Fe,Nt,Ht){if(Fe&&!Fe[au]&&Nt&&Wa(Ht)){var Xr=On(),vn=Ht[Sf],wn=Fe[wf],gi=1;if(wn!=null&&wn.monthInterval){var zu=(Xr.getUTCFullYear()-vn.getUTCFullYear())*12+Xr.getUTCMonth()-vn.getUTCMonth();gi=Ud(wn.monthInterval,0,zu)}var Ls=1;if(nr)Ls=rc(wn[yl],Xr[Ap]());else if(wn!=null&&wn.dayInterval){var Wu=Math.floor((Xr.getTime()-vn.getTime())/864e5);Ls=Ud(wn.dayInterval,0,Wu)}return gi>=0&&Ls>=0}return!1}function At(Fe,Nt){var Ht=Wa(Nt)?Nt:"";return Fe?Bp+Ht+"-"+Fe:null}function xn(Fe){try{if(Fe){var Nt=new Date;return Fe.getUTCFullYear()===Nt.getUTCFullYear()&&Fe.getUTCMonth()===Nt.getUTCMonth()&&Fe[Ap]()===Nt[Ap]()}}catch{}return!1}function Of(Fe,Nt,Ht){try{var Xr={date:On(),count:0};if(Fe){var vn=JSON.parse(Fe),wn={date:On(vn[Sf])||Xr[Sf],count:vn[_l]||Xr[_l],preTriggerDate:vn.preTriggerDate?On(vn[Sd]):void 0};return wn}else return io(Nt,Ht,Xr),Xr}catch{}return null}function On(Fe){try{if(Fe){var Nt=new Date(Fe);if(!isNaN(Nt.getDate()))return Nt}else return new Date}catch{}return null}function io(Fe,Nt,Ht){try{return Rm(Fe,Nt,si(JSON[Pp](Ht)))}catch{}return!1}function Ud(Fe,Nt,Ht){return Fe<=0?1:Ht>=Nt&&(Ht-Nt)%Fe==0?Math.floor((Ht-Nt)/Fe)+1:-1}function zv(Fe,Nt,Ht,Xr){So(Nt,Xr||1,Fe,Ht)}function jd(Fe){try{var Nt=ir(Fe);return Js(1e6)<=Nt.limit.samplingRate}catch{}return!1}function Yd(Fe){try{var Nt=ae[Fe];if(!Nt){var Ht=At(Fe,ge);Nt=Of(Cm(W,Ht),W,Ht),ae[Fe]=Nt}return ae[Fe]}catch{}return null}function Kp(Fe){var Nt=me[Fe];if(it(Nt)){Nt=!1;var Ht=Yd(Fe);Ht&&(Nt=xn(Ht[Sd])),me[Fe]=Nt}return me[Fe]}function Um(Fe){return Ze=Ze||{},it(Ze[Fe])&&(Ze[Fe]=[]),Ze[Fe]}}return d}(),kv=";",qp="=";function Oc(d){if(!d)return{};var h=d[iu](kv),S=Rr(h,function(U,W){var J=W[iu](qp);if(J[vt]===2){var ae=J[0][Ss](),me=J[1];U[ae]=me}return U},{});if(Mi(S)[vt]>0){if(S.endpointsuffix){var D=S.location?S.location+".":"";S[bs]=S[bs]||"https://"+D+"dc."+S.endpointsuffix}S[bs]=S[bs]||xp,us(S[bs],"/")&&(S[bs]=S[bs].slice(0,-1))}return S}var Io={parse:Oc},Rd=function(){function d(h,S,D){var U=this,W=this;W.ver=1,W.sampleRate=100,W.tags={},W[Es]=ea(h,D)||Pi,W.data=S,W.time=sr(new Date),W[Ef]={time:1,iKey:1,name:1,sampleRate:function(){return U.sampleRate===100?4:1},tags:1,data:1}}return d}(),Cl=function(){function d(h,S,D,U){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var W=this;W.ver=2,W[Es]=ea(h,S)||Pi,W[Ts]=ki(h,D),W[qo]=Fu(h,U)}return d.envelopeType="Microsoft.ApplicationInsights.{0}.Event",d.dataType="EventData",d}(),Ko=58,eg=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Hp=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,gh=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,tg=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,Bi=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,xd=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,Od=/([^\(\s\n]+):([0-9]+)$/,Am="<no_method>",Rl="error",ga="stack",No="stackDetails",Ad="errorSrc",qu="message",Ac="description",xs=[{re:Hp,len:5,m:1,fn:2,ln:3,col:4},{chk:Pm,pre:Lv,re:gh,len:4,m:1,fn:2,ln:3},{re:tg,len:3,m:1,fn:2,hdl:cu},{re:Bi,len:2,fn:1,hdl:cu}];function Lv(d){return d.replace(/(\(anonymous\))/,"<anonymous>")}function Pm(d){return Ji(d,"[native")<0}function mt(d,h){var S=d;return S&&!Le(S)&&(JSON&&JSON[Pp]?(S=JSON[Pp](d),h&&(!S||S==="{}")&&(Ir(d[to])?S=d[to]():S=""+d)):S=""+d+" - (Missing JSON.stringify)"),S||""}function Hu(d,h){var S=d;return d&&(S&&!Le(S)&&(S=d[qu]||d[Ac]||S),S&&!Le(S)&&(S=mt(S,!0)),d.filename&&(S=S+" @"+(d.filename||"")+":"+(d.lineno||"?")+":"+(d.colno||"?"))),h&&h!=="String"&&h!=="Object"&&h!=="Error"&&Ji(S||"",h)===-1&&(S=h+": "+S),S||""}function uu(d){try{if(Cr(d))return"hasFullStack"in d&&"typeName"in d}catch{}return!1}function Rf(d){try{if(Cr(d))return"ver"in d&&"exceptions"in d&&"properties"in d}catch{}return!1}function km(d){return d&&d.src&&Le(d.src)&&d.obj&&_t(d.obj)}function Pc(d){var h=d||"";Le(h)||(Le(h[ga])?h=h[ga]:h=""+h);var S=h[iu](`
`);return{src:h,obj:S}}function Pd(d){for(var h=[],S=d[iu](`
`),D=0;D<S[vt];D++){var U=S[D];S[D+1]&&(U+="@"+S[D+1],D++),h[yf](U)}return{src:d,obj:h}}function Os(d){var h=null;if(d)try{if(d[ga])h=Pc(d[ga]);else if(d[Rl]&&d[Rl][ga])h=Pc(d[Rl][ga]);else if(d.exception&&d.exception[ga])h=Pc(d.exception[ga]);else if(km(d))h=d;else if(km(d[No]))h=d[No];else if(Tn()&&Tn().opera&&d[qu])h=Pd(d[Eo]);else if(d.reason&&d.reason[ga])h=Pc(d.reason[ga]);else if(Le(d))h=Pc(d);else{var S=d[qu]||d[Ac]||"";Le(d[Ad])&&(S&&(S+=`
`),S+=" from "+d[Ad]),S&&(h=Pc(S))}}catch(D){h=Pc(D)}return h||{src:"",obj:null}}function Lm(d){var h="";return d&&(d.obj?h=d.obj.join(`
`):h=d.src||""),h}function Vp(d){var h,S=d.obj;if(S&&S[vt]>0){h=[];var D=0,U=!1,W=0;oi(S,function(ir){if(U||Gp(ir)){var jt=Pr(ir);U=!0;var xr=Yv(jt,D);xr&&(W+=xr[Ho],h[yf](xr),D++)}});var J=32*1024;if(W>J)for(var ae=0,me=h[vt]-1,ge=0,Ze=ae,Mt=me;ae<me;){var nr=h[ae][Ho],cr=h[me][Ho];if(ge+=nr+cr,ge>J){var lt=Mt-Ze+1;h.splice(Ze,lt);break}Ze=ae,Mt=me,ae++,me--}}return h}function xl(d){var h="";if(d&&(h=d.typeName||d[Es]||"",!h))try{var S=/function (.{1,200})\(/,D=S.exec(d.constructor[to]());h=D&&D[vt]>1?D[1]:""}catch{}return h}function kc(d){if(d)try{if(!Le(d)){var h=xl(d),S=mt(d,!1);return(!S||S==="{}")&&(d[Rl]&&(d=d[Rl],h=xl(d)),S=mt(d,!0)),Ji(S,h)!==0&&h!=="String"?h+":"+S:S}}catch{}return""+(d||"")}var Lc=function(){function d(h,S,D,U,W,J){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var ae=this;ae.ver=2,Rf(S)?(ae[bf]=S[bf]||[],ae[Ts]=S[Ts],ae[qo]=S[qo],S[Lp]&&(ae[Lp]=S[Lp]),S.id&&(ae.id=S.id,S[Ts].id=S.id),S[Cc]&&(ae[Cc]=S[Cc]),it(S[Mp])||(ae[Mp]=S[Mp])):(D||(D={}),J&&(D.id=J),ae[bf]=[As(h,S,D)],ae[Ts]=ki(h,D),ae[qo]=Fu(h,U),W&&(ae[Lp]=W),J&&(ae.id=J))}return d.CreateAutoException=function(h,S,D,U,W,J,ae,me){var ge,Ze=xl(W||J||h);return ge={},ge[Eo]=Hu(h,Ze),ge.url=S,ge.lineNumber=D,ge.columnNumber=U,ge.error=kc(W||J||h),ge.evt=kc(J||h),ge[Dc]=Ze,ge.stackDetails=Os(ae||W||J),ge.errorSrc=me,ge},d.CreateFromInterface=function(h,S,D,U){var W=S[bf]&&Ca(S[bf],function(ae){return Fv(h,ae)}),J=new d(h,tl(tl({},S),{exceptions:W}),D,U);return J},d.prototype.toInterface=function(){var h,S=this,D=S.exceptions,U=S.properties,W=S.measurements,J=S.severityLevel,ae=S.problemGroup,me=S.id,ge=S.isManual,Ze=D instanceof Array&&Ca(D,function(Mt){return Mt.toInterface()})||void 0;return h={ver:"4.0"},h[bf]=Ze,h.severityLevel=J,h.properties=U,h.measurements=W,h.problemGroup=ae,h.id=me,h.isManual=ge,h},d.CreateSimpleException=function(h,S,D,U,W,J){var ae;return{exceptions:[(ae={},ae[Fp]=!0,ae.message=h,ae.stack=W,ae.typeName=S,ae)]}},d.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",d.dataType="ExceptionData",d.formatError=kc,d}(),Mv=Lr({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function en(){var d,h=this,S=_t(h[Bo])&&Ca(h[Bo],function(U){return Ol(U)}),D=(d={id:h.id,outerId:h.outerId,typeName:h[Dc],message:h[Eo],hasFullStack:h[Fp],stack:h[ga]},d[Bo]=S||void 0,d);return D}function As(d,h,S){var D,U,W,J,ae,me,ge,Ze;if(uu(h))J=h[Dc],ae=h[Eo],ge=h[ga],Ze=h[Bo]||[],me=h[Fp];else{var Mt=h,nr=Mt&&Mt.evt;dn(Mt)||(Mt=Mt[Rl]||nr||Mt),J=ea(d,xl(Mt))||Pi,ae=Tf(d,Hu(h||Mt,J))||Pi;var cr=h[No]||Os(h);Ze=Vp(cr),_t(Ze)&&Ca(Ze,function(lt){lt[bd]=ea(d,lt[bd]),lt[Is]=ea(d,lt[Is])}),ge=Ds(d,Lm(cr)),me=_t(Ze)&&Ze[vt]>0,S&&(S[Dc]=S[Dc]||J)}return D={},D[Ef]=Mv,D.id=U,D.outerId=W,D[Dc]=J,D[Eo]=ae,D[Fp]=me,D.stack=ge,D[Bo]=Ze,D.toInterface=en,D}function Fv(d,h){var S=_t(h[Bo])&&Ca(h[Bo],function(U){return kd(U)})||h[Bo],D=As(d,tl(tl({},h),{parsedStack:S}));return D}function Uv(d,h){var S=h[kp](xd);if(S&&S[vt]>=4)d[Is]=S[1],d[Vo]=parseInt(S[2]);else{var D=h[kp](Od);D&&D[vt]>=3?(d[Is]=D[1],d[Vo]=parseInt(D[2])):d[Is]=h}}function cu(d,h,S){var D=d[Is];h.fn&&S&&S[vt]>h.fn&&(h.ln&&S[vt]>h.ln?(D=si(S[h.fn]||""),d[Vo]=parseInt(si(S[h.ln]||""))||0):D=si(S[h.fn]||"")),D&&Uv(d,D)}function Gp(d){var h=!1;if(d&&Le(d)){var S=si(d);S&&(h=eg.test(S))}return h}var jv=Lr({level:1,method:1,assembly:0,fileName:0,line:0});function Yv(d,h){var S,D;if(d&&Le(d)&&si(d)){D=(S={},S[Ef]=jv,S[Ed]=h,S[bd]=si(d),S[Go]=Am,S.fileName="",S.line=0,S[Ho]=0,S);for(var U=0;U<xs[vt];){var W=xs[U];if(W.chk&&!W.chk(d))break;W.pre&&(d=W.pre(d));var J=d[kp](W.re);if(J&&J[vt]>=W.len){W.m&&(D[Go]=si(J[W.m]||Am)),W.hdl?W.hdl(D,W,J):W.fn&&(W.ln?(D[Is]=si(J[W.fn]||""),D[Vo]=parseInt(si(J[W.ln]||""))||0):Uv(D,J[W.fn]||""));break}U++}}return Ld(D)}function kd(d){var h,S=(h={},h[Ef]=jv,h.level=d[Ed],h.method=d[Go],h.assembly=d[bd],h.fileName=d[Is],h.line=d[Vo],h[Ho]=0,h);return Ld(S)}function Ld(d){var h=Ko;return d&&(h+=d.method[vt],h+=d.assembly[vt],h+=d.fileName[vt],h+=d.level.toString()[vt],h+=d.line.toString()[vt],d[Ho]=h),d}function Ol(d){return{level:d[Ed],method:d[Go],assembly:d[bd],fileName:d[Is],line:d[Vo]}}var Mc=function(){function d(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return d}(),zp=function(){function d(h,S,D,U,W,J,ae,me,ge){this.aiDataContract={ver:1,metrics:1,properties:0};var Ze=this;Ze.ver=2;var Mt=new Mc;Mt[_l]=U>0?U:void 0,Mt.max=isNaN(J)||J===null?void 0:J,Mt.min=isNaN(W)||W===null?void 0:W,Mt[Es]=ea(h,S)||Pi,Mt.value=D,Mt.stdDev=isNaN(ae)||ae===null?void 0:ae,Ze.metrics=[Mt],Ze[Ts]=ki(h,me),Ze[qo]=Fu(h,ge)}return d.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",d.dataType="MetricData",d}(),Al="";function $v(d,h){return h===void 0&&(h=!1),d==null?h:d.toString()[Ss]()==="true"}function Do(d){(isNaN(d)||d<0)&&(d=0),d=Math.round(d);var h=Al+d%1e3,S=Al+Math.floor(d/1e3)%60,D=Al+Math.floor(d/(1e3*60))%60,U=Al+Math.floor(d/(1e3*60*60))%24,W=Math.floor(d/(1e3*60*60*24));return h=h[vt]===1?"00"+h:h[vt]===2?"0"+h:h,S=S[vt]<2?"0"+S:S,D=D[vt]<2?"0"+D:D,U=U[vt]<2?"0"+U:U,(W>0?W+".":Al)+U+":"+D+":"+S+"."+h}function Bv(d,h){var S=null;return oi(d,function(D){if(D.identifier===h)return S=D,-1}),S}function Md(d,h,S,D,U){return!U&&Le(d)&&(d==="Script error."||d==="Script error")}var Mm=function(){function d(h,S,D,U,W,J,ae){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var me=this;me.ver=2,me.id=Id(h,ae),me.url=ou(h,D),me[Es]=ea(h,S)||Pi,isNaN(U)||(me[wl]=Do(U)),me[Ts]=ki(h,W),me[qo]=Fu(h,J)}return d.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",d.dataType="PageviewData",d}(),Ps=function(){function d(h,S,D,U,W,J,ae,me,ge,Ze,Mt,nr){ge===void 0&&(ge="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var cr=this;cr.ver=2,cr.id=S,cr[wl]=Do(W),cr.success=J,cr.resultCode=ae+"",cr.type=ea(h,ge);var lt=Im(h,D,me,U);cr.data=ou(h,U)||lt.data,cr.target=ea(h,lt.target),Ze&&(cr.target="".concat(cr.target," | ").concat(Ze)),cr[Es]=ea(h,lt[Es]),cr[Ts]=ki(h,Mt),cr[qo]=Fu(h,nr)}return d.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",d.dataType="RemoteDependencyData",d}(),_h=function(){function d(h,S,D,U,W){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var J=this;J.ver=2,S=S||Pi,J[Eo]=Tf(h,S),J[Ts]=ki(h,U),J[qo]=Fu(h,W),D&&(J[Lp]=D)}return d.envelopeType="Microsoft.ApplicationInsights.{0}.Message",d.dataType="MessageData",d}(),Vu=function(){function d(h,S,D,U,W,J,ae){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var me=this;me.ver=2,me.url=ou(h,D),me[Es]=ea(h,S)||Pi,me[Ts]=ki(h,W),me[qo]=Fu(h,J),ae&&(me.domProcessing=ae.domProcessing,me[wl]=ae[wl],me.networkConnect=ae.networkConnect,me.perfTotal=ae.perfTotal,me[$i]=ae[$i],me.sentRequest=ae.sentRequest)}return d.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",d.dataType="PageviewPerformanceData",d}(),qv=function(){function d(h,S){this.aiDataContract={baseType:1,baseData:1},this.baseType=h,this.baseData=S}return d}(),Pl=ef({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),Fm=function(){function d(){}return d.getConfig=function(h,S,D,U){U===void 0&&(U=!1);var W;return D&&h[Nc]&&h[Nc][D]&&!it(h[Nc][D][S])?W=h[Nc][D][S]:W=h[S],it(W)?U:W},d}();function Jo(d){var h="ai."+d+".";return function(S){return h+S}}var ks=Jo("application"),jn=Jo("device"),xf=Jo("location"),kl=Jo("operation"),Fd=Jo("session"),ur=Jo("user"),ro=Jo("cloud"),no=Jo("internal"),Li=function(d){gm(h,d);function h(){return d.call(this)||this}return h}(ps({applicationVersion:ks("ver"),applicationBuild:ks("build"),applicationTypeId:ks("typeId"),applicationId:ks("applicationId"),applicationLayer:ks("layer"),deviceId:jn("id"),deviceIp:jn("ip"),deviceLanguage:jn("language"),deviceLocale:jn("locale"),deviceModel:jn("model"),deviceFriendlyName:jn("friendlyName"),deviceNetwork:jn("network"),deviceNetworkName:jn("networkName"),deviceOEMName:jn("oemName"),deviceOS:jn("os"),deviceOSVersion:jn("osVersion"),deviceRoleInstance:jn("roleInstance"),deviceRoleName:jn("roleName"),deviceScreenResolution:jn("screenResolution"),deviceType:jn("type"),deviceMachineName:jn("machineName"),deviceVMName:jn("vmName"),deviceBrowser:jn("browser"),deviceBrowserVersion:jn("browserVersion"),locationIp:xf("ip"),locationCountry:xf("country"),locationProvince:xf("province"),locationCity:xf("city"),operationId:kl("id"),operationName:kl("name"),operationParentId:kl("parentId"),operationRootId:kl("rootId"),operationSyntheticSource:kl("syntheticSource"),operationCorrelationVector:kl("correlationVector"),sessionId:Fd("id"),sessionIsFirst:Fd("isFirst"),sessionIsNew:Fd("isNew"),userAccountAcquisitionDate:ur("accountAcquisitionDate"),userAccountId:ur("accountId"),userAgent:ur("userAgent"),userId:ur("id"),userStoreRegion:ur("storeRegion"),userAuthUserId:ur("authUserId"),userAnonymousUserAcquisitionDate:ur("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:ur("authUserAcquisitionDate"),cloudName:ro("name"),cloudRole:ro("role"),cloudRoleVer:ro("roleVer"),cloudRoleInstance:ro("roleInstance"),cloudEnvironment:ro("environment"),cloudLocation:ro("location"),cloudDeploymentUnit:ro("deploymentUnit"),internalNodeName:no("nodeName"),internalSdkVersion:no("sdkVersion"),internalAgentVersion:no("agentVersion"),internalSnippet:no("snippet"),internalSdkSrc:no("sdkSrc")}));function Ll(d,h,S,D,U,W){var J;S=ea(D,S)||Pi,(it(d)||it(h)||it(S))&&kr("Input doesn't contain all required fields");var ae="";d[wd]&&(ae=d[wd],delete d[wd]);var me=(J={},J[Es]=S,J.time=sr(new Date),J.iKey=ae,J.ext=W||{},J.tags=[],J.data={},J.baseType=h,J.baseData=d,J);return it(U)||Wt(U,function(ge,Ze){me.data[ge]=Ze}),me}var yn=function(){function d(){}return d.create=Ll,d}(),Ml={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},lu=new Li;function Wp(d){var h=null;if(Ir(Event))h=new Event(d);else{var S=sa();S&&S.createEvent&&(h=S.createEvent("Event"),h.initEvent(d,!0,!0))}return h}function fu(d,h){Rp(d,null,null,h)}function Hv(d){var h=sa(),S=Wr(),D=!1,U=[],W=1;S&&!it(S.onLine)&&!S.onLine&&(W=2);var J=0,ae=nr(),me=_f(ka("OfflineListener"),d);try{if(Ze(Tn())&&(D=!0),h){var ge=h.body||h;ge.ononline&&Ze(ge)&&(D=!0)}}catch{D=!1}function Ze(At){var xn=!1;return At&&(xn=ml(At,"online",ir,me),xn&&ml(At,"offline",jt,me)),xn}function Mt(){return ae}function nr(){return!(J===2||W===2)}function cr(){var At=nr();ae!==At&&(ae=At,oi(U,function(xn){var Of={isOnline:ae,rState:W,uState:J};try{xn(Of)}catch{}}))}function lt(At){J=At,cr()}function ir(){W=1,cr()}function jt(){W=2,cr()}function xr(){var At=Tn();if(At&&D){if(fu(At,me),h){var xn=h.body||h;Tt(xn.ononline)||fu(xn,me)}D=!1}}function Or(At){return U[yf](At),{rm:function(){var xn=U.indexOf(At);if(xn>-1)return U.splice(xn,1)}}}return{isOnline:Mt,isListening:function(){return D},unload:xr,addListener:Or,setOnlineState:lt}}var Gu="AppInsightsPropertiesPlugin",Vv="AppInsightsChannelPlugin",Gv="ApplicationInsightsAnalytics";t.AnalyticsPluginIdentifier=Gv,t.BreezeChannelIdentifier=Vv,t.ConfigurationManager=Fm,t.ConnectionStringParser=Io,t.ContextTagKeys=Li,t.CtxTagKeys=lu,t.DEFAULT_BREEZE_ENDPOINT=xp,t.DEFAULT_BREEZE_PATH=yd,t.Data=qv,t.DisabledPropertyName=ui,t.DistributedTracingModes=Pv,t.Envelope=Rd,t.Event=Cl,t.EventPersistence=Dm,t.Exception=Lc,t.Extensions=Ml,t.HttpMethod=Lu,t.Metric=zp,t.PageView=Mm,t.PageViewPerformance=Vu,t.ProcessLegacy=Ai,t.PropertiesPluginIdentifier=Gu,t.RemoteDependencyData=Ps,t.RequestHeaders=Op,t.SampleRate=hl,t.SeverityLevel=Pl,t.TelemetryItemCreator=yn,t.ThrottleMgr=Om,t.Trace=_h,t.correlationIdCanIncludeCorrelationHeader=Nf,t.correlationIdGetCorrelationContext=Rs,t.correlationIdGetCorrelationContextValue=Rc,t.correlationIdGetPrefix=Dd,t.correlationIdSetPrefix=Cs,t.createDistributedTraceContextFromTrace=Nm,t.createDomEvent=Wp,t.createOfflineListener=Hv,t.createTelemetryItem=Ll,t.createTraceParent=bm,t.dataSanitizeException=Ds,t.dataSanitizeId=Id,t.dataSanitizeInput=Sl,t.dataSanitizeKey=Td,t.dataSanitizeKeyAndAddUniqueness=Ns,t.dataSanitizeMeasurements=Fu,t.dataSanitizeMessage=Tf,t.dataSanitizeProperties=ki,t.dataSanitizeString=ea,t.dataSanitizeUrl=ou,t.dateTimeUtilsDuration=hh,t.dateTimeUtilsNow=Tl,t.dsPadNumber=Uu,t.findAllScripts=Cp,t.findW3cTraceParent=Oi,t.formatTraceParent=bc,t.getExtensionByName=Bv,t.isBeaconApiSupported=Lo,t.isCrossOriginError=Md,t.isInternalApplicationInsightsEndpoint=jp,t.isSampledFlag=Zr,t.isValidSpanId=Dp,t.isValidTraceId=pl,t.isValidTraceParent=tu,t.msToTimeSpan=Do,t.parseConnectionString=Oc,t.parseTraceParent=Np,t.strNotSpecified=Pi,t.stringToBoolOrDefault=$v,t.urlGetAbsoluteUrl=If,t.urlGetCompleteUrl=mh,t.urlGetPathName=Av,t.urlParseFullHost=Up,t.urlParseHost=Nd,t.urlParseUrl=bl,t.utlCanUseLocalStorage=xc,t.utlCanUseSessionStorage=$p,t.utlDisableStorage=Cd,t.utlEnableStorage=zo,t.utlGetLocalStorage=Cm,t.utlGetSessionStorage=Bu,t.utlGetSessionStorageKeys=Wo,t.utlRemoveSessionStorage=xm,t.utlRemoveStorage=Yp,t.utlSetLocalStorage=Rm,t.utlSetSessionStorage=Dl,t.utlSetStoragePrefix=Cf})});var CS=an(O0=>{"use strict";Object.defineProperty(O0,"__esModule",{value:!0});O0.TelemetryUtil=void 0;var DS=class t{static applyReplacements(e,r){for(let n of Object.keys(e))for(let i of r)i.lookup.test(n)&&(i.replacementString!==void 0?e[n]=i.replacementString:delete e[n])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.8"}}static getInstance(){return t._instance||(t._instance=new t),t._instance}};O0.TelemetryUtil=DS});var tI=an((A0,eI)=>{(function(t,e){typeof A0=="object"&&typeof eI<"u"?e(A0):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(A0,function(t){"use strict";function e(s,u){return s||u}function r(s,u){return s[u]}var n=void 0,i=null,a="",c="function",g="object",_="prototype",b="__proto__",C="undefined",j="constructor",K="Symbol",te="_polyfill",z="length",G="name",ne="call",le="toString",Te=e(Object),Me=r(Te,_),Se=e(String),ke=r(Se,_),et=e(Math),ot=e(Array),Dt=r(ot,_),qt=r(Dt,"slice");function lr(s,u){try{return{v:s.apply(this,u)}}catch(f){return{e:f}}}function ln(s,u){var f=lr(s);return f.e?u:f.v}var Ti;function pi(s){return function(u){return typeof u===s}}function Tt(s){var u="[object "+s+"]";return function(f){return!!(f&&fn(f)===u)}}function fn(s){return Me[le].call(s)}function it(s){return typeof s===C||s===C}function lo(s){return!Cr(s)}function Le(s){return s===i||it(s)}function Ir(s){return s===i||!Cr(s)}function Cr(s){return!!s||s!==n}function _t(s){return!Ti&&(Ti=["string","number","boolean",C,"symbol","bigint"]),s!==g&&Ti.indexOf(s)!==-1}var dn=pi("string"),st=pi(c);function Jn(s){return!s&&Le(s)?!1:!!s&&typeof s===g}var at=r(ot,"isArray"),yu=Tt("Date"),Wt=pi("number"),Ya=pi("boolean"),Gt=Tt("Error");function or(s){return!!(s&&s.then&&st(s.then))}function Ii(s){return!(!s||ln(function(){return!(s&&0+s)},!s))}var fr=r(Te,"getOwnPropertyDescriptor");function Ni(s,u){return!!s&&Me.hasOwnProperty[ne](s,u)}var Pr=e(r(Te,"hasOwn"),Un);function Un(s,u){return Ni(s,u)||!!fr(s,u)}function Ct(s,u,f){if(s&&Jn(s)){for(var m in s)if(Pr(s,m)&&u[ne](f||s,m,s[m])===-1)break}}var kr={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Je(s){var u={};if(u[kr.c]=!0,u[kr.e]=!0,s.l){u.get=function(){return s.l.v};var f=fr(s.l,"v");f&&f.set&&(u.set=function(m){s.l.v=m})}return Ct(s,function(m,E){u[kr[m]]=lo(E)?u[kr[m]]:E}),u}var Cn=r(Te,"defineProperty");function $r(s,u,f){return Cn(s,u,Je(f))}function zr(s,u,f,m,E){var N={};return Ct(s,function(A,F){Ea(N,A,u?F:A,E),Ea(N,F,f?F:A,E)}),m?m(N):N}function Ea(s,u,f,m){Cn(s,u,{value:f,enumerable:!0,writable:!!m})}var Mi=e(Se),Lr="[object Error]";function er(s,u){var f=a,m=Me[le][ne](s);m===Lr&&(s={stack:Mi(s.stack),message:Mi(s.message),name:Mi(s.name)});try{f=JSON.stringify(s,i,u?typeof u=="number"?u:4:n),f=(f?f.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||Mi(s)}catch(E){f=" - "+er(E,u)}return m+": "+f}function hr(s){throw new Error(s)}function rn(s){throw new TypeError(s)}var Jf=r(Te,"freeze");function Zn(s){return s}function Zf(s){return s[b]||i}var wu=r(Te,"assign"),En=r(Te,"keys");function ns(s){return Jf&&Ct(s,function(u,f){(at(f)||Jn(f))&&ns(f)}),zt(s)}var zt=e(Jf,Zn),Fi=e(r(Te,"getPrototypeOf"),Zf);function $a(s){return zr(s,1,0,zt)}function is(s){return zr(s,0,0,zt)}function Ta(s){var u={};return Ct(s,function(f,m){Ea(u,f,m[1]),Ea(u,m[0],m[1])}),zt(u)}function Xf(s){return Ta(s)}var ec=is({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Ki="__tsUtils$gblCfg",Ia;function Di(){var s;return typeof globalThis!==C&&(s=globalThis),!s&&typeof self!==C&&(s=self),!s&&typeof window!==C&&(s=window),!s&&typeof global!==C&&(s=global),s}function as(){if(!Ia){var s=lr(Di).v||{};Ia=s[Ki]=s[Ki]||{}}return Ia}var Bs=ii;function ii(s,u,f){var m=u?u[s]:i;return function(E){var N=(E?E[s]:i)||m;if(N||f){var A=arguments;return(N||f).apply(E,N?qt[ne](A,1):A)}rn('"'+Mi(s)+'" not defined for '+er(E))}}function tc(s){return function(u){return u[s]}}var qs=r(et,"max"),Na=Bs("slice",ke),Xn=Bs("substring",ke),Zc=ii("substr",ke,Hs);function Hs(s,u,f){return Le(s)&&rn("Invalid "+er(s)),f<0?a:(u=u||0,u<0&&(u=qs(u+s[z],0)),it(f)?Na(s,u):Na(s,u,u+f))}function ai(s,u){return Xn(s,0,u)}var sa="_urid",dr;function Tn(){if(!dr){var s=as();dr=s.gblSym=s.gblSym||{k:{},s:{}}}return dr}var Da;function Wr(s){var u={description:Mi(s),toString:function(){return K+"("+s+")"}};return u[te]=!0,u}function vi(s){var u=Tn();if(!Pr(u.k,s)){var f=Wr(s),m=En(u.s).length;f[sa]=function(){return m+"_"+f[le]()},u.k[s]=f,u.s[f[sa]()]=Mi(s)}return u.k[s]}function Ba(s){!Da&&(Da={});var u,f=ec[s];return f&&(u=Da[f]=Da[f]||Wr(K+"."+f)),u}var Kr;function ua(){Kr=as()}function Su(s){var u={};return!Kr&&ua(),u.b=Kr.lzy,Cn(u,"v",{configurable:!0,get:function(){var f=s();return Kr.lzy||Cn(u,"v",{value:f}),u.b=Kr.lzy,f}}),u}function ca(s){return Cn({toJSON:function(){return s}},"v",{value:s})}var hn="window",oi;function rc(s,u){var f;return function(){return!Kr&&ua(),(!f||Kr.lzy)&&(f=ca(lr(s,u).v)),f.v}}function Ca(s){return!Kr&&ua(),(!oi||s===!1||Kr.lzy)&&(oi=ca(lr(Di).v||i)),oi.v}function Rr(s,u){var f;if(!oi||u===!1?f=Ca(u):f=oi.v,f&&f[s])return f[s];if(s===hn)try{return window}catch{}return i}function Ci(){return!!Qf()}var Qf=rc(Rr,["document"]);function Ui(){return!!os()}var os=rc(Rr,[hn]);function Xc(){return!!ss()}var ss=rc(Rr,["navigator"]),ed=rc(function(){return!!lr(function(){return process&&(process.versions||{}).node}).v}),pn,Zl;function la(){return pn=ca(lr(Rr,[K]).v),pn}function up(s){var u=(Kr.lzy?0:pn)||la();return u.v?u.v[s]:n}function si(){return!!yv()}function yv(){return!Kr&&ua(),((Kr.lzy?0:pn)||la()).v}function Ra(s,u){var f=ec[s];!Kr&&ua();var m=(Kr.lzy?0:pn)||la();return m.v?m.v[f||s]:u?n:Ba(s)}function Xl(s,u){!Kr&&ua();var f=(Kr.lzy?0:pn)||la();return f.v?f.v(s):u?i:Wr(s)}function fo(s){return!Kr&&ua(),Zl=(Kr.lzy?0:Zl)||ca(lr(up,["for"]).v),(Zl.v||vi)(s)}function td(s){return!!s&&st(s.next)}function Sr(s){return!Ir(s)&&st(s[Ra(3)])}var us;function rd(s,u,f){if(s&&(td(s)||(!us&&(us=ca(Ra(3))),s=s[us.v]?s[us.v]():i),td(s))){var m=n,E=n;try{for(var N=0;!(E=s.next()).done&&u[ne](f||s,E.value,N,s)!==-1;)N++}catch(A){m={e:A},s.throw&&(E=i,s.throw(m))}finally{try{E&&!E.done&&s.return&&s.return(E)}finally{if(m)throw m.e}}}}function Ji(s,u,f){return s.apply(u,f)}function Qc(s,u){return!it(u)&&s&&(at(u)?Ji(s.push,s,u):td(u)||Sr(u)?rd(u,function(f){s.push(f)}):s.push(u)),s}function Lt(s,u,f){if(s)for(var m=s[z]>>>0,E=0;E<m&&!(E in s&&u[ne](f||s,s[E],E,s)===-1);E++);}var xa=Bs("indexOf",Dt),nc=Bs("map",Dt);function Ql(s,u,f){return((s?s.slice:i)||qt).apply(s,qt[ne](arguments,1))}var mm=Bs("reduce",Dt),qa=e(r(Te,"create"),ef);function ef(s){if(!s)return{};var u=typeof s;u!==g&&u!==c&&rn("Prototype must be an Object or function: "+er(s));function f(){}return f[_]=s,new f}var cp;function bu(s,u){var f=Te.setPrototypeOf||function(m,E){var N;!cp&&(cp=ca((N={},N[b]=[],N instanceof Array))),cp.v?m[b]=E:Ct(E,function(A,F){return m[A]=F})};return f(s,u)}function Ha(s,u,f){lr($r,[u,G,{v:s,c:!0,e:!1}]),u=bu(u,f);function m(){this[j]=u,lr($r,[this,G,{v:s,c:!0,e:!1}])}return u[_]=f===i?qa(f):(m[_]=f[_],new m),u}function dt(s,u){u&&(s[G]=u)}function Ri(s,u,f){var m=f||Error,E=m[_][G],N=Error.captureStackTrace;return Ha(s,function(){var A=this,F=arguments;try{lr(dt,[m,s]);var $=Ji(m,A,qt[ne](F))||A;if($!==A){var H=Fi(A);H!==Fi($)&&bu($,H)}return N&&N($,A[j]),u&&u($,F),$}finally{lr(dt,[m,E])}},m)}function Eu(){return(Date.now||Vs)()}function Vs(){return new Date().getTime()}function lp(s){return function(f){return Le(f)&&rn("strTrim called ["+er(f)+"]"),f&&f.replace&&(f=f.replace(s,a)),f}}var fp=lp(/^\s+|(?=\s)\s+$/g),In=ii("trim",ke,fp),Oa,dp,Va;function fa(s){if(!s||typeof s!==g)return!1;Va||(Va=Ui()?os():!0);var u=!1;if(s!==Va){dp||(Oa=Function[_][le],dp=Oa[ne](Te));try{var f=Fi(s);u=!f,u||(Ni(f,j)&&(f=f[j]),u=!!(f&&typeof f===c&&Oa[ne](f)===dp))}catch{}}return u}function dh(s){return s.value&&po(s),!0}var hm=[Zi,po,rf,tf];function wv(s,u,f,m){var E;return Lt(s,function(N){if(N.k===u)return E=N,-1}),E||(E={k:u,v:u},s.push(E),m(E)),E.v}function Tu(s,u,f,m){var E=f.handler,N=f.path?m?f.path.concat(m):f.path:[],A={handler:f.handler,src:f.src,path:N},F=typeof u,$=!1,H=u===i;H||(u&&F===g?$=fa(u):H=_t(F));var X={type:F,isPrim:H,isPlain:$,value:u,result:u,path:N,origin:f.src,copy:function(fe,pe){return Tu(s,fe,pe?A:f,pe)},copyTo:function(fe,pe){return Sv(s,fe,pe,A)}};return X.isPrim?E&&E[ne](f,X)?X.result:u:wv(s,u,N,function(fe){$r(X,"result",{g:function(){return fe.v},s:function(ue){fe.v=ue}});for(var pe=0,ve=E;!(ve||(pe<hm.length?hm[pe++]:dh))[ne](f,X);)ve=i})}function Sv(s,u,f,m){if(!Le(f))for(var E in f)u[E]=Tu(s,f[E],m,E);return u}function Qh(s,u,f){var m={handler:f,src:u,path:[]};return Sv([],s,u,m)}function pp(s,u){var f={handler:u,src:s};return Tu([],s,f)}function Zi(s){var u=s.value;if(at(u)){var f=s.result=[];return f.length=u.length,s.copyTo(f,u),!0}return!1}function tf(s){var u=s.value;return yu(u)?(s.result=new Date(u.getTime()),!0):!1}function rf(s){return s.type===c}function po(s){var u=s.value;if(u&&s.isPlain){var f=s.result={};return s.copyTo(f,u),!0}return!1}function Aa(s,u){return Lt(u,function(f){Qh(s,f)}),s}function Iu(s,u,f,m,E,N,A){return Aa(pp(s)||{},qt[ne](arguments))}var bv=tc(z),Ga=ii("endsWith",ke,vp);function vp(s,u,f){dn(s)||rn("'"+er(s)+"' is not a string");var m=dn(u)?u:Mi(u),E=!it(f)&&f<s[z]?f:s[z];return Xn(s,E-m[z],E)===m}var Nu=Bs("indexOf",ke),el="ref",nf="unref",nd="hasRef",mp="enabled";function Ev(s,u,f){var m=!0,E=s?u(i):i,N;function A(){return m=!1,E&&E[nf]&&E[nf](),N}function F(){E&&f(E),E=i}function $(){return E=u(E),m||A(),N}function H(X){!X&&E&&F(),X&&!E&&$()}return N={cancel:F,refresh:$},N[nd]=function(){return E&&E[nd]?E[nd]():m},N[el]=function(){return m=!0,E&&E[el]&&E[el](),N},N[nf]=A,N=Cn(N,mp,{get:function(){return!!E},set:H}),{h:N,dn:function(){E=i}}}function Tv(s,u,f){var m=at(u),E=m?u.length:0,N=(E>0?u[0]:m?n:u)||setTimeout,A=(E>1?u[1]:n)||clearTimeout,F=f[0];f[0]=function(){$.dn(),Ji(F,n,qt[ne](arguments))};var $=Ev(s,function(H){if(H){if(H.refresh)return H.refresh(),H;Ji(A,n,[H])}return Ji(N,n,f)},function(H){Ji(A,n,[H])});return $.h}function Du(s,u){return Tv(!0,n,qt[ne](arguments))}function hp(s,u){return Tv(!1,n,qt[ne](arguments))}var Gs,ic="constructor",za="prototype",af="function",id="_dynInstFuncs",tl="_isDynProxy",vo="_dynClass",gm="_dynCls$",cs="_dynInstChk",xo=cs,mo="_dfOpts",Cu="_unknown_",ad="__proto__",rl="_dyn"+ad,nl="__dynProto$Gbl",ac="_dynInstProto",od="useBaseInst",of="setInstFuncs",sd=Object,oc=sd.getPrototypeOf,ho=sd.getOwnPropertyNames,il=Ca(),Oo=il[nl]||(il[nl]={o:(Gs={},Gs[of]=!0,Gs[od]=!0,Gs),n:1e3});function Pa(s){return s&&(s===sd[za]||s===Array[za])}function ls(s){return Pa(s)||s===Function[za]}function nn(s){var u;if(s){if(oc)return oc(s);var f=s[ad]||s[za]||(s[ic]?s[ic][za]:null);u=s[rl]||f,Ni(s,rl)||(delete s[ac],u=s[rl]=s[ac]||s[rl],s[ac]=f)}return u}function zs(s,u){var f=[];if(ho)f=ho(s);else for(var m in s)typeof m=="string"&&Ni(s,m)&&f.push(m);if(f&&f.length>0)for(var E=0;E<f.length;E++)u(f[E])}function go(s,u,f){return u!==ic&&typeof s[u]===af&&(f||Ni(s,u))&&u!==ad&&u!==za}function al(s){rn("DynamicProto: "+s)}function ol(s){var u=qa(null);return zs(s,function(f){!u[f]&&go(s,f,!1)&&(u[f]=s[f])}),u}function fs(s,u){for(var f=s.length-1;f>=0;f--)if(s[f]===u)return!0;return!1}function sf(s,u,f,m){function E($,H,X){var fe=H[X];if(fe[tl]&&m){var pe=$[id]||{};pe[xo]!==!1&&(fe=(pe[H[vo]]||{})[X]||fe)}return function(){return fe.apply($,arguments)}}var N=qa(null);zs(f,function($){N[$]=E(u,f,$)});for(var A=nn(s),F=[];A&&!ls(A)&&!fs(F,A);)zs(A,function($){!N[$]&&go(A,$,!oc)&&(N[$]=E(u,A,$))}),F.push(A),A=nn(A);return N}function ds(s,u,f,m){var E=null;if(s&&Ni(f,vo)){var N=s[id]||qa(null);if(E=(N[f[vo]]||qa(null))[u],E||al("Missing ["+u+"] "+af),!E[cs]&&N[xo]!==!1){for(var A=!Ni(s,u),F=nn(s),$=[];A&&F&&!ls(F)&&!fs($,F);){var H=F[u];if(H){A=H===m;break}$.push(F),F=nn(F)}try{A&&(s[u]=E),E[cs]=1}catch{N[xo]=!1}}}return E}function Ru(s,u,f){var m=u[s];return m===f&&(m=nn(u)[s]),typeof m!==af&&al("["+s+"] is not a "+af),m}function da(s,u,f,m,E){function N($,H){var X=function(){var fe=ds(this,H,$,X)||Ru(H,$,X);return fe.apply(this,arguments)};return X[tl]=1,X}if(!Pa(s)){var A=f[id]=f[id]||qa(null);if(!Pa(A)){var F=A[u]=A[u]||qa(null);A[xo]!==!1&&(A[xo]=!!E),Pa(F)||zs(f,function($){go(f,$,!1)&&f[$]!==m[$]&&(F[$]=f[$],delete f[$],(!Ni(s,$)||s[$]&&!s[$][tl])&&(s[$]=N(s,$)))})}}}function gp(s,u){if(oc){for(var f=[],m=nn(u);m&&!ls(m)&&!fs(f,m);){if(m===s)return!0;f.push(m),m=nn(m)}return!1}return!0}function sc(s,u){return Ni(s,za)?s.name||u||Cu:((s||{})[ic]||{}).name||u||Cu}function Xi(s,u,f,m){Ni(s,za)||al("theClass is an invalid class definition.");var E=s[za];gp(E,u)||al("["+sc(s)+"] not in hierarchy of ["+sc(u)+"]");var N=null;Ni(E,vo)?N=E[vo]:(N=gm+sc(s,"_")+"$"+Oo.n,Oo.n++,E[vo]=N);var A=Xi[mo],F=!!A[od];F&&m&&m[od]!==void 0&&(F=!!m[od]);var $=ol(u),H=sf(E,u,$,F);f(u,H);var X=!!oc&&!!A[of];X&&m&&(X=!!m[of]),da(E,N,u,$,X!==!1)}Xi[mo]=Oo.o;var ud="function",_p="object",uf="undefined",cf="prototype",yp=Object,_m=yp[cf];(Ca()||{}).Symbol,(Ca()||{}).Reflect;var uc="hasOwnProperty",Ao=function(s){for(var u,f=1,m=arguments.length;f<m;f++){u=arguments[f];for(var E in u)_m[uc].call(u,E)&&(s[E]=u[E])}return s},_o=wu||Ao,Nn=function(s,u){return Nn=yp.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,m){f.__proto__=m}||function(f,m){for(var E in m)m[uc](E)&&(f[E]=m[E])},Nn(s,u)};function lf(s,u){typeof u!==ud&&u!==null&&rn("Class extends value "+String(u)+" is not a constructor or null"),Nn(s,u);function f(){this.constructor=s}s[cf]=u===null?qa(u):(f[cf]=u[cf],new f)}function cc(s,u){for(var f=0,m=u.length,E=s.length;f<m;f++,E++)s[E]=u[f];return s}var lc=$a,wp=Xf,Wa=lc({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),xu="toLowerCase",Ws="blkVal",sr="length",Po="rdOnly",ps="notify",Ka="warnToConsole",cd="throwInternal",Ja="setDf",Ou="watch",gn="logger",pa="apply",Hr="push",pt="splice",fc="hdlr",ko="cancel",Ks="initialize",yo="identifier",Au="removeNotificationListener",Za="addNotificationListener",Jr="isInitialized",Lo="instrumentationKey",Vr="INACTIVE",Mo="value",ld="getNotifyMgr",Fo="getPlugin",Vn="name",wo="iKey",vs="time",ji="processNext",Qi="getProcessTelContext",sl="pollInternalLogs",dc="enabled",fd="stopPollingInternalLogs",Js="unload",Uo="onComplete",jo="version",pc="loggingLevelConsole",Yo="createNew",Qn="teardown",dd="messageId",vc="message",Zs="isAsync",ka="diagLog",ms="_doTeardown",Xs="update",Xa="getNext",ul="setNextPlugin",Pu="protocol",xi="userAgent",ku="split",Qs="nodeType",Qa="replace",mc="logInternalMessage",_n="type",mi="handler",eo="status",hc="getResponseHeader",hs="getAllResponseHeaders",Sp="isChildEvt",La="data",cl="getCtx",Yi="setCtx",pd="complete",va="itemsReceived",gs="urlString",_s="sendPOST",bp="headers",ff="timeout",vd="setRequestHeader",df="traceId",$o="spanId",ma="traceFlags",ll;function ym(s,u){ll||(ll=Ri("AggregationError",function(m,E){E[sr]>1&&(m.errors=E[1])}));var f=s||"One or more errors occurred.";throw Lt(u,function(m,E){f+=`
`.concat(E," > ").concat(er(m))}),new ll(f,u||[])}var gc="Promise",_c="rejected";function ys(s,u){return pf(s,function(f){return u?u({status:"fulfilled",rejected:!1,value:f}):f},function(f){return u?u({status:_c,rejected:!0,reason:f}):f})}function pf(s,u,f,m){var E=s;try{if(or(s))(u||f)&&(E=s.then(u,f));else try{u&&(E=u(s))}catch(N){if(f)E=f(N);else throw N}}finally{m&&ph(E,m)}return E}function ph(s,u){var f=s;return u&&(or(s)?s.finally?f=s.finally(u):f=s.then(function(m){return u(),m},function(m){throw u(),m}):u()),f}var Ep=["pending","resolving","resolved",_c],vf="dispatchEvent",yc;function Iv(s){var u;return s&&s.createEvent&&(u=s.createEvent("Event")),!!u&&u.initEvent}function wm(s,u,f,m){var E=Qf();!yc&&(yc=ca(!!lr(Iv,[E]).v));var N=yc.v?E.createEvent("Event"):m?new Event(u):{};if(f&&f(N),yc.v&&N.initEvent(u,!1,!0),N&&s[vf])s[vf](N);else{var A=s["on"+u];if(A)A(N);else{var F=Rr("console");F&&(F.error||F.log)(u,er(N))}}}var wc="unhandledRejection",Sm=wc.toLowerCase(),mf=10,Tp;function So(s){return st(s)?s.toString():er(s)}function Nv(s,u,f){var m=Ql(arguments,3),E=0,N=!1,A,F=[],$=!1,H=null,X;function fe(Ke,ft){try{$=!0,H&&H.cancel(),H=null;var Tr=s(function(un,cn){F.push(function(){try{var Ln=E===2?Ke:ft,Jt=it(Ln)?A:st(Ln)?Ln(A):Ln;or(Jt)?Jt.then(un,cn):Ln?un(Jt):E===3?cn(Jt):un(Jt)}catch($t){cn($t)}}),N&&Pe()},m);return Tr}finally{}}function pe(Ke){return fe(void 0,Ke)}function ve(Ke){var ft=Ke,Tr=Ke;return st(Ke)&&(ft=function(un){return Ke&&Ke(),un},Tr=function(un){throw Ke&&Ke(),un}),fe(ft,Tr)}function ue(){return Ep[E]}function Pe(){if(F.length>0){var Ke=F.slice();F=[],$=!0,H&&H.cancel(),H=null,u(Ke)}}function ye(Ke,ft){return function(Tr){if(E===ft){if(Ke===2&&or(Tr)){E=1,Tr.then(ye(2,1),ye(3,1));return}E=Ke,N=!0,A=Tr,Pe(),!$&&Ke===3&&!H&&(H=Du(Ue,mf))}}}function Ue(){if(!$)if($=!0,ed())process.emit(wc,A,X);else{var Ke=os()||Ca();!Tp&&(Tp=ca(lr(Rr,[gc+"RejectionEvent"]).v)),wm(Ke,Sm,function(ft){return $r(ft,"promise",{g:function(){return X}}),ft.reason=A,ft},!!Tp.v)}}X={then:fe,catch:pe,finally:ve},Cn(X,"state",{get:ue}),si()&&(X[Ra(11)]="IPromise");function Ye(){return"IPromise "+ue()+(N?" - "+So(A):"")}return X.toString=Ye,function(){st(f)||rn(gc+": executor is not a function - "+So(f));var ft=ye(3,0);try{f.call(X,ye(2,0),ft)}catch(Tr){ft(Tr)}}(),X}function vh(s){return function(u){var f=Ql(arguments,1);return s(function(m,E){try{var N=[],A=1;rd(u,function(F,$){F&&(A++,pf(F,function(H){N[$]=H,--A===0&&m(N)},E))}),A--,A===0&&m(N)}catch(F){E(F)}},f)}}function md(s){return ca(function(u){var f=Ql(arguments,1);return s(function(m,E){var N=[],A=1;function F($,H){A++,ys($,function(X){X.rejected?N[H]={status:_c,reason:X.reason}:N[H]={status:"fulfilled",value:X.value},--A===0&&m(N)})}try{at(u)?Lt(u,F):Sr(u)?rd(u,F):rn("Input is not an iterable"),A--,A===0&&m(N)}catch($){E($)}},f)})}function Dv(s){Lt(s,function(u){try{u()}catch{}})}function Ip(s){var u=Wt(s)?s:0;return function(f){Du(function(){Dv(f)},u)}}function fl(s,u){return Nv(fl,Ip(u),s,u)}var hd;function Sc(s,u){!hd&&(hd=ca(lr(Rr,[gc]).v||null));var f=hd.v;if(!f)return fl(s);st(s)||rn(gc+": executor is not a function - "+er(s));var m=0;function E(){return Ep[m]}var N=new f(function(A,F){function $(X){m=2,A(X)}function H(X){m=3,F(X)}s($,H)});return Cn(N,"state",{get:E}),N}var eu;function dl(s){return Nv(dl,Dv,s)}function bm(s,u){return!eu&&(eu=md(dl)),eu.v(s,u)}var Np;function pl(s,u){return!Np&&(Np=ca(Sc)),Np.v.call(this,s,u)}var Dp=vh(pl),tu=void 0,Zr="",bc="channels",Oi="core",Cp="createPerfMgr",gd="disabled",vl="extensionConfig",Ec="extensions",ha="processTelemetry",_d="priority",hi="eventsSent",gr="eventsDiscarded",ru="eventsSendRequest",Rn="perfEvent",ws="offlineEventsStored",Tc="offlineBatchSent",Ic="offlineBatchDrop",nu="getPerfMgr",bo="domain",hf="path",Cv="Not dynamic - ",gf=/-([a-z])/g,Rv=/([^\w\d_$])/g,_f=/^(\d+[\w\d_$])/;function ml(s){return!Le(s)}function Rp(s){var u=s;return u&&dn(u)&&(u=u[Qa](gf,function(f,m){return m.toUpperCase()}),u=u[Qa](Rv,"_"),u=u[Qa](_f,function(f,m){return"_"+m})),u}function ui(s,u){return s&&u?Nu(s,u)!==-1:!1}function hl(s){return s&&s.toISOString()||""}function Ai(s){return Gt(s)?s[Vn]:Zr}function Lu(s,u,f,m,E){var N=f;return s&&(N=s[u],N!==f&&(!E||E(N))&&(!m||m(f))&&(N=f,s[u]=N)),N}function xp(s,u,f){var m;return s?(m=s[u],!m&&Le(m)&&(m=it(f)?{}:f,s[u]=m)):m=it(f)?{}:f,m}function yd(s,u){var f=null,m=null;return st(s)?f=s:m=s,function(){var E=arguments;if(f&&(m=f()),m)return m[u][pa](m,E)}}function Pi(s,u,f,m,E){s&&u&&f&&(E!==!1||it(s[u]))&&(s[u]=yd(f,m))}function wd(s,u,f,m){return s&&u&&Jn(s)&&at(f)&&Lt(f,function(E){dn(E)&&Pi(s,E,u,E,m)}),s}function Op(s){return function(){function u(){var f=this;s&&Ct(s,function(m,E){f[m]=E})}return u}()}function iu(s){return s&&wu&&(s=yp(wu({},s))),s}function vt(s,u,f,m,E,N){var A=arguments,F=A[0]||{},$=A[sr],H=!1,X=1;for($>0&&Ya(F)&&(H=F,F=A[X]||{},X++),Jn(F)||(F={});X<$;X++){var fe=A[X],pe=at(fe),ve=Jn(fe);for(var ue in fe){var Pe=pe&&ue in fe||ve&&Pr(fe,ue);if(Pe){var ye=fe[ue],Ue=void 0;if(H&&ye&&((Ue=at(ye))||fa(ye))){var Ye=F[ue];Ue?at(Ye)||(Ye=[]):fa(Ye)||(Ye={}),ye=vt(H,Ye,ye)}ye!==void 0&&(F[ue]=ye)}}}return F}function Ss(s){try{return s.responseText}catch{}return null}function bs(s,u){return s?"XDomainRequest,Response:"+Ss(s)||"":u}function to(s,u){return s?"XMLHttpRequest,Status:"+s[eo]+",Response:"+Ss(s)||s.response||"":u}function yf(s,u){return u&&(Wt(u)?s=[u].concat(s):at(u)&&(s=u.concat(s))),s}var gl="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Es="withCredentials",Eo="timeout";function _l(s,u,f,m,E,N){m===void 0&&(m=!1),E===void 0&&(E=!1);function A($,H,X){try{$[H]=X}catch{}}var F=new XMLHttpRequest;return m&&A(F,gl,m),f&&A(F,Es,f),F.open(s,u,!E),f&&A(F,Es,f),!E&&N&&A(F,Eo,N),F}function Sd(s){var u={};if(dn(s)){var f=In(s)[ku](/[\r\n]+/);Lt(f,function(m){if(m){var E=m.indexOf(": ");if(E!==-1){var N=In(m.substring(0,E))[xu](),A=In(m.substring(E+1));u[N]=A}else u[In(m)]=1}})}return u}function au(s,u,f){if(!s[f]&&u&&u[hc]){var m=u[hc](f);m&&(s[f]=In(m))}return s}var wf="kill-duration",yl="kill-duration-seconds",Sf="time-delta-millis";function Ap(s,u){var f={};return s[hs]?f=Sd(s[hs]()):u&&(f=au(f,s,Sf),f=au(f,s,wf),f=au(f,s,yl)),f}var Pp="documentMode",xv="location",kp="console",Mu="JSON",Nc="crypto",bf="msCrypto",Bo="msie",Ts="trident/",qo="XMLHttpRequest",Ho=null,Dc=null,Lp=!1,Cc=null,Mp=null;function Fp(s,u){var f=!1;if(s){try{if(f=u in s,!f){var m=s[cf];m&&(f=u in m)}}catch{}if(!f)try{var E=new s;f=!it(E[u])}catch{}}return f}function bd(s){if(s&&Lp){var u=Rr("__mockLocation");if(u)return u}return typeof location===_p&&location?location:Rr(xv)}function Is(){return typeof console!==uf?console:Rr(kp)}function Vo(){return!!(typeof JSON===_p&&JSON||Rr(Mu)!==null)}function Go(){return Vo()?JSON||Rr(Mu):null}function Ed(){return Rr(Nc)}function Ef(){return Rr(bf)}function wl(){var s=ss();if(s&&(s[xi]!==Dc||Ho===null)){Dc=s[xi];var u=(Dc||Zr)[xu]();Ho=ui(u,Bo)||ui(u,Ts)}return Ho}function $i(s){if(s===void 0&&(s=null),!s){var u=ss()||{};s=u?(u.userAgent||Zr)[xu]():Zr}var f=(s||Zr)[xu]();if(ui(f,Bo)){var m=Qf()||{};return Math.max(parseInt(f[ku](Bo)[1]),m[Pp]||0)}else if(ui(f,Ts)){var E=parseInt(f[ku](Ts)[1]);if(E)return E+4}return null}function Ns(s){return(Mp===null||s===!1)&&(Mp=Xc()&&!!ss().sendBeacon),Mp}function Td(s){var u=!1;try{u=!!Rr("fetch");var f=Rr("Request");u&&s&&f&&(u=Fp(f,"keepalive"))}catch{}return u}function ea(){return Cc===null&&(Cc=typeof XDomainRequest!==uf,Cc&&ou()&&(Cc=Cc&&!Fp(Rr(qo),"withCredentials"))),Cc}function ou(){var s=!1;try{var u=Rr(qo);s=!!u}catch{}return s}var Tf=4294967296,Ds=4294967295,ki=123456789,Fu=987654321,Id=!1,Sl=ki,Uu=Fu;function Em(s){s<0&&(s>>>=0),Sl=ki+s&Ds,Uu=Fu-s&Ds,Id=!0}function Ov(){try{var s=Eu()&2147483647;Em((Math.random()*Tf^s)+s)}catch{}}function Tm(s){var u=0,f=Ed()||Ef();return f&&f.getRandomValues&&(u=f.getRandomValues(new Uint32Array(1))[0]&Ds),u===0&&wl()&&(Id||Ov(),u=bl()&Ds),u===0&&(u=Math.floor(Tf*Math.random()|0)),s||(u>>>=0),u}function bl(s){Uu=36969*(Uu&65535)+(Uu>>16)&Ds,Sl=18e3*(Sl&65535)+(Sl>>16)&Ds;var u=(Uu<<16)+(Sl&65535)>>>0&Ds|0;return s||(u>>>=0),u}function If(s){s===void 0&&(s=22);for(var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=Tm()>>>0,m=0,E=Zr;E[sr]<s;)m++,E+=u.charAt(f&63),f>>>=6,m===5&&(f=(Tm()<<2&4294967295|f&3)>>>0,m=0);return E}var Av="3.3.5",mh="."+If(6),Nd=0;function Up(s){return s[Qs]===1||s[Qs]===9||!+s[Qs]}function El(s,u){var f=u[s.id];if(!f){f={};try{Up(u)&&$r(u,s.id,{e:!1,v:f})}catch{}}return f}function ju(s,u){return u===void 0&&(u=!1),Rp(s+Nd+++(u?"."+Av:Zr)+mh)}function jp(s){var u={id:ju("_aiData-"+(s||Zr)+"."+Av),accept:function(f){return Up(f)},get:function(f,m,E,N){var A=f[u.id];return A?A[Rp(m)]:(N&&(A=El(u,f),A[Rp(m)]=E),E)},kill:function(f,m){if(f&&f[m])try{delete f[m]}catch{}}};return u}function Cs(s){return s&&Jn(s)&&(s.isVal||s.fb||Pr(s,"v")||Pr(s,"mrg")||Pr(s,"ref")||s.set)}function Dd(s,u,f){var m,E=f.dfVal||Cr;if(u&&f.fb){var N=f.fb;at(N)||(N=[N]);for(var A=0;A<N[sr];A++){var F=N[A],$=u[F];if(E($)?m=$:s&&($=s.cfg[F],E($)&&(m=$),s.set(s.cfg,Mi(F),$)),E(m))break}}return!E(m)&&E(f.v)&&(m=f.v),m}function Nf(s,u,f){var m=f;if(f&&Cs(f)&&(m=Dd(s,u,f)),m){Cs(m)&&(m=Nf(s,u,m));var E;at(m)?(E=[],E[sr]=m[sr]):fa(m)&&(E={}),E&&(Ct(m,function(N,A){A&&Cs(A)&&(A=Nf(s,u,A)),E[N]=A}),m=E)}return m}function Rs(s,u,f,m){var E,N,A,F=m,$,H,X,fe;Cs(F)?(E=F.isVal,N=F.set,X=F[Po],fe=F[Ws],$=F.mrg,H=F.ref,!H&&it(H)&&(H=!!$),A=Dd(s,u,F)):A=m,fe&&s[Ws](u,f);var pe,ve=!0,ue=u[f];(ue||!Le(ue))&&(pe=ue,ve=!1,E&&pe!==A&&!E(pe)&&(pe=A,ve=!0),N&&(pe=N(pe,A,u),ve=pe===A)),ve?A?pe=Nf(s,u,A):pe=A:(fa(pe)||at(A))&&$&&A&&(fa(A)||at(A))&&Ct(A,function(Pe,ye){Rs(s,pe,Pe,ye)}),s.set(u,f,pe),H&&s.ref(u,f),X&&s[Po](u,f)}var Rc=fo("[[ai_dynCfg_1]]"),Im=fo("[[ai_blkDynCfg_1]]"),Tl=fo("[[ai_frcDynCfg_1]]");function hh(s){if(s){var u;if(at(s)?(u=[],u[sr]=s[sr]):fa(s)&&(u={}),u)return Ct(s,function(f,m){u[f]=hh(m)}),u}return s}function Nm(s){if(s){var u=s[Rc]||s;if(u.cfg&&(u.cfg===s||u.cfg[Rc]===u))return u}return null}function Df(s){if(s&&(fa(s)||at(s)))try{s[Im]=!0}catch{}return s}function Pv(s,u,f){var m=!1;return f&&!s[u.blkVal]&&(m=f[Tl],!m&&!f[Im]&&(m=fa(f)||at(f))),m}function Dm(s){rn("InvalidAccess:"+s)}var Yu=["push","pop","shift","unshift","splice"],To=function(s,u,f,m){s&&s[cd](3,108,"".concat(f," [").concat(u,"] failed - ")+er(m))};function su(s,u,f){at(u)&&Lt(Yu,function(m){var E=u[m];u[m]=function(){for(var N=[],A=0;A<arguments.length;A++)N[A]=arguments[A];var F=E[pa](this,N);return Cf(s,u,f,"Patching"),F}})}function $u(s,u){var f=fr(s,u);return f&&f.get}function Il(s,u,f,m){var E={n:f,h:[],trk:function(H){H&&H.fn&&(xa(E.h,H)===-1&&E.h[Hr](H),s.trk(H,E))},clr:function(H){var X=xa(E.h,H);X!==-1&&E.h[pt](X,1)}},N=!0,A=!1;function F(){N&&(A=A||Pv(F,s,m),m&&!m[Rc]&&A&&(m=Cf(s,m,f,"Converting")),N=!1);var H=s.act;return H&&E.trk(H),m}F[s.prop]={chng:function(){s.add(E)}};function $(H){if(m!==H){F[s.ro]&&!s.upd&&Dm("["+f+"] is read-only:"+er(u)),N&&(A=A||Pv(F,s,m),N=!1);var X=A&&F[s.rf];if(A)if(X){Ct(m,function(pe){m[pe]=H?H[pe]:tu});try{Ct(H,function(pe,ve){Nl(s,m,pe,ve)}),H=m}catch(pe){To((s.hdlr||{})[gn],f,"Assigning",pe),A=!1}}else m&&m[Rc]&&Ct(m,function(pe){var ve=$u(m,pe);if(ve){var ue=ve[s.prop];ue&&ue.chng()}});if(H!==m){var fe=H&&Pv(F,s,H);!X&&fe&&(H=Cf(s,H,f,"Converting")),m=H,A=fe}s.add(E)}}$r(u,E.n,{g:F,s:$})}function Nl(s,u,f,m){if(u){var E=$u(u,f),N=E&&!!E[s.prop];N?u[f]=m:Il(s,u,f,m)}return u}function Cd(s,u,f,m){if(u){var E=$u(u,f),N=E&&!!E[s.prop],A=m&&m[0],F=m&&m[1],$=m&&m[2];if(!N){if($)try{Df(u)}catch(H){To((s.hdlr||{})[gn],f,"Blocking",H)}try{Nl(s,u,f,u[f]),E=$u(u,f)}catch(H){To((s.hdlr||{})[gn],f,"State",H)}}A&&(E[s.rf]=A),F&&(E[s.ro]=F),$&&(E[s.blkVal]=!0)}return u}function Cf(s,u,f,m){try{Ct(u,function(E,N){Nl(s,u,E,N)}),u[Rc]||(Cn(u,Rc,{get:function(){return s[fc]}}),su(s,u,f))}catch(E){To((s.hdlr||{})[gn],f,m,E)}return u}var zo="[[ai_",xc="]]";function Cm(s){var u,f=Xl(zo+"get"+s.uid+xc),m=Xl(zo+"ro"+s.uid+xc),E=Xl(zo+"rf"+s.uid+xc),N=Xl(zo+"blkVal"+s.uid+xc),A=Xl(zo+"dtl"+s.uid+xc),F=null,$=null,H;function X(ue,Pe){var ye=H.act;try{H.act=ue,ue&&ue[A]&&(Lt(ue[A],function(Ye){Ye.clr(ue)}),ue[A]=[]),Pe({cfg:s.cfg,set:s.set.bind(s),setDf:s[Ja].bind(s),ref:s.ref.bind(s),rdOnly:s[Po].bind(s)})}catch(Ye){var Ue=s[gn];throw Ue&&Ue[cd](1,107,er(Ye)),Ye}finally{H.act=ye||null}}function fe(){if(F){var ue=F;F=null,$&&$[ko](),$=null;var Pe=[];if(Lt(ue,function(ye){if(ye&&(ye[A]&&(Lt(ye[A],function(Ue){Ue.clr(ye)}),ye[A]=null),ye.fn))try{X(ye,ye.fn)}catch(Ue){Pe[Hr](Ue)}}),F)try{fe()}catch(ye){Pe[Hr](ye)}Pe[sr]>0&&ym("Watcher error(s): ",Pe)}}function pe(ue){if(ue&&ue.h[sr]>0){F||(F=[]),$||($=Du(function(){$=null,fe()},0));for(var Pe=0;Pe<ue.h[sr];Pe++){var ye=ue.h[Pe];ye&&xa(F,ye)===-1&&F[Hr](ye)}}}function ve(ue,Pe){if(ue){var ye=ue[A]=ue[A]||[];xa(ye,Pe)===-1&&ye[Hr](Pe)}}return H=(u={prop:f,ro:m,rf:E},u[Ws]=N,u[fc]=s,u.add=pe,u[ps]=fe,u.use=X,u.trk=ve,u),H}function Rm(s,u){var f={fn:u,rm:function(){f.fn=null,s=null,u=null}};return $r(f,"toJSON",{v:function(){return"WatcherHandler"+(f.fn?"":"[X]")}}),s.use(f,u),f}function Yp(s,u,f){var m,E=Nm(u);if(E)return E;var N=ju("dyncfg",!0),A=u&&f!==!1?u:hh(u),F;function $(){F[ps]()}function H(Ue,Ye,Ke){try{Ue=Nl(F,Ue,Ye,Ke)}catch(ft){To(s,Ye,"Setting value",ft)}return Ue[Ye]}function X(Ue){return Rm(F,Ue)}function fe(Ue,Ye){F.use(null,function(Ke){var ft=F.upd;try{it(Ye)||(F.upd=Ye),Ue(Ke)}finally{F.upd=ft}})}function pe(Ue,Ye){var Ke;return Cd(F,Ue,Ye,(Ke={},Ke[0]=!0,Ke))[Ye]}function ve(Ue,Ye){var Ke;return Cd(F,Ue,Ye,(Ke={},Ke[1]=!0,Ke))[Ye]}function ue(Ue,Ye){var Ke;return Cd(F,Ue,Ye,(Ke={},Ke[2]=!0,Ke))[Ye]}function Pe(Ue,Ye){return Ye&&Ct(Ye,function(Ke,ft){Rs(ye,Ue,Ke,ft)}),Ue}var ye=(m={uid:null,cfg:A},m[gn]=s,m[ps]=$,m.set=H,m[Ja]=Pe,m[Ou]=X,m.ref=pe,m[Po]=ve,m[Ws]=ue,m._block=fe,m);return $r(ye,"uid",{c:!1,e:!1,w:!1,v:N}),F=Cm(ye),Cf(F,A,"config","Creating"),ye}function $p(s,u){s?(s[Ka](u),s[cd](2,108,u)):Dm(u)}function Wo(s,u,f,m){var E=Yp(f,s||{},m);return u&&E[Ja](E.cfg,u),E}function Bu(s,u,f){var m=s[Rc]||s;return m.cfg&&(m.cfg===s||m.cfg[Rc]===m)?m[Ou](u):($p(f,Cv+er(s)),Wo(s,null,f)[Ou](u))}function Dl(s,u){if(s&&s[Js])return s[Js](u)}function xm(s,u,f){var m;return f||(m=pl(function(E){f=E})),s&&bv(s)>0?ys(Dl(s[0],u),function(){xm(Ql(s,1),u,f)}):f(),m}var Bp=500,Om="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function kv(s,u,f){return!s&&Le(s)?u:Ya(s)?s:Mi(s)[xu]()==="true"}function qp(s){return{mrg:!0,v:s}}function Oc(s,u,f){return{fb:f,isVal:s,v:u}}function Io(s,u){return{fb:u,set:kv,v:!!s}}var Rd=[hi,gr,ru,Rn],Cl=null,Ko;function eg(s,u){return function(){var f=arguments,m=gh(u);if(m){var E=m.listener;E&&E[s]&&E[s][pa](E,f)}}}function Hp(){var s=Rr("Microsoft");return s&&(Cl=s.ApplicationInsights),Cl}function gh(s){var u=Cl;return!u&&s.disableDbgExt!==!0&&(u=Cl||Hp()),u?u.ChromeDbgExt:null}function tg(s){if(!Ko){Ko={};for(var u=0;u<Rd[sr];u++)Ko[Rd[u]]=eg(Rd[u],s)}return Ko}var Bi,xd="warnToConsole",Od="AI (Internal): ",Am="AI: ",Rl="AITR_",ga={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},No=(Bi={},Bi[0]=null,Bi[1]="errorToConsole",Bi[2]=xd,Bi[3]="debugToConsole",Bi);function Ad(s){return s?'"'+s[Qa](/\"/g,Zr)+'"':Zr}function qu(s,u){var f=Is();if(f){var m="log";f[s]&&(m=s),st(f[m])&&f[m](u)}}var Ac=function(){function s(u,f,m,E){m===void 0&&(m=!1);var N=this;N[dd]=u,N[vc]=(m?Am:Od)+u;var A=Zr;Vo()&&(A=Go().stringify(E));var F=(f?" message:"+Ad(f):Zr)+(E?" props:"+Ad(A):Zr);N[vc]+=F}return s.dataType="MessageData",s}();function xs(s,u){return(s||{})[gn]||new Lv(u)}var Lv=function(){function s(u){this.identifier="DiagnosticLogger",this.queue=[];var f=0,m={},E,N,A,F,$;Xi(s,this,function(H){$=fe(u||{}),H.consoleLoggingLevel=function(){return E},H[cd]=function(ue,Pe,ye,Ue,Ye){Ye===void 0&&(Ye=!1);var Ke=new Ac(Pe,ye,Ye,Ue);if(F)throw er(Ke);var ft=No[ue]||xd;if(it(Ke[vc]))ve("throw"+(ue===1?"Critical":"Warning"),Ke);else{if(Ye){var Tr=+Ke[dd];!m[Tr]&&E>=ue&&(H[ft](Ke[vc]),m[Tr]=!0)}else E>=ue&&H[ft](Ke[vc]);X(ue,Ke)}},H.debugToConsole=function(ue){qu("debug",ue),ve("warning",ue)},H[Ka]=function(ue){qu("warn",ue),ve("warning",ue)},H.errorToConsole=function(ue){qu("error",ue),ve("error",ue)},H.resetInternalMessageCount=function(){f=0,m={}},H[mc]=X,H[Js]=function(ue){$&&$.rm(),$=null};function X(ue,Pe){if(!pe()){var ye=!0,Ue=Rl+Pe[dd];if(m[Ue]?ye=!1:m[Ue]=!0,ye&&(ue<=N&&(H.queue[Hr](Pe),f++,ve(ue===1?"error":"warn",Pe)),f===A)){var Ye="Internal events throttle limit per PageView reached for this app.",Ke=new Ac(23,Ye,!1);H.queue[Hr](Ke),ue===1?H.errorToConsole(Ye):H[Ka](Ye)}}}function fe(ue){return Bu(Wo(ue,ga,H).cfg,function(Pe){var ye=Pe.cfg;E=ye[pc],N=ye.loggingLevelTelemetry,A=ye.maxMessageLimit,F=ye.enableDebug})}function pe(){return f>=A}function ve(ue,Pe){var ye=gh(u||{});ye&&ye[ka]&&ye[ka](ue,Pe)}})}return s.__ieDyn=1,s}();function Pm(s){return s||new Lv}function mt(s,u,f,m,E,N){N===void 0&&(N=!1),Pm(s)[cd](u,f,m,E,N)}function Hu(s,u){Pm(s)[Ka](u)}var uu,Rf,km="toGMTString",Pc="toUTCString",Pd="cookie",Os="expires",Lm="isCookieUseDisabled",Vp="disableCookiesUsage",xl="_ckMgr",kc=null,Lc=null,Mv=null,en,As={},Fv={},Uv=(uu={cookieCfg:qp((Rf={},Rf[bo]={fb:"cookieDomain",dfVal:ml},Rf.path={fb:"cookiePath",dfVal:ml},Rf.enabled=tu,Rf.ignoreCookies=tu,Rf.blockedCookies=tu,Rf)),cookieDomain:tu,cookiePath:tu},uu[Vp]=tu,uu);function cu(){!en&&(en=Su(function(){return Qf()}))}function Gp(s){return s?s.isEnabled():!0}function jv(s,u){return u&&s&&at(s.ignoreCookies)?xa(s.ignoreCookies,u)!==-1:!1}function Yv(s,u){return u&&s&&at(s.blockedCookies)&&xa(s.blockedCookies,u)!==-1?!0:jv(s,u)}function kd(s,u){var f=u[dc];if(Le(f)){var m=void 0;it(s[Lm])||(m=!s[Lm]),it(s[Vp])||(m=!s[Vp]),f=m}return f}function Ld(s,u){var f,m,E,N,A,F,$,H,X;s=Wo(s||Fv,null,u).cfg,A=Bu(s,function(pe){pe[Ja](pe.cfg,Uv),m=pe.ref(pe.cfg,"cookieCfg"),E=m[hf]||"/",N=m[bo],F=kd(s,m)!==!1,$=m.getCookie||$v,H=m.setCookie||Do,X=m.delCookie||Do},u);var fe=(f={isEnabled:function(){var pe=kd(s,m)!==!1&&F&&Ol(u),ve=Fv[xl];return pe&&ve&&fe!==ve&&(pe=Gp(ve)),pe},setEnabled:function(pe){F=pe!==!1,m[dc]=pe},set:function(pe,ve,ue,Pe,ye){var Ue=!1;if(Gp(fe)&&!Yv(m,pe)){var Ye={},Ke=In(ve||Zr),ft=Nu(Ke,";");if(ft!==-1&&(Ke=In(ai(ve,ft)),Ye=Mc(Xn(ve,ft+1))),Lu(Ye,bo,Pe||N,Ii,it),!Le(ue)){var Tr=wl();if(it(Ye[Os])){var un=Eu(),cn=un+ue*1e3;if(cn>0){var Ln=new Date;Ln.setTime(cn),Lu(Ye,Os,zp(Ln,Tr?km:Pc)||zp(Ln,Tr?km:Pc)||Zr,Ii)}}Tr||Lu(Ye,"max-age",Zr+ue,null,it)}var Jt=bd();Jt&&Jt[Pu]==="https:"&&(Lu(Ye,"secure",null,null,it),Lc===null&&(Lc=!Bv((ss()||{})[xi])),Lc&&Lu(Ye,"SameSite","None",null,it)),Lu(Ye,hf,ye||E,null,it),H(pe,Al(Ke,Ye)),Ue=!0}return Ue},get:function(pe){var ve=Zr;return Gp(fe)&&!jv(m,pe)&&(ve=$(pe)),ve},del:function(pe,ve){var ue=!1;return Gp(fe)&&(ue=fe.purge(pe,ve)),ue},purge:function(pe,ve){var ue,Pe=!1;if(Ol(u)){var ye=(ue={},ue[hf]=ve||"/",ue[Os]="Thu, 01 Jan 1970 00:00:01 GMT",ue);wl()||(ye["max-age"]="0"),X(pe,Al(Zr,ye)),Pe=!0}return Pe}},f[Js]=function(pe){A&&A.rm(),A=null},f);return fe[xl]=fe,fe}function Ol(s){if(kc===null){kc=!1,!en&&cu();try{var u=en.v||{};kc=u[Pd]!==void 0}catch(f){mt(s,2,68,"Cannot access document.cookie - "+Ai(f),{exception:er(f)})}}return kc}function Mc(s){var u={};if(s&&s[sr]){var f=In(s)[ku](";");Lt(f,function(m){if(m=In(m||Zr),m){var E=Nu(m,"=");E===-1?u[m]=null:u[In(ai(m,E))]=In(Xn(m,E+1))}})}return u}function zp(s,u){return st(s[u])?s[u]():null}function Al(s,u){var f=s||Zr;return Ct(u,function(m,E){f+="; "+m+(Le(E)?Zr:"="+E)}),f}function $v(s){var u=Zr;if(!en&&cu(),en.v){var f=en.v[Pd]||Zr;Mv!==f&&(As=Mc(f),Mv=f),u=In(As[s]||Zr)}return u}function Do(s,u){!en&&cu(),en.v&&(en.v[Pd]=s+"="+u)}function Bv(s){return dn(s)?!!(ui(s,"CPU iPhone OS 12")||ui(s,"iPad; CPU OS 12")||ui(s,"Macintosh; Intel Mac OS X 10_14")&&ui(s,"Version/")&&ui(s,"Safari")||ui(s,"Macintosh; Intel Mac OS X 10_14")&&Ga(s,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||ui(s,"Chrome/5")||ui(s,"Chrome/6")||ui(s,"UnrealEngine")&&!ui(s,"Chrome")||ui(s,"UCBrowser/12")||ui(s,"UCBrowser/11")):!1}var Md={perfEvtsSendAll:!1};function Mm(s){s.h=null;var u=s.cb;s.cb=[],Lt(u,function(f){lr(f.fn,[f.arg])})}function Ps(s,u,f,m){Lt(s,function(E){E&&E[u]&&(f?(f.cb[Hr]({fn:m,arg:E}),f.h=f.h||Du(Mm,0,f)):lr(m,[E]))})}var _h=function(){function s(u){this.listeners=[];var f,m,E=[],N={h:null,cb:[]},A=Wo(u,Md);m=A[Ou](function(F){f=!!F.cfg.perfEvtsSendAll}),Xi(s,this,function(F){$r(F,"listeners",{g:function(){return E}}),F[Za]=function($){E[Hr]($)},F[Au]=function($){for(var H=xa(E,$);H>-1;)E[pt](H,1),H=xa(E,$)},F[hi]=function($){Ps(E,hi,N,function(H){H[hi]($)})},F[gr]=function($,H){Ps(E,gr,N,function(X){X[gr]($,H)})},F[ru]=function($,H){Ps(E,ru,H?N:null,function(X){X[ru]($,H)})},F[Rn]=function($){$&&(f||!$[Sp]())&&Ps(E,Rn,null,function(H){$[Zs]?Du(function(){return H[Rn]($)},0):H[Rn]($)})},F[ws]=function($){$&&$[sr]&&Ps(E,ws,N,function(H){H[ws]($)})},F[Tc]=function($){$&&$[La]&&Ps(E,Tc,N,function(H){H[Tc]($)})},F[Ic]=function($,H){if($>0){var X=H||0;Ps(E,Ic,N,function(fe){fe[Ic]($,X)})}},F[Js]=function($){var H=function(){m&&m.rm(),m=null,E=[],N.h&&N.h[ko](),N.h=null,N.cb=[]},X;if(Ps(E,"unload",null,function(fe){var pe=fe[Js]($);pe&&(X||(X=[]),X[Hr](pe))}),X)return pl(function(fe){return ys(Dp(X),function(){H(),fe()})});H()}})}return s.__ieDyn=1,s}(),Vu="ctx",qv="ParentContextKey",Pl="ChildrenContextKey",Fm=null,Jo=function(){function s(u,f,m){var E=this;if(E.start=Eu(),E[Vn]=u,E[Zs]=m,E[Sp]=function(){return!1},st(f)){var N;$r(E,"payload",{g:function(){return!N&&st(f)&&(N=f(),f=null),N}})}E[cl]=function(A){return A?A===s[qv]||A===s[Pl]?E[A]:(E[Vu]||{})[A]:null},E[Yi]=function(A,F){if(A)if(A===s[qv])E[A]||(E[Sp]=function(){return!0}),E[A]=F;else if(A===s[Pl])E[A]=F;else{var $=E[Vu]=E[Vu]||{};$[A]=F}},E[pd]=function(){var A=0,F=E[cl](s[Pl]);if(at(F))for(var $=0;$<F[sr];$++){var H=F[$];H&&(A+=H[vs])}E[vs]=Eu()-E.start,E.exTime=E[vs]-A,E[pd]=function(){}}}return s.ParentContextKey="parent",s.ChildrenContextKey="childEvts",s}(),ks=function(){function s(u){this.ctx={},Xi(s,this,function(f){f.create=function(m,E,N){return new Jo(m,E,N)},f.fire=function(m){m&&(m[pd](),u&&st(u[Rn])&&u[Rn](m))},f[Yi]=function(m,E){if(m){var N=f[Vu]=f[Vu]||{};N[m]=E}},f[cl]=function(m){return(f[Vu]||{})[m]}})}return s.__ieDyn=1,s}(),jn="CoreUtils.doPerf";function xf(s,u,f,m,E){if(s){var N=s;if(N[nu]&&(N=N[nu]()),N){var A=void 0,F=N[cl](jn);try{if(A=N.create(u(),m,E),A){if(F&&A[Yi]&&(A[Yi](Jo[qv],F),F[cl]&&F[Yi])){var $=F[cl](Jo[Pl]);$||($=[],F[Yi](Jo[Pl],$)),$[Hr](A)}return N[Yi](jn,A),f(A)}}catch(H){A&&A[Yi]&&A[Yi]("exception",H)}finally{A&&N.fire(A),N[Yi](jn,F)}}}return f()}function kl(){return Fm}var Fd="00000000000000000000000000000000",ur="0000000000000000";function ro(s,u,f){return s&&s[sr]===u&&s!==f?!!s.match(/^[\da-f]*$/i):!1}function no(s){return ro(s,32,Fd)}function Li(s){return ro(s,16,ur)}var Ll=jp("plugin");function yn(s){return Ll.get(s,"state",{},!0)}function Ml(s,u){for(var f=[],m=null,E=s[Xa](),N;E;){var A=E[Fo]();if(A){m&&m[ul]&&A[ha]&&m[ul](A),N=yn(A);var F=!!N[Jr];A[Jr]&&(F=A[Jr]()),F||f[Hr](A),m=A,E=E[Xa]()}}Lt(f,function($){var H=s[Oi]();$[Ks](s.getCfg(),H,u,s[Xa]()),N=yn($),!$[Oi]&&!N[Oi]&&(N[Oi]=H),N[Jr]=!0,delete N[Qn]})}function lu(s){return s.sort(function(u,f){var m=0;if(f){var E=f[ha];u[ha]?m=E?u[_d]-f[_d]:1:E&&(m=-1)}else m=u?1:-1;return m})}function Wp(s){var u={};return{getName:function(){return u[Vn]},setName:function(f){s&&s.setName(f),u[Vn]=f},getTraceId:function(){return u[df]},setTraceId:function(f){s&&s.setTraceId(f),no(f)&&(u[df]=f)},getSpanId:function(){return u[$o]},setSpanId:function(f){s&&s.setSpanId(f),Li(f)&&(u[$o]=f)},getTraceFlags:function(){return u[ma]},setTraceFlags:function(f){s&&s.setTraceFlags(f),u[ma]=f}}}var fu="TelemetryPluginChain",Hv="_hasRun",Gu="_getTelCtx",Vv=0;function Gv(s,u,f){for(;s;){if(s[Fo]()===f)return s;s=s[Xa]()}return U([f],u.config||{},u)}function d(s,u,f,m){var E=null,N=[];u||(u=Wo({},null,f[gn])),m!==null&&(E=m?Gv(s,f,m):s);var A={_next:$,ctx:{core:function(){return f},diagLog:function(){return xs(f,u.cfg)},getCfg:function(){return u.cfg},getExtCfg:X,getConfig:fe,hasNext:function(){return!!E},getNext:function(){return E},setNext:function(ve){E=ve},iterate:pe,onComplete:F}};function F(ve,ue){for(var Pe=[],ye=2;ye<arguments.length;ye++)Pe[ye-2]=arguments[ye];ve&&N[Hr]({func:ve,self:it(ue)?A.ctx:ue,args:Pe})}function $(){var ve=E;if(E=ve?ve[Xa]():null,!ve){var ue=N;ue&&ue[sr]>0&&(Lt(ue,function(Pe){try{Pe.func.call(Pe.self,Pe.args)}catch(ye){mt(f[gn],2,73,"Unexpected Exception during onComplete - "+er(ye))}}),N=[])}return ve}function H(ve,ue){var Pe=null,ye=u.cfg;if(ye&&ve){var Ue=ye[vl];!Ue&&ue&&(Ue={}),ye[vl]=Ue,Ue=u.ref(ye,vl),Ue&&(Pe=Ue[ve],!Pe&&ue&&(Pe={}),Ue[ve]=Pe,Pe=u.ref(Ue,ve))}return Pe}function X(ve,ue){var Pe=H(ve,!0);return ue&&Ct(ue,function(ye,Ue){if(Le(Pe[ye])){var Ye=u.cfg[ye];(Ye||!Le(Ye))&&(Pe[ye]=Ye)}Rs(u,Pe,ye,Ue)}),u[Ja](Pe,ue)}function fe(ve,ue,Pe){Pe===void 0&&(Pe=!1);var ye,Ue=H(ve,!1),Ye=u.cfg;return Ue&&(Ue[ue]||!Le(Ue[ue]))?ye=Ue[ue]:(Ye[ue]||!Le(Ye[ue]))&&(ye=Ye[ue]),ye||!Le(ye)?ye:Pe}function pe(ve){for(var ue;ue=A._next();){var Pe=ue[Fo]();Pe&&ve(Pe)}}return A}function h(s,u,f,m){var E=Wo(u),N=d(s,E,f,m),A=N.ctx;function F(H){var X=N._next();return X&&X[ha](H,A),!X}function $(H,X){return H===void 0&&(H=null),at(H)&&(H=U(H,E.cfg,f,X)),h(H||A[Xa](),E.cfg,f,X)}return A[ji]=F,A[Yo]=$,A}function S(s,u,f){var m=Wo(u.config),E=d(s,m,u,f),N=E.ctx;function A($){var H=E._next();return H&&H[Js](N,$),!H}function F($,H){return $===void 0&&($=null),at($)&&($=U($,m.cfg,u,H)),S($||N[Xa](),u,H)}return N[ji]=A,N[Yo]=F,N}function D(s,u,f){var m=Wo(u.config),E=d(s,m,u,f),N=E.ctx;function A($){return N.iterate(function(H){st(H[Xs])&&H[Xs](N,$)})}function F($,H){return $===void 0&&($=null),at($)&&($=U($,m.cfg,u,H)),D($||N[Xa](),u,H)}return N[ji]=A,N[Yo]=F,N}function U(s,u,f,m){var E=null,N=!m;if(at(s)&&s[sr]>0){var A=null;Lt(s,function(F){if(!N&&m===F&&(N=!0),N&&F&&st(F[ha])){var $=W(F,u,f);E||(E=$),A&&A._setNext($),A=$}})}return m&&!E?U([m],u,f):E}function W(s,u,f){var m=null,E=st(s[ha]),N=st(s[ul]),A;s?A=s[yo]+"-"+s[_d]+"-"+Vv++:A="Unknown-0-"+Vv++;var F={getPlugin:function(){return s},getNext:function(){return m},processTelemetry:X,unload:fe,update:pe,_id:A,_setNext:function(ve){m=ve}};function $(){var ve;return s&&st(s[Gu])&&(ve=s[Gu]()),ve||(ve=h(F,u,f)),ve}function H(ve,ue,Pe,ye,Ue){var Ye=!1,Ke=s?s[yo]:fu,ft=ve[Hv];return ft||(ft=ve[Hv]={}),ve.setNext(m),s&&xf(ve[Oi](),function(){return Ke+":"+Pe},function(){ft[A]=!0;try{var Tr=m?m._id:Zr;Tr&&(ft[Tr]=!1),Ye=ue(ve)}catch(cn){var un=m?ft[m._id]:!0;un&&(Ye=!0),(!m||!un)&&mt(ve[ka](),1,73,"Plugin ["+Ke+"] failed during "+Pe+" - "+er(cn)+", run flags: "+er(ft))}},ye,Ue),Ye}function X(ve,ue){ue=ue||$();function Pe(ye){if(!s||!E)return!1;var Ue=yn(s);return Ue[Qn]||Ue[gd]?!1:(N&&s[ul](m),s[ha](ve,ye),!0)}H(ue,Pe,"processTelemetry",function(){return{item:ve}},!ve.sync)||ue[ji](ve)}function fe(ve,ue){function Pe(){var ye=!1;if(s){var Ue=yn(s),Ye=s[Oi]||Ue[Oi];s&&(!Ye||Ye===ve.core())&&!Ue[Qn]&&(Ue[Oi]=null,Ue[Qn]=!0,Ue[Jr]=!1,s[Qn]&&s[Qn](ve,ue)===!0&&(ye=!0))}return ye}H(ve,Pe,"unload",function(){},ue[Zs])||ve[ji](ue)}function pe(ve,ue){function Pe(){var ye=!1;if(s){var Ue=yn(s),Ye=s[Oi]||Ue[Oi];s&&(!Ye||Ye===ve.core())&&!Ue[Qn]&&s[Xs]&&s[Xs](ve,ue)===!0&&(ye=!0)}return ye}H(ve,Pe,"update",function(){},!1)||ve[ji](ue)}return zt(F)}function J(){var s=[];function u(m){m&&s[Hr](m)}function f(m,E){Lt(s,function(N){try{N(m,E)}catch(A){mt(m[ka](),2,73,"Unexpected error calling unload handler - "+er(A))}}),s=[]}return{add:u,run:f}}function ae(){var s=[];function u(m){var E=s;s=[],Lt(E,function(N){try{(N.rm||N.remove).call(N)}catch(A){mt(m,2,73,"Unloading:"+er(A))}})}function f(m){m&&Qc(s,m)}return{run:u,add:f}}var me,ge="getPlugin",Ze=(me={},me[vl]={isVal:ml,v:{}},me),Mt=function(){function s(){var u=this,f,m,E,N,A;H(),Xi(s,u,function(X){X[Ks]=function(fe,pe,ve,ue){$(fe,pe,ue),f=!0},X[Qn]=function(fe,pe){var ve,ue=X[Oi];if(!ue||fe&&ue!==fe[Oi]())return;var Pe,ye=!1,Ue=fe||S(null,ue,E&&E[ge]?E[ge]():E),Ye=pe||(ve={reason:0},ve[Zs]=!1,ve);function Ke(){ye||(ye=!0,N.run(Ue,pe),A.run(Ue[ka]()),Pe===!0&&Ue[ji](Ye),H())}return!X[ms]||X[ms](Ue,Ye,Ke)!==!0?Ke():Pe=!0,Pe},X[Xs]=function(fe,pe){var ve=X[Oi];if(!ve||fe&&ve!==fe[Oi]())return;var ue,Pe=!1,ye=fe||D(null,ve,E&&E[ge]?E[ge]():E),Ue=pe||{reason:0};function Ye(){Pe||(Pe=!0,$(ye.getCfg(),ye.core(),ye[Xa]()))}return!X._doUpdate||X._doUpdate(ye,Ue,Ye)!==!0?Ye():ue=!0,ue},Pi(X,"_addUnloadCb",function(){return N},"add"),Pi(X,"_addHook",function(){return A},"add"),$r(X,"_unloadHooks",{g:function(){return A}})}),u[ka]=function(X){return F(X)[ka]()},u[Jr]=function(){return f},u.setInitialized=function(X){f=X},u[ul]=function(X){E=X},u[ji]=function(X,fe){fe?fe[ji](X):E&&st(E[ha])&&E[ha](X,null)},u._getTelCtx=F;function F(X){X===void 0&&(X=null);var fe=X;if(!fe){var pe=m||h(null,{},u[Oi]);E&&E[ge]?fe=pe[Yo](null,E[ge]):fe=pe[Yo](null,E)}return fe}function $(X,fe,pe){Wo(X,Ze,xs(fe)),!pe&&fe&&(pe=fe[Qi]()[Xa]());var ve=E;E&&E[ge]&&(ve=E[ge]()),u[Oi]=fe,m=h(pe,X,fe,ve)}function H(){f=!1,u[Oi]=null,m=null,E=null,A=ae(),N=J()}}return s.__ieDyn=1,s}();function nr(s,u,f){var m={id:u,fn:f};Qc(s,m);var E={remove:function(){Lt(s,function(N,A){if(N.id===m.id)return s[pt](A,1),-1})}};return E}function cr(s,u,f){for(var m=!1,E=s[sr],N=0;N<E;++N){var A=s[N];if(A)try{if(A.fn[pa](null,[u])===!1){m=!0;break}}catch(F){mt(f,2,64,"Telemetry initializer failed: "+Ai(F),{exception:er(F)},!0)}}return!m}var lt=function(s){lf(u,s);function u(){var f=s.call(this)||this;f.identifier="TelemetryInitializerPlugin",f.priority=199;var m,E;N(),Xi(u,f,function(A,F){A.addTelemetryInitializer=function($){return nr(E,m++,$)},A[ha]=function($,H){cr(E,$,H?H[ka]():A[ka]())&&A[ji]($,H)},A[ms]=function(){N()}});function N(){m=0,E=[]}return f}return u.__ieDyn=1,u}(Mt),ir,jt="Plugins must provide initialize method",xr="_notificationManager",Or="SDK is still unloading...",At="SDK is not initialized",xn=100,Of=5e4,On=ns((ir={cookieCfg:{}},ir[Ec]={rdOnly:!0,ref:!0,v:[]},ir[bc]={rdOnly:!0,ref:!0,v:[]},ir[vl]={ref:!0,v:{}},ir[Cp]=tu,ir.loggingLevelConsole=0,ir.diagnosticLogInterval=tu,ir));function io(s,u){return new ks(u)}function Ud(s,u,f){var m,E=[],N=[],A={};return Lt(f,function(F){(Le(F)||Le(F[Ks]))&&hr(jt);var $=F[_d],H=F[yo];F&&$&&(Le(A[$])?A[$]=H:Hu(s,"Two extensions have same priority #"+$+" - "+A[$]+", "+H)),!$||$<u?E[Hr](F):N[Hr](F)}),m={},m[Oi]=E,m[bc]=N,m}function zv(s,u){var f=!1;return Lt(u,function(m){if(m===s)return f=!0,-1}),f}function jd(s,u,f,m){f&&Ct(f,function(E,N){m&&fa(N)&&fa(u[E])&&jd(s,u[E],N,m),m&&fa(N)&&fa(u[E])?jd(s,u[E],N,m):s.set(u,E,N)})}function Yd(s,u){var f=null,m=-1;return Lt(s,function(E,N){if(E.w===u)return f=E,m=N,-1}),{i:m,l:f}}function Kp(s,u){var f=Yd(s,u).l;return f||(f={w:u,rm:function(){var m=Yd(s,u);m.i!==-1&&s[pt](m.i,1)}},s[Hr](f)),f}function Um(s,u,f){Lt(u,function(m){var E=Bu(s,m.w,f);delete m.w,m.rm=function(){E.rm()}})}function Fe(s,u,f,m){return u.add(s[Ou](function(E){var N=E.cfg.disableDbgExt;N===!0&&m&&(f[Au](m),m=null),f&&!m&&N!==!0&&(m=tg(E.cfg),f[Za](m))})),m}function Nt(s){return $r({rm:function(){s.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(s)+">"}})}var Ht=function(){function s(){var u,f,m,E,N,A,F,$,H,X,fe,pe,ve,ue,Pe,ye,Ue,Ye,Ke,ft,Tr,un,cn,Ln,Jt,$t,on,ia,Si,tt,Bt,Bn;Xi(s,this,function($e){Ee(),$e._getDbgPlgTargets=function(){return[cn,E]},$e[Jr]=function(){return f},$e.activeStatus=function(){return $t},$e._setPendingStatus=function(){$t=3},$e[Ks]=function(xe,yt,Zt,Ot){ve&&hr(Or),$e[Jr]()&&hr("Core cannot be initialized more than once"),u=Wo(xe,On,Zt||$e[gn],!1),xe=u.cfg,hu(u[Ou](function(Mn){var oa=Mn.cfg,ts=$t===3;if(!ts){ia=oa.initInMemoMaxSize||xn;var gu=oa[Lo],sv=oa.endpointUrl;if(Le(gu)){Tr=null,$t=Wa[Vr];var uv="Please provide instrumentation key";f?(mt(m,1,100,uv),bi()):hr(uv);return}var Xg=[];if(or(gu)?(Xg[Hr](gu),Tr=null):Tr=gu,or(sv)?(Xg[Hr](sv),on=null):on=sv,Xg[sr]){Si=!1,$t=3;var $_=ml(oa.initTimeOut)?oa.initTimeOut:Of,Lw=bm(Xg);Du(function(){Si||rr()},$_),ys(Lw,function(Oh){try{if(Si)return;if(!Oh.rejected){var Ah=Oh[Mo];if(Ah&&Ah[sr]){var Oy=Ah[0];if(Tr=Oy&&Oy[Mo],Ah[sr]>1){var Ay=Ah[1];on=Ay&&Ay[Mo]}}Tr&&(xe[Lo]=Tr,xe.endpointUrl=on)}rr()}catch{Si||rr()}})}else rr();var Qg=Mn.ref(Mn.cfg,vl);Ct(Qg,function(Oh){Mn.ref(Qg,Oh)})}})),N=Ot,Ke=Fe(u,Ye,N&&$e[ld](),Ke),Rh(),$e[gn]=Zt;var vr=xe[Ec];if(X=[],X[Hr].apply(X,cc(cc([],yt,!1),vr)),fe=xe[bc],ba(null),(!pe||pe[sr]===0)&&hr("No "+bc+" available"),fe&&fe[sr]>1){var ri=$e[Fo]("TeeChannelController");(!ri||!ri.plugin)&&mt(m,1,28,"TeeChannel required")}Um(xe,un,m),un=null,f=!0,$t===Wa.ACTIVE&&bi()},$e.getChannels=function(){var xe=[];return pe&&Lt(pe,function(yt){xe[Hr](yt)}),zt(xe)},$e.track=function(xe){xf($e[nu](),function(){return"AppInsightsCore:track"},function(){xe===null&&(aa(xe),hr("Invalid telemetry item")),!xe[Vn]&&Le(xe[Vn])&&(aa(xe),hr("telemetry name required")),xe[wo]=xe[wo]||Tr,xe[vs]=xe[vs]||hl(new Date),xe.ver=xe.ver||"4.0",!ve&&$e[Jr]()&&$t===Wa.ACTIVE?Co()[ji](xe):$t!==Wa[Vr]&&E[sr]<=ia&&E[Hr](xe)},function(){return{item:xe}},!xe.sync)},$e[Qi]=Co,$e[ld]=function(){return N||(N=new _h(u.cfg),$e[xr]=N),N},$e[Za]=function(xe){$e.getNotifyMgr()[Za](xe)},$e[Au]=function(xe){N&&N[Au](xe)},$e.getCookieMgr=function(){return $||($=Ld(u.cfg,$e[gn])),$},$e.setCookieMgr=function(xe){$!==xe&&(Dl($,!1),$=xe)},$e[nu]=function(){return A||F||kl()},$e.setPerfMgr=function(xe){A=xe},$e.eventCnt=function(){return E[sr]},$e.releaseQueue=function(){if(f&&E[sr]>0){var xe=E;E=[],$t===2?Lt(xe,function(yt){yt[wo]=yt[wo]||Tr,Co()[ji](yt)}):mt(m,2,20,"core init status is not active")}},$e[sl]=function(xe){return Pe=xe||null,Bn=!1,tt&&tt[ko](),qn(!0)};function rr(){Si=!0,Le(Tr)?($t=Wa[Vr],mt(m,1,112,"ikey can't be resolved from promises")):$t=Wa.ACTIVE,bi()}function bi(){f&&($e.releaseQueue(),$e[sl]())}function qn(xe){if((!tt||!tt[dc])&&!Bn){var yt=xe||m&&m.queue[sr]>0;yt&&(Bt||(Bt=!0,hu(u[Ou](function(Zt){var Ot=Zt.cfg.diagnosticLogInterval;(!Ot||!(Ot>0))&&(Ot=1e4);var vr=!1;tt&&(vr=tt[dc],tt[ko]()),tt=hp(Ch,Ot),tt.unref(),tt[dc]=vr}))),tt[dc]=!0)}return tt}$e[fd]=function(){Bn=!0,tt&&tt[ko](),Ch()},wd($e,function(){return ue},["addTelemetryInitializer"]),$e[Js]=function(xe,yt,Zt){var Ot;xe===void 0&&(xe=!0),f||hr(At),ve&&hr(Or);var vr=(Ot={reason:50},Ot[Zs]=xe,Ot.flushComplete=!1,Ot),ri;xe&&!yt&&(ri=pl(function(ts){yt=ts}));var Mn=S(Zd(),$e);Mn[Uo](function(){Ye.run($e[gn]),xm([$,N,m],xe,function(){Ee(),yt&&yt(vr)})},$e);function oa(ts){vr.flushComplete=ts,ve=!0,Ue.run(Mn,vr),$e[fd](),Mn[ji](vr)}return Ch(),av(xe,oa,6,Zt),ri},$e[Fo]=Ys,$e.addPlugin=function(xe,yt,Zt,Ot){if(!xe){Ot&&Ot(!1),xh(jt);return}var vr=Ys(xe[yo]);if(vr&&!yt){Ot&&Ot(!1),xh("Plugin ["+xe[yo]+"] is already loaded!");return}var ri={reason:16};function Mn(gu){X[Hr](xe),ri.added=[xe],ba(ri),Ot&&Ot(!0)}if(vr){var oa=[vr.plugin],ts={reason:2,isAsync:!!Zt};qc(oa,ts,function(gu){gu?(ri.removed=oa,ri.reason|=32,Mn()):Ot&&Ot(!1)})}else Mn()},$e.updateCfg=function(xe,yt){yt===void 0&&(yt=!0);var Zt;if($e[Jr]()){Zt={reason:1,cfg:u.cfg,oldCfg:Iu({},u.cfg),newConfig:Iu({},xe),merge:yt},xe=Zt.newConfig;var Ot=u.cfg;xe[Ec]=Ot[Ec],xe[bc]=Ot[bc]}u._block(function(vr){var ri=vr.cfg;jd(vr,ri,xe,yt),yt||Ct(ri,function(Mn){Pr(xe,Mn)||vr.set(ri,Mn,tu)}),vr[Ja](ri,On)},!0),u[ps](),Zt&&ov(Zt)},$e.evtNamespace=function(){return ye},$e.flush=av,$e.getTraceCtx=function(xe){return ft||(ft=Wp()),ft},$e.setTraceCtx=function(xe){ft=xe||null},$e.addUnloadHook=hu,Pi($e,"addUnloadCb",function(){return Ue},"add"),$e.onCfgChange=function(xe){var yt;return f?yt=Bu(u.cfg,xe,$e[gn]):yt=Kp(un,xe),Nt(yt)},$e.getWParam=function(){return Ci()||u.cfg.enableWParam?0:-1};function js(){var xe={};Ln=[];var yt=function(Zt){Zt&&Lt(Zt,function(Ot){if(Ot[yo]&&Ot[jo]&&!xe[Ot.identifier]){var vr=Ot[yo]+"="+Ot[jo];Ln[Hr](vr),xe[Ot.identifier]=Ot}})};yt(pe),fe&&Lt(fe,function(Zt){yt(Zt)}),yt(X)}function Ee(){f=!1,u=Wo({},On,$e[gn]),u.cfg[pc]=1,$r($e,"config",{g:function(){return u.cfg},s:function(yt){$e.updateCfg(yt,!1)}}),$r($e,"pluginVersionStringArr",{g:function(){return Ln||js(),Ln}}),$r($e,"pluginVersionString",{g:function(){return Jt||(Ln||js(),Jt=Ln.join(";")),Jt||Zr}}),$r($e,"logger",{g:function(){return m||(m=new Lv(u.cfg),u[gn]=m),m},s:function(yt){u[gn]=yt,m!==yt&&(Dl(m,!1),m=yt)}}),$e[gn]=new Lv(u.cfg),cn=[];var xe=$e.config[Ec]||[];xe.splice(0,xe[sr]),Qc(xe,cn),ue=new lt,E=[],Dl(N,!1),N=null,A=null,F=null,Dl($,!1),$=null,H=null,X=[],fe=null,pe=null,ve=!1,Pe=null,ye=ju("AIBaseCore",!0),Ue=J(),ft=null,Tr=null,Ye=ae(),un=[],Jt=null,Ln=null,Bn=!1,tt=null,Bt=!1,$t=0,on=null,ia=null,Si=!1}function Co(){var xe=h(Zd(),u.cfg,$e);return xe[Uo](qn),xe}function ba(xe){var yt=Ud($e[gn],Bp,X);H=null,Jt=null,Ln=null,pe=(fe||[])[0]||[],pe=lu(Qc(pe,yt[bc]));var Zt=Qc(lu(yt[Oi]),pe);cn=zt(Zt);var Ot=$e.config[Ec]||[];Ot.splice(0,Ot[sr]),Qc(Ot,cn);var vr=Co();pe&&pe[sr]>0&&Ml(vr[Yo](pe),Zt),Ml(vr,Zt),xe&&ov(xe)}function Ys(xe){var yt=null,Zt=null,Ot=[];return Lt(cn,function(vr){if(vr[yo]===xe&&vr!==ue)return Zt=vr,-1;vr.getChannel&&Ot[Hr](vr)}),!Zt&&Ot[sr]>0&&Lt(Ot,function(vr){if(Zt=vr.getChannel(xe),!Zt)return-1}),Zt&&(yt={plugin:Zt,setEnabled:function(vr){yn(Zt)[gd]=!vr},isEnabled:function(){var vr=yn(Zt);return!vr[Qn]&&!vr[gd]},remove:function(vr,ri){var Mn;vr===void 0&&(vr=!0);var oa=[Zt],ts=(Mn={reason:1},Mn[Zs]=vr,Mn);qc(oa,ts,function(gu){gu&&ba({reason:32,removed:oa}),ri&&ri(gu)})}}),yt}function Zd(){if(!H){var xe=(cn||[]).slice();xa(xe,ue)===-1&&xe[Hr](ue),H=U(lu(xe),u.cfg,$e)}return H}function qc(xe,yt,Zt){if(xe&&xe[sr]>0){var Ot=U(xe,u.cfg,$e),vr=S(Ot,$e);vr[Uo](function(){var ri=!1,Mn=[];Lt(X,function(ts,gu){zv(ts,xe)?ri=!0:Mn[Hr](ts)}),X=Mn,Jt=null,Ln=null;var oa=[];fe&&(Lt(fe,function(ts,gu){var sv=[];Lt(ts,function(uv){zv(uv,xe)?ri=!0:sv[Hr](uv)}),oa[Hr](sv)}),fe=oa),Zt&&Zt(ri),qn()}),vr[ji](yt)}else Zt(!1)}function Ch(){if(m&&m.queue){var xe=m.queue.slice(0);m.queue[sr]=0,Lt(xe,function(yt){var Zt,Ot=(Zt={},Zt[Vn]=Pe||"InternalMessageId: "+yt[dd],Zt[wo]=Tr,Zt[vs]=hl(new Date),Zt.baseType=Ac.dataType,Zt.baseData={message:yt[vc]},Zt);$e.track(Ot)})}}function av(xe,yt,Zt,Ot){var vr=1,ri=!1,Mn=null;Ot=Ot||5e3;function oa(){vr--,ri&&vr===0&&(Mn&&Mn[ko](),Mn=null,yt&&yt(ri),yt=null)}if(pe&&pe[sr]>0){var ts=Co()[Yo](pe);ts.iterate(function(gu){if(gu.flush){vr++;var sv=!1;gu.flush(xe,function(){sv=!0,oa()},Zt)||sv||(xe&&Mn==null?Mn=Du(function(){Mn=null,oa()},Ot):oa())}})}return ri=!0,oa(),!0}function Rh(){var xe;hu(u[Ou](function(yt){var Zt=yt.cfg.enablePerfMgr;if(Zt){var Ot=yt.cfg[Cp];(xe!==Ot||!xe)&&(Ot||(Ot=io),xp(yt.cfg,Cp,Ot),xe=Ot,F=null),!A&&!F&&st(Ot)&&(F=Ot($e,$e[ld]()))}else F=null,xe=null}))}function ov(xe){var yt=D(Zd(),$e);yt[Uo](qn),(!$e._updateHook||$e._updateHook(yt,xe)!==!0)&&yt[ji](xe)}function xh(xe){var yt=$e[gn];yt?(mt(yt,2,73,xe),qn()):hr(xe)}function aa(xe){var yt=$e[ld]();yt&&yt[gr]([xe],2)}function hu(xe){Ye.add(xe)}})}return s.__ieDyn=1,s}();function Xr(s,u){try{if(s&&s!==""){var f=Go().parse(s);if(f&&f[va]&&f[va]>=f.itemsAccepted&&f.itemsReceived-f.itemsAccepted===f.errors[sr])return f}}catch(m){mt(u,1,43,"Cannot parse the response. "+(m[Vn]||er(m)),{response:s})}return null}var vn="",wn="NoResponseBody",gi="&"+wn+"=true",zu="POST",Ls=function(){function s(){var u=0,f,m,E,N,A,F,$,H,X,fe,pe,ve,ue,Pe;Xi(s,this,function(ye,Ue){var Ye=!0;Si(),ye[Ks]=function(tt,Bt){E=Bt,m&&mt(E,1,28,"Sender is already initialized"),ye.SetConfig(tt),m=!0},ye._getDbgPlgTargets=function(){return[m,N,F,f]},ye.SetConfig=function(tt){try{if(A=tt.senderOnCompleteCallBack||{},F=!!tt.disableCredentials,$=tt.fetchCredentials,N=!!tt.isOneDs,f=!!tt.enableSendPromise,X=!!tt.disableXhr,fe=!!tt.disableBeacon,pe=!!tt.disableBeaconSync,Pe=tt.timeWrapper,ue=!!tt.addNoResponse,ve=!!tt.disableFetchKeepAlive,H={sendPOST:$t},N||(Ye=!1),F){var Bt=bd();Bt&&Bt.protocol&&Bt.protocol[xu]()==="file:"&&(Ye=!1)}return!0}catch{}return!1},ye.getSyncFetchPayload=function(){return u},ye.getSenderInst=function(tt,Bt){return tt&&tt[sr]?un(tt,Bt):null},ye.getFallbackInst=function(){return H},ye[ms]=function(tt,Bt){Si()};function Ke(tt,Bt){cn(Bt,200,{},tt)}function ft(tt,Bt){mt(E,2,26,"Failed to send telemetry.",{message:tt}),cn(Bt,400,{})}function Tr(tt){ft("No endpoint url is provided for the batch",tt)}function un(tt,Bt){for(var Bn,$e=0,rr=null,bi=0;rr==null&&bi<tt[sr];)$e=tt[bi],!X&&$e===1?ea()?rr=ia:ou()&&(rr=$t):$e===2&&Td(Bt)&&(!Bt||!ve)?rr=on:$e===3&&Ns()&&(Bt?!pe:!fe)&&(rr=Jt),bi++;return rr?(Bn={_transport:$e,_isSync:Bt},Bn[_s]=rr,Bn):null}function cn(tt,Bt,Bn,$e){try{tt&&tt(Bt,Bn,$e)}catch{}}function Ln(tt,Bt){var Bn=ss(),$e=tt[gs];if(!$e)return Tr(Bt),!0;$e=tt[gs]+(ue?gi:vn);var rr=tt[La],bi=N?rr:new Blob([rr],{type:"text/plain;charset=UTF-8"}),qn=Bn.sendBeacon($e,bi);return qn}function Jt(tt,Bt,Bn){var $e=tt[La];try{if($e)if(Ln(tt,Bt))Ke(vn,Bt);else{var rr=A&&A.beaconOnRetry;rr&&st(rr)?rr(tt,Bt,Ln):(H&&H[_s](tt,Bt,!0),mt(E,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(bi){N&&Hu(E,"Failed to send telemetry using sendBeacon API. Ex:"+er(bi)),cn(Bt,N?0:400,{},vn)}}function $t(tt,Bt,Bn){var $e,rr,bi,qn=tt[bp]||{};!Bn&&f&&($e=pl(function(ba,Ys){rr=ba,bi=Ys})),N&&Bn&&tt.disableXhrSync&&(Bn=!1);var js=tt[gs];if(!js){Tr(Bt),rr&&rr(!1);return}var Ee=_l(zu,js,Ye,!0,Bn,tt[ff]);N||Ee[vd]("Content-type","application/json"),Lt(En(qn),function(ba){Ee[vd](ba,qn[ba])}),Ee.onreadystatechange=function(){N||(Co(Ee),Ee.readyState===4&&rr&&rr(!0))},Ee.onload=function(){N&&Co(Ee)};function Co(ba){var Ys=A&&A.xhrOnComplete,Zd=Ys&&st(Ys);if(Zd)Ys(ba,Bt,tt);else{var qc=Ss(ba);cn(Bt,ba[eo],Ap(ba,N),qc)}}return Ee.onerror=function(ba){cn(Bt,N?Ee[eo]:400,Ap(Ee,N),N?vn:to(Ee)),bi&&bi(ba)},Ee.ontimeout=function(){cn(Bt,N?Ee[eo]:500,Ap(Ee,N),N?vn:to(Ee)),rr&&rr(!1)},Ee.send(tt[La]),$e}function on(tt,Bt,Bn){var $e,rr=tt[gs],bi=tt[La],qn=N?bi:new Blob([bi],{type:"application/json"}),js,Ee,Co,ba=new Headers,Ys=bi[sr],Zd=!1,qc=!1,Ch=tt[bp]||{},av=($e={method:zu,body:qn},$e[Om]=!0,$e);tt.headers&&En(tt.headers)[sr]>0&&(Lt(En(Ch),function(aa){ba.append(aa,Ch[aa])}),av[bp]=ba),$?av.credentials=$:Ye&&N&&(av.credentials="include"),Bn&&(av.keepalive=!0,u+=Ys,N?tt._sendReason===2&&(Zd=!0,ue&&(rr+=gi)):Zd=!0);var Rh=new Request(rr,av);try{Rh[Om]=!0}catch{}if(!Bn&&f&&(js=pl(function(aa,hu){Ee=aa,Co=hu})),!rr){Tr(Bt),Ee&&Ee(!1);return}function ov(aa){cn(Bt,N?0:400,{},N?vn:aa)}function xh(aa,hu,xe){var yt=aa[eo],Zt=A.fetchOnComplete;Zt&&st(Zt)?Zt(aa,Bt,xe||vn,hu):cn(Bt,yt,{},xe||vn)}try{ys(fetch(N?rr:Rh,N?av:null),function(aa){if(Bn&&(u-=Ys,Ys=0),!qc)if(qc=!0,aa.rejected)ov(aa.reason&&aa.reason[vc]),Co&&Co(aa.reason);else{var hu=aa[Mo];try{!N&&!hu.ok?(ov(hu.statusText),Ee&&Ee(!1)):N&&!hu.body?(xh(hu,null,vn),Ee&&Ee(!0)):ys(hu.text(),function(xe){xh(hu,tt,xe[Mo]),Ee&&Ee(!0)})}catch(xe){ov(er(xe)),Co&&Co(xe)}}})}catch(aa){qc||(ov(er(aa)),Co&&Co(aa))}return Zd&&!qc&&(qc=!0,cn(Bt,200,{}),Ee&&Ee(!0)),N&&!qc&&tt[ff]>0&&Pe&&Pe.set(function(){qc||(qc=!0,cn(Bt,500,{}),Ee&&Ee(!0))},tt[ff]),js}function ia(tt,Bt,Bn){var $e=os(),rr=new XDomainRequest,bi=tt[La];rr.onload=function(){var ba=Ss(rr),Ys=A&&A.xdrOnComplete;Ys&&st(Ys)?Ys(rr,Bt,tt):cn(Bt,200,{},ba)},rr.onerror=function(){cn(Bt,400,{},N?vn:bs(rr))},rr.ontimeout=function(){cn(Bt,500,{})},rr.onprogress=function(){};var qn=$e&&$e.location&&$e.location[Pu]||"",js=tt[gs];if(!js){Tr(Bt);return}if(!N&&js.lastIndexOf(qn,0)!==0){var Ee="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";mt(E,2,40,". "+Ee),ft(Ee,Bt);return}var Co=N?js:js[Qa](/^(https?:)/,"");rr.open(zu,Co),tt[ff]&&(rr[ff]=tt[ff]),rr.send(bi),N&&Bn?Pe&&Pe.set(function(){rr.send(bi)},0):rr.send(bi)}function Si(){u=0,m=!1,f=!1,E=null,N=null,A=null,F=null,$=null,H=null,X=!1,fe=!1,pe=!1,ve=!1,ue=!1,Pe=null}})}return s.__ieDyn=1,s}(),Wu="on",Fl="attachEvent",jm="addEventListener",Jp="detachEvent",Af="removeEventListener",Fc="events";ju("aiEvtPageHide"),ju("aiEvtPageShow");var P_=/\.[\.]+/g,rg=/[\.]+$/,Hg=1,yh=jp("events"),k_=/^([^.]*)(?:\.(.+)|)/;function Pf(s){return s&&s[Qa]?s[Qa](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Zr):s}function Wv(s,u){var f;if(u){var m=Zr;at(u)?(m=Zr,Lt(u,function(N){N=Pf(N),N&&(N[0]!=="."&&(N="."+N),m+=N)})):m=Pf(u),m&&(m[0]!=="."&&(m="."+m),s=(s||Zr)+m)}var E=k_.exec(s||Zr)||[];return f={},f[_n]=E[1],f.ns=(E[2]||Zr).replace(P_,".").replace(rg,Zr)[ku](".").sort().join("."),f}function Ym(s,u,f){f===void 0&&(f=!0);var m=yh.get(s,Fc,{},f),E=m[u];return E||(E=m[u]=[]),E}function kf(s,u,f,m){s&&u&&u[_n]&&(s[Af]?s[Af](u[_n],f,m):s[Jp]&&s[Jp](Wu+u[_n],f))}function Kv(s,u,f,m){var E=!1;return s&&u&&u[_n]&&f&&(s[jm]?(s[jm](u[_n],f,m),E=!0):s[Fl]&&(s[Fl](Wu+u[_n],f),E=!0)),E}function ng(s,u,f,m){for(var E=u[sr];E--;){var N=u[E];N&&(!f.ns||f.ns===N.evtName.ns)&&(!m||m(N))&&(kf(s,N.evtName,N[mi],N.capture),u[pt](E,1))}}function Vg(s,u,f){if(u[_n])ng(s,Ym(s,u[_n]),u,f);else{var m=yh.get(s,Fc,{});Ct(m,function(E,N){ng(s,N,u,f)}),En(m)[sr]===0&&yh.kill(s,Fc)}}function $d(s,u){var f;return u?(at(u)?f=[s].concat(u):f=[s,u],f=Wv("xx",f).ns[ku](".")):f=s,f}function Gg(s,u,f,m,E){var N;E===void 0&&(E=!1);var A=!1;if(s)try{var F=Wv(u,m);if(A=Kv(s,F,f,E),A&&yh.accept(s)){var $=(N={guid:Hg++,evtName:F},N[mi]=f,N.capture=E,N);Ym(s,F.type)[Hr]($)}}catch{}return A}function L_(s,u,f,m,E){if(E===void 0&&(E=!1),s)try{var N=Wv(u,m),A=!1;Vg(s,N,function(F){return N.ns&&!f||F[mi]===f?(A=!0,!0):!1}),A||kf(s,N,f,E)}catch{}}var ig="sampleRate",$m="ProcessLegacy",ag="http.method",wh="https://dc.services.visualstudio.com",Jv="/v2/track",Bd="not_specified",og=wp({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),Bm="split",Fr="length",du="toLowerCase",qd="ingestionendpoint",Zv="toString",Xv="push",qm="removeItem",Lf="name",Zp="message",zg="count",Xp="stringify",Ul="pathname",jl="match",Yl="exceptions",Uc="parsedStack",jc="properties",Ku="measurements",Mf="sizeInBytes",pu="typeName",Ff="severityLevel",Hd="problemGroup",sg="isManual",Sh="hasFullStack",Uf="assembly",jf="fileName",Vd="line",Qp="method",bh="level",Qv="aiDataContract",Hm="duration",ug="receivedResponse";function cg(s,u,f){var m=u[Fr],E=lg(s,u);if(E[Fr]!==m){for(var N=0,A=E;f[A]!==void 0;)N++,A=Xn(E,0,147)+I(N);E=A}return E}function lg(s,u){var f;return u&&(u=In(Mi(u)),u[Fr]>150&&(f=Xn(u,0,150),mt(s,2,57,"name is too long.  It has been truncated to 150 characters.",{name:u},!0))),f||u}function Gn(s,u,f){f===void 0&&(f=1024);var m;return u&&(f=f||1024,u=In(Mi(u)),u[Fr]>f&&(m=Xn(u,0,f),mt(s,2,61,"string value is too long. It has been truncated to "+f+" characters.",{value:u},!0))),m||u}function Gd(s,u){return y(s,u,2048,66)}function ei(s,u){var f;return u&&u[Fr]>32768&&(f=Xn(u,0,32768),mt(s,2,56,"message is too long, it has been truncated to 32768 characters.",{message:u},!0)),f||u}function M_(s,u){var f;if(u){var m=""+u;m[Fr]>32768&&(f=Xn(m,0,32768),mt(s,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:u},!0))}return f||u}function ev(s,u){if(u){var f={};Ct(u,function(m,E){if(Jn(E)&&Vo())try{E=Go()[Xp](E)}catch(N){mt(s,2,49,"custom property is not valid",{exception:N},!0)}E=Gn(s,E,8192),m=cg(s,m,f),f[m]=E}),u=f}return u}function zd(s,u){if(u){var f={};Ct(u,function(m,E){m=cg(s,m,f),f[m]=E}),u=f}return u}function p(s,u){return u&&y(s,u,128,69)[Zv]()}function y(s,u,f,m){var E;return u&&(u=In(Mi(u)),u[Fr]>f&&(E=Xn(u,0,f),mt(s,2,m,"input is too long, it has been truncated to "+f+" characters.",{data:u},!0))),E||u}function I(s){var u="00"+s;return Zc(u,u[Fr]-3)}var R=Qf()||{},k=0,B=[null,null,null,null,null];function q(s){var u=k,f=B,m=f[u];return R.createElement?f[u]||(m=f[u]=R.createElement("a")):m={host:ee(s,!0)},m.href=s,u++,u>=f[Fr]&&(u=0),k=u,m}function ee(s,u){var f=se(s,u)||"";if(f){var m=f[jl](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(m!=null&&m[Fr]>3&&dn(m[2])&&m[2][Fr]>0)return m[2]+(m[3]||"")}return f}function se(s,u){var f=null;if(s){var m=s[jl](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(m!=null&&m[Fr]>2&&dn(m[2])&&m[2][Fr]>0&&(f=m[2]||"",u&&m[Fr]>2)){var E=(m[1]||"")[du](),N=m[3]||"";(E==="http"&&N===":80"||E==="https"&&N===":443")&&(N=""),f+=N}}return f}var ce=[wh+Jv,"https://breeze.aimon.applicationinsights.io"+Jv,"https://dc-int.services.visualstudio.com"+Jv];function Oe(s){return xa(ce,s[du]())!==-1}function ze(s,u,f,m){var E,N=m,A=m;if(u&&u[Fr]>0){var F=q(u);if(E=F.host,!N)if(F[Ul]!=null){var $=F.pathname[Fr]===0?"/":F[Ul];$.charAt(0)!=="/"&&($="/"+$),A=F[Ul],N=Gn(s,f?f+" "+$:$)}else N=Gn(s,u)}else E=m,N=m;return{target:E,name:N,data:A}}var We=lc({LocalStorage:0,SessionStorage:1}),Ce=void 0,_e="";function Be(s){try{if(Le(Ca()))return null;var u=new Date()[Zv](),f=Rr(s===We.LocalStorage?"localStorage":"sessionStorage"),m=_e+u;f.setItem(m,u);var E=f.getItem(m)!==u;if(f[qm](m),!E)return f}catch{}return null}function Ie(){return Ae()?Be(We.SessionStorage):null}function Xe(s){_e=s||""}function Ae(s){return(s||Ce===void 0)&&(Ce=!!Be(We.SessionStorage)),Ce}function Re(s,u){var f=Ie();if(f!==null)try{return f.getItem(u)}catch(m){Ce=!1,mt(s,2,2,"Browser failed read of session storage. "+Ai(m),{exception:er(m)})}return null}function He(s,u,f){var m=Ie();if(m!==null)try{return m.setItem(u,f),!0}catch(E){Ce=!1,mt(s,2,4,"Browser failed write to session storage. "+Ai(E),{exception:er(E)})}return!1}function Vt(s,u){var f=Ie();if(f!==null)try{return f[qm](u),!0}catch(m){Ce=!1,mt(s,2,6,"Browser failed removal of session storage item. "+Ai(m),{exception:er(m)})}return!1}var Kt=";",pr="=";function Ar(s){if(!s)return{};var u=s[Bm](Kt),f=mm(u,function(E,N){var A=N[Bm](pr);if(A[Fr]===2){var F=A[0][du](),$=A[1];E[F]=$}return E},{});if(En(f)[Fr]>0){if(f.endpointsuffix){var m=f.location?f.location+".":"";f[qd]=f[qd]||"https://"+m+"dc."+f.endpointsuffix}f[qd]=f[qd]||wh,Ga(f[qd],"/")&&(f[qd]=f[qd].slice(0,-1))}return f}var sn=function(){function s(u,f,m){var E=this,N=this;N.ver=1,N.sampleRate=100,N.tags={},N[Lf]=Gn(u,m)||Bd,N.data=f,N.time=hl(new Date),N[Qv]={time:1,iKey:1,name:1,sampleRate:function(){return E.sampleRate===100?4:1},tags:1,data:1}}return s}(),tn=function(){function s(u,f,m,E){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var N=this;N.ver=2,N[Lf]=Gn(u,f)||Bd,N[jc]=ev(u,m),N[Ku]=zd(u,E)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.Event",s.dataType="EventData",s}(),zn=58,Gr=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,qi=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,nt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,ht=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,Nr=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,_r=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,Rt=/([^\(\s\n]+):([0-9]+)$/,Ur="<no_method>",Et="error",Sn="stack",gt="stackDetails",An="errorSrc",Pn="message",_a="description",Ju=[{re:qi,len:5,m:1,fn:2,ln:3,col:4},{chk:tv,pre:Ms,re:nt,len:4,m:1,fn:2,ln:3},{re:ht,len:3,m:1,fn:2,hdl:Wm},{re:Nr,len:2,fn:1,hdl:Wm}];function Ms(s){return s.replace(/(\(anonymous\))/,"<anonymous>")}function tv(s){return Nu(s,"[native")<0}function vu(s,u){var f=s;return f&&!dn(f)&&(JSON&&JSON[Xp]?(f=JSON[Xp](s),u&&(!f||f==="{}")&&(st(s[Zv])?f=s[Zv]():f=""+s)):f=""+s+" - (Missing JSON.stringify)"),f||""}function Zo(s,u){var f=s;return s&&(f&&!dn(f)&&(f=s[Pn]||s[_a]||f),f&&!dn(f)&&(f=vu(f,!0)),s.filename&&(f=f+" @"+(s.filename||"")+":"+(s.lineno||"?")+":"+(s.colno||"?"))),u&&u!=="String"&&u!=="Object"&&u!=="Error"&&Nu(f||"",u)===-1&&(f=u+": "+f),f||""}function Yc(s){try{if(Jn(s))return"hasFullStack"in s&&"typeName"in s}catch{}return!1}function _i(s){try{if(Jn(s))return"ver"in s&&"exceptions"in s&&"properties"in s}catch{}return!1}function Dn(s){return s&&s.src&&dn(s.src)&&s.obj&&at(s.obj)}function ti(s){var u=s||"";dn(u)||(dn(u[Sn])?u=u[Sn]:u=""+u);var f=u[Bm](`
`);return{src:u,obj:f}}function ya(s){for(var u=[],f=s[Bm](`
`),m=0;m<f[Fr];m++){var E=f[m];f[m+1]&&(E+="@"+f[m+1],m++),u[Xv](E)}return{src:s,obj:u}}function $c(s){var u=null;if(s)try{if(s[Sn])u=ti(s[Sn]);else if(s[Et]&&s[Et][Sn])u=ti(s[Et][Sn]);else if(s.exception&&s.exception[Sn])u=ti(s.exception[Sn]);else if(Dn(s))u=s;else if(Dn(s[gt]))u=s[gt];else if(os()&&os().opera&&s[Pn])u=ya(s[Zp]);else if(s.reason&&s.reason[Sn])u=ti(s.reason[Sn]);else if(dn(s))u=ti(s);else{var f=s[Pn]||s[_a]||"";dn(s[An])&&(f&&(f+=`
`),f+=" from "+s[An]),f&&(u=ti(f))}}catch(m){u=ti(m)}return u||{src:"",obj:null}}function Wd(s){var u="";return s&&(s.obj?u=s.obj.join(`
`):u=s.src||""),u}function Fs(s){var u,f=s.obj;if(f&&f[Fr]>0){u=[];var m=0,E=!1,N=0;Lt(f,function(Pe){if(E||Km(Pe)){var ye=Mi(Pe);E=!0;var Ue=Jm(ye,m);Ue&&(N+=Ue[Mf],u[Xv](Ue),m++)}});var A=32*1024;if(N>A)for(var F=0,$=u[Fr]-1,H=0,X=F,fe=$;F<$;){var pe=u[F][Mf],ve=u[$][Mf];if(H+=pe+ve,H>A){var ue=fe-X+1;u.splice(X,ue);break}X=F,fe=$,F++,$--}}return u}function Yf(s){var u="";if(s&&(u=s.typeName||s[Lf]||"",!u))try{var f=/function (.{1,200})\(/,m=f.exec(s.constructor[Zv]());u=m&&m[Fr]>1?m[1]:""}catch{}return u}function $f(s){if(s)try{if(!dn(s)){var u=Yf(s),f=vu(s,!1);return(!f||f==="{}")&&(s[Et]&&(s=s[Et],u=Yf(s)),f=vu(s,!0)),Nu(f,u)!==0&&u!=="String"?u+":"+f:f}}catch{}return""+(s||"")}var Kd=function(){function s(u,f,m,E,N,A){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var F=this;F.ver=2,_i(f)?(F[Yl]=f[Yl]||[],F[jc]=f[jc],F[Ku]=f[Ku],f[Ff]&&(F[Ff]=f[Ff]),f.id&&(F.id=f.id,f[jc].id=f.id),f[Hd]&&(F[Hd]=f[Hd]),Le(f[sg])||(F[sg]=f[sg])):(m||(m={}),A&&(m.id=A),F[Yl]=[Gm(u,f,m)],F[jc]=ev(u,m),F[Ku]=zd(u,E),N&&(F[Ff]=N),A&&(F.id=A))}return s.CreateAutoException=function(u,f,m,E,N,A,F,$){var H,X=Yf(N||A||u);return H={},H[Zp]=Zo(u,X),H.url=f,H.lineNumber=m,H.columnNumber=E,H.error=$f(N||A||u),H.evt=$f(A||u),H[pu]=X,H.stackDetails=$c(F||N||A),H.errorSrc=$,H},s.CreateFromInterface=function(u,f,m,E){var N=f[Yl]&&nc(f[Yl],function(F){return Th(u,F)}),A=new s(u,_o(_o({},f),{exceptions:N}),m,E);return A},s.prototype.toInterface=function(){var u,f=this,m=f.exceptions,E=f.properties,N=f.measurements,A=f.severityLevel,F=f.problemGroup,$=f.id,H=f.isManual,X=m instanceof Array&&nc(m,function(fe){return fe.toInterface()})||void 0;return u={ver:"4.0"},u[Yl]=X,u.severityLevel=A,u.properties=E,u.measurements=N,u.problemGroup=F,u.id=$,u.isManual=H,u},s.CreateSimpleException=function(u,f,m,E,N,A){var F;return{exceptions:[(F={},F[Sh]=!0,F.message=u,F.stack=N,F.typeName=f,F)]}},s.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",s.dataType="ExceptionData",s.formatError=$f,s}(),Eh=zt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function Vm(){var s,u=this,f=at(u[Uc])&&nc(u[Uc],function(E){return v(E)}),m=(s={id:u.id,outerId:u.outerId,typeName:u[pu],message:u[Zp],hasFullStack:u[Sh],stack:u[Sn]},s[Uc]=f||void 0,s);return m}function Gm(s,u,f){var m,E,N,A,F,$,H,X;if(Yc(u))A=u[pu],F=u[Zp],H=u[Sn],X=u[Uc]||[],$=u[Sh];else{var fe=u,pe=fe&&fe.evt;Gt(fe)||(fe=fe[Et]||pe||fe),A=Gn(s,Yf(fe))||Bd,F=ei(s,Zo(u||fe,A))||Bd;var ve=u[gt]||$c(u);X=Fs(ve),at(X)&&nc(X,function(ue){ue[Uf]=Gn(s,ue[Uf]),ue[jf]=Gn(s,ue[jf])}),H=M_(s,Wd(ve)),$=at(X)&&X[Fr]>0,f&&(f[pu]=f[pu]||A)}return m={},m[Qv]=Eh,m.id=E,m.outerId=N,m[pu]=A,m[Zp]=F,m[Sh]=$,m.stack=H,m[Uc]=X,m.toInterface=Vm,m}function Th(s,u){var f=at(u[Uc])&&nc(u[Uc],function(E){return o(E)})||u[Uc],m=Gm(s,_o(_o({},u),{parsedStack:f}));return m}function zm(s,u){var f=u[jl](_r);if(f&&f[Fr]>=4)s[jf]=f[1],s[Vd]=parseInt(f[2]);else{var m=u[jl](Rt);m&&m[Fr]>=3?(s[jf]=m[1],s[Vd]=parseInt(m[2])):s[jf]=u}}function Wm(s,u,f){var m=s[jf];u.fn&&f&&f[Fr]>u.fn&&(u.ln&&f[Fr]>u.ln?(m=In(f[u.fn]||""),s[Vd]=parseInt(In(f[u.ln]||""))||0):m=In(f[u.fn]||"")),m&&zm(s,m)}function Km(s){var u=!1;if(s&&dn(s)){var f=In(s);f&&(u=Gr.test(f))}return u}var mu=zt({level:1,method:1,assembly:0,fileName:0,line:0});function Jm(s,u){var f,m;if(s&&dn(s)&&In(s)){m=(f={},f[Qv]=mu,f[bh]=u,f[Uf]=In(s),f[Qp]=Ur,f.fileName="",f.line=0,f[Mf]=0,f);for(var E=0;E<Ju[Fr];){var N=Ju[E];if(N.chk&&!N.chk(s))break;N.pre&&(s=N.pre(s));var A=s[jl](N.re);if(A&&A[Fr]>=N.len){N.m&&(m[Qp]=In(A[N.m]||Ur)),N.hdl?N.hdl(m,N,A):N.fn&&(N.ln?(m[jf]=In(A[N.fn]||""),m[Vd]=parseInt(In(A[N.ln]||""))||0):zm(m,A[N.fn]||""));break}E++}}return l(m)}function o(s){var u,f=(u={},u[Qv]=mu,u.level=s[bh],u.method=s[Qp],u.assembly=s[Uf],u.fileName=s[jf],u.line=s[Vd],u[Mf]=0,u);return l(f)}function l(s){var u=zn;return s&&(u+=s.method[Fr],u+=s.assembly[Fr],u+=s.fileName[Fr],u+=s.level.toString()[Fr],u+=s.line.toString()[Fr],s[Mf]=u),s}function v(s){return{level:s[bh],method:s[Qp],assembly:s[Uf],fileName:s[jf],line:s[Vd]}}var w=function(){function s(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s}(),T=function(){function s(u,f,m,E,N,A,F,$,H){this.aiDataContract={ver:1,metrics:1,properties:0};var X=this;X.ver=2;var fe=new w;fe[zg]=E>0?E:void 0,fe.max=isNaN(A)||A===null?void 0:A,fe.min=isNaN(N)||N===null?void 0:N,fe[Lf]=Gn(u,f)||Bd,fe.value=m,fe.stdDev=isNaN(F)||F===null?void 0:F,X.metrics=[fe],X[jc]=ev(u,$),X[Ku]=zd(u,H)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",s.dataType="MetricData",s}(),x="";function L(s){(isNaN(s)||s<0)&&(s=0),s=Math.round(s);var u=x+s%1e3,f=x+Math.floor(s/1e3)%60,m=x+Math.floor(s/(1e3*60))%60,E=x+Math.floor(s/(1e3*60*60))%24,N=Math.floor(s/(1e3*60*60*24));return u=u[Fr]===1?"00"+u:u[Fr]===2?"0"+u:u,f=f[Fr]<2?"0"+f:f,m=m[Fr]<2?"0"+m:m,E=E[Fr]<2?"0"+E:E,(N>0?N+".":x)+E+":"+m+":"+f+"."+u}var O=function(){function s(u,f,m,E,N,A,F){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var $=this;$.ver=2,$.id=p(u,F),$.url=Gd(u,m),$[Lf]=Gn(u,f)||Bd,isNaN(E)||($[Hm]=L(E)),$[jc]=ev(u,N),$[Ku]=zd(u,A)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",s.dataType="PageviewData",s}(),M=function(){function s(u,f,m,E,N,A,F,$,H,X,fe,pe){H===void 0&&(H="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var ve=this;ve.ver=2,ve.id=f,ve[Hm]=L(N),ve.success=A,ve.resultCode=F+"",ve.type=Gn(u,H);var ue=ze(u,m,$,E);ve.data=Gd(u,E)||ue.data,ve.target=Gn(u,ue.target),X&&(ve.target="".concat(ve.target," | ").concat(X)),ve[Lf]=Gn(u,ue[Lf]),ve[jc]=ev(u,fe),ve[Ku]=zd(u,pe)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",s.dataType="RemoteDependencyData",s}(),Y=function(){function s(u,f,m,E,N){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var A=this;A.ver=2,f=f||Bd,A[Zp]=ei(u,f),A[jc]=ev(u,E),A[Ku]=zd(u,N),m&&(A[Ff]=m)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.Message",s.dataType="MessageData",s}(),V=function(){function s(u,f,m,E,N,A,F){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var $=this;$.ver=2,$.url=Gd(u,m),$[Lf]=Gn(u,f)||Bd,$[jc]=ev(u,N),$[Ku]=zd(u,A),F&&($.domProcessing=F.domProcessing,$[Hm]=F[Hm],$.networkConnect=F.networkConnect,$.perfTotal=F.perfTotal,$[ug]=F[ug],$.sentRequest=F.sentRequest)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",s.dataType="PageviewPerformanceData",s}(),Q=function(){function s(u,f){this.aiDataContract={baseType:1,baseData:1},this.baseType=u,this.baseData=f}return s}(),Z=lc({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function ie(s){var u="ai."+s+".";return function(f){return u+f}}var re=ie("application"),he=ie("device"),be=ie("location"),je=ie("operation"),Qe=ie("session"),rt=ie("user"),Yt=ie("cloud"),br=ie("internal"),yi=function(s){lf(u,s);function u(){return s.call(this)||this}return u}(Op({applicationVersion:re("ver"),applicationBuild:re("build"),applicationTypeId:re("typeId"),applicationId:re("applicationId"),applicationLayer:re("layer"),deviceId:he("id"),deviceIp:he("ip"),deviceLanguage:he("language"),deviceLocale:he("locale"),deviceModel:he("model"),deviceFriendlyName:he("friendlyName"),deviceNetwork:he("network"),deviceNetworkName:he("networkName"),deviceOEMName:he("oemName"),deviceOS:he("os"),deviceOSVersion:he("osVersion"),deviceRoleInstance:he("roleInstance"),deviceRoleName:he("roleName"),deviceScreenResolution:he("screenResolution"),deviceType:he("type"),deviceMachineName:he("machineName"),deviceVMName:he("vmName"),deviceBrowser:he("browser"),deviceBrowserVersion:he("browserVersion"),locationIp:be("ip"),locationCountry:be("country"),locationProvince:be("province"),locationCity:be("city"),operationId:je("id"),operationName:je("name"),operationParentId:je("parentId"),operationRootId:je("rootId"),operationSyntheticSource:je("syntheticSource"),operationCorrelationVector:je("correlationVector"),sessionId:Qe("id"),sessionIsFirst:Qe("isFirst"),sessionIsNew:Qe("isNew"),userAccountAcquisitionDate:rt("accountAcquisitionDate"),userAccountId:rt("accountId"),userAgent:rt("userAgent"),userId:rt("id"),userStoreRegion:rt("storeRegion"),userAuthUserId:rt("authUserId"),userAnonymousUserAcquisitionDate:rt("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:rt("authUserAcquisitionDate"),cloudName:Yt("name"),cloudRole:Yt("role"),cloudRoleVer:Yt("roleVer"),cloudRoleInstance:Yt("roleInstance"),cloudEnvironment:Yt("environment"),cloudLocation:Yt("location"),cloudDeploymentUnit:Yt("deploymentUnit"),internalNodeName:br("nodeName"),internalSdkVersion:br("sdkVersion"),internalAgentVersion:br("agentVersion"),internalSnippet:br("snippet"),internalSdkSrc:br("sdkSrc")})),yr=new yi;function Hi(s,u){L_(s,null,null,u)}function Xo(s){var u=Qf(),f=ss(),m=!1,E=[],N=1;f&&!Le(f.onLine)&&!f.onLine&&(N=2);var A=0,F=pe(),$=$d(ju("OfflineListener"),s);try{if(X(os())&&(m=!0),u){var H=u.body||u;H.ononline&&X(H)&&(m=!0)}}catch{m=!1}function X(Ke){var ft=!1;return Ke&&(ft=Gg(Ke,"online",Pe,$),ft&&Gg(Ke,"offline",ye,$)),ft}function fe(){return F}function pe(){return!(A===2||N===2)}function ve(){var Ke=pe();F!==Ke&&(F=Ke,Lt(E,function(ft){var Tr={isOnline:F,rState:N,uState:A};try{ft(Tr)}catch{}}))}function ue(Ke){A=Ke,ve()}function Pe(){N=1,ve()}function ye(){N=2,ve()}function Ue(){var Ke=os();if(Ke&&m){if(Hi(Ke,$),u){var ft=u.body||u;it(ft.ononline)||Hi(ft,$)}m=!1}}function Ye(Ke){return E[Xv](Ke),{rm:function(){var ft=E.indexOf(Ke);if(ft>-1)return E.splice(ft,1)}}}return{isOnline:fe,isListening:function(){return m},unload:Ue,addListener:Ye,setOnlineState:ue}}var Qo="AppInsightsChannelPlugin",Bc="duration",wa="tags",Bf="deviceType",Ve="data",Pt="name",Yn="traceID",we="length",ar="stringify",$n="measurements",Vi="dataType",ao="envelopeType",Mr="toString",ta="_get",ci="enqueue",ra="count",Jd="eventsLimitInMem",Sa="push",rv="item",qf="emitLineDelimitedJson",nv="clear",iv="createNew",em="markAsSent",li="clearSent",es="bufferOverride",Ne="BUFFER_KEY",ut="SENT_BUFFER_KEY",Ut="concat",kt="MAX_BUFFER_SIZE",tr="triggerSend",jr="diagLog",kn="initialize",wi="_sender",Ma="endpointUrl",oo="instrumentationKey",Hf="customHeaders",Ih="maxBatchSizeInBytes",Nh="onunloadDisableBeacon",F_="isBeaconApiDisabled",Iy="alwaysUseXhrOverride",Wg="disableXhr",fg="enableSessionStorageBuffer",$l="_buffer",U_="onunloadDisableFetch",j_="disableSendBeaconSplit",Nw="enableSendPromise",Ny="getSenderInst",qb="unloadTransports",Hb="convertUndefined",Vb="maxBatchInterval",Dy="serialize",dg="_onError",Dw="_onPartialSuccess",Cy="_onSuccess",Cw="itemsReceived",Rw="itemsAccepted",xw="oriPayload",Ow="baseType",Ry="sampleRate",Gb="eventsSendRequest",zb="getSamplingScore",OR="getHashCodeScore",Aw="baseType",na="baseData",Us="properties",Wb="true";function so(s,u,f){return Lu(s,u,f,Ii)}function AR(s,u,f){var m=f[wa]=f[wa]||{},E=u.ext=u.ext||{},N=u[wa]=u[wa]||[],A=E.user;A&&(so(m,yr.userAuthUserId,A.authId),so(m,yr.userId,A.id||A.localId));var F=E.app;F&&so(m,yr.sessionId,F.sesId);var $=E.device;$&&(so(m,yr.deviceId,$.id||$.localId),so(m,yr[Bf],$.deviceClass),so(m,yr.deviceIp,$.ip),so(m,yr.deviceModel,$.model),so(m,yr[Bf],$[Bf]));var H=u.ext.web;if(H){so(m,yr.deviceLanguage,H.browserLang),so(m,yr.deviceBrowserVersion,H.browserVer),so(m,yr.deviceBrowser,H.browser);var X=f[Ve]=f[Ve]||{},fe=X[na]=X[na]||{},pe=fe[Us]=fe[Us]||{};so(pe,"domain",H.domain),so(pe,"isManual",H.isManual?Wb:null),so(pe,"screenRes",H.screenRes),so(pe,"userConsent",H.userConsent?Wb:null)}var ve=E.os;ve&&(so(m,yr.deviceOS,ve[Pt]),so(m,yr.deviceOSVersion,ve.osVer));var ue=E.trace;ue&&(so(m,yr.operationParentId,ue.parentID),so(m,yr.operationName,Gn(s,ue[Pt])),so(m,yr.operationId,ue[Yn]));for(var Pe={},ye=N[we]-1;ye>=0;ye--){var Ue=N[ye];Ct(Ue,function(Ke,ft){Pe[Ke]=ft}),N.splice(ye,1)}Ct(N,function(Ke,ft){Pe[Ke]=ft});var Ye=_o(_o({},m),Pe);Ye[yr.internalSdkVersion]||(Ye[yr.internalSdkVersion]=Gn(s,"javascript:".concat(PR.Version),64)),f[wa]=iu(Ye)}function Dh(s,u,f){Le(s)||Ct(s,function(m,E){Wt(E)?f[m]=E:dn(E)?u[m]=E:Vo()&&(u[m]=Go()[ar](E))})}function pg(s,u){Le(s)||Ct(s,function(f,m){s[f]=m||u})}function vg(s,u,f,m){var E=new sn(s,m,u);so(E,"sampleRate",f[ig]),(f[na]||{}).startTime&&(E.time=hl(f[na].startTime)),E.iKey=f.iKey;var N=f.iKey.replace(/-/g,"");return E[Pt]=E[Pt].replace("{0}",N),AR(s,f,E),f[wa]=f[wa]||[],iu(E)}function mg(s,u){Le(u[na])&&mt(s,1,46,"telemetryItem.baseData cannot be null.")}var PR={Version:"3.3.5"};function kR(s,u,f){mg(s,u);var m=u[na][$n]||{},E=u[na][Us]||{};Dh(u[Ve],E,m),Le(f)||pg(E,f);var N=u[na];if(Le(N))return Hu(s,"Invalid input for dependency data"),null;var A=N[Us]&&N[Us][ag]?N[Us][ag]:"GET",F=new M(s,N.id,N.target,N[Pt],N[Bc],N.success,N.responseCode,A,N.type,N.correlationContext,E,m),$=new Q(M[Vi],F);return vg(s,M[ao],u,$)}function Kb(s,u,f){mg(s,u);var m={},E={};u[Aw]!==tn[Vi]&&(m.baseTypeSource=u[Aw]),u[Aw]===tn[Vi]?(m=u[na][Us]||{},E=u[na][$n]||{}):u[na]&&Dh(u[na],m,E),Dh(u[Ve],m,E),Le(f)||pg(m,f);var N=u[na][Pt],A=new tn(s,N,m,E),F=new Q(tn[Vi],A);return vg(s,tn[ao],u,F)}function LR(s,u,f){mg(s,u);var m=u[na][$n]||{},E=u[na][Us]||{};Dh(u[Ve],E,m),Le(f)||pg(E,f);var N=u[na],A=Kd.CreateFromInterface(s,N,E,m),F=new Q(Kd[Vi],A);return vg(s,Kd[ao],u,F)}function MR(s,u,f){mg(s,u);var m=u[na],E=m[Us]||{},N=m[$n]||{};Dh(u[Ve],E,N),Le(f)||pg(E,f);var A=new T(s,m[Pt],m.average,m.sampleCount,m.min,m.max,m.stdDev,E,N),F=new Q(T[Vi],A);return vg(s,T[ao],u,F)}function FR(s,u,f){mg(s,u);var m,E=u[na];!Le(E)&&!Le(E[Us])&&!Le(E[Us][Bc])?(m=E[Us][Bc],delete E[Us][Bc]):!Le(u[Ve])&&!Le(u[Ve][Bc])&&(m=u[Ve][Bc],delete u[Ve][Bc]);var N=u[na],A;((u.ext||{}).trace||{})[Yn]&&(A=u.ext.trace[Yn]);var F=N.id||A,$=N[Pt],H=N.uri,X=N[Us]||{},fe=N[$n]||{};if(Le(N.refUri)||(X.refUri=N.refUri),Le(N.pageType)||(X.pageType=N.pageType),Le(N.isLoggedIn)||(X.isLoggedIn=N.isLoggedIn[Mr]()),!Le(N[Us])){var pe=N[Us];Ct(pe,function(Pe,ye){X[Pe]=ye})}Dh(u[Ve],X,fe),Le(f)||pg(X,f);var ve=new O(s,$,H,m,X,fe,F),ue=new Q(O[Vi],ve);return vg(s,O[ao],u,ue)}function UR(s,u,f){mg(s,u);var m=u[na],E=m[Pt],N=m.uri||m.url,A=m[Us]||{},F=m[$n]||{};Dh(u[Ve],A,F),Le(f)||pg(A,f);var $=new V(s,E,N,void 0,A,F,m),H=new Q(V[Vi],$);return vg(s,V[ao],u,H)}function jR(s,u,f){mg(s,u);var m=u[na].message,E=u[na].severityLevel,N=u[na][Us]||{},A=u[na][$n]||{};Dh(u[Ve],N,A),Le(f)||pg(N,f);var F=new Y(s,m,E,N,A),$=new Q(Y[Vi],F);return vg(s,Y[ao],u,$)}var Jb=function(){function s(u,f){var m=[],E=!1,N=f.maxRetryCnt;this[ta]=function(){return m},this._set=function(A){return m=A,m},Xi(s,this,function(A){A[ci]=function(F){if(A[ra]()>=f[Jd]){E||(mt(u,2,105,"Maximum in-memory buffer size reached: "+A[ra](),!0),E=!0);return}F.cnt=F.cnt||0,!(!Le(N)&&F.cnt>N)&&m[Sa](F)},A[ra]=function(){return m[we]},A.size=function(){for(var F=m[we],$=0;$<m[we];$++)F+=m[$].item[we];return f[qf]||(F+=2),F},A[nv]=function(){m=[],E=!1},A.getItems=function(){return m.slice(0)},A.batchPayloads=function(F){if(F&&F[we]>0){var $=[];Lt(F,function(X){$[Sa](X[rv])});var H=f[qf]?$.join(`
`):"["+$.join(",")+"]";return H}return null},A[iv]=function(F,$,H){var X=m.slice(0);F=F||u,$=$||{};var fe=H?new Zb(F,$):new Pw(F,$);return Lt(X,function(pe){fe[ci](pe)}),fe}})}return s.__ieDyn=1,s}(),Pw=function(s){lf(u,s);function u(f,m){var E=s.call(this,f,m)||this;return Xi(u,E,function(N,A){N[em]=function(F){A[nv]()},N[li]=function(F){}}),E}return u.__ieDyn=1,u}(Jb),YR=["AI_buffer","AI_sentBuffer"],Zb=function(s){lf(u,s);function u(m,E){var N=s.call(this,m,E)||this,A=!1,F=E==null?void 0:E.namePrefix,$=E[es]||{getItem:Re,setItem:He},H=$.getItem,X=$.setItem,fe=E.maxRetryCnt;return Xi(u,N,function(pe,ve){var ue=ft(u[Ne]),Pe=ft(u[ut]),ye=cn(),Ue=Pe[Ut](ye),Ye=pe._set(ue[Ut](Ue));Ye[we]>u[kt]&&(Ye[we]=u[kt]),un(u[ut],[]),un(u[Ne],Ye),pe[ci]=function(Jt){if(pe[ra]()>=u[kt]){A||(mt(m,2,67,"Maximum buffer size reached: "+pe[ra](),!0),A=!0);return}Jt.cnt=Jt.cnt||0,!(!Le(fe)&&Jt.cnt>fe)&&(ve[ci](Jt),un(u.BUFFER_KEY,pe[ta]()))},pe[nv]=function(){ve[nv](),un(u.BUFFER_KEY,pe[ta]()),un(u[ut],[]),A=!1},pe[em]=function(Jt){un(u[Ne],pe._set(Ke(Jt,pe[ta]())));var $t=ft(u[ut]);$t instanceof Array&&Jt instanceof Array&&($t=$t[Ut](Jt),$t[we]>u[kt]&&(mt(m,1,67,"Sent buffer reached its maximum size: "+$t[we],!0),$t[we]=u[kt]),un(u[ut],$t))},pe[li]=function(Jt){var $t=ft(u[ut]);$t=Ke(Jt,$t),un(u[ut],$t)},pe[iv]=function(Jt,$t,on){on=!!on;var ia=pe[ta]().slice(0),Si=ft(u[ut]).slice(0);Jt=Jt||m,$t=$t||{},pe[nv]();var tt=on?new u(Jt,$t):new Pw(Jt,$t);return Lt(ia,function(Bt){tt[ci](Bt)}),on&&tt[em](Si),tt};function Ke(Jt,$t){var on=[],ia=[];return Lt(Jt,function(Si){ia[Sa](Si[rv])}),Lt($t,function(Si){!st(Si)&&xa(ia,Si[rv])===-1&&on[Sa](Si)}),on}function ft(Jt){var $t=Jt;return $t=F?F+"_"+$t:$t,Tr($t)}function Tr(Jt){try{var $t=H(m,Jt);if($t){var on=Go().parse($t);if(dn(on)&&(on=Go().parse(on)),on&&at(on))return on}}catch(ia){mt(m,1,42," storage key: "+Jt+", "+Ai(ia),{exception:er(ia)})}return[]}function un(Jt,$t){var on=Jt;try{on=F?F+"_"+on:on;var ia=JSON[ar]($t);X(m,on,ia)}catch(Si){X(m,on,JSON[ar]([])),mt(m,2,41," storage key: "+on+", "+Ai(Si)+". Buffer cleared",{exception:er(Si)})}}function cn(){var Jt=[];try{return Lt(YR,function($t){var on=Ln($t);if(Jt=Jt[Ut](on),F){var ia=F+"_"+$t,Si=Ln(ia);Jt=Jt[Ut](Si)}}),Jt}catch($t){mt(m,2,41,"Transfer events from previous buffers: "+Ai($t)+". previous Buffer items can not be removed",{exception:er($t)})}return[]}function Ln(Jt){try{var $t=Tr(Jt),on=[];return Lt($t,function(ia){var Si={item:ia,cnt:0};on[Sa](Si)}),Vt(m,Jt),on}catch{}return[]}}),N}var f;return f=u,u.VERSION="_1",u.BUFFER_KEY="AI_buffer"+f.VERSION,u.SENT_BUFFER_KEY="AI_sentBuffer"+f.VERSION,u.MAX_BUFFER_SIZE=2e3,u}(Jb),$R=function(){function s(u){Xi(s,this,function(f){f[Dy]=function(A){var F=m(A,"root");try{return Go()[ar](F)}catch($){mt(u,1,48,$&&st($[Mr])?$[Mr]():"Error serializing object",null,!0)}};function m(A,F){var $="__aiCircularRefCheck",H={};if(!A)return mt(u,1,48,"cannot serialize object because it is null or undefined",{name:F},!0),H;if(A[$])return mt(u,2,50,"Circular reference detected while serializing object",{name:F},!0),H;if(!A.aiDataContract){if(F==="measurements")H=N(A,"number",F);else if(F==="properties")H=N(A,"string",F);else if(F==="tags")H=N(A,"string",F);else if(at(A))H=E(A,F);else{mt(u,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:F},!0);try{Go()[ar](A),H=A}catch(X){mt(u,1,48,X&&st(X[Mr])?X[Mr]():"Error serializing object",null,!0)}}return H}return A[$]=!0,Ct(A.aiDataContract,function(X,fe){var pe=st(fe)?fe()&1:fe&1,ve=st(fe)?fe()&4:fe&4,ue=fe&2,Pe=A[X]!==void 0,ye=Jn(A[X])&&A[X]!==null;if(pe&&!Pe&&!ue)mt(u,1,24,"Missing required field specification. The field is required but not present on source",{field:X,name:F});else if(!ve){var Ue=void 0;ye?ue?Ue=E(A[X],X):Ue=m(A[X],X):Ue=A[X],Ue!==void 0&&(H[X]=Ue)}}),delete A[$],H}function E(A,F){var $;if(A)if(!at(A))mt(u,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:F},!0);else{$=[];for(var H=0;H<A[we];H++){var X=A[H],fe=m(X,F+"["+H+"]");$[Sa](fe)}}return $}function N(A,F,$){var H;return A&&(H={},Ct(A,function(X,fe){if(F==="string")fe===void 0?H[X]="undefined":fe===null?H[X]="null":fe[Mr]?H[X]=fe[Mr]():H[X]="invalid field: toString() is not defined.";else if(F==="number")if(fe===void 0)H[X]="undefined";else if(fe===null)H[X]="null";else{var pe=parseFloat(fe);H[X]=pe}else H[X]="invalid field: "+$+" is of unknown type.",mt(u,1,H[X],null,!0)})),H}})}return s.__ieDyn=1,s}(),BR=8,qR=function(){function s(){}return s.prototype.getHashCodeScore=function(u){var f=this.getHashCode(u)/s.INT_MAX_VALUE;return f*100},s.prototype.getHashCode=function(u){if(u==="")return 0;for(;u[we]<BR;)u=u[Ut](u);for(var f=5381,m=0;m<u[we];++m)f=(f<<5)+f+u.charCodeAt(m),f=f&f;return Math.abs(f)},s.INT_MAX_VALUE=2147483647,s}(),HR=function(){function s(){var u=this,f=new qR,m=new yi;u[zb]=function(E){var N=0;return E[wa]&&E[wa][m.userId]?N=f.getHashCodeScore(E[wa][m.userId]):E.ext&&E.ext.user&&E.ext.user.id?N=f[OR](E.ext.user.id):E[wa]&&E[wa][m.operationId]?N=f.getHashCodeScore(E[wa][m.operationId]):E.ext&&E.ext.telemetryTrace&&E.ext.telemetryTrace[Yn]?N=f.getHashCodeScore(E.ext.telemetryTrace[Yn]):N=Math.random()*100,N}}return s}(),VR=function(){function s(u,f){this.INT_MAX_VALUE=2147483647;var m=f||xs(null);(u>100||u<0)&&(m.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:u},!0),u=100),this[Ry]=u,this.samplingScoreGenerator=new HR}return s.prototype.isSampledIn=function(u){var f=this[Ry],m=!1;return f==null||f>=100||u.baseType===T[Vi]?!0:(m=this.samplingScoreGenerator[zb](u)<f,m)},s}(),Gi,Zm,tm=void 0,Xb="",GR=65e3;function Qb(s){try{return s.responseText}catch{}return null}function zR(s){return s&&s.sendPOST}var eE=ns((Gi={endpointUrl:Oc(Ii,wh+Jv)},Gi[qf]=Io(),Gi[Vb]=15e3,Gi[Ih]=102400,Gi.disableTelemetry=Io(),Gi[fg]=Io(!0),Gi.isRetryDisabled=Io(),Gi[F_]=Io(!0),Gi[j_]=Io(!0),Gi[Wg]=Io(),Gi[U_]=Io(),Gi[Nh]=Io(),Gi[oo]=tm,Gi.namePrefix=tm,Gi.samplingPercentage=Oc(WR,100),Gi[Hf]=tm,Gi[Hb]=tm,Gi[Jd]=1e4,Gi[es]=!1,Gi.httpXHROverride={isVal:zR,v:tm},Gi[Iy]=Io(),Gi.transports=tm,Gi.retryCodes=tm,Gi.maxRetryCnt={isVal:Wt,v:10},Gi));function WR(s){return!isNaN(s)&&s>0&&s<=100}var KR=(Zm={},Zm[tn.dataType]=Kb,Zm[Y.dataType]=jR,Zm[O.dataType]=FR,Zm[V.dataType]=UR,Zm[Kd.dataType]=LR,Zm[T.dataType]=MR,Zm[M.dataType]=kR,Zm),tE=function(s){lf(u,s);function u(){var f=s.call(this)||this;f.priority=1001,f.identifier=Qo;var m,E,N,A,F,$,H,X=0,fe,pe,ve,ue,Pe,ye,Ue,Ye,Ke,ft,Tr,un,cn,Ln,Jt,$t,on,ia,Si,tt,Bt,Bn,$e,rr,bi,qn,js;return Xi(u,f,function(Ee,Co){aE(),Ee.pause=function(){Oh(),N=!0},Ee.resume=function(){N&&(N=!1,E=null,Mn(),Qg())},Ee.flush=function(oe,De,wt){if(oe===void 0&&(oe=!0),!N){Oh();try{return Ee[tr](oe,null,wt||1)}catch(St){mt(Ee[jr](),1,22,"flush failed, telemetry will not be collected: "+Ai(St),{exception:er(St)})}}},Ee.onunloadFlush=function(){if(!N)if(Ue||tt)try{return Ee[tr](!0,gu,2)}catch(oe){mt(Ee[jr](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Ai(oe),{exception:er(oe)})}else Ee.flush(!1)},Ee.addHeader=function(oe,De){H[oe]=De},Ee[kn]=function(oe,De,wt,St){Ee.isInitialized()&&mt(Ee[jr](),1,28,"Sender is already initialized"),Co[kn](oe,De,wt,St);var Dr=Ee.identifier;F=new $R(De.logger),m=0,E=null,Ee[wi]=null,$=0;var wr=Ee[jr]();ve=$d(ju("Sender"),De.evtNamespace&&De.evtNamespace()),pe=Xo(ve),Ee._addHook(Bu(oe,function(Qr){var zi=Qr.cfg;zi.storagePrefix&&Xe(zi.storagePrefix);var Xd=h(null,zi,De),Yr=Xd.getExtCfg(Dr,eE),oE=Yr[Ma];if(ue&&oE===ue){var Mw=zi[Ma];Mw&&Mw!==oE&&(Yr[Ma]=Mw)}or(Yr[oo])&&(Yr[oo]=zi[oo]),$r(Ee,"_senderConfig",{g:function(){return Yr}}),Pe!==Yr[Ma]&&(ue=Pe=Yr[Ma]),De.activeStatus()===Wa.PENDING?Ee.pause():De.activeStatus()===Wa.ACTIVE&&Ee.resume(),ft&&ft!==Yr[Hf]&&Lt(ft,function(_u){delete H[_u.header]}),ye=Yr[Ih],Ue=(Yr[Nh]===!1||Yr[F_]===!1)&&Ns(),Ye=Yr[Nh]===!1&&Ns(),Ke=Yr[F_]===!1&&Ns(),tt=Yr[Iy],Bt=!!Yr[Wg],js=Yr.retryCodes;var Fw=Yr[es],e_=!!Yr[fg]&&(!!Fw||Ae()),sE=Yr.namePrefix,QR=e_!==$t||e_&&ia!==sE||e_&&on!==Fw;if(Ee[$l]){if(QR)try{Ee._buffer=Ee._buffer[iv](wr,Yr,e_)}catch(_u){mt(Ee[jr](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+Ai(_u),{exception:er(_u)})}Mn()}else Ee[$l]=e_?new Zb(wr,Yr):new Pw(wr,Yr);ia=sE,$t=e_,on=Fw,Bn=!Yr[U_]&&Td(!0),bi=!!Yr[j_],Ee._sample=new VR(Yr.samplingPercentage,wr),un=Yr[oo],!or(un)&&!iE(un,zi)&&mt(wr,1,100,"Invalid Instrumentation key "+un),ft=Yr[Hf],dn(ue)&&!Oe(ue)&&ft&&ft[we]>0?Lt(ft,function(_u){f.addHeader(_u.header,_u.value)}):ft=null,Si=Yr[Nw];var uE=Ys();qn?qn.SetConfig(uE):(qn=new Ls,qn[kn](uE,wr));var Py=Yr.httpXHROverride,ky=null,B_=null,ex=yf([3,1,2],Yr.transports);ky=qn&&qn[Ny](ex,!1);var Uw=qn&&qn.getFallbackInst();$e=function(_u,hg){return Ot(Uw,_u,hg)},rr=function(_u,hg){return Ot(Uw,_u,hg,!1)},ky=tt?Py:ky||Py||Uw,Ee[wi]=function(_u,hg){return Ot(ky,_u,hg)},Bn&&(fe=Xg);var jw=yf([3,1],Yr[qb]);Bn||(jw=jw.filter(function(_u){return _u!==2})),B_=qn&&qn[Ny](jw,!0),B_=tt?Py:B_||Py,(tt||Yr[qb]||!fe)&&B_&&(fe=function(_u,hg){return Ot(B_,_u,hg)}),fe||(fe=$e),Tr=Yr.disableTelemetry,cn=Yr[Hb]||tm,Ln=Yr.isRetryDisabled,Jt=Yr[Vb]}))},Ee.processTelemetry=function(oe,De){var wt;De=Ee._getTelCtx(De);var St=De[jr]();try{var Dr=ov(oe,St);if(!Dr)return;var wr=xh(oe,St);if(!wr)return;var Qr=F[Dy](wr),zi=Ee[$l];Mn(Qr);var Xd=(wt={},wt[rv]=Qr,wt.cnt=0,wt);zi[ci](Xd),Qg()}catch(Yr){mt(St,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Ai(Yr),{exception:er(Yr)})}Ee.processNext(oe,De)},Ee.isCompletelyIdle=function(){return!N&&X===0&&Ee._buffer[ra]()===0},Ee.getOfflineListener=function(){return pe},Ee._xhrReadyStateChange=function(oe,De,wt){if(!uv(De))return Zd(oe,De,wt)},Ee[tr]=function(oe,De,wt){oe===void 0&&(oe=!0);var St;if(!N)try{var Dr=Ee[$l];if(Tr)Dr[nv]();else if(Dr[ra]()>0){var wr=Dr.getItems();Ay(wt||0,oe),De?St=De.call(Ee,wr,oe):St=Ee[wi](wr,oe)}Oh()}catch(zi){var Qr=$i();(!Qr||Qr>9)&&mt(Ee[jr](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+Ai(zi),{exception:er(zi)})}return St},Ee.getOfflineSupport=function(){var oe;return oe={getUrl:function(){return ue},createPayload:xe},oe[Dy]=aa,oe.batch=hu,oe.shouldProcess=function(De){return!!ov(De)},oe},Ee._doTeardown=function(oe,De){Ee.onunloadFlush(),Dl(pe,!1),aE()},Ee[dg]=function(oe,De,wt){if(!uv(oe))return qc(oe,De)},Ee[Dw]=function(oe,De){if(!uv(oe))return Ch(oe,De)},Ee[Cy]=function(oe,De){if(!uv(oe))return av(oe)},Ee._xdrOnLoad=function(oe,De){if(!uv(De))return ba(oe,De)};function ba(oe,De){var wt=Qb(oe);if(oe&&(wt+""=="200"||wt===""))m=0,Ee[Cy](De,0);else{var St=Xr(wt);St&&St[Cw]&&St[Cw]>St[Rw]&&!Ln?Ee[Dw](De,St):Ee[dg](De,bs(oe))}}function Ys(){var oe;try{var De={xdrOnComplete:function(St,Dr,wr){var Qr=Rh(wr);if(Qr)return ba(St,Qr)},fetchOnComplete:function(St,Dr,wr,Qr){var zi=Rh(Qr);if(zi)return oa(St.status,zi,St.url,zi[we],St.statusText,wr||"")},xhrOnComplete:function(St,Dr,wr){var Qr=Rh(wr);if(Qr)return Zd(St,Qr,Qr[we])},beaconOnRetry:function(St,Dr,wr){return sv(St,Dr,wr)}},wt=(oe={},oe[Nw]=Si,oe.isOneDs=!1,oe.disableCredentials=!1,oe[Wg]=Bt,oe.disableBeacon=!Ke,oe.disableBeaconSync=!Ye,oe.senderOnCompleteCallBack=De,oe);return wt}catch{}return null}function Zd(oe,De,wt){oe.readyState===4&&oa(oe.status,De,oe.responseURL,wt,to(oe),Qb(oe)||oe.response)}function qc(oe,De,wt){mt(Ee[jr](),2,26,"Failed to send telemetry.",{message:De}),Ee._buffer&&Ee._buffer[li](oe)}function Ch(oe,De){for(var wt=[],St=[],Dr=De.errors.reverse(),wr=0,Qr=Dr;wr<Qr.length;wr++){var zi=Qr[wr],Xd=oe.splice(zi.index,1)[0];Ah(zi.statusCode)?St[Sa](Xd):wt[Sa](Xd)}oe[we]>0&&Ee[Cy](oe,De[Rw]),wt[we]>0&&Ee[dg](wt,to(null,["partial success",De[Rw],"of",De.itemsReceived].join(" "))),St[we]>0&&($_(St),mt(Ee[jr](),2,40,"Partial success. Delivered: "+oe[we]+", Failed: "+wt[we]+". Will retry to send "+St[we]+" our of "+De[Cw]+" items"))}function av(oe,De){Ee._buffer&&Ee._buffer[li](oe)}function Rh(oe){try{if(oe){var De=oe,wt=De[xw];return wt&&wt[we]?wt:null}}catch{}return null}function ov(oe,De){if(Tr)return!1;if(!oe)return De&&mt(De,1,7,"Cannot send empty telemetry"),!1;if(oe.baseData&&!oe[Ow])return De&&mt(De,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(oe[Ow]||(oe[Ow]="EventData"),!Ee[wi])return De&&mt(De,1,28,"Sender was not initialized"),!1;if(yt(oe))oe[ig]=Ee._sample[Ry];else return De&&mt(De,2,33,"Telemetry item was sampled out and not sent",{SampleRate:Ee._sample[Ry]}),!1;return!0}function xh(oe,De){var wt=oe.iKey||un,St=u.constructEnvelope(oe,wt,De,cn);if(!St){mt(De,1,47,"Unable to create an AppInsights envelope");return}var Dr=!1;if(oe[wa]&&oe[wa][$m]&&(Lt(oe[wa][$m],function(wr){try{wr&&wr(St)===!1&&(Dr=!0,Hu(De,"Telemetry processor check returns false"))}catch(Qr){mt(De,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Ai(Qr),{exception:er(Qr)},!0)}}),delete oe[wa][$m]),!Dr)return St}function aa(oe){var De=Xb,wt=Ee[jr]();try{var St=ov(oe,wt),Dr=null;St&&(Dr=xh(oe,wt)),Dr&&(De=F[Dy](Dr))}catch{}return De}function hu(oe){var De=Xb;return oe&&oe[we]&&(De="["+oe.join(",")+"]"),De}function xe(oe){var De,wt=ri();return De={urlString:ue},De[Ve]=oe,De.headers=wt,De}function yt(oe){return Ee._sample.isSampledIn(oe)}function Zt(oe,De,wt,St){De===200&&oe?Ee._onSuccess(oe,oe[we]):St&&Ee[dg](oe,St)}function Ot(oe,De,wt,St){St===void 0&&(St=!0);var Dr=function(zi,Xd,Yr){return Zt(De,zi,Xd,Yr)},wr=vr(De),Qr=oe&&oe.sendPOST;return Qr&&wr?(St&&Ee._buffer[em](De),Qr(wr,Dr,!wt)):null}function vr(oe){var De;if(at(oe)&&oe[we]>0){var wt=Ee[$l].batchPayloads(oe),St=ri(),Dr=(De={},De[Ve]=wt,De.urlString=ue,De.headers=St,De.disableXhrSync=Bt,De.disableFetchKeepAlive=!Bn,De[xw]=oe,De);return Dr}return null}function ri(){try{var oe=H||{};return Oe(ue)&&(oe[og[6]]=og[7]),oe}catch{}return null}function Mn(oe){var De=oe?oe[we]:0;return Ee[$l].size()+De>ye?((!pe||pe.isOnline())&&Ee[tr](!0,null,10),!0):!1}function oa(oe,De,wt,St,Dr,wr){var Qr=null;if(Ee._appId||(Qr=Xr(wr),Qr&&Qr.appId&&(Ee._appId=Qr.appId)),(oe<200||oe>=300)&&oe!==0){if((oe===301||oe===307||oe===308)&&!ts(wt)){Ee[dg](De,Dr);return}if(pe&&!pe.isOnline()){if(!Ln){var zi=10;$_(De,zi),mt(Ee[jr](),2,40,". Offline - Response Code: ".concat(oe,". Offline status: ").concat(!pe.isOnline(),". Will retry to send ").concat(De.length," items."))}return}!Ln&&Ah(oe)?($_(De),mt(Ee[jr](),2,40,". Response code "+oe+". Will retry to send "+De[we]+" items.")):Ee[dg](De,Dr)}else ts(wt),oe===206?(Qr||(Qr=Xr(wr)),Qr&&!Ln?Ee[Dw](De,Qr):Ee[dg](De,Dr)):(m=0,Ee[Cy](De,St))}function ts(oe){return $>=10?!1:!Le(oe)&&oe!==""&&oe!==ue?(ue=oe,++$,!0):!1}function gu(oe,De){if(fe)fe(oe,!1);else{var wt=qn&&qn[Ny]([3],!0);return Ot(wt,oe,De)}}function sv(oe,De,wt){var St=oe,Dr=St&&St[xw];if(bi)rr&&rr(Dr,!0),mt(Ee[jr](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var wr=[],Qr=0;Qr<Dr[we];Qr++){var zi=Dr[Qr],Xd=[zi],Yr=vr(Xd);wt(Yr,De)?Ee._onSuccess(Xd,Xd[we]):wr[Sa](zi)}wr[we]>0&&(rr&&rr(wr,!0),mt(Ee[jr](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function uv(oe){try{if(oe&&oe[we])return dn(oe[0])}catch{}return null}function Xg(oe,De){var wt=null;if(at(oe)){for(var St=oe[we],Dr=0;Dr<oe[we];Dr++)St+=oe[Dr].item[we];var wr=qn.getSyncFetchPayload();wr+St<=GR?wt=2:Ns()?wt=3:(wt=1,mt(Ee[jr](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var Qr=qn&&qn[Ny]([wt],!0);return Ot(Qr,oe,De)}return null}function $_(oe,De){if(De===void 0&&(De=1),!(!oe||oe[we]===0)){var wt=Ee[$l];wt[li](oe),m++;for(var St=0,Dr=oe;St<Dr.length;St++){var wr=Dr[St];wr.cnt=wr.cnt||0,wr.cnt++,wt[ci](wr)}Lw(De),Qg()}}function Lw(oe){var De=10,wt;if(m<=1)wt=De;else{var St=(Math.pow(2,m)-1)/2,Dr=Math.floor(Math.random()*St*De)+1;Dr=oe*Dr,wt=Math.max(Math.min(Dr,3600),De)}var wr=Eu()+wt*1e3;E=wr}function Qg(){if(!A&&!N){var oe=E?Math.max(0,E-Eu()):0,De=Math.max(Jt,oe);A=Du(function(){A=null,Ee[tr](!0,null,1)},De)}}function Oh(){A&&A.cancel(),A=null,E=null}function Ah(oe){return Le(js)?oe===401||oe===408||oe===429||oe===500||oe===502||oe===503||oe===504:js[we]&&js.indexOf(oe)>-1}function Oy(){var oe="getNotifyMgr";return Ee.core[oe]?Ee.core[oe]():Ee.core._notificationManager}function Ay(oe,De){var wt=Oy();if(wt&&wt[Gb])try{wt[Gb](oe,De)}catch(St){mt(Ee[jr](),1,74,"send request notification failed: "+Ai(St),{exception:er(St)})}}function iE(oe,De){var wt=De.disableInstrumentationKeyValidation,St=Le(wt)?!1:wt;if(St)return!0;var Dr="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",wr=new RegExp(Dr);return wr.test(oe)}function aE(){Ee[wi]=null,Ee[$l]=null,Ee._appId=null,Ee._sample=null,H={},pe=null,m=0,E=null,N=!1,A=null,F=null,$=0,X=0,fe=null,ve=null,ue=null,Pe=null,ye=0,Ue=!1,ft=null,Tr=!1,un=null,cn=tm,Ln=!1,$t=null,ia=tm,Bt=!1,Bn=!1,bi=!1,$e=null,rr=null,qn=null,$r(Ee,"_senderConfig",{g:function(){return vt({},eE)}})}}),f}return u.constructEnvelope=function(f,m,E,N){var A;m!==f.iKey&&!Le(m)?A=_o(_o({},f),{iKey:m}):A=f;var F=KR[A.baseType]||Kb;return F(E,A,N)},u}(Mt),Kg="instrumentationKey",xy="connectionString",rE="instrumentationkey",Jg="endpointUrl",nE="ingestionendpoint",Y_="userOverrideEndpointUrl",Zg,kw=void 0,JR=(Zg={diagnosticLogInterval:Oc(ZR,1e4)},Zg[xy]=kw,Zg[Jg]=kw,Zg[Kg]=kw,Zg.extensionConfig={},Zg);function ZR(s){return s&&s>0}var XR=function(){function s(u){var f=new Ht,m;(Le(u)||Le(u[Kg])&&Le(u[xy]))&&hr("Invalid input configuration"),Xi(s,this,function(N){$r(N,"config",{g:function(){return m}}),A(),N.initialize=A,N.track=E,wd(N,f,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function A(){var F=Wo(u||{},JR);m=F.cfg,f.addUnloadHook(Bu(F,function(){var $=m[xy];if(or($)){var H=dl(function(ve,ue){ys($,function(Pe){var ye=Pe.value,Ue=m[Kg];if(!Pe.rejected&&ye){m[xy]=ye;var Ye=Ar(ye);Ue=Ye[rE]||Ue}ve(Ue)})}),X=dl(function(ve,ue){ys($,function(Pe){var ye=Pe.value,Ue=m[Jg];if(!Pe.rejected&&ye){var Ye=Ar(ye),Ke=Ye[nE];Ue=Ke?Ke+Jv:Ue}ve(Ue)})});m[Kg]=H,m[Jg]=m[Y_]||X}if(dn($)){var fe=Ar($),pe=fe[nE];m[Jg]=m[Y_]?m[Y_]:pe+Jv,m[Kg]=fe[rE]||m[Kg]}m[Jg]=m[Y_]?m[Y_]:m[Jg]})),f.initialize(m,[new tE])}});function E(N){N&&(N.baseData=N.baseData||{},N.baseType=N.baseType||"EventData"),f.track(N)}}return s.__ieDyn=1,s}();t.AppInsightsCore=Ht,t.ApplicationInsights=XR,t.Sender=tE,t.SeverityLevel=Z,t.arrForEach=Lt,t.isNullOrUndefined=Le,t.proxyFunctions=wd,t.throwError=hr})});var rI=an(sm=>{"use strict";var mP=sm&&sm.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),hP=sm&&sm.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gP=sm&&sm.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&mP(e,t,r);return hP(e,t),e};Object.defineProperty(sm,"__esModule",{value:!0});sm.appInsightsClientFactory=void 0;var _P=QT(),yP=CS(),wP=async(t,e,r,n,i)=>{let a;try{let g=await Promise.resolve().then(()=>gP(tI())),_={};if(n){let j={alwaysUseXhrOverride:!0,httpXHROverride:n};_[_P.BreezeChannelIdentifier]=j}let b;t.startsWith("InstrumentationKey=")||(b=t);let C=b?{instrumentationKey:b}:{connectionString:t};a=new g.ApplicationInsights({...C,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:_})}catch(g){return Promise.reject(g)}return{logEvent:(g,_)=>{let b={..._==null?void 0:_.properties,..._==null?void 0:_.measurements};i!=null&&i.length&&yP.TelemetryUtil.applyReplacements(b,i),a==null||a.track({name:g,data:b,baseType:"EventData",ext:{user:{id:e,authId:e},app:{sesId:r}},baseData:{name:g,properties:_==null?void 0:_.properties,measurements:_==null?void 0:_.measurements}})},flush:async()=>{a==null||a.flush(!1)},dispose:async()=>new Promise(_=>{a==null||a.unload(!0,()=>{_(),a=void 0},1e3)})}};sm.appInsightsClientFactory=wP});var nI=an(P0=>{"use strict";Object.defineProperty(P0,"__esModule",{value:!0});P0.BaseTelemetryReporter=void 0;var RS=class{constructor(e,r,n){this.telemetrySender=e,this.vscodeAPI=r,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,r,n,i){i?this.telemetrySender.sendEventData(e,{properties:r,measurements:n}):this.telemetryLogger.logUsage(e,{properties:r,measurements:n})}sendTelemetryEvent(e,r,n){this.internalSendTelemetryEvent(e,r,n,!1)}sendRawTelemetryEvent(e,r,n){let i={...r};for(let a of Object.keys(i??{})){let c=i[a];typeof a=="string"&&c!==void 0&&(i[a]=new this.vscodeAPI.TelemetryTrustedValue(typeof c=="string"?c:c.value))}this.sendTelemetryEvent(e,i,n)}sendDangerousTelemetryEvent(e,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,r,n,!0)}internalSendTelemetryErrorEvent(e,r,n,i){i?this.telemetrySender.sendEventData(e,{properties:r,measurements:n}):this.telemetryLogger.logError(e,{properties:r,measurements:n})}sendTelemetryErrorEvent(e,r,n){this.internalSendTelemetryErrorEvent(e,r,n,!1)}sendDangerousTelemetryErrorEvent(e,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,r,n,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}};P0.BaseTelemetryReporter=RS});var iI=an(k0=>{"use strict";Object.defineProperty(k0,"__esModule",{value:!0});k0.BaseTelemetrySender=void 0;var th;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(th||(th={}));var xS=class{constructor(e,r){this._instantiationStatus=th.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=r,this._key=e}sendEventData(e,r){if(!this._telemetryClient){this._instantiationStatus!==th.INSTANTIATED&&this._eventQueue.push({eventName:e,data:r});return}this._telemetryClient.logEvent(e,r)}sendErrorData(e,r){if(!this._telemetryClient){this._instantiationStatus!==th.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:r});return}let n={stack:e.stack,message:e.message,name:e.name};if(r){let i=r.properties||r;r.properties={...i,...n}}else r={properties:n};this._telemetryClient.logEvent("unhandlederror",r)}async flush(){var e;return(e=this._telemetryClient)==null?void 0:e.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:r})=>this.sendEventData(e,r)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:r})=>this.sendErrorData(e,r)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===th.NOT_INSTANTIATED&&(this._instantiationStatus=th.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=th.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=th.INSTANTIATED}))}};k0.BaseTelemetrySender=xS});var sI=an(rh=>{"use strict";var SP=rh&&rh.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bP=rh&&rh.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),PS=rh&&rh.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&SP(e,t,r);return bP(e,t),e};Object.defineProperty(rh,"__esModule",{value:!0});var EP=PS(require("https")),OS=PS(require("os")),L0=PS(require("vscode")),TP=ZT(),IP=rI(),NP=nI(),DP=iI(),aI=CS();function oI(){return{sendPOST:(e,r)=>{let n={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{let i=EP.request(e.urlString,n,a=>{a.on("data",function(c){r(a.statusCode??200,a.headers,c.toString())}),a.on("error",function(){r(0,{})})});i.write(e.data,a=>{a&&r(0,{})}),i.end()}catch{r(0,{})}}}}var AS=class extends NP.BaseTelemetryReporter{constructor(e,r){let n=c=>(0,IP.appInsightsClientFactory)(c,L0.env.machineId,L0.env.sessionId,oI(),r);aI.TelemetryUtil.shouldUseOneDataSystemSDK(e)&&(n=c=>(0,TP.oneDataSystemClientFactory)(c,L0,oI()));let i={release:OS.release(),platform:OS.platform(),architecture:OS.arch()},a=new DP.BaseTelemetrySender(e,n);if(e&&e.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(a,L0,{additionalCommonProperties:aI.TelemetryUtil.getAdditionalCommonProperties(i)})}};rh.default=AS});var cN=an((KY,v_)=>{"use strict";var nk=typeof Buffer<"u",aN=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,oN=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function sN(t,e,r){r==null&&e!==null&&typeof e=="object"&&(r=e,e=void 0),nk&&Buffer.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));let n=JSON.parse(t,e);if(n===null||typeof n!="object")return n;let i=r&&r.protoAction||"error",a=r&&r.constructorAction||"error";if(i==="ignore"&&a==="ignore")return n;if(i!=="ignore"&&a!=="ignore"){if(aN.test(t)===!1&&oN.test(t)===!1)return n}else if(i!=="ignore"&&a==="ignore"){if(aN.test(t)===!1)return n}else if(oN.test(t)===!1)return n;return uN(n,{protoAction:i,constructorAction:a,safe:r&&r.safe})}function uN(t,{protoAction:e="error",constructorAction:r="error",safe:n}={}){let i=[t];for(;i.length;){let a=i;i=[];for(let c of a){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(c,"__proto__")){if(n===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete c.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(c,"constructor")&&Object.prototype.hasOwnProperty.call(c.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete c.constructor}for(let g in c){let _=c[g];_&&typeof _=="object"&&i.push(_)}}}return t}function $S(t,e,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return sN(t,e,r)}finally{Error.stackTraceLimit=n}}function ik(t,e){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return sN(t,e,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}v_.exports=$S;v_.exports.default=$S;v_.exports.parse=$S;v_.exports.safeParse=ik;v_.exports.scan=uN});var ZU={};Yw(ZU,{activate:()=>KU,deactivate:()=>JU});module.exports=lE(ZU);var xR=require("vscode");var yI=require("vscode");var FS={};Yw(FS,{action:()=>sx,diffView:()=>PP,storeApiKey:()=>ux,work:()=>kP});function sx(t){return e=>{typeof e=="function"&&e()}}var $w=require("vscode");function ux({ext:t,log:e}){return async(r,n)=>{let i=await $w.window.showInputBox({prompt:`Enter the ${n}`});i&&(e.info(n,{event:"action.key"}),await t.secrets.store(r,i),$w.window.showInformationMessage(`${n} stored successfully`))}}var gI=require("vscode");var Fa=require("vscode"),vI=q_(_S());var yS=require("crypto");var AT="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var jA=128,Yh,$h;function PT(t){!Yh||Yh.length<t?(Yh=Buffer.allocUnsafe(t*jA),yS.webcrypto.getRandomValues(Yh),$h=0):$h+t>Yh.length&&(yS.webcrypto.getRandomValues(Yh),$h=0),$h+=t}function YA(t){return PT(t|=0),Yh.subarray($h-t,$h)}function $A(t,e,r){let n=(2<<31-Math.clz32(t.length-1|1))-1,i=Math.ceil(1.6*n*e/t.length);return(a=e)=>{let c="";for(;;){let g=r(i),_=i;for(;_--;)if(c+=t[g[_]&n]||"",c.length>=a)return c}}}function kT(t,e=21){return $A(t,e,YA)}function LT(t=21){PT(t|=0);let e="";for(let r=$h-t;r<$h;r++)e+=AT[Yh[r]&63];return e}var Gc=require("vscode"),cP=q_(qT());var ip=require("vscode"),E0="multicoder",HT,VT,S0=(VT=(HT=ip.workspace.workspaceFolders)==null?void 0:HT[0])==null?void 0:VT.uri,b0=new Map;function uP(t){return t.path.split("/").pop()}function Vl(t){if(t.scheme==E0)return t.path=="/"?"./":t.path.slice(1);let e=ip.workspace.getWorkspaceFolder(t);if(e){let a="";return String(e.uri)!==String(t)&&(a=ip.workspace.asRelativePath(t,!1).replace(/\\/g,"/")),String(e.uri)!==String(S0)&&(a=".folders/"+uP(e.uri)+(a?"/"+a:"")),a||(a="."),a}if(t.scheme==="untitled")return".untitled/"+t.path;let r=t.path.split("/"),n=r.pop(),i=r.pop();return b0.has(i)||b0.set(i,ip.Uri.joinPath(t,"../")),".external/"+i+"/"+n}function Ei(t,e){return(t=="."||t=="./")&&(t=""),t=t.startsWith("/")?t:"/"+t,ip.Uri.from({scheme:E0,path:t,authority:e})}function Vc(t){let[e,r,...n]=t.path.split("/");if(r==".multicoder")return t.with({scheme:"file",authority:""});if(r==".untitled")return ip.Uri.from({scheme:"untitled",path:n.join("/")});if(r==".external"){let i=n.shift();if(b0.has(i))return ip.Uri.joinPath(b0.get(i),n.join("/"));throw new Error("Unknown external directory: "+i)}if(r==".folders"){let i=n.shift();for(let a of ip.workspace.workspaceFolders||[])if(a.uri.path.endsWith("/"+i))return ip.Uri.joinPath(a.uri,n.join("/"));throw new Error("Unknown workspace folder: "+i)}if(S0)return t.path?ip.Uri.joinPath(S0,t.path):S0;throw new Error("Cannot find source Uri")}var{fs:Q_}=Gc.workspace,lP=kT("1234567890abcdef",10);function T0(){return lP()}function I0(){let t=[];for(let e of Gc.window.tabGroups.all.flatMap(r=>r.tabs))e.input instanceof Gc.TabInputText&&t.push(e.input.uri);return t}async function Bh(t){return new TextDecoder().decode(await Q_.readFile(t))}async function N0(t,e){return await Q_.writeFile(t,new TextEncoder().encode(e))}async function Gl(t){try{let e=await Q_.stat(t);return e&&!!(e.type&Gc.FileType.File)}catch{return!1}}async function lv(t){try{let e=await Q_.stat(t);return e&&!!(e.type&Gc.FileType.Directory)}catch{return!1}}async function D0(t){return(await Q_.readDirectory(t)).map(([e,r])=>({name:e,path:Vl(Gc.Uri.joinPath(t,e)),uri:Gc.Uri.joinPath(t,e),isFile:!!(r&Gc.FileType.File),isDirectory:!!(r&Gc.FileType.Directory),isSymbolicLink:!!(r&Gc.FileType.SymbolicLink)}))}var uI=q_(sI()),CP="InstrumentationKey=4a0957be-8ce1-4335-8aa5-1fb742355aa5;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com/;LiveEndpoint=https://westeurope.livediagnostics.monitor.azure.com/;ApplicationId=b0fce7b4-deeb-43b7-aa17-e5024c6c504c";function RP(t){return{logUsage(e,r){t.sendTelemetryEvent(e,r)},logError(e,r={}){if(e&&typeof e=="object"){let{message:n,stack:i}=e,a=String(e.name||"error").toLowerCase(),c=String(e);t.sendTelemetryErrorEvent(a,{...e,...r,message:n,stack:i,text:c})}else t.sendTelemetryErrorEvent(String(e).toLowerCase().replace(/\W+/g,"-"),r)}}}function cI(t){let e=new uI.default(CP),r=RP(e);t.telemetry=r,r.logUsage("activated"),t.ext.subscriptions.push(e)}var lI=require("vscode");function fI(t){let e=lI.window.createOutputChannel("Multicoder",{log:!0});function r(i){if(!i||typeof i!="object")return;let{event:a,...c}=i,g=Object.entries(c).map(([_,b])=>`
    ${_}: ${b}`);g.length&&e.trace(g.join(""))}function n(i){let a={};return i!=null&&i.model&&(a.modelId=i.model.modelId,a.modelProvider=i.model.provider),a}t.log={error(i,a={}){e.error(i),t.telemetry.logError(i,{...n(this.context),...a}),r(a)},warn(i,a={}){e.warn((a!=null&&a.event?`[${a.event}] `:"")+i),t.telemetry.logUsage((a==null?void 0:a.event)||"warning",{text:i,...n(this.context),...a}),r(a)},info(i,a={}){e.info((a!=null&&a.event?`[${a.event}] `:"")+i),t.telemetry.logUsage((a==null?void 0:a.event)||"info",{text:i,...n(this.context),...a}),r(a)},context:null},t.ext.subscriptions.push(e)}async function f_(t,e){return new Promise(r=>{let n=!1,i=null;function a(){n||(n=!0,i==null||i.dispose(),r())}e&&(i=e.onCancellationRequested(a)),setTimeout(a,t*1e3)})}var dI=q_(_S()),ey=new dI.Volume,kS=ey,pI={recursive:!0};kS.mkdirSync("/.multicoder/task",pI);kS.mkdirSync("/.multicoder/snapshots",pI);kS.writeFileSync("/.multicoder/snapshots/~empty","");var U0=".wh.",{fs:ty}=Fa.workspace,LS=new Map,Sg=new Map;LS.set("shared",ey);function qh(t){let e=LS.get(t.authority);return e||(e=new vI.Volume,LS.set(t.authority,e)),e}function ry(t){let e=qh(t).statSync(t.path,{throwIfNoEntry:!1});if(!e)return null;let r=0,n=Number(e.birthtimeMs),i=Number(e.mtimeMs),a=Number(e.size);return e.isFile()?r=Fa.FileType.File:e.isDirectory()&&(r=Fa.FileType.Directory),{type:r,ctime:n,mtime:i,size:a}}function F0(t){return ry(t.with({authority:"shared"}))}function xP(t){let e=ry(j0(t))||F0(j0(t));return e&&(e.permissions=Fa.FilePermission.Readonly),e}function j0(t){return t.with({path:"/.multicoder/snapshots/"+t.query,query:""})}function OP(t){let e=t.path.split("/");for(;e.length>1;){let r=U0+e.pop(),n=[...e,r].join("/");if(qh(t).statSync(n,{throwIfNoEntry:!1}))return!0}return!1}function M0(t){let e=t.path.split("/"),r=e.pop(),n=e.join("/"),i=n+"/"+U0+r;return[n,i]}async function AP(t){try{return await ty.stat(Vc(t))}catch{return null}}function bg(t){return t.authority+t.path}var Y0=class{async stat(e){if(e.query)return xP(e);if(OP(e))throw Fa.FileSystemError.FileNotFound(e);return ry(e)||F0(e)||await ty.stat(Vc(e))}async readFile(e){return e.query&&(e=j0(e)),ry(e)?qh(e).readFileSync(e.path):F0(e)?ey.readFileSync(e.path):ty.readFile(Vc(e))}async writeFile(e,r,n){let[i,a]=M0(e),c=qh(e);c.mkdirSync(i,{recursive:!0}),c.writeFileSync(e.path,r),c.statSync(a,{throwIfNoEntry:!1})&&c.unlinkSync(a),Sg.has(bg(e))&&this._emitter.fire([{type:Fa.FileChangeType.Changed,uri:e}])}async readDirectory(e){let r=await AP(e),n=F0(e),i=ry(e),a=qh(e),c=new Map,g=[];if(r)for(let[_,b]of await ty.readDirectory(Vc(e)))c.set(_,b);return n&&ey.readdirSync(e.path,{withFileTypes:!0}).forEach(_=>{c.set(_.name,_.isDirectory()?Fa.FileType.Directory:Fa.FileType.File)}),i&&a.readdirSync(e.path,{withFileTypes:!0}).forEach(_=>{_.name.startsWith(U0)?g.push(_.name.slice(U0.length)):c.set(_.name,_.isDirectory()?Fa.FileType.Directory:Fa.FileType.File)}),g.forEach(_=>c.delete(_)),Array.from(c.entries())}async delete(e,r){let[n,i]=M0(e),a=qh(e);a.statSync(e.path,{throwIfNoEntry:!1})&&a.unlinkSync(e.path),a.mkdirSync(n,{recursive:!0}),a.writeFileSync(i,""),Sg.has(bg(e))&&this._emitter.fire([{type:Fa.FileChangeType.Deleted,uri:e}])}async rename(e,r,n){let[i,a]=M0(e),[c,g]=M0(r),_=qh(e);if(_.mkdirSync(i,{recursive:!0}),_.mkdirSync(c,{recursive:!0}),_.statSync(e.path,{throwIfNoEntry:!1}))_.renameSync(e.path,r.path);else{let b=await ty.readFile(Vc(e));_.writeFileSync(r.path,b)}_.statSync(g,{throwIfNoEntry:!1})&&_.unlinkSync(g),_.writeFileSync(a,""),Sg.has(bg(e)||Sg.has(bg(r)))&&this._emitter.fire([{type:Fa.FileChangeType.Deleted,oldUri:e},{type:Fa.FileChangeType.Created,newUri:r}])}async createDirectory(e){qh(e).mkdirSync(e.path,{recursive:!0})}_emitter=new Fa.EventEmitter;onDidChangeFile=this._emitter.event;watch(e,r){let n={},i=Sg.get(bg(e))||new Set;return i.add(n),Sg.set(bg(e),i),new Fa.Disposable(()=>{i.delete(n),i.size||Sg.set(bg(e),null)})}};async function MS(t,e){let r=e?LT():"~empty",n=t.with({query:r});return e&&await N0(j0(n),e),n}var mI=require("vscode");function hI(t){let e=new Y0,r=mI.workspace.registerFileSystemProvider(E0,e,{isCaseSensitive:!0,isReadonly:!1});t.ext.subscriptions.push(r)}function PP(t){return async(e,r,n)=>{let i=t.recent.get(n),a=e.split("/").pop(),c=i==null?void 0:i.task,g=null;for(;c&&!g;)g=c.edits.find(j=>j.id===r),c=c.parent;if(!g)return;let _=Ei(e,i.id),b=await MS(_,g.before),C=await MS(_,g.after);await gI.commands.executeCommand("vscode.diff",b,C,`${a} (Multicoder)`),t.log.info(a,{event:"action.diff"})}}var vY=require("vscode");async function _I(){}function kP(t){return()=>{_I()}}function wI(t){Object.entries(FS).forEach(([e,r])=>{let n=yI.commands.registerCommand(`multicoder.${e}`,r(t));t.ext.subscriptions.push(n)})}var vm=require("vscode");var SI="vercel.ai.error",LP=Symbol.for(SI),bI,MP=class EI extends Error{constructor({name:e,message:r,cause:n}){super(r),this[bI]=!0,this.name=e,this.cause=n}static isInstance(e){return EI.hasMarker(e,SI)}static hasMarker(e,r){let n=Symbol.for(r);return e!=null&&typeof e=="object"&&n in e&&typeof e[n]=="boolean"&&e[n]===!0}};bI=LP;var xt=MP,TI="AI_APICallError",II=`vercel.ai.error.${TI}`,FP=Symbol.for(II),NI,zl=class extends xt{constructor({message:t,url:e,requestBodyValues:r,statusCode:n,responseHeaders:i,responseBody:a,cause:c,isRetryable:g=n!=null&&(n===408||n===409||n===429||n>=500),data:_}){super({name:TI,message:t,cause:c}),this[NI]=!0,this.url=e,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=i,this.responseBody=a,this.isRetryable=g,this.data=_}static isInstance(t){return xt.hasMarker(t,II)}};NI=FP;var DI="AI_EmptyResponseBodyError",CI=`vercel.ai.error.${DI}`,UP=Symbol.for(CI),RI,jS=class extends xt{constructor({message:t="Empty response body"}={}){super({name:DI,message:t}),this[RI]=!0}static isInstance(t){return xt.hasMarker(t,CI)}};RI=UP;function Hh(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var xI="AI_InvalidArgumentError",OI=`vercel.ai.error.${xI}`,jP=Symbol.for(OI),AI,$0=class extends xt{constructor({message:t,cause:e,argument:r}){super({name:xI,message:t,cause:e}),this[AI]=!0,this.argument=r}static isInstance(t){return xt.hasMarker(t,OI)}};AI=jP;var PI="AI_InvalidPromptError",kI=`vercel.ai.error.${PI}`,YP=Symbol.for(kI),LI,um=class extends xt{constructor({prompt:t,message:e,cause:r}){super({name:PI,message:`Invalid prompt: ${e}`,cause:r}),this[LI]=!0,this.prompt=t}static isInstance(t){return xt.hasMarker(t,kI)}};LI=YP;var MI="AI_InvalidResponseDataError",FI=`vercel.ai.error.${MI}`,$P=Symbol.for(FI),UI,ny=class extends xt{constructor({data:t,message:e=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:MI,message:e}),this[UI]=!0,this.data=t}static isInstance(t){return xt.hasMarker(t,FI)}};UI=$P;var jI="AI_JSONParseError",YI=`vercel.ai.error.${jI}`,BP=Symbol.for(YI),$I,d_=class extends xt{constructor({text:t,cause:e}){super({name:jI,message:`JSON parsing failed: Text: ${t}.
Error message: ${Hh(e)}`,cause:e}),this[$I]=!0,this.text=t}static isInstance(t){return xt.hasMarker(t,YI)}};$I=BP;var BI="AI_LoadAPIKeyError",qI=`vercel.ai.error.${BI}`,qP=Symbol.for(qI),HI,p_=class extends xt{constructor({message:t}){super({name:BI,message:t}),this[HI]=!0}static isInstance(t){return xt.hasMarker(t,qI)}};HI=qP;var HP="AI_LoadSettingError",VP=`vercel.ai.error.${HP}`,GP=Symbol.for(VP),zP;zP=GP;var WP="AI_NoContentGeneratedError",KP=`vercel.ai.error.${WP}`,JP=Symbol.for(KP),ZP;ZP=JP;var VI="AI_NoSuchModelError",GI=`vercel.ai.error.${VI}`,XP=Symbol.for(GI),zI,YS=class extends xt{constructor({errorName:t=VI,modelId:e,modelType:r,message:n=`No such ${r}: ${e}`}){super({name:t,message:n}),this[zI]=!0,this.modelId=e,this.modelType=r}static isInstance(t){return xt.hasMarker(t,GI)}};zI=XP;var WI="AI_TooManyEmbeddingValuesForCallError",KI=`vercel.ai.error.${WI}`,QP=Symbol.for(KI),JI,ZI=class extends xt{constructor(t){super({name:WI,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[JI]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return xt.hasMarker(t,KI)}};JI=QP;var XI="AI_TypeValidationError",QI=`vercel.ai.error.${XI}`,ek=Symbol.for(QI),eN,tk=class US extends xt{constructor({value:e,cause:r}){super({name:XI,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${Hh(r)}`,cause:r}),this[eN]=!0,this.value=e}static isInstance(e){return xt.hasMarker(e,QI)}static wrap({value:e,cause:r}){return US.isInstance(r)&&r.value===e?r:new US({value:e,cause:r})}};eN=ek;var nh=tk,tN="AI_UnsupportedFunctionalityError",rN=`vercel.ai.error.${tN}`,rk=Symbol.for(rN),nN,Wn=class extends xt{constructor({functionality:t,message:e=`'${t}' functionality not supported.`}){super({name:tN,message:e}),this[nN]=!0,this.functionality=t}static isInstance(t){return xt.hasMarker(t,rN)}};nN=rk;var iN=(t,e=21)=>(r=e)=>{let n="",i=r|0;for(;i--;)n+=t[Math.random()*t.length|0];return n};var z0=q_(cN(),1);var ak=Object.defineProperty,ok=(t,e,r)=>e in t?ak(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,B0=(t,e,r)=>ok(t,typeof e!="symbol"?e+"":e,r),q0=class extends Error{constructor(e,r){super(e),B0(this,"type"),B0(this,"field"),B0(this,"value"),B0(this,"line"),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function BS(t){}function lN(t){let{onEvent:e=BS,onError:r=BS,onRetry:n=BS,onComment:i}=t,a="",c=!0,g,_="",b="";function C(G){let ne=c?G.replace(/^\xEF\xBB\xBF/,""):G,[le,Te]=sk(`${a}${ne}`);for(let Me of le)j(Me);a=Te,c=!1}function j(G){if(G===""){te();return}if(G.startsWith(":")){i&&i(G.slice(G.startsWith(": ")?2:1));return}let ne=G.indexOf(":");if(ne!==-1){let le=G.slice(0,ne),Te=G[ne+1]===" "?2:1,Me=G.slice(ne+Te);K(le,Me,G);return}K(G,"",G)}function K(G,ne,le){switch(G){case"event":b=ne;break;case"data":_=`${_}${ne}
`;break;case"id":g=ne.includes("\0")?void 0:ne;break;case"retry":/^\d+$/.test(ne)?n(parseInt(ne,10)):r(new q0(`Invalid \`retry\` value: "${ne}"`,{type:"invalid-retry",value:ne,line:le}));break;default:r(new q0(`Unknown field "${G.length>20?`${G.slice(0,20)}\u2026`:G}"`,{type:"unknown-field",field:G,value:ne,line:le}));break}}function te(){_.length>0&&e({id:g,event:b||void 0,data:_.endsWith(`
`)?_.slice(0,-1):_}),g=void 0,_="",b=""}function z(G={}){a&&G.consume&&j(a),g=void 0,_="",b="",a=""}return{feed:C,reset:z}}function sk(t){let e=[],r="",n=t.length;for(let i=0;i<n;i++){let a=t[i];a==="\r"&&t[i+1]===`
`?(e.push(r),r="",i++):a==="\r"||a===`
`?(e.push(r),r=""):r+=a}return[e,r]}var H0=class extends TransformStream{constructor({onError:e,onRetry:r,onComment:n}={}){let i;super({start(a){i=lN({onEvent:c=>{a.enqueue(c)},onError(c){e==="terminate"?a.error(c):typeof e=="function"&&e(c)},onRetry:r,onComment:n})},transform(a){i.feed(a)}})}};function ap(...t){return t.reduce((e,r)=>({...e,...r??{}}),{})}function fN(t){return new ReadableStream({async pull(e){try{let{value:r,done:n}=await t.next();n?e.close():e.enqueue(r)}catch(r){e.error(r)}},cancel(){}})}async function dN(t){return t==null?Promise.resolve():new Promise(e=>setTimeout(e,t))}function V0(t){let e={};return t.headers.forEach((r,n)=>{e[n]=r}),e}var fv=({prefix:t,size:e=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let i=iN(r,e);if(t==null)return i;if(r.includes(n))throw new $0({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return a=>`${t}${n}${i(a)}`},ih=fv();function pN(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}function uk(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>r!=null))}function iy(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}function G0({apiKey:t,environmentVariableName:e,apiKeyParameterName:r="apiKey",description:n}){if(typeof t=="string")return t;if(t!=null)throw new p_({message:`${n} API key must be a string.`});if(typeof process>"u")throw new p_({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(t=process.env[e],t==null)throw new p_({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new p_({message:`${n} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}var ay=Symbol.for("vercel.ai.validator");function ck(t){return{[ay]:!0,validate:t}}function lk(t){return typeof t=="object"&&t!==null&&ay in t&&t[ay]===!0&&"validate"in t}function fk(t){return lk(t)?t:dk(t)}function dk(t){return ck(e=>{let r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}})}function pk({value:t,schema:e}){let r=Vh({value:t,schema:e});if(!r.success)throw nh.wrap({value:t,cause:r.error});return r.value}function Vh({value:t,schema:e}){let r=fk(e);try{if(r.validate==null)return{success:!0,value:t};let n=r.validate(t);return n.success?n:{success:!1,error:nh.wrap({value:t,cause:n.error})}}catch(n){return{success:!1,error:nh.wrap({value:t,cause:n})}}}function vk({text:t,schema:e}){try{let r=z0.default.parse(t);return e==null?r:pk({value:r,schema:e})}catch(r){throw d_.isInstance(r)||nh.isInstance(r)?r:new d_({text:t,cause:r})}}function cm({text:t,schema:e}){try{let r=z0.default.parse(t);if(e==null)return{success:!0,value:r,rawValue:r};let n=Vh({value:r,schema:e});return n.success?{...n,rawValue:r}:n}catch(r){return{success:!1,error:d_.isInstance(r)?r:new d_({text:t,cause:r})}}}function qS(t){try{return z0.default.parse(t),!0}catch{return!1}}var mk=()=>globalThis.fetch,Gf=async({url:t,headers:e,body:r,failedResponseHandler:n,successfulResponseHandler:i,abortSignal:a,fetch:c})=>hk({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:i,abortSignal:a,fetch:c}),hk=async({url:t,headers:e={},body:r,successfulResponseHandler:n,failedResponseHandler:i,abortSignal:a,fetch:c=mk()})=>{try{let g=await c(t,{method:"POST",headers:uk(e),body:r.content,signal:a}),_=V0(g);if(!g.ok){let b;try{b=await i({response:g,url:t,requestBodyValues:r.values})}catch(C){throw iy(C)||zl.isInstance(C)?C:new zl({message:"Failed to process error response",cause:C,statusCode:g.status,url:t,responseHeaders:_,requestBodyValues:r.values})}throw b.value}try{return await n({response:g,url:t,requestBodyValues:r.values})}catch(b){throw b instanceof Error&&(iy(b)||zl.isInstance(b))?b:new zl({message:"Failed to process successful response",cause:b,statusCode:g.status,url:t,responseHeaders:_,requestBodyValues:r.values})}}catch(g){if(iy(g))throw g;if(g instanceof TypeError&&g.message==="fetch failed"){let _=g.cause;if(_!=null)throw new zl({message:`Cannot connect to API: ${_.message}`,cause:_,url:t,requestBodyValues:r.values,isRetryable:!0})}throw g}};async function vN(t){return typeof t=="function"&&(t=t()),Promise.resolve(t)}var W0=({errorSchema:t,errorToMessage:e,isRetryable:r})=>async({response:n,url:i,requestBodyValues:a})=>{let c=await n.text(),g=V0(n);if(c.trim()==="")return{responseHeaders:g,value:new zl({message:n.statusText,url:i,requestBodyValues:a,statusCode:n.status,responseHeaders:g,responseBody:c,isRetryable:r==null?void 0:r(n)})};try{let _=vk({text:c,schema:t});return{responseHeaders:g,value:new zl({message:e(_),url:i,requestBodyValues:a,statusCode:n.status,responseHeaders:g,responseBody:c,data:_,isRetryable:r==null?void 0:r(n,_)})}}catch{return{responseHeaders:g,value:new zl({message:n.statusText,url:i,requestBodyValues:a,statusCode:n.status,responseHeaders:g,responseBody:c,isRetryable:r==null?void 0:r(n)})}}},m_=t=>async({response:e})=>{let r=V0(e);if(e.body==null)throw new jS({});return{responseHeaders:r,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new H0).pipeThrough(new TransformStream({transform({data:n},i){n!=="[DONE]"&&i.enqueue(cm({text:n,schema:t}))}}))}};var lm=t=>async({response:e,url:r,requestBodyValues:n})=>{let i=await e.text(),a=cm({text:i,schema:t}),c=V0(e);if(!a.success)throw new zl({message:"Invalid JSON response",cause:a.error,statusCode:e.status,responseHeaders:c,responseBody:i,url:r,requestBodyValues:n});return{responseHeaders:c,value:a.value,rawValue:a.rawValue}};var{btoa:gk,atob:_k}=globalThis;function mN(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r=_k(e);return Uint8Array.from(r,n=>n.codePointAt(0))}function Eg(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCodePoint(t[r]);return gk(e)}function K0(t){return t==null?void 0:t.replace(/\/$/,"")}var bn;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let a={};for(let c of i)a[c]=c;return a},t.getValidEnumValues=i=>{let a=t.objectKeys(i).filter(g=>typeof i[i[g]]!="number"),c={};for(let g of a)c[g]=i[g];return t.objectValues(c)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let a=[];for(let c in i)Object.prototype.hasOwnProperty.call(i,c)&&a.push(c);return a},t.find=(i,a)=>{for(let c of i)if(a(c))return c},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(c=>typeof c=="string"?`'${c}'`:c).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(bn||(bn={}));var VS;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(VS||(VS={}));var bt=bn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),oh=t=>{switch(typeof t){case"undefined":return bt.undefined;case"string":return bt.string;case"number":return isNaN(t)?bt.nan:bt.number;case"boolean":return bt.boolean;case"function":return bt.function;case"bigint":return bt.bigint;case"symbol":return bt.symbol;case"object":return Array.isArray(t)?bt.array:t===null?bt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?bt.promise:typeof Map<"u"&&t instanceof Map?bt.map:typeof Set<"u"&&t instanceof Set?bt.set:typeof Date<"u"&&t instanceof Date?bt.date:bt.object;default:return bt.unknown}},qe=bn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),yk=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),zc=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(a){return a.message},n={_errors:[]},i=a=>{for(let c of a.issues)if(c.code==="invalid_union")c.unionErrors.map(i);else if(c.code==="invalid_return_type")i(c.returnTypeError);else if(c.code==="invalid_arguments")i(c.argumentsError);else if(c.path.length===0)n._errors.push(r(c));else{let g=n,_=0;for(;_<c.path.length;){let b=c.path[_];_===c.path.length-1?(g[b]=g[b]||{_errors:[]},g[b]._errors.push(r(c))):g[b]=g[b]||{_errors:[]},g=g[b],_++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,bn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};zc.create=t=>new zc(t);var __=(t,e)=>{let r;switch(t.code){case qe.invalid_type:t.received===bt.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case qe.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,bn.jsonStringifyReplacer)}`;break;case qe.unrecognized_keys:r=`Unrecognized key(s) in object: ${bn.joinValues(t.keys,", ")}`;break;case qe.invalid_union:r="Invalid input";break;case qe.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${bn.joinValues(t.options)}`;break;case qe.invalid_enum_value:r=`Invalid enum value. Expected ${bn.joinValues(t.options)}, received '${t.received}'`;break;case qe.invalid_arguments:r="Invalid function arguments";break;case qe.invalid_return_type:r="Invalid function return type";break;case qe.invalid_date:r="Invalid date";break;case qe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:bn.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case qe.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case qe.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case qe.custom:r="Invalid input";break;case qe.invalid_intersection_types:r="Intersection results could not be merged";break;case qe.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case qe.not_finite:r="Number must be finite";break;default:r=e.defaultError,bn.assertNever(t)}return{message:r}},yN=__;function wk(t){yN=t}function J0(){return yN}var Z0=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,a=[...r,...i.path||[]],c={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let g="",_=n.filter(b=>!!b).slice().reverse();for(let b of _)g=b(c,{data:e,defaultError:g}).message;return{...i,path:a,message:g}},Sk=[];function ct(t,e){let r=J0(),n=Z0({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===__?void 0:__].filter(i=>!!i)});t.common.issues.push(n)}var Xu=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return Er;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let a=await i.key,c=await i.value;n.push({key:a,value:c})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:a,value:c}=i;if(a.status==="aborted"||c.status==="aborted")return Er;a.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof c.value<"u"||i.alwaysSet)&&(n[a.value]=c.value)}return{status:e.value,value:n}}},Er=Object.freeze({status:"aborted"}),g_=t=>({status:"dirty",value:t}),Wc=t=>({status:"valid",value:t}),GS=t=>t.status==="aborted",zS=t=>t.status==="dirty",Tg=t=>t.status==="valid",uy=t=>typeof Promise<"u"&&t instanceof Promise;function X0(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function wN(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}var Ft;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ft||(Ft={}));var oy,sy,op=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},hN=(t,e)=>{if(Tg(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new zc(t.common.issues);return this._error=r,this._error}}};function Br(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(c,g)=>{var _,b;let{message:C}=t;return c.code==="invalid_enum_value"?{message:C??g.defaultError}:typeof g.data>"u"?{message:(_=C??n)!==null&&_!==void 0?_:g.defaultError}:c.code!=="invalid_type"?{message:g.defaultError}:{message:(b=C??r)!==null&&b!==void 0?b:g.defaultError}},description:i}}var qr=class{get description(){return this._def.description}_getType(e){return oh(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:oh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Xu,ctx:{common:e.parent.common,data:e.data,parsedType:oh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(uy(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:oh(e)},a=this._parseSync({data:e,path:i.path,parent:i});return hN(i,a)}"~validate"(e){var r,n;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:oh(e)};if(!this["~standard"].async)try{let a=this._parseSync({data:e,path:[],parent:i});return Tg(a)?{value:a.value}:{issues:i.common.issues}}catch(a){!((n=(r=a==null?void 0:a.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(a=>Tg(a)?{value:a.value}:{issues:i.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:oh(e)},i=this._parse({data:e,path:n.path,parent:n}),a=await(uy(i)?i:Promise.resolve(i));return hN(n,a)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,a)=>{let c=e(i),g=()=>a.addIssue({code:qe.custom,...n(i)});return typeof Promise<"u"&&c instanceof Promise?c.then(_=>_?!0:(g(),!1)):c?!0:(g(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new zf({schema:this,typeName:Ge.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Wl.create(this,this._def)}nullable(){return dm.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return uh.create(this)}promise(){return Wh.create(this,this._def)}or(e){return Og.create([this,e],this._def)}and(e){return Ag.create(this,e,this._def)}transform(e){return new zf({...Br(this._def),schema:this,typeName:Ge.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Fg({...Br(this._def),innerType:this,defaultValue:r,typeName:Ge.ZodDefault})}brand(){return new cy({typeName:Ge.ZodBranded,type:this,...Br(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Ug({...Br(this._def),innerType:this,catchValue:r,typeName:Ge.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return ly.create(this,e)}readonly(){return jg.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},bk=/^c[^\s-]{8,}$/i,Ek=/^[0-9a-z]+$/,Tk=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Ik=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Nk=/^[a-z0-9_-]{21}$/i,Dk=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Ck=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Rk=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,xk="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",HS,Ok=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ak=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Pk=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,kk=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Lk=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Mk=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,SN="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Fk=new RegExp(`^${SN}$`);function bN(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Uk(t){return new RegExp(`^${bN(t)}$`)}function EN(t){let e=`${SN}T${bN(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function jk(t,e){return!!((e==="v4"||!e)&&Ok.test(t)||(e==="v6"||!e)&&Pk.test(t))}function Yk(t,e){if(!Dk.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function $k(t,e){return!!((e==="v4"||!e)&&Ak.test(t)||(e==="v6"||!e)&&kk.test(t))}var Gh=class t extends qr{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==bt.string){let a=this._getOrReturnCtx(e);return ct(a,{code:qe.invalid_type,expected:bt.string,received:a.parsedType}),Er}let n=new Xu,i;for(let a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),ct(i,{code:qe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),ct(i,{code:qe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){let c=e.data.length>a.value,g=e.data.length<a.value;(c||g)&&(i=this._getOrReturnCtx(e,i),c?ct(i,{code:qe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):g&&ct(i,{code:qe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")Rk.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"email",code:qe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")HS||(HS=new RegExp(xk,"u")),HS.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"emoji",code:qe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")Ik.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"uuid",code:qe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")Nk.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"nanoid",code:qe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")bk.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"cuid",code:qe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")Ek.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"cuid2",code:qe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")Tk.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"ulid",code:qe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ct(i,{validation:"url",code:qe.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"regex",code:qe.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),ct(i,{code:qe.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),ct(i,{code:qe.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),ct(i,{code:qe.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?EN(a).test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{code:qe.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?Fk.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{code:qe.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?Uk(a).test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{code:qe.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?Ck.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"duration",code:qe.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?jk(e.data,a.version)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"ip",code:qe.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?Yk(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"jwt",code:qe.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?$k(e.data,a.version)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"cidr",code:qe.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?Lk.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"base64",code:qe.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?Mk.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"base64url",code:qe.invalid_string,message:a.message}),n.dirty()):bn.assertNever(a);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:qe.invalid_string,...Ft.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ft.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ft.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ft.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ft.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ft.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ft.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ft.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ft.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ft.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ft.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ft.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ft.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ft.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...Ft.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ft.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ft.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Ft.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...Ft.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Ft.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Ft.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Ft.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Ft.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Ft.errToObj(r)})}nonempty(e){return this.min(1,Ft.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Gh.create=t=>{var e;return new Gh({checks:[],typeName:Ge.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Br(t)})};function Bk(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,a=parseInt(t.toFixed(i).replace(".","")),c=parseInt(e.toFixed(i).replace(".",""));return a%c/Math.pow(10,i)}var Ig=class t extends qr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==bt.number){let a=this._getOrReturnCtx(e);return ct(a,{code:qe.invalid_type,expected:bt.number,received:a.parsedType}),Er}let n,i=new Xu;for(let a of this._def.checks)a.kind==="int"?bn.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ct(n,{code:qe.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),ct(n,{code:qe.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),ct(n,{code:qe.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?Bk(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),ct(n,{code:qe.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ct(n,{code:qe.not_finite,message:a.message}),i.dirty()):bn.assertNever(a);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Ft.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ft.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ft.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ft.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ft.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ft.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ft.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ft.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ft.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ft.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ft.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Ft.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ft.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ft.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&bn.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Ig.create=t=>new Ig({checks:[],typeName:Ge.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Br(t)});var Ng=class t extends qr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==bt.bigint)return this._getInvalidInput(e);let n,i=new Xu;for(let a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),ct(n,{code:qe.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),ct(n,{code:qe.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ct(n,{code:qe.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):bn.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return ct(r,{code:qe.invalid_type,expected:bt.bigint,received:r.parsedType}),Er}gte(e,r){return this.setLimit("min",e,!0,Ft.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ft.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ft.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ft.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ft.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ft.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ft.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ft.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ft.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ft.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Ng.create=t=>{var e;return new Ng({checks:[],typeName:Ge.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Br(t)})};var Dg=class extends qr{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==bt.boolean){let n=this._getOrReturnCtx(e);return ct(n,{code:qe.invalid_type,expected:bt.boolean,received:n.parsedType}),Er}return Wc(e.data)}};Dg.create=t=>new Dg({typeName:Ge.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Br(t)});var Cg=class t extends qr{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==bt.date){let a=this._getOrReturnCtx(e);return ct(a,{code:qe.invalid_type,expected:bt.date,received:a.parsedType}),Er}if(isNaN(e.data.getTime())){let a=this._getOrReturnCtx(e);return ct(a,{code:qe.invalid_date}),Er}let n=new Xu,i;for(let a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),ct(i,{code:qe.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),ct(i,{code:qe.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):bn.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Ft.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Ft.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Cg.create=t=>new Cg({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ge.ZodDate,...Br(t)});var y_=class extends qr{_parse(e){if(this._getType(e)!==bt.symbol){let n=this._getOrReturnCtx(e);return ct(n,{code:qe.invalid_type,expected:bt.symbol,received:n.parsedType}),Er}return Wc(e.data)}};y_.create=t=>new y_({typeName:Ge.ZodSymbol,...Br(t)});var Rg=class extends qr{_parse(e){if(this._getType(e)!==bt.undefined){let n=this._getOrReturnCtx(e);return ct(n,{code:qe.invalid_type,expected:bt.undefined,received:n.parsedType}),Er}return Wc(e.data)}};Rg.create=t=>new Rg({typeName:Ge.ZodUndefined,...Br(t)});var xg=class extends qr{_parse(e){if(this._getType(e)!==bt.null){let n=this._getOrReturnCtx(e);return ct(n,{code:qe.invalid_type,expected:bt.null,received:n.parsedType}),Er}return Wc(e.data)}};xg.create=t=>new xg({typeName:Ge.ZodNull,...Br(t)});var zh=class extends qr{constructor(){super(...arguments),this._any=!0}_parse(e){return Wc(e.data)}};zh.create=t=>new zh({typeName:Ge.ZodAny,...Br(t)});var sh=class extends qr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Wc(e.data)}};sh.create=t=>new sh({typeName:Ge.ZodUnknown,...Br(t)});var dv=class extends qr{_parse(e){let r=this._getOrReturnCtx(e);return ct(r,{code:qe.invalid_type,expected:bt.never,received:r.parsedType}),Er}};dv.create=t=>new dv({typeName:Ge.ZodNever,...Br(t)});var w_=class extends qr{_parse(e){if(this._getType(e)!==bt.undefined){let n=this._getOrReturnCtx(e);return ct(n,{code:qe.invalid_type,expected:bt.void,received:n.parsedType}),Er}return Wc(e.data)}};w_.create=t=>new w_({typeName:Ge.ZodVoid,...Br(t)});var uh=class t extends qr{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==bt.array)return ct(r,{code:qe.invalid_type,expected:bt.array,received:r.parsedType}),Er;if(i.exactLength!==null){let c=r.data.length>i.exactLength.value,g=r.data.length<i.exactLength.value;(c||g)&&(ct(r,{code:c?qe.too_big:qe.too_small,minimum:g?i.exactLength.value:void 0,maximum:c?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(ct(r,{code:qe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(ct(r,{code:qe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((c,g)=>i.type._parseAsync(new op(r,c,r.path,g)))).then(c=>Xu.mergeArray(n,c));let a=[...r.data].map((c,g)=>i.type._parseSync(new op(r,c,r.path,g)));return Xu.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:Ft.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:Ft.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:Ft.toString(r)}})}nonempty(e){return this.min(1,e)}};uh.create=(t,e)=>new uh({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ge.ZodArray,...Br(e)});function h_(t){if(t instanceof Kl){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Wl.create(h_(n))}return new Kl({...t._def,shape:()=>e})}else return t instanceof uh?new uh({...t._def,type:h_(t.element)}):t instanceof Wl?Wl.create(h_(t.unwrap())):t instanceof dm?dm.create(h_(t.unwrap())):t instanceof fm?fm.create(t.items.map(e=>h_(e))):t}var Kl=class t extends qr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=bn.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==bt.object){let b=this._getOrReturnCtx(e);return ct(b,{code:qe.invalid_type,expected:bt.object,received:b.parsedType}),Er}let{status:n,ctx:i}=this._processInputParams(e),{shape:a,keys:c}=this._getCached(),g=[];if(!(this._def.catchall instanceof dv&&this._def.unknownKeys==="strip"))for(let b in i.data)c.includes(b)||g.push(b);let _=[];for(let b of c){let C=a[b],j=i.data[b];_.push({key:{status:"valid",value:b},value:C._parse(new op(i,j,i.path,b)),alwaysSet:b in i.data})}if(this._def.catchall instanceof dv){let b=this._def.unknownKeys;if(b==="passthrough")for(let C of g)_.push({key:{status:"valid",value:C},value:{status:"valid",value:i.data[C]}});else if(b==="strict")g.length>0&&(ct(i,{code:qe.unrecognized_keys,keys:g}),n.dirty());else if(b!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let b=this._def.catchall;for(let C of g){let j=i.data[C];_.push({key:{status:"valid",value:C},value:b._parse(new op(i,j,i.path,C)),alwaysSet:C in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let b=[];for(let C of _){let j=await C.key,K=await C.value;b.push({key:j,value:K,alwaysSet:C.alwaysSet})}return b}).then(b=>Xu.mergeObjectSync(n,b)):Xu.mergeObjectSync(n,_)}get shape(){return this._def.shape()}strict(e){return Ft.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,a,c,g;let _=(c=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,r,n).message)!==null&&c!==void 0?c:n.defaultError;return r.code==="unrecognized_keys"?{message:(g=Ft.errToObj(e).message)!==null&&g!==void 0?g:_}:{message:_}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ge.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return bn.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return bn.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return h_(this)}partial(e){let r={};return bn.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return bn.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof Wl;)a=a._def.innerType;r[n]=a}}),new t({...this._def,shape:()=>r})}keyof(){return TN(bn.objectKeys(this.shape))}};Kl.create=(t,e)=>new Kl({shape:()=>t,unknownKeys:"strip",catchall:dv.create(),typeName:Ge.ZodObject,...Br(e)});Kl.strictCreate=(t,e)=>new Kl({shape:()=>t,unknownKeys:"strict",catchall:dv.create(),typeName:Ge.ZodObject,...Br(e)});Kl.lazycreate=(t,e)=>new Kl({shape:t,unknownKeys:"strip",catchall:dv.create(),typeName:Ge.ZodObject,...Br(e)});var Og=class extends qr{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(a){for(let g of a)if(g.result.status==="valid")return g.result;for(let g of a)if(g.result.status==="dirty")return r.common.issues.push(...g.ctx.common.issues),g.result;let c=a.map(g=>new zc(g.ctx.common.issues));return ct(r,{code:qe.invalid_union,unionErrors:c}),Er}if(r.common.async)return Promise.all(n.map(async a=>{let c={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:c}),ctx:c}})).then(i);{let a,c=[];for(let _ of n){let b={...r,common:{...r.common,issues:[]},parent:null},C=_._parseSync({data:r.data,path:r.path,parent:b});if(C.status==="valid")return C;C.status==="dirty"&&!a&&(a={result:C,ctx:b}),b.common.issues.length&&c.push(b.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;let g=c.map(_=>new zc(_));return ct(r,{code:qe.invalid_union,unionErrors:g}),Er}}get options(){return this._def.options}};Og.create=(t,e)=>new Og({options:t,typeName:Ge.ZodUnion,...Br(e)});var ah=t=>t instanceof Pg?ah(t.schema):t instanceof zf?ah(t.innerType()):t instanceof kg?[t.value]:t instanceof Lg?t.options:t instanceof Mg?bn.objectValues(t.enum):t instanceof Fg?ah(t._def.innerType):t instanceof Rg?[void 0]:t instanceof xg?[null]:t instanceof Wl?[void 0,...ah(t.unwrap())]:t instanceof dm?[null,...ah(t.unwrap())]:t instanceof cy||t instanceof jg?ah(t.unwrap()):t instanceof Ug?ah(t._def.innerType):[],Q0=class t extends qr{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==bt.object)return ct(r,{code:qe.invalid_type,expected:bt.object,received:r.parsedType}),Er;let n=this.discriminator,i=r.data[n],a=this.optionsMap.get(i);return a?r.common.async?a._parseAsync({data:r.data,path:r.path,parent:r}):a._parseSync({data:r.data,path:r.path,parent:r}):(ct(r,{code:qe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Er)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let a of r){let c=ah(a.shape[e]);if(!c.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let g of c){if(i.has(g))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(g)}`);i.set(g,a)}}return new t({typeName:Ge.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Br(n)})}};function WS(t,e){let r=oh(t),n=oh(e);if(t===e)return{valid:!0,data:t};if(r===bt.object&&n===bt.object){let i=bn.objectKeys(e),a=bn.objectKeys(t).filter(g=>i.indexOf(g)!==-1),c={...t,...e};for(let g of a){let _=WS(t[g],e[g]);if(!_.valid)return{valid:!1};c[g]=_.data}return{valid:!0,data:c}}else if(r===bt.array&&n===bt.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let a=0;a<t.length;a++){let c=t[a],g=e[a],_=WS(c,g);if(!_.valid)return{valid:!1};i.push(_.data)}return{valid:!0,data:i}}else return r===bt.date&&n===bt.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Ag=class extends qr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(a,c)=>{if(GS(a)||GS(c))return Er;let g=WS(a.value,c.value);return g.valid?((zS(a)||zS(c))&&r.dirty(),{status:r.value,value:g.data}):(ct(n,{code:qe.invalid_intersection_types}),Er)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,c])=>i(a,c)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Ag.create=(t,e,r)=>new Ag({left:t,right:e,typeName:Ge.ZodIntersection,...Br(r)});var fm=class t extends qr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==bt.array)return ct(n,{code:qe.invalid_type,expected:bt.array,received:n.parsedType}),Er;if(n.data.length<this._def.items.length)return ct(n,{code:qe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Er;!this._def.rest&&n.data.length>this._def.items.length&&(ct(n,{code:qe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let a=[...n.data].map((c,g)=>{let _=this._def.items[g]||this._def.rest;return _?_._parse(new op(n,c,n.path,g)):null}).filter(c=>!!c);return n.common.async?Promise.all(a).then(c=>Xu.mergeArray(r,c)):Xu.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};fm.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new fm({items:t,typeName:Ge.ZodTuple,rest:null,...Br(e)})};var ew=class t extends qr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==bt.object)return ct(n,{code:qe.invalid_type,expected:bt.object,received:n.parsedType}),Er;let i=[],a=this._def.keyType,c=this._def.valueType;for(let g in n.data)i.push({key:a._parse(new op(n,g,n.path,g)),value:c._parse(new op(n,n.data[g],n.path,g)),alwaysSet:g in n.data});return n.common.async?Xu.mergeObjectAsync(r,i):Xu.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof qr?new t({keyType:e,valueType:r,typeName:Ge.ZodRecord,...Br(n)}):new t({keyType:Gh.create(),valueType:e,typeName:Ge.ZodRecord,...Br(r)})}},S_=class extends qr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==bt.map)return ct(n,{code:qe.invalid_type,expected:bt.map,received:n.parsedType}),Er;let i=this._def.keyType,a=this._def.valueType,c=[...n.data.entries()].map(([g,_],b)=>({key:i._parse(new op(n,g,n.path,[b,"key"])),value:a._parse(new op(n,_,n.path,[b,"value"]))}));if(n.common.async){let g=new Map;return Promise.resolve().then(async()=>{for(let _ of c){let b=await _.key,C=await _.value;if(b.status==="aborted"||C.status==="aborted")return Er;(b.status==="dirty"||C.status==="dirty")&&r.dirty(),g.set(b.value,C.value)}return{status:r.value,value:g}})}else{let g=new Map;for(let _ of c){let b=_.key,C=_.value;if(b.status==="aborted"||C.status==="aborted")return Er;(b.status==="dirty"||C.status==="dirty")&&r.dirty(),g.set(b.value,C.value)}return{status:r.value,value:g}}}};S_.create=(t,e,r)=>new S_({valueType:e,keyType:t,typeName:Ge.ZodMap,...Br(r)});var b_=class t extends qr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==bt.set)return ct(n,{code:qe.invalid_type,expected:bt.set,received:n.parsedType}),Er;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(ct(n,{code:qe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(ct(n,{code:qe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let a=this._def.valueType;function c(_){let b=new Set;for(let C of _){if(C.status==="aborted")return Er;C.status==="dirty"&&r.dirty(),b.add(C.value)}return{status:r.value,value:b}}let g=[...n.data.values()].map((_,b)=>a._parse(new op(n,_,n.path,b)));return n.common.async?Promise.all(g).then(_=>c(_)):c(g)}min(e,r){return new t({...this._def,minSize:{value:e,message:Ft.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:Ft.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};b_.create=(t,e)=>new b_({valueType:t,minSize:null,maxSize:null,typeName:Ge.ZodSet,...Br(e)});var tw=class t extends qr{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==bt.function)return ct(r,{code:qe.invalid_type,expected:bt.function,received:r.parsedType}),Er;function n(g,_){return Z0({data:g,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,J0(),__].filter(b=>!!b),issueData:{code:qe.invalid_arguments,argumentsError:_}})}function i(g,_){return Z0({data:g,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,J0(),__].filter(b=>!!b),issueData:{code:qe.invalid_return_type,returnTypeError:_}})}let a={errorMap:r.common.contextualErrorMap},c=r.data;if(this._def.returns instanceof Wh){let g=this;return Wc(async function(..._){let b=new zc([]),C=await g._def.args.parseAsync(_,a).catch(te=>{throw b.addIssue(n(_,te)),b}),j=await Reflect.apply(c,this,C);return await g._def.returns._def.type.parseAsync(j,a).catch(te=>{throw b.addIssue(i(j,te)),b})})}else{let g=this;return Wc(function(..._){let b=g._def.args.safeParse(_,a);if(!b.success)throw new zc([n(_,b.error)]);let C=Reflect.apply(c,this,b.data),j=g._def.returns.safeParse(C,a);if(!j.success)throw new zc([i(C,j.error)]);return j.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:fm.create(e).rest(sh.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||fm.create([]).rest(sh.create()),returns:r||sh.create(),typeName:Ge.ZodFunction,...Br(n)})}},Pg=class extends qr{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Pg.create=(t,e)=>new Pg({getter:t,typeName:Ge.ZodLazy,...Br(e)});var kg=class extends qr{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return ct(r,{received:r.data,code:qe.invalid_literal,expected:this._def.value}),Er}return{status:"valid",value:e.data}}get value(){return this._def.value}};kg.create=(t,e)=>new kg({value:t,typeName:Ge.ZodLiteral,...Br(e)});function TN(t,e){return new Lg({values:t,typeName:Ge.ZodEnum,...Br(e)})}var Lg=class t extends qr{constructor(){super(...arguments),oy.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return ct(r,{expected:bn.joinValues(n),received:r.parsedType,code:qe.invalid_type}),Er}if(X0(this,oy,"f")||wN(this,oy,new Set(this._def.values),"f"),!X0(this,oy,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return ct(r,{received:r.data,code:qe.invalid_enum_value,options:n}),Er}return Wc(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};oy=new WeakMap;Lg.create=TN;var Mg=class extends qr{constructor(){super(...arguments),sy.set(this,void 0)}_parse(e){let r=bn.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==bt.string&&n.parsedType!==bt.number){let i=bn.objectValues(r);return ct(n,{expected:bn.joinValues(i),received:n.parsedType,code:qe.invalid_type}),Er}if(X0(this,sy,"f")||wN(this,sy,new Set(bn.getValidEnumValues(this._def.values)),"f"),!X0(this,sy,"f").has(e.data)){let i=bn.objectValues(r);return ct(n,{received:n.data,code:qe.invalid_enum_value,options:i}),Er}return Wc(e.data)}get enum(){return this._def.values}};sy=new WeakMap;Mg.create=(t,e)=>new Mg({values:t,typeName:Ge.ZodNativeEnum,...Br(e)});var Wh=class extends qr{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==bt.promise&&r.common.async===!1)return ct(r,{code:qe.invalid_type,expected:bt.promise,received:r.parsedType}),Er;let n=r.parsedType===bt.promise?r.data:Promise.resolve(r.data);return Wc(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};Wh.create=(t,e)=>new Wh({type:t,typeName:Ge.ZodPromise,...Br(e)});var zf=class extends qr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ge.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:c=>{ct(n,c),c.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){let c=i.transform(n.data,a);if(n.common.async)return Promise.resolve(c).then(async g=>{if(r.value==="aborted")return Er;let _=await this._def.schema._parseAsync({data:g,path:n.path,parent:n});return _.status==="aborted"?Er:_.status==="dirty"||r.value==="dirty"?g_(_.value):_});{if(r.value==="aborted")return Er;let g=this._def.schema._parseSync({data:c,path:n.path,parent:n});return g.status==="aborted"?Er:g.status==="dirty"||r.value==="dirty"?g_(g.value):g}}if(i.type==="refinement"){let c=g=>{let _=i.refinement(g,a);if(n.common.async)return Promise.resolve(_);if(_ instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return g};if(n.common.async===!1){let g=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return g.status==="aborted"?Er:(g.status==="dirty"&&r.dirty(),c(g.value),{status:r.value,value:g.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(g=>g.status==="aborted"?Er:(g.status==="dirty"&&r.dirty(),c(g.value).then(()=>({status:r.value,value:g.value}))))}if(i.type==="transform")if(n.common.async===!1){let c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Tg(c))return c;let g=i.transform(c.value,a);if(g instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:g}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>Tg(c)?Promise.resolve(i.transform(c.value,a)).then(g=>({status:r.value,value:g})):c);bn.assertNever(i)}};zf.create=(t,e,r)=>new zf({schema:t,typeName:Ge.ZodEffects,effect:e,...Br(r)});zf.createWithPreprocess=(t,e,r)=>new zf({schema:e,effect:{type:"preprocess",transform:t},typeName:Ge.ZodEffects,...Br(r)});var Wl=class extends qr{_parse(e){return this._getType(e)===bt.undefined?Wc(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Wl.create=(t,e)=>new Wl({innerType:t,typeName:Ge.ZodOptional,...Br(e)});var dm=class extends qr{_parse(e){return this._getType(e)===bt.null?Wc(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};dm.create=(t,e)=>new dm({innerType:t,typeName:Ge.ZodNullable,...Br(e)});var Fg=class extends qr{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===bt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Fg.create=(t,e)=>new Fg({innerType:t,typeName:Ge.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Br(e)});var Ug=class extends qr{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return uy(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new zc(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new zc(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Ug.create=(t,e)=>new Ug({innerType:t,typeName:Ge.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Br(e)});var E_=class extends qr{_parse(e){if(this._getType(e)!==bt.nan){let n=this._getOrReturnCtx(e);return ct(n,{code:qe.invalid_type,expected:bt.nan,received:n.parsedType}),Er}return{status:"valid",value:e.data}}};E_.create=t=>new E_({typeName:Ge.ZodNaN,...Br(t)});var qk=Symbol("zod_brand"),cy=class extends qr{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},ly=class t extends qr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Er:a.status==="dirty"?(r.dirty(),g_(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Er:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:Ge.ZodPipeline})}},jg=class extends qr{_parse(e){let r=this._def.innerType._parse(e),n=i=>(Tg(i)&&(i.value=Object.freeze(i.value)),i);return uy(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};jg.create=(t,e)=>new jg({innerType:t,typeName:Ge.ZodReadonly,...Br(e)});function gN(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function IN(t,e={},r){return t?zh.create().superRefine((n,i)=>{var a,c;let g=t(n);if(g instanceof Promise)return g.then(_=>{var b,C;if(!_){let j=gN(e,n),K=(C=(b=j.fatal)!==null&&b!==void 0?b:r)!==null&&C!==void 0?C:!0;i.addIssue({code:"custom",...j,fatal:K})}});if(!g){let _=gN(e,n),b=(c=(a=_.fatal)!==null&&a!==void 0?a:r)!==null&&c!==void 0?c:!0;i.addIssue({code:"custom",..._,fatal:b})}}):zh.create()}var Hk={object:Kl.lazycreate},Ge;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ge||(Ge={}));var Vk=(t,e={message:`Input not instance of ${t.name}`})=>IN(r=>r instanceof t,e),NN=Gh.create,DN=Ig.create,Gk=E_.create,zk=Ng.create,CN=Dg.create,Wk=Cg.create,Kk=y_.create,Jk=Rg.create,Zk=xg.create,Xk=zh.create,Qk=sh.create,e1=dv.create,t1=w_.create,r1=uh.create,n1=Kl.create,i1=Kl.strictCreate,a1=Og.create,o1=Q0.create,s1=Ag.create,u1=fm.create,c1=ew.create,l1=S_.create,f1=b_.create,d1=tw.create,p1=Pg.create,v1=kg.create,m1=Lg.create,h1=Mg.create,g1=Wh.create,_N=zf.create,_1=Wl.create,y1=dm.create,w1=zf.createWithPreprocess,S1=ly.create,b1=()=>NN().optional(),E1=()=>DN().optional(),T1=()=>CN().optional(),I1={string:t=>Gh.create({...t,coerce:!0}),number:t=>Ig.create({...t,coerce:!0}),boolean:t=>Dg.create({...t,coerce:!0}),bigint:t=>Ng.create({...t,coerce:!0}),date:t=>Cg.create({...t,coerce:!0})},N1=Er,P=Object.freeze({__proto__:null,defaultErrorMap:__,setErrorMap:wk,getErrorMap:J0,makeIssue:Z0,EMPTY_PATH:Sk,addIssueToContext:ct,ParseStatus:Xu,INVALID:Er,DIRTY:g_,OK:Wc,isAborted:GS,isDirty:zS,isValid:Tg,isAsync:uy,get util(){return bn},get objectUtil(){return VS},ZodParsedType:bt,getParsedType:oh,ZodType:qr,datetimeRegex:EN,ZodString:Gh,ZodNumber:Ig,ZodBigInt:Ng,ZodBoolean:Dg,ZodDate:Cg,ZodSymbol:y_,ZodUndefined:Rg,ZodNull:xg,ZodAny:zh,ZodUnknown:sh,ZodNever:dv,ZodVoid:w_,ZodArray:uh,ZodObject:Kl,ZodUnion:Og,ZodDiscriminatedUnion:Q0,ZodIntersection:Ag,ZodTuple:fm,ZodRecord:ew,ZodMap:S_,ZodSet:b_,ZodFunction:tw,ZodLazy:Pg,ZodLiteral:kg,ZodEnum:Lg,ZodNativeEnum:Mg,ZodPromise:Wh,ZodEffects:zf,ZodTransformer:zf,ZodOptional:Wl,ZodNullable:dm,ZodDefault:Fg,ZodCatch:Ug,ZodNaN:E_,BRAND:qk,ZodBranded:cy,ZodPipeline:ly,ZodReadonly:jg,custom:IN,Schema:qr,ZodSchema:qr,late:Hk,get ZodFirstPartyTypeKind(){return Ge},coerce:I1,any:Xk,array:r1,bigint:zk,boolean:CN,date:Wk,discriminatedUnion:o1,effect:_N,enum:m1,function:d1,instanceof:Vk,intersection:s1,lazy:p1,literal:v1,map:l1,nan:Gk,nativeEnum:h1,never:e1,null:Zk,nullable:y1,number:DN,object:n1,oboolean:T1,onumber:E1,optional:_1,ostring:b1,pipeline:S1,preprocess:w1,promise:g1,record:c1,set:f1,strictObject:i1,string:NN,symbol:Kk,transformer:_N,tuple:u1,undefined:Jk,union:a1,unknown:Qk,void:t1,NEVER:N1,ZodIssueCode:qe,quotelessJson:yk,ZodError:zc});var D1=P.object({type:P.literal("error"),error:P.object({type:P.string(),message:P.string()})}),RN=W0({errorSchema:D1,errorToMessage:t=>t.error.message});function C1(t){var e;let r=(e=t.tools)!=null&&e.length?t.tools:void 0,n=[],i=new Set;if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:n,betas:i};let a=[];for(let _ of r)switch(_.type){case"function":a.push({name:_.name,description:_.description,input_schema:_.parameters});break;case"provider-defined":switch(_.id){case"anthropic.computer_20250124":i.add("computer-use-2025-01-24"),a.push({name:_.name,type:"computer_20250124",display_width_px:_.args.displayWidthPx,display_height_px:_.args.displayHeightPx,display_number:_.args.displayNumber});break;case"anthropic.computer_20241022":i.add("computer-use-2024-10-22"),a.push({name:_.name,type:"computer_20241022",display_width_px:_.args.displayWidthPx,display_height_px:_.args.displayHeightPx,display_number:_.args.displayNumber});break;case"anthropic.text_editor_20241022":i.add("computer-use-2024-10-22"),a.push({name:_.name,type:"text_editor_20241022"});break;case"anthropic.bash_20241022":i.add("computer-use-2024-10-22"),a.push({name:_.name,type:"bash_20241022"});break;default:n.push({type:"unsupported-tool",tool:_});break}break;default:n.push({type:"unsupported-tool",tool:_});break}let c=t.toolChoice;if(c==null)return{tools:a,tool_choice:void 0,toolWarnings:n,betas:i};let g=c.type;switch(g){case"auto":return{tools:a,tool_choice:{type:"auto"},toolWarnings:n,betas:i};case"required":return{tools:a,tool_choice:{type:"any"},toolWarnings:n,betas:i};case"none":return{tools:void 0,tool_choice:void 0,toolWarnings:n,betas:i};case"tool":return{tools:a,tool_choice:{type:"tool",name:c.toolName},toolWarnings:n,betas:i};default:{let _=g;throw new Wn({functionality:`Unsupported tool choice type: ${_}`})}}}function R1({prompt:t}){var e,r,n,i;let a=new Set,c=x1(t),g,_=[];function b(C){var j;let K=C==null?void 0:C.anthropic;return(j=K==null?void 0:K.cacheControl)!=null?j:K==null?void 0:K.cache_control}for(let C=0;C<c.length;C++){let j=c[C],K=C===c.length-1,te=j.type;switch(te){case"system":{if(g!=null)throw new Wn({functionality:"Multiple system messages that are separated by user/assistant messages"});g=j.messages.map(({content:z,providerMetadata:G})=>({type:"text",text:z,cache_control:b(G)}));break}case"user":{let z=[];for(let G of j.messages){let{role:ne,content:le}=G;switch(ne){case"user":{for(let Te=0;Te<le.length;Te++){let Me=le[Te],Se=Te===le.length-1,ke=(e=b(Me.providerMetadata))!=null?e:Se?b(G.providerMetadata):void 0;switch(Me.type){case"text":{z.push({type:"text",text:Me.text,cache_control:ke});break}case"image":{if(Me.image instanceof URL)throw new Wn({functionality:"Image URLs in user messages"});z.push({type:"image",source:{type:"base64",media_type:(r=Me.mimeType)!=null?r:"image/jpeg",data:Eg(Me.image)},cache_control:ke});break}case"file":{if(Me.data instanceof URL)throw new Wn({functionality:"Image URLs in user messages"});if(Me.mimeType!=="application/pdf")throw new Wn({functionality:"Non-PDF files in user messages"});a.add("pdfs-2024-09-25"),z.push({type:"document",source:{type:"base64",media_type:"application/pdf",data:Me.data},cache_control:ke});break}}}break}case"tool":{for(let Te=0;Te<le.length;Te++){let Me=le[Te],Se=Te===le.length-1,ke=(n=b(Me.providerMetadata))!=null?n:Se?b(G.providerMetadata):void 0,et=Me.content!=null?Me.content.map(ot=>{var Dt;switch(ot.type){case"text":return{type:"text",text:ot.text,cache_control:void 0};case"image":return{type:"image",source:{type:"base64",media_type:(Dt=ot.mimeType)!=null?Dt:"image/jpeg",data:ot.data},cache_control:void 0}}}):JSON.stringify(Me.result);z.push({type:"tool_result",tool_use_id:Me.toolCallId,content:et,is_error:Me.isError,cache_control:ke})}break}default:{let Te=ne;throw new Error(`Unsupported role: ${Te}`)}}}_.push({role:"user",content:z});break}case"assistant":{let z=[];for(let G=0;G<j.messages.length;G++){let ne=j.messages[G],le=G===j.messages.length-1,{content:Te}=ne;for(let Me=0;Me<Te.length;Me++){let Se=Te[Me],ke=Me===Te.length-1,et=(i=b(Se.providerMetadata))!=null?i:ke?b(ne.providerMetadata):void 0;switch(Se.type){case"text":{z.push({type:"text",text:K&&le&&ke?Se.text.trim():Se.text,cache_control:et});break}case"reasoning":{z.push({type:"thinking",thinking:Se.text,signature:Se.signature,cache_control:et});break}case"redacted-reasoning":{z.push({type:"redacted_thinking",data:Se.data,cache_control:et});break}case"tool-call":{z.push({type:"tool_use",id:Se.toolCallId,name:Se.toolName,input:Se.args,cache_control:et});break}default:{let ot=Se;throw new Error(`Unsupported part: ${ot}`)}}}}_.push({role:"assistant",content:z});break}default:{let z=te;throw new Error(`Unsupported type: ${z}`)}}}return{prompt:{system:g,messages:_},betas:a}}function x1(t){let e=[],r;for(let n of t){let{role:i}=n;switch(i){case"system":{(r==null?void 0:r.type)!=="system"&&(r={type:"system",messages:[]},e.push(r)),r.messages.push(n);break}case"assistant":{(r==null?void 0:r.type)!=="assistant"&&(r={type:"assistant",messages:[]},e.push(r)),r.messages.push(n);break}case"user":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},e.push(r)),r.messages.push(n);break}case"tool":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},e.push(r)),r.messages.push(n);break}default:{let a=i;throw new Error(`Unsupported role: ${a}`)}}}return e}function xN(t){switch(t){case"end_turn":case"stop_sequence":return"stop";case"tool_use":return"tool-calls";case"max_tokens":return"length";default:return"unknown"}}var O1=class{constructor(t,e,r){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.supportsImageUrls=!1,this.modelId=t,this.settings=e,this.config=r}get provider(){return this.config.provider}async getArgs({mode:t,prompt:e,maxTokens:r=4096,temperature:n,topP:i,topK:a,frequencyPenalty:c,presencePenalty:g,stopSequences:_,responseFormat:b,seed:C,providerMetadata:j}){var K,te,z;let G=t.type,ne=[];c!=null&&ne.push({type:"unsupported-setting",setting:"frequencyPenalty"}),g!=null&&ne.push({type:"unsupported-setting",setting:"presencePenalty"}),C!=null&&ne.push({type:"unsupported-setting",setting:"seed"}),b!=null&&b.type!=="text"&&ne.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:le,betas:Te}=R1({prompt:e}),Me=k1.safeParse((K=j==null?void 0:j.anthropic)==null?void 0:K.thinking);if(!Me.success)throw new $0({argument:"providerOptions.anthropic.thinking",message:"invalid thinking options",cause:Me.error});let Se=((te=Me.data)==null?void 0:te.type)==="enabled",ke=(z=Me.data)==null?void 0:z.budgetTokens,et={model:this.modelId,max_tokens:r,temperature:n,top_k:a,top_p:i,stop_sequences:_,...Se&&{thinking:{type:"enabled",budget_tokens:ke}},system:le.system,messages:le.messages};if(Se){if(ke==null)throw new Wn({functionality:"thinking requires a budget"});et.temperature!=null&&(et.temperature=void 0,ne.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported when thinking is enabled"})),a!=null&&(et.top_k=void 0,ne.push({type:"unsupported-setting",setting:"topK",details:"topK is not supported when thinking is enabled"})),i!=null&&(et.top_p=void 0,ne.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported when thinking is enabled"})),et.max_tokens=r+ke}switch(G){case"regular":{let{tools:ot,tool_choice:Dt,toolWarnings:qt,betas:lr}=C1(t);return{args:{...et,tools:ot,tool_choice:Dt},warnings:[...ne,...qt],betas:new Set([...Te,...lr])}}case"object-json":throw new Wn({functionality:"json-mode object generation"});case"object-tool":{let{name:ot,description:Dt,parameters:qt}=t.tool;return{args:{...et,tools:[{name:ot,description:Dt,input_schema:qt}],tool_choice:{type:"tool",name:ot}},warnings:ne,betas:Te}}default:{let ot=G;throw new Error(`Unsupported type: ${ot}`)}}}async getHeaders({betas:t,headers:e}){return ap(await vN(this.config.headers),t.size>0?{"anthropic-beta":Array.from(t).join(",")}:{},e)}buildRequestUrl(t){var e,r,n;return(n=(r=(e=this.config).buildRequestUrl)==null?void 0:r.call(e,this.config.baseURL,t))!=null?n:`${this.config.baseURL}/messages`}transformRequestBody(t){var e,r,n;return(n=(r=(e=this.config).transformRequestBody)==null?void 0:r.call(e,t))!=null?n:t}async doGenerate(t){var e,r,n,i;let{args:a,warnings:c,betas:g}=await this.getArgs(t),{responseHeaders:_,value:b}=await Gf({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:g,headers:t.headers}),body:this.transformRequestBody(a),failedResponseHandler:RN,successfulResponseHandler:lm(A1),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:C,...j}=a,K="";for(let G of b.content)G.type==="text"&&(K+=G.text);let te;if(b.content.some(G=>G.type==="tool_use")){te=[];for(let G of b.content)G.type==="tool_use"&&te.push({toolCallType:"function",toolCallId:G.id,toolName:G.name,args:JSON.stringify(G.input)})}let z=b.content.filter(G=>G.type==="redacted_thinking"||G.type==="thinking").map(G=>G.type==="thinking"?{type:"text",text:G.thinking,signature:G.signature}:{type:"redacted",data:G.data});return{text:K,reasoning:z.length>0?z:void 0,toolCalls:te,finishReason:xN(b.stop_reason),usage:{promptTokens:b.usage.input_tokens,completionTokens:b.usage.output_tokens},rawCall:{rawPrompt:C,rawSettings:j},rawResponse:{headers:_},response:{id:(e=b.id)!=null?e:void 0,modelId:(r=b.model)!=null?r:void 0},warnings:c,providerMetadata:{anthropic:{cacheCreationInputTokens:(n=b.usage.cache_creation_input_tokens)!=null?n:null,cacheReadInputTokens:(i=b.usage.cache_read_input_tokens)!=null?i:null}},request:{body:JSON.stringify(a)}}}async doStream(t){let{args:e,warnings:r,betas:n}=await this.getArgs(t),i={...e,stream:!0},{responseHeaders:a,value:c}=await Gf({url:this.buildRequestUrl(!0),headers:await this.getHeaders({betas:n,headers:t.headers}),body:this.transformRequestBody(i),failedResponseHandler:RN,successfulResponseHandler:m_(P1),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:g,..._}=e,b="unknown",C={promptTokens:Number.NaN,completionTokens:Number.NaN},j={},K,te;return{stream:c.pipeThrough(new TransformStream({transform(z,G){var ne,le,Te,Me;if(!z.success){G.enqueue({type:"error",error:z.error});return}let Se=z.value;switch(Se.type){case"ping":return;case"content_block_start":{let ke=Se.content_block.type;switch(te=ke,ke){case"text":case"thinking":return;case"redacted_thinking":{G.enqueue({type:"redacted-reasoning",data:Se.content_block.data});return}case"tool_use":{j[Se.index]={toolCallId:Se.content_block.id,toolName:Se.content_block.name,jsonText:""};return}default:{let et=ke;throw new Error(`Unsupported content block type: ${et}`)}}}case"content_block_stop":{if(j[Se.index]!=null){let ke=j[Se.index];G.enqueue({type:"tool-call",toolCallType:"function",toolCallId:ke.toolCallId,toolName:ke.toolName,args:ke.jsonText}),delete j[Se.index]}te=void 0;return}case"content_block_delta":{let ke=Se.delta.type;switch(ke){case"text_delta":{G.enqueue({type:"text-delta",textDelta:Se.delta.text});return}case"thinking_delta":{G.enqueue({type:"reasoning",textDelta:Se.delta.thinking});return}case"signature_delta":{te==="thinking"&&G.enqueue({type:"reasoning-signature",signature:Se.delta.signature});return}case"input_json_delta":{let et=j[Se.index];G.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:et.toolCallId,toolName:et.toolName,argsTextDelta:Se.delta.partial_json}),et.jsonText+=Se.delta.partial_json;return}default:{let et=ke;throw new Error(`Unsupported delta type: ${et}`)}}}case"message_start":{C.promptTokens=Se.message.usage.input_tokens,C.completionTokens=Se.message.usage.output_tokens,K={anthropic:{cacheCreationInputTokens:(ne=Se.message.usage.cache_creation_input_tokens)!=null?ne:null,cacheReadInputTokens:(le=Se.message.usage.cache_read_input_tokens)!=null?le:null}},G.enqueue({type:"response-metadata",id:(Te=Se.message.id)!=null?Te:void 0,modelId:(Me=Se.message.model)!=null?Me:void 0});return}case"message_delta":{C.completionTokens=Se.usage.output_tokens,b=xN(Se.delta.stop_reason);return}case"message_stop":{G.enqueue({type:"finish",finishReason:b,usage:C,providerMetadata:K});return}case"error":{G.enqueue({type:"error",error:Se.error});return}default:{let ke=Se;throw new Error(`Unsupported chunk type: ${ke}`)}}}})),rawCall:{rawPrompt:g,rawSettings:_},rawResponse:{headers:a},warnings:r,request:{body:JSON.stringify(i)}}}},A1=P.object({type:P.literal("message"),id:P.string().nullish(),model:P.string().nullish(),content:P.array(P.discriminatedUnion("type",[P.object({type:P.literal("text"),text:P.string()}),P.object({type:P.literal("thinking"),thinking:P.string(),signature:P.string()}),P.object({type:P.literal("redacted_thinking"),data:P.string()}),P.object({type:P.literal("tool_use"),id:P.string(),name:P.string(),input:P.unknown()})])),stop_reason:P.string().nullish(),usage:P.object({input_tokens:P.number(),output_tokens:P.number(),cache_creation_input_tokens:P.number().nullish(),cache_read_input_tokens:P.number().nullish()})}),P1=P.discriminatedUnion("type",[P.object({type:P.literal("message_start"),message:P.object({id:P.string().nullish(),model:P.string().nullish(),usage:P.object({input_tokens:P.number(),output_tokens:P.number(),cache_creation_input_tokens:P.number().nullish(),cache_read_input_tokens:P.number().nullish()})})}),P.object({type:P.literal("content_block_start"),index:P.number(),content_block:P.discriminatedUnion("type",[P.object({type:P.literal("text"),text:P.string()}),P.object({type:P.literal("thinking"),thinking:P.string()}),P.object({type:P.literal("tool_use"),id:P.string(),name:P.string()}),P.object({type:P.literal("redacted_thinking"),data:P.string()})])}),P.object({type:P.literal("content_block_delta"),index:P.number(),delta:P.discriminatedUnion("type",[P.object({type:P.literal("input_json_delta"),partial_json:P.string()}),P.object({type:P.literal("text_delta"),text:P.string()}),P.object({type:P.literal("thinking_delta"),thinking:P.string()}),P.object({type:P.literal("signature_delta"),signature:P.string()})])}),P.object({type:P.literal("content_block_stop"),index:P.number()}),P.object({type:P.literal("error"),error:P.object({type:P.string(),message:P.string()})}),P.object({type:P.literal("message_delta"),delta:P.object({stop_reason:P.string().nullish()}),usage:P.object({output_tokens:P.number()})}),P.object({type:P.literal("message_stop")}),P.object({type:P.literal("ping")})]),k1=P.object({type:P.union([P.literal("enabled"),P.literal("disabled")]),budgetTokens:P.number().optional()}).optional(),L1=P.object({command:P.string(),restart:P.boolean().optional()});function M1(t={}){return{type:"provider-defined",id:"anthropic.bash_20241022",args:{},parameters:L1,execute:t.execute,experimental_toToolResultContent:t.experimental_toToolResultContent}}var F1=P.object({command:P.enum(["view","create","str_replace","insert","undo_edit"]),path:P.string(),file_text:P.string().optional(),insert_line:P.number().int().optional(),new_str:P.string().optional(),old_str:P.string().optional(),view_range:P.array(P.number().int()).optional()});function U1(t={}){return{type:"provider-defined",id:"anthropic.text_editor_20241022",args:{},parameters:F1,execute:t.execute,experimental_toToolResultContent:t.experimental_toToolResultContent}}var j1=P.object({action:P.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:P.array(P.number().int()).optional(),text:P.string().optional()});function Y1(t){return{type:"provider-defined",id:"anthropic.computer_20241022",args:{displayWidthPx:t.displayWidthPx,displayHeightPx:t.displayHeightPx,displayNumber:t.displayNumber},parameters:j1,execute:t.execute,experimental_toToolResultContent:t.experimental_toToolResultContent}}var $1=P.object({action:P.enum(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot"]),coordinate:P.tuple([P.number().int(),P.number().int()]).optional(),duration:P.number().optional(),scroll_amount:P.number().optional(),scroll_direction:P.enum(["up","down","left","right"]).optional(),start_coordinate:P.tuple([P.number().int(),P.number().int()]).optional(),text:P.string().optional()});function B1(t){return{type:"provider-defined",id:"anthropic.computer_20250124",args:{displayWidthPx:t.displayWidthPx,displayHeightPx:t.displayHeightPx,displayNumber:t.displayNumber},parameters:$1,execute:t.execute,experimental_toToolResultContent:t.experimental_toToolResultContent}}var q1={bash_20241022:M1,textEditor_20241022:U1,computer_20241022:Y1,computer_20250124:B1};function KS(t={}){var e;let r=(e=K0(t.baseURL))!=null?e:"https://api.anthropic.com/v1",n=()=>({"anthropic-version":"2023-06-01","x-api-key":G0({apiKey:t.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...t.headers}),i=(c,g={})=>new O1(c,g,{provider:"anthropic.messages",baseURL:r,headers:n,fetch:t.fetch}),a=function(c,g){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return i(c,g)};return a.languageModel=i,a.chat=i,a.messages=i,a.textEmbeddingModel=c=>{throw new YS({modelId:c,modelType:"textEmbeddingModel"})},a.tools=q1,a}var w$=KS();function H1({prompt:t,useLegacyFunctionCalling:e=!1,systemMessageMode:r="system"}){let n=[];for(let{role:i,content:a}of t)switch(i){case"system":{switch(r){case"system":{n.push({role:"system",content:a});break}case"developer":{n.push({role:"developer",content:a});break}case"remove":break;default:{let c=r;throw new Error(`Unsupported system message mode: ${c}`)}}break}case"user":{if(a.length===1&&a[0].type==="text"){n.push({role:"user",content:a[0].text});break}n.push({role:"user",content:a.map(c=>{var g,_,b;switch(c.type){case"text":return{type:"text",text:c.text};case"image":return{type:"image_url",image_url:{url:c.image instanceof URL?c.image.toString():`data:${(g=c.mimeType)!=null?g:"image/jpeg"};base64,${Eg(c.image)}`,detail:(b=(_=c.providerMetadata)==null?void 0:_.openai)==null?void 0:b.imageDetail}};case"file":{if(c.data instanceof URL)throw new Wn({functionality:"'File content parts with URL data' functionality not supported."});switch(c.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:c.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:c.data,format:"mp3"}};default:throw new Wn({functionality:`File content part type ${c.mimeType} in user messages`})}}}})});break}case"assistant":{let c="",g=[];for(let _ of a)switch(_.type){case"text":{c+=_.text;break}case"redacted-reasoning":case"reasoning":break;case"tool-call":{g.push({id:_.toolCallId,type:"function",function:{name:_.toolName,arguments:JSON.stringify(_.args)}});break}default:{let b=_;throw new Error(`Unsupported part: ${b}`)}}if(e){if(g.length>1)throw new Wn({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});n.push({role:"assistant",content:c,function_call:g.length>0?g[0].function:void 0})}else n.push({role:"assistant",content:c,tool_calls:g.length>0?g:void 0});break}case"tool":{for(let c of a)e?n.push({role:"function",name:c.toolName,content:JSON.stringify(c.result)}):n.push({role:"tool",tool_call_id:c.toolCallId,content:JSON.stringify(c.result)});break}default:{let c=i;throw new Error(`Unsupported role: ${c}`)}}return n}function ON(t){var e,r;return(r=(e=t==null?void 0:t.content)==null?void 0:e.map(({token:n,logprob:i,top_logprobs:a})=>({token:n,logprob:i,topLogprobs:a?a.map(({token:c,logprob:g})=>({token:c,logprob:g})):[]})))!=null?r:void 0}function rw(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var ZS=P.object({error:P.object({message:P.string(),type:P.string().nullish(),param:P.any().nullish(),code:P.union([P.string(),P.number()]).nullish()})}),T_=W0({errorSchema:ZS,errorToMessage:t=>t.error.message});function nw({id:t,model:e,created:r}){return{id:t??void 0,modelId:e??void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function V1({mode:t,useLegacyFunctionCalling:e=!1,structuredOutputs:r}){var n;let i=(n=t.tools)!=null&&n.length?t.tools:void 0,a=[];if(i==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};let c=t.toolChoice;if(e){let b=[];for(let j of i)j.type==="provider-defined"?a.push({type:"unsupported-tool",tool:j}):b.push({name:j.name,description:j.description,parameters:j.parameters});if(c==null)return{functions:b,function_call:void 0,toolWarnings:a};switch(c.type){case"auto":case"none":case void 0:return{functions:b,function_call:void 0,toolWarnings:a};case"required":throw new Wn({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:b,function_call:{name:c.toolName},toolWarnings:a}}}let g=[];for(let b of i)b.type==="provider-defined"?a.push({type:"unsupported-tool",tool:b}):g.push({type:"function",function:{name:b.name,description:b.description,parameters:b.parameters,strict:r?!0:void 0}});if(c==null)return{tools:g,tool_choice:void 0,toolWarnings:a};let _=c.type;switch(_){case"auto":case"none":case"required":return{tools:g,tool_choice:_,toolWarnings:a};case"tool":return{tools:g,tool_choice:{type:"function",function:{name:c.toolName}},toolWarnings:a};default:{let b=_;throw new Wn({functionality:`Unsupported tool choice type: ${b}`})}}}var G1=class{constructor(t,e,r){this.specificationVersion="v1",this.modelId=t,this.settings=e,this.config=r}get supportsStructuredOutputs(){var t;return(t=this.settings.structuredOutputs)!=null?t:JS(this.modelId)}get defaultObjectGenerationMode(){return K1(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:t,prompt:e,maxTokens:r,temperature:n,topP:i,topK:a,frequencyPenalty:c,presencePenalty:g,stopSequences:_,responseFormat:b,seed:C,providerMetadata:j}){var K,te,z,G,ne,le,Te,Me;let Se=t.type,ke=[];a!=null&&ke.push({type:"unsupported-setting",setting:"topK"}),(b==null?void 0:b.type)==="json"&&b.schema!=null&&!this.supportsStructuredOutputs&&ke.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let et=this.settings.useLegacyFunctionCalling;if(et&&this.settings.parallelToolCalls===!0)throw new Wn({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(et&&this.supportsStructuredOutputs)throw new Wn({functionality:"structuredOutputs with useLegacyFunctionCalling"});AN(this.modelId)==="remove"&&e.some(Dt=>Dt.role==="system")&&ke.push({type:"other",message:"system messages are removed for this model"});let ot={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:r,temperature:n,top_p:i,frequency_penalty:c,presence_penalty:g,response_format:(b==null?void 0:b.type)==="json"?this.supportsStructuredOutputs&&b.schema!=null?{type:"json_schema",json_schema:{schema:b.schema,strict:!0,name:(K=b.name)!=null?K:"response",description:b.description}}:{type:"json_object"}:void 0,stop:_,seed:C,max_completion_tokens:(te=j==null?void 0:j.openai)==null?void 0:te.maxCompletionTokens,store:(z=j==null?void 0:j.openai)==null?void 0:z.store,metadata:(G=j==null?void 0:j.openai)==null?void 0:G.metadata,prediction:(ne=j==null?void 0:j.openai)==null?void 0:ne.prediction,reasoning_effort:(Te=(le=j==null?void 0:j.openai)==null?void 0:le.reasoningEffort)!=null?Te:this.settings.reasoningEffort,messages:H1({prompt:e,useLegacyFunctionCalling:et,systemMessageMode:AN(this.modelId)})};switch(JS(this.modelId)&&(ot.temperature!=null&&(ot.temperature=void 0,ke.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),ot.top_p!=null&&(ot.top_p=void 0,ke.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),ot.frequency_penalty!=null&&(ot.frequency_penalty=void 0,ke.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),ot.presence_penalty!=null&&(ot.presence_penalty=void 0,ke.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),ot.logit_bias!=null&&(ot.logit_bias=void 0,ke.push({type:"other",message:"logitBias is not supported for reasoning models"})),ot.logprobs!=null&&(ot.logprobs=void 0,ke.push({type:"other",message:"logprobs is not supported for reasoning models"})),ot.top_logprobs!=null&&(ot.top_logprobs=void 0,ke.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),ot.max_tokens!=null&&(ot.max_completion_tokens==null&&(ot.max_completion_tokens=ot.max_tokens),ot.max_tokens=void 0)),Se){case"regular":{let{tools:Dt,tool_choice:qt,functions:lr,function_call:ln,toolWarnings:Ti}=V1({mode:t,useLegacyFunctionCalling:et,structuredOutputs:this.supportsStructuredOutputs});return{args:{...ot,tools:Dt,tool_choice:qt,functions:lr,function_call:ln},warnings:[...ke,...Ti]}}case"object-json":return{args:{...ot,response_format:this.supportsStructuredOutputs&&t.schema!=null?{type:"json_schema",json_schema:{schema:t.schema,strict:!0,name:(Me=t.name)!=null?Me:"response",description:t.description}}:{type:"json_object"}},warnings:ke};case"object-tool":return{args:et?{...ot,function_call:{name:t.tool.name},functions:[{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters}]}:{...ot,tool_choice:{type:"function",function:{name:t.tool.name}},tools:[{type:"function",function:{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:ke};default:{let Dt=Se;throw new Error(`Unsupported type: ${Dt}`)}}}async doGenerate(t){var e,r,n,i,a,c,g,_;let{args:b,warnings:C}=this.getArgs(t),{responseHeaders:j,value:K}=await Gf({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:ap(this.config.headers(),t.headers),body:b,failedResponseHandler:T_,successfulResponseHandler:lm(z1),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:te,...z}=b,G=K.choices[0],ne=(e=K.usage)==null?void 0:e.completion_tokens_details,le=(r=K.usage)==null?void 0:r.prompt_tokens_details,Te={openai:{}};return(ne==null?void 0:ne.reasoning_tokens)!=null&&(Te.openai.reasoningTokens=ne==null?void 0:ne.reasoning_tokens),(ne==null?void 0:ne.accepted_prediction_tokens)!=null&&(Te.openai.acceptedPredictionTokens=ne==null?void 0:ne.accepted_prediction_tokens),(ne==null?void 0:ne.rejected_prediction_tokens)!=null&&(Te.openai.rejectedPredictionTokens=ne==null?void 0:ne.rejected_prediction_tokens),(le==null?void 0:le.cached_tokens)!=null&&(Te.openai.cachedPromptTokens=le==null?void 0:le.cached_tokens),{text:(n=G.message.content)!=null?n:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&G.message.function_call?[{toolCallType:"function",toolCallId:ih(),toolName:G.message.function_call.name,args:G.message.function_call.arguments}]:(i=G.message.tool_calls)==null?void 0:i.map(Me=>{var Se;return{toolCallType:"function",toolCallId:(Se=Me.id)!=null?Se:ih(),toolName:Me.function.name,args:Me.function.arguments}}),finishReason:rw(G.finish_reason),usage:{promptTokens:(c=(a=K.usage)==null?void 0:a.prompt_tokens)!=null?c:NaN,completionTokens:(_=(g=K.usage)==null?void 0:g.completion_tokens)!=null?_:NaN},rawCall:{rawPrompt:te,rawSettings:z},rawResponse:{headers:j},request:{body:JSON.stringify(b)},response:nw(K),warnings:C,logprobs:ON(G.logprobs),providerMetadata:Te}}async doStream(t){if(this.settings.simulateStreaming){let G=await this.doGenerate(t);return{stream:new ReadableStream({start(le){if(le.enqueue({type:"response-metadata",...G.response}),G.text&&le.enqueue({type:"text-delta",textDelta:G.text}),G.toolCalls)for(let Te of G.toolCalls)le.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Te.toolCallId,toolName:Te.toolName,argsTextDelta:Te.args}),le.enqueue({type:"tool-call",...Te});le.enqueue({type:"finish",finishReason:G.finishReason,usage:G.usage,logprobs:G.logprobs,providerMetadata:G.providerMetadata}),le.close()}}),rawCall:G.rawCall,rawResponse:G.rawResponse,warnings:G.warnings}}let{args:e,warnings:r}=this.getArgs(t),n={...e,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:i,value:a}=await Gf({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:ap(this.config.headers(),t.headers),body:n,failedResponseHandler:T_,successfulResponseHandler:m_(W1),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:c,...g}=e,_=[],b="unknown",C={promptTokens:void 0,completionTokens:void 0},j,K=!0,{useLegacyFunctionCalling:te}=this.settings,z={openai:{}};return{stream:a.pipeThrough(new TransformStream({transform(G,ne){var le,Te,Me,Se,ke,et,ot,Dt,qt,lr,ln,Ti;if(!G.success){b="error",ne.enqueue({type:"error",error:G.error});return}let pi=G.value;if("error"in pi){b="error",ne.enqueue({type:"error",error:pi.error});return}if(K&&(K=!1,ne.enqueue({type:"response-metadata",...nw(pi)})),pi.usage!=null){let{prompt_tokens:Le,completion_tokens:Ir,prompt_tokens_details:Cr,completion_tokens_details:_t}=pi.usage;C={promptTokens:Le??void 0,completionTokens:Ir??void 0},(_t==null?void 0:_t.reasoning_tokens)!=null&&(z.openai.reasoningTokens=_t==null?void 0:_t.reasoning_tokens),(_t==null?void 0:_t.accepted_prediction_tokens)!=null&&(z.openai.acceptedPredictionTokens=_t==null?void 0:_t.accepted_prediction_tokens),(_t==null?void 0:_t.rejected_prediction_tokens)!=null&&(z.openai.rejectedPredictionTokens=_t==null?void 0:_t.rejected_prediction_tokens),(Cr==null?void 0:Cr.cached_tokens)!=null&&(z.openai.cachedPromptTokens=Cr==null?void 0:Cr.cached_tokens)}let Tt=pi.choices[0];if((Tt==null?void 0:Tt.finish_reason)!=null&&(b=rw(Tt.finish_reason)),(Tt==null?void 0:Tt.delta)==null)return;let fn=Tt.delta;fn.content!=null&&ne.enqueue({type:"text-delta",textDelta:fn.content});let it=ON(Tt==null?void 0:Tt.logprobs);it!=null&&it.length&&(j===void 0&&(j=[]),j.push(...it));let lo=te&&fn.function_call!=null?[{type:"function",id:ih(),function:fn.function_call,index:0}]:fn.tool_calls;if(lo!=null)for(let Le of lo){let Ir=Le.index;if(_[Ir]==null){if(Le.type!=="function")throw new ny({data:Le,message:"Expected 'function' type."});if(Le.id==null)throw new ny({data:Le,message:"Expected 'id' to be a string."});if(((le=Le.function)==null?void 0:le.name)==null)throw new ny({data:Le,message:"Expected 'function.name' to be a string."});_[Ir]={id:Le.id,type:"function",function:{name:Le.function.name,arguments:(Te=Le.function.arguments)!=null?Te:""},hasFinished:!1};let _t=_[Ir];((Me=_t.function)==null?void 0:Me.name)!=null&&((Se=_t.function)==null?void 0:Se.arguments)!=null&&(_t.function.arguments.length>0&&ne.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:_t.id,toolName:_t.function.name,argsTextDelta:_t.function.arguments}),qS(_t.function.arguments)&&(ne.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(ke=_t.id)!=null?ke:ih(),toolName:_t.function.name,args:_t.function.arguments}),_t.hasFinished=!0));continue}let Cr=_[Ir];Cr.hasFinished||(((et=Le.function)==null?void 0:et.arguments)!=null&&(Cr.function.arguments+=(Dt=(ot=Le.function)==null?void 0:ot.arguments)!=null?Dt:""),ne.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Cr.id,toolName:Cr.function.name,argsTextDelta:(qt=Le.function.arguments)!=null?qt:""}),((lr=Cr.function)==null?void 0:lr.name)!=null&&((ln=Cr.function)==null?void 0:ln.arguments)!=null&&qS(Cr.function.arguments)&&(ne.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Ti=Cr.id)!=null?Ti:ih(),toolName:Cr.function.name,args:Cr.function.arguments}),Cr.hasFinished=!0))}},flush(G){var ne,le;G.enqueue({type:"finish",finishReason:b,logprobs:j,usage:{promptTokens:(ne=C.promptTokens)!=null?ne:NaN,completionTokens:(le=C.completionTokens)!=null?le:NaN},...z!=null?{providerMetadata:z}:{}})}})),rawCall:{rawPrompt:c,rawSettings:g},rawResponse:{headers:i},request:{body:JSON.stringify(n)},warnings:r}}},kN=P.object({prompt_tokens:P.number().nullish(),completion_tokens:P.number().nullish(),prompt_tokens_details:P.object({cached_tokens:P.number().nullish()}).nullish(),completion_tokens_details:P.object({reasoning_tokens:P.number().nullish(),accepted_prediction_tokens:P.number().nullish(),rejected_prediction_tokens:P.number().nullish()}).nullish()}).nullish(),z1=P.object({id:P.string().nullish(),created:P.number().nullish(),model:P.string().nullish(),choices:P.array(P.object({message:P.object({role:P.literal("assistant").nullish(),content:P.string().nullish(),function_call:P.object({arguments:P.string(),name:P.string()}).nullish(),tool_calls:P.array(P.object({id:P.string().nullish(),type:P.literal("function"),function:P.object({name:P.string(),arguments:P.string()})})).nullish()}),index:P.number(),logprobs:P.object({content:P.array(P.object({token:P.string(),logprob:P.number(),top_logprobs:P.array(P.object({token:P.string(),logprob:P.number()}))})).nullable()}).nullish(),finish_reason:P.string().nullish()})),usage:kN}),W1=P.union([P.object({id:P.string().nullish(),created:P.number().nullish(),model:P.string().nullish(),choices:P.array(P.object({delta:P.object({role:P.enum(["assistant"]).nullish(),content:P.string().nullish(),function_call:P.object({name:P.string().optional(),arguments:P.string().optional()}).nullish(),tool_calls:P.array(P.object({index:P.number(),id:P.string().nullish(),type:P.literal("function").optional(),function:P.object({name:P.string().nullish(),arguments:P.string().nullish()})})).nullish()}).nullish(),logprobs:P.object({content:P.array(P.object({token:P.string(),logprob:P.number(),top_logprobs:P.array(P.object({token:P.string(),logprob:P.number()}))})).nullable()}).nullish(),finish_reason:P.string().nullable().optional(),index:P.number()})),usage:kN}),ZS]);function JS(t){return t==="o1"||t.startsWith("o1-")||t==="o3"||t.startsWith("o3-")}function K1(t){return t.startsWith("gpt-4o-audio-preview")}function AN(t){var e,r;return JS(t)?(r=(e=J1[t])==null?void 0:e.systemMessageMode)!=null?r:"developer":"system"}var J1={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"}};function Z1({prompt:t,inputFormat:e,user:r="user",assistant:n="assistant"}){if(e==="prompt"&&t.length===1&&t[0].role==="user"&&t[0].content.length===1&&t[0].content[0].type==="text")return{prompt:t[0].content[0].text};let i="";t[0].role==="system"&&(i+=`${t[0].content}

`,t=t.slice(1));for(let{role:a,content:c}of t)switch(a){case"system":throw new um({message:"Unexpected system message in prompt: ${content}",prompt:t});case"user":{let g=c.map(_=>{switch(_.type){case"text":return _.text;case"image":throw new Wn({functionality:"images"})}}).join("");i+=`${r}:
${g}

`;break}case"assistant":{let g=c.map(_=>{switch(_.type){case"text":return _.text;case"tool-call":throw new Wn({functionality:"tool-call messages"})}}).join("");i+=`${n}:
${g}

`;break}case"tool":throw new Wn({functionality:"tool messages"});default:{let g=a;throw new Error(`Unsupported role: ${g}`)}}return i+=`${n}:
`,{prompt:i,stopSequences:[`
${r}:`]}}function PN(t){return t==null?void 0:t.tokens.map((e,r)=>({token:e,logprob:t.token_logprobs[r],topLogprobs:t.top_logprobs?Object.entries(t.top_logprobs[r]).map(([n,i])=>({token:n,logprob:i})):[]}))}var X1=class{constructor(t,e,r){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=t,this.settings=e,this.config=r}get provider(){return this.config.provider}getArgs({mode:t,inputFormat:e,prompt:r,maxTokens:n,temperature:i,topP:a,topK:c,frequencyPenalty:g,presencePenalty:_,stopSequences:b,responseFormat:C,seed:j}){var K;let te=t.type,z=[];c!=null&&z.push({type:"unsupported-setting",setting:"topK"}),C!=null&&C.type!=="text"&&z.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:G,stopSequences:ne}=Z1({prompt:r,inputFormat:e}),le=[...ne??[],...b??[]],Te={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:n,temperature:i,top_p:a,frequency_penalty:g,presence_penalty:_,seed:j,prompt:G,stop:le.length>0?le:void 0};switch(te){case"regular":{if((K=t.tools)!=null&&K.length)throw new Wn({functionality:"tools"});if(t.toolChoice)throw new Wn({functionality:"toolChoice"});return{args:Te,warnings:z}}case"object-json":throw new Wn({functionality:"object-json mode"});case"object-tool":throw new Wn({functionality:"object-tool mode"});default:{let Me=te;throw new Error(`Unsupported type: ${Me}`)}}}async doGenerate(t){let{args:e,warnings:r}=this.getArgs(t),{responseHeaders:n,value:i}=await Gf({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:ap(this.config.headers(),t.headers),body:e,failedResponseHandler:T_,successfulResponseHandler:lm(Q1),abortSignal:t.abortSignal,fetch:this.config.fetch}),{prompt:a,...c}=e,g=i.choices[0];return{text:g.text,usage:{promptTokens:i.usage.prompt_tokens,completionTokens:i.usage.completion_tokens},finishReason:rw(g.finish_reason),logprobs:PN(g.logprobs),rawCall:{rawPrompt:a,rawSettings:c},rawResponse:{headers:n},response:nw(i),warnings:r,request:{body:JSON.stringify(e)}}}async doStream(t){let{args:e,warnings:r}=this.getArgs(t),n={...e,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:i,value:a}=await Gf({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:ap(this.config.headers(),t.headers),body:n,failedResponseHandler:T_,successfulResponseHandler:m_(eL),abortSignal:t.abortSignal,fetch:this.config.fetch}),{prompt:c,...g}=e,_="unknown",b={promptTokens:Number.NaN,completionTokens:Number.NaN},C,j=!0;return{stream:a.pipeThrough(new TransformStream({transform(K,te){if(!K.success){_="error",te.enqueue({type:"error",error:K.error});return}let z=K.value;if("error"in z){_="error",te.enqueue({type:"error",error:z.error});return}j&&(j=!1,te.enqueue({type:"response-metadata",...nw(z)})),z.usage!=null&&(b={promptTokens:z.usage.prompt_tokens,completionTokens:z.usage.completion_tokens});let G=z.choices[0];(G==null?void 0:G.finish_reason)!=null&&(_=rw(G.finish_reason)),(G==null?void 0:G.text)!=null&&te.enqueue({type:"text-delta",textDelta:G.text});let ne=PN(G==null?void 0:G.logprobs);ne!=null&&ne.length&&(C===void 0&&(C=[]),C.push(...ne))},flush(K){K.enqueue({type:"finish",finishReason:_,logprobs:C,usage:b})}})),rawCall:{rawPrompt:c,rawSettings:g},rawResponse:{headers:i},warnings:r,request:{body:JSON.stringify(n)}}}},Q1=P.object({id:P.string().nullish(),created:P.number().nullish(),model:P.string().nullish(),choices:P.array(P.object({text:P.string(),finish_reason:P.string(),logprobs:P.object({tokens:P.array(P.string()),token_logprobs:P.array(P.number()),top_logprobs:P.array(P.record(P.string(),P.number())).nullable()}).nullish()})),usage:P.object({prompt_tokens:P.number(),completion_tokens:P.number()})}),eL=P.union([P.object({id:P.string().nullish(),created:P.number().nullish(),model:P.string().nullish(),choices:P.array(P.object({text:P.string(),finish_reason:P.string().nullish(),index:P.number(),logprobs:P.object({tokens:P.array(P.string()),token_logprobs:P.array(P.number()),top_logprobs:P.array(P.record(P.string(),P.number())).nullable()}).nullish()})),usage:P.object({prompt_tokens:P.number(),completion_tokens:P.number()}).nullish()}),ZS]),tL=class{constructor(t,e,r){this.specificationVersion="v1",this.modelId=t,this.settings=e,this.config=r}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var t;return(t=this.settings.maxEmbeddingsPerCall)!=null?t:2048}get supportsParallelCalls(){var t;return(t=this.settings.supportsParallelCalls)!=null?t:!0}async doEmbed({values:t,headers:e,abortSignal:r}){if(t.length>this.maxEmbeddingsPerCall)throw new ZI({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});let{responseHeaders:n,value:i}=await Gf({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:ap(this.config.headers(),e),body:{model:this.modelId,input:t,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:T_,successfulResponseHandler:lm(rL),abortSignal:r,fetch:this.config.fetch});return{embeddings:i.data.map(a=>a.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:n}}}},rL=P.object({data:P.array(P.object({embedding:P.array(P.number())})),usage:P.object({prompt_tokens:P.number()}).nullish()}),nL={"dall-e-3":1,"dall-e-2":10},iL=class{constructor(t,e,r){this.modelId=t,this.settings=e,this.config=r,this.specificationVersion="v1"}get maxImagesPerCall(){var t,e;return(e=(t=this.settings.maxImagesPerCall)!=null?t:nL[this.modelId])!=null?e:1}get provider(){return this.config.provider}async doGenerate({prompt:t,n:e,size:r,aspectRatio:n,seed:i,providerOptions:a,headers:c,abortSignal:g}){var _,b,C,j;let K=[];n!=null&&K.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),i!=null&&K.push({type:"unsupported-setting",setting:"seed"});let te=(C=(b=(_=this.config._internal)==null?void 0:_.currentDate)==null?void 0:b.call(_))!=null?C:new Date,{value:z,responseHeaders:G}=await Gf({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:ap(this.config.headers(),c),body:{model:this.modelId,prompt:t,n:e,size:r,...(j=a.openai)!=null?j:{},response_format:"b64_json"},failedResponseHandler:T_,successfulResponseHandler:lm(aL),abortSignal:g,fetch:this.config.fetch});return{images:z.data.map(ne=>ne.b64_json),warnings:K,response:{timestamp:te,modelId:this.modelId,headers:G}}}},aL=P.object({data:P.array(P.object({b64_json:P.string()}))});function XS(t={}){var e,r,n;let i=(e=K0(t.baseURL))!=null?e:"https://api.openai.com/v1",a=(r=t.compatibility)!=null?r:"compatible",c=(n=t.name)!=null?n:"openai",g=()=>({Authorization:`Bearer ${G0({apiKey:t.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":t.organization,"OpenAI-Project":t.project,...t.headers}),_=(z,G={})=>new G1(z,G,{provider:`${c}.chat`,url:({path:ne})=>`${i}${ne}`,headers:g,compatibility:a,fetch:t.fetch}),b=(z,G={})=>new X1(z,G,{provider:`${c}.completion`,url:({path:ne})=>`${i}${ne}`,headers:g,compatibility:a,fetch:t.fetch}),C=(z,G={})=>new tL(z,G,{provider:`${c}.embedding`,url:({path:ne})=>`${i}${ne}`,headers:g,fetch:t.fetch}),j=(z,G={})=>new iL(z,G,{provider:`${c}.image`,url:({path:ne})=>`${i}${ne}`,headers:g,fetch:t.fetch}),K=(z,G)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return z==="gpt-3.5-turbo-instruct"?b(z,G):_(z,G)},te=function(z,G){return K(z,G)};return te.languageModel=K,te.chat=_,te.completion=b,te.embedding=C,te.textEmbedding=C,te.textEmbeddingModel=C,te.image=j,te.imageModel=j,te}var $$=XS({compatibility:"strict"});var uo=require("vscode");var oL=["rate limit exceeded","net::err","check your network connection","check your firewall","request failed","400 bad request","server error","error on conversation request","response contained no choices","response got filtered"];function sL({role:t,content:e}){switch(t){case"system":return uo.LanguageModelChatMessage.User(e);case"user":let r=e.map(a=>{switch(a.type){case"text":return new uo.LanguageModelTextPart(a.text);case"image":throw new Error("Image content not supported");case"file":throw new Error("File content not supported")}});return uo.LanguageModelChatMessage.User(r);case"tool":let n=e.map(a=>{switch(a.type){case"tool-result":let c=typeof a.result=="string"?a.result:JSON.stringify(a.result);return new uo.LanguageModelToolResultPart(a.toolCallId,[new uo.LanguageModelTextPart(c)])}});return uo.LanguageModelChatMessage.User(n);case"assistant":let i=e.map(a=>{switch(a.type){case"text":return new uo.LanguageModelTextPart(a.text);case"tool-call":return new uo.LanguageModelToolCallPart(a.toolCallId,a.toolName,a.args)}});return uo.LanguageModelChatMessage.Assistant(i)}}function uL(t){switch(t.type){case"function":return{name:t.name,description:t.description,inputSchema:t.parameters};case"provider-defined":throw new Error("Provider-defined tools not supported")}}function cL(t){let e=String(t.message).toLowerCase();for(let r of oL)if(e.includes(r))return!0;return!1}var QS=class{specificationVersion="v1";defaultObjectGenerationMode="json";provider="copilot";supportsImageUrls=!1;constructor(e,r,n){this.modelId=e,this.settings=r,this.config=n}async doGenerate(e){throw new Error("Not implemented")}async doStream(e){var te;let[r]=await uo.lm.selectChatModels({family:this.modelId,vendor:"copilot"});if(!r)throw new Error("Model not found: "+this.modelId);let{prompt:n,abortSignal:i,mode:a}=e,c=i.context,{token:g}=c;if(a.type!=="regular")throw new Error("Request mode not supported: "+a.type);let _=n.map(sL),b=(te=a.tools)==null?void 0:te.map(uL),C=n.slice(-1)[0],j=!1;if(C.role=="tool")if(C.content[0].result=="stop")j=!0;else{let z=new uo.LanguageModelTextPart("Should I process the last tool result now?"),G=new uo.LanguageModelTextPart("Yes");_.push(uo.LanguageModelChatMessage.Assistant([z])),_.push(uo.LanguageModelChatMessage.User([G]))}return{stream:new ReadableStream({async start(z){let G=0;if(j){z.enqueue({type:"text-delta",textDelta:`

`}),z.close();return}for(;;){try{if(g.isCancellationRequested){z.close();return}let ne=await r.sendRequest(_,{tools:b,modelOptions:{temperature:e.temperature,max_tokens:e.maxTokens}},g);for await(let le of ne.stream){if(g.isCancellationRequested)break;le instanceof uo.LanguageModelTextPart?z.enqueue({type:"text-delta",textDelta:le.value}):le instanceof uo.LanguageModelToolCallPart?z.enqueue({type:"tool-call",toolCallType:"function",toolCallId:le.callId,toolName:le.name,args:JSON.stringify(le.input)}):z.error(new Error("Unknown content format"))}z.close();return}catch(ne){if(g.isCancellationRequested){z.close();return}if(!cL(ne)||++G>5){z.error(ne);return}z.enqueue({type:"error",error:{event:"retry",count:G,message:ne.message||String(ne),cause:ne}}),String(ne.message).toLowerCase().includes("rate limit exceeded")&&await f_(30,g)}await f_(5*G,g)}}}),rawCall:{rawPrompt:"",rawSettings:{}}}}};function LN(t){let e=(n,i={})=>new QS(n,i,{provider:"copilot"}),r=function(n,i={}){return e(n,i)};return r.chat=e,r}var lL={anthropic:KS,openai:XS,copilot:LN},MN={};function eb({id:t,provider:e,apiKey:r}){let n=MN[e];if(!n){let i=lL[e];if(!i)throw new Error("Unknown provider: "+e);n=i({apiKey:r}),MN[e]=n}return n(t)}var tb=[{provider:"anthropic",family:"claude-3.5-sonnet",id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet"},{provider:"anthropic",family:"claude-3.7-sonnet",id:"claude-3-7-sonnet-20250219",name:"Claude 3.7 Sonnet"},{provider:"anthropic",family:"claude-3.7-sonnet-thought",id:"claude-3-7-sonnet-20250219",name:"Claude 3.7 Sonnet Thinking"},{provider:"openai",family:"gpt-4o",id:"gpt-4o-2024-11-20",name:"GPT 4o"},{provider:"openai",family:"o3-mini",id:"o3-mini-2025-01-31",name:"o3-mini"},{provider:"openrouter",family:"claude-3.5-sonnet",id:"anthropic/claude-3.5-sonnet:beta",name:"Claude 3.5 Sonnet"},{provider:"openrouter",family:"gpt-4o",id:"openai/gpt-4o-2024-08-06",name:"GPT 4o"}];var FN=[{id:"anthropic",name:"Anthropic",envKeyName:"ANTHROPIC_API_KEY",website:"https://console.anthropic.com"},{id:"openai",name:"OpenAI",envKeyName:"OPENAI_API_KEY",website:"https://platform.openai.com"},{id:"openrouter",name:"Open Router",envKeyName:"OPENROUTER_API_KEY",website:"https://openrouter.ai"}];var qg=require("vscode");function Wi(t,e={depth:2}){switch(typeof t){case"undefined":return"";case"number":return String(t);case"string":return t;case"function":return Wi(t(e),e);case"object":let r=[];return Array.isArray(t)?r=t.map(n=>Wi(n,e)).filter(n=>!!n):r=Object.entries(t).map(([n,i])=>{let a="#".repeat(e.depth),c=Wi(i,{depth:e.depth+1});return c&&`${a} ${n}

`+c}),r.join(`

`)}}var Qt=function(t,...e){let r=C=>/^\s*$/.test(C),n=C=>C.match(/^\s*/)[0].length,i=t.map(C=>C.split(`
`)),a=100;i.forEach(C=>{C.slice(1).forEach(j=>{r(j)||(a=Math.min(a,n(j)))})});let c=C=>C[0],g=C=>C[C.length-1],_=C=>!r(g(i[C]))||!r(c(i[C+1])),b=[];return i.forEach((C,j)=>{let K=C.slice();if(a<100)for(let z=1;z<K.length;z++)K[z]=C[z].slice(a);if(j==0||!_(j-1))for(;K.length&&r(K[0]);)K.shift();if(j==i.length-1||!_(j))for(;K.length&&r(K[K.length-1]);)K.pop();let te=K.join(`
`);if(j==0)b.push(te);else{let z=e[j-1]??"";if(typeof z=="object"||typeof z=="function"){if(_(j-1))throw new Error("Markdown inline value not supported");b.push(z),b.push(te)}else{let G=b.pop();_(j-1)||(G&&(z=`

`+z),te&&(z=z+`

`),z==`



`&&(z=`

`)),b.push(G+z+te)}}}),b.length==1?b[0]:b};function Ro(t,e="- ",r="",n=`
`,i=": "){return a=>Array.isArray(t)?t.map(c=>e+Wi(c,a)+r).join(n):Object.entries(t).map(([c,g])=>e+c+i+Wi(g,a)+r).join(n)}function di(t,e){return r=>{let n=Wi(e,r);return n?`<${t}>
`+n+`
</${t}>`:""}}function UN(t,e){return r=>{let n=Wi(t,r);return n||e}}var fB=require("vscode");async function Kh(t,e=!1){let r=Vl(t),n={path:r},i=await Bh(t),a=[];return n.lines=i.split(`
`).length,n.status="ok",a.push(di("file_metadata",Ro(n))),e||a.push(di("file_content",i)),Wi(a)}async function pv(t,e=!1){let r=Vl(t),n=[],i=[],a={path:r},c=[];for(let{name:g,isFile:_,isDirectory:b}of await D0(t))_?i.push(g):b&&n.push(g+"/");if(a["sub-directories"]=n.length,a.files=i.length,a.status="ok",c.push(di("directory_metadata",Ro(a))),!e){let g=[].concat(n,i);c.push(UN(di("directory_content",g),"Directory is empty."))}return Wi(c)}var jN=require("vscode");async function YN(t,e,r,n=!1){let i=Vl(t),a={path:i,name:e},c=[];if(a.start=`Ln ${r.start.line+1}, Col ${r.start.character+1}`,a.end=`Ln ${r.end.line+1}, Col ${r.end.character+1}`,a.lines=r.start.line-r.end.line+1,c.push(di("symbol_metadata",Ro(a))),!n){let g=await jN.workspace.openTextDocument(t),_=g.getText(r);c.push(di("symbol_content",_))}return Wi(c)}var $N=require("vscode");async function I_(t,e=!1){let r=Vl(t),n={path:r},i=await Bh(t),a=[],c=[],g=await $N.commands.executeCommand("vscode.executeDocumentSymbolProvider",t);function _(b){var C;a.push(b.name),(C=b.children)==null||C.forEach(_)}if(g&&g.length>0){let b=g[0];b.name.startsWith("# ")&&(n.title=b.name.slice(2)),g.forEach(_)}return n.lines=i.split(`
`).length,n.status="ok",c.push(di("document_metadata",Ro(n))),a.length&&c.push(di("document_outline",Ro(a,"","",`

`))),e||c.push(di("document_content",i)),Wi(c)}var BN=require("vscode");async function qN(){let{activeTextEditor:t}=BN.window,{document:e,selection:r}=t||{},n="",i=[];if(!t)return"No files are currently open in the editor.";let a={path:Vl(t.document.uri)};return r.isEmpty||(n=e.getText(r),a.selection=`${r.end.line-r.start.line+1} line(s)`),i.push(di("active_text_editor",Ro(a))),i.push(di("active_selection",n)),Wi(i)}var fL="multicoder_sourcecode",dL=Qt`
    Read and analyze source code files in the project

    Commands:
    - /stat: checks if the specified path exists and returns basic information about it
    - /read: returns the content of a file or directory at the given path
`,pL=P.object({command:P.enum(["stat","read"]).describe("Command"),path:P.string().describe("File or directory path")}),vL="Looking at the source files ...";async function mL({command:t,path:e},{id:r,log:n,stream:i}){let a=e.split("/").pop();n.info(a,{command:t,event:`tool.sourcecode.${t}`});let c=Ei(e,r);return await lv(c)?await pv(c,t=="stat"):await Gl(c)?(t!=="stat"&&i.reference(Vc(c)),await Kh(c,t=="stat")):(t!=="stat"&&n.warn("[sourcecode] Path does not exist - "+a,{command:t}),"Error: Path does not exist - "+e)}var iw={name:fL,description:dL,parameters:pL,execute:mL,progress:vL};var hL="multicoder_documents",gL=Qt`
    Read task-related documentation files

    Commands:
    - /stat: checks if the specified documentation path exists and returns basic information about it
    - /read: returns the content of a documentation file or directory at the given path
`,_L=P.object({command:P.enum(["stat","read"]).describe("Command"),path:P.string().describe("File or directory path")}),yL="Looking at the available documents ...";async function wL({command:t,path:e},{id:r,log:n,stream:i}){let a=e.split("/").pop(),c=Ei(e,r),g=null;return n.info(a,{command:t,event:`tool.documents.${t}`}),await lv(c)?await pv(c,t=="stat"):await Gl(c)?(t!=="stat"&&!e.startsWith(".multicoder")&&i.reference(Vc(c)),await I_(c,t=="stat")):(t!=="stat"&&n.warn("[documents] Path does not exist - "+a,{command:t}),"Error: Path does not exist - "+e)}var aw={name:hL,description:gL,parameters:_L,execute:wL,progress:yL};var nb=require("vscode");var Yg=require("vscode");var rs=require("vscode");async function HN(t,e){var C,j,K;let r=t.task,n=null;for(;r&&!n;)n=r.edits.find(te=>te.id==e),r=r.parent;if(!n)return;let i=new rs.WorkspaceEdit,a=Vc(Ei(n.path,t.id));await Gl(a)||(a=a.with({scheme:"untitled"}));let c=await rs.workspace.openTextDocument(a),g=c.getText().replace(/\r\n/g,`
`),_=g==n.after.replace(/\r\n/g,`
`)?n.before:n.after,b=new rs.Range(new rs.Position(0,0),new rs.Position(c.lineCount,0));i.replace(a,b,_),await rs.workspace.applyEdit(i),((K=(j=(C=rs.window.activeTextEditor)==null?void 0:C.document)==null?void 0:j.uri)==null?void 0:K.path)!=a.path&&await rs.window.showTextDocument(c),SL(n.search)}function SL(t){var _;let e=rs.window.activeTextEditor,r=e==null?void 0:e.document,n=(_=r==null?void 0:r.getText())==null?void 0:_.replace(/\r\n/g,`
`);if(!t||!e||!r)return;let i=n.indexOf(t);if(i==-1)return;let a=n.slice(0,i).split(`
`).length-1,c=t.split(`
`).length,g=new rs.Position(a,0);e.selection=new rs.Selection(g,g),e.revealRange(new rs.Range(g,new rs.Position(a+c,0)))}function VN(t,e,r,n,i,a,c){let{stream:g}=t;if(a.startsWith(".multicoder"))return bL(t,g,i,a);let _=new Yg.MarkdownString(`

`),b=t.id,C=encodeURIComponent(JSON.stringify([a,r,b])),j=`command:multicoder.diffView?${C}`,K=ne=>`<span class="codicon codicon-${ne}" style="color:var(--vscode-textLink-foreground);"></span>`;_.supportThemeIcons=!0,_.isTrusted={enabledCommands:["multicoder.diffView"]},_.supportHtml=!0,_.appendMarkdown(`[${K("diff-single")} ${n} (${a})](${j} 'Open Diff')`),_.appendCodeblock(i,c),g.markdown(_);let te=e=="create"?"Create":"Apply",z=e=="create"?"create file":"apply changes";g.button({title:te,command:"multicoder.action",arguments:[G],tooltip:`Click to ${z}, click again to revert`});function G(){let ne=a.split("/").pop();t.log.info(ne,{event:"action."+te.toLowerCase()}),HN(t,r)}}function bL(t,e,r,n){r=r.replace(/^#/gm,"##");let i=new Yg.MarkdownString(`

`);i.supportHtml=!0,i.appendMarkdown(r),e.markdown(i),e.button({title:"Edit",command:"multicoder.action",arguments:[a],tooltip:"Click to edit the document"});async function a(){let c=Ei(n,t.id),g=await Yg.workspace.openTextDocument(c),_=n.split("/").pop();Yg.window.showTextDocument(g),t.log.info(_,{event:"action.edit"})}}var GN="multicoder_followups",EL=Qt`
    Displays followup actions to the user at the end of the conversation turn.
`,TL=Qt`
    Using ${GN} tool reply with a list of followup actions.
`,IL=P.object({actions:P.array(P.string()).describe("Short followup actions (5-10 words)")}),NL=()=>({actions:[]});function DL(t,{actions:e}){if(t.code=="invalid_type"){let r=t.path[0];if(t.received=="string"&&r=="actions")return{actions:String(e).split(`
`)}}}async function CL({actions:t},e){let r=e.request.command=="chat"?"chat":"";return e.log.info(`${t==null?void 0:t.length} options`,{actions:t,event:"tool.followups"}),e.followups=t.map(n=>({command:r,prompt:n.replace(/^-\s+/,"")})),"stop"}var Ua={name:GN,description:EL,parameters:IL,execute:CL,retry:TL,fallback:NL,repair:DL};var zN="multicoder_summary",RL=Qt`
    Shows summary, explanations or walkthrough section at the end of the response or after each task step.
    Allows the user to see the progress of completing the task.
    Always use this tool at the end of each step or when the task is finished.
`,xL=Qt`
    Using ${zN} tool reply with a short summary of what has been done for the current step or task.
`,OL=P.object({text:P.string().describe("Short walkthrough or summary of this step")}),AL=()=>({text:"Task completed"});async function PL({text:t},{log:e,stream:r}){return e.info(`${t.slice(0,60).replace(/\n/g," ")}...`,{summary:t,event:"tool.summary"}),r.markdown(`

`+t+`

`),`This is the end of the response. Use ${Ua.name} tool to suggest the next actions.`}var ni={name:zN,description:RL,parameters:OL,execute:PL,retry:xL,fallback:AL};var kL="multicoder_editor",LL=Qt`
    Create and modify source files or documents

    Usage:
    - To add new content always use /insert or /append
    - To change more than half of the file use /update
    - To replace part of the file use /replace
    - To delete part of the file, use /replace with empty content
    - Split large edits into multiple small ones

    Important:
    - Selection must be unique within file, select 3 lines or more to avoid ambiguity
`,ML=Qt`
    Editing operation to execute with the given selection and content:
    - /create: creates a new file with the specified content
    - /update: updates the entire file
    - /insert: inserts new content before selection
    - /append: adds new content after selection
    - /replace: replaces selection with new content
`,FL=Qt`
    Provide exact text including whitespace:
    - For /create and /update: use empty string ("") 
    - For /insert: at least 3 full lines immediately following new content, no overlap
    - For /append: at least 3 full lines immediately preceding new content, no overlap
`,UL=P.object({command:P.enum(["create","insert","append","replace","update"]).describe(ML),path:P.string().describe("File path"),select:P.string().describe(FL),content:P.string().describe("New content"),summary:P.string().describe("A very short (3-10 words) summary of this change")}),jL="Writing code ...";function YL(t,{command:e,path:r,summary:n}){if(t.code=="invalid_type"){let i=t.path[0];if(t.received=="undefined"){if(i=="command"&&String(n).startsWith("Create"))return{command:"create"};if(i=="command"&&String(n).startsWith("Update"))return{command:"update"};if(i=="select")return{select:""};if(i=="summary")return{summary:`${e} ${r}`}}}}var rb={spec:1,design:1,plan:1};async function $L(t,e){let{path:r,command:n,select:i}=t,{task:a}=e;if(a.activity in rb&&!r.startsWith(".multicoder"))return"Error: cannot modify source code yet. At this point you should only work on task documents.";let{error:c}=await KN(t,e);return i&&i.split(`
`).length<2&&n!="insert"&&(r.endsWith(".md")?c="Selection is too small, use the full section text":c="Selection is too small, provide at least 3-5 lines"),c?"Tool error: "+c:"ok"}async function KN({path:t,command:e,select:r,content:n},i){let a=Ei(t,i.id),c=null,g=null,_=n;if(await Gl(a)){if(e==="create")return{error:"File already exists: "+t}}else if(e!=="create")return{error:"File not found: "+t};switch(e=="insert"&&n.endsWith(r)&&(n=n.replace(r,"")),e=="update"&&r&&(r=""),e){case"insert":case"append":case"replace":case"update":if(c=await nb.workspace.openTextDocument(a),g=await Bh(a),_=VL(g,r,n,c.eol,e),typeof _=="object")return _}return{document:c,before:g,after:_}}async function BL(t,e,r){let{path:n,summary:i,command:a,select:c,content:g}=t,{log:_,task:b}=e,C=Ei(n,e.id),j=n.split("/").pop();if(r!="ok")return b.activity in rb&&!n.startsWith(".multicoder")&&_.warn(`[workflow] Code not allowed: ${i}`,{filename:j,command:a,summary:i}),r;let{document:K,before:te,after:z,error:G}=await KN(t,e);if(G)return G;let ne=ot=>ot?ot.split(`
`).length:0,le=ne(c),Te=ne(g);_.info(i,{filename:j,command:a,selectedLines:le,contentLines:Te,event:`tool.editor.${a}`});try{await N0(C,z)}catch(ot){throw _.warn("Cannot write file - "+ot.message,{filename:j,command:a,summary:i,...ot}),ot}K=await nb.workspace.openTextDocument(C);let Me=K.languageId,Se=T0();n.startsWith(".multicoder")||b.edits.push({id:Se,summary:i,path:n,before:te,after:z,search:g}),VN(e,a,Se,i,g||c,n,Me),await qL(.1);let ke="";n.endsWith(".md")?ke=await I_(C,!0):ke=await Kh(C,!0);let et=a=="create"?"created":"modified";return b.activity in rb?ke+`

Document ${et}. Provide a very short summary using ${ni.name} tool`:ke+`

File ${n} ${et} successfully.`}async function qL(t){return new Promise(e=>setTimeout(e,t*1e3))}function HL(t){return/^\s*\/\//.test(t)||/^\s*\/\*/.test(t)}function WN(t,e){let r=HL(t)?"":`
`;return t.endsWith(`
`)&&e.startsWith(`
`)?t+e:t.endsWith(`
`)||e.startsWith(`
`)?t+r+e:t+r+`
`+e}function VL(t,e,r,n,i){let a=t.replace(/\r\n/g,`
`);if(i=="update"&&a==r)return{error:"The new content is the same as the original file. No changes were made."};if(i=="replace"&&e==r)return{error:"The new content is the same as the selection. No changes were made."};e||(e=a),(a+`
`).endsWith(e)&&(a+=`
`),i=="insert"&&(r=WN(r,e)),i=="append"&&(r=WN(e,r));let c=a.replace(e,r);return a==c?{error:"The selected text cannot be found in the current file. Did you provide exact full consecutive lines including whitespace?"}:(n==2&&(c=c.replace(/\n/g,`\r
`)),c)}var sp={name:kL,description:LL,parameters:UL,execute:$L,finalize:BL,progress:jL,repair:YL};var JN=require("vscode");var{fs:ib}=JN.workspace,GL="multicoder_filesystem",zL=Qt`
    Manage files and directories
`,WL=Qt`
    Commands:
    - /create: creates a new directory at the specified path.
    - /delete: deletes a file or directory at the specified path (recursive)
`,KL=Qt`
    File or directory path:
    - use full path, not just a filename
    - directory path MUST end with '/' (slash)
`,JL=P.object({command:P.enum(["create","delete"]).describe(WL),path:P.string().describe(KL)}),ZL="Working with files ...";async function XL({command:t,path:e},{id:r,log:n}){let i=e.replace(/\/$/,"").split("/").pop(),a=Ei(e,r);switch(n.info(i,{command:t,event:`tool.filesystem.${t}`}),t){case"create":return e.endsWith("/")?await lv(a)?"Tool error: directory already exists.":(await ib.createDirectory(a),`Directory created - ${e}`):`Tool error: directory path must end with a slash (/). To create a file use ${sp.name} tool.`;case"delete":return await lv(a)?(await ib.delete(a,{recursive:!0}),`Directory deleted - ${e}`):await Gl(a)?(await ib.delete(a),`File deleted - ${e}`):`Tool error: File or directory does not exist - ${e}`}}var ow={name:GL,description:zL,parameters:JL,execute:XL,progress:ZL};var QL="multicoder_question",eM=Qt`
    Ask a single focused question to collect missing information from the user.

    Purpose:
    - Gather specific information needed to proceed with a task
    - Resolve ambiguity in user requests
    - Guide user through decisions with clear options

    Usage guidelines:
    - Collect all necessary information step-by-step, use this tool up to 10 times if needed
    - Limit choices to 3-7 options for optimal readability
    - Avoid open-ended questions - provide concrete choices
    - Always provide most appropriate and useful default value

    Examples:
    - Yes/No decisions: "Should this function handle null values?"
    - Multiple choice: "Which HTTP method should this endpoint use?"
    - Technology selection: "Which database type best fits these requirements?"
`,tM="The main question text to display to the user. Should be clear, specific and end with question mark.",rM="Additional explanation, background information, or guidance to help user make an informed choice.",nM="List of possible answers the user can select from. Each choice should be distinct and meaningful.",iM="When true, user can select multiple choices. When false, only single choice is allowed.",aM="Pre-selected choice(s) shown initially. Must be one of the provided choices or comma-separated list.",oM=P.object({text:P.string().describe(tM),context:P.string().max(2e3).describe(rM),choices:P.array(P.string()).describe(nM),allowMultiple:P.boolean().describe(iM),defaultValue:P.string().describe(aM)}),sM="Preparing questions ...";function uM(t,{choices:e}){if(t.code=="invalid_type"){let r=t.path[0];if(t.received=="undefined"){if(r=="allowMultiple")return{allowMultiple:!1};if(r=="defaultValue"&&Array.isArray(e)&&e.length>0)return{defaultValue:e[0]}}}}var ab=[];async function cM(t,e){return t.defaultValue||"No answer"}async function lM({text:t,context:e,choices:r,allowMultiple:n,defaultValue:i},a,c){let g=[],{log:_,stream:b}=a,C=i||"No answer";for(_.info(t,{choices:r,info:e,allowMultiple:n,defaultValue:i,event:"tool.question"});;){if(b.markdown(fM(t,e)),n&&g.length?b.markdown(dM(g)):b.markdown(`

(`+C+`)

`),a.auto)return C;let j=pM(r,g,n),K=await ob(a,{followups:j});if(n){if(!K.prompt)return C=g.length?g.join(", "):C,ab.push({question:t,answer:C}),C}else return C=K.prompt||C,ab.push({question:t,answer:C}),C;g.push(K.prompt)}}var fM=(t,e)=>`

---
Q: **${t}**

${e}
`,dM=t=>`
${t.map(e=>`
- ${e}`)}
`;function pM(t,e,r){let n=[];return t.forEach(i=>{e.indexOf(i)==-1&&!/please/i.test(i)&&n.push({command:"",prompt:i})}),r&&n.push({command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"}),n}var N_={name:QL,description:eM,parameters:oM,execute:cM,finalize:lM,progress:sM,repair:uM,latest:ab};var ZN="multicoder_evaluation",vM=Qt`
    Reports the evaluation results. Use this tool when requested to evaluate the next step or task.

    Evaluate the next step for 
    - lack of clarity (ambiguity, incompleteness, imprecision),
    - complexity (functional scope, architectural scale, expertise required)
    - workload (amount of code, projected effort, budget estimate)

    Carefully choose the most appropriate level for each evaluated dimension.
`,mM=Qt`
    Using ${ZN} tool reply with an evaluation of the next step for lack of clarity, complexity and workload.
`,hM=Qt`
    Ambiguity:
        0 - n/a
        1 - very low
        2 - low
        3 - medium
        4 - high
        5 - very high
`,gM=Qt`
    Incompleteness:
        0 - n/a
        1 - very low
        2 - low
        3 - medium
        4 - high
        5 - very high
`,_M=Qt`
    Imprecision:
        0 - n/a
        1 - very low
        2 - low
        3 - medium
        4 - high
        5 - very high
`,yM=Qt`
    Functional scope:
        0 - n/a
        1 - implementation details, simple bugfix, code formatting
        2 - user story, issue, enhancement, complex bugfix
        3 - product feature, architectural refactoring
        4 - epic, application, library, subsystem
        5 - full product, platform, framework
`,wM=Qt`
    Architectural scale:
        0 - n/a
        1 - code level (local scope): variable naming, control flow, error handling
        2 - component level (single module): classes, functions, state management, data structures
        3 - service level (multiple modules): APIs, database models, service integrations
        4 - application level (system-wide): application architecture, system design
        5 - enterprise level (cross-system): distributed systems, cloud infrastructure, scalability
`,SM=Qt`
    Software development expertise required:
        0 - n/a
        1 - junior (1 year)
        2 - mid (1-3 years)
        3 - senior (3-5 years)
        4 - staff (5-10 years)
        5 - principal (10+) years
`,bM=Qt`
    Volume of sourcecode changes, lines of code (LoC):
        0 - n/a
        1 - 20-50 LoC, small change
        2 - 100-200 LoC, single commit
        3 - 500-1000 LoC, multiple commits, single pull request (PR)
        4 - 2000-5000 LoC, multiple PRs, dedicated branch, small repository
        5 - above 10000 LoC, large repository or multiple repositories
`,EM=Qt`
    Projected effort:
        0 - n/a
        1 - minutes
        2 - hours
        3 - days
        4 - weeks
        5 - months
`,TM=Qt`
    Development budget estimate:
        0 - n/a
        1 - very low
        2 - $20-200
        3 - $200-2000
        4 - $2000-20000
        5 - above $20000
`,IM=Qt`
    true if task requirements need further clarification or refinement
`,NM=Qt`
    true if solution is not trivial and will benefit from detailed design
`,DM=Qt`
    true to split the task into smaller, manageable steps
`,CM=P.object({ambiguity:P.number().describe(hM),incompleteness:P.number().describe(gM),imprecision:P.number().describe(_M),functional:P.number().describe(yM),architectural:P.number().describe(wM),expertise:P.number().describe(SM),sourcecode:P.number().describe(bM),effort:P.number().describe(EM),budget:P.number().describe(TM),requirements:P.boolean().describe(IM),design:P.boolean().describe(NM),planning:P.boolean().describe(DM)}),RM=()=>({ambiguity:1,incompleteness:1,imprecision:1,functional:1,architectural:1,expertise:1,sourcecode:1,effort:1,budget:1,requirements:!1,design:!1,planning:!1});function xM(t,{effort:e,budget:r}){if(t.code=="invalid_type"){let n=t.path[0];if(t.received=="undefined"&&n=="sourcecode"&&(e||r))return{sourcecode:e||r}}}async function OM(t,{log:e}){let r=_=>_.toFixed(1),[n,i,a]=XN(t),c=`${r(n)} ${r(i)} ${r(a)} `,g=`${t.requirements} ${t.design} ${t.planning}`;return e.info(c+g,{vagueness:n,complexity:i,workload:a,...t,event:"tool.evaluation"}),"ok"}function XN(t){let e=(t.ambiguity+t.incompleteness+t.imprecision)/3,r=(t.architectural+t.functional+t.expertise)/3,n=(t.effort+t.sourcecode+t.budget)/3;return[e,r,n]}var Jh={name:ZN,description:vM,parameters:CM,execute:OM,retry:mM,fallback:RM,repair:xM,compute:XN};var eD=Symbol("Let zodToJsonSchema decide on which parser to use");var QN={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},tD=t=>typeof t=="string"?{...QN,name:t}:{...QN,...t};var rD=t=>{let e=tD(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}};function sb(t,e,r,n){n!=null&&n.errorMessages&&r&&(t.errorMessage={...t.errorMessage,[e]:r})}function mn(t,e,r,n,i){t[e]=r,sb(t,e,n,i)}function nD(){return{}}function iD(t,e){var n,i,a;let r={type:"array"};return(n=t.type)!=null&&n._def&&((a=(i=t.type)==null?void 0:i._def)==null?void 0:a.typeName)!==Ge.ZodAny&&(r.items=mr(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&mn(r,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&mn(r,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(mn(r,"minItems",t.exactLength.value,t.exactLength.message,e),mn(r,"maxItems",t.exactLength.value,t.exactLength.message,e)),r}function aD(t,e){let r={type:"integer",format:"int64"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?mn(r,"minimum",n.value,n.message,e):mn(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),mn(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?mn(r,"maximum",n.value,n.message,e):mn(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),mn(r,"maximum",n.value,n.message,e));break;case"multipleOf":mn(r,"multipleOf",n.value,n.message,e);break}return r}function oD(){return{type:"boolean"}}function sw(t,e){return mr(t.type._def,e)}var sD=(t,e)=>mr(t.innerType._def,e);function ub(t,e,r){let n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((i,a)=>ub(t,e,i))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return AM(t,e)}}var AM=(t,e)=>{let r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(let n of t.checks)switch(n.kind){case"min":mn(r,"minimum",n.value,n.message,e);break;case"max":mn(r,"maximum",n.value,n.message,e);break}return r};function uD(t,e){return{...mr(t.innerType._def,e),default:t.defaultValue()}}function cD(t,e){return e.effectStrategy==="input"?mr(t.schema._def,e):{}}function lD(t){return{type:"string",enum:Array.from(t.values)}}var PM=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function fD(t,e){let r=[mr(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),mr(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a),n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,i=[];return r.forEach(a=>{if(PM(a))i.push(...a.allOf),a.unevaluatedProperties===void 0&&(n=void 0);else{let c=a;if("additionalProperties"in a&&a.additionalProperties===!1){let{additionalProperties:g,..._}=a;c=_}else n=void 0;i.push(c)}}),i.length?{allOf:i,...n}:void 0}function dD(t,e){let r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}var cb,vv={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(cb===void 0&&(cb=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),cb),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function uw(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":mn(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e);break;case"max":mn(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":mv(r,"email",n.message,e);break;case"format:idn-email":mv(r,"idn-email",n.message,e);break;case"pattern:zod":Kc(r,vv.email,n.message,e);break}break;case"url":mv(r,"uri",n.message,e);break;case"uuid":mv(r,"uuid",n.message,e);break;case"regex":Kc(r,n.regex,n.message,e);break;case"cuid":Kc(r,vv.cuid,n.message,e);break;case"cuid2":Kc(r,vv.cuid2,n.message,e);break;case"startsWith":Kc(r,RegExp(`^${lb(n.value,e)}`),n.message,e);break;case"endsWith":Kc(r,RegExp(`${lb(n.value,e)}$`),n.message,e);break;case"datetime":mv(r,"date-time",n.message,e);break;case"date":mv(r,"date",n.message,e);break;case"time":mv(r,"time",n.message,e);break;case"duration":mv(r,"duration",n.message,e);break;case"length":mn(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e),mn(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"includes":{Kc(r,RegExp(lb(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&mv(r,"ipv4",n.message,e),n.version!=="v4"&&mv(r,"ipv6",n.message,e);break}case"base64url":Kc(r,vv.base64url,n.message,e);break;case"jwt":Kc(r,vv.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&Kc(r,vv.ipv4Cidr,n.message,e),n.version!=="v4"&&Kc(r,vv.ipv6Cidr,n.message,e);break}case"emoji":Kc(r,vv.emoji(),n.message,e);break;case"ulid":{Kc(r,vv.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{mv(r,"binary",n.message,e);break}case"contentEncoding:base64":{mn(r,"contentEncoding","base64",n.message,e);break}case"pattern:zod":{Kc(r,vv.base64,n.message,e);break}}break}case"nanoid":Kc(r,vv.nanoid,n.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function lb(t,e){return e.patternStrategy==="escape"?LM(t):t}var kM=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function LM(t){let e="";for(let r=0;r<t.length;r++)kM.has(t[r])||(e+="\\"),e+=t[r];return e}function mv(t,e,r,n){var i;t.format||(i=t.anyOf)!=null&&i.some(a=>a.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):mn(t,"format",e,r,n)}function Kc(t,e,r,n){var i;t.pattern||(i=t.allOf)!=null&&i.some(a=>a.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:pD(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):mn(t,"pattern",pD(e,n),r,n)}function pD(t,e){var _;if(!e.applyRegexFlags||!t.flags)return t.source;let r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},n=r.i?t.source.toLowerCase():t.source,i="",a=!1,c=!1,g=!1;for(let b=0;b<n.length;b++){if(a){i+=n[b],a=!1;continue}if(r.i){if(c){if(n[b].match(/[a-z]/)){g?(i+=n[b],i+=`${n[b-2]}-${n[b]}`.toUpperCase(),g=!1):n[b+1]==="-"&&((_=n[b+2])!=null&&_.match(/[a-z]/))?(i+=n[b],g=!0):i+=`${n[b]}${n[b].toUpperCase()}`;continue}}else if(n[b].match(/[a-z]/)){i+=`[${n[b]}${n[b].toUpperCase()}]`;continue}}if(r.m){if(n[b]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(n[b]==="$"){i+=`($|(?=[\r
]))`;continue}}if(r.s&&n[b]==="."){i+=c?`${n[b]}\r
`:`[${n[b]}\r
]`;continue}i+=n[b],n[b]==="\\"?a=!0:c&&n[b]==="]"?c=!1:!c&&n[b]==="["&&(c=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}function cw(t,e){var n,i,a,c,g,_;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((n=t.keyType)==null?void 0:n._def.typeName)===Ge.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((b,C)=>({...b,[C]:mr(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",C]})??{}}),{}),additionalProperties:!1};let r={type:"object",additionalProperties:mr(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return r;if(((i=t.keyType)==null?void 0:i._def.typeName)===Ge.ZodString&&((a=t.keyType._def.checks)!=null&&a.length)){let{type:b,...C}=uw(t.keyType._def,e);return{...r,propertyNames:C}}else{if(((c=t.keyType)==null?void 0:c._def.typeName)===Ge.ZodEnum)return{...r,propertyNames:{enum:t.keyType._def.values}};if(((g=t.keyType)==null?void 0:g._def.typeName)===Ge.ZodBranded&&t.keyType._def.type._def.typeName===Ge.ZodString&&((_=t.keyType._def.type._def.checks)!=null&&_.length)){let{type:b,...C}=sw(t.keyType._def,e);return{...r,propertyNames:C}}}return r}function vD(t,e){if(e.mapStrategy==="record")return cw(t,e);let r=mr(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},n=mr(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function mD(t){let e=t.values,n=Object.keys(t.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),i=Array.from(new Set(n.map(a=>typeof a)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:n}}function hD(){return{not:{}}}function gD(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var fy={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function yD(t,e){if(e.target==="openApi3")return _D(t,e);let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in fy&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((i,a)=>{let c=fy[a._def.typeName];return c&&!i.includes(c)?[...i,c]:i},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((i,a)=>{let c=typeof a._def.value;switch(c){case"string":case"number":case"boolean":return[...i,c];case"bigint":return[...i,"integer"];case"object":if(a._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(n.length===r.length){let i=n.filter((a,c,g)=>g.indexOf(a)===c);return{type:i.length>1?i:i[0],enum:r.reduce((a,c)=>a.includes(c._def.value)?a:[...a,c._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,i)=>[...n,...i._def.values.filter(a=>!n.includes(a))],[])};return _D(t,e)}var _D=(t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,i)=>mr(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function wD(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:fy[t.innerType._def.typeName],nullable:!0}:{type:[fy[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let n=mr(t.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let r=mr(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function SD(t,e){let r={type:"number"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"int":r.type="integer",sb(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?mn(r,"minimum",n.value,n.message,e):mn(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),mn(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?mn(r,"maximum",n.value,n.message,e):mn(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),mn(r,"maximum",n.value,n.message,e));break;case"multipleOf":mn(r,"multipleOf",n.value,n.message,e);break}return r}function MM(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":mr(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":mr(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function bD(t,e){let r=e.target==="openAi",n={type:"object",...Object.entries(t.shape()).reduce((i,[a,c])=>{if(c===void 0||c._def===void 0)return i;let g=c.isOptional();g&&r&&(c instanceof Wl&&(c=c._def.innerType),c.isNullable()||(c=c.nullable()),g=!1);let _=mr(c._def,{...e,currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]});return _===void 0?i:{properties:{...i.properties,[a]:_},required:g?i.required:[...i.required,a]}},{properties:{},required:[]}),additionalProperties:MM(t,e)};return n.required.length||delete n.required,n}var ED=(t,e)=>{var n;if(e.currentPath.toString()===((n=e.propertyPath)==null?void 0:n.toString()))return mr(t.innerType._def,e);let r=mr(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}};var TD=(t,e)=>{if(e.pipeStrategy==="input")return mr(t.in._def,e);if(e.pipeStrategy==="output")return mr(t.out._def,e);let r=mr(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=mr(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(i=>i!==void 0)}};function ID(t,e){return mr(t.type._def,e)}function ND(t,e){let n={type:"array",uniqueItems:!0,items:mr(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&mn(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&mn(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}function DD(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>mr(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:mr(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>mr(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function CD(){return{not:{}}}function RD(){return{}}var xD=(t,e)=>mr(t.innerType._def,e);var OD=(t,e,r)=>{switch(e){case Ge.ZodString:return uw(t,r);case Ge.ZodNumber:return SD(t,r);case Ge.ZodObject:return bD(t,r);case Ge.ZodBigInt:return aD(t,r);case Ge.ZodBoolean:return oD();case Ge.ZodDate:return ub(t,r);case Ge.ZodUndefined:return CD();case Ge.ZodNull:return gD(r);case Ge.ZodArray:return iD(t,r);case Ge.ZodUnion:case Ge.ZodDiscriminatedUnion:return yD(t,r);case Ge.ZodIntersection:return fD(t,r);case Ge.ZodTuple:return DD(t,r);case Ge.ZodRecord:return cw(t,r);case Ge.ZodLiteral:return dD(t,r);case Ge.ZodEnum:return lD(t);case Ge.ZodNativeEnum:return mD(t);case Ge.ZodNullable:return wD(t,r);case Ge.ZodOptional:return ED(t,r);case Ge.ZodMap:return vD(t,r);case Ge.ZodSet:return ND(t,r);case Ge.ZodLazy:return()=>t.getter()._def;case Ge.ZodPromise:return ID(t,r);case Ge.ZodNaN:case Ge.ZodNever:return hD();case Ge.ZodEffects:return cD(t,r);case Ge.ZodAny:return nD();case Ge.ZodUnknown:return RD();case Ge.ZodDefault:return uD(t,r);case Ge.ZodBranded:return sw(t,r);case Ge.ZodReadonly:return xD(t,r);case Ge.ZodCatch:return sD(t,r);case Ge.ZodPipeline:return TD(t,r);case Ge.ZodFunction:case Ge.ZodVoid:case Ge.ZodSymbol:return;default:return(n=>{})(e)}};function mr(t,e,r=!1){var g;let n=e.seen.get(t);if(e.override){let _=(g=e.override)==null?void 0:g.call(e,t,e,n,r);if(_!==eD)return _}if(n&&!r){let _=FM(n,e);if(_!==void 0)return _}let i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);let a=OD(t,t.typeName,e),c=typeof a=="function"?mr(a(),e):a;if(c&&jM(t,e,c),e.postProcess){let _=e.postProcess(c,t,e);return i.jsonSchema=c,_}return i.jsonSchema=c,c}var FM=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:UM(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},UM=(t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},jM=(t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r);var AD=(t,e)=>{let r=rD(e),n=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((_,[b,C])=>({..._,[b]:mr(C._def,{...r,currentPath:[...r.basePath,r.definitionPath,b]},!0)??{}}),{}):void 0,i=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,a=mr(t._def,i===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,i]},!1)??{},c=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;c!==void 0&&(a.title=c);let g=i===void 0?n?{...a,[r.definitionPath]:n}:a:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,i].join("/"),[r.definitionPath]:{...n,[i]:a}};return r.target==="jsonSchema7"?g.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(g.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in g||"oneOf"in g||"allOf"in g||"type"in g&&Array.isArray(g.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),g};var PD=AD;var dy={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},py={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},vy={code:"4",name:"assistant_message",parse:t=>{if(t==null||typeof t!="object"||!("id"in t)||!("role"in t)||!("content"in t)||typeof t.id!="string"||typeof t.role!="string"||t.role!=="assistant"||!Array.isArray(t.content)||!t.content.every(e=>e!=null&&typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&e.text!=null&&typeof e.text=="object"&&"value"in e.text&&typeof e.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:t}}},my={code:"5",name:"assistant_control_data",parse:t=>{if(t==null||typeof t!="object"||!("threadId"in t)||!("messageId"in t)||typeof t.threadId!="string"||typeof t.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:t.threadId,messageId:t.messageId}}}},hy={code:"6",name:"data_message",parse:t=>{if(t==null||typeof t!="object"||!("role"in t)||!("data"in t)||typeof t.role!="string"||t.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:t}}},YM=[dy,py,vy,my,hy],gV={[dy.code]:dy,[py.code]:py,[vy.code]:vy,[my.code]:my,[hy.code]:hy},_V={[dy.name]:dy.code,[py.name]:py.code,[vy.name]:vy.code,[my.name]:my.code,[hy.name]:hy.code},yV=YM.map(t=>t.code);function $M(t){let e=["ROOT"],r=-1,n=null;function i(_,b,C){switch(_){case'"':{r=b,e.pop(),e.push(C),e.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=b,n=b,e.pop(),e.push(C),e.push("INSIDE_LITERAL");break}case"-":{e.pop(),e.push(C),e.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=b,e.pop(),e.push(C),e.push("INSIDE_NUMBER");break}case"{":{r=b,e.pop(),e.push(C),e.push("INSIDE_OBJECT_START");break}case"[":{r=b,e.pop(),e.push(C),e.push("INSIDE_ARRAY_START");break}}}function a(_,b){switch(_){case",":{e.pop(),e.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=b,e.pop();break}}}function c(_,b){switch(_){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=b,e.pop();break}}}for(let _=0;_<t.length;_++){let b=t[_];switch(e[e.length-1]){case"ROOT":i(b,_,"FINISH");break;case"INSIDE_OBJECT_START":{switch(b){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}case"}":{r=_,e.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(b){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(b){case'"':{e.pop(),e.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(b){case":":{e.pop(),e.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{i(b,_,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{a(b,_);break}case"INSIDE_STRING":{switch(b){case'"':{e.pop(),r=_;break}case"\\":{e.push("INSIDE_STRING_ESCAPE");break}default:r=_}break}case"INSIDE_ARRAY_START":{switch(b){case"]":{r=_,e.pop();break}default:{r=_,i(b,_,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(b){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=_,e.pop();break}default:{r=_;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{i(b,_,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{e.pop(),r=_;break}case"INSIDE_NUMBER":{switch(b){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=_;break}case"e":case"E":case"-":case".":break;case",":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&c(b,_),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(b,_);break}case"}":{e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(b,_);break}case"]":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&c(b,_);break}default:{e.pop();break}}break}case"INSIDE_LITERAL":{let j=t.substring(n,_+1);!"false".startsWith(j)&&!"true".startsWith(j)&&!"null".startsWith(j)?(e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?a(b,_):e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&c(b,_)):r=_;break}}}let g=t.slice(0,r+1);for(let _=e.length-1;_>=0;_--)switch(e[_]){case"INSIDE_STRING":{g+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{g+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{g+="]";break}case"INSIDE_LITERAL":{let C=t.substring(n,t.length);"true".startsWith(C)?g+="true".slice(C.length):"false".startsWith(C)?g+="false".slice(C.length):"null".startsWith(C)&&(g+="null".slice(C.length))}}return g}function kD(t){if(t===void 0)return{value:void 0,state:"undefined-input"};let e=cm({text:t});return e.success?{value:e.value,state:"successful-parse"}:(e=cm({text:$M(t)}),e.success?{value:e.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var BM={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},qM={code:"2",name:"data",parse:t=>{if(!Array.isArray(t))throw new Error('"data" parts expect an array value.');return{type:"data",value:t}}},HM={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},VM={code:"8",name:"message_annotations",parse:t=>{if(!Array.isArray(t))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:t}}},GM={code:"9",name:"tool_call",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string"||!("args"in t)||typeof t.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:t}}},zM={code:"a",name:"tool_result",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("result"in t))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:t}}},WM={code:"b",name:"tool_call_streaming_start",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:t}}},KM={code:"c",name:"tool_call_delta",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("argsTextDelta"in t)||typeof t.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:t}}},JM={code:"d",name:"finish_message",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');let e={finishReason:t.finishReason};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),{type:"finish_message",value:e}}},ZM={code:"e",name:"finish_step",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');let e={finishReason:t.finishReason,isContinued:!1};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),"isContinued"in t&&typeof t.isContinued=="boolean"&&(e.isContinued=t.isContinued),{type:"finish_step",value:e}}},XM={code:"f",name:"start_step",parse:t=>{if(t==null||typeof t!="object"||!("messageId"in t)||typeof t.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:t.messageId}}}},QM={code:"g",name:"reasoning",parse:t=>{if(typeof t!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:t}}},eF={code:"h",name:"source",parse:t=>{if(t==null||typeof t!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:t}}},tF={code:"i",name:"redacted_reasoning",parse:t=>{if(t==null||typeof t!="object"||!("data"in t)||typeof t.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:t.data}}}},rF={code:"j",name:"reasoning_signature",parse:t=>{if(t==null||typeof t!="object"||!("signature"in t)||typeof t.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:t.signature}}}},lw=[BM,qM,HM,VM,GM,zM,WM,KM,JM,ZM,XM,QM,eF,tF,rF],SV=Object.fromEntries(lw.map(t=>[t.code,t])),bV=Object.fromEntries(lw.map(t=>[t.name,t.code])),EV=lw.map(t=>t.code);function $s(t,e){let r=lw.find(n=>n.name===t);if(!r)throw new Error(`Invalid stream part type: ${t}`);return`${r.code}:${JSON.stringify(e)}
`}function nF(t,e){var r;let n=(r=e==null?void 0:e.useReferences)!=null?r:!1;return iF(PD(t,{$refStrategy:n?"root":"none",target:"jsonSchema7"}),{validate:i=>{let a=t.safeParse(i);return a.success?{success:!0,value:a.data}:{success:!1,error:a.error}}})}var fb=Symbol.for("vercel.ai.schema");function iF(t,{validate:e}={}){return{[fb]:!0,_type:void 0,[ay]:!0,jsonSchema:t,validate:e}}function aF(t){return typeof t=="object"&&t!==null&&fb in t&&t[fb]===!0&&"jsonSchema"in t&&"validate"in t}function $g(t){return aF(t)?t:nF(t)}var LD=typeof globalThis=="object"?globalThis:global;var ch="1.9.0";var MD=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function oF(t){var e=new Set([t]),r=new Set,n=t.match(MD);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(_){return _===t};function a(g){return r.add(g),!1}function c(g){return e.add(g),!0}return function(_){if(e.has(_))return!0;if(r.has(_))return!1;var b=_.match(MD);if(!b)return a(_);var C={major:+b[1],minor:+b[2],patch:+b[3],prerelease:b[4]};return C.prerelease!=null||i.major!==C.major?a(_):i.major===0?i.minor===C.minor&&i.patch<=C.patch?c(_):a(_):i.minor<=C.minor?c(_):a(_)}}var FD=oF(ch);var sF=ch.split(".")[0],gy=Symbol.for("opentelemetry.js.api."+sF),_y=LD;function D_(t,e,r,n){var i;n===void 0&&(n=!1);var a=_y[gy]=(i=_y[gy])!==null&&i!==void 0?i:{version:ch};if(!n&&a[t]){var c=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(c.stack||c.message),!1}if(a.version!==ch){var c=new Error("@opentelemetry/api: Registration of version v"+a.version+" for "+t+" does not match previously registered API v"+ch);return r.error(c.stack||c.message),!1}return a[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+ch+"."),!0}function lh(t){var e,r,n=(e=_y[gy])===null||e===void 0?void 0:e.version;if(!(!n||!FD(n)))return(r=_y[gy])===null||r===void 0?void 0:r[t]}function C_(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+ch+".");var r=_y[gy];r&&delete r[t]}var uF=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(g){c={error:g}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return a},cF=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},UD=function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return yy("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return yy("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return yy("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return yy("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return yy("verbose",this._namespace,e)},t}();function yy(t,e,r){var n=lh("diag");if(n)return r.unshift(e),n[t].apply(n,cF([],uF(r),!1))}var Jc;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(Jc||(Jc={}));function jD(t,e){t<Jc.NONE?t=Jc.NONE:t>Jc.ALL&&(t=Jc.ALL),e=e||{};function r(n,i){var a=e[n];return typeof a=="function"&&t>=i?a.bind(e):function(){}}return{error:r("error",Jc.ERROR),warn:r("warn",Jc.WARN),info:r("info",Jc.INFO),debug:r("debug",Jc.DEBUG),verbose:r("verbose",Jc.VERBOSE)}}var lF=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(g){c={error:g}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return a},fF=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},dF="diag",R_=function(){function t(){function e(i){return function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var g=lh("diag");if(g)return g[i].apply(g,fF([],lF(a),!1))}}var r=this,n=function(i,a){var c,g,_;if(a===void 0&&(a={logLevel:Jc.INFO}),i===r){var b=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((c=b.stack)!==null&&c!==void 0?c:b.message),!1}typeof a=="number"&&(a={logLevel:a});var C=lh("diag"),j=jD((g=a.logLevel)!==null&&g!==void 0?g:Jc.INFO,i);if(C&&!a.suppressOverrideMessage){var K=(_=new Error().stack)!==null&&_!==void 0?_:"<failed to generate stacktrace>";C.warn("Current logger will be overwritten from "+K),j.warn("Current logger will overwrite one already registered from "+K)}return D_("diag",j,r,!0)};r.setLogger=n,r.disable=function(){C_(dF,r)},r.createComponentLogger=function(i){return new UD(i)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}();function YD(t){return Symbol.for(t)}var pF=function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,i){var a=new t(r._currentContext);return a._currentContext.set(n,i),a},r.deleteValue=function(n){var i=new t(r._currentContext);return i._currentContext.delete(n),i}}return t}(),$D=new pF;var vF=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(g){c={error:g}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return a},mF=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},BD=function(){function t(){}return t.prototype.active=function(){return $D},t.prototype.with=function(e,r,n){for(var i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];return r.call.apply(r,mF([n],vF(i),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}();var hF=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(g){c={error:g}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return a},gF=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},db="context",_F=new BD,fw=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return D_(db,e,R_.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var i,a=[],c=3;c<arguments.length;c++)a[c-3]=arguments[c];return(i=this._getContextManager()).with.apply(i,gF([e,r,n],hF(a),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return lh(db)||_F},t.prototype.disable=function(){this._getContextManager().disable(),C_(db,R_.instance())},t}();var dw;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(dw||(dw={}));var pb="0000000000000000",vb="00000000000000000000000000000000",qD={traceId:vb,spanId:pb,traceFlags:dw.NONE};var Zh=function(){function t(e){e===void 0&&(e=qD),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.addLink=function(e){return this},t.prototype.addLinks=function(e){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t}();var mb=YD("OpenTelemetry Context Key SPAN");function pw(t){return t.getValue(mb)||void 0}function HD(){return pw(fw.getInstance().active())}function wy(t,e){return t.setValue(mb,e)}function VD(t){return t.deleteValue(mb)}function GD(t,e){return wy(t,new Zh(e))}function vw(t){var e;return(e=pw(t))===null||e===void 0?void 0:e.spanContext()}var yF=/^([0-9a-f]{32})$/i,wF=/^[0-9a-f]{16}$/i;function SF(t){return yF.test(t)&&t!==vb}function bF(t){return wF.test(t)&&t!==pb}function mw(t){return SF(t.traceId)&&bF(t.spanId)}function zD(t){return new Zh(t)}var hb=fw.getInstance(),hw=function(){function t(){}return t.prototype.startSpan=function(e,r,n){n===void 0&&(n=hb.active());var i=!!(r!=null&&r.root);if(i)return new Zh;var a=n&&vw(n);return EF(a)&&mw(a)?new Zh(a):new Zh},t.prototype.startActiveSpan=function(e,r,n,i){var a,c,g;if(!(arguments.length<2)){arguments.length===2?g=r:arguments.length===3?(a=r,g=n):(a=r,c=n,g=i);var _=c??hb.active(),b=this.startSpan(e,a,_),C=wy(_,b);return hb.with(C,g,void 0,b)}},t}();function EF(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var TF=new hw,WD=function(){function t(e,r,n,i){this._provider=e,this.name=r,this.version=n,this.options=i}return t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,i){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):TF},t}();var KD=function(){function t(){}return t.prototype.getTracer=function(e,r,n){return new hw},t}();var IF=new KD,gb=function(){function t(){}return t.prototype.getTracer=function(e,r,n){var i;return(i=this.getDelegateTracer(e,r,n))!==null&&i!==void 0?i:new WD(this,e,r,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:IF},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(e,r,n)},t}();var x_;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(x_||(x_={}));var _b="trace",JD=function(){function t(){this._proxyTracerProvider=new gb,this.wrapSpanContext=zD,this.isSpanContextValid=mw,this.deleteSpan=VD,this.getSpan=pw,this.getActiveSpan=HD,this.getSpanContext=vw,this.setSpan=wy,this.setSpanContext=GD}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=D_(_b,this._proxyTracerProvider,R_.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return lh(_b)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){C_(_b,R_.instance()),this._proxyTracerProvider=new gb},t}();var yb=JD.getInstance();var NF=Object.defineProperty,Nb=(t,e)=>{for(var r in e)NF(t,r,{get:e[r],enumerable:!0})};function _w(t,{contentType:e,dataStreamVersion:r}){let n=new Headers(t??{});return n.has("Content-Type")||n.set("Content-Type",e),r!==void 0&&n.set("X-Vercel-AI-Data-Stream",r),n}function ZD(t,{contentType:e,dataStreamVersion:r}){let n={};if(t!=null)for(let[i,a]of Object.entries(t))n[i]=a;return n["Content-Type"]==null&&(n["Content-Type"]=e),r!==void 0&&(n["X-Vercel-AI-Data-Stream"]=r),n}function XD({response:t,status:e,statusText:r,headers:n,stream:i}){t.writeHead(e??200,r,n);let a=i.getReader();(async()=>{try{for(;;){let{done:g,value:_}=await a.read();if(g)break;t.write(_)}}catch(g){throw g}finally{t.end()}})()}var oC="AI_InvalidArgumentError",sC=`vercel.ai.error.${oC}`,DF=Symbol.for(sC),uC,hv=class extends xt{constructor({parameter:t,value:e,message:r}){super({name:oC,message:`Invalid argument for parameter ${t}: ${r}`}),this[uC]=!0,this.parameter=t,this.value=e}static isInstance(t){return xt.hasMarker(t,sC)}};uC=DF;var cC="AI_RetryError",lC=`vercel.ai.error.${cC}`,CF=Symbol.for(lC),fC,QD=class extends xt{constructor({message:t,reason:e,errors:r}){super({name:cC,message:t}),this[fC]=!0,this.reason=e,this.errors=r,this.lastError=r[r.length-1]}static isInstance(t){return xt.hasMarker(t,lC)}};fC=CF;var RF=({maxRetries:t=2,initialDelayInMs:e=2e3,backoffFactor:r=2}={})=>async n=>dC(n,{maxRetries:t,delayInMs:e,backoffFactor:r});async function dC(t,{maxRetries:e,delayInMs:r,backoffFactor:n},i=[]){try{return await t()}catch(a){if(iy(a)||e===0)throw a;let c=pN(a),g=[...i,a],_=g.length;if(_>e)throw new QD({message:`Failed after ${_} attempts. Last error: ${c}`,reason:"maxRetriesExceeded",errors:g});if(a instanceof Error&&zl.isInstance(a)&&a.isRetryable===!0&&_<=e)return await dN(r),dC(t,{maxRetries:e,delayInMs:n*r,backoffFactor:n},g);throw _===1?a:new QD({message:`Failed after ${_} attempts with non-retryable error: '${c}'`,reason:"errorNotRetryable",errors:g})}}function xF({maxRetries:t}){if(t!=null){if(!Number.isInteger(t))throw new hv({parameter:"maxRetries",value:t,message:"maxRetries must be an integer"});if(t<0)throw new hv({parameter:"maxRetries",value:t,message:"maxRetries must be >= 0"})}let e=t??2;return{maxRetries:e,retry:RF({maxRetries:e})}}function Eb({operationId:t,telemetry:e}){return{"operation.name":`${t}${(e==null?void 0:e.functionId)!=null?` ${e.functionId}`:""}`,"resource.name":e==null?void 0:e.functionId,"ai.operationId":t,"ai.telemetry.functionId":e==null?void 0:e.functionId}}function OF({model:t,settings:e,telemetry:r,headers:n}){var i;return{"ai.model.provider":t.provider,"ai.model.id":t.modelId,...Object.entries(e).reduce((a,[c,g])=>(a[`ai.settings.${c}`]=g,a),{}),...Object.entries((i=r==null?void 0:r.metadata)!=null?i:{}).reduce((a,[c,g])=>(a[`ai.telemetry.metadata.${c}`]=g,a),{}),...Object.entries(n??{}).reduce((a,[c,g])=>(g!==void 0&&(a[`ai.request.headers.${c}`]=g),a),{})}}var AF={startSpan(){return gw},startActiveSpan(t,e,r,n){if(typeof e=="function")return e(gw);if(typeof r=="function")return r(gw);if(typeof n=="function")return n(gw)}},gw={spanContext(){return PF},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},PF={traceId:"",spanId:"",traceFlags:0};function kF({isEnabled:t=!1,tracer:e}={}){return t?e||yb.getTracer("ai"):AF}function Tb({name:t,tracer:e,attributes:r,fn:n,endWhenDone:i=!0}){return e.startActiveSpan(t,{attributes:r},async a=>{try{let c=await n(a);return i&&a.end(),c}catch(c){try{c instanceof Error?(a.recordException({name:c.name,message:c.message,stack:c.stack}),a.setStatus({code:x_.ERROR,message:c.message})):a.setStatus({code:x_.ERROR})}finally{a.end()}throw c}})}function O_({telemetry:t,attributes:e}){return(t==null?void 0:t.isEnabled)!==!0?{}:Object.entries(e).reduce((r,[n,i])=>{if(i===void 0)return r;if(typeof i=="object"&&"input"in i&&typeof i.input=="function"){if((t==null?void 0:t.recordInputs)===!1)return r;let a=i.input();return a===void 0?r:{...r,[n]:a}}if(typeof i=="object"&&"output"in i&&typeof i.output=="function"){if((t==null?void 0:t.recordOutputs)===!1)return r;let a=i.output();return a===void 0?r:{...r,[n]:a}}return{...r,[n]:i}},{})}var LF="AI_NoImageGeneratedError",MF=`vercel.ai.error.${LF}`,FF=Symbol.for(MF),UF;UF=FF;var pC="AI_NoObjectGeneratedError",vC=`vercel.ai.error.${pC}`,jF=Symbol.for(vC),mC,eC=class extends xt{constructor({message:t="No object generated.",cause:e,text:r,response:n,usage:i}){super({name:pC,message:t,cause:e}),this[mC]=!0,this.text=r,this.response=n,this.usage=i}static isInstance(t){return xt.hasMarker(t,vC)}};mC=jF;var hC="AI_DownloadError",gC=`vercel.ai.error.${hC}`,YF=Symbol.for(gC),_C,wb=class extends xt{constructor({url:t,statusCode:e,statusText:r,cause:n,message:i=n==null?`Failed to download ${t}: ${e} ${r}`:`Failed to download ${t}: ${n}`}){super({name:hC,message:i,cause:n}),this[_C]=!0,this.url=t,this.statusCode=e,this.statusText=r}static isInstance(t){return xt.hasMarker(t,gC)}};_C=YF;async function $F({url:t,fetchImplementation:e=fetch}){var r;let n=t.toString();try{let i=await e(n);if(!i.ok)throw new wb({url:n,statusCode:i.status,statusText:i.statusText});return{data:new Uint8Array(await i.arrayBuffer()),mimeType:(r=i.headers.get("content-type"))!=null?r:void 0}}catch(i){throw wb.isInstance(i)?i:new wb({url:n,cause:i})}}var BF=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}];function qF(t){for(let{bytes:e,mimeType:r}of BF)if(t.length>=e.length&&e.every((n,i)=>t[i]===n))return r}var yC="AI_InvalidDataContentError",wC=`vercel.ai.error.${yC}`,HF=Symbol.for(wC),SC,tC=class extends xt{constructor({content:t,cause:e,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof t}.`}){super({name:yC,message:r,cause:e}),this[SC]=!0,this.content=t}static isInstance(t){return xt.hasMarker(t,wC)}};SC=HF;var bC=P.union([P.string(),P.instanceof(Uint8Array),P.instanceof(ArrayBuffer),P.custom(t=>{var e,r;return(r=(e=globalThis.Buffer)==null?void 0:e.isBuffer(t))!=null?r:!1},{message:"Must be a Buffer"})]);function VF(t){return typeof t=="string"?t:t instanceof ArrayBuffer?Eg(new Uint8Array(t)):Eg(t)}function yw(t){if(t instanceof Uint8Array)return t;if(typeof t=="string")try{return mN(t)}catch(e){throw new tC({message:"Invalid data content. Content string is not a base64-encoded media.",content:t,cause:e})}if(t instanceof ArrayBuffer)return new Uint8Array(t);throw new tC({content:t})}function GF(t){try{return new TextDecoder().decode(t)}catch{throw new Error("Error decoding Uint8Array to text")}}var EC="AI_InvalidMessageRoleError",TC=`vercel.ai.error.${EC}`,zF=Symbol.for(TC),IC,WF=class extends xt{constructor({role:t,message:e=`Invalid message role: '${t}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:EC,message:e}),this[IC]=!0,this.role=t}static isInstance(t){return xt.hasMarker(t,TC)}};IC=zF;function KF(t){try{let[e,r]=t.split(",");return{mimeType:e.split(";")[0].split(":")[1],base64Content:r}}catch{return{mimeType:void 0,base64Content:void 0}}}async function JF({prompt:t,modelSupportsImageUrls:e=!0,modelSupportsUrl:r=()=>!1,downloadImplementation:n=$F}){let i=await XF(t.messages,n,e,r);return[...t.system!=null?[{role:"system",content:t.system}]:[],...t.messages.map(a=>ZF(a,i))]}function ZF(t,e){var r,n,i,a,c,g;let _=t.role;switch(_){case"system":return{role:"system",content:t.content,providerMetadata:(r=t.providerOptions)!=null?r:t.experimental_providerMetadata};case"user":return typeof t.content=="string"?{role:"user",content:[{type:"text",text:t.content}],providerMetadata:(n=t.providerOptions)!=null?n:t.experimental_providerMetadata}:{role:"user",content:t.content.map(b=>QF(b,e)).filter(b=>b.type!=="text"||b.text!==""),providerMetadata:(i=t.providerOptions)!=null?i:t.experimental_providerMetadata};case"assistant":return typeof t.content=="string"?{role:"assistant",content:[{type:"text",text:t.content}],providerMetadata:(a=t.providerOptions)!=null?a:t.experimental_providerMetadata}:{role:"assistant",content:t.content.filter(b=>b.type!=="text"||b.text!=="").map(b=>{let{experimental_providerMetadata:C,providerOptions:j,...K}=b;return{...K,providerMetadata:j??C}}),providerMetadata:(c=t.providerOptions)!=null?c:t.experimental_providerMetadata};case"tool":return{role:"tool",content:t.content.map(b=>{var C;return{type:"tool-result",toolCallId:b.toolCallId,toolName:b.toolName,result:b.result,content:b.experimental_content,isError:b.isError,providerMetadata:(C=b.providerOptions)!=null?C:b.experimental_providerMetadata}}),providerMetadata:(g=t.providerOptions)!=null?g:t.experimental_providerMetadata};default:{let b=_;throw new WF({role:b})}}}async function XF(t,e,r,n){let i=t.filter(c=>c.role==="user").map(c=>c.content).filter(c=>Array.isArray(c)).flat().filter(c=>c.type==="image"||c.type==="file").filter(c=>!(c.type==="image"&&r===!0)).map(c=>c.type==="image"?c.image:c.data).map(c=>typeof c=="string"&&(c.startsWith("http:")||c.startsWith("https:"))?new URL(c):c).filter(c=>c instanceof URL).filter(c=>!n(c)),a=await Promise.all(i.map(async c=>({url:c,data:await e({url:c})})));return Object.fromEntries(a.map(({url:c,data:g})=>[c.toString(),g]))}function QF(t,e){var r;if(t.type==="text")return{type:"text",text:t.text,providerMetadata:t.experimental_providerMetadata};let n=t.mimeType,i,a,c,g=t.type;switch(g){case"image":i=t.image;break;case"file":i=t.data;break;default:throw new Error(`Unsupported part type: ${g}`)}try{a=typeof i=="string"?new URL(i):i}catch{a=i}if(a instanceof URL)if(a.protocol==="data:"){let{mimeType:_,base64Content:b}=KF(a.toString());if(_==null||b==null)throw new Error(`Invalid data URL format in part ${g}`);n=_,c=yw(b)}else{let _=e[a.toString()];_?(c=_.data,n??(n=_.mimeType)):c=a}else c=yw(a);switch(g){case"image":return c instanceof Uint8Array&&(n=(r=qF(c))!=null?r:n),{type:"image",image:c,mimeType:n,providerMetadata:t.experimental_providerMetadata};case"file":{if(n==null)throw new Error("Mime type is missing for file part");return{type:"file",data:c instanceof Uint8Array?VF(c):c,mimeType:n,providerMetadata:t.experimental_providerMetadata}}}}function e2({maxTokens:t,temperature:e,topP:r,topK:n,presencePenalty:i,frequencyPenalty:a,stopSequences:c,seed:g}){if(t!=null){if(!Number.isInteger(t))throw new hv({parameter:"maxTokens",value:t,message:"maxTokens must be an integer"});if(t<1)throw new hv({parameter:"maxTokens",value:t,message:"maxTokens must be >= 1"})}if(e!=null&&typeof e!="number")throw new hv({parameter:"temperature",value:e,message:"temperature must be a number"});if(r!=null&&typeof r!="number")throw new hv({parameter:"topP",value:r,message:"topP must be a number"});if(n!=null&&typeof n!="number")throw new hv({parameter:"topK",value:n,message:"topK must be a number"});if(i!=null&&typeof i!="number")throw new hv({parameter:"presencePenalty",value:i,message:"presencePenalty must be a number"});if(a!=null&&typeof a!="number")throw new hv({parameter:"frequencyPenalty",value:a,message:"frequencyPenalty must be a number"});if(g!=null&&!Number.isInteger(g))throw new hv({parameter:"seed",value:g,message:"seed must be an integer"});return{maxTokens:t,temperature:e??0,topP:r,topK:n,presencePenalty:i,frequencyPenalty:a,stopSequences:c!=null&&c.length>0?c:void 0,seed:g}}function t2(t){var e,r,n;let i=[];for(let a of t){let c;try{c=new URL(a.url)}catch{throw new Error(`Invalid URL: ${a.url}`)}switch(c.protocol){case"http:":case"https:":{if((e=a.contentType)!=null&&e.startsWith("image/"))i.push({type:"image",image:c});else{if(!a.contentType)throw new Error("If the attachment is not an image, it must specify a content type");i.push({type:"file",data:c,mimeType:a.contentType})}break}case"data:":{let g,_,b;try{[g,_]=a.url.split(","),b=g.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${a.url}`)}if(b==null||_==null)throw new Error(`Invalid data URL format: ${a.url}`);if((r=a.contentType)!=null&&r.startsWith("image/"))i.push({type:"image",image:yw(_)});else if((n=a.contentType)!=null&&n.startsWith("text/"))i.push({type:"text",text:GF(yw(_))});else{if(!a.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");i.push({type:"file",data:_,mimeType:a.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${c.protocol}`)}}return i}var NC="AI_MessageConversionError",DC=`vercel.ai.error.${NC}`,r2=Symbol.for(DC),CC,Sb=class extends xt{constructor({originalMessage:t,message:e}){super({name:NC,message:e}),this[CC]=!0,this.originalMessage=t}static isInstance(t){return xt.hasMarker(t,DC)}};CC=r2;function n2(t,e){var r,n;let i=(r=e==null?void 0:e.tools)!=null?r:{},a=[];for(let g=0;g<t.length;g++){let _=t[g],b=g===t.length-1,{role:C,content:j,experimental_attachments:K}=_;switch(C){case"system":{a.push({role:"system",content:j});break}case"user":{a.push({role:"user",content:K?[{type:"text",text:j},...t2(K)]:j});break}case"assistant":{if(_.parts!=null){let G=function(){let Me=[];for(let ke of Te)switch(ke.type){case"text":Me.push({type:"text",text:ke.text});break;case"reasoning":{for(let et of ke.details)switch(et.type){case"text":Me.push({type:"reasoning",text:et.text,signature:et.signature});break;case"redacted":Me.push({type:"redacted-reasoning",data:et.data});break}break}case"tool-invocation":Me.push({type:"tool-call",toolCallId:ke.toolInvocation.toolCallId,toolName:ke.toolInvocation.toolName,args:ke.toolInvocation.args});break;default:{let et=ke;throw new Error(`Unsupported part: ${et}`)}}a.push({role:"assistant",content:Me});let Se=Te.filter(ke=>ke.type==="tool-invocation").map(ke=>ke.toolInvocation);Se.length>0&&a.push({role:"tool",content:Se.map(ke=>{if(!("result"in ke))throw new Sb({originalMessage:_,message:"ToolInvocation must have a result: "+JSON.stringify(ke)});let{toolCallId:et,toolName:ot,result:Dt}=ke,qt=i[ot];return(qt==null?void 0:qt.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:et,toolName:ot,result:qt.experimental_toToolResultContent(Dt),experimental_content:qt.experimental_toToolResultContent(Dt)}:{type:"tool-result",toolCallId:et,toolName:ot,result:Dt}})}),Te=[],le=!1,ne++};var c=G;let ne=0,le=!1,Te=[];for(let Me of _.parts)switch(Me.type){case"reasoning":Te.push(Me);break;case"text":{le&&G(),Te.push(Me);break}case"tool-invocation":{((n=Me.toolInvocation.step)!=null?n:0)!==ne&&G(),Te.push(Me),le=!0;break}}G();break}let te=_.toolInvocations;if(te==null||te.length===0){a.push({role:"assistant",content:j});break}let z=te.reduce((G,ne)=>{var le;return Math.max(G,(le=ne.step)!=null?le:0)},0);for(let G=0;G<=z;G++){let ne=te.filter(le=>{var Te;return((Te=le.step)!=null?Te:0)===G});ne.length!==0&&(a.push({role:"assistant",content:[...b&&j&&G===0?[{type:"text",text:j}]:[],...ne.map(({toolCallId:le,toolName:Te,args:Me})=>({type:"tool-call",toolCallId:le,toolName:Te,args:Me}))]}),a.push({role:"tool",content:ne.map(le=>{if(!("result"in le))throw new Sb({originalMessage:_,message:"ToolInvocation must have a result: "+JSON.stringify(le)});let{toolCallId:Te,toolName:Me,result:Se}=le,ke=i[Me];return(ke==null?void 0:ke.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:Te,toolName:Me,result:ke.experimental_toToolResultContent(Se),experimental_content:ke.experimental_toToolResultContent(Se)}:{type:"tool-result",toolCallId:Te,toolName:Me,result:Se}})}))}j&&!b&&a.push({role:"assistant",content:j});break}case"data":break;default:{let te=C;throw new Sb({originalMessage:_,message:`Unsupported role: ${te}`})}}}return a}function i2(t){if(!Array.isArray(t))return"other";if(t.length===0)return"messages";let e=t.map(a2);return e.some(r=>r==="has-ui-specific-parts")?"ui-messages":e.every(r=>r==="has-core-specific-parts"||r==="message")?"messages":"other"}function a2(t){return typeof t=="object"&&t!==null&&(t.role==="function"||t.role==="data"||"toolInvocations"in t||"experimental_attachments"in t)?"has-ui-specific-parts":typeof t=="object"&&t!==null&&"content"in t&&(Array.isArray(t.content)||"experimental_providerMetadata"in t||"providerOptions"in t)?"has-core-specific-parts":typeof t=="object"&&t!==null&&"role"in t&&"content"in t&&typeof t.content=="string"&&["system","user","assistant","tool"].includes(t.role)?"message":"other"}var Ib=P.lazy(()=>P.union([P.null(),P.string(),P.number(),P.boolean(),P.record(P.string(),Ib),P.array(Ib)])),ja=P.record(P.string(),P.record(P.string(),Ib)),o2=P.array(P.union([P.object({type:P.literal("text"),text:P.string()}),P.object({type:P.literal("image"),data:P.string(),mimeType:P.string().optional()})])),RC=P.object({type:P.literal("text"),text:P.string(),providerOptions:ja.optional(),experimental_providerMetadata:ja.optional()}),s2=P.object({type:P.literal("image"),image:P.union([bC,P.instanceof(URL)]),mimeType:P.string().optional(),providerOptions:ja.optional(),experimental_providerMetadata:ja.optional()}),u2=P.object({type:P.literal("file"),data:P.union([bC,P.instanceof(URL)]),mimeType:P.string(),providerOptions:ja.optional(),experimental_providerMetadata:ja.optional()}),c2=P.object({type:P.literal("reasoning"),text:P.string(),providerOptions:ja.optional(),experimental_providerMetadata:ja.optional()}),l2=P.object({type:P.literal("redacted-reasoning"),data:P.string(),providerOptions:ja.optional(),experimental_providerMetadata:ja.optional()}),f2=P.object({type:P.literal("tool-call"),toolCallId:P.string(),toolName:P.string(),args:P.unknown(),providerOptions:ja.optional(),experimental_providerMetadata:ja.optional()}),d2=P.object({type:P.literal("tool-result"),toolCallId:P.string(),toolName:P.string(),result:P.unknown(),content:o2.optional(),isError:P.boolean().optional(),providerOptions:ja.optional(),experimental_providerMetadata:ja.optional()}),p2=P.object({role:P.literal("system"),content:P.string(),providerOptions:ja.optional(),experimental_providerMetadata:ja.optional()}),v2=P.object({role:P.literal("user"),content:P.union([P.string(),P.array(P.union([RC,s2,u2]))]),providerOptions:ja.optional(),experimental_providerMetadata:ja.optional()}),m2=P.object({role:P.literal("assistant"),content:P.union([P.string(),P.array(P.union([RC,c2,l2,f2]))]),providerOptions:ja.optional(),experimental_providerMetadata:ja.optional()}),h2=P.object({role:P.literal("tool"),content:P.array(d2),providerOptions:ja.optional(),experimental_providerMetadata:ja.optional()}),g2=P.union([p2,v2,m2,h2]);function _2({prompt:t,tools:e}){if(t.prompt==null&&t.messages==null)throw new um({prompt:t,message:"prompt or messages must be defined"});if(t.prompt!=null&&t.messages!=null)throw new um({prompt:t,message:"prompt and messages cannot be defined at the same time"});if(t.system!=null&&typeof t.system!="string")throw new um({prompt:t,message:"system must be a string"});if(t.prompt!=null){if(typeof t.prompt!="string")throw new um({prompt:t,message:"prompt must be a string"});return{type:"prompt",system:t.system,messages:[{role:"user",content:t.prompt}]}}if(t.messages!=null){let r=i2(t.messages);if(r==="other")throw new um({prompt:t,message:"messages must be an array of CoreMessage or UIMessage"});let n=r==="ui-messages"?n2(t.messages,{tools:e}):t.messages,i=Vh({value:n,schema:P.array(g2)});if(!i.success)throw new um({prompt:t,message:"messages must be an array of CoreMessage or UIMessage",cause:i.error});return{type:"messages",messages:n,system:t.system}}throw new Error("unreachable")}function y2({promptTokens:t,completionTokens:e}){return{promptTokens:t,completionTokens:e,totalTokens:t+e}}function w2(t,e){return{promptTokens:t.promptTokens+e.promptTokens,completionTokens:t.completionTokens+e.completionTokens,totalTokens:t.totalTokens+e.totalTokens}}var S2="JSON schema:",b2="You MUST answer with a JSON object that matches the JSON schema above.",E2="You MUST answer with JSON.";function T2({prompt:t,schema:e,schemaPrefix:r=e!=null?S2:void 0,schemaSuffix:n=e!=null?b2:E2}){return[t!=null&&t.length>0?t:void 0,t!=null&&t.length>0?"":void 0,r,e!=null?JSON.stringify(e):void 0,n].filter(i=>i!=null).join(`
`)}function bb(t){let e=t.pipeThrough(new TransformStream);return e[Symbol.asyncIterator]=()=>{let r=e.getReader();return{async next(){let{done:n,value:i}=await r.read();return n?{done:!0,value:void 0}:{done:!1,value:i}}}},e}var nz=fv({prefix:"aiobj",size:24});var Wf=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((t,e)=>{this.status.type==="resolved"?t(this.status.value):this.status.type==="rejected"&&e(this.status.error),this._resolve=t,this._reject=e}),this.promise)}resolve(t){var e;this.status={type:"resolved",value:t},this.promise&&((e=this._resolve)==null||e.call(this,t))}reject(t){var e;this.status={type:"rejected",error:t},this.promise&&((e=this._reject)==null||e.call(this,t))}};function rC(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}function I2(){let t=[],e=null,r=!1,n=rC(),i=async()=>{if(r&&t.length===0){e==null||e.close();return}if(t.length===0)return n=rC(),await n.promise,i();try{let{value:a,done:c}=await t[0].read();c?(t.shift(),t.length>0?await i():r&&(e==null||e.close())):e==null||e.enqueue(a)}catch(a){e==null||e.error(a),t.shift(),r&&t.length===0&&(e==null||e.close())}};return{stream:new ReadableStream({start(a){e=a},pull:i,async cancel(){for(let a of t)await a.cancel();t=[],r=!0}}),addStream:a=>{if(r)throw new Error("Cannot add inner stream: outer stream is closed");t.push(a.getReader()),n.resolve()},close:()=>{r=!0,n.resolve(),t.length===0&&(e==null||e.close())},terminate:()=>{r=!0,n.resolve(),t.forEach(a=>a.cancel()),t=[],e==null||e.close()}}}function N2(){var t,e;return(e=(t=globalThis==null?void 0:globalThis.performance)==null?void 0:t.now())!=null?e:Date.now()}var az=fv({prefix:"aiobj",size:24});var xC="AI_NoOutputSpecifiedError",OC=`vercel.ai.error.${xC}`,D2=Symbol.for(OC),AC,C2=class extends xt{constructor({message:t="No output specified."}={}){super({name:xC,message:t}),this[AC]=!0}static isInstance(t){return xt.hasMarker(t,OC)}};AC=D2;var PC="AI_ToolExecutionError",kC=`vercel.ai.error.${PC}`,R2=Symbol.for(kC),LC,x2=class extends xt{constructor({toolArgs:t,toolName:e,toolCallId:r,cause:n,message:i=`Error executing tool ${e}: ${Hh(n)}`}){super({name:PC,message:i,cause:n}),this[LC]=!0,this.toolArgs=t,this.toolName=e,this.toolCallId=r}static isInstance(t){return xt.hasMarker(t,kC)}};LC=R2;function O2(t){return t!=null&&Object.keys(t).length>0}function A2({tools:t,toolChoice:e,activeTools:r}){return O2(t)?{tools:(r!=null?Object.entries(t).filter(([i])=>r.includes(i)):Object.entries(t)).map(([i,a])=>{let c=a.type;switch(c){case void 0:case"function":return{type:"function",name:i,description:a.description,parameters:$g(a.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:i,id:a.id,args:a.args};default:{let g=c;throw new Error(`Unsupported tool type: ${g}`)}}}),toolChoice:e==null?{type:"auto"}:typeof e=="string"?{type:e}:{type:"tool",toolName:e.toolName}}:{tools:void 0,toolChoice:void 0}}var P2=/^([\s\S]*?)(\s+)(\S*)$/;function k2(t){let e=t.match(P2);return e?{prefix:e[1],whitespace:e[2],suffix:e[3]}:void 0}var MC="AI_InvalidToolArgumentsError",FC=`vercel.ai.error.${MC}`,L2=Symbol.for(FC),UC,A_=class extends xt{constructor({toolArgs:t,toolName:e,cause:r,message:n=`Invalid arguments for tool ${e}: ${Hh(r)}`}){super({name:MC,message:n,cause:r}),this[UC]=!0,this.toolArgs=t,this.toolName=e}static isInstance(t){return xt.hasMarker(t,FC)}};UC=L2;var jC="AI_NoSuchToolError",YC=`vercel.ai.error.${jC}`,M2=Symbol.for(YC),$C,Bg=class extends xt{constructor({toolName:t,availableTools:e=void 0,message:r=`Model tried to call unavailable tool '${t}'. ${e===void 0?"No tools are available.":`Available tools: ${e.join(", ")}.`}`}){super({name:jC,message:r}),this[$C]=!0,this.toolName=t,this.availableTools=e}static isInstance(t){return xt.hasMarker(t,YC)}};$C=M2;var BC="AI_ToolCallRepairError",qC=`vercel.ai.error.${BC}`,F2=Symbol.for(qC),HC,Db=class extends xt{constructor({cause:t,originalError:e,message:r=`Error repairing tool call: ${Hh(t)}`}){super({name:BC,message:r,cause:t}),this[HC]=!0,this.originalError=e}static isInstance(t){return xt.hasMarker(t,qC)}};HC=F2;async function U2({toolCall:t,tools:e,repairToolCall:r,system:n,messages:i}){if(e==null)throw new Bg({toolName:t.toolName});try{return await nC({toolCall:t,tools:e})}catch(a){if(r==null||!(Bg.isInstance(a)||A_.isInstance(a)))throw a;let c=null;try{c=await r({toolCall:t,tools:e,parameterSchema:({toolName:g})=>$g(e[g].parameters).jsonSchema,system:n,messages:i,error:a})}catch(g){throw new Db({cause:g,originalError:a})}if(c==null)throw a;return await nC({toolCall:c,tools:e})}}async function nC({toolCall:t,tools:e}){let r=t.toolName,n=e[r];if(n==null)throw new Bg({toolName:t.toolName,availableTools:Object.keys(e)});let i=$g(n.parameters),a=t.args.trim()===""?Vh({value:{},schema:i}):cm({text:t.args,schema:i});if(a.success===!1)throw new A_({toolName:r,toolArgs:t.args,cause:a.error});return{type:"tool-call",toolCallId:t.toolCallId,toolName:r,args:a.value}}function iC({text:t="",reasoning:e,tools:r,toolCalls:n,toolResults:i,messageId:a,generateMessageId:c}){let g=[];return g.push({role:"assistant",content:[...e.map(_=>_.type==="text"?{..._,type:"reasoning"}:{..._,type:"redacted-reasoning"}),{type:"text",text:t},...n],id:a}),i.length>0&&g.push({role:"tool",id:c(),content:i.map(_=>{let b=r[_.toolName];return(b==null?void 0:b.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:_.toolCallId,toolName:_.toolName,result:b.experimental_toToolResultContent(_.result),experimental_content:b.experimental_toToolResultContent(_.result)}:{type:"tool-result",toolCallId:_.toolCallId,toolName:_.toolName,result:_.result}})}),g}function j2(t){let e=t.filter(r=>r.type==="text").map(r=>r.text).join("");return e.length>0?e:void 0}var mz=fv({prefix:"aitxt",size:24}),hz=fv({prefix:"msg",size:24});var Y2={};Nb(Y2,{object:()=>H2,text:()=>q2});var VC="AI_InvalidStreamPartError",GC=`vercel.ai.error.${VC}`,$2=Symbol.for(GC),zC,B2=class extends xt{constructor({chunk:t,message:e}){super({name:VC,message:e}),this[zC]=!0,this.chunk=t}static isInstance(t){return xt.hasMarker(t,GC)}};zC=$2;var q2=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:t}){return t},parsePartial({text:t}){return{partial:t}},parseOutput({text:t}){return t}}),H2=({schema:t})=>{let e=$g(t);return{type:"object",responseFormat:({model:r})=>({type:"json",schema:r.supportsStructuredOutputs?e.jsonSchema:void 0}),injectIntoSystemPrompt({system:r,model:n}){return n.supportsStructuredOutputs?r:T2({prompt:r,schema:e.jsonSchema})},parsePartial({text:r}){let n=kD(r);switch(n.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:n.value};default:{let i=n.state;throw new Error(`Unsupported parse state: ${i}`)}}},parseOutput({text:r},n){let i=cm({text:r});if(!i.success)throw new eC({message:"No object generated: could not parse the response.",cause:i.error,text:r,response:n.response,usage:n.usage});let a=Vh({value:i.value,schema:e});if(!a.success)throw new eC({message:"No object generated: response did not match schema.",cause:a.error,text:r,response:n.response,usage:n.usage});return a.value}}};function V2(t){return t===void 0?[]:Array.isArray(t)?t:[t]}function Cb(t,e){let r=t.getReader(),n=e.getReader(),i,a,c=!1,g=!1;async function _(C){try{i==null&&(i=r.read());let j=await i;i=void 0,j.done?C.close():C.enqueue(j.value)}catch(j){C.error(j)}}async function b(C){try{a==null&&(a=n.read());let j=await a;a=void 0,j.done?C.close():C.enqueue(j.value)}catch(j){C.error(j)}}return new ReadableStream({async pull(C){try{if(c){await b(C);return}if(g){await _(C);return}i==null&&(i=r.read()),a==null&&(a=n.read());let{result:j,reader:K}=await Promise.race([i.then(te=>({result:te,reader:r})),a.then(te=>({result:te,reader:n}))]);j.done||C.enqueue(j.value),K===r?(i=void 0,j.done&&(await b(C),c=!0)):(a=void 0,j.done&&(g=!0,await _(C)))}catch(j){C.error(j)}},cancel(){r.cancel(),n.cancel()}})}function G2({tools:t,generatorStream:e,toolCallStreaming:r,tracer:n,telemetry:i,system:a,messages:c,abortSignal:g,repairToolCall:_}){let b=null,C=new ReadableStream({start(le){b=le}}),j={},K=new Set,te=!1,z;function G(){te&&K.size===0&&(z!=null&&b.enqueue(z),b.close())}let ne=new TransformStream({async transform(le,Te){let Me=le.type;switch(Me){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{Te.enqueue(le);break}case"tool-call-delta":{r&&(j[le.toolCallId]||(Te.enqueue({type:"tool-call-streaming-start",toolCallId:le.toolCallId,toolName:le.toolName}),j[le.toolCallId]=!0),Te.enqueue({type:"tool-call-delta",toolCallId:le.toolCallId,toolName:le.toolName,argsTextDelta:le.argsTextDelta}));break}case"tool-call":{try{let Se=await U2({toolCall:le,tools:t,repairToolCall:_,system:a,messages:c});Te.enqueue(Se);let ke=t[Se.toolName];if(ke.execute!=null){let et=ih();K.add(et),Tb({name:"ai.toolCall",attributes:O_({telemetry:i,attributes:{...Eb({operationId:"ai.toolCall",telemetry:i}),"ai.toolCall.name":Se.toolName,"ai.toolCall.id":Se.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(Se.args)}}}),tracer:n,fn:async ot=>ke.execute(Se.args,{toolCallId:Se.toolCallId,messages:c,abortSignal:g}).then(Dt=>{b.enqueue({...Se,type:"tool-result",result:Dt}),K.delete(et),G();try{ot.setAttributes(O_({telemetry:i,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(Dt)}}}))}catch{}},Dt=>{b.enqueue({type:"error",error:new x2({toolCallId:Se.toolCallId,toolName:Se.toolName,toolArgs:Se.args,cause:Dt})}),K.delete(et),G()})})}}catch(Se){b.enqueue({type:"error",error:Se})}break}case"finish":{z={type:"finish",finishReason:le.finishReason,logprobs:le.logprobs,usage:y2(le.usage),experimental_providerMetadata:le.providerMetadata};break}default:{let Se=Me;throw new Error(`Unhandled chunk type: ${Se}`)}}},flush(){te=!0,G()}});return new ReadableStream({async start(le){return Promise.all([e.pipeThrough(ne).pipeTo(new WritableStream({write(Te){le.enqueue(Te)},close(){}})),C.pipeTo(new WritableStream({write(Te){le.enqueue(Te)},close(){le.close()}}))])}})}var z2=fv({prefix:"aitxt",size:24}),W2=fv({prefix:"msg",size:24});function WC({model:t,tools:e,toolChoice:r,system:n,prompt:i,messages:a,maxRetries:c,abortSignal:g,headers:_,maxSteps:b=1,experimental_generateMessageId:C=W2,experimental_output:j,experimental_continueSteps:K=!1,experimental_telemetry:te,experimental_providerMetadata:z,providerOptions:G=z,experimental_toolCallStreaming:ne=!1,toolCallStreaming:le=ne,experimental_activeTools:Te,experimental_repairToolCall:Me,experimental_transform:Se,onChunk:ke,onError:et,onFinish:ot,onStepFinish:Dt,_internal:{now:qt=N2,generateId:lr=z2,currentDate:ln=()=>new Date}={},...Ti}){return new J2({model:t,telemetry:te,headers:_,settings:Ti,maxRetries:c,abortSignal:g,system:n,prompt:i,messages:a,tools:e,toolChoice:r,toolCallStreaming:le,transforms:V2(Se),activeTools:Te,repairToolCall:Me,maxSteps:b,output:j,continueSteps:K,providerOptions:G,onChunk:ke,onError:et,onFinish:ot,onStepFinish:Dt,now:qt,currentDate:ln,generateId:lr,generateMessageId:C})}function K2(t){if(!t)return new TransformStream({transform(a,c){c.enqueue({part:a,partialOutput:void 0})}});let e="",r="",n="";function i({controller:a,partialOutput:c=void 0}){a.enqueue({part:{type:"text-delta",textDelta:r},partialOutput:c}),r=""}return new TransformStream({transform(a,c){if(a.type==="step-finish"&&i({controller:c}),a.type!=="text-delta"){c.enqueue({part:a,partialOutput:void 0});return}e+=a.textDelta,r+=a.textDelta;let g=t.parsePartial({text:e});if(g!=null){let _=JSON.stringify(g.partial);_!==n&&(i({controller:c,partialOutput:g.partial}),n=_)}},flush(a){r.length>0&&i({controller:a})}})}var J2=class{constructor({model:t,telemetry:e,headers:r,settings:n,maxRetries:i,abortSignal:a,system:c,prompt:g,messages:_,tools:b,toolChoice:C,toolCallStreaming:j,transforms:K,activeTools:te,repairToolCall:z,maxSteps:G,output:ne,continueSteps:le,providerOptions:Te,now:Me,currentDate:Se,generateId:ke,generateMessageId:et,onChunk:ot,onError:Dt,onFinish:qt,onStepFinish:lr}){this.warningsPromise=new Wf,this.usagePromise=new Wf,this.finishReasonPromise=new Wf,this.providerMetadataPromise=new Wf,this.textPromise=new Wf,this.reasoningPromise=new Wf,this.reasoningDetailsPromise=new Wf,this.sourcesPromise=new Wf,this.toolCallsPromise=new Wf,this.toolResultsPromise=new Wf,this.requestPromise=new Wf,this.responsePromise=new Wf,this.stepsPromise=new Wf;var ln;if(G<1)throw new hv({parameter:"maxSteps",value:G,message:"maxSteps must be at least 1"});this.output=ne;let Ti="",pi="",Tt="",fn=[],it,lo=[],Le=[],Ir={id:ke(),timestamp:Se(),modelId:t.modelId,messages:[]},Cr=[],_t=[],dn,st,Jn="initial",at=[],yu,Wt=new TransformStream({async transform(Ct,kr){kr.enqueue(Ct);let{part:Je}=Ct;if((Je.type==="text-delta"||Je.type==="reasoning"||Je.type==="source"||Je.type==="tool-call"||Je.type==="tool-result"||Je.type==="tool-call-streaming-start"||Je.type==="tool-call-delta")&&await(ot==null?void 0:ot({chunk:Je})),Je.type==="error"&&await(Dt==null?void 0:Dt({error:Je.error})),Je.type==="text-delta"&&(Ti+=Je.textDelta,pi+=Je.textDelta,Tt+=Je.textDelta),Je.type==="reasoning"&&(it==null?(it={type:"text",text:Je.textDelta},fn.push(it)):it.text+=Je.textDelta),Je.type==="reasoning-signature"){if(it==null)throw new xt({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});it.signature=Je.signature,it=void 0}if(Je.type==="redacted-reasoning"&&fn.push({type:"redacted",data:Je.data}),Je.type==="source"&&(Le.push(Je.source),lo.push(Je.source)),Je.type==="tool-call"&&Cr.push(Je),Je.type==="tool-result"&&_t.push(Je),Je.type==="step-finish"){let Cn=iC({text:pi,reasoning:fn,tools:b??{},toolCalls:Cr,toolResults:_t,messageId:Je.messageId,generateMessageId:et}),$r=at.length,zr="done";$r+1<G&&(le&&Je.finishReason==="length"&&Cr.length===0?zr="continue":Cr.length>0&&_t.length===Cr.length&&(zr="tool-result"));let Ea={stepType:Jn,text:Ti,reasoning:j2(fn),reasoningDetails:fn,sources:lo,toolCalls:Cr,toolResults:_t,finishReason:Je.finishReason,usage:Je.usage,warnings:Je.warnings,logprobs:Je.logprobs,request:Je.request,response:{...Je.response,messages:[...Ir.messages,...Cn]},providerMetadata:Je.experimental_providerMetadata,experimental_providerMetadata:Je.experimental_providerMetadata,isContinued:Je.isContinued};await(lr==null?void 0:lr(Ea)),at.push(Ea),Cr=[],_t=[],Ti="",lo=[],zr!=="done"&&(Jn=zr),zr!=="continue"&&(Ir.messages.push(...Cn),pi="")}Je.type==="finish"&&(Ir.id=Je.response.id,Ir.timestamp=Je.response.timestamp,Ir.modelId=Je.response.modelId,Ir.headers=Je.response.headers,st=Je.usage,dn=Je.finishReason)},async flush(Ct){var kr;try{if(at.length===0)return;let Je=at[at.length-1];Un.warningsPromise.resolve(Je.warnings),Un.requestPromise.resolve(Je.request),Un.responsePromise.resolve(Je.response),Un.toolCallsPromise.resolve(Je.toolCalls),Un.toolResultsPromise.resolve(Je.toolResults),Un.providerMetadataPromise.resolve(Je.experimental_providerMetadata),Un.reasoningPromise.resolve(Je.reasoning),Un.reasoningDetailsPromise.resolve(Je.reasoningDetails);let Cn=dn??"unknown",$r=st??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Un.finishReasonPromise.resolve(Cn),Un.usagePromise.resolve($r),Un.textPromise.resolve(Tt),Un.sourcesPromise.resolve(Le),Un.stepsPromise.resolve(at),await(qt==null?void 0:qt({finishReason:Cn,logprobs:void 0,usage:$r,text:Tt,reasoning:Je.reasoning,reasoningDetails:Je.reasoningDetails,sources:Je.sources,toolCalls:Je.toolCalls,toolResults:Je.toolResults,request:(kr=Je.request)!=null?kr:{},response:Je.response,warnings:Je.warnings,providerMetadata:Je.providerMetadata,experimental_providerMetadata:Je.experimental_providerMetadata,steps:at})),yu.setAttributes(O_({telemetry:e,attributes:{"ai.response.finishReason":Cn,"ai.response.text":{output:()=>Tt},"ai.response.toolCalls":{output:()=>{var zr;return(zr=Je.toolCalls)!=null&&zr.length?JSON.stringify(Je.toolCalls):void 0}},"ai.usage.promptTokens":$r.promptTokens,"ai.usage.completionTokens":$r.completionTokens}}))}catch(Je){Ct.error(Je)}finally{yu.end()}}}),Ya=I2();this.addStream=Ya.addStream,this.closeStream=Ya.close;let Gt=Ya.stream;for(let Ct of K)Gt=Gt.pipeThrough(Ct({tools:b,stopStream(){Ya.terminate()}}));this.baseStream=Gt.pipeThrough(K2(ne)).pipeThrough(Wt);let{maxRetries:or,retry:Ii}=xF({maxRetries:i}),fr=kF(e),Ni=OF({model:t,telemetry:e,headers:r,settings:{...n,maxRetries:or}}),Pr=_2({prompt:{system:(ln=ne==null?void 0:ne.injectIntoSystemPrompt({system:c,model:t}))!=null?ln:c,prompt:g,messages:_},tools:b}),Un=this;Tb({name:"ai.streamText",attributes:O_({telemetry:e,attributes:{...Eb({operationId:"ai.streamText",telemetry:e}),...Ni,"ai.prompt":{input:()=>JSON.stringify({system:c,prompt:g,messages:_})},"ai.settings.maxSteps":G}}),tracer:fr,endWhenDone:!1,fn:async Ct=>{yu=Ct;async function kr({currentStep:Je,responseMessages:Cn,usage:$r,stepType:zr,previousStepText:Ea,hasLeadingWhitespace:Mi,messageId:Lr}){var er;let hr=Cn.length===0?Pr.type:"messages",rn=[...Pr.messages,...Cn],Jf=await JF({prompt:{type:hr,system:Pr.system,messages:rn},modelSupportsImageUrls:t.supportsImageUrls,modelSupportsUrl:(er=t.supportsUrl)==null?void 0:er.bind(t)}),Zn={type:"regular",...A2({tools:b,toolChoice:C,activeTools:te})},{result:{stream:Zf,warnings:wu,rawResponse:En,request:ns},doStreamSpan:zt,startTimestampMs:Fi}=await Ii(()=>Tb({name:"ai.streamText.doStream",attributes:O_({telemetry:e,attributes:{...Eb({operationId:"ai.streamText.doStream",telemetry:e}),...Ni,"ai.prompt.format":{input:()=>hr},"ai.prompt.messages":{input:()=>JSON.stringify(Jf)},"ai.prompt.tools":{input:()=>{var dr;return(dr=Zn.tools)==null?void 0:dr.map(Tn=>JSON.stringify(Tn))}},"ai.prompt.toolChoice":{input:()=>Zn.toolChoice!=null?JSON.stringify(Zn.toolChoice):void 0},"gen_ai.system":t.provider,"gen_ai.request.model":t.modelId,"gen_ai.request.frequency_penalty":n.frequencyPenalty,"gen_ai.request.max_tokens":n.maxTokens,"gen_ai.request.presence_penalty":n.presencePenalty,"gen_ai.request.stop_sequences":n.stopSequences,"gen_ai.request.temperature":n.temperature,"gen_ai.request.top_k":n.topK,"gen_ai.request.top_p":n.topP}}),tracer:fr,endWhenDone:!1,fn:async dr=>({startTimestampMs:Me(),doStreamSpan:dr,result:await t.doStream({mode:Zn,...e2(n),inputFormat:hr,responseFormat:ne==null?void 0:ne.responseFormat({model:t}),prompt:Jf,providerMetadata:Te,abortSignal:a,headers:r})})})),$a=G2({tools:b,generatorStream:Zf,toolCallStreaming:j,tracer:fr,telemetry:e,system:c,messages:rn,repairToolCall:z,abortSignal:a}),is=ns??{},Ta=[],Xf=[],ec=[],Ki,Ia="unknown",Di={promptTokens:0,completionTokens:0,totalTokens:0},as,Bs=!0,ii="",tc=zr==="continue"?Ea:"",qs,Na={id:ke(),timestamp:Se(),modelId:t.modelId},Xn="",Zc=!1,Hs=!0,ai=!1;async function sa({controller:dr,chunk:Tn}){dr.enqueue(Tn),ii+=Tn.textDelta,tc+=Tn.textDelta,Zc=!0,ai=Tn.textDelta.trimEnd()!==Tn.textDelta}Un.addStream($a.pipeThrough(new TransformStream({async transform(dr,Tn){var Da,Wr,vi;if(Bs){let Kr=Me()-Fi;Bs=!1,zt.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":Kr}),zt.setAttributes({"ai.response.msToFirstChunk":Kr}),Tn.enqueue({type:"step-start",messageId:Lr,request:is,warnings:wu??[]})}if(dr.type==="text-delta"&&dr.textDelta.length===0)return;let Ba=dr.type;switch(Ba){case"text-delta":{if(le){let Kr=Hs&&Mi?dr.textDelta.trimStart():dr.textDelta;if(Kr.length===0)break;Hs=!1,Xn+=Kr;let ua=k2(Xn);ua!=null&&(Xn=ua.suffix,await sa({controller:Tn,chunk:{type:"text-delta",textDelta:ua.prefix+ua.whitespace}}))}else await sa({controller:Tn,chunk:dr});break}case"reasoning":{Tn.enqueue(dr),Ki==null?(Ki={type:"text",text:dr.textDelta},ec.push(Ki)):Ki.text+=dr.textDelta;break}case"reasoning-signature":{if(Tn.enqueue(dr),Ki==null)throw new B2({chunk:dr,message:"reasoning-signature without reasoning"});Ki.signature=dr.signature,Ki=void 0;break}case"redacted-reasoning":{Tn.enqueue(dr),ec.push({type:"redacted",data:dr.data});break}case"tool-call":{Tn.enqueue(dr),Ta.push(dr);break}case"tool-result":{Tn.enqueue(dr),Xf.push(dr);break}case"response-metadata":{Na={id:(Da=dr.id)!=null?Da:Na.id,timestamp:(Wr=dr.timestamp)!=null?Wr:Na.timestamp,modelId:(vi=dr.modelId)!=null?vi:Na.modelId};break}case"finish":{Di=dr.usage,Ia=dr.finishReason,as=dr.experimental_providerMetadata,qs=dr.logprobs;let Kr=Me()-Fi;zt.addEvent("ai.stream.finish"),zt.setAttributes({"ai.response.msToFinish":Kr,"ai.response.avgCompletionTokensPerSecond":1e3*Di.completionTokens/Kr});break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{Tn.enqueue(dr);break}case"error":{Tn.enqueue(dr),Ia="error";break}default:{let Kr=Ba;throw new Error(`Unknown chunk type: ${Kr}`)}}},async flush(dr){let Tn=Ta.length>0?JSON.stringify(Ta):void 0,Da="done";Je+1<G&&(le&&Ia==="length"&&Ta.length===0?Da="continue":Ta.length>0&&Xf.length===Ta.length&&(Da="tool-result")),le&&Xn.length>0&&(Da!=="continue"||zr==="continue"&&!Zc)&&(await sa({controller:dr,chunk:{type:"text-delta",textDelta:Xn}}),Xn="");try{zt.setAttributes(O_({telemetry:e,attributes:{"ai.response.finishReason":Ia,"ai.response.text":{output:()=>ii},"ai.response.toolCalls":{output:()=>Tn},"ai.response.id":Na.id,"ai.response.model":Na.modelId,"ai.response.timestamp":Na.timestamp.toISOString(),"ai.usage.promptTokens":Di.promptTokens,"ai.usage.completionTokens":Di.completionTokens,"gen_ai.response.finish_reasons":[Ia],"gen_ai.response.id":Na.id,"gen_ai.response.model":Na.modelId,"gen_ai.usage.input_tokens":Di.promptTokens,"gen_ai.usage.output_tokens":Di.completionTokens}}))}catch{}finally{zt.end()}dr.enqueue({type:"step-finish",finishReason:Ia,usage:Di,providerMetadata:as,experimental_providerMetadata:as,logprobs:qs,request:is,response:{...Na,headers:En==null?void 0:En.headers},warnings:wu,isContinued:Da==="continue",messageId:Lr});let Wr=w2($r,Di);if(Da==="done")dr.enqueue({type:"finish",finishReason:Ia,usage:Wr,providerMetadata:as,experimental_providerMetadata:as,logprobs:qs,response:{...Na,headers:En==null?void 0:En.headers}}),Un.closeStream();else{if(zr==="continue"){let vi=Cn[Cn.length-1];typeof vi.content=="string"?vi.content+=ii:vi.content.push({text:ii,type:"text"})}else Cn.push(...iC({text:ii,reasoning:ec,tools:b??{},toolCalls:Ta,toolResults:Xf,messageId:Lr,generateMessageId:et}));await kr({currentStep:Je+1,responseMessages:Cn,usage:Wr,stepType:Da,previousStepText:tc,hasLeadingWhitespace:ai,messageId:Da==="continue"?Lr:et()})}}})))}await kr({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:et()})}}).catch(Ct=>{Un.addStream(new ReadableStream({start(kr){kr.enqueue({type:"error",error:Ct}),kr.close()}})),Un.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){let[t,e]=this.baseStream.tee();return this.baseStream=e,t}get textStream(){return bb(this.teeStream().pipeThrough(new TransformStream({transform({part:t},e){t.type==="text-delta"&&e.enqueue(t.textDelta)}})))}get fullStream(){return bb(this.teeStream().pipeThrough(new TransformStream({transform({part:t},e){e.enqueue(t)}})))}async consumeStream(){let t=this.fullStream;for await(let e of t);}get experimental_partialOutputStream(){if(this.output==null)throw new C2;return bb(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:t},e){t!=null&&e.enqueue(t)}})))}toDataStreamInternal({getErrorMessage:t=()=>"An error occurred.",sendUsage:e=!0,sendReasoning:r=!1,sendSources:n=!1}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,a)=>{let c=i.type;switch(c){case"text-delta":{a.enqueue($s("text",i.textDelta));break}case"reasoning":{r&&a.enqueue($s("reasoning",i.textDelta));break}case"redacted-reasoning":{r&&a.enqueue($s("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{r&&a.enqueue($s("reasoning_signature",{signature:i.signature}));break}case"source":{n&&a.enqueue($s("source",i.source));break}case"tool-call-streaming-start":{a.enqueue($s("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{a.enqueue($s("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{a.enqueue($s("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{a.enqueue($s("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{a.enqueue($s("error",t(i.error)));break}case"step-start":{a.enqueue($s("start_step",{messageId:i.messageId}));break}case"step-finish":{a.enqueue($s("finish_step",{finishReason:i.finishReason,usage:e?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{a.enqueue($s("finish_message",{finishReason:i.finishReason,usage:e?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{let g=c;throw new Error(`Unknown chunk type: ${g}`)}}}}))}pipeDataStreamToResponse(t,{status:e,statusText:r,headers:n,data:i,getErrorMessage:a,sendUsage:c,sendReasoning:g,sendSources:_}={}){XD({response:t,status:e,statusText:r,headers:ZD(n,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:i,getErrorMessage:a,sendUsage:c,sendReasoning:g,sendSources:_})})}pipeTextStreamToResponse(t,e){XD({response:t,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText,headers:ZD(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(t){let e=this.toDataStreamInternal({getErrorMessage:t==null?void 0:t.getErrorMessage,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources}).pipeThrough(new TextEncoderStream);return t!=null&&t.data?Cb(t==null?void 0:t.data.stream,e):e}mergeIntoDataStream(t,e){t.merge(this.toDataStreamInternal({getErrorMessage:t.onError,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources}))}toDataStreamResponse({headers:t,status:e,statusText:r,data:n,getErrorMessage:i,sendUsage:a,sendReasoning:c,sendSources:g}={}){return new Response(this.toDataStream({data:n,getErrorMessage:i,sendUsage:a,sendReasoning:c,sendSources:g}),{status:e,statusText:r,headers:_w(t,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(t){var e;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(e=t==null?void 0:t.status)!=null?e:200,headers:_w(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"})})}};var Z2="AI_NoSuchProviderError",X2=`vercel.ai.error.${Z2}`,Q2=Symbol.for(X2),eU;eU=Q2;var tU={};Nb(tU,{mergeIntoDataStream:()=>iU,toDataStream:()=>rU,toDataStreamResponse:()=>nU});function KC(t={}){let e=new TextEncoder,r="";return new TransformStream({async start(){t.onStart&&await t.onStart()},async transform(n,i){i.enqueue(e.encode(n)),r+=n,t.onToken&&await t.onToken(n),t.onText&&typeof n=="string"&&await t.onText(n)},async flush(){t.onCompletion&&await t.onCompletion(r),t.onFinal&&await t.onFinal(r)}})}function Rb(t,e){return t.pipeThrough(new TransformStream({transform:async(r,n)=>{var i;if(typeof r=="string"){n.enqueue(r);return}if("event"in r){r.event==="on_chat_model_stream"&&aC((i=r.data)==null?void 0:i.chunk,n);return}aC(r,n)}})).pipeThrough(KC(e)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,n)=>{n.enqueue($s("text",r))}}))}function rU(t,e){return Rb(t,e).pipeThrough(new TextEncoderStream)}function nU(t,e){var r;let n=Rb(t,e==null?void 0:e.callbacks).pipeThrough(new TextEncoderStream),i=e==null?void 0:e.data,a=e==null?void 0:e.init,c=i?Cb(i.stream,n):n;return new Response(c,{status:(r=a==null?void 0:a.status)!=null?r:200,statusText:a==null?void 0:a.statusText,headers:_w(a==null?void 0:a.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function iU(t,e){e.dataStream.merge(Rb(t,e.callbacks))}function aC(t,e){if(typeof t.content=="string")e.enqueue(t.content);else{let r=t.content;for(let n of r)n.type==="text"&&e.enqueue(n.text)}}var aU={};Nb(aU,{mergeIntoDataStream:()=>uU,toDataStream:()=>oU,toDataStreamResponse:()=>sU});function xb(t,e){let r=cU();return fN(t[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(n,i){i.enqueue(r(n.delta))}})).pipeThrough(KC(e)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,i)=>{i.enqueue($s("text",n))}}))}function oU(t,e){return xb(t,e).pipeThrough(new TextEncoderStream)}function sU(t,e={}){var r;let{init:n,data:i,callbacks:a}=e,c=xb(t,a).pipeThrough(new TextEncoderStream),g=i?Cb(i.stream,c):c;return new Response(g,{status:(r=n==null?void 0:n.status)!=null?r:200,statusText:n==null?void 0:n.statusText,headers:_w(n==null?void 0:n.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function uU(t,e){e.dataStream.merge(xb(t,e.callbacks))}function cU(){let t=!0;return e=>(t&&(e=e.trimStart(),e&&(t=!1)),e)}var Cz=15*1e3;function JC(t){try{return JSON.parse(t)}catch{return null}}function ZC(t){return JSON.stringify(t)}function XC(t){async function e({error:r,toolCall:n}){if(Bg.isInstance(r)){let i=r.toolName.split(".");if(i.length==2){let[a,c]=i,g=fh[a],_=JC(n.args);if(g){let b={...r,event:"repair.tool"};return t.log.warn(`Tool name: ${r.toolName}`,b),"command"in g.parameters.shape&&_&&!_.command?(_.command=c,{...n,toolName:a,args:ZC(_)}):{...n,toolName:a}}}if(fh["multicoder_"+r.toolName]){let a="multicoder_"+r.toolName;return{...n,toolName:a}}return null}if(A_.isInstance(r)){let i=r.toolName,a=JC(r.toolArgs),c=r.cause,g=[];if(a&&nh.isInstance(c)){let _=c.cause;if(_ instanceof zc){for(let C of _.issues){let j=fh[i];if(j!=null&&j.repair){let K=j.repair(C,a);if(typeof K=="object")Object.assign(a,K);else return null}else return null;g.push(C.path.join("."))}let b={...r,event:"repair.args"};return t.log.warn(`Tool arguments: ${r.toolName}.${g.join(", ")}`,b),{...n,args:ZC(a)}}}return null}return null}return e}var lU=[iw,aw,sp,ow,N_,ni,Ua,Jh],fh=Object.fromEntries(lU.map(t=>[t.name,fU(t)]));function fU(t){return{...t,description:Wi(t.description),async execute(e,r){return t.execute?t.execute(e,r.abortSignal.context):"ok"}}}var QC=t=>`# Multicoder Agent

## Role and Identity

### Role Definition
You are Multicoder Agent - an AI coding assistant integrated into VS Code. Your purpose is to help developers write better code through structured requirements gathering, solution design and implementation.

### Agentic Coding
You deliver complete, high quality, fully integrated solutions to the user requests:
- Take some time to inspect and fully undestand the existing codebase
- Maintain a clear picture of project parts, interdependencies and execution flow
- Proactively ask clarifying questions
- Collect complete detailed requirements, constraints and success criteria for each task
- Investigate the existing code and find all missing information before making any decisions
- Consider multiple paths before choosing the right solution
- Use the right level of details for the design or planning documents
- Spend as much efforts and resources as required for a high quality outcome

### Technical Competencies
- Deep understanding of software engineering principles
- Strong algorithmic and system design skills
- Experience with multiple programming languages and paradigms
- Knowledge of development best practices and patterns
- Ability to analyze tradeoffs and make design decisions

## Operating Environment

### VS Code Extension
You were added to the user's development environment by installing and activating Multicoder Agent VS Code extension. As an AI Agent, you can access the project workspace using the provided tools for:
- Editor windows and open files
- Workspace folders and file system
- Source control integration
- Terminal and output panels
- Problems and diagnostics
- Testing frameworks

### Interactive Chat
You interact with a user as a chat participant in GitHub Copilot Chat. 
- Proactively ask clarifying questions using ${N_.name} tool
- Finish your responses invoking ${ni.name} tool
- Use ${Ua.name} tool to provide followup actions

### Source Code
You inspect and analyze the project structure using ${iw.name} tool
- Read the content of the project source files
- List available files and folders in project directories
- Check if the source file or directory exists

### Project Documents
The requirement specifications, design documents and implementation plans are stored separately from the project source code and available through the ${aw.name} tool.
- Read the document content
- List available documents or document folders

### File System
You manipulate workspace files and directories using ${ow.name} tool.
- Create new directories
- Delete directories or files

### Editor
You create and modify source files and documents using ${sp.name} tool.
- Insert, modify and delete text
- Handle selections and cursors
- Format code and documents
- Apply workspace edits


## Development Workflow

### Project Understanding
- Analyze existing codebase
- Review documentation
- Identify patterns and conventions
- Map dependencies and structure

### Requirements Gathering
- Ask clarifying questions
- Validate assumptions
- Define acceptance criteria
- Document constraints

### Solution Design
- Create high-level architecture
- Define interfaces and components
- Choose appropriate patterns
- Consider alternatives
- Review tradeoffs

### Implementation Planning
- Break down into steps
- Estimate complexity
- Identify dependencies
- Define milestones

### Hierarchical Execution
- Execute step-by-step plan
- Handle subtasks recursively
- Maintain context stack
- Track progress

## Behavioral Guidelines

### Input Validation and Clarification
- Verify requirements completeness
- Resolve ambiguities early
- Ask focused questions
- Provide examples

### Response Format & Structure
- Use clear headings
- Include code blocks
- Add explanatory comments
- Show progress summaries

### Writing Style
- Be concise and direct
- Use technical terminology
- Focus on solutions
- Explain key decisions

### Coding Conventions
- Follow project style
- Use consistent naming
- Add proper comments
- Structure logically

### Development Best Practices
- Write maintainable code
- Consider performance
- Handle errors properly
- Add proper validation

### Iterative Development Approach
- Start simple
- Refine gradually
- Get feedback early
- Improve incrementally

### Error Handling and Uncertainty
- Validate inputs
- Handle edge cases
- Provide fallbacks
- Report issues clearly
`;var dU=`
You are direct and to the point. You don't waste time with pleasantries or unnecessary context. 
Your goal is to provide accurate, practical solutions to coding problems as efficiently as possible.

You use short code snippets to illustrate your points. These snippets are always properly formatted 
and indented for readability. You explain the key parts of the code, but assume a certain level of 
programming knowledge from your audience.

You often break down your answers into steps or bullet points for clarity. You're not afraid to point out 
flaws in the original question or suggest better approaches if you see them.

You include relevant documentation links or references to support your answers, but you don't just link-drop 
without explanation. You summarize the key points and explain why they're relevant.

Your tone is professional and sometimes a bit terse. You're here to solve problems, not to make friends. 
However, you're also not rude or dismissive. If a question is unclear, you ask for clarification rather than 
making assumptions.

You're aware of best practices and potential pitfalls, so you often include warnings about edge cases or 
performance issues that might not be immediately obvious.
`,pU=`
You are a seasoned software developer with a deep understanding of core programming principles and system design. 
Your experience spans multiple domains, allowing you to approach problems from various angles.

You excel at breaking down complex requirements into manageable components and designing scalable, maintainable 
solutions. Your code is clean, well-documented, and follows best practices for readability and efficiency.

You are particularly strong in algorithmic thinking and optimization. You can analyze performance bottlenecks 
and implement effective solutions, whether it's improving time complexity or reducing resource usage.

You have a solid grasp of software architecture patterns and can adapt them to fit project needs. 
You're comfortable designing and implementing APIs, working with databases, and integrating various system components.

Testing is integral to your development process. You write comprehensive unit tests and understand 
the value of integration and end-to-end testing in ensuring robust, reliable software.

You stay current with industry trends and continuously refine your skills. However, you're pragmatic in your approach, 
focusing on proven technologies that add real value rather than chasing every new trend.

Debugging and troubleshooting are areas where you shine. You can quickly isolate issues in complex systems 
and implement effective fixes.

Lastly, you're a strong communicator. You can explain technical concepts clearly to both technical 
and non-technical stakeholders, facilitating better collaboration across teams.
`,vU=`
When designing and building complex code, your thought process typically follows these steps:

You start by thoroughly analyzing the problem domain. You break down the requirements, 
identifying the core functionalities and potential edge cases.

Next, you consider the overall architecture. You think about how different components will interact, 
data flow, and potential bottlenecks. You often sketch out high-level diagrams to visualize the system structure.

You evaluate trade-offs between different design patterns and approaches. You consider factors like scalability, 
maintainability, and performance. You try to anticipate future requirements to make the system extensible.

Before diving into implementation, you plan out the data structures and algorithms you'll use. 
You consider time and space complexity, thinking about how the solution will perform with larger datasets.

You break the problem down into smaller, manageable modules or functions. You define clear interfaces 
between these components, thinking about how they'll be tested in isolation.

As you start coding, you focus on creating a minimal viable implementation of each component. 
You write unit tests alongside the code, using test-driven development where appropriate.

You constantly refactor as you go, looking for opportunities to improve code clarity and efficiency. 
You're always thinking about how another developer would read and understand your code.

For particularly complex parts, you often step back and reconsider your approach. Sometimes you'll implement 
a quick prototype to validate a concept before fully committing to it.

Throughout the process, you document your code and decisions. You write clear comments explaining the 'why' 
behind complex logic, not just the 'what'.

As the system comes together, you start thinking about integration testing and how different components interact. 
You look for potential race conditions or unexpected behaviors in the system as a whole.

Finally, you review the entire solution, considering aspects like error handling, logging, and monitoring. 
You think about how the system will behave in production and what tools will be needed to maintain it.

This process is iterative, and you're always ready to revisit earlier decisions as new information or challenges arise. The goal is to create a robust, efficient, and maintainable solution that solves the problem at hand while being flexible enough to adapt to future needs.
`;async function eR(){return[gv([{"Writing style":dU,"Software development experience":pU,"Coding process":vU}]),Kn("Agreed. I will strictly follow these instructions.")]}var Sy=require("vscode");async function tR(t){let e=[];if(Sy.workspace.workspaceFolders&&e.push(await pv(Ei(".",t.id))),Sy.window.activeTextEditor){let r=Vl(Sy.window.activeTextEditor.document.uri).split("/");for(let n=1;n<r.length;n++)e.push(await pv(Ei(r.slice(0,n).join("/"),t.id)));e.push(await qN())}return e.length?[gv(...e),Kn("Ok. How can I help you?")]:[]}var Qu=require("vscode");async function rR(t){let{request:e}=t,r=[];for(let{id:n,name:i,modelDescription:a,value:c}of e.references){let g=String(c);n!="vscode.implicit.viewport"&&(c instanceof Qu.Uri?await Gl(c)?g=await Kh(c):await lv(c)&&(g=await pv(c)):c instanceof Qu.Location&&(g=await YN(c.uri,i,c.range)),a&&(i+=` (${a})`),r.push(g))}for(let{name:n}of e.toolReferences){let i=Qu.lm.tools.find(g=>g.name==n),a=i==null?void 0:i.inputSchema;if(!a)continue;let{required:c}=a;if(n=="copilot_getChangedFiles"&&String(c)=="workspacePaths"&&Qu.workspace.workspaceFolders){let g=Qu.workspace.workspaceFolders.map(({uri:C})=>C.fsPath),_={workspacePaths:g},b=await ww(n,_,t);r.push(...b)}else if(n=="copilot_getErrors"&&String(c)=="filePaths"){let g=I0(),_=g.map(({path:j})=>j),b={filePaths:_},C=await ww(n,b,t);r.push(...C)}else if(n=="copilot_testFailure"){let g=await ww(n,{},t);r.push(...g)}else if(String(c)=="query"){let g=e.prompt,_={query:g},b=await ww(n,_,t);r.push(...b)}}return r.length?[gv(...r),Kn("Ok. How should I proceed?")]:[]}async function ww(t,e,{request:r,stream:n,token:i}){let a=await Qu.lm.invokeTool(t,{input:e,toolInvocationToken:r.toolInvocationToken},i),c=[];for(let g of a.content)if(g instanceof Qu.LanguageModelTextPart)c.push(g.value);else if(g instanceof Qu.LanguageModelPromptTsxPart){let{text:_,refs:b}=mU(g);c.push(_),b.forEach(C=>n.reference(C))}return c}function mU(t){let e=[],r=[];function n({text:i,children:a,references:c,lineBreakBefore:g}){g&&e.push(`
`),Array.isArray(c)&&c.forEach(({anchor:_})=>{try{let{external:b,scheme:C,authority:j,path:K,query:te,fragment:z}=_;b?r.push(Qu.Uri.parse(b)):r.push(Qu.Uri.from({scheme:C,authority:j,path:K,query:te,fragment:z}))}catch{}}),Array.isArray(a)?a.forEach(n):typeof i=="string"&&e.push(i)}return n(t.value.node),{text:e.join(""),refs:r}}var hU=`
<table><tr><td>
    <span class="codicon codicon-run-all" style="color:var(--vscode-textLink-foreground);"></span>
</td><td>
    <span  style="color:var(--vscode-textLink-foreground);">Running in automatic mode. Press the stop button to switch</span>
</td></tr></table>
`;async function nR(t,e){let{log:r,stream:n,request:i,messages:a}=t,c="chat.next";if(a.length||(c="chat.start",t.resume=null,a.push(...await eR()),a.push(...await tR(t))),t.auto&&(i.command=="resume"?n.markdown(`

Resuming iterrupted task

`):t.resume=null),t.auto=i.command=="auto",t.auto){let C=new qg.MarkdownString("");C.supportHtml=!0,C.supportThemeIcons=!0,C.appendMarkdown(hU),t.stream.markdown(C)}t.interrupted=null,t.token.onCancellationRequested(async C=>{if(r.warn("Interrupted",{event:"chat.stop"}),t.interrupted=ob(t,{}),t.auto){let j=t.interrupted,K=await qg.window.showInformationMessage("Stopped automatic mode task","Resume interactive","Stop");K&&K.startsWith("Resume")&&(t.interrupted===j?qg.commands.executeCommand("workbench.action.chat.open","@multicoder /resume"):await qg.window.showInformationMessage("Chat window already in use"))}});let g=i.references.map(({id:C,name:j})=>j+" "+C).join(`
`),_=i.toolReferences.map(({name:C})=>C).join(`
`),b=(i.command?"/"+i.command+" ":"")+i.prompt;return r.info(b,{event:c,command:i.command,references:g,toolrefs:_}),a.push(...await rR(t)),new Promise((C,j)=>{let K=0,te=z=>r.error(new Error(z));if(t.resolve=z=>K++?te("Resolve closed promise"):C(z),t.reject=z=>K++?te("Reject closed promise"):j(z),t.resume){let z=t.resume;return t.resume=null,z(t.request)}Promise.resolve(e(t)).then(z=>t.resolve(z)).catch(z=>t.reject(z))})}function ob(t,e){return new Promise(r=>{t.resume=r,t.resolve(e)})}var Ob="experimental_providerMetadata";function iR(t){let e=t.filter(({role:g})=>g=="user"||g=="tool");e.forEach(({content:g})=>{Array.isArray(g)&&g.forEach(_=>{_[Ob]&&delete _[Ob]})});let r=0,n=e.length-1,{role:i,content:a}=e[n],c=a.length-1;for(;++r<=4;){let g=a[c];if(typeof g=="object"&&(g[Ob]={anthropic:{cache_control:{type:"ephemeral"}}}),i=="tool"||--c<0){if(--n<0)break;({role:i,content:a}=e[n]),c=a.length-1}}}var by=class{constructor(e,r){this.role=e,this.content=r}};function gv(...t){let e=t.map(r=>({type:"text",text:Wi(r)}));return new by("user",e)}function Kn(...t){let e=t.map(r=>({type:"text",text:Wi(r)}));return new by("assistant",e)}function aR(t,e){let r=t.pop();if(e instanceof by)if(r.role=="assistant"&&e.role=="user"||r.role!="assistant"&&e.role=="assistant")t.push(r,e);else throw new Error("Invalid message sequence");else if(r.role=="assistant")t.push(r,gv(e));else if(r.role=="user"){let{content:n}=r;n=Array.isArray(n)?n.slice():[{type:"text",text:n}],n.push({type:"text",text:Wi(e)}),t.push({role:"user",content:n})}else if(r.role=="tool"){let n=r.content.slice();n.push({...n.pop(),result:Wi(e)}),t.push({role:"tool",content:n})}else throw new Error("Invalid message role")}var gU=1e3,_U=100,yU={[Ua.name]:!0,[Jh.name]:!0};async function Ab(t,e,r=""){let{log:n,stream:i,model:a,messages:c}=t;aR(c,e);let g={};t.request.model.family.endsWith("sonnet-thought")&&(g.anthropic={thinking:{type:"enabled",budgetTokens:4096}});let _=0,b=0,C=0,j=0,K=0,te=.2,z=te,G=z;function ne(Te,Me,Se={}){i.markdown(""),i.progress(`Retrying (${Me}): ${Te}`),G=z+.2*Me,n.warn(Te,{...Se,count:Me,temperature:G,event:"retry."+Me})}let le=0;for(;;){if(iR(c),await t.interrupted,++le>_U)throw new Error("Max requests per turn achieved: "+le);if(++t.counter>gU)throw new Error("Max total requests achieved: "+t.counter);let Te=new AbortController,Me=Te.signal,Se=t.token;Me.context=t;let ke=await WC({model:a,system:QC(a),messages:c,tools:fh,temperature:G,maxTokens:8192,maxSteps:1,abortSignal:Me,experimental_toolCallStreaming:!0,experimental_repairToolCall:XC(t),providerOptions:g}),et=!1;for await(let Tt of ke.fullStream){if(Se.isCancellationRequested)break;switch(Tt.type){case"text-delta":i.markdown(Tt.textDelta);break;case"tool-call-streaming-start":let fn=fh[Tt.toolName].progress;fn&&(i.markdown(""),i.progress(fn));break;case"reasoning":yU[r]||i.markdown(Tt.textDelta);break;case"error":if(Bg.isInstance(Tt.error)&&++_<=5){et=!0;let Ir=`Unknown tool ${Tt.error.toolName}`;ne(Ir,_,Tt.error);break}if(A_.isInstance(Tt.error)&&++_<=5){et=!0;let Ir=`Invalid arguments for tool ${Tt.error.toolName}`;ne(Ir,_,Tt.error);break}if(Db.isInstance(Tt.error)&&++_<=5){et=!0,ne("Tool call repair failed",_,Tt.error);break}let{event:it,count:lo,message:Le}=Tt.error;if(it=="retry"){ne(Le,lo,Tt.error),G=z;break}throw Tt.error}}if(t.interrupted){await t.interrupted;continue}let ot=await ke.response,Dt=await ke.toolCalls,qt=await ke.toolResults,lr=await ke.usage,ln=await ke.providerMetadata;if(et)continue;_=0;let Ti="";for(let Tt of qt)Tt.result.startsWith("Tool error: ")&&(Ti=Tt.result.slice(12));if(Ti)if(++b<3){ne(Ti,b);continue}else if(++C<3)ne("Tool execution error",C),z=te+.2*C;else throw new Error(Ti);else C=0,z=te;if(b=0,ot.messages.length==1){let{role:Tt,content:fn}=ot.messages[0];if(Tt=="assistant"&&Array.isArray(fn)&&fn.length==1){let it=fn[0];if(it.type=="text"&&it.text===""&&++j<=5){ne("Empty response",j),await f_(5*j,Se);continue}}}j=0,G=z,c.push(...ot.messages);let pi=c.pop();for(let{toolName:Tt,toolCallId:fn,args:it,result:lo}of qt){let Le=fh[Tt];if(Le!=null&&Le.finalize){let Ir=await Le.finalize(it,t,lo);if(pi.role=="tool"){let Cr=pi.content.find(_t=>_t.toolCallId==fn);Cr&&(Cr.result=Ir)}}}if(c.push(pi),Dt.length){K=0;for(let Tt of Dt)if(Tt.toolName==r)return Tt.args}else if(r){let Tt=fh[r];if(++K>3){if(Tt.fallback)return Tt.fallback();throw new Error(`Unable to call ${r} tool`)}ne("Unexpected stop",K,{name:r}),await f_(5*K,Se),c.push(gv(Tt.retry||`Reply using ${r} tool`))}else return}}async function co(t,e,r,n=""){return n&&(t.stream.markdown(""),t.stream.progress(n)),Ab(t,r,e.name)}function oR(t){let e=t.messages.concat();return{restore(){t.messages.length=0,t.messages.push(...e)}}}var Sw=require("vscode");var Xh=".multicoder/task";async function uR(t){if(!await Gl(t))return null;let e=await Sw.commands.executeCommand("vscode.executeDocumentSymbolProvider",t);if(!e||e.length===0)return null;let r=await Sw.workspace.openTextDocument(t),n=e[0],i=sR(n.name),a=n.children.map(({name:c,range:g})=>({header:sR(c),content:r.getText(g).slice(c.length).trim()}));return{title:i,items:a}}function sR(t){return t=t.replace(/^#+\s+/,""),t=t.replace(/^Step \d+[\.:]*\s+/,""),t=t.replace(/^\d+[\.:]+\s+/,""),t}var wU=Qt`
    Explain what could be done here. Then use ${Ua.name} tool to suggest some actions
`;async function Pb(t,e){let{task:r,request:n}=t;if(r.activity!=="chat")cR(t,e,"chat");else if(!e&&!n.command)e=wU;else if(n.command!="chat")return cR(t,e,""),!1;return await Ab(t,e),!0}function cR(t,e,r){let{task:n,messages:i}=t;t.task={id:"",depth:0,folder:Xh,title:"",start:i.length,prompt:e,activity:r,evals:null,parent:n,step:void 0,summary:"",completed:[],edits:[],cid:t.id}}async function SU(t){let e=[];if(lv(t))for(let{uri:r,isFile:n}of await D0(t))n&&e.push(await I_(r));return e}async function Jl({activity:t,id:e,folder:r,depth:n,title:i,prompt:a,step:c,completed:g,edits:_,summary:b,parent:C,cid:j},K=""){let te=[];if(!n)te.push(di("request",a));else if(typeof c=="number"){let z={id:e,name:i,parent:C.title};te.push([di("task_metadata",Ro(z)),di("task_instructions",a)])}else te.push(di("task_instructions",a));if(!t&&!n&&te.push(await pv(Ei(r,j))),te.push(...await SU(Ei(r,j))),g.forEach(z=>te.push(bU(z))),_.length&&!g.length){let z=new Set(_.map(G=>G.path));for(let G of z)te.push(await Kh(Ei(G,j)))}return b&&te.push(b),K&&te.push(K),gv(...te)}function bU({id:t,title:e,summary:r,completed:n,edits:i}){let a={step:t,title:e,status:"completed"},c=[];c.push(di("step_metadata",Ro(a)));let g=i.map(K=>K.summary),_=n.map(EU);_.length?c.push(..._.map(K=>di("implementation_details",K))):c.push(di("implementation_details",Ro(g)));let b=new Set(i.filter(K=>!K.before).map(K=>K.path)),C=new Set(i.filter(K=>K.before&&K.after).map(K=>K.path)),j=new Set(i.filter(K=>K.before&&!K.after).map(K=>K.path));return b.forEach(K=>C.delete(K)),j.forEach(K=>C.delete(K)),c.push(di("files_created",Ro([...b]))),c.push(di("files_modified",Ro([...C]))),c.push(di("files_deleted",Ro([...j]))),c.push(di("step_summary",r)),c}function EU({id:t,title:e,summary:r,completed:n,edits:i}){let a=i.map(_=>_.summary),c=n.map(_=>_.summary),g=[];return g.push(t+": "+e),c.length?g.push(Ro(c)):a.length>1&&g.push(Ro(a)),g.push(r),g}async function pm(t){let{task:e,messages:r}=t,{id:n}=e,i=n?"task "+n:"the request",a=`Let me evaluate ${i} for clarity, complexity and workload.`,c=`Sure. Reply with ${Jh.name} tool only, no text.`,g=oR(t);r.push(Kn(a));let _=await co(t,Jh,c,"Deciding next steps..."),[b,C,j]=Jh.compute(_);e.evals={..._,vagueness:b,complexity:C,workload:j},t.stream.markdown(""),g.restore()}var TU=t=>Qt`
    Use ${sp.name} tool to create requirements document in the ${t}/ directory.
    Clarify the request, removing any ambiguities or omissions.
    Use ${N_.name} tool to obtain the missing information.
    Include implied requirements derived from the project configuration and context.
    Skip implementation, focus strictly on the requirements.
    Keep it short and simple for trivial tasks but include enough details for larger requests.
    Produce a minimal, but complete document, do not leave any open questions for the future.
    Apply a very dense, concise writing style, but keep all minor details.
    Provide a short summary using ${ni.name} tool.
`,lR=t=>Qt`
    ${t}
    ---
    Modify the document, then deliver a very short summary using ${ni.name} tool.
`,IU=()=>Qt`
    Carefully review the requirements document to find any missing elements.
    Add or correct any significant items and remove anything that is not strictly necessary.
    Focus strictly on the requirements - DO NOT try to design the solution, define data structures or write some code at this point.
`,NU=()=>Qt`
    Suggest possible changes which may make the requirements more clear, precise and easy to understand. 
    Include optional elements, alternative approaches or high-level improvements.
    Offer them as followup actions using ${Ua.name} tool.
    Only include the actions which improve the content of the requirement specification document(s).
`;async function kb(t,e,r=!1){let{task:n,messages:i,log:a}=t,{id:c,title:g,depth:_,folder:b,evals:C,activity:j}=n;if(j!=="spec"){if(r&&(!C.requirements&&C.vagueness<3||_>0))return!1;n.activity="spec",a.info(`${c} ${g}`,{event:"step.spec"}),i.push(Kn("Let me clarify the request and create a requirements document.")),await co(t,ni,TU(b),"Creating requirements spec...")}else if(e=="i")i.push(Kn("Let me review and improve the requirements document.")),await co(t,ni,lR(IU()),"Improving requirements...");else if(e)i.push(Kn("Let me do some changes in the requirements document.")),await co(t,ni,lR(e),"Updating requirements...");else return!1;return t.auto||(await co(t,Ua,NU()),t.followups.push({command:"",prompt:"i",label:"\u2B6E\xA0 review and improve"},{command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"},{command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"})),i.length=n.start,i.push(await Jl(n)),await pm(t),i.push(Kn("Let me do some changes in the requirements document.")),!0}var DU=t=>Qt`
    Use ${sp.name} tool to create solution design document(s) in the ${t}/ directory.
    Analyze the current code, research possible options and design an optimal solution.
    Your goal is to find the most simple solution, very easy to understand and maintain. 
    Only include the features which are explicitely required. Skip anything that can be added at a later stage. Skip implementation steps.
    Keep it short and simple for trivial tasks but include enough details for larger elements.
    Apply a very dense, concise writing style, but keep all minor details.
    Provide a short summary using ${ni.name} tool.
`,fR=t=>Qt`
    ${t}
    ---
    Modify the document(s), then deliver a very short summary using ${ni.name} tool.
`,CU=()=>Qt`
    Carefully review the design document(s) to find any missing elements.
    Add or correct any significant items and remove anything that is not strictly necessary.
    Focus strictly on the solution design - DO NOT try to write code, DO NOT make step-by-step plan at this point.
`,RU=()=>Qt`
    Suggest possible changes which may make the solution design more clear, precise and easy to understand. 
    Include optional elements, alternative solutions or high-level improvements.
    Offer them as followup actions using ${Ua.name} tool.
    Only include the actions which improve the content of the solution design document(s).
`;async function Lb(t,e,r=!1){let{task:n,messages:i,log:a}=t,{id:c,title:g,depth:_,folder:b,evals:C,activity:j}=n,K=_?"this task":"the request";if(j!=="design"){if(r&&(!C.design&&C.complexity<3||C.complexity<_))return;n.activity="design",a.info(`${c} ${g}`,{event:"step.design"}),i.push(Kn(`Let me analyze ${K}, explore the existing code and design a solution.`)),await co(t,ni,DU(b),"Designing solution...")}else if(e=="i")i.push(Kn("Let me review and improve the solution design document(s).")),await co(t,ni,fR(CU()),"Improving design...");else if(e)i.push(Kn("Let me do some changes in the solution design document(s).")),await co(t,ni,fR(e),"Updating design...");else return;return t.auto||(await co(t,Ua,RU()),t.followups.push({command:"",prompt:"i",label:"\u2B6E\xA0 review and improve"},{command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"},{command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"})),i.length=n.start,i.push(await Jl(n)),await pm(t),i.push(Kn("Let me do some changes in the solution design document(s).")),!0}var xU=t=>Qt`
    Use ${sp.name} tool to create ${t} file containing the detailed implementation plan for this task.
    Split the task into smaller, more manageable steps and specify what should be done at each step.
    Strictly follow the requirements and design documents if available. 
    Only plan for elements and features which are explicitely included in the specs and design.
    Take into account the changes already made in the previous tasks.
    Carefully think through all steps and mentally verify the proposed implementation.
    Follow KISS, YAGNI and SOLID principles, focus on simplicity above all other things.
    This plan is for an implementation by an AI coding agent, it must exclude any human activities (meetings, peer review, manual testing etc)
    Only use the capabilities and the information which you as an AI coding agent have explicit access to as part of this project.
    The document should contain a title and multiple sections (linear structure, no nested sub-sections)
    Each section represents one step of the plan and consists of a header and a step description.
    If the amount of work is very small, describe it as one single step (title with plain text, no section heading).
    Apply a very dense, concise writing style, but keep all minor details.
    Provide a short summary using ${ni.name} tool.
`,dR=t=>Qt`
    ${t}
    ---
    Modify the document, then deliver a very short summary using ${ni.name} tool.
`,OU=()=>Qt`
    Carefully analyse each section of the plan to identify any inconsistencies or logical errors. 
    Check for edge cases, cross-dependencies and anything, that can affect successful implementation.
`,AU=()=>Qt`
    Suggest possible changes which will make the implementation plan more clear, precise and easy to understand. 
    Include optional elements, alternative implementations or high-level improvements.
    Offer them as followup actions using ${Ua.name} tool.
    Only include the actions which improve the content of the implementation plan.
`;async function Mb(t,e,r=!1){let{task:n,messages:i,log:a}=t,{id:c,title:g,depth:_,folder:b,evals:C,activity:j}=n,K=b+"/implementation_plan.md",te=_?"this task":"this request";if(j!=="plan"){if(r&&(!C.planning&&C.workload<2.5||C.workload<_))return;n.activity="plan",a.info(`${c} ${g}`,{event:"step.plan"}),i.push(Kn(`Let me create an implementation plan for ${te}.`)),await co(t,ni,xU(K),"Planning...")}else if(e=="i")i.push(Kn("Let me review and improve the implementation plan.")),await co(t,ni,dR(OU()),"Improving plan...");else if(e)i.push(Kn("Let me do some changes in the implementation plan.")),await co(t,ni,dR(e),"Updating plan...");else return;return t.auto||(await co(t,Ua,AU()),t.followups.push({command:"",prompt:"i",label:"\u2B6E\xA0 review and improve"},{command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"},{command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"})),i.length=n.start,i.push(await Jl(n)),i.push(Kn("Let me do some changes in the implementation plan.")),!0}var Kf=require("vscode");function _v(){}_v.prototype={diff:function(e,r){var n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.callback;typeof i=="function"&&(a=i,i={});var c=this;function g(Se){return Se=c.postProcess(Se,i),a?(setTimeout(function(){a(Se)},0),!0):Se}e=this.castInput(e,i),r=this.castInput(r,i),e=this.removeEmpty(this.tokenize(e,i)),r=this.removeEmpty(this.tokenize(r,i));var _=r.length,b=e.length,C=1,j=_+b;i.maxEditLength!=null&&(j=Math.min(j,i.maxEditLength));var K=(n=i.timeout)!==null&&n!==void 0?n:1/0,te=Date.now()+K,z=[{oldPos:-1,lastComponent:void 0}],G=this.extractCommon(z[0],r,e,0,i);if(z[0].oldPos+1>=b&&G+1>=_)return g(pR(c,z[0].lastComponent,r,e,c.useLongestToken));var ne=-1/0,le=1/0;function Te(){for(var Se=Math.max(ne,-C);Se<=Math.min(le,C);Se+=2){var ke=void 0,et=z[Se-1],ot=z[Se+1];et&&(z[Se-1]=void 0);var Dt=!1;if(ot){var qt=ot.oldPos-Se;Dt=ot&&0<=qt&&qt<_}var lr=et&&et.oldPos+1<b;if(!Dt&&!lr){z[Se]=void 0;continue}if(!lr||Dt&&et.oldPos<ot.oldPos?ke=c.addToPath(ot,!0,!1,0,i):ke=c.addToPath(et,!1,!0,1,i),G=c.extractCommon(ke,r,e,Se,i),ke.oldPos+1>=b&&G+1>=_)return g(pR(c,ke.lastComponent,r,e,c.useLongestToken));z[Se]=ke,ke.oldPos+1>=b&&(le=Math.min(le,Se-1)),G+1>=_&&(ne=Math.max(ne,Se+1))}C++}if(a)(function Se(){setTimeout(function(){if(C>j||Date.now()>te)return a();Te()||Se()},0)})();else for(;C<=j&&Date.now()<=te;){var Me=Te();if(Me)return Me}},addToPath:function(e,r,n,i,a){var c=e.lastComponent;return c&&!a.oneChangePerToken&&c.added===r&&c.removed===n?{oldPos:e.oldPos+i,lastComponent:{count:c.count+1,added:r,removed:n,previousComponent:c.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:r,removed:n,previousComponent:c}}},extractCommon:function(e,r,n,i,a){for(var c=r.length,g=n.length,_=e.oldPos,b=_-i,C=0;b+1<c&&_+1<g&&this.equals(n[_+1],r[b+1],a);)b++,_++,C++,a.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return C&&!a.oneChangePerToken&&(e.lastComponent={count:C,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=_,b},equals:function(e,r,n){return n.comparator?n.comparator(e,r):e===r||n.ignoreCase&&e.toLowerCase()===r.toLowerCase()},removeEmpty:function(e){for(var r=[],n=0;n<e.length;n++)e[n]&&r.push(e[n]);return r},castInput:function(e){return e},tokenize:function(e){return Array.from(e)},join:function(e){return e.join("")},postProcess:function(e){return e}};function pR(t,e,r,n,i){for(var a=[],c;e;)a.push(e),c=e.previousComponent,delete e.previousComponent,e=c;a.reverse();for(var g=0,_=a.length,b=0,C=0;g<_;g++){var j=a[g];if(j.removed)j.value=t.join(n.slice(C,C+j.count)),C+=j.count;else{if(!j.added&&i){var K=r.slice(b,b+j.count);K=K.map(function(te,z){var G=n[C+z];return G.length>te.length?G:te}),j.value=t.join(K)}else j.value=t.join(r.slice(b,b+j.count));b+=j.count,j.added||(C+=j.count)}}return a}var TW=new _v;function vR(t,e){var r;for(r=0;r<t.length&&r<e.length;r++)if(t[r]!=e[r])return t.slice(0,r);return t.slice(0,r)}function mR(t,e){var r;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(r=0;r<t.length&&r<e.length;r++)if(t[t.length-(r+1)]!=e[e.length-(r+1)])return t.slice(-r);return t.slice(-r)}function Fb(t,e,r){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return r+t.slice(e.length)}function Ub(t,e,r){if(!e)return t+r;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+r}function Ey(t,e){return Fb(t,e,"")}function bw(t,e){return Ub(t,e,"")}function hR(t,e){return e.slice(0,PU(t,e))}function PU(t,e){var r=0;t.length>e.length&&(r=t.length-e.length);var n=e.length;t.length<e.length&&(n=t.length);var i=Array(n),a=0;i[0]=0;for(var c=1;c<n;c++){for(e[c]==e[a]?i[c]=i[a]:i[c]=a;a>0&&e[c]!=e[a];)a=i[a];e[c]==e[a]&&a++}a=0;for(var g=r;g<t.length;g++){for(;a>0&&t[g]!=e[a];)a=i[a];t[g]==e[a]&&a++}return a}var Ew="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",kU=new RegExp("[".concat(Ew,"]+|\\s+|[^").concat(Ew,"]"),"ug"),Tw=new _v;Tw.equals=function(t,e,r){return r.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};Tw.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(e.intlSegmenter.segment(t),function(a){return a.segment})}else r=t.match(kU)||[];var n=[],i=null;return r.forEach(function(a){/\s/.test(a)?i==null?n.push(a):n.push(n.pop()+a):/\s/.test(i)?n[n.length-1]==i?n.push(n.pop()+a):n.push(i+a):n.push(a),i=a}),n};Tw.join=function(t){return t.map(function(e,r){return r==0?e:e.replace(/^\s+/,"")}).join("")};Tw.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var r=null,n=null,i=null;return t.forEach(function(a){a.added?n=a:a.removed?i=a:((n||i)&&gR(r,i,n,a),r=a,n=null,i=null)}),(n||i)&&gR(r,i,n,null),t};function gR(t,e,r,n){if(e&&r){var i=e.value.match(/^\s*/)[0],a=e.value.match(/\s*$/)[0],c=r.value.match(/^\s*/)[0],g=r.value.match(/\s*$/)[0];if(t){var _=vR(i,c);t.value=Ub(t.value,c,_),e.value=Ey(e.value,_),r.value=Ey(r.value,_)}if(n){var b=mR(a,g);n.value=Fb(n.value,g,b),e.value=bw(e.value,b),r.value=bw(r.value,b)}}else if(r)t&&(r.value=r.value.replace(/^\s*/,"")),n&&(n.value=n.value.replace(/^\s*/,""));else if(t&&n){var C=n.value.match(/^\s*/)[0],j=e.value.match(/^\s*/)[0],K=e.value.match(/\s*$/)[0],te=vR(C,j);e.value=Ey(e.value,te);var z=mR(Ey(C,te),K);e.value=bw(e.value,z),n.value=Fb(n.value,C,z),t.value=Ub(t.value,C,C.slice(0,C.length-z.length))}else if(n){var G=n.value.match(/^\s*/)[0],ne=e.value.match(/\s*$/)[0],le=hR(ne,G);e.value=bw(e.value,le)}else if(t){var Te=t.value.match(/\s*$/)[0],Me=e.value.match(/^\s*/)[0],Se=hR(Te,Me);e.value=Ey(e.value,Se)}}var LU=new _v;LU.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(Ew,"]+|[^\\S\\n\\r]+|[^").concat(Ew,"]"),"ug");return t.match(e)||[]};var Iw=new _v;Iw.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var r=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var i=0;i<n.length;i++){var a=n[i];i%2&&!e.newlineIsToken?r[r.length-1]+=a:r.push(a)}return r};Iw.equals=function(t,e,r){return r.ignoreWhitespace?((!r.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),_v.prototype.equals.call(this,t,e,r)};function _R(t,e,r){return Iw.diff(t,e,r)}var MU=new _v;MU.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var FU=new _v;FU.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function jb(t){"@babel/helpers - typeof";return jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jb(t)}var Ty=new _v;Ty.useLongestToken=!0;Ty.tokenize=Iw.tokenize;Ty.castInput=function(t,e){var r=e.undefinedReplacement,n=e.stringifyReplacer,i=n===void 0?function(a,c){return typeof c>"u"?r:c}:n;return typeof t=="string"?t:JSON.stringify(Yb(t,null,null,i),i,"  ")};Ty.equals=function(t,e,r){return _v.prototype.equals.call(Ty,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),r)};function Yb(t,e,r,n,i){e=e||[],r=r||[],n&&(t=n(i,t));var a;for(a=0;a<e.length;a+=1)if(e[a]===t)return r[a];var c;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),c=new Array(t.length),r.push(c),a=0;a<t.length;a+=1)c[a]=Yb(t[a],e,r,n,i);return e.pop(),r.pop(),c}if(t&&t.toJSON&&(t=t.toJSON()),jb(t)==="object"&&t!==null){e.push(t),c={},r.push(c);var g=[],_;for(_ in t)Object.prototype.hasOwnProperty.call(t,_)&&g.push(_);for(g.sort(),a=0;a<g.length;a+=1)_=g[a],c[_]=Yb(t[_],e,r,n,_);e.pop(),r.pop()}else c=t;return c}var $b=new _v;$b.tokenize=function(t){return t.slice()};$b.join=$b.removeEmpty=function(t){return t};function yR(t){let{task:e,stream:r}=t,{id:n,title:i}=e,a=`<table><tr><th> $(list-tree) ${n} ${i} </th></tr></table>`,c=new Kf.MarkdownString(a);c.supportHtml=!0,c.supportThemeIcons=!0,r.markdown(c)}async function wR(t,e,r){let n=(...j)=>`command:multicoder.diffView?${encodeURIComponent(JSON.stringify(j))}`,i=j=>`<span class="codicon codicon-${j}" style="color:var(--vscode-foreground);"></span>`,a=new Kf.MarkdownString(`

`);a.supportHtml=!0,a.supportThemeIcons=!0,a.isTrusted={enabledCommands:["multicoder.diffView"]},a.appendMarkdown(`<h3>${i("check")} ${r}</h3>

`),e.forEach(({summary:j,path:K,id:te})=>{a.appendMarkdown(`- [${j}](${n(K,te,t.id)} 'Open Diff')
`)}),a.appendMarkdown(`

`),t.stream.markdown(a),t.stream.button({title:"Apply All",command:"multicoder.action",arguments:[C],tooltip:"Shows confirmation panel (refactor preview)"});let c=new Set(e.map(({path:j})=>j)),g=I0(),_=new Map;async function b(j){try{return await Bh(j)}catch{return""}}for(let j of c.values()){let K="",te="",z=Ei(j,t.id),G=Vc(z);g.find(ne=>ne.path===G.path)?K=(await Kf.workspace.openTextDocument(G)).getText():K=await b(G),te=await b(z),_.set(j,{before:K,after:te})}async function C(){let j=new Kf.WorkspaceEdit;for(let K of c.values()){let{before:te,after:z}=_.get(K)||{},G=Vc(Ei(K,t.id));te||(G=G.with({scheme:"untitled"}));let ne=await Kf.workspace.openTextDocument(G),le=ne.getText(),Te=z;le!==Te&&UU(j,G,le,Te,!0)}await Kf.workspace.applyEdit(j),t.log.info(r,{event:"action.all"})}}function UU(t,e,r,n,i=!1,a=""){let c=_R(r,n,{ignoreWhitespace:!1}),g=0,_={needsConfirmation:i,label:a};for(let b=0;b<c.length;b++){let C=c[b];if(C.removed){let j=new Kf.Range(g,0,g+C.count,0),K=c[++b];K.added?t.replace(e,j,K.value,_):(t.delete(e,j,_),g+=(K==null?void 0:K.count)||0)}else C.added&&(t.insert(e,new Kf.Position(g,0),C.value,_),g-=C.count);g+=C.count}}var jU=10;async function bR(t){let{task:e}=t,{title:r,folder:n,activity:i,completed:a}=e,c=await uR(Ei(n+"/implementation_plan.md",t.id));if(c&&!r&&(e.title=c.title),i!=="implement")return!c||c.items.length<2?void 0:(e.activity="implement",await SR(t,c,0),!0);if(a.length<c.items.length)return await SR(t,c,a.length),!0}async function SR(t,e,r){let{task:n,messages:i}=t,{id:a,depth:c}=n,g=(a?a+".":"")+(r+1),_=e.items[r],b=`I will start working on ${e.title}. The first step is: ${_.header}`;if(r&&(b=`I will continue working on ${e.title}. The next step is ${r+1}: ${_.header}`),i.push(Kn(b)),t.task={id:g,depth:c+1,folder:Xh+"/"+g,title:_.header,start:i.length,prompt:_.content,activity:"",evals:null,parent:n,step:r,summary:"",completed:[],edits:[],cid:t.id},c>=jU)throw new Error("Max depth exceeded");yR(t),i.push(await Jl(n)),await pm(t)}var YU=()=>Qt`
    Suggest possible changes or improvements to the code created or updated in the current implementation step. 
    Include optional elements, alternative approaches or high-level improvements.
    Offer them as followup actions using ${Ua.name} tool.
    Only include the actions which are in scope for this current step.
`;async function ER(t,e){let{task:r,messages:n,log:i}=t,{id:a,title:c,depth:g,activity:_,parent:b,completed:C}=r;if(_!=="finish"&&!C.length){r.activity="finish",i.info(`${a} ${c}`,{event:"step.implement"});let K=g?"this task":"the request",te=`Let me implement ${K} now`,z=`Sure. Finish ${K}, then deliver a summary using ${ni.name} tool.`;n.push(Kn(te));let G=await co(t,ni,z);r.summary=G.text||(c||K)+" is completed."}else if(_!=="finish"&&C.length){r.activity="finish";let K=`All the steps of ${c} are now completed. Let me summarize what has been done.`,te=`Sure. Deliver a summary using ${ni.name} tool.`;n.push(Kn(K));let z=await co(t,ni,te);r.summary=z.text||c+" is completed."}else{if(e)return n.push(Kn("I will make some changes in this last step")),await qU(t,e),!1;if(b)return b.completed.push(r),b.edits.push(...r.edits),t.task=b,r.parent=null,!1}let j=r.edits;return j.length>1&&await wR(t,j,c||"Task completed"),b||(t.auto=!1),t.auto||(await co(t,Ua,YU()),r.parent&&(typeof r.step=="number"?t.followups.push({command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"},{command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"}):t.followups.push({command:"",prompt:"",label:"\u25B7\xA0 back to parent (Enter)"}))),n.length=r.start,n.push(await Jl(r)),n.push(Kn("I will make some changes in this last step")),!0}function $U(t){let e=t%26,r=(t-e)/26;return String.fromCharCode(...r?[r+96,e+97]:[e+97])}var BU=0;async function qU(t,e){let{task:r,messages:n}=t,{depth:i}=r,a=$U(BU++);t.task={id:a,depth:i+1,folder:Xh+"/"+a,title:"",start:n.length,prompt:e,activity:"",evals:null,parent:r,step:void 0,summary:"",completed:[],edits:[],cid:t.id},n.push(await Jl(t.task)),await pm(t)}var HU=1e3;async function TR(t){let{task:e,request:r,messages:n}=t,{command:i,prompt:a}=r;if(e||(e={id:"",depth:0,folder:Xh,title:"",start:n.length,prompt:a,activity:"",evals:null,parent:null,step:void 0,summary:"",completed:[],edits:[],cid:t.id},a||(e.activity="chat"),t.task=e),i=="chat"||e.activity=="chat"){if(await Pb(t,a))return;e=t.task}switch(n.length=e.start,n.push(await Jl(e)),i){case"spec":return await kb(t,a);case"design":return await Lb(t,a);case"plan":return await Mb(t,a)}if(!e.evals&&!e.activity){await pm(t);let{complexity:g,workload:_}=e.evals;if(g<1||_<1)return n.length=e.start,await Pb(t,a)}let c=0;for(;++c<HU;){if(await VU(t,a),!t.auto)return;a=""}throw new Error("Too many steps in autonomous run")}async function VU(t,e){let r=0;for(;++r<10;){let{task:n,messages:i}=t;switch(i.length=n.start,i.push(await Jl(n)),n.activity){case"":case"spec":if(await kb(t,e,!0))return;case"design":if(await Lb(t,e,!0))return;case"plan":if(await Mb(t,e,!0))return;case"implement":if(await bR(t))break;case"finish":if(await ER(t,e))return}}throw new Error("Unexpected loop")}var NR=require("vscode"),GU=()=>`
Multicoder can work with LLM models provided by **GitHub Copilot** (default configuration) or 
send requests directly to the core provider APIs (**Anthropic**, **OpenAI**).

If you have your own API key and want to use it instead of the Github models, select 'Core Providers' in the Model Provider dropdown (settings panel)
and set your API key(s) using the buttons below.

`;async function IR(t,e){var n;let r=await t.ext.secrets.get(e)||((n=process==null?void 0:process.env)==null?void 0:n[e]);return r&&r.slice(0,12)+"..."+r.slice(-4)}async function Bb(t){let{log:e,stream:r}=t;NR.commands.executeCommand("workbench.action.openSettings","@ext:multicoder.multicoder"),e.info("options",{event:"options"}),r.markdown(GU());let n=await IR(t,"ANTHROPIC_API_KEY");r.markdown(`Anthropic API key: ${n}`),r.button({command:"multicoder.storeApiKey",title:"Set Anthropic key",arguments:["ANTHROPIC_API_KEY","Anthropic API key"]}),r.markdown(`

`);let i=await IR(t,"OPENAI_API_KEY");r.markdown(`OpenAI API key: ${i}`),r.button({command:"multicoder.storeApiKey",title:"Set OpenAI key",arguments:["OPENAI_API_KEY","OpenAI API key"]})}var DR,CR;async function zU(t){var j,K;let{request:e,ext:r}=t,n=e.model.id,i=vm.workspace.getConfiguration("multicoder"),a=i.get("modelProvider");if(n==DR&&a==CR&&t.model)return;DR=n,CR=a;let c=e.model.family;if(c.startsWith("o1")&&(c="gpt-4o"),a=="default"&&(a="copilot"),a=="copilot"){t.model=eb({id:c,provider:"copilot",apiKey:""});return}if(a=="auto"&&(a=(j=tb.find(te=>te.family==c))==null?void 0:j.provider,!a))throw new Error("Cannot find model: "+c);let g=FN.find(te=>te.id==a),_=tb.find(te=>te.provider==a&&te.family==c),{envKeyName:b}=g,C=await r.secrets.get(b)||((K=process==null?void 0:process.env)==null?void 0:K[b]);if(!C){await Bb(t);return}t.model=eb({..._,apiKey:C})}function WU({history:t}){for(let e=t.length-1;e>=0;e--){let r=t[e];if(r instanceof vm.ChatResponseTurn){let{id:n,messages:i}=r.result.metadata||{};if(n)return[n,i]}}return[]}function RR(t){let{ext:e,log:r,recent:n}=t,i=vm.chat.createChatParticipant("multicoder",async(C,j,K,te)=>{let[z,G]=WU(j),{sessionId:ne}=C.toolInvocationToken,le=z&&n.get(z);!le&&ne&&(le=n.get(ne)),z??(z=T0()),G??(G=[]),le||(le={id:z,messages:G,...t,request:{},chat:{},stream:{}},le.log={...t.log,context:le}),z=le.id,n.set(z,le),ne&&n.set(ne,le),Object.assign(le,{token:te}),Object.assign(le.request,C),Object.assign(le.chat,j),Object.assign(le.stream,K),le.followups=[],le.counter=0,b(le.request);try{return await zU(le),le.model?C.command=="options"?(await Bb(le),{metadata:{id:z,messages:G}}):(await nR(le,TR),{metadata:{id:z,messages:le.messages,followups:le.followups||[]}}):void 0}catch(Te){throw r.error(Te),le.model=null,Te}});i.iconPath=vm.Uri.joinPath(e.extensionUri,"resources","multicoder.png"),i.onDidReceiveFeedback(({kind:C})=>{r.info(C?"Good":"Bad",{event:"feedback"})});let a=e.extension.packageJSON.contributes.chatParticipants[0].commands,c=a.filter(({when:C})=>C==null?void 0:C.startsWith("!")).map(({name:C})=>C),g=[...c,"resume"];i.followupProvider={provideFollowups(C){var j;return _(C.metadata?C.metadata.commands:g),((j=C.metadata)==null?void 0:j.followups)||[]}};function _(C){for(let{name:j,when:K}of a){let te=!!C&&C.includes(j)!=K.startsWith("!");vm.commands.executeCommand("setContext",K.replace("!",""),te)}}function b(C){!C.command&&a.find(({name:j})=>"/"+j==C.prompt)&&(r.warn("Command not processed: "+C.prompt),C.command=C.prompt.slice(1),C.prompt="")}}function KU(t){let e={ext:t,config:xR.workspace.getConfiguration("multicoder"),log:null,telemetry:null,recent:new Map};cI(e),fI(e),hI(e),wI(e),RR(e)}function JU(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

@microsoft/1ds-core-js/dist/es5/ms.core.js:
  (*!
   * 1DS JS SDK Core, 4.3.5
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.6 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

@microsoft/1ds-post-js/dist/es5/ms.post.js:
  (*!
   * 1DS JS SDK POST plugin, 4.3.5
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.6 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.5
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.6 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.5
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.6 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)
*/
//# sourceMappingURL=extension.js.map
