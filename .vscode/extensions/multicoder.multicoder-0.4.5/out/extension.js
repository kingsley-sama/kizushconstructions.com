var iN=Object.create;var Vg=Object.defineProperty;var oN=Object.getOwnPropertyDescriptor;var sN=Object.getOwnPropertyNames;var uN=Object.getPrototypeOf,cN=Object.prototype.hasOwnProperty;var Ld=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),$S=(e,t)=>{for(var r in t)Vg(e,r,{get:t[r],enumerable:!0})},qS=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of sN(t))!cN.call(e,s)&&s!==r&&Vg(e,s,{get:()=>t[s],enumerable:!(n=oN(t,s))||n.enumerable});return e};var u0=(e,t,r)=>(r=e!=null?iN(uN(e)):{},qS(t||!e||!e.__esModule?Vg(r,"default",{value:e,enumerable:!0}):r,e)),lN=e=>qS(Vg({},"__esModule",{value:!0}),e);var ZS=Ld((Jk,JS)=>{function BS(e){return Array.isArray(e)?e:[e]}var d0="",HS=" ",l0="\\",pN=/^\s+$/,vN=/(?:[^\\]|^)\\$/,mN=/^\\!/,hN=/^\\#/,_N=/\r?\n/g,gN=/^\.*\/|^\.+$/,f0="/",VS="node-ignore";typeof Symbol<"u"&&(VS=Symbol.for("node-ignore"));var zS=VS,yN=(e,t,r)=>Object.defineProperty(e,t,{value:r}),SN=/([0-z])-([0-z])/g,KS=()=>!1,wN=e=>e.replace(SN,(t,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?t:d0),bN=e=>{let{length:t}=e;return e.slice(0,t-t%2)},EN=[[/^\uFEFF/,()=>d0],[/((?:\\\\)*?)(\\?\s+)$/,(e,t,r)=>t+(r.indexOf("\\")===0?HS:d0)],[/(\\+?)\s/g,(e,t)=>{let{length:r}=t;return t.slice(0,r-r%2)+HS}],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,r)=>t+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(e,t,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return t+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>l0],[/\\\\/g,()=>l0],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,t,r,n,s)=>t===l0?`\\[${r}${bN(n)}${s}`:s==="]"&&n.length%2===0?`[${wN(r)}${n}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],GS=Object.create(null),TN=(e,t)=>{let r=GS[e];return r||(r=EN.reduce((n,[s,u])=>n.replace(s,u.bind(e)),e),GS[e]=r),t?new RegExp(r,"i"):new RegExp(r)},m0=e=>typeof e=="string",IN=e=>e&&m0(e)&&!pN.test(e)&&!vN.test(e)&&e.indexOf("#")!==0,NN=e=>e.split(_N),p0=class{constructor(t,r,n,s){this.origin=t,this.pattern=r,this.negative=n,this.regex=s}},DN=(e,t)=>{let r=e,n=!1;e.indexOf("!")===0&&(n=!0,e=e.substr(1)),e=e.replace(mN,"!").replace(hN,"#");let s=TN(e,t);return new p0(r,e,n,s)},CN=(e,t)=>{throw new t(e)},xm=(e,t,r)=>m0(e)?e?xm.isNotRelative(e)?r(`path should be a \`path.relative()\`d string, but got "${t}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${t}\``,TypeError),WS=e=>gN.test(e);xm.isNotRelative=WS;xm.convert=e=>e;var v0=class{constructor({ignorecase:t=!0,ignoreCase:r=t,allowRelativePaths:n=!1}={}){yN(this,zS,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[zS]){this._rules=this._rules.concat(t._rules),this._added=!0;return}if(IN(t)){let r=DN(t,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(t){return this._added=!1,BS(m0(t)?NN(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,r){let n=!1,s=!1;return this._rules.forEach(u=>{let{negative:h}=u;if(s===h&&n!==s||h&&!n&&!s&&!r)return;u.regex.test(t)&&(n=!h,s=h)}),{ignored:n,unignored:s}}_test(t,r,n,s){let u=t&&xm.convert(t);return xm(u,t,this._allowRelativePaths?KS:CN),this._t(u,r,n,s)}_t(t,r,n,s){if(t in r)return r[t];if(s||(s=t.split(f0)),s.pop(),!s.length)return r[t]=this._testOne(t,n);let u=this._t(s.join(f0)+f0,r,n,s);return r[t]=u.ignored?u:this._testOne(t,n)}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return BS(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}},Kg=e=>new v0(e),xN=e=>xm(e&&xm.convert(e),e,KS);Kg.isPathValid=xN;Kg.default=Kg;JS.exports=Kg;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let e=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");xm.convert=e;let t=/^[a-z]:\//i;xm.isNotRelative=r=>t.test(r)||WS(r)}});var sw=Ld((ey,ow)=>{(function(e,t){typeof ey=="object"&&typeof ow<"u"?t(ey):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.oneDS=e.oneDS||{}))})(ey,function(e){"use strict";var t="function",r="object",n="undefined",s="prototype",u=Object,h=u[s];function S(a,c){return a||c}function I(a,c){return a[c]}var D=void 0,F=null,H="",ie="function",me="object",re="prototype",Q="__proto__",ne="undefined",ce="constructor",ge="Symbol",Ue="_polyfill",we="length",qe="name",lt="call",ot="toString",xt=S(Object),cr=I(xt,re),Jt=S(String),Nt=I(Jt,re),Un=S(Math),ha=S(Array),Vr=I(ha,re),Xr=I(Vr,"slice");function tt(a,c){try{return{v:a.apply(this,c)}}catch(p){return{e:p}}}function Ya(a,c){var p=tt(a);return p.e?c:p.v}var je;function Tr(a){return function(c){return typeof c===a}}function Hn(a){var c="[object "+a+"]";return function(p){return!!(p&&Ht(p)===c)}}function Ht(a){return cr[ot].call(a)}function Tt(a,c){return typeof a===c}function rt(a){return typeof a===ne||a===ne}function Qn(a){return!Gt(a)}function nt(a){return a===F||rt(a)}function su(a){return a===F||!Gt(a)}function Gt(a){return!!a||a!==D}function Ho(a){return!je&&(je=["string","number","boolean",ne,"symbol","bigint"]),a!==me&&je.indexOf(a)!==-1}var zt=Tr("string"),er=Tr(ie);function ea(a){return!a&&nt(a)?!1:!!a&&typeof a===me}var Dt=I(ha,"isArray"),fn=Hn("Date"),ir=Tr("number"),ct=Tr("boolean"),bt=Hn("Error");function Mr(a){return!!(a&&a.then&&er(a.then))}function jn(a){return!a||!Xa(a)}function Xa(a){return!(!a||Ya(function(){return!(a&&0+a)},!a))}var on=I(xt,"getOwnPropertyDescriptor");function En(a,c){return!!a&&cr.hasOwnProperty[lt](a,c)}var Vi=S(I(xt,"hasOwn"),oa);function oa(a,c){return En(a,c)||!!on(a,c)}function Lr(a,c,p){if(a&&ea(a)){for(var g in a)if(Vi(a,g)&&c[lt](p||a,g,a[g])===-1)break}}var Zt={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function lr(a){var c={};if(c[Zt.c]=!0,c[Zt.e]=!0,a.l){c.get=function(){return a.l.v};var p=on(a.l,"v");p&&p.set&&(c.set=function(g){a.l.v=g})}return Lr(a,function(g,b){c[Zt[g]]=Qn(b)?c[Zt[g]]:b}),c}var Qr=I(xt,"defineProperty");function Ol(a,c,p,g,b,x){var k={e:x,c:b};return p&&(k.g=p),g&&(k.s=g),Qr(a,c,lr(k))}function zn(a,c,p){return Qr(a,c,lr(p))}function Ml(a,c,p,g,b){var x={};return Lr(a,function(k,P){mo(x,k,c?P:k,b),mo(x,P,p?P:k,b)}),g?g(x):x}function mo(a,c,p,g){Qr(a,c,{value:p,enumerable:!0,writable:!!g})}var Rn=S(Jt),As="[object Error]";function tr(a,c){var p=H,g=cr[ot][lt](a);g===As&&(a={stack:Rn(a.stack),message:Rn(a.message),name:Rn(a.name)});try{p=JSON.stringify(a,F,c?typeof c=="number"?c:4:D),p=(p?p.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):F)||Rn(a)}catch(b){p=" - "+tr(b,c)}return g+": "+p}function Yn(a){throw new Error(a)}function Qa(a){throw new TypeError(a)}var ei=I(xt,"freeze");function ti(a){return a}function Mf(a){return a[Q]||F}var Uc=I(xt,"assign"),hi=I(xt,"keys");function uu(a){return ei&&Lr(a,function(c,p){(Dt(p)||ea(p))&&uu(p)}),Ki(a)}var Ki=S(ei,ti),cu=S(I(xt,"seal"),ti),_a=S(I(xt,"getPrototypeOf"),Mf);function Gn(a){return Ml(a,1,0,Ki)}function Bu(a){return Ml(a,0,0,Ki)}var lu=Bu({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Ll="__tsUtils$gblCfg",ga;function xr(){var a;return typeof globalThis!==ne&&(a=globalThis),!a&&typeof self!==ne&&(a=self),!a&&typeof window!==ne&&(a=window),!a&&typeof global!==ne&&(a=global),a}function yn(){if(!ga){var a=tt(xr).v||{};ga=a[Ll]=a[Ll]||{}}return ga}var tn=xa;function xa(a,c,p){var g=c?c[a]:F;return function(b){var x=(b?b[a]:F)||g;if(x||p){var k=arguments;return(x||p).apply(b,x?Xr[lt](k,1):k)}Qa('"'+Rn(a)+'" not defined for '+tr(b))}}function ho(a){return function(c){return c[a]}}var Hu=I(Un,"max"),_i=tn("slice",Nt),Kr=tn("substring",Nt),_o=xa("substr",Nt,zo);function zo(a,c,p){return nt(a)&&Qa("Invalid "+tr(a)),p<0?H:(c=c||0,c<0&&(c=Hu(c+a[we],0)),rt(p)?_i(a,c):_i(a,c,c+p))}function Vn(a,c){return Kr(a,0,c)}var Go="_urid",fu;function ri(){if(!fu){var a=yn();fu=a.gblSym=a.gblSym||{k:{},s:{}}}return fu}var dn;function ta(a){var c={description:Rn(a),toString:function(){return ge+"("+a+")"}};return c[Ue]=!0,c}function zu(a){var c=ri();if(!Vi(c.k,a)){var p=ta(a),g=hi(c.s).length;p[Go]=function(){return g+"_"+p[ot]()},c.k[a]=p,c.s[p[Go]()]=Rn(a)}return c.k[a]}function gi(a){!dn&&(dn={});var c,p=lu[a];return p&&(c=dn[p]=dn[p]||ta(ge+"."+p)),c}var Ir;function ya(){Ir=yn()}function Lf(a){var c={};return!Ir&&ya(),c.b=Ir.lzy,Qr(c,"v",{configurable:!0,get:function(){var p=a();return Ir.lzy||Qr(c,"v",{value:p}),c.b=Ir.lzy,p}}),c}function Pa(a){return Qr({toJSON:function(){return a}},"v",{value:a})}var Vo="window",jc;function Ko(a,c){var p;return function(){return!Ir&&ya(),(!p||Ir.lzy)&&(p=Pa(tt(a,c).v)),p.v}}function Ff(a){return!Ir&&ya(),(!jc||a===!1||Ir.lzy)&&(jc=Pa(tt(xr).v||F)),jc.v}function sn(a,c){var p;if(!jc||c===!1?p=Ff(c):p=jc.v,p&&p[a])return p[a];if(a===Vo)try{return window}catch{}return F}function Fl(){return!!ni()}var ni=Ko(sn,["document"]);function $d(){return!!ra()}var ra=Ko(sn,[Vo]);function Zp(){return!!yi()}var yi=Ko(sn,["navigator"]);function Ul(){return!!Wi()}var Wi=Ko(sn,["history"]),Uf=Ko(function(){return!!tt(function(){return process&&(process.versions||{}).node}).v}),gr,Wo;function jf(){return gr=Pa(tt(sn,[ge]).v),gr}function $a(a){var c=(Ir.lzy?0:gr)||jf();return c.v?c.v[a]:D}function Yc(){return!!kt()}function kt(){return!Ir&&ya(),((Ir.lzy?0:gr)||jf()).v}function Si(a,c){var p=lu[a];!Ir&&ya();var g=(Ir.lzy?0:gr)||jf();return g.v?g.v[p||a]:c?D:gi(a)}function Gu(a,c){!Ir&&ya();var p=(Ir.lzy?0:gr)||jf();return p.v?p.v(a):c?F:ta(a)}function jl(a){return!Ir&&ya(),Wo=(Ir.lzy?0:Wo)||Pa(tt($a,["for"]).v),(Wo.v||zu)(a)}function Gv(a){return!!a&&er(a.next)}function Di(a){return!su(a)&&er(a[Si(3)])}var Yl;function qd(a,c,p){if(a&&(Gv(a)||(!Yl&&(Yl=Pa(Si(3))),a=a[Yl.v]?a[Yl.v]():F),Gv(a))){var g=D,b=D;try{for(var x=0;!(b=a.next()).done&&c[lt](p||a,b.value,x,a)!==-1;)x++}catch(k){g={e:k},a.throw&&(b=F,a.throw(g))}finally{try{b&&!b.done&&a.return&&a.return(b)}finally{if(g)throw g.e}}}}function du(a,c,p){return a.apply(c,p)}function Ci(a,c){return!rt(c)&&a&&(Dt(c)?du(a.push,a,c):Gv(c)||Di(c)?qd(c,function(p){a.push(p)}):a.push(c)),a}function ft(a,c,p){if(a)for(var g=a[we]>>>0,b=0;b<g&&!(b in a&&c[lt](p||a,a[b],b,a)===-1);b++);}var Sa=tn("indexOf",Vr),pu=tn("map",Vr);function Rs(a,c,p){return((a?a.slice:F)||Xr).apply(a,Xr[lt](arguments,1))}function Bd(a,c,p){return Sa(a,c,p)!==-1}var Hd=xa("includes",Vr,Bd),Sn=tn("reduce",Vr),wi=S(I(xt,"create"),zd);function zd(a){if(!a)return{};var c=typeof a;c!==me&&c!==ie&&Qa("Prototype must be an Object or function: "+tr(a));function p(){}return p[re]=a,new p}var xi;function ai(a,c){var p=xt.setPrototypeOf||function(g,b){var x;!xi&&(xi=Pa((x={},x[Q]=[],x instanceof Array))),xi.v?g[Q]=b:Lr(b,function(k,P){return g[k]=P})};return p(a,c)}function Hm(a,c,p){tt(zn,[c,qe,{v:a,c:!0,e:!1}]),c=ai(c,p);function g(){this[ce]=c,tt(zn,[this,qe,{v:a,c:!0,e:!1}])}return c[re]=p===F?wi(p):(g[re]=p[re],new g),c}function Vv(a,c){c&&(a[qe]=c)}function Xp(a,c,p){var g=p||Error,b=g[re][qe],x=Error.captureStackTrace;return Hm(a,function(){var k=this,P=arguments;try{tt(Vv,[g,a]);var M=du(g,k,Xr[lt](P))||k;if(M!==k){var j=_a(k);j!==_a(M)&&ai(M,j)}return x&&x(M,k[ce]),c&&c(M,P),M}finally{tt(Vv,[g,b])}},g)}function vu(){return(Date.now||Qp)()}function Qp(){return new Date().getTime()}function bh(a){return function(p){return nt(p)&&Qa("strTrim called ["+tr(p)+"]"),p&&p.replace&&(p=p.replace(a,H)),p}}var Gd=bh(/^\s+|(?=\s)\s+$/g),qa=xa("trim",Nt,Gd),$l,ql,Ji;function bi(a){if(!a||typeof a!==me)return!1;Ji||(Ji=$d()?ra():!0);var c=!1;if(a!==Ji){ql||($l=Function[re][ot],ql=$l[lt](xt));try{var p=_a(a);c=!p,c||(En(p,ce)&&(p=p[ce]),c=!!(p&&typeof p===ie&&$l[lt](p)===ql))}catch{}}return c}function mu(a){return a.value&&rv(a),!0}var ev=[Yf,rv,tv,Kd];function Pi(a,c,p,g){var b;return ft(a,function(x){if(x.k===c)return b=x,-1}),b||(b={k:c,v:c},a.push(b),g(b)),b.v}function Vd(a,c,p,g){var b=p.handler,x=p.path?g?p.path.concat(g):p.path:[],k={handler:p.handler,src:p.src,path:x},P=typeof c,M=!1,j=c===F;j||(c&&P===me?M=bi(c):j=Ho(P));var z={type:P,isPrim:j,isPlain:M,value:c,result:c,path:x,origin:p.src,copy:function(J,K){return Vd(a,J,K?k:p,K)},copyTo:function(J,K){return hu(a,J,K,k)}};return z.isPrim?b&&b[lt](p,z)?z.result:c:Pi(a,c,x,function(J){zn(z,"result",{g:function(){return J.v},s:function(X){J.v=X}});for(var K=0,ee=b;!(ee||(K<ev.length?ev[K++]:mu))[lt](p,z);)ee=F})}function hu(a,c,p,g){if(!nt(p))for(var b in p)c[b]=Vd(a,p[b],g,b);return c}function $c(a,c,p){var g={handler:p,src:c,path:[]};return hu([],a,c,g)}function Bl(a,c){var p={handler:c,src:a};return Vd([],a,p)}function Yf(a){var c=a.value;if(Dt(c)){var p=a.result=[];return p.length=c.length,a.copyTo(p,c),!0}return!1}function Kd(a){var c=a.value;return fn(c)?(a.result=new Date(c.getTime()),!0):!1}function tv(a){return a.type===ie}function rv(a){var c=a.value;if(c&&a.isPlain){var p=a.result={};return a.copyTo(p,c),!0}return!1}function _u(a,c){return ft(c,function(p){$c(a,p)}),a}function Wd(a,c,p,g,b,x,k){return _u(Bl(a)||{},Xr[lt](arguments))}var ks=ho(we),Vu;function Ai(){return!Ir&&ya(),(!Vu||Ir.lzy)&&(Vu=Pa(tt(sn,["performance"]).v)),Vu.v}function Hl(){var a=Ai();return a&&a.now?a.now():vu()}var $f=xa("endsWith",Nt,qc);function qc(a,c,p){zt(a)||Qa("'"+tr(a)+"' is not a string");var g=zt(c)?c:Rn(c),b=!rt(p)&&p<a[we]?p:a[we];return Kr(a,b-g[we],b)===g}var Zi=tn("indexOf",Nt),Kv=xa("startsWith",Nt,Jo);function Jo(a,c,p){zt(a)||Qa("'"+tr(a)+"' is not a string");var g=zt(c)?c:Rn(c),b=p>0?p:0;return Kr(a,b,b+g[we])===g}var go="ref",Xi="unref",gu="hasRef",qf="enabled";function Bc(a,c,p){var g=!0,b=a?c(F):F,x;function k(){return g=!1,b&&b[Xi]&&b[Xi](),x}function P(){b&&p(b),b=F}function M(){return b=c(b),g||k(),x}function j(z){!z&&b&&P(),z&&!b&&M()}return x={cancel:P,refresh:M},x[gu]=function(){return b&&b[gu]?b[gu]():g},x[go]=function(){return g=!0,b&&b[go]&&b[go](),x},x[Xi]=k,x=Qr(x,qf,{get:function(){return!!b},set:j}),{h:x,dn:function(){b=F}}}function Hc(a,c,p){var g=Dt(c),b=g?c.length:0,x=(b>0?c[0]:g?D:c)||setTimeout,k=(b>1?c[1]:D)||clearTimeout,P=p[0];p[0]=function(){M.dn(),du(P,D,Xr[lt](arguments))};var M=Bc(a,function(j){if(j){if(j.refresh)return j.refresh(),j;du(k,D,[j])}return du(x,D,p)},function(j){du(k,D,[j])});return M.h}function Ku(a,c){return Hc(!0,D,Xr[lt](arguments))}function Bf(a,c){return Hc(!1,D,Xr[lt](arguments))}(Ff()||{}).Symbol,(Ff()||{}).Reflect;var zl="hasOwnProperty",Hf=function(a,c){return Hf=u.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var b in g)g[zl](b)&&(p[b]=g[b])},Hf(a,c)};function Wu(a,c){typeof c!==t&&c!==null&&Qa("Class extends value "+String(c)+" is not a constructor or null"),Hf(a,c);function p(){this.constructor=a}a[s]=c===null?wi(c):(p[s]=c[s],new p)}function Qi(a,c){for(var p=0,g=c.length,b=a.length;p<g;p++,b++)a[b]=c[p];return a}var zc,yo="constructor",Ei="prototype",Zo="function",Zr="_dynInstFuncs",Os="_isDynProxy",eo="_dynClass",Gc="_dynCls$",Vc="_dynInstChk",Xo=Vc,Gl="_dfOpts",Qo="_unknown_",yu="__proto__",ii="_dyn"+yu,Jd="__dynProto$Gbl",Ju="_dynInstProto",Ba="useBaseInst",zf="setInstFuncs",Zd=Object,Vl=Zd.getPrototypeOf,Kl=Zd.getOwnPropertyNames,Xd=Ff(),Wv=Xd[Jd]||(Xd[Jd]={o:(zc={},zc[zf]=!0,zc[Ba]=!0,zc),n:1e3});function Zu(a){return a&&(a===Zd[Ei]||a===Array[Ei])}function So(a){return Zu(a)||a===Function[Ei]}function to(a){var c;if(a){if(Vl)return Vl(a);var p=a[yu]||a[Ei]||(a[yo]?a[yo][Ei]:null);c=a[ii]||p,En(a,ii)||(delete a[Ju],c=a[ii]=a[Ju]||a[ii],a[Ju]=p)}return c}function wn(a,c){var p=[];if(Kl)p=Kl(a);else for(var g in a)typeof g=="string"&&En(a,g)&&p.push(g);if(p&&p.length>0)for(var b=0;b<p.length;b++)c(p[b])}function Wl(a,c,p){return c!==yo&&typeof a[c]===Zo&&(p||En(a,c))&&c!==yu&&c!==Ei}function Xu(a){Qa("DynamicProto: "+a)}function Qu(a){var c=wi(null);return wn(a,function(p){!c[p]&&Wl(a,p,!1)&&(c[p]=a[p])}),c}function Qd(a,c){for(var p=a.length-1;p>=0;p--)if(a[p]===c)return!0;return!1}function Ri(a,c,p,g){function b(M,j,z){var J=j[z];if(J[Os]&&g){var K=M[Zr]||{};K[Xo]!==!1&&(J=(K[j[eo]]||{})[z]||J)}return function(){return J.apply(M,arguments)}}var x=wi(null);wn(p,function(M){x[M]=b(c,p,M)});for(var k=to(a),P=[];k&&!So(k)&&!Qd(P,k);)wn(k,function(M){!x[M]&&Wl(k,M,!Vl)&&(x[M]=b(c,k,M))}),P.push(k),k=to(k);return x}function Su(a,c,p,g){var b=null;if(a&&En(p,eo)){var x=a[Zr]||wi(null);if(b=(x[p[eo]]||wi(null))[c],b||Xu("Missing ["+c+"] "+Zo),!b[Vc]&&x[Xo]!==!1){for(var k=!En(a,c),P=to(a),M=[];k&&P&&!So(P)&&!Qd(M,P);){var j=P[c];if(j){k=j===g;break}M.push(P),P=to(P)}try{k&&(a[c]=b),b[Vc]=1}catch{x[Xo]=!1}}}return b}function Ms(a,c,p){var g=c[a];return g===p&&(g=to(c)[a]),typeof g!==Zo&&Xu("["+a+"] is not a "+Zo),g}function or(a,c,p,g,b){function x(M,j){var z=function(){var J=Su(this,j,M,z)||Ms(j,M,z);return J.apply(this,arguments)};return z[Os]=1,z}if(!Zu(a)){var k=p[Zr]=p[Zr]||wi(null);if(!Zu(k)){var P=k[c]=k[c]||wi(null);k[Xo]!==!1&&(k[Xo]=!!b),Zu(P)||wn(p,function(M){Wl(p,M,!1)&&p[M]!==g[M]&&(P[M]=p[M],delete p[M],(!En(a,M)||a[M]&&!a[M][Os])&&(a[M]=x(a,M)))})}}}function wo(a,c){if(Vl){for(var p=[],g=to(c);g&&!So(g)&&!Qd(p,g);){if(g===a)return!0;p.push(g),g=to(g)}return!1}return!0}function es(a,c){return En(a,Ei)?a.name||c||Qo:((a||{})[yo]||{}).name||c||Qo}function ki(a,c,p,g){En(a,Ei)||Xu("theClass is an invalid class definition.");var b=a[Ei];wo(b,c)||Xu("["+es(a)+"] not in hierarchy of ["+es(c)+"]");var x=null;En(b,eo)?x=b[eo]:(x=Gc+es(a,"_")+"$"+Wv.n,Wv.n++,b[eo]=x);var k=ki[Gl],P=!!k[Ba];P&&g&&g[Ba]!==void 0&&(P=!!g[Ba]);var M=Qu(c),j=Ri(b,c,M,P);p(c,j);var z=!!Vl&&!!k[zf];z&&g&&(z=!!g[zf]),or(b,x,c,M,z!==!1)}ki[Gl]=Wv.o;var Gf=100,Oi=Gn,wu=Oi({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),pn=Oi({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),oi="toLowerCase",jr="blkVal",dt="length",ec="rdOnly",bo="notify",Ls="warnToConsole",ro="throwInternal",bu="setDf",Mi="watch",Br="logger",Eo="apply",Yr="push",To="splice",Vf="hdlr",Io="cancel",$n="initialize",no="identifier",ts="removeNotificationListener",Aa="addNotificationListener",Ha="isInitialized",Kc="instrumentationKey",tc="INACTIVE",Kf="value",Fs="getNotifyMgr",No="getPlugin",Do="name",rc="iKey",Co="time",Kn="processNext",Wf="getProcessTelContext",nc="pollInternalLogs",Us="enabled",Ti="stopPollingInternalLogs",rs="unload",js="onComplete",Li="version",Wc="loggingLevelConsole",Eu="createNew",wa="teardown",Tu="messageId",Ys="message",Fi="isAsync",ac="diagLog",vn="_doTeardown",sa="update",Ui="getNext",ic="setNextPlugin",ns="protocol",ep="userAgent",Ii="split",Jc="nodeType",Ra="replace",Jf="logInternalMessage",si="type",as="handler",is="status",tp="getResponseHeader",Jl="getAllResponseHeaders",Zf="isChildEvt",Zl="data",xo="getCtx",ui="setCtx",Zc="complete",Jv="itemsReceived",oc="urlString",sc="sendPOST",os="headers",Xl="timeout",zm="setRequestHeader",rp="traceId",Ql="spanId",uc="traceFlags",nv;function Zv(a,c){nv||(nv=Xp("AggregationError",function(g,b){b[dt]>1&&(g.errors=b[1])}));var p=a||"One or more errors occurred.";throw ft(c,function(g,b){p+=`
`.concat(b," > ").concat(tr(g))}),new nv(p,c||[])}var cc="Promise",Xv="rejected";function ef(a,c){return np(a,function(p){return c?c({status:"fulfilled",rejected:!1,value:p}):p},function(p){return c?c({status:Xv,rejected:!0,reason:p}):p})}function np(a,c,p,g){var b=a;try{if(Mr(a))(c||p)&&(b=a.then(c,p));else try{c&&(b=c(a))}catch(x){if(p)b=p(x);else throw x}}finally{g&&ao(b,g)}return b}function ao(a,c){var p=a;return c&&(Mr(a)?a.finally?p=a.finally(c):p=a.then(function(g){return c(),g},function(g){throw c(),g}):c()),p}var av=["pending","resolving","resolved",Xv],Gm="dispatchEvent",Xf;function iv(a){var c;return a&&a.createEvent&&(c=a.createEvent("Event")),!!c&&c.initEvent}function ap(a,c,p,g){var b=ni();!Xf&&(Xf=Pa(!!tt(iv,[b]).v));var x=Xf.v?b.createEvent("Event"):g?new Event(c):{};if(p&&p(x),Xf.v&&x.initEvent(c,!1,!0),x&&a[Gm])a[Gm](x);else{var k=a["on"+c];if(k)k(x);else{var P=sn("console");P&&(P.error||P.log)(c,tr(x))}}}var Xc="unhandledRejection",Qf=Xc.toLowerCase(),lc=10,$s;function Qc(a){return er(a)?a.toString():tr(a)}function Qv(a,c,p){var g=Rs(arguments,3),b=0,x=!1,k,P=[],M=!1,j=null,z;function J(Qe,jt){try{M=!0,j&&j.cancel(),j=null;var yr=a(function(fa,hr){P.push(function(){try{var La=b===2?Qe:jt,Yo=rt(La)?k:er(La)?La(k):La;Mr(Yo)?Yo.then(fa,hr):La?fa(Yo):b===3?hr(Yo):fa(Yo)}catch($o){hr($o)}}),x&&ve()},g);return yr}finally{}}function K(Qe){return J(void 0,Qe)}function ee(Qe){var jt=Qe,yr=Qe;return er(Qe)&&(jt=function(fa){return Qe&&Qe(),fa},yr=function(fa){throw Qe&&Qe(),fa}),J(jt,yr)}function X(){return av[b]}function ve(){if(P.length>0){var Qe=P.slice();P=[],M=!0,j&&j.cancel(),j=null,c(Qe)}}function be(Qe,jt){return function(yr){if(b===jt){if(Qe===2&&Mr(yr)){b=1,yr.then(be(2,1),be(3,1));return}b=Qe,x=!0,k=yr,ve(),!M&&Qe===3&&!j&&(j=Ku(Me,lc))}}}function Me(){if(!M)if(M=!0,Uf())process.emit(Xc,k,z);else{var Qe=ra()||Ff();!$s&&($s=Pa(tt(sn,[cc+"RejectionEvent"]).v)),ap(Qe,Qf,function(jt){return zn(jt,"promise",{g:function(){return z}}),jt.reason=k,jt},!!$s.v)}}z={then:J,catch:K,finally:ee},Qr(z,"state",{get:X}),Yc()&&(z[Si(11)]="IPromise");function Ze(){return"IPromise "+X()+(x?" - "+Qc(k):"")}return z.toString=Ze,function(){er(p)||Qa(cc+": executor is not a function - "+Qc(p));var jt=be(3,0);try{p.call(z,be(2,0),jt)}catch(yr){jt(yr)}}(),z}function ip(a){return function(c){var p=Rs(arguments,1);return a(function(g,b){try{var x=[],k=1;qd(c,function(P,M){P&&(k++,np(P,function(j){x[M]=j,--k===0&&g(x)},b))}),k--,k===0&&g(x)}catch(P){b(P)}},p)}}function el(a){return Pa(function(c){var p=Rs(arguments,1);return a(function(g,b){var x=[],k=1;function P(M,j){k++,ef(M,function(z){z.rejected?x[j]={status:Xv,reason:z.reason}:x[j]={status:"fulfilled",value:z.value},--k===0&&g(x)})}try{Dt(c)?ft(c,P):Di(c)?qd(c,P):Qa("Input is not an iterable"),k--,k===0&&g(x)}catch(M){b(M)}},p)})}function op(a){ft(a,function(c){try{c()}catch{}})}function qs(a){var c=ir(a)?a:0;return function(p){Ku(function(){op(p)},c)}}function Hr(a,c){return Qv(Hr,qs(c),a,c)}var fc;function ba(a,c){!fc&&(fc=Pa(tt(sn,[cc]).v||null));var p=fc.v;if(!p)return Hr(a);er(a)||Qa(cc+": executor is not a function - "+tr(a));var g=0;function b(){return av[g]}var x=new p(function(k,P){function M(z){g=2,k(z)}function j(z){g=3,P(z)}a(M,j)});return Qr(x,"state",{get:b}),x}var sp;function ed(a){return Qv(ed,op,a)}function tl(a,c){return!sp&&(sp=el(ed)),sp.v(a,c)}var dc;function ci(a,c){return!dc&&(dc=Pa(ba)),dc.v.call(this,a,c)}var td=ip(ci),ua=void 0,vr="",Bs="channels",Tn="core",ss="createPerfMgr",pc="disabled",vc="extensionConfig",Hs="extensions",io="processTelemetry",tf="priority",ov="eventsSent",rf="eventsDiscarded",sv="eventsSendRequest",nf="perfEvent",rl="offlineEventsStored",up="offlineBatchSent",na="offlineBatchDrop",nl="getPerfMgr",Ea="domain",Iu="path",cp="Not dynamic - ",rd=/-([a-z])/g,Ta=/([^\w\d_$])/g,nd=/^(\d+[\w\d_$])/;function lp(a){return!nt(a)}function zs(a){var c=a;return c&&zt(c)&&(c=c[Ra](rd,function(p,g){return g.toUpperCase()}),c=c[Ra](Ta,"_"),c=c[Ra](nd,function(p,g){return"_"+g})),c}function pt(a,c){return a&&c?Zi(a,c)!==-1:!1}function us(a){return a&&a.toISOString()||""}function cs(a){return bt(a)?a[Do]:vr}function ji(a,c,p,g,b){var x=p;return a&&(x=a[c],x!==p&&(!b||b(x))&&(!g||g(p))&&(x=p,a[c]=x)),x}function af(a,c,p){var g;return a?(g=a[c],!g&&nt(g)&&(g=rt(p)?{}:p,a[c]=g)):g=rt(p)?{}:p,g}function al(a,c){var p=null,g=null;return er(a)?p=a:g=a,function(){var b=arguments;if(p&&(g=p()),g)return g[c][Eo](g,b)}}function ls(a,c,p){if(a&&c&&ea(a)&&ea(c)){var g=function(x){if(zt(x)){var k=c[x];er(k)?(!p||p(x,!0,c,a))&&(a[x]=al(c,x)):(!p||p(x,!1,c,a))&&(Vi(a,x)&&delete a[x],zn(a,x,{g:function(){return c[x]},s:function(P){c[x]=P}}))}};for(var b in c)g(b)}return a}function oo(a,c,p,g,b){a&&c&&p&&(b!==!1||rt(a[c]))&&(a[c]=al(p,g))}function il(a,c,p,g){return a&&c&&ea(a)&&Dt(p)&&ft(p,function(b){zt(b)&&oo(a,b,c,b,g)}),a}function ad(a){return a&&Uc&&(a=u(Uc({},a))),a}function Gs(a){try{return a.responseText}catch{}return null}function of(a,c){return a?"XDomainRequest,Response:"+Gs(a)||"":c}function ol(a,c){return a?"XMLHttpRequest,Status:"+a[is]+",Response:"+Gs(a)||a.response||"":c}function sf(a,c){return c&&(ir(c)?a=[c].concat(a):Dt(c)&&(a=c.concat(a))),a}var fp="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",dp="withCredentials",uv="timeout";function pp(a,c,p,g,b,x){g===void 0&&(g=!1),b===void 0&&(b=!1);function k(M,j,z){try{M[j]=z}catch{}}var P=new XMLHttpRequest;return g&&k(P,fp,g),p&&k(P,dp,p),P.open(a,c,!b),p&&k(P,dp,p),!b&&x&&k(P,uv,x),P}function Nu(a){var c={};if(zt(a)){var p=qa(a)[Ii](/[\r\n]+/);ft(p,function(g){if(g){var b=g.indexOf(": ");if(b!==-1){var x=qa(g.substring(0,b))[oi](),k=qa(g.substring(b+1));c[x]=k}else c[qa(g)]=1}})}return c}function mc(a,c,p){if(!a[p]&&c&&c[tp]){var g=c[tp](p);g&&(a[p]=qa(g))}return a}var uf="kill-duration",Po="kill-duration-seconds",fs="time-delta-millis";function Ao(a,c){var p={};return a[Jl]?p=Nu(a[Jl]()):c&&(p=mc(p,a,fs),p=mc(p,a,uf),p=mc(p,a,Po)),p}var Ro="documentMode",hc="location",vp="console",_c="JSON",mp="crypto",hp="msCrypto",id="ReactNative",ds="msie",ko="trident/",Oo="XMLHttpRequest",od=null,cf=null,sl=!1,ka=null,ps=null;function sd(a,c){var p=!1;if(a){try{if(p=c in a,!p){var g=a[s];g&&(p=c in g)}}catch{}if(!p)try{var b=new a;p=!rt(b[c])}catch{}}return p}function za(a){sl=a}function Vs(a){if(a&&sl){var c=sn("__mockLocation");if(c)return c}return typeof location===r&&location?location:sn(hc)}function lf(){return typeof console!==n?console:sn(vp)}function vs(){return!!(typeof JSON===r&&JSON||sn(_c)!==null)}function Ia(){return vs()?JSON||sn(_c):null}function Du(){return sn(mp)}function ud(){return sn(hp)}function ul(){var a=yi();return a&&a.product?a.product===id:!1}function Cu(){var a=yi();if(a&&(a[ep]!==cf||od===null)){cf=a[ep];var c=(cf||vr)[oi]();od=pt(c,ds)||pt(c,ko)}return od}function em(a){if(a===void 0&&(a=null),!a){var c=yi()||{};a=c?(c.userAgent||vr)[oi]():vr}var p=(a||vr)[oi]();if(pt(p,ds)){var g=ni()||{};return Math.max(parseInt(p[Ii](ds)[1]),g[Ro]||0)}else if(pt(p,ko)){var b=parseInt(p[Ii](ko)[1]);if(b)return b+4}return null}function cv(a){return(ps===null||a===!1)&&(ps=Zp()&&!!yi().sendBeacon),ps}function tm(a){var c=!1;try{c=!!sn("fetch");var p=sn("Request");c&&a&&p&&(c=sd(p,"keepalive"))}catch{}return c}function cl(){return ka===null&&(ka=typeof XDomainRequest!==n,ka&&ff()&&(ka=ka&&!sd(sn(Oo),"withCredentials"))),ka}function ff(){var a=!1;try{var c=sn(Oo);a=!!c}catch{}return a}function lv(a,c){if(a)for(var p=0;p<a[dt];p++){var g=a[p];if(g[Do]&&g[Do]===c)return g}return{}}function Vm(a){var c=ni();return c&&a?lv(c.querySelectorAll("meta"),a).content:null}function cd(a){var c,p=Ai();if(p){var g=p.getEntriesByType("navigation")||[];c=lv((g[dt]>0?g[0]:{}).serverTiming,a).description}return c}var _p=4294967296,ll=4294967295,xu=123456789,gp=987654321,ms=!1,ld=xu,df=gp;function hs(a){a<0&&(a>>>=0),ld=xu+a&ll,df=gp-a&ll,ms=!0}function gc(){try{var a=vu()&2147483647;hs((Math.random()*_p^a)+a)}catch{}}function rm(a){return a>0?Math.floor(fl()/ll*(a+1))>>>0:0}function fl(a){var c=0,p=Du()||ud();return p&&p.getRandomValues&&(c=p.getRandomValues(new Uint32Array(1))[0]&ll),c===0&&Cu()&&(ms||gc(),c=Km()&ll),c===0&&(c=Math.floor(_p*Math.random()|0)),a||(c>>>=0),c}function Km(a){df=36969*(df&65535)+(df>>16)&ll,ld=18e3*(ld&65535)+(ld>>16)&ll;var c=(df<<16)+(ld&65535)>>>0&ll|0;return a||(c>>>=0),c}function nm(a){a===void 0&&(a=22);for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=fl()>>>0,g=0,b=vr;b[dt]<a;)g++,b+=c.charAt(p&63),p>>>=6,g===5&&(p=(fl()<<2&4294967295|p&3)>>>0,g=0);return b}var pf="3.3.5",fv="."+nm(6),am=0;function Pu(a){return a[Jc]===1||a[Jc]===9||!+a[Jc]}function so(a,c){var p=c[a.id];if(!p){p={};try{Pu(c)&&zn(c,a.id,{e:!1,v:p})}catch{}}return p}function Ks(a,c){return c===void 0&&(c=!1),zs(a+am+++(c?"."+pf:vr)+fv)}function Au(a){var c={id:Ks("_aiData-"+(a||vr)+"."+pf),accept:function(p){return Pu(p)},get:function(p,g,b,x){var k=p[c.id];return k?k[zs(g)]:(x&&(k=so(c,p),k[zs(g)]=b),b)},kill:function(p,g){if(p&&p[g])try{delete p[g]}catch{}}};return c}function dl(a){return a&&ea(a)&&(a.isVal||a.fb||Vi(a,"v")||Vi(a,"mrg")||Vi(a,"ref")||a.set)}function pl(a,c,p){var g,b=p.dfVal||Gt;if(c&&p.fb){var x=p.fb;Dt(x)||(x=[x]);for(var k=0;k<x[dt];k++){var P=x[k],M=c[P];if(b(M)?g=M:a&&(M=a.cfg[P],b(M)&&(g=M),a.set(a.cfg,Rn(P),M)),b(g))break}}return!b(g)&&b(p.v)&&(g=p.v),g}function fd(a,c,p){var g=p;if(p&&dl(p)&&(g=pl(a,c,p)),g){dl(g)&&(g=fd(a,c,g));var b;Dt(g)?(b=[],b[dt]=g[dt]):bi(g)&&(b={}),b&&(Lr(g,function(x,k){k&&dl(k)&&(k=fd(a,c,k)),b[x]=k}),g=b)}return g}function vf(a,c,p,g){var b,x,k,P=g,M,j,z,J;dl(P)?(b=P.isVal,x=P.set,z=P[ec],J=P[jr],M=P.mrg,j=P.ref,!j&&rt(j)&&(j=!!M),k=pl(a,c,P)):k=g,J&&a[jr](c,p);var K,ee=!0,X=c[p];(X||!nt(X))&&(K=X,ee=!1,b&&K!==k&&!b(K)&&(K=k,ee=!0),x&&(K=x(K,k,c),ee=K===k)),ee?k?K=fd(a,c,k):K=k:(bi(K)||Dt(k))&&M&&k&&(bi(k)||Dt(k))&&Lr(k,function(ve,be){vf(a,K,ve,be)}),a.set(c,p,K),j&&a.ref(c,p),z&&a[ec](c,p)}var Mo=jl("[[ai_dynCfg_1]]"),yc=jl("[[ai_blkDynCfg_1]]"),im=jl("[[ai_frcDynCfg_1]]");function om(a){if(a){var c;if(Dt(a)?(c=[],c[dt]=a[dt]):bi(a)&&(c={}),c)return Lr(a,function(p,g){c[p]=om(g)}),c}return a}function yp(a){if(a){var c=a[Mo]||a;if(c.cfg&&(c.cfg===a||c.cfg[Mo]===c))return c}return null}function Sp(a){if(a&&(bi(a)||Dt(a)))try{a[yc]=!0}catch{}return a}function Lo(a){if(a)try{a[im]=!0}catch{}return a}function Ru(a,c,p){var g=!1;return p&&!a[c.blkVal]&&(g=p[im],!g&&!p[yc]&&(g=bi(p)||Dt(p))),g}function vl(a){Qa("InvalidAccess:"+a)}var sm=["push","pop","shift","unshift","splice"],wp=function(a,c,p,g){a&&a[ro](3,108,"".concat(p," [").concat(c,"] failed - ")+tr(g))};function um(a,c,p){Dt(c)&&ft(sm,function(g){var b=c[g];c[g]=function(){for(var x=[],k=0;k<arguments.length;k++)x[k]=arguments[k];var P=b[Eo](this,x);return dd(a,c,p,"Patching"),P}})}function dv(a,c){var p=on(a,c);return p&&p.get}function bp(a,c,p,g){var b={n:p,h:[],trk:function(j){j&&j.fn&&(Sa(b.h,j)===-1&&b.h[Yr](j),a.trk(j,b))},clr:function(j){var z=Sa(b.h,j);z!==-1&&b.h[To](z,1)}},x=!0,k=!1;function P(){x&&(k=k||Ru(P,a,g),g&&!g[Mo]&&k&&(g=dd(a,g,p,"Converting")),x=!1);var j=a.act;return j&&b.trk(j),g}P[a.prop]={chng:function(){a.add(b)}};function M(j){if(g!==j){P[a.ro]&&!a.upd&&vl("["+p+"] is read-only:"+tr(c)),x&&(k=k||Ru(P,a,g),x=!1);var z=k&&P[a.rf];if(k)if(z){Lr(g,function(K){g[K]=j?j[K]:ua});try{Lr(j,function(K,ee){Sc(a,g,K,ee)}),j=g}catch(K){wp((a.hdlr||{})[Br],p,"Assigning",K),k=!1}}else g&&g[Mo]&&Lr(g,function(K){var ee=dv(g,K);if(ee){var X=ee[a.prop];X&&X.chng()}});if(j!==g){var J=j&&Ru(P,a,j);!z&&J&&(j=dd(a,j,p,"Converting")),g=j,k=J}a.add(b)}}zn(c,b.n,{g:P,s:M})}function Sc(a,c,p,g){if(c){var b=dv(c,p),x=b&&!!b[a.prop];x?c[p]=g:bp(a,c,p,g)}return c}function uo(a,c,p,g){if(c){var b=dv(c,p),x=b&&!!b[a.prop],k=g&&g[0],P=g&&g[1],M=g&&g[2];if(!x){if(M)try{Sp(c)}catch(j){wp((a.hdlr||{})[Br],p,"Blocking",j)}try{Sc(a,c,p,c[p]),b=dv(c,p)}catch(j){wp((a.hdlr||{})[Br],p,"State",j)}}k&&(b[a.rf]=k),P&&(b[a.ro]=P),M&&(b[a.blkVal]=!0)}return c}function dd(a,c,p,g){try{Lr(c,function(b,x){Sc(a,c,b,x)}),c[Mo]||(Qr(c,Mo,{get:function(){return a[Vf]}}),um(a,c,p))}catch(b){wp((a.hdlr||{})[Br],p,g,b)}return c}var ml="[[ai_",Fo="]]";function Eh(a){var c,p=Gu(ml+"get"+a.uid+Fo),g=Gu(ml+"ro"+a.uid+Fo),b=Gu(ml+"rf"+a.uid+Fo),x=Gu(ml+"blkVal"+a.uid+Fo),k=Gu(ml+"dtl"+a.uid+Fo),P=null,M=null,j;function z(X,ve){var be=j.act;try{j.act=X,X&&X[k]&&(ft(X[k],function(Ze){Ze.clr(X)}),X[k]=[]),ve({cfg:a.cfg,set:a.set.bind(a),setDf:a[bu].bind(a),ref:a.ref.bind(a),rdOnly:a[ec].bind(a)})}catch(Ze){var Me=a[Br];throw Me&&Me[ro](1,107,tr(Ze)),Ze}finally{j.act=be||null}}function J(){if(P){var X=P;P=null,M&&M[Io](),M=null;var ve=[];if(ft(X,function(be){if(be&&(be[k]&&(ft(be[k],function(Me){Me.clr(be)}),be[k]=null),be.fn))try{z(be,be.fn)}catch(Me){ve[Yr](Me)}}),P)try{J()}catch(be){ve[Yr](be)}ve[dt]>0&&Zv("Watcher error(s): ",ve)}}function K(X){if(X&&X.h[dt]>0){P||(P=[]),M||(M=Ku(function(){M=null,J()},0));for(var ve=0;ve<X.h[dt];ve++){var be=X.h[ve];be&&Sa(P,be)===-1&&P[Yr](be)}}}function ee(X,ve){if(X){var be=X[k]=X[k]||[];Sa(be,ve)===-1&&be[Yr](ve)}}return j=(c={prop:p,ro:g,rf:b},c[jr]=x,c[Vf]=a,c.add=K,c[bo]=J,c.use=z,c.trk=ee,c),j}function Ep(a,c){var p={fn:c,rm:function(){p.fn=null,a=null,c=null}};return zn(p,"toJSON",{v:function(){return"WatcherHandler"+(p.fn?"":"[X]")}}),a.use(p,c),p}function Wm(a,c,p){var g,b=yp(c);if(b)return b;var x=Ks("dyncfg",!0),k=c&&p!==!1?c:om(c),P;function M(){P[bo]()}function j(Me,Ze,Qe){try{Me=Sc(P,Me,Ze,Qe)}catch(jt){wp(a,Ze,"Setting value",jt)}return Me[Ze]}function z(Me){return Ep(P,Me)}function J(Me,Ze){P.use(null,function(Qe){var jt=P.upd;try{rt(Ze)||(P.upd=Ze),Me(Qe)}finally{P.upd=jt}})}function K(Me,Ze){var Qe;return uo(P,Me,Ze,(Qe={},Qe[0]=!0,Qe))[Ze]}function ee(Me,Ze){var Qe;return uo(P,Me,Ze,(Qe={},Qe[1]=!0,Qe))[Ze]}function X(Me,Ze){var Qe;return uo(P,Me,Ze,(Qe={},Qe[2]=!0,Qe))[Ze]}function ve(Me,Ze){return Ze&&Lr(Ze,function(Qe,jt){vf(be,Me,Qe,jt)}),Me}var be=(g={uid:null,cfg:k},g[Br]=a,g[bo]=M,g.set=j,g[bu]=ve,g[Mi]=z,g.ref=K,g[ec]=ee,g[jr]=X,g._block=J,g);return zn(be,"uid",{c:!1,e:!1,w:!1,v:x}),P=Eh(be),dd(P,k,"config","Creating"),be}function Th(a,c){a?(a[Ls](c),a[ro](2,108,c)):vl(c)}function Oa(a,c,p,g){var b=Wm(p,a||{},g);return c&&b[bu](b.cfg,c),b}function pd(a,c,p){var g=a[Mo]||a;return g.cfg&&(g.cfg===a||g.cfg[Mo]===g)?g[Mi](c):(Th(p,cp+tr(a)),Oa(a,null,p)[Mi](c))}function vd(a,c){if(a&&a[rs])return a[rs](c)}function cm(a,c,p){var g;return p||(g=ci(function(b){p=b})),a&&ks(a)>0?ef(vd(a[0],c),function(){cm(Rs(a,1),c,p)}):p(),g}var hl=500,li="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function co(a){return{mrg:!0,v:a}}var md=[ov,rf,sv,nf],ku=null,wc;function _s(a,c){return function(){var p=arguments,g=lm(c);if(g){var b=g.listener;b&&b[a]&&b[a][Eo](b,p)}}}function pv(){var a=sn("Microsoft");return a&&(ku=a.ApplicationInsights),ku}function lm(a){var c=ku;return!c&&a.disableDbgExt!==!0&&(c=ku||pv()),c?c.ChromeDbgExt:null}function vt(a){if(!wc){wc={};for(var c=0;c<md[dt];c++)wc[md[c]]=_s(md[c],a)}return wc}var Ou,Ws="warnToConsole",mf="AI (Internal): ",fm="AI: ",bc="AITR_",hd={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},gs=(Ou={},Ou[0]=null,Ou[1]="errorToConsole",Ou[2]=Ws,Ou[3]="debugToConsole",Ou);function dm(a){return a?'"'+a[Ra](/\"/g,vr)+'"':vr}function Tp(a,c){var p=lf();if(p){var g="log";p[a]&&(g=a),er(p[g])&&p[g](c)}}var _l=function(){function a(c,p,g,b){g===void 0&&(g=!1);var x=this;x[Tu]=c,x[Ys]=(g?fm:mf)+c;var k=vr;vs()&&(k=Ia().stringify(b));var P=(p?" message:"+dm(p):vr)+(b?" props:"+dm(k):vr);x[Ys]+=P}return a.dataType="MessageData",a}();function Ec(a,c){return(a||{})[Br]||new Tc(c)}var Tc=function(){function a(c){this.identifier="DiagnosticLogger",this.queue=[];var p=0,g={},b,x,k,P,M;ki(a,this,function(j){M=J(c||{}),j.consoleLoggingLevel=function(){return b},j[ro]=function(X,ve,be,Me,Ze){Ze===void 0&&(Ze=!1);var Qe=new _l(ve,be,Ze,Me);if(P)throw tr(Qe);var jt=gs[X]||Ws;if(rt(Qe[Ys]))ee("throw"+(X===1?"Critical":"Warning"),Qe);else{if(Ze){var yr=+Qe[Tu];!g[yr]&&b>=X&&(j[jt](Qe[Ys]),g[yr]=!0)}else b>=X&&j[jt](Qe[Ys]);z(X,Qe)}},j.debugToConsole=function(X){Tp("debug",X),ee("warning",X)},j[Ls]=function(X){Tp("warn",X),ee("warning",X)},j.errorToConsole=function(X){Tp("error",X),ee("error",X)},j.resetInternalMessageCount=function(){p=0,g={}},j[Jf]=z,j[rs]=function(X){M&&M.rm(),M=null};function z(X,ve){if(!K()){var be=!0,Me=bc+ve[Tu];if(g[Me]?be=!1:g[Me]=!0,be&&(X<=x&&(j.queue[Yr](ve),p++,ee(X===1?"error":"warn",ve)),p===k)){var Ze="Internal events throttle limit per PageView reached for this app.",Qe=new _l(23,Ze,!1);j.queue[Yr](Qe),X===1?j.errorToConsole(Ze):j[Ls](Ze)}}}function J(X){return pd(Oa(X,hd,j).cfg,function(ve){var be=ve.cfg;b=be[Wc],x=be.loggingLevelTelemetry,k=be.maxMessageLimit,P=be.enableDebug})}function K(){return p>=k}function ee(X,ve){var be=lm(c||{});be&&be[ac]&&be[ac](X,ve)}})}return a.__ieDyn=1,a}();function vv(a){return a||new Tc}function Wr(a,c,p,g,b,x){x===void 0&&(x=!1),vv(a)[ro](c,p,g,b,x)}function ys(a,c){vv(a)[Ls](c)}function mv(a,c,p){vv(a)[Jf](c,p)}var hv,Js,Ip="toGMTString",_v="toUTCString",gv="cookie",_d="expires",gd="isCookieUseDisabled",gl="disableCookiesUsage",Ic="_ckMgr",Np=null,yl=null,yv=null,lo,Sv={},yd={},pm=(hv={cookieCfg:co((Js={},Js[Ea]={fb:"cookieDomain",dfVal:lp},Js.path={fb:"cookiePath",dfVal:lp},Js.enabled=ua,Js.ignoreCookies=ua,Js.blockedCookies=ua,Js)),cookieDomain:ua,cookiePath:ua},hv[gl]=ua,hv);function Ss(){!lo&&(lo=Lf(function(){return ni()}))}function Jm(a,c){var p=ws[Ic]||yd[Ic];return p||(p=ws[Ic]=ws(a,c),yd[Ic]=p),p}function Mu(a){return a?a.isEnabled():!0}function wv(a,c){return c&&a&&Dt(a.ignoreCookies)?Sa(a.ignoreCookies,c)!==-1:!1}function Sl(a,c){return c&&a&&Dt(a.blockedCookies)&&Sa(a.blockedCookies,c)!==-1?!0:wv(a,c)}function vm(a,c){var p=c[Us];if(nt(p)){var g=void 0;rt(a[gd])||(g=!a[gd]),rt(a[gl])||(g=!a[gl]),p=g}return p}function Uo(a,c){var p;if(a)p=a.getCookieMgr();else if(c){var g=c.cookieCfg;g&&g[Ic]?p=g[Ic]:p=ws(c)}return p||(p=Jm(c,(a||{})[Br])),p}function ws(a,c){var p,g,b,x,k,P,M,j,z;a=Oa(a||yd,null,c).cfg,k=pd(a,function(K){K[bu](K.cfg,pm),g=K.ref(K.cfg,"cookieCfg"),b=g[Iu]||"/",x=g[Ea],P=vm(a,g)!==!1,M=g.getCookie||sr,j=g.setCookie||Yi,z=g.delCookie||Yi},c);var J=(p={isEnabled:function(){var K=vm(a,g)!==!1&&P&&kn(c),ee=yd[Ic];return K&&ee&&J!==ee&&(K=Mu(ee)),K},setEnabled:function(K){P=K!==!1,g[Us]=K},set:function(K,ee,X,ve,be){var Me=!1;if(Mu(J)&&!Sl(g,K)){var Ze={},Qe=qa(ee||vr),jt=Zi(Qe,";");if(jt!==-1&&(Qe=qa(Vn(ee,jt)),Ze=hf(Kr(ee,jt+1))),ji(Ze,Ea,ve||x,Xa,rt),!nt(X)){var yr=Cu();if(rt(Ze[_d])){var fa=vu(),hr=fa+X*1e3;if(hr>0){var La=new Date;La.setTime(hr),ji(Ze,_d,wl(La,yr?Ip:_v)||wl(La,yr?Ip:_v)||vr,Xa)}}yr||ji(Ze,"max-age",vr+X,null,rt)}var Yo=Vs();Yo&&Yo[ns]==="https:"&&(ji(Ze,"secure",null,null,rt),yl===null&&(yl=!$i((yi()||{})[ep])),yl&&ji(Ze,"SameSite","None",null,rt)),ji(Ze,Iu,be||b,null,rt),j(K,Sd(Qe,Ze)),Me=!0}return Me},get:function(K){var ee=vr;return Mu(J)&&!wv(g,K)&&(ee=M(K)),ee},del:function(K,ee){var X=!1;return Mu(J)&&(X=J.purge(K,ee)),X},purge:function(K,ee){var X,ve=!1;if(kn(c)){var be=(X={},X[Iu]=ee||"/",X[_d]="Thu, 01 Jan 1970 00:00:01 GMT",X);Cu()||(be["max-age"]="0"),z(K,Sd(vr,be)),ve=!0}return ve}},p[rs]=function(K){k&&k.rm(),k=null},p);return J[Ic]=J,J}function kn(a){if(Np===null){Np=!1,!lo&&Ss();try{var c=lo.v||{};Np=c[gv]!==void 0}catch(p){Wr(a,2,68,"Cannot access document.cookie - "+cs(p),{exception:tr(p)})}}return Np}function hf(a){var c={};if(a&&a[dt]){var p=qa(a)[Ii](";");ft(p,function(g){if(g=qa(g||vr),g){var b=Zi(g,"=");b===-1?c[g]=null:c[qa(Vn(g,b))]=qa(Kr(g,b+1))}})}return c}function wl(a,c){return er(a[c])?a[c]():null}function Sd(a,c){var p=a||vr;return Lr(c,function(g,b){p+="; "+g+(nt(b)?vr:"="+b)}),p}function sr(a){var c=vr;if(!lo&&Ss(),lo.v){var p=lo.v[gv]||vr;yv!==p&&(Sv=hf(p),yv=p),c=qa(Sv[a]||vr)}return c}function Yi(a,c){!lo&&Ss(),lo.v&&(lo.v[gv]=a+"="+c)}function $i(a){return zt(a)?!!(pt(a,"CPU iPhone OS 12")||pt(a,"iPad; CPU OS 12")||pt(a,"Macintosh; Intel Mac OS X 10_14")&&pt(a,"Version/")&&pt(a,"Safari")||pt(a,"Macintosh; Intel Mac OS X 10_14")&&$f(a,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||pt(a,"Chrome/5")||pt(a,"Chrome/6")||pt(a,"UnrealEngine")&&!pt(a,"Chrome")||pt(a,"UCBrowser/12")||pt(a,"UCBrowser/11")):!1}var Na={perfEvtsSendAll:!1};function bl(a){a.h=null;var c=a.cb;a.cb=[],ft(c,function(p){tt(p.fn,[p.arg])})}function mn(a,c,p,g){ft(a,function(b){b&&b[c]&&(p?(p.cb[Yr]({fn:g,arg:b}),p.h=p.h||Ku(bl,0,p)):tt(g,[b]))})}var El=function(){function a(c){this.listeners=[];var p,g,b=[],x={h:null,cb:[]},k=Oa(c,Na);g=k[Mi](function(P){p=!!P.cfg.perfEvtsSendAll}),ki(a,this,function(P){zn(P,"listeners",{g:function(){return b}}),P[Aa]=function(M){b[Yr](M)},P[ts]=function(M){for(var j=Sa(b,M);j>-1;)b[To](j,1),j=Sa(b,M)},P[ov]=function(M){mn(b,ov,x,function(j){j[ov](M)})},P[rf]=function(M,j){mn(b,rf,x,function(z){z[rf](M,j)})},P[sv]=function(M,j){mn(b,sv,j?x:null,function(z){z[sv](M,j)})},P[nf]=function(M){M&&(p||!M[Zf]())&&mn(b,nf,null,function(j){M[Fi]?Ku(function(){return j[nf](M)},0):j[nf](M)})},P[rl]=function(M){M&&M[dt]&&mn(b,rl,x,function(j){j[rl](M)})},P[up]=function(M){M&&M[Zl]&&mn(b,up,x,function(j){j[up](M)})},P[na]=function(M,j){if(M>0){var z=j||0;mn(b,na,x,function(J){J[na](M,z)})}},P[rs]=function(M){var j=function(){g&&g.rm(),g=null,b=[],x.h&&x.h[Io](),x.h=null,x.cb=[]},z;if(mn(b,"unload",null,function(J){var K=J[rs](M);K&&(z||(z=[]),z[Yr](K))}),z)return ci(function(J){return ef(td(z),function(){j(),J()})});j()}})}return a.__ieDyn=1,a}(),Zs="ctx",Dp="ParentContextKey",Xs="ChildrenContextKey",bv=null,Lu=function(){function a(c,p,g){var b=this;if(b.start=vu(),b[Do]=c,b[Fi]=g,b[Zf]=function(){return!1},er(p)){var x;zn(b,"payload",{g:function(){return!x&&er(p)&&(x=p(),p=null),x}})}b[xo]=function(k){return k?k===a[Dp]||k===a[Xs]?b[k]:(b[Zs]||{})[k]:null},b[ui]=function(k,P){if(k)if(k===a[Dp])b[k]||(b[Zf]=function(){return!0}),b[k]=P;else if(k===a[Xs])b[k]=P;else{var M=b[Zs]=b[Zs]||{};M[k]=P}},b[Zc]=function(){var k=0,P=b[xo](a[Xs]);if(Dt(P))for(var M=0;M<P[dt];M++){var j=P[M];j&&(k+=j[Co])}b[Co]=vu()-b.start,b.exTime=b[Co]-k,b[Zc]=function(){}}}return a.ParentContextKey="parent",a.ChildrenContextKey="childEvts",a}(),Ev=function(){function a(c){this.ctx={},ki(a,this,function(p){p.create=function(g,b,x){return new Lu(g,b,x)},p.fire=function(g){g&&(g[Zc](),c&&er(c[nf])&&c[nf](g))},p[ui]=function(g,b){if(g){var x=p[Zs]=p[Zs]||{};x[g]=b}},p[xo]=function(g){return(p[Zs]||{})[g]}})}return a.__ieDyn=1,a}(),Tv="CoreUtils.doPerf";function f(a,c,p,g,b){if(a){var x=a;if(x[nl]&&(x=x[nl]()),x){var k=void 0,P=x[xo](Tv);try{if(k=x.create(c(),g,b),k){if(P&&k[ui]&&(k[ui](Lu[Dp],P),P[xo]&&P[ui])){var M=P[xo](Lu[Xs]);M||(M=[],P[ui](Lu[Xs],M)),M[Yr](k)}return x[ui](Tv,k),p(k)}}catch(j){k&&k[ui]&&k[ui]("exception",j)}finally{k&&x.fire(k),x[ui](Tv,P)}}}return p()}function m(){return bv}function y(){var a=N();return Kr(a,0,8)+"-"+Kr(a,8,12)+"-"+Kr(a,12,16)+"-"+Kr(a,16,20)+"-"+Kr(a,20)}function N(){for(var a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],c=vr,p,g=0;g<4;g++)p=fl(),c+=a[p&15]+a[p>>4&15]+a[p>>8&15]+a[p>>12&15]+a[p>>16&15]+a[p>>20&15]+a[p>>24&15]+a[p>>28&15];var b=a[8+(fl()&3)|0];return _o(c,0,8)+_o(c,9,4)+"4"+_o(c,13,3)+b+_o(c,16,3)+_o(c,19,12)}var U=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,G="00",V="ff",te="00000000000000000000000000000000",pe="0000000000000000",he=1;function We(a,c,p){return a&&a[dt]===c&&a!==p?!!a.match(/^[\da-f]*$/i):!1}function Ot(a,c,p){return We(a,c)?a:p}function rr(a){(isNaN(a)||a<0||a>255)&&(a=1);for(var c=a.toString(16);c[dt]<2;)c="0"+c;return c}function ur(a,c,p,g){var b;return b={},b[Li]=We(g,2,V)?g:G,b[rp]=nr(a)?a:N(),b[Ql]=Ut(c)?c:Vn(N(),16),b.traceFlags=p>=0&&p<=255?p:1,b}function st(a,c){var p;if(!a||(Dt(a)&&(a=a[0]||""),!a||!zt(a)||a[dt]>8192))return null;if(a.indexOf(",")!==-1){var g=a[Ii](",");a=g[c>0&&g[dt]>c?c:0]}var b=U.exec(qa(a));return!b||b[1]===V||b[2]===te||b[3]===pe?null:(p={version:(b[1]||vr)[oi](),traceId:(b[2]||vr)[oi](),spanId:(b[3]||vr)[oi]()},p[uc]=parseInt(b[4],16),p)}function nr(a){return We(a,32,te)}function Ut(a){return We(a,16,pe)}function Nr(a){return!(!a||!We(a[Li],2,V)||!We(a[rp],32,te)||!We(a[Ql],16,pe)||!We(rr(a[uc]),2))}function Dr(a){return Nr(a)?(a[uc]&he)===he:!1}function Pt(a){if(a){var c=rr(a[uc]);We(c,2)||(c="01");var p=a[Li]||G;return p!=="00"&&p!=="ff"&&(p=G),"".concat(p.toLowerCase(),"-").concat(Ot(a.traceId,32,te).toLowerCase(),"-").concat(Ot(a.spanId,16,pe).toLowerCase(),"-").concat(c.toLowerCase())}return""}function In(a){var c="traceparent",p=st(Vm(c),a);return p||(p=st(cd(c),a)),p}var _f=Au("plugin");function Nn(a){return _f.get(a,"state",{},!0)}function qi(a,c){for(var p=[],g=null,b=a[Ui](),x;b;){var k=b[No]();if(k){g&&g[ic]&&k[io]&&g[ic](k),x=Nn(k);var P=!!x[Ha];k[Ha]&&(P=k[Ha]()),P||p[Yr](k),g=k,b=b[Ui]()}}ft(p,function(M){var j=a[Tn]();M[$n](a.getCfg(),j,c,a[Ui]()),x=Nn(M),!M[Tn]&&!x[Tn]&&(x[Tn]=j),x[Ha]=!0,delete x[wa]})}function wd(a){return a.sort(function(c,p){var g=0;if(p){var b=p[io];c[io]?g=b?c[tf]-p[tf]:1:b&&(g=-1)}else g=c?1:-1;return g})}function Iv(a){var c={};return{getName:function(){return c[Do]},setName:function(p){a&&a.setName(p),c[Do]=p},getTraceId:function(){return c[rp]},setTraceId:function(p){a&&a.setTraceId(p),nr(p)&&(c[rp]=p)},getSpanId:function(){return c[Ql]},setSpanId:function(p){a&&a.setSpanId(p),Ut(p)&&(c[Ql]=p)},getTraceFlags:function(){return c[uc]},setTraceFlags:function(p){a&&a.setTraceFlags(p),c[uc]=p}}}var bd="TelemetryPluginChain",Ed="_hasRun",Cp="_getTelCtx",mm=0;function ke(a,c,p){for(;a;){if(a[No]()===p)return a;a=a[Ui]()}return hn([p],c.config||{},c)}function Et(a,c,p,g){var b=null,x=[];c||(c=Oa({},null,p[Br])),g!==null&&(b=g?ke(a,p,g):a);var k={_next:M,ctx:{core:function(){return p},diagLog:function(){return Ec(p,c.cfg)},getCfg:function(){return c.cfg},getExtCfg:z,getConfig:J,hasNext:function(){return!!b},getNext:function(){return b},setNext:function(ee){b=ee},iterate:K,onComplete:P}};function P(ee,X){for(var ve=[],be=2;be<arguments.length;be++)ve[be-2]=arguments[be];ee&&x[Yr]({func:ee,self:rt(X)?k.ctx:X,args:ve})}function M(){var ee=b;if(b=ee?ee[Ui]():null,!ee){var X=x;X&&X[dt]>0&&(ft(X,function(ve){try{ve.func.call(ve.self,ve.args)}catch(be){Wr(p[Br],2,73,"Unexpected Exception during onComplete - "+tr(be))}}),x=[])}return ee}function j(ee,X){var ve=null,be=c.cfg;if(be&&ee){var Me=be[vc];!Me&&X&&(Me={}),be[vc]=Me,Me=c.ref(be,vc),Me&&(ve=Me[ee],!ve&&X&&(ve={}),Me[ee]=ve,ve=c.ref(Me,ee))}return ve}function z(ee,X){var ve=j(ee,!0);return X&&Lr(X,function(be,Me){if(nt(ve[be])){var Ze=c.cfg[be];(Ze||!nt(Ze))&&(ve[be]=Ze)}vf(c,ve,be,Me)}),c[bu](ve,X)}function J(ee,X,ve){ve===void 0&&(ve=!1);var be,Me=j(ee,!1),Ze=c.cfg;return Me&&(Me[X]||!nt(Me[X]))?be=Me[X]:(Ze[X]||!nt(Ze[X]))&&(be=Ze[X]),be||!nt(be)?be:ve}function K(ee){for(var X;X=k._next();){var ve=X[No]();ve&&ee(ve)}}return k}function qt(a,c,p,g){var b=Oa(c),x=Et(a,b,p,g),k=x.ctx;function P(j){var z=x._next();return z&&z[io](j,k),!z}function M(j,z){return j===void 0&&(j=null),Dt(j)&&(j=hn(j,b.cfg,p,z)),qt(j||k[Ui](),b.cfg,p,z)}return k[Kn]=P,k[Eu]=M,k}function zr(a,c,p){var g=Oa(c.config),b=Et(a,g,c,p),x=b.ctx;function k(M){var j=b._next();return j&&j[rs](x,M),!j}function P(M,j){return M===void 0&&(M=null),Dt(M)&&(M=hn(M,g.cfg,c,j)),zr(M||x[Ui](),c,j)}return x[Kn]=k,x[Eu]=P,x}function un(a,c,p){var g=Oa(c.config),b=Et(a,g,c,p),x=b.ctx;function k(M){return x.iterate(function(j){er(j[sa])&&j[sa](x,M)})}function P(M,j){return M===void 0&&(M=null),Dt(M)&&(M=hn(M,g.cfg,c,j)),un(M||x[Ui](),c,j)}return x[Kn]=k,x[Eu]=P,x}function hn(a,c,p,g){var b=null,x=!g;if(Dt(a)&&a[dt]>0){var k=null;ft(a,function(P){if(!x&&g===P&&(x=!0),x&&P&&er(P[io])){var M=ca(P,c,p);b||(b=M),k&&k._setNext(M),k=M}})}return g&&!b?hn([g],c,p):b}function ca(a,c,p){var g=null,b=er(a[io]),x=er(a[ic]),k;a?k=a[no]+"-"+a[tf]+"-"+mm++:k="Unknown-0-"+mm++;var P={getPlugin:function(){return a},getNext:function(){return g},processTelemetry:z,unload:J,update:K,_id:k,_setNext:function(ee){g=ee}};function M(){var ee;return a&&er(a[Cp])&&(ee=a[Cp]()),ee||(ee=qt(P,c,p)),ee}function j(ee,X,ve,be,Me){var Ze=!1,Qe=a?a[no]:bd,jt=ee[Ed];return jt||(jt=ee[Ed]={}),ee.setNext(g),a&&f(ee[Tn](),function(){return Qe+":"+ve},function(){jt[k]=!0;try{var yr=g?g._id:vr;yr&&(jt[yr]=!1),Ze=X(ee)}catch(hr){var fa=g?jt[g._id]:!0;fa&&(Ze=!0),(!g||!fa)&&Wr(ee[ac](),1,73,"Plugin ["+Qe+"] failed during "+ve+" - "+tr(hr)+", run flags: "+tr(jt))}},be,Me),Ze}function z(ee,X){X=X||M();function ve(be){if(!a||!b)return!1;var Me=Nn(a);return Me[wa]||Me[pc]?!1:(x&&a[ic](g),a[io](ee,be),!0)}j(X,ve,"processTelemetry",function(){return{item:ee}},!ee.sync)||X[Kn](ee)}function J(ee,X){function ve(){var be=!1;if(a){var Me=Nn(a),Ze=a[Tn]||Me[Tn];a&&(!Ze||Ze===ee.core())&&!Me[wa]&&(Me[Tn]=null,Me[wa]=!0,Me[Ha]=!1,a[wa]&&a[wa](ee,X)===!0&&(be=!0))}return be}j(ee,ve,"unload",function(){},X[Fi])||ee[Kn](X)}function K(ee,X){function ve(){var be=!1;if(a){var Me=Nn(a),Ze=a[Tn]||Me[Tn];a&&(!Ze||Ze===ee.core())&&!Me[wa]&&a[sa]&&a[sa](ee,X)===!0&&(be=!0)}return be}j(ee,ve,"update",function(){},!1)||ee[Kn](X)}return Ki(P)}var Fu=function(){function a(c,p,g,b){var x=this,k=qt(c,p,g,b);il(x,k,hi(k))}return a}();function bs(){var a=[];function c(g){g&&a[Yr](g)}function p(g,b){ft(a,function(x){try{x(g,b)}catch(k){Wr(g[ac](),2,73,"Unexpected error calling unload handler - "+tr(k))}}),a=[]}return{add:c,run:p}}var Uu,Tl;function hm(a,c){Uu=a,Tl=c}function xp(){var a=[];function c(g){var b=a;a=[],ft(b,function(x){try{(x.rm||x.remove).call(x)}catch(k){Wr(g,2,73,"Unloading:"+tr(k))}}),Uu&&b[dt]>Uu&&(Tl?Tl("doUnload",b):Wr(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))}function p(g){g&&(Ci(a,g),Uu&&a[dt]>Uu&&(Tl?Tl("Add",a):Wr(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}return{run:c,add:p}}var gf,Nc="getPlugin",z_=(gf={},gf[vc]={isVal:lp,v:{}},gf),Ih=function(){function a(){var c=this,p,g,b,x,k;j(),ki(a,c,function(z){z[$n]=function(J,K,ee,X){M(J,K,X),p=!0},z[wa]=function(J,K){var ee,X=z[Tn];if(!X||J&&X!==J[Tn]())return;var ve,be=!1,Me=J||zr(null,X,b&&b[Nc]?b[Nc]():b),Ze=K||(ee={reason:0},ee[Fi]=!1,ee);function Qe(){be||(be=!0,x.run(Me,K),k.run(Me[ac]()),ve===!0&&Me[Kn](Ze),j())}return!z[vn]||z[vn](Me,Ze,Qe)!==!0?Qe():ve=!0,ve},z[sa]=function(J,K){var ee=z[Tn];if(!ee||J&&ee!==J[Tn]())return;var X,ve=!1,be=J||un(null,ee,b&&b[Nc]?b[Nc]():b),Me=K||{reason:0};function Ze(){ve||(ve=!0,M(be.getCfg(),be.core(),be[Ui]()))}return!z._doUpdate||z._doUpdate(be,Me,Ze)!==!0?Ze():X=!0,X},oo(z,"_addUnloadCb",function(){return x},"add"),oo(z,"_addHook",function(){return k},"add"),zn(z,"_unloadHooks",{g:function(){return k}})}),c[ac]=function(z){return P(z)[ac]()},c[Ha]=function(){return p},c.setInitialized=function(z){p=z},c[ic]=function(z){b=z},c[Kn]=function(z,J){J?J[Kn](z):b&&er(b[io])&&b[io](z,null)},c._getTelCtx=P;function P(z){z===void 0&&(z=null);var J=z;if(!J){var K=g||qt(null,{},c[Tn]);b&&b[Nc]?J=K[Eu](null,b[Nc]):J=K[Eu](null,b)}return J}function M(z,J,K){Oa(z,z_,Ec(J)),!K&&J&&(K=J[Wf]()[Ui]());var ee=b;b&&b[Nc]&&(ee=b[Nc]()),c[Tn]=J,g=qt(K,z,J,ee)}function j(){p=!1,c[Tn]=null,g=null,b=null,k=xp(),x=bs()}}return a.__ieDyn=1,a}();function u_(a,c,p){var g={id:c,fn:p};Ci(a,g);var b={remove:function(){ft(a,function(x,k){if(x.id===g.id)return a[To](k,1),-1})}};return b}function Zm(a,c,p){for(var g=!1,b=a[dt],x=0;x<b;++x){var k=a[x];if(k)try{if(k.fn[Eo](null,[c])===!1){g=!0;break}}catch(P){Wr(p,2,64,"Telemetry initializer failed: "+cs(P),{exception:tr(P)},!0)}}return!g}var G_=function(a){Wu(c,a);function c(){var p=a.call(this)||this;p.identifier="TelemetryInitializerPlugin",p.priority=199;var g,b;x(),ki(c,p,function(k,P){k.addTelemetryInitializer=function(M){return u_(b,g++,M)},k[io]=function(M,j){Zm(b,M,j?j[ac]():k[ac]())&&k[Kn](M,j)},k[vn]=function(){x()}});function x(){g=0,b=[]}return p}return c.__ieDyn=1,c}(Ih),yf,Nv="Plugins must provide initialize method",_m="_notificationManager",Sf="SDK is still unloading...",Dv="SDK is not initialized",Nh=100,c_=5e4,Td=uu((yf={cookieCfg:{}},yf[Hs]={rdOnly:!0,ref:!0,v:[]},yf[Bs]={rdOnly:!0,ref:!0,v:[]},yf[vc]={ref:!0,v:{}},yf[ss]=ua,yf.loggingLevelConsole=0,yf.diagnosticLogInterval=ua,yf));function l_(a,c){return new Ev(c)}function V_(a,c,p){var g,b=[],x=[],k={};return ft(p,function(P){(nt(P)||nt(P[$n]))&&Yn(Nv);var M=P[tf],j=P[no];P&&M&&(nt(k[M])?k[M]=j:ys(a,"Two extensions have same priority #"+M+" - "+k[M]+", "+j)),!M||M<c?b[Yr](P):x[Yr](P)}),g={},g[Tn]=b,g[Bs]=x,g}function Dh(a,c){var p=!1;return ft(c,function(g){if(g===a)return p=!0,-1}),p}function gm(a,c,p,g){p&&Lr(p,function(b,x){g&&bi(x)&&bi(c[b])&&gm(a,c[b],x,g),g&&bi(x)&&bi(c[b])?gm(a,c[b],x,g):a.set(c,b,x)})}function Ch(a,c){var p=null,g=-1;return ft(a,function(b,x){if(b.w===c)return p=b,g=x,-1}),{i:g,l:p}}function Xm(a,c){var p=Ch(a,c).l;return p||(p={w:c,rm:function(){var g=Ch(a,c);g.i!==-1&&a[To](g.i,1)}},a[Yr](p)),p}function Cv(a,c,p){ft(c,function(g){var b=pd(a,g.w,p);delete g.w,g.rm=function(){b.rm()}})}function Id(a,c,p,g){return c.add(a[Mi](function(b){var x=b.cfg.disableDbgExt;x===!0&&g&&(p[ts](g),g=null),p&&!g&&x!==!0&&(g=vt(b.cfg),p[Aa](g))})),g}function xh(a){return zn({rm:function(){a.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(a)+">"}})}var ym=function(){function a(){var c,p,g,b,x,k,P,M,j,z,J,K,ee,X,ve,be,Me,Ze,Qe,jt,yr,fa,hr,La,Yo,$o,Ac,pi,Cf,He,At,On;ki(a,this,function(Se){Pr(),Se._getDbgPlgTargets=function(){return[hr,b]},Se[Ha]=function(){return p},Se.activeStatus=function(){return $o},Se._setPendingStatus=function(){$o=3},Se[$n]=function(Ie,at,Lt,Rt){ee&&Yn(Sf),Se[Ha]()&&Yn("Core cannot be initialized more than once"),c=Oa(Ie,Td,Lt||Se[Br],!1),Ie=c.cfg,qo(c[Mi](function(xn){var da=xn.cfg,Ni=$o===3;if(!Ni){pi=da.initInMemoMaxSize||Nh;var Hi=da[Kc],Pf=da.endpointUrl;if(nt(Hi)){yr=null,$o=pn[tc];var nh="Please provide instrumentation key";p?(Wr(g,1,100,nh),Mn()):Yn(nh);return}var ah=[];if(Mr(Hi)?(ah[Yr](Hi),yr=null):yr=Hi,Mr(Pf)?(ah[Yr](Pf),Ac=null):Ac=Pf,ah[dt]){Cf=!1,$o=3;var W_=lp(da.initTimeOut)?da.initTimeOut:c_,Fg=tl(ah);Ku(function(){Cf||ar()},W_),ef(Fg,function(Oh){try{if(Cf)return;if(!Oh.rejected){var Cl=Oh[Kf];if(Cl&&Cl[dt]){var J_=Cl[0];if(yr=J_&&J_[Kf],Cl[dt]>1){var Z_=Cl[1];Ac=Z_&&Z_[Kf]}}yr&&(Ie[Kc]=yr,Ie.endpointUrl=Ac)}ar()}catch{Cf||ar()}})}else ar();var d_=xn.ref(xn.cfg,vc);Lr(d_,function(Oh){xn.ref(d_,Oh)})}})),x=Rt,Qe=Id(c,Ze,x&&Se[Fs](),Qe),Lp(),Se[Br]=Lt;var Xt=Ie[Hs];if(z=[],z[Yr].apply(z,Qi(Qi([],at,!1),Xt)),J=Ie[Bs],aa(null),(!K||K[dt]===0)&&Yn("No "+Bs+" available"),J&&J[dt]>1){var kr=Se[No]("TeeChannelController");(!kr||!kr.plugin)&&Wr(g,1,28,"TeeChannel required")}Cv(Ie,fa,g),fa=null,p=!0,$o===pn.ACTIVE&&Mn()},Se.getChannels=function(){var Ie=[];return K&&ft(K,function(at){Ie[Yr](at)}),Ki(Ie)},Se.track=function(Ie){f(Se[nl](),function(){return"AppInsightsCore:track"},function(){Ie===null&&(ia(Ie),Yn("Invalid telemetry item")),!Ie[Do]&&nt(Ie[Do])&&(ia(Ie),Yn("telemetry name required")),Ie[rc]=Ie[rc]||yr,Ie[Co]=Ie[Co]||us(new Date),Ie.ver=Ie.ver||"4.0",!ee&&Se[Ha]()&&$o===pn.ACTIVE?Ga()[Kn](Ie):$o!==pn[tc]&&b[dt]<=pi&&b[Yr](Ie)},function(){return{item:Ie}},!Ie.sync)},Se[Wf]=Ga,Se[Fs]=function(){return x||(x=new El(c.cfg),Se[_m]=x),x},Se[Aa]=function(Ie){Se.getNotifyMgr()[Aa](Ie)},Se[ts]=function(Ie){x&&x[ts](Ie)},Se.getCookieMgr=function(){return M||(M=ws(c.cfg,Se[Br])),M},Se.setCookieMgr=function(Ie){M!==Ie&&(vd(M,!1),M=Ie)},Se[nl]=function(){return k||P||m()},Se.setPerfMgr=function(Ie){k=Ie},Se.eventCnt=function(){return b[dt]},Se.releaseQueue=function(){if(p&&b[dt]>0){var Ie=b;b=[],$o===2?ft(Ie,function(at){at[rc]=at[rc]||yr,Ga()[Kn](at)}):Wr(g,2,20,"core init status is not active")}},Se[nc]=function(Ie){return ve=Ie||null,On=!1,He&&He[Io](),Fa(!0)};function ar(){Cf=!0,nt(yr)?($o=pn[tc],Wr(g,1,112,"ikey can't be resolved from promises")):$o=pn.ACTIVE,Mn()}function Mn(){p&&(Se.releaseQueue(),Se[nc]())}function Fa(Ie){if((!He||!He[Us])&&!On){var at=Ie||g&&g.queue[dt]>0;at&&(At||(At=!0,qo(c[Mi](function(Lt){var Rt=Lt.cfg.diagnosticLogInterval;(!Rt||!(Rt>0))&&(Rt=1e4);var Xt=!1;He&&(Xt=He[Us],He[Io]()),He=Bf(Mp,Rt),He.unref(),He[Us]=Xt}))),He[Us]=!0)}return He}Se[Ti]=function(){On=!0,He&&He[Io](),Mp()},il(Se,function(){return X},["addTelemetryInitializer"]),Se[rs]=function(Ie,at,Lt){var Rt;Ie===void 0&&(Ie=!0),p||Yn(Dv),ee&&Yn(Sf);var Xt=(Rt={reason:50},Rt[Fi]=Ie,Rt.flushComplete=!1,Rt),kr;Ie&&!at&&(kr=ci(function(Ni){at=Ni}));var xn=zr(kd(),Se);xn[js](function(){Ze.run(Se[Br]),cm([M,x,g],Ie,function(){Pr(),at&&at(Xt)})},Se);function da(Ni){Xt.flushComplete=Ni,ee=!0,Me.run(xn,Xt),Se[Ti](),xn[Kn](Xt)}return Mp(),xf(Ie,da,6,Lt),kr},Se[No]=Va,Se.addPlugin=function(Ie,at,Lt,Rt){if(!Ie){Rt&&Rt(!1),Rv(Nv);return}var Xt=Va(Ie[no]);if(Xt&&!at){Rt&&Rt(!1),Rv("Plugin ["+Ie[no]+"] is already loaded!");return}var kr={reason:16};function xn(Hi){z[Yr](Ie),kr.added=[Ie],aa(kr),Rt&&Rt(!0)}if(Xt){var da=[Xt.plugin],Ni={reason:2,isAsync:!!Lt};vi(da,Ni,function(Hi){Hi?(kr.removed=da,kr.reason|=32,xn()):Rt&&Rt(!1)})}else xn()},Se.updateCfg=function(Ie,at){at===void 0&&(at=!0);var Lt;if(Se[Ha]()){Lt={reason:1,cfg:c.cfg,oldCfg:Wd({},c.cfg),newConfig:Wd({},Ie),merge:at},Ie=Lt.newConfig;var Rt=c.cfg;Ie[Hs]=Rt[Hs],Ie[Bs]=Rt[Bs]}c._block(function(Xt){var kr=Xt.cfg;gm(Xt,kr,Ie,at),at||Lr(kr,function(xn){Vi(Ie,xn)||Xt.set(kr,xn,ua)}),Xt[bu](kr,Td)},!0),c[bo](),Lt&&Fp(Lt)},Se.evtNamespace=function(){return be},Se.flush=xf,Se.getTraceCtx=function(Ie){return jt||(jt=Iv()),jt},Se.setTraceCtx=function(Ie){jt=Ie||null},Se.addUnloadHook=qo,oo(Se,"addUnloadCb",function(){return Me},"add"),Se.onCfgChange=function(Ie){var at;return p?at=pd(c.cfg,Ie,Se[Br]):at=Xm(fa,Ie),xh(at)},Se.getWParam=function(){return Fl()||c.cfg.enableWParam?0:-1};function Bi(){var Ie={};La=[];var at=function(Lt){Lt&&ft(Lt,function(Rt){if(Rt[no]&&Rt[Li]&&!Ie[Rt.identifier]){var Xt=Rt[no]+"="+Rt[Li];La[Yr](Xt),Ie[Rt.identifier]=Rt}})};at(K),J&&ft(J,function(Lt){at(Lt)}),at(z)}function Pr(){p=!1,c=Oa({},Td,Se[Br]),c.cfg[Wc]=1,zn(Se,"config",{g:function(){return c.cfg},s:function(at){Se.updateCfg(at,!1)}}),zn(Se,"pluginVersionStringArr",{g:function(){return La||Bi(),La}}),zn(Se,"pluginVersionString",{g:function(){return Yo||(La||Bi(),Yo=La.join(";")),Yo||vr}}),zn(Se,"logger",{g:function(){return g||(g=new Tc(c.cfg),c[Br]=g),g},s:function(at){c[Br]=at,g!==at&&(vd(g,!1),g=at)}}),Se[Br]=new Tc(c.cfg),hr=[];var Ie=Se.config[Hs]||[];Ie.splice(0,Ie[dt]),Ci(Ie,hr),X=new G_,b=[],vd(x,!1),x=null,k=null,P=null,vd(M,!1),M=null,j=null,z=[],J=null,K=null,ee=!1,ve=null,be=Ks("AIBaseCore",!0),Me=bs(),jt=null,yr=null,Ze=xp(),fa=[],Yo=null,La=null,On=!1,He=null,At=!1,$o=0,Ac=null,pi=null,Cf=!1}function Ga(){var Ie=qt(kd(),c.cfg,Se);return Ie[js](Fa),Ie}function aa(Ie){var at=V_(Se[Br],hl,z);j=null,Yo=null,La=null,K=(J||[])[0]||[],K=wd(Ci(K,at[Bs]));var Lt=Ci(wd(at[Tn]),K);hr=Ki(Lt);var Rt=Se.config[Hs]||[];Rt.splice(0,Rt[dt]),Ci(Rt,hr);var Xt=Ga();K&&K[dt]>0&&qi(Xt[Eu](K),Lt),qi(Xt,Lt),Ie&&Fp(Ie)}function Va(Ie){var at=null,Lt=null,Rt=[];return ft(hr,function(Xt){if(Xt[no]===Ie&&Xt!==X)return Lt=Xt,-1;Xt.getChannel&&Rt[Yr](Xt)}),!Lt&&Rt[dt]>0&&ft(Rt,function(Xt){if(Lt=Xt.getChannel(Ie),!Lt)return-1}),Lt&&(at={plugin:Lt,setEnabled:function(Xt){Nn(Lt)[pc]=!Xt},isEnabled:function(){var Xt=Nn(Lt);return!Xt[wa]&&!Xt[pc]},remove:function(Xt,kr){var xn;Xt===void 0&&(Xt=!0);var da=[Lt],Ni=(xn={reason:1},xn[Fi]=Xt,xn);vi(da,Ni,function(Hi){Hi&&aa({reason:32,removed:da}),kr&&kr(Hi)})}}),at}function kd(){if(!j){var Ie=(hr||[]).slice();Sa(Ie,X)===-1&&Ie[Yr](X),j=hn(wd(Ie),c.cfg,Se)}return j}function vi(Ie,at,Lt){if(Ie&&Ie[dt]>0){var Rt=hn(Ie,c.cfg,Se),Xt=zr(Rt,Se);Xt[js](function(){var kr=!1,xn=[];ft(z,function(Ni,Hi){Dh(Ni,Ie)?kr=!0:xn[Yr](Ni)}),z=xn,Yo=null,La=null;var da=[];J&&(ft(J,function(Ni,Hi){var Pf=[];ft(Ni,function(nh){Dh(nh,Ie)?kr=!0:Pf[Yr](nh)}),da[Yr](Pf)}),J=da),Lt&&Lt(kr),Fa()}),Xt[Kn](at)}else Lt(!1)}function Mp(){if(g&&g.queue){var Ie=g.queue.slice(0);g.queue[dt]=0,ft(Ie,function(at){var Lt,Rt=(Lt={},Lt[Do]=ve||"InternalMessageId: "+at[Tu],Lt[rc]=yr,Lt[Co]=us(new Date),Lt.baseType=_l.dataType,Lt.baseData={message:at[Ys]},Lt);Se.track(Rt)})}}function xf(Ie,at,Lt,Rt){var Xt=1,kr=!1,xn=null;Rt=Rt||5e3;function da(){Xt--,kr&&Xt===0&&(xn&&xn[Io](),xn=null,at&&at(kr),at=null)}if(K&&K[dt]>0){var Ni=Ga()[Eu](K);Ni.iterate(function(Hi){if(Hi.flush){Xt++;var Pf=!1;Hi.flush(Ie,function(){Pf=!0,da()},Lt)||Pf||(Ie&&xn==null?xn=Ku(function(){xn=null,da()},Rt):da())}})}return kr=!0,da(),!0}function Lp(){var Ie;qo(c[Mi](function(at){var Lt=at.cfg.enablePerfMgr;if(Lt){var Rt=at.cfg[ss];(Ie!==Rt||!Ie)&&(Rt||(Rt=l_),af(at.cfg,ss,Rt),Ie=Rt,P=null),!k&&!P&&er(Rt)&&(P=Rt(Se,Se[Fs]()))}else P=null,Ie=null}))}function Fp(Ie){var at=un(kd(),Se);at[js](Fa),(!Se._updateHook||Se._updateHook(at,Ie)!==!0)&&at[Kn](Ie)}function Rv(Ie){var at=Se[Br];at?(Wr(at,2,73,Ie),Fa()):Yn(Ie)}function ia(Ie){var at=Se[Fs]();at&&at[rf]([Ie],2)}function qo(Ie){Ze.add(Ie)}})}return a.__ieDyn=1,a}();function Ar(a,c){try{if(a&&a!==""){var p=Ia().parse(a);if(p&&p[Jv]&&p[Jv]>=p.itemsAccepted&&p.itemsReceived-p.itemsAccepted===p.errors[dt])return p}}catch(g){Wr(c,1,43,"Cannot parse the response. "+(g[Do]||tr(g)),{response:a})}return null}var Qs="",Nd="NoResponseBody",xv="&"+Nd+"=true",Pv="POST",Sm=function(){function a(){var c=0,p,g,b,x,k,P,M,j,z,J,K,ee,X,ve;ki(a,this,function(be,Me){var Ze=!0;Cf(),be[$n]=function(He,At){b=At,g&&Wr(b,1,28,"Sender is already initialized"),be.SetConfig(He),g=!0},be._getDbgPlgTargets=function(){return[g,x,P,p]},be.SetConfig=function(He){try{if(k=He.senderOnCompleteCallBack||{},P=!!He.disableCredentials,M=He.fetchCredentials,x=!!He.isOneDs,p=!!He.enableSendPromise,z=!!He.disableXhr,J=!!He.disableBeacon,K=!!He.disableBeaconSync,ve=He.timeWrapper,X=!!He.addNoResponse,ee=!!He.disableFetchKeepAlive,j={sendPOST:$o},x||(Ze=!1),P){var At=Vs();At&&At.protocol&&At.protocol[oi]()==="file:"&&(Ze=!1)}return!0}catch{}return!1},be.getSyncFetchPayload=function(){return c},be.getSenderInst=function(He,At){return He&&He[dt]?fa(He,At):null},be.getFallbackInst=function(){return j},be[vn]=function(He,At){Cf()};function Qe(He,At){hr(At,200,{},He)}function jt(He,At){Wr(b,2,26,"Failed to send telemetry.",{message:He}),hr(At,400,{})}function yr(He){jt("No endpoint url is provided for the batch",He)}function fa(He,At){for(var On,Se=0,ar=null,Mn=0;ar==null&&Mn<He[dt];)Se=He[Mn],!z&&Se===1?cl()?ar=pi:ff()&&(ar=$o):Se===2&&tm(At)&&(!At||!ee)?ar=Ac:Se===3&&cv()&&(At?!K:!J)&&(ar=Yo),Mn++;return ar?(On={_transport:Se,_isSync:At},On[sc]=ar,On):null}function hr(He,At,On,Se){try{He&&He(At,On,Se)}catch{}}function La(He,At){var On=yi(),Se=He[oc];if(!Se)return yr(At),!0;Se=He[oc]+(X?xv:Qs);var ar=He[Zl],Mn=x?ar:new Blob([ar],{type:"text/plain;charset=UTF-8"}),Fa=On.sendBeacon(Se,Mn);return Fa}function Yo(He,At,On){var Se=He[Zl];try{if(Se)if(La(He,At))Qe(Qs,At);else{var ar=k&&k.beaconOnRetry;ar&&er(ar)?ar(He,At,La):(j&&j[sc](He,At,!0),Wr(b,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Mn){x&&ys(b,"Failed to send telemetry using sendBeacon API. Ex:"+tr(Mn)),hr(At,x?0:400,{},Qs)}}function $o(He,At,On){var Se,ar,Mn,Fa=He[os]||{};!On&&p&&(Se=ci(function(aa,Va){ar=aa,Mn=Va})),x&&On&&He.disableXhrSync&&(On=!1);var Bi=He[oc];if(!Bi){yr(At),ar&&ar(!1);return}var Pr=pp(Pv,Bi,Ze,!0,On,He[Xl]);x||Pr[zm]("Content-type","application/json"),ft(hi(Fa),function(aa){Pr[zm](aa,Fa[aa])}),Pr.onreadystatechange=function(){x||(Ga(Pr),Pr.readyState===4&&ar&&ar(!0))},Pr.onload=function(){x&&Ga(Pr)};function Ga(aa){var Va=k&&k.xhrOnComplete,kd=Va&&er(Va);if(kd)Va(aa,At,He);else{var vi=Gs(aa);hr(At,aa[is],Ao(aa,x),vi)}}return Pr.onerror=function(aa){hr(At,x?Pr[is]:400,Ao(Pr,x),x?Qs:ol(Pr)),Mn&&Mn(aa)},Pr.ontimeout=function(){hr(At,x?Pr[is]:500,Ao(Pr,x),x?Qs:ol(Pr)),ar&&ar(!1)},Pr.send(He[Zl]),Se}function Ac(He,At,On){var Se,ar=He[oc],Mn=He[Zl],Fa=x?Mn:new Blob([Mn],{type:"application/json"}),Bi,Pr,Ga,aa=new Headers,Va=Mn[dt],kd=!1,vi=!1,Mp=He[os]||{},xf=(Se={method:Pv,body:Fa},Se[li]=!0,Se);He.headers&&hi(He.headers)[dt]>0&&(ft(hi(Mp),function(ia){aa.append(ia,Mp[ia])}),xf[os]=aa),M?xf.credentials=M:Ze&&x&&(xf.credentials="include"),On&&(xf.keepalive=!0,c+=Va,x?He._sendReason===2&&(kd=!0,X&&(ar+=xv)):kd=!0);var Lp=new Request(ar,xf);try{Lp[li]=!0}catch{}if(!On&&p&&(Bi=ci(function(ia,qo){Pr=ia,Ga=qo})),!ar){yr(At),Pr&&Pr(!1);return}function Fp(ia){hr(At,x?0:400,{},x?Qs:ia)}function Rv(ia,qo,Ie){var at=ia[is],Lt=k.fetchOnComplete;Lt&&er(Lt)?Lt(ia,At,Ie||Qs,qo):hr(At,at,{},Ie||Qs)}try{ef(fetch(x?ar:Lp,x?xf:null),function(ia){if(On&&(c-=Va,Va=0),!vi)if(vi=!0,ia.rejected)Fp(ia.reason&&ia.reason[Ys]),Ga&&Ga(ia.reason);else{var qo=ia[Kf];try{!x&&!qo.ok?(Fp(qo.statusText),Pr&&Pr(!1)):x&&!qo.body?(Rv(qo,null,Qs),Pr&&Pr(!0)):ef(qo.text(),function(Ie){Rv(qo,He,Ie[Kf]),Pr&&Pr(!0)})}catch(Ie){Fp(tr(Ie)),Ga&&Ga(Ie)}}})}catch(ia){vi||(Fp(tr(ia)),Ga&&Ga(ia))}return kd&&!vi&&(vi=!0,hr(At,200,{}),Pr&&Pr(!0)),x&&!vi&&He[Xl]>0&&ve&&ve.set(function(){vi||(vi=!0,hr(At,500,{}),Pr&&Pr(!0))},He[Xl]),Bi}function pi(He,At,On){var Se=ra(),ar=new XDomainRequest,Mn=He[Zl];ar.onload=function(){var aa=Gs(ar),Va=k&&k.xdrOnComplete;Va&&er(Va)?Va(ar,At,He):hr(At,200,{},aa)},ar.onerror=function(){hr(At,400,{},x?Qs:of(ar))},ar.ontimeout=function(){hr(At,500,{})},ar.onprogress=function(){};var Fa=Se&&Se.location&&Se.location[ns]||"",Bi=He[oc];if(!Bi){yr(At);return}if(!x&&Bi.lastIndexOf(Fa,0)!==0){var Pr="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";Wr(b,2,40,". "+Pr),jt(Pr,At);return}var Ga=x?Bi:Bi[Ra](/^(https?:)/,"");ar.open(Pv,Ga),He[Xl]&&(ar[Xl]=He[Xl]),ar.send(Mn),x&&On?ve&&ve.set(function(){ar.send(Mn)},0):ar.send(Mn)}function Cf(){c=0,g=!1,p=!1,b=null,x=null,k=null,P=null,M=null,j=null,z=!1,J=!1,K=!1,ee=!1,X=!1,ve=null}})}return a.__ieDyn=1,a}(),wf="on",Pp="attachEvent",f_="addEventListener",Ap="detachEvent",Il="removeEventListener",Nl="events",Dl="visibilitychange",Dc="pagehide",Cc="pageshow",ju="unload",bf="beforeunload",eu=Ks("aiEvtPageHide"),Ef=Ks("aiEvtPageShow"),Dd=/\.[\.]+/g,Ph=/[\.]+$/,Qm=1,Tf=Au("events"),If=/^([^.]*)(?:\.(.+)|)/;function Cd(a){return a&&a[Ra]?a[Ra](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,vr):a}function Rp(a,c){var p;if(c){var g=vr;Dt(c)?(g=vr,ft(c,function(x){x=Cd(x),x&&(x[0]!=="."&&(x="."+x),g+=x)})):g=Cd(c),g&&(g[0]!=="."&&(g="."+g),a=(a||vr)+g)}var b=If.exec(a||vr)||[];return p={},p[si]=b[1],p.ns=(b[2]||vr).replace(Dd,".").replace(Ph,vr)[Ii](".").sort().join("."),p}function eh(a,c,p){var g=[],b=Tf.get(a,Nl,{},!1),x=Rp(c,p);return Lr(b,function(k,P){ft(P,function(M){var j;(!x[si]||x[si]===M.evtName[si])&&(!x.ns||x.ns===x.ns)&&g[Yr]((j={},j[Do]=M.evtName[si]+(M.evtName.ns?"."+M.evtName.ns:vr),j.handler=M[as],j))})}),g}function Av(a,c,p){p===void 0&&(p=!0);var g=Tf.get(a,Nl,{},p),b=g[c];return b||(b=g[c]=[]),b}function wm(a,c,p,g){a&&c&&c[si]&&(a[Il]?a[Il](c[si],p,g):a[Ap]&&a[Ap](wf+c[si],p))}function Ah(a,c,p,g){var b=!1;return a&&c&&c[si]&&p&&(a[f_]?(a[f_](c[si],p,g),b=!0):a[Pp]&&(a[Pp](wf+c[si],p),b=!0)),b}function Rh(a,c,p,g){for(var b=c[dt];b--;){var x=c[b];x&&(!p.ns||p.ns===x.evtName.ns)&&(!g||g(x))&&(wm(a,x.evtName,x[as],x.capture),c[To](b,1))}}function kh(a,c,p){if(c[si])Rh(a,Av(a,c[si]),c,p);else{var g=Tf.get(a,Nl,{});Lr(g,function(b,x){Rh(a,x,c,p)}),hi(g)[dt]===0&&Tf.kill(a,Nl)}}function qn(a,c){var p;return c?(Dt(c)?p=[a].concat(c):p=[a,c],p=Rp("xx",p).ns[Ii](".")):p=a,p}function xd(a,c,p,g,b){var x;b===void 0&&(b=!1);var k=!1;if(a)try{var P=Rp(c,g);if(k=Ah(a,P,p,b),k&&Tf.accept(a)){var M=(x={guid:Qm++,evtName:P},x[as]=p,x.capture=b,x);Av(a,P.type)[Yr](M)}}catch{}return k}function Wn(a,c,p,g,b){if(b===void 0&&(b=!1),a)try{var x=Rp(c,g),k=!1;kh(a,x,function(P){return x.ns&&!p||P[as]===p?(k=!0,!0):!1}),k||wm(a,x,p,b)}catch{}}function K_(a,c,p,g){return g===void 0&&(g=!1),xd(a,c,p,null,g)}function kp(a,c,p,g){g===void 0&&(g=!1),Wn(a,c,p,null,g)}function Pd(a,c,p){var g=!1,b=ra();b&&(g=xd(b,a,c,p),g=xd(b.body,a,c,p)||g);var x=ni();return x&&(g=xd(x,a,c,p)||g),g}function d(a,c,p){var g=ra();g&&(Wn(g,a,c,p),Wn(g.body,a,c,p));var b=ni();b&&Wn(b,a,c,p)}function _(a,c,p,g){var b=!1;return c&&a&&a[dt]>0&&ft(a,function(x){x&&(!p||Sa(p,x)===-1)&&(b=Pd(x,c,g)||b)}),b}function E(a,c,p,g){var b=!1;return c&&a&&Dt(a)&&(b=_(a,c,p,g),!b&&p&&p[dt]>0&&(b=_(a,c,null,g))),b}function C(a,c,p){a&&Dt(a)&&ft(a,function(g){g&&d(g,c,p)})}function R(a,c,p){return E([bf,ju,Dc],a,c,p)}function $(a,c){C([bf,ju,Dc],a,c)}function q(a,c,p){function g(k){var P=ni();a&&P&&P.visibilityState==="hidden"&&a(k)}var b=qn(eu,p),x=_([Dc],a,c,b);return(!c||Sa(c,Dl)===-1)&&(x=_([Dl],g,c,b)||x),!x&&c&&(x=q(a,null,p)),x}function Z(a,c){var p=qn(eu,c);C([Dc],a,p),C([Dl],null,p)}function oe(a,c,p){function g(k){var P=ni();a&&P&&P.visibilityState==="visible"&&a(k)}var b=qn(Ef,p),x=_([Cc],a,c,b);return x=_([Dl],g,c,b)||x,!x&&c&&(x=oe(a,null,p)),x}function ue(a,c){var p=qn(Ef,c);C([Cc],a,p),C([Dl],null,p)}var Pe=Oi({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3}),Ge="",Ve="https://browser.events.data.microsoft.com/OneCollector/1.0/",De="version",_e="properties",Ye="initialize",Te="logger",Je="indexOf",Ae="timings",Ce="pollInternalLogs",Be="value",Bt="kind",Vt="length",fr="processTelemetryStart",Cr="handleField",rn="rmSanitizer",Jr="rmFieldSanitizer",Bn="canHandle",$r,Ma="4.3.5",et="1DS-Web-JS-"+Ma,mt=h.hasOwnProperty,br="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",mr="withCredentials",It="timeout",Rr=($r={},$r[0]=0,$r[2]=6,$r[1]=1,$r[3]=7,$r[4098]=6,$r[4097]=1,$r[4099]=7,$r),wt=null,_n=Fl(),ht=$d();function Dn(a){return!(a===Ge||nt(a))}function Cn(a){if(a){var c=Zi(a,"-");if(c>-1)return Vn(a,c)}return Ge}function fi(){return wt===null&&(wt=!rt(Uint8Array)&&!di()&&!ul()),wt}function Yu(a){return!!(a&&ir(a)&&a>=1&&a<=4)}function Es(a,c,p){if(!c&&!Dn(c)||typeof a!="string")return null;var g=typeof c;if(g==="string"||g==="number"||g==="boolean"||Dt(c))c={value:c};else if(g==="object"&&!mt.call(c,"value"))c={value:p?JSON.stringify(c):c};else if(nt(c[Be])||c[Be]===Ge||!zt(c[Be])&&!ir(c[Be])&&!ct(c[Be])&&!Dt(c[Be]))return null;if(Dt(c[Be])&&!Pc(c[Be]))return null;if(!nt(c[Bt])){if(Dt(c[Be])||!bn(c[Bt]))return null;c[Be]=c[Be].toString()}return c}function Op(a,c,p){var g=-1;if(!rt(a))if(c>0&&(c===32?g=8192:c<=13&&(g=c<<5)),Jn(p))g===-1&&(g=0),g|=p;else{var b=Rr[Ts(a)]||-1;g!==-1&&b!==-1?g|=b:b===6&&(g=b)}return g}function tu(a,c,p){p===void 0&&(p=!0);var g;return a&&(g=a.get(c),p&&g&&decodeURIComponent&&(g=decodeURIComponent(g))),g||Ge}function jo(a){a===void 0&&(a="D");var c=y();return a==="B"?c="{"+c+"}":a==="P"?c="("+c+")":a==="N"&&(c=c.replace(/-/g,Ge)),c}function xc(a,c,p,g,b){var x={},k=!1,P=0,M=arguments[Vt],j=arguments;for(ct(j[0])&&(k=j[0],P++);P<M;P++){var a=j[P];Lr(a,function(J,K){k&&K&&ea(K)?Dt(K)?(x[J]=x[J]||[],ft(K,function(ee,X){ee&&ea(ee)?x[J][X]=xc(!0,x[J][X],ee):x[J][X]=ee})):x[J]=xc(!0,x[J],K):x[J]=K})}return x}var la=Hl;function bn(a){return a===0||a>0&&a<=13||a===32}function Jn(a){return a>=0&&a<=9}function di(){var a=yi();if(!rt(a)&&a.userAgent){var c=a.userAgent.toLowerCase();if((c[Je]("safari")>=0||c[Je]("firefox")>=0)&&c[Je]("chrome")<0)return!0}return!1}function Pc(a){return a[Vt]>0}function Ad(a,c){var p=a;p[Ae]=p[Ae]||{},p[Ae][fr]=p[Ae][fr]||{},p[Ae][fr][c]=la()}function Ts(a){var c=0;if(a!=null){var p=typeof a;p==="string"?c=1:p==="number"?c=2:p==="boolean"?c=3:p===r&&(c=4,Dt(a)?(c=4096,a[Vt]>0&&(c|=Ts(a[0]))):mt.call(a,"value")&&(c=8192|Ts(a[Be])))}return c}function Nf(){return!!sn("chrome")}function Df(a,c,p,g,b,x){g===void 0&&(g=!1),b===void 0&&(b=!1);function k(M,j,z){try{M[j]=z}catch{}}var P=new XMLHttpRequest;return g&&k(P,br,g),p&&k(P,mr,p),P.open(a,c,!b),p&&k(P,mr,p),!b&&x&&k(P,It,x),P}function Rd(a){return a>0}var th=uu({endpointUrl:Ve,propertyStorageOverride:{isVal:bm}});function bm(a){return a&&(!a.getProperty||!a.setProperty)&&Yn("Invalid property storage override passed."),!0}var Em=function(a){Wu(c,a);function c(){var p=a.call(this)||this;return ki(c,p,function(g,b){g[Ye]=function(x,k,P,M){f(g,function(){return"AppInsightsCore.initialize"},function(){try{b[Ye](Oa(x,th,P||g[Te],!1).cfg,k,P,M)}catch(J){var j=g[Te],z=tr(J);z[Je]("channels")!==-1&&(z+=`
 - Channels must be provided through config.channels only!`),Wr(j,1,514,"SDK Initialization Failed - no telemetry will be sent: "+z)}},function(){return{config:x,extensions:k,logger:P,notificationManager:M}})},g.track=function(x){f(g,function(){return"AppInsightsCore.track"},function(){var k=x;if(k){k[Ae]=k[Ae]||{},k[Ae].trackStart=la(),Yu(k.latency)||(k.latency=1);var P=k.ext=k.ext||{};P.sdk=P.sdk||{},P.sdk.ver=et;var M=k.baseData=k.baseData||{};M[_e]=M[_e]||{};var j=M[_e];j[De]=j[De]||g.pluginVersionString||Ge}b.track(k)},function(){return{item:x}},!x.sync)},g[Ce]=function(x){return b[Ce](x||"InternalLog")}}),p}return c.__ieDyn=1,c}(ym),rh=Oi({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),Tm=Oi({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),Im=Oi({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),Nm=Oi({Normal:1,Critical:2}),ru=Oi({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),Dm=function(){function a(c){var p=this,g={},b=[],x=[];c&&x.push(c);function k(z,J){var K,ee=g[z];if(ee&&(K=ee[J]),!K&&K!==null){if(zt(z)&&zt(J))if(x[Vt]>0){for(var X=0;X<x[Vt];X++)if(x[X][Cr](z,J)){K={canHandle:!0,fieldHandler:x[X]};break}}else b[Vt]===0&&(K={canHandle:!0});if(!K&&K!==null){K=null;for(var X=0;X<b[Vt];X++)if(b[X][Cr](z,J)){K={canHandle:!0,handler:b[X],fieldHandler:null};break}}ee||(ee=g[z]={}),ee[J]=K}return K}p.clearCache=function(){g={}},p.addSanitizer=function(z){z&&(Hd(b,z)||b.push(z),g={})},p.addFieldSanitizer=function(z){z&&(Hd(x,z)||x.push(z),g={})},p[rn]=function(z){if(z){var J=Sa(b,z);J!==-1&&(b.splice(J,1),g={}),ft(b,function(K){K&&K[rn]&&K[rn](z)})}},p[Jr]=function(z){if(z){var J=Sa(x,z);J!==-1&&(x.splice(J,1),g={}),ft(b,function(K){K&&K[Jr]&&K[Jr](z)})}},p.isEmpty=function(){return ks(b)+ks(x)===0},p[Cr]=function(z,J){var K=k(z,J);return K?K[Bn]:!1},p[Be]=function(z,J,K,ee){var X=k(z,J);if(X&&X[Bn]){if(!X||!X[Bn])return null;if(X.handler)return X.handler[Be](z,J,K,ee);if(!zt(J)||nt(K)||K===Ge)return null;var ve=null,be=Ts(K);if((be&8192)===8192){var Me=be&-8193;if(ve=K,!Dn(ve[Be])||Me!==1&&Me!==2&&Me!==3&&(Me&4096)!==4096)return null}else be===1||be===2||be===3||(be&4096)===4096?ve=M(z,J,K):be===4&&(ve=M(z,J,ee?JSON.stringify(K):K));if(ve)return P(X,z,J,be,ve,ee)}return null},p.property=function(z,J,K,ee){var X=k(z,J);if(!X||!X[Bn]||!zt(J)||nt(K)||!Dn(K[Be]))return null;var ve=Ts(K[Be]);return ve===0?null:P(X,z,J,ve,K,ee)};function P(z,J,K,ee,X,ve){if(z.handler)return z.handler.property(J,K,X,ve);if(!nt(X[Bt])){if((ee&4096)===4096||!bn(X[Bt]))return null;X[Be]=X[Be].toString()}return j(z.fieldHandler,J,K,ee,X)}function M(z,J,K){return Dn(K)?{value:K}:null}function j(z,J,K,ee,X){if(X&&z){var ve=z.getSanitizer(J,K,ee,X[Bt],X.propertyType);if(ve)if(ee===4){var be={},Me=X[Be];Lr(Me,function(Qe,jt){var yr=J+"."+K;if(Dn(jt)){var fa=M(yr,Qe,jt);fa=j(z,yr,Qe,Ts(jt),fa),fa&&(be[Qe]=fa[Be])}}),X[Be]=be}else{var Ze={path:J,name:K,type:ee,prop:X,sanitizer:p};X=ve.call(p,Ze)}}return X}}return a.getFieldType=Ts,a}();e.ActiveStatus=pn,e.AppInsightsCore=Em,e.BaseTelemetryPlugin=Ih,e.DiagnosticLogger=Tc,e.EventLatency=Tm,e.EventPersistence=Nm,e.EventPropertyType=Im,e.EventsDiscardedReason=wu,e.FullVersionString=et,e.InternalAppInsightsCore=ym,e.LoggingSeverity=Pe,e.MinChannelPriorty=Gf,e.NotificationManager=El,e.PerfEvent=Lu,e.PerfManager=Ev,e.ProcessTelemetryContext=Fu,e.SenderPostManager=Sm,e.TraceLevel=ru,e.Undefined=n,e.ValueKind=rh,e.ValueSanitizer=Dm,e.Version=Ma,e._InternalLogMessage=_l,e.__getRegisteredEvents=eh,e._appendHeader=mc,e._getAllResponseHeaders=Ao,e._logInternalMessage=mv,e._testHookMaxUnloadHooksCb=hm,e._throwInternal=Wr,e._warnToConsole=ys,e.addEventHandler=Pd,e.addEventListeners=E,e.addPageHideEventListener=q,e.addPageShowEventListener=oe,e.addPageUnloadEventListener=R,e.areCookiesSupported=kn,e.arrForEach=ft,e.arrIndexOf=Sa,e.arrMap=pu,e.arrReduce=Sn,e.attachEvent=K_,e.blockDynamicConversion=Sp,e.convertAllHeadersToMap=Nu,e.cookieAvailable=kn,e.createCookieMgr=ws,e.createDynamicConfig=Oa,e.createEnumStyle=Oi,e.createGuid=jo,e.createProcessTelemetryContext=qt,e.createTraceParent=ur,e.createUniqueNamespace=Ks,e.createUnloadHandlerContainer=bs,e.dateNow=vu,e.detachEvent=kp,e.disallowsSameSiteNone=$i,e.doPerf=f,e.dumpObj=tr,e.eventOff=Wn,e.eventOn=xd,e.extend=xc,e.findW3cTraceParent=In,e.forceDynamicConversion=Lo,e.formatErrorMessageXdr=of,e.formatErrorMessageXhr=ol,e.formatTraceParent=Pt,e.generateW3CId=N,e.getCommonSchemaMetaData=Op,e.getConsole=lf,e.getCookieValue=tu,e.getCrypto=Du,e.getDocument=ni,e.getDynamicConfigHandler=yp,e.getExceptionName=cs,e.getFieldValueType=Ts,e.getGlobal=Ff,e.getGlobalInst=sn,e.getHistory=Wi,e.getIEVersion=em,e.getISOString=us,e.getJSON=Ia,e.getLocation=Vs,e.getMsCrypto=ud,e.getNavigator=yi,e.getPerformance=Ai,e.getResponseText=Gs,e.getSetValue=af,e.getTenantId=Cn,e.getTime=la,e.getWindow=ra,e.hasDocument=Fl,e.hasHistory=Ul,e.hasJSON=vs,e.hasNavigator=Zp,e.hasOwnProperty=En,e.hasWindow=$d,e.isArray=Dt,e.isArrayValid=Pc,e.isBeaconsSupported=cv,e.isBoolean=ct,e.isChromium=Nf,e.isDate=fn,e.isDocumentObjectAvailable=_n,e.isError=bt,e.isFetchSupported=tm,e.isFunction=er,e.isGreaterThanZero=Rd,e.isIE=Cu,e.isLatency=Yu,e.isNotTruthy=jn,e.isNullOrUndefined=nt,e.isNumber=ir,e.isObject=ea,e.isReactNative=ul,e.isSampledFlag=Dr,e.isString=zt,e.isTruthy=Xa,e.isTypeof=Tt,e.isUint8ArrayAvailable=fi,e.isUndefined=rt,e.isValidSpanId=Ut,e.isValidTraceId=nr,e.isValidTraceParent=Nr,e.isValueAssigned=Dn,e.isValueKind=bn,e.isWindowObjectAvailable=ht,e.isXhrSupported=ff,e.mergeEvtNamespace=qn,e.newGuid=y,e.newId=nm,e.normalizeJsName=zs,e.objDefineAccessors=Ol,e.objForEachKey=Lr,e.objFreeze=Ki,e.objKeys=hi,e.objSeal=cu,e.onConfigChange=pd,e.openXhr=Df,e.optimizeObject=ad,e.parseResponse=Ar,e.parseTraceParent=st,e.perfNow=Hl,e.prependTransports=sf,e.proxyAssign=ls,e.proxyFunctionAs=oo,e.proxyFunctions=il,e.random32=fl,e.randomValue=rm,e.removeEventHandler=d,e.removeEventListeners=C,e.removePageHideEventListener=Z,e.removePageShowEventListener=ue,e.removePageUnloadEventListener=$,e.safeGetCookieMgr=Uo,e.safeGetLogger=Ec,e.sanitizeProperty=Es,e.setEnableEnvMocks=za,e.setProcessTelemetryTimings=Ad,e.setValue=ji,e.strContains=pt,e.strEndsWith=$f,e.strFunction=t,e.strObject=r,e.strPrototype=s,e.strStartsWith=Kv,e.strTrim=qa,e.strUndefined=n,e.throwError=Yn,e.toISOString=us,e.useXDomainRequest=cl})});var cw=Ld((ty,uw)=>{(function(e,t){typeof ty=="object"&&typeof uw<"u"?t(ty):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.oneDS=e.oneDS||{}))})(ty,function(e){"use strict";var t="REAL_TIME",r="NEAR_REAL_TIME",n="BEST_EFFORT",s="function",u="object",h="undefined",S="prototype",I=Object,D=I[S];function F(d,_){return d||_}function H(d,_){return d[_]}var ie=void 0,me=null,re="",Q="function",ne="object",ce="prototype",ge="__proto__",Ue="undefined",we="constructor",qe="Symbol",lt="_polyfill",ot="length",xt="name",cr="call",Jt="toString",Nt=F(Object),Un=H(Nt,ce),ha=F(String),Vr=H(ha,ce),Xr=F(Math),tt=F(Array),Ya=H(tt,ce),je=H(Ya,"slice");function Tr(d,_){try{return{v:d.apply(this,_)}}catch(E){return{e:E}}}function Hn(d){return function(_){return typeof _===d}}function Ht(d){return typeof d===Ue||d===Ue}function Tt(d){return!nt(d)}function rt(d){return d===me||Ht(d)}function Qn(d){return d===me||!nt(d)}function nt(d){return!!d||d!==ie}var su=Hn("string"),Gt=Hn(Q);function Ho(d){return!d&&rt(d)?!1:!!d&&typeof d===ne}var zt=H(tt,"isArray"),er=Hn("number"),ea=Hn("boolean");function Dt(d){return!!(d&&d.then&&Gt(d.then))}var fn=H(Nt,"getOwnPropertyDescriptor");function ir(d,_){return!!d&&Un.hasOwnProperty[cr](d,_)}var ct=F(H(Nt,"hasOwn"),bt);function bt(d,_){return ir(d,_)||!!fn(d,_)}function Mr(d,_,E){if(d&&Ho(d)){for(var C in d)if(ct(d,C)&&_[cr](E||d,C,d[C])===-1)break}}var jn={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Xa(d){var _={};if(_[jn.c]=!0,_[jn.e]=!0,d.l){_.get=function(){return d.l.v};var E=fn(d.l,"v");E&&E.set&&(_.set=function(C){d.l.v=C})}return Mr(d,function(C,R){_[jn[C]]=Tt(R)?_[jn[C]]:R}),_}var on=H(Nt,"defineProperty");function En(d,_,E){return on(d,_,Xa(E))}function Vi(d,_,E,C,R){var $={};return Mr(d,function(q,Z){oa($,q,_?Z:q,R),oa($,Z,E?Z:q,R)}),C?C($):$}function oa(d,_,E,C){on(d,_,{value:E,enumerable:!0,writable:!!C})}var Lr=F(ha),Zt="[object Error]";function lr(d,_){var E=re,C=Un[Jt][cr](d);C===Zt&&(d={stack:Lr(d.stack),message:Lr(d.message),name:Lr(d.name)});try{E=JSON.stringify(d,me,_?typeof _=="number"?_:4:ie),E=(E?E.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):me)||Lr(d)}catch(R){E=" - "+lr(R,_)}return C+": "+E}function Qr(d){throw new TypeError(d)}var Ol=H(Nt,"freeze");function zn(d){return d}function Ml(d){return d[ge]||me}var mo=H(Nt,"assign"),Rn=H(Nt,"keys");function As(d){return Ol&&Mr(d,function(_,E){(zt(E)||Ho(E))&&As(E)}),tr(d)}var tr=F(Ol,zn),Yn=F(H(Nt,"getPrototypeOf"),Ml);function Qa(d){return Vi(d,1,0,tr)}function ei(d){return Vi(d,0,0,tr)}var ti=ei({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Mf="__tsUtils$gblCfg",Uc;function hi(){var d;return typeof globalThis!==Ue&&(d=globalThis),!d&&typeof self!==Ue&&(d=self),!d&&typeof window!==Ue&&(d=window),!d&&typeof global!==Ue&&(d=global),d}function uu(){if(!Uc){var d=Tr(hi).v||{};Uc=d[Mf]=d[Mf]||{}}return Uc}var Ki=cu;function cu(d,_,E){var C=_?_[d]:me;return function(R){var $=(R?R[d]:me)||C;if($||E){var q=arguments;return($||E).apply(R,$?je[cr](q,1):q)}Qr('"'+Lr(d)+'" not defined for '+lr(R))}}var _a=H(Xr,"max"),Gn=Ki("slice",Vr),Bu=Ki("substring",Vr),lu=cu("substr",Vr,Ll);function Ll(d,_,E){return rt(d)&&Qr("Invalid "+lr(d)),E<0?re:(_=_||0,_<0&&(_=_a(_+d[ot],0)),Ht(E)?Gn(d,_):Gn(d,_,_+E))}function ga(d,_){return Bu(d,0,_)}var xr="_urid",yn;function tn(){if(!yn){var d=uu();yn=d.gblSym=d.gblSym||{k:{},s:{}}}return yn}var xa;function ho(d){var _={description:Lr(d),toString:function(){return qe+"("+d+")"}};return _[lt]=!0,_}function Hu(d){var _=tn();if(!ct(_.k,d)){var E=ho(d),C=Rn(_.s).length;E[xr]=function(){return C+"_"+E[Jt]()},_.k[d]=E,_.s[E[xr]()]=Lr(d)}return _.k[d]}function _i(d){!xa&&(xa={});var _,E=ti[d];return E&&(_=xa[E]=xa[E]||ho(qe+"."+E)),_}var Kr;function _o(){Kr=uu()}function zo(d){return on({toJSON:function(){return d}},"v",{value:d})}var Vn="window",Go;function fu(d,_){var E;return function(){return!Kr&&_o(),(!E||Kr.lzy)&&(E=zo(Tr(d,_).v)),E.v}}function ri(d){return!Kr&&_o(),(!Go||d===!1||Kr.lzy)&&(Go=zo(Tr(hi).v||me)),Go.v}function dn(d,_){var E;if(!Go||_===!1?E=ri(_):E=Go.v,E&&E[d])return E[d];if(d===Vn)try{return window}catch{}return me}var ta=fu(dn,["document"]);function zu(){return!!gi()}var gi=fu(dn,[Vn]);function Ir(){return!!ya()}var ya=fu(dn,["navigator"]),Lf=fu(function(){return!!Tr(function(){return process&&(process.versions||{}).node}).v}),Pa,Vo;function jc(){return Pa=zo(Tr(dn,[qe]).v),Pa}function Ko(d){var _=(Kr.lzy?0:Pa)||jc();return _.v?_.v[d]:ie}function Ff(){return!!sn()}function sn(){return!Kr&&_o(),((Kr.lzy?0:Pa)||jc()).v}function Fl(d,_){var E=ti[d];!Kr&&_o();var C=(Kr.lzy?0:Pa)||jc();return C.v?C.v[E||d]:_?ie:_i(d)}function ni(d,_){!Kr&&_o();var E=(Kr.lzy?0:Pa)||jc();return E.v?E.v(d):_?me:ho(d)}function $d(d){return!Kr&&_o(),Vo=(Kr.lzy?0:Vo)||zo(Tr(Ko,["for"]).v),(Vo.v||Hu)(d)}function ra(d){return!!d&&Gt(d.next)}function Zp(d){return!Qn(d)&&Gt(d[Fl(3)])}var yi;function Ul(d,_,E){if(d&&(ra(d)||(!yi&&(yi=zo(Fl(3))),d=d[yi.v]?d[yi.v]():me),ra(d))){var C=ie,R=ie;try{for(var $=0;!(R=d.next()).done&&_[cr](E||d,R.value,$,d)!==-1;)$++}catch(q){C={e:q},d.throw&&(R=me,d.throw(C))}finally{try{R&&!R.done&&d.return&&d.return(R)}finally{if(C)throw C.e}}}}function Wi(d,_,E){return d.apply(_,E)}function Uf(d,_){return!Ht(_)&&d&&(zt(_)?Wi(d.push,d,_):ra(_)||Zp(_)?Ul(_,function(E){d.push(E)}):d.push(_)),d}function gr(d,_,E){if(d)for(var C=d[ot]>>>0,R=0;R<C&&!(R in d&&_[cr](E||d,d[R],R,d)===-1);R++);}var Wo=Ki("indexOf",Ya);function jf(d,_,E){return((d?d.slice:me)||je).apply(d,je[cr](arguments,1))}var $a=F(H(Nt,"create"),Yc);function Yc(d){if(!d)return{};var _=typeof d;_!==ne&&_!==Q&&Qr("Prototype must be an Object or function: "+lr(d));function E(){}return E[ce]=d,new E}var kt;function Si(d,_){var E=Nt.setPrototypeOf||function(C,R){var $;!kt&&(kt=zo(($={},$[ge]=[],$ instanceof Array))),kt.v?C[ge]=R:Mr(R,function(q,Z){return C[q]=Z})};return E(d,_)}function Gu(d,_,E){Tr(En,[_,xt,{v:d,c:!0,e:!1}]),_=Si(_,E);function C(){this[we]=_,Tr(En,[this,xt,{v:d,c:!0,e:!1}])}return _[ce]=E===me?$a(E):(C[ce]=E[ce],new C),_}function jl(d,_){_&&(d[xt]=_)}function Gv(d,_,E){var C=E||Error,R=C[ce][xt],$=Error.captureStackTrace;return Gu(d,function(){var q=this,Z=arguments;try{Tr(jl,[C,d]);var oe=Wi(C,q,je[cr](Z))||q;if(oe!==q){var ue=Yn(q);ue!==Yn(oe)&&Si(oe,ue)}return $&&$(oe,q[we]),_&&_(oe,Z),oe}finally{Tr(jl,[C,R])}},C)}function Di(){return(Date.now||Yl)()}function Yl(){return new Date().getTime()}function qd(d){return function(E){return rt(E)&&Qr("strTrim called ["+lr(E)+"]"),E&&E.replace&&(E=E.replace(d,re)),E}}var du=qd(/^\s+|(?=\s)\s+$/g),Ci=cu("trim",Vr,du),ft,Sa,pu;function Rs(d){if(!d||typeof d!==ne)return!1;pu||(pu=zu()?gi():!0);var _=!1;if(d!==pu){Sa||(ft=Function[ce][Jt],Sa=ft[cr](Nt));try{var E=Yn(d);_=!E,_||(ir(E,we)&&(E=E[we]),_=!!(E&&typeof E===Q&&ft[cr](E)===Sa))}catch{}}return _}function Bd(){return Di()}var Hd=Ki("indexOf",Vr),Sn=cu("startsWith",Vr,wi);function wi(d,_,E){su(d)||Qr("'"+lr(d)+"' is not a string");var C=su(_)?_:Lr(_),R=E>0?E:0;return Bu(d,R,R+C[ot])===C}var zd="ref",xi="unref",ai="hasRef",Hm="enabled";function Vv(d,_,E){var C=!0,R=d?_(me):me,$;function q(){return C=!1,R&&R[xi]&&R[xi](),$}function Z(){R&&E(R),R=me}function oe(){return R=_(R),C||q(),$}function ue(Pe){!Pe&&R&&Z(),Pe&&!R&&oe()}return $={cancel:Z,refresh:oe},$[ai]=function(){return R&&R[ai]?R[ai]():C},$[zd]=function(){return C=!0,R&&R[zd]&&R[zd](),$},$[xi]=q,$=on($,Hm,{get:function(){return!!R},set:ue}),{h:$,dn:function(){R=me}}}function Xp(d,_,E){var C=zt(_),R=C?_.length:0,$=(R>0?_[0]:C?ie:_)||setTimeout,q=(R>1?_[1]:ie)||clearTimeout,Z=E[0];E[0]=function(){oe.dn(),Wi(Z,ie,je[cr](arguments))};var oe=Vv(d,function(ue){if(ue){if(ue.refresh)return ue.refresh(),ue;Wi(q,ie,[ue])}return Wi($,ie,E)},function(ue){Wi(q,ie,[ue])});return oe.h}function vu(d,_){return Xp(!0,ie,je[cr](arguments))}function Qp(d,_,E){return Xp(!0,d,je[cr](arguments,1))}(ri()||{}).Symbol,(ri()||{}).Reflect;var bh="hasOwnProperty",Gd=function(d,_){return Gd=I.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,C){E.__proto__=C}||function(E,C){for(var R in C)C[bh](R)&&(E[R]=C[R])},Gd(d,_)};function qa(d,_){typeof _!==s&&_!==null&&Qr("Class extends value "+String(_)+" is not a constructor or null"),Gd(d,_);function E(){this.constructor=d}d[S]=_===null?$a(_):(E[S]=_[S],new E)}var $l,ql="constructor",Ji="prototype",bi="function",mu="_dynInstFuncs",ev="_isDynProxy",Pi="_dynClass",Vd="_dynCls$",hu="_dynInstChk",$c=hu,Bl="_dfOpts",Yf="_unknown_",Kd="__proto__",tv="_dyn"+Kd,rv="__dynProto$Gbl",_u="_dynInstProto",Wd="useBaseInst",ks="setInstFuncs",Vu=Object,Ai=Vu.getPrototypeOf,Hl=Vu.getOwnPropertyNames,$f=ri(),qc=$f[rv]||($f[rv]={o:($l={},$l[ks]=!0,$l[Wd]=!0,$l),n:1e3});function Zi(d){return d&&(d===Vu[Ji]||d===Array[Ji])}function Kv(d){return Zi(d)||d===Function[Ji]}function Jo(d){var _;if(d){if(Ai)return Ai(d);var E=d[Kd]||d[Ji]||(d[ql]?d[ql][Ji]:null);_=d[tv]||E,ir(d,tv)||(delete d[_u],_=d[tv]=d[_u]||d[tv],d[_u]=E)}return _}function go(d,_){var E=[];if(Hl)E=Hl(d);else for(var C in d)typeof C=="string"&&ir(d,C)&&E.push(C);if(E&&E.length>0)for(var R=0;R<E.length;R++)_(E[R])}function Xi(d,_,E){return _!==ql&&typeof d[_]===bi&&(E||ir(d,_))&&_!==Kd&&_!==Ji}function gu(d){Qr("DynamicProto: "+d)}function qf(d){var _=$a(null);return go(d,function(E){!_[E]&&Xi(d,E,!1)&&(_[E]=d[E])}),_}function Bc(d,_){for(var E=d.length-1;E>=0;E--)if(d[E]===_)return!0;return!1}function Hc(d,_,E,C){function R(oe,ue,Pe){var Ge=ue[Pe];if(Ge[ev]&&C){var Ve=oe[mu]||{};Ve[$c]!==!1&&(Ge=(Ve[ue[Pi]]||{})[Pe]||Ge)}return function(){return Ge.apply(oe,arguments)}}var $=$a(null);go(E,function(oe){$[oe]=R(_,E,oe)});for(var q=Jo(d),Z=[];q&&!Kv(q)&&!Bc(Z,q);)go(q,function(oe){!$[oe]&&Xi(q,oe,!Ai)&&($[oe]=R(_,q,oe))}),Z.push(q),q=Jo(q);return $}function Ku(d,_,E,C){var R=null;if(d&&ir(E,Pi)){var $=d[mu]||$a(null);if(R=($[E[Pi]]||$a(null))[_],R||gu("Missing ["+_+"] "+bi),!R[hu]&&$[$c]!==!1){for(var q=!ir(d,_),Z=Jo(d),oe=[];q&&Z&&!Kv(Z)&&!Bc(oe,Z);){var ue=Z[_];if(ue){q=ue===C;break}oe.push(Z),Z=Jo(Z)}try{q&&(d[_]=R),R[hu]=1}catch{$[$c]=!1}}}return R}function Bf(d,_,E){var C=_[d];return C===E&&(C=Jo(_)[d]),typeof C!==bi&&gu("["+d+"] is not a "+bi),C}function zl(d,_,E,C,R){function $(oe,ue){var Pe=function(){var Ge=Ku(this,ue,oe,Pe)||Bf(ue,oe,Pe);return Ge.apply(this,arguments)};return Pe[ev]=1,Pe}if(!Zi(d)){var q=E[mu]=E[mu]||$a(null);if(!Zi(q)){var Z=q[_]=q[_]||$a(null);q[$c]!==!1&&(q[$c]=!!R),Zi(Z)||go(E,function(oe){Xi(E,oe,!1)&&E[oe]!==C[oe]&&(Z[oe]=E[oe],delete E[oe],(!ir(d,oe)||d[oe]&&!d[oe][ev])&&(d[oe]=$(d,oe)))})}}}function Hf(d,_){if(Ai){for(var E=[],C=Jo(_);C&&!Kv(C)&&!Bc(E,C);){if(C===d)return!0;E.push(C),C=Jo(C)}return!1}return!0}function Wu(d,_){return ir(d,Ji)?d.name||_||Yf:((d||{})[ql]||{}).name||_||Yf}function Qi(d,_,E,C){ir(d,Ji)||gu("theClass is an invalid class definition.");var R=d[Ji];Hf(R,_)||gu("["+Wu(d)+"] not in hierarchy of ["+Wu(_)+"]");var $=null;ir(R,Pi)?$=R[Pi]:($=Vd+Wu(d,"_")+"$"+qc.n,qc.n++,R[Pi]=$);var q=Qi[Bl],Z=!!q[Wd];Z&&C&&C[Wd]!==void 0&&(Z=!!C[Wd]);var oe=qf(_),ue=Hc(R,_,oe,Z);E(_,ue);var Pe=!!Ai&&!!q[ks];Pe&&C&&(Pe=!!C[ks]),zl(R,$,_,oe,Pe!==!1)}Qi[Bl]=qc.o;var zc=Qa,yo=zc({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),Ei="toLowerCase",Zo="blkVal",Zr="length",Os="rdOnly",eo="notify",Gc="warnToConsole",Vc="throwInternal",Xo="setDf",Gl="watch",Qo="logger",yu="apply",ii="push",Jd="splice",Ju="hdlr",Ba="cancel",zf="initialize",Zd="identifier",Vl="isInitialized",Kl="value",Xd="getPlugin",Wv="name",Zu="time",So="processNext",to="getProcessTelContext",wn="unload",Wl="loggingLevelConsole",Xu="createNew",Qu="teardown",Qd="messageId",Ri="message",Su="isAsync",Ms="diagLog",or="_doTeardown",wo="update",es="getNext",ki="setNextPlugin",Gf="protocol",Oi="userAgent",wu="split",pn="nodeType",oi="replace",jr="logInternalMessage",dt="type",ec="handler",bo="status",Ls="getResponseHeader",ro="getAllResponseHeaders",bu="isChildEvt",Mi="data",Br="getCtx",Eo="setCtx",Yr="complete",To="urlString",Vf="sendPOST",Io="headers",$n="timeout",no="setRequestHeader",ts;function Aa(d,_){ts||(ts=Gv("AggregationError",function(C,R){R[Zr]>1&&(C.errors=R[1])}));var E=d||"One or more errors occurred.";throw gr(_,function(C,R){E+=`
`.concat(R," > ").concat(lr(C))}),new ts(E,_||[])}var Ha="Promise",Kc="rejected";function tc(d,_){return Kf(d,function(E){return _?_({status:"fulfilled",rejected:!1,value:E}):E},function(E){return _?_({status:Kc,rejected:!0,reason:E}):E})}function Kf(d,_,E,C){var R=d;try{if(Dt(d))(_||E)&&(R=d.then(_,E));else try{_&&(R=_(d))}catch($){if(E)R=E($);else throw $}}finally{C&&Fs(R,C)}return R}function Fs(d,_){var E=d;return _&&(Dt(d)?d.finally?E=d.finally(_):E=d.then(function(C){return _(),C},function(C){throw _(),C}):_()),E}var No=["pending","resolving","resolved",Kc],Do="dispatchEvent",rc;function Co(d){var _;return d&&d.createEvent&&(_=d.createEvent("Event")),!!_&&_.initEvent}function Kn(d,_,E,C){var R=ta();!rc&&(rc=zo(!!Tr(Co,[R]).v));var $=rc.v?R.createEvent("Event"):C?new Event(_):{};if(E&&E($),rc.v&&$.initEvent(_,!1,!0),$&&d[Do])d[Do]($);else{var q=d["on"+_];if(q)q($);else{var Z=dn("console");Z&&(Z.error||Z.log)(_,lr($))}}}var Wf="unhandledRejection",nc=Wf.toLowerCase(),Us=10,Ti;function rs(d){return Gt(d)?d.toString():lr(d)}function js(d,_,E){var C=jf(arguments,3),R=0,$=!1,q,Z=[],oe=!1,ue=null,Pe;function Ge(Ce,Be){try{oe=!0,ue&&ue.cancel(),ue=null;var Bt=d(function(Vt,fr){Z.push(function(){try{var Cr=R===2?Ce:Be,rn=Ht(Cr)?q:Gt(Cr)?Cr(q):Cr;Dt(rn)?rn.then(Vt,fr):Cr?Vt(rn):R===3?fr(rn):Vt(rn)}catch(Jr){fr(Jr)}}),$&&Ye()},C);return Bt}finally{}}function Ve(Ce){return Ge(void 0,Ce)}function De(Ce){var Be=Ce,Bt=Ce;return Gt(Ce)&&(Be=function(Vt){return Ce&&Ce(),Vt},Bt=function(Vt){throw Ce&&Ce(),Vt}),Ge(Be,Bt)}function _e(){return No[R]}function Ye(){if(Z.length>0){var Ce=Z.slice();Z=[],oe=!0,ue&&ue.cancel(),ue=null,_(Ce)}}function Te(Ce,Be){return function(Bt){if(R===Be){if(Ce===2&&Dt(Bt)){R=1,Bt.then(Te(2,1),Te(3,1));return}R=Ce,$=!0,q=Bt,Ye(),!oe&&Ce===3&&!ue&&(ue=vu(Je,Us))}}}function Je(){if(!oe)if(oe=!0,Lf())process.emit(Wf,q,Pe);else{var Ce=gi()||ri();!Ti&&(Ti=zo(Tr(dn,[Ha+"RejectionEvent"]).v)),Kn(Ce,nc,function(Be){return En(Be,"promise",{g:function(){return Pe}}),Be.reason=q,Be},!!Ti.v)}}Pe={then:Ge,catch:Ve,finally:De},on(Pe,"state",{get:_e}),Ff()&&(Pe[Fl(11)]="IPromise");function Ae(){return"IPromise "+_e()+($?" - "+rs(q):"")}return Pe.toString=Ae,function(){Gt(E)||Qr(Ha+": executor is not a function - "+rs(E));var Be=Te(3,0);try{E.call(Pe,Te(2,0),Be)}catch(Bt){Be(Bt)}}(),Pe}function Li(d){gr(d,function(_){try{_()}catch{}})}function Wc(d){var _=er(d)?d:0;return function(E){vu(function(){Li(E)},_)}}function Eu(d,_){return js(Eu,Wc(_),d,_)}var wa;function Tu(d,_){!wa&&(wa=zo(Tr(dn,[Ha]).v||null));var E=wa.v;if(!E)return Eu(d);Gt(d)||Qr(Ha+": executor is not a function - "+lr(d));var C=0;function R(){return No[C]}var $=new E(function(q,Z){function oe(Pe){C=2,q(Pe)}function ue(Pe){C=3,Z(Pe)}d(oe,ue)});return on($,"state",{get:R}),$}var Ys;function Fi(d,_){return!Ys&&(Ys=zo(Tu)),Ys.v.call(this,d,_)}var ac=void 0,vn="",sa="core",Ui="disabled",ic="extensionConfig",ns="processTelemetry",ep="priority",Ii="getPerfMgr",Jc="Not dynamic - ",Ra=/-([a-z])/g,Jf=/([^\w\d_$])/g,si=/^(\d+[\w\d_$])/;function as(d){return!rt(d)}function is(d){var _=d;return _&&su(_)&&(_=_[oi](Ra,function(E,C){return C.toUpperCase()}),_=_[oi](Jf,"_"),_=_[oi](si,function(E,C){return"_"+C})),_}function tp(d,_){return d&&_?Hd(d,_)!==-1:!1}function Jl(d,_){var E=null,C=null;return Gt(d)?E=d:C=d,function(){var R=arguments;if(E&&(C=E()),C)return C[_][yu](C,R)}}function Zf(d,_,E,C,R){d&&_&&E&&(R!==!1||Ht(d[_]))&&(d[_]=Jl(E,C))}function Zl(d,_,E,C){return d&&_&&Ho(d)&&zt(E)&&gr(E,function(R){su(R)&&Zf(d,R,_,R,C)}),d}function xo(d){return d&&mo&&(d=I(mo({},d))),d}function ui(d){try{return d.responseText}catch{}return null}function Zc(d,_){return d?"XDomainRequest,Response:"+ui(d)||"":_}function Jv(d,_){return d?"XMLHttpRequest,Status:"+d[bo]+",Response:"+ui(d)||d.response||"":_}function oc(d,_){return _&&(er(_)?d=[_].concat(d):zt(_)&&(d=_.concat(d))),d}var sc="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",os="withCredentials",Xl="timeout";function zm(d,_,E,C,R,$){C===void 0&&(C=!1),R===void 0&&(R=!1);function q(oe,ue,Pe){try{oe[ue]=Pe}catch{}}var Z=new XMLHttpRequest;return C&&q(Z,sc,C),E&&q(Z,os,E),Z.open(d,_,!R),E&&q(Z,os,E),!R&&$&&q(Z,Xl,$),Z}function rp(d){var _={};if(su(d)){var E=Ci(d)[wu](/[\r\n]+/);gr(E,function(C){if(C){var R=C.indexOf(": ");if(R!==-1){var $=Ci(C.substring(0,R))[Ei](),q=Ci(C.substring(R+1));_[$]=q}else _[Ci(C)]=1}})}return _}function Ql(d,_,E){if(!d[E]&&_&&_[Ls]){var C=_[Ls](E);C&&(d[E]=Ci(C))}return d}var uc="kill-duration",nv="kill-duration-seconds",Zv="time-delta-millis";function cc(d,_){var E={};return d[ro]?E=rp(d[ro]()):_&&(E=Ql(E,d,Zv),E=Ql(E,d,uc),E=Ql(E,d,nv)),E}var Xv="location",ef="console",np="JSON",ao="crypto",av="msCrypto",Gm="ReactNative",Xf="msie",iv="trident/",ap="XMLHttpRequest",Xc=null,Qf=null,lc=!1,$s=null,Qc=null;function Qv(d,_){var E=!1;if(d){try{if(E=_ in d,!E){var C=d[S];C&&(E=_ in C)}}catch{}if(!E)try{var R=new d;E=!Ht(R[_])}catch{}}return E}function ip(d){if(d&&lc){var _=dn("__mockLocation");if(_)return _}return typeof location===u&&location?location:dn(Xv)}function el(){return typeof console!==h?console:dn(ef)}function op(){return!!(typeof JSON===u&&JSON||dn(np)!==null)}function qs(){return op()?JSON||dn(np):null}function Hr(){return dn(ao)}function fc(){return dn(av)}function ba(){var d=ya();return d&&d.product?d.product===Gm:!1}function sp(){var d=ya();if(d&&(d[Oi]!==Qf||Xc===null)){Qf=d[Oi];var _=(Qf||vn)[Ei]();Xc=tp(_,Xf)||tp(_,iv)}return Xc}function ed(d){return(Qc===null||d===!1)&&(Qc=Ir()&&!!ya().sendBeacon),Qc}function tl(d){var _=!1;try{_=!!dn("fetch");var E=dn("Request");_&&d&&E&&(_=Qv(E,"keepalive"))}catch{}return _}function dc(){return $s===null&&($s=typeof XDomainRequest!==h,$s&&ci()&&($s=$s&&!Qv(dn(ap),"withCredentials"))),$s}function ci(){var d=!1;try{var _=dn(ap);d=!!_}catch{}return d}var td=4294967296,ua=4294967295,vr=123456789,Bs=987654321,Tn=!1,ss=vr,pc=Bs;function vc(d){d<0&&(d>>>=0),ss=vr+d&ua,pc=Bs-d&ua,Tn=!0}function Hs(){try{var d=Di()&2147483647;vc((Math.random()*td^d)+d)}catch{}}function io(d){var _=0,E=Hr()||fc();return E&&E.getRandomValues&&(_=E.getRandomValues(new Uint32Array(1))[0]&ua),_===0&&sp()&&(Tn||Hs(),_=tf()&ua),_===0&&(_=Math.floor(td*Math.random()|0)),d||(_>>>=0),_}function tf(d){pc=36969*(pc&65535)+(pc>>16)&ua,ss=18e3*(ss&65535)+(ss>>16)&ua;var _=(pc<<16)+(ss&65535)>>>0&ua|0;return d||(_>>>=0),_}function ov(d){d===void 0&&(d=22);for(var _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=io()>>>0,C=0,R=vn;R[Zr]<d;)C++,R+=_.charAt(E&63),E>>>=6,C===5&&(E=(io()<<2&4294967295|E&3)>>>0,C=0);return R}var rf="3.3.5",sv="."+ov(6),nf=0;function rl(d){return d[pn]===1||d[pn]===9||!+d[pn]}function up(d,_){var E=_[d.id];if(!E){E={};try{rl(_)&&En(_,d.id,{e:!1,v:E})}catch{}}return E}function na(d,_){return _===void 0&&(_=!1),is(d+nf+++(_?"."+rf:vn)+sv)}function nl(d){var _={id:na("_aiData-"+(d||vn)+"."+rf),accept:function(E){return rl(E)},get:function(E,C,R,$){var q=E[_.id];return q?q[is(C)]:($&&(q=up(_,E),q[is(C)]=R),R)},kill:function(E,C){if(E&&E[C])try{delete E[C]}catch{}}};return _}function Ea(d){return d&&Ho(d)&&(d.isVal||d.fb||ct(d,"v")||ct(d,"mrg")||ct(d,"ref")||d.set)}function Iu(d,_,E){var C,R=E.dfVal||nt;if(_&&E.fb){var $=E.fb;zt($)||($=[$]);for(var q=0;q<$[Zr];q++){var Z=$[q],oe=_[Z];if(R(oe)?C=oe:d&&(oe=d.cfg[Z],R(oe)&&(C=oe),d.set(d.cfg,Lr(Z),oe)),R(C))break}}return!R(C)&&R(E.v)&&(C=E.v),C}function cp(d,_,E){var C=E;if(E&&Ea(E)&&(C=Iu(d,_,E)),C){Ea(C)&&(C=cp(d,_,C));var R;zt(C)?(R=[],R[Zr]=C[Zr]):Rs(C)&&(R={}),R&&(Mr(C,function($,q){q&&Ea(q)&&(q=cp(d,_,q)),R[$]=q}),C=R)}return C}function rd(d,_,E,C){var R,$,q,Z=C,oe,ue,Pe,Ge;Ea(Z)?(R=Z.isVal,$=Z.set,Pe=Z[Os],Ge=Z[Zo],oe=Z.mrg,ue=Z.ref,!ue&&Ht(ue)&&(ue=!!oe),q=Iu(d,_,Z)):q=C,Ge&&d[Zo](_,E);var Ve,De=!0,_e=_[E];(_e||!rt(_e))&&(Ve=_e,De=!1,R&&Ve!==q&&!R(Ve)&&(Ve=q,De=!0),$&&(Ve=$(Ve,q,_),De=Ve===q)),De?q?Ve=cp(d,_,q):Ve=q:(Rs(Ve)||zt(q))&&oe&&q&&(Rs(q)||zt(q))&&Mr(q,function(Ye,Te){rd(d,Ve,Ye,Te)}),d.set(_,E,Ve),ue&&d.ref(_,E),Pe&&d[Os](_,E)}var Ta=$d("[[ai_dynCfg_1]]"),nd=$d("[[ai_blkDynCfg_1]]"),lp=$d("[[ai_frcDynCfg_1]]");function zs(d){if(d){var _;if(zt(d)?(_=[],_[Zr]=d[Zr]):Rs(d)&&(_={}),_)return Mr(d,function(E,C){_[E]=zs(C)}),_}return d}function pt(d){if(d){var _=d[Ta]||d;if(_.cfg&&(_.cfg===d||_.cfg[Ta]===_))return _}return null}function us(d){if(d&&(Rs(d)||zt(d)))try{d[nd]=!0}catch{}return d}function cs(d,_,E){var C=!1;return E&&!d[_.blkVal]&&(C=E[lp],!C&&!E[nd]&&(C=Rs(E)||zt(E))),C}function ji(d){Qr("InvalidAccess:"+d)}var af=["push","pop","shift","unshift","splice"],al=function(d,_,E,C){d&&d[Vc](3,108,"".concat(E," [").concat(_,"] failed - ")+lr(C))};function ls(d,_,E){zt(_)&&gr(af,function(C){var R=_[C];_[C]=function(){for(var $=[],q=0;q<arguments.length;q++)$[q]=arguments[q];var Z=R[yu](this,$);return of(d,_,E,"Patching"),Z}})}function oo(d,_){var E=fn(d,_);return E&&E.get}function il(d,_,E,C){var R={n:E,h:[],trk:function(ue){ue&&ue.fn&&(Wo(R.h,ue)===-1&&R.h[ii](ue),d.trk(ue,R))},clr:function(ue){var Pe=Wo(R.h,ue);Pe!==-1&&R.h[Jd](Pe,1)}},$=!0,q=!1;function Z(){$&&(q=q||cs(Z,d,C),C&&!C[Ta]&&q&&(C=of(d,C,E,"Converting")),$=!1);var ue=d.act;return ue&&R.trk(ue),C}Z[d.prop]={chng:function(){d.add(R)}};function oe(ue){if(C!==ue){Z[d.ro]&&!d.upd&&ji("["+E+"] is read-only:"+lr(_)),$&&(q=q||cs(Z,d,C),$=!1);var Pe=q&&Z[d.rf];if(q)if(Pe){Mr(C,function(Ve){C[Ve]=ue?ue[Ve]:ac});try{Mr(ue,function(Ve,De){ad(d,C,Ve,De)}),ue=C}catch(Ve){al((d.hdlr||{})[Qo],E,"Assigning",Ve),q=!1}}else C&&C[Ta]&&Mr(C,function(Ve){var De=oo(C,Ve);if(De){var _e=De[d.prop];_e&&_e.chng()}});if(ue!==C){var Ge=ue&&cs(Z,d,ue);!Pe&&Ge&&(ue=of(d,ue,E,"Converting")),C=ue,q=Ge}d.add(R)}}En(_,R.n,{g:Z,s:oe})}function ad(d,_,E,C){if(_){var R=oo(_,E),$=R&&!!R[d.prop];$?_[E]=C:il(d,_,E,C)}return _}function Gs(d,_,E,C){if(_){var R=oo(_,E),$=R&&!!R[d.prop],q=C&&C[0],Z=C&&C[1],oe=C&&C[2];if(!$){if(oe)try{us(_)}catch(ue){al((d.hdlr||{})[Qo],E,"Blocking",ue)}try{ad(d,_,E,_[E]),R=oo(_,E)}catch(ue){al((d.hdlr||{})[Qo],E,"State",ue)}}q&&(R[d.rf]=q),Z&&(R[d.ro]=Z),oe&&(R[d.blkVal]=!0)}return _}function of(d,_,E,C){try{Mr(_,function(R,$){ad(d,_,R,$)}),_[Ta]||(on(_,Ta,{get:function(){return d[Ju]}}),ls(d,_,E))}catch(R){al((d.hdlr||{})[Qo],E,C,R)}return _}var ol="[[ai_",sf="]]";function fp(d){var _,E=ni(ol+"get"+d.uid+sf),C=ni(ol+"ro"+d.uid+sf),R=ni(ol+"rf"+d.uid+sf),$=ni(ol+"blkVal"+d.uid+sf),q=ni(ol+"dtl"+d.uid+sf),Z=null,oe=null,ue;function Pe(_e,Ye){var Te=ue.act;try{ue.act=_e,_e&&_e[q]&&(gr(_e[q],function(Ae){Ae.clr(_e)}),_e[q]=[]),Ye({cfg:d.cfg,set:d.set.bind(d),setDf:d[Xo].bind(d),ref:d.ref.bind(d),rdOnly:d[Os].bind(d)})}catch(Ae){var Je=d[Qo];throw Je&&Je[Vc](1,107,lr(Ae)),Ae}finally{ue.act=Te||null}}function Ge(){if(Z){var _e=Z;Z=null,oe&&oe[Ba](),oe=null;var Ye=[];if(gr(_e,function(Te){if(Te&&(Te[q]&&(gr(Te[q],function(Je){Je.clr(Te)}),Te[q]=null),Te.fn))try{Pe(Te,Te.fn)}catch(Je){Ye[ii](Je)}}),Z)try{Ge()}catch(Te){Ye[ii](Te)}Ye[Zr]>0&&Aa("Watcher error(s): ",Ye)}}function Ve(_e){if(_e&&_e.h[Zr]>0){Z||(Z=[]),oe||(oe=vu(function(){oe=null,Ge()},0));for(var Ye=0;Ye<_e.h[Zr];Ye++){var Te=_e.h[Ye];Te&&Wo(Z,Te)===-1&&Z[ii](Te)}}}function De(_e,Ye){if(_e){var Te=_e[q]=_e[q]||[];Wo(Te,Ye)===-1&&Te[ii](Ye)}}return ue=(_={prop:E,ro:C,rf:R},_[Zo]=$,_[Ju]=d,_.add=Ve,_[eo]=Ge,_.use=Pe,_.trk=De,_),ue}function dp(d,_){var E={fn:_,rm:function(){E.fn=null,d=null,_=null}};return En(E,"toJSON",{v:function(){return"WatcherHandler"+(E.fn?"":"[X]")}}),d.use(E,_),E}function uv(d,_,E){var C,R=pt(_);if(R)return R;var $=na("dyncfg",!0),q=_&&E!==!1?_:zs(_),Z;function oe(){Z[eo]()}function ue(Je,Ae,Ce){try{Je=ad(Z,Je,Ae,Ce)}catch(Be){al(d,Ae,"Setting value",Be)}return Je[Ae]}function Pe(Je){return dp(Z,Je)}function Ge(Je,Ae){Z.use(null,function(Ce){var Be=Z.upd;try{Ht(Ae)||(Z.upd=Ae),Je(Ce)}finally{Z.upd=Be}})}function Ve(Je,Ae){var Ce;return Gs(Z,Je,Ae,(Ce={},Ce[0]=!0,Ce))[Ae]}function De(Je,Ae){var Ce;return Gs(Z,Je,Ae,(Ce={},Ce[1]=!0,Ce))[Ae]}function _e(Je,Ae){var Ce;return Gs(Z,Je,Ae,(Ce={},Ce[2]=!0,Ce))[Ae]}function Ye(Je,Ae){return Ae&&Mr(Ae,function(Ce,Be){rd(Te,Je,Ce,Be)}),Je}var Te=(C={uid:null,cfg:q},C[Qo]=d,C[eo]=oe,C.set=ue,C[Xo]=Ye,C[Gl]=Pe,C.ref=Ve,C[Os]=De,C[Zo]=_e,C._block=Ge,C);return En(Te,"uid",{c:!1,e:!1,w:!1,v:$}),Z=fp(Te),of(Z,q,"config","Creating"),Te}function pp(d,_){d?(d[Gc](_),d[Vc](2,108,_)):ji(_)}function Nu(d,_,E,C){var R=uv(E,d||{},C);return _&&R[Xo](R.cfg,_),R}function mc(d,_,E){var C=d[Ta]||d;return C.cfg&&(C.cfg===d||C.cfg[Ta]===C)?C[Gl](_):(pp(E,Jc+lr(d)),Nu(d,null,E)[Gl](_))}var uf="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Po=null;function fs(){var d=dn("Microsoft");return d&&(Po=d.ApplicationInsights),Po}function Ao(d){var _=Po;return!_&&d.disableDbgExt!==!0&&(_=Po||fs()),_?_.ChromeDbgExt:null}var Ro,hc="warnToConsole",vp="AI (Internal): ",_c="AI: ",mp="AITR_",hp={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},id=(Ro={},Ro[0]=null,Ro[1]="errorToConsole",Ro[2]=hc,Ro[3]="debugToConsole",Ro);function ds(d){return d?'"'+d[oi](/\"/g,vn)+'"':vn}function ko(d,_){var E=el();if(E){var C="log";E[d]&&(C=d),Gt(E[C])&&E[C](_)}}var Oo=function(){function d(_,E,C,R){C===void 0&&(C=!1);var $=this;$[Qd]=_,$[Ri]=(C?_c:vp)+_;var q=vn;op()&&(q=qs().stringify(R));var Z=(E?" message:"+ds(E):vn)+(R?" props:"+ds(q):vn);$[Ri]+=Z}return d.dataType="MessageData",d}();function od(d,_){return(d||{})[Qo]||new cf(_)}var cf=function(){function d(_){this.identifier="DiagnosticLogger",this.queue=[];var E=0,C={},R,$,q,Z,oe;Qi(d,this,function(ue){oe=Ge(_||{}),ue.consoleLoggingLevel=function(){return R},ue[Vc]=function(_e,Ye,Te,Je,Ae){Ae===void 0&&(Ae=!1);var Ce=new Oo(Ye,Te,Ae,Je);if(Z)throw lr(Ce);var Be=id[_e]||hc;if(Ht(Ce[Ri]))De("throw"+(_e===1?"Critical":"Warning"),Ce);else{if(Ae){var Bt=+Ce[Qd];!C[Bt]&&R>=_e&&(ue[Be](Ce[Ri]),C[Bt]=!0)}else R>=_e&&ue[Be](Ce[Ri]);Pe(_e,Ce)}},ue.debugToConsole=function(_e){ko("debug",_e),De("warning",_e)},ue[Gc]=function(_e){ko("warn",_e),De("warning",_e)},ue.errorToConsole=function(_e){ko("error",_e),De("error",_e)},ue.resetInternalMessageCount=function(){E=0,C={}},ue[jr]=Pe,ue[wn]=function(_e){oe&&oe.rm(),oe=null};function Pe(_e,Ye){if(!Ve()){var Te=!0,Je=mp+Ye[Qd];if(C[Je]?Te=!1:C[Je]=!0,Te&&(_e<=$&&(ue.queue[ii](Ye),E++,De(_e===1?"error":"warn",Ye)),E===q)){var Ae="Internal events throttle limit per PageView reached for this app.",Ce=new Oo(23,Ae,!1);ue.queue[ii](Ce),_e===1?ue.errorToConsole(Ae):ue[Gc](Ae)}}}function Ge(_e){return mc(Nu(_e,hp,ue).cfg,function(Ye){var Te=Ye.cfg;R=Te[Wl],$=Te.loggingLevelTelemetry,q=Te.maxMessageLimit,Z=Te.enableDebug})}function Ve(){return E>=q}function De(_e,Ye){var Te=Ao(_||{});Te&&Te[Ms]&&Te[Ms](_e,Ye)}})}return d.__ieDyn=1,d}();function sl(d){return d||new cf}function ka(d,_,E,C,R,$){$===void 0&&($=!1),sl(d)[Vc](_,E,C,R,$)}function ps(d,_){sl(d)[Gc](_)}var sd="ctx",za="ParentContextKey",Vs="ChildrenContextKey",lf=function(){function d(_,E,C){var R=this;if(R.start=Di(),R[Wv]=_,R[Su]=C,R[bu]=function(){return!1},Gt(E)){var $;En(R,"payload",{g:function(){return!$&&Gt(E)&&($=E(),E=null),$}})}R[Br]=function(q){return q?q===d[za]||q===d[Vs]?R[q]:(R[sd]||{})[q]:null},R[Eo]=function(q,Z){if(q)if(q===d[za])R[q]||(R[bu]=function(){return!0}),R[q]=Z;else if(q===d[Vs])R[q]=Z;else{var oe=R[sd]=R[sd]||{};oe[q]=Z}},R[Yr]=function(){var q=0,Z=R[Br](d[Vs]);if(zt(Z))for(var oe=0;oe<Z[Zr];oe++){var ue=Z[oe];ue&&(q+=ue[Zu])}R[Zu]=Di()-R.start,R.exTime=R[Zu]-q,R[Yr]=function(){}}}return d.ParentContextKey="parent",d.ChildrenContextKey="childEvts",d}(),vs="CoreUtils.doPerf";function Ia(d,_,E,C,R){if(d){var $=d;if($[Ii]&&($=$[Ii]()),$){var q=void 0,Z=$[Br](vs);try{if(q=$.create(_(),C,R),q){if(Z&&q[Eo]&&(q[Eo](lf[za],Z),Z[Br]&&Z[Eo])){var oe=Z[Br](lf[Vs]);oe||(oe=[],Z[Eo](lf[Vs],oe)),oe[ii](q)}return $[Eo](vs,q),E(q)}}catch(ue){q&&q[Eo]&&q[Eo]("exception",ue)}finally{q&&$.fire(q),$[Eo](vs,Z)}}}return E()}var Du=nl("plugin");function ud(d){return Du.get(d,"state",{},!0)}var ul="TelemetryPluginChain",Cu="_hasRun",em="_getTelCtx",cv=0;function tm(d,_,E){for(;d;){if(d[Xd]()===E)return d;d=d[es]()}return cd([E],_.config||{},_)}function cl(d,_,E,C){var R=null,$=[];_||(_=Nu({},null,E[Qo])),C!==null&&(R=C?tm(d,E,C):d);var q={_next:oe,ctx:{core:function(){return E},diagLog:function(){return od(E,_.cfg)},getCfg:function(){return _.cfg},getExtCfg:Pe,getConfig:Ge,hasNext:function(){return!!R},getNext:function(){return R},setNext:function(De){R=De},iterate:Ve,onComplete:Z}};function Z(De,_e){for(var Ye=[],Te=2;Te<arguments.length;Te++)Ye[Te-2]=arguments[Te];De&&$[ii]({func:De,self:Ht(_e)?q.ctx:_e,args:Ye})}function oe(){var De=R;if(R=De?De[es]():null,!De){var _e=$;_e&&_e[Zr]>0&&(gr(_e,function(Ye){try{Ye.func.call(Ye.self,Ye.args)}catch(Te){ka(E[Qo],2,73,"Unexpected Exception during onComplete - "+lr(Te))}}),$=[])}return De}function ue(De,_e){var Ye=null,Te=_.cfg;if(Te&&De){var Je=Te[ic];!Je&&_e&&(Je={}),Te[ic]=Je,Je=_.ref(Te,ic),Je&&(Ye=Je[De],!Ye&&_e&&(Ye={}),Je[De]=Ye,Ye=_.ref(Je,De))}return Ye}function Pe(De,_e){var Ye=ue(De,!0);return _e&&Mr(_e,function(Te,Je){if(rt(Ye[Te])){var Ae=_.cfg[Te];(Ae||!rt(Ae))&&(Ye[Te]=Ae)}rd(_,Ye,Te,Je)}),_[Xo](Ye,_e)}function Ge(De,_e,Ye){Ye===void 0&&(Ye=!1);var Te,Je=ue(De,!1),Ae=_.cfg;return Je&&(Je[_e]||!rt(Je[_e]))?Te=Je[_e]:(Ae[_e]||!rt(Ae[_e]))&&(Te=Ae[_e]),Te||!rt(Te)?Te:Ye}function Ve(De){for(var _e;_e=q._next();){var Ye=_e[Xd]();Ye&&De(Ye)}}return q}function ff(d,_,E,C){var R=Nu(_),$=cl(d,R,E,C),q=$.ctx;function Z(ue){var Pe=$._next();return Pe&&Pe[ns](ue,q),!Pe}function oe(ue,Pe){return ue===void 0&&(ue=null),zt(ue)&&(ue=cd(ue,R.cfg,E,Pe)),ff(ue||q[es](),R.cfg,E,Pe)}return q[So]=Z,q[Xu]=oe,q}function lv(d,_,E){var C=Nu(_.config),R=cl(d,C,_,E),$=R.ctx;function q(oe){var ue=R._next();return ue&&ue[wn]($,oe),!ue}function Z(oe,ue){return oe===void 0&&(oe=null),zt(oe)&&(oe=cd(oe,C.cfg,_,ue)),lv(oe||$[es](),_,ue)}return $[So]=q,$[Xu]=Z,$}function Vm(d,_,E){var C=Nu(_.config),R=cl(d,C,_,E),$=R.ctx;function q(oe){return $.iterate(function(ue){Gt(ue[wo])&&ue[wo]($,oe)})}function Z(oe,ue){return oe===void 0&&(oe=null),zt(oe)&&(oe=cd(oe,C.cfg,_,ue)),Vm(oe||$[es](),_,ue)}return $[So]=q,$[Xu]=Z,$}function cd(d,_,E,C){var R=null,$=!C;if(zt(d)&&d[Zr]>0){var q=null;gr(d,function(Z){if(!$&&C===Z&&($=!0),$&&Z&&Gt(Z[ns])){var oe=_p(Z,_,E);R||(R=oe),q&&q._setNext(oe),q=oe}})}return C&&!R?cd([C],_,E):R}function _p(d,_,E){var C=null,R=Gt(d[ns]),$=Gt(d[ki]),q;d?q=d[Zd]+"-"+d[ep]+"-"+cv++:q="Unknown-0-"+cv++;var Z={getPlugin:function(){return d},getNext:function(){return C},processTelemetry:Pe,unload:Ge,update:Ve,_id:q,_setNext:function(De){C=De}};function oe(){var De;return d&&Gt(d[em])&&(De=d[em]()),De||(De=ff(Z,_,E)),De}function ue(De,_e,Ye,Te,Je){var Ae=!1,Ce=d?d[Zd]:ul,Be=De[Cu];return Be||(Be=De[Cu]={}),De.setNext(C),d&&Ia(De[sa](),function(){return Ce+":"+Ye},function(){Be[q]=!0;try{var Bt=C?C._id:vn;Bt&&(Be[Bt]=!1),Ae=_e(De)}catch(fr){var Vt=C?Be[C._id]:!0;Vt&&(Ae=!0),(!C||!Vt)&&ka(De[Ms](),1,73,"Plugin ["+Ce+"] failed during "+Ye+" - "+lr(fr)+", run flags: "+lr(Be))}},Te,Je),Ae}function Pe(De,_e){_e=_e||oe();function Ye(Te){if(!d||!R)return!1;var Je=ud(d);return Je[Qu]||Je[Ui]?!1:($&&d[ki](C),d[ns](De,Te),!0)}ue(_e,Ye,"processTelemetry",function(){return{item:De}},!De.sync)||_e[So](De)}function Ge(De,_e){function Ye(){var Te=!1;if(d){var Je=ud(d),Ae=d[sa]||Je[sa];d&&(!Ae||Ae===De.core())&&!Je[Qu]&&(Je[sa]=null,Je[Qu]=!0,Je[Vl]=!1,d[Qu]&&d[Qu](De,_e)===!0&&(Te=!0))}return Te}ue(De,Ye,"unload",function(){},_e[Su])||De[So](_e)}function Ve(De,_e){function Ye(){var Te=!1;if(d){var Je=ud(d),Ae=d[sa]||Je[sa];d&&(!Ae||Ae===De.core())&&!Je[Qu]&&d[wo]&&d[wo](De,_e)===!0&&(Te=!0)}return Te}ue(De,Ye,"update",function(){},!1)||De[So](_e)}return tr(Z)}function ll(){var d=[];function _(C){C&&d[ii](C)}function E(C,R){gr(d,function($){try{$(C,R)}catch(q){ka(C[Ms](),2,73,"Unexpected error calling unload handler - "+lr(q))}}),d=[]}return{add:_,run:E}}function xu(){var d=[];function _(C){var R=d;d=[],gr(R,function($){try{($.rm||$.remove).call($)}catch(q){ka(C,2,73,"Unloading:"+lr(q))}})}function E(C){C&&Uf(d,C)}return{run:_,add:E}}var gp,ms="getPlugin",ld=(gp={},gp[ic]={isVal:as,v:{}},gp),df=function(){function d(){var _=this,E,C,R,$,q;ue(),Qi(d,_,function(Pe){Pe[zf]=function(Ge,Ve,De,_e){oe(Ge,Ve,_e),E=!0},Pe[Qu]=function(Ge,Ve){var De,_e=Pe[sa];if(!_e||Ge&&_e!==Ge[sa]())return;var Ye,Te=!1,Je=Ge||lv(null,_e,R&&R[ms]?R[ms]():R),Ae=Ve||(De={reason:0},De[Su]=!1,De);function Ce(){Te||(Te=!0,$.run(Je,Ve),q.run(Je[Ms]()),Ye===!0&&Je[So](Ae),ue())}return!Pe[or]||Pe[or](Je,Ae,Ce)!==!0?Ce():Ye=!0,Ye},Pe[wo]=function(Ge,Ve){var De=Pe[sa];if(!De||Ge&&De!==Ge[sa]())return;var _e,Ye=!1,Te=Ge||Vm(null,De,R&&R[ms]?R[ms]():R),Je=Ve||{reason:0};function Ae(){Ye||(Ye=!0,oe(Te.getCfg(),Te.core(),Te[es]()))}return!Pe._doUpdate||Pe._doUpdate(Te,Je,Ae)!==!0?Ae():_e=!0,_e},Zf(Pe,"_addUnloadCb",function(){return $},"add"),Zf(Pe,"_addHook",function(){return q},"add"),En(Pe,"_unloadHooks",{g:function(){return q}})}),_[Ms]=function(Pe){return Z(Pe)[Ms]()},_[Vl]=function(){return E},_.setInitialized=function(Pe){E=Pe},_[ki]=function(Pe){R=Pe},_[So]=function(Pe,Ge){Ge?Ge[So](Pe):R&&Gt(R[ns])&&R[ns](Pe,null)},_._getTelCtx=Z;function Z(Pe){Pe===void 0&&(Pe=null);var Ge=Pe;if(!Ge){var Ve=C||ff(null,{},_[sa]);R&&R[ms]?Ge=Ve[Xu](null,R[ms]):Ge=Ve[Xu](null,R)}return Ge}function oe(Pe,Ge,Ve){Nu(Pe,ld,od(Ge)),!Ve&&Ge&&(Ve=Ge[to]()[es]());var De=R;R&&R[ms]&&(De=R[ms]()),_[sa]=Ge,C=ff(Ve,Pe,Ge,De)}function ue(){E=!1,_[sa]=null,C=null,R=null,q=xu(),$=ll()}}return d.__ieDyn=1,d}(),hs="",gc="NoResponseBody",rm="&"+gc+"=true",fl="POST",Km=function(){function d(){var _=0,E,C,R,$,q,Z,oe,ue,Pe,Ge,Ve,De,_e,Ye;Qi(d,this,function(Te,Je){var Ae=!0;Ma(),Te[zf]=function(et,mt){R=mt,C&&ka(R,1,28,"Sender is already initialized"),Te.SetConfig(et),C=!0},Te._getDbgPlgTargets=function(){return[C,$,Z,E]},Te.SetConfig=function(et){try{if(q=et.senderOnCompleteCallBack||{},Z=!!et.disableCredentials,oe=et.fetchCredentials,$=!!et.isOneDs,E=!!et.enableSendPromise,Pe=!!et.disableXhr,Ge=!!et.disableBeacon,Ve=!!et.disableBeaconSync,Ye=et.timeWrapper,_e=!!et.addNoResponse,De=!!et.disableFetchKeepAlive,ue={sendPOST:Jr},$||(Ae=!1),Z){var mt=ip();mt&&mt.protocol&&mt.protocol[Ei]()==="file:"&&(Ae=!1)}return!0}catch{}return!1},Te.getSyncFetchPayload=function(){return _},Te.getSenderInst=function(et,mt){return et&&et[Zr]?Vt(et,mt):null},Te.getFallbackInst=function(){return ue},Te[or]=function(et,mt){Ma()};function Ce(et,mt){fr(mt,200,{},et)}function Be(et,mt){ka(R,2,26,"Failed to send telemetry.",{message:et}),fr(mt,400,{})}function Bt(et){Be("No endpoint url is provided for the batch",et)}function Vt(et,mt){for(var br,mr=0,It=null,Rr=0;It==null&&Rr<et[Zr];)mr=et[Rr],!Pe&&mr===1?dc()?It=$r:ci()&&(It=Jr):mr===2&&tl(mt)&&(!mt||!De)?It=Bn:mr===3&&ed()&&(mt?!Ve:!Ge)&&(It=rn),Rr++;return It?(br={_transport:mr,_isSync:mt},br[Vf]=It,br):null}function fr(et,mt,br,mr){try{et&&et(mt,br,mr)}catch{}}function Cr(et,mt){var br=ya(),mr=et[To];if(!mr)return Bt(mt),!0;mr=et[To]+(_e?rm:hs);var It=et[Mi],Rr=$?It:new Blob([It],{type:"text/plain;charset=UTF-8"}),wt=br.sendBeacon(mr,Rr);return wt}function rn(et,mt,br){var mr=et[Mi];try{if(mr)if(Cr(et,mt))Ce(hs,mt);else{var It=q&&q.beaconOnRetry;It&&Gt(It)?It(et,mt,Cr):(ue&&ue[Vf](et,mt,!0),ka(R,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Rr){$&&ps(R,"Failed to send telemetry using sendBeacon API. Ex:"+lr(Rr)),fr(mt,$?0:400,{},hs)}}function Jr(et,mt,br){var mr,It,Rr,wt=et[Io]||{};!br&&E&&(mr=Fi(function(Cn,fi){It=Cn,Rr=fi})),$&&br&&et.disableXhrSync&&(br=!1);var _n=et[To];if(!_n){Bt(mt),It&&It(!1);return}var ht=zm(fl,_n,Ae,!0,br,et[$n]);$||ht[no]("Content-type","application/json"),gr(Rn(wt),function(Cn){ht[no](Cn,wt[Cn])}),ht.onreadystatechange=function(){$||(Dn(ht),ht.readyState===4&&It&&It(!0))},ht.onload=function(){$&&Dn(ht)};function Dn(Cn){var fi=q&&q.xhrOnComplete,Yu=fi&&Gt(fi);if(Yu)fi(Cn,mt,et);else{var Es=ui(Cn);fr(mt,Cn[bo],cc(Cn,$),Es)}}return ht.onerror=function(Cn){fr(mt,$?ht[bo]:400,cc(ht,$),$?hs:Jv(ht)),Rr&&Rr(Cn)},ht.ontimeout=function(){fr(mt,$?ht[bo]:500,cc(ht,$),$?hs:Jv(ht)),It&&It(!1)},ht.send(et[Mi]),mr}function Bn(et,mt,br){var mr,It=et[To],Rr=et[Mi],wt=$?Rr:new Blob([Rr],{type:"application/json"}),_n,ht,Dn,Cn=new Headers,fi=Rr[Zr],Yu=!1,Es=!1,Op=et[Io]||{},tu=(mr={method:fl,body:wt},mr[uf]=!0,mr);et.headers&&Rn(et.headers)[Zr]>0&&(gr(Rn(Op),function(bn){Cn.append(bn,Op[bn])}),tu[Io]=Cn),oe?tu.credentials=oe:Ae&&$&&(tu.credentials="include"),br&&(tu.keepalive=!0,_+=fi,$?et._sendReason===2&&(Yu=!0,_e&&(It+=rm)):Yu=!0);var jo=new Request(It,tu);try{jo[uf]=!0}catch{}if(!br&&E&&(_n=Fi(function(bn,Jn){ht=bn,Dn=Jn})),!It){Bt(mt),ht&&ht(!1);return}function xc(bn){fr(mt,$?0:400,{},$?hs:bn)}function la(bn,Jn,di){var Pc=bn[bo],Ad=q.fetchOnComplete;Ad&&Gt(Ad)?Ad(bn,mt,di||hs,Jn):fr(mt,Pc,{},di||hs)}try{tc(fetch($?It:jo,$?tu:null),function(bn){if(br&&(_-=fi,fi=0),!Es)if(Es=!0,bn.rejected)xc(bn.reason&&bn.reason[Ri]),Dn&&Dn(bn.reason);else{var Jn=bn[Kl];try{!$&&!Jn.ok?(xc(Jn.statusText),ht&&ht(!1)):$&&!Jn.body?(la(Jn,null,hs),ht&&ht(!0)):tc(Jn.text(),function(di){la(Jn,et,di[Kl]),ht&&ht(!0)})}catch(di){xc(lr(di)),Dn&&Dn(di)}}})}catch(bn){Es||(xc(lr(bn)),Dn&&Dn(bn))}return Yu&&!Es&&(Es=!0,fr(mt,200,{}),ht&&ht(!0)),$&&!Es&&et[$n]>0&&Ye&&Ye.set(function(){Es||(Es=!0,fr(mt,500,{}),ht&&ht(!0))},et[$n]),_n}function $r(et,mt,br){var mr=gi(),It=new XDomainRequest,Rr=et[Mi];It.onload=function(){var Cn=ui(It),fi=q&&q.xdrOnComplete;fi&&Gt(fi)?fi(It,mt,et):fr(mt,200,{},Cn)},It.onerror=function(){fr(mt,400,{},$?hs:Zc(It))},It.ontimeout=function(){fr(mt,500,{})},It.onprogress=function(){};var wt=mr&&mr.location&&mr.location[Gf]||"",_n=et[To];if(!_n){Bt(mt);return}if(!$&&_n.lastIndexOf(wt,0)!==0){var ht="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";ka(R,2,40,". "+ht),Be(ht,mt);return}var Dn=$?_n:_n[oi](/^(https?:)/,"");It.open(fl,Dn),et[$n]&&(It[$n]=et[$n]),It.send(Rr),$&&br?Ye&&Ye.set(function(){It.send(Rr)},0):It.send(Rr)}function Ma(){_=0,C=!1,E=!1,R=null,$=null,q=null,Z=null,oe=null,ue=null,Pe=!1,Ge=!1,Ve=!1,De=!1,_e=!1,Ye=null}})}return d.__ieDyn=1,d}(),nm="on",pf="attachEvent",fv="addEventListener",am="detachEvent",Pu="removeEventListener",so="events",Ks="visibilitychange",Au="pagehide",dl="pageshow",pl="unload",fd="beforeunload",vf=na("aiEvtPageHide"),Mo=na("aiEvtPageShow"),yc=/\.[\.]+/g,im=/[\.]+$/,om=1,yp=nl("events"),Sp=/^([^.]*)(?:\.(.+)|)/;function Lo(d){return d&&d[oi]?d[oi](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,vn):d}function Ru(d,_){var E;if(_){var C=vn;zt(_)?(C=vn,gr(_,function($){$=Lo($),$&&($[0]!=="."&&($="."+$),C+=$)})):C=Lo(_),C&&(C[0]!=="."&&(C="."+C),d=(d||vn)+C)}var R=Sp.exec(d||vn)||[];return E={},E[dt]=R[1],E.ns=(R[2]||vn).replace(yc,".").replace(im,vn)[wu](".").sort().join("."),E}function vl(d,_,E){E===void 0&&(E=!0);var C=yp.get(d,so,{},E),R=C[_];return R||(R=C[_]=[]),R}function sm(d,_,E,C){d&&_&&_[dt]&&(d[Pu]?d[Pu](_[dt],E,C):d[am]&&d[am](nm+_[dt],E))}function wp(d,_,E,C){var R=!1;return d&&_&&_[dt]&&E&&(d[fv]?(d[fv](_[dt],E,C),R=!0):d[pf]&&(d[pf](nm+_[dt],E),R=!0)),R}function um(d,_,E,C){for(var R=_[Zr];R--;){var $=_[R];$&&(!E.ns||E.ns===$.evtName.ns)&&(!C||C($))&&(sm(d,$.evtName,$[ec],$.capture),_[Jd](R,1))}}function dv(d,_,E){if(_[dt])um(d,vl(d,_[dt]),_,E);else{var C=yp.get(d,so,{});Mr(C,function(R,$){um(d,$,_,E)}),Rn(C)[Zr]===0&&yp.kill(d,so)}}function bp(d,_){var E;return _?(zt(_)?E=[d].concat(_):E=[d,_],E=Ru("xx",E).ns[wu](".")):E=d,E}function Sc(d,_,E,C,R){var $;R===void 0&&(R=!1);var q=!1;if(d)try{var Z=Ru(_,C);if(q=wp(d,Z,E,R),q&&yp.accept(d)){var oe=($={guid:om++,evtName:Z},$[ec]=E,$.capture=R,$);vl(d,Z.type)[ii](oe)}}catch{}return q}function uo(d,_,E,C,R){if(R===void 0&&(R=!1),d)try{var $=Ru(_,C),q=!1;dv(d,$,function(Z){return $.ns&&!E||Z[ec]===E?(q=!0,!0):!1}),q||sm(d,$,E,R)}catch{}}function dd(d,_,E){var C=!1,R=gi();R&&(C=Sc(R,d,_,E),C=Sc(R.body,d,_,E)||C);var $=ta();return $&&(C=Sc($,d,_,E)||C),C}function ml(d,_,E){var C=gi();C&&(uo(C,d,_,E),uo(C.body,d,_,E));var R=ta();R&&uo(R,d,_,E)}function Fo(d,_,E,C){var R=!1;return _&&d&&d[Zr]>0&&gr(d,function($){$&&(!E||Wo(E,$)===-1)&&(R=dd($,_,C)||R)}),R}function Eh(d,_,E,C){var R=!1;return _&&d&&zt(d)&&(R=Fo(d,_,E,C),!R&&E&&E[Zr]>0&&(R=Fo(d,_,null,C))),R}function Ep(d,_,E){d&&zt(d)&&gr(d,function(C){C&&ml(C,_,E)})}function Wm(d,_,E){return Eh([fd,pl,Au],d,_,E)}function Th(d,_){Ep([fd,pl,Au],d,_)}function Oa(d,_,E){function C(q){var Z=ta();d&&Z&&Z.visibilityState==="hidden"&&d(q)}var R=bp(vf,E),$=Fo([Au],d,_,R);return(!_||Wo(_,Ks)===-1)&&($=Fo([Ks],C,_,R)||$),!$&&_&&($=Oa(d,null,E)),$}function pd(d,_){var E=bp(vf,_);Ep([Au],d,E),Ep([Ks],null,E)}function vd(d,_,E){function C(q){var Z=ta();d&&Z&&Z.visibilityState==="visible"&&d(q)}var R=bp(Mo,E),$=Fo([dl],d,_,R);return $=Fo([Ks],C,_,R)||$,!$&&_&&($=vd(d,null,E)),$}function cm(d,_){var E=bp(Mo,_);Ep([dl],d,E),Ep([Ks],null,E)}var hl="",li="timings",co="value",md="kind",ku="length",wc="processTelemetryStart",_s,pv="4.3.5",lm="1DS-Web-JS-"+pv,vt=D.hasOwnProperty,Ou=(_s={},_s[0]=0,_s[2]=6,_s[1]=1,_s[3]=7,_s[4098]=6,_s[4097]=1,_s[4099]=7,_s);function Ws(d){return!(d===hl||rt(d))}function mf(d){if(d){var _=Hd(d,"-");if(_>-1)return ga(d,_)}return hl}function fm(d,_,E){if(!_&&!Ws(_)||typeof d!="string")return null;var C=typeof _;if(C==="string"||C==="number"||C==="boolean"||zt(_))_={value:_};else if(C==="object"&&!vt.call(_,"value"))_={value:E?JSON.stringify(_):_};else if(rt(_[co])||_[co]===hl||!su(_[co])&&!er(_[co])&&!ea(_[co])&&!zt(_[co]))return null;if(zt(_[co])&&!_l(_[co]))return null;if(!rt(_[md])){if(zt(_[co])||!dm(_[md]))return null;_[co]=_[co].toString()}return _}function bc(d,_,E){var C=-1;if(!Ht(d))if(_>0&&(_===32?C=8192:_<=13&&(C=_<<5)),Tp(E))C===-1&&(C=0),C|=E;else{var R=Ou[Tc(d)]||-1;C!==-1&&R!==-1?C|=R:R===6&&(C=R)}return C}function hd(d,_,E,C,R){var $={},q=!1,Z=0,oe=arguments[ku],ue=arguments;for(ea(ue[0])&&(q=ue[0],Z++);Z<oe;Z++){var d=ue[Z];Mr(d,function(Ge,Ve){q&&Ve&&Ho(Ve)?zt(Ve)?($[Ge]=$[Ge]||[],gr(Ve,function(De,_e){De&&Ho(De)?$[Ge][_e]=hd(!0,$[Ge][_e],De):$[Ge][_e]=De})):$[Ge]=hd(!0,$[Ge],Ve):$[Ge]=Ve})}return $}var gs=Bd;function dm(d){return d===0||d>0&&d<=13||d===32}function Tp(d){return d>=0&&d<=9}function _l(d){return d[ku]>0}function Ec(d,_){var E=d;E[li]=E[li]||{},E[li][wc]=E[li][wc]||{},E[li][wc][_]=gs()}function Tc(d){var _=0;if(d!=null){var E=typeof d;E==="string"?_=1:E==="number"?_=2:E==="boolean"?_=3:E===u&&(_=4,zt(d)?(_=4096,d[ku]>0&&(_|=Tc(d[0]))):vt.call(d,"value")&&(_=8192|Tc(d[co])))}return _}function vv(){return!!dn("chrome")}function Wr(d){return d>0}var ys="",mv="drop",hv="send",Js="requeue",Ip="rspFail",_v="oth",gv="no-cache, no-store",_d="application/x-json-stream",gd="cache-control",gl="content-type",Ic="kill-tokens",Np="kill-duration",yl="time-delta-millis",yv="client-version",lo="client-id",Sv="time-delta-to-apply-millis",yd="upload-time",pm="apikey",Ss="AuthMsaDeviceTicket",Jm="WebAuthToken",Mu="AuthXToken",wv="NoResponseBody",Sl="msfpc",vm="trace",Uo="user",ws="allowRequestSending",kn="firstRequestSent",hf="shouldAddClockSkewHeaders",wl="getClockSkewHeaderValue",Sd="setClockSkew",sr="length",Yi="concat",$i="iKey",Na="count",bl="events",mn="push",El="split",Zs="splice",Dp="toLowerCase",Xs="hdrs",bv="useHdrs",Lu="initialize",Ev="setTimeoutOverride",Tv="clearTimeoutOverride",f="payloadPreprocessor",m="overrideEndpointUrl",y="avoidOptions",N="disableEventTimings",U="stringifyObjects",G="enableCompoundKey",V="disableXhrSync",te="disableFetchKeepAlive",pe="addNoResponse",he="excludeCsMetaData",We="useSendBeacon",Ot="fetchCredentials",rr="alwaysUseXhrOverride",ur="unloadTransports",st="serializeOfflineEvt",nr="getOfflineRequestDetails",Ut="createPayload",Nr="createOneDSPayload",Dr="payloadBlob",Pt="headers",In="_thePayload",_f="urlString",Nn="batches",qi="sendType",wd="addHeader",Iv="canSendRequest",bd="sendQueuedRequests",Ed="isCompletelyIdle",Cp="setUnloading",mm="isTenantKilled",ke="resume",Et="sendSynchronousBatch",qt="_transport",zr="getWParam",un="isBeacon",hn="timings",ca="isTeardown",Fu="isSync",bs="data",Uu="timeout",Tl="_sendReason",hm="setKillSwitchTenants",xp="_backOffTransmission",gf="identifier",Nc="disableOptimizeObj",z_="ignoreMc1Ms0CookieProcessing",Ih="eventsLimitInMem",u_="autoFlushEventsLimit",Zm="disableAutoBatchFlushLimit",G_="overrideInstrumentationKey",yf="disableTelemetry",Nv="baseData",_m="sendAttempt",Sf="latency",Dv="sync";function Nh(d){var _=(d.ext||{}).intweb;return _&&Ws(_[Sl])?_[Sl]:null}function c_(d){for(var _=null,E=0;_===null&&E<d[sr];E++)_=Nh(d[E]);return _}var Td=function(){function d(_,E){var C=E?[][Yi](E):[],R=this,$=c_(C);R[$i]=function(){return _},R.Msfpc=function(){return $||ys},R[Na]=function(){return C[sr]},R[bl]=function(){return C},R.addEvent=function(q){return q?(C[mn](q),$||($=Nh(q)),!0):!1},R[El]=function(q,Z){var oe;if(q<C[sr]){var ue=C[sr]-q;rt(Z)||(ue=Z<ue?Z:ue),oe=C[Zs](q,ue),$=c_(C)}return new d(_,oe)}}return d.create=function(_,E){return new d(_,E)},d}(),l_=function(){function d(){var _=!0,E=!0,C=!0,R="use-collector-delta",$=!1;Qi(d,this,function(q){q[ws]=function(){return _},q[kn]=function(){C&&(C=!1,$||(_=!1))},q[hf]=function(){return E},q[wl]=function(){return R},q[Sd]=function(Z){$||(Z?(R=Z,E=!0,$=!0):E=!1,_=!0)}})}return d.__ieDyn=1,d}(),V_=1e3,Dh=function(){function d(){var _={};function E(C){var R=[];return C&&gr(C,function($){R[mn](Ci($))}),R}Qi(d,this,function(C){C[hm]=function(R,$){if(R&&$)try{var q=E(R[El](","));if($==="this-request-only")return q;for(var Z=parseInt($,10)*V_,oe=0;oe<q[sr];++oe)_[q[oe]]=Di()+Z}catch{return[]}return[]},C[mm]=function(R){var $=_,q=Ci(R);return $[q]!==void 0&&$[q]>Di()?!0:(delete $[q],!1)}})}return d.__ieDyn=1,d}(),gm=.8,Ch=1.2,Xm=3e3,Cv=6e5;function Id(d){return!(d>=300&&d<500&&d!=429||d==501||d==505)}function xh(d){var _=0,E=Xm*gm,C=Xm*Ch,R=Math.floor(Math.random()*(C-E))+E;return _=Math.pow(2,d)*R,Math.min(_,Cv)}var ym=20,Ar=3984588,Qs=65e3,Nd=2e6,xv=Math.min(Nd,Qs),Pv="metadata",Sm="f",wf=/\./,Pp=function(){function d(_,E,C,R,$,q){var Z="data",oe="baseData",ue="ext",Pe=!!R,Ge=!0,Ve=E,De={},_e=!!q,Ye=$||bc;Qi(d,this,function(Te){Te.createPayload=function(Ce,Be,Bt,Vt,fr,Cr){return{apiKeys:[],payloadBlob:ys,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:Ce,isTeardown:Be,isSync:Bt,isBeacon:Vt,sendType:Cr,sendReason:fr}},Te.appendPayload=function(Ce,Be,Bt){var Vt=Ce&&Be&&!Ce.overflow;return Vt&&Ia(_,function(){return"Serializer:appendPayload"},function(){for(var fr=Be.events(),Cr=Ce.payloadBlob,rn=Ce.numEvents,Jr=!1,Bn=[],$r=[],Ma=Ce.isBeacon,et=Ma?Qs:Ar,mt=Ma?xv:Nd,br=0,mr=0;br<fr.length;){var It=fr[br];if(It){if(rn>=Bt){Ce.overflow=Be.split(br);break}var Rr=Te.getEventBlob(It);if(Rr&&Rr.length<=mt){var wt=Rr.length,_n=Cr.length;if(_n+wt>et){Ce.overflow=Be.split(br);break}Cr&&(Cr+=`
`),Cr+=Rr,mr++,mr>ym&&(lu(Cr,0,1),mr=0),Jr=!0,rn++}else Rr?Bn.push(It):$r.push(It),fr.splice(br,1),br--}br++}if(Bn.length>0&&Ce.sizeExceed.push(Td.create(Be.iKey(),Bn)),$r.length>0&&Ce.failedEvts.push(Td.create(Be.iKey(),$r)),Jr){Ce.batches.push(Be),Ce.payloadBlob=Cr,Ce.numEvents=rn;var ht=Be.iKey();Wo(Ce.apiKeys,ht)===-1&&Ce.apiKeys.push(ht)}},function(){return{payload:Ce,theBatch:{iKey:Be.iKey(),evts:Be.events()},max:Bt}}),Vt},Te.getEventBlob=function(Ce){try{return Ia(_,function(){return"Serializer.getEventBlob"},function(){var Be={};Be.name=Ce.name,Be.time=Ce.time,Be.ver=Ce.ver,Be.iKey="o:"+mf(Ce.iKey);var Bt={},Vt;_e||(Vt=function(Jr,Bn,$r){f_(Ye,Bt,Jr,Bn,$r)});var fr=Ce[ue];fr&&(Be[ue]=Bt,Mr(fr,function(Jr,Bn){var $r=Bt[Jr]={};Ae(Bn,$r,"ext."+Jr,!0,null,null,!0)}));var Cr=Be[Z]={};Cr.baseType=Ce.baseType;var rn=Cr[oe]={};return Ae(Ce.baseData,rn,oe,!1,[oe],Vt,Ge),Ae(Ce.data,Cr,Z,!1,[],Vt,Ge),JSON.stringify(Be)},function(){return{item:Ce}})}catch{return null}};function Je(Ce,Be){var Bt=De[Ce];return Bt===void 0&&(Ce.length>=7&&(Bt=Sn(Ce,"ext.metadata")||Sn(Ce,"ext.web")),De[Ce]=Bt),Bt}function Ae(Ce,Be,Bt,Vt,fr,Cr,rn){Mr(Ce,function(Jr,Bn){var $r=null;if(Bn||Ws(Bn)){var Ma=Bt,et=Jr,mt=fr,br=Be;if(Pe&&!Vt&&wf.test(Jr)){var mr=Jr.split("."),It=mr.length;if(It>1){mt&&(mt=mt.slice());for(var Rr=0;Rr<It-1;Rr++){var wt=mr[Rr];br=br[wt]=br[wt]||{},Ma+="."+wt,mt&&mt.push(wt)}et=mr[It-1]}}var _n=Vt&&Je(Ma);if(!_n&&Ve&&Ve.handleField(Ma,et)?$r=Ve.value(Ma,et,Bn,C):$r=fm(et,Bn,C),$r){var ht=$r.value;if(br[et]=ht,Cr&&Cr(mt,et,$r),rn&&typeof ht=="object"&&!zt(ht)){var Dn=mt;Dn&&(Dn=Dn.slice(),Dn.push(et)),Ae(Bn,ht,Ma+"."+et,Vt,Dn,Cr,rn)}}}})}})}return d.__ieDyn=1,d}();function f_(d,_,E,C,R){if(R&&_){var $=d(R.value,R.kind,R.propertyType);if($>-1){var q=_[Pv];q||(q=_[Pv]={f:{}});var Z=q[Sm];if(Z||(Z=q[Sm]={}),E)for(var oe=0;oe<E.length;oe++){var ue=E[oe];Z[ue]||(Z[ue]={f:{}});var Pe=Z[ue][Sm];Pe||(Pe=Z[ue][Sm]={}),Z=Pe}Z=Z[C]={},zt(R.value)?Z.a={t:$}:Z.t=$}}}function Ap(d,_){return{set:function(E,C){for(var R=[],$=2;$<arguments.length;$++)R[$-2]=arguments[$];return Qp([d,_],E,C,R)}}}var Il,Nl="sendAttempt",Dl="&"+wv+"=true",Dc="?cors=true&"+gl[Dp]()+"="+_d,Cc=(Il={},Il[1]=Js,Il[100]=Js,Il[200]="sent",Il[8004]=mv,Il[8003]=mv,Il),ju={},bf={};function eu(d,_,E){ju[d]=_,E!==!1&&(bf[_]=d)}eu(Ss,Ss,!1),eu(yv,yv),eu(lo,"Client-Id"),eu(pm,pm),eu(Sv,Sv),eu(yd,yd),eu(Mu,Mu);function Ef(d,_){var E=!1;if(d&&_){var C=Rn(d);if(C&&C[sr]>0)for(var R=_[Dp](),$=0;$<C[sr];$++){var q=C[$];if(q&&ir(_,q)&&q[Dp]()===R){E=!0;break}}}return E}function Dd(d,_,E,C){_&&E&&E[sr]>0&&(C&&ju[_]?(d[Xs][ju[_]]=E,d[bv]=!0):d.url+="&"+_+"="+E)}function Ph(d,_,E){for(var C=0;C<d[sr];C++)if(d[C].name===_){d[C].value=E;return}d[mn]({name:_,value:E})}function Qm(d,_){for(var E=0;E<d[sr];E++)if(d[E].name===_){d[Zs](E,1);return}}var Tf=function(){function d(_,E,C,R){var $,q,Z,oe,ue=!1,Pe,Ge,Ve,De,_e,Ye,Te,Je,Ae,Ce,Be,Bt,Vt,fr,Cr,rn,Jr,Bn,$r,Ma,et,mt,br,mr,It,Rr,wt,_n;Qi(d,this,function(ht){Es();var Dn=!0;ht[Lu]=function(a,c,p){mr||(_e=c,Bt=c.getCookieMgr(),Ge=p,Ve=Ge.diagLog(),Uf(Ma,mc(a,function(g){var b,x=g.cfg,k=g.cfg.extensionConfig[p.identifier];It=Ap(k[Ev],k[Tv]),Ws(x.anonCookieName)?Ph(Te,"anoncknm",x.anonCookieName):Qm(Te,"anoncknm"),et=k[f],mt=k.payloadListener;var P=k.httpXHROverride,M=k[m]?k[m]:x.endpointUrl;$=M+Dc,fr=Ht(k[y])?!0:!k[y],Be=!k[N];var j=k.valueSanitizer,z=k[U],J=!!x[G];Ht(k[G])||(J=!!k[G]),Cr=k.xhrTimeout,rn=!!k[V],Jr=!!k[te],$r=k[pe]!==!1,Rr=!!k[he],c.getPlugin("LocalStorage")&&(Jr=!0),ue=!ba(),Ce=new Pp(_e,j,z,J,bc,Rr),rt(k[We])||(ue=!!k[We]),k[Ot]&&(_n=k[Ot]);var K=fi();wt?wt.SetConfig(K):(wt=new Km,wt[Lu](K,Ve));var ee=P,X=k[rr]?P:null,ve=k[rr]?P:null,be=[3,2];if(!P){Ye=!1;var Me=[];ba()?(Me=[2,1],be=[2,1,3]):Me=[1,2,3],Me=oc(Me,k.transports),P=Cn(Me,!1),P||ps(Ve,"No available transport to send events"),ee=Cn(Me,!0)}X||(be=oc(be,k[ur]),X=Cn(be,!0)),Bn=!Ye&&(ue&&ed()||!Jr&&tl(!0)),De=(b={},b[0]=P,b[1]=ee||Cn([1,2,3],!0),b[2]=X||ee||Cn([1],!0),b[3]=ve||Cn([2,3],!0)||ee||Cn([1],!0),b)})),mr=!0)},ht.addResponseHandler=function(a){return br[mn](a),{rm:function(){var c=br.indexOf(a);c>=0&&br[Zs](c,1)}}},ht[st]=function(a){try{if(Ce)return Ce.getEventBlob(a)}catch{}return ys},ht[nr]=function(){try{var a=Ce&&Ce[Ut](0,!1,!1,!1,1,0);return Nf(a,fr)}catch{}return null},ht[Nr]=function(a,c){try{var p=[];gr(a,function(P){c&&(P=xo(P));var M=Td.create(P[$i],[P]);p[mn](M)});for(var g=null;p[sr]>0&&Ce;){var b=p.shift();b&&b[Na]()>0&&(g=g||Ce[Ut](0,!1,!1,!1,1,0),Ce.appendPayload(g,b,_))}var x=Nf(g,fr),k={data:g[Dr],urlString:x.url,headers:x[Xs],timeout:Cr,disableXhrSync:rn,disableFetchKeepAlive:Jr};return fr&&(Ef(k[Pt],gd)||(k[Pt][gd]=gv),Ef(k[Pt],gl)||(k[Pt][gl]=_d)),k}catch{}return null};function Cn(a,c){try{return wt&&wt.getSenderInst(a,c)}catch{}return null}ht._getDbgPlgTargets=function(){return[De[0],q,Ce,De,fi(),$]};function fi(){try{var a={xdrOnComplete:Yu,fetchOnComplete:Op,xhrOnComplete:tu,beaconOnRetry:xc},c={enableSendPromise:!1,isOneDs:!0,disableCredentials:!Dn,fetchCredentials:_n,disableXhr:!1,disableBeacon:!ue,disableBeaconSync:!ue,disableFetchKeepAlive:Jr,timeWrapper:It,addNoResponse:$r,senderOnCompleteCallBack:a};return c}catch{}return null}function Yu(a,c,p){var g=ui(a);jo(c,200,{},g),Nm(g)}function Es(){var a;$=null,q=new Dh,Z=!1,oe=new l_,ue=!1,Pe=0,Ge=null,Ve=null,De=null,_e=null,Ye=!0,Te=[],Je={},Ae=[],Ce=null,Be=!1,Bt=null,Vt=!1,fr=!1,Cr=a,rn=a,Jr=a,Bn=a,$r=a,Ma=[],et=a,mt=a,br=[],mr=!1,It=Ap(),Rr=!1,wt=null}function Op(a,c,p,g){var b=function(P,M,j){jo(c,P,M,j),Nm(j)},x={},k=a[Pt];k&&k.forEach(function(P,M){x[M]=P}),b(a.status,x,p||ys)}function tu(a,c,p){var g=ui(a);jo(c,a.status,cc(a,!0),g),Nm(g)}function jo(a,c,p,g){try{a(c,p,g)}catch(b){ka(Ve,2,518,lr(b))}}function xc(a,c,p){var g=a,b=200,x=g[In],k=a[_f]+($r?Dl:ys);try{var P=ya();if(x){var M=!!_e.getPlugin("LocalStorage"),j=[],z=[];gr(x[Nn],function(J){if(j&&J&&J[Na]()>0)for(var K=J[bl](),ee=0;ee<K[sr];ee++)if(P.sendBeacon(k,Ce.getEventBlob(K[ee])))z[mn](J[ee]);else{j[mn](J[El](ee));break}else j[mn](J[El](0))}),z[sr]>0&&(x.sentEvts=z),M||ru(j,8003,x[qi],!0)}else b=0}catch(J){ps(Ve,"Failed to send telemetry using sendBeacon API. Ex:"+lr(J)),b=0}finally{jo(c,b,{},ys)}}function la(a){return a===2||a===3}function bn(a){return Vt&&la(a)&&(a=2),a}ht[wd]=function(a,c){Je[a]=c},ht.removeHeader=function(a){delete Je[a]},ht[Iv]=function(){return Jn()&&oe[ws]()},ht[bd]=function(a,c){Ht(a)&&(a=0),Vt&&(a=bn(a),c=2),Pc(Ae,a,0)&&Ts(di(),0,!1,a,c||0)},ht[Ed]=function(){return!Z&&Pe===0&&Ae[sr]===0},ht[Cp]=function(a){Vt=a},ht.addBatch=function(a){if(a&&a[Na]()>0){if(q.isTenantKilled(a[$i]()))return!1;Ae[mn](a)}return!0},ht.teardown=function(){Ae[sr]>0&&Ts(di(),0,!0,2,2),gr(Ma,function(a){a&&a.rm&&a.rm()}),Ma=[]},ht.pause=function(){Z=!0},ht[ke]=function(){Z=!1,ht[bd](0,4)},ht[Et]=function(a,c,p){a&&a[Na]()>0&&(rt(c)&&(c=1),Vt&&(c=bn(c),p=2),Ts([a],0,!1,c,p||0))};function Jn(){return!Z&&Pe<E}function di(){var a=Ae;return Ae=[],a}function Pc(a,c,p){var g=!1;return a&&a[sr]>0&&!Z&&De[c]&&Ce&&(g=c!==0||Jn()&&(p>0||oe[ws]())),g}function Ad(a){var c={};return a&&gr(a,function(p,g){c[g]={iKey:p[$i](),evts:p[bl]()}}),c}function Ts(a,c,p,g,b){if(!(!a||a[sr]===0)){if(Z){ru(a,1,g);return}g=bn(g);try{var x=a,k=g!==0;Ia(_e,function(){return"HttpManager:_sendBatches"},function(P){P&&(a=a.slice(0));for(var M=[],j=null,z=gs(),J=De[g]||(k?De[1]:De[0]),K=J&&J[qt],ee=Bn&&(Vt||la(g)||K===3||J._isSync&&K===2);Pc(a,g,c);){var X=a.shift();X&&X[Na]()>0&&(q.isTenantKilled(X[$i]())?M[mn](X):(j=j||Ce[Ut](c,p,k,ee,b,g),Ce.appendPayload(j,X,_)?j.overflow!==null&&(a=[j.overflow][Yi](a),j.overflow=null,Rd(j,z,gs(),b),z=gs(),j=null):(Rd(j,z,gs(),b),z=gs(),a=[X][Yi](a),j=null)))}j&&Rd(j,z,gs(),b),a[sr]>0&&(Ae=a[Yi](Ae)),ru(M,8004,g)},function(){return{batches:Ad(x),retryCount:c,isTeardown:p,isSynchronous:k,sendReason:b,useSendBeacon:la(g),sendType:g}},!k)}catch(P){ka(Ve,2,48,"Unexpected Exception sending batch: "+lr(P))}}}function Nf(a,c){var p={url:$,hdrs:{},useHdrs:!1};c?(p[Xs]=hd(p[Xs],Je),p.useHdrs=Rn(p.hdrs)[sr]>0):Mr(Je,function(P,M){bf[P]?Dd(p,bf[P],M,!1):(p[Xs][P]=M,p[bv]=!0)}),Dd(p,lo,"NO_AUTH",c),Dd(p,yv,lm,c);var g=ys;gr(a.apiKeys,function(P){g[sr]>0&&(g+=","),g+=P}),Dd(p,pm,g,c),Dd(p,yd,Di().toString(),c);var b=Im(a);if(Ws(b)&&(p.url+="&ext.intweb.msfpc="+b),oe[hf]()&&Dd(p,Sv,oe[wl](),c),_e[zr]){var x=_e[zr]();x>=0&&(p.url+="&w="+x)}for(var k=0;k<Te[sr];k++)p.url+="&"+Te[k].name+"="+Te[k].value;return p}function Df(a,c,p){a[c]=a[c]||{},a[c][Ge.identifier]=p}function Rd(a,c,p,g){if(a&&a.payloadBlob&&a.payloadBlob[sr]>0){var b=!!et,x=De[a.sendType];!la(a[qi])&&a[un]&&a.sendReason===2&&(x=De[2]||De[3]||x);var k=fr;(a.isBeacon||x[qt]===3)&&(k=!1);var P=Nf(a,k);k=k||P[bv];var M=gs();Ia(_e,function(){return"HttpManager:_doPayloadSend"},function(){for(var j=0;j<a.batches[sr];j++)for(var z=a[Nn][j],J=z[bl](),K=0;K<J[sr];K++){var ee=J[K];if(Be){var X=ee[hn]=ee[hn]||{};Df(X,"sendEventStart",M),Df(X,"serializationStart",c),Df(X,"serializationCompleted",p)}ee[Nl]>0?ee[Nl]++:ee[Nl]=1}ru(a[Nn],1e3+(g||0),a[qi],!0);var ve={data:a[Dr],urlString:P.url,headers:P[Xs],_thePayload:a,_sendReason:g,timeout:Cr,disableXhrSync:rn,disableFetchKeepAlive:Jr};k&&(Ef(ve[Pt],gd)||(ve[Pt][gd]=gv),Ef(ve[Pt],gl)||(ve[Pt][gl]=_d));var be=null;x&&(be=function(Me){oe[kn]();var Ze=function(jt,yr){bm(jt,yr,a,g)},Qe=a[ca]||a[Fu];try{x.sendPOST(Me,Ze,Qe),mt&&mt(ve,Me,Qe,a[un])}catch(jt){ps(Ve,"Unexpected exception sending payload. Ex:"+lr(jt)),jo(Ze,0,{})}}),Ia(_e,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(be)if(a[qi]===0&&Pe++,b&&!a.isBeacon&&x[qt]!==3){var Me={data:ve[bs],urlString:ve[_f],headers:hd({},ve[Pt]),timeout:ve[Uu],disableXhrSync:ve[V],disableFetchKeepAlive:ve[te]},Ze=!1;Ia(_e,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{et(Me,function(Qe){Ze=!0,!Ye&&!Qe[In]&&(Qe[In]=Qe[In]||ve[In],Qe[Tl]=Qe[Tl]||ve[Tl]),be(Qe)},a.isSync||a[ca])}catch{Ze||be(ve)}})}else be(ve)})},function(){return{thePayload:a,serializationStart:c,serializationCompleted:p,sendReason:g}},a[Fu])}a.sizeExceed&&a.sizeExceed[sr]>0&&ru(a.sizeExceed,8003,a[qi]),a.failedEvts&&a.failedEvts[sr]>0&&ru(a.failedEvts,8002,a[qi])}function th(a,c){Be&&gr(a,function(p){var g=p[hn]=p[hn]||{};Df(g,"sendEventCompleted",c)})}function bm(a,c,p,g){var b=9e3,x=null,k=!1,P=!1;try{var M=!0;if(typeof a!==h){if(c){oe[Sd](c[yl]);var j=c[Np]||c["kill-duration-seconds"];gr(q[hm](c[Ic],j),function(J){gr(p[Nn],function(K){if(K[$i]()===J){x=x||[];var ee=K[El](0);p.numEvents-=ee[Na](),x[mn](ee)}})})}if(a==200||a==204){b=200;return}(!Id(a)||p.numEvents<=0)&&(M=!1),b=9e3+a%1e3}if(M){b=100;var z=p.retryCnt;p[qi]===0&&(z<C?(k=!0,Tm(function(){p[qi]===0&&Pe--,Ts(p[Nn],z+1,p[ca],Vt?2:p[qi],5)},Vt,xh(z))):(P=!0,Vt&&(b=8001)))}}finally{k||(oe[Sd](),Em(p,b,g,P)),ru(x,8004,p[qi])}}function Em(a,c,p,g){try{g&&Ge[xp]();var b=a[Nn];c===200&&(b=a.sentEvts||a[Nn],!g&&!a[Fu]&&Ge._clearBackOff(),rh(b)),ru(b,c,a[qi],!0)}finally{a[qi]===0&&(Pe--,p!==5&&ht.sendQueuedRequests(a[qi],p))}}function rh(a){if(Be){var c=gs();gr(a,function(p){p&&p[Na]()>0&&th(p[bl](),c)})}}function Tm(a,c,p){c?a():It.set(a,p)}function Im(a){for(var c=0;c<a.batches[sr];c++){var p=a[Nn][c].Msfpc();if(p)return encodeURIComponent(p)}return ys}function Nm(a){var c=br;try{for(var p=0;p<c[sr];p++)try{c[p](a)}catch(b){ka(Ve,1,519,"Response handler failed: "+b)}if(a){var g=JSON.parse(a);Ws(g.webResult)&&Ws(g.webResult[Sl])&&Bt.set("MSFPC",g.webResult[Sl],365*86400)}}catch{}}function ru(a,c,p,g){if(a&&a[sr]>0&&R){var b=R[Dm(c)];if(b){var x=p!==0;Ia(_e,function(){return"HttpManager:_sendBatchesNotification"},function(){Tm(function(){try{b.call(R,a,c,x,p)}catch(k){ka(Ve,1,74,"send request notification failed: "+k)}},g||x,0)},function(){return{batches:Ad(a),reason:c,isSync:x,sendSync:g,sendType:p}},!x)}}}function Dm(a){var c=Cc[a];return Ws(c)||(c=_v,a>=9e3&&a<=9999?c=Ip:a>=8e3&&a<=8999?c=mv:a>=1e3&&a<=1999&&(c=hv)),c}})}return d.__ieDyn=1,d}(),If=.25,Cd=500,Rp=20,eh=6,Av=2,wm=4,Ah=2,Rh=1,kh=1e4,qn="eventsDiscarded",xd="",Wn=void 0,K_=As({eventsLimitInMem:{isVal:Wr,v:kh},immediateEventLimit:{isVal:Wr,v:500},autoFlushEventsLimit:{isVal:Wr,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:kp,v:Wn},overrideInstrumentationKey:Wn,overrideEndpointUrl:Wn,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:Wn,clearTimeoutOverride:Wn,payloadPreprocessor:Wn,payloadListener:Wn,disableEventTimings:Wn,valueSanitizer:Wn,stringifyObjects:Wn,enableCompoundKey:Wn,disableOptimizeObj:!1,fetchCredentials:Wn,transports:Wn,unloadTransports:Wn,useSendBeacon:Wn,disableFetchKeepAlive:Wn,avoidOptions:!1,xhrTimeout:Wn,disableXhrSync:Wn,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:er,v:eh},maxUnloadEventRetryAttempts:{isVal:er,v:Av},addNoResponse:Wn,excludeCsMetaData:Wn});function kp(d){return d&&d.sendPOST}var Pd=function(d){qa(_,d);function _(){var E=d.call(this)||this;E.identifier="PostChannel",E.priority=1011,E.version="4.3.5";var C,R=!1,$=[],q,Z=!1,oe=0,ue,Pe=0,Ge,Ve={},De=t,_e,Ye,Te,Je,Ae,Ce,Be,Bt,Vt,fr,Cr,rn,Jr,Bn,$r,Ma,et,mt,br,mr,It,Rr;return Qi(_,E,function(wt,_n){bn(),wt._getDbgPlgTargets=function(){return[Ae,C]},wt[Lu]=function(P,M,j){Ia(M,function(){return"PostChannel:initialize"},function(){_n[Lu](P,M,j),br=M.getNotifyMgr();try{$r=bp(na(wt[gf]),M.evtNamespace&&M.evtNamespace()),wt._addHook(mc(P,function(z){var J=z.cfg,K=ff(null,J,M);C=K.getExtCfg(wt[gf],K_),Ma=Ap(C[Ev],C[Tv]),Cr=!C[Nc]&&vv(),et=C[z_],Dn(M),Ge=C[Ih],ue=C.immediateEventLimit,Be=C[u_],Jr=C.maxEventRetryAttempts,Bn=C.maxUnloadEventRetryAttempts,mt=C[Zm],Dt(J.endpointUrl)?wt.pause():Z&&wt[ke](),k(),It=C[G_],Rr=!!C[yf],mr&&ht();var ee=J.disablePageUnloadEvents||[];mr=Wm(Yu,ee,$r),mr=Oa(Yu,ee,$r)||mr,mr=vd(Es,J.disablePageShowEvents,$r)||mr})),Ae[Lu](P,wt.core,wt)}catch(z){throw wt.setInitialized(!1),z}},function(){return{theConfig:P,core:M,extensions:j}})},wt.processTelemetry=function(P,M){Ec(P,wt[gf]),M=M||wt._getTelCtx(M);var j=P;!Rr&&!R&&(It&&(j[$i]=It),tu(j,!0),rn?Pc(2,2):la()),wt.processNext(j,M)},wt.getOfflineSupport=function(){try{var P=Ae&&Ae[nr]();if(Ae)return{getUrl:function(){return P?P.url:null},serialize:fi,batch:Cn,shouldProcess:function(M){return!Rr},createPayload:function(M){return null},createOneDSPayload:function(M){if(Ae[Nr])return Ae[Nr](M,Cr)}}}catch{}return null},wt._doTeardown=function(P,M){Pc(2,2),R=!0,Ae.teardown(),ht(),bn()};function ht(){Th(null,$r),pd(null,$r),cm(null,$r)}function Dn(P){var M=P[zr];P[zr]=function(){var j=0;return et&&(j=j|2),j|M.call(P)}}function Cn(P){var M=xd;return P&&P[sr]&&gr(P,function(j){M&&(M+=`
`),M+=j}),M}function fi(P){var M=xd;try{Op(P),M=Ae[st](P)}catch{}return M}function Yu(P){var M=P||gi().event;M.type!=="beforeunload"&&(rn=!0,Ae[Cp](rn)),Pc(2,2)}function Es(P){rn=!1,Ae[Cp](rn)}function Op(P){P.ext&&P.ext[vm]&&delete P.ext[vm],P.ext&&P.ext[Uo]&&P.ext[Uo].id&&delete P.ext[Uo].id,Cr&&(P.ext=xo(P.ext),P[Nv]&&(P[Nv]=xo(P[Nv])),P[bs]&&(P[bs]=xo(P[bs])))}function tu(P,M){if(P[_m]||(P[_m]=0),P[Sf]||(P[Sf]=1),Op(P),P[Dv]){if(Te||Z)P[Sf]=3,P[Dv]=!1;else if(Ae){Cr&&(P=xo(P)),Ae[Et](Td.create(P[$i],[P]),P[Dv]===!0?1:P[Dv],3);return}}var j=P[Sf],z=Pe,J=Ge;j===4&&(z=oe,J=ue);var K=!1;if(z<J)K=!Df(P,M);else{var ee=1,X=Rp;j===4&&(ee=4,X=1),K=!0,Rd(P[$i],P[Sf],ee,X)&&(K=!Df(P,M))}K&&Dm(qn,[P],yo.QueueFull)}wt.setEventQueueLimits=function(P,M){C[Ih]=Ge=Wr(P)?P:kh,C[u_]=Be=Wr(M)?M:0,k();var j=Pe>P;if(!j&&Bt>0)for(var z=1;!j&&z<=3;z++){var J=Ce[z];J&&J[Nn]&&gr(J[Nn],function(K){K&&K[Na]()>=Bt&&(j=!0)})}Nf(!0,j)},wt.pause=function(){di(),Z=!0,Ae&&Ae.pause()},wt[ke]=function(){Z=!1,Ae&&Ae[ke](),la()},wt._loadTransmitProfiles=function(P){Tm(),Mr(P,function(M,j){var z=j[sr];if(z>=2){var J=z>2?j[2]:0;if(j[Zs](0,z-2),j[1]<0&&(j[0]=-1),j[1]>0&&j[0]>0){var K=j[0]/j[1];j[0]=Math.ceil(K)*j[1]}J>=0&&j[1]>=0&&J>j[1]&&(J=j[1]),j[mn](J),Ve[M]=j}})},wt.flush=function(P,M,j){P===void 0&&(P=!0);var z;if(!Z)if(j=j||1,P)M||(z=Fi(function(K){M=K})),q==null?(di(),bm(1,0,j),q=Jn(function(){q=null,Em(M,j)},0)):$[mn](M);else{var J=di();jo(1,1,j),M&&M(),J&&la()}return z},wt.setMsaAuthTicket=function(P){Ae[wd](Ss,P)},wt.setAuthPluginHeader=function(P){Ae[wd](Jm,P)},wt.removeAuthPluginHeader=function(){Ae.removeHeader(Jm)},wt.hasEvents=xc,wt._setTransmitProfile=function(P){De!==P&&Ve[P]!==void 0&&(di(),De=P,la())},Zl(wt,function(){return Ae},["addResponseHandler"]);function jo(P,M,j){var z=bm(P,M,j);return Ae[bd](M,j),z}function xc(){return Pe>0}function la(){if(Vt>=0&&bm(Vt,0,fr)&&Ae[bd](0,fr),oe>0&&!Ye&&!Z){var P=Ve[De][2];P>=0&&(Ye=Jn(function(){Ye=null,jo(4,0,1),la()},P))}var M=Ve[De][1];!_e&&!q&&M>=0&&!Z&&(xc()?_e=Jn(function(){_e=null,jo(Je===0?3:1,0,1),Je++,Je%=2,la()},M):Je=0)}wt[xp]=function(){Te<wm&&(Te++,di(),la())},wt._clearBackOff=function(){Te&&(Te=0,di(),la())};function bn(){C=null,R=!1,$=[],q=null,Z=!1,oe=0,ue=500,Pe=0,Ge=kh,Ve={},De=t,_e=null,Ye=null,Te=0,Je=0,Ce={},Be=0,mr=!1,Bt=0,Vt=-1,fr=null,Cr=!0,rn=!1,Jr=eh,Bn=Av,$r=null,It=null,Rr=!1,Ma=Ap(),Ae=new Tf(Cd,Ah,Rh,{requeue:Nm,send:c,sent:p,drop:g,rspFail:b,oth:x}),Im(),Ad(),k()}function Jn(P,M){M===0&&Te&&(M=1);var j=1e3;return Te&&(j=xh(Te-1)),Ma.set(P,M*j)}function di(){return _e!==null?(_e.cancel(),_e=null,Je=0,!0):!1}function Pc(P,M){di(),q&&(q.cancel(),q=null),Z||jo(1,P,M)}function Ad(){Ce[4]={batches:[],iKeyMap:{}},Ce[3]={batches:[],iKeyMap:{}},Ce[2]={batches:[],iKeyMap:{}},Ce[1]={batches:[],iKeyMap:{}}}function Ts(P,M,j){var z=Ce[M];z||(M=1,z=Ce[M]);var J=z.iKeyMap[P];return!J&&j&&(J=Td.create(P),z.batches[mn](J),z.iKeyMap[P]=J),J}function Nf(P,M){Ae[Iv]()&&!Te&&(Be>0&&Pe>Be&&(M=!0),M&&q==null&&wt.flush(P,function(){},20))}function Df(P,M){Cr&&(P=xo(P));var j=P[Sf],z=Ts(P[$i],j,!0);return z.addEvent(P)?(j!==4?(Pe++,M&&P[_m]===0&&Nf(!P.sync,Bt>0&&z[Na]()>=Bt)):oe++,!0):!1}function Rd(P,M,j,z){for(;j<=M;){var J=Ts(P,M,!0);if(J&&J[Na]()>0){var K=J[El](0,z),ee=K[Na]();if(ee>0)return j===4?oe-=ee:Pe-=ee,a(qn,[K],yo.QueueFull),!0}j++}return th(),!1}function th(){for(var P=0,M=0,j=function(J){var K=Ce[J];K&&K[Nn]&&gr(K[Nn],function(ee){J===4?P+=ee[Na]():M+=ee[Na]()})},z=1;z<=4;z++)j(z);Pe=M,oe=P}function bm(P,M,j){var z=!1,J=M===0;return!J||Ae[Iv]()?Ia(wt.core,function(){return"PostChannel._queueBatches"},function(){for(var K=[],ee=4;ee>=P;){var X=Ce[ee];X&&X.batches&&X.batches[sr]>0&&(gr(X[Nn],function(ve){Ae.addBatch(ve)?z=z||ve&&ve[Na]()>0:K=K[Yi](ve[bl]()),ee===4?oe-=ve[Na]():Pe-=ve[Na]()}),X[Nn]=[],X.iKeyMap={}),ee--}K[sr]>0&&Dm(qn,K,yo.KillSwitch),z&&Vt>=P&&(Vt=-1,fr=0)},function(){return{latency:P,sendType:M,sendReason:j}},!J):(Vt=Vt>=0?Math.min(Vt,P):P,fr=Math.max(fr,j)),z}function Em(P,M){jo(1,0,M),th(),rh(function(){P&&P(),$[sr]>0?q=Jn(function(){q=null,Em($.shift(),M)},0):(q=null,la())})}function rh(P){Ae[Ed]()?P():q=Jn(function(){q=null,rh(P)},If)}function Tm(){di(),Im(),De=t,la()}function Im(){Ve={},Ve[t]=[2,1,0],Ve[r]=[6,3,0],Ve[n]=[18,9,0]}function Nm(P,M){var j=[],z=Jr;rn&&(z=Bn),gr(P,function(J){J&&J[Na]()>0&&gr(J[bl](),function(K){K&&(K[Dv]&&(K[Sf]=4,K[Dv]=!1),K[_m]<z?(Ec(K,wt[gf]),tu(K,!1)):j[mn](K))})}),j[sr]>0&&Dm(qn,j,yo.NonRetryableStatus),rn&&Pc(2,2)}function ru(P,M){var j=br||{},z=j[P];if(z)try{z.apply(j,M)}catch(J){ka(wt.diagLog(),1,74,P+" notification failed: "+J)}}function Dm(P,M){for(var j=[],z=2;z<arguments.length;z++)j[z-2]=arguments[z];M&&M[sr]>0&&ru(P,[M][Yi](j))}function a(P,M){for(var j=[],z=2;z<arguments.length;z++)j[z-2]=arguments[z];M&&M[sr]>0&&gr(M,function(J){J&&J[Na]()>0&&ru(P,[J.events()][Yi](j))})}function c(P,M,j){P&&P[sr]>0&&ru("eventsSendRequest",[M>=1e3&&M<=1999?M-1e3:0,j!==!0])}function p(P,M){a("eventsSent",P,M),la()}function g(P,M){a(qn,P,M>=8e3&&M<=8999?M-8e3:yo.Unknown)}function b(P){a(qn,P,yo.NonRetryableStatus),la()}function x(P,M){a(qn,P,yo.Unknown),la()}function k(){mt?Bt=0:Bt=Math.max(Cd*(Ah+1),Ge/6)}}),E}return _.__ieDyn=1,_}(df);e.BE_PROFILE=n,e.NRT_PROFILE=r,e.PostChannel=Pd,e.RT_PROFILE=t})});var fw=Ld(Ov=>{"use strict";var LN=Ov&&Ov.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),FN=Ov&&Ov.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),lw=Ov&&Ov.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&LN(t,e,r);return FN(t,e),t};Object.defineProperty(Ov,"__esModule",{value:!0});Ov.oneDataSystemClientFactory=void 0;var UN=async(e,t,r)=>{let n=await Promise.resolve().then(()=>lw(sw())),s=await Promise.resolve().then(()=>lw(cw())),u=new n.AppInsightsCore,h=new s.PostChannel,S={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[h]]};if(r){S.extensionConfig={};let F={alwaysUseXhrOverride:!0,httpXHROverride:r};S.extensionConfig[h.identifier]=F}let D=t.workspace.getConfiguration("telemetry").get("internalTesting");return u.initialize(S,[]),u.addTelemetryInitializer(F=>{F.ext=F.ext??{},F.ext.web=F.ext.web??{},F.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',D&&(F.ext.utc=F.ext.utc??{},F.ext.utc.flags=8462029)}),u},jN=async(e,t,r)=>{let n=await UN(e,t,r);return{logEvent:(h,S)=>{try{n==null||n.track({name:h,baseData:{name:h,properties:S==null?void 0:S.properties,measurements:S==null?void 0:S.measurements}})}catch(I){throw new Error(`Failed to log event to app insights!
`+I.message)}},flush:async()=>{try{return new Promise((S,I)=>{if(!n){S();return}n.flush(!0,D=>{if(!D){I("Failed to flush app 1DS!");return}})})}catch(h){throw new Error(`Failed to flush 1DS!
`+h.message)}},dispose:async()=>new Promise(S=>{if(!n){S();return}n.unload(!1,()=>{S(),n=void 0},1e3)})}};Ov.oneDataSystemClientFactory=jN});var pw=Ld((ry,dw)=>{(function(e,t){typeof ry=="object"&&typeof dw<"u"?t(ry):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{})))})(ry,function(e){"use strict";function t(f,m){return f||m}function r(f,m){return f[m]}var n=void 0,s=null,u="",h="function",S="object",I="prototype",D="__proto__",F="undefined",H="constructor",ie="Symbol",me="_polyfill",re="length",Q="name",ne="call",ce="toString",ge=t(Object),Ue=r(ge,I),we=t(String),qe=r(we,I),lt=t(Math),ot=t(Array),xt=r(ot,I),cr=r(xt,"slice");function Jt(f,m){try{return{v:f.apply(this,m)}}catch(y){return{e:y}}}function Nt(f){return function(m){return typeof m===f}}function Un(f){var m="[object "+f+"]";return function(y){return!!(y&&ha(y)===m)}}function ha(f){return Ue[ce].call(f)}function Vr(f){return typeof f===F||f===F}function Xr(f){return!Ya(f)}function tt(f){return f===s||Vr(f)}function Ya(f){return!!f||f!==n}var je=Nt("string"),Tr=Nt(h);function Hn(f){return!f&&tt(f)?!1:!!f&&typeof f===S}var Ht=r(ot,"isArray"),Tt=Un("Error"),rt=r(ge,"getOwnPropertyDescriptor");function Qn(f,m){return!!f&&Ue.hasOwnProperty[ne](f,m)}var nt=t(r(ge,"hasOwn"),su);function su(f,m){return Qn(f,m)||!!rt(f,m)}function Gt(f,m,y){if(f&&Hn(f)){for(var N in f)if(nt(f,N)&&m[ne](y||f,N,f[N])===-1)break}}var Ho={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function zt(f){var m={};if(m[Ho.c]=!0,m[Ho.e]=!0,f.l){m.get=function(){return f.l.v};var y=rt(f.l,"v");y&&y.set&&(m.set=function(N){f.l.v=N})}return Gt(f,function(N,U){m[Ho[N]]=Xr(U)?m[Ho[N]]:U}),m}var er=r(ge,"defineProperty");function ea(f,m,y){return er(f,m,zt(y))}function Dt(f,m,y,N,U){var G={};return Gt(f,function(V,te){fn(G,V,m?te:V,U),fn(G,te,y?te:V,U)}),N?N(G):G}function fn(f,m,y,N){er(f,m,{value:y,enumerable:!0,writable:!!N})}var ir=t(we),ct="[object Error]";function bt(f,m){var y=u,N=Ue[ce][ne](f);N===ct&&(f={stack:ir(f.stack),message:ir(f.message),name:ir(f.name)});try{y=JSON.stringify(f,s,m?typeof m=="number"?m:4:n),y=(y?y.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):s)||ir(f)}catch(U){y=" - "+bt(U,m)}return N+": "+y}function Mr(f){throw new Error(f)}function jn(f){throw new TypeError(f)}var Xa=r(ge,"freeze");function on(f){return f}function En(f){return f[D]||s}var Vi=r(ge,"assign"),oa=r(ge,"keys"),Lr=t(Xa,on),Zt=t(r(ge,"getPrototypeOf"),En);function lr(f){return Dt(f,1,0,Lr)}function Qr(f){var m={};return Gt(f,function(y,N){fn(m,y,N[1]),fn(m,N[0],N[1])}),Lr(m)}function Ol(f){return Qr(f)}var zn="__tsUtils$gblCfg",Ml;function mo(){var f;return typeof globalThis!==F&&(f=globalThis),!f&&typeof self!==F&&(f=self),!f&&typeof window!==F&&(f=window),!f&&typeof global!==F&&(f=global),f}function Rn(){if(!Ml){var f=Jt(mo).v||{};Ml=f[zn]=f[zn]||{}}return Ml}var As=tr;function tr(f,m,y){var N=m?m[f]:s;return function(U){var G=(U?U[f]:s)||N;if(G||y){var V=arguments;return(G||y).apply(U,G?cr[ne](V,1):V)}jn('"'+ir(f)+'" not defined for '+bt(U))}}var Yn=r(lt,"max"),Qa=As("slice",qe),ei=As("substring",qe),ti=tr("substr",qe,Mf);function Mf(f,m,y){return tt(f)&&jn("Invalid "+bt(f)),y<0?u:(m=m||0,m<0&&(m=Yn(m+f[re],0)),Vr(y)?Qa(f,m):Qa(f,m,m+y))}function Uc(f,m){return ei(f,0,m)}var hi="_urid",uu;function Ki(){if(!uu){var f=Rn();uu=f.gblSym=f.gblSym||{k:{},s:{}}}return uu}function cu(f){var m={description:ir(f),toString:function(){return ie+"("+f+")"}};return m[me]=!0,m}function _a(f){var m=Ki();if(!nt(m.k,f)){var y=cu(f),N=oa(m.s).length;y[hi]=function(){return N+"_"+y[ce]()},m.k[f]=y,m.s[y[hi]()]=ir(f)}return m.k[f]}var Gn;function Bu(){Gn=Rn()}function lu(f){return er({toJSON:function(){return f}},"v",{value:f})}var Ll="window",ga;function xr(f,m){var y;return function(){return!Gn&&Bu(),(!y||Gn.lzy)&&(y=lu(Jt(f,m).v)),y.v}}function yn(f){return!Gn&&Bu(),(!ga||f===!1||Gn.lzy)&&(ga=lu(Jt(mo).v||s)),ga.v}function tn(f,m){var y;if(!ga||m===!1?y=yn(m):y=ga.v,y&&y[f])return y[f];if(f===Ll)try{return window}catch{}return s}var xa=xr(tn,["document"]);function ho(){return!!Hu()}var Hu=xr(tn,[Ll]);function _i(){return!!Kr()}var Kr=xr(tn,["navigator"]),_o,zo;function Vn(){return _o=lu(Jt(tn,[ie]).v),_o}function Go(f){var m=(Gn.lzy?0:_o)||Vn();return m.v?m.v[f]:n}function fu(f,m){!Gn&&Bu();var y=(Gn.lzy?0:_o)||Vn();return y.v?y.v(f):m?s:cu(f)}function ri(f){return!Gn&&Bu(),zo=(Gn.lzy?0:zo)||lu(Jt(Go,["for"]).v),(zo.v||_a)(f)}function dn(f,m,y){return f.apply(m,y)}function ta(f,m,y){if(f)for(var N=f[re]>>>0,U=0;U<N&&!(U in f&&m[ne](y||f,f[U],U,f)===-1);U++);}var zu=As("indexOf",xt),gi=As("map",xt),Ir=As("reduce",xt),ya=t(r(ge,"create"),Lf);function Lf(f){if(!f)return{};var m=typeof f;m!==S&&m!==h&&jn("Prototype must be an Object or function: "+bt(f));function y(){}return y[I]=f,new y}var Pa;function Vo(f,m){var y=ge.setPrototypeOf||function(N,U){var G;!Pa&&(Pa=lu((G={},G[D]=[],G instanceof Array))),Pa.v?N[D]=U:Gt(U,function(V,te){return N[V]=te})};return y(f,m)}function jc(f,m,y){Jt(ea,[m,Q,{v:f,c:!0,e:!1}]),m=Vo(m,y);function N(){this[H]=m,Jt(ea,[this,Q,{v:f,c:!0,e:!1}])}return m[I]=y===s?ya(y):(N[I]=y[I],new N),m}function Ko(f,m){m&&(f[Q]=m)}function Ff(f,m,y){var N=y||Error,U=N[I][Q],G=Error.captureStackTrace;return jc(f,function(){var V=this,te=arguments;try{Jt(Ko,[N,f]);var pe=dn(N,V,cr[ne](te))||V;if(pe!==V){var he=Zt(V);he!==Zt(pe)&&Vo(pe,he)}return G&&G(pe,V[H]),m&&m(pe,te),pe}finally{Jt(Ko,[N,U])}},N)}function sn(){return(Date.now||Fl)()}function Fl(){return new Date().getTime()}function ni(f){return function(y){return tt(y)&&jn("strTrim called ["+bt(y)+"]"),y&&y.replace&&(y=y.replace(f,u)),y}}var $d=ni(/^\s+|(?=\s)\s+$/g),ra=tr("trim",qe,$d),Zp,yi,Ul;function Wi(f){if(!f||typeof f!==S)return!1;Ul||(Ul=ho()?Hu():!0);var m=!1;if(f!==Ul){yi||(Zp=Function[I][ce],yi=Zp[ne](ge));try{var y=Zt(f);m=!y,m||(Qn(y,H)&&(y=y[H]),m=!!(y&&typeof y===h&&Zp[ne](y)===yi))}catch{}}return m}var Uf;function gr(){return!Gn&&Bu(),(!Uf||Gn.lzy)&&(Uf=lu(Jt(tn,["performance"]).v)),Uf.v}var Wo=tr("endsWith",qe,jf);function jf(f,m,y){je(f)||jn("'"+bt(f)+"' is not a string");var N=je(m)?m:ir(m),U=!Vr(y)&&y<f[re]?y:f[re];return ei(f,U-N[re],U)===N}var $a=As("indexOf",qe),Yc="ref",kt="unref",Si="hasRef",Gu="enabled";function jl(f,m,y){var N=!0,U=f?m(s):s,G;function V(){return N=!1,U&&U[kt]&&U[kt](),G}function te(){U&&y(U),U=s}function pe(){return U=m(U),N||V(),G}function he(We){!We&&U&&te(),We&&!U&&pe()}return G={cancel:te,refresh:pe},G[Si]=function(){return U&&U[Si]?U[Si]():N},G[Yc]=function(){return N=!0,U&&U[Yc]&&U[Yc](),G},G[kt]=V,G=er(G,Gu,{get:function(){return!!U},set:he}),{h:G,dn:function(){U=s}}}function Gv(f,m,y){var N=Ht(m),U=N?m.length:0,G=(U>0?m[0]:N?n:m)||setTimeout,V=(U>1?m[1]:n)||clearTimeout,te=y[0];y[0]=function(){pe.dn(),dn(te,n,cr[ne](arguments))};var pe=jl(f,function(he){if(he){if(he.refresh)return he.refresh(),he;dn(V,n,[he])}return dn(G,n,y)},function(he){dn(V,n,[he])});return pe.h}function Di(f,m){return Gv(!0,n,cr[ne](arguments))}var Yl=lr,qd=Ol,du="toLowerCase",Ci="blkVal",ft="length",Sa="rdOnly",pu="notify",Rs="warnToConsole",Bd="throwInternal",Hd="setDf",Sn="watch",wi="logger",zd="apply",xi="push",ai="splice",Hm="hdlr",Vv="cancel",Xp="name",vu="unload",Qp="version",bh="loggingLevelConsole",Gd="messageId",qa="message",$l="diagLog",ql="userAgent",Ji="split",bi="nodeType",mu="replace",ev="logInternalMessage",Pi="type",Vd="handler",hu="traceId",$c="spanId",Bl="traceFlags",Yf="getAttribute",Kd;function tv(f,m){Kd||(Kd=Ff("AggregationError",function(N,U){U[ft]>1&&(N.errors=U[1])}));var y=f||"One or more errors occurred.";throw ta(m,function(N,U){y+=`
`.concat(U," > ").concat(bt(N))}),new Kd(y,m||[])}var rv="function",_u="object",Wd="undefined",ks="prototype",Vu=Object,Ai=Vu[ks];(yn()||{}).Symbol,(yn()||{}).Reflect;var Hl="hasOwnProperty",$f=function(f){for(var m,y=1,N=arguments.length;y<N;y++){m=arguments[y];for(var U in m)Ai[Hl].call(m,U)&&(f[U]=m[U])}return f},qc=Vi||$f,Zi=function(f,m){return Zi=Vu.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,N){y.__proto__=N}||function(y,N){for(var U in N)N[Hl](U)&&(y[U]=N[U])},Zi(f,m)};function Kv(f,m){typeof m!==rv&&m!==null&&jn("Class extends value "+String(m)+" is not a constructor or null"),Zi(f,m);function y(){this.constructor=f}f[ks]=m===null?ya(m):(y[ks]=m[ks],new y)}var Jo,go="constructor",Xi="prototype",gu="function",qf="_dynInstFuncs",Bc="_isDynProxy",Hc="_dynClass",Ku="_dynCls$",Bf="_dynInstChk",zl=Bf,Hf="_dfOpts",Wu="_unknown_",Qi="__proto__",zc="_dyn"+Qi,yo="__dynProto$Gbl",Ei="_dynInstProto",Zo="useBaseInst",Zr="setInstFuncs",Os=Object,eo=Os.getPrototypeOf,Gc=Os.getOwnPropertyNames,Vc=yn(),Xo=Vc[yo]||(Vc[yo]={o:(Jo={},Jo[Zr]=!0,Jo[Zo]=!0,Jo),n:1e3});function Gl(f){return f&&(f===Os[Xi]||f===Array[Xi])}function Qo(f){return Gl(f)||f===Function[Xi]}function yu(f){var m;if(f){if(eo)return eo(f);var y=f[Qi]||f[Xi]||(f[go]?f[go][Xi]:null);m=f[zc]||y,Qn(f,zc)||(delete f[Ei],m=f[zc]=f[Ei]||f[zc],f[Ei]=y)}return m}function ii(f,m){var y=[];if(Gc)y=Gc(f);else for(var N in f)typeof N=="string"&&Qn(f,N)&&y.push(N);if(y&&y.length>0)for(var U=0;U<y.length;U++)m(y[U])}function Jd(f,m,y){return m!==go&&typeof f[m]===gu&&(y||Qn(f,m))&&m!==Qi&&m!==Xi}function Ju(f){jn("DynamicProto: "+f)}function Ba(f){var m=ya(null);return ii(f,function(y){!m[y]&&Jd(f,y,!1)&&(m[y]=f[y])}),m}function zf(f,m){for(var y=f.length-1;y>=0;y--)if(f[y]===m)return!0;return!1}function Zd(f,m,y,N){function U(pe,he,We){var Ot=he[We];if(Ot[Bc]&&N){var rr=pe[qf]||{};rr[zl]!==!1&&(Ot=(rr[he[Hc]]||{})[We]||Ot)}return function(){return Ot.apply(pe,arguments)}}var G=ya(null);ii(y,function(pe){G[pe]=U(m,y,pe)});for(var V=yu(f),te=[];V&&!Qo(V)&&!zf(te,V);)ii(V,function(pe){!G[pe]&&Jd(V,pe,!eo)&&(G[pe]=U(m,V,pe))}),te.push(V),V=yu(V);return G}function Vl(f,m,y,N){var U=null;if(f&&Qn(y,Hc)){var G=f[qf]||ya(null);if(U=(G[y[Hc]]||ya(null))[m],U||Ju("Missing ["+m+"] "+gu),!U[Bf]&&G[zl]!==!1){for(var V=!Qn(f,m),te=yu(f),pe=[];V&&te&&!Qo(te)&&!zf(pe,te);){var he=te[m];if(he){V=he===N;break}pe.push(te),te=yu(te)}try{V&&(f[m]=U),U[Bf]=1}catch{G[zl]=!1}}}return U}function Kl(f,m,y){var N=m[f];return N===y&&(N=yu(m)[f]),typeof N!==gu&&Ju("["+f+"] is not a "+gu),N}function Xd(f,m,y,N,U){function G(pe,he){var We=function(){var Ot=Vl(this,he,pe,We)||Kl(he,pe,We);return Ot.apply(this,arguments)};return We[Bc]=1,We}if(!Gl(f)){var V=y[qf]=y[qf]||ya(null);if(!Gl(V)){var te=V[m]=V[m]||ya(null);V[zl]!==!1&&(V[zl]=!!U),Gl(te)||ii(y,function(pe){Jd(y,pe,!1)&&y[pe]!==N[pe]&&(te[pe]=y[pe],delete y[pe],(!Qn(f,pe)||f[pe]&&!f[pe][Bc])&&(f[pe]=G(f,pe)))})}}}function Wv(f,m){if(eo){for(var y=[],N=yu(m);N&&!Qo(N)&&!zf(y,N);){if(N===f)return!0;y.push(N),N=yu(N)}return!1}return!0}function Zu(f,m){return Qn(f,Xi)?f.name||m||Wu:((f||{})[go]||{}).name||m||Wu}function So(f,m,y,N){Qn(f,Xi)||Ju("theClass is an invalid class definition.");var U=f[Xi];Wv(U,m)||Ju("["+Zu(f)+"] not in hierarchy of ["+Zu(m)+"]");var G=null;Qn(U,Hc)?G=U[Hc]:(G=Ku+Zu(f,"_")+"$"+Xo.n,Xo.n++,U[Hc]=G);var V=So[Hf],te=!!V[Zo];te&&N&&N[Zo]!==void 0&&(te=!!N[Zo]);var pe=Ba(m),he=Zd(U,m,pe,te);y(m,he);var We=!!eo&&!!V[Zr];We&&N&&(We=!!N[Zr]),Xd(U,G,m,pe,We!==!1)}So[Hf]=Xo.o;var to=void 0,wn="",Wl="Not dynamic - ",Xu=/-([a-z])/g,Qu=/([^\w\d_$])/g,Qd=/^(\d+[\w\d_$])/;function Ri(f){return!tt(f)}function Su(f){var m=f;return m&&je(m)&&(m=m[mu](Xu,function(y,N){return N.toUpperCase()}),m=m[mu](Qu,"_"),m=m[mu](Qd,function(y,N){return"_"+N})),m}function Ms(f,m){return f&&m?$a(f,m)!==-1:!1}function or(f){return f&&f.toISOString()||""}function wo(f){return Tt(f)?f[Xp]:wn}function es(f){return function(){function m(){var y=this;f&&Gt(f,function(N,U){y[N]=U})}return m}()}var ki="console",Gf="JSON",Oi="crypto",wu="msCrypto",pn="msie",oi="trident/",jr=null,dt=null,ec=null;function bo(){return typeof console!==Wd?console:tn(ki)}function Ls(){return!!(typeof JSON===_u&&JSON||tn(Gf)!==null)}function ro(){return Ls()?JSON||tn(Gf):null}function bu(){return tn(Oi)}function Mi(){return tn(wu)}function Br(){var f=Kr();if(f&&(f[ql]!==dt||jr===null)){dt=f[ql];var m=(dt||wn)[du]();jr=Ms(m,pn)||Ms(m,oi)}return jr}function Eo(f){return(ec===null||f===!1)&&(ec=_i()&&!!Kr().sendBeacon),ec}function Yr(f,m){if(f)for(var y=0;y<f[ft];y++){var N=f[y];if(N[Xp]&&N[Xp]===m)return N}return{}}function To(f){var m=xa();return m&&f?Yr(m.querySelectorAll("meta"),f).content:null}function Vf(f){var m,y=gr();if(y){var N=y.getEntriesByType("navigation")||[];m=Yr((N[ft]>0?N[0]:{}).serverTiming,f).description}return m}var Io=4294967296,$n=4294967295,no=123456789,ts=987654321,Aa=!1,Ha=no,Kc=ts;function tc(f){f<0&&(f>>>=0),Ha=no+f&$n,Kc=ts-f&$n,Aa=!0}function Kf(){try{var f=sn()&2147483647;tc((Math.random()*Io^f)+f)}catch{}}function Fs(f){return f>0?Math.floor(No()/$n*(f+1))>>>0:0}function No(f){var m=0,y=bu()||Mi();return y&&y.getRandomValues&&(m=y.getRandomValues(new Uint32Array(1))[0]&$n),m===0&&Br()&&(Aa||Kf(),m=Do()&$n),m===0&&(m=Math.floor(Io*Math.random()|0)),f||(m>>>=0),m}function Do(f){Kc=36969*(Kc&65535)+(Kc>>16)&$n,Ha=18e3*(Ha&65535)+(Ha>>16)&$n;var m=(Kc<<16)+(Ha&65535)>>>0&$n|0;return f||(m>>>=0),m}function rc(f){f===void 0&&(f=22);for(var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=No()>>>0,N=0,U=wn;U[ft]<f;)N++,U+=m.charAt(y&63),y>>>=6,N===5&&(y=(No()<<2&4294967295|y&3)>>>0,N=0);return U}var Co="3.3.5",Kn="."+rc(6),Wf=0;function nc(f){return f[bi]===1||f[bi]===9||!+f[bi]}function Us(f,m){var y=m[f.id];if(!y){y={};try{nc(m)&&ea(m,f.id,{e:!1,v:y})}catch{}}return y}function Ti(f,m){return m===void 0&&(m=!1),Su(f+Wf+++(m?"."+Co:wn)+Kn)}function rs(f){var m={id:Ti("_aiData-"+(f||wn)+"."+Co),accept:function(y){return nc(y)},get:function(y,N,U,G){var V=y[m.id];return V?V[Su(N)]:(G&&(V=Us(m,y),V[Su(N)]=U),U)},kill:function(y,N){if(y&&y[N])try{delete y[N]}catch{}}};return m}function js(f){return f&&Hn(f)&&(f.isVal||f.fb||nt(f,"v")||nt(f,"mrg")||nt(f,"ref")||f.set)}function Li(f,m,y){var N,U=y.dfVal||Ya;if(m&&y.fb){var G=y.fb;Ht(G)||(G=[G]);for(var V=0;V<G[ft];V++){var te=G[V],pe=m[te];if(U(pe)?N=pe:f&&(pe=f.cfg[te],U(pe)&&(N=pe),f.set(f.cfg,ir(te),pe)),U(N))break}}return!U(N)&&U(y.v)&&(N=y.v),N}function Wc(f,m,y){var N=y;if(y&&js(y)&&(N=Li(f,m,y)),N){js(N)&&(N=Wc(f,m,N));var U;Ht(N)?(U=[],U[ft]=N[ft]):Wi(N)&&(U={}),U&&(Gt(N,function(G,V){V&&js(V)&&(V=Wc(f,m,V)),U[G]=V}),N=U)}return N}function Eu(f,m,y,N){var U,G,V,te=N,pe,he,We,Ot;js(te)?(U=te.isVal,G=te.set,We=te[Sa],Ot=te[Ci],pe=te.mrg,he=te.ref,!he&&Vr(he)&&(he=!!pe),V=Li(f,m,te)):V=N,Ot&&f[Ci](m,y);var rr,ur=!0,st=m[y];(st||!tt(st))&&(rr=st,ur=!1,U&&rr!==V&&!U(rr)&&(rr=V,ur=!0),G&&(rr=G(rr,V,m),ur=rr===V)),ur?V?rr=Wc(f,m,V):rr=V:(Wi(rr)||Ht(V))&&pe&&V&&(Wi(V)||Ht(V))&&Gt(V,function(nr,Ut){Eu(f,rr,nr,Ut)}),f.set(m,y,rr),he&&f.ref(m,y),We&&f[Sa](m,y)}var wa=ri("[[ai_dynCfg_1]]"),Tu=ri("[[ai_blkDynCfg_1]]"),Ys=ri("[[ai_frcDynCfg_1]]");function Fi(f){if(f){var m;if(Ht(f)?(m=[],m[ft]=f[ft]):Wi(f)&&(m={}),m)return Gt(f,function(y,N){m[y]=Fi(N)}),m}return f}function ac(f){if(f){var m=f[wa]||f;if(m.cfg&&(m.cfg===f||m.cfg[wa]===m))return m}return null}function vn(f){if(f&&(Wi(f)||Ht(f)))try{f[Tu]=!0}catch{}return f}function sa(f,m,y){var N=!1;return y&&!f[m.blkVal]&&(N=y[Ys],!N&&!y[Tu]&&(N=Wi(y)||Ht(y))),N}function Ui(f){jn("InvalidAccess:"+f)}var ic=["push","pop","shift","unshift","splice"],ns=function(f,m,y,N){f&&f[Bd](3,108,"".concat(y," [").concat(m,"] failed - ")+bt(N))};function ep(f,m,y){Ht(m)&&ta(ic,function(N){var U=m[N];m[N]=function(){for(var G=[],V=0;V<arguments.length;V++)G[V]=arguments[V];var te=U[zd](this,G);return si(f,m,y,"Patching"),te}})}function Ii(f,m){var y=rt(f,m);return y&&y.get}function Jc(f,m,y,N){var U={n:y,h:[],trk:function(he){he&&he.fn&&(zu(U.h,he)===-1&&U.h[xi](he),f.trk(he,U))},clr:function(he){var We=zu(U.h,he);We!==-1&&U.h[ai](We,1)}},G=!0,V=!1;function te(){G&&(V=V||sa(te,f,N),N&&!N[wa]&&V&&(N=si(f,N,y,"Converting")),G=!1);var he=f.act;return he&&U.trk(he),N}te[f.prop]={chng:function(){f.add(U)}};function pe(he){if(N!==he){te[f.ro]&&!f.upd&&Ui("["+y+"] is read-only:"+bt(m)),G&&(V=V||sa(te,f,N),G=!1);var We=V&&te[f.rf];if(V)if(We){Gt(N,function(rr){N[rr]=he?he[rr]:to});try{Gt(he,function(rr,ur){Ra(f,N,rr,ur)}),he=N}catch(rr){ns((f.hdlr||{})[wi],y,"Assigning",rr),V=!1}}else N&&N[wa]&&Gt(N,function(rr){var ur=Ii(N,rr);if(ur){var st=ur[f.prop];st&&st.chng()}});if(he!==N){var Ot=he&&sa(te,f,he);!We&&Ot&&(he=si(f,he,y,"Converting")),N=he,V=Ot}f.add(U)}}ea(m,U.n,{g:te,s:pe})}function Ra(f,m,y,N){if(m){var U=Ii(m,y),G=U&&!!U[f.prop];G?m[y]=N:Jc(f,m,y,N)}return m}function Jf(f,m,y,N){if(m){var U=Ii(m,y),G=U&&!!U[f.prop],V=N&&N[0],te=N&&N[1],pe=N&&N[2];if(!G){if(pe)try{vn(m)}catch(he){ns((f.hdlr||{})[wi],y,"Blocking",he)}try{Ra(f,m,y,m[y]),U=Ii(m,y)}catch(he){ns((f.hdlr||{})[wi],y,"State",he)}}V&&(U[f.rf]=V),te&&(U[f.ro]=te),pe&&(U[f.blkVal]=!0)}return m}function si(f,m,y,N){try{Gt(m,function(U,G){Ra(f,m,U,G)}),m[wa]||(er(m,wa,{get:function(){return f[Hm]}}),ep(f,m,y))}catch(U){ns((f.hdlr||{})[wi],y,N,U)}return m}var as="[[ai_",is="]]";function tp(f){var m,y=fu(as+"get"+f.uid+is),N=fu(as+"ro"+f.uid+is),U=fu(as+"rf"+f.uid+is),G=fu(as+"blkVal"+f.uid+is),V=fu(as+"dtl"+f.uid+is),te=null,pe=null,he;function We(st,nr){var Ut=he.act;try{he.act=st,st&&st[V]&&(ta(st[V],function(Dr){Dr.clr(st)}),st[V]=[]),nr({cfg:f.cfg,set:f.set.bind(f),setDf:f[Hd].bind(f),ref:f.ref.bind(f),rdOnly:f[Sa].bind(f)})}catch(Dr){var Nr=f[wi];throw Nr&&Nr[Bd](1,107,bt(Dr)),Dr}finally{he.act=Ut||null}}function Ot(){if(te){var st=te;te=null,pe&&pe[Vv](),pe=null;var nr=[];if(ta(st,function(Ut){if(Ut&&(Ut[V]&&(ta(Ut[V],function(Nr){Nr.clr(Ut)}),Ut[V]=null),Ut.fn))try{We(Ut,Ut.fn)}catch(Nr){nr[xi](Nr)}}),te)try{Ot()}catch(Ut){nr[xi](Ut)}nr[ft]>0&&tv("Watcher error(s): ",nr)}}function rr(st){if(st&&st.h[ft]>0){te||(te=[]),pe||(pe=Di(function(){pe=null,Ot()},0));for(var nr=0;nr<st.h[ft];nr++){var Ut=st.h[nr];Ut&&zu(te,Ut)===-1&&te[xi](Ut)}}}function ur(st,nr){if(st){var Ut=st[V]=st[V]||[];zu(Ut,nr)===-1&&Ut[xi](nr)}}return he=(m={prop:y,ro:N,rf:U},m[Ci]=G,m[Hm]=f,m.add=rr,m[pu]=Ot,m.use=We,m.trk=ur,m),he}function Jl(f,m){var y={fn:m,rm:function(){y.fn=null,f=null,m=null}};return ea(y,"toJSON",{v:function(){return"WatcherHandler"+(y.fn?"":"[X]")}}),f.use(y,m),y}function Zf(f,m,y){var N,U=ac(m);if(U)return U;var G=Ti("dyncfg",!0),V=m&&y!==!1?m:Fi(m),te;function pe(){te[pu]()}function he(Nr,Dr,Pt){try{Nr=Ra(te,Nr,Dr,Pt)}catch(In){ns(f,Dr,"Setting value",In)}return Nr[Dr]}function We(Nr){return Jl(te,Nr)}function Ot(Nr,Dr){te.use(null,function(Pt){var In=te.upd;try{Vr(Dr)||(te.upd=Dr),Nr(Pt)}finally{te.upd=In}})}function rr(Nr,Dr){var Pt;return Jf(te,Nr,Dr,(Pt={},Pt[0]=!0,Pt))[Dr]}function ur(Nr,Dr){var Pt;return Jf(te,Nr,Dr,(Pt={},Pt[1]=!0,Pt))[Dr]}function st(Nr,Dr){var Pt;return Jf(te,Nr,Dr,(Pt={},Pt[2]=!0,Pt))[Dr]}function nr(Nr,Dr){return Dr&&Gt(Dr,function(Pt,In){Eu(Ut,Nr,Pt,In)}),Nr}var Ut=(N={uid:null,cfg:V},N[wi]=f,N[pu]=pe,N.set=he,N[Hd]=nr,N[Sn]=We,N.ref=rr,N[Sa]=ur,N[Ci]=st,N._block=Ot,N);return ea(Ut,"uid",{c:!1,e:!1,w:!1,v:G}),te=tp(Ut),si(te,V,"config","Creating"),Ut}function Zl(f,m){f?(f[Rs](m),f[Bd](2,108,m)):Ui(m)}function xo(f,m,y,N){var U=Zf(y,f||{},N);return m&&U[Hd](U.cfg,m),U}function ui(f,m,y){var N=f[wa]||f;return N.cfg&&(N.cfg===f||N.cfg[wa]===N)?N[Sn](m):(Zl(y,Wl+bt(f)),xo(f,null,y)[Sn](m))}var Zc=null;function Jv(){var f=tn("Microsoft");return f&&(Zc=f.ApplicationInsights),Zc}function oc(f){var m=Zc;return!m&&f.disableDbgExt!==!0&&(m=Zc||Jv()),m?m.ChromeDbgExt:null}var sc,os="warnToConsole",Xl="AI (Internal): ",zm="AI: ",rp="AITR_",Ql={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},uc=(sc={},sc[0]=null,sc[1]="errorToConsole",sc[2]=os,sc[3]="debugToConsole",sc);function nv(f){return f?'"'+f[mu](/\"/g,wn)+'"':wn}function Zv(f,m){var y=bo();if(y){var N="log";y[f]&&(N=f),Tr(y[N])&&y[N](m)}}var cc=function(){function f(m,y,N,U){N===void 0&&(N=!1);var G=this;G[Gd]=m,G[qa]=(N?zm:Xl)+m;var V=wn;Ls()&&(V=ro().stringify(U));var te=(y?" message:"+nv(y):wn)+(U?" props:"+nv(V):wn);G[qa]+=te}return f.dataType="MessageData",f}();function Xv(f,m){return(f||{})[wi]||new ef(m)}var ef=function(){function f(m){this.identifier="DiagnosticLogger",this.queue=[];var y=0,N={},U,G,V,te,pe;So(f,this,function(he){pe=Ot(m||{}),he.consoleLoggingLevel=function(){return U},he[Bd]=function(st,nr,Ut,Nr,Dr){Dr===void 0&&(Dr=!1);var Pt=new cc(nr,Ut,Dr,Nr);if(te)throw bt(Pt);var In=uc[st]||os;if(Vr(Pt[qa]))ur("throw"+(st===1?"Critical":"Warning"),Pt);else{if(Dr){var _f=+Pt[Gd];!N[_f]&&U>=st&&(he[In](Pt[qa]),N[_f]=!0)}else U>=st&&he[In](Pt[qa]);We(st,Pt)}},he.debugToConsole=function(st){Zv("debug",st),ur("warning",st)},he[Rs]=function(st){Zv("warn",st),ur("warning",st)},he.errorToConsole=function(st){Zv("error",st),ur("error",st)},he.resetInternalMessageCount=function(){y=0,N={}},he[ev]=We,he[vu]=function(st){pe&&pe.rm(),pe=null};function We(st,nr){if(!rr()){var Ut=!0,Nr=rp+nr[Gd];if(N[Nr]?Ut=!1:N[Nr]=!0,Ut&&(st<=G&&(he.queue[xi](nr),y++,ur(st===1?"error":"warn",nr)),y===V)){var Dr="Internal events throttle limit per PageView reached for this app.",Pt=new cc(23,Dr,!1);he.queue[xi](Pt),st===1?he.errorToConsole(Dr):he[Rs](Dr)}}}function Ot(st){return ui(xo(st,Ql,he).cfg,function(nr){var Ut=nr.cfg;U=Ut[bh],G=Ut.loggingLevelTelemetry,V=Ut.maxMessageLimit,te=Ut.enableDebug})}function rr(){return y>=V}function ur(st,nr){var Ut=oc(m||{});Ut&&Ut[$l]&&Ut[$l](st,nr)}})}return f.__ieDyn=1,f}();function np(f){return f||new ef}function ao(f,m,y,N,U,G){G===void 0&&(G=!1),np(f)[Bd](m,y,N,U,G)}function av(){for(var f=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],m=wn,y,N=0;N<4;N++)y=No(),m+=f[y&15]+f[y>>4&15]+f[y>>8&15]+f[y>>12&15]+f[y>>16&15]+f[y>>20&15]+f[y>>24&15]+f[y>>28&15];var U=f[8+(No()&3)|0];return ti(m,0,8)+ti(m,9,4)+"4"+ti(m,13,3)+U+ti(m,16,3)+ti(m,19,12)}var Gm=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,Xf="00",iv="ff",ap="00000000000000000000000000000000",Xc="0000000000000000",Qf=1;function lc(f,m,y){return f&&f[ft]===m&&f!==y?!!f.match(/^[\da-f]*$/i):!1}function $s(f,m,y){return lc(f,m)?f:y}function Qc(f){(isNaN(f)||f<0||f>255)&&(f=1);for(var m=f.toString(16);m[ft]<2;)m="0"+m;return m}function Qv(f,m,y,N){var U;return U={},U[Qp]=lc(N,2,iv)?N:Xf,U[hu]=el(f)?f:av(),U[$c]=op(m)?m:Uc(av(),16),U.traceFlags=y>=0&&y<=255?y:1,U}function ip(f,m){var y;if(!f||(Ht(f)&&(f=f[0]||""),!f||!je(f)||f[ft]>8192))return null;if(f.indexOf(",")!==-1){var N=f[Ji](",");f=N[m>0&&N[ft]>m?m:0]}var U=Gm.exec(ra(f));return!U||U[1]===iv||U[2]===ap||U[3]===Xc?null:(y={version:(U[1]||wn)[du](),traceId:(U[2]||wn)[du](),spanId:(U[3]||wn)[du]()},y[Bl]=parseInt(U[4],16),y)}function el(f){return lc(f,32,ap)}function op(f){return lc(f,16,Xc)}function qs(f){return!(!f||!lc(f[Qp],2,iv)||!lc(f[hu],32,ap)||!lc(f[$c],16,Xc)||!lc(Qc(f[Bl]),2))}function Hr(f){return qs(f)?(f[Bl]&Qf)===Qf:!1}function fc(f){if(f){var m=Qc(f[Bl]);lc(m,2)||(m="01");var y=f[Qp]||Xf;return y!=="00"&&y!=="ff"&&(y=Xf),"".concat(y.toLowerCase(),"-").concat($s(f.traceId,32,ap).toLowerCase(),"-").concat($s(f.spanId,16,Xc).toLowerCase(),"-").concat(m.toLowerCase())}return""}function ba(f){var m="traceparent",y=ip(To(m),f);return y||(y=ip(Vf(m),f)),y}function sp(f){var m=f.getElementsByTagName("script"),y=[];return ta(m,function(N){var U=N[Yf]("src");if(U){var G=N[Yf]("crossorigin"),V=N.hasAttribute("async")===!0,te=N.hasAttribute("defer")===!0,pe=N[Yf]("referrerpolicy"),he={url:U};G&&(he.crossOrigin=G),V&&(he.async=V),te&&(he.defer=te),pe&&(he.referrerPolicy=pe),y[xi](he)}}),y}var ed="on",tl="attachEvent",dc="addEventListener",ci="detachEvent",td="removeEventListener",ua="events";Ti("aiEvtPageHide"),Ti("aiEvtPageShow");var vr=/\.[\.]+/g,Bs=/[\.]+$/,Tn=1,ss=rs("events"),pc=/^([^.]*)(?:\.(.+)|)/;function vc(f){return f&&f[mu]?f[mu](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,wn):f}function Hs(f,m){var y;if(m){var N=wn;Ht(m)?(N=wn,ta(m,function(G){G=vc(G),G&&(G[0]!=="."&&(G="."+G),N+=G)})):N=vc(m),N&&(N[0]!=="."&&(N="."+N),f=(f||wn)+N)}var U=pc.exec(f||wn)||[];return y={},y[Pi]=U[1],y.ns=(U[2]||wn).replace(vr,".").replace(Bs,wn)[Ji](".").sort().join("."),y}function io(f,m,y){y===void 0&&(y=!0);var N=ss.get(f,ua,{},y),U=N[m];return U||(U=N[m]=[]),U}function tf(f,m,y,N){f&&m&&m[Pi]&&(f[td]?f[td](m[Pi],y,N):f[ci]&&f[ci](ed+m[Pi],y))}function ov(f,m,y,N){var U=!1;return f&&m&&m[Pi]&&y&&(f[dc]?(f[dc](m[Pi],y,N),U=!0):f[tl]&&(f[tl](ed+m[Pi],y),U=!0)),U}function rf(f,m,y,N){for(var U=m[ft];U--;){var G=m[U];G&&(!y.ns||y.ns===G.evtName.ns)&&(!N||N(G))&&(tf(f,G.evtName,G[Vd],G.capture),m[ai](U,1))}}function sv(f,m,y){if(m[Pi])rf(f,io(f,m[Pi]),m,y);else{var N=ss.get(f,ua,{});Gt(N,function(U,G){rf(f,G,m,y)}),oa(N)[ft]===0&&ss.kill(f,ua)}}function nf(f,m){var y;return m?(Ht(m)?y=[f].concat(m):y=[f,m],y=Hs("xx",y).ns[Ji](".")):y=f,y}function rl(f,m,y,N,U){var G;U===void 0&&(U=!1);var V=!1;if(f)try{var te=Hs(m,N);if(V=ov(f,te,y,U),V&&ss.accept(f)){var pe=(G={guid:Tn++,evtName:te},G[Vd]=y,G.capture=U,G);io(f,te.type)[xi](pe)}}catch{}return V}function up(f,m,y,N,U){if(U===void 0&&(U=!1),f)try{var G=Hs(m,N),V=!1;sv(f,G,function(te){return G.ns&&!y||te[Vd]===y?(V=!0,!0):!1}),V||tf(f,G,y,U)}catch{}}var na="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",nl="sampleRate",Ea="ProcessLegacy",Iu="http.method",cp="https://dc.services.visualstudio.com",rd="/v2/track",Ta="not_specified",nd="iKey",lp=qd({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),zs="split",pt="length",us="toLowerCase",cs="ingestionendpoint",ji="toString",af="push",al="removeItem",ls="name",oo="message",il="count",ad="preTriggerDate",Gs="disabled",of="interval",ol="daysOfMonth",sf="date",fp="getUTCDate",dp="stringify",uv="pathname",pp="match",Nu="correlationHeaderExcludePatterns",mc="extensionConfig",uf="exceptions",Po="parsedStack",fs="properties",Ao="measurements",Ro="sizeInBytes",hc="typeName",vp="severityLevel",_c="problemGroup",mp="isManual",hp="hasFullStack",id="assembly",ds="fileName",ko="line",Oo="method",od="level",cf="aiDataContract",sl="duration",ka="receivedResponse";function ps(f,m,y){var N=m[pt],U=sd(f,m);if(U[pt]!==N){for(var G=0,V=U;y[V]!==void 0;)G++,V=ei(U,0,147)+Cu(G);U=V}return U}function sd(f,m){var y;return m&&(m=ra(ir(m)),m[pt]>150&&(y=ei(m,0,150),ao(f,2,57,"name is too long.  It has been truncated to 150 characters.",{name:m},!0))),y||m}function za(f,m,y){y===void 0&&(y=1024);var N;return m&&(y=y||1024,m=ra(ir(m)),m[pt]>y&&(N=ei(m,0,y),ao(f,2,61,"string value is too long. It has been truncated to "+y+" characters.",{value:m},!0))),N||m}function Vs(f,m){return ul(f,m,2048,66)}function lf(f,m){var y;return m&&m[pt]>32768&&(y=ei(m,0,32768),ao(f,2,56,"message is too long, it has been truncated to 32768 characters.",{message:m},!0)),y||m}function vs(f,m){var y;if(m){var N=""+m;N[pt]>32768&&(y=ei(N,0,32768),ao(f,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:m},!0))}return y||m}function Ia(f,m){if(m){var y={};Gt(m,function(N,U){if(Hn(U)&&Ls())try{U=ro()[dp](U)}catch(G){ao(f,2,49,"custom property is not valid",{exception:G},!0)}U=za(f,U,8192),N=ps(f,N,y),y[N]=U}),m=y}return m}function Du(f,m){if(m){var y={};Gt(m,function(N,U){N=ps(f,N,y),y[N]=U}),m=y}return m}function ud(f,m){return m&&ul(f,m,128,69)[ji]()}function ul(f,m,y,N){var U;return m&&(m=ra(ir(m)),m[pt]>y&&(U=ei(m,0,y),ao(f,2,N,"input is too long, it has been truncated to "+y+" characters.",{data:m},!0))),U||m}function Cu(f){var m="00"+f;return ti(m,m[pt]-3)}var em=xa()||{},cv=0,tm=[null,null,null,null,null];function cl(f){var m=cv,y=tm,N=y[m];return em.createElement?y[m]||(N=y[m]=em.createElement("a")):N={host:cd(f,!0)},N.href=f,m++,m>=y[pt]&&(m=0),cv=m,N}function ff(f){var m,y=cl(f);return y&&(m=y.href),m}function lv(f){var m,y=cl(f);return y&&(m=y[uv]),m}function Vm(f,m){return f?f.toUpperCase()+" "+m:m}function cd(f,m){var y=_p(f,m)||"";if(y){var N=y[pp](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(N!=null&&N[pt]>3&&je(N[2])&&N[2][pt]>0)return N[2]+(N[3]||"")}return y}function _p(f,m){var y=null;if(f){var N=f[pp](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(N!=null&&N[pt]>2&&je(N[2])&&N[2][pt]>0&&(y=N[2]||"",m&&N[pt]>2)){var U=(N[1]||"")[us](),G=N[3]||"";(U==="http"&&G===":80"||U==="https"&&G===":443")&&(G=""),y+=G}}return y}var ll=[cp+rd,"https://breeze.aimon.applicationinsights.io"+rd,"https://dc-int.services.visualstudio.com"+rd],xu="cid-v1:";function gp(f){return zu(ll,f[us]())!==-1}function ms(f){xu=f}function ld(){return xu}function df(f,m,y){if(!m||f&&f.disableCorrelationHeaders)return!1;if(f&&f[Nu]){for(var N=0;N<f.correlationHeaderExcludePatterns[pt];N++)if(f[Nu][N].test(m))return!1}var U=cl(m).host[us]();if(U&&($a(U,":443")!==-1||$a(U,":80")!==-1)&&(U=(_p(m,!0)||"")[us]()),(!f||!f.enableCorsCorrelation)&&U&&U!==y)return!1;var G=f&&f.correlationHeaderDomains;if(G){var V;if(ta(G,function(he){var We=new RegExp(he.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));V=V||We.test(U)}),!V)return!1}var te=f&&f.correlationHeaderExcludedDomains;if(!te||te[pt]===0)return!0;for(var N=0;N<te[pt];N++){var pe=new RegExp(te[N].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(pe.test(U))return!1}return U&&U[pt]>0}function hs(f){if(f){var m=gc(f,lp[1]);if(m&&m!==xu)return m}}function gc(f,m){if(f)for(var y=f[zs](","),N=0;N<y[pt];++N){var U=y[N][zs]("=");if(U[pt]===2&&U[0]===m)return U[1]}}function rm(f,m,y,N){var U,G=N,V=N;if(m&&m[pt]>0){var te=cl(m);if(U=te.host,!G)if(te[uv]!=null){var pe=te.pathname[pt]===0?"/":te[uv];pe.charAt(0)!=="/"&&(pe="/"+pe),V=te[uv],G=za(f,y?y+" "+pe:pe)}else G=za(f,m)}else U=N,G=N;return{target:U,name:G,data:V}}function fl(){var f=gr();if(f&&f.now&&f.timing){var m=f.now()+f.timing.navigationStart;if(m>0)return m}return sn()}function Km(f,m){var y=null;return f!==0&&m!==0&&!tt(f)&&!tt(m)&&(y=m-f),y}function nm(f,m){var y=f||{};return{getName:function(){return y[ls]},setName:function(N){m&&m.setName(N),y[ls]=N},getTraceId:function(){return y.traceID},setTraceId:function(N){m&&m.setTraceId(N),el(N)&&(y.traceID=N)},getSpanId:function(){return y.parentID},setSpanId:function(N){m&&m.setSpanId(N),op(N)&&(y.parentID=N)},getTraceFlags:function(){return y.traceFlags},setTraceFlags:function(N){m&&m.setTraceFlags(N),y.traceFlags=N}}}var pf=Yl({LocalStorage:0,SessionStorage:1}),fv=Yl({AI:0,AI_AND_W3C:1,W3C:2}),am=Yl({Normal:1,Critical:2}),Pu=void 0,so=void 0,Ks="";function Au(){return yc()?dl(pf.LocalStorage):null}function dl(f){try{if(tt(yn()))return null;var m=new Date()[ji](),y=tn(f===pf.LocalStorage?"localStorage":"sessionStorage"),N=Ks+m;y.setItem(N,m);var U=y.getItem(N)!==m;if(y[al](N),!U)return y}catch{}return null}function pl(){return Sp()?dl(pf.SessionStorage):null}function fd(){Pu=!1,so=!1}function vf(f){Ks=f||""}function Mo(){Pu=yc(!0),so=Sp(!0)}function yc(f){return(f||Pu===void 0)&&(Pu=!!dl(pf.LocalStorage)),Pu}function im(f,m){var y=Au();if(y!==null)try{return y.getItem(m)}catch(N){Pu=!1,ao(f,2,1,"Browser failed read of local storage. "+wo(N),{exception:bt(N)})}return null}function om(f,m,y){var N=Au();if(N!==null)try{return N.setItem(m,y),!0}catch(U){Pu=!1,ao(f,2,3,"Browser failed write to local storage. "+wo(U),{exception:bt(U)})}return!1}function yp(f,m){var y=Au();if(y!==null)try{return y[al](m),!0}catch(N){Pu=!1,ao(f,2,5,"Browser failed removal of local storage item. "+wo(N),{exception:bt(N)})}return!1}function Sp(f){return(f||so===void 0)&&(so=!!dl(pf.SessionStorage)),so}function Lo(){var f=[];return Sp()&&Gt(tn("sessionStorage"),function(m){f[af](m)}),f}function Ru(f,m){var y=pl();if(y!==null)try{return y.getItem(m)}catch(N){so=!1,ao(f,2,2,"Browser failed read of session storage. "+wo(N),{exception:bt(N)})}return null}function vl(f,m,y){var N=pl();if(N!==null)try{return N.setItem(m,y),!0}catch(U){so=!1,ao(f,2,4,"Browser failed write to session storage. "+wo(U),{exception:bt(U)})}return!1}function sm(f,m){var y=pl();if(y!==null)try{return y[al](m),!0}catch(N){so=!1,ao(f,2,6,"Browser failed removal of session storage item. "+wo(N),{exception:bt(N)})}return!1}var wp="appInsightsThrottle",um=function(){function f(m,y){var N=this,U,G,V,te,pe,he,We,Ot=!1,rr=!1;st(),N._getDbgPlgTargets=function(){return[We]},N.getConfig=function(){return V},N.canThrottle=function(ke){var Et=Ed(ke),qt=nr(ke);return Dr(qt,U,Et)},N.isTriggered=function(ke){return Cp(ke)},N.isReady=function(){return Ot},N.flush=function(ke){try{var Et=mm(ke);if(Et&&Et[pt]>0){var qt=Et.slice(0);return We[ke]=[],ta(qt,function(zr){ur(zr.msgID,zr[oo],zr.severity,!1)}),!0}}catch{}return!1},N.flushAll=function(){try{if(We){var ke=!0;return Gt(We,function(Et){var qt=N.flush(parseInt(Et));ke=ke&&qt}),ke}}catch{}return!1},N.onReadyState=function(ke,Et){return Et===void 0&&(Et=!0),Ot=tt(ke)?!0:ke,Ot&&Et?N.flushAll():null},N.sendMessage=function(ke,Et,qt){return ur(ke,Et,qt,!0)};function ur(ke,Et,qt,zr){if(Ot){var un=bd(ke);if(!un)return;var hn=nr(ke),ca=Ed(ke),Fu=Dr(hn,U,ca),bs=!1,Uu=0,Tl=Cp(ke);try{Fu&&!Tl?(Uu=Math.min(hn.limit.maxSendNumber,ca[il]+1),ca[il]=0,bs=!0,pe[ke]=!0,ca[ad]=new Date):(pe[ke]=Fu,ca[il]+=1);var hm=Pt(ke);qi(G,hm,ca);for(var xp=0;xp<Uu;xp++)Iv(ke,G,Et,qt)}catch{}return{isThrottled:bs,throttleNum:Uu}}else if(zr){var gf=mm(ke);gf[af]({msgID:ke,message:Et,severity:qt})}return null}function st(){G=Xv(m),pe={},te={},We={},V={},Ut(109),he=Ri(y)?y:"",m.addUnloadHook(ui(m.config,function(ke){var Et=ke.cfg;U=yc();var qt=Et.throttleMgrCfg||{};Gt(qt,function(zr,un){Ut(parseInt(zr),un)})}))}function nr(ke){return V[ke]||V[109]}function Ut(ke,Et){var qt,zr;try{var un=Et||{},hn={};hn[Gs]=!!un[Gs];var ca=un[of]||{};rr=(ca==null?void 0:ca.daysOfMonth)&&(ca==null?void 0:ca.daysOfMonth[pt])>0,hn[of]=Nr(ca);var Fu={samplingRate:((qt=un.limit)===null||qt===void 0?void 0:qt.samplingRate)||100,maxSendNumber:((zr=un.limit)===null||zr===void 0?void 0:zr.maxSendNumber)||1};hn.limit=Fu,V[ke]=hn}catch{}}function Nr(ke){ke=ke||{};var Et=ke==null?void 0:ke.monthInterval,qt=ke==null?void 0:ke.dayInterval;return tt(Et)&&tt(qt)&&(ke.monthInterval=3,rr||(ke[ol]=[28],rr=!0)),ke={monthInterval:ke==null?void 0:ke.monthInterval,dayInterval:ke==null?void 0:ke.dayInterval,daysOfMonth:ke==null?void 0:ke.daysOfMonth},ke}function Dr(ke,Et,qt){if(ke&&!ke[Gs]&&Et&&Ri(qt)){var zr=Nn(),un=qt[sf],hn=ke[of],ca=1;if(hn!=null&&hn.monthInterval){var Fu=(zr.getUTCFullYear()-un.getUTCFullYear())*12+zr.getUTCMonth()-un.getUTCMonth();ca=wd(hn.monthInterval,0,Fu)}var bs=1;if(rr)bs=zu(hn[ol],zr[fp]());else if(hn!=null&&hn.dayInterval){var Uu=Math.floor((zr.getTime()-un.getTime())/864e5);bs=wd(hn.dayInterval,0,Uu)}return ca>=0&&bs>=0}return!1}function Pt(ke,Et){var qt=Ri(Et)?Et:"";return ke?wp+qt+"-"+ke:null}function In(ke){try{if(ke){var Et=new Date;return ke.getUTCFullYear()===Et.getUTCFullYear()&&ke.getUTCMonth()===Et.getUTCMonth()&&ke[fp]()===Et[fp]()}}catch{}return!1}function _f(ke,Et,qt){try{var zr={date:Nn(),count:0};if(ke){var un=JSON.parse(ke),hn={date:Nn(un[sf])||zr[sf],count:un[il]||zr[il],preTriggerDate:un.preTriggerDate?Nn(un[ad]):void 0};return hn}else return qi(Et,qt,zr),zr}catch{}return null}function Nn(ke){try{if(ke){var Et=new Date(ke);if(!isNaN(Et.getDate()))return Et}else return new Date}catch{}return null}function qi(ke,Et,qt){try{return om(ke,Et,ra(JSON[dp](qt)))}catch{}return!1}function wd(ke,Et,qt){return ke<=0?1:qt>=Et&&(qt-Et)%ke==0?Math.floor((qt-Et)/ke)+1:-1}function Iv(ke,Et,qt,zr){ao(Et,zr||1,ke,qt)}function bd(ke){try{var Et=nr(ke);return Fs(1e6)<=Et.limit.samplingRate}catch{}return!1}function Ed(ke){try{var Et=te[ke];if(!Et){var qt=Pt(ke,he);Et=_f(im(G,qt),G,qt),te[ke]=Et}return te[ke]}catch{}return null}function Cp(ke){var Et=pe[ke];if(tt(Et)){Et=!1;var qt=Ed(ke);qt&&(Et=In(qt[ad])),pe[ke]=Et}return pe[ke]}function mm(ke){return We=We||{},tt(We[ke])&&(We[ke]=[]),We[ke]}}return f}(),dv=";",bp="=";function Sc(f){if(!f)return{};var m=f[zs](dv),y=Ir(m,function(U,G){var V=G[zs](bp);if(V[pt]===2){var te=V[0][us](),pe=V[1];U[te]=pe}return U},{});if(oa(y)[pt]>0){if(y.endpointsuffix){var N=y.location?y.location+".":"";y[cs]=y[cs]||"https://"+N+"dc."+y.endpointsuffix}y[cs]=y[cs]||cp,Wo(y[cs],"/")&&(y[cs]=y[cs].slice(0,-1))}return y}var uo={parse:Sc},dd=function(){function f(m,y,N){var U=this,G=this;G.ver=1,G.sampleRate=100,G.tags={},G[ls]=za(m,N)||Ta,G.data=y,G.time=or(new Date),G[cf]={time:1,iKey:1,name:1,sampleRate:function(){return U.sampleRate===100?4:1},tags:1,data:1}}return f}(),ml=function(){function f(m,y,N,U){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var G=this;G.ver=2,G[ls]=za(m,y)||Ta,G[fs]=Ia(m,N),G[Ao]=Du(m,U)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.Event",f.dataType="EventData",f}(),Fo=58,Eh=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Ep=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,Wm=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,Th=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,Oa=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,pd=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,vd=/([^\(\s\n]+):([0-9]+)$/,cm="<no_method>",hl="error",li="stack",co="stackDetails",md="errorSrc",ku="message",wc="description",_s=[{re:Ep,len:5,m:1,fn:2,ln:3,col:4},{chk:lm,pre:pv,re:Wm,len:4,m:1,fn:2,ln:3},{re:Th,len:3,m:1,fn:2,hdl:Js},{re:Oa,len:2,fn:1,hdl:Js}];function pv(f){return f.replace(/(\(anonymous\))/,"<anonymous>")}function lm(f){return $a(f,"[native")<0}function vt(f,m){var y=f;return y&&!je(y)&&(JSON&&JSON[dp]?(y=JSON[dp](f),m&&(!y||y==="{}")&&(Tr(f[ji])?y=f[ji]():y=""+f)):y=""+f+" - (Missing JSON.stringify)"),y||""}function Ou(f,m){var y=f;return f&&(y&&!je(y)&&(y=f[ku]||f[wc]||y),y&&!je(y)&&(y=vt(y,!0)),f.filename&&(y=y+" @"+(f.filename||"")+":"+(f.lineno||"?")+":"+(f.colno||"?"))),m&&m!=="String"&&m!=="Object"&&m!=="Error"&&$a(y||"",m)===-1&&(y=m+": "+y),y||""}function Ws(f){try{if(Hn(f))return"hasFullStack"in f&&"typeName"in f}catch{}return!1}function mf(f){try{if(Hn(f))return"ver"in f&&"exceptions"in f&&"properties"in f}catch{}return!1}function fm(f){return f&&f.src&&je(f.src)&&f.obj&&Ht(f.obj)}function bc(f){var m=f||"";je(m)||(je(m[li])?m=m[li]:m=""+m);var y=m[zs](`
`);return{src:m,obj:y}}function hd(f){for(var m=[],y=f[zs](`
`),N=0;N<y[pt];N++){var U=y[N];y[N+1]&&(U+="@"+y[N+1],N++),m[af](U)}return{src:f,obj:m}}function gs(f){var m=null;if(f)try{if(f[li])m=bc(f[li]);else if(f[hl]&&f[hl][li])m=bc(f[hl][li]);else if(f.exception&&f.exception[li])m=bc(f.exception[li]);else if(fm(f))m=f;else if(fm(f[co]))m=f[co];else if(Hu()&&Hu().opera&&f[ku])m=hd(f[oo]);else if(f.reason&&f.reason[li])m=bc(f.reason[li]);else if(je(f))m=bc(f);else{var y=f[ku]||f[wc]||"";je(f[md])&&(y&&(y+=`
`),y+=" from "+f[md]),y&&(m=bc(y))}}catch(N){m=bc(N)}return m||{src:"",obj:null}}function dm(f){var m="";return f&&(f.obj?m=f.obj.join(`
`):m=f.src||""),m}function Tp(f){var m,y=f.obj;if(y&&y[pt]>0){m=[];var N=0,U=!1,G=0;ta(y,function(nr){if(U||Ip(nr)){var Ut=ir(nr);U=!0;var Nr=gv(Ut,N);Nr&&(G+=Nr[Ro],m[af](Nr),N++)}});var V=32*1024;if(G>V)for(var te=0,pe=m[pt]-1,he=0,We=te,Ot=pe;te<pe;){var rr=m[te][Ro],ur=m[pe][Ro];if(he+=rr+ur,he>V){var st=Ot-We+1;m.splice(We,st);break}We=te,Ot=pe,te++,pe--}}return m}function _l(f){var m="";if(f&&(m=f.typeName||f[ls]||"",!m))try{var y=/function (.{1,200})\(/,N=y.exec(f.constructor[ji]());m=N&&N[pt]>1?N[1]:""}catch{}return m}function Ec(f){if(f)try{if(!je(f)){var m=_l(f),y=vt(f,!1);return(!y||y==="{}")&&(f[hl]&&(f=f[hl],m=_l(f)),y=vt(f,!0)),$a(y,m)!==0&&m!=="String"?m+":"+y:y}}catch{}return""+(f||"")}var Tc=function(){function f(m,y,N,U,G,V){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var te=this;te.ver=2,mf(y)?(te[uf]=y[uf]||[],te[fs]=y[fs],te[Ao]=y[Ao],y[vp]&&(te[vp]=y[vp]),y.id&&(te.id=y.id,y[fs].id=y.id),y[_c]&&(te[_c]=y[_c]),tt(y[mp])||(te[mp]=y[mp])):(N||(N={}),V&&(N.id=V),te[uf]=[ys(m,y,N)],te[fs]=Ia(m,N),te[Ao]=Du(m,U),G&&(te[vp]=G),V&&(te.id=V))}return f.CreateAutoException=function(m,y,N,U,G,V,te,pe){var he,We=_l(G||V||m);return he={},he[oo]=Ou(m,We),he.url=y,he.lineNumber=N,he.columnNumber=U,he.error=Ec(G||V||m),he.evt=Ec(V||m),he[hc]=We,he.stackDetails=gs(te||G||V),he.errorSrc=pe,he},f.CreateFromInterface=function(m,y,N,U){var G=y[uf]&&gi(y[uf],function(te){return mv(m,te)}),V=new f(m,qc(qc({},y),{exceptions:G}),N,U);return V},f.prototype.toInterface=function(){var m,y=this,N=y.exceptions,U=y.properties,G=y.measurements,V=y.severityLevel,te=y.problemGroup,pe=y.id,he=y.isManual,We=N instanceof Array&&gi(N,function(Ot){return Ot.toInterface()})||void 0;return m={ver:"4.0"},m[uf]=We,m.severityLevel=V,m.properties=U,m.measurements=G,m.problemGroup=te,m.id=pe,m.isManual=he,m},f.CreateSimpleException=function(m,y,N,U,G,V){var te;return{exceptions:[(te={},te[hp]=!0,te.message=m,te.stack=G,te.typeName=y,te)]}},f.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",f.dataType="ExceptionData",f.formatError=Ec,f}(),vv=Lr({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function Wr(){var f,m=this,y=Ht(m[Po])&&gi(m[Po],function(U){return gl(U)}),N=(f={id:m.id,outerId:m.outerId,typeName:m[hc],message:m[oo],hasFullStack:m[hp],stack:m[li]},f[Po]=y||void 0,f);return N}function ys(f,m,y){var N,U,G,V,te,pe,he,We;if(Ws(m))V=m[hc],te=m[oo],he=m[li],We=m[Po]||[],pe=m[hp];else{var Ot=m,rr=Ot&&Ot.evt;Tt(Ot)||(Ot=Ot[hl]||rr||Ot),V=za(f,_l(Ot))||Ta,te=lf(f,Ou(m||Ot,V))||Ta;var ur=m[co]||gs(m);We=Tp(ur),Ht(We)&&gi(We,function(st){st[id]=za(f,st[id]),st[ds]=za(f,st[ds])}),he=vs(f,dm(ur)),pe=Ht(We)&&We[pt]>0,y&&(y[hc]=y[hc]||V)}return N={},N[cf]=vv,N.id=U,N.outerId=G,N[hc]=V,N[oo]=te,N[hp]=pe,N.stack=he,N[Po]=We,N.toInterface=Wr,N}function mv(f,m){var y=Ht(m[Po])&&gi(m[Po],function(U){return _d(U)})||m[Po],N=ys(f,qc(qc({},m),{parsedStack:y}));return N}function hv(f,m){var y=m[pp](pd);if(y&&y[pt]>=4)f[ds]=y[1],f[ko]=parseInt(y[2]);else{var N=m[pp](vd);N&&N[pt]>=3?(f[ds]=N[1],f[ko]=parseInt(N[2])):f[ds]=m}}function Js(f,m,y){var N=f[ds];m.fn&&y&&y[pt]>m.fn&&(m.ln&&y[pt]>m.ln?(N=ra(y[m.fn]||""),f[ko]=parseInt(ra(y[m.ln]||""))||0):N=ra(y[m.fn]||"")),N&&hv(f,N)}function Ip(f){var m=!1;if(f&&je(f)){var y=ra(f);y&&(m=Eh.test(y))}return m}var _v=Lr({level:1,method:1,assembly:0,fileName:0,line:0});function gv(f,m){var y,N;if(f&&je(f)&&ra(f)){N=(y={},y[cf]=_v,y[od]=m,y[id]=ra(f),y[Oo]=cm,y.fileName="",y.line=0,y[Ro]=0,y);for(var U=0;U<_s[pt];){var G=_s[U];if(G.chk&&!G.chk(f))break;G.pre&&(f=G.pre(f));var V=f[pp](G.re);if(V&&V[pt]>=G.len){G.m&&(N[Oo]=ra(V[G.m]||cm)),G.hdl?G.hdl(N,G,V):G.fn&&(G.ln?(N[ds]=ra(V[G.fn]||""),N[ko]=parseInt(ra(V[G.ln]||""))||0):hv(N,V[G.fn]||""));break}U++}}return gd(N)}function _d(f){var m,y=(m={},m[cf]=_v,m.level=f[od],m.method=f[Oo],m.assembly=f[id],m.fileName=f[ds],m.line=f[ko],m[Ro]=0,m);return gd(y)}function gd(f){var m=Fo;return f&&(m+=f.method[pt],m+=f.assembly[pt],m+=f.fileName[pt],m+=f.level.toString()[pt],m+=f.line.toString()[pt],f[Ro]=m),f}function gl(f){return{level:f[od],method:f[Oo],assembly:f[id],fileName:f[ds],line:f[ko]}}var Ic=function(){function f(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return f}(),Np=function(){function f(m,y,N,U,G,V,te,pe,he){this.aiDataContract={ver:1,metrics:1,properties:0};var We=this;We.ver=2;var Ot=new Ic;Ot[il]=U>0?U:void 0,Ot.max=isNaN(V)||V===null?void 0:V,Ot.min=isNaN(G)||G===null?void 0:G,Ot[ls]=za(m,y)||Ta,Ot.value=N,Ot.stdDev=isNaN(te)||te===null?void 0:te,We.metrics=[Ot],We[fs]=Ia(m,pe),We[Ao]=Du(m,he)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",f.dataType="MetricData",f}(),yl="";function yv(f,m){return m===void 0&&(m=!1),f==null?m:f.toString()[us]()==="true"}function lo(f){(isNaN(f)||f<0)&&(f=0),f=Math.round(f);var m=yl+f%1e3,y=yl+Math.floor(f/1e3)%60,N=yl+Math.floor(f/(1e3*60))%60,U=yl+Math.floor(f/(1e3*60*60))%24,G=Math.floor(f/(1e3*60*60*24));return m=m[pt]===1?"00"+m:m[pt]===2?"0"+m:m,y=y[pt]<2?"0"+y:y,N=N[pt]<2?"0"+N:N,U=U[pt]<2?"0"+U:U,(G>0?G+".":yl)+U+":"+N+":"+y+"."+m}function Sv(f,m){var y=null;return ta(f,function(N){if(N.identifier===m)return y=N,-1}),y}function yd(f,m,y,N,U){return!U&&je(f)&&(f==="Script error."||f==="Script error")}var pm=function(){function f(m,y,N,U,G,V,te){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var pe=this;pe.ver=2,pe.id=ud(m,te),pe.url=Vs(m,N),pe[ls]=za(m,y)||Ta,isNaN(U)||(pe[sl]=lo(U)),pe[fs]=Ia(m,G),pe[Ao]=Du(m,V)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",f.dataType="PageviewData",f}(),Ss=function(){function f(m,y,N,U,G,V,te,pe,he,We,Ot,rr){he===void 0&&(he="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var ur=this;ur.ver=2,ur.id=y,ur[sl]=lo(G),ur.success=V,ur.resultCode=te+"",ur.type=za(m,he);var st=rm(m,N,pe,U);ur.data=Vs(m,U)||st.data,ur.target=za(m,st.target),We&&(ur.target="".concat(ur.target," | ").concat(We)),ur[ls]=za(m,st[ls]),ur[fs]=Ia(m,Ot),ur[Ao]=Du(m,rr)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",f.dataType="RemoteDependencyData",f}(),Jm=function(){function f(m,y,N,U,G){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var V=this;V.ver=2,y=y||Ta,V[oo]=lf(m,y),V[fs]=Ia(m,U),V[Ao]=Du(m,G),N&&(V[vp]=N)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.Message",f.dataType="MessageData",f}(),Mu=function(){function f(m,y,N,U,G,V,te){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var pe=this;pe.ver=2,pe.url=Vs(m,N),pe[ls]=za(m,y)||Ta,pe[fs]=Ia(m,G),pe[Ao]=Du(m,V),te&&(pe.domProcessing=te.domProcessing,pe[sl]=te[sl],pe.networkConnect=te.networkConnect,pe.perfTotal=te.perfTotal,pe[ka]=te[ka],pe.sentRequest=te.sentRequest)}return f.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",f.dataType="PageviewPerformanceData",f}(),wv=function(){function f(m,y){this.aiDataContract={baseType:1,baseData:1},this.baseType=m,this.baseData=y}return f}(),Sl=Yl({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),vm=function(){function f(){}return f.getConfig=function(m,y,N,U){U===void 0&&(U=!1);var G;return N&&m[mc]&&m[mc][N]&&!tt(m[mc][N][y])?G=m[mc][N][y]:G=m[y],tt(G)?U:G},f}();function Uo(f){var m="ai."+f+".";return function(y){return m+y}}var ws=Uo("application"),kn=Uo("device"),hf=Uo("location"),wl=Uo("operation"),Sd=Uo("session"),sr=Uo("user"),Yi=Uo("cloud"),$i=Uo("internal"),Na=function(f){Kv(m,f);function m(){return f.call(this)||this}return m}(es({applicationVersion:ws("ver"),applicationBuild:ws("build"),applicationTypeId:ws("typeId"),applicationId:ws("applicationId"),applicationLayer:ws("layer"),deviceId:kn("id"),deviceIp:kn("ip"),deviceLanguage:kn("language"),deviceLocale:kn("locale"),deviceModel:kn("model"),deviceFriendlyName:kn("friendlyName"),deviceNetwork:kn("network"),deviceNetworkName:kn("networkName"),deviceOEMName:kn("oemName"),deviceOS:kn("os"),deviceOSVersion:kn("osVersion"),deviceRoleInstance:kn("roleInstance"),deviceRoleName:kn("roleName"),deviceScreenResolution:kn("screenResolution"),deviceType:kn("type"),deviceMachineName:kn("machineName"),deviceVMName:kn("vmName"),deviceBrowser:kn("browser"),deviceBrowserVersion:kn("browserVersion"),locationIp:hf("ip"),locationCountry:hf("country"),locationProvince:hf("province"),locationCity:hf("city"),operationId:wl("id"),operationName:wl("name"),operationParentId:wl("parentId"),operationRootId:wl("rootId"),operationSyntheticSource:wl("syntheticSource"),operationCorrelationVector:wl("correlationVector"),sessionId:Sd("id"),sessionIsFirst:Sd("isFirst"),sessionIsNew:Sd("isNew"),userAccountAcquisitionDate:sr("accountAcquisitionDate"),userAccountId:sr("accountId"),userAgent:sr("userAgent"),userId:sr("id"),userStoreRegion:sr("storeRegion"),userAuthUserId:sr("authUserId"),userAnonymousUserAcquisitionDate:sr("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:sr("authUserAcquisitionDate"),cloudName:Yi("name"),cloudRole:Yi("role"),cloudRoleVer:Yi("roleVer"),cloudRoleInstance:Yi("roleInstance"),cloudEnvironment:Yi("environment"),cloudLocation:Yi("location"),cloudDeploymentUnit:Yi("deploymentUnit"),internalNodeName:$i("nodeName"),internalSdkVersion:$i("sdkVersion"),internalAgentVersion:$i("agentVersion"),internalSnippet:$i("snippet"),internalSdkSrc:$i("sdkSrc")}));function bl(f,m,y,N,U,G){var V;y=za(N,y)||Ta,(tt(f)||tt(m)||tt(y))&&Mr("Input doesn't contain all required fields");var te="";f[nd]&&(te=f[nd],delete f[nd]);var pe=(V={},V[ls]=y,V.time=or(new Date),V.iKey=te,V.ext=G||{},V.tags=[],V.data={},V.baseType=m,V.baseData=f,V);return tt(U)||Gt(U,function(he,We){pe.data[he]=We}),pe}var mn=function(){function f(){}return f.create=bl,f}(),El={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},Zs=new Na;function Dp(f){var m=null;if(Tr(Event))m=new Event(f);else{var y=xa();y&&y.createEvent&&(m=y.createEvent("Event"),m.initEvent(f,!0,!0))}return m}function Xs(f,m){up(f,null,null,m)}function bv(f){var m=xa(),y=Kr(),N=!1,U=[],G=1;y&&!tt(y.onLine)&&!y.onLine&&(G=2);var V=0,te=rr(),pe=nf(Ti("OfflineListener"),f);try{if(We(Hu())&&(N=!0),m){var he=m.body||m;he.ononline&&We(he)&&(N=!0)}}catch{N=!1}function We(Pt){var In=!1;return Pt&&(In=rl(Pt,"online",nr,pe),In&&rl(Pt,"offline",Ut,pe)),In}function Ot(){return te}function rr(){return!(V===2||G===2)}function ur(){var Pt=rr();te!==Pt&&(te=Pt,ta(U,function(In){var _f={isOnline:te,rState:G,uState:V};try{In(_f)}catch{}}))}function st(Pt){V=Pt,ur()}function nr(){G=1,ur()}function Ut(){G=2,ur()}function Nr(){var Pt=Hu();if(Pt&&N){if(Xs(Pt,pe),m){var In=m.body||m;Vr(In.ononline)||Xs(In,pe)}N=!1}}function Dr(Pt){return U[af](Pt),{rm:function(){var In=U.indexOf(Pt);if(In>-1)return U.splice(In,1)}}}return{isOnline:Ot,isListening:function(){return N},unload:Nr,addListener:Dr,setOnlineState:st}}var Lu="AppInsightsPropertiesPlugin",Ev="AppInsightsChannelPlugin",Tv="ApplicationInsightsAnalytics";e.AnalyticsPluginIdentifier=Tv,e.BreezeChannelIdentifier=Ev,e.ConfigurationManager=vm,e.ConnectionStringParser=uo,e.ContextTagKeys=Na,e.CtxTagKeys=Zs,e.DEFAULT_BREEZE_ENDPOINT=cp,e.DEFAULT_BREEZE_PATH=rd,e.Data=wv,e.DisabledPropertyName=na,e.DistributedTracingModes=fv,e.Envelope=dd,e.Event=ml,e.EventPersistence=am,e.Exception=Tc,e.Extensions=El,e.HttpMethod=Iu,e.Metric=Np,e.PageView=pm,e.PageViewPerformance=Mu,e.ProcessLegacy=Ea,e.PropertiesPluginIdentifier=Lu,e.RemoteDependencyData=Ss,e.RequestHeaders=lp,e.SampleRate=nl,e.SeverityLevel=Sl,e.TelemetryItemCreator=mn,e.ThrottleMgr=um,e.Trace=Jm,e.correlationIdCanIncludeCorrelationHeader=df,e.correlationIdGetCorrelationContext=hs,e.correlationIdGetCorrelationContextValue=gc,e.correlationIdGetPrefix=ld,e.correlationIdSetPrefix=ms,e.createDistributedTraceContextFromTrace=nm,e.createDomEvent=Dp,e.createOfflineListener=bv,e.createTelemetryItem=bl,e.createTraceParent=Qv,e.dataSanitizeException=vs,e.dataSanitizeId=ud,e.dataSanitizeInput=ul,e.dataSanitizeKey=sd,e.dataSanitizeKeyAndAddUniqueness=ps,e.dataSanitizeMeasurements=Du,e.dataSanitizeMessage=lf,e.dataSanitizeProperties=Ia,e.dataSanitizeString=za,e.dataSanitizeUrl=Vs,e.dateTimeUtilsDuration=Km,e.dateTimeUtilsNow=fl,e.dsPadNumber=Cu,e.findAllScripts=sp,e.findW3cTraceParent=ba,e.formatTraceParent=fc,e.getExtensionByName=Sv,e.isBeaconApiSupported=Eo,e.isCrossOriginError=yd,e.isInternalApplicationInsightsEndpoint=gp,e.isSampledFlag=Hr,e.isValidSpanId=op,e.isValidTraceId=el,e.isValidTraceParent=qs,e.msToTimeSpan=lo,e.parseConnectionString=Sc,e.parseTraceParent=ip,e.strNotSpecified=Ta,e.stringToBoolOrDefault=yv,e.urlGetAbsoluteUrl=ff,e.urlGetCompleteUrl=Vm,e.urlGetPathName=lv,e.urlParseFullHost=_p,e.urlParseHost=cd,e.urlParseUrl=cl,e.utlCanUseLocalStorage=yc,e.utlCanUseSessionStorage=Sp,e.utlDisableStorage=fd,e.utlEnableStorage=Mo,e.utlGetLocalStorage=im,e.utlGetSessionStorage=Ru,e.utlGetSessionStorageKeys=Lo,e.utlRemoveSessionStorage=sm,e.utlRemoveStorage=yp,e.utlSetLocalStorage=om,e.utlSetSessionStorage=vl,e.utlSetStoragePrefix=vf})});var g0=Ld(ny=>{"use strict";Object.defineProperty(ny,"__esModule",{value:!0});ny.TelemetryUtil=void 0;var _0=class e{static applyReplacements(t,r){for(let n of Object.keys(t))for(let s of r)s.lookup.test(n)&&(s.replacementString!==void 0?t[n]=s.replacementString:delete t[n])}static shouldUseOneDataSystemSDK(t){return t.length===74&&t[32]==="-"&&t[41]==="-"&&t[46]==="-"&&t[51]==="-"&&t[56]==="-"&&t[69]==="-"}static getAdditionalCommonProperties(t){return{"common.os":t.platform,"common.nodeArch":t.architecture,"common.platformversion":(t.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.8"}}static getInstance(){return e._instance||(e._instance=new e),e._instance}};ny.TelemetryUtil=_0});var mw=Ld((ay,vw)=>{(function(e,t){typeof ay=="object"&&typeof vw<"u"?t(ay):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{})))})(ay,function(e){"use strict";function t(i,o){return i||o}function r(i,o){return i[o]}var n=void 0,s=null,u="",h="function",S="object",I="prototype",D="__proto__",F="undefined",H="constructor",ie="Symbol",me="_polyfill",re="length",Q="name",ne="call",ce="toString",ge=t(Object),Ue=r(ge,I),we=t(String),qe=r(we,I),lt=t(Math),ot=t(Array),xt=r(ot,I),cr=r(xt,"slice");function Jt(i,o){try{return{v:i.apply(this,o)}}catch(l){return{e:l}}}function Nt(i,o){var l=Jt(i);return l.e?o:l.v}var Un;function ha(i){return function(o){return typeof o===i}}function Vr(i){var o="[object "+i+"]";return function(l){return!!(l&&Xr(l)===o)}}function Xr(i){return Ue[ce].call(i)}function tt(i){return typeof i===F||i===F}function Ya(i){return!Hn(i)}function je(i){return i===s||tt(i)}function Tr(i){return i===s||!Hn(i)}function Hn(i){return!!i||i!==n}function Ht(i){return!Un&&(Un=["string","number","boolean",F,"symbol","bigint"]),i!==S&&Un.indexOf(i)!==-1}var Tt=ha("string"),rt=ha(h);function Qn(i){return!i&&je(i)?!1:!!i&&typeof i===S}var nt=r(ot,"isArray"),su=Vr("Date"),Gt=ha("number"),Ho=ha("boolean"),zt=Vr("Error");function er(i){return!!(i&&i.then&&rt(i.then))}function ea(i){return!(!i||Nt(function(){return!(i&&0+i)},!i))}var Dt=r(ge,"getOwnPropertyDescriptor");function fn(i,o){return!!i&&Ue.hasOwnProperty[ne](i,o)}var ir=t(r(ge,"hasOwn"),ct);function ct(i,o){return fn(i,o)||!!Dt(i,o)}function bt(i,o,l){if(i&&Qn(i)){for(var v in i)if(ir(i,v)&&o[ne](l||i,v,i[v])===-1)break}}var Mr={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function jn(i){var o={};if(o[Mr.c]=!0,o[Mr.e]=!0,i.l){o.get=function(){return i.l.v};var l=Dt(i.l,"v");l&&l.set&&(o.set=function(v){i.l.v=v})}return bt(i,function(v,w){o[Mr[v]]=Ya(w)?o[Mr[v]]:w}),o}var Xa=r(ge,"defineProperty");function on(i,o,l){return Xa(i,o,jn(l))}function En(i,o,l,v,w){var T={};return bt(i,function(A,L){Vi(T,A,o?L:A,w),Vi(T,L,l?L:A,w)}),v?v(T):T}function Vi(i,o,l,v){Xa(i,o,{value:l,enumerable:!0,writable:!!v})}var oa=t(we),Lr="[object Error]";function Zt(i,o){var l=u,v=Ue[ce][ne](i);v===Lr&&(i={stack:oa(i.stack),message:oa(i.message),name:oa(i.name)});try{l=JSON.stringify(i,s,o?typeof o=="number"?o:4:n),l=(l?l.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):s)||oa(i)}catch(w){l=" - "+Zt(w,o)}return v+": "+l}function lr(i){throw new Error(i)}function Qr(i){throw new TypeError(i)}var Ol=r(ge,"freeze");function zn(i){return i}function Ml(i){return i[D]||s}var mo=r(ge,"assign"),Rn=r(ge,"keys");function As(i){return Ol&&bt(i,function(o,l){(nt(l)||Qn(l))&&As(l)}),tr(i)}var tr=t(Ol,zn),Yn=t(r(ge,"getPrototypeOf"),Ml);function Qa(i){return En(i,1,0,tr)}function ei(i){return En(i,0,0,tr)}function ti(i){var o={};return bt(i,function(l,v){Vi(o,l,v[1]),Vi(o,v[0],v[1])}),tr(o)}function Mf(i){return ti(i)}var Uc=ei({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),hi="__tsUtils$gblCfg",uu;function Ki(){var i;return typeof globalThis!==F&&(i=globalThis),!i&&typeof self!==F&&(i=self),!i&&typeof window!==F&&(i=window),!i&&typeof global!==F&&(i=global),i}function cu(){if(!uu){var i=Jt(Ki).v||{};uu=i[hi]=i[hi]||{}}return uu}var _a=Gn;function Gn(i,o,l){var v=o?o[i]:s;return function(w){var T=(w?w[i]:s)||v;if(T||l){var A=arguments;return(T||l).apply(w,T?cr[ne](A,1):A)}Qr('"'+oa(i)+'" not defined for '+Zt(w))}}function Bu(i){return function(o){return o[i]}}var lu=r(lt,"max"),Ll=_a("slice",qe),ga=_a("substring",qe),xr=Gn("substr",qe,yn);function yn(i,o,l){return je(i)&&Qr("Invalid "+Zt(i)),l<0?u:(o=o||0,o<0&&(o=lu(o+i[re],0)),tt(l)?Ll(i,o):Ll(i,o,o+l))}function tn(i,o){return ga(i,0,o)}var xa="_urid",ho;function Hu(){if(!ho){var i=cu();ho=i.gblSym=i.gblSym||{k:{},s:{}}}return ho}var _i;function Kr(i){var o={description:oa(i),toString:function(){return ie+"("+i+")"}};return o[me]=!0,o}function _o(i){var o=Hu();if(!ir(o.k,i)){var l=Kr(i),v=Rn(o.s).length;l[xa]=function(){return v+"_"+l[ce]()},o.k[i]=l,o.s[l[xa]()]=oa(i)}return o.k[i]}function zo(i){!_i&&(_i={});var o,l=Uc[i];return l&&(o=_i[l]=_i[l]||Kr(ie+"."+l)),o}var Vn;function Go(){Vn=cu()}function fu(i){var o={};return!Vn&&Go(),o.b=Vn.lzy,Xa(o,"v",{configurable:!0,get:function(){var l=i();return Vn.lzy||Xa(o,"v",{value:l}),o.b=Vn.lzy,l}}),o}function ri(i){return Xa({toJSON:function(){return i}},"v",{value:i})}var dn="window",ta;function zu(i,o){var l;return function(){return!Vn&&Go(),(!l||Vn.lzy)&&(l=ri(Jt(i,o).v)),l.v}}function gi(i){return!Vn&&Go(),(!ta||i===!1||Vn.lzy)&&(ta=ri(Jt(Ki).v||s)),ta.v}function Ir(i,o){var l;if(!ta||o===!1?l=gi(o):l=ta.v,l&&l[i])return l[i];if(i===dn)try{return window}catch{}return s}function ya(){return!!Lf()}var Lf=zu(Ir,["document"]);function Pa(){return!!Vo()}var Vo=zu(Ir,[dn]);function jc(){return!!Ko()}var Ko=zu(Ir,["navigator"]),Ff=zu(function(){return!!Jt(function(){return process&&(process.versions||{}).node}).v}),sn,Fl;function ni(){return sn=ri(Jt(Ir,[ie]).v),sn}function $d(i){var o=(Vn.lzy?0:sn)||ni();return o.v?o.v[i]:n}function ra(){return!!Zp()}function Zp(){return!Vn&&Go(),((Vn.lzy?0:sn)||ni()).v}function yi(i,o){var l=Uc[i];!Vn&&Go();var v=(Vn.lzy?0:sn)||ni();return v.v?v.v[l||i]:o?n:zo(i)}function Ul(i,o){!Vn&&Go();var l=(Vn.lzy?0:sn)||ni();return l.v?l.v(i):o?s:Kr(i)}function Wi(i){return!Vn&&Go(),Fl=(Vn.lzy?0:Fl)||ri(Jt($d,["for"]).v),(Fl.v||_o)(i)}function Uf(i){return!!i&&rt(i.next)}function gr(i){return!Tr(i)&&rt(i[yi(3)])}var Wo;function jf(i,o,l){if(i&&(Uf(i)||(!Wo&&(Wo=ri(yi(3))),i=i[Wo.v]?i[Wo.v]():s),Uf(i))){var v=n,w=n;try{for(var T=0;!(w=i.next()).done&&o[ne](l||i,w.value,T,i)!==-1;)T++}catch(A){v={e:A},i.throw&&(w=s,i.throw(v))}finally{try{w&&!w.done&&i.return&&i.return(w)}finally{if(v)throw v.e}}}}function $a(i,o,l){return i.apply(o,l)}function Yc(i,o){return!tt(o)&&i&&(nt(o)?$a(i.push,i,o):Uf(o)||gr(o)?jf(o,function(l){i.push(l)}):i.push(o)),i}function kt(i,o,l){if(i)for(var v=i[re]>>>0,w=0;w<v&&!(w in i&&o[ne](l||i,i[w],w,i)===-1);w++);}var Si=_a("indexOf",xt),Gu=_a("map",xt);function jl(i,o,l){return((i?i.slice:s)||cr).apply(i,cr[ne](arguments,1))}var Gv=_a("reduce",xt),Di=t(r(ge,"create"),Yl);function Yl(i){if(!i)return{};var o=typeof i;o!==S&&o!==h&&Qr("Prototype must be an Object or function: "+Zt(i));function l(){}return l[I]=i,new l}var qd;function du(i,o){var l=ge.setPrototypeOf||function(v,w){var T;!qd&&(qd=ri((T={},T[D]=[],T instanceof Array))),qd.v?v[D]=w:bt(w,function(A,L){return v[A]=L})};return l(i,o)}function Ci(i,o,l){Jt(on,[o,Q,{v:i,c:!0,e:!1}]),o=du(o,l);function v(){this[H]=o,Jt(on,[this,Q,{v:i,c:!0,e:!1}])}return o[I]=l===s?Di(l):(v[I]=l[I],new v),o}function ft(i,o){o&&(i[Q]=o)}function Sa(i,o,l){var v=l||Error,w=v[I][Q],T=Error.captureStackTrace;return Ci(i,function(){var A=this,L=arguments;try{Jt(ft,[v,i]);var Y=$a(v,A,cr[ne](L))||A;if(Y!==A){var B=Yn(A);B!==Yn(Y)&&du(Y,B)}return T&&T(Y,A[H]),o&&o(Y,L),Y}finally{Jt(ft,[v,w])}},v)}function pu(){return(Date.now||Rs)()}function Rs(){return new Date().getTime()}function Bd(i){return function(l){return je(l)&&Qr("strTrim called ["+Zt(l)+"]"),l&&l.replace&&(l=l.replace(i,u)),l}}var Hd=Bd(/^\s+|(?=\s)\s+$/g),Sn=Gn("trim",qe,Hd),wi,zd,xi;function ai(i){if(!i||typeof i!==S)return!1;xi||(xi=Pa()?Vo():!0);var o=!1;if(i!==xi){zd||(wi=Function[I][ce],zd=wi[ne](ge));try{var l=Yn(i);o=!l,o||(fn(l,H)&&(l=l[H]),o=!!(l&&typeof l===h&&wi[ne](l)===zd))}catch{}}return o}function Hm(i){return i.value&&Ji(i),!0}var Vv=[qa,Ji,ql,$l];function Xp(i,o,l,v){var w;return kt(i,function(T){if(T.k===o)return w=T,-1}),w||(w={k:o,v:o},i.push(w),v(w)),w.v}function vu(i,o,l,v){var w=l.handler,T=l.path?v?l.path.concat(v):l.path:[],A={handler:l.handler,src:l.src,path:T},L=typeof o,Y=!1,B=o===s;B||(o&&L===S?Y=ai(o):B=Ht(L));var W={type:L,isPrim:B,isPlain:Y,value:o,result:o,path:T,origin:l.src,copy:function(le,fe){return vu(i,le,fe?A:l,fe)},copyTo:function(le,fe){return Qp(i,le,fe,A)}};return W.isPrim?w&&w[ne](l,W)?W.result:o:Xp(i,o,T,function(le){on(W,"result",{g:function(){return le.v},s:function(se){le.v=se}});for(var fe=0,de=w;!(de||(fe<Vv.length?Vv[fe++]:Hm))[ne](l,W);)de=s})}function Qp(i,o,l,v){if(!je(l))for(var w in l)o[w]=vu(i,l[w],v,w);return o}function bh(i,o,l){var v={handler:l,src:o,path:[]};return Qp([],i,o,v)}function Gd(i,o){var l={handler:o,src:i};return vu([],i,l)}function qa(i){var o=i.value;if(nt(o)){var l=i.result=[];return l.length=o.length,i.copyTo(l,o),!0}return!1}function $l(i){var o=i.value;return su(o)?(i.result=new Date(o.getTime()),!0):!1}function ql(i){return i.type===h}function Ji(i){var o=i.value;if(o&&i.isPlain){var l=i.result={};return i.copyTo(l,o),!0}return!1}function bi(i,o){return kt(o,function(l){bh(i,l)}),i}function mu(i,o,l,v,w,T,A){return bi(Gd(i)||{},cr[ne](arguments))}var ev=Bu(re),Pi=Gn("endsWith",qe,Vd);function Vd(i,o,l){Tt(i)||Qr("'"+Zt(i)+"' is not a string");var v=Tt(o)?o:oa(o),w=!tt(l)&&l<i[re]?l:i[re];return ga(i,w-v[re],w)===v}var hu=_a("indexOf",qe),$c="ref",Bl="unref",Yf="hasRef",Kd="enabled";function tv(i,o,l){var v=!0,w=i?o(s):s,T;function A(){return v=!1,w&&w[Bl]&&w[Bl](),T}function L(){w&&l(w),w=s}function Y(){return w=o(w),v||A(),T}function B(W){!W&&w&&L(),W&&!w&&Y()}return T={cancel:L,refresh:Y},T[Yf]=function(){return w&&w[Yf]?w[Yf]():v},T[$c]=function(){return v=!0,w&&w[$c]&&w[$c](),T},T[Bl]=A,T=Xa(T,Kd,{get:function(){return!!w},set:B}),{h:T,dn:function(){w=s}}}function rv(i,o,l){var v=nt(o),w=v?o.length:0,T=(w>0?o[0]:v?n:o)||setTimeout,A=(w>1?o[1]:n)||clearTimeout,L=l[0];l[0]=function(){Y.dn(),$a(L,n,cr[ne](arguments))};var Y=tv(i,function(B){if(B){if(B.refresh)return B.refresh(),B;$a(A,n,[B])}return $a(T,n,l)},function(B){$a(A,n,[B])});return Y.h}function _u(i,o){return rv(!0,n,cr[ne](arguments))}function Wd(i,o){return rv(!1,n,cr[ne](arguments))}var ks,Vu="constructor",Ai="prototype",Hl="function",$f="_dynInstFuncs",qc="_isDynProxy",Zi="_dynClass",Kv="_dynCls$",Jo="_dynInstChk",go=Jo,Xi="_dfOpts",gu="_unknown_",qf="__proto__",Bc="_dyn"+qf,Hc="__dynProto$Gbl",Ku="_dynInstProto",Bf="useBaseInst",zl="setInstFuncs",Hf=Object,Wu=Hf.getPrototypeOf,Qi=Hf.getOwnPropertyNames,zc=gi(),yo=zc[Hc]||(zc[Hc]={o:(ks={},ks[zl]=!0,ks[Bf]=!0,ks),n:1e3});function Ei(i){return i&&(i===Hf[Ai]||i===Array[Ai])}function Zo(i){return Ei(i)||i===Function[Ai]}function Zr(i){var o;if(i){if(Wu)return Wu(i);var l=i[qf]||i[Ai]||(i[Vu]?i[Vu][Ai]:null);o=i[Bc]||l,fn(i,Bc)||(delete i[Ku],o=i[Bc]=i[Ku]||i[Bc],i[Ku]=l)}return o}function Os(i,o){var l=[];if(Qi)l=Qi(i);else for(var v in i)typeof v=="string"&&fn(i,v)&&l.push(v);if(l&&l.length>0)for(var w=0;w<l.length;w++)o(l[w])}function eo(i,o,l){return o!==Vu&&typeof i[o]===Hl&&(l||fn(i,o))&&o!==qf&&o!==Ai}function Gc(i){Qr("DynamicProto: "+i)}function Vc(i){var o=Di(null);return Os(i,function(l){!o[l]&&eo(i,l,!1)&&(o[l]=i[l])}),o}function Xo(i,o){for(var l=i.length-1;l>=0;l--)if(i[l]===o)return!0;return!1}function Gl(i,o,l,v){function w(Y,B,W){var le=B[W];if(le[qc]&&v){var fe=Y[$f]||{};fe[go]!==!1&&(le=(fe[B[Zi]]||{})[W]||le)}return function(){return le.apply(Y,arguments)}}var T=Di(null);Os(l,function(Y){T[Y]=w(o,l,Y)});for(var A=Zr(i),L=[];A&&!Zo(A)&&!Xo(L,A);)Os(A,function(Y){!T[Y]&&eo(A,Y,!Wu)&&(T[Y]=w(o,A,Y))}),L.push(A),A=Zr(A);return T}function Qo(i,o,l,v){var w=null;if(i&&fn(l,Zi)){var T=i[$f]||Di(null);if(w=(T[l[Zi]]||Di(null))[o],w||Gc("Missing ["+o+"] "+Hl),!w[Jo]&&T[go]!==!1){for(var A=!fn(i,o),L=Zr(i),Y=[];A&&L&&!Zo(L)&&!Xo(Y,L);){var B=L[o];if(B){A=B===v;break}Y.push(L),L=Zr(L)}try{A&&(i[o]=w),w[Jo]=1}catch{T[go]=!1}}}return w}function yu(i,o,l){var v=o[i];return v===l&&(v=Zr(o)[i]),typeof v!==Hl&&Gc("["+i+"] is not a "+Hl),v}function ii(i,o,l,v,w){function T(Y,B){var W=function(){var le=Qo(this,B,Y,W)||yu(B,Y,W);return le.apply(this,arguments)};return W[qc]=1,W}if(!Ei(i)){var A=l[$f]=l[$f]||Di(null);if(!Ei(A)){var L=A[o]=A[o]||Di(null);A[go]!==!1&&(A[go]=!!w),Ei(L)||Os(l,function(Y){eo(l,Y,!1)&&l[Y]!==v[Y]&&(L[Y]=l[Y],delete l[Y],(!fn(i,Y)||i[Y]&&!i[Y][qc])&&(i[Y]=T(i,Y)))})}}}function Jd(i,o){if(Wu){for(var l=[],v=Zr(o);v&&!Zo(v)&&!Xo(l,v);){if(v===i)return!0;l.push(v),v=Zr(v)}return!1}return!0}function Ju(i,o){return fn(i,Ai)?i.name||o||gu:((i||{})[Vu]||{}).name||o||gu}function Ba(i,o,l,v){fn(i,Ai)||Gc("theClass is an invalid class definition.");var w=i[Ai];Jd(w,o)||Gc("["+Ju(i)+"] not in hierarchy of ["+Ju(o)+"]");var T=null;fn(w,Zi)?T=w[Zi]:(T=Kv+Ju(i,"_")+"$"+yo.n,yo.n++,w[Zi]=T);var A=Ba[Xi],L=!!A[Bf];L&&v&&v[Bf]!==void 0&&(L=!!v[Bf]);var Y=Vc(o),B=Gl(w,o,Y,L);l(o,B);var W=!!Wu&&!!A[zl];W&&v&&(W=!!v[zl]),ii(w,T,o,Y,W!==!1)}Ba[Xi]=yo.o;var zf="function",Zd="object",Vl="undefined",Kl="prototype",Xd=Object,Wv=Xd[Kl];(gi()||{}).Symbol,(gi()||{}).Reflect;var Zu="hasOwnProperty",So=function(i){for(var o,l=1,v=arguments.length;l<v;l++){o=arguments[l];for(var w in o)Wv[Zu].call(o,w)&&(i[w]=o[w])}return i},to=mo||So,wn=function(i,o){return wn=Xd.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var w in v)v[Zu](w)&&(l[w]=v[w])},wn(i,o)};function Wl(i,o){typeof o!==zf&&o!==null&&Qr("Class extends value "+String(o)+" is not a constructor or null"),wn(i,o);function l(){this.constructor=i}i[Kl]=o===null?Di(o):(l[Kl]=o[Kl],new l)}function Xu(i,o){for(var l=0,v=o.length,w=i.length;l<v;l++,w++)i[w]=o[l];return i}var Qu=Qa,Qd=Mf,Ri=Qu({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),Su="toLowerCase",Ms="blkVal",or="length",wo="rdOnly",es="notify",ki="warnToConsole",Gf="throwInternal",Oi="setDf",wu="watch",pn="logger",oi="apply",jr="push",dt="splice",ec="hdlr",bo="cancel",Ls="initialize",ro="identifier",bu="removeNotificationListener",Mi="addNotificationListener",Br="isInitialized",Eo="instrumentationKey",Yr="INACTIVE",To="value",Vf="getNotifyMgr",Io="getPlugin",$n="name",no="iKey",ts="time",Aa="processNext",Ha="getProcessTelContext",Kc="pollInternalLogs",tc="enabled",Kf="stopPollingInternalLogs",Fs="unload",No="onComplete",Do="version",rc="loggingLevelConsole",Co="createNew",Kn="teardown",Wf="messageId",nc="message",Us="isAsync",Ti="diagLog",rs="_doTeardown",js="update",Li="getNext",Wc="setNextPlugin",Eu="protocol",wa="userAgent",Tu="split",Ys="nodeType",Fi="replace",ac="logInternalMessage",vn="type",sa="handler",Ui="status",ic="getResponseHeader",ns="getAllResponseHeaders",ep="isChildEvt",Ii="data",Jc="getCtx",Ra="setCtx",Jf="complete",si="itemsReceived",as="urlString",is="sendPOST",tp="headers",Jl="timeout",Zf="setRequestHeader",Zl="traceId",xo="spanId",ui="traceFlags",Zc;function Jv(i,o){Zc||(Zc=Sa("AggregationError",function(v,w){w[or]>1&&(v.errors=w[1])}));var l=i||"One or more errors occurred.";throw kt(o,function(v,w){l+=`
`.concat(w," > ").concat(Zt(v))}),new Zc(l,o||[])}var oc="Promise",sc="rejected";function os(i,o){return Xl(i,function(l){return o?o({status:"fulfilled",rejected:!1,value:l}):l},function(l){return o?o({status:sc,rejected:!0,reason:l}):l})}function Xl(i,o,l,v){var w=i;try{if(er(i))(o||l)&&(w=i.then(o,l));else try{o&&(w=o(i))}catch(T){if(l)w=l(T);else throw T}}finally{v&&zm(w,v)}return w}function zm(i,o){var l=i;return o&&(er(i)?i.finally?l=i.finally(o):l=i.then(function(v){return o(),v},function(v){throw o(),v}):o()),l}var rp=["pending","resolving","resolved",sc],Ql="dispatchEvent",uc;function nv(i){var o;return i&&i.createEvent&&(o=i.createEvent("Event")),!!o&&o.initEvent}function Zv(i,o,l,v){var w=Lf();!uc&&(uc=ri(!!Jt(nv,[w]).v));var T=uc.v?w.createEvent("Event"):v?new Event(o):{};if(l&&l(T),uc.v&&T.initEvent(o,!1,!0),T&&i[Ql])i[Ql](T);else{var A=i["on"+o];if(A)A(T);else{var L=Ir("console");L&&(L.error||L.log)(o,Zt(T))}}}var cc="unhandledRejection",Xv=cc.toLowerCase(),ef=10,np;function ao(i){return rt(i)?i.toString():Zt(i)}function av(i,o,l){var v=jl(arguments,3),w=0,T=!1,A,L=[],Y=!1,B=null,W;function le(Ke,ut){try{Y=!0,B&&B.cancel(),B=null;var wr=i(function(nn,an){L.push(function(){try{var Pn=w===2?Ke:ut,Kt=tt(Pn)?A:rt(Pn)?Pn(A):Pn;er(Kt)?Kt.then(nn,an):Pn?nn(Kt):w===3?an(Kt):nn(Kt)}catch(Yt){an(Yt)}}),T&&Re()},v);return wr}finally{}}function fe(Ke){return le(void 0,Ke)}function de(Ke){var ut=Ke,wr=Ke;return rt(Ke)&&(ut=function(nn){return Ke&&Ke(),nn},wr=function(nn){throw Ke&&Ke(),nn}),le(ut,wr)}function se(){return rp[w]}function Re(){if(L.length>0){var Ke=L.slice();L=[],Y=!0,B&&B.cancel(),B=null,o(Ke)}}function ye(Ke,ut){return function(wr){if(w===ut){if(Ke===2&&er(wr)){w=1,wr.then(ye(2,1),ye(3,1));return}w=Ke,T=!0,A=wr,Re(),!Y&&Ke===3&&!B&&(B=_u(Oe,ef))}}}function Oe(){if(!Y)if(Y=!0,Ff())process.emit(cc,A,W);else{var Ke=Vo()||gi();!np&&(np=ri(Jt(Ir,[oc+"RejectionEvent"]).v)),Zv(Ke,Xv,function(ut){return on(ut,"promise",{g:function(){return W}}),ut.reason=A,ut},!!np.v)}}W={then:le,catch:fe,finally:de},Xa(W,"state",{get:se}),ra()&&(W[yi(11)]="IPromise");function Le(){return"IPromise "+se()+(T?" - "+ao(A):"")}return W.toString=Le,function(){rt(l)||Qr(oc+": executor is not a function - "+ao(l));var ut=ye(3,0);try{l.call(W,ye(2,0),ut)}catch(wr){ut(wr)}}(),W}function Gm(i){return function(o){var l=jl(arguments,1);return i(function(v,w){try{var T=[],A=1;jf(o,function(L,Y){L&&(A++,Xl(L,function(B){T[Y]=B,--A===0&&v(T)},w))}),A--,A===0&&v(T)}catch(L){w(L)}},l)}}function Xf(i){return ri(function(o){var l=jl(arguments,1);return i(function(v,w){var T=[],A=1;function L(Y,B){A++,os(Y,function(W){W.rejected?T[B]={status:sc,reason:W.reason}:T[B]={status:"fulfilled",value:W.value},--A===0&&v(T)})}try{nt(o)?kt(o,L):gr(o)?jf(o,L):Qr("Input is not an iterable"),A--,A===0&&v(T)}catch(Y){w(Y)}},l)})}function iv(i){kt(i,function(o){try{o()}catch{}})}function ap(i){var o=Gt(i)?i:0;return function(l){_u(function(){iv(l)},o)}}function Xc(i,o){return av(Xc,ap(o),i,o)}var Qf;function lc(i,o){!Qf&&(Qf=ri(Jt(Ir,[oc]).v||null));var l=Qf.v;if(!l)return Xc(i);rt(i)||Qr(oc+": executor is not a function - "+Zt(i));var v=0;function w(){return rp[v]}var T=new l(function(A,L){function Y(W){v=2,A(W)}function B(W){v=3,L(W)}i(Y,B)});return Xa(T,"state",{get:w}),T}var $s;function Qc(i){return av(Qc,iv,i)}function Qv(i,o){return!$s&&($s=Xf(Qc)),$s.v(i,o)}var ip;function el(i,o){return!ip&&(ip=ri(lc)),ip.v.call(this,i,o)}var op=Gm(el),qs=void 0,Hr="",fc="channels",ba="core",sp="createPerfMgr",ed="disabled",tl="extensionConfig",dc="extensions",ci="processTelemetry",td="priority",ua="eventsSent",vr="eventsDiscarded",Bs="eventsSendRequest",Tn="perfEvent",ss="offlineEventsStored",pc="offlineBatchSent",vc="offlineBatchDrop",Hs="getPerfMgr",io="domain",tf="path",ov="Not dynamic - ",rf=/-([a-z])/g,sv=/([^\w\d_$])/g,nf=/^(\d+[\w\d_$])/;function rl(i){return!je(i)}function up(i){var o=i;return o&&Tt(o)&&(o=o[Fi](rf,function(l,v){return v.toUpperCase()}),o=o[Fi](sv,"_"),o=o[Fi](nf,function(l,v){return"_"+v})),o}function na(i,o){return i&&o?hu(i,o)!==-1:!1}function nl(i){return i&&i.toISOString()||""}function Ea(i){return zt(i)?i[$n]:Hr}function Iu(i,o,l,v,w){var T=l;return i&&(T=i[o],T!==l&&(!w||w(T))&&(!v||v(l))&&(T=l,i[o]=T)),T}function cp(i,o,l){var v;return i?(v=i[o],!v&&je(v)&&(v=tt(l)?{}:l,i[o]=v)):v=tt(l)?{}:l,v}function rd(i,o){var l=null,v=null;return rt(i)?l=i:v=i,function(){var w=arguments;if(l&&(v=l()),v)return v[o][oi](v,w)}}function Ta(i,o,l,v,w){i&&o&&l&&(w!==!1||tt(i[o]))&&(i[o]=rd(l,v))}function nd(i,o,l,v){return i&&o&&Qn(i)&&nt(l)&&kt(l,function(w){Tt(w)&&Ta(i,w,o,w,v)}),i}function lp(i){return function(){function o(){var l=this;i&&bt(i,function(v,w){l[v]=w})}return o}()}function zs(i){return i&&mo&&(i=Xd(mo({},i))),i}function pt(i,o,l,v,w,T){var A=arguments,L=A[0]||{},Y=A[or],B=!1,W=1;for(Y>0&&Ho(L)&&(B=L,L=A[W]||{},W++),Qn(L)||(L={});W<Y;W++){var le=A[W],fe=nt(le),de=Qn(le);for(var se in le){var Re=fe&&se in le||de&&ir(le,se);if(Re){var ye=le[se],Oe=void 0;if(B&&ye&&((Oe=nt(ye))||ai(ye))){var Le=L[se];Oe?nt(Le)||(Le=[]):ai(Le)||(Le={}),ye=pt(B,Le,ye)}ye!==void 0&&(L[se]=ye)}}}return L}function us(i){try{return i.responseText}catch{}return null}function cs(i,o){return i?"XDomainRequest,Response:"+us(i)||"":o}function ji(i,o){return i?"XMLHttpRequest,Status:"+i[Ui]+",Response:"+us(i)||i.response||"":o}function af(i,o){return o&&(Gt(o)?i=[o].concat(i):nt(o)&&(i=o.concat(i))),i}var al="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",ls="withCredentials",oo="timeout";function il(i,o,l,v,w,T){v===void 0&&(v=!1),w===void 0&&(w=!1);function A(Y,B,W){try{Y[B]=W}catch{}}var L=new XMLHttpRequest;return v&&A(L,al,v),l&&A(L,ls,l),L.open(i,o,!w),l&&A(L,ls,l),!w&&T&&A(L,oo,T),L}function ad(i){var o={};if(Tt(i)){var l=Sn(i)[Tu](/[\r\n]+/);kt(l,function(v){if(v){var w=v.indexOf(": ");if(w!==-1){var T=Sn(v.substring(0,w))[Su](),A=Sn(v.substring(w+1));o[T]=A}else o[Sn(v)]=1}})}return o}function Gs(i,o,l){if(!i[l]&&o&&o[ic]){var v=o[ic](l);v&&(i[l]=Sn(v))}return i}var of="kill-duration",ol="kill-duration-seconds",sf="time-delta-millis";function fp(i,o){var l={};return i[ns]?l=ad(i[ns]()):o&&(l=Gs(l,i,sf),l=Gs(l,i,of),l=Gs(l,i,ol)),l}var dp="documentMode",uv="location",pp="console",Nu="JSON",mc="crypto",uf="msCrypto",Po="msie",fs="trident/",Ao="XMLHttpRequest",Ro=null,hc=null,vp=!1,_c=null,mp=null;function hp(i,o){var l=!1;if(i){try{if(l=o in i,!l){var v=i[Kl];v&&(l=o in v)}}catch{}if(!l)try{var w=new i;l=!tt(w[o])}catch{}}return l}function id(i){if(i&&vp){var o=Ir("__mockLocation");if(o)return o}return typeof location===Zd&&location?location:Ir(uv)}function ds(){return typeof console!==Vl?console:Ir(pp)}function ko(){return!!(typeof JSON===Zd&&JSON||Ir(Nu)!==null)}function Oo(){return ko()?JSON||Ir(Nu):null}function od(){return Ir(mc)}function cf(){return Ir(uf)}function sl(){var i=Ko();if(i&&(i[wa]!==hc||Ro===null)){hc=i[wa];var o=(hc||Hr)[Su]();Ro=na(o,Po)||na(o,fs)}return Ro}function ka(i){if(i===void 0&&(i=null),!i){var o=Ko()||{};i=o?(o.userAgent||Hr)[Su]():Hr}var l=(i||Hr)[Su]();if(na(l,Po)){var v=Lf()||{};return Math.max(parseInt(l[Tu](Po)[1]),v[dp]||0)}else if(na(l,fs)){var w=parseInt(l[Tu](fs)[1]);if(w)return w+4}return null}function ps(i){return(mp===null||i===!1)&&(mp=jc()&&!!Ko().sendBeacon),mp}function sd(i){var o=!1;try{o=!!Ir("fetch");var l=Ir("Request");o&&i&&l&&(o=hp(l,"keepalive"))}catch{}return o}function za(){return _c===null&&(_c=typeof XDomainRequest!==Vl,_c&&Vs()&&(_c=_c&&!hp(Ir(Ao),"withCredentials"))),_c}function Vs(){var i=!1;try{var o=Ir(Ao);i=!!o}catch{}return i}var lf=4294967296,vs=4294967295,Ia=123456789,Du=987654321,ud=!1,ul=Ia,Cu=Du;function em(i){i<0&&(i>>>=0),ul=Ia+i&vs,Cu=Du-i&vs,ud=!0}function cv(){try{var i=pu()&2147483647;em((Math.random()*lf^i)+i)}catch{}}function tm(i){var o=0,l=od()||cf();return l&&l.getRandomValues&&(o=l.getRandomValues(new Uint32Array(1))[0]&vs),o===0&&sl()&&(ud||cv(),o=cl()&vs),o===0&&(o=Math.floor(lf*Math.random()|0)),i||(o>>>=0),o}function cl(i){Cu=36969*(Cu&65535)+(Cu>>16)&vs,ul=18e3*(ul&65535)+(ul>>16)&vs;var o=(Cu<<16)+(ul&65535)>>>0&vs|0;return i||(o>>>=0),o}function ff(i){i===void 0&&(i=22);for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=tm()>>>0,v=0,w=Hr;w[or]<i;)v++,w+=o.charAt(l&63),l>>>=6,v===5&&(l=(tm()<<2&4294967295|l&3)>>>0,v=0);return w}var lv="3.3.5",Vm="."+ff(6),cd=0;function _p(i){return i[Ys]===1||i[Ys]===9||!+i[Ys]}function ll(i,o){var l=o[i.id];if(!l){l={};try{_p(o)&&on(o,i.id,{e:!1,v:l})}catch{}}return l}function xu(i,o){return o===void 0&&(o=!1),up(i+cd+++(o?"."+lv:Hr)+Vm)}function gp(i){var o={id:xu("_aiData-"+(i||Hr)+"."+lv),accept:function(l){return _p(l)},get:function(l,v,w,T){var A=l[o.id];return A?A[up(v)]:(T&&(A=ll(o,l),A[up(v)]=w),w)},kill:function(l,v){if(l&&l[v])try{delete l[v]}catch{}}};return o}function ms(i){return i&&Qn(i)&&(i.isVal||i.fb||ir(i,"v")||ir(i,"mrg")||ir(i,"ref")||i.set)}function ld(i,o,l){var v,w=l.dfVal||Hn;if(o&&l.fb){var T=l.fb;nt(T)||(T=[T]);for(var A=0;A<T[or];A++){var L=T[A],Y=o[L];if(w(Y)?v=Y:i&&(Y=i.cfg[L],w(Y)&&(v=Y),i.set(i.cfg,oa(L),Y)),w(v))break}}return!w(v)&&w(l.v)&&(v=l.v),v}function df(i,o,l){var v=l;if(l&&ms(l)&&(v=ld(i,o,l)),v){ms(v)&&(v=df(i,o,v));var w;nt(v)?(w=[],w[or]=v[or]):ai(v)&&(w={}),w&&(bt(v,function(T,A){A&&ms(A)&&(A=df(i,o,A)),w[T]=A}),v=w)}return v}function hs(i,o,l,v){var w,T,A,L=v,Y,B,W,le;ms(L)?(w=L.isVal,T=L.set,W=L[wo],le=L[Ms],Y=L.mrg,B=L.ref,!B&&tt(B)&&(B=!!Y),A=ld(i,o,L)):A=v,le&&i[Ms](o,l);var fe,de=!0,se=o[l];(se||!je(se))&&(fe=se,de=!1,w&&fe!==A&&!w(fe)&&(fe=A,de=!0),T&&(fe=T(fe,A,o),de=fe===A)),de?A?fe=df(i,o,A):fe=A:(ai(fe)||nt(A))&&Y&&A&&(ai(A)||nt(A))&&bt(A,function(Re,ye){hs(i,fe,Re,ye)}),i.set(o,l,fe),B&&i.ref(o,l),W&&i[wo](o,l)}var gc=Wi("[[ai_dynCfg_1]]"),rm=Wi("[[ai_blkDynCfg_1]]"),fl=Wi("[[ai_frcDynCfg_1]]");function Km(i){if(i){var o;if(nt(i)?(o=[],o[or]=i[or]):ai(i)&&(o={}),o)return bt(i,function(l,v){o[l]=Km(v)}),o}return i}function nm(i){if(i){var o=i[gc]||i;if(o.cfg&&(o.cfg===i||o.cfg[gc]===o))return o}return null}function pf(i){if(i&&(ai(i)||nt(i)))try{i[rm]=!0}catch{}return i}function fv(i,o,l){var v=!1;return l&&!i[o.blkVal]&&(v=l[fl],!v&&!l[rm]&&(v=ai(l)||nt(l))),v}function am(i){Qr("InvalidAccess:"+i)}var Pu=["push","pop","shift","unshift","splice"],so=function(i,o,l,v){i&&i[Gf](3,108,"".concat(l," [").concat(o,"] failed - ")+Zt(v))};function Ks(i,o,l){nt(o)&&kt(Pu,function(v){var w=o[v];o[v]=function(){for(var T=[],A=0;A<arguments.length;A++)T[A]=arguments[A];var L=w[oi](this,T);return vf(i,o,l,"Patching"),L}})}function Au(i,o){var l=Dt(i,o);return l&&l.get}function dl(i,o,l,v){var w={n:l,h:[],trk:function(B){B&&B.fn&&(Si(w.h,B)===-1&&w.h[jr](B),i.trk(B,w))},clr:function(B){var W=Si(w.h,B);W!==-1&&w.h[dt](W,1)}},T=!0,A=!1;function L(){T&&(A=A||fv(L,i,v),v&&!v[gc]&&A&&(v=vf(i,v,l,"Converting")),T=!1);var B=i.act;return B&&w.trk(B),v}L[i.prop]={chng:function(){i.add(w)}};function Y(B){if(v!==B){L[i.ro]&&!i.upd&&am("["+l+"] is read-only:"+Zt(o)),T&&(A=A||fv(L,i,v),T=!1);var W=A&&L[i.rf];if(A)if(W){bt(v,function(fe){v[fe]=B?B[fe]:qs});try{bt(B,function(fe,de){pl(i,v,fe,de)}),B=v}catch(fe){so((i.hdlr||{})[pn],l,"Assigning",fe),A=!1}}else v&&v[gc]&&bt(v,function(fe){var de=Au(v,fe);if(de){var se=de[i.prop];se&&se.chng()}});if(B!==v){var le=B&&fv(L,i,B);!W&&le&&(B=vf(i,B,l,"Converting")),v=B,A=le}i.add(w)}}on(o,w.n,{g:L,s:Y})}function pl(i,o,l,v){if(o){var w=Au(o,l),T=w&&!!w[i.prop];T?o[l]=v:dl(i,o,l,v)}return o}function fd(i,o,l,v){if(o){var w=Au(o,l),T=w&&!!w[i.prop],A=v&&v[0],L=v&&v[1],Y=v&&v[2];if(!T){if(Y)try{pf(o)}catch(B){so((i.hdlr||{})[pn],l,"Blocking",B)}try{pl(i,o,l,o[l]),w=Au(o,l)}catch(B){so((i.hdlr||{})[pn],l,"State",B)}}A&&(w[i.rf]=A),L&&(w[i.ro]=L),Y&&(w[i.blkVal]=!0)}return o}function vf(i,o,l,v){try{bt(o,function(w,T){pl(i,o,w,T)}),o[gc]||(Xa(o,gc,{get:function(){return i[ec]}}),Ks(i,o,l))}catch(w){so((i.hdlr||{})[pn],l,v,w)}return o}var Mo="[[ai_",yc="]]";function im(i){var o,l=Ul(Mo+"get"+i.uid+yc),v=Ul(Mo+"ro"+i.uid+yc),w=Ul(Mo+"rf"+i.uid+yc),T=Ul(Mo+"blkVal"+i.uid+yc),A=Ul(Mo+"dtl"+i.uid+yc),L=null,Y=null,B;function W(se,Re){var ye=B.act;try{B.act=se,se&&se[A]&&(kt(se[A],function(Le){Le.clr(se)}),se[A]=[]),Re({cfg:i.cfg,set:i.set.bind(i),setDf:i[Oi].bind(i),ref:i.ref.bind(i),rdOnly:i[wo].bind(i)})}catch(Le){var Oe=i[pn];throw Oe&&Oe[Gf](1,107,Zt(Le)),Le}finally{B.act=ye||null}}function le(){if(L){var se=L;L=null,Y&&Y[bo](),Y=null;var Re=[];if(kt(se,function(ye){if(ye&&(ye[A]&&(kt(ye[A],function(Oe){Oe.clr(ye)}),ye[A]=null),ye.fn))try{W(ye,ye.fn)}catch(Oe){Re[jr](Oe)}}),L)try{le()}catch(ye){Re[jr](ye)}Re[or]>0&&Jv("Watcher error(s): ",Re)}}function fe(se){if(se&&se.h[or]>0){L||(L=[]),Y||(Y=_u(function(){Y=null,le()},0));for(var Re=0;Re<se.h[or];Re++){var ye=se.h[Re];ye&&Si(L,ye)===-1&&L[jr](ye)}}}function de(se,Re){if(se){var ye=se[A]=se[A]||[];Si(ye,Re)===-1&&ye[jr](Re)}}return B=(o={prop:l,ro:v,rf:w},o[Ms]=T,o[ec]=i,o.add=fe,o[es]=le,o.use=W,o.trk=de,o),B}function om(i,o){var l={fn:o,rm:function(){l.fn=null,i=null,o=null}};return on(l,"toJSON",{v:function(){return"WatcherHandler"+(l.fn?"":"[X]")}}),i.use(l,o),l}function yp(i,o,l){var v,w=nm(o);if(w)return w;var T=xu("dyncfg",!0),A=o&&l!==!1?o:Km(o),L;function Y(){L[es]()}function B(Oe,Le,Ke){try{Oe=pl(L,Oe,Le,Ke)}catch(ut){so(i,Le,"Setting value",ut)}return Oe[Le]}function W(Oe){return om(L,Oe)}function le(Oe,Le){L.use(null,function(Ke){var ut=L.upd;try{tt(Le)||(L.upd=Le),Oe(Ke)}finally{L.upd=ut}})}function fe(Oe,Le){var Ke;return fd(L,Oe,Le,(Ke={},Ke[0]=!0,Ke))[Le]}function de(Oe,Le){var Ke;return fd(L,Oe,Le,(Ke={},Ke[1]=!0,Ke))[Le]}function se(Oe,Le){var Ke;return fd(L,Oe,Le,(Ke={},Ke[2]=!0,Ke))[Le]}function Re(Oe,Le){return Le&&bt(Le,function(Ke,ut){hs(ye,Oe,Ke,ut)}),Oe}var ye=(v={uid:null,cfg:A},v[pn]=i,v[es]=Y,v.set=B,v[Oi]=Re,v[wu]=W,v.ref=fe,v[wo]=de,v[Ms]=se,v._block=le,v);return on(ye,"uid",{c:!1,e:!1,w:!1,v:T}),L=im(ye),vf(L,A,"config","Creating"),ye}function Sp(i,o){i?(i[ki](o),i[Gf](2,108,o)):am(o)}function Lo(i,o,l,v){var w=yp(l,i||{},v);return o&&w[Oi](w.cfg,o),w}function Ru(i,o,l){var v=i[gc]||i;return v.cfg&&(v.cfg===i||v.cfg[gc]===v)?v[wu](o):(Sp(l,ov+Zt(i)),Lo(i,null,l)[wu](o))}function vl(i,o){if(i&&i[Fs])return i[Fs](o)}function sm(i,o,l){var v;return l||(v=el(function(w){l=w})),i&&ev(i)>0?os(vl(i[0],o),function(){sm(jl(i,1),o,l)}):l(),v}var wp=500,um="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function dv(i,o,l){return!i&&je(i)?o:Ho(i)?i:oa(i)[Su]()==="true"}function bp(i){return{mrg:!0,v:i}}function Sc(i,o,l){return{fb:l,isVal:i,v:o}}function uo(i,o){return{fb:o,set:dv,v:!!i}}var dd=[ua,vr,Bs,Tn],ml=null,Fo;function Eh(i,o){return function(){var l=arguments,v=Wm(o);if(v){var w=v.listener;w&&w[i]&&w[i][oi](w,l)}}}function Ep(){var i=Ir("Microsoft");return i&&(ml=i.ApplicationInsights),ml}function Wm(i){var o=ml;return!o&&i.disableDbgExt!==!0&&(o=ml||Ep()),o?o.ChromeDbgExt:null}function Th(i){if(!Fo){Fo={};for(var o=0;o<dd[or];o++)Fo[dd[o]]=Eh(dd[o],i)}return Fo}var Oa,pd="warnToConsole",vd="AI (Internal): ",cm="AI: ",hl="AITR_",li={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},co=(Oa={},Oa[0]=null,Oa[1]="errorToConsole",Oa[2]=pd,Oa[3]="debugToConsole",Oa);function md(i){return i?'"'+i[Fi](/\"/g,Hr)+'"':Hr}function ku(i,o){var l=ds();if(l){var v="log";l[i]&&(v=i),rt(l[v])&&l[v](o)}}var wc=function(){function i(o,l,v,w){v===void 0&&(v=!1);var T=this;T[Wf]=o,T[nc]=(v?cm:vd)+o;var A=Hr;ko()&&(A=Oo().stringify(w));var L=(l?" message:"+md(l):Hr)+(w?" props:"+md(A):Hr);T[nc]+=L}return i.dataType="MessageData",i}();function _s(i,o){return(i||{})[pn]||new pv(o)}var pv=function(){function i(o){this.identifier="DiagnosticLogger",this.queue=[];var l=0,v={},w,T,A,L,Y;Ba(i,this,function(B){Y=le(o||{}),B.consoleLoggingLevel=function(){return w},B[Gf]=function(se,Re,ye,Oe,Le){Le===void 0&&(Le=!1);var Ke=new wc(Re,ye,Le,Oe);if(L)throw Zt(Ke);var ut=co[se]||pd;if(tt(Ke[nc]))de("throw"+(se===1?"Critical":"Warning"),Ke);else{if(Le){var wr=+Ke[Wf];!v[wr]&&w>=se&&(B[ut](Ke[nc]),v[wr]=!0)}else w>=se&&B[ut](Ke[nc]);W(se,Ke)}},B.debugToConsole=function(se){ku("debug",se),de("warning",se)},B[ki]=function(se){ku("warn",se),de("warning",se)},B.errorToConsole=function(se){ku("error",se),de("error",se)},B.resetInternalMessageCount=function(){l=0,v={}},B[ac]=W,B[Fs]=function(se){Y&&Y.rm(),Y=null};function W(se,Re){if(!fe()){var ye=!0,Oe=hl+Re[Wf];if(v[Oe]?ye=!1:v[Oe]=!0,ye&&(se<=T&&(B.queue[jr](Re),l++,de(se===1?"error":"warn",Re)),l===A)){var Le="Internal events throttle limit per PageView reached for this app.",Ke=new wc(23,Le,!1);B.queue[jr](Ke),se===1?B.errorToConsole(Le):B[ki](Le)}}}function le(se){return Ru(Lo(se,li,B).cfg,function(Re){var ye=Re.cfg;w=ye[rc],T=ye.loggingLevelTelemetry,A=ye.maxMessageLimit,L=ye.enableDebug})}function fe(){return l>=A}function de(se,Re){var ye=Wm(o||{});ye&&ye[Ti]&&ye[Ti](se,Re)}})}return i.__ieDyn=1,i}();function lm(i){return i||new pv}function vt(i,o,l,v,w,T){T===void 0&&(T=!1),lm(i)[Gf](o,l,v,w,T)}function Ou(i,o){lm(i)[ki](o)}var Ws,mf,fm="toGMTString",bc="toUTCString",hd="cookie",gs="expires",dm="isCookieUseDisabled",Tp="disableCookiesUsage",_l="_ckMgr",Ec=null,Tc=null,vv=null,Wr,ys={},mv={},hv=(Ws={cookieCfg:bp((mf={},mf[io]={fb:"cookieDomain",dfVal:rl},mf.path={fb:"cookiePath",dfVal:rl},mf.enabled=qs,mf.ignoreCookies=qs,mf.blockedCookies=qs,mf)),cookieDomain:qs,cookiePath:qs},Ws[Tp]=qs,Ws);function Js(){!Wr&&(Wr=fu(function(){return Lf()}))}function Ip(i){return i?i.isEnabled():!0}function _v(i,o){return o&&i&&nt(i.ignoreCookies)?Si(i.ignoreCookies,o)!==-1:!1}function gv(i,o){return o&&i&&nt(i.blockedCookies)&&Si(i.blockedCookies,o)!==-1?!0:_v(i,o)}function _d(i,o){var l=o[tc];if(je(l)){var v=void 0;tt(i[dm])||(v=!i[dm]),tt(i[Tp])||(v=!i[Tp]),l=v}return l}function gd(i,o){var l,v,w,T,A,L,Y,B,W;i=Lo(i||mv,null,o).cfg,A=Ru(i,function(fe){fe[Oi](fe.cfg,hv),v=fe.ref(fe.cfg,"cookieCfg"),w=v[tf]||"/",T=v[io],L=_d(i,v)!==!1,Y=v.getCookie||yv,B=v.setCookie||lo,W=v.delCookie||lo},o);var le=(l={isEnabled:function(){var fe=_d(i,v)!==!1&&L&&gl(o),de=mv[_l];return fe&&de&&le!==de&&(fe=Ip(de)),fe},setEnabled:function(fe){L=fe!==!1,v[tc]=fe},set:function(fe,de,se,Re,ye){var Oe=!1;if(Ip(le)&&!gv(v,fe)){var Le={},Ke=Sn(de||Hr),ut=hu(Ke,";");if(ut!==-1&&(Ke=Sn(tn(de,ut)),Le=Ic(ga(de,ut+1))),Iu(Le,io,Re||T,ea,tt),!je(se)){var wr=sl();if(tt(Le[gs])){var nn=pu(),an=nn+se*1e3;if(an>0){var Pn=new Date;Pn.setTime(an),Iu(Le,gs,Np(Pn,wr?fm:bc)||Np(Pn,wr?fm:bc)||Hr,ea)}}wr||Iu(Le,"max-age",Hr+se,null,tt)}var Kt=id();Kt&&Kt[Eu]==="https:"&&(Iu(Le,"secure",null,null,tt),Tc===null&&(Tc=!Sv((Ko()||{})[wa])),Tc&&Iu(Le,"SameSite","None",null,tt)),Iu(Le,tf,ye||w,null,tt),B(fe,yl(Ke,Le)),Oe=!0}return Oe},get:function(fe){var de=Hr;return Ip(le)&&!_v(v,fe)&&(de=Y(fe)),de},del:function(fe,de){var se=!1;return Ip(le)&&(se=le.purge(fe,de)),se},purge:function(fe,de){var se,Re=!1;if(gl(o)){var ye=(se={},se[tf]=de||"/",se[gs]="Thu, 01 Jan 1970 00:00:01 GMT",se);sl()||(ye["max-age"]="0"),W(fe,yl(Hr,ye)),Re=!0}return Re}},l[Fs]=function(fe){A&&A.rm(),A=null},l);return le[_l]=le,le}function gl(i){if(Ec===null){Ec=!1,!Wr&&Js();try{var o=Wr.v||{};Ec=o[hd]!==void 0}catch(l){vt(i,2,68,"Cannot access document.cookie - "+Ea(l),{exception:Zt(l)})}}return Ec}function Ic(i){var o={};if(i&&i[or]){var l=Sn(i)[Tu](";");kt(l,function(v){if(v=Sn(v||Hr),v){var w=hu(v,"=");w===-1?o[v]=null:o[Sn(tn(v,w))]=Sn(ga(v,w+1))}})}return o}function Np(i,o){return rt(i[o])?i[o]():null}function yl(i,o){var l=i||Hr;return bt(o,function(v,w){l+="; "+v+(je(w)?Hr:"="+w)}),l}function yv(i){var o=Hr;if(!Wr&&Js(),Wr.v){var l=Wr.v[hd]||Hr;vv!==l&&(ys=Ic(l),vv=l),o=Sn(ys[i]||Hr)}return o}function lo(i,o){!Wr&&Js(),Wr.v&&(Wr.v[hd]=i+"="+o)}function Sv(i){return Tt(i)?!!(na(i,"CPU iPhone OS 12")||na(i,"iPad; CPU OS 12")||na(i,"Macintosh; Intel Mac OS X 10_14")&&na(i,"Version/")&&na(i,"Safari")||na(i,"Macintosh; Intel Mac OS X 10_14")&&Pi(i,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||na(i,"Chrome/5")||na(i,"Chrome/6")||na(i,"UnrealEngine")&&!na(i,"Chrome")||na(i,"UCBrowser/12")||na(i,"UCBrowser/11")):!1}var yd={perfEvtsSendAll:!1};function pm(i){i.h=null;var o=i.cb;i.cb=[],kt(o,function(l){Jt(l.fn,[l.arg])})}function Ss(i,o,l,v){kt(i,function(w){w&&w[o]&&(l?(l.cb[jr]({fn:v,arg:w}),l.h=l.h||_u(pm,0,l)):Jt(v,[w]))})}var Jm=function(){function i(o){this.listeners=[];var l,v,w=[],T={h:null,cb:[]},A=Lo(o,yd);v=A[wu](function(L){l=!!L.cfg.perfEvtsSendAll}),Ba(i,this,function(L){on(L,"listeners",{g:function(){return w}}),L[Mi]=function(Y){w[jr](Y)},L[bu]=function(Y){for(var B=Si(w,Y);B>-1;)w[dt](B,1),B=Si(w,Y)},L[ua]=function(Y){Ss(w,ua,T,function(B){B[ua](Y)})},L[vr]=function(Y,B){Ss(w,vr,T,function(W){W[vr](Y,B)})},L[Bs]=function(Y,B){Ss(w,Bs,B?T:null,function(W){W[Bs](Y,B)})},L[Tn]=function(Y){Y&&(l||!Y[ep]())&&Ss(w,Tn,null,function(B){Y[Us]?_u(function(){return B[Tn](Y)},0):B[Tn](Y)})},L[ss]=function(Y){Y&&Y[or]&&Ss(w,ss,T,function(B){B[ss](Y)})},L[pc]=function(Y){Y&&Y[Ii]&&Ss(w,pc,T,function(B){B[pc](Y)})},L[vc]=function(Y,B){if(Y>0){var W=B||0;Ss(w,vc,T,function(le){le[vc](Y,W)})}},L[Fs]=function(Y){var B=function(){v&&v.rm(),v=null,w=[],T.h&&T.h[bo](),T.h=null,T.cb=[]},W;if(Ss(w,"unload",null,function(le){var fe=le[Fs](Y);fe&&(W||(W=[]),W[jr](fe))}),W)return el(function(le){return os(op(W),function(){B(),le()})});B()}})}return i.__ieDyn=1,i}(),Mu="ctx",wv="ParentContextKey",Sl="ChildrenContextKey",vm=null,Uo=function(){function i(o,l,v){var w=this;if(w.start=pu(),w[$n]=o,w[Us]=v,w[ep]=function(){return!1},rt(l)){var T;on(w,"payload",{g:function(){return!T&&rt(l)&&(T=l(),l=null),T}})}w[Jc]=function(A){return A?A===i[wv]||A===i[Sl]?w[A]:(w[Mu]||{})[A]:null},w[Ra]=function(A,L){if(A)if(A===i[wv])w[A]||(w[ep]=function(){return!0}),w[A]=L;else if(A===i[Sl])w[A]=L;else{var Y=w[Mu]=w[Mu]||{};Y[A]=L}},w[Jf]=function(){var A=0,L=w[Jc](i[Sl]);if(nt(L))for(var Y=0;Y<L[or];Y++){var B=L[Y];B&&(A+=B[ts])}w[ts]=pu()-w.start,w.exTime=w[ts]-A,w[Jf]=function(){}}}return i.ParentContextKey="parent",i.ChildrenContextKey="childEvts",i}(),ws=function(){function i(o){this.ctx={},Ba(i,this,function(l){l.create=function(v,w,T){return new Uo(v,w,T)},l.fire=function(v){v&&(v[Jf](),o&&rt(o[Tn])&&o[Tn](v))},l[Ra]=function(v,w){if(v){var T=l[Mu]=l[Mu]||{};T[v]=w}},l[Jc]=function(v){return(l[Mu]||{})[v]}})}return i.__ieDyn=1,i}(),kn="CoreUtils.doPerf";function hf(i,o,l,v,w){if(i){var T=i;if(T[Hs]&&(T=T[Hs]()),T){var A=void 0,L=T[Jc](kn);try{if(A=T.create(o(),v,w),A){if(L&&A[Ra]&&(A[Ra](Uo[wv],L),L[Jc]&&L[Ra])){var Y=L[Jc](Uo[Sl]);Y||(Y=[],L[Ra](Uo[Sl],Y)),Y[jr](A)}return T[Ra](kn,A),l(A)}}catch(B){A&&A[Ra]&&A[Ra]("exception",B)}finally{A&&T.fire(A),T[Ra](kn,L)}}}return l()}function wl(){return vm}var Sd="00000000000000000000000000000000",sr="0000000000000000";function Yi(i,o,l){return i&&i[or]===o&&i!==l?!!i.match(/^[\da-f]*$/i):!1}function $i(i){return Yi(i,32,Sd)}function Na(i){return Yi(i,16,sr)}var bl=gp("plugin");function mn(i){return bl.get(i,"state",{},!0)}function El(i,o){for(var l=[],v=null,w=i[Li](),T;w;){var A=w[Io]();if(A){v&&v[Wc]&&A[ci]&&v[Wc](A),T=mn(A);var L=!!T[Br];A[Br]&&(L=A[Br]()),L||l[jr](A),v=A,w=w[Li]()}}kt(l,function(Y){var B=i[ba]();Y[Ls](i.getCfg(),B,o,i[Li]()),T=mn(Y),!Y[ba]&&!T[ba]&&(T[ba]=B),T[Br]=!0,delete T[Kn]})}function Zs(i){return i.sort(function(o,l){var v=0;if(l){var w=l[ci];o[ci]?v=w?o[td]-l[td]:1:w&&(v=-1)}else v=o?1:-1;return v})}function Dp(i){var o={};return{getName:function(){return o[$n]},setName:function(l){i&&i.setName(l),o[$n]=l},getTraceId:function(){return o[Zl]},setTraceId:function(l){i&&i.setTraceId(l),$i(l)&&(o[Zl]=l)},getSpanId:function(){return o[xo]},setSpanId:function(l){i&&i.setSpanId(l),Na(l)&&(o[xo]=l)},getTraceFlags:function(){return o[ui]},setTraceFlags:function(l){i&&i.setTraceFlags(l),o[ui]=l}}}var Xs="TelemetryPluginChain",bv="_hasRun",Lu="_getTelCtx",Ev=0;function Tv(i,o,l){for(;i;){if(i[Io]()===l)return i;i=i[Li]()}return U([l],o.config||{},o)}function f(i,o,l,v){var w=null,T=[];o||(o=Lo({},null,l[pn])),v!==null&&(w=v?Tv(i,l,v):i);var A={_next:Y,ctx:{core:function(){return l},diagLog:function(){return _s(l,o.cfg)},getCfg:function(){return o.cfg},getExtCfg:W,getConfig:le,hasNext:function(){return!!w},getNext:function(){return w},setNext:function(de){w=de},iterate:fe,onComplete:L}};function L(de,se){for(var Re=[],ye=2;ye<arguments.length;ye++)Re[ye-2]=arguments[ye];de&&T[jr]({func:de,self:tt(se)?A.ctx:se,args:Re})}function Y(){var de=w;if(w=de?de[Li]():null,!de){var se=T;se&&se[or]>0&&(kt(se,function(Re){try{Re.func.call(Re.self,Re.args)}catch(ye){vt(l[pn],2,73,"Unexpected Exception during onComplete - "+Zt(ye))}}),T=[])}return de}function B(de,se){var Re=null,ye=o.cfg;if(ye&&de){var Oe=ye[tl];!Oe&&se&&(Oe={}),ye[tl]=Oe,Oe=o.ref(ye,tl),Oe&&(Re=Oe[de],!Re&&se&&(Re={}),Oe[de]=Re,Re=o.ref(Oe,de))}return Re}function W(de,se){var Re=B(de,!0);return se&&bt(se,function(ye,Oe){if(je(Re[ye])){var Le=o.cfg[ye];(Le||!je(Le))&&(Re[ye]=Le)}hs(o,Re,ye,Oe)}),o[Oi](Re,se)}function le(de,se,Re){Re===void 0&&(Re=!1);var ye,Oe=B(de,!1),Le=o.cfg;return Oe&&(Oe[se]||!je(Oe[se]))?ye=Oe[se]:(Le[se]||!je(Le[se]))&&(ye=Le[se]),ye||!je(ye)?ye:Re}function fe(de){for(var se;se=A._next();){var Re=se[Io]();Re&&de(Re)}}return A}function m(i,o,l,v){var w=Lo(o),T=f(i,w,l,v),A=T.ctx;function L(B){var W=T._next();return W&&W[ci](B,A),!W}function Y(B,W){return B===void 0&&(B=null),nt(B)&&(B=U(B,w.cfg,l,W)),m(B||A[Li](),w.cfg,l,W)}return A[Aa]=L,A[Co]=Y,A}function y(i,o,l){var v=Lo(o.config),w=f(i,v,o,l),T=w.ctx;function A(Y){var B=w._next();return B&&B[Fs](T,Y),!B}function L(Y,B){return Y===void 0&&(Y=null),nt(Y)&&(Y=U(Y,v.cfg,o,B)),y(Y||T[Li](),o,B)}return T[Aa]=A,T[Co]=L,T}function N(i,o,l){var v=Lo(o.config),w=f(i,v,o,l),T=w.ctx;function A(Y){return T.iterate(function(B){rt(B[js])&&B[js](T,Y)})}function L(Y,B){return Y===void 0&&(Y=null),nt(Y)&&(Y=U(Y,v.cfg,o,B)),N(Y||T[Li](),o,B)}return T[Aa]=A,T[Co]=L,T}function U(i,o,l,v){var w=null,T=!v;if(nt(i)&&i[or]>0){var A=null;kt(i,function(L){if(!T&&v===L&&(T=!0),T&&L&&rt(L[ci])){var Y=G(L,o,l);w||(w=Y),A&&A._setNext(Y),A=Y}})}return v&&!w?U([v],o,l):w}function G(i,o,l){var v=null,w=rt(i[ci]),T=rt(i[Wc]),A;i?A=i[ro]+"-"+i[td]+"-"+Ev++:A="Unknown-0-"+Ev++;var L={getPlugin:function(){return i},getNext:function(){return v},processTelemetry:W,unload:le,update:fe,_id:A,_setNext:function(de){v=de}};function Y(){var de;return i&&rt(i[Lu])&&(de=i[Lu]()),de||(de=m(L,o,l)),de}function B(de,se,Re,ye,Oe){var Le=!1,Ke=i?i[ro]:Xs,ut=de[bv];return ut||(ut=de[bv]={}),de.setNext(v),i&&hf(de[ba](),function(){return Ke+":"+Re},function(){ut[A]=!0;try{var wr=v?v._id:Hr;wr&&(ut[wr]=!1),Le=se(de)}catch(an){var nn=v?ut[v._id]:!0;nn&&(Le=!0),(!v||!nn)&&vt(de[Ti](),1,73,"Plugin ["+Ke+"] failed during "+Re+" - "+Zt(an)+", run flags: "+Zt(ut))}},ye,Oe),Le}function W(de,se){se=se||Y();function Re(ye){if(!i||!w)return!1;var Oe=mn(i);return Oe[Kn]||Oe[ed]?!1:(T&&i[Wc](v),i[ci](de,ye),!0)}B(se,Re,"processTelemetry",function(){return{item:de}},!de.sync)||se[Aa](de)}function le(de,se){function Re(){var ye=!1;if(i){var Oe=mn(i),Le=i[ba]||Oe[ba];i&&(!Le||Le===de.core())&&!Oe[Kn]&&(Oe[ba]=null,Oe[Kn]=!0,Oe[Br]=!1,i[Kn]&&i[Kn](de,se)===!0&&(ye=!0))}return ye}B(de,Re,"unload",function(){},se[Us])||de[Aa](se)}function fe(de,se){function Re(){var ye=!1;if(i){var Oe=mn(i),Le=i[ba]||Oe[ba];i&&(!Le||Le===de.core())&&!Oe[Kn]&&i[js]&&i[js](de,se)===!0&&(ye=!0)}return ye}B(de,Re,"update",function(){},!1)||de[Aa](se)}return tr(L)}function V(){var i=[];function o(v){v&&i[jr](v)}function l(v,w){kt(i,function(T){try{T(v,w)}catch(A){vt(v[Ti](),2,73,"Unexpected error calling unload handler - "+Zt(A))}}),i=[]}return{add:o,run:l}}function te(){var i=[];function o(v){var w=i;i=[],kt(w,function(T){try{(T.rm||T.remove).call(T)}catch(A){vt(v,2,73,"Unloading:"+Zt(A))}})}function l(v){v&&Yc(i,v)}return{run:o,add:l}}var pe,he="getPlugin",We=(pe={},pe[tl]={isVal:rl,v:{}},pe),Ot=function(){function i(){var o=this,l,v,w,T,A;B(),Ba(i,o,function(W){W[Ls]=function(le,fe,de,se){Y(le,fe,se),l=!0},W[Kn]=function(le,fe){var de,se=W[ba];if(!se||le&&se!==le[ba]())return;var Re,ye=!1,Oe=le||y(null,se,w&&w[he]?w[he]():w),Le=fe||(de={reason:0},de[Us]=!1,de);function Ke(){ye||(ye=!0,T.run(Oe,fe),A.run(Oe[Ti]()),Re===!0&&Oe[Aa](Le),B())}return!W[rs]||W[rs](Oe,Le,Ke)!==!0?Ke():Re=!0,Re},W[js]=function(le,fe){var de=W[ba];if(!de||le&&de!==le[ba]())return;var se,Re=!1,ye=le||N(null,de,w&&w[he]?w[he]():w),Oe=fe||{reason:0};function Le(){Re||(Re=!0,Y(ye.getCfg(),ye.core(),ye[Li]()))}return!W._doUpdate||W._doUpdate(ye,Oe,Le)!==!0?Le():se=!0,se},Ta(W,"_addUnloadCb",function(){return T},"add"),Ta(W,"_addHook",function(){return A},"add"),on(W,"_unloadHooks",{g:function(){return A}})}),o[Ti]=function(W){return L(W)[Ti]()},o[Br]=function(){return l},o.setInitialized=function(W){l=W},o[Wc]=function(W){w=W},o[Aa]=function(W,le){le?le[Aa](W):w&&rt(w[ci])&&w[ci](W,null)},o._getTelCtx=L;function L(W){W===void 0&&(W=null);var le=W;if(!le){var fe=v||m(null,{},o[ba]);w&&w[he]?le=fe[Co](null,w[he]):le=fe[Co](null,w)}return le}function Y(W,le,fe){Lo(W,We,_s(le)),!fe&&le&&(fe=le[Ha]()[Li]());var de=w;w&&w[he]&&(de=w[he]()),o[ba]=le,v=m(fe,W,le,de)}function B(){l=!1,o[ba]=null,v=null,w=null,A=te(),T=V()}}return i.__ieDyn=1,i}();function rr(i,o,l){var v={id:o,fn:l};Yc(i,v);var w={remove:function(){kt(i,function(T,A){if(T.id===v.id)return i[dt](A,1),-1})}};return w}function ur(i,o,l){for(var v=!1,w=i[or],T=0;T<w;++T){var A=i[T];if(A)try{if(A.fn[oi](null,[o])===!1){v=!0;break}}catch(L){vt(l,2,64,"Telemetry initializer failed: "+Ea(L),{exception:Zt(L)},!0)}}return!v}var st=function(i){Wl(o,i);function o(){var l=i.call(this)||this;l.identifier="TelemetryInitializerPlugin",l.priority=199;var v,w;T(),Ba(o,l,function(A,L){A.addTelemetryInitializer=function(Y){return rr(w,v++,Y)},A[ci]=function(Y,B){ur(w,Y,B?B[Ti]():A[Ti]())&&A[Aa](Y,B)},A[rs]=function(){T()}});function T(){v=0,w=[]}return l}return o.__ieDyn=1,o}(Ot),nr,Ut="Plugins must provide initialize method",Nr="_notificationManager",Dr="SDK is still unloading...",Pt="SDK is not initialized",In=100,_f=5e4,Nn=As((nr={cookieCfg:{}},nr[dc]={rdOnly:!0,ref:!0,v:[]},nr[fc]={rdOnly:!0,ref:!0,v:[]},nr[tl]={ref:!0,v:{}},nr[sp]=qs,nr.loggingLevelConsole=0,nr.diagnosticLogInterval=qs,nr));function qi(i,o){return new ws(o)}function wd(i,o,l){var v,w=[],T=[],A={};return kt(l,function(L){(je(L)||je(L[Ls]))&&lr(Ut);var Y=L[td],B=L[ro];L&&Y&&(je(A[Y])?A[Y]=B:Ou(i,"Two extensions have same priority #"+Y+" - "+A[Y]+", "+B)),!Y||Y<o?w[jr](L):T[jr](L)}),v={},v[ba]=w,v[fc]=T,v}function Iv(i,o){var l=!1;return kt(o,function(v){if(v===i)return l=!0,-1}),l}function bd(i,o,l,v){l&&bt(l,function(w,T){v&&ai(T)&&ai(o[w])&&bd(i,o[w],T,v),v&&ai(T)&&ai(o[w])?bd(i,o[w],T,v):i.set(o,w,T)})}function Ed(i,o){var l=null,v=-1;return kt(i,function(w,T){if(w.w===o)return l=w,v=T,-1}),{i:v,l}}function Cp(i,o){var l=Ed(i,o).l;return l||(l={w:o,rm:function(){var v=Ed(i,o);v.i!==-1&&i[dt](v.i,1)}},i[jr](l)),l}function mm(i,o,l){kt(o,function(v){var w=Ru(i,v.w,l);delete v.w,v.rm=function(){w.rm()}})}function ke(i,o,l,v){return o.add(i[wu](function(w){var T=w.cfg.disableDbgExt;T===!0&&v&&(l[bu](v),v=null),l&&!v&&T!==!0&&(v=Th(w.cfg),l[Mi](v))})),v}function Et(i){return on({rm:function(){i.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(i)+">"}})}var qt=function(){function i(){var o,l,v,w,T,A,L,Y,B,W,le,fe,de,se,Re,ye,Oe,Le,Ke,ut,wr,nn,an,Pn,Kt,Yt,en,Wa,pa,Xe,$t,Ln;Ba(i,this,function(Fe){Ee(),Fe._getDbgPlgTargets=function(){return[an,w]},Fe[Br]=function(){return l},Fe.activeStatus=function(){return Yt},Fe._setPendingStatus=function(){Yt=3},Fe[Ls]=function(xe,_t,Wt,Ct){de&&lr(Dr),Fe[Br]()&&lr("Core cannot be initialized more than once"),o=Lo(xe,Nn,Wt||Fe[pn],!1),xe=o.cfg,nu(o[wu](function(An){var Za=An.cfg,Bo=Yt===3;if(!Bo){Wa=Za.initInMemoMaxSize||In;var au=Za[Eo],Yp=Za.endpointUrl;if(je(au)){wr=null,Yt=Ri[Yr];var $p="Please provide instrumentation key";l?(vt(v,1,100,$p),va()):lr($p);return}var h_=[];if(er(au)?(h_[jr](au),wr=null):wr=au,er(Yp)?(h_[jr](Yp),en=null):en=Yp,h_[or]){pa=!1,Yt=3;var Q_=rl(Za.initTimeOut)?Za.initTimeOut:_f,n0=Qv(h_);_u(function(){pa||Qt()},Q_),os(n0,function(ch){try{if(pa)return;if(!ch.rejected){var lh=ch[To];if(lh&&lh[or]){var Bg=lh[0];if(wr=Bg&&Bg[To],lh[or]>1){var Hg=lh[1];en=Hg&&Hg[To]}}wr&&(xe[Eo]=wr,xe.endpointUrl=en)}Qt()}catch{pa||Qt()}})}else Qt();var __=An.ref(An.cfg,tl);bt(__,function(ch){An.ref(__,ch)})}})),T=Ct,Ke=ke(o,Le,T&&Fe[Vf](),Ke),sh(),Fe[pn]=Wt;var dr=xe[dc];if(W=[],W[jr].apply(W,Xu(Xu([],_t,!1),dr)),le=xe[fc],mi(null),(!fe||fe[or]===0)&&lr("No "+fc+" available"),le&&le[or]>1){var Zn=Fe[Io]("TeeChannelController");(!Zn||!Zn.plugin)&&vt(v,1,28,"TeeChannel required")}mm(xe,nn,v),nn=null,l=!0,Yt===Ri.ACTIVE&&va()},Fe.getChannels=function(){var xe=[];return fe&&kt(fe,function(_t){xe[jr](_t)}),tr(xe)},Fe.track=function(xe){hf(Fe[Hs](),function(){return"AppInsightsCore:track"},function(){xe===null&&(Ja(xe),lr("Invalid telemetry item")),!xe[$n]&&je(xe[$n])&&(Ja(xe),lr("telemetry name required")),xe[no]=xe[no]||wr,xe[ts]=xe[ts]||nl(new Date),xe.ver=xe.ver||"4.0",!de&&Fe[Br]()&&Yt===Ri.ACTIVE?fo()[Aa](xe):Yt!==Ri[Yr]&&w[or]<=Wa&&w[jr](xe)},function(){return{item:xe}},!xe.sync)},Fe[Ha]=fo,Fe[Vf]=function(){return T||(T=new Jm(o.cfg),Fe[Nr]=T),T},Fe[Mi]=function(xe){Fe.getNotifyMgr()[Mi](xe)},Fe[bu]=function(xe){T&&T[bu](xe)},Fe.getCookieMgr=function(){return Y||(Y=gd(o.cfg,Fe[pn])),Y},Fe.setCookieMgr=function(xe){Y!==xe&&(vl(Y,!1),Y=xe)},Fe[Hs]=function(){return A||L||wl()},Fe.setPerfMgr=function(xe){A=xe},Fe.eventCnt=function(){return w[or]},Fe.releaseQueue=function(){if(l&&w[or]>0){var xe=w;w=[],Yt===2?kt(xe,function(_t){_t[no]=_t[no]||wr,fo()[Aa](_t)}):vt(v,2,20,"core init status is not active")}},Fe[Kc]=function(xe){return Re=xe||null,Ln=!1,Xe&&Xe[bo](),Fn(!0)};function Qt(){pa=!0,je(wr)?(Yt=Ri[Yr],vt(v,1,112,"ikey can't be resolved from promises")):Yt=Ri.ACTIVE,va()}function va(){l&&(Fe.releaseQueue(),Fe[Kc]())}function Fn(xe){if((!Xe||!Xe[tc])&&!Ln){var _t=xe||v&&v.queue[or]>0;_t&&($t||($t=!0,nu(o[wu](function(Wt){var Ct=Wt.cfg.diagnosticLogInterval;(!Ct||!(Ct>0))&&(Ct=1e4);var dr=!1;Xe&&(dr=Xe[tc],Xe[bo]()),Xe=Wd(oh,Ct),Xe.unref(),Xe[tc]=dr}))),Xe[tc]=!0)}return Xe}Fe[Kf]=function(){Ln=!0,Xe&&Xe[bo](),oh()},nd(Fe,function(){return se},["addTelemetryInitializer"]),Fe[Fs]=function(xe,_t,Wt){var Ct;xe===void 0&&(xe=!0),l||lr(Pt),de&&lr(Dr);var dr=(Ct={reason:50},Ct[Us]=xe,Ct.flushComplete=!1,Ct),Zn;xe&&!_t&&(Zn=el(function(Bo){_t=Bo}));var An=y(Od(),Fe);An[No](function(){Le.run(Fe[pn]),sm([Y,T,v],xe,function(){Ee(),_t&&_t(dr)})},Fe);function Za(Bo){dr.flushComplete=Bo,de=!0,Oe.run(An,dr),Fe[Kf](),An[Aa](dr)}return oh(),Up(xe,Za,6,Wt),Zn},Fe[Io]=Ds,Fe.addPlugin=function(xe,_t,Wt,Ct){if(!xe){Ct&&Ct(!1),uh(Ut);return}var dr=Ds(xe[ro]);if(dr&&!_t){Ct&&Ct(!1),uh("Plugin ["+xe[ro]+"] is already loaded!");return}var Zn={reason:16};function An(au){W[jr](xe),Zn.added=[xe],mi(Zn),Ct&&Ct(!0)}if(dr){var Za=[dr.plugin],Bo={reason:2,isAsync:!!Wt};Rc(Za,Bo,function(au){au?(Zn.removed=Za,Zn.reason|=32,An()):Ct&&Ct(!1)})}else An()},Fe.updateCfg=function(xe,_t){_t===void 0&&(_t=!0);var Wt;if(Fe[Br]()){Wt={reason:1,cfg:o.cfg,oldCfg:mu({},o.cfg),newConfig:mu({},xe),merge:_t},xe=Wt.newConfig;var Ct=o.cfg;xe[dc]=Ct[dc],xe[fc]=Ct[fc]}o._block(function(dr){var Zn=dr.cfg;bd(dr,Zn,xe,_t),_t||bt(Zn,function(An){ir(xe,An)||dr.set(Zn,An,qs)}),dr[Oi](Zn,Nn)},!0),o[es](),Wt&&jp(Wt)},Fe.evtNamespace=function(){return ye},Fe.flush=Up,Fe.getTraceCtx=function(xe){return ut||(ut=Dp()),ut},Fe.setTraceCtx=function(xe){ut=xe||null},Fe.addUnloadHook=nu,Ta(Fe,"addUnloadCb",function(){return Oe},"add"),Fe.onCfgChange=function(xe){var _t;return l?_t=Ru(o.cfg,xe,Fe[pn]):_t=Cp(nn,xe),Et(_t)},Fe.getWParam=function(){return ya()||o.cfg.enableWParam?0:-1};function Ns(){var xe={};Pn=[];var _t=function(Wt){Wt&&kt(Wt,function(Ct){if(Ct[ro]&&Ct[Do]&&!xe[Ct.identifier]){var dr=Ct[ro]+"="+Ct[Do];Pn[jr](dr),xe[Ct.identifier]=Ct}})};_t(fe),le&&kt(le,function(Wt){_t(Wt)}),_t(W)}function Ee(){l=!1,o=Lo({},Nn,Fe[pn]),o.cfg[rc]=1,on(Fe,"config",{g:function(){return o.cfg},s:function(_t){Fe.updateCfg(_t,!1)}}),on(Fe,"pluginVersionStringArr",{g:function(){return Pn||Ns(),Pn}}),on(Fe,"pluginVersionString",{g:function(){return Kt||(Pn||Ns(),Kt=Pn.join(";")),Kt||Hr}}),on(Fe,"logger",{g:function(){return v||(v=new pv(o.cfg),o[pn]=v),v},s:function(_t){o[pn]=_t,v!==_t&&(vl(v,!1),v=_t)}}),Fe[pn]=new pv(o.cfg),an=[];var xe=Fe.config[dc]||[];xe.splice(0,xe[or]),Yc(xe,an),se=new st,w=[],vl(T,!1),T=null,A=null,L=null,vl(Y,!1),Y=null,B=null,W=[],le=null,fe=null,de=!1,Re=null,ye=xu("AIBaseCore",!0),Oe=V(),ut=null,wr=null,Le=te(),nn=[],Kt=null,Pn=null,Ln=!1,Xe=null,$t=!1,Yt=0,en=null,Wa=null,pa=!1}function fo(){var xe=m(Od(),o.cfg,Fe);return xe[No](Fn),xe}function mi(xe){var _t=wd(Fe[pn],wp,W);B=null,Kt=null,Pn=null,fe=(le||[])[0]||[],fe=Zs(Yc(fe,_t[fc]));var Wt=Yc(Zs(_t[ba]),fe);an=tr(Wt);var Ct=Fe.config[dc]||[];Ct.splice(0,Ct[or]),Yc(Ct,an);var dr=fo();fe&&fe[or]>0&&El(dr[Co](fe),Wt),El(dr,Wt),xe&&jp(xe)}function Ds(xe){var _t=null,Wt=null,Ct=[];return kt(an,function(dr){if(dr[ro]===xe&&dr!==se)return Wt=dr,-1;dr.getChannel&&Ct[jr](dr)}),!Wt&&Ct[or]>0&&kt(Ct,function(dr){if(Wt=dr.getChannel(xe),!Wt)return-1}),Wt&&(_t={plugin:Wt,setEnabled:function(dr){mn(Wt)[ed]=!dr},isEnabled:function(){var dr=mn(Wt);return!dr[Kn]&&!dr[ed]},remove:function(dr,Zn){var An;dr===void 0&&(dr=!0);var Za=[Wt],Bo=(An={reason:1},An[Us]=dr,An);Rc(Za,Bo,function(au){au&&mi({reason:32,removed:Za}),Zn&&Zn(au)})}}),_t}function Od(){if(!B){var xe=(an||[]).slice();Si(xe,se)===-1&&xe[jr](se),B=U(Zs(xe),o.cfg,Fe)}return B}function Rc(xe,_t,Wt){if(xe&&xe[or]>0){var Ct=U(xe,o.cfg,Fe),dr=y(Ct,Fe);dr[No](function(){var Zn=!1,An=[];kt(W,function(Bo,au){Iv(Bo,xe)?Zn=!0:An[jr](Bo)}),W=An,Kt=null,Pn=null;var Za=[];le&&(kt(le,function(Bo,au){var Yp=[];kt(Bo,function($p){Iv($p,xe)?Zn=!0:Yp[jr]($p)}),Za[jr](Yp)}),le=Za),Wt&&Wt(Zn),Fn()}),dr[Aa](_t)}else Wt(!1)}function oh(){if(v&&v.queue){var xe=v.queue.slice(0);v.queue[or]=0,kt(xe,function(_t){var Wt,Ct=(Wt={},Wt[$n]=Re||"InternalMessageId: "+_t[Wf],Wt[no]=wr,Wt[ts]=nl(new Date),Wt.baseType=wc.dataType,Wt.baseData={message:_t[nc]},Wt);Fe.track(Ct)})}}function Up(xe,_t,Wt,Ct){var dr=1,Zn=!1,An=null;Ct=Ct||5e3;function Za(){dr--,Zn&&dr===0&&(An&&An[bo](),An=null,_t&&_t(Zn),_t=null)}if(fe&&fe[or]>0){var Bo=fo()[Co](fe);Bo.iterate(function(au){if(au.flush){dr++;var Yp=!1;au.flush(xe,function(){Yp=!0,Za()},Wt)||Yp||(xe&&An==null?An=_u(function(){An=null,Za()},Ct):Za())}})}return Zn=!0,Za(),!0}function sh(){var xe;nu(o[wu](function(_t){var Wt=_t.cfg.enablePerfMgr;if(Wt){var Ct=_t.cfg[sp];(xe!==Ct||!xe)&&(Ct||(Ct=qi),cp(_t.cfg,sp,Ct),xe=Ct,L=null),!A&&!L&&rt(Ct)&&(L=Ct(Fe,Fe[Vf]()))}else L=null,xe=null}))}function jp(xe){var _t=N(Od(),Fe);_t[No](Fn),(!Fe._updateHook||Fe._updateHook(_t,xe)!==!0)&&_t[Aa](xe)}function uh(xe){var _t=Fe[pn];_t?(vt(_t,2,73,xe),Fn()):lr(xe)}function Ja(xe){var _t=Fe[Vf]();_t&&_t[vr]([xe],2)}function nu(xe){Le.add(xe)}})}return i.__ieDyn=1,i}();function zr(i,o){try{if(i&&i!==""){var l=Oo().parse(i);if(l&&l[si]&&l[si]>=l.itemsAccepted&&l.itemsReceived-l.itemsAccepted===l.errors[or])return l}}catch(v){vt(o,1,43,"Cannot parse the response. "+(v[$n]||Zt(v)),{response:i})}return null}var un="",hn="NoResponseBody",ca="&"+hn+"=true",Fu="POST",bs=function(){function i(){var o=0,l,v,w,T,A,L,Y,B,W,le,fe,de,se,Re;Ba(i,this,function(ye,Oe){var Le=!0;pa(),ye[Ls]=function(Xe,$t){w=$t,v&&vt(w,1,28,"Sender is already initialized"),ye.SetConfig(Xe),v=!0},ye._getDbgPlgTargets=function(){return[v,T,L,l]},ye.SetConfig=function(Xe){try{if(A=Xe.senderOnCompleteCallBack||{},L=!!Xe.disableCredentials,Y=Xe.fetchCredentials,T=!!Xe.isOneDs,l=!!Xe.enableSendPromise,W=!!Xe.disableXhr,le=!!Xe.disableBeacon,fe=!!Xe.disableBeaconSync,Re=Xe.timeWrapper,se=!!Xe.addNoResponse,de=!!Xe.disableFetchKeepAlive,B={sendPOST:Yt},T||(Le=!1),L){var $t=id();$t&&$t.protocol&&$t.protocol[Su]()==="file:"&&(Le=!1)}return!0}catch{}return!1},ye.getSyncFetchPayload=function(){return o},ye.getSenderInst=function(Xe,$t){return Xe&&Xe[or]?nn(Xe,$t):null},ye.getFallbackInst=function(){return B},ye[rs]=function(Xe,$t){pa()};function Ke(Xe,$t){an($t,200,{},Xe)}function ut(Xe,$t){vt(w,2,26,"Failed to send telemetry.",{message:Xe}),an($t,400,{})}function wr(Xe){ut("No endpoint url is provided for the batch",Xe)}function nn(Xe,$t){for(var Ln,Fe=0,Qt=null,va=0;Qt==null&&va<Xe[or];)Fe=Xe[va],!W&&Fe===1?za()?Qt=Wa:Vs()&&(Qt=Yt):Fe===2&&sd($t)&&(!$t||!de)?Qt=en:Fe===3&&ps()&&($t?!fe:!le)&&(Qt=Kt),va++;return Qt?(Ln={_transport:Fe,_isSync:$t},Ln[is]=Qt,Ln):null}function an(Xe,$t,Ln,Fe){try{Xe&&Xe($t,Ln,Fe)}catch{}}function Pn(Xe,$t){var Ln=Ko(),Fe=Xe[as];if(!Fe)return wr($t),!0;Fe=Xe[as]+(se?ca:un);var Qt=Xe[Ii],va=T?Qt:new Blob([Qt],{type:"text/plain;charset=UTF-8"}),Fn=Ln.sendBeacon(Fe,va);return Fn}function Kt(Xe,$t,Ln){var Fe=Xe[Ii];try{if(Fe)if(Pn(Xe,$t))Ke(un,$t);else{var Qt=A&&A.beaconOnRetry;Qt&&rt(Qt)?Qt(Xe,$t,Pn):(B&&B[is](Xe,$t,!0),vt(w,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(va){T&&Ou(w,"Failed to send telemetry using sendBeacon API. Ex:"+Zt(va)),an($t,T?0:400,{},un)}}function Yt(Xe,$t,Ln){var Fe,Qt,va,Fn=Xe[tp]||{};!Ln&&l&&(Fe=el(function(mi,Ds){Qt=mi,va=Ds})),T&&Ln&&Xe.disableXhrSync&&(Ln=!1);var Ns=Xe[as];if(!Ns){wr($t),Qt&&Qt(!1);return}var Ee=il(Fu,Ns,Le,!0,Ln,Xe[Jl]);T||Ee[Zf]("Content-type","application/json"),kt(Rn(Fn),function(mi){Ee[Zf](mi,Fn[mi])}),Ee.onreadystatechange=function(){T||(fo(Ee),Ee.readyState===4&&Qt&&Qt(!0))},Ee.onload=function(){T&&fo(Ee)};function fo(mi){var Ds=A&&A.xhrOnComplete,Od=Ds&&rt(Ds);if(Od)Ds(mi,$t,Xe);else{var Rc=us(mi);an($t,mi[Ui],fp(mi,T),Rc)}}return Ee.onerror=function(mi){an($t,T?Ee[Ui]:400,fp(Ee,T),T?un:ji(Ee)),va&&va(mi)},Ee.ontimeout=function(){an($t,T?Ee[Ui]:500,fp(Ee,T),T?un:ji(Ee)),Qt&&Qt(!1)},Ee.send(Xe[Ii]),Fe}function en(Xe,$t,Ln){var Fe,Qt=Xe[as],va=Xe[Ii],Fn=T?va:new Blob([va],{type:"application/json"}),Ns,Ee,fo,mi=new Headers,Ds=va[or],Od=!1,Rc=!1,oh=Xe[tp]||{},Up=(Fe={method:Fu,body:Fn},Fe[um]=!0,Fe);Xe.headers&&Rn(Xe.headers)[or]>0&&(kt(Rn(oh),function(Ja){mi.append(Ja,oh[Ja])}),Up[tp]=mi),Y?Up.credentials=Y:Le&&T&&(Up.credentials="include"),Ln&&(Up.keepalive=!0,o+=Ds,T?Xe._sendReason===2&&(Od=!0,se&&(Qt+=ca)):Od=!0);var sh=new Request(Qt,Up);try{sh[um]=!0}catch{}if(!Ln&&l&&(Ns=el(function(Ja,nu){Ee=Ja,fo=nu})),!Qt){wr($t),Ee&&Ee(!1);return}function jp(Ja){an($t,T?0:400,{},T?un:Ja)}function uh(Ja,nu,xe){var _t=Ja[Ui],Wt=A.fetchOnComplete;Wt&&rt(Wt)?Wt(Ja,$t,xe||un,nu):an($t,_t,{},xe||un)}try{os(fetch(T?Qt:sh,T?Up:null),function(Ja){if(Ln&&(o-=Ds,Ds=0),!Rc)if(Rc=!0,Ja.rejected)jp(Ja.reason&&Ja.reason[nc]),fo&&fo(Ja.reason);else{var nu=Ja[To];try{!T&&!nu.ok?(jp(nu.statusText),Ee&&Ee(!1)):T&&!nu.body?(uh(nu,null,un),Ee&&Ee(!0)):os(nu.text(),function(xe){uh(nu,Xe,xe[To]),Ee&&Ee(!0)})}catch(xe){jp(Zt(xe)),fo&&fo(xe)}}})}catch(Ja){Rc||(jp(Zt(Ja)),fo&&fo(Ja))}return Od&&!Rc&&(Rc=!0,an($t,200,{}),Ee&&Ee(!0)),T&&!Rc&&Xe[Jl]>0&&Re&&Re.set(function(){Rc||(Rc=!0,an($t,500,{}),Ee&&Ee(!0))},Xe[Jl]),Ns}function Wa(Xe,$t,Ln){var Fe=Vo(),Qt=new XDomainRequest,va=Xe[Ii];Qt.onload=function(){var mi=us(Qt),Ds=A&&A.xdrOnComplete;Ds&&rt(Ds)?Ds(Qt,$t,Xe):an($t,200,{},mi)},Qt.onerror=function(){an($t,400,{},T?un:cs(Qt))},Qt.ontimeout=function(){an($t,500,{})},Qt.onprogress=function(){};var Fn=Fe&&Fe.location&&Fe.location[Eu]||"",Ns=Xe[as];if(!Ns){wr($t);return}if(!T&&Ns.lastIndexOf(Fn,0)!==0){var Ee="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";vt(w,2,40,". "+Ee),ut(Ee,$t);return}var fo=T?Ns:Ns[Fi](/^(https?:)/,"");Qt.open(Fu,fo),Xe[Jl]&&(Qt[Jl]=Xe[Jl]),Qt.send(va),T&&Ln?Re&&Re.set(function(){Qt.send(va)},0):Qt.send(va)}function pa(){o=0,v=!1,l=!1,w=null,T=null,A=null,L=null,Y=null,B=null,W=!1,le=!1,fe=!1,de=!1,se=!1,Re=null}})}return i.__ieDyn=1,i}(),Uu="on",Tl="attachEvent",hm="addEventListener",xp="detachEvent",gf="removeEventListener",Nc="events";xu("aiEvtPageHide"),xu("aiEvtPageShow");var z_=/\.[\.]+/g,Ih=/[\.]+$/,u_=1,Zm=gp("events"),G_=/^([^.]*)(?:\.(.+)|)/;function yf(i){return i&&i[Fi]?i[Fi](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Hr):i}function Nv(i,o){var l;if(o){var v=Hr;nt(o)?(v=Hr,kt(o,function(T){T=yf(T),T&&(T[0]!=="."&&(T="."+T),v+=T)})):v=yf(o),v&&(v[0]!=="."&&(v="."+v),i=(i||Hr)+v)}var w=G_.exec(i||Hr)||[];return l={},l[vn]=w[1],l.ns=(w[2]||Hr).replace(z_,".").replace(Ih,Hr)[Tu](".").sort().join("."),l}function _m(i,o,l){l===void 0&&(l=!0);var v=Zm.get(i,Nc,{},l),w=v[o];return w||(w=v[o]=[]),w}function Sf(i,o,l,v){i&&o&&o[vn]&&(i[gf]?i[gf](o[vn],l,v):i[xp]&&i[xp](Uu+o[vn],l))}function Dv(i,o,l,v){var w=!1;return i&&o&&o[vn]&&l&&(i[hm]?(i[hm](o[vn],l,v),w=!0):i[Tl]&&(i[Tl](Uu+o[vn],l),w=!0)),w}function Nh(i,o,l,v){for(var w=o[or];w--;){var T=o[w];T&&(!l.ns||l.ns===T.evtName.ns)&&(!v||v(T))&&(Sf(i,T.evtName,T[sa],T.capture),o[dt](w,1))}}function c_(i,o,l){if(o[vn])Nh(i,_m(i,o[vn]),o,l);else{var v=Zm.get(i,Nc,{});bt(v,function(w,T){Nh(i,T,o,l)}),Rn(v)[or]===0&&Zm.kill(i,Nc)}}function Td(i,o){var l;return o?(nt(o)?l=[i].concat(o):l=[i,o],l=Nv("xx",l).ns[Tu](".")):l=i,l}function l_(i,o,l,v,w){var T;w===void 0&&(w=!1);var A=!1;if(i)try{var L=Nv(o,v);if(A=Dv(i,L,l,w),A&&Zm.accept(i)){var Y=(T={guid:u_++,evtName:L},T[sa]=l,T.capture=w,T);_m(i,L.type)[jr](Y)}}catch{}return A}function V_(i,o,l,v,w){if(w===void 0&&(w=!1),i)try{var T=Nv(o,v),A=!1;c_(i,T,function(L){return T.ns&&!l||L[sa]===l?(A=!0,!0):!1}),A||Sf(i,T,l,w)}catch{}}var Dh="sampleRate",gm="ProcessLegacy",Ch="http.method",Xm="https://dc.services.visualstudio.com",Cv="/v2/track",Id="not_specified",xh=Qd({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),ym="split",Ar="length",Qs="toLowerCase",Nd="ingestionendpoint",xv="toString",Pv="push",Sm="removeItem",wf="name",Pp="message",f_="count",Ap="stringify",Il="pathname",Nl="match",Dl="exceptions",Dc="parsedStack",Cc="properties",ju="measurements",bf="sizeInBytes",eu="typeName",Ef="severityLevel",Dd="problemGroup",Ph="isManual",Qm="hasFullStack",Tf="assembly",If="fileName",Cd="line",Rp="method",eh="level",Av="aiDataContract",wm="duration",Ah="receivedResponse";function Rh(i,o,l){var v=o[Ar],w=kh(i,o);if(w[Ar]!==v){for(var T=0,A=w;l[A]!==void 0;)T++,A=ga(w,0,147)+E(T);w=A}return w}function kh(i,o){var l;return o&&(o=Sn(oa(o)),o[Ar]>150&&(l=ga(o,0,150),vt(i,2,57,"name is too long.  It has been truncated to 150 characters.",{name:o},!0))),l||o}function qn(i,o,l){l===void 0&&(l=1024);var v;return o&&(l=l||1024,o=Sn(oa(o)),o[Ar]>l&&(v=ga(o,0,l),vt(i,2,61,"string value is too long. It has been truncated to "+l+" characters.",{value:o},!0))),v||o}function xd(i,o){return _(i,o,2048,66)}function Wn(i,o){var l;return o&&o[Ar]>32768&&(l=ga(o,0,32768),vt(i,2,56,"message is too long, it has been truncated to 32768 characters.",{message:o},!0)),l||o}function K_(i,o){var l;if(o){var v=""+o;v[Ar]>32768&&(l=ga(v,0,32768),vt(i,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:o},!0))}return l||o}function kp(i,o){if(o){var l={};bt(o,function(v,w){if(Qn(w)&&ko())try{w=Oo()[Ap](w)}catch(T){vt(i,2,49,"custom property is not valid",{exception:T},!0)}w=qn(i,w,8192),v=Rh(i,v,l),l[v]=w}),o=l}return o}function Pd(i,o){if(o){var l={};bt(o,function(v,w){v=Rh(i,v,l),l[v]=w}),o=l}return o}function d(i,o){return o&&_(i,o,128,69)[xv]()}function _(i,o,l,v){var w;return o&&(o=Sn(oa(o)),o[Ar]>l&&(w=ga(o,0,l),vt(i,2,v,"input is too long, it has been truncated to "+l+" characters.",{data:o},!0))),w||o}function E(i){var o="00"+i;return xr(o,o[Ar]-3)}var C=Lf()||{},R=0,$=[null,null,null,null,null];function q(i){var o=R,l=$,v=l[o];return C.createElement?l[o]||(v=l[o]=C.createElement("a")):v={host:Z(i,!0)},v.href=i,o++,o>=l[Ar]&&(o=0),R=o,v}function Z(i,o){var l=oe(i,o)||"";if(l){var v=l[Nl](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(v!=null&&v[Ar]>3&&Tt(v[2])&&v[2][Ar]>0)return v[2]+(v[3]||"")}return l}function oe(i,o){var l=null;if(i){var v=i[Nl](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(v!=null&&v[Ar]>2&&Tt(v[2])&&v[2][Ar]>0&&(l=v[2]||"",o&&v[Ar]>2)){var w=(v[1]||"")[Qs](),T=v[3]||"";(w==="http"&&T===":80"||w==="https"&&T===":443")&&(T=""),l+=T}}return l}var ue=[Xm+Cv,"https://breeze.aimon.applicationinsights.io"+Cv,"https://dc-int.services.visualstudio.com"+Cv];function Pe(i){return Si(ue,i[Qs]())!==-1}function Ge(i,o,l,v){var w,T=v,A=v;if(o&&o[Ar]>0){var L=q(o);if(w=L.host,!T)if(L[Il]!=null){var Y=L.pathname[Ar]===0?"/":L[Il];Y.charAt(0)!=="/"&&(Y="/"+Y),A=L[Il],T=qn(i,l?l+" "+Y:Y)}else T=qn(i,o)}else w=v,T=v;return{target:w,name:T,data:A}}var Ve=Qu({LocalStorage:0,SessionStorage:1}),De=void 0,_e="";function Ye(i){try{if(je(gi()))return null;var o=new Date()[xv](),l=Ir(i===Ve.LocalStorage?"localStorage":"sessionStorage"),v=_e+o;l.setItem(v,o);var w=l.getItem(v)!==o;if(l[Sm](v),!w)return l}catch{}return null}function Te(){return Ae()?Ye(Ve.SessionStorage):null}function Je(i){_e=i||""}function Ae(i){return(i||De===void 0)&&(De=!!Ye(Ve.SessionStorage)),De}function Ce(i,o){var l=Te();if(l!==null)try{return l.getItem(o)}catch(v){De=!1,vt(i,2,2,"Browser failed read of session storage. "+Ea(v),{exception:Zt(v)})}return null}function Be(i,o,l){var v=Te();if(v!==null)try{return v.setItem(o,l),!0}catch(w){De=!1,vt(i,2,4,"Browser failed write to session storage. "+Ea(w),{exception:Zt(w)})}return!1}function Bt(i,o){var l=Te();if(l!==null)try{return l[Sm](o),!0}catch(v){De=!1,vt(i,2,6,"Browser failed removal of session storage item. "+Ea(v),{exception:Zt(v)})}return!1}var Vt=";",fr="=";function Cr(i){if(!i)return{};var o=i[ym](Vt),l=Gv(o,function(w,T){var A=T[ym](fr);if(A[Ar]===2){var L=A[0][Qs](),Y=A[1];w[L]=Y}return w},{});if(Rn(l)[Ar]>0){if(l.endpointsuffix){var v=l.location?l.location+".":"";l[Nd]=l[Nd]||"https://"+v+"dc."+l.endpointsuffix}l[Nd]=l[Nd]||Xm,Pi(l[Nd],"/")&&(l[Nd]=l[Nd].slice(0,-1))}return l}var rn=function(){function i(o,l,v){var w=this,T=this;T.ver=1,T.sampleRate=100,T.tags={},T[wf]=qn(o,v)||Id,T.data=l,T.time=nl(new Date),T[Av]={time:1,iKey:1,name:1,sampleRate:function(){return w.sampleRate===100?4:1},tags:1,data:1}}return i}(),Jr=function(){function i(o,l,v,w){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var T=this;T.ver=2,T[wf]=qn(o,l)||Id,T[Cc]=kp(o,v),T[ju]=Pd(o,w)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.Event",i.dataType="EventData",i}(),Bn=58,$r=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Ma=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,et=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,mt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,br=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,mr=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,It=/([^\(\s\n]+):([0-9]+)$/,Rr="<no_method>",wt="error",_n="stack",ht="stackDetails",Dn="errorSrc",Cn="message",fi="description",Yu=[{re:Ma,len:5,m:1,fn:2,ln:3,col:4},{chk:Op,pre:Es,re:et,len:4,m:1,fn:2,ln:3},{re:mt,len:3,m:1,fn:2,hdl:Im},{re:br,len:2,fn:1,hdl:Im}];function Es(i){return i.replace(/(\(anonymous\))/,"<anonymous>")}function Op(i){return hu(i,"[native")<0}function tu(i,o){var l=i;return l&&!Tt(l)&&(JSON&&JSON[Ap]?(l=JSON[Ap](i),o&&(!l||l==="{}")&&(rt(i[xv])?l=i[xv]():l=""+i)):l=""+i+" - (Missing JSON.stringify)"),l||""}function jo(i,o){var l=i;return i&&(l&&!Tt(l)&&(l=i[Cn]||i[fi]||l),l&&!Tt(l)&&(l=tu(l,!0)),i.filename&&(l=l+" @"+(i.filename||"")+":"+(i.lineno||"?")+":"+(i.colno||"?"))),o&&o!=="String"&&o!=="Object"&&o!=="Error"&&hu(l||"",o)===-1&&(l=o+": "+l),l||""}function xc(i){try{if(Qn(i))return"hasFullStack"in i&&"typeName"in i}catch{}return!1}function la(i){try{if(Qn(i))return"ver"in i&&"exceptions"in i&&"properties"in i}catch{}return!1}function bn(i){return i&&i.src&&Tt(i.src)&&i.obj&&nt(i.obj)}function Jn(i){var o=i||"";Tt(o)||(Tt(o[_n])?o=o[_n]:o=""+o);var l=o[ym](`
`);return{src:o,obj:l}}function di(i){for(var o=[],l=i[ym](`
`),v=0;v<l[Ar];v++){var w=l[v];l[v+1]&&(w+="@"+l[v+1],v++),o[Pv](w)}return{src:i,obj:o}}function Pc(i){var o=null;if(i)try{if(i[_n])o=Jn(i[_n]);else if(i[wt]&&i[wt][_n])o=Jn(i[wt][_n]);else if(i.exception&&i.exception[_n])o=Jn(i.exception[_n]);else if(bn(i))o=i;else if(bn(i[ht]))o=i[ht];else if(Vo()&&Vo().opera&&i[Cn])o=di(i[Pp]);else if(i.reason&&i.reason[_n])o=Jn(i.reason[_n]);else if(Tt(i))o=Jn(i);else{var l=i[Cn]||i[fi]||"";Tt(i[Dn])&&(l&&(l+=`
`),l+=" from "+i[Dn]),l&&(o=Jn(l))}}catch(v){o=Jn(v)}return o||{src:"",obj:null}}function Ad(i){var o="";return i&&(i.obj?o=i.obj.join(`
`):o=i.src||""),o}function Ts(i){var o,l=i.obj;if(l&&l[Ar]>0){o=[];var v=0,w=!1,T=0;kt(l,function(Re){if(w||Nm(Re)){var ye=oa(Re);w=!0;var Oe=Dm(ye,v);Oe&&(T+=Oe[bf],o[Pv](Oe),v++)}});var A=32*1024;if(T>A)for(var L=0,Y=o[Ar]-1,B=0,W=L,le=Y;L<Y;){var fe=o[L][bf],de=o[Y][bf];if(B+=fe+de,B>A){var se=le-W+1;o.splice(W,se);break}W=L,le=Y,L++,Y--}}return o}function Nf(i){var o="";if(i&&(o=i.typeName||i[wf]||"",!o))try{var l=/function (.{1,200})\(/,v=l.exec(i.constructor[xv]());o=v&&v[Ar]>1?v[1]:""}catch{}return o}function Df(i){if(i)try{if(!Tt(i)){var o=Nf(i),l=tu(i,!1);return(!l||l==="{}")&&(i[wt]&&(i=i[wt],o=Nf(i)),l=tu(i,!0)),hu(l,o)!==0&&o!=="String"?o+":"+l:l}}catch{}return""+(i||"")}var Rd=function(){function i(o,l,v,w,T,A){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var L=this;L.ver=2,la(l)?(L[Dl]=l[Dl]||[],L[Cc]=l[Cc],L[ju]=l[ju],l[Ef]&&(L[Ef]=l[Ef]),l.id&&(L.id=l.id,l[Cc].id=l.id),l[Dd]&&(L[Dd]=l[Dd]),je(l[Ph])||(L[Ph]=l[Ph])):(v||(v={}),A&&(v.id=A),L[Dl]=[Em(o,l,v)],L[Cc]=kp(o,v),L[ju]=Pd(o,w),T&&(L[Ef]=T),A&&(L.id=A))}return i.CreateAutoException=function(o,l,v,w,T,A,L,Y){var B,W=Nf(T||A||o);return B={},B[Pp]=jo(o,W),B.url=l,B.lineNumber=v,B.columnNumber=w,B.error=Df(T||A||o),B.evt=Df(A||o),B[eu]=W,B.stackDetails=Pc(L||T||A),B.errorSrc=Y,B},i.CreateFromInterface=function(o,l,v,w){var T=l[Dl]&&Gu(l[Dl],function(L){return rh(o,L)}),A=new i(o,to(to({},l),{exceptions:T}),v,w);return A},i.prototype.toInterface=function(){var o,l=this,v=l.exceptions,w=l.properties,T=l.measurements,A=l.severityLevel,L=l.problemGroup,Y=l.id,B=l.isManual,W=v instanceof Array&&Gu(v,function(le){return le.toInterface()})||void 0;return o={ver:"4.0"},o[Dl]=W,o.severityLevel=A,o.properties=w,o.measurements=T,o.problemGroup=L,o.id=Y,o.isManual=B,o},i.CreateSimpleException=function(o,l,v,w,T,A){var L;return{exceptions:[(L={},L[Qm]=!0,L.message=o,L.stack=T,L.typeName=l,L)]}},i.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",i.dataType="ExceptionData",i.formatError=Df,i}(),th=tr({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function bm(){var i,o=this,l=nt(o[Dc])&&Gu(o[Dc],function(w){return p(w)}),v=(i={id:o.id,outerId:o.outerId,typeName:o[eu],message:o[Pp],hasFullStack:o[Qm],stack:o[_n]},i[Dc]=l||void 0,i);return v}function Em(i,o,l){var v,w,T,A,L,Y,B,W;if(xc(o))A=o[eu],L=o[Pp],B=o[_n],W=o[Dc]||[],Y=o[Qm];else{var le=o,fe=le&&le.evt;zt(le)||(le=le[wt]||fe||le),A=qn(i,Nf(le))||Id,L=Wn(i,jo(o||le,A))||Id;var de=o[ht]||Pc(o);W=Ts(de),nt(W)&&Gu(W,function(se){se[Tf]=qn(i,se[Tf]),se[If]=qn(i,se[If])}),B=K_(i,Ad(de)),Y=nt(W)&&W[Ar]>0,l&&(l[eu]=l[eu]||A)}return v={},v[Av]=th,v.id=w,v.outerId=T,v[eu]=A,v[Pp]=L,v[Qm]=Y,v.stack=B,v[Dc]=W,v.toInterface=bm,v}function rh(i,o){var l=nt(o[Dc])&&Gu(o[Dc],function(w){return a(w)})||o[Dc],v=Em(i,to(to({},o),{parsedStack:l}));return v}function Tm(i,o){var l=o[Nl](mr);if(l&&l[Ar]>=4)i[If]=l[1],i[Cd]=parseInt(l[2]);else{var v=o[Nl](It);v&&v[Ar]>=3?(i[If]=v[1],i[Cd]=parseInt(v[2])):i[If]=o}}function Im(i,o,l){var v=i[If];o.fn&&l&&l[Ar]>o.fn&&(o.ln&&l[Ar]>o.ln?(v=Sn(l[o.fn]||""),i[Cd]=parseInt(Sn(l[o.ln]||""))||0):v=Sn(l[o.fn]||"")),v&&Tm(i,v)}function Nm(i){var o=!1;if(i&&Tt(i)){var l=Sn(i);l&&(o=$r.test(l))}return o}var ru=tr({level:1,method:1,assembly:0,fileName:0,line:0});function Dm(i,o){var l,v;if(i&&Tt(i)&&Sn(i)){v=(l={},l[Av]=ru,l[eh]=o,l[Tf]=Sn(i),l[Rp]=Rr,l.fileName="",l.line=0,l[bf]=0,l);for(var w=0;w<Yu[Ar];){var T=Yu[w];if(T.chk&&!T.chk(i))break;T.pre&&(i=T.pre(i));var A=i[Nl](T.re);if(A&&A[Ar]>=T.len){T.m&&(v[Rp]=Sn(A[T.m]||Rr)),T.hdl?T.hdl(v,T,A):T.fn&&(T.ln?(v[If]=Sn(A[T.fn]||""),v[Cd]=parseInt(Sn(A[T.ln]||""))||0):Tm(v,A[T.fn]||""));break}w++}}return c(v)}function a(i){var o,l=(o={},o[Av]=ru,o.level=i[eh],o.method=i[Rp],o.assembly=i[Tf],o.fileName=i[If],o.line=i[Cd],o[bf]=0,o);return c(l)}function c(i){var o=Bn;return i&&(o+=i.method[Ar],o+=i.assembly[Ar],o+=i.fileName[Ar],o+=i.level.toString()[Ar],o+=i.line.toString()[Ar],i[bf]=o),i}function p(i){return{level:i[eh],method:i[Rp],assembly:i[Tf],fileName:i[If],line:i[Cd]}}var g=function(){function i(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return i}(),b=function(){function i(o,l,v,w,T,A,L,Y,B){this.aiDataContract={ver:1,metrics:1,properties:0};var W=this;W.ver=2;var le=new g;le[f_]=w>0?w:void 0,le.max=isNaN(A)||A===null?void 0:A,le.min=isNaN(T)||T===null?void 0:T,le[wf]=qn(o,l)||Id,le.value=v,le.stdDev=isNaN(L)||L===null?void 0:L,W.metrics=[le],W[Cc]=kp(o,Y),W[ju]=Pd(o,B)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",i.dataType="MetricData",i}(),x="";function k(i){(isNaN(i)||i<0)&&(i=0),i=Math.round(i);var o=x+i%1e3,l=x+Math.floor(i/1e3)%60,v=x+Math.floor(i/(1e3*60))%60,w=x+Math.floor(i/(1e3*60*60))%24,T=Math.floor(i/(1e3*60*60*24));return o=o[Ar]===1?"00"+o:o[Ar]===2?"0"+o:o,l=l[Ar]<2?"0"+l:l,v=v[Ar]<2?"0"+v:v,w=w[Ar]<2?"0"+w:w,(T>0?T+".":x)+w+":"+v+":"+l+"."+o}var P=function(){function i(o,l,v,w,T,A,L){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var Y=this;Y.ver=2,Y.id=d(o,L),Y.url=xd(o,v),Y[wf]=qn(o,l)||Id,isNaN(w)||(Y[wm]=k(w)),Y[Cc]=kp(o,T),Y[ju]=Pd(o,A)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",i.dataType="PageviewData",i}(),M=function(){function i(o,l,v,w,T,A,L,Y,B,W,le,fe){B===void 0&&(B="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var de=this;de.ver=2,de.id=l,de[wm]=k(T),de.success=A,de.resultCode=L+"",de.type=qn(o,B);var se=Ge(o,v,Y,w);de.data=xd(o,w)||se.data,de.target=qn(o,se.target),W&&(de.target="".concat(de.target," | ").concat(W)),de[wf]=qn(o,se[wf]),de[Cc]=kp(o,le),de[ju]=Pd(o,fe)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",i.dataType="RemoteDependencyData",i}(),j=function(){function i(o,l,v,w,T){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var A=this;A.ver=2,l=l||Id,A[Pp]=Wn(o,l),A[Cc]=kp(o,w),A[ju]=Pd(o,T),v&&(A[Ef]=v)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.Message",i.dataType="MessageData",i}(),z=function(){function i(o,l,v,w,T,A,L){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var Y=this;Y.ver=2,Y.url=xd(o,v),Y[wf]=qn(o,l)||Id,Y[Cc]=kp(o,T),Y[ju]=Pd(o,A),L&&(Y.domProcessing=L.domProcessing,Y[wm]=L[wm],Y.networkConnect=L.networkConnect,Y.perfTotal=L.perfTotal,Y[Ah]=L[Ah],Y.sentRequest=L.sentRequest)}return i.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",i.dataType="PageviewPerformanceData",i}(),J=function(){function i(o,l){this.aiDataContract={baseType:1,baseData:1},this.baseType=o,this.baseData=l}return i}(),K=Qu({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function ee(i){var o="ai."+i+".";return function(l){return o+l}}var X=ee("application"),ve=ee("device"),be=ee("location"),Me=ee("operation"),Ze=ee("session"),Qe=ee("user"),jt=ee("cloud"),yr=ee("internal"),fa=function(i){Wl(o,i);function o(){return i.call(this)||this}return o}(lp({applicationVersion:X("ver"),applicationBuild:X("build"),applicationTypeId:X("typeId"),applicationId:X("applicationId"),applicationLayer:X("layer"),deviceId:ve("id"),deviceIp:ve("ip"),deviceLanguage:ve("language"),deviceLocale:ve("locale"),deviceModel:ve("model"),deviceFriendlyName:ve("friendlyName"),deviceNetwork:ve("network"),deviceNetworkName:ve("networkName"),deviceOEMName:ve("oemName"),deviceOS:ve("os"),deviceOSVersion:ve("osVersion"),deviceRoleInstance:ve("roleInstance"),deviceRoleName:ve("roleName"),deviceScreenResolution:ve("screenResolution"),deviceType:ve("type"),deviceMachineName:ve("machineName"),deviceVMName:ve("vmName"),deviceBrowser:ve("browser"),deviceBrowserVersion:ve("browserVersion"),locationIp:be("ip"),locationCountry:be("country"),locationProvince:be("province"),locationCity:be("city"),operationId:Me("id"),operationName:Me("name"),operationParentId:Me("parentId"),operationRootId:Me("rootId"),operationSyntheticSource:Me("syntheticSource"),operationCorrelationVector:Me("correlationVector"),sessionId:Ze("id"),sessionIsFirst:Ze("isFirst"),sessionIsNew:Ze("isNew"),userAccountAcquisitionDate:Qe("accountAcquisitionDate"),userAccountId:Qe("accountId"),userAgent:Qe("userAgent"),userId:Qe("id"),userStoreRegion:Qe("storeRegion"),userAuthUserId:Qe("authUserId"),userAnonymousUserAcquisitionDate:Qe("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Qe("authUserAcquisitionDate"),cloudName:jt("name"),cloudRole:jt("role"),cloudRoleVer:jt("roleVer"),cloudRoleInstance:jt("roleInstance"),cloudEnvironment:jt("environment"),cloudLocation:jt("location"),cloudDeploymentUnit:jt("deploymentUnit"),internalNodeName:yr("nodeName"),internalSdkVersion:yr("sdkVersion"),internalAgentVersion:yr("agentVersion"),internalSnippet:yr("snippet"),internalSdkSrc:yr("sdkSrc")})),hr=new fa;function La(i,o){V_(i,null,null,o)}function Yo(i){var o=Lf(),l=Ko(),v=!1,w=[],T=1;l&&!je(l.onLine)&&!l.onLine&&(T=2);var A=0,L=fe(),Y=Td(xu("OfflineListener"),i);try{if(W(Vo())&&(v=!0),o){var B=o.body||o;B.ononline&&W(B)&&(v=!0)}}catch{v=!1}function W(Ke){var ut=!1;return Ke&&(ut=l_(Ke,"online",Re,Y),ut&&l_(Ke,"offline",ye,Y)),ut}function le(){return L}function fe(){return!(A===2||T===2)}function de(){var Ke=fe();L!==Ke&&(L=Ke,kt(w,function(ut){var wr={isOnline:L,rState:T,uState:A};try{ut(wr)}catch{}}))}function se(Ke){A=Ke,de()}function Re(){T=1,de()}function ye(){T=2,de()}function Oe(){var Ke=Vo();if(Ke&&v){if(La(Ke,Y),o){var ut=o.body||o;tt(ut.ononline)||La(ut,Y)}v=!1}}function Le(Ke){return w[Pv](Ke),{rm:function(){var ut=w.indexOf(Ke);if(ut>-1)return w.splice(ut,1)}}}return{isOnline:le,isListening:function(){return v},unload:Oe,addListener:Le,setOnlineState:se}}var $o="AppInsightsChannelPlugin",Ac="duration",pi="tags",Cf="deviceType",He="data",At="name",On="traceID",Se="length",ar="stringify",Mn="measurements",Fa="dataType",Bi="envelopeType",Pr="toString",Ga="_get",aa="enqueue",Va="count",kd="eventsLimitInMem",vi="push",Mp="item",xf="emitLineDelimitedJson",Lp="clear",Fp="createNew",Rv="markAsSent",ia="clearSent",qo="bufferOverride",Ie="BUFFER_KEY",at="SENT_BUFFER_KEY",Lt="concat",Rt="MAX_BUFFER_SIZE",Xt="triggerSend",kr="diagLog",xn="initialize",da="_sender",Ni="endpointUrl",Hi="instrumentationKey",Pf="customHeaders",nh="maxBatchSizeInBytes",ah="onunloadDisableBeacon",W_="isBeaconApiDisabled",Fg="alwaysUseXhrOverride",d_="disableXhr",Oh="enableSessionStorageBuffer",Cl="_buffer",J_="onunloadDisableFetch",Z_="disableSendBeaconSplit",Ky="enableSendPromise",Ug="getSenderInst",wS="unloadTransports",bS="convertUndefined",ES="maxBatchInterval",jg="serialize",Mh="_onError",Wy="_onPartialSuccess",Yg="_onSuccess",Jy="itemsReceived",Zy="itemsAccepted",Xy="oriPayload",Qy="baseType",$g="sampleRate",TS="eventsSendRequest",IS="getSamplingScore",MI="getHashCodeScore",e0="baseType",Ka="baseData",Is="properties",NS="true";function zi(i,o,l){return Iu(i,o,l,ea)}function LI(i,o,l){var v=l[pi]=l[pi]||{},w=o.ext=o.ext||{},T=o[pi]=o[pi]||[],A=w.user;A&&(zi(v,hr.userAuthUserId,A.authId),zi(v,hr.userId,A.id||A.localId));var L=w.app;L&&zi(v,hr.sessionId,L.sesId);var Y=w.device;Y&&(zi(v,hr.deviceId,Y.id||Y.localId),zi(v,hr[Cf],Y.deviceClass),zi(v,hr.deviceIp,Y.ip),zi(v,hr.deviceModel,Y.model),zi(v,hr[Cf],Y[Cf]));var B=o.ext.web;if(B){zi(v,hr.deviceLanguage,B.browserLang),zi(v,hr.deviceBrowserVersion,B.browserVer),zi(v,hr.deviceBrowser,B.browser);var W=l[He]=l[He]||{},le=W[Ka]=W[Ka]||{},fe=le[Is]=le[Is]||{};zi(fe,"domain",B.domain),zi(fe,"isManual",B.isManual?NS:null),zi(fe,"screenRes",B.screenRes),zi(fe,"userConsent",B.userConsent?NS:null)}var de=w.os;de&&(zi(v,hr.deviceOS,de[At]),zi(v,hr.deviceOSVersion,de.osVer));var se=w.trace;se&&(zi(v,hr.operationParentId,se.parentID),zi(v,hr.operationName,qn(i,se[At])),zi(v,hr.operationId,se[On]));for(var Re={},ye=T[Se]-1;ye>=0;ye--){var Oe=T[ye];bt(Oe,function(Ke,ut){Re[Ke]=ut}),T.splice(ye,1)}bt(T,function(Ke,ut){Re[Ke]=ut});var Le=to(to({},v),Re);Le[hr.internalSdkVersion]||(Le[hr.internalSdkVersion]=qn(i,"javascript:".concat(FI.Version),64)),l[pi]=zs(Le)}function ih(i,o,l){je(i)||bt(i,function(v,w){Gt(w)?l[v]=w:Tt(w)?o[v]=w:ko()&&(o[v]=Oo()[ar](w))})}function Lh(i,o){je(i)||bt(i,function(l,v){i[l]=v||o})}function Fh(i,o,l,v){var w=new rn(i,v,o);zi(w,"sampleRate",l[Dh]),(l[Ka]||{}).startTime&&(w.time=nl(l[Ka].startTime)),w.iKey=l.iKey;var T=l.iKey.replace(/-/g,"");return w[At]=w[At].replace("{0}",T),LI(i,l,w),l[pi]=l[pi]||[],zs(w)}function Uh(i,o){je(o[Ka])&&vt(i,1,46,"telemetryItem.baseData cannot be null.")}var FI={Version:"3.3.5"};function UI(i,o,l){Uh(i,o);var v=o[Ka][Mn]||{},w=o[Ka][Is]||{};ih(o[He],w,v),je(l)||Lh(w,l);var T=o[Ka];if(je(T))return Ou(i,"Invalid input for dependency data"),null;var A=T[Is]&&T[Is][Ch]?T[Is][Ch]:"GET",L=new M(i,T.id,T.target,T[At],T[Ac],T.success,T.responseCode,A,T.type,T.correlationContext,w,v),Y=new J(M[Fa],L);return Fh(i,M[Bi],o,Y)}function DS(i,o,l){Uh(i,o);var v={},w={};o[e0]!==Jr[Fa]&&(v.baseTypeSource=o[e0]),o[e0]===Jr[Fa]?(v=o[Ka][Is]||{},w=o[Ka][Mn]||{}):o[Ka]&&ih(o[Ka],v,w),ih(o[He],v,w),je(l)||Lh(v,l);var T=o[Ka][At],A=new Jr(i,T,v,w),L=new J(Jr[Fa],A);return Fh(i,Jr[Bi],o,L)}function jI(i,o,l){Uh(i,o);var v=o[Ka][Mn]||{},w=o[Ka][Is]||{};ih(o[He],w,v),je(l)||Lh(w,l);var T=o[Ka],A=Rd.CreateFromInterface(i,T,w,v),L=new J(Rd[Fa],A);return Fh(i,Rd[Bi],o,L)}function YI(i,o,l){Uh(i,o);var v=o[Ka],w=v[Is]||{},T=v[Mn]||{};ih(o[He],w,T),je(l)||Lh(w,l);var A=new b(i,v[At],v.average,v.sampleCount,v.min,v.max,v.stdDev,w,T),L=new J(b[Fa],A);return Fh(i,b[Bi],o,L)}function $I(i,o,l){Uh(i,o);var v,w=o[Ka];!je(w)&&!je(w[Is])&&!je(w[Is][Ac])?(v=w[Is][Ac],delete w[Is][Ac]):!je(o[He])&&!je(o[He][Ac])&&(v=o[He][Ac],delete o[He][Ac]);var T=o[Ka],A;((o.ext||{}).trace||{})[On]&&(A=o.ext.trace[On]);var L=T.id||A,Y=T[At],B=T.uri,W=T[Is]||{},le=T[Mn]||{};if(je(T.refUri)||(W.refUri=T.refUri),je(T.pageType)||(W.pageType=T.pageType),je(T.isLoggedIn)||(W.isLoggedIn=T.isLoggedIn[Pr]()),!je(T[Is])){var fe=T[Is];bt(fe,function(Re,ye){W[Re]=ye})}ih(o[He],W,le),je(l)||Lh(W,l);var de=new P(i,Y,B,v,W,le,L),se=new J(P[Fa],de);return Fh(i,P[Bi],o,se)}function qI(i,o,l){Uh(i,o);var v=o[Ka],w=v[At],T=v.uri||v.url,A=v[Is]||{},L=v[Mn]||{};ih(o[He],A,L),je(l)||Lh(A,l);var Y=new z(i,w,T,void 0,A,L,v),B=new J(z[Fa],Y);return Fh(i,z[Bi],o,B)}function BI(i,o,l){Uh(i,o);var v=o[Ka].message,w=o[Ka].severityLevel,T=o[Ka][Is]||{},A=o[Ka][Mn]||{};ih(o[He],T,A),je(l)||Lh(T,l);var L=new j(i,v,w,T,A),Y=new J(j[Fa],L);return Fh(i,j[Bi],o,Y)}var CS=function(){function i(o,l){var v=[],w=!1,T=l.maxRetryCnt;this[Ga]=function(){return v},this._set=function(A){return v=A,v},Ba(i,this,function(A){A[aa]=function(L){if(A[Va]()>=l[kd]){w||(vt(o,2,105,"Maximum in-memory buffer size reached: "+A[Va](),!0),w=!0);return}L.cnt=L.cnt||0,!(!je(T)&&L.cnt>T)&&v[vi](L)},A[Va]=function(){return v[Se]},A.size=function(){for(var L=v[Se],Y=0;Y<v[Se];Y++)L+=v[Y].item[Se];return l[xf]||(L+=2),L},A[Lp]=function(){v=[],w=!1},A.getItems=function(){return v.slice(0)},A.batchPayloads=function(L){if(L&&L[Se]>0){var Y=[];kt(L,function(W){Y[vi](W[Mp])});var B=l[xf]?Y.join(`
`):"["+Y.join(",")+"]";return B}return null},A[Fp]=function(L,Y,B){var W=v.slice(0);L=L||o,Y=Y||{};var le=B?new xS(L,Y):new t0(L,Y);return kt(W,function(fe){le[aa](fe)}),le}})}return i.__ieDyn=1,i}(),t0=function(i){Wl(o,i);function o(l,v){var w=i.call(this,l,v)||this;return Ba(o,w,function(T,A){T[Rv]=function(L){A[Lp]()},T[ia]=function(L){}}),w}return o.__ieDyn=1,o}(CS),HI=["AI_buffer","AI_sentBuffer"],xS=function(i){Wl(o,i);function o(v,w){var T=i.call(this,v,w)||this,A=!1,L=w==null?void 0:w.namePrefix,Y=w[qo]||{getItem:Ce,setItem:Be},B=Y.getItem,W=Y.setItem,le=w.maxRetryCnt;return Ba(o,T,function(fe,de){var se=ut(o[Ie]),Re=ut(o[at]),ye=an(),Oe=Re[Lt](ye),Le=fe._set(se[Lt](Oe));Le[Se]>o[Rt]&&(Le[Se]=o[Rt]),nn(o[at],[]),nn(o[Ie],Le),fe[aa]=function(Kt){if(fe[Va]()>=o[Rt]){A||(vt(v,2,67,"Maximum buffer size reached: "+fe[Va](),!0),A=!0);return}Kt.cnt=Kt.cnt||0,!(!je(le)&&Kt.cnt>le)&&(de[aa](Kt),nn(o.BUFFER_KEY,fe[Ga]()))},fe[Lp]=function(){de[Lp](),nn(o.BUFFER_KEY,fe[Ga]()),nn(o[at],[]),A=!1},fe[Rv]=function(Kt){nn(o[Ie],fe._set(Ke(Kt,fe[Ga]())));var Yt=ut(o[at]);Yt instanceof Array&&Kt instanceof Array&&(Yt=Yt[Lt](Kt),Yt[Se]>o[Rt]&&(vt(v,1,67,"Sent buffer reached its maximum size: "+Yt[Se],!0),Yt[Se]=o[Rt]),nn(o[at],Yt))},fe[ia]=function(Kt){var Yt=ut(o[at]);Yt=Ke(Kt,Yt),nn(o[at],Yt)},fe[Fp]=function(Kt,Yt,en){en=!!en;var Wa=fe[Ga]().slice(0),pa=ut(o[at]).slice(0);Kt=Kt||v,Yt=Yt||{},fe[Lp]();var Xe=en?new o(Kt,Yt):new t0(Kt,Yt);return kt(Wa,function($t){Xe[aa]($t)}),en&&Xe[Rv](pa),Xe};function Ke(Kt,Yt){var en=[],Wa=[];return kt(Kt,function(pa){Wa[vi](pa[Mp])}),kt(Yt,function(pa){!rt(pa)&&Si(Wa,pa[Mp])===-1&&en[vi](pa)}),en}function ut(Kt){var Yt=Kt;return Yt=L?L+"_"+Yt:Yt,wr(Yt)}function wr(Kt){try{var Yt=B(v,Kt);if(Yt){var en=Oo().parse(Yt);if(Tt(en)&&(en=Oo().parse(en)),en&&nt(en))return en}}catch(Wa){vt(v,1,42," storage key: "+Kt+", "+Ea(Wa),{exception:Zt(Wa)})}return[]}function nn(Kt,Yt){var en=Kt;try{en=L?L+"_"+en:en;var Wa=JSON[ar](Yt);W(v,en,Wa)}catch(pa){W(v,en,JSON[ar]([])),vt(v,2,41," storage key: "+en+", "+Ea(pa)+". Buffer cleared",{exception:Zt(pa)})}}function an(){var Kt=[];try{return kt(HI,function(Yt){var en=Pn(Yt);if(Kt=Kt[Lt](en),L){var Wa=L+"_"+Yt,pa=Pn(Wa);Kt=Kt[Lt](pa)}}),Kt}catch(Yt){vt(v,2,41,"Transfer events from previous buffers: "+Ea(Yt)+". previous Buffer items can not be removed",{exception:Zt(Yt)})}return[]}function Pn(Kt){try{var Yt=wr(Kt),en=[];return kt(Yt,function(Wa){var pa={item:Wa,cnt:0};en[vi](pa)}),Bt(v,Kt),en}catch{}return[]}}),T}var l;return l=o,o.VERSION="_1",o.BUFFER_KEY="AI_buffer"+l.VERSION,o.SENT_BUFFER_KEY="AI_sentBuffer"+l.VERSION,o.MAX_BUFFER_SIZE=2e3,o}(CS),zI=function(){function i(o){Ba(i,this,function(l){l[jg]=function(A){var L=v(A,"root");try{return Oo()[ar](L)}catch(Y){vt(o,1,48,Y&&rt(Y[Pr])?Y[Pr]():"Error serializing object",null,!0)}};function v(A,L){var Y="__aiCircularRefCheck",B={};if(!A)return vt(o,1,48,"cannot serialize object because it is null or undefined",{name:L},!0),B;if(A[Y])return vt(o,2,50,"Circular reference detected while serializing object",{name:L},!0),B;if(!A.aiDataContract){if(L==="measurements")B=T(A,"number",L);else if(L==="properties")B=T(A,"string",L);else if(L==="tags")B=T(A,"string",L);else if(nt(A))B=w(A,L);else{vt(o,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:L},!0);try{Oo()[ar](A),B=A}catch(W){vt(o,1,48,W&&rt(W[Pr])?W[Pr]():"Error serializing object",null,!0)}}return B}return A[Y]=!0,bt(A.aiDataContract,function(W,le){var fe=rt(le)?le()&1:le&1,de=rt(le)?le()&4:le&4,se=le&2,Re=A[W]!==void 0,ye=Qn(A[W])&&A[W]!==null;if(fe&&!Re&&!se)vt(o,1,24,"Missing required field specification. The field is required but not present on source",{field:W,name:L});else if(!de){var Oe=void 0;ye?se?Oe=w(A[W],W):Oe=v(A[W],W):Oe=A[W],Oe!==void 0&&(B[W]=Oe)}}),delete A[Y],B}function w(A,L){var Y;if(A)if(!nt(A))vt(o,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:L},!0);else{Y=[];for(var B=0;B<A[Se];B++){var W=A[B],le=v(W,L+"["+B+"]");Y[vi](le)}}return Y}function T(A,L,Y){var B;return A&&(B={},bt(A,function(W,le){if(L==="string")le===void 0?B[W]="undefined":le===null?B[W]="null":le[Pr]?B[W]=le[Pr]():B[W]="invalid field: toString() is not defined.";else if(L==="number")if(le===void 0)B[W]="undefined";else if(le===null)B[W]="null";else{var fe=parseFloat(le);B[W]=fe}else B[W]="invalid field: "+Y+" is of unknown type.",vt(o,1,B[W],null,!0)})),B}})}return i.__ieDyn=1,i}(),GI=8,VI=function(){function i(){}return i.prototype.getHashCodeScore=function(o){var l=this.getHashCode(o)/i.INT_MAX_VALUE;return l*100},i.prototype.getHashCode=function(o){if(o==="")return 0;for(;o[Se]<GI;)o=o[Lt](o);for(var l=5381,v=0;v<o[Se];++v)l=(l<<5)+l+o.charCodeAt(v),l=l&l;return Math.abs(l)},i.INT_MAX_VALUE=2147483647,i}(),KI=function(){function i(){var o=this,l=new VI,v=new fa;o[IS]=function(w){var T=0;return w[pi]&&w[pi][v.userId]?T=l.getHashCodeScore(w[pi][v.userId]):w.ext&&w.ext.user&&w.ext.user.id?T=l[MI](w.ext.user.id):w[pi]&&w[pi][v.operationId]?T=l.getHashCodeScore(w[pi][v.operationId]):w.ext&&w.ext.telemetryTrace&&w.ext.telemetryTrace[On]?T=l.getHashCodeScore(w.ext.telemetryTrace[On]):T=Math.random()*100,T}}return i}(),WI=function(){function i(o,l){this.INT_MAX_VALUE=2147483647;var v=l||_s(null);(o>100||o<0)&&(v.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:o},!0),o=100),this[$g]=o,this.samplingScoreGenerator=new KI}return i.prototype.isSampledIn=function(o){var l=this[$g],v=!1;return l==null||l>=100||o.baseType===b[Fa]?!0:(v=this.samplingScoreGenerator[IS](o)<l,v)},i}(),Ua,Cm,kv=void 0,PS="",JI=65e3;function AS(i){try{return i.responseText}catch{}return null}function ZI(i){return i&&i.sendPOST}var RS=As((Ua={endpointUrl:Sc(ea,Xm+Cv)},Ua[xf]=uo(),Ua[ES]=15e3,Ua[nh]=102400,Ua.disableTelemetry=uo(),Ua[Oh]=uo(!0),Ua.isRetryDisabled=uo(),Ua[W_]=uo(!0),Ua[Z_]=uo(!0),Ua[d_]=uo(),Ua[J_]=uo(),Ua[ah]=uo(),Ua[Hi]=kv,Ua.namePrefix=kv,Ua.samplingPercentage=Sc(XI,100),Ua[Pf]=kv,Ua[bS]=kv,Ua[kd]=1e4,Ua[qo]=!1,Ua.httpXHROverride={isVal:ZI,v:kv},Ua[Fg]=uo(),Ua.transports=kv,Ua.retryCodes=kv,Ua.maxRetryCnt={isVal:Gt,v:10},Ua));function XI(i){return!isNaN(i)&&i>0&&i<=100}var QI=(Cm={},Cm[Jr.dataType]=DS,Cm[j.dataType]=BI,Cm[P.dataType]=$I,Cm[z.dataType]=qI,Cm[Rd.dataType]=jI,Cm[b.dataType]=YI,Cm[M.dataType]=UI,Cm),kS=function(i){Wl(o,i);function o(){var l=i.call(this)||this;l.priority=1001,l.identifier=$o;var v,w,T,A,L,Y,B,W=0,le,fe,de,se,Re,ye,Oe,Le,Ke,ut,wr,nn,an,Pn,Kt,Yt,en,Wa,pa,Xe,$t,Ln,Fe,Qt,va,Fn,Ns;return Ba(o,l,function(Ee,fo){FS(),Ee.pause=function(){ch(),T=!0},Ee.resume=function(){T&&(T=!1,w=null,An(),__())},Ee.flush=function(ae,Ne,gt){if(ae===void 0&&(ae=!0),!T){ch();try{return Ee[Xt](ae,null,gt||1)}catch(yt){vt(Ee[kr](),1,22,"flush failed, telemetry will not be collected: "+Ea(yt),{exception:Zt(yt)})}}},Ee.onunloadFlush=function(){if(!T)if(Oe||Xe)try{return Ee[Xt](!0,au,2)}catch(ae){vt(Ee[kr](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Ea(ae),{exception:Zt(ae)})}else Ee.flush(!1)},Ee.addHeader=function(ae,Ne){B[ae]=Ne},Ee[xn]=function(ae,Ne,gt,yt){Ee.isInitialized()&&vt(Ee[kr](),1,28,"Sender is already initialized"),fo[xn](ae,Ne,gt,yt);var Er=Ee.identifier;L=new zI(Ne.logger),v=0,w=null,Ee[da]=null,Y=0;var _r=Ee[kr]();de=Td(xu("Sender"),Ne.evtNamespace&&Ne.evtNamespace()),fe=Yo(de),Ee._addHook(Ru(ae,function(Gr){var ja=Gr.cfg;ja.storagePrefix&&Je(ja.storagePrefix);var Md=m(null,ja,Ne),Or=Md.getExtCfg(Er,RS),US=Or[Ni];if(se&&US===se){var a0=ja[Ni];a0&&a0!==US&&(Or[Ni]=a0)}er(Or[Hi])&&(Or[Hi]=ja[Hi]),on(Ee,"_senderConfig",{g:function(){return Or}}),Re!==Or[Ni]&&(se=Re=Or[Ni]),Ne.activeStatus()===Ri.PENDING?Ee.pause():Ne.activeStatus()===Ri.ACTIVE&&Ee.resume(),ut&&ut!==Or[Pf]&&kt(ut,function(iu){delete B[iu.header]}),ye=Or[nh],Oe=(Or[ah]===!1||Or[W_]===!1)&&ps(),Le=Or[ah]===!1&&ps(),Ke=Or[W_]===!1&&ps(),Xe=Or[Fg],$t=!!Or[d_],Ns=Or.retryCodes;var i0=Or[qo],g_=!!Or[Oh]&&(!!i0||Ae()),jS=Or.namePrefix,nN=g_!==Yt||g_&&Wa!==jS||g_&&en!==i0;if(Ee[Cl]){if(nN)try{Ee._buffer=Ee._buffer[Fp](_r,Or,g_)}catch(iu){vt(Ee[kr](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+Ea(iu),{exception:Zt(iu)})}An()}else Ee[Cl]=g_?new xS(_r,Or):new t0(_r,Or);Wa=jS,Yt=g_,en=i0,Ln=!Or[J_]&&sd(!0),va=!!Or[Z_],Ee._sample=new WI(Or.samplingPercentage,_r),nn=Or[Hi],!er(nn)&&!LS(nn,ja)&&vt(_r,1,100,"Invalid Instrumentation key "+nn),ut=Or[Pf],Tt(se)&&!Pe(se)&&ut&&ut[Se]>0?kt(ut,function(iu){l.addHeader(iu.header,iu.value)}):ut=null,pa=Or[Ky];var YS=Ds();Fn?Fn.SetConfig(YS):(Fn=new bs,Fn[xn](YS,_r));var zg=Or.httpXHROverride,Gg=null,eg=null,aN=af([3,1,2],Or.transports);Gg=Fn&&Fn[Ug](aN,!1);var o0=Fn&&Fn.getFallbackInst();Fe=function(iu,jh){return Ct(o0,iu,jh)},Qt=function(iu,jh){return Ct(o0,iu,jh,!1)},Gg=Xe?zg:Gg||zg||o0,Ee[da]=function(iu,jh){return Ct(Gg,iu,jh)},Ln&&(le=h_);var s0=af([3,1],Or[wS]);Ln||(s0=s0.filter(function(iu){return iu!==2})),eg=Fn&&Fn[Ug](s0,!0),eg=Xe?zg:eg||zg,(Xe||Or[wS]||!le)&&eg&&(le=function(iu,jh){return Ct(eg,iu,jh)}),le||(le=Fe),wr=Or.disableTelemetry,an=Or[bS]||kv,Pn=Or.isRetryDisabled,Kt=Or[ES]}))},Ee.processTelemetry=function(ae,Ne){var gt;Ne=Ee._getTelCtx(Ne);var yt=Ne[kr]();try{var Er=jp(ae,yt);if(!Er)return;var _r=uh(ae,yt);if(!_r)return;var Gr=L[jg](_r),ja=Ee[Cl];An(Gr);var Md=(gt={},gt[Mp]=Gr,gt.cnt=0,gt);ja[aa](Md),__()}catch(Or){vt(yt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Ea(Or),{exception:Zt(Or)})}Ee.processNext(ae,Ne)},Ee.isCompletelyIdle=function(){return!T&&W===0&&Ee._buffer[Va]()===0},Ee.getOfflineListener=function(){return fe},Ee._xhrReadyStateChange=function(ae,Ne,gt){if(!$p(Ne))return Od(ae,Ne,gt)},Ee[Xt]=function(ae,Ne,gt){ae===void 0&&(ae=!0);var yt;if(!T)try{var Er=Ee[Cl];if(wr)Er[Lp]();else if(Er[Va]()>0){var _r=Er.getItems();Hg(gt||0,ae),Ne?yt=Ne.call(Ee,_r,ae):yt=Ee[da](_r,ae)}ch()}catch(ja){var Gr=ka();(!Gr||Gr>9)&&vt(Ee[kr](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+Ea(ja),{exception:Zt(ja)})}return yt},Ee.getOfflineSupport=function(){var ae;return ae={getUrl:function(){return se},createPayload:xe},ae[jg]=Ja,ae.batch=nu,ae.shouldProcess=function(Ne){return!!jp(Ne)},ae},Ee._doTeardown=function(ae,Ne){Ee.onunloadFlush(),vl(fe,!1),FS()},Ee[Mh]=function(ae,Ne,gt){if(!$p(ae))return Rc(ae,Ne)},Ee[Wy]=function(ae,Ne){if(!$p(ae))return oh(ae,Ne)},Ee[Yg]=function(ae,Ne){if(!$p(ae))return Up(ae)},Ee._xdrOnLoad=function(ae,Ne){if(!$p(Ne))return mi(ae,Ne)};function mi(ae,Ne){var gt=AS(ae);if(ae&&(gt+""=="200"||gt===""))v=0,Ee[Yg](Ne,0);else{var yt=zr(gt);yt&&yt[Jy]&&yt[Jy]>yt[Zy]&&!Pn?Ee[Wy](Ne,yt):Ee[Mh](Ne,cs(ae))}}function Ds(){var ae;try{var Ne={xdrOnComplete:function(yt,Er,_r){var Gr=sh(_r);if(Gr)return mi(yt,Gr)},fetchOnComplete:function(yt,Er,_r,Gr){var ja=sh(Gr);if(ja)return Za(yt.status,ja,yt.url,ja[Se],yt.statusText,_r||"")},xhrOnComplete:function(yt,Er,_r){var Gr=sh(_r);if(Gr)return Od(yt,Gr,Gr[Se])},beaconOnRetry:function(yt,Er,_r){return Yp(yt,Er,_r)}},gt=(ae={},ae[Ky]=pa,ae.isOneDs=!1,ae.disableCredentials=!1,ae[d_]=$t,ae.disableBeacon=!Ke,ae.disableBeaconSync=!Le,ae.senderOnCompleteCallBack=Ne,ae);return gt}catch{}return null}function Od(ae,Ne,gt){ae.readyState===4&&Za(ae.status,Ne,ae.responseURL,gt,ji(ae),AS(ae)||ae.response)}function Rc(ae,Ne,gt){vt(Ee[kr](),2,26,"Failed to send telemetry.",{message:Ne}),Ee._buffer&&Ee._buffer[ia](ae)}function oh(ae,Ne){for(var gt=[],yt=[],Er=Ne.errors.reverse(),_r=0,Gr=Er;_r<Gr.length;_r++){var ja=Gr[_r],Md=ae.splice(ja.index,1)[0];lh(ja.statusCode)?yt[vi](Md):gt[vi](Md)}ae[Se]>0&&Ee[Yg](ae,Ne[Zy]),gt[Se]>0&&Ee[Mh](gt,ji(null,["partial success",Ne[Zy],"of",Ne.itemsReceived].join(" "))),yt[Se]>0&&(Q_(yt),vt(Ee[kr](),2,40,"Partial success. Delivered: "+ae[Se]+", Failed: "+gt[Se]+". Will retry to send "+yt[Se]+" our of "+Ne[Jy]+" items"))}function Up(ae,Ne){Ee._buffer&&Ee._buffer[ia](ae)}function sh(ae){try{if(ae){var Ne=ae,gt=Ne[Xy];return gt&&gt[Se]?gt:null}}catch{}return null}function jp(ae,Ne){if(wr)return!1;if(!ae)return Ne&&vt(Ne,1,7,"Cannot send empty telemetry"),!1;if(ae.baseData&&!ae[Qy])return Ne&&vt(Ne,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(ae[Qy]||(ae[Qy]="EventData"),!Ee[da])return Ne&&vt(Ne,1,28,"Sender was not initialized"),!1;if(_t(ae))ae[Dh]=Ee._sample[$g];else return Ne&&vt(Ne,2,33,"Telemetry item was sampled out and not sent",{SampleRate:Ee._sample[$g]}),!1;return!0}function uh(ae,Ne){var gt=ae.iKey||nn,yt=o.constructEnvelope(ae,gt,Ne,an);if(!yt){vt(Ne,1,47,"Unable to create an AppInsights envelope");return}var Er=!1;if(ae[pi]&&ae[pi][gm]&&(kt(ae[pi][gm],function(_r){try{_r&&_r(yt)===!1&&(Er=!0,Ou(Ne,"Telemetry processor check returns false"))}catch(Gr){vt(Ne,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Ea(Gr),{exception:Zt(Gr)},!0)}}),delete ae[pi][gm]),!Er)return yt}function Ja(ae){var Ne=PS,gt=Ee[kr]();try{var yt=jp(ae,gt),Er=null;yt&&(Er=uh(ae,gt)),Er&&(Ne=L[jg](Er))}catch{}return Ne}function nu(ae){var Ne=PS;return ae&&ae[Se]&&(Ne="["+ae.join(",")+"]"),Ne}function xe(ae){var Ne,gt=Zn();return Ne={urlString:se},Ne[He]=ae,Ne.headers=gt,Ne}function _t(ae){return Ee._sample.isSampledIn(ae)}function Wt(ae,Ne,gt,yt){Ne===200&&ae?Ee._onSuccess(ae,ae[Se]):yt&&Ee[Mh](ae,yt)}function Ct(ae,Ne,gt,yt){yt===void 0&&(yt=!0);var Er=function(ja,Md,Or){return Wt(Ne,ja,Md,Or)},_r=dr(Ne),Gr=ae&&ae.sendPOST;return Gr&&_r?(yt&&Ee._buffer[Rv](Ne),Gr(_r,Er,!gt)):null}function dr(ae){var Ne;if(nt(ae)&&ae[Se]>0){var gt=Ee[Cl].batchPayloads(ae),yt=Zn(),Er=(Ne={},Ne[He]=gt,Ne.urlString=se,Ne.headers=yt,Ne.disableXhrSync=$t,Ne.disableFetchKeepAlive=!Ln,Ne[Xy]=ae,Ne);return Er}return null}function Zn(){try{var ae=B||{};return Pe(se)&&(ae[xh[6]]=xh[7]),ae}catch{}return null}function An(ae){var Ne=ae?ae[Se]:0;return Ee[Cl].size()+Ne>ye?((!fe||fe.isOnline())&&Ee[Xt](!0,null,10),!0):!1}function Za(ae,Ne,gt,yt,Er,_r){var Gr=null;if(Ee._appId||(Gr=zr(_r),Gr&&Gr.appId&&(Ee._appId=Gr.appId)),(ae<200||ae>=300)&&ae!==0){if((ae===301||ae===307||ae===308)&&!Bo(gt)){Ee[Mh](Ne,Er);return}if(fe&&!fe.isOnline()){if(!Pn){var ja=10;Q_(Ne,ja),vt(Ee[kr](),2,40,". Offline - Response Code: ".concat(ae,". Offline status: ").concat(!fe.isOnline(),". Will retry to send ").concat(Ne.length," items."))}return}!Pn&&lh(ae)?(Q_(Ne),vt(Ee[kr](),2,40,". Response code "+ae+". Will retry to send "+Ne[Se]+" items.")):Ee[Mh](Ne,Er)}else Bo(gt),ae===206?(Gr||(Gr=zr(_r)),Gr&&!Pn?Ee[Wy](Ne,Gr):Ee[Mh](Ne,Er)):(v=0,Ee[Yg](Ne,yt))}function Bo(ae){return Y>=10?!1:!je(ae)&&ae!==""&&ae!==se?(se=ae,++Y,!0):!1}function au(ae,Ne){if(le)le(ae,!1);else{var gt=Fn&&Fn[Ug]([3],!0);return Ct(gt,ae,Ne)}}function Yp(ae,Ne,gt){var yt=ae,Er=yt&&yt[Xy];if(va)Qt&&Qt(Er,!0),vt(Ee[kr](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var _r=[],Gr=0;Gr<Er[Se];Gr++){var ja=Er[Gr],Md=[ja],Or=dr(Md);gt(Or,Ne)?Ee._onSuccess(Md,Md[Se]):_r[vi](ja)}_r[Se]>0&&(Qt&&Qt(_r,!0),vt(Ee[kr](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function $p(ae){try{if(ae&&ae[Se])return Tt(ae[0])}catch{}return null}function h_(ae,Ne){var gt=null;if(nt(ae)){for(var yt=ae[Se],Er=0;Er<ae[Se];Er++)yt+=ae[Er].item[Se];var _r=Fn.getSyncFetchPayload();_r+yt<=JI?gt=2:ps()?gt=3:(gt=1,vt(Ee[kr](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var Gr=Fn&&Fn[Ug]([gt],!0);return Ct(Gr,ae,Ne)}return null}function Q_(ae,Ne){if(Ne===void 0&&(Ne=1),!(!ae||ae[Se]===0)){var gt=Ee[Cl];gt[ia](ae),v++;for(var yt=0,Er=ae;yt<Er.length;yt++){var _r=Er[yt];_r.cnt=_r.cnt||0,_r.cnt++,gt[aa](_r)}n0(Ne),__()}}function n0(ae){var Ne=10,gt;if(v<=1)gt=Ne;else{var yt=(Math.pow(2,v)-1)/2,Er=Math.floor(Math.random()*yt*Ne)+1;Er=ae*Er,gt=Math.max(Math.min(Er,3600),Ne)}var _r=pu()+gt*1e3;w=_r}function __(){if(!A&&!T){var ae=w?Math.max(0,w-pu()):0,Ne=Math.max(Kt,ae);A=_u(function(){A=null,Ee[Xt](!0,null,1)},Ne)}}function ch(){A&&A.cancel(),A=null,w=null}function lh(ae){return je(Ns)?ae===401||ae===408||ae===429||ae===500||ae===502||ae===503||ae===504:Ns[Se]&&Ns.indexOf(ae)>-1}function Bg(){var ae="getNotifyMgr";return Ee.core[ae]?Ee.core[ae]():Ee.core._notificationManager}function Hg(ae,Ne){var gt=Bg();if(gt&&gt[TS])try{gt[TS](ae,Ne)}catch(yt){vt(Ee[kr](),1,74,"send request notification failed: "+Ea(yt),{exception:Zt(yt)})}}function LS(ae,Ne){var gt=Ne.disableInstrumentationKeyValidation,yt=je(gt)?!1:gt;if(yt)return!0;var Er="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",_r=new RegExp(Er);return _r.test(ae)}function FS(){Ee[da]=null,Ee[Cl]=null,Ee._appId=null,Ee._sample=null,B={},fe=null,v=0,w=null,T=!1,A=null,L=null,Y=0,W=0,le=null,de=null,se=null,Re=null,ye=0,Oe=!1,ut=null,wr=!1,nn=null,an=kv,Pn=!1,Yt=null,Wa=kv,$t=!1,Ln=!1,va=!1,Fe=null,Qt=null,Fn=null,on(Ee,"_senderConfig",{g:function(){return pt({},RS)}})}}),l}return o.constructEnvelope=function(l,v,w,T){var A;v!==l.iKey&&!je(v)?A=to(to({},l),{iKey:v}):A=l;var L=QI[A.baseType]||DS;return L(w,A,T)},o}(Ot),p_="instrumentationKey",qg="connectionString",OS="instrumentationkey",v_="endpointUrl",MS="ingestionendpoint",X_="userOverrideEndpointUrl",m_,r0=void 0,eN=(m_={diagnosticLogInterval:Sc(tN,1e4)},m_[qg]=r0,m_[v_]=r0,m_[p_]=r0,m_.extensionConfig={},m_);function tN(i){return i&&i>0}var rN=function(){function i(o){var l=new qt,v;(je(o)||je(o[p_])&&je(o[qg]))&&lr("Invalid input configuration"),Ba(i,this,function(T){on(T,"config",{g:function(){return v}}),A(),T.initialize=A,T.track=w,nd(T,l,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function A(){var L=Lo(o||{},eN);v=L.cfg,l.addUnloadHook(Ru(L,function(){var Y=v[qg];if(er(Y)){var B=Qc(function(de,se){os(Y,function(Re){var ye=Re.value,Oe=v[p_];if(!Re.rejected&&ye){v[qg]=ye;var Le=Cr(ye);Oe=Le[OS]||Oe}de(Oe)})}),W=Qc(function(de,se){os(Y,function(Re){var ye=Re.value,Oe=v[v_];if(!Re.rejected&&ye){var Le=Cr(ye),Ke=Le[MS];Oe=Ke?Ke+Cv:Oe}de(Oe)})});v[p_]=B,v[v_]=v[X_]||W}if(Tt(Y)){var le=Cr(Y),fe=le[MS];v[v_]=v[X_]?v[X_]:fe+Cv,v[p_]=le[OS]||v[p_]}v[v_]=v[X_]?v[X_]:v[v_]})),l.initialize(v,[new kS])}});function w(T){T&&(T.baseData=T.baseData||{},T.baseType=T.baseType||"EventData"),l.track(T)}}return i.__ieDyn=1,i}();e.AppInsightsCore=qt,e.ApplicationInsights=rN,e.Sender=kS,e.SeverityLevel=K,e.arrForEach=kt,e.isNullOrUndefined=je,e.proxyFunctions=nd,e.throwError=lr})});var hw=Ld(Mv=>{"use strict";var YN=Mv&&Mv.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),$N=Mv&&Mv.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),qN=Mv&&Mv.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&YN(t,e,r);return $N(t,e),t};Object.defineProperty(Mv,"__esModule",{value:!0});Mv.appInsightsClientFactory=void 0;var BN=pw(),HN=g0(),zN=async(e,t,r,n,s)=>{let u;try{let S=await Promise.resolve().then(()=>qN(mw())),I={};if(n){let H={alwaysUseXhrOverride:!0,httpXHROverride:n};I[BN.BreezeChannelIdentifier]=H}let D;e.startsWith("InstrumentationKey=")||(D=e);let F=D?{instrumentationKey:D}:{connectionString:e};u=new S.ApplicationInsights({...F,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:I})}catch(S){return Promise.reject(S)}return{logEvent:(S,I)=>{let D={...I==null?void 0:I.properties,...I==null?void 0:I.measurements};s!=null&&s.length&&HN.TelemetryUtil.applyReplacements(D,s),u==null||u.track({name:S,data:D,baseType:"EventData",ext:{user:{id:t,authId:t},app:{sesId:r}},baseData:{name:S,properties:I==null?void 0:I.properties,measurements:I==null?void 0:I.measurements}})},flush:async()=>{u==null||u.flush(!1)},dispose:async()=>new Promise(I=>{u==null||u.unload(!0,()=>{I(),u=void 0},1e3)})}};Mv.appInsightsClientFactory=zN});var _w=Ld(iy=>{"use strict";Object.defineProperty(iy,"__esModule",{value:!0});iy.BaseTelemetryReporter=void 0;var y0=class{constructor(t,r,n){this.telemetrySender=t,this.vscodeAPI=r,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(t,r,n,s){s?this.telemetrySender.sendEventData(t,{properties:r,measurements:n}):this.telemetryLogger.logUsage(t,{properties:r,measurements:n})}sendTelemetryEvent(t,r,n){this.internalSendTelemetryEvent(t,r,n,!1)}sendRawTelemetryEvent(t,r,n){let s={...r};for(let u of Object.keys(s??{})){let h=s[u];typeof u=="string"&&h!==void 0&&(s[u]=new this.vscodeAPI.TelemetryTrustedValue(typeof h=="string"?h:h.value))}this.sendTelemetryEvent(t,s,n)}sendDangerousTelemetryEvent(t,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(t,r,n,!0)}internalSendTelemetryErrorEvent(t,r,n,s){s?this.telemetrySender.sendEventData(t,{properties:r,measurements:n}):this.telemetryLogger.logError(t,{properties:r,measurements:n})}sendTelemetryErrorEvent(t,r,n){this.internalSendTelemetryErrorEvent(t,r,n,!1)}sendDangerousTelemetryErrorEvent(t,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(t,r,n,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(t=>t.dispose()))}};iy.BaseTelemetryReporter=y0});var gw=Ld(oy=>{"use strict";Object.defineProperty(oy,"__esModule",{value:!0});oy.BaseTelemetrySender=void 0;var Pm;(function(e){e[e.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",e[e.INSTANTIATING=1]="INSTANTIATING",e[e.INSTANTIATED=2]="INSTANTIATED"})(Pm||(Pm={}));var S0=class{constructor(t,r){this._instantiationStatus=Pm.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=r,this._key=t}sendEventData(t,r){if(!this._telemetryClient){this._instantiationStatus!==Pm.INSTANTIATED&&this._eventQueue.push({eventName:t,data:r});return}this._telemetryClient.logEvent(t,r)}sendErrorData(t,r){if(!this._telemetryClient){this._instantiationStatus!==Pm.INSTANTIATED&&this._exceptionQueue.push({exception:t,data:r});return}let n={stack:t.stack,message:t.message,name:t.name};if(r){let s=r.properties||r;r.properties={...s,...n}}else r={properties:n};this._telemetryClient.logEvent("unhandlederror",r)}async flush(){var t;return(t=this._telemetryClient)==null?void 0:t.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:t,data:r})=>this.sendEventData(t,r)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:t,data:r})=>this.sendErrorData(t,r)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===Pm.NOT_INSTANTIATED&&(this._instantiationStatus=Pm.INSTANTIATING,this._clientFactory(this._key).then(t=>{this._telemetryClient=t,this._instantiationStatus=Pm.INSTANTIATED,this._flushQueues()}).catch(t=>{console.error(t),this._instantiationStatus=Pm.INSTANTIATED}))}};oy.BaseTelemetrySender=S0});var ww=Ld(Am=>{"use strict";var GN=Am&&Am.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),VN=Am&&Am.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),E0=Am&&Am.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&GN(t,e,r);return VN(t,e),t};Object.defineProperty(Am,"__esModule",{value:!0});var KN=E0(require("https")),w0=E0(require("os")),sy=E0(require("vscode")),WN=fw(),JN=hw(),ZN=_w(),XN=gw(),yw=g0();function Sw(){return{sendPOST:(t,r)=>{let n={method:"POST",headers:{...t.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(t.data)}};try{let s=KN.request(t.urlString,n,u=>{u.on("data",function(h){r(u.statusCode??200,u.headers,h.toString())}),u.on("error",function(){r(0,{})})});s.write(t.data,u=>{u&&r(0,{})}),s.end()}catch{r(0,{})}}}}var b0=class extends ZN.BaseTelemetryReporter{constructor(t,r){let n=h=>(0,JN.appInsightsClientFactory)(h,sy.env.machineId,sy.env.sessionId,Sw(),r);yw.TelemetryUtil.shouldUseOneDataSystemSDK(t)&&(n=h=>(0,WN.oneDataSystemClientFactory)(h,sy,Sw()));let s={release:w0.release(),platform:w0.platform(),architecture:w0.arch()},u=new XN.BaseTelemetrySender(t,n);if(t&&t.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(u,sy,{additionalCommonProperties:yw.TelemetryUtil.getAdditionalCommonProperties(s)})}};Am.default=b0});var bb=Ld((s1,E_)=>{"use strict";var ID=typeof Buffer<"u",gb=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,yb=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function Sb(e,t,r){r==null&&t!==null&&typeof t=="object"&&(r=t,t=void 0),ID&&Buffer.isBuffer(e)&&(e=e.toString()),e&&e.charCodeAt(0)===65279&&(e=e.slice(1));let n=JSON.parse(e,t);if(n===null||typeof n!="object")return n;let s=r&&r.protoAction||"error",u=r&&r.constructorAction||"error";if(s==="ignore"&&u==="ignore")return n;if(s!=="ignore"&&u!=="ignore"){if(gb.test(e)===!1&&yb.test(e)===!1)return n}else if(s!=="ignore"&&u==="ignore"){if(gb.test(e)===!1)return n}else if(yb.test(e)===!1)return n;return wb(n,{protoAction:s,constructorAction:u,safe:r&&r.safe})}function wb(e,{protoAction:t="error",constructorAction:r="error",safe:n}={}){let s=[e];for(;s.length;){let u=s;s=[];for(let h of u){if(t!=="ignore"&&Object.prototype.hasOwnProperty.call(h,"__proto__")){if(n===!0)return null;if(t==="error")throw new SyntaxError("Object contains forbidden prototype property");delete h.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(h,"constructor")&&Object.prototype.hasOwnProperty.call(h.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete h.constructor}for(let S in h){let I=h[S];I&&typeof I=="object"&&s.push(I)}}}return e}function A0(e,t,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return Sb(e,t,r)}finally{Error.stackTraceLimit=n}}function ND(e,t){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return Sb(e,t,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}E_.exports=A0;E_.exports.default=A0;E_.exports.parse=A0;E_.exports.safeParse=ND;E_.exports.scan=wb});var Gk={};$S(Gk,{activate:()=>Hk,deactivate:()=>zk});module.exports=lN(Gk);var OI=require("vscode");var Aw=require("vscode");var D0={};$S(D0,{action:()=>fN,diffView:()=>tD,storeApiKey:()=>dN,work:()=>rD});function fN(e){return t=>{typeof t=="function"&&t()}}var c0=require("vscode");function dN({ext:e,log:t}){return async(r,n)=>{let s=await c0.window.showInputBox({prompt:`Enter the ${n}`});s&&(t.info(n,{event:"action.key"}),await e.secrets.store(r,s),c0.window.showInformationMessage(`${n} stored successfully`))}}var xw=require("vscode");var ph=require("vscode"),ON=u0(ZS());var h0=require("crypto");var XS="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var PN=128,fh,dh;function QS(e){!fh||fh.length<e?(fh=Buffer.allocUnsafe(e*PN),h0.webcrypto.getRandomValues(fh),dh=0):dh+e>fh.length&&(h0.webcrypto.getRandomValues(fh),dh=0),dh+=e}function AN(e){return QS(e|=0),fh.subarray(dh-e,dh)}function RN(e,t,r){let n=(2<<31-Math.clz32(e.length-1|1))-1,s=Math.ceil(1.6*n*t/e.length);return(u=t)=>{let h="";for(;;){let S=r(s),I=s;for(;I--;)if(h+=e[S[I]&n]||"",h.length>=u)return h}}}function ew(e,t=21){return RN(e,t,AN)}function tw(e=21){QS(e|=0);let t="";for(let r=dh-e;r<dh;r++)t+=XS[fh[r]&63];return t}var Fd=require("vscode"),Zg="multicoder",rw,nw,Wg=(nw=(rw=Fd.workspace.workspaceFolders)==null?void 0:rw[0])==null?void 0:nw.uri,Jg=new Map;function kN(e){return e.path.split("/").pop()}function Af(e){if(e.scheme==Zg)return e.path=="/"?"./":e.path.slice(1);let t=Fd.workspace.getWorkspaceFolder(e);if(t){let u="";return String(t.uri)!==String(e)&&(u=Fd.workspace.asRelativePath(e,!1).replace(/\\/g,"/")),String(t.uri)!==String(Wg)&&(u=".folders/"+kN(t.uri)+(u?"/"+u:"")),u||(u="."),u}if(e.scheme==="untitled")return".untitled/"+e.path;let r=e.path.split("/"),n=r.pop(),s=r.pop();return Jg.has(s)||Jg.set(s,Fd.Uri.joinPath(e,"../")),".external/"+s+"/"+n}function Da(e,t){return(e=="."||e=="./")&&(e=""),e=e.startsWith("/")?e:"/"+e,Fd.Uri.from({scheme:Zg,path:e,authority:t})}function $u(e){let[t,r,...n]=e.path.split("/");if(r==".multicoder")return e.with({scheme:"file",authority:""});if(r==".untitled")return Fd.Uri.from({scheme:"untitled",path:n.join("/")});if(r==".external"){let s=n.shift();if(Jg.has(s))return Fd.Uri.joinPath(Jg.get(s),n.join("/"));throw new Error("Unknown external directory: "+s)}if(r==".folders"){let s=n.shift();for(let u of Fd.workspace.workspaceFolders||[])if(u.uri.path.endsWith("/"+s))return Fd.Uri.joinPath(u.uri,n.join("/"));throw new Error("Unknown workspace folder: "+s)}if(Wg)return e.path?Fd.Uri.joinPath(Wg,e.path):Wg;throw new Error("Cannot find source Uri")}var{fs:aw}=ph.workspace,MN=ew("1234567890abcdef",10);function Xg(){return MN()}function Qg(){let e=[];for(let t of ph.window.tabGroups.all.flatMap(r=>r.tabs))t.input instanceof ph.TabInputText&&e.push(t.input.uri);return e}async function vh(e){return new TextDecoder().decode(await aw.readFile(e))}async function iw(e,t){return await aw.writeFile(e,new TextEncoder().encode(t))}var bw=u0(ww()),QN="InstrumentationKey=4a0957be-8ce1-4335-8aa5-1fb742355aa5;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com/;LiveEndpoint=https://westeurope.livediagnostics.monitor.azure.com/;ApplicationId=b0fce7b4-deeb-43b7-aa17-e5024c6c504c";function eD(e){return{logUsage(t,r){e.sendTelemetryEvent(t,r)},logError(t,r={}){if(t&&typeof t=="object"){let{message:n,stack:s}=t,u=String(t.name||"error").toLowerCase(),h=String(t);e.sendTelemetryErrorEvent(u,{...t,...r,message:n,stack:s,text:h})}else e.sendTelemetryErrorEvent(String(t).toLowerCase().replace(/\W+/g,"-"),r)}}}function Ew(e){let t=new bw.default(QN),r=eD(t);e.telemetry=r,r.logUsage("activated"),e.ext.subscriptions.push(t)}var Tw=require("vscode");function Iw(e){let t=Tw.window.createOutputChannel("Multicoder",{log:!0});function r(s){if(!s||typeof s!="object")return;let{event:u,...h}=s,S=Object.entries(h).map(([I,D])=>`
    ${I}: ${D}`);S.length&&t.trace(S.join(""))}function n(s){let u={};return s!=null&&s.model&&(u.modelId=s.model.modelId,u.modelProvider=s.model.provider),u}e.log={error(s,u={}){t.error(s),e.telemetry.logError(s,{...n(this.context),...u}),r(u)},warn(s,u={}){t.warn((u!=null&&u.event?`[${u.event}] `:"")+s),e.telemetry.logUsage((u==null?void 0:u.event)||"warning",{text:s,...n(this.context),...u}),r(u)},info(s,u={}){t.info((u!=null&&u.event?`[${u.event}] `:"")+s),e.telemetry.logUsage((u==null?void 0:u.event)||"info",{text:s,...n(this.context),...u}),r(u)},context:null},e.ext.subscriptions.push(t)}var cn=require("vscode");var{fs:tg}=cn.workspace,Lv=new Map,Yh=new Map,y_=new Map;function Dw(e){let t=new T0,r=cn.workspace.registerFileSystemProvider(Zg,t,{isCaseSensitive:!0,isReadonly:!1});e.ext.subscriptions.push(r)}function xl(e){return e.authority+e.path}async function Nw(e){try{return await tg.stat(e)}catch{}}function rg(e){let t=e?cn.FileType.Directory:cn.FileType.File,r=Date.now();return{type:t,ctime:r,mtime:r,size:0,content:null}}var T0=class{async stat(t){if(t.query){if(y_.has(t.query))return y_.get(t.query);throw cn.FileSystemError.FileNotFound(t)}let r=Lv.get(xl(t));if(!r&&t.path.startsWith("/.multicoder"))throw cn.FileSystemError.FileNotFound(t);if(!r)return await tg.stat($u(t));if(!r.type)throw cn.FileSystemError.FileNotFound(t);return r}async readFile(t){if(t.query){if(y_.has(t.query))return y_.get(t.query).content;throw cn.FileSystemError.FileNotFound(t)}let r=Lv.get(xl(t));if(!r&&t.path.startsWith("/.multicoder"))throw cn.FileSystemError.FileNotFound(t);if(!r)return await tg.readFile($u(t));if(r.type&cn.FileType.Directory)throw cn.FileSystemError.FileIsADirectory(t);if(!r.type)throw cn.FileSystemError.FileNotFound(t);return r.content}async writeFile(t,r,n){if(t.query)throw cn.FileSystemError.NoPermissions;let s=Lv.get(xl(t)),u=!!(s!=null&&s.type);if(!s&&!t.path.startsWith("/.multicoder")&&(s=await Nw($u(t)),u=!!s),s||(s=rg()),s.type&cn.FileType.Directory)throw cn.FileSystemError.FileIsADirectory(t);if(!u&&!n.create)throw cn.FileSystemError.FileNotFound(t);if(u&&n.create&&!n.overwrite)throw cn.FileSystemError.FileExists(t);s.mtime=Date.now(),s.content=r,s.size=r.length,Lv.set(xl(t),s),Yh.has(xl(t))&&this._emitter.fire([{type:cn.FileChangeType.Changed,uri:t}])}async readDirectory(t){if(t.query)throw cn.FileSystemError.NoPermissions;let r=new Map,n=null;try{if(!t.path.startsWith("/.multicoder")){let s=$u(t),u=await tg.stat(s),h=await tg.readDirectory($u(t));for(let[S,I]of h)r.set(S,I)}}catch(s){n=s}for(let[s,u]of Lv){let h=s.split("/"),S=h.pop();h.join("/")===xl(t)&&(u.type?r.set(S,u.type):r.has(S)&&r.delete(S))}if(n&&r.size==0&&!t.path.startsWith("/.multicoder"))throw n;return Array.from(r.entries())}async delete(t,r){if(t.query)throw cn.FileSystemError.NoPermissions;let n=Lv.get(xl(t)),s=!!(n!=null&&n.type);if(!n&&!t.path.startsWith("/.multicoder")&&(n=await Nw($u(t)),s=!!n),!s)throw cn.FileSystemError.FileNotFound(t);n||(n=rg()),n.type=0,n.content=null,n.size=0,Lv.set(xl(t),n),Yh.has(xl(t))&&this._emitter.fire([{type:cn.FileChangeType.Deleted,uri:t}])}rename(t,r,n){}async createDirectory(t){if(t.query)throw cn.FileSystemError.NoPermissions;let r=rg(!0);Lv.set(xl(t),r),Yh.has(xl(t))&&this._emitter.fire([{type:cn.FileChangeType.Created,uri:t}])}_emitter=new cn.EventEmitter;onDidChangeFile=this._emitter.event;watch(t,r){let n={},s=Yh.get(xl(t))||new Set;return s.add(n),Yh.set(xl(t),s),new cn.Disposable(()=>{s.delete(n),s.size||Yh.set(xl(t),null)})}},I0=new Map;function Cw(){Lv=new Map,Yh=new Map,y_=new Map,I0=new Map;let e=rg();e.content=new Uint8Array,e.permissions=cn.FilePermission.Readonly,Lv.set("/~empty",e)}function N0(e,t){let r=I0.get(t);if(!r){let n=rg();n.content=new TextEncoder().encode(t),n.size=n.content.length,n.permissions=cn.FilePermission.Readonly,r=tw(),I0.set(t,r),y_.set(r,n)}return Da(e,"snapshot").with({query:r})}async function S_(e,t){return new Promise(r=>{let n=!1,s=null;function u(){n||(n=!0,s==null||s.dispose(),r())}t&&(s=t.onCancellationRequested(u)),setTimeout(u,e*1e3)})}function tD(e){return async(t,r,n)=>{var D,F;let s=e.recent.get(n),u=t.split("/").pop();if(!s)return;let h=(F=(D=s.shared)==null?void 0:D.edits)==null?void 0:F.find(H=>H.id===r);if(!h)return;let S=N0(t,h.before),I=N0(t,h.after);await xw.commands.executeCommand("vscode.diff",S,I,`${u} (Multicoder)`),e.log.info(u,{event:"action.diff"})}}var NO=require("vscode");async function Pw(){}function rD(e){return()=>{Pw()}}function Rw(e){Object.entries(D0).forEach(([t,r])=>{let n=Aw.commands.registerCommand(`multicoder.${t}`,r(e));e.ext.subscriptions.push(n)})}var zv=require("vscode");var kw="vercel.ai.error",nD=Symbol.for(kw),Ow,aD=class Mw extends Error{constructor({name:t,message:r,cause:n}){super(r),this[Ow]=!0,this.name=t,this.cause=n}static isInstance(t){return Mw.hasMarker(t,kw)}static hasMarker(t,r){let n=Symbol.for(r);return t!=null&&typeof t=="object"&&n in t&&typeof t[n]=="boolean"&&t[n]===!0}};Ow=nD;var Ft=aD,Lw="AI_APICallError",Fw=`vercel.ai.error.${Lw}`,iD=Symbol.for(Fw),Uw,Pl=class extends Ft{constructor({message:e,url:t,requestBodyValues:r,statusCode:n,responseHeaders:s,responseBody:u,cause:h,isRetryable:S=n!=null&&(n===408||n===409||n===429||n>=500),data:I}){super({name:Lw,message:e,cause:h}),this[Uw]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=s,this.responseBody=u,this.isRetryable=S,this.data=I}static isInstance(e){return Ft.hasMarker(e,Fw)}};Uw=iD;var jw="AI_EmptyResponseBodyError",Yw=`vercel.ai.error.${jw}`,oD=Symbol.for(Yw),$w,x0=class extends Ft{constructor({message:e="Empty response body"}={}){super({name:jw,message:e}),this[$w]=!0}static isInstance(e){return Ft.hasMarker(e,Yw)}};$w=oD;function mh(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var qw="AI_InvalidArgumentError",Bw=`vercel.ai.error.${qw}`,sD=Symbol.for(Bw),Hw,zw=class extends Ft{constructor({message:e,cause:t,argument:r}){super({name:qw,message:e,cause:t}),this[Hw]=!0,this.argument=r}static isInstance(e){return Ft.hasMarker(e,Bw)}};Hw=sD;var Gw="AI_InvalidPromptError",Vw=`vercel.ai.error.${Gw}`,uD=Symbol.for(Vw),Kw,Fv=class extends Ft{constructor({prompt:e,message:t,cause:r}){super({name:Gw,message:`Invalid prompt: ${t}`,cause:r}),this[Kw]=!0,this.prompt=e}static isInstance(e){return Ft.hasMarker(e,Vw)}};Kw=uD;var Ww="AI_InvalidResponseDataError",Jw=`vercel.ai.error.${Ww}`,cD=Symbol.for(Jw),Zw,ng=class extends Ft{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:Ww,message:t}),this[Zw]=!0,this.data=e}static isInstance(e){return Ft.hasMarker(e,Jw)}};Zw=cD;var Xw="AI_JSONParseError",Qw=`vercel.ai.error.${Xw}`,lD=Symbol.for(Qw),eb,w_=class extends Ft{constructor({text:e,cause:t}){super({name:Xw,message:`JSON parsing failed: Text: ${e}.
Error message: ${mh(t)}`,cause:t}),this[eb]=!0,this.text=e}static isInstance(e){return Ft.hasMarker(e,Qw)}};eb=lD;var tb="AI_LoadAPIKeyError",rb=`vercel.ai.error.${tb}`,fD=Symbol.for(rb),nb,b_=class extends Ft{constructor({message:e}){super({name:tb,message:e}),this[nb]=!0}static isInstance(e){return Ft.hasMarker(e,rb)}};nb=fD;var dD="AI_LoadSettingError",pD=`vercel.ai.error.${dD}`,vD=Symbol.for(pD),mD;mD=vD;var hD="AI_NoContentGeneratedError",_D=`vercel.ai.error.${hD}`,gD=Symbol.for(_D),yD;yD=gD;var ab="AI_NoSuchModelError",ib=`vercel.ai.error.${ab}`,SD=Symbol.for(ib),ob,P0=class extends Ft{constructor({errorName:e=ab,modelId:t,modelType:r,message:n=`No such ${r}: ${t}`}){super({name:e,message:n}),this[ob]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return Ft.hasMarker(e,ib)}};ob=SD;var sb="AI_TooManyEmbeddingValuesForCallError",ub=`vercel.ai.error.${sb}`,wD=Symbol.for(ub),cb,lb=class extends Ft{constructor(e){super({name:sb,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[cb]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return Ft.hasMarker(e,ub)}};cb=wD;var fb="AI_TypeValidationError",db=`vercel.ai.error.${fb}`,bD=Symbol.for(db),pb,ED=class C0 extends Ft{constructor({value:t,cause:r}){super({name:fb,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${mh(r)}`,cause:r}),this[pb]=!0,this.value=t}static isInstance(t){return Ft.hasMarker(t,db)}static wrap({value:t,cause:r}){return C0.isInstance(r)&&r.value===t?r:new C0({value:t,cause:r})}};pb=bD;var Rm=ED,vb="AI_UnsupportedFunctionalityError",mb=`vercel.ai.error.${vb}`,TD=Symbol.for(mb),hb,Xn=class extends Ft{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:vb,message:t}),this[hb]=!0,this.functionality=e}static isInstance(e){return Ft.hasMarker(e,mb)}};hb=TD;var _b=(e,t=21)=>(r=t)=>{let n="",s=r|0;for(;s--;)n+=e[Math.random()*e.length|0];return n};var py=u0(bb(),1);var DD=Object.defineProperty,CD=(e,t,r)=>t in e?DD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uy=(e,t,r)=>CD(e,typeof t!="symbol"?t+"":t,r),cy=class extends Error{constructor(t,r){super(t),uy(this,"type"),uy(this,"field"),uy(this,"value"),uy(this,"line"),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function R0(e){}function Eb(e){let{onEvent:t=R0,onError:r=R0,onRetry:n=R0,onComment:s}=e,u="",h=!0,S,I="",D="";function F(Q){let ne=h?Q.replace(/^\xEF\xBB\xBF/,""):Q,[ce,ge]=xD(`${u}${ne}`);for(let Ue of ce)H(Ue);u=ge,h=!1}function H(Q){if(Q===""){me();return}if(Q.startsWith(":")){s&&s(Q.slice(Q.startsWith(": ")?2:1));return}let ne=Q.indexOf(":");if(ne!==-1){let ce=Q.slice(0,ne),ge=Q[ne+1]===" "?2:1,Ue=Q.slice(ne+ge);ie(ce,Ue,Q);return}ie(Q,"",Q)}function ie(Q,ne,ce){switch(Q){case"event":D=ne;break;case"data":I=`${I}${ne}
`;break;case"id":S=ne.includes("\0")?void 0:ne;break;case"retry":/^\d+$/.test(ne)?n(parseInt(ne,10)):r(new cy(`Invalid \`retry\` value: "${ne}"`,{type:"invalid-retry",value:ne,line:ce}));break;default:r(new cy(`Unknown field "${Q.length>20?`${Q.slice(0,20)}\u2026`:Q}"`,{type:"unknown-field",field:Q,value:ne,line:ce}));break}}function me(){I.length>0&&t({id:S,event:D||void 0,data:I.endsWith(`
`)?I.slice(0,-1):I}),S=void 0,I="",D=""}function re(Q={}){u&&Q.consume&&H(u),S=void 0,I="",D="",u=""}return{feed:F,reset:re}}function xD(e){let t=[],r="",n=e.length;for(let s=0;s<n;s++){let u=e[s];u==="\r"&&e[s+1]===`
`?(t.push(r),r="",s++):u==="\r"||u===`
`?(t.push(r),r=""):r+=u}return[t,r]}var ly=class extends TransformStream{constructor({onError:t,onRetry:r,onComment:n}={}){let s;super({start(u){s=Eb({onEvent:h=>{u.enqueue(h)},onError(h){t==="terminate"?u.error(h):typeof t=="function"&&t(h)},onRetry:r,onComment:n})},transform(u){s.feed(u)}})}};function Ud(...e){return e.reduce((t,r)=>({...t,...r??{}}),{})}function Tb(e){return new ReadableStream({async pull(t){try{let{value:r,done:n}=await e.next();n?t.close():t.enqueue(r)}catch(r){t.error(r)}},cancel(){}})}async function Ib(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function fy(e){let t={};return e.headers.forEach((r,n)=>{t[n]=r}),t}var qp=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let s=_b(r,t);if(e==null)return s;if(r.includes(n))throw new zw({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return u=>`${e}${n}${s(u)}`},km=qp();function Nb(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function PD(e){return Object.fromEntries(Object.entries(e).filter(([t,r])=>r!=null))}function ag(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function dy({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:n}){if(typeof e=="string")return e;if(e!=null)throw new b_({message:`${n} API key must be a string.`});if(typeof process>"u")throw new b_({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(e=process.env[t],e==null)throw new b_({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new b_({message:`${n} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var ig=Symbol.for("vercel.ai.validator");function AD(e){return{[ig]:!0,validate:e}}function RD(e){return typeof e=="object"&&e!==null&&ig in e&&e[ig]===!0&&"validate"in e}function kD(e){return RD(e)?e:OD(e)}function OD(e){return AD(t=>{let r=e.safeParse(t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}})}function MD({value:e,schema:t}){let r=hh({value:e,schema:t});if(!r.success)throw Rm.wrap({value:e,cause:r.error});return r.value}function hh({value:e,schema:t}){let r=kD(t);try{if(r.validate==null)return{success:!0,value:e};let n=r.validate(e);return n.success?n:{success:!1,error:Rm.wrap({value:e,cause:n.error})}}catch(n){return{success:!1,error:Rm.wrap({value:e,cause:n})}}}function LD({text:e,schema:t}){try{let r=py.default.parse(e);return t==null?r:MD({value:r,schema:t})}catch(r){throw w_.isInstance(r)||Rm.isInstance(r)?r:new w_({text:e,cause:r})}}function Uv({text:e,schema:t}){try{let r=py.default.parse(e);if(t==null)return{success:!0,value:r,rawValue:r};let n=hh({value:r,schema:t});return n.success?{...n,rawValue:r}:n}catch(r){return{success:!1,error:w_.isInstance(r)?r:new w_({text:e,cause:r})}}}function k0(e){try{return py.default.parse(e),!0}catch{return!1}}var FD=()=>globalThis.fetch,Rf=async({url:e,headers:t,body:r,failedResponseHandler:n,successfulResponseHandler:s,abortSignal:u,fetch:h})=>UD({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:s,abortSignal:u,fetch:h}),UD=async({url:e,headers:t={},body:r,successfulResponseHandler:n,failedResponseHandler:s,abortSignal:u,fetch:h=FD()})=>{try{let S=await h(e,{method:"POST",headers:PD(t),body:r.content,signal:u}),I=fy(S);if(!S.ok){let D;try{D=await s({response:S,url:e,requestBodyValues:r.values})}catch(F){throw ag(F)||Pl.isInstance(F)?F:new Pl({message:"Failed to process error response",cause:F,statusCode:S.status,url:e,responseHeaders:I,requestBodyValues:r.values})}throw D.value}try{return await n({response:S,url:e,requestBodyValues:r.values})}catch(D){throw D instanceof Error&&(ag(D)||Pl.isInstance(D))?D:new Pl({message:"Failed to process successful response",cause:D,statusCode:S.status,url:e,responseHeaders:I,requestBodyValues:r.values})}}catch(S){if(ag(S))throw S;if(S instanceof TypeError&&S.message==="fetch failed"){let I=S.cause;if(I!=null)throw new Pl({message:`Cannot connect to API: ${I.message}`,cause:I,url:e,requestBodyValues:r.values,isRetryable:!0})}throw S}};async function Db(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var vy=({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:n,url:s,requestBodyValues:u})=>{let h=await n.text(),S=fy(n);if(h.trim()==="")return{responseHeaders:S,value:new Pl({message:n.statusText,url:s,requestBodyValues:u,statusCode:n.status,responseHeaders:S,responseBody:h,isRetryable:r==null?void 0:r(n)})};try{let I=LD({text:h,schema:e});return{responseHeaders:S,value:new Pl({message:t(I),url:s,requestBodyValues:u,statusCode:n.status,responseHeaders:S,responseBody:h,data:I,isRetryable:r==null?void 0:r(n,I)})}}catch{return{responseHeaders:S,value:new Pl({message:n.statusText,url:s,requestBodyValues:u,statusCode:n.status,responseHeaders:S,responseBody:h,isRetryable:r==null?void 0:r(n)})}}},T_=e=>async({response:t})=>{let r=fy(t);if(t.body==null)throw new x0({});return{responseHeaders:r,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new ly).pipeThrough(new TransformStream({transform({data:n},s){n!=="[DONE]"&&s.enqueue(Uv({text:n,schema:e}))}}))}};var jv=e=>async({response:t,url:r,requestBodyValues:n})=>{let s=await t.text(),u=Uv({text:s,schema:e}),h=fy(t);if(!u.success)throw new Pl({message:"Invalid JSON response",cause:u.error,statusCode:t.status,responseHeaders:h,responseBody:s,url:r,requestBodyValues:n});return{responseHeaders:h,value:u.value,rawValue:u.rawValue}};var{btoa:jD,atob:YD}=globalThis;function Cb(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=YD(t);return Uint8Array.from(r,n=>n.codePointAt(0))}function $h(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return jD(t)}function my(e){return e==null?void 0:e.replace(/\/$/,"")}var gn;(function(e){e.assertEqual=s=>s;function t(s){}e.assertIs=t;function r(s){throw new Error}e.assertNever=r,e.arrayToEnum=s=>{let u={};for(let h of s)u[h]=h;return u},e.getValidEnumValues=s=>{let u=e.objectKeys(s).filter(S=>typeof s[s[S]]!="number"),h={};for(let S of u)h[S]=s[S];return e.objectValues(h)},e.objectValues=s=>e.objectKeys(s).map(function(u){return s[u]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let u=[];for(let h in s)Object.prototype.hasOwnProperty.call(s,h)&&u.push(h);return u},e.find=(s,u)=>{for(let h of s)if(u(h))return h},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,u=" | "){return s.map(h=>typeof h=="string"?`'${h}'`:h).join(u)}e.joinValues=n,e.jsonStringifyReplacer=(s,u)=>typeof u=="bigint"?u.toString():u})(gn||(gn={}));var M0;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(M0||(M0={}));var St=gn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Mm=e=>{switch(typeof e){case"undefined":return St.undefined;case"string":return St.string;case"number":return isNaN(e)?St.nan:St.number;case"boolean":return St.boolean;case"function":return St.function;case"bigint":return St.bigint;case"symbol":return St.symbol;case"object":return Array.isArray(e)?St.array:e===null?St.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?St.promise:typeof Map<"u"&&e instanceof Map?St.map:typeof Set<"u"&&e instanceof Set?St.set:typeof Date<"u"&&e instanceof Date?St.date:St.object;default:return St.unknown}},$e=gn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),$D=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),kc=class e extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){let r=t||function(u){return u.message},n={_errors:[]},s=u=>{for(let h of u.issues)if(h.code==="invalid_union")h.unionErrors.map(s);else if(h.code==="invalid_return_type")s(h.returnTypeError);else if(h.code==="invalid_arguments")s(h.argumentsError);else if(h.path.length===0)n._errors.push(r(h));else{let S=n,I=0;for(;I<h.path.length;){let D=h.path[I];I===h.path.length-1?(S[D]=S[D]||{_errors:[]},S[D]._errors.push(r(h))):S[D]=S[D]||{_errors:[]},S=S[D],I++}}};return s(this),n}static assert(t){if(!(t instanceof e))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,gn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){let r={},n=[];for(let s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};kc.create=e=>new kc(e);var D_=(e,t)=>{let r;switch(e.code){case $e.invalid_type:e.received===St.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case $e.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,gn.jsonStringifyReplacer)}`;break;case $e.unrecognized_keys:r=`Unrecognized key(s) in object: ${gn.joinValues(e.keys,", ")}`;break;case $e.invalid_union:r="Invalid input";break;case $e.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${gn.joinValues(e.options)}`;break;case $e.invalid_enum_value:r=`Invalid enum value. Expected ${gn.joinValues(e.options)}, received '${e.received}'`;break;case $e.invalid_arguments:r="Invalid function arguments";break;case $e.invalid_return_type:r="Invalid function return type";break;case $e.invalid_date:r="Invalid date";break;case $e.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:gn.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case $e.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case $e.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case $e.custom:r="Invalid input";break;case $e.invalid_intersection_types:r="Intersection results could not be merged";break;case $e.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case $e.not_finite:r="Number must be finite";break;default:r=t.defaultError,gn.assertNever(e)}return{message:r}},Ab=D_;function qD(e){Ab=e}function hy(){return Ab}var _y=e=>{let{data:t,path:r,errorMaps:n,issueData:s}=e,u=[...r,...s.path||[]],h={...s,path:u};if(s.message!==void 0)return{...s,path:u,message:s.message};let S="",I=n.filter(D=>!!D).slice().reverse();for(let D of I)S=D(h,{data:t,defaultError:S}).message;return{...s,path:u,message:S}},BD=[];function it(e,t){let r=hy(),n=_y({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===D_?void 0:D_].filter(s=>!!s)});e.common.issues.push(n)}var qu=class e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){let n=[];for(let s of r){if(s.status==="aborted")return Sr;s.status==="dirty"&&t.dirty(),n.push(s.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){let n=[];for(let s of r){let u=await s.key,h=await s.value;n.push({key:u,value:h})}return e.mergeObjectSync(t,n)}static mergeObjectSync(t,r){let n={};for(let s of r){let{key:u,value:h}=s;if(u.status==="aborted"||h.status==="aborted")return Sr;u.status==="dirty"&&t.dirty(),h.status==="dirty"&&t.dirty(),u.value!=="__proto__"&&(typeof h.value<"u"||s.alwaysSet)&&(n[u.value]=h.value)}return{status:t.value,value:n}}},Sr=Object.freeze({status:"aborted"}),N_=e=>({status:"dirty",value:e}),Oc=e=>({status:"valid",value:e}),L0=e=>e.status==="aborted",F0=e=>e.status==="dirty",qh=e=>e.status==="valid",ug=e=>typeof Promise<"u"&&e instanceof Promise;function gy(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function Rb(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}var Mt;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Mt||(Mt={}));var og,sg,jd=class{constructor(t,r,n,s){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},xb=(e,t)=>{if(qh(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new kc(e.common.issues);return this._error=r,this._error}}};function Fr(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:s}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(h,S)=>{var I,D;let{message:F}=e;return h.code==="invalid_enum_value"?{message:F??S.defaultError}:typeof S.data>"u"?{message:(I=F??n)!==null&&I!==void 0?I:S.defaultError}:h.code!=="invalid_type"?{message:S.defaultError}:{message:(D=F??r)!==null&&D!==void 0?D:S.defaultError}},description:s}}var Ur=class{get description(){return this._def.description}_getType(t){return Mm(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:Mm(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new qu,ctx:{common:t.parent.common,data:t.data,parsedType:Mm(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let r=this._parse(t);if(ug(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){let r=this._parse(t);return Promise.resolve(r)}parse(t,r){let n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){var n;let s={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Mm(t)},u=this._parseSync({data:t,path:s.path,parent:s});return xb(s,u)}"~validate"(t){var r,n;let s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Mm(t)};if(!this["~standard"].async)try{let u=this._parseSync({data:t,path:[],parent:s});return qh(u)?{value:u.value}:{issues:s.common.issues}}catch(u){!((n=(r=u==null?void 0:u.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:s}).then(u=>qh(u)?{value:u.value}:{issues:s.common.issues})}async parseAsync(t,r){let n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){let n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Mm(t)},s=this._parse({data:t,path:n.path,parent:n}),u=await(ug(s)?s:Promise.resolve(s));return xb(n,u)}refine(t,r){let n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,u)=>{let h=t(s),S=()=>u.addIssue({code:$e.custom,...n(s)});return typeof Promise<"u"&&h instanceof Promise?h.then(I=>I?!0:(S(),!1)):h?!0:(S(),!1)})}refinement(t,r){return this._refinement((n,s)=>t(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(t){return new kf({schema:this,typeName:ze.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Al.create(this,this._def)}nullable(){return $v.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Fm.create(this)}promise(){return yh.create(this,this._def)}or(t){return Wh.create([this,t],this._def)}and(t){return Jh.create(this,t,this._def)}transform(t){return new kf({...Fr(this._def),schema:this,typeName:ze.ZodEffects,effect:{type:"transform",transform:t}})}default(t){let r=typeof t=="function"?t:()=>t;return new t_({...Fr(this._def),innerType:this,defaultValue:r,typeName:ze.ZodDefault})}brand(){return new cg({typeName:ze.ZodBranded,type:this,...Fr(this._def)})}catch(t){let r=typeof t=="function"?t:()=>t;return new r_({...Fr(this._def),innerType:this,catchValue:r,typeName:ze.ZodCatch})}describe(t){let r=this.constructor;return new r({...this._def,description:t})}pipe(t){return lg.create(this,t)}readonly(){return n_.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},HD=/^c[^\s-]{8,}$/i,zD=/^[0-9a-z]+$/,GD=/^[0-9A-HJKMNP-TV-Z]{26}$/i,VD=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,KD=/^[a-z0-9_-]{21}$/i,WD=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,JD=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ZD=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,XD="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",O0,QD=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,eC=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,tC=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,rC=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,nC=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,aC=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,kb="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",iC=new RegExp(`^${kb}$`);function Ob(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function oC(e){return new RegExp(`^${Ob(e)}$`)}function Mb(e){let t=`${kb}T${Ob(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function sC(e,t){return!!((t==="v4"||!t)&&QD.test(e)||(t==="v6"||!t)&&tC.test(e))}function uC(e,t){if(!WD.test(e))return!1;try{let[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||!s.typ||!s.alg||t&&s.alg!==t)}catch{return!1}}function cC(e,t){return!!((t==="v4"||!t)&&eC.test(e)||(t==="v6"||!t)&&rC.test(e))}var _h=class e extends Ur{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==St.string){let u=this._getOrReturnCtx(t);return it(u,{code:$e.invalid_type,expected:St.string,received:u.parsedType}),Sr}let n=new qu,s;for(let u of this._def.checks)if(u.kind==="min")t.data.length<u.value&&(s=this._getOrReturnCtx(t,s),it(s,{code:$e.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),n.dirty());else if(u.kind==="max")t.data.length>u.value&&(s=this._getOrReturnCtx(t,s),it(s,{code:$e.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),n.dirty());else if(u.kind==="length"){let h=t.data.length>u.value,S=t.data.length<u.value;(h||S)&&(s=this._getOrReturnCtx(t,s),h?it(s,{code:$e.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}):S&&it(s,{code:$e.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}),n.dirty())}else if(u.kind==="email")ZD.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"email",code:$e.invalid_string,message:u.message}),n.dirty());else if(u.kind==="emoji")O0||(O0=new RegExp(XD,"u")),O0.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"emoji",code:$e.invalid_string,message:u.message}),n.dirty());else if(u.kind==="uuid")VD.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"uuid",code:$e.invalid_string,message:u.message}),n.dirty());else if(u.kind==="nanoid")KD.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"nanoid",code:$e.invalid_string,message:u.message}),n.dirty());else if(u.kind==="cuid")HD.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"cuid",code:$e.invalid_string,message:u.message}),n.dirty());else if(u.kind==="cuid2")zD.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"cuid2",code:$e.invalid_string,message:u.message}),n.dirty());else if(u.kind==="ulid")GD.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"ulid",code:$e.invalid_string,message:u.message}),n.dirty());else if(u.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),it(s,{validation:"url",code:$e.invalid_string,message:u.message}),n.dirty()}else u.kind==="regex"?(u.regex.lastIndex=0,u.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"regex",code:$e.invalid_string,message:u.message}),n.dirty())):u.kind==="trim"?t.data=t.data.trim():u.kind==="includes"?t.data.includes(u.value,u.position)||(s=this._getOrReturnCtx(t,s),it(s,{code:$e.invalid_string,validation:{includes:u.value,position:u.position},message:u.message}),n.dirty()):u.kind==="toLowerCase"?t.data=t.data.toLowerCase():u.kind==="toUpperCase"?t.data=t.data.toUpperCase():u.kind==="startsWith"?t.data.startsWith(u.value)||(s=this._getOrReturnCtx(t,s),it(s,{code:$e.invalid_string,validation:{startsWith:u.value},message:u.message}),n.dirty()):u.kind==="endsWith"?t.data.endsWith(u.value)||(s=this._getOrReturnCtx(t,s),it(s,{code:$e.invalid_string,validation:{endsWith:u.value},message:u.message}),n.dirty()):u.kind==="datetime"?Mb(u).test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{code:$e.invalid_string,validation:"datetime",message:u.message}),n.dirty()):u.kind==="date"?iC.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{code:$e.invalid_string,validation:"date",message:u.message}),n.dirty()):u.kind==="time"?oC(u).test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{code:$e.invalid_string,validation:"time",message:u.message}),n.dirty()):u.kind==="duration"?JD.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"duration",code:$e.invalid_string,message:u.message}),n.dirty()):u.kind==="ip"?sC(t.data,u.version)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"ip",code:$e.invalid_string,message:u.message}),n.dirty()):u.kind==="jwt"?uC(t.data,u.alg)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"jwt",code:$e.invalid_string,message:u.message}),n.dirty()):u.kind==="cidr"?cC(t.data,u.version)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"cidr",code:$e.invalid_string,message:u.message}),n.dirty()):u.kind==="base64"?nC.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"base64",code:$e.invalid_string,message:u.message}),n.dirty()):u.kind==="base64url"?aC.test(t.data)||(s=this._getOrReturnCtx(t,s),it(s,{validation:"base64url",code:$e.invalid_string,message:u.message}),n.dirty()):gn.assertNever(u);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(s=>t.test(s),{validation:r,code:$e.invalid_string,...Mt.errToObj(n)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Mt.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Mt.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Mt.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Mt.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Mt.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Mt.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Mt.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Mt.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Mt.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Mt.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Mt.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Mt.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Mt.errToObj(t)})}datetime(t){var r,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(r=t==null?void 0:t.offset)!==null&&r!==void 0?r:!1,local:(n=t==null?void 0:t.local)!==null&&n!==void 0?n:!1,...Mt.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Mt.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Mt.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Mt.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...Mt.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Mt.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Mt.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Mt.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Mt.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Mt.errToObj(r)})}nonempty(t){return this.min(1,Mt.errToObj(t))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};_h.create=e=>{var t;return new _h({checks:[],typeName:ze.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Fr(e)})};function lC(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,s=r>n?r:n,u=parseInt(e.toFixed(s).replace(".","")),h=parseInt(t.toFixed(s).replace(".",""));return u%h/Math.pow(10,s)}var Bh=class e extends Ur{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==St.number){let u=this._getOrReturnCtx(t);return it(u,{code:$e.invalid_type,expected:St.number,received:u.parsedType}),Sr}let n,s=new qu;for(let u of this._def.checks)u.kind==="int"?gn.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),it(n,{code:$e.invalid_type,expected:"integer",received:"float",message:u.message}),s.dirty()):u.kind==="min"?(u.inclusive?t.data<u.value:t.data<=u.value)&&(n=this._getOrReturnCtx(t,n),it(n,{code:$e.too_small,minimum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),s.dirty()):u.kind==="max"?(u.inclusive?t.data>u.value:t.data>=u.value)&&(n=this._getOrReturnCtx(t,n),it(n,{code:$e.too_big,maximum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),s.dirty()):u.kind==="multipleOf"?lC(t.data,u.value)!==0&&(n=this._getOrReturnCtx(t,n),it(n,{code:$e.not_multiple_of,multipleOf:u.value,message:u.message}),s.dirty()):u.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),it(n,{code:$e.not_finite,message:u.message}),s.dirty()):gn.assertNever(u);return{status:s.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Mt.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Mt.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Mt.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Mt.toString(r))}setLimit(t,r,n,s){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Mt.toString(s)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Mt.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Mt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Mt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Mt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Mt.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Mt.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Mt.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Mt.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Mt.toString(t)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&gn.isInteger(t.value))}get isFinite(){let t=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}};Bh.create=e=>new Bh({checks:[],typeName:ze.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Fr(e)});var Hh=class e extends Ur{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==St.bigint)return this._getInvalidInput(t);let n,s=new qu;for(let u of this._def.checks)u.kind==="min"?(u.inclusive?t.data<u.value:t.data<=u.value)&&(n=this._getOrReturnCtx(t,n),it(n,{code:$e.too_small,type:"bigint",minimum:u.value,inclusive:u.inclusive,message:u.message}),s.dirty()):u.kind==="max"?(u.inclusive?t.data>u.value:t.data>=u.value)&&(n=this._getOrReturnCtx(t,n),it(n,{code:$e.too_big,type:"bigint",maximum:u.value,inclusive:u.inclusive,message:u.message}),s.dirty()):u.kind==="multipleOf"?t.data%u.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),it(n,{code:$e.not_multiple_of,multipleOf:u.value,message:u.message}),s.dirty()):gn.assertNever(u);return{status:s.value,value:t.data}}_getInvalidInput(t){let r=this._getOrReturnCtx(t);return it(r,{code:$e.invalid_type,expected:St.bigint,received:r.parsedType}),Sr}gte(t,r){return this.setLimit("min",t,!0,Mt.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Mt.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Mt.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Mt.toString(r))}setLimit(t,r,n,s){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Mt.toString(s)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Mt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Mt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Mt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Mt.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Mt.toString(r)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};Hh.create=e=>{var t;return new Hh({checks:[],typeName:ze.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Fr(e)})};var zh=class extends Ur{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==St.boolean){let n=this._getOrReturnCtx(t);return it(n,{code:$e.invalid_type,expected:St.boolean,received:n.parsedType}),Sr}return Oc(t.data)}};zh.create=e=>new zh({typeName:ze.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Fr(e)});var Gh=class e extends Ur{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==St.date){let u=this._getOrReturnCtx(t);return it(u,{code:$e.invalid_type,expected:St.date,received:u.parsedType}),Sr}if(isNaN(t.data.getTime())){let u=this._getOrReturnCtx(t);return it(u,{code:$e.invalid_date}),Sr}let n=new qu,s;for(let u of this._def.checks)u.kind==="min"?t.data.getTime()<u.value&&(s=this._getOrReturnCtx(t,s),it(s,{code:$e.too_small,message:u.message,inclusive:!0,exact:!1,minimum:u.value,type:"date"}),n.dirty()):u.kind==="max"?t.data.getTime()>u.value&&(s=this._getOrReturnCtx(t,s),it(s,{code:$e.too_big,message:u.message,inclusive:!0,exact:!1,maximum:u.value,type:"date"}),n.dirty()):gn.assertNever(u);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Mt.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Mt.toString(r)})}get minDate(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}};Gh.create=e=>new Gh({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:ze.ZodDate,...Fr(e)});var C_=class extends Ur{_parse(t){if(this._getType(t)!==St.symbol){let n=this._getOrReturnCtx(t);return it(n,{code:$e.invalid_type,expected:St.symbol,received:n.parsedType}),Sr}return Oc(t.data)}};C_.create=e=>new C_({typeName:ze.ZodSymbol,...Fr(e)});var Vh=class extends Ur{_parse(t){if(this._getType(t)!==St.undefined){let n=this._getOrReturnCtx(t);return it(n,{code:$e.invalid_type,expected:St.undefined,received:n.parsedType}),Sr}return Oc(t.data)}};Vh.create=e=>new Vh({typeName:ze.ZodUndefined,...Fr(e)});var Kh=class extends Ur{_parse(t){if(this._getType(t)!==St.null){let n=this._getOrReturnCtx(t);return it(n,{code:$e.invalid_type,expected:St.null,received:n.parsedType}),Sr}return Oc(t.data)}};Kh.create=e=>new Kh({typeName:ze.ZodNull,...Fr(e)});var gh=class extends Ur{constructor(){super(...arguments),this._any=!0}_parse(t){return Oc(t.data)}};gh.create=e=>new gh({typeName:ze.ZodAny,...Fr(e)});var Lm=class extends Ur{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Oc(t.data)}};Lm.create=e=>new Lm({typeName:ze.ZodUnknown,...Fr(e)});var Bp=class extends Ur{_parse(t){let r=this._getOrReturnCtx(t);return it(r,{code:$e.invalid_type,expected:St.never,received:r.parsedType}),Sr}};Bp.create=e=>new Bp({typeName:ze.ZodNever,...Fr(e)});var x_=class extends Ur{_parse(t){if(this._getType(t)!==St.undefined){let n=this._getOrReturnCtx(t);return it(n,{code:$e.invalid_type,expected:St.void,received:n.parsedType}),Sr}return Oc(t.data)}};x_.create=e=>new x_({typeName:ze.ZodVoid,...Fr(e)});var Fm=class e extends Ur{_parse(t){let{ctx:r,status:n}=this._processInputParams(t),s=this._def;if(r.parsedType!==St.array)return it(r,{code:$e.invalid_type,expected:St.array,received:r.parsedType}),Sr;if(s.exactLength!==null){let h=r.data.length>s.exactLength.value,S=r.data.length<s.exactLength.value;(h||S)&&(it(r,{code:h?$e.too_big:$e.too_small,minimum:S?s.exactLength.value:void 0,maximum:h?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(it(r,{code:$e.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(it(r,{code:$e.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((h,S)=>s.type._parseAsync(new jd(r,h,r.path,S)))).then(h=>qu.mergeArray(n,h));let u=[...r.data].map((h,S)=>s.type._parseSync(new jd(r,h,r.path,S)));return qu.mergeArray(n,u)}get element(){return this._def.type}min(t,r){return new e({...this._def,minLength:{value:t,message:Mt.toString(r)}})}max(t,r){return new e({...this._def,maxLength:{value:t,message:Mt.toString(r)}})}length(t,r){return new e({...this._def,exactLength:{value:t,message:Mt.toString(r)}})}nonempty(t){return this.min(1,t)}};Fm.create=(e,t)=>new Fm({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ze.ZodArray,...Fr(t)});function I_(e){if(e instanceof Rl){let t={};for(let r in e.shape){let n=e.shape[r];t[r]=Al.create(I_(n))}return new Rl({...e._def,shape:()=>t})}else return e instanceof Fm?new Fm({...e._def,type:I_(e.element)}):e instanceof Al?Al.create(I_(e.unwrap())):e instanceof $v?$v.create(I_(e.unwrap())):e instanceof Yv?Yv.create(e.items.map(t=>I_(t))):e}var Rl=class e extends Ur{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let t=this._def.shape(),r=gn.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==St.object){let D=this._getOrReturnCtx(t);return it(D,{code:$e.invalid_type,expected:St.object,received:D.parsedType}),Sr}let{status:n,ctx:s}=this._processInputParams(t),{shape:u,keys:h}=this._getCached(),S=[];if(!(this._def.catchall instanceof Bp&&this._def.unknownKeys==="strip"))for(let D in s.data)h.includes(D)||S.push(D);let I=[];for(let D of h){let F=u[D],H=s.data[D];I.push({key:{status:"valid",value:D},value:F._parse(new jd(s,H,s.path,D)),alwaysSet:D in s.data})}if(this._def.catchall instanceof Bp){let D=this._def.unknownKeys;if(D==="passthrough")for(let F of S)I.push({key:{status:"valid",value:F},value:{status:"valid",value:s.data[F]}});else if(D==="strict")S.length>0&&(it(s,{code:$e.unrecognized_keys,keys:S}),n.dirty());else if(D!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let D=this._def.catchall;for(let F of S){let H=s.data[F];I.push({key:{status:"valid",value:F},value:D._parse(new jd(s,H,s.path,F)),alwaysSet:F in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let D=[];for(let F of I){let H=await F.key,ie=await F.value;D.push({key:H,value:ie,alwaysSet:F.alwaysSet})}return D}).then(D=>qu.mergeObjectSync(n,D)):qu.mergeObjectSync(n,I)}get shape(){return this._def.shape()}strict(t){return Mt.errToObj,new e({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var s,u,h,S;let I=(h=(u=(s=this._def).errorMap)===null||u===void 0?void 0:u.call(s,r,n).message)!==null&&h!==void 0?h:n.defaultError;return r.code==="unrecognized_keys"?{message:(S=Mt.errToObj(t).message)!==null&&S!==void 0?S:I}:{message:I}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ze.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new e({...this._def,catchall:t})}pick(t){let r={};return gn.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new e({...this._def,shape:()=>r})}omit(t){let r={};return gn.objectKeys(this.shape).forEach(n=>{t[n]||(r[n]=this.shape[n])}),new e({...this._def,shape:()=>r})}deepPartial(){return I_(this)}partial(t){let r={};return gn.objectKeys(this.shape).forEach(n=>{let s=this.shape[n];t&&!t[n]?r[n]=s:r[n]=s.optional()}),new e({...this._def,shape:()=>r})}required(t){let r={};return gn.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])r[n]=this.shape[n];else{let u=this.shape[n];for(;u instanceof Al;)u=u._def.innerType;r[n]=u}}),new e({...this._def,shape:()=>r})}keyof(){return Lb(gn.objectKeys(this.shape))}};Rl.create=(e,t)=>new Rl({shape:()=>e,unknownKeys:"strip",catchall:Bp.create(),typeName:ze.ZodObject,...Fr(t)});Rl.strictCreate=(e,t)=>new Rl({shape:()=>e,unknownKeys:"strict",catchall:Bp.create(),typeName:ze.ZodObject,...Fr(t)});Rl.lazycreate=(e,t)=>new Rl({shape:e,unknownKeys:"strip",catchall:Bp.create(),typeName:ze.ZodObject,...Fr(t)});var Wh=class extends Ur{_parse(t){let{ctx:r}=this._processInputParams(t),n=this._def.options;function s(u){for(let S of u)if(S.result.status==="valid")return S.result;for(let S of u)if(S.result.status==="dirty")return r.common.issues.push(...S.ctx.common.issues),S.result;let h=u.map(S=>new kc(S.ctx.common.issues));return it(r,{code:$e.invalid_union,unionErrors:h}),Sr}if(r.common.async)return Promise.all(n.map(async u=>{let h={...r,common:{...r.common,issues:[]},parent:null};return{result:await u._parseAsync({data:r.data,path:r.path,parent:h}),ctx:h}})).then(s);{let u,h=[];for(let I of n){let D={...r,common:{...r.common,issues:[]},parent:null},F=I._parseSync({data:r.data,path:r.path,parent:D});if(F.status==="valid")return F;F.status==="dirty"&&!u&&(u={result:F,ctx:D}),D.common.issues.length&&h.push(D.common.issues)}if(u)return r.common.issues.push(...u.ctx.common.issues),u.result;let S=h.map(I=>new kc(I));return it(r,{code:$e.invalid_union,unionErrors:S}),Sr}}get options(){return this._def.options}};Wh.create=(e,t)=>new Wh({options:e,typeName:ze.ZodUnion,...Fr(t)});var Om=e=>e instanceof Zh?Om(e.schema):e instanceof kf?Om(e.innerType()):e instanceof Xh?[e.value]:e instanceof Qh?e.options:e instanceof e_?gn.objectValues(e.enum):e instanceof t_?Om(e._def.innerType):e instanceof Vh?[void 0]:e instanceof Kh?[null]:e instanceof Al?[void 0,...Om(e.unwrap())]:e instanceof $v?[null,...Om(e.unwrap())]:e instanceof cg||e instanceof n_?Om(e.unwrap()):e instanceof r_?Om(e._def.innerType):[],yy=class e extends Ur{_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==St.object)return it(r,{code:$e.invalid_type,expected:St.object,received:r.parsedType}),Sr;let n=this.discriminator,s=r.data[n],u=this.optionsMap.get(s);return u?r.common.async?u._parseAsync({data:r.data,path:r.path,parent:r}):u._parseSync({data:r.data,path:r.path,parent:r}):(it(r,{code:$e.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Sr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,n){let s=new Map;for(let u of r){let h=Om(u.shape[t]);if(!h.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let S of h){if(s.has(S))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(S)}`);s.set(S,u)}}return new e({typeName:ze.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:s,...Fr(n)})}};function U0(e,t){let r=Mm(e),n=Mm(t);if(e===t)return{valid:!0,data:e};if(r===St.object&&n===St.object){let s=gn.objectKeys(t),u=gn.objectKeys(e).filter(S=>s.indexOf(S)!==-1),h={...e,...t};for(let S of u){let I=U0(e[S],t[S]);if(!I.valid)return{valid:!1};h[S]=I.data}return{valid:!0,data:h}}else if(r===St.array&&n===St.array){if(e.length!==t.length)return{valid:!1};let s=[];for(let u=0;u<e.length;u++){let h=e[u],S=t[u],I=U0(h,S);if(!I.valid)return{valid:!1};s.push(I.data)}return{valid:!0,data:s}}else return r===St.date&&n===St.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var Jh=class extends Ur{_parse(t){let{status:r,ctx:n}=this._processInputParams(t),s=(u,h)=>{if(L0(u)||L0(h))return Sr;let S=U0(u.value,h.value);return S.valid?((F0(u)||F0(h))&&r.dirty(),{status:r.value,value:S.data}):(it(n,{code:$e.invalid_intersection_types}),Sr)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([u,h])=>s(u,h)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Jh.create=(e,t,r)=>new Jh({left:e,right:t,typeName:ze.ZodIntersection,...Fr(r)});var Yv=class e extends Ur{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==St.array)return it(n,{code:$e.invalid_type,expected:St.array,received:n.parsedType}),Sr;if(n.data.length<this._def.items.length)return it(n,{code:$e.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Sr;!this._def.rest&&n.data.length>this._def.items.length&&(it(n,{code:$e.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let u=[...n.data].map((h,S)=>{let I=this._def.items[S]||this._def.rest;return I?I._parse(new jd(n,h,n.path,S)):null}).filter(h=>!!h);return n.common.async?Promise.all(u).then(h=>qu.mergeArray(r,h)):qu.mergeArray(r,u)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};Yv.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Yv({items:e,typeName:ze.ZodTuple,rest:null,...Fr(t)})};var Sy=class e extends Ur{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==St.object)return it(n,{code:$e.invalid_type,expected:St.object,received:n.parsedType}),Sr;let s=[],u=this._def.keyType,h=this._def.valueType;for(let S in n.data)s.push({key:u._parse(new jd(n,S,n.path,S)),value:h._parse(new jd(n,n.data[S],n.path,S)),alwaysSet:S in n.data});return n.common.async?qu.mergeObjectAsync(r,s):qu.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof Ur?new e({keyType:t,valueType:r,typeName:ze.ZodRecord,...Fr(n)}):new e({keyType:_h.create(),valueType:t,typeName:ze.ZodRecord,...Fr(r)})}},P_=class extends Ur{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==St.map)return it(n,{code:$e.invalid_type,expected:St.map,received:n.parsedType}),Sr;let s=this._def.keyType,u=this._def.valueType,h=[...n.data.entries()].map(([S,I],D)=>({key:s._parse(new jd(n,S,n.path,[D,"key"])),value:u._parse(new jd(n,I,n.path,[D,"value"]))}));if(n.common.async){let S=new Map;return Promise.resolve().then(async()=>{for(let I of h){let D=await I.key,F=await I.value;if(D.status==="aborted"||F.status==="aborted")return Sr;(D.status==="dirty"||F.status==="dirty")&&r.dirty(),S.set(D.value,F.value)}return{status:r.value,value:S}})}else{let S=new Map;for(let I of h){let D=I.key,F=I.value;if(D.status==="aborted"||F.status==="aborted")return Sr;(D.status==="dirty"||F.status==="dirty")&&r.dirty(),S.set(D.value,F.value)}return{status:r.value,value:S}}}};P_.create=(e,t,r)=>new P_({valueType:t,keyType:e,typeName:ze.ZodMap,...Fr(r)});var A_=class e extends Ur{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==St.set)return it(n,{code:$e.invalid_type,expected:St.set,received:n.parsedType}),Sr;let s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(it(n,{code:$e.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(it(n,{code:$e.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());let u=this._def.valueType;function h(I){let D=new Set;for(let F of I){if(F.status==="aborted")return Sr;F.status==="dirty"&&r.dirty(),D.add(F.value)}return{status:r.value,value:D}}let S=[...n.data.values()].map((I,D)=>u._parse(new jd(n,I,n.path,D)));return n.common.async?Promise.all(S).then(I=>h(I)):h(S)}min(t,r){return new e({...this._def,minSize:{value:t,message:Mt.toString(r)}})}max(t,r){return new e({...this._def,maxSize:{value:t,message:Mt.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}};A_.create=(e,t)=>new A_({valueType:e,minSize:null,maxSize:null,typeName:ze.ZodSet,...Fr(t)});var wy=class e extends Ur{constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==St.function)return it(r,{code:$e.invalid_type,expected:St.function,received:r.parsedType}),Sr;function n(S,I){return _y({data:S,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,hy(),D_].filter(D=>!!D),issueData:{code:$e.invalid_arguments,argumentsError:I}})}function s(S,I){return _y({data:S,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,hy(),D_].filter(D=>!!D),issueData:{code:$e.invalid_return_type,returnTypeError:I}})}let u={errorMap:r.common.contextualErrorMap},h=r.data;if(this._def.returns instanceof yh){let S=this;return Oc(async function(...I){let D=new kc([]),F=await S._def.args.parseAsync(I,u).catch(me=>{throw D.addIssue(n(I,me)),D}),H=await Reflect.apply(h,this,F);return await S._def.returns._def.type.parseAsync(H,u).catch(me=>{throw D.addIssue(s(H,me)),D})})}else{let S=this;return Oc(function(...I){let D=S._def.args.safeParse(I,u);if(!D.success)throw new kc([n(I,D.error)]);let F=Reflect.apply(h,this,D.data),H=S._def.returns.safeParse(F,u);if(!H.success)throw new kc([s(F,H.error)]);return H.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new e({...this._def,args:Yv.create(t).rest(Lm.create())})}returns(t){return new e({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,n){return new e({args:t||Yv.create([]).rest(Lm.create()),returns:r||Lm.create(),typeName:ze.ZodFunction,...Fr(n)})}},Zh=class extends Ur{get schema(){return this._def.getter()}_parse(t){let{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Zh.create=(e,t)=>new Zh({getter:e,typeName:ze.ZodLazy,...Fr(t)});var Xh=class extends Ur{_parse(t){if(t.data!==this._def.value){let r=this._getOrReturnCtx(t);return it(r,{received:r.data,code:$e.invalid_literal,expected:this._def.value}),Sr}return{status:"valid",value:t.data}}get value(){return this._def.value}};Xh.create=(e,t)=>new Xh({value:e,typeName:ze.ZodLiteral,...Fr(t)});function Lb(e,t){return new Qh({values:e,typeName:ze.ZodEnum,...Fr(t)})}var Qh=class e extends Ur{constructor(){super(...arguments),og.set(this,void 0)}_parse(t){if(typeof t.data!="string"){let r=this._getOrReturnCtx(t),n=this._def.values;return it(r,{expected:gn.joinValues(n),received:r.parsedType,code:$e.invalid_type}),Sr}if(gy(this,og,"f")||Rb(this,og,new Set(this._def.values),"f"),!gy(this,og,"f").has(t.data)){let r=this._getOrReturnCtx(t),n=this._def.values;return it(r,{received:r.data,code:$e.invalid_enum_value,options:n}),Sr}return Oc(t.data)}get options(){return this._def.values}get enum(){let t={};for(let r of this._def.values)t[r]=r;return t}get Values(){let t={};for(let r of this._def.values)t[r]=r;return t}get Enum(){let t={};for(let r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return e.create(t,{...this._def,...r})}exclude(t,r=this._def){return e.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}};og=new WeakMap;Qh.create=Lb;var e_=class extends Ur{constructor(){super(...arguments),sg.set(this,void 0)}_parse(t){let r=gn.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==St.string&&n.parsedType!==St.number){let s=gn.objectValues(r);return it(n,{expected:gn.joinValues(s),received:n.parsedType,code:$e.invalid_type}),Sr}if(gy(this,sg,"f")||Rb(this,sg,new Set(gn.getValidEnumValues(this._def.values)),"f"),!gy(this,sg,"f").has(t.data)){let s=gn.objectValues(r);return it(n,{received:n.data,code:$e.invalid_enum_value,options:s}),Sr}return Oc(t.data)}get enum(){return this._def.values}};sg=new WeakMap;e_.create=(e,t)=>new e_({values:e,typeName:ze.ZodNativeEnum,...Fr(t)});var yh=class extends Ur{unwrap(){return this._def.type}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==St.promise&&r.common.async===!1)return it(r,{code:$e.invalid_type,expected:St.promise,received:r.parsedType}),Sr;let n=r.parsedType===St.promise?r.data:Promise.resolve(r.data);return Oc(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}};yh.create=(e,t)=>new yh({type:e,typeName:ze.ZodPromise,...Fr(t)});var kf=class extends Ur{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ze.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:r,ctx:n}=this._processInputParams(t),s=this._def.effect||null,u={addIssue:h=>{it(n,h),h.fatal?r.abort():r.dirty()},get path(){return n.path}};if(u.addIssue=u.addIssue.bind(u),s.type==="preprocess"){let h=s.transform(n.data,u);if(n.common.async)return Promise.resolve(h).then(async S=>{if(r.value==="aborted")return Sr;let I=await this._def.schema._parseAsync({data:S,path:n.path,parent:n});return I.status==="aborted"?Sr:I.status==="dirty"||r.value==="dirty"?N_(I.value):I});{if(r.value==="aborted")return Sr;let S=this._def.schema._parseSync({data:h,path:n.path,parent:n});return S.status==="aborted"?Sr:S.status==="dirty"||r.value==="dirty"?N_(S.value):S}}if(s.type==="refinement"){let h=S=>{let I=s.refinement(S,u);if(n.common.async)return Promise.resolve(I);if(I instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return S};if(n.common.async===!1){let S=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return S.status==="aborted"?Sr:(S.status==="dirty"&&r.dirty(),h(S.value),{status:r.value,value:S.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(S=>S.status==="aborted"?Sr:(S.status==="dirty"&&r.dirty(),h(S.value).then(()=>({status:r.value,value:S.value}))))}if(s.type==="transform")if(n.common.async===!1){let h=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!qh(h))return h;let S=s.transform(h.value,u);if(S instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:S}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(h=>qh(h)?Promise.resolve(s.transform(h.value,u)).then(S=>({status:r.value,value:S})):h);gn.assertNever(s)}};kf.create=(e,t,r)=>new kf({schema:e,typeName:ze.ZodEffects,effect:t,...Fr(r)});kf.createWithPreprocess=(e,t,r)=>new kf({schema:t,effect:{type:"preprocess",transform:e},typeName:ze.ZodEffects,...Fr(r)});var Al=class extends Ur{_parse(t){return this._getType(t)===St.undefined?Oc(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Al.create=(e,t)=>new Al({innerType:e,typeName:ze.ZodOptional,...Fr(t)});var $v=class extends Ur{_parse(t){return this._getType(t)===St.null?Oc(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};$v.create=(e,t)=>new $v({innerType:e,typeName:ze.ZodNullable,...Fr(t)});var t_=class extends Ur{_parse(t){let{ctx:r}=this._processInputParams(t),n=r.data;return r.parsedType===St.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};t_.create=(e,t)=>new t_({innerType:e,typeName:ze.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Fr(t)});var r_=class extends Ur{_parse(t){let{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return ug(s)?s.then(u=>({status:"valid",value:u.status==="valid"?u.value:this._def.catchValue({get error(){return new kc(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new kc(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};r_.create=(e,t)=>new r_({innerType:e,typeName:ze.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Fr(t)});var R_=class extends Ur{_parse(t){if(this._getType(t)!==St.nan){let n=this._getOrReturnCtx(t);return it(n,{code:$e.invalid_type,expected:St.nan,received:n.parsedType}),Sr}return{status:"valid",value:t.data}}};R_.create=e=>new R_({typeName:ze.ZodNaN,...Fr(e)});var fC=Symbol("zod_brand"),cg=class extends Ur{_parse(t){let{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},lg=class e extends Ur{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{let u=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return u.status==="aborted"?Sr:u.status==="dirty"?(r.dirty(),N_(u.value)):this._def.out._parseAsync({data:u.value,path:n.path,parent:n})})();{let s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Sr:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(t,r){return new e({in:t,out:r,typeName:ze.ZodPipeline})}},n_=class extends Ur{_parse(t){let r=this._def.innerType._parse(t),n=s=>(qh(s)&&(s.value=Object.freeze(s.value)),s);return ug(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}};n_.create=(e,t)=>new n_({innerType:e,typeName:ze.ZodReadonly,...Fr(t)});function Fb(e,t={},r){return e?gh.create().superRefine((n,s)=>{var u,h;if(!e(n)){let S=typeof t=="function"?t(n):typeof t=="string"?{message:t}:t,I=(h=(u=S.fatal)!==null&&u!==void 0?u:r)!==null&&h!==void 0?h:!0,D=typeof S=="string"?{message:S}:S;s.addIssue({code:"custom",...D,fatal:I})}}):gh.create()}var dC={object:Rl.lazycreate},ze;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ze||(ze={}));var pC=(e,t={message:`Input not instance of ${e.name}`})=>Fb(r=>r instanceof e,t),Ub=_h.create,jb=Bh.create,vC=R_.create,mC=Hh.create,Yb=zh.create,hC=Gh.create,_C=C_.create,gC=Vh.create,yC=Kh.create,SC=gh.create,wC=Lm.create,bC=Bp.create,EC=x_.create,TC=Fm.create,IC=Rl.create,NC=Rl.strictCreate,DC=Wh.create,CC=yy.create,xC=Jh.create,PC=Yv.create,AC=Sy.create,RC=P_.create,kC=A_.create,OC=wy.create,MC=Zh.create,LC=Xh.create,FC=Qh.create,UC=e_.create,jC=yh.create,Pb=kf.create,YC=Al.create,$C=$v.create,qC=kf.createWithPreprocess,BC=lg.create,HC=()=>Ub().optional(),zC=()=>jb().optional(),GC=()=>Yb().optional(),VC={string:e=>_h.create({...e,coerce:!0}),number:e=>Bh.create({...e,coerce:!0}),boolean:e=>zh.create({...e,coerce:!0}),bigint:e=>Hh.create({...e,coerce:!0}),date:e=>Gh.create({...e,coerce:!0})},KC=Sr,O=Object.freeze({__proto__:null,defaultErrorMap:D_,setErrorMap:qD,getErrorMap:hy,makeIssue:_y,EMPTY_PATH:BD,addIssueToContext:it,ParseStatus:qu,INVALID:Sr,DIRTY:N_,OK:Oc,isAborted:L0,isDirty:F0,isValid:qh,isAsync:ug,get util(){return gn},get objectUtil(){return M0},ZodParsedType:St,getParsedType:Mm,ZodType:Ur,datetimeRegex:Mb,ZodString:_h,ZodNumber:Bh,ZodBigInt:Hh,ZodBoolean:zh,ZodDate:Gh,ZodSymbol:C_,ZodUndefined:Vh,ZodNull:Kh,ZodAny:gh,ZodUnknown:Lm,ZodNever:Bp,ZodVoid:x_,ZodArray:Fm,ZodObject:Rl,ZodUnion:Wh,ZodDiscriminatedUnion:yy,ZodIntersection:Jh,ZodTuple:Yv,ZodRecord:Sy,ZodMap:P_,ZodSet:A_,ZodFunction:wy,ZodLazy:Zh,ZodLiteral:Xh,ZodEnum:Qh,ZodNativeEnum:e_,ZodPromise:yh,ZodEffects:kf,ZodTransformer:kf,ZodOptional:Al,ZodNullable:$v,ZodDefault:t_,ZodCatch:r_,ZodNaN:R_,BRAND:fC,ZodBranded:cg,ZodPipeline:lg,ZodReadonly:n_,custom:Fb,Schema:Ur,ZodSchema:Ur,late:dC,get ZodFirstPartyTypeKind(){return ze},coerce:VC,any:SC,array:TC,bigint:mC,boolean:Yb,date:hC,discriminatedUnion:CC,effect:Pb,enum:FC,function:OC,instanceof:pC,intersection:xC,lazy:MC,literal:LC,map:RC,nan:vC,nativeEnum:UC,never:bC,null:yC,nullable:$C,number:jb,object:IC,oboolean:GC,onumber:zC,optional:YC,ostring:HC,pipeline:BC,preprocess:qC,promise:jC,record:AC,set:kC,strictObject:NC,string:Ub,symbol:_C,transformer:Pb,tuple:PC,undefined:gC,union:DC,unknown:wC,void:EC,NEVER:KC,ZodIssueCode:$e,quotelessJson:$D,ZodError:kc});var WC=O.object({type:O.literal("error"),error:O.object({type:O.string(),message:O.string()})}),$b=vy({errorSchema:WC,errorToMessage:e=>e.error.message});function JC({prompt:e}){var t,r,n,s;let u=new Set,h=ZC(e),S,I=[];function D(F){var H;let ie=F==null?void 0:F.anthropic;return(H=ie==null?void 0:ie.cacheControl)!=null?H:ie==null?void 0:ie.cache_control}for(let F=0;F<h.length;F++){let H=h[F],ie=F===h.length-1,me=H.type;switch(me){case"system":{if(S!=null)throw new Xn({functionality:"Multiple system messages that are separated by user/assistant messages"});S=H.messages.map(({content:re,providerMetadata:Q})=>({type:"text",text:re,cache_control:D(Q)}));break}case"user":{let re=[];for(let Q of H.messages){let{role:ne,content:ce}=Q;switch(ne){case"user":{for(let ge=0;ge<ce.length;ge++){let Ue=ce[ge],we=ge===ce.length-1,qe=(t=D(Ue.providerMetadata))!=null?t:we?D(Q.providerMetadata):void 0;switch(Ue.type){case"text":{re.push({type:"text",text:Ue.text,cache_control:qe});break}case"image":{if(Ue.image instanceof URL)throw new Xn({functionality:"Image URLs in user messages"});re.push({type:"image",source:{type:"base64",media_type:(r=Ue.mimeType)!=null?r:"image/jpeg",data:$h(Ue.image)},cache_control:qe});break}case"file":{if(Ue.data instanceof URL)throw new Xn({functionality:"Image URLs in user messages"});if(Ue.mimeType!=="application/pdf")throw new Xn({functionality:"Non-PDF files in user messages"});u.add("pdfs-2024-09-25"),re.push({type:"document",source:{type:"base64",media_type:"application/pdf",data:Ue.data},cache_control:qe});break}}}break}case"tool":{for(let ge=0;ge<ce.length;ge++){let Ue=ce[ge],we=ge===ce.length-1,qe=(n=D(Ue.providerMetadata))!=null?n:we?D(Q.providerMetadata):void 0,lt=Ue.content!=null?Ue.content.map(ot=>{var xt;switch(ot.type){case"text":return{type:"text",text:ot.text,cache_control:void 0};case"image":return{type:"image",source:{type:"base64",media_type:(xt=ot.mimeType)!=null?xt:"image/jpeg",data:ot.data},cache_control:void 0}}}):JSON.stringify(Ue.result);re.push({type:"tool_result",tool_use_id:Ue.toolCallId,content:lt,is_error:Ue.isError,cache_control:qe})}break}default:{let ge=ne;throw new Error(`Unsupported role: ${ge}`)}}}I.push({role:"user",content:re});break}case"assistant":{let re=[];for(let Q=0;Q<H.messages.length;Q++){let ne=H.messages[Q],ce=Q===H.messages.length-1,{content:ge}=ne;for(let Ue=0;Ue<ge.length;Ue++){let we=ge[Ue],qe=Ue===ge.length-1,lt=(s=D(we.providerMetadata))!=null?s:qe?D(ne.providerMetadata):void 0;switch(we.type){case"text":{re.push({type:"text",text:ie&&ce&&qe?we.text.trim():we.text,cache_control:lt});break}case"tool-call":{re.push({type:"tool_use",id:we.toolCallId,name:we.toolName,input:we.args,cache_control:lt});break}}}}I.push({role:"assistant",content:re});break}default:{let re=me;throw new Error(`Unsupported type: ${re}`)}}}return{prompt:{system:S,messages:I},betas:u}}function ZC(e){let t=[],r;for(let n of e){let{role:s}=n;switch(s){case"system":{(r==null?void 0:r.type)!=="system"&&(r={type:"system",messages:[]},t.push(r)),r.messages.push(n);break}case"assistant":{(r==null?void 0:r.type)!=="assistant"&&(r={type:"assistant",messages:[]},t.push(r)),r.messages.push(n);break}case"user":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},t.push(r)),r.messages.push(n);break}case"tool":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},t.push(r)),r.messages.push(n);break}default:{let u=s;throw new Error(`Unsupported role: ${u}`)}}}return t}function qb(e){switch(e){case"end_turn":case"stop_sequence":return"stop";case"tool_use":return"tool-calls";case"max_tokens":return"length";default:return"unknown"}}function XC(e){var t;let r=(t=e.tools)!=null&&t.length?e.tools:void 0,n=[],s=new Set;if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:n,betas:s};let u=[];for(let I of r)switch(I.type){case"function":u.push({name:I.name,description:I.description,input_schema:I.parameters});break;case"provider-defined":switch(s.add("computer-use-2024-10-22"),I.id){case"anthropic.computer_20241022":u.push({name:I.name,type:"computer_20241022",display_width_px:I.args.displayWidthPx,display_height_px:I.args.displayHeightPx,display_number:I.args.displayNumber});break;case"anthropic.text_editor_20241022":u.push({name:I.name,type:"text_editor_20241022"});break;case"anthropic.bash_20241022":u.push({name:I.name,type:"bash_20241022"});break;default:n.push({type:"unsupported-tool",tool:I});break}break;default:n.push({type:"unsupported-tool",tool:I});break}let h=e.toolChoice;if(h==null)return{tools:u,tool_choice:void 0,toolWarnings:n,betas:s};let S=h.type;switch(S){case"auto":return{tools:u,tool_choice:{type:"auto"},toolWarnings:n,betas:s};case"required":return{tools:u,tool_choice:{type:"any"},toolWarnings:n,betas:s};case"none":return{tools:void 0,tool_choice:void 0,toolWarnings:n,betas:s};case"tool":return{tools:u,tool_choice:{type:"tool",name:h.toolName},toolWarnings:n,betas:s};default:{let I=S;throw new Xn({functionality:`Unsupported tool choice type: ${I}`})}}}var QC=class{constructor(e,t,r){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:r,temperature:n,topP:s,topK:u,frequencyPenalty:h,presencePenalty:S,stopSequences:I,responseFormat:D,seed:F}){let H=e.type,ie=[];h!=null&&ie.push({type:"unsupported-setting",setting:"frequencyPenalty"}),S!=null&&ie.push({type:"unsupported-setting",setting:"presencePenalty"}),F!=null&&ie.push({type:"unsupported-setting",setting:"seed"}),D!=null&&D.type!=="text"&&ie.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:me,betas:re}=JC({prompt:t}),Q={model:this.modelId,max_tokens:r??4096,temperature:n,top_k:u,top_p:s,stop_sequences:I,system:me.system,messages:me.messages};switch(H){case"regular":{let{tools:ne,tool_choice:ce,toolWarnings:ge,betas:Ue}=XC(e);return{args:{...Q,tools:ne,tool_choice:ce},warnings:[...ie,...ge],betas:new Set([...re,...Ue])}}case"object-json":throw new Xn({functionality:"json-mode object generation"});case"object-tool":{let{name:ne,description:ce,parameters:ge}=e.tool;return{args:{...Q,tools:[{name:ne,description:ce,input_schema:ge}],tool_choice:{type:"tool",name:ne}},warnings:ie,betas:re}}default:{let ne=H;throw new Error(`Unsupported type: ${ne}`)}}}async getHeaders({betas:e,headers:t}){return Ud(await Db(this.config.headers),e.size>0?{"anthropic-beta":Array.from(e).join(",")}:{},t)}buildRequestUrl(e){var t,r,n;return(n=(r=(t=this.config).buildRequestUrl)==null?void 0:r.call(t,this.config.baseURL,e))!=null?n:`${this.config.baseURL}/messages`}transformRequestBody(e){var t,r,n;return(n=(r=(t=this.config).transformRequestBody)==null?void 0:r.call(t,e))!=null?n:e}async doGenerate(e){var t,r,n,s;let{args:u,warnings:h,betas:S}=await this.getArgs(e),{responseHeaders:I,value:D}=await Rf({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:S,headers:e.headers}),body:this.transformRequestBody(u),failedResponseHandler:$b,successfulResponseHandler:jv(ex),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:F,...H}=u,ie="";for(let re of D.content)re.type==="text"&&(ie+=re.text);let me;if(D.content.some(re=>re.type==="tool_use")){me=[];for(let re of D.content)re.type==="tool_use"&&me.push({toolCallType:"function",toolCallId:re.id,toolName:re.name,args:JSON.stringify(re.input)})}return{text:ie,toolCalls:me,finishReason:qb(D.stop_reason),usage:{promptTokens:D.usage.input_tokens,completionTokens:D.usage.output_tokens},rawCall:{rawPrompt:F,rawSettings:H},rawResponse:{headers:I},response:{id:(t=D.id)!=null?t:void 0,modelId:(r=D.model)!=null?r:void 0},warnings:h,providerMetadata:{anthropic:{cacheCreationInputTokens:(n=D.usage.cache_creation_input_tokens)!=null?n:null,cacheReadInputTokens:(s=D.usage.cache_read_input_tokens)!=null?s:null}},request:{body:JSON.stringify(u)}}}async doStream(e){let{args:t,warnings:r,betas:n}=await this.getArgs(e),s={...t,stream:!0},{responseHeaders:u,value:h}=await Rf({url:this.buildRequestUrl(!0),headers:await this.getHeaders({betas:n,headers:e.headers}),body:this.transformRequestBody(s),failedResponseHandler:$b,successfulResponseHandler:T_(tx),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:S,...I}=t,D="unknown",F={promptTokens:Number.NaN,completionTokens:Number.NaN},H={},ie,me=this;return{stream:h.pipeThrough(new TransformStream({transform(re,Q){var ne,ce,ge,Ue;if(!re.success){Q.enqueue({type:"error",error:re.error});return}let we=re.value;switch(we.type){case"ping":return;case"content_block_start":{let qe=we.content_block.type;switch(qe){case"text":return;case"tool_use":{H[we.index]={toolCallId:we.content_block.id,toolName:we.content_block.name,jsonText:""};return}default:{let lt=qe;throw new Error(`Unsupported content block type: ${lt}`)}}}case"content_block_stop":{if(H[we.index]!=null){let qe=H[we.index];Q.enqueue({type:"tool-call",toolCallType:"function",toolCallId:qe.toolCallId,toolName:qe.toolName,args:qe.jsonText}),delete H[we.index]}return}case"content_block_delta":{let qe=we.delta.type;switch(qe){case"text_delta":{Q.enqueue({type:"text-delta",textDelta:we.delta.text});return}case"input_json_delta":{let lt=H[we.index];Q.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:lt.toolCallId,toolName:lt.toolName,argsTextDelta:we.delta.partial_json}),lt.jsonText+=we.delta.partial_json;return}default:{let lt=qe;throw new Error(`Unsupported delta type: ${lt}`)}}}case"message_start":{F.promptTokens=we.message.usage.input_tokens,F.completionTokens=we.message.usage.output_tokens,ie={anthropic:{cacheCreationInputTokens:(ne=we.message.usage.cache_creation_input_tokens)!=null?ne:null,cacheReadInputTokens:(ce=we.message.usage.cache_read_input_tokens)!=null?ce:null}},Q.enqueue({type:"response-metadata",id:(ge=we.message.id)!=null?ge:void 0,modelId:(Ue=we.message.model)!=null?Ue:void 0});return}case"message_delta":{F.completionTokens=we.usage.output_tokens,D=qb(we.delta.stop_reason);return}case"message_stop":{Q.enqueue({type:"finish",finishReason:D,usage:F,providerMetadata:ie});return}case"error":{Q.enqueue({type:"error",error:we.error});return}default:{let qe=we;throw new Error(`Unsupported chunk type: ${qe}`)}}}})),rawCall:{rawPrompt:S,rawSettings:I},rawResponse:{headers:u},warnings:r,request:{body:JSON.stringify(s)}}}},ex=O.object({type:O.literal("message"),id:O.string().nullish(),model:O.string().nullish(),content:O.array(O.discriminatedUnion("type",[O.object({type:O.literal("text"),text:O.string()}),O.object({type:O.literal("tool_use"),id:O.string(),name:O.string(),input:O.unknown()})])),stop_reason:O.string().nullish(),usage:O.object({input_tokens:O.number(),output_tokens:O.number(),cache_creation_input_tokens:O.number().nullish(),cache_read_input_tokens:O.number().nullish()})}),tx=O.discriminatedUnion("type",[O.object({type:O.literal("message_start"),message:O.object({id:O.string().nullish(),model:O.string().nullish(),usage:O.object({input_tokens:O.number(),output_tokens:O.number(),cache_creation_input_tokens:O.number().nullish(),cache_read_input_tokens:O.number().nullish()})})}),O.object({type:O.literal("content_block_start"),index:O.number(),content_block:O.discriminatedUnion("type",[O.object({type:O.literal("text"),text:O.string()}),O.object({type:O.literal("tool_use"),id:O.string(),name:O.string()})])}),O.object({type:O.literal("content_block_delta"),index:O.number(),delta:O.discriminatedUnion("type",[O.object({type:O.literal("input_json_delta"),partial_json:O.string()}),O.object({type:O.literal("text_delta"),text:O.string()})])}),O.object({type:O.literal("content_block_stop"),index:O.number()}),O.object({type:O.literal("error"),error:O.object({type:O.string(),message:O.string()})}),O.object({type:O.literal("message_delta"),delta:O.object({stop_reason:O.string().nullish()}),usage:O.object({output_tokens:O.number()})}),O.object({type:O.literal("message_stop")}),O.object({type:O.literal("ping")})]),rx=O.object({command:O.string(),restart:O.boolean().optional()});function nx(e={}){return{type:"provider-defined",id:"anthropic.bash_20241022",args:{},parameters:rx,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}}var ax=O.object({command:O.enum(["view","create","str_replace","insert","undo_edit"]),path:O.string(),file_text:O.string().optional(),insert_line:O.number().int().optional(),new_str:O.string().optional(),old_str:O.string().optional(),view_range:O.array(O.number().int()).optional()});function ix(e={}){return{type:"provider-defined",id:"anthropic.text_editor_20241022",args:{},parameters:ax,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}}var ox=O.object({action:O.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:O.array(O.number().int()).optional(),text:O.string().optional()});function sx(e){return{type:"provider-defined",id:"anthropic.computer_20241022",args:{displayWidthPx:e.displayWidthPx,displayHeightPx:e.displayHeightPx,displayNumber:e.displayNumber},parameters:ox,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}}var ux={bash_20241022:nx,textEditor_20241022:ix,computer_20241022:sx};function j0(e={}){var t;let r=(t=my(e.baseURL))!=null?t:"https://api.anthropic.com/v1",n=()=>({"anthropic-version":"2023-06-01","x-api-key":dy({apiKey:e.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...e.headers}),s=(h,S={})=>new QC(h,S,{provider:"anthropic.messages",baseURL:r,headers:n,fetch:e.fetch}),u=function(h,S){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return s(h,S)};return u.languageModel=s,u.chat=s,u.messages=s,u.textEmbeddingModel=h=>{throw new P0({modelId:h,modelType:"textEmbeddingModel"})},u.tools=ux,u}var R1=j0();function cx({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:r="system"}){let n=[];for(let{role:s,content:u}of e)switch(s){case"system":{switch(r){case"system":{n.push({role:"system",content:u});break}case"developer":{n.push({role:"developer",content:u});break}case"remove":break;default:{let h=r;throw new Error(`Unsupported system message mode: ${h}`)}}break}case"user":{if(u.length===1&&u[0].type==="text"){n.push({role:"user",content:u[0].text});break}n.push({role:"user",content:u.map(h=>{var S,I,D;switch(h.type){case"text":return{type:"text",text:h.text};case"image":return{type:"image_url",image_url:{url:h.image instanceof URL?h.image.toString():`data:${(S=h.mimeType)!=null?S:"image/jpeg"};base64,${$h(h.image)}`,detail:(D=(I=h.providerMetadata)==null?void 0:I.openai)==null?void 0:D.imageDetail}};case"file":{if(h.data instanceof URL)throw new Xn({functionality:"'File content parts with URL data' functionality not supported."});switch(h.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:h.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:h.data,format:"mp3"}};default:throw new Xn({functionality:`File content part type ${h.mimeType} in user messages`})}}}})});break}case"assistant":{let h="",S=[];for(let I of u)switch(I.type){case"text":{h+=I.text;break}case"tool-call":{S.push({id:I.toolCallId,type:"function",function:{name:I.toolName,arguments:JSON.stringify(I.args)}});break}default:{let D=I;throw new Error(`Unsupported part: ${D}`)}}if(t){if(S.length>1)throw new Xn({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});n.push({role:"assistant",content:h,function_call:S.length>0?S[0].function:void 0})}else n.push({role:"assistant",content:h,tool_calls:S.length>0?S:void 0});break}case"tool":{for(let h of u)t?n.push({role:"function",name:h.toolName,content:JSON.stringify(h.result)}):n.push({role:"tool",tool_call_id:h.toolCallId,content:JSON.stringify(h.result)});break}default:{let h=s;throw new Error(`Unsupported role: ${h}`)}}return n}function Bb(e){var t,r;return(r=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:n,logprob:s,top_logprobs:u})=>({token:n,logprob:s,topLogprobs:u?u.map(({token:h,logprob:S})=>({token:h,logprob:S})):[]})))!=null?r:void 0}function by(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Y0=O.object({error:O.object({message:O.string(),type:O.string().nullish(),param:O.any().nullish(),code:O.union([O.string(),O.number()]).nullish()})}),k_=vy({errorSchema:Y0,errorToMessage:e=>e.error.message});function Ey({id:e,model:t,created:r}){return{id:e??void 0,modelId:t??void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function lx({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:r}){var n;let s=(n=e.tools)!=null&&n.length?e.tools:void 0,u=[];if(s==null)return{tools:void 0,tool_choice:void 0,toolWarnings:u};let h=e.toolChoice;if(t){let D=[];for(let H of s)H.type==="provider-defined"?u.push({type:"unsupported-tool",tool:H}):D.push({name:H.name,description:H.description,parameters:H.parameters});if(h==null)return{functions:D,function_call:void 0,toolWarnings:u};switch(h.type){case"auto":case"none":case void 0:return{functions:D,function_call:void 0,toolWarnings:u};case"required":throw new Xn({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:D,function_call:{name:h.toolName},toolWarnings:u}}}let S=[];for(let D of s)D.type==="provider-defined"?u.push({type:"unsupported-tool",tool:D}):S.push({type:"function",function:{name:D.name,description:D.description,parameters:D.parameters,strict:r?!0:void 0}});if(h==null)return{tools:S,tool_choice:void 0,toolWarnings:u};let I=h.type;switch(I){case"auto":case"none":case"required":return{tools:S,tool_choice:I,toolWarnings:u};case"tool":return{tools:S,tool_choice:{type:"function",function:{name:h.toolName}},toolWarnings:u};default:{let D=I;throw new Xn({functionality:`Unsupported tool choice type: ${D}`})}}}var fx=class{constructor(e,t,r){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=r}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:Ty(this.modelId)}get defaultObjectGenerationMode(){return vx(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:r,temperature:n,topP:s,topK:u,frequencyPenalty:h,presencePenalty:S,stopSequences:I,responseFormat:D,seed:F,providerMetadata:H}){var ie,me,re,Q,ne,ce,ge,Ue;let we=e.type,qe=[];u!=null&&qe.push({type:"unsupported-setting",setting:"topK"}),(D==null?void 0:D.type)==="json"&&D.schema!=null&&!this.supportsStructuredOutputs&&qe.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let lt=this.settings.useLegacyFunctionCalling;if(lt&&this.settings.parallelToolCalls===!0)throw new Xn({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(lt&&this.supportsStructuredOutputs)throw new Xn({functionality:"structuredOutputs with useLegacyFunctionCalling"});Hb(this.modelId)==="remove"&&t.some(xt=>xt.role==="system")&&qe.push({type:"other",message:"system messages are removed for this model"});let ot={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:r,temperature:n,top_p:s,frequency_penalty:h,presence_penalty:S,response_format:(D==null?void 0:D.type)==="json"?this.supportsStructuredOutputs&&D.schema!=null?{type:"json_schema",json_schema:{schema:D.schema,strict:!0,name:(ie=D.name)!=null?ie:"response",description:D.description}}:{type:"json_object"}:void 0,stop:I,seed:F,max_completion_tokens:(me=H==null?void 0:H.openai)==null?void 0:me.maxCompletionTokens,store:(re=H==null?void 0:H.openai)==null?void 0:re.store,metadata:(Q=H==null?void 0:H.openai)==null?void 0:Q.metadata,prediction:(ne=H==null?void 0:H.openai)==null?void 0:ne.prediction,reasoning_effort:(ge=(ce=H==null?void 0:H.openai)==null?void 0:ce.reasoningEffort)!=null?ge:this.settings.reasoningEffort,messages:cx({prompt:t,useLegacyFunctionCalling:lt,systemMessageMode:Hb(this.modelId)})};switch(Ty(this.modelId)&&(ot.temperature!=null&&(ot.temperature=void 0,qe.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),ot.top_p!=null&&(ot.top_p=void 0,qe.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),ot.frequency_penalty!=null&&(ot.frequency_penalty=void 0,qe.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),ot.presence_penalty!=null&&(ot.presence_penalty=void 0,qe.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),ot.logit_bias!=null&&(ot.logit_bias=void 0,qe.push({type:"other",message:"logitBias is not supported for reasoning models"})),ot.logprobs!=null&&(ot.logprobs=void 0,qe.push({type:"other",message:"logprobs is not supported for reasoning models"})),ot.top_logprobs!=null&&(ot.top_logprobs=void 0,qe.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),ot.max_tokens!=null&&(ot.max_completion_tokens==null&&(ot.max_completion_tokens=ot.max_tokens),ot.max_tokens=void 0)),we){case"regular":{let{tools:xt,tool_choice:cr,functions:Jt,function_call:Nt,toolWarnings:Un}=lx({mode:e,useLegacyFunctionCalling:lt,structuredOutputs:this.supportsStructuredOutputs});return{args:{...ot,tools:xt,tool_choice:cr,functions:Jt,function_call:Nt},warnings:[...qe,...Un]}}case"object-json":return{args:{...ot,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(Ue=e.name)!=null?Ue:"response",description:e.description}}:{type:"json_object"}},warnings:qe};case"object-tool":return{args:lt?{...ot,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...ot,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:qe};default:{let xt=we;throw new Error(`Unsupported type: ${xt}`)}}}async doGenerate(e){var t,r,n,s,u,h,S,I;let{args:D,warnings:F}=this.getArgs(e),{responseHeaders:H,value:ie}=await Rf({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ud(this.config.headers(),e.headers),body:D,failedResponseHandler:k_,successfulResponseHandler:jv(dx),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:me,...re}=D,Q=ie.choices[0],ne=(t=ie.usage)==null?void 0:t.completion_tokens_details,ce=(r=ie.usage)==null?void 0:r.prompt_tokens_details,ge={openai:{}};return(ne==null?void 0:ne.reasoning_tokens)!=null&&(ge.openai.reasoningTokens=ne==null?void 0:ne.reasoning_tokens),(ne==null?void 0:ne.accepted_prediction_tokens)!=null&&(ge.openai.acceptedPredictionTokens=ne==null?void 0:ne.accepted_prediction_tokens),(ne==null?void 0:ne.rejected_prediction_tokens)!=null&&(ge.openai.rejectedPredictionTokens=ne==null?void 0:ne.rejected_prediction_tokens),(ce==null?void 0:ce.cached_tokens)!=null&&(ge.openai.cachedPromptTokens=ce==null?void 0:ce.cached_tokens),{text:(n=Q.message.content)!=null?n:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&Q.message.function_call?[{toolCallType:"function",toolCallId:km(),toolName:Q.message.function_call.name,args:Q.message.function_call.arguments}]:(s=Q.message.tool_calls)==null?void 0:s.map(Ue=>{var we;return{toolCallType:"function",toolCallId:(we=Ue.id)!=null?we:km(),toolName:Ue.function.name,args:Ue.function.arguments}}),finishReason:by(Q.finish_reason),usage:{promptTokens:(h=(u=ie.usage)==null?void 0:u.prompt_tokens)!=null?h:NaN,completionTokens:(I=(S=ie.usage)==null?void 0:S.completion_tokens)!=null?I:NaN},rawCall:{rawPrompt:me,rawSettings:re},rawResponse:{headers:H},request:{body:JSON.stringify(D)},response:Ey(ie),warnings:F,logprobs:Bb(Q.logprobs),providerMetadata:ge}}async doStream(e){var t;if((t=this.settings.simulateStreaming)!=null?t:mx(this.modelId)){let ne=await this.doGenerate(e);return{stream:new ReadableStream({start(ge){if(ge.enqueue({type:"response-metadata",...ne.response}),ne.text&&ge.enqueue({type:"text-delta",textDelta:ne.text}),ne.toolCalls)for(let Ue of ne.toolCalls)ge.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Ue.toolCallId,toolName:Ue.toolName,argsTextDelta:Ue.args}),ge.enqueue({type:"tool-call",...Ue});ge.enqueue({type:"finish",finishReason:ne.finishReason,usage:ne.usage,logprobs:ne.logprobs,providerMetadata:ne.providerMetadata}),ge.close()}}),rawCall:ne.rawCall,rawResponse:ne.rawResponse,warnings:ne.warnings}}let{args:r,warnings:n}=this.getArgs(e),s={...r,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:u,value:h}=await Rf({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ud(this.config.headers(),e.headers),body:s,failedResponseHandler:k_,successfulResponseHandler:T_(px),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:S,...I}=r,D=[],F="unknown",H={promptTokens:void 0,completionTokens:void 0},ie,me=!0,{useLegacyFunctionCalling:re}=this.settings,Q={openai:{}};return{stream:h.pipeThrough(new TransformStream({transform(ne,ce){var ge,Ue,we,qe,lt,ot,xt,cr,Jt,Nt,Un,ha;if(!ne.success){F="error",ce.enqueue({type:"error",error:ne.error});return}let Vr=ne.value;if("error"in Vr){F="error",ce.enqueue({type:"error",error:Vr.error});return}if(me&&(me=!1,ce.enqueue({type:"response-metadata",...Ey(Vr)})),Vr.usage!=null){let{prompt_tokens:Tr,completion_tokens:Hn,prompt_tokens_details:Ht,completion_tokens_details:Tt}=Vr.usage;H={promptTokens:Tr??void 0,completionTokens:Hn??void 0},(Tt==null?void 0:Tt.reasoning_tokens)!=null&&(Q.openai.reasoningTokens=Tt==null?void 0:Tt.reasoning_tokens),(Tt==null?void 0:Tt.accepted_prediction_tokens)!=null&&(Q.openai.acceptedPredictionTokens=Tt==null?void 0:Tt.accepted_prediction_tokens),(Tt==null?void 0:Tt.rejected_prediction_tokens)!=null&&(Q.openai.rejectedPredictionTokens=Tt==null?void 0:Tt.rejected_prediction_tokens),(Ht==null?void 0:Ht.cached_tokens)!=null&&(Q.openai.cachedPromptTokens=Ht==null?void 0:Ht.cached_tokens)}let Xr=Vr.choices[0];if((Xr==null?void 0:Xr.finish_reason)!=null&&(F=by(Xr.finish_reason)),(Xr==null?void 0:Xr.delta)==null)return;let tt=Xr.delta;tt.content!=null&&ce.enqueue({type:"text-delta",textDelta:tt.content});let Ya=Bb(Xr==null?void 0:Xr.logprobs);Ya!=null&&Ya.length&&(ie===void 0&&(ie=[]),ie.push(...Ya));let je=re&&tt.function_call!=null?[{type:"function",id:km(),function:tt.function_call,index:0}]:tt.tool_calls;if(je!=null)for(let Tr of je){let Hn=Tr.index;if(D[Hn]==null){if(Tr.type!=="function")throw new ng({data:Tr,message:"Expected 'function' type."});if(Tr.id==null)throw new ng({data:Tr,message:"Expected 'id' to be a string."});if(((ge=Tr.function)==null?void 0:ge.name)==null)throw new ng({data:Tr,message:"Expected 'function.name' to be a string."});D[Hn]={id:Tr.id,type:"function",function:{name:Tr.function.name,arguments:(Ue=Tr.function.arguments)!=null?Ue:""},hasFinished:!1};let Tt=D[Hn];((we=Tt.function)==null?void 0:we.name)!=null&&((qe=Tt.function)==null?void 0:qe.arguments)!=null&&(Tt.function.arguments.length>0&&ce.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Tt.id,toolName:Tt.function.name,argsTextDelta:Tt.function.arguments}),k0(Tt.function.arguments)&&(ce.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(lt=Tt.id)!=null?lt:km(),toolName:Tt.function.name,args:Tt.function.arguments}),Tt.hasFinished=!0));continue}let Ht=D[Hn];Ht.hasFinished||(((ot=Tr.function)==null?void 0:ot.arguments)!=null&&(Ht.function.arguments+=(cr=(xt=Tr.function)==null?void 0:xt.arguments)!=null?cr:""),ce.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Ht.id,toolName:Ht.function.name,argsTextDelta:(Jt=Tr.function.arguments)!=null?Jt:""}),((Nt=Ht.function)==null?void 0:Nt.name)!=null&&((Un=Ht.function)==null?void 0:Un.arguments)!=null&&k0(Ht.function.arguments)&&(ce.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(ha=Ht.id)!=null?ha:km(),toolName:Ht.function.name,args:Ht.function.arguments}),Ht.hasFinished=!0))}},flush(ne){var ce,ge;ne.enqueue({type:"finish",finishReason:F,logprobs:ie,usage:{promptTokens:(ce=H.promptTokens)!=null?ce:NaN,completionTokens:(ge=H.completionTokens)!=null?ge:NaN},...Q!=null?{providerMetadata:Q}:{}})}})),rawCall:{rawPrompt:S,rawSettings:I},rawResponse:{headers:u},request:{body:JSON.stringify(s)},warnings:n}}},Gb=O.object({prompt_tokens:O.number().nullish(),completion_tokens:O.number().nullish(),prompt_tokens_details:O.object({cached_tokens:O.number().nullish()}).nullish(),completion_tokens_details:O.object({reasoning_tokens:O.number().nullish(),accepted_prediction_tokens:O.number().nullish(),rejected_prediction_tokens:O.number().nullish()}).nullish()}).nullish(),dx=O.object({id:O.string().nullish(),created:O.number().nullish(),model:O.string().nullish(),choices:O.array(O.object({message:O.object({role:O.literal("assistant").nullish(),content:O.string().nullish(),function_call:O.object({arguments:O.string(),name:O.string()}).nullish(),tool_calls:O.array(O.object({id:O.string().nullish(),type:O.literal("function"),function:O.object({name:O.string(),arguments:O.string()})})).nullish()}),index:O.number(),logprobs:O.object({content:O.array(O.object({token:O.string(),logprob:O.number(),top_logprobs:O.array(O.object({token:O.string(),logprob:O.number()}))})).nullable()}).nullish(),finish_reason:O.string().nullish()})),usage:Gb}),px=O.union([O.object({id:O.string().nullish(),created:O.number().nullish(),model:O.string().nullish(),choices:O.array(O.object({delta:O.object({role:O.enum(["assistant"]).nullish(),content:O.string().nullish(),function_call:O.object({name:O.string().optional(),arguments:O.string().optional()}).nullish(),tool_calls:O.array(O.object({index:O.number(),id:O.string().nullish(),type:O.literal("function").optional(),function:O.object({name:O.string().nullish(),arguments:O.string().nullish()})})).nullish()}).nullish(),logprobs:O.object({content:O.array(O.object({token:O.string(),logprob:O.number(),top_logprobs:O.array(O.object({token:O.string(),logprob:O.number()}))})).nullable()}).nullish(),finish_reason:O.string().nullable().optional(),index:O.number()})),usage:Gb}),Y0]);function Ty(e){return e==="o1"||e.startsWith("o1-")||e==="o3"||e.startsWith("o3-")}function vx(e){return e.startsWith("gpt-4o-audio-preview")}function Hb(e){var t,r;return Ty(e)?(r=(t=Vb[e])==null?void 0:t.systemMessageMode)!=null?r:"developer":"system"}function mx(e){var t,r;return Ty(e)?(r=(t=Vb[e])==null?void 0:t.simulateStreamingByDefault)!=null?r:!0:!1}var Vb={"o1-mini":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o1-mini-2024-09-12":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o1-preview":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o1-preview-2024-09-12":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o3-mini":{systemMessageMode:"developer",simulateStreamingByDefault:!1},"o3-mini-2025-01-31":{systemMessageMode:"developer",simulateStreamingByDefault:!1}};function hx({prompt:e,inputFormat:t,user:r="user",assistant:n="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let s="";e[0].role==="system"&&(s+=`${e[0].content}

`,e=e.slice(1));for(let{role:u,content:h}of e)switch(u){case"system":throw new Fv({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{let S=h.map(I=>{switch(I.type){case"text":return I.text;case"image":throw new Xn({functionality:"images"})}}).join("");s+=`${r}:
${S}

`;break}case"assistant":{let S=h.map(I=>{switch(I.type){case"text":return I.text;case"tool-call":throw new Xn({functionality:"tool-call messages"})}}).join("");s+=`${n}:
${S}

`;break}case"tool":throw new Xn({functionality:"tool messages"});default:{let S=u;throw new Error(`Unsupported role: ${S}`)}}return s+=`${n}:
`,{prompt:s,stopSequences:[`
${r}:`]}}function zb(e){return e==null?void 0:e.tokens.map((t,r)=>({token:t,logprob:e.token_logprobs[r],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[r]).map(([n,s])=>({token:n,logprob:s})):[]}))}var _x=class{constructor(e,t,r){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:r,maxTokens:n,temperature:s,topP:u,topK:h,frequencyPenalty:S,presencePenalty:I,stopSequences:D,responseFormat:F,seed:H}){var ie;let me=e.type,re=[];h!=null&&re.push({type:"unsupported-setting",setting:"topK"}),F!=null&&F.type!=="text"&&re.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:Q,stopSequences:ne}=hx({prompt:r,inputFormat:t}),ce=[...ne??[],...D??[]],ge={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:n,temperature:s,top_p:u,frequency_penalty:S,presence_penalty:I,seed:H,prompt:Q,stop:ce.length>0?ce:void 0};switch(me){case"regular":{if((ie=e.tools)!=null&&ie.length)throw new Xn({functionality:"tools"});if(e.toolChoice)throw new Xn({functionality:"toolChoice"});return{args:ge,warnings:re}}case"object-json":throw new Xn({functionality:"object-json mode"});case"object-tool":throw new Xn({functionality:"object-tool mode"});default:{let Ue=me;throw new Error(`Unsupported type: ${Ue}`)}}}async doGenerate(e){let{args:t,warnings:r}=this.getArgs(e),{responseHeaders:n,value:s}=await Rf({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ud(this.config.headers(),e.headers),body:t,failedResponseHandler:k_,successfulResponseHandler:jv(gx),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:u,...h}=t,S=s.choices[0];return{text:S.text,usage:{promptTokens:s.usage.prompt_tokens,completionTokens:s.usage.completion_tokens},finishReason:by(S.finish_reason),logprobs:zb(S.logprobs),rawCall:{rawPrompt:u,rawSettings:h},rawResponse:{headers:n},response:Ey(s),warnings:r,request:{body:JSON.stringify(t)}}}async doStream(e){let{args:t,warnings:r}=this.getArgs(e),n={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:s,value:u}=await Rf({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ud(this.config.headers(),e.headers),body:n,failedResponseHandler:k_,successfulResponseHandler:T_(yx),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:h,...S}=t,I="unknown",D={promptTokens:Number.NaN,completionTokens:Number.NaN},F,H=!0;return{stream:u.pipeThrough(new TransformStream({transform(ie,me){if(!ie.success){I="error",me.enqueue({type:"error",error:ie.error});return}let re=ie.value;if("error"in re){I="error",me.enqueue({type:"error",error:re.error});return}H&&(H=!1,me.enqueue({type:"response-metadata",...Ey(re)})),re.usage!=null&&(D={promptTokens:re.usage.prompt_tokens,completionTokens:re.usage.completion_tokens});let Q=re.choices[0];(Q==null?void 0:Q.finish_reason)!=null&&(I=by(Q.finish_reason)),(Q==null?void 0:Q.text)!=null&&me.enqueue({type:"text-delta",textDelta:Q.text});let ne=zb(Q==null?void 0:Q.logprobs);ne!=null&&ne.length&&(F===void 0&&(F=[]),F.push(...ne))},flush(ie){ie.enqueue({type:"finish",finishReason:I,logprobs:F,usage:D})}})),rawCall:{rawPrompt:h,rawSettings:S},rawResponse:{headers:s},warnings:r,request:{body:JSON.stringify(n)}}}},gx=O.object({id:O.string().nullish(),created:O.number().nullish(),model:O.string().nullish(),choices:O.array(O.object({text:O.string(),finish_reason:O.string(),logprobs:O.object({tokens:O.array(O.string()),token_logprobs:O.array(O.number()),top_logprobs:O.array(O.record(O.string(),O.number())).nullable()}).nullish()})),usage:O.object({prompt_tokens:O.number(),completion_tokens:O.number()})}),yx=O.union([O.object({id:O.string().nullish(),created:O.number().nullish(),model:O.string().nullish(),choices:O.array(O.object({text:O.string(),finish_reason:O.string().nullish(),index:O.number(),logprobs:O.object({tokens:O.array(O.string()),token_logprobs:O.array(O.number()),top_logprobs:O.array(O.record(O.string(),O.number())).nullable()}).nullish()})),usage:O.object({prompt_tokens:O.number(),completion_tokens:O.number()}).nullish()}),Y0]),Sx=class{constructor(e,t,r){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:r}){if(e.length>this.maxEmbeddingsPerCall)throw new lb({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let{responseHeaders:n,value:s}=await Rf({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Ud(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:k_,successfulResponseHandler:jv(wx),abortSignal:r,fetch:this.config.fetch});return{embeddings:s.data.map(u=>u.embedding),usage:s.usage?{tokens:s.usage.prompt_tokens}:void 0,rawResponse:{headers:n}}}},wx=O.object({data:O.array(O.object({embedding:O.array(O.number())})),usage:O.object({prompt_tokens:O.number()}).nullish()}),bx={"dall-e-3":1,"dall-e-2":10},Ex=class{constructor(e,t,r){this.modelId=e,this.settings=t,this.config=r,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:bx[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:r,aspectRatio:n,seed:s,providerOptions:u,headers:h,abortSignal:S}){var I,D,F,H;let ie=[];n!=null&&ie.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),s!=null&&ie.push({type:"unsupported-setting",setting:"seed"});let me=(F=(D=(I=this.config._internal)==null?void 0:I.currentDate)==null?void 0:D.call(I))!=null?F:new Date,{value:re,responseHeaders:Q}=await Rf({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Ud(this.config.headers(),h),body:{model:this.modelId,prompt:e,n:t,size:r,...(H=u.openai)!=null?H:{},response_format:"b64_json"},failedResponseHandler:k_,successfulResponseHandler:jv(Tx),abortSignal:S,fetch:this.config.fetch});return{images:re.data.map(ne=>ne.b64_json),warnings:ie,response:{timestamp:me,modelId:this.modelId,headers:Q}}}},Tx=O.object({data:O.array(O.object({b64_json:O.string()}))});function $0(e={}){var t,r,n;let s=(t=my(e.baseURL))!=null?t:"https://api.openai.com/v1",u=(r=e.compatibility)!=null?r:"compatible",h=(n=e.name)!=null?n:"openai",S=()=>({Authorization:`Bearer ${dy({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),I=(re,Q={})=>new fx(re,Q,{provider:`${h}.chat`,url:({path:ne})=>`${s}${ne}`,headers:S,compatibility:u,fetch:e.fetch}),D=(re,Q={})=>new _x(re,Q,{provider:`${h}.completion`,url:({path:ne})=>`${s}${ne}`,headers:S,compatibility:u,fetch:e.fetch}),F=(re,Q={})=>new Sx(re,Q,{provider:`${h}.embedding`,url:({path:ne})=>`${s}${ne}`,headers:S,fetch:e.fetch}),H=(re,Q={})=>new Ex(re,Q,{provider:`${h}.image`,url:({path:ne})=>`${s}${ne}`,headers:S,fetch:e.fetch}),ie=(re,Q)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return re==="gpt-3.5-turbo-instruct"?D(re,Q):I(re,Q)},me=function(re,Q){return ie(re,Q)};return me.languageModel=ie,me.chat=I,me.completion=D,me.embedding=F,me.textEmbedding=F,me.textEmbeddingModel=F,me.image=H,me.imageModel=H,me}var Q1=$0({compatibility:"strict"});var Gi=require("vscode");var Ix=["rate limit exceeded","net::err","check your network connection","check your firewall","request failed","400 bad request","server error","error on conversation request","response contained no choices","response got filtered"];function Nx({role:e,content:t}){switch(e){case"system":return Gi.LanguageModelChatMessage.User(t);case"user":let r=t.map(u=>{switch(u.type){case"text":return new Gi.LanguageModelTextPart(u.text);case"image":throw new Error("Image content not supported");case"file":throw new Error("File content not supported")}});return Gi.LanguageModelChatMessage.User(r);case"tool":let n=t.map(u=>{switch(u.type){case"tool-result":let h=typeof u.result=="string"?u.result:JSON.stringify(u.result);return new Gi.LanguageModelToolResultPart(u.toolCallId,[new Gi.LanguageModelTextPart(h)])}});return Gi.LanguageModelChatMessage.User(n);case"assistant":let s=t.map(u=>{switch(u.type){case"text":return new Gi.LanguageModelTextPart(u.text);case"tool-call":return new Gi.LanguageModelToolCallPart(u.toolCallId,u.toolName,u.args)}});return Gi.LanguageModelChatMessage.Assistant(s)}}function Dx(e){switch(e.type){case"function":return{name:e.name,description:e.description,inputSchema:e.parameters};case"provider-defined":throw new Error("Provider-defined tools not supported")}}function Cx(e){let t=String(e.message).toLowerCase();for(let r of Ix)if(t.includes(r))return!0;return!1}var q0=class{specificationVersion="v1";defaultObjectGenerationMode="json";provider="copilot";supportsImageUrls=!1;constructor(t,r,n){this.modelId=t,this.settings=r,this.config=n}async doGenerate(t){throw new Error("Not implemented")}async doStream(t){var me;let[r]=await Gi.lm.selectChatModels({family:this.modelId,vendor:"copilot"});if(!r)throw new Error("Model not found: "+this.modelId);let{prompt:n,abortSignal:s,mode:u}=t,h=s.context,{token:S}=h;if(u.type!=="regular")throw new Error("Request mode not supported: "+u.type);let I=n.map(Nx),D=(me=u.tools)==null?void 0:me.map(Dx),F=n.slice(-1)[0],H=!1;if(F.role=="tool")if(F.content[0].result=="stop")H=!0;else{let re=new Gi.LanguageModelTextPart("Should I process the last tool result now?"),Q=new Gi.LanguageModelTextPart("Yes");I.push(Gi.LanguageModelChatMessage.Assistant([re])),I.push(Gi.LanguageModelChatMessage.User([Q]))}return{stream:new ReadableStream({async start(re){let Q=0;if(H){re.enqueue({type:"text-delta",textDelta:`

`}),re.close();return}for(;;){try{if(S.isCancellationRequested){re.close();return}let ne=await r.sendRequest(I,{tools:D,modelOptions:{temperature:t.temperature,max_tokens:t.maxTokens}},S);for await(let ce of ne.stream){if(S.isCancellationRequested)break;ce instanceof Gi.LanguageModelTextPart?re.enqueue({type:"text-delta",textDelta:ce.value}):ce instanceof Gi.LanguageModelToolCallPart?re.enqueue({type:"tool-call",toolCallType:"function",toolCallId:ce.callId,toolName:ce.name,args:JSON.stringify(ce.input)}):re.error(new Error("Unknown content format"))}re.close();return}catch(ne){if(S.isCancellationRequested){re.close();return}if(!Cx(ne)||++Q>5){re.error(ne);return}re.enqueue({type:"error",error:{event:"retry",count:Q,message:ne.message||String(ne),cause:ne}}),String(ne.message).toLowerCase().includes("rate limit exceeded")&&await S_(30,S)}await S_(5*Q,S)}}}),rawCall:{rawPrompt:"",rawSettings:{}}}}};function Kb(e){let t=(n,s={})=>new q0(n,s,{provider:"copilot"}),r=function(n,s={}){return t(n,s)};return r.chat=t,r}var xx={anthropic:j0,openai:$0,copilot:Kb},Wb={};function B0({id:e,provider:t,apiKey:r}){let n=Wb[t];if(!n){let s=xx[t];if(!s)throw new Error("Unknown provider: "+t);n=s({apiKey:r}),Wb[t]=n}return n(e,{cacheControl:!0})}var H0=[{provider:"anthropic",family:"claude-3.5-sonnet",id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet",cacheControl:!0},{provider:"openai",family:"gpt-4o",id:"gpt-4o-2024-08-06",name:"GPT 4o"},{provider:"openrouter",family:"claude-3.5-sonnet",id:"anthropic/claude-3.5-sonnet:beta",name:"Claude 3.5 Sonnet",cacheControl:!0},{provider:"openrouter",family:"gpt-4o",id:"openai/gpt-4o-2024-08-06",name:"GPT 4o"}];var Jb=[{id:"anthropic",name:"Anthropic",envKeyName:"ANTHROPIC_API_KEY",website:"https://console.anthropic.com"},{id:"openai",name:"OpenAI",envKeyName:"OPENAI_API_KEY",website:"https://platform.openai.com"},{id:"openrouter",name:"Open Router",envKeyName:"OPENROUTER_API_KEY",website:"https://openrouter.ai"}];var s_=require("vscode");var Iy=require("vscode");function Ca(e,t={depth:2}){switch(typeof e){case"undefined":return"";case"number":return String(e);case"string":return e;case"function":return Ca(e(t),t);case"object":let r=[];return Array.isArray(e)?r=e.map(n=>Ca(n,t)).filter(n=>!!n):r=Object.entries(e).map(([n,s])=>{let u="#".repeat(t.depth),h=Ca(s,{depth:t.depth+1});return h&&`${u} ${n}

`+h}),r.join(`

`)}}var qr=function(e,...t){let r=F=>/^\s*$/.test(F),n=F=>F.match(/^\s*/)[0].length,s=e.map(F=>F.split(`
`)),u=100;s.forEach(F=>{F.slice(1).forEach(H=>{r(H)||(u=Math.min(u,n(H)))})});let h=F=>F[0],S=F=>F[F.length-1],I=F=>!r(S(s[F]))||!r(h(s[F+1])),D=[];return s.forEach((F,H)=>{let ie=F.slice();if(u<100)for(let re=1;re<ie.length;re++)ie[re]=F[re].slice(u);if(H==0||!I(H-1))for(;ie.length&&r(ie[0]);)ie.shift();if(H==s.length-1||!I(H))for(;ie.length&&r(ie[ie.length-1]);)ie.pop();let me=ie.join(`
`);if(H==0)D.push(me);else{let re=t[H-1]??"";if(typeof re=="object"||typeof re=="function"){if(I(H-1))throw new Error("Markdown inline value not supported");D.push(re),D.push(me)}else{let Q=D.pop();I(H-1)||(Q&&(re=`

`+re),me&&(re=re+`

`),re==`



`&&(re=`

`)),D.push(Q+re+me)}}}),D.length==1?D[0]:D};function kl(e,t="- ",r="",n=`
`,s=": "){return u=>Array.isArray(e)?e.map(h=>t+Ca(h,u)+r).join(n):Object.entries(e).map(([h,S])=>t+h+s+Ca(S,u)+r).join(n)}function Cs(e,t){return r=>{let n=Ca(t,r);return n?`<${e}>
`+n+`
</${e}>`:""}}function fg(e,t,r="",n=""){return s=>{let u=Ca(t,s);return u?[e,u,r]:n}}function Zb(e,t){return r=>{let n=Ca(e,r);return n||t}}var EM=require("vscode");async function O_(e,t=!1){let r=Af(e),n={path:r},s=await vh(e),u=[];return n.lines=s.split(`
`).length,n.status="ok",u.push(Cs("file_metadata",kl(n))),t||u.push(Cs("file_content",s)),Ca(u)}var dg=require("vscode");var{fs:Px}=dg.workspace;async function Um(e,t=!1){let r=Af(e),n=[],s=[],u={path:r},h=[];for(let[S,I]of await Px.readDirectory(e))I&dg.FileType.File?s.push(S):I&dg.FileType.Directory&&n.push(S+"/");if(u["sub-directories"]=n.length,u.files=s.length,u.status="ok",h.push(Cs("directory_metadata",kl(u))),!t){let S=[].concat(n,s);h.push(Zb(Cs("directory_content",S),"Directory is empty."))}return Ca(h)}var Xb=require("vscode");async function Qb(e,t,r,n=!1){let s=Af(e),u={path:s,name:t},h=[];if(u.start=`Ln ${r.start.line+1}, Col ${r.start.character+1}`,u.end=`Ln ${r.end.line+1}, Col ${r.end.character+1}`,u.lines=r.start.line-r.end.line+1,h.push(Cs("symbol_metadata",kl(u))),!n){let S=await Xb.workspace.openTextDocument(e),I=S.getText(r);h.push(Cs("symbol_content",I))}return Ca(h)}var eE=require("vscode");async function M_(e,t=!1){let r=Af(e),n={path:r},s=await vh(e),u=[],h=[],S=await eE.commands.executeCommand("vscode.executeDocumentSymbolProvider",e);function I(D){var F;u.push(D.name),(F=D.children)==null||F.forEach(I)}if(S&&S.length>0){let D=S[0];D.name.startsWith("# ")&&(n.title=D.name.slice(2)),S.forEach(I)}return n.lines=s.split(`
`).length,n.status="ok",h.push(Cs("document_metadata",kl(n))),u.length&&h.push(Cs("document_outline",kl(u,"","",`

`))),t||h.push(Cs("document_content",s)),Ca(h)}var tE=require("vscode");async function rE(){let{activeTextEditor:e}=tE.window,{document:t,selection:r}=e||{},n="",s=[];if(!e)return"No files are currently open in the editor.";let u={path:Af(e.document.uri)};return r.isEmpty||(n=t.getText(r),u.selection=`${r.end.line-r.start.line+1} line(s)`),s.push(Cs("active_text_editor",kl(u))),s.push(Cs("active_selection",n)),Ca(s)}var{fs:Ax}=Iy.workspace,Rx="multicoder_sourcecode",kx=qr`
    Read and analyze source code files in the project

    Commands:
    - /stat: checks if the specified path exists and returns basic information about it
    - /read: returns the content of a file or directory at the given path
`,Ox=O.object({command:O.enum(["stat","read"]).describe("Command"),path:O.string().describe("File or directory path")}),Mx="Looking at the source files ...";async function Lx({command:e,path:t},{id:r,log:n,stream:s}){let u=t.split("/").pop();n.info(u,{command:e,event:`tool.sourcecode.${e}`});let h=Da(t,r),S=null;try{S=await Ax.stat(h)}catch{return e!=="stat"&&n.warn("[sourcecode] Path does not exist - "+u,{command:e}),"Error: Path does not exist - "+t}return S.type&Iy.FileType.Directory?await Um(h,e=="stat"):(e!=="stat"&&s.reference($u(h)),await O_(h,e=="stat"))}var Ny={name:Rx,description:kx,parameters:Ox,execute:Lx,progress:Mx};var Dy=require("vscode");var{fs:Fx}=Dy.workspace,Ux="multicoder_documents",jx=qr`
    Read task-related documentation files

    Commands:
    - /stat: checks if the specified documentation path exists and returns basic information about it
    - /read: returns the content of a documentation file or directory at the given path
`,Yx=O.object({command:O.enum(["stat","read"]).describe("Command"),path:O.string().describe("File or directory path")}),$x="Looking at the available documents ...";async function qx({command:e,path:t},{id:r,log:n,stream:s}){let u=t.split("/").pop(),h=Da(t,r),S=null;n.info(u,{command:e,event:`tool.documents.${e}`});try{S=await Fx.stat(h)}catch{return e!=="stat"&&n.warn("[documents] Path does not exist - "+u,{command:e}),"Error: Path does not exist - "+t}return S.type&Dy.FileType.Directory?await Um(h,e=="stat"):(e!=="stat"&&!t.startsWith(".multicoder")&&s.reference($u(h)),await M_(h,e=="stat"))}var Cy={name:Ux,description:jx,parameters:Yx,execute:qx,progress:$x};var xy=require("vscode");var a_=require("vscode");var po=require("vscode");async function nE(e,t){var D,F,H;let r=e.shared.edits.find(ie=>ie.id==t);if(!r)return;let n=new po.WorkspaceEdit,s=$u(Da(r.path,e.id));try{await po.workspace.fs.stat(s)}catch{s=s.with({scheme:"untitled"})}let u=await po.workspace.openTextDocument(s),h=u.getText().replace(/\r\n/g,`
`),S=h==r.after.replace(/\r\n/g,`
`)?r.before:r.after,I=new po.Range(new po.Position(0,0),new po.Position(u.lineCount,0));n.replace(s,I,S),await po.workspace.applyEdit(n),((H=(F=(D=po.window.activeTextEditor)==null?void 0:D.document)==null?void 0:F.uri)==null?void 0:H.path)!=s.path&&await po.window.showTextDocument(u),Bx(r.search)}function Bx(e){var I;let t=po.window.activeTextEditor,r=t==null?void 0:t.document,n=(I=r==null?void 0:r.getText())==null?void 0:I.replace(/\r\n/g,`
`);if(!e||!t||!r)return;let s=n.indexOf(e);if(s==-1)return;let u=n.slice(0,s).split(`
`).length-1,h=e.split(`
`).length,S=new po.Position(u,0);t.selection=new po.Selection(S,S),t.revealRange(new po.Range(S,new po.Position(u+h,0)))}function aE(e,t,r,n,s,u,h){let{stream:S,shared:I}=e;if(u.startsWith(".multicoder"))return Hx(e,S,s,u);let D=new a_.MarkdownString(`

`),F=e.id,H=encodeURIComponent(JSON.stringify([u,r,F])),ie=`command:multicoder.diffView?${H}`,me=ce=>`<span class="codicon codicon-${ce}" style="color:var(--vscode-textLink-foreground);"></span>`;D.supportThemeIcons=!0,D.isTrusted={enabledCommands:["multicoder.diffView"]},D.supportHtml=!0,D.appendMarkdown(`[${me("diff-single")} ${n} (${u})](${ie} 'Open Diff')`),D.appendCodeblock(s,h),S.markdown(D);let re=t=="create"?"Create":"Apply",Q=t=="create"?"create file":"apply changes";S.button({title:re,command:"multicoder.action",arguments:[ne],tooltip:`Click to ${Q}, click again to revert`});function ne(){let ce=u.split("/").pop();e.log.info(ce,{event:"action."+re.toLowerCase()}),nE(e,r)}}function Hx(e,t,r,n){r=r.replace(/^#/gm,"##");let s=new a_.MarkdownString(`

`);s.supportHtml=!0,s.appendMarkdown(r),t.markdown(s),t.button({title:"Edit",command:"multicoder.action",arguments:[u],tooltip:"Click to edit the document"});async function u(){let h=Da(n,e.id),S=await a_.workspace.openTextDocument(h),I=n.split("/").pop();a_.window.showTextDocument(S),e.log.info(I,{event:"action.edit"})}}var iE="multicoder_followups",zx=qr`
    Displays followup actions to the user at the end of the conversation turn.
`,Gx=qr`
    Using ${iE} tool reply with a list of followup actions.
`,Vx=O.object({actions:O.array(O.string()).describe("Short followup actions (5-10 words)")}),Kx=()=>({actions:[]});function Wx(e,{actions:t}){if(e.code=="invalid_type"){let r=e.path[0];if(e.received=="string"&&r=="actions")return{actions:String(t).split(`
`)}}}async function Jx({actions:e},t){return t.log.info(`${e==null?void 0:e.length} options`,{actions:e,event:"tool.followups"}),t.followups=e.map(r=>({command:"",prompt:r})),"stop"}var ou={name:iE,description:zx,parameters:Vx,execute:Jx,retry:Gx,fallback:Kx,repair:Wx};var oE="multicoder_summary",Zx=qr`
    Shows summary, explanations or walkthrough section at the end of the response or after each task step.
    Allows the user to see the progress of completing the task.
    Always use this tool at the end of each step or when the task is finished.
`,Xx=qr`
    Using ${oE} tool reply with a short summary of what has been done for the current step or task.
`,Qx=O.object({text:O.string().describe("Short walkthrough or summary of this step")}),eP=()=>({text:"Task completed"});async function tP({text:e},{log:t,stream:r}){return t.info(`${e.slice(0,60).replace(/\n/g," ")}...`,{summary:e,event:"tool.summary"}),r.markdown(`

`+e+`

`),`This is the end of the response. Use ${ou.name} tool to suggest the next actions.`}var ma={name:oE,description:Zx,parameters:Qx,execute:tP,retry:Xx,fallback:eP};var rP="multicoder_editor",nP=qr`
    Create and modify source files or documents

    Usage:
    - To add new content always use /insert or /append
    - To change more than half of the file use /update
    - To replace part of the file use /replace
    - To delete part of the file, use /replace with empty content
    - Split large edits into multiple small ones

    Important:
    - Selection must be unique within file, select 3 lines or more to avoid ambiguity
`,aP=qr`
    Editing operation to execute with the given selection and content:
    - /create: creates a new file with the specified content
    - /update: updates the entire file
    - /insert: inserts new content before selection
    - /append: adds new content after selection
    - /replace: replaces selection with new content
`,iP=qr`
    Select exact lines including whitespace:
    - For /create and /update: use empty string ("") 
    - For /insert: at least 3 lines immediately following new content, no overlap
    - For /append: at least 3 lines immediately preceding new content, no overlap
`,oP=O.object({command:O.enum(["create","insert","append","replace","update"]).describe(aP),path:O.string().describe("File path"),select:O.string().describe(iP),content:O.string().describe("New content"),summary:O.string().describe("A very short (3-10 words) summary of this change")}),sP="Writing code ...";function uP(e,{command:t,path:r,summary:n}){if(e.code=="invalid_type"){let s=e.path[0];if(e.received=="undefined"){if(s=="command"&&String(n).startsWith("Create"))return{command:"create"};if(s=="command"&&String(n).startsWith("Update"))return{command:"update"};if(s=="select")return{select:""};if(s=="summary")return{summary:`${t} ${r}`}}}}async function cP(e,t){let{path:r,command:n,select:s}=e,{shared:u}=t;if(u.phase&&!r.startsWith(".multicoder"))return"Error: cannot modify source code yet. At this point you should only work on task documents.";let{error:h}=await uE(e,t);return s&&s.split(`
`).length<2&&n!="insert"&&(r.endsWith(".md")?h="Selection is too small, use the full section text":h="Selection is too small, provide at least 3-5 lines"),h?"Tool error: "+h:"ok"}async function uE({path:e,command:t,select:r,content:n},s){let u=Da(e,s.id),h=null,S=null,I=n;try{if(await xy.workspace.fs.stat(u),t==="create")return{error:"File already exists: "+e}}catch{if(t!=="create")return{error:"File not found: "+e}}switch(t=="insert"&&n.endsWith(r)&&(n=n.replace(r,"")),t=="update"&&r&&(r=""),t){case"insert":case"append":case"replace":case"update":if(h=await xy.workspace.openTextDocument(u),S=await vh(u),I=pP(S,r,n,h.eol,t),typeof I=="object")return I}return{document:h,before:S,after:I}}async function lP(e,t,r){let{path:n,summary:s,command:u,select:h,content:S}=e,{log:I,shared:D}=t,F=Da(n,t.id),H=n.split("/").pop();if(r!="ok")return D.phase&&!n.startsWith(".multicoder")&&I.warn(`[workflow] Code not allowed: ${s}`,{filename:H,command:u,summary:s}),r;let{document:ie,before:me,after:re,error:Q}=await uE(e,t);if(Q)return Q;let ne=ot=>ot?ot.split(`
`).length:0,ce=ne(h),ge=ne(S);I.info(s,{filename:H,command:u,selectedLines:ce,contentLines:ge,event:`tool.editor.${u}`});try{await iw(F,re)}catch(ot){throw I.warn("Cannot write file - "+ot.message,{filename:H,command:u,summary:s,...ot}),ot}ie=await xy.workspace.openTextDocument(F);let Ue=ie.languageId,we=Xg();n.startsWith(".multicoder")||D.edits.push({id:we,summary:s,path:n,before:me,after:re,search:S}),aE(t,u,we,s,S||h,n,Ue),await fP(.1);let qe="";n.endsWith(".md")?qe=await M_(F,!0):qe=await O_(F,!0);let lt=u=="create"?"created":"modified";return D.phase?qe+`

Document ${lt}. Provide a very short summary using ${ma.name} tool`:qe+`

File ${n} ${lt} successfully.`}async function fP(e){return new Promise(t=>setTimeout(t,e*1e3))}function dP(e){return/^\s*\/\//.test(e)||/^\s*\/\*/.test(e)}function sE(e,t){let r=dP(e)?"":`
`;return e.endsWith(`
`)&&t.startsWith(`
`)?e+t:e.endsWith(`
`)||t.startsWith(`
`)?e+r+t:e+r+`
`+t}function pP(e,t,r,n,s){let u=e.replace(/\r\n/g,`
`);if(s=="update"&&u==r)return{error:"The new content is the same as the original file. No changes were made."};if(s=="replace"&&t==r)return{error:"The new content is the same as the selection. No changes were made."};t||(t=u),(u+`
`).endsWith(t)&&(u+=`
`),s=="insert"&&(r=sE(r,t)),s=="append"&&(r=sE(t,r));let h=u.replace(t,r);return u==h?{error:"The selected text cannot be found in the current file. Did you provide exact full consecutive lines including whitespace?"}:(n==2&&(h=h.replace(/\n/g,`\r
`)),h)}var qv={name:rP,description:nP,parameters:oP,execute:cP,finalize:lP,progress:sP,repair:uP};var cE=require("vscode");var{fs:UL}=cE.workspace,vP="multicoder_filesystem",mP=qr`
    Manage files and directories

    Commands:
    - /create: creates a new directory at the specified path
    - /delete: deletes a file or directory at the specified path
`,hP=O.object({command:O.enum(["create","delete"]).describe("Command"),path:O.string().describe("File or directory path")}),_P="Working with files ...";async function gP({command:e,path:t},{id:r,log:n}){let s=t.split("/").pop(),u=Da(t,r);return n.info(s,{command:e,event:`tool.filesystem.${e}`}),"ok"}var Py={name:vP,description:mP,parameters:hP,execute:gP,progress:_P};var yP="multicoder_question",SP=qr`
    Ask a single focused question to collect missing information from the user.

    Purpose:
    - Gather specific information needed to proceed with a task
    - Resolve ambiguity in user requests
    - Guide user through decisions with clear options

    Usage guidelines:
    - Collect all necessary information step-by-step, use this tool up to 10 times if needed
    - Limit choices to 3-7 options for optimal readability
    - Avoid open-ended questions - provide concrete choices
    - Always provide most appropriate and useful default value

    Examples:
    - Yes/No decisions: "Should this function handle null values?"
    - Multiple choice: "Which HTTP method should this endpoint use?"
    - Technology selection: "Which database type best fits these requirements?"
`,wP="The main question text to display to the user. Should be clear, specific and end with question mark.",bP="Additional explanation, background information, or guidance to help user make an informed choice.",EP="List of possible answers the user can select from. Each choice should be distinct and meaningful.",TP="When true, user can select multiple choices. When false, only single choice is allowed.",IP="Pre-selected choice(s) shown initially. Must be one of the provided choices or comma-separated list.",NP=O.object({text:O.string().describe(wP),context:O.string().max(2e3).describe(bP),choices:O.array(O.string()).describe(EP),allowMultiple:O.boolean().describe(TP),defaultValue:O.string().describe(IP)}),DP="Preparing questions ...";function CP(e,{choices:t}){if(e.code=="invalid_type"){let r=e.path[0];if(e.received=="undefined"){if(r=="allowMultiple")return{allowMultiple:!1};if(r=="defaultValue"&&Array.isArray(t)&&t.length>0)return{defaultValue:t[0]}}}}var z0=[];async function xP(e,t){return e.defaultValue||"No answer"}async function PP({text:e,context:t,choices:r,allowMultiple:n,defaultValue:s},u,h){let S=[],{log:I,stream:D,shared:F}=u,H=s||"No answer";for(I.info(e,{choices:r,info:t,allowMultiple:n,defaultValue:s,event:"tool.question"});;){if(D.markdown(AP(e,t)),n&&S.length?D.markdown(RP(S)):D.markdown(`

(`+H+`)

`),F.auto)return H;let ie=kP(r,S,n),me=await Hp(u,{followups:ie});if({stream:D}=u,n){if(!me.prompt)return H=S.length?S.join(", "):H,z0.push({question:e,answer:H}),H}else return H=me.prompt||H,z0.push({question:e,answer:H}),H;S.push(me.prompt)}}var AP=(e,t)=>`

---
Q: **${e}**

${t}
`,RP=e=>`
${e.map(t=>`
- ${t}`)}
`;function kP(e,t,r){let n=[];return e.forEach(s=>{t.indexOf(s)==-1&&!/please/i.test(s)&&n.push({command:"",prompt:s})}),r&&n.push({command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"}),n}var L_={name:yP,description:SP,parameters:NP,execute:xP,finalize:PP,progress:DP,repair:CP,latest:z0};var lE="multicoder_evaluation",OP=qr`
    Reports the task evaluation results. Use this tool when requested to evaluate a task.

    Evaluate the task for 
    - clarity (ambiguity, incompleteness, imprecision),
    - complexity (functional scope, architectural scale, required skills level)
    - workload (workflow type, projected effort, budget estimate)

    Carefully choose the most appropriate level for each evaluated dimension.
`,MP=qr`
    Using ${lE} tool reply with an evaluation of this task for clarity, complexity and workload.
`,LP=O.number().describe(`
The ambiguity level:
    0 - n/a (not applicable)
    1 - very low
    2 - low
    3 - medium
    4 - high
    5 - very high

Ambiguity implies that something can be interpreted in multiple valid ways.
`),FP=O.number().describe(`
The incompleteness level:
    0 - n/a (not applicable)
    1 - very low
    2 - low
    3 - medium
    4 - high
    5 - very high

Incompleteness refers to missing information or parts.
`),UP=O.number().describe(`
The imprecision level:
    0 - n/a (not applicable)
    1 - very low
    2 - low
    3 - medium
    4 - high
    5 - very high

Imprecision refers to lack of exactness or accuracy.
`),jP=O.number().describe(`
The functional scope level:
    0 - n/a (not applicable)
    1 - implementation details, simple bugfix, code formatting
    2 - user story, issue, enhancement, complex bugfix
    3 - product feature, architectural refactoring
    4 - epic, application, library, subsystem
    5 - full product, platform, framework
`),YP=O.number().describe(`
The architectural scale level:
    0 - n/a (not applicable)
    1 - code level (local scope): variable naming, control flow, error handling
    2 - component level (single module): classes, functions, state management, data structures
    3 - service level (multiple modules): APIs, database models, service integrations
    4 - application level (system-wide): application architecture, system design
    5 - enterprise level (cross-system): distributed systems, cloud infrastructure, scalability
`),$P=O.number().describe(`
The required software engineering skills level:
    0 - n/a (not applicable)
    1 - junior (1 year)
    2 - mid (1-3 years)
    3 - senior (3-5 years)
    4 - staff (5-10 years)
    5 - principal (10+) years
`),qP=O.number().describe(`
The applicable workflow type:
    0 - n/a (not applicable)
    1 - single commit
    2 - pull request
    3 - sprint/iteration
    4 - small project
    5 - large project
`),BP=O.number().describe(`
The projected effort level:
    0 - n/a (not applicable)
    1 - very small (minutes)
    2 - small (hours)
    3 - medium (days)
    4 - large (weeks)
    5 - very large (months)
`),HP=O.number().describe(`
The development budget estimate:
    0 - n/a (not applicable)
    1 - very low
    2 - $20-200
    3 - $200-2000
    4 - $2000-20000
    5 - above $20000
`),zP=O.boolean().describe(qr`
    true if task requirements need further clarification or refinement
`),GP=O.boolean().describe(qr`
    true if solution is not trivial and will benefit from detailed design
`),VP=O.boolean().describe(qr`
    true to split the task into smaller, manageable steps
`),KP=O.object({ambiguity:LP,incompleteness:FP,imprecision:UP,functionalScope:jP,architecturalScale:YP,skillsLevel:$P,workflowType:qP,projectedEffort:BP,budgetEstimate:HP,clarifyRequirements:zP,designSolution:GP,splitIntoParts:VP}),WP=()=>({ambiguity:1,incompleteness:1,imprecision:1,functionalScope:1,architecturalScale:1,skillsLevel:1,workflowType:1,projectedEffort:1,budgetEstimate:1,clarifyRequirements:!1,designSolution:!1,splitIntoParts:!1});function JP(e,{projectedEffort:t,budgetEstimate:r}){if(e.code=="invalid_type"){let n=e.path[0];if(e.received=="undefined"&&n=="workflowType"&&(t||r))return{workflowType:t||r}}}async function ZP(e,{log:t}){let r=I=>I.toFixed(1),[n,s,u]=fE(e),h=`${r(n)} ${r(s)} ${r(u)} `,S=`${e.clarifyRequirements} ${e.designSolution} ${e.splitIntoParts}`;return t.info(h+S,{uncertainty:n,complexity:s,workload:u,...e,event:"tool.evaluation"}),"ok"}function fE(e){let t=(e.ambiguity+e.incompleteness+e.imprecision)/3,r=(e.architecturalScale+e.functionalScope+e.skillsLevel)/3,n=(e.projectedEffort+e.workflowType+e.budgetEstimate)/3;return[t,r,n]}var F_={name:lE,description:OP,parameters:KP,execute:ZP,retry:MP,fallback:WP,repair:JP,compute:fE};var pE=Symbol("Let zodToJsonSchema decide on which parser to use"),dE={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},vE=e=>typeof e=="string"?{...dE,name:e}:{...dE,...e};var mE=e=>{let t=vE(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([n,s])=>[s._def,{def:s._def,path:[...t.basePath,t.definitionPath,n],jsonSchema:void 0}]))}};function G0(e,t,r,n){n!=null&&n.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function ln(e,t,r,n,s){e[t]=r,G0(e,t,n,s)}function hE(){return{}}function _E(e,t){var n,s,u;let r={type:"array"};return(n=e.type)!=null&&n._def&&((u=(s=e.type)==null?void 0:s._def)==null?void 0:u.typeName)!==ze.ZodAny&&(r.items=pr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&ln(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&ln(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(ln(r,"minItems",e.exactLength.value,e.exactLength.message,t),ln(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}function gE(e,t){let r={type:"integer",format:"int64"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"min":t.target==="jsonSchema7"?n.inclusive?ln(r,"minimum",n.value,n.message,t):ln(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),ln(r,"minimum",n.value,n.message,t));break;case"max":t.target==="jsonSchema7"?n.inclusive?ln(r,"maximum",n.value,n.message,t):ln(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),ln(r,"maximum",n.value,n.message,t));break;case"multipleOf":ln(r,"multipleOf",n.value,n.message,t);break}return r}function yE(){return{type:"boolean"}}function Ay(e,t){return pr(e.type._def,t)}var SE=(e,t)=>pr(e.innerType._def,t);function V0(e,t,r){let n=r??t.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((s,u)=>V0(e,t,s))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return XP(e,t)}}var XP=(e,t)=>{let r={type:"integer",format:"unix-time"};if(t.target==="openApi3")return r;for(let n of e.checks)switch(n.kind){case"min":ln(r,"minimum",n.value,n.message,t);break;case"max":ln(r,"maximum",n.value,n.message,t);break}return r};function wE(e,t){return{...pr(e.innerType._def,t),default:e.defaultValue()}}function bE(e,t){return t.effectStrategy==="input"?pr(e.schema._def,t):{}}function EE(e){return{type:"string",enum:Array.from(e.values)}}var QP=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function TE(e,t){let r=[pr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),pr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(u=>!!u),n=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,s=[];return r.forEach(u=>{if(QP(u))s.push(...u.allOf),u.unevaluatedProperties===void 0&&(n=void 0);else{let h=u;if("additionalProperties"in u&&u.additionalProperties===!1){let{additionalProperties:S,...I}=u;h=I}else n=void 0;s.push(h)}}),s.length?{allOf:s,...n}:void 0}function IE(e,t){let r=typeof e.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[e.value]}:{type:r==="bigint"?"integer":r,const:e.value}}var K0,zp={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(K0===void 0&&(K0=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),K0),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Ry(e,t){let r={type:"string"};if(e.checks)for(let n of e.checks)switch(n.kind){case"min":ln(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,t);break;case"max":ln(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Gp(r,"email",n.message,t);break;case"format:idn-email":Gp(r,"idn-email",n.message,t);break;case"pattern:zod":Mc(r,zp.email,n.message,t);break}break;case"url":Gp(r,"uri",n.message,t);break;case"uuid":Gp(r,"uuid",n.message,t);break;case"regex":Mc(r,n.regex,n.message,t);break;case"cuid":Mc(r,zp.cuid,n.message,t);break;case"cuid2":Mc(r,zp.cuid2,n.message,t);break;case"startsWith":Mc(r,RegExp(`^${W0(n.value,t)}`),n.message,t);break;case"endsWith":Mc(r,RegExp(`${W0(n.value,t)}$`),n.message,t);break;case"datetime":Gp(r,"date-time",n.message,t);break;case"date":Gp(r,"date",n.message,t);break;case"time":Gp(r,"time",n.message,t);break;case"duration":Gp(r,"duration",n.message,t);break;case"length":ln(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,t),ln(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"includes":{Mc(r,RegExp(W0(n.value,t)),n.message,t);break}case"ip":{n.version!=="v6"&&Gp(r,"ipv4",n.message,t),n.version!=="v4"&&Gp(r,"ipv6",n.message,t);break}case"base64url":Mc(r,zp.base64url,n.message,t);break;case"jwt":Mc(r,zp.jwt,n.message,t);break;case"cidr":{n.version!=="v6"&&Mc(r,zp.ipv4Cidr,n.message,t),n.version!=="v4"&&Mc(r,zp.ipv6Cidr,n.message,t);break}case"emoji":Mc(r,zp.emoji(),n.message,t);break;case"ulid":{Mc(r,zp.ulid,n.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Gp(r,"binary",n.message,t);break}case"contentEncoding:base64":{ln(r,"contentEncoding","base64",n.message,t);break}case"pattern:zod":{Mc(r,zp.base64,n.message,t);break}}break}case"nanoid":Mc(r,zp.nanoid,n.message,t);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function W0(e,t){return t.patternStrategy==="escape"?tA(e):e}var eA=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function tA(e){let t="";for(let r=0;r<e.length;r++)eA.has(e[r])||(t+="\\"),t+=e[r];return t}function Gp(e,t,r,n){var s;e.format||(s=e.anyOf)!=null&&s.some(u=>u.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&n.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):ln(e,"format",t,r,n)}function Mc(e,t,r,n){var s;e.pattern||(s=e.allOf)!=null&&s.some(u=>u.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&n.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:NE(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):ln(e,"pattern",NE(t,n),r,n)}function NE(e,t){var I;if(!t.applyRegexFlags||!e.flags)return e.source;let r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=r.i?e.source.toLowerCase():e.source,s="",u=!1,h=!1,S=!1;for(let D=0;D<n.length;D++){if(u){s+=n[D],u=!1;continue}if(r.i){if(h){if(n[D].match(/[a-z]/)){S?(s+=n[D],s+=`${n[D-2]}-${n[D]}`.toUpperCase(),S=!1):n[D+1]==="-"&&((I=n[D+2])!=null&&I.match(/[a-z]/))?(s+=n[D],S=!0):s+=`${n[D]}${n[D].toUpperCase()}`;continue}}else if(n[D].match(/[a-z]/)){s+=`[${n[D]}${n[D].toUpperCase()}]`;continue}}if(r.m){if(n[D]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(n[D]==="$"){s+=`($|(?=[\r
]))`;continue}}if(r.s&&n[D]==="."){s+=h?`${n[D]}\r
`:`[${n[D]}\r
]`;continue}s+=n[D],n[D]==="\\"?u=!0:h&&n[D]==="]"?h=!1:!h&&n[D]==="["&&(h=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return s}function ky(e,t){var n,s,u,h,S,I;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((n=e.keyType)==null?void 0:n._def.typeName)===ze.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((D,F)=>({...D,[F]:pr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",F]})??{}}),{}),additionalProperties:!1};let r={type:"object",additionalProperties:pr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??{}};if(t.target==="openApi3")return r;if(((s=e.keyType)==null?void 0:s._def.typeName)===ze.ZodString&&((u=e.keyType._def.checks)!=null&&u.length)){let{type:D,...F}=Ry(e.keyType._def,t);return{...r,propertyNames:F}}else{if(((h=e.keyType)==null?void 0:h._def.typeName)===ze.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(((S=e.keyType)==null?void 0:S._def.typeName)===ze.ZodBranded&&e.keyType._def.type._def.typeName===ze.ZodString&&((I=e.keyType._def.type._def.checks)!=null&&I.length)){let{type:D,...F}=Ay(e.keyType._def,t);return{...r,propertyNames:F}}}return r}function DE(e,t){if(t.mapStrategy==="record")return ky(e,t);let r=pr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},n=pr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function CE(e){let t=e.values,n=Object.keys(e.values).filter(u=>typeof t[t[u]]!="number").map(u=>t[u]),s=Array.from(new Set(n.map(u=>typeof u)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:n}}function xE(){return{not:{}}}function PE(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var pg={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function RE(e,t){if(t.target==="openApi3")return AE(e,t);let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(n=>n._def.typeName in pg&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((s,u)=>{let h=pg[u._def.typeName];return h&&!s.includes(h)?[...s,h]:s},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((s,u)=>{let h=typeof u._def.value;switch(h){case"string":case"number":case"boolean":return[...s,h];case"bigint":return[...s,"integer"];case"object":if(u._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(n.length===r.length){let s=n.filter((u,h,S)=>S.indexOf(u)===h);return{type:s.length>1?s:s[0],enum:r.reduce((u,h)=>u.includes(h._def.value)?u:[...u,h._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,s)=>[...n,...s._def.values.filter(u=>!n.includes(u))],[])};return AE(e,t)}var AE=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((n,s)=>pr(n._def,{...t,currentPath:[...t.currentPath,"anyOf",`${s}`]})).filter(n=>!!n&&(!t.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function kE(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:pg[e.innerType._def.typeName],nullable:!0}:{type:[pg[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){let n=pr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let r=pr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function OE(e,t){let r={type:"number"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"int":r.type="integer",G0(r,"type",n.message,t);break;case"min":t.target==="jsonSchema7"?n.inclusive?ln(r,"minimum",n.value,n.message,t):ln(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),ln(r,"minimum",n.value,n.message,t));break;case"max":t.target==="jsonSchema7"?n.inclusive?ln(r,"maximum",n.value,n.message,t):ln(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),ln(r,"maximum",n.value,n.message,t));break;case"multipleOf":ln(r,"multipleOf",n.value,n.message,t);break}return r}function rA(e,t){return t.removeAdditionalStrategy==="strict"?e.catchall._def.typeName==="ZodNever"?e.unknownKeys!=="strict":pr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0:e.catchall._def.typeName==="ZodNever"?e.unknownKeys==="passthrough":pr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0}function ME(e,t){let r=t.target==="openAi",n={type:"object",...Object.entries(e.shape()).reduce((s,[u,h])=>{if(h===void 0||h._def===void 0)return s;let S=h.isOptional();S&&r&&(h instanceof Al&&(h=h._def.innerType),h.isNullable()||(h=h.nullable()),S=!1);let I=pr(h._def,{...t,currentPath:[...t.currentPath,"properties",u],propertyPath:[...t.currentPath,"properties",u]});return I===void 0?s:{properties:{...s.properties,[u]:I},required:S?s.required:[...s.required,u]}},{properties:{},required:[]}),additionalProperties:rA(e,t)};return n.required.length||delete n.required,n}var LE=(e,t)=>{var n;if(t.currentPath.toString()===((n=t.propertyPath)==null?void 0:n.toString()))return pr(e.innerType._def,t);let r=pr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}};var FE=(e,t)=>{if(t.pipeStrategy==="input")return pr(e.in._def,t);if(t.pipeStrategy==="output")return pr(e.out._def,t);let r=pr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),n=pr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(s=>s!==void 0)}};function UE(e,t){return pr(e.type._def,t)}function jE(e,t){let n={type:"array",uniqueItems:!0,items:pr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&ln(n,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&ln(n,"maxItems",e.maxSize.value,e.maxSize.message,t),n}function YE(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,n)=>pr(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:pr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,n)=>pr(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function $E(){return{not:{}}}function qE(){return{}}var BE=(e,t)=>pr(e.innerType._def,t);function pr(e,t,r=!1){var h;let n=t.seen.get(e);if(t.override){let S=(h=t.override)==null?void 0:h.call(t,e,t,n,r);if(S!==pE)return S}if(n&&!r){let S=nA(n,t);if(S!==void 0)return S}let s={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,s);let u=iA(e,e.typeName,t);return u&&oA(e,t,u),s.jsonSchema=u,u}var nA=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:aA(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,n)=>t.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},aA=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},iA=(e,t,r)=>{switch(t){case ze.ZodString:return Ry(e,r);case ze.ZodNumber:return OE(e,r);case ze.ZodObject:return ME(e,r);case ze.ZodBigInt:return gE(e,r);case ze.ZodBoolean:return yE();case ze.ZodDate:return V0(e,r);case ze.ZodUndefined:return $E();case ze.ZodNull:return PE(r);case ze.ZodArray:return _E(e,r);case ze.ZodUnion:case ze.ZodDiscriminatedUnion:return RE(e,r);case ze.ZodIntersection:return TE(e,r);case ze.ZodTuple:return YE(e,r);case ze.ZodRecord:return ky(e,r);case ze.ZodLiteral:return IE(e,r);case ze.ZodEnum:return EE(e);case ze.ZodNativeEnum:return CE(e);case ze.ZodNullable:return kE(e,r);case ze.ZodOptional:return LE(e,r);case ze.ZodMap:return DE(e,r);case ze.ZodSet:return jE(e,r);case ze.ZodLazy:return pr(e.getter()._def,r);case ze.ZodPromise:return UE(e,r);case ze.ZodNaN:case ze.ZodNever:return xE();case ze.ZodEffects:return bE(e,r);case ze.ZodAny:return hE();case ze.ZodUnknown:return qE();case ze.ZodDefault:return wE(e,r);case ze.ZodBranded:return Ay(e,r);case ze.ZodReadonly:return BE(e,r);case ze.ZodCatch:return SE(e,r);case ze.ZodPipeline:return FE(e,r);case ze.ZodFunction:case ze.ZodVoid:case ze.ZodSymbol:return;default:return(n=>{})(t)}},oA=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r);var HE=(e,t)=>{let r=mE(t),n=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((I,[D,F])=>({...I,[D]:pr(F._def,{...r,currentPath:[...r.basePath,r.definitionPath,D]},!0)??{}}),{}):void 0,s=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,u=pr(e._def,s===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,s]},!1)??{},h=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;h!==void 0&&(u.title=h);let S=s===void 0?n?{...u,[r.definitionPath]:n}:u:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,s].join("/"),[r.definitionPath]:{...n,[s]:u}};return r.target==="jsonSchema7"?S.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(S.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in S||"oneOf"in S||"allOf"in S||"type"in S&&Array.isArray(S.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),S};var zE=HE;var vg={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},mg={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},hg={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},_g={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},gg={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},sA=[vg,mg,hg,_g,gg],EU={[vg.code]:vg,[mg.code]:mg,[hg.code]:hg,[_g.code]:_g,[gg.code]:gg},TU={[vg.name]:vg.code,[mg.name]:mg.code,[hg.name]:hg.code,[_g.name]:_g.code,[gg.name]:gg.code},IU=sA.map(e=>e.code);function uA(e){let t=["ROOT"],r=-1,n=null;function s(I,D,F){switch(I){case'"':{r=D,t.pop(),t.push(F),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=D,n=D,t.pop(),t.push(F),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(F),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=D,t.pop(),t.push(F),t.push("INSIDE_NUMBER");break}case"{":{r=D,t.pop(),t.push(F),t.push("INSIDE_OBJECT_START");break}case"[":{r=D,t.pop(),t.push(F),t.push("INSIDE_ARRAY_START");break}}}function u(I,D){switch(I){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=D,t.pop();break}}}function h(I,D){switch(I){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=D,t.pop();break}}}for(let I=0;I<e.length;I++){let D=e[I];switch(t[t.length-1]){case"ROOT":s(D,I,"FINISH");break;case"INSIDE_OBJECT_START":{switch(D){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{r=I,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(D){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(D){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(D){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{s(D,I,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{u(D,I);break}case"INSIDE_STRING":{switch(D){case'"':{t.pop(),r=I;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:r=I}break}case"INSIDE_ARRAY_START":{switch(D){case"]":{r=I,t.pop();break}default:{r=I,s(D,I,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(D){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=I,t.pop();break}default:{r=I;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{s(D,I,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),r=I;break}case"INSIDE_NUMBER":{switch(D){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=I;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&h(D,I),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&u(D,I);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&u(D,I);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&h(D,I);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{let H=e.substring(n,I+1);!"false".startsWith(H)&&!"true".startsWith(H)&&!"null".startsWith(H)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?u(D,I):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&h(D,I)):r=I;break}}}let S=e.slice(0,r+1);for(let I=t.length-1;I>=0;I--)switch(t[I]){case"INSIDE_STRING":{S+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{S+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{S+="]";break}case"INSIDE_LITERAL":{let F=e.substring(n,e.length);"true".startsWith(F)?S+="true".slice(F.length):"false".startsWith(F)?S+="false".slice(F.length):"null".startsWith(F)&&(S+="null".slice(F.length))}}return S}function GE(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=Uv({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=Uv({text:uA(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var yg={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Sg={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},wg={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},bg={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},Eg={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},Tg={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},Ig={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},Ng={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},Dg={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},Cg={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},xg={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},Pg={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},VE=[yg,Sg,wg,bg,Eg,Tg,Ig,Ng,Dg,Cg,xg,Pg],DU={[yg.code]:yg,[Sg.code]:Sg,[wg.code]:wg,[bg.code]:bg,[Eg.code]:Eg,[Tg.code]:Tg,[Ig.code]:Ig,[Ng.code]:Ng,[Dg.code]:Dg,[Cg.code]:Cg,[xg.code]:xg,[Pg.code]:Pg},CU={[yg.name]:yg.code,[Sg.name]:Sg.code,[wg.name]:wg.code,[bg.name]:bg.code,[Eg.name]:Eg.code,[Tg.name]:Tg.code,[Ig.name]:Ig.code,[Ng.name]:Ng.code,[Dg.name]:Dg.code,[Cg.name]:Cg.code,[xg.name]:xg.code,[Pg.name]:Pg.code},xU=VE.map(e=>e.code);function Lc(e,t){let r=VE.find(n=>n.name===e);if(!r)throw new Error(`Invalid stream part type: ${e}`);return`${r.code}:${JSON.stringify(t)}
`}function cA(e,t){var r;let n=(r=t==null?void 0:t.useReferences)!=null?r:!1;return lA(zE(e,{$refStrategy:n?"root":"none",target:"jsonSchema7"}),{validate:s=>{let u=e.safeParse(s);return u.success?{success:!0,value:u.data}:{success:!1,error:u.error}}})}var J0=Symbol.for("vercel.ai.schema");function lA(e,{validate:t}={}){return{[J0]:!0,_type:void 0,[ig]:!0,jsonSchema:e,validate:t}}function fA(e){return typeof e=="object"&&e!==null&&J0 in e&&e[J0]===!0&&"jsonSchema"in e&&"validate"in e}function i_(e){return fA(e)?e:cA(e)}var KE=typeof globalThis=="object"?globalThis:global;var jm="1.9.0";var WE=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function dA(e){var t=new Set([e]),r=new Set,n=e.match(WE);if(!n)return function(){return!1};var s={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(s.prerelease!=null)return function(I){return I===e};function u(S){return r.add(S),!1}function h(S){return t.add(S),!0}return function(I){if(t.has(I))return!0;if(r.has(I))return!1;var D=I.match(WE);if(!D)return u(I);var F={major:+D[1],minor:+D[2],patch:+D[3],prerelease:D[4]};return F.prerelease!=null||s.major!==F.major?u(I):s.major===0?s.minor===F.minor&&s.patch<=F.patch?h(I):u(I):s.minor<=F.minor?h(I):u(I)}}var JE=dA(jm);var pA=jm.split(".")[0],Ag=Symbol.for("opentelemetry.js.api."+pA),Rg=KE;function U_(e,t,r,n){var s;n===void 0&&(n=!1);var u=Rg[Ag]=(s=Rg[Ag])!==null&&s!==void 0?s:{version:jm};if(!n&&u[e]){var h=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(h.stack||h.message),!1}if(u.version!==jm){var h=new Error("@opentelemetry/api: Registration of version v"+u.version+" for "+e+" does not match previously registered API v"+jm);return r.error(h.stack||h.message),!1}return u[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+jm+"."),!0}function Ym(e){var t,r,n=(t=Rg[Ag])===null||t===void 0?void 0:t.version;if(!(!n||!JE(n)))return(r=Rg[Ag])===null||r===void 0?void 0:r[e]}function j_(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+jm+".");var r=Rg[Ag];r&&delete r[e]}var vA=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,u=[],h;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)u.push(s.value)}catch(S){h={error:S}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(h)throw h.error}}return u},mA=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,u;n<s;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return e.concat(u||Array.prototype.slice.call(t))},ZE=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return kg("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return kg("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return kg("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return kg("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return kg("verbose",this._namespace,t)},e}();function kg(e,t,r){var n=Ym("diag");if(n)return r.unshift(t),n[e].apply(n,mA([],vA(r),!1))}var Fc;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Fc||(Fc={}));function XE(e,t){e<Fc.NONE?e=Fc.NONE:e>Fc.ALL&&(e=Fc.ALL),t=t||{};function r(n,s){var u=t[n];return typeof u=="function"&&e>=s?u.bind(t):function(){}}return{error:r("error",Fc.ERROR),warn:r("warn",Fc.WARN),info:r("info",Fc.INFO),debug:r("debug",Fc.DEBUG),verbose:r("verbose",Fc.VERBOSE)}}var hA=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,u=[],h;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)u.push(s.value)}catch(S){h={error:S}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(h)throw h.error}}return u},_A=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,u;n<s;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return e.concat(u||Array.prototype.slice.call(t))},gA="diag",Y_=function(){function e(){function t(s){return function(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];var S=Ym("diag");if(S)return S[s].apply(S,_A([],hA(u),!1))}}var r=this,n=function(s,u){var h,S,I;if(u===void 0&&(u={logLevel:Fc.INFO}),s===r){var D=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((h=D.stack)!==null&&h!==void 0?h:D.message),!1}typeof u=="number"&&(u={logLevel:u});var F=Ym("diag"),H=XE((S=u.logLevel)!==null&&S!==void 0?S:Fc.INFO,s);if(F&&!u.suppressOverrideMessage){var ie=(I=new Error().stack)!==null&&I!==void 0?I:"<failed to generate stacktrace>";F.warn("Current logger will be overwritten from "+ie),H.warn("Current logger will overwrite one already registered from "+ie)}return U_("diag",H,r,!0)};r.setLogger=n,r.disable=function(){j_(gA,r)},r.createComponentLogger=function(s){return new ZE(s)},r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function QE(e){return Symbol.for(e)}var yA=function(){function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,s){var u=new e(r._currentContext);return u._currentContext.set(n,s),u},r.deleteValue=function(n){var s=new e(r._currentContext);return s._currentContext.delete(n),s}}return e}(),eT=new yA;var SA=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,u=[],h;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)u.push(s.value)}catch(S){h={error:S}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(h)throw h.error}}return u},wA=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,u;n<s;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return e.concat(u||Array.prototype.slice.call(t))},tT=function(){function e(){}return e.prototype.active=function(){return eT},e.prototype.with=function(t,r,n){for(var s=[],u=3;u<arguments.length;u++)s[u-3]=arguments[u];return r.call.apply(r,wA([n],SA(s),!1))},e.prototype.bind=function(t,r){return r},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}();var bA=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,u=[],h;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)u.push(s.value)}catch(S){h={error:S}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(h)throw h.error}}return u},EA=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,u;n<s;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return e.concat(u||Array.prototype.slice.call(t))},Z0="context",TA=new tT,Oy=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return U_(Z0,t,Y_.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,r,n){for(var s,u=[],h=3;h<arguments.length;h++)u[h-3]=arguments[h];return(s=this._getContextManager()).with.apply(s,EA([t,r,n],bA(u),!1))},e.prototype.bind=function(t,r){return this._getContextManager().bind(t,r)},e.prototype._getContextManager=function(){return Ym(Z0)||TA},e.prototype.disable=function(){this._getContextManager().disable(),j_(Z0,Y_.instance())},e}();var My;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(My||(My={}));var X0="0000000000000000",Q0="00000000000000000000000000000000",rT={traceId:Q0,spanId:X0,traceFlags:My.NONE};var Sh=function(){function e(t){t===void 0&&(t=rT),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,r){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,r){},e}();var eS=QE("OpenTelemetry Context Key SPAN");function Ly(e){return e.getValue(eS)||void 0}function nT(){return Ly(Oy.getInstance().active())}function Og(e,t){return e.setValue(eS,t)}function aT(e){return e.deleteValue(eS)}function iT(e,t){return Og(e,new Sh(t))}function Fy(e){var t;return(t=Ly(e))===null||t===void 0?void 0:t.spanContext()}var IA=/^([0-9a-f]{32})$/i,NA=/^[0-9a-f]{16}$/i;function DA(e){return IA.test(e)&&e!==Q0}function CA(e){return NA.test(e)&&e!==X0}function Uy(e){return DA(e.traceId)&&CA(e.spanId)}function oT(e){return new Sh(e)}var tS=Oy.getInstance(),jy=function(){function e(){}return e.prototype.startSpan=function(t,r,n){n===void 0&&(n=tS.active());var s=!!(r!=null&&r.root);if(s)return new Sh;var u=n&&Fy(n);return xA(u)&&Uy(u)?new Sh(u):new Sh},e.prototype.startActiveSpan=function(t,r,n,s){var u,h,S;if(!(arguments.length<2)){arguments.length===2?S=r:arguments.length===3?(u=r,S=n):(u=r,h=n,S=s);var I=h??tS.active(),D=this.startSpan(t,u,I),F=Og(I,D);return tS.with(F,S,void 0,D)}},e}();function xA(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var PA=new jy,sT=function(){function e(t,r,n,s){this._provider=t,this.name=r,this.version=n,this.options=s}return e.prototype.startSpan=function(t,r,n){return this._getTracer().startSpan(t,r,n)},e.prototype.startActiveSpan=function(t,r,n,s){var u=this._getTracer();return Reflect.apply(u.startActiveSpan,u,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):PA},e}();var uT=function(){function e(){}return e.prototype.getTracer=function(t,r,n){return new jy},e}();var AA=new uT,rS=function(){function e(){}return e.prototype.getTracer=function(t,r,n){var s;return(s=this.getDelegateTracer(t,r,n))!==null&&s!==void 0?s:new sT(this,t,r,n)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:AA},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,r,n){var s;return(s=this._delegate)===null||s===void 0?void 0:s.getTracer(t,r,n)},e}();var $_;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})($_||($_={}));var nS="trace",cT=function(){function e(){this._proxyTracerProvider=new rS,this.wrapSpanContext=oT,this.isSpanContextValid=Uy,this.deleteSpan=aT,this.getSpan=Ly,this.getActiveSpan=nT,this.getSpanContext=Fy,this.setSpan=Og,this.setSpanContext=iT}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var r=U_(nS,this._proxyTracerProvider,Y_.instance());return r&&this._proxyTracerProvider.setDelegate(t),r},e.prototype.getTracerProvider=function(){return Ym(nS)||this._proxyTracerProvider},e.prototype.getTracer=function(t,r){return this.getTracerProvider().getTracer(t,r)},e.prototype.disable=function(){j_(nS,Y_.instance()),this._proxyTracerProvider=new rS},e}();var aS=cT.getInstance();var RA=Object.defineProperty,fS=(e,t)=>{for(var r in t)RA(e,r,{get:t[r],enumerable:!0})};function $y(e,{contentType:t,dataStreamVersion:r}){let n=new Headers(e??{});return n.has("Content-Type")||n.set("Content-Type",t),r!==void 0&&n.set("X-Vercel-AI-Data-Stream",r),n}function lT(e,{contentType:t,dataStreamVersion:r}){let n={};if(e!=null)for(let[s,u]of Object.entries(e))n[s]=u;return n["Content-Type"]==null&&(n["Content-Type"]=t),r!==void 0&&(n["X-Vercel-AI-Data-Stream"]=r),n}function fT({response:e,status:t,statusText:r,headers:n,stream:s}){e.writeHead(t??200,r,n);let u=s.getReader();(async()=>{try{for(;;){let{done:S,value:I}=await u.read();if(S)break;e.write(I)}}catch(S){throw S}finally{e.end()}})()}var yT="AI_InvalidArgumentError",ST=`vercel.ai.error.${yT}`,kA=Symbol.for(ST),wT,Kp=class extends Ft{constructor({parameter:e,value:t,message:r}){super({name:yT,message:`Invalid argument for parameter ${e}: ${r}`}),this[wT]=!0,this.parameter=e,this.value=t}static isInstance(e){return Ft.hasMarker(e,ST)}};wT=kA;var bT="AI_RetryError",ET=`vercel.ai.error.${bT}`,OA=Symbol.for(ET),TT,dT=class extends Ft{constructor({message:e,reason:t,errors:r}){super({name:bT,message:e}),this[TT]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return Ft.hasMarker(e,ET)}};TT=OA;var MA=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:r=2}={})=>async n=>IT(n,{maxRetries:e,delayInMs:t,backoffFactor:r});async function IT(e,{maxRetries:t,delayInMs:r,backoffFactor:n},s=[]){try{return await e()}catch(u){if(ag(u)||t===0)throw u;let h=Nb(u),S=[...s,u],I=S.length;if(I>t)throw new dT({message:`Failed after ${I} attempts. Last error: ${h}`,reason:"maxRetriesExceeded",errors:S});if(u instanceof Error&&Pl.isInstance(u)&&u.isRetryable===!0&&I<=t)return await Ib(r),IT(e,{maxRetries:t,delayInMs:n*r,backoffFactor:n},S);throw I===1?u:new dT({message:`Failed after ${I} attempts with non-retryable error: '${h}'`,reason:"errorNotRetryable",errors:S})}}function LA({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new Kp({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Kp({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}let t=e??2;return{maxRetries:t,retry:MA({maxRetries:t})}}function uS({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function FA({model:e,settings:t,telemetry:r,headers:n}){var s;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((u,[h,S])=>(u[`ai.settings.${h}`]=S,u),{}),...Object.entries((s=r==null?void 0:r.metadata)!=null?s:{}).reduce((u,[h,S])=>(u[`ai.telemetry.metadata.${h}`]=S,u),{}),...Object.entries(n??{}).reduce((u,[h,S])=>(S!==void 0&&(u[`ai.request.headers.${h}`]=S),u),{})}}var UA={startSpan(){return Yy},startActiveSpan(e,t,r,n){if(typeof t=="function")return t(Yy);if(typeof r=="function")return r(Yy);if(typeof n=="function")return n(Yy)}},Yy={spanContext(){return jA},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},jA={traceId:"",spanId:"",traceFlags:0};function YA({isEnabled:e=!1,tracer:t}={}){return e?t||aS.getTracer("ai"):UA}function cS({name:e,tracer:t,attributes:r,fn:n,endWhenDone:s=!0}){return t.startActiveSpan(e,{attributes:r},async u=>{try{let h=await n(u);return s&&u.end(),h}catch(h){try{h instanceof Error?(u.recordException({name:h.name,message:h.message,stack:h.stack}),u.setStatus({code:$_.ERROR,message:h.message})):u.setStatus({code:$_.ERROR})}finally{u.end()}throw h}})}function q_({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((r,[n,s])=>{if(s===void 0)return r;if(typeof s=="object"&&"input"in s&&typeof s.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return r;let u=s.input();return u===void 0?r:{...r,[n]:u}}if(typeof s=="object"&&"output"in s&&typeof s.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return r;let u=s.output();return u===void 0?r:{...r,[n]:u}}return{...r,[n]:s}},{})}var $A="AI_NoImageGeneratedError",qA=`vercel.ai.error.${$A}`,BA=Symbol.for(qA),HA;HA=BA;var NT="AI_NoObjectGeneratedError",DT=`vercel.ai.error.${NT}`,zA=Symbol.for(DT),CT,pT=class extends Ft{constructor({message:e="No object generated.",cause:t,text:r,response:n,usage:s}){super({name:NT,message:e,cause:t}),this[CT]=!0,this.text=r,this.response=n,this.usage=s}static isInstance(e){return Ft.hasMarker(e,DT)}};CT=zA;var xT="AI_DownloadError",PT=`vercel.ai.error.${xT}`,GA=Symbol.for(PT),AT,iS=class extends Ft{constructor({url:e,statusCode:t,statusText:r,cause:n,message:s=n==null?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${n}`}){super({name:xT,message:s,cause:n}),this[AT]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return Ft.hasMarker(e,PT)}};AT=GA;async function VA({url:e,fetchImplementation:t=fetch}){var r;let n=e.toString();try{let s=await t(n);if(!s.ok)throw new iS({url:n,statusCode:s.status,statusText:s.statusText});return{data:new Uint8Array(await s.arrayBuffer()),mimeType:(r=s.headers.get("content-type"))!=null?r:void 0}}catch(s){throw iS.isInstance(s)?s:new iS({url:n,cause:s})}}var KA=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}];function WA(e){for(let{bytes:t,mimeType:r}of KA)if(e.length>=t.length&&t.every((n,s)=>e[s]===n))return r}var RT="AI_InvalidDataContentError",kT=`vercel.ai.error.${RT}`,JA=Symbol.for(kT),OT,vT=class extends Ft{constructor({content:e,cause:t,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:RT,message:r,cause:t}),this[OT]=!0,this.content=e}static isInstance(e){return Ft.hasMarker(e,kT)}};OT=JA;var MT=O.union([O.string(),O.instanceof(Uint8Array),O.instanceof(ArrayBuffer),O.custom(e=>{var t,r;return(r=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?r:!1},{message:"Must be a Buffer"})]);function ZA(e){return typeof e=="string"?e:e instanceof ArrayBuffer?$h(new Uint8Array(e)):$h(e)}function qy(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return Cb(e)}catch(t){throw new vT({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new vT({content:e})}function XA(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var LT="AI_InvalidMessageRoleError",FT=`vercel.ai.error.${LT}`,QA=Symbol.for(FT),UT,eR=class extends Ft{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:LT,message:t}),this[UT]=!0,this.role=e}static isInstance(e){return Ft.hasMarker(e,FT)}};UT=QA;function tR(e){try{let[t,r]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:r}}catch{return{mimeType:void 0,base64Content:void 0}}}async function rR({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:r=()=>!1,downloadImplementation:n=VA}){let s=await aR(e.messages,n,t,r);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(u=>nR(u,s))]}function nR(e,t){var r,n,s,u,h,S;let I=e.role;switch(I){case"system":return{role:"system",content:e.content,providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata}:{role:"user",content:e.content.map(D=>iR(D,t)).filter(D=>D.type!=="text"||D.text!==""),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(u=e.providerOptions)!=null?u:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(D=>D.type!=="text"||D.text!=="").map(D=>{let{experimental_providerMetadata:F,providerOptions:H,...ie}=D;return{...ie,providerMetadata:H??F}}),providerMetadata:(h=e.providerOptions)!=null?h:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(D=>{var F;return{type:"tool-result",toolCallId:D.toolCallId,toolName:D.toolName,result:D.result,content:D.experimental_content,isError:D.isError,providerMetadata:(F=D.providerOptions)!=null?F:D.experimental_providerMetadata}}),providerMetadata:(S=e.providerOptions)!=null?S:e.experimental_providerMetadata};default:{let D=I;throw new eR({role:D})}}}async function aR(e,t,r,n){let s=e.filter(h=>h.role==="user").map(h=>h.content).filter(h=>Array.isArray(h)).flat().filter(h=>h.type==="image"||h.type==="file").filter(h=>!(h.type==="image"&&r===!0)).map(h=>h.type==="image"?h.image:h.data).map(h=>typeof h=="string"&&(h.startsWith("http:")||h.startsWith("https:"))?new URL(h):h).filter(h=>h instanceof URL).filter(h=>!n(h)),u=await Promise.all(s.map(async h=>({url:h,data:await t({url:h})})));return Object.fromEntries(u.map(({url:h,data:S})=>[h.toString(),S]))}function iR(e,t){var r;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:e.experimental_providerMetadata};let n=e.mimeType,s,u,h,S=e.type;switch(S){case"image":s=e.image;break;case"file":s=e.data;break;default:throw new Error(`Unsupported part type: ${S}`)}try{u=typeof s=="string"?new URL(s):s}catch{u=s}if(u instanceof URL)if(u.protocol==="data:"){let{mimeType:I,base64Content:D}=tR(u.toString());if(I==null||D==null)throw new Error(`Invalid data URL format in part ${S}`);n=I,h=qy(D)}else{let I=t[u.toString()];I?(h=I.data,n??(n=I.mimeType)):h=u}else h=qy(u);switch(S){case"image":return h instanceof Uint8Array&&(n=(r=WA(h))!=null?r:n),{type:"image",image:h,mimeType:n,providerMetadata:e.experimental_providerMetadata};case"file":{if(n==null)throw new Error("Mime type is missing for file part");return{type:"file",data:h instanceof Uint8Array?ZA(h):h,mimeType:n,providerMetadata:e.experimental_providerMetadata}}}}function oR({maxTokens:e,temperature:t,topP:r,topK:n,presencePenalty:s,frequencyPenalty:u,stopSequences:h,seed:S}){if(e!=null){if(!Number.isInteger(e))throw new Kp({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new Kp({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Kp({parameter:"temperature",value:t,message:"temperature must be a number"});if(r!=null&&typeof r!="number")throw new Kp({parameter:"topP",value:r,message:"topP must be a number"});if(n!=null&&typeof n!="number")throw new Kp({parameter:"topK",value:n,message:"topK must be a number"});if(s!=null&&typeof s!="number")throw new Kp({parameter:"presencePenalty",value:s,message:"presencePenalty must be a number"});if(u!=null&&typeof u!="number")throw new Kp({parameter:"frequencyPenalty",value:u,message:"frequencyPenalty must be a number"});if(S!=null&&!Number.isInteger(S))throw new Kp({parameter:"seed",value:S,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:r,topK:n,presencePenalty:s,frequencyPenalty:u,stopSequences:h!=null&&h.length>0?h:void 0,seed:S}}function sR(e){var t,r,n;let s=[];for(let u of e){let h;try{h=new URL(u.url)}catch{throw new Error(`Invalid URL: ${u.url}`)}switch(h.protocol){case"http:":case"https:":{if((t=u.contentType)!=null&&t.startsWith("image/"))s.push({type:"image",image:h});else{if(!u.contentType)throw new Error("If the attachment is not an image, it must specify a content type");s.push({type:"file",data:h,mimeType:u.contentType})}break}case"data:":{let S,I,D;try{[S,I]=u.url.split(","),D=S.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${u.url}`)}if(D==null||I==null)throw new Error(`Invalid data URL format: ${u.url}`);if((r=u.contentType)!=null&&r.startsWith("image/"))s.push({type:"image",image:qy(I)});else if((n=u.contentType)!=null&&n.startsWith("text/"))s.push({type:"text",text:XA(qy(I))});else{if(!u.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");s.push({type:"file",data:I,mimeType:u.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${h.protocol}`)}}return s}var jT="AI_MessageConversionError",YT=`vercel.ai.error.${jT}`,uR=Symbol.for(YT),$T,oS=class extends Ft{constructor({originalMessage:e,message:t}){super({name:jT,message:t}),this[$T]=!0,this.originalMessage=e}static isInstance(e){return Ft.hasMarker(e,YT)}};$T=uR;function cR(e,t){var r,n;let s=(r=t==null?void 0:t.tools)!=null?r:{},u=[];for(let S=0;S<e.length;S++){let I=e[S],D=S===e.length-1,{role:F,content:H,experimental_attachments:ie}=I;switch(F){case"system":{u.push({role:"system",content:H});break}case"user":{u.push({role:"user",content:ie?[{type:"text",text:H},...sR(ie)]:H});break}case"assistant":{if(I.parts!=null){let Q=function(){u.push({role:"assistant",content:ge.map(we=>{switch(we.type){case"text":return{type:"text",text:we.text};default:return{type:"tool-call",toolCallId:we.toolInvocation.toolCallId,toolName:we.toolInvocation.toolName,args:we.toolInvocation.args}}})});let Ue=ge.filter(we=>we.type==="tool-invocation").map(we=>we.toolInvocation);Ue.length>0&&u.push({role:"tool",content:Ue.map(we=>{if(!("result"in we))throw new oS({originalMessage:I,message:"ToolInvocation must have a result: "+JSON.stringify(we)});let{toolCallId:qe,toolName:lt,result:ot}=we,xt=s[lt];return(xt==null?void 0:xt.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:qe,toolName:lt,result:xt.experimental_toToolResultContent(ot),experimental_content:xt.experimental_toToolResultContent(ot)}:{type:"tool-result",toolCallId:qe,toolName:lt,result:ot}})}),ge=[],ce=!1,ne++};var h=Q;let ne=0,ce=!1,ge=[];for(let Ue of I.parts)switch(Ue.type){case"reasoning":break;case"text":{ce&&Q(),ge.push(Ue);break}case"tool-invocation":{((n=Ue.toolInvocation.step)!=null?n:0)!==ne&&Q(),ge.push(Ue),ce=!0;break}}Q();break}let me=I.toolInvocations;if(me==null||me.length===0){u.push({role:"assistant",content:H});break}let re=me.reduce((Q,ne)=>{var ce;return Math.max(Q,(ce=ne.step)!=null?ce:0)},0);for(let Q=0;Q<=re;Q++){let ne=me.filter(ce=>{var ge;return((ge=ce.step)!=null?ge:0)===Q});ne.length!==0&&(u.push({role:"assistant",content:[...D&&H&&Q===0?[{type:"text",text:H}]:[],...ne.map(({toolCallId:ce,toolName:ge,args:Ue})=>({type:"tool-call",toolCallId:ce,toolName:ge,args:Ue}))]}),u.push({role:"tool",content:ne.map(ce=>{if(!("result"in ce))throw new oS({originalMessage:I,message:"ToolInvocation must have a result: "+JSON.stringify(ce)});let{toolCallId:ge,toolName:Ue,result:we}=ce,qe=s[Ue];return(qe==null?void 0:qe.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:ge,toolName:Ue,result:qe.experimental_toToolResultContent(we),experimental_content:qe.experimental_toToolResultContent(we)}:{type:"tool-result",toolCallId:ge,toolName:Ue,result:we}})}))}H&&!D&&u.push({role:"assistant",content:H});break}case"data":break;default:{let me=F;throw new oS({originalMessage:I,message:`Unsupported role: ${me}`})}}}return u}function lR(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";let t=e.map(fR);return t.some(r=>r==="has-ui-specific-parts")?"ui-messages":t.every(r=>r==="has-core-specific-parts"||r==="message")?"messages":"other"}function fR(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var lS=O.lazy(()=>O.union([O.null(),O.string(),O.number(),O.boolean(),O.record(O.string(),lS),O.array(lS)])),xs=O.record(O.string(),O.record(O.string(),lS)),dR=O.array(O.union([O.object({type:O.literal("text"),text:O.string()}),O.object({type:O.literal("image"),data:O.string(),mimeType:O.string().optional()})])),qT=O.object({type:O.literal("text"),text:O.string(),providerOptions:xs.optional(),experimental_providerMetadata:xs.optional()}),pR=O.object({type:O.literal("image"),image:O.union([MT,O.instanceof(URL)]),mimeType:O.string().optional(),providerOptions:xs.optional(),experimental_providerMetadata:xs.optional()}),vR=O.object({type:O.literal("file"),data:O.union([MT,O.instanceof(URL)]),mimeType:O.string(),providerOptions:xs.optional(),experimental_providerMetadata:xs.optional()}),mR=O.object({type:O.literal("tool-call"),toolCallId:O.string(),toolName:O.string(),args:O.unknown(),providerOptions:xs.optional(),experimental_providerMetadata:xs.optional()}),hR=O.object({type:O.literal("tool-result"),toolCallId:O.string(),toolName:O.string(),result:O.unknown(),content:dR.optional(),isError:O.boolean().optional(),providerOptions:xs.optional(),experimental_providerMetadata:xs.optional()}),_R=O.object({role:O.literal("system"),content:O.string(),providerOptions:xs.optional(),experimental_providerMetadata:xs.optional()}),gR=O.object({role:O.literal("user"),content:O.union([O.string(),O.array(O.union([qT,pR,vR]))]),providerOptions:xs.optional(),experimental_providerMetadata:xs.optional()}),yR=O.object({role:O.literal("assistant"),content:O.union([O.string(),O.array(O.union([qT,mR]))]),providerOptions:xs.optional(),experimental_providerMetadata:xs.optional()}),SR=O.object({role:O.literal("tool"),content:O.array(hR),providerOptions:xs.optional(),experimental_providerMetadata:xs.optional()}),wR=O.union([_R,gR,yR,SR]);function bR({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new Fv({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new Fv({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new Fv({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new Fv({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){let r=lR(e.messages);if(r==="other")throw new Fv({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});let n=r==="ui-messages"?cR(e.messages,{tools:t}):e.messages,s=hh({value:n,schema:O.array(wR)});if(!s.success)throw new Fv({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:s.error});return{type:"messages",messages:n,system:e.system}}throw new Error("unreachable")}function ER({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function TR(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var IR="JSON schema:",NR="You MUST answer with a JSON object that matches the JSON schema above.",DR="You MUST answer with JSON.";function CR({prompt:e,schema:t,schemaPrefix:r=t!=null?IR:void 0,schemaSuffix:n=t!=null?NR:DR}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,r,t!=null?JSON.stringify(t):void 0,n].filter(s=>s!=null).join(`
`)}function sS(e){let t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{let r=t.getReader();return{async next(){let{done:n,value:s}=await r.read();return n?{done:!0,value:void 0}:{done:!1,value:s}}}},t}var cY=qp({prefix:"aiobj",size:24});var Vp=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function mT(){let e,t;return{promise:new Promise((n,s)=>{e=n,t=s}),resolve:e,reject:t}}function xR(){let e=[],t=null,r=!1,n=mT(),s=async()=>{if(r&&e.length===0){t==null||t.close();return}if(e.length===0)return n=mT(),await n.promise,s();try{let{value:u,done:h}=await e[0].read();h?(e.shift(),e.length>0?await s():r&&(t==null||t.close())):t==null||t.enqueue(u)}catch(u){t==null||t.error(u),e.shift(),r&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(u){t=u},pull:s,async cancel(){for(let u of e)await u.cancel();e=[],r=!0}}),addStream:u=>{if(r)throw new Error("Cannot add inner stream: outer stream is closed");e.push(u.getReader()),n.resolve()},close:()=>{r=!0,n.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{r=!0,n.resolve(),e.forEach(u=>u.cancel()),e=[],t==null||t.close()}}}function PR(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}var fY=qp({prefix:"aiobj",size:24});var BT="AI_NoOutputSpecifiedError",HT=`vercel.ai.error.${BT}`,AR=Symbol.for(HT),zT,RR=class extends Ft{constructor({message:e="No output specified."}={}){super({name:BT,message:e}),this[zT]=!0}static isInstance(e){return Ft.hasMarker(e,HT)}};zT=AR;var GT="AI_ToolExecutionError",VT=`vercel.ai.error.${GT}`,kR=Symbol.for(VT),KT,OR=class extends Ft{constructor({toolArgs:e,toolName:t,toolCallId:r,cause:n,message:s=`Error executing tool ${t}: ${mh(n)}`}){super({name:GT,message:s,cause:n}),this[KT]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=r}static isInstance(e){return Ft.hasMarker(e,VT)}};KT=kR;function MR(e){return e!=null&&Object.keys(e).length>0}function LR({tools:e,toolChoice:t,activeTools:r}){return MR(e)?{tools:(r!=null?Object.entries(e).filter(([s])=>r.includes(s)):Object.entries(e)).map(([s,u])=>{let h=u.type;switch(h){case void 0:case"function":return{type:"function",name:s,description:u.description,parameters:i_(u.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:s,id:u.id,args:u.args};default:{let S=h;throw new Error(`Unsupported tool type: ${S}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var FR=/^([\s\S]*?)(\s+)(\S*)$/;function UR(e){let t=e.match(FR);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var WT="AI_InvalidToolArgumentsError",JT=`vercel.ai.error.${WT}`,jR=Symbol.for(JT),ZT,B_=class extends Ft{constructor({toolArgs:e,toolName:t,cause:r,message:n=`Invalid arguments for tool ${t}: ${mh(r)}`}){super({name:WT,message:n,cause:r}),this[ZT]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return Ft.hasMarker(e,JT)}};ZT=jR;var XT="AI_NoSuchToolError",QT=`vercel.ai.error.${XT}`,YR=Symbol.for(QT),eI,o_=class extends Ft{constructor({toolName:e,availableTools:t=void 0,message:r=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:XT,message:r}),this[eI]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return Ft.hasMarker(e,QT)}};eI=YR;var tI="AI_ToolCallRepairError",rI=`vercel.ai.error.${tI}`,$R=Symbol.for(rI),nI,dS=class extends Ft{constructor({cause:e,originalError:t,message:r=`Error repairing tool call: ${mh(e)}`}){super({name:tI,message:r,cause:e}),this[nI]=!0,this.originalError=t}static isInstance(e){return Ft.hasMarker(e,rI)}};nI=$R;async function qR({toolCall:e,tools:t,repairToolCall:r,system:n,messages:s}){if(t==null)throw new o_({toolName:e.toolName});try{return await hT({toolCall:e,tools:t})}catch(u){if(r==null||!(o_.isInstance(u)||B_.isInstance(u)))throw u;let h=null;try{h=await r({toolCall:e,tools:t,parameterSchema:({toolName:S})=>i_(t[S].parameters).jsonSchema,system:n,messages:s,error:u})}catch(S){throw new dS({cause:S,originalError:u})}if(h==null)throw u;return await hT({toolCall:h,tools:t})}}async function hT({toolCall:e,tools:t}){let r=e.toolName,n=t[r];if(n==null)throw new o_({toolName:e.toolName,availableTools:Object.keys(t)});let s=i_(n.parameters),u=e.args.trim()===""?hh({value:{},schema:s}):Uv({text:e.args,schema:s});if(u.success===!1)throw new B_({toolName:r,toolArgs:e.args,cause:u.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:r,args:u.value}}function _T({text:e="",tools:t,toolCalls:r,toolResults:n,messageId:s,generateMessageId:u}){let h=[];return h.push({role:"assistant",content:[{type:"text",text:e},...r],id:s}),n.length>0&&h.push({role:"tool",id:u(),content:n.map(S=>{let I=t[S.toolName];return(I==null?void 0:I.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:S.toolCallId,toolName:S.toolName,result:I.experimental_toToolResultContent(S.result),experimental_content:I.experimental_toToolResultContent(S.result)}:{type:"tool-result",toolCallId:S.toolCallId,toolName:S.toolName,result:S.result}})}),h}var wY=qp({prefix:"aitxt",size:24}),bY=qp({prefix:"msg",size:24});var BR={};fS(BR,{object:()=>zR,text:()=>HR});var HR=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),zR=({schema:e})=>{let t=i_(e);return{type:"object",responseFormat:({model:r})=>({type:"json",schema:r.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:r,model:n}){return n.supportsStructuredOutputs?r:CR({prompt:r,schema:t.jsonSchema})},parsePartial({text:r}){let n=GE(r);switch(n.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:n.value};default:{let s=n.state;throw new Error(`Unsupported parse state: ${s}`)}}},parseOutput({text:r},n){let s=Uv({text:r});if(!s.success)throw new pT({message:"No object generated: could not parse the response.",cause:s.error,text:r,response:n.response,usage:n.usage});let u=hh({value:s.value,schema:t});if(!u.success)throw new pT({message:"No object generated: response did not match schema.",cause:u.error,text:r,response:n.response,usage:n.usage});return u.value}}};function GR(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function pS(e,t){let r=e.getReader(),n=t.getReader(),s,u,h=!1,S=!1;async function I(F){try{s==null&&(s=r.read());let H=await s;s=void 0,H.done?F.close():F.enqueue(H.value)}catch(H){F.error(H)}}async function D(F){try{u==null&&(u=n.read());let H=await u;u=void 0,H.done?F.close():F.enqueue(H.value)}catch(H){F.error(H)}}return new ReadableStream({async pull(F){try{if(h){await D(F);return}if(S){await I(F);return}s==null&&(s=r.read()),u==null&&(u=n.read());let{result:H,reader:ie}=await Promise.race([s.then(me=>({result:me,reader:r})),u.then(me=>({result:me,reader:n}))]);H.done||F.enqueue(H.value),ie===r?(s=void 0,H.done&&(await D(F),h=!0)):(u=void 0,H.done&&(S=!0,await I(F)))}catch(H){F.error(H)}},cancel(){r.cancel(),n.cancel()}})}function VR({tools:e,generatorStream:t,toolCallStreaming:r,tracer:n,telemetry:s,system:u,messages:h,abortSignal:S,repairToolCall:I}){let D=null,F=new ReadableStream({start(ce){D=ce}}),H={},ie=new Set,me=!1,re;function Q(){me&&ie.size===0&&(re!=null&&D.enqueue(re),D.close())}let ne=new TransformStream({async transform(ce,ge){let Ue=ce.type;switch(Ue){case"text-delta":case"reasoning":case"response-metadata":case"error":{ge.enqueue(ce);break}case"tool-call-delta":{r&&(H[ce.toolCallId]||(ge.enqueue({type:"tool-call-streaming-start",toolCallId:ce.toolCallId,toolName:ce.toolName}),H[ce.toolCallId]=!0),ge.enqueue({type:"tool-call-delta",toolCallId:ce.toolCallId,toolName:ce.toolName,argsTextDelta:ce.argsTextDelta}));break}case"tool-call":{try{let we=await qR({toolCall:ce,tools:e,repairToolCall:I,system:u,messages:h});ge.enqueue(we);let qe=e[we.toolName];if(qe.execute!=null){let lt=km();ie.add(lt),cS({name:"ai.toolCall",attributes:q_({telemetry:s,attributes:{...uS({operationId:"ai.toolCall",telemetry:s}),"ai.toolCall.name":we.toolName,"ai.toolCall.id":we.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(we.args)}}}),tracer:n,fn:async ot=>qe.execute(we.args,{toolCallId:we.toolCallId,messages:h,abortSignal:S}).then(xt=>{D.enqueue({...we,type:"tool-result",result:xt}),ie.delete(lt),Q();try{ot.setAttributes(q_({telemetry:s,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(xt)}}}))}catch{}},xt=>{D.enqueue({type:"error",error:new OR({toolCallId:we.toolCallId,toolName:we.toolName,toolArgs:we.args,cause:xt})}),ie.delete(lt),Q()})})}}catch(we){D.enqueue({type:"error",error:we})}break}case"finish":{re={type:"finish",finishReason:ce.finishReason,logprobs:ce.logprobs,usage:ER(ce.usage),experimental_providerMetadata:ce.providerMetadata};break}default:{let we=Ue;throw new Error(`Unhandled chunk type: ${we}`)}}},flush(){me=!0,Q()}});return new ReadableStream({async start(ce){return Promise.all([t.pipeThrough(ne).pipeTo(new WritableStream({write(ge){ce.enqueue(ge)},close(){}})),F.pipeTo(new WritableStream({write(ge){ce.enqueue(ge)},close(){ce.close()}}))])}})}var KR=qp({prefix:"aitxt",size:24}),WR=qp({prefix:"msg",size:24});function aI({model:e,tools:t,toolChoice:r,system:n,prompt:s,messages:u,maxRetries:h,abortSignal:S,headers:I,maxSteps:D=1,experimental_generateMessageId:F=WR,experimental_output:H,experimental_continueSteps:ie=!1,experimental_telemetry:me,experimental_providerMetadata:re,providerOptions:Q=re,experimental_toolCallStreaming:ne=!1,toolCallStreaming:ce=ne,experimental_activeTools:ge,experimental_repairToolCall:Ue,experimental_transform:we,onChunk:qe,onError:lt,onFinish:ot,onStepFinish:xt,_internal:{now:cr=PR,generateId:Jt=KR,currentDate:Nt=()=>new Date}={},...Un}){return new ZR({model:e,telemetry:me,headers:I,settings:Un,maxRetries:h,abortSignal:S,system:n,prompt:s,messages:u,tools:t,toolChoice:r,toolCallStreaming:ce,transforms:GR(we),activeTools:ge,repairToolCall:Ue,maxSteps:D,output:H,continueSteps:ie,providerOptions:Q,onChunk:qe,onError:lt,onFinish:ot,onStepFinish:xt,now:cr,currentDate:Nt,generateId:Jt,generateMessageId:F})}function JR(e){if(!e)return new TransformStream({transform(s,u){u.enqueue({part:s,partialOutput:void 0})}});let t="",r="",n="";return new TransformStream({transform(s,u){if(s.type!=="text-delta"){u.enqueue({part:s,partialOutput:void 0});return}t+=s.textDelta,r+=s.textDelta;let h=e.parsePartial({text:t});if(h!=null){let S=JSON.stringify(h.partial);S!==n&&(u.enqueue({part:{type:"text-delta",textDelta:r},partialOutput:h.partial}),n=S,r="")}},flush(s){r.length>0&&s.enqueue({part:{type:"text-delta",textDelta:r},partialOutput:void 0})}})}var ZR=class{constructor({model:e,telemetry:t,headers:r,settings:n,maxRetries:s,abortSignal:u,system:h,prompt:S,messages:I,tools:D,toolChoice:F,toolCallStreaming:H,transforms:ie,activeTools:me,repairToolCall:re,maxSteps:Q,output:ne,continueSteps:ce,providerOptions:ge,onChunk:Ue,onError:we,onFinish:qe,onStepFinish:lt,now:ot,currentDate:xt,generateId:cr,generateMessageId:Jt}){this.warningsPromise=new Vp,this.usagePromise=new Vp,this.finishReasonPromise=new Vp,this.providerMetadataPromise=new Vp,this.textPromise=new Vp,this.reasoningPromise=new Vp,this.toolCallsPromise=new Vp,this.toolResultsPromise=new Vp,this.requestPromise=new Vp,this.responsePromise=new Vp,this.stepsPromise=new Vp;var Nt;if(Q<1)throw new Kp({parameter:"maxSteps",value:Q,message:"maxSteps must be at least 1"});this.output=ne;let Un="",ha="",Vr="",Xr,tt={id:cr(),timestamp:xt(),modelId:e.modelId,messages:[]},Ya=[],je=[],Tr,Hn,Ht="initial",Tt=[],rt,Qn=new TransformStream({async transform(fn,ir){ir.enqueue(fn);let{part:ct}=fn;if((ct.type==="text-delta"||ct.type==="reasoning"||ct.type==="tool-call"||ct.type==="tool-result"||ct.type==="tool-call-streaming-start"||ct.type==="tool-call-delta")&&await(Ue==null?void 0:Ue({chunk:ct})),ct.type==="error"&&await(we==null?void 0:we({error:ct.error})),ct.type==="text-delta"&&(Un+=ct.textDelta,ha+=ct.textDelta,Vr+=ct.textDelta),ct.type==="reasoning"&&(Xr=(Xr??"")+ct.textDelta),ct.type==="tool-call"&&Ya.push(ct),ct.type==="tool-result"&&je.push(ct),ct.type==="step-finish"){let bt=_T({text:ha,tools:D??{},toolCalls:Ya,toolResults:je,messageId:ct.messageId,generateMessageId:Jt}),Mr=Tt.length,jn="done";Mr+1<Q&&(ce&&ct.finishReason==="length"&&Ya.length===0?jn="continue":Ya.length>0&&je.length===Ya.length&&(jn="tool-result"));let Xa={stepType:Ht,text:Un,reasoning:Xr,toolCalls:Ya,toolResults:je,finishReason:ct.finishReason,usage:ct.usage,warnings:ct.warnings,logprobs:ct.logprobs,request:ct.request,response:{...ct.response,messages:[...tt.messages,...bt]},experimental_providerMetadata:ct.experimental_providerMetadata,isContinued:ct.isContinued};await(lt==null?void 0:lt(Xa)),Tt.push(Xa),Ya=[],je=[],Un="",jn!=="done"&&(Ht=jn),jn!=="continue"&&(tt.messages.push(...bt),ha="")}ct.type==="finish"&&(tt.id=ct.response.id,tt.timestamp=ct.response.timestamp,tt.modelId=ct.response.modelId,tt.headers=ct.response.headers,Hn=ct.usage,Tr=ct.finishReason)},async flush(fn){var ir;try{if(Tt.length===0)return;let ct=Tt[Tt.length-1];Dt.warningsPromise.resolve(ct.warnings),Dt.requestPromise.resolve(ct.request),Dt.responsePromise.resolve(ct.response),Dt.toolCallsPromise.resolve(ct.toolCalls),Dt.toolResultsPromise.resolve(ct.toolResults),Dt.providerMetadataPromise.resolve(ct.experimental_providerMetadata);let bt=Tr??"unknown",Mr=Hn??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Dt.finishReasonPromise.resolve(bt),Dt.usagePromise.resolve(Mr),Dt.textPromise.resolve(Vr),Dt.reasoningPromise.resolve(Xr),Dt.stepsPromise.resolve(Tt),await(qe==null?void 0:qe({finishReason:bt,logprobs:void 0,usage:Mr,text:Vr,reasoning:Xr,toolCalls:ct.toolCalls,toolResults:ct.toolResults,request:(ir=ct.request)!=null?ir:{},response:ct.response,warnings:ct.warnings,experimental_providerMetadata:ct.experimental_providerMetadata,steps:Tt})),rt.setAttributes(q_({telemetry:t,attributes:{"ai.response.finishReason":bt,"ai.response.text":{output:()=>Vr},"ai.response.toolCalls":{output:()=>{var jn;return(jn=ct.toolCalls)!=null&&jn.length?JSON.stringify(ct.toolCalls):void 0}},"ai.usage.promptTokens":Mr.promptTokens,"ai.usage.completionTokens":Mr.completionTokens}}))}catch(ct){fn.error(ct)}finally{rt.end()}}}),nt=xR();this.addStream=nt.addStream,this.closeStream=nt.close;let su=nt.stream;for(let fn of ie)su=su.pipeThrough(fn({tools:D,stopStream(){nt.terminate()}}));this.baseStream=su.pipeThrough(JR(ne)).pipeThrough(Qn);let{maxRetries:Gt,retry:Ho}=LA({maxRetries:s}),zt=YA(t),er=FA({model:e,telemetry:t,headers:r,settings:{...n,maxRetries:Gt}}),ea=bR({prompt:{system:(Nt=ne==null?void 0:ne.injectIntoSystemPrompt({system:h,model:e}))!=null?Nt:h,prompt:S,messages:I},tools:D}),Dt=this;cS({name:"ai.streamText",attributes:q_({telemetry:t,attributes:{...uS({operationId:"ai.streamText",telemetry:t}),...er,"ai.prompt":{input:()=>JSON.stringify({system:h,prompt:S,messages:I})},"ai.settings.maxSteps":Q}}),tracer:zt,endWhenDone:!1,fn:async fn=>{rt=fn;async function ir({currentStep:ct,responseMessages:bt,usage:Mr,stepType:jn,previousStepText:Xa,hasLeadingWhitespace:on,messageId:En}){var Vi;let oa=bt.length===0?ea.type:"messages",Lr=[...ea.messages,...bt],Zt=await rR({prompt:{type:oa,system:ea.system,messages:Lr},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(Vi=e.supportsUrl)==null?void 0:Vi.bind(e)}),lr={type:"regular",...LR({tools:D,toolChoice:F,activeTools:me})},{result:{stream:Qr,warnings:Ol,rawResponse:zn,request:Ml},doStreamSpan:mo,startTimestampMs:Rn}=await Ho(()=>cS({name:"ai.streamText.doStream",attributes:q_({telemetry:t,attributes:{...uS({operationId:"ai.streamText.doStream",telemetry:t}),...er,"ai.prompt.format":{input:()=>oa},"ai.prompt.messages":{input:()=>JSON.stringify(Zt)},"ai.prompt.tools":{input:()=>{var xr;return(xr=lr.tools)==null?void 0:xr.map(yn=>JSON.stringify(yn))}},"ai.prompt.toolChoice":{input:()=>lr.toolChoice!=null?JSON.stringify(lr.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":n.frequencyPenalty,"gen_ai.request.max_tokens":n.maxTokens,"gen_ai.request.presence_penalty":n.presencePenalty,"gen_ai.request.stop_sequences":n.stopSequences,"gen_ai.request.temperature":n.temperature,"gen_ai.request.top_k":n.topK,"gen_ai.request.top_p":n.topP}}),tracer:zt,endWhenDone:!1,fn:async xr=>({startTimestampMs:ot(),doStreamSpan:xr,result:await e.doStream({mode:lr,...oR(n),inputFormat:oa,responseFormat:ne==null?void 0:ne.responseFormat({model:e}),prompt:Zt,providerMetadata:ge,abortSignal:u,headers:r})})})),As=VR({tools:D,generatorStream:Qr,toolCallStreaming:H,tracer:zt,telemetry:t,system:h,messages:Lr,repairToolCall:re,abortSignal:u}),tr=Ml??{},Yn=[],Qa=[],ei="unknown",ti={promptTokens:0,completionTokens:0,totalTokens:0},Mf,Uc=!0,hi="",uu="",Ki=jn==="continue"?Xa:"",cu,_a={id:cr(),timestamp:xt(),modelId:e.modelId},Gn="",Bu=!1,lu=!0,Ll=!1;async function ga({controller:xr,chunk:yn}){xr.enqueue(yn),hi+=yn.textDelta,Ki+=yn.textDelta,Bu=!0,Ll=yn.textDelta.trimEnd()!==yn.textDelta}Dt.addStream(As.pipeThrough(new TransformStream({async transform(xr,yn){var tn,xa,ho;if(Uc){let _i=ot()-Rn;Uc=!1,mo.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":_i}),mo.setAttributes({"ai.response.msToFirstChunk":_i}),yn.enqueue({type:"step-start",messageId:En,request:tr,warnings:Ol??[]})}if(xr.type==="text-delta"&&xr.textDelta.length===0)return;let Hu=xr.type;switch(Hu){case"text-delta":{if(ce){let _i=lu&&on?xr.textDelta.trimStart():xr.textDelta;if(_i.length===0)break;lu=!1,Gn+=_i;let Kr=UR(Gn);Kr!=null&&(Gn=Kr.suffix,await ga({controller:yn,chunk:{type:"text-delta",textDelta:Kr.prefix+Kr.whitespace}}))}else await ga({controller:yn,chunk:xr});break}case"reasoning":{yn.enqueue(xr),uu+=xr.textDelta;break}case"tool-call":{yn.enqueue(xr),Yn.push(xr);break}case"tool-result":{yn.enqueue(xr),Qa.push(xr);break}case"response-metadata":{_a={id:(tn=xr.id)!=null?tn:_a.id,timestamp:(xa=xr.timestamp)!=null?xa:_a.timestamp,modelId:(ho=xr.modelId)!=null?ho:_a.modelId};break}case"finish":{ti=xr.usage,ei=xr.finishReason,Mf=xr.experimental_providerMetadata,cu=xr.logprobs;let _i=ot()-Rn;mo.addEvent("ai.stream.finish"),mo.setAttributes({"ai.response.msToFinish":_i,"ai.response.avgCompletionTokensPerSecond":1e3*ti.completionTokens/_i});break}case"tool-call-streaming-start":case"tool-call-delta":{yn.enqueue(xr);break}case"error":{yn.enqueue(xr),ei="error";break}default:{let _i=Hu;throw new Error(`Unknown chunk type: ${_i}`)}}},async flush(xr){let yn=Yn.length>0?JSON.stringify(Yn):void 0,tn="done";ct+1<Q&&(ce&&ei==="length"&&Yn.length===0?tn="continue":Yn.length>0&&Qa.length===Yn.length&&(tn="tool-result")),ce&&Gn.length>0&&(tn!=="continue"||jn==="continue"&&!Bu)&&(await ga({controller:xr,chunk:{type:"text-delta",textDelta:Gn}}),Gn="");try{mo.setAttributes(q_({telemetry:t,attributes:{"ai.response.finishReason":ei,"ai.response.text":{output:()=>hi},"ai.response.toolCalls":{output:()=>yn},"ai.response.id":_a.id,"ai.response.model":_a.modelId,"ai.response.timestamp":_a.timestamp.toISOString(),"ai.usage.promptTokens":ti.promptTokens,"ai.usage.completionTokens":ti.completionTokens,"gen_ai.response.finish_reasons":[ei],"gen_ai.response.id":_a.id,"gen_ai.response.model":_a.modelId,"gen_ai.usage.input_tokens":ti.promptTokens,"gen_ai.usage.output_tokens":ti.completionTokens}}))}catch{}finally{mo.end()}xr.enqueue({type:"step-finish",finishReason:ei,usage:ti,experimental_providerMetadata:Mf,logprobs:cu,request:tr,response:{..._a,headers:zn==null?void 0:zn.headers},warnings:Ol,isContinued:tn==="continue",messageId:En});let xa=TR(Mr,ti);if(tn==="done")xr.enqueue({type:"finish",finishReason:ei,usage:xa,experimental_providerMetadata:Mf,logprobs:cu,response:{..._a,headers:zn==null?void 0:zn.headers}}),Dt.closeStream();else{if(jn==="continue"){let ho=bt[bt.length-1];typeof ho.content=="string"?ho.content+=hi:ho.content.push({text:hi,type:"text"})}else bt.push(..._T({text:hi,tools:D??{},toolCalls:Yn,toolResults:Qa,messageId:En,generateMessageId:Jt}));await ir({currentStep:ct+1,responseMessages:bt,usage:xa,stepType:tn,previousStepText:Ki,hasLeadingWhitespace:Ll,messageId:tn==="continue"?En:Jt()})}}})))}await ir({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:Jt()})}}).catch(fn=>{Dt.addStream(new ReadableStream({start(ir){ir.enqueue({type:"error",error:fn}),ir.close()}})),Dt.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){let[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return sS(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.textDelta)}})))}get fullStream(){return sS(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(){let e=this.fullStream;for await(let t of e);}get experimental_partialOutputStream(){if(this.output==null)throw new RR;return sS(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:r=!1}){let n="",s=new TransformStream({async transform(h,S){S.enqueue(h),h.type==="text-delta"&&(n+=h.textDelta)}}),u=new TransformStream({transform:async(h,S)=>{let I=h.type;switch(I){case"text-delta":{S.enqueue(Lc("text",h.textDelta));break}case"reasoning":{r&&S.enqueue(Lc("reasoning",h.textDelta));break}case"tool-call-streaming-start":{S.enqueue(Lc("tool_call_streaming_start",{toolCallId:h.toolCallId,toolName:h.toolName}));break}case"tool-call-delta":{S.enqueue(Lc("tool_call_delta",{toolCallId:h.toolCallId,argsTextDelta:h.argsTextDelta}));break}case"tool-call":{S.enqueue(Lc("tool_call",{toolCallId:h.toolCallId,toolName:h.toolName,args:h.args}));break}case"tool-result":{S.enqueue(Lc("tool_result",{toolCallId:h.toolCallId,result:h.result}));break}case"error":{S.enqueue(Lc("error",e(h.error)));break}case"step-start":{S.enqueue(Lc("start_step",{messageId:h.messageId}));break}case"step-finish":{S.enqueue(Lc("finish_step",{finishReason:h.finishReason,usage:t?{promptTokens:h.usage.promptTokens,completionTokens:h.usage.completionTokens}:void 0,isContinued:h.isContinued}));break}case"finish":{S.enqueue(Lc("finish_message",{finishReason:h.finishReason,usage:t?{promptTokens:h.usage.promptTokens,completionTokens:h.usage.completionTokens}:void 0}));break}default:{let D=I;throw new Error(`Unknown chunk type: ${D}`)}}}});return this.fullStream.pipeThrough(s).pipeThrough(u)}pipeDataStreamToResponse(e,{status:t,statusText:r,headers:n,data:s,getErrorMessage:u,sendUsage:h,sendReasoning:S}={}){fT({response:e,status:t,statusText:r,headers:lT(n,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:s,getErrorMessage:u,sendUsage:h,sendReasoning:S})})}pipeTextStreamToResponse(e,t){fT({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:lT(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){let t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?pS(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning}))}toDataStreamResponse({headers:e,status:t,statusText:r,data:n,getErrorMessage:s,sendUsage:u,sendReasoning:h}={}){return new Response(this.toDataStream({data:n,getErrorMessage:s,sendUsage:u,sendReasoning:h}),{status:t,statusText:r,headers:$y(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:$y(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}};var XR="AI_NoSuchProviderError",QR=`vercel.ai.error.${XR}`,ek=Symbol.for(QR),tk;tk=ek;var rk={};fS(rk,{mergeIntoDataStream:()=>ik,toDataStream:()=>nk,toDataStreamResponse:()=>ak});function iI(e={}){let t=new TextEncoder,r="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(n,s){s.enqueue(t.encode(n)),r+=n,e.onToken&&await e.onToken(n),e.onText&&typeof n=="string"&&await e.onText(n)},async flush(){e.onCompletion&&await e.onCompletion(r),e.onFinal&&await e.onFinal(r)}})}function vS(e,t){return e.pipeThrough(new TransformStream({transform:async(r,n)=>{var s;if(typeof r=="string"){n.enqueue(r);return}if("event"in r){r.event==="on_chat_model_stream"&&gT((s=r.data)==null?void 0:s.chunk,n);return}gT(r,n)}})).pipeThrough(iI(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,n)=>{n.enqueue(Lc("text",r))}}))}function nk(e,t){return vS(e,t).pipeThrough(new TextEncoderStream)}function ak(e,t){var r;let n=vS(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),s=t==null?void 0:t.data,u=t==null?void 0:t.init,h=s?pS(s.stream,n):n;return new Response(h,{status:(r=u==null?void 0:u.status)!=null?r:200,statusText:u==null?void 0:u.statusText,headers:$y(u==null?void 0:u.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function ik(e,t){t.dataStream.merge(vS(e,t.callbacks))}function gT(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{let r=e.content;for(let n of r)n.type==="text"&&t.enqueue(n.text)}}var ok={};fS(ok,{mergeIntoDataStream:()=>ck,toDataStream:()=>sk,toDataStreamResponse:()=>uk});function mS(e,t){let r=lk();return Tb(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(n,s){s.enqueue(r(n.delta))}})).pipeThrough(iI(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,s)=>{s.enqueue(Lc("text",n))}}))}function sk(e,t){return mS(e,t).pipeThrough(new TextEncoderStream)}function uk(e,t={}){var r;let{init:n,data:s,callbacks:u}=t,h=mS(e,u).pipeThrough(new TextEncoderStream),S=s?pS(s.stream,h):h;return new Response(S,{status:(r=n==null?void 0:n.status)!=null?r:200,statusText:n==null?void 0:n.statusText,headers:$y(n==null?void 0:n.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function ck(e,t){t.dataStream.merge(mS(e,t.callbacks))}function lk(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}var RY=15*1e3;function oI(e){try{return JSON.parse(e)}catch{return null}}function sI(e){return JSON.stringify(e)}function uI(e){async function t({error:r,toolCall:n}){if(o_.isInstance(r)){let s=r.toolName.split(".");if(s.length==2){let[u,h]=s,S=$m[u],I=oI(n.args);if(S){let D={...r,event:"repair.tool"};return e.log.warn(`Tool name: ${r.toolName}`,D),"command"in S.parameters.shape&&I&&!I.command?(I.command=h,{...n,toolName:u,args:sI(I)}):{...n,toolName:u}}}if($m["multicoder_"+r.toolName]){let u="multicoder_"+r.toolName;return{...n,toolName:u}}return null}if(B_.isInstance(r)){let s=r.toolName,u=oI(r.toolArgs),h=r.cause,S=[];if(u&&Rm.isInstance(h)){let I=h.cause;if(I instanceof kc){for(let F of I.issues){let H=$m[s];if(H!=null&&H.repair){let ie=H.repair(F,u);if(typeof ie=="object")Object.assign(u,ie);else return null}else return null;S.push(F.path.join("."))}let D={...r,event:"repair.args"};return e.log.warn(`Tool arguments: ${r.toolName}.${S.join(", ")}`,D),{...n,args:sI(u)}}}return null}return null}return t}var fk=[Ny,Cy,qv,Py,L_,ma,ou,F_],$m=Object.fromEntries(fk.map(e=>[e.name,dk(e)]));function dk(e){return{...e,description:Ca(e.description),async execute(t,r){return e.execute?e.execute(t,r.abortSignal.context):"ok"}}}var cI=e=>`# Multicoder Agent

## Role and Identity

### Role Definition
You are Multicoder Agent - an AI coding assistant integrated into VS Code. Your purpose is to help developers write better code through structured requirements gathering, solution design and implementation.

### Agentic Coding
You deliver complete, high quality, fully integrated solutions to the user requests:
- Take some time to inspect and fully undestand the existing codebase
- Maintain a clear picture of project parts, interdependencies and execution flow
- Proactively ask clarifying questions
- Collect complete detailed requirements, constraints and success criteria for each task
- Investigate the existing code and find all missing information before making any decisions
- Consider multiple paths before choosing the right solution
- Use the right level of details for the design or planning documents
- Spend as much efforts and resources as required for a high quality outcome

### Technical Competencies
- Deep understanding of software engineering principles
- Strong algorithmic and system design skills
- Experience with multiple programming languages and paradigms
- Knowledge of development best practices and patterns
- Ability to analyze tradeoffs and make design decisions

## Operating Environment

### VS Code Extension
You were added to the user's development environment by installing and activating Multicoder Agent VS Code extension. As an AI Agent, you can access the project workspace using the provided tools for:
- Editor windows and open files
- Workspace folders and file system
- Source control integration
- Terminal and output panels
- Problems and diagnostics
- Testing frameworks

### Interactive Chat
You interact with a user as a chat participant in GitHub Copilot Chat. 
- Proactively ask clarifying questions using ${L_.name} tool
- Finish your responses invoking ${ma.name} tool
- Use ${ou.name} tool to provide followup actions

### Source Code
You inspect and analyze the project structure using ${Ny.name} tool
- Read the content of the project source files
- List available files and folders in project directories
- Check if the source file or directory exists

### Project Documents
The requirement specifications, design documents and implementation plans are stored separately from the project source code and available through the ${Cy.name} tool.
- Read the document content
- List available documents or document folders

### File System
You manipulate workspace files and directories using ${Py.name} tool.
- Create new directories
- Delete directories or files

### Editor
You create and modify source files and documents using ${qv.name} tool.
- Insert, modify and delete text
- Handle selections and cursors
- Format code and documents
- Apply workspace edits


## Development Workflow

### Project Understanding
- Analyze existing codebase
- Review documentation
- Identify patterns and conventions
- Map dependencies and structure

### Requirements Gathering
- Ask clarifying questions
- Validate assumptions
- Define acceptance criteria
- Document constraints

### Solution Design
- Create high-level architecture
- Define interfaces and components
- Choose appropriate patterns
- Consider alternatives
- Review tradeoffs

### Implementation Planning
- Break down into steps
- Estimate complexity
- Identify dependencies
- Define milestones

### Hierarchical Execution
- Execute step-by-step plan
- Handle subtasks recursively
- Maintain context stack
- Track progress

## Behavioral Guidelines

### Input Validation and Clarification
- Verify requirements completeness
- Resolve ambiguities early
- Ask focused questions
- Provide examples

### Response Format & Structure
- Use clear headings
- Include code blocks
- Add explanatory comments
- Show progress summaries

### Writing Style
- Be concise and direct
- Use technical terminology
- Focus on solutions
- Explain key decisions

### Coding Conventions
- Follow project style
- Use consistent naming
- Add proper comments
- Structure logically

### Development Best Practices
- Write maintainable code
- Consider performance
- Handle errors properly
- Add proper validation

### Iterative Development Approach
- Start simple
- Refine gradually
- Get feedback early
- Improve incrementally

### Error Handling and Uncertainty
- Validate inputs
- Handle edge cases
- Provide fallbacks
- Report issues clearly
`;var pk=`
You are direct and to the point. You don't waste time with pleasantries or unnecessary context. 
Your goal is to provide accurate, practical solutions to coding problems as efficiently as possible.

You use short code snippets to illustrate your points. These snippets are always properly formatted 
and indented for readability. You explain the key parts of the code, but assume a certain level of 
programming knowledge from your audience.

You often break down your answers into steps or bullet points for clarity. You're not afraid to point out 
flaws in the original question or suggest better approaches if you see them.

You include relevant documentation links or references to support your answers, but you don't just link-drop 
without explanation. You summarize the key points and explain why they're relevant.

Your tone is professional and sometimes a bit terse. You're here to solve problems, not to make friends. 
However, you're also not rude or dismissive. If a question is unclear, you ask for clarification rather than 
making assumptions.

You're aware of best practices and potential pitfalls, so you often include warnings about edge cases or 
performance issues that might not be immediately obvious.
`,vk=`
You are a seasoned software developer with a deep understanding of core programming principles and system design. 
Your experience spans multiple domains, allowing you to approach problems from various angles.

You excel at breaking down complex requirements into manageable components and designing scalable, maintainable 
solutions. Your code is clean, well-documented, and follows best practices for readability and efficiency.

You are particularly strong in algorithmic thinking and optimization. You can analyze performance bottlenecks 
and implement effective solutions, whether it's improving time complexity or reducing resource usage.

You have a solid grasp of software architecture patterns and can adapt them to fit project needs. 
You're comfortable designing and implementing APIs, working with databases, and integrating various system components.

Testing is integral to your development process. You write comprehensive unit tests and understand 
the value of integration and end-to-end testing in ensuring robust, reliable software.

You stay current with industry trends and continuously refine your skills. However, you're pragmatic in your approach, 
focusing on proven technologies that add real value rather than chasing every new trend.

Debugging and troubleshooting are areas where you shine. You can quickly isolate issues in complex systems 
and implement effective fixes.

Lastly, you're a strong communicator. You can explain technical concepts clearly to both technical 
and non-technical stakeholders, facilitating better collaboration across teams.
`,mk=`
When designing and building complex code, your thought process typically follows these steps:

You start by thoroughly analyzing the problem domain. You break down the requirements, 
identifying the core functionalities and potential edge cases.

Next, you consider the overall architecture. You think about how different components will interact, 
data flow, and potential bottlenecks. You often sketch out high-level diagrams to visualize the system structure.

You evaluate trade-offs between different design patterns and approaches. You consider factors like scalability, 
maintainability, and performance. You try to anticipate future requirements to make the system extensible.

Before diving into implementation, you plan out the data structures and algorithms you'll use. 
You consider time and space complexity, thinking about how the solution will perform with larger datasets.

You break the problem down into smaller, manageable modules or functions. You define clear interfaces 
between these components, thinking about how they'll be tested in isolation.

As you start coding, you focus on creating a minimal viable implementation of each component. 
You write unit tests alongside the code, using test-driven development where appropriate.

You constantly refactor as you go, looking for opportunities to improve code clarity and efficiency. 
You're always thinking about how another developer would read and understand your code.

For particularly complex parts, you often step back and reconsider your approach. Sometimes you'll implement 
a quick prototype to validate a concept before fully committing to it.

Throughout the process, you document your code and decisions. You write clear comments explaining the 'why' 
behind complex logic, not just the 'what'.

As the system comes together, you start thinking about integration testing and how different components interact. 
You look for potential race conditions or unexpected behaviors in the system as a whole.

Finally, you review the entire solution, considering aspects like error handling, logging, and monitoring. 
You think about how the system will behave in production and what tools will be needed to maintain it.

This process is iterative, and you're always ready to revisit earlier decisions as new information or challenges arise. The goal is to create a robust, efficient, and maintainable solution that solves the problem at hand while being flexible enough to adapt to future needs.
`;async function lI(){return[qm([{"Writing style":pk,"Software development experience":vk,"Coding process":mk}]),Bv("Agreed. I will strictly follow these instructions.")]}var Mg=require("vscode");async function fI(e){let t=[];if(Mg.workspace.workspaceFolders&&t.push(await Um(Da(".",e.id))),Mg.window.activeTextEditor){let r=Af(Mg.window.activeTextEditor.document.uri).split("/");for(let n=1;n<r.length;n++)t.push(await Um(Da(r.slice(0,n).join("/"),e.id)));t.push(await rE())}return t.length?[qm(...t),Bv("Ok. How can I help you?")]:[]}var vo=require("vscode");async function dI(e){let{request:t}=e,r=[];for(let{id:n,name:s,modelDescription:u,value:h}of t.references){let S=String(h);if(n!="vscode.implicit.viewport"){if(h instanceof vo.Uri){let I=await vo.workspace.fs.stat(h);I.type&vo.FileType.File?S=await O_(h):I.type&vo.FileType.Directory&&(S=await Um(h))}else h instanceof vo.Location&&(S=await Qb(h.uri,s,h.range));u&&(s+=` (${u})`),r.push(S)}}for(let{name:n}of t.toolReferences){let s=vo.lm.tools.find(S=>S.name==n),u=s==null?void 0:s.inputSchema;if(!u)continue;let{required:h}=u;if(n=="copilot_getChangedFiles"&&String(h)=="workspacePaths"&&vo.workspace.workspaceFolders){let S=vo.workspace.workspaceFolders.map(({uri:F})=>F.fsPath),I={workspacePaths:S},D=await By(n,I,e);r.push(...D)}else if(n=="copilot_getErrors"&&String(h)=="filePaths"){let S=Qg(),I=S.map(({path:H})=>H),D={filePaths:I},F=await By(n,D,e);r.push(...F)}else if(n=="copilot_testFailure"){let S=await By(n,{},e);r.push(...S)}else if(String(h)=="query"){let S=t.prompt,I={query:S},D=await By(n,I,e);r.push(...D)}}return r.length?[qm(...r),Bv("Ok. How should I proceed?")]:[]}async function By(e,t,{request:r,stream:n,token:s}){let u=await vo.lm.invokeTool(e,{input:t,toolInvocationToken:r.toolInvocationToken},s),h=[];for(let S of u.content)if(S instanceof vo.LanguageModelTextPart)h.push(S.value);else if(S instanceof vo.LanguageModelPromptTsxPart){let{text:I,refs:D}=hk(S);h.push(I),D.forEach(F=>n.reference(F))}return h}function hk(e){let t=[],r=[];function n({text:s,children:u,references:h,lineBreakBefore:S}){S&&t.push(`
`),Array.isArray(h)&&h.forEach(({anchor:I})=>{try{let{external:D,scheme:F,authority:H,path:ie,query:me,fragment:re}=I;D?r.push(vo.Uri.parse(D)):r.push(vo.Uri.from({scheme:F,authority:H,path:ie,query:me,fragment:re}))}catch{}}),Array.isArray(u)?u.forEach(n):typeof s=="string"&&t.push(s)}return n(e.value.node),{text:t.join(""),refs:r}}var _k=`
<table><tr><td>
    <span class="codicon codicon-run-all" style="color:var(--vscode-textLink-foreground);"></span>
</td><td>
    <span  style="color:var(--vscode-textLink-foreground);">Running in automatic mode. Press the stop button to switch</span>
</td></tr></table>
`;async function pI(e,t){let{log:r,stream:n,shared:s,request:u,messages:h}=e,S="chat.next";if(h.length||(S="chat.start",e.resume=null,h.push(...await lI()),h.push(...await fI(e))),s.edits||(s.edits=[],s.phase="",Cw()),s.auto&&(u.command=="resume"?n.markdown(`

Resuming iterrupted task

`):e.resume=null),s.auto=u.command=="auto",s.auto){let H=new s_.MarkdownString("");H.supportHtml=!0,H.supportThemeIcons=!0,H.appendMarkdown(_k),e.stream.markdown(H)}e.interrupted=null,e.token.onCancellationRequested(async H=>{if(r.warn("Interrupted",{event:"chat.stop"}),e.interrupted=Hp(e,{}),s.auto){let ie=e.interrupted,me=await s_.window.showInformationMessage("Stopped automatic mode task","Resume interactive","Stop");me&&me.startsWith("Resume")&&(e.interrupted===ie?s_.commands.executeCommand("workbench.action.chat.open","@multicoder /resume"):await s_.window.showInformationMessage("Chat window already in use"))}});let I=u.references.map(({id:H,name:ie})=>ie+" "+H).join(`
`),D=u.toolReferences.map(({name:H})=>H).join(`
`),F=(u.command?"/"+u.command+" ":"")+u.prompt;return r.info(F,{event:S,command:u.command,references:I,toolrefs:D}),h.push(...await dI(e)),new Promise((H,ie)=>{let me=0,re=Q=>r.error(new Error(Q));if(e.resolve=Q=>me++?re("Resolve closed promise"):H(Q),e.reject=Q=>me++?re("Reject closed promise"):ie(Q),e.resume){let Q=e.resume;return e.resume=null,Q(e.request)}Promise.resolve(t(e)).then(Q=>e.resolve(Q)).catch(Q=>e.reject(Q))})}function Hp(e,t){return new Promise(r=>{e.resume=r,e.resolve(t)})}var Hy="experimental_providerMetadata";function vI(e){let t=e.filter(({role:h})=>h=="user"||h=="tool"),r=e.filter(({role:h})=>h=="assistant");function n(h,{content:S}){var I;return h+(Array.isArray(S)&&((I=S[S.length-1])!=null&&I[Hy])?1:0)}function s(h){let{content:S}=h;Array.isArray(S)||(S=[{type:"text",text:S}]),S[S.length-1][Hy]={anthropic:{cacheControl:{type:"ephemeral"}}},h.content=S}function u(h){let{content:S}=h;Array.isArray(S)&&S[S.length-1][Hy]&&delete S[S.length-1][Hy]}r.reduce(n,0)||s(r.pop()),s(t.pop()),t.slice(0,-2).forEach(u)}var zy=class{constructor(t,r){this.role=t,this.content=r}};function qm(...e){let t=e.map(r=>({type:"text",text:Ca(r)}));return new zy("user",t)}function Bv(e){return{role:"assistant",content:[{type:"text",text:Ca(e)}]}}function Wp(e,t){let r=e.messages,n=r.pop();if(t instanceof zy)if(n.role=="assistant"&&t.role=="user"||n.role!="assistant"&&t.role=="assistant")r.push(n,t);else throw new Error("Invalid message sequence");else if(n.role=="assistant")r.push(n,qm(t));else if(n.role=="user"){let{content:s}=n;s=Array.isArray(s)?s.slice():[{type:"text",text:s}],s.push({type:"text",text:Ca(t)}),r.push({role:"user",content:s})}else if(n.role=="tool"){let s=n.content.slice();s.push({...s.pop(),result:Ca(t)}),r.push({role:"tool",content:s})}else throw new Error("Invalid message role")}var gk=1e3,yk=100;async function Gy(e,t,r=""){let{log:n,stream:s,model:u,messages:h}=e;Wp(e,t);let S=0,I=0,D=0,F=0,H=0,ie=.2,me=ie,re=me;function Q(ce,ge,Ue={}){s.markdown(""),s.progress(`Retrying (${ge}): ${ce}`),re=me+.2*ge,n.warn(ce,{...Ue,count:ge,temperature:re,event:"retry."+ge})}let ne=0;for(;;){if(vI(h),await e.interrupted,++ne>yk)throw new Error("Max requests per turn achieved: "+ne);if(++e.counter>gk)throw new Error("Max total requests achieved: "+e.counter);let ce=new AbortController,ge=ce.signal,Ue=e.token;ge.context=e;let we=await aI({model:u,system:cI(u),messages:h,tools:$m,temperature:re,maxTokens:8192,maxSteps:1,abortSignal:ge,experimental_toolCallStreaming:!0,experimental_repairToolCall:uI(e)}),qe=!1;for await(let Nt of we.fullStream){if(Ue.isCancellationRequested)break;switch(Nt.type){case"text-delta":s.markdown(Nt.textDelta);break;case"tool-call-streaming-start":let Un=$m[Nt.toolName].progress;Un&&(s.markdown(""),s.progress(Un));break;case"error":if(o_.isInstance(Nt.error)&&++S<=5){qe=!0;let tt=`Unknown tool ${Nt.error.toolName}`;Q(tt,S,Nt.error);break}if(B_.isInstance(Nt.error)&&++S<=5){qe=!0;let tt=`Invalid arguments for tool ${Nt.error.toolName}`;Q(tt,S,Nt.error);break}if(dS.isInstance(Nt.error)&&++S<=5){qe=!0,Q("Tool call repair failed",S,Nt.error);break}let{event:ha,count:Vr,message:Xr}=Nt.error;if(ha=="retry"){Q(Xr,Vr,Nt.error),re=me;break}throw Nt.error}}if(e.interrupted){await e.interrupted;continue}let lt=await we.response,ot=await we.toolCalls,xt=await we.toolResults;if(qe)continue;S=0;let cr="";for(let Nt of xt)Nt.result.startsWith("Tool error: ")&&(cr=Nt.result.slice(12));if(cr)if(++I<3){Q(cr,I);continue}else if(++D<3)Q("Tool execution error",D),me=ie+.2*D;else throw new Error(cr);else D=0,me=ie;if(I=0,lt.messages.length==1){let{role:Nt,content:Un}=lt.messages[0];if(Nt=="assistant"&&Array.isArray(Un)&&Un.length==1){let ha=Un[0];if(ha.type=="text"&&ha.text===""&&++F<=5){Q("Empty response",F),await S_(5*F,Ue);continue}}}F=0,re=me,h.push(...lt.messages);let Jt=h.pop();for(let{toolName:Nt,toolCallId:Un,args:ha,result:Vr}of xt){let Xr=$m[Nt];if(Xr!=null&&Xr.finalize){let tt=await Xr.finalize(ha,e,Vr);if(Jt.role=="tool"){let Ya=Jt.content.find(je=>je.toolCallId==Un);Ya&&(Ya.result=tt)}}}if(h.push(Jt),ot.length){H=0;for(let Nt of ot)if(Nt.toolName==r)return Nt.args}else if(r){let Nt=$m[r];if(++H>3){if(Nt.fallback)return Nt.fallback();throw new Error(`Unable to call ${r} tool`)}Q("Unexpected stop",H,{name:r}),await S_(5*H,Ue),h.push(qm(Nt.retry||`Reply using ${r} tool`))}else return}}async function Ps(e,t,r,n=""){return n&&(e.stream.markdown(""),e.stream.progress(n)),Gy(e,r,t.name)}function Of(e){let t=e.messages.concat();return{restore(){e.messages.length=0,e.messages.push(...t)}}}var H_={clarify:"Requirements",design:"Solution design",plan:"Planning"};async function Hv(e,t=0,r=0,n=0){switch(e.request.command){case"chat":return"";case"spec":return"spec";case"design":return"design";case"plan":return"plan"}let s=`Evaluate the task and reply using ${F_.name} tool, taking into account the included documents (if any)`,u=Of(e),h=await Ps(e,F_,s,"Deciding next steps...");e.stream.markdown(""),u.restore();let[S,I,D]=F_.compute(h),F="implement";return h.architecturalScale==0&&!t?"":(h.splitIntoParts&&t<3&&(F="plan"),h.designSolution&&!n&&(F="design"),h.clarifyRequirements&&!r&&!n&&!t&&(F="spec"),!n&&I>2.5&&F!="spec"&&(F="design"),D>2&&F=="implement"&&t<1&&(F="plan"),F)}var wh=require("vscode");var{fs:hI}=wh.workspace;async function Jp(e,t){for(let[r,n]of await hI.readDirectory(Da(t,e.id)))n&wh.FileType.File&&Wp(e,await M_(Da(t+"/"+r,e.id)))}async function _I(e){try{if(!((await hI.stat(e)).type&wh.FileType.File))return null}catch{return null}let t=await wh.commands.executeCommand("vscode.executeDocumentSymbolProvider",e);if(!t||t.length===0)return null;let r=await wh.workspace.openTextDocument(e),n=t[0],s=mI(n.name),u=n.children.map(({name:h,range:S})=>({header:mI(h),content:r.getText(S).slice(h.length).trim()}));return{title:s,items:u}}function mI(e){return e=e.replace(/^#+\s+/,""),e=e.replace(/^Step \d+[\.:]*\s+/,""),e=e.replace(/^\d+[\.:]+\s+/,""),e}var Sk=e=>qr`
    Use ${qv.name} tool to create requirements document in the ${e}/ directory.
    Clarify the request, removing any ambiguities or omissions.
    Use ${L_.name} tool to obtain the missing information.
    For the existing project, include implied requirements derived from the project configuration and context.
    Focus strictly on the requirements - DO NOT try to design the solution, define data structures or write some code at this point.
    Adjust the content and structure according to the task complexity (should very short and simple for trivial tasks).
    Produce a minimal, but complete document, do not leave any open questions for the future.
    Use a very dense, concise writing style.
    Provide a short summary using ${ma.name} tool.
`,wk=e=>qr`
    Make the following changes in the requirement document(s):
    <changes>
      ${e}
    </changes>
    Modify the document(s), then deliver a very short summary using ${ma.name} tool.
`,bk=()=>qr`
    Carefully review the requirements document to find any missing elements.
    Add or correct any significant items and remove anything that is not strictly necessary.
    Focus strictly on the requirements - DO NOT try to design the solution, define data structures or write some code at this point.
`,Ek=()=>qr`
    Suggest possible changes which may make the requirements more clear, precise and easy to understand. 
    Include optional elements, alternative approaches or high-level improvements.
    Offer them as followup actions using ${ou.name} tool.
    Only include the actions which improve the content of the requirement specification document(s).
`;async function gI(e,t,r){let{shared:n}=e,s=Of(e),u="";for(n.phase="spec",await Jp(e,r),await Ps(e,ma,Sk(r),"Creating requirements spec...");;){let h=[];if(!n.auto){let{actions:F}=await Ps(e,ou,Ek());h=F.map(H=>({command:"",prompt:H,label:H}))}if(s.restore(),await Jp(e,r),u=await Hv(e,t,1),n.auto)break;let S=(H_[u]||"implementation").toLowerCase();h.push({command:"",prompt:"i",label:"\u2B6E\xA0 review and improve"}),h.push({command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"}),h.push({command:"",prompt:"",label:`\u25B7\xA0 next step - ${S} (Enter)`});let I=await Hp(e,{followups:h});if(I.command=="auto"||!I.prompt&&!I.command)break;let D=I.prompt=="i"?bk():I.prompt;await Ps(e,ma,wk(D),"Updating requirements...")}return n.phase="",u}var Tk=e=>qr`
    Use ${qv.name} tool to create solution design document(s) in the ${e}/ directory.
    Analyze the current project, do the research and design the solution.
    Your goal is to find the most simple solution, very easy to understand and maintain. 
    Only include the features which are explicitely required. Skip anything that can be added at a later stage.
    Adjust the content and structure of the spec according to the task complexity (should very short and simple for trivial tasks).
    Apply a very dense, concise writing style.
    Provide a short specification summary using ${ma.name} tool.
`,Ik=e=>qr`
    Make the following changes in the solution design document(s):
    <changes>
      ${e}
    </changes>
    Modify the document(s), then deliver a very short summary using ${ma.name} tool.
`,Nk=()=>qr`
    Carefully review the design document(s) to find any missing elements.
    Add or correct any significant items and remove anything that is not strictly necessary.
    Focus strictly on the solution design - DO NOT try to write code, DO NOT make step-by-step plan at this point.
`,Dk=()=>qr`
    Suggest possible changes which may make the solution design more clear, precise and easy to understand. 
    Include optional elements, alternative solutions or high-level improvements.
    Offer them as followup actions using ${ou.name} tool.
    Only include the actions which improve the content of the solution design document(s).
`;async function yI(e,t,r){let{shared:n}=e,s=Of(e),u="";for(n.phase="design",await Jp(e,r),await Ps(e,ma,Tk(r),"Designing solution...");;){let h=[];if(!n.auto){let{actions:F}=await Ps(e,ou,Dk());h=F.map(H=>({command:"",prompt:H,label:H}))}if(s.restore(),await Jp(e,r),u=await Hv(e,t,1,1),n.auto)break;let S=(H_[u]||"implementation").toLowerCase();h.push({command:"",prompt:"i",label:"\u2B6E\xA0 review and improve"}),h.push({command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"}),h.push({command:"",prompt:"",label:`\u25B7\xA0 next step - ${S} (Enter)`});let I=await Hp(e,{followups:h});if(I.command=="auto"||!I.prompt&&!I.command)break;let D=I.prompt=="i"?Nk():I.prompt;await Ps(e,ma,Ik(D),"Updating design...")}return n.phase="",u}var Ck=e=>qr`
    Use ${qv.name} tool to create ${e} file containing the detailed implementation plan for this task.
    Split the task into smaller, more manageable steps and specify what should be done at each step.
    Strictly follow the requirements and design documents if available. 
    Only plan for elements and features which are explicitely included in the specs and design.
    Take into account the changes already made in the previous tasks.
    Carefully think through all steps and mentally verify the proposed implementation.
    Follow KISS, YAGNI and SOLID principles, focus on simplicity above all other things.
    This plan is for an implementation by an AI coding agent, it must exclude any human activities (meetings, peer review, manual testing etc)
    Only use the capabilities and the information which you as an AI coding agent have explicit access to as part of this project.
    The document should contain a title and multiple sections (linear structure, no nested sub-sections)
    Each section represents one step of the plan and consists of a header and a step description.
    If the amount of work is very small, describe it as one single step (title with plain text, no section heading).
    Use a very dense, concise writing style.
    Provide a short summary using ${ma.name} tool.
`,xk=e=>qr`
    Make the following changes in the implementation plan:
    <changes>
      ${e}
    </changes>
    Modify the document(s), then deliver a very short summary using ${ma.name} tool.
`,Pk=()=>qr`
    Carefully analyse each section of the plan to identify any inconsistencies or logical errors. 
    Check for edge cases, cross-dependencies and anything, that can affect successful implementation.
`,Ak=()=>qr`
    Suggest possible changes which will make the implementation plan more clear, precise and easy to understand. 
    Include optional elements, alternative implementations or high-level improvements.
    Offer them as followup actions using ${ou.name} tool.
    Only include the actions which improve the content of the implementation plan.
`;async function SI(e,t,r){let{shared:n}=e,s=Of(e),u=r+"/implementation_plan.md",h="";for(n.phase="plan",await Jp(e,r),await Ps(e,ma,Ck(u),"Planning..."),e.shared.phase="plan";;){let S=[];if(!n.auto){let{actions:H}=await Ps(e,ou,Ak());S=H.map(ie=>({command:"",prompt:ie,label:ie}))}if(s.restore(),await Jp(e,r),h=await Hv(e,t,1,1),n.auto)break;let I=(H_[h]||"implementation").toLowerCase();S.push({command:"",prompt:"i",label:"\u2B6E\xA0 review and improve"}),S.push({command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"}),S.push({command:"",prompt:"",label:"\u25B7\xA0 next step - implementation (Enter)"});let D=await Hp(e,{followups:S});if(D.command=="auto"||!D.prompt&&!D.command)break;let F=D.prompt=="i"?Pk():D.prompt;await Ps(e,ma,xk(F),"Updating planning...")}return n.phase="","implement"}var NI=require("vscode");var Yd=require("vscode");function Bm(){}Bm.prototype={diff:function(t,r){var n,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=s.callback;typeof s=="function"&&(u=s,s={}),this.options=s;var h=this;function S(we){return u?(setTimeout(function(){u(void 0,we)},0),!0):we}t=this.castInput(t),r=this.castInput(r),t=this.removeEmpty(this.tokenize(t)),r=this.removeEmpty(this.tokenize(r));var I=r.length,D=t.length,F=1,H=I+D;s.maxEditLength&&(H=Math.min(H,s.maxEditLength));var ie=(n=s.timeout)!==null&&n!==void 0?n:1/0,me=Date.now()+ie,re=[{oldPos:-1,lastComponent:void 0}],Q=this.extractCommon(re[0],r,t,0);if(re[0].oldPos+1>=D&&Q+1>=I)return S([{value:this.join(r),count:r.length}]);var ne=-1/0,ce=1/0;function ge(){for(var we=Math.max(ne,-F);we<=Math.min(ce,F);we+=2){var qe=void 0,lt=re[we-1],ot=re[we+1];lt&&(re[we-1]=void 0);var xt=!1;if(ot){var cr=ot.oldPos-we;xt=ot&&0<=cr&&cr<I}var Jt=lt&&lt.oldPos+1<D;if(!xt&&!Jt){re[we]=void 0;continue}if(!Jt||xt&&lt.oldPos+1<ot.oldPos?qe=h.addToPath(ot,!0,void 0,0):qe=h.addToPath(lt,void 0,!0,1),Q=h.extractCommon(qe,r,t,we),qe.oldPos+1>=D&&Q+1>=I)return S(Rk(h,qe.lastComponent,r,t,h.useLongestToken));re[we]=qe,qe.oldPos+1>=D&&(ce=Math.min(ce,we-1)),Q+1>=I&&(ne=Math.max(ne,we+1))}F++}if(u)(function we(){setTimeout(function(){if(F>H||Date.now()>me)return u();ge()||we()},0)})();else for(;F<=H&&Date.now()<=me;){var Ue=ge();if(Ue)return Ue}},addToPath:function(t,r,n,s){var u=t.lastComponent;return u&&u.added===r&&u.removed===n?{oldPos:t.oldPos+s,lastComponent:{count:u.count+1,added:r,removed:n,previousComponent:u.previousComponent}}:{oldPos:t.oldPos+s,lastComponent:{count:1,added:r,removed:n,previousComponent:u}}},extractCommon:function(t,r,n,s){for(var u=r.length,h=n.length,S=t.oldPos,I=S-s,D=0;I+1<u&&S+1<h&&this.equals(r[I+1],n[S+1]);)I++,S++,D++;return D&&(t.lastComponent={count:D,previousComponent:t.lastComponent}),t.oldPos=S,I},equals:function(t,r){return this.options.comparator?this.options.comparator(t,r):t===r||this.options.ignoreCase&&t.toLowerCase()===r.toLowerCase()},removeEmpty:function(t){for(var r=[],n=0;n<t.length;n++)t[n]&&r.push(t[n]);return r},castInput:function(t){return t},tokenize:function(t){return t.split("")},join:function(t){return t.join("")}};function Rk(e,t,r,n,s){for(var u=[],h;t;)u.push(t),h=t.previousComponent,delete t.previousComponent,t=h;u.reverse();for(var S=0,I=u.length,D=0,F=0;S<I;S++){var H=u[S];if(H.removed){if(H.value=e.join(n.slice(F,F+H.count)),F+=H.count,S&&u[S-1].added){var me=u[S-1];u[S-1]=u[S],u[S]=me}}else{if(!H.added&&s){var ie=r.slice(D,D+H.count);ie=ie.map(function(Q,ne){var ce=n[F+ne];return ce.length>Q.length?ce:Q}),H.value=e.join(ie)}else H.value=e.join(r.slice(D,D+H.count));D+=H.count,H.added||(F+=H.count)}}var re=u[I-1];return I>1&&typeof re.value=="string"&&(re.added||re.removed)&&e.equals("",re.value)&&(u[I-2].value+=re.value,u.pop()),u}var y4=new Bm;var wI=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,bI=/\S/,EI=new Bm;EI.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!bI.test(e)&&!bI.test(t)};EI.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),r=0;r<t.length-1;r++)!t[r+1]&&t[r+2]&&wI.test(t[r])&&wI.test(t[r+2])&&(t[r]+=t[r+2],t.splice(r+1,2),r--);return t};var gS=new Bm;gS.tokenize=function(e){this.options.stripTrailingCr&&(e=e.replace(/\r\n/g,`
`));var t=[],r=e.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var n=0;n<r.length;n++){var s=r[n];n%2&&!this.options.newlineIsToken?t[t.length-1]+=s:(this.options.ignoreWhitespace&&(s=s.trim()),t.push(s))}return t};function TI(e,t,r){return gS.diff(e,t,r)}var kk=new Bm;kk.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var Ok=new Bm;Ok.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function Vy(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Vy=function(t){return typeof t}:Vy=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vy(e)}var Mk=Object.prototype.toString,Lg=new Bm;Lg.useLongestToken=!0;Lg.tokenize=gS.tokenize;Lg.castInput=function(e){var t=this.options,r=t.undefinedReplacement,n=t.stringifyReplacer,s=n===void 0?function(u,h){return typeof h>"u"?r:h}:n;return typeof e=="string"?e:JSON.stringify(hS(e,null,null,s),s,"  ")};Lg.equals=function(e,t){return Bm.prototype.equals.call(Lg,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function hS(e,t,r,n,s){t=t||[],r=r||[],n&&(e=n(s,e));var u;for(u=0;u<t.length;u+=1)if(t[u]===e)return r[u];var h;if(Mk.call(e)==="[object Array]"){for(t.push(e),h=new Array(e.length),r.push(h),u=0;u<e.length;u+=1)h[u]=hS(e[u],t,r,n,s);return t.pop(),r.pop(),h}if(e&&e.toJSON&&(e=e.toJSON()),Vy(e)==="object"&&e!==null){t.push(e),h={},r.push(h);var S=[],I;for(I in e)e.hasOwnProperty(I)&&S.push(I);for(S.sort(),u=0;u<S.length;u+=1)I=S[u],h[I]=hS(e[I],t,r,n,I);t.pop(),r.pop()}else h=e;return h}var _S=new Bm;_S.tokenize=function(e){return e.slice()};_S.join=_S.removeEmpty=function(e){return e};async function II(e,t,r){let n=(...H)=>`command:multicoder.diffView?${encodeURIComponent(JSON.stringify(H))}`,s=H=>`<span class="codicon codicon-${H}" style="color:var(--vscode-foreground);"></span>`,u=new Yd.MarkdownString(`

`);u.supportHtml=!0,u.supportThemeIcons=!0,u.isTrusted={enabledCommands:["multicoder.diffView"]},u.appendMarkdown(`<h3>${s("check")} ${r}</h3>

`),t.forEach(({summary:H,path:ie,id:me})=>{u.appendMarkdown(`- [${H}](${n(ie,me,e.id)} 'Open Diff')
`)}),u.appendMarkdown(`

`),e.stream.markdown(u),e.stream.button({title:"Apply All",command:"multicoder.action",arguments:[F],tooltip:"Shows confirmation panel (refactor preview)"});let h=new Set(t.map(({path:H})=>H)),S=Qg(),I=new Map;async function D(H){try{return await vh(H)}catch{return""}}for(let H of h.values()){let ie="",me="",re=Da(H,e.id),Q=$u(re);S.find(ne=>ne.path===Q.path)?ie=(await Yd.workspace.openTextDocument(Q)).getText():ie=await D(Q),me=await D(re),I.set(H,{before:ie,after:me})}async function F(){let H=new Yd.WorkspaceEdit;for(let ie of h.values()){let{before:me,after:re}=I.get(ie)||{},Q=$u(Da(ie,e.id));me||(Q=Q.with({scheme:"untitled"}));let ne=await Yd.workspace.openTextDocument(Q),ce=ne.getText(),ge=re;ce!==ge&&Lk(H,Q,ce,ge,!0)}await Yd.workspace.applyEdit(H),e.log.info(r,{event:"action.all"})}}function Lk(e,t,r,n,s=!1,u=""){let h=TI(r,n,{ignoreWhitespace:!1}),S=0,I={needsConfirmation:s,label:u};for(let D=0;D<h.length;D++){let F=h[D];if(F.removed){let H=new Yd.Range(S,0,S+F.count,0),ie=h[++D];ie.added?e.replace(t,H,ie.value,I):(e.delete(t,H,I),S+=(ie==null?void 0:ie.count)||0)}else F.added&&(e.insert(t,new Yd.Position(S,0),F.value,I),S-=F.count);S+=F.count}}var Fk=(e,t,r)=>`
<table><tr><th> $(list-tree) ${e} (${t+1}/${r})</th></tr></table>
`;async function DI(e,t,r,n,s){let u=null,h=await _I(Da(n+"/implementation_plan.md",e.id)),S=e.shared.edits.length;if(await Jp(e,n),!h||h.items.length==1){let I=`Implement the task, then deliver the summary using ${ma.name} tool.`;u=await Ps(e,ma,I)}else{Wp(e,Bv(`Do you want me to work on ${h.title}?`));for(let D=0;D<h.items.length;D++){let F=Of(e),H=h.items[D],ie=(s?s+".":"")+(D+1),me=e.shared.edits.length,re=new NI.MarkdownString("");re.supportHtml=!0,re.supportThemeIcons=!0,re.appendMarkdown(Fk(H.header,D,h.items.length)),e.stream.markdown(re),Wp(e,[`We will now work on the step ${D+1}:`,{[H.header]:H.content}]);let Q=await Hv(e,r+1,1),ne=await yS(e,Q,r+1,n+"/"+(D+1),H.header,ie);F.restore();let ce=e.shared.edits.slice(me),ge=ce.map(({summary:we})=>we),Ue=ce.map(({path:we})=>we);Wp(e,[`Completed step ${D+1}: ${H.header}`,ne.text,fg("Done:",kl(ge)),fg("Created or modified files:",kl(Ue))])}let I=qr`
            We have now implemented all the steps of the plan: ${h.title}
            Deliver the summary of this work using ${ma.name} tool.
        `;u=await Ps(e,ma,I)}if(e.shared.auto&&r)return u;for(;;){let I=e.shared.edits.slice(S);if(I.length>1&&await II(e,I,t||(h==null?void 0:h.title)||"Task completed"),!r)return u;let F=await Hp(e,{followups:[{command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"},{command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"}]});if(F.command=="auto"||!F.command&&!F.prompt)return u;S=e.shared.edits.length,await Ps(e,ma,F.prompt)}}var Uk=".multicoder/task",jk=10,Yk=10;async function yS(e,t,r=0,n=Uk,s="",u=""){let h=Of(e),S=0;if(r>jk)throw new Error("Max depth achieved: "+r);for(;;){if(h.restore(),e.shared.phase="",++S>Yk)throw new Error("Max iterations achieved: "+S);if(e.log.info(`${u} ${s}`,{event:"step."+t}),!t)return{};if(t=="spec"){t=await gI(e,r,n);continue}if(t=="design"){t=await yI(e,r,n);continue}if(t=="plan"){t=await SI(e,r,n);continue}return await DI(e,s,r,n,u)}}async function CI(e){let{prompt:t}=e.request,r=Of(e);if(!t){await Gy(e,`Explain what could be done here. Then use ${ou.name} tool to suggest some actions`);return}Wp(e,[fg("We have a new request:",Cs("request",t))]);let n=await Hv(e);n?(await yS(e,n),Wp(e,Bv(" "))):(r.restore(),await Gy(e,t))}var PI=require("vscode"),$k=()=>`
Multicoder can work with LLM models provided by **GitHub Copilot** (default configuration) or 
send requests directly to the core provider APIs (**Anthropic**, **OpenAI**).

If you have your own API key and want to use it instead of the Github models, select 'Core Providers' in the Model Provider dropdown (settings panel)
and set your API key(s) using the buttons below.

`;async function xI(e,t){var n;let r=await e.ext.secrets.get(t)||((n=process==null?void 0:process.env)==null?void 0:n[t]);return r&&r.slice(0,12)+"..."+r.slice(-4)}async function SS(e){let{log:t,stream:r}=e;PI.commands.executeCommand("workbench.action.openSettings","@ext:multicoder.multicoder"),t.info("options",{event:"options"}),r.markdown($k());let n=await xI(e,"ANTHROPIC_API_KEY");r.markdown(`Anthropic API key: ${n}`),r.button({command:"multicoder.storeApiKey",title:"Set Anthropic key",arguments:["ANTHROPIC_API_KEY","Anthropic API key"]}),r.markdown(`

`);let s=await xI(e,"OPENAI_API_KEY");r.markdown(`OpenAI API key: ${s}`),r.button({command:"multicoder.storeApiKey",title:"Set OpenAI key",arguments:["OPENAI_API_KEY","OpenAI API key"]})}var AI,RI;async function qk(e){var H,ie;let{request:t,ext:r}=e,n=t.model.id,s=zv.workspace.getConfiguration("multicoder"),u=s.get("modelProvider");if(n==AI&&u==RI&&e.model)return;AI=n,RI=u;let h=t.model.family;if(h.startsWith("o1")&&(h="gpt-4o"),u=="default"&&(u="copilot"),u=="copilot"){e.model=B0({id:h,provider:"copilot",apiKey:""});return}if(u=="auto"&&(u=(H=H0.find(me=>me.family==h))==null?void 0:H.provider,!u))throw new Error("Cannot find model: "+h);let S=Jb.find(me=>me.id==u),I=H0.find(me=>me.provider==u&&me.family==h),{envKeyName:D}=S,F=await r.secrets.get(D)||((ie=process==null?void 0:process.env)==null?void 0:ie[D]);if(!F){await SS(e);return}e.model=B0({...I,apiKey:F})}function Bk({history:e}){for(let t=e.length-1;t>=0;t--){let r=e[t];if(r instanceof zv.ChatResponseTurn){let{id:n,messages:s}=r.result.metadata||{};if(n)return[n,s]}}return[]}function kI(e){let{ext:t,log:r,recent:n}=e,s=zv.chat.createChatParticipant("multicoder",async(F,H,ie,me)=>{let[re,Q]=Bk(H),{sessionId:ne}=F.toolInvocationToken,ce=re&&n.get(re);!ce&&ne&&(ce=n.get(ne)),re??(re=Xg()),Q??(Q=[]),ce||(ce={id:re,messages:Q,shared:{},...e,request:{},chat:{},stream:{}},ce.log={...e.log,context:ce}),re=ce.id,n.set(re,ce),ne&&n.set(ne,ce),Object.assign(ce,{token:me}),Object.assign(ce.request,F),Object.assign(ce.chat,H),Object.assign(ce.stream,ie),ce.followups=[],ce.counter=0,D(ce.request);try{if(await qk(ce),!ce.model)return;if(F.command=="options")return await SS(ce),{metadata:{id:re,messages:Q}};let ge=await pI(ce,CI)||{};return ge.id=re,ge.messages=ce.messages,ge.followups??(ge.followups=ce.followups),{metadata:ge}}catch(ge){throw r.error(ge),ce.model=null,ge}});s.iconPath=zv.Uri.joinPath(t.extensionUri,"resources","multicoder.png"),s.onDidReceiveFeedback(({kind:F})=>{r.info(F?"Good":"Bad",{event:"feedback"})});let u=t.extension.packageJSON.contributes.chatParticipants[0].commands,h=u.filter(({when:F})=>F==null?void 0:F.startsWith("!")).map(({name:F})=>F),S=[...h,"resume"];s.followupProvider={provideFollowups(F){var H;return I(F.metadata?F.metadata.commands:S),((H=F.metadata)==null?void 0:H.followups)||[]}};function I(F){for(let{name:H,when:ie}of u){let me=!!F&&F.includes(H)!=ie.startsWith("!");zv.commands.executeCommand("setContext",ie.replace("!",""),me)}}function D(F){!F.command&&u.find(({name:H})=>"/"+H==F.prompt)&&(r.warn("Command not processed: "+F.prompt),F.command=F.prompt.slice(1),F.prompt="")}}function Hk(e){let t={ext:e,config:OI.workspace.getConfiguration("multicoder"),log:null,telemetry:null,recent:new Map};Ew(t),Iw(t),Dw(t),Rw(t),kI(t)}function zk(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

@microsoft/1ds-core-js/dist/es5/ms.core.js:
  (*!
   * 1DS JS SDK Core, 4.3.5
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.6 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

@microsoft/1ds-post-js/dist/es5/ms.post.js:
  (*!
   * 1DS JS SDK POST plugin, 4.3.5
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.6 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.5
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.6 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.5
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.6 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)
*/
//# sourceMappingURL=extension.js.map
