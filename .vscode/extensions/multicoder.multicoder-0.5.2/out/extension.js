var yR=Object.create;var By=Object.defineProperty;var wR=Object.getOwnPropertyDescriptor;var bR=Object.getOwnPropertyNames;var SR=Object.getPrototypeOf,ER=Object.prototype.hasOwnProperty;var TR=(t,e)=>()=>(t&&(e=t(t=0)),e);var ln=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Gw=(t,e)=>{for(var r in e)By(t,r,{get:e[r],enumerable:!0})},mE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of bR(e))!ER.call(t,i)&&i!==r&&By(t,i,{get:()=>e[i],enumerable:!(n=wR(e,i))||n.enumerable});return t};var J_=(t,e,r)=>(r=t!=null?yR(SR(t)):{},mE(e||!t||!t.__esModule?By(r,"default",{value:t,enumerable:!0}):r,t)),vE=t=>mE(By({},"__esModule",{value:!0}),t);var Fh=ln(qy=>{"use strict";Object.defineProperty(qy,"__esModule",{value:!0});qy.constants=void 0;qy.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_SYMLINK:2097152,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4}});var Gy=ln(Z_=>{"use strict";Object.defineProperty(Z_,"__esModule",{value:!0});Z_.Stats=void 0;var CR=Fh(),{S_IFMT:xR,S_IFDIR:DR,S_IFREG:RR,S_IFBLK:OR,S_IFCHR:AR,S_IFLNK:kR,S_IFIFO:PR,S_IFSOCK:LR}=CR.constants,Hy=class t{static build(e,r=!1){let n=new t,{uid:i,gid:a,atime:l,mtime:v,ctime:_}=e,b=r?U=>BigInt(U):U=>U;n.uid=b(i),n.gid=b(a),n.rdev=b(e.rdev),n.blksize=b(4096),n.ino=b(e.ino),n.size=b(e.getSize()),n.blocks=b(1),n.atime=l,n.mtime=v,n.ctime=_,n.birthtime=_,n.atimeMs=b(l.getTime()),n.mtimeMs=b(v.getTime());let C=b(_.getTime());if(n.ctimeMs=C,n.birthtimeMs=C,r){n.atimeNs=BigInt(l.getTime())*BigInt(1e6),n.mtimeNs=BigInt(v.getTime())*BigInt(1e6);let U=BigInt(_.getTime())*BigInt(1e6);n.ctimeNs=U,n.birthtimeNs=U}return n.dev=b(0),n.mode=b(e.mode),n.nlink=b(e.nlink),n}_checkModeProperty(e){return(Number(this.mode)&xR)===e}isDirectory(){return this._checkModeProperty(DR)}isFile(){return this._checkModeProperty(RR)}isBlockDevice(){return this._checkModeProperty(OR)}isCharacterDevice(){return this._checkModeProperty(AR)}isSymbolicLink(){return this._checkModeProperty(kR)}isFIFO(){return this._checkModeProperty(PR)}isSocket(){return this._checkModeProperty(LR)}};Z_.Stats=Hy;Z_.default=Hy});var u_=ln(Uh=>{"use strict";Object.defineProperty(Uh,"__esModule",{value:!0});Uh.bufferFrom=Uh.bufferAllocUnsafe=Uh.Buffer=void 0;var Vy=require("buffer");Object.defineProperty(Uh,"Buffer",{enumerable:!0,get:function(){return Vy.Buffer}});function hE(t,...e){return new Vy.Buffer(t,...e)}var MR=Vy.Buffer.allocUnsafe||hE;Uh.bufferAllocUnsafe=MR;var FR=Vy.Buffer.from||hE;Uh.bufferFrom=FR});var Jw=ln(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});zc.AssertionError=zc.RangeError=zc.TypeError=zc.Error=void 0;zc.message=yE;zc.E=It;var jh=require("assert"),zw=require("util"),gE=typeof Symbol>"u"?"_kCode":Symbol("code"),_E={};function Kw(t){return class extends t{constructor(r,...n){super(yE(r,n)),this.code=r,this[gE]=r,this.name=`${super.name} [${this[gE]}]`}}}var Wy=typeof globalThis<"u"?globalThis:global,Ww=class extends Wy.Error{constructor(e){if(typeof e!="object"||e===null)throw new zc.TypeError("ERR_INVALID_ARG_TYPE","options","object");e.message?super(e.message):super(`${zw.inspect(e.actual).slice(0,128)} ${e.operator} ${zw.inspect(e.expected).slice(0,128)}`),this.generatedMessage=!e.message,this.name="AssertionError [ERR_ASSERTION]",this.code="ERR_ASSERTION",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,zc.Error.captureStackTrace(this,e.stackStartFunction)}};zc.AssertionError=Ww;function yE(t,e){jh.strictEqual(typeof t,"string");let r=_E[t];jh(r,`An invalid error message key was used: ${t}.`);let n;if(typeof r=="function")n=r;else{if(n=zw.format,e===void 0||e.length===0)return r;e.unshift(r)}return String(n.apply(null,e))}function It(t,e){_E[t]=typeof e=="function"?e:String(e)}zc.Error=Kw(Wy.Error);zc.TypeError=Kw(Wy.TypeError);zc.RangeError=Kw(Wy.RangeError);It("ERR_ARG_NOT_ITERABLE","%s must be iterable");It("ERR_ASSERTION","%s");It("ERR_BUFFER_OUT_OF_BOUNDS",YR);It("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received");It("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s");It("ERR_CPU_USAGE","Unable to obtain cpu usage %s");It("ERR_DNS_SET_SERVERS_FAILED",(t,e)=>`c-ares failed to set servers: "${t}" [${e}]`);It("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value");It("ERR_ENCODING_NOT_SUPPORTED",t=>`The "${t}" encoding is not supported`);It("ERR_ENCODING_INVALID_ENCODED_DATA",t=>`The encoded data was not valid for encoding ${t}`);It("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client");It("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s");It("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding");It("ERR_INDEX_OUT_OF_RANGE","Index out of range");It("ERR_INVALID_ARG_TYPE",UR);It("ERR_INVALID_ARRAY_LENGTH",(t,e,r)=>(jh.strictEqual(typeof r,"number"),`The array "${t}" (length ${r}) must be of length ${e}.`));It("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s");It("ERR_INVALID_CALLBACK","Callback must be a function");It("ERR_INVALID_CHAR","Invalid character in %s");It("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column");It("ERR_INVALID_FD",'"fd" must be a positive integer: %s');It("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s');It("ERR_INVALID_FILE_URL_PATH","File URL path %s");It("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent");It("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s");It("ERR_INVALID_OPT_VALUE",(t,e)=>`The value "${String(e)}" is invalid for option "${t}"`);It("ERR_INVALID_OPT_VALUE_ENCODING",t=>`The value "${String(t)}" is invalid for option "encoding"`);It("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL');It("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s");It("ERR_INVALID_THIS",'Value of "this" must be of type %s');It("ERR_INVALID_TUPLE","%s must be an iterable %s tuple");It("ERR_INVALID_URL","Invalid URL: %s");It("ERR_INVALID_URL_SCHEME",t=>`The URL must be ${zy(t,"scheme")}`);It("ERR_IPC_CHANNEL_CLOSED","Channel closed");It("ERR_IPC_DISCONNECTED","IPC channel is already disconnected");It("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe");It("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks");It("ERR_MISSING_ARGS",jR);It("ERR_MULTIPLE_CALLBACK","Callback called multiple times");It("ERR_NAPI_CONS_FUNCTION","Constructor must be a function");It("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object");It("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support");It("ERR_NO_LONGER_SUPPORTED","%s is no longer supported");It("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s");It("ERR_SOCKET_ALREADY_BOUND","Socket is already bound");It("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536");It("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6");It("ERR_SOCKET_CANNOT_SEND","Unable to send data");It("ERR_SOCKET_CLOSED","Socket is closed");It("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running");It("ERR_STDERR_CLOSE","process.stderr cannot be closed");It("ERR_STDOUT_CLOSE","process.stdout cannot be closed");It("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode");It("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s");It("ERR_TLS_DH_PARAM_SIZE",t=>`DH parameter size ${t} is less than 2048`);It("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout");It("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate");It("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext');It("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected");It("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming");It("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0");It("ERR_UNKNOWN_ENCODING","Unknown encoding: %s");It("ERR_UNKNOWN_SIGNAL","Unknown signal: %s");It("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type");It("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type");It("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl");function UR(t,e,r){jh(t,"name is required");let n;e.includes("not ")?(n="must not be",e=e.split("not ")[1]):n="must be";let i;if(Array.isArray(t))i=`The ${t.map(l=>`"${l}"`).join(", ")} arguments ${n} ${zy(e,"type")}`;else if(t.includes(" argument"))i=`The ${t} ${n} ${zy(e,"type")}`;else{let a=t.includes(".")?"property":"argument";i=`The "${t}" ${a} ${n} ${zy(e,"type")}`}return arguments.length>=3&&(i+=`. Received type ${r!==null?typeof r:"null"}`),i}function jR(...t){jh(t.length>0,"At least one arg needs to be specified");let e="The ",r=t.length;switch(t=t.map(n=>`"${n}"`),r){case 1:e+=`${t[0]} argument`;break;case 2:e+=`${t[0]} and ${t[1]} arguments`;break;default:e+=t.slice(0,r-1).join(", "),e+=`, and ${t[r-1]} arguments`;break}return`${e} must be specified`}function zy(t,e){if(jh(t,"expected is required"),jh(typeof e=="string","thing is required"),Array.isArray(t)){let r=t.length;return jh(r>0,"At least one expected value needs to be specified"),t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function YR(t,e){return e?"Attempt to write outside buffer bounds":`"${t}" is outside of buffer bounds`}});var X_=ln(Tg=>{"use strict";Object.defineProperty(Tg,"__esModule",{value:!0});Tg.ENCODING_UTF8=void 0;Tg.assertEncoding=BR;Tg.strToEncoding=qR;var Zw=u_(),$R=Jw();Tg.ENCODING_UTF8="utf8";function BR(t){if(t&&!Zw.Buffer.isEncoding(t))throw new $R.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",t)}function qR(t,e){return!e||e===Tg.ENCODING_UTF8?t:e==="buffer"?new Zw.Buffer(t):new Zw.Buffer(t).toString(e)}});var Jy=ln(Q_=>{"use strict";Object.defineProperty(Q_,"__esModule",{value:!0});Q_.Dirent=void 0;var HR=Fh(),GR=X_(),{S_IFMT:VR,S_IFDIR:zR,S_IFREG:WR,S_IFBLK:KR,S_IFCHR:JR,S_IFLNK:ZR,S_IFIFO:XR,S_IFSOCK:QR}=HR.constants,Ky=class t{constructor(){this.name="",this.path="",this.parentPath="",this.mode=0}static build(e,r){let n=new t,{mode:i}=e.getNode();return n.name=(0,GR.strToEncoding)(e.getName(),r),n.mode=i,n.path=e.getParentPath(),n.parentPath=n.path,n}_checkModeProperty(e){return(this.mode&VR)===e}isDirectory(){return this._checkModeProperty(zR)}isFile(){return this._checkModeProperty(WR)}isBlockDevice(){return this._checkModeProperty(KR)}isCharacterDevice(){return this._checkModeProperty(JR)}isSymbolicLink(){return this._checkModeProperty(ZR)}isFIFO(){return this._checkModeProperty(XR)}isSocket(){return this._checkModeProperty(QR)}};Q_.Dirent=Ky;Q_.default=Ky});var Xw=ln(Zy=>{"use strict";Object.defineProperty(Zy,"__esModule",{value:!0});Zy.createProcess=wE;var eO=()=>{if(typeof process<"u")return process;try{return require("process")}catch{return}};function wE(){let t=eO()||{};return t.cwd||(t.cwd=()=>"/"),t.emitWarning||(t.emitWarning=(e,r)=>{console.warn(`${r}${r?": ":""}${e}`)}),t.env||(t.env={}),t}Zy.default=wE()});var TE=ln(ip=>{"use strict";Object.defineProperty(ip,"__esModule",{value:!0});ip.File=ip.Link=ip.Node=ip.SEP=void 0;var e0=Xw(),np=u_(),tO=Fh(),SE=require("events"),rO=Gy(),{S_IFMT:nh,S_IFDIR:nO,S_IFREG:EE,S_IFLNK:bE,S_IFCHR:iO,O_APPEND:aO}=tO.constants,Xy=()=>{var t,e;return(e=(t=e0.default.getuid)===null||t===void 0?void 0:t.call(e0.default))!==null&&e!==void 0?e:0},Qy=()=>{var t,e;return(e=(t=e0.default.getgid)===null||t===void 0?void 0:t.call(e0.default))!==null&&e!==void 0?e:0};ip.SEP="/";var Qw=class extends SE.EventEmitter{constructor(e,r=438){super(),this._uid=Xy(),this._gid=Qy(),this._atime=new Date,this._mtime=new Date,this._ctime=new Date,this.rdev=0,this._nlink=1,this.mode=r,this.ino=e}set ctime(e){this._ctime=e}get ctime(){return this._ctime}set uid(e){this._uid=e,this.ctime=new Date}get uid(){return this._uid}set gid(e){this._gid=e,this.ctime=new Date}get gid(){return this._gid}set atime(e){this._atime=e,this.ctime=new Date}get atime(){return this._atime}set mtime(e){this._mtime=e,this.ctime=new Date}get mtime(){return this._mtime}get perm(){return this.mode&~nh}set perm(e){this.mode=this.mode&nh|e&~nh,this.ctime=new Date}set nlink(e){this._nlink=e,this.ctime=new Date}get nlink(){return this._nlink}getString(e="utf8"){return this.atime=new Date,this.getBuffer().toString(e)}setString(e){this.buf=(0,np.bufferFrom)(e,"utf8"),this.touch()}getBuffer(){return this.atime=new Date,this.buf||this.setBuffer((0,np.bufferAllocUnsafe)(0)),(0,np.bufferFrom)(this.buf)}setBuffer(e){this.buf=(0,np.bufferFrom)(e),this.touch()}getSize(){return this.buf?this.buf.length:0}setModeProperty(e){this.mode=e}isFile(){return(this.mode&nh)===EE}isDirectory(){return(this.mode&nh)===nO}isSymlink(){return(this.mode&nh)===bE}isCharacterDevice(){return(this.mode&nh)===iO}makeSymlink(e){this.mode=bE|438,this.symlink=e}write(e,r=0,n=e.length,i=0){if(this.buf||(this.buf=(0,np.bufferAllocUnsafe)(0)),i+n>this.buf.length){let a=(0,np.bufferAllocUnsafe)(i+n);this.buf.copy(a,0,0,this.buf.length),this.buf=a}return e.copy(this.buf,i,r,r+n),this.touch(),n}read(e,r=0,n=e.byteLength,i=0){this.atime=new Date,this.buf||(this.buf=(0,np.bufferAllocUnsafe)(0));let a=n;a>e.byteLength&&(a=e.byteLength),a+i>this.buf.length&&(a=this.buf.length-i);let l=e instanceof np.Buffer?e:np.Buffer.from(e.buffer);return this.buf.copy(l,r,i,i+a),a}truncate(e=0){if(!e)this.buf=(0,np.bufferAllocUnsafe)(0);else if(this.buf||(this.buf=(0,np.bufferAllocUnsafe)(0)),e<=this.buf.length)this.buf=this.buf.slice(0,e);else{let r=(0,np.bufferAllocUnsafe)(e);this.buf.copy(r),r.fill(0,this.buf.length),this.buf=r}this.touch()}chmod(e){this.mode=this.mode&nh|e&~nh,this.touch()}chown(e,r){this.uid=e,this.gid=r,this.touch()}touch(){this.mtime=new Date,this.emit("change",this)}canRead(e=Xy(),r=Qy()){return!!(this.perm&4||r===this.gid&&this.perm&32||e===this.uid&&this.perm&256)}canWrite(e=Xy(),r=Qy()){return!!(this.perm&2||r===this.gid&&this.perm&16||e===this.uid&&this.perm&128)}canExecute(e=Xy(),r=Qy()){return!!(this.perm&1||r===this.gid&&this.perm&8||e===this.uid&&this.perm&64)}del(){this.emit("delete",this)}toJSON(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}}};ip.Node=Qw;var eb=class t extends SE.EventEmitter{get steps(){return this._steps}set steps(e){this._steps=e;for(let[r,n]of this.children.entries())r==="."||r===".."||n==null||n.syncSteps()}constructor(e,r,n){super(),this.children=new Map,this._steps=[],this.ino=0,this.length=0,this.vol=e,this.parent=r,this.name=n,this.syncSteps()}setNode(e){this.node=e,this.ino=e.ino}getNode(){return this.node}createChild(e,r=this.vol.createNode(EE|438)){let n=new t(this.vol,this,e);return n.setNode(r),r.isDirectory()&&(n.children.set(".",n),n.getNode().nlink++),this.setChild(e,n),n}setChild(e,r=new t(this.vol,this,e)){return this.children.set(e,r),r.parent=this,this.length++,r.getNode().isDirectory()&&(r.children.set("..",this),this.getNode().nlink++),this.getNode().mtime=new Date,this.emit("child:add",r,this),r}deleteChild(e){e.getNode().isDirectory()&&(e.children.delete(".."),this.getNode().nlink--),this.children.delete(e.getName()),this.length--,this.getNode().mtime=new Date,this.emit("child:delete",e,this)}getChild(e){return this.getNode().mtime=new Date,this.children.get(e)}getPath(){return this.steps.join(ip.SEP)}getParentPath(){return this.steps.slice(0,-1).join(ip.SEP)}getName(){return this.steps[this.steps.length-1]}toJSON(){return{steps:this.steps,ino:this.ino,children:Array.from(this.children.keys())}}syncSteps(){this.steps=this.parent?this.parent.steps.concat([this.name]):[this.name]}};ip.Link=eb;var tb=class{constructor(e,r,n,i){this.link=e,this.node=r,this.flags=n,this.fd=i,this.position=0,this.flags&aO&&(this.position=this.getSize())}getString(e="utf8"){return this.node.getString()}setString(e){this.node.setString(e)}getBuffer(){return this.node.getBuffer()}setBuffer(e){this.node.setBuffer(e)}getSize(){return this.node.getSize()}truncate(e){this.node.truncate(e)}seekTo(e){this.position=e}stats(){return rO.default.build(this.node)}write(e,r=0,n=e.length,i){typeof i!="number"&&(i=this.position);let a=this.node.write(e,r,n,i);return this.position=i+a,a}read(e,r=0,n=e.byteLength,i){typeof i!="number"&&(i=this.position);let a=this.node.read(e,r,n,i);return this.position=i+a,a}chmod(e){this.node.chmod(e)}chown(e,r){this.node.chown(e,r)}};ip.File=tb});var IE=ln(nb=>{"use strict";Object.defineProperty(nb,"__esModule",{value:!0});var rb;typeof setImmediate=="function"?rb=setImmediate.bind(typeof globalThis<"u"?globalThis:global):rb=setTimeout.bind(typeof globalThis<"u"?globalThis:global);nb.default=rb});var ab=ln(ib=>{"use strict";Object.defineProperty(ib,"__esModule",{value:!0});ib.default=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(()=>t()).catch(()=>{})});var NE=ln(ob=>{"use strict";Object.defineProperty(ob,"__esModule",{value:!0});function oO(t,e,r){let n=setTimeout.apply(typeof globalThis<"u"?globalThis:global,arguments);return n&&typeof n=="object"&&typeof n.unref=="function"&&n.unref(),n}ob.default=oO});var a0=ln(c_=>{"use strict";Object.defineProperty(c_,"__esModule",{value:!0});c_.FLAGS=c_.ERRSTR=void 0;var sO=Fh();c_.ERRSTR={PATH_STR:"path must be a string, Buffer, or Uint8Array",FD:"fd must be a file descriptor",MODE_INT:"mode must be an int",CB:"callback must be a function",UID:"uid must be an unsigned int",GID:"gid must be an unsigned int",LEN:"len must be an integer",ATIME:"atime must be an integer",MTIME:"mtime must be an integer",PREFIX:"filename prefix is required",BUFFER:"buffer must be an instance of Buffer or StaticBuffer",OFFSET:"offset must be an integer",LENGTH:"length must be an integer",POSITION:"position must be an integer"};var{O_RDONLY:CE,O_WRONLY:t0,O_RDWR:l_,O_CREAT:Yh,O_EXCL:r0,O_TRUNC:n0,O_APPEND:i0,O_SYNC:xE}=sO.constants,DE;(function(t){t[t.r=CE]="r",t[t["r+"]=l_]="r+",t[t.rs=CE|xE]="rs",t[t.sr=t.rs]="sr",t[t["rs+"]=l_|xE]="rs+",t[t["sr+"]=t["rs+"]]="sr+",t[t.w=t0|Yh|n0]="w",t[t.wx=t0|Yh|n0|r0]="wx",t[t.xw=t.wx]="xw",t[t["w+"]=l_|Yh|n0]="w+",t[t["wx+"]=l_|Yh|n0|r0]="wx+",t[t["xw+"]=t["wx+"]]="xw+",t[t.a=t0|i0|Yh]="a",t[t.ax=t0|i0|Yh|r0]="ax",t[t.xa=t.ax]="xa",t[t["a+"]=l_|i0|Yh]="a+",t[t["ax+"]=l_|i0|Yh|r0]="ax+",t[t["xa+"]=t["ax+"]]="xa+"})(DE||(c_.FLAGS=DE={}))});var d_=ln(vi=>{"use strict";Object.defineProperty(vi,"__esModule",{value:!0});vi.unixify=vi.getWriteSyncArgs=vi.getWriteArgs=vi.bufToUint8=vi.isWin=void 0;vi.promisify=cO;vi.validateCallback=RE;vi.modeToNumber=OE;vi.nullCheck=AE;vi.pathToFilename=pO;vi.createError=DO;vi.genRndStr6=kE;vi.flagsToNumber=RO;vi.isFd=PE;vi.validateFd=cb;vi.streamToBuffer=OO;vi.dataToBuffer=fb;vi.bufferToEncoding=LO;vi.isReadableStream=MO;var f_=a0(),sb=Jw(),lb=u_(),uO=X_(),ub=u_(),lO=ab();vi.isWin=process.platform==="win32";function cO(t,e,r=n=>n){return(...n)=>new Promise((i,a)=>{t[e].bind(t)(...n,(l,v)=>l?a(l):i(r(v)))})}function RE(t){if(typeof t!="function")throw TypeError(f_.ERRSTR.CB);return t}function fO(t,e){if(typeof t=="number")return t;if(typeof t=="string")return parseInt(t,8);if(e)return OE(e)}function OE(t,e){let r=fO(t,e);if(typeof r!="number"||isNaN(r))throw new TypeError(f_.ERRSTR.MODE_INT);return r}function AE(t,e){if((""+t).indexOf("\0")!==-1){let r=new Error("Path must be a string without null bytes");if(r.code="ENOENT",typeof e!="function")throw r;return(0,lO.default)(()=>{e(r)}),!1}return!0}function dO(t){if(t.hostname!=="")throw new sb.TypeError("ERR_INVALID_FILE_URL_HOST",process.platform);let e=t.pathname;for(let r=0;r<e.length;r++)if(e[r]==="%"){let n=e.codePointAt(r+2)|32;if(e[r+1]==="2"&&n===102)throw new sb.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters")}return decodeURIComponent(e)}function pO(t){if(t instanceof Uint8Array&&(t=(0,ub.bufferFrom)(t)),typeof t!="string"&&!lb.Buffer.isBuffer(t)){try{if(!(t instanceof require("url").URL))throw new TypeError(f_.ERRSTR.PATH_STR)}catch{throw new TypeError(f_.ERRSTR.PATH_STR)}t=dO(t)}let e=String(t);return AE(e),e}var mO="ENOENT",vO="EBADF",hO="EINVAL",gO="EPERM",_O="EPROTO",yO="EEXIST",wO="ENOTDIR",bO="EMFILE",SO="EACCES",EO="EISDIR",TO="ENOTEMPTY",IO="ENOSYS",NO="ERR_FS_EISDIR",CO="ERR_OUT_OF_RANGE";function xO(t,e="",r="",n=""){let i="";switch(r&&(i=` '${r}'`),n&&(i+=` -> '${n}'`),t){case mO:return`ENOENT: no such file or directory, ${e}${i}`;case vO:return`EBADF: bad file descriptor, ${e}${i}`;case hO:return`EINVAL: invalid argument, ${e}${i}`;case gO:return`EPERM: operation not permitted, ${e}${i}`;case _O:return`EPROTO: protocol error, ${e}${i}`;case yO:return`EEXIST: file already exists, ${e}${i}`;case wO:return`ENOTDIR: not a directory, ${e}${i}`;case EO:return`EISDIR: illegal operation on a directory, ${e}${i}`;case SO:return`EACCES: permission denied, ${e}${i}`;case TO:return`ENOTEMPTY: directory not empty, ${e}${i}`;case bO:return`EMFILE: too many open files, ${e}${i}`;case IO:return`ENOSYS: function not implemented, ${e}${i}`;case NO:return`[ERR_FS_EISDIR]: Path is a directory: ${e} returned EISDIR (is a directory) ${r}`;case CO:return`[ERR_OUT_OF_RANGE]: value out of range, ${e}${i}`;default:return`${t}: error occurred, ${e}${i}`}}function DO(t,e="",r="",n="",i=Error){let a=new i(xO(t,e,r,n));return a.code=t,r&&(a.path=r),a}function kE(){let t=(Math.random()+1).toString(36).substring(2,8);return t.length===6?t:kE()}function RO(t){if(typeof t=="number")return t;if(typeof t=="string"){let e=f_.FLAGS[t];if(typeof e<"u")return e}throw new sb.TypeError("ERR_INVALID_OPT_VALUE","flags",t)}function PE(t){return t>>>0===t}function cb(t){if(!PE(t))throw TypeError(f_.ERRSTR.FD)}function OO(t){let e=[];return new Promise((r,n)=>{t.on("data",i=>e.push(i)),t.on("end",()=>r(lb.Buffer.concat(e))),t.on("error",n)})}function fb(t,e=uO.ENCODING_UTF8){return lb.Buffer.isBuffer(t)?t:t instanceof Uint8Array?(0,ub.bufferFrom)(t):(0,ub.bufferFrom)(String(t),e)}var AO=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength);vi.bufToUint8=AO;var kO=(t,e,r,n,i,a)=>{cb(t);let l=0,v,_=null,b,C,U=typeof e,W=typeof r,K=typeof n,q=typeof i;U!=="string"?W==="function"?C=r:K==="function"?(l=r|0,C=n):q==="function"?(l=r|0,v=n,C=i):(l=r|0,v=n,_=i,C=a):W==="function"?C=r:K==="function"?(_=r,C=n):q==="function"&&(_=r,b=n,C=i);let H=fb(e,b);U!=="string"?typeof v>"u"&&(v=H.length):(l=0,v=H.length);let Z=RE(C);return[t,U==="string",H,l,v,_,Z]};vi.getWriteArgs=kO;var PO=(t,e,r,n,i)=>{cb(t);let a,l,v,_,b=typeof e!="string";b?(l=(r||0)|0,v=n,_=i):(_=r,a=n);let C=fb(e,a);return b?typeof v>"u"&&(v=C.length):(l=0,v=C.length),[t,C,l||0,v,_]};vi.getWriteSyncArgs=PO;function LO(t,e){return!e||e==="buffer"?t:t.toString(e)}function MO(t){return t!==null&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"&&t.readable===!0}var FO=(t,e)=>{let r=t[e];return e>0&&(r==="/"||vi.isWin&&r==="\\")},UO=t=>{let e=t.length-1;if(e<2)return t;for(;FO(t,e);)e--;return t.substr(0,e+1)},jO=(t,e)=>{if(typeof t!="string")throw new TypeError("expected a string");return t=t.replace(/[\\\/]+/g,"/"),e!==!1&&(t=UO(t)),t},YO=(t,e=!0)=>vi.isWin?(t=jO(t,e),t.replace(/^([a-zA-Z]+:|\.\/)/,"")):t;vi.unixify=YO});var LE=ln(o0=>{"use strict";Object.defineProperty(o0,"__esModule",{value:!0});o0.FileHandle=void 0;var Wl=d_(),db=class{constructor(e,r){this.fs=e,this.fd=r}appendFile(e,r){return(0,Wl.promisify)(this.fs,"appendFile")(this.fd,e,r)}chmod(e){return(0,Wl.promisify)(this.fs,"fchmod")(this.fd,e)}chown(e,r){return(0,Wl.promisify)(this.fs,"fchown")(this.fd,e,r)}close(){return(0,Wl.promisify)(this.fs,"close")(this.fd)}datasync(){return(0,Wl.promisify)(this.fs,"fdatasync")(this.fd)}createReadStream(e){return this.fs.createReadStream("",Object.assign(Object.assign({},e),{fd:this}))}createWriteStream(e){return this.fs.createWriteStream("",Object.assign(Object.assign({},e),{fd:this}))}readableWebStream(e){return new ReadableStream({pull:async r=>{let n=await this.readFile();r.enqueue(n),r.close()}})}read(e,r,n,i){return(0,Wl.promisify)(this.fs,"read",a=>({bytesRead:a,buffer:e}))(this.fd,e,r,n,i)}readv(e,r){return(0,Wl.promisify)(this.fs,"readv",n=>({bytesRead:n,buffers:e}))(this.fd,e,r)}readFile(e){return(0,Wl.promisify)(this.fs,"readFile")(this.fd,e)}stat(e){return(0,Wl.promisify)(this.fs,"fstat")(this.fd,e)}sync(){return(0,Wl.promisify)(this.fs,"fsync")(this.fd)}truncate(e){return(0,Wl.promisify)(this.fs,"ftruncate")(this.fd,e)}utimes(e,r){return(0,Wl.promisify)(this.fs,"futimes")(this.fd,e,r)}write(e,r,n,i){return(0,Wl.promisify)(this.fs,"write",a=>({bytesWritten:a,buffer:e}))(this.fd,e,r,n,i)}writev(e,r){return(0,Wl.promisify)(this.fs,"writev",n=>({bytesWritten:n,buffers:e}))(this.fd,e,r)}writeFile(e,r){return(0,Wl.promisify)(this.fs,"writeFile")(this.fd,e,r)}};o0.FileHandle=db});var ME=ln(s0=>{"use strict";Object.defineProperty(s0,"__esModule",{value:!0});s0.FsPromises=void 0;var Jn=d_(),$O=Fh(),pb=class{constructor(e,r){this.fs=e,this.FileHandle=r,this.constants=$O.constants,this.cp=(0,Jn.promisify)(this.fs,"cp"),this.opendir=(0,Jn.promisify)(this.fs,"opendir"),this.statfs=(0,Jn.promisify)(this.fs,"statfs"),this.lutimes=(0,Jn.promisify)(this.fs,"lutimes"),this.access=(0,Jn.promisify)(this.fs,"access"),this.chmod=(0,Jn.promisify)(this.fs,"chmod"),this.chown=(0,Jn.promisify)(this.fs,"chown"),this.copyFile=(0,Jn.promisify)(this.fs,"copyFile"),this.lchmod=(0,Jn.promisify)(this.fs,"lchmod"),this.lchown=(0,Jn.promisify)(this.fs,"lchown"),this.link=(0,Jn.promisify)(this.fs,"link"),this.lstat=(0,Jn.promisify)(this.fs,"lstat"),this.mkdir=(0,Jn.promisify)(this.fs,"mkdir"),this.mkdtemp=(0,Jn.promisify)(this.fs,"mkdtemp"),this.readdir=(0,Jn.promisify)(this.fs,"readdir"),this.readlink=(0,Jn.promisify)(this.fs,"readlink"),this.realpath=(0,Jn.promisify)(this.fs,"realpath"),this.rename=(0,Jn.promisify)(this.fs,"rename"),this.rmdir=(0,Jn.promisify)(this.fs,"rmdir"),this.rm=(0,Jn.promisify)(this.fs,"rm"),this.stat=(0,Jn.promisify)(this.fs,"stat"),this.symlink=(0,Jn.promisify)(this.fs,"symlink"),this.truncate=(0,Jn.promisify)(this.fs,"truncate"),this.unlink=(0,Jn.promisify)(this.fs,"unlink"),this.utimes=(0,Jn.promisify)(this.fs,"utimes"),this.readFile=(n,i)=>(0,Jn.promisify)(this.fs,"readFile")(n instanceof this.FileHandle?n.fd:n,i),this.appendFile=(n,i,a)=>(0,Jn.promisify)(this.fs,"appendFile")(n instanceof this.FileHandle?n.fd:n,i,a),this.open=(n,i="r",a)=>(0,Jn.promisify)(this.fs,"open",l=>new this.FileHandle(this.fs,l))(n,i,a),this.writeFile=(n,i,a)=>((0,Jn.isReadableStream)(i)?(0,Jn.streamToBuffer)(i):Promise.resolve(i)).then(v=>(0,Jn.promisify)(this.fs,"writeFile")(n instanceof this.FileHandle?n.fd:n,v,a)),this.watch=()=>{throw new Error("Not implemented")}}};s0.FsPromises=pb});var cT={};Gw(cT,{__addDisposableResource:()=>sT,__assign:()=>u0,__asyncDelegator:()=>QE,__asyncGenerator:()=>XE,__asyncValues:()=>eT,__await:()=>p_,__awaiter:()=>VE,__classPrivateFieldGet:()=>iT,__classPrivateFieldIn:()=>oT,__classPrivateFieldSet:()=>aT,__createBinding:()=>c0,__decorate:()=>jE,__disposeResources:()=>uT,__esDecorate:()=>$E,__exportStar:()=>WE,__extends:()=>FE,__generator:()=>zE,__importDefault:()=>nT,__importStar:()=>rT,__makeTemplateObject:()=>tT,__metadata:()=>GE,__param:()=>YE,__propKey:()=>qE,__read:()=>hb,__rest:()=>UE,__rewriteRelativeImportExtension:()=>lT,__runInitializers:()=>BE,__setFunctionName:()=>HE,__spread:()=>KE,__spreadArray:()=>ZE,__spreadArrays:()=>JE,__values:()=>l0,default:()=>HO});function FE(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");mb(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function UE(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function jE(t,e,r,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,r,n);else for(var v=t.length-1;v>=0;v--)(l=t[v])&&(a=(i<3?l(a):i>3?l(e,r,a):l(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a}function YE(t,e){return function(r,n){e(r,n,t)}}function $E(t,e,r,n,i,a){function l(ne){if(ne!==void 0&&typeof ne!="function")throw new TypeError("Function expected");return ne}for(var v=n.kind,_=v==="getter"?"get":v==="setter"?"set":"value",b=!e&&t?n.static?t:t.prototype:null,C=e||(b?Object.getOwnPropertyDescriptor(b,n.name):{}),U,W=!1,K=r.length-1;K>=0;K--){var q={};for(var H in n)q[H]=H==="access"?{}:n[H];for(var H in n.access)q.access[H]=n.access[H];q.addInitializer=function(ne){if(W)throw new TypeError("Cannot add initializers after decoration has completed");a.push(l(ne||null))};var Z=(0,r[K])(v==="accessor"?{get:C.get,set:C.set}:C[_],q);if(v==="accessor"){if(Z===void 0)continue;if(Z===null||typeof Z!="object")throw new TypeError("Object expected");(U=l(Z.get))&&(C.get=U),(U=l(Z.set))&&(C.set=U),(U=l(Z.init))&&i.unshift(U)}else(U=l(Z))&&(v==="field"?i.unshift(U):C[_]=U)}b&&Object.defineProperty(b,n.name,C),W=!0}function BE(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function qE(t){return typeof t=="symbol"?t:"".concat(t)}function HE(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function GE(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function VE(t,e,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function v(C){try{b(n.next(C))}catch(U){l(U)}}function _(C){try{b(n.throw(C))}catch(U){l(U)}}function b(C){C.done?a(C.value):i(C.value).then(v,_)}b((n=n.apply(t,e||[])).next())})}function zE(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=v(0),l.throw=v(1),l.return=v(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function v(b){return function(C){return _([b,C])}}function _(b){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,b[0]&&(r=0)),r;)try{if(n=1,i&&(a=b[0]&2?i.return:b[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,b[1])).done)return a;switch(i=0,a&&(b=[b[0]&2,a.value]),b[0]){case 0:case 1:a=b;break;case 4:return r.label++,{value:b[1],done:!1};case 5:r.label++,i=b[1],b=[0];continue;case 7:b=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(b[0]===6||b[0]===2)){r=0;continue}if(b[0]===3&&(!a||b[1]>a[0]&&b[1]<a[3])){r.label=b[1];break}if(b[0]===6&&r.label<a[1]){r.label=a[1],a=b;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(b);break}a[2]&&r.ops.pop(),r.trys.pop();continue}b=e.call(t,r)}catch(C){b=[6,C],i=0}finally{n=a=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}}function WE(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&c0(e,t,r)}function l0(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hb(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],l;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(v){l={error:v}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return a}function KE(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(hb(arguments[e]));return t}function JE(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],l=0,v=a.length;l<v;l++,i++)n[i]=a[l];return n}function ZE(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function p_(t){return this instanceof p_?(this.v=t,this):new p_(t)}function XE(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),v("next"),v("throw"),v("return",l),i[Symbol.asyncIterator]=function(){return this},i;function l(K){return function(q){return Promise.resolve(q).then(K,U)}}function v(K,q){n[K]&&(i[K]=function(H){return new Promise(function(Z,ne){a.push([K,H,Z,ne])>1||_(K,H)})},q&&(i[K]=q(i[K])))}function _(K,q){try{b(n[K](q))}catch(H){W(a[0][3],H)}}function b(K){K.value instanceof p_?Promise.resolve(K.value.v).then(C,U):W(a[0][2],K)}function C(K){_("next",K)}function U(K){_("throw",K)}function W(K,q){K(q),a.shift(),a.length&&_(a[0][0],a[0][1])}}function QE(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,a){e[i]=t[i]?function(l){return(r=!r)?{value:p_(t[i](l)),done:!1}:a?a(l):l}:a}}function eT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof l0=="function"?l0(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(l){return new Promise(function(v,_){l=t[a](l),i(v,_,l.done,l.value)})}}function i(a,l,v,_){Promise.resolve(_).then(function(b){a({value:b,done:v})},l)}}function tT(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function rT(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=vb(t),n=0;n<r.length;n++)r[n]!=="default"&&c0(e,t,r[n]);return BO(e,t),e}function nT(t){return t&&t.__esModule?t:{default:t}}function iT(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function aT(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function oT(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function sT(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function uT(t){function e(a){t.error=t.hasError?new qO(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(a).then(i,function(l){return e(l),i()})}else n|=1}catch(l){e(l)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function lT(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,a,l){return n?e?".jsx":".js":i&&(!a||!l)?r:i+a+"."+l.toLowerCase()+"js"}):t}var mb,u0,c0,BO,vb,qO,HO,fT=TR(()=>{mb=function(t,e){return mb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},mb(t,e)};u0=function(){return u0=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},u0.apply(this,arguments)};c0=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};BO=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},vb=function(t){return vb=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},vb(t)};qO=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};HO={__extends:FE,__assign:u0,__rest:UE,__decorate:jE,__param:YE,__esDecorate:$E,__runInitializers:BE,__propKey:qE,__setFunctionName:HE,__metadata:GE,__awaiter:VE,__generator:zE,__createBinding:c0,__exportStar:WE,__values:l0,__read:hb,__spread:KE,__spreadArrays:JE,__spreadArray:ZE,__await:p_,__asyncGenerator:XE,__asyncDelegator:QE,__asyncValues:eT,__makeTemplateObject:tT,__importStar:rT,__importDefault:nT,__classPrivateFieldGet:iT,__classPrivateFieldSet:aT,__classPrivateFieldIn:oT,__addDisposableResource:sT,__disposeResources:uT,__rewriteRelativeImportExtension:lT}});var dT=ln(f0=>{"use strict";Object.defineProperty(f0,"__esModule",{value:!0});f0.printTree=void 0;var GO=(t="",e)=>{let r="",n=e.length-1;for(;n>=0&&!e[n];n--);for(let i=0;i<=n;i++){let a=e[i];if(!a)continue;let l=i===n,v=a(t+(l?" ":"\u2502")+"  "),_=v?l?"\u2514\u2500":"\u251C\u2500":"\u2502";r+=`
`+t+_+(v?" "+v:"")}return r};f0.printTree=GO});var pT=ln(d0=>{"use strict";Object.defineProperty(d0,"__esModule",{value:!0});d0.printBinary=void 0;var VO=(t="",e)=>{let r=e[0],n=e[1],i="";return r&&(i+=`
`+t+"\u2190 "+r(t+"  ")),n&&(i+=`
`+t+"\u2192 "+n(t+"  ")),i};d0.printBinary=VO});var vT=ln(p0=>{"use strict";Object.defineProperty(p0,"__esModule",{value:!0});var mT=(fT(),vE(cT));mT.__exportStar(dT(),p0);mT.__exportStar(pT(),p0)});var hT=ln(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.newNotAllowedError=el.newTypeMismatchError=el.newNotFoundError=el.assertCanWrite=el.assertName=el.basename=el.ctx=void 0;var zO=(t={})=>Object.assign({separator:"/",syncHandleAllowed:!1,mode:"read"},t);el.ctx=zO;var WO=(t,e)=>{t[t.length-1]===e&&(t=t.slice(0,-1));let r=t.lastIndexOf(e);return r===-1?t:t.slice(r+1)};el.basename=WO;var KO=/^(\.{1,2})$|^(.*([\/\\]).*)$/,JO=(t,e,r)=>{if(!t||KO.test(t))throw new TypeError(`Failed to execute '${e}' on '${r}': Name is not allowed.`)};el.assertName=JO;var ZO=t=>{if(t!=="readwrite")throw new DOMException("The request is not allowed by the user agent or the platform in the current context.","NotAllowedError")};el.assertCanWrite=ZO;var XO=()=>new DOMException("A requested file or directory could not be found at the time an operation was processed.","NotFoundError");el.newNotFoundError=XO;var QO=()=>new DOMException("The path supplied exists, but was not an entry of requested type.","TypeMismatchError");el.newTypeMismatchError=QO;var eA=()=>new DOMException("Permission not granted.","NotAllowedError");el.newNotAllowedError=eA});var gT=ln(ey=>{"use strict";Object.defineProperty(ey,"__esModule",{value:!0});ey.toTreeSync=void 0;var tA=vT(),rA=hT(),nA=(t,e={})=>{var r;let n=e.separator||"/",i=e.dir||n;i[i.length-1]!==n&&(i+=n);let a=e.tab||"",l=(r=e.depth)!==null&&r!==void 0?r:10,v=" (...)";if(l>0){let b=t.readdirSync(i,{withFileTypes:!0});v=(0,tA.printTree)(a,b.map(C=>U=>C.isDirectory()?(0,ey.toTreeSync)(t,{dir:i+C.name,depth:l-1,tab:U}):C.isSymbolicLink()?""+C.name+" \u2192 "+t.readlinkSync(i+C.name):""+C.name))}return(0,rA.basename)(i,n)+n+v};ey.toTreeSync=nA});var bT=ln(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.getWriteFileOptions=rr.writeFileDefaults=rr.getRealpathOptsAndCb=rr.getRealpathOptions=rr.getStatOptsAndCb=rr.getStatOptions=rr.getAppendFileOptsAndCb=rr.getAppendFileOpts=rr.getOpendirOptsAndCb=rr.getOpendirOptions=rr.getReaddirOptsAndCb=rr.getReaddirOptions=rr.getReadFileOptions=rr.getRmOptsAndCb=rr.getRmdirOptions=rr.getDefaultOptsAndCb=rr.getDefaultOpts=rr.optsDefaults=rr.getMkdirOptions=void 0;rr.getOptions=wT;rr.optsGenerator=ih;rr.optsAndCbGenerator=Ig;var m0=a0(),iA=X_(),yT=d_(),_T={mode:511,recursive:!1},aA=t=>typeof t=="number"?Object.assign({},_T,{mode:t}):Object.assign({},_T,t);rr.getMkdirOptions=aA;var oA=t=>`Expected options to be either an object or a string, but got ${t} instead`;function wT(t,e){let r;if(e){let n=typeof e;switch(n){case"string":r=Object.assign({},t,{encoding:e});break;case"object":r=Object.assign({},t,e);break;default:throw TypeError(oA(n))}}else return t;return r.encoding!=="buffer"&&(0,iA.assertEncoding)(r.encoding),r}function ih(t){return e=>wT(t,e)}function Ig(t){return(e,r)=>typeof e=="function"?[t(),e]:[t(e),(0,yT.validateCallback)(r)]}rr.optsDefaults={encoding:"utf8"};rr.getDefaultOpts=ih(rr.optsDefaults);rr.getDefaultOptsAndCb=Ig(rr.getDefaultOpts);var sA={recursive:!1},uA=t=>Object.assign({},sA,t);rr.getRmdirOptions=uA;var lA=ih(rr.optsDefaults);rr.getRmOptsAndCb=Ig(lA);var cA={flag:"r"};rr.getReadFileOptions=ih(cA);var fA={encoding:"utf8",recursive:!1,withFileTypes:!1};rr.getReaddirOptions=ih(fA);rr.getReaddirOptsAndCb=Ig(rr.getReaddirOptions);var dA={encoding:"utf8",bufferSize:32,recursive:!1};rr.getOpendirOptions=ih(dA);rr.getOpendirOptsAndCb=Ig(rr.getOpendirOptions);var pA={encoding:"utf8",mode:438,flag:m0.FLAGS[m0.FLAGS.a]};rr.getAppendFileOpts=ih(pA);rr.getAppendFileOptsAndCb=Ig(rr.getAppendFileOpts);var mA={bigint:!1},vA=(t={})=>Object.assign({},mA,t);rr.getStatOptions=vA;var hA=(t,e)=>typeof t=="function"?[(0,rr.getStatOptions)(),t]:[(0,rr.getStatOptions)(t),(0,yT.validateCallback)(e)];rr.getStatOptsAndCb=hA;var gA=rr.optsDefaults;rr.getRealpathOptions=ih(gA);rr.getRealpathOptsAndCb=Ig(rr.getRealpathOptions);rr.writeFileDefaults={encoding:"utf8",mode:438,flag:m0.FLAGS[m0.FLAGS.w]};rr.getWriteFileOptions=ih(rr.writeFileDefaults)});var ST=ln(v0=>{"use strict";Object.defineProperty(v0,"__esModule",{value:!0});v0.Dir=void 0;var _A=d_(),yA=Jy(),gb=class{constructor(e,r){this.link=e,this.options=r,this.iteratorInfo=[],this.path=e.getParentPath(),this.iteratorInfo.push(e.children[Symbol.iterator]())}wrapAsync(e,r,n){(0,_A.validateCallback)(n),setImmediate(()=>{let i;try{i=e.apply(this,r)}catch(a){n(a);return}n(null,i)})}isFunction(e){return typeof e=="function"}promisify(e,r){return(...n)=>new Promise((i,a)=>{this.isFunction(e[r])?e[r].bind(e)(...n,(l,v)=>{l&&a(l),i(v)}):a("Not a function")})}closeBase(){}readBase(e){let r,n,i,a;do{do if({done:r,value:n}=e[e.length-1].next(),!r)[i,a]=n;else break;while(i==="."||i==="..");if(r){if(e.pop(),e.length===0)break;r=!1}else return this.options.recursive&&a.children.size&&e.push(a.children[Symbol.iterator]()),yA.default.build(a,this.options.encoding)}while(!r);return null}closeBaseAsync(e){this.wrapAsync(this.closeBase,[],e)}close(e){if(typeof e=="function")this.closeBaseAsync(e);else return this.promisify(this,"closeBaseAsync")()}closeSync(){this.closeBase()}readBaseAsync(e){this.wrapAsync(this.readBase,[this.iteratorInfo],e)}read(e){if(typeof e=="function")this.readBaseAsync(e);else return this.promisify(this,"readBaseAsync")()}readSync(){return this.readBase(this.iteratorInfo)}[Symbol.asyncIterator](){let e=[],r=this;e.push(r.link.children[Symbol.iterator]());let n={readBaseAsync(i){r.wrapAsync(r.readBase,[e],i)}};return{async next(){let i=await r.promisify(n,"readBaseAsync")();return i!==null?{done:!1,value:i}:{done:!0,value:void 0}},[Symbol.asyncIterator](){throw new Error("Not implemented")}}}};v0.Dir=gb});var kT=ln(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});Wc.FSWatcher=Wc.StatWatcher=Wc.Volume=void 0;Wc.filenameToSteps=pm;Wc.pathToSteps=qA;Wc.dataToStr=HA;Wc.toUnixTimestamp=Jf;var op=require("path"),h0=TE(),_b=Gy(),wA=Jy(),qh=u_(),m_=IE(),b0=ab(),xT=Xw(),bA=NE(),S0=require("stream"),uv=Fh(),DT=require("events"),Cg=X_(),SA=LE(),RT=require("util"),EA=ME(),TA=gT(),ry=a0(),qn=bT(),de=d_(),IA=ST(),NA=op.resolve,{O_RDONLY:yb,O_WRONLY:ET,O_RDWR:CA,O_CREAT:TT,O_EXCL:xA,O_TRUNC:DA,O_APPEND:RA,O_DIRECTORY:OA,O_SYMLINK:IT,F_OK:NT,COPYFILE_EXCL:AA,COPYFILE_FICLONE_FORCE:kA}=uv.constants,{sep:lv,relative:ny,join:OT,dirname:PA}=op.posix?op.posix:op,LA=128,MA="EPERM",$h="ENOENT",wb="EBADF",FA="EINVAL",Ng="EEXIST",Bh="ENOTDIR",UA="EMFILE",sv="EACCES",CT="EISDIR",jA="ENOTEMPTY",YA="ENOSYS",$A="ERR_FS_EISDIR",BA="ERR_OUT_OF_RANGE",g0=(t,e=xT.default.cwd())=>NA(e,t);if(de.isWin){let t=g0;g0=(e,r)=>(0,de.unixify)(t(e,r))}function pm(t,e){let n=g0(t,e).substring(1);return n?n.split(lv):[]}function qA(t){return pm((0,de.pathToFilename)(t))}function HA(t,e=Cg.ENCODING_UTF8){return qh.Buffer.isBuffer(t)?t.toString(e):t instanceof Uint8Array?(0,qh.bufferFrom)(t).toString(e):String(t)}function Jf(t){if(typeof t=="string"&&+t==t)return+t;if(t instanceof Date)return t.getTime()/1e3;if(isFinite(t))return t<0?Date.now()/1e3:t;throw new Error("Cannot parse time: "+t)}function v_(t){if(typeof t!="number")throw TypeError(ry.ERRSTR.UID)}function h_(t){if(typeof t!="number")throw TypeError(ry.ERRSTR.GID)}function GA(t){let e={};function r(n,i){for(let a in i){let l=i[a],v=OT(n,a);typeof l=="string"||l instanceof qh.Buffer?e[v]=l:typeof l=="object"&&l!==null&&Object.keys(l).length>0?r(v,l):e[v]=null}}return r("",t),e}var ty=()=>{throw new Error("Not implemented")},_0=class t{static fromJSON(e,r){let n=new t;return n.fromJSON(e,r),n}static fromNestedJSON(e,r){let n=new t;return n.fromNestedJSON(e,r),n}get promises(){if(this.promisesApi===null)throw new Error("Promise is not supported in this environment.");return this.promisesApi}constructor(e={}){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.maxFiles=1e4,this.openFiles=0,this.promisesApi=new EA.FsPromises(this,SA.FileHandle),this.statWatchers={},this.cpSync=ty,this.statfsSync=ty,this.cp=ty,this.statfs=ty,this.openAsBlob=ty,this.props=Object.assign({Node:h0.Node,Link:h0.Link,File:h0.File},e);let r=this.createLink();r.setNode(this.createNode(uv.constants.S_IFDIR|511));let n=this;this.StatWatcher=class extends y0{constructor(){super(n)}};let i=cv;this.ReadStream=class extends i{constructor(...l){super(n,...l)}};let a=sp;this.WriteStream=class extends a{constructor(...l){super(n,...l)}},this.FSWatcher=class extends w0{constructor(){super(n)}},r.setChild(".",r),r.getNode().nlink++,r.setChild("..",r),r.getNode().nlink++,this.root=r}createLink(e,r,n=!1,i){if(!e)return new this.props.Link(this,null,"");if(!r)throw new Error("createLink: name cannot be empty");let a=i??(n?511:438),v=i&&i&uv.constants.S_IFMT?i&uv.constants.S_IFMT:n?uv.constants.S_IFDIR:uv.constants.S_IFREG,_=a&~uv.constants.S_IFMT|v;return e.createChild(r,this.createNode(_))}deleteLink(e){let r=e.parent;return r?(r.deleteChild(e),!0):!1}newInoNumber(){let e=this.releasedInos.pop();return e||(this.ino=(this.ino+1)%4294967295,this.ino)}newFdNumber(){let e=this.releasedFds.pop();return typeof e=="number"?e:t.fd--}createNode(e){let r=new this.props.Node(this.newInoNumber(),e);return this.inodes[r.ino]=r,r}deleteNode(e){e.del(),delete this.inodes[e.ino],this.releasedInos.push(e.ino)}walk(e,r=!1,n=!1,i=!1,a){var l;let v,_;e instanceof h0.Link?(v=e.steps,_=lv+v.join(lv)):typeof e=="string"?(v=pm(e),_=e):(v=e,_=lv+v.join(lv));let b=this.root,C=0;for(;C<v.length;){let U=b.getNode();if(U.isDirectory()){if(i&&!U.canExecute())throw(0,de.createError)(sv,a,_)}else if(C<v.length-1)throw(0,de.createError)(Bh,a,_);if(b=(l=b.getChild(v[C]))!==null&&l!==void 0?l:null,!b){if(n)throw(0,de.createError)($h,a,_);return null}if(U=b==null?void 0:b.getNode(),r&&U.isSymlink()){let W=op.isAbsolute(U.symlink)?U.symlink:OT(op.dirname(b.getPath()),U.symlink);v=pm(W).concat(v.slice(C+1)),b=this.root,C=0;continue}C++}return b}getLink(e){return this.walk(e,!1,!1,!1)}getLinkOrThrow(e,r){return this.walk(e,!1,!0,!0,r)}getResolvedLink(e){return this.walk(e,!0,!1,!1)}getResolvedLinkOrThrow(e,r){return this.walk(e,!0,!0,!0,r)}resolveSymlinks(e){return this.getResolvedLink(e.steps.slice(1))}getLinkAsDirOrThrow(e,r){let n=this.getLinkOrThrow(e,r);if(!n.getNode().isDirectory())throw(0,de.createError)(Bh,r,e);return n}getLinkParent(e){return this.getLink(e.slice(0,-1))}getLinkParentAsDirOrThrow(e,r){let n=(e instanceof Array?e:pm(e)).slice(0,-1),i=lv+n.join(lv),a=this.getLinkOrThrow(i,r);if(!a.getNode().isDirectory())throw(0,de.createError)(Bh,r,i);return a}getFileByFd(e){return this.fds[String(e)]}getFileByFdOrThrow(e,r){if(!(0,de.isFd)(e))throw TypeError(ry.ERRSTR.FD);let n=this.getFileByFd(e);if(!n)throw(0,de.createError)(wb,r);return n}wrapAsync(e,r,n){(0,de.validateCallback)(n),(0,m_.default)(()=>{let i;try{i=e.apply(this,r)}catch(a){n(a);return}n(null,i)})}_toJSON(e=this.root,r={},n,i){let a=!0,l=e.children;e.getNode().isFile()&&(l=new Map([[e.getName(),e.parent.getChild(e.getName())]]),e=e.parent);for(let _ of l.keys()){if(_==="."||_==="..")continue;a=!1;let b=e.getChild(_);if(!b)throw new Error("_toJSON: unexpected undefined");let C=b.getNode();if(C.isFile()){let U=b.getPath();n&&(U=ny(n,U)),r[U]=i?C.getBuffer():C.getString()}else C.isDirectory()&&this._toJSON(b,r,n,i)}let v=e.getPath();return n&&(v=ny(n,v)),v&&a&&(r[v]=null),r}toJSON(e,r={},n=!1,i=!1){let a=[];if(e){Array.isArray(e)||(e=[e]);for(let l of e){let v=(0,de.pathToFilename)(l),_=this.getResolvedLink(v);_&&a.push(_)}}else a.push(this.root);if(!a.length)return r;for(let l of a)this._toJSON(l,r,n?l.getPath():"",i);return r}fromJSON(e,r=xT.default.cwd()){for(let n in e){let i=e[n];if(n=g0(n,r),typeof i=="string"||i instanceof qh.Buffer){let a=PA(n);this.mkdirpBase(a,511),this.writeFileSync(n,i)}else this.mkdirpBase(n,511)}}fromNestedJSON(e,r){this.fromJSON(GA(e),r)}toTree(e={separator:lv}){return(0,TA.toTreeSync)(this,e)}reset(){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.openFiles=0,this.root=this.createLink(),this.root.setNode(this.createNode(uv.constants.S_IFDIR|511))}mountSync(e,r){this.fromJSON(r,e)}openLink(e,r,n=!0){if(this.openFiles>=this.maxFiles)throw(0,de.createError)(UA,"open",e.getPath());let i=e;n&&(i=this.getResolvedLinkOrThrow(e.getPath(),"open"));let a=i.getNode();if(a.isDirectory()){if((r&(yb|CA|ET))!==yb)throw(0,de.createError)(CT,"open",e.getPath())}else if(r&OA)throw(0,de.createError)(Bh,"open",e.getPath());if(!(r&ET)&&!a.canRead()||!(r&yb)&&!a.canWrite())throw(0,de.createError)(sv,"open",e.getPath());let l=new this.props.File(e,a,r,this.newFdNumber());return this.fds[l.fd]=l,this.openFiles++,r&DA&&l.truncate(),l}openFile(e,r,n,i=!0){let a=pm(e),l;try{if(l=i?this.getResolvedLinkOrThrow(e,"open"):this.getLinkOrThrow(e,"open"),l&&r&TT&&r&xA)throw(0,de.createError)(Ng,"open",e)}catch(v){if(v.code===$h&&r&TT){let _=op.dirname(e),b=this.getResolvedLinkOrThrow(_),C=b.getNode();if(!C.isDirectory())throw(0,de.createError)(Bh,"open",e);if(!C.canExecute()||!C.canWrite())throw(0,de.createError)(sv,"open",e);n??(n=438),l=this.createLink(b,a[a.length-1],!1,n)}else throw v}if(l)return this.openLink(l,r,i);throw(0,de.createError)($h,"open",e)}openBase(e,r,n,i=!0){let a=this.openFile(e,r,n,i);if(!a)throw(0,de.createError)($h,"open",e);return a.fd}openSync(e,r,n=438){let i=(0,de.modeToNumber)(n),a=(0,de.pathToFilename)(e),l=(0,de.flagsToNumber)(r);return this.openBase(a,l,i,!(l&IT))}open(e,r,n,i){let a=n,l=i;typeof n=="function"&&(a=438,l=n),a=a||438;let v=(0,de.modeToNumber)(a),_=(0,de.pathToFilename)(e),b=(0,de.flagsToNumber)(r);this.wrapAsync(this.openBase,[_,b,v,!(b&IT)],l)}closeFile(e){this.fds[e.fd]&&(this.openFiles--,delete this.fds[e.fd],this.releasedFds.push(e.fd))}closeSync(e){(0,de.validateFd)(e);let r=this.getFileByFdOrThrow(e,"close");this.closeFile(r)}close(e,r){(0,de.validateFd)(e);let n=this.getFileByFdOrThrow(e,"close");this.wrapAsync(this.closeFile,[n],r)}openFileOrGetById(e,r,n){if(typeof e=="number"){let i=this.fds[e];if(!i)throw(0,de.createError)($h);return i}else return this.openFile((0,de.pathToFilename)(e),r,n)}readBase(e,r,n,i,a){if(r.byteLength<i)throw(0,de.createError)(BA,"read",void 0,void 0,RangeError);let l=this.getFileByFdOrThrow(e);if(l.node.isSymlink())throw(0,de.createError)(MA,"read",l.link.getPath());return l.read(r,Number(n),Number(i),a===-1||typeof a!="number"?void 0:a)}readSync(e,r,n,i,a){return(0,de.validateFd)(e),this.readBase(e,r,n,i,a)}read(e,r,n,i,a,l){if((0,de.validateCallback)(l),i===0)return(0,b0.default)(()=>{l&&l(null,0,r)});(0,m_.default)(()=>{try{let v=this.readBase(e,r,n,i,a);l(null,v,r)}catch(v){l(v)}})}readvBase(e,r,n){let i=this.getFileByFdOrThrow(e),a=n??void 0;a===-1&&(a=void 0);let l=0;for(let v of r){let _=i.read(v,0,v.byteLength,a);if(a=void 0,l+=_,_<v.byteLength)break}return l}readv(e,r,n,i){let a=n,l=i;typeof n=="function"&&(a=null,l=n),(0,de.validateCallback)(l),(0,m_.default)(()=>{try{let v=this.readvBase(e,r,a);l(null,v,r)}catch(v){l(v)}})}readvSync(e,r,n){return(0,de.validateFd)(e),this.readvBase(e,r,n)}readFileBase(e,r,n){let i,l=typeof e=="number"&&(0,de.isFd)(e),v;if(l)v=e;else{let _=(0,de.pathToFilename)(e),b=this.getResolvedLinkOrThrow(_,"open");if(b.getNode().isDirectory())throw(0,de.createError)(CT,"open",b.getPath());v=this.openSync(e,r)}try{i=(0,de.bufferToEncoding)(this.getFileByFdOrThrow(v).getBuffer(),n)}finally{l||this.closeSync(v)}return i}readFileSync(e,r){let n=(0,qn.getReadFileOptions)(r),i=(0,de.flagsToNumber)(n.flag);return this.readFileBase(e,i,n.encoding)}readFile(e,r,n){let[i,a]=(0,qn.optsAndCbGenerator)(qn.getReadFileOptions)(r,n),l=(0,de.flagsToNumber)(i.flag);this.wrapAsync(this.readFileBase,[e,l,i.encoding],a)}writeBase(e,r,n,i,a){let l=this.getFileByFdOrThrow(e,"write");if(l.node.isSymlink())throw(0,de.createError)(wb,"write",l.link.getPath());return l.write(r,n,i,a===-1||typeof a!="number"?void 0:a)}writeSync(e,r,n,i,a){let[,l,v,_,b]=(0,de.getWriteSyncArgs)(e,r,n,i,a);return this.writeBase(e,l,v,_,b)}write(e,r,n,i,a,l){let[,v,_,b,C,U,W]=(0,de.getWriteArgs)(e,r,n,i,a,l);(0,m_.default)(()=>{try{let K=this.writeBase(e,_,b,C,U);v?W(null,K,r):W(null,K,_)}catch(K){W(K)}})}writevBase(e,r,n){let i=this.getFileByFdOrThrow(e),a=n??void 0;a===-1&&(a=void 0);let l=0;for(let v of r){let _=qh.Buffer.from(v.buffer,v.byteOffset,v.byteLength),b=i.write(_,0,_.byteLength,a);if(a=void 0,l+=b,b<_.byteLength)break}return l}writev(e,r,n,i){let a=n,l=i;typeof n=="function"&&(a=null,l=n),(0,de.validateCallback)(l),(0,m_.default)(()=>{try{let v=this.writevBase(e,r,a);l(null,v,r)}catch(v){l(v)}})}writevSync(e,r,n){return(0,de.validateFd)(e),this.writevBase(e,r,n)}writeFileBase(e,r,n,i){let a=typeof e=="number",l;a?l=e:l=this.openBase((0,de.pathToFilename)(e),n,i);let v=0,_=r.length,b=n&RA?void 0:0;try{for(;_>0;){let C=this.writeSync(l,r,v,_,b);v+=C,_-=C,b!==void 0&&(b+=C)}}finally{a||this.closeSync(l)}}writeFileSync(e,r,n){let i=(0,qn.getWriteFileOptions)(n),a=(0,de.flagsToNumber)(i.flag),l=(0,de.modeToNumber)(i.mode),v=(0,de.dataToBuffer)(r,i.encoding);this.writeFileBase(e,v,a,l)}writeFile(e,r,n,i){let a=n,l=i;typeof n=="function"&&(a=qn.writeFileDefaults,l=n);let v=(0,de.validateCallback)(l),_=(0,qn.getWriteFileOptions)(a),b=(0,de.flagsToNumber)(_.flag),C=(0,de.modeToNumber)(_.mode),U=(0,de.dataToBuffer)(r,_.encoding);this.wrapAsync(this.writeFileBase,[e,U,b,C],v)}linkBase(e,r){let n;try{n=this.getLinkOrThrow(e,"link")}catch(_){throw _.code&&(_=(0,de.createError)(_.code,"link",e,r)),_}let i=op.dirname(r),a;try{a=this.getLinkOrThrow(i,"link")}catch(_){throw _.code&&(_=(0,de.createError)(_.code,"link",e,r)),_}let l=op.basename(r);if(a.getChild(l))throw(0,de.createError)(Ng,"link",e,r);let v=n.getNode();v.nlink++,a.createChild(l,v)}copyFileBase(e,r,n){let i=this.readFileSync(e);if(n&AA&&this.existsSync(r))throw(0,de.createError)(Ng,"copyFile",e,r);if(n&kA)throw(0,de.createError)(YA,"copyFile",e,r);this.writeFileBase(r,i,ry.FLAGS.w,438)}copyFileSync(e,r,n){let i=(0,de.pathToFilename)(e),a=(0,de.pathToFilename)(r);return this.copyFileBase(i,a,(n||0)|0)}copyFile(e,r,n,i){let a=(0,de.pathToFilename)(e),l=(0,de.pathToFilename)(r),v,_;typeof n=="function"?(v=0,_=n):(v=n,_=i),(0,de.validateCallback)(_),this.wrapAsync(this.copyFileBase,[a,l,v],_)}linkSync(e,r){let n=(0,de.pathToFilename)(e),i=(0,de.pathToFilename)(r);this.linkBase(n,i)}link(e,r,n){let i=(0,de.pathToFilename)(e),a=(0,de.pathToFilename)(r);this.wrapAsync(this.linkBase,[i,a],n)}unlinkBase(e){let r=this.getLinkOrThrow(e,"unlink");if(r.length)throw Error("Dir not empty...");this.deleteLink(r);let n=r.getNode();n.nlink--,n.nlink<=0&&this.deleteNode(n)}unlinkSync(e){let r=(0,de.pathToFilename)(e);this.unlinkBase(r)}unlink(e,r){let n=(0,de.pathToFilename)(e);this.wrapAsync(this.unlinkBase,[n],r)}symlinkBase(e,r){let n=pm(r),i;try{i=this.getLinkParentAsDirOrThrow(n)}catch(_){throw _.code&&(_=(0,de.createError)(_.code,"symlink",e,r)),_}let a=n[n.length-1];if(i.getChild(a))throw(0,de.createError)(Ng,"symlink",e,r);let l=i.getNode();if(!l.canExecute()||!l.canWrite())throw(0,de.createError)(sv,"symlink",e,r);let v=i.createChild(a);return v.getNode().makeSymlink(e),v}symlinkSync(e,r,n){let i=(0,de.pathToFilename)(e),a=(0,de.pathToFilename)(r);this.symlinkBase(i,a)}symlink(e,r,n,i){let a=(0,de.validateCallback)(typeof n=="function"?n:i),l=(0,de.pathToFilename)(e),v=(0,de.pathToFilename)(r);this.wrapAsync(this.symlinkBase,[l,v],a)}realpathBase(e,r){let n=this.getResolvedLinkOrThrow(e,"realpath");return(0,Cg.strToEncoding)(n.getPath()||"/",r)}realpathSync(e,r){return this.realpathBase((0,de.pathToFilename)(e),(0,qn.getRealpathOptions)(r).encoding)}realpath(e,r,n){let[i,a]=(0,qn.getRealpathOptsAndCb)(r,n),l=(0,de.pathToFilename)(e);this.wrapAsync(this.realpathBase,[l,i.encoding],a)}lstatBase(e,r=!1,n=!1){let i;try{i=this.getLinkOrThrow(e,"lstat")}catch(a){if(a.code===$h&&!n)return;throw a}return _b.default.build(i.getNode(),r)}lstatSync(e,r){let{throwIfNoEntry:n=!0,bigint:i=!1}=(0,qn.getStatOptions)(r);return this.lstatBase((0,de.pathToFilename)(e),i,n)}lstat(e,r,n){let[{throwIfNoEntry:i=!0,bigint:a=!1},l]=(0,qn.getStatOptsAndCb)(r,n);this.wrapAsync(this.lstatBase,[(0,de.pathToFilename)(e),a,i],l)}statBase(e,r=!1,n=!0){let i;try{i=this.getResolvedLinkOrThrow(e,"stat")}catch(a){if(a.code===$h&&!n)return;throw a}return _b.default.build(i.getNode(),r)}statSync(e,r){let{bigint:n=!0,throwIfNoEntry:i=!0}=(0,qn.getStatOptions)(r);return this.statBase((0,de.pathToFilename)(e),n,i)}stat(e,r,n){let[{bigint:i=!1,throwIfNoEntry:a=!0},l]=(0,qn.getStatOptsAndCb)(r,n);this.wrapAsync(this.statBase,[(0,de.pathToFilename)(e),i,a],l)}fstatBase(e,r=!1){let n=this.getFileByFd(e);if(!n)throw(0,de.createError)(wb,"fstat");return _b.default.build(n.node,r)}fstatSync(e,r){return this.fstatBase(e,(0,qn.getStatOptions)(r).bigint)}fstat(e,r,n){let[i,a]=(0,qn.getStatOptsAndCb)(r,n);this.wrapAsync(this.fstatBase,[e,i.bigint],a)}renameBase(e,r){let n;try{n=this.getResolvedLinkOrThrow(e)}catch(b){throw b.code&&(b=(0,de.createError)(b.code,"rename",e,r)),b}let i;try{i=this.getLinkParentAsDirOrThrow(r)}catch(b){throw b.code&&(b=(0,de.createError)(b.code,"rename",e,r)),b}let a=n.parent,l=a.getNode(),v=i.getNode();if(!l.canExecute()||!l.canWrite()||!v.canExecute()||!v.canWrite())throw(0,de.createError)(sv,"rename",e,r);a.deleteChild(n);let _=op.basename(r);n.name=_,n.steps=[...i.steps,_],i.setChild(n.getName(),n)}renameSync(e,r){let n=(0,de.pathToFilename)(e),i=(0,de.pathToFilename)(r);this.renameBase(n,i)}rename(e,r,n){let i=(0,de.pathToFilename)(e),a=(0,de.pathToFilename)(r);this.wrapAsync(this.renameBase,[i,a],n)}existsBase(e){return!!this.statBase(e)}existsSync(e){try{return this.existsBase((0,de.pathToFilename)(e))}catch{return!1}}exists(e,r){let n=(0,de.pathToFilename)(e);if(typeof r!="function")throw Error(ry.ERRSTR.CB);(0,m_.default)(()=>{try{r(this.existsBase(n))}catch{r(!1)}})}accessBase(e,r){let n=this.getLinkOrThrow(e,"access")}accessSync(e,r=NT){let n=(0,de.pathToFilename)(e);r=r|0,this.accessBase(n,r)}access(e,r,n){let i=NT,a;typeof r!="function"?(i=r|0,a=(0,de.validateCallback)(n)):a=r;let l=(0,de.pathToFilename)(e);this.wrapAsync(this.accessBase,[l,i],a)}appendFileSync(e,r,n){let i=(0,qn.getAppendFileOpts)(n);(!i.flag||(0,de.isFd)(e))&&(i.flag="a"),this.writeFileSync(e,r,i)}appendFile(e,r,n,i){let[a,l]=(0,qn.getAppendFileOptsAndCb)(n,i);(!a.flag||(0,de.isFd)(e))&&(a.flag="a"),this.writeFile(e,r,a,l)}readdirBase(e,r){let n=pm(e),i=this.getResolvedLinkOrThrow(e,"scandir"),a=i.getNode();if(!a.isDirectory())throw(0,de.createError)(Bh,"scandir",e);if(!a.canRead())throw(0,de.createError)(sv,"scandir",e);let l=[];for(let _ of i.children.keys()){let b=i.getChild(_);if(!(!b||_==="."||_==="..")&&(l.push(wA.default.build(b,r.encoding)),r.recursive&&b.children.size)){let C=Object.assign(Object.assign({},r),{recursive:!0,withFileTypes:!0}),U=this.readdirBase(b.getPath(),C);l.push(...U)}}if(!de.isWin&&r.encoding!=="buffer"&&l.sort((_,b)=>_.name<b.name?-1:_.name>b.name?1:0),r.withFileTypes)return l;let v=e;return de.isWin&&(v=v.replace(/\\/g,"/")),l.map(_=>{if(r.recursive){let b=op.join(_.parentPath,_.name.toString());return de.isWin&&(b=b.replace(/\\/g,"/")),b.replace(v+op.posix.sep,"")}return _.name})}readdirSync(e,r){let n=(0,qn.getReaddirOptions)(r),i=(0,de.pathToFilename)(e);return this.readdirBase(i,n)}readdir(e,r,n){let[i,a]=(0,qn.getReaddirOptsAndCb)(r,n),l=(0,de.pathToFilename)(e);this.wrapAsync(this.readdirBase,[l,i],a)}readlinkBase(e,r){let i=this.getLinkOrThrow(e,"readlink").getNode();if(!i.isSymlink())throw(0,de.createError)(FA,"readlink",e);return(0,Cg.strToEncoding)(i.symlink,r)}readlinkSync(e,r){let n=(0,qn.getDefaultOpts)(r),i=(0,de.pathToFilename)(e);return this.readlinkBase(i,n.encoding)}readlink(e,r,n){let[i,a]=(0,qn.getDefaultOptsAndCb)(r,n),l=(0,de.pathToFilename)(e);this.wrapAsync(this.readlinkBase,[l,i.encoding],a)}fsyncBase(e){this.getFileByFdOrThrow(e,"fsync")}fsyncSync(e){this.fsyncBase(e)}fsync(e,r){this.wrapAsync(this.fsyncBase,[e],r)}fdatasyncBase(e){this.getFileByFdOrThrow(e,"fdatasync")}fdatasyncSync(e){this.fdatasyncBase(e)}fdatasync(e,r){this.wrapAsync(this.fdatasyncBase,[e],r)}ftruncateBase(e,r){this.getFileByFdOrThrow(e,"ftruncate").truncate(r)}ftruncateSync(e,r){this.ftruncateBase(e,r)}ftruncate(e,r,n){let i=typeof r=="number"?r:0,a=(0,de.validateCallback)(typeof r=="number"?n:r);this.wrapAsync(this.ftruncateBase,[e,i],a)}truncateBase(e,r){let n=this.openSync(e,"r+");try{this.ftruncateSync(n,r)}finally{this.closeSync(n)}}truncateSync(e,r){if((0,de.isFd)(e))return this.ftruncateSync(e,r);this.truncateBase(e,r)}truncate(e,r,n){let i=typeof r=="number"?r:0,a=(0,de.validateCallback)(typeof r=="number"?n:r);if((0,de.isFd)(e))return this.ftruncate(e,i,a);this.wrapAsync(this.truncateBase,[e,i],a)}futimesBase(e,r,n){let a=this.getFileByFdOrThrow(e,"futimes").node;a.atime=new Date(r*1e3),a.mtime=new Date(n*1e3)}futimesSync(e,r,n){this.futimesBase(e,Jf(r),Jf(n))}futimes(e,r,n,i){this.wrapAsync(this.futimesBase,[e,Jf(r),Jf(n)],i)}utimesBase(e,r,n,i=!0){let l=(i?this.getResolvedLinkOrThrow(e,"utimes"):this.getLinkOrThrow(e,"lutimes")).getNode();l.atime=new Date(r*1e3),l.mtime=new Date(n*1e3)}utimesSync(e,r,n){this.utimesBase((0,de.pathToFilename)(e),Jf(r),Jf(n),!0)}utimes(e,r,n,i){this.wrapAsync(this.utimesBase,[(0,de.pathToFilename)(e),Jf(r),Jf(n),!0],i)}lutimesSync(e,r,n){this.utimesBase((0,de.pathToFilename)(e),Jf(r),Jf(n),!1)}lutimes(e,r,n,i){this.wrapAsync(this.utimesBase,[(0,de.pathToFilename)(e),Jf(r),Jf(n),!1],i)}mkdirBase(e,r){let n=pm(e);if(!n.length)throw(0,de.createError)(Ng,"mkdir",e);let i=this.getLinkParentAsDirOrThrow(e,"mkdir"),a=n[n.length-1];if(i.getChild(a))throw(0,de.createError)(Ng,"mkdir",e);let l=i.getNode();if(!l.canWrite()||!l.canExecute())throw(0,de.createError)(sv,"mkdir",e);i.createChild(a,this.createNode(uv.constants.S_IFDIR|r))}mkdirpBase(e,r){let n=!1,i=pm(e),a=null,l=i.length;for(l=i.length;l>=0&&(a=this.getResolvedLink(i.slice(0,l)),!a);l--);for(a||(a=this.root,l=0),a=this.getResolvedLinkOrThrow(lv+i.slice(0,l).join(lv),"mkdir"),l;l<i.length;l++){let v=a.getNode();if(v.isDirectory()){if(!v.canExecute()||!v.canWrite())throw(0,de.createError)(sv,"mkdir",e)}else throw(0,de.createError)(Bh,"mkdir",e);n=!0,a=a.createChild(i[l],this.createNode(uv.constants.S_IFDIR|r))}return n?e:void 0}mkdirSync(e,r){let n=(0,qn.getMkdirOptions)(r),i=(0,de.modeToNumber)(n.mode,511),a=(0,de.pathToFilename)(e);if(n.recursive)return this.mkdirpBase(a,i);this.mkdirBase(a,i)}mkdir(e,r,n){let i=(0,qn.getMkdirOptions)(r),a=(0,de.validateCallback)(typeof r=="function"?r:n),l=(0,de.modeToNumber)(i.mode,511),v=(0,de.pathToFilename)(e);i.recursive?this.wrapAsync(this.mkdirpBase,[v,l],a):this.wrapAsync(this.mkdirBase,[v,l],a)}mkdtempBase(e,r,n=5){let i=e+(0,de.genRndStr6)();try{return this.mkdirBase(i,511),(0,Cg.strToEncoding)(i,r)}catch(a){if(a.code===Ng){if(n>1)return this.mkdtempBase(e,r,n-1);throw Error("Could not create temp dir.")}else throw a}}mkdtempSync(e,r){let{encoding:n}=(0,qn.getDefaultOpts)(r);if(!e||typeof e!="string")throw new TypeError("filename prefix is required");return(0,de.nullCheck)(e),this.mkdtempBase(e,n)}mkdtemp(e,r,n){let[{encoding:i},a]=(0,qn.getDefaultOptsAndCb)(r,n);if(!e||typeof e!="string")throw new TypeError("filename prefix is required");(0,de.nullCheck)(e)&&this.wrapAsync(this.mkdtempBase,[e,i],a)}rmdirBase(e,r){let n=(0,qn.getRmdirOptions)(r),i=this.getLinkAsDirOrThrow(e,"rmdir");if(i.length&&!n.recursive)throw(0,de.createError)(jA,"rmdir",e);this.deleteLink(i)}rmdirSync(e,r){this.rmdirBase((0,de.pathToFilename)(e),r)}rmdir(e,r,n){let i=(0,qn.getRmdirOptions)(r),a=(0,de.validateCallback)(typeof r=="function"?r:n);this.wrapAsync(this.rmdirBase,[(0,de.pathToFilename)(e),i],a)}rmBase(e,r={}){let n;try{n=this.getResolvedLinkOrThrow(e,"stat")}catch(i){if(i.code===$h&&r.force)return;throw i}if(n.getNode().isDirectory()&&!r.recursive)throw(0,de.createError)($A,"rm",e);if(!n.parent.getNode().canWrite())throw(0,de.createError)(sv,"rm",e);this.deleteLink(n)}rmSync(e,r){this.rmBase((0,de.pathToFilename)(e),r)}rm(e,r,n){let[i,a]=(0,qn.getRmOptsAndCb)(r,n);this.wrapAsync(this.rmBase,[(0,de.pathToFilename)(e),i],a)}fchmodBase(e,r){this.getFileByFdOrThrow(e,"fchmod").chmod(r)}fchmodSync(e,r){this.fchmodBase(e,(0,de.modeToNumber)(r))}fchmod(e,r,n){this.wrapAsync(this.fchmodBase,[e,(0,de.modeToNumber)(r)],n)}chmodBase(e,r,n=!0){(n?this.getResolvedLinkOrThrow(e,"chmod"):this.getLinkOrThrow(e,"chmod")).getNode().chmod(r)}chmodSync(e,r){let n=(0,de.modeToNumber)(r),i=(0,de.pathToFilename)(e);this.chmodBase(i,n,!0)}chmod(e,r,n){let i=(0,de.modeToNumber)(r),a=(0,de.pathToFilename)(e);this.wrapAsync(this.chmodBase,[a,i],n)}lchmodBase(e,r){this.chmodBase(e,r,!1)}lchmodSync(e,r){let n=(0,de.modeToNumber)(r),i=(0,de.pathToFilename)(e);this.lchmodBase(i,n)}lchmod(e,r,n){let i=(0,de.modeToNumber)(r),a=(0,de.pathToFilename)(e);this.wrapAsync(this.lchmodBase,[a,i],n)}fchownBase(e,r,n){this.getFileByFdOrThrow(e,"fchown").chown(r,n)}fchownSync(e,r,n){v_(r),h_(n),this.fchownBase(e,r,n)}fchown(e,r,n,i){v_(r),h_(n),this.wrapAsync(this.fchownBase,[e,r,n],i)}chownBase(e,r,n){this.getResolvedLinkOrThrow(e,"chown").getNode().chown(r,n)}chownSync(e,r,n){v_(r),h_(n),this.chownBase((0,de.pathToFilename)(e),r,n)}chown(e,r,n,i){v_(r),h_(n),this.wrapAsync(this.chownBase,[(0,de.pathToFilename)(e),r,n],i)}lchownBase(e,r,n){this.getLinkOrThrow(e,"lchown").getNode().chown(r,n)}lchownSync(e,r,n){v_(r),h_(n),this.lchownBase((0,de.pathToFilename)(e),r,n)}lchown(e,r,n,i){v_(r),h_(n),this.wrapAsync(this.lchownBase,[(0,de.pathToFilename)(e),r,n],i)}watchFile(e,r,n){let i=(0,de.pathToFilename)(e),a=r,l=n;if(typeof a=="function"&&(l=r,a=null),typeof l!="function")throw Error('"watchFile()" requires a listener function');let v=5007,_=!0;a&&typeof a=="object"&&(typeof a.interval=="number"&&(v=a.interval),typeof a.persistent=="boolean"&&(_=a.persistent));let b=this.statWatchers[i];return b||(b=new this.StatWatcher,b.start(i,_,v),this.statWatchers[i]=b),b.addListener("change",l),b}unwatchFile(e,r){let n=(0,de.pathToFilename)(e),i=this.statWatchers[n];i&&(typeof r=="function"?i.removeListener("change",r):i.removeAllListeners("change"),i.listenerCount("change")===0&&(i.stop(),delete this.statWatchers[n]))}createReadStream(e,r){return new this.ReadStream(e,r)}createWriteStream(e,r){return new this.WriteStream(e,r)}watch(e,r,n){let i=(0,de.pathToFilename)(e),a=r;typeof r=="function"&&(n=r,a=null);let{persistent:l,recursive:v,encoding:_}=(0,qn.getDefaultOpts)(a);l===void 0&&(l=!0),v===void 0&&(v=!1);let b=new this.FSWatcher;return b.start(i,l,v,_),n&&b.addListener("change",n),b}opendirBase(e,r){let n=this.getResolvedLinkOrThrow(e,"scandir");if(!n.getNode().isDirectory())throw(0,de.createError)(Bh,"scandir",e);return new IA.Dir(n,r)}opendirSync(e,r){let n=(0,qn.getOpendirOptions)(r),i=(0,de.pathToFilename)(e);return this.opendirBase(i,n)}opendir(e,r,n){let[i,a]=(0,qn.getOpendirOptsAndCb)(r,n),l=(0,de.pathToFilename)(e);this.wrapAsync(this.opendirBase,[l,i],a)}};Wc.Volume=_0;_0.fd=2147483647;function VA(t){t.emit("stop")}var y0=class extends DT.EventEmitter{constructor(e){super(),this.onInterval=()=>{try{let r=this.vol.statSync(this.filename);this.hasChanged(r)&&(this.emit("change",r,this.prev),this.prev=r)}finally{this.loop()}},this.vol=e}loop(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)}hasChanged(e){return e.mtimeMs>this.prev.mtimeMs||e.nlink!==this.prev.nlink}start(e,r=!0,n=5007){this.filename=(0,de.pathToFilename)(e),this.setTimeout=r?setTimeout.bind(typeof globalThis<"u"?globalThis:global):bA.default,this.interval=n,this.prev=this.vol.statSync(this.filename),this.loop()}stop(){clearTimeout(this.timeoutRef),(0,b0.default)(()=>{VA.call(this,this)})}};Wc.StatWatcher=y0;var ap;function zA(t){ap=(0,qh.bufferAllocUnsafe)(t),ap.used=0}RT.inherits(cv,S0.Readable);Wc.ReadStream=cv;function cv(t,e,r){if(!(this instanceof cv))return new cv(t,e,r);if(this._vol=t,r=Object.assign({},(0,qn.getOptions)(r,{})),r.highWaterMark===void 0&&(r.highWaterMark=64*1024),S0.Readable.call(this,r),this.path=(0,de.pathToFilename)(e),this.fd=r.fd===void 0?null:typeof r.fd!="number"?r.fd.fd:r.fd,this.flags=r.flags===void 0?"r":r.flags,this.mode=r.mode===void 0?438:r.mode,this.start=r.start,this.end=r.end,this.autoClose=r.autoClose===void 0?!0:r.autoClose,this.pos=void 0,this.bytesRead=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw new Error('"start" option must be <= "end" option');this.pos=this.start}typeof this.fd!="number"&&this.open(),this.on("end",function(){this.autoClose&&this.destroy&&this.destroy()})}cv.prototype.open=function(){var t=this;this._vol.open(this.path,this.flags,this.mode,(e,r)=>{if(e){t.autoClose&&t.destroy&&t.destroy(),t.emit("error",e);return}t.fd=r,t.emit("open",r),t.read()})};cv.prototype._read=function(t){if(typeof this.fd!="number")return this.once("open",function(){this._read(t)});if(this.destroyed)return;(!ap||ap.length-ap.used<LA)&&zA(this._readableState.highWaterMark);var e=ap,r=Math.min(ap.length-ap.used,t),n=ap.used;if(this.pos!==void 0&&(r=Math.min(this.end-this.pos+1,r)),r<=0)return this.push(null);var i=this;this._vol.read(this.fd,ap,ap.used,r,this.pos,a),this.pos!==void 0&&(this.pos+=r),ap.used+=r;function a(l,v){if(l)i.autoClose&&i.destroy&&i.destroy(),i.emit("error",l);else{var _=null;v>0&&(i.bytesRead+=v,_=e.slice(n,n+v)),i.push(_)}}};cv.prototype._destroy=function(t,e){this.close(r=>{e(t||r)})};cv.prototype.close=function(t){var e;if(t&&this.once("close",t),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",AT);return}return(0,b0.default)(()=>this.emit("close"))}typeof((e=this._readableState)===null||e===void 0?void 0:e.closed)=="boolean"?this._readableState.closed=!0:this.closed=!0,this._vol.close(this.fd,r=>{r?this.emit("error",r):this.emit("close")}),this.fd=null};function AT(t){this.close()}RT.inherits(sp,S0.Writable);Wc.WriteStream=sp;function sp(t,e,r){if(!(this instanceof sp))return new sp(t,e,r);if(this._vol=t,r=Object.assign({},(0,qn.getOptions)(r,{})),S0.Writable.call(this,r),this.path=(0,de.pathToFilename)(e),this.fd=r.fd===void 0?null:typeof r.fd!="number"?r.fd.fd:r.fd,this.flags=r.flags===void 0?"w":r.flags,this.mode=r.mode===void 0?438:r.mode,this.start=r.start,this.autoClose=r.autoClose===void 0?!0:!!r.autoClose,this.pos=void 0,this.bytesWritten=0,this.pending=!0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.start<0)throw new Error('"start" must be >= zero');this.pos=this.start}r.encoding&&this.setDefaultEncoding(r.encoding),typeof this.fd!="number"&&this.open(),this.once("finish",function(){this.autoClose&&this.close()})}sp.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,function(t,e){if(t){this.autoClose&&this.destroy&&this.destroy(),this.emit("error",t);return}this.fd=e,this.pending=!1,this.emit("open",e)}.bind(this))};sp.prototype._write=function(t,e,r){if(!(t instanceof qh.Buffer||t instanceof Uint8Array))return this.emit("error",new Error("Invalid data"));if(typeof this.fd!="number")return this.once("open",function(){this._write(t,e,r)});var n=this;this._vol.write(this.fd,t,0,t.length,this.pos,(i,a)=>{if(i)return n.autoClose&&n.destroy&&n.destroy(),r(i);n.bytesWritten+=a,r()}),this.pos!==void 0&&(this.pos+=t.length)};sp.prototype._writev=function(t,e){if(typeof this.fd!="number")return this.once("open",function(){this._writev(t,e)});let r=this,n=t.length,i=new Array(n);for(var a=0,l=0;l<n;l++){var v=t[l].chunk;i[l]=v,a+=v.length}let _=qh.Buffer.concat(i);this._vol.write(this.fd,_,0,_.length,this.pos,(b,C)=>{if(b)return r.destroy&&r.destroy(),e(b);r.bytesWritten+=C,e()}),this.pos!==void 0&&(this.pos+=a)};sp.prototype.close=function(t){var e;if(t&&this.once("close",t),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",AT);return}return(0,b0.default)(()=>this.emit("close"))}typeof((e=this._writableState)===null||e===void 0?void 0:e.closed)=="boolean"?this._writableState.closed=!0:this.closed=!0,this._vol.close(this.fd,r=>{r?this.emit("error",r):this.emit("close")}),this.fd=null};sp.prototype._destroy=cv.prototype._destroy;sp.prototype.destroySoon=sp.prototype.end;var w0=class extends DT.EventEmitter{constructor(e){super(),this._filename="",this._filenameEncoded="",this._recursive=!1,this._encoding=Cg.ENCODING_UTF8,this._listenerRemovers=new Map,this._onParentChild=r=>{r.getName()===this._getName()&&this._emit("rename")},this._emit=r=>{this.emit("change",r,this._filenameEncoded)},this._persist=()=>{this._timer=setTimeout(this._persist,1e6)},this._vol=e}_getName(){return this._steps[this._steps.length-1]}start(e,r=!0,n=!1,i=Cg.ENCODING_UTF8){this._filename=(0,de.pathToFilename)(e),this._steps=pm(this._filename),this._filenameEncoded=(0,Cg.strToEncoding)(this._filename),this._recursive=n,this._encoding=i;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(_){let b=new Error(`watch ${this._filename} ${_.code}`);throw b.code=_.code,b.errno=_.code,b}let a=_=>{var b;let C=_.getPath(),U=_.getNode(),W=()=>{let q=ny(this._filename,C);return q||(q=this._getName()),this.emit("change","change",q)};U.on("change",W);let K=(b=this._listenerRemovers.get(U.ino))!==null&&b!==void 0?b:[];K.push(()=>U.removeListener("change",W)),this._listenerRemovers.set(U.ino,K)},l=_=>{var b;let C=_.getNode(),U=q=>{this.emit("change","rename",ny(this._filename,q.getPath())),setTimeout(()=>{a(q),l(q)})},W=q=>{let H=Z=>{let ne=Z.getNode().ino,he=this._listenerRemovers.get(ne);he&&(he.forEach(Ie=>Ie()),this._listenerRemovers.delete(ne));for(let[Ie,_e]of Z.children.entries())_e&&Ie!=="."&&Ie!==".."&&H(_e)};H(q),this.emit("change","rename",ny(this._filename,q.getPath()))};for(let[q,H]of _.children.entries())H&&q!=="."&&q!==".."&&a(H);if(_.on("child:add",U),_.on("child:delete",W),((b=this._listenerRemovers.get(C.ino))!==null&&b!==void 0?b:[]).push(()=>{_.removeListener("child:add",U),_.removeListener("child:delete",W)}),n)for(let[q,H]of _.children.entries())H&&q!=="."&&q!==".."&&l(H)};a(this._link),l(this._link);let v=this._link.parent;v&&(v.setMaxListeners(v.getMaxListeners()+1),v.on("child:delete",this._onParentChild)),r&&this._persist()}close(){clearTimeout(this._timer),this._listenerRemovers.forEach(r=>{r.forEach(n=>n())}),this._listenerRemovers.clear();let e=this._link.parent;e&&e.removeListener("child:delete",this._onParentChild)}};Wc.FSWatcher=w0});var PT=ln(E0=>{"use strict";Object.defineProperty(E0,"__esModule",{value:!0});E0.fsSynchronousApiList=void 0;E0.fsSynchronousApiList=["accessSync","appendFileSync","chmodSync","chownSync","closeSync","copyFileSync","existsSync","fchmodSync","fchownSync","fdatasyncSync","fstatSync","fsyncSync","ftruncateSync","futimesSync","lchmodSync","lchownSync","linkSync","lstatSync","mkdirSync","mkdtempSync","openSync","readdirSync","readFileSync","readlinkSync","readSync","readvSync","realpathSync","renameSync","rmdirSync","rmSync","statSync","symlinkSync","truncateSync","unlinkSync","utimesSync","lutimesSync","writeFileSync","writeSync","writevSync"]});var LT=ln(T0=>{"use strict";Object.defineProperty(T0,"__esModule",{value:!0});T0.fsCallbackApiList=void 0;T0.fsCallbackApiList=["access","appendFile","chmod","chown","close","copyFile","createReadStream","createWriteStream","exists","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","read","readv","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","unwatchFile","utimes","lutimes","watch","watchFile","write","writev","writeFile"]});var Eb=ln((Kc,I0)=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.memfs=Kc.fs=Kc.vol=Kc.Volume=void 0;Kc.createFsFromVolume=Sb;var WA=Gy(),KA=Jy(),bb=kT(),MT=Fh(),JA=PT(),ZA=LT(),{F_OK:XA,R_OK:QA,W_OK:ek,X_OK:tk}=MT.constants;Kc.Volume=bb.Volume;Kc.vol=new bb.Volume;function Sb(t){let e={F_OK:XA,R_OK:QA,W_OK:ek,X_OK:tk,constants:MT.constants,Stats:WA.default,Dirent:KA.default};for(let r of JA.fsSynchronousApiList)typeof t[r]=="function"&&(e[r]=t[r].bind(t));for(let r of ZA.fsCallbackApiList)typeof t[r]=="function"&&(e[r]=t[r].bind(t));return e.StatWatcher=t.StatWatcher,e.FSWatcher=t.FSWatcher,e.WriteStream=t.WriteStream,e.ReadStream=t.ReadStream,e.promises=t.promises,e._toUnixTimestamp=bb.toUnixTimestamp,e.__vol=t,e}Kc.fs=Sb(Kc.vol);var rk=(t={},e="/")=>{let r=Kc.Volume.fromNestedJSON(t,e);return{fs:Sb(r),vol:r}};Kc.memfs=rk;I0.exports=Object.assign(Object.assign({},I0.exports),Kc.fs);I0.exports.semantic=!0});var WT=ln((gY,Ob)=>{function qT(t){return Array.isArray(t)?t:[t]}var ok=void 0,Nb="",$T=" ",Ib="\\",sk=/^\s+$/,uk=/(?:[^\\]|^)\\$/,lk=/^\\!/,ck=/^\\#/,fk=/\r?\n/g,dk=/^\.*\/|^\.+$/,pk=/\/$/,g_="/",HT="node-ignore";typeof Symbol<"u"&&(HT=Symbol.for("node-ignore"));var GT=HT,iy=(t,e,r)=>(Object.defineProperty(t,e,{value:r}),r),mk=/([0-z])-([0-z])/g,VT=()=>!1,vk=t=>t.replace(mk,(e,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?e:Nb),hk=t=>{let{length:e}=t;return t.slice(0,e-e%2)},gk=[[/^\uFEFF/,()=>Nb],[/((?:\\\\)*?)(\\?\s+)$/,(t,e,r)=>e+(r.indexOf("\\")===0?$T:Nb)],[/(\\+?)\s/g,(t,e)=>{let{length:r}=e;return e.slice(0,r-r%2)+$T}],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,r)=>e+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return e+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>Ib],[/\\\\/g,()=>Ib],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,r,n,i)=>e===Ib?`\\[${r}${hk(n)}${i}`:i==="]"&&n.length%2===0?`[${vk(r)}${n}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`]],_k=/(^|\\\/)?\\\*$/,ay="regex",N0="checkRegex",BT="_",yk={[ay](t,e){return`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`},[N0](t,e){return`${e?`${e}[^/]*`:"[^/]*"}(?=$|\\/$)`}},wk=t=>gk.reduce((e,[r,n])=>e.replace(r,n.bind(t)),t),C0=t=>typeof t=="string",bk=t=>t&&C0(t)&&!sk.test(t)&&!uk.test(t)&&t.indexOf("#")!==0,Sk=t=>t.split(fk).filter(Boolean),Cb=class{constructor(e,r,n,i,a,l){this.pattern=e,this.mark=r,this.negative=a,iy(this,"body",n),iy(this,"ignoreCase",i),iy(this,"regexPrefix",l)}get regex(){let e=BT+ay;return this[e]?this[e]:this._make(ay,e)}get checkRegex(){let e=BT+N0;return this[e]?this[e]:this._make(N0,e)}_make(e,r){let n=this.regexPrefix.replace(_k,yk[e]),i=this.ignoreCase?new RegExp(n,"i"):new RegExp(n);return iy(this,r,i)}},Ek=({pattern:t,mark:e},r)=>{let n=!1,i=t;i.indexOf("!")===0&&(n=!0,i=i.substr(1)),i=i.replace(lk,"!").replace(ck,"#");let a=wk(i);return new Cb(t,e,i,r,n,a)},xb=class{constructor(e){this._ignoreCase=e,this._rules=[]}_add(e){if(e&&e[GT]){this._rules=this._rules.concat(e._rules._rules),this._added=!0;return}if(C0(e)&&(e={pattern:e}),bk(e.pattern)){let r=Ek(e,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(e){return this._added=!1,qT(C0(e)?Sk(e):e).forEach(this._add,this),this._added}test(e,r,n){let i=!1,a=!1,l;this._rules.forEach(_=>{let{negative:b}=_;a===b&&i!==a||b&&!i&&!a&&!r||!_[n].test(e)||(i=!b,a=b,l=b?ok:_)});let v={ignored:i,unignored:a};return l&&(v.rule=l),v}},Tk=(t,e)=>{throw new e(t)},ah=(t,e,r)=>C0(t)?t?ah.isNotRelative(t)?r(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${e}\``,TypeError),zT=t=>dk.test(t);ah.isNotRelative=zT;ah.convert=t=>t;var Db=class{constructor({ignorecase:e=!0,ignoreCase:r=e,allowRelativePaths:n=!1}={}){iy(this,GT,!0),this._rules=new xb(r),this._strictPathCheck=!n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}add(e){return this._rules.add(e)&&this._initCache(),this}addPattern(e){return this.add(e)}_test(e,r,n,i){let a=e&&ah.convert(e);return ah(a,e,this._strictPathCheck?Tk:VT),this._t(a,r,n,i)}checkIgnore(e){if(!pk.test(e))return this.test(e);let r=e.split(g_).filter(Boolean);if(r.pop(),r.length){let n=this._t(r.join(g_)+g_,this._testCache,!0,r);if(n.ignored)return n}return this._rules.test(e,!1,N0)}_t(e,r,n,i){if(e in r)return r[e];if(i||(i=e.split(g_).filter(Boolean)),i.pop(),!i.length)return r[e]=this._rules.test(e,n,ay);let a=this._t(i.join(g_)+g_,r,n,i);return r[e]=a.ignored?a:this._rules.test(e,n,ay)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return qT(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}},Rb=t=>new Db(t),Ik=t=>ah(t&&ah.convert(t),t,VT);if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let t=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");ah.convert=t;let e=/^[a-z]:\//i;ah.isNotRelative=r=>e.test(r)||zT(r)}Ob.exports=Rb;Rb.default=Rb;Ob.exports.isPathValid=Ik});var XT=ln((L0,ZT)=>{(function(t,e){typeof L0=="object"&&typeof ZT<"u"?e(L0):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.oneDS=t.oneDS||{}))})(L0,function(t){"use strict";var e="function",r="object",n="undefined",i="prototype",a=Object,l=a[i];function v(o,c){return o||c}function _(o,c){return o[c]}var b=void 0,C=null,U="",W="function",K="object",q="prototype",H="__proto__",Z="undefined",ne="constructor",he="Symbol",Ie="_polyfill",_e="length",Ae="name",He="call",tt="toString",lt=v(Object),Rt=_(lt,q),zt=v(String),Rr=_(zt,q),cn=v(Math),jt=v(Array),Ht=_(jt,q),qr=_(Ht,"slice");function rt(o,c){try{return{v:o.apply(this,c)}}catch(m){return{e:m}}}function fn(o,c){var m=rt(o);return m.e?c:m.v}var Le;function Zt(o){return function(c){return typeof c===o}}function Wt(o){var c="[object "+o+"]";return function(m){return!!(m&&Tt(m)===c)}}function Tt(o){return Rt[tt].call(o)}function hn(o,c){return typeof o===c}function st(o){return typeof o===Z||o===Z}function ei(o){return!Xt(o)}function ot(o){return o===C||st(o)}function Su(o){return o===C||!Xt(o)}function Xt(o){return!!o||o!==b}function qa(o){return!Le&&(Le=["string","number","boolean",Z,"symbol","bigint"]),o!==K&&Le.indexOf(o)!==-1}var Kt=Zt("string"),cr=Zt(W);function Ci(o){return!o&&ot(o)?!1:!!o&&typeof o===K}var mr=_(jt,"isArray"),xi=Wt("Date"),Lr=Zt("number"),Hn=Zt("boolean"),Ct=Wt("Error");function Mr(o){return!!(o&&o.then&&cr(o.then))}function Ze(o){return!o||!Pn(o)}function Pn(o){return!(!o||fn(function(){return!(o&&0+o)},!o))}var Hr=_(lt,"getOwnPropertyDescriptor");function Jr(o,c){return!!o&&Rt.hasOwnProperty[He](o,c)}var Na=v(_(lt,"hasOwn"),Ui);function Ui(o,c){return Jr(o,c)||!!Hr(o,c)}function Fr(o,c,m){if(o&&Ci(o)){for(var w in o)if(Na(o,w)&&c[He](m||o,w,o[w])===-1)break}}var ir={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function yr(o){var c={};if(c[ir.c]=!0,c[ir.e]=!0,o.l){c.get=function(){return o.l.v};var m=Hr(o.l,"v");m&&m.set&&(c.set=function(w){o.l.v=w})}return Fr(o,function(w,I){c[ir[w]]=ei(I)?c[ir[w]]:I}),c}var sn=_(lt,"defineProperty");function ed(o,c,m,w,I,O){var L={e:O,c:I};return m&&(L.g=m),w&&(L.s=w),sn(o,c,yr(L))}function ti(o,c,m){return sn(o,c,yr(m))}function td(o,c,m,w,I){var O={};return Fr(o,function(L,A){Eu(O,L,c?A:L,I),Eu(O,A,m?A:L,I)}),w?w(O):O}function Eu(o,c,m,w){sn(o,c,{value:m,enumerable:!0,writable:!!w})}var xn=v(zt),os="[object Error]";function Jt(o,c){var m=U,w=Rt[tt][He](o);w===os&&(o={stack:xn(o.stack),message:xn(o.message),name:xn(o.name)});try{m=JSON.stringify(o,C,c?typeof c=="number"?c:4:b),m=(m?m.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):C)||xn(o)}catch(I){m=" - "+Jt(I,c)}return w+": "+m}function ji(o){throw new Error(o)}function Ha(o){throw new TypeError(o)}var ss=_(lt,"freeze");function Ca(o){return o}function rd(o){return o[H]||C}var il=_(lt,"assign"),Ji=_(lt,"keys");function xa(o){return ss&&Fr(o,function(c,m){(mr(m)||Ci(m))&&xa(m)}),Di(o)}var Di=v(ss,Ca),us=v(_(lt,"seal"),Ca),Gs=v(_(lt,"getPrototypeOf"),rd);function ui(o){return td(o,1,0,Di)}function al(o){return td(o,0,0,Di)}var Vs=al({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Da="__tsUtils$gblCfg",ri;function rc(){var o;return typeof globalThis!==Z&&(o=globalThis),!o&&typeof self!==Z&&(o=self),!o&&typeof window!==Z&&(o=window),!o&&typeof global!==Z&&(o=global),o}function zs(){if(!ri){var o=rt(rc).v||{};ri=o[Da]=o[Da]||{}}return ri}var li=ua;function ua(o,c,m){var w=c?c[o]:C;return function(I){var O=(I?I[o]:C)||w;if(O||m){var L=arguments;return(O||m).apply(I,O?qr[He](L,1):L)}Ha('"'+xn(o)+'" not defined for '+Jt(I))}}function vr(o){return function(c){return c[o]}}var Dn=_(cn,"max"),Ra=li("slice",Rr),Zr=li("substring",Rr),gi=ua("substr",Rr,Ga);function Ga(o,c,m){return ot(o)&&Ha("Invalid "+Jt(o)),m<0?U:(c=c||0,c<0&&(c=Dn(c+o[_e],0)),st(m)?Ra(o,c):Ra(o,c,c+m))}function Xr(o,c){return Zr(o,0,c)}var la="_urid",Tu;function ca(){if(!Tu){var o=zs();Tu=o.gblSym=o.gblSym||{k:{},s:{}}}return Tu}var wn;function ci(o){var c={description:xn(o),toString:function(){return he+"("+o+")"}};return c[Ie]=!0,c}function ol(o){var c=ca();if(!Na(c.k,o)){var m=ci(o),w=Ji(c.s).length;m[la]=function(){return w+"_"+m[tt]()},c.k[o]=m,c.s[m[la]()]=xn(o)}return c.k[o]}function Oa(o){!wn&&(wn={});var c,m=Vs[o];return m&&(c=wn[m]=wn[m]||ci(he+"."+m)),c}var Or;function Ri(){Or=zs()}function nd(o){var c={};return!Or&&Ri(),c.b=Or.lzy,sn(c,"v",{configurable:!0,get:function(){var m=o();return Or.lzy||sn(c,"v",{value:m}),c.b=Or.lzy,m}}),c}function Yi(o){return sn({toJSON:function(){return o}},"v",{value:o})}var ls="window",nc;function cs(o,c){var m;return function(){return!Or&&Ri(),(!m||Or.lzy)&&(m=Yi(rt(o,c).v)),m.v}}function id(o){return!Or&&Ri(),(!nc||o===!1||Or.lzy)&&(nc=Yi(rt(rc).v||C)),nc.v}function gn(o,c){var m;if(!nc||c===!1?m=id(c):m=nc.v,m&&m[o])return m[o];if(o===ls)try{return window}catch{}return C}function rf(){return!!fa()}var fa=cs(gn,["document"]);function dp(){return!!fi()}var fi=cs(gn,[ls]);function Tm(){return!!Aa()}var Aa=cs(gn,["navigator"]);function nf(){return!!mo()}var mo=cs(gn,["history"]),ad=cs(function(){return!!rt(function(){return process&&(process.versions||{}).node}).v}),Tr,fs;function od(){return Tr=Yi(rt(gn,[he]).v),Tr}function Zi(o){var c=(Or.lzy?0:Tr)||od();return c.v?c.v[o]:b}function ic(){return!!Lt()}function Lt(){return!Or&&Ri(),((Or.lzy?0:Tr)||od()).v}function ka(o,c){var m=Vs[o];!Or&&Ri();var w=(Or.lzy?0:Tr)||od();return w.v?w.v[m||o]:c?b:Oa(o)}function sl(o,c){!Or&&Ri();var m=(Or.lzy?0:Tr)||od();return m.v?m.v(o):c?C:ci(o)}function af(o){return!Or&&Ri(),fs=(Or.lzy?0:fs)||Yi(rt(Zi,["for"]).v),(fs.v||ol)(o)}function wv(o){return!!o&&cr(o.next)}function Va(o){return!Su(o)&&cr(o[ka(3)])}var of;function pp(o,c,m){if(o&&(wv(o)||(!of&&(of=Yi(ka(3))),o=o[of.v]?o[of.v]():C),wv(o))){var w=b,I=b;try{for(var O=0;!(I=o.next()).done&&c[He](m||o,I.value,O,o)!==-1;)O++}catch(L){w={e:L},o.throw&&(I=C,o.throw(w))}finally{try{I&&!I.done&&o.return&&o.return(I)}finally{if(w)throw w.e}}}}function Iu(o,c,m){return o.apply(c,m)}function za(o,c){return!st(c)&&o&&(mr(c)?Iu(o.push,o,c):wv(c)||Va(c)?pp(c,function(m){o.push(m)}):o.push(c)),o}function pt(o,c,m){if(o)for(var w=o[_e]>>>0,I=0;I<w&&!(I in o&&c[He](m||o,o[I],I,o)===-1);I++);}var Oi=li("indexOf",Ht),Nu=li("map",Ht);function Ws(o,c,m){return((o?o.slice:C)||qr).apply(o,qr[He](arguments,1))}function mp(o,c,m){return Oi(o,c,m)!==-1}var vp=ua("includes",Ht,mp),Rn=li("reduce",Ht),Pa=v(_(lt,"create"),hp);function hp(o){if(!o)return{};var c=typeof o;c!==K&&c!==W&&Ha("Prototype must be an Object or function: "+Jt(o));function m(){}return m[q]=o,new m}var Wa;function da(o,c){var m=lt.setPrototypeOf||function(w,I){var O;!Wa&&(Wa=Yi((O={},O[H]=[],O instanceof Array))),Wa.v?w[H]=I:Fr(I,function(L,A){return w[L]=A})};return m(o,c)}function hh(o,c,m){rt(ti,[c,Ae,{v:o,c:!0,e:!1}]),c=da(c,m);function w(){this[ne]=c,rt(ti,[this,Ae,{v:o,c:!0,e:!1}])}return c[q]=m===C?Pa(m):(w[q]=m[q],new w),c}function bv(o,c){c&&(o[Ae]=c)}function Im(o,c,m){var w=m||Error,I=w[q][Ae],O=Error.captureStackTrace;return hh(o,function(){var L=this,A=arguments;try{rt(bv,[w,o]);var M=Iu(w,L,qr[He](A))||L;if(M!==L){var Y=Gs(L);Y!==Gs(M)&&da(M,Y)}return O&&O(M,L[ne]),c&&c(M,A),M}finally{rt(bv,[w,I])}},w)}function Cu(){return(Date.now||Nm)()}function Nm(){return new Date().getTime()}function og(o){return function(m){return ot(m)&&Ha("strTrim called ["+Jt(m)+"]"),m&&m.replace&&(m=m.replace(o,U)),m}}var gp=og(/^\s+|(?=\s)\s+$/g),Xi=ua("trim",Rr,gp),sf,uf,vo;function La(o){if(!o||typeof o!==K)return!1;vo||(vo=dp()?fi():!0);var c=!1;if(o!==vo){uf||(sf=Function[q][tt],uf=sf[He](lt));try{var m=Gs(o);c=!m,c||(Jr(m,ne)&&(m=m[ne]),c=!!(m&&typeof m===W&&sf[He](m)===uf))}catch{}}return c}function xu(o){return o.value&&Dm(o),!0}var Cm=[sd,Dm,xm,yp];function Ka(o,c,m,w){var I;return pt(o,function(O){if(O.k===c)return I=O,-1}),I||(I={k:c,v:c},o.push(I),w(I)),I.v}function _p(o,c,m,w){var I=m.handler,O=m.path?w?m.path.concat(w):m.path:[],L={handler:m.handler,src:m.src,path:O},A=typeof c,M=!1,Y=c===C;Y||(c&&A===K?M=La(c):Y=qa(A));var z={type:A,isPrim:Y,isPlain:M,value:c,result:c,path:O,origin:m.src,copy:function(te,Q){return _p(o,te,Q?L:m,Q)},copyTo:function(te,Q){return Du(o,te,Q,L)}};return z.isPrim?I&&I[He](m,z)?z.result:c:Ka(o,c,O,function(te){ti(z,"result",{g:function(){return te.v},s:function(ie){te.v=ie}});for(var Q=0,ae=I;!(ae||(Q<Cm.length?Cm[Q++]:xu))[He](m,z);)ae=C})}function Du(o,c,m,w){if(!ot(m))for(var I in m)c[I]=_p(o,m[I],w,I);return c}function ac(o,c,m){var w={handler:m,src:c,path:[]};return Du([],o,c,w)}function lf(o,c){var m={handler:c,src:o};return _p([],o,m)}function sd(o){var c=o.value;if(mr(c)){var m=o.result=[];return m.length=c.length,o.copyTo(m,c),!0}return!1}function yp(o){var c=o.value;return xi(c)?(o.result=new Date(c.getTime()),!0):!1}function xm(o){return o.type===W}function Dm(o){var c=o.value;if(c&&o.isPlain){var m=o.result={};return o.copyTo(m,c),!0}return!1}function Ru(o,c){return pt(c,function(m){ac(o,m)}),o}function wp(o,c,m,w,I,O,L){return Ru(lf(o)||{},qr[He](arguments))}var Ks=vr(_e),ul;function Ja(){return!Or&&Ri(),(!ul||Or.lzy)&&(ul=Yi(rt(gn,["performance"]).v)),ul.v}function cf(){var o=Ja();return o&&o.now?o.now():Cu()}var ud=ua("endsWith",Rr,oc);function oc(o,c,m){Kt(o)||Ha("'"+Jt(o)+"' is not a string");var w=Kt(c)?c:xn(c),I=!st(m)&&m<o[_e]?m:o[_e];return Zr(o,I-w[_e],I)===w}var ho=li("indexOf",Rr),Sv=ua("startsWith",Rr,ds);function ds(o,c,m){Kt(o)||Ha("'"+Jt(o)+"' is not a string");var w=Kt(c)?c:xn(c),I=m>0?m:0;return Zr(o,I,I+w[_e])===w}var ko="ref",go="unref",Ou="hasRef",ld="enabled";function sc(o,c,m){var w=!0,I=o?c(C):C,O;function L(){return w=!1,I&&I[go]&&I[go](),O}function A(){I&&m(I),I=C}function M(){return I=c(I),w||L(),O}function Y(z){!z&&I&&A(),z&&!I&&M()}return O={cancel:A,refresh:M},O[Ou]=function(){return I&&I[Ou]?I[Ou]():w},O[ko]=function(){return w=!0,I&&I[ko]&&I[ko](),O},O[go]=L,O=sn(O,ld,{get:function(){return!!I},set:Y}),{h:O,dn:function(){I=C}}}function uc(o,c,m){var w=mr(c),I=w?c.length:0,O=(I>0?c[0]:w?b:c)||setTimeout,L=(I>1?c[1]:b)||clearTimeout,A=m[0];m[0]=function(){M.dn(),Iu(A,b,qr[He](arguments))};var M=sc(o,function(Y){if(Y){if(Y.refresh)return Y.refresh(),Y;Iu(L,b,[Y])}return Iu(O,b,m)},function(Y){Iu(L,b,[Y])});return M.h}function ll(o,c){return uc(!0,b,qr[He](arguments))}function cd(o,c){return uc(!1,b,qr[He](arguments))}(id()||{}).Symbol,(id()||{}).Reflect;var ff="hasOwnProperty",fd=function(o,c){return fd=a.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,w){m.__proto__=w}||function(m,w){for(var I in w)w[ff](I)&&(m[I]=w[I])},fd(o,c)};function cl(o,c){typeof c!==e&&c!==null&&Ha("Class extends value "+String(c)+" is not a constructor or null"),fd(o,c);function m(){this.constructor=o}o[i]=c===null?Pa(c):(m[i]=c[i],new m)}function _o(o,c){for(var m=0,w=c.length,I=o.length;m<w;m++,I++)o[I]=c[m];return o}var lc,Po="constructor",Ma="prototype",ps="function",un="_dynInstFuncs",Js="_isDynProxy",yo="_dynClass",cc="_dynCls$",fc="_dynInstChk",ms=fc,df="_dfOpts",vs="_unknown_",Au="__proto__",pa="_dyn"+Au,bp="__dynProto$Gbl",fl="_dynInstProto",Qi="useBaseInst",dd="setInstFuncs",Sp=Object,pf=Sp.getPrototypeOf,mf=Sp.getOwnPropertyNames,Ep=id(),Ev=Ep[bp]||(Ep[bp]={o:(lc={},lc[dd]=!0,lc[Qi]=!0,lc),n:1e3});function dl(o){return o&&(o===Sp[Ma]||o===Array[Ma])}function Lo(o){return dl(o)||o===Function[Ma]}function wo(o){var c;if(o){if(pf)return pf(o);var m=o[Au]||o[Ma]||(o[Po]?o[Po][Ma]:null);c=o[pa]||m,Jr(o,pa)||(delete o[fl],c=o[pa]=o[fl]||o[pa],o[fl]=m)}return c}function On(o,c){var m=[];if(mf)m=mf(o);else for(var w in o)typeof w=="string"&&Jr(o,w)&&m.push(w);if(m&&m.length>0)for(var I=0;I<m.length;I++)c(m[I])}function vf(o,c,m){return c!==Po&&typeof o[c]===ps&&(m||Jr(o,c))&&c!==Au&&c!==Ma}function pl(o){Ha("DynamicProto: "+o)}function ml(o){var c=Pa(null);return On(o,function(m){!c[m]&&vf(o,m,!1)&&(c[m]=o[m])}),c}function Tp(o,c){for(var m=o.length-1;m>=0;m--)if(o[m]===c)return!0;return!1}function Za(o,c,m,w){function I(M,Y,z){var te=Y[z];if(te[Js]&&w){var Q=M[un]||{};Q[ms]!==!1&&(te=(Q[Y[yo]]||{})[z]||te)}return function(){return te.apply(M,arguments)}}var O=Pa(null);On(m,function(M){O[M]=I(c,m,M)});for(var L=wo(o),A=[];L&&!Lo(L)&&!Tp(A,L);)On(L,function(M){!O[M]&&vf(L,M,!pf)&&(O[M]=I(c,L,M))}),A.push(L),L=wo(L);return O}function ku(o,c,m,w){var I=null;if(o&&Jr(m,yo)){var O=o[un]||Pa(null);if(I=(O[m[yo]]||Pa(null))[c],I||pl("Missing ["+c+"] "+ps),!I[fc]&&O[ms]!==!1){for(var L=!Jr(o,c),A=wo(o),M=[];L&&A&&!Lo(A)&&!Tp(M,A);){var Y=A[c];if(Y){L=Y===w;break}M.push(A),A=wo(A)}try{L&&(o[c]=I),I[fc]=1}catch{O[ms]=!1}}}return I}function Zs(o,c,m){var w=c[o];return w===m&&(w=wo(c)[o]),typeof w!==ps&&pl("["+o+"] is not a "+ps),w}function fr(o,c,m,w,I){function O(M,Y){var z=function(){var te=ku(this,Y,M,z)||Zs(Y,M,z);return te.apply(this,arguments)};return z[Js]=1,z}if(!dl(o)){var L=m[un]=m[un]||Pa(null);if(!dl(L)){var A=L[c]=L[c]||Pa(null);L[ms]!==!1&&(L[ms]=!!I),dl(A)||On(m,function(M){vf(m,M,!1)&&m[M]!==w[M]&&(A[M]=m[M],delete m[M],(!Jr(o,M)||o[M]&&!o[M][Js])&&(o[M]=O(o,M)))})}}}function Mo(o,c){if(pf){for(var m=[],w=wo(c);w&&!Lo(w)&&!Tp(m,w);){if(w===o)return!0;m.push(w),w=wo(w)}return!1}return!0}function hs(o,c){return Jr(o,Ma)?o.name||c||vs:((o||{})[Po]||{}).name||c||vs}function Xa(o,c,m,w){Jr(o,Ma)||pl("theClass is an invalid class definition.");var I=o[Ma];Mo(I,c)||pl("["+hs(o)+"] not in hierarchy of ["+hs(c)+"]");var O=null;Jr(I,yo)?O=I[yo]:(O=cc+hs(o,"_")+"$"+Ev.n,Ev.n++,I[yo]=O);var L=Xa[df],A=!!L[Qi];A&&w&&w[Qi]!==void 0&&(A=!!w[Qi]);var M=ml(c),Y=Za(I,c,M,A);m(c,Y);var z=!!pf&&!!L[dd];z&&w&&(z=!!w[dd]),fr(I,O,c,M,z!==!1)}Xa[df]=Ev.o;var pd=100,Qa=ui,Pu=Qa({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),bn=Qa({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),ma="toLowerCase",zr="blkVal",mt="length",vl="rdOnly",Fo="notify",Xs="warnToConsole",bo="throwInternal",Lu="setDf",eo="watch",Qr="logger",Uo="apply",Wr="push",jo="splice",md="hdlr",Yo="cancel",Zn="initialize",So="identifier",gs="removeNotificationListener",$i="addNotificationListener",ea="isInitialized",dc="instrumentationKey",hl="INACTIVE",vd="value",Qs="getNotifyMgr",$o="getPlugin",Bo="name",gl="iKey",qo="time",ni="processNext",hd="getProcessTelContext",_l="pollInternalLogs",eu="enabled",Fa="stopPollingInternalLogs",_s="unload",tu="onComplete",to="version",pc="loggingLevelConsole",Mu="createNew",Ai="teardown",Fu="messageId",ru="message",ro="isAsync",yl="diagLog",Sn="_doTeardown",_i="update",no="getNext",wl="setNextPlugin",ys="protocol",Ip="userAgent",Ua="split",mc="nodeType",Bi="replace",gd="logInternalMessage",va="type",ws="handler",bs="status",Np="getResponseHeader",hf="getAllResponseHeaders",_d="isChildEvt",gf="data",Ho="getCtx",ha="setCtx",vc="complete",Tv="itemsReceived",bl="urlString",Sl="sendPOST",Ss="headers",_f="timeout",gh="setRequestHeader",Cp="traceId",yf="spanId",El="traceFlags",Rm;function Iv(o,c){Rm||(Rm=Im("AggregationError",function(w,I){I[mt]>1&&(w.errors=I[1])}));var m=o||"One or more errors occurred.";throw pt(c,function(w,I){m+=`
`.concat(I," > ").concat(Jt(w))}),new Rm(m,c||[])}var Tl="Promise",Nv="rejected";function wf(o,c){return xp(o,function(m){return c?c({status:"fulfilled",rejected:!1,value:m}):m},function(m){return c?c({status:Nv,rejected:!0,reason:m}):m})}function xp(o,c,m,w){var I=o;try{if(Mr(o))(c||m)&&(I=o.then(c,m));else try{c&&(I=c(o))}catch(O){if(m)I=m(O);else throw O}}finally{w&&Eo(I,w)}return I}function Eo(o,c){var m=o;return c&&(Mr(o)?o.finally?m=o.finally(c):m=o.then(function(w){return c(),w},function(w){throw c(),w}):c()),m}var Om=["pending","resolving","resolved",Nv],_h="dispatchEvent",yd;function Am(o){var c;return o&&o.createEvent&&(c=o.createEvent("Event")),!!c&&c.initEvent}function Dp(o,c,m,w){var I=fa();!yd&&(yd=Yi(!!rt(Am,[I]).v));var O=yd.v?I.createEvent("Event"):w?new Event(c):{};if(m&&m(O),yd.v&&O.initEvent(c,!1,!0),O&&o[_h])o[_h](O);else{var L=o["on"+c];if(L)L(O);else{var A=gn("console");A&&(A.error||A.log)(c,Jt(O))}}}var hc="unhandledRejection",wd=hc.toLowerCase(),Il=10,nu;function gc(o){return cr(o)?o.toString():Jt(o)}function Cv(o,c,m){var w=Ws(arguments,3),I=0,O=!1,L,A=[],M=!1,Y=null,z;function te(it,$t){try{M=!0,Y&&Y.cancel(),Y=null;var Ir=o(function(Si,Sr){A.push(function(){try{var Vi=I===2?it:$t,ts=st(Vi)?L:cr(Vi)?Vi(L):Vi;Mr(ts)?ts.then(Si,Sr):Vi?Si(ts):I===3?Sr(ts):Si(ts)}catch(rs){Sr(rs)}}),O&&ge()},w);return Ir}finally{}}function Q(it){return te(void 0,it)}function ae(it){var $t=it,Ir=it;return cr(it)&&($t=function(Si){return it&&it(),Si},Ir=function(Si){throw it&&it(),Si}),te($t,Ir)}function ie(){return Om[I]}function ge(){if(A.length>0){var it=A.slice();A=[],M=!0,Y&&Y.cancel(),Y=null,c(it)}}function Ee(it,$t){return function(Ir){if(I===$t){if(it===2&&Mr(Ir)){I=1,Ir.then(Ee(2,1),Ee(3,1));return}I=it,O=!0,L=Ir,ge(),!M&&it===3&&!Y&&(Y=ll(je,Il))}}}function je(){if(!M)if(M=!0,ad())process.emit(hc,L,z);else{var it=fi()||id();!nu&&(nu=Yi(rt(gn,[Tl+"RejectionEvent"]).v)),Dp(it,wd,function($t){return ti($t,"promise",{g:function(){return z}}),$t.reason=L,$t},!!nu.v)}}z={then:te,catch:Q,finally:ae},sn(z,"state",{get:ie}),ic()&&(z[ka(11)]="IPromise");function et(){return"IPromise "+ie()+(O?" - "+gc(L):"")}return z.toString=et,function(){cr(m)||Ha(Tl+": executor is not a function - "+gc(m));var $t=Ee(3,0);try{m.call(z,Ee(2,0),$t)}catch(Ir){$t(Ir)}}(),z}function Rp(o){return function(c){var m=Ws(arguments,1);return o(function(w,I){try{var O=[],L=1;pp(c,function(A,M){A&&(L++,xp(A,function(Y){O[M]=Y,--L===0&&w(O)},I))}),L--,L===0&&w(O)}catch(A){I(A)}},m)}}function _c(o){return Yi(function(c){var m=Ws(arguments,1);return o(function(w,I){var O=[],L=1;function A(M,Y){L++,wf(M,function(z){z.rejected?O[Y]={status:Nv,reason:z.reason}:O[Y]={status:"fulfilled",value:z.value},--L===0&&w(O)})}try{mr(c)?pt(c,A):Va(c)?pp(c,A):Ha("Input is not an iterable"),L--,L===0&&w(O)}catch(M){I(M)}},m)})}function Op(o){pt(o,function(c){try{c()}catch{}})}function iu(o){var c=Lr(o)?o:0;return function(m){ll(function(){Op(m)},c)}}function en(o,c){return Cv(en,iu(c),o,c)}var Nl;function ki(o,c){!Nl&&(Nl=Yi(rt(gn,[Tl]).v||null));var m=Nl.v;if(!m)return en(o);cr(o)||Ha(Tl+": executor is not a function - "+Jt(o));var w=0;function I(){return Om[w]}var O=new m(function(L,A){function M(z){w=2,L(z)}function Y(z){w=3,A(z)}o(M,Y)});return sn(O,"state",{get:I}),O}var Ap;function bd(o){return Cv(bd,Op,o)}function yc(o,c){return!Ap&&(Ap=_c(bd)),Ap.v(o,c)}var Cl;function ga(o,c){return!Cl&&(Cl=Yi(ki)),Cl.v.call(this,o,c)}var Sd=Rp(ga),yi=void 0,wr="",au="channels",Ln="core",Es="createPerfMgr",xl="disabled",Dl="extensionConfig",ou="extensions",To="processTelemetry",bf="priority",km="eventsSent",Sf="eventsDiscarded",Pm="eventsSendRequest",Ef="perfEvent",wc="offlineEventsStored",kp="offlineBatchSent",di="offlineBatchDrop",bc="getPerfMgr",Pi="domain",Uu="path",Pp="Not dynamic - ",Ed=/-([a-z])/g,Li=/([^\w\d_$])/g,Td=/^(\d+[\w\d_$])/;function Lp(o){return!ot(o)}function su(o){var c=o;return c&&Kt(c)&&(c=c[Bi](Ed,function(m,w){return w.toUpperCase()}),c=c[Bi](Li,"_"),c=c[Bi](Td,function(m,w){return"_"+w})),c}function vt(o,c){return o&&c?ho(o,c)!==-1:!1}function Ts(o){return o&&o.toISOString()||""}function Is(o){return Ct(o)?o[Bo]:wr}function io(o,c,m,w,I){var O=m;return o&&(O=o[c],O!==m&&(!I||I(O))&&(!w||w(m))&&(O=m,o[c]=O)),O}function Tf(o,c,m){var w;return o?(w=o[c],!w&&ot(w)&&(w=st(m)?{}:m,o[c]=w)):w=st(m)?{}:m,w}function Sc(o,c){var m=null,w=null;return cr(o)?m=o:w=o,function(){var I=arguments;if(m&&(w=m()),w)return w[c][Uo](w,I)}}function Ns(o,c,m){if(o&&c&&Ci(o)&&Ci(c)){var w=function(O){if(Kt(O)){var L=c[O];cr(L)?(!m||m(O,!0,c,o))&&(o[O]=Sc(c,O)):(!m||m(O,!1,c,o))&&(Na(o,O)&&delete o[O],ti(o,O,{g:function(){return c[O]},s:function(A){c[O]=A}}))}};for(var I in c)w(I)}return o}function Io(o,c,m,w,I){o&&c&&m&&(I!==!1||st(o[c]))&&(o[c]=Sc(m,w))}function Ec(o,c,m,w){return o&&c&&Ci(o)&&mr(m)&&pt(m,function(I){Kt(I)&&Io(o,I,c,I,w)}),o}function Id(o){return o&&il&&(o=a(il({},o))),o}function uu(o){try{return o.responseText}catch{}return null}function If(o,c){return o?"XDomainRequest,Response:"+uu(o)||"":c}function Tc(o,c){return o?"XMLHttpRequest,Status:"+o[bs]+",Response:"+uu(o)||o.response||"":c}function Nf(o,c){return c&&(Lr(c)?o=[c].concat(o):mr(c)&&(o=c.concat(o))),o}var Mp="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Fp="withCredentials",Lm="timeout";function Up(o,c,m,w,I,O){w===void 0&&(w=!1),I===void 0&&(I=!1);function L(M,Y,z){try{M[Y]=z}catch{}}var A=new XMLHttpRequest;return w&&L(A,Mp,w),m&&L(A,Fp,m),A.open(o,c,!I),m&&L(A,Fp,m),!I&&O&&L(A,Lm,O),A}function ju(o){var c={};if(Kt(o)){var m=Xi(o)[Ua](/[\r\n]+/);pt(m,function(w){if(w){var I=w.indexOf(": ");if(I!==-1){var O=Xi(w.substring(0,I))[ma](),L=Xi(w.substring(I+1));c[O]=L}else c[Xi(w)]=1}})}return c}function Rl(o,c,m){if(!o[m]&&c&&c[Np]){var w=c[Np](m);w&&(o[m]=Xi(w))}return o}var Cf="kill-duration",Go="kill-duration-seconds",Cs="time-delta-millis";function Vo(o,c){var m={};return o[hf]?m=ju(o[hf]()):c&&(m=Rl(m,o,Cs),m=Rl(m,o,Cf),m=Rl(m,o,Go)),m}var zo="documentMode",Ol="location",jp="console",Al="JSON",Yp="crypto",$p="msCrypto",Nd="ReactNative",xs="msie",Wo="trident/",Ko="XMLHttpRequest",Cd=null,xf=null,Ic=!1,qi=null,Ds=null;function xd(o,c){var m=!1;if(o){try{if(m=c in o,!m){var w=o[i];w&&(m=c in w)}}catch{}if(!m)try{var I=new o;m=!st(I[c])}catch{}}return m}function ta(o){Ic=o}function lu(o){if(o&&Ic){var c=gn("__mockLocation");if(c)return c}return typeof location===r&&location?location:gn(Ol)}function Df(){return typeof console!==n?console:gn(jp)}function Rs(){return!!(typeof JSON===r&&JSON||gn(Al)!==null)}function Mi(){return Rs()?JSON||gn(Al):null}function Yu(){return gn(Yp)}function Dd(){return gn($p)}function Nc(){var o=Aa();return o&&o.product?o.product===Nd:!1}function $u(){var o=Aa();if(o&&(o[Ip]!==xf||Cd===null)){xf=o[Ip];var c=(xf||wr)[ma]();Cd=vt(c,xs)||vt(c,Wo)}return Cd}function xv(o){if(o===void 0&&(o=null),!o){var c=Aa()||{};o=c?(c.userAgent||wr)[ma]():wr}var m=(o||wr)[ma]();if(vt(m,xs)){var w=fa()||{};return Math.max(parseInt(m[Ua](xs)[1]),w[zo]||0)}else if(vt(m,Wo)){var I=parseInt(m[Ua](Wo)[1]);if(I)return I+4}return null}function Mm(o){return(Ds===null||o===!1)&&(Ds=Tm()&&!!Aa().sendBeacon),Ds}function Dv(o){var c=!1;try{c=!!gn("fetch");var m=gn("Request");c&&o&&m&&(c=xd(m,"keepalive"))}catch{}return c}function Cc(){return qi===null&&(qi=typeof XDomainRequest!==n,qi&&Rf()&&(qi=qi&&!xd(gn(Ko),"withCredentials"))),qi}function Rf(){var o=!1;try{var c=gn(Ko);o=!!c}catch{}return o}function Fm(o,c){if(o)for(var m=0;m<o[mt];m++){var w=o[m];if(w[Bo]&&w[Bo]===c)return w}return{}}function yh(o){var c=fa();return c&&o?Fm(c.querySelectorAll("meta"),o).content:null}function Rd(o){var c,m=Ja();if(m){var w=m.getEntriesByType("navigation")||[];c=Fm((w[mt]>0?w[0]:{}).serverTiming,o).description}return c}var Bp=4294967296,xc=4294967295,Bu=123456789,qp=987654321,Os=!1,Od=Bu,Of=qp;function As(o){o<0&&(o>>>=0),Od=Bu+o&xc,Of=qp-o&xc,Os=!0}function kl(){try{var o=Cu()&2147483647;As((Math.random()*Bp^o)+o)}catch{}}function Rv(o){return o>0?Math.floor(Dc()/xc*(o+1))>>>0:0}function Dc(o){var c=0,m=Yu()||Dd();return m&&m.getRandomValues&&(c=m.getRandomValues(new Uint32Array(1))[0]&xc),c===0&&$u()&&(Os||kl(),c=wh()&xc),c===0&&(c=Math.floor(Bp*Math.random()|0)),o||(c>>>=0),c}function wh(o){Of=36969*(Of&65535)+(Of>>16)&xc,Od=18e3*(Od&65535)+(Od>>16)&xc;var c=(Of<<16)+(Od&65535)>>>0&xc|0;return o||(c>>>=0),c}function Ov(o){o===void 0&&(o=22);for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=Dc()>>>0,w=0,I=wr;I[mt]<o;)w++,I+=c.charAt(m&63),m>>>=6,w===5&&(m=(Dc()<<2&4294967295|m&3)>>>0,w=0);return I}var Af="3.3.5",Um="."+Ov(6),Av=0;function qu(o){return o[mc]===1||o[mc]===9||!+o[mc]}function No(o,c){var m=c[o.id];if(!m){m={};try{qu(c)&&ti(c,o.id,{e:!1,v:m})}catch{}}return m}function cu(o,c){return c===void 0&&(c=!1),su(o+Av+++(c?"."+Af:wr)+Um)}function Hu(o){var c={id:cu("_aiData-"+(o||wr)+"."+Af),accept:function(m){return qu(m)},get:function(m,w,I,O){var L=m[c.id];return L?L[su(w)]:(O&&(L=No(c,m),L[su(w)]=I),I)},kill:function(m,w){if(m&&m[w])try{delete m[w]}catch{}}};return c}function Rc(o){return o&&Ci(o)&&(o.isVal||o.fb||Na(o,"v")||Na(o,"mrg")||Na(o,"ref")||o.set)}function Oc(o,c,m){var w,I=m.dfVal||Xt;if(c&&m.fb){var O=m.fb;mr(O)||(O=[O]);for(var L=0;L<O[mt];L++){var A=O[L],M=c[A];if(I(M)?w=M:o&&(M=o.cfg[A],I(M)&&(w=M),o.set(o.cfg,xn(A),M)),I(w))break}}return!I(w)&&I(m.v)&&(w=m.v),w}function Ad(o,c,m){var w=m;if(m&&Rc(m)&&(w=Oc(o,c,m)),w){Rc(w)&&(w=Ad(o,c,w));var I;mr(w)?(I=[],I[mt]=w[mt]):La(w)&&(I={}),I&&(Fr(w,function(O,L){L&&Rc(L)&&(L=Ad(o,c,L)),I[O]=L}),w=I)}return w}function kf(o,c,m,w){var I,O,L,A=w,M,Y,z,te;Rc(A)?(I=A.isVal,O=A.set,z=A[vl],te=A[zr],M=A.mrg,Y=A.ref,!Y&&st(Y)&&(Y=!!M),L=Oc(o,c,A)):L=w,te&&o[zr](c,m);var Q,ae=!0,ie=c[m];(ie||!ot(ie))&&(Q=ie,ae=!1,I&&Q!==L&&!I(Q)&&(Q=L,ae=!0),O&&(Q=O(Q,L,c),ae=Q===L)),ae?L?Q=Ad(o,c,L):Q=L:(La(Q)||mr(L))&&M&&L&&(La(L)||mr(L))&&Fr(L,function(ge,Ee){kf(o,Q,ge,Ee)}),o.set(c,m,Q),Y&&o.ref(c,m),z&&o[vl](c,m)}var Jo=af("[[ai_dynCfg_1]]"),Pl=af("[[ai_blkDynCfg_1]]"),kv=af("[[ai_frcDynCfg_1]]");function Pv(o){if(o){var c;if(mr(o)?(c=[],c[mt]=o[mt]):La(o)&&(c={}),c)return Fr(o,function(m,w){c[m]=Pv(w)}),c}return o}function Hp(o){if(o){var c=o[Jo]||o;if(c.cfg&&(c.cfg===o||c.cfg[Jo]===c))return c}return null}function Gp(o){if(o&&(La(o)||mr(o)))try{o[Pl]=!0}catch{}return o}function Zo(o){if(o)try{o[kv]=!0}catch{}return o}function Gu(o,c,m){var w=!1;return m&&!o[c.blkVal]&&(w=m[kv],!w&&!m[Pl]&&(w=La(m)||mr(m))),w}function Ac(o){Ha("InvalidAccess:"+o)}var Lv=["push","pop","shift","unshift","splice"],Vp=function(o,c,m,w){o&&o[bo](3,108,"".concat(m," [").concat(c,"] failed - ")+Jt(w))};function Mv(o,c,m){mr(c)&&pt(Lv,function(w){var I=c[w];c[w]=function(){for(var O=[],L=0;L<arguments.length;L++)O[L]=arguments[L];var A=I[Uo](this,O);return kd(o,c,m,"Patching"),A}})}function jm(o,c){var m=Hr(o,c);return m&&m.get}function zp(o,c,m,w){var I={n:m,h:[],trk:function(Y){Y&&Y.fn&&(Oi(I.h,Y)===-1&&I.h[Wr](Y),o.trk(Y,I))},clr:function(Y){var z=Oi(I.h,Y);z!==-1&&I.h[jo](z,1)}},O=!0,L=!1;function A(){O&&(L=L||Gu(A,o,w),w&&!w[Jo]&&L&&(w=kd(o,w,m,"Converting")),O=!1);var Y=o.act;return Y&&I.trk(Y),w}A[o.prop]={chng:function(){o.add(I)}};function M(Y){if(w!==Y){A[o.ro]&&!o.upd&&Ac("["+m+"] is read-only:"+Jt(c)),O&&(L=L||Gu(A,o,w),O=!1);var z=L&&A[o.rf];if(L)if(z){Fr(w,function(Q){w[Q]=Y?Y[Q]:yi});try{Fr(Y,function(Q,ae){Ll(o,w,Q,ae)}),Y=w}catch(Q){Vp((o.hdlr||{})[Qr],m,"Assigning",Q),L=!1}}else w&&w[Jo]&&Fr(w,function(Q){var ae=jm(w,Q);if(ae){var ie=ae[o.prop];ie&&ie.chng()}});if(Y!==w){var te=Y&&Gu(A,o,Y);!z&&te&&(Y=kd(o,Y,m,"Converting")),w=Y,L=te}o.add(I)}}ti(c,I.n,{g:A,s:M})}function Ll(o,c,m,w){if(c){var I=jm(c,m),O=I&&!!I[o.prop];O?c[m]=w:zp(o,c,m,w)}return c}function Co(o,c,m,w){if(c){var I=jm(c,m),O=I&&!!I[o.prop],L=w&&w[0],A=w&&w[1],M=w&&w[2];if(!O){if(M)try{Gp(c)}catch(Y){Vp((o.hdlr||{})[Qr],m,"Blocking",Y)}try{Ll(o,c,m,c[m]),I=jm(c,m)}catch(Y){Vp((o.hdlr||{})[Qr],m,"State",Y)}}L&&(I[o.rf]=L),A&&(I[o.ro]=A),M&&(I[o.blkVal]=!0)}return c}function kd(o,c,m,w){try{Fr(c,function(I,O){Ll(o,c,I,O)}),c[Jo]||(sn(c,Jo,{get:function(){return o[md]}}),Mv(o,c,m))}catch(I){Vp((o.hdlr||{})[Qr],m,w,I)}return c}var kc="[[ai_",Xo="]]";function sg(o){var c,m=sl(kc+"get"+o.uid+Xo),w=sl(kc+"ro"+o.uid+Xo),I=sl(kc+"rf"+o.uid+Xo),O=sl(kc+"blkVal"+o.uid+Xo),L=sl(kc+"dtl"+o.uid+Xo),A=null,M=null,Y;function z(ie,ge){var Ee=Y.act;try{Y.act=ie,ie&&ie[L]&&(pt(ie[L],function(et){et.clr(ie)}),ie[L]=[]),ge({cfg:o.cfg,set:o.set.bind(o),setDf:o[Lu].bind(o),ref:o.ref.bind(o),rdOnly:o[vl].bind(o)})}catch(et){var je=o[Qr];throw je&&je[bo](1,107,Jt(et)),et}finally{Y.act=Ee||null}}function te(){if(A){var ie=A;A=null,M&&M[Yo](),M=null;var ge=[];if(pt(ie,function(Ee){if(Ee&&(Ee[L]&&(pt(Ee[L],function(je){je.clr(Ee)}),Ee[L]=null),Ee.fn))try{z(Ee,Ee.fn)}catch(je){ge[Wr](je)}}),A)try{te()}catch(Ee){ge[Wr](Ee)}ge[mt]>0&&Iv("Watcher error(s): ",ge)}}function Q(ie){if(ie&&ie.h[mt]>0){A||(A=[]),M||(M=ll(function(){M=null,te()},0));for(var ge=0;ge<ie.h[mt];ge++){var Ee=ie.h[ge];Ee&&Oi(A,Ee)===-1&&A[Wr](Ee)}}}function ae(ie,ge){if(ie){var Ee=ie[L]=ie[L]||[];Oi(Ee,ge)===-1&&Ee[Wr](ge)}}return Y=(c={prop:m,ro:w,rf:I},c[zr]=O,c[md]=o,c.add=Q,c[Fo]=te,c.use=z,c.trk=ae,c),Y}function Wp(o,c){var m={fn:c,rm:function(){m.fn=null,o=null,c=null}};return ti(m,"toJSON",{v:function(){return"WatcherHandler"+(m.fn?"":"[X]")}}),o.use(m,c),m}function bh(o,c,m){var w,I=Hp(c);if(I)return I;var O=cu("dyncfg",!0),L=c&&m!==!1?c:Pv(c),A;function M(){A[Fo]()}function Y(je,et,it){try{je=Ll(A,je,et,it)}catch($t){Vp(o,et,"Setting value",$t)}return je[et]}function z(je){return Wp(A,je)}function te(je,et){A.use(null,function(it){var $t=A.upd;try{st(et)||(A.upd=et),je(it)}finally{A.upd=$t}})}function Q(je,et){var it;return Co(A,je,et,(it={},it[0]=!0,it))[et]}function ae(je,et){var it;return Co(A,je,et,(it={},it[1]=!0,it))[et]}function ie(je,et){var it;return Co(A,je,et,(it={},it[2]=!0,it))[et]}function ge(je,et){return et&&Fr(et,function(it,$t){kf(Ee,je,it,$t)}),je}var Ee=(w={uid:null,cfg:L},w[Qr]=o,w[Fo]=M,w.set=Y,w[Lu]=ge,w[eo]=z,w.ref=Q,w[vl]=ae,w[zr]=ie,w._block=te,w);return ti(Ee,"uid",{c:!1,e:!1,w:!1,v:O}),A=sg(Ee),kd(A,L,"config","Creating"),Ee}function ug(o,c){o?(o[Xs](c),o[bo](2,108,c)):Ac(c)}function Hi(o,c,m,w){var I=bh(m,o||{},w);return c&&I[Lu](I.cfg,c),I}function Pd(o,c,m){var w=o[Jo]||o;return w.cfg&&(w.cfg===o||w.cfg[Jo]===w)?w[eo](c):(ug(m,Pp+Jt(o)),Hi(o,null,m)[eo](c))}function Ld(o,c){if(o&&o[_s])return o[_s](c)}function Fv(o,c,m){var w;return m||(w=ga(function(I){m=I})),o&&Ks(o)>0?wf(Ld(o[0],c),function(){Fv(Ws(o,1),c,m)}):m(),w}var Pc=500,_a="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function xo(o){return{mrg:!0,v:o}}var Md=[km,Sf,Pm,Ef],Vu=null,Ml;function ks(o,c){return function(){var m=arguments,w=Uv(c);if(w){var I=w.listener;I&&I[o]&&I[o][Uo](I,m)}}}function Ym(){var o=gn("Microsoft");return o&&(Vu=o.ApplicationInsights),Vu}function Uv(o){var c=Vu;return!c&&o.disableDbgExt!==!0&&(c=Vu||Ym()),c?c.ChromeDbgExt:null}function ht(o){if(!Ml){Ml={};for(var c=0;c<Md[mt];c++)Ml[Md[c]]=ks(Md[c],o)}return Ml}var zu,fu="warnToConsole",Pf="AI (Internal): ",jv="AI: ",Fl="AITR_",Fd={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Ps=(zu={},zu[0]=null,zu[1]="errorToConsole",zu[2]=fu,zu[3]="debugToConsole",zu);function Yv(o){return o?'"'+o[Bi](/\"/g,wr)+'"':wr}function Kp(o,c){var m=Df();if(m){var w="log";m[o]&&(w=o),cr(m[w])&&m[w](c)}}var Lc=function(){function o(c,m,w,I){w===void 0&&(w=!1);var O=this;O[Fu]=c,O[ru]=(w?jv:Pf)+c;var L=wr;Rs()&&(L=Mi().stringify(I));var A=(m?" message:"+Yv(m):wr)+(I?" props:"+Yv(L):wr);O[ru]+=A}return o.dataType="MessageData",o}();function Ul(o,c){return(o||{})[Qr]||new jl(c)}var jl=function(){function o(c){this.identifier="DiagnosticLogger",this.queue=[];var m=0,w={},I,O,L,A,M;Xa(o,this,function(Y){M=te(c||{}),Y.consoleLoggingLevel=function(){return I},Y[bo]=function(ie,ge,Ee,je,et){et===void 0&&(et=!1);var it=new Lc(ge,Ee,et,je);if(A)throw Jt(it);var $t=Ps[ie]||fu;if(st(it[ru]))ae("throw"+(ie===1?"Critical":"Warning"),it);else{if(et){var Ir=+it[Fu];!w[Ir]&&I>=ie&&(Y[$t](it[ru]),w[Ir]=!0)}else I>=ie&&Y[$t](it[ru]);z(ie,it)}},Y.debugToConsole=function(ie){Kp("debug",ie),ae("warning",ie)},Y[Xs]=function(ie){Kp("warn",ie),ae("warning",ie)},Y.errorToConsole=function(ie){Kp("error",ie),ae("error",ie)},Y.resetInternalMessageCount=function(){m=0,w={}},Y[gd]=z,Y[_s]=function(ie){M&&M.rm(),M=null};function z(ie,ge){if(!Q()){var Ee=!0,je=Fl+ge[Fu];if(w[je]?Ee=!1:w[je]=!0,Ee&&(ie<=O&&(Y.queue[Wr](ge),m++,ae(ie===1?"error":"warn",ge)),m===L)){var et="Internal events throttle limit per PageView reached for this app.",it=new Lc(23,et,!1);Y.queue[Wr](it),ie===1?Y.errorToConsole(et):Y[Xs](et)}}}function te(ie){return Pd(Hi(ie,Fd,Y).cfg,function(ge){var Ee=ge.cfg;I=Ee[pc],O=Ee.loggingLevelTelemetry,L=Ee.maxMessageLimit,A=Ee.enableDebug})}function Q(){return m>=L}function ae(ie,ge){var Ee=Uv(c||{});Ee&&Ee[yl]&&Ee[yl](ie,ge)}})}return o.__ieDyn=1,o}();function $m(o){return o||new jl}function nn(o,c,m,w,I,O){O===void 0&&(O=!1),$m(o)[bo](c,m,w,I,O)}function Ls(o,c){$m(o)[Xs](c)}function Bm(o,c,m){$m(o)[gd](c,m)}var qm,du,Jp="toGMTString",Hm="toUTCString",Gm="cookie",Ud="expires",jd="isCookieUseDisabled",Mc="disableCookiesUsage",Yl="_ckMgr",Zp=null,Fc=null,Vm=null,Do,zm={},Yd={},$v=(qm={cookieCfg:xo((du={},du[Pi]={fb:"cookieDomain",dfVal:Lp},du.path={fb:"cookiePath",dfVal:Lp},du.enabled=yi,du.ignoreCookies=yi,du.blockedCookies=yi,du)),cookieDomain:yi,cookiePath:yi},qm[Mc]=yi,qm);function Ms(){!Do&&(Do=nd(function(){return fa()}))}function Sh(o,c){var m=Fs[Yl]||Yd[Yl];return m||(m=Fs[Yl]=Fs(o,c),Yd[Yl]=m),m}function Wu(o){return o?o.isEnabled():!0}function Wm(o,c){return c&&o&&mr(o.ignoreCookies)?Oi(o.ignoreCookies,c)!==-1:!1}function Uc(o,c){return c&&o&&mr(o.blockedCookies)&&Oi(o.blockedCookies,c)!==-1?!0:Wm(o,c)}function Bv(o,c){var m=c[eu];if(ot(m)){var w=void 0;st(o[jd])||(w=!o[jd]),st(o[Mc])||(w=!o[Mc]),m=w}return m}function Qo(o,c){var m;if(o)m=o.getCookieMgr();else if(c){var w=c.cookieCfg;w&&w[Yl]?m=w[Yl]:m=Fs(c)}return m||(m=Sh(c,(o||{})[Qr])),m}function Fs(o,c){var m,w,I,O,L,A,M,Y,z;o=Hi(o||Yd,null,c).cfg,L=Pd(o,function(Q){Q[Lu](Q.cfg,$v),w=Q.ref(Q.cfg,"cookieCfg"),I=w[Uu]||"/",O=w[Pi],A=Bv(o,w)!==!1,M=w.getCookie||dr,Y=w.setCookie||ao,z=w.delCookie||ao},c);var te=(m={isEnabled:function(){var Q=Bv(o,w)!==!1&&A&&Gn(c),ae=Yd[Yl];return Q&&ae&&te!==ae&&(Q=Wu(ae)),Q},setEnabled:function(Q){A=Q!==!1,w[eu]=Q},set:function(Q,ae,ie,ge,Ee){var je=!1;if(Wu(te)&&!Uc(w,Q)){var et={},it=Xi(ae||wr),$t=ho(it,";");if($t!==-1&&(it=Xi(Xr(ae,$t)),et=Lf(Zr(ae,$t+1))),io(et,Pi,ge||O,Pn,st),!ot(ie)){var Ir=$u();if(st(et[Ud])){var Si=Cu(),Sr=Si+ie*1e3;if(Sr>0){var Vi=new Date;Vi.setTime(Sr),io(et,Ud,jc(Vi,Ir?Jp:Hm)||jc(Vi,Ir?Jp:Hm)||wr,Pn)}}Ir||io(et,"max-age",wr+ie,null,st)}var ts=lu();ts&&ts[ys]==="https:"&&(io(et,"secure",null,null,st),Fc===null&&(Fc=!oo((Aa()||{})[Ip])),Fc&&io(et,"SameSite","None",null,st)),io(et,Uu,Ee||I,null,st),Y(Q,$d(it,et)),je=!0}return je},get:function(Q){var ae=wr;return Wu(te)&&!Wm(w,Q)&&(ae=M(Q)),ae},del:function(Q,ae){var ie=!1;return Wu(te)&&(ie=te.purge(Q,ae)),ie},purge:function(Q,ae){var ie,ge=!1;if(Gn(c)){var Ee=(ie={},ie[Uu]=ae||"/",ie[Ud]="Thu, 01 Jan 1970 00:00:01 GMT",ie);$u()||(Ee["max-age"]="0"),z(Q,$d(wr,Ee)),ge=!0}return ge}},m[_s]=function(Q){L&&L.rm(),L=null},m);return te[Yl]=te,te}function Gn(o){if(Zp===null){Zp=!1,!Do&&Ms();try{var c=Do.v||{};Zp=c[Gm]!==void 0}catch(m){nn(o,2,68,"Cannot access document.cookie - "+Is(m),{exception:Jt(m)})}}return Zp}function Lf(o){var c={};if(o&&o[mt]){var m=Xi(o)[Ua](";");pt(m,function(w){if(w=Xi(w||wr),w){var I=ho(w,"=");I===-1?c[w]=null:c[Xi(Xr(w,I))]=Xi(Zr(w,I+1))}})}return c}function jc(o,c){return cr(o[c])?o[c]():null}function $d(o,c){var m=o||wr;return Fr(c,function(w,I){m+="; "+w+(ot(I)?wr:"="+I)}),m}function dr(o){var c=wr;if(!Do&&Ms(),Do.v){var m=Do.v[Gm]||wr;Vm!==m&&(zm=Lf(m),Vm=m),c=Xi(zm[o]||wr)}return c}function ao(o,c){!Do&&Ms(),Do.v&&(Do.v[Gm]=o+"="+c)}function oo(o){return Kt(o)?!!(vt(o,"CPU iPhone OS 12")||vt(o,"iPad; CPU OS 12")||vt(o,"Macintosh; Intel Mac OS X 10_14")&&vt(o,"Version/")&&vt(o,"Safari")||vt(o,"Macintosh; Intel Mac OS X 10_14")&&ud(o,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||vt(o,"Chrome/5")||vt(o,"Chrome/6")||vt(o,"UnrealEngine")&&!vt(o,"Chrome")||vt(o,"UCBrowser/12")||vt(o,"UCBrowser/11")):!1}var Fi={perfEvtsSendAll:!1};function Yc(o){o.h=null;var c=o.cb;o.cb=[],pt(c,function(m){rt(m.fn,[m.arg])})}function En(o,c,m,w){pt(o,function(I){I&&I[c]&&(m?(m.cb[Wr]({fn:w,arg:I}),m.h=m.h||ll(Yc,0,m)):rt(w,[I]))})}var $c=function(){function o(c){this.listeners=[];var m,w,I=[],O={h:null,cb:[]},L=Hi(c,Fi);w=L[eo](function(A){m=!!A.cfg.perfEvtsSendAll}),Xa(o,this,function(A){ti(A,"listeners",{g:function(){return I}}),A[$i]=function(M){I[Wr](M)},A[gs]=function(M){for(var Y=Oi(I,M);Y>-1;)I[jo](Y,1),Y=Oi(I,M)},A[km]=function(M){En(I,km,O,function(Y){Y[km](M)})},A[Sf]=function(M,Y){En(I,Sf,O,function(z){z[Sf](M,Y)})},A[Pm]=function(M,Y){En(I,Pm,Y?O:null,function(z){z[Pm](M,Y)})},A[Ef]=function(M){M&&(m||!M[_d]())&&En(I,Ef,null,function(Y){M[ro]?ll(function(){return Y[Ef](M)},0):Y[Ef](M)})},A[wc]=function(M){M&&M[mt]&&En(I,wc,O,function(Y){Y[wc](M)})},A[kp]=function(M){M&&M[gf]&&En(I,kp,O,function(Y){Y[kp](M)})},A[di]=function(M,Y){if(M>0){var z=Y||0;En(I,di,O,function(te){te[di](M,z)})}},A[_s]=function(M){var Y=function(){w&&w.rm(),w=null,I=[],O.h&&O.h[Yo](),O.h=null,O.cb=[]},z;if(En(I,"unload",null,function(te){var Q=te[_s](M);Q&&(z||(z=[]),z[Wr](Q))}),z)return ga(function(te){return wf(Sd(z),function(){Y(),te()})});Y()}})}return o.__ieDyn=1,o}(),pu="ctx",Xp="ParentContextKey",mu="ChildrenContextKey",Km=null,Ku=function(){function o(c,m,w){var I=this;if(I.start=Cu(),I[Bo]=c,I[ro]=w,I[_d]=function(){return!1},cr(m)){var O;ti(I,"payload",{g:function(){return!O&&cr(m)&&(O=m(),m=null),O}})}I[Ho]=function(L){return L?L===o[Xp]||L===o[mu]?I[L]:(I[pu]||{})[L]:null},I[ha]=function(L,A){if(L)if(L===o[Xp])I[L]||(I[_d]=function(){return!0}),I[L]=A;else if(L===o[mu])I[L]=A;else{var M=I[pu]=I[pu]||{};M[L]=A}},I[vc]=function(){var L=0,A=I[Ho](o[mu]);if(mr(A))for(var M=0;M<A[mt];M++){var Y=A[M];Y&&(L+=Y[qo])}I[qo]=Cu()-I.start,I.exTime=I[qo]-L,I[vc]=function(){}}}return o.ParentContextKey="parent",o.ChildrenContextKey="childEvts",o}(),Jm=function(){function o(c){this.ctx={},Xa(o,this,function(m){m.create=function(w,I,O){return new Ku(w,I,O)},m.fire=function(w){w&&(w[vc](),c&&cr(c[Ef])&&c[Ef](w))},m[ha]=function(w,I){if(w){var O=m[pu]=m[pu]||{};O[w]=I}},m[Ho]=function(w){return(m[pu]||{})[w]}})}return o.__ieDyn=1,o}(),Zm="CoreUtils.doPerf";function d(o,c,m,w,I){if(o){var O=o;if(O[bc]&&(O=O[bc]()),O){var L=void 0,A=O[Ho](Zm);try{if(L=O.create(c(),w,I),L){if(A&&L[ha]&&(L[ha](Ku[Xp],A),A[Ho]&&A[ha])){var M=A[Ho](Ku[mu]);M||(M=[],A[ha](Ku[mu],M)),M[Wr](L)}return O[ha](Zm,L),m(L)}}catch(Y){L&&L[ha]&&L[ha]("exception",Y)}finally{L&&O.fire(L),O[ha](Zm,A)}}}return m()}function g(){return Km}function S(){var o=D();return Zr(o,0,8)+"-"+Zr(o,8,12)+"-"+Zr(o,12,16)+"-"+Zr(o,16,20)+"-"+Zr(o,20)}function D(){for(var o=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],c=wr,m,w=0;w<4;w++)m=Dc(),c+=o[m&15]+o[m>>4&15]+o[m>>8&15]+o[m>>12&15]+o[m>>16&15]+o[m>>20&15]+o[m>>24&15]+o[m>>28&15];var I=o[8+(Dc()&3)|0];return gi(c,0,8)+gi(c,9,4)+"4"+gi(c,13,3)+I+gi(c,16,3)+gi(c,19,12)}var j=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,J="00",X="ff",oe="00000000000000000000000000000000",ve="0000000000000000",ye=1;function Xe(o,c,m){return o&&o[mt]===c&&o!==m?!!o.match(/^[\da-f]*$/i):!1}function Mt(o,c,m){return Xe(o,c)?o:m}function sr(o){(isNaN(o)||o<0||o>255)&&(o=1);for(var c=o.toString(16);c[mt]<2;)c="0"+c;return c}function pr(o,c,m,w){var I;return I={},I[to]=Xe(w,2,X)?w:J,I[Cp]=ur(o)?o:D(),I[yf]=Yt(c)?c:Xr(D(),16),I.traceFlags=m>=0&&m<=255?m:1,I}function ft(o,c){var m;if(!o||(mr(o)&&(o=o[0]||""),!o||!Kt(o)||o[mt]>8192))return null;if(o.indexOf(",")!==-1){var w=o[Ua](",");o=w[c>0&&w[mt]>c?c:0]}var I=j.exec(Xi(o));return!I||I[1]===X||I[2]===oe||I[3]===ve?null:(m={version:(I[1]||wr)[ma](),traceId:(I[2]||wr)[ma](),spanId:(I[3]||wr)[ma]()},m[El]=parseInt(I[4],16),m)}function ur(o){return Xe(o,32,oe)}function Yt(o){return Xe(o,16,ve)}function Ar(o){return!(!o||!Xe(o[to],2,X)||!Xe(o[Cp],32,oe)||!Xe(o[yf],16,ve)||!Xe(sr(o[El]),2))}function kr(o){return Ar(o)?(o[El]&ye)===ye:!1}function At(o){if(o){var c=sr(o[El]);Xe(c,2)||(c="01");var m=o[to]||J;return m!=="00"&&m!=="ff"&&(m=J),"".concat(m.toLowerCase(),"-").concat(Mt(o.traceId,32,oe).toLowerCase(),"-").concat(Mt(o.spanId,16,ve).toLowerCase(),"-").concat(c.toLowerCase())}return""}function Mn(o){var c="traceparent",m=ft(yh(c),o);return m||(m=ft(Rd(c),o)),m}var Mf=Hu("plugin");function Fn(o){return Mf.get(o,"state",{},!0)}function so(o,c){for(var m=[],w=null,I=o[no](),O;I;){var L=I[$o]();if(L){w&&w[wl]&&L[To]&&w[wl](L),O=Fn(L);var A=!!O[ea];L[ea]&&(A=L[ea]()),A||m[Wr](L),w=L,I=I[no]()}}pt(m,function(M){var Y=o[Ln]();M[Zn](o.getCfg(),Y,c,o[no]()),O=Fn(M),!M[Ln]&&!O[Ln]&&(O[Ln]=Y),O[ea]=!0,delete O[Ai]})}function Bd(o){return o.sort(function(c,m){var w=0;if(m){var I=m[To];c[To]?w=I?c[bf]-m[bf]:1:I&&(w=-1)}else w=c?1:-1;return w})}function Xm(o){var c={};return{getName:function(){return c[Bo]},setName:function(m){o&&o.setName(m),c[Bo]=m},getTraceId:function(){return c[Cp]},setTraceId:function(m){o&&o.setTraceId(m),ur(m)&&(c[Cp]=m)},getSpanId:function(){return c[yf]},setSpanId:function(m){o&&o.setSpanId(m),Yt(m)&&(c[yf]=m)},getTraceFlags:function(){return c[El]},setTraceFlags:function(m){o&&o.setTraceFlags(m),c[El]=m}}}var qd="TelemetryPluginChain",Hd="_hasRun",Qp="_getTelCtx",qv=0;function Fe(o,c,m){for(;o;){if(o[$o]()===m)return o;o=o[no]()}return Tn([m],c.config||{},c)}function Nt(o,c,m,w){var I=null,O=[];c||(c=Hi({},null,m[Qr])),w!==null&&(I=w?Fe(o,m,w):o);var L={_next:M,ctx:{core:function(){return m},diagLog:function(){return Ul(m,c.cfg)},getCfg:function(){return c.cfg},getExtCfg:z,getConfig:te,hasNext:function(){return!!I},getNext:function(){return I},setNext:function(ae){I=ae},iterate:Q,onComplete:A}};function A(ae,ie){for(var ge=[],Ee=2;Ee<arguments.length;Ee++)ge[Ee-2]=arguments[Ee];ae&&O[Wr]({func:ae,self:st(ie)?L.ctx:ie,args:ge})}function M(){var ae=I;if(I=ae?ae[no]():null,!ae){var ie=O;ie&&ie[mt]>0&&(pt(ie,function(ge){try{ge.func.call(ge.self,ge.args)}catch(Ee){nn(m[Qr],2,73,"Unexpected Exception during onComplete - "+Jt(Ee))}}),O=[])}return ae}function Y(ae,ie){var ge=null,Ee=c.cfg;if(Ee&&ae){var je=Ee[Dl];!je&&ie&&(je={}),Ee[Dl]=je,je=c.ref(Ee,Dl),je&&(ge=je[ae],!ge&&ie&&(ge={}),je[ae]=ge,ge=c.ref(je,ae))}return ge}function z(ae,ie){var ge=Y(ae,!0);return ie&&Fr(ie,function(Ee,je){if(ot(ge[Ee])){var et=c.cfg[Ee];(et||!ot(et))&&(ge[Ee]=et)}kf(c,ge,Ee,je)}),c[Lu](ge,ie)}function te(ae,ie,ge){ge===void 0&&(ge=!1);var Ee,je=Y(ae,!1),et=c.cfg;return je&&(je[ie]||!ot(je[ie]))?Ee=je[ie]:(et[ie]||!ot(et[ie]))&&(Ee=et[ie]),Ee||!ot(Ee)?Ee:ge}function Q(ae){for(var ie;ie=L._next();){var ge=ie[$o]();ge&&ae(ge)}}return L}function Gt(o,c,m,w){var I=Hi(c),O=Nt(o,I,m,w),L=O.ctx;function A(Y){var z=O._next();return z&&z[To](Y,L),!z}function M(Y,z){return Y===void 0&&(Y=null),mr(Y)&&(Y=Tn(Y,I.cfg,m,z)),Gt(Y||L[no](),I.cfg,m,z)}return L[ni]=A,L[Mu]=M,L}function tn(o,c,m){var w=Hi(c.config),I=Nt(o,w,c,m),O=I.ctx;function L(M){var Y=I._next();return Y&&Y[_s](O,M),!Y}function A(M,Y){return M===void 0&&(M=null),mr(M)&&(M=Tn(M,w.cfg,c,Y)),tn(M||O[no](),c,Y)}return O[ni]=L,O[Mu]=A,O}function _n(o,c,m){var w=Hi(c.config),I=Nt(o,w,c,m),O=I.ctx;function L(M){return O.iterate(function(Y){cr(Y[_i])&&Y[_i](O,M)})}function A(M,Y){return M===void 0&&(M=null),mr(M)&&(M=Tn(M,w.cfg,c,Y)),_n(M||O[no](),c,Y)}return O[ni]=L,O[Mu]=A,O}function Tn(o,c,m,w){var I=null,O=!w;if(mr(o)&&o[mt]>0){var L=null;pt(o,function(A){if(!O&&w===A&&(O=!0),O&&A&&cr(A[To])){var M=wi(A,c,m);I||(I=M),L&&L._setNext(M),L=M}})}return w&&!I?Tn([w],c,m):I}function wi(o,c,m){var w=null,I=cr(o[To]),O=cr(o[wl]),L;o?L=o[So]+"-"+o[bf]+"-"+qv++:L="Unknown-0-"+qv++;var A={getPlugin:function(){return o},getNext:function(){return w},processTelemetry:z,unload:te,update:Q,_id:L,_setNext:function(ae){w=ae}};function M(){var ae;return o&&cr(o[Qp])&&(ae=o[Qp]()),ae||(ae=Gt(A,c,m)),ae}function Y(ae,ie,ge,Ee,je){var et=!1,it=o?o[So]:qd,$t=ae[Hd];return $t||($t=ae[Hd]={}),ae.setNext(w),o&&d(ae[Ln](),function(){return it+":"+ge},function(){$t[L]=!0;try{var Ir=w?w._id:wr;Ir&&($t[Ir]=!1),et=ie(ae)}catch(Sr){var Si=w?$t[w._id]:!0;Si&&(et=!0),(!w||!Si)&&nn(ae[yl](),1,73,"Plugin ["+it+"] failed during "+ge+" - "+Jt(Sr)+", run flags: "+Jt($t))}},Ee,je),et}function z(ae,ie){ie=ie||M();function ge(Ee){if(!o||!I)return!1;var je=Fn(o);return je[Ai]||je[xl]?!1:(O&&o[wl](w),o[To](ae,Ee),!0)}Y(ie,ge,"processTelemetry",function(){return{item:ae}},!ae.sync)||ie[ni](ae)}function te(ae,ie){function ge(){var Ee=!1;if(o){var je=Fn(o),et=o[Ln]||je[Ln];o&&(!et||et===ae.core())&&!je[Ai]&&(je[Ln]=null,je[Ai]=!0,je[ea]=!1,o[Ai]&&o[Ai](ae,ie)===!0&&(Ee=!0))}return Ee}Y(ae,ge,"unload",function(){},ie[ro])||ae[ni](ie)}function Q(ae,ie){function ge(){var Ee=!1;if(o){var je=Fn(o),et=o[Ln]||je[Ln];o&&(!et||et===ae.core())&&!je[Ai]&&o[_i]&&o[_i](ae,ie)===!0&&(Ee=!0)}return Ee}Y(ae,ge,"update",function(){},!1)||ae[ni](ie)}return Di(A)}var Ju=function(){function o(c,m,w,I){var O=this,L=Gt(c,m,w,I);Ec(O,L,Ji(L))}return o}();function Us(){var o=[];function c(w){w&&o[Wr](w)}function m(w,I){pt(o,function(O){try{O(w,I)}catch(L){nn(w[yl](),2,73,"Unexpected error calling unload handler - "+Jt(L))}}),o=[]}return{add:c,run:m}}var Zu,Bc;function Hv(o,c){Zu=o,Bc=c}function em(){var o=[];function c(w){var I=o;o=[],pt(I,function(O){try{(O.rm||O.remove).call(O)}catch(L){nn(w,2,73,"Unloading:"+Jt(L))}}),Zu&&I[mt]>Zu&&(Bc?Bc("doUnload",I):nn(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))}function m(w){w&&(za(o,w),Zu&&o[mt]>Zu&&(Bc?Bc("Add",o):nn(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}return{run:c,add:m}}var Ff,$l="getPlugin",Y_=(Ff={},Ff[Dl]={isVal:Lp,v:{}},Ff),lg=function(){function o(){var c=this,m,w,I,O,L;Y(),Xa(o,c,function(z){z[Zn]=function(te,Q,ae,ie){M(te,Q,ie),m=!0},z[Ai]=function(te,Q){var ae,ie=z[Ln];if(!ie||te&&ie!==te[Ln]())return;var ge,Ee=!1,je=te||tn(null,ie,I&&I[$l]?I[$l]():I),et=Q||(ae={reason:0},ae[ro]=!1,ae);function it(){Ee||(Ee=!0,O.run(je,Q),L.run(je[yl]()),ge===!0&&je[ni](et),Y())}return!z[Sn]||z[Sn](je,et,it)!==!0?it():ge=!0,ge},z[_i]=function(te,Q){var ae=z[Ln];if(!ae||te&&ae!==te[Ln]())return;var ie,ge=!1,Ee=te||_n(null,ae,I&&I[$l]?I[$l]():I),je=Q||{reason:0};function et(){ge||(ge=!0,M(Ee.getCfg(),Ee.core(),Ee[no]()))}return!z._doUpdate||z._doUpdate(Ee,je,et)!==!0?et():ie=!0,ie},Io(z,"_addUnloadCb",function(){return O},"add"),Io(z,"_addHook",function(){return L},"add"),ti(z,"_unloadHooks",{g:function(){return L}})}),c[yl]=function(z){return A(z)[yl]()},c[ea]=function(){return m},c.setInitialized=function(z){m=z},c[wl]=function(z){I=z},c[ni]=function(z,te){te?te[ni](z):I&&cr(I[To])&&I[To](z,null)},c._getTelCtx=A;function A(z){z===void 0&&(z=null);var te=z;if(!te){var Q=w||Gt(null,{},c[Ln]);I&&I[$l]?te=Q[Mu](null,I[$l]):te=Q[Mu](null,I)}return te}function M(z,te,Q){Hi(z,Y_,Ul(te)),!Q&&te&&(Q=te[hd]()[no]());var ae=I;I&&I[$l]&&(ae=I[$l]()),c[Ln]=te,w=Gt(Q,z,te,ae)}function Y(){m=!1,c[Ln]=null,w=null,I=null,L=em(),O=Us()}}return o.__ieDyn=1,o}();function Zg(o,c,m){var w={id:c,fn:m};za(o,w);var I={remove:function(){pt(o,function(O,L){if(O.id===w.id)return o[jo](L,1),-1})}};return I}function Eh(o,c,m){for(var w=!1,I=o[mt],O=0;O<I;++O){var L=o[O];if(L)try{if(L.fn[Uo](null,[c])===!1){w=!0;break}}catch(A){nn(m,2,64,"Telemetry initializer failed: "+Is(A),{exception:Jt(A)},!0)}}return!w}var $_=function(o){cl(c,o);function c(){var m=o.call(this)||this;m.identifier="TelemetryInitializerPlugin",m.priority=199;var w,I;O(),Xa(c,m,function(L,A){L.addTelemetryInitializer=function(M){return Zg(I,w++,M)},L[To]=function(M,Y){Eh(I,M,Y?Y[yl]():L[yl]())&&L[ni](M,Y)},L[Sn]=function(){O()}});function O(){w=0,I=[]}return m}return c.__ieDyn=1,c}(lg),Uf,Qm="Plugins must provide initialize method",Gv="_notificationManager",jf="SDK is still unloading...",ev="SDK is not initialized",cg=100,Xg=5e4,Gd=xa((Uf={cookieCfg:{}},Uf[ou]={rdOnly:!0,ref:!0,v:[]},Uf[au]={rdOnly:!0,ref:!0,v:[]},Uf[Dl]={ref:!0,v:{}},Uf[Es]=yi,Uf.loggingLevelConsole=0,Uf.diagnosticLogInterval=yi,Uf));function Qg(o,c){return new Jm(c)}function B_(o,c,m){var w,I=[],O=[],L={};return pt(m,function(A){(ot(A)||ot(A[Zn]))&&ji(Qm);var M=A[bf],Y=A[So];A&&M&&(ot(L[M])?L[M]=Y:Ls(o,"Two extensions have same priority #"+M+" - "+L[M]+", "+Y)),!M||M<c?I[Wr](A):O[Wr](A)}),w={},w[Ln]=I,w[au]=O,w}function fg(o,c){var m=!1;return pt(c,function(w){if(w===o)return m=!0,-1}),m}function Vv(o,c,m,w){m&&Fr(m,function(I,O){w&&La(O)&&La(c[I])&&Vv(o,c[I],O,w),w&&La(O)&&La(c[I])?Vv(o,c[I],O,w):o.set(c,I,O)})}function dg(o,c){var m=null,w=-1;return pt(o,function(I,O){if(I.w===c)return m=I,w=O,-1}),{i:w,l:m}}function Th(o,c){var m=dg(o,c).l;return m||(m={w:c,rm:function(){var w=dg(o,c);w.i!==-1&&o[jo](w.i,1)}},o[Wr](m)),m}function tv(o,c,m){pt(c,function(w){var I=Pd(o,w.w,m);delete w.w,w.rm=function(){I.rm()}})}function Vd(o,c,m,w){return c.add(o[eo](function(I){var O=I.cfg.disableDbgExt;O===!0&&w&&(m[gs](w),w=null),m&&!w&&O!==!0&&(w=ht(I.cfg),m[$i](w))})),w}function pg(o){return ti({rm:function(){o.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(o)+">"}})}var zv=function(){function o(){var c,m,w,I,O,L,A,M,Y,z,te,Q,ae,ie,ge,Ee,je,et,it,$t,Ir,Si,Sr,Vi,ts,rs,Vl,ba,zf,Ve,kt,Vn;Xa(o,this,function(Se){Ur(),Se._getDbgPlgTargets=function(){return[Sr,I]},Se[ea]=function(){return m},Se.activeStatus=function(){return rs},Se._setPendingStatus=function(){rs=3},Se[Zn]=function(Ce,ut,Ut,Pt){ae&&ji(jf),Se[ea]()&&ji("Core cannot be initialized more than once"),c=Hi(Ce,Gd,Ut||Se[Qr],!1),Ce=c.cfg,ns(c[eo](function(Yn){var Ei=Yn.cfg,ja=rs===3;if(!ja){ba=Ei.initInMemoMaxSize||cg;var lo=Ei[dc],Kf=Ei.endpointUrl;if(ot(lo)){Ir=null,rs=bn[hl];var Dh="Please provide instrumentation key";m?(nn(w,1,100,Dh),zn()):ji(Dh);return}var Rh=[];if(Mr(lo)?(Rh[Wr](lo),Ir=null):Ir=lo,Mr(Kf)?(Rh[Wr](Kf),Vl=null):Vl=Kf,Rh[mt]){zf=!1,rs=3;var H_=Lp(Ei.initTimeOut)?Ei.initTimeOut:Xg,Ay=yc(Rh);ll(function(){zf||lr()},H_),wf(Ay,function(_g){try{if(zf)return;if(!_g.rejected){var Vc=_g[vd];if(Vc&&Vc[mt]){var G_=Vc[0];if(Ir=G_&&G_[vd],Vc[mt]>1){var V_=Vc[1];Vl=V_&&V_[vd]}}Ir&&(Ce[dc]=Ir,Ce.endpointUrl=Vl)}lr()}catch{zf||lr()}})}else lr();var t_=Yn.ref(Yn.cfg,Dl);Fr(t_,function(_g){Yn.ref(t_,_g)})}})),O=Pt,it=Vd(c,et,O&&Se[Qs](),it),sm(),Se[Qr]=Ut;var ar=Ce[ou];if(z=[],z[Wr].apply(z,_o(_o([],ut,!1),ar)),te=Ce[au],pi(null),(!Q||Q[mt]===0)&&ji("No "+au+" available"),te&&te[mt]>1){var $r=Se[$o]("TeeChannelController");(!$r||!$r.plugin)&&nn(w,1,28,"TeeChannel required")}tv(Ce,Si,w),Si=null,m=!0,rs===bn.ACTIVE&&zn()},Se.getChannels=function(){var Ce=[];return Q&&pt(Q,function(ut){Ce[Wr](ut)}),Di(Ce)},Se.track=function(Ce){d(Se[bc](),function(){return"AppInsightsCore:track"},function(){Ce===null&&(mi(Ce),ji("Invalid telemetry item")),!Ce[Bo]&&ot(Ce[Bo])&&(mi(Ce),ji("telemetry name required")),Ce[gl]=Ce[gl]||Ir,Ce[qo]=Ce[qo]||Ts(new Date),Ce.ver=Ce.ver||"4.0",!ae&&Se[ea]()&&rs===bn.ACTIVE?ra()[ni](Ce):rs!==bn[hl]&&I[mt]<=ba&&I[Wr](Ce)},function(){return{item:Ce}},!Ce.sync)},Se[hd]=ra,Se[Qs]=function(){return O||(O=new $c(c.cfg),Se[Gv]=O),O},Se[$i]=function(Ce){Se.getNotifyMgr()[$i](Ce)},Se[gs]=function(Ce){O&&O[gs](Ce)},Se.getCookieMgr=function(){return M||(M=Fs(c.cfg,Se[Qr])),M},Se.setCookieMgr=function(Ce){M!==Ce&&(Ld(M,!1),M=Ce)},Se[bc]=function(){return L||A||g()},Se.setPerfMgr=function(Ce){L=Ce},Se.eventCnt=function(){return I[mt]},Se.releaseQueue=function(){if(m&&I[mt]>0){var Ce=I;I=[],rs===2?pt(Ce,function(ut){ut[gl]=ut[gl]||Ir,ra()[ni](ut)}):nn(w,2,20,"core init status is not active")}},Se[_l]=function(Ce){return ge=Ce||null,Vn=!1,Ve&&Ve[Yo](),zi(!0)};function lr(){zf=!0,ot(Ir)?(rs=bn[hl],nn(w,1,112,"ikey can't be resolved from promises")):rs=bn.ACTIVE,zn()}function zn(){m&&(Se.releaseQueue(),Se[_l]())}function zi(Ce){if((!Ve||!Ve[eu])&&!Vn){var ut=Ce||w&&w.queue[mt]>0;ut&&(kt||(kt=!0,ns(c[eo](function(Ut){var Pt=Ut.cfg.diagnosticLogInterval;(!Pt||!(Pt>0))&&(Pt=1e4);var ar=!1;Ve&&(ar=Ve[eu],Ve[Yo]()),Ve=cd(om,Pt),Ve.unref(),Ve[eu]=ar}))),Ve[eu]=!0)}return Ve}Se[Fa]=function(){Vn=!0,Ve&&Ve[Yo](),om()},Ec(Se,function(){return ie},["addTelemetryInitializer"]),Se[_s]=function(Ce,ut,Ut){var Pt;Ce===void 0&&(Ce=!0),m||ji(ev),ae&&ji(jf);var ar=(Pt={reason:50},Pt[ro]=Ce,Pt.flushComplete=!1,Pt),$r;Ce&&!ut&&($r=ga(function(ja){ut=ja}));var Yn=tn(ep(),Se);Yn[tu](function(){et.run(Se[Qr]),Fv([M,O,w],Ce,function(){Ur(),ut&&ut(ar)})},Se);function Ei(ja){ar.flushComplete=ja,ae=!0,je.run(Yn,ar),Se[Fa](),Yn[ni](ar)}return om(),Wf(Ce,Ei,6,Ut),$r},Se[$o]=na,Se.addPlugin=function(Ce,ut,Ut,Pt){if(!Ce){Pt&&Pt(!1),av(Qm);return}var ar=na(Ce[So]);if(ar&&!ut){Pt&&Pt(!1),av("Plugin ["+Ce[So]+"] is already loaded!");return}var $r={reason:16};function Yn(lo){z[Wr](Ce),$r.added=[Ce],pi($r),Pt&&Pt(!0)}if(ar){var Ei=[ar.plugin],ja={reason:2,isAsync:!!Ut};Sa(Ei,ja,function(lo){lo?($r.removed=Ei,$r.reason|=32,Yn()):Pt&&Pt(!1)})}else Yn()},Se.updateCfg=function(Ce,ut){ut===void 0&&(ut=!0);var Ut;if(Se[ea]()){Ut={reason:1,cfg:c.cfg,oldCfg:wp({},c.cfg),newConfig:wp({},Ce),merge:ut},Ce=Ut.newConfig;var Pt=c.cfg;Ce[ou]=Pt[ou],Ce[au]=Pt[au]}c._block(function(ar){var $r=ar.cfg;Vv(ar,$r,Ce,ut),ut||Fr($r,function(Yn){Na(Ce,Yn)||ar.set($r,Yn,yi)}),ar[Lu]($r,Gd)},!0),c[Fo](),Ut&&um(Ut)},Se.evtNamespace=function(){return Ee},Se.flush=Wf,Se.getTraceCtx=function(Ce){return $t||($t=Xm()),$t},Se.setTraceCtx=function(Ce){$t=Ce||null},Se.addUnloadHook=ns,Io(Se,"addUnloadCb",function(){return je},"add"),Se.onCfgChange=function(Ce){var ut;return m?ut=Pd(c.cfg,Ce,Se[Qr]):ut=Th(Si,Ce),pg(ut)},Se.getWParam=function(){return rf()||c.cfg.enableWParam?0:-1};function uo(){var Ce={};Vi=[];var ut=function(Ut){Ut&&pt(Ut,function(Pt){if(Pt[So]&&Pt[to]&&!Ce[Pt.identifier]){var ar=Pt[So]+"="+Pt[to];Vi[Wr](ar),Ce[Pt.identifier]=Pt}})};ut(Q),te&&pt(te,function(Ut){ut(Ut)}),ut(z)}function Ur(){m=!1,c=Hi({},Gd,Se[Qr]),c.cfg[pc]=1,ti(Se,"config",{g:function(){return c.cfg},s:function(ut){Se.updateCfg(ut,!1)}}),ti(Se,"pluginVersionStringArr",{g:function(){return Vi||uo(),Vi}}),ti(Se,"pluginVersionString",{g:function(){return ts||(Vi||uo(),ts=Vi.join(";")),ts||wr}}),ti(Se,"logger",{g:function(){return w||(w=new jl(c.cfg),c[Qr]=w),w},s:function(ut){c[Qr]=ut,w!==ut&&(Ld(w,!1),w=ut)}}),Se[Qr]=new jl(c.cfg),Sr=[];var Ce=Se.config[ou]||[];Ce.splice(0,Ce[mt]),za(Ce,Sr),ie=new $_,I=[],Ld(O,!1),O=null,L=null,A=null,Ld(M,!1),M=null,Y=null,z=[],te=null,Q=null,ae=!1,ge=null,Ee=cu("AIBaseCore",!0),je=Us(),$t=null,Ir=null,et=em(),Si=[],ts=null,Vi=null,Vn=!1,Ve=null,kt=!1,rs=0,Vl=null,ba=null,zf=!1}function ra(){var Ce=Gt(ep(),c.cfg,Se);return Ce[tu](zi),Ce}function pi(Ce){var ut=B_(Se[Qr],Pc,z);Y=null,ts=null,Vi=null,Q=(te||[])[0]||[],Q=Bd(za(Q,ut[au]));var Ut=za(Bd(ut[Ln]),Q);Sr=Di(Ut);var Pt=Se.config[ou]||[];Pt.splice(0,Pt[mt]),za(Pt,Sr);var ar=ra();Q&&Q[mt]>0&&so(ar[Mu](Q),Ut),so(ar,Ut),Ce&&um(Ce)}function na(Ce){var ut=null,Ut=null,Pt=[];return pt(Sr,function(ar){if(ar[So]===Ce&&ar!==ie)return Ut=ar,-1;ar.getChannel&&Pt[Wr](ar)}),!Ut&&Pt[mt]>0&&pt(Pt,function(ar){if(Ut=ar.getChannel(Ce),!Ut)return-1}),Ut&&(ut={plugin:Ut,setEnabled:function(ar){Fn(Ut)[xl]=!ar},isEnabled:function(){var ar=Fn(Ut);return!ar[Ai]&&!ar[xl]},remove:function(ar,$r){var Yn;ar===void 0&&(ar=!0);var Ei=[Ut],ja=(Yn={reason:1},Yn[ro]=ar,Yn);Sa(Ei,ja,function(lo){lo&&pi({reason:32,removed:Ei}),$r&&$r(lo)})}}),ut}function ep(){if(!Y){var Ce=(Sr||[]).slice();Oi(Ce,ie)===-1&&Ce[Wr](ie),Y=Tn(Bd(Ce),c.cfg,Se)}return Y}function Sa(Ce,ut,Ut){if(Ce&&Ce[mt]>0){var Pt=Tn(Ce,c.cfg,Se),ar=tn(Pt,Se);ar[tu](function(){var $r=!1,Yn=[];pt(z,function(ja,lo){fg(ja,Ce)?$r=!0:Yn[Wr](ja)}),z=Yn,ts=null,Vi=null;var Ei=[];te&&(pt(te,function(ja,lo){var Kf=[];pt(ja,function(Dh){fg(Dh,Ce)?$r=!0:Kf[Wr](Dh)}),Ei[Wr](Kf)}),te=Ei),Ut&&Ut($r),zi()}),ar[ni](ut)}else Ut(!1)}function om(){if(w&&w.queue){var Ce=w.queue.slice(0);w.queue[mt]=0,pt(Ce,function(ut){var Ut,Pt=(Ut={},Ut[Bo]=ge||"InternalMessageId: "+ut[Fu],Ut[gl]=Ir,Ut[qo]=Ts(new Date),Ut.baseType=Lc.dataType,Ut.baseData={message:ut[ru]},Ut);Se.track(Pt)})}}function Wf(Ce,ut,Ut,Pt){var ar=1,$r=!1,Yn=null;Pt=Pt||5e3;function Ei(){ar--,$r&&ar===0&&(Yn&&Yn[Yo](),Yn=null,ut&&ut($r),ut=null)}if(Q&&Q[mt]>0){var ja=ra()[Mu](Q);ja.iterate(function(lo){if(lo.flush){ar++;var Kf=!1;lo.flush(Ce,function(){Kf=!0,Ei()},Ut)||Kf||(Ce&&Yn==null?Yn=ll(function(){Yn=null,Ei()},Pt):Ei())}})}return $r=!0,Ei(),!0}function sm(){var Ce;ns(c[eo](function(ut){var Ut=ut.cfg.enablePerfMgr;if(Ut){var Pt=ut.cfg[Es];(Ce!==Pt||!Ce)&&(Pt||(Pt=Qg),Tf(ut.cfg,Es,Pt),Ce=Pt,A=null),!L&&!A&&cr(Pt)&&(A=Pt(Se,Se[Qs]()))}else A=null,Ce=null}))}function um(Ce){var ut=_n(ep(),Se);ut[tu](zi),(!Se._updateHook||Se._updateHook(ut,Ce)!==!0)&&ut[ni](Ce)}function av(Ce){var ut=Se[Qr];ut?(nn(ut,2,73,Ce),zi()):ji(Ce)}function mi(Ce){var ut=Se[Qs]();ut&&ut[Sf]([Ce],2)}function ns(Ce){et.add(Ce)}})}return o.__ieDyn=1,o}();function jr(o,c){try{if(o&&o!==""){var m=Mi().parse(o);if(m&&m[Tv]&&m[Tv]>=m.itemsAccepted&&m.itemsReceived-m.itemsAccepted===m.errors[mt])return m}}catch(w){nn(c,1,43,"Cannot parse the response. "+(w[Bo]||Jt(w)),{response:o})}return null}var vu="",zd="NoResponseBody",rv="&"+zd+"=true",nv="POST",Wv=function(){function o(){var c=0,m,w,I,O,L,A,M,Y,z,te,Q,ae,ie,ge;Xa(o,this,function(Ee,je){var et=!0;zf(),Ee[Zn]=function(Ve,kt){I=kt,w&&nn(I,1,28,"Sender is already initialized"),Ee.SetConfig(Ve),w=!0},Ee._getDbgPlgTargets=function(){return[w,O,A,m]},Ee.SetConfig=function(Ve){try{if(L=Ve.senderOnCompleteCallBack||{},A=!!Ve.disableCredentials,M=Ve.fetchCredentials,O=!!Ve.isOneDs,m=!!Ve.enableSendPromise,z=!!Ve.disableXhr,te=!!Ve.disableBeacon,Q=!!Ve.disableBeaconSync,ge=Ve.timeWrapper,ie=!!Ve.addNoResponse,ae=!!Ve.disableFetchKeepAlive,Y={sendPOST:rs},O||(et=!1),A){var kt=lu();kt&&kt.protocol&&kt.protocol[ma]()==="file:"&&(et=!1)}return!0}catch{}return!1},Ee.getSyncFetchPayload=function(){return c},Ee.getSenderInst=function(Ve,kt){return Ve&&Ve[mt]?Si(Ve,kt):null},Ee.getFallbackInst=function(){return Y},Ee[Sn]=function(Ve,kt){zf()};function it(Ve,kt){Sr(kt,200,{},Ve)}function $t(Ve,kt){nn(I,2,26,"Failed to send telemetry.",{message:Ve}),Sr(kt,400,{})}function Ir(Ve){$t("No endpoint url is provided for the batch",Ve)}function Si(Ve,kt){for(var Vn,Se=0,lr=null,zn=0;lr==null&&zn<Ve[mt];)Se=Ve[zn],!z&&Se===1?Cc()?lr=ba:Rf()&&(lr=rs):Se===2&&Dv(kt)&&(!kt||!ae)?lr=Vl:Se===3&&Mm()&&(kt?!Q:!te)&&(lr=ts),zn++;return lr?(Vn={_transport:Se,_isSync:kt},Vn[Sl]=lr,Vn):null}function Sr(Ve,kt,Vn,Se){try{Ve&&Ve(kt,Vn,Se)}catch{}}function Vi(Ve,kt){var Vn=Aa(),Se=Ve[bl];if(!Se)return Ir(kt),!0;Se=Ve[bl]+(ie?rv:vu);var lr=Ve[gf],zn=O?lr:new Blob([lr],{type:"text/plain;charset=UTF-8"}),zi=Vn.sendBeacon(Se,zn);return zi}function ts(Ve,kt,Vn){var Se=Ve[gf];try{if(Se)if(Vi(Ve,kt))it(vu,kt);else{var lr=L&&L.beaconOnRetry;lr&&cr(lr)?lr(Ve,kt,Vi):(Y&&Y[Sl](Ve,kt,!0),nn(I,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(zn){O&&Ls(I,"Failed to send telemetry using sendBeacon API. Ex:"+Jt(zn)),Sr(kt,O?0:400,{},vu)}}function rs(Ve,kt,Vn){var Se,lr,zn,zi=Ve[Ss]||{};!Vn&&m&&(Se=ga(function(pi,na){lr=pi,zn=na})),O&&Vn&&Ve.disableXhrSync&&(Vn=!1);var uo=Ve[bl];if(!uo){Ir(kt),lr&&lr(!1);return}var Ur=Up(nv,uo,et,!0,Vn,Ve[_f]);O||Ur[gh]("Content-type","application/json"),pt(Ji(zi),function(pi){Ur[gh](pi,zi[pi])}),Ur.onreadystatechange=function(){O||(ra(Ur),Ur.readyState===4&&lr&&lr(!0))},Ur.onload=function(){O&&ra(Ur)};function ra(pi){var na=L&&L.xhrOnComplete,ep=na&&cr(na);if(ep)na(pi,kt,Ve);else{var Sa=uu(pi);Sr(kt,pi[bs],Vo(pi,O),Sa)}}return Ur.onerror=function(pi){Sr(kt,O?Ur[bs]:400,Vo(Ur,O),O?vu:Tc(Ur)),zn&&zn(pi)},Ur.ontimeout=function(){Sr(kt,O?Ur[bs]:500,Vo(Ur,O),O?vu:Tc(Ur)),lr&&lr(!1)},Ur.send(Ve[gf]),Se}function Vl(Ve,kt,Vn){var Se,lr=Ve[bl],zn=Ve[gf],zi=O?zn:new Blob([zn],{type:"application/json"}),uo,Ur,ra,pi=new Headers,na=zn[mt],ep=!1,Sa=!1,om=Ve[Ss]||{},Wf=(Se={method:nv,body:zi},Se[_a]=!0,Se);Ve.headers&&Ji(Ve.headers)[mt]>0&&(pt(Ji(om),function(mi){pi.append(mi,om[mi])}),Wf[Ss]=pi),M?Wf.credentials=M:et&&O&&(Wf.credentials="include"),Vn&&(Wf.keepalive=!0,c+=na,O?Ve._sendReason===2&&(ep=!0,ie&&(lr+=rv)):ep=!0);var sm=new Request(lr,Wf);try{sm[_a]=!0}catch{}if(!Vn&&m&&(uo=ga(function(mi,ns){Ur=mi,ra=ns})),!lr){Ir(kt),Ur&&Ur(!1);return}function um(mi){Sr(kt,O?0:400,{},O?vu:mi)}function av(mi,ns,Ce){var ut=mi[bs],Ut=L.fetchOnComplete;Ut&&cr(Ut)?Ut(mi,kt,Ce||vu,ns):Sr(kt,ut,{},Ce||vu)}try{wf(fetch(O?lr:sm,O?Wf:null),function(mi){if(Vn&&(c-=na,na=0),!Sa)if(Sa=!0,mi.rejected)um(mi.reason&&mi.reason[ru]),ra&&ra(mi.reason);else{var ns=mi[vd];try{!O&&!ns.ok?(um(ns.statusText),Ur&&Ur(!1)):O&&!ns.body?(av(ns,null,vu),Ur&&Ur(!0)):wf(ns.text(),function(Ce){av(ns,Ve,Ce[vd]),Ur&&Ur(!0)})}catch(Ce){um(Jt(Ce)),ra&&ra(Ce)}}})}catch(mi){Sa||(um(Jt(mi)),ra&&ra(mi))}return ep&&!Sa&&(Sa=!0,Sr(kt,200,{}),Ur&&Ur(!0)),O&&!Sa&&Ve[_f]>0&&ge&&ge.set(function(){Sa||(Sa=!0,Sr(kt,500,{}),Ur&&Ur(!0))},Ve[_f]),uo}function ba(Ve,kt,Vn){var Se=fi(),lr=new XDomainRequest,zn=Ve[gf];lr.onload=function(){var pi=uu(lr),na=L&&L.xdrOnComplete;na&&cr(na)?na(lr,kt,Ve):Sr(kt,200,{},pi)},lr.onerror=function(){Sr(kt,400,{},O?vu:If(lr))},lr.ontimeout=function(){Sr(kt,500,{})},lr.onprogress=function(){};var zi=Se&&Se.location&&Se.location[ys]||"",uo=Ve[bl];if(!uo){Ir(kt);return}if(!O&&uo.lastIndexOf(zi,0)!==0){var Ur="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";nn(I,2,40,". "+Ur),$t(Ur,kt);return}var ra=O?uo:uo[Bi](/^(https?:)/,"");lr.open(nv,ra),Ve[_f]&&(lr[_f]=Ve[_f]),lr.send(zn),O&&Vn?ge&&ge.set(function(){lr.send(zn)},0):lr.send(zn)}function zf(){c=0,w=!1,m=!1,I=null,O=null,L=null,A=null,M=null,Y=null,z=!1,te=!1,Q=!1,ae=!1,ie=!1,ge=null}})}return o.__ieDyn=1,o}(),Yf="on",tm="attachEvent",e_="addEventListener",rm="detachEvent",qc="removeEventListener",Hc="events",Gc="visibilitychange",Bl="pagehide",ql="pageshow",Xu="unload",$f="beforeunload",hu=cu("aiEvtPageHide"),Bf=cu("aiEvtPageShow"),Wd=/\.[\.]+/g,mg=/[\.]+$/,Ih=1,qf=Hu("events"),Hf=/^([^.]*)(?:\.(.+)|)/;function Kd(o){return o&&o[Bi]?o[Bi](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,wr):o}function nm(o,c){var m;if(c){var w=wr;mr(c)?(w=wr,pt(c,function(O){O=Kd(O),O&&(O[0]!=="."&&(O="."+O),w+=O)})):w=Kd(c),w&&(w[0]!=="."&&(w="."+w),o=(o||wr)+w)}var I=Hf.exec(o||wr)||[];return m={},m[va]=I[1],m.ns=(I[2]||wr).replace(Wd,".").replace(mg,wr)[Ua](".").sort().join("."),m}function Nh(o,c,m){var w=[],I=qf.get(o,Hc,{},!1),O=nm(c,m);return Fr(I,function(L,A){pt(A,function(M){var Y;(!O[va]||O[va]===M.evtName[va])&&(!O.ns||O.ns===O.ns)&&w[Wr]((Y={},Y[Bo]=M.evtName[va]+(M.evtName.ns?"."+M.evtName.ns:wr),Y.handler=M[ws],Y))})}),w}function iv(o,c,m){m===void 0&&(m=!0);var w=qf.get(o,Hc,{},m),I=w[c];return I||(I=w[c]=[]),I}function Kv(o,c,m,w){o&&c&&c[va]&&(o[qc]?o[qc](c[va],m,w):o[rm]&&o[rm](Yf+c[va],m))}function vg(o,c,m,w){var I=!1;return o&&c&&c[va]&&m&&(o[e_]?(o[e_](c[va],m,w),I=!0):o[tm]&&(o[tm](Yf+c[va],m),I=!0)),I}function hg(o,c,m,w){for(var I=c[mt];I--;){var O=c[I];O&&(!m.ns||m.ns===O.evtName.ns)&&(!w||w(O))&&(Kv(o,O.evtName,O[ws],O.capture),c[jo](I,1))}}function gg(o,c,m){if(c[va])hg(o,iv(o,c[va]),c,m);else{var w=qf.get(o,Hc,{});Fr(w,function(I,O){hg(o,O,c,m)}),Ji(w)[mt]===0&&qf.kill(o,Hc)}}function Xn(o,c){var m;return c?(mr(c)?m=[o].concat(c):m=[o,c],m=nm("xx",m).ns[Ua](".")):m=o,m}function Jd(o,c,m,w,I){var O;I===void 0&&(I=!1);var L=!1;if(o)try{var A=nm(c,w);if(L=vg(o,A,m,I),L&&qf.accept(o)){var M=(O={guid:Ih++,evtName:A},O[ws]=m,O.capture=I,O);iv(o,A.type)[Wr](M)}}catch{}return L}function ii(o,c,m,w,I){if(I===void 0&&(I=!1),o)try{var O=nm(c,w),L=!1;gg(o,O,function(A){return O.ns&&!m||A[ws]===m?(L=!0,!0):!1}),L||Kv(o,O,m,I)}catch{}}function q_(o,c,m,w){return w===void 0&&(w=!1),Jd(o,c,m,null,w)}function im(o,c,m,w){w===void 0&&(w=!1),ii(o,c,m,null,w)}function Zd(o,c,m){var w=!1,I=fi();I&&(w=Jd(I,o,c,m),w=Jd(I.body,o,c,m)||w);var O=fa();return O&&(w=Jd(O,o,c,m)||w),w}function p(o,c,m){var w=fi();w&&(ii(w,o,c,m),ii(w.body,o,c,m));var I=fa();I&&ii(I,o,c,m)}function y(o,c,m,w){var I=!1;return c&&o&&o[mt]>0&&pt(o,function(O){O&&(!m||Oi(m,O)===-1)&&(I=Zd(O,c,w)||I)}),I}function N(o,c,m,w){var I=!1;return c&&o&&mr(o)&&(I=y(o,c,m,w),!I&&m&&m[mt]>0&&(I=y(o,c,null,w))),I}function R(o,c,m){o&&mr(o)&&pt(o,function(w){w&&p(w,c,m)})}function P(o,c,m){return N([$f,Xu,Bl],o,c,m)}function B(o,c){R([$f,Xu,Bl],o,c)}function G(o,c,m){function w(L){var A=fa();o&&A&&A.visibilityState==="hidden"&&o(L)}var I=Xn(hu,m),O=y([Bl],o,c,I);return(!c||Oi(c,Gc)===-1)&&(O=y([Gc],w,c,I)||O),!O&&c&&(O=G(o,null,m)),O}function re(o,c){var m=Xn(hu,c);R([Bl],o,m),R([Gc],null,m)}function ue(o,c,m){function w(L){var A=fa();o&&A&&A.visibilityState==="visible"&&o(L)}var I=Xn(Bf,m),O=y([ql],o,c,I);return O=y([Gc],w,c,I)||O,!O&&c&&(O=ue(o,null,m)),O}function ce(o,c){var m=Xn(Bf,c);R([ql],o,m),R([Gc],null,m)}var ke=Qa({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3}),We="",Ke="https://browser.events.data.microsoft.com/OneCollector/1.0/",De="version",we="properties",Be="initialize",Ne="logger",Qe="indexOf",Pe="timings",Re="pollInternalLogs",Ge="value",Vt="kind",Qt="length",hr="processTelemetryStart",Pr="handleField",pn="rmSanitizer",an="rmFieldSanitizer",Qn="canHandle",Kr,Gi="4.3.5",at="1DS-Web-JS-"+Gi,gt=l.hasOwnProperty,xr="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",br="withCredentials",xt="timeout",Yr=(Kr={},Kr[0]=0,Kr[2]=6,Kr[1]=1,Kr[3]=7,Kr[4098]=6,Kr[4097]=1,Kr[4099]=7,Kr),Et=null,In=rf(),_t=dp();function Un(o){return!(o===We||ot(o))}function jn(o){if(o){var c=ho(o,"-");if(c>-1)return Xr(o,c)}return We}function ya(){return Et===null&&(Et=!st(Uint8Array)&&!wa()&&!Nc()),Et}function Qu(o){return!!(o&&Lr(o)&&o>=1&&o<=4)}function js(o,c,m){if(!c&&!Un(c)||typeof o!="string")return null;var w=typeof c;if(w==="string"||w==="number"||w==="boolean"||mr(c))c={value:c};else if(w==="object"&&!gt.call(c,"value"))c={value:m?JSON.stringify(c):c};else if(ot(c[Ge])||c[Ge]===We||!Kt(c[Ge])&&!Lr(c[Ge])&&!Hn(c[Ge])&&!mr(c[Ge]))return null;if(mr(c[Ge])&&!Gl(c[Ge]))return null;if(!ot(c[Vt])){if(mr(c[Ge])||!An(c[Vt]))return null;c[Ge]=c[Ge].toString()}return c}function am(o,c,m){var w=-1;if(!st(o))if(c>0&&(c===32?w=8192:c<=13&&(w=c<<5)),ai(m))w===-1&&(w=0),w|=m;else{var I=Yr[Ys(o)]||-1;w!==-1&&I!==-1?w|=I:I===6&&(w=I)}return w}function gu(o,c,m){m===void 0&&(m=!0);var w;return o&&(w=o.get(c),m&&w&&decodeURIComponent&&(w=decodeURIComponent(w))),w||We}function es(o){o===void 0&&(o="D");var c=S();return o==="B"?c="{"+c+"}":o==="P"?c="("+c+")":o==="N"&&(c=c.replace(/-/g,We)),c}function Hl(o,c,m,w,I){var O={},L=!1,A=0,M=arguments[Qt],Y=arguments;for(Hn(Y[0])&&(L=Y[0],A++);A<M;A++){var o=Y[A];Fr(o,function(te,Q){L&&Q&&Ci(Q)?mr(Q)?(O[te]=O[te]||[],pt(Q,function(ae,ie){ae&&Ci(ae)?O[te][ie]=Hl(!0,O[te][ie],ae):O[te][ie]=ae})):O[te]=Hl(!0,O[te],Q):O[te]=Q})}return O}var bi=cf;function An(o){return o===0||o>0&&o<=13||o===32}function ai(o){return o>=0&&o<=9}function wa(){var o=Aa();if(!st(o)&&o.userAgent){var c=o.userAgent.toLowerCase();if((c[Qe]("safari")>=0||c[Qe]("firefox")>=0)&&c[Qe]("chrome")<0)return!0}return!1}function Gl(o){return o[Qt]>0}function Xd(o,c){var m=o;m[Pe]=m[Pe]||{},m[Pe][hr]=m[Pe][hr]||{},m[Pe][hr][c]=bi()}function Ys(o){var c=0;if(o!=null){var m=typeof o;m==="string"?c=1:m==="number"?c=2:m==="boolean"?c=3:m===r&&(c=4,mr(o)?(c=4096,o[Qt]>0&&(c|=Ys(o[0]))):gt.call(o,"value")&&(c=8192|Ys(o[Ge])))}return c}function Gf(){return!!gn("chrome")}function Vf(o,c,m,w,I,O){w===void 0&&(w=!1),I===void 0&&(I=!1);function L(M,Y,z){try{M[Y]=z}catch{}}var A=new XMLHttpRequest;return w&&L(A,xr,w),m&&L(A,br,m),A.open(o,c,!I),m&&L(A,br,m),!I&&O&&L(A,xt,O),A}function Qd(o){return o>0}var Ch=xa({endpointUrl:Ke,propertyStorageOverride:{isVal:Jv}});function Jv(o){return o&&(!o.getProperty||!o.setProperty)&&ji("Invalid property storage override passed."),!0}var Zv=function(o){cl(c,o);function c(){var m=o.call(this)||this;return Xa(c,m,function(w,I){w[Be]=function(O,L,A,M){d(w,function(){return"AppInsightsCore.initialize"},function(){try{I[Be](Hi(O,Ch,A||w[Ne],!1).cfg,L,A,M)}catch(te){var Y=w[Ne],z=Jt(te);z[Qe]("channels")!==-1&&(z+=`
 - Channels must be provided through config.channels only!`),nn(Y,1,514,"SDK Initialization Failed - no telemetry will be sent: "+z)}},function(){return{config:O,extensions:L,logger:A,notificationManager:M}})},w.track=function(O){d(w,function(){return"AppInsightsCore.track"},function(){var L=O;if(L){L[Pe]=L[Pe]||{},L[Pe].trackStart=bi(),Qu(L.latency)||(L.latency=1);var A=L.ext=L.ext||{};A.sdk=A.sdk||{},A.sdk.ver=at;var M=L.baseData=L.baseData||{};M[we]=M[we]||{};var Y=M[we];Y[De]=Y[De]||w.pluginVersionString||We}I.track(L)},function(){return{item:O}},!O.sync)},w[Re]=function(O){return I[Re](O||"InternalLog")}}),m}return c.__ieDyn=1,c}(zv),xh=Qa({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),Xv=Qa({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),Qv=Qa({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),eh=Qa({Normal:1,Critical:2}),_u=Qa({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),th=function(){function o(c){var m=this,w={},I=[],O=[];c&&O.push(c);function L(z,te){var Q,ae=w[z];if(ae&&(Q=ae[te]),!Q&&Q!==null){if(Kt(z)&&Kt(te))if(O[Qt]>0){for(var ie=0;ie<O[Qt];ie++)if(O[ie][Pr](z,te)){Q={canHandle:!0,fieldHandler:O[ie]};break}}else I[Qt]===0&&(Q={canHandle:!0});if(!Q&&Q!==null){Q=null;for(var ie=0;ie<I[Qt];ie++)if(I[ie][Pr](z,te)){Q={canHandle:!0,handler:I[ie],fieldHandler:null};break}}ae||(ae=w[z]={}),ae[te]=Q}return Q}m.clearCache=function(){w={}},m.addSanitizer=function(z){z&&(vp(I,z)||I.push(z),w={})},m.addFieldSanitizer=function(z){z&&(vp(O,z)||O.push(z),w={})},m[pn]=function(z){if(z){var te=Oi(I,z);te!==-1&&(I.splice(te,1),w={}),pt(I,function(Q){Q&&Q[pn]&&Q[pn](z)})}},m[an]=function(z){if(z){var te=Oi(O,z);te!==-1&&(O.splice(te,1),w={}),pt(I,function(Q){Q&&Q[an]&&Q[an](z)})}},m.isEmpty=function(){return Ks(I)+Ks(O)===0},m[Pr]=function(z,te){var Q=L(z,te);return Q?Q[Qn]:!1},m[Ge]=function(z,te,Q,ae){var ie=L(z,te);if(ie&&ie[Qn]){if(!ie||!ie[Qn])return null;if(ie.handler)return ie.handler[Ge](z,te,Q,ae);if(!Kt(te)||ot(Q)||Q===We)return null;var ge=null,Ee=Ys(Q);if((Ee&8192)===8192){var je=Ee&-8193;if(ge=Q,!Un(ge[Ge])||je!==1&&je!==2&&je!==3&&(je&4096)!==4096)return null}else Ee===1||Ee===2||Ee===3||(Ee&4096)===4096?ge=M(z,te,Q):Ee===4&&(ge=M(z,te,ae?JSON.stringify(Q):Q));if(ge)return A(ie,z,te,Ee,ge,ae)}return null},m.property=function(z,te,Q,ae){var ie=L(z,te);if(!ie||!ie[Qn]||!Kt(te)||ot(Q)||!Un(Q[Ge]))return null;var ge=Ys(Q[Ge]);return ge===0?null:A(ie,z,te,ge,Q,ae)};function A(z,te,Q,ae,ie,ge){if(z.handler)return z.handler.property(te,Q,ie,ge);if(!ot(ie[Vt])){if((ae&4096)===4096||!An(ie[Vt]))return null;ie[Ge]=ie[Ge].toString()}return Y(z.fieldHandler,te,Q,ae,ie)}function M(z,te,Q){return Un(Q)?{value:Q}:null}function Y(z,te,Q,ae,ie){if(ie&&z){var ge=z.getSanitizer(te,Q,ae,ie[Vt],ie.propertyType);if(ge)if(ae===4){var Ee={},je=ie[Ge];Fr(je,function(it,$t){var Ir=te+"."+Q;if(Un($t)){var Si=M(Ir,it,$t);Si=Y(z,Ir,it,Ys($t),Si),Si&&(Ee[it]=Si[Ge])}}),ie[Ge]=Ee}else{var et={path:te,name:Q,type:ae,prop:ie,sanitizer:m};ie=ge.call(m,et)}}return ie}}return o.getFieldType=Ys,o}();t.ActiveStatus=bn,t.AppInsightsCore=Zv,t.BaseTelemetryPlugin=lg,t.DiagnosticLogger=jl,t.EventLatency=Xv,t.EventPersistence=eh,t.EventPropertyType=Qv,t.EventsDiscardedReason=Pu,t.FullVersionString=at,t.InternalAppInsightsCore=zv,t.LoggingSeverity=ke,t.MinChannelPriorty=pd,t.NotificationManager=$c,t.PerfEvent=Ku,t.PerfManager=Jm,t.ProcessTelemetryContext=Ju,t.SenderPostManager=Wv,t.TraceLevel=_u,t.Undefined=n,t.ValueKind=xh,t.ValueSanitizer=th,t.Version=Gi,t._InternalLogMessage=Lc,t.__getRegisteredEvents=Nh,t._appendHeader=Rl,t._getAllResponseHeaders=Vo,t._logInternalMessage=Bm,t._testHookMaxUnloadHooksCb=Hv,t._throwInternal=nn,t._warnToConsole=Ls,t.addEventHandler=Zd,t.addEventListeners=N,t.addPageHideEventListener=G,t.addPageShowEventListener=ue,t.addPageUnloadEventListener=P,t.areCookiesSupported=Gn,t.arrForEach=pt,t.arrIndexOf=Oi,t.arrMap=Nu,t.arrReduce=Rn,t.attachEvent=q_,t.blockDynamicConversion=Gp,t.convertAllHeadersToMap=ju,t.cookieAvailable=Gn,t.createCookieMgr=Fs,t.createDynamicConfig=Hi,t.createEnumStyle=Qa,t.createGuid=es,t.createProcessTelemetryContext=Gt,t.createTraceParent=pr,t.createUniqueNamespace=cu,t.createUnloadHandlerContainer=Us,t.dateNow=Cu,t.detachEvent=im,t.disallowsSameSiteNone=oo,t.doPerf=d,t.dumpObj=Jt,t.eventOff=ii,t.eventOn=Jd,t.extend=Hl,t.findW3cTraceParent=Mn,t.forceDynamicConversion=Zo,t.formatErrorMessageXdr=If,t.formatErrorMessageXhr=Tc,t.formatTraceParent=At,t.generateW3CId=D,t.getCommonSchemaMetaData=am,t.getConsole=Df,t.getCookieValue=gu,t.getCrypto=Yu,t.getDocument=fa,t.getDynamicConfigHandler=Hp,t.getExceptionName=Is,t.getFieldValueType=Ys,t.getGlobal=id,t.getGlobalInst=gn,t.getHistory=mo,t.getIEVersion=xv,t.getISOString=Ts,t.getJSON=Mi,t.getLocation=lu,t.getMsCrypto=Dd,t.getNavigator=Aa,t.getPerformance=Ja,t.getResponseText=uu,t.getSetValue=Tf,t.getTenantId=jn,t.getTime=bi,t.getWindow=fi,t.hasDocument=rf,t.hasHistory=nf,t.hasJSON=Rs,t.hasNavigator=Tm,t.hasOwnProperty=Jr,t.hasWindow=dp,t.isArray=mr,t.isArrayValid=Gl,t.isBeaconsSupported=Mm,t.isBoolean=Hn,t.isChromium=Gf,t.isDate=xi,t.isDocumentObjectAvailable=In,t.isError=Ct,t.isFetchSupported=Dv,t.isFunction=cr,t.isGreaterThanZero=Qd,t.isIE=$u,t.isLatency=Qu,t.isNotTruthy=Ze,t.isNullOrUndefined=ot,t.isNumber=Lr,t.isObject=Ci,t.isReactNative=Nc,t.isSampledFlag=kr,t.isString=Kt,t.isTruthy=Pn,t.isTypeof=hn,t.isUint8ArrayAvailable=ya,t.isUndefined=st,t.isValidSpanId=Yt,t.isValidTraceId=ur,t.isValidTraceParent=Ar,t.isValueAssigned=Un,t.isValueKind=An,t.isWindowObjectAvailable=_t,t.isXhrSupported=Rf,t.mergeEvtNamespace=Xn,t.newGuid=S,t.newId=Ov,t.normalizeJsName=su,t.objDefineAccessors=ed,t.objForEachKey=Fr,t.objFreeze=Di,t.objKeys=Ji,t.objSeal=us,t.onConfigChange=Pd,t.openXhr=Vf,t.optimizeObject=Id,t.parseResponse=jr,t.parseTraceParent=ft,t.perfNow=cf,t.prependTransports=Nf,t.proxyAssign=Ns,t.proxyFunctionAs=Io,t.proxyFunctions=Ec,t.random32=Dc,t.randomValue=Rv,t.removeEventHandler=p,t.removeEventListeners=R,t.removePageHideEventListener=re,t.removePageShowEventListener=ce,t.removePageUnloadEventListener=B,t.safeGetCookieMgr=Qo,t.safeGetLogger=Ul,t.sanitizeProperty=js,t.setEnableEnvMocks=ta,t.setProcessTelemetryTimings=Xd,t.setValue=io,t.strContains=vt,t.strEndsWith=ud,t.strFunction=e,t.strObject=r,t.strPrototype=i,t.strStartsWith=Sv,t.strTrim=Xi,t.strUndefined=n,t.throwError=ji,t.toISOString=Ts,t.useXDomainRequest=Cc})});var eI=ln((M0,QT)=>{(function(t,e){typeof M0=="object"&&typeof QT<"u"?e(M0):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.oneDS=t.oneDS||{}))})(M0,function(t){"use strict";var e="REAL_TIME",r="NEAR_REAL_TIME",n="BEST_EFFORT",i="function",a="object",l="undefined",v="prototype",_=Object,b=_[v];function C(p,y){return p||y}function U(p,y){return p[y]}var W=void 0,K=null,q="",H="function",Z="object",ne="prototype",he="__proto__",Ie="undefined",_e="constructor",Ae="Symbol",He="_polyfill",tt="length",lt="name",Rt="call",zt="toString",Rr=C(Object),cn=U(Rr,ne),jt=C(String),Ht=U(jt,ne),qr=C(Math),rt=C(Array),fn=U(rt,ne),Le=U(fn,"slice");function Zt(p,y){try{return{v:p.apply(this,y)}}catch(N){return{e:N}}}function Wt(p){return function(y){return typeof y===p}}function Tt(p){return typeof p===Ie||p===Ie}function hn(p){return!ot(p)}function st(p){return p===K||Tt(p)}function ei(p){return p===K||!ot(p)}function ot(p){return!!p||p!==W}var Su=Wt("string"),Xt=Wt(H);function qa(p){return!p&&st(p)?!1:!!p&&typeof p===Z}var Kt=U(rt,"isArray"),cr=Wt("number"),Ci=Wt("boolean");function mr(p){return!!(p&&p.then&&Xt(p.then))}var xi=U(Rr,"getOwnPropertyDescriptor");function Lr(p,y){return!!p&&cn.hasOwnProperty[Rt](p,y)}var Hn=C(U(Rr,"hasOwn"),Ct);function Ct(p,y){return Lr(p,y)||!!xi(p,y)}function Mr(p,y,N){if(p&&qa(p)){for(var R in p)if(Hn(p,R)&&y[Rt](N||p,R,p[R])===-1)break}}var Ze={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Pn(p){var y={};if(y[Ze.c]=!0,y[Ze.e]=!0,p.l){y.get=function(){return p.l.v};var N=xi(p.l,"v");N&&N.set&&(y.set=function(R){p.l.v=R})}return Mr(p,function(R,P){y[Ze[R]]=hn(P)?y[Ze[R]]:P}),y}var Hr=U(Rr,"defineProperty");function Jr(p,y,N){return Hr(p,y,Pn(N))}function Na(p,y,N,R,P){var B={};return Mr(p,function(G,re){Ui(B,G,y?re:G,P),Ui(B,re,N?re:G,P)}),R?R(B):B}function Ui(p,y,N,R){Hr(p,y,{value:N,enumerable:!0,writable:!!R})}var Fr=C(jt),ir="[object Error]";function yr(p,y){var N=q,R=cn[zt][Rt](p);R===ir&&(p={stack:Fr(p.stack),message:Fr(p.message),name:Fr(p.name)});try{N=JSON.stringify(p,K,y?typeof y=="number"?y:4:W),N=(N?N.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):K)||Fr(p)}catch(P){N=" - "+yr(P,y)}return R+": "+N}function sn(p){throw new TypeError(p)}var ed=U(Rr,"freeze");function ti(p){return p}function td(p){return p[he]||K}var Eu=U(Rr,"assign"),xn=U(Rr,"keys");function os(p){return ed&&Mr(p,function(y,N){(Kt(N)||qa(N))&&os(N)}),Jt(p)}var Jt=C(ed,ti),ji=C(U(Rr,"getPrototypeOf"),td);function Ha(p){return Na(p,1,0,Jt)}function ss(p){return Na(p,0,0,Jt)}var Ca=ss({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),rd="__tsUtils$gblCfg",il;function Ji(){var p;return typeof globalThis!==Ie&&(p=globalThis),!p&&typeof self!==Ie&&(p=self),!p&&typeof window!==Ie&&(p=window),!p&&typeof global!==Ie&&(p=global),p}function xa(){if(!il){var p=Zt(Ji).v||{};il=p[rd]=p[rd]||{}}return il}var Di=us;function us(p,y,N){var R=y?y[p]:K;return function(P){var B=(P?P[p]:K)||R;if(B||N){var G=arguments;return(B||N).apply(P,B?Le[Rt](G,1):G)}sn('"'+Fr(p)+'" not defined for '+yr(P))}}var Gs=U(qr,"max"),ui=Di("slice",Ht),al=Di("substring",Ht),Vs=us("substr",Ht,Da);function Da(p,y,N){return st(p)&&sn("Invalid "+yr(p)),N<0?q:(y=y||0,y<0&&(y=Gs(y+p[tt],0)),Tt(N)?ui(p,y):ui(p,y,y+N))}function ri(p,y){return al(p,0,y)}var rc="_urid",zs;function li(){if(!zs){var p=xa();zs=p.gblSym=p.gblSym||{k:{},s:{}}}return zs}var ua;function vr(p){var y={description:Fr(p),toString:function(){return Ae+"("+p+")"}};return y[He]=!0,y}function Dn(p){var y=li();if(!Hn(y.k,p)){var N=vr(p),R=xn(y.s).length;N[rc]=function(){return R+"_"+N[zt]()},y.k[p]=N,y.s[N[rc]()]=Fr(p)}return y.k[p]}function Ra(p){!ua&&(ua={});var y,N=Ca[p];return N&&(y=ua[N]=ua[N]||vr(Ae+"."+N)),y}var Zr;function gi(){Zr=xa()}function Ga(p){return Hr({toJSON:function(){return p}},"v",{value:p})}var Xr="window",la;function Tu(p,y){var N;return function(){return!Zr&&gi(),(!N||Zr.lzy)&&(N=Ga(Zt(p,y).v)),N.v}}function ca(p){return!Zr&&gi(),(!la||p===!1||Zr.lzy)&&(la=Ga(Zt(Ji).v||K)),la.v}function wn(p,y){var N;if(!la||y===!1?N=ca(y):N=la.v,N&&N[p])return N[p];if(p===Xr)try{return window}catch{}return K}var ci=Tu(wn,["document"]);function ol(){return!!Oa()}var Oa=Tu(wn,[Xr]);function Or(){return!!Ri()}var Ri=Tu(wn,["navigator"]),nd=Tu(function(){return!!Zt(function(){return process&&(process.versions||{}).node}).v}),Yi,ls;function nc(){return Yi=Ga(Zt(wn,[Ae]).v),Yi}function cs(p){var y=(Zr.lzy?0:Yi)||nc();return y.v?y.v[p]:W}function id(){return!!gn()}function gn(){return!Zr&&gi(),((Zr.lzy?0:Yi)||nc()).v}function rf(p,y){var N=Ca[p];!Zr&&gi();var R=(Zr.lzy?0:Yi)||nc();return R.v?R.v[N||p]:y?W:Ra(p)}function fa(p,y){!Zr&&gi();var N=(Zr.lzy?0:Yi)||nc();return N.v?N.v(p):y?K:vr(p)}function dp(p){return!Zr&&gi(),ls=(Zr.lzy?0:ls)||Ga(Zt(cs,["for"]).v),(ls.v||Dn)(p)}function fi(p){return!!p&&Xt(p.next)}function Tm(p){return!ei(p)&&Xt(p[rf(3)])}var Aa;function nf(p,y,N){if(p&&(fi(p)||(!Aa&&(Aa=Ga(rf(3))),p=p[Aa.v]?p[Aa.v]():K),fi(p))){var R=W,P=W;try{for(var B=0;!(P=p.next()).done&&y[Rt](N||p,P.value,B,p)!==-1;)B++}catch(G){R={e:G},p.throw&&(P=K,p.throw(R))}finally{try{P&&!P.done&&p.return&&p.return(P)}finally{if(R)throw R.e}}}}function mo(p,y,N){return p.apply(y,N)}function ad(p,y){return!Tt(y)&&p&&(Kt(y)?mo(p.push,p,y):fi(y)||Tm(y)?nf(y,function(N){p.push(N)}):p.push(y)),p}function Tr(p,y,N){if(p)for(var R=p[tt]>>>0,P=0;P<R&&!(P in p&&y[Rt](N||p,p[P],P,p)===-1);P++);}var fs=Di("indexOf",fn);function od(p,y,N){return((p?p.slice:K)||Le).apply(p,Le[Rt](arguments,1))}var Zi=C(U(Rr,"create"),ic);function ic(p){if(!p)return{};var y=typeof p;y!==Z&&y!==H&&sn("Prototype must be an Object or function: "+yr(p));function N(){}return N[ne]=p,new N}var Lt;function ka(p,y){var N=Rr.setPrototypeOf||function(R,P){var B;!Lt&&(Lt=Ga((B={},B[he]=[],B instanceof Array))),Lt.v?R[he]=P:Mr(P,function(G,re){return R[G]=re})};return N(p,y)}function sl(p,y,N){Zt(Jr,[y,lt,{v:p,c:!0,e:!1}]),y=ka(y,N);function R(){this[_e]=y,Zt(Jr,[this,lt,{v:p,c:!0,e:!1}])}return y[ne]=N===K?Zi(N):(R[ne]=N[ne],new R),y}function af(p,y){y&&(p[lt]=y)}function wv(p,y,N){var R=N||Error,P=R[ne][lt],B=Error.captureStackTrace;return sl(p,function(){var G=this,re=arguments;try{Zt(af,[R,p]);var ue=mo(R,G,Le[Rt](re))||G;if(ue!==G){var ce=ji(G);ce!==ji(ue)&&ka(ue,ce)}return B&&B(ue,G[_e]),y&&y(ue,re),ue}finally{Zt(af,[R,P])}},R)}function Va(){return(Date.now||of)()}function of(){return new Date().getTime()}function pp(p){return function(N){return st(N)&&sn("strTrim called ["+yr(N)+"]"),N&&N.replace&&(N=N.replace(p,q)),N}}var Iu=pp(/^\s+|(?=\s)\s+$/g),za=us("trim",Ht,Iu),pt,Oi,Nu;function Ws(p){if(!p||typeof p!==Z)return!1;Nu||(Nu=ol()?Oa():!0);var y=!1;if(p!==Nu){Oi||(pt=Function[ne][zt],Oi=pt[Rt](Rr));try{var N=ji(p);y=!N,y||(Lr(N,_e)&&(N=N[_e]),y=!!(N&&typeof N===H&&pt[Rt](N)===Oi))}catch{}}return y}function mp(){return Va()}var vp=Di("indexOf",Ht),Rn=us("startsWith",Ht,Pa);function Pa(p,y,N){Su(p)||sn("'"+yr(p)+"' is not a string");var R=Su(y)?y:Fr(y),P=N>0?N:0;return al(p,P,P+R[tt])===R}var hp="ref",Wa="unref",da="hasRef",hh="enabled";function bv(p,y,N){var R=!0,P=p?y(K):K,B;function G(){return R=!1,P&&P[Wa]&&P[Wa](),B}function re(){P&&N(P),P=K}function ue(){return P=y(P),R||G(),B}function ce(ke){!ke&&P&&re(),ke&&!P&&ue()}return B={cancel:re,refresh:ue},B[da]=function(){return P&&P[da]?P[da]():R},B[hp]=function(){return R=!0,P&&P[hp]&&P[hp](),B},B[Wa]=G,B=Hr(B,hh,{get:function(){return!!P},set:ce}),{h:B,dn:function(){P=K}}}function Im(p,y,N){var R=Kt(y),P=R?y.length:0,B=(P>0?y[0]:R?W:y)||setTimeout,G=(P>1?y[1]:W)||clearTimeout,re=N[0];N[0]=function(){ue.dn(),mo(re,W,Le[Rt](arguments))};var ue=bv(p,function(ce){if(ce){if(ce.refresh)return ce.refresh(),ce;mo(G,W,[ce])}return mo(B,W,N)},function(ce){mo(G,W,[ce])});return ue.h}function Cu(p,y){return Im(!0,W,Le[Rt](arguments))}function Nm(p,y,N){return Im(!0,p,Le[Rt](arguments,1))}(ca()||{}).Symbol,(ca()||{}).Reflect;var og="hasOwnProperty",gp=function(p,y){return gp=_.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,R){N.__proto__=R}||function(N,R){for(var P in R)R[og](P)&&(N[P]=R[P])},gp(p,y)};function Xi(p,y){typeof y!==i&&y!==null&&sn("Class extends value "+String(y)+" is not a constructor or null"),gp(p,y);function N(){this.constructor=p}p[v]=y===null?Zi(y):(N[v]=y[v],new N)}var sf,uf="constructor",vo="prototype",La="function",xu="_dynInstFuncs",Cm="_isDynProxy",Ka="_dynClass",_p="_dynCls$",Du="_dynInstChk",ac=Du,lf="_dfOpts",sd="_unknown_",yp="__proto__",xm="_dyn"+yp,Dm="__dynProto$Gbl",Ru="_dynInstProto",wp="useBaseInst",Ks="setInstFuncs",ul=Object,Ja=ul.getPrototypeOf,cf=ul.getOwnPropertyNames,ud=ca(),oc=ud[Dm]||(ud[Dm]={o:(sf={},sf[Ks]=!0,sf[wp]=!0,sf),n:1e3});function ho(p){return p&&(p===ul[vo]||p===Array[vo])}function Sv(p){return ho(p)||p===Function[vo]}function ds(p){var y;if(p){if(Ja)return Ja(p);var N=p[yp]||p[vo]||(p[uf]?p[uf][vo]:null);y=p[xm]||N,Lr(p,xm)||(delete p[Ru],y=p[xm]=p[Ru]||p[xm],p[Ru]=N)}return y}function ko(p,y){var N=[];if(cf)N=cf(p);else for(var R in p)typeof R=="string"&&Lr(p,R)&&N.push(R);if(N&&N.length>0)for(var P=0;P<N.length;P++)y(N[P])}function go(p,y,N){return y!==uf&&typeof p[y]===La&&(N||Lr(p,y))&&y!==yp&&y!==vo}function Ou(p){sn("DynamicProto: "+p)}function ld(p){var y=Zi(null);return ko(p,function(N){!y[N]&&go(p,N,!1)&&(y[N]=p[N])}),y}function sc(p,y){for(var N=p.length-1;N>=0;N--)if(p[N]===y)return!0;return!1}function uc(p,y,N,R){function P(ue,ce,ke){var We=ce[ke];if(We[Cm]&&R){var Ke=ue[xu]||{};Ke[ac]!==!1&&(We=(Ke[ce[Ka]]||{})[ke]||We)}return function(){return We.apply(ue,arguments)}}var B=Zi(null);ko(N,function(ue){B[ue]=P(y,N,ue)});for(var G=ds(p),re=[];G&&!Sv(G)&&!sc(re,G);)ko(G,function(ue){!B[ue]&&go(G,ue,!Ja)&&(B[ue]=P(y,G,ue))}),re.push(G),G=ds(G);return B}function ll(p,y,N,R){var P=null;if(p&&Lr(N,Ka)){var B=p[xu]||Zi(null);if(P=(B[N[Ka]]||Zi(null))[y],P||Ou("Missing ["+y+"] "+La),!P[Du]&&B[ac]!==!1){for(var G=!Lr(p,y),re=ds(p),ue=[];G&&re&&!Sv(re)&&!sc(ue,re);){var ce=re[y];if(ce){G=ce===R;break}ue.push(re),re=ds(re)}try{G&&(p[y]=P),P[Du]=1}catch{B[ac]=!1}}}return P}function cd(p,y,N){var R=y[p];return R===N&&(R=ds(y)[p]),typeof R!==La&&Ou("["+p+"] is not a "+La),R}function ff(p,y,N,R,P){function B(ue,ce){var ke=function(){var We=ll(this,ce,ue,ke)||cd(ce,ue,ke);return We.apply(this,arguments)};return ke[Cm]=1,ke}if(!ho(p)){var G=N[xu]=N[xu]||Zi(null);if(!ho(G)){var re=G[y]=G[y]||Zi(null);G[ac]!==!1&&(G[ac]=!!P),ho(re)||ko(N,function(ue){go(N,ue,!1)&&N[ue]!==R[ue]&&(re[ue]=N[ue],delete N[ue],(!Lr(p,ue)||p[ue]&&!p[ue][Cm])&&(p[ue]=B(p,ue)))})}}}function fd(p,y){if(Ja){for(var N=[],R=ds(y);R&&!Sv(R)&&!sc(N,R);){if(R===p)return!0;N.push(R),R=ds(R)}return!1}return!0}function cl(p,y){return Lr(p,vo)?p.name||y||sd:((p||{})[uf]||{}).name||y||sd}function _o(p,y,N,R){Lr(p,vo)||Ou("theClass is an invalid class definition.");var P=p[vo];fd(P,y)||Ou("["+cl(p)+"] not in hierarchy of ["+cl(y)+"]");var B=null;Lr(P,Ka)?B=P[Ka]:(B=_p+cl(p,"_")+"$"+oc.n,oc.n++,P[Ka]=B);var G=_o[lf],re=!!G[wp];re&&R&&R[wp]!==void 0&&(re=!!R[wp]);var ue=ld(y),ce=uc(P,y,ue,re);N(y,ce);var ke=!!Ja&&!!G[Ks];ke&&R&&(ke=!!R[Ks]),ff(P,B,y,ue,ke!==!1)}_o[lf]=oc.o;var lc=Ha,Po=lc({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),Ma="toLowerCase",ps="blkVal",un="length",Js="rdOnly",yo="notify",cc="warnToConsole",fc="throwInternal",ms="setDf",df="watch",vs="logger",Au="apply",pa="push",bp="splice",fl="hdlr",Qi="cancel",dd="initialize",Sp="identifier",pf="isInitialized",mf="value",Ep="getPlugin",Ev="name",dl="time",Lo="processNext",wo="getProcessTelContext",On="unload",vf="loggingLevelConsole",pl="createNew",ml="teardown",Tp="messageId",Za="message",ku="isAsync",Zs="diagLog",fr="_doTeardown",Mo="update",hs="getNext",Xa="setNextPlugin",pd="protocol",Qa="userAgent",Pu="split",bn="nodeType",ma="replace",zr="logInternalMessage",mt="type",vl="handler",Fo="status",Xs="getResponseHeader",bo="getAllResponseHeaders",Lu="isChildEvt",eo="data",Qr="getCtx",Uo="setCtx",Wr="complete",jo="urlString",md="sendPOST",Yo="headers",Zn="timeout",So="setRequestHeader",gs;function $i(p,y){gs||(gs=wv("AggregationError",function(R,P){P[un]>1&&(R.errors=P[1])}));var N=p||"One or more errors occurred.";throw Tr(y,function(R,P){N+=`
`.concat(P," > ").concat(yr(R))}),new gs(N,y||[])}var ea="Promise",dc="rejected";function hl(p,y){return vd(p,function(N){return y?y({status:"fulfilled",rejected:!1,value:N}):N},function(N){return y?y({status:dc,rejected:!0,reason:N}):N})}function vd(p,y,N,R){var P=p;try{if(mr(p))(y||N)&&(P=p.then(y,N));else try{y&&(P=y(p))}catch(B){if(N)P=N(B);else throw B}}finally{R&&Qs(P,R)}return P}function Qs(p,y){var N=p;return y&&(mr(p)?p.finally?N=p.finally(y):N=p.then(function(R){return y(),R},function(R){throw y(),R}):y()),N}var $o=["pending","resolving","resolved",dc],Bo="dispatchEvent",gl;function qo(p){var y;return p&&p.createEvent&&(y=p.createEvent("Event")),!!y&&y.initEvent}function ni(p,y,N,R){var P=ci();!gl&&(gl=Ga(!!Zt(qo,[P]).v));var B=gl.v?P.createEvent("Event"):R?new Event(y):{};if(N&&N(B),gl.v&&B.initEvent(y,!1,!0),B&&p[Bo])p[Bo](B);else{var G=p["on"+y];if(G)G(B);else{var re=wn("console");re&&(re.error||re.log)(y,yr(B))}}}var hd="unhandledRejection",_l=hd.toLowerCase(),eu=10,Fa;function _s(p){return Xt(p)?p.toString():yr(p)}function tu(p,y,N){var R=od(arguments,3),P=0,B=!1,G,re=[],ue=!1,ce=null,ke;function We(Re,Ge){try{ue=!0,ce&&ce.cancel(),ce=null;var Vt=p(function(Qt,hr){re.push(function(){try{var Pr=P===2?Re:Ge,pn=Tt(Pr)?G:Xt(Pr)?Pr(G):Pr;mr(pn)?pn.then(Qt,hr):Pr?Qt(pn):P===3?hr(pn):Qt(pn)}catch(an){hr(an)}}),B&&Be()},R);return Vt}finally{}}function Ke(Re){return We(void 0,Re)}function De(Re){var Ge=Re,Vt=Re;return Xt(Re)&&(Ge=function(Qt){return Re&&Re(),Qt},Vt=function(Qt){throw Re&&Re(),Qt}),We(Ge,Vt)}function we(){return $o[P]}function Be(){if(re.length>0){var Re=re.slice();re=[],ue=!0,ce&&ce.cancel(),ce=null,y(Re)}}function Ne(Re,Ge){return function(Vt){if(P===Ge){if(Re===2&&mr(Vt)){P=1,Vt.then(Ne(2,1),Ne(3,1));return}P=Re,B=!0,G=Vt,Be(),!ue&&Re===3&&!ce&&(ce=Cu(Qe,eu))}}}function Qe(){if(!ue)if(ue=!0,nd())process.emit(hd,G,ke);else{var Re=Oa()||ca();!Fa&&(Fa=Ga(Zt(wn,[ea+"RejectionEvent"]).v)),ni(Re,_l,function(Ge){return Jr(Ge,"promise",{g:function(){return ke}}),Ge.reason=G,Ge},!!Fa.v)}}ke={then:We,catch:Ke,finally:De},Hr(ke,"state",{get:we}),id()&&(ke[rf(11)]="IPromise");function Pe(){return"IPromise "+we()+(B?" - "+_s(G):"")}return ke.toString=Pe,function(){Xt(N)||sn(ea+": executor is not a function - "+_s(N));var Ge=Ne(3,0);try{N.call(ke,Ne(2,0),Ge)}catch(Vt){Ge(Vt)}}(),ke}function to(p){Tr(p,function(y){try{y()}catch{}})}function pc(p){var y=cr(p)?p:0;return function(N){Cu(function(){to(N)},y)}}function Mu(p,y){return tu(Mu,pc(y),p,y)}var Ai;function Fu(p,y){!Ai&&(Ai=Ga(Zt(wn,[ea]).v||null));var N=Ai.v;if(!N)return Mu(p);Xt(p)||sn(ea+": executor is not a function - "+yr(p));var R=0;function P(){return $o[R]}var B=new N(function(G,re){function ue(ke){R=2,G(ke)}function ce(ke){R=3,re(ke)}p(ue,ce)});return Hr(B,"state",{get:P}),B}var ru;function ro(p,y){return!ru&&(ru=Ga(Fu)),ru.v.call(this,p,y)}var yl=void 0,Sn="",_i="core",no="disabled",wl="extensionConfig",ys="processTelemetry",Ip="priority",Ua="getPerfMgr",mc="Not dynamic - ",Bi=/-([a-z])/g,gd=/([^\w\d_$])/g,va=/^(\d+[\w\d_$])/;function ws(p){return!st(p)}function bs(p){var y=p;return y&&Su(y)&&(y=y[ma](Bi,function(N,R){return R.toUpperCase()}),y=y[ma](gd,"_"),y=y[ma](va,function(N,R){return"_"+R})),y}function Np(p,y){return p&&y?vp(p,y)!==-1:!1}function hf(p,y){var N=null,R=null;return Xt(p)?N=p:R=p,function(){var P=arguments;if(N&&(R=N()),R)return R[y][Au](R,P)}}function _d(p,y,N,R,P){p&&y&&N&&(P!==!1||Tt(p[y]))&&(p[y]=hf(N,R))}function gf(p,y,N,R){return p&&y&&qa(p)&&Kt(N)&&Tr(N,function(P){Su(P)&&_d(p,P,y,P,R)}),p}function Ho(p){return p&&Eu&&(p=_(Eu({},p))),p}function ha(p){try{return p.responseText}catch{}return null}function vc(p,y){return p?"XDomainRequest,Response:"+ha(p)||"":y}function Tv(p,y){return p?"XMLHttpRequest,Status:"+p[Fo]+",Response:"+ha(p)||p.response||"":y}function bl(p,y){return y&&(cr(y)?p=[y].concat(p):Kt(y)&&(p=y.concat(p))),p}var Sl="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Ss="withCredentials",_f="timeout";function gh(p,y,N,R,P,B){R===void 0&&(R=!1),P===void 0&&(P=!1);function G(ue,ce,ke){try{ue[ce]=ke}catch{}}var re=new XMLHttpRequest;return R&&G(re,Sl,R),N&&G(re,Ss,N),re.open(p,y,!P),N&&G(re,Ss,N),!P&&B&&G(re,_f,B),re}function Cp(p){var y={};if(Su(p)){var N=za(p)[Pu](/[\r\n]+/);Tr(N,function(R){if(R){var P=R.indexOf(": ");if(P!==-1){var B=za(R.substring(0,P))[Ma](),G=za(R.substring(P+1));y[B]=G}else y[za(R)]=1}})}return y}function yf(p,y,N){if(!p[N]&&y&&y[Xs]){var R=y[Xs](N);R&&(p[N]=za(R))}return p}var El="kill-duration",Rm="kill-duration-seconds",Iv="time-delta-millis";function Tl(p,y){var N={};return p[bo]?N=Cp(p[bo]()):y&&(N=yf(N,p,Iv),N=yf(N,p,El),N=yf(N,p,Rm)),N}var Nv="location",wf="console",xp="JSON",Eo="crypto",Om="msCrypto",_h="ReactNative",yd="msie",Am="trident/",Dp="XMLHttpRequest",hc=null,wd=null,Il=!1,nu=null,gc=null;function Cv(p,y){var N=!1;if(p){try{if(N=y in p,!N){var R=p[v];R&&(N=y in R)}}catch{}if(!N)try{var P=new p;N=!Tt(P[y])}catch{}}return N}function Rp(p){if(p&&Il){var y=wn("__mockLocation");if(y)return y}return typeof location===a&&location?location:wn(Nv)}function _c(){return typeof console!==l?console:wn(wf)}function Op(){return!!(typeof JSON===a&&JSON||wn(xp)!==null)}function iu(){return Op()?JSON||wn(xp):null}function en(){return wn(Eo)}function Nl(){return wn(Om)}function ki(){var p=Ri();return p&&p.product?p.product===_h:!1}function Ap(){var p=Ri();if(p&&(p[Qa]!==wd||hc===null)){wd=p[Qa];var y=(wd||Sn)[Ma]();hc=Np(y,yd)||Np(y,Am)}return hc}function bd(p){return(gc===null||p===!1)&&(gc=Or()&&!!Ri().sendBeacon),gc}function yc(p){var y=!1;try{y=!!wn("fetch");var N=wn("Request");y&&p&&N&&(y=Cv(N,"keepalive"))}catch{}return y}function Cl(){return nu===null&&(nu=typeof XDomainRequest!==l,nu&&ga()&&(nu=nu&&!Cv(wn(Dp),"withCredentials"))),nu}function ga(){var p=!1;try{var y=wn(Dp);p=!!y}catch{}return p}var Sd=4294967296,yi=4294967295,wr=123456789,au=987654321,Ln=!1,Es=wr,xl=au;function Dl(p){p<0&&(p>>>=0),Es=wr+p&yi,xl=au-p&yi,Ln=!0}function ou(){try{var p=Va()&2147483647;Dl((Math.random()*Sd^p)+p)}catch{}}function To(p){var y=0,N=en()||Nl();return N&&N.getRandomValues&&(y=N.getRandomValues(new Uint32Array(1))[0]&yi),y===0&&Ap()&&(Ln||ou(),y=bf()&yi),y===0&&(y=Math.floor(Sd*Math.random()|0)),p||(y>>>=0),y}function bf(p){xl=36969*(xl&65535)+(xl>>16)&yi,Es=18e3*(Es&65535)+(Es>>16)&yi;var y=(xl<<16)+(Es&65535)>>>0&yi|0;return p||(y>>>=0),y}function km(p){p===void 0&&(p=22);for(var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=To()>>>0,R=0,P=Sn;P[un]<p;)R++,P+=y.charAt(N&63),N>>>=6,R===5&&(N=(To()<<2&4294967295|N&3)>>>0,R=0);return P}var Sf="3.3.5",Pm="."+km(6),Ef=0;function wc(p){return p[bn]===1||p[bn]===9||!+p[bn]}function kp(p,y){var N=y[p.id];if(!N){N={};try{wc(y)&&Jr(y,p.id,{e:!1,v:N})}catch{}}return N}function di(p,y){return y===void 0&&(y=!1),bs(p+Ef+++(y?"."+Sf:Sn)+Pm)}function bc(p){var y={id:di("_aiData-"+(p||Sn)+"."+Sf),accept:function(N){return wc(N)},get:function(N,R,P,B){var G=N[y.id];return G?G[bs(R)]:(B&&(G=kp(y,N),G[bs(R)]=P),P)},kill:function(N,R){if(N&&N[R])try{delete N[R]}catch{}}};return y}function Pi(p){return p&&qa(p)&&(p.isVal||p.fb||Hn(p,"v")||Hn(p,"mrg")||Hn(p,"ref")||p.set)}function Uu(p,y,N){var R,P=N.dfVal||ot;if(y&&N.fb){var B=N.fb;Kt(B)||(B=[B]);for(var G=0;G<B[un];G++){var re=B[G],ue=y[re];if(P(ue)?R=ue:p&&(ue=p.cfg[re],P(ue)&&(R=ue),p.set(p.cfg,Fr(re),ue)),P(R))break}}return!P(R)&&P(N.v)&&(R=N.v),R}function Pp(p,y,N){var R=N;if(N&&Pi(N)&&(R=Uu(p,y,N)),R){Pi(R)&&(R=Pp(p,y,R));var P;Kt(R)?(P=[],P[un]=R[un]):Ws(R)&&(P={}),P&&(Mr(R,function(B,G){G&&Pi(G)&&(G=Pp(p,y,G)),P[B]=G}),R=P)}return R}function Ed(p,y,N,R){var P,B,G,re=R,ue,ce,ke,We;Pi(re)?(P=re.isVal,B=re.set,ke=re[Js],We=re[ps],ue=re.mrg,ce=re.ref,!ce&&Tt(ce)&&(ce=!!ue),G=Uu(p,y,re)):G=R,We&&p[ps](y,N);var Ke,De=!0,we=y[N];(we||!st(we))&&(Ke=we,De=!1,P&&Ke!==G&&!P(Ke)&&(Ke=G,De=!0),B&&(Ke=B(Ke,G,y),De=Ke===G)),De?G?Ke=Pp(p,y,G):Ke=G:(Ws(Ke)||Kt(G))&&ue&&G&&(Ws(G)||Kt(G))&&Mr(G,function(Be,Ne){Ed(p,Ke,Be,Ne)}),p.set(y,N,Ke),ce&&p.ref(y,N),ke&&p[Js](y,N)}var Li=dp("[[ai_dynCfg_1]]"),Td=dp("[[ai_blkDynCfg_1]]"),Lp=dp("[[ai_frcDynCfg_1]]");function su(p){if(p){var y;if(Kt(p)?(y=[],y[un]=p[un]):Ws(p)&&(y={}),y)return Mr(p,function(N,R){y[N]=su(R)}),y}return p}function vt(p){if(p){var y=p[Li]||p;if(y.cfg&&(y.cfg===p||y.cfg[Li]===y))return y}return null}function Ts(p){if(p&&(Ws(p)||Kt(p)))try{p[Td]=!0}catch{}return p}function Is(p,y,N){var R=!1;return N&&!p[y.blkVal]&&(R=N[Lp],!R&&!N[Td]&&(R=Ws(N)||Kt(N))),R}function io(p){sn("InvalidAccess:"+p)}var Tf=["push","pop","shift","unshift","splice"],Sc=function(p,y,N,R){p&&p[fc](3,108,"".concat(N," [").concat(y,"] failed - ")+yr(R))};function Ns(p,y,N){Kt(y)&&Tr(Tf,function(R){var P=y[R];y[R]=function(){for(var B=[],G=0;G<arguments.length;G++)B[G]=arguments[G];var re=P[Au](this,B);return If(p,y,N,"Patching"),re}})}function Io(p,y){var N=xi(p,y);return N&&N.get}function Ec(p,y,N,R){var P={n:N,h:[],trk:function(ce){ce&&ce.fn&&(fs(P.h,ce)===-1&&P.h[pa](ce),p.trk(ce,P))},clr:function(ce){var ke=fs(P.h,ce);ke!==-1&&P.h[bp](ke,1)}},B=!0,G=!1;function re(){B&&(G=G||Is(re,p,R),R&&!R[Li]&&G&&(R=If(p,R,N,"Converting")),B=!1);var ce=p.act;return ce&&P.trk(ce),R}re[p.prop]={chng:function(){p.add(P)}};function ue(ce){if(R!==ce){re[p.ro]&&!p.upd&&io("["+N+"] is read-only:"+yr(y)),B&&(G=G||Is(re,p,R),B=!1);var ke=G&&re[p.rf];if(G)if(ke){Mr(R,function(Ke){R[Ke]=ce?ce[Ke]:yl});try{Mr(ce,function(Ke,De){Id(p,R,Ke,De)}),ce=R}catch(Ke){Sc((p.hdlr||{})[vs],N,"Assigning",Ke),G=!1}}else R&&R[Li]&&Mr(R,function(Ke){var De=Io(R,Ke);if(De){var we=De[p.prop];we&&we.chng()}});if(ce!==R){var We=ce&&Is(re,p,ce);!ke&&We&&(ce=If(p,ce,N,"Converting")),R=ce,G=We}p.add(P)}}Jr(y,P.n,{g:re,s:ue})}function Id(p,y,N,R){if(y){var P=Io(y,N),B=P&&!!P[p.prop];B?y[N]=R:Ec(p,y,N,R)}return y}function uu(p,y,N,R){if(y){var P=Io(y,N),B=P&&!!P[p.prop],G=R&&R[0],re=R&&R[1],ue=R&&R[2];if(!B){if(ue)try{Ts(y)}catch(ce){Sc((p.hdlr||{})[vs],N,"Blocking",ce)}try{Id(p,y,N,y[N]),P=Io(y,N)}catch(ce){Sc((p.hdlr||{})[vs],N,"State",ce)}}G&&(P[p.rf]=G),re&&(P[p.ro]=re),ue&&(P[p.blkVal]=!0)}return y}function If(p,y,N,R){try{Mr(y,function(P,B){Id(p,y,P,B)}),y[Li]||(Hr(y,Li,{get:function(){return p[fl]}}),Ns(p,y,N))}catch(P){Sc((p.hdlr||{})[vs],N,R,P)}return y}var Tc="[[ai_",Nf="]]";function Mp(p){var y,N=fa(Tc+"get"+p.uid+Nf),R=fa(Tc+"ro"+p.uid+Nf),P=fa(Tc+"rf"+p.uid+Nf),B=fa(Tc+"blkVal"+p.uid+Nf),G=fa(Tc+"dtl"+p.uid+Nf),re=null,ue=null,ce;function ke(we,Be){var Ne=ce.act;try{ce.act=we,we&&we[G]&&(Tr(we[G],function(Pe){Pe.clr(we)}),we[G]=[]),Be({cfg:p.cfg,set:p.set.bind(p),setDf:p[ms].bind(p),ref:p.ref.bind(p),rdOnly:p[Js].bind(p)})}catch(Pe){var Qe=p[vs];throw Qe&&Qe[fc](1,107,yr(Pe)),Pe}finally{ce.act=Ne||null}}function We(){if(re){var we=re;re=null,ue&&ue[Qi](),ue=null;var Be=[];if(Tr(we,function(Ne){if(Ne&&(Ne[G]&&(Tr(Ne[G],function(Qe){Qe.clr(Ne)}),Ne[G]=null),Ne.fn))try{ke(Ne,Ne.fn)}catch(Qe){Be[pa](Qe)}}),re)try{We()}catch(Ne){Be[pa](Ne)}Be[un]>0&&$i("Watcher error(s): ",Be)}}function Ke(we){if(we&&we.h[un]>0){re||(re=[]),ue||(ue=Cu(function(){ue=null,We()},0));for(var Be=0;Be<we.h[un];Be++){var Ne=we.h[Be];Ne&&fs(re,Ne)===-1&&re[pa](Ne)}}}function De(we,Be){if(we){var Ne=we[G]=we[G]||[];fs(Ne,Be)===-1&&Ne[pa](Be)}}return ce=(y={prop:N,ro:R,rf:P},y[ps]=B,y[fl]=p,y.add=Ke,y[yo]=We,y.use=ke,y.trk=De,y),ce}function Fp(p,y){var N={fn:y,rm:function(){N.fn=null,p=null,y=null}};return Jr(N,"toJSON",{v:function(){return"WatcherHandler"+(N.fn?"":"[X]")}}),p.use(N,y),N}function Lm(p,y,N){var R,P=vt(y);if(P)return P;var B=di("dyncfg",!0),G=y&&N!==!1?y:su(y),re;function ue(){re[yo]()}function ce(Qe,Pe,Re){try{Qe=Id(re,Qe,Pe,Re)}catch(Ge){Sc(p,Pe,"Setting value",Ge)}return Qe[Pe]}function ke(Qe){return Fp(re,Qe)}function We(Qe,Pe){re.use(null,function(Re){var Ge=re.upd;try{Tt(Pe)||(re.upd=Pe),Qe(Re)}finally{re.upd=Ge}})}function Ke(Qe,Pe){var Re;return uu(re,Qe,Pe,(Re={},Re[0]=!0,Re))[Pe]}function De(Qe,Pe){var Re;return uu(re,Qe,Pe,(Re={},Re[1]=!0,Re))[Pe]}function we(Qe,Pe){var Re;return uu(re,Qe,Pe,(Re={},Re[2]=!0,Re))[Pe]}function Be(Qe,Pe){return Pe&&Mr(Pe,function(Re,Ge){Ed(Ne,Qe,Re,Ge)}),Qe}var Ne=(R={uid:null,cfg:G},R[vs]=p,R[yo]=ue,R.set=ce,R[ms]=Be,R[df]=ke,R.ref=Ke,R[Js]=De,R[ps]=we,R._block=We,R);return Jr(Ne,"uid",{c:!1,e:!1,w:!1,v:B}),re=Mp(Ne),If(re,G,"config","Creating"),Ne}function Up(p,y){p?(p[cc](y),p[fc](2,108,y)):io(y)}function ju(p,y,N,R){var P=Lm(N,p||{},R);return y&&P[ms](P.cfg,y),P}function Rl(p,y,N){var R=p[Li]||p;return R.cfg&&(R.cfg===p||R.cfg[Li]===R)?R[df](y):(Up(N,mc+yr(p)),ju(p,null,N)[df](y))}var Cf="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Go=null;function Cs(){var p=wn("Microsoft");return p&&(Go=p.ApplicationInsights),Go}function Vo(p){var y=Go;return!y&&p.disableDbgExt!==!0&&(y=Go||Cs()),y?y.ChromeDbgExt:null}var zo,Ol="warnToConsole",jp="AI (Internal): ",Al="AI: ",Yp="AITR_",$p={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Nd=(zo={},zo[0]=null,zo[1]="errorToConsole",zo[2]=Ol,zo[3]="debugToConsole",zo);function xs(p){return p?'"'+p[ma](/\"/g,Sn)+'"':Sn}function Wo(p,y){var N=_c();if(N){var R="log";N[p]&&(R=p),Xt(N[R])&&N[R](y)}}var Ko=function(){function p(y,N,R,P){R===void 0&&(R=!1);var B=this;B[Tp]=y,B[Za]=(R?Al:jp)+y;var G=Sn;Op()&&(G=iu().stringify(P));var re=(N?" message:"+xs(N):Sn)+(P?" props:"+xs(G):Sn);B[Za]+=re}return p.dataType="MessageData",p}();function Cd(p,y){return(p||{})[vs]||new xf(y)}var xf=function(){function p(y){this.identifier="DiagnosticLogger",this.queue=[];var N=0,R={},P,B,G,re,ue;_o(p,this,function(ce){ue=We(y||{}),ce.consoleLoggingLevel=function(){return P},ce[fc]=function(we,Be,Ne,Qe,Pe){Pe===void 0&&(Pe=!1);var Re=new Ko(Be,Ne,Pe,Qe);if(re)throw yr(Re);var Ge=Nd[we]||Ol;if(Tt(Re[Za]))De("throw"+(we===1?"Critical":"Warning"),Re);else{if(Pe){var Vt=+Re[Tp];!R[Vt]&&P>=we&&(ce[Ge](Re[Za]),R[Vt]=!0)}else P>=we&&ce[Ge](Re[Za]);ke(we,Re)}},ce.debugToConsole=function(we){Wo("debug",we),De("warning",we)},ce[cc]=function(we){Wo("warn",we),De("warning",we)},ce.errorToConsole=function(we){Wo("error",we),De("error",we)},ce.resetInternalMessageCount=function(){N=0,R={}},ce[zr]=ke,ce[On]=function(we){ue&&ue.rm(),ue=null};function ke(we,Be){if(!Ke()){var Ne=!0,Qe=Yp+Be[Tp];if(R[Qe]?Ne=!1:R[Qe]=!0,Ne&&(we<=B&&(ce.queue[pa](Be),N++,De(we===1?"error":"warn",Be)),N===G)){var Pe="Internal events throttle limit per PageView reached for this app.",Re=new Ko(23,Pe,!1);ce.queue[pa](Re),we===1?ce.errorToConsole(Pe):ce[cc](Pe)}}}function We(we){return Rl(ju(we,$p,ce).cfg,function(Be){var Ne=Be.cfg;P=Ne[vf],B=Ne.loggingLevelTelemetry,G=Ne.maxMessageLimit,re=Ne.enableDebug})}function Ke(){return N>=G}function De(we,Be){var Ne=Vo(y||{});Ne&&Ne[Zs]&&Ne[Zs](we,Be)}})}return p.__ieDyn=1,p}();function Ic(p){return p||new xf}function qi(p,y,N,R,P,B){B===void 0&&(B=!1),Ic(p)[fc](y,N,R,P,B)}function Ds(p,y){Ic(p)[cc](y)}var xd="ctx",ta="ParentContextKey",lu="ChildrenContextKey",Df=function(){function p(y,N,R){var P=this;if(P.start=Va(),P[Ev]=y,P[ku]=R,P[Lu]=function(){return!1},Xt(N)){var B;Jr(P,"payload",{g:function(){return!B&&Xt(N)&&(B=N(),N=null),B}})}P[Qr]=function(G){return G?G===p[ta]||G===p[lu]?P[G]:(P[xd]||{})[G]:null},P[Uo]=function(G,re){if(G)if(G===p[ta])P[G]||(P[Lu]=function(){return!0}),P[G]=re;else if(G===p[lu])P[G]=re;else{var ue=P[xd]=P[xd]||{};ue[G]=re}},P[Wr]=function(){var G=0,re=P[Qr](p[lu]);if(Kt(re))for(var ue=0;ue<re[un];ue++){var ce=re[ue];ce&&(G+=ce[dl])}P[dl]=Va()-P.start,P.exTime=P[dl]-G,P[Wr]=function(){}}}return p.ParentContextKey="parent",p.ChildrenContextKey="childEvts",p}(),Rs="CoreUtils.doPerf";function Mi(p,y,N,R,P){if(p){var B=p;if(B[Ua]&&(B=B[Ua]()),B){var G=void 0,re=B[Qr](Rs);try{if(G=B.create(y(),R,P),G){if(re&&G[Uo]&&(G[Uo](Df[ta],re),re[Qr]&&re[Uo])){var ue=re[Qr](Df[lu]);ue||(ue=[],re[Uo](Df[lu],ue)),ue[pa](G)}return B[Uo](Rs,G),N(G)}}catch(ce){G&&G[Uo]&&G[Uo]("exception",ce)}finally{G&&B.fire(G),B[Uo](Rs,re)}}}return N()}var Yu=bc("plugin");function Dd(p){return Yu.get(p,"state",{},!0)}var Nc="TelemetryPluginChain",$u="_hasRun",xv="_getTelCtx",Mm=0;function Dv(p,y,N){for(;p;){if(p[Ep]()===N)return p;p=p[hs]()}return Rd([N],y.config||{},y)}function Cc(p,y,N,R){var P=null,B=[];y||(y=ju({},null,N[vs])),R!==null&&(P=R?Dv(p,N,R):p);var G={_next:ue,ctx:{core:function(){return N},diagLog:function(){return Cd(N,y.cfg)},getCfg:function(){return y.cfg},getExtCfg:ke,getConfig:We,hasNext:function(){return!!P},getNext:function(){return P},setNext:function(De){P=De},iterate:Ke,onComplete:re}};function re(De,we){for(var Be=[],Ne=2;Ne<arguments.length;Ne++)Be[Ne-2]=arguments[Ne];De&&B[pa]({func:De,self:Tt(we)?G.ctx:we,args:Be})}function ue(){var De=P;if(P=De?De[hs]():null,!De){var we=B;we&&we[un]>0&&(Tr(we,function(Be){try{Be.func.call(Be.self,Be.args)}catch(Ne){qi(N[vs],2,73,"Unexpected Exception during onComplete - "+yr(Ne))}}),B=[])}return De}function ce(De,we){var Be=null,Ne=y.cfg;if(Ne&&De){var Qe=Ne[wl];!Qe&&we&&(Qe={}),Ne[wl]=Qe,Qe=y.ref(Ne,wl),Qe&&(Be=Qe[De],!Be&&we&&(Be={}),Qe[De]=Be,Be=y.ref(Qe,De))}return Be}function ke(De,we){var Be=ce(De,!0);return we&&Mr(we,function(Ne,Qe){if(st(Be[Ne])){var Pe=y.cfg[Ne];(Pe||!st(Pe))&&(Be[Ne]=Pe)}Ed(y,Be,Ne,Qe)}),y[ms](Be,we)}function We(De,we,Be){Be===void 0&&(Be=!1);var Ne,Qe=ce(De,!1),Pe=y.cfg;return Qe&&(Qe[we]||!st(Qe[we]))?Ne=Qe[we]:(Pe[we]||!st(Pe[we]))&&(Ne=Pe[we]),Ne||!st(Ne)?Ne:Be}function Ke(De){for(var we;we=G._next();){var Be=we[Ep]();Be&&De(Be)}}return G}function Rf(p,y,N,R){var P=ju(y),B=Cc(p,P,N,R),G=B.ctx;function re(ce){var ke=B._next();return ke&&ke[ys](ce,G),!ke}function ue(ce,ke){return ce===void 0&&(ce=null),Kt(ce)&&(ce=Rd(ce,P.cfg,N,ke)),Rf(ce||G[hs](),P.cfg,N,ke)}return G[Lo]=re,G[pl]=ue,G}function Fm(p,y,N){var R=ju(y.config),P=Cc(p,R,y,N),B=P.ctx;function G(ue){var ce=P._next();return ce&&ce[On](B,ue),!ce}function re(ue,ce){return ue===void 0&&(ue=null),Kt(ue)&&(ue=Rd(ue,R.cfg,y,ce)),Fm(ue||B[hs](),y,ce)}return B[Lo]=G,B[pl]=re,B}function yh(p,y,N){var R=ju(y.config),P=Cc(p,R,y,N),B=P.ctx;function G(ue){return B.iterate(function(ce){Xt(ce[Mo])&&ce[Mo](B,ue)})}function re(ue,ce){return ue===void 0&&(ue=null),Kt(ue)&&(ue=Rd(ue,R.cfg,y,ce)),yh(ue||B[hs](),y,ce)}return B[Lo]=G,B[pl]=re,B}function Rd(p,y,N,R){var P=null,B=!R;if(Kt(p)&&p[un]>0){var G=null;Tr(p,function(re){if(!B&&R===re&&(B=!0),B&&re&&Xt(re[ys])){var ue=Bp(re,y,N);P||(P=ue),G&&G._setNext(ue),G=ue}})}return R&&!P?Rd([R],y,N):P}function Bp(p,y,N){var R=null,P=Xt(p[ys]),B=Xt(p[Xa]),G;p?G=p[Sp]+"-"+p[Ip]+"-"+Mm++:G="Unknown-0-"+Mm++;var re={getPlugin:function(){return p},getNext:function(){return R},processTelemetry:ke,unload:We,update:Ke,_id:G,_setNext:function(De){R=De}};function ue(){var De;return p&&Xt(p[xv])&&(De=p[xv]()),De||(De=Rf(re,y,N)),De}function ce(De,we,Be,Ne,Qe){var Pe=!1,Re=p?p[Sp]:Nc,Ge=De[$u];return Ge||(Ge=De[$u]={}),De.setNext(R),p&&Mi(De[_i](),function(){return Re+":"+Be},function(){Ge[G]=!0;try{var Vt=R?R._id:Sn;Vt&&(Ge[Vt]=!1),Pe=we(De)}catch(hr){var Qt=R?Ge[R._id]:!0;Qt&&(Pe=!0),(!R||!Qt)&&qi(De[Zs](),1,73,"Plugin ["+Re+"] failed during "+Be+" - "+yr(hr)+", run flags: "+yr(Ge))}},Ne,Qe),Pe}function ke(De,we){we=we||ue();function Be(Ne){if(!p||!P)return!1;var Qe=Dd(p);return Qe[ml]||Qe[no]?!1:(B&&p[Xa](R),p[ys](De,Ne),!0)}ce(we,Be,"processTelemetry",function(){return{item:De}},!De.sync)||we[Lo](De)}function We(De,we){function Be(){var Ne=!1;if(p){var Qe=Dd(p),Pe=p[_i]||Qe[_i];p&&(!Pe||Pe===De.core())&&!Qe[ml]&&(Qe[_i]=null,Qe[ml]=!0,Qe[pf]=!1,p[ml]&&p[ml](De,we)===!0&&(Ne=!0))}return Ne}ce(De,Be,"unload",function(){},we[ku])||De[Lo](we)}function Ke(De,we){function Be(){var Ne=!1;if(p){var Qe=Dd(p),Pe=p[_i]||Qe[_i];p&&(!Pe||Pe===De.core())&&!Qe[ml]&&p[Mo]&&p[Mo](De,we)===!0&&(Ne=!0)}return Ne}ce(De,Be,"update",function(){},!1)||De[Lo](we)}return Jt(re)}function xc(){var p=[];function y(R){R&&p[pa](R)}function N(R,P){Tr(p,function(B){try{B(R,P)}catch(G){qi(R[Zs](),2,73,"Unexpected error calling unload handler - "+yr(G))}}),p=[]}return{add:y,run:N}}function Bu(){var p=[];function y(R){var P=p;p=[],Tr(P,function(B){try{(B.rm||B.remove).call(B)}catch(G){qi(R,2,73,"Unloading:"+yr(G))}})}function N(R){R&&ad(p,R)}return{run:y,add:N}}var qp,Os="getPlugin",Od=(qp={},qp[wl]={isVal:ws,v:{}},qp),Of=function(){function p(){var y=this,N,R,P,B,G;ce(),_o(p,y,function(ke){ke[dd]=function(We,Ke,De,we){ue(We,Ke,we),N=!0},ke[ml]=function(We,Ke){var De,we=ke[_i];if(!we||We&&we!==We[_i]())return;var Be,Ne=!1,Qe=We||Fm(null,we,P&&P[Os]?P[Os]():P),Pe=Ke||(De={reason:0},De[ku]=!1,De);function Re(){Ne||(Ne=!0,B.run(Qe,Ke),G.run(Qe[Zs]()),Be===!0&&Qe[Lo](Pe),ce())}return!ke[fr]||ke[fr](Qe,Pe,Re)!==!0?Re():Be=!0,Be},ke[Mo]=function(We,Ke){var De=ke[_i];if(!De||We&&De!==We[_i]())return;var we,Be=!1,Ne=We||yh(null,De,P&&P[Os]?P[Os]():P),Qe=Ke||{reason:0};function Pe(){Be||(Be=!0,ue(Ne.getCfg(),Ne.core(),Ne[hs]()))}return!ke._doUpdate||ke._doUpdate(Ne,Qe,Pe)!==!0?Pe():we=!0,we},_d(ke,"_addUnloadCb",function(){return B},"add"),_d(ke,"_addHook",function(){return G},"add"),Jr(ke,"_unloadHooks",{g:function(){return G}})}),y[Zs]=function(ke){return re(ke)[Zs]()},y[pf]=function(){return N},y.setInitialized=function(ke){N=ke},y[Xa]=function(ke){P=ke},y[Lo]=function(ke,We){We?We[Lo](ke):P&&Xt(P[ys])&&P[ys](ke,null)},y._getTelCtx=re;function re(ke){ke===void 0&&(ke=null);var We=ke;if(!We){var Ke=R||Rf(null,{},y[_i]);P&&P[Os]?We=Ke[pl](null,P[Os]):We=Ke[pl](null,P)}return We}function ue(ke,We,Ke){ju(ke,Od,Cd(We)),!Ke&&We&&(Ke=We[wo]()[hs]());var De=P;P&&P[Os]&&(De=P[Os]()),y[_i]=We,R=Rf(Ke,ke,We,De)}function ce(){N=!1,y[_i]=null,R=null,P=null,G=Bu(),B=xc()}}return p.__ieDyn=1,p}(),As="",kl="NoResponseBody",Rv="&"+kl+"=true",Dc="POST",wh=function(){function p(){var y=0,N,R,P,B,G,re,ue,ce,ke,We,Ke,De,we,Be;_o(p,this,function(Ne,Qe){var Pe=!0;Gi(),Ne[dd]=function(at,gt){P=gt,R&&qi(P,1,28,"Sender is already initialized"),Ne.SetConfig(at),R=!0},Ne._getDbgPlgTargets=function(){return[R,B,re,N]},Ne.SetConfig=function(at){try{if(G=at.senderOnCompleteCallBack||{},re=!!at.disableCredentials,ue=at.fetchCredentials,B=!!at.isOneDs,N=!!at.enableSendPromise,ke=!!at.disableXhr,We=!!at.disableBeacon,Ke=!!at.disableBeaconSync,Be=at.timeWrapper,we=!!at.addNoResponse,De=!!at.disableFetchKeepAlive,ce={sendPOST:an},B||(Pe=!1),re){var gt=Rp();gt&&gt.protocol&&gt.protocol[Ma]()==="file:"&&(Pe=!1)}return!0}catch{}return!1},Ne.getSyncFetchPayload=function(){return y},Ne.getSenderInst=function(at,gt){return at&&at[un]?Qt(at,gt):null},Ne.getFallbackInst=function(){return ce},Ne[fr]=function(at,gt){Gi()};function Re(at,gt){hr(gt,200,{},at)}function Ge(at,gt){qi(P,2,26,"Failed to send telemetry.",{message:at}),hr(gt,400,{})}function Vt(at){Ge("No endpoint url is provided for the batch",at)}function Qt(at,gt){for(var xr,br=0,xt=null,Yr=0;xt==null&&Yr<at[un];)br=at[Yr],!ke&&br===1?Cl()?xt=Kr:ga()&&(xt=an):br===2&&yc(gt)&&(!gt||!De)?xt=Qn:br===3&&bd()&&(gt?!Ke:!We)&&(xt=pn),Yr++;return xt?(xr={_transport:br,_isSync:gt},xr[md]=xt,xr):null}function hr(at,gt,xr,br){try{at&&at(gt,xr,br)}catch{}}function Pr(at,gt){var xr=Ri(),br=at[jo];if(!br)return Vt(gt),!0;br=at[jo]+(we?Rv:As);var xt=at[eo],Yr=B?xt:new Blob([xt],{type:"text/plain;charset=UTF-8"}),Et=xr.sendBeacon(br,Yr);return Et}function pn(at,gt,xr){var br=at[eo];try{if(br)if(Pr(at,gt))Re(As,gt);else{var xt=G&&G.beaconOnRetry;xt&&Xt(xt)?xt(at,gt,Pr):(ce&&ce[md](at,gt,!0),qi(P,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Yr){B&&Ds(P,"Failed to send telemetry using sendBeacon API. Ex:"+yr(Yr)),hr(gt,B?0:400,{},As)}}function an(at,gt,xr){var br,xt,Yr,Et=at[Yo]||{};!xr&&N&&(br=ro(function(jn,ya){xt=jn,Yr=ya})),B&&xr&&at.disableXhrSync&&(xr=!1);var In=at[jo];if(!In){Vt(gt),xt&&xt(!1);return}var _t=gh(Dc,In,Pe,!0,xr,at[Zn]);B||_t[So]("Content-type","application/json"),Tr(xn(Et),function(jn){_t[So](jn,Et[jn])}),_t.onreadystatechange=function(){B||(Un(_t),_t.readyState===4&&xt&&xt(!0))},_t.onload=function(){B&&Un(_t)};function Un(jn){var ya=G&&G.xhrOnComplete,Qu=ya&&Xt(ya);if(Qu)ya(jn,gt,at);else{var js=ha(jn);hr(gt,jn[Fo],Tl(jn,B),js)}}return _t.onerror=function(jn){hr(gt,B?_t[Fo]:400,Tl(_t,B),B?As:Tv(_t)),Yr&&Yr(jn)},_t.ontimeout=function(){hr(gt,B?_t[Fo]:500,Tl(_t,B),B?As:Tv(_t)),xt&&xt(!1)},_t.send(at[eo]),br}function Qn(at,gt,xr){var br,xt=at[jo],Yr=at[eo],Et=B?Yr:new Blob([Yr],{type:"application/json"}),In,_t,Un,jn=new Headers,ya=Yr[un],Qu=!1,js=!1,am=at[Yo]||{},gu=(br={method:Dc,body:Et},br[Cf]=!0,br);at.headers&&xn(at.headers)[un]>0&&(Tr(xn(am),function(An){jn.append(An,am[An])}),gu[Yo]=jn),ue?gu.credentials=ue:Pe&&B&&(gu.credentials="include"),xr&&(gu.keepalive=!0,y+=ya,B?at._sendReason===2&&(Qu=!0,we&&(xt+=Rv)):Qu=!0);var es=new Request(xt,gu);try{es[Cf]=!0}catch{}if(!xr&&N&&(In=ro(function(An,ai){_t=An,Un=ai})),!xt){Vt(gt),_t&&_t(!1);return}function Hl(An){hr(gt,B?0:400,{},B?As:An)}function bi(An,ai,wa){var Gl=An[Fo],Xd=G.fetchOnComplete;Xd&&Xt(Xd)?Xd(An,gt,wa||As,ai):hr(gt,Gl,{},wa||As)}try{hl(fetch(B?xt:es,B?gu:null),function(An){if(xr&&(y-=ya,ya=0),!js)if(js=!0,An.rejected)Hl(An.reason&&An.reason[Za]),Un&&Un(An.reason);else{var ai=An[mf];try{!B&&!ai.ok?(Hl(ai.statusText),_t&&_t(!1)):B&&!ai.body?(bi(ai,null,As),_t&&_t(!0)):hl(ai.text(),function(wa){bi(ai,at,wa[mf]),_t&&_t(!0)})}catch(wa){Hl(yr(wa)),Un&&Un(wa)}}})}catch(An){js||(Hl(yr(An)),Un&&Un(An))}return Qu&&!js&&(js=!0,hr(gt,200,{}),_t&&_t(!0)),B&&!js&&at[Zn]>0&&Be&&Be.set(function(){js||(js=!0,hr(gt,500,{}),_t&&_t(!0))},at[Zn]),In}function Kr(at,gt,xr){var br=Oa(),xt=new XDomainRequest,Yr=at[eo];xt.onload=function(){var jn=ha(xt),ya=G&&G.xdrOnComplete;ya&&Xt(ya)?ya(xt,gt,at):hr(gt,200,{},jn)},xt.onerror=function(){hr(gt,400,{},B?As:vc(xt))},xt.ontimeout=function(){hr(gt,500,{})},xt.onprogress=function(){};var Et=br&&br.location&&br.location[pd]||"",In=at[jo];if(!In){Vt(gt);return}if(!B&&In.lastIndexOf(Et,0)!==0){var _t="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";qi(P,2,40,". "+_t),Ge(_t,gt);return}var Un=B?In:In[ma](/^(https?:)/,"");xt.open(Dc,Un),at[Zn]&&(xt[Zn]=at[Zn]),xt.send(Yr),B&&xr?Be&&Be.set(function(){xt.send(Yr)},0):xt.send(Yr)}function Gi(){y=0,R=!1,N=!1,P=null,B=null,G=null,re=null,ue=null,ce=null,ke=!1,We=!1,Ke=!1,De=!1,we=!1,Be=null}})}return p.__ieDyn=1,p}(),Ov="on",Af="attachEvent",Um="addEventListener",Av="detachEvent",qu="removeEventListener",No="events",cu="visibilitychange",Hu="pagehide",Rc="pageshow",Oc="unload",Ad="beforeunload",kf=di("aiEvtPageHide"),Jo=di("aiEvtPageShow"),Pl=/\.[\.]+/g,kv=/[\.]+$/,Pv=1,Hp=bc("events"),Gp=/^([^.]*)(?:\.(.+)|)/;function Zo(p){return p&&p[ma]?p[ma](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Sn):p}function Gu(p,y){var N;if(y){var R=Sn;Kt(y)?(R=Sn,Tr(y,function(B){B=Zo(B),B&&(B[0]!=="."&&(B="."+B),R+=B)})):R=Zo(y),R&&(R[0]!=="."&&(R="."+R),p=(p||Sn)+R)}var P=Gp.exec(p||Sn)||[];return N={},N[mt]=P[1],N.ns=(P[2]||Sn).replace(Pl,".").replace(kv,Sn)[Pu](".").sort().join("."),N}function Ac(p,y,N){N===void 0&&(N=!0);var R=Hp.get(p,No,{},N),P=R[y];return P||(P=R[y]=[]),P}function Lv(p,y,N,R){p&&y&&y[mt]&&(p[qu]?p[qu](y[mt],N,R):p[Av]&&p[Av](Ov+y[mt],N))}function Vp(p,y,N,R){var P=!1;return p&&y&&y[mt]&&N&&(p[Um]?(p[Um](y[mt],N,R),P=!0):p[Af]&&(p[Af](Ov+y[mt],N),P=!0)),P}function Mv(p,y,N,R){for(var P=y[un];P--;){var B=y[P];B&&(!N.ns||N.ns===B.evtName.ns)&&(!R||R(B))&&(Lv(p,B.evtName,B[vl],B.capture),y[bp](P,1))}}function jm(p,y,N){if(y[mt])Mv(p,Ac(p,y[mt]),y,N);else{var R=Hp.get(p,No,{});Mr(R,function(P,B){Mv(p,B,y,N)}),xn(R)[un]===0&&Hp.kill(p,No)}}function zp(p,y){var N;return y?(Kt(y)?N=[p].concat(y):N=[p,y],N=Gu("xx",N).ns[Pu](".")):N=p,N}function Ll(p,y,N,R,P){var B;P===void 0&&(P=!1);var G=!1;if(p)try{var re=Gu(y,R);if(G=Vp(p,re,N,P),G&&Hp.accept(p)){var ue=(B={guid:Pv++,evtName:re},B[vl]=N,B.capture=P,B);Ac(p,re.type)[pa](ue)}}catch{}return G}function Co(p,y,N,R,P){if(P===void 0&&(P=!1),p)try{var B=Gu(y,R),G=!1;jm(p,B,function(re){return B.ns&&!N||re[vl]===N?(G=!0,!0):!1}),G||Lv(p,B,N,P)}catch{}}function kd(p,y,N){var R=!1,P=Oa();P&&(R=Ll(P,p,y,N),R=Ll(P.body,p,y,N)||R);var B=ci();return B&&(R=Ll(B,p,y,N)||R),R}function kc(p,y,N){var R=Oa();R&&(Co(R,p,y,N),Co(R.body,p,y,N));var P=ci();P&&Co(P,p,y,N)}function Xo(p,y,N,R){var P=!1;return y&&p&&p[un]>0&&Tr(p,function(B){B&&(!N||fs(N,B)===-1)&&(P=kd(B,y,R)||P)}),P}function sg(p,y,N,R){var P=!1;return y&&p&&Kt(p)&&(P=Xo(p,y,N,R),!P&&N&&N[un]>0&&(P=Xo(p,y,null,R))),P}function Wp(p,y,N){p&&Kt(p)&&Tr(p,function(R){R&&kc(R,y,N)})}function bh(p,y,N){return sg([Ad,Oc,Hu],p,y,N)}function ug(p,y){Wp([Ad,Oc,Hu],p,y)}function Hi(p,y,N){function R(G){var re=ci();p&&re&&re.visibilityState==="hidden"&&p(G)}var P=zp(kf,N),B=Xo([Hu],p,y,P);return(!y||fs(y,cu)===-1)&&(B=Xo([cu],R,y,P)||B),!B&&y&&(B=Hi(p,null,N)),B}function Pd(p,y){var N=zp(kf,y);Wp([Hu],p,N),Wp([cu],null,N)}function Ld(p,y,N){function R(G){var re=ci();p&&re&&re.visibilityState==="visible"&&p(G)}var P=zp(Jo,N),B=Xo([Rc],p,y,P);return B=Xo([cu],R,y,P)||B,!B&&y&&(B=Ld(p,null,N)),B}function Fv(p,y){var N=zp(Jo,y);Wp([Rc],p,N),Wp([cu],null,N)}var Pc="",_a="timings",xo="value",Md="kind",Vu="length",Ml="processTelemetryStart",ks,Ym="4.3.5",Uv="1DS-Web-JS-"+Ym,ht=b.hasOwnProperty,zu=(ks={},ks[0]=0,ks[2]=6,ks[1]=1,ks[3]=7,ks[4098]=6,ks[4097]=1,ks[4099]=7,ks);function fu(p){return!(p===Pc||st(p))}function Pf(p){if(p){var y=vp(p,"-");if(y>-1)return ri(p,y)}return Pc}function jv(p,y,N){if(!y&&!fu(y)||typeof p!="string")return null;var R=typeof y;if(R==="string"||R==="number"||R==="boolean"||Kt(y))y={value:y};else if(R==="object"&&!ht.call(y,"value"))y={value:N?JSON.stringify(y):y};else if(st(y[xo])||y[xo]===Pc||!Su(y[xo])&&!cr(y[xo])&&!Ci(y[xo])&&!Kt(y[xo]))return null;if(Kt(y[xo])&&!Lc(y[xo]))return null;if(!st(y[Md])){if(Kt(y[xo])||!Yv(y[Md]))return null;y[xo]=y[xo].toString()}return y}function Fl(p,y,N){var R=-1;if(!Tt(p))if(y>0&&(y===32?R=8192:y<=13&&(R=y<<5)),Kp(N))R===-1&&(R=0),R|=N;else{var P=zu[jl(p)]||-1;R!==-1&&P!==-1?R|=P:P===6&&(R=P)}return R}function Fd(p,y,N,R,P){var B={},G=!1,re=0,ue=arguments[Vu],ce=arguments;for(Ci(ce[0])&&(G=ce[0],re++);re<ue;re++){var p=ce[re];Mr(p,function(We,Ke){G&&Ke&&qa(Ke)?Kt(Ke)?(B[We]=B[We]||[],Tr(Ke,function(De,we){De&&qa(De)?B[We][we]=Fd(!0,B[We][we],De):B[We][we]=De})):B[We]=Fd(!0,B[We],Ke):B[We]=Ke})}return B}var Ps=mp;function Yv(p){return p===0||p>0&&p<=13||p===32}function Kp(p){return p>=0&&p<=9}function Lc(p){return p[Vu]>0}function Ul(p,y){var N=p;N[_a]=N[_a]||{},N[_a][Ml]=N[_a][Ml]||{},N[_a][Ml][y]=Ps()}function jl(p){var y=0;if(p!=null){var N=typeof p;N==="string"?y=1:N==="number"?y=2:N==="boolean"?y=3:N===a&&(y=4,Kt(p)?(y=4096,p[Vu]>0&&(y|=jl(p[0]))):ht.call(p,"value")&&(y=8192|jl(p[xo])))}return y}function $m(){return!!wn("chrome")}function nn(p){return p>0}var Ls="",Bm="drop",qm="send",du="requeue",Jp="rspFail",Hm="oth",Gm="no-cache, no-store",Ud="application/x-json-stream",jd="cache-control",Mc="content-type",Yl="kill-tokens",Zp="kill-duration",Fc="time-delta-millis",Vm="client-version",Do="client-id",zm="time-delta-to-apply-millis",Yd="upload-time",$v="apikey",Ms="AuthMsaDeviceTicket",Sh="WebAuthToken",Wu="AuthXToken",Wm="NoResponseBody",Uc="msfpc",Bv="trace",Qo="user",Fs="allowRequestSending",Gn="firstRequestSent",Lf="shouldAddClockSkewHeaders",jc="getClockSkewHeaderValue",$d="setClockSkew",dr="length",ao="concat",oo="iKey",Fi="count",Yc="events",En="push",$c="split",pu="splice",Xp="toLowerCase",mu="hdrs",Km="useHdrs",Ku="initialize",Jm="setTimeoutOverride",Zm="clearTimeoutOverride",d="payloadPreprocessor",g="overrideEndpointUrl",S="avoidOptions",D="disableEventTimings",j="stringifyObjects",J="enableCompoundKey",X="disableXhrSync",oe="disableFetchKeepAlive",ve="addNoResponse",ye="excludeCsMetaData",Xe="useSendBeacon",Mt="fetchCredentials",sr="alwaysUseXhrOverride",pr="unloadTransports",ft="serializeOfflineEvt",ur="getOfflineRequestDetails",Yt="createPayload",Ar="createOneDSPayload",kr="payloadBlob",At="headers",Mn="_thePayload",Mf="urlString",Fn="batches",so="sendType",Bd="addHeader",Xm="canSendRequest",qd="sendQueuedRequests",Hd="isCompletelyIdle",Qp="setUnloading",qv="isTenantKilled",Fe="resume",Nt="sendSynchronousBatch",Gt="_transport",tn="getWParam",_n="isBeacon",Tn="timings",wi="isTeardown",Ju="isSync",Us="data",Zu="timeout",Bc="_sendReason",Hv="setKillSwitchTenants",em="_backOffTransmission",Ff="identifier",$l="disableOptimizeObj",Y_="ignoreMc1Ms0CookieProcessing",lg="eventsLimitInMem",Zg="autoFlushEventsLimit",Eh="disableAutoBatchFlushLimit",$_="overrideInstrumentationKey",Uf="disableTelemetry",Qm="baseData",Gv="sendAttempt",jf="latency",ev="sync";function cg(p){var y=(p.ext||{}).intweb;return y&&fu(y[Uc])?y[Uc]:null}function Xg(p){for(var y=null,N=0;y===null&&N<p[dr];N++)y=cg(p[N]);return y}var Gd=function(){function p(y,N){var R=N?[][ao](N):[],P=this,B=Xg(R);P[oo]=function(){return y},P.Msfpc=function(){return B||Ls},P[Fi]=function(){return R[dr]},P[Yc]=function(){return R},P.addEvent=function(G){return G?(R[En](G),B||(B=cg(G)),!0):!1},P[$c]=function(G,re){var ue;if(G<R[dr]){var ce=R[dr]-G;st(re)||(ce=re<ce?re:ce),ue=R[pu](G,ce),B=Xg(R)}return new p(y,ue)}}return p.create=function(y,N){return new p(y,N)},p}(),Qg=function(){function p(){var y=!0,N=!0,R=!0,P="use-collector-delta",B=!1;_o(p,this,function(G){G[Fs]=function(){return y},G[Gn]=function(){R&&(R=!1,B||(y=!1))},G[Lf]=function(){return N},G[jc]=function(){return P},G[$d]=function(re){B||(re?(P=re,N=!0,B=!0):N=!1,y=!0)}})}return p.__ieDyn=1,p}(),B_=1e3,fg=function(){function p(){var y={};function N(R){var P=[];return R&&Tr(R,function(B){P[En](za(B))}),P}_o(p,this,function(R){R[Hv]=function(P,B){if(P&&B)try{var G=N(P[$c](","));if(B==="this-request-only")return G;for(var re=parseInt(B,10)*B_,ue=0;ue<G[dr];++ue)y[G[ue]]=Va()+re}catch{return[]}return[]},R[qv]=function(P){var B=y,G=za(P);return B[G]!==void 0&&B[G]>Va()?!0:(delete B[G],!1)}})}return p.__ieDyn=1,p}(),Vv=.8,dg=1.2,Th=3e3,tv=6e5;function Vd(p){return!(p>=300&&p<500&&p!=429||p==501||p==505)}function pg(p){var y=0,N=Th*Vv,R=Th*dg,P=Math.floor(Math.random()*(R-N))+N;return y=Math.pow(2,p)*P,Math.min(y,tv)}var zv=20,jr=3984588,vu=65e3,zd=2e6,rv=Math.min(zd,vu),nv="metadata",Wv="f",Yf=/\./,tm=function(){function p(y,N,R,P,B,G){var re="data",ue="baseData",ce="ext",ke=!!P,We=!0,Ke=N,De={},we=!!G,Be=B||Fl;_o(p,this,function(Ne){Ne.createPayload=function(Re,Ge,Vt,Qt,hr,Pr){return{apiKeys:[],payloadBlob:Ls,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:Re,isTeardown:Ge,isSync:Vt,isBeacon:Qt,sendType:Pr,sendReason:hr}},Ne.appendPayload=function(Re,Ge,Vt){var Qt=Re&&Ge&&!Re.overflow;return Qt&&Mi(y,function(){return"Serializer:appendPayload"},function(){for(var hr=Ge.events(),Pr=Re.payloadBlob,pn=Re.numEvents,an=!1,Qn=[],Kr=[],Gi=Re.isBeacon,at=Gi?vu:jr,gt=Gi?rv:zd,xr=0,br=0;xr<hr.length;){var xt=hr[xr];if(xt){if(pn>=Vt){Re.overflow=Ge.split(xr);break}var Yr=Ne.getEventBlob(xt);if(Yr&&Yr.length<=gt){var Et=Yr.length,In=Pr.length;if(In+Et>at){Re.overflow=Ge.split(xr);break}Pr&&(Pr+=`
`),Pr+=Yr,br++,br>zv&&(Vs(Pr,0,1),br=0),an=!0,pn++}else Yr?Qn.push(xt):Kr.push(xt),hr.splice(xr,1),xr--}xr++}if(Qn.length>0&&Re.sizeExceed.push(Gd.create(Ge.iKey(),Qn)),Kr.length>0&&Re.failedEvts.push(Gd.create(Ge.iKey(),Kr)),an){Re.batches.push(Ge),Re.payloadBlob=Pr,Re.numEvents=pn;var _t=Ge.iKey();fs(Re.apiKeys,_t)===-1&&Re.apiKeys.push(_t)}},function(){return{payload:Re,theBatch:{iKey:Ge.iKey(),evts:Ge.events()},max:Vt}}),Qt},Ne.getEventBlob=function(Re){try{return Mi(y,function(){return"Serializer.getEventBlob"},function(){var Ge={};Ge.name=Re.name,Ge.time=Re.time,Ge.ver=Re.ver,Ge.iKey="o:"+Pf(Re.iKey);var Vt={},Qt;we||(Qt=function(an,Qn,Kr){e_(Be,Vt,an,Qn,Kr)});var hr=Re[ce];hr&&(Ge[ce]=Vt,Mr(hr,function(an,Qn){var Kr=Vt[an]={};Pe(Qn,Kr,"ext."+an,!0,null,null,!0)}));var Pr=Ge[re]={};Pr.baseType=Re.baseType;var pn=Pr[ue]={};return Pe(Re.baseData,pn,ue,!1,[ue],Qt,We),Pe(Re.data,Pr,re,!1,[],Qt,We),JSON.stringify(Ge)},function(){return{item:Re}})}catch{return null}};function Qe(Re,Ge){var Vt=De[Re];return Vt===void 0&&(Re.length>=7&&(Vt=Rn(Re,"ext.metadata")||Rn(Re,"ext.web")),De[Re]=Vt),Vt}function Pe(Re,Ge,Vt,Qt,hr,Pr,pn){Mr(Re,function(an,Qn){var Kr=null;if(Qn||fu(Qn)){var Gi=Vt,at=an,gt=hr,xr=Ge;if(ke&&!Qt&&Yf.test(an)){var br=an.split("."),xt=br.length;if(xt>1){gt&&(gt=gt.slice());for(var Yr=0;Yr<xt-1;Yr++){var Et=br[Yr];xr=xr[Et]=xr[Et]||{},Gi+="."+Et,gt&&gt.push(Et)}at=br[xt-1]}}var In=Qt&&Qe(Gi);if(!In&&Ke&&Ke.handleField(Gi,at)?Kr=Ke.value(Gi,at,Qn,R):Kr=jv(at,Qn,R),Kr){var _t=Kr.value;if(xr[at]=_t,Pr&&Pr(gt,at,Kr),pn&&typeof _t=="object"&&!Kt(_t)){var Un=gt;Un&&(Un=Un.slice(),Un.push(at)),Pe(Qn,_t,Gi+"."+at,Qt,Un,Pr,pn)}}}})}})}return p.__ieDyn=1,p}();function e_(p,y,N,R,P){if(P&&y){var B=p(P.value,P.kind,P.propertyType);if(B>-1){var G=y[nv];G||(G=y[nv]={f:{}});var re=G[Wv];if(re||(re=G[Wv]={}),N)for(var ue=0;ue<N.length;ue++){var ce=N[ue];re[ce]||(re[ce]={f:{}});var ke=re[ce][Wv];ke||(ke=re[ce][Wv]={}),re=ke}re=re[R]={},Kt(P.value)?re.a={t:B}:re.t=B}}}function rm(p,y){return{set:function(N,R){for(var P=[],B=2;B<arguments.length;B++)P[B-2]=arguments[B];return Nm([p,y],N,R,P)}}}var qc,Hc="sendAttempt",Gc="&"+Wm+"=true",Bl="?cors=true&"+Mc[Xp]()+"="+Ud,ql=(qc={},qc[1]=du,qc[100]=du,qc[200]="sent",qc[8004]=Bm,qc[8003]=Bm,qc),Xu={},$f={};function hu(p,y,N){Xu[p]=y,N!==!1&&($f[y]=p)}hu(Ms,Ms,!1),hu(Vm,Vm),hu(Do,"Client-Id"),hu($v,$v),hu(zm,zm),hu(Yd,Yd),hu(Wu,Wu);function Bf(p,y){var N=!1;if(p&&y){var R=xn(p);if(R&&R[dr]>0)for(var P=y[Xp](),B=0;B<R[dr];B++){var G=R[B];if(G&&Lr(y,G)&&G[Xp]()===P){N=!0;break}}}return N}function Wd(p,y,N,R){y&&N&&N[dr]>0&&(R&&Xu[y]?(p[mu][Xu[y]]=N,p[Km]=!0):p.url+="&"+y+"="+N)}function mg(p,y,N){for(var R=0;R<p[dr];R++)if(p[R].name===y){p[R].value=N;return}p[En]({name:y,value:N})}function Ih(p,y){for(var N=0;N<p[dr];N++)if(p[N].name===y){p[pu](N,1);return}}var qf=function(){function p(y,N,R,P){var B,G,re,ue,ce=!1,ke,We,Ke,De,we,Be,Ne,Qe,Pe,Re,Ge,Vt,Qt,hr,Pr,pn,an,Qn,Kr,Gi,at,gt,xr,br,xt,Yr,Et,In;_o(p,this,function(_t){js();var Un=!0;_t[Ku]=function(o,c,m){br||(we=c,Vt=c.getCookieMgr(),We=m,Ke=We.diagLog(),ad(Gi,Rl(o,function(w){var I,O=w.cfg,L=w.cfg.extensionConfig[m.identifier];xt=rm(L[Jm],L[Zm]),fu(O.anonCookieName)?mg(Ne,"anoncknm",O.anonCookieName):Ih(Ne,"anoncknm"),at=L[d],gt=L.payloadListener;var A=L.httpXHROverride,M=L[g]?L[g]:O.endpointUrl;B=M+Bl,hr=Tt(L[S])?!0:!L[S],Ge=!L[D];var Y=L.valueSanitizer,z=L[j],te=!!O[J];Tt(L[J])||(te=!!L[J]),Pr=L.xhrTimeout,pn=!!L[X],an=!!L[oe],Kr=L[ve]!==!1,Yr=!!L[ye],c.getPlugin("LocalStorage")&&(an=!0),ce=!ki(),Re=new tm(we,Y,z,te,Fl,Yr),st(L[Xe])||(ce=!!L[Xe]),L[Mt]&&(In=L[Mt]);var Q=ya();Et?Et.SetConfig(Q):(Et=new wh,Et[Ku](Q,Ke));var ae=A,ie=L[sr]?A:null,ge=L[sr]?A:null,Ee=[3,2];if(!A){Be=!1;var je=[];ki()?(je=[2,1],Ee=[2,1,3]):je=[1,2,3],je=bl(je,L.transports),A=jn(je,!1),A||Ds(Ke,"No available transport to send events"),ae=jn(je,!0)}ie||(Ee=bl(Ee,L[pr]),ie=jn(Ee,!0)),Qn=!Be&&(ce&&bd()||!an&&yc(!0)),De=(I={},I[0]=A,I[1]=ae||jn([1,2,3],!0),I[2]=ie||ae||jn([1],!0),I[3]=ge||jn([2,3],!0)||ae||jn([1],!0),I)})),br=!0)},_t.addResponseHandler=function(o){return xr[En](o),{rm:function(){var c=xr.indexOf(o);c>=0&&xr[pu](c,1)}}},_t[ft]=function(o){try{if(Re)return Re.getEventBlob(o)}catch{}return Ls},_t[ur]=function(){try{var o=Re&&Re[Yt](0,!1,!1,!1,1,0);return Gf(o,hr)}catch{}return null},_t[Ar]=function(o,c){try{var m=[];Tr(o,function(A){c&&(A=Ho(A));var M=Gd.create(A[oo],[A]);m[En](M)});for(var w=null;m[dr]>0&&Re;){var I=m.shift();I&&I[Fi]()>0&&(w=w||Re[Yt](0,!1,!1,!1,1,0),Re.appendPayload(w,I,y))}var O=Gf(w,hr),L={data:w[kr],urlString:O.url,headers:O[mu],timeout:Pr,disableXhrSync:pn,disableFetchKeepAlive:an};return hr&&(Bf(L[At],jd)||(L[At][jd]=Gm),Bf(L[At],Mc)||(L[At][Mc]=Ud)),L}catch{}return null};function jn(o,c){try{return Et&&Et.getSenderInst(o,c)}catch{}return null}_t._getDbgPlgTargets=function(){return[De[0],G,Re,De,ya(),B]};function ya(){try{var o={xdrOnComplete:Qu,fetchOnComplete:am,xhrOnComplete:gu,beaconOnRetry:Hl},c={enableSendPromise:!1,isOneDs:!0,disableCredentials:!Un,fetchCredentials:In,disableXhr:!1,disableBeacon:!ce,disableBeaconSync:!ce,disableFetchKeepAlive:an,timeWrapper:xt,addNoResponse:Kr,senderOnCompleteCallBack:o};return c}catch{}return null}function Qu(o,c,m){var w=ha(o);es(c,200,{},w),eh(w)}function js(){var o;B=null,G=new fg,re=!1,ue=new Qg,ce=!1,ke=0,We=null,Ke=null,De=null,we=null,Be=!0,Ne=[],Qe={},Pe=[],Re=null,Ge=!1,Vt=null,Qt=!1,hr=!1,Pr=o,pn=o,an=o,Qn=o,Kr=o,Gi=[],at=o,gt=o,xr=[],br=!1,xt=rm(),Yr=!1,Et=null}function am(o,c,m,w){var I=function(A,M,Y){es(c,A,M,Y),eh(Y)},O={},L=o[At];L&&L.forEach(function(A,M){O[M]=A}),I(o.status,O,m||Ls)}function gu(o,c,m){var w=ha(o);es(c,o.status,Tl(o,!0),w),eh(w)}function es(o,c,m,w){try{o(c,m,w)}catch(I){qi(Ke,2,518,yr(I))}}function Hl(o,c,m){var w=o,I=200,O=w[Mn],L=o[Mf]+(Kr?Gc:Ls);try{var A=Ri();if(O){var M=!!we.getPlugin("LocalStorage"),Y=[],z=[];Tr(O[Fn],function(te){if(Y&&te&&te[Fi]()>0)for(var Q=te[Yc](),ae=0;ae<Q[dr];ae++)if(A.sendBeacon(L,Re.getEventBlob(Q[ae])))z[En](te[ae]);else{Y[En](te[$c](ae));break}else Y[En](te[$c](0))}),z[dr]>0&&(O.sentEvts=z),M||_u(Y,8003,O[so],!0)}else I=0}catch(te){Ds(Ke,"Failed to send telemetry using sendBeacon API. Ex:"+yr(te)),I=0}finally{es(c,I,{},Ls)}}function bi(o){return o===2||o===3}function An(o){return Qt&&bi(o)&&(o=2),o}_t[Bd]=function(o,c){Qe[o]=c},_t.removeHeader=function(o){delete Qe[o]},_t[Xm]=function(){return ai()&&ue[Fs]()},_t[qd]=function(o,c){Tt(o)&&(o=0),Qt&&(o=An(o),c=2),Gl(Pe,o,0)&&Ys(wa(),0,!1,o,c||0)},_t[Hd]=function(){return!re&&ke===0&&Pe[dr]===0},_t[Qp]=function(o){Qt=o},_t.addBatch=function(o){if(o&&o[Fi]()>0){if(G.isTenantKilled(o[oo]()))return!1;Pe[En](o)}return!0},_t.teardown=function(){Pe[dr]>0&&Ys(wa(),0,!0,2,2),Tr(Gi,function(o){o&&o.rm&&o.rm()}),Gi=[]},_t.pause=function(){re=!0},_t[Fe]=function(){re=!1,_t[qd](0,4)},_t[Nt]=function(o,c,m){o&&o[Fi]()>0&&(st(c)&&(c=1),Qt&&(c=An(c),m=2),Ys([o],0,!1,c,m||0))};function ai(){return!re&&ke<N}function wa(){var o=Pe;return Pe=[],o}function Gl(o,c,m){var w=!1;return o&&o[dr]>0&&!re&&De[c]&&Re&&(w=c!==0||ai()&&(m>0||ue[Fs]())),w}function Xd(o){var c={};return o&&Tr(o,function(m,w){c[w]={iKey:m[oo](),evts:m[Yc]()}}),c}function Ys(o,c,m,w,I){if(!(!o||o[dr]===0)){if(re){_u(o,1,w);return}w=An(w);try{var O=o,L=w!==0;Mi(we,function(){return"HttpManager:_sendBatches"},function(A){A&&(o=o.slice(0));for(var M=[],Y=null,z=Ps(),te=De[w]||(L?De[1]:De[0]),Q=te&&te[Gt],ae=Qn&&(Qt||bi(w)||Q===3||te._isSync&&Q===2);Gl(o,w,c);){var ie=o.shift();ie&&ie[Fi]()>0&&(G.isTenantKilled(ie[oo]())?M[En](ie):(Y=Y||Re[Yt](c,m,L,ae,I,w),Re.appendPayload(Y,ie,y)?Y.overflow!==null&&(o=[Y.overflow][ao](o),Y.overflow=null,Qd(Y,z,Ps(),I),z=Ps(),Y=null):(Qd(Y,z,Ps(),I),z=Ps(),o=[ie][ao](o),Y=null)))}Y&&Qd(Y,z,Ps(),I),o[dr]>0&&(Pe=o[ao](Pe)),_u(M,8004,w)},function(){return{batches:Xd(O),retryCount:c,isTeardown:m,isSynchronous:L,sendReason:I,useSendBeacon:bi(w),sendType:w}},!L)}catch(A){qi(Ke,2,48,"Unexpected Exception sending batch: "+yr(A))}}}function Gf(o,c){var m={url:B,hdrs:{},useHdrs:!1};c?(m[mu]=Fd(m[mu],Qe),m.useHdrs=xn(m.hdrs)[dr]>0):Mr(Qe,function(A,M){$f[A]?Wd(m,$f[A],M,!1):(m[mu][A]=M,m[Km]=!0)}),Wd(m,Do,"NO_AUTH",c),Wd(m,Vm,Uv,c);var w=Ls;Tr(o.apiKeys,function(A){w[dr]>0&&(w+=","),w+=A}),Wd(m,$v,w,c),Wd(m,Yd,Va().toString(),c);var I=Qv(o);if(fu(I)&&(m.url+="&ext.intweb.msfpc="+I),ue[Lf]()&&Wd(m,zm,ue[jc](),c),we[tn]){var O=we[tn]();O>=0&&(m.url+="&w="+O)}for(var L=0;L<Ne[dr];L++)m.url+="&"+Ne[L].name+"="+Ne[L].value;return m}function Vf(o,c,m){o[c]=o[c]||{},o[c][We.identifier]=m}function Qd(o,c,m,w){if(o&&o.payloadBlob&&o.payloadBlob[dr]>0){var I=!!at,O=De[o.sendType];!bi(o[so])&&o[_n]&&o.sendReason===2&&(O=De[2]||De[3]||O);var L=hr;(o.isBeacon||O[Gt]===3)&&(L=!1);var A=Gf(o,L);L=L||A[Km];var M=Ps();Mi(we,function(){return"HttpManager:_doPayloadSend"},function(){for(var Y=0;Y<o.batches[dr];Y++)for(var z=o[Fn][Y],te=z[Yc](),Q=0;Q<te[dr];Q++){var ae=te[Q];if(Ge){var ie=ae[Tn]=ae[Tn]||{};Vf(ie,"sendEventStart",M),Vf(ie,"serializationStart",c),Vf(ie,"serializationCompleted",m)}ae[Hc]>0?ae[Hc]++:ae[Hc]=1}_u(o[Fn],1e3+(w||0),o[so],!0);var ge={data:o[kr],urlString:A.url,headers:A[mu],_thePayload:o,_sendReason:w,timeout:Pr,disableXhrSync:pn,disableFetchKeepAlive:an};L&&(Bf(ge[At],jd)||(ge[At][jd]=Gm),Bf(ge[At],Mc)||(ge[At][Mc]=Ud));var Ee=null;O&&(Ee=function(je){ue[Gn]();var et=function($t,Ir){Jv($t,Ir,o,w)},it=o[wi]||o[Ju];try{O.sendPOST(je,et,it),gt&&gt(ge,je,it,o[_n])}catch($t){Ds(Ke,"Unexpected exception sending payload. Ex:"+yr($t)),es(et,0,{})}}),Mi(we,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Ee)if(o[so]===0&&ke++,I&&!o.isBeacon&&O[Gt]!==3){var je={data:ge[Us],urlString:ge[Mf],headers:Fd({},ge[At]),timeout:ge[Zu],disableXhrSync:ge[X],disableFetchKeepAlive:ge[oe]},et=!1;Mi(we,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{at(je,function(it){et=!0,!Be&&!it[Mn]&&(it[Mn]=it[Mn]||ge[Mn],it[Bc]=it[Bc]||ge[Bc]),Ee(it)},o.isSync||o[wi])}catch{et||Ee(ge)}})}else Ee(ge)})},function(){return{thePayload:o,serializationStart:c,serializationCompleted:m,sendReason:w}},o[Ju])}o.sizeExceed&&o.sizeExceed[dr]>0&&_u(o.sizeExceed,8003,o[so]),o.failedEvts&&o.failedEvts[dr]>0&&_u(o.failedEvts,8002,o[so])}function Ch(o,c){Ge&&Tr(o,function(m){var w=m[Tn]=m[Tn]||{};Vf(w,"sendEventCompleted",c)})}function Jv(o,c,m,w){var I=9e3,O=null,L=!1,A=!1;try{var M=!0;if(typeof o!==l){if(c){ue[$d](c[Fc]);var Y=c[Zp]||c["kill-duration-seconds"];Tr(G[Hv](c[Yl],Y),function(te){Tr(m[Fn],function(Q){if(Q[oo]()===te){O=O||[];var ae=Q[$c](0);m.numEvents-=ae[Fi](),O[En](ae)}})})}if(o==200||o==204){I=200;return}(!Vd(o)||m.numEvents<=0)&&(M=!1),I=9e3+o%1e3}if(M){I=100;var z=m.retryCnt;m[so]===0&&(z<R?(L=!0,Xv(function(){m[so]===0&&ke--,Ys(m[Fn],z+1,m[wi],Qt?2:m[so],5)},Qt,pg(z))):(A=!0,Qt&&(I=8001)))}}finally{L||(ue[$d](),Zv(m,I,w,A)),_u(O,8004,m[so])}}function Zv(o,c,m,w){try{w&&We[em]();var I=o[Fn];c===200&&(I=o.sentEvts||o[Fn],!w&&!o[Ju]&&We._clearBackOff(),xh(I)),_u(I,c,o[so],!0)}finally{o[so]===0&&(ke--,m!==5&&_t.sendQueuedRequests(o[so],m))}}function xh(o){if(Ge){var c=Ps();Tr(o,function(m){m&&m[Fi]()>0&&Ch(m[Yc](),c)})}}function Xv(o,c,m){c?o():xt.set(o,m)}function Qv(o){for(var c=0;c<o.batches[dr];c++){var m=o[Fn][c].Msfpc();if(m)return encodeURIComponent(m)}return Ls}function eh(o){var c=xr;try{for(var m=0;m<c[dr];m++)try{c[m](o)}catch(I){qi(Ke,1,519,"Response handler failed: "+I)}if(o){var w=JSON.parse(o);fu(w.webResult)&&fu(w.webResult[Uc])&&Vt.set("MSFPC",w.webResult[Uc],365*86400)}}catch{}}function _u(o,c,m,w){if(o&&o[dr]>0&&P){var I=P[th(c)];if(I){var O=m!==0;Mi(we,function(){return"HttpManager:_sendBatchesNotification"},function(){Xv(function(){try{I.call(P,o,c,O,m)}catch(L){qi(Ke,1,74,"send request notification failed: "+L)}},w||O,0)},function(){return{batches:Xd(o),reason:c,isSync:O,sendSync:w,sendType:m}},!O)}}}function th(o){var c=ql[o];return fu(c)||(c=Hm,o>=9e3&&o<=9999?c=Jp:o>=8e3&&o<=8999?c=Bm:o>=1e3&&o<=1999&&(c=qm)),c}})}return p.__ieDyn=1,p}(),Hf=.25,Kd=500,nm=20,Nh=6,iv=2,Kv=4,vg=2,hg=1,gg=1e4,Xn="eventsDiscarded",Jd="",ii=void 0,q_=os({eventsLimitInMem:{isVal:nn,v:gg},immediateEventLimit:{isVal:nn,v:500},autoFlushEventsLimit:{isVal:nn,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:im,v:ii},overrideInstrumentationKey:ii,overrideEndpointUrl:ii,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:ii,clearTimeoutOverride:ii,payloadPreprocessor:ii,payloadListener:ii,disableEventTimings:ii,valueSanitizer:ii,stringifyObjects:ii,enableCompoundKey:ii,disableOptimizeObj:!1,fetchCredentials:ii,transports:ii,unloadTransports:ii,useSendBeacon:ii,disableFetchKeepAlive:ii,avoidOptions:!1,xhrTimeout:ii,disableXhrSync:ii,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:cr,v:Nh},maxUnloadEventRetryAttempts:{isVal:cr,v:iv},addNoResponse:ii,excludeCsMetaData:ii});function im(p){return p&&p.sendPOST}var Zd=function(p){Xi(y,p);function y(){var N=p.call(this)||this;N.identifier="PostChannel",N.priority=1011,N.version="4.3.5";var R,P=!1,B=[],G,re=!1,ue=0,ce,ke=0,We,Ke={},De=e,we,Be,Ne,Qe,Pe,Re,Ge,Vt,Qt,hr,Pr,pn,an,Qn,Kr,Gi,at,gt,xr,br,xt,Yr;return _o(y,N,function(Et,In){An(),Et._getDbgPlgTargets=function(){return[Pe,R]},Et[Ku]=function(A,M,Y){Mi(M,function(){return"PostChannel:initialize"},function(){In[Ku](A,M,Y),xr=M.getNotifyMgr();try{Kr=zp(di(Et[Ff]),M.evtNamespace&&M.evtNamespace()),Et._addHook(Rl(A,function(z){var te=z.cfg,Q=Rf(null,te,M);R=Q.getExtCfg(Et[Ff],q_),Gi=rm(R[Jm],R[Zm]),Pr=!R[$l]&&$m(),at=R[Y_],Un(M),We=R[lg],ce=R.immediateEventLimit,Ge=R[Zg],an=R.maxEventRetryAttempts,Qn=R.maxUnloadEventRetryAttempts,gt=R[Eh],mr(te.endpointUrl)?Et.pause():re&&Et[Fe](),L(),xt=R[$_],Yr=!!R[Uf],br&&_t();var ae=te.disablePageUnloadEvents||[];br=bh(Qu,ae,Kr),br=Hi(Qu,ae,Kr)||br,br=Ld(js,te.disablePageShowEvents,Kr)||br})),Pe[Ku](A,Et.core,Et)}catch(z){throw Et.setInitialized(!1),z}},function(){return{theConfig:A,core:M,extensions:Y}})},Et.processTelemetry=function(A,M){Ul(A,Et[Ff]),M=M||Et._getTelCtx(M);var Y=A;!Yr&&!P&&(xt&&(Y[oo]=xt),gu(Y,!0),pn?Gl(2,2):bi()),Et.processNext(Y,M)},Et.getOfflineSupport=function(){try{var A=Pe&&Pe[ur]();if(Pe)return{getUrl:function(){return A?A.url:null},serialize:ya,batch:jn,shouldProcess:function(M){return!Yr},createPayload:function(M){return null},createOneDSPayload:function(M){if(Pe[Ar])return Pe[Ar](M,Pr)}}}catch{}return null},Et._doTeardown=function(A,M){Gl(2,2),P=!0,Pe.teardown(),_t(),An()};function _t(){ug(null,Kr),Pd(null,Kr),Fv(null,Kr)}function Un(A){var M=A[tn];A[tn]=function(){var Y=0;return at&&(Y=Y|2),Y|M.call(A)}}function jn(A){var M=Jd;return A&&A[dr]&&Tr(A,function(Y){M&&(M+=`
`),M+=Y}),M}function ya(A){var M=Jd;try{am(A),M=Pe[ft](A)}catch{}return M}function Qu(A){var M=A||Oa().event;M.type!=="beforeunload"&&(pn=!0,Pe[Qp](pn)),Gl(2,2)}function js(A){pn=!1,Pe[Qp](pn)}function am(A){A.ext&&A.ext[Bv]&&delete A.ext[Bv],A.ext&&A.ext[Qo]&&A.ext[Qo].id&&delete A.ext[Qo].id,Pr&&(A.ext=Ho(A.ext),A[Qm]&&(A[Qm]=Ho(A[Qm])),A[Us]&&(A[Us]=Ho(A[Us])))}function gu(A,M){if(A[Gv]||(A[Gv]=0),A[jf]||(A[jf]=1),am(A),A[ev]){if(Ne||re)A[jf]=3,A[ev]=!1;else if(Pe){Pr&&(A=Ho(A)),Pe[Nt](Gd.create(A[oo],[A]),A[ev]===!0?1:A[ev],3);return}}var Y=A[jf],z=ke,te=We;Y===4&&(z=ue,te=ce);var Q=!1;if(z<te)Q=!Vf(A,M);else{var ae=1,ie=nm;Y===4&&(ae=4,ie=1),Q=!0,Qd(A[oo],A[jf],ae,ie)&&(Q=!Vf(A,M))}Q&&th(Xn,[A],Po.QueueFull)}Et.setEventQueueLimits=function(A,M){R[lg]=We=nn(A)?A:gg,R[Zg]=Ge=nn(M)?M:0,L();var Y=ke>A;if(!Y&&Vt>0)for(var z=1;!Y&&z<=3;z++){var te=Re[z];te&&te[Fn]&&Tr(te[Fn],function(Q){Q&&Q[Fi]()>=Vt&&(Y=!0)})}Gf(!0,Y)},Et.pause=function(){wa(),re=!0,Pe&&Pe.pause()},Et[Fe]=function(){re=!1,Pe&&Pe[Fe](),bi()},Et._loadTransmitProfiles=function(A){Xv(),Mr(A,function(M,Y){var z=Y[dr];if(z>=2){var te=z>2?Y[2]:0;if(Y[pu](0,z-2),Y[1]<0&&(Y[0]=-1),Y[1]>0&&Y[0]>0){var Q=Y[0]/Y[1];Y[0]=Math.ceil(Q)*Y[1]}te>=0&&Y[1]>=0&&te>Y[1]&&(te=Y[1]),Y[En](te),Ke[M]=Y}})},Et.flush=function(A,M,Y){A===void 0&&(A=!0);var z;if(!re)if(Y=Y||1,A)M||(z=ro(function(Q){M=Q})),G==null?(wa(),Jv(1,0,Y),G=ai(function(){G=null,Zv(M,Y)},0)):B[En](M);else{var te=wa();es(1,1,Y),M&&M(),te&&bi()}return z},Et.setMsaAuthTicket=function(A){Pe[Bd](Ms,A)},Et.setAuthPluginHeader=function(A){Pe[Bd](Sh,A)},Et.removeAuthPluginHeader=function(){Pe.removeHeader(Sh)},Et.hasEvents=Hl,Et._setTransmitProfile=function(A){De!==A&&Ke[A]!==void 0&&(wa(),De=A,bi())},gf(Et,function(){return Pe},["addResponseHandler"]);function es(A,M,Y){var z=Jv(A,M,Y);return Pe[qd](M,Y),z}function Hl(){return ke>0}function bi(){if(Qt>=0&&Jv(Qt,0,hr)&&Pe[qd](0,hr),ue>0&&!Be&&!re){var A=Ke[De][2];A>=0&&(Be=ai(function(){Be=null,es(4,0,1),bi()},A))}var M=Ke[De][1];!we&&!G&&M>=0&&!re&&(Hl()?we=ai(function(){we=null,es(Qe===0?3:1,0,1),Qe++,Qe%=2,bi()},M):Qe=0)}Et[em]=function(){Ne<Kv&&(Ne++,wa(),bi())},Et._clearBackOff=function(){Ne&&(Ne=0,wa(),bi())};function An(){R=null,P=!1,B=[],G=null,re=!1,ue=0,ce=500,ke=0,We=gg,Ke={},De=e,we=null,Be=null,Ne=0,Qe=0,Re={},Ge=0,br=!1,Vt=0,Qt=-1,hr=null,Pr=!0,pn=!1,an=Nh,Qn=iv,Kr=null,xt=null,Yr=!1,Gi=rm(),Pe=new qf(Kd,vg,hg,{requeue:eh,send:c,sent:m,drop:w,rspFail:I,oth:O}),Qv(),Xd(),L()}function ai(A,M){M===0&&Ne&&(M=1);var Y=1e3;return Ne&&(Y=pg(Ne-1)),Gi.set(A,M*Y)}function wa(){return we!==null?(we.cancel(),we=null,Qe=0,!0):!1}function Gl(A,M){wa(),G&&(G.cancel(),G=null),re||es(1,A,M)}function Xd(){Re[4]={batches:[],iKeyMap:{}},Re[3]={batches:[],iKeyMap:{}},Re[2]={batches:[],iKeyMap:{}},Re[1]={batches:[],iKeyMap:{}}}function Ys(A,M,Y){var z=Re[M];z||(M=1,z=Re[M]);var te=z.iKeyMap[A];return!te&&Y&&(te=Gd.create(A),z.batches[En](te),z.iKeyMap[A]=te),te}function Gf(A,M){Pe[Xm]()&&!Ne&&(Ge>0&&ke>Ge&&(M=!0),M&&G==null&&Et.flush(A,function(){},20))}function Vf(A,M){Pr&&(A=Ho(A));var Y=A[jf],z=Ys(A[oo],Y,!0);return z.addEvent(A)?(Y!==4?(ke++,M&&A[Gv]===0&&Gf(!A.sync,Vt>0&&z[Fi]()>=Vt)):ue++,!0):!1}function Qd(A,M,Y,z){for(;Y<=M;){var te=Ys(A,M,!0);if(te&&te[Fi]()>0){var Q=te[$c](0,z),ae=Q[Fi]();if(ae>0)return Y===4?ue-=ae:ke-=ae,o(Xn,[Q],Po.QueueFull),!0}Y++}return Ch(),!1}function Ch(){for(var A=0,M=0,Y=function(te){var Q=Re[te];Q&&Q[Fn]&&Tr(Q[Fn],function(ae){te===4?A+=ae[Fi]():M+=ae[Fi]()})},z=1;z<=4;z++)Y(z);ke=M,ue=A}function Jv(A,M,Y){var z=!1,te=M===0;return!te||Pe[Xm]()?Mi(Et.core,function(){return"PostChannel._queueBatches"},function(){for(var Q=[],ae=4;ae>=A;){var ie=Re[ae];ie&&ie.batches&&ie.batches[dr]>0&&(Tr(ie[Fn],function(ge){Pe.addBatch(ge)?z=z||ge&&ge[Fi]()>0:Q=Q[ao](ge[Yc]()),ae===4?ue-=ge[Fi]():ke-=ge[Fi]()}),ie[Fn]=[],ie.iKeyMap={}),ae--}Q[dr]>0&&th(Xn,Q,Po.KillSwitch),z&&Qt>=A&&(Qt=-1,hr=0)},function(){return{latency:A,sendType:M,sendReason:Y}},!te):(Qt=Qt>=0?Math.min(Qt,A):A,hr=Math.max(hr,Y)),z}function Zv(A,M){es(1,0,M),Ch(),xh(function(){A&&A(),B[dr]>0?G=ai(function(){G=null,Zv(B.shift(),M)},0):(G=null,bi())})}function xh(A){Pe[Hd]()?A():G=ai(function(){G=null,xh(A)},Hf)}function Xv(){wa(),Qv(),De=e,bi()}function Qv(){Ke={},Ke[e]=[2,1,0],Ke[r]=[6,3,0],Ke[n]=[18,9,0]}function eh(A,M){var Y=[],z=an;pn&&(z=Qn),Tr(A,function(te){te&&te[Fi]()>0&&Tr(te[Yc](),function(Q){Q&&(Q[ev]&&(Q[jf]=4,Q[ev]=!1),Q[Gv]<z?(Ul(Q,Et[Ff]),gu(Q,!1)):Y[En](Q))})}),Y[dr]>0&&th(Xn,Y,Po.NonRetryableStatus),pn&&Gl(2,2)}function _u(A,M){var Y=xr||{},z=Y[A];if(z)try{z.apply(Y,M)}catch(te){qi(Et.diagLog(),1,74,A+" notification failed: "+te)}}function th(A,M){for(var Y=[],z=2;z<arguments.length;z++)Y[z-2]=arguments[z];M&&M[dr]>0&&_u(A,[M][ao](Y))}function o(A,M){for(var Y=[],z=2;z<arguments.length;z++)Y[z-2]=arguments[z];M&&M[dr]>0&&Tr(M,function(te){te&&te[Fi]()>0&&_u(A,[te.events()][ao](Y))})}function c(A,M,Y){A&&A[dr]>0&&_u("eventsSendRequest",[M>=1e3&&M<=1999?M-1e3:0,Y!==!0])}function m(A,M){o("eventsSent",A,M),bi()}function w(A,M){o(Xn,A,M>=8e3&&M<=8999?M-8e3:Po.Unknown)}function I(A){o(Xn,A,Po.NonRetryableStatus),bi()}function O(A,M){o(Xn,A,Po.Unknown),bi()}function L(){gt?Vt=0:Vt=Math.max(Kd*(vg+1),We/6)}}),N}return y.__ieDyn=1,y}(Of);t.BE_PROFILE=n,t.NRT_PROFILE=r,t.PostChannel=Zd,t.RT_PROFILE=e})});var rI=ln(fv=>{"use strict";var Dk=fv&&fv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Rk=fv&&fv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),tI=fv&&fv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Dk(e,t,r);return Rk(e,t),e};Object.defineProperty(fv,"__esModule",{value:!0});fv.oneDataSystemClientFactory=void 0;var Ok=async(t,e,r)=>{let n=await Promise.resolve().then(()=>tI(XT())),i=await Promise.resolve().then(()=>tI(eI())),a=new n.AppInsightsCore,l=new i.PostChannel,v={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[l]]};if(r){v.extensionConfig={};let C={alwaysUseXhrOverride:!0,httpXHROverride:r};v.extensionConfig[l.identifier]=C}let b=e.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(v,[]),a.addTelemetryInitializer(C=>{C.ext=C.ext??{},C.ext.web=C.ext.web??{},C.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',b&&(C.ext.utc=C.ext.utc??{},C.ext.utc.flags=8462029)}),a},Ak=async(t,e,r)=>{let n=await Ok(t,e,r);return{logEvent:(l,v)=>{try{n==null||n.track({name:l,baseData:{name:l,properties:v==null?void 0:v.properties,measurements:v==null?void 0:v.measurements}})}catch(_){throw new Error(`Failed to log event to app insights!
`+_.message)}},flush:async()=>{try{return new Promise((v,_)=>{if(!n){v();return}n.flush(!0,b=>{if(!b){_("Failed to flush app 1DS!");return}})})}catch(l){throw new Error(`Failed to flush 1DS!
`+l.message)}},dispose:async()=>new Promise(v=>{if(!n){v();return}n.unload(!1,()=>{v(),n=void 0},1e3)})}};fv.oneDataSystemClientFactory=Ak});var iI=ln((F0,nI)=>{(function(t,e){typeof F0=="object"&&typeof nI<"u"?e(F0):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(F0,function(t){"use strict";function e(d,g){return d||g}function r(d,g){return d[g]}var n=void 0,i=null,a="",l="function",v="object",_="prototype",b="__proto__",C="undefined",U="constructor",W="Symbol",K="_polyfill",q="length",H="name",Z="call",ne="toString",he=e(Object),Ie=r(he,_),_e=e(String),Ae=r(_e,_),He=e(Math),tt=e(Array),lt=r(tt,_),Rt=r(lt,"slice");function zt(d,g){try{return{v:d.apply(this,g)}}catch(S){return{e:S}}}function Rr(d){return function(g){return typeof g===d}}function cn(d){var g="[object "+d+"]";return function(S){return!!(S&&jt(S)===g)}}function jt(d){return Ie[ne].call(d)}function Ht(d){return typeof d===C||d===C}function qr(d){return!fn(d)}function rt(d){return d===i||Ht(d)}function fn(d){return!!d||d!==n}var Le=Rr("string"),Zt=Rr(l);function Wt(d){return!d&&rt(d)?!1:!!d&&typeof d===v}var Tt=r(tt,"isArray"),hn=cn("Error"),st=r(he,"getOwnPropertyDescriptor");function ei(d,g){return!!d&&Ie.hasOwnProperty[Z](d,g)}var ot=e(r(he,"hasOwn"),Su);function Su(d,g){return ei(d,g)||!!st(d,g)}function Xt(d,g,S){if(d&&Wt(d)){for(var D in d)if(ot(d,D)&&g[Z](S||d,D,d[D])===-1)break}}var qa={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Kt(d){var g={};if(g[qa.c]=!0,g[qa.e]=!0,d.l){g.get=function(){return d.l.v};var S=st(d.l,"v");S&&S.set&&(g.set=function(D){d.l.v=D})}return Xt(d,function(D,j){g[qa[D]]=qr(j)?g[qa[D]]:j}),g}var cr=r(he,"defineProperty");function Ci(d,g,S){return cr(d,g,Kt(S))}function mr(d,g,S,D,j){var J={};return Xt(d,function(X,oe){xi(J,X,g?oe:X,j),xi(J,oe,S?oe:X,j)}),D?D(J):J}function xi(d,g,S,D){cr(d,g,{value:S,enumerable:!0,writable:!!D})}var Lr=e(_e),Hn="[object Error]";function Ct(d,g){var S=a,D=Ie[ne][Z](d);D===Hn&&(d={stack:Lr(d.stack),message:Lr(d.message),name:Lr(d.name)});try{S=JSON.stringify(d,i,g?typeof g=="number"?g:4:n),S=(S?S.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||Lr(d)}catch(j){S=" - "+Ct(j,g)}return D+": "+S}function Mr(d){throw new Error(d)}function Ze(d){throw new TypeError(d)}var Pn=r(he,"freeze");function Hr(d){return d}function Jr(d){return d[b]||i}var Na=r(he,"assign"),Ui=r(he,"keys"),Fr=e(Pn,Hr),ir=e(r(he,"getPrototypeOf"),Jr);function yr(d){return mr(d,1,0,Fr)}function sn(d){var g={};return Xt(d,function(S,D){xi(g,S,D[1]),xi(g,D[0],D[1])}),Fr(g)}function ed(d){return sn(d)}var ti="__tsUtils$gblCfg",td;function Eu(){var d;return typeof globalThis!==C&&(d=globalThis),!d&&typeof self!==C&&(d=self),!d&&typeof window!==C&&(d=window),!d&&typeof global!==C&&(d=global),d}function xn(){if(!td){var d=zt(Eu).v||{};td=d[ti]=d[ti]||{}}return td}var os=Jt;function Jt(d,g,S){var D=g?g[d]:i;return function(j){var J=(j?j[d]:i)||D;if(J||S){var X=arguments;return(J||S).apply(j,J?Rt[Z](X,1):X)}Ze('"'+Lr(d)+'" not defined for '+Ct(j))}}var ji=r(He,"max"),Ha=os("slice",Ae),ss=os("substring",Ae),Ca=Jt("substr",Ae,rd);function rd(d,g,S){return rt(d)&&Ze("Invalid "+Ct(d)),S<0?a:(g=g||0,g<0&&(g=ji(g+d[q],0)),Ht(S)?Ha(d,g):Ha(d,g,g+S))}function il(d,g){return ss(d,0,g)}var Ji="_urid",xa;function Di(){if(!xa){var d=xn();xa=d.gblSym=d.gblSym||{k:{},s:{}}}return xa}function us(d){var g={description:Lr(d),toString:function(){return W+"("+d+")"}};return g[K]=!0,g}function Gs(d){var g=Di();if(!ot(g.k,d)){var S=us(d),D=Ui(g.s).length;S[Ji]=function(){return D+"_"+S[ne]()},g.k[d]=S,g.s[S[Ji]()]=Lr(d)}return g.k[d]}var ui;function al(){ui=xn()}function Vs(d){return cr({toJSON:function(){return d}},"v",{value:d})}var Da="window",ri;function rc(d,g){var S;return function(){return!ui&&al(),(!S||ui.lzy)&&(S=Vs(zt(d,g).v)),S.v}}function zs(d){return!ui&&al(),(!ri||d===!1||ui.lzy)&&(ri=Vs(zt(Eu).v||i)),ri.v}function li(d,g){var S;if(!ri||g===!1?S=zs(g):S=ri.v,S&&S[d])return S[d];if(d===Da)try{return window}catch{}return i}var ua=rc(li,["document"]);function vr(){return!!Dn()}var Dn=rc(li,[Da]);function Ra(){return!!Zr()}var Zr=rc(li,["navigator"]),gi,Ga;function Xr(){return gi=Vs(zt(li,[W]).v),gi}function la(d){var g=(ui.lzy?0:gi)||Xr();return g.v?g.v[d]:n}function Tu(d,g){!ui&&al();var S=(ui.lzy?0:gi)||Xr();return S.v?S.v(d):g?i:us(d)}function ca(d){return!ui&&al(),Ga=(ui.lzy?0:Ga)||Vs(zt(la,["for"]).v),(Ga.v||Gs)(d)}function wn(d,g,S){return d.apply(g,S)}function ci(d,g,S){if(d)for(var D=d[q]>>>0,j=0;j<D&&!(j in d&&g[Z](S||d,d[j],j,d)===-1);j++);}var ol=os("indexOf",lt),Oa=os("map",lt),Or=os("reduce",lt),Ri=e(r(he,"create"),nd);function nd(d){if(!d)return{};var g=typeof d;g!==v&&g!==l&&Ze("Prototype must be an Object or function: "+Ct(d));function S(){}return S[_]=d,new S}var Yi;function ls(d,g){var S=he.setPrototypeOf||function(D,j){var J;!Yi&&(Yi=Vs((J={},J[b]=[],J instanceof Array))),Yi.v?D[b]=j:Xt(j,function(X,oe){return D[X]=oe})};return S(d,g)}function nc(d,g,S){zt(Ci,[g,H,{v:d,c:!0,e:!1}]),g=ls(g,S);function D(){this[U]=g,zt(Ci,[this,H,{v:d,c:!0,e:!1}])}return g[_]=S===i?Ri(S):(D[_]=S[_],new D),g}function cs(d,g){g&&(d[H]=g)}function id(d,g,S){var D=S||Error,j=D[_][H],J=Error.captureStackTrace;return nc(d,function(){var X=this,oe=arguments;try{zt(cs,[D,d]);var ve=wn(D,X,Rt[Z](oe))||X;if(ve!==X){var ye=ir(X);ye!==ir(ve)&&ls(ve,ye)}return J&&J(ve,X[U]),g&&g(ve,oe),ve}finally{zt(cs,[D,j])}},D)}function gn(){return(Date.now||rf)()}function rf(){return new Date().getTime()}function fa(d){return function(S){return rt(S)&&Ze("strTrim called ["+Ct(S)+"]"),S&&S.replace&&(S=S.replace(d,a)),S}}var dp=fa(/^\s+|(?=\s)\s+$/g),fi=Jt("trim",Ae,dp),Tm,Aa,nf;function mo(d){if(!d||typeof d!==v)return!1;nf||(nf=vr()?Dn():!0);var g=!1;if(d!==nf){Aa||(Tm=Function[_][ne],Aa=Tm[Z](he));try{var S=ir(d);g=!S,g||(ei(S,U)&&(S=S[U]),g=!!(S&&typeof S===l&&Tm[Z](S)===Aa))}catch{}}return g}var ad;function Tr(){return!ui&&al(),(!ad||ui.lzy)&&(ad=Vs(zt(li,["performance"]).v)),ad.v}var fs=Jt("endsWith",Ae,od);function od(d,g,S){Le(d)||Ze("'"+Ct(d)+"' is not a string");var D=Le(g)?g:Lr(g),j=!Ht(S)&&S<d[q]?S:d[q];return ss(d,j-D[q],j)===D}var Zi=os("indexOf",Ae),ic="ref",Lt="unref",ka="hasRef",sl="enabled";function af(d,g,S){var D=!0,j=d?g(i):i,J;function X(){return D=!1,j&&j[Lt]&&j[Lt](),J}function oe(){j&&S(j),j=i}function ve(){return j=g(j),D||X(),J}function ye(Xe){!Xe&&j&&oe(),Xe&&!j&&ve()}return J={cancel:oe,refresh:ve},J[ka]=function(){return j&&j[ka]?j[ka]():D},J[ic]=function(){return D=!0,j&&j[ic]&&j[ic](),J},J[Lt]=X,J=cr(J,sl,{get:function(){return!!j},set:ye}),{h:J,dn:function(){j=i}}}function wv(d,g,S){var D=Tt(g),j=D?g.length:0,J=(j>0?g[0]:D?n:g)||setTimeout,X=(j>1?g[1]:n)||clearTimeout,oe=S[0];S[0]=function(){ve.dn(),wn(oe,n,Rt[Z](arguments))};var ve=af(d,function(ye){if(ye){if(ye.refresh)return ye.refresh(),ye;wn(X,n,[ye])}return wn(J,n,S)},function(ye){wn(X,n,[ye])});return ve.h}function Va(d,g){return wv(!0,n,Rt[Z](arguments))}var of=yr,pp=ed,Iu="toLowerCase",za="blkVal",pt="length",Oi="rdOnly",Nu="notify",Ws="warnToConsole",mp="throwInternal",vp="setDf",Rn="watch",Pa="logger",hp="apply",Wa="push",da="splice",hh="hdlr",bv="cancel",Im="name",Cu="unload",Nm="version",og="loggingLevelConsole",gp="messageId",Xi="message",sf="diagLog",uf="userAgent",vo="split",La="nodeType",xu="replace",Cm="logInternalMessage",Ka="type",_p="handler",Du="traceId",ac="spanId",lf="traceFlags",sd="getAttribute",yp;function xm(d,g){yp||(yp=id("AggregationError",function(D,j){j[pt]>1&&(D.errors=j[1])}));var S=d||"One or more errors occurred.";throw ci(g,function(D,j){S+=`
`.concat(j," > ").concat(Ct(D))}),new yp(S,g||[])}var Dm="function",Ru="object",wp="undefined",Ks="prototype",ul=Object,Ja=ul[Ks];(zs()||{}).Symbol,(zs()||{}).Reflect;var cf="hasOwnProperty",ud=function(d){for(var g,S=1,D=arguments.length;S<D;S++){g=arguments[S];for(var j in g)Ja[cf].call(g,j)&&(d[j]=g[j])}return d},oc=Na||ud,ho=function(d,g){return ho=ul.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,D){S.__proto__=D}||function(S,D){for(var j in D)D[cf](j)&&(S[j]=D[j])},ho(d,g)};function Sv(d,g){typeof g!==Dm&&g!==null&&Ze("Class extends value "+String(g)+" is not a constructor or null"),ho(d,g);function S(){this.constructor=d}d[Ks]=g===null?Ri(g):(S[Ks]=g[Ks],new S)}var ds,ko="constructor",go="prototype",Ou="function",ld="_dynInstFuncs",sc="_isDynProxy",uc="_dynClass",ll="_dynCls$",cd="_dynInstChk",ff=cd,fd="_dfOpts",cl="_unknown_",_o="__proto__",lc="_dyn"+_o,Po="__dynProto$Gbl",Ma="_dynInstProto",ps="useBaseInst",un="setInstFuncs",Js=Object,yo=Js.getPrototypeOf,cc=Js.getOwnPropertyNames,fc=zs(),ms=fc[Po]||(fc[Po]={o:(ds={},ds[un]=!0,ds[ps]=!0,ds),n:1e3});function df(d){return d&&(d===Js[go]||d===Array[go])}function vs(d){return df(d)||d===Function[go]}function Au(d){var g;if(d){if(yo)return yo(d);var S=d[_o]||d[go]||(d[ko]?d[ko][go]:null);g=d[lc]||S,ei(d,lc)||(delete d[Ma],g=d[lc]=d[Ma]||d[lc],d[Ma]=S)}return g}function pa(d,g){var S=[];if(cc)S=cc(d);else for(var D in d)typeof D=="string"&&ei(d,D)&&S.push(D);if(S&&S.length>0)for(var j=0;j<S.length;j++)g(S[j])}function bp(d,g,S){return g!==ko&&typeof d[g]===Ou&&(S||ei(d,g))&&g!==_o&&g!==go}function fl(d){Ze("DynamicProto: "+d)}function Qi(d){var g=Ri(null);return pa(d,function(S){!g[S]&&bp(d,S,!1)&&(g[S]=d[S])}),g}function dd(d,g){for(var S=d.length-1;S>=0;S--)if(d[S]===g)return!0;return!1}function Sp(d,g,S,D){function j(ve,ye,Xe){var Mt=ye[Xe];if(Mt[sc]&&D){var sr=ve[ld]||{};sr[ff]!==!1&&(Mt=(sr[ye[uc]]||{})[Xe]||Mt)}return function(){return Mt.apply(ve,arguments)}}var J=Ri(null);pa(S,function(ve){J[ve]=j(g,S,ve)});for(var X=Au(d),oe=[];X&&!vs(X)&&!dd(oe,X);)pa(X,function(ve){!J[ve]&&bp(X,ve,!yo)&&(J[ve]=j(g,X,ve))}),oe.push(X),X=Au(X);return J}function pf(d,g,S,D){var j=null;if(d&&ei(S,uc)){var J=d[ld]||Ri(null);if(j=(J[S[uc]]||Ri(null))[g],j||fl("Missing ["+g+"] "+Ou),!j[cd]&&J[ff]!==!1){for(var X=!ei(d,g),oe=Au(d),ve=[];X&&oe&&!vs(oe)&&!dd(ve,oe);){var ye=oe[g];if(ye){X=ye===D;break}ve.push(oe),oe=Au(oe)}try{X&&(d[g]=j),j[cd]=1}catch{J[ff]=!1}}}return j}function mf(d,g,S){var D=g[d];return D===S&&(D=Au(g)[d]),typeof D!==Ou&&fl("["+d+"] is not a "+Ou),D}function Ep(d,g,S,D,j){function J(ve,ye){var Xe=function(){var Mt=pf(this,ye,ve,Xe)||mf(ye,ve,Xe);return Mt.apply(this,arguments)};return Xe[sc]=1,Xe}if(!df(d)){var X=S[ld]=S[ld]||Ri(null);if(!df(X)){var oe=X[g]=X[g]||Ri(null);X[ff]!==!1&&(X[ff]=!!j),df(oe)||pa(S,function(ve){bp(S,ve,!1)&&S[ve]!==D[ve]&&(oe[ve]=S[ve],delete S[ve],(!ei(d,ve)||d[ve]&&!d[ve][sc])&&(d[ve]=J(d,ve)))})}}}function Ev(d,g){if(yo){for(var S=[],D=Au(g);D&&!vs(D)&&!dd(S,D);){if(D===d)return!0;S.push(D),D=Au(D)}return!1}return!0}function dl(d,g){return ei(d,go)?d.name||g||cl:((d||{})[ko]||{}).name||g||cl}function Lo(d,g,S,D){ei(d,go)||fl("theClass is an invalid class definition.");var j=d[go];Ev(j,g)||fl("["+dl(d)+"] not in hierarchy of ["+dl(g)+"]");var J=null;ei(j,uc)?J=j[uc]:(J=ll+dl(d,"_")+"$"+ms.n,ms.n++,j[uc]=J);var X=Lo[fd],oe=!!X[ps];oe&&D&&D[ps]!==void 0&&(oe=!!D[ps]);var ve=Qi(g),ye=Sp(j,g,ve,oe);S(g,ye);var Xe=!!yo&&!!X[un];Xe&&D&&(Xe=!!D[un]),Ep(j,J,g,ve,Xe!==!1)}Lo[fd]=ms.o;var wo=void 0,On="",vf="Not dynamic - ",pl=/-([a-z])/g,ml=/([^\w\d_$])/g,Tp=/^(\d+[\w\d_$])/;function Za(d){return!rt(d)}function ku(d){var g=d;return g&&Le(g)&&(g=g[xu](pl,function(S,D){return D.toUpperCase()}),g=g[xu](ml,"_"),g=g[xu](Tp,function(S,D){return"_"+D})),g}function Zs(d,g){return d&&g?Zi(d,g)!==-1:!1}function fr(d){return d&&d.toISOString()||""}function Mo(d){return hn(d)?d[Im]:On}function hs(d){return function(){function g(){var S=this;d&&Xt(d,function(D,j){S[D]=j})}return g}()}var Xa="console",pd="JSON",Qa="crypto",Pu="msCrypto",bn="msie",ma="trident/",zr=null,mt=null,vl=null;function Fo(){return typeof console!==wp?console:li(Xa)}function Xs(){return!!(typeof JSON===Ru&&JSON||li(pd)!==null)}function bo(){return Xs()?JSON||li(pd):null}function Lu(){return li(Qa)}function eo(){return li(Pu)}function Qr(){var d=Zr();if(d&&(d[uf]!==mt||zr===null)){mt=d[uf];var g=(mt||On)[Iu]();zr=Zs(g,bn)||Zs(g,ma)}return zr}function Uo(d){return(vl===null||d===!1)&&(vl=Ra()&&!!Zr().sendBeacon),vl}function Wr(d,g){if(d)for(var S=0;S<d[pt];S++){var D=d[S];if(D[Im]&&D[Im]===g)return D}return{}}function jo(d){var g=ua();return g&&d?Wr(g.querySelectorAll("meta"),d).content:null}function md(d){var g,S=Tr();if(S){var D=S.getEntriesByType("navigation")||[];g=Wr((D[pt]>0?D[0]:{}).serverTiming,d).description}return g}var Yo=4294967296,Zn=4294967295,So=123456789,gs=987654321,$i=!1,ea=So,dc=gs;function hl(d){d<0&&(d>>>=0),ea=So+d&Zn,dc=gs-d&Zn,$i=!0}function vd(){try{var d=gn()&2147483647;hl((Math.random()*Yo^d)+d)}catch{}}function Qs(d){return d>0?Math.floor($o()/Zn*(d+1))>>>0:0}function $o(d){var g=0,S=Lu()||eo();return S&&S.getRandomValues&&(g=S.getRandomValues(new Uint32Array(1))[0]&Zn),g===0&&Qr()&&($i||vd(),g=Bo()&Zn),g===0&&(g=Math.floor(Yo*Math.random()|0)),d||(g>>>=0),g}function Bo(d){dc=36969*(dc&65535)+(dc>>16)&Zn,ea=18e3*(ea&65535)+(ea>>16)&Zn;var g=(dc<<16)+(ea&65535)>>>0&Zn|0;return d||(g>>>=0),g}function gl(d){d===void 0&&(d=22);for(var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S=$o()>>>0,D=0,j=On;j[pt]<d;)D++,j+=g.charAt(S&63),S>>>=6,D===5&&(S=($o()<<2&4294967295|S&3)>>>0,D=0);return j}var qo="3.3.5",ni="."+gl(6),hd=0;function _l(d){return d[La]===1||d[La]===9||!+d[La]}function eu(d,g){var S=g[d.id];if(!S){S={};try{_l(g)&&Ci(g,d.id,{e:!1,v:S})}catch{}}return S}function Fa(d,g){return g===void 0&&(g=!1),ku(d+hd+++(g?"."+qo:On)+ni)}function _s(d){var g={id:Fa("_aiData-"+(d||On)+"."+qo),accept:function(S){return _l(S)},get:function(S,D,j,J){var X=S[g.id];return X?X[ku(D)]:(J&&(X=eu(g,S),X[ku(D)]=j),j)},kill:function(S,D){if(S&&S[D])try{delete S[D]}catch{}}};return g}function tu(d){return d&&Wt(d)&&(d.isVal||d.fb||ot(d,"v")||ot(d,"mrg")||ot(d,"ref")||d.set)}function to(d,g,S){var D,j=S.dfVal||fn;if(g&&S.fb){var J=S.fb;Tt(J)||(J=[J]);for(var X=0;X<J[pt];X++){var oe=J[X],ve=g[oe];if(j(ve)?D=ve:d&&(ve=d.cfg[oe],j(ve)&&(D=ve),d.set(d.cfg,Lr(oe),ve)),j(D))break}}return!j(D)&&j(S.v)&&(D=S.v),D}function pc(d,g,S){var D=S;if(S&&tu(S)&&(D=to(d,g,S)),D){tu(D)&&(D=pc(d,g,D));var j;Tt(D)?(j=[],j[pt]=D[pt]):mo(D)&&(j={}),j&&(Xt(D,function(J,X){X&&tu(X)&&(X=pc(d,g,X)),j[J]=X}),D=j)}return D}function Mu(d,g,S,D){var j,J,X,oe=D,ve,ye,Xe,Mt;tu(oe)?(j=oe.isVal,J=oe.set,Xe=oe[Oi],Mt=oe[za],ve=oe.mrg,ye=oe.ref,!ye&&Ht(ye)&&(ye=!!ve),X=to(d,g,oe)):X=D,Mt&&d[za](g,S);var sr,pr=!0,ft=g[S];(ft||!rt(ft))&&(sr=ft,pr=!1,j&&sr!==X&&!j(sr)&&(sr=X,pr=!0),J&&(sr=J(sr,X,g),pr=sr===X)),pr?X?sr=pc(d,g,X):sr=X:(mo(sr)||Tt(X))&&ve&&X&&(mo(X)||Tt(X))&&Xt(X,function(ur,Yt){Mu(d,sr,ur,Yt)}),d.set(g,S,sr),ye&&d.ref(g,S),Xe&&d[Oi](g,S)}var Ai=ca("[[ai_dynCfg_1]]"),Fu=ca("[[ai_blkDynCfg_1]]"),ru=ca("[[ai_frcDynCfg_1]]");function ro(d){if(d){var g;if(Tt(d)?(g=[],g[pt]=d[pt]):mo(d)&&(g={}),g)return Xt(d,function(S,D){g[S]=ro(D)}),g}return d}function yl(d){if(d){var g=d[Ai]||d;if(g.cfg&&(g.cfg===d||g.cfg[Ai]===g))return g}return null}function Sn(d){if(d&&(mo(d)||Tt(d)))try{d[Fu]=!0}catch{}return d}function _i(d,g,S){var D=!1;return S&&!d[g.blkVal]&&(D=S[ru],!D&&!S[Fu]&&(D=mo(S)||Tt(S))),D}function no(d){Ze("InvalidAccess:"+d)}var wl=["push","pop","shift","unshift","splice"],ys=function(d,g,S,D){d&&d[mp](3,108,"".concat(S," [").concat(g,"] failed - ")+Ct(D))};function Ip(d,g,S){Tt(g)&&ci(wl,function(D){var j=g[D];g[D]=function(){for(var J=[],X=0;X<arguments.length;X++)J[X]=arguments[X];var oe=j[hp](this,J);return va(d,g,S,"Patching"),oe}})}function Ua(d,g){var S=st(d,g);return S&&S.get}function mc(d,g,S,D){var j={n:S,h:[],trk:function(ye){ye&&ye.fn&&(ol(j.h,ye)===-1&&j.h[Wa](ye),d.trk(ye,j))},clr:function(ye){var Xe=ol(j.h,ye);Xe!==-1&&j.h[da](Xe,1)}},J=!0,X=!1;function oe(){J&&(X=X||_i(oe,d,D),D&&!D[Ai]&&X&&(D=va(d,D,S,"Converting")),J=!1);var ye=d.act;return ye&&j.trk(ye),D}oe[d.prop]={chng:function(){d.add(j)}};function ve(ye){if(D!==ye){oe[d.ro]&&!d.upd&&no("["+S+"] is read-only:"+Ct(g)),J&&(X=X||_i(oe,d,D),J=!1);var Xe=X&&oe[d.rf];if(X)if(Xe){Xt(D,function(sr){D[sr]=ye?ye[sr]:wo});try{Xt(ye,function(sr,pr){Bi(d,D,sr,pr)}),ye=D}catch(sr){ys((d.hdlr||{})[Pa],S,"Assigning",sr),X=!1}}else D&&D[Ai]&&Xt(D,function(sr){var pr=Ua(D,sr);if(pr){var ft=pr[d.prop];ft&&ft.chng()}});if(ye!==D){var Mt=ye&&_i(oe,d,ye);!Xe&&Mt&&(ye=va(d,ye,S,"Converting")),D=ye,X=Mt}d.add(j)}}Ci(g,j.n,{g:oe,s:ve})}function Bi(d,g,S,D){if(g){var j=Ua(g,S),J=j&&!!j[d.prop];J?g[S]=D:mc(d,g,S,D)}return g}function gd(d,g,S,D){if(g){var j=Ua(g,S),J=j&&!!j[d.prop],X=D&&D[0],oe=D&&D[1],ve=D&&D[2];if(!J){if(ve)try{Sn(g)}catch(ye){ys((d.hdlr||{})[Pa],S,"Blocking",ye)}try{Bi(d,g,S,g[S]),j=Ua(g,S)}catch(ye){ys((d.hdlr||{})[Pa],S,"State",ye)}}X&&(j[d.rf]=X),oe&&(j[d.ro]=oe),ve&&(j[d.blkVal]=!0)}return g}function va(d,g,S,D){try{Xt(g,function(j,J){Bi(d,g,j,J)}),g[Ai]||(cr(g,Ai,{get:function(){return d[hh]}}),Ip(d,g,S))}catch(j){ys((d.hdlr||{})[Pa],S,D,j)}return g}var ws="[[ai_",bs="]]";function Np(d){var g,S=Tu(ws+"get"+d.uid+bs),D=Tu(ws+"ro"+d.uid+bs),j=Tu(ws+"rf"+d.uid+bs),J=Tu(ws+"blkVal"+d.uid+bs),X=Tu(ws+"dtl"+d.uid+bs),oe=null,ve=null,ye;function Xe(ft,ur){var Yt=ye.act;try{ye.act=ft,ft&&ft[X]&&(ci(ft[X],function(kr){kr.clr(ft)}),ft[X]=[]),ur({cfg:d.cfg,set:d.set.bind(d),setDf:d[vp].bind(d),ref:d.ref.bind(d),rdOnly:d[Oi].bind(d)})}catch(kr){var Ar=d[Pa];throw Ar&&Ar[mp](1,107,Ct(kr)),kr}finally{ye.act=Yt||null}}function Mt(){if(oe){var ft=oe;oe=null,ve&&ve[bv](),ve=null;var ur=[];if(ci(ft,function(Yt){if(Yt&&(Yt[X]&&(ci(Yt[X],function(Ar){Ar.clr(Yt)}),Yt[X]=null),Yt.fn))try{Xe(Yt,Yt.fn)}catch(Ar){ur[Wa](Ar)}}),oe)try{Mt()}catch(Yt){ur[Wa](Yt)}ur[pt]>0&&xm("Watcher error(s): ",ur)}}function sr(ft){if(ft&&ft.h[pt]>0){oe||(oe=[]),ve||(ve=Va(function(){ve=null,Mt()},0));for(var ur=0;ur<ft.h[pt];ur++){var Yt=ft.h[ur];Yt&&ol(oe,Yt)===-1&&oe[Wa](Yt)}}}function pr(ft,ur){if(ft){var Yt=ft[X]=ft[X]||[];ol(Yt,ur)===-1&&Yt[Wa](ur)}}return ye=(g={prop:S,ro:D,rf:j},g[za]=J,g[hh]=d,g.add=sr,g[Nu]=Mt,g.use=Xe,g.trk=pr,g),ye}function hf(d,g){var S={fn:g,rm:function(){S.fn=null,d=null,g=null}};return Ci(S,"toJSON",{v:function(){return"WatcherHandler"+(S.fn?"":"[X]")}}),d.use(S,g),S}function _d(d,g,S){var D,j=yl(g);if(j)return j;var J=Fa("dyncfg",!0),X=g&&S!==!1?g:ro(g),oe;function ve(){oe[Nu]()}function ye(Ar,kr,At){try{Ar=Bi(oe,Ar,kr,At)}catch(Mn){ys(d,kr,"Setting value",Mn)}return Ar[kr]}function Xe(Ar){return hf(oe,Ar)}function Mt(Ar,kr){oe.use(null,function(At){var Mn=oe.upd;try{Ht(kr)||(oe.upd=kr),Ar(At)}finally{oe.upd=Mn}})}function sr(Ar,kr){var At;return gd(oe,Ar,kr,(At={},At[0]=!0,At))[kr]}function pr(Ar,kr){var At;return gd(oe,Ar,kr,(At={},At[1]=!0,At))[kr]}function ft(Ar,kr){var At;return gd(oe,Ar,kr,(At={},At[2]=!0,At))[kr]}function ur(Ar,kr){return kr&&Xt(kr,function(At,Mn){Mu(Yt,Ar,At,Mn)}),Ar}var Yt=(D={uid:null,cfg:X},D[Pa]=d,D[Nu]=ve,D.set=ye,D[vp]=ur,D[Rn]=Xe,D.ref=sr,D[Oi]=pr,D[za]=ft,D._block=Mt,D);return Ci(Yt,"uid",{c:!1,e:!1,w:!1,v:J}),oe=Np(Yt),va(oe,X,"config","Creating"),Yt}function gf(d,g){d?(d[Ws](g),d[mp](2,108,g)):no(g)}function Ho(d,g,S,D){var j=_d(S,d||{},D);return g&&j[vp](j.cfg,g),j}function ha(d,g,S){var D=d[Ai]||d;return D.cfg&&(D.cfg===d||D.cfg[Ai]===D)?D[Rn](g):(gf(S,vf+Ct(d)),Ho(d,null,S)[Rn](g))}var vc=null;function Tv(){var d=li("Microsoft");return d&&(vc=d.ApplicationInsights),vc}function bl(d){var g=vc;return!g&&d.disableDbgExt!==!0&&(g=vc||Tv()),g?g.ChromeDbgExt:null}var Sl,Ss="warnToConsole",_f="AI (Internal): ",gh="AI: ",Cp="AITR_",yf={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},El=(Sl={},Sl[0]=null,Sl[1]="errorToConsole",Sl[2]=Ss,Sl[3]="debugToConsole",Sl);function Rm(d){return d?'"'+d[xu](/\"/g,On)+'"':On}function Iv(d,g){var S=Fo();if(S){var D="log";S[d]&&(D=d),Zt(S[D])&&S[D](g)}}var Tl=function(){function d(g,S,D,j){D===void 0&&(D=!1);var J=this;J[gp]=g,J[Xi]=(D?gh:_f)+g;var X=On;Xs()&&(X=bo().stringify(j));var oe=(S?" message:"+Rm(S):On)+(j?" props:"+Rm(X):On);J[Xi]+=oe}return d.dataType="MessageData",d}();function Nv(d,g){return(d||{})[Pa]||new wf(g)}var wf=function(){function d(g){this.identifier="DiagnosticLogger",this.queue=[];var S=0,D={},j,J,X,oe,ve;Lo(d,this,function(ye){ve=Mt(g||{}),ye.consoleLoggingLevel=function(){return j},ye[mp]=function(ft,ur,Yt,Ar,kr){kr===void 0&&(kr=!1);var At=new Tl(ur,Yt,kr,Ar);if(oe)throw Ct(At);var Mn=El[ft]||Ss;if(Ht(At[Xi]))pr("throw"+(ft===1?"Critical":"Warning"),At);else{if(kr){var Mf=+At[gp];!D[Mf]&&j>=ft&&(ye[Mn](At[Xi]),D[Mf]=!0)}else j>=ft&&ye[Mn](At[Xi]);Xe(ft,At)}},ye.debugToConsole=function(ft){Iv("debug",ft),pr("warning",ft)},ye[Ws]=function(ft){Iv("warn",ft),pr("warning",ft)},ye.errorToConsole=function(ft){Iv("error",ft),pr("error",ft)},ye.resetInternalMessageCount=function(){S=0,D={}},ye[Cm]=Xe,ye[Cu]=function(ft){ve&&ve.rm(),ve=null};function Xe(ft,ur){if(!sr()){var Yt=!0,Ar=Cp+ur[gp];if(D[Ar]?Yt=!1:D[Ar]=!0,Yt&&(ft<=J&&(ye.queue[Wa](ur),S++,pr(ft===1?"error":"warn",ur)),S===X)){var kr="Internal events throttle limit per PageView reached for this app.",At=new Tl(23,kr,!1);ye.queue[Wa](At),ft===1?ye.errorToConsole(kr):ye[Ws](kr)}}}function Mt(ft){return ha(Ho(ft,yf,ye).cfg,function(ur){var Yt=ur.cfg;j=Yt[og],J=Yt.loggingLevelTelemetry,X=Yt.maxMessageLimit,oe=Yt.enableDebug})}function sr(){return S>=X}function pr(ft,ur){var Yt=bl(g||{});Yt&&Yt[sf]&&Yt[sf](ft,ur)}})}return d.__ieDyn=1,d}();function xp(d){return d||new wf}function Eo(d,g,S,D,j,J){J===void 0&&(J=!1),xp(d)[mp](g,S,D,j,J)}function Om(){for(var d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],g=On,S,D=0;D<4;D++)S=$o(),g+=d[S&15]+d[S>>4&15]+d[S>>8&15]+d[S>>12&15]+d[S>>16&15]+d[S>>20&15]+d[S>>24&15]+d[S>>28&15];var j=d[8+($o()&3)|0];return Ca(g,0,8)+Ca(g,9,4)+"4"+Ca(g,13,3)+j+Ca(g,16,3)+Ca(g,19,12)}var _h=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,yd="00",Am="ff",Dp="00000000000000000000000000000000",hc="0000000000000000",wd=1;function Il(d,g,S){return d&&d[pt]===g&&d!==S?!!d.match(/^[\da-f]*$/i):!1}function nu(d,g,S){return Il(d,g)?d:S}function gc(d){(isNaN(d)||d<0||d>255)&&(d=1);for(var g=d.toString(16);g[pt]<2;)g="0"+g;return g}function Cv(d,g,S,D){var j;return j={},j[Nm]=Il(D,2,Am)?D:yd,j[Du]=_c(d)?d:Om(),j[ac]=Op(g)?g:il(Om(),16),j.traceFlags=S>=0&&S<=255?S:1,j}function Rp(d,g){var S;if(!d||(Tt(d)&&(d=d[0]||""),!d||!Le(d)||d[pt]>8192))return null;if(d.indexOf(",")!==-1){var D=d[vo](",");d=D[g>0&&D[pt]>g?g:0]}var j=_h.exec(fi(d));return!j||j[1]===Am||j[2]===Dp||j[3]===hc?null:(S={version:(j[1]||On)[Iu](),traceId:(j[2]||On)[Iu](),spanId:(j[3]||On)[Iu]()},S[lf]=parseInt(j[4],16),S)}function _c(d){return Il(d,32,Dp)}function Op(d){return Il(d,16,hc)}function iu(d){return!(!d||!Il(d[Nm],2,Am)||!Il(d[Du],32,Dp)||!Il(d[ac],16,hc)||!Il(gc(d[lf]),2))}function en(d){return iu(d)?(d[lf]&wd)===wd:!1}function Nl(d){if(d){var g=gc(d[lf]);Il(g,2)||(g="01");var S=d[Nm]||yd;return S!=="00"&&S!=="ff"&&(S=yd),"".concat(S.toLowerCase(),"-").concat(nu(d.traceId,32,Dp).toLowerCase(),"-").concat(nu(d.spanId,16,hc).toLowerCase(),"-").concat(g.toLowerCase())}return""}function ki(d){var g="traceparent",S=Rp(jo(g),d);return S||(S=Rp(md(g),d)),S}function Ap(d){var g=d.getElementsByTagName("script"),S=[];return ci(g,function(D){var j=D[sd]("src");if(j){var J=D[sd]("crossorigin"),X=D.hasAttribute("async")===!0,oe=D.hasAttribute("defer")===!0,ve=D[sd]("referrerpolicy"),ye={url:j};J&&(ye.crossOrigin=J),X&&(ye.async=X),oe&&(ye.defer=oe),ve&&(ye.referrerPolicy=ve),S[Wa](ye)}}),S}var bd="on",yc="attachEvent",Cl="addEventListener",ga="detachEvent",Sd="removeEventListener",yi="events";Fa("aiEvtPageHide"),Fa("aiEvtPageShow");var wr=/\.[\.]+/g,au=/[\.]+$/,Ln=1,Es=_s("events"),xl=/^([^.]*)(?:\.(.+)|)/;function Dl(d){return d&&d[xu]?d[xu](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,On):d}function ou(d,g){var S;if(g){var D=On;Tt(g)?(D=On,ci(g,function(J){J=Dl(J),J&&(J[0]!=="."&&(J="."+J),D+=J)})):D=Dl(g),D&&(D[0]!=="."&&(D="."+D),d=(d||On)+D)}var j=xl.exec(d||On)||[];return S={},S[Ka]=j[1],S.ns=(j[2]||On).replace(wr,".").replace(au,On)[vo](".").sort().join("."),S}function To(d,g,S){S===void 0&&(S=!0);var D=Es.get(d,yi,{},S),j=D[g];return j||(j=D[g]=[]),j}function bf(d,g,S,D){d&&g&&g[Ka]&&(d[Sd]?d[Sd](g[Ka],S,D):d[ga]&&d[ga](bd+g[Ka],S))}function km(d,g,S,D){var j=!1;return d&&g&&g[Ka]&&S&&(d[Cl]?(d[Cl](g[Ka],S,D),j=!0):d[yc]&&(d[yc](bd+g[Ka],S),j=!0)),j}function Sf(d,g,S,D){for(var j=g[pt];j--;){var J=g[j];J&&(!S.ns||S.ns===J.evtName.ns)&&(!D||D(J))&&(bf(d,J.evtName,J[_p],J.capture),g[da](j,1))}}function Pm(d,g,S){if(g[Ka])Sf(d,To(d,g[Ka]),g,S);else{var D=Es.get(d,yi,{});Xt(D,function(j,J){Sf(d,J,g,S)}),Ui(D)[pt]===0&&Es.kill(d,yi)}}function Ef(d,g){var S;return g?(Tt(g)?S=[d].concat(g):S=[d,g],S=ou("xx",S).ns[vo](".")):S=d,S}function wc(d,g,S,D,j){var J;j===void 0&&(j=!1);var X=!1;if(d)try{var oe=ou(g,D);if(X=km(d,oe,S,j),X&&Es.accept(d)){var ve=(J={guid:Ln++,evtName:oe},J[_p]=S,J.capture=j,J);To(d,oe.type)[Wa](ve)}}catch{}return X}function kp(d,g,S,D,j){if(j===void 0&&(j=!1),d)try{var J=ou(g,D),X=!1;Pm(d,J,function(oe){return J.ns&&!S||oe[_p]===S?(X=!0,!0):!1}),X||bf(d,J,S,j)}catch{}}var di="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",bc="sampleRate",Pi="ProcessLegacy",Uu="http.method",Pp="https://dc.services.visualstudio.com",Ed="/v2/track",Li="not_specified",Td="iKey",Lp=pp({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),su="split",vt="length",Ts="toLowerCase",Is="ingestionendpoint",io="toString",Tf="push",Sc="removeItem",Ns="name",Io="message",Ec="count",Id="preTriggerDate",uu="disabled",If="interval",Tc="daysOfMonth",Nf="date",Mp="getUTCDate",Fp="stringify",Lm="pathname",Up="match",ju="correlationHeaderExcludePatterns",Rl="extensionConfig",Cf="exceptions",Go="parsedStack",Cs="properties",Vo="measurements",zo="sizeInBytes",Ol="typeName",jp="severityLevel",Al="problemGroup",Yp="isManual",$p="hasFullStack",Nd="assembly",xs="fileName",Wo="line",Ko="method",Cd="level",xf="aiDataContract",Ic="duration",qi="receivedResponse";function Ds(d,g,S){var D=g[vt],j=xd(d,g);if(j[vt]!==D){for(var J=0,X=j;S[X]!==void 0;)J++,X=ss(j,0,147)+$u(J);j=X}return j}function xd(d,g){var S;return g&&(g=fi(Lr(g)),g[vt]>150&&(S=ss(g,0,150),Eo(d,2,57,"name is too long.  It has been truncated to 150 characters.",{name:g},!0))),S||g}function ta(d,g,S){S===void 0&&(S=1024);var D;return g&&(S=S||1024,g=fi(Lr(g)),g[vt]>S&&(D=ss(g,0,S),Eo(d,2,61,"string value is too long. It has been truncated to "+S+" characters.",{value:g},!0))),D||g}function lu(d,g){return Nc(d,g,2048,66)}function Df(d,g){var S;return g&&g[vt]>32768&&(S=ss(g,0,32768),Eo(d,2,56,"message is too long, it has been truncated to 32768 characters.",{message:g},!0)),S||g}function Rs(d,g){var S;if(g){var D=""+g;D[vt]>32768&&(S=ss(D,0,32768),Eo(d,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:g},!0))}return S||g}function Mi(d,g){if(g){var S={};Xt(g,function(D,j){if(Wt(j)&&Xs())try{j=bo()[Fp](j)}catch(J){Eo(d,2,49,"custom property is not valid",{exception:J},!0)}j=ta(d,j,8192),D=Ds(d,D,S),S[D]=j}),g=S}return g}function Yu(d,g){if(g){var S={};Xt(g,function(D,j){D=Ds(d,D,S),S[D]=j}),g=S}return g}function Dd(d,g){return g&&Nc(d,g,128,69)[io]()}function Nc(d,g,S,D){var j;return g&&(g=fi(Lr(g)),g[vt]>S&&(j=ss(g,0,S),Eo(d,2,D,"input is too long, it has been truncated to "+S+" characters.",{data:g},!0))),j||g}function $u(d){var g="00"+d;return Ca(g,g[vt]-3)}var xv=ua()||{},Mm=0,Dv=[null,null,null,null,null];function Cc(d){var g=Mm,S=Dv,D=S[g];return xv.createElement?S[g]||(D=S[g]=xv.createElement("a")):D={host:Rd(d,!0)},D.href=d,g++,g>=S[vt]&&(g=0),Mm=g,D}function Rf(d){var g,S=Cc(d);return S&&(g=S.href),g}function Fm(d){var g,S=Cc(d);return S&&(g=S[Lm]),g}function yh(d,g){return d?d.toUpperCase()+" "+g:g}function Rd(d,g){var S=Bp(d,g)||"";if(S){var D=S[Up](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(D!=null&&D[vt]>3&&Le(D[2])&&D[2][vt]>0)return D[2]+(D[3]||"")}return S}function Bp(d,g){var S=null;if(d){var D=d[Up](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(D!=null&&D[vt]>2&&Le(D[2])&&D[2][vt]>0&&(S=D[2]||"",g&&D[vt]>2)){var j=(D[1]||"")[Ts](),J=D[3]||"";(j==="http"&&J===":80"||j==="https"&&J===":443")&&(J=""),S+=J}}return S}var xc=[Pp+Ed,"https://breeze.aimon.applicationinsights.io"+Ed,"https://dc-int.services.visualstudio.com"+Ed],Bu="cid-v1:";function qp(d){return ol(xc,d[Ts]())!==-1}function Os(d){Bu=d}function Od(){return Bu}function Of(d,g,S){if(!g||d&&d.disableCorrelationHeaders)return!1;if(d&&d[ju]){for(var D=0;D<d.correlationHeaderExcludePatterns[vt];D++)if(d[ju][D].test(g))return!1}var j=Cc(g).host[Ts]();if(j&&(Zi(j,":443")!==-1||Zi(j,":80")!==-1)&&(j=(Bp(g,!0)||"")[Ts]()),(!d||!d.enableCorsCorrelation)&&j&&j!==S)return!1;var J=d&&d.correlationHeaderDomains;if(J){var X;if(ci(J,function(ye){var Xe=new RegExp(ye.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));X=X||Xe.test(j)}),!X)return!1}var oe=d&&d.correlationHeaderExcludedDomains;if(!oe||oe[vt]===0)return!0;for(var D=0;D<oe[vt];D++){var ve=new RegExp(oe[D].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(ve.test(j))return!1}return j&&j[vt]>0}function As(d){if(d){var g=kl(d,Lp[1]);if(g&&g!==Bu)return g}}function kl(d,g){if(d)for(var S=d[su](","),D=0;D<S[vt];++D){var j=S[D][su]("=");if(j[vt]===2&&j[0]===g)return j[1]}}function Rv(d,g,S,D){var j,J=D,X=D;if(g&&g[vt]>0){var oe=Cc(g);if(j=oe.host,!J)if(oe[Lm]!=null){var ve=oe.pathname[vt]===0?"/":oe[Lm];ve.charAt(0)!=="/"&&(ve="/"+ve),X=oe[Lm],J=ta(d,S?S+" "+ve:ve)}else J=ta(d,g)}else j=D,J=D;return{target:j,name:J,data:X}}function Dc(){var d=Tr();if(d&&d.now&&d.timing){var g=d.now()+d.timing.navigationStart;if(g>0)return g}return gn()}function wh(d,g){var S=null;return d!==0&&g!==0&&!rt(d)&&!rt(g)&&(S=g-d),S}function Ov(d,g){var S=d||{};return{getName:function(){return S[Ns]},setName:function(D){g&&g.setName(D),S[Ns]=D},getTraceId:function(){return S.traceID},setTraceId:function(D){g&&g.setTraceId(D),_c(D)&&(S.traceID=D)},getSpanId:function(){return S.parentID},setSpanId:function(D){g&&g.setSpanId(D),Op(D)&&(S.parentID=D)},getTraceFlags:function(){return S.traceFlags},setTraceFlags:function(D){g&&g.setTraceFlags(D),S.traceFlags=D}}}var Af=of({LocalStorage:0,SessionStorage:1}),Um=of({AI:0,AI_AND_W3C:1,W3C:2}),Av=of({Normal:1,Critical:2}),qu=void 0,No=void 0,cu="";function Hu(){return Pl()?Rc(Af.LocalStorage):null}function Rc(d){try{if(rt(zs()))return null;var g=new Date()[io](),S=li(d===Af.LocalStorage?"localStorage":"sessionStorage"),D=cu+g;S.setItem(D,g);var j=S.getItem(D)!==g;if(S[Sc](D),!j)return S}catch{}return null}function Oc(){return Gp()?Rc(Af.SessionStorage):null}function Ad(){qu=!1,No=!1}function kf(d){cu=d||""}function Jo(){qu=Pl(!0),No=Gp(!0)}function Pl(d){return(d||qu===void 0)&&(qu=!!Rc(Af.LocalStorage)),qu}function kv(d,g){var S=Hu();if(S!==null)try{return S.getItem(g)}catch(D){qu=!1,Eo(d,2,1,"Browser failed read of local storage. "+Mo(D),{exception:Ct(D)})}return null}function Pv(d,g,S){var D=Hu();if(D!==null)try{return D.setItem(g,S),!0}catch(j){qu=!1,Eo(d,2,3,"Browser failed write to local storage. "+Mo(j),{exception:Ct(j)})}return!1}function Hp(d,g){var S=Hu();if(S!==null)try{return S[Sc](g),!0}catch(D){qu=!1,Eo(d,2,5,"Browser failed removal of local storage item. "+Mo(D),{exception:Ct(D)})}return!1}function Gp(d){return(d||No===void 0)&&(No=!!Rc(Af.SessionStorage)),No}function Zo(){var d=[];return Gp()&&Xt(li("sessionStorage"),function(g){d[Tf](g)}),d}function Gu(d,g){var S=Oc();if(S!==null)try{return S.getItem(g)}catch(D){No=!1,Eo(d,2,2,"Browser failed read of session storage. "+Mo(D),{exception:Ct(D)})}return null}function Ac(d,g,S){var D=Oc();if(D!==null)try{return D.setItem(g,S),!0}catch(j){No=!1,Eo(d,2,4,"Browser failed write to session storage. "+Mo(j),{exception:Ct(j)})}return!1}function Lv(d,g){var S=Oc();if(S!==null)try{return S[Sc](g),!0}catch(D){No=!1,Eo(d,2,6,"Browser failed removal of session storage item. "+Mo(D),{exception:Ct(D)})}return!1}var Vp="appInsightsThrottle",Mv=function(){function d(g,S){var D=this,j,J,X,oe,ve,ye,Xe,Mt=!1,sr=!1;ft(),D._getDbgPlgTargets=function(){return[Xe]},D.getConfig=function(){return X},D.canThrottle=function(Fe){var Nt=Hd(Fe),Gt=ur(Fe);return kr(Gt,j,Nt)},D.isTriggered=function(Fe){return Qp(Fe)},D.isReady=function(){return Mt},D.flush=function(Fe){try{var Nt=qv(Fe);if(Nt&&Nt[vt]>0){var Gt=Nt.slice(0);return Xe[Fe]=[],ci(Gt,function(tn){pr(tn.msgID,tn[Io],tn.severity,!1)}),!0}}catch{}return!1},D.flushAll=function(){try{if(Xe){var Fe=!0;return Xt(Xe,function(Nt){var Gt=D.flush(parseInt(Nt));Fe=Fe&&Gt}),Fe}}catch{}return!1},D.onReadyState=function(Fe,Nt){return Nt===void 0&&(Nt=!0),Mt=rt(Fe)?!0:Fe,Mt&&Nt?D.flushAll():null},D.sendMessage=function(Fe,Nt,Gt){return pr(Fe,Nt,Gt,!0)};function pr(Fe,Nt,Gt,tn){if(Mt){var _n=qd(Fe);if(!_n)return;var Tn=ur(Fe),wi=Hd(Fe),Ju=kr(Tn,j,wi),Us=!1,Zu=0,Bc=Qp(Fe);try{Ju&&!Bc?(Zu=Math.min(Tn.limit.maxSendNumber,wi[Ec]+1),wi[Ec]=0,Us=!0,ve[Fe]=!0,wi[Id]=new Date):(ve[Fe]=Ju,wi[Ec]+=1);var Hv=At(Fe);so(J,Hv,wi);for(var em=0;em<Zu;em++)Xm(Fe,J,Nt,Gt)}catch{}return{isThrottled:Us,throttleNum:Zu}}else if(tn){var Ff=qv(Fe);Ff[Tf]({msgID:Fe,message:Nt,severity:Gt})}return null}function ft(){J=Nv(g),ve={},oe={},Xe={},X={},Yt(109),ye=Za(S)?S:"",g.addUnloadHook(ha(g.config,function(Fe){var Nt=Fe.cfg;j=Pl();var Gt=Nt.throttleMgrCfg||{};Xt(Gt,function(tn,_n){Yt(parseInt(tn),_n)})}))}function ur(Fe){return X[Fe]||X[109]}function Yt(Fe,Nt){var Gt,tn;try{var _n=Nt||{},Tn={};Tn[uu]=!!_n[uu];var wi=_n[If]||{};sr=(wi==null?void 0:wi.daysOfMonth)&&(wi==null?void 0:wi.daysOfMonth[vt])>0,Tn[If]=Ar(wi);var Ju={samplingRate:((Gt=_n.limit)===null||Gt===void 0?void 0:Gt.samplingRate)||100,maxSendNumber:((tn=_n.limit)===null||tn===void 0?void 0:tn.maxSendNumber)||1};Tn.limit=Ju,X[Fe]=Tn}catch{}}function Ar(Fe){Fe=Fe||{};var Nt=Fe==null?void 0:Fe.monthInterval,Gt=Fe==null?void 0:Fe.dayInterval;return rt(Nt)&&rt(Gt)&&(Fe.monthInterval=3,sr||(Fe[Tc]=[28],sr=!0)),Fe={monthInterval:Fe==null?void 0:Fe.monthInterval,dayInterval:Fe==null?void 0:Fe.dayInterval,daysOfMonth:Fe==null?void 0:Fe.daysOfMonth},Fe}function kr(Fe,Nt,Gt){if(Fe&&!Fe[uu]&&Nt&&Za(Gt)){var tn=Fn(),_n=Gt[Nf],Tn=Fe[If],wi=1;if(Tn!=null&&Tn.monthInterval){var Ju=(tn.getUTCFullYear()-_n.getUTCFullYear())*12+tn.getUTCMonth()-_n.getUTCMonth();wi=Bd(Tn.monthInterval,0,Ju)}var Us=1;if(sr)Us=ol(Tn[Tc],tn[Mp]());else if(Tn!=null&&Tn.dayInterval){var Zu=Math.floor((tn.getTime()-_n.getTime())/864e5);Us=Bd(Tn.dayInterval,0,Zu)}return wi>=0&&Us>=0}return!1}function At(Fe,Nt){var Gt=Za(Nt)?Nt:"";return Fe?Vp+Gt+"-"+Fe:null}function Mn(Fe){try{if(Fe){var Nt=new Date;return Fe.getUTCFullYear()===Nt.getUTCFullYear()&&Fe.getUTCMonth()===Nt.getUTCMonth()&&Fe[Mp]()===Nt[Mp]()}}catch{}return!1}function Mf(Fe,Nt,Gt){try{var tn={date:Fn(),count:0};if(Fe){var _n=JSON.parse(Fe),Tn={date:Fn(_n[Nf])||tn[Nf],count:_n[Ec]||tn[Ec],preTriggerDate:_n.preTriggerDate?Fn(_n[Id]):void 0};return Tn}else return so(Nt,Gt,tn),tn}catch{}return null}function Fn(Fe){try{if(Fe){var Nt=new Date(Fe);if(!isNaN(Nt.getDate()))return Nt}else return new Date}catch{}return null}function so(Fe,Nt,Gt){try{return Pv(Fe,Nt,fi(JSON[Fp](Gt)))}catch{}return!1}function Bd(Fe,Nt,Gt){return Fe<=0?1:Gt>=Nt&&(Gt-Nt)%Fe==0?Math.floor((Gt-Nt)/Fe)+1:-1}function Xm(Fe,Nt,Gt,tn){Eo(Nt,tn||1,Fe,Gt)}function qd(Fe){try{var Nt=ur(Fe);return Qs(1e6)<=Nt.limit.samplingRate}catch{}return!1}function Hd(Fe){try{var Nt=oe[Fe];if(!Nt){var Gt=At(Fe,ye);Nt=Mf(kv(J,Gt),J,Gt),oe[Fe]=Nt}return oe[Fe]}catch{}return null}function Qp(Fe){var Nt=ve[Fe];if(rt(Nt)){Nt=!1;var Gt=Hd(Fe);Gt&&(Nt=Mn(Gt[Id])),ve[Fe]=Nt}return ve[Fe]}function qv(Fe){return Xe=Xe||{},rt(Xe[Fe])&&(Xe[Fe]=[]),Xe[Fe]}}return d}(),jm=";",zp="=";function Ll(d){if(!d)return{};var g=d[su](jm),S=Or(g,function(j,J){var X=J[su](zp);if(X[vt]===2){var oe=X[0][Ts](),ve=X[1];j[oe]=ve}return j},{});if(Ui(S)[vt]>0){if(S.endpointsuffix){var D=S.location?S.location+".":"";S[Is]=S[Is]||"https://"+D+"dc."+S.endpointsuffix}S[Is]=S[Is]||Pp,fs(S[Is],"/")&&(S[Is]=S[Is].slice(0,-1))}return S}var Co={parse:Ll},kd=function(){function d(g,S,D){var j=this,J=this;J.ver=1,J.sampleRate=100,J.tags={},J[Ns]=ta(g,D)||Li,J.data=S,J.time=fr(new Date),J[xf]={time:1,iKey:1,name:1,sampleRate:function(){return j.sampleRate===100?4:1},tags:1,data:1}}return d}(),kc=function(){function d(g,S,D,j){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var J=this;J.ver=2,J[Ns]=ta(g,S)||Li,J[Cs]=Mi(g,D),J[Vo]=Yu(g,j)}return d.envelopeType="Microsoft.ApplicationInsights.{0}.Event",d.dataType="EventData",d}(),Xo=58,sg=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Wp=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,bh=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,ug=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,Hi=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,Pd=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,Ld=/([^\(\s\n]+):([0-9]+)$/,Fv="<no_method>",Pc="error",_a="stack",xo="stackDetails",Md="errorSrc",Vu="message",Ml="description",ks=[{re:Wp,len:5,m:1,fn:2,ln:3,col:4},{chk:Uv,pre:Ym,re:bh,len:4,m:1,fn:2,ln:3},{re:ug,len:3,m:1,fn:2,hdl:du},{re:Hi,len:2,fn:1,hdl:du}];function Ym(d){return d.replace(/(\(anonymous\))/,"<anonymous>")}function Uv(d){return Zi(d,"[native")<0}function ht(d,g){var S=d;return S&&!Le(S)&&(JSON&&JSON[Fp]?(S=JSON[Fp](d),g&&(!S||S==="{}")&&(Zt(d[io])?S=d[io]():S=""+d)):S=""+d+" - (Missing JSON.stringify)"),S||""}function zu(d,g){var S=d;return d&&(S&&!Le(S)&&(S=d[Vu]||d[Ml]||S),S&&!Le(S)&&(S=ht(S,!0)),d.filename&&(S=S+" @"+(d.filename||"")+":"+(d.lineno||"?")+":"+(d.colno||"?"))),g&&g!=="String"&&g!=="Object"&&g!=="Error"&&Zi(S||"",g)===-1&&(S=g+": "+S),S||""}function fu(d){try{if(Wt(d))return"hasFullStack"in d&&"typeName"in d}catch{}return!1}function Pf(d){try{if(Wt(d))return"ver"in d&&"exceptions"in d&&"properties"in d}catch{}return!1}function jv(d){return d&&d.src&&Le(d.src)&&d.obj&&Tt(d.obj)}function Fl(d){var g=d||"";Le(g)||(Le(g[_a])?g=g[_a]:g=""+g);var S=g[su](`
`);return{src:g,obj:S}}function Fd(d){for(var g=[],S=d[su](`
`),D=0;D<S[vt];D++){var j=S[D];S[D+1]&&(j+="@"+S[D+1],D++),g[Tf](j)}return{src:d,obj:g}}function Ps(d){var g=null;if(d)try{if(d[_a])g=Fl(d[_a]);else if(d[Pc]&&d[Pc][_a])g=Fl(d[Pc][_a]);else if(d.exception&&d.exception[_a])g=Fl(d.exception[_a]);else if(jv(d))g=d;else if(jv(d[xo]))g=d[xo];else if(Dn()&&Dn().opera&&d[Vu])g=Fd(d[Io]);else if(d.reason&&d.reason[_a])g=Fl(d.reason[_a]);else if(Le(d))g=Fl(d);else{var S=d[Vu]||d[Ml]||"";Le(d[Md])&&(S&&(S+=`
`),S+=" from "+d[Md]),S&&(g=Fl(S))}}catch(D){g=Fl(D)}return g||{src:"",obj:null}}function Yv(d){var g="";return d&&(d.obj?g=d.obj.join(`
`):g=d.src||""),g}function Kp(d){var g,S=d.obj;if(S&&S[vt]>0){g=[];var D=0,j=!1,J=0;ci(S,function(ur){if(j||Jp(ur)){var Yt=Lr(ur);j=!0;var Ar=Gm(Yt,D);Ar&&(J+=Ar[zo],g[Tf](Ar),D++)}});var X=32*1024;if(J>X)for(var oe=0,ve=g[vt]-1,ye=0,Xe=oe,Mt=ve;oe<ve;){var sr=g[oe][zo],pr=g[ve][zo];if(ye+=sr+pr,ye>X){var ft=Mt-Xe+1;g.splice(Xe,ft);break}Xe=oe,Mt=ve,oe++,ve--}}return g}function Lc(d){var g="";if(d&&(g=d.typeName||d[Ns]||"",!g))try{var S=/function (.{1,200})\(/,D=S.exec(d.constructor[io]());g=D&&D[vt]>1?D[1]:""}catch{}return g}function Ul(d){if(d)try{if(!Le(d)){var g=Lc(d),S=ht(d,!1);return(!S||S==="{}")&&(d[Pc]&&(d=d[Pc],g=Lc(d)),S=ht(d,!0)),Zi(S,g)!==0&&g!=="String"?g+":"+S:S}}catch{}return""+(d||"")}var jl=function(){function d(g,S,D,j,J,X){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var oe=this;oe.ver=2,Pf(S)?(oe[Cf]=S[Cf]||[],oe[Cs]=S[Cs],oe[Vo]=S[Vo],S[jp]&&(oe[jp]=S[jp]),S.id&&(oe.id=S.id,S[Cs].id=S.id),S[Al]&&(oe[Al]=S[Al]),rt(S[Yp])||(oe[Yp]=S[Yp])):(D||(D={}),X&&(D.id=X),oe[Cf]=[Ls(g,S,D)],oe[Cs]=Mi(g,D),oe[Vo]=Yu(g,j),J&&(oe[jp]=J),X&&(oe.id=X))}return d.CreateAutoException=function(g,S,D,j,J,X,oe,ve){var ye,Xe=Lc(J||X||g);return ye={},ye[Io]=zu(g,Xe),ye.url=S,ye.lineNumber=D,ye.columnNumber=j,ye.error=Ul(J||X||g),ye.evt=Ul(X||g),ye[Ol]=Xe,ye.stackDetails=Ps(oe||J||X),ye.errorSrc=ve,ye},d.CreateFromInterface=function(g,S,D,j){var J=S[Cf]&&Oa(S[Cf],function(oe){return Bm(g,oe)}),X=new d(g,oc(oc({},S),{exceptions:J}),D,j);return X},d.prototype.toInterface=function(){var g,S=this,D=S.exceptions,j=S.properties,J=S.measurements,X=S.severityLevel,oe=S.problemGroup,ve=S.id,ye=S.isManual,Xe=D instanceof Array&&Oa(D,function(Mt){return Mt.toInterface()})||void 0;return g={ver:"4.0"},g[Cf]=Xe,g.severityLevel=X,g.properties=j,g.measurements=J,g.problemGroup=oe,g.id=ve,g.isManual=ye,g},d.CreateSimpleException=function(g,S,D,j,J,X){var oe;return{exceptions:[(oe={},oe[$p]=!0,oe.message=g,oe.stack=J,oe.typeName=S,oe)]}},d.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",d.dataType="ExceptionData",d.formatError=Ul,d}(),$m=Fr({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function nn(){var d,g=this,S=Tt(g[Go])&&Oa(g[Go],function(j){return Mc(j)}),D=(d={id:g.id,outerId:g.outerId,typeName:g[Ol],message:g[Io],hasFullStack:g[$p],stack:g[_a]},d[Go]=S||void 0,d);return D}function Ls(d,g,S){var D,j,J,X,oe,ve,ye,Xe;if(fu(g))X=g[Ol],oe=g[Io],ye=g[_a],Xe=g[Go]||[],ve=g[$p];else{var Mt=g,sr=Mt&&Mt.evt;hn(Mt)||(Mt=Mt[Pc]||sr||Mt),X=ta(d,Lc(Mt))||Li,oe=Df(d,zu(g||Mt,X))||Li;var pr=g[xo]||Ps(g);Xe=Kp(pr),Tt(Xe)&&Oa(Xe,function(ft){ft[Nd]=ta(d,ft[Nd]),ft[xs]=ta(d,ft[xs])}),ye=Rs(d,Yv(pr)),ve=Tt(Xe)&&Xe[vt]>0,S&&(S[Ol]=S[Ol]||X)}return D={},D[xf]=$m,D.id=j,D.outerId=J,D[Ol]=X,D[Io]=oe,D[$p]=ve,D.stack=ye,D[Go]=Xe,D.toInterface=nn,D}function Bm(d,g){var S=Tt(g[Go])&&Oa(g[Go],function(j){return Ud(j)})||g[Go],D=Ls(d,oc(oc({},g),{parsedStack:S}));return D}function qm(d,g){var S=g[Up](Pd);if(S&&S[vt]>=4)d[xs]=S[1],d[Wo]=parseInt(S[2]);else{var D=g[Up](Ld);D&&D[vt]>=3?(d[xs]=D[1],d[Wo]=parseInt(D[2])):d[xs]=g}}function du(d,g,S){var D=d[xs];g.fn&&S&&S[vt]>g.fn&&(g.ln&&S[vt]>g.ln?(D=fi(S[g.fn]||""),d[Wo]=parseInt(fi(S[g.ln]||""))||0):D=fi(S[g.fn]||"")),D&&qm(d,D)}function Jp(d){var g=!1;if(d&&Le(d)){var S=fi(d);S&&(g=sg.test(S))}return g}var Hm=Fr({level:1,method:1,assembly:0,fileName:0,line:0});function Gm(d,g){var S,D;if(d&&Le(d)&&fi(d)){D=(S={},S[xf]=Hm,S[Cd]=g,S[Nd]=fi(d),S[Ko]=Fv,S.fileName="",S.line=0,S[zo]=0,S);for(var j=0;j<ks[vt];){var J=ks[j];if(J.chk&&!J.chk(d))break;J.pre&&(d=J.pre(d));var X=d[Up](J.re);if(X&&X[vt]>=J.len){J.m&&(D[Ko]=fi(X[J.m]||Fv)),J.hdl?J.hdl(D,J,X):J.fn&&(J.ln?(D[xs]=fi(X[J.fn]||""),D[Wo]=parseInt(fi(X[J.ln]||""))||0):qm(D,X[J.fn]||""));break}j++}}return jd(D)}function Ud(d){var g,S=(g={},g[xf]=Hm,g.level=d[Cd],g.method=d[Ko],g.assembly=d[Nd],g.fileName=d[xs],g.line=d[Wo],g[zo]=0,g);return jd(S)}function jd(d){var g=Xo;return d&&(g+=d.method[vt],g+=d.assembly[vt],g+=d.fileName[vt],g+=d.level.toString()[vt],g+=d.line.toString()[vt],d[zo]=g),d}function Mc(d){return{level:d[Cd],method:d[Ko],assembly:d[Nd],fileName:d[xs],line:d[Wo]}}var Yl=function(){function d(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return d}(),Zp=function(){function d(g,S,D,j,J,X,oe,ve,ye){this.aiDataContract={ver:1,metrics:1,properties:0};var Xe=this;Xe.ver=2;var Mt=new Yl;Mt[Ec]=j>0?j:void 0,Mt.max=isNaN(X)||X===null?void 0:X,Mt.min=isNaN(J)||J===null?void 0:J,Mt[Ns]=ta(g,S)||Li,Mt.value=D,Mt.stdDev=isNaN(oe)||oe===null?void 0:oe,Xe.metrics=[Mt],Xe[Cs]=Mi(g,ve),Xe[Vo]=Yu(g,ye)}return d.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",d.dataType="MetricData",d}(),Fc="";function Vm(d,g){return g===void 0&&(g=!1),d==null?g:d.toString()[Ts]()==="true"}function Do(d){(isNaN(d)||d<0)&&(d=0),d=Math.round(d);var g=Fc+d%1e3,S=Fc+Math.floor(d/1e3)%60,D=Fc+Math.floor(d/(1e3*60))%60,j=Fc+Math.floor(d/(1e3*60*60))%24,J=Math.floor(d/(1e3*60*60*24));return g=g[vt]===1?"00"+g:g[vt]===2?"0"+g:g,S=S[vt]<2?"0"+S:S,D=D[vt]<2?"0"+D:D,j=j[vt]<2?"0"+j:j,(J>0?J+".":Fc)+j+":"+D+":"+S+"."+g}function zm(d,g){var S=null;return ci(d,function(D){if(D.identifier===g)return S=D,-1}),S}function Yd(d,g,S,D,j){return!j&&Le(d)&&(d==="Script error."||d==="Script error")}var $v=function(){function d(g,S,D,j,J,X,oe){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var ve=this;ve.ver=2,ve.id=Dd(g,oe),ve.url=lu(g,D),ve[Ns]=ta(g,S)||Li,isNaN(j)||(ve[Ic]=Do(j)),ve[Cs]=Mi(g,J),ve[Vo]=Yu(g,X)}return d.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",d.dataType="PageviewData",d}(),Ms=function(){function d(g,S,D,j,J,X,oe,ve,ye,Xe,Mt,sr){ye===void 0&&(ye="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var pr=this;pr.ver=2,pr.id=S,pr[Ic]=Do(J),pr.success=X,pr.resultCode=oe+"",pr.type=ta(g,ye);var ft=Rv(g,D,ve,j);pr.data=lu(g,j)||ft.data,pr.target=ta(g,ft.target),Xe&&(pr.target="".concat(pr.target," | ").concat(Xe)),pr[Ns]=ta(g,ft[Ns]),pr[Cs]=Mi(g,Mt),pr[Vo]=Yu(g,sr)}return d.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",d.dataType="RemoteDependencyData",d}(),Sh=function(){function d(g,S,D,j,J){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var X=this;X.ver=2,S=S||Li,X[Io]=Df(g,S),X[Cs]=Mi(g,j),X[Vo]=Yu(g,J),D&&(X[jp]=D)}return d.envelopeType="Microsoft.ApplicationInsights.{0}.Message",d.dataType="MessageData",d}(),Wu=function(){function d(g,S,D,j,J,X,oe){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var ve=this;ve.ver=2,ve.url=lu(g,D),ve[Ns]=ta(g,S)||Li,ve[Cs]=Mi(g,J),ve[Vo]=Yu(g,X),oe&&(ve.domProcessing=oe.domProcessing,ve[Ic]=oe[Ic],ve.networkConnect=oe.networkConnect,ve.perfTotal=oe.perfTotal,ve[qi]=oe[qi],ve.sentRequest=oe.sentRequest)}return d.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",d.dataType="PageviewPerformanceData",d}(),Wm=function(){function d(g,S){this.aiDataContract={baseType:1,baseData:1},this.baseType=g,this.baseData=S}return d}(),Uc=of({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),Bv=function(){function d(){}return d.getConfig=function(g,S,D,j){j===void 0&&(j=!1);var J;return D&&g[Rl]&&g[Rl][D]&&!rt(g[Rl][D][S])?J=g[Rl][D][S]:J=g[S],rt(J)?j:J},d}();function Qo(d){var g="ai."+d+".";return function(S){return g+S}}var Fs=Qo("application"),Gn=Qo("device"),Lf=Qo("location"),jc=Qo("operation"),$d=Qo("session"),dr=Qo("user"),ao=Qo("cloud"),oo=Qo("internal"),Fi=function(d){Sv(g,d);function g(){return d.call(this)||this}return g}(hs({applicationVersion:Fs("ver"),applicationBuild:Fs("build"),applicationTypeId:Fs("typeId"),applicationId:Fs("applicationId"),applicationLayer:Fs("layer"),deviceId:Gn("id"),deviceIp:Gn("ip"),deviceLanguage:Gn("language"),deviceLocale:Gn("locale"),deviceModel:Gn("model"),deviceFriendlyName:Gn("friendlyName"),deviceNetwork:Gn("network"),deviceNetworkName:Gn("networkName"),deviceOEMName:Gn("oemName"),deviceOS:Gn("os"),deviceOSVersion:Gn("osVersion"),deviceRoleInstance:Gn("roleInstance"),deviceRoleName:Gn("roleName"),deviceScreenResolution:Gn("screenResolution"),deviceType:Gn("type"),deviceMachineName:Gn("machineName"),deviceVMName:Gn("vmName"),deviceBrowser:Gn("browser"),deviceBrowserVersion:Gn("browserVersion"),locationIp:Lf("ip"),locationCountry:Lf("country"),locationProvince:Lf("province"),locationCity:Lf("city"),operationId:jc("id"),operationName:jc("name"),operationParentId:jc("parentId"),operationRootId:jc("rootId"),operationSyntheticSource:jc("syntheticSource"),operationCorrelationVector:jc("correlationVector"),sessionId:$d("id"),sessionIsFirst:$d("isFirst"),sessionIsNew:$d("isNew"),userAccountAcquisitionDate:dr("accountAcquisitionDate"),userAccountId:dr("accountId"),userAgent:dr("userAgent"),userId:dr("id"),userStoreRegion:dr("storeRegion"),userAuthUserId:dr("authUserId"),userAnonymousUserAcquisitionDate:dr("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:dr("authUserAcquisitionDate"),cloudName:ao("name"),cloudRole:ao("role"),cloudRoleVer:ao("roleVer"),cloudRoleInstance:ao("roleInstance"),cloudEnvironment:ao("environment"),cloudLocation:ao("location"),cloudDeploymentUnit:ao("deploymentUnit"),internalNodeName:oo("nodeName"),internalSdkVersion:oo("sdkVersion"),internalAgentVersion:oo("agentVersion"),internalSnippet:oo("snippet"),internalSdkSrc:oo("sdkSrc")}));function Yc(d,g,S,D,j,J){var X;S=ta(D,S)||Li,(rt(d)||rt(g)||rt(S))&&Mr("Input doesn't contain all required fields");var oe="";d[Td]&&(oe=d[Td],delete d[Td]);var ve=(X={},X[Ns]=S,X.time=fr(new Date),X.iKey=oe,X.ext=J||{},X.tags=[],X.data={},X.baseType=g,X.baseData=d,X);return rt(j)||Xt(j,function(ye,Xe){ve.data[ye]=Xe}),ve}var En=function(){function d(){}return d.create=Yc,d}(),$c={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},pu=new Fi;function Xp(d){var g=null;if(Zt(Event))g=new Event(d);else{var S=ua();S&&S.createEvent&&(g=S.createEvent("Event"),g.initEvent(d,!0,!0))}return g}function mu(d,g){kp(d,null,null,g)}function Km(d){var g=ua(),S=Zr(),D=!1,j=[],J=1;S&&!rt(S.onLine)&&!S.onLine&&(J=2);var X=0,oe=sr(),ve=Ef(Fa("OfflineListener"),d);try{if(Xe(Dn())&&(D=!0),g){var ye=g.body||g;ye.ononline&&Xe(ye)&&(D=!0)}}catch{D=!1}function Xe(At){var Mn=!1;return At&&(Mn=wc(At,"online",ur,ve),Mn&&wc(At,"offline",Yt,ve)),Mn}function Mt(){return oe}function sr(){return!(X===2||J===2)}function pr(){var At=sr();oe!==At&&(oe=At,ci(j,function(Mn){var Mf={isOnline:oe,rState:J,uState:X};try{Mn(Mf)}catch{}}))}function ft(At){X=At,pr()}function ur(){J=1,pr()}function Yt(){J=2,pr()}function Ar(){var At=Dn();if(At&&D){if(mu(At,ve),g){var Mn=g.body||g;Ht(Mn.ononline)||mu(Mn,ve)}D=!1}}function kr(At){return j[Tf](At),{rm:function(){var Mn=j.indexOf(At);if(Mn>-1)return j.splice(Mn,1)}}}return{isOnline:Mt,isListening:function(){return D},unload:Ar,addListener:kr,setOnlineState:ft}}var Ku="AppInsightsPropertiesPlugin",Jm="AppInsightsChannelPlugin",Zm="ApplicationInsightsAnalytics";t.AnalyticsPluginIdentifier=Zm,t.BreezeChannelIdentifier=Jm,t.ConfigurationManager=Bv,t.ConnectionStringParser=Co,t.ContextTagKeys=Fi,t.CtxTagKeys=pu,t.DEFAULT_BREEZE_ENDPOINT=Pp,t.DEFAULT_BREEZE_PATH=Ed,t.Data=Wm,t.DisabledPropertyName=di,t.DistributedTracingModes=Um,t.Envelope=kd,t.Event=kc,t.EventPersistence=Av,t.Exception=jl,t.Extensions=$c,t.HttpMethod=Uu,t.Metric=Zp,t.PageView=$v,t.PageViewPerformance=Wu,t.ProcessLegacy=Pi,t.PropertiesPluginIdentifier=Ku,t.RemoteDependencyData=Ms,t.RequestHeaders=Lp,t.SampleRate=bc,t.SeverityLevel=Uc,t.TelemetryItemCreator=En,t.ThrottleMgr=Mv,t.Trace=Sh,t.correlationIdCanIncludeCorrelationHeader=Of,t.correlationIdGetCorrelationContext=As,t.correlationIdGetCorrelationContextValue=kl,t.correlationIdGetPrefix=Od,t.correlationIdSetPrefix=Os,t.createDistributedTraceContextFromTrace=Ov,t.createDomEvent=Xp,t.createOfflineListener=Km,t.createTelemetryItem=Yc,t.createTraceParent=Cv,t.dataSanitizeException=Rs,t.dataSanitizeId=Dd,t.dataSanitizeInput=Nc,t.dataSanitizeKey=xd,t.dataSanitizeKeyAndAddUniqueness=Ds,t.dataSanitizeMeasurements=Yu,t.dataSanitizeMessage=Df,t.dataSanitizeProperties=Mi,t.dataSanitizeString=ta,t.dataSanitizeUrl=lu,t.dateTimeUtilsDuration=wh,t.dateTimeUtilsNow=Dc,t.dsPadNumber=$u,t.findAllScripts=Ap,t.findW3cTraceParent=ki,t.formatTraceParent=Nl,t.getExtensionByName=zm,t.isBeaconApiSupported=Uo,t.isCrossOriginError=Yd,t.isInternalApplicationInsightsEndpoint=qp,t.isSampledFlag=en,t.isValidSpanId=Op,t.isValidTraceId=_c,t.isValidTraceParent=iu,t.msToTimeSpan=Do,t.parseConnectionString=Ll,t.parseTraceParent=Rp,t.strNotSpecified=Li,t.stringToBoolOrDefault=Vm,t.urlGetAbsoluteUrl=Rf,t.urlGetCompleteUrl=yh,t.urlGetPathName=Fm,t.urlParseFullHost=Bp,t.urlParseHost=Rd,t.urlParseUrl=Cc,t.utlCanUseLocalStorage=Pl,t.utlCanUseSessionStorage=Gp,t.utlDisableStorage=Ad,t.utlEnableStorage=Jo,t.utlGetLocalStorage=kv,t.utlGetSessionStorage=Gu,t.utlGetSessionStorageKeys=Zo,t.utlRemoveSessionStorage=Lv,t.utlRemoveStorage=Hp,t.utlSetLocalStorage=Pv,t.utlSetSessionStorage=Ac,t.utlSetStoragePrefix=kf})});var kb=ln(U0=>{"use strict";Object.defineProperty(U0,"__esModule",{value:!0});U0.TelemetryUtil=void 0;var Ab=class t{static applyReplacements(e,r){for(let n of Object.keys(e))for(let i of r)i.lookup.test(n)&&(i.replacementString!==void 0?e[n]=i.replacementString:delete e[n])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.8"}}static getInstance(){return t._instance||(t._instance=new t),t._instance}};U0.TelemetryUtil=Ab});var oI=ln((j0,aI)=>{(function(t,e){typeof j0=="object"&&typeof aI<"u"?e(j0):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(j0,function(t){"use strict";function e(s,u){return s||u}function r(s,u){return s[u]}var n=void 0,i=null,a="",l="function",v="object",_="prototype",b="__proto__",C="undefined",U="constructor",W="Symbol",K="_polyfill",q="length",H="name",Z="call",ne="toString",he=e(Object),Ie=r(he,_),_e=e(String),Ae=r(_e,_),He=e(Math),tt=e(Array),lt=r(tt,_),Rt=r(lt,"slice");function zt(s,u){try{return{v:s.apply(this,u)}}catch(f){return{e:f}}}function Rr(s,u){var f=zt(s);return f.e?u:f.v}var cn;function jt(s){return function(u){return typeof u===s}}function Ht(s){var u="[object "+s+"]";return function(f){return!!(f&&qr(f)===u)}}function qr(s){return Ie[ne].call(s)}function rt(s){return typeof s===C||s===C}function fn(s){return!Wt(s)}function Le(s){return s===i||rt(s)}function Zt(s){return s===i||!Wt(s)}function Wt(s){return!!s||s!==n}function Tt(s){return!cn&&(cn=["string","number","boolean",C,"symbol","bigint"]),s!==v&&cn.indexOf(s)!==-1}var hn=jt("string"),st=jt(l);function ei(s){return!s&&Le(s)?!1:!!s&&typeof s===v}var ot=r(tt,"isArray"),Su=Ht("Date"),Xt=jt("number"),qa=jt("boolean"),Kt=Ht("Error");function cr(s){return!!(s&&s.then&&st(s.then))}function Ci(s){return!(!s||Rr(function(){return!(s&&0+s)},!s))}var mr=r(he,"getOwnPropertyDescriptor");function xi(s,u){return!!s&&Ie.hasOwnProperty[Z](s,u)}var Lr=e(r(he,"hasOwn"),Hn);function Hn(s,u){return xi(s,u)||!!mr(s,u)}function Ct(s,u,f){if(s&&ei(s)){for(var h in s)if(Lr(s,h)&&u[Z](f||s,h,s[h])===-1)break}}var Mr={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Ze(s){var u={};if(u[Mr.c]=!0,u[Mr.e]=!0,s.l){u.get=function(){return s.l.v};var f=mr(s.l,"v");f&&f.set&&(u.set=function(h){s.l.v=h})}return Ct(s,function(h,E){u[Mr[h]]=fn(E)?u[Mr[h]]:E}),u}var Pn=r(he,"defineProperty");function Hr(s,u,f){return Pn(s,u,Ze(f))}function Jr(s,u,f,h,E){var x={};return Ct(s,function(k,F){Na(x,k,u?F:k,E),Na(x,F,f?F:k,E)}),h?h(x):x}function Na(s,u,f,h){Pn(s,u,{value:f,enumerable:!0,writable:!!h})}var Ui=e(_e),Fr="[object Error]";function ir(s,u){var f=a,h=Ie[ne][Z](s);h===Fr&&(s={stack:Ui(s.stack),message:Ui(s.message),name:Ui(s.name)});try{f=JSON.stringify(s,i,u?typeof u=="number"?u:4:n),f=(f?f.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||Ui(s)}catch(E){f=" - "+ir(E,u)}return h+": "+f}function yr(s){throw new Error(s)}function sn(s){throw new TypeError(s)}var ed=r(he,"freeze");function ti(s){return s}function td(s){return s[b]||i}var Eu=r(he,"assign"),xn=r(he,"keys");function os(s){return ed&&Ct(s,function(u,f){(ot(f)||ei(f))&&os(f)}),Jt(s)}var Jt=e(ed,ti),ji=e(r(he,"getPrototypeOf"),td);function Ha(s){return Jr(s,1,0,Jt)}function ss(s){return Jr(s,0,0,Jt)}function Ca(s){var u={};return Ct(s,function(f,h){Na(u,f,h[1]),Na(u,h[0],h[1])}),Jt(u)}function rd(s){return Ca(s)}var il=ss({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Ji="__tsUtils$gblCfg",xa;function Di(){var s;return typeof globalThis!==C&&(s=globalThis),!s&&typeof self!==C&&(s=self),!s&&typeof window!==C&&(s=window),!s&&typeof global!==C&&(s=global),s}function us(){if(!xa){var s=zt(Di).v||{};xa=s[Ji]=s[Ji]||{}}return xa}var Gs=ui;function ui(s,u,f){var h=u?u[s]:i;return function(E){var x=(E?E[s]:i)||h;if(x||f){var k=arguments;return(x||f).apply(E,x?Rt[Z](k,1):k)}sn('"'+Ui(s)+'" not defined for '+ir(E))}}function al(s){return function(u){return u[s]}}var Vs=r(He,"max"),Da=Gs("slice",Ae),ri=Gs("substring",Ae),rc=ui("substr",Ae,zs);function zs(s,u,f){return Le(s)&&sn("Invalid "+ir(s)),f<0?a:(u=u||0,u<0&&(u=Vs(u+s[q],0)),rt(f)?Da(s,u):Da(s,u,u+f))}function li(s,u){return ri(s,0,u)}var ua="_urid",vr;function Dn(){if(!vr){var s=us();vr=s.gblSym=s.gblSym||{k:{},s:{}}}return vr}var Ra;function Zr(s){var u={description:Ui(s),toString:function(){return W+"("+s+")"}};return u[K]=!0,u}function gi(s){var u=Dn();if(!Lr(u.k,s)){var f=Zr(s),h=xn(u.s).length;f[ua]=function(){return h+"_"+f[ne]()},u.k[s]=f,u.s[f[ua]()]=Ui(s)}return u.k[s]}function Ga(s){!Ra&&(Ra={});var u,f=il[s];return f&&(u=Ra[f]=Ra[f]||Zr(W+"."+f)),u}var Xr;function la(){Xr=us()}function Tu(s){var u={};return!Xr&&la(),u.b=Xr.lzy,Pn(u,"v",{configurable:!0,get:function(){var f=s();return Xr.lzy||Pn(u,"v",{value:f}),u.b=Xr.lzy,f}}),u}function ca(s){return Pn({toJSON:function(){return s}},"v",{value:s})}var wn="window",ci;function ol(s,u){var f;return function(){return!Xr&&la(),(!f||Xr.lzy)&&(f=ca(zt(s,u).v)),f.v}}function Oa(s){return!Xr&&la(),(!ci||s===!1||Xr.lzy)&&(ci=ca(zt(Di).v||i)),ci.v}function Or(s,u){var f;if(!ci||u===!1?f=Oa(u):f=ci.v,f&&f[s])return f[s];if(s===wn)try{return window}catch{}return i}function Ri(){return!!nd()}var nd=ol(Or,["document"]);function Yi(){return!!ls()}var ls=ol(Or,[wn]);function nc(){return!!cs()}var cs=ol(Or,["navigator"]),id=ol(function(){return!!zt(function(){return process&&(process.versions||{}).node}).v}),gn,rf;function fa(){return gn=ca(zt(Or,[W]).v),gn}function dp(s){var u=(Xr.lzy?0:gn)||fa();return u.v?u.v[s]:n}function fi(){return!!Tm()}function Tm(){return!Xr&&la(),((Xr.lzy?0:gn)||fa()).v}function Aa(s,u){var f=il[s];!Xr&&la();var h=(Xr.lzy?0:gn)||fa();return h.v?h.v[f||s]:u?n:Ga(s)}function nf(s,u){!Xr&&la();var f=(Xr.lzy?0:gn)||fa();return f.v?f.v(s):u?i:Zr(s)}function mo(s){return!Xr&&la(),rf=(Xr.lzy?0:rf)||ca(zt(dp,["for"]).v),(rf.v||gi)(s)}function ad(s){return!!s&&st(s.next)}function Tr(s){return!Zt(s)&&st(s[Aa(3)])}var fs;function od(s,u,f){if(s&&(ad(s)||(!fs&&(fs=ca(Aa(3))),s=s[fs.v]?s[fs.v]():i),ad(s))){var h=n,E=n;try{for(var x=0;!(E=s.next()).done&&u[Z](f||s,E.value,x,s)!==-1;)x++}catch(k){h={e:k},s.throw&&(E=i,s.throw(h))}finally{try{E&&!E.done&&s.return&&s.return(E)}finally{if(h)throw h.e}}}}function Zi(s,u,f){return s.apply(u,f)}function ic(s,u){return!rt(u)&&s&&(ot(u)?Zi(s.push,s,u):ad(u)||Tr(u)?od(u,function(f){s.push(f)}):s.push(u)),s}function Lt(s,u,f){if(s)for(var h=s[q]>>>0,E=0;E<h&&!(E in s&&u[Z](f||s,s[E],E,s)===-1);E++);}var ka=Gs("indexOf",lt),sl=Gs("map",lt);function af(s,u,f){return((s?s.slice:i)||Rt).apply(s,Rt[Z](arguments,1))}var wv=Gs("reduce",lt),Va=e(r(he,"create"),of);function of(s){if(!s)return{};var u=typeof s;u!==v&&u!==l&&sn("Prototype must be an Object or function: "+ir(s));function f(){}return f[_]=s,new f}var pp;function Iu(s,u){var f=he.setPrototypeOf||function(h,E){var x;!pp&&(pp=ca((x={},x[b]=[],x instanceof Array))),pp.v?h[b]=E:Ct(E,function(k,F){return h[k]=F})};return f(s,u)}function za(s,u,f){zt(Hr,[u,H,{v:s,c:!0,e:!1}]),u=Iu(u,f);function h(){this[U]=u,zt(Hr,[this,H,{v:s,c:!0,e:!1}])}return u[_]=f===i?Va(f):(h[_]=f[_],new h),u}function pt(s,u){u&&(s[H]=u)}function Oi(s,u,f){var h=f||Error,E=h[_][H],x=Error.captureStackTrace;return za(s,function(){var k=this,F=arguments;try{zt(pt,[h,s]);var $=Zi(h,k,Rt[Z](F))||k;if($!==k){var V=ji(k);V!==ji($)&&Iu($,V)}return x&&x($,k[U]),u&&u($,F),$}finally{zt(pt,[h,E])}},h)}function Nu(){return(Date.now||Ws)()}function Ws(){return new Date().getTime()}function mp(s){return function(f){return Le(f)&&sn("strTrim called ["+ir(f)+"]"),f&&f.replace&&(f=f.replace(s,a)),f}}var vp=mp(/^\s+|(?=\s)\s+$/g),Rn=ui("trim",Ae,vp),Pa,hp,Wa;function da(s){if(!s||typeof s!==v)return!1;Wa||(Wa=Yi()?ls():!0);var u=!1;if(s!==Wa){hp||(Pa=Function[_][ne],hp=Pa[Z](he));try{var f=ji(s);u=!f,u||(xi(f,U)&&(f=f[U]),u=!!(f&&typeof f===l&&Pa[Z](f)===hp))}catch{}}return u}function hh(s){return s.value&&vo(s),!0}var bv=[Xi,vo,uf,sf];function Im(s,u,f,h){var E;return Lt(s,function(x){if(x.k===u)return E=x,-1}),E||(E={k:u,v:u},s.push(E),h(E)),E.v}function Cu(s,u,f,h){var E=f.handler,x=f.path?h?f.path.concat(h):f.path:[],k={handler:f.handler,src:f.src,path:x},F=typeof u,$=!1,V=u===i;V||(u&&F===v?$=da(u):V=Tt(F));var ee={type:F,isPrim:V,isPlain:$,value:u,result:u,path:x,origin:f.src,copy:function(fe,pe){return Cu(s,fe,pe?k:f,pe)},copyTo:function(fe,pe){return Nm(s,fe,pe,k)}};return ee.isPrim?E&&E[Z](f,ee)?ee.result:u:Im(s,u,x,function(fe){Hr(ee,"result",{g:function(){return fe.v},s:function(le){fe.v=le}});for(var pe=0,me=E;!(me||(pe<bv.length?bv[pe++]:hh))[Z](f,ee);)me=i})}function Nm(s,u,f,h){if(!Le(f))for(var E in f)u[E]=Cu(s,f[E],h,E);return u}function og(s,u,f){var h={handler:f,src:u,path:[]};return Nm([],s,u,h)}function gp(s,u){var f={handler:u,src:s};return Cu([],s,f)}function Xi(s){var u=s.value;if(ot(u)){var f=s.result=[];return f.length=u.length,s.copyTo(f,u),!0}return!1}function sf(s){var u=s.value;return Su(u)?(s.result=new Date(u.getTime()),!0):!1}function uf(s){return s.type===l}function vo(s){var u=s.value;if(u&&s.isPlain){var f=s.result={};return s.copyTo(f,u),!0}return!1}function La(s,u){return Lt(u,function(f){og(s,f)}),s}function xu(s,u,f,h,E,x,k){return La(gp(s)||{},Rt[Z](arguments))}var Cm=al(q),Ka=ui("endsWith",Ae,_p);function _p(s,u,f){hn(s)||sn("'"+ir(s)+"' is not a string");var h=hn(u)?u:Ui(u),E=!rt(f)&&f<s[q]?f:s[q];return ri(s,E-h[q],E)===h}var Du=Gs("indexOf",Ae),ac="ref",lf="unref",sd="hasRef",yp="enabled";function xm(s,u,f){var h=!0,E=s?u(i):i,x;function k(){return h=!1,E&&E[lf]&&E[lf](),x}function F(){E&&f(E),E=i}function $(){return E=u(E),h||k(),x}function V(ee){!ee&&E&&F(),ee&&!E&&$()}return x={cancel:F,refresh:$},x[sd]=function(){return E&&E[sd]?E[sd]():h},x[ac]=function(){return h=!0,E&&E[ac]&&E[ac](),x},x[lf]=k,x=Pn(x,yp,{get:function(){return!!E},set:V}),{h:x,dn:function(){E=i}}}function Dm(s,u,f){var h=ot(u),E=h?u.length:0,x=(E>0?u[0]:h?n:u)||setTimeout,k=(E>1?u[1]:n)||clearTimeout,F=f[0];f[0]=function(){$.dn(),Zi(F,n,Rt[Z](arguments))};var $=xm(s,function(V){if(V){if(V.refresh)return V.refresh(),V;Zi(k,n,[V])}return Zi(x,n,f)},function(V){Zi(k,n,[V])});return $.h}function Ru(s,u){return Dm(!0,n,Rt[Z](arguments))}function wp(s,u){return Dm(!1,n,Rt[Z](arguments))}var Ks,ul="constructor",Ja="prototype",cf="function",ud="_dynInstFuncs",oc="_isDynProxy",ho="_dynClass",Sv="_dynCls$",ds="_dynInstChk",ko=ds,go="_dfOpts",Ou="_unknown_",ld="__proto__",sc="_dyn"+ld,uc="__dynProto$Gbl",ll="_dynInstProto",cd="useBaseInst",ff="setInstFuncs",fd=Object,cl=fd.getPrototypeOf,_o=fd.getOwnPropertyNames,lc=Oa(),Po=lc[uc]||(lc[uc]={o:(Ks={},Ks[ff]=!0,Ks[cd]=!0,Ks),n:1e3});function Ma(s){return s&&(s===fd[Ja]||s===Array[Ja])}function ps(s){return Ma(s)||s===Function[Ja]}function un(s){var u;if(s){if(cl)return cl(s);var f=s[ld]||s[Ja]||(s[ul]?s[ul][Ja]:null);u=s[sc]||f,xi(s,sc)||(delete s[ll],u=s[sc]=s[ll]||s[sc],s[ll]=f)}return u}function Js(s,u){var f=[];if(_o)f=_o(s);else for(var h in s)typeof h=="string"&&xi(s,h)&&f.push(h);if(f&&f.length>0)for(var E=0;E<f.length;E++)u(f[E])}function yo(s,u,f){return u!==ul&&typeof s[u]===cf&&(f||xi(s,u))&&u!==ld&&u!==Ja}function cc(s){sn("DynamicProto: "+s)}function fc(s){var u=Va(null);return Js(s,function(f){!u[f]&&yo(s,f,!1)&&(u[f]=s[f])}),u}function ms(s,u){for(var f=s.length-1;f>=0;f--)if(s[f]===u)return!0;return!1}function df(s,u,f,h){function E($,V,ee){var fe=V[ee];if(fe[oc]&&h){var pe=$[ud]||{};pe[ko]!==!1&&(fe=(pe[V[ho]]||{})[ee]||fe)}return function(){return fe.apply($,arguments)}}var x=Va(null);Js(f,function($){x[$]=E(u,f,$)});for(var k=un(s),F=[];k&&!ps(k)&&!ms(F,k);)Js(k,function($){!x[$]&&yo(k,$,!cl)&&(x[$]=E(u,k,$))}),F.push(k),k=un(k);return x}function vs(s,u,f,h){var E=null;if(s&&xi(f,ho)){var x=s[ud]||Va(null);if(E=(x[f[ho]]||Va(null))[u],E||cc("Missing ["+u+"] "+cf),!E[ds]&&x[ko]!==!1){for(var k=!xi(s,u),F=un(s),$=[];k&&F&&!ps(F)&&!ms($,F);){var V=F[u];if(V){k=V===h;break}$.push(F),F=un(F)}try{k&&(s[u]=E),E[ds]=1}catch{x[ko]=!1}}}return E}function Au(s,u,f){var h=u[s];return h===f&&(h=un(u)[s]),typeof h!==cf&&cc("["+s+"] is not a "+cf),h}function pa(s,u,f,h,E){function x($,V){var ee=function(){var fe=vs(this,V,$,ee)||Au(V,$,ee);return fe.apply(this,arguments)};return ee[oc]=1,ee}if(!Ma(s)){var k=f[ud]=f[ud]||Va(null);if(!Ma(k)){var F=k[u]=k[u]||Va(null);k[ko]!==!1&&(k[ko]=!!E),Ma(F)||Js(f,function($){yo(f,$,!1)&&f[$]!==h[$]&&(F[$]=f[$],delete f[$],(!xi(s,$)||s[$]&&!s[$][oc])&&(s[$]=x(s,$)))})}}}function bp(s,u){if(cl){for(var f=[],h=un(u);h&&!ps(h)&&!ms(f,h);){if(h===s)return!0;f.push(h),h=un(h)}return!1}return!0}function fl(s,u){return xi(s,Ja)?s.name||u||Ou:((s||{})[ul]||{}).name||u||Ou}function Qi(s,u,f,h){xi(s,Ja)||cc("theClass is an invalid class definition.");var E=s[Ja];bp(E,u)||cc("["+fl(s)+"] not in hierarchy of ["+fl(u)+"]");var x=null;xi(E,ho)?x=E[ho]:(x=Sv+fl(s,"_")+"$"+Po.n,Po.n++,E[ho]=x);var k=Qi[go],F=!!k[cd];F&&h&&h[cd]!==void 0&&(F=!!h[cd]);var $=fc(u),V=df(E,u,$,F);f(u,V);var ee=!!cl&&!!k[ff];ee&&h&&(ee=!!h[ff]),pa(E,x,u,$,ee!==!1)}Qi[go]=Po.o;var dd="function",Sp="object",pf="undefined",mf="prototype",Ep=Object,Ev=Ep[mf];(Oa()||{}).Symbol,(Oa()||{}).Reflect;var dl="hasOwnProperty",Lo=function(s){for(var u,f=1,h=arguments.length;f<h;f++){u=arguments[f];for(var E in u)Ev[dl].call(u,E)&&(s[E]=u[E])}return s},wo=Eu||Lo,On=function(s,u){return On=Ep.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var E in h)h[dl](E)&&(f[E]=h[E])},On(s,u)};function vf(s,u){typeof u!==dd&&u!==null&&sn("Class extends value "+String(u)+" is not a constructor or null"),On(s,u);function f(){this.constructor=s}s[mf]=u===null?Va(u):(f[mf]=u[mf],new f)}function pl(s,u){for(var f=0,h=u.length,E=s.length;f<h;f++,E++)s[E]=u[f];return s}var ml=Ha,Tp=rd,Za=ml({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),ku="toLowerCase",Zs="blkVal",fr="length",Mo="rdOnly",hs="notify",Xa="warnToConsole",pd="throwInternal",Qa="setDf",Pu="watch",bn="logger",ma="apply",zr="push",mt="splice",vl="hdlr",Fo="cancel",Xs="initialize",bo="identifier",Lu="removeNotificationListener",eo="addNotificationListener",Qr="isInitialized",Uo="instrumentationKey",Wr="INACTIVE",jo="value",md="getNotifyMgr",Yo="getPlugin",Zn="name",So="iKey",gs="time",$i="processNext",ea="getProcessTelContext",dc="pollInternalLogs",hl="enabled",vd="stopPollingInternalLogs",Qs="unload",$o="onComplete",Bo="version",gl="loggingLevelConsole",qo="createNew",ni="teardown",hd="messageId",_l="message",eu="isAsync",Fa="diagLog",_s="_doTeardown",tu="update",to="getNext",pc="setNextPlugin",Mu="protocol",Ai="userAgent",Fu="split",ru="nodeType",ro="replace",yl="logInternalMessage",Sn="type",_i="handler",no="status",wl="getResponseHeader",ys="getAllResponseHeaders",Ip="isChildEvt",Ua="data",mc="getCtx",Bi="setCtx",gd="complete",va="itemsReceived",ws="urlString",bs="sendPOST",Np="headers",hf="timeout",_d="setRequestHeader",gf="traceId",Ho="spanId",ha="traceFlags",vc;function Tv(s,u){vc||(vc=Oi("AggregationError",function(h,E){E[fr]>1&&(h.errors=E[1])}));var f=s||"One or more errors occurred.";throw Lt(u,function(h,E){f+=`
`.concat(E," > ").concat(ir(h))}),new vc(f,u||[])}var bl="Promise",Sl="rejected";function Ss(s,u){return _f(s,function(f){return u?u({status:"fulfilled",rejected:!1,value:f}):f},function(f){return u?u({status:Sl,rejected:!0,reason:f}):f})}function _f(s,u,f,h){var E=s;try{if(cr(s))(u||f)&&(E=s.then(u,f));else try{u&&(E=u(s))}catch(x){if(f)E=f(x);else throw x}}finally{h&&gh(E,h)}return E}function gh(s,u){var f=s;return u&&(cr(s)?s.finally?f=s.finally(u):f=s.then(function(h){return u(),h},function(h){throw u(),h}):u()),f}var Cp=["pending","resolving","resolved",Sl],yf="dispatchEvent",El;function Rm(s){var u;return s&&s.createEvent&&(u=s.createEvent("Event")),!!u&&u.initEvent}function Iv(s,u,f,h){var E=nd();!El&&(El=ca(!!zt(Rm,[E]).v));var x=El.v?E.createEvent("Event"):h?new Event(u):{};if(f&&f(x),El.v&&x.initEvent(u,!1,!0),x&&s[yf])s[yf](x);else{var k=s["on"+u];if(k)k(x);else{var F=Or("console");F&&(F.error||F.log)(u,ir(x))}}}var Tl="unhandledRejection",Nv=Tl.toLowerCase(),wf=10,xp;function Eo(s){return st(s)?s.toString():ir(s)}function Om(s,u,f){var h=af(arguments,3),E=0,x=!1,k,F=[],$=!1,V=null,ee;function fe(Je,dt){try{$=!0,V&&V.cancel(),V=null;var Cr=s(function(mn,vn){F.push(function(){try{var $n=E===2?Je:dt,er=rt($n)?k:st($n)?$n(k):$n;cr(er)?er.then(mn,vn):$n?mn(er):E===3?vn(er):mn(er)}catch(Bt){vn(Bt)}}),x&&Me()},h);return Cr}finally{}}function pe(Je){return fe(void 0,Je)}function me(Je){var dt=Je,Cr=Je;return st(Je)&&(dt=function(mn){return Je&&Je(),mn},Cr=function(mn){throw Je&&Je(),mn}),fe(dt,Cr)}function le(){return Cp[E]}function Me(){if(F.length>0){var Je=F.slice();F=[],$=!0,V&&V.cancel(),V=null,u(Je)}}function be(Je,dt){return function(Cr){if(E===dt){if(Je===2&&cr(Cr)){E=1,Cr.then(be(2,1),be(3,1));return}E=Je,x=!0,k=Cr,Me(),!$&&Je===3&&!V&&(V=Ru(Ue,wf))}}}function Ue(){if(!$)if($=!0,id())process.emit(Tl,k,ee);else{var Je=ls()||Oa();!xp&&(xp=ca(zt(Or,[bl+"RejectionEvent"]).v)),Iv(Je,Nv,function(dt){return Hr(dt,"promise",{g:function(){return ee}}),dt.reason=k,dt},!!xp.v)}}ee={then:fe,catch:pe,finally:me},Pn(ee,"state",{get:le}),fi()&&(ee[Aa(11)]="IPromise");function Ye(){return"IPromise "+le()+(x?" - "+Eo(k):"")}return ee.toString=Ye,function(){st(f)||sn(bl+": executor is not a function - "+Eo(f));var dt=be(3,0);try{f.call(ee,be(2,0),dt)}catch(Cr){dt(Cr)}}(),ee}function _h(s){return function(u){var f=af(arguments,1);return s(function(h,E){try{var x=[],k=1;od(u,function(F,$){F&&(k++,_f(F,function(V){x[$]=V,--k===0&&h(x)},E))}),k--,k===0&&h(x)}catch(F){E(F)}},f)}}function yd(s){return ca(function(u){var f=af(arguments,1);return s(function(h,E){var x=[],k=1;function F($,V){k++,Ss($,function(ee){ee.rejected?x[V]={status:Sl,reason:ee.reason}:x[V]={status:"fulfilled",value:ee.value},--k===0&&h(x)})}try{ot(u)?Lt(u,F):Tr(u)?od(u,F):sn("Input is not an iterable"),k--,k===0&&h(x)}catch($){E($)}},f)})}function Am(s){Lt(s,function(u){try{u()}catch{}})}function Dp(s){var u=Xt(s)?s:0;return function(f){Ru(function(){Am(f)},u)}}function hc(s,u){return Om(hc,Dp(u),s,u)}var wd;function Il(s,u){!wd&&(wd=ca(zt(Or,[bl]).v||null));var f=wd.v;if(!f)return hc(s);st(s)||sn(bl+": executor is not a function - "+ir(s));var h=0;function E(){return Cp[h]}var x=new f(function(k,F){function $(ee){h=2,k(ee)}function V(ee){h=3,F(ee)}s($,V)});return Pn(x,"state",{get:E}),x}var nu;function gc(s){return Om(gc,Am,s)}function Cv(s,u){return!nu&&(nu=yd(gc)),nu.v(s,u)}var Rp;function _c(s,u){return!Rp&&(Rp=ca(Il)),Rp.v.call(this,s,u)}var Op=_h(_c),iu=void 0,en="",Nl="channels",ki="core",Ap="createPerfMgr",bd="disabled",yc="extensionConfig",Cl="extensions",ga="processTelemetry",Sd="priority",yi="eventsSent",wr="eventsDiscarded",au="eventsSendRequest",Ln="perfEvent",Es="offlineEventsStored",xl="offlineBatchSent",Dl="offlineBatchDrop",ou="getPerfMgr",To="domain",bf="path",km="Not dynamic - ",Sf=/-([a-z])/g,Pm=/([^\w\d_$])/g,Ef=/^(\d+[\w\d_$])/;function wc(s){return!Le(s)}function kp(s){var u=s;return u&&hn(u)&&(u=u[ro](Sf,function(f,h){return h.toUpperCase()}),u=u[ro](Pm,"_"),u=u[ro](Ef,function(f,h){return"_"+h})),u}function di(s,u){return s&&u?Du(s,u)!==-1:!1}function bc(s){return s&&s.toISOString()||""}function Pi(s){return Kt(s)?s[Zn]:en}function Uu(s,u,f,h,E){var x=f;return s&&(x=s[u],x!==f&&(!E||E(x))&&(!h||h(f))&&(x=f,s[u]=x)),x}function Pp(s,u,f){var h;return s?(h=s[u],!h&&Le(h)&&(h=rt(f)?{}:f,s[u]=h)):h=rt(f)?{}:f,h}function Ed(s,u){var f=null,h=null;return st(s)?f=s:h=s,function(){var E=arguments;if(f&&(h=f()),h)return h[u][ma](h,E)}}function Li(s,u,f,h,E){s&&u&&f&&(E!==!1||rt(s[u]))&&(s[u]=Ed(f,h))}function Td(s,u,f,h){return s&&u&&ei(s)&&ot(f)&&Lt(f,function(E){hn(E)&&Li(s,E,u,E,h)}),s}function Lp(s){return function(){function u(){var f=this;s&&Ct(s,function(h,E){f[h]=E})}return u}()}function su(s){return s&&Eu&&(s=Ep(Eu({},s))),s}function vt(s,u,f,h,E,x){var k=arguments,F=k[0]||{},$=k[fr],V=!1,ee=1;for($>0&&qa(F)&&(V=F,F=k[ee]||{},ee++),ei(F)||(F={});ee<$;ee++){var fe=k[ee],pe=ot(fe),me=ei(fe);for(var le in fe){var Me=pe&&le in fe||me&&Lr(fe,le);if(Me){var be=fe[le],Ue=void 0;if(V&&be&&((Ue=ot(be))||da(be))){var Ye=F[le];Ue?ot(Ye)||(Ye=[]):da(Ye)||(Ye={}),be=vt(V,Ye,be)}be!==void 0&&(F[le]=be)}}}return F}function Ts(s){try{return s.responseText}catch{}return null}function Is(s,u){return s?"XDomainRequest,Response:"+Ts(s)||"":u}function io(s,u){return s?"XMLHttpRequest,Status:"+s[no]+",Response:"+Ts(s)||s.response||"":u}function Tf(s,u){return u&&(Xt(u)?s=[u].concat(s):ot(u)&&(s=u.concat(s))),s}var Sc="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Ns="withCredentials",Io="timeout";function Ec(s,u,f,h,E,x){h===void 0&&(h=!1),E===void 0&&(E=!1);function k($,V,ee){try{$[V]=ee}catch{}}var F=new XMLHttpRequest;return h&&k(F,Sc,h),f&&k(F,Ns,f),F.open(s,u,!E),f&&k(F,Ns,f),!E&&x&&k(F,Io,x),F}function Id(s){var u={};if(hn(s)){var f=Rn(s)[Fu](/[\r\n]+/);Lt(f,function(h){if(h){var E=h.indexOf(": ");if(E!==-1){var x=Rn(h.substring(0,E))[ku](),k=Rn(h.substring(E+1));u[x]=k}else u[Rn(h)]=1}})}return u}function uu(s,u,f){if(!s[f]&&u&&u[wl]){var h=u[wl](f);h&&(s[f]=Rn(h))}return s}var If="kill-duration",Tc="kill-duration-seconds",Nf="time-delta-millis";function Mp(s,u){var f={};return s[ys]?f=Id(s[ys]()):u&&(f=uu(f,s,Nf),f=uu(f,s,If),f=uu(f,s,Tc)),f}var Fp="documentMode",Lm="location",Up="console",ju="JSON",Rl="crypto",Cf="msCrypto",Go="msie",Cs="trident/",Vo="XMLHttpRequest",zo=null,Ol=null,jp=!1,Al=null,Yp=null;function $p(s,u){var f=!1;if(s){try{if(f=u in s,!f){var h=s[mf];h&&(f=u in h)}}catch{}if(!f)try{var E=new s;f=!rt(E[u])}catch{}}return f}function Nd(s){if(s&&jp){var u=Or("__mockLocation");if(u)return u}return typeof location===Sp&&location?location:Or(Lm)}function xs(){return typeof console!==pf?console:Or(Up)}function Wo(){return!!(typeof JSON===Sp&&JSON||Or(ju)!==null)}function Ko(){return Wo()?JSON||Or(ju):null}function Cd(){return Or(Rl)}function xf(){return Or(Cf)}function Ic(){var s=cs();if(s&&(s[Ai]!==Ol||zo===null)){Ol=s[Ai];var u=(Ol||en)[ku]();zo=di(u,Go)||di(u,Cs)}return zo}function qi(s){if(s===void 0&&(s=null),!s){var u=cs()||{};s=u?(u.userAgent||en)[ku]():en}var f=(s||en)[ku]();if(di(f,Go)){var h=nd()||{};return Math.max(parseInt(f[Fu](Go)[1]),h[Fp]||0)}else if(di(f,Cs)){var E=parseInt(f[Fu](Cs)[1]);if(E)return E+4}return null}function Ds(s){return(Yp===null||s===!1)&&(Yp=nc()&&!!cs().sendBeacon),Yp}function xd(s){var u=!1;try{u=!!Or("fetch");var f=Or("Request");u&&s&&f&&(u=$p(f,"keepalive"))}catch{}return u}function ta(){return Al===null&&(Al=typeof XDomainRequest!==pf,Al&&lu()&&(Al=Al&&!$p(Or(Vo),"withCredentials"))),Al}function lu(){var s=!1;try{var u=Or(Vo);s=!!u}catch{}return s}var Df=4294967296,Rs=4294967295,Mi=123456789,Yu=987654321,Dd=!1,Nc=Mi,$u=Yu;function xv(s){s<0&&(s>>>=0),Nc=Mi+s&Rs,$u=Yu-s&Rs,Dd=!0}function Mm(){try{var s=Nu()&2147483647;xv((Math.random()*Df^s)+s)}catch{}}function Dv(s){var u=0,f=Cd()||xf();return f&&f.getRandomValues&&(u=f.getRandomValues(new Uint32Array(1))[0]&Rs),u===0&&Ic()&&(Dd||Mm(),u=Cc()&Rs),u===0&&(u=Math.floor(Df*Math.random()|0)),s||(u>>>=0),u}function Cc(s){$u=36969*($u&65535)+($u>>16)&Rs,Nc=18e3*(Nc&65535)+(Nc>>16)&Rs;var u=($u<<16)+(Nc&65535)>>>0&Rs|0;return s||(u>>>=0),u}function Rf(s){s===void 0&&(s=22);for(var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=Dv()>>>0,h=0,E=en;E[fr]<s;)h++,E+=u.charAt(f&63),f>>>=6,h===5&&(f=(Dv()<<2&4294967295|f&3)>>>0,h=0);return E}var Fm="3.3.5",yh="."+Rf(6),Rd=0;function Bp(s){return s[ru]===1||s[ru]===9||!+s[ru]}function xc(s,u){var f=u[s.id];if(!f){f={};try{Bp(u)&&Hr(u,s.id,{e:!1,v:f})}catch{}}return f}function Bu(s,u){return u===void 0&&(u=!1),kp(s+Rd+++(u?"."+Fm:en)+yh)}function qp(s){var u={id:Bu("_aiData-"+(s||en)+"."+Fm),accept:function(f){return Bp(f)},get:function(f,h,E,x){var k=f[u.id];return k?k[kp(h)]:(x&&(k=xc(u,f),k[kp(h)]=E),E)},kill:function(f,h){if(f&&f[h])try{delete f[h]}catch{}}};return u}function Os(s){return s&&ei(s)&&(s.isVal||s.fb||Lr(s,"v")||Lr(s,"mrg")||Lr(s,"ref")||s.set)}function Od(s,u,f){var h,E=f.dfVal||Wt;if(u&&f.fb){var x=f.fb;ot(x)||(x=[x]);for(var k=0;k<x[fr];k++){var F=x[k],$=u[F];if(E($)?h=$:s&&($=s.cfg[F],E($)&&(h=$),s.set(s.cfg,Ui(F),$)),E(h))break}}return!E(h)&&E(f.v)&&(h=f.v),h}function Of(s,u,f){var h=f;if(f&&Os(f)&&(h=Od(s,u,f)),h){Os(h)&&(h=Of(s,u,h));var E;ot(h)?(E=[],E[fr]=h[fr]):da(h)&&(E={}),E&&(Ct(h,function(x,k){k&&Os(k)&&(k=Of(s,u,k)),E[x]=k}),h=E)}return h}function As(s,u,f,h){var E,x,k,F=h,$,V,ee,fe;Os(F)?(E=F.isVal,x=F.set,ee=F[Mo],fe=F[Zs],$=F.mrg,V=F.ref,!V&&rt(V)&&(V=!!$),k=Od(s,u,F)):k=h,fe&&s[Zs](u,f);var pe,me=!0,le=u[f];(le||!Le(le))&&(pe=le,me=!1,E&&pe!==k&&!E(pe)&&(pe=k,me=!0),x&&(pe=x(pe,k,u),me=pe===k)),me?k?pe=Of(s,u,k):pe=k:(da(pe)||ot(k))&&$&&k&&(da(k)||ot(k))&&Ct(k,function(Me,be){As(s,pe,Me,be)}),s.set(u,f,pe),V&&s.ref(u,f),ee&&s[Mo](u,f)}var kl=mo("[[ai_dynCfg_1]]"),Rv=mo("[[ai_blkDynCfg_1]]"),Dc=mo("[[ai_frcDynCfg_1]]");function wh(s){if(s){var u;if(ot(s)?(u=[],u[fr]=s[fr]):da(s)&&(u={}),u)return Ct(s,function(f,h){u[f]=wh(h)}),u}return s}function Ov(s){if(s){var u=s[kl]||s;if(u.cfg&&(u.cfg===s||u.cfg[kl]===u))return u}return null}function Af(s){if(s&&(da(s)||ot(s)))try{s[Rv]=!0}catch{}return s}function Um(s,u,f){var h=!1;return f&&!s[u.blkVal]&&(h=f[Dc],!h&&!f[Rv]&&(h=da(f)||ot(f))),h}function Av(s){sn("InvalidAccess:"+s)}var qu=["push","pop","shift","unshift","splice"],No=function(s,u,f,h){s&&s[pd](3,108,"".concat(f," [").concat(u,"] failed - ")+ir(h))};function cu(s,u,f){ot(u)&&Lt(qu,function(h){var E=u[h];u[h]=function(){for(var x=[],k=0;k<arguments.length;k++)x[k]=arguments[k];var F=E[ma](this,x);return kf(s,u,f,"Patching"),F}})}function Hu(s,u){var f=mr(s,u);return f&&f.get}function Rc(s,u,f,h){var E={n:f,h:[],trk:function(V){V&&V.fn&&(ka(E.h,V)===-1&&E.h[zr](V),s.trk(V,E))},clr:function(V){var ee=ka(E.h,V);ee!==-1&&E.h[mt](ee,1)}},x=!0,k=!1;function F(){x&&(k=k||Um(F,s,h),h&&!h[kl]&&k&&(h=kf(s,h,f,"Converting")),x=!1);var V=s.act;return V&&E.trk(V),h}F[s.prop]={chng:function(){s.add(E)}};function $(V){if(h!==V){F[s.ro]&&!s.upd&&Av("["+f+"] is read-only:"+ir(u)),x&&(k=k||Um(F,s,h),x=!1);var ee=k&&F[s.rf];if(k)if(ee){Ct(h,function(pe){h[pe]=V?V[pe]:iu});try{Ct(V,function(pe,me){Oc(s,h,pe,me)}),V=h}catch(pe){No((s.hdlr||{})[bn],f,"Assigning",pe),k=!1}}else h&&h[kl]&&Ct(h,function(pe){var me=Hu(h,pe);if(me){var le=me[s.prop];le&&le.chng()}});if(V!==h){var fe=V&&Um(F,s,V);!ee&&fe&&(V=kf(s,V,f,"Converting")),h=V,k=fe}s.add(E)}}Hr(u,E.n,{g:F,s:$})}function Oc(s,u,f,h){if(u){var E=Hu(u,f),x=E&&!!E[s.prop];x?u[f]=h:Rc(s,u,f,h)}return u}function Ad(s,u,f,h){if(u){var E=Hu(u,f),x=E&&!!E[s.prop],k=h&&h[0],F=h&&h[1],$=h&&h[2];if(!x){if($)try{Af(u)}catch(V){No((s.hdlr||{})[bn],f,"Blocking",V)}try{Oc(s,u,f,u[f]),E=Hu(u,f)}catch(V){No((s.hdlr||{})[bn],f,"State",V)}}k&&(E[s.rf]=k),F&&(E[s.ro]=F),$&&(E[s.blkVal]=!0)}return u}function kf(s,u,f,h){try{Ct(u,function(E,x){Oc(s,u,E,x)}),u[kl]||(Pn(u,kl,{get:function(){return s[vl]}}),cu(s,u,f))}catch(E){No((s.hdlr||{})[bn],f,h,E)}return u}var Jo="[[ai_",Pl="]]";function kv(s){var u,f=nf(Jo+"get"+s.uid+Pl),h=nf(Jo+"ro"+s.uid+Pl),E=nf(Jo+"rf"+s.uid+Pl),x=nf(Jo+"blkVal"+s.uid+Pl),k=nf(Jo+"dtl"+s.uid+Pl),F=null,$=null,V;function ee(le,Me){var be=V.act;try{V.act=le,le&&le[k]&&(Lt(le[k],function(Ye){Ye.clr(le)}),le[k]=[]),Me({cfg:s.cfg,set:s.set.bind(s),setDf:s[Qa].bind(s),ref:s.ref.bind(s),rdOnly:s[Mo].bind(s)})}catch(Ye){var Ue=s[bn];throw Ue&&Ue[pd](1,107,ir(Ye)),Ye}finally{V.act=be||null}}function fe(){if(F){var le=F;F=null,$&&$[Fo](),$=null;var Me=[];if(Lt(le,function(be){if(be&&(be[k]&&(Lt(be[k],function(Ue){Ue.clr(be)}),be[k]=null),be.fn))try{ee(be,be.fn)}catch(Ue){Me[zr](Ue)}}),F)try{fe()}catch(be){Me[zr](be)}Me[fr]>0&&Tv("Watcher error(s): ",Me)}}function pe(le){if(le&&le.h[fr]>0){F||(F=[]),$||($=Ru(function(){$=null,fe()},0));for(var Me=0;Me<le.h[fr];Me++){var be=le.h[Me];be&&ka(F,be)===-1&&F[zr](be)}}}function me(le,Me){if(le){var be=le[k]=le[k]||[];ka(be,Me)===-1&&be[zr](Me)}}return V=(u={prop:f,ro:h,rf:E},u[Zs]=x,u[vl]=s,u.add=pe,u[hs]=fe,u.use=ee,u.trk=me,u),V}function Pv(s,u){var f={fn:u,rm:function(){f.fn=null,s=null,u=null}};return Hr(f,"toJSON",{v:function(){return"WatcherHandler"+(f.fn?"":"[X]")}}),s.use(f,u),f}function Hp(s,u,f){var h,E=Ov(u);if(E)return E;var x=Bu("dyncfg",!0),k=u&&f!==!1?u:wh(u),F;function $(){F[hs]()}function V(Ue,Ye,Je){try{Ue=Oc(F,Ue,Ye,Je)}catch(dt){No(s,Ye,"Setting value",dt)}return Ue[Ye]}function ee(Ue){return Pv(F,Ue)}function fe(Ue,Ye){F.use(null,function(Je){var dt=F.upd;try{rt(Ye)||(F.upd=Ye),Ue(Je)}finally{F.upd=dt}})}function pe(Ue,Ye){var Je;return Ad(F,Ue,Ye,(Je={},Je[0]=!0,Je))[Ye]}function me(Ue,Ye){var Je;return Ad(F,Ue,Ye,(Je={},Je[1]=!0,Je))[Ye]}function le(Ue,Ye){var Je;return Ad(F,Ue,Ye,(Je={},Je[2]=!0,Je))[Ye]}function Me(Ue,Ye){return Ye&&Ct(Ye,function(Je,dt){As(be,Ue,Je,dt)}),Ue}var be=(h={uid:null,cfg:k},h[bn]=s,h[hs]=$,h.set=V,h[Qa]=Me,h[Pu]=ee,h.ref=pe,h[Mo]=me,h[Zs]=le,h._block=fe,h);return Hr(be,"uid",{c:!1,e:!1,w:!1,v:x}),F=kv(be),kf(F,k,"config","Creating"),be}function Gp(s,u){s?(s[Xa](u),s[pd](2,108,u)):Av(u)}function Zo(s,u,f,h){var E=Hp(f,s||{},h);return u&&E[Qa](E.cfg,u),E}function Gu(s,u,f){var h=s[kl]||s;return h.cfg&&(h.cfg===s||h.cfg[kl]===h)?h[Pu](u):(Gp(f,km+ir(s)),Zo(s,null,f)[Pu](u))}function Ac(s,u){if(s&&s[Qs])return s[Qs](u)}function Lv(s,u,f){var h;return f||(h=_c(function(E){f=E})),s&&Cm(s)>0?Ss(Ac(s[0],u),function(){Lv(af(s,1),u,f)}):f(),h}var Vp=500,Mv="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function jm(s,u,f){return!s&&Le(s)?u:qa(s)?s:Ui(s)[ku]()==="true"}function zp(s){return{mrg:!0,v:s}}function Ll(s,u,f){return{fb:f,isVal:s,v:u}}function Co(s,u){return{fb:u,set:jm,v:!!s}}var kd=[yi,wr,au,Ln],kc=null,Xo;function sg(s,u){return function(){var f=arguments,h=bh(u);if(h){var E=h.listener;E&&E[s]&&E[s][ma](E,f)}}}function Wp(){var s=Or("Microsoft");return s&&(kc=s.ApplicationInsights),kc}function bh(s){var u=kc;return!u&&s.disableDbgExt!==!0&&(u=kc||Wp()),u?u.ChromeDbgExt:null}function ug(s){if(!Xo){Xo={};for(var u=0;u<kd[fr];u++)Xo[kd[u]]=sg(kd[u],s)}return Xo}var Hi,Pd="warnToConsole",Ld="AI (Internal): ",Fv="AI: ",Pc="AITR_",_a={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},xo=(Hi={},Hi[0]=null,Hi[1]="errorToConsole",Hi[2]=Pd,Hi[3]="debugToConsole",Hi);function Md(s){return s?'"'+s[ro](/\"/g,en)+'"':en}function Vu(s,u){var f=xs();if(f){var h="log";f[s]&&(h=s),st(f[h])&&f[h](u)}}var Ml=function(){function s(u,f,h,E){h===void 0&&(h=!1);var x=this;x[hd]=u,x[_l]=(h?Fv:Ld)+u;var k=en;Wo()&&(k=Ko().stringify(E));var F=(f?" message:"+Md(f):en)+(E?" props:"+Md(k):en);x[_l]+=F}return s.dataType="MessageData",s}();function ks(s,u){return(s||{})[bn]||new Ym(u)}var Ym=function(){function s(u){this.identifier="DiagnosticLogger",this.queue=[];var f=0,h={},E,x,k,F,$;Qi(s,this,function(V){$=fe(u||{}),V.consoleLoggingLevel=function(){return E},V[pd]=function(le,Me,be,Ue,Ye){Ye===void 0&&(Ye=!1);var Je=new Ml(Me,be,Ye,Ue);if(F)throw ir(Je);var dt=xo[le]||Pd;if(rt(Je[_l]))me("throw"+(le===1?"Critical":"Warning"),Je);else{if(Ye){var Cr=+Je[hd];!h[Cr]&&E>=le&&(V[dt](Je[_l]),h[Cr]=!0)}else E>=le&&V[dt](Je[_l]);ee(le,Je)}},V.debugToConsole=function(le){Vu("debug",le),me("warning",le)},V[Xa]=function(le){Vu("warn",le),me("warning",le)},V.errorToConsole=function(le){Vu("error",le),me("error",le)},V.resetInternalMessageCount=function(){f=0,h={}},V[yl]=ee,V[Qs]=function(le){$&&$.rm(),$=null};function ee(le,Me){if(!pe()){var be=!0,Ue=Pc+Me[hd];if(h[Ue]?be=!1:h[Ue]=!0,be&&(le<=x&&(V.queue[zr](Me),f++,me(le===1?"error":"warn",Me)),f===k)){var Ye="Internal events throttle limit per PageView reached for this app.",Je=new Ml(23,Ye,!1);V.queue[zr](Je),le===1?V.errorToConsole(Ye):V[Xa](Ye)}}}function fe(le){return Gu(Zo(le,_a,V).cfg,function(Me){var be=Me.cfg;E=be[gl],x=be.loggingLevelTelemetry,k=be.maxMessageLimit,F=be.enableDebug})}function pe(){return f>=k}function me(le,Me){var be=bh(u||{});be&&be[Fa]&&be[Fa](le,Me)}})}return s.__ieDyn=1,s}();function Uv(s){return s||new Ym}function ht(s,u,f,h,E,x){x===void 0&&(x=!1),Uv(s)[pd](u,f,h,E,x)}function zu(s,u){Uv(s)[Xa](u)}var fu,Pf,jv="toGMTString",Fl="toUTCString",Fd="cookie",Ps="expires",Yv="isCookieUseDisabled",Kp="disableCookiesUsage",Lc="_ckMgr",Ul=null,jl=null,$m=null,nn,Ls={},Bm={},qm=(fu={cookieCfg:zp((Pf={},Pf[To]={fb:"cookieDomain",dfVal:wc},Pf.path={fb:"cookiePath",dfVal:wc},Pf.enabled=iu,Pf.ignoreCookies=iu,Pf.blockedCookies=iu,Pf)),cookieDomain:iu,cookiePath:iu},fu[Kp]=iu,fu);function du(){!nn&&(nn=Tu(function(){return nd()}))}function Jp(s){return s?s.isEnabled():!0}function Hm(s,u){return u&&s&&ot(s.ignoreCookies)?ka(s.ignoreCookies,u)!==-1:!1}function Gm(s,u){return u&&s&&ot(s.blockedCookies)&&ka(s.blockedCookies,u)!==-1?!0:Hm(s,u)}function Ud(s,u){var f=u[hl];if(Le(f)){var h=void 0;rt(s[Yv])||(h=!s[Yv]),rt(s[Kp])||(h=!s[Kp]),f=h}return f}function jd(s,u){var f,h,E,x,k,F,$,V,ee;s=Zo(s||Bm,null,u).cfg,k=Gu(s,function(pe){pe[Qa](pe.cfg,qm),h=pe.ref(pe.cfg,"cookieCfg"),E=h[bf]||"/",x=h[To],F=Ud(s,h)!==!1,$=h.getCookie||Vm,V=h.setCookie||Do,ee=h.delCookie||Do},u);var fe=(f={isEnabled:function(){var pe=Ud(s,h)!==!1&&F&&Mc(u),me=Bm[Lc];return pe&&me&&fe!==me&&(pe=Jp(me)),pe},setEnabled:function(pe){F=pe!==!1,h[hl]=pe},set:function(pe,me,le,Me,be){var Ue=!1;if(Jp(fe)&&!Gm(h,pe)){var Ye={},Je=Rn(me||en),dt=Du(Je,";");if(dt!==-1&&(Je=Rn(li(me,dt)),Ye=Yl(ri(me,dt+1))),Uu(Ye,To,Me||x,Ci,rt),!Le(le)){var Cr=Ic();if(rt(Ye[Ps])){var mn=Nu(),vn=mn+le*1e3;if(vn>0){var $n=new Date;$n.setTime(vn),Uu(Ye,Ps,Zp($n,Cr?jv:Fl)||Zp($n,Cr?jv:Fl)||en,Ci)}}Cr||Uu(Ye,"max-age",en+le,null,rt)}var er=Nd();er&&er[Mu]==="https:"&&(Uu(Ye,"secure",null,null,rt),jl===null&&(jl=!zm((cs()||{})[Ai])),jl&&Uu(Ye,"SameSite","None",null,rt)),Uu(Ye,bf,be||E,null,rt),V(pe,Fc(Je,Ye)),Ue=!0}return Ue},get:function(pe){var me=en;return Jp(fe)&&!Hm(h,pe)&&(me=$(pe)),me},del:function(pe,me){var le=!1;return Jp(fe)&&(le=fe.purge(pe,me)),le},purge:function(pe,me){var le,Me=!1;if(Mc(u)){var be=(le={},le[bf]=me||"/",le[Ps]="Thu, 01 Jan 1970 00:00:01 GMT",le);Ic()||(be["max-age"]="0"),ee(pe,Fc(en,be)),Me=!0}return Me}},f[Qs]=function(pe){k&&k.rm(),k=null},f);return fe[Lc]=fe,fe}function Mc(s){if(Ul===null){Ul=!1,!nn&&du();try{var u=nn.v||{};Ul=u[Fd]!==void 0}catch(f){ht(s,2,68,"Cannot access document.cookie - "+Pi(f),{exception:ir(f)})}}return Ul}function Yl(s){var u={};if(s&&s[fr]){var f=Rn(s)[Fu](";");Lt(f,function(h){if(h=Rn(h||en),h){var E=Du(h,"=");E===-1?u[h]=null:u[Rn(li(h,E))]=Rn(ri(h,E+1))}})}return u}function Zp(s,u){return st(s[u])?s[u]():null}function Fc(s,u){var f=s||en;return Ct(u,function(h,E){f+="; "+h+(Le(E)?en:"="+E)}),f}function Vm(s){var u=en;if(!nn&&du(),nn.v){var f=nn.v[Fd]||en;$m!==f&&(Ls=Yl(f),$m=f),u=Rn(Ls[s]||en)}return u}function Do(s,u){!nn&&du(),nn.v&&(nn.v[Fd]=s+"="+u)}function zm(s){return hn(s)?!!(di(s,"CPU iPhone OS 12")||di(s,"iPad; CPU OS 12")||di(s,"Macintosh; Intel Mac OS X 10_14")&&di(s,"Version/")&&di(s,"Safari")||di(s,"Macintosh; Intel Mac OS X 10_14")&&Ka(s,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||di(s,"Chrome/5")||di(s,"Chrome/6")||di(s,"UnrealEngine")&&!di(s,"Chrome")||di(s,"UCBrowser/12")||di(s,"UCBrowser/11")):!1}var Yd={perfEvtsSendAll:!1};function $v(s){s.h=null;var u=s.cb;s.cb=[],Lt(u,function(f){zt(f.fn,[f.arg])})}function Ms(s,u,f,h){Lt(s,function(E){E&&E[u]&&(f?(f.cb[zr]({fn:h,arg:E}),f.h=f.h||Ru($v,0,f)):zt(h,[E]))})}var Sh=function(){function s(u){this.listeners=[];var f,h,E=[],x={h:null,cb:[]},k=Zo(u,Yd);h=k[Pu](function(F){f=!!F.cfg.perfEvtsSendAll}),Qi(s,this,function(F){Hr(F,"listeners",{g:function(){return E}}),F[eo]=function($){E[zr]($)},F[Lu]=function($){for(var V=ka(E,$);V>-1;)E[mt](V,1),V=ka(E,$)},F[yi]=function($){Ms(E,yi,x,function(V){V[yi]($)})},F[wr]=function($,V){Ms(E,wr,x,function(ee){ee[wr]($,V)})},F[au]=function($,V){Ms(E,au,V?x:null,function(ee){ee[au]($,V)})},F[Ln]=function($){$&&(f||!$[Ip]())&&Ms(E,Ln,null,function(V){$[eu]?Ru(function(){return V[Ln]($)},0):V[Ln]($)})},F[Es]=function($){$&&$[fr]&&Ms(E,Es,x,function(V){V[Es]($)})},F[xl]=function($){$&&$[Ua]&&Ms(E,xl,x,function(V){V[xl]($)})},F[Dl]=function($,V){if($>0){var ee=V||0;Ms(E,Dl,x,function(fe){fe[Dl]($,ee)})}},F[Qs]=function($){var V=function(){h&&h.rm(),h=null,E=[],x.h&&x.h[Fo](),x.h=null,x.cb=[]},ee;if(Ms(E,"unload",null,function(fe){var pe=fe[Qs]($);pe&&(ee||(ee=[]),ee[zr](pe))}),ee)return _c(function(fe){return Ss(Op(ee),function(){V(),fe()})});V()}})}return s.__ieDyn=1,s}(),Wu="ctx",Wm="ParentContextKey",Uc="ChildrenContextKey",Bv=null,Qo=function(){function s(u,f,h){var E=this;if(E.start=Nu(),E[Zn]=u,E[eu]=h,E[Ip]=function(){return!1},st(f)){var x;Hr(E,"payload",{g:function(){return!x&&st(f)&&(x=f(),f=null),x}})}E[mc]=function(k){return k?k===s[Wm]||k===s[Uc]?E[k]:(E[Wu]||{})[k]:null},E[Bi]=function(k,F){if(k)if(k===s[Wm])E[k]||(E[Ip]=function(){return!0}),E[k]=F;else if(k===s[Uc])E[k]=F;else{var $=E[Wu]=E[Wu]||{};$[k]=F}},E[gd]=function(){var k=0,F=E[mc](s[Uc]);if(ot(F))for(var $=0;$<F[fr];$++){var V=F[$];V&&(k+=V[gs])}E[gs]=Nu()-E.start,E.exTime=E[gs]-k,E[gd]=function(){}}}return s.ParentContextKey="parent",s.ChildrenContextKey="childEvts",s}(),Fs=function(){function s(u){this.ctx={},Qi(s,this,function(f){f.create=function(h,E,x){return new Qo(h,E,x)},f.fire=function(h){h&&(h[gd](),u&&st(u[Ln])&&u[Ln](h))},f[Bi]=function(h,E){if(h){var x=f[Wu]=f[Wu]||{};x[h]=E}},f[mc]=function(h){return(f[Wu]||{})[h]}})}return s.__ieDyn=1,s}(),Gn="CoreUtils.doPerf";function Lf(s,u,f,h,E){if(s){var x=s;if(x[ou]&&(x=x[ou]()),x){var k=void 0,F=x[mc](Gn);try{if(k=x.create(u(),h,E),k){if(F&&k[Bi]&&(k[Bi](Qo[Wm],F),F[mc]&&F[Bi])){var $=F[mc](Qo[Uc]);$||($=[],F[Bi](Qo[Uc],$)),$[zr](k)}return x[Bi](Gn,k),f(k)}}catch(V){k&&k[Bi]&&k[Bi]("exception",V)}finally{k&&x.fire(k),x[Bi](Gn,F)}}}return f()}function jc(){return Bv}var $d="00000000000000000000000000000000",dr="0000000000000000";function ao(s,u,f){return s&&s[fr]===u&&s!==f?!!s.match(/^[\da-f]*$/i):!1}function oo(s){return ao(s,32,$d)}function Fi(s){return ao(s,16,dr)}var Yc=qp("plugin");function En(s){return Yc.get(s,"state",{},!0)}function $c(s,u){for(var f=[],h=null,E=s[to](),x;E;){var k=E[Yo]();if(k){h&&h[pc]&&k[ga]&&h[pc](k),x=En(k);var F=!!x[Qr];k[Qr]&&(F=k[Qr]()),F||f[zr](k),h=k,E=E[to]()}}Lt(f,function($){var V=s[ki]();$[Xs](s.getCfg(),V,u,s[to]()),x=En($),!$[ki]&&!x[ki]&&(x[ki]=V),x[Qr]=!0,delete x[ni]})}function pu(s){return s.sort(function(u,f){var h=0;if(f){var E=f[ga];u[ga]?h=E?u[Sd]-f[Sd]:1:E&&(h=-1)}else h=u?1:-1;return h})}function Xp(s){var u={};return{getName:function(){return u[Zn]},setName:function(f){s&&s.setName(f),u[Zn]=f},getTraceId:function(){return u[gf]},setTraceId:function(f){s&&s.setTraceId(f),oo(f)&&(u[gf]=f)},getSpanId:function(){return u[Ho]},setSpanId:function(f){s&&s.setSpanId(f),Fi(f)&&(u[Ho]=f)},getTraceFlags:function(){return u[ha]},setTraceFlags:function(f){s&&s.setTraceFlags(f),u[ha]=f}}}var mu="TelemetryPluginChain",Km="_hasRun",Ku="_getTelCtx",Jm=0;function Zm(s,u,f){for(;s;){if(s[Yo]()===f)return s;s=s[to]()}return j([f],u.config||{},u)}function d(s,u,f,h){var E=null,x=[];u||(u=Zo({},null,f[bn])),h!==null&&(E=h?Zm(s,f,h):s);var k={_next:$,ctx:{core:function(){return f},diagLog:function(){return ks(f,u.cfg)},getCfg:function(){return u.cfg},getExtCfg:ee,getConfig:fe,hasNext:function(){return!!E},getNext:function(){return E},setNext:function(me){E=me},iterate:pe,onComplete:F}};function F(me,le){for(var Me=[],be=2;be<arguments.length;be++)Me[be-2]=arguments[be];me&&x[zr]({func:me,self:rt(le)?k.ctx:le,args:Me})}function $(){var me=E;if(E=me?me[to]():null,!me){var le=x;le&&le[fr]>0&&(Lt(le,function(Me){try{Me.func.call(Me.self,Me.args)}catch(be){ht(f[bn],2,73,"Unexpected Exception during onComplete - "+ir(be))}}),x=[])}return me}function V(me,le){var Me=null,be=u.cfg;if(be&&me){var Ue=be[yc];!Ue&&le&&(Ue={}),be[yc]=Ue,Ue=u.ref(be,yc),Ue&&(Me=Ue[me],!Me&&le&&(Me={}),Ue[me]=Me,Me=u.ref(Ue,me))}return Me}function ee(me,le){var Me=V(me,!0);return le&&Ct(le,function(be,Ue){if(Le(Me[be])){var Ye=u.cfg[be];(Ye||!Le(Ye))&&(Me[be]=Ye)}As(u,Me,be,Ue)}),u[Qa](Me,le)}function fe(me,le,Me){Me===void 0&&(Me=!1);var be,Ue=V(me,!1),Ye=u.cfg;return Ue&&(Ue[le]||!Le(Ue[le]))?be=Ue[le]:(Ye[le]||!Le(Ye[le]))&&(be=Ye[le]),be||!Le(be)?be:Me}function pe(me){for(var le;le=k._next();){var Me=le[Yo]();Me&&me(Me)}}return k}function g(s,u,f,h){var E=Zo(u),x=d(s,E,f,h),k=x.ctx;function F(V){var ee=x._next();return ee&&ee[ga](V,k),!ee}function $(V,ee){return V===void 0&&(V=null),ot(V)&&(V=j(V,E.cfg,f,ee)),g(V||k[to](),E.cfg,f,ee)}return k[$i]=F,k[qo]=$,k}function S(s,u,f){var h=Zo(u.config),E=d(s,h,u,f),x=E.ctx;function k($){var V=E._next();return V&&V[Qs](x,$),!V}function F($,V){return $===void 0&&($=null),ot($)&&($=j($,h.cfg,u,V)),S($||x[to](),u,V)}return x[$i]=k,x[qo]=F,x}function D(s,u,f){var h=Zo(u.config),E=d(s,h,u,f),x=E.ctx;function k($){return x.iterate(function(V){st(V[tu])&&V[tu](x,$)})}function F($,V){return $===void 0&&($=null),ot($)&&($=j($,h.cfg,u,V)),D($||x[to](),u,V)}return x[$i]=k,x[qo]=F,x}function j(s,u,f,h){var E=null,x=!h;if(ot(s)&&s[fr]>0){var k=null;Lt(s,function(F){if(!x&&h===F&&(x=!0),x&&F&&st(F[ga])){var $=J(F,u,f);E||(E=$),k&&k._setNext($),k=$}})}return h&&!E?j([h],u,f):E}function J(s,u,f){var h=null,E=st(s[ga]),x=st(s[pc]),k;s?k=s[bo]+"-"+s[Sd]+"-"+Jm++:k="Unknown-0-"+Jm++;var F={getPlugin:function(){return s},getNext:function(){return h},processTelemetry:ee,unload:fe,update:pe,_id:k,_setNext:function(me){h=me}};function $(){var me;return s&&st(s[Ku])&&(me=s[Ku]()),me||(me=g(F,u,f)),me}function V(me,le,Me,be,Ue){var Ye=!1,Je=s?s[bo]:mu,dt=me[Km];return dt||(dt=me[Km]={}),me.setNext(h),s&&Lf(me[ki](),function(){return Je+":"+Me},function(){dt[k]=!0;try{var Cr=h?h._id:en;Cr&&(dt[Cr]=!1),Ye=le(me)}catch(vn){var mn=h?dt[h._id]:!0;mn&&(Ye=!0),(!h||!mn)&&ht(me[Fa](),1,73,"Plugin ["+Je+"] failed during "+Me+" - "+ir(vn)+", run flags: "+ir(dt))}},be,Ue),Ye}function ee(me,le){le=le||$();function Me(be){if(!s||!E)return!1;var Ue=En(s);return Ue[ni]||Ue[bd]?!1:(x&&s[pc](h),s[ga](me,be),!0)}V(le,Me,"processTelemetry",function(){return{item:me}},!me.sync)||le[$i](me)}function fe(me,le){function Me(){var be=!1;if(s){var Ue=En(s),Ye=s[ki]||Ue[ki];s&&(!Ye||Ye===me.core())&&!Ue[ni]&&(Ue[ki]=null,Ue[ni]=!0,Ue[Qr]=!1,s[ni]&&s[ni](me,le)===!0&&(be=!0))}return be}V(me,Me,"unload",function(){},le[eu])||me[$i](le)}function pe(me,le){function Me(){var be=!1;if(s){var Ue=En(s),Ye=s[ki]||Ue[ki];s&&(!Ye||Ye===me.core())&&!Ue[ni]&&s[tu]&&s[tu](me,le)===!0&&(be=!0)}return be}V(me,Me,"update",function(){},!1)||me[$i](le)}return Jt(F)}function X(){var s=[];function u(h){h&&s[zr](h)}function f(h,E){Lt(s,function(x){try{x(h,E)}catch(k){ht(h[Fa](),2,73,"Unexpected error calling unload handler - "+ir(k))}}),s=[]}return{add:u,run:f}}function oe(){var s=[];function u(h){var E=s;s=[],Lt(E,function(x){try{(x.rm||x.remove).call(x)}catch(k){ht(h,2,73,"Unloading:"+ir(k))}})}function f(h){h&&ic(s,h)}return{run:u,add:f}}var ve,ye="getPlugin",Xe=(ve={},ve[yc]={isVal:wc,v:{}},ve),Mt=function(){function s(){var u=this,f,h,E,x,k;V(),Qi(s,u,function(ee){ee[Xs]=function(fe,pe,me,le){$(fe,pe,le),f=!0},ee[ni]=function(fe,pe){var me,le=ee[ki];if(!le||fe&&le!==fe[ki]())return;var Me,be=!1,Ue=fe||S(null,le,E&&E[ye]?E[ye]():E),Ye=pe||(me={reason:0},me[eu]=!1,me);function Je(){be||(be=!0,x.run(Ue,pe),k.run(Ue[Fa]()),Me===!0&&Ue[$i](Ye),V())}return!ee[_s]||ee[_s](Ue,Ye,Je)!==!0?Je():Me=!0,Me},ee[tu]=function(fe,pe){var me=ee[ki];if(!me||fe&&me!==fe[ki]())return;var le,Me=!1,be=fe||D(null,me,E&&E[ye]?E[ye]():E),Ue=pe||{reason:0};function Ye(){Me||(Me=!0,$(be.getCfg(),be.core(),be[to]()))}return!ee._doUpdate||ee._doUpdate(be,Ue,Ye)!==!0?Ye():le=!0,le},Li(ee,"_addUnloadCb",function(){return x},"add"),Li(ee,"_addHook",function(){return k},"add"),Hr(ee,"_unloadHooks",{g:function(){return k}})}),u[Fa]=function(ee){return F(ee)[Fa]()},u[Qr]=function(){return f},u.setInitialized=function(ee){f=ee},u[pc]=function(ee){E=ee},u[$i]=function(ee,fe){fe?fe[$i](ee):E&&st(E[ga])&&E[ga](ee,null)},u._getTelCtx=F;function F(ee){ee===void 0&&(ee=null);var fe=ee;if(!fe){var pe=h||g(null,{},u[ki]);E&&E[ye]?fe=pe[qo](null,E[ye]):fe=pe[qo](null,E)}return fe}function $(ee,fe,pe){Zo(ee,Xe,ks(fe)),!pe&&fe&&(pe=fe[ea]()[to]());var me=E;E&&E[ye]&&(me=E[ye]()),u[ki]=fe,h=g(pe,ee,fe,me)}function V(){f=!1,u[ki]=null,h=null,E=null,k=oe(),x=X()}}return s.__ieDyn=1,s}();function sr(s,u,f){var h={id:u,fn:f};ic(s,h);var E={remove:function(){Lt(s,function(x,k){if(x.id===h.id)return s[mt](k,1),-1})}};return E}function pr(s,u,f){for(var h=!1,E=s[fr],x=0;x<E;++x){var k=s[x];if(k)try{if(k.fn[ma](null,[u])===!1){h=!0;break}}catch(F){ht(f,2,64,"Telemetry initializer failed: "+Pi(F),{exception:ir(F)},!0)}}return!h}var ft=function(s){vf(u,s);function u(){var f=s.call(this)||this;f.identifier="TelemetryInitializerPlugin",f.priority=199;var h,E;x(),Qi(u,f,function(k,F){k.addTelemetryInitializer=function($){return sr(E,h++,$)},k[ga]=function($,V){pr(E,$,V?V[Fa]():k[Fa]())&&k[$i]($,V)},k[_s]=function(){x()}});function x(){h=0,E=[]}return f}return u.__ieDyn=1,u}(Mt),ur,Yt="Plugins must provide initialize method",Ar="_notificationManager",kr="SDK is still unloading...",At="SDK is not initialized",Mn=100,Mf=5e4,Fn=os((ur={cookieCfg:{}},ur[Cl]={rdOnly:!0,ref:!0,v:[]},ur[Nl]={rdOnly:!0,ref:!0,v:[]},ur[yc]={ref:!0,v:{}},ur[Ap]=iu,ur.loggingLevelConsole=0,ur.diagnosticLogInterval=iu,ur));function so(s,u){return new Fs(u)}function Bd(s,u,f){var h,E=[],x=[],k={};return Lt(f,function(F){(Le(F)||Le(F[Xs]))&&yr(Yt);var $=F[Sd],V=F[bo];F&&$&&(Le(k[$])?k[$]=V:zu(s,"Two extensions have same priority #"+$+" - "+k[$]+", "+V)),!$||$<u?E[zr](F):x[zr](F)}),h={},h[ki]=E,h[Nl]=x,h}function Xm(s,u){var f=!1;return Lt(u,function(h){if(h===s)return f=!0,-1}),f}function qd(s,u,f,h){f&&Ct(f,function(E,x){h&&da(x)&&da(u[E])&&qd(s,u[E],x,h),h&&da(x)&&da(u[E])?qd(s,u[E],x,h):s.set(u,E,x)})}function Hd(s,u){var f=null,h=-1;return Lt(s,function(E,x){if(E.w===u)return f=E,h=x,-1}),{i:h,l:f}}function Qp(s,u){var f=Hd(s,u).l;return f||(f={w:u,rm:function(){var h=Hd(s,u);h.i!==-1&&s[mt](h.i,1)}},s[zr](f)),f}function qv(s,u,f){Lt(u,function(h){var E=Gu(s,h.w,f);delete h.w,h.rm=function(){E.rm()}})}function Fe(s,u,f,h){return u.add(s[Pu](function(E){var x=E.cfg.disableDbgExt;x===!0&&h&&(f[Lu](h),h=null),f&&!h&&x!==!0&&(h=ug(E.cfg),f[eo](h))})),h}function Nt(s){return Hr({rm:function(){s.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(s)+">"}})}var Gt=function(){function s(){var u,f,h,E,x,k,F,$,V,ee,fe,pe,me,le,Me,be,Ue,Ye,Je,dt,Cr,mn,vn,$n,er,Bt,dn,aa,Ti,nt,qt,Wn;Qi(s,this,function($e){Te(),$e._getDbgPlgTargets=function(){return[vn,E]},$e[Qr]=function(){return f},$e.activeStatus=function(){return Bt},$e._setPendingStatus=function(){Bt=3},$e[Xs]=function(Oe,yt,tr,Ot){me&&yr(kr),$e[Qr]()&&yr("Core cannot be initialized more than once"),u=Zo(Oe,Fn,tr||$e[bn],!1),Oe=u.cfg,yu(u[Pu](function(Bn){var sa=Bn.cfg,is=Bt===3;if(!is){aa=sa.initInMemoMaxSize||Mn;var wu=sa[Uo],fm=sa.endpointUrl;if(Le(wu)){Cr=null,Bt=Za[Wr];var dm="Please provide instrumentation key";f?(ht(h,1,100,dm),Ii()):yr(dm);return}var a_=[];if(cr(wu)?(a_[zr](wu),Cr=null):Cr=wu,cr(fm)?(a_[zr](fm),dn=null):dn=fm,a_[fr]){Ti=!1,Bt=3;var W_=wc(sa.initTimeOut)?sa.initTimeOut:Mf,Yw=Cv(a_);Ru(function(){Ti||or()},W_),Ss(Yw,function(Lh){try{if(Ti)return;if(!Lh.rejected){var Mh=Lh[jo];if(Mh&&Mh[fr]){var Uy=Mh[0];if(Cr=Uy&&Uy[jo],Mh[fr]>1){var jy=Mh[1];dn=jy&&jy[jo]}}Cr&&(Oe[Uo]=Cr,Oe.endpointUrl=dn)}or()}catch{Ti||or()}})}else or();var o_=Bn.ref(Bn.cfg,yc);Ct(o_,function(Lh){Bn.ref(o_,Lh)})}})),x=Ot,Je=Fe(u,Ye,x&&$e[md](),Je),kh(),$e[bn]=tr;var gr=Oe[Cl];if(ee=[],ee[zr].apply(ee,pl(pl([],yt,!1),gr)),fe=Oe[Nl],Ea(null),(!pe||pe[fr]===0)&&yr("No "+Nl+" available"),fe&&fe[fr]>1){var oi=$e[Yo]("TeeChannelController");(!oi||!oi.plugin)&&ht(h,1,28,"TeeChannel required")}qv(Oe,mn,h),mn=null,f=!0,Bt===Za.ACTIVE&&Ii()},$e.getChannels=function(){var Oe=[];return pe&&Lt(pe,function(yt){Oe[zr](yt)}),Jt(Oe)},$e.track=function(Oe){Lf($e[ou](),function(){return"AppInsightsCore:track"},function(){Oe===null&&(oa(Oe),yr("Invalid telemetry item")),!Oe[Zn]&&Le(Oe[Zn])&&(oa(Oe),yr("telemetry name required")),Oe[So]=Oe[So]||Cr,Oe[gs]=Oe[gs]||bc(new Date),Oe.ver=Oe.ver||"4.0",!me&&$e[Qr]()&&Bt===Za.ACTIVE?Ro()[$i](Oe):Bt!==Za[Wr]&&E[fr]<=aa&&E[zr](Oe)},function(){return{item:Oe}},!Oe.sync)},$e[ea]=Ro,$e[md]=function(){return x||(x=new Sh(u.cfg),$e[Ar]=x),x},$e[eo]=function(Oe){$e.getNotifyMgr()[eo](Oe)},$e[Lu]=function(Oe){x&&x[Lu](Oe)},$e.getCookieMgr=function(){return $||($=jd(u.cfg,$e[bn])),$},$e.setCookieMgr=function(Oe){$!==Oe&&(Ac($,!1),$=Oe)},$e[ou]=function(){return k||F||jc()},$e.setPerfMgr=function(Oe){k=Oe},$e.eventCnt=function(){return E[fr]},$e.releaseQueue=function(){if(f&&E[fr]>0){var Oe=E;E=[],Bt===2?Lt(Oe,function(yt){yt[So]=yt[So]||Cr,Ro()[$i](yt)}):ht(h,2,20,"core init status is not active")}},$e[dc]=function(Oe){return Me=Oe||null,Wn=!1,nt&&nt[Fo](),Kn(!0)};function or(){Ti=!0,Le(Cr)?(Bt=Za[Wr],ht(h,1,112,"ikey can't be resolved from promises")):Bt=Za.ACTIVE,Ii()}function Ii(){f&&($e.releaseQueue(),$e[dc]())}function Kn(Oe){if((!nt||!nt[hl])&&!Wn){var yt=Oe||h&&h.queue[fr]>0;yt&&(qt||(qt=!0,yu(u[Pu](function(tr){var Ot=tr.cfg.diagnosticLogInterval;(!Ot||!(Ot>0))&&(Ot=1e4);var gr=!1;nt&&(gr=nt[hl],nt[Fo]()),nt=wp(Ah,Ot),nt.unref(),nt[hl]=gr}))),nt[hl]=!0)}return nt}$e[vd]=function(){Wn=!0,nt&&nt[Fo](),Ah()},Td($e,function(){return le},["addTelemetryInitializer"]),$e[Qs]=function(Oe,yt,tr){var Ot;Oe===void 0&&(Oe=!0),f||yr(At),me&&yr(kr);var gr=(Ot={reason:50},Ot[eu]=Oe,Ot.flushComplete=!1,Ot),oi;Oe&&!yt&&(oi=_c(function(is){yt=is}));var Bn=S(tp(),$e);Bn[$o](function(){Ye.run($e[bn]),Lv([$,x,h],Oe,function(){Te(),yt&&yt(gr)})},$e);function sa(is){gr.flushComplete=is,me=!0,Ue.run(Bn,gr),$e[vd](),Bn[$i](gr)}return Ah(),lm(Oe,sa,6,tr),oi},$e[Yo]=qs,$e.addPlugin=function(Oe,yt,tr,Ot){if(!Oe){Ot&&Ot(!1),Ph(Yt);return}var gr=qs(Oe[bo]);if(gr&&!yt){Ot&&Ot(!1),Ph("Plugin ["+Oe[bo]+"] is already loaded!");return}var oi={reason:16};function Bn(wu){ee[zr](Oe),oi.added=[Oe],Ea(oi),Ot&&Ot(!0)}if(gr){var sa=[gr.plugin],is={reason:2,isAsync:!!tr};zl(sa,is,function(wu){wu?(oi.removed=sa,oi.reason|=32,Bn()):Ot&&Ot(!1)})}else Bn()},$e.updateCfg=function(Oe,yt){yt===void 0&&(yt=!0);var tr;if($e[Qr]()){tr={reason:1,cfg:u.cfg,oldCfg:xu({},u.cfg),newConfig:xu({},Oe),merge:yt},Oe=tr.newConfig;var Ot=u.cfg;Oe[Cl]=Ot[Cl],Oe[Nl]=Ot[Nl]}u._block(function(gr){var oi=gr.cfg;qd(gr,oi,Oe,yt),yt||Ct(oi,function(Bn){Lr(Oe,Bn)||gr.set(oi,Bn,iu)}),gr[Qa](oi,Fn)},!0),u[hs](),tr&&cm(tr)},$e.evtNamespace=function(){return be},$e.flush=lm,$e.getTraceCtx=function(Oe){return dt||(dt=Xp()),dt},$e.setTraceCtx=function(Oe){dt=Oe||null},$e.addUnloadHook=yu,Li($e,"addUnloadCb",function(){return Ue},"add"),$e.onCfgChange=function(Oe){var yt;return f?yt=Gu(u.cfg,Oe,$e[bn]):yt=Qp(mn,Oe),Nt(yt)},$e.getWParam=function(){return Ri()||u.cfg.enableWParam?0:-1};function Bs(){var Oe={};$n=[];var yt=function(tr){tr&&Lt(tr,function(Ot){if(Ot[bo]&&Ot[Bo]&&!Oe[Ot.identifier]){var gr=Ot[bo]+"="+Ot[Bo];$n[zr](gr),Oe[Ot.identifier]=Ot}})};yt(pe),fe&&Lt(fe,function(tr){yt(tr)}),yt(ee)}function Te(){f=!1,u=Zo({},Fn,$e[bn]),u.cfg[gl]=1,Hr($e,"config",{g:function(){return u.cfg},s:function(yt){$e.updateCfg(yt,!1)}}),Hr($e,"pluginVersionStringArr",{g:function(){return $n||Bs(),$n}}),Hr($e,"pluginVersionString",{g:function(){return er||($n||Bs(),er=$n.join(";")),er||en}}),Hr($e,"logger",{g:function(){return h||(h=new Ym(u.cfg),u[bn]=h),h},s:function(yt){u[bn]=yt,h!==yt&&(Ac(h,!1),h=yt)}}),$e[bn]=new Ym(u.cfg),vn=[];var Oe=$e.config[Cl]||[];Oe.splice(0,Oe[fr]),ic(Oe,vn),le=new ft,E=[],Ac(x,!1),x=null,k=null,F=null,Ac($,!1),$=null,V=null,ee=[],fe=null,pe=null,me=!1,Me=null,be=Bu("AIBaseCore",!0),Ue=X(),dt=null,Cr=null,Ye=oe(),mn=[],er=null,$n=null,Wn=!1,nt=null,qt=!1,Bt=0,dn=null,aa=null,Ti=!1}function Ro(){var Oe=g(tp(),u.cfg,$e);return Oe[$o](Kn),Oe}function Ea(Oe){var yt=Bd($e[bn],Vp,ee);V=null,er=null,$n=null,pe=(fe||[])[0]||[],pe=pu(ic(pe,yt[Nl]));var tr=ic(pu(yt[ki]),pe);vn=Jt(tr);var Ot=$e.config[Cl]||[];Ot.splice(0,Ot[fr]),ic(Ot,vn);var gr=Ro();pe&&pe[fr]>0&&$c(gr[qo](pe),tr),$c(gr,tr),Oe&&cm(Oe)}function qs(Oe){var yt=null,tr=null,Ot=[];return Lt(vn,function(gr){if(gr[bo]===Oe&&gr!==le)return tr=gr,-1;gr.getChannel&&Ot[zr](gr)}),!tr&&Ot[fr]>0&&Lt(Ot,function(gr){if(tr=gr.getChannel(Oe),!tr)return-1}),tr&&(yt={plugin:tr,setEnabled:function(gr){En(tr)[bd]=!gr},isEnabled:function(){var gr=En(tr);return!gr[ni]&&!gr[bd]},remove:function(gr,oi){var Bn;gr===void 0&&(gr=!0);var sa=[tr],is=(Bn={reason:1},Bn[eu]=gr,Bn);zl(sa,is,function(wu){wu&&Ea({reason:32,removed:sa}),oi&&oi(wu)})}}),yt}function tp(){if(!V){var Oe=(vn||[]).slice();ka(Oe,le)===-1&&Oe[zr](le),V=j(pu(Oe),u.cfg,$e)}return V}function zl(Oe,yt,tr){if(Oe&&Oe[fr]>0){var Ot=j(Oe,u.cfg,$e),gr=S(Ot,$e);gr[$o](function(){var oi=!1,Bn=[];Lt(ee,function(is,wu){Xm(is,Oe)?oi=!0:Bn[zr](is)}),ee=Bn,er=null,$n=null;var sa=[];fe&&(Lt(fe,function(is,wu){var fm=[];Lt(is,function(dm){Xm(dm,Oe)?oi=!0:fm[zr](dm)}),sa[zr](fm)}),fe=sa),tr&&tr(oi),Kn()}),gr[$i](yt)}else tr(!1)}function Ah(){if(h&&h.queue){var Oe=h.queue.slice(0);h.queue[fr]=0,Lt(Oe,function(yt){var tr,Ot=(tr={},tr[Zn]=Me||"InternalMessageId: "+yt[hd],tr[So]=Cr,tr[gs]=bc(new Date),tr.baseType=Ml.dataType,tr.baseData={message:yt[_l]},tr);$e.track(Ot)})}}function lm(Oe,yt,tr,Ot){var gr=1,oi=!1,Bn=null;Ot=Ot||5e3;function sa(){gr--,oi&&gr===0&&(Bn&&Bn[Fo](),Bn=null,yt&&yt(oi),yt=null)}if(pe&&pe[fr]>0){var is=Ro()[qo](pe);is.iterate(function(wu){if(wu.flush){gr++;var fm=!1;wu.flush(Oe,function(){fm=!0,sa()},tr)||fm||(Oe&&Bn==null?Bn=Ru(function(){Bn=null,sa()},Ot):sa())}})}return oi=!0,sa(),!0}function kh(){var Oe;yu(u[Pu](function(yt){var tr=yt.cfg.enablePerfMgr;if(tr){var Ot=yt.cfg[Ap];(Oe!==Ot||!Oe)&&(Ot||(Ot=so),Pp(yt.cfg,Ap,Ot),Oe=Ot,F=null),!k&&!F&&st(Ot)&&(F=Ot($e,$e[md]()))}else F=null,Oe=null}))}function cm(Oe){var yt=D(tp(),$e);yt[$o](Kn),(!$e._updateHook||$e._updateHook(yt,Oe)!==!0)&&yt[$i](Oe)}function Ph(Oe){var yt=$e[bn];yt?(ht(yt,2,73,Oe),Kn()):yr(Oe)}function oa(Oe){var yt=$e[md]();yt&&yt[wr]([Oe],2)}function yu(Oe){Ye.add(Oe)}})}return s.__ieDyn=1,s}();function tn(s,u){try{if(s&&s!==""){var f=Ko().parse(s);if(f&&f[va]&&f[va]>=f.itemsAccepted&&f.itemsReceived-f.itemsAccepted===f.errors[fr])return f}}catch(h){ht(u,1,43,"Cannot parse the response. "+(h[Zn]||ir(h)),{response:s})}return null}var _n="",Tn="NoResponseBody",wi="&"+Tn+"=true",Ju="POST",Us=function(){function s(){var u=0,f,h,E,x,k,F,$,V,ee,fe,pe,me,le,Me;Qi(s,this,function(be,Ue){var Ye=!0;Ti(),be[Xs]=function(nt,qt){E=qt,h&&ht(E,1,28,"Sender is already initialized"),be.SetConfig(nt),h=!0},be._getDbgPlgTargets=function(){return[h,x,F,f]},be.SetConfig=function(nt){try{if(k=nt.senderOnCompleteCallBack||{},F=!!nt.disableCredentials,$=nt.fetchCredentials,x=!!nt.isOneDs,f=!!nt.enableSendPromise,ee=!!nt.disableXhr,fe=!!nt.disableBeacon,pe=!!nt.disableBeaconSync,Me=nt.timeWrapper,le=!!nt.addNoResponse,me=!!nt.disableFetchKeepAlive,V={sendPOST:Bt},x||(Ye=!1),F){var qt=Nd();qt&&qt.protocol&&qt.protocol[ku]()==="file:"&&(Ye=!1)}return!0}catch{}return!1},be.getSyncFetchPayload=function(){return u},be.getSenderInst=function(nt,qt){return nt&&nt[fr]?mn(nt,qt):null},be.getFallbackInst=function(){return V},be[_s]=function(nt,qt){Ti()};function Je(nt,qt){vn(qt,200,{},nt)}function dt(nt,qt){ht(E,2,26,"Failed to send telemetry.",{message:nt}),vn(qt,400,{})}function Cr(nt){dt("No endpoint url is provided for the batch",nt)}function mn(nt,qt){for(var Wn,$e=0,or=null,Ii=0;or==null&&Ii<nt[fr];)$e=nt[Ii],!ee&&$e===1?ta()?or=aa:lu()&&(or=Bt):$e===2&&xd(qt)&&(!qt||!me)?or=dn:$e===3&&Ds()&&(qt?!pe:!fe)&&(or=er),Ii++;return or?(Wn={_transport:$e,_isSync:qt},Wn[bs]=or,Wn):null}function vn(nt,qt,Wn,$e){try{nt&&nt(qt,Wn,$e)}catch{}}function $n(nt,qt){var Wn=cs(),$e=nt[ws];if(!$e)return Cr(qt),!0;$e=nt[ws]+(le?wi:_n);var or=nt[Ua],Ii=x?or:new Blob([or],{type:"text/plain;charset=UTF-8"}),Kn=Wn.sendBeacon($e,Ii);return Kn}function er(nt,qt,Wn){var $e=nt[Ua];try{if($e)if($n(nt,qt))Je(_n,qt);else{var or=k&&k.beaconOnRetry;or&&st(or)?or(nt,qt,$n):(V&&V[bs](nt,qt,!0),ht(E,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Ii){x&&zu(E,"Failed to send telemetry using sendBeacon API. Ex:"+ir(Ii)),vn(qt,x?0:400,{},_n)}}function Bt(nt,qt,Wn){var $e,or,Ii,Kn=nt[Np]||{};!Wn&&f&&($e=_c(function(Ea,qs){or=Ea,Ii=qs})),x&&Wn&&nt.disableXhrSync&&(Wn=!1);var Bs=nt[ws];if(!Bs){Cr(qt),or&&or(!1);return}var Te=Ec(Ju,Bs,Ye,!0,Wn,nt[hf]);x||Te[_d]("Content-type","application/json"),Lt(xn(Kn),function(Ea){Te[_d](Ea,Kn[Ea])}),Te.onreadystatechange=function(){x||(Ro(Te),Te.readyState===4&&or&&or(!0))},Te.onload=function(){x&&Ro(Te)};function Ro(Ea){var qs=k&&k.xhrOnComplete,tp=qs&&st(qs);if(tp)qs(Ea,qt,nt);else{var zl=Ts(Ea);vn(qt,Ea[no],Mp(Ea,x),zl)}}return Te.onerror=function(Ea){vn(qt,x?Te[no]:400,Mp(Te,x),x?_n:io(Te)),Ii&&Ii(Ea)},Te.ontimeout=function(){vn(qt,x?Te[no]:500,Mp(Te,x),x?_n:io(Te)),or&&or(!1)},Te.send(nt[Ua]),$e}function dn(nt,qt,Wn){var $e,or=nt[ws],Ii=nt[Ua],Kn=x?Ii:new Blob([Ii],{type:"application/json"}),Bs,Te,Ro,Ea=new Headers,qs=Ii[fr],tp=!1,zl=!1,Ah=nt[Np]||{},lm=($e={method:Ju,body:Kn},$e[Mv]=!0,$e);nt.headers&&xn(nt.headers)[fr]>0&&(Lt(xn(Ah),function(oa){Ea.append(oa,Ah[oa])}),lm[Np]=Ea),$?lm.credentials=$:Ye&&x&&(lm.credentials="include"),Wn&&(lm.keepalive=!0,u+=qs,x?nt._sendReason===2&&(tp=!0,le&&(or+=wi)):tp=!0);var kh=new Request(or,lm);try{kh[Mv]=!0}catch{}if(!Wn&&f&&(Bs=_c(function(oa,yu){Te=oa,Ro=yu})),!or){Cr(qt),Te&&Te(!1);return}function cm(oa){vn(qt,x?0:400,{},x?_n:oa)}function Ph(oa,yu,Oe){var yt=oa[no],tr=k.fetchOnComplete;tr&&st(tr)?tr(oa,qt,Oe||_n,yu):vn(qt,yt,{},Oe||_n)}try{Ss(fetch(x?or:kh,x?lm:null),function(oa){if(Wn&&(u-=qs,qs=0),!zl)if(zl=!0,oa.rejected)cm(oa.reason&&oa.reason[_l]),Ro&&Ro(oa.reason);else{var yu=oa[jo];try{!x&&!yu.ok?(cm(yu.statusText),Te&&Te(!1)):x&&!yu.body?(Ph(yu,null,_n),Te&&Te(!0)):Ss(yu.text(),function(Oe){Ph(yu,nt,Oe[jo]),Te&&Te(!0)})}catch(Oe){cm(ir(Oe)),Ro&&Ro(Oe)}}})}catch(oa){zl||(cm(ir(oa)),Ro&&Ro(oa))}return tp&&!zl&&(zl=!0,vn(qt,200,{}),Te&&Te(!0)),x&&!zl&&nt[hf]>0&&Me&&Me.set(function(){zl||(zl=!0,vn(qt,500,{}),Te&&Te(!0))},nt[hf]),Bs}function aa(nt,qt,Wn){var $e=ls(),or=new XDomainRequest,Ii=nt[Ua];or.onload=function(){var Ea=Ts(or),qs=k&&k.xdrOnComplete;qs&&st(qs)?qs(or,qt,nt):vn(qt,200,{},Ea)},or.onerror=function(){vn(qt,400,{},x?_n:Is(or))},or.ontimeout=function(){vn(qt,500,{})},or.onprogress=function(){};var Kn=$e&&$e.location&&$e.location[Mu]||"",Bs=nt[ws];if(!Bs){Cr(qt);return}if(!x&&Bs.lastIndexOf(Kn,0)!==0){var Te="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";ht(E,2,40,". "+Te),dt(Te,qt);return}var Ro=x?Bs:Bs[ro](/^(https?:)/,"");or.open(Ju,Ro),nt[hf]&&(or[hf]=nt[hf]),or.send(Ii),x&&Wn?Me&&Me.set(function(){or.send(Ii)},0):or.send(Ii)}function Ti(){u=0,h=!1,f=!1,E=null,x=null,k=null,F=null,$=null,V=null,ee=!1,fe=!1,pe=!1,me=!1,le=!1,Me=null}})}return s.__ieDyn=1,s}(),Zu="on",Bc="attachEvent",Hv="addEventListener",em="detachEvent",Ff="removeEventListener",$l="events";Bu("aiEvtPageHide"),Bu("aiEvtPageShow");var Y_=/\.[\.]+/g,lg=/[\.]+$/,Zg=1,Eh=qp("events"),$_=/^([^.]*)(?:\.(.+)|)/;function Uf(s){return s&&s[ro]?s[ro](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,en):s}function Qm(s,u){var f;if(u){var h=en;ot(u)?(h=en,Lt(u,function(x){x=Uf(x),x&&(x[0]!=="."&&(x="."+x),h+=x)})):h=Uf(u),h&&(h[0]!=="."&&(h="."+h),s=(s||en)+h)}var E=$_.exec(s||en)||[];return f={},f[Sn]=E[1],f.ns=(E[2]||en).replace(Y_,".").replace(lg,en)[Fu](".").sort().join("."),f}function Gv(s,u,f){f===void 0&&(f=!0);var h=Eh.get(s,$l,{},f),E=h[u];return E||(E=h[u]=[]),E}function jf(s,u,f,h){s&&u&&u[Sn]&&(s[Ff]?s[Ff](u[Sn],f,h):s[em]&&s[em](Zu+u[Sn],f))}function ev(s,u,f,h){var E=!1;return s&&u&&u[Sn]&&f&&(s[Hv]?(s[Hv](u[Sn],f,h),E=!0):s[Bc]&&(s[Bc](Zu+u[Sn],f),E=!0)),E}function cg(s,u,f,h){for(var E=u[fr];E--;){var x=u[E];x&&(!f.ns||f.ns===x.evtName.ns)&&(!h||h(x))&&(jf(s,x.evtName,x[_i],x.capture),u[mt](E,1))}}function Xg(s,u,f){if(u[Sn])cg(s,Gv(s,u[Sn]),u,f);else{var h=Eh.get(s,$l,{});Ct(h,function(E,x){cg(s,x,u,f)}),xn(h)[fr]===0&&Eh.kill(s,$l)}}function Gd(s,u){var f;return u?(ot(u)?f=[s].concat(u):f=[s,u],f=Qm("xx",f).ns[Fu](".")):f=s,f}function Qg(s,u,f,h,E){var x;E===void 0&&(E=!1);var k=!1;if(s)try{var F=Qm(u,h);if(k=ev(s,F,f,E),k&&Eh.accept(s)){var $=(x={guid:Zg++,evtName:F},x[_i]=f,x.capture=E,x);Gv(s,F.type)[zr]($)}}catch{}return k}function B_(s,u,f,h,E){if(E===void 0&&(E=!1),s)try{var x=Qm(u,h),k=!1;Xg(s,x,function(F){return x.ns&&!f||F[_i]===f?(k=!0,!0):!1}),k||jf(s,x,f,E)}catch{}}var fg="sampleRate",Vv="ProcessLegacy",dg="http.method",Th="https://dc.services.visualstudio.com",tv="/v2/track",Vd="not_specified",pg=Tp({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),zv="split",jr="length",vu="toLowerCase",zd="ingestionendpoint",rv="toString",nv="push",Wv="removeItem",Yf="name",tm="message",e_="count",rm="stringify",qc="pathname",Hc="match",Gc="exceptions",Bl="parsedStack",ql="properties",Xu="measurements",$f="sizeInBytes",hu="typeName",Bf="severityLevel",Wd="problemGroup",mg="isManual",Ih="hasFullStack",qf="assembly",Hf="fileName",Kd="line",nm="method",Nh="level",iv="aiDataContract",Kv="duration",vg="receivedResponse";function hg(s,u,f){var h=u[jr],E=gg(s,u);if(E[jr]!==h){for(var x=0,k=E;f[k]!==void 0;)x++,k=ri(E,0,147)+N(x);E=k}return E}function gg(s,u){var f;return u&&(u=Rn(Ui(u)),u[jr]>150&&(f=ri(u,0,150),ht(s,2,57,"name is too long.  It has been truncated to 150 characters.",{name:u},!0))),f||u}function Xn(s,u,f){f===void 0&&(f=1024);var h;return u&&(f=f||1024,u=Rn(Ui(u)),u[jr]>f&&(h=ri(u,0,f),ht(s,2,61,"string value is too long. It has been truncated to "+f+" characters.",{value:u},!0))),h||u}function Jd(s,u){return y(s,u,2048,66)}function ii(s,u){var f;return u&&u[jr]>32768&&(f=ri(u,0,32768),ht(s,2,56,"message is too long, it has been truncated to 32768 characters.",{message:u},!0)),f||u}function q_(s,u){var f;if(u){var h=""+u;h[jr]>32768&&(f=ri(h,0,32768),ht(s,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:u},!0))}return f||u}function im(s,u){if(u){var f={};Ct(u,function(h,E){if(ei(E)&&Wo())try{E=Ko()[rm](E)}catch(x){ht(s,2,49,"custom property is not valid",{exception:x},!0)}E=Xn(s,E,8192),h=hg(s,h,f),f[h]=E}),u=f}return u}function Zd(s,u){if(u){var f={};Ct(u,function(h,E){h=hg(s,h,f),f[h]=E}),u=f}return u}function p(s,u){return u&&y(s,u,128,69)[rv]()}function y(s,u,f,h){var E;return u&&(u=Rn(Ui(u)),u[jr]>f&&(E=ri(u,0,f),ht(s,2,h,"input is too long, it has been truncated to "+f+" characters.",{data:u},!0))),E||u}function N(s){var u="00"+s;return rc(u,u[jr]-3)}var R=nd()||{},P=0,B=[null,null,null,null,null];function G(s){var u=P,f=B,h=f[u];return R.createElement?f[u]||(h=f[u]=R.createElement("a")):h={host:re(s,!0)},h.href=s,u++,u>=f[jr]&&(u=0),P=u,h}function re(s,u){var f=ue(s,u)||"";if(f){var h=f[Hc](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(h!=null&&h[jr]>3&&hn(h[2])&&h[2][jr]>0)return h[2]+(h[3]||"")}return f}function ue(s,u){var f=null;if(s){var h=s[Hc](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(h!=null&&h[jr]>2&&hn(h[2])&&h[2][jr]>0&&(f=h[2]||"",u&&h[jr]>2)){var E=(h[1]||"")[vu](),x=h[3]||"";(E==="http"&&x===":80"||E==="https"&&x===":443")&&(x=""),f+=x}}return f}var ce=[Th+tv,"https://breeze.aimon.applicationinsights.io"+tv,"https://dc-int.services.visualstudio.com"+tv];function ke(s){return ka(ce,s[vu]())!==-1}function We(s,u,f,h){var E,x=h,k=h;if(u&&u[jr]>0){var F=G(u);if(E=F.host,!x)if(F[qc]!=null){var $=F.pathname[jr]===0?"/":F[qc];$.charAt(0)!=="/"&&($="/"+$),k=F[qc],x=Xn(s,f?f+" "+$:$)}else x=Xn(s,u)}else E=h,x=h;return{target:E,name:x,data:k}}var Ke=ml({LocalStorage:0,SessionStorage:1}),De=void 0,we="";function Be(s){try{if(Le(Oa()))return null;var u=new Date()[rv](),f=Or(s===Ke.LocalStorage?"localStorage":"sessionStorage"),h=we+u;f.setItem(h,u);var E=f.getItem(h)!==u;if(f[Wv](h),!E)return f}catch{}return null}function Ne(){return Pe()?Be(Ke.SessionStorage):null}function Qe(s){we=s||""}function Pe(s){return(s||De===void 0)&&(De=!!Be(Ke.SessionStorage)),De}function Re(s,u){var f=Ne();if(f!==null)try{return f.getItem(u)}catch(h){De=!1,ht(s,2,2,"Browser failed read of session storage. "+Pi(h),{exception:ir(h)})}return null}function Ge(s,u,f){var h=Ne();if(h!==null)try{return h.setItem(u,f),!0}catch(E){De=!1,ht(s,2,4,"Browser failed write to session storage. "+Pi(E),{exception:ir(E)})}return!1}function Vt(s,u){var f=Ne();if(f!==null)try{return f[Wv](u),!0}catch(h){De=!1,ht(s,2,6,"Browser failed removal of session storage item. "+Pi(h),{exception:ir(h)})}return!1}var Qt=";",hr="=";function Pr(s){if(!s)return{};var u=s[zv](Qt),f=wv(u,function(E,x){var k=x[zv](hr);if(k[jr]===2){var F=k[0][vu](),$=k[1];E[F]=$}return E},{});if(xn(f)[jr]>0){if(f.endpointsuffix){var h=f.location?f.location+".":"";f[zd]=f[zd]||"https://"+h+"dc."+f.endpointsuffix}f[zd]=f[zd]||Th,Ka(f[zd],"/")&&(f[zd]=f[zd].slice(0,-1))}return f}var pn=function(){function s(u,f,h){var E=this,x=this;x.ver=1,x.sampleRate=100,x.tags={},x[Yf]=Xn(u,h)||Vd,x.data=f,x.time=bc(new Date),x[iv]={time:1,iKey:1,name:1,sampleRate:function(){return E.sampleRate===100?4:1},tags:1,data:1}}return s}(),an=function(){function s(u,f,h,E){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var x=this;x.ver=2,x[Yf]=Xn(u,f)||Vd,x[ql]=im(u,h),x[Xu]=Zd(u,E)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.Event",s.dataType="EventData",s}(),Qn=58,Kr=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Gi=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,at=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,gt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,xr=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,br=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,xt=/([^\(\s\n]+):([0-9]+)$/,Yr="<no_method>",Et="error",In="stack",_t="stackDetails",Un="errorSrc",jn="message",ya="description",Qu=[{re:Gi,len:5,m:1,fn:2,ln:3,col:4},{chk:am,pre:js,re:at,len:4,m:1,fn:2,ln:3},{re:gt,len:3,m:1,fn:2,hdl:Qv},{re:xr,len:2,fn:1,hdl:Qv}];function js(s){return s.replace(/(\(anonymous\))/,"<anonymous>")}function am(s){return Du(s,"[native")<0}function gu(s,u){var f=s;return f&&!hn(f)&&(JSON&&JSON[rm]?(f=JSON[rm](s),u&&(!f||f==="{}")&&(st(s[rv])?f=s[rv]():f=""+s)):f=""+s+" - (Missing JSON.stringify)"),f||""}function es(s,u){var f=s;return s&&(f&&!hn(f)&&(f=s[jn]||s[ya]||f),f&&!hn(f)&&(f=gu(f,!0)),s.filename&&(f=f+" @"+(s.filename||"")+":"+(s.lineno||"?")+":"+(s.colno||"?"))),u&&u!=="String"&&u!=="Object"&&u!=="Error"&&Du(f||"",u)===-1&&(f=u+": "+f),f||""}function Hl(s){try{if(ei(s))return"hasFullStack"in s&&"typeName"in s}catch{}return!1}function bi(s){try{if(ei(s))return"ver"in s&&"exceptions"in s&&"properties"in s}catch{}return!1}function An(s){return s&&s.src&&hn(s.src)&&s.obj&&ot(s.obj)}function ai(s){var u=s||"";hn(u)||(hn(u[In])?u=u[In]:u=""+u);var f=u[zv](`
`);return{src:u,obj:f}}function wa(s){for(var u=[],f=s[zv](`
`),h=0;h<f[jr];h++){var E=f[h];f[h+1]&&(E+="@"+f[h+1],h++),u[nv](E)}return{src:s,obj:u}}function Gl(s){var u=null;if(s)try{if(s[In])u=ai(s[In]);else if(s[Et]&&s[Et][In])u=ai(s[Et][In]);else if(s.exception&&s.exception[In])u=ai(s.exception[In]);else if(An(s))u=s;else if(An(s[_t]))u=s[_t];else if(ls()&&ls().opera&&s[jn])u=wa(s[tm]);else if(s.reason&&s.reason[In])u=ai(s.reason[In]);else if(hn(s))u=ai(s);else{var f=s[jn]||s[ya]||"";hn(s[Un])&&(f&&(f+=`
`),f+=" from "+s[Un]),f&&(u=ai(f))}}catch(h){u=ai(h)}return u||{src:"",obj:null}}function Xd(s){var u="";return s&&(s.obj?u=s.obj.join(`
`):u=s.src||""),u}function Ys(s){var u,f=s.obj;if(f&&f[jr]>0){u=[];var h=0,E=!1,x=0;Lt(f,function(Me){if(E||eh(Me)){var be=Ui(Me);E=!0;var Ue=th(be,h);Ue&&(x+=Ue[$f],u[nv](Ue),h++)}});var k=32*1024;if(x>k)for(var F=0,$=u[jr]-1,V=0,ee=F,fe=$;F<$;){var pe=u[F][$f],me=u[$][$f];if(V+=pe+me,V>k){var le=fe-ee+1;u.splice(ee,le);break}ee=F,fe=$,F++,$--}}return u}function Gf(s){var u="";if(s&&(u=s.typeName||s[Yf]||"",!u))try{var f=/function (.{1,200})\(/,h=f.exec(s.constructor[rv]());u=h&&h[jr]>1?h[1]:""}catch{}return u}function Vf(s){if(s)try{if(!hn(s)){var u=Gf(s),f=gu(s,!1);return(!f||f==="{}")&&(s[Et]&&(s=s[Et],u=Gf(s)),f=gu(s,!0)),Du(f,u)!==0&&u!=="String"?u+":"+f:f}}catch{}return""+(s||"")}var Qd=function(){function s(u,f,h,E,x,k){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var F=this;F.ver=2,bi(f)?(F[Gc]=f[Gc]||[],F[ql]=f[ql],F[Xu]=f[Xu],f[Bf]&&(F[Bf]=f[Bf]),f.id&&(F.id=f.id,f[ql].id=f.id),f[Wd]&&(F[Wd]=f[Wd]),Le(f[mg])||(F[mg]=f[mg])):(h||(h={}),k&&(h.id=k),F[Gc]=[Zv(u,f,h)],F[ql]=im(u,h),F[Xu]=Zd(u,E),x&&(F[Bf]=x),k&&(F.id=k))}return s.CreateAutoException=function(u,f,h,E,x,k,F,$){var V,ee=Gf(x||k||u);return V={},V[tm]=es(u,ee),V.url=f,V.lineNumber=h,V.columnNumber=E,V.error=Vf(x||k||u),V.evt=Vf(k||u),V[hu]=ee,V.stackDetails=Gl(F||x||k),V.errorSrc=$,V},s.CreateFromInterface=function(u,f,h,E){var x=f[Gc]&&sl(f[Gc],function(F){return xh(u,F)}),k=new s(u,wo(wo({},f),{exceptions:x}),h,E);return k},s.prototype.toInterface=function(){var u,f=this,h=f.exceptions,E=f.properties,x=f.measurements,k=f.severityLevel,F=f.problemGroup,$=f.id,V=f.isManual,ee=h instanceof Array&&sl(h,function(fe){return fe.toInterface()})||void 0;return u={ver:"4.0"},u[Gc]=ee,u.severityLevel=k,u.properties=E,u.measurements=x,u.problemGroup=F,u.id=$,u.isManual=V,u},s.CreateSimpleException=function(u,f,h,E,x,k){var F;return{exceptions:[(F={},F[Ih]=!0,F.message=u,F.stack=x,F.typeName=f,F)]}},s.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",s.dataType="ExceptionData",s.formatError=Vf,s}(),Ch=Jt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function Jv(){var s,u=this,f=ot(u[Bl])&&sl(u[Bl],function(E){return m(E)}),h=(s={id:u.id,outerId:u.outerId,typeName:u[hu],message:u[tm],hasFullStack:u[Ih],stack:u[In]},s[Bl]=f||void 0,s);return h}function Zv(s,u,f){var h,E,x,k,F,$,V,ee;if(Hl(u))k=u[hu],F=u[tm],V=u[In],ee=u[Bl]||[],$=u[Ih];else{var fe=u,pe=fe&&fe.evt;Kt(fe)||(fe=fe[Et]||pe||fe),k=Xn(s,Gf(fe))||Vd,F=ii(s,es(u||fe,k))||Vd;var me=u[_t]||Gl(u);ee=Ys(me),ot(ee)&&sl(ee,function(le){le[qf]=Xn(s,le[qf]),le[Hf]=Xn(s,le[Hf])}),V=q_(s,Xd(me)),$=ot(ee)&&ee[jr]>0,f&&(f[hu]=f[hu]||k)}return h={},h[iv]=Ch,h.id=E,h.outerId=x,h[hu]=k,h[tm]=F,h[Ih]=$,h.stack=V,h[Bl]=ee,h.toInterface=Jv,h}function xh(s,u){var f=ot(u[Bl])&&sl(u[Bl],function(E){return o(E)})||u[Bl],h=Zv(s,wo(wo({},u),{parsedStack:f}));return h}function Xv(s,u){var f=u[Hc](br);if(f&&f[jr]>=4)s[Hf]=f[1],s[Kd]=parseInt(f[2]);else{var h=u[Hc](xt);h&&h[jr]>=3?(s[Hf]=h[1],s[Kd]=parseInt(h[2])):s[Hf]=u}}function Qv(s,u,f){var h=s[Hf];u.fn&&f&&f[jr]>u.fn&&(u.ln&&f[jr]>u.ln?(h=Rn(f[u.fn]||""),s[Kd]=parseInt(Rn(f[u.ln]||""))||0):h=Rn(f[u.fn]||"")),h&&Xv(s,h)}function eh(s){var u=!1;if(s&&hn(s)){var f=Rn(s);f&&(u=Kr.test(f))}return u}var _u=Jt({level:1,method:1,assembly:0,fileName:0,line:0});function th(s,u){var f,h;if(s&&hn(s)&&Rn(s)){h=(f={},f[iv]=_u,f[Nh]=u,f[qf]=Rn(s),f[nm]=Yr,f.fileName="",f.line=0,f[$f]=0,f);for(var E=0;E<Qu[jr];){var x=Qu[E];if(x.chk&&!x.chk(s))break;x.pre&&(s=x.pre(s));var k=s[Hc](x.re);if(k&&k[jr]>=x.len){x.m&&(h[nm]=Rn(k[x.m]||Yr)),x.hdl?x.hdl(h,x,k):x.fn&&(x.ln?(h[Hf]=Rn(k[x.fn]||""),h[Kd]=parseInt(Rn(k[x.ln]||""))||0):Xv(h,k[x.fn]||""));break}E++}}return c(h)}function o(s){var u,f=(u={},u[iv]=_u,u.level=s[Nh],u.method=s[nm],u.assembly=s[qf],u.fileName=s[Hf],u.line=s[Kd],u[$f]=0,u);return c(f)}function c(s){var u=Qn;return s&&(u+=s.method[jr],u+=s.assembly[jr],u+=s.fileName[jr],u+=s.level.toString()[jr],u+=s.line.toString()[jr],s[$f]=u),s}function m(s){return{level:s[Nh],method:s[nm],assembly:s[qf],fileName:s[Hf],line:s[Kd]}}var w=function(){function s(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s}(),I=function(){function s(u,f,h,E,x,k,F,$,V){this.aiDataContract={ver:1,metrics:1,properties:0};var ee=this;ee.ver=2;var fe=new w;fe[e_]=E>0?E:void 0,fe.max=isNaN(k)||k===null?void 0:k,fe.min=isNaN(x)||x===null?void 0:x,fe[Yf]=Xn(u,f)||Vd,fe.value=h,fe.stdDev=isNaN(F)||F===null?void 0:F,ee.metrics=[fe],ee[ql]=im(u,$),ee[Xu]=Zd(u,V)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",s.dataType="MetricData",s}(),O="";function L(s){(isNaN(s)||s<0)&&(s=0),s=Math.round(s);var u=O+s%1e3,f=O+Math.floor(s/1e3)%60,h=O+Math.floor(s/(1e3*60))%60,E=O+Math.floor(s/(1e3*60*60))%24,x=Math.floor(s/(1e3*60*60*24));return u=u[jr]===1?"00"+u:u[jr]===2?"0"+u:u,f=f[jr]<2?"0"+f:f,h=h[jr]<2?"0"+h:h,E=E[jr]<2?"0"+E:E,(x>0?x+".":O)+E+":"+h+":"+f+"."+u}var A=function(){function s(u,f,h,E,x,k,F){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var $=this;$.ver=2,$.id=p(u,F),$.url=Jd(u,h),$[Yf]=Xn(u,f)||Vd,isNaN(E)||($[Kv]=L(E)),$[ql]=im(u,x),$[Xu]=Zd(u,k)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",s.dataType="PageviewData",s}(),M=function(){function s(u,f,h,E,x,k,F,$,V,ee,fe,pe){V===void 0&&(V="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var me=this;me.ver=2,me.id=f,me[Kv]=L(x),me.success=k,me.resultCode=F+"",me.type=Xn(u,V);var le=We(u,h,$,E);me.data=Jd(u,E)||le.data,me.target=Xn(u,le.target),ee&&(me.target="".concat(me.target," | ").concat(ee)),me[Yf]=Xn(u,le[Yf]),me[ql]=im(u,fe),me[Xu]=Zd(u,pe)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",s.dataType="RemoteDependencyData",s}(),Y=function(){function s(u,f,h,E,x){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var k=this;k.ver=2,f=f||Vd,k[tm]=ii(u,f),k[ql]=im(u,E),k[Xu]=Zd(u,x),h&&(k[Bf]=h)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.Message",s.dataType="MessageData",s}(),z=function(){function s(u,f,h,E,x,k,F){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var $=this;$.ver=2,$.url=Jd(u,h),$[Yf]=Xn(u,f)||Vd,$[ql]=im(u,x),$[Xu]=Zd(u,k),F&&($.domProcessing=F.domProcessing,$[Kv]=F[Kv],$.networkConnect=F.networkConnect,$.perfTotal=F.perfTotal,$[vg]=F[vg],$.sentRequest=F.sentRequest)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",s.dataType="PageviewPerformanceData",s}(),te=function(){function s(u,f){this.aiDataContract={baseType:1,baseData:1},this.baseType=u,this.baseData=f}return s}(),Q=ml({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function ae(s){var u="ai."+s+".";return function(f){return u+f}}var ie=ae("application"),ge=ae("device"),Ee=ae("location"),je=ae("operation"),et=ae("session"),it=ae("user"),$t=ae("cloud"),Ir=ae("internal"),Si=function(s){vf(u,s);function u(){return s.call(this)||this}return u}(Lp({applicationVersion:ie("ver"),applicationBuild:ie("build"),applicationTypeId:ie("typeId"),applicationId:ie("applicationId"),applicationLayer:ie("layer"),deviceId:ge("id"),deviceIp:ge("ip"),deviceLanguage:ge("language"),deviceLocale:ge("locale"),deviceModel:ge("model"),deviceFriendlyName:ge("friendlyName"),deviceNetwork:ge("network"),deviceNetworkName:ge("networkName"),deviceOEMName:ge("oemName"),deviceOS:ge("os"),deviceOSVersion:ge("osVersion"),deviceRoleInstance:ge("roleInstance"),deviceRoleName:ge("roleName"),deviceScreenResolution:ge("screenResolution"),deviceType:ge("type"),deviceMachineName:ge("machineName"),deviceVMName:ge("vmName"),deviceBrowser:ge("browser"),deviceBrowserVersion:ge("browserVersion"),locationIp:Ee("ip"),locationCountry:Ee("country"),locationProvince:Ee("province"),locationCity:Ee("city"),operationId:je("id"),operationName:je("name"),operationParentId:je("parentId"),operationRootId:je("rootId"),operationSyntheticSource:je("syntheticSource"),operationCorrelationVector:je("correlationVector"),sessionId:et("id"),sessionIsFirst:et("isFirst"),sessionIsNew:et("isNew"),userAccountAcquisitionDate:it("accountAcquisitionDate"),userAccountId:it("accountId"),userAgent:it("userAgent"),userId:it("id"),userStoreRegion:it("storeRegion"),userAuthUserId:it("authUserId"),userAnonymousUserAcquisitionDate:it("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:it("authUserAcquisitionDate"),cloudName:$t("name"),cloudRole:$t("role"),cloudRoleVer:$t("roleVer"),cloudRoleInstance:$t("roleInstance"),cloudEnvironment:$t("environment"),cloudLocation:$t("location"),cloudDeploymentUnit:$t("deploymentUnit"),internalNodeName:Ir("nodeName"),internalSdkVersion:Ir("sdkVersion"),internalAgentVersion:Ir("agentVersion"),internalSnippet:Ir("snippet"),internalSdkSrc:Ir("sdkSrc")})),Sr=new Si;function Vi(s,u){B_(s,null,null,u)}function ts(s){var u=nd(),f=cs(),h=!1,E=[],x=1;f&&!Le(f.onLine)&&!f.onLine&&(x=2);var k=0,F=pe(),$=Gd(Bu("OfflineListener"),s);try{if(ee(ls())&&(h=!0),u){var V=u.body||u;V.ononline&&ee(V)&&(h=!0)}}catch{h=!1}function ee(Je){var dt=!1;return Je&&(dt=Qg(Je,"online",Me,$),dt&&Qg(Je,"offline",be,$)),dt}function fe(){return F}function pe(){return!(k===2||x===2)}function me(){var Je=pe();F!==Je&&(F=Je,Lt(E,function(dt){var Cr={isOnline:F,rState:x,uState:k};try{dt(Cr)}catch{}}))}function le(Je){k=Je,me()}function Me(){x=1,me()}function be(){x=2,me()}function Ue(){var Je=ls();if(Je&&h){if(Vi(Je,$),u){var dt=u.body||u;rt(dt.ononline)||Vi(dt,$)}h=!1}}function Ye(Je){return E[nv](Je),{rm:function(){var dt=E.indexOf(Je);if(dt>-1)return E.splice(dt,1)}}}return{isOnline:fe,isListening:function(){return h},unload:Ue,addListener:Ye,setOnlineState:le}}var rs="AppInsightsChannelPlugin",Vl="duration",ba="tags",zf="deviceType",Ve="data",kt="name",Vn="traceID",Se="length",lr="stringify",zn="measurements",zi="dataType",uo="envelopeType",Ur="toString",ra="_get",pi="enqueue",na="count",ep="eventsLimitInMem",Sa="push",om="item",Wf="emitLineDelimitedJson",sm="clear",um="createNew",av="markAsSent",mi="clearSent",ns="bufferOverride",Ce="BUFFER_KEY",ut="SENT_BUFFER_KEY",Ut="concat",Pt="MAX_BUFFER_SIZE",ar="triggerSend",$r="diagLog",Yn="initialize",Ei="_sender",ja="endpointUrl",lo="instrumentationKey",Kf="customHeaders",Dh="maxBatchSizeInBytes",Rh="onunloadDisableBeacon",H_="isBeaconApiDisabled",Ay="alwaysUseXhrOverride",t_="disableXhr",_g="enableSessionStorageBuffer",Vc="_buffer",G_="onunloadDisableFetch",V_="disableSendBeaconSplit",Ow="enableSendPromise",ky="getSenderInst",WS="unloadTransports",KS="convertUndefined",JS="maxBatchInterval",Py="serialize",yg="_onError",Aw="_onPartialSuccess",Ly="_onSuccess",kw="itemsReceived",Pw="itemsAccepted",Lw="oriPayload",Mw="baseType",My="sampleRate",ZS="eventsSendRequest",XS="getSamplingScore",KD="getHashCodeScore",Fw="baseType",ia="baseData",$s="properties",QS="true";function co(s,u,f){return Uu(s,u,f,Ci)}function JD(s,u,f){var h=f[ba]=f[ba]||{},E=u.ext=u.ext||{},x=u[ba]=u[ba]||[],k=E.user;k&&(co(h,Sr.userAuthUserId,k.authId),co(h,Sr.userId,k.id||k.localId));var F=E.app;F&&co(h,Sr.sessionId,F.sesId);var $=E.device;$&&(co(h,Sr.deviceId,$.id||$.localId),co(h,Sr[zf],$.deviceClass),co(h,Sr.deviceIp,$.ip),co(h,Sr.deviceModel,$.model),co(h,Sr[zf],$[zf]));var V=u.ext.web;if(V){co(h,Sr.deviceLanguage,V.browserLang),co(h,Sr.deviceBrowserVersion,V.browserVer),co(h,Sr.deviceBrowser,V.browser);var ee=f[Ve]=f[Ve]||{},fe=ee[ia]=ee[ia]||{},pe=fe[$s]=fe[$s]||{};co(pe,"domain",V.domain),co(pe,"isManual",V.isManual?QS:null),co(pe,"screenRes",V.screenRes),co(pe,"userConsent",V.userConsent?QS:null)}var me=E.os;me&&(co(h,Sr.deviceOS,me[kt]),co(h,Sr.deviceOSVersion,me.osVer));var le=E.trace;le&&(co(h,Sr.operationParentId,le.parentID),co(h,Sr.operationName,Xn(s,le[kt])),co(h,Sr.operationId,le[Vn]));for(var Me={},be=x[Se]-1;be>=0;be--){var Ue=x[be];Ct(Ue,function(Je,dt){Me[Je]=dt}),x.splice(be,1)}Ct(x,function(Je,dt){Me[Je]=dt});var Ye=wo(wo({},h),Me);Ye[Sr.internalSdkVersion]||(Ye[Sr.internalSdkVersion]=Xn(s,"javascript:".concat(ZD.Version),64)),f[ba]=su(Ye)}function Oh(s,u,f){Le(s)||Ct(s,function(h,E){Xt(E)?f[h]=E:hn(E)?u[h]=E:Wo()&&(u[h]=Ko()[lr](E))})}function wg(s,u){Le(s)||Ct(s,function(f,h){s[f]=h||u})}function bg(s,u,f,h){var E=new pn(s,h,u);co(E,"sampleRate",f[fg]),(f[ia]||{}).startTime&&(E.time=bc(f[ia].startTime)),E.iKey=f.iKey;var x=f.iKey.replace(/-/g,"");return E[kt]=E[kt].replace("{0}",x),JD(s,f,E),f[ba]=f[ba]||[],su(E)}function Sg(s,u){Le(u[ia])&&ht(s,1,46,"telemetryItem.baseData cannot be null.")}var ZD={Version:"3.3.5"};function XD(s,u,f){Sg(s,u);var h=u[ia][zn]||{},E=u[ia][$s]||{};Oh(u[Ve],E,h),Le(f)||wg(E,f);var x=u[ia];if(Le(x))return zu(s,"Invalid input for dependency data"),null;var k=x[$s]&&x[$s][dg]?x[$s][dg]:"GET",F=new M(s,x.id,x.target,x[kt],x[Vl],x.success,x.responseCode,k,x.type,x.correlationContext,E,h),$=new te(M[zi],F);return bg(s,M[uo],u,$)}function eE(s,u,f){Sg(s,u);var h={},E={};u[Fw]!==an[zi]&&(h.baseTypeSource=u[Fw]),u[Fw]===an[zi]?(h=u[ia][$s]||{},E=u[ia][zn]||{}):u[ia]&&Oh(u[ia],h,E),Oh(u[Ve],h,E),Le(f)||wg(h,f);var x=u[ia][kt],k=new an(s,x,h,E),F=new te(an[zi],k);return bg(s,an[uo],u,F)}function QD(s,u,f){Sg(s,u);var h=u[ia][zn]||{},E=u[ia][$s]||{};Oh(u[Ve],E,h),Le(f)||wg(E,f);var x=u[ia],k=Qd.CreateFromInterface(s,x,E,h),F=new te(Qd[zi],k);return bg(s,Qd[uo],u,F)}function eR(s,u,f){Sg(s,u);var h=u[ia],E=h[$s]||{},x=h[zn]||{};Oh(u[Ve],E,x),Le(f)||wg(E,f);var k=new I(s,h[kt],h.average,h.sampleCount,h.min,h.max,h.stdDev,E,x),F=new te(I[zi],k);return bg(s,I[uo],u,F)}function tR(s,u,f){Sg(s,u);var h,E=u[ia];!Le(E)&&!Le(E[$s])&&!Le(E[$s][Vl])?(h=E[$s][Vl],delete E[$s][Vl]):!Le(u[Ve])&&!Le(u[Ve][Vl])&&(h=u[Ve][Vl],delete u[Ve][Vl]);var x=u[ia],k;((u.ext||{}).trace||{})[Vn]&&(k=u.ext.trace[Vn]);var F=x.id||k,$=x[kt],V=x.uri,ee=x[$s]||{},fe=x[zn]||{};if(Le(x.refUri)||(ee.refUri=x.refUri),Le(x.pageType)||(ee.pageType=x.pageType),Le(x.isLoggedIn)||(ee.isLoggedIn=x.isLoggedIn[Ur]()),!Le(x[$s])){var pe=x[$s];Ct(pe,function(Me,be){ee[Me]=be})}Oh(u[Ve],ee,fe),Le(f)||wg(ee,f);var me=new A(s,$,V,h,ee,fe,F),le=new te(A[zi],me);return bg(s,A[uo],u,le)}function rR(s,u,f){Sg(s,u);var h=u[ia],E=h[kt],x=h.uri||h.url,k=h[$s]||{},F=h[zn]||{};Oh(u[Ve],k,F),Le(f)||wg(k,f);var $=new z(s,E,x,void 0,k,F,h),V=new te(z[zi],$);return bg(s,z[uo],u,V)}function nR(s,u,f){Sg(s,u);var h=u[ia].message,E=u[ia].severityLevel,x=u[ia][$s]||{},k=u[ia][zn]||{};Oh(u[Ve],x,k),Le(f)||wg(x,f);var F=new Y(s,h,E,x,k),$=new te(Y[zi],F);return bg(s,Y[uo],u,$)}var tE=function(){function s(u,f){var h=[],E=!1,x=f.maxRetryCnt;this[ra]=function(){return h},this._set=function(k){return h=k,h},Qi(s,this,function(k){k[pi]=function(F){if(k[na]()>=f[ep]){E||(ht(u,2,105,"Maximum in-memory buffer size reached: "+k[na](),!0),E=!0);return}F.cnt=F.cnt||0,!(!Le(x)&&F.cnt>x)&&h[Sa](F)},k[na]=function(){return h[Se]},k.size=function(){for(var F=h[Se],$=0;$<h[Se];$++)F+=h[$].item[Se];return f[Wf]||(F+=2),F},k[sm]=function(){h=[],E=!1},k.getItems=function(){return h.slice(0)},k.batchPayloads=function(F){if(F&&F[Se]>0){var $=[];Lt(F,function(ee){$[Sa](ee[om])});var V=f[Wf]?$.join(`
`):"["+$.join(",")+"]";return V}return null},k[um]=function(F,$,V){var ee=h.slice(0);F=F||u,$=$||{};var fe=V?new rE(F,$):new Uw(F,$);return Lt(ee,function(pe){fe[pi](pe)}),fe}})}return s.__ieDyn=1,s}(),Uw=function(s){vf(u,s);function u(f,h){var E=s.call(this,f,h)||this;return Qi(u,E,function(x,k){x[av]=function(F){k[sm]()},x[mi]=function(F){}}),E}return u.__ieDyn=1,u}(tE),iR=["AI_buffer","AI_sentBuffer"],rE=function(s){vf(u,s);function u(h,E){var x=s.call(this,h,E)||this,k=!1,F=E==null?void 0:E.namePrefix,$=E[ns]||{getItem:Re,setItem:Ge},V=$.getItem,ee=$.setItem,fe=E.maxRetryCnt;return Qi(u,x,function(pe,me){var le=dt(u[Ce]),Me=dt(u[ut]),be=vn(),Ue=Me[Ut](be),Ye=pe._set(le[Ut](Ue));Ye[Se]>u[Pt]&&(Ye[Se]=u[Pt]),mn(u[ut],[]),mn(u[Ce],Ye),pe[pi]=function(er){if(pe[na]()>=u[Pt]){k||(ht(h,2,67,"Maximum buffer size reached: "+pe[na](),!0),k=!0);return}er.cnt=er.cnt||0,!(!Le(fe)&&er.cnt>fe)&&(me[pi](er),mn(u.BUFFER_KEY,pe[ra]()))},pe[sm]=function(){me[sm](),mn(u.BUFFER_KEY,pe[ra]()),mn(u[ut],[]),k=!1},pe[av]=function(er){mn(u[Ce],pe._set(Je(er,pe[ra]())));var Bt=dt(u[ut]);Bt instanceof Array&&er instanceof Array&&(Bt=Bt[Ut](er),Bt[Se]>u[Pt]&&(ht(h,1,67,"Sent buffer reached its maximum size: "+Bt[Se],!0),Bt[Se]=u[Pt]),mn(u[ut],Bt))},pe[mi]=function(er){var Bt=dt(u[ut]);Bt=Je(er,Bt),mn(u[ut],Bt)},pe[um]=function(er,Bt,dn){dn=!!dn;var aa=pe[ra]().slice(0),Ti=dt(u[ut]).slice(0);er=er||h,Bt=Bt||{},pe[sm]();var nt=dn?new u(er,Bt):new Uw(er,Bt);return Lt(aa,function(qt){nt[pi](qt)}),dn&&nt[av](Ti),nt};function Je(er,Bt){var dn=[],aa=[];return Lt(er,function(Ti){aa[Sa](Ti[om])}),Lt(Bt,function(Ti){!st(Ti)&&ka(aa,Ti[om])===-1&&dn[Sa](Ti)}),dn}function dt(er){var Bt=er;return Bt=F?F+"_"+Bt:Bt,Cr(Bt)}function Cr(er){try{var Bt=V(h,er);if(Bt){var dn=Ko().parse(Bt);if(hn(dn)&&(dn=Ko().parse(dn)),dn&&ot(dn))return dn}}catch(aa){ht(h,1,42," storage key: "+er+", "+Pi(aa),{exception:ir(aa)})}return[]}function mn(er,Bt){var dn=er;try{dn=F?F+"_"+dn:dn;var aa=JSON[lr](Bt);ee(h,dn,aa)}catch(Ti){ee(h,dn,JSON[lr]([])),ht(h,2,41," storage key: "+dn+", "+Pi(Ti)+". Buffer cleared",{exception:ir(Ti)})}}function vn(){var er=[];try{return Lt(iR,function(Bt){var dn=$n(Bt);if(er=er[Ut](dn),F){var aa=F+"_"+Bt,Ti=$n(aa);er=er[Ut](Ti)}}),er}catch(Bt){ht(h,2,41,"Transfer events from previous buffers: "+Pi(Bt)+". previous Buffer items can not be removed",{exception:ir(Bt)})}return[]}function $n(er){try{var Bt=Cr(er),dn=[];return Lt(Bt,function(aa){var Ti={item:aa,cnt:0};dn[Sa](Ti)}),Vt(h,er),dn}catch{}return[]}}),x}var f;return f=u,u.VERSION="_1",u.BUFFER_KEY="AI_buffer"+f.VERSION,u.SENT_BUFFER_KEY="AI_sentBuffer"+f.VERSION,u.MAX_BUFFER_SIZE=2e3,u}(tE),aR=function(){function s(u){Qi(s,this,function(f){f[Py]=function(k){var F=h(k,"root");try{return Ko()[lr](F)}catch($){ht(u,1,48,$&&st($[Ur])?$[Ur]():"Error serializing object",null,!0)}};function h(k,F){var $="__aiCircularRefCheck",V={};if(!k)return ht(u,1,48,"cannot serialize object because it is null or undefined",{name:F},!0),V;if(k[$])return ht(u,2,50,"Circular reference detected while serializing object",{name:F},!0),V;if(!k.aiDataContract){if(F==="measurements")V=x(k,"number",F);else if(F==="properties")V=x(k,"string",F);else if(F==="tags")V=x(k,"string",F);else if(ot(k))V=E(k,F);else{ht(u,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:F},!0);try{Ko()[lr](k),V=k}catch(ee){ht(u,1,48,ee&&st(ee[Ur])?ee[Ur]():"Error serializing object",null,!0)}}return V}return k[$]=!0,Ct(k.aiDataContract,function(ee,fe){var pe=st(fe)?fe()&1:fe&1,me=st(fe)?fe()&4:fe&4,le=fe&2,Me=k[ee]!==void 0,be=ei(k[ee])&&k[ee]!==null;if(pe&&!Me&&!le)ht(u,1,24,"Missing required field specification. The field is required but not present on source",{field:ee,name:F});else if(!me){var Ue=void 0;be?le?Ue=E(k[ee],ee):Ue=h(k[ee],ee):Ue=k[ee],Ue!==void 0&&(V[ee]=Ue)}}),delete k[$],V}function E(k,F){var $;if(k)if(!ot(k))ht(u,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:F},!0);else{$=[];for(var V=0;V<k[Se];V++){var ee=k[V],fe=h(ee,F+"["+V+"]");$[Sa](fe)}}return $}function x(k,F,$){var V;return k&&(V={},Ct(k,function(ee,fe){if(F==="string")fe===void 0?V[ee]="undefined":fe===null?V[ee]="null":fe[Ur]?V[ee]=fe[Ur]():V[ee]="invalid field: toString() is not defined.";else if(F==="number")if(fe===void 0)V[ee]="undefined";else if(fe===null)V[ee]="null";else{var pe=parseFloat(fe);V[ee]=pe}else V[ee]="invalid field: "+$+" is of unknown type.",ht(u,1,V[ee],null,!0)})),V}})}return s.__ieDyn=1,s}(),oR=8,sR=function(){function s(){}return s.prototype.getHashCodeScore=function(u){var f=this.getHashCode(u)/s.INT_MAX_VALUE;return f*100},s.prototype.getHashCode=function(u){if(u==="")return 0;for(;u[Se]<oR;)u=u[Ut](u);for(var f=5381,h=0;h<u[Se];++h)f=(f<<5)+f+u.charCodeAt(h),f=f&f;return Math.abs(f)},s.INT_MAX_VALUE=2147483647,s}(),uR=function(){function s(){var u=this,f=new sR,h=new Si;u[XS]=function(E){var x=0;return E[ba]&&E[ba][h.userId]?x=f.getHashCodeScore(E[ba][h.userId]):E.ext&&E.ext.user&&E.ext.user.id?x=f[KD](E.ext.user.id):E[ba]&&E[ba][h.operationId]?x=f.getHashCodeScore(E[ba][h.operationId]):E.ext&&E.ext.telemetryTrace&&E.ext.telemetryTrace[Vn]?x=f.getHashCodeScore(E.ext.telemetryTrace[Vn]):x=Math.random()*100,x}}return s}(),lR=function(){function s(u,f){this.INT_MAX_VALUE=2147483647;var h=f||ks(null);(u>100||u<0)&&(h.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:u},!0),u=100),this[My]=u,this.samplingScoreGenerator=new uR}return s.prototype.isSampledIn=function(u){var f=this[My],h=!1;return f==null||f>=100||u.baseType===I[zi]?!0:(h=this.samplingScoreGenerator[XS](u)<f,h)},s}(),Wi,rh,ov=void 0,nE="",cR=65e3;function iE(s){try{return s.responseText}catch{}return null}function fR(s){return s&&s.sendPOST}var aE=os((Wi={endpointUrl:Ll(Ci,Th+tv)},Wi[Wf]=Co(),Wi[JS]=15e3,Wi[Dh]=102400,Wi.disableTelemetry=Co(),Wi[_g]=Co(!0),Wi.isRetryDisabled=Co(),Wi[H_]=Co(!0),Wi[V_]=Co(!0),Wi[t_]=Co(),Wi[G_]=Co(),Wi[Rh]=Co(),Wi[lo]=ov,Wi.namePrefix=ov,Wi.samplingPercentage=Ll(dR,100),Wi[Kf]=ov,Wi[KS]=ov,Wi[ep]=1e4,Wi[ns]=!1,Wi.httpXHROverride={isVal:fR,v:ov},Wi[Ay]=Co(),Wi.transports=ov,Wi.retryCodes=ov,Wi.maxRetryCnt={isVal:Xt,v:10},Wi));function dR(s){return!isNaN(s)&&s>0&&s<=100}var pR=(rh={},rh[an.dataType]=eE,rh[Y.dataType]=nR,rh[A.dataType]=tR,rh[z.dataType]=rR,rh[Qd.dataType]=QD,rh[I.dataType]=eR,rh[M.dataType]=XD,rh),oE=function(s){vf(u,s);function u(){var f=s.call(this)||this;f.priority=1001,f.identifier=rs;var h,E,x,k,F,$,V,ee=0,fe,pe,me,le,Me,be,Ue,Ye,Je,dt,Cr,mn,vn,$n,er,Bt,dn,aa,Ti,nt,qt,Wn,$e,or,Ii,Kn,Bs;return Qi(u,f,function(Te,Ro){cE(),Te.pause=function(){Lh(),x=!0},Te.resume=function(){x&&(x=!1,E=null,Bn(),o_())},Te.flush=function(se,xe,wt){if(se===void 0&&(se=!0),!x){Lh();try{return Te[ar](se,null,wt||1)}catch(bt){ht(Te[$r](),1,22,"flush failed, telemetry will not be collected: "+Pi(bt),{exception:ir(bt)})}}},Te.onunloadFlush=function(){if(!x)if(Ue||nt)try{return Te[ar](!0,wu,2)}catch(se){ht(Te[$r](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Pi(se),{exception:ir(se)})}else Te.flush(!1)},Te.addHeader=function(se,xe){V[se]=xe},Te[Yn]=function(se,xe,wt,bt){Te.isInitialized()&&ht(Te[$r](),1,28,"Sender is already initialized"),Ro[Yn](se,xe,wt,bt);var Dr=Te.identifier;F=new aR(xe.logger),h=0,E=null,Te[Ei]=null,$=0;var Er=Te[$r]();me=Gd(Bu("Sender"),xe.evtNamespace&&xe.evtNamespace()),pe=ts(me),Te._addHook(Gu(se,function(rn){var Ki=rn.cfg;Ki.storagePrefix&&Qe(Ki.storagePrefix);var rp=g(null,Ki,xe),Br=rp.getExtCfg(Dr,aE),fE=Br[ja];if(le&&fE===le){var $w=Ki[ja];$w&&$w!==fE&&(Br[ja]=$w)}cr(Br[lo])&&(Br[lo]=Ki[lo]),Hr(Te,"_senderConfig",{g:function(){return Br}}),Me!==Br[ja]&&(le=Me=Br[ja]),xe.activeStatus()===Za.PENDING?Te.pause():xe.activeStatus()===Za.ACTIVE&&Te.resume(),dt&&dt!==Br[Kf]&&Lt(dt,function(bu){delete V[bu.header]}),be=Br[Dh],Ue=(Br[Rh]===!1||Br[H_]===!1)&&Ds(),Ye=Br[Rh]===!1&&Ds(),Je=Br[H_]===!1&&Ds(),nt=Br[Ay],qt=!!Br[t_],Bs=Br.retryCodes;var Bw=Br[ns],s_=!!Br[_g]&&(!!Bw||Pe()),dE=Br.namePrefix,gR=s_!==Bt||s_&&aa!==dE||s_&&dn!==Bw;if(Te[Vc]){if(gR)try{Te._buffer=Te._buffer[um](Er,Br,s_)}catch(bu){ht(Te[$r](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+Pi(bu),{exception:ir(bu)})}Bn()}else Te[Vc]=s_?new rE(Er,Br):new Uw(Er,Br);aa=dE,Bt=s_,dn=Bw,Wn=!Br[G_]&&xd(!0),Ii=!!Br[V_],Te._sample=new lR(Br.samplingPercentage,Er),mn=Br[lo],!cr(mn)&&!lE(mn,Ki)&&ht(Er,1,100,"Invalid Instrumentation key "+mn),dt=Br[Kf],hn(le)&&!ke(le)&&dt&&dt[Se]>0?Lt(dt,function(bu){f.addHeader(bu.header,bu.value)}):dt=null,Ti=Br[Ow];var pE=qs();Kn?Kn.SetConfig(pE):(Kn=new Us,Kn[Yn](pE,Er));var Yy=Br.httpXHROverride,$y=null,K_=null,_R=Tf([3,1,2],Br.transports);$y=Kn&&Kn[ky](_R,!1);var qw=Kn&&Kn.getFallbackInst();$e=function(bu,Eg){return Ot(qw,bu,Eg)},or=function(bu,Eg){return Ot(qw,bu,Eg,!1)},$y=nt?Yy:$y||Yy||qw,Te[Ei]=function(bu,Eg){return Ot($y,bu,Eg)},Wn&&(fe=a_);var Hw=Tf([3,1],Br[WS]);Wn||(Hw=Hw.filter(function(bu){return bu!==2})),K_=Kn&&Kn[ky](Hw,!0),K_=nt?Yy:K_||Yy,(nt||Br[WS]||!fe)&&K_&&(fe=function(bu,Eg){return Ot(K_,bu,Eg)}),fe||(fe=$e),Cr=Br.disableTelemetry,vn=Br[KS]||ov,$n=Br.isRetryDisabled,er=Br[JS]}))},Te.processTelemetry=function(se,xe){var wt;xe=Te._getTelCtx(xe);var bt=xe[$r]();try{var Dr=cm(se,bt);if(!Dr)return;var Er=Ph(se,bt);if(!Er)return;var rn=F[Py](Er),Ki=Te[Vc];Bn(rn);var rp=(wt={},wt[om]=rn,wt.cnt=0,wt);Ki[pi](rp),o_()}catch(Br){ht(bt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Pi(Br),{exception:ir(Br)})}Te.processNext(se,xe)},Te.isCompletelyIdle=function(){return!x&&ee===0&&Te._buffer[na]()===0},Te.getOfflineListener=function(){return pe},Te._xhrReadyStateChange=function(se,xe,wt){if(!dm(xe))return tp(se,xe,wt)},Te[ar]=function(se,xe,wt){se===void 0&&(se=!0);var bt;if(!x)try{var Dr=Te[Vc];if(Cr)Dr[sm]();else if(Dr[na]()>0){var Er=Dr.getItems();jy(wt||0,se),xe?bt=xe.call(Te,Er,se):bt=Te[Ei](Er,se)}Lh()}catch(Ki){var rn=qi();(!rn||rn>9)&&ht(Te[$r](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+Pi(Ki),{exception:ir(Ki)})}return bt},Te.getOfflineSupport=function(){var se;return se={getUrl:function(){return le},createPayload:Oe},se[Py]=oa,se.batch=yu,se.shouldProcess=function(xe){return!!cm(xe)},se},Te._doTeardown=function(se,xe){Te.onunloadFlush(),Ac(pe,!1),cE()},Te[yg]=function(se,xe,wt){if(!dm(se))return zl(se,xe)},Te[Aw]=function(se,xe){if(!dm(se))return Ah(se,xe)},Te[Ly]=function(se,xe){if(!dm(se))return lm(se)},Te._xdrOnLoad=function(se,xe){if(!dm(xe))return Ea(se,xe)};function Ea(se,xe){var wt=iE(se);if(se&&(wt+""=="200"||wt===""))h=0,Te[Ly](xe,0);else{var bt=tn(wt);bt&&bt[kw]&&bt[kw]>bt[Pw]&&!$n?Te[Aw](xe,bt):Te[yg](xe,Is(se))}}function qs(){var se;try{var xe={xdrOnComplete:function(bt,Dr,Er){var rn=kh(Er);if(rn)return Ea(bt,rn)},fetchOnComplete:function(bt,Dr,Er,rn){var Ki=kh(rn);if(Ki)return sa(bt.status,Ki,bt.url,Ki[Se],bt.statusText,Er||"")},xhrOnComplete:function(bt,Dr,Er){var rn=kh(Er);if(rn)return tp(bt,rn,rn[Se])},beaconOnRetry:function(bt,Dr,Er){return fm(bt,Dr,Er)}},wt=(se={},se[Ow]=Ti,se.isOneDs=!1,se.disableCredentials=!1,se[t_]=qt,se.disableBeacon=!Je,se.disableBeaconSync=!Ye,se.senderOnCompleteCallBack=xe,se);return wt}catch{}return null}function tp(se,xe,wt){se.readyState===4&&sa(se.status,xe,se.responseURL,wt,io(se),iE(se)||se.response)}function zl(se,xe,wt){ht(Te[$r](),2,26,"Failed to send telemetry.",{message:xe}),Te._buffer&&Te._buffer[mi](se)}function Ah(se,xe){for(var wt=[],bt=[],Dr=xe.errors.reverse(),Er=0,rn=Dr;Er<rn.length;Er++){var Ki=rn[Er],rp=se.splice(Ki.index,1)[0];Mh(Ki.statusCode)?bt[Sa](rp):wt[Sa](rp)}se[Se]>0&&Te[Ly](se,xe[Pw]),wt[Se]>0&&Te[yg](wt,io(null,["partial success",xe[Pw],"of",xe.itemsReceived].join(" "))),bt[Se]>0&&(W_(bt),ht(Te[$r](),2,40,"Partial success. Delivered: "+se[Se]+", Failed: "+wt[Se]+". Will retry to send "+bt[Se]+" our of "+xe[kw]+" items"))}function lm(se,xe){Te._buffer&&Te._buffer[mi](se)}function kh(se){try{if(se){var xe=se,wt=xe[Lw];return wt&&wt[Se]?wt:null}}catch{}return null}function cm(se,xe){if(Cr)return!1;if(!se)return xe&&ht(xe,1,7,"Cannot send empty telemetry"),!1;if(se.baseData&&!se[Mw])return xe&&ht(xe,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(se[Mw]||(se[Mw]="EventData"),!Te[Ei])return xe&&ht(xe,1,28,"Sender was not initialized"),!1;if(yt(se))se[fg]=Te._sample[My];else return xe&&ht(xe,2,33,"Telemetry item was sampled out and not sent",{SampleRate:Te._sample[My]}),!1;return!0}function Ph(se,xe){var wt=se.iKey||mn,bt=u.constructEnvelope(se,wt,xe,vn);if(!bt){ht(xe,1,47,"Unable to create an AppInsights envelope");return}var Dr=!1;if(se[ba]&&se[ba][Vv]&&(Lt(se[ba][Vv],function(Er){try{Er&&Er(bt)===!1&&(Dr=!0,zu(xe,"Telemetry processor check returns false"))}catch(rn){ht(xe,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Pi(rn),{exception:ir(rn)},!0)}}),delete se[ba][Vv]),!Dr)return bt}function oa(se){var xe=nE,wt=Te[$r]();try{var bt=cm(se,wt),Dr=null;bt&&(Dr=Ph(se,wt)),Dr&&(xe=F[Py](Dr))}catch{}return xe}function yu(se){var xe=nE;return se&&se[Se]&&(xe="["+se.join(",")+"]"),xe}function Oe(se){var xe,wt=oi();return xe={urlString:le},xe[Ve]=se,xe.headers=wt,xe}function yt(se){return Te._sample.isSampledIn(se)}function tr(se,xe,wt,bt){xe===200&&se?Te._onSuccess(se,se[Se]):bt&&Te[yg](se,bt)}function Ot(se,xe,wt,bt){bt===void 0&&(bt=!0);var Dr=function(Ki,rp,Br){return tr(xe,Ki,rp,Br)},Er=gr(xe),rn=se&&se.sendPOST;return rn&&Er?(bt&&Te._buffer[av](xe),rn(Er,Dr,!wt)):null}function gr(se){var xe;if(ot(se)&&se[Se]>0){var wt=Te[Vc].batchPayloads(se),bt=oi(),Dr=(xe={},xe[Ve]=wt,xe.urlString=le,xe.headers=bt,xe.disableXhrSync=qt,xe.disableFetchKeepAlive=!Wn,xe[Lw]=se,xe);return Dr}return null}function oi(){try{var se=V||{};return ke(le)&&(se[pg[6]]=pg[7]),se}catch{}return null}function Bn(se){var xe=se?se[Se]:0;return Te[Vc].size()+xe>be?((!pe||pe.isOnline())&&Te[ar](!0,null,10),!0):!1}function sa(se,xe,wt,bt,Dr,Er){var rn=null;if(Te._appId||(rn=tn(Er),rn&&rn.appId&&(Te._appId=rn.appId)),(se<200||se>=300)&&se!==0){if((se===301||se===307||se===308)&&!is(wt)){Te[yg](xe,Dr);return}if(pe&&!pe.isOnline()){if(!$n){var Ki=10;W_(xe,Ki),ht(Te[$r](),2,40,". Offline - Response Code: ".concat(se,". Offline status: ").concat(!pe.isOnline(),". Will retry to send ").concat(xe.length," items."))}return}!$n&&Mh(se)?(W_(xe),ht(Te[$r](),2,40,". Response code "+se+". Will retry to send "+xe[Se]+" items.")):Te[yg](xe,Dr)}else is(wt),se===206?(rn||(rn=tn(Er)),rn&&!$n?Te[Aw](xe,rn):Te[yg](xe,Dr)):(h=0,Te[Ly](xe,bt))}function is(se){return $>=10?!1:!Le(se)&&se!==""&&se!==le?(le=se,++$,!0):!1}function wu(se,xe){if(fe)fe(se,!1);else{var wt=Kn&&Kn[ky]([3],!0);return Ot(wt,se,xe)}}function fm(se,xe,wt){var bt=se,Dr=bt&&bt[Lw];if(Ii)or&&or(Dr,!0),ht(Te[$r](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var Er=[],rn=0;rn<Dr[Se];rn++){var Ki=Dr[rn],rp=[Ki],Br=gr(rp);wt(Br,xe)?Te._onSuccess(rp,rp[Se]):Er[Sa](Ki)}Er[Se]>0&&(or&&or(Er,!0),ht(Te[$r](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function dm(se){try{if(se&&se[Se])return hn(se[0])}catch{}return null}function a_(se,xe){var wt=null;if(ot(se)){for(var bt=se[Se],Dr=0;Dr<se[Se];Dr++)bt+=se[Dr].item[Se];var Er=Kn.getSyncFetchPayload();Er+bt<=cR?wt=2:Ds()?wt=3:(wt=1,ht(Te[$r](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var rn=Kn&&Kn[ky]([wt],!0);return Ot(rn,se,xe)}return null}function W_(se,xe){if(xe===void 0&&(xe=1),!(!se||se[Se]===0)){var wt=Te[Vc];wt[mi](se),h++;for(var bt=0,Dr=se;bt<Dr.length;bt++){var Er=Dr[bt];Er.cnt=Er.cnt||0,Er.cnt++,wt[pi](Er)}Yw(xe),o_()}}function Yw(se){var xe=10,wt;if(h<=1)wt=xe;else{var bt=(Math.pow(2,h)-1)/2,Dr=Math.floor(Math.random()*bt*xe)+1;Dr=se*Dr,wt=Math.max(Math.min(Dr,3600),xe)}var Er=Nu()+wt*1e3;E=Er}function o_(){if(!k&&!x){var se=E?Math.max(0,E-Nu()):0,xe=Math.max(er,se);k=Ru(function(){k=null,Te[ar](!0,null,1)},xe)}}function Lh(){k&&k.cancel(),k=null,E=null}function Mh(se){return Le(Bs)?se===401||se===408||se===429||se===500||se===502||se===503||se===504:Bs[Se]&&Bs.indexOf(se)>-1}function Uy(){var se="getNotifyMgr";return Te.core[se]?Te.core[se]():Te.core._notificationManager}function jy(se,xe){var wt=Uy();if(wt&&wt[ZS])try{wt[ZS](se,xe)}catch(bt){ht(Te[$r](),1,74,"send request notification failed: "+Pi(bt),{exception:ir(bt)})}}function lE(se,xe){var wt=xe.disableInstrumentationKeyValidation,bt=Le(wt)?!1:wt;if(bt)return!0;var Dr="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",Er=new RegExp(Dr);return Er.test(se)}function cE(){Te[Ei]=null,Te[Vc]=null,Te._appId=null,Te._sample=null,V={},pe=null,h=0,E=null,x=!1,k=null,F=null,$=0,ee=0,fe=null,me=null,le=null,Me=null,be=0,Ue=!1,dt=null,Cr=!1,mn=null,vn=ov,$n=!1,Bt=null,aa=ov,qt=!1,Wn=!1,Ii=!1,$e=null,or=null,Kn=null,Hr(Te,"_senderConfig",{g:function(){return vt({},aE)}})}}),f}return u.constructEnvelope=function(f,h,E,x){var k;h!==f.iKey&&!Le(h)?k=wo(wo({},f),{iKey:h}):k=f;var F=pR[k.baseType]||eE;return F(E,k,x)},u}(Mt),r_="instrumentationKey",Fy="connectionString",sE="instrumentationkey",n_="endpointUrl",uE="ingestionendpoint",z_="userOverrideEndpointUrl",i_,jw=void 0,mR=(i_={diagnosticLogInterval:Ll(vR,1e4)},i_[Fy]=jw,i_[n_]=jw,i_[r_]=jw,i_.extensionConfig={},i_);function vR(s){return s&&s>0}var hR=function(){function s(u){var f=new Gt,h;(Le(u)||Le(u[r_])&&Le(u[Fy]))&&yr("Invalid input configuration"),Qi(s,this,function(x){Hr(x,"config",{g:function(){return h}}),k(),x.initialize=k,x.track=E,Td(x,f,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function k(){var F=Zo(u||{},mR);h=F.cfg,f.addUnloadHook(Gu(F,function(){var $=h[Fy];if(cr($)){var V=gc(function(me,le){Ss($,function(Me){var be=Me.value,Ue=h[r_];if(!Me.rejected&&be){h[Fy]=be;var Ye=Pr(be);Ue=Ye[sE]||Ue}me(Ue)})}),ee=gc(function(me,le){Ss($,function(Me){var be=Me.value,Ue=h[n_];if(!Me.rejected&&be){var Ye=Pr(be),Je=Ye[uE];Ue=Je?Je+tv:Ue}me(Ue)})});h[r_]=V,h[n_]=h[z_]||ee}if(hn($)){var fe=Pr($),pe=fe[uE];h[n_]=h[z_]?h[z_]:pe+tv,h[r_]=fe[sE]||h[r_]}h[n_]=h[z_]?h[z_]:h[n_]})),f.initialize(h,[new oE])}});function E(x){x&&(x.baseData=x.baseData||{},x.baseType=x.baseType||"EventData"),f.track(x)}}return s.__ieDyn=1,s}();t.AppInsightsCore=Gt,t.ApplicationInsights=hR,t.Sender=oE,t.SeverityLevel=Q,t.arrForEach=Lt,t.isNullOrUndefined=Le,t.proxyFunctions=Td,t.throwError=yr})});var sI=ln(dv=>{"use strict";var kk=dv&&dv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Pk=dv&&dv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Lk=dv&&dv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&kk(e,t,r);return Pk(e,t),e};Object.defineProperty(dv,"__esModule",{value:!0});dv.appInsightsClientFactory=void 0;var Mk=iI(),Fk=kb(),Uk=async(t,e,r,n,i)=>{let a;try{let v=await Promise.resolve().then(()=>Lk(oI())),_={};if(n){let U={alwaysUseXhrOverride:!0,httpXHROverride:n};_[Mk.BreezeChannelIdentifier]=U}let b;t.startsWith("InstrumentationKey=")||(b=t);let C=b?{instrumentationKey:b}:{connectionString:t};a=new v.ApplicationInsights({...C,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:_})}catch(v){return Promise.reject(v)}return{logEvent:(v,_)=>{let b={..._==null?void 0:_.properties,..._==null?void 0:_.measurements};i!=null&&i.length&&Fk.TelemetryUtil.applyReplacements(b,i),a==null||a.track({name:v,data:b,baseType:"EventData",ext:{user:{id:e,authId:e},app:{sesId:r}},baseData:{name:v,properties:_==null?void 0:_.properties,measurements:_==null?void 0:_.measurements}})},flush:async()=>{a==null||a.flush(!1)},dispose:async()=>new Promise(_=>{a==null||a.unload(!0,()=>{_(),a=void 0},1e3)})}};dv.appInsightsClientFactory=Uk});var uI=ln(Y0=>{"use strict";Object.defineProperty(Y0,"__esModule",{value:!0});Y0.BaseTelemetryReporter=void 0;var Pb=class{constructor(e,r,n){this.telemetrySender=e,this.vscodeAPI=r,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,r,n,i){i?this.telemetrySender.sendEventData(e,{properties:r,measurements:n}):this.telemetryLogger.logUsage(e,{properties:r,measurements:n})}sendTelemetryEvent(e,r,n){this.internalSendTelemetryEvent(e,r,n,!1)}sendRawTelemetryEvent(e,r,n){let i={...r};for(let a of Object.keys(i??{})){let l=i[a];typeof a=="string"&&l!==void 0&&(i[a]=new this.vscodeAPI.TelemetryTrustedValue(typeof l=="string"?l:l.value))}this.sendTelemetryEvent(e,i,n)}sendDangerousTelemetryEvent(e,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,r,n,!0)}internalSendTelemetryErrorEvent(e,r,n,i){i?this.telemetrySender.sendEventData(e,{properties:r,measurements:n}):this.telemetryLogger.logError(e,{properties:r,measurements:n})}sendTelemetryErrorEvent(e,r,n){this.internalSendTelemetryErrorEvent(e,r,n,!1)}sendDangerousTelemetryErrorEvent(e,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,r,n,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}};Y0.BaseTelemetryReporter=Pb});var lI=ln($0=>{"use strict";Object.defineProperty($0,"__esModule",{value:!0});$0.BaseTelemetrySender=void 0;var oh;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(oh||(oh={}));var Lb=class{constructor(e,r){this._instantiationStatus=oh.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=r,this._key=e}sendEventData(e,r){if(!this._telemetryClient){this._instantiationStatus!==oh.INSTANTIATED&&this._eventQueue.push({eventName:e,data:r});return}this._telemetryClient.logEvent(e,r)}sendErrorData(e,r){if(!this._telemetryClient){this._instantiationStatus!==oh.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:r});return}let n={stack:e.stack,message:e.message,name:e.name};if(r){let i=r.properties||r;r.properties={...i,...n}}else r={properties:n};this._telemetryClient.logEvent("unhandlederror",r)}async flush(){var e;return(e=this._telemetryClient)==null?void 0:e.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:r})=>this.sendEventData(e,r)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:r})=>this.sendErrorData(e,r)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===oh.NOT_INSTANTIATED&&(this._instantiationStatus=oh.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=oh.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=oh.INSTANTIATED}))}};$0.BaseTelemetrySender=Lb});var dI=ln(sh=>{"use strict";var jk=sh&&sh.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Yk=sh&&sh.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ub=sh&&sh.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jk(e,t,r);return Yk(e,t),e};Object.defineProperty(sh,"__esModule",{value:!0});var $k=Ub(require("https")),Mb=Ub(require("os")),B0=Ub(require("vscode")),Bk=rI(),qk=sI(),Hk=uI(),Gk=lI(),cI=kb();function fI(){return{sendPOST:(e,r)=>{let n={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{let i=$k.request(e.urlString,n,a=>{a.on("data",function(l){r(a.statusCode??200,a.headers,l.toString())}),a.on("error",function(){r(0,{})})});i.write(e.data,a=>{a&&r(0,{})}),i.end()}catch{r(0,{})}}}}var Fb=class extends Hk.BaseTelemetryReporter{constructor(e,r){let n=l=>(0,qk.appInsightsClientFactory)(l,B0.env.machineId,B0.env.sessionId,fI(),r);cI.TelemetryUtil.shouldUseOneDataSystemSDK(e)&&(n=l=>(0,Bk.oneDataSystemClientFactory)(l,B0,fI()));let i={release:Mb.release(),platform:Mb.platform(),architecture:Mb.arch()},a=new Gk.BaseTelemetrySender(e,n);if(e&&e.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(a,B0,{additionalCommonProperties:cI.TelemetryUtil.getAdditionalCommonProperties(i)})}};sh.default=Fb});var pN=ln((A$,b_)=>{"use strict";var bP=typeof Buffer<"u",lN=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,cN=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function fN(t,e,r){r==null&&e!==null&&typeof e=="object"&&(r=e,e=void 0),bP&&Buffer.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));let n=JSON.parse(t,e);if(n===null||typeof n!="object")return n;let i=r&&r.protoAction||"error",a=r&&r.constructorAction||"error";if(i==="ignore"&&a==="ignore")return n;if(i!=="ignore"&&a!=="ignore"){if(lN.test(t)===!1&&cN.test(t)===!1)return n}else if(i!=="ignore"&&a==="ignore"){if(lN.test(t)===!1)return n}else if(cN.test(t)===!1)return n;return dN(n,{protoAction:i,constructorAction:a,safe:r&&r.safe})}function dN(t,{protoAction:e="error",constructorAction:r="error",safe:n}={}){let i=[t];for(;i.length;){let a=i;i=[];for(let l of a){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(l,"__proto__")){if(n===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete l.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(l,"constructor")&&Object.prototype.hasOwnProperty.call(l.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete l.constructor}for(let v in l){let _=l[v];_&&typeof _=="object"&&i.push(_)}}}return t}function Gb(t,e,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return fN(t,e,r)}finally{Error.stackTraceLimit=n}}function SP(t,e){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return fN(t,e,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}b_.exports=Gb;b_.exports.default=Gb;b_.exports.parse=Gb;b_.exports.safeParse=SP;b_.exports.scan=dN});var Pj={};Gw(Pj,{activate:()=>Aj,deactivate:()=>kj});module.exports=vE(Pj);var WD=require("vscode");var TI=require("vscode");var Bb={};Gw(Bb,{action:()=>IR,diffView:()=>Zk,storeApiKey:()=>NR,work:()=>Xk});function IR(t){return e=>{typeof e=="function"&&e()}}var Vw=require("vscode");function NR({ext:t,log:e}){return async(r,n)=>{let i=await Vw.window.showInputBox({prompt:`Enter the ${n}`});i&&(e.info(n,{event:"action.key"}),await t.secrets.store(r,i),Vw.window.showInformationMessage(`${n} stored successfully`))}}var SI=require("vscode");var Ya=require("vscode"),yI=J_(Eb());var Tb=require("crypto");var FT="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var nk=128,Hh,Gh;function UT(t){!Hh||Hh.length<t?(Hh=Buffer.allocUnsafe(t*nk),Tb.webcrypto.getRandomValues(Hh),Gh=0):Gh+t>Hh.length&&(Tb.webcrypto.getRandomValues(Hh),Gh=0),Gh+=t}function ik(t){return UT(t|=0),Hh.subarray(Gh-t,Gh)}function ak(t,e,r){let n=(2<<31-Math.clz32(t.length-1|1))-1,i=Math.ceil(1.6*n*e/t.length);return(a=e)=>{let l="";for(;;){let v=r(i),_=i;for(;_--;)if(l+=t[v[_]&n]||"",l.length>=a)return l}}}function jT(t,e=21){return ak(t,e,ik)}function YT(t=21){UT(t|=0);let e="";for(let r=Gh-t;r<Gh;r++)e+=FT[Hh[r]&63];return e}var Jl=require("vscode"),Ck=J_(WT());var up=require("vscode"),R0="multicoder",KT,JT,x0=(JT=(KT=up.workspace.workspaceFolders)==null?void 0:KT[0])==null?void 0:JT.uri,D0=new Map;function Nk(t){return t.path.split("/").pop()}function Jc(t){if(t.scheme==R0)return t.path=="/"?"./":t.path.slice(1);let e=up.workspace.getWorkspaceFolder(t);if(e){let a="";return String(e.uri)!==String(t)&&(a=up.workspace.asRelativePath(t,!1).replace(/\\/g,"/")),String(e.uri)!==String(x0)&&(a=".folders/"+Nk(e.uri)+(a?"/"+a:"")),a||(a="."),a}if(t.scheme==="untitled")return".untitled/"+t.path;let r=t.path.split("/"),n=r.pop(),i=r.pop();return D0.has(i)||D0.set(i,up.Uri.joinPath(t,"../")),".external/"+i+"/"+n}function Ni(t,e){return(t=="."||t=="./")&&(t=""),t=t.startsWith("/")?t:"/"+t,up.Uri.from({scheme:R0,path:t,authority:e})}function Kl(t){let[e,r,...n]=t.path.split("/");if(r==".multicoder")return t.with({scheme:"file",authority:""});if(r==".untitled")return up.Uri.from({scheme:"untitled",path:n.join("/")});if(r==".external"){let i=n.shift();if(D0.has(i))return up.Uri.joinPath(D0.get(i),n.join("/"));throw new Error("Unknown external directory: "+i)}if(r==".folders"){let i=n.shift();for(let a of up.workspace.workspaceFolders||[])if(a.uri.path.endsWith("/"+i))return up.Uri.joinPath(a.uri,n.join("/"));throw new Error("Unknown workspace folder: "+i)}if(x0)return t.path?up.Uri.joinPath(x0,t.path):x0;throw new Error("Cannot find source Uri")}var{fs:oy}=Jl.workspace,xk=jT("1234567890abcdef",10);function O0(){return xk()}function A0(){let t=[];for(let e of Jl.window.tabGroups.all.flatMap(r=>r.tabs))e.input instanceof Jl.TabInputText&&t.push(e.input.uri);return t}async function Vh(t){return new TextDecoder().decode(await oy.readFile(t))}async function k0(t,e){return await oy.writeFile(t,new TextEncoder().encode(e))}async function Zc(t){try{let e=await oy.stat(t);return e&&!!(e.type&Jl.FileType.File)}catch{return!1}}async function mm(t){try{let e=await oy.stat(t);return e&&!!(e.type&Jl.FileType.Directory)}catch{return!1}}async function P0(t){return(await oy.readDirectory(t)).map(([e,r])=>({name:e,path:Jc(Jl.Uri.joinPath(t,e)),uri:Jl.Uri.joinPath(t,e),isFile:!!(r&Jl.FileType.File),isDirectory:!!(r&Jl.FileType.Directory),isSymbolicLink:!!(r&Jl.FileType.SymbolicLink)}))}var pI=J_(dI()),Vk="InstrumentationKey=4a0957be-8ce1-4335-8aa5-1fb742355aa5;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com/;LiveEndpoint=https://westeurope.livediagnostics.monitor.azure.com/;ApplicationId=b0fce7b4-deeb-43b7-aa17-e5024c6c504c";function zk(t){return{logUsage(e,r){t.sendTelemetryEvent(e,r)},logError(e,r={}){if(e&&typeof e=="object"){let{message:n,stack:i}=e,a=String(e.name||"error").toLowerCase(),l=String(e);t.sendTelemetryErrorEvent(a,{...e,...r,message:n,stack:i,text:l})}else t.sendTelemetryErrorEvent(String(e).toLowerCase().replace(/\W+/g,"-"),r)}}}function mI(t){let e=new pI.default(Vk),r=zk(e);t.telemetry=r,r.logUsage("activated"),t.ext.subscriptions.push(e)}var vI=require("vscode");function hI(t){let e=vI.window.createOutputChannel("Multicoder",{log:!0});function r(i){if(!i||typeof i!="object")return;let{event:a,...l}=i,v=Object.entries(l).map(([_,b])=>`
    ${_}: ${b}`);v.length&&e.trace(v.join(""))}function n(i){let a={};return i!=null&&i.model&&(a.modelId=i.model.modelId,a.modelProvider=i.model.provider),a}t.log={error(i,a={}){e.error(i),t.telemetry.logError(i,{...n(this.session),...a}),r(a)},warn(i,a={}){e.warn((a!=null&&a.event?`[${a.event}] `:"")+i),t.telemetry.logUsage((a==null?void 0:a.event)||"warning",{text:i,...n(this.session),...a}),r(a)},info(i,a={}){e.info((a!=null&&a.event?`[${a.event}] `:"")+i),t.telemetry.logUsage((a==null?void 0:a.event)||"info",{text:i,...n(this.session),...a}),r(a)},session:null},t.ext.subscriptions.push(e)}async function __(t,e){return new Promise(r=>{let n=!1,i=null;function a(){n||(n=!0,i==null||i.dispose(),r())}e&&(i=e.onCancellationRequested(a)),setTimeout(a,t*1e3)})}var gI=J_(Eb()),sy=new gI.Volume,jb=sy,_I={recursive:!0};jb.mkdirSync("/.multicoder/task",_I);jb.mkdirSync("/.multicoder/snapshots",_I);jb.writeFileSync("/.multicoder/snapshots/~empty","");var G0=".wh.",{fs:uy}=Ya.workspace,Yb=new Map,xg=new Map;Yb.set("shared",sy);function zh(t){let e=Yb.get(t.authority);return e||(e=new yI.Volume,Yb.set(t.authority,e)),e}function ly(t){let e=zh(t).statSync(t.path,{throwIfNoEntry:!1});if(!e)return null;let r=0,n=Number(e.birthtimeMs),i=Number(e.mtimeMs),a=Number(e.size);return e.isFile()?r=Ya.FileType.File:e.isDirectory()&&(r=Ya.FileType.Directory),{type:r,ctime:n,mtime:i,size:a}}function H0(t){return ly(t.with({authority:"shared"}))}function Wk(t){let e=ly(V0(t))||H0(V0(t));return e&&(e.permissions=Ya.FilePermission.Readonly),e}function V0(t){return t.with({path:"/.multicoder/snapshots/"+t.query,query:""})}function Kk(t){let e=t.path.split("/");for(;e.length>1;){let r=G0+e.pop(),n=[...e,r].join("/");if(zh(t).statSync(n,{throwIfNoEntry:!1}))return!0}return!1}function q0(t){let e=t.path.split("/"),r=e.pop(),n=e.join("/"),i=n+"/"+G0+r;return[n,i]}async function Jk(t){try{return await uy.stat(Kl(t))}catch{return null}}function Dg(t){return t.authority+t.path}var z0=class{async stat(e){if(e.query)return Wk(e);if(Kk(e))throw Ya.FileSystemError.FileNotFound(e);return ly(e)||H0(e)||await uy.stat(Kl(e))}async readFile(e){return e.query&&(e=V0(e)),ly(e)?zh(e).readFileSync(e.path):H0(e)?sy.readFileSync(e.path):uy.readFile(Kl(e))}async writeFile(e,r,n){let[i,a]=q0(e),l=zh(e);l.mkdirSync(i,{recursive:!0}),l.writeFileSync(e.path,r),l.statSync(a,{throwIfNoEntry:!1})&&l.unlinkSync(a),xg.has(Dg(e))&&this._emitter.fire([{type:Ya.FileChangeType.Changed,uri:e}])}async readDirectory(e){let r=await Jk(e),n=H0(e),i=ly(e),a=zh(e),l=new Map,v=[];if(r)for(let[_,b]of await uy.readDirectory(Kl(e)))l.set(_,b);return n&&sy.readdirSync(e.path,{withFileTypes:!0}).forEach(_=>{l.set(_.name,_.isDirectory()?Ya.FileType.Directory:Ya.FileType.File)}),i&&a.readdirSync(e.path,{withFileTypes:!0}).forEach(_=>{_.name.startsWith(G0)?v.push(_.name.slice(G0.length)):l.set(_.name,_.isDirectory()?Ya.FileType.Directory:Ya.FileType.File)}),v.forEach(_=>l.delete(_)),Array.from(l.entries())}async delete(e,r){let[n,i]=q0(e),a=zh(e);a.statSync(e.path,{throwIfNoEntry:!1})&&a.unlinkSync(e.path),a.mkdirSync(n,{recursive:!0}),a.writeFileSync(i,""),xg.has(Dg(e))&&this._emitter.fire([{type:Ya.FileChangeType.Deleted,uri:e}])}async rename(e,r,n){let[i,a]=q0(e),[l,v]=q0(r),_=zh(e);if(_.mkdirSync(i,{recursive:!0}),_.mkdirSync(l,{recursive:!0}),_.statSync(e.path,{throwIfNoEntry:!1}))_.renameSync(e.path,r.path);else{let b=await uy.readFile(Kl(e));_.writeFileSync(r.path,b)}_.statSync(v,{throwIfNoEntry:!1})&&_.unlinkSync(v),_.writeFileSync(a,""),xg.has(Dg(e)||xg.has(Dg(r)))&&this._emitter.fire([{type:Ya.FileChangeType.Deleted,oldUri:e},{type:Ya.FileChangeType.Created,newUri:r}])}async createDirectory(e){zh(e).mkdirSync(e.path,{recursive:!0})}_emitter=new Ya.EventEmitter;onDidChangeFile=this._emitter.event;watch(e,r){let n={},i=xg.get(Dg(e))||new Set;return i.add(n),xg.set(Dg(e),i),new Ya.Disposable(()=>{i.delete(n),i.size||xg.set(Dg(e),null)})}};async function $b(t,e){let r=e?YT():"~empty",n=t.with({query:r});return e&&await k0(V0(n),e),n}var wI=require("vscode");function bI(t){let e=new z0,r=wI.workspace.registerFileSystemProvider(R0,e,{isCaseSensitive:!0,isReadonly:!1});t.ext.subscriptions.push(r)}function Zk(t){return async(e,r,n)=>{let i=t.recent.get(n),a=e.split("/").pop(),l=i==null?void 0:i.task,v=null;for(;l&&!v;)v=l.edits.find(U=>U.id===r),l=l.parent;if(!v)return;let _=Ni(e,i.id),b=await $b(_,v.before),C=await $b(_,v.after);await SI.commands.executeCommand("vscode.diff",b,C,`${a} (Multicoder)`),t.log.info(a,{event:"action.diff"})}}var ZY=require("vscode");async function EI(){}function Xk(t){return()=>{EI()}}function II(t){Object.entries(Bb).forEach(([e,r])=>{let n=TI.commands.registerCommand(`multicoder.${e}`,r(t));t.ext.subscriptions.push(n)})}var yv=require("vscode");var NI="vercel.ai.error",Qk=Symbol.for(NI),CI,eP=class xI extends Error{constructor({name:e,message:r,cause:n}){super(r),this[CI]=!0,this.name=e,this.cause=n}static isInstance(e){return xI.hasMarker(e,NI)}static hasMarker(e,r){let n=Symbol.for(r);return e!=null&&typeof e=="object"&&n in e&&typeof e[n]=="boolean"&&e[n]===!0}};CI=Qk;var Dt=eP,DI="AI_APICallError",RI=`vercel.ai.error.${DI}`,tP=Symbol.for(RI),OI,Xc=class extends Dt{constructor({message:t,url:e,requestBodyValues:r,statusCode:n,responseHeaders:i,responseBody:a,cause:l,isRetryable:v=n!=null&&(n===408||n===409||n===429||n>=500),data:_}){super({name:DI,message:t,cause:l}),this[OI]=!0,this.url=e,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=i,this.responseBody=a,this.isRetryable=v,this.data=_}static isInstance(t){return Dt.hasMarker(t,RI)}};OI=tP;var AI="AI_EmptyResponseBodyError",kI=`vercel.ai.error.${AI}`,rP=Symbol.for(kI),PI,Hb=class extends Dt{constructor({message:t="Empty response body"}={}){super({name:AI,message:t}),this[PI]=!0}static isInstance(t){return Dt.hasMarker(t,kI)}};PI=rP;function Wh(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var LI="AI_InvalidArgumentError",MI=`vercel.ai.error.${LI}`,nP=Symbol.for(MI),FI,W0=class extends Dt{constructor({message:t,cause:e,argument:r}){super({name:LI,message:t,cause:e}),this[FI]=!0,this.argument=r}static isInstance(t){return Dt.hasMarker(t,MI)}};FI=nP;var UI="AI_InvalidPromptError",jI=`vercel.ai.error.${UI}`,iP=Symbol.for(jI),YI,pv=class extends Dt{constructor({prompt:t,message:e,cause:r}){super({name:UI,message:`Invalid prompt: ${e}`,cause:r}),this[YI]=!0,this.prompt=t}static isInstance(t){return Dt.hasMarker(t,jI)}};YI=iP;var $I="AI_InvalidResponseDataError",BI=`vercel.ai.error.${$I}`,aP=Symbol.for(BI),qI,uh=class extends Dt{constructor({data:t,message:e=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:$I,message:e}),this[qI]=!0,this.data=t}static isInstance(t){return Dt.hasMarker(t,BI)}};qI=aP;var HI="AI_JSONParseError",GI=`vercel.ai.error.${HI}`,oP=Symbol.for(GI),VI,y_=class extends Dt{constructor({text:t,cause:e}){super({name:HI,message:`JSON parsing failed: Text: ${t}.
Error message: ${Wh(e)}`,cause:e}),this[VI]=!0,this.text=t}static isInstance(t){return Dt.hasMarker(t,GI)}};VI=oP;var zI="AI_LoadAPIKeyError",WI=`vercel.ai.error.${zI}`,sP=Symbol.for(WI),KI,w_=class extends Dt{constructor({message:t}){super({name:zI,message:t}),this[KI]=!0}static isInstance(t){return Dt.hasMarker(t,WI)}};KI=sP;var uP="AI_LoadSettingError",lP=`vercel.ai.error.${uP}`,cP=Symbol.for(lP),fP;fP=cP;var dP="AI_NoContentGeneratedError",pP=`vercel.ai.error.${dP}`,mP=Symbol.for(pP),vP;vP=mP;var JI="AI_NoSuchModelError",ZI=`vercel.ai.error.${JI}`,hP=Symbol.for(ZI),XI,cy=class extends Dt{constructor({errorName:t=JI,modelId:e,modelType:r,message:n=`No such ${r}: ${e}`}){super({name:t,message:n}),this[XI]=!0,this.modelId=e,this.modelType=r}static isInstance(t){return Dt.hasMarker(t,ZI)}};XI=hP;var QI="AI_TooManyEmbeddingValuesForCallError",eN=`vercel.ai.error.${QI}`,gP=Symbol.for(eN),tN,K0=class extends Dt{constructor(t){super({name:QI,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[tN]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return Dt.hasMarker(t,eN)}};tN=gP;var rN="AI_TypeValidationError",nN=`vercel.ai.error.${rN}`,_P=Symbol.for(nN),iN,yP=class qb extends Dt{constructor({value:e,cause:r}){super({name:rN,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${Wh(r)}`,cause:r}),this[iN]=!0,this.value=e}static isInstance(e){return Dt.hasMarker(e,nN)}static wrap({value:e,cause:r}){return qb.isInstance(r)&&r.value===e?r:new qb({value:e,cause:r})}};iN=_P;var lh=yP,aN="AI_UnsupportedFunctionalityError",oN=`vercel.ai.error.${aN}`,wP=Symbol.for(oN),sN,on=class extends Dt{constructor({functionality:t,message:e=`'${t}' functionality not supported.`}){super({name:aN,message:e}),this[sN]=!0,this.functionality=t}static isInstance(t){return Dt.hasMarker(t,oN)}};sN=wP;var uN=(t,e=21)=>(r=e)=>{let n="",i=r|0;for(;i--;)n+=t[Math.random()*t.length|0];return n};var ew=J_(pN(),1);var EP=Object.defineProperty,TP=(t,e,r)=>e in t?EP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,J0=(t,e,r)=>TP(t,typeof e!="symbol"?e+"":e,r),Z0=class extends Error{constructor(e,r){super(e),J0(this,"type"),J0(this,"field"),J0(this,"value"),J0(this,"line"),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function Vb(t){}function mN(t){let{onEvent:e=Vb,onError:r=Vb,onRetry:n=Vb,onComment:i}=t,a="",l=!0,v,_="",b="";function C(H){let Z=l?H.replace(/^\xEF\xBB\xBF/,""):H,[ne,he]=IP(`${a}${Z}`);for(let Ie of ne)U(Ie);a=he,l=!1}function U(H){if(H===""){K();return}if(H.startsWith(":")){i&&i(H.slice(H.startsWith(": ")?2:1));return}let Z=H.indexOf(":");if(Z!==-1){let ne=H.slice(0,Z),he=H[Z+1]===" "?2:1,Ie=H.slice(Z+he);W(ne,Ie,H);return}W(H,"",H)}function W(H,Z,ne){switch(H){case"event":b=Z;break;case"data":_=`${_}${Z}
`;break;case"id":v=Z.includes("\0")?void 0:Z;break;case"retry":/^\d+$/.test(Z)?n(parseInt(Z,10)):r(new Z0(`Invalid \`retry\` value: "${Z}"`,{type:"invalid-retry",value:Z,line:ne}));break;default:r(new Z0(`Unknown field "${H.length>20?`${H.slice(0,20)}\u2026`:H}"`,{type:"unknown-field",field:H,value:Z,line:ne}));break}}function K(){_.length>0&&e({id:v,event:b||void 0,data:_.endsWith(`
`)?_.slice(0,-1):_}),v=void 0,_="",b=""}function q(H={}){a&&H.consume&&U(a),v=void 0,_="",b="",a=""}return{feed:C,reset:q}}function IP(t){let e=[],r="",n=t.length;for(let i=0;i<n;i++){let a=t[i];a==="\r"&&t[i+1]===`
`?(e.push(r),r="",i++):a==="\r"||a===`
`?(e.push(r),r=""):r+=a}return[e,r]}var X0=class extends TransformStream{constructor({onError:e,onRetry:r,onComment:n}={}){let i;super({start(a){i=mN({onEvent:l=>{a.enqueue(l)},onError(l){e==="terminate"?a.error(l):typeof e=="function"&&e(l)},onRetry:r,onComment:n})},transform(a){i.feed(a)}})}};function Oo(...t){return t.reduce((e,r)=>({...e,...r??{}}),{})}function vN(t){return new ReadableStream({async pull(e){try{let{value:r,done:n}=await t.next();n?e.close():e.enqueue(r)}catch(r){e.error(r)}},cancel(){}})}async function hN(t){return t==null?Promise.resolve():new Promise(e=>setTimeout(e,t))}function Q0(t){let e={};return t.headers.forEach((r,n)=>{e[n]=r}),e}var vm=({prefix:t,size:e=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let i=uN(r,e);if(t==null)return i;if(r.includes(n))throw new W0({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return a=>`${t}${n}${i(a)}`},Zl=vm();function gN(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}function NP(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>r!=null))}function fy(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}function Kh({apiKey:t,environmentVariableName:e,apiKeyParameterName:r="apiKey",description:n}){if(typeof t=="string")return t;if(t!=null)throw new w_({message:`${n} API key must be a string.`});if(typeof process>"u")throw new w_({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(t=process.env[e],t==null)throw new w_({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new w_({message:`${n} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}var dy=Symbol.for("vercel.ai.validator");function CP(t){return{[dy]:!0,validate:t}}function xP(t){return typeof t=="object"&&t!==null&&dy in t&&t[dy]===!0&&"validate"in t}function DP(t){return xP(t)?t:RP(t)}function RP(t){return CP(e=>{let r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}})}function OP({value:t,schema:e}){let r=hm({value:t,schema:e});if(!r.success)throw lh.wrap({value:t,cause:r.error});return r.value}function hm({value:t,schema:e}){let r=DP(e);try{if(r.validate==null)return{success:!0,value:t};let n=r.validate(t);return n.success?n:{success:!1,error:lh.wrap({value:t,cause:n.error})}}catch(n){return{success:!1,error:lh.wrap({value:t,cause:n})}}}function AP({text:t,schema:e}){try{let r=ew.default.parse(t);return e==null?r:OP({value:r,schema:e})}catch(r){throw y_.isInstance(r)||lh.isInstance(r)?r:new y_({text:t,cause:r})}}function mv({text:t,schema:e}){try{let r=ew.default.parse(t);if(e==null)return{success:!0,value:r,rawValue:r};let n=hm({value:r,schema:e});return n.success?{...n,rawValue:r}:n}catch(r){return{success:!1,error:y_.isInstance(r)?r:new y_({text:t,cause:r})}}}function S_(t){try{return ew.default.parse(t),!0}catch{return!1}}var kP=()=>globalThis.fetch,fo=async({url:t,headers:e,body:r,failedResponseHandler:n,successfulResponseHandler:i,abortSignal:a,fetch:l})=>PP({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:i,abortSignal:a,fetch:l}),PP=async({url:t,headers:e={},body:r,successfulResponseHandler:n,failedResponseHandler:i,abortSignal:a,fetch:l=kP()})=>{try{let v=await l(t,{method:"POST",headers:NP(e),body:r.content,signal:a}),_=Q0(v);if(!v.ok){let b;try{b=await i({response:v,url:t,requestBodyValues:r.values})}catch(C){throw fy(C)||Xc.isInstance(C)?C:new Xc({message:"Failed to process error response",cause:C,statusCode:v.status,url:t,responseHeaders:_,requestBodyValues:r.values})}throw b.value}try{return await n({response:v,url:t,requestBodyValues:r.values})}catch(b){throw b instanceof Error&&(fy(b)||Xc.isInstance(b))?b:new Xc({message:"Failed to process successful response",cause:b,statusCode:v.status,url:t,responseHeaders:_,requestBodyValues:r.values})}}catch(v){if(fy(v))throw v;if(v instanceof TypeError&&v.message==="fetch failed"){let _=v.cause;if(_!=null)throw new Xc({message:`Cannot connect to API: ${_.message}`,cause:_,url:t,requestBodyValues:r.values,isRetryable:!0})}throw v}};async function Rg(t){return typeof t=="function"&&(t=t()),Promise.resolve(t)}var Jh=({errorSchema:t,errorToMessage:e,isRetryable:r})=>async({response:n,url:i,requestBodyValues:a})=>{let l=await n.text(),v=Q0(n);if(l.trim()==="")return{responseHeaders:v,value:new Xc({message:n.statusText,url:i,requestBodyValues:a,statusCode:n.status,responseHeaders:v,responseBody:l,isRetryable:r==null?void 0:r(n)})};try{let _=AP({text:l,schema:t});return{responseHeaders:v,value:new Xc({message:e(_),url:i,requestBodyValues:a,statusCode:n.status,responseHeaders:v,responseBody:l,data:_,isRetryable:r==null?void 0:r(n,_)})}}catch{return{responseHeaders:v,value:new Xc({message:n.statusText,url:i,requestBodyValues:a,statusCode:n.status,responseHeaders:v,responseBody:l,isRetryable:r==null?void 0:r(n)})}}},vv=t=>async({response:e})=>{let r=Q0(e);if(e.body==null)throw new Hb({});return{responseHeaders:r,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new X0).pipeThrough(new TransformStream({transform({data:n},i){n!=="[DONE]"&&i.enqueue(mv({text:n,schema:t}))}}))}};var tl=t=>async({response:e,url:r,requestBodyValues:n})=>{let i=await e.text(),a=mv({text:i,schema:t}),l=Q0(e);if(!a.success)throw new Xc({message:"Invalid JSON response",cause:a.error,statusCode:e.status,responseHeaders:l,responseBody:i,url:r,requestBodyValues:n});return{responseHeaders:l,value:a.value,rawValue:a.rawValue}};var{btoa:LP,atob:MP}=globalThis;function _N(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r=MP(e);return Uint8Array.from(r,n=>n.codePointAt(0))}function gm(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCodePoint(t[r]);return LP(e)}function Zh(t){return t==null?void 0:t.replace(/\/$/,"")}var Nn;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let a={};for(let l of i)a[l]=l;return a},t.getValidEnumValues=i=>{let a=t.objectKeys(i).filter(v=>typeof i[i[v]]!="number"),l={};for(let v of a)l[v]=i[v];return t.objectValues(l)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let a=[];for(let l in i)Object.prototype.hasOwnProperty.call(i,l)&&a.push(l);return a},t.find=(i,a)=>{for(let l of i)if(a(l))return l},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(l=>typeof l=="string"?`'${l}'`:l).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Nn||(Nn={}));var Wb;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Wb||(Wb={}));var St=Nn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),fh=t=>{switch(typeof t){case"undefined":return St.undefined;case"string":return St.string;case"number":return isNaN(t)?St.nan:St.number;case"boolean":return St.boolean;case"function":return St.function;case"bigint":return St.bigint;case"symbol":return St.symbol;case"object":return Array.isArray(t)?St.array:t===null?St.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?St.promise:typeof Map<"u"&&t instanceof Map?St.map:typeof Set<"u"&&t instanceof Set?St.set:typeof Date<"u"&&t instanceof Date?St.date:St.object;default:return St.unknown}},qe=Nn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),FP=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Xl=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(a){return a.message},n={_errors:[]},i=a=>{for(let l of a.issues)if(l.code==="invalid_union")l.unionErrors.map(i);else if(l.code==="invalid_return_type")i(l.returnTypeError);else if(l.code==="invalid_arguments")i(l.argumentsError);else if(l.path.length===0)n._errors.push(r(l));else{let v=n,_=0;for(;_<l.path.length;){let b=l.path[_];_===l.path.length-1?(v[b]=v[b]||{_errors:[]},v[b]._errors.push(r(l))):v[b]=v[b]||{_errors:[]},v=v[b],_++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Nn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Xl.create=t=>new Xl(t);var I_=(t,e)=>{let r;switch(t.code){case qe.invalid_type:t.received===St.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case qe.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Nn.jsonStringifyReplacer)}`;break;case qe.unrecognized_keys:r=`Unrecognized key(s) in object: ${Nn.joinValues(t.keys,", ")}`;break;case qe.invalid_union:r="Invalid input";break;case qe.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Nn.joinValues(t.options)}`;break;case qe.invalid_enum_value:r=`Invalid enum value. Expected ${Nn.joinValues(t.options)}, received '${t.received}'`;break;case qe.invalid_arguments:r="Invalid function arguments";break;case qe.invalid_return_type:r="Invalid function return type";break;case qe.invalid_date:r="Invalid date";break;case qe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Nn.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case qe.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case qe.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case qe.custom:r="Invalid input";break;case qe.invalid_intersection_types:r="Intersection results could not be merged";break;case qe.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case qe.not_finite:r="Number must be finite";break;default:r=e.defaultError,Nn.assertNever(t)}return{message:r}},SN=I_;function UP(t){SN=t}function tw(){return SN}var rw=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,a=[...r,...i.path||[]],l={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let v="",_=n.filter(b=>!!b).slice().reverse();for(let b of _)v=b(l,{data:e,defaultError:v}).message;return{...i,path:a,message:v}},jP=[];function ct(t,e){let r=tw(),n=rw({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===I_?void 0:I_].filter(i=>!!i)});t.common.issues.push(n)}var rl=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return Nr;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let a=await i.key,l=await i.value;n.push({key:a,value:l})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:a,value:l}=i;if(a.status==="aborted"||l.status==="aborted")return Nr;a.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof l.value<"u"||i.alwaysSet)&&(n[a.value]=l.value)}return{status:e.value,value:n}}},Nr=Object.freeze({status:"aborted"}),T_=t=>({status:"dirty",value:t}),Ql=t=>({status:"valid",value:t}),Kb=t=>t.status==="aborted",Jb=t=>t.status==="dirty",Og=t=>t.status==="valid",vy=t=>typeof Promise<"u"&&t instanceof Promise;function nw(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function EN(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}var Ft;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ft||(Ft={}));var py,my,lp=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},yN=(t,e)=>{if(Og(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Xl(t.common.issues);return this._error=r,this._error}}};function Gr(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(l,v)=>{var _,b;let{message:C}=t;return l.code==="invalid_enum_value"?{message:C??v.defaultError}:typeof v.data>"u"?{message:(_=C??n)!==null&&_!==void 0?_:v.defaultError}:l.code!=="invalid_type"?{message:v.defaultError}:{message:(b=C??r)!==null&&b!==void 0?b:v.defaultError}},description:i}}var Vr=class{get description(){return this._def.description}_getType(e){return fh(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:fh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new rl,ctx:{common:e.parent.common,data:e.data,parsedType:fh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(vy(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fh(e)},a=this._parseSync({data:e,path:i.path,parent:i});return yN(i,a)}"~validate"(e){var r,n;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fh(e)};if(!this["~standard"].async)try{let a=this._parseSync({data:e,path:[],parent:i});return Og(a)?{value:a.value}:{issues:i.common.issues}}catch(a){!((n=(r=a==null?void 0:a.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(a=>Og(a)?{value:a.value}:{issues:i.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fh(e)},i=this._parse({data:e,path:n.path,parent:n}),a=await(vy(i)?i:Promise.resolve(i));return yN(n,a)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,a)=>{let l=e(i),v=()=>a.addIssue({code:qe.custom,...n(i)});return typeof Promise<"u"&&l instanceof Promise?l.then(_=>_?!0:(v(),!1)):l?!0:(v(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Zf({schema:this,typeName:ze.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Qc.create(this,this._def)}nullable(){return gv.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ph.create(this)}promise(){return eg.create(this,this._def)}or(e){return Ug.create([this,e],this._def)}and(e){return jg.create(this,e,this._def)}transform(e){return new Zf({...Gr(this._def),schema:this,typeName:ze.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Hg({...Gr(this._def),innerType:this,defaultValue:r,typeName:ze.ZodDefault})}brand(){return new hy({typeName:ze.ZodBranded,type:this,...Gr(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Gg({...Gr(this._def),innerType:this,catchValue:r,typeName:ze.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return gy.create(this,e)}readonly(){return Vg.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},YP=/^c[^\s-]{8,}$/i,$P=/^[0-9a-z]+$/,BP=/^[0-9A-HJKMNP-TV-Z]{26}$/i,qP=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,HP=/^[a-z0-9_-]{21}$/i,GP=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,VP=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,zP=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,WP="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",zb,KP=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,JP=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ZP=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,XP=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,QP=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,e1=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,TN="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",t1=new RegExp(`^${TN}$`);function IN(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function r1(t){return new RegExp(`^${IN(t)}$`)}function NN(t){let e=`${TN}T${IN(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function n1(t,e){return!!((e==="v4"||!e)&&KP.test(t)||(e==="v6"||!e)&&ZP.test(t))}function i1(t,e){if(!GP.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function a1(t,e){return!!((e==="v4"||!e)&&JP.test(t)||(e==="v6"||!e)&&XP.test(t))}var Xh=class t extends Vr{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==St.string){let a=this._getOrReturnCtx(e);return ct(a,{code:qe.invalid_type,expected:St.string,received:a.parsedType}),Nr}let n=new rl,i;for(let a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),ct(i,{code:qe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),ct(i,{code:qe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){let l=e.data.length>a.value,v=e.data.length<a.value;(l||v)&&(i=this._getOrReturnCtx(e,i),l?ct(i,{code:qe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):v&&ct(i,{code:qe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")zP.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"email",code:qe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")zb||(zb=new RegExp(WP,"u")),zb.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"emoji",code:qe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")qP.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"uuid",code:qe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")HP.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"nanoid",code:qe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")YP.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"cuid",code:qe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")$P.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"cuid2",code:qe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")BP.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"ulid",code:qe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ct(i,{validation:"url",code:qe.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"regex",code:qe.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),ct(i,{code:qe.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),ct(i,{code:qe.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),ct(i,{code:qe.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?NN(a).test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{code:qe.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?t1.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{code:qe.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?r1(a).test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{code:qe.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?VP.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"duration",code:qe.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?n1(e.data,a.version)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"ip",code:qe.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?i1(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"jwt",code:qe.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?a1(e.data,a.version)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"cidr",code:qe.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?QP.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"base64",code:qe.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?e1.test(e.data)||(i=this._getOrReturnCtx(e,i),ct(i,{validation:"base64url",code:qe.invalid_string,message:a.message}),n.dirty()):Nn.assertNever(a);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:qe.invalid_string,...Ft.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ft.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ft.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ft.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ft.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ft.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ft.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ft.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ft.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ft.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ft.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ft.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ft.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ft.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...Ft.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ft.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ft.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Ft.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...Ft.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Ft.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Ft.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Ft.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Ft.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Ft.errToObj(r)})}nonempty(e){return this.min(1,Ft.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Xh.create=t=>{var e;return new Xh({checks:[],typeName:ze.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Gr(t)})};function o1(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,a=parseInt(t.toFixed(i).replace(".","")),l=parseInt(e.toFixed(i).replace(".",""));return a%l/Math.pow(10,i)}var Ag=class t extends Vr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==St.number){let a=this._getOrReturnCtx(e);return ct(a,{code:qe.invalid_type,expected:St.number,received:a.parsedType}),Nr}let n,i=new rl;for(let a of this._def.checks)a.kind==="int"?Nn.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ct(n,{code:qe.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),ct(n,{code:qe.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),ct(n,{code:qe.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?o1(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),ct(n,{code:qe.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ct(n,{code:qe.not_finite,message:a.message}),i.dirty()):Nn.assertNever(a);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Ft.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ft.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ft.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ft.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ft.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ft.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ft.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ft.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ft.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ft.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ft.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Ft.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ft.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ft.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Nn.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Ag.create=t=>new Ag({checks:[],typeName:ze.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Gr(t)});var kg=class t extends Vr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==St.bigint)return this._getInvalidInput(e);let n,i=new rl;for(let a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),ct(n,{code:qe.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),ct(n,{code:qe.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ct(n,{code:qe.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Nn.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return ct(r,{code:qe.invalid_type,expected:St.bigint,received:r.parsedType}),Nr}gte(e,r){return this.setLimit("min",e,!0,Ft.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ft.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ft.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ft.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ft.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ft.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ft.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ft.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ft.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ft.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};kg.create=t=>{var e;return new kg({checks:[],typeName:ze.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Gr(t)})};var Pg=class extends Vr{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==St.boolean){let n=this._getOrReturnCtx(e);return ct(n,{code:qe.invalid_type,expected:St.boolean,received:n.parsedType}),Nr}return Ql(e.data)}};Pg.create=t=>new Pg({typeName:ze.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Gr(t)});var Lg=class t extends Vr{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==St.date){let a=this._getOrReturnCtx(e);return ct(a,{code:qe.invalid_type,expected:St.date,received:a.parsedType}),Nr}if(isNaN(e.data.getTime())){let a=this._getOrReturnCtx(e);return ct(a,{code:qe.invalid_date}),Nr}let n=new rl,i;for(let a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),ct(i,{code:qe.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),ct(i,{code:qe.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):Nn.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Ft.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Ft.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Lg.create=t=>new Lg({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ze.ZodDate,...Gr(t)});var N_=class extends Vr{_parse(e){if(this._getType(e)!==St.symbol){let n=this._getOrReturnCtx(e);return ct(n,{code:qe.invalid_type,expected:St.symbol,received:n.parsedType}),Nr}return Ql(e.data)}};N_.create=t=>new N_({typeName:ze.ZodSymbol,...Gr(t)});var Mg=class extends Vr{_parse(e){if(this._getType(e)!==St.undefined){let n=this._getOrReturnCtx(e);return ct(n,{code:qe.invalid_type,expected:St.undefined,received:n.parsedType}),Nr}return Ql(e.data)}};Mg.create=t=>new Mg({typeName:ze.ZodUndefined,...Gr(t)});var Fg=class extends Vr{_parse(e){if(this._getType(e)!==St.null){let n=this._getOrReturnCtx(e);return ct(n,{code:qe.invalid_type,expected:St.null,received:n.parsedType}),Nr}return Ql(e.data)}};Fg.create=t=>new Fg({typeName:ze.ZodNull,...Gr(t)});var Qh=class extends Vr{constructor(){super(...arguments),this._any=!0}_parse(e){return Ql(e.data)}};Qh.create=t=>new Qh({typeName:ze.ZodAny,...Gr(t)});var dh=class extends Vr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ql(e.data)}};dh.create=t=>new dh({typeName:ze.ZodUnknown,...Gr(t)});var _m=class extends Vr{_parse(e){let r=this._getOrReturnCtx(e);return ct(r,{code:qe.invalid_type,expected:St.never,received:r.parsedType}),Nr}};_m.create=t=>new _m({typeName:ze.ZodNever,...Gr(t)});var C_=class extends Vr{_parse(e){if(this._getType(e)!==St.undefined){let n=this._getOrReturnCtx(e);return ct(n,{code:qe.invalid_type,expected:St.void,received:n.parsedType}),Nr}return Ql(e.data)}};C_.create=t=>new C_({typeName:ze.ZodVoid,...Gr(t)});var ph=class t extends Vr{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==St.array)return ct(r,{code:qe.invalid_type,expected:St.array,received:r.parsedType}),Nr;if(i.exactLength!==null){let l=r.data.length>i.exactLength.value,v=r.data.length<i.exactLength.value;(l||v)&&(ct(r,{code:l?qe.too_big:qe.too_small,minimum:v?i.exactLength.value:void 0,maximum:l?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(ct(r,{code:qe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(ct(r,{code:qe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((l,v)=>i.type._parseAsync(new lp(r,l,r.path,v)))).then(l=>rl.mergeArray(n,l));let a=[...r.data].map((l,v)=>i.type._parseSync(new lp(r,l,r.path,v)));return rl.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:Ft.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:Ft.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:Ft.toString(r)}})}nonempty(e){return this.min(1,e)}};ph.create=(t,e)=>new ph({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ze.ZodArray,...Gr(e)});function E_(t){if(t instanceof ef){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Qc.create(E_(n))}return new ef({...t._def,shape:()=>e})}else return t instanceof ph?new ph({...t._def,type:E_(t.element)}):t instanceof Qc?Qc.create(E_(t.unwrap())):t instanceof gv?gv.create(E_(t.unwrap())):t instanceof hv?hv.create(t.items.map(e=>E_(e))):t}var ef=class t extends Vr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Nn.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==St.object){let b=this._getOrReturnCtx(e);return ct(b,{code:qe.invalid_type,expected:St.object,received:b.parsedType}),Nr}let{status:n,ctx:i}=this._processInputParams(e),{shape:a,keys:l}=this._getCached(),v=[];if(!(this._def.catchall instanceof _m&&this._def.unknownKeys==="strip"))for(let b in i.data)l.includes(b)||v.push(b);let _=[];for(let b of l){let C=a[b],U=i.data[b];_.push({key:{status:"valid",value:b},value:C._parse(new lp(i,U,i.path,b)),alwaysSet:b in i.data})}if(this._def.catchall instanceof _m){let b=this._def.unknownKeys;if(b==="passthrough")for(let C of v)_.push({key:{status:"valid",value:C},value:{status:"valid",value:i.data[C]}});else if(b==="strict")v.length>0&&(ct(i,{code:qe.unrecognized_keys,keys:v}),n.dirty());else if(b!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let b=this._def.catchall;for(let C of v){let U=i.data[C];_.push({key:{status:"valid",value:C},value:b._parse(new lp(i,U,i.path,C)),alwaysSet:C in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let b=[];for(let C of _){let U=await C.key,W=await C.value;b.push({key:U,value:W,alwaysSet:C.alwaysSet})}return b}).then(b=>rl.mergeObjectSync(n,b)):rl.mergeObjectSync(n,_)}get shape(){return this._def.shape()}strict(e){return Ft.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,a,l,v;let _=(l=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,r,n).message)!==null&&l!==void 0?l:n.defaultError;return r.code==="unrecognized_keys"?{message:(v=Ft.errToObj(e).message)!==null&&v!==void 0?v:_}:{message:_}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ze.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Nn.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return Nn.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return E_(this)}partial(e){let r={};return Nn.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return Nn.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof Qc;)a=a._def.innerType;r[n]=a}}),new t({...this._def,shape:()=>r})}keyof(){return CN(Nn.objectKeys(this.shape))}};ef.create=(t,e)=>new ef({shape:()=>t,unknownKeys:"strip",catchall:_m.create(),typeName:ze.ZodObject,...Gr(e)});ef.strictCreate=(t,e)=>new ef({shape:()=>t,unknownKeys:"strict",catchall:_m.create(),typeName:ze.ZodObject,...Gr(e)});ef.lazycreate=(t,e)=>new ef({shape:t,unknownKeys:"strip",catchall:_m.create(),typeName:ze.ZodObject,...Gr(e)});var Ug=class extends Vr{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(a){for(let v of a)if(v.result.status==="valid")return v.result;for(let v of a)if(v.result.status==="dirty")return r.common.issues.push(...v.ctx.common.issues),v.result;let l=a.map(v=>new Xl(v.ctx.common.issues));return ct(r,{code:qe.invalid_union,unionErrors:l}),Nr}if(r.common.async)return Promise.all(n.map(async a=>{let l={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:l}),ctx:l}})).then(i);{let a,l=[];for(let _ of n){let b={...r,common:{...r.common,issues:[]},parent:null},C=_._parseSync({data:r.data,path:r.path,parent:b});if(C.status==="valid")return C;C.status==="dirty"&&!a&&(a={result:C,ctx:b}),b.common.issues.length&&l.push(b.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;let v=l.map(_=>new Xl(_));return ct(r,{code:qe.invalid_union,unionErrors:v}),Nr}}get options(){return this._def.options}};Ug.create=(t,e)=>new Ug({options:t,typeName:ze.ZodUnion,...Gr(e)});var ch=t=>t instanceof Yg?ch(t.schema):t instanceof Zf?ch(t.innerType()):t instanceof $g?[t.value]:t instanceof Bg?t.options:t instanceof qg?Nn.objectValues(t.enum):t instanceof Hg?ch(t._def.innerType):t instanceof Mg?[void 0]:t instanceof Fg?[null]:t instanceof Qc?[void 0,...ch(t.unwrap())]:t instanceof gv?[null,...ch(t.unwrap())]:t instanceof hy||t instanceof Vg?ch(t.unwrap()):t instanceof Gg?ch(t._def.innerType):[],iw=class t extends Vr{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==St.object)return ct(r,{code:qe.invalid_type,expected:St.object,received:r.parsedType}),Nr;let n=this.discriminator,i=r.data[n],a=this.optionsMap.get(i);return a?r.common.async?a._parseAsync({data:r.data,path:r.path,parent:r}):a._parseSync({data:r.data,path:r.path,parent:r}):(ct(r,{code:qe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Nr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let a of r){let l=ch(a.shape[e]);if(!l.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let v of l){if(i.has(v))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(v)}`);i.set(v,a)}}return new t({typeName:ze.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Gr(n)})}};function Zb(t,e){let r=fh(t),n=fh(e);if(t===e)return{valid:!0,data:t};if(r===St.object&&n===St.object){let i=Nn.objectKeys(e),a=Nn.objectKeys(t).filter(v=>i.indexOf(v)!==-1),l={...t,...e};for(let v of a){let _=Zb(t[v],e[v]);if(!_.valid)return{valid:!1};l[v]=_.data}return{valid:!0,data:l}}else if(r===St.array&&n===St.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let a=0;a<t.length;a++){let l=t[a],v=e[a],_=Zb(l,v);if(!_.valid)return{valid:!1};i.push(_.data)}return{valid:!0,data:i}}else return r===St.date&&n===St.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var jg=class extends Vr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(a,l)=>{if(Kb(a)||Kb(l))return Nr;let v=Zb(a.value,l.value);return v.valid?((Jb(a)||Jb(l))&&r.dirty(),{status:r.value,value:v.data}):(ct(n,{code:qe.invalid_intersection_types}),Nr)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,l])=>i(a,l)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};jg.create=(t,e,r)=>new jg({left:t,right:e,typeName:ze.ZodIntersection,...Gr(r)});var hv=class t extends Vr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==St.array)return ct(n,{code:qe.invalid_type,expected:St.array,received:n.parsedType}),Nr;if(n.data.length<this._def.items.length)return ct(n,{code:qe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Nr;!this._def.rest&&n.data.length>this._def.items.length&&(ct(n,{code:qe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let a=[...n.data].map((l,v)=>{let _=this._def.items[v]||this._def.rest;return _?_._parse(new lp(n,l,n.path,v)):null}).filter(l=>!!l);return n.common.async?Promise.all(a).then(l=>rl.mergeArray(r,l)):rl.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};hv.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new hv({items:t,typeName:ze.ZodTuple,rest:null,...Gr(e)})};var aw=class t extends Vr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==St.object)return ct(n,{code:qe.invalid_type,expected:St.object,received:n.parsedType}),Nr;let i=[],a=this._def.keyType,l=this._def.valueType;for(let v in n.data)i.push({key:a._parse(new lp(n,v,n.path,v)),value:l._parse(new lp(n,n.data[v],n.path,v)),alwaysSet:v in n.data});return n.common.async?rl.mergeObjectAsync(r,i):rl.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Vr?new t({keyType:e,valueType:r,typeName:ze.ZodRecord,...Gr(n)}):new t({keyType:Xh.create(),valueType:e,typeName:ze.ZodRecord,...Gr(r)})}},x_=class extends Vr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==St.map)return ct(n,{code:qe.invalid_type,expected:St.map,received:n.parsedType}),Nr;let i=this._def.keyType,a=this._def.valueType,l=[...n.data.entries()].map(([v,_],b)=>({key:i._parse(new lp(n,v,n.path,[b,"key"])),value:a._parse(new lp(n,_,n.path,[b,"value"]))}));if(n.common.async){let v=new Map;return Promise.resolve().then(async()=>{for(let _ of l){let b=await _.key,C=await _.value;if(b.status==="aborted"||C.status==="aborted")return Nr;(b.status==="dirty"||C.status==="dirty")&&r.dirty(),v.set(b.value,C.value)}return{status:r.value,value:v}})}else{let v=new Map;for(let _ of l){let b=_.key,C=_.value;if(b.status==="aborted"||C.status==="aborted")return Nr;(b.status==="dirty"||C.status==="dirty")&&r.dirty(),v.set(b.value,C.value)}return{status:r.value,value:v}}}};x_.create=(t,e,r)=>new x_({valueType:e,keyType:t,typeName:ze.ZodMap,...Gr(r)});var D_=class t extends Vr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==St.set)return ct(n,{code:qe.invalid_type,expected:St.set,received:n.parsedType}),Nr;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(ct(n,{code:qe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(ct(n,{code:qe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let a=this._def.valueType;function l(_){let b=new Set;for(let C of _){if(C.status==="aborted")return Nr;C.status==="dirty"&&r.dirty(),b.add(C.value)}return{status:r.value,value:b}}let v=[...n.data.values()].map((_,b)=>a._parse(new lp(n,_,n.path,b)));return n.common.async?Promise.all(v).then(_=>l(_)):l(v)}min(e,r){return new t({...this._def,minSize:{value:e,message:Ft.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:Ft.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};D_.create=(t,e)=>new D_({valueType:t,minSize:null,maxSize:null,typeName:ze.ZodSet,...Gr(e)});var ow=class t extends Vr{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==St.function)return ct(r,{code:qe.invalid_type,expected:St.function,received:r.parsedType}),Nr;function n(v,_){return rw({data:v,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,tw(),I_].filter(b=>!!b),issueData:{code:qe.invalid_arguments,argumentsError:_}})}function i(v,_){return rw({data:v,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,tw(),I_].filter(b=>!!b),issueData:{code:qe.invalid_return_type,returnTypeError:_}})}let a={errorMap:r.common.contextualErrorMap},l=r.data;if(this._def.returns instanceof eg){let v=this;return Ql(async function(..._){let b=new Xl([]),C=await v._def.args.parseAsync(_,a).catch(K=>{throw b.addIssue(n(_,K)),b}),U=await Reflect.apply(l,this,C);return await v._def.returns._def.type.parseAsync(U,a).catch(K=>{throw b.addIssue(i(U,K)),b})})}else{let v=this;return Ql(function(..._){let b=v._def.args.safeParse(_,a);if(!b.success)throw new Xl([n(_,b.error)]);let C=Reflect.apply(l,this,b.data),U=v._def.returns.safeParse(C,a);if(!U.success)throw new Xl([i(C,U.error)]);return U.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:hv.create(e).rest(dh.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||hv.create([]).rest(dh.create()),returns:r||dh.create(),typeName:ze.ZodFunction,...Gr(n)})}},Yg=class extends Vr{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Yg.create=(t,e)=>new Yg({getter:t,typeName:ze.ZodLazy,...Gr(e)});var $g=class extends Vr{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return ct(r,{received:r.data,code:qe.invalid_literal,expected:this._def.value}),Nr}return{status:"valid",value:e.data}}get value(){return this._def.value}};$g.create=(t,e)=>new $g({value:t,typeName:ze.ZodLiteral,...Gr(e)});function CN(t,e){return new Bg({values:t,typeName:ze.ZodEnum,...Gr(e)})}var Bg=class t extends Vr{constructor(){super(...arguments),py.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return ct(r,{expected:Nn.joinValues(n),received:r.parsedType,code:qe.invalid_type}),Nr}if(nw(this,py,"f")||EN(this,py,new Set(this._def.values),"f"),!nw(this,py,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return ct(r,{received:r.data,code:qe.invalid_enum_value,options:n}),Nr}return Ql(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};py=new WeakMap;Bg.create=CN;var qg=class extends Vr{constructor(){super(...arguments),my.set(this,void 0)}_parse(e){let r=Nn.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==St.string&&n.parsedType!==St.number){let i=Nn.objectValues(r);return ct(n,{expected:Nn.joinValues(i),received:n.parsedType,code:qe.invalid_type}),Nr}if(nw(this,my,"f")||EN(this,my,new Set(Nn.getValidEnumValues(this._def.values)),"f"),!nw(this,my,"f").has(e.data)){let i=Nn.objectValues(r);return ct(n,{received:n.data,code:qe.invalid_enum_value,options:i}),Nr}return Ql(e.data)}get enum(){return this._def.values}};my=new WeakMap;qg.create=(t,e)=>new qg({values:t,typeName:ze.ZodNativeEnum,...Gr(e)});var eg=class extends Vr{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==St.promise&&r.common.async===!1)return ct(r,{code:qe.invalid_type,expected:St.promise,received:r.parsedType}),Nr;let n=r.parsedType===St.promise?r.data:Promise.resolve(r.data);return Ql(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};eg.create=(t,e)=>new eg({type:t,typeName:ze.ZodPromise,...Gr(e)});var Zf=class extends Vr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ze.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:l=>{ct(n,l),l.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){let l=i.transform(n.data,a);if(n.common.async)return Promise.resolve(l).then(async v=>{if(r.value==="aborted")return Nr;let _=await this._def.schema._parseAsync({data:v,path:n.path,parent:n});return _.status==="aborted"?Nr:_.status==="dirty"||r.value==="dirty"?T_(_.value):_});{if(r.value==="aborted")return Nr;let v=this._def.schema._parseSync({data:l,path:n.path,parent:n});return v.status==="aborted"?Nr:v.status==="dirty"||r.value==="dirty"?T_(v.value):v}}if(i.type==="refinement"){let l=v=>{let _=i.refinement(v,a);if(n.common.async)return Promise.resolve(_);if(_ instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return v};if(n.common.async===!1){let v=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return v.status==="aborted"?Nr:(v.status==="dirty"&&r.dirty(),l(v.value),{status:r.value,value:v.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(v=>v.status==="aborted"?Nr:(v.status==="dirty"&&r.dirty(),l(v.value).then(()=>({status:r.value,value:v.value}))))}if(i.type==="transform")if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Og(l))return l;let v=i.transform(l.value,a);if(v instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:v}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>Og(l)?Promise.resolve(i.transform(l.value,a)).then(v=>({status:r.value,value:v})):l);Nn.assertNever(i)}};Zf.create=(t,e,r)=>new Zf({schema:t,typeName:ze.ZodEffects,effect:e,...Gr(r)});Zf.createWithPreprocess=(t,e,r)=>new Zf({schema:e,effect:{type:"preprocess",transform:t},typeName:ze.ZodEffects,...Gr(r)});var Qc=class extends Vr{_parse(e){return this._getType(e)===St.undefined?Ql(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Qc.create=(t,e)=>new Qc({innerType:t,typeName:ze.ZodOptional,...Gr(e)});var gv=class extends Vr{_parse(e){return this._getType(e)===St.null?Ql(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};gv.create=(t,e)=>new gv({innerType:t,typeName:ze.ZodNullable,...Gr(e)});var Hg=class extends Vr{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===St.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Hg.create=(t,e)=>new Hg({innerType:t,typeName:ze.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Gr(e)});var Gg=class extends Vr{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return vy(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Xl(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Xl(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Gg.create=(t,e)=>new Gg({innerType:t,typeName:ze.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Gr(e)});var R_=class extends Vr{_parse(e){if(this._getType(e)!==St.nan){let n=this._getOrReturnCtx(e);return ct(n,{code:qe.invalid_type,expected:St.nan,received:n.parsedType}),Nr}return{status:"valid",value:e.data}}};R_.create=t=>new R_({typeName:ze.ZodNaN,...Gr(t)});var s1=Symbol("zod_brand"),hy=class extends Vr{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},gy=class t extends Vr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Nr:a.status==="dirty"?(r.dirty(),T_(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Nr:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:ze.ZodPipeline})}},Vg=class extends Vr{_parse(e){let r=this._def.innerType._parse(e),n=i=>(Og(i)&&(i.value=Object.freeze(i.value)),i);return vy(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};Vg.create=(t,e)=>new Vg({innerType:t,typeName:ze.ZodReadonly,...Gr(e)});function wN(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function xN(t,e={},r){return t?Qh.create().superRefine((n,i)=>{var a,l;let v=t(n);if(v instanceof Promise)return v.then(_=>{var b,C;if(!_){let U=wN(e,n),W=(C=(b=U.fatal)!==null&&b!==void 0?b:r)!==null&&C!==void 0?C:!0;i.addIssue({code:"custom",...U,fatal:W})}});if(!v){let _=wN(e,n),b=(l=(a=_.fatal)!==null&&a!==void 0?a:r)!==null&&l!==void 0?l:!0;i.addIssue({code:"custom",..._,fatal:b})}}):Qh.create()}var u1={object:ef.lazycreate},ze;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ze||(ze={}));var l1=(t,e={message:`Input not instance of ${t.name}`})=>xN(r=>r instanceof t,e),DN=Xh.create,RN=Ag.create,c1=R_.create,f1=kg.create,ON=Pg.create,d1=Lg.create,p1=N_.create,m1=Mg.create,v1=Fg.create,h1=Qh.create,g1=dh.create,_1=_m.create,y1=C_.create,w1=ph.create,b1=ef.create,S1=ef.strictCreate,E1=Ug.create,T1=iw.create,I1=jg.create,N1=hv.create,C1=aw.create,x1=x_.create,D1=D_.create,R1=ow.create,O1=Yg.create,A1=$g.create,k1=Bg.create,P1=qg.create,L1=eg.create,bN=Zf.create,M1=Qc.create,F1=gv.create,U1=Zf.createWithPreprocess,j1=gy.create,Y1=()=>DN().optional(),$1=()=>RN().optional(),B1=()=>ON().optional(),q1={string:t=>Xh.create({...t,coerce:!0}),number:t=>Ag.create({...t,coerce:!0}),boolean:t=>Pg.create({...t,coerce:!0}),bigint:t=>kg.create({...t,coerce:!0}),date:t=>Lg.create({...t,coerce:!0})},H1=Nr,T=Object.freeze({__proto__:null,defaultErrorMap:I_,setErrorMap:UP,getErrorMap:tw,makeIssue:rw,EMPTY_PATH:jP,addIssueToContext:ct,ParseStatus:rl,INVALID:Nr,DIRTY:T_,OK:Ql,isAborted:Kb,isDirty:Jb,isValid:Og,isAsync:vy,get util(){return Nn},get objectUtil(){return Wb},ZodParsedType:St,getParsedType:fh,ZodType:Vr,datetimeRegex:NN,ZodString:Xh,ZodNumber:Ag,ZodBigInt:kg,ZodBoolean:Pg,ZodDate:Lg,ZodSymbol:N_,ZodUndefined:Mg,ZodNull:Fg,ZodAny:Qh,ZodUnknown:dh,ZodNever:_m,ZodVoid:C_,ZodArray:ph,ZodObject:ef,ZodUnion:Ug,ZodDiscriminatedUnion:iw,ZodIntersection:jg,ZodTuple:hv,ZodRecord:aw,ZodMap:x_,ZodSet:D_,ZodFunction:ow,ZodLazy:Yg,ZodLiteral:$g,ZodEnum:Bg,ZodNativeEnum:qg,ZodPromise:eg,ZodEffects:Zf,ZodTransformer:Zf,ZodOptional:Qc,ZodNullable:gv,ZodDefault:Hg,ZodCatch:Gg,ZodNaN:R_,BRAND:s1,ZodBranded:hy,ZodPipeline:gy,ZodReadonly:Vg,custom:xN,Schema:Vr,ZodSchema:Vr,late:u1,get ZodFirstPartyTypeKind(){return ze},coerce:q1,any:h1,array:w1,bigint:f1,boolean:ON,date:d1,discriminatedUnion:T1,effect:bN,enum:k1,function:R1,instanceof:l1,intersection:I1,lazy:O1,literal:A1,map:x1,nan:c1,nativeEnum:P1,never:_1,null:v1,nullable:F1,number:RN,object:b1,oboolean:B1,onumber:$1,optional:M1,ostring:Y1,pipeline:j1,preprocess:U1,promise:L1,record:C1,set:D1,strictObject:S1,string:DN,symbol:p1,transformer:bN,tuple:N1,undefined:m1,union:E1,unknown:g1,void:y1,NEVER:H1,ZodIssueCode:qe,quotelessJson:FP,ZodError:Xl});var G1=T.object({type:T.literal("error"),error:T.object({type:T.string(),message:T.string()})}),AN=Jh({errorSchema:G1,errorToMessage:t=>t.error.message});function V1(t){var e;let r=(e=t.tools)!=null&&e.length?t.tools:void 0,n=[],i=new Set;if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:n,betas:i};let a=[];for(let _ of r)switch(_.type){case"function":a.push({name:_.name,description:_.description,input_schema:_.parameters});break;case"provider-defined":switch(_.id){case"anthropic.computer_20250124":i.add("computer-use-2025-01-24"),a.push({name:_.name,type:"computer_20250124",display_width_px:_.args.displayWidthPx,display_height_px:_.args.displayHeightPx,display_number:_.args.displayNumber});break;case"anthropic.computer_20241022":i.add("computer-use-2024-10-22"),a.push({name:_.name,type:"computer_20241022",display_width_px:_.args.displayWidthPx,display_height_px:_.args.displayHeightPx,display_number:_.args.displayNumber});break;case"anthropic.text_editor_20241022":i.add("computer-use-2024-10-22"),a.push({name:_.name,type:"text_editor_20241022"});break;case"anthropic.bash_20241022":i.add("computer-use-2024-10-22"),a.push({name:_.name,type:"bash_20241022"});break;default:n.push({type:"unsupported-tool",tool:_});break}break;default:n.push({type:"unsupported-tool",tool:_});break}let l=t.toolChoice;if(l==null)return{tools:a,tool_choice:void 0,toolWarnings:n,betas:i};let v=l.type;switch(v){case"auto":return{tools:a,tool_choice:{type:"auto"},toolWarnings:n,betas:i};case"required":return{tools:a,tool_choice:{type:"any"},toolWarnings:n,betas:i};case"none":return{tools:void 0,tool_choice:void 0,toolWarnings:n,betas:i};case"tool":return{tools:a,tool_choice:{type:"tool",name:l.toolName},toolWarnings:n,betas:i};default:{let _=v;throw new on({functionality:`Unsupported tool choice type: ${_}`})}}}function z1({prompt:t}){var e,r,n,i;let a=new Set,l=W1(t),v,_=[];function b(C){var U;let W=C==null?void 0:C.anthropic;return(U=W==null?void 0:W.cacheControl)!=null?U:W==null?void 0:W.cache_control}for(let C=0;C<l.length;C++){let U=l[C],W=C===l.length-1,K=U.type;switch(K){case"system":{if(v!=null)throw new on({functionality:"Multiple system messages that are separated by user/assistant messages"});v=U.messages.map(({content:q,providerMetadata:H})=>({type:"text",text:q,cache_control:b(H)}));break}case"user":{let q=[];for(let H of U.messages){let{role:Z,content:ne}=H;switch(Z){case"user":{for(let he=0;he<ne.length;he++){let Ie=ne[he],_e=he===ne.length-1,Ae=(e=b(Ie.providerMetadata))!=null?e:_e?b(H.providerMetadata):void 0;switch(Ie.type){case"text":{q.push({type:"text",text:Ie.text,cache_control:Ae});break}case"image":{if(Ie.image instanceof URL)throw new on({functionality:"Image URLs in user messages"});q.push({type:"image",source:{type:"base64",media_type:(r=Ie.mimeType)!=null?r:"image/jpeg",data:gm(Ie.image)},cache_control:Ae});break}case"file":{if(Ie.data instanceof URL)throw new on({functionality:"Image URLs in user messages"});if(Ie.mimeType!=="application/pdf")throw new on({functionality:"Non-PDF files in user messages"});a.add("pdfs-2024-09-25"),q.push({type:"document",source:{type:"base64",media_type:"application/pdf",data:Ie.data},cache_control:Ae});break}}}break}case"tool":{for(let he=0;he<ne.length;he++){let Ie=ne[he],_e=he===ne.length-1,Ae=(n=b(Ie.providerMetadata))!=null?n:_e?b(H.providerMetadata):void 0,He=Ie.content!=null?Ie.content.map(tt=>{var lt;switch(tt.type){case"text":return{type:"text",text:tt.text,cache_control:void 0};case"image":return{type:"image",source:{type:"base64",media_type:(lt=tt.mimeType)!=null?lt:"image/jpeg",data:tt.data},cache_control:void 0}}}):JSON.stringify(Ie.result);q.push({type:"tool_result",tool_use_id:Ie.toolCallId,content:He,is_error:Ie.isError,cache_control:Ae})}break}default:{let he=Z;throw new Error(`Unsupported role: ${he}`)}}}_.push({role:"user",content:q});break}case"assistant":{let q=[];for(let H=0;H<U.messages.length;H++){let Z=U.messages[H],ne=H===U.messages.length-1,{content:he}=Z;for(let Ie=0;Ie<he.length;Ie++){let _e=he[Ie],Ae=Ie===he.length-1,He=(i=b(_e.providerMetadata))!=null?i:Ae?b(Z.providerMetadata):void 0;switch(_e.type){case"text":{q.push({type:"text",text:W&&ne&&Ae?_e.text.trim():_e.text,cache_control:He});break}case"reasoning":{q.push({type:"thinking",thinking:_e.text,signature:_e.signature,cache_control:He});break}case"redacted-reasoning":{q.push({type:"redacted_thinking",data:_e.data,cache_control:He});break}case"tool-call":{q.push({type:"tool_use",id:_e.toolCallId,name:_e.toolName,input:_e.args,cache_control:He});break}default:{let tt=_e;throw new Error(`Unsupported part: ${tt}`)}}}}_.push({role:"assistant",content:q});break}default:{let q=K;throw new Error(`Unsupported type: ${q}`)}}}return{prompt:{system:v,messages:_},betas:a}}function W1(t){let e=[],r;for(let n of t){let{role:i}=n;switch(i){case"system":{(r==null?void 0:r.type)!=="system"&&(r={type:"system",messages:[]},e.push(r)),r.messages.push(n);break}case"assistant":{(r==null?void 0:r.type)!=="assistant"&&(r={type:"assistant",messages:[]},e.push(r)),r.messages.push(n);break}case"user":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},e.push(r)),r.messages.push(n);break}case"tool":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},e.push(r)),r.messages.push(n);break}default:{let a=i;throw new Error(`Unsupported role: ${a}`)}}}return e}function kN(t){switch(t){case"end_turn":case"stop_sequence":return"stop";case"tool_use":return"tool-calls";case"max_tokens":return"length";default:return"unknown"}}var K1=class{constructor(t,e,r){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.supportsImageUrls=!1,this.modelId=t,this.settings=e,this.config=r}get provider(){return this.config.provider}async getArgs({mode:t,prompt:e,maxTokens:r=4096,temperature:n,topP:i,topK:a,frequencyPenalty:l,presencePenalty:v,stopSequences:_,responseFormat:b,seed:C,providerMetadata:U}){var W,K,q;let H=t.type,Z=[];l!=null&&Z.push({type:"unsupported-setting",setting:"frequencyPenalty"}),v!=null&&Z.push({type:"unsupported-setting",setting:"presencePenalty"}),C!=null&&Z.push({type:"unsupported-setting",setting:"seed"}),b!=null&&b.type!=="text"&&Z.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:ne,betas:he}=z1({prompt:e}),Ie=X1.safeParse((W=U==null?void 0:U.anthropic)==null?void 0:W.thinking);if(!Ie.success)throw new W0({argument:"providerOptions.anthropic.thinking",message:"invalid thinking options",cause:Ie.error});let _e=((K=Ie.data)==null?void 0:K.type)==="enabled",Ae=(q=Ie.data)==null?void 0:q.budgetTokens,He={model:this.modelId,max_tokens:r,temperature:n,top_k:a,top_p:i,stop_sequences:_,..._e&&{thinking:{type:"enabled",budget_tokens:Ae}},system:ne.system,messages:ne.messages};if(_e){if(Ae==null)throw new on({functionality:"thinking requires a budget"});He.temperature!=null&&(He.temperature=void 0,Z.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported when thinking is enabled"})),a!=null&&(He.top_k=void 0,Z.push({type:"unsupported-setting",setting:"topK",details:"topK is not supported when thinking is enabled"})),i!=null&&(He.top_p=void 0,Z.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported when thinking is enabled"})),He.max_tokens=r+Ae}switch(H){case"regular":{let{tools:tt,tool_choice:lt,toolWarnings:Rt,betas:zt}=V1(t);return{args:{...He,tools:tt,tool_choice:lt},warnings:[...Z,...Rt],betas:new Set([...he,...zt])}}case"object-json":throw new on({functionality:"json-mode object generation"});case"object-tool":{let{name:tt,description:lt,parameters:Rt}=t.tool;return{args:{...He,tools:[{name:tt,description:lt,input_schema:Rt}],tool_choice:{type:"tool",name:tt}},warnings:Z,betas:he}}default:{let tt=H;throw new Error(`Unsupported type: ${tt}`)}}}async getHeaders({betas:t,headers:e}){return Oo(await Rg(this.config.headers),t.size>0?{"anthropic-beta":Array.from(t).join(",")}:{},e)}buildRequestUrl(t){var e,r,n;return(n=(r=(e=this.config).buildRequestUrl)==null?void 0:r.call(e,this.config.baseURL,t))!=null?n:`${this.config.baseURL}/messages`}transformRequestBody(t){var e,r,n;return(n=(r=(e=this.config).transformRequestBody)==null?void 0:r.call(e,t))!=null?n:t}async doGenerate(t){var e,r,n,i;let{args:a,warnings:l,betas:v}=await this.getArgs(t),{responseHeaders:_,value:b}=await fo({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:v,headers:t.headers}),body:this.transformRequestBody(a),failedResponseHandler:AN,successfulResponseHandler:tl(J1),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:C,...U}=a,W="";for(let H of b.content)H.type==="text"&&(W+=H.text);let K;if(b.content.some(H=>H.type==="tool_use")){K=[];for(let H of b.content)H.type==="tool_use"&&K.push({toolCallType:"function",toolCallId:H.id,toolName:H.name,args:JSON.stringify(H.input)})}let q=b.content.filter(H=>H.type==="redacted_thinking"||H.type==="thinking").map(H=>H.type==="thinking"?{type:"text",text:H.thinking,signature:H.signature}:{type:"redacted",data:H.data});return{text:W,reasoning:q.length>0?q:void 0,toolCalls:K,finishReason:kN(b.stop_reason),usage:{promptTokens:b.usage.input_tokens,completionTokens:b.usage.output_tokens},rawCall:{rawPrompt:C,rawSettings:U},rawResponse:{headers:_},response:{id:(e=b.id)!=null?e:void 0,modelId:(r=b.model)!=null?r:void 0},warnings:l,providerMetadata:{anthropic:{cacheCreationInputTokens:(n=b.usage.cache_creation_input_tokens)!=null?n:null,cacheReadInputTokens:(i=b.usage.cache_read_input_tokens)!=null?i:null}},request:{body:JSON.stringify(a)}}}async doStream(t){let{args:e,warnings:r,betas:n}=await this.getArgs(t),i={...e,stream:!0},{responseHeaders:a,value:l}=await fo({url:this.buildRequestUrl(!0),headers:await this.getHeaders({betas:n,headers:t.headers}),body:this.transformRequestBody(i),failedResponseHandler:AN,successfulResponseHandler:vv(Z1),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:v,..._}=e,b="unknown",C={promptTokens:Number.NaN,completionTokens:Number.NaN},U={},W,K;return{stream:l.pipeThrough(new TransformStream({transform(q,H){var Z,ne,he,Ie;if(!q.success){H.enqueue({type:"error",error:q.error});return}let _e=q.value;switch(_e.type){case"ping":return;case"content_block_start":{let Ae=_e.content_block.type;switch(K=Ae,Ae){case"text":case"thinking":return;case"redacted_thinking":{H.enqueue({type:"redacted-reasoning",data:_e.content_block.data});return}case"tool_use":{U[_e.index]={toolCallId:_e.content_block.id,toolName:_e.content_block.name,jsonText:""};return}default:{let He=Ae;throw new Error(`Unsupported content block type: ${He}`)}}}case"content_block_stop":{if(U[_e.index]!=null){let Ae=U[_e.index];H.enqueue({type:"tool-call",toolCallType:"function",toolCallId:Ae.toolCallId,toolName:Ae.toolName,args:Ae.jsonText}),delete U[_e.index]}K=void 0;return}case"content_block_delta":{let Ae=_e.delta.type;switch(Ae){case"text_delta":{H.enqueue({type:"text-delta",textDelta:_e.delta.text});return}case"thinking_delta":{H.enqueue({type:"reasoning",textDelta:_e.delta.thinking});return}case"signature_delta":{K==="thinking"&&H.enqueue({type:"reasoning-signature",signature:_e.delta.signature});return}case"input_json_delta":{let He=U[_e.index];H.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:He.toolCallId,toolName:He.toolName,argsTextDelta:_e.delta.partial_json}),He.jsonText+=_e.delta.partial_json;return}default:{let He=Ae;throw new Error(`Unsupported delta type: ${He}`)}}}case"message_start":{C.promptTokens=_e.message.usage.input_tokens,C.completionTokens=_e.message.usage.output_tokens,W={anthropic:{cacheCreationInputTokens:(Z=_e.message.usage.cache_creation_input_tokens)!=null?Z:null,cacheReadInputTokens:(ne=_e.message.usage.cache_read_input_tokens)!=null?ne:null}},H.enqueue({type:"response-metadata",id:(he=_e.message.id)!=null?he:void 0,modelId:(Ie=_e.message.model)!=null?Ie:void 0});return}case"message_delta":{C.completionTokens=_e.usage.output_tokens,b=kN(_e.delta.stop_reason);return}case"message_stop":{H.enqueue({type:"finish",finishReason:b,usage:C,providerMetadata:W});return}case"error":{H.enqueue({type:"error",error:_e.error});return}default:{let Ae=_e;throw new Error(`Unsupported chunk type: ${Ae}`)}}}})),rawCall:{rawPrompt:v,rawSettings:_},rawResponse:{headers:a},warnings:r,request:{body:JSON.stringify(i)}}}},J1=T.object({type:T.literal("message"),id:T.string().nullish(),model:T.string().nullish(),content:T.array(T.discriminatedUnion("type",[T.object({type:T.literal("text"),text:T.string()}),T.object({type:T.literal("thinking"),thinking:T.string(),signature:T.string()}),T.object({type:T.literal("redacted_thinking"),data:T.string()}),T.object({type:T.literal("tool_use"),id:T.string(),name:T.string(),input:T.unknown()})])),stop_reason:T.string().nullish(),usage:T.object({input_tokens:T.number(),output_tokens:T.number(),cache_creation_input_tokens:T.number().nullish(),cache_read_input_tokens:T.number().nullish()})}),Z1=T.discriminatedUnion("type",[T.object({type:T.literal("message_start"),message:T.object({id:T.string().nullish(),model:T.string().nullish(),usage:T.object({input_tokens:T.number(),output_tokens:T.number(),cache_creation_input_tokens:T.number().nullish(),cache_read_input_tokens:T.number().nullish()})})}),T.object({type:T.literal("content_block_start"),index:T.number(),content_block:T.discriminatedUnion("type",[T.object({type:T.literal("text"),text:T.string()}),T.object({type:T.literal("thinking"),thinking:T.string()}),T.object({type:T.literal("tool_use"),id:T.string(),name:T.string()}),T.object({type:T.literal("redacted_thinking"),data:T.string()})])}),T.object({type:T.literal("content_block_delta"),index:T.number(),delta:T.discriminatedUnion("type",[T.object({type:T.literal("input_json_delta"),partial_json:T.string()}),T.object({type:T.literal("text_delta"),text:T.string()}),T.object({type:T.literal("thinking_delta"),thinking:T.string()}),T.object({type:T.literal("signature_delta"),signature:T.string()})])}),T.object({type:T.literal("content_block_stop"),index:T.number()}),T.object({type:T.literal("error"),error:T.object({type:T.string(),message:T.string()})}),T.object({type:T.literal("message_delta"),delta:T.object({stop_reason:T.string().nullish()}),usage:T.object({output_tokens:T.number()})}),T.object({type:T.literal("message_stop")}),T.object({type:T.literal("ping")})]),X1=T.object({type:T.union([T.literal("enabled"),T.literal("disabled")]),budgetTokens:T.number().optional()}).optional(),Q1=T.object({command:T.string(),restart:T.boolean().optional()});function eL(t={}){return{type:"provider-defined",id:"anthropic.bash_20241022",args:{},parameters:Q1,execute:t.execute,experimental_toToolResultContent:t.experimental_toToolResultContent}}var tL=T.object({command:T.enum(["view","create","str_replace","insert","undo_edit"]),path:T.string(),file_text:T.string().optional(),insert_line:T.number().int().optional(),new_str:T.string().optional(),old_str:T.string().optional(),view_range:T.array(T.number().int()).optional()});function rL(t={}){return{type:"provider-defined",id:"anthropic.text_editor_20241022",args:{},parameters:tL,execute:t.execute,experimental_toToolResultContent:t.experimental_toToolResultContent}}var nL=T.object({action:T.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:T.array(T.number().int()).optional(),text:T.string().optional()});function iL(t){return{type:"provider-defined",id:"anthropic.computer_20241022",args:{displayWidthPx:t.displayWidthPx,displayHeightPx:t.displayHeightPx,displayNumber:t.displayNumber},parameters:nL,execute:t.execute,experimental_toToolResultContent:t.experimental_toToolResultContent}}var aL=T.object({action:T.enum(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot"]),coordinate:T.tuple([T.number().int(),T.number().int()]).optional(),duration:T.number().optional(),scroll_amount:T.number().optional(),scroll_direction:T.enum(["up","down","left","right"]).optional(),start_coordinate:T.tuple([T.number().int(),T.number().int()]).optional(),text:T.string().optional()});function oL(t){return{type:"provider-defined",id:"anthropic.computer_20250124",args:{displayWidthPx:t.displayWidthPx,displayHeightPx:t.displayHeightPx,displayNumber:t.displayNumber},parameters:aL,execute:t.execute,experimental_toToolResultContent:t.experimental_toToolResultContent}}var sL={bash_20241022:eL,textEditor_20241022:rL,computer_20241022:iL,computer_20250124:oL};function Xb(t={}){var e;let r=(e=Zh(t.baseURL))!=null?e:"https://api.anthropic.com/v1",n=()=>({"anthropic-version":"2023-06-01","x-api-key":Kh({apiKey:t.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...t.headers}),i=(l,v={})=>new K1(l,v,{provider:"anthropic.messages",baseURL:r,headers:n,fetch:t.fetch}),a=function(l,v){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return i(l,v)};return a.languageModel=i,a.chat=i,a.messages=i,a.textEmbeddingModel=l=>{throw new cy({modelId:l,modelType:"textEmbeddingModel"})},a.tools=sL,a}var nB=Xb();function _y(t){var e,r;return(r=(e=t==null?void 0:t.providerMetadata)==null?void 0:e.openaiCompatible)!=null?r:{}}function uL(t){let e=[];for(let{role:r,content:n,...i}of t){let a=_y({...i});switch(r){case"system":{e.push({role:"system",content:n,...a});break}case"user":{if(n.length===1&&n[0].type==="text"){e.push({role:"user",content:n[0].text,..._y(n[0])});break}e.push({role:"user",content:n.map(l=>{var v;let _=_y(l);switch(l.type){case"text":return{type:"text",text:l.text,..._};case"image":return{type:"image_url",image_url:{url:l.image instanceof URL?l.image.toString():`data:${(v=l.mimeType)!=null?v:"image/jpeg"};base64,${gm(l.image)}`},..._};case"file":throw new on({functionality:"File content parts in user messages"})}}),...a});break}case"assistant":{let l="",v=[];for(let _ of n){let b=_y(_);switch(_.type){case"text":{l+=_.text;break}case"redacted-reasoning":case"reasoning":break;case"tool-call":{v.push({id:_.toolCallId,type:"function",function:{name:_.toolName,arguments:JSON.stringify(_.args)},...b});break}default:{let C=_;throw new Error(`Unsupported part: ${C}`)}}}e.push({role:"assistant",content:l,tool_calls:v.length>0?v:void 0,...a});break}case"tool":{for(let l of n){let v=_y(l);e.push({role:"tool",tool_call_id:l.toolCallId,content:JSON.stringify(l.result),...v})}break}default:{let l=r;throw new Error(`Unsupported role: ${l}`)}}}return e}function PN({id:t,model:e,created:r}){return{id:t??void 0,modelId:e??void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function LN(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var lL=T.object({error:T.object({message:T.string(),type:T.string().nullish(),param:T.any().nullish(),code:T.union([T.string(),T.number()]).nullish()})}),cL={errorSchema:lL,errorToMessage:t=>t.error.message};function fL({mode:t,structuredOutputs:e}){var r;let n=(r=t.tools)!=null&&r.length?t.tools:void 0,i=[];if(n==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};let a=t.toolChoice,l=[];for(let _ of n)_.type==="provider-defined"?i.push({type:"unsupported-tool",tool:_}):l.push({type:"function",function:{name:_.name,description:_.description,parameters:_.parameters}});if(a==null)return{tools:l,tool_choice:void 0,toolWarnings:i};let v=a.type;switch(v){case"auto":case"none":case"required":return{tools:l,tool_choice:v,toolWarnings:i};case"tool":return{tools:l,tool_choice:{type:"function",function:{name:a.toolName}},toolWarnings:i};default:{let _=v;throw new on({functionality:`Unsupported tool choice type: ${_}`})}}}var MN=class{constructor(t,e,r){this.specificationVersion="v1";var n,i;this.modelId=t,this.settings=e,this.config=r;let a=(n=r.errorStructure)!=null?n:cL;this.chunkSchema=pL(a.errorSchema),this.failedResponseHandler=Jh(a),this.supportsStructuredOutputs=(i=r.supportsStructuredOutputs)!=null?i:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:t,prompt:e,maxTokens:r,temperature:n,topP:i,topK:a,frequencyPenalty:l,presencePenalty:v,providerMetadata:_,stopSequences:b,responseFormat:C,seed:U}){var W,K;let q=t.type,H=[];a!=null&&H.push({type:"unsupported-setting",setting:"topK"}),(C==null?void 0:C.type)==="json"&&C.schema!=null&&!this.supportsStructuredOutputs&&H.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let Z={model:this.modelId,user:this.settings.user,max_tokens:r,temperature:n,top_p:i,frequency_penalty:l,presence_penalty:v,response_format:(C==null?void 0:C.type)==="json"?this.supportsStructuredOutputs===!0&&C.schema!=null?{type:"json_schema",json_schema:{schema:C.schema,name:(W=C.name)!=null?W:"response",description:C.description}}:{type:"json_object"}:void 0,stop:b,seed:U,..._==null?void 0:_[this.providerOptionsName],messages:uL(e)};switch(q){case"regular":{let{tools:ne,tool_choice:he,toolWarnings:Ie}=fL({mode:t,structuredOutputs:this.supportsStructuredOutputs});return{args:{...Z,tools:ne,tool_choice:he},warnings:[...H,...Ie]}}case"object-json":return{args:{...Z,response_format:this.supportsStructuredOutputs===!0&&t.schema!=null?{type:"json_schema",json_schema:{schema:t.schema,name:(K=t.name)!=null?K:"response",description:t.description}}:{type:"json_object"}},warnings:H};case"object-tool":return{args:{...Z,tool_choice:{type:"function",function:{name:t.tool.name}},tools:[{type:"function",function:{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters}}]},warnings:H};default:{let ne=q;throw new Error(`Unsupported type: ${ne}`)}}}async doGenerate(t){var e,r,n,i,a,l,v,_,b;let{args:C,warnings:U}=this.getArgs({...t}),W=JSON.stringify(C),{responseHeaders:K,value:q,rawValue:H}=await fo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Oo(this.config.headers(),t.headers),body:C,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:tl(dL),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:Z,...ne}=C,he=q.choices[0],Ie=(r=(e=this.config.metadataExtractor)==null?void 0:e.extractMetadata)==null?void 0:r.call(e,{parsedBody:H});return{text:(n=he.message.content)!=null?n:void 0,reasoning:(i=he.message.reasoning_content)!=null?i:void 0,toolCalls:(a=he.message.tool_calls)==null?void 0:a.map(_e=>{var Ae;return{toolCallType:"function",toolCallId:(Ae=_e.id)!=null?Ae:Zl(),toolName:_e.function.name,args:_e.function.arguments}}),finishReason:LN(he.finish_reason),usage:{promptTokens:(v=(l=q.usage)==null?void 0:l.prompt_tokens)!=null?v:NaN,completionTokens:(b=(_=q.usage)==null?void 0:_.completion_tokens)!=null?b:NaN},...Ie&&{providerMetadata:Ie},rawCall:{rawPrompt:Z,rawSettings:ne},rawResponse:{headers:K},response:PN(q),warnings:U,request:{body:W}}}async doStream(t){var e;if(this.settings.simulateStreaming){let q=await this.doGenerate(t);return{stream:new ReadableStream({start(Z){if(Z.enqueue({type:"response-metadata",...q.response}),q.reasoning)if(Array.isArray(q.reasoning))for(let ne of q.reasoning)ne.type==="text"&&Z.enqueue({type:"reasoning",textDelta:ne.text});else Z.enqueue({type:"reasoning",textDelta:q.reasoning});if(q.text&&Z.enqueue({type:"text-delta",textDelta:q.text}),q.toolCalls)for(let ne of q.toolCalls)Z.enqueue({type:"tool-call",...ne});Z.enqueue({type:"finish",finishReason:q.finishReason,usage:q.usage,logprobs:q.logprobs,providerMetadata:q.providerMetadata}),Z.close()}}),rawCall:q.rawCall,rawResponse:q.rawResponse,warnings:q.warnings}}let{args:r,warnings:n}=this.getArgs({...t}),i=JSON.stringify({...r,stream:!0}),a=(e=this.config.metadataExtractor)==null?void 0:e.createStreamExtractor(),{responseHeaders:l,value:v}=await fo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Oo(this.config.headers(),t.headers),body:{...r,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:vv(this.chunkSchema),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:_,...b}=r,C=[],U="unknown",W={promptTokens:void 0,completionTokens:void 0},K=!0;return{stream:v.pipeThrough(new TransformStream({transform(q,H){var Z,ne,he,Ie,_e,Ae,He,tt,lt,Rt,zt,Rr,cn,jt;if(!q.success){U="error",H.enqueue({type:"error",error:q.error});return}let Ht=q.value;if(a==null||a.processChunk(q.rawValue),"error"in Ht){U="error",H.enqueue({type:"error",error:Ht.error.message});return}K&&(K=!1,H.enqueue({type:"response-metadata",...PN(Ht)})),Ht.usage!=null&&(W={promptTokens:(Z=Ht.usage.prompt_tokens)!=null?Z:void 0,completionTokens:(ne=Ht.usage.completion_tokens)!=null?ne:void 0});let qr=Ht.choices[0];if((qr==null?void 0:qr.finish_reason)!=null&&(U=LN(qr.finish_reason)),(qr==null?void 0:qr.delta)==null)return;let rt=qr.delta;if(rt.reasoning_content!=null&&H.enqueue({type:"reasoning",textDelta:rt.reasoning_content}),rt.content!=null&&H.enqueue({type:"text-delta",textDelta:rt.content}),rt.tool_calls!=null)for(let fn of rt.tool_calls){let Le=fn.index;if(C[Le]==null){if(fn.type!=="function")throw new uh({data:fn,message:"Expected 'function' type."});if(fn.id==null)throw new uh({data:fn,message:"Expected 'id' to be a string."});if(((he=fn.function)==null?void 0:he.name)==null)throw new uh({data:fn,message:"Expected 'function.name' to be a string."});C[Le]={id:fn.id,type:"function",function:{name:fn.function.name,arguments:(Ie=fn.function.arguments)!=null?Ie:""},hasFinished:!1};let Wt=C[Le];((_e=Wt.function)==null?void 0:_e.name)!=null&&((Ae=Wt.function)==null?void 0:Ae.arguments)!=null&&(Wt.function.arguments.length>0&&H.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Wt.id,toolName:Wt.function.name,argsTextDelta:Wt.function.arguments}),S_(Wt.function.arguments)&&(H.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(He=Wt.id)!=null?He:Zl(),toolName:Wt.function.name,args:Wt.function.arguments}),Wt.hasFinished=!0));continue}let Zt=C[Le];Zt.hasFinished||(((tt=fn.function)==null?void 0:tt.arguments)!=null&&(Zt.function.arguments+=(Rt=(lt=fn.function)==null?void 0:lt.arguments)!=null?Rt:""),H.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Zt.id,toolName:Zt.function.name,argsTextDelta:(zt=fn.function.arguments)!=null?zt:""}),((Rr=Zt.function)==null?void 0:Rr.name)!=null&&((cn=Zt.function)==null?void 0:cn.arguments)!=null&&S_(Zt.function.arguments)&&(H.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(jt=Zt.id)!=null?jt:Zl(),toolName:Zt.function.name,args:Zt.function.arguments}),Zt.hasFinished=!0))}},flush(q){var H,Z;let ne=a==null?void 0:a.buildMetadata();q.enqueue({type:"finish",finishReason:U,usage:{promptTokens:(H=W.promptTokens)!=null?H:NaN,completionTokens:(Z=W.completionTokens)!=null?Z:NaN},...ne&&{providerMetadata:ne}})}})),rawCall:{rawPrompt:_,rawSettings:b},rawResponse:{headers:l},warnings:n,request:{body:i}}}},dL=T.object({id:T.string().nullish(),created:T.number().nullish(),model:T.string().nullish(),choices:T.array(T.object({message:T.object({role:T.literal("assistant").nullish(),content:T.string().nullish(),reasoning_content:T.string().nullish(),tool_calls:T.array(T.object({id:T.string().nullish(),type:T.literal("function"),function:T.object({name:T.string(),arguments:T.string()})})).nullish()}),finish_reason:T.string().nullish()})),usage:T.object({prompt_tokens:T.number().nullish(),completion_tokens:T.number().nullish()}).nullish()}),pL=t=>T.union([T.object({id:T.string().nullish(),created:T.number().nullish(),model:T.string().nullish(),choices:T.array(T.object({delta:T.object({role:T.enum(["assistant"]).nullish(),content:T.string().nullish(),reasoning_content:T.string().nullish(),tool_calls:T.array(T.object({index:T.number(),id:T.string().nullish(),type:T.literal("function").optional(),function:T.object({name:T.string().nullish(),arguments:T.string().nullish()})})).nullish()}).nullish(),finish_reason:T.string().nullish()})),usage:T.object({prompt_tokens:T.number().nullish(),completion_tokens:T.number().nullish()}).nullish()}),t]);var mB=T.object({id:T.string().nullish(),created:T.number().nullish(),model:T.string().nullish(),choices:T.array(T.object({text:T.string(),finish_reason:T.string()})),usage:T.object({prompt_tokens:T.number(),completion_tokens:T.number()}).nullish()});var hB=T.object({data:T.array(T.object({embedding:T.array(T.number())})),usage:T.object({prompt_tokens:T.number()}).nullish()});var FN=t=>{var e,r;return t==null?void 0:{deepseek:{promptCacheHitTokens:(e=t.prompt_cache_hit_tokens)!=null?e:NaN,promptCacheMissTokens:(r=t.prompt_cache_miss_tokens)!=null?r:NaN}}},mL={extractMetadata:({parsedBody:t})=>{let e=hm({value:t,schema:vL});return!e.success||e.value.usage==null?void 0:FN(e.value.usage)},createStreamExtractor:()=>{let t;return{processChunk:e=>{var r,n;let i=hm({value:e,schema:hL});i.success&&((n=(r=i.value.choices)==null?void 0:r[0])==null?void 0:n.finish_reason)==="stop"&&i.value.usage&&(t=i.value.usage)},buildMetadata:()=>FN(t)}}},UN=T.object({prompt_cache_hit_tokens:T.number().nullish(),prompt_cache_miss_tokens:T.number().nullish()}),vL=T.object({usage:UN.nullish()}),hL=T.object({choices:T.array(T.object({finish_reason:T.string().nullish()})).nullish(),usage:UN.nullish()});function Qb(t={}){var e;let r=Zh((e=t.baseURL)!=null?e:"https://api.deepseek.com/v1"),n=()=>({Authorization:`Bearer ${Kh({apiKey:t.apiKey,environmentVariableName:"DEEPSEEK_API_KEY",description:"DeepSeek API key"})}`,...t.headers}),i=(l,v={})=>new MN(l,v,{provider:"deepseek.chat",url:({path:_})=>`${r}${_}`,headers:n,fetch:t.fetch,defaultObjectGenerationMode:"json",metadataExtractor:mL}),a=(l,v)=>i(l,v);return a.languageModel=i,a.chat=i,a.textEmbeddingModel=l=>{throw new cy({modelId:l,modelType:"textEmbeddingModel"})},a}var TB=Qb();function cp(t){if(gL(t))return;if(typeof t=="boolean")return{type:"boolean",properties:{}};let{type:e,description:r,required:n,properties:i,items:a,allOf:l,anyOf:v,oneOf:_,format:b,const:C,minLength:U,enum:W}=t,K={};if(r&&(K.description=r),n&&(K.required=n),b&&(K.format=b),C!==void 0&&(K.enum=[C]),e&&(Array.isArray(e)?e.includes("null")?(K.type=e.filter(q=>q!=="null")[0],K.nullable=!0):K.type=e:e==="null"?K.type="null":K.type=e),W!==void 0&&(K.enum=W),i!=null&&(K.properties=Object.entries(i).reduce((q,[H,Z])=>(q[H]=cp(Z),q),{})),a&&(K.items=Array.isArray(a)?a.map(cp):cp(a)),l&&(K.allOf=l.map(cp)),v)if(v.some(q=>typeof q=="object"&&(q==null?void 0:q.type)==="null")){let q=v.filter(H=>!(typeof H=="object"&&(H==null?void 0:H.type)==="null"));if(q.length===1){let H=cp(q[0]);typeof H=="object"&&(K.nullable=!0,Object.assign(K,H))}else K.anyOf=q.map(cp),K.nullable=!0}else K.anyOf=v.map(cp);return _&&(K.oneOf=_.map(cp)),U!==void 0&&(K.minLength=U),K}function gL(t){return t!=null&&typeof t=="object"&&t.type==="object"&&(t.properties==null||Object.keys(t.properties).length===0)}function _L(t){var e,r;let n=[],i=[],a=!0;for(let{role:l,content:v}of t)switch(l){case"system":{if(!a)throw new on({functionality:"system messages are only supported at the beginning of the conversation"});n.push({text:v});break}case"user":{a=!1;let _=[];for(let b of v)switch(b.type){case"text":{_.push({text:b.text});break}case"image":{_.push(b.image instanceof URL?{fileData:{mimeType:(e=b.mimeType)!=null?e:"image/jpeg",fileUri:b.image.toString()}}:{inlineData:{mimeType:(r=b.mimeType)!=null?r:"image/jpeg",data:gm(b.image)}});break}case"file":{_.push(b.data instanceof URL?{fileData:{mimeType:b.mimeType,fileUri:b.data.toString()}}:{inlineData:{mimeType:b.mimeType,data:b.data}});break}default:{let C=b;throw new on({functionality:`prompt part: ${C}`})}}i.push({role:"user",parts:_});break}case"assistant":{a=!1,i.push({role:"model",parts:v.map(_=>{switch(_.type){case"text":return _.text.length===0?void 0:{text:_.text};case"tool-call":return{functionCall:{name:_.toolName,args:_.args}}}}).filter(_=>_!==void 0)});break}case"tool":{a=!1,i.push({role:"user",parts:v.map(_=>({functionResponse:{name:_.toolName,response:{name:_.toolName,content:_.result}}}))});break}default:{let _=l;throw new Error(`Unsupported role: ${_}`)}}return{systemInstruction:n.length>0?{parts:n}:void 0,contents:i}}function jN(t){return t.includes("/")?t:`models/${t}`}var yL=T.object({error:T.object({code:T.number().nullable(),message:T.string(),status:T.string()})}),eS=Jh({errorSchema:yL,errorToMessage:t=>t.error.message});function wL(t,e,r){var n,i;let a=(n=t.tools)!=null&&n.length?t.tools:void 0,l=[];if(e)return{tools:r?{googleSearch:{}}:{googleSearchRetrieval:{}},toolConfig:void 0,toolWarnings:l};if(a==null)return{tools:void 0,toolConfig:void 0,toolWarnings:l};let v=[];for(let C of a)C.type==="provider-defined"?l.push({type:"unsupported-tool",tool:C}):v.push({name:C.name,description:(i=C.description)!=null?i:"",parameters:cp(C.parameters)});let _=t.toolChoice;if(_==null)return{tools:{functionDeclarations:v},toolConfig:void 0,toolWarnings:l};let b=_.type;switch(b){case"auto":return{tools:{functionDeclarations:v},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:l};case"none":return{tools:{functionDeclarations:v},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:l};case"required":return{tools:{functionDeclarations:v},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:l};case"tool":return{tools:{functionDeclarations:v},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[_.toolName]}},toolWarnings:l};default:{let C=b;throw new on({functionality:`Unsupported tool choice type: ${C}`})}}}function YN({finishReason:t,hasToolCalls:e}){switch(t){case"STOP":return e?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"RECITATION":case"SAFETY":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";default:return"unknown"}}var bL=class{constructor(t,e,r){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=t,this.settings=e,this.config=r}get supportsStructuredOutputs(){var t;return(t=this.settings.structuredOutputs)!=null?t:!0}get provider(){return this.config.provider}async getArgs({mode:t,prompt:e,maxTokens:r,temperature:n,topP:i,topK:a,frequencyPenalty:l,presencePenalty:v,stopSequences:_,responseFormat:b,seed:C}){var U,W;let K=t.type,q=[];C!=null&&q.push({type:"unsupported-setting",setting:"seed"});let H={maxOutputTokens:r,temperature:n,topK:a,topP:i,frequencyPenalty:l,presencePenalty:v,stopSequences:_,responseMimeType:(b==null?void 0:b.type)==="json"?"application/json":void 0,responseSchema:(b==null?void 0:b.type)==="json"&&b.schema!=null&&this.supportsStructuredOutputs?cp(b.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp}},{contents:Z,systemInstruction:ne}=_L(e);switch(K){case"regular":{let{tools:he,toolConfig:Ie,toolWarnings:_e}=wL(t,(U=this.settings.useSearchGrounding)!=null?U:!1,this.modelId.includes("gemini-2"));return{args:{generationConfig:H,contents:Z,systemInstruction:ne,safetySettings:this.settings.safetySettings,tools:he,toolConfig:Ie,cachedContent:this.settings.cachedContent},warnings:[...q,..._e]}}case"object-json":return{args:{generationConfig:{...H,responseMimeType:"application/json",responseSchema:t.schema!=null&&this.supportsStructuredOutputs?cp(t.schema):void 0},contents:Z,systemInstruction:ne,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:q};case"object-tool":return{args:{generationConfig:H,contents:Z,tools:{functionDeclarations:[{name:t.tool.name,description:(W=t.tool.description)!=null?W:"",parameters:cp(t.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:q};default:{let he=K;throw new Error(`Unsupported type: ${he}`)}}}supportsUrl(t){return this.config.isSupportedUrl(t)}async doGenerate(t){var e,r,n,i,a,l,v,_;let{args:b,warnings:C}=await this.getArgs(t),U=JSON.stringify(b),W=Oo(await Rg(this.config.headers),t.headers),{responseHeaders:K,value:q}=await fo({url:`${this.config.baseURL}/${jN(this.modelId)}:generateContent`,headers:W,body:b,failedResponseHandler:eS,successfulResponseHandler:tl(EL),abortSignal:t.abortSignal,fetch:this.config.fetch}),{contents:H,...Z}=b,ne=q.candidates[0],he=$N({parts:(r=(e=ne.content)==null?void 0:e.parts)!=null?r:[],generateId:this.config.generateId}),Ie=q.usageMetadata;return{text:BN((i=(n=ne.content)==null?void 0:n.parts)!=null?i:[]),toolCalls:he,finishReason:YN({finishReason:ne.finishReason,hasToolCalls:he!=null&&he.length>0}),usage:{promptTokens:(a=Ie==null?void 0:Ie.promptTokenCount)!=null?a:NaN,completionTokens:(l=Ie==null?void 0:Ie.candidatesTokenCount)!=null?l:NaN},rawCall:{rawPrompt:H,rawSettings:Z},rawResponse:{headers:K},warnings:C,providerMetadata:{google:{groundingMetadata:(v=ne.groundingMetadata)!=null?v:null,safetyRatings:(_=ne.safetyRatings)!=null?_:null}},sources:qN({groundingMetadata:ne.groundingMetadata,generateId:this.config.generateId}),request:{body:U}}}async doStream(t){let{args:e,warnings:r}=await this.getArgs(t),n=JSON.stringify(e),i=Oo(await Rg(this.config.headers),t.headers),{responseHeaders:a,value:l}=await fo({url:`${this.config.baseURL}/${jN(this.modelId)}:streamGenerateContent?alt=sse`,headers:i,body:e,failedResponseHandler:eS,successfulResponseHandler:vv(TL),abortSignal:t.abortSignal,fetch:this.config.fetch}),{contents:v,..._}=e,b="unknown",C={promptTokens:Number.NaN,completionTokens:Number.NaN},U,W=this.config.generateId,K=!1;return{stream:l.pipeThrough(new TransformStream({transform(q,H){var Z,ne,he,Ie,_e,Ae;if(!q.success){H.enqueue({type:"error",error:q.error});return}let He=q.value,tt=He.usageMetadata;tt!=null&&(C={promptTokens:(Z=tt.promptTokenCount)!=null?Z:NaN,completionTokens:(ne=tt.candidatesTokenCount)!=null?ne:NaN});let lt=(he=He.candidates)==null?void 0:he[0];if(lt==null)return;if(lt.finishReason!=null){b=YN({finishReason:lt.finishReason,hasToolCalls:K});let cn=(Ie=qN({groundingMetadata:lt.groundingMetadata,generateId:W}))!=null?Ie:[];for(let jt of cn)H.enqueue({type:"source",source:jt});U={google:{groundingMetadata:(_e=lt.groundingMetadata)!=null?_e:null,safetyRatings:(Ae=lt.safetyRatings)!=null?Ae:null}}}let Rt=lt.content;if(Rt==null)return;let zt=BN(Rt.parts);zt!=null&&H.enqueue({type:"text-delta",textDelta:zt});let Rr=$N({parts:Rt.parts,generateId:W});if(Rr!=null)for(let cn of Rr)H.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:cn.toolCallId,toolName:cn.toolName,argsTextDelta:cn.args}),H.enqueue({type:"tool-call",toolCallType:"function",toolCallId:cn.toolCallId,toolName:cn.toolName,args:cn.args}),K=!0},flush(q){q.enqueue({type:"finish",finishReason:b,usage:C,providerMetadata:U})}})),rawCall:{rawPrompt:v,rawSettings:_},rawResponse:{headers:a},warnings:r,request:{body:n}}}};function $N({parts:t,generateId:e}){let r=t==null?void 0:t.filter(n=>"functionCall"in n);return r==null||r.length===0?void 0:r.map(n=>({toolCallType:"function",toolCallId:e(),toolName:n.functionCall.name,args:JSON.stringify(n.functionCall.args)}))}function BN(t){let e=t==null?void 0:t.filter(r=>"text"in r);return e==null||e.length===0?void 0:e.map(r=>r.text).join("")}var HN=T.object({role:T.string(),parts:T.array(T.union([T.object({text:T.string()}),T.object({functionCall:T.object({name:T.string(),args:T.unknown()})})])).nullish()}),SL=T.object({web:T.object({uri:T.string(),title:T.string()}).nullish(),retrievedContext:T.object({uri:T.string(),title:T.string()}).nullish()}),GN=T.object({webSearchQueries:T.array(T.string()).nullish(),retrievalQueries:T.array(T.string()).nullish(),searchEntryPoint:T.object({renderedContent:T.string()}).nullish(),groundingChunks:T.array(SL).nullish(),groundingSupports:T.array(T.object({segment:T.object({startIndex:T.number().nullish(),endIndex:T.number().nullish(),text:T.string().nullish()}),segment_text:T.string().nullish(),groundingChunkIndices:T.array(T.number()).nullish(),supportChunkIndices:T.array(T.number()).nullish(),confidenceScores:T.array(T.number()).nullish(),confidenceScore:T.array(T.number()).nullish()})).nullish(),retrievalMetadata:T.union([T.object({webDynamicRetrievalScore:T.number()}),T.object({})]).nullish()}),VN=T.object({category:T.string(),probability:T.string(),probabilityScore:T.number().nullish(),severity:T.string().nullish(),severityScore:T.number().nullish(),blocked:T.boolean().nullish()}),EL=T.object({candidates:T.array(T.object({content:HN.nullish(),finishReason:T.string().nullish(),safetyRatings:T.array(VN).nullish(),groundingMetadata:GN.nullish()})),usageMetadata:T.object({promptTokenCount:T.number().nullish(),candidatesTokenCount:T.number().nullish(),totalTokenCount:T.number().nullish()}).nullish()}),TL=T.object({candidates:T.array(T.object({content:HN.nullish(),finishReason:T.string().nullish(),safetyRatings:T.array(VN).nullish(),groundingMetadata:GN.nullish()})).nullish(),usageMetadata:T.object({promptTokenCount:T.number().nullish(),candidatesTokenCount:T.number().nullish(),totalTokenCount:T.number().nullish()}).nullish()});function qN({groundingMetadata:t,generateId:e}){var r;return(r=t==null?void 0:t.groundingChunks)==null?void 0:r.filter(n=>n.web!=null).map(n=>({sourceType:"url",id:e(),url:n.web.uri,title:n.web.title}))}var IL=class{constructor(t,e,r){this.specificationVersion="v1",this.modelId=t,this.settings=e,this.config=r}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:t,headers:e,abortSignal:r}){if(t.length>this.maxEmbeddingsPerCall)throw new K0({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});let n=Oo(await Rg(this.config.headers),e),{responseHeaders:i,value:a}=await fo({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:n,body:{requests:t.map(l=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:l}]},outputDimensionality:this.settings.outputDimensionality}))},failedResponseHandler:eS,successfulResponseHandler:tl(NL),abortSignal:r,fetch:this.config.fetch});return{embeddings:a.embeddings.map(l=>l.values),usage:void 0,rawResponse:{headers:i}}}},NL=T.object({embeddings:T.array(T.object({values:T.array(T.number())}))});function CL(t){return t.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function tS(t={}){var e;let r=(e=Zh(t.baseURL))!=null?e:"https://generativelanguage.googleapis.com/v1beta",n=()=>({"x-goog-api-key":Kh({apiKey:t.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...t.headers}),i=(v,_={})=>{var b;return new bL(v,_,{provider:"google.generative-ai",baseURL:r,headers:n,generateId:(b=t.generateId)!=null?b:Zl,isSupportedUrl:CL,fetch:t.fetch})},a=(v,_={})=>new IL(v,_,{provider:"google.generative-ai",baseURL:r,headers:n,fetch:t.fetch}),l=function(v,_){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return i(v,_)};return l.languageModel=i,l.chat=i,l.generativeAI=i,l.embedding=a,l.textEmbedding=a,l.textEmbeddingModel=a,l}var FB=tS();function xL({prompt:t,useLegacyFunctionCalling:e=!1,systemMessageMode:r="system"}){let n=[];for(let{role:i,content:a}of t)switch(i){case"system":{switch(r){case"system":{n.push({role:"system",content:a});break}case"developer":{n.push({role:"developer",content:a});break}case"remove":break;default:{let l=r;throw new Error(`Unsupported system message mode: ${l}`)}}break}case"user":{if(a.length===1&&a[0].type==="text"){n.push({role:"user",content:a[0].text});break}n.push({role:"user",content:a.map(l=>{var v,_,b;switch(l.type){case"text":return{type:"text",text:l.text};case"image":return{type:"image_url",image_url:{url:l.image instanceof URL?l.image.toString():`data:${(v=l.mimeType)!=null?v:"image/jpeg"};base64,${gm(l.image)}`,detail:(b=(_=l.providerMetadata)==null?void 0:_.openai)==null?void 0:b.imageDetail}};case"file":{if(l.data instanceof URL)throw new on({functionality:"'File content parts with URL data' functionality not supported."});switch(l.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:l.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:l.data,format:"mp3"}};default:throw new on({functionality:`File content part type ${l.mimeType} in user messages`})}}}})});break}case"assistant":{let l="",v=[];for(let _ of a)switch(_.type){case"text":{l+=_.text;break}case"redacted-reasoning":case"reasoning":break;case"tool-call":{v.push({id:_.toolCallId,type:"function",function:{name:_.toolName,arguments:JSON.stringify(_.args)}});break}default:{let b=_;throw new Error(`Unsupported part: ${b}`)}}if(e){if(v.length>1)throw new on({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});n.push({role:"assistant",content:l,function_call:v.length>0?v[0].function:void 0})}else n.push({role:"assistant",content:l,tool_calls:v.length>0?v:void 0});break}case"tool":{for(let l of a)e?n.push({role:"function",name:l.toolName,content:JSON.stringify(l.result)}):n.push({role:"tool",tool_call_id:l.toolCallId,content:JSON.stringify(l.result)});break}default:{let l=i;throw new Error(`Unsupported role: ${l}`)}}return n}function zN(t){var e,r;return(r=(e=t==null?void 0:t.content)==null?void 0:e.map(({token:n,logprob:i,top_logprobs:a})=>({token:n,logprob:i,topLogprobs:a?a.map(({token:l,logprob:v})=>({token:l,logprob:v})):[]})))!=null?r:void 0}function sw(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var nS=T.object({error:T.object({message:T.string(),type:T.string().nullish(),param:T.any().nullish(),code:T.union([T.string(),T.number()]).nullish()})}),O_=Jh({errorSchema:nS,errorToMessage:t=>t.error.message});function uw({id:t,model:e,created:r}){return{id:t??void 0,modelId:e??void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function DL({mode:t,useLegacyFunctionCalling:e=!1,structuredOutputs:r}){var n;let i=(n=t.tools)!=null&&n.length?t.tools:void 0,a=[];if(i==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};let l=t.toolChoice;if(e){let b=[];for(let U of i)U.type==="provider-defined"?a.push({type:"unsupported-tool",tool:U}):b.push({name:U.name,description:U.description,parameters:U.parameters});if(l==null)return{functions:b,function_call:void 0,toolWarnings:a};switch(l.type){case"auto":case"none":case void 0:return{functions:b,function_call:void 0,toolWarnings:a};case"required":throw new on({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:b,function_call:{name:l.toolName},toolWarnings:a}}}let v=[];for(let b of i)b.type==="provider-defined"?a.push({type:"unsupported-tool",tool:b}):v.push({type:"function",function:{name:b.name,description:b.description,parameters:b.parameters,strict:r?!0:void 0}});if(l==null)return{tools:v,tool_choice:void 0,toolWarnings:a};let _=l.type;switch(_){case"auto":case"none":case"required":return{tools:v,tool_choice:_,toolWarnings:a};case"tool":return{tools:v,tool_choice:{type:"function",function:{name:l.toolName}},toolWarnings:a};default:{let b=_;throw new on({functionality:`Unsupported tool choice type: ${b}`})}}}var RL=class{constructor(t,e,r){this.specificationVersion="v1",this.modelId=t,this.settings=e,this.config=r}get supportsStructuredOutputs(){var t;return(t=this.settings.structuredOutputs)!=null?t:rS(this.modelId)}get defaultObjectGenerationMode(){return kL(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:t,prompt:e,maxTokens:r,temperature:n,topP:i,topK:a,frequencyPenalty:l,presencePenalty:v,stopSequences:_,responseFormat:b,seed:C,providerMetadata:U}){var W,K,q,H,Z,ne,he,Ie;let _e=t.type,Ae=[];a!=null&&Ae.push({type:"unsupported-setting",setting:"topK"}),(b==null?void 0:b.type)==="json"&&b.schema!=null&&!this.supportsStructuredOutputs&&Ae.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let He=this.settings.useLegacyFunctionCalling;if(He&&this.settings.parallelToolCalls===!0)throw new on({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(He&&this.supportsStructuredOutputs)throw new on({functionality:"structuredOutputs with useLegacyFunctionCalling"});WN(this.modelId)==="remove"&&e.some(lt=>lt.role==="system")&&Ae.push({type:"other",message:"system messages are removed for this model"});let tt={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:r,temperature:n,top_p:i,frequency_penalty:l,presence_penalty:v,response_format:(b==null?void 0:b.type)==="json"?this.supportsStructuredOutputs&&b.schema!=null?{type:"json_schema",json_schema:{schema:b.schema,strict:!0,name:(W=b.name)!=null?W:"response",description:b.description}}:{type:"json_object"}:void 0,stop:_,seed:C,max_completion_tokens:(K=U==null?void 0:U.openai)==null?void 0:K.maxCompletionTokens,store:(q=U==null?void 0:U.openai)==null?void 0:q.store,metadata:(H=U==null?void 0:U.openai)==null?void 0:H.metadata,prediction:(Z=U==null?void 0:U.openai)==null?void 0:Z.prediction,reasoning_effort:(he=(ne=U==null?void 0:U.openai)==null?void 0:ne.reasoningEffort)!=null?he:this.settings.reasoningEffort,messages:xL({prompt:e,useLegacyFunctionCalling:He,systemMessageMode:WN(this.modelId)})};switch(rS(this.modelId)&&(tt.temperature!=null&&(tt.temperature=void 0,Ae.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),tt.top_p!=null&&(tt.top_p=void 0,Ae.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),tt.frequency_penalty!=null&&(tt.frequency_penalty=void 0,Ae.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),tt.presence_penalty!=null&&(tt.presence_penalty=void 0,Ae.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),tt.logit_bias!=null&&(tt.logit_bias=void 0,Ae.push({type:"other",message:"logitBias is not supported for reasoning models"})),tt.logprobs!=null&&(tt.logprobs=void 0,Ae.push({type:"other",message:"logprobs is not supported for reasoning models"})),tt.top_logprobs!=null&&(tt.top_logprobs=void 0,Ae.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),tt.max_tokens!=null&&(tt.max_completion_tokens==null&&(tt.max_completion_tokens=tt.max_tokens),tt.max_tokens=void 0)),_e){case"regular":{let{tools:lt,tool_choice:Rt,functions:zt,function_call:Rr,toolWarnings:cn}=DL({mode:t,useLegacyFunctionCalling:He,structuredOutputs:this.supportsStructuredOutputs});return{args:{...tt,tools:lt,tool_choice:Rt,functions:zt,function_call:Rr},warnings:[...Ae,...cn]}}case"object-json":return{args:{...tt,response_format:this.supportsStructuredOutputs&&t.schema!=null?{type:"json_schema",json_schema:{schema:t.schema,strict:!0,name:(Ie=t.name)!=null?Ie:"response",description:t.description}}:{type:"json_object"}},warnings:Ae};case"object-tool":return{args:He?{...tt,function_call:{name:t.tool.name},functions:[{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters}]}:{...tt,tool_choice:{type:"function",function:{name:t.tool.name}},tools:[{type:"function",function:{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:Ae};default:{let lt=_e;throw new Error(`Unsupported type: ${lt}`)}}}async doGenerate(t){var e,r,n,i,a,l,v,_;let{args:b,warnings:C}=this.getArgs(t),{responseHeaders:U,value:W}=await fo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Oo(this.config.headers(),t.headers),body:b,failedResponseHandler:O_,successfulResponseHandler:tl(OL),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:K,...q}=b,H=W.choices[0],Z=(e=W.usage)==null?void 0:e.completion_tokens_details,ne=(r=W.usage)==null?void 0:r.prompt_tokens_details,he={openai:{}};return(Z==null?void 0:Z.reasoning_tokens)!=null&&(he.openai.reasoningTokens=Z==null?void 0:Z.reasoning_tokens),(Z==null?void 0:Z.accepted_prediction_tokens)!=null&&(he.openai.acceptedPredictionTokens=Z==null?void 0:Z.accepted_prediction_tokens),(Z==null?void 0:Z.rejected_prediction_tokens)!=null&&(he.openai.rejectedPredictionTokens=Z==null?void 0:Z.rejected_prediction_tokens),(ne==null?void 0:ne.cached_tokens)!=null&&(he.openai.cachedPromptTokens=ne==null?void 0:ne.cached_tokens),{text:(n=H.message.content)!=null?n:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&H.message.function_call?[{toolCallType:"function",toolCallId:Zl(),toolName:H.message.function_call.name,args:H.message.function_call.arguments}]:(i=H.message.tool_calls)==null?void 0:i.map(Ie=>{var _e;return{toolCallType:"function",toolCallId:(_e=Ie.id)!=null?_e:Zl(),toolName:Ie.function.name,args:Ie.function.arguments}}),finishReason:sw(H.finish_reason),usage:{promptTokens:(l=(a=W.usage)==null?void 0:a.prompt_tokens)!=null?l:NaN,completionTokens:(_=(v=W.usage)==null?void 0:v.completion_tokens)!=null?_:NaN},rawCall:{rawPrompt:K,rawSettings:q},rawResponse:{headers:U},request:{body:JSON.stringify(b)},response:uw(W),warnings:C,logprobs:zN(H.logprobs),providerMetadata:he}}async doStream(t){if(this.settings.simulateStreaming){let H=await this.doGenerate(t);return{stream:new ReadableStream({start(ne){if(ne.enqueue({type:"response-metadata",...H.response}),H.text&&ne.enqueue({type:"text-delta",textDelta:H.text}),H.toolCalls)for(let he of H.toolCalls)ne.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:he.toolCallId,toolName:he.toolName,argsTextDelta:he.args}),ne.enqueue({type:"tool-call",...he});ne.enqueue({type:"finish",finishReason:H.finishReason,usage:H.usage,logprobs:H.logprobs,providerMetadata:H.providerMetadata}),ne.close()}}),rawCall:H.rawCall,rawResponse:H.rawResponse,warnings:H.warnings}}let{args:e,warnings:r}=this.getArgs(t),n={...e,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:i,value:a}=await fo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Oo(this.config.headers(),t.headers),body:n,failedResponseHandler:O_,successfulResponseHandler:vv(AL),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:l,...v}=e,_=[],b="unknown",C={promptTokens:void 0,completionTokens:void 0},U,W=!0,{useLegacyFunctionCalling:K}=this.settings,q={openai:{}};return{stream:a.pipeThrough(new TransformStream({transform(H,Z){var ne,he,Ie,_e,Ae,He,tt,lt,Rt,zt,Rr,cn;if(!H.success){b="error",Z.enqueue({type:"error",error:H.error});return}let jt=H.value;if("error"in jt){b="error",Z.enqueue({type:"error",error:jt.error});return}if(W&&(W=!1,Z.enqueue({type:"response-metadata",...uw(jt)})),jt.usage!=null){let{prompt_tokens:Le,completion_tokens:Zt,prompt_tokens_details:Wt,completion_tokens_details:Tt}=jt.usage;C={promptTokens:Le??void 0,completionTokens:Zt??void 0},(Tt==null?void 0:Tt.reasoning_tokens)!=null&&(q.openai.reasoningTokens=Tt==null?void 0:Tt.reasoning_tokens),(Tt==null?void 0:Tt.accepted_prediction_tokens)!=null&&(q.openai.acceptedPredictionTokens=Tt==null?void 0:Tt.accepted_prediction_tokens),(Tt==null?void 0:Tt.rejected_prediction_tokens)!=null&&(q.openai.rejectedPredictionTokens=Tt==null?void 0:Tt.rejected_prediction_tokens),(Wt==null?void 0:Wt.cached_tokens)!=null&&(q.openai.cachedPromptTokens=Wt==null?void 0:Wt.cached_tokens)}let Ht=jt.choices[0];if((Ht==null?void 0:Ht.finish_reason)!=null&&(b=sw(Ht.finish_reason)),(Ht==null?void 0:Ht.delta)==null)return;let qr=Ht.delta;qr.content!=null&&Z.enqueue({type:"text-delta",textDelta:qr.content});let rt=zN(Ht==null?void 0:Ht.logprobs);rt!=null&&rt.length&&(U===void 0&&(U=[]),U.push(...rt));let fn=K&&qr.function_call!=null?[{type:"function",id:Zl(),function:qr.function_call,index:0}]:qr.tool_calls;if(fn!=null)for(let Le of fn){let Zt=Le.index;if(_[Zt]==null){if(Le.type!=="function")throw new uh({data:Le,message:"Expected 'function' type."});if(Le.id==null)throw new uh({data:Le,message:"Expected 'id' to be a string."});if(((ne=Le.function)==null?void 0:ne.name)==null)throw new uh({data:Le,message:"Expected 'function.name' to be a string."});_[Zt]={id:Le.id,type:"function",function:{name:Le.function.name,arguments:(he=Le.function.arguments)!=null?he:""},hasFinished:!1};let Tt=_[Zt];((Ie=Tt.function)==null?void 0:Ie.name)!=null&&((_e=Tt.function)==null?void 0:_e.arguments)!=null&&(Tt.function.arguments.length>0&&Z.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Tt.id,toolName:Tt.function.name,argsTextDelta:Tt.function.arguments}),S_(Tt.function.arguments)&&(Z.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Ae=Tt.id)!=null?Ae:Zl(),toolName:Tt.function.name,args:Tt.function.arguments}),Tt.hasFinished=!0));continue}let Wt=_[Zt];Wt.hasFinished||(((He=Le.function)==null?void 0:He.arguments)!=null&&(Wt.function.arguments+=(lt=(tt=Le.function)==null?void 0:tt.arguments)!=null?lt:""),Z.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Wt.id,toolName:Wt.function.name,argsTextDelta:(Rt=Le.function.arguments)!=null?Rt:""}),((zt=Wt.function)==null?void 0:zt.name)!=null&&((Rr=Wt.function)==null?void 0:Rr.arguments)!=null&&S_(Wt.function.arguments)&&(Z.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(cn=Wt.id)!=null?cn:Zl(),toolName:Wt.function.name,args:Wt.function.arguments}),Wt.hasFinished=!0))}},flush(H){var Z,ne;H.enqueue({type:"finish",finishReason:b,logprobs:U,usage:{promptTokens:(Z=C.promptTokens)!=null?Z:NaN,completionTokens:(ne=C.completionTokens)!=null?ne:NaN},...q!=null?{providerMetadata:q}:{}})}})),rawCall:{rawPrompt:l,rawSettings:v},rawResponse:{headers:i},request:{body:JSON.stringify(n)},warnings:r}}},JN=T.object({prompt_tokens:T.number().nullish(),completion_tokens:T.number().nullish(),prompt_tokens_details:T.object({cached_tokens:T.number().nullish()}).nullish(),completion_tokens_details:T.object({reasoning_tokens:T.number().nullish(),accepted_prediction_tokens:T.number().nullish(),rejected_prediction_tokens:T.number().nullish()}).nullish()}).nullish(),OL=T.object({id:T.string().nullish(),created:T.number().nullish(),model:T.string().nullish(),choices:T.array(T.object({message:T.object({role:T.literal("assistant").nullish(),content:T.string().nullish(),function_call:T.object({arguments:T.string(),name:T.string()}).nullish(),tool_calls:T.array(T.object({id:T.string().nullish(),type:T.literal("function"),function:T.object({name:T.string(),arguments:T.string()})})).nullish()}),index:T.number(),logprobs:T.object({content:T.array(T.object({token:T.string(),logprob:T.number(),top_logprobs:T.array(T.object({token:T.string(),logprob:T.number()}))})).nullable()}).nullish(),finish_reason:T.string().nullish()})),usage:JN}),AL=T.union([T.object({id:T.string().nullish(),created:T.number().nullish(),model:T.string().nullish(),choices:T.array(T.object({delta:T.object({role:T.enum(["assistant"]).nullish(),content:T.string().nullish(),function_call:T.object({name:T.string().optional(),arguments:T.string().optional()}).nullish(),tool_calls:T.array(T.object({index:T.number(),id:T.string().nullish(),type:T.literal("function").optional(),function:T.object({name:T.string().nullish(),arguments:T.string().nullish()})})).nullish()}).nullish(),logprobs:T.object({content:T.array(T.object({token:T.string(),logprob:T.number(),top_logprobs:T.array(T.object({token:T.string(),logprob:T.number()}))})).nullable()}).nullish(),finish_reason:T.string().nullable().optional(),index:T.number()})),usage:JN}),nS]);function rS(t){return t==="o1"||t.startsWith("o1-")||t==="o3"||t.startsWith("o3-")}function kL(t){return t.startsWith("gpt-4o-audio-preview")}function WN(t){var e,r;return rS(t)?(r=(e=PL[t])==null?void 0:e.systemMessageMode)!=null?r:"developer":"system"}var PL={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"}};function LL({prompt:t,inputFormat:e,user:r="user",assistant:n="assistant"}){if(e==="prompt"&&t.length===1&&t[0].role==="user"&&t[0].content.length===1&&t[0].content[0].type==="text")return{prompt:t[0].content[0].text};let i="";t[0].role==="system"&&(i+=`${t[0].content}

`,t=t.slice(1));for(let{role:a,content:l}of t)switch(a){case"system":throw new pv({message:"Unexpected system message in prompt: ${content}",prompt:t});case"user":{let v=l.map(_=>{switch(_.type){case"text":return _.text;case"image":throw new on({functionality:"images"})}}).join("");i+=`${r}:
${v}

`;break}case"assistant":{let v=l.map(_=>{switch(_.type){case"text":return _.text;case"tool-call":throw new on({functionality:"tool-call messages"})}}).join("");i+=`${n}:
${v}

`;break}case"tool":throw new on({functionality:"tool messages"});default:{let v=a;throw new Error(`Unsupported role: ${v}`)}}return i+=`${n}:
`,{prompt:i,stopSequences:[`
${r}:`]}}function KN(t){return t==null?void 0:t.tokens.map((e,r)=>({token:e,logprob:t.token_logprobs[r],topLogprobs:t.top_logprobs?Object.entries(t.top_logprobs[r]).map(([n,i])=>({token:n,logprob:i})):[]}))}var ML=class{constructor(t,e,r){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=t,this.settings=e,this.config=r}get provider(){return this.config.provider}getArgs({mode:t,inputFormat:e,prompt:r,maxTokens:n,temperature:i,topP:a,topK:l,frequencyPenalty:v,presencePenalty:_,stopSequences:b,responseFormat:C,seed:U}){var W;let K=t.type,q=[];l!=null&&q.push({type:"unsupported-setting",setting:"topK"}),C!=null&&C.type!=="text"&&q.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:H,stopSequences:Z}=LL({prompt:r,inputFormat:e}),ne=[...Z??[],...b??[]],he={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:n,temperature:i,top_p:a,frequency_penalty:v,presence_penalty:_,seed:U,prompt:H,stop:ne.length>0?ne:void 0};switch(K){case"regular":{if((W=t.tools)!=null&&W.length)throw new on({functionality:"tools"});if(t.toolChoice)throw new on({functionality:"toolChoice"});return{args:he,warnings:q}}case"object-json":throw new on({functionality:"object-json mode"});case"object-tool":throw new on({functionality:"object-tool mode"});default:{let Ie=K;throw new Error(`Unsupported type: ${Ie}`)}}}async doGenerate(t){let{args:e,warnings:r}=this.getArgs(t),{responseHeaders:n,value:i}=await fo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Oo(this.config.headers(),t.headers),body:e,failedResponseHandler:O_,successfulResponseHandler:tl(FL),abortSignal:t.abortSignal,fetch:this.config.fetch}),{prompt:a,...l}=e,v=i.choices[0];return{text:v.text,usage:{promptTokens:i.usage.prompt_tokens,completionTokens:i.usage.completion_tokens},finishReason:sw(v.finish_reason),logprobs:KN(v.logprobs),rawCall:{rawPrompt:a,rawSettings:l},rawResponse:{headers:n},response:uw(i),warnings:r,request:{body:JSON.stringify(e)}}}async doStream(t){let{args:e,warnings:r}=this.getArgs(t),n={...e,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:i,value:a}=await fo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Oo(this.config.headers(),t.headers),body:n,failedResponseHandler:O_,successfulResponseHandler:vv(UL),abortSignal:t.abortSignal,fetch:this.config.fetch}),{prompt:l,...v}=e,_="unknown",b={promptTokens:Number.NaN,completionTokens:Number.NaN},C,U=!0;return{stream:a.pipeThrough(new TransformStream({transform(W,K){if(!W.success){_="error",K.enqueue({type:"error",error:W.error});return}let q=W.value;if("error"in q){_="error",K.enqueue({type:"error",error:q.error});return}U&&(U=!1,K.enqueue({type:"response-metadata",...uw(q)})),q.usage!=null&&(b={promptTokens:q.usage.prompt_tokens,completionTokens:q.usage.completion_tokens});let H=q.choices[0];(H==null?void 0:H.finish_reason)!=null&&(_=sw(H.finish_reason)),(H==null?void 0:H.text)!=null&&K.enqueue({type:"text-delta",textDelta:H.text});let Z=KN(H==null?void 0:H.logprobs);Z!=null&&Z.length&&(C===void 0&&(C=[]),C.push(...Z))},flush(W){W.enqueue({type:"finish",finishReason:_,logprobs:C,usage:b})}})),rawCall:{rawPrompt:l,rawSettings:v},rawResponse:{headers:i},warnings:r,request:{body:JSON.stringify(n)}}}},FL=T.object({id:T.string().nullish(),created:T.number().nullish(),model:T.string().nullish(),choices:T.array(T.object({text:T.string(),finish_reason:T.string(),logprobs:T.object({tokens:T.array(T.string()),token_logprobs:T.array(T.number()),top_logprobs:T.array(T.record(T.string(),T.number())).nullable()}).nullish()})),usage:T.object({prompt_tokens:T.number(),completion_tokens:T.number()})}),UL=T.union([T.object({id:T.string().nullish(),created:T.number().nullish(),model:T.string().nullish(),choices:T.array(T.object({text:T.string(),finish_reason:T.string().nullish(),index:T.number(),logprobs:T.object({tokens:T.array(T.string()),token_logprobs:T.array(T.number()),top_logprobs:T.array(T.record(T.string(),T.number())).nullable()}).nullish()})),usage:T.object({prompt_tokens:T.number(),completion_tokens:T.number()}).nullish()}),nS]),jL=class{constructor(t,e,r){this.specificationVersion="v1",this.modelId=t,this.settings=e,this.config=r}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var t;return(t=this.settings.maxEmbeddingsPerCall)!=null?t:2048}get supportsParallelCalls(){var t;return(t=this.settings.supportsParallelCalls)!=null?t:!0}async doEmbed({values:t,headers:e,abortSignal:r}){if(t.length>this.maxEmbeddingsPerCall)throw new K0({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});let{responseHeaders:n,value:i}=await fo({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Oo(this.config.headers(),e),body:{model:this.modelId,input:t,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:O_,successfulResponseHandler:tl(YL),abortSignal:r,fetch:this.config.fetch});return{embeddings:i.data.map(a=>a.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:n}}}},YL=T.object({data:T.array(T.object({embedding:T.array(T.number())})),usage:T.object({prompt_tokens:T.number()}).nullish()}),$L={"dall-e-3":1,"dall-e-2":10},BL=class{constructor(t,e,r){this.modelId=t,this.settings=e,this.config=r,this.specificationVersion="v1"}get maxImagesPerCall(){var t,e;return(e=(t=this.settings.maxImagesPerCall)!=null?t:$L[this.modelId])!=null?e:1}get provider(){return this.config.provider}async doGenerate({prompt:t,n:e,size:r,aspectRatio:n,seed:i,providerOptions:a,headers:l,abortSignal:v}){var _,b,C,U;let W=[];n!=null&&W.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),i!=null&&W.push({type:"unsupported-setting",setting:"seed"});let K=(C=(b=(_=this.config._internal)==null?void 0:_.currentDate)==null?void 0:b.call(_))!=null?C:new Date,{value:q,responseHeaders:H}=await fo({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Oo(this.config.headers(),l),body:{model:this.modelId,prompt:t,n:e,size:r,...(U=a.openai)!=null?U:{},response_format:"b64_json"},failedResponseHandler:O_,successfulResponseHandler:tl(qL),abortSignal:v,fetch:this.config.fetch});return{images:q.data.map(Z=>Z.b64_json),warnings:W,response:{timestamp:K,modelId:this.modelId,headers:H}}}},qL=T.object({data:T.array(T.object({b64_json:T.string()}))});function iS(t={}){var e,r,n;let i=(e=Zh(t.baseURL))!=null?e:"https://api.openai.com/v1",a=(r=t.compatibility)!=null?r:"compatible",l=(n=t.name)!=null?n:"openai",v=()=>({Authorization:`Bearer ${Kh({apiKey:t.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":t.organization,"OpenAI-Project":t.project,...t.headers}),_=(q,H={})=>new RL(q,H,{provider:`${l}.chat`,url:({path:Z})=>`${i}${Z}`,headers:v,compatibility:a,fetch:t.fetch}),b=(q,H={})=>new ML(q,H,{provider:`${l}.completion`,url:({path:Z})=>`${i}${Z}`,headers:v,compatibility:a,fetch:t.fetch}),C=(q,H={})=>new jL(q,H,{provider:`${l}.embedding`,url:({path:Z})=>`${i}${Z}`,headers:v,fetch:t.fetch}),U=(q,H={})=>new BL(q,H,{provider:`${l}.image`,url:({path:Z})=>`${i}${Z}`,headers:v,fetch:t.fetch}),W=(q,H)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return q==="gpt-3.5-turbo-instruct"?b(q,H):_(q,H)},K=function(q,H){return W(q,H)};return K.languageModel=W,K.chat=_,K.completion=b,K.embedding=C,K.textEmbedding=C,K.textEmbeddingModel=C,K.image=U,K.imageModel=U,K}var aq=iS({compatibility:"strict"});var po=require("vscode");var HL=["rate limit exceeded","net::err","check your network connection","check your firewall","request failed","400 bad request","server error","error on conversation request","response contained no choices","response got filtered"];function GL({role:t,content:e}){switch(t){case"system":return po.LanguageModelChatMessage.User(e);case"user":let r=e.map(a=>{switch(a.type){case"text":return new po.LanguageModelTextPart(a.text);case"image":throw new Error("Image content not supported");case"file":throw new Error("File content not supported")}});return po.LanguageModelChatMessage.User(r);case"tool":let n=e.map(a=>{switch(a.type){case"tool-result":let l=typeof a.result=="string"?a.result:JSON.stringify(a.result);return new po.LanguageModelToolResultPart(a.toolCallId,[new po.LanguageModelTextPart(l)])}});return po.LanguageModelChatMessage.User(n);case"assistant":let i=e.map(a=>{switch(a.type){case"text":return new po.LanguageModelTextPart(a.text);case"tool-call":return new po.LanguageModelToolCallPart(a.toolCallId,a.toolName,a.args)}});return po.LanguageModelChatMessage.Assistant(i)}}function VL(t){switch(t.type){case"function":return{name:t.name,description:t.description,inputSchema:t.parameters};case"provider-defined":throw new Error("Provider-defined tools not supported")}}function zL(t){let e=String(t.message).toLowerCase();for(let r of HL)if(e.includes(r))return!0;return!1}var aS=class{specificationVersion="v1";defaultObjectGenerationMode="json";provider="copilot";supportsImageUrls=!1;constructor(e,r,n){this.modelId=e,this.settings=r,this.config=n}async doGenerate(e){throw new Error("Not implemented")}async doStream(e){var K;let[r]=await po.lm.selectChatModels({family:this.modelId,vendor:"copilot"});if(!r)throw new Error("Model not found: "+this.modelId);let{prompt:n,abortSignal:i,mode:a}=e,l=i.session,{token:v}=l;if(a.type!=="regular")throw new Error("Request mode not supported: "+a.type);let _=n.map(GL),b=(K=a.tools)==null?void 0:K.map(VL),C=n.slice(-1)[0],U=!1;if(C.role=="tool")if(C.content[0].result=="stop")U=!0;else{let q=new po.LanguageModelTextPart("Should I process the last tool result now?"),H=new po.LanguageModelTextPart("Yes");_.push(po.LanguageModelChatMessage.Assistant([q])),_.push(po.LanguageModelChatMessage.User([H]))}return{stream:new ReadableStream({async start(q){let H=0;if(U){q.enqueue({type:"text-delta",textDelta:`

`}),q.close();return}for(;;){try{if(v.isCancellationRequested){q.close();return}let Z=await r.sendRequest(_,{tools:b,modelOptions:{temperature:e.temperature,max_tokens:e.maxTokens}},v);for await(let ne of Z.stream){if(v.isCancellationRequested)break;ne instanceof po.LanguageModelTextPart?q.enqueue({type:"text-delta",textDelta:ne.value}):ne instanceof po.LanguageModelToolCallPart?q.enqueue({type:"tool-call",toolCallType:"function",toolCallId:ne.callId,toolName:ne.name,args:JSON.stringify(ne.input)}):q.error(new Error("Unknown content format"))}q.close();return}catch(Z){if(v.isCancellationRequested){q.close();return}if(!zL(Z)||++H>5){q.error(Z);return}q.enqueue({type:"error",error:{event:"retry",count:H,message:Z.message||String(Z),cause:Z}}),String(Z.message).toLowerCase().includes("rate limit exceeded")&&await __(30,v)}await __(5*H,v)}}}),rawCall:{rawPrompt:"",rawSettings:{}}}}};function ZN(t){let e=(n,i={})=>new aS(n,i,{provider:"copilot"}),r=function(n,i={}){return e(n,i)};return r.chat=e,r}var WL={anthropic:Xb,deepseek:Qb,google:tS,openai:iS,copilot:ZN},XN={};function oS({id:t,provider:e,apiKey:r}){let n=XN[e];if(!n){let i=WL[e];if(!i)throw new Error("Unknown provider: "+e);n=i({apiKey:r}),XN[e]=n}return n(t)}var sS=[{provider:"anthropic",family:"claude-3.5-sonnet",id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet"},{provider:"anthropic",family:"claude-3.7-sonnet",id:"claude-3-7-sonnet-20250219",name:"Claude 3.7 Sonnet"},{provider:"anthropic",family:"claude-3.7-sonnet-thought",id:"claude-3-7-sonnet-20250219",name:"Claude 3.7 Sonnet Thinking"},{provider:"deepseek",family:"deepseek-chat",id:"deepseek-chat",name:"DeepSeek V3"},{provider:"google",family:"gemini-2.0-flash",id:"gemini-2.0-flash-001",name:"Gemini 2.0 Flash"},{provider:"openai",family:"gpt-4o",id:"gpt-4o-2024-11-20",name:"GPT 4o"},{provider:"openai",family:"o3-mini",id:"o3-mini-2025-01-31",name:"o3-mini"},{provider:"openrouter",family:"claude-3.5-sonnet",id:"anthropic/claude-3.5-sonnet:beta",name:"Claude 3.5 Sonnet"},{provider:"openrouter",family:"gpt-4o",id:"openai/gpt-4o-2024-08-06",name:"GPT 4o"}];var QN=[{id:"anthropic",name:"Anthropic",envKeyName:"ANTHROPIC_API_KEY",website:"https://console.anthropic.com"},{id:"google",name:"Google AI",envKeyName:"GOOGLE_GENERATIVE_AI_API_KEY",website:"https://aistudio.google.com"},{id:"deepseek",name:"DeepSeek",envKeyName:"DEEPSEEK_API_KEY",website:"https://platform.deepseek.com"},{id:"openai",name:"OpenAI",envKeyName:"OPENAI_API_KEY",website:"https://platform.openai.com"},{id:"openrouter",name:"Open Router",envKeyName:"OPENROUTER_API_KEY",website:"https://openrouter.ai"}];var Jg=require("vscode");function Ta(t,e={depth:2}){switch(typeof t){case"undefined":return"";case"number":return String(t);case"string":return t;case"function":return Ta(t(e),e);case"object":let r=[];return Array.isArray(t)?r=t.map(n=>Ta(n,e)).filter(n=>!!n):r=Object.entries(t).map(([n,i])=>{let a="#".repeat(e.depth),l=Ta(i,{depth:e.depth+1});return l&&`${a} ${n}

`+l}),r.join(`

`)}}var nr=function(t,...e){let r=C=>/^\s*$/.test(C),n=C=>C.match(/^\s*/)[0].length,i=t.map(C=>C.split(`
`)),a=100;i.forEach(C=>{C.slice(1).forEach(U=>{r(U)||(a=Math.min(a,n(U)))})});let l=C=>C[0],v=C=>C[C.length-1],_=C=>!r(v(i[C]))||!r(l(i[C+1])),b=[];return i.forEach((C,U)=>{let W=C.slice();if(a<100)for(let q=1;q<W.length;q++)W[q]=C[q].slice(a);if(U==0||!_(U-1))for(;W.length&&r(W[0]);)W.shift();if(U==i.length-1||!_(U))for(;W.length&&r(W[W.length-1]);)W.pop();let K=W.join(`
`);if(U==0)b.push(K);else{let q=e[U-1]??"";if(typeof q=="object"||typeof q=="function"){if(_(U-1))throw new Error("Markdown inline value not supported");b.push(q),b.push(K)}else{let H=b.pop();_(U-1)||(H&&(q=`

`+q),K&&(q=q+`

`),q==`



`&&(q=`

`)),b.push(H+q+K)}}}),b.length==1?b[0]:b};function Ao(t,e="- ",r="",n=`
`,i=": "){return a=>Array.isArray(t)?t.map(l=>e+Ta(l,a)+r).join(n):Object.entries(t).map(([l,v])=>e+l+i+Ta(v,a)+r).join(n)}function hi(t,e){return r=>{let n=Ta(e,r);return n?`<${t}>
`+n+`
</${t}>`:""}}function eC(t,e){return r=>{let n=Ta(t,r);return n||e}}var Oq=require("vscode");async function tg(t,e=!1){let r=Jc(t),n={path:r},i=await Vh(t),a=[];return n.lines=i.split(`
`).length,n.status="ok",a.push(hi("file_metadata",Ao(n))),e||a.push(hi("file_content",i)),Ta(a)}async function ym(t,e=!1){let r=Jc(t),n=[],i=[],a={path:r},l=[];for(let{name:v,isFile:_,isDirectory:b}of await P0(t))_?i.push(v):b&&n.push(v+"/");if(a["sub-directories"]=n.length,a.files=i.length,a.status="ok",l.push(hi("directory_metadata",Ao(a))),!e){let v=[].concat(n,i);l.push(eC(hi("directory_content",v),"Directory is empty."))}return Ta(l)}var tC=require("vscode");async function rC(t,e,r,n=!1){let i=Jc(t),a={path:i,name:e},l=[];if(a.start=`Ln ${r.start.line+1}, Col ${r.start.character+1}`,a.end=`Ln ${r.end.line+1}, Col ${r.end.character+1}`,a.lines=r.start.line-r.end.line+1,l.push(hi("symbol_metadata",Ao(a))),!n){let v=await tC.workspace.openTextDocument(t),_=v.getText(r);l.push(hi("symbol_content",_))}return Ta(l)}var nC=require("vscode");async function A_(t,e=!1){let r=Jc(t),n={path:r},i=await Vh(t),a=[],l=[],v=await nC.commands.executeCommand("vscode.executeDocumentSymbolProvider",t);function _(b){var C;a.push(b.name),(C=b.children)==null||C.forEach(_)}if(v&&v.length>0){let b=v[0];b.name.startsWith("# ")&&(n.title=b.name.slice(2)),v.forEach(_)}return n.lines=i.split(`
`).length,n.status="ok",l.push(hi("document_metadata",Ao(n))),a.length&&l.push(hi("document_outline",Ao(a,"","",`

`))),e||l.push(hi("document_content",i)),Ta(l)}var iC=require("vscode");async function aC(){let{activeTextEditor:t}=iC.window,{document:e,selection:r}=t||{},n="",i=[];if(!t)return"No files are currently open in the editor.";let a={path:Jc(t.document.uri)};return r.isEmpty||(n=e.getText(r),a.selection=`${r.end.line-r.start.line+1} line(s)`),i.push(hi("active_text_editor",Ao(a))),i.push(hi("active_selection",n)),Ta(i)}var KL="multicoder_sourcecode",JL=nr`
    Read and analyze source code files in the project

    Commands:
    - /stat: checks if the specified path exists and returns basic information about it
    - /read: returns the content of a file or directory at the given path
`,oC=T.object({command:T.enum(["stat","read"]).describe("Command"),path:T.string().describe("File or directory path")}),ZL="Looking at the source files ...";function XL(t,e){let r=t.path[0];if(t.code=="invalid_enum_value"&&r=="command"&&String(t.received).startsWith("/")){let n=oC.shape.command.enum[String(t.received).slice(1)];if(n)return{command:n}}}async function QL({command:t,path:e},{id:r,log:n,stream:i}){let a=e.split("/").pop();n.info(a,{command:t,event:`tool.sourcecode.${t}`});let l=Ni(e,r);return await mm(l)?await ym(l,t=="stat"):await Zc(l)?(t!=="stat"&&i.reference(Kl(l)),await tg(l,t=="stat")):(t!=="stat"&&n.warn("[sourcecode] Path does not exist - "+a,{command:t}),"Error: Path does not exist - "+e)}var lw={name:KL,description:JL,parameters:oC,execute:QL,progress:ZL,repair:XL};var eM="multicoder_documents",tM=nr`
    Read task-related documentation files

    Commands:
    - /stat: checks if the specified documentation path exists and returns basic information about it
    - /read: returns the content of a documentation file or directory at the given path
`,sC=T.object({command:T.enum(["stat","read"]).describe("Command"),path:T.string().describe("File or directory path")}),rM="Looking at the available documents ...";function nM(t,e){let r=t.path[0];if(t.code=="invalid_enum_value"&&r=="command"&&String(t.received).startsWith("/")){let n=sC.shape.command.enum[String(t.received).slice(1)];if(n)return{command:n}}}async function iM({command:t,path:e},{id:r,log:n,stream:i}){let a=e.split("/").pop(),l=Ni(e,r);return n.info(a,{command:t,event:`tool.documents.${t}`}),await mm(l)?await ym(l,t=="stat"):await Zc(l)?(t!=="stat"&&!e.startsWith(".multicoder")&&i.reference(Kl(l)),await A_(l,t=="stat")):(t!=="stat"&&n.warn("[documents] Path does not exist - "+a,{command:t}),"Error: Path does not exist - "+e)}var cw={name:eM,description:tM,parameters:sC,execute:iM,progress:rM,repair:nM};var lS=require("vscode");var zg=require("vscode");var as=require("vscode");async function uC(t,e){var C,U,W;let r=t.task,n=null;for(;r&&!n;)n=r.edits.find(K=>K.id==e),r=r.parent;if(!n)return;let i=new as.WorkspaceEdit,a=Kl(Ni(n.path,t.id));await Zc(a)||(a=a.with({scheme:"untitled"}));let l=await as.workspace.openTextDocument(a),v=l.getText().replace(/\r\n/g,`
`),_=v==n.after.replace(/\r\n/g,`
`)?n.before:n.after,b=new as.Range(new as.Position(0,0),new as.Position(l.lineCount,0));i.replace(a,b,_),await as.workspace.applyEdit(i),((W=(U=(C=as.window.activeTextEditor)==null?void 0:C.document)==null?void 0:U.uri)==null?void 0:W.path)!=a.path&&await as.window.showTextDocument(l),aM(n.search)}function aM(t){var _;let e=as.window.activeTextEditor,r=e==null?void 0:e.document,n=(_=r==null?void 0:r.getText())==null?void 0:_.replace(/\r\n/g,`
`);if(!t||!e||!r)return;let i=n.indexOf(t);if(i==-1)return;let a=n.slice(0,i).split(`
`).length-1,l=t.split(`
`).length,v=new as.Position(a,0);e.selection=new as.Selection(v,v),e.revealRange(new as.Range(v,new as.Position(a+l,0)))}function lC(t,e,r,n,i,a,l){let{stream:v}=t;if(a.startsWith(".multicoder"))return oM(t,v,i,a);let _=new zg.MarkdownString(`

`),b=t.id,C=encodeURIComponent(JSON.stringify([a,r,b])),U=`command:multicoder.diffView?${C}`,W=Z=>`<span class="codicon codicon-${Z}" style="color:var(--vscode-textLink-foreground);"></span>`;_.supportThemeIcons=!0,_.isTrusted={enabledCommands:["multicoder.diffView"]},_.supportHtml=!0,_.appendMarkdown(`[${W("diff-single")} ${n} (${a})](${U} 'Open Diff')`),_.appendCodeblock(i,l),v.markdown(_);let K=e=="create"?"Create":"Apply",q=e=="create"?"create file":"apply changes";v.button({title:K,command:"multicoder.action",arguments:[H],tooltip:`Click to ${q}, click again to revert`});function H(){let Z=a.split("/").pop();t.log.info(Z,{event:"action."+K.toLowerCase()}),uC(t,r)}}function oM(t,e,r,n){r=r.replace(/^#/gm,"##");let i=new zg.MarkdownString(`

`);i.supportHtml=!0,i.appendMarkdown(r),e.markdown(i),e.button({title:"Edit",command:"multicoder.action",arguments:[a],tooltip:"Click to edit the document"});async function a(){let l=Ni(n,t.id),v=await zg.workspace.openTextDocument(l),_=n.split("/").pop();zg.window.showTextDocument(v),t.log.info(_,{event:"action.edit"})}}var cC="multicoder_followups",sM=nr`
    Displays followup actions to the user at the end of the conversation turn.
`,uM=nr`
    Using ${cC} tool reply with a list of followup actions.
`,lM=T.object({actions:T.array(T.string()).describe("Short followup actions (5-10 words)")}),cM=()=>({actions:[]});function fM(t,{actions:e}){if(t.code=="invalid_type"){let r=t.path[0];if(t.received=="string"&&r=="actions")return{actions:String(e).split(`
`)}}}async function dM({actions:t},e){let r=e.request.command=="chat"?"chat":"";return e.log.info(`${t==null?void 0:t.length} options`,{actions:t,event:"tool.followups"}),e.followups=t.map(n=>({command:r,prompt:n.replace(/^-\s+/,"")})),"stop"}var $a={name:cC,description:sM,parameters:lM,execute:dM,retry:uM,fallback:cM,repair:fM};var fC="multicoder_summary",pM=nr`
    Shows summary, explanations or walkthrough section at the end of the response or after each task step.
    Allows the user to see the progress of completing the task.
    Always use this tool at the end of each step or when the task is finished.
`,mM=nr`
    Using ${fC} tool reply with a short summary of what has been done for the current step or task.
`,vM=T.object({text:T.string().describe("Short walkthrough or summary of this step")}),hM=()=>({text:"Task completed"});async function gM({text:t},{log:e,stream:r}){return e.info(`${t.slice(0,60).replace(/\n/g," ")}...`,{summary:t,event:"tool.summary"}),r.markdown(`

`+t+`

`),`This is the end of the response. Use ${$a.name} tool to suggest the next actions.`}var si={name:fC,description:pM,parameters:vM,execute:gM,retry:mM,fallback:hM};var _M="multicoder_editor",yM=nr`
    Create and modify source files or documents

    Usage:
    - To add new content always use /insert or /append
    - To change more than half of the file use /update
    - To replace part of the file use /replace
    - To delete part of the file, use /replace with empty content
    - Split large edits into multiple small ones

    Important:
    - Selection must be unique within file, select 3 lines or more to avoid ambiguity
`,wM=nr`
    Editing operation to execute with the given selection and content:
    - /create: creates a new file with the specified content
    - /update: updates the entire file
    - /insert: inserts new content before selection
    - /append: adds new content after selection
    - /replace: replaces selection with new content
`,bM=nr`
    Provide exact text including whitespace:
    - For /create and /update: use empty string ("") 
    - For /insert: at least 3 full lines immediately following new content, no overlap
    - For /append: at least 3 full lines immediately preceding new content, no overlap
`,pC=T.object({command:T.enum(["create","insert","append","replace","update"]).describe(wM),path:T.string().describe("File path"),select:T.string().describe(bM),content:T.string().describe("New content"),summary:T.string().describe("A very short (3-10 words) summary of this change")}),SM="Writing code ...";function EM(t,{command:e,path:r,summary:n}){let i=t.path[0];if(t.code=="invalid_enum_value"&&i=="command"&&String(t.received).startsWith("/")){let a=pC.shape.command.enum[String(t.received).slice(1)];if(a)return{command:a}}if(t.code=="invalid_type"&&t.received=="undefined"){if(i=="command"&&String(n).startsWith("Create"))return{command:"create"};if(i=="command"&&String(n).startsWith("Update"))return{command:"update"};if(i=="select")return{select:""};if(i=="summary")return{summary:`${e} ${r}`}}}var uS={spec:1,design:1,plan:1};async function TM(t,e){let{path:r,command:n,select:i}=t,{task:a}=e;if(a.activity in uS&&!r.startsWith(".multicoder"))return"Error: cannot modify source code yet. At this point you should only work on task documents.";let{error:l}=await mC(t,e);return i&&i.split(`
`).length<2&&n!="insert"&&(r.endsWith(".md")?l="Selection is too small, use the full section text":l="Selection is too small, provide at least 3-5 lines"),l?"Tool error: "+l:"ok"}async function mC({path:t,command:e,select:r,content:n},i){let a=Ni(t,i.id),l=null,v=null,_=n;if(await Zc(a)){if(e==="create")return{error:"File already exists: "+t}}else if(e!=="create")return{error:"File not found: "+t};switch(e=="insert"&&n.endsWith(r)&&(n=n.replace(r,"")),e=="update"&&r&&(r=""),e){case"insert":case"append":case"replace":case"update":if(l=await lS.workspace.openTextDocument(a),v=await Vh(a),_=xM(v,r,n,l.eol,e),typeof _=="object")return _}return{document:l,before:v,after:_}}async function IM(t,e,r){let{path:n,summary:i,command:a,select:l,content:v}=t,{log:_,task:b}=e,C=Ni(n,e.id),U=n.split("/").pop();if(r!="ok")return b.activity in uS&&!n.startsWith(".multicoder")&&_.warn(`[workflow] Code not allowed: ${i}`,{filename:U,command:a,summary:i}),r;let{document:W,before:K,after:q,error:H}=await mC(t,e);if(H)return H;let Z=tt=>tt?tt.split(`
`).length:0,ne=Z(l),he=Z(v);_.info(i,{filename:U,command:a,selectedLines:ne,contentLines:he,event:`tool.editor.${a}`});try{await k0(C,q)}catch(tt){throw _.warn("Cannot write file - "+tt.message,{filename:U,command:a,summary:i,...tt}),tt}W=await lS.workspace.openTextDocument(C);let Ie=W.languageId,_e=O0();n.startsWith(".multicoder")||b.edits.push({id:_e,summary:i,path:n,before:K,after:q,search:v}),lC(e,a,_e,i,v||l,n,Ie),await NM(.1);let Ae="";n.endsWith(".md")?Ae=await A_(C,!0):Ae=await tg(C,!0);let He=a=="create"?"created":"modified";return b.activity in uS?Ae+`

Document ${He}. Provide a very short summary using ${si.name} tool`:Ae+`

File ${n} ${He} successfully.`}async function NM(t){return new Promise(e=>setTimeout(e,t*1e3))}function CM(t){return/^\s*\/\//.test(t)||/^\s*\/\*/.test(t)}function dC(t,e){let r=CM(t)?"":`
`;return t.endsWith(`
`)&&e.startsWith(`
`)?t+e:t.endsWith(`
`)||e.startsWith(`
`)?t+r+e:t+r+`
`+e}function xM(t,e,r,n,i){let a=t.replace(/\r\n/g,`
`);if(i=="update"&&a==r)return{error:"The new content is the same as the original file. No changes were made."};if(i=="replace"&&e==r)return{error:"The new content is the same as the selection. No changes were made."};e||(e=a),(a+`
`).endsWith(e)&&(a+=`
`),i=="insert"&&(r=dC(r,e)),i=="append"&&(r=dC(e,r));let l=a.replace(e,r);return a==l?{error:"The selected text cannot be found in the current file. Did you provide exact full consecutive lines including whitespace?"}:(n==2&&(l=l.replace(/\n/g,`\r
`)),l)}var fp={name:_M,description:yM,parameters:pC,execute:TM,finalize:IM,progress:SM,repair:EM};var vC=require("vscode");var{fs:cS}=vC.workspace,DM="multicoder_filesystem",RM=nr`
    Manage files and directories
`,OM=nr`
    Commands:
    - /create: creates a new directory at the specified path.
    - /delete: deletes a file or directory at the specified path (recursive)
`,AM=nr`
    File or directory path:
    - use full path, not just a filename
    - directory path MUST end with '/' (slash)
`,hC=T.object({command:T.enum(["create","delete"]).describe(OM),path:T.string().describe(AM)}),kM="Working with files ...";function PM(t,e){let r=t.path[0];if(t.code=="invalid_enum_value"&&r=="command"&&String(t.received).startsWith("/")){let n=hC.shape.command.enum[String(t.received).slice(1)];if(n)return{command:n}}}async function LM({command:t,path:e},{id:r,log:n}){let i=e.replace(/\/$/,"").split("/").pop(),a=Ni(e,r);switch(n.info(i,{command:t,event:`tool.filesystem.${t}`}),t){case"create":return e.endsWith("/")?await mm(a)?"Tool error: directory already exists.":(await cS.createDirectory(a),`Directory created - ${e}`):`Tool error: directory path must end with a slash (/). To create a file use ${fp.name} tool.`;case"delete":return await mm(a)?(await cS.delete(a,{recursive:!0}),`Directory deleted - ${e}`):await Zc(a)?(await cS.delete(a),`File deleted - ${e}`):`Tool error: File or directory does not exist - ${e}`}}var fw={name:DM,description:RM,parameters:hC,execute:LM,progress:kM,repair:PM};var MM="multicoder_question",FM=nr`
    Ask a single focused question to collect missing information from the user.

    Purpose:
    - Gather specific information needed to proceed with a task
    - Resolve ambiguity in user requests
    - Guide user through decisions with clear options

    Usage guidelines:
    - Collect all necessary information step-by-step, use this tool up to 10 times if needed
    - Limit choices to 3-7 options for optimal readability
    - Avoid open-ended questions - provide concrete choices
    - Always provide most appropriate and useful default value

    Examples:
    - Yes/No decisions: "Should this function handle null values?"
    - Multiple choice: "Which HTTP method should this endpoint use?"
    - Technology selection: "Which database type best fits these requirements?"
`,UM="The main question text to display to the user. Should be clear, specific and end with question mark.",jM="Additional explanation, background information, or guidance to help user make an informed choice.",YM="List of possible answers the user can select from. Each choice should be distinct and meaningful.",$M="When true, user can select multiple choices. When false, only single choice is allowed.",BM="Pre-selected choice(s) shown initially. Must be one of the provided choices or comma-separated list.",qM=T.object({text:T.string().describe(UM),context:T.string().max(2e3).describe(jM),choices:T.array(T.string()).describe(YM),allowMultiple:T.boolean().describe($M),defaultValue:T.string().describe(BM)}),HM="Preparing questions ...";function GM(t,{choices:e}){if(t.code=="invalid_type"){let r=t.path[0];if(t.received=="undefined"){if(r=="allowMultiple")return{allowMultiple:!1};if(r=="defaultValue"&&Array.isArray(e)&&e.length>0)return{defaultValue:e[0]}}}}var fS=[];async function VM(t,e){return t.defaultValue||"No answer"}async function zM({text:t,context:e,choices:r,allowMultiple:n,defaultValue:i},a,l){let v=[],{log:_,stream:b}=a,C=i||"No answer";for(_.info(t,{choices:r,context:e,allowMultiple:n,defaultValue:i,event:"tool.question"});;){if(b.markdown(WM(t,e)),n&&v.length?b.markdown(KM(v)):b.markdown(`

(`+C+`)

`),a.auto)return C;let U=JM(r,v,n),W=await dS(a,{followups:U});if(n){if(!W.prompt)return C=v.length?v.join(", "):C,fS.push({question:t,answer:C}),C}else return C=W.prompt||C,fS.push({question:t,answer:C}),C;v.push(W.prompt)}}var WM=(t,e)=>`

---
Q: **${t}**

${e}
`,KM=t=>`
${t.map(e=>`
- ${e}`)}
`;function JM(t,e,r){let n=[];return t.forEach(i=>{e.indexOf(i)==-1&&!/please/i.test(i)&&n.push({command:"",prompt:i})}),r&&n.push({command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"}),n}var k_={name:MM,description:FM,parameters:qM,execute:VM,finalize:zM,progress:HM,repair:GM,latest:fS};var gC="multicoder_evaluation",ZM=nr`
    Reports the evaluation results. Use this tool when requested to evaluate the next step or task.

    Evaluate the next step for 
    - lack of clarity (ambiguity, incompleteness, imprecision),
    - complexity (functional scope, architectural scale, expertise required)
    - workload (amount of code, projected effort, budget estimate)

    Carefully choose the most appropriate level for each evaluated dimension.
`,XM=nr`
    Using ${gC} tool reply with an evaluation of the next step for lack of clarity, complexity and workload.
`,QM=nr`
    Ambiguity:
        0 - n/a
        1 - very low
        2 - low
        3 - medium
        4 - high
        5 - very high
`,eF=nr`
    Incompleteness:
        0 - n/a
        1 - very low
        2 - low
        3 - medium
        4 - high
        5 - very high
`,tF=nr`
    Imprecision:
        0 - n/a
        1 - very low
        2 - low
        3 - medium
        4 - high
        5 - very high
`,rF=nr`
    Functional scope:
        0 - n/a
        1 - implementation details, simple bugfix, code formatting
        2 - user story, issue, enhancement, complex bugfix
        3 - product feature, architectural refactoring
        4 - epic, application, library, subsystem
        5 - full product, platform, framework
`,nF=nr`
    Architectural scale:
        0 - n/a
        1 - code level (local scope): variable naming, control flow, error handling
        2 - component level (single module): classes, functions, state management, data structures
        3 - service level (multiple modules): APIs, database models, service integrations
        4 - application level (system-wide): application architecture, system design
        5 - enterprise level (cross-system): distributed systems, cloud infrastructure, scalability
`,iF=nr`
    Software development expertise required:
        0 - n/a
        1 - junior (1 year)
        2 - mid (1-3 years)
        3 - senior (3-5 years)
        4 - staff (5-10 years)
        5 - principal (10+) years
`,aF=nr`
    Volume of sourcecode changes, lines of code (LoC):
        0 - n/a
        1 - 20-50 LoC, small change
        2 - 100-200 LoC, single commit
        3 - 500-1000 LoC, multiple commits, single pull request (PR)
        4 - 2000-5000 LoC, multiple PRs, dedicated branch, small repository
        5 - above 10000 LoC, large repository or multiple repositories
`,oF=nr`
    Projected effort:
        0 - n/a
        1 - minutes
        2 - hours
        3 - days
        4 - weeks
        5 - months
`,sF=nr`
    Development budget estimate:
        0 - n/a
        1 - very low
        2 - $20-200
        3 - $200-2000
        4 - $2000-20000
        5 - above $20000
`,uF=nr`
    true if task requirements need further clarification or refinement
`,lF=nr`
    true if solution is not trivial and will benefit from detailed design
`,cF=nr`
    true to split the task into smaller, manageable steps
`,fF=T.object({ambiguity:T.number().describe(QM),incompleteness:T.number().describe(eF),imprecision:T.number().describe(tF),functional:T.number().describe(rF),architectural:T.number().describe(nF),expertise:T.number().describe(iF),sourcecode:T.number().describe(aF),effort:T.number().describe(oF),budget:T.number().describe(sF),requirements:T.boolean().describe(uF),design:T.boolean().describe(lF),planning:T.boolean().describe(cF)}),dF=()=>({ambiguity:1,incompleteness:1,imprecision:1,functional:1,architectural:1,expertise:1,sourcecode:1,effort:1,budget:1,requirements:!1,design:!1,planning:!1});function pF(t,{effort:e,budget:r}){if(t.code=="invalid_type"){let n=t.path[0];if(t.received=="undefined"&&n=="sourcecode"&&(e||r))return{sourcecode:e||r}}}async function mF(t,{log:e}){let r=_=>_.toFixed(1),[n,i,a]=_C(t),l=`${r(n)} ${r(i)} ${r(a)} `,v=`${t.requirements} ${t.design} ${t.planning}`;return e.info(l+v,{vagueness:n,complexity:i,workload:a,...t,event:"tool.evaluation"}),"ok"}function _C(t){let e=(t.ambiguity+t.incompleteness+t.imprecision)/3,r=(t.architectural+t.functional+t.expertise)/3,n=(t.effort+t.sourcecode+t.budget)/3;return[e,r,n]}var rg={name:gC,description:ZM,parameters:fF,execute:mF,retry:XM,fallback:dF,repair:pF,compute:_C};var wC=Symbol("Let zodToJsonSchema decide on which parser to use");var yC={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},bC=t=>typeof t=="string"?{...yC,name:t}:{...yC,...t};var SC=t=>{let e=bC(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}};function pS(t,e,r,n){n!=null&&n.errorMessages&&r&&(t.errorMessage={...t.errorMessage,[e]:r})}function yn(t,e,r,n,i){t[e]=r,pS(t,e,n,i)}function EC(){return{}}function TC(t,e){var n,i,a;let r={type:"array"};return(n=t.type)!=null&&n._def&&((a=(i=t.type)==null?void 0:i._def)==null?void 0:a.typeName)!==ze.ZodAny&&(r.items=_r(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&yn(r,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&yn(r,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(yn(r,"minItems",t.exactLength.value,t.exactLength.message,e),yn(r,"maxItems",t.exactLength.value,t.exactLength.message,e)),r}function IC(t,e){let r={type:"integer",format:"int64"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?yn(r,"minimum",n.value,n.message,e):yn(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),yn(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?yn(r,"maximum",n.value,n.message,e):yn(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),yn(r,"maximum",n.value,n.message,e));break;case"multipleOf":yn(r,"multipleOf",n.value,n.message,e);break}return r}function NC(){return{type:"boolean"}}function dw(t,e){return _r(t.type._def,e)}var CC=(t,e)=>_r(t.innerType._def,e);function mS(t,e,r){let n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((i,a)=>mS(t,e,i))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return vF(t,e)}}var vF=(t,e)=>{let r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(let n of t.checks)switch(n.kind){case"min":yn(r,"minimum",n.value,n.message,e);break;case"max":yn(r,"maximum",n.value,n.message,e);break}return r};function xC(t,e){return{..._r(t.innerType._def,e),default:t.defaultValue()}}function DC(t,e){return e.effectStrategy==="input"?_r(t.schema._def,e):{}}function RC(t){return{type:"string",enum:Array.from(t.values)}}var hF=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function OC(t,e){let r=[_r(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),_r(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a),n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,i=[];return r.forEach(a=>{if(hF(a))i.push(...a.allOf),a.unevaluatedProperties===void 0&&(n=void 0);else{let l=a;if("additionalProperties"in a&&a.additionalProperties===!1){let{additionalProperties:v,..._}=a;l=_}else n=void 0;i.push(l)}}),i.length?{allOf:i,...n}:void 0}function AC(t,e){let r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}var vS,wm={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(vS===void 0&&(vS=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),vS),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function pw(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":yn(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e);break;case"max":yn(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":bm(r,"email",n.message,e);break;case"format:idn-email":bm(r,"idn-email",n.message,e);break;case"pattern:zod":ec(r,wm.email,n.message,e);break}break;case"url":bm(r,"uri",n.message,e);break;case"uuid":bm(r,"uuid",n.message,e);break;case"regex":ec(r,n.regex,n.message,e);break;case"cuid":ec(r,wm.cuid,n.message,e);break;case"cuid2":ec(r,wm.cuid2,n.message,e);break;case"startsWith":ec(r,RegExp(`^${hS(n.value,e)}`),n.message,e);break;case"endsWith":ec(r,RegExp(`${hS(n.value,e)}$`),n.message,e);break;case"datetime":bm(r,"date-time",n.message,e);break;case"date":bm(r,"date",n.message,e);break;case"time":bm(r,"time",n.message,e);break;case"duration":bm(r,"duration",n.message,e);break;case"length":yn(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e),yn(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"includes":{ec(r,RegExp(hS(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&bm(r,"ipv4",n.message,e),n.version!=="v4"&&bm(r,"ipv6",n.message,e);break}case"base64url":ec(r,wm.base64url,n.message,e);break;case"jwt":ec(r,wm.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&ec(r,wm.ipv4Cidr,n.message,e),n.version!=="v4"&&ec(r,wm.ipv6Cidr,n.message,e);break}case"emoji":ec(r,wm.emoji(),n.message,e);break;case"ulid":{ec(r,wm.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{bm(r,"binary",n.message,e);break}case"contentEncoding:base64":{yn(r,"contentEncoding","base64",n.message,e);break}case"pattern:zod":{ec(r,wm.base64,n.message,e);break}}break}case"nanoid":ec(r,wm.nanoid,n.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function hS(t,e){return e.patternStrategy==="escape"?_F(t):t}var gF=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function _F(t){let e="";for(let r=0;r<t.length;r++)gF.has(t[r])||(e+="\\"),e+=t[r];return e}function bm(t,e,r,n){var i;t.format||(i=t.anyOf)!=null&&i.some(a=>a.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):yn(t,"format",e,r,n)}function ec(t,e,r,n){var i;t.pattern||(i=t.allOf)!=null&&i.some(a=>a.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:kC(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):yn(t,"pattern",kC(e,n),r,n)}function kC(t,e){var _;if(!e.applyRegexFlags||!t.flags)return t.source;let r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},n=r.i?t.source.toLowerCase():t.source,i="",a=!1,l=!1,v=!1;for(let b=0;b<n.length;b++){if(a){i+=n[b],a=!1;continue}if(r.i){if(l){if(n[b].match(/[a-z]/)){v?(i+=n[b],i+=`${n[b-2]}-${n[b]}`.toUpperCase(),v=!1):n[b+1]==="-"&&((_=n[b+2])!=null&&_.match(/[a-z]/))?(i+=n[b],v=!0):i+=`${n[b]}${n[b].toUpperCase()}`;continue}}else if(n[b].match(/[a-z]/)){i+=`[${n[b]}${n[b].toUpperCase()}]`;continue}}if(r.m){if(n[b]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(n[b]==="$"){i+=`($|(?=[\r
]))`;continue}}if(r.s&&n[b]==="."){i+=l?`${n[b]}\r
`:`[${n[b]}\r
]`;continue}i+=n[b],n[b]==="\\"?a=!0:l&&n[b]==="]"?l=!1:!l&&n[b]==="["&&(l=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}function mw(t,e){var n,i,a,l,v,_;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((n=t.keyType)==null?void 0:n._def.typeName)===ze.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((b,C)=>({...b,[C]:_r(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",C]})??{}}),{}),additionalProperties:!1};let r={type:"object",additionalProperties:_r(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return r;if(((i=t.keyType)==null?void 0:i._def.typeName)===ze.ZodString&&((a=t.keyType._def.checks)!=null&&a.length)){let{type:b,...C}=pw(t.keyType._def,e);return{...r,propertyNames:C}}else{if(((l=t.keyType)==null?void 0:l._def.typeName)===ze.ZodEnum)return{...r,propertyNames:{enum:t.keyType._def.values}};if(((v=t.keyType)==null?void 0:v._def.typeName)===ze.ZodBranded&&t.keyType._def.type._def.typeName===ze.ZodString&&((_=t.keyType._def.type._def.checks)!=null&&_.length)){let{type:b,...C}=dw(t.keyType._def,e);return{...r,propertyNames:C}}}return r}function PC(t,e){if(e.mapStrategy==="record")return mw(t,e);let r=_r(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},n=_r(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function LC(t){let e=t.values,n=Object.keys(t.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),i=Array.from(new Set(n.map(a=>typeof a)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:n}}function MC(){return{not:{}}}function FC(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var yy={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function jC(t,e){if(e.target==="openApi3")return UC(t,e);let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in yy&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((i,a)=>{let l=yy[a._def.typeName];return l&&!i.includes(l)?[...i,l]:i},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((i,a)=>{let l=typeof a._def.value;switch(l){case"string":case"number":case"boolean":return[...i,l];case"bigint":return[...i,"integer"];case"object":if(a._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(n.length===r.length){let i=n.filter((a,l,v)=>v.indexOf(a)===l);return{type:i.length>1?i:i[0],enum:r.reduce((a,l)=>a.includes(l._def.value)?a:[...a,l._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,i)=>[...n,...i._def.values.filter(a=>!n.includes(a))],[])};return UC(t,e)}var UC=(t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,i)=>_r(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function YC(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:yy[t.innerType._def.typeName],nullable:!0}:{type:[yy[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let n=_r(t.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let r=_r(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function $C(t,e){let r={type:"number"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"int":r.type="integer",pS(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?yn(r,"minimum",n.value,n.message,e):yn(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),yn(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?yn(r,"maximum",n.value,n.message,e):yn(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),yn(r,"maximum",n.value,n.message,e));break;case"multipleOf":yn(r,"multipleOf",n.value,n.message,e);break}return r}function yF(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":_r(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":_r(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function BC(t,e){let r=e.target==="openAi",n={type:"object",...Object.entries(t.shape()).reduce((i,[a,l])=>{if(l===void 0||l._def===void 0)return i;let v=l.isOptional();v&&r&&(l instanceof Qc&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),v=!1);let _=_r(l._def,{...e,currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]});return _===void 0?i:{properties:{...i.properties,[a]:_},required:v?i.required:[...i.required,a]}},{properties:{},required:[]}),additionalProperties:yF(t,e)};return n.required.length||delete n.required,n}var qC=(t,e)=>{var n;if(e.currentPath.toString()===((n=e.propertyPath)==null?void 0:n.toString()))return _r(t.innerType._def,e);let r=_r(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}};var HC=(t,e)=>{if(e.pipeStrategy==="input")return _r(t.in._def,e);if(e.pipeStrategy==="output")return _r(t.out._def,e);let r=_r(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=_r(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(i=>i!==void 0)}};function GC(t,e){return _r(t.type._def,e)}function VC(t,e){let n={type:"array",uniqueItems:!0,items:_r(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&yn(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&yn(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}function zC(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>_r(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:_r(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>_r(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function WC(){return{not:{}}}function KC(){return{}}var JC=(t,e)=>_r(t.innerType._def,e);var ZC=(t,e,r)=>{switch(e){case ze.ZodString:return pw(t,r);case ze.ZodNumber:return $C(t,r);case ze.ZodObject:return BC(t,r);case ze.ZodBigInt:return IC(t,r);case ze.ZodBoolean:return NC();case ze.ZodDate:return mS(t,r);case ze.ZodUndefined:return WC();case ze.ZodNull:return FC(r);case ze.ZodArray:return TC(t,r);case ze.ZodUnion:case ze.ZodDiscriminatedUnion:return jC(t,r);case ze.ZodIntersection:return OC(t,r);case ze.ZodTuple:return zC(t,r);case ze.ZodRecord:return mw(t,r);case ze.ZodLiteral:return AC(t,r);case ze.ZodEnum:return RC(t);case ze.ZodNativeEnum:return LC(t);case ze.ZodNullable:return YC(t,r);case ze.ZodOptional:return qC(t,r);case ze.ZodMap:return PC(t,r);case ze.ZodSet:return VC(t,r);case ze.ZodLazy:return()=>t.getter()._def;case ze.ZodPromise:return GC(t,r);case ze.ZodNaN:case ze.ZodNever:return MC();case ze.ZodEffects:return DC(t,r);case ze.ZodAny:return EC();case ze.ZodUnknown:return KC();case ze.ZodDefault:return xC(t,r);case ze.ZodBranded:return dw(t,r);case ze.ZodReadonly:return JC(t,r);case ze.ZodCatch:return CC(t,r);case ze.ZodPipeline:return HC(t,r);case ze.ZodFunction:case ze.ZodVoid:case ze.ZodSymbol:return;default:return(n=>{})(e)}};function _r(t,e,r=!1){var v;let n=e.seen.get(t);if(e.override){let _=(v=e.override)==null?void 0:v.call(e,t,e,n,r);if(_!==wC)return _}if(n&&!r){let _=wF(n,e);if(_!==void 0)return _}let i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);let a=ZC(t,t.typeName,e),l=typeof a=="function"?_r(a(),e):a;if(l&&SF(t,e,l),e.postProcess){let _=e.postProcess(l,t,e);return i.jsonSchema=l,_}return i.jsonSchema=l,l}var wF=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:bF(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},bF=(t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},SF=(t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r);var XC=(t,e)=>{let r=SC(e),n=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((_,[b,C])=>({..._,[b]:_r(C._def,{...r,currentPath:[...r.basePath,r.definitionPath,b]},!0)??{}}),{}):void 0,i=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,a=_r(t._def,i===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,i]},!1)??{},l=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;l!==void 0&&(a.title=l);let v=i===void 0?n?{...a,[r.definitionPath]:n}:a:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,i].join("/"),[r.definitionPath]:{...n,[i]:a}};return r.target==="jsonSchema7"?v.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(v.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in v||"oneOf"in v||"allOf"in v||"type"in v&&Array.isArray(v.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),v};var QC=XC;var wy={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},by={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},Sy={code:"4",name:"assistant_message",parse:t=>{if(t==null||typeof t!="object"||!("id"in t)||!("role"in t)||!("content"in t)||typeof t.id!="string"||typeof t.role!="string"||t.role!=="assistant"||!Array.isArray(t.content)||!t.content.every(e=>e!=null&&typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&e.text!=null&&typeof e.text=="object"&&"value"in e.text&&typeof e.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:t}}},Ey={code:"5",name:"assistant_control_data",parse:t=>{if(t==null||typeof t!="object"||!("threadId"in t)||!("messageId"in t)||typeof t.threadId!="string"||typeof t.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:t.threadId,messageId:t.messageId}}}},Ty={code:"6",name:"data_message",parse:t=>{if(t==null||typeof t!="object"||!("role"in t)||!("data"in t)||typeof t.role!="string"||t.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:t}}},EF=[wy,by,Sy,Ey,Ty],FV={[wy.code]:wy,[by.code]:by,[Sy.code]:Sy,[Ey.code]:Ey,[Ty.code]:Ty},UV={[wy.name]:wy.code,[by.name]:by.code,[Sy.name]:Sy.code,[Ey.name]:Ey.code,[Ty.name]:Ty.code},jV=EF.map(t=>t.code);function TF(t){let e=["ROOT"],r=-1,n=null;function i(_,b,C){switch(_){case'"':{r=b,e.pop(),e.push(C),e.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=b,n=b,e.pop(),e.push(C),e.push("INSIDE_LITERAL");break}case"-":{e.pop(),e.push(C),e.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=b,e.pop(),e.push(C),e.push("INSIDE_NUMBER");break}case"{":{r=b,e.pop(),e.push(C),e.push("INSIDE_OBJECT_START");break}case"[":{r=b,e.pop(),e.push(C),e.push("INSIDE_ARRAY_START");break}}}function a(_,b){switch(_){case",":{e.pop(),e.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=b,e.pop();break}}}function l(_,b){switch(_){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=b,e.pop();break}}}for(let _=0;_<t.length;_++){let b=t[_];switch(e[e.length-1]){case"ROOT":i(b,_,"FINISH");break;case"INSIDE_OBJECT_START":{switch(b){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}case"}":{r=_,e.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(b){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(b){case'"':{e.pop(),e.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(b){case":":{e.pop(),e.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{i(b,_,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{a(b,_);break}case"INSIDE_STRING":{switch(b){case'"':{e.pop(),r=_;break}case"\\":{e.push("INSIDE_STRING_ESCAPE");break}default:r=_}break}case"INSIDE_ARRAY_START":{switch(b){case"]":{r=_,e.pop();break}default:{r=_,i(b,_,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(b){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=_,e.pop();break}default:{r=_;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{i(b,_,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{e.pop(),r=_;break}case"INSIDE_NUMBER":{switch(b){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=_;break}case"e":case"E":case"-":case".":break;case",":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&l(b,_),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(b,_);break}case"}":{e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(b,_);break}case"]":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&l(b,_);break}default:{e.pop();break}}break}case"INSIDE_LITERAL":{let U=t.substring(n,_+1);!"false".startsWith(U)&&!"true".startsWith(U)&&!"null".startsWith(U)?(e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?a(b,_):e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&l(b,_)):r=_;break}}}let v=t.slice(0,r+1);for(let _=e.length-1;_>=0;_--)switch(e[_]){case"INSIDE_STRING":{v+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{v+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{v+="]";break}case"INSIDE_LITERAL":{let C=t.substring(n,t.length);"true".startsWith(C)?v+="true".slice(C.length):"false".startsWith(C)?v+="false".slice(C.length):"null".startsWith(C)&&(v+="null".slice(C.length))}}return v}function ex(t){if(t===void 0)return{value:void 0,state:"undefined-input"};let e=mv({text:t});return e.success?{value:e.value,state:"successful-parse"}:(e=mv({text:TF(t)}),e.success?{value:e.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var IF={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},NF={code:"2",name:"data",parse:t=>{if(!Array.isArray(t))throw new Error('"data" parts expect an array value.');return{type:"data",value:t}}},CF={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},xF={code:"8",name:"message_annotations",parse:t=>{if(!Array.isArray(t))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:t}}},DF={code:"9",name:"tool_call",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string"||!("args"in t)||typeof t.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:t}}},RF={code:"a",name:"tool_result",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("result"in t))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:t}}},OF={code:"b",name:"tool_call_streaming_start",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:t}}},AF={code:"c",name:"tool_call_delta",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("argsTextDelta"in t)||typeof t.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:t}}},kF={code:"d",name:"finish_message",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');let e={finishReason:t.finishReason};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),{type:"finish_message",value:e}}},PF={code:"e",name:"finish_step",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');let e={finishReason:t.finishReason,isContinued:!1};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),"isContinued"in t&&typeof t.isContinued=="boolean"&&(e.isContinued=t.isContinued),{type:"finish_step",value:e}}},LF={code:"f",name:"start_step",parse:t=>{if(t==null||typeof t!="object"||!("messageId"in t)||typeof t.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:t.messageId}}}},MF={code:"g",name:"reasoning",parse:t=>{if(typeof t!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:t}}},FF={code:"h",name:"source",parse:t=>{if(t==null||typeof t!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:t}}},UF={code:"i",name:"redacted_reasoning",parse:t=>{if(t==null||typeof t!="object"||!("data"in t)||typeof t.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:t.data}}}},jF={code:"j",name:"reasoning_signature",parse:t=>{if(t==null||typeof t!="object"||!("signature"in t)||typeof t.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:t.signature}}}},vw=[IF,NF,CF,xF,DF,RF,OF,AF,kF,PF,LF,MF,FF,UF,jF],$V=Object.fromEntries(vw.map(t=>[t.code,t])),BV=Object.fromEntries(vw.map(t=>[t.name,t.code])),qV=vw.map(t=>t.code);function Hs(t,e){let r=vw.find(n=>n.name===t);if(!r)throw new Error(`Invalid stream part type: ${t}`);return`${r.code}:${JSON.stringify(e)}
`}function YF(t,e){var r;let n=(r=e==null?void 0:e.useReferences)!=null?r:!1;return $F(QC(t,{$refStrategy:n?"root":"none",target:"jsonSchema7"}),{validate:i=>{let a=t.safeParse(i);return a.success?{success:!0,value:a.data}:{success:!1,error:a.error}}})}var gS=Symbol.for("vercel.ai.schema");function $F(t,{validate:e}={}){return{[gS]:!0,_type:void 0,[dy]:!0,jsonSchema:t,validate:e}}function BF(t){return typeof t=="object"&&t!==null&&gS in t&&t[gS]===!0&&"jsonSchema"in t&&"validate"in t}function Wg(t){return BF(t)?t:YF(t)}var tx=typeof globalThis=="object"?globalThis:global;var mh="1.9.0";var rx=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function qF(t){var e=new Set([t]),r=new Set,n=t.match(rx);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(_){return _===t};function a(v){return r.add(v),!1}function l(v){return e.add(v),!0}return function(_){if(e.has(_))return!0;if(r.has(_))return!1;var b=_.match(rx);if(!b)return a(_);var C={major:+b[1],minor:+b[2],patch:+b[3],prerelease:b[4]};return C.prerelease!=null||i.major!==C.major?a(_):i.major===0?i.minor===C.minor&&i.patch<=C.patch?l(_):a(_):i.minor<=C.minor?l(_):a(_)}}var nx=qF(mh);var HF=mh.split(".")[0],Iy=Symbol.for("opentelemetry.js.api."+HF),Ny=tx;function P_(t,e,r,n){var i;n===void 0&&(n=!1);var a=Ny[Iy]=(i=Ny[Iy])!==null&&i!==void 0?i:{version:mh};if(!n&&a[t]){var l=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(l.stack||l.message),!1}if(a.version!==mh){var l=new Error("@opentelemetry/api: Registration of version v"+a.version+" for "+t+" does not match previously registered API v"+mh);return r.error(l.stack||l.message),!1}return a[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+mh+"."),!0}function vh(t){var e,r,n=(e=Ny[Iy])===null||e===void 0?void 0:e.version;if(!(!n||!nx(n)))return(r=Ny[Iy])===null||r===void 0?void 0:r[t]}function L_(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+mh+".");var r=Ny[Iy];r&&delete r[t]}var GF=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],l;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(v){l={error:v}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return a},VF=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},ix=function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Cy("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Cy("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Cy("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Cy("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Cy("verbose",this._namespace,e)},t}();function Cy(t,e,r){var n=vh("diag");if(n)return r.unshift(e),n[t].apply(n,VF([],GF(r),!1))}var tc;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(tc||(tc={}));function ax(t,e){t<tc.NONE?t=tc.NONE:t>tc.ALL&&(t=tc.ALL),e=e||{};function r(n,i){var a=e[n];return typeof a=="function"&&t>=i?a.bind(e):function(){}}return{error:r("error",tc.ERROR),warn:r("warn",tc.WARN),info:r("info",tc.INFO),debug:r("debug",tc.DEBUG),verbose:r("verbose",tc.VERBOSE)}}var zF=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],l;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(v){l={error:v}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return a},WF=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},KF="diag",M_=function(){function t(){function e(i){return function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];var v=vh("diag");if(v)return v[i].apply(v,WF([],zF(a),!1))}}var r=this,n=function(i,a){var l,v,_;if(a===void 0&&(a={logLevel:tc.INFO}),i===r){var b=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((l=b.stack)!==null&&l!==void 0?l:b.message),!1}typeof a=="number"&&(a={logLevel:a});var C=vh("diag"),U=ax((v=a.logLevel)!==null&&v!==void 0?v:tc.INFO,i);if(C&&!a.suppressOverrideMessage){var W=(_=new Error().stack)!==null&&_!==void 0?_:"<failed to generate stacktrace>";C.warn("Current logger will be overwritten from "+W),U.warn("Current logger will overwrite one already registered from "+W)}return P_("diag",U,r,!0)};r.setLogger=n,r.disable=function(){L_(KF,r)},r.createComponentLogger=function(i){return new ix(i)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}();function ox(t){return Symbol.for(t)}var JF=function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,i){var a=new t(r._currentContext);return a._currentContext.set(n,i),a},r.deleteValue=function(n){var i=new t(r._currentContext);return i._currentContext.delete(n),i}}return t}(),sx=new JF;var ZF=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],l;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(v){l={error:v}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return a},XF=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},ux=function(){function t(){}return t.prototype.active=function(){return sx},t.prototype.with=function(e,r,n){for(var i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];return r.call.apply(r,XF([n],ZF(i),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}();var QF=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],l;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(v){l={error:v}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return a},eU=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},_S="context",tU=new ux,hw=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return P_(_S,e,M_.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var i,a=[],l=3;l<arguments.length;l++)a[l-3]=arguments[l];return(i=this._getContextManager()).with.apply(i,eU([e,r,n],QF(a),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return vh(_S)||tU},t.prototype.disable=function(){this._getContextManager().disable(),L_(_S,M_.instance())},t}();var gw;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(gw||(gw={}));var yS="0000000000000000",wS="00000000000000000000000000000000",lx={traceId:wS,spanId:yS,traceFlags:gw.NONE};var ng=function(){function t(e){e===void 0&&(e=lx),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.addLink=function(e){return this},t.prototype.addLinks=function(e){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t}();var bS=ox("OpenTelemetry Context Key SPAN");function _w(t){return t.getValue(bS)||void 0}function cx(){return _w(hw.getInstance().active())}function xy(t,e){return t.setValue(bS,e)}function fx(t){return t.deleteValue(bS)}function dx(t,e){return xy(t,new ng(e))}function yw(t){var e;return(e=_w(t))===null||e===void 0?void 0:e.spanContext()}var rU=/^([0-9a-f]{32})$/i,nU=/^[0-9a-f]{16}$/i;function iU(t){return rU.test(t)&&t!==wS}function aU(t){return nU.test(t)&&t!==yS}function ww(t){return iU(t.traceId)&&aU(t.spanId)}function px(t){return new ng(t)}var SS=hw.getInstance(),bw=function(){function t(){}return t.prototype.startSpan=function(e,r,n){n===void 0&&(n=SS.active());var i=!!(r!=null&&r.root);if(i)return new ng;var a=n&&yw(n);return oU(a)&&ww(a)?new ng(a):new ng},t.prototype.startActiveSpan=function(e,r,n,i){var a,l,v;if(!(arguments.length<2)){arguments.length===2?v=r:arguments.length===3?(a=r,v=n):(a=r,l=n,v=i);var _=l??SS.active(),b=this.startSpan(e,a,_),C=xy(_,b);return SS.with(C,v,void 0,b)}},t}();function oU(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var sU=new bw,mx=function(){function t(e,r,n,i){this._provider=e,this.name=r,this.version=n,this.options=i}return t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,i){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):sU},t}();var vx=function(){function t(){}return t.prototype.getTracer=function(e,r,n){return new bw},t}();var uU=new vx,ES=function(){function t(){}return t.prototype.getTracer=function(e,r,n){var i;return(i=this.getDelegateTracer(e,r,n))!==null&&i!==void 0?i:new mx(this,e,r,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:uU},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(e,r,n)},t}();var F_;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(F_||(F_={}));var TS="trace",hx=function(){function t(){this._proxyTracerProvider=new ES,this.wrapSpanContext=px,this.isSpanContextValid=ww,this.deleteSpan=fx,this.getSpan=_w,this.getActiveSpan=cx,this.getSpanContext=yw,this.setSpan=xy,this.setSpanContext=dx}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=P_(TS,this._proxyTracerProvider,M_.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return vh(TS)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){L_(TS,M_.instance()),this._proxyTracerProvider=new ES},t}();var IS=hx.getInstance();var lU=Object.defineProperty,AS=(t,e)=>{for(var r in e)lU(t,r,{get:e[r],enumerable:!0})};function Ew(t,{contentType:e,dataStreamVersion:r}){let n=new Headers(t??{});return n.has("Content-Type")||n.set("Content-Type",e),r!==void 0&&n.set("X-Vercel-AI-Data-Stream",r),n}function gx(t,{contentType:e,dataStreamVersion:r}){let n={};if(t!=null)for(let[i,a]of Object.entries(t))n[i]=a;return n["Content-Type"]==null&&(n["Content-Type"]=e),r!==void 0&&(n["X-Vercel-AI-Data-Stream"]=r),n}function _x({response:t,status:e,statusText:r,headers:n,stream:i}){t.writeHead(e??200,r,n);let a=i.getReader();(async()=>{try{for(;;){let{done:v,value:_}=await a.read();if(v)break;t.write(_)}}catch(v){throw v}finally{t.end()}})()}var Nx="AI_InvalidArgumentError",Cx=`vercel.ai.error.${Nx}`,cU=Symbol.for(Cx),xx,Sm=class extends Dt{constructor({parameter:t,value:e,message:r}){super({name:Nx,message:`Invalid argument for parameter ${t}: ${r}`}),this[xx]=!0,this.parameter=t,this.value=e}static isInstance(t){return Dt.hasMarker(t,Cx)}};xx=cU;var Dx="AI_RetryError",Rx=`vercel.ai.error.${Dx}`,fU=Symbol.for(Rx),Ox,yx=class extends Dt{constructor({message:t,reason:e,errors:r}){super({name:Dx,message:t}),this[Ox]=!0,this.reason=e,this.errors=r,this.lastError=r[r.length-1]}static isInstance(t){return Dt.hasMarker(t,Rx)}};Ox=fU;var dU=({maxRetries:t=2,initialDelayInMs:e=2e3,backoffFactor:r=2}={})=>async n=>Ax(n,{maxRetries:t,delayInMs:e,backoffFactor:r});async function Ax(t,{maxRetries:e,delayInMs:r,backoffFactor:n},i=[]){try{return await t()}catch(a){if(fy(a)||e===0)throw a;let l=gN(a),v=[...i,a],_=v.length;if(_>e)throw new yx({message:`Failed after ${_} attempts. Last error: ${l}`,reason:"maxRetriesExceeded",errors:v});if(a instanceof Error&&Xc.isInstance(a)&&a.isRetryable===!0&&_<=e)return await hN(r),Ax(t,{maxRetries:e,delayInMs:n*r,backoffFactor:n},v);throw _===1?a:new yx({message:`Failed after ${_} attempts with non-retryable error: '${l}'`,reason:"errorNotRetryable",errors:v})}}function pU({maxRetries:t}){if(t!=null){if(!Number.isInteger(t))throw new Sm({parameter:"maxRetries",value:t,message:"maxRetries must be an integer"});if(t<0)throw new Sm({parameter:"maxRetries",value:t,message:"maxRetries must be >= 0"})}let e=t??2;return{maxRetries:e,retry:dU({maxRetries:e})}}function DS({operationId:t,telemetry:e}){return{"operation.name":`${t}${(e==null?void 0:e.functionId)!=null?` ${e.functionId}`:""}`,"resource.name":e==null?void 0:e.functionId,"ai.operationId":t,"ai.telemetry.functionId":e==null?void 0:e.functionId}}function mU({model:t,settings:e,telemetry:r,headers:n}){var i;return{"ai.model.provider":t.provider,"ai.model.id":t.modelId,...Object.entries(e).reduce((a,[l,v])=>(a[`ai.settings.${l}`]=v,a),{}),...Object.entries((i=r==null?void 0:r.metadata)!=null?i:{}).reduce((a,[l,v])=>(a[`ai.telemetry.metadata.${l}`]=v,a),{}),...Object.entries(n??{}).reduce((a,[l,v])=>(v!==void 0&&(a[`ai.request.headers.${l}`]=v),a),{})}}var vU={startSpan(){return Sw},startActiveSpan(t,e,r,n){if(typeof e=="function")return e(Sw);if(typeof r=="function")return r(Sw);if(typeof n=="function")return n(Sw)}},Sw={spanContext(){return hU},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},hU={traceId:"",spanId:"",traceFlags:0};function gU({isEnabled:t=!1,tracer:e}={}){return t?e||IS.getTracer("ai"):vU}function RS({name:t,tracer:e,attributes:r,fn:n,endWhenDone:i=!0}){return e.startActiveSpan(t,{attributes:r},async a=>{try{let l=await n(a);return i&&a.end(),l}catch(l){try{l instanceof Error?(a.recordException({name:l.name,message:l.message,stack:l.stack}),a.setStatus({code:F_.ERROR,message:l.message})):a.setStatus({code:F_.ERROR})}finally{a.end()}throw l}})}function U_({telemetry:t,attributes:e}){return(t==null?void 0:t.isEnabled)!==!0?{}:Object.entries(e).reduce((r,[n,i])=>{if(i===void 0)return r;if(typeof i=="object"&&"input"in i&&typeof i.input=="function"){if((t==null?void 0:t.recordInputs)===!1)return r;let a=i.input();return a===void 0?r:{...r,[n]:a}}if(typeof i=="object"&&"output"in i&&typeof i.output=="function"){if((t==null?void 0:t.recordOutputs)===!1)return r;let a=i.output();return a===void 0?r:{...r,[n]:a}}return{...r,[n]:i}},{})}var _U="AI_NoImageGeneratedError",yU=`vercel.ai.error.${_U}`,wU=Symbol.for(yU),bU;bU=wU;var kx="AI_NoObjectGeneratedError",Px=`vercel.ai.error.${kx}`,SU=Symbol.for(Px),Lx,wx=class extends Dt{constructor({message:t="No object generated.",cause:e,text:r,response:n,usage:i}){super({name:kx,message:t,cause:e}),this[Lx]=!0,this.text=r,this.response=n,this.usage=i}static isInstance(t){return Dt.hasMarker(t,Px)}};Lx=SU;var Mx="AI_DownloadError",Fx=`vercel.ai.error.${Mx}`,EU=Symbol.for(Fx),Ux,NS=class extends Dt{constructor({url:t,statusCode:e,statusText:r,cause:n,message:i=n==null?`Failed to download ${t}: ${e} ${r}`:`Failed to download ${t}: ${n}`}){super({name:Mx,message:i,cause:n}),this[Ux]=!0,this.url=t,this.statusCode=e,this.statusText=r}static isInstance(t){return Dt.hasMarker(t,Fx)}};Ux=EU;async function TU({url:t,fetchImplementation:e=fetch}){var r;let n=t.toString();try{let i=await e(n);if(!i.ok)throw new NS({url:n,statusCode:i.status,statusText:i.statusText});return{data:new Uint8Array(await i.arrayBuffer()),mimeType:(r=i.headers.get("content-type"))!=null?r:void 0}}catch(i){throw NS.isInstance(i)?i:new NS({url:n,cause:i})}}var IU=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}];function NU(t){for(let{bytes:e,mimeType:r}of IU)if(t.length>=e.length&&e.every((n,i)=>t[i]===n))return r}var jx="AI_InvalidDataContentError",Yx=`vercel.ai.error.${jx}`,CU=Symbol.for(Yx),$x,bx=class extends Dt{constructor({content:t,cause:e,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof t}.`}){super({name:jx,message:r,cause:e}),this[$x]=!0,this.content=t}static isInstance(t){return Dt.hasMarker(t,Yx)}};$x=CU;var Bx=T.union([T.string(),T.instanceof(Uint8Array),T.instanceof(ArrayBuffer),T.custom(t=>{var e,r;return(r=(e=globalThis.Buffer)==null?void 0:e.isBuffer(t))!=null?r:!1},{message:"Must be a Buffer"})]);function xU(t){return typeof t=="string"?t:t instanceof ArrayBuffer?gm(new Uint8Array(t)):gm(t)}function Tw(t){if(t instanceof Uint8Array)return t;if(typeof t=="string")try{return _N(t)}catch(e){throw new bx({message:"Invalid data content. Content string is not a base64-encoded media.",content:t,cause:e})}if(t instanceof ArrayBuffer)return new Uint8Array(t);throw new bx({content:t})}function DU(t){try{return new TextDecoder().decode(t)}catch{throw new Error("Error decoding Uint8Array to text")}}var qx="AI_InvalidMessageRoleError",Hx=`vercel.ai.error.${qx}`,RU=Symbol.for(Hx),Gx,OU=class extends Dt{constructor({role:t,message:e=`Invalid message role: '${t}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:qx,message:e}),this[Gx]=!0,this.role=t}static isInstance(t){return Dt.hasMarker(t,Hx)}};Gx=RU;function AU(t){try{let[e,r]=t.split(",");return{mimeType:e.split(";")[0].split(":")[1],base64Content:r}}catch{return{mimeType:void 0,base64Content:void 0}}}async function kU({prompt:t,modelSupportsImageUrls:e=!0,modelSupportsUrl:r=()=>!1,downloadImplementation:n=TU}){let i=await LU(t.messages,n,e,r);return[...t.system!=null?[{role:"system",content:t.system}]:[],...t.messages.map(a=>PU(a,i))]}function PU(t,e){var r,n,i,a,l,v;let _=t.role;switch(_){case"system":return{role:"system",content:t.content,providerMetadata:(r=t.providerOptions)!=null?r:t.experimental_providerMetadata};case"user":return typeof t.content=="string"?{role:"user",content:[{type:"text",text:t.content}],providerMetadata:(n=t.providerOptions)!=null?n:t.experimental_providerMetadata}:{role:"user",content:t.content.map(b=>MU(b,e)).filter(b=>b.type!=="text"||b.text!==""),providerMetadata:(i=t.providerOptions)!=null?i:t.experimental_providerMetadata};case"assistant":return typeof t.content=="string"?{role:"assistant",content:[{type:"text",text:t.content}],providerMetadata:(a=t.providerOptions)!=null?a:t.experimental_providerMetadata}:{role:"assistant",content:t.content.filter(b=>b.type!=="text"||b.text!=="").map(b=>{let{experimental_providerMetadata:C,providerOptions:U,...W}=b;return{...W,providerMetadata:U??C}}),providerMetadata:(l=t.providerOptions)!=null?l:t.experimental_providerMetadata};case"tool":return{role:"tool",content:t.content.map(b=>{var C;return{type:"tool-result",toolCallId:b.toolCallId,toolName:b.toolName,result:b.result,content:b.experimental_content,isError:b.isError,providerMetadata:(C=b.providerOptions)!=null?C:b.experimental_providerMetadata}}),providerMetadata:(v=t.providerOptions)!=null?v:t.experimental_providerMetadata};default:{let b=_;throw new OU({role:b})}}}async function LU(t,e,r,n){let i=t.filter(l=>l.role==="user").map(l=>l.content).filter(l=>Array.isArray(l)).flat().filter(l=>l.type==="image"||l.type==="file").filter(l=>!(l.type==="image"&&r===!0)).map(l=>l.type==="image"?l.image:l.data).map(l=>typeof l=="string"&&(l.startsWith("http:")||l.startsWith("https:"))?new URL(l):l).filter(l=>l instanceof URL).filter(l=>!n(l)),a=await Promise.all(i.map(async l=>({url:l,data:await e({url:l})})));return Object.fromEntries(a.map(({url:l,data:v})=>[l.toString(),v]))}function MU(t,e){var r;if(t.type==="text")return{type:"text",text:t.text,providerMetadata:t.experimental_providerMetadata};let n=t.mimeType,i,a,l,v=t.type;switch(v){case"image":i=t.image;break;case"file":i=t.data;break;default:throw new Error(`Unsupported part type: ${v}`)}try{a=typeof i=="string"?new URL(i):i}catch{a=i}if(a instanceof URL)if(a.protocol==="data:"){let{mimeType:_,base64Content:b}=AU(a.toString());if(_==null||b==null)throw new Error(`Invalid data URL format in part ${v}`);n=_,l=Tw(b)}else{let _=e[a.toString()];_?(l=_.data,n??(n=_.mimeType)):l=a}else l=Tw(a);switch(v){case"image":return l instanceof Uint8Array&&(n=(r=NU(l))!=null?r:n),{type:"image",image:l,mimeType:n,providerMetadata:t.experimental_providerMetadata};case"file":{if(n==null)throw new Error("Mime type is missing for file part");return{type:"file",data:l instanceof Uint8Array?xU(l):l,mimeType:n,providerMetadata:t.experimental_providerMetadata}}}}function FU({maxTokens:t,temperature:e,topP:r,topK:n,presencePenalty:i,frequencyPenalty:a,stopSequences:l,seed:v}){if(t!=null){if(!Number.isInteger(t))throw new Sm({parameter:"maxTokens",value:t,message:"maxTokens must be an integer"});if(t<1)throw new Sm({parameter:"maxTokens",value:t,message:"maxTokens must be >= 1"})}if(e!=null&&typeof e!="number")throw new Sm({parameter:"temperature",value:e,message:"temperature must be a number"});if(r!=null&&typeof r!="number")throw new Sm({parameter:"topP",value:r,message:"topP must be a number"});if(n!=null&&typeof n!="number")throw new Sm({parameter:"topK",value:n,message:"topK must be a number"});if(i!=null&&typeof i!="number")throw new Sm({parameter:"presencePenalty",value:i,message:"presencePenalty must be a number"});if(a!=null&&typeof a!="number")throw new Sm({parameter:"frequencyPenalty",value:a,message:"frequencyPenalty must be a number"});if(v!=null&&!Number.isInteger(v))throw new Sm({parameter:"seed",value:v,message:"seed must be an integer"});return{maxTokens:t,temperature:e??0,topP:r,topK:n,presencePenalty:i,frequencyPenalty:a,stopSequences:l!=null&&l.length>0?l:void 0,seed:v}}function UU(t){var e,r,n;let i=[];for(let a of t){let l;try{l=new URL(a.url)}catch{throw new Error(`Invalid URL: ${a.url}`)}switch(l.protocol){case"http:":case"https:":{if((e=a.contentType)!=null&&e.startsWith("image/"))i.push({type:"image",image:l});else{if(!a.contentType)throw new Error("If the attachment is not an image, it must specify a content type");i.push({type:"file",data:l,mimeType:a.contentType})}break}case"data:":{let v,_,b;try{[v,_]=a.url.split(","),b=v.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${a.url}`)}if(b==null||_==null)throw new Error(`Invalid data URL format: ${a.url}`);if((r=a.contentType)!=null&&r.startsWith("image/"))i.push({type:"image",image:Tw(_)});else if((n=a.contentType)!=null&&n.startsWith("text/"))i.push({type:"text",text:DU(Tw(_))});else{if(!a.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");i.push({type:"file",data:_,mimeType:a.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${l.protocol}`)}}return i}var Vx="AI_MessageConversionError",zx=`vercel.ai.error.${Vx}`,jU=Symbol.for(zx),Wx,CS=class extends Dt{constructor({originalMessage:t,message:e}){super({name:Vx,message:e}),this[Wx]=!0,this.originalMessage=t}static isInstance(t){return Dt.hasMarker(t,zx)}};Wx=jU;function YU(t,e){var r,n;let i=(r=e==null?void 0:e.tools)!=null?r:{},a=[];for(let v=0;v<t.length;v++){let _=t[v],b=v===t.length-1,{role:C,content:U,experimental_attachments:W}=_;switch(C){case"system":{a.push({role:"system",content:U});break}case"user":{a.push({role:"user",content:W?[{type:"text",text:U},...UU(W)]:U});break}case"assistant":{if(_.parts!=null){let H=function(){let Ie=[];for(let Ae of he)switch(Ae.type){case"text":Ie.push({type:"text",text:Ae.text});break;case"reasoning":{for(let He of Ae.details)switch(He.type){case"text":Ie.push({type:"reasoning",text:He.text,signature:He.signature});break;case"redacted":Ie.push({type:"redacted-reasoning",data:He.data});break}break}case"tool-invocation":Ie.push({type:"tool-call",toolCallId:Ae.toolInvocation.toolCallId,toolName:Ae.toolInvocation.toolName,args:Ae.toolInvocation.args});break;default:{let He=Ae;throw new Error(`Unsupported part: ${He}`)}}a.push({role:"assistant",content:Ie});let _e=he.filter(Ae=>Ae.type==="tool-invocation").map(Ae=>Ae.toolInvocation);_e.length>0&&a.push({role:"tool",content:_e.map(Ae=>{if(!("result"in Ae))throw new CS({originalMessage:_,message:"ToolInvocation must have a result: "+JSON.stringify(Ae)});let{toolCallId:He,toolName:tt,result:lt}=Ae,Rt=i[tt];return(Rt==null?void 0:Rt.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:He,toolName:tt,result:Rt.experimental_toToolResultContent(lt),experimental_content:Rt.experimental_toToolResultContent(lt)}:{type:"tool-result",toolCallId:He,toolName:tt,result:lt}})}),he=[],ne=!1,Z++};var l=H;let Z=0,ne=!1,he=[];for(let Ie of _.parts)switch(Ie.type){case"reasoning":he.push(Ie);break;case"text":{ne&&H(),he.push(Ie);break}case"tool-invocation":{((n=Ie.toolInvocation.step)!=null?n:0)!==Z&&H(),he.push(Ie),ne=!0;break}}H();break}let K=_.toolInvocations;if(K==null||K.length===0){a.push({role:"assistant",content:U});break}let q=K.reduce((H,Z)=>{var ne;return Math.max(H,(ne=Z.step)!=null?ne:0)},0);for(let H=0;H<=q;H++){let Z=K.filter(ne=>{var he;return((he=ne.step)!=null?he:0)===H});Z.length!==0&&(a.push({role:"assistant",content:[...b&&U&&H===0?[{type:"text",text:U}]:[],...Z.map(({toolCallId:ne,toolName:he,args:Ie})=>({type:"tool-call",toolCallId:ne,toolName:he,args:Ie}))]}),a.push({role:"tool",content:Z.map(ne=>{if(!("result"in ne))throw new CS({originalMessage:_,message:"ToolInvocation must have a result: "+JSON.stringify(ne)});let{toolCallId:he,toolName:Ie,result:_e}=ne,Ae=i[Ie];return(Ae==null?void 0:Ae.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:he,toolName:Ie,result:Ae.experimental_toToolResultContent(_e),experimental_content:Ae.experimental_toToolResultContent(_e)}:{type:"tool-result",toolCallId:he,toolName:Ie,result:_e}})}))}U&&!b&&a.push({role:"assistant",content:U});break}case"data":break;default:{let K=C;throw new CS({originalMessage:_,message:`Unsupported role: ${K}`})}}}return a}function $U(t){if(!Array.isArray(t))return"other";if(t.length===0)return"messages";let e=t.map(BU);return e.some(r=>r==="has-ui-specific-parts")?"ui-messages":e.every(r=>r==="has-core-specific-parts"||r==="message")?"messages":"other"}function BU(t){return typeof t=="object"&&t!==null&&(t.role==="function"||t.role==="data"||"toolInvocations"in t||"experimental_attachments"in t)?"has-ui-specific-parts":typeof t=="object"&&t!==null&&"content"in t&&(Array.isArray(t.content)||"experimental_providerMetadata"in t||"providerOptions"in t)?"has-core-specific-parts":typeof t=="object"&&t!==null&&"role"in t&&"content"in t&&typeof t.content=="string"&&["system","user","assistant","tool"].includes(t.role)?"message":"other"}var OS=T.lazy(()=>T.union([T.null(),T.string(),T.number(),T.boolean(),T.record(T.string(),OS),T.array(OS)])),Ba=T.record(T.string(),T.record(T.string(),OS)),qU=T.array(T.union([T.object({type:T.literal("text"),text:T.string()}),T.object({type:T.literal("image"),data:T.string(),mimeType:T.string().optional()})])),Kx=T.object({type:T.literal("text"),text:T.string(),providerOptions:Ba.optional(),experimental_providerMetadata:Ba.optional()}),HU=T.object({type:T.literal("image"),image:T.union([Bx,T.instanceof(URL)]),mimeType:T.string().optional(),providerOptions:Ba.optional(),experimental_providerMetadata:Ba.optional()}),GU=T.object({type:T.literal("file"),data:T.union([Bx,T.instanceof(URL)]),mimeType:T.string(),providerOptions:Ba.optional(),experimental_providerMetadata:Ba.optional()}),VU=T.object({type:T.literal("reasoning"),text:T.string(),providerOptions:Ba.optional(),experimental_providerMetadata:Ba.optional()}),zU=T.object({type:T.literal("redacted-reasoning"),data:T.string(),providerOptions:Ba.optional(),experimental_providerMetadata:Ba.optional()}),WU=T.object({type:T.literal("tool-call"),toolCallId:T.string(),toolName:T.string(),args:T.unknown(),providerOptions:Ba.optional(),experimental_providerMetadata:Ba.optional()}),KU=T.object({type:T.literal("tool-result"),toolCallId:T.string(),toolName:T.string(),result:T.unknown(),content:qU.optional(),isError:T.boolean().optional(),providerOptions:Ba.optional(),experimental_providerMetadata:Ba.optional()}),JU=T.object({role:T.literal("system"),content:T.string(),providerOptions:Ba.optional(),experimental_providerMetadata:Ba.optional()}),ZU=T.object({role:T.literal("user"),content:T.union([T.string(),T.array(T.union([Kx,HU,GU]))]),providerOptions:Ba.optional(),experimental_providerMetadata:Ba.optional()}),XU=T.object({role:T.literal("assistant"),content:T.union([T.string(),T.array(T.union([Kx,VU,zU,WU]))]),providerOptions:Ba.optional(),experimental_providerMetadata:Ba.optional()}),QU=T.object({role:T.literal("tool"),content:T.array(KU),providerOptions:Ba.optional(),experimental_providerMetadata:Ba.optional()}),e2=T.union([JU,ZU,XU,QU]);function t2({prompt:t,tools:e}){if(t.prompt==null&&t.messages==null)throw new pv({prompt:t,message:"prompt or messages must be defined"});if(t.prompt!=null&&t.messages!=null)throw new pv({prompt:t,message:"prompt and messages cannot be defined at the same time"});if(t.system!=null&&typeof t.system!="string")throw new pv({prompt:t,message:"system must be a string"});if(t.prompt!=null){if(typeof t.prompt!="string")throw new pv({prompt:t,message:"prompt must be a string"});return{type:"prompt",system:t.system,messages:[{role:"user",content:t.prompt}]}}if(t.messages!=null){let r=$U(t.messages);if(r==="other")throw new pv({prompt:t,message:"messages must be an array of CoreMessage or UIMessage"});let n=r==="ui-messages"?YU(t.messages,{tools:e}):t.messages,i=hm({value:n,schema:T.array(e2)});if(!i.success)throw new pv({prompt:t,message:"messages must be an array of CoreMessage or UIMessage",cause:i.error});return{type:"messages",messages:n,system:t.system}}throw new Error("unreachable")}function r2({promptTokens:t,completionTokens:e}){return{promptTokens:t,completionTokens:e,totalTokens:t+e}}function n2(t,e){return{promptTokens:t.promptTokens+e.promptTokens,completionTokens:t.completionTokens+e.completionTokens,totalTokens:t.totalTokens+e.totalTokens}}var i2="JSON schema:",a2="You MUST answer with a JSON object that matches the JSON schema above.",o2="You MUST answer with JSON.";function s2({prompt:t,schema:e,schemaPrefix:r=e!=null?i2:void 0,schemaSuffix:n=e!=null?a2:o2}){return[t!=null&&t.length>0?t:void 0,t!=null&&t.length>0?"":void 0,r,e!=null?JSON.stringify(e):void 0,n].filter(i=>i!=null).join(`
`)}function xS(t){let e=t.pipeThrough(new TransformStream);return e[Symbol.asyncIterator]=()=>{let r=e.getReader();return{async next(){let{done:n,value:i}=await r.read();return n?{done:!0,value:void 0}:{done:!1,value:i}}}},e}var E3=vm({prefix:"aiobj",size:24});var Xf=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((t,e)=>{this.status.type==="resolved"?t(this.status.value):this.status.type==="rejected"&&e(this.status.error),this._resolve=t,this._reject=e}),this.promise)}resolve(t){var e;this.status={type:"resolved",value:t},this.promise&&((e=this._resolve)==null||e.call(this,t))}reject(t){var e;this.status={type:"rejected",error:t},this.promise&&((e=this._reject)==null||e.call(this,t))}};function Sx(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}function u2(){let t=[],e=null,r=!1,n=Sx(),i=async()=>{if(r&&t.length===0){e==null||e.close();return}if(t.length===0)return n=Sx(),await n.promise,i();try{let{value:a,done:l}=await t[0].read();l?(t.shift(),t.length>0?await i():r&&(e==null||e.close())):e==null||e.enqueue(a)}catch(a){e==null||e.error(a),t.shift(),r&&t.length===0&&(e==null||e.close())}};return{stream:new ReadableStream({start(a){e=a},pull:i,async cancel(){for(let a of t)await a.cancel();t=[],r=!0}}),addStream:a=>{if(r)throw new Error("Cannot add inner stream: outer stream is closed");t.push(a.getReader()),n.resolve()},close:()=>{r=!0,n.resolve(),t.length===0&&(e==null||e.close())},terminate:()=>{r=!0,n.resolve(),t.forEach(a=>a.cancel()),t=[],e==null||e.close()}}}function l2(){var t,e;return(e=(t=globalThis==null?void 0:globalThis.performance)==null?void 0:t.now())!=null?e:Date.now()}var I3=vm({prefix:"aiobj",size:24});var Jx="AI_NoOutputSpecifiedError",Zx=`vercel.ai.error.${Jx}`,c2=Symbol.for(Zx),Xx,f2=class extends Dt{constructor({message:t="No output specified."}={}){super({name:Jx,message:t}),this[Xx]=!0}static isInstance(t){return Dt.hasMarker(t,Zx)}};Xx=c2;var Qx="AI_ToolExecutionError",eD=`vercel.ai.error.${Qx}`,d2=Symbol.for(eD),tD,p2=class extends Dt{constructor({toolArgs:t,toolName:e,toolCallId:r,cause:n,message:i=`Error executing tool ${e}: ${Wh(n)}`}){super({name:Qx,message:i,cause:n}),this[tD]=!0,this.toolArgs=t,this.toolName=e,this.toolCallId=r}static isInstance(t){return Dt.hasMarker(t,eD)}};tD=d2;function m2(t){return t!=null&&Object.keys(t).length>0}function v2({tools:t,toolChoice:e,activeTools:r}){return m2(t)?{tools:(r!=null?Object.entries(t).filter(([i])=>r.includes(i)):Object.entries(t)).map(([i,a])=>{let l=a.type;switch(l){case void 0:case"function":return{type:"function",name:i,description:a.description,parameters:Wg(a.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:i,id:a.id,args:a.args};default:{let v=l;throw new Error(`Unsupported tool type: ${v}`)}}}),toolChoice:e==null?{type:"auto"}:typeof e=="string"?{type:e}:{type:"tool",toolName:e.toolName}}:{tools:void 0,toolChoice:void 0}}var h2=/^([\s\S]*?)(\s+)(\S*)$/;function g2(t){let e=t.match(h2);return e?{prefix:e[1],whitespace:e[2],suffix:e[3]}:void 0}var rD="AI_InvalidToolArgumentsError",nD=`vercel.ai.error.${rD}`,_2=Symbol.for(nD),iD,j_=class extends Dt{constructor({toolArgs:t,toolName:e,cause:r,message:n=`Invalid arguments for tool ${e}: ${Wh(r)}`}){super({name:rD,message:n,cause:r}),this[iD]=!0,this.toolArgs=t,this.toolName=e}static isInstance(t){return Dt.hasMarker(t,nD)}};iD=_2;var aD="AI_NoSuchToolError",oD=`vercel.ai.error.${aD}`,y2=Symbol.for(oD),sD,Kg=class extends Dt{constructor({toolName:t,availableTools:e=void 0,message:r=`Model tried to call unavailable tool '${t}'. ${e===void 0?"No tools are available.":`Available tools: ${e.join(", ")}.`}`}){super({name:aD,message:r}),this[sD]=!0,this.toolName=t,this.availableTools=e}static isInstance(t){return Dt.hasMarker(t,oD)}};sD=y2;var uD="AI_ToolCallRepairError",lD=`vercel.ai.error.${uD}`,w2=Symbol.for(lD),cD,kS=class extends Dt{constructor({cause:t,originalError:e,message:r=`Error repairing tool call: ${Wh(t)}`}){super({name:uD,message:r,cause:t}),this[cD]=!0,this.originalError=e}static isInstance(t){return Dt.hasMarker(t,lD)}};cD=w2;async function b2({toolCall:t,tools:e,repairToolCall:r,system:n,messages:i}){if(e==null)throw new Kg({toolName:t.toolName});try{return await Ex({toolCall:t,tools:e})}catch(a){if(r==null||!(Kg.isInstance(a)||j_.isInstance(a)))throw a;let l=null;try{l=await r({toolCall:t,tools:e,parameterSchema:({toolName:v})=>Wg(e[v].parameters).jsonSchema,system:n,messages:i,error:a})}catch(v){throw new kS({cause:v,originalError:a})}if(l==null)throw a;return await Ex({toolCall:l,tools:e})}}async function Ex({toolCall:t,tools:e}){let r=t.toolName,n=e[r];if(n==null)throw new Kg({toolName:t.toolName,availableTools:Object.keys(e)});let i=Wg(n.parameters),a=t.args.trim()===""?hm({value:{},schema:i}):mv({text:t.args,schema:i});if(a.success===!1)throw new j_({toolName:r,toolArgs:t.args,cause:a.error});return{type:"tool-call",toolCallId:t.toolCallId,toolName:r,args:a.value}}function Tx({text:t="",reasoning:e,tools:r,toolCalls:n,toolResults:i,messageId:a,generateMessageId:l}){let v=[];return v.push({role:"assistant",content:[...e.map(_=>_.type==="text"?{..._,type:"reasoning"}:{..._,type:"redacted-reasoning"}),{type:"text",text:t},...n],id:a}),i.length>0&&v.push({role:"tool",id:l(),content:i.map(_=>{let b=r[_.toolName];return(b==null?void 0:b.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:_.toolCallId,toolName:_.toolName,result:b.experimental_toToolResultContent(_.result),experimental_content:b.experimental_toToolResultContent(_.result)}:{type:"tool-result",toolCallId:_.toolCallId,toolName:_.toolName,result:_.result}})}),v}function S2(t){let e=t.filter(r=>r.type==="text").map(r=>r.text).join("");return e.length>0?e:void 0}var L3=vm({prefix:"aitxt",size:24}),M3=vm({prefix:"msg",size:24});var E2={};AS(E2,{object:()=>C2,text:()=>N2});var fD="AI_InvalidStreamPartError",dD=`vercel.ai.error.${fD}`,T2=Symbol.for(dD),pD,I2=class extends Dt{constructor({chunk:t,message:e}){super({name:fD,message:e}),this[pD]=!0,this.chunk=t}static isInstance(t){return Dt.hasMarker(t,dD)}};pD=T2;var N2=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:t}){return t},parsePartial({text:t}){return{partial:t}},parseOutput({text:t}){return t}}),C2=({schema:t})=>{let e=Wg(t);return{type:"object",responseFormat:({model:r})=>({type:"json",schema:r.supportsStructuredOutputs?e.jsonSchema:void 0}),injectIntoSystemPrompt({system:r,model:n}){return n.supportsStructuredOutputs?r:s2({prompt:r,schema:e.jsonSchema})},parsePartial({text:r}){let n=ex(r);switch(n.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:n.value};default:{let i=n.state;throw new Error(`Unsupported parse state: ${i}`)}}},parseOutput({text:r},n){let i=mv({text:r});if(!i.success)throw new wx({message:"No object generated: could not parse the response.",cause:i.error,text:r,response:n.response,usage:n.usage});let a=hm({value:i.value,schema:e});if(!a.success)throw new wx({message:"No object generated: response did not match schema.",cause:a.error,text:r,response:n.response,usage:n.usage});return a.value}}};function x2(t){return t===void 0?[]:Array.isArray(t)?t:[t]}function PS(t,e){let r=t.getReader(),n=e.getReader(),i,a,l=!1,v=!1;async function _(C){try{i==null&&(i=r.read());let U=await i;i=void 0,U.done?C.close():C.enqueue(U.value)}catch(U){C.error(U)}}async function b(C){try{a==null&&(a=n.read());let U=await a;a=void 0,U.done?C.close():C.enqueue(U.value)}catch(U){C.error(U)}}return new ReadableStream({async pull(C){try{if(l){await b(C);return}if(v){await _(C);return}i==null&&(i=r.read()),a==null&&(a=n.read());let{result:U,reader:W}=await Promise.race([i.then(K=>({result:K,reader:r})),a.then(K=>({result:K,reader:n}))]);U.done||C.enqueue(U.value),W===r?(i=void 0,U.done&&(await b(C),l=!0)):(a=void 0,U.done&&(v=!0,await _(C)))}catch(U){C.error(U)}},cancel(){r.cancel(),n.cancel()}})}function D2({tools:t,generatorStream:e,toolCallStreaming:r,tracer:n,telemetry:i,system:a,messages:l,abortSignal:v,repairToolCall:_}){let b=null,C=new ReadableStream({start(ne){b=ne}}),U={},W=new Set,K=!1,q;function H(){K&&W.size===0&&(q!=null&&b.enqueue(q),b.close())}let Z=new TransformStream({async transform(ne,he){let Ie=ne.type;switch(Ie){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{he.enqueue(ne);break}case"tool-call-delta":{r&&(U[ne.toolCallId]||(he.enqueue({type:"tool-call-streaming-start",toolCallId:ne.toolCallId,toolName:ne.toolName}),U[ne.toolCallId]=!0),he.enqueue({type:"tool-call-delta",toolCallId:ne.toolCallId,toolName:ne.toolName,argsTextDelta:ne.argsTextDelta}));break}case"tool-call":{try{let _e=await b2({toolCall:ne,tools:t,repairToolCall:_,system:a,messages:l});he.enqueue(_e);let Ae=t[_e.toolName];if(Ae.execute!=null){let He=Zl();W.add(He),RS({name:"ai.toolCall",attributes:U_({telemetry:i,attributes:{...DS({operationId:"ai.toolCall",telemetry:i}),"ai.toolCall.name":_e.toolName,"ai.toolCall.id":_e.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(_e.args)}}}),tracer:n,fn:async tt=>Ae.execute(_e.args,{toolCallId:_e.toolCallId,messages:l,abortSignal:v}).then(lt=>{b.enqueue({..._e,type:"tool-result",result:lt}),W.delete(He),H();try{tt.setAttributes(U_({telemetry:i,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(lt)}}}))}catch{}},lt=>{b.enqueue({type:"error",error:new p2({toolCallId:_e.toolCallId,toolName:_e.toolName,toolArgs:_e.args,cause:lt})}),W.delete(He),H()})})}}catch(_e){b.enqueue({type:"error",error:_e})}break}case"finish":{q={type:"finish",finishReason:ne.finishReason,logprobs:ne.logprobs,usage:r2(ne.usage),experimental_providerMetadata:ne.providerMetadata};break}default:{let _e=Ie;throw new Error(`Unhandled chunk type: ${_e}`)}}},flush(){K=!0,H()}});return new ReadableStream({async start(ne){return Promise.all([e.pipeThrough(Z).pipeTo(new WritableStream({write(he){ne.enqueue(he)},close(){}})),C.pipeTo(new WritableStream({write(he){ne.enqueue(he)},close(){ne.close()}}))])}})}var R2=vm({prefix:"aitxt",size:24}),O2=vm({prefix:"msg",size:24});function mD({model:t,tools:e,toolChoice:r,system:n,prompt:i,messages:a,maxRetries:l,abortSignal:v,headers:_,maxSteps:b=1,experimental_generateMessageId:C=O2,experimental_output:U,experimental_continueSteps:W=!1,experimental_telemetry:K,experimental_providerMetadata:q,providerOptions:H=q,experimental_toolCallStreaming:Z=!1,toolCallStreaming:ne=Z,experimental_activeTools:he,experimental_repairToolCall:Ie,experimental_transform:_e,onChunk:Ae,onError:He,onFinish:tt,onStepFinish:lt,_internal:{now:Rt=l2,generateId:zt=R2,currentDate:Rr=()=>new Date}={},...cn}){return new k2({model:t,telemetry:K,headers:_,settings:cn,maxRetries:l,abortSignal:v,system:n,prompt:i,messages:a,tools:e,toolChoice:r,toolCallStreaming:ne,transforms:x2(_e),activeTools:he,repairToolCall:Ie,maxSteps:b,output:U,continueSteps:W,providerOptions:H,onChunk:Ae,onError:He,onFinish:tt,onStepFinish:lt,now:Rt,currentDate:Rr,generateId:zt,generateMessageId:C})}function A2(t){if(!t)return new TransformStream({transform(a,l){l.enqueue({part:a,partialOutput:void 0})}});let e="",r="",n="";function i({controller:a,partialOutput:l=void 0}){a.enqueue({part:{type:"text-delta",textDelta:r},partialOutput:l}),r=""}return new TransformStream({transform(a,l){if(a.type==="step-finish"&&i({controller:l}),a.type!=="text-delta"){l.enqueue({part:a,partialOutput:void 0});return}e+=a.textDelta,r+=a.textDelta;let v=t.parsePartial({text:e});if(v!=null){let _=JSON.stringify(v.partial);_!==n&&(i({controller:l,partialOutput:v.partial}),n=_)}},flush(a){r.length>0&&i({controller:a})}})}var k2=class{constructor({model:t,telemetry:e,headers:r,settings:n,maxRetries:i,abortSignal:a,system:l,prompt:v,messages:_,tools:b,toolChoice:C,toolCallStreaming:U,transforms:W,activeTools:K,repairToolCall:q,maxSteps:H,output:Z,continueSteps:ne,providerOptions:he,now:Ie,currentDate:_e,generateId:Ae,generateMessageId:He,onChunk:tt,onError:lt,onFinish:Rt,onStepFinish:zt}){this.warningsPromise=new Xf,this.usagePromise=new Xf,this.finishReasonPromise=new Xf,this.providerMetadataPromise=new Xf,this.textPromise=new Xf,this.reasoningPromise=new Xf,this.reasoningDetailsPromise=new Xf,this.sourcesPromise=new Xf,this.toolCallsPromise=new Xf,this.toolResultsPromise=new Xf,this.requestPromise=new Xf,this.responsePromise=new Xf,this.stepsPromise=new Xf;var Rr;if(H<1)throw new Sm({parameter:"maxSteps",value:H,message:"maxSteps must be at least 1"});this.output=Z;let cn="",jt="",Ht="",qr=[],rt,fn=[],Le=[],Zt={id:Ae(),timestamp:_e(),modelId:t.modelId,messages:[]},Wt=[],Tt=[],hn,st,ei="initial",ot=[],Su,Xt=new TransformStream({async transform(Ct,Mr){Mr.enqueue(Ct);let{part:Ze}=Ct;if((Ze.type==="text-delta"||Ze.type==="reasoning"||Ze.type==="source"||Ze.type==="tool-call"||Ze.type==="tool-result"||Ze.type==="tool-call-streaming-start"||Ze.type==="tool-call-delta")&&await(tt==null?void 0:tt({chunk:Ze})),Ze.type==="error"&&await(lt==null?void 0:lt({error:Ze.error})),Ze.type==="text-delta"&&(cn+=Ze.textDelta,jt+=Ze.textDelta,Ht+=Ze.textDelta),Ze.type==="reasoning"&&(rt==null?(rt={type:"text",text:Ze.textDelta},qr.push(rt)):rt.text+=Ze.textDelta),Ze.type==="reasoning-signature"){if(rt==null)throw new Dt({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});rt.signature=Ze.signature,rt=void 0}if(Ze.type==="redacted-reasoning"&&qr.push({type:"redacted",data:Ze.data}),Ze.type==="source"&&(Le.push(Ze.source),fn.push(Ze.source)),Ze.type==="tool-call"&&Wt.push(Ze),Ze.type==="tool-result"&&Tt.push(Ze),Ze.type==="step-finish"){let Pn=Tx({text:jt,reasoning:qr,tools:b??{},toolCalls:Wt,toolResults:Tt,messageId:Ze.messageId,generateMessageId:He}),Hr=ot.length,Jr="done";Hr+1<H&&(ne&&Ze.finishReason==="length"&&Wt.length===0?Jr="continue":Wt.length>0&&Tt.length===Wt.length&&(Jr="tool-result"));let Na={stepType:ei,text:cn,reasoning:S2(qr),reasoningDetails:qr,sources:fn,toolCalls:Wt,toolResults:Tt,finishReason:Ze.finishReason,usage:Ze.usage,warnings:Ze.warnings,logprobs:Ze.logprobs,request:Ze.request,response:{...Ze.response,messages:[...Zt.messages,...Pn]},providerMetadata:Ze.experimental_providerMetadata,experimental_providerMetadata:Ze.experimental_providerMetadata,isContinued:Ze.isContinued};await(zt==null?void 0:zt(Na)),ot.push(Na),Wt=[],Tt=[],cn="",fn=[],Jr!=="done"&&(ei=Jr),Jr!=="continue"&&(Zt.messages.push(...Pn),jt="")}Ze.type==="finish"&&(Zt.id=Ze.response.id,Zt.timestamp=Ze.response.timestamp,Zt.modelId=Ze.response.modelId,Zt.headers=Ze.response.headers,st=Ze.usage,hn=Ze.finishReason)},async flush(Ct){var Mr;try{if(ot.length===0)return;let Ze=ot[ot.length-1];Hn.warningsPromise.resolve(Ze.warnings),Hn.requestPromise.resolve(Ze.request),Hn.responsePromise.resolve(Ze.response),Hn.toolCallsPromise.resolve(Ze.toolCalls),Hn.toolResultsPromise.resolve(Ze.toolResults),Hn.providerMetadataPromise.resolve(Ze.experimental_providerMetadata),Hn.reasoningPromise.resolve(Ze.reasoning),Hn.reasoningDetailsPromise.resolve(Ze.reasoningDetails);let Pn=hn??"unknown",Hr=st??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Hn.finishReasonPromise.resolve(Pn),Hn.usagePromise.resolve(Hr),Hn.textPromise.resolve(Ht),Hn.sourcesPromise.resolve(Le),Hn.stepsPromise.resolve(ot),await(Rt==null?void 0:Rt({finishReason:Pn,logprobs:void 0,usage:Hr,text:Ht,reasoning:Ze.reasoning,reasoningDetails:Ze.reasoningDetails,sources:Ze.sources,toolCalls:Ze.toolCalls,toolResults:Ze.toolResults,request:(Mr=Ze.request)!=null?Mr:{},response:Ze.response,warnings:Ze.warnings,providerMetadata:Ze.providerMetadata,experimental_providerMetadata:Ze.experimental_providerMetadata,steps:ot})),Su.setAttributes(U_({telemetry:e,attributes:{"ai.response.finishReason":Pn,"ai.response.text":{output:()=>Ht},"ai.response.toolCalls":{output:()=>{var Jr;return(Jr=Ze.toolCalls)!=null&&Jr.length?JSON.stringify(Ze.toolCalls):void 0}},"ai.usage.promptTokens":Hr.promptTokens,"ai.usage.completionTokens":Hr.completionTokens}}))}catch(Ze){Ct.error(Ze)}finally{Su.end()}}}),qa=u2();this.addStream=qa.addStream,this.closeStream=qa.close;let Kt=qa.stream;for(let Ct of W)Kt=Kt.pipeThrough(Ct({tools:b,stopStream(){qa.terminate()}}));this.baseStream=Kt.pipeThrough(A2(Z)).pipeThrough(Xt);let{maxRetries:cr,retry:Ci}=pU({maxRetries:i}),mr=gU(e),xi=mU({model:t,telemetry:e,headers:r,settings:{...n,maxRetries:cr}}),Lr=t2({prompt:{system:(Rr=Z==null?void 0:Z.injectIntoSystemPrompt({system:l,model:t}))!=null?Rr:l,prompt:v,messages:_},tools:b}),Hn=this;RS({name:"ai.streamText",attributes:U_({telemetry:e,attributes:{...DS({operationId:"ai.streamText",telemetry:e}),...xi,"ai.prompt":{input:()=>JSON.stringify({system:l,prompt:v,messages:_})},"ai.settings.maxSteps":H}}),tracer:mr,endWhenDone:!1,fn:async Ct=>{Su=Ct;async function Mr({currentStep:Ze,responseMessages:Pn,usage:Hr,stepType:Jr,previousStepText:Na,hasLeadingWhitespace:Ui,messageId:Fr}){var ir;let yr=Pn.length===0?Lr.type:"messages",sn=[...Lr.messages,...Pn],ed=await kU({prompt:{type:yr,system:Lr.system,messages:sn},modelSupportsImageUrls:t.supportsImageUrls,modelSupportsUrl:(ir=t.supportsUrl)==null?void 0:ir.bind(t)}),ti={type:"regular",...v2({tools:b,toolChoice:C,activeTools:K})},{result:{stream:td,warnings:Eu,rawResponse:xn,request:os},doStreamSpan:Jt,startTimestampMs:ji}=await Ci(()=>RS({name:"ai.streamText.doStream",attributes:U_({telemetry:e,attributes:{...DS({operationId:"ai.streamText.doStream",telemetry:e}),...xi,"ai.prompt.format":{input:()=>yr},"ai.prompt.messages":{input:()=>JSON.stringify(ed)},"ai.prompt.tools":{input:()=>{var vr;return(vr=ti.tools)==null?void 0:vr.map(Dn=>JSON.stringify(Dn))}},"ai.prompt.toolChoice":{input:()=>ti.toolChoice!=null?JSON.stringify(ti.toolChoice):void 0},"gen_ai.system":t.provider,"gen_ai.request.model":t.modelId,"gen_ai.request.frequency_penalty":n.frequencyPenalty,"gen_ai.request.max_tokens":n.maxTokens,"gen_ai.request.presence_penalty":n.presencePenalty,"gen_ai.request.stop_sequences":n.stopSequences,"gen_ai.request.temperature":n.temperature,"gen_ai.request.top_k":n.topK,"gen_ai.request.top_p":n.topP}}),tracer:mr,endWhenDone:!1,fn:async vr=>({startTimestampMs:Ie(),doStreamSpan:vr,result:await t.doStream({mode:ti,...FU(n),inputFormat:yr,responseFormat:Z==null?void 0:Z.responseFormat({model:t}),prompt:ed,providerMetadata:he,abortSignal:a,headers:r})})})),Ha=D2({tools:b,generatorStream:td,toolCallStreaming:U,tracer:mr,telemetry:e,system:l,messages:sn,repairToolCall:q,abortSignal:a}),ss=os??{},Ca=[],rd=[],il=[],Ji,xa="unknown",Di={promptTokens:0,completionTokens:0,totalTokens:0},us,Gs=!0,ui="",al=Jr==="continue"?Na:"",Vs,Da={id:Ae(),timestamp:_e(),modelId:t.modelId},ri="",rc=!1,zs=!0,li=!1;async function ua({controller:vr,chunk:Dn}){vr.enqueue(Dn),ui+=Dn.textDelta,al+=Dn.textDelta,rc=!0,li=Dn.textDelta.trimEnd()!==Dn.textDelta}Hn.addStream(Ha.pipeThrough(new TransformStream({async transform(vr,Dn){var Ra,Zr,gi;if(Gs){let Xr=Ie()-ji;Gs=!1,Jt.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":Xr}),Jt.setAttributes({"ai.response.msToFirstChunk":Xr}),Dn.enqueue({type:"step-start",messageId:Fr,request:ss,warnings:Eu??[]})}if(vr.type==="text-delta"&&vr.textDelta.length===0)return;let Ga=vr.type;switch(Ga){case"text-delta":{if(ne){let Xr=zs&&Ui?vr.textDelta.trimStart():vr.textDelta;if(Xr.length===0)break;zs=!1,ri+=Xr;let la=g2(ri);la!=null&&(ri=la.suffix,await ua({controller:Dn,chunk:{type:"text-delta",textDelta:la.prefix+la.whitespace}}))}else await ua({controller:Dn,chunk:vr});break}case"reasoning":{Dn.enqueue(vr),Ji==null?(Ji={type:"text",text:vr.textDelta},il.push(Ji)):Ji.text+=vr.textDelta;break}case"reasoning-signature":{if(Dn.enqueue(vr),Ji==null)throw new I2({chunk:vr,message:"reasoning-signature without reasoning"});Ji.signature=vr.signature,Ji=void 0;break}case"redacted-reasoning":{Dn.enqueue(vr),il.push({type:"redacted",data:vr.data});break}case"tool-call":{Dn.enqueue(vr),Ca.push(vr);break}case"tool-result":{Dn.enqueue(vr),rd.push(vr);break}case"response-metadata":{Da={id:(Ra=vr.id)!=null?Ra:Da.id,timestamp:(Zr=vr.timestamp)!=null?Zr:Da.timestamp,modelId:(gi=vr.modelId)!=null?gi:Da.modelId};break}case"finish":{Di=vr.usage,xa=vr.finishReason,us=vr.experimental_providerMetadata,Vs=vr.logprobs;let Xr=Ie()-ji;Jt.addEvent("ai.stream.finish"),Jt.setAttributes({"ai.response.msToFinish":Xr,"ai.response.avgCompletionTokensPerSecond":1e3*Di.completionTokens/Xr});break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{Dn.enqueue(vr);break}case"error":{Dn.enqueue(vr),xa="error";break}default:{let Xr=Ga;throw new Error(`Unknown chunk type: ${Xr}`)}}},async flush(vr){let Dn=Ca.length>0?JSON.stringify(Ca):void 0,Ra="done";Ze+1<H&&(ne&&xa==="length"&&Ca.length===0?Ra="continue":Ca.length>0&&rd.length===Ca.length&&(Ra="tool-result")),ne&&ri.length>0&&(Ra!=="continue"||Jr==="continue"&&!rc)&&(await ua({controller:vr,chunk:{type:"text-delta",textDelta:ri}}),ri="");try{Jt.setAttributes(U_({telemetry:e,attributes:{"ai.response.finishReason":xa,"ai.response.text":{output:()=>ui},"ai.response.toolCalls":{output:()=>Dn},"ai.response.id":Da.id,"ai.response.model":Da.modelId,"ai.response.timestamp":Da.timestamp.toISOString(),"ai.usage.promptTokens":Di.promptTokens,"ai.usage.completionTokens":Di.completionTokens,"gen_ai.response.finish_reasons":[xa],"gen_ai.response.id":Da.id,"gen_ai.response.model":Da.modelId,"gen_ai.usage.input_tokens":Di.promptTokens,"gen_ai.usage.output_tokens":Di.completionTokens}}))}catch{}finally{Jt.end()}vr.enqueue({type:"step-finish",finishReason:xa,usage:Di,providerMetadata:us,experimental_providerMetadata:us,logprobs:Vs,request:ss,response:{...Da,headers:xn==null?void 0:xn.headers},warnings:Eu,isContinued:Ra==="continue",messageId:Fr});let Zr=n2(Hr,Di);if(Ra==="done")vr.enqueue({type:"finish",finishReason:xa,usage:Zr,providerMetadata:us,experimental_providerMetadata:us,logprobs:Vs,response:{...Da,headers:xn==null?void 0:xn.headers}}),Hn.closeStream();else{if(Jr==="continue"){let gi=Pn[Pn.length-1];typeof gi.content=="string"?gi.content+=ui:gi.content.push({text:ui,type:"text"})}else Pn.push(...Tx({text:ui,reasoning:il,tools:b??{},toolCalls:Ca,toolResults:rd,messageId:Fr,generateMessageId:He}));await Mr({currentStep:Ze+1,responseMessages:Pn,usage:Zr,stepType:Ra,previousStepText:al,hasLeadingWhitespace:li,messageId:Ra==="continue"?Fr:He()})}}})))}await Mr({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:He()})}}).catch(Ct=>{Hn.addStream(new ReadableStream({start(Mr){Mr.enqueue({type:"error",error:Ct}),Mr.close()}})),Hn.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){let[t,e]=this.baseStream.tee();return this.baseStream=e,t}get textStream(){return xS(this.teeStream().pipeThrough(new TransformStream({transform({part:t},e){t.type==="text-delta"&&e.enqueue(t.textDelta)}})))}get fullStream(){return xS(this.teeStream().pipeThrough(new TransformStream({transform({part:t},e){e.enqueue(t)}})))}async consumeStream(){let t=this.fullStream;for await(let e of t);}get experimental_partialOutputStream(){if(this.output==null)throw new f2;return xS(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:t},e){t!=null&&e.enqueue(t)}})))}toDataStreamInternal({getErrorMessage:t=()=>"An error occurred.",sendUsage:e=!0,sendReasoning:r=!1,sendSources:n=!1}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,a)=>{let l=i.type;switch(l){case"text-delta":{a.enqueue(Hs("text",i.textDelta));break}case"reasoning":{r&&a.enqueue(Hs("reasoning",i.textDelta));break}case"redacted-reasoning":{r&&a.enqueue(Hs("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{r&&a.enqueue(Hs("reasoning_signature",{signature:i.signature}));break}case"source":{n&&a.enqueue(Hs("source",i.source));break}case"tool-call-streaming-start":{a.enqueue(Hs("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{a.enqueue(Hs("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{a.enqueue(Hs("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{a.enqueue(Hs("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{a.enqueue(Hs("error",t(i.error)));break}case"step-start":{a.enqueue(Hs("start_step",{messageId:i.messageId}));break}case"step-finish":{a.enqueue(Hs("finish_step",{finishReason:i.finishReason,usage:e?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{a.enqueue(Hs("finish_message",{finishReason:i.finishReason,usage:e?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{let v=l;throw new Error(`Unknown chunk type: ${v}`)}}}}))}pipeDataStreamToResponse(t,{status:e,statusText:r,headers:n,data:i,getErrorMessage:a,sendUsage:l,sendReasoning:v,sendSources:_}={}){_x({response:t,status:e,statusText:r,headers:gx(n,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:i,getErrorMessage:a,sendUsage:l,sendReasoning:v,sendSources:_})})}pipeTextStreamToResponse(t,e){_x({response:t,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText,headers:gx(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(t){let e=this.toDataStreamInternal({getErrorMessage:t==null?void 0:t.getErrorMessage,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources}).pipeThrough(new TextEncoderStream);return t!=null&&t.data?PS(t==null?void 0:t.data.stream,e):e}mergeIntoDataStream(t,e){t.merge(this.toDataStreamInternal({getErrorMessage:t.onError,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources}))}toDataStreamResponse({headers:t,status:e,statusText:r,data:n,getErrorMessage:i,sendUsage:a,sendReasoning:l,sendSources:v}={}){return new Response(this.toDataStream({data:n,getErrorMessage:i,sendUsage:a,sendReasoning:l,sendSources:v}),{status:e,statusText:r,headers:Ew(t,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(t){var e;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(e=t==null?void 0:t.status)!=null?e:200,headers:Ew(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"})})}};var P2="AI_NoSuchProviderError",L2=`vercel.ai.error.${P2}`,M2=Symbol.for(L2),F2;F2=M2;var U2={};AS(U2,{mergeIntoDataStream:()=>$2,toDataStream:()=>j2,toDataStreamResponse:()=>Y2});function vD(t={}){let e=new TextEncoder,r="";return new TransformStream({async start(){t.onStart&&await t.onStart()},async transform(n,i){i.enqueue(e.encode(n)),r+=n,t.onToken&&await t.onToken(n),t.onText&&typeof n=="string"&&await t.onText(n)},async flush(){t.onCompletion&&await t.onCompletion(r),t.onFinal&&await t.onFinal(r)}})}function LS(t,e){return t.pipeThrough(new TransformStream({transform:async(r,n)=>{var i;if(typeof r=="string"){n.enqueue(r);return}if("event"in r){r.event==="on_chat_model_stream"&&Ix((i=r.data)==null?void 0:i.chunk,n);return}Ix(r,n)}})).pipeThrough(vD(e)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,n)=>{n.enqueue(Hs("text",r))}}))}function j2(t,e){return LS(t,e).pipeThrough(new TextEncoderStream)}function Y2(t,e){var r;let n=LS(t,e==null?void 0:e.callbacks).pipeThrough(new TextEncoderStream),i=e==null?void 0:e.data,a=e==null?void 0:e.init,l=i?PS(i.stream,n):n;return new Response(l,{status:(r=a==null?void 0:a.status)!=null?r:200,statusText:a==null?void 0:a.statusText,headers:Ew(a==null?void 0:a.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function $2(t,e){e.dataStream.merge(LS(t,e.callbacks))}function Ix(t,e){if(typeof t.content=="string")e.enqueue(t.content);else{let r=t.content;for(let n of r)n.type==="text"&&e.enqueue(n.text)}}var B2={};AS(B2,{mergeIntoDataStream:()=>G2,toDataStream:()=>q2,toDataStreamResponse:()=>H2});function MS(t,e){let r=V2();return vN(t[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(n,i){i.enqueue(r(n.delta))}})).pipeThrough(vD(e)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,i)=>{i.enqueue(Hs("text",n))}}))}function q2(t,e){return MS(t,e).pipeThrough(new TextEncoderStream)}function H2(t,e={}){var r;let{init:n,data:i,callbacks:a}=e,l=MS(t,a).pipeThrough(new TextEncoderStream),v=i?PS(i.stream,l):l;return new Response(v,{status:(r=n==null?void 0:n.status)!=null?r:200,statusText:n==null?void 0:n.statusText,headers:Ew(n==null?void 0:n.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function G2(t,e){e.dataStream.merge(MS(t,e.callbacks))}function V2(){let t=!0;return e=>(t&&(e=e.trimStart(),e&&(t=!1)),e)}var W3=15*1e3;function hD(t){try{return JSON.parse(t)}catch{return null}}function gD(t){return JSON.stringify(t)}function _D(t){async function e({error:r,toolCall:n}){if(Kg.isInstance(r)){let i=r.toolName.split(".");if(i.length==2){let[a,l]=i,v=ig[a],_=hD(n.args);if(v){let b={...r,event:"repair.tool"};return t.log.warn(`Tool name: ${r.toolName}`,b),"command"in v.parameters.shape&&_&&!_.command?(_.command=l,{...n,toolName:a,args:gD(_)}):{...n,toolName:a}}}if(ig["multicoder_"+r.toolName]){let a="multicoder_"+r.toolName;return{...n,toolName:a}}return null}if(j_.isInstance(r)){let i=r.toolName,a=hD(r.toolArgs),l=r.cause,v=[];if(a&&lh.isInstance(l)){let _=l.cause;if(_ instanceof Xl){for(let C of _.issues){let U=ig[i];if(U!=null&&U.repair){let W=U.repair(C,a);if(typeof W=="object")Object.assign(a,W);else return null}else return null;v.push(C.path.join("."))}let b={...r,event:"repair.args"};return t.log.warn(`Tool arguments: ${r.toolName}.${v.join(", ")}`,b),{...n,args:gD(a)}}}return null}return null}return e}var z2=[lw,cw,fp,fw,k_,si,$a,rg],ig=Object.fromEntries(z2.map(t=>[t.name,W2(t)]));function W2(t){return{...t,description:Ta(t.description),async execute(e,r){return t.execute?t.execute(e,r.abortSignal.session):"ok"}}}var yD=t=>`# Multicoder Agent

## Role and Identity

### Role Definition
You are Multicoder Agent - an AI coding assistant integrated into VS Code. Your purpose is to help developers write better code through structured requirements gathering, solution design and implementation.

### Agentic Coding
You deliver complete, high quality, fully integrated solutions to the user requests:
- Take some time to inspect and fully undestand the existing codebase
- Maintain a clear picture of project parts, interdependencies and execution flow
- Proactively ask clarifying questions
- Collect complete detailed requirements, constraints and success criteria for each task
- Investigate the existing code and find all missing information before making any decisions
- Consider multiple paths before choosing the right solution
- Use the right level of details for the design or planning documents
- Spend as much efforts and resources as required for a high quality outcome

### Technical Competencies
- Deep understanding of software engineering principles
- Strong algorithmic and system design skills
- Experience with multiple programming languages and paradigms
- Knowledge of development best practices and patterns
- Ability to analyze tradeoffs and make design decisions

## Operating Environment

### VS Code Extension
You were added to the user's development environment by installing and activating Multicoder Agent VS Code extension. As an AI Agent, you can access the project workspace using the provided tools for:
- Editor windows and open files
- Workspace folders and file system
- Source control integration
- Terminal and output panels
- Problems and diagnostics
- Testing frameworks

### Interactive Chat
You interact with a user as a chat participant in GitHub Copilot Chat. 
- Proactively ask clarifying questions using ${k_.name} tool
- Finish your responses invoking ${si.name} tool
- Use ${$a.name} tool to provide followup actions

### Source Code
You inspect and analyze the project structure using ${lw.name} tool
- Read the content of the project source files
- List available files and folders in project directories
- Check if the source file or directory exists

### Project Documents
The requirement specifications, design documents and implementation plans are stored separately from the project source code and available through the ${cw.name} tool.
- Read the document content
- List available documents or document folders

### File System
You manipulate workspace files and directories using ${fw.name} tool.
- Create new directories
- Delete directories or files

### Editor
You create and modify source files and documents using ${fp.name} tool.
- Insert, modify and delete text
- Handle selections and cursors
- Format code and documents
- Apply workspace edits


## Development Workflow

### Project Understanding
- Analyze existing codebase
- Review documentation
- Identify patterns and conventions
- Map dependencies and structure

### Requirements Gathering
- Ask clarifying questions
- Validate assumptions
- Define acceptance criteria
- Document constraints

### Solution Design
- Create high-level architecture
- Define interfaces and components
- Choose appropriate patterns
- Consider alternatives
- Review tradeoffs

### Implementation Planning
- Break down into steps
- Estimate complexity
- Identify dependencies
- Define milestones

### Hierarchical Execution
- Execute step-by-step plan
- Handle subtasks recursively
- Maintain context stack
- Track progress

## Behavioral Guidelines

### Input Validation and Clarification
- Verify requirements completeness
- Resolve ambiguities early
- Ask focused questions
- Provide examples

### Response Format & Structure
- Use clear headings
- Include code blocks
- Add explanatory comments
- Show progress summaries

### Writing Style
- Be concise and direct
- Use technical terminology
- Focus on solutions
- Explain key decisions

### Coding Conventions
- Follow project style
- Use consistent naming
- Add proper comments
- Structure logically

### Development Best Practices
- Write maintainable code
- Consider performance
- Handle errors properly
- Add proper validation

### Iterative Development Approach
- Start simple
- Refine gradually
- Get feedback early
- Improve incrementally

### Error Handling and Uncertainty
- Validate inputs
- Handle edge cases
- Provide fallbacks
- Report issues clearly
`;var K2=`
You are direct and to the point. You don't waste time with pleasantries or unnecessary context. 
Your goal is to provide accurate, practical solutions to coding problems as efficiently as possible.

You use short code snippets to illustrate your points. These snippets are always properly formatted 
and indented for readability. You explain the key parts of the code, but assume a certain level of 
programming knowledge from your audience.

You often break down your answers into steps or bullet points for clarity. You're not afraid to point out 
flaws in the original question or suggest better approaches if you see them.

You include relevant documentation links or references to support your answers, but you don't just link-drop 
without explanation. You summarize the key points and explain why they're relevant.

Your tone is professional and sometimes a bit terse. You're here to solve problems, not to make friends. 
However, you're also not rude or dismissive. If a question is unclear, you ask for clarification rather than 
making assumptions.

You're aware of best practices and potential pitfalls, so you often include warnings about edge cases or 
performance issues that might not be immediately obvious.
`,J2=`
You are a seasoned software developer with a deep understanding of core programming principles and system design. 
Your experience spans multiple domains, allowing you to approach problems from various angles.

You excel at breaking down complex requirements into manageable components and designing scalable, maintainable 
solutions. Your code is clean, well-documented, and follows best practices for readability and efficiency.

You are particularly strong in algorithmic thinking and optimization. You can analyze performance bottlenecks 
and implement effective solutions, whether it's improving time complexity or reducing resource usage.

You have a solid grasp of software architecture patterns and can adapt them to fit project needs. 
You're comfortable designing and implementing APIs, working with databases, and integrating various system components.

Testing is integral to your development process. You write comprehensive unit tests and understand 
the value of integration and end-to-end testing in ensuring robust, reliable software.

You stay current with industry trends and continuously refine your skills. However, you're pragmatic in your approach, 
focusing on proven technologies that add real value rather than chasing every new trend.

Debugging and troubleshooting are areas where you shine. You can quickly isolate issues in complex systems 
and implement effective fixes.

Lastly, you're a strong communicator. You can explain technical concepts clearly to both technical 
and non-technical stakeholders, facilitating better collaboration across teams.
`,Z2=`
When designing and building complex code, your thought process typically follows these steps:

You start by thoroughly analyzing the problem domain. You break down the requirements, 
identifying the core functionalities and potential edge cases.

Next, you consider the overall architecture. You think about how different components will interact, 
data flow, and potential bottlenecks. You often sketch out high-level diagrams to visualize the system structure.

You evaluate trade-offs between different design patterns and approaches. You consider factors like scalability, 
maintainability, and performance. You try to anticipate future requirements to make the system extensible.

Before diving into implementation, you plan out the data structures and algorithms you'll use. 
You consider time and space complexity, thinking about how the solution will perform with larger datasets.

You break the problem down into smaller, manageable modules or functions. You define clear interfaces 
between these components, thinking about how they'll be tested in isolation.

As you start coding, you focus on creating a minimal viable implementation of each component. 
You write unit tests alongside the code, using test-driven development where appropriate.

You constantly refactor as you go, looking for opportunities to improve code clarity and efficiency. 
You're always thinking about how another developer would read and understand your code.

For particularly complex parts, you often step back and reconsider your approach. Sometimes you'll implement 
a quick prototype to validate a concept before fully committing to it.

Throughout the process, you document your code and decisions. You write clear comments explaining the 'why' 
behind complex logic, not just the 'what'.

As the system comes together, you start thinking about integration testing and how different components interact. 
You look for potential race conditions or unexpected behaviors in the system as a whole.

Finally, you review the entire solution, considering aspects like error handling, logging, and monitoring. 
You think about how the system will behave in production and what tools will be needed to maintain it.

This process is iterative, and you're always ready to revisit earlier decisions as new information or challenges arise. The goal is to create a robust, efficient, and maintainable solution that solves the problem at hand while being flexible enough to adapt to future needs.
`;async function wD(){return[kn([{"Writing style":K2,"Software development experience":J2,"Coding process":Z2}]),Cn("Agreed. I will strictly follow these instructions.")]}var Dy=require("vscode");async function bD(t){let e=[];if(Dy.workspace.workspaceFolders&&e.push(await ym(Ni(".",t.id))),Dy.window.activeTextEditor){let r=Jc(Dy.window.activeTextEditor.document.uri).split("/");for(let n=1;n<r.length;n++)e.push(await ym(Ni(r.slice(0,n).join("/"),t.id)));e.push(await aC())}return e.length?[kn(...e),Cn("Ok. How can I help you?")]:[]}var nl=require("vscode");async function SD(t){let{request:e}=t,r=[];for(let{id:n,name:i,modelDescription:a,value:l}of e.references){let v=String(l);n!="vscode.implicit.viewport"&&(l instanceof nl.Uri?await Zc(l)?v=await tg(l):await mm(l)&&(v=await ym(l)):l instanceof nl.Location&&(v=await rC(l.uri,i,l.range)),a&&(i+=` (${a})`),r.push(v))}for(let{name:n}of e.toolReferences){let i=nl.lm.tools.find(v=>v.name==n),a=i==null?void 0:i.inputSchema;if(!a)continue;let{required:l}=a;if(n=="copilot_getChangedFiles"&&String(l)=="workspacePaths"&&nl.workspace.workspaceFolders){let v=nl.workspace.workspaceFolders.map(({uri:C})=>C.fsPath),_={workspacePaths:v},b=await Iw(n,_,t);r.push(...b)}else if(n=="copilot_getErrors"&&String(l)=="filePaths"){let v=A0(),_=v.map(({path:U})=>U),b={filePaths:_},C=await Iw(n,b,t);r.push(...C)}else if(n=="copilot_testFailure"){let v=await Iw(n,{},t);r.push(...v)}else if(String(l)=="query"){let v=e.prompt,_={query:v},b=await Iw(n,_,t);r.push(...b)}}return r.length?[kn(...r),Cn("Ok. How should I proceed?")]:[]}async function Iw(t,e,{request:r,stream:n,token:i}){let a=await nl.lm.invokeTool(t,{input:e,toolInvocationToken:r.toolInvocationToken},i),l=[];for(let v of a.content)if(v instanceof nl.LanguageModelTextPart)l.push(v.value);else if(v instanceof nl.LanguageModelPromptTsxPart){let{text:_,refs:b}=X2(v);l.push(_),b.forEach(C=>n.reference(C))}return l}function X2(t){let e=[],r=[];function n({text:i,children:a,references:l,lineBreakBefore:v}){v&&e.push(`
`),Array.isArray(l)&&l.forEach(({anchor:_})=>{try{let{external:b,scheme:C,authority:U,path:W,query:K,fragment:q}=_;b?r.push(nl.Uri.parse(b)):r.push(nl.Uri.from({scheme:C,authority:U,path:W,query:K,fragment:q}))}catch{}}),Array.isArray(a)?a.forEach(n):typeof i=="string"&&e.push(i)}return n(t.value.node),{text:e.join(""),refs:r}}var Q2=`
<table><tr><td>
    <span class="codicon codicon-run-all" style="color:var(--vscode-textLink-foreground);"></span>
</td><td>
    <span  style="color:var(--vscode-textLink-foreground);">Running in automatic mode. Press the stop button to switch</span>
</td></tr></table>
`;async function ED(t,e){let{log:r,stream:n,request:i,messages:a}=t,l="chat.next";if(a.length||(l="chat.start",t.resume=null,a.push(...await wD()),a.push(...await bD(t))),t.auto&&(i.command=="resume"?n.markdown(`

Resuming iterrupted task

`):t.resume=null),t.auto=i.command=="auto",t.auto){let C=new Jg.MarkdownString("");C.supportHtml=!0,C.supportThemeIcons=!0,C.appendMarkdown(Q2),t.stream.markdown(C)}t.interrupted=null,t.token.onCancellationRequested(async C=>{if(r.warn("Interrupted",{event:"chat.stop"}),t.interrupted=dS(t,{}),t.auto){let U=t.interrupted,W=await Jg.window.showInformationMessage("Stopped automatic mode task","Resume interactive","Stop");W&&W.startsWith("Resume")&&(t.interrupted===U?Jg.commands.executeCommand("workbench.action.chat.open","@multicoder /resume"):await Jg.window.showInformationMessage("Chat window already in use"))}});let v=i.references.map(({id:C,name:U})=>U+" "+C).join(`
`),_=i.toolReferences.map(({name:C})=>C).join(`
`),b=(i.command?"/"+i.command+" ":"")+i.prompt;return r.info(b,{event:l,command:i.command,references:v,toolrefs:_}),a.push(...await SD(t)),new Promise((C,U)=>{let W=0,K=q=>r.error(new Error(q));if(t.resolve=q=>W++?K("Resolve closed promise"):C(q),t.reject=q=>W++?K("Reject closed promise"):U(q),t.resume){let q=t.resume;return t.resume=null,q(t.request)}Promise.resolve(e(t)).then(q=>t.resolve(q)).catch(q=>t.reject(q))})}function dS(t,e){return new Promise(r=>{t.resume=r,t.resolve(e)})}var FS="experimental_providerMetadata";function TD(t){let e=t.filter(({role:v})=>v=="user"||v=="tool");e.forEach(({content:v})=>{Array.isArray(v)&&v.forEach(_=>{_[FS]&&delete _[FS]})});let r=0,n=e.length-1,{role:i,content:a}=e[n],l=a.length-1;for(;++r<=4;){let v=a[l];if(typeof v=="object"&&(v[FS]={anthropic:{cache_control:{type:"ephemeral"}}}),i=="tool"||--l<0){if(--n<0)break;({role:i,content:a}=e[n]),l=a.length-1}}}function kn(...t){return{role:"user",content:t.map(r=>({type:"text",text:Ta(r)}))}}function Cn(...t){return{role:"assistant",content:t.map(r=>({type:"text",text:Ta(r)}))}}var ej=1e3,tj=100,rj={[$a.name]:!0,[rg.name]:!0};async function Ia(t,e,r=null){let{log:n,stream:i,model:a}=t,l={};t.request.model.family.endsWith("sonnet-thought")&&(l.anthropic={thinking:{type:"enabled",budgetTokens:4096}});let v=0,_=0,b=0,C=0,U=0,W=.2,K=W,q=K;function H(ne,he,Ie={}){i.markdown(""),i.progress(`Retrying (${he}): ${ne}`),q=K+.2*he,n.warn(ne,{...Ie,count:he,temperature:q,event:"retry."+he})}let Z=0;for(;;){if(TD(e),await t.interrupted,++Z>tj)throw new Error("Max requests per turn achieved: "+Z);if(++t.counter>ej)throw new Error("Max total requests achieved: "+t.counter);let ne=new AbortController,he=ne.signal,Ie=t.token;he.session=t;let _e=await mD({model:a,system:yD(a),messages:e,tools:ig,temperature:q,maxTokens:8192,maxSteps:1,abortSignal:he,experimental_toolCallStreaming:!0,experimental_repairToolCall:_D(t),providerOptions:l}),Ae=!1;for await(let jt of _e.fullStream){if(Ie.isCancellationRequested)break;switch(jt.type){case"text-delta":i.markdown(jt.textDelta);break;case"tool-call-streaming-start":let Ht=ig[jt.toolName].progress;Ht&&(i.markdown(""),i.progress(Ht));break;case"reasoning":rj[r==null?void 0:r.name]||i.markdown(jt.textDelta);break;case"error":if(Kg.isInstance(jt.error)&&++v<=5){Ae=!0;let Le=`Unknown tool ${jt.error.toolName}`;H(Le,v,jt.error);break}if(j_.isInstance(jt.error)&&++v<=5){Ae=!0;let Le=`Invalid arguments for tool ${jt.error.toolName}`;H(Le,v,jt.error);break}if(kS.isInstance(jt.error)&&++v<=5){Ae=!0,H("Tool call repair failed",v,jt.error);break}let{event:qr,count:rt,message:fn}=jt.error;if(qr=="retry"){H(fn,rt,jt.error),q=K;break}throw jt.error}}if(t.interrupted){await t.interrupted;continue}let He=await _e.response,tt=await _e.toolCalls,lt=await _e.toolResults,Rt=await _e.usage,zt=await _e.providerMetadata;if(Ae)continue;v=0;let Rr="";for(let jt of lt)jt.result.startsWith("Tool error: ")&&(Rr=jt.result.slice(12));if(Rr)if(++_<3){H(Rr,_);continue}else if(++b<3)H("Tool execution error",b),K=W+.2*b;else throw new Error(Rr);else b=0,K=W;if(_=0,He.messages.length==1){let{role:jt,content:Ht}=He.messages[0];if(jt=="assistant"&&Array.isArray(Ht)&&Ht.length==1){let qr=Ht[0];if(qr.type=="text"&&qr.text===""&&++C<=5){H("Empty response",C),await __(5*C,Ie);continue}}}C=0,q=K,e.push(...He.messages);let cn=e.pop();for(let{toolName:jt,toolCallId:Ht,args:qr,result:rt}of lt){let fn=ig[jt];if(fn!=null&&fn.finalize){let Le=await fn.finalize(qr,t,rt);if(cn.role=="tool"){let Zt=cn.content.find(Wt=>Wt.toolCallId==Ht);Zt&&(Zt.result=Le)}}}if(e.push(cn),tt.length){U=0;for(let jt of tt)if(jt.toolName==(r==null?void 0:r.name))return jt.args}else if(r){let{name:jt,fallback:Ht,retry:qr}=r;if(++U>3){if(Ht)return Ht();throw new Error(`Unable to call ${jt} tool`)}H("Unexpected stop",U,{name:jt}),await __(5*U,Ie),e.push(kn(qr||`Reply using ${jt} tool`))}else return}}var Nw=require("vscode");var ag=".multicoder/task";async function ND(t){if(!await Zc(t))return null;let e=await Nw.commands.executeCommand("vscode.executeDocumentSymbolProvider",t);if(!e||e.length===0)return null;let r=await Nw.workspace.openTextDocument(t),n=e[0],i=ID(n.name),a=n.children.map(({name:l,range:v})=>({header:ID(l),content:r.getText(v).slice(l.length).trim()}));return{title:i,items:a}}function ID(t){return t=t.replace(/^#+\s+/,""),t=t.replace(/^Step \d+[\.:]*\s+/,""),t=t.replace(/^\d+[\.:]+\s+/,""),t}var nj=nr`
    Explain what could be done here. Then use ${$a.name} tool to suggest some actions
`;async function US(t,e){let{task:r,request:n,messages:i}=t;if(r.activity!=="chat")CD(t,e,"chat");else if(!e&&!n.command)e=nj;else if(n.command!="chat")return CD(t,e,""),!1;return i.push(kn(e)),await Ia(t,i),!0}function CD(t,e,r){let{task:n,messages:i}=t;t.task={id:"",depth:0,folder:ag,title:"",start:i.length,prompt:e,activity:r,evals:null,parent:n,step:void 0,summary:"",completed:[],edits:[],cid:t.id}}async function ij(t){let e=[];if(mm(t))for(let{uri:r,isFile:n}of await P0(t))n&&e.push(await A_(r));return e}async function tf({activity:t,id:e,folder:r,depth:n,title:i,prompt:a,step:l,completed:v,edits:_,summary:b,parent:C,cid:U},W=""){let K=[];if(!n)K.push(hi("request",a));else if(typeof l=="number"){let q={id:e,name:i,parent:C.title};K.push([hi("task_metadata",Ao(q)),hi("task_instructions",a)])}else K.push(hi("task_instructions",a));if(!t&&!n&&K.push(await ym(Ni(r,U))),K.push(...await ij(Ni(r,U))),v.forEach(q=>K.push(aj(q))),_.length&&!v.length){let q=new Set(_.map(H=>H.path));for(let H of q)K.push(await tg(Ni(H,U)))}return b&&K.push(b),W&&K.push(W),kn(...K)}function aj({id:t,title:e,summary:r,completed:n,edits:i}){let a={step:t,title:e,status:"completed"},l=[];l.push(hi("step_metadata",Ao(a)));let v=i.map(W=>W.summary),_=n.map(oj);_.length?l.push(..._.map(W=>hi("implementation_details",W))):l.push(hi("implementation_details",Ao(v)));let b=new Set(i.filter(W=>!W.before).map(W=>W.path)),C=new Set(i.filter(W=>W.before&&W.after).map(W=>W.path)),U=new Set(i.filter(W=>W.before&&!W.after).map(W=>W.path));return b.forEach(W=>C.delete(W)),U.forEach(W=>C.delete(W)),l.push(hi("files_created",Ao([...b]))),l.push(hi("files_modified",Ao([...C]))),l.push(hi("files_deleted",Ao([...U]))),l.push(hi("step_summary",r)),l}function oj({id:t,title:e,summary:r,completed:n,edits:i}){let a=i.map(_=>_.summary),l=n.map(_=>_.summary),v=[];return v.push(t+": "+e),l.length?v.push(Ao(l)):a.length>1&&v.push(Ao(a)),v.push(r),v}async function _v(t){let{task:e,messages:r,stream:n}=t,{id:i}=e,{length:a}=r,l=i?"task "+i:"the request";n.progress("Deciding next steps..."),r.push(Cn(`Let me evaluate ${l} for clarity, complexity and workload.`)),r.push(kn(`Sure. Reply with ${rg.name} tool only, no text.`));let v=await Ia(t,r,rg),[_,b,C]=rg.compute(v);e.evals={...v,vagueness:_,complexity:b,workload:C},r.length=a,n.markdown("")}var sj=t=>nr`
    Use ${fp.name} tool to create requirements document in the ${t}/ directory.
    Clarify the request, removing any ambiguities or omissions.
    Use ${k_.name} tool to obtain the missing information.
    Include implied requirements derived from the project configuration and context.
    Skip implementation, focus strictly on the requirements.
    Keep it short and simple for trivial tasks but include enough details for larger requests.
    Produce a minimal, but complete document, do not leave any open questions for the future.
    Apply a very dense, concise writing style, but keep all minor details.
    Provide a short summary using ${si.name} tool.
`,xD=t=>nr`
    ${t}
    ---
    Modify the document, then deliver a very short summary using ${si.name} tool.
`,uj=()=>nr`
    Carefully review the requirements document to find any missing elements.
    Add or correct any significant items and remove anything that is not strictly necessary.
    Focus strictly on the requirements - DO NOT try to design the solution, define data structures or write some code at this point.
`,lj=()=>nr`
    Suggest possible changes which may make the requirements more clear, precise and easy to understand. 
    Include optional elements, alternative approaches or high-level improvements.
    Offer them as followup actions using ${$a.name} tool.
    Only include the actions which improve the content of the requirement specification document(s).
`;async function jS(t,e,r=!1){let{task:n,messages:i,stream:a,log:l}=t,{id:v,title:_,depth:b,folder:C,evals:U,activity:W}=n;if(W!=="spec"){if(r&&(!U.requirements&&U.vagueness<3||b>0))return!1;n.activity="spec",l.info(`${v} ${_}`,{event:"step.spec"}),a.progress("Creating requirements spec..."),i.push(Cn("Let me clarify the request and create a requirements document.")),i.push(kn(sj(C))),await Ia(t,i,si)}else if(e=="i")a.progress("Improving requirements..."),i.push(Cn("Let me review and improve the requirements document.")),i.push(kn(xD(uj()))),await Ia(t,i,si);else if(e)a.progress("Updating requirements..."),i.push(Cn("Let me do some changes in the requirements document.")),i.push(kn(xD(e))),await Ia(t,i,si);else return!1;return t.auto||(i.push(Cn("I will now suggest some followup actions.")),i.push(kn(lj())),await Ia(t,i,$a),t.followups.push({command:"",prompt:"i",label:"\u2B6E\xA0 review and improve"},{command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"},{command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"})),i.length=n.start,i.push(await tf(n)),await _v(t),i.push(Cn("Let me do some changes in the requirements document.")),!0}var cj=t=>nr`
    Use ${fp.name} tool to create solution design document(s) in the ${t}/ directory.
    Analyze the current code, research possible options and design an optimal solution.
    Your goal is to find the most simple solution, very easy to understand and maintain. 
    Only include the features which are explicitely required. Skip anything that can be added at a later stage. Skip implementation steps.
    Keep it short and simple for trivial tasks but include enough details for larger elements.
    Apply a very dense, concise writing style, but keep all minor details.
    Provide a short summary using ${si.name} tool.
`,DD=t=>nr`
    ${t}
    ---
    Modify the document(s), then deliver a very short summary using ${si.name} tool.
`,fj=()=>nr`
    Carefully review the design document(s) to find any missing elements.
    Add or correct any significant items and remove anything that is not strictly necessary.
    Focus strictly on the solution design - DO NOT try to write code, DO NOT make step-by-step plan at this point.
`,dj=()=>nr`
    Suggest possible changes which may make the solution design more clear, precise and easy to understand. 
    Include optional elements, alternative solutions or high-level improvements.
    Offer them as followup actions using ${$a.name} tool.
    Only include the actions which improve the content of the solution design document(s).
`;async function YS(t,e,r=!1){let{task:n,messages:i,stream:a,log:l}=t,{id:v,title:_,depth:b,folder:C,evals:U,activity:W}=n,K=b?"this task":"the request";if(W!=="design"){if(r&&(!U.design&&U.complexity<3||U.complexity<b))return;n.activity="design",l.info(`${v} ${_}`,{event:"step.design"}),a.progress("Designing solution..."),i.push(Cn(`Let me analyze ${K}, explore the existing code and design a solution.`)),i.push(kn(cj(C))),await Ia(t,i,si)}else if(e=="i")a.progress("Improving design..."),i.push(Cn("Let me review and improve the solution design document(s).")),i.push(kn(DD(fj()))),await Ia(t,i,si);else if(e)a.progress("Updating design..."),i.push(Cn("Let me do some changes in the solution design document(s).")),i.push(kn(DD(e))),await Ia(t,i,si);else return;return t.auto||(i.push(Cn("I will now suggest some followup actions.")),i.push(kn(dj())),await Ia(t,i,$a),t.followups.push({command:"",prompt:"i",label:"\u2B6E\xA0 review and improve"},{command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"},{command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"})),i.length=n.start,i.push(await tf(n)),await _v(t),i.push(Cn("Let me do some changes in the solution design document(s).")),!0}var pj=t=>nr`
    Use ${fp.name} tool to create ${t} file containing the detailed implementation plan for this task.
    Split the task into smaller, more manageable steps and specify what should be done at each step.
    Strictly follow the requirements and design documents if available. 
    Only plan for elements and features which are explicitely included in the specs and design.
    Take into account the changes already made in the previous tasks.
    Carefully think through all steps and mentally verify the proposed implementation.
    Follow KISS, YAGNI and SOLID principles, focus on simplicity above all other things.
    This plan is for an implementation by an AI coding agent, it must exclude any human activities (meetings, peer review, manual testing etc)
    Only use the capabilities and the information which you as an AI coding agent have explicit access to as part of this project.
    The document should contain a title and multiple sections (linear structure, no nested sub-sections)
    Each section represents one step of the plan and consists of a header and a step description.
    If the amount of work is very small, describe it as one single step (title with plain text, no section heading).
    Apply a very dense, concise writing style, but keep all minor details.
    Provide a short summary using ${si.name} tool.
`,RD=t=>nr`
    ${t}
    ---
    Modify the document, then deliver a very short summary using ${si.name} tool.
`,mj=()=>nr`
    Carefully analyse each section of the plan to identify any inconsistencies or logical errors. 
    Check for edge cases, cross-dependencies and anything, that can affect successful implementation.
`,vj=()=>nr`
    Suggest possible changes which will make the implementation plan more clear, precise and easy to understand. 
    Include optional elements, alternative implementations or high-level improvements.
    Offer them as followup actions using ${$a.name} tool.
    Only include the actions which improve the content of the implementation plan.
`;async function $S(t,e,r=!1){let{task:n,messages:i,stream:a,log:l}=t,{id:v,title:_,depth:b,folder:C,evals:U,activity:W}=n,K=C+"/implementation_plan.md",q=b?"this task":"this request";if(W!=="plan"){if(r&&(!U.planning&&U.workload<2.5||U.workload<b))return;n.activity="plan",l.info(`${v} ${_}`,{event:"step.plan"}),a.progress("Planning..."),i.push(Cn(`Let me create an implementation plan for ${q}.`)),i.push(kn(pj(K))),await Ia(t,i,si)}else if(e=="i")a.progress("Improving plan..."),i.push(Cn("Let me review and improve the implementation plan.")),i.push(kn(RD(mj()))),await Ia(t,i,si);else if(e)a.progress("Updating plan..."),i.push(Cn("Let me do some changes in the implementation plan.")),i.push(kn(RD(e))),await Ia(t,i,si);else return;return t.auto||(i.push(Cn("I will now suggest some followup actions.")),i.push(kn(vj())),await Ia(t,i,$a),t.followups.push({command:"",prompt:"i",label:"\u2B6E\xA0 review and improve"},{command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"},{command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"})),i.length=n.start,i.push(await tf(n)),i.push(Cn("Let me do some changes in the implementation plan.")),!0}var Qf=require("vscode");function Em(){}Em.prototype={diff:function(e,r){var n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.callback;typeof i=="function"&&(a=i,i={});var l=this;function v(_e){return _e=l.postProcess(_e,i),a?(setTimeout(function(){a(_e)},0),!0):_e}e=this.castInput(e,i),r=this.castInput(r,i),e=this.removeEmpty(this.tokenize(e,i)),r=this.removeEmpty(this.tokenize(r,i));var _=r.length,b=e.length,C=1,U=_+b;i.maxEditLength!=null&&(U=Math.min(U,i.maxEditLength));var W=(n=i.timeout)!==null&&n!==void 0?n:1/0,K=Date.now()+W,q=[{oldPos:-1,lastComponent:void 0}],H=this.extractCommon(q[0],r,e,0,i);if(q[0].oldPos+1>=b&&H+1>=_)return v(OD(l,q[0].lastComponent,r,e,l.useLongestToken));var Z=-1/0,ne=1/0;function he(){for(var _e=Math.max(Z,-C);_e<=Math.min(ne,C);_e+=2){var Ae=void 0,He=q[_e-1],tt=q[_e+1];He&&(q[_e-1]=void 0);var lt=!1;if(tt){var Rt=tt.oldPos-_e;lt=tt&&0<=Rt&&Rt<_}var zt=He&&He.oldPos+1<b;if(!lt&&!zt){q[_e]=void 0;continue}if(!zt||lt&&He.oldPos<tt.oldPos?Ae=l.addToPath(tt,!0,!1,0,i):Ae=l.addToPath(He,!1,!0,1,i),H=l.extractCommon(Ae,r,e,_e,i),Ae.oldPos+1>=b&&H+1>=_)return v(OD(l,Ae.lastComponent,r,e,l.useLongestToken));q[_e]=Ae,Ae.oldPos+1>=b&&(ne=Math.min(ne,_e-1)),H+1>=_&&(Z=Math.max(Z,_e+1))}C++}if(a)(function _e(){setTimeout(function(){if(C>U||Date.now()>K)return a();he()||_e()},0)})();else for(;C<=U&&Date.now()<=K;){var Ie=he();if(Ie)return Ie}},addToPath:function(e,r,n,i,a){var l=e.lastComponent;return l&&!a.oneChangePerToken&&l.added===r&&l.removed===n?{oldPos:e.oldPos+i,lastComponent:{count:l.count+1,added:r,removed:n,previousComponent:l.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:r,removed:n,previousComponent:l}}},extractCommon:function(e,r,n,i,a){for(var l=r.length,v=n.length,_=e.oldPos,b=_-i,C=0;b+1<l&&_+1<v&&this.equals(n[_+1],r[b+1],a);)b++,_++,C++,a.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return C&&!a.oneChangePerToken&&(e.lastComponent={count:C,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=_,b},equals:function(e,r,n){return n.comparator?n.comparator(e,r):e===r||n.ignoreCase&&e.toLowerCase()===r.toLowerCase()},removeEmpty:function(e){for(var r=[],n=0;n<e.length;n++)e[n]&&r.push(e[n]);return r},castInput:function(e){return e},tokenize:function(e){return Array.from(e)},join:function(e){return e.join("")},postProcess:function(e){return e}};function OD(t,e,r,n,i){for(var a=[],l;e;)a.push(e),l=e.previousComponent,delete e.previousComponent,e=l;a.reverse();for(var v=0,_=a.length,b=0,C=0;v<_;v++){var U=a[v];if(U.removed)U.value=t.join(n.slice(C,C+U.count)),C+=U.count;else{if(!U.added&&i){var W=r.slice(b,b+U.count);W=W.map(function(K,q){var H=n[C+q];return H.length>K.length?H:K}),U.value=t.join(W)}else U.value=t.join(r.slice(b,b+U.count));b+=U.count,U.added||(C+=U.count)}}return a}var $6=new Em;function AD(t,e){var r;for(r=0;r<t.length&&r<e.length;r++)if(t[r]!=e[r])return t.slice(0,r);return t.slice(0,r)}function kD(t,e){var r;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(r=0;r<t.length&&r<e.length;r++)if(t[t.length-(r+1)]!=e[e.length-(r+1)])return t.slice(-r);return t.slice(-r)}function BS(t,e,r){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return r+t.slice(e.length)}function qS(t,e,r){if(!e)return t+r;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+r}function Ry(t,e){return BS(t,e,"")}function Cw(t,e){return qS(t,e,"")}function PD(t,e){return e.slice(0,hj(t,e))}function hj(t,e){var r=0;t.length>e.length&&(r=t.length-e.length);var n=e.length;t.length<e.length&&(n=t.length);var i=Array(n),a=0;i[0]=0;for(var l=1;l<n;l++){for(e[l]==e[a]?i[l]=i[a]:i[l]=a;a>0&&e[l]!=e[a];)a=i[a];e[l]==e[a]&&a++}a=0;for(var v=r;v<t.length;v++){for(;a>0&&t[v]!=e[a];)a=i[a];t[v]==e[a]&&a++}return a}var xw="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",gj=new RegExp("[".concat(xw,"]+|\\s+|[^").concat(xw,"]"),"ug"),Dw=new Em;Dw.equals=function(t,e,r){return r.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};Dw.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(e.intlSegmenter.segment(t),function(a){return a.segment})}else r=t.match(gj)||[];var n=[],i=null;return r.forEach(function(a){/\s/.test(a)?i==null?n.push(a):n.push(n.pop()+a):/\s/.test(i)?n[n.length-1]==i?n.push(n.pop()+a):n.push(i+a):n.push(a),i=a}),n};Dw.join=function(t){return t.map(function(e,r){return r==0?e:e.replace(/^\s+/,"")}).join("")};Dw.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var r=null,n=null,i=null;return t.forEach(function(a){a.added?n=a:a.removed?i=a:((n||i)&&LD(r,i,n,a),r=a,n=null,i=null)}),(n||i)&&LD(r,i,n,null),t};function LD(t,e,r,n){if(e&&r){var i=e.value.match(/^\s*/)[0],a=e.value.match(/\s*$/)[0],l=r.value.match(/^\s*/)[0],v=r.value.match(/\s*$/)[0];if(t){var _=AD(i,l);t.value=qS(t.value,l,_),e.value=Ry(e.value,_),r.value=Ry(r.value,_)}if(n){var b=kD(a,v);n.value=BS(n.value,v,b),e.value=Cw(e.value,b),r.value=Cw(r.value,b)}}else if(r)t&&(r.value=r.value.replace(/^\s*/,"")),n&&(n.value=n.value.replace(/^\s*/,""));else if(t&&n){var C=n.value.match(/^\s*/)[0],U=e.value.match(/^\s*/)[0],W=e.value.match(/\s*$/)[0],K=AD(C,U);e.value=Ry(e.value,K);var q=kD(Ry(C,K),W);e.value=Cw(e.value,q),n.value=BS(n.value,C,q),t.value=qS(t.value,C,C.slice(0,C.length-q.length))}else if(n){var H=n.value.match(/^\s*/)[0],Z=e.value.match(/\s*$/)[0],ne=PD(Z,H);e.value=Cw(e.value,ne)}else if(t){var he=t.value.match(/\s*$/)[0],Ie=e.value.match(/^\s*/)[0],_e=PD(he,Ie);e.value=Ry(e.value,_e)}}var _j=new Em;_j.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(xw,"]+|[^\\S\\n\\r]+|[^").concat(xw,"]"),"ug");return t.match(e)||[]};var Rw=new Em;Rw.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var r=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var i=0;i<n.length;i++){var a=n[i];i%2&&!e.newlineIsToken?r[r.length-1]+=a:r.push(a)}return r};Rw.equals=function(t,e,r){return r.ignoreWhitespace?((!r.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),Em.prototype.equals.call(this,t,e,r)};function MD(t,e,r){return Rw.diff(t,e,r)}var yj=new Em;yj.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var wj=new Em;wj.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function HS(t){"@babel/helpers - typeof";return HS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HS(t)}var Oy=new Em;Oy.useLongestToken=!0;Oy.tokenize=Rw.tokenize;Oy.castInput=function(t,e){var r=e.undefinedReplacement,n=e.stringifyReplacer,i=n===void 0?function(a,l){return typeof l>"u"?r:l}:n;return typeof t=="string"?t:JSON.stringify(GS(t,null,null,i),i,"  ")};Oy.equals=function(t,e,r){return Em.prototype.equals.call(Oy,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),r)};function GS(t,e,r,n,i){e=e||[],r=r||[],n&&(t=n(i,t));var a;for(a=0;a<e.length;a+=1)if(e[a]===t)return r[a];var l;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),l=new Array(t.length),r.push(l),a=0;a<t.length;a+=1)l[a]=GS(t[a],e,r,n,i);return e.pop(),r.pop(),l}if(t&&t.toJSON&&(t=t.toJSON()),HS(t)==="object"&&t!==null){e.push(t),l={},r.push(l);var v=[],_;for(_ in t)Object.prototype.hasOwnProperty.call(t,_)&&v.push(_);for(v.sort(),a=0;a<v.length;a+=1)_=v[a],l[_]=GS(t[_],e,r,n,_);e.pop(),r.pop()}else l=t;return l}var VS=new Em;VS.tokenize=function(t){return t.slice()};VS.join=VS.removeEmpty=function(t){return t};function FD(t){let{task:e,stream:r}=t,{id:n,title:i}=e,a=`<table><tr><th> $(list-tree) ${n} ${i} </th></tr></table>`,l=new Qf.MarkdownString(a);l.supportHtml=!0,l.supportThemeIcons=!0,r.markdown(l)}async function UD(t,e,r){let n=(...U)=>`command:multicoder.diffView?${encodeURIComponent(JSON.stringify(U))}`,i=U=>`<span class="codicon codicon-${U}" style="color:var(--vscode-foreground);"></span>`,a=new Qf.MarkdownString(`

`);a.supportHtml=!0,a.supportThemeIcons=!0,a.isTrusted={enabledCommands:["multicoder.diffView"]},a.appendMarkdown(`<h3>${i("check")} ${r}</h3>

`),e.forEach(({summary:U,path:W,id:K})=>{a.appendMarkdown(`- [${U}](${n(W,K,t.id)} 'Open Diff')
`)}),a.appendMarkdown(`

`),t.stream.markdown(a),t.stream.button({title:"Apply All",command:"multicoder.action",arguments:[C],tooltip:"Shows confirmation panel (refactor preview)"});let l=new Set(e.map(({path:U})=>U)),v=A0(),_=new Map;async function b(U){try{return await Vh(U)}catch{return""}}for(let U of l.values()){let W="",K="",q=Ni(U,t.id),H=Kl(q);v.find(Z=>Z.path===H.path)?W=(await Qf.workspace.openTextDocument(H)).getText():W=await b(H),K=await b(q),_.set(U,{before:W,after:K})}async function C(){let U=new Qf.WorkspaceEdit;for(let W of l.values()){let{before:K,after:q}=_.get(W)||{},H=Kl(Ni(W,t.id));K||(H=H.with({scheme:"untitled"}));let Z=await Qf.workspace.openTextDocument(H),ne=Z.getText(),he=q;ne!==he&&bj(U,H,ne,he,!0)}await Qf.workspace.applyEdit(U),t.log.info(r,{event:"action.all"})}}function bj(t,e,r,n,i=!1,a=""){let l=MD(r,n,{ignoreWhitespace:!1}),v=0,_={needsConfirmation:i,label:a};for(let b=0;b<l.length;b++){let C=l[b];if(C.removed){let U=new Qf.Range(v,0,v+C.count,0),W=l[++b];W.added?t.replace(e,U,W.value,_):(t.delete(e,U,_),v+=(W==null?void 0:W.count)||0)}else C.added&&(t.insert(e,new Qf.Position(v,0),C.value,_),v-=C.count);v+=C.count}}var Sj=10;async function YD(t){let{task:e}=t,{title:r,folder:n,activity:i,completed:a}=e,l=await ND(Ni(n+"/implementation_plan.md",t.id));if(l&&!r&&(e.title=l.title),i!=="implement")return!l||l.items.length<2?void 0:(e.activity="implement",await jD(t,l,0),!0);if(a.length<l.items.length)return await jD(t,l,a.length),!0}async function jD(t,e,r){let{task:n,messages:i}=t,{id:a,depth:l}=n,v=(a?a+".":"")+(r+1),_=e.items[r],b=`I will start working on ${e.title}. The first step is: ${_.header}`;if(r&&(b=`I will continue working on ${e.title}. The next step is ${r+1}: ${_.header}`),i.push(Cn(b)),t.task={id:v,depth:l+1,folder:ag+"/"+v,title:_.header,start:i.length,prompt:_.content,activity:"",evals:null,parent:n,step:r,summary:"",completed:[],edits:[],cid:t.id},l>=Sj)throw new Error("Max depth exceeded");FD(t),i.push(await tf(n)),await _v(t)}var Ej=()=>nr`
    Suggest possible changes or improvements to the code created or updated in the current implementation step. 
    Include optional elements, alternative approaches or high-level improvements.
    Offer them as followup actions using ${$a.name} tool.
    Only include the actions which are in scope for this current step.
`;async function $D(t,e){let{task:r,messages:n,log:i}=t,{id:a,title:l,depth:v,activity:_,parent:b,completed:C}=r;if(_!=="finish"&&!C.length){r.activity="finish",i.info(`${a} ${l}`,{event:"step.implement"});let W=v?"this task":"the request";n.push(Cn(`Let me implement ${W} now`)),n.push(kn(`Sure. Finish ${W}, then deliver a summary using ${si.name} tool.`));let K=await Ia(t,n,si);r.summary=K.text||(l||W)+" is completed."}else if(_!=="finish"&&C.length){r.activity="finish",n.push(Cn(`All the steps of ${l} are now completed. Let me summarize what has been done.`)),n.push(kn(`Sure. Deliver a summary using ${si.name} tool.`));let W=await Ia(t,n,si);r.summary=W.text||l+" is completed."}else{if(e)return n.push(Cn("I will make some changes in this last step")),await Nj(t,e),!1;if(b)return b.completed.push(r),b.edits.push(...r.edits),t.task=b,r.parent=null,!1}let U=r.edits;return U.length>1&&await UD(t,U,l||"Task completed"),b||(t.auto=!1),t.auto||(n.push(Cn("I will now suggest some followup actions.")),n.push(kn(Ej())),await Ia(t,n,$a),r.parent&&(typeof r.step=="number"?t.followups.push({command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"},{command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"}):t.followups.push({command:"",prompt:"",label:"\u25B7\xA0 back to parent (Enter)"}))),n.length=r.start,n.push(await tf(r)),n.push(Cn("I will make some changes in this last step")),!0}function Tj(t){let e=t%26,r=(t-e)/26;return String.fromCharCode(...r?[r+96,e+97]:[e+97])}var Ij=0;async function Nj(t,e){let{task:r,messages:n}=t,{depth:i}=r,a=Tj(Ij++);t.task={id:a,depth:i+1,folder:ag+"/"+a,title:"",start:n.length,prompt:e,activity:"",evals:null,parent:r,step:void 0,summary:"",completed:[],edits:[],cid:t.id},n.push(await tf(t.task)),await _v(t)}var Cj=1e3;async function BD(t){let{task:e,request:r,messages:n}=t,{command:i,prompt:a}=r;if(e||(e={id:"",depth:0,folder:ag,title:"",start:n.length,prompt:a,activity:"",evals:null,parent:null,step:void 0,summary:"",completed:[],edits:[],cid:t.id},a||(e.activity="chat"),t.task=e),i=="chat"||e.activity=="chat"){if(await US(t,a))return;e=t.task}switch(n.length=e.start,n.push(await tf(e)),i){case"spec":return await jS(t,a);case"design":return await YS(t,a);case"plan":return await $S(t,a)}if(!e.evals&&!e.activity){await _v(t);let{complexity:v,workload:_}=e.evals;if(v<1||_<1)return n.length=e.start,await US(t,a)}let l=0;for(;++l<Cj;){if(await xj(t,a),!t.auto)return;a=""}throw new Error("Too many steps in autonomous run")}async function xj(t,e){let r=0;for(;++r<10;){let{task:n,messages:i}=t;switch(i.length=n.start,i.push(await tf(n)),n.activity){case"":case"spec":if(await jS(t,e,!0))return;case"design":if(await YS(t,e,!0))return;case"plan":if(await $S(t,e,!0))return;case"implement":if(await YD(t))break;case"finish":if(await $D(t,e))return}}throw new Error("Unexpected loop")}var HD=require("vscode"),Dj=()=>`
Multicoder can work with LLM models provided by **GitHub Copilot** (default configuration) or 
send requests directly to the core provider APIs (**Anthropic**, **OpenAI**).

If you have your own API key and want to use it instead of the Github models, select 'Core Providers' in the Model Provider dropdown (settings panel)
and set your API key(s) using the buttons below.

`;async function qD(t,e){var n;let r=await t.ext.secrets.get(e)||((n=process==null?void 0:process.env)==null?void 0:n[e]);return r&&r.slice(0,12)+"..."+r.slice(-4)}async function zS(t){let{log:e,stream:r}=t;HD.commands.executeCommand("workbench.action.openSettings","@ext:multicoder.multicoder"),e.info("options",{event:"options"}),r.markdown(Dj());let n=await qD(t,"ANTHROPIC_API_KEY");r.markdown(`Anthropic API key: ${n}`),r.button({command:"multicoder.storeApiKey",title:"Set Anthropic key",arguments:["ANTHROPIC_API_KEY","Anthropic API key"]}),r.markdown(`

`);let i=await qD(t,"OPENAI_API_KEY");r.markdown(`OpenAI API key: ${i}`),r.button({command:"multicoder.storeApiKey",title:"Set OpenAI key",arguments:["OPENAI_API_KEY","OpenAI API key"]})}var GD,VD;async function Rj(t){var U,W;let{request:e,ext:r}=t,n=e.model.id,i=yv.workspace.getConfiguration("multicoder"),a=i.get("modelProvider");if(n==GD&&a==VD&&t.model)return;GD=n,VD=a;let l=e.model.family;if(l.startsWith("o1")&&(l=a=="auto"?"deepseek-chat":"o3-mini"),a=="default"&&(a="copilot"),a=="copilot"){t.model=oS({id:l,provider:"copilot",apiKey:""});return}if(a=="auto"&&(a=(U=sS.find(K=>K.family==l))==null?void 0:U.provider,!a))throw new Error("Cannot find model: "+l);let v=QN.find(K=>K.id==a),_=sS.find(K=>K.provider==a&&K.family==l),{envKeyName:b}=v,C=await r.secrets.get(b)||((W=process==null?void 0:process.env)==null?void 0:W[b]);if(!C){await zS(t);return}t.model=oS({..._,apiKey:C})}function Oj({history:t}){for(let e=t.length-1;e>=0;e--){let r=t[e];if(r instanceof yv.ChatResponseTurn){let{id:n,messages:i}=r.result.metadata||{};if(n)return[n,i]}}return[]}function zD(t){let{ext:e,log:r,recent:n}=t,i=yv.chat.createChatParticipant("multicoder",async(C,U,W,K)=>{let[q,H]=Oj(U),{sessionId:Z}=C.toolInvocationToken,ne=q&&n.get(q);!ne&&Z&&(ne=n.get(Z)),q??(q=O0()),H??(H=[]),ne||(ne={id:q,messages:H,...t,request:{},chat:{},stream:{}},ne.log={...t.log,session:ne}),q=ne.id,n.set(q,ne),Z&&n.set(Z,ne),Object.assign(ne,{token:K}),Object.assign(ne.request,C),Object.assign(ne.chat,U),Object.assign(ne.stream,W),ne.followups=[],ne.counter=0,b(ne.request);try{return await Rj(ne),ne.model?C.command=="options"?(await zS(ne),{metadata:{id:q,messages:H}}):(await ED(ne,BD),{metadata:{id:q,messages:ne.messages,followups:ne.followups||[]}}):void 0}catch(he){throw r.error(he),ne.model=null,he}});i.iconPath=yv.Uri.joinPath(e.extensionUri,"resources","multicoder.png"),i.onDidReceiveFeedback(({kind:C})=>{r.info(C?"Good":"Bad",{event:"feedback"})});let a=e.extension.packageJSON.contributes.chatParticipants[0].commands,l=a.filter(({when:C})=>C==null?void 0:C.startsWith("!")).map(({name:C})=>C),v=[...l,"resume"];i.followupProvider={provideFollowups(C){var U;return _(C.metadata?C.metadata.commands:v),((U=C.metadata)==null?void 0:U.followups)||[]}};function _(C){for(let{name:U,when:W}of a){let K=!!C&&C.includes(U)!=W.startsWith("!");yv.commands.executeCommand("setContext",W.replace("!",""),K)}}function b(C){!C.command&&a.find(({name:U})=>"/"+U==C.prompt)&&(r.warn("Command not processed: "+C.prompt),C.command=C.prompt.slice(1),C.prompt="")}}function Aj(t){let e={ext:t,config:WD.workspace.getConfiguration("multicoder"),log:null,telemetry:null,recent:new Map};mI(e),hI(e),bI(e),II(e),zD(e)}function kj(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

@microsoft/1ds-core-js/dist/es5/ms.core.js:
  (*!
   * 1DS JS SDK Core, 4.3.5
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.6 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

@microsoft/1ds-post-js/dist/es5/ms.post.js:
  (*!
   * 1DS JS SDK POST plugin, 4.3.5
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.6 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.5
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.6 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.5
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.6 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)
*/
//# sourceMappingURL=extension.js.map
