var PO=Object.create;var a0=Object.defineProperty;var MO=Object.getOwnPropertyDescriptor;var LO=Object.getOwnPropertyNames;var FO=Object.getPrototypeOf,UO=Object.prototype.hasOwnProperty;var jO=(t,e)=>()=>(t&&(e=t(t=0)),e);var gt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Fb=(t,e)=>{for(var r in e)a0(t,r,{get:e[r],enumerable:!0})},DT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of LO(e))!UO.call(t,i)&&i!==r&&a0(t,i,{get:()=>e[i],enumerable:!(n=MO(e,i))||n.enumerable});return t};var __=(t,e,r)=>(r=t!=null?PO(FO(t)):{},DT(e||!t||!t.__esModule?a0(r,"default",{value:t,enumerable:!0}):r,t)),Dg=t=>DT(a0({},"__esModule",{value:!0}),t);var Yv=gt(o0=>{"use strict";Object.defineProperty(o0,"__esModule",{value:!0});o0.constants=void 0;o0.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_SYMLINK:2097152,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4}});var u0=gt(dy=>{"use strict";Object.defineProperty(dy,"__esModule",{value:!0});dy.Stats=void 0;var YO=Yv(),{S_IFMT:qO,S_IFDIR:HO,S_IFREG:VO,S_IFBLK:GO,S_IFCHR:zO,S_IFLNK:WO,S_IFIFO:JO,S_IFSOCK:KO}=YO.constants,s0=class t{static build(e,r=!1){let n=new t,{uid:i,gid:a,atime:u,mtime:f,ctime:m}=e,y=r?P=>BigInt(P):P=>P;n.uid=y(i),n.gid=y(a),n.rdev=y(e.rdev),n.blksize=y(4096),n.ino=y(e.ino),n.size=y(e.getSize()),n.blocks=y(1),n.atime=u,n.mtime=f,n.ctime=m,n.birthtime=m,n.atimeMs=y(u.getTime()),n.mtimeMs=y(f.getTime());let x=y(m.getTime());if(n.ctimeMs=x,n.birthtimeMs=x,r){n.atimeNs=BigInt(u.getTime())*BigInt(1e6),n.mtimeNs=BigInt(f.getTime())*BigInt(1e6);let P=BigInt(m.getTime())*BigInt(1e6);n.ctimeNs=P,n.birthtimeNs=P}return n.dev=y(0),n.mode=y(e.mode),n.nlink=y(e.nlink),n}_checkModeProperty(e){return(Number(this.mode)&qO)===e}isDirectory(){return this._checkModeProperty(HO)}isFile(){return this._checkModeProperty(VO)}isBlockDevice(){return this._checkModeProperty(GO)}isCharacterDevice(){return this._checkModeProperty(zO)}isSymbolicLink(){return this._checkModeProperty(WO)}isFIFO(){return this._checkModeProperty(JO)}isSocket(){return this._checkModeProperty(KO)}};dy.Stats=s0;dy.default=s0});var y_=gt(qv=>{"use strict";Object.defineProperty(qv,"__esModule",{value:!0});qv.bufferFrom=qv.bufferAllocUnsafe=qv.Buffer=void 0;var c0=require("buffer");Object.defineProperty(qv,"Buffer",{enumerable:!0,get:function(){return c0.Buffer}});function RT(t,...e){return new c0.Buffer(t,...e)}var ZO=c0.Buffer.allocUnsafe||RT;qv.bufferAllocUnsafe=ZO;var XO=c0.Buffer.from||RT;qv.bufferFrom=XO});var Yb=gt(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});Kl.AssertionError=Kl.RangeError=Kl.TypeError=Kl.Error=void 0;Kl.message=PT;Kl.E=Dt;var Hv=require("assert"),jb=require("util"),OT=typeof Symbol>"u"?"_kCode":Symbol("code"),AT={};function $b(t){return class extends t{constructor(r,...n){super(PT(r,n)),this.code=r,this[OT]=r,this.name=`${super.name} [${this[OT]}]`}}}var f0=typeof globalThis<"u"?globalThis:global,Bb=class extends f0.Error{constructor(e){if(typeof e!="object"||e===null)throw new Kl.TypeError("ERR_INVALID_ARG_TYPE","options","object");e.message?super(e.message):super(`${jb.inspect(e.actual).slice(0,128)} ${e.operator} ${jb.inspect(e.expected).slice(0,128)}`),this.generatedMessage=!e.message,this.name="AssertionError [ERR_ASSERTION]",this.code="ERR_ASSERTION",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,Kl.Error.captureStackTrace(this,e.stackStartFunction)}};Kl.AssertionError=Bb;function PT(t,e){Hv.strictEqual(typeof t,"string");let r=AT[t];Hv(r,`An invalid error message key was used: ${t}.`);let n;if(typeof r=="function")n=r;else{if(n=jb.format,e===void 0||e.length===0)return r;e.unshift(r)}return String(n.apply(null,e))}function Dt(t,e){AT[t]=typeof e=="function"?e:String(e)}Kl.Error=$b(f0.Error);Kl.TypeError=$b(f0.TypeError);Kl.RangeError=$b(f0.RangeError);Dt("ERR_ARG_NOT_ITERABLE","%s must be iterable");Dt("ERR_ASSERTION","%s");Dt("ERR_BUFFER_OUT_OF_BOUNDS",tA);Dt("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received");Dt("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s");Dt("ERR_CPU_USAGE","Unable to obtain cpu usage %s");Dt("ERR_DNS_SET_SERVERS_FAILED",(t,e)=>`c-ares failed to set servers: "${t}" [${e}]`);Dt("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value");Dt("ERR_ENCODING_NOT_SUPPORTED",t=>`The "${t}" encoding is not supported`);Dt("ERR_ENCODING_INVALID_ENCODED_DATA",t=>`The encoded data was not valid for encoding ${t}`);Dt("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client");Dt("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s");Dt("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding");Dt("ERR_INDEX_OUT_OF_RANGE","Index out of range");Dt("ERR_INVALID_ARG_TYPE",QO);Dt("ERR_INVALID_ARRAY_LENGTH",(t,e,r)=>(Hv.strictEqual(typeof r,"number"),`The array "${t}" (length ${r}) must be of length ${e}.`));Dt("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s");Dt("ERR_INVALID_CALLBACK","Callback must be a function");Dt("ERR_INVALID_CHAR","Invalid character in %s");Dt("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column");Dt("ERR_INVALID_FD",'"fd" must be a positive integer: %s');Dt("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s');Dt("ERR_INVALID_FILE_URL_PATH","File URL path %s");Dt("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent");Dt("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s");Dt("ERR_INVALID_OPT_VALUE",(t,e)=>`The value "${String(e)}" is invalid for option "${t}"`);Dt("ERR_INVALID_OPT_VALUE_ENCODING",t=>`The value "${String(t)}" is invalid for option "encoding"`);Dt("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL');Dt("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s");Dt("ERR_INVALID_THIS",'Value of "this" must be of type %s');Dt("ERR_INVALID_TUPLE","%s must be an iterable %s tuple");Dt("ERR_INVALID_URL","Invalid URL: %s");Dt("ERR_INVALID_URL_SCHEME",t=>`The URL must be ${l0(t,"scheme")}`);Dt("ERR_IPC_CHANNEL_CLOSED","Channel closed");Dt("ERR_IPC_DISCONNECTED","IPC channel is already disconnected");Dt("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe");Dt("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks");Dt("ERR_MISSING_ARGS",eA);Dt("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Dt("ERR_NAPI_CONS_FUNCTION","Constructor must be a function");Dt("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object");Dt("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support");Dt("ERR_NO_LONGER_SUPPORTED","%s is no longer supported");Dt("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s");Dt("ERR_SOCKET_ALREADY_BOUND","Socket is already bound");Dt("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536");Dt("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6");Dt("ERR_SOCKET_CANNOT_SEND","Unable to send data");Dt("ERR_SOCKET_CLOSED","Socket is closed");Dt("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running");Dt("ERR_STDERR_CLOSE","process.stderr cannot be closed");Dt("ERR_STDOUT_CLOSE","process.stdout cannot be closed");Dt("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode");Dt("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s");Dt("ERR_TLS_DH_PARAM_SIZE",t=>`DH parameter size ${t} is less than 2048`);Dt("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout");Dt("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate");Dt("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext');Dt("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected");Dt("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming");Dt("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0");Dt("ERR_UNKNOWN_ENCODING","Unknown encoding: %s");Dt("ERR_UNKNOWN_SIGNAL","Unknown signal: %s");Dt("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type");Dt("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type");Dt("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl");function QO(t,e,r){Hv(t,"name is required");let n;e.includes("not ")?(n="must not be",e=e.split("not ")[1]):n="must be";let i;if(Array.isArray(t))i=`The ${t.map(u=>`"${u}"`).join(", ")} arguments ${n} ${l0(e,"type")}`;else if(t.includes(" argument"))i=`The ${t} ${n} ${l0(e,"type")}`;else{let a=t.includes(".")?"property":"argument";i=`The "${t}" ${a} ${n} ${l0(e,"type")}`}return arguments.length>=3&&(i+=`. Received type ${r!==null?typeof r:"null"}`),i}function eA(...t){Hv(t.length>0,"At least one arg needs to be specified");let e="The ",r=t.length;switch(t=t.map(n=>`"${n}"`),r){case 1:e+=`${t[0]} argument`;break;case 2:e+=`${t[0]} and ${t[1]} arguments`;break;default:e+=t.slice(0,r-1).join(", "),e+=`, and ${t[r-1]} arguments`;break}return`${e} must be specified`}function l0(t,e){if(Hv(t,"expected is required"),Hv(typeof e=="string","thing is required"),Array.isArray(t)){let r=t.length;return Hv(r>0,"At least one expected value needs to be specified"),t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function tA(t,e){return e?"Attempt to write outside buffer bounds":`"${t}" is outside of buffer bounds`}});var py=gt(Rg=>{"use strict";Object.defineProperty(Rg,"__esModule",{value:!0});Rg.ENCODING_UTF8=void 0;Rg.assertEncoding=nA;Rg.strToEncoding=iA;var qb=y_(),rA=Yb();Rg.ENCODING_UTF8="utf8";function nA(t){if(t&&!qb.Buffer.isEncoding(t))throw new rA.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",t)}function iA(t,e){return!e||e===Rg.ENCODING_UTF8?t:e==="buffer"?new qb.Buffer(t):new qb.Buffer(t).toString(e)}});var p0=gt(hy=>{"use strict";Object.defineProperty(hy,"__esModule",{value:!0});hy.Dirent=void 0;var aA=Yv(),oA=py(),{S_IFMT:sA,S_IFDIR:uA,S_IFREG:cA,S_IFBLK:lA,S_IFCHR:fA,S_IFLNK:dA,S_IFIFO:pA,S_IFSOCK:hA}=aA.constants,d0=class t{constructor(){this.name="",this.path="",this.parentPath="",this.mode=0}static build(e,r){let n=new t,{mode:i}=e.getNode();return n.name=(0,oA.strToEncoding)(e.getName(),r),n.mode=i,n.path=e.getParentPath(),n.parentPath=n.path,n}_checkModeProperty(e){return(this.mode&sA)===e}isDirectory(){return this._checkModeProperty(uA)}isFile(){return this._checkModeProperty(cA)}isBlockDevice(){return this._checkModeProperty(lA)}isCharacterDevice(){return this._checkModeProperty(fA)}isSymbolicLink(){return this._checkModeProperty(dA)}isFIFO(){return this._checkModeProperty(pA)}isSocket(){return this._checkModeProperty(hA)}};hy.Dirent=d0;hy.default=d0});var Hb=gt(h0=>{"use strict";Object.defineProperty(h0,"__esModule",{value:!0});h0.createProcess=MT;var mA=()=>{if(typeof process<"u")return process;try{return require("process")}catch{return}};function MT(){let t=mA()||{};return t.cwd||(t.cwd=()=>"/"),t.emitWarning||(t.emitWarning=(e,r)=>{console.warn(`${r}${r?": ":""}${e}`)}),t.env||(t.env={}),t}h0.default=MT()});var jT=gt(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});sp.File=sp.Link=sp.Node=sp.SEP=void 0;var g0=Hb(),op=y_(),vA=Yv(),FT=require("events"),gA=u0(),{S_IFMT:uv,S_IFDIR:_A,S_IFREG:UT,S_IFLNK:LT,S_IFCHR:yA,O_APPEND:wA}=vA.constants,m0=()=>{var t,e;return(e=(t=g0.default.getuid)===null||t===void 0?void 0:t.call(g0.default))!==null&&e!==void 0?e:0},v0=()=>{var t,e;return(e=(t=g0.default.getgid)===null||t===void 0?void 0:t.call(g0.default))!==null&&e!==void 0?e:0};sp.SEP="/";var Vb=class extends FT.EventEmitter{constructor(e,r=438){super(),this._uid=m0(),this._gid=v0(),this._atime=new Date,this._mtime=new Date,this._ctime=new Date,this.rdev=0,this._nlink=1,this.mode=r,this.ino=e}set ctime(e){this._ctime=e}get ctime(){return this._ctime}set uid(e){this._uid=e,this.ctime=new Date}get uid(){return this._uid}set gid(e){this._gid=e,this.ctime=new Date}get gid(){return this._gid}set atime(e){this._atime=e,this.ctime=new Date}get atime(){return this._atime}set mtime(e){this._mtime=e,this.ctime=new Date}get mtime(){return this._mtime}get perm(){return this.mode&~uv}set perm(e){this.mode=this.mode&uv|e&~uv,this.ctime=new Date}set nlink(e){this._nlink=e,this.ctime=new Date}get nlink(){return this._nlink}getString(e="utf8"){return this.atime=new Date,this.getBuffer().toString(e)}setString(e){this.buf=(0,op.bufferFrom)(e,"utf8"),this.touch()}getBuffer(){return this.atime=new Date,this.buf||this.setBuffer((0,op.bufferAllocUnsafe)(0)),(0,op.bufferFrom)(this.buf)}setBuffer(e){this.buf=(0,op.bufferFrom)(e),this.touch()}getSize(){return this.buf?this.buf.length:0}setModeProperty(e){this.mode=e}isFile(){return(this.mode&uv)===UT}isDirectory(){return(this.mode&uv)===_A}isSymlink(){return(this.mode&uv)===LT}isCharacterDevice(){return(this.mode&uv)===yA}makeSymlink(e){this.mode=LT|438,this.symlink=e}write(e,r=0,n=e.length,i=0){if(this.buf||(this.buf=(0,op.bufferAllocUnsafe)(0)),i+n>this.buf.length){let a=(0,op.bufferAllocUnsafe)(i+n);this.buf.copy(a,0,0,this.buf.length),this.buf=a}return e.copy(this.buf,i,r,r+n),this.touch(),n}read(e,r=0,n=e.byteLength,i=0){this.atime=new Date,this.buf||(this.buf=(0,op.bufferAllocUnsafe)(0));let a=n;a>e.byteLength&&(a=e.byteLength),a+i>this.buf.length&&(a=this.buf.length-i);let u=e instanceof op.Buffer?e:op.Buffer.from(e.buffer);return this.buf.copy(u,r,i,i+a),a}truncate(e=0){if(!e)this.buf=(0,op.bufferAllocUnsafe)(0);else if(this.buf||(this.buf=(0,op.bufferAllocUnsafe)(0)),e<=this.buf.length)this.buf=this.buf.slice(0,e);else{let r=(0,op.bufferAllocUnsafe)(e);this.buf.copy(r),r.fill(0,this.buf.length),this.buf=r}this.touch()}chmod(e){this.mode=this.mode&uv|e&~uv,this.touch()}chown(e,r){this.uid=e,this.gid=r,this.touch()}touch(){this.mtime=new Date,this.emit("change",this)}canRead(e=m0(),r=v0()){return!!(this.perm&4||r===this.gid&&this.perm&32||e===this.uid&&this.perm&256)}canWrite(e=m0(),r=v0()){return!!(this.perm&2||r===this.gid&&this.perm&16||e===this.uid&&this.perm&128)}canExecute(e=m0(),r=v0()){return!!(this.perm&1||r===this.gid&&this.perm&8||e===this.uid&&this.perm&64)}del(){this.emit("delete",this)}toJSON(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}}};sp.Node=Vb;var Gb=class t extends FT.EventEmitter{get steps(){return this._steps}set steps(e){this._steps=e;for(let[r,n]of this.children.entries())r==="."||r===".."||n==null||n.syncSteps()}constructor(e,r,n){super(),this.children=new Map,this._steps=[],this.ino=0,this.length=0,this.vol=e,this.parent=r,this.name=n,this.syncSteps()}setNode(e){this.node=e,this.ino=e.ino}getNode(){return this.node}createChild(e,r=this.vol.createNode(UT|438)){let n=new t(this.vol,this,e);return n.setNode(r),r.isDirectory()&&(n.children.set(".",n),n.getNode().nlink++),this.setChild(e,n),n}setChild(e,r=new t(this.vol,this,e)){return this.children.set(e,r),r.parent=this,this.length++,r.getNode().isDirectory()&&(r.children.set("..",this),this.getNode().nlink++),this.getNode().mtime=new Date,this.emit("child:add",r,this),r}deleteChild(e){e.getNode().isDirectory()&&(e.children.delete(".."),this.getNode().nlink--),this.children.delete(e.getName()),this.length--,this.getNode().mtime=new Date,this.emit("child:delete",e,this)}getChild(e){return this.getNode().mtime=new Date,this.children.get(e)}getPath(){return this.steps.join(sp.SEP)}getParentPath(){return this.steps.slice(0,-1).join(sp.SEP)}getName(){return this.steps[this.steps.length-1]}toJSON(){return{steps:this.steps,ino:this.ino,children:Array.from(this.children.keys())}}syncSteps(){this.steps=this.parent?this.parent.steps.concat([this.name]):[this.name]}};sp.Link=Gb;var zb=class{constructor(e,r,n,i){this.link=e,this.node=r,this.flags=n,this.fd=i,this.position=0,this.flags&wA&&(this.position=this.getSize())}getString(e="utf8"){return this.node.getString()}setString(e){this.node.setString(e)}getBuffer(){return this.node.getBuffer()}setBuffer(e){this.node.setBuffer(e)}getSize(){return this.node.getSize()}truncate(e){this.node.truncate(e)}seekTo(e){this.position=e}stats(){return gA.default.build(this.node)}write(e,r=0,n=e.length,i){typeof i!="number"&&(i=this.position);let a=this.node.write(e,r,n,i);return this.position=i+a,a}read(e,r=0,n=e.byteLength,i){typeof i!="number"&&(i=this.position);let a=this.node.read(e,r,n,i);return this.position=i+a,a}chmod(e){this.node.chmod(e)}chown(e,r){this.node.chown(e,r)}};sp.File=zb});var BT=gt(Jb=>{"use strict";Object.defineProperty(Jb,"__esModule",{value:!0});var Wb;typeof setImmediate=="function"?Wb=setImmediate.bind(typeof globalThis<"u"?globalThis:global):Wb=setTimeout.bind(typeof globalThis<"u"?globalThis:global);Jb.default=Wb});var Zb=gt(Kb=>{"use strict";Object.defineProperty(Kb,"__esModule",{value:!0});Kb.default=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(()=>t()).catch(()=>{})});var $T=gt(Xb=>{"use strict";Object.defineProperty(Xb,"__esModule",{value:!0});function bA(t,e,r){let n=setTimeout.apply(typeof globalThis<"u"?globalThis:global,arguments);return n&&typeof n=="object"&&typeof n.unref=="function"&&n.unref(),n}Xb.default=bA});var S0=gt(b_=>{"use strict";Object.defineProperty(b_,"__esModule",{value:!0});b_.FLAGS=b_.ERRSTR=void 0;var SA=Yv();b_.ERRSTR={PATH_STR:"path must be a string, Buffer, or Uint8Array",FD:"fd must be a file descriptor",MODE_INT:"mode must be an int",CB:"callback must be a function",UID:"uid must be an unsigned int",GID:"gid must be an unsigned int",LEN:"len must be an integer",ATIME:"atime must be an integer",MTIME:"mtime must be an integer",PREFIX:"filename prefix is required",BUFFER:"buffer must be an instance of Buffer or StaticBuffer",OFFSET:"offset must be an integer",LENGTH:"length must be an integer",POSITION:"position must be an integer"};var{O_RDONLY:YT,O_WRONLY:_0,O_RDWR:w_,O_CREAT:Vv,O_EXCL:y0,O_TRUNC:w0,O_APPEND:b0,O_SYNC:qT}=SA.constants,HT;(function(t){t[t.r=YT]="r",t[t["r+"]=w_]="r+",t[t.rs=YT|qT]="rs",t[t.sr=t.rs]="sr",t[t["rs+"]=w_|qT]="rs+",t[t["sr+"]=t["rs+"]]="sr+",t[t.w=_0|Vv|w0]="w",t[t.wx=_0|Vv|w0|y0]="wx",t[t.xw=t.wx]="xw",t[t["w+"]=w_|Vv|w0]="w+",t[t["wx+"]=w_|Vv|w0|y0]="wx+",t[t["xw+"]=t["wx+"]]="xw+",t[t.a=_0|b0|Vv]="a",t[t.ax=_0|b0|Vv|y0]="ax",t[t.xa=t.ax]="xa",t[t["a+"]=w_|b0|Vv]="a+",t[t["ax+"]=w_|b0|Vv|y0]="ax+",t[t["xa+"]=t["ax+"]]="xa+"})(HT||(b_.FLAGS=HT={}))});var E_=gt(mi=>{"use strict";Object.defineProperty(mi,"__esModule",{value:!0});mi.unixify=mi.getWriteSyncArgs=mi.getWriteArgs=mi.bufToUint8=mi.isWin=void 0;mi.promisify=xA;mi.validateCallback=VT;mi.modeToNumber=GT;mi.nullCheck=zT;mi.pathToFilename=CA;mi.createError=HA;mi.genRndStr6=WT;mi.flagsToNumber=VA;mi.isFd=JT;mi.validateFd=rS;mi.streamToBuffer=GA;mi.dataToBuffer=nS;mi.bufferToEncoding=KA;mi.isReadableStream=ZA;var S_=S0(),Qb=Yb(),tS=y_(),EA=py(),eS=y_(),TA=Zb();mi.isWin=process.platform==="win32";function xA(t,e,r=n=>n){return(...n)=>new Promise((i,a)=>{t[e].bind(t)(...n,(u,f)=>u?a(u):i(r(f)))})}function VT(t){if(typeof t!="function")throw TypeError(S_.ERRSTR.CB);return t}function IA(t,e){if(typeof t=="number")return t;if(typeof t=="string")return parseInt(t,8);if(e)return GT(e)}function GT(t,e){let r=IA(t,e);if(typeof r!="number"||isNaN(r))throw new TypeError(S_.ERRSTR.MODE_INT);return r}function zT(t,e){if((""+t).indexOf("\0")!==-1){let r=new Error("Path must be a string without null bytes");if(r.code="ENOENT",typeof e!="function")throw r;return(0,TA.default)(()=>{e(r)}),!1}return!0}function NA(t){if(t.hostname!=="")throw new Qb.TypeError("ERR_INVALID_FILE_URL_HOST",process.platform);let e=t.pathname;for(let r=0;r<e.length;r++)if(e[r]==="%"){let n=e.codePointAt(r+2)|32;if(e[r+1]==="2"&&n===102)throw new Qb.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters")}return decodeURIComponent(e)}function CA(t){if(t instanceof Uint8Array&&(t=(0,eS.bufferFrom)(t)),typeof t!="string"&&!tS.Buffer.isBuffer(t)){try{if(!(t instanceof require("url").URL))throw new TypeError(S_.ERRSTR.PATH_STR)}catch{throw new TypeError(S_.ERRSTR.PATH_STR)}t=NA(t)}let e=String(t);return zT(e),e}var kA="ENOENT",DA="EBADF",RA="EINVAL",OA="EPERM",AA="EPROTO",PA="EEXIST",MA="ENOTDIR",LA="EMFILE",FA="EACCES",UA="EISDIR",jA="ENOTEMPTY",BA="ENOSYS",$A="ERR_FS_EISDIR",YA="ERR_OUT_OF_RANGE";function qA(t,e="",r="",n=""){let i="";switch(r&&(i=` '${r}'`),n&&(i+=` -> '${n}'`),t){case kA:return`ENOENT: no such file or directory, ${e}${i}`;case DA:return`EBADF: bad file descriptor, ${e}${i}`;case RA:return`EINVAL: invalid argument, ${e}${i}`;case OA:return`EPERM: operation not permitted, ${e}${i}`;case AA:return`EPROTO: protocol error, ${e}${i}`;case PA:return`EEXIST: file already exists, ${e}${i}`;case MA:return`ENOTDIR: not a directory, ${e}${i}`;case UA:return`EISDIR: illegal operation on a directory, ${e}${i}`;case FA:return`EACCES: permission denied, ${e}${i}`;case jA:return`ENOTEMPTY: directory not empty, ${e}${i}`;case LA:return`EMFILE: too many open files, ${e}${i}`;case BA:return`ENOSYS: function not implemented, ${e}${i}`;case $A:return`[ERR_FS_EISDIR]: Path is a directory: ${e} returned EISDIR (is a directory) ${r}`;case YA:return`[ERR_OUT_OF_RANGE]: value out of range, ${e}${i}`;default:return`${t}: error occurred, ${e}${i}`}}function HA(t,e="",r="",n="",i=Error){let a=new i(qA(t,e,r,n));return a.code=t,r&&(a.path=r),a}function WT(){let t=(Math.random()+1).toString(36).substring(2,8);return t.length===6?t:WT()}function VA(t){if(typeof t=="number")return t;if(typeof t=="string"){let e=S_.FLAGS[t];if(typeof e<"u")return e}throw new Qb.TypeError("ERR_INVALID_OPT_VALUE","flags",t)}function JT(t){return t>>>0===t}function rS(t){if(!JT(t))throw TypeError(S_.ERRSTR.FD)}function GA(t){let e=[];return new Promise((r,n)=>{t.on("data",i=>e.push(i)),t.on("end",()=>r(tS.Buffer.concat(e))),t.on("error",n)})}function nS(t,e=EA.ENCODING_UTF8){return tS.Buffer.isBuffer(t)?t:t instanceof Uint8Array?(0,eS.bufferFrom)(t):(0,eS.bufferFrom)(String(t),e)}var zA=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength);mi.bufToUint8=zA;var WA=(t,e,r,n,i,a)=>{rS(t);let u=0,f,m=null,y,x,P=typeof e,V=typeof r,G=typeof n,Y=typeof i;P!=="string"?V==="function"?x=r:G==="function"?(u=r|0,x=n):Y==="function"?(u=r|0,f=n,x=i):(u=r|0,f=n,m=i,x=a):V==="function"?x=r:G==="function"?(m=r,x=n):Y==="function"&&(m=r,y=n,x=i);let q=nS(e,y);P!=="string"?typeof f>"u"&&(f=q.length):(u=0,f=q.length);let J=VT(x);return[t,P==="string",q,u,f,m,J]};mi.getWriteArgs=WA;var JA=(t,e,r,n,i)=>{rS(t);let a,u,f,m,y=typeof e!="string";y?(u=(r||0)|0,f=n,m=i):(m=r,a=n);let x=nS(e,a);return y?typeof f>"u"&&(f=x.length):(u=0,f=x.length),[t,x,u||0,f,m]};mi.getWriteSyncArgs=JA;function KA(t,e){return!e||e==="buffer"?t:t.toString(e)}function ZA(t){return t!==null&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"&&t.readable===!0}var XA=(t,e)=>{let r=t[e];return e>0&&(r==="/"||mi.isWin&&r==="\\")},QA=t=>{let e=t.length-1;if(e<2)return t;for(;XA(t,e);)e--;return t.substr(0,e+1)},eP=(t,e)=>{if(typeof t!="string")throw new TypeError("expected a string");return t=t.replace(/[\\\/]+/g,"/"),e!==!1&&(t=QA(t)),t},tP=(t,e=!0)=>mi.isWin?(t=eP(t,e),t.replace(/^([a-zA-Z]+:|\.\/)/,"")):t;mi.unixify=tP});var KT=gt(E0=>{"use strict";Object.defineProperty(E0,"__esModule",{value:!0});E0.FileHandle=void 0;var Zc=E_(),iS=class{constructor(e,r){this.fs=e,this.fd=r}appendFile(e,r){return(0,Zc.promisify)(this.fs,"appendFile")(this.fd,e,r)}chmod(e){return(0,Zc.promisify)(this.fs,"fchmod")(this.fd,e)}chown(e,r){return(0,Zc.promisify)(this.fs,"fchown")(this.fd,e,r)}close(){return(0,Zc.promisify)(this.fs,"close")(this.fd)}datasync(){return(0,Zc.promisify)(this.fs,"fdatasync")(this.fd)}createReadStream(e){return this.fs.createReadStream("",Object.assign(Object.assign({},e),{fd:this}))}createWriteStream(e){return this.fs.createWriteStream("",Object.assign(Object.assign({},e),{fd:this}))}readableWebStream(e){return new ReadableStream({pull:async r=>{let n=await this.readFile();r.enqueue(n),r.close()}})}read(e,r,n,i){return(0,Zc.promisify)(this.fs,"read",a=>({bytesRead:a,buffer:e}))(this.fd,e,r,n,i)}readv(e,r){return(0,Zc.promisify)(this.fs,"readv",n=>({bytesRead:n,buffers:e}))(this.fd,e,r)}readFile(e){return(0,Zc.promisify)(this.fs,"readFile")(this.fd,e)}stat(e){return(0,Zc.promisify)(this.fs,"fstat")(this.fd,e)}sync(){return(0,Zc.promisify)(this.fs,"fsync")(this.fd)}truncate(e){return(0,Zc.promisify)(this.fs,"ftruncate")(this.fd,e)}utimes(e,r){return(0,Zc.promisify)(this.fs,"futimes")(this.fd,e,r)}write(e,r,n,i){return(0,Zc.promisify)(this.fs,"write",a=>({bytesWritten:a,buffer:e}))(this.fd,e,r,n,i)}writev(e,r){return(0,Zc.promisify)(this.fs,"writev",n=>({bytesWritten:n,buffers:e}))(this.fd,e,r)}writeFile(e,r){return(0,Zc.promisify)(this.fs,"writeFile")(this.fd,e,r)}};E0.FileHandle=iS});var ZT=gt(T0=>{"use strict";Object.defineProperty(T0,"__esModule",{value:!0});T0.FsPromises=void 0;var Jn=E_(),rP=Yv(),aS=class{constructor(e,r){this.fs=e,this.FileHandle=r,this.constants=rP.constants,this.cp=(0,Jn.promisify)(this.fs,"cp"),this.opendir=(0,Jn.promisify)(this.fs,"opendir"),this.statfs=(0,Jn.promisify)(this.fs,"statfs"),this.lutimes=(0,Jn.promisify)(this.fs,"lutimes"),this.access=(0,Jn.promisify)(this.fs,"access"),this.chmod=(0,Jn.promisify)(this.fs,"chmod"),this.chown=(0,Jn.promisify)(this.fs,"chown"),this.copyFile=(0,Jn.promisify)(this.fs,"copyFile"),this.lchmod=(0,Jn.promisify)(this.fs,"lchmod"),this.lchown=(0,Jn.promisify)(this.fs,"lchown"),this.link=(0,Jn.promisify)(this.fs,"link"),this.lstat=(0,Jn.promisify)(this.fs,"lstat"),this.mkdir=(0,Jn.promisify)(this.fs,"mkdir"),this.mkdtemp=(0,Jn.promisify)(this.fs,"mkdtemp"),this.readdir=(0,Jn.promisify)(this.fs,"readdir"),this.readlink=(0,Jn.promisify)(this.fs,"readlink"),this.realpath=(0,Jn.promisify)(this.fs,"realpath"),this.rename=(0,Jn.promisify)(this.fs,"rename"),this.rmdir=(0,Jn.promisify)(this.fs,"rmdir"),this.rm=(0,Jn.promisify)(this.fs,"rm"),this.stat=(0,Jn.promisify)(this.fs,"stat"),this.symlink=(0,Jn.promisify)(this.fs,"symlink"),this.truncate=(0,Jn.promisify)(this.fs,"truncate"),this.unlink=(0,Jn.promisify)(this.fs,"unlink"),this.utimes=(0,Jn.promisify)(this.fs,"utimes"),this.readFile=(n,i)=>(0,Jn.promisify)(this.fs,"readFile")(n instanceof this.FileHandle?n.fd:n,i),this.appendFile=(n,i,a)=>(0,Jn.promisify)(this.fs,"appendFile")(n instanceof this.FileHandle?n.fd:n,i,a),this.open=(n,i="r",a)=>(0,Jn.promisify)(this.fs,"open",u=>new this.FileHandle(this.fs,u))(n,i,a),this.writeFile=(n,i,a)=>((0,Jn.isReadableStream)(i)?(0,Jn.streamToBuffer)(i):Promise.resolve(i)).then(f=>(0,Jn.promisify)(this.fs,"writeFile")(n instanceof this.FileHandle?n.fd:n,f,a)),this.watch=()=>{throw new Error("Not implemented")}}};T0.FsPromises=aS});var Og={};Fb(Og,{__addDisposableResource:()=>Sx,__assign:()=>x0,__asyncDelegator:()=>hx,__asyncGenerator:()=>px,__asyncValues:()=>mx,__await:()=>T_,__awaiter:()=>sx,__classPrivateFieldGet:()=>yx,__classPrivateFieldIn:()=>bx,__classPrivateFieldSet:()=>wx,__createBinding:()=>N0,__decorate:()=>ex,__disposeResources:()=>Ex,__esDecorate:()=>rx,__exportStar:()=>cx,__extends:()=>XT,__generator:()=>ux,__importDefault:()=>_x,__importStar:()=>gx,__makeTemplateObject:()=>vx,__metadata:()=>ox,__param:()=>tx,__propKey:()=>ix,__read:()=>uS,__rest:()=>QT,__rewriteRelativeImportExtension:()=>Tx,__runInitializers:()=>nx,__setFunctionName:()=>ax,__spread:()=>lx,__spreadArray:()=>dx,__spreadArrays:()=>fx,__values:()=>I0,default:()=>aP});function XT(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");oS(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function QT(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function ex(t,e,r,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,r,n);else for(var f=t.length-1;f>=0;f--)(u=t[f])&&(a=(i<3?u(a):i>3?u(e,r,a):u(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a}function tx(t,e){return function(r,n){e(r,n,t)}}function rx(t,e,r,n,i,a){function u(ee){if(ee!==void 0&&typeof ee!="function")throw new TypeError("Function expected");return ee}for(var f=n.kind,m=f==="getter"?"get":f==="setter"?"set":"value",y=!e&&t?n.static?t:t.prototype:null,x=e||(y?Object.getOwnPropertyDescriptor(y,n.name):{}),P,V=!1,G=r.length-1;G>=0;G--){var Y={};for(var q in n)Y[q]=q==="access"?{}:n[q];for(var q in n.access)Y.access[q]=n.access[q];Y.addInitializer=function(ee){if(V)throw new TypeError("Cannot add initializers after decoration has completed");a.push(u(ee||null))};var J=(0,r[G])(f==="accessor"?{get:x.get,set:x.set}:x[m],Y);if(f==="accessor"){if(J===void 0)continue;if(J===null||typeof J!="object")throw new TypeError("Object expected");(P=u(J.get))&&(x.get=P),(P=u(J.set))&&(x.set=P),(P=u(J.init))&&i.unshift(P)}else(P=u(J))&&(f==="field"?i.unshift(P):x[m]=P)}y&&Object.defineProperty(y,n.name,x),V=!0}function nx(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function ix(t){return typeof t=="symbol"?t:"".concat(t)}function ax(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function ox(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function sx(t,e,r,n){function i(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function f(x){try{y(n.next(x))}catch(P){u(P)}}function m(x){try{y(n.throw(x))}catch(P){u(P)}}function y(x){x.done?a(x.value):i(x.value).then(f,m)}y((n=n.apply(t,e||[])).next())})}function ux(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=f(0),u.throw=f(1),u.return=f(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(y){return function(x){return m([y,x])}}function m(y){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,y[0]&&(r=0)),r;)try{if(n=1,i&&(a=y[0]&2?i.return:y[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,y[1])).done)return a;switch(i=0,a&&(y=[y[0]&2,a.value]),y[0]){case 0:case 1:a=y;break;case 4:return r.label++,{value:y[1],done:!1};case 5:r.label++,i=y[1],y=[0];continue;case 7:y=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(y[0]===6||y[0]===2)){r=0;continue}if(y[0]===3&&(!a||y[1]>a[0]&&y[1]<a[3])){r.label=y[1];break}if(y[0]===6&&r.label<a[1]){r.label=a[1],a=y;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(y);break}a[2]&&r.ops.pop(),r.trys.pop();continue}y=e.call(t,r)}catch(x){y=[6,x],i=0}finally{n=a=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}function cx(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&N0(e,t,r)}function I0(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function uS(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],u;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(f){u={error:f}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(u)throw u.error}}return a}function lx(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(uS(arguments[e]));return t}function fx(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],u=0,f=a.length;u<f;u++,i++)n[i]=a[u];return n}function dx(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function T_(t){return this instanceof T_?(this.v=t,this):new T_(t)}function px(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),i[Symbol.asyncIterator]=function(){return this},i;function u(G){return function(Y){return Promise.resolve(Y).then(G,P)}}function f(G,Y){n[G]&&(i[G]=function(q){return new Promise(function(J,ee){a.push([G,q,J,ee])>1||m(G,q)})},Y&&(i[G]=Y(i[G])))}function m(G,Y){try{y(n[G](Y))}catch(q){V(a[0][3],q)}}function y(G){G.value instanceof T_?Promise.resolve(G.value.v).then(x,P):V(a[0][2],G)}function x(G){m("next",G)}function P(G){m("throw",G)}function V(G,Y){G(Y),a.shift(),a.length&&m(a[0][0],a[0][1])}}function hx(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,a){e[i]=t[i]?function(u){return(r=!r)?{value:T_(t[i](u)),done:!1}:a?a(u):u}:a}}function mx(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof I0=="function"?I0(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(u){return new Promise(function(f,m){u=t[a](u),i(f,m,u.done,u.value)})}}function i(a,u,f,m){Promise.resolve(m).then(function(y){a({value:y,done:f})},u)}}function vx(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function gx(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=sS(t),n=0;n<r.length;n++)r[n]!=="default"&&N0(e,t,r[n]);return nP(e,t),e}function _x(t){return t&&t.__esModule?t:{default:t}}function yx(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function wx(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function bx(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Sx(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function Ex(t){function e(a){t.error=t.hasError?new iP(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(a).then(i,function(u){return e(u),i()})}else n|=1}catch(u){e(u)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function Tx(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,a,u){return n?e?".jsx":".js":i&&(!a||!u)?r:i+a+"."+u.toLowerCase()+"js"}):t}var oS,x0,N0,nP,sS,iP,aP,Ag=jO(()=>{oS=function(t,e){return oS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},oS(t,e)};x0=function(){return x0=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},x0.apply(this,arguments)};N0=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};nP=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},sS=function(t){return sS=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},sS(t)};iP=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};aP={__extends:XT,__assign:x0,__rest:QT,__decorate:ex,__param:tx,__esDecorate:rx,__runInitializers:nx,__propKey:ix,__setFunctionName:ax,__metadata:ox,__awaiter:sx,__generator:ux,__createBinding:N0,__exportStar:cx,__values:I0,__read:uS,__spread:lx,__spreadArrays:fx,__spreadArray:dx,__await:T_,__asyncGenerator:px,__asyncDelegator:hx,__asyncValues:mx,__makeTemplateObject:vx,__importStar:gx,__importDefault:_x,__classPrivateFieldGet:yx,__classPrivateFieldSet:wx,__classPrivateFieldIn:bx,__addDisposableResource:Sx,__disposeResources:Ex,__rewriteRelativeImportExtension:Tx}});var xx=gt(C0=>{"use strict";Object.defineProperty(C0,"__esModule",{value:!0});C0.printTree=void 0;var oP=(t="",e)=>{let r="",n=e.length-1;for(;n>=0&&!e[n];n--);for(let i=0;i<=n;i++){let a=e[i];if(!a)continue;let u=i===n,f=a(t+(u?" ":"\u2502")+"  "),m=f?u?"\u2514\u2500":"\u251C\u2500":"\u2502";r+=`
`+t+m+(f?" "+f:"")}return r};C0.printTree=oP});var Ix=gt(k0=>{"use strict";Object.defineProperty(k0,"__esModule",{value:!0});k0.printBinary=void 0;var sP=(t="",e)=>{let r=e[0],n=e[1],i="";return r&&(i+=`
`+t+"\u2190 "+r(t+"  ")),n&&(i+=`
`+t+"\u2192 "+n(t+"  ")),i};k0.printBinary=sP});var Cx=gt(D0=>{"use strict";Object.defineProperty(D0,"__esModule",{value:!0});var Nx=(Ag(),Dg(Og));Nx.__exportStar(xx(),D0);Nx.__exportStar(Ix(),D0)});var kx=gt(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.newNotAllowedError=ec.newTypeMismatchError=ec.newNotFoundError=ec.assertCanWrite=ec.assertName=ec.basename=ec.ctx=void 0;var uP=(t={})=>Object.assign({separator:"/",syncHandleAllowed:!1,mode:"read"},t);ec.ctx=uP;var cP=(t,e)=>{t[t.length-1]===e&&(t=t.slice(0,-1));let r=t.lastIndexOf(e);return r===-1?t:t.slice(r+1)};ec.basename=cP;var lP=/^(\.{1,2})$|^(.*([\/\\]).*)$/,fP=(t,e,r)=>{if(!t||lP.test(t))throw new TypeError(`Failed to execute '${e}' on '${r}': Name is not allowed.`)};ec.assertName=fP;var dP=t=>{if(t!=="readwrite")throw new DOMException("The request is not allowed by the user agent or the platform in the current context.","NotAllowedError")};ec.assertCanWrite=dP;var pP=()=>new DOMException("A requested file or directory could not be found at the time an operation was processed.","NotFoundError");ec.newNotFoundError=pP;var hP=()=>new DOMException("The path supplied exists, but was not an entry of requested type.","TypeMismatchError");ec.newTypeMismatchError=hP;var mP=()=>new DOMException("Permission not granted.","NotAllowedError");ec.newNotAllowedError=mP});var Dx=gt(my=>{"use strict";Object.defineProperty(my,"__esModule",{value:!0});my.toTreeSync=void 0;var vP=Cx(),gP=kx(),_P=(t,e={})=>{var r;let n=e.separator||"/",i=e.dir||n;i[i.length-1]!==n&&(i+=n);let a=e.tab||"",u=(r=e.depth)!==null&&r!==void 0?r:10,f=" (...)";if(u>0){let y=t.readdirSync(i,{withFileTypes:!0});f=(0,vP.printTree)(a,y.map(x=>P=>x.isDirectory()?(0,my.toTreeSync)(t,{dir:i+x.name,depth:u-1,tab:P}):x.isSymbolicLink()?""+x.name+" \u2192 "+t.readlinkSync(i+x.name):""+x.name))}return(0,gP.basename)(i,n)+n+f};my.toTreeSync=_P});var Px=gt(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.getWriteFileOptions=ir.writeFileDefaults=ir.getRealpathOptsAndCb=ir.getRealpathOptions=ir.getStatOptsAndCb=ir.getStatOptions=ir.getAppendFileOptsAndCb=ir.getAppendFileOpts=ir.getOpendirOptsAndCb=ir.getOpendirOptions=ir.getReaddirOptsAndCb=ir.getReaddirOptions=ir.getReadFileOptions=ir.getRmOptsAndCb=ir.getRmdirOptions=ir.getDefaultOptsAndCb=ir.getDefaultOpts=ir.optsDefaults=ir.getMkdirOptions=void 0;ir.getOptions=Ax;ir.optsGenerator=cv;ir.optsAndCbGenerator=Pg;var R0=S0(),yP=py(),Ox=E_(),Rx={mode:511,recursive:!1},wP=t=>typeof t=="number"?Object.assign({},Rx,{mode:t}):Object.assign({},Rx,t);ir.getMkdirOptions=wP;var bP=t=>`Expected options to be either an object or a string, but got ${t} instead`;function Ax(t,e){let r;if(e){let n=typeof e;switch(n){case"string":r=Object.assign({},t,{encoding:e});break;case"object":r=Object.assign({},t,e);break;default:throw TypeError(bP(n))}}else return t;return r.encoding!=="buffer"&&(0,yP.assertEncoding)(r.encoding),r}function cv(t){return e=>Ax(t,e)}function Pg(t){return(e,r)=>typeof e=="function"?[t(),e]:[t(e),(0,Ox.validateCallback)(r)]}ir.optsDefaults={encoding:"utf8"};ir.getDefaultOpts=cv(ir.optsDefaults);ir.getDefaultOptsAndCb=Pg(ir.getDefaultOpts);var SP={recursive:!1},EP=t=>Object.assign({},SP,t);ir.getRmdirOptions=EP;var TP=cv(ir.optsDefaults);ir.getRmOptsAndCb=Pg(TP);var xP={flag:"r"};ir.getReadFileOptions=cv(xP);var IP={encoding:"utf8",recursive:!1,withFileTypes:!1};ir.getReaddirOptions=cv(IP);ir.getReaddirOptsAndCb=Pg(ir.getReaddirOptions);var NP={encoding:"utf8",bufferSize:32,recursive:!1};ir.getOpendirOptions=cv(NP);ir.getOpendirOptsAndCb=Pg(ir.getOpendirOptions);var CP={encoding:"utf8",mode:438,flag:R0.FLAGS[R0.FLAGS.a]};ir.getAppendFileOpts=cv(CP);ir.getAppendFileOptsAndCb=Pg(ir.getAppendFileOpts);var kP={bigint:!1},DP=(t={})=>Object.assign({},kP,t);ir.getStatOptions=DP;var RP=(t,e)=>typeof t=="function"?[(0,ir.getStatOptions)(),t]:[(0,ir.getStatOptions)(t),(0,Ox.validateCallback)(e)];ir.getStatOptsAndCb=RP;var OP=ir.optsDefaults;ir.getRealpathOptions=cv(OP);ir.getRealpathOptsAndCb=Pg(ir.getRealpathOptions);ir.writeFileDefaults={encoding:"utf8",mode:438,flag:R0.FLAGS[R0.FLAGS.w]};ir.getWriteFileOptions=cv(ir.writeFileDefaults)});var Mx=gt(O0=>{"use strict";Object.defineProperty(O0,"__esModule",{value:!0});O0.Dir=void 0;var AP=E_(),PP=p0(),cS=class{constructor(e,r){this.link=e,this.options=r,this.iteratorInfo=[],this.path=e.getParentPath(),this.iteratorInfo.push(e.children[Symbol.iterator]())}wrapAsync(e,r,n){(0,AP.validateCallback)(n),setImmediate(()=>{let i;try{i=e.apply(this,r)}catch(a){n(a);return}n(null,i)})}isFunction(e){return typeof e=="function"}promisify(e,r){return(...n)=>new Promise((i,a)=>{this.isFunction(e[r])?e[r].bind(e)(...n,(u,f)=>{u&&a(u),i(f)}):a("Not a function")})}closeBase(){}readBase(e){let r,n,i,a;do{do if({done:r,value:n}=e[e.length-1].next(),!r)[i,a]=n;else break;while(i==="."||i==="..");if(r){if(e.pop(),e.length===0)break;r=!1}else return this.options.recursive&&a.children.size&&e.push(a.children[Symbol.iterator]()),PP.default.build(a,this.options.encoding)}while(!r);return null}closeBaseAsync(e){this.wrapAsync(this.closeBase,[],e)}close(e){if(typeof e=="function")this.closeBaseAsync(e);else return this.promisify(this,"closeBaseAsync")()}closeSync(){this.closeBase()}readBaseAsync(e){this.wrapAsync(this.readBase,[this.iteratorInfo],e)}read(e){if(typeof e=="function")this.readBaseAsync(e);else return this.promisify(this,"readBaseAsync")()}readSync(){return this.readBase(this.iteratorInfo)}[Symbol.asyncIterator](){let e=[],r=this;e.push(r.link.children[Symbol.iterator]());let n={readBaseAsync(i){r.wrapAsync(r.readBase,[e],i)}};return{async next(){let i=await r.promisify(n,"readBaseAsync")();return i!==null?{done:!1,value:i}:{done:!0,value:void 0}},[Symbol.asyncIterator](){throw new Error("Not implemented")}}}};O0.Dir=cS});var Gx=gt(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});Zl.FSWatcher=Zl.StatWatcher=Zl.Volume=void 0;Zl.filenameToSteps=vh;Zl.pathToSteps=i1;Zl.dataToStr=a1;Zl.toUnixTimestamp=Qf;var cp=require("path"),A0=jT(),lS=u0(),MP=p0(),Wv=y_(),x_=BT(),U0=Zb(),$x=Hb(),LP=$T(),j0=require("stream"),fm=Yv(),Yx=require("events"),Lg=py(),FP=KT(),qx=require("util"),UP=ZT(),jP=Dx(),gy=S0(),Yn=Px(),pe=E_(),BP=Mx(),$P=cp.resolve,{O_RDONLY:fS,O_WRONLY:Lx,O_RDWR:YP,O_CREAT:Fx,O_EXCL:qP,O_TRUNC:HP,O_APPEND:VP,O_DIRECTORY:GP,O_SYMLINK:Ux,F_OK:jx,COPYFILE_EXCL:zP,COPYFILE_FICLONE_FORCE:WP}=fm.constants,{sep:dm,relative:_y,join:Hx,dirname:JP}=cp.posix?cp.posix:cp,KP=128,ZP="EPERM",Gv="ENOENT",dS="EBADF",XP="EINVAL",Mg="EEXIST",zv="ENOTDIR",QP="EMFILE",lm="EACCES",Bx="EISDIR",e1="ENOTEMPTY",t1="ENOSYS",r1="ERR_FS_EISDIR",n1="ERR_OUT_OF_RANGE",P0=(t,e=$x.default.cwd())=>$P(e,t);if(pe.isWin){let t=P0;P0=(e,r)=>(0,pe.unixify)(t(e,r))}function vh(t,e){let n=P0(t,e).substring(1);return n?n.split(dm):[]}function i1(t){return vh((0,pe.pathToFilename)(t))}function a1(t,e=Lg.ENCODING_UTF8){return Wv.Buffer.isBuffer(t)?t.toString(e):t instanceof Uint8Array?(0,Wv.bufferFrom)(t).toString(e):String(t)}function Qf(t){if(typeof t=="string"&&+t==t)return+t;if(t instanceof Date)return t.getTime()/1e3;if(isFinite(t))return t<0?Date.now()/1e3:t;throw new Error("Cannot parse time: "+t)}function I_(t){if(typeof t!="number")throw TypeError(gy.ERRSTR.UID)}function N_(t){if(typeof t!="number")throw TypeError(gy.ERRSTR.GID)}function o1(t){let e={};function r(n,i){for(let a in i){let u=i[a],f=Hx(n,a);typeof u=="string"||u instanceof Wv.Buffer?e[f]=u:typeof u=="object"&&u!==null&&Object.keys(u).length>0?r(f,u):e[f]=null}}return r("",t),e}var vy=()=>{throw new Error("Not implemented")},M0=class t{static fromJSON(e,r){let n=new t;return n.fromJSON(e,r),n}static fromNestedJSON(e,r){let n=new t;return n.fromNestedJSON(e,r),n}get promises(){if(this.promisesApi===null)throw new Error("Promise is not supported in this environment.");return this.promisesApi}constructor(e={}){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.maxFiles=1e4,this.openFiles=0,this.promisesApi=new UP.FsPromises(this,FP.FileHandle),this.statWatchers={},this.cpSync=vy,this.statfsSync=vy,this.cp=vy,this.statfs=vy,this.openAsBlob=vy,this.props=Object.assign({Node:A0.Node,Link:A0.Link,File:A0.File},e);let r=this.createLink();r.setNode(this.createNode(fm.constants.S_IFDIR|511));let n=this;this.StatWatcher=class extends L0{constructor(){super(n)}};let i=pm;this.ReadStream=class extends i{constructor(...u){super(n,...u)}};let a=lp;this.WriteStream=class extends a{constructor(...u){super(n,...u)}},this.FSWatcher=class extends F0{constructor(){super(n)}},r.setChild(".",r),r.getNode().nlink++,r.setChild("..",r),r.getNode().nlink++,this.root=r}createLink(e,r,n=!1,i){if(!e)return new this.props.Link(this,null,"");if(!r)throw new Error("createLink: name cannot be empty");let a=i??(n?511:438),f=i&&i&fm.constants.S_IFMT?i&fm.constants.S_IFMT:n?fm.constants.S_IFDIR:fm.constants.S_IFREG,m=a&~fm.constants.S_IFMT|f;return e.createChild(r,this.createNode(m))}deleteLink(e){let r=e.parent;return r?(r.deleteChild(e),!0):!1}newInoNumber(){let e=this.releasedInos.pop();return e||(this.ino=(this.ino+1)%4294967295,this.ino)}newFdNumber(){let e=this.releasedFds.pop();return typeof e=="number"?e:t.fd--}createNode(e){let r=new this.props.Node(this.newInoNumber(),e);return this.inodes[r.ino]=r,r}deleteNode(e){e.del(),delete this.inodes[e.ino],this.releasedInos.push(e.ino)}walk(e,r=!1,n=!1,i=!1,a){var u;let f,m;e instanceof A0.Link?(f=e.steps,m=dm+f.join(dm)):typeof e=="string"?(f=vh(e),m=e):(f=e,m=dm+f.join(dm));let y=this.root,x=0;for(;x<f.length;){let P=y.getNode();if(P.isDirectory()){if(i&&!P.canExecute())throw(0,pe.createError)(lm,a,m)}else if(x<f.length-1)throw(0,pe.createError)(zv,a,m);if(y=(u=y.getChild(f[x]))!==null&&u!==void 0?u:null,!y){if(n)throw(0,pe.createError)(Gv,a,m);return null}if(P=y==null?void 0:y.getNode(),r&&P.isSymlink()){let V=cp.isAbsolute(P.symlink)?P.symlink:Hx(cp.dirname(y.getPath()),P.symlink);f=vh(V).concat(f.slice(x+1)),y=this.root,x=0;continue}x++}return y}getLink(e){return this.walk(e,!1,!1,!1)}getLinkOrThrow(e,r){return this.walk(e,!1,!0,!0,r)}getResolvedLink(e){return this.walk(e,!0,!1,!1)}getResolvedLinkOrThrow(e,r){return this.walk(e,!0,!0,!0,r)}resolveSymlinks(e){return this.getResolvedLink(e.steps.slice(1))}getLinkAsDirOrThrow(e,r){let n=this.getLinkOrThrow(e,r);if(!n.getNode().isDirectory())throw(0,pe.createError)(zv,r,e);return n}getLinkParent(e){return this.getLink(e.slice(0,-1))}getLinkParentAsDirOrThrow(e,r){let n=(e instanceof Array?e:vh(e)).slice(0,-1),i=dm+n.join(dm),a=this.getLinkOrThrow(i,r);if(!a.getNode().isDirectory())throw(0,pe.createError)(zv,r,i);return a}getFileByFd(e){return this.fds[String(e)]}getFileByFdOrThrow(e,r){if(!(0,pe.isFd)(e))throw TypeError(gy.ERRSTR.FD);let n=this.getFileByFd(e);if(!n)throw(0,pe.createError)(dS,r);return n}wrapAsync(e,r,n){(0,pe.validateCallback)(n),(0,x_.default)(()=>{let i;try{i=e.apply(this,r)}catch(a){n(a);return}n(null,i)})}_toJSON(e=this.root,r={},n,i){let a=!0,u=e.children;e.getNode().isFile()&&(u=new Map([[e.getName(),e.parent.getChild(e.getName())]]),e=e.parent);for(let m of u.keys()){if(m==="."||m==="..")continue;a=!1;let y=e.getChild(m);if(!y)throw new Error("_toJSON: unexpected undefined");let x=y.getNode();if(x.isFile()){let P=y.getPath();n&&(P=_y(n,P)),r[P]=i?x.getBuffer():x.getString()}else x.isDirectory()&&this._toJSON(y,r,n,i)}let f=e.getPath();return n&&(f=_y(n,f)),f&&a&&(r[f]=null),r}toJSON(e,r={},n=!1,i=!1){let a=[];if(e){Array.isArray(e)||(e=[e]);for(let u of e){let f=(0,pe.pathToFilename)(u),m=this.getResolvedLink(f);m&&a.push(m)}}else a.push(this.root);if(!a.length)return r;for(let u of a)this._toJSON(u,r,n?u.getPath():"",i);return r}fromJSON(e,r=$x.default.cwd()){for(let n in e){let i=e[n];if(n=P0(n,r),typeof i=="string"||i instanceof Wv.Buffer){let a=JP(n);this.mkdirpBase(a,511),this.writeFileSync(n,i)}else this.mkdirpBase(n,511)}}fromNestedJSON(e,r){this.fromJSON(o1(e),r)}toTree(e={separator:dm}){return(0,jP.toTreeSync)(this,e)}reset(){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.openFiles=0,this.root=this.createLink(),this.root.setNode(this.createNode(fm.constants.S_IFDIR|511))}mountSync(e,r){this.fromJSON(r,e)}openLink(e,r,n=!0){if(this.openFiles>=this.maxFiles)throw(0,pe.createError)(QP,"open",e.getPath());let i=e;n&&(i=this.getResolvedLinkOrThrow(e.getPath(),"open"));let a=i.getNode();if(a.isDirectory()){if((r&(fS|YP|Lx))!==fS)throw(0,pe.createError)(Bx,"open",e.getPath())}else if(r&GP)throw(0,pe.createError)(zv,"open",e.getPath());if(!(r&Lx)&&!a.canRead()||!(r&fS)&&!a.canWrite())throw(0,pe.createError)(lm,"open",e.getPath());let u=new this.props.File(e,a,r,this.newFdNumber());return this.fds[u.fd]=u,this.openFiles++,r&HP&&u.truncate(),u}openFile(e,r,n,i=!0){let a=vh(e),u;try{if(u=i?this.getResolvedLinkOrThrow(e,"open"):this.getLinkOrThrow(e,"open"),u&&r&Fx&&r&qP)throw(0,pe.createError)(Mg,"open",e)}catch(f){if(f.code===Gv&&r&Fx){let m=cp.dirname(e),y=this.getResolvedLinkOrThrow(m),x=y.getNode();if(!x.isDirectory())throw(0,pe.createError)(zv,"open",e);if(!x.canExecute()||!x.canWrite())throw(0,pe.createError)(lm,"open",e);n??(n=438),u=this.createLink(y,a[a.length-1],!1,n)}else throw f}if(u)return this.openLink(u,r,i);throw(0,pe.createError)(Gv,"open",e)}openBase(e,r,n,i=!0){let a=this.openFile(e,r,n,i);if(!a)throw(0,pe.createError)(Gv,"open",e);return a.fd}openSync(e,r,n=438){let i=(0,pe.modeToNumber)(n),a=(0,pe.pathToFilename)(e),u=(0,pe.flagsToNumber)(r);return this.openBase(a,u,i,!(u&Ux))}open(e,r,n,i){let a=n,u=i;typeof n=="function"&&(a=438,u=n),a=a||438;let f=(0,pe.modeToNumber)(a),m=(0,pe.pathToFilename)(e),y=(0,pe.flagsToNumber)(r);this.wrapAsync(this.openBase,[m,y,f,!(y&Ux)],u)}closeFile(e){this.fds[e.fd]&&(this.openFiles--,delete this.fds[e.fd],this.releasedFds.push(e.fd))}closeSync(e){(0,pe.validateFd)(e);let r=this.getFileByFdOrThrow(e,"close");this.closeFile(r)}close(e,r){(0,pe.validateFd)(e);let n=this.getFileByFdOrThrow(e,"close");this.wrapAsync(this.closeFile,[n],r)}openFileOrGetById(e,r,n){if(typeof e=="number"){let i=this.fds[e];if(!i)throw(0,pe.createError)(Gv);return i}else return this.openFile((0,pe.pathToFilename)(e),r,n)}readBase(e,r,n,i,a){if(r.byteLength<i)throw(0,pe.createError)(n1,"read",void 0,void 0,RangeError);let u=this.getFileByFdOrThrow(e);if(u.node.isSymlink())throw(0,pe.createError)(ZP,"read",u.link.getPath());return u.read(r,Number(n),Number(i),a===-1||typeof a!="number"?void 0:a)}readSync(e,r,n,i,a){return(0,pe.validateFd)(e),this.readBase(e,r,n,i,a)}read(e,r,n,i,a,u){if((0,pe.validateCallback)(u),i===0)return(0,U0.default)(()=>{u&&u(null,0,r)});(0,x_.default)(()=>{try{let f=this.readBase(e,r,n,i,a);u(null,f,r)}catch(f){u(f)}})}readvBase(e,r,n){let i=this.getFileByFdOrThrow(e),a=n??void 0;a===-1&&(a=void 0);let u=0;for(let f of r){let m=i.read(f,0,f.byteLength,a);if(a=void 0,u+=m,m<f.byteLength)break}return u}readv(e,r,n,i){let a=n,u=i;typeof n=="function"&&(a=null,u=n),(0,pe.validateCallback)(u),(0,x_.default)(()=>{try{let f=this.readvBase(e,r,a);u(null,f,r)}catch(f){u(f)}})}readvSync(e,r,n){return(0,pe.validateFd)(e),this.readvBase(e,r,n)}readFileBase(e,r,n){let i,u=typeof e=="number"&&(0,pe.isFd)(e),f;if(u)f=e;else{let m=(0,pe.pathToFilename)(e),y=this.getResolvedLinkOrThrow(m,"open");if(y.getNode().isDirectory())throw(0,pe.createError)(Bx,"open",y.getPath());f=this.openSync(e,r)}try{i=(0,pe.bufferToEncoding)(this.getFileByFdOrThrow(f).getBuffer(),n)}finally{u||this.closeSync(f)}return i}readFileSync(e,r){let n=(0,Yn.getReadFileOptions)(r),i=(0,pe.flagsToNumber)(n.flag);return this.readFileBase(e,i,n.encoding)}readFile(e,r,n){let[i,a]=(0,Yn.optsAndCbGenerator)(Yn.getReadFileOptions)(r,n),u=(0,pe.flagsToNumber)(i.flag);this.wrapAsync(this.readFileBase,[e,u,i.encoding],a)}writeBase(e,r,n,i,a){let u=this.getFileByFdOrThrow(e,"write");if(u.node.isSymlink())throw(0,pe.createError)(dS,"write",u.link.getPath());return u.write(r,n,i,a===-1||typeof a!="number"?void 0:a)}writeSync(e,r,n,i,a){let[,u,f,m,y]=(0,pe.getWriteSyncArgs)(e,r,n,i,a);return this.writeBase(e,u,f,m,y)}write(e,r,n,i,a,u){let[,f,m,y,x,P,V]=(0,pe.getWriteArgs)(e,r,n,i,a,u);(0,x_.default)(()=>{try{let G=this.writeBase(e,m,y,x,P);f?V(null,G,r):V(null,G,m)}catch(G){V(G)}})}writevBase(e,r,n){let i=this.getFileByFdOrThrow(e),a=n??void 0;a===-1&&(a=void 0);let u=0;for(let f of r){let m=Wv.Buffer.from(f.buffer,f.byteOffset,f.byteLength),y=i.write(m,0,m.byteLength,a);if(a=void 0,u+=y,y<m.byteLength)break}return u}writev(e,r,n,i){let a=n,u=i;typeof n=="function"&&(a=null,u=n),(0,pe.validateCallback)(u),(0,x_.default)(()=>{try{let f=this.writevBase(e,r,a);u(null,f,r)}catch(f){u(f)}})}writevSync(e,r,n){return(0,pe.validateFd)(e),this.writevBase(e,r,n)}writeFileBase(e,r,n,i){let a=typeof e=="number",u;a?u=e:u=this.openBase((0,pe.pathToFilename)(e),n,i);let f=0,m=r.length,y=n&VP?void 0:0;try{for(;m>0;){let x=this.writeSync(u,r,f,m,y);f+=x,m-=x,y!==void 0&&(y+=x)}}finally{a||this.closeSync(u)}}writeFileSync(e,r,n){let i=(0,Yn.getWriteFileOptions)(n),a=(0,pe.flagsToNumber)(i.flag),u=(0,pe.modeToNumber)(i.mode),f=(0,pe.dataToBuffer)(r,i.encoding);this.writeFileBase(e,f,a,u)}writeFile(e,r,n,i){let a=n,u=i;typeof n=="function"&&(a=Yn.writeFileDefaults,u=n);let f=(0,pe.validateCallback)(u),m=(0,Yn.getWriteFileOptions)(a),y=(0,pe.flagsToNumber)(m.flag),x=(0,pe.modeToNumber)(m.mode),P=(0,pe.dataToBuffer)(r,m.encoding);this.wrapAsync(this.writeFileBase,[e,P,y,x],f)}linkBase(e,r){let n;try{n=this.getLinkOrThrow(e,"link")}catch(m){throw m.code&&(m=(0,pe.createError)(m.code,"link",e,r)),m}let i=cp.dirname(r),a;try{a=this.getLinkOrThrow(i,"link")}catch(m){throw m.code&&(m=(0,pe.createError)(m.code,"link",e,r)),m}let u=cp.basename(r);if(a.getChild(u))throw(0,pe.createError)(Mg,"link",e,r);let f=n.getNode();f.nlink++,a.createChild(u,f)}copyFileBase(e,r,n){let i=this.readFileSync(e);if(n&zP&&this.existsSync(r))throw(0,pe.createError)(Mg,"copyFile",e,r);if(n&WP)throw(0,pe.createError)(t1,"copyFile",e,r);this.writeFileBase(r,i,gy.FLAGS.w,438)}copyFileSync(e,r,n){let i=(0,pe.pathToFilename)(e),a=(0,pe.pathToFilename)(r);return this.copyFileBase(i,a,(n||0)|0)}copyFile(e,r,n,i){let a=(0,pe.pathToFilename)(e),u=(0,pe.pathToFilename)(r),f,m;typeof n=="function"?(f=0,m=n):(f=n,m=i),(0,pe.validateCallback)(m),this.wrapAsync(this.copyFileBase,[a,u,f],m)}linkSync(e,r){let n=(0,pe.pathToFilename)(e),i=(0,pe.pathToFilename)(r);this.linkBase(n,i)}link(e,r,n){let i=(0,pe.pathToFilename)(e),a=(0,pe.pathToFilename)(r);this.wrapAsync(this.linkBase,[i,a],n)}unlinkBase(e){let r=this.getLinkOrThrow(e,"unlink");if(r.length)throw Error("Dir not empty...");this.deleteLink(r);let n=r.getNode();n.nlink--,n.nlink<=0&&this.deleteNode(n)}unlinkSync(e){let r=(0,pe.pathToFilename)(e);this.unlinkBase(r)}unlink(e,r){let n=(0,pe.pathToFilename)(e);this.wrapAsync(this.unlinkBase,[n],r)}symlinkBase(e,r){let n=vh(r),i;try{i=this.getLinkParentAsDirOrThrow(n)}catch(m){throw m.code&&(m=(0,pe.createError)(m.code,"symlink",e,r)),m}let a=n[n.length-1];if(i.getChild(a))throw(0,pe.createError)(Mg,"symlink",e,r);let u=i.getNode();if(!u.canExecute()||!u.canWrite())throw(0,pe.createError)(lm,"symlink",e,r);let f=i.createChild(a);return f.getNode().makeSymlink(e),f}symlinkSync(e,r,n){let i=(0,pe.pathToFilename)(e),a=(0,pe.pathToFilename)(r);this.symlinkBase(i,a)}symlink(e,r,n,i){let a=(0,pe.validateCallback)(typeof n=="function"?n:i),u=(0,pe.pathToFilename)(e),f=(0,pe.pathToFilename)(r);this.wrapAsync(this.symlinkBase,[u,f],a)}realpathBase(e,r){let n=this.getResolvedLinkOrThrow(e,"realpath");return(0,Lg.strToEncoding)(n.getPath()||"/",r)}realpathSync(e,r){return this.realpathBase((0,pe.pathToFilename)(e),(0,Yn.getRealpathOptions)(r).encoding)}realpath(e,r,n){let[i,a]=(0,Yn.getRealpathOptsAndCb)(r,n),u=(0,pe.pathToFilename)(e);this.wrapAsync(this.realpathBase,[u,i.encoding],a)}lstatBase(e,r=!1,n=!1){let i;try{i=this.getLinkOrThrow(e,"lstat")}catch(a){if(a.code===Gv&&!n)return;throw a}return lS.default.build(i.getNode(),r)}lstatSync(e,r){let{throwIfNoEntry:n=!0,bigint:i=!1}=(0,Yn.getStatOptions)(r);return this.lstatBase((0,pe.pathToFilename)(e),i,n)}lstat(e,r,n){let[{throwIfNoEntry:i=!0,bigint:a=!1},u]=(0,Yn.getStatOptsAndCb)(r,n);this.wrapAsync(this.lstatBase,[(0,pe.pathToFilename)(e),a,i],u)}statBase(e,r=!1,n=!0){let i;try{i=this.getResolvedLinkOrThrow(e,"stat")}catch(a){if(a.code===Gv&&!n)return;throw a}return lS.default.build(i.getNode(),r)}statSync(e,r){let{bigint:n=!0,throwIfNoEntry:i=!0}=(0,Yn.getStatOptions)(r);return this.statBase((0,pe.pathToFilename)(e),n,i)}stat(e,r,n){let[{bigint:i=!1,throwIfNoEntry:a=!0},u]=(0,Yn.getStatOptsAndCb)(r,n);this.wrapAsync(this.statBase,[(0,pe.pathToFilename)(e),i,a],u)}fstatBase(e,r=!1){let n=this.getFileByFd(e);if(!n)throw(0,pe.createError)(dS,"fstat");return lS.default.build(n.node,r)}fstatSync(e,r){return this.fstatBase(e,(0,Yn.getStatOptions)(r).bigint)}fstat(e,r,n){let[i,a]=(0,Yn.getStatOptsAndCb)(r,n);this.wrapAsync(this.fstatBase,[e,i.bigint],a)}renameBase(e,r){let n;try{n=this.getResolvedLinkOrThrow(e)}catch(y){throw y.code&&(y=(0,pe.createError)(y.code,"rename",e,r)),y}let i;try{i=this.getLinkParentAsDirOrThrow(r)}catch(y){throw y.code&&(y=(0,pe.createError)(y.code,"rename",e,r)),y}let a=n.parent,u=a.getNode(),f=i.getNode();if(!u.canExecute()||!u.canWrite()||!f.canExecute()||!f.canWrite())throw(0,pe.createError)(lm,"rename",e,r);a.deleteChild(n);let m=cp.basename(r);n.name=m,n.steps=[...i.steps,m],i.setChild(n.getName(),n)}renameSync(e,r){let n=(0,pe.pathToFilename)(e),i=(0,pe.pathToFilename)(r);this.renameBase(n,i)}rename(e,r,n){let i=(0,pe.pathToFilename)(e),a=(0,pe.pathToFilename)(r);this.wrapAsync(this.renameBase,[i,a],n)}existsBase(e){return!!this.statBase(e)}existsSync(e){try{return this.existsBase((0,pe.pathToFilename)(e))}catch{return!1}}exists(e,r){let n=(0,pe.pathToFilename)(e);if(typeof r!="function")throw Error(gy.ERRSTR.CB);(0,x_.default)(()=>{try{r(this.existsBase(n))}catch{r(!1)}})}accessBase(e,r){let n=this.getLinkOrThrow(e,"access")}accessSync(e,r=jx){let n=(0,pe.pathToFilename)(e);r=r|0,this.accessBase(n,r)}access(e,r,n){let i=jx,a;typeof r!="function"?(i=r|0,a=(0,pe.validateCallback)(n)):a=r;let u=(0,pe.pathToFilename)(e);this.wrapAsync(this.accessBase,[u,i],a)}appendFileSync(e,r,n){let i=(0,Yn.getAppendFileOpts)(n);(!i.flag||(0,pe.isFd)(e))&&(i.flag="a"),this.writeFileSync(e,r,i)}appendFile(e,r,n,i){let[a,u]=(0,Yn.getAppendFileOptsAndCb)(n,i);(!a.flag||(0,pe.isFd)(e))&&(a.flag="a"),this.writeFile(e,r,a,u)}readdirBase(e,r){let n=vh(e),i=this.getResolvedLinkOrThrow(e,"scandir"),a=i.getNode();if(!a.isDirectory())throw(0,pe.createError)(zv,"scandir",e);if(!a.canRead())throw(0,pe.createError)(lm,"scandir",e);let u=[];for(let m of i.children.keys()){let y=i.getChild(m);if(!(!y||m==="."||m==="..")&&(u.push(MP.default.build(y,r.encoding)),r.recursive&&y.children.size)){let x=Object.assign(Object.assign({},r),{recursive:!0,withFileTypes:!0}),P=this.readdirBase(y.getPath(),x);u.push(...P)}}if(!pe.isWin&&r.encoding!=="buffer"&&u.sort((m,y)=>m.name<y.name?-1:m.name>y.name?1:0),r.withFileTypes)return u;let f=e;return pe.isWin&&(f=f.replace(/\\/g,"/")),u.map(m=>{if(r.recursive){let y=cp.join(m.parentPath,m.name.toString());return pe.isWin&&(y=y.replace(/\\/g,"/")),y.replace(f+cp.posix.sep,"")}return m.name})}readdirSync(e,r){let n=(0,Yn.getReaddirOptions)(r),i=(0,pe.pathToFilename)(e);return this.readdirBase(i,n)}readdir(e,r,n){let[i,a]=(0,Yn.getReaddirOptsAndCb)(r,n),u=(0,pe.pathToFilename)(e);this.wrapAsync(this.readdirBase,[u,i],a)}readlinkBase(e,r){let i=this.getLinkOrThrow(e,"readlink").getNode();if(!i.isSymlink())throw(0,pe.createError)(XP,"readlink",e);return(0,Lg.strToEncoding)(i.symlink,r)}readlinkSync(e,r){let n=(0,Yn.getDefaultOpts)(r),i=(0,pe.pathToFilename)(e);return this.readlinkBase(i,n.encoding)}readlink(e,r,n){let[i,a]=(0,Yn.getDefaultOptsAndCb)(r,n),u=(0,pe.pathToFilename)(e);this.wrapAsync(this.readlinkBase,[u,i.encoding],a)}fsyncBase(e){this.getFileByFdOrThrow(e,"fsync")}fsyncSync(e){this.fsyncBase(e)}fsync(e,r){this.wrapAsync(this.fsyncBase,[e],r)}fdatasyncBase(e){this.getFileByFdOrThrow(e,"fdatasync")}fdatasyncSync(e){this.fdatasyncBase(e)}fdatasync(e,r){this.wrapAsync(this.fdatasyncBase,[e],r)}ftruncateBase(e,r){this.getFileByFdOrThrow(e,"ftruncate").truncate(r)}ftruncateSync(e,r){this.ftruncateBase(e,r)}ftruncate(e,r,n){let i=typeof r=="number"?r:0,a=(0,pe.validateCallback)(typeof r=="number"?n:r);this.wrapAsync(this.ftruncateBase,[e,i],a)}truncateBase(e,r){let n=this.openSync(e,"r+");try{this.ftruncateSync(n,r)}finally{this.closeSync(n)}}truncateSync(e,r){if((0,pe.isFd)(e))return this.ftruncateSync(e,r);this.truncateBase(e,r)}truncate(e,r,n){let i=typeof r=="number"?r:0,a=(0,pe.validateCallback)(typeof r=="number"?n:r);if((0,pe.isFd)(e))return this.ftruncate(e,i,a);this.wrapAsync(this.truncateBase,[e,i],a)}futimesBase(e,r,n){let a=this.getFileByFdOrThrow(e,"futimes").node;a.atime=new Date(r*1e3),a.mtime=new Date(n*1e3)}futimesSync(e,r,n){this.futimesBase(e,Qf(r),Qf(n))}futimes(e,r,n,i){this.wrapAsync(this.futimesBase,[e,Qf(r),Qf(n)],i)}utimesBase(e,r,n,i=!0){let u=(i?this.getResolvedLinkOrThrow(e,"utimes"):this.getLinkOrThrow(e,"lutimes")).getNode();u.atime=new Date(r*1e3),u.mtime=new Date(n*1e3)}utimesSync(e,r,n){this.utimesBase((0,pe.pathToFilename)(e),Qf(r),Qf(n),!0)}utimes(e,r,n,i){this.wrapAsync(this.utimesBase,[(0,pe.pathToFilename)(e),Qf(r),Qf(n),!0],i)}lutimesSync(e,r,n){this.utimesBase((0,pe.pathToFilename)(e),Qf(r),Qf(n),!1)}lutimes(e,r,n,i){this.wrapAsync(this.utimesBase,[(0,pe.pathToFilename)(e),Qf(r),Qf(n),!1],i)}mkdirBase(e,r){let n=vh(e);if(!n.length)throw(0,pe.createError)(Mg,"mkdir",e);let i=this.getLinkParentAsDirOrThrow(e,"mkdir"),a=n[n.length-1];if(i.getChild(a))throw(0,pe.createError)(Mg,"mkdir",e);let u=i.getNode();if(!u.canWrite()||!u.canExecute())throw(0,pe.createError)(lm,"mkdir",e);i.createChild(a,this.createNode(fm.constants.S_IFDIR|r))}mkdirpBase(e,r){let n=!1,i=vh(e),a=null,u=i.length;for(u=i.length;u>=0&&(a=this.getResolvedLink(i.slice(0,u)),!a);u--);for(a||(a=this.root,u=0),a=this.getResolvedLinkOrThrow(dm+i.slice(0,u).join(dm),"mkdir"),u;u<i.length;u++){let f=a.getNode();if(f.isDirectory()){if(!f.canExecute()||!f.canWrite())throw(0,pe.createError)(lm,"mkdir",e)}else throw(0,pe.createError)(zv,"mkdir",e);n=!0,a=a.createChild(i[u],this.createNode(fm.constants.S_IFDIR|r))}return n?e:void 0}mkdirSync(e,r){let n=(0,Yn.getMkdirOptions)(r),i=(0,pe.modeToNumber)(n.mode,511),a=(0,pe.pathToFilename)(e);if(n.recursive)return this.mkdirpBase(a,i);this.mkdirBase(a,i)}mkdir(e,r,n){let i=(0,Yn.getMkdirOptions)(r),a=(0,pe.validateCallback)(typeof r=="function"?r:n),u=(0,pe.modeToNumber)(i.mode,511),f=(0,pe.pathToFilename)(e);i.recursive?this.wrapAsync(this.mkdirpBase,[f,u],a):this.wrapAsync(this.mkdirBase,[f,u],a)}mkdtempBase(e,r,n=5){let i=e+(0,pe.genRndStr6)();try{return this.mkdirBase(i,511),(0,Lg.strToEncoding)(i,r)}catch(a){if(a.code===Mg){if(n>1)return this.mkdtempBase(e,r,n-1);throw Error("Could not create temp dir.")}else throw a}}mkdtempSync(e,r){let{encoding:n}=(0,Yn.getDefaultOpts)(r);if(!e||typeof e!="string")throw new TypeError("filename prefix is required");return(0,pe.nullCheck)(e),this.mkdtempBase(e,n)}mkdtemp(e,r,n){let[{encoding:i},a]=(0,Yn.getDefaultOptsAndCb)(r,n);if(!e||typeof e!="string")throw new TypeError("filename prefix is required");(0,pe.nullCheck)(e)&&this.wrapAsync(this.mkdtempBase,[e,i],a)}rmdirBase(e,r){let n=(0,Yn.getRmdirOptions)(r),i=this.getLinkAsDirOrThrow(e,"rmdir");if(i.length&&!n.recursive)throw(0,pe.createError)(e1,"rmdir",e);this.deleteLink(i)}rmdirSync(e,r){this.rmdirBase((0,pe.pathToFilename)(e),r)}rmdir(e,r,n){let i=(0,Yn.getRmdirOptions)(r),a=(0,pe.validateCallback)(typeof r=="function"?r:n);this.wrapAsync(this.rmdirBase,[(0,pe.pathToFilename)(e),i],a)}rmBase(e,r={}){let n;try{n=this.getResolvedLinkOrThrow(e,"stat")}catch(i){if(i.code===Gv&&r.force)return;throw i}if(n.getNode().isDirectory()&&!r.recursive)throw(0,pe.createError)(r1,"rm",e);if(!n.parent.getNode().canWrite())throw(0,pe.createError)(lm,"rm",e);this.deleteLink(n)}rmSync(e,r){this.rmBase((0,pe.pathToFilename)(e),r)}rm(e,r,n){let[i,a]=(0,Yn.getRmOptsAndCb)(r,n);this.wrapAsync(this.rmBase,[(0,pe.pathToFilename)(e),i],a)}fchmodBase(e,r){this.getFileByFdOrThrow(e,"fchmod").chmod(r)}fchmodSync(e,r){this.fchmodBase(e,(0,pe.modeToNumber)(r))}fchmod(e,r,n){this.wrapAsync(this.fchmodBase,[e,(0,pe.modeToNumber)(r)],n)}chmodBase(e,r,n=!0){(n?this.getResolvedLinkOrThrow(e,"chmod"):this.getLinkOrThrow(e,"chmod")).getNode().chmod(r)}chmodSync(e,r){let n=(0,pe.modeToNumber)(r),i=(0,pe.pathToFilename)(e);this.chmodBase(i,n,!0)}chmod(e,r,n){let i=(0,pe.modeToNumber)(r),a=(0,pe.pathToFilename)(e);this.wrapAsync(this.chmodBase,[a,i],n)}lchmodBase(e,r){this.chmodBase(e,r,!1)}lchmodSync(e,r){let n=(0,pe.modeToNumber)(r),i=(0,pe.pathToFilename)(e);this.lchmodBase(i,n)}lchmod(e,r,n){let i=(0,pe.modeToNumber)(r),a=(0,pe.pathToFilename)(e);this.wrapAsync(this.lchmodBase,[a,i],n)}fchownBase(e,r,n){this.getFileByFdOrThrow(e,"fchown").chown(r,n)}fchownSync(e,r,n){I_(r),N_(n),this.fchownBase(e,r,n)}fchown(e,r,n,i){I_(r),N_(n),this.wrapAsync(this.fchownBase,[e,r,n],i)}chownBase(e,r,n){this.getResolvedLinkOrThrow(e,"chown").getNode().chown(r,n)}chownSync(e,r,n){I_(r),N_(n),this.chownBase((0,pe.pathToFilename)(e),r,n)}chown(e,r,n,i){I_(r),N_(n),this.wrapAsync(this.chownBase,[(0,pe.pathToFilename)(e),r,n],i)}lchownBase(e,r,n){this.getLinkOrThrow(e,"lchown").getNode().chown(r,n)}lchownSync(e,r,n){I_(r),N_(n),this.lchownBase((0,pe.pathToFilename)(e),r,n)}lchown(e,r,n,i){I_(r),N_(n),this.wrapAsync(this.lchownBase,[(0,pe.pathToFilename)(e),r,n],i)}watchFile(e,r,n){let i=(0,pe.pathToFilename)(e),a=r,u=n;if(typeof a=="function"&&(u=r,a=null),typeof u!="function")throw Error('"watchFile()" requires a listener function');let f=5007,m=!0;a&&typeof a=="object"&&(typeof a.interval=="number"&&(f=a.interval),typeof a.persistent=="boolean"&&(m=a.persistent));let y=this.statWatchers[i];return y||(y=new this.StatWatcher,y.start(i,m,f),this.statWatchers[i]=y),y.addListener("change",u),y}unwatchFile(e,r){let n=(0,pe.pathToFilename)(e),i=this.statWatchers[n];i&&(typeof r=="function"?i.removeListener("change",r):i.removeAllListeners("change"),i.listenerCount("change")===0&&(i.stop(),delete this.statWatchers[n]))}createReadStream(e,r){return new this.ReadStream(e,r)}createWriteStream(e,r){return new this.WriteStream(e,r)}watch(e,r,n){let i=(0,pe.pathToFilename)(e),a=r;typeof r=="function"&&(n=r,a=null);let{persistent:u,recursive:f,encoding:m}=(0,Yn.getDefaultOpts)(a);u===void 0&&(u=!0),f===void 0&&(f=!1);let y=new this.FSWatcher;return y.start(i,u,f,m),n&&y.addListener("change",n),y}opendirBase(e,r){let n=this.getResolvedLinkOrThrow(e,"scandir");if(!n.getNode().isDirectory())throw(0,pe.createError)(zv,"scandir",e);return new BP.Dir(n,r)}opendirSync(e,r){let n=(0,Yn.getOpendirOptions)(r),i=(0,pe.pathToFilename)(e);return this.opendirBase(i,n)}opendir(e,r,n){let[i,a]=(0,Yn.getOpendirOptsAndCb)(r,n),u=(0,pe.pathToFilename)(e);this.wrapAsync(this.opendirBase,[u,i],a)}};Zl.Volume=M0;M0.fd=2147483647;function s1(t){t.emit("stop")}var L0=class extends Yx.EventEmitter{constructor(e){super(),this.onInterval=()=>{try{let r=this.vol.statSync(this.filename);this.hasChanged(r)&&(this.emit("change",r,this.prev),this.prev=r)}finally{this.loop()}},this.vol=e}loop(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)}hasChanged(e){return e.mtimeMs>this.prev.mtimeMs||e.nlink!==this.prev.nlink}start(e,r=!0,n=5007){this.filename=(0,pe.pathToFilename)(e),this.setTimeout=r?setTimeout.bind(typeof globalThis<"u"?globalThis:global):LP.default,this.interval=n,this.prev=this.vol.statSync(this.filename),this.loop()}stop(){clearTimeout(this.timeoutRef),(0,U0.default)(()=>{s1.call(this,this)})}};Zl.StatWatcher=L0;var up;function u1(t){up=(0,Wv.bufferAllocUnsafe)(t),up.used=0}qx.inherits(pm,j0.Readable);Zl.ReadStream=pm;function pm(t,e,r){if(!(this instanceof pm))return new pm(t,e,r);if(this._vol=t,r=Object.assign({},(0,Yn.getOptions)(r,{})),r.highWaterMark===void 0&&(r.highWaterMark=64*1024),j0.Readable.call(this,r),this.path=(0,pe.pathToFilename)(e),this.fd=r.fd===void 0?null:typeof r.fd!="number"?r.fd.fd:r.fd,this.flags=r.flags===void 0?"r":r.flags,this.mode=r.mode===void 0?438:r.mode,this.start=r.start,this.end=r.end,this.autoClose=r.autoClose===void 0?!0:r.autoClose,this.pos=void 0,this.bytesRead=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw new Error('"start" option must be <= "end" option');this.pos=this.start}typeof this.fd!="number"&&this.open(),this.on("end",function(){this.autoClose&&this.destroy&&this.destroy()})}pm.prototype.open=function(){var t=this;this._vol.open(this.path,this.flags,this.mode,(e,r)=>{if(e){t.autoClose&&t.destroy&&t.destroy(),t.emit("error",e);return}t.fd=r,t.emit("open",r),t.read()})};pm.prototype._read=function(t){if(typeof this.fd!="number")return this.once("open",function(){this._read(t)});if(this.destroyed)return;(!up||up.length-up.used<KP)&&u1(this._readableState.highWaterMark);var e=up,r=Math.min(up.length-up.used,t),n=up.used;if(this.pos!==void 0&&(r=Math.min(this.end-this.pos+1,r)),r<=0)return this.push(null);var i=this;this._vol.read(this.fd,up,up.used,r,this.pos,a),this.pos!==void 0&&(this.pos+=r),up.used+=r;function a(u,f){if(u)i.autoClose&&i.destroy&&i.destroy(),i.emit("error",u);else{var m=null;f>0&&(i.bytesRead+=f,m=e.slice(n,n+f)),i.push(m)}}};pm.prototype._destroy=function(t,e){this.close(r=>{e(t||r)})};pm.prototype.close=function(t){var e;if(t&&this.once("close",t),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",Vx);return}return(0,U0.default)(()=>this.emit("close"))}typeof((e=this._readableState)===null||e===void 0?void 0:e.closed)=="boolean"?this._readableState.closed=!0:this.closed=!0,this._vol.close(this.fd,r=>{r?this.emit("error",r):this.emit("close")}),this.fd=null};function Vx(t){this.close()}qx.inherits(lp,j0.Writable);Zl.WriteStream=lp;function lp(t,e,r){if(!(this instanceof lp))return new lp(t,e,r);if(this._vol=t,r=Object.assign({},(0,Yn.getOptions)(r,{})),j0.Writable.call(this,r),this.path=(0,pe.pathToFilename)(e),this.fd=r.fd===void 0?null:typeof r.fd!="number"?r.fd.fd:r.fd,this.flags=r.flags===void 0?"w":r.flags,this.mode=r.mode===void 0?438:r.mode,this.start=r.start,this.autoClose=r.autoClose===void 0?!0:!!r.autoClose,this.pos=void 0,this.bytesWritten=0,this.pending=!0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.start<0)throw new Error('"start" must be >= zero');this.pos=this.start}r.encoding&&this.setDefaultEncoding(r.encoding),typeof this.fd!="number"&&this.open(),this.once("finish",function(){this.autoClose&&this.close()})}lp.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,function(t,e){if(t){this.autoClose&&this.destroy&&this.destroy(),this.emit("error",t);return}this.fd=e,this.pending=!1,this.emit("open",e)}.bind(this))};lp.prototype._write=function(t,e,r){if(!(t instanceof Wv.Buffer||t instanceof Uint8Array))return this.emit("error",new Error("Invalid data"));if(typeof this.fd!="number")return this.once("open",function(){this._write(t,e,r)});var n=this;this._vol.write(this.fd,t,0,t.length,this.pos,(i,a)=>{if(i)return n.autoClose&&n.destroy&&n.destroy(),r(i);n.bytesWritten+=a,r()}),this.pos!==void 0&&(this.pos+=t.length)};lp.prototype._writev=function(t,e){if(typeof this.fd!="number")return this.once("open",function(){this._writev(t,e)});let r=this,n=t.length,i=new Array(n);for(var a=0,u=0;u<n;u++){var f=t[u].chunk;i[u]=f,a+=f.length}let m=Wv.Buffer.concat(i);this._vol.write(this.fd,m,0,m.length,this.pos,(y,x)=>{if(y)return r.destroy&&r.destroy(),e(y);r.bytesWritten+=x,e()}),this.pos!==void 0&&(this.pos+=a)};lp.prototype.close=function(t){var e;if(t&&this.once("close",t),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",Vx);return}return(0,U0.default)(()=>this.emit("close"))}typeof((e=this._writableState)===null||e===void 0?void 0:e.closed)=="boolean"?this._writableState.closed=!0:this.closed=!0,this._vol.close(this.fd,r=>{r?this.emit("error",r):this.emit("close")}),this.fd=null};lp.prototype._destroy=pm.prototype._destroy;lp.prototype.destroySoon=lp.prototype.end;var F0=class extends Yx.EventEmitter{constructor(e){super(),this._filename="",this._filenameEncoded="",this._recursive=!1,this._encoding=Lg.ENCODING_UTF8,this._listenerRemovers=new Map,this._onParentChild=r=>{r.getName()===this._getName()&&this._emit("rename")},this._emit=r=>{this.emit("change",r,this._filenameEncoded)},this._persist=()=>{this._timer=setTimeout(this._persist,1e6)},this._vol=e}_getName(){return this._steps[this._steps.length-1]}start(e,r=!0,n=!1,i=Lg.ENCODING_UTF8){this._filename=(0,pe.pathToFilename)(e),this._steps=vh(this._filename),this._filenameEncoded=(0,Lg.strToEncoding)(this._filename),this._recursive=n,this._encoding=i;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(m){let y=new Error(`watch ${this._filename} ${m.code}`);throw y.code=m.code,y.errno=m.code,y}let a=m=>{var y;let x=m.getPath(),P=m.getNode(),V=()=>{let Y=_y(this._filename,x);return Y||(Y=this._getName()),this.emit("change","change",Y)};P.on("change",V);let G=(y=this._listenerRemovers.get(P.ino))!==null&&y!==void 0?y:[];G.push(()=>P.removeListener("change",V)),this._listenerRemovers.set(P.ino,G)},u=m=>{var y;let x=m.getNode(),P=Y=>{this.emit("change","rename",_y(this._filename,Y.getPath())),setTimeout(()=>{a(Y),u(Y)})},V=Y=>{let q=J=>{let ee=J.getNode().ino,ve=this._listenerRemovers.get(ee);ve&&(ve.forEach(ye=>ye()),this._listenerRemovers.delete(ee));for(let[ye,ue]of J.children.entries())ue&&ye!=="."&&ye!==".."&&q(ue)};q(Y),this.emit("change","rename",_y(this._filename,Y.getPath()))};for(let[Y,q]of m.children.entries())q&&Y!=="."&&Y!==".."&&a(q);if(m.on("child:add",P),m.on("child:delete",V),((y=this._listenerRemovers.get(x.ino))!==null&&y!==void 0?y:[]).push(()=>{m.removeListener("child:add",P),m.removeListener("child:delete",V)}),n)for(let[Y,q]of m.children.entries())q&&Y!=="."&&Y!==".."&&u(q)};a(this._link),u(this._link);let f=this._link.parent;f&&(f.setMaxListeners(f.getMaxListeners()+1),f.on("child:delete",this._onParentChild)),r&&this._persist()}close(){clearTimeout(this._timer),this._listenerRemovers.forEach(r=>{r.forEach(n=>n())}),this._listenerRemovers.clear();let e=this._link.parent;e&&e.removeListener("child:delete",this._onParentChild)}};Zl.FSWatcher=F0});var zx=gt(B0=>{"use strict";Object.defineProperty(B0,"__esModule",{value:!0});B0.fsSynchronousApiList=void 0;B0.fsSynchronousApiList=["accessSync","appendFileSync","chmodSync","chownSync","closeSync","copyFileSync","existsSync","fchmodSync","fchownSync","fdatasyncSync","fstatSync","fsyncSync","ftruncateSync","futimesSync","lchmodSync","lchownSync","linkSync","lstatSync","mkdirSync","mkdtempSync","openSync","readdirSync","readFileSync","readlinkSync","readSync","readvSync","realpathSync","renameSync","rmdirSync","rmSync","statSync","symlinkSync","truncateSync","unlinkSync","utimesSync","lutimesSync","writeFileSync","writeSync","writevSync"]});var Wx=gt($0=>{"use strict";Object.defineProperty($0,"__esModule",{value:!0});$0.fsCallbackApiList=void 0;$0.fsCallbackApiList=["access","appendFile","chmod","chown","close","copyFile","createReadStream","createWriteStream","exists","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","read","readv","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","unwatchFile","utimes","lutimes","watch","watchFile","write","writev","writeFile"]});var mS=gt((Xl,Y0)=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});Xl.memfs=Xl.fs=Xl.vol=Xl.Volume=void 0;Xl.createFsFromVolume=hS;var c1=u0(),l1=p0(),pS=Gx(),Jx=Yv(),f1=zx(),d1=Wx(),{F_OK:p1,R_OK:h1,W_OK:m1,X_OK:v1}=Jx.constants;Xl.Volume=pS.Volume;Xl.vol=new pS.Volume;function hS(t){let e={F_OK:p1,R_OK:h1,W_OK:m1,X_OK:v1,constants:Jx.constants,Stats:c1.default,Dirent:l1.default};for(let r of f1.fsSynchronousApiList)typeof t[r]=="function"&&(e[r]=t[r].bind(t));for(let r of d1.fsCallbackApiList)typeof t[r]=="function"&&(e[r]=t[r].bind(t));return e.StatWatcher=t.StatWatcher,e.FSWatcher=t.FSWatcher,e.WriteStream=t.WriteStream,e.ReadStream=t.ReadStream,e.promises=t.promises,e._toUnixTimestamp=pS.toUnixTimestamp,e.__vol=t,e}Xl.fs=hS(Xl.vol);var g1=(t={},e="/")=>{let r=Xl.Volume.fromNestedJSON(t,e);return{fs:hS(r),vol:r}};Xl.memfs=g1;Y0.exports=Object.assign(Object.assign({},Y0.exports),Xl.fs);Y0.exports.semantic=!0});var Zx=gt(Kx=>{"use strict";Object.defineProperty(Kx,"__esModule",{value:!0})});var q0=gt(Jv=>{"use strict";Object.defineProperty(Jv,"__esModule",{value:!0});Jv.fromSnapshotSync=Jv.toSnapshotSync=void 0;var _1=({fs:t,path:e="/",separator:r="/"})=>{let n=t.lstatSync(e);if(n.isDirectory()){let i=t.readdirSync(e),a={},u=e.endsWith(r)?e:e+r;for(let f of i){let m=(0,Jv.toSnapshotSync)({fs:t,path:`${u}${f}`,separator:r});m&&(a[""+f]=m)}return[0,{},a]}else if(n.isFile()){let i=t.readFileSync(e),a=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);return[1,{},a]}else if(n.isSymbolicLink())return[2,{target:t.readlinkSync(e).toString()}];return null};Jv.toSnapshotSync=_1;var y1=(t,{fs:e,path:r="/",separator:n="/"})=>{if(t)switch(t[0]){case 0:{r.endsWith(n)||(r=r+n);let[,,i]=t;e.mkdirSync(r,{recursive:!0});for(let[a,u]of Object.entries(i))(0,Jv.fromSnapshotSync)(u,{fs:e,path:`${r}${a}`,separator:n});break}case 1:{let[,,i]=t;e.writeFileSync(r,i);break}case 2:{let[,{target:i}]=t;e.symlinkSync(i,r);break}}};Jv.fromSnapshotSync=y1});var Qx=gt(H0=>{"use strict";Object.defineProperty(H0,"__esModule",{value:!0});H0.isFloat32=void 0;var Xx=new DataView(new ArrayBuffer(4)),w1=t=>(Xx.setFloat32(0,t),t===Xx.getFloat32(0));H0.isFloat32=w1});var gS=gt(V0=>{"use strict";Object.defineProperty(V0,"__esModule",{value:!0});V0.JsonPackExtension=void 0;var vS=class{constructor(e,r){this.tag=e,this.val=r}};V0.JsonPackExtension=vS});var eI=gt(G0=>{"use strict";Object.defineProperty(G0,"__esModule",{value:!0});G0.Slice=void 0;var _S=class{constructor(e,r,n,i){this.uint8=e,this.view=r,this.start=n,this.end=i}subarray(){return this.uint8.subarray(this.start,this.end)}};G0.Slice=_S});var wS=gt(z0=>{"use strict";Object.defineProperty(z0,"__esModule",{value:!0});z0.Writer=void 0;var b1=eI(),S1=new Uint8Array([]),E1=new DataView(S1.buffer),iI=typeof Buffer=="function",tI=iI?Buffer.prototype.utf8Write:null,rI=iI?Buffer.from:null,nI=typeof TextEncoder<"u"?new TextEncoder:null,yS=class{constructor(e=64*1024){this.allocSize=e,this.view=E1,this.x0=0,this.x=0,this.uint8=new Uint8Array(e),this.size=e,this.view=new DataView(this.uint8.buffer)}grow(e){let r=this.x0,n=this.x,i=this.uint8,a=new Uint8Array(e),u=new DataView(a.buffer),f=i.subarray(r,n);a.set(f,0),this.x=n-r,this.x0=0,this.uint8=a,this.size=e,this.view=u}ensureCapacity(e){let r=this.size,n=r-this.x;if(n<e){let i=r-this.x0,a=e-n,u=i+a;this.grow(u<=this.allocSize?this.allocSize:u*2)}}move(e){this.ensureCapacity(e),this.x+=e}reset(){this.x0=this.x}newBuffer(e){let r=this.uint8=new Uint8Array(e);this.size=e,this.view=new DataView(r.buffer),this.x=this.x0=0}flush(){let e=this.uint8.subarray(this.x0,this.x);return this.x0=this.x,e}flushSlice(){let e=new b1.Slice(this.uint8,this.view,this.x0,this.x);return this.x0=this.x,e}u8(e){this.ensureCapacity(1),this.uint8[this.x++]=e}u16(e){this.ensureCapacity(2),this.view.setUint16(this.x,e),this.x+=2}u32(e){this.ensureCapacity(4),this.view.setUint32(this.x,e),this.x+=4}i32(e){this.ensureCapacity(4),this.view.setInt32(this.x,e),this.x+=4}u64(e){this.ensureCapacity(8),this.view.setBigUint64(this.x,BigInt(e)),this.x+=8}f64(e){this.ensureCapacity(8),this.view.setFloat64(this.x,e),this.x+=8}u8u16(e,r){this.ensureCapacity(3);let n=this.x;this.uint8[n++]=e,this.uint8[n++]=r>>>8,this.uint8[n++]=r&255,this.x=n}u8u32(e,r){this.ensureCapacity(5);let n=this.x;this.uint8[n++]=e,this.view.setUint32(n,r),this.x=n+4}u8u64(e,r){this.ensureCapacity(9);let n=this.x;this.uint8[n++]=e,this.view.setBigUint64(n,BigInt(r)),this.x=n+8}u8f32(e,r){this.ensureCapacity(5);let n=this.x;this.uint8[n++]=e,this.view.setFloat32(n,r),this.x=n+4}u8f64(e,r){this.ensureCapacity(9);let n=this.x;this.uint8[n++]=e,this.view.setFloat64(n,r),this.x=n+8}buf(e,r){this.ensureCapacity(r);let n=this.x;this.uint8.set(e,n),this.x=n+r}utf8(e){let r=e.length*4;if(r<168)return this.utf8Native(e);if(tI){let n=tI.call(this.uint8,e,this.x,r);return this.x+=n,n}else if(rI){let n=this.uint8,i=n.byteOffset+this.x,u=rI(n.buffer).subarray(i,i+r).write(e,0,r,"utf8");return this.x+=u,u}else if(r>1024&&nI){let n=nI.encodeInto(e,this.uint8.subarray(this.x,this.x+r)).written;return this.x+=n,n}return this.utf8Native(e)}utf8Native(e){let r=e.length,n=this.uint8,i=this.x,a=0;for(;a<r;){let f=e.charCodeAt(a++);if(f&4294967168)if(!(f&4294965248))n[i++]=f>>6&31|192;else{if(f>=55296&&f<=56319&&a<r){let m=e.charCodeAt(a);(m&64512)===56320&&(a++,f=((f&1023)<<10)+(m&1023)+65536)}f&4294901760?(n[i++]=f>>18&7|240,n[i++]=f>>12&63|128,n[i++]=f>>6&63|128):(n[i++]=f>>12&15|224,n[i++]=f>>6&63|128)}else{n[i++]=f;continue}n[i++]=f&63|128}let u=i-this.x;return this.x=i,u}ascii(e){let r=e.length;this.ensureCapacity(r);let n=this.uint8,i=this.x,a=0;for(;a<r;)n[i++]=e.charCodeAt(a++);this.x=i}};z0.Writer=yS});var aI=gt(W0=>{"use strict";Object.defineProperty(W0,"__esModule",{value:!0});W0.CborEncoderFast=void 0;var T1=wS(),x1=Number.isSafeInteger,bS=class{constructor(e=new T1.Writer){this.writer=e}encode(e){return this.writeAny(e),this.writer.flush()}encodeToSlice(e){return this.writeAny(e),this.writer.flushSlice()}writeAny(e){switch(typeof e){case"number":return this.writeNumber(e);case"string":return this.writeStr(e);case"boolean":return this.writer.u8(244+ +e);case"object":{if(!e)return this.writer.u8(246);switch(e.constructor){case Array:return this.writeArr(e);default:return this.writeObj(e)}}}}writeCbor(){this.writer.u8u16(217,55799)}writeEnd(){this.writer.u8(255)}writeNull(){this.writer.u8(246)}writeBoolean(e){e?this.writer.u8(245):this.writer.u8(244)}writeNumber(e){x1(e)?this.writeInteger(e):typeof e=="bigint"?this.writeBigInt(e):this.writeFloat(e)}writeBigInt(e){e>=0?this.writeBigUint(e):this.writeBigSint(e)}writeBigUint(e){if(e<=Number.MAX_SAFE_INTEGER)return this.writeUInteger(Number(e));this.writer.u8u64(27,e)}writeBigSint(e){if(e>=Number.MIN_SAFE_INTEGER)return this.encodeNint(Number(e));let r=-BigInt(1)-e;this.writer.u8u64(59,r)}writeInteger(e){e>=0?this.writeUInteger(e):this.encodeNint(e)}writeUInteger(e){let r=this.writer;r.ensureCapacity(9);let n=r.uint8,i=r.x;e<=23?n[i++]=0+e:e<=255?(n[i++]=24,n[i++]=e):e<=65535?(n[i++]=25,r.view.setUint16(i,e),i+=2):e<=4294967295?(n[i++]=26,r.view.setUint32(i,e),i+=4):(n[i++]=27,r.view.setBigUint64(i,BigInt(e)),i+=8),r.x=i}encodeNumber(e){this.writeNumber(e)}encodeInteger(e){this.writeInteger(e)}encodeUint(e){this.writeUInteger(e)}encodeNint(e){let r=-1-e,n=this.writer;n.ensureCapacity(9);let i=n.uint8,a=n.x;r<24?i[a++]=32+r:r<=255?(i[a++]=56,i[a++]=r):r<=65535?(i[a++]=57,n.view.setUint16(a,r),a+=2):r<=4294967295?(i[a++]=58,n.view.setUint32(a,r),a+=4):(i[a++]=59,n.view.setBigUint64(a,BigInt(r)),a+=8),n.x=a}writeFloat(e){this.writer.u8f64(251,e)}writeBin(e){let r=e.length;this.writeBinHdr(r),this.writer.buf(e,r)}writeBinHdr(e){let r=this.writer;e<=23?r.u8(64+e):e<=255?r.u16(22528+e):e<=65535?r.u8u16(89,e):e<=4294967295?r.u8u32(90,e):r.u8u64(91,e)}writeStr(e){let r=this.writer,i=e.length*4;r.ensureCapacity(5+i);let a=r.uint8,u=r.x;i<=23?r.x++:i<=255?(a[r.x++]=120,u=r.x,r.x++):i<=65535?(a[r.x++]=121,u=r.x,r.x+=2):(a[r.x++]=122,u=r.x,r.x+=4);let f=r.utf8(e);i<=23?a[u]=96+f:i<=255?a[u]=f:i<=65535?r.view.setUint16(u,f):r.view.setUint32(u,f)}writeStrHdr(e){let r=this.writer;e<=23?r.u8(96+e):e<=255?r.u16(30720+e):e<=65535?r.u8u16(121,e):r.u8u32(122,e)}writeAsciiStr(e){this.writeStrHdr(e.length),this.writer.ascii(e)}writeArr(e){let r=e.length;this.writeArrHdr(r);for(let n=0;n<r;n++)this.writeAny(e[n])}writeArrHdr(e){let r=this.writer;e<=23?r.u8(128+e):e<=255?r.u16(38912+e):e<=65535?r.u8u16(153,e):e<=4294967295?r.u8u32(154,e):r.u8u64(155,e)}writeObj(e){let r=Object.keys(e),n=r.length;this.writeObjHdr(n);for(let i=0;i<n;i++){let a=r[i];this.writeStr(a),this.writeAny(e[a])}}writeObjHdr(e){let r=this.writer;e<=23?r.u8(160+e):e<=255?r.u16(47104+e):e<=65535?r.u8u16(185,e):e<=4294967295?r.u8u32(186,e):r.u8u64(187,e)}writeMapHdr(e){this.writeObjHdr(e)}writeStartMap(){this.writer.u8(191)}writeTag(e,r){this.writeTagHdr(e),this.writeAny(r)}writeTagHdr(e){let r=this.writer;e<=23?r.u8(192+e):e<=255?r.u16(55296+e):e<=65535?r.u8u16(217,e):e<=4294967295?r.u8u32(218,e):r.u8u64(219,e)}writeTkn(e){let r=this.writer;e<=23?r.u8(224+e):e<=255&&r.u16(63488+e)}writeStartStr(){this.writer.u8(127)}writeStrChunk(e){throw new Error("Not implemented")}writeEndStr(){throw new Error("Not implemented")}writeStartBin(){this.writer.u8(95)}writeBinChunk(e){throw new Error("Not implemented")}writeEndBin(){throw new Error("Not implemented")}writeStartArr(){this.writer.u8(159)}writeArrChunk(e){throw new Error("Not implemented")}writeEndArr(){this.writer.u8(255)}writeStartObj(){this.writer.u8(191)}writeObjChunk(e,r){throw new Error("Not implemented")}writeEndObj(){this.writer.u8(255)}};W0.CborEncoderFast=bS});var K0=gt(J0=>{"use strict";Object.defineProperty(J0,"__esModule",{value:!0});J0.JsonPackValue=void 0;var SS=class{constructor(e){this.val=e}};J0.JsonPackValue=SS});var oI=gt(Z0=>{"use strict";Object.defineProperty(Z0,"__esModule",{value:!0});Z0.CborEncoder=void 0;var I1=Qx(),N1=gS(),C1=aI(),k1=K0(),ES=class extends C1.CborEncoderFast{writeUnknown(e){this.writeNull()}writeAny(e){switch(typeof e){case"number":return this.writeNumber(e);case"string":return this.writeStr(e);case"boolean":return this.writer.u8(244+ +e);case"object":{if(!e)return this.writer.u8(246);switch(e.constructor){case Object:return this.writeObj(e);case Array:return this.writeArr(e);case Uint8Array:return this.writeBin(e);case Map:return this.writeMap(e);case N1.JsonPackExtension:return this.writeTag(e.tag,e.val);case k1.JsonPackValue:let n=e.val;return this.writer.buf(n,n.length);default:return e instanceof Uint8Array?this.writeBin(e):Array.isArray(e)?this.writeArr(e):e instanceof Map?this.writeMap(e):this.writeUnknown(e)}}case"undefined":return this.writeUndef();case"bigint":return this.writeBigInt(e);default:return this.writeUnknown(e)}}writeFloat(e){(0,I1.isFloat32)(e)?this.writer.u8f32(250,e):this.writer.u8f64(251,e)}writeMap(e){this.writeMapHdr(e.size),e.forEach((r,n)=>{this.writeAny(n),this.writeAny(r)})}writeUndef(){this.writer.u8(247)}};Z0.CborEncoder=ES});var sI=gt(X0=>{"use strict";Object.defineProperty(X0,"__esModule",{value:!0});X0.decodeF16=void 0;var D1=Math.pow,R1=t=>{let e=(t&31744)>>10,r=t&1023;return(t>>15?-1:1)*(e?e===31?r?NaN:1/0:D1(2,e-15)*(1+r/1024):6103515625e-14*(r/1024))};X0.decodeF16=R1});var uI=gt(C_=>{"use strict";Object.defineProperty(C_,"__esModule",{value:!0});C_.decodeAsciiMax15=C_.decodeAscii=void 0;var tc=String.fromCharCode,O1=(t,e,r)=>{let n=[];for(let i=0;i<r;i++){let a=t[e++];if(a&128)return;n.push(a)}return tc.apply(String,n)};C_.decodeAscii=O1;var A1=(t,e,r)=>{if(r<4)if(r<2){if(r===0)return"";{let n=t[e++];if((n&128)>1){e-=1;return}return tc(n)}}else{let n=t[e++],i=t[e++];if((n&128)>0||(i&128)>0){e-=2;return}if(r<3)return tc(n,i);let a=t[e++];if((a&128)>0){e-=3;return}return tc(n,i,a)}else{let n=t[e++],i=t[e++],a=t[e++],u=t[e++];if((n&128)>0||(i&128)>0||(a&128)>0||(u&128)>0){e-=4;return}if(r<6){if(r===4)return tc(n,i,a,u);{let f=t[e++];if((f&128)>0){e-=5;return}return tc(n,i,a,u,f)}}else if(r<8){let f=t[e++],m=t[e++];if((f&128)>0||(m&128)>0){e-=6;return}if(r<7)return tc(n,i,a,u,f,m);let y=t[e++];if((y&128)>0){e-=7;return}return tc(n,i,a,u,f,m,y)}else{let f=t[e++],m=t[e++],y=t[e++],x=t[e++];if((f&128)>0||(m&128)>0||(y&128)>0||(x&128)>0){e-=8;return}if(r<10){if(r===8)return tc(n,i,a,u,f,m,y,x);{let P=t[e++];if((P&128)>0){e-=9;return}return tc(n,i,a,u,f,m,y,x,P)}}else if(r<12){let P=t[e++],V=t[e++];if((P&128)>0||(V&128)>0){e-=10;return}if(r<11)return tc(n,i,a,u,f,m,y,x,P,V);let G=t[e++];if((G&128)>0){e-=11;return}return tc(n,i,a,u,f,m,y,x,P,V,G)}else{let P=t[e++],V=t[e++],G=t[e++],Y=t[e++];if((P&128)>0||(V&128)>0||(G&128)>0||(Y&128)>0){e-=12;return}if(r<14){if(r===12)return tc(n,i,a,u,f,m,y,x,P,V,G,Y);{let q=t[e++];if((q&128)>0){e-=13;return}return tc(n,i,a,u,f,m,y,x,P,V,G,Y,q)}}else{let q=t[e++],J=t[e++];if((q&128)>0||(J&128)>0){e-=14;return}if(r<15)return tc(n,i,a,u,f,m,y,x,P,V,G,Y,q,J);let ee=t[e++];if((ee&128)>0){e-=15;return}return tc(n,i,a,u,f,m,y,x,P,V,G,Y,q,J,ee)}}}}};C_.decodeAsciiMax15=A1});var cI=gt(TS=>{"use strict";Object.defineProperty(TS,"__esModule",{value:!0});var P1=String.fromCharCode;TS.default=(t,e,r)=>{let n=e,i=n+r,a=[];for(;n<i;){let u=t[n++];if(u&128){let f=t[n++]&63;if((u&224)===192)u=(u&31)<<6|f;else{let m=t[n++]&63;if((u&240)===224)u=(u&31)<<12|f<<6|m;else if((u&248)===240){let y=t[n++]&63,x=(u&7)<<18|f<<12|m<<6|y;if(x>65535){x-=65536;let P=x>>>10&1023|55296;u=56320|x&1023,a.push(P)}else u=x}}}a.push(u)}return P1.apply(String,a)}});var hI=gt(IS=>{"use strict";Object.defineProperty(IS,"__esModule",{value:!0});var M1=(Ag(),Dg(Og)),dI=uI(),xS=M1.__importDefault(cI()),pI=typeof Buffer<"u",lI=pI?Buffer.prototype.utf8Slice:null,fI=pI?Buffer.from:null,L1=(t,e,r)=>(0,dI.decodeAsciiMax15)(t,e,r)??(0,xS.default)(t,e,r),F1=(t,e,r)=>(0,dI.decodeAscii)(t,e,r)??(0,xS.default)(t,e,r),U1=lI?(t,e,r)=>lI.call(t,e,e+r):fI?(t,e,r)=>fI(t).subarray(e,e+r).toString("utf8"):xS.default,j1=(t,e,r)=>r<16?L1(t,e,r):r<32?F1(t,e,r):U1(t,e,r);IS.default=j1});var NS=gt(Q0=>{"use strict";Object.defineProperty(Q0,"__esModule",{value:!0});Q0.decodeUtf8=void 0;var B1=(Ag(),Dg(Og)),$1=B1.__importDefault(hI());Q0.decodeUtf8=$1.default});var kS=gt(ew=>{"use strict";Object.defineProperty(ew,"__esModule",{value:!0});ew.Reader=void 0;var Y1=NS(),CS=class{constructor(){this.uint8=new Uint8Array([]),this.view=new DataView(this.uint8.buffer),this.x=0}reset(e){this.x=0,this.uint8=e,this.view=new DataView(e.buffer,e.byteOffset,e.length)}peak(){return this.view.getUint8(this.x)}skip(e){this.x+=e}buf(e){let r=this.x+e,n=this.uint8.subarray(this.x,r);return this.x=r,n}u8(){return this.uint8[this.x++]}i8(){return this.view.getInt8(this.x++)}u16(){let e=this.x,r=(this.uint8[e++]<<8)+this.uint8[e++];return this.x=e,r}i16(){let e=this.view.getInt16(this.x);return this.x+=2,e}u32(){let e=this.view.getUint32(this.x);return this.x+=4,e}i32(){let e=this.view.getInt32(this.x);return this.x+=4,e}u64(){let e=this.view.getBigUint64(this.x);return this.x+=8,e}i64(){let e=this.view.getBigInt64(this.x);return this.x+=8,e}f32(){let e=this.x;return this.x+=4,this.view.getFloat32(e)}f64(){let e=this.x;return this.x+=8,this.view.getFloat64(e)}utf8(e){let r=this.x;return this.x+=e,(0,Y1.decodeUtf8)(this.uint8,r,e)}ascii(e){let r=this.uint8,n="",i=this.x+e;for(let a=this.x;a<i;a++)n+=String.fromCharCode(r[a]);return this.x=i,n}};ew.Reader=CS});var mI=gt(DS=>{"use strict";Object.defineProperty(DS,"__esModule",{value:!0});var k_=String.fromCharCode;DS.default=(t,e,r)=>{let n=e,i=n+r,a="";for(;n<i;){let u=t[n++];if(!(u&128)){a+=k_(u);continue}let f=t[n++]&63;if((u&224)===192){a+=k_((u&31)<<6|f);continue}let m=t[n++]&63;if((u&240)===224){a+=k_((u&31)<<12|f<<6|m);continue}if((u&248)===240){let y=t[n++]&63,x=(u&7)<<18|f<<12|m<<6|y;if(x>65535){x-=65536;let P=x>>>10&1023|55296;x=56320|x&1023,a+=k_(P,x)}else a+=k_(x)}else a+=k_(u)}return a}});var vI=gt(tw=>{"use strict";Object.defineProperty(tw,"__esModule",{value:!0});tw.CachedUtf8Decoder=void 0;var q1=(Ag(),Dg(Og)),H1=q1.__importDefault(mI()),Fg=1+Math.round(Math.random()*((-1>>>0)-1));function V1(t,e){return Fg^=Fg<<13,Fg^=Fg>>>17,Fg^=Fg<<5,(Fg>>>0)%(e-t+1)+t}var RS=class{constructor(e,r){this.bytes=e,this.value=r}},OS=class{constructor(){this.caches=[];for(let e=0;e<31;e++)this.caches.push([])}get(e,r,n){let i=this.caches[n-1],a=i.length;e:for(let u=0;u<a;u++){let f=i[u],m=f.bytes;for(let y=0;y<n;y++)if(m[y]!==e[r+y])continue e;return f.value}return null}store(e,r){let n=this.caches[e.length-1],i=new RS(e,r);n.length>=16?n[V1(0,15)]=i:n.push(i)}decode(e,r,n){if(!n)return"";let i=this.get(e,r,n);if(i!==null)return i;let a=(0,H1.default)(e,r,n),u=Uint8Array.prototype.slice.call(e,r,r+n);return this.store(u,a),a}};tw.CachedUtf8Decoder=OS});var gI=gt(AS=>{"use strict";Object.defineProperty(AS,"__esModule",{value:!0});var G1=vI();AS.default=new G1.CachedUtf8Decoder});var yI=gt(rw=>{"use strict";Object.defineProperty(rw,"__esModule",{value:!0});rw.CborDecoderBase=void 0;var z1=(Ag(),Dg(Og)),W1=sI(),J1=gS(),_I=K0(),K1=kS(),Z1=z1.__importDefault(gI()),PS=class{constructor(e=new K1.Reader,r=Z1.default){this.reader=e,this.keyDecoder=r}read(e){return this.reader.reset(e),this.val()}decode(e){return this.reader.reset(e),this.val()}val(){let r=this.reader.u8(),n=r>>5,i=r&31;return n<4?n<2?n===0?this.readUint(i):this.readNint(i):n===2?this.readBin(i):this.readStr(i):n<6?n===4?this.readArr(i):this.readObj(i):n===6?this.readTag(i):this.readTkn(i)}readAnyRaw(e){let r=e>>5,n=e&31;return r<4?r<2?r===0?this.readUint(n):this.readNint(n):r===2?this.readBin(n):this.readStr(n):r<6?r===4?this.readArr(n):this.readObj(n):r===6?this.readTag(n):this.readTkn(n)}readMinorLen(e){if(e<24)return e;switch(e){case 24:return this.reader.u8();case 25:return this.reader.u16();case 26:return this.reader.u32();case 27:return Number(this.reader.u64());case 31:return-1;default:throw 1}}readUint(e){if(e<25)return e===24?this.reader.u8():e;if(e<27)return e===25?this.reader.u16():this.reader.u32();{let r=this.reader.u64();return r>9007199254740991?r:Number(r)}}readNint(e){if(e<25)return e===24?-this.reader.u8()-1:-e-1;if(e<27)return e===25?-this.reader.u16()-1:-this.reader.u32()-1;{let r=this.reader.u64();return r>9007199254740991-1?-r-BigInt(1):-Number(r)-1}}readBin(e){let r=this.reader;if(e<=23)return r.buf(e);switch(e){case 24:return r.buf(r.u8());case 25:return r.buf(r.u16());case 26:return r.buf(r.u32());case 27:return r.buf(Number(r.u64()));case 31:{let n=0,i=[];for(;this.reader.peak()!==255;){let m=this.readBinChunk();n+=m.length,i.push(m)}this.reader.x++;let a=new Uint8Array(n),u=0,f=i.length;for(let m=0;m<f;m++){let y=i[m];a.set(y,u),u+=y.length}return a}default:throw 1}}readBinChunk(){let e=this.reader.u8(),r=e>>5,n=e&31;if(r!==2)throw 2;if(n>27)throw 3;return this.readBin(n)}readAsStr(){let r=this.reader.u8(),n=r>>5,i=r&31;if(n!==3)throw 11;return this.readStr(i)}readStr(e){let r=this.reader;if(e<=23)return r.utf8(e);switch(e){case 24:return r.utf8(r.u8());case 25:return r.utf8(r.u16());case 26:return r.utf8(r.u32());case 27:return r.utf8(Number(r.u64()));case 31:{let n="";for(;r.peak()!==255;)n+=this.readStrChunk();return this.reader.x++,n}default:throw 1}}readStrLen(e){if(e<=23)return e;switch(e){case 24:return this.reader.u8();case 25:return this.reader.u16();case 26:return this.reader.u32();case 27:return Number(this.reader.u64());default:throw 1}}readStrChunk(){let e=this.reader.u8(),r=e>>5,n=e&31;if(r!==3)throw 4;if(n>27)throw 5;return this.readStr(n)}readArr(e){let r=this.readMinorLen(e);return r>=0?this.readArrRaw(r):this.readArrIndef()}readArrRaw(e){let r=[];for(let n=0;n<e;n++)r.push(this.val());return r}readArrIndef(){let e=[];for(;this.reader.peak()!==255;)e.push(this.val());return this.reader.x++,e}readObj(e){if(e<28){let r=e;switch(e){case 24:r=this.reader.u8();break;case 25:r=this.reader.u16();break;case 26:r=this.reader.u32();break;case 27:r=Number(this.reader.u64());break}let n={};for(let i=0;i<r;i++){let a=this.key();if(a==="__proto__")throw 6;let u=this.val();n[a]=u}return n}else{if(e===31)return this.readObjIndef();throw 1}}readObjRaw(e){let r={};for(let n=0;n<e;n++){let i=this.key(),a=this.val();r[i]=a}return r}readObjIndef(){let e={};for(;this.reader.peak()!==255;){let r=this.key();if(this.reader.peak()===255)throw 7;let n=this.val();e[r]=n}return this.reader.x++,e}key(){let e=this.reader.u8(),r=e>>5,n=e&31;if(r!==3)return String(this.readAnyRaw(e));let i=this.readStrLen(n);if(i>31)return this.reader.utf8(i);let a=this.keyDecoder.decode(this.reader.uint8,this.reader.x,i);return this.reader.skip(i),a}readTag(e){if(e<=23)return this.readTagRaw(e);switch(e){case 24:return this.readTagRaw(this.reader.u8());case 25:return this.readTagRaw(this.reader.u16());case 26:return this.readTagRaw(this.reader.u32());case 27:return this.readTagRaw(Number(this.reader.u64()));default:throw 1}}readTagRaw(e){return new J1.JsonPackExtension(e,this.val())}readTkn(e){switch(e){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case 24:return new _I.JsonPackValue(this.reader.u8());case 25:return this.f16();case 26:return this.reader.f32();case 27:return this.reader.f64()}if(e<=23)return new _I.JsonPackValue(e);throw 1}f16(){return(0,W1.decodeF16)(this.reader.u16())}};rw.CborDecoderBase=PS});var wI=gt(nw=>{"use strict";Object.defineProperty(nw,"__esModule",{value:!0});nw.CborDecoder=void 0;var X1=yI(),Q1=K0(),MS=class extends X1.CborDecoderBase{readAsMap(){let e=this.reader.u8(),r=e>>5,n=e&31;switch(r){case 5:return this.readMap(n);default:throw 0}}readMap(e){let r=this.readMinorLen(e);return r>=0?this.readMapRaw(r):this.readMapIndef()}readMapRaw(e){let r=new Map;for(let n=0;n<e;n++){let i=this.val(),a=this.val();r.set(i,a)}return r}readMapIndef(){let e=new Map;for(;this.reader.peak()!==255;){let r=this.val();if(this.reader.peak()===255)throw 7;let n=this.val();e.set(r,n)}return this.reader.x++,e}skipN(e){for(let r=0;r<e;r++)this.skipAny()}skipAny(){this.skipAnyRaw(this.reader.u8())}skipAnyRaw(e){let r=e>>5,n=e&31;switch(r){case 0:case 1:this.skipUNint(n);break;case 2:this.skipBin(n);break;case 3:this.skipStr(n);break;case 4:this.skipArr(n);break;case 5:this.skipObj(n);break;case 7:this.skipTkn(n);break;case 6:this.skipTag(n);break}}skipMinorLen(e){if(e<=23)return e;switch(e){case 24:return this.reader.u8();case 25:return this.reader.u16();case 26:return this.reader.u32();case 27:return Number(this.reader.u64());case 31:return-1;default:throw 1}}skipUNint(e){if(!(e<=23))switch(e){case 24:return this.reader.skip(1);case 25:return this.reader.skip(2);case 26:return this.reader.skip(4);case 27:return this.reader.skip(8);default:throw 1}}skipBin(e){let r=this.skipMinorLen(e);if(r>=0)this.reader.skip(r);else{for(;this.reader.peak()!==255;)this.skipBinChunk();this.reader.x++}}skipBinChunk(){let e=this.reader.u8(),r=e>>5,n=e&31;if(r!==2)throw 2;if(n>27)throw 3;this.skipBin(n)}skipStr(e){let r=this.skipMinorLen(e);if(r>=0)this.reader.skip(r);else{for(;this.reader.peak()!==255;)this.skipStrChunk();this.reader.x++}}skipStrChunk(){let e=this.reader.u8(),r=e>>5,n=e&31;if(r!==3)throw 4;if(n>27)throw 5;this.skipStr(n)}skipArr(e){let r=this.skipMinorLen(e);if(r>=0)this.skipN(r);else{for(;this.reader.peak()!==255;)this.skipAny();this.reader.x++}}skipObj(e){let r=this.readMinorLen(e);if(r>=0)return this.skipN(r*2);for(;this.reader.peak()!==255;){if(this.skipAny(),this.reader.peak()===255)throw 7;this.skipAny()}this.reader.x++}skipTag(e){if(this.skipMinorLen(e)<0)throw 1;this.skipAny()}skipTkn(e){switch(e){case 24:this.reader.skip(1);return;case 25:this.reader.skip(2);return;case 26:this.reader.skip(4);return;case 27:this.reader.skip(8);return}if(!(e<=23))throw 1}validate(e,r=0,n=e.length){this.reader.reset(e),this.reader.x=r;let i=r;if(this.skipAny(),this.reader.x-i!==n)throw 8}decodeLevel(e){return this.reader.reset(e),this.readLevel()}readLevel(){let e=this.reader.u8(),r=e>>5,n=e&31;switch(r){case 4:return this.readArrLevel(n);case 5:return this.readObjLevel(n);default:return super.readAnyRaw(e)}}readPrimitiveOrVal(){switch(this.reader.peak()>>5){case 4:case 5:return this.readAsValue();default:return this.val()}}readAsValue(){let e=this.reader,r=e.x;this.skipAny();let n=e.x;return new Q1.JsonPackValue(e.uint8.subarray(r,n))}readObjLevel(e){let r=this.readMinorLen(e);return r>=0?this.readObjRawLevel(r):this.readObjIndefLevel()}readObjRawLevel(e){let r={};for(let n=0;n<e;n++){let i=this.key(),a=this.readPrimitiveOrVal();r[i]=a}return r}readObjIndefLevel(){let e={};for(;this.reader.peak()!==255;){let r=this.key();if(this.reader.peak()===255)throw 7;let n=this.readPrimitiveOrVal();e[r]=n}return this.reader.x++,e}readArrLevel(e){let r=this.readMinorLen(e);return r>=0?this.readArrRawLevel(r):this.readArrIndefLevel()}readArrRawLevel(e){let r=[];for(let n=0;n<e;n++)r.push(this.readPrimitiveOrVal());return r}readArrIndefLevel(){let e=[];for(;this.reader.peak()!==255;)e.push(this.readPrimitiveOrVal());return this.reader.x++,e}readHdr(e){let r=this.reader.u8();if(r>>5!==e)throw 0;let i=r&31;if(i<24)return i;switch(i){case 24:return this.reader.u8();case 25:return this.reader.u16();case 26:return this.reader.u32();case 27:return Number(this.reader.u64());case 31:return-1}throw 1}readStrHdr(){return this.readHdr(3)}readObjHdr(){return this.readHdr(5)}readArrHdr(){return this.readHdr(4)}findKey(e){let r=this.readObjHdr();for(let n=0;n<r;n++){if(this.key()===e)return this;this.skipAny()}throw 9}findIndex(e){let r=this.readArrHdr();if(e>=r)throw 10;for(let n=0;n<e;n++)this.skipAny();return this}find(e){for(let r=0;r<e.length;r++){let n=e[r];typeof n=="string"?this.findKey(n):this.findIndex(n)}return this}};nw.CborDecoder=MS});var LS=gt(Kv=>{"use strict";Object.defineProperty(Kv,"__esModule",{value:!0});Kv.fromSnapshot=Kv.toSnapshot=void 0;var eM=async({fs:t,path:e="/",separator:r="/"})=>{let n=await t.lstat(e);if(n.isDirectory()){let i=await t.readdir(e),a={},u=e.endsWith(r)?e:e+r;for(let f of i){let m=await(0,Kv.toSnapshot)({fs:t,path:`${u}${f}`,separator:r});m&&(a[""+f]=m)}return[0,{},a]}else if(n.isFile()){let i=await t.readFile(e),a=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);return[1,{},a]}else if(n.isSymbolicLink())return[2,{target:await t.readlink(e,{encoding:"utf8"})}];return null};Kv.toSnapshot=eM;var tM=async(t,{fs:e,path:r="/",separator:n="/"})=>{if(t)switch(t[0]){case 0:{r.endsWith(n)||(r=r+n);let[,,i]=t;await e.mkdir(r,{recursive:!0});for(let[a,u]of Object.entries(i))await(0,Kv.fromSnapshot)(u,{fs:e,path:`${r}${a}`,separator:n});break}case 1:{let[,,i]=t;await e.writeFile(r,i);break}case 2:{let[,{target:i}]=t;await e.symlink(i,r);break}}};Kv.fromSnapshot=tM});var FS=gt(iw=>{"use strict";Object.defineProperty(iw,"__esModule",{value:!0});iw.writer=void 0;var rM=wS();iw.writer=new rM.Writer(1024*32)});var xI=gt(hm=>{"use strict";Object.defineProperty(hm,"__esModule",{value:!0});hm.fromBinarySnapshot=hm.toBinarySnapshot=hm.fromBinarySnapshotSync=hm.toBinarySnapshotSync=void 0;var nM=oI(),iM=wI(),bI=q0(),SI=LS(),aM=FS(),EI=new nM.CborEncoder(aM.writer),TI=new iM.CborDecoder,oM=t=>{let e=(0,bI.toSnapshotSync)(t);return EI.encode(e)};hm.toBinarySnapshotSync=oM;var sM=(t,e)=>{let r=TI.decode(t);(0,bI.fromSnapshotSync)(r,e)};hm.fromBinarySnapshotSync=sM;var uM=async t=>{let e=await(0,SI.toSnapshot)(t);return EI.encode(e)};hm.toBinarySnapshot=uM;var cM=async(t,e)=>{let r=TI.decode(t);await(0,SI.fromSnapshot)(r,e)};hm.fromBinarySnapshot=cM});var US=gt(D_=>{"use strict";Object.defineProperty(D_,"__esModule",{value:!0});D_.hasBuffer=D_.alphabet=void 0;D_.alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";D_.hasBuffer=typeof Buffer=="function"&&typeof Buffer.from=="function"});var II=gt(aw=>{"use strict";Object.defineProperty(aw,"__esModule",{value:!0});aw.createToBase64Bin=void 0;var lM=US(),fM=(t=lM.alphabet,e="=")=>{if(t.length!==64)throw new Error("chars must be 64 characters long");let r=t.split("").map(f=>f.charCodeAt(0)),n=[];for(let f of r)for(let m of r){let y=(f<<8)+m;n.push(y)}let i=e.length===1,a=i?e.charCodeAt(0):0,u=i?a<<8|a:0;return(f,m,y,x,P)=>{let V=y%3,G=y-V;for(;m<G;m+=3){let Y=f[m],q=f[m+1],J=f[m+2],ee=Y<<4|q>>4,ve=(q&15)<<8|J;x.setInt32(P,(n[ee]<<16)+n[ve]),P+=4}if(V===1){let Y=f[G];i?(x.setInt32(P,(n[Y<<4]<<16)+u),P+=4):(x.setInt16(P,n[Y<<4]),P+=2)}else if(V){let Y=f[G],q=f[G+1],J=Y<<4|q>>4,ee=(q&15)<<2;i?(x.setInt32(P,(n[J]<<16)+(r[ee]<<8)+a),P+=4):(x.setInt16(P,n[J]),P+=2,x.setInt8(P,r[ee]),P+=1)}return P}};aw.createToBase64Bin=fM});var NI=gt(ow=>{"use strict";Object.defineProperty(ow,"__esModule",{value:!0});ow.toBase64Bin=void 0;var dM=II();ow.toBase64Bin=(0,dM.createToBase64Bin)()});var CI=gt(sw=>{"use strict";Object.defineProperty(sw,"__esModule",{value:!0});sw.JsonEncoder=void 0;var pM=NI(),jS=class{constructor(e){this.writer=e}encode(e){let r=this.writer;return r.reset(),this.writeAny(e),r.flush()}writeUnknown(e){this.writeNull()}writeAny(e){switch(typeof e){case"boolean":return this.writeBoolean(e);case"number":return this.writeNumber(e);case"string":return this.writeStr(e);case"object":{if(e===null)return this.writeNull();switch(e.constructor){case Object:return this.writeObj(e);case Array:return this.writeArr(e);case Uint8Array:return this.writeBin(e);default:return e instanceof Uint8Array?this.writeBin(e):Array.isArray(e)?this.writeArr(e):this.writeUnknown(e)}}case"undefined":return this.writeUndef();default:return this.writeUnknown(e)}}writeNull(){this.writer.u32(1853189228)}writeUndef(){let e=this.writer;e.ensureCapacity(35);let n=e.view,i=e.x;n.setUint32(i,577003892),i+=4,n.setUint32(i,1631215984),i+=4,n.setUint32(i,1886153059),i+=4,n.setUint32(i,1635019119),i+=4,n.setUint32(i,1848599394),i+=4,n.setUint32(i,1869753442),i+=4,n.setUint32(i,1634952502),i+=4,n.setUint32(i,876296567),i+=4,n.setUint16(i,15677),i+=2,e.uint8[i++]=34,e.x=i}writeBoolean(e){e?this.writer.u32(1953658213):this.writer.u8u32(102,1634497381)}writeNumber(e){let r=e.toString();this.writer.ascii(r)}writeInteger(e){this.writeNumber(e>>0===e?e:Math.trunc(e))}writeUInteger(e){this.writeInteger(e<0?-e:e)}writeFloat(e){this.writeNumber(e)}writeBin(e){let r=this.writer,n=e.length;r.ensureCapacity(41+(n<<1));let i=r.view,a=r.x;i.setUint32(a,577003892),a+=4,i.setUint32(a,1631215984),a+=4,i.setUint32(a,1886153059),a+=4,i.setUint32(a,1635019119),a+=4,i.setUint32(a,1848602467),a+=4,i.setUint32(a,1952805933),a+=4,i.setUint32(a,1937011301),a+=4,i.setUint32(a,1634548578),a+=4,i.setUint32(a,1634952502),a+=4,i.setUint16(a,13356),a+=2,a=(0,pM.toBase64Bin)(e,0,n,i,a),r.uint8[a++]=34,r.x=a}writeStr(e){let r=this.writer,n=e.length;if(r.ensureCapacity(n*4+2),n<256){let i=r.x,a=r.uint8;a[i++]=34;for(let u=0;u<n;u++){let f=e.charCodeAt(u);switch(f){case 34:case 92:a[i++]=92;break}if(f<32||f>126){r.utf8(JSON.stringify(e));return}else a[i++]=f}a[i++]=34,r.x=i;return}r.utf8(JSON.stringify(e))}writeAsciiStr(e){let r=e.length,n=this.writer;n.ensureCapacity(r*2+2);let i=n.uint8,a=n.x;i[a++]=34;for(let u=0;u<r;u++){let f=e.charCodeAt(u);switch(f){case 34:case 92:i[a++]=92;break}i[a++]=f}i[a++]=34,n.x=a}writeArr(e){let r=this.writer;r.u8(91);let i=e.length-1;for(let a=0;a<i;a++)this.writeAny(e[a]),r.u8(44);i>=0&&this.writeAny(e[i]),r.u8(93)}writeArrSeparator(){this.writer.u8(44)}writeObj(e){let r=this.writer,n=Object.keys(e),i=n.length;if(!i)return r.u16(31613);r.u8(123);for(let a=0;a<i;a++){let u=n[a],f=e[u];this.writeStr(u),r.u8(58),this.writeAny(f),r.u8(44)}r.uint8[r.x-1]=125}writeObjSeparator(){this.writer.u8(44)}writeObjKeySeparator(){this.writer.u8(58)}writeStartStr(){throw new Error("Method not implemented.")}writeStrChunk(e){throw new Error("Method not implemented.")}writeEndStr(){throw new Error("Method not implemented.")}writeStartBin(){throw new Error("Method not implemented.")}writeBinChunk(e){throw new Error("Method not implemented.")}writeEndBin(){throw new Error("Method not implemented.")}writeStartArr(){this.writer.u8(91)}writeArrChunk(e){throw new Error("Method not implemented.")}writeEndArr(){this.writer.u8(93)}writeStartObj(){this.writer.u8(123)}writeObjChunk(e,r){throw new Error("Method not implemented.")}writeEndObj(){this.writer.u8(125)}};sw.JsonEncoder=jS});var kI=gt(uw=>{"use strict";Object.defineProperty(uw,"__esModule",{value:!0});uw.createFromBase64Bin=void 0;var hM=US(),mM=(t=hM.alphabet,e="=")=>{if(t.length!==64)throw new Error("chars must be 64 characters long");let r=0;for(let u=0;u<t.length;u++)r=Math.max(r,t.charCodeAt(u));let n=[];for(let u=0;u<=r;u+=1)n[u]=-1;for(let u=0;u<t.length;u++)n[t.charCodeAt(u)]=u;let a=e.length===1?e.charCodeAt(0):0;return(u,f,m)=>{if(!m)return new Uint8Array(0);let y=0;if(m%4!==0)y=4-m%4,m+=y;else{let _e=f+m-1;u.getUint8(_e)===a&&(y=1,m>1&&u.getUint8(_e-1)===a&&(y=2))}if(m%4!==0)throw new Error("Base64 string length must be a multiple of 4");let x=f+m-(y?4:0),P=(m>>2)*3-y,V=new Uint8Array(P),G=0,Y=f;for(;Y<x;Y+=4){let ue=u.getUint32(Y),_e=ue>>>24,Ue=ue>>>16&255,$e=ue>>>8&255,Ke=ue&255,ct=n[_e],vt=n[Ue],wr=n[$e],$r=n[Ke];if(ct<0||vt<0||wr<0||$r<0)throw new Error("INVALID_BASE64_SEQ");V[G]=ct<<2|vt>>4,V[G+1]=vt<<4|wr>>2,V[G+2]=wr<<6|$r,G+=3}if(!y)return V;if(y===1){let ue=u.getUint16(x),_e=ue>>8,Ue=ue&255,$e=u.getUint8(x+2),Ke=n[_e],ct=n[Ue],vt=n[$e];if(Ke<0||ct<0||vt<0)throw new Error("INVALID_BASE64_SEQ");return V[G]=Ke<<2|ct>>4,V[G+1]=ct<<4|vt>>2,V}let q=u.getUint16(x),J=q>>8,ee=q&255,ve=n[J],ye=n[ee];if(ve<0||ye<0)throw new Error("INVALID_BASE64_SEQ");return V[G]=ve<<2|ye>>4,V}};uw.createFromBase64Bin=mM});var DI=gt(cw=>{"use strict";Object.defineProperty(cw,"__esModule",{value:!0});cw.fromBase64Bin=void 0;var vM=kI();cw.fromBase64Bin=(0,vM.createFromBase64Bin)()});var RI=gt(lw=>{"use strict";Object.defineProperty(lw,"__esModule",{value:!0});lw.findEndingQuote=void 0;var gM=(t,e)=>{let r=t.length,n=t[e],i=0;for(;e<r&&!(n===34&&i!==92);)n===92&&i===92?i=0:i=n,n=t[++e];if(e===r)throw new Error("Invalid JSON");return e};lw.findEndingQuote=gM});var PI=gt(fw=>{"use strict";Object.defineProperty(fw,"__esModule",{value:!0});fw.JsonDecoder=void 0;var _M=NS(),yM=kS(),OI=DI(),BS=RI(),wM=/\\(b|f|n|r|t|"|\/|\\)/g,bM=t=>{switch(t){case"\\b":return"\b";case"\\f":return"\f";case"\\n":return`
`;case"\\r":return"\r";case"\\t":return"	";case'\\"':return'"';case"\\/":return"/";case"\\\\":return"\\"}return t},AI=(t,e)=>t[e]===100&&t[e+1]===97&&t[e+2]===116&&t[e+3]===97&&t[e+4]===58&&t[e+5]===97&&t[e+6]===112&&t[e+7]===112&&t[e+8]===108&&t[e+9]===105&&t[e+10]===99&&t[e+11]===97&&t[e+12]===116&&t[e+13]===105&&t[e+14]===111&&t[e+15]===110&&t[e+16]===47&&t[e+17]===111&&t[e+18]===99&&t[e+19]===116&&t[e+20]===101&&t[e+21]===116&&t[e+22]===45&&t[e+23]===115&&t[e+24]===116&&t[e+25]===114&&t[e+26]===101&&t[e+27]===97&&t[e+28]===109&&t[e+29]===59&&t[e+30]===98&&t[e+31]===97&&t[e+32]===115&&t[e+33]===101&&t[e+34]===54&&t[e+35]===52&&t[e+36]===44,SM=(t,e)=>t[e++]===97&&t[e++]===116&&t[e++]===97&&t[e++]===58&&t[e++]===97&&t[e++]===112&&t[e++]===112&&t[e++]===108&&t[e++]===105&&t[e++]===99&&t[e++]===97&&t[e++]===116&&t[e++]===105&&t[e++]===111&&t[e++]===110&&t[e++]===47&&t[e++]===99&&t[e++]===98&&t[e++]===111&&t[e++]===114&&t[e++]===44&&t[e++]===98&&t[e++]===97&&t[e++]===115&&t[e++]===101&&t[e++]===54&&t[e++]===52&&t[e++]===59&&t[e++]===57&&t[e++]===119&&t[e++]===61&&t[e++]===61&&t[e++]===34,Ki=String.fromCharCode,EM=t=>{let e=t.uint8,r=e.length,n=[],i=t.x,a=0;for(;i<r;){let u=e[i++];if(u&128){let f=e[i++]&63;if((u&224)===192)u=(u&31)<<6|f;else{let m=e[i++]&63;if((u&240)===224)u=(u&31)<<12|f<<6|m;else if((u&248)===240){let y=e[i++]&63,x=(u&7)<<18|f<<12|m<<6|y;if(x>65535){x-=65536;let P=x>>>10&1023|55296;x=56320|x&1023,n.push(P),u=x}else u=x}}}else if(a===92){switch(u){case 98:u=8;break;case 102:u=12;break;case 110:u=10;break;case 114:u=13;break;case 116:u=9;break;case 34:u=34;break;case 47:u=47;break;case 92:u=92;break;default:throw new Error("Invalid JSON")}a=0}else{if(u===34)break;if(a=u,a===92)continue}n.push(u)}return t.x=i,Ki.apply(String,n)},$S=class{constructor(){this.reader=new yM.Reader}read(e){return this.reader.reset(e),this.readAny()}decode(e){return this.reader.reset(e),this.readAny()}readAny(){this.skipWhitespace();let e=this.reader,r=e.x,n=e.uint8,i=n[r];switch(i){case 34:{if(n[r+1]===100){let a=this.tryReadBin();if(a)return a;if(SM(n,r+2)){e.x=r+35;return}}return this.readStr()}case 91:return this.readArr();case 102:return this.readFalse();case 110:return this.readNull();case 116:return this.readTrue();case 123:return this.readObj();default:if(i>=48&&i<=57||i===45)return this.readNum();throw new Error("Invalid JSON")}}skipWhitespace(){let e=this.reader,r=e.uint8,n=e.x,i=0;for(;;)switch(i=r[n],i){case 32:case 9:case 10:case 13:n++;continue;default:e.x=n;return}}readNull(){if(this.reader.u32()!==1853189228)throw new Error("Invalid JSON");return null}readTrue(){if(this.reader.u32()!==1953658213)throw new Error("Invalid JSON");return!0}readFalse(){let e=this.reader;if(e.u8()!==102||e.u32()!==1634497381)throw new Error("Invalid JSON");return!1}readBool(){let e=this.reader;switch(e.uint8[e.x]){case 102:return this.readFalse();case 116:return this.readTrue();default:throw new Error("Invalid JSON")}}readNum(){let e=this.reader,r=e.uint8,n=e.x,i=r[n++],a=i;if(i=r[n++],!i||(i<45||i>57)&&i!==43&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let u=i;if(i=r[n++],!i||(i<45||i>57)&&i!==43&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let f=i;if(i=r[n++],!i||(i<45||i>57)&&i!==43&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let m=i;if(i=r[n++],!i||(i<45||i>57)&&i!==43&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f,m);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let y=i;if(i=r[n++],!i||(i<45||i>57)&&i!==43&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f,m,y);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let x=i;if(i=r[n++],!i||(i<45||i>57)&&i!==43&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f,m,y,x);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let P=i;if(i=r[n++],!i||(i<45||i>57)&&i!==43&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f,m,y,x,P);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let V=i;if(i=r[n++],!i||(i<45||i>57)&&i!==43&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f,m,y,x,P,V);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let G=i;if(i=r[n++],!i||(i<45||i>57)&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f,m,y,x,P,V,G);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let Y=i;if(i=r[n++],!i||(i<45||i>57)&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f,m,y,x,P,V,G,Y);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let q=i;if(i=r[n++],!i||(i<45||i>57)&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f,m,y,x,P,V,G,Y,q);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let J=i;if(i=r[n++],!i||(i<45||i>57)&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f,m,y,x,P,V,G,Y,q,J);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let ee=i;if(i=r[n++],!i||(i<45||i>57)&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f,m,y,x,P,V,G,Y,q,J,ee);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let ve=i;if(i=r[n++],!i||(i<45||i>57)&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f,m,y,x,P,V,G,Y,q,J,ee,ve);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let ye=i;if(i=r[n++],!i||(i<45||i>57)&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f,m,y,x,P,V,G,Y,q,J,ee,ve,ye);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let ue=i;if(i=r[n++],!i||(i<45||i>57)&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f,m,y,x,P,V,G,Y,q,J,ee,ve,ye,ue);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let _e=i;if(i=r[n++],!i||(i<45||i>57)&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f,m,y,x,P,V,G,Y,q,J,ee,ve,ye,ue,_e);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let Ue=i;if(i=r[n++],!i||(i<45||i>57)&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f,m,y,x,P,V,G,Y,q,J,ee,ve,ye,ue,_e,Ue);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let $e=i;if(i=r[n++],!i||(i<45||i>57)&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f,m,y,x,P,V,G,Y,q,J,ee,ve,ye,ue,_e,Ue,$e);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let Ke=i;if(i=r[n++],!i||(i<45||i>57)&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f,m,y,x,P,V,G,Y,q,J,ee,ve,ye,ue,_e,Ue,$e,Ke);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let ct=i;if(i=r[n++],!i||(i<45||i>57)&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f,m,y,x,P,V,G,Y,q,J,ee,ve,ye,ue,_e,Ue,$e,Ke,ct);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let vt=i;if(i=r[n++],!i||(i<45||i>57)&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f,m,y,x,P,V,G,Y,q,J,ee,ve,ye,ue,_e,Ue,$e,Ke,ct,vt);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let wr=i;if(i=r[n++],!i||(i<45||i>57)&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f,m,y,x,P,V,G,Y,q,J,ee,ve,ye,ue,_e,Ue,$e,Ke,ct,vt,wr);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}let $r=i;if(i=r[n++],!i||(i<45||i>57)&&i!==69&&i!==101){e.x=n-1;let Ne=+Ki(a,u,f,m,y,x,P,V,G,Y,q,J,ee,ve,ye,ue,_e,Ue,$e,Ke,ct,vt,$r);if(Ne!==Ne)throw new Error("Invalid JSON");return Ne}throw new Error("Invalid JSON")}readStr(){let e=this.reader,r=e.uint8;if(r[e.x++]!==34)throw new Error("Invalid JSON");let i=e.x,a=(0,BS.findEndingQuote)(r,i),u=(0,_M.decodeUtf8)(r,i,a-i);return u=u.replace(wM,bM),e.x=a+1,u}tryReadBin(){let e=this.reader,r=e.uint8,n=e.x;if(r[n++]!==34||!AI(r,n))return;n+=37;let a=n;n=(0,BS.findEndingQuote)(r,n),e.x=a;let u=(0,OI.fromBase64Bin)(e.view,a,n-a);return e.x=n+1,u}readBin(){let e=this.reader,r=e.uint8,n=e.x;if(r[n++]!==34)throw new Error("Invalid JSON");if(!AI(r,n))throw new Error("Invalid JSON");n+=37;let a=n;n=(0,BS.findEndingQuote)(r,n),e.x=a;let u=(0,OI.fromBase64Bin)(e.view,a,n-a);return e.x=n+1,u}readArr(){let e=this.reader;if(e.u8()!==91)throw new Error("Invalid JSON");let r=[],n=e.uint8;for(;;){this.skipWhitespace();let i=n[e.x];if(i===93)return e.x++,r;if(i===44){e.x++;continue}r.push(this.readAny())}}readObj(){let e=this.reader;if(e.u8()!==123)throw new Error("Invalid JSON");let r={},n=e.uint8;for(;;){this.skipWhitespace();let i=n[e.x];if(i===125)return e.x++,r;if(i===44){e.x++;continue}if(i=n[e.x++],i!==34)throw new Error("Invalid JSON");let a=EM(e);if(a==="__proto__")throw new Error("Invalid JSON");if(this.skipWhitespace(),e.u8()!==58)throw new Error("Invalid JSON");this.skipWhitespace(),r[a]=this.readAny()}}};fw.JsonDecoder=$S});var jI=gt(mm=>{"use strict";Object.defineProperty(mm,"__esModule",{value:!0});mm.fromJsonSnapshot=mm.toJsonSnapshot=mm.fromJsonSnapshotSync=mm.toJsonSnapshotSync=void 0;var TM=CI(),xM=PI(),MI=q0(),LI=LS(),IM=FS(),FI=new TM.JsonEncoder(IM.writer),UI=new xM.JsonDecoder,NM=t=>{let e=(0,MI.toSnapshotSync)(t);return FI.encode(e)};mm.toJsonSnapshotSync=NM;var CM=(t,e)=>{let r=UI.read(t);(0,MI.fromSnapshotSync)(r,e)};mm.fromJsonSnapshotSync=CM;var kM=async t=>{let e=await(0,LI.toSnapshot)(t);return FI.encode(e)};mm.toJsonSnapshot=kM;var DM=async(t,e)=>{let r=UI.read(t);await(0,LI.fromSnapshot)(r,e)};mm.fromJsonSnapshot=DM});var BI=gt(R_=>{"use strict";Object.defineProperty(R_,"__esModule",{value:!0});var dw=(Ag(),Dg(Og));dw.__exportStar(Zx(),R_);dw.__exportStar(q0(),R_);dw.__exportStar(xI(),R_);dw.__exportStar(jI(),R_)});var XI=gt((H3,JS)=>{function zI(t){return Array.isArray(t)?t:[t]}var PM=void 0,HS="",VI=" ",qS="\\",MM=/^\s+$/,LM=/(?:[^\\]|^)\\$/,FM=/^\\!/,UM=/^\\#/,jM=/\r?\n/g,BM=/^\.*\/|^\.+$/,$M=/\/$/,O_="/",WI="node-ignore";typeof Symbol<"u"&&(WI=Symbol.for("node-ignore"));var JI=WI,yy=(t,e,r)=>(Object.defineProperty(t,e,{value:r}),r),YM=/([0-z])-([0-z])/g,KI=()=>!1,qM=t=>t.replace(YM,(e,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?e:HS),HM=t=>{let{length:e}=t;return t.slice(0,e-e%2)},VM=[[/^\uFEFF/,()=>HS],[/((?:\\\\)*?)(\\?\s+)$/,(t,e,r)=>e+(r.indexOf("\\")===0?VI:HS)],[/(\\+?)\s/g,(t,e)=>{let{length:r}=e;return e.slice(0,r-r%2)+VI}],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,r)=>e+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return e+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>qS],[/\\\\/g,()=>qS],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,r,n,i)=>e===qS?`\\[${r}${HM(n)}${i}`:i==="]"&&n.length%2===0?`[${qM(r)}${n}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`]],GM=/(^|\\\/)?\\\*$/,wy="regex",pw="checkRegex",GI="_",zM={[wy](t,e){return`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`},[pw](t,e){return`${e?`${e}[^/]*`:"[^/]*"}(?=$|\\/$)`}},WM=t=>VM.reduce((e,[r,n])=>e.replace(r,n.bind(t)),t),hw=t=>typeof t=="string",JM=t=>t&&hw(t)&&!MM.test(t)&&!LM.test(t)&&t.indexOf("#")!==0,KM=t=>t.split(jM).filter(Boolean),VS=class{constructor(e,r,n,i,a,u){this.pattern=e,this.mark=r,this.negative=a,yy(this,"body",n),yy(this,"ignoreCase",i),yy(this,"regexPrefix",u)}get regex(){let e=GI+wy;return this[e]?this[e]:this._make(wy,e)}get checkRegex(){let e=GI+pw;return this[e]?this[e]:this._make(pw,e)}_make(e,r){let n=this.regexPrefix.replace(GM,zM[e]),i=this.ignoreCase?new RegExp(n,"i"):new RegExp(n);return yy(this,r,i)}},ZM=({pattern:t,mark:e},r)=>{let n=!1,i=t;i.indexOf("!")===0&&(n=!0,i=i.substr(1)),i=i.replace(FM,"!").replace(UM,"#");let a=WM(i);return new VS(t,e,i,r,n,a)},GS=class{constructor(e){this._ignoreCase=e,this._rules=[]}_add(e){if(e&&e[JI]){this._rules=this._rules.concat(e._rules._rules),this._added=!0;return}if(hw(e)&&(e={pattern:e}),JM(e.pattern)){let r=ZM(e,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(e){return this._added=!1,zI(hw(e)?KM(e):e).forEach(this._add,this),this._added}test(e,r,n){let i=!1,a=!1,u;this._rules.forEach(m=>{let{negative:y}=m;a===y&&i!==a||y&&!i&&!a&&!r||!m[n].test(e)||(i=!y,a=y,u=y?PM:m)});let f={ignored:i,unignored:a};return u&&(f.rule=u),f}},XM=(t,e)=>{throw new e(t)},lv=(t,e,r)=>hw(t)?t?lv.isNotRelative(t)?r(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${e}\``,TypeError),ZI=t=>BM.test(t);lv.isNotRelative=ZI;lv.convert=t=>t;var zS=class{constructor({ignorecase:e=!0,ignoreCase:r=e,allowRelativePaths:n=!1}={}){yy(this,JI,!0),this._rules=new GS(r),this._strictPathCheck=!n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}add(e){return this._rules.add(e)&&this._initCache(),this}addPattern(e){return this.add(e)}_test(e,r,n,i){let a=e&&lv.convert(e);return lv(a,e,this._strictPathCheck?XM:KI),this._t(a,r,n,i)}checkIgnore(e){if(!$M.test(e))return this.test(e);let r=e.split(O_).filter(Boolean);if(r.pop(),r.length){let n=this._t(r.join(O_)+O_,this._testCache,!0,r);if(n.ignored)return n}return this._rules.test(e,!1,pw)}_t(e,r,n,i){if(e in r)return r[e];if(i||(i=e.split(O_).filter(Boolean)),i.pop(),!i.length)return r[e]=this._rules.test(e,n,wy);let a=this._t(i.join(O_)+O_,r,n,i);return r[e]=a.ignored?a:this._rules.test(e,n,wy)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return zI(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}},WS=t=>new zS(t),QM=t=>lv(t&&lv.convert(t),t,KI);if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let t=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");lv.convert=t;let e=/^[a-z]:\//i;lv.isNotRelative=r=>e.test(r)||ZI(r)}JS.exports=WS;WS.default=WS;JS.exports.isPathValid=QM});var rN=gt((Sw,tN)=>{(function(t,e){typeof Sw=="object"&&typeof tN<"u"?e(Sw):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.oneDS=t.oneDS||{}))})(Sw,function(t){"use strict";var e="function",r="object",n="undefined",i="prototype",a=Object,u=a[i];function f(o,l){return o||l}function m(o,l){return o[l]}var y=void 0,x=null,P="",V="function",G="object",Y="prototype",q="__proto__",J="undefined",ee="constructor",ve="Symbol",ye="_polyfill",ue="length",_e="name",Ue="call",$e="toString",Ke=f(Object),ct=m(Ke,Y),vt=f(String),wr=m(vt,Y),$r=f(Math),Ne=f(Array),dt=m(Ne,Y),Or=m(dt,"slice");function Ze(o,l){try{return{v:o.apply(this,l)}}catch(v){return{e:v}}}function yn(o,l){var v=Ze(o);return v.e?l:v.v}var Le;function qt(o){return function(l){return typeof l===o}}function Wt(o){var l="[object "+o+"]";return function(v){return!!(v&&Tt(v)===l)}}function Tt(o){return ct[$e].call(o)}function mn(o,l){return typeof o===l}function lt(o){return typeof o===J||o===J}function ti(o){return!er(o)}function ut(o){return o===x||lt(o)}function Su(o){return o===x||!er(o)}function er(o){return!!o||o!==y}function Ya(o){return!Le&&(Le=["string","number","boolean",J,"symbol","bigint"]),o!==G&&Le.indexOf(o)!==-1}var Xt=qt("string"),fr=qt(V);function Ni(o){return!o&&ut(o)?!1:!!o&&typeof o===G}var mr=m(Ne,"isArray"),Ci=Wt("Date"),Fr=qt("number"),qn=qt("boolean"),Ot=Wt("Error");function Ur(o){return!!(o&&o.then&&fr(o.then))}function tt(o){return!o||!An(o)}function An(o){return!(!o||yn(function(){return!(o&&0+o)},!o))}var Gr=m(Ke,"getOwnPropertyDescriptor");function Xr(o,l){return!!o&&ct.hasOwnProperty[Ue](o,l)}var Ia=f(m(Ke,"hasOwn"),Ui);function Ui(o,l){return Xr(o,l)||!!Gr(o,l)}function jr(o,l,v){if(o&&Ni(o)){for(var b in o)if(Ia(o,b)&&l[Ue](v||o,b,o[b])===-1)break}}var ar={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function br(o){var l={};if(l[ar.c]=!0,l[ar.e]=!0,o.l){l.get=function(){return o.l.v};var v=Gr(o.l,"v");v&&v.set&&(l.set=function(b){o.l.v=b})}return jr(o,function(b,I){l[ar[b]]=ti(I)?l[ar[b]]:I}),l}var cn=m(Ke,"defineProperty");function nd(o,l,v,b,I,R){var L={e:R,c:I};return v&&(L.g=v),b&&(L.s=b),cn(o,l,br(L))}function ri(o,l,v){return cn(o,l,br(v))}function id(o,l,v,b,I){var R={};return jr(o,function(L,O){Eu(R,L,l?O:L,I),Eu(R,O,v?O:L,I)}),b?b(R):R}function Eu(o,l,v,b){cn(o,l,{value:v,enumerable:!0,writable:!!b})}var Cn=f(vt),os="[object Error]";function Qt(o,l){var v=P,b=ct[$e][Ue](o);b===os&&(o={stack:Cn(o.stack),message:Cn(o.message),name:Cn(o.name)});try{v=JSON.stringify(o,x,l?typeof l=="number"?l:4:y),v=(v?v.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):x)||Cn(o)}catch(I){v=" - "+Qt(I,l)}return b+": "+v}function ji(o){throw new Error(o)}function qa(o){throw new TypeError(o)}var ss=m(Ke,"freeze");function Na(o){return o}function ad(o){return o[q]||x}var sc=m(Ke,"assign"),Zi=m(Ke,"keys");function Ca(o){return ss&&jr(o,function(l,v){(mr(v)||Ni(v))&&Ca(v)}),ki(o)}var ki=f(ss,Na),us=f(m(Ke,"seal"),Na),Vs=f(m(Ke,"getPrototypeOf"),ad);function ui(o){return id(o,1,0,ki)}function uc(o){return id(o,0,0,ki)}var Gs=uc({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),ka="__tsUtils$gblCfg",ni;function al(){var o;return typeof globalThis!==J&&(o=globalThis),!o&&typeof self!==J&&(o=self),!o&&typeof window!==J&&(o=window),!o&&typeof global!==J&&(o=global),o}function zs(){if(!ni){var o=Ze(al).v||{};ni=o[ka]=o[ka]||{}}return ni}var ci=ca;function ca(o,l,v){var b=l?l[o]:x;return function(I){var R=(I?I[o]:x)||b;if(R||v){var L=arguments;return(R||v).apply(I,R?Or[Ue](L,1):L)}qa('"'+Cn(o)+'" not defined for '+Qt(I))}}function vr(o){return function(l){return l[o]}}var kn=m($r,"max"),Da=ci("slice",wr),Qr=ci("substring",wr),_i=ca("substr",wr,Ha);function Ha(o,l,v){return ut(o)&&qa("Invalid "+Qt(o)),v<0?P:(l=l||0,l<0&&(l=kn(l+o[ue],0)),lt(v)?Da(o,l):Da(o,l,l+v))}function en(o,l){return Qr(o,0,l)}var la="_urid",Tu;function fa(){if(!Tu){var o=zs();Tu=o.gblSym=o.gblSym||{k:{},s:{}}}return Tu}var wn;function li(o){var l={description:Cn(o),toString:function(){return ve+"("+o+")"}};return l[ye]=!0,l}function cc(o){var l=fa();if(!Ia(l.k,o)){var v=li(o),b=Zi(l.s).length;v[la]=function(){return b+"_"+v[$e]()},l.k[o]=v,l.s[v[la]()]=Cn(o)}return l.k[o]}function Ra(o){!wn&&(wn={});var l,v=Gs[o];return v&&(l=wn[v]=wn[v]||li(ve+"."+v)),l}var Ar;function Di(){Ar=zs()}function od(o){var l={};return!Ar&&Di(),l.b=Ar.lzy,cn(l,"v",{configurable:!0,get:function(){var v=o();return Ar.lzy||cn(l,"v",{value:v}),l.b=Ar.lzy,v}}),l}function Bi(o){return cn({toJSON:function(){return o}},"v",{value:o})}var cs="window",ol;function ls(o,l){var v;return function(){return!Ar&&Di(),(!v||Ar.lzy)&&(v=Bi(Ze(o,l).v)),v.v}}function sd(o){return!Ar&&Di(),(!ol||o===!1||Ar.lzy)&&(ol=Bi(Ze(al).v||x)),ol.v}function vn(o,l){var v;if(!ol||l===!1?v=sd(l):v=ol.v,v&&v[o])return v[o];if(o===cs)try{return window}catch{}return x}function of(){return!!da()}var da=ls(vn,["document"]);function mp(){return!!fi()}var fi=ls(vn,[cs]);function Nh(){return!!Oa()}var Oa=ls(vn,["navigator"]);function sf(){return!!fo()}var fo=ls(vn,["history"]),ud=ls(function(){return!!Ze(function(){return process&&(process.versions||{}).node}).v}),Ir,fs;function cd(){return Ir=Bi(Ze(vn,[ve]).v),Ir}function Xi(o){var l=(Ar.lzy?0:Ir)||cd();return l.v?l.v[o]:y}function sl(){return!!jt()}function jt(){return!Ar&&Di(),((Ar.lzy?0:Ir)||cd()).v}function Aa(o,l){var v=Gs[o];!Ar&&Di();var b=(Ar.lzy?0:Ir)||cd();return b.v?b.v[v||o]:l?y:Ra(o)}function lc(o,l){!Ar&&Di();var v=(Ar.lzy?0:Ir)||cd();return v.v?v.v(o):l?x:li(o)}function uf(o){return!Ar&&Di(),fs=(Ar.lzy?0:fs)||Bi(Ze(Xi,["for"]).v),(fs.v||cc)(o)}function xm(o){return!!o&&fr(o.next)}function Va(o){return!Su(o)&&fr(o[Aa(3)])}var cf;function vp(o,l,v){if(o&&(xm(o)||(!cf&&(cf=Bi(Aa(3))),o=o[cf.v]?o[cf.v]():x),xm(o))){var b=y,I=y;try{for(var R=0;!(I=o.next()).done&&l[Ue](v||o,I.value,R,o)!==-1;)R++}catch(L){b={e:L},o.throw&&(I=x,o.throw(b))}finally{try{I&&!I.done&&o.return&&o.return(I)}finally{if(b)throw b.e}}}}function xu(o,l,v){return o.apply(l,v)}function Ga(o,l){return!lt(l)&&o&&(mr(l)?xu(o.push,o,l):xm(l)||Va(l)?vp(l,function(v){o.push(v)}):o.push(l)),o}function _t(o,l,v){if(o)for(var b=o[ue]>>>0,I=0;I<b&&!(I in o&&l[Ue](v||o,o[I],I,o)===-1);I++);}var Ri=ci("indexOf",dt),Iu=ci("map",dt);function Ws(o,l,v){return((o?o.slice:x)||Or).apply(o,Or[Ue](arguments,1))}function gp(o,l,v){return Ri(o,l,v)!==-1}var _p=ca("includes",dt,gp),Dn=ci("reduce",dt),Pa=f(m(Ke,"create"),yp);function yp(o){if(!o)return{};var l=typeof o;l!==G&&l!==V&&qa("Prototype must be an Object or function: "+Qt(o));function v(){}return v[Y]=o,new v}var za;function pa(o,l){var v=Ke.setPrototypeOf||function(b,I){var R;!za&&(za=Bi((R={},R[q]=[],R instanceof Array))),za.v?b[q]=I:jr(I,function(L,O){return b[L]=O})};return v(o,l)}function bv(o,l,v){Ze(ri,[l,_e,{v:o,c:!0,e:!1}]),l=pa(l,v);function b(){this[ee]=l,Ze(ri,[this,_e,{v:o,c:!0,e:!1}])}return l[Y]=v===x?Pa(v):(b[Y]=v[Y],new b),l}function Im(o,l){l&&(o[_e]=l)}function Ch(o,l,v){var b=v||Error,I=b[Y][_e],R=Error.captureStackTrace;return bv(o,function(){var L=this,O=arguments;try{Ze(Im,[b,o]);var F=xu(b,L,Or[Ue](O))||L;if(F!==L){var B=Vs(L);B!==Vs(F)&&pa(F,B)}return R&&R(F,L[ee]),l&&l(F,O),F}finally{Ze(Im,[b,I])}},b)}function Nu(){return(Date.now||kh)()}function kh(){return new Date().getTime()}function dg(o){return function(v){return ut(v)&&qa("strTrim called ["+Qt(v)+"]"),v&&v.replace&&(v=v.replace(o,P)),v}}var wp=dg(/^\s+|(?=\s)\s+$/g),Qi=ca("trim",wr,wp),lf,ff,po;function Ma(o){if(!o||typeof o!==G)return!1;po||(po=mp()?fi():!0);var l=!1;if(o!==po){ff||(lf=Function[Y][$e],ff=lf[Ue](Ke));try{var v=Vs(o);l=!v,l||(Xr(v,ee)&&(v=v[ee]),l=!!(v&&typeof v===V&&lf[Ue](v)===ff))}catch{}}return l}function Cu(o){return o.value&&Oh(o),!0}var Dh=[ld,Oh,Rh,Sp];function Wa(o,l,v,b){var I;return _t(o,function(R){if(R.k===l)return I=R,-1}),I||(I={k:l,v:l},o.push(I),b(I)),I.v}function bp(o,l,v,b){var I=v.handler,R=v.path?b?v.path.concat(b):v.path:[],L={handler:v.handler,src:v.src,path:R},O=typeof l,F=!1,B=l===x;B||(l&&O===G?F=Ma(l):B=Ya(O));var K={type:O,isPrim:B,isPlain:F,value:l,result:l,path:R,origin:v.src,copy:function(re,Q){return bp(o,re,Q?L:v,Q)},copyTo:function(re,Q){return ku(o,re,Q,L)}};return K.isPrim?I&&I[Ue](v,K)?K.result:l:Wa(o,l,R,function(re){ri(K,"result",{g:function(){return re.v},s:function(ie){re.v=ie}});for(var Q=0,ae=I;!(ae||(Q<Dh.length?Dh[Q++]:Cu))[Ue](v,K);)ae=x})}function ku(o,l,v,b){if(!ut(v))for(var I in v)l[I]=bp(o,v[I],b,I);return l}function ul(o,l,v){var b={handler:v,src:l,path:[]};return ku([],o,l,b)}function df(o,l){var v={handler:l,src:o};return bp([],o,v)}function ld(o){var l=o.value;if(mr(l)){var v=o.result=[];return v.length=l.length,o.copyTo(v,l),!0}return!1}function Sp(o){var l=o.value;return Ci(l)?(o.result=new Date(l.getTime()),!0):!1}function Rh(o){return o.type===V}function Oh(o){var l=o.value;if(l&&o.isPlain){var v=o.result={};return o.copyTo(v,l),!0}return!1}function Du(o,l){return _t(l,function(v){ul(o,v)}),o}function Ep(o,l,v,b,I,R,L){return Du(df(o)||{},Or[Ue](arguments))}var Js=vr(ue),fc;function Ja(){return!Ar&&Di(),(!fc||Ar.lzy)&&(fc=Bi(Ze(vn,["performance"]).v)),fc.v}function pf(){var o=Ja();return o&&o.now?o.now():Nu()}var fd=ca("endsWith",wr,cl);function cl(o,l,v){Xt(o)||qa("'"+Qt(o)+"' is not a string");var b=Xt(l)?l:Cn(l),I=!lt(v)&&v<o[ue]?v:o[ue];return Qr(o,I-b[ue],I)===b}var ho=ci("indexOf",wr),Nm=ca("startsWith",wr,ds);function ds(o,l,v){Xt(o)||qa("'"+Qt(o)+"' is not a string");var b=Xt(l)?l:Cn(l),I=v>0?v:0;return Qr(o,I,I+b[ue])===b}var Oo="ref",mo="unref",Ru="hasRef",dd="enabled";function ll(o,l,v){var b=!0,I=o?l(x):x,R;function L(){return b=!1,I&&I[mo]&&I[mo](),R}function O(){I&&v(I),I=x}function F(){return I=l(I),b||L(),R}function B(K){!K&&I&&O(),K&&!I&&F()}return R={cancel:O,refresh:F},R[Ru]=function(){return I&&I[Ru]?I[Ru]():b},R[Oo]=function(){return b=!0,I&&I[Oo]&&I[Oo](),R},R[mo]=L,R=cn(R,dd,{get:function(){return!!I},set:B}),{h:R,dn:function(){I=x}}}function fl(o,l,v){var b=mr(l),I=b?l.length:0,R=(I>0?l[0]:b?y:l)||setTimeout,L=(I>1?l[1]:y)||clearTimeout,O=v[0];v[0]=function(){F.dn(),xu(O,y,Or[Ue](arguments))};var F=ll(o,function(B){if(B){if(B.refresh)return B.refresh(),B;xu(L,y,[B])}return xu(R,y,v)},function(B){xu(L,y,[B])});return F.h}function dc(o,l){return fl(!0,y,Or[Ue](arguments))}function pd(o,l){return fl(!1,y,Or[Ue](arguments))}(sd()||{}).Symbol,(sd()||{}).Reflect;var hf="hasOwnProperty",hd=function(o,l){return hd=a.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,b){v.__proto__=b}||function(v,b){for(var I in b)b[hf](I)&&(v[I]=b[I])},hd(o,l)};function pc(o,l){typeof l!==e&&l!==null&&qa("Class extends value "+String(l)+" is not a constructor or null"),hd(o,l);function v(){this.constructor=o}o[i]=l===null?Pa(l):(v[i]=l[i],new v)}function vo(o,l){for(var v=0,b=l.length,I=o.length;v<b;v++,I++)o[I]=l[v];return o}var dl,Ao="constructor",La="prototype",ps="function",ln="_dynInstFuncs",Ks="_isDynProxy",go="_dynClass",pl="_dynCls$",hl="_dynInstChk",hs=hl,mf="_dfOpts",ms="_unknown_",Ou="__proto__",ha="_dyn"+Ou,Tp="__dynProto$Gbl",hc="_dynInstProto",ea="useBaseInst",md="setInstFuncs",xp=Object,vf=xp.getPrototypeOf,gf=xp.getOwnPropertyNames,Ip=sd(),Cm=Ip[Tp]||(Ip[Tp]={o:(dl={},dl[md]=!0,dl[ea]=!0,dl),n:1e3});function mc(o){return o&&(o===xp[La]||o===Array[La])}function Po(o){return mc(o)||o===Function[La]}function _o(o){var l;if(o){if(vf)return vf(o);var v=o[Ou]||o[La]||(o[Ao]?o[Ao][La]:null);l=o[ha]||v,Xr(o,ha)||(delete o[hc],l=o[ha]=o[hc]||o[ha],o[hc]=v)}return l}function Rn(o,l){var v=[];if(gf)v=gf(o);else for(var b in o)typeof b=="string"&&Xr(o,b)&&v.push(b);if(v&&v.length>0)for(var I=0;I<v.length;I++)l(v[I])}function _f(o,l,v){return l!==Ao&&typeof o[l]===ps&&(v||Xr(o,l))&&l!==Ou&&l!==La}function vc(o){qa("DynamicProto: "+o)}function gc(o){var l=Pa(null);return Rn(o,function(v){!l[v]&&_f(o,v,!1)&&(l[v]=o[v])}),l}function Np(o,l){for(var v=o.length-1;v>=0;v--)if(o[v]===l)return!0;return!1}function Ka(o,l,v,b){function I(F,B,K){var re=B[K];if(re[Ks]&&b){var Q=F[ln]||{};Q[hs]!==!1&&(re=(Q[B[go]]||{})[K]||re)}return function(){return re.apply(F,arguments)}}var R=Pa(null);Rn(v,function(F){R[F]=I(l,v,F)});for(var L=_o(o),O=[];L&&!Po(L)&&!Np(O,L);)Rn(L,function(F){!R[F]&&_f(L,F,!vf)&&(R[F]=I(l,L,F))}),O.push(L),L=_o(L);return R}function Au(o,l,v,b){var I=null;if(o&&Xr(v,go)){var R=o[ln]||Pa(null);if(I=(R[v[go]]||Pa(null))[l],I||vc("Missing ["+l+"] "+ps),!I[hl]&&R[hs]!==!1){for(var L=!Xr(o,l),O=_o(o),F=[];L&&O&&!Po(O)&&!Np(F,O);){var B=O[l];if(B){L=B===b;break}F.push(O),O=_o(O)}try{L&&(o[l]=I),I[hl]=1}catch{R[hs]=!1}}}return I}function Zs(o,l,v){var b=l[o];return b===v&&(b=_o(l)[o]),typeof b!==ps&&vc("["+o+"] is not a "+ps),b}function dr(o,l,v,b,I){function R(F,B){var K=function(){var re=Au(this,B,F,K)||Zs(B,F,K);return re.apply(this,arguments)};return K[Ks]=1,K}if(!mc(o)){var L=v[ln]=v[ln]||Pa(null);if(!mc(L)){var O=L[l]=L[l]||Pa(null);L[hs]!==!1&&(L[hs]=!!I),mc(O)||Rn(v,function(F){_f(v,F,!1)&&v[F]!==b[F]&&(O[F]=v[F],delete v[F],(!Xr(o,F)||o[F]&&!o[F][Ks])&&(o[F]=R(o,F)))})}}}function Mo(o,l){if(vf){for(var v=[],b=_o(l);b&&!Po(b)&&!Np(v,b);){if(b===o)return!0;v.push(b),b=_o(b)}return!1}return!0}function vs(o,l){return Xr(o,La)?o.name||l||ms:((o||{})[Ao]||{}).name||l||ms}function Za(o,l,v,b){Xr(o,La)||vc("theClass is an invalid class definition.");var I=o[La];Mo(I,l)||vc("["+vs(o)+"] not in hierarchy of ["+vs(l)+"]");var R=null;Xr(I,go)?R=I[go]:(R=pl+vs(o,"_")+"$"+Cm.n,Cm.n++,I[go]=R);var L=Za[mf],O=!!L[ea];O&&b&&b[ea]!==void 0&&(O=!!b[ea]);var F=gc(l),B=Ka(I,l,F,O);v(l,B);var K=!!vf&&!!L[md];K&&b&&(K=!!b[md]),dr(I,R,l,F,K!==!1)}Za[mf]=Cm.o;var vd=100,Xa=ui,Pu=Xa({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),bn=Xa({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),ma="toLowerCase",Jr="blkVal",yt="length",_c="rdOnly",Lo="notify",Xs="warnToConsole",yo="throwInternal",Mu="setDf",Qa="watch",tn="logger",Fo="apply",Kr="push",Uo="splice",gd="hdlr",jo="cancel",Zn="initialize",wo="identifier",gs="removeNotificationListener",$i="addNotificationListener",ta="isInitialized",ml="instrumentationKey",yc="INACTIVE",_d="value",Qs="getNotifyMgr",Bo="getPlugin",$o="name",wc="iKey",Yo="time",ii="processNext",yd="getProcessTelContext",bc="pollInternalLogs",eu="enabled",Fa="stopPollingInternalLogs",_s="unload",tu="onComplete",eo="version",vl="loggingLevelConsole",Lu="createNew",Oi="teardown",Fu="messageId",ru="message",to="isAsync",Sc="diagLog",Sn="_doTeardown",yi="update",ro="getNext",Ec="setNextPlugin",ys="protocol",Cp="userAgent",Ua="split",gl="nodeType",Yi="replace",wd="logInternalMessage",va="type",ws="handler",bs="status",kp="getResponseHeader",yf="getAllResponseHeaders",bd="isChildEvt",wf="data",qo="getCtx",ga="setCtx",_l="complete",km="itemsReceived",Tc="urlString",xc="sendPOST",Ss="headers",bf="timeout",Sv="setRequestHeader",Dp="traceId",Sf="spanId",Ic="traceFlags",Ah;function Dm(o,l){Ah||(Ah=Ch("AggregationError",function(b,I){I[yt]>1&&(b.errors=I[1])}));var v=o||"One or more errors occurred.";throw _t(l,function(b,I){v+=`
`.concat(I," > ").concat(Qt(b))}),new Ah(v,l||[])}var Nc="Promise",Rm="rejected";function Ef(o,l){return Rp(o,function(v){return l?l({status:"fulfilled",rejected:!1,value:v}):v},function(v){return l?l({status:Rm,rejected:!0,reason:v}):v})}function Rp(o,l,v,b){var I=o;try{if(Ur(o))(l||v)&&(I=o.then(l,v));else try{l&&(I=l(o))}catch(R){if(v)I=v(R);else throw R}}finally{b&&bo(I,b)}return I}function bo(o,l){var v=o;return l&&(Ur(o)?o.finally?v=o.finally(l):v=o.then(function(b){return l(),b},function(b){throw l(),b}):l()),v}var Ph=["pending","resolving","resolved",Rm],Ev="dispatchEvent",Sd;function Mh(o){var l;return o&&o.createEvent&&(l=o.createEvent("Event")),!!l&&l.initEvent}function Op(o,l,v,b){var I=da();!Sd&&(Sd=Bi(!!Ze(Mh,[I]).v));var R=Sd.v?I.createEvent("Event"):b?new Event(l):{};if(v&&v(R),Sd.v&&R.initEvent(l,!1,!0),R&&o[Ev])o[Ev](R);else{var L=o["on"+l];if(L)L(R);else{var O=vn("console");O&&(O.error||O.log)(l,Qt(R))}}}var yl="unhandledRejection",Ed=yl.toLowerCase(),Cc=10,nu;function wl(o){return fr(o)?o.toString():Qt(o)}function Om(o,l,v){var b=Ws(arguments,3),I=0,R=!1,L,O=[],F=!1,B=null,K;function re(ot,Vt){try{F=!0,B&&B.cancel(),B=null;var Nr=o(function(Ei,Tr){O.push(function(){try{var Gi=I===2?ot:Vt,es=lt(Gi)?L:fr(Gi)?Gi(L):Gi;Ur(es)?es.then(Ei,Tr):Gi?Ei(es):I===3?Tr(es):Ei(es)}catch(ts){Tr(ts)}}),R&&we()},b);return Nr}finally{}}function Q(ot){return re(void 0,ot)}function ae(ot){var Vt=ot,Nr=ot;return fr(ot)&&(Vt=function(Ei){return ot&&ot(),Ei},Nr=function(Ei){throw ot&&ot(),Ei}),re(Vt,Nr)}function ie(){return Ph[I]}function we(){if(O.length>0){var ot=O.slice();O=[],F=!0,B&&B.cancel(),B=null,l(ot)}}function xe(ot,Vt){return function(Nr){if(I===Vt){if(ot===2&&Ur(Nr)){I=1,Nr.then(xe(2,1),xe(3,1));return}I=ot,R=!0,L=Nr,we(),!F&&ot===3&&!B&&(B=dc(Ye,Cc))}}}function Ye(){if(!F)if(F=!0,ud())process.emit(yl,L,K);else{var ot=fi()||sd();!nu&&(nu=Bi(Ze(vn,[Nc+"RejectionEvent"]).v)),Op(ot,Ed,function(Vt){return ri(Vt,"promise",{g:function(){return K}}),Vt.reason=L,Vt},!!nu.v)}}K={then:re,catch:Q,finally:ae},cn(K,"state",{get:ie}),sl()&&(K[Aa(11)]="IPromise");function it(){return"IPromise "+ie()+(R?" - "+wl(L):"")}return K.toString=it,function(){fr(v)||qa(Nc+": executor is not a function - "+wl(v));var Vt=xe(3,0);try{v.call(K,xe(2,0),Vt)}catch(Nr){Vt(Nr)}}(),K}function Ap(o){return function(l){var v=Ws(arguments,1);return o(function(b,I){try{var R=[],L=1;vp(l,function(O,F){O&&(L++,Rp(O,function(B){R[F]=B,--L===0&&b(R)},I))}),L--,L===0&&b(R)}catch(O){I(O)}},v)}}function bl(o){return Bi(function(l){var v=Ws(arguments,1);return o(function(b,I){var R=[],L=1;function O(F,B){L++,Ef(F,function(K){K.rejected?R[B]={status:Rm,reason:K.reason}:R[B]={status:"fulfilled",value:K.value},--L===0&&b(R)})}try{mr(l)?_t(l,O):Va(l)?vp(l,O):qa("Input is not an iterable"),L--,L===0&&b(R)}catch(F){I(F)}},v)})}function Pp(o){_t(o,function(l){try{l()}catch{}})}function iu(o){var l=Fr(o)?o:0;return function(v){dc(function(){Pp(v)},l)}}function rn(o,l){return Om(rn,iu(l),o,l)}var kc;function Ai(o,l){!kc&&(kc=Bi(Ze(vn,[Nc]).v||null));var v=kc.v;if(!v)return rn(o);fr(o)||qa(Nc+": executor is not a function - "+Qt(o));var b=0;function I(){return Ph[b]}var R=new v(function(L,O){function F(K){b=2,L(K)}function B(K){b=3,O(K)}o(F,B)});return cn(R,"state",{get:I}),R}var Mp;function Td(o){return Om(Td,Pp,o)}function Sl(o,l){return!Mp&&(Mp=bl(Td)),Mp.v(o,l)}var Dc;function _a(o,l){return!Dc&&(Dc=Bi(Ai)),Dc.v.call(this,o,l)}var xd=Ap(_a),wi=void 0,Sr="",au="channels",Pn="core",Es="createPerfMgr",Rc="disabled",Oc="extensionConfig",ou="extensions",So="processTelemetry",Tf="priority",Lh="eventsSent",xf="eventsDiscarded",Fh="eventsSendRequest",If="perfEvent",El="offlineEventsStored",Lp="offlineBatchSent",di="offlineBatchDrop",Tl="getPerfMgr",Pi="domain",Uu="path",Fp="Not dynamic - ",Id=/-([a-z])/g,Mi=/([^\w\d_$])/g,Nd=/^(\d+[\w\d_$])/;function Up(o){return!ut(o)}function su(o){var l=o;return l&&Xt(l)&&(l=l[Yi](Id,function(v,b){return b.toUpperCase()}),l=l[Yi](Mi,"_"),l=l[Yi](Nd,function(v,b){return"_"+b})),l}function wt(o,l){return o&&l?ho(o,l)!==-1:!1}function Ts(o){return o&&o.toISOString()||""}function xs(o){return Ot(o)?o[$o]:Sr}function no(o,l,v,b,I){var R=v;return o&&(R=o[l],R!==v&&(!I||I(R))&&(!b||b(v))&&(R=v,o[l]=R)),R}function Nf(o,l,v){var b;return o?(b=o[l],!b&&ut(b)&&(b=lt(v)?{}:v,o[l]=b)):b=lt(v)?{}:v,b}function xl(o,l){var v=null,b=null;return fr(o)?v=o:b=o,function(){var I=arguments;if(v&&(b=v()),b)return b[l][Fo](b,I)}}function Is(o,l,v){if(o&&l&&Ni(o)&&Ni(l)){var b=function(R){if(Xt(R)){var L=l[R];fr(L)?(!v||v(R,!0,l,o))&&(o[R]=xl(l,R)):(!v||v(R,!1,l,o))&&(Ia(o,R)&&delete o[R],ri(o,R,{g:function(){return l[R]},s:function(O){l[R]=O}}))}};for(var I in l)b(I)}return o}function Eo(o,l,v,b,I){o&&l&&v&&(I!==!1||lt(o[l]))&&(o[l]=xl(v,b))}function Il(o,l,v,b){return o&&l&&Ni(o)&&mr(v)&&_t(v,function(I){Xt(I)&&Eo(o,I,l,I,b)}),o}function Cd(o){return o&&sc&&(o=a(sc({},o))),o}function uu(o){try{return o.responseText}catch{}return null}function Cf(o,l){return o?"XDomainRequest,Response:"+uu(o)||"":l}function Nl(o,l){return o?"XMLHttpRequest,Status:"+o[bs]+",Response:"+uu(o)||o.response||"":l}function kf(o,l){return l&&(Fr(l)?o=[l].concat(o):mr(l)&&(o=l.concat(o))),o}var jp="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Bp="withCredentials",Uh="timeout";function $p(o,l,v,b,I,R){b===void 0&&(b=!1),I===void 0&&(I=!1);function L(F,B,K){try{F[B]=K}catch{}}var O=new XMLHttpRequest;return b&&L(O,jp,b),v&&L(O,Bp,v),O.open(o,l,!I),v&&L(O,Bp,v),!I&&R&&L(O,Uh,R),O}function ju(o){var l={};if(Xt(o)){var v=Qi(o)[Ua](/[\r\n]+/);_t(v,function(b){if(b){var I=b.indexOf(": ");if(I!==-1){var R=Qi(b.substring(0,I))[ma](),L=Qi(b.substring(I+1));l[R]=L}else l[Qi(b)]=1}})}return l}function Ac(o,l,v){if(!o[v]&&l&&l[kp]){var b=l[kp](v);b&&(o[v]=Qi(b))}return o}var Df="kill-duration",Ho="kill-duration-seconds",Ns="time-delta-millis";function Vo(o,l){var v={};return o[yf]?v=ju(o[yf]()):l&&(v=Ac(v,o,Ns),v=Ac(v,o,Df),v=Ac(v,o,Ho)),v}var Go="documentMode",Pc="location",Yp="console",Mc="JSON",qp="crypto",Hp="msCrypto",kd="ReactNative",Cs="msie",zo="trident/",Wo="XMLHttpRequest",Dd=null,Rf=null,Cl=!1,qi=null,ks=null;function Rd(o,l){var v=!1;if(o){try{if(v=l in o,!v){var b=o[i];b&&(v=l in b)}}catch{}if(!v)try{var I=new o;v=!lt(I[l])}catch{}}return v}function ra(o){Cl=o}function cu(o){if(o&&Cl){var l=vn("__mockLocation");if(l)return l}return typeof location===r&&location?location:vn(Pc)}function Of(){return typeof console!==n?console:vn(Yp)}function Ds(){return!!(typeof JSON===r&&JSON||vn(Mc)!==null)}function Li(){return Ds()?JSON||vn(Mc):null}function Bu(){return vn(qp)}function Od(){return vn(Hp)}function kl(){var o=Oa();return o&&o.product?o.product===kd:!1}function $u(){var o=Oa();if(o&&(o[Cp]!==Rf||Dd===null)){Rf=o[Cp];var l=(Rf||Sr)[ma]();Dd=wt(l,Cs)||wt(l,zo)}return Dd}function Am(o){if(o===void 0&&(o=null),!o){var l=Oa()||{};o=l?(l.userAgent||Sr)[ma]():Sr}var v=(o||Sr)[ma]();if(wt(v,Cs)){var b=da()||{};return Math.max(parseInt(v[Ua](Cs)[1]),b[Go]||0)}else if(wt(v,zo)){var I=parseInt(v[Ua](zo)[1]);if(I)return I+4}return null}function jh(o){return(ks===null||o===!1)&&(ks=Nh()&&!!Oa().sendBeacon),ks}function Pm(o){var l=!1;try{l=!!vn("fetch");var v=vn("Request");l&&o&&v&&(l=Rd(v,"keepalive"))}catch{}return l}function Dl(){return qi===null&&(qi=typeof XDomainRequest!==n,qi&&Af()&&(qi=qi&&!Rd(vn(Wo),"withCredentials"))),qi}function Af(){var o=!1;try{var l=vn(Wo);o=!!l}catch{}return o}function Bh(o,l){if(o)for(var v=0;v<o[yt];v++){var b=o[v];if(b[$o]&&b[$o]===l)return b}return{}}function Tv(o){var l=da();return l&&o?Bh(l.querySelectorAll("meta"),o).content:null}function Ad(o){var l,v=Ja();if(v){var b=v.getEntriesByType("navigation")||[];l=Bh((b[yt]>0?b[0]:{}).serverTiming,o).description}return l}var Vp=4294967296,Rl=4294967295,Yu=123456789,Gp=987654321,Rs=!1,Pd=Yu,Pf=Gp;function Os(o){o<0&&(o>>>=0),Pd=Yu+o&Rl,Pf=Gp-o&Rl,Rs=!0}function Lc(){try{var o=Nu()&2147483647;Os((Math.random()*Vp^o)+o)}catch{}}function Mm(o){return o>0?Math.floor(Ol()/Rl*(o+1))>>>0:0}function Ol(o){var l=0,v=Bu()||Od();return v&&v.getRandomValues&&(l=v.getRandomValues(new Uint32Array(1))[0]&Rl),l===0&&$u()&&(Rs||Lc(),l=xv()&Rl),l===0&&(l=Math.floor(Vp*Math.random()|0)),o||(l>>>=0),l}function xv(o){Pf=36969*(Pf&65535)+(Pf>>16)&Rl,Pd=18e3*(Pd&65535)+(Pd>>16)&Rl;var l=(Pf<<16)+(Pd&65535)>>>0&Rl|0;return o||(l>>>=0),l}function Lm(o){o===void 0&&(o=22);for(var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=Ol()>>>0,b=0,I=Sr;I[yt]<o;)b++,I+=l.charAt(v&63),v>>>=6,b===5&&(v=(Ol()<<2&4294967295|v&3)>>>0,b=0);return I}var Mf="3.3.5",$h="."+Lm(6),Fm=0;function qu(o){return o[gl]===1||o[gl]===9||!+o[gl]}function To(o,l){var v=l[o.id];if(!v){v={};try{qu(l)&&ri(l,o.id,{e:!1,v})}catch{}}return v}function lu(o,l){return l===void 0&&(l=!1),su(o+Fm+++(l?"."+Mf:Sr)+$h)}function Hu(o){var l={id:lu("_aiData-"+(o||Sr)+"."+Mf),accept:function(v){return qu(v)},get:function(v,b,I,R){var L=v[l.id];return L?L[su(b)]:(R&&(L=To(l,v),L[su(b)]=I),I)},kill:function(v,b){if(v&&v[b])try{delete v[b]}catch{}}};return l}function Al(o){return o&&Ni(o)&&(o.isVal||o.fb||Ia(o,"v")||Ia(o,"mrg")||Ia(o,"ref")||o.set)}function Pl(o,l,v){var b,I=v.dfVal||er;if(l&&v.fb){var R=v.fb;mr(R)||(R=[R]);for(var L=0;L<R[yt];L++){var O=R[L],F=l[O];if(I(F)?b=F:o&&(F=o.cfg[O],I(F)&&(b=F),o.set(o.cfg,Cn(O),F)),I(b))break}}return!I(b)&&I(v.v)&&(b=v.v),b}function Md(o,l,v){var b=v;if(v&&Al(v)&&(b=Pl(o,l,v)),b){Al(b)&&(b=Md(o,l,b));var I;mr(b)?(I=[],I[yt]=b[yt]):Ma(b)&&(I={}),I&&(jr(b,function(R,L){L&&Al(L)&&(L=Md(o,l,L)),I[R]=L}),b=I)}return b}function Lf(o,l,v,b){var I,R,L,O=b,F,B,K,re;Al(O)?(I=O.isVal,R=O.set,K=O[_c],re=O[Jr],F=O.mrg,B=O.ref,!B&&lt(B)&&(B=!!F),L=Pl(o,l,O)):L=b,re&&o[Jr](l,v);var Q,ae=!0,ie=l[v];(ie||!ut(ie))&&(Q=ie,ae=!1,I&&Q!==L&&!I(Q)&&(Q=L,ae=!0),R&&(Q=R(Q,L,l),ae=Q===L)),ae?L?Q=Md(o,l,L):Q=L:(Ma(Q)||mr(L))&&F&&L&&(Ma(L)||mr(L))&&jr(L,function(we,xe){Lf(o,Q,we,xe)}),o.set(l,v,Q),B&&o.ref(l,v),K&&o[_c](l,v)}var Jo=uf("[[ai_dynCfg_1]]"),Fc=uf("[[ai_blkDynCfg_1]]"),Um=uf("[[ai_frcDynCfg_1]]");function jm(o){if(o){var l;if(mr(o)?(l=[],l[yt]=o[yt]):Ma(o)&&(l={}),l)return jr(o,function(v,b){l[v]=jm(b)}),l}return o}function zp(o){if(o){var l=o[Jo]||o;if(l.cfg&&(l.cfg===o||l.cfg[Jo]===l))return l}return null}function Wp(o){if(o&&(Ma(o)||mr(o)))try{o[Fc]=!0}catch{}return o}function Ko(o){if(o)try{o[Um]=!0}catch{}return o}function Vu(o,l,v){var b=!1;return v&&!o[l.blkVal]&&(b=v[Um],!b&&!v[Fc]&&(b=Ma(v)||mr(v))),b}function Ml(o){qa("InvalidAccess:"+o)}var Bm=["push","pop","shift","unshift","splice"],Jp=function(o,l,v,b){o&&o[yo](3,108,"".concat(v," [").concat(l,"] failed - ")+Qt(b))};function $m(o,l,v){mr(l)&&_t(Bm,function(b){var I=l[b];l[b]=function(){for(var R=[],L=0;L<arguments.length;L++)R[L]=arguments[L];var O=I[Fo](this,R);return Ld(o,l,v,"Patching"),O}})}function Yh(o,l){var v=Gr(o,l);return v&&v.get}function Kp(o,l,v,b){var I={n:v,h:[],trk:function(B){B&&B.fn&&(Ri(I.h,B)===-1&&I.h[Kr](B),o.trk(B,I))},clr:function(B){var K=Ri(I.h,B);K!==-1&&I.h[Uo](K,1)}},R=!0,L=!1;function O(){R&&(L=L||Vu(O,o,b),b&&!b[Jo]&&L&&(b=Ld(o,b,v,"Converting")),R=!1);var B=o.act;return B&&I.trk(B),b}O[o.prop]={chng:function(){o.add(I)}};function F(B){if(b!==B){O[o.ro]&&!o.upd&&Ml("["+v+"] is read-only:"+Qt(l)),R&&(L=L||Vu(O,o,b),R=!1);var K=L&&O[o.rf];if(L)if(K){jr(b,function(Q){b[Q]=B?B[Q]:wi});try{jr(B,function(Q,ae){Uc(o,b,Q,ae)}),B=b}catch(Q){Jp((o.hdlr||{})[tn],v,"Assigning",Q),L=!1}}else b&&b[Jo]&&jr(b,function(Q){var ae=Yh(b,Q);if(ae){var ie=ae[o.prop];ie&&ie.chng()}});if(B!==b){var re=B&&Vu(O,o,B);!K&&re&&(B=Ld(o,B,v,"Converting")),b=B,L=re}o.add(I)}}ri(l,I.n,{g:O,s:F})}function Uc(o,l,v,b){if(l){var I=Yh(l,v),R=I&&!!I[o.prop];R?l[v]=b:Kp(o,l,v,b)}return l}function xo(o,l,v,b){if(l){var I=Yh(l,v),R=I&&!!I[o.prop],L=b&&b[0],O=b&&b[1],F=b&&b[2];if(!R){if(F)try{Wp(l)}catch(B){Jp((o.hdlr||{})[tn],v,"Blocking",B)}try{Uc(o,l,v,l[v]),I=Yh(l,v)}catch(B){Jp((o.hdlr||{})[tn],v,"State",B)}}L&&(I[o.rf]=L),O&&(I[o.ro]=O),F&&(I[o.blkVal]=!0)}return l}function Ld(o,l,v,b){try{jr(l,function(I,R){Uc(o,l,I,R)}),l[Jo]||(cn(l,Jo,{get:function(){return o[gd]}}),$m(o,l,v))}catch(I){Jp((o.hdlr||{})[tn],v,b,I)}return l}var Ll="[[ai_",Zo="]]";function pg(o){var l,v=lc(Ll+"get"+o.uid+Zo),b=lc(Ll+"ro"+o.uid+Zo),I=lc(Ll+"rf"+o.uid+Zo),R=lc(Ll+"blkVal"+o.uid+Zo),L=lc(Ll+"dtl"+o.uid+Zo),O=null,F=null,B;function K(ie,we){var xe=B.act;try{B.act=ie,ie&&ie[L]&&(_t(ie[L],function(it){it.clr(ie)}),ie[L]=[]),we({cfg:o.cfg,set:o.set.bind(o),setDf:o[Mu].bind(o),ref:o.ref.bind(o),rdOnly:o[_c].bind(o)})}catch(it){var Ye=o[tn];throw Ye&&Ye[yo](1,107,Qt(it)),it}finally{B.act=xe||null}}function re(){if(O){var ie=O;O=null,F&&F[jo](),F=null;var we=[];if(_t(ie,function(xe){if(xe&&(xe[L]&&(_t(xe[L],function(Ye){Ye.clr(xe)}),xe[L]=null),xe.fn))try{K(xe,xe.fn)}catch(Ye){we[Kr](Ye)}}),O)try{re()}catch(xe){we[Kr](xe)}we[yt]>0&&Dm("Watcher error(s): ",we)}}function Q(ie){if(ie&&ie.h[yt]>0){O||(O=[]),F||(F=dc(function(){F=null,re()},0));for(var we=0;we<ie.h[yt];we++){var xe=ie.h[we];xe&&Ri(O,xe)===-1&&O[Kr](xe)}}}function ae(ie,we){if(ie){var xe=ie[L]=ie[L]||[];Ri(xe,we)===-1&&xe[Kr](we)}}return B=(l={prop:v,ro:b,rf:I},l[Jr]=R,l[gd]=o,l.add=Q,l[Lo]=re,l.use=K,l.trk=ae,l),B}function Zp(o,l){var v={fn:l,rm:function(){v.fn=null,o=null,l=null}};return ri(v,"toJSON",{v:function(){return"WatcherHandler"+(v.fn?"":"[X]")}}),o.use(v,l),v}function Iv(o,l,v){var b,I=zp(l);if(I)return I;var R=lu("dyncfg",!0),L=l&&v!==!1?l:jm(l),O;function F(){O[Lo]()}function B(Ye,it,ot){try{Ye=Uc(O,Ye,it,ot)}catch(Vt){Jp(o,it,"Setting value",Vt)}return Ye[it]}function K(Ye){return Zp(O,Ye)}function re(Ye,it){O.use(null,function(ot){var Vt=O.upd;try{lt(it)||(O.upd=it),Ye(ot)}finally{O.upd=Vt}})}function Q(Ye,it){var ot;return xo(O,Ye,it,(ot={},ot[0]=!0,ot))[it]}function ae(Ye,it){var ot;return xo(O,Ye,it,(ot={},ot[1]=!0,ot))[it]}function ie(Ye,it){var ot;return xo(O,Ye,it,(ot={},ot[2]=!0,ot))[it]}function we(Ye,it){return it&&jr(it,function(ot,Vt){Lf(xe,Ye,ot,Vt)}),Ye}var xe=(b={uid:null,cfg:L},b[tn]=o,b[Lo]=F,b.set=B,b[Mu]=we,b[Qa]=K,b.ref=Q,b[_c]=ae,b[Jr]=ie,b._block=re,b);return ri(xe,"uid",{c:!1,e:!1,w:!1,v:R}),O=pg(xe),Ld(O,L,"config","Creating"),xe}function hg(o,l){o?(o[Xs](l),o[yo](2,108,l)):Ml(l)}function Hi(o,l,v,b){var I=Iv(v,o||{},b);return l&&I[Mu](I.cfg,l),I}function Fd(o,l,v){var b=o[Jo]||o;return b.cfg&&(b.cfg===o||b.cfg[Jo]===b)?b[Qa](l):(hg(v,Fp+Qt(o)),Hi(o,null,v)[Qa](l))}function Ud(o,l){if(o&&o[_s])return o[_s](l)}function Ym(o,l,v){var b;return v||(b=_a(function(I){v=I})),o&&Js(o)>0?Ef(Ud(o[0],l),function(){Ym(Ws(o,1),l,v)}):v(),b}var Fl=500,ya="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function Io(o){return{mrg:!0,v:o}}var jd=[Lh,xf,Fh,If],Gu=null,jc;function As(o,l){return function(){var v=arguments,b=qm(l);if(b){var I=b.listener;I&&I[o]&&I[o][Fo](I,v)}}}function qh(){var o=vn("Microsoft");return o&&(Gu=o.ApplicationInsights),Gu}function qm(o){var l=Gu;return!l&&o.disableDbgExt!==!0&&(l=Gu||qh()),l?l.ChromeDbgExt:null}function bt(o){if(!jc){jc={};for(var l=0;l<jd[yt];l++)jc[jd[l]]=As(jd[l],o)}return jc}var zu,fu="warnToConsole",Ff="AI (Internal): ",Hm="AI: ",Bc="AITR_",Bd={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Ps=(zu={},zu[0]=null,zu[1]="errorToConsole",zu[2]=fu,zu[3]="debugToConsole",zu);function Vm(o){return o?'"'+o[Yi](/\"/g,Sr)+'"':Sr}function Xp(o,l){var v=Of();if(v){var b="log";v[o]&&(b=o),fr(v[b])&&v[b](l)}}var Ul=function(){function o(l,v,b,I){b===void 0&&(b=!1);var R=this;R[Fu]=l,R[ru]=(b?Hm:Ff)+l;var L=Sr;Ds()&&(L=Li().stringify(I));var O=(v?" message:"+Vm(v):Sr)+(I?" props:"+Vm(L):Sr);R[ru]+=O}return o.dataType="MessageData",o}();function $c(o,l){return(o||{})[tn]||new Yc(l)}var Yc=function(){function o(l){this.identifier="DiagnosticLogger",this.queue=[];var v=0,b={},I,R,L,O,F;Za(o,this,function(B){F=re(l||{}),B.consoleLoggingLevel=function(){return I},B[yo]=function(ie,we,xe,Ye,it){it===void 0&&(it=!1);var ot=new Ul(we,xe,it,Ye);if(O)throw Qt(ot);var Vt=Ps[ie]||fu;if(lt(ot[ru]))ae("throw"+(ie===1?"Critical":"Warning"),ot);else{if(it){var Nr=+ot[Fu];!b[Nr]&&I>=ie&&(B[Vt](ot[ru]),b[Nr]=!0)}else I>=ie&&B[Vt](ot[ru]);K(ie,ot)}},B.debugToConsole=function(ie){Xp("debug",ie),ae("warning",ie)},B[Xs]=function(ie){Xp("warn",ie),ae("warning",ie)},B.errorToConsole=function(ie){Xp("error",ie),ae("error",ie)},B.resetInternalMessageCount=function(){v=0,b={}},B[wd]=K,B[_s]=function(ie){F&&F.rm(),F=null};function K(ie,we){if(!Q()){var xe=!0,Ye=Bc+we[Fu];if(b[Ye]?xe=!1:b[Ye]=!0,xe&&(ie<=R&&(B.queue[Kr](we),v++,ae(ie===1?"error":"warn",we)),v===L)){var it="Internal events throttle limit per PageView reached for this app.",ot=new Ul(23,it,!1);B.queue[Kr](ot),ie===1?B.errorToConsole(it):B[Xs](it)}}}function re(ie){return Fd(Hi(ie,Bd,B).cfg,function(we){var xe=we.cfg;I=xe[vl],R=xe.loggingLevelTelemetry,L=xe.maxMessageLimit,O=xe.enableDebug})}function Q(){return v>=L}function ae(ie,we){var xe=qm(l||{});xe&&xe[Sc]&&xe[Sc](ie,we)}})}return o.__ieDyn=1,o}();function Hh(o){return o||new Yc}function on(o,l,v,b,I,R){R===void 0&&(R=!1),Hh(o)[yo](l,v,b,I,R)}function Ms(o,l){Hh(o)[Xs](l)}function Vh(o,l,v){Hh(o)[wd](l,v)}var Gh,du,Qp="toGMTString",zh="toUTCString",Wh="cookie",$d="expires",Yd="isCookieUseDisabled",jl="disableCookiesUsage",qc="_ckMgr",eh=null,Bl=null,Jh=null,No,Kh={},qd={},Gm=(Gh={cookieCfg:Io((du={},du[Pi]={fb:"cookieDomain",dfVal:Up},du.path={fb:"cookiePath",dfVal:Up},du.enabled=wi,du.ignoreCookies=wi,du.blockedCookies=wi,du)),cookieDomain:wi,cookiePath:wi},Gh[jl]=wi,Gh);function Ls(){!No&&(No=od(function(){return da()}))}function Nv(o,l){var v=Fs[qc]||qd[qc];return v||(v=Fs[qc]=Fs(o,l),qd[qc]=v),v}function Wu(o){return o?o.isEnabled():!0}function Zh(o,l){return l&&o&&mr(o.ignoreCookies)?Ri(o.ignoreCookies,l)!==-1:!1}function $l(o,l){return l&&o&&mr(o.blockedCookies)&&Ri(o.blockedCookies,l)!==-1?!0:Zh(o,l)}function zm(o,l){var v=l[eu];if(ut(v)){var b=void 0;lt(o[Yd])||(b=!o[Yd]),lt(o[jl])||(b=!o[jl]),v=b}return v}function Xo(o,l){var v;if(o)v=o.getCookieMgr();else if(l){var b=l.cookieCfg;b&&b[qc]?v=b[qc]:v=Fs(l)}return v||(v=Nv(l,(o||{})[tn])),v}function Fs(o,l){var v,b,I,R,L,O,F,B,K;o=Hi(o||qd,null,l).cfg,L=Fd(o,function(Q){Q[Mu](Q.cfg,Gm),b=Q.ref(Q.cfg,"cookieCfg"),I=b[Uu]||"/",R=b[Pi],O=zm(o,b)!==!1,F=b.getCookie||pr,B=b.setCookie||io,K=b.delCookie||io},l);var re=(v={isEnabled:function(){var Q=zm(o,b)!==!1&&O&&Hn(l),ae=qd[qc];return Q&&ae&&re!==ae&&(Q=Wu(ae)),Q},setEnabled:function(Q){O=Q!==!1,b[eu]=Q},set:function(Q,ae,ie,we,xe){var Ye=!1;if(Wu(re)&&!$l(b,Q)){var it={},ot=Qi(ae||Sr),Vt=ho(ot,";");if(Vt!==-1&&(ot=Qi(en(ae,Vt)),it=Uf(Qr(ae,Vt+1))),no(it,Pi,we||R,An,lt),!ut(ie)){var Nr=$u();if(lt(it[$d])){var Ei=Nu(),Tr=Ei+ie*1e3;if(Tr>0){var Gi=new Date;Gi.setTime(Tr),no(it,$d,Yl(Gi,Nr?Qp:zh)||Yl(Gi,Nr?Qp:zh)||Sr,An)}}Nr||no(it,"max-age",Sr+ie,null,lt)}var es=cu();es&&es[ys]==="https:"&&(no(it,"secure",null,null,lt),Bl===null&&(Bl=!ao((Oa()||{})[Cp])),Bl&&no(it,"SameSite","None",null,lt)),no(it,Uu,xe||I,null,lt),B(Q,Hd(ot,it)),Ye=!0}return Ye},get:function(Q){var ae=Sr;return Wu(re)&&!Zh(b,Q)&&(ae=F(Q)),ae},del:function(Q,ae){var ie=!1;return Wu(re)&&(ie=re.purge(Q,ae)),ie},purge:function(Q,ae){var ie,we=!1;if(Hn(l)){var xe=(ie={},ie[Uu]=ae||"/",ie[$d]="Thu, 01 Jan 1970 00:00:01 GMT",ie);$u()||(xe["max-age"]="0"),K(Q,Hd(Sr,xe)),we=!0}return we}},v[_s]=function(Q){L&&L.rm(),L=null},v);return re[qc]=re,re}function Hn(o){if(eh===null){eh=!1,!No&&Ls();try{var l=No.v||{};eh=l[Wh]!==void 0}catch(v){on(o,2,68,"Cannot access document.cookie - "+xs(v),{exception:Qt(v)})}}return eh}function Uf(o){var l={};if(o&&o[yt]){var v=Qi(o)[Ua](";");_t(v,function(b){if(b=Qi(b||Sr),b){var I=ho(b,"=");I===-1?l[b]=null:l[Qi(en(b,I))]=Qi(Qr(b,I+1))}})}return l}function Yl(o,l){return fr(o[l])?o[l]():null}function Hd(o,l){var v=o||Sr;return jr(l,function(b,I){v+="; "+b+(ut(I)?Sr:"="+I)}),v}function pr(o){var l=Sr;if(!No&&Ls(),No.v){var v=No.v[Wh]||Sr;Jh!==v&&(Kh=Uf(v),Jh=v),l=Qi(Kh[o]||Sr)}return l}function io(o,l){!No&&Ls(),No.v&&(No.v[Wh]=o+"="+l)}function ao(o){return Xt(o)?!!(wt(o,"CPU iPhone OS 12")||wt(o,"iPad; CPU OS 12")||wt(o,"Macintosh; Intel Mac OS X 10_14")&&wt(o,"Version/")&&wt(o,"Safari")||wt(o,"Macintosh; Intel Mac OS X 10_14")&&fd(o,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||wt(o,"Chrome/5")||wt(o,"Chrome/6")||wt(o,"UnrealEngine")&&!wt(o,"Chrome")||wt(o,"UCBrowser/12")||wt(o,"UCBrowser/11")):!1}var Fi={perfEvtsSendAll:!1};function ql(o){o.h=null;var l=o.cb;o.cb=[],_t(l,function(v){Ze(v.fn,[v.arg])})}function En(o,l,v,b){_t(o,function(I){I&&I[l]&&(v?(v.cb[Kr]({fn:b,arg:I}),v.h=v.h||dc(ql,0,v)):Ze(b,[I]))})}var Hl=function(){function o(l){this.listeners=[];var v,b,I=[],R={h:null,cb:[]},L=Hi(l,Fi);b=L[Qa](function(O){v=!!O.cfg.perfEvtsSendAll}),Za(o,this,function(O){ri(O,"listeners",{g:function(){return I}}),O[$i]=function(F){I[Kr](F)},O[gs]=function(F){for(var B=Ri(I,F);B>-1;)I[Uo](B,1),B=Ri(I,F)},O[Lh]=function(F){En(I,Lh,R,function(B){B[Lh](F)})},O[xf]=function(F,B){En(I,xf,R,function(K){K[xf](F,B)})},O[Fh]=function(F,B){En(I,Fh,B?R:null,function(K){K[Fh](F,B)})},O[If]=function(F){F&&(v||!F[bd]())&&En(I,If,null,function(B){F[to]?dc(function(){return B[If](F)},0):B[If](F)})},O[El]=function(F){F&&F[yt]&&En(I,El,R,function(B){B[El](F)})},O[Lp]=function(F){F&&F[wf]&&En(I,Lp,R,function(B){B[Lp](F)})},O[di]=function(F,B){if(F>0){var K=B||0;En(I,di,R,function(re){re[di](F,K)})}},O[_s]=function(F){var B=function(){b&&b.rm(),b=null,I=[],R.h&&R.h[jo](),R.h=null,R.cb=[]},K;if(En(I,"unload",null,function(re){var Q=re[_s](F);Q&&(K||(K=[]),K[Kr](Q))}),K)return _a(function(re){return Ef(xd(K),function(){B(),re()})});B()}})}return o.__ieDyn=1,o}(),pu="ctx",th="ParentContextKey",hu="ChildrenContextKey",Xh=null,Ju=function(){function o(l,v,b){var I=this;if(I.start=Nu(),I[$o]=l,I[to]=b,I[bd]=function(){return!1},fr(v)){var R;ri(I,"payload",{g:function(){return!R&&fr(v)&&(R=v(),v=null),R}})}I[qo]=function(L){return L?L===o[th]||L===o[hu]?I[L]:(I[pu]||{})[L]:null},I[ga]=function(L,O){if(L)if(L===o[th])I[L]||(I[bd]=function(){return!0}),I[L]=O;else if(L===o[hu])I[L]=O;else{var F=I[pu]=I[pu]||{};F[L]=O}},I[_l]=function(){var L=0,O=I[qo](o[hu]);if(mr(O))for(var F=0;F<O[yt];F++){var B=O[F];B&&(L+=B[Yo])}I[Yo]=Nu()-I.start,I.exTime=I[Yo]-L,I[_l]=function(){}}}return o.ParentContextKey="parent",o.ChildrenContextKey="childEvts",o}(),Qh=function(){function o(l){this.ctx={},Za(o,this,function(v){v.create=function(b,I,R){return new Ju(b,I,R)},v.fire=function(b){b&&(b[_l](),l&&fr(l[If])&&l[If](b))},v[ga]=function(b,I){if(b){var R=v[pu]=v[pu]||{};R[b]=I}},v[qo]=function(b){return(v[pu]||{})[b]}})}return o.__ieDyn=1,o}(),em="CoreUtils.doPerf";function p(o,l,v,b,I){if(o){var R=o;if(R[Tl]&&(R=R[Tl]()),R){var L=void 0,O=R[qo](em);try{if(L=R.create(l(),b,I),L){if(O&&L[ga]&&(L[ga](Ju[th],O),O[qo]&&O[ga])){var F=O[qo](Ju[hu]);F||(F=[],O[ga](Ju[hu],F)),F[Kr](L)}return R[ga](em,L),v(L)}}catch(B){L&&L[ga]&&L[ga]("exception",B)}finally{L&&R.fire(L),R[ga](em,O)}}}return v()}function _(){return Xh}function S(){var o=k();return Qr(o,0,8)+"-"+Qr(o,8,12)+"-"+Qr(o,12,16)+"-"+Qr(o,16,20)+"-"+Qr(o,20)}function k(){for(var o=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],l=Sr,v,b=0;b<4;b++)v=Ol(),l+=o[v&15]+o[v>>4&15]+o[v>>8&15]+o[v>>12&15]+o[v>>16&15]+o[v>>20&15]+o[v>>24&15]+o[v>>28&15];var I=o[8+(Ol()&3)|0];return _i(l,0,8)+_i(l,9,4)+"4"+_i(l,13,3)+I+_i(l,16,3)+_i(l,19,12)}var j=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,Z="00",X="ff",oe="00000000000000000000000000000000",ge="0000000000000000",be=1;function rt(o,l,v){return o&&o[yt]===l&&o!==v?!!o.match(/^[\da-f]*$/i):!1}function Bt(o,l,v){return rt(o,l)?o:v}function ur(o){(isNaN(o)||o<0||o>255)&&(o=1);for(var l=o.toString(16);l[yt]<2;)l="0"+l;return l}function hr(o,l,v,b){var I;return I={},I[eo]=rt(b,2,X)?b:Z,I[Dp]=cr(o)?o:k(),I[Sf]=Ht(l)?l:en(k(),16),I.traceFlags=v>=0&&v<=255?v:1,I}function ht(o,l){var v;if(!o||(mr(o)&&(o=o[0]||""),!o||!Xt(o)||o[yt]>8192))return null;if(o.indexOf(",")!==-1){var b=o[Ua](",");o=b[l>0&&b[yt]>l?l:0]}var I=j.exec(Qi(o));return!I||I[1]===X||I[2]===oe||I[3]===ge?null:(v={version:(I[1]||Sr)[ma](),traceId:(I[2]||Sr)[ma](),spanId:(I[3]||Sr)[ma]()},v[Ic]=parseInt(I[4],16),v)}function cr(o){return rt(o,32,oe)}function Ht(o){return rt(o,16,ge)}function Pr(o){return!(!o||!rt(o[eo],2,X)||!rt(o[Dp],32,oe)||!rt(o[Sf],16,ge)||!rt(ur(o[Ic]),2))}function Mr(o){return Pr(o)?(o[Ic]&be)===be:!1}function Lt(o){if(o){var l=ur(o[Ic]);rt(l,2)||(l="01");var v=o[eo]||Z;return v!=="00"&&v!=="ff"&&(v=Z),"".concat(v.toLowerCase(),"-").concat(Bt(o.traceId,32,oe).toLowerCase(),"-").concat(Bt(o.spanId,16,ge).toLowerCase(),"-").concat(l.toLowerCase())}return""}function Mn(o){var l="traceparent",v=ht(Tv(l),o);return v||(v=ht(Ad(l),o)),v}var jf=Hu("plugin");function Ln(o){return jf.get(o,"state",{},!0)}function oo(o,l){for(var v=[],b=null,I=o[ro](),R;I;){var L=I[Bo]();if(L){b&&b[Ec]&&L[So]&&b[Ec](L),R=Ln(L);var O=!!R[ta];L[ta]&&(O=L[ta]()),O||v[Kr](L),b=L,I=I[ro]()}}_t(v,function(F){var B=o[Pn]();F[Zn](o.getCfg(),B,l,o[ro]()),R=Ln(F),!F[Pn]&&!R[Pn]&&(R[Pn]=B),R[ta]=!0,delete R[Oi]})}function Vd(o){return o.sort(function(l,v){var b=0;if(v){var I=v[So];l[So]?b=I?l[Tf]-v[Tf]:1:I&&(b=-1)}else b=l?1:-1;return b})}function tm(o){var l={};return{getName:function(){return l[$o]},setName:function(v){o&&o.setName(v),l[$o]=v},getTraceId:function(){return l[Dp]},setTraceId:function(v){o&&o.setTraceId(v),cr(v)&&(l[Dp]=v)},getSpanId:function(){return l[Sf]},setSpanId:function(v){o&&o.setSpanId(v),Ht(v)&&(l[Sf]=v)},getTraceFlags:function(){return l[Ic]},setTraceFlags:function(v){o&&o.setTraceFlags(v),l[Ic]=v}}}var Gd="TelemetryPluginChain",zd="_hasRun",rh="_getTelCtx",Wm=0;function je(o,l,v){for(;o;){if(o[Bo]()===v)return o;o=o[ro]()}return Tn([v],l.config||{},l)}function Rt(o,l,v,b){var I=null,R=[];l||(l=Hi({},null,v[tn])),b!==null&&(I=b?je(o,v,b):o);var L={_next:F,ctx:{core:function(){return v},diagLog:function(){return $c(v,l.cfg)},getCfg:function(){return l.cfg},getExtCfg:K,getConfig:re,hasNext:function(){return!!I},getNext:function(){return I},setNext:function(ae){I=ae},iterate:Q,onComplete:O}};function O(ae,ie){for(var we=[],xe=2;xe<arguments.length;xe++)we[xe-2]=arguments[xe];ae&&R[Kr]({func:ae,self:lt(ie)?L.ctx:ie,args:we})}function F(){var ae=I;if(I=ae?ae[ro]():null,!ae){var ie=R;ie&&ie[yt]>0&&(_t(ie,function(we){try{we.func.call(we.self,we.args)}catch(xe){on(v[tn],2,73,"Unexpected Exception during onComplete - "+Qt(xe))}}),R=[])}return ae}function B(ae,ie){var we=null,xe=l.cfg;if(xe&&ae){var Ye=xe[Oc];!Ye&&ie&&(Ye={}),xe[Oc]=Ye,Ye=l.ref(xe,Oc),Ye&&(we=Ye[ae],!we&&ie&&(we={}),Ye[ae]=we,we=l.ref(Ye,ae))}return we}function K(ae,ie){var we=B(ae,!0);return ie&&jr(ie,function(xe,Ye){if(ut(we[xe])){var it=l.cfg[xe];(it||!ut(it))&&(we[xe]=it)}Lf(l,we,xe,Ye)}),l[Mu](we,ie)}function re(ae,ie,we){we===void 0&&(we=!1);var xe,Ye=B(ae,!1),it=l.cfg;return Ye&&(Ye[ie]||!ut(Ye[ie]))?xe=Ye[ie]:(it[ie]||!ut(it[ie]))&&(xe=it[ie]),xe||!ut(xe)?xe:we}function Q(ae){for(var ie;ie=L._next();){var we=ie[Bo]();we&&ae(we)}}return L}function Jt(o,l,v,b){var I=Hi(l),R=Rt(o,I,v,b),L=R.ctx;function O(B){var K=R._next();return K&&K[So](B,L),!K}function F(B,K){return B===void 0&&(B=null),mr(B)&&(B=Tn(B,I.cfg,v,K)),Jt(B||L[ro](),I.cfg,v,K)}return L[ii]=O,L[Lu]=F,L}function nn(o,l,v){var b=Hi(l.config),I=Rt(o,b,l,v),R=I.ctx;function L(F){var B=I._next();return B&&B[_s](R,F),!B}function O(F,B){return F===void 0&&(F=null),mr(F)&&(F=Tn(F,b.cfg,l,B)),nn(F||R[ro](),l,B)}return R[ii]=L,R[Lu]=O,R}function gn(o,l,v){var b=Hi(l.config),I=Rt(o,b,l,v),R=I.ctx;function L(F){return R.iterate(function(B){fr(B[yi])&&B[yi](R,F)})}function O(F,B){return F===void 0&&(F=null),mr(F)&&(F=Tn(F,b.cfg,l,B)),gn(F||R[ro](),l,B)}return R[ii]=L,R[Lu]=O,R}function Tn(o,l,v,b){var I=null,R=!b;if(mr(o)&&o[yt]>0){var L=null;_t(o,function(O){if(!R&&b===O&&(R=!0),R&&O&&fr(O[So])){var F=bi(O,l,v);I||(I=F),L&&L._setNext(F),L=F}})}return b&&!I?Tn([b],l,v):I}function bi(o,l,v){var b=null,I=fr(o[So]),R=fr(o[Ec]),L;o?L=o[wo]+"-"+o[Tf]+"-"+Wm++:L="Unknown-0-"+Wm++;var O={getPlugin:function(){return o},getNext:function(){return b},processTelemetry:K,unload:re,update:Q,_id:L,_setNext:function(ae){b=ae}};function F(){var ae;return o&&fr(o[rh])&&(ae=o[rh]()),ae||(ae=Jt(O,l,v)),ae}function B(ae,ie,we,xe,Ye){var it=!1,ot=o?o[wo]:Gd,Vt=ae[zd];return Vt||(Vt=ae[zd]={}),ae.setNext(b),o&&p(ae[Pn](),function(){return ot+":"+we},function(){Vt[L]=!0;try{var Nr=b?b._id:Sr;Nr&&(Vt[Nr]=!1),it=ie(ae)}catch(Tr){var Ei=b?Vt[b._id]:!0;Ei&&(it=!0),(!b||!Ei)&&on(ae[Sc](),1,73,"Plugin ["+ot+"] failed during "+we+" - "+Qt(Tr)+", run flags: "+Qt(Vt))}},xe,Ye),it}function K(ae,ie){ie=ie||F();function we(xe){if(!o||!I)return!1;var Ye=Ln(o);return Ye[Oi]||Ye[Rc]?!1:(R&&o[Ec](b),o[So](ae,xe),!0)}B(ie,we,"processTelemetry",function(){return{item:ae}},!ae.sync)||ie[ii](ae)}function re(ae,ie){function we(){var xe=!1;if(o){var Ye=Ln(o),it=o[Pn]||Ye[Pn];o&&(!it||it===ae.core())&&!Ye[Oi]&&(Ye[Pn]=null,Ye[Oi]=!0,Ye[ta]=!1,o[Oi]&&o[Oi](ae,ie)===!0&&(xe=!0))}return xe}B(ae,we,"unload",function(){},ie[to])||ae[ii](ie)}function Q(ae,ie){function we(){var xe=!1;if(o){var Ye=Ln(o),it=o[Pn]||Ye[Pn];o&&(!it||it===ae.core())&&!Ye[Oi]&&o[yi]&&o[yi](ae,ie)===!0&&(xe=!0)}return xe}B(ae,we,"update",function(){},!1)||ae[ii](ie)}return ki(O)}var Ku=function(){function o(l,v,b,I){var R=this,L=Jt(l,v,b,I);Il(R,L,Zi(L))}return o}();function Us(){var o=[];function l(b){b&&o[Kr](b)}function v(b,I){_t(o,function(R){try{R(b,I)}catch(L){on(b[Sc](),2,73,"Unexpected error calling unload handler - "+Qt(L))}}),o=[]}return{add:l,run:v}}var Zu,Vl;function Jm(o,l){Zu=o,Vl=l}function nh(){var o=[];function l(b){var I=o;o=[],_t(I,function(R){try{(R.rm||R.remove).call(R)}catch(L){on(b,2,73,"Unloading:"+Qt(L))}}),Zu&&I[yt]>Zu&&(Vl?Vl("doUnload",I):on(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))}function v(b){b&&(Ga(o,b),Zu&&o[yt]>Zu&&(Vl?Vl("Add",o):on(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}return{run:l,add:v}}var Bf,Hc="getPlugin",ry=(Bf={},Bf[Oc]={isVal:Up,v:{}},Bf),mg=function(){function o(){var l=this,v,b,I,R,L;B(),Za(o,l,function(K){K[Zn]=function(re,Q,ae,ie){F(re,Q,ie),v=!0},K[Oi]=function(re,Q){var ae,ie=K[Pn];if(!ie||re&&ie!==re[Pn]())return;var we,xe=!1,Ye=re||nn(null,ie,I&&I[Hc]?I[Hc]():I),it=Q||(ae={reason:0},ae[to]=!1,ae);function ot(){xe||(xe=!0,R.run(Ye,Q),L.run(Ye[Sc]()),we===!0&&Ye[ii](it),B())}return!K[Sn]||K[Sn](Ye,it,ot)!==!0?ot():we=!0,we},K[yi]=function(re,Q){var ae=K[Pn];if(!ae||re&&ae!==re[Pn]())return;var ie,we=!1,xe=re||gn(null,ae,I&&I[Hc]?I[Hc]():I),Ye=Q||{reason:0};function it(){we||(we=!0,F(xe.getCfg(),xe.core(),xe[ro]()))}return!K._doUpdate||K._doUpdate(xe,Ye,it)!==!0?it():ie=!0,ie},Eo(K,"_addUnloadCb",function(){return R},"add"),Eo(K,"_addHook",function(){return L},"add"),ri(K,"_unloadHooks",{g:function(){return L}})}),l[Sc]=function(K){return O(K)[Sc]()},l[ta]=function(){return v},l.setInitialized=function(K){v=K},l[Ec]=function(K){I=K},l[ii]=function(K,re){re?re[ii](K):I&&fr(I[So])&&I[So](K,null)},l._getTelCtx=O;function O(K){K===void 0&&(K=null);var re=K;if(!re){var Q=b||Jt(null,{},l[Pn]);I&&I[Hc]?re=Q[Lu](null,I[Hc]):re=Q[Lu](null,I)}return re}function F(K,re,Q){Hi(K,ry,$c(re)),!Q&&re&&(Q=re[yd]()[ro]());var ae=I;I&&I[Hc]&&(ae=I[Hc]()),l[Pn]=re,b=Jt(Q,K,re,ae)}function B(){v=!1,l[Pn]=null,b=null,I=null,L=nh(),R=Us()}}return o.__ieDyn=1,o}();function s_(o,l,v){var b={id:l,fn:v};Ga(o,b);var I={remove:function(){_t(o,function(R,L){if(R.id===b.id)return o[Uo](L,1),-1})}};return I}function Cv(o,l,v){for(var b=!1,I=o[yt],R=0;R<I;++R){var L=o[R];if(L)try{if(L.fn[Fo](null,[l])===!1){b=!0;break}}catch(O){on(v,2,64,"Telemetry initializer failed: "+xs(O),{exception:Qt(O)},!0)}}return!b}var ny=function(o){pc(l,o);function l(){var v=o.call(this)||this;v.identifier="TelemetryInitializerPlugin",v.priority=199;var b,I;R(),Za(l,v,function(L,O){L.addTelemetryInitializer=function(F){return s_(I,b++,F)},L[So]=function(F,B){Cv(I,F,B?B[Sc]():L[Sc]())&&L[ii](F,B)},L[Sn]=function(){R()}});function R(){b=0,I=[]}return v}return l.__ieDyn=1,l}(mg),$f,rm="Plugins must provide initialize method",Km="_notificationManager",Yf="SDK is still unloading...",nm="SDK is not initialized",vg=100,u_=5e4,Wd=Ca(($f={cookieCfg:{}},$f[ou]={rdOnly:!0,ref:!0,v:[]},$f[au]={rdOnly:!0,ref:!0,v:[]},$f[Oc]={ref:!0,v:{}},$f[Es]=wi,$f.loggingLevelConsole=0,$f.diagnosticLogInterval=wi,$f));function c_(o,l){return new Qh(l)}function iy(o,l,v){var b,I=[],R=[],L={};return _t(v,function(O){(ut(O)||ut(O[Zn]))&&ji(rm);var F=O[Tf],B=O[wo];O&&F&&(ut(L[F])?L[F]=B:Ms(o,"Two extensions have same priority #"+F+" - "+L[F]+", "+B)),!F||F<l?I[Kr](O):R[Kr](O)}),b={},b[Pn]=I,b[au]=R,b}function gg(o,l){var v=!1;return _t(l,function(b){if(b===o)return v=!0,-1}),v}function Zm(o,l,v,b){v&&jr(v,function(I,R){b&&Ma(R)&&Ma(l[I])&&Zm(o,l[I],R,b),b&&Ma(R)&&Ma(l[I])?Zm(o,l[I],R,b):o.set(l,I,R)})}function _g(o,l){var v=null,b=-1;return _t(o,function(I,R){if(I.w===l)return v=I,b=R,-1}),{i:b,l:v}}function kv(o,l){var v=_g(o,l).l;return v||(v={w:l,rm:function(){var b=_g(o,l);b.i!==-1&&o[Uo](b.i,1)}},o[Kr](v)),v}function im(o,l,v){_t(l,function(b){var I=Fd(o,b.w,v);delete b.w,b.rm=function(){I.rm()}})}function Jd(o,l,v,b){return l.add(o[Qa](function(I){var R=I.cfg.disableDbgExt;R===!0&&b&&(v[gs](b),b=null),v&&!b&&R!==!0&&(b=bt(I.cfg),v[$i](b))})),b}function yg(o){return ri({rm:function(){o.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(o)+">"}})}var Xm=function(){function o(){var l,v,b,I,R,L,O,F,B,K,re,Q,ae,ie,we,xe,Ye,it,ot,Vt,Nr,Ei,Tr,Gi,es,ts,Jc,Sa,Kf,We,Ft,Vn;Za(o,this,function(Te){Br(),Te._getDbgPlgTargets=function(){return[Tr,I]},Te[ta]=function(){return v},Te.activeStatus=function(){return ts},Te._setPendingStatus=function(){ts=3},Te[Zn]=function(ke,ft,Yt,Ut){ae&&ji(Yf),Te[ta]()&&ji("Core cannot be initialized more than once"),l=Hi(ke,Wd,Yt||Te[tn],!1),ke=l.cfg,rs(l[Qa](function(jn){var Ti=jn.cfg,ja=ts===3;if(!ja){Sa=Ti.initInMemoMaxSize||vg;var uo=Ti[ml],Xf=Ti.endpointUrl;if(ut(uo)){Nr=null,ts=bn[yc];var Pv="Please provide instrumentation key";v?(on(b,1,100,Pv),Gn()):ji(Pv);return}var Mv=[];if(Ur(uo)?(Mv[Kr](uo),Nr=null):Nr=uo,Ur(Xf)?(Mv[Kr](Xf),Jc=null):Jc=Xf,Mv[yt]){Kf=!1,ts=3;var oy=Up(Ti.initTimeOut)?Ti.initTimeOut:u_,Jy=Sl(Mv);dc(function(){Kf||lr()},oy),Ef(Jy,function(Tg){try{if(Kf)return;if(!Tg.rejected){var Jl=Tg[_d];if(Jl&&Jl[yt]){var sy=Jl[0];if(Nr=sy&&sy[_d],Jl[yt]>1){var uy=Jl[1];Jc=uy&&uy[_d]}}Nr&&(ke[ml]=Nr,ke.endpointUrl=Jc)}lr()}catch{Kf||lr()}})}else lr();var f_=jn.ref(jn.cfg,Oc);jr(f_,function(Tg){jn.ref(f_,Tg)})}})),R=Ut,ot=Jd(l,it,R&&Te[Qs](),ot),lh(),Te[tn]=Yt;var or=ke[ou];if(K=[],K[Kr].apply(K,vo(vo([],ft,!1),or)),re=ke[au],pi(null),(!Q||Q[yt]===0)&&ji("No "+au+" available"),re&&re[yt]>1){var Hr=Te[Bo]("TeeChannelController");(!Hr||!Hr.plugin)&&on(b,1,28,"TeeChannel required")}im(ke,Ei,b),Ei=null,v=!0,ts===bn.ACTIVE&&Gn()},Te.getChannels=function(){var ke=[];return Q&&_t(Q,function(ft){ke[Kr](ft)}),ki(ke)},Te.track=function(ke){p(Te[Tl](),function(){return"AppInsightsCore:track"},function(){ke===null&&(hi(ke),ji("Invalid telemetry item")),!ke[$o]&&ut(ke[$o])&&(hi(ke),ji("telemetry name required")),ke[wc]=ke[wc]||Nr,ke[Yo]=ke[Yo]||Ts(new Date),ke.ver=ke.ver||"4.0",!ae&&Te[ta]()&&ts===bn.ACTIVE?na()[ii](ke):ts!==bn[yc]&&I[yt]<=Sa&&I[Kr](ke)},function(){return{item:ke}},!ke.sync)},Te[yd]=na,Te[Qs]=function(){return R||(R=new Hl(l.cfg),Te[Km]=R),R},Te[$i]=function(ke){Te.getNotifyMgr()[$i](ke)},Te[gs]=function(ke){R&&R[gs](ke)},Te.getCookieMgr=function(){return F||(F=Fs(l.cfg,Te[tn])),F},Te.setCookieMgr=function(ke){F!==ke&&(Ud(F,!1),F=ke)},Te[Tl]=function(){return L||O||_()},Te.setPerfMgr=function(ke){L=ke},Te.eventCnt=function(){return I[yt]},Te.releaseQueue=function(){if(v&&I[yt]>0){var ke=I;I=[],ts===2?_t(ke,function(ft){ft[wc]=ft[wc]||Nr,na()[ii](ft)}):on(b,2,20,"core init status is not active")}},Te[bc]=function(ke){return we=ke||null,Vn=!1,We&&We[jo](),zi(!0)};function lr(){Kf=!0,ut(Nr)?(ts=bn[yc],on(b,1,112,"ikey can't be resolved from promises")):ts=bn.ACTIVE,Gn()}function Gn(){v&&(Te.releaseQueue(),Te[bc]())}function zi(ke){if((!We||!We[eu])&&!Vn){var ft=ke||b&&b.queue[yt]>0;ft&&(Ft||(Ft=!0,rs(l[Qa](function(Yt){var Ut=Yt.cfg.diagnosticLogInterval;(!Ut||!(Ut>0))&&(Ut=1e4);var or=!1;We&&(or=We[eu],We[jo]()),We=pd(ch,Ut),We.unref(),We[eu]=or}))),We[eu]=!0)}return We}Te[Fa]=function(){Vn=!0,We&&We[jo](),ch()},Il(Te,function(){return ie},["addTelemetryInitializer"]),Te[_s]=function(ke,ft,Yt){var Ut;ke===void 0&&(ke=!0),v||ji(nm),ae&&ji(Yf);var or=(Ut={reason:50},Ut[to]=ke,Ut.flushComplete=!1,Ut),Hr;ke&&!ft&&(Hr=_a(function(ja){ft=ja}));var jn=nn(np(),Te);jn[tu](function(){it.run(Te[tn]),Ym([F,R,b],ke,function(){Br(),ft&&ft(or)})},Te);function Ti(ja){or.flushComplete=ja,ae=!0,Ye.run(jn,or),Te[Fa](),jn[ii](or)}return ch(),Zf(ke,Ti,6,Yt),Hr},Te[Bo]=ia,Te.addPlugin=function(ke,ft,Yt,Ut){if(!ke){Ut&&Ut(!1),um(rm);return}var or=ia(ke[wo]);if(or&&!ft){Ut&&Ut(!1),um("Plugin ["+ke[wo]+"] is already loaded!");return}var Hr={reason:16};function jn(uo){K[Kr](ke),Hr.added=[ke],pi(Hr),Ut&&Ut(!0)}if(or){var Ti=[or.plugin],ja={reason:2,isAsync:!!Yt};Ea(Ti,ja,function(uo){uo?(Hr.removed=Ti,Hr.reason|=32,jn()):Ut&&Ut(!1)})}else jn()},Te.updateCfg=function(ke,ft){ft===void 0&&(ft=!0);var Yt;if(Te[ta]()){Yt={reason:1,cfg:l.cfg,oldCfg:Ep({},l.cfg),newConfig:Ep({},ke),merge:ft},ke=Yt.newConfig;var Ut=l.cfg;ke[ou]=Ut[ou],ke[au]=Ut[au]}l._block(function(or){var Hr=or.cfg;Zm(or,Hr,ke,ft),ft||jr(Hr,function(jn){Ia(ke,jn)||or.set(Hr,jn,wi)}),or[Mu](Hr,Wd)},!0),l[Lo](),Yt&&fh(Yt)},Te.evtNamespace=function(){return xe},Te.flush=Zf,Te.getTraceCtx=function(ke){return Vt||(Vt=tm()),Vt},Te.setTraceCtx=function(ke){Vt=ke||null},Te.addUnloadHook=rs,Eo(Te,"addUnloadCb",function(){return Ye},"add"),Te.onCfgChange=function(ke){var ft;return v?ft=Fd(l.cfg,ke,Te[tn]):ft=kv(Ei,ke),yg(ft)},Te.getWParam=function(){return of()||l.cfg.enableWParam?0:-1};function so(){var ke={};Gi=[];var ft=function(Yt){Yt&&_t(Yt,function(Ut){if(Ut[wo]&&Ut[eo]&&!ke[Ut.identifier]){var or=Ut[wo]+"="+Ut[eo];Gi[Kr](or),ke[Ut.identifier]=Ut}})};ft(Q),re&&_t(re,function(Yt){ft(Yt)}),ft(K)}function Br(){v=!1,l=Hi({},Wd,Te[tn]),l.cfg[vl]=1,ri(Te,"config",{g:function(){return l.cfg},s:function(ft){Te.updateCfg(ft,!1)}}),ri(Te,"pluginVersionStringArr",{g:function(){return Gi||so(),Gi}}),ri(Te,"pluginVersionString",{g:function(){return es||(Gi||so(),es=Gi.join(";")),es||Sr}}),ri(Te,"logger",{g:function(){return b||(b=new Yc(l.cfg),l[tn]=b),b},s:function(ft){l[tn]=ft,b!==ft&&(Ud(b,!1),b=ft)}}),Te[tn]=new Yc(l.cfg),Tr=[];var ke=Te.config[ou]||[];ke.splice(0,ke[yt]),Ga(ke,Tr),ie=new ny,I=[],Ud(R,!1),R=null,L=null,O=null,Ud(F,!1),F=null,B=null,K=[],re=null,Q=null,ae=!1,we=null,xe=lu("AIBaseCore",!0),Ye=Us(),Vt=null,Nr=null,it=nh(),Ei=[],es=null,Gi=null,Vn=!1,We=null,Ft=!1,ts=0,Jc=null,Sa=null,Kf=!1}function na(){var ke=Jt(np(),l.cfg,Te);return ke[tu](zi),ke}function pi(ke){var ft=iy(Te[tn],Fl,K);B=null,es=null,Gi=null,Q=(re||[])[0]||[],Q=Vd(Ga(Q,ft[au]));var Yt=Ga(Vd(ft[Pn]),Q);Tr=ki(Yt);var Ut=Te.config[ou]||[];Ut.splice(0,Ut[yt]),Ga(Ut,Tr);var or=na();Q&&Q[yt]>0&&oo(or[Lu](Q),Yt),oo(or,Yt),ke&&fh(ke)}function ia(ke){var ft=null,Yt=null,Ut=[];return _t(Tr,function(or){if(or[wo]===ke&&or!==ie)return Yt=or,-1;or.getChannel&&Ut[Kr](or)}),!Yt&&Ut[yt]>0&&_t(Ut,function(or){if(Yt=or.getChannel(ke),!Yt)return-1}),Yt&&(ft={plugin:Yt,setEnabled:function(or){Ln(Yt)[Rc]=!or},isEnabled:function(){var or=Ln(Yt);return!or[Oi]&&!or[Rc]},remove:function(or,Hr){var jn;or===void 0&&(or=!0);var Ti=[Yt],ja=(jn={reason:1},jn[to]=or,jn);Ea(Ti,ja,function(uo){uo&&pi({reason:32,removed:Ti}),Hr&&Hr(uo)})}}),ft}function np(){if(!B){var ke=(Tr||[]).slice();Ri(ke,ie)===-1&&ke[Kr](ie),B=Tn(Vd(ke),l.cfg,Te)}return B}function Ea(ke,ft,Yt){if(ke&&ke[yt]>0){var Ut=Tn(ke,l.cfg,Te),or=nn(Ut,Te);or[tu](function(){var Hr=!1,jn=[];_t(K,function(ja,uo){gg(ja,ke)?Hr=!0:jn[Kr](ja)}),K=jn,es=null,Gi=null;var Ti=[];re&&(_t(re,function(ja,uo){var Xf=[];_t(ja,function(Pv){gg(Pv,ke)?Hr=!0:Xf[Kr](Pv)}),Ti[Kr](Xf)}),re=Ti),Yt&&Yt(Hr),zi()}),or[ii](ft)}else Yt(!1)}function ch(){if(b&&b.queue){var ke=b.queue.slice(0);b.queue[yt]=0,_t(ke,function(ft){var Yt,Ut=(Yt={},Yt[$o]=we||"InternalMessageId: "+ft[Fu],Yt[wc]=Nr,Yt[Yo]=Ts(new Date),Yt.baseType=Ul.dataType,Yt.baseData={message:ft[ru]},Yt);Te.track(Ut)})}}function Zf(ke,ft,Yt,Ut){var or=1,Hr=!1,jn=null;Ut=Ut||5e3;function Ti(){or--,Hr&&or===0&&(jn&&jn[jo](),jn=null,ft&&ft(Hr),ft=null)}if(Q&&Q[yt]>0){var ja=na()[Lu](Q);ja.iterate(function(uo){if(uo.flush){or++;var Xf=!1;uo.flush(ke,function(){Xf=!0,Ti()},Yt)||Xf||(ke&&jn==null?jn=dc(function(){jn=null,Ti()},Ut):Ti())}})}return Hr=!0,Ti(),!0}function lh(){var ke;rs(l[Qa](function(ft){var Yt=ft.cfg.enablePerfMgr;if(Yt){var Ut=ft.cfg[Es];(ke!==Ut||!ke)&&(Ut||(Ut=c_),Nf(ft.cfg,Es,Ut),ke=Ut,O=null),!L&&!O&&fr(Ut)&&(O=Ut(Te,Te[Qs]()))}else O=null,ke=null}))}function fh(ke){var ft=gn(np(),Te);ft[tu](zi),(!Te._updateHook||Te._updateHook(ft,ke)!==!0)&&ft[ii](ke)}function um(ke){var ft=Te[tn];ft?(on(ft,2,73,ke),zi()):ji(ke)}function hi(ke){var ft=Te[Qs]();ft&&ft[xf]([ke],2)}function rs(ke){it.add(ke)}})}return o.__ieDyn=1,o}();function Yr(o,l){try{if(o&&o!==""){var v=Li().parse(o);if(v&&v[km]&&v[km]>=v.itemsAccepted&&v.itemsReceived-v.itemsAccepted===v.errors[yt])return v}}catch(b){on(l,1,43,"Cannot parse the response. "+(b[$o]||Qt(b)),{response:o})}return null}var mu="",Kd="NoResponseBody",am="&"+Kd+"=true",om="POST",Qm=function(){function o(){var l=0,v,b,I,R,L,O,F,B,K,re,Q,ae,ie,we;Za(o,this,function(xe,Ye){var it=!0;Kf(),xe[Zn]=function(We,Ft){I=Ft,b&&on(I,1,28,"Sender is already initialized"),xe.SetConfig(We),b=!0},xe._getDbgPlgTargets=function(){return[b,R,O,v]},xe.SetConfig=function(We){try{if(L=We.senderOnCompleteCallBack||{},O=!!We.disableCredentials,F=We.fetchCredentials,R=!!We.isOneDs,v=!!We.enableSendPromise,K=!!We.disableXhr,re=!!We.disableBeacon,Q=!!We.disableBeaconSync,we=We.timeWrapper,ie=!!We.addNoResponse,ae=!!We.disableFetchKeepAlive,B={sendPOST:ts},R||(it=!1),O){var Ft=cu();Ft&&Ft.protocol&&Ft.protocol[ma]()==="file:"&&(it=!1)}return!0}catch{}return!1},xe.getSyncFetchPayload=function(){return l},xe.getSenderInst=function(We,Ft){return We&&We[yt]?Ei(We,Ft):null},xe.getFallbackInst=function(){return B},xe[Sn]=function(We,Ft){Kf()};function ot(We,Ft){Tr(Ft,200,{},We)}function Vt(We,Ft){on(I,2,26,"Failed to send telemetry.",{message:We}),Tr(Ft,400,{})}function Nr(We){Vt("No endpoint url is provided for the batch",We)}function Ei(We,Ft){for(var Vn,Te=0,lr=null,Gn=0;lr==null&&Gn<We[yt];)Te=We[Gn],!K&&Te===1?Dl()?lr=Sa:Af()&&(lr=ts):Te===2&&Pm(Ft)&&(!Ft||!ae)?lr=Jc:Te===3&&jh()&&(Ft?!Q:!re)&&(lr=es),Gn++;return lr?(Vn={_transport:Te,_isSync:Ft},Vn[xc]=lr,Vn):null}function Tr(We,Ft,Vn,Te){try{We&&We(Ft,Vn,Te)}catch{}}function Gi(We,Ft){var Vn=Oa(),Te=We[Tc];if(!Te)return Nr(Ft),!0;Te=We[Tc]+(ie?am:mu);var lr=We[wf],Gn=R?lr:new Blob([lr],{type:"text/plain;charset=UTF-8"}),zi=Vn.sendBeacon(Te,Gn);return zi}function es(We,Ft,Vn){var Te=We[wf];try{if(Te)if(Gi(We,Ft))ot(mu,Ft);else{var lr=L&&L.beaconOnRetry;lr&&fr(lr)?lr(We,Ft,Gi):(B&&B[xc](We,Ft,!0),on(I,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Gn){R&&Ms(I,"Failed to send telemetry using sendBeacon API. Ex:"+Qt(Gn)),Tr(Ft,R?0:400,{},mu)}}function ts(We,Ft,Vn){var Te,lr,Gn,zi=We[Ss]||{};!Vn&&v&&(Te=_a(function(pi,ia){lr=pi,Gn=ia})),R&&Vn&&We.disableXhrSync&&(Vn=!1);var so=We[Tc];if(!so){Nr(Ft),lr&&lr(!1);return}var Br=$p(om,so,it,!0,Vn,We[bf]);R||Br[Sv]("Content-type","application/json"),_t(Zi(zi),function(pi){Br[Sv](pi,zi[pi])}),Br.onreadystatechange=function(){R||(na(Br),Br.readyState===4&&lr&&lr(!0))},Br.onload=function(){R&&na(Br)};function na(pi){var ia=L&&L.xhrOnComplete,np=ia&&fr(ia);if(np)ia(pi,Ft,We);else{var Ea=uu(pi);Tr(Ft,pi[bs],Vo(pi,R),Ea)}}return Br.onerror=function(pi){Tr(Ft,R?Br[bs]:400,Vo(Br,R),R?mu:Nl(Br)),Gn&&Gn(pi)},Br.ontimeout=function(){Tr(Ft,R?Br[bs]:500,Vo(Br,R),R?mu:Nl(Br)),lr&&lr(!1)},Br.send(We[wf]),Te}function Jc(We,Ft,Vn){var Te,lr=We[Tc],Gn=We[wf],zi=R?Gn:new Blob([Gn],{type:"application/json"}),so,Br,na,pi=new Headers,ia=Gn[yt],np=!1,Ea=!1,ch=We[Ss]||{},Zf=(Te={method:om,body:zi},Te[ya]=!0,Te);We.headers&&Zi(We.headers)[yt]>0&&(_t(Zi(ch),function(hi){pi.append(hi,ch[hi])}),Zf[Ss]=pi),F?Zf.credentials=F:it&&R&&(Zf.credentials="include"),Vn&&(Zf.keepalive=!0,l+=ia,R?We._sendReason===2&&(np=!0,ie&&(lr+=am)):np=!0);var lh=new Request(lr,Zf);try{lh[ya]=!0}catch{}if(!Vn&&v&&(so=_a(function(hi,rs){Br=hi,na=rs})),!lr){Nr(Ft),Br&&Br(!1);return}function fh(hi){Tr(Ft,R?0:400,{},R?mu:hi)}function um(hi,rs,ke){var ft=hi[bs],Yt=L.fetchOnComplete;Yt&&fr(Yt)?Yt(hi,Ft,ke||mu,rs):Tr(Ft,ft,{},ke||mu)}try{Ef(fetch(R?lr:lh,R?Zf:null),function(hi){if(Vn&&(l-=ia,ia=0),!Ea)if(Ea=!0,hi.rejected)fh(hi.reason&&hi.reason[ru]),na&&na(hi.reason);else{var rs=hi[_d];try{!R&&!rs.ok?(fh(rs.statusText),Br&&Br(!1)):R&&!rs.body?(um(rs,null,mu),Br&&Br(!0)):Ef(rs.text(),function(ke){um(rs,We,ke[_d]),Br&&Br(!0)})}catch(ke){fh(Qt(ke)),na&&na(ke)}}})}catch(hi){Ea||(fh(Qt(hi)),na&&na(hi))}return np&&!Ea&&(Ea=!0,Tr(Ft,200,{}),Br&&Br(!0)),R&&!Ea&&We[bf]>0&&we&&we.set(function(){Ea||(Ea=!0,Tr(Ft,500,{}),Br&&Br(!0))},We[bf]),so}function Sa(We,Ft,Vn){var Te=fi(),lr=new XDomainRequest,Gn=We[wf];lr.onload=function(){var pi=uu(lr),ia=L&&L.xdrOnComplete;ia&&fr(ia)?ia(lr,Ft,We):Tr(Ft,200,{},pi)},lr.onerror=function(){Tr(Ft,400,{},R?mu:Cf(lr))},lr.ontimeout=function(){Tr(Ft,500,{})},lr.onprogress=function(){};var zi=Te&&Te.location&&Te.location[ys]||"",so=We[Tc];if(!so){Nr(Ft);return}if(!R&&so.lastIndexOf(zi,0)!==0){var Br="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";on(I,2,40,". "+Br),Vt(Br,Ft);return}var na=R?so:so[Yi](/^(https?:)/,"");lr.open(om,na),We[bf]&&(lr[bf]=We[bf]),lr.send(Gn),R&&Vn?we&&we.set(function(){lr.send(Gn)},0):lr.send(Gn)}function Kf(){l=0,b=!1,v=!1,I=null,R=null,L=null,O=null,F=null,B=null,K=!1,re=!1,Q=!1,ae=!1,ie=!1,we=null}})}return o.__ieDyn=1,o}(),qf="on",ih="attachEvent",l_="addEventListener",ah="detachEvent",Gl="removeEventListener",zl="events",Wl="visibilitychange",Vc="pagehide",Gc="pageshow",Xu="unload",Hf="beforeunload",vu=lu("aiEvtPageHide"),Vf=lu("aiEvtPageShow"),Zd=/\.[\.]+/g,wg=/[\.]+$/,Dv=1,Gf=Hu("events"),zf=/^([^.]*)(?:\.(.+)|)/;function Xd(o){return o&&o[Yi]?o[Yi](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Sr):o}function oh(o,l){var v;if(l){var b=Sr;mr(l)?(b=Sr,_t(l,function(R){R=Xd(R),R&&(R[0]!=="."&&(R="."+R),b+=R)})):b=Xd(l),b&&(b[0]!=="."&&(b="."+b),o=(o||Sr)+b)}var I=zf.exec(o||Sr)||[];return v={},v[va]=I[1],v.ns=(I[2]||Sr).replace(Zd,".").replace(wg,Sr)[Ua](".").sort().join("."),v}function Rv(o,l,v){var b=[],I=Gf.get(o,zl,{},!1),R=oh(l,v);return jr(I,function(L,O){_t(O,function(F){var B;(!R[va]||R[va]===F.evtName[va])&&(!R.ns||R.ns===R.ns)&&b[Kr]((B={},B[$o]=F.evtName[va]+(F.evtName.ns?"."+F.evtName.ns:Sr),B.handler=F[ws],B))})}),b}function sm(o,l,v){v===void 0&&(v=!0);var b=Gf.get(o,zl,{},v),I=b[l];return I||(I=b[l]=[]),I}function ev(o,l,v,b){o&&l&&l[va]&&(o[Gl]?o[Gl](l[va],v,b):o[ah]&&o[ah](qf+l[va],v))}function bg(o,l,v,b){var I=!1;return o&&l&&l[va]&&v&&(o[l_]?(o[l_](l[va],v,b),I=!0):o[ih]&&(o[ih](qf+l[va],v),I=!0)),I}function Sg(o,l,v,b){for(var I=l[yt];I--;){var R=l[I];R&&(!v.ns||v.ns===R.evtName.ns)&&(!b||b(R))&&(ev(o,R.evtName,R[ws],R.capture),l[Uo](I,1))}}function Eg(o,l,v){if(l[va])Sg(o,sm(o,l[va]),l,v);else{var b=Gf.get(o,zl,{});jr(b,function(I,R){Sg(o,R,l,v)}),Zi(b)[yt]===0&&Gf.kill(o,zl)}}function Xn(o,l){var v;return l?(mr(l)?v=[o].concat(l):v=[o,l],v=oh("xx",v).ns[Ua](".")):v=o,v}function Qd(o,l,v,b,I){var R;I===void 0&&(I=!1);var L=!1;if(o)try{var O=oh(l,b);if(L=bg(o,O,v,I),L&&Gf.accept(o)){var F=(R={guid:Dv++,evtName:O},R[ws]=v,R.capture=I,R);sm(o,O.type)[Kr](F)}}catch{}return L}function ai(o,l,v,b,I){if(I===void 0&&(I=!1),o)try{var R=oh(l,b),L=!1;Eg(o,R,function(O){return R.ns&&!v||O[ws]===v?(L=!0,!0):!1}),L||ev(o,R,v,I)}catch{}}function ay(o,l,v,b){return b===void 0&&(b=!1),Qd(o,l,v,null,b)}function sh(o,l,v,b){b===void 0&&(b=!1),ai(o,l,v,null,b)}function ep(o,l,v){var b=!1,I=fi();I&&(b=Qd(I,o,l,v),b=Qd(I.body,o,l,v)||b);var R=da();return R&&(b=Qd(R,o,l,v)||b),b}function h(o,l,v){var b=fi();b&&(ai(b,o,l,v),ai(b.body,o,l,v));var I=da();I&&ai(I,o,l,v)}function w(o,l,v,b){var I=!1;return l&&o&&o[yt]>0&&_t(o,function(R){R&&(!v||Ri(v,R)===-1)&&(I=ep(R,l,b)||I)}),I}function N(o,l,v,b){var I=!1;return l&&o&&mr(o)&&(I=w(o,l,v,b),!I&&v&&v[yt]>0&&(I=w(o,l,null,b))),I}function D(o,l,v){o&&mr(o)&&_t(o,function(b){b&&h(b,l,v)})}function M(o,l,v){return N([Hf,Xu,Vc],o,l,v)}function H(o,l){D([Hf,Xu,Vc],o,l)}function z(o,l,v){function b(L){var O=da();o&&O&&O.visibilityState==="hidden"&&o(L)}var I=Xn(vu,v),R=w([Vc],o,l,I);return(!l||Ri(l,Wl)===-1)&&(R=w([Wl],b,l,I)||R),!R&&l&&(R=z(o,null,v)),R}function ne(o,l){var v=Xn(vu,l);D([Vc],o,v),D([Wl],null,v)}function ce(o,l,v){function b(L){var O=da();o&&O&&O.visibilityState==="visible"&&o(L)}var I=Xn(Vf,v),R=w([Gc],o,l,I);return R=w([Wl],b,l,I)||R,!R&&l&&(R=ce(o,null,v)),R}function fe(o,l){var v=Xn(Vf,l);D([Gc],o,v),D([Wl],null,v)}var Pe=Xa({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3}),Xe="",Qe="https://browser.events.data.microsoft.com/OneCollector/1.0/",Re="version",Se="properties",Ve="initialize",Ce="logger",nt="indexOf",Me="timings",Oe="pollInternalLogs",ze="value",Kt="kind",tr="length",gr="processTelemetryStart",Lr="handleField",dn="rmSanitizer",sn="rmFieldSanitizer",Qn="canHandle",Zr,Vi="4.3.5",st="1DS-Web-JS-"+Vi,St=u.hasOwnProperty,Dr="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Er="withCredentials",At="timeout",qr=(Zr={},Zr[0]=0,Zr[2]=6,Zr[1]=1,Zr[3]=7,Zr[4098]=6,Zr[4097]=1,Zr[4099]=7,Zr),kt=null,xn=of(),Et=mp();function Fn(o){return!(o===Xe||ut(o))}function Un(o){if(o){var l=ho(o,"-");if(l>-1)return en(o,l)}return Xe}function wa(){return kt===null&&(kt=!lt(Uint8Array)&&!ba()&&!kl()),kt}function Qu(o){return!!(o&&Fr(o)&&o>=1&&o<=4)}function js(o,l,v){if(!l&&!Fn(l)||typeof o!="string")return null;var b=typeof l;if(b==="string"||b==="number"||b==="boolean"||mr(l))l={value:l};else if(b==="object"&&!St.call(l,"value"))l={value:v?JSON.stringify(l):l};else if(ut(l[ze])||l[ze]===Xe||!Xt(l[ze])&&!Fr(l[ze])&&!qn(l[ze])&&!mr(l[ze]))return null;if(mr(l[ze])&&!Wc(l[ze]))return null;if(!ut(l[Kt])){if(mr(l[ze])||!On(l[Kt]))return null;l[ze]=l[ze].toString()}return l}function uh(o,l,v){var b=-1;if(!lt(o))if(l>0&&(l===32?b=8192:l<=13&&(b=l<<5)),oi(v))b===-1&&(b=0),b|=v;else{var I=qr[Bs(o)]||-1;b!==-1&&I!==-1?b|=I:I===6&&(b=I)}return b}function gu(o,l,v){v===void 0&&(v=!0);var b;return o&&(b=o.get(l),v&&b&&decodeURIComponent&&(b=decodeURIComponent(b))),b||Xe}function Qo(o){o===void 0&&(o="D");var l=S();return o==="B"?l="{"+l+"}":o==="P"?l="("+l+")":o==="N"&&(l=l.replace(/-/g,Xe)),l}function zc(o,l,v,b,I){var R={},L=!1,O=0,F=arguments[tr],B=arguments;for(qn(B[0])&&(L=B[0],O++);O<F;O++){var o=B[O];jr(o,function(re,Q){L&&Q&&Ni(Q)?mr(Q)?(R[re]=R[re]||[],_t(Q,function(ae,ie){ae&&Ni(ae)?R[re][ie]=zc(!0,R[re][ie],ae):R[re][ie]=ae})):R[re]=zc(!0,R[re],Q):R[re]=Q})}return R}var Si=pf;function On(o){return o===0||o>0&&o<=13||o===32}function oi(o){return o>=0&&o<=9}function ba(){var o=Oa();if(!lt(o)&&o.userAgent){var l=o.userAgent.toLowerCase();if((l[nt]("safari")>=0||l[nt]("firefox")>=0)&&l[nt]("chrome")<0)return!0}return!1}function Wc(o){return o[tr]>0}function tp(o,l){var v=o;v[Me]=v[Me]||{},v[Me][gr]=v[Me][gr]||{},v[Me][gr][l]=Si()}function Bs(o){var l=0;if(o!=null){var v=typeof o;v==="string"?l=1:v==="number"?l=2:v==="boolean"?l=3:v===r&&(l=4,mr(o)?(l=4096,o[tr]>0&&(l|=Bs(o[0]))):St.call(o,"value")&&(l=8192|Bs(o[ze])))}return l}function Wf(){return!!vn("chrome")}function Jf(o,l,v,b,I,R){b===void 0&&(b=!1),I===void 0&&(I=!1);function L(F,B,K){try{F[B]=K}catch{}}var O=new XMLHttpRequest;return b&&L(O,Dr,b),v&&L(O,Er,v),O.open(o,l,!I),v&&L(O,Er,v),!I&&R&&L(O,At,R),O}function rp(o){return o>0}var Ov=Ca({endpointUrl:Qe,propertyStorageOverride:{isVal:tv}});function tv(o){return o&&(!o.getProperty||!o.setProperty)&&ji("Invalid property storage override passed."),!0}var rv=function(o){pc(l,o);function l(){var v=o.call(this)||this;return Za(l,v,function(b,I){b[Ve]=function(R,L,O,F){p(b,function(){return"AppInsightsCore.initialize"},function(){try{I[Ve](Hi(R,Ov,O||b[Ce],!1).cfg,L,O,F)}catch(re){var B=b[Ce],K=Qt(re);K[nt]("channels")!==-1&&(K+=`
 - Channels must be provided through config.channels only!`),on(B,1,514,"SDK Initialization Failed - no telemetry will be sent: "+K)}},function(){return{config:R,extensions:L,logger:O,notificationManager:F}})},b.track=function(R){p(b,function(){return"AppInsightsCore.track"},function(){var L=R;if(L){L[Me]=L[Me]||{},L[Me].trackStart=Si(),Qu(L.latency)||(L.latency=1);var O=L.ext=L.ext||{};O.sdk=O.sdk||{},O.sdk.ver=st;var F=L.baseData=L.baseData||{};F[Se]=F[Se]||{};var B=F[Se];B[Re]=B[Re]||b.pluginVersionString||Xe}I.track(L)},function(){return{item:R}},!R.sync)},b[Oe]=function(R){return I[Oe](R||"InternalLog")}}),v}return l.__ieDyn=1,l}(Xm),Av=Xa({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),nv=Xa({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),iv=Xa({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),av=Xa({Normal:1,Critical:2}),_u=Xa({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),ov=function(){function o(l){var v=this,b={},I=[],R=[];l&&R.push(l);function L(K,re){var Q,ae=b[K];if(ae&&(Q=ae[re]),!Q&&Q!==null){if(Xt(K)&&Xt(re))if(R[tr]>0){for(var ie=0;ie<R[tr];ie++)if(R[ie][Lr](K,re)){Q={canHandle:!0,fieldHandler:R[ie]};break}}else I[tr]===0&&(Q={canHandle:!0});if(!Q&&Q!==null){Q=null;for(var ie=0;ie<I[tr];ie++)if(I[ie][Lr](K,re)){Q={canHandle:!0,handler:I[ie],fieldHandler:null};break}}ae||(ae=b[K]={}),ae[re]=Q}return Q}v.clearCache=function(){b={}},v.addSanitizer=function(K){K&&(_p(I,K)||I.push(K),b={})},v.addFieldSanitizer=function(K){K&&(_p(R,K)||R.push(K),b={})},v[dn]=function(K){if(K){var re=Ri(I,K);re!==-1&&(I.splice(re,1),b={}),_t(I,function(Q){Q&&Q[dn]&&Q[dn](K)})}},v[sn]=function(K){if(K){var re=Ri(R,K);re!==-1&&(R.splice(re,1),b={}),_t(I,function(Q){Q&&Q[sn]&&Q[sn](K)})}},v.isEmpty=function(){return Js(I)+Js(R)===0},v[Lr]=function(K,re){var Q=L(K,re);return Q?Q[Qn]:!1},v[ze]=function(K,re,Q,ae){var ie=L(K,re);if(ie&&ie[Qn]){if(!ie||!ie[Qn])return null;if(ie.handler)return ie.handler[ze](K,re,Q,ae);if(!Xt(re)||ut(Q)||Q===Xe)return null;var we=null,xe=Bs(Q);if((xe&8192)===8192){var Ye=xe&-8193;if(we=Q,!Fn(we[ze])||Ye!==1&&Ye!==2&&Ye!==3&&(Ye&4096)!==4096)return null}else xe===1||xe===2||xe===3||(xe&4096)===4096?we=F(K,re,Q):xe===4&&(we=F(K,re,ae?JSON.stringify(Q):Q));if(we)return O(ie,K,re,xe,we,ae)}return null},v.property=function(K,re,Q,ae){var ie=L(K,re);if(!ie||!ie[Qn]||!Xt(re)||ut(Q)||!Fn(Q[ze]))return null;var we=Bs(Q[ze]);return we===0?null:O(ie,K,re,we,Q,ae)};function O(K,re,Q,ae,ie,we){if(K.handler)return K.handler.property(re,Q,ie,we);if(!ut(ie[Kt])){if((ae&4096)===4096||!On(ie[Kt]))return null;ie[ze]=ie[ze].toString()}return B(K.fieldHandler,re,Q,ae,ie)}function F(K,re,Q){return Fn(Q)?{value:Q}:null}function B(K,re,Q,ae,ie){if(ie&&K){var we=K.getSanitizer(re,Q,ae,ie[Kt],ie.propertyType);if(we)if(ae===4){var xe={},Ye=ie[ze];jr(Ye,function(ot,Vt){var Nr=re+"."+Q;if(Fn(Vt)){var Ei=F(Nr,ot,Vt);Ei=B(K,Nr,ot,Bs(Vt),Ei),Ei&&(xe[ot]=Ei[ze])}}),ie[ze]=xe}else{var it={path:re,name:Q,type:ae,prop:ie,sanitizer:v};ie=we.call(v,it)}}return ie}}return o.getFieldType=Bs,o}();t.ActiveStatus=bn,t.AppInsightsCore=rv,t.BaseTelemetryPlugin=mg,t.DiagnosticLogger=Yc,t.EventLatency=nv,t.EventPersistence=av,t.EventPropertyType=iv,t.EventsDiscardedReason=Pu,t.FullVersionString=st,t.InternalAppInsightsCore=Xm,t.LoggingSeverity=Pe,t.MinChannelPriorty=vd,t.NotificationManager=Hl,t.PerfEvent=Ju,t.PerfManager=Qh,t.ProcessTelemetryContext=Ku,t.SenderPostManager=Qm,t.TraceLevel=_u,t.Undefined=n,t.ValueKind=Av,t.ValueSanitizer=ov,t.Version=Vi,t._InternalLogMessage=Ul,t.__getRegisteredEvents=Rv,t._appendHeader=Ac,t._getAllResponseHeaders=Vo,t._logInternalMessage=Vh,t._testHookMaxUnloadHooksCb=Jm,t._throwInternal=on,t._warnToConsole=Ms,t.addEventHandler=ep,t.addEventListeners=N,t.addPageHideEventListener=z,t.addPageShowEventListener=ce,t.addPageUnloadEventListener=M,t.areCookiesSupported=Hn,t.arrForEach=_t,t.arrIndexOf=Ri,t.arrMap=Iu,t.arrReduce=Dn,t.attachEvent=ay,t.blockDynamicConversion=Wp,t.convertAllHeadersToMap=ju,t.cookieAvailable=Hn,t.createCookieMgr=Fs,t.createDynamicConfig=Hi,t.createEnumStyle=Xa,t.createGuid=Qo,t.createProcessTelemetryContext=Jt,t.createTraceParent=hr,t.createUniqueNamespace=lu,t.createUnloadHandlerContainer=Us,t.dateNow=Nu,t.detachEvent=sh,t.disallowsSameSiteNone=ao,t.doPerf=p,t.dumpObj=Qt,t.eventOff=ai,t.eventOn=Qd,t.extend=zc,t.findW3cTraceParent=Mn,t.forceDynamicConversion=Ko,t.formatErrorMessageXdr=Cf,t.formatErrorMessageXhr=Nl,t.formatTraceParent=Lt,t.generateW3CId=k,t.getCommonSchemaMetaData=uh,t.getConsole=Of,t.getCookieValue=gu,t.getCrypto=Bu,t.getDocument=da,t.getDynamicConfigHandler=zp,t.getExceptionName=xs,t.getFieldValueType=Bs,t.getGlobal=sd,t.getGlobalInst=vn,t.getHistory=fo,t.getIEVersion=Am,t.getISOString=Ts,t.getJSON=Li,t.getLocation=cu,t.getMsCrypto=Od,t.getNavigator=Oa,t.getPerformance=Ja,t.getResponseText=uu,t.getSetValue=Nf,t.getTenantId=Un,t.getTime=Si,t.getWindow=fi,t.hasDocument=of,t.hasHistory=sf,t.hasJSON=Ds,t.hasNavigator=Nh,t.hasOwnProperty=Xr,t.hasWindow=mp,t.isArray=mr,t.isArrayValid=Wc,t.isBeaconsSupported=jh,t.isBoolean=qn,t.isChromium=Wf,t.isDate=Ci,t.isDocumentObjectAvailable=xn,t.isError=Ot,t.isFetchSupported=Pm,t.isFunction=fr,t.isGreaterThanZero=rp,t.isIE=$u,t.isLatency=Qu,t.isNotTruthy=tt,t.isNullOrUndefined=ut,t.isNumber=Fr,t.isObject=Ni,t.isReactNative=kl,t.isSampledFlag=Mr,t.isString=Xt,t.isTruthy=An,t.isTypeof=mn,t.isUint8ArrayAvailable=wa,t.isUndefined=lt,t.isValidSpanId=Ht,t.isValidTraceId=cr,t.isValidTraceParent=Pr,t.isValueAssigned=Fn,t.isValueKind=On,t.isWindowObjectAvailable=Et,t.isXhrSupported=Af,t.mergeEvtNamespace=Xn,t.newGuid=S,t.newId=Lm,t.normalizeJsName=su,t.objDefineAccessors=nd,t.objForEachKey=jr,t.objFreeze=ki,t.objKeys=Zi,t.objSeal=us,t.onConfigChange=Fd,t.openXhr=Jf,t.optimizeObject=Cd,t.parseResponse=Yr,t.parseTraceParent=ht,t.perfNow=pf,t.prependTransports=kf,t.proxyAssign=Is,t.proxyFunctionAs=Eo,t.proxyFunctions=Il,t.random32=Ol,t.randomValue=Mm,t.removeEventHandler=h,t.removeEventListeners=D,t.removePageHideEventListener=ne,t.removePageShowEventListener=fe,t.removePageUnloadEventListener=H,t.safeGetCookieMgr=Xo,t.safeGetLogger=$c,t.sanitizeProperty=js,t.setEnableEnvMocks=ra,t.setProcessTelemetryTimings=tp,t.setValue=no,t.strContains=wt,t.strEndsWith=fd,t.strFunction=e,t.strObject=r,t.strPrototype=i,t.strStartsWith=Nm,t.strTrim=Qi,t.strUndefined=n,t.throwError=ji,t.toISOString=Ts,t.useXDomainRequest=Dl})});var iN=gt((Ew,nN)=>{(function(t,e){typeof Ew=="object"&&typeof nN<"u"?e(Ew):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.oneDS=t.oneDS||{}))})(Ew,function(t){"use strict";var e="REAL_TIME",r="NEAR_REAL_TIME",n="BEST_EFFORT",i="function",a="object",u="undefined",f="prototype",m=Object,y=m[f];function x(h,w){return h||w}function P(h,w){return h[w]}var V=void 0,G=null,Y="",q="function",J="object",ee="prototype",ve="__proto__",ye="undefined",ue="constructor",_e="Symbol",Ue="_polyfill",$e="length",Ke="name",ct="call",vt="toString",wr=x(Object),$r=P(wr,ee),Ne=x(String),dt=P(Ne,ee),Or=x(Math),Ze=x(Array),yn=P(Ze,ee),Le=P(yn,"slice");function qt(h,w){try{return{v:h.apply(this,w)}}catch(N){return{e:N}}}function Wt(h){return function(w){return typeof w===h}}function Tt(h){return typeof h===ye||h===ye}function mn(h){return!ut(h)}function lt(h){return h===G||Tt(h)}function ti(h){return h===G||!ut(h)}function ut(h){return!!h||h!==V}var Su=Wt("string"),er=Wt(q);function Ya(h){return!h&&lt(h)?!1:!!h&&typeof h===J}var Xt=P(Ze,"isArray"),fr=Wt("number"),Ni=Wt("boolean");function mr(h){return!!(h&&h.then&&er(h.then))}var Ci=P(wr,"getOwnPropertyDescriptor");function Fr(h,w){return!!h&&$r.hasOwnProperty[ct](h,w)}var qn=x(P(wr,"hasOwn"),Ot);function Ot(h,w){return Fr(h,w)||!!Ci(h,w)}function Ur(h,w,N){if(h&&Ya(h)){for(var D in h)if(qn(h,D)&&w[ct](N||h,D,h[D])===-1)break}}var tt={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function An(h){var w={};if(w[tt.c]=!0,w[tt.e]=!0,h.l){w.get=function(){return h.l.v};var N=Ci(h.l,"v");N&&N.set&&(w.set=function(D){h.l.v=D})}return Ur(h,function(D,M){w[tt[D]]=mn(M)?w[tt[D]]:M}),w}var Gr=P(wr,"defineProperty");function Xr(h,w,N){return Gr(h,w,An(N))}function Ia(h,w,N,D,M){var H={};return Ur(h,function(z,ne){Ui(H,z,w?ne:z,M),Ui(H,ne,N?ne:z,M)}),D?D(H):H}function Ui(h,w,N,D){Gr(h,w,{value:N,enumerable:!0,writable:!!D})}var jr=x(Ne),ar="[object Error]";function br(h,w){var N=Y,D=$r[vt][ct](h);D===ar&&(h={stack:jr(h.stack),message:jr(h.message),name:jr(h.name)});try{N=JSON.stringify(h,G,w?typeof w=="number"?w:4:V),N=(N?N.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):G)||jr(h)}catch(M){N=" - "+br(M,w)}return D+": "+N}function cn(h){throw new TypeError(h)}var nd=P(wr,"freeze");function ri(h){return h}function id(h){return h[ve]||G}var Eu=P(wr,"assign"),Cn=P(wr,"keys");function os(h){return nd&&Ur(h,function(w,N){(Xt(N)||Ya(N))&&os(N)}),Qt(h)}var Qt=x(nd,ri),ji=x(P(wr,"getPrototypeOf"),id);function qa(h){return Ia(h,1,0,Qt)}function ss(h){return Ia(h,0,0,Qt)}var Na=ss({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),ad="__tsUtils$gblCfg",sc;function Zi(){var h;return typeof globalThis!==ye&&(h=globalThis),!h&&typeof self!==ye&&(h=self),!h&&typeof window!==ye&&(h=window),!h&&typeof global!==ye&&(h=global),h}function Ca(){if(!sc){var h=qt(Zi).v||{};sc=h[ad]=h[ad]||{}}return sc}var ki=us;function us(h,w,N){var D=w?w[h]:G;return function(M){var H=(M?M[h]:G)||D;if(H||N){var z=arguments;return(H||N).apply(M,H?Le[ct](z,1):z)}cn('"'+jr(h)+'" not defined for '+br(M))}}var Vs=P(Or,"max"),ui=ki("slice",dt),uc=ki("substring",dt),Gs=us("substr",dt,ka);function ka(h,w,N){return lt(h)&&cn("Invalid "+br(h)),N<0?Y:(w=w||0,w<0&&(w=Vs(w+h[$e],0)),Tt(N)?ui(h,w):ui(h,w,w+N))}function ni(h,w){return uc(h,0,w)}var al="_urid",zs;function ci(){if(!zs){var h=Ca();zs=h.gblSym=h.gblSym||{k:{},s:{}}}return zs}var ca;function vr(h){var w={description:jr(h),toString:function(){return _e+"("+h+")"}};return w[Ue]=!0,w}function kn(h){var w=ci();if(!qn(w.k,h)){var N=vr(h),D=Cn(w.s).length;N[al]=function(){return D+"_"+N[vt]()},w.k[h]=N,w.s[N[al]()]=jr(h)}return w.k[h]}function Da(h){!ca&&(ca={});var w,N=Na[h];return N&&(w=ca[N]=ca[N]||vr(_e+"."+N)),w}var Qr;function _i(){Qr=Ca()}function Ha(h){return Gr({toJSON:function(){return h}},"v",{value:h})}var en="window",la;function Tu(h,w){var N;return function(){return!Qr&&_i(),(!N||Qr.lzy)&&(N=Ha(qt(h,w).v)),N.v}}function fa(h){return!Qr&&_i(),(!la||h===!1||Qr.lzy)&&(la=Ha(qt(Zi).v||G)),la.v}function wn(h,w){var N;if(!la||w===!1?N=fa(w):N=la.v,N&&N[h])return N[h];if(h===en)try{return window}catch{}return G}var li=Tu(wn,["document"]);function cc(){return!!Ra()}var Ra=Tu(wn,[en]);function Ar(){return!!Di()}var Di=Tu(wn,["navigator"]),od=Tu(function(){return!!qt(function(){return process&&(process.versions||{}).node}).v}),Bi,cs;function ol(){return Bi=Ha(qt(wn,[_e]).v),Bi}function ls(h){var w=(Qr.lzy?0:Bi)||ol();return w.v?w.v[h]:V}function sd(){return!!vn()}function vn(){return!Qr&&_i(),((Qr.lzy?0:Bi)||ol()).v}function of(h,w){var N=Na[h];!Qr&&_i();var D=(Qr.lzy?0:Bi)||ol();return D.v?D.v[N||h]:w?V:Da(h)}function da(h,w){!Qr&&_i();var N=(Qr.lzy?0:Bi)||ol();return N.v?N.v(h):w?G:vr(h)}function mp(h){return!Qr&&_i(),cs=(Qr.lzy?0:cs)||Ha(qt(ls,["for"]).v),(cs.v||kn)(h)}function fi(h){return!!h&&er(h.next)}function Nh(h){return!ti(h)&&er(h[of(3)])}var Oa;function sf(h,w,N){if(h&&(fi(h)||(!Oa&&(Oa=Ha(of(3))),h=h[Oa.v]?h[Oa.v]():G),fi(h))){var D=V,M=V;try{for(var H=0;!(M=h.next()).done&&w[ct](N||h,M.value,H,h)!==-1;)H++}catch(z){D={e:z},h.throw&&(M=G,h.throw(D))}finally{try{M&&!M.done&&h.return&&h.return(M)}finally{if(D)throw D.e}}}}function fo(h,w,N){return h.apply(w,N)}function ud(h,w){return!Tt(w)&&h&&(Xt(w)?fo(h.push,h,w):fi(w)||Nh(w)?sf(w,function(N){h.push(N)}):h.push(w)),h}function Ir(h,w,N){if(h)for(var D=h[$e]>>>0,M=0;M<D&&!(M in h&&w[ct](N||h,h[M],M,h)===-1);M++);}var fs=ki("indexOf",yn);function cd(h,w,N){return((h?h.slice:G)||Le).apply(h,Le[ct](arguments,1))}var Xi=x(P(wr,"create"),sl);function sl(h){if(!h)return{};var w=typeof h;w!==J&&w!==q&&cn("Prototype must be an Object or function: "+br(h));function N(){}return N[ee]=h,new N}var jt;function Aa(h,w){var N=wr.setPrototypeOf||function(D,M){var H;!jt&&(jt=Ha((H={},H[ve]=[],H instanceof Array))),jt.v?D[ve]=M:Ur(M,function(z,ne){return D[z]=ne})};return N(h,w)}function lc(h,w,N){qt(Xr,[w,Ke,{v:h,c:!0,e:!1}]),w=Aa(w,N);function D(){this[ue]=w,qt(Xr,[this,Ke,{v:h,c:!0,e:!1}])}return w[ee]=N===G?Xi(N):(D[ee]=N[ee],new D),w}function uf(h,w){w&&(h[Ke]=w)}function xm(h,w,N){var D=N||Error,M=D[ee][Ke],H=Error.captureStackTrace;return lc(h,function(){var z=this,ne=arguments;try{qt(uf,[D,h]);var ce=fo(D,z,Le[ct](ne))||z;if(ce!==z){var fe=ji(z);fe!==ji(ce)&&Aa(ce,fe)}return H&&H(ce,z[ue]),w&&w(ce,ne),ce}finally{qt(uf,[D,M])}},D)}function Va(){return(Date.now||cf)()}function cf(){return new Date().getTime()}function vp(h){return function(N){return lt(N)&&cn("strTrim called ["+br(N)+"]"),N&&N.replace&&(N=N.replace(h,Y)),N}}var xu=vp(/^\s+|(?=\s)\s+$/g),Ga=us("trim",dt,xu),_t,Ri,Iu;function Ws(h){if(!h||typeof h!==J)return!1;Iu||(Iu=cc()?Ra():!0);var w=!1;if(h!==Iu){Ri||(_t=Function[ee][vt],Ri=_t[ct](wr));try{var N=ji(h);w=!N,w||(Fr(N,ue)&&(N=N[ue]),w=!!(N&&typeof N===q&&_t[ct](N)===Ri))}catch{}}return w}function gp(){return Va()}var _p=ki("indexOf",dt),Dn=us("startsWith",dt,Pa);function Pa(h,w,N){Su(h)||cn("'"+br(h)+"' is not a string");var D=Su(w)?w:jr(w),M=N>0?N:0;return uc(h,M,M+D[$e])===D}var yp="ref",za="unref",pa="hasRef",bv="enabled";function Im(h,w,N){var D=!0,M=h?w(G):G,H;function z(){return D=!1,M&&M[za]&&M[za](),H}function ne(){M&&N(M),M=G}function ce(){return M=w(M),D||z(),H}function fe(Pe){!Pe&&M&&ne(),Pe&&!M&&ce()}return H={cancel:ne,refresh:ce},H[pa]=function(){return M&&M[pa]?M[pa]():D},H[yp]=function(){return D=!0,M&&M[yp]&&M[yp](),H},H[za]=z,H=Gr(H,bv,{get:function(){return!!M},set:fe}),{h:H,dn:function(){M=G}}}function Ch(h,w,N){var D=Xt(w),M=D?w.length:0,H=(M>0?w[0]:D?V:w)||setTimeout,z=(M>1?w[1]:V)||clearTimeout,ne=N[0];N[0]=function(){ce.dn(),fo(ne,V,Le[ct](arguments))};var ce=Im(h,function(fe){if(fe){if(fe.refresh)return fe.refresh(),fe;fo(z,V,[fe])}return fo(H,V,N)},function(fe){fo(z,V,[fe])});return ce.h}function Nu(h,w){return Ch(!0,V,Le[ct](arguments))}function kh(h,w,N){return Ch(!0,h,Le[ct](arguments,1))}(fa()||{}).Symbol,(fa()||{}).Reflect;var dg="hasOwnProperty",wp=function(h,w){return wp=m.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,D){N.__proto__=D}||function(N,D){for(var M in D)D[dg](M)&&(N[M]=D[M])},wp(h,w)};function Qi(h,w){typeof w!==i&&w!==null&&cn("Class extends value "+String(w)+" is not a constructor or null"),wp(h,w);function N(){this.constructor=h}h[f]=w===null?Xi(w):(N[f]=w[f],new N)}var lf,ff="constructor",po="prototype",Ma="function",Cu="_dynInstFuncs",Dh="_isDynProxy",Wa="_dynClass",bp="_dynCls$",ku="_dynInstChk",ul=ku,df="_dfOpts",ld="_unknown_",Sp="__proto__",Rh="_dyn"+Sp,Oh="__dynProto$Gbl",Du="_dynInstProto",Ep="useBaseInst",Js="setInstFuncs",fc=Object,Ja=fc.getPrototypeOf,pf=fc.getOwnPropertyNames,fd=fa(),cl=fd[Oh]||(fd[Oh]={o:(lf={},lf[Js]=!0,lf[Ep]=!0,lf),n:1e3});function ho(h){return h&&(h===fc[po]||h===Array[po])}function Nm(h){return ho(h)||h===Function[po]}function ds(h){var w;if(h){if(Ja)return Ja(h);var N=h[Sp]||h[po]||(h[ff]?h[ff][po]:null);w=h[Rh]||N,Fr(h,Rh)||(delete h[Du],w=h[Rh]=h[Du]||h[Rh],h[Du]=N)}return w}function Oo(h,w){var N=[];if(pf)N=pf(h);else for(var D in h)typeof D=="string"&&Fr(h,D)&&N.push(D);if(N&&N.length>0)for(var M=0;M<N.length;M++)w(N[M])}function mo(h,w,N){return w!==ff&&typeof h[w]===Ma&&(N||Fr(h,w))&&w!==Sp&&w!==po}function Ru(h){cn("DynamicProto: "+h)}function dd(h){var w=Xi(null);return Oo(h,function(N){!w[N]&&mo(h,N,!1)&&(w[N]=h[N])}),w}function ll(h,w){for(var N=h.length-1;N>=0;N--)if(h[N]===w)return!0;return!1}function fl(h,w,N,D){function M(ce,fe,Pe){var Xe=fe[Pe];if(Xe[Dh]&&D){var Qe=ce[Cu]||{};Qe[ul]!==!1&&(Xe=(Qe[fe[Wa]]||{})[Pe]||Xe)}return function(){return Xe.apply(ce,arguments)}}var H=Xi(null);Oo(N,function(ce){H[ce]=M(w,N,ce)});for(var z=ds(h),ne=[];z&&!Nm(z)&&!ll(ne,z);)Oo(z,function(ce){!H[ce]&&mo(z,ce,!Ja)&&(H[ce]=M(w,z,ce))}),ne.push(z),z=ds(z);return H}function dc(h,w,N,D){var M=null;if(h&&Fr(N,Wa)){var H=h[Cu]||Xi(null);if(M=(H[N[Wa]]||Xi(null))[w],M||Ru("Missing ["+w+"] "+Ma),!M[ku]&&H[ul]!==!1){for(var z=!Fr(h,w),ne=ds(h),ce=[];z&&ne&&!Nm(ne)&&!ll(ce,ne);){var fe=ne[w];if(fe){z=fe===D;break}ce.push(ne),ne=ds(ne)}try{z&&(h[w]=M),M[ku]=1}catch{H[ul]=!1}}}return M}function pd(h,w,N){var D=w[h];return D===N&&(D=ds(w)[h]),typeof D!==Ma&&Ru("["+h+"] is not a "+Ma),D}function hf(h,w,N,D,M){function H(ce,fe){var Pe=function(){var Xe=dc(this,fe,ce,Pe)||pd(fe,ce,Pe);return Xe.apply(this,arguments)};return Pe[Dh]=1,Pe}if(!ho(h)){var z=N[Cu]=N[Cu]||Xi(null);if(!ho(z)){var ne=z[w]=z[w]||Xi(null);z[ul]!==!1&&(z[ul]=!!M),ho(ne)||Oo(N,function(ce){mo(N,ce,!1)&&N[ce]!==D[ce]&&(ne[ce]=N[ce],delete N[ce],(!Fr(h,ce)||h[ce]&&!h[ce][Dh])&&(h[ce]=H(h,ce)))})}}}function hd(h,w){if(Ja){for(var N=[],D=ds(w);D&&!Nm(D)&&!ll(N,D);){if(D===h)return!0;N.push(D),D=ds(D)}return!1}return!0}function pc(h,w){return Fr(h,po)?h.name||w||ld:((h||{})[ff]||{}).name||w||ld}function vo(h,w,N,D){Fr(h,po)||Ru("theClass is an invalid class definition.");var M=h[po];hd(M,w)||Ru("["+pc(h)+"] not in hierarchy of ["+pc(w)+"]");var H=null;Fr(M,Wa)?H=M[Wa]:(H=bp+pc(h,"_")+"$"+cl.n,cl.n++,M[Wa]=H);var z=vo[df],ne=!!z[Ep];ne&&D&&D[Ep]!==void 0&&(ne=!!D[Ep]);var ce=dd(w),fe=fl(M,w,ce,ne);N(w,fe);var Pe=!!Ja&&!!z[Js];Pe&&D&&(Pe=!!D[Js]),hf(M,H,w,ce,Pe!==!1)}vo[df]=cl.o;var dl=qa,Ao=dl({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),La="toLowerCase",ps="blkVal",ln="length",Ks="rdOnly",go="notify",pl="warnToConsole",hl="throwInternal",hs="setDf",mf="watch",ms="logger",Ou="apply",ha="push",Tp="splice",hc="hdlr",ea="cancel",md="initialize",xp="identifier",vf="isInitialized",gf="value",Ip="getPlugin",Cm="name",mc="time",Po="processNext",_o="getProcessTelContext",Rn="unload",_f="loggingLevelConsole",vc="createNew",gc="teardown",Np="messageId",Ka="message",Au="isAsync",Zs="diagLog",dr="_doTeardown",Mo="update",vs="getNext",Za="setNextPlugin",vd="protocol",Xa="userAgent",Pu="split",bn="nodeType",ma="replace",Jr="logInternalMessage",yt="type",_c="handler",Lo="status",Xs="getResponseHeader",yo="getAllResponseHeaders",Mu="isChildEvt",Qa="data",tn="getCtx",Fo="setCtx",Kr="complete",Uo="urlString",gd="sendPOST",jo="headers",Zn="timeout",wo="setRequestHeader",gs;function $i(h,w){gs||(gs=xm("AggregationError",function(D,M){M[ln]>1&&(D.errors=M[1])}));var N=h||"One or more errors occurred.";throw Ir(w,function(D,M){N+=`
`.concat(M," > ").concat(br(D))}),new gs(N,w||[])}var ta="Promise",ml="rejected";function yc(h,w){return _d(h,function(N){return w?w({status:"fulfilled",rejected:!1,value:N}):N},function(N){return w?w({status:ml,rejected:!0,reason:N}):N})}function _d(h,w,N,D){var M=h;try{if(mr(h))(w||N)&&(M=h.then(w,N));else try{w&&(M=w(h))}catch(H){if(N)M=N(H);else throw H}}finally{D&&Qs(M,D)}return M}function Qs(h,w){var N=h;return w&&(mr(h)?h.finally?N=h.finally(w):N=h.then(function(D){return w(),D},function(D){throw w(),D}):w()),N}var Bo=["pending","resolving","resolved",ml],$o="dispatchEvent",wc;function Yo(h){var w;return h&&h.createEvent&&(w=h.createEvent("Event")),!!w&&w.initEvent}function ii(h,w,N,D){var M=li();!wc&&(wc=Ha(!!qt(Yo,[M]).v));var H=wc.v?M.createEvent("Event"):D?new Event(w):{};if(N&&N(H),wc.v&&H.initEvent(w,!1,!0),H&&h[$o])h[$o](H);else{var z=h["on"+w];if(z)z(H);else{var ne=wn("console");ne&&(ne.error||ne.log)(w,br(H))}}}var yd="unhandledRejection",bc=yd.toLowerCase(),eu=10,Fa;function _s(h){return er(h)?h.toString():br(h)}function tu(h,w,N){var D=cd(arguments,3),M=0,H=!1,z,ne=[],ce=!1,fe=null,Pe;function Xe(Oe,ze){try{ce=!0,fe&&fe.cancel(),fe=null;var Kt=h(function(tr,gr){ne.push(function(){try{var Lr=M===2?Oe:ze,dn=Tt(Lr)?z:er(Lr)?Lr(z):Lr;mr(dn)?dn.then(tr,gr):Lr?tr(dn):M===3?gr(dn):tr(dn)}catch(sn){gr(sn)}}),H&&Ve()},D);return Kt}finally{}}function Qe(Oe){return Xe(void 0,Oe)}function Re(Oe){var ze=Oe,Kt=Oe;return er(Oe)&&(ze=function(tr){return Oe&&Oe(),tr},Kt=function(tr){throw Oe&&Oe(),tr}),Xe(ze,Kt)}function Se(){return Bo[M]}function Ve(){if(ne.length>0){var Oe=ne.slice();ne=[],ce=!0,fe&&fe.cancel(),fe=null,w(Oe)}}function Ce(Oe,ze){return function(Kt){if(M===ze){if(Oe===2&&mr(Kt)){M=1,Kt.then(Ce(2,1),Ce(3,1));return}M=Oe,H=!0,z=Kt,Ve(),!ce&&Oe===3&&!fe&&(fe=Nu(nt,eu))}}}function nt(){if(!ce)if(ce=!0,od())process.emit(yd,z,Pe);else{var Oe=Ra()||fa();!Fa&&(Fa=Ha(qt(wn,[ta+"RejectionEvent"]).v)),ii(Oe,bc,function(ze){return Xr(ze,"promise",{g:function(){return Pe}}),ze.reason=z,ze},!!Fa.v)}}Pe={then:Xe,catch:Qe,finally:Re},Gr(Pe,"state",{get:Se}),sd()&&(Pe[of(11)]="IPromise");function Me(){return"IPromise "+Se()+(H?" - "+_s(z):"")}return Pe.toString=Me,function(){er(N)||cn(ta+": executor is not a function - "+_s(N));var ze=Ce(3,0);try{N.call(Pe,Ce(2,0),ze)}catch(Kt){ze(Kt)}}(),Pe}function eo(h){Ir(h,function(w){try{w()}catch{}})}function vl(h){var w=fr(h)?h:0;return function(N){Nu(function(){eo(N)},w)}}function Lu(h,w){return tu(Lu,vl(w),h,w)}var Oi;function Fu(h,w){!Oi&&(Oi=Ha(qt(wn,[ta]).v||null));var N=Oi.v;if(!N)return Lu(h);er(h)||cn(ta+": executor is not a function - "+br(h));var D=0;function M(){return Bo[D]}var H=new N(function(z,ne){function ce(Pe){D=2,z(Pe)}function fe(Pe){D=3,ne(Pe)}h(ce,fe)});return Gr(H,"state",{get:M}),H}var ru;function to(h,w){return!ru&&(ru=Ha(Fu)),ru.v.call(this,h,w)}var Sc=void 0,Sn="",yi="core",ro="disabled",Ec="extensionConfig",ys="processTelemetry",Cp="priority",Ua="getPerfMgr",gl="Not dynamic - ",Yi=/-([a-z])/g,wd=/([^\w\d_$])/g,va=/^(\d+[\w\d_$])/;function ws(h){return!lt(h)}function bs(h){var w=h;return w&&Su(w)&&(w=w[ma](Yi,function(N,D){return D.toUpperCase()}),w=w[ma](wd,"_"),w=w[ma](va,function(N,D){return"_"+D})),w}function kp(h,w){return h&&w?_p(h,w)!==-1:!1}function yf(h,w){var N=null,D=null;return er(h)?N=h:D=h,function(){var M=arguments;if(N&&(D=N()),D)return D[w][Ou](D,M)}}function bd(h,w,N,D,M){h&&w&&N&&(M!==!1||Tt(h[w]))&&(h[w]=yf(N,D))}function wf(h,w,N,D){return h&&w&&Ya(h)&&Xt(N)&&Ir(N,function(M){Su(M)&&bd(h,M,w,M,D)}),h}function qo(h){return h&&Eu&&(h=m(Eu({},h))),h}function ga(h){try{return h.responseText}catch{}return null}function _l(h,w){return h?"XDomainRequest,Response:"+ga(h)||"":w}function km(h,w){return h?"XMLHttpRequest,Status:"+h[Lo]+",Response:"+ga(h)||h.response||"":w}function Tc(h,w){return w&&(fr(w)?h=[w].concat(h):Xt(w)&&(h=w.concat(h))),h}var xc="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Ss="withCredentials",bf="timeout";function Sv(h,w,N,D,M,H){D===void 0&&(D=!1),M===void 0&&(M=!1);function z(ce,fe,Pe){try{ce[fe]=Pe}catch{}}var ne=new XMLHttpRequest;return D&&z(ne,xc,D),N&&z(ne,Ss,N),ne.open(h,w,!M),N&&z(ne,Ss,N),!M&&H&&z(ne,bf,H),ne}function Dp(h){var w={};if(Su(h)){var N=Ga(h)[Pu](/[\r\n]+/);Ir(N,function(D){if(D){var M=D.indexOf(": ");if(M!==-1){var H=Ga(D.substring(0,M))[La](),z=Ga(D.substring(M+1));w[H]=z}else w[Ga(D)]=1}})}return w}function Sf(h,w,N){if(!h[N]&&w&&w[Xs]){var D=w[Xs](N);D&&(h[N]=Ga(D))}return h}var Ic="kill-duration",Ah="kill-duration-seconds",Dm="time-delta-millis";function Nc(h,w){var N={};return h[yo]?N=Dp(h[yo]()):w&&(N=Sf(N,h,Dm),N=Sf(N,h,Ic),N=Sf(N,h,Ah)),N}var Rm="location",Ef="console",Rp="JSON",bo="crypto",Ph="msCrypto",Ev="ReactNative",Sd="msie",Mh="trident/",Op="XMLHttpRequest",yl=null,Ed=null,Cc=!1,nu=null,wl=null;function Om(h,w){var N=!1;if(h){try{if(N=w in h,!N){var D=h[f];D&&(N=w in D)}}catch{}if(!N)try{var M=new h;N=!Tt(M[w])}catch{}}return N}function Ap(h){if(h&&Cc){var w=wn("__mockLocation");if(w)return w}return typeof location===a&&location?location:wn(Rm)}function bl(){return typeof console!==u?console:wn(Ef)}function Pp(){return!!(typeof JSON===a&&JSON||wn(Rp)!==null)}function iu(){return Pp()?JSON||wn(Rp):null}function rn(){return wn(bo)}function kc(){return wn(Ph)}function Ai(){var h=Di();return h&&h.product?h.product===Ev:!1}function Mp(){var h=Di();if(h&&(h[Xa]!==Ed||yl===null)){Ed=h[Xa];var w=(Ed||Sn)[La]();yl=kp(w,Sd)||kp(w,Mh)}return yl}function Td(h){return(wl===null||h===!1)&&(wl=Ar()&&!!Di().sendBeacon),wl}function Sl(h){var w=!1;try{w=!!wn("fetch");var N=wn("Request");w&&h&&N&&(w=Om(N,"keepalive"))}catch{}return w}function Dc(){return nu===null&&(nu=typeof XDomainRequest!==u,nu&&_a()&&(nu=nu&&!Om(wn(Op),"withCredentials"))),nu}function _a(){var h=!1;try{var w=wn(Op);h=!!w}catch{}return h}var xd=4294967296,wi=4294967295,Sr=123456789,au=987654321,Pn=!1,Es=Sr,Rc=au;function Oc(h){h<0&&(h>>>=0),Es=Sr+h&wi,Rc=au-h&wi,Pn=!0}function ou(){try{var h=Va()&2147483647;Oc((Math.random()*xd^h)+h)}catch{}}function So(h){var w=0,N=rn()||kc();return N&&N.getRandomValues&&(w=N.getRandomValues(new Uint32Array(1))[0]&wi),w===0&&Mp()&&(Pn||ou(),w=Tf()&wi),w===0&&(w=Math.floor(xd*Math.random()|0)),h||(w>>>=0),w}function Tf(h){Rc=36969*(Rc&65535)+(Rc>>16)&wi,Es=18e3*(Es&65535)+(Es>>16)&wi;var w=(Rc<<16)+(Es&65535)>>>0&wi|0;return h||(w>>>=0),w}function Lh(h){h===void 0&&(h=22);for(var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=So()>>>0,D=0,M=Sn;M[ln]<h;)D++,M+=w.charAt(N&63),N>>>=6,D===5&&(N=(So()<<2&4294967295|N&3)>>>0,D=0);return M}var xf="3.3.5",Fh="."+Lh(6),If=0;function El(h){return h[bn]===1||h[bn]===9||!+h[bn]}function Lp(h,w){var N=w[h.id];if(!N){N={};try{El(w)&&Xr(w,h.id,{e:!1,v:N})}catch{}}return N}function di(h,w){return w===void 0&&(w=!1),bs(h+If+++(w?"."+xf:Sn)+Fh)}function Tl(h){var w={id:di("_aiData-"+(h||Sn)+"."+xf),accept:function(N){return El(N)},get:function(N,D,M,H){var z=N[w.id];return z?z[bs(D)]:(H&&(z=Lp(w,N),z[bs(D)]=M),M)},kill:function(N,D){if(N&&N[D])try{delete N[D]}catch{}}};return w}function Pi(h){return h&&Ya(h)&&(h.isVal||h.fb||qn(h,"v")||qn(h,"mrg")||qn(h,"ref")||h.set)}function Uu(h,w,N){var D,M=N.dfVal||ut;if(w&&N.fb){var H=N.fb;Xt(H)||(H=[H]);for(var z=0;z<H[ln];z++){var ne=H[z],ce=w[ne];if(M(ce)?D=ce:h&&(ce=h.cfg[ne],M(ce)&&(D=ce),h.set(h.cfg,jr(ne),ce)),M(D))break}}return!M(D)&&M(N.v)&&(D=N.v),D}function Fp(h,w,N){var D=N;if(N&&Pi(N)&&(D=Uu(h,w,N)),D){Pi(D)&&(D=Fp(h,w,D));var M;Xt(D)?(M=[],M[ln]=D[ln]):Ws(D)&&(M={}),M&&(Ur(D,function(H,z){z&&Pi(z)&&(z=Fp(h,w,z)),M[H]=z}),D=M)}return D}function Id(h,w,N,D){var M,H,z,ne=D,ce,fe,Pe,Xe;Pi(ne)?(M=ne.isVal,H=ne.set,Pe=ne[Ks],Xe=ne[ps],ce=ne.mrg,fe=ne.ref,!fe&&Tt(fe)&&(fe=!!ce),z=Uu(h,w,ne)):z=D,Xe&&h[ps](w,N);var Qe,Re=!0,Se=w[N];(Se||!lt(Se))&&(Qe=Se,Re=!1,M&&Qe!==z&&!M(Qe)&&(Qe=z,Re=!0),H&&(Qe=H(Qe,z,w),Re=Qe===z)),Re?z?Qe=Fp(h,w,z):Qe=z:(Ws(Qe)||Xt(z))&&ce&&z&&(Ws(z)||Xt(z))&&Ur(z,function(Ve,Ce){Id(h,Qe,Ve,Ce)}),h.set(w,N,Qe),fe&&h.ref(w,N),Pe&&h[Ks](w,N)}var Mi=mp("[[ai_dynCfg_1]]"),Nd=mp("[[ai_blkDynCfg_1]]"),Up=mp("[[ai_frcDynCfg_1]]");function su(h){if(h){var w;if(Xt(h)?(w=[],w[ln]=h[ln]):Ws(h)&&(w={}),w)return Ur(h,function(N,D){w[N]=su(D)}),w}return h}function wt(h){if(h){var w=h[Mi]||h;if(w.cfg&&(w.cfg===h||w.cfg[Mi]===w))return w}return null}function Ts(h){if(h&&(Ws(h)||Xt(h)))try{h[Nd]=!0}catch{}return h}function xs(h,w,N){var D=!1;return N&&!h[w.blkVal]&&(D=N[Up],!D&&!N[Nd]&&(D=Ws(N)||Xt(N))),D}function no(h){cn("InvalidAccess:"+h)}var Nf=["push","pop","shift","unshift","splice"],xl=function(h,w,N,D){h&&h[hl](3,108,"".concat(N," [").concat(w,"] failed - ")+br(D))};function Is(h,w,N){Xt(w)&&Ir(Nf,function(D){var M=w[D];w[D]=function(){for(var H=[],z=0;z<arguments.length;z++)H[z]=arguments[z];var ne=M[Ou](this,H);return Cf(h,w,N,"Patching"),ne}})}function Eo(h,w){var N=Ci(h,w);return N&&N.get}function Il(h,w,N,D){var M={n:N,h:[],trk:function(fe){fe&&fe.fn&&(fs(M.h,fe)===-1&&M.h[ha](fe),h.trk(fe,M))},clr:function(fe){var Pe=fs(M.h,fe);Pe!==-1&&M.h[Tp](Pe,1)}},H=!0,z=!1;function ne(){H&&(z=z||xs(ne,h,D),D&&!D[Mi]&&z&&(D=Cf(h,D,N,"Converting")),H=!1);var fe=h.act;return fe&&M.trk(fe),D}ne[h.prop]={chng:function(){h.add(M)}};function ce(fe){if(D!==fe){ne[h.ro]&&!h.upd&&no("["+N+"] is read-only:"+br(w)),H&&(z=z||xs(ne,h,D),H=!1);var Pe=z&&ne[h.rf];if(z)if(Pe){Ur(D,function(Qe){D[Qe]=fe?fe[Qe]:Sc});try{Ur(fe,function(Qe,Re){Cd(h,D,Qe,Re)}),fe=D}catch(Qe){xl((h.hdlr||{})[ms],N,"Assigning",Qe),z=!1}}else D&&D[Mi]&&Ur(D,function(Qe){var Re=Eo(D,Qe);if(Re){var Se=Re[h.prop];Se&&Se.chng()}});if(fe!==D){var Xe=fe&&xs(ne,h,fe);!Pe&&Xe&&(fe=Cf(h,fe,N,"Converting")),D=fe,z=Xe}h.add(M)}}Xr(w,M.n,{g:ne,s:ce})}function Cd(h,w,N,D){if(w){var M=Eo(w,N),H=M&&!!M[h.prop];H?w[N]=D:Il(h,w,N,D)}return w}function uu(h,w,N,D){if(w){var M=Eo(w,N),H=M&&!!M[h.prop],z=D&&D[0],ne=D&&D[1],ce=D&&D[2];if(!H){if(ce)try{Ts(w)}catch(fe){xl((h.hdlr||{})[ms],N,"Blocking",fe)}try{Cd(h,w,N,w[N]),M=Eo(w,N)}catch(fe){xl((h.hdlr||{})[ms],N,"State",fe)}}z&&(M[h.rf]=z),ne&&(M[h.ro]=ne),ce&&(M[h.blkVal]=!0)}return w}function Cf(h,w,N,D){try{Ur(w,function(M,H){Cd(h,w,M,H)}),w[Mi]||(Gr(w,Mi,{get:function(){return h[hc]}}),Is(h,w,N))}catch(M){xl((h.hdlr||{})[ms],N,D,M)}return w}var Nl="[[ai_",kf="]]";function jp(h){var w,N=da(Nl+"get"+h.uid+kf),D=da(Nl+"ro"+h.uid+kf),M=da(Nl+"rf"+h.uid+kf),H=da(Nl+"blkVal"+h.uid+kf),z=da(Nl+"dtl"+h.uid+kf),ne=null,ce=null,fe;function Pe(Se,Ve){var Ce=fe.act;try{fe.act=Se,Se&&Se[z]&&(Ir(Se[z],function(Me){Me.clr(Se)}),Se[z]=[]),Ve({cfg:h.cfg,set:h.set.bind(h),setDf:h[hs].bind(h),ref:h.ref.bind(h),rdOnly:h[Ks].bind(h)})}catch(Me){var nt=h[ms];throw nt&&nt[hl](1,107,br(Me)),Me}finally{fe.act=Ce||null}}function Xe(){if(ne){var Se=ne;ne=null,ce&&ce[ea](),ce=null;var Ve=[];if(Ir(Se,function(Ce){if(Ce&&(Ce[z]&&(Ir(Ce[z],function(nt){nt.clr(Ce)}),Ce[z]=null),Ce.fn))try{Pe(Ce,Ce.fn)}catch(nt){Ve[ha](nt)}}),ne)try{Xe()}catch(Ce){Ve[ha](Ce)}Ve[ln]>0&&$i("Watcher error(s): ",Ve)}}function Qe(Se){if(Se&&Se.h[ln]>0){ne||(ne=[]),ce||(ce=Nu(function(){ce=null,Xe()},0));for(var Ve=0;Ve<Se.h[ln];Ve++){var Ce=Se.h[Ve];Ce&&fs(ne,Ce)===-1&&ne[ha](Ce)}}}function Re(Se,Ve){if(Se){var Ce=Se[z]=Se[z]||[];fs(Ce,Ve)===-1&&Ce[ha](Ve)}}return fe=(w={prop:N,ro:D,rf:M},w[ps]=H,w[hc]=h,w.add=Qe,w[go]=Xe,w.use=Pe,w.trk=Re,w),fe}function Bp(h,w){var N={fn:w,rm:function(){N.fn=null,h=null,w=null}};return Xr(N,"toJSON",{v:function(){return"WatcherHandler"+(N.fn?"":"[X]")}}),h.use(N,w),N}function Uh(h,w,N){var D,M=wt(w);if(M)return M;var H=di("dyncfg",!0),z=w&&N!==!1?w:su(w),ne;function ce(){ne[go]()}function fe(nt,Me,Oe){try{nt=Cd(ne,nt,Me,Oe)}catch(ze){xl(h,Me,"Setting value",ze)}return nt[Me]}function Pe(nt){return Bp(ne,nt)}function Xe(nt,Me){ne.use(null,function(Oe){var ze=ne.upd;try{Tt(Me)||(ne.upd=Me),nt(Oe)}finally{ne.upd=ze}})}function Qe(nt,Me){var Oe;return uu(ne,nt,Me,(Oe={},Oe[0]=!0,Oe))[Me]}function Re(nt,Me){var Oe;return uu(ne,nt,Me,(Oe={},Oe[1]=!0,Oe))[Me]}function Se(nt,Me){var Oe;return uu(ne,nt,Me,(Oe={},Oe[2]=!0,Oe))[Me]}function Ve(nt,Me){return Me&&Ur(Me,function(Oe,ze){Id(Ce,nt,Oe,ze)}),nt}var Ce=(D={uid:null,cfg:z},D[ms]=h,D[go]=ce,D.set=fe,D[hs]=Ve,D[mf]=Pe,D.ref=Qe,D[Ks]=Re,D[ps]=Se,D._block=Xe,D);return Xr(Ce,"uid",{c:!1,e:!1,w:!1,v:H}),ne=jp(Ce),Cf(ne,z,"config","Creating"),Ce}function $p(h,w){h?(h[pl](w),h[hl](2,108,w)):no(w)}function ju(h,w,N,D){var M=Uh(N,h||{},D);return w&&M[hs](M.cfg,w),M}function Ac(h,w,N){var D=h[Mi]||h;return D.cfg&&(D.cfg===h||D.cfg[Mi]===D)?D[mf](w):($p(N,gl+br(h)),ju(h,null,N)[mf](w))}var Df="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Ho=null;function Ns(){var h=wn("Microsoft");return h&&(Ho=h.ApplicationInsights),Ho}function Vo(h){var w=Ho;return!w&&h.disableDbgExt!==!0&&(w=Ho||Ns()),w?w.ChromeDbgExt:null}var Go,Pc="warnToConsole",Yp="AI (Internal): ",Mc="AI: ",qp="AITR_",Hp={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},kd=(Go={},Go[0]=null,Go[1]="errorToConsole",Go[2]=Pc,Go[3]="debugToConsole",Go);function Cs(h){return h?'"'+h[ma](/\"/g,Sn)+'"':Sn}function zo(h,w){var N=bl();if(N){var D="log";N[h]&&(D=h),er(N[D])&&N[D](w)}}var Wo=function(){function h(w,N,D,M){D===void 0&&(D=!1);var H=this;H[Np]=w,H[Ka]=(D?Mc:Yp)+w;var z=Sn;Pp()&&(z=iu().stringify(M));var ne=(N?" message:"+Cs(N):Sn)+(M?" props:"+Cs(z):Sn);H[Ka]+=ne}return h.dataType="MessageData",h}();function Dd(h,w){return(h||{})[ms]||new Rf(w)}var Rf=function(){function h(w){this.identifier="DiagnosticLogger",this.queue=[];var N=0,D={},M,H,z,ne,ce;vo(h,this,function(fe){ce=Xe(w||{}),fe.consoleLoggingLevel=function(){return M},fe[hl]=function(Se,Ve,Ce,nt,Me){Me===void 0&&(Me=!1);var Oe=new Wo(Ve,Ce,Me,nt);if(ne)throw br(Oe);var ze=kd[Se]||Pc;if(Tt(Oe[Ka]))Re("throw"+(Se===1?"Critical":"Warning"),Oe);else{if(Me){var Kt=+Oe[Np];!D[Kt]&&M>=Se&&(fe[ze](Oe[Ka]),D[Kt]=!0)}else M>=Se&&fe[ze](Oe[Ka]);Pe(Se,Oe)}},fe.debugToConsole=function(Se){zo("debug",Se),Re("warning",Se)},fe[pl]=function(Se){zo("warn",Se),Re("warning",Se)},fe.errorToConsole=function(Se){zo("error",Se),Re("error",Se)},fe.resetInternalMessageCount=function(){N=0,D={}},fe[Jr]=Pe,fe[Rn]=function(Se){ce&&ce.rm(),ce=null};function Pe(Se,Ve){if(!Qe()){var Ce=!0,nt=qp+Ve[Np];if(D[nt]?Ce=!1:D[nt]=!0,Ce&&(Se<=H&&(fe.queue[ha](Ve),N++,Re(Se===1?"error":"warn",Ve)),N===z)){var Me="Internal events throttle limit per PageView reached for this app.",Oe=new Wo(23,Me,!1);fe.queue[ha](Oe),Se===1?fe.errorToConsole(Me):fe[pl](Me)}}}function Xe(Se){return Ac(ju(Se,Hp,fe).cfg,function(Ve){var Ce=Ve.cfg;M=Ce[_f],H=Ce.loggingLevelTelemetry,z=Ce.maxMessageLimit,ne=Ce.enableDebug})}function Qe(){return N>=z}function Re(Se,Ve){var Ce=Vo(w||{});Ce&&Ce[Zs]&&Ce[Zs](Se,Ve)}})}return h.__ieDyn=1,h}();function Cl(h){return h||new Rf}function qi(h,w,N,D,M,H){H===void 0&&(H=!1),Cl(h)[hl](w,N,D,M,H)}function ks(h,w){Cl(h)[pl](w)}var Rd="ctx",ra="ParentContextKey",cu="ChildrenContextKey",Of=function(){function h(w,N,D){var M=this;if(M.start=Va(),M[Cm]=w,M[Au]=D,M[Mu]=function(){return!1},er(N)){var H;Xr(M,"payload",{g:function(){return!H&&er(N)&&(H=N(),N=null),H}})}M[tn]=function(z){return z?z===h[ra]||z===h[cu]?M[z]:(M[Rd]||{})[z]:null},M[Fo]=function(z,ne){if(z)if(z===h[ra])M[z]||(M[Mu]=function(){return!0}),M[z]=ne;else if(z===h[cu])M[z]=ne;else{var ce=M[Rd]=M[Rd]||{};ce[z]=ne}},M[Kr]=function(){var z=0,ne=M[tn](h[cu]);if(Xt(ne))for(var ce=0;ce<ne[ln];ce++){var fe=ne[ce];fe&&(z+=fe[mc])}M[mc]=Va()-M.start,M.exTime=M[mc]-z,M[Kr]=function(){}}}return h.ParentContextKey="parent",h.ChildrenContextKey="childEvts",h}(),Ds="CoreUtils.doPerf";function Li(h,w,N,D,M){if(h){var H=h;if(H[Ua]&&(H=H[Ua]()),H){var z=void 0,ne=H[tn](Ds);try{if(z=H.create(w(),D,M),z){if(ne&&z[Fo]&&(z[Fo](Of[ra],ne),ne[tn]&&ne[Fo])){var ce=ne[tn](Of[cu]);ce||(ce=[],ne[Fo](Of[cu],ce)),ce[ha](z)}return H[Fo](Ds,z),N(z)}}catch(fe){z&&z[Fo]&&z[Fo]("exception",fe)}finally{z&&H.fire(z),H[Fo](Ds,ne)}}}return N()}var Bu=Tl("plugin");function Od(h){return Bu.get(h,"state",{},!0)}var kl="TelemetryPluginChain",$u="_hasRun",Am="_getTelCtx",jh=0;function Pm(h,w,N){for(;h;){if(h[Ip]()===N)return h;h=h[vs]()}return Ad([N],w.config||{},w)}function Dl(h,w,N,D){var M=null,H=[];w||(w=ju({},null,N[ms])),D!==null&&(M=D?Pm(h,N,D):h);var z={_next:ce,ctx:{core:function(){return N},diagLog:function(){return Dd(N,w.cfg)},getCfg:function(){return w.cfg},getExtCfg:Pe,getConfig:Xe,hasNext:function(){return!!M},getNext:function(){return M},setNext:function(Re){M=Re},iterate:Qe,onComplete:ne}};function ne(Re,Se){for(var Ve=[],Ce=2;Ce<arguments.length;Ce++)Ve[Ce-2]=arguments[Ce];Re&&H[ha]({func:Re,self:Tt(Se)?z.ctx:Se,args:Ve})}function ce(){var Re=M;if(M=Re?Re[vs]():null,!Re){var Se=H;Se&&Se[ln]>0&&(Ir(Se,function(Ve){try{Ve.func.call(Ve.self,Ve.args)}catch(Ce){qi(N[ms],2,73,"Unexpected Exception during onComplete - "+br(Ce))}}),H=[])}return Re}function fe(Re,Se){var Ve=null,Ce=w.cfg;if(Ce&&Re){var nt=Ce[Ec];!nt&&Se&&(nt={}),Ce[Ec]=nt,nt=w.ref(Ce,Ec),nt&&(Ve=nt[Re],!Ve&&Se&&(Ve={}),nt[Re]=Ve,Ve=w.ref(nt,Re))}return Ve}function Pe(Re,Se){var Ve=fe(Re,!0);return Se&&Ur(Se,function(Ce,nt){if(lt(Ve[Ce])){var Me=w.cfg[Ce];(Me||!lt(Me))&&(Ve[Ce]=Me)}Id(w,Ve,Ce,nt)}),w[hs](Ve,Se)}function Xe(Re,Se,Ve){Ve===void 0&&(Ve=!1);var Ce,nt=fe(Re,!1),Me=w.cfg;return nt&&(nt[Se]||!lt(nt[Se]))?Ce=nt[Se]:(Me[Se]||!lt(Me[Se]))&&(Ce=Me[Se]),Ce||!lt(Ce)?Ce:Ve}function Qe(Re){for(var Se;Se=z._next();){var Ve=Se[Ip]();Ve&&Re(Ve)}}return z}function Af(h,w,N,D){var M=ju(w),H=Dl(h,M,N,D),z=H.ctx;function ne(fe){var Pe=H._next();return Pe&&Pe[ys](fe,z),!Pe}function ce(fe,Pe){return fe===void 0&&(fe=null),Xt(fe)&&(fe=Ad(fe,M.cfg,N,Pe)),Af(fe||z[vs](),M.cfg,N,Pe)}return z[Po]=ne,z[vc]=ce,z}function Bh(h,w,N){var D=ju(w.config),M=Dl(h,D,w,N),H=M.ctx;function z(ce){var fe=M._next();return fe&&fe[Rn](H,ce),!fe}function ne(ce,fe){return ce===void 0&&(ce=null),Xt(ce)&&(ce=Ad(ce,D.cfg,w,fe)),Bh(ce||H[vs](),w,fe)}return H[Po]=z,H[vc]=ne,H}function Tv(h,w,N){var D=ju(w.config),M=Dl(h,D,w,N),H=M.ctx;function z(ce){return H.iterate(function(fe){er(fe[Mo])&&fe[Mo](H,ce)})}function ne(ce,fe){return ce===void 0&&(ce=null),Xt(ce)&&(ce=Ad(ce,D.cfg,w,fe)),Tv(ce||H[vs](),w,fe)}return H[Po]=z,H[vc]=ne,H}function Ad(h,w,N,D){var M=null,H=!D;if(Xt(h)&&h[ln]>0){var z=null;Ir(h,function(ne){if(!H&&D===ne&&(H=!0),H&&ne&&er(ne[ys])){var ce=Vp(ne,w,N);M||(M=ce),z&&z._setNext(ce),z=ce}})}return D&&!M?Ad([D],w,N):M}function Vp(h,w,N){var D=null,M=er(h[ys]),H=er(h[Za]),z;h?z=h[xp]+"-"+h[Cp]+"-"+jh++:z="Unknown-0-"+jh++;var ne={getPlugin:function(){return h},getNext:function(){return D},processTelemetry:Pe,unload:Xe,update:Qe,_id:z,_setNext:function(Re){D=Re}};function ce(){var Re;return h&&er(h[Am])&&(Re=h[Am]()),Re||(Re=Af(ne,w,N)),Re}function fe(Re,Se,Ve,Ce,nt){var Me=!1,Oe=h?h[xp]:kl,ze=Re[$u];return ze||(ze=Re[$u]={}),Re.setNext(D),h&&Li(Re[yi](),function(){return Oe+":"+Ve},function(){ze[z]=!0;try{var Kt=D?D._id:Sn;Kt&&(ze[Kt]=!1),Me=Se(Re)}catch(gr){var tr=D?ze[D._id]:!0;tr&&(Me=!0),(!D||!tr)&&qi(Re[Zs](),1,73,"Plugin ["+Oe+"] failed during "+Ve+" - "+br(gr)+", run flags: "+br(ze))}},Ce,nt),Me}function Pe(Re,Se){Se=Se||ce();function Ve(Ce){if(!h||!M)return!1;var nt=Od(h);return nt[gc]||nt[ro]?!1:(H&&h[Za](D),h[ys](Re,Ce),!0)}fe(Se,Ve,"processTelemetry",function(){return{item:Re}},!Re.sync)||Se[Po](Re)}function Xe(Re,Se){function Ve(){var Ce=!1;if(h){var nt=Od(h),Me=h[yi]||nt[yi];h&&(!Me||Me===Re.core())&&!nt[gc]&&(nt[yi]=null,nt[gc]=!0,nt[vf]=!1,h[gc]&&h[gc](Re,Se)===!0&&(Ce=!0))}return Ce}fe(Re,Ve,"unload",function(){},Se[Au])||Re[Po](Se)}function Qe(Re,Se){function Ve(){var Ce=!1;if(h){var nt=Od(h),Me=h[yi]||nt[yi];h&&(!Me||Me===Re.core())&&!nt[gc]&&h[Mo]&&h[Mo](Re,Se)===!0&&(Ce=!0)}return Ce}fe(Re,Ve,"update",function(){},!1)||Re[Po](Se)}return Qt(ne)}function Rl(){var h=[];function w(D){D&&h[ha](D)}function N(D,M){Ir(h,function(H){try{H(D,M)}catch(z){qi(D[Zs](),2,73,"Unexpected error calling unload handler - "+br(z))}}),h=[]}return{add:w,run:N}}function Yu(){var h=[];function w(D){var M=h;h=[],Ir(M,function(H){try{(H.rm||H.remove).call(H)}catch(z){qi(D,2,73,"Unloading:"+br(z))}})}function N(D){D&&ud(h,D)}return{run:w,add:N}}var Gp,Rs="getPlugin",Pd=(Gp={},Gp[Ec]={isVal:ws,v:{}},Gp),Pf=function(){function h(){var w=this,N,D,M,H,z;fe(),vo(h,w,function(Pe){Pe[md]=function(Xe,Qe,Re,Se){ce(Xe,Qe,Se),N=!0},Pe[gc]=function(Xe,Qe){var Re,Se=Pe[yi];if(!Se||Xe&&Se!==Xe[yi]())return;var Ve,Ce=!1,nt=Xe||Bh(null,Se,M&&M[Rs]?M[Rs]():M),Me=Qe||(Re={reason:0},Re[Au]=!1,Re);function Oe(){Ce||(Ce=!0,H.run(nt,Qe),z.run(nt[Zs]()),Ve===!0&&nt[Po](Me),fe())}return!Pe[dr]||Pe[dr](nt,Me,Oe)!==!0?Oe():Ve=!0,Ve},Pe[Mo]=function(Xe,Qe){var Re=Pe[yi];if(!Re||Xe&&Re!==Xe[yi]())return;var Se,Ve=!1,Ce=Xe||Tv(null,Re,M&&M[Rs]?M[Rs]():M),nt=Qe||{reason:0};function Me(){Ve||(Ve=!0,ce(Ce.getCfg(),Ce.core(),Ce[vs]()))}return!Pe._doUpdate||Pe._doUpdate(Ce,nt,Me)!==!0?Me():Se=!0,Se},bd(Pe,"_addUnloadCb",function(){return H},"add"),bd(Pe,"_addHook",function(){return z},"add"),Xr(Pe,"_unloadHooks",{g:function(){return z}})}),w[Zs]=function(Pe){return ne(Pe)[Zs]()},w[vf]=function(){return N},w.setInitialized=function(Pe){N=Pe},w[Za]=function(Pe){M=Pe},w[Po]=function(Pe,Xe){Xe?Xe[Po](Pe):M&&er(M[ys])&&M[ys](Pe,null)},w._getTelCtx=ne;function ne(Pe){Pe===void 0&&(Pe=null);var Xe=Pe;if(!Xe){var Qe=D||Af(null,{},w[yi]);M&&M[Rs]?Xe=Qe[vc](null,M[Rs]):Xe=Qe[vc](null,M)}return Xe}function ce(Pe,Xe,Qe){ju(Pe,Pd,Dd(Xe)),!Qe&&Xe&&(Qe=Xe[_o]()[vs]());var Re=M;M&&M[Rs]&&(Re=M[Rs]()),w[yi]=Xe,D=Af(Qe,Pe,Xe,Re)}function fe(){N=!1,w[yi]=null,D=null,M=null,z=Yu(),H=Rl()}}return h.__ieDyn=1,h}(),Os="",Lc="NoResponseBody",Mm="&"+Lc+"=true",Ol="POST",xv=function(){function h(){var w=0,N,D,M,H,z,ne,ce,fe,Pe,Xe,Qe,Re,Se,Ve;vo(h,this,function(Ce,nt){var Me=!0;Vi(),Ce[md]=function(st,St){M=St,D&&qi(M,1,28,"Sender is already initialized"),Ce.SetConfig(st),D=!0},Ce._getDbgPlgTargets=function(){return[D,H,ne,N]},Ce.SetConfig=function(st){try{if(z=st.senderOnCompleteCallBack||{},ne=!!st.disableCredentials,ce=st.fetchCredentials,H=!!st.isOneDs,N=!!st.enableSendPromise,Pe=!!st.disableXhr,Xe=!!st.disableBeacon,Qe=!!st.disableBeaconSync,Ve=st.timeWrapper,Se=!!st.addNoResponse,Re=!!st.disableFetchKeepAlive,fe={sendPOST:sn},H||(Me=!1),ne){var St=Ap();St&&St.protocol&&St.protocol[La]()==="file:"&&(Me=!1)}return!0}catch{}return!1},Ce.getSyncFetchPayload=function(){return w},Ce.getSenderInst=function(st,St){return st&&st[ln]?tr(st,St):null},Ce.getFallbackInst=function(){return fe},Ce[dr]=function(st,St){Vi()};function Oe(st,St){gr(St,200,{},st)}function ze(st,St){qi(M,2,26,"Failed to send telemetry.",{message:st}),gr(St,400,{})}function Kt(st){ze("No endpoint url is provided for the batch",st)}function tr(st,St){for(var Dr,Er=0,At=null,qr=0;At==null&&qr<st[ln];)Er=st[qr],!Pe&&Er===1?Dc()?At=Zr:_a()&&(At=sn):Er===2&&Sl(St)&&(!St||!Re)?At=Qn:Er===3&&Td()&&(St?!Qe:!Xe)&&(At=dn),qr++;return At?(Dr={_transport:Er,_isSync:St},Dr[gd]=At,Dr):null}function gr(st,St,Dr,Er){try{st&&st(St,Dr,Er)}catch{}}function Lr(st,St){var Dr=Di(),Er=st[Uo];if(!Er)return Kt(St),!0;Er=st[Uo]+(Se?Mm:Os);var At=st[Qa],qr=H?At:new Blob([At],{type:"text/plain;charset=UTF-8"}),kt=Dr.sendBeacon(Er,qr);return kt}function dn(st,St,Dr){var Er=st[Qa];try{if(Er)if(Lr(st,St))Oe(Os,St);else{var At=z&&z.beaconOnRetry;At&&er(At)?At(st,St,Lr):(fe&&fe[gd](st,St,!0),qi(M,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(qr){H&&ks(M,"Failed to send telemetry using sendBeacon API. Ex:"+br(qr)),gr(St,H?0:400,{},Os)}}function sn(st,St,Dr){var Er,At,qr,kt=st[jo]||{};!Dr&&N&&(Er=to(function(Un,wa){At=Un,qr=wa})),H&&Dr&&st.disableXhrSync&&(Dr=!1);var xn=st[Uo];if(!xn){Kt(St),At&&At(!1);return}var Et=Sv(Ol,xn,Me,!0,Dr,st[Zn]);H||Et[wo]("Content-type","application/json"),Ir(Cn(kt),function(Un){Et[wo](Un,kt[Un])}),Et.onreadystatechange=function(){H||(Fn(Et),Et.readyState===4&&At&&At(!0))},Et.onload=function(){H&&Fn(Et)};function Fn(Un){var wa=z&&z.xhrOnComplete,Qu=wa&&er(wa);if(Qu)wa(Un,St,st);else{var js=ga(Un);gr(St,Un[Lo],Nc(Un,H),js)}}return Et.onerror=function(Un){gr(St,H?Et[Lo]:400,Nc(Et,H),H?Os:km(Et)),qr&&qr(Un)},Et.ontimeout=function(){gr(St,H?Et[Lo]:500,Nc(Et,H),H?Os:km(Et)),At&&At(!1)},Et.send(st[Qa]),Er}function Qn(st,St,Dr){var Er,At=st[Uo],qr=st[Qa],kt=H?qr:new Blob([qr],{type:"application/json"}),xn,Et,Fn,Un=new Headers,wa=qr[ln],Qu=!1,js=!1,uh=st[jo]||{},gu=(Er={method:Ol,body:kt},Er[Df]=!0,Er);st.headers&&Cn(st.headers)[ln]>0&&(Ir(Cn(uh),function(On){Un.append(On,uh[On])}),gu[jo]=Un),ce?gu.credentials=ce:Me&&H&&(gu.credentials="include"),Dr&&(gu.keepalive=!0,w+=wa,H?st._sendReason===2&&(Qu=!0,Se&&(At+=Mm)):Qu=!0);var Qo=new Request(At,gu);try{Qo[Df]=!0}catch{}if(!Dr&&N&&(xn=to(function(On,oi){Et=On,Fn=oi})),!At){Kt(St),Et&&Et(!1);return}function zc(On){gr(St,H?0:400,{},H?Os:On)}function Si(On,oi,ba){var Wc=On[Lo],tp=z.fetchOnComplete;tp&&er(tp)?tp(On,St,ba||Os,oi):gr(St,Wc,{},ba||Os)}try{yc(fetch(H?At:Qo,H?gu:null),function(On){if(Dr&&(w-=wa,wa=0),!js)if(js=!0,On.rejected)zc(On.reason&&On.reason[Ka]),Fn&&Fn(On.reason);else{var oi=On[gf];try{!H&&!oi.ok?(zc(oi.statusText),Et&&Et(!1)):H&&!oi.body?(Si(oi,null,Os),Et&&Et(!0)):yc(oi.text(),function(ba){Si(oi,st,ba[gf]),Et&&Et(!0)})}catch(ba){zc(br(ba)),Fn&&Fn(ba)}}})}catch(On){js||(zc(br(On)),Fn&&Fn(On))}return Qu&&!js&&(js=!0,gr(St,200,{}),Et&&Et(!0)),H&&!js&&st[Zn]>0&&Ve&&Ve.set(function(){js||(js=!0,gr(St,500,{}),Et&&Et(!0))},st[Zn]),xn}function Zr(st,St,Dr){var Er=Ra(),At=new XDomainRequest,qr=st[Qa];At.onload=function(){var Un=ga(At),wa=z&&z.xdrOnComplete;wa&&er(wa)?wa(At,St,st):gr(St,200,{},Un)},At.onerror=function(){gr(St,400,{},H?Os:_l(At))},At.ontimeout=function(){gr(St,500,{})},At.onprogress=function(){};var kt=Er&&Er.location&&Er.location[vd]||"",xn=st[Uo];if(!xn){Kt(St);return}if(!H&&xn.lastIndexOf(kt,0)!==0){var Et="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";qi(M,2,40,". "+Et),ze(Et,St);return}var Fn=H?xn:xn[ma](/^(https?:)/,"");At.open(Ol,Fn),st[Zn]&&(At[Zn]=st[Zn]),At.send(qr),H&&Dr?Ve&&Ve.set(function(){At.send(qr)},0):At.send(qr)}function Vi(){w=0,D=!1,N=!1,M=null,H=null,z=null,ne=null,ce=null,fe=null,Pe=!1,Xe=!1,Qe=!1,Re=!1,Se=!1,Ve=null}})}return h.__ieDyn=1,h}(),Lm="on",Mf="attachEvent",$h="addEventListener",Fm="detachEvent",qu="removeEventListener",To="events",lu="visibilitychange",Hu="pagehide",Al="pageshow",Pl="unload",Md="beforeunload",Lf=di("aiEvtPageHide"),Jo=di("aiEvtPageShow"),Fc=/\.[\.]+/g,Um=/[\.]+$/,jm=1,zp=Tl("events"),Wp=/^([^.]*)(?:\.(.+)|)/;function Ko(h){return h&&h[ma]?h[ma](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Sn):h}function Vu(h,w){var N;if(w){var D=Sn;Xt(w)?(D=Sn,Ir(w,function(H){H=Ko(H),H&&(H[0]!=="."&&(H="."+H),D+=H)})):D=Ko(w),D&&(D[0]!=="."&&(D="."+D),h=(h||Sn)+D)}var M=Wp.exec(h||Sn)||[];return N={},N[yt]=M[1],N.ns=(M[2]||Sn).replace(Fc,".").replace(Um,Sn)[Pu](".").sort().join("."),N}function Ml(h,w,N){N===void 0&&(N=!0);var D=zp.get(h,To,{},N),M=D[w];return M||(M=D[w]=[]),M}function Bm(h,w,N,D){h&&w&&w[yt]&&(h[qu]?h[qu](w[yt],N,D):h[Fm]&&h[Fm](Lm+w[yt],N))}function Jp(h,w,N,D){var M=!1;return h&&w&&w[yt]&&N&&(h[$h]?(h[$h](w[yt],N,D),M=!0):h[Mf]&&(h[Mf](Lm+w[yt],N),M=!0)),M}function $m(h,w,N,D){for(var M=w[ln];M--;){var H=w[M];H&&(!N.ns||N.ns===H.evtName.ns)&&(!D||D(H))&&(Bm(h,H.evtName,H[_c],H.capture),w[Tp](M,1))}}function Yh(h,w,N){if(w[yt])$m(h,Ml(h,w[yt]),w,N);else{var D=zp.get(h,To,{});Ur(D,function(M,H){$m(h,H,w,N)}),Cn(D)[ln]===0&&zp.kill(h,To)}}function Kp(h,w){var N;return w?(Xt(w)?N=[h].concat(w):N=[h,w],N=Vu("xx",N).ns[Pu](".")):N=h,N}function Uc(h,w,N,D,M){var H;M===void 0&&(M=!1);var z=!1;if(h)try{var ne=Vu(w,D);if(z=Jp(h,ne,N,M),z&&zp.accept(h)){var ce=(H={guid:jm++,evtName:ne},H[_c]=N,H.capture=M,H);Ml(h,ne.type)[ha](ce)}}catch{}return z}function xo(h,w,N,D,M){if(M===void 0&&(M=!1),h)try{var H=Vu(w,D),z=!1;Yh(h,H,function(ne){return H.ns&&!N||ne[_c]===N?(z=!0,!0):!1}),z||Bm(h,H,N,M)}catch{}}function Ld(h,w,N){var D=!1,M=Ra();M&&(D=Uc(M,h,w,N),D=Uc(M.body,h,w,N)||D);var H=li();return H&&(D=Uc(H,h,w,N)||D),D}function Ll(h,w,N){var D=Ra();D&&(xo(D,h,w,N),xo(D.body,h,w,N));var M=li();M&&xo(M,h,w,N)}function Zo(h,w,N,D){var M=!1;return w&&h&&h[ln]>0&&Ir(h,function(H){H&&(!N||fs(N,H)===-1)&&(M=Ld(H,w,D)||M)}),M}function pg(h,w,N,D){var M=!1;return w&&h&&Xt(h)&&(M=Zo(h,w,N,D),!M&&N&&N[ln]>0&&(M=Zo(h,w,null,D))),M}function Zp(h,w,N){h&&Xt(h)&&Ir(h,function(D){D&&Ll(D,w,N)})}function Iv(h,w,N){return pg([Md,Pl,Hu],h,w,N)}function hg(h,w){Zp([Md,Pl,Hu],h,w)}function Hi(h,w,N){function D(z){var ne=li();h&&ne&&ne.visibilityState==="hidden"&&h(z)}var M=Kp(Lf,N),H=Zo([Hu],h,w,M);return(!w||fs(w,lu)===-1)&&(H=Zo([lu],D,w,M)||H),!H&&w&&(H=Hi(h,null,N)),H}function Fd(h,w){var N=Kp(Lf,w);Zp([Hu],h,N),Zp([lu],null,N)}function Ud(h,w,N){function D(z){var ne=li();h&&ne&&ne.visibilityState==="visible"&&h(z)}var M=Kp(Jo,N),H=Zo([Al],h,w,M);return H=Zo([lu],D,w,M)||H,!H&&w&&(H=Ud(h,null,N)),H}function Ym(h,w){var N=Kp(Jo,w);Zp([Al],h,N),Zp([lu],null,N)}var Fl="",ya="timings",Io="value",jd="kind",Gu="length",jc="processTelemetryStart",As,qh="4.3.5",qm="1DS-Web-JS-"+qh,bt=y.hasOwnProperty,zu=(As={},As[0]=0,As[2]=6,As[1]=1,As[3]=7,As[4098]=6,As[4097]=1,As[4099]=7,As);function fu(h){return!(h===Fl||lt(h))}function Ff(h){if(h){var w=_p(h,"-");if(w>-1)return ni(h,w)}return Fl}function Hm(h,w,N){if(!w&&!fu(w)||typeof h!="string")return null;var D=typeof w;if(D==="string"||D==="number"||D==="boolean"||Xt(w))w={value:w};else if(D==="object"&&!bt.call(w,"value"))w={value:N?JSON.stringify(w):w};else if(lt(w[Io])||w[Io]===Fl||!Su(w[Io])&&!fr(w[Io])&&!Ni(w[Io])&&!Xt(w[Io]))return null;if(Xt(w[Io])&&!Ul(w[Io]))return null;if(!lt(w[jd])){if(Xt(w[Io])||!Vm(w[jd]))return null;w[Io]=w[Io].toString()}return w}function Bc(h,w,N){var D=-1;if(!Tt(h))if(w>0&&(w===32?D=8192:w<=13&&(D=w<<5)),Xp(N))D===-1&&(D=0),D|=N;else{var M=zu[Yc(h)]||-1;D!==-1&&M!==-1?D|=M:M===6&&(D=M)}return D}function Bd(h,w,N,D,M){var H={},z=!1,ne=0,ce=arguments[Gu],fe=arguments;for(Ni(fe[0])&&(z=fe[0],ne++);ne<ce;ne++){var h=fe[ne];Ur(h,function(Xe,Qe){z&&Qe&&Ya(Qe)?Xt(Qe)?(H[Xe]=H[Xe]||[],Ir(Qe,function(Re,Se){Re&&Ya(Re)?H[Xe][Se]=Bd(!0,H[Xe][Se],Re):H[Xe][Se]=Re})):H[Xe]=Bd(!0,H[Xe],Qe):H[Xe]=Qe})}return H}var Ps=gp;function Vm(h){return h===0||h>0&&h<=13||h===32}function Xp(h){return h>=0&&h<=9}function Ul(h){return h[Gu]>0}function $c(h,w){var N=h;N[ya]=N[ya]||{},N[ya][jc]=N[ya][jc]||{},N[ya][jc][w]=Ps()}function Yc(h){var w=0;if(h!=null){var N=typeof h;N==="string"?w=1:N==="number"?w=2:N==="boolean"?w=3:N===a&&(w=4,Xt(h)?(w=4096,h[Gu]>0&&(w|=Yc(h[0]))):bt.call(h,"value")&&(w=8192|Yc(h[Io])))}return w}function Hh(){return!!wn("chrome")}function on(h){return h>0}var Ms="",Vh="drop",Gh="send",du="requeue",Qp="rspFail",zh="oth",Wh="no-cache, no-store",$d="application/x-json-stream",Yd="cache-control",jl="content-type",qc="kill-tokens",eh="kill-duration",Bl="time-delta-millis",Jh="client-version",No="client-id",Kh="time-delta-to-apply-millis",qd="upload-time",Gm="apikey",Ls="AuthMsaDeviceTicket",Nv="WebAuthToken",Wu="AuthXToken",Zh="NoResponseBody",$l="msfpc",zm="trace",Xo="user",Fs="allowRequestSending",Hn="firstRequestSent",Uf="shouldAddClockSkewHeaders",Yl="getClockSkewHeaderValue",Hd="setClockSkew",pr="length",io="concat",ao="iKey",Fi="count",ql="events",En="push",Hl="split",pu="splice",th="toLowerCase",hu="hdrs",Xh="useHdrs",Ju="initialize",Qh="setTimeoutOverride",em="clearTimeoutOverride",p="payloadPreprocessor",_="overrideEndpointUrl",S="avoidOptions",k="disableEventTimings",j="stringifyObjects",Z="enableCompoundKey",X="disableXhrSync",oe="disableFetchKeepAlive",ge="addNoResponse",be="excludeCsMetaData",rt="useSendBeacon",Bt="fetchCredentials",ur="alwaysUseXhrOverride",hr="unloadTransports",ht="serializeOfflineEvt",cr="getOfflineRequestDetails",Ht="createPayload",Pr="createOneDSPayload",Mr="payloadBlob",Lt="headers",Mn="_thePayload",jf="urlString",Ln="batches",oo="sendType",Vd="addHeader",tm="canSendRequest",Gd="sendQueuedRequests",zd="isCompletelyIdle",rh="setUnloading",Wm="isTenantKilled",je="resume",Rt="sendSynchronousBatch",Jt="_transport",nn="getWParam",gn="isBeacon",Tn="timings",bi="isTeardown",Ku="isSync",Us="data",Zu="timeout",Vl="_sendReason",Jm="setKillSwitchTenants",nh="_backOffTransmission",Bf="identifier",Hc="disableOptimizeObj",ry="ignoreMc1Ms0CookieProcessing",mg="eventsLimitInMem",s_="autoFlushEventsLimit",Cv="disableAutoBatchFlushLimit",ny="overrideInstrumentationKey",$f="disableTelemetry",rm="baseData",Km="sendAttempt",Yf="latency",nm="sync";function vg(h){var w=(h.ext||{}).intweb;return w&&fu(w[$l])?w[$l]:null}function u_(h){for(var w=null,N=0;w===null&&N<h[pr];N++)w=vg(h[N]);return w}var Wd=function(){function h(w,N){var D=N?[][io](N):[],M=this,H=u_(D);M[ao]=function(){return w},M.Msfpc=function(){return H||Ms},M[Fi]=function(){return D[pr]},M[ql]=function(){return D},M.addEvent=function(z){return z?(D[En](z),H||(H=vg(z)),!0):!1},M[Hl]=function(z,ne){var ce;if(z<D[pr]){var fe=D[pr]-z;lt(ne)||(fe=ne<fe?ne:fe),ce=D[pu](z,fe),H=u_(D)}return new h(w,ce)}}return h.create=function(w,N){return new h(w,N)},h}(),c_=function(){function h(){var w=!0,N=!0,D=!0,M="use-collector-delta",H=!1;vo(h,this,function(z){z[Fs]=function(){return w},z[Hn]=function(){D&&(D=!1,H||(w=!1))},z[Uf]=function(){return N},z[Yl]=function(){return M},z[Hd]=function(ne){H||(ne?(M=ne,N=!0,H=!0):N=!1,w=!0)}})}return h.__ieDyn=1,h}(),iy=1e3,gg=function(){function h(){var w={};function N(D){var M=[];return D&&Ir(D,function(H){M[En](Ga(H))}),M}vo(h,this,function(D){D[Jm]=function(M,H){if(M&&H)try{var z=N(M[Hl](","));if(H==="this-request-only")return z;for(var ne=parseInt(H,10)*iy,ce=0;ce<z[pr];++ce)w[z[ce]]=Va()+ne}catch{return[]}return[]},D[Wm]=function(M){var H=w,z=Ga(M);return H[z]!==void 0&&H[z]>Va()?!0:(delete H[z],!1)}})}return h.__ieDyn=1,h}(),Zm=.8,_g=1.2,kv=3e3,im=6e5;function Jd(h){return!(h>=300&&h<500&&h!=429||h==501||h==505)}function yg(h){var w=0,N=kv*Zm,D=kv*_g,M=Math.floor(Math.random()*(D-N))+N;return w=Math.pow(2,h)*M,Math.min(w,im)}var Xm=20,Yr=3984588,mu=65e3,Kd=2e6,am=Math.min(Kd,mu),om="metadata",Qm="f",qf=/\./,ih=function(){function h(w,N,D,M,H,z){var ne="data",ce="baseData",fe="ext",Pe=!!M,Xe=!0,Qe=N,Re={},Se=!!z,Ve=H||Bc;vo(h,this,function(Ce){Ce.createPayload=function(Oe,ze,Kt,tr,gr,Lr){return{apiKeys:[],payloadBlob:Ms,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:Oe,isTeardown:ze,isSync:Kt,isBeacon:tr,sendType:Lr,sendReason:gr}},Ce.appendPayload=function(Oe,ze,Kt){var tr=Oe&&ze&&!Oe.overflow;return tr&&Li(w,function(){return"Serializer:appendPayload"},function(){for(var gr=ze.events(),Lr=Oe.payloadBlob,dn=Oe.numEvents,sn=!1,Qn=[],Zr=[],Vi=Oe.isBeacon,st=Vi?mu:Yr,St=Vi?am:Kd,Dr=0,Er=0;Dr<gr.length;){var At=gr[Dr];if(At){if(dn>=Kt){Oe.overflow=ze.split(Dr);break}var qr=Ce.getEventBlob(At);if(qr&&qr.length<=St){var kt=qr.length,xn=Lr.length;if(xn+kt>st){Oe.overflow=ze.split(Dr);break}Lr&&(Lr+=`
`),Lr+=qr,Er++,Er>Xm&&(Gs(Lr,0,1),Er=0),sn=!0,dn++}else qr?Qn.push(At):Zr.push(At),gr.splice(Dr,1),Dr--}Dr++}if(Qn.length>0&&Oe.sizeExceed.push(Wd.create(ze.iKey(),Qn)),Zr.length>0&&Oe.failedEvts.push(Wd.create(ze.iKey(),Zr)),sn){Oe.batches.push(ze),Oe.payloadBlob=Lr,Oe.numEvents=dn;var Et=ze.iKey();fs(Oe.apiKeys,Et)===-1&&Oe.apiKeys.push(Et)}},function(){return{payload:Oe,theBatch:{iKey:ze.iKey(),evts:ze.events()},max:Kt}}),tr},Ce.getEventBlob=function(Oe){try{return Li(w,function(){return"Serializer.getEventBlob"},function(){var ze={};ze.name=Oe.name,ze.time=Oe.time,ze.ver=Oe.ver,ze.iKey="o:"+Ff(Oe.iKey);var Kt={},tr;Se||(tr=function(sn,Qn,Zr){l_(Ve,Kt,sn,Qn,Zr)});var gr=Oe[fe];gr&&(ze[fe]=Kt,Ur(gr,function(sn,Qn){var Zr=Kt[sn]={};Me(Qn,Zr,"ext."+sn,!0,null,null,!0)}));var Lr=ze[ne]={};Lr.baseType=Oe.baseType;var dn=Lr[ce]={};return Me(Oe.baseData,dn,ce,!1,[ce],tr,Xe),Me(Oe.data,Lr,ne,!1,[],tr,Xe),JSON.stringify(ze)},function(){return{item:Oe}})}catch{return null}};function nt(Oe,ze){var Kt=Re[Oe];return Kt===void 0&&(Oe.length>=7&&(Kt=Dn(Oe,"ext.metadata")||Dn(Oe,"ext.web")),Re[Oe]=Kt),Kt}function Me(Oe,ze,Kt,tr,gr,Lr,dn){Ur(Oe,function(sn,Qn){var Zr=null;if(Qn||fu(Qn)){var Vi=Kt,st=sn,St=gr,Dr=ze;if(Pe&&!tr&&qf.test(sn)){var Er=sn.split("."),At=Er.length;if(At>1){St&&(St=St.slice());for(var qr=0;qr<At-1;qr++){var kt=Er[qr];Dr=Dr[kt]=Dr[kt]||{},Vi+="."+kt,St&&St.push(kt)}st=Er[At-1]}}var xn=tr&&nt(Vi);if(!xn&&Qe&&Qe.handleField(Vi,st)?Zr=Qe.value(Vi,st,Qn,D):Zr=Hm(st,Qn,D),Zr){var Et=Zr.value;if(Dr[st]=Et,Lr&&Lr(St,st,Zr),dn&&typeof Et=="object"&&!Xt(Et)){var Fn=St;Fn&&(Fn=Fn.slice(),Fn.push(st)),Me(Qn,Et,Vi+"."+st,tr,Fn,Lr,dn)}}}})}})}return h.__ieDyn=1,h}();function l_(h,w,N,D,M){if(M&&w){var H=h(M.value,M.kind,M.propertyType);if(H>-1){var z=w[om];z||(z=w[om]={f:{}});var ne=z[Qm];if(ne||(ne=z[Qm]={}),N)for(var ce=0;ce<N.length;ce++){var fe=N[ce];ne[fe]||(ne[fe]={f:{}});var Pe=ne[fe][Qm];Pe||(Pe=ne[fe][Qm]={}),ne=Pe}ne=ne[D]={},Xt(M.value)?ne.a={t:H}:ne.t=H}}}function ah(h,w){return{set:function(N,D){for(var M=[],H=2;H<arguments.length;H++)M[H-2]=arguments[H];return kh([h,w],N,D,M)}}}var Gl,zl="sendAttempt",Wl="&"+Zh+"=true",Vc="?cors=true&"+jl[th]()+"="+$d,Gc=(Gl={},Gl[1]=du,Gl[100]=du,Gl[200]="sent",Gl[8004]=Vh,Gl[8003]=Vh,Gl),Xu={},Hf={};function vu(h,w,N){Xu[h]=w,N!==!1&&(Hf[w]=h)}vu(Ls,Ls,!1),vu(Jh,Jh),vu(No,"Client-Id"),vu(Gm,Gm),vu(Kh,Kh),vu(qd,qd),vu(Wu,Wu);function Vf(h,w){var N=!1;if(h&&w){var D=Cn(h);if(D&&D[pr]>0)for(var M=w[th](),H=0;H<D[pr];H++){var z=D[H];if(z&&Fr(w,z)&&z[th]()===M){N=!0;break}}}return N}function Zd(h,w,N,D){w&&N&&N[pr]>0&&(D&&Xu[w]?(h[hu][Xu[w]]=N,h[Xh]=!0):h.url+="&"+w+"="+N)}function wg(h,w,N){for(var D=0;D<h[pr];D++)if(h[D].name===w){h[D].value=N;return}h[En]({name:w,value:N})}function Dv(h,w){for(var N=0;N<h[pr];N++)if(h[N].name===w){h[pu](N,1);return}}var Gf=function(){function h(w,N,D,M){var H,z,ne,ce,fe=!1,Pe,Xe,Qe,Re,Se,Ve,Ce,nt,Me,Oe,ze,Kt,tr,gr,Lr,dn,sn,Qn,Zr,Vi,st,St,Dr,Er,At,qr,kt,xn;vo(h,this,function(Et){js();var Fn=!0;Et[Ju]=function(o,l,v){Er||(Se=l,Kt=l.getCookieMgr(),Xe=v,Qe=Xe.diagLog(),ud(Vi,Ac(o,function(b){var I,R=b.cfg,L=b.cfg.extensionConfig[v.identifier];At=ah(L[Qh],L[em]),fu(R.anonCookieName)?wg(Ce,"anoncknm",R.anonCookieName):Dv(Ce,"anoncknm"),st=L[p],St=L.payloadListener;var O=L.httpXHROverride,F=L[_]?L[_]:R.endpointUrl;H=F+Vc,gr=Tt(L[S])?!0:!L[S],ze=!L[k];var B=L.valueSanitizer,K=L[j],re=!!R[Z];Tt(L[Z])||(re=!!L[Z]),Lr=L.xhrTimeout,dn=!!L[X],sn=!!L[oe],Zr=L[ge]!==!1,qr=!!L[be],l.getPlugin("LocalStorage")&&(sn=!0),fe=!Ai(),Oe=new ih(Se,B,K,re,Bc,qr),lt(L[rt])||(fe=!!L[rt]),L[Bt]&&(xn=L[Bt]);var Q=wa();kt?kt.SetConfig(Q):(kt=new xv,kt[Ju](Q,Qe));var ae=O,ie=L[ur]?O:null,we=L[ur]?O:null,xe=[3,2];if(!O){Ve=!1;var Ye=[];Ai()?(Ye=[2,1],xe=[2,1,3]):Ye=[1,2,3],Ye=Tc(Ye,L.transports),O=Un(Ye,!1),O||ks(Qe,"No available transport to send events"),ae=Un(Ye,!0)}ie||(xe=Tc(xe,L[hr]),ie=Un(xe,!0)),Qn=!Ve&&(fe&&Td()||!sn&&Sl(!0)),Re=(I={},I[0]=O,I[1]=ae||Un([1,2,3],!0),I[2]=ie||ae||Un([1],!0),I[3]=we||Un([2,3],!0)||ae||Un([1],!0),I)})),Er=!0)},Et.addResponseHandler=function(o){return Dr[En](o),{rm:function(){var l=Dr.indexOf(o);l>=0&&Dr[pu](l,1)}}},Et[ht]=function(o){try{if(Oe)return Oe.getEventBlob(o)}catch{}return Ms},Et[cr]=function(){try{var o=Oe&&Oe[Ht](0,!1,!1,!1,1,0);return Wf(o,gr)}catch{}return null},Et[Pr]=function(o,l){try{var v=[];Ir(o,function(O){l&&(O=qo(O));var F=Wd.create(O[ao],[O]);v[En](F)});for(var b=null;v[pr]>0&&Oe;){var I=v.shift();I&&I[Fi]()>0&&(b=b||Oe[Ht](0,!1,!1,!1,1,0),Oe.appendPayload(b,I,w))}var R=Wf(b,gr),L={data:b[Mr],urlString:R.url,headers:R[hu],timeout:Lr,disableXhrSync:dn,disableFetchKeepAlive:sn};return gr&&(Vf(L[Lt],Yd)||(L[Lt][Yd]=Wh),Vf(L[Lt],jl)||(L[Lt][jl]=$d)),L}catch{}return null};function Un(o,l){try{return kt&&kt.getSenderInst(o,l)}catch{}return null}Et._getDbgPlgTargets=function(){return[Re[0],z,Oe,Re,wa(),H]};function wa(){try{var o={xdrOnComplete:Qu,fetchOnComplete:uh,xhrOnComplete:gu,beaconOnRetry:zc},l={enableSendPromise:!1,isOneDs:!0,disableCredentials:!Fn,fetchCredentials:xn,disableXhr:!1,disableBeacon:!fe,disableBeaconSync:!fe,disableFetchKeepAlive:sn,timeWrapper:At,addNoResponse:Zr,senderOnCompleteCallBack:o};return l}catch{}return null}function Qu(o,l,v){var b=ga(o);Qo(l,200,{},b),av(b)}function js(){var o;H=null,z=new gg,ne=!1,ce=new c_,fe=!1,Pe=0,Xe=null,Qe=null,Re=null,Se=null,Ve=!0,Ce=[],nt={},Me=[],Oe=null,ze=!1,Kt=null,tr=!1,gr=!1,Lr=o,dn=o,sn=o,Qn=o,Zr=o,Vi=[],st=o,St=o,Dr=[],Er=!1,At=ah(),qr=!1,kt=null}function uh(o,l,v,b){var I=function(O,F,B){Qo(l,O,F,B),av(B)},R={},L=o[Lt];L&&L.forEach(function(O,F){R[F]=O}),I(o.status,R,v||Ms)}function gu(o,l,v){var b=ga(o);Qo(l,o.status,Nc(o,!0),b),av(b)}function Qo(o,l,v,b){try{o(l,v,b)}catch(I){qi(Qe,2,518,br(I))}}function zc(o,l,v){var b=o,I=200,R=b[Mn],L=o[jf]+(Zr?Wl:Ms);try{var O=Di();if(R){var F=!!Se.getPlugin("LocalStorage"),B=[],K=[];Ir(R[Ln],function(re){if(B&&re&&re[Fi]()>0)for(var Q=re[ql](),ae=0;ae<Q[pr];ae++)if(O.sendBeacon(L,Oe.getEventBlob(Q[ae])))K[En](re[ae]);else{B[En](re[Hl](ae));break}else B[En](re[Hl](0))}),K[pr]>0&&(R.sentEvts=K),F||_u(B,8003,R[oo],!0)}else I=0}catch(re){ks(Qe,"Failed to send telemetry using sendBeacon API. Ex:"+br(re)),I=0}finally{Qo(l,I,{},Ms)}}function Si(o){return o===2||o===3}function On(o){return tr&&Si(o)&&(o=2),o}Et[Vd]=function(o,l){nt[o]=l},Et.removeHeader=function(o){delete nt[o]},Et[tm]=function(){return oi()&&ce[Fs]()},Et[Gd]=function(o,l){Tt(o)&&(o=0),tr&&(o=On(o),l=2),Wc(Me,o,0)&&Bs(ba(),0,!1,o,l||0)},Et[zd]=function(){return!ne&&Pe===0&&Me[pr]===0},Et[rh]=function(o){tr=o},Et.addBatch=function(o){if(o&&o[Fi]()>0){if(z.isTenantKilled(o[ao]()))return!1;Me[En](o)}return!0},Et.teardown=function(){Me[pr]>0&&Bs(ba(),0,!0,2,2),Ir(Vi,function(o){o&&o.rm&&o.rm()}),Vi=[]},Et.pause=function(){ne=!0},Et[je]=function(){ne=!1,Et[Gd](0,4)},Et[Rt]=function(o,l,v){o&&o[Fi]()>0&&(lt(l)&&(l=1),tr&&(l=On(l),v=2),Bs([o],0,!1,l,v||0))};function oi(){return!ne&&Pe<N}function ba(){var o=Me;return Me=[],o}function Wc(o,l,v){var b=!1;return o&&o[pr]>0&&!ne&&Re[l]&&Oe&&(b=l!==0||oi()&&(v>0||ce[Fs]())),b}function tp(o){var l={};return o&&Ir(o,function(v,b){l[b]={iKey:v[ao](),evts:v[ql]()}}),l}function Bs(o,l,v,b,I){if(!(!o||o[pr]===0)){if(ne){_u(o,1,b);return}b=On(b);try{var R=o,L=b!==0;Li(Se,function(){return"HttpManager:_sendBatches"},function(O){O&&(o=o.slice(0));for(var F=[],B=null,K=Ps(),re=Re[b]||(L?Re[1]:Re[0]),Q=re&&re[Jt],ae=Qn&&(tr||Si(b)||Q===3||re._isSync&&Q===2);Wc(o,b,l);){var ie=o.shift();ie&&ie[Fi]()>0&&(z.isTenantKilled(ie[ao]())?F[En](ie):(B=B||Oe[Ht](l,v,L,ae,I,b),Oe.appendPayload(B,ie,w)?B.overflow!==null&&(o=[B.overflow][io](o),B.overflow=null,rp(B,K,Ps(),I),K=Ps(),B=null):(rp(B,K,Ps(),I),K=Ps(),o=[ie][io](o),B=null)))}B&&rp(B,K,Ps(),I),o[pr]>0&&(Me=o[io](Me)),_u(F,8004,b)},function(){return{batches:tp(R),retryCount:l,isTeardown:v,isSynchronous:L,sendReason:I,useSendBeacon:Si(b),sendType:b}},!L)}catch(O){qi(Qe,2,48,"Unexpected Exception sending batch: "+br(O))}}}function Wf(o,l){var v={url:H,hdrs:{},useHdrs:!1};l?(v[hu]=Bd(v[hu],nt),v.useHdrs=Cn(v.hdrs)[pr]>0):Ur(nt,function(O,F){Hf[O]?Zd(v,Hf[O],F,!1):(v[hu][O]=F,v[Xh]=!0)}),Zd(v,No,"NO_AUTH",l),Zd(v,Jh,qm,l);var b=Ms;Ir(o.apiKeys,function(O){b[pr]>0&&(b+=","),b+=O}),Zd(v,Gm,b,l),Zd(v,qd,Va().toString(),l);var I=iv(o);if(fu(I)&&(v.url+="&ext.intweb.msfpc="+I),ce[Uf]()&&Zd(v,Kh,ce[Yl](),l),Se[nn]){var R=Se[nn]();R>=0&&(v.url+="&w="+R)}for(var L=0;L<Ce[pr];L++)v.url+="&"+Ce[L].name+"="+Ce[L].value;return v}function Jf(o,l,v){o[l]=o[l]||{},o[l][Xe.identifier]=v}function rp(o,l,v,b){if(o&&o.payloadBlob&&o.payloadBlob[pr]>0){var I=!!st,R=Re[o.sendType];!Si(o[oo])&&o[gn]&&o.sendReason===2&&(R=Re[2]||Re[3]||R);var L=gr;(o.isBeacon||R[Jt]===3)&&(L=!1);var O=Wf(o,L);L=L||O[Xh];var F=Ps();Li(Se,function(){return"HttpManager:_doPayloadSend"},function(){for(var B=0;B<o.batches[pr];B++)for(var K=o[Ln][B],re=K[ql](),Q=0;Q<re[pr];Q++){var ae=re[Q];if(ze){var ie=ae[Tn]=ae[Tn]||{};Jf(ie,"sendEventStart",F),Jf(ie,"serializationStart",l),Jf(ie,"serializationCompleted",v)}ae[zl]>0?ae[zl]++:ae[zl]=1}_u(o[Ln],1e3+(b||0),o[oo],!0);var we={data:o[Mr],urlString:O.url,headers:O[hu],_thePayload:o,_sendReason:b,timeout:Lr,disableXhrSync:dn,disableFetchKeepAlive:sn};L&&(Vf(we[Lt],Yd)||(we[Lt][Yd]=Wh),Vf(we[Lt],jl)||(we[Lt][jl]=$d));var xe=null;R&&(xe=function(Ye){ce[Hn]();var it=function(Vt,Nr){tv(Vt,Nr,o,b)},ot=o[bi]||o[Ku];try{R.sendPOST(Ye,it,ot),St&&St(we,Ye,ot,o[gn])}catch(Vt){ks(Qe,"Unexpected exception sending payload. Ex:"+br(Vt)),Qo(it,0,{})}}),Li(Se,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(xe)if(o[oo]===0&&Pe++,I&&!o.isBeacon&&R[Jt]!==3){var Ye={data:we[Us],urlString:we[jf],headers:Bd({},we[Lt]),timeout:we[Zu],disableXhrSync:we[X],disableFetchKeepAlive:we[oe]},it=!1;Li(Se,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{st(Ye,function(ot){it=!0,!Ve&&!ot[Mn]&&(ot[Mn]=ot[Mn]||we[Mn],ot[Vl]=ot[Vl]||we[Vl]),xe(ot)},o.isSync||o[bi])}catch{it||xe(we)}})}else xe(we)})},function(){return{thePayload:o,serializationStart:l,serializationCompleted:v,sendReason:b}},o[Ku])}o.sizeExceed&&o.sizeExceed[pr]>0&&_u(o.sizeExceed,8003,o[oo]),o.failedEvts&&o.failedEvts[pr]>0&&_u(o.failedEvts,8002,o[oo])}function Ov(o,l){ze&&Ir(o,function(v){var b=v[Tn]=v[Tn]||{};Jf(b,"sendEventCompleted",l)})}function tv(o,l,v,b){var I=9e3,R=null,L=!1,O=!1;try{var F=!0;if(typeof o!==u){if(l){ce[Hd](l[Bl]);var B=l[eh]||l["kill-duration-seconds"];Ir(z[Jm](l[qc],B),function(re){Ir(v[Ln],function(Q){if(Q[ao]()===re){R=R||[];var ae=Q[Hl](0);v.numEvents-=ae[Fi](),R[En](ae)}})})}if(o==200||o==204){I=200;return}(!Jd(o)||v.numEvents<=0)&&(F=!1),I=9e3+o%1e3}if(F){I=100;var K=v.retryCnt;v[oo]===0&&(K<D?(L=!0,nv(function(){v[oo]===0&&Pe--,Bs(v[Ln],K+1,v[bi],tr?2:v[oo],5)},tr,yg(K))):(O=!0,tr&&(I=8001)))}}finally{L||(ce[Hd](),rv(v,I,b,O)),_u(R,8004,v[oo])}}function rv(o,l,v,b){try{b&&Xe[nh]();var I=o[Ln];l===200&&(I=o.sentEvts||o[Ln],!b&&!o[Ku]&&Xe._clearBackOff(),Av(I)),_u(I,l,o[oo],!0)}finally{o[oo]===0&&(Pe--,v!==5&&Et.sendQueuedRequests(o[oo],v))}}function Av(o){if(ze){var l=Ps();Ir(o,function(v){v&&v[Fi]()>0&&Ov(v[ql](),l)})}}function nv(o,l,v){l?o():At.set(o,v)}function iv(o){for(var l=0;l<o.batches[pr];l++){var v=o[Ln][l].Msfpc();if(v)return encodeURIComponent(v)}return Ms}function av(o){var l=Dr;try{for(var v=0;v<l[pr];v++)try{l[v](o)}catch(I){qi(Qe,1,519,"Response handler failed: "+I)}if(o){var b=JSON.parse(o);fu(b.webResult)&&fu(b.webResult[$l])&&Kt.set("MSFPC",b.webResult[$l],365*86400)}}catch{}}function _u(o,l,v,b){if(o&&o[pr]>0&&M){var I=M[ov(l)];if(I){var R=v!==0;Li(Se,function(){return"HttpManager:_sendBatchesNotification"},function(){nv(function(){try{I.call(M,o,l,R,v)}catch(L){qi(Qe,1,74,"send request notification failed: "+L)}},b||R,0)},function(){return{batches:tp(o),reason:l,isSync:R,sendSync:b,sendType:v}},!R)}}}function ov(o){var l=Gc[o];return fu(l)||(l=zh,o>=9e3&&o<=9999?l=Qp:o>=8e3&&o<=8999?l=Vh:o>=1e3&&o<=1999&&(l=Gh)),l}})}return h.__ieDyn=1,h}(),zf=.25,Xd=500,oh=20,Rv=6,sm=2,ev=4,bg=2,Sg=1,Eg=1e4,Xn="eventsDiscarded",Qd="",ai=void 0,ay=os({eventsLimitInMem:{isVal:on,v:Eg},immediateEventLimit:{isVal:on,v:500},autoFlushEventsLimit:{isVal:on,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:sh,v:ai},overrideInstrumentationKey:ai,overrideEndpointUrl:ai,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:ai,clearTimeoutOverride:ai,payloadPreprocessor:ai,payloadListener:ai,disableEventTimings:ai,valueSanitizer:ai,stringifyObjects:ai,enableCompoundKey:ai,disableOptimizeObj:!1,fetchCredentials:ai,transports:ai,unloadTransports:ai,useSendBeacon:ai,disableFetchKeepAlive:ai,avoidOptions:!1,xhrTimeout:ai,disableXhrSync:ai,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:fr,v:Rv},maxUnloadEventRetryAttempts:{isVal:fr,v:sm},addNoResponse:ai,excludeCsMetaData:ai});function sh(h){return h&&h.sendPOST}var ep=function(h){Qi(w,h);function w(){var N=h.call(this)||this;N.identifier="PostChannel",N.priority=1011,N.version="4.3.5";var D,M=!1,H=[],z,ne=!1,ce=0,fe,Pe=0,Xe,Qe={},Re=e,Se,Ve,Ce,nt,Me,Oe,ze,Kt,tr,gr,Lr,dn,sn,Qn,Zr,Vi,st,St,Dr,Er,At,qr;return vo(w,N,function(kt,xn){On(),kt._getDbgPlgTargets=function(){return[Me,D]},kt[Ju]=function(O,F,B){Li(F,function(){return"PostChannel:initialize"},function(){xn[Ju](O,F,B),Dr=F.getNotifyMgr();try{Zr=Kp(di(kt[Bf]),F.evtNamespace&&F.evtNamespace()),kt._addHook(Ac(O,function(K){var re=K.cfg,Q=Af(null,re,F);D=Q.getExtCfg(kt[Bf],ay),Vi=ah(D[Qh],D[em]),Lr=!D[Hc]&&Hh(),st=D[ry],Fn(F),Xe=D[mg],fe=D.immediateEventLimit,ze=D[s_],sn=D.maxEventRetryAttempts,Qn=D.maxUnloadEventRetryAttempts,St=D[Cv],mr(re.endpointUrl)?kt.pause():ne&&kt[je](),L(),At=D[ny],qr=!!D[$f],Er&&Et();var ae=re.disablePageUnloadEvents||[];Er=Iv(Qu,ae,Zr),Er=Hi(Qu,ae,Zr)||Er,Er=Ud(js,re.disablePageShowEvents,Zr)||Er})),Me[Ju](O,kt.core,kt)}catch(K){throw kt.setInitialized(!1),K}},function(){return{theConfig:O,core:F,extensions:B}})},kt.processTelemetry=function(O,F){$c(O,kt[Bf]),F=F||kt._getTelCtx(F);var B=O;!qr&&!M&&(At&&(B[ao]=At),gu(B,!0),dn?Wc(2,2):Si()),kt.processNext(B,F)},kt.getOfflineSupport=function(){try{var O=Me&&Me[cr]();if(Me)return{getUrl:function(){return O?O.url:null},serialize:wa,batch:Un,shouldProcess:function(F){return!qr},createPayload:function(F){return null},createOneDSPayload:function(F){if(Me[Pr])return Me[Pr](F,Lr)}}}catch{}return null},kt._doTeardown=function(O,F){Wc(2,2),M=!0,Me.teardown(),Et(),On()};function Et(){hg(null,Zr),Fd(null,Zr),Ym(null,Zr)}function Fn(O){var F=O[nn];O[nn]=function(){var B=0;return st&&(B=B|2),B|F.call(O)}}function Un(O){var F=Qd;return O&&O[pr]&&Ir(O,function(B){F&&(F+=`
`),F+=B}),F}function wa(O){var F=Qd;try{uh(O),F=Me[ht](O)}catch{}return F}function Qu(O){var F=O||Ra().event;F.type!=="beforeunload"&&(dn=!0,Me[rh](dn)),Wc(2,2)}function js(O){dn=!1,Me[rh](dn)}function uh(O){O.ext&&O.ext[zm]&&delete O.ext[zm],O.ext&&O.ext[Xo]&&O.ext[Xo].id&&delete O.ext[Xo].id,Lr&&(O.ext=qo(O.ext),O[rm]&&(O[rm]=qo(O[rm])),O[Us]&&(O[Us]=qo(O[Us])))}function gu(O,F){if(O[Km]||(O[Km]=0),O[Yf]||(O[Yf]=1),uh(O),O[nm]){if(Ce||ne)O[Yf]=3,O[nm]=!1;else if(Me){Lr&&(O=qo(O)),Me[Rt](Wd.create(O[ao],[O]),O[nm]===!0?1:O[nm],3);return}}var B=O[Yf],K=Pe,re=Xe;B===4&&(K=ce,re=fe);var Q=!1;if(K<re)Q=!Jf(O,F);else{var ae=1,ie=oh;B===4&&(ae=4,ie=1),Q=!0,rp(O[ao],O[Yf],ae,ie)&&(Q=!Jf(O,F))}Q&&ov(Xn,[O],Ao.QueueFull)}kt.setEventQueueLimits=function(O,F){D[mg]=Xe=on(O)?O:Eg,D[s_]=ze=on(F)?F:0,L();var B=Pe>O;if(!B&&Kt>0)for(var K=1;!B&&K<=3;K++){var re=Oe[K];re&&re[Ln]&&Ir(re[Ln],function(Q){Q&&Q[Fi]()>=Kt&&(B=!0)})}Wf(!0,B)},kt.pause=function(){ba(),ne=!0,Me&&Me.pause()},kt[je]=function(){ne=!1,Me&&Me[je](),Si()},kt._loadTransmitProfiles=function(O){nv(),Ur(O,function(F,B){var K=B[pr];if(K>=2){var re=K>2?B[2]:0;if(B[pu](0,K-2),B[1]<0&&(B[0]=-1),B[1]>0&&B[0]>0){var Q=B[0]/B[1];B[0]=Math.ceil(Q)*B[1]}re>=0&&B[1]>=0&&re>B[1]&&(re=B[1]),B[En](re),Qe[F]=B}})},kt.flush=function(O,F,B){O===void 0&&(O=!0);var K;if(!ne)if(B=B||1,O)F||(K=to(function(Q){F=Q})),z==null?(ba(),tv(1,0,B),z=oi(function(){z=null,rv(F,B)},0)):H[En](F);else{var re=ba();Qo(1,1,B),F&&F(),re&&Si()}return K},kt.setMsaAuthTicket=function(O){Me[Vd](Ls,O)},kt.setAuthPluginHeader=function(O){Me[Vd](Nv,O)},kt.removeAuthPluginHeader=function(){Me.removeHeader(Nv)},kt.hasEvents=zc,kt._setTransmitProfile=function(O){Re!==O&&Qe[O]!==void 0&&(ba(),Re=O,Si())},wf(kt,function(){return Me},["addResponseHandler"]);function Qo(O,F,B){var K=tv(O,F,B);return Me[Gd](F,B),K}function zc(){return Pe>0}function Si(){if(tr>=0&&tv(tr,0,gr)&&Me[Gd](0,gr),ce>0&&!Ve&&!ne){var O=Qe[Re][2];O>=0&&(Ve=oi(function(){Ve=null,Qo(4,0,1),Si()},O))}var F=Qe[Re][1];!Se&&!z&&F>=0&&!ne&&(zc()?Se=oi(function(){Se=null,Qo(nt===0?3:1,0,1),nt++,nt%=2,Si()},F):nt=0)}kt[nh]=function(){Ce<ev&&(Ce++,ba(),Si())},kt._clearBackOff=function(){Ce&&(Ce=0,ba(),Si())};function On(){D=null,M=!1,H=[],z=null,ne=!1,ce=0,fe=500,Pe=0,Xe=Eg,Qe={},Re=e,Se=null,Ve=null,Ce=0,nt=0,Oe={},ze=0,Er=!1,Kt=0,tr=-1,gr=null,Lr=!0,dn=!1,sn=Rv,Qn=sm,Zr=null,At=null,qr=!1,Vi=ah(),Me=new Gf(Xd,bg,Sg,{requeue:av,send:l,sent:v,drop:b,rspFail:I,oth:R}),iv(),tp(),L()}function oi(O,F){F===0&&Ce&&(F=1);var B=1e3;return Ce&&(B=yg(Ce-1)),Vi.set(O,F*B)}function ba(){return Se!==null?(Se.cancel(),Se=null,nt=0,!0):!1}function Wc(O,F){ba(),z&&(z.cancel(),z=null),ne||Qo(1,O,F)}function tp(){Oe[4]={batches:[],iKeyMap:{}},Oe[3]={batches:[],iKeyMap:{}},Oe[2]={batches:[],iKeyMap:{}},Oe[1]={batches:[],iKeyMap:{}}}function Bs(O,F,B){var K=Oe[F];K||(F=1,K=Oe[F]);var re=K.iKeyMap[O];return!re&&B&&(re=Wd.create(O),K.batches[En](re),K.iKeyMap[O]=re),re}function Wf(O,F){Me[tm]()&&!Ce&&(ze>0&&Pe>ze&&(F=!0),F&&z==null&&kt.flush(O,function(){},20))}function Jf(O,F){Lr&&(O=qo(O));var B=O[Yf],K=Bs(O[ao],B,!0);return K.addEvent(O)?(B!==4?(Pe++,F&&O[Km]===0&&Wf(!O.sync,Kt>0&&K[Fi]()>=Kt)):ce++,!0):!1}function rp(O,F,B,K){for(;B<=F;){var re=Bs(O,F,!0);if(re&&re[Fi]()>0){var Q=re[Hl](0,K),ae=Q[Fi]();if(ae>0)return B===4?ce-=ae:Pe-=ae,o(Xn,[Q],Ao.QueueFull),!0}B++}return Ov(),!1}function Ov(){for(var O=0,F=0,B=function(re){var Q=Oe[re];Q&&Q[Ln]&&Ir(Q[Ln],function(ae){re===4?O+=ae[Fi]():F+=ae[Fi]()})},K=1;K<=4;K++)B(K);Pe=F,ce=O}function tv(O,F,B){var K=!1,re=F===0;return!re||Me[tm]()?Li(kt.core,function(){return"PostChannel._queueBatches"},function(){for(var Q=[],ae=4;ae>=O;){var ie=Oe[ae];ie&&ie.batches&&ie.batches[pr]>0&&(Ir(ie[Ln],function(we){Me.addBatch(we)?K=K||we&&we[Fi]()>0:Q=Q[io](we[ql]()),ae===4?ce-=we[Fi]():Pe-=we[Fi]()}),ie[Ln]=[],ie.iKeyMap={}),ae--}Q[pr]>0&&ov(Xn,Q,Ao.KillSwitch),K&&tr>=O&&(tr=-1,gr=0)},function(){return{latency:O,sendType:F,sendReason:B}},!re):(tr=tr>=0?Math.min(tr,O):O,gr=Math.max(gr,B)),K}function rv(O,F){Qo(1,0,F),Ov(),Av(function(){O&&O(),H[pr]>0?z=oi(function(){z=null,rv(H.shift(),F)},0):(z=null,Si())})}function Av(O){Me[zd]()?O():z=oi(function(){z=null,Av(O)},zf)}function nv(){ba(),iv(),Re=e,Si()}function iv(){Qe={},Qe[e]=[2,1,0],Qe[r]=[6,3,0],Qe[n]=[18,9,0]}function av(O,F){var B=[],K=sn;dn&&(K=Qn),Ir(O,function(re){re&&re[Fi]()>0&&Ir(re[ql](),function(Q){Q&&(Q[nm]&&(Q[Yf]=4,Q[nm]=!1),Q[Km]<K?($c(Q,kt[Bf]),gu(Q,!1)):B[En](Q))})}),B[pr]>0&&ov(Xn,B,Ao.NonRetryableStatus),dn&&Wc(2,2)}function _u(O,F){var B=Dr||{},K=B[O];if(K)try{K.apply(B,F)}catch(re){qi(kt.diagLog(),1,74,O+" notification failed: "+re)}}function ov(O,F){for(var B=[],K=2;K<arguments.length;K++)B[K-2]=arguments[K];F&&F[pr]>0&&_u(O,[F][io](B))}function o(O,F){for(var B=[],K=2;K<arguments.length;K++)B[K-2]=arguments[K];F&&F[pr]>0&&Ir(F,function(re){re&&re[Fi]()>0&&_u(O,[re.events()][io](B))})}function l(O,F,B){O&&O[pr]>0&&_u("eventsSendRequest",[F>=1e3&&F<=1999?F-1e3:0,B!==!0])}function v(O,F){o("eventsSent",O,F),Si()}function b(O,F){o(Xn,O,F>=8e3&&F<=8999?F-8e3:Ao.Unknown)}function I(O){o(Xn,O,Ao.NonRetryableStatus),Si()}function R(O,F){o(Xn,O,Ao.Unknown),Si()}function L(){St?Kt=0:Kt=Math.max(Xd*(bg+1),Xe/6)}}),N}return w.__ieDyn=1,w}(Pf);t.BE_PROFILE=n,t.NRT_PROFILE=r,t.PostChannel=ep,t.RT_PROFILE=e})});var oN=gt(vm=>{"use strict";var nL=vm&&vm.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iL=vm&&vm.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),aN=vm&&vm.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&nL(e,t,r);return iL(e,t),e};Object.defineProperty(vm,"__esModule",{value:!0});vm.oneDataSystemClientFactory=void 0;var aL=async(t,e,r)=>{let n=await Promise.resolve().then(()=>aN(rN())),i=await Promise.resolve().then(()=>aN(iN())),a=new n.AppInsightsCore,u=new i.PostChannel,f={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[u]]};if(r){f.extensionConfig={};let x={alwaysUseXhrOverride:!0,httpXHROverride:r};f.extensionConfig[u.identifier]=x}let y=e.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(f,[]),a.addTelemetryInitializer(x=>{x.ext=x.ext??{},x.ext.web=x.ext.web??{},x.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',y&&(x.ext.utc=x.ext.utc??{},x.ext.utc.flags=8462029)}),a},oL=async(t,e,r)=>{let n=await aL(t,e,r);return{logEvent:(u,f)=>{try{n==null||n.track({name:u,baseData:{name:u,properties:f==null?void 0:f.properties,measurements:f==null?void 0:f.measurements}})}catch(m){throw new Error(`Failed to log event to app insights!
`+m.message)}},flush:async()=>{try{return new Promise((f,m)=>{if(!n){f();return}n.flush(!0,y=>{if(!y){m("Failed to flush app 1DS!");return}})})}catch(u){throw new Error(`Failed to flush 1DS!
`+u.message)}},dispose:async()=>new Promise(f=>{if(!n){f();return}n.unload(!1,()=>{f(),n=void 0},1e3)})}};vm.oneDataSystemClientFactory=oL});var uN=gt((Tw,sN)=>{(function(t,e){typeof Tw=="object"&&typeof sN<"u"?e(Tw):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(Tw,function(t){"use strict";function e(p,_){return p||_}function r(p,_){return p[_]}var n=void 0,i=null,a="",u="function",f="object",m="prototype",y="__proto__",x="undefined",P="constructor",V="Symbol",G="_polyfill",Y="length",q="name",J="call",ee="toString",ve=e(Object),ye=r(ve,m),ue=e(String),_e=r(ue,m),Ue=e(Math),$e=e(Array),Ke=r($e,m),ct=r(Ke,"slice");function vt(p,_){try{return{v:p.apply(this,_)}}catch(S){return{e:S}}}function wr(p){return function(_){return typeof _===p}}function $r(p){var _="[object "+p+"]";return function(S){return!!(S&&Ne(S)===_)}}function Ne(p){return ye[ee].call(p)}function dt(p){return typeof p===x||p===x}function Or(p){return!yn(p)}function Ze(p){return p===i||dt(p)}function yn(p){return!!p||p!==n}var Le=wr("string"),qt=wr(u);function Wt(p){return!p&&Ze(p)?!1:!!p&&typeof p===f}var Tt=r($e,"isArray"),mn=$r("Error"),lt=r(ve,"getOwnPropertyDescriptor");function ti(p,_){return!!p&&ye.hasOwnProperty[J](p,_)}var ut=e(r(ve,"hasOwn"),Su);function Su(p,_){return ti(p,_)||!!lt(p,_)}function er(p,_,S){if(p&&Wt(p)){for(var k in p)if(ut(p,k)&&_[J](S||p,k,p[k])===-1)break}}var Ya={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Xt(p){var _={};if(_[Ya.c]=!0,_[Ya.e]=!0,p.l){_.get=function(){return p.l.v};var S=lt(p.l,"v");S&&S.set&&(_.set=function(k){p.l.v=k})}return er(p,function(k,j){_[Ya[k]]=Or(j)?_[Ya[k]]:j}),_}var fr=r(ve,"defineProperty");function Ni(p,_,S){return fr(p,_,Xt(S))}function mr(p,_,S,k,j){var Z={};return er(p,function(X,oe){Ci(Z,X,_?oe:X,j),Ci(Z,oe,S?oe:X,j)}),k?k(Z):Z}function Ci(p,_,S,k){fr(p,_,{value:S,enumerable:!0,writable:!!k})}var Fr=e(ue),qn="[object Error]";function Ot(p,_){var S=a,k=ye[ee][J](p);k===qn&&(p={stack:Fr(p.stack),message:Fr(p.message),name:Fr(p.name)});try{S=JSON.stringify(p,i,_?typeof _=="number"?_:4:n),S=(S?S.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||Fr(p)}catch(j){S=" - "+Ot(j,_)}return k+": "+S}function Ur(p){throw new Error(p)}function tt(p){throw new TypeError(p)}var An=r(ve,"freeze");function Gr(p){return p}function Xr(p){return p[y]||i}var Ia=r(ve,"assign"),Ui=r(ve,"keys"),jr=e(An,Gr),ar=e(r(ve,"getPrototypeOf"),Xr);function br(p){return mr(p,1,0,jr)}function cn(p){var _={};return er(p,function(S,k){Ci(_,S,k[1]),Ci(_,k[0],k[1])}),jr(_)}function nd(p){return cn(p)}var ri="__tsUtils$gblCfg",id;function Eu(){var p;return typeof globalThis!==x&&(p=globalThis),!p&&typeof self!==x&&(p=self),!p&&typeof window!==x&&(p=window),!p&&typeof global!==x&&(p=global),p}function Cn(){if(!id){var p=vt(Eu).v||{};id=p[ri]=p[ri]||{}}return id}var os=Qt;function Qt(p,_,S){var k=_?_[p]:i;return function(j){var Z=(j?j[p]:i)||k;if(Z||S){var X=arguments;return(Z||S).apply(j,Z?ct[J](X,1):X)}tt('"'+Fr(p)+'" not defined for '+Ot(j))}}var ji=r(Ue,"max"),qa=os("slice",_e),ss=os("substring",_e),Na=Qt("substr",_e,ad);function ad(p,_,S){return Ze(p)&&tt("Invalid "+Ot(p)),S<0?a:(_=_||0,_<0&&(_=ji(_+p[Y],0)),dt(S)?qa(p,_):qa(p,_,_+S))}function sc(p,_){return ss(p,0,_)}var Zi="_urid",Ca;function ki(){if(!Ca){var p=Cn();Ca=p.gblSym=p.gblSym||{k:{},s:{}}}return Ca}function us(p){var _={description:Fr(p),toString:function(){return V+"("+p+")"}};return _[G]=!0,_}function Vs(p){var _=ki();if(!ut(_.k,p)){var S=us(p),k=Ui(_.s).length;S[Zi]=function(){return k+"_"+S[ee]()},_.k[p]=S,_.s[S[Zi]()]=Fr(p)}return _.k[p]}var ui;function uc(){ui=Cn()}function Gs(p){return fr({toJSON:function(){return p}},"v",{value:p})}var ka="window",ni;function al(p,_){var S;return function(){return!ui&&uc(),(!S||ui.lzy)&&(S=Gs(vt(p,_).v)),S.v}}function zs(p){return!ui&&uc(),(!ni||p===!1||ui.lzy)&&(ni=Gs(vt(Eu).v||i)),ni.v}function ci(p,_){var S;if(!ni||_===!1?S=zs(_):S=ni.v,S&&S[p])return S[p];if(p===ka)try{return window}catch{}return i}var ca=al(ci,["document"]);function vr(){return!!kn()}var kn=al(ci,[ka]);function Da(){return!!Qr()}var Qr=al(ci,["navigator"]),_i,Ha;function en(){return _i=Gs(vt(ci,[V]).v),_i}function la(p){var _=(ui.lzy?0:_i)||en();return _.v?_.v[p]:n}function Tu(p,_){!ui&&uc();var S=(ui.lzy?0:_i)||en();return S.v?S.v(p):_?i:us(p)}function fa(p){return!ui&&uc(),Ha=(ui.lzy?0:Ha)||Gs(vt(la,["for"]).v),(Ha.v||Vs)(p)}function wn(p,_,S){return p.apply(_,S)}function li(p,_,S){if(p)for(var k=p[Y]>>>0,j=0;j<k&&!(j in p&&_[J](S||p,p[j],j,p)===-1);j++);}var cc=os("indexOf",Ke),Ra=os("map",Ke),Ar=os("reduce",Ke),Di=e(r(ve,"create"),od);function od(p){if(!p)return{};var _=typeof p;_!==f&&_!==u&&tt("Prototype must be an Object or function: "+Ot(p));function S(){}return S[m]=p,new S}var Bi;function cs(p,_){var S=ve.setPrototypeOf||function(k,j){var Z;!Bi&&(Bi=Gs((Z={},Z[y]=[],Z instanceof Array))),Bi.v?k[y]=j:er(j,function(X,oe){return k[X]=oe})};return S(p,_)}function ol(p,_,S){vt(Ni,[_,q,{v:p,c:!0,e:!1}]),_=cs(_,S);function k(){this[P]=_,vt(Ni,[this,q,{v:p,c:!0,e:!1}])}return _[m]=S===i?Di(S):(k[m]=S[m],new k),_}function ls(p,_){_&&(p[q]=_)}function sd(p,_,S){var k=S||Error,j=k[m][q],Z=Error.captureStackTrace;return ol(p,function(){var X=this,oe=arguments;try{vt(ls,[k,p]);var ge=wn(k,X,ct[J](oe))||X;if(ge!==X){var be=ar(X);be!==ar(ge)&&cs(ge,be)}return Z&&Z(ge,X[P]),_&&_(ge,oe),ge}finally{vt(ls,[k,j])}},k)}function vn(){return(Date.now||of)()}function of(){return new Date().getTime()}function da(p){return function(S){return Ze(S)&&tt("strTrim called ["+Ot(S)+"]"),S&&S.replace&&(S=S.replace(p,a)),S}}var mp=da(/^\s+|(?=\s)\s+$/g),fi=Qt("trim",_e,mp),Nh,Oa,sf;function fo(p){if(!p||typeof p!==f)return!1;sf||(sf=vr()?kn():!0);var _=!1;if(p!==sf){Oa||(Nh=Function[m][ee],Oa=Nh[J](ve));try{var S=ar(p);_=!S,_||(ti(S,P)&&(S=S[P]),_=!!(S&&typeof S===u&&Nh[J](S)===Oa))}catch{}}return _}var ud;function Ir(){return!ui&&uc(),(!ud||ui.lzy)&&(ud=Gs(vt(ci,["performance"]).v)),ud.v}var fs=Qt("endsWith",_e,cd);function cd(p,_,S){Le(p)||tt("'"+Ot(p)+"' is not a string");var k=Le(_)?_:Fr(_),j=!dt(S)&&S<p[Y]?S:p[Y];return ss(p,j-k[Y],j)===k}var Xi=os("indexOf",_e),sl="ref",jt="unref",Aa="hasRef",lc="enabled";function uf(p,_,S){var k=!0,j=p?_(i):i,Z;function X(){return k=!1,j&&j[jt]&&j[jt](),Z}function oe(){j&&S(j),j=i}function ge(){return j=_(j),k||X(),Z}function be(rt){!rt&&j&&oe(),rt&&!j&&ge()}return Z={cancel:oe,refresh:ge},Z[Aa]=function(){return j&&j[Aa]?j[Aa]():k},Z[sl]=function(){return k=!0,j&&j[sl]&&j[sl](),Z},Z[jt]=X,Z=fr(Z,lc,{get:function(){return!!j},set:be}),{h:Z,dn:function(){j=i}}}function xm(p,_,S){var k=Tt(_),j=k?_.length:0,Z=(j>0?_[0]:k?n:_)||setTimeout,X=(j>1?_[1]:n)||clearTimeout,oe=S[0];S[0]=function(){ge.dn(),wn(oe,n,ct[J](arguments))};var ge=uf(p,function(be){if(be){if(be.refresh)return be.refresh(),be;wn(X,n,[be])}return wn(Z,n,S)},function(be){wn(X,n,[be])});return ge.h}function Va(p,_){return xm(!0,n,ct[J](arguments))}var cf=br,vp=nd,xu="toLowerCase",Ga="blkVal",_t="length",Ri="rdOnly",Iu="notify",Ws="warnToConsole",gp="throwInternal",_p="setDf",Dn="watch",Pa="logger",yp="apply",za="push",pa="splice",bv="hdlr",Im="cancel",Ch="name",Nu="unload",kh="version",dg="loggingLevelConsole",wp="messageId",Qi="message",lf="diagLog",ff="userAgent",po="split",Ma="nodeType",Cu="replace",Dh="logInternalMessage",Wa="type",bp="handler",ku="traceId",ul="spanId",df="traceFlags",ld="getAttribute",Sp;function Rh(p,_){Sp||(Sp=sd("AggregationError",function(k,j){j[_t]>1&&(k.errors=j[1])}));var S=p||"One or more errors occurred.";throw li(_,function(k,j){S+=`
`.concat(j," > ").concat(Ot(k))}),new Sp(S,_||[])}var Oh="function",Du="object",Ep="undefined",Js="prototype",fc=Object,Ja=fc[Js];(zs()||{}).Symbol,(zs()||{}).Reflect;var pf="hasOwnProperty",fd=function(p){for(var _,S=1,k=arguments.length;S<k;S++){_=arguments[S];for(var j in _)Ja[pf].call(_,j)&&(p[j]=_[j])}return p},cl=Ia||fd,ho=function(p,_){return ho=fc.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,k){S.__proto__=k}||function(S,k){for(var j in k)k[pf](j)&&(S[j]=k[j])},ho(p,_)};function Nm(p,_){typeof _!==Oh&&_!==null&&tt("Class extends value "+String(_)+" is not a constructor or null"),ho(p,_);function S(){this.constructor=p}p[Js]=_===null?Di(_):(S[Js]=_[Js],new S)}var ds,Oo="constructor",mo="prototype",Ru="function",dd="_dynInstFuncs",ll="_isDynProxy",fl="_dynClass",dc="_dynCls$",pd="_dynInstChk",hf=pd,hd="_dfOpts",pc="_unknown_",vo="__proto__",dl="_dyn"+vo,Ao="__dynProto$Gbl",La="_dynInstProto",ps="useBaseInst",ln="setInstFuncs",Ks=Object,go=Ks.getPrototypeOf,pl=Ks.getOwnPropertyNames,hl=zs(),hs=hl[Ao]||(hl[Ao]={o:(ds={},ds[ln]=!0,ds[ps]=!0,ds),n:1e3});function mf(p){return p&&(p===Ks[mo]||p===Array[mo])}function ms(p){return mf(p)||p===Function[mo]}function Ou(p){var _;if(p){if(go)return go(p);var S=p[vo]||p[mo]||(p[Oo]?p[Oo][mo]:null);_=p[dl]||S,ti(p,dl)||(delete p[La],_=p[dl]=p[La]||p[dl],p[La]=S)}return _}function ha(p,_){var S=[];if(pl)S=pl(p);else for(var k in p)typeof k=="string"&&ti(p,k)&&S.push(k);if(S&&S.length>0)for(var j=0;j<S.length;j++)_(S[j])}function Tp(p,_,S){return _!==Oo&&typeof p[_]===Ru&&(S||ti(p,_))&&_!==vo&&_!==mo}function hc(p){tt("DynamicProto: "+p)}function ea(p){var _=Di(null);return ha(p,function(S){!_[S]&&Tp(p,S,!1)&&(_[S]=p[S])}),_}function md(p,_){for(var S=p.length-1;S>=0;S--)if(p[S]===_)return!0;return!1}function xp(p,_,S,k){function j(ge,be,rt){var Bt=be[rt];if(Bt[ll]&&k){var ur=ge[dd]||{};ur[hf]!==!1&&(Bt=(ur[be[fl]]||{})[rt]||Bt)}return function(){return Bt.apply(ge,arguments)}}var Z=Di(null);ha(S,function(ge){Z[ge]=j(_,S,ge)});for(var X=Ou(p),oe=[];X&&!ms(X)&&!md(oe,X);)ha(X,function(ge){!Z[ge]&&Tp(X,ge,!go)&&(Z[ge]=j(_,X,ge))}),oe.push(X),X=Ou(X);return Z}function vf(p,_,S,k){var j=null;if(p&&ti(S,fl)){var Z=p[dd]||Di(null);if(j=(Z[S[fl]]||Di(null))[_],j||hc("Missing ["+_+"] "+Ru),!j[pd]&&Z[hf]!==!1){for(var X=!ti(p,_),oe=Ou(p),ge=[];X&&oe&&!ms(oe)&&!md(ge,oe);){var be=oe[_];if(be){X=be===k;break}ge.push(oe),oe=Ou(oe)}try{X&&(p[_]=j),j[pd]=1}catch{Z[hf]=!1}}}return j}function gf(p,_,S){var k=_[p];return k===S&&(k=Ou(_)[p]),typeof k!==Ru&&hc("["+p+"] is not a "+Ru),k}function Ip(p,_,S,k,j){function Z(ge,be){var rt=function(){var Bt=vf(this,be,ge,rt)||gf(be,ge,rt);return Bt.apply(this,arguments)};return rt[ll]=1,rt}if(!mf(p)){var X=S[dd]=S[dd]||Di(null);if(!mf(X)){var oe=X[_]=X[_]||Di(null);X[hf]!==!1&&(X[hf]=!!j),mf(oe)||ha(S,function(ge){Tp(S,ge,!1)&&S[ge]!==k[ge]&&(oe[ge]=S[ge],delete S[ge],(!ti(p,ge)||p[ge]&&!p[ge][ll])&&(p[ge]=Z(p,ge)))})}}}function Cm(p,_){if(go){for(var S=[],k=Ou(_);k&&!ms(k)&&!md(S,k);){if(k===p)return!0;S.push(k),k=Ou(k)}return!1}return!0}function mc(p,_){return ti(p,mo)?p.name||_||pc:((p||{})[Oo]||{}).name||_||pc}function Po(p,_,S,k){ti(p,mo)||hc("theClass is an invalid class definition.");var j=p[mo];Cm(j,_)||hc("["+mc(p)+"] not in hierarchy of ["+mc(_)+"]");var Z=null;ti(j,fl)?Z=j[fl]:(Z=dc+mc(p,"_")+"$"+hs.n,hs.n++,j[fl]=Z);var X=Po[hd],oe=!!X[ps];oe&&k&&k[ps]!==void 0&&(oe=!!k[ps]);var ge=ea(_),be=xp(j,_,ge,oe);S(_,be);var rt=!!go&&!!X[ln];rt&&k&&(rt=!!k[ln]),Ip(j,Z,_,ge,rt!==!1)}Po[hd]=hs.o;var _o=void 0,Rn="",_f="Not dynamic - ",vc=/-([a-z])/g,gc=/([^\w\d_$])/g,Np=/^(\d+[\w\d_$])/;function Ka(p){return!Ze(p)}function Au(p){var _=p;return _&&Le(_)&&(_=_[Cu](vc,function(S,k){return k.toUpperCase()}),_=_[Cu](gc,"_"),_=_[Cu](Np,function(S,k){return"_"+k})),_}function Zs(p,_){return p&&_?Xi(p,_)!==-1:!1}function dr(p){return p&&p.toISOString()||""}function Mo(p){return mn(p)?p[Ch]:Rn}function vs(p){return function(){function _(){var S=this;p&&er(p,function(k,j){S[k]=j})}return _}()}var Za="console",vd="JSON",Xa="crypto",Pu="msCrypto",bn="msie",ma="trident/",Jr=null,yt=null,_c=null;function Lo(){return typeof console!==Ep?console:ci(Za)}function Xs(){return!!(typeof JSON===Du&&JSON||ci(vd)!==null)}function yo(){return Xs()?JSON||ci(vd):null}function Mu(){return ci(Xa)}function Qa(){return ci(Pu)}function tn(){var p=Qr();if(p&&(p[ff]!==yt||Jr===null)){yt=p[ff];var _=(yt||Rn)[xu]();Jr=Zs(_,bn)||Zs(_,ma)}return Jr}function Fo(p){return(_c===null||p===!1)&&(_c=Da()&&!!Qr().sendBeacon),_c}function Kr(p,_){if(p)for(var S=0;S<p[_t];S++){var k=p[S];if(k[Ch]&&k[Ch]===_)return k}return{}}function Uo(p){var _=ca();return _&&p?Kr(_.querySelectorAll("meta"),p).content:null}function gd(p){var _,S=Ir();if(S){var k=S.getEntriesByType("navigation")||[];_=Kr((k[_t]>0?k[0]:{}).serverTiming,p).description}return _}var jo=4294967296,Zn=4294967295,wo=123456789,gs=987654321,$i=!1,ta=wo,ml=gs;function yc(p){p<0&&(p>>>=0),ta=wo+p&Zn,ml=gs-p&Zn,$i=!0}function _d(){try{var p=vn()&2147483647;yc((Math.random()*jo^p)+p)}catch{}}function Qs(p){return p>0?Math.floor(Bo()/Zn*(p+1))>>>0:0}function Bo(p){var _=0,S=Mu()||Qa();return S&&S.getRandomValues&&(_=S.getRandomValues(new Uint32Array(1))[0]&Zn),_===0&&tn()&&($i||_d(),_=$o()&Zn),_===0&&(_=Math.floor(jo*Math.random()|0)),p||(_>>>=0),_}function $o(p){ml=36969*(ml&65535)+(ml>>16)&Zn,ta=18e3*(ta&65535)+(ta>>16)&Zn;var _=(ml<<16)+(ta&65535)>>>0&Zn|0;return p||(_>>>=0),_}function wc(p){p===void 0&&(p=22);for(var _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S=Bo()>>>0,k=0,j=Rn;j[_t]<p;)k++,j+=_.charAt(S&63),S>>>=6,k===5&&(S=(Bo()<<2&4294967295|S&3)>>>0,k=0);return j}var Yo="3.3.5",ii="."+wc(6),yd=0;function bc(p){return p[Ma]===1||p[Ma]===9||!+p[Ma]}function eu(p,_){var S=_[p.id];if(!S){S={};try{bc(_)&&Ni(_,p.id,{e:!1,v:S})}catch{}}return S}function Fa(p,_){return _===void 0&&(_=!1),Au(p+yd+++(_?"."+Yo:Rn)+ii)}function _s(p){var _={id:Fa("_aiData-"+(p||Rn)+"."+Yo),accept:function(S){return bc(S)},get:function(S,k,j,Z){var X=S[_.id];return X?X[Au(k)]:(Z&&(X=eu(_,S),X[Au(k)]=j),j)},kill:function(S,k){if(S&&S[k])try{delete S[k]}catch{}}};return _}function tu(p){return p&&Wt(p)&&(p.isVal||p.fb||ut(p,"v")||ut(p,"mrg")||ut(p,"ref")||p.set)}function eo(p,_,S){var k,j=S.dfVal||yn;if(_&&S.fb){var Z=S.fb;Tt(Z)||(Z=[Z]);for(var X=0;X<Z[_t];X++){var oe=Z[X],ge=_[oe];if(j(ge)?k=ge:p&&(ge=p.cfg[oe],j(ge)&&(k=ge),p.set(p.cfg,Fr(oe),ge)),j(k))break}}return!j(k)&&j(S.v)&&(k=S.v),k}function vl(p,_,S){var k=S;if(S&&tu(S)&&(k=eo(p,_,S)),k){tu(k)&&(k=vl(p,_,k));var j;Tt(k)?(j=[],j[_t]=k[_t]):fo(k)&&(j={}),j&&(er(k,function(Z,X){X&&tu(X)&&(X=vl(p,_,X)),j[Z]=X}),k=j)}return k}function Lu(p,_,S,k){var j,Z,X,oe=k,ge,be,rt,Bt;tu(oe)?(j=oe.isVal,Z=oe.set,rt=oe[Ri],Bt=oe[Ga],ge=oe.mrg,be=oe.ref,!be&&dt(be)&&(be=!!ge),X=eo(p,_,oe)):X=k,Bt&&p[Ga](_,S);var ur,hr=!0,ht=_[S];(ht||!Ze(ht))&&(ur=ht,hr=!1,j&&ur!==X&&!j(ur)&&(ur=X,hr=!0),Z&&(ur=Z(ur,X,_),hr=ur===X)),hr?X?ur=vl(p,_,X):ur=X:(fo(ur)||Tt(X))&&ge&&X&&(fo(X)||Tt(X))&&er(X,function(cr,Ht){Lu(p,ur,cr,Ht)}),p.set(_,S,ur),be&&p.ref(_,S),rt&&p[Ri](_,S)}var Oi=fa("[[ai_dynCfg_1]]"),Fu=fa("[[ai_blkDynCfg_1]]"),ru=fa("[[ai_frcDynCfg_1]]");function to(p){if(p){var _;if(Tt(p)?(_=[],_[_t]=p[_t]):fo(p)&&(_={}),_)return er(p,function(S,k){_[S]=to(k)}),_}return p}function Sc(p){if(p){var _=p[Oi]||p;if(_.cfg&&(_.cfg===p||_.cfg[Oi]===_))return _}return null}function Sn(p){if(p&&(fo(p)||Tt(p)))try{p[Fu]=!0}catch{}return p}function yi(p,_,S){var k=!1;return S&&!p[_.blkVal]&&(k=S[ru],!k&&!S[Fu]&&(k=fo(S)||Tt(S))),k}function ro(p){tt("InvalidAccess:"+p)}var Ec=["push","pop","shift","unshift","splice"],ys=function(p,_,S,k){p&&p[gp](3,108,"".concat(S," [").concat(_,"] failed - ")+Ot(k))};function Cp(p,_,S){Tt(_)&&li(Ec,function(k){var j=_[k];_[k]=function(){for(var Z=[],X=0;X<arguments.length;X++)Z[X]=arguments[X];var oe=j[yp](this,Z);return va(p,_,S,"Patching"),oe}})}function Ua(p,_){var S=lt(p,_);return S&&S.get}function gl(p,_,S,k){var j={n:S,h:[],trk:function(be){be&&be.fn&&(cc(j.h,be)===-1&&j.h[za](be),p.trk(be,j))},clr:function(be){var rt=cc(j.h,be);rt!==-1&&j.h[pa](rt,1)}},Z=!0,X=!1;function oe(){Z&&(X=X||yi(oe,p,k),k&&!k[Oi]&&X&&(k=va(p,k,S,"Converting")),Z=!1);var be=p.act;return be&&j.trk(be),k}oe[p.prop]={chng:function(){p.add(j)}};function ge(be){if(k!==be){oe[p.ro]&&!p.upd&&ro("["+S+"] is read-only:"+Ot(_)),Z&&(X=X||yi(oe,p,k),Z=!1);var rt=X&&oe[p.rf];if(X)if(rt){er(k,function(ur){k[ur]=be?be[ur]:_o});try{er(be,function(ur,hr){Yi(p,k,ur,hr)}),be=k}catch(ur){ys((p.hdlr||{})[Pa],S,"Assigning",ur),X=!1}}else k&&k[Oi]&&er(k,function(ur){var hr=Ua(k,ur);if(hr){var ht=hr[p.prop];ht&&ht.chng()}});if(be!==k){var Bt=be&&yi(oe,p,be);!rt&&Bt&&(be=va(p,be,S,"Converting")),k=be,X=Bt}p.add(j)}}Ni(_,j.n,{g:oe,s:ge})}function Yi(p,_,S,k){if(_){var j=Ua(_,S),Z=j&&!!j[p.prop];Z?_[S]=k:gl(p,_,S,k)}return _}function wd(p,_,S,k){if(_){var j=Ua(_,S),Z=j&&!!j[p.prop],X=k&&k[0],oe=k&&k[1],ge=k&&k[2];if(!Z){if(ge)try{Sn(_)}catch(be){ys((p.hdlr||{})[Pa],S,"Blocking",be)}try{Yi(p,_,S,_[S]),j=Ua(_,S)}catch(be){ys((p.hdlr||{})[Pa],S,"State",be)}}X&&(j[p.rf]=X),oe&&(j[p.ro]=oe),ge&&(j[p.blkVal]=!0)}return _}function va(p,_,S,k){try{er(_,function(j,Z){Yi(p,_,j,Z)}),_[Oi]||(fr(_,Oi,{get:function(){return p[bv]}}),Cp(p,_,S))}catch(j){ys((p.hdlr||{})[Pa],S,k,j)}return _}var ws="[[ai_",bs="]]";function kp(p){var _,S=Tu(ws+"get"+p.uid+bs),k=Tu(ws+"ro"+p.uid+bs),j=Tu(ws+"rf"+p.uid+bs),Z=Tu(ws+"blkVal"+p.uid+bs),X=Tu(ws+"dtl"+p.uid+bs),oe=null,ge=null,be;function rt(ht,cr){var Ht=be.act;try{be.act=ht,ht&&ht[X]&&(li(ht[X],function(Mr){Mr.clr(ht)}),ht[X]=[]),cr({cfg:p.cfg,set:p.set.bind(p),setDf:p[_p].bind(p),ref:p.ref.bind(p),rdOnly:p[Ri].bind(p)})}catch(Mr){var Pr=p[Pa];throw Pr&&Pr[gp](1,107,Ot(Mr)),Mr}finally{be.act=Ht||null}}function Bt(){if(oe){var ht=oe;oe=null,ge&&ge[Im](),ge=null;var cr=[];if(li(ht,function(Ht){if(Ht&&(Ht[X]&&(li(Ht[X],function(Pr){Pr.clr(Ht)}),Ht[X]=null),Ht.fn))try{rt(Ht,Ht.fn)}catch(Pr){cr[za](Pr)}}),oe)try{Bt()}catch(Ht){cr[za](Ht)}cr[_t]>0&&Rh("Watcher error(s): ",cr)}}function ur(ht){if(ht&&ht.h[_t]>0){oe||(oe=[]),ge||(ge=Va(function(){ge=null,Bt()},0));for(var cr=0;cr<ht.h[_t];cr++){var Ht=ht.h[cr];Ht&&cc(oe,Ht)===-1&&oe[za](Ht)}}}function hr(ht,cr){if(ht){var Ht=ht[X]=ht[X]||[];cc(Ht,cr)===-1&&Ht[za](cr)}}return be=(_={prop:S,ro:k,rf:j},_[Ga]=Z,_[bv]=p,_.add=ur,_[Iu]=Bt,_.use=rt,_.trk=hr,_),be}function yf(p,_){var S={fn:_,rm:function(){S.fn=null,p=null,_=null}};return Ni(S,"toJSON",{v:function(){return"WatcherHandler"+(S.fn?"":"[X]")}}),p.use(S,_),S}function bd(p,_,S){var k,j=Sc(_);if(j)return j;var Z=Fa("dyncfg",!0),X=_&&S!==!1?_:to(_),oe;function ge(){oe[Iu]()}function be(Pr,Mr,Lt){try{Pr=Yi(oe,Pr,Mr,Lt)}catch(Mn){ys(p,Mr,"Setting value",Mn)}return Pr[Mr]}function rt(Pr){return yf(oe,Pr)}function Bt(Pr,Mr){oe.use(null,function(Lt){var Mn=oe.upd;try{dt(Mr)||(oe.upd=Mr),Pr(Lt)}finally{oe.upd=Mn}})}function ur(Pr,Mr){var Lt;return wd(oe,Pr,Mr,(Lt={},Lt[0]=!0,Lt))[Mr]}function hr(Pr,Mr){var Lt;return wd(oe,Pr,Mr,(Lt={},Lt[1]=!0,Lt))[Mr]}function ht(Pr,Mr){var Lt;return wd(oe,Pr,Mr,(Lt={},Lt[2]=!0,Lt))[Mr]}function cr(Pr,Mr){return Mr&&er(Mr,function(Lt,Mn){Lu(Ht,Pr,Lt,Mn)}),Pr}var Ht=(k={uid:null,cfg:X},k[Pa]=p,k[Iu]=ge,k.set=be,k[_p]=cr,k[Dn]=rt,k.ref=ur,k[Ri]=hr,k[Ga]=ht,k._block=Bt,k);return Ni(Ht,"uid",{c:!1,e:!1,w:!1,v:Z}),oe=kp(Ht),va(oe,X,"config","Creating"),Ht}function wf(p,_){p?(p[Ws](_),p[gp](2,108,_)):ro(_)}function qo(p,_,S,k){var j=bd(S,p||{},k);return _&&j[_p](j.cfg,_),j}function ga(p,_,S){var k=p[Oi]||p;return k.cfg&&(k.cfg===p||k.cfg[Oi]===k)?k[Dn](_):(wf(S,_f+Ot(p)),qo(p,null,S)[Dn](_))}var _l=null;function km(){var p=ci("Microsoft");return p&&(_l=p.ApplicationInsights),_l}function Tc(p){var _=_l;return!_&&p.disableDbgExt!==!0&&(_=_l||km()),_?_.ChromeDbgExt:null}var xc,Ss="warnToConsole",bf="AI (Internal): ",Sv="AI: ",Dp="AITR_",Sf={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Ic=(xc={},xc[0]=null,xc[1]="errorToConsole",xc[2]=Ss,xc[3]="debugToConsole",xc);function Ah(p){return p?'"'+p[Cu](/\"/g,Rn)+'"':Rn}function Dm(p,_){var S=Lo();if(S){var k="log";S[p]&&(k=p),qt(S[k])&&S[k](_)}}var Nc=function(){function p(_,S,k,j){k===void 0&&(k=!1);var Z=this;Z[wp]=_,Z[Qi]=(k?Sv:bf)+_;var X=Rn;Xs()&&(X=yo().stringify(j));var oe=(S?" message:"+Ah(S):Rn)+(j?" props:"+Ah(X):Rn);Z[Qi]+=oe}return p.dataType="MessageData",p}();function Rm(p,_){return(p||{})[Pa]||new Ef(_)}var Ef=function(){function p(_){this.identifier="DiagnosticLogger",this.queue=[];var S=0,k={},j,Z,X,oe,ge;Po(p,this,function(be){ge=Bt(_||{}),be.consoleLoggingLevel=function(){return j},be[gp]=function(ht,cr,Ht,Pr,Mr){Mr===void 0&&(Mr=!1);var Lt=new Nc(cr,Ht,Mr,Pr);if(oe)throw Ot(Lt);var Mn=Ic[ht]||Ss;if(dt(Lt[Qi]))hr("throw"+(ht===1?"Critical":"Warning"),Lt);else{if(Mr){var jf=+Lt[wp];!k[jf]&&j>=ht&&(be[Mn](Lt[Qi]),k[jf]=!0)}else j>=ht&&be[Mn](Lt[Qi]);rt(ht,Lt)}},be.debugToConsole=function(ht){Dm("debug",ht),hr("warning",ht)},be[Ws]=function(ht){Dm("warn",ht),hr("warning",ht)},be.errorToConsole=function(ht){Dm("error",ht),hr("error",ht)},be.resetInternalMessageCount=function(){S=0,k={}},be[Dh]=rt,be[Nu]=function(ht){ge&&ge.rm(),ge=null};function rt(ht,cr){if(!ur()){var Ht=!0,Pr=Dp+cr[wp];if(k[Pr]?Ht=!1:k[Pr]=!0,Ht&&(ht<=Z&&(be.queue[za](cr),S++,hr(ht===1?"error":"warn",cr)),S===X)){var Mr="Internal events throttle limit per PageView reached for this app.",Lt=new Nc(23,Mr,!1);be.queue[za](Lt),ht===1?be.errorToConsole(Mr):be[Ws](Mr)}}}function Bt(ht){return ga(qo(ht,Sf,be).cfg,function(cr){var Ht=cr.cfg;j=Ht[dg],Z=Ht.loggingLevelTelemetry,X=Ht.maxMessageLimit,oe=Ht.enableDebug})}function ur(){return S>=X}function hr(ht,cr){var Ht=Tc(_||{});Ht&&Ht[lf]&&Ht[lf](ht,cr)}})}return p.__ieDyn=1,p}();function Rp(p){return p||new Ef}function bo(p,_,S,k,j,Z){Z===void 0&&(Z=!1),Rp(p)[gp](_,S,k,j,Z)}function Ph(){for(var p=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],_=Rn,S,k=0;k<4;k++)S=Bo(),_+=p[S&15]+p[S>>4&15]+p[S>>8&15]+p[S>>12&15]+p[S>>16&15]+p[S>>20&15]+p[S>>24&15]+p[S>>28&15];var j=p[8+(Bo()&3)|0];return Na(_,0,8)+Na(_,9,4)+"4"+Na(_,13,3)+j+Na(_,16,3)+Na(_,19,12)}var Ev=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,Sd="00",Mh="ff",Op="00000000000000000000000000000000",yl="0000000000000000",Ed=1;function Cc(p,_,S){return p&&p[_t]===_&&p!==S?!!p.match(/^[\da-f]*$/i):!1}function nu(p,_,S){return Cc(p,_)?p:S}function wl(p){(isNaN(p)||p<0||p>255)&&(p=1);for(var _=p.toString(16);_[_t]<2;)_="0"+_;return _}function Om(p,_,S,k){var j;return j={},j[kh]=Cc(k,2,Mh)?k:Sd,j[ku]=bl(p)?p:Ph(),j[ul]=Pp(_)?_:sc(Ph(),16),j.traceFlags=S>=0&&S<=255?S:1,j}function Ap(p,_){var S;if(!p||(Tt(p)&&(p=p[0]||""),!p||!Le(p)||p[_t]>8192))return null;if(p.indexOf(",")!==-1){var k=p[po](",");p=k[_>0&&k[_t]>_?_:0]}var j=Ev.exec(fi(p));return!j||j[1]===Mh||j[2]===Op||j[3]===yl?null:(S={version:(j[1]||Rn)[xu](),traceId:(j[2]||Rn)[xu](),spanId:(j[3]||Rn)[xu]()},S[df]=parseInt(j[4],16),S)}function bl(p){return Cc(p,32,Op)}function Pp(p){return Cc(p,16,yl)}function iu(p){return!(!p||!Cc(p[kh],2,Mh)||!Cc(p[ku],32,Op)||!Cc(p[ul],16,yl)||!Cc(wl(p[df]),2))}function rn(p){return iu(p)?(p[df]&Ed)===Ed:!1}function kc(p){if(p){var _=wl(p[df]);Cc(_,2)||(_="01");var S=p[kh]||Sd;return S!=="00"&&S!=="ff"&&(S=Sd),"".concat(S.toLowerCase(),"-").concat(nu(p.traceId,32,Op).toLowerCase(),"-").concat(nu(p.spanId,16,yl).toLowerCase(),"-").concat(_.toLowerCase())}return""}function Ai(p){var _="traceparent",S=Ap(Uo(_),p);return S||(S=Ap(gd(_),p)),S}function Mp(p){var _=p.getElementsByTagName("script"),S=[];return li(_,function(k){var j=k[ld]("src");if(j){var Z=k[ld]("crossorigin"),X=k.hasAttribute("async")===!0,oe=k.hasAttribute("defer")===!0,ge=k[ld]("referrerpolicy"),be={url:j};Z&&(be.crossOrigin=Z),X&&(be.async=X),oe&&(be.defer=oe),ge&&(be.referrerPolicy=ge),S[za](be)}}),S}var Td="on",Sl="attachEvent",Dc="addEventListener",_a="detachEvent",xd="removeEventListener",wi="events";Fa("aiEvtPageHide"),Fa("aiEvtPageShow");var Sr=/\.[\.]+/g,au=/[\.]+$/,Pn=1,Es=_s("events"),Rc=/^([^.]*)(?:\.(.+)|)/;function Oc(p){return p&&p[Cu]?p[Cu](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Rn):p}function ou(p,_){var S;if(_){var k=Rn;Tt(_)?(k=Rn,li(_,function(Z){Z=Oc(Z),Z&&(Z[0]!=="."&&(Z="."+Z),k+=Z)})):k=Oc(_),k&&(k[0]!=="."&&(k="."+k),p=(p||Rn)+k)}var j=Rc.exec(p||Rn)||[];return S={},S[Wa]=j[1],S.ns=(j[2]||Rn).replace(Sr,".").replace(au,Rn)[po](".").sort().join("."),S}function So(p,_,S){S===void 0&&(S=!0);var k=Es.get(p,wi,{},S),j=k[_];return j||(j=k[_]=[]),j}function Tf(p,_,S,k){p&&_&&_[Wa]&&(p[xd]?p[xd](_[Wa],S,k):p[_a]&&p[_a](Td+_[Wa],S))}function Lh(p,_,S,k){var j=!1;return p&&_&&_[Wa]&&S&&(p[Dc]?(p[Dc](_[Wa],S,k),j=!0):p[Sl]&&(p[Sl](Td+_[Wa],S),j=!0)),j}function xf(p,_,S,k){for(var j=_[_t];j--;){var Z=_[j];Z&&(!S.ns||S.ns===Z.evtName.ns)&&(!k||k(Z))&&(Tf(p,Z.evtName,Z[bp],Z.capture),_[pa](j,1))}}function Fh(p,_,S){if(_[Wa])xf(p,So(p,_[Wa]),_,S);else{var k=Es.get(p,wi,{});er(k,function(j,Z){xf(p,Z,_,S)}),Ui(k)[_t]===0&&Es.kill(p,wi)}}function If(p,_){var S;return _?(Tt(_)?S=[p].concat(_):S=[p,_],S=ou("xx",S).ns[po](".")):S=p,S}function El(p,_,S,k,j){var Z;j===void 0&&(j=!1);var X=!1;if(p)try{var oe=ou(_,k);if(X=Lh(p,oe,S,j),X&&Es.accept(p)){var ge=(Z={guid:Pn++,evtName:oe},Z[bp]=S,Z.capture=j,Z);So(p,oe.type)[za](ge)}}catch{}return X}function Lp(p,_,S,k,j){if(j===void 0&&(j=!1),p)try{var Z=ou(_,k),X=!1;Fh(p,Z,function(oe){return Z.ns&&!S||oe[bp]===S?(X=!0,!0):!1}),X||Tf(p,Z,S,j)}catch{}}var di="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Tl="sampleRate",Pi="ProcessLegacy",Uu="http.method",Fp="https://dc.services.visualstudio.com",Id="/v2/track",Mi="not_specified",Nd="iKey",Up=vp({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),su="split",wt="length",Ts="toLowerCase",xs="ingestionendpoint",no="toString",Nf="push",xl="removeItem",Is="name",Eo="message",Il="count",Cd="preTriggerDate",uu="disabled",Cf="interval",Nl="daysOfMonth",kf="date",jp="getUTCDate",Bp="stringify",Uh="pathname",$p="match",ju="correlationHeaderExcludePatterns",Ac="extensionConfig",Df="exceptions",Ho="parsedStack",Ns="properties",Vo="measurements",Go="sizeInBytes",Pc="typeName",Yp="severityLevel",Mc="problemGroup",qp="isManual",Hp="hasFullStack",kd="assembly",Cs="fileName",zo="line",Wo="method",Dd="level",Rf="aiDataContract",Cl="duration",qi="receivedResponse";function ks(p,_,S){var k=_[wt],j=Rd(p,_);if(j[wt]!==k){for(var Z=0,X=j;S[X]!==void 0;)Z++,X=ss(j,0,147)+$u(Z);j=X}return j}function Rd(p,_){var S;return _&&(_=fi(Fr(_)),_[wt]>150&&(S=ss(_,0,150),bo(p,2,57,"name is too long.  It has been truncated to 150 characters.",{name:_},!0))),S||_}function ra(p,_,S){S===void 0&&(S=1024);var k;return _&&(S=S||1024,_=fi(Fr(_)),_[wt]>S&&(k=ss(_,0,S),bo(p,2,61,"string value is too long. It has been truncated to "+S+" characters.",{value:_},!0))),k||_}function cu(p,_){return kl(p,_,2048,66)}function Of(p,_){var S;return _&&_[wt]>32768&&(S=ss(_,0,32768),bo(p,2,56,"message is too long, it has been truncated to 32768 characters.",{message:_},!0)),S||_}function Ds(p,_){var S;if(_){var k=""+_;k[wt]>32768&&(S=ss(k,0,32768),bo(p,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:_},!0))}return S||_}function Li(p,_){if(_){var S={};er(_,function(k,j){if(Wt(j)&&Xs())try{j=yo()[Bp](j)}catch(Z){bo(p,2,49,"custom property is not valid",{exception:Z},!0)}j=ra(p,j,8192),k=ks(p,k,S),S[k]=j}),_=S}return _}function Bu(p,_){if(_){var S={};er(_,function(k,j){k=ks(p,k,S),S[k]=j}),_=S}return _}function Od(p,_){return _&&kl(p,_,128,69)[no]()}function kl(p,_,S,k){var j;return _&&(_=fi(Fr(_)),_[wt]>S&&(j=ss(_,0,S),bo(p,2,k,"input is too long, it has been truncated to "+S+" characters.",{data:_},!0))),j||_}function $u(p){var _="00"+p;return Na(_,_[wt]-3)}var Am=ca()||{},jh=0,Pm=[null,null,null,null,null];function Dl(p){var _=jh,S=Pm,k=S[_];return Am.createElement?S[_]||(k=S[_]=Am.createElement("a")):k={host:Ad(p,!0)},k.href=p,_++,_>=S[wt]&&(_=0),jh=_,k}function Af(p){var _,S=Dl(p);return S&&(_=S.href),_}function Bh(p){var _,S=Dl(p);return S&&(_=S[Uh]),_}function Tv(p,_){return p?p.toUpperCase()+" "+_:_}function Ad(p,_){var S=Vp(p,_)||"";if(S){var k=S[$p](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(k!=null&&k[wt]>3&&Le(k[2])&&k[2][wt]>0)return k[2]+(k[3]||"")}return S}function Vp(p,_){var S=null;if(p){var k=p[$p](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(k!=null&&k[wt]>2&&Le(k[2])&&k[2][wt]>0&&(S=k[2]||"",_&&k[wt]>2)){var j=(k[1]||"")[Ts](),Z=k[3]||"";(j==="http"&&Z===":80"||j==="https"&&Z===":443")&&(Z=""),S+=Z}}return S}var Rl=[Fp+Id,"https://breeze.aimon.applicationinsights.io"+Id,"https://dc-int.services.visualstudio.com"+Id],Yu="cid-v1:";function Gp(p){return cc(Rl,p[Ts]())!==-1}function Rs(p){Yu=p}function Pd(){return Yu}function Pf(p,_,S){if(!_||p&&p.disableCorrelationHeaders)return!1;if(p&&p[ju]){for(var k=0;k<p.correlationHeaderExcludePatterns[wt];k++)if(p[ju][k].test(_))return!1}var j=Dl(_).host[Ts]();if(j&&(Xi(j,":443")!==-1||Xi(j,":80")!==-1)&&(j=(Vp(_,!0)||"")[Ts]()),(!p||!p.enableCorsCorrelation)&&j&&j!==S)return!1;var Z=p&&p.correlationHeaderDomains;if(Z){var X;if(li(Z,function(be){var rt=new RegExp(be.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));X=X||rt.test(j)}),!X)return!1}var oe=p&&p.correlationHeaderExcludedDomains;if(!oe||oe[wt]===0)return!0;for(var k=0;k<oe[wt];k++){var ge=new RegExp(oe[k].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(ge.test(j))return!1}return j&&j[wt]>0}function Os(p){if(p){var _=Lc(p,Up[1]);if(_&&_!==Yu)return _}}function Lc(p,_){if(p)for(var S=p[su](","),k=0;k<S[wt];++k){var j=S[k][su]("=");if(j[wt]===2&&j[0]===_)return j[1]}}function Mm(p,_,S,k){var j,Z=k,X=k;if(_&&_[wt]>0){var oe=Dl(_);if(j=oe.host,!Z)if(oe[Uh]!=null){var ge=oe.pathname[wt]===0?"/":oe[Uh];ge.charAt(0)!=="/"&&(ge="/"+ge),X=oe[Uh],Z=ra(p,S?S+" "+ge:ge)}else Z=ra(p,_)}else j=k,Z=k;return{target:j,name:Z,data:X}}function Ol(){var p=Ir();if(p&&p.now&&p.timing){var _=p.now()+p.timing.navigationStart;if(_>0)return _}return vn()}function xv(p,_){var S=null;return p!==0&&_!==0&&!Ze(p)&&!Ze(_)&&(S=_-p),S}function Lm(p,_){var S=p||{};return{getName:function(){return S[Is]},setName:function(k){_&&_.setName(k),S[Is]=k},getTraceId:function(){return S.traceID},setTraceId:function(k){_&&_.setTraceId(k),bl(k)&&(S.traceID=k)},getSpanId:function(){return S.parentID},setSpanId:function(k){_&&_.setSpanId(k),Pp(k)&&(S.parentID=k)},getTraceFlags:function(){return S.traceFlags},setTraceFlags:function(k){_&&_.setTraceFlags(k),S.traceFlags=k}}}var Mf=cf({LocalStorage:0,SessionStorage:1}),$h=cf({AI:0,AI_AND_W3C:1,W3C:2}),Fm=cf({Normal:1,Critical:2}),qu=void 0,To=void 0,lu="";function Hu(){return Fc()?Al(Mf.LocalStorage):null}function Al(p){try{if(Ze(zs()))return null;var _=new Date()[no](),S=ci(p===Mf.LocalStorage?"localStorage":"sessionStorage"),k=lu+_;S.setItem(k,_);var j=S.getItem(k)!==_;if(S[xl](k),!j)return S}catch{}return null}function Pl(){return Wp()?Al(Mf.SessionStorage):null}function Md(){qu=!1,To=!1}function Lf(p){lu=p||""}function Jo(){qu=Fc(!0),To=Wp(!0)}function Fc(p){return(p||qu===void 0)&&(qu=!!Al(Mf.LocalStorage)),qu}function Um(p,_){var S=Hu();if(S!==null)try{return S.getItem(_)}catch(k){qu=!1,bo(p,2,1,"Browser failed read of local storage. "+Mo(k),{exception:Ot(k)})}return null}function jm(p,_,S){var k=Hu();if(k!==null)try{return k.setItem(_,S),!0}catch(j){qu=!1,bo(p,2,3,"Browser failed write to local storage. "+Mo(j),{exception:Ot(j)})}return!1}function zp(p,_){var S=Hu();if(S!==null)try{return S[xl](_),!0}catch(k){qu=!1,bo(p,2,5,"Browser failed removal of local storage item. "+Mo(k),{exception:Ot(k)})}return!1}function Wp(p){return(p||To===void 0)&&(To=!!Al(Mf.SessionStorage)),To}function Ko(){var p=[];return Wp()&&er(ci("sessionStorage"),function(_){p[Nf](_)}),p}function Vu(p,_){var S=Pl();if(S!==null)try{return S.getItem(_)}catch(k){To=!1,bo(p,2,2,"Browser failed read of session storage. "+Mo(k),{exception:Ot(k)})}return null}function Ml(p,_,S){var k=Pl();if(k!==null)try{return k.setItem(_,S),!0}catch(j){To=!1,bo(p,2,4,"Browser failed write to session storage. "+Mo(j),{exception:Ot(j)})}return!1}function Bm(p,_){var S=Pl();if(S!==null)try{return S[xl](_),!0}catch(k){To=!1,bo(p,2,6,"Browser failed removal of session storage item. "+Mo(k),{exception:Ot(k)})}return!1}var Jp="appInsightsThrottle",$m=function(){function p(_,S){var k=this,j,Z,X,oe,ge,be,rt,Bt=!1,ur=!1;ht(),k._getDbgPlgTargets=function(){return[rt]},k.getConfig=function(){return X},k.canThrottle=function(je){var Rt=zd(je),Jt=cr(je);return Mr(Jt,j,Rt)},k.isTriggered=function(je){return rh(je)},k.isReady=function(){return Bt},k.flush=function(je){try{var Rt=Wm(je);if(Rt&&Rt[wt]>0){var Jt=Rt.slice(0);return rt[je]=[],li(Jt,function(nn){hr(nn.msgID,nn[Eo],nn.severity,!1)}),!0}}catch{}return!1},k.flushAll=function(){try{if(rt){var je=!0;return er(rt,function(Rt){var Jt=k.flush(parseInt(Rt));je=je&&Jt}),je}}catch{}return!1},k.onReadyState=function(je,Rt){return Rt===void 0&&(Rt=!0),Bt=Ze(je)?!0:je,Bt&&Rt?k.flushAll():null},k.sendMessage=function(je,Rt,Jt){return hr(je,Rt,Jt,!0)};function hr(je,Rt,Jt,nn){if(Bt){var gn=Gd(je);if(!gn)return;var Tn=cr(je),bi=zd(je),Ku=Mr(Tn,j,bi),Us=!1,Zu=0,Vl=rh(je);try{Ku&&!Vl?(Zu=Math.min(Tn.limit.maxSendNumber,bi[Il]+1),bi[Il]=0,Us=!0,ge[je]=!0,bi[Cd]=new Date):(ge[je]=Ku,bi[Il]+=1);var Jm=Lt(je);oo(Z,Jm,bi);for(var nh=0;nh<Zu;nh++)tm(je,Z,Rt,Jt)}catch{}return{isThrottled:Us,throttleNum:Zu}}else if(nn){var Bf=Wm(je);Bf[Nf]({msgID:je,message:Rt,severity:Jt})}return null}function ht(){Z=Rm(_),ge={},oe={},rt={},X={},Ht(109),be=Ka(S)?S:"",_.addUnloadHook(ga(_.config,function(je){var Rt=je.cfg;j=Fc();var Jt=Rt.throttleMgrCfg||{};er(Jt,function(nn,gn){Ht(parseInt(nn),gn)})}))}function cr(je){return X[je]||X[109]}function Ht(je,Rt){var Jt,nn;try{var gn=Rt||{},Tn={};Tn[uu]=!!gn[uu];var bi=gn[Cf]||{};ur=(bi==null?void 0:bi.daysOfMonth)&&(bi==null?void 0:bi.daysOfMonth[wt])>0,Tn[Cf]=Pr(bi);var Ku={samplingRate:((Jt=gn.limit)===null||Jt===void 0?void 0:Jt.samplingRate)||100,maxSendNumber:((nn=gn.limit)===null||nn===void 0?void 0:nn.maxSendNumber)||1};Tn.limit=Ku,X[je]=Tn}catch{}}function Pr(je){je=je||{};var Rt=je==null?void 0:je.monthInterval,Jt=je==null?void 0:je.dayInterval;return Ze(Rt)&&Ze(Jt)&&(je.monthInterval=3,ur||(je[Nl]=[28],ur=!0)),je={monthInterval:je==null?void 0:je.monthInterval,dayInterval:je==null?void 0:je.dayInterval,daysOfMonth:je==null?void 0:je.daysOfMonth},je}function Mr(je,Rt,Jt){if(je&&!je[uu]&&Rt&&Ka(Jt)){var nn=Ln(),gn=Jt[kf],Tn=je[Cf],bi=1;if(Tn!=null&&Tn.monthInterval){var Ku=(nn.getUTCFullYear()-gn.getUTCFullYear())*12+nn.getUTCMonth()-gn.getUTCMonth();bi=Vd(Tn.monthInterval,0,Ku)}var Us=1;if(ur)Us=cc(Tn[Nl],nn[jp]());else if(Tn!=null&&Tn.dayInterval){var Zu=Math.floor((nn.getTime()-gn.getTime())/864e5);Us=Vd(Tn.dayInterval,0,Zu)}return bi>=0&&Us>=0}return!1}function Lt(je,Rt){var Jt=Ka(Rt)?Rt:"";return je?Jp+Jt+"-"+je:null}function Mn(je){try{if(je){var Rt=new Date;return je.getUTCFullYear()===Rt.getUTCFullYear()&&je.getUTCMonth()===Rt.getUTCMonth()&&je[jp]()===Rt[jp]()}}catch{}return!1}function jf(je,Rt,Jt){try{var nn={date:Ln(),count:0};if(je){var gn=JSON.parse(je),Tn={date:Ln(gn[kf])||nn[kf],count:gn[Il]||nn[Il],preTriggerDate:gn.preTriggerDate?Ln(gn[Cd]):void 0};return Tn}else return oo(Rt,Jt,nn),nn}catch{}return null}function Ln(je){try{if(je){var Rt=new Date(je);if(!isNaN(Rt.getDate()))return Rt}else return new Date}catch{}return null}function oo(je,Rt,Jt){try{return jm(je,Rt,fi(JSON[Bp](Jt)))}catch{}return!1}function Vd(je,Rt,Jt){return je<=0?1:Jt>=Rt&&(Jt-Rt)%je==0?Math.floor((Jt-Rt)/je)+1:-1}function tm(je,Rt,Jt,nn){bo(Rt,nn||1,je,Jt)}function Gd(je){try{var Rt=cr(je);return Qs(1e6)<=Rt.limit.samplingRate}catch{}return!1}function zd(je){try{var Rt=oe[je];if(!Rt){var Jt=Lt(je,be);Rt=jf(Um(Z,Jt),Z,Jt),oe[je]=Rt}return oe[je]}catch{}return null}function rh(je){var Rt=ge[je];if(Ze(Rt)){Rt=!1;var Jt=zd(je);Jt&&(Rt=Mn(Jt[Cd])),ge[je]=Rt}return ge[je]}function Wm(je){return rt=rt||{},Ze(rt[je])&&(rt[je]=[]),rt[je]}}return p}(),Yh=";",Kp="=";function Uc(p){if(!p)return{};var _=p[su](Yh),S=Ar(_,function(j,Z){var X=Z[su](Kp);if(X[wt]===2){var oe=X[0][Ts](),ge=X[1];j[oe]=ge}return j},{});if(Ui(S)[wt]>0){if(S.endpointsuffix){var k=S.location?S.location+".":"";S[xs]=S[xs]||"https://"+k+"dc."+S.endpointsuffix}S[xs]=S[xs]||Fp,fs(S[xs],"/")&&(S[xs]=S[xs].slice(0,-1))}return S}var xo={parse:Uc},Ld=function(){function p(_,S,k){var j=this,Z=this;Z.ver=1,Z.sampleRate=100,Z.tags={},Z[Is]=ra(_,k)||Mi,Z.data=S,Z.time=dr(new Date),Z[Rf]={time:1,iKey:1,name:1,sampleRate:function(){return j.sampleRate===100?4:1},tags:1,data:1}}return p}(),Ll=function(){function p(_,S,k,j){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var Z=this;Z.ver=2,Z[Is]=ra(_,S)||Mi,Z[Ns]=Li(_,k),Z[Vo]=Bu(_,j)}return p.envelopeType="Microsoft.ApplicationInsights.{0}.Event",p.dataType="EventData",p}(),Zo=58,pg=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Zp=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,Iv=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,hg=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,Hi=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,Fd=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,Ud=/([^\(\s\n]+):([0-9]+)$/,Ym="<no_method>",Fl="error",ya="stack",Io="stackDetails",jd="errorSrc",Gu="message",jc="description",As=[{re:Zp,len:5,m:1,fn:2,ln:3,col:4},{chk:qm,pre:qh,re:Iv,len:4,m:1,fn:2,ln:3},{re:hg,len:3,m:1,fn:2,hdl:du},{re:Hi,len:2,fn:1,hdl:du}];function qh(p){return p.replace(/(\(anonymous\))/,"<anonymous>")}function qm(p){return Xi(p,"[native")<0}function bt(p,_){var S=p;return S&&!Le(S)&&(JSON&&JSON[Bp]?(S=JSON[Bp](p),_&&(!S||S==="{}")&&(qt(p[no])?S=p[no]():S=""+p)):S=""+p+" - (Missing JSON.stringify)"),S||""}function zu(p,_){var S=p;return p&&(S&&!Le(S)&&(S=p[Gu]||p[jc]||S),S&&!Le(S)&&(S=bt(S,!0)),p.filename&&(S=S+" @"+(p.filename||"")+":"+(p.lineno||"?")+":"+(p.colno||"?"))),_&&_!=="String"&&_!=="Object"&&_!=="Error"&&Xi(S||"",_)===-1&&(S=_+": "+S),S||""}function fu(p){try{if(Wt(p))return"hasFullStack"in p&&"typeName"in p}catch{}return!1}function Ff(p){try{if(Wt(p))return"ver"in p&&"exceptions"in p&&"properties"in p}catch{}return!1}function Hm(p){return p&&p.src&&Le(p.src)&&p.obj&&Tt(p.obj)}function Bc(p){var _=p||"";Le(_)||(Le(_[ya])?_=_[ya]:_=""+_);var S=_[su](`
`);return{src:_,obj:S}}function Bd(p){for(var _=[],S=p[su](`
`),k=0;k<S[wt];k++){var j=S[k];S[k+1]&&(j+="@"+S[k+1],k++),_[Nf](j)}return{src:p,obj:_}}function Ps(p){var _=null;if(p)try{if(p[ya])_=Bc(p[ya]);else if(p[Fl]&&p[Fl][ya])_=Bc(p[Fl][ya]);else if(p.exception&&p.exception[ya])_=Bc(p.exception[ya]);else if(Hm(p))_=p;else if(Hm(p[Io]))_=p[Io];else if(kn()&&kn().opera&&p[Gu])_=Bd(p[Eo]);else if(p.reason&&p.reason[ya])_=Bc(p.reason[ya]);else if(Le(p))_=Bc(p);else{var S=p[Gu]||p[jc]||"";Le(p[jd])&&(S&&(S+=`
`),S+=" from "+p[jd]),S&&(_=Bc(S))}}catch(k){_=Bc(k)}return _||{src:"",obj:null}}function Vm(p){var _="";return p&&(p.obj?_=p.obj.join(`
`):_=p.src||""),_}function Xp(p){var _,S=p.obj;if(S&&S[wt]>0){_=[];var k=0,j=!1,Z=0;li(S,function(cr){if(j||Qp(cr)){var Ht=Fr(cr);j=!0;var Pr=Wh(Ht,k);Pr&&(Z+=Pr[Go],_[Nf](Pr),k++)}});var X=32*1024;if(Z>X)for(var oe=0,ge=_[wt]-1,be=0,rt=oe,Bt=ge;oe<ge;){var ur=_[oe][Go],hr=_[ge][Go];if(be+=ur+hr,be>X){var ht=Bt-rt+1;_.splice(rt,ht);break}rt=oe,Bt=ge,oe++,ge--}}return _}function Ul(p){var _="";if(p&&(_=p.typeName||p[Is]||"",!_))try{var S=/function (.{1,200})\(/,k=S.exec(p.constructor[no]());_=k&&k[wt]>1?k[1]:""}catch{}return _}function $c(p){if(p)try{if(!Le(p)){var _=Ul(p),S=bt(p,!1);return(!S||S==="{}")&&(p[Fl]&&(p=p[Fl],_=Ul(p)),S=bt(p,!0)),Xi(S,_)!==0&&_!=="String"?_+":"+S:S}}catch{}return""+(p||"")}var Yc=function(){function p(_,S,k,j,Z,X){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var oe=this;oe.ver=2,Ff(S)?(oe[Df]=S[Df]||[],oe[Ns]=S[Ns],oe[Vo]=S[Vo],S[Yp]&&(oe[Yp]=S[Yp]),S.id&&(oe.id=S.id,S[Ns].id=S.id),S[Mc]&&(oe[Mc]=S[Mc]),Ze(S[qp])||(oe[qp]=S[qp])):(k||(k={}),X&&(k.id=X),oe[Df]=[Ms(_,S,k)],oe[Ns]=Li(_,k),oe[Vo]=Bu(_,j),Z&&(oe[Yp]=Z),X&&(oe.id=X))}return p.CreateAutoException=function(_,S,k,j,Z,X,oe,ge){var be,rt=Ul(Z||X||_);return be={},be[Eo]=zu(_,rt),be.url=S,be.lineNumber=k,be.columnNumber=j,be.error=$c(Z||X||_),be.evt=$c(X||_),be[Pc]=rt,be.stackDetails=Ps(oe||Z||X),be.errorSrc=ge,be},p.CreateFromInterface=function(_,S,k,j){var Z=S[Df]&&Ra(S[Df],function(oe){return Vh(_,oe)}),X=new p(_,cl(cl({},S),{exceptions:Z}),k,j);return X},p.prototype.toInterface=function(){var _,S=this,k=S.exceptions,j=S.properties,Z=S.measurements,X=S.severityLevel,oe=S.problemGroup,ge=S.id,be=S.isManual,rt=k instanceof Array&&Ra(k,function(Bt){return Bt.toInterface()})||void 0;return _={ver:"4.0"},_[Df]=rt,_.severityLevel=X,_.properties=j,_.measurements=Z,_.problemGroup=oe,_.id=ge,_.isManual=be,_},p.CreateSimpleException=function(_,S,k,j,Z,X){var oe;return{exceptions:[(oe={},oe[Hp]=!0,oe.message=_,oe.stack=Z,oe.typeName=S,oe)]}},p.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",p.dataType="ExceptionData",p.formatError=$c,p}(),Hh=jr({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function on(){var p,_=this,S=Tt(_[Ho])&&Ra(_[Ho],function(j){return jl(j)}),k=(p={id:_.id,outerId:_.outerId,typeName:_[Pc],message:_[Eo],hasFullStack:_[Hp],stack:_[ya]},p[Ho]=S||void 0,p);return k}function Ms(p,_,S){var k,j,Z,X,oe,ge,be,rt;if(fu(_))X=_[Pc],oe=_[Eo],be=_[ya],rt=_[Ho]||[],ge=_[Hp];else{var Bt=_,ur=Bt&&Bt.evt;mn(Bt)||(Bt=Bt[Fl]||ur||Bt),X=ra(p,Ul(Bt))||Mi,oe=Of(p,zu(_||Bt,X))||Mi;var hr=_[Io]||Ps(_);rt=Xp(hr),Tt(rt)&&Ra(rt,function(ht){ht[kd]=ra(p,ht[kd]),ht[Cs]=ra(p,ht[Cs])}),be=Ds(p,Vm(hr)),ge=Tt(rt)&&rt[wt]>0,S&&(S[Pc]=S[Pc]||X)}return k={},k[Rf]=Hh,k.id=j,k.outerId=Z,k[Pc]=X,k[Eo]=oe,k[Hp]=ge,k.stack=be,k[Ho]=rt,k.toInterface=on,k}function Vh(p,_){var S=Tt(_[Ho])&&Ra(_[Ho],function(j){return $d(j)})||_[Ho],k=Ms(p,cl(cl({},_),{parsedStack:S}));return k}function Gh(p,_){var S=_[$p](Fd);if(S&&S[wt]>=4)p[Cs]=S[1],p[zo]=parseInt(S[2]);else{var k=_[$p](Ud);k&&k[wt]>=3?(p[Cs]=k[1],p[zo]=parseInt(k[2])):p[Cs]=_}}function du(p,_,S){var k=p[Cs];_.fn&&S&&S[wt]>_.fn&&(_.ln&&S[wt]>_.ln?(k=fi(S[_.fn]||""),p[zo]=parseInt(fi(S[_.ln]||""))||0):k=fi(S[_.fn]||"")),k&&Gh(p,k)}function Qp(p){var _=!1;if(p&&Le(p)){var S=fi(p);S&&(_=pg.test(S))}return _}var zh=jr({level:1,method:1,assembly:0,fileName:0,line:0});function Wh(p,_){var S,k;if(p&&Le(p)&&fi(p)){k=(S={},S[Rf]=zh,S[Dd]=_,S[kd]=fi(p),S[Wo]=Ym,S.fileName="",S.line=0,S[Go]=0,S);for(var j=0;j<As[wt];){var Z=As[j];if(Z.chk&&!Z.chk(p))break;Z.pre&&(p=Z.pre(p));var X=p[$p](Z.re);if(X&&X[wt]>=Z.len){Z.m&&(k[Wo]=fi(X[Z.m]||Ym)),Z.hdl?Z.hdl(k,Z,X):Z.fn&&(Z.ln?(k[Cs]=fi(X[Z.fn]||""),k[zo]=parseInt(fi(X[Z.ln]||""))||0):Gh(k,X[Z.fn]||""));break}j++}}return Yd(k)}function $d(p){var _,S=(_={},_[Rf]=zh,_.level=p[Dd],_.method=p[Wo],_.assembly=p[kd],_.fileName=p[Cs],_.line=p[zo],_[Go]=0,_);return Yd(S)}function Yd(p){var _=Zo;return p&&(_+=p.method[wt],_+=p.assembly[wt],_+=p.fileName[wt],_+=p.level.toString()[wt],_+=p.line.toString()[wt],p[Go]=_),p}function jl(p){return{level:p[Dd],method:p[Wo],assembly:p[kd],fileName:p[Cs],line:p[zo]}}var qc=function(){function p(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return p}(),eh=function(){function p(_,S,k,j,Z,X,oe,ge,be){this.aiDataContract={ver:1,metrics:1,properties:0};var rt=this;rt.ver=2;var Bt=new qc;Bt[Il]=j>0?j:void 0,Bt.max=isNaN(X)||X===null?void 0:X,Bt.min=isNaN(Z)||Z===null?void 0:Z,Bt[Is]=ra(_,S)||Mi,Bt.value=k,Bt.stdDev=isNaN(oe)||oe===null?void 0:oe,rt.metrics=[Bt],rt[Ns]=Li(_,ge),rt[Vo]=Bu(_,be)}return p.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",p.dataType="MetricData",p}(),Bl="";function Jh(p,_){return _===void 0&&(_=!1),p==null?_:p.toString()[Ts]()==="true"}function No(p){(isNaN(p)||p<0)&&(p=0),p=Math.round(p);var _=Bl+p%1e3,S=Bl+Math.floor(p/1e3)%60,k=Bl+Math.floor(p/(1e3*60))%60,j=Bl+Math.floor(p/(1e3*60*60))%24,Z=Math.floor(p/(1e3*60*60*24));return _=_[wt]===1?"00"+_:_[wt]===2?"0"+_:_,S=S[wt]<2?"0"+S:S,k=k[wt]<2?"0"+k:k,j=j[wt]<2?"0"+j:j,(Z>0?Z+".":Bl)+j+":"+k+":"+S+"."+_}function Kh(p,_){var S=null;return li(p,function(k){if(k.identifier===_)return S=k,-1}),S}function qd(p,_,S,k,j){return!j&&Le(p)&&(p==="Script error."||p==="Script error")}var Gm=function(){function p(_,S,k,j,Z,X,oe){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var ge=this;ge.ver=2,ge.id=Od(_,oe),ge.url=cu(_,k),ge[Is]=ra(_,S)||Mi,isNaN(j)||(ge[Cl]=No(j)),ge[Ns]=Li(_,Z),ge[Vo]=Bu(_,X)}return p.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",p.dataType="PageviewData",p}(),Ls=function(){function p(_,S,k,j,Z,X,oe,ge,be,rt,Bt,ur){be===void 0&&(be="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var hr=this;hr.ver=2,hr.id=S,hr[Cl]=No(Z),hr.success=X,hr.resultCode=oe+"",hr.type=ra(_,be);var ht=Mm(_,k,ge,j);hr.data=cu(_,j)||ht.data,hr.target=ra(_,ht.target),rt&&(hr.target="".concat(hr.target," | ").concat(rt)),hr[Is]=ra(_,ht[Is]),hr[Ns]=Li(_,Bt),hr[Vo]=Bu(_,ur)}return p.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",p.dataType="RemoteDependencyData",p}(),Nv=function(){function p(_,S,k,j,Z){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var X=this;X.ver=2,S=S||Mi,X[Eo]=Of(_,S),X[Ns]=Li(_,j),X[Vo]=Bu(_,Z),k&&(X[Yp]=k)}return p.envelopeType="Microsoft.ApplicationInsights.{0}.Message",p.dataType="MessageData",p}(),Wu=function(){function p(_,S,k,j,Z,X,oe){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var ge=this;ge.ver=2,ge.url=cu(_,k),ge[Is]=ra(_,S)||Mi,ge[Ns]=Li(_,Z),ge[Vo]=Bu(_,X),oe&&(ge.domProcessing=oe.domProcessing,ge[Cl]=oe[Cl],ge.networkConnect=oe.networkConnect,ge.perfTotal=oe.perfTotal,ge[qi]=oe[qi],ge.sentRequest=oe.sentRequest)}return p.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",p.dataType="PageviewPerformanceData",p}(),Zh=function(){function p(_,S){this.aiDataContract={baseType:1,baseData:1},this.baseType=_,this.baseData=S}return p}(),$l=cf({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),zm=function(){function p(){}return p.getConfig=function(_,S,k,j){j===void 0&&(j=!1);var Z;return k&&_[Ac]&&_[Ac][k]&&!Ze(_[Ac][k][S])?Z=_[Ac][k][S]:Z=_[S],Ze(Z)?j:Z},p}();function Xo(p){var _="ai."+p+".";return function(S){return _+S}}var Fs=Xo("application"),Hn=Xo("device"),Uf=Xo("location"),Yl=Xo("operation"),Hd=Xo("session"),pr=Xo("user"),io=Xo("cloud"),ao=Xo("internal"),Fi=function(p){Nm(_,p);function _(){return p.call(this)||this}return _}(vs({applicationVersion:Fs("ver"),applicationBuild:Fs("build"),applicationTypeId:Fs("typeId"),applicationId:Fs("applicationId"),applicationLayer:Fs("layer"),deviceId:Hn("id"),deviceIp:Hn("ip"),deviceLanguage:Hn("language"),deviceLocale:Hn("locale"),deviceModel:Hn("model"),deviceFriendlyName:Hn("friendlyName"),deviceNetwork:Hn("network"),deviceNetworkName:Hn("networkName"),deviceOEMName:Hn("oemName"),deviceOS:Hn("os"),deviceOSVersion:Hn("osVersion"),deviceRoleInstance:Hn("roleInstance"),deviceRoleName:Hn("roleName"),deviceScreenResolution:Hn("screenResolution"),deviceType:Hn("type"),deviceMachineName:Hn("machineName"),deviceVMName:Hn("vmName"),deviceBrowser:Hn("browser"),deviceBrowserVersion:Hn("browserVersion"),locationIp:Uf("ip"),locationCountry:Uf("country"),locationProvince:Uf("province"),locationCity:Uf("city"),operationId:Yl("id"),operationName:Yl("name"),operationParentId:Yl("parentId"),operationRootId:Yl("rootId"),operationSyntheticSource:Yl("syntheticSource"),operationCorrelationVector:Yl("correlationVector"),sessionId:Hd("id"),sessionIsFirst:Hd("isFirst"),sessionIsNew:Hd("isNew"),userAccountAcquisitionDate:pr("accountAcquisitionDate"),userAccountId:pr("accountId"),userAgent:pr("userAgent"),userId:pr("id"),userStoreRegion:pr("storeRegion"),userAuthUserId:pr("authUserId"),userAnonymousUserAcquisitionDate:pr("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:pr("authUserAcquisitionDate"),cloudName:io("name"),cloudRole:io("role"),cloudRoleVer:io("roleVer"),cloudRoleInstance:io("roleInstance"),cloudEnvironment:io("environment"),cloudLocation:io("location"),cloudDeploymentUnit:io("deploymentUnit"),internalNodeName:ao("nodeName"),internalSdkVersion:ao("sdkVersion"),internalAgentVersion:ao("agentVersion"),internalSnippet:ao("snippet"),internalSdkSrc:ao("sdkSrc")}));function ql(p,_,S,k,j,Z){var X;S=ra(k,S)||Mi,(Ze(p)||Ze(_)||Ze(S))&&Ur("Input doesn't contain all required fields");var oe="";p[Nd]&&(oe=p[Nd],delete p[Nd]);var ge=(X={},X[Is]=S,X.time=dr(new Date),X.iKey=oe,X.ext=Z||{},X.tags=[],X.data={},X.baseType=_,X.baseData=p,X);return Ze(j)||er(j,function(be,rt){ge.data[be]=rt}),ge}var En=function(){function p(){}return p.create=ql,p}(),Hl={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},pu=new Fi;function th(p){var _=null;if(qt(Event))_=new Event(p);else{var S=ca();S&&S.createEvent&&(_=S.createEvent("Event"),_.initEvent(p,!0,!0))}return _}function hu(p,_){Lp(p,null,null,_)}function Xh(p){var _=ca(),S=Qr(),k=!1,j=[],Z=1;S&&!Ze(S.onLine)&&!S.onLine&&(Z=2);var X=0,oe=ur(),ge=If(Fa("OfflineListener"),p);try{if(rt(kn())&&(k=!0),_){var be=_.body||_;be.ononline&&rt(be)&&(k=!0)}}catch{k=!1}function rt(Lt){var Mn=!1;return Lt&&(Mn=El(Lt,"online",cr,ge),Mn&&El(Lt,"offline",Ht,ge)),Mn}function Bt(){return oe}function ur(){return!(X===2||Z===2)}function hr(){var Lt=ur();oe!==Lt&&(oe=Lt,li(j,function(Mn){var jf={isOnline:oe,rState:Z,uState:X};try{Mn(jf)}catch{}}))}function ht(Lt){X=Lt,hr()}function cr(){Z=1,hr()}function Ht(){Z=2,hr()}function Pr(){var Lt=kn();if(Lt&&k){if(hu(Lt,ge),_){var Mn=_.body||_;dt(Mn.ononline)||hu(Mn,ge)}k=!1}}function Mr(Lt){return j[Nf](Lt),{rm:function(){var Mn=j.indexOf(Lt);if(Mn>-1)return j.splice(Mn,1)}}}return{isOnline:Bt,isListening:function(){return k},unload:Pr,addListener:Mr,setOnlineState:ht}}var Ju="AppInsightsPropertiesPlugin",Qh="AppInsightsChannelPlugin",em="ApplicationInsightsAnalytics";t.AnalyticsPluginIdentifier=em,t.BreezeChannelIdentifier=Qh,t.ConfigurationManager=zm,t.ConnectionStringParser=xo,t.ContextTagKeys=Fi,t.CtxTagKeys=pu,t.DEFAULT_BREEZE_ENDPOINT=Fp,t.DEFAULT_BREEZE_PATH=Id,t.Data=Zh,t.DisabledPropertyName=di,t.DistributedTracingModes=$h,t.Envelope=Ld,t.Event=Ll,t.EventPersistence=Fm,t.Exception=Yc,t.Extensions=Hl,t.HttpMethod=Uu,t.Metric=eh,t.PageView=Gm,t.PageViewPerformance=Wu,t.ProcessLegacy=Pi,t.PropertiesPluginIdentifier=Ju,t.RemoteDependencyData=Ls,t.RequestHeaders=Up,t.SampleRate=Tl,t.SeverityLevel=$l,t.TelemetryItemCreator=En,t.ThrottleMgr=$m,t.Trace=Nv,t.correlationIdCanIncludeCorrelationHeader=Pf,t.correlationIdGetCorrelationContext=Os,t.correlationIdGetCorrelationContextValue=Lc,t.correlationIdGetPrefix=Pd,t.correlationIdSetPrefix=Rs,t.createDistributedTraceContextFromTrace=Lm,t.createDomEvent=th,t.createOfflineListener=Xh,t.createTelemetryItem=ql,t.createTraceParent=Om,t.dataSanitizeException=Ds,t.dataSanitizeId=Od,t.dataSanitizeInput=kl,t.dataSanitizeKey=Rd,t.dataSanitizeKeyAndAddUniqueness=ks,t.dataSanitizeMeasurements=Bu,t.dataSanitizeMessage=Of,t.dataSanitizeProperties=Li,t.dataSanitizeString=ra,t.dataSanitizeUrl=cu,t.dateTimeUtilsDuration=xv,t.dateTimeUtilsNow=Ol,t.dsPadNumber=$u,t.findAllScripts=Mp,t.findW3cTraceParent=Ai,t.formatTraceParent=kc,t.getExtensionByName=Kh,t.isBeaconApiSupported=Fo,t.isCrossOriginError=qd,t.isInternalApplicationInsightsEndpoint=Gp,t.isSampledFlag=rn,t.isValidSpanId=Pp,t.isValidTraceId=bl,t.isValidTraceParent=iu,t.msToTimeSpan=No,t.parseConnectionString=Uc,t.parseTraceParent=Ap,t.strNotSpecified=Mi,t.stringToBoolOrDefault=Jh,t.urlGetAbsoluteUrl=Af,t.urlGetCompleteUrl=Tv,t.urlGetPathName=Bh,t.urlParseFullHost=Vp,t.urlParseHost=Ad,t.urlParseUrl=Dl,t.utlCanUseLocalStorage=Fc,t.utlCanUseSessionStorage=Wp,t.utlDisableStorage=Md,t.utlEnableStorage=Jo,t.utlGetLocalStorage=Um,t.utlGetSessionStorage=Vu,t.utlGetSessionStorageKeys=Ko,t.utlRemoveSessionStorage=Bm,t.utlRemoveStorage=zp,t.utlSetLocalStorage=jm,t.utlSetSessionStorage=Ml,t.utlSetStoragePrefix=Lf})});var ZS=gt(xw=>{"use strict";Object.defineProperty(xw,"__esModule",{value:!0});xw.TelemetryUtil=void 0;var KS=class t{static applyReplacements(e,r){for(let n of Object.keys(e))for(let i of r)i.lookup.test(n)&&(i.replacementString!==void 0?e[n]=i.replacementString:delete e[n])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.8"}}static getInstance(){return t._instance||(t._instance=new t),t._instance}};xw.TelemetryUtil=KS});var lN=gt((Iw,cN)=>{(function(t,e){typeof Iw=="object"&&typeof cN<"u"?e(Iw):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(Iw,function(t){"use strict";function e(s,c){return s||c}function r(s,c){return s[c]}var n=void 0,i=null,a="",u="function",f="object",m="prototype",y="__proto__",x="undefined",P="constructor",V="Symbol",G="_polyfill",Y="length",q="name",J="call",ee="toString",ve=e(Object),ye=r(ve,m),ue=e(String),_e=r(ue,m),Ue=e(Math),$e=e(Array),Ke=r($e,m),ct=r(Ke,"slice");function vt(s,c){try{return{v:s.apply(this,c)}}catch(d){return{e:d}}}function wr(s,c){var d=vt(s);return d.e?c:d.v}var $r;function Ne(s){return function(c){return typeof c===s}}function dt(s){var c="[object "+s+"]";return function(d){return!!(d&&Or(d)===c)}}function Or(s){return ye[ee].call(s)}function Ze(s){return typeof s===x||s===x}function yn(s){return!Wt(s)}function Le(s){return s===i||Ze(s)}function qt(s){return s===i||!Wt(s)}function Wt(s){return!!s||s!==n}function Tt(s){return!$r&&($r=["string","number","boolean",x,"symbol","bigint"]),s!==f&&$r.indexOf(s)!==-1}var mn=Ne("string"),lt=Ne(u);function ti(s){return!s&&Le(s)?!1:!!s&&typeof s===f}var ut=r($e,"isArray"),Su=dt("Date"),er=Ne("number"),Ya=Ne("boolean"),Xt=dt("Error");function fr(s){return!!(s&&s.then&&lt(s.then))}function Ni(s){return!(!s||wr(function(){return!(s&&0+s)},!s))}var mr=r(ve,"getOwnPropertyDescriptor");function Ci(s,c){return!!s&&ye.hasOwnProperty[J](s,c)}var Fr=e(r(ve,"hasOwn"),qn);function qn(s,c){return Ci(s,c)||!!mr(s,c)}function Ot(s,c,d){if(s&&ti(s)){for(var g in s)if(Fr(s,g)&&c[J](d||s,g,s[g])===-1)break}}var Ur={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function tt(s){var c={};if(c[Ur.c]=!0,c[Ur.e]=!0,s.l){c.get=function(){return s.l.v};var d=mr(s.l,"v");d&&d.set&&(c.set=function(g){s.l.v=g})}return Ot(s,function(g,E){c[Ur[g]]=yn(E)?c[Ur[g]]:E}),c}var An=r(ve,"defineProperty");function Gr(s,c,d){return An(s,c,tt(d))}function Xr(s,c,d,g,E){var C={};return Ot(s,function(A,U){Ia(C,A,c?U:A,E),Ia(C,U,d?U:A,E)}),g?g(C):C}function Ia(s,c,d,g){An(s,c,{value:d,enumerable:!0,writable:!!g})}var Ui=e(ue),jr="[object Error]";function ar(s,c){var d=a,g=ye[ee][J](s);g===jr&&(s={stack:Ui(s.stack),message:Ui(s.message),name:Ui(s.name)});try{d=JSON.stringify(s,i,c?typeof c=="number"?c:4:n),d=(d?d.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||Ui(s)}catch(E){d=" - "+ar(E,c)}return g+": "+d}function br(s){throw new Error(s)}function cn(s){throw new TypeError(s)}var nd=r(ve,"freeze");function ri(s){return s}function id(s){return s[y]||i}var Eu=r(ve,"assign"),Cn=r(ve,"keys");function os(s){return nd&&Ot(s,function(c,d){(ut(d)||ti(d))&&os(d)}),Qt(s)}var Qt=e(nd,ri),ji=e(r(ve,"getPrototypeOf"),id);function qa(s){return Xr(s,1,0,Qt)}function ss(s){return Xr(s,0,0,Qt)}function Na(s){var c={};return Ot(s,function(d,g){Ia(c,d,g[1]),Ia(c,g[0],g[1])}),Qt(c)}function ad(s){return Na(s)}var sc=ss({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Zi="__tsUtils$gblCfg",Ca;function ki(){var s;return typeof globalThis!==x&&(s=globalThis),!s&&typeof self!==x&&(s=self),!s&&typeof window!==x&&(s=window),!s&&typeof global!==x&&(s=global),s}function us(){if(!Ca){var s=vt(ki).v||{};Ca=s[Zi]=s[Zi]||{}}return Ca}var Vs=ui;function ui(s,c,d){var g=c?c[s]:i;return function(E){var C=(E?E[s]:i)||g;if(C||d){var A=arguments;return(C||d).apply(E,C?ct[J](A,1):A)}cn('"'+Ui(s)+'" not defined for '+ar(E))}}function uc(s){return function(c){return c[s]}}var Gs=r(Ue,"max"),ka=Vs("slice",_e),ni=Vs("substring",_e),al=ui("substr",_e,zs);function zs(s,c,d){return Le(s)&&cn("Invalid "+ar(s)),d<0?a:(c=c||0,c<0&&(c=Gs(c+s[Y],0)),Ze(d)?ka(s,c):ka(s,c,c+d))}function ci(s,c){return ni(s,0,c)}var ca="_urid",vr;function kn(){if(!vr){var s=us();vr=s.gblSym=s.gblSym||{k:{},s:{}}}return vr}var Da;function Qr(s){var c={description:Ui(s),toString:function(){return V+"("+s+")"}};return c[G]=!0,c}function _i(s){var c=kn();if(!Fr(c.k,s)){var d=Qr(s),g=Cn(c.s).length;d[ca]=function(){return g+"_"+d[ee]()},c.k[s]=d,c.s[d[ca]()]=Ui(s)}return c.k[s]}function Ha(s){!Da&&(Da={});var c,d=sc[s];return d&&(c=Da[d]=Da[d]||Qr(V+"."+d)),c}var en;function la(){en=us()}function Tu(s){var c={};return!en&&la(),c.b=en.lzy,An(c,"v",{configurable:!0,get:function(){var d=s();return en.lzy||An(c,"v",{value:d}),c.b=en.lzy,d}}),c}function fa(s){return An({toJSON:function(){return s}},"v",{value:s})}var wn="window",li;function cc(s,c){var d;return function(){return!en&&la(),(!d||en.lzy)&&(d=fa(vt(s,c).v)),d.v}}function Ra(s){return!en&&la(),(!li||s===!1||en.lzy)&&(li=fa(vt(ki).v||i)),li.v}function Ar(s,c){var d;if(!li||c===!1?d=Ra(c):d=li.v,d&&d[s])return d[s];if(s===wn)try{return window}catch{}return i}function Di(){return!!od()}var od=cc(Ar,["document"]);function Bi(){return!!cs()}var cs=cc(Ar,[wn]);function ol(){return!!ls()}var ls=cc(Ar,["navigator"]),sd=cc(function(){return!!vt(function(){return process&&(process.versions||{}).node}).v}),vn,of;function da(){return vn=fa(vt(Ar,[V]).v),vn}function mp(s){var c=(en.lzy?0:vn)||da();return c.v?c.v[s]:n}function fi(){return!!Nh()}function Nh(){return!en&&la(),((en.lzy?0:vn)||da()).v}function Oa(s,c){var d=sc[s];!en&&la();var g=(en.lzy?0:vn)||da();return g.v?g.v[d||s]:c?n:Ha(s)}function sf(s,c){!en&&la();var d=(en.lzy?0:vn)||da();return d.v?d.v(s):c?i:Qr(s)}function fo(s){return!en&&la(),of=(en.lzy?0:of)||fa(vt(mp,["for"]).v),(of.v||_i)(s)}function ud(s){return!!s&&lt(s.next)}function Ir(s){return!qt(s)&&lt(s[Oa(3)])}var fs;function cd(s,c,d){if(s&&(ud(s)||(!fs&&(fs=fa(Oa(3))),s=s[fs.v]?s[fs.v]():i),ud(s))){var g=n,E=n;try{for(var C=0;!(E=s.next()).done&&c[J](d||s,E.value,C,s)!==-1;)C++}catch(A){g={e:A},s.throw&&(E=i,s.throw(g))}finally{try{E&&!E.done&&s.return&&s.return(E)}finally{if(g)throw g.e}}}}function Xi(s,c,d){return s.apply(c,d)}function sl(s,c){return!Ze(c)&&s&&(ut(c)?Xi(s.push,s,c):ud(c)||Ir(c)?cd(c,function(d){s.push(d)}):s.push(c)),s}function jt(s,c,d){if(s)for(var g=s[Y]>>>0,E=0;E<g&&!(E in s&&c[J](d||s,s[E],E,s)===-1);E++);}var Aa=Vs("indexOf",Ke),lc=Vs("map",Ke);function uf(s,c,d){return((s?s.slice:i)||ct).apply(s,ct[J](arguments,1))}var xm=Vs("reduce",Ke),Va=e(r(ve,"create"),cf);function cf(s){if(!s)return{};var c=typeof s;c!==f&&c!==u&&cn("Prototype must be an Object or function: "+ar(s));function d(){}return d[m]=s,new d}var vp;function xu(s,c){var d=ve.setPrototypeOf||function(g,E){var C;!vp&&(vp=fa((C={},C[y]=[],C instanceof Array))),vp.v?g[y]=E:Ot(E,function(A,U){return g[A]=U})};return d(s,c)}function Ga(s,c,d){vt(Gr,[c,q,{v:s,c:!0,e:!1}]),c=xu(c,d);function g(){this[P]=c,vt(Gr,[this,q,{v:s,c:!0,e:!1}])}return c[m]=d===i?Va(d):(g[m]=d[m],new g),c}function _t(s,c){c&&(s[q]=c)}function Ri(s,c,d){var g=d||Error,E=g[m][q],C=Error.captureStackTrace;return Ga(s,function(){var A=this,U=arguments;try{vt(_t,[g,s]);var $=Xi(g,A,ct[J](U))||A;if($!==A){var W=ji(A);W!==ji($)&&xu($,W)}return C&&C($,A[P]),c&&c($,U),$}finally{vt(_t,[g,E])}},g)}function Iu(){return(Date.now||Ws)()}function Ws(){return new Date().getTime()}function gp(s){return function(d){return Le(d)&&cn("strTrim called ["+ar(d)+"]"),d&&d.replace&&(d=d.replace(s,a)),d}}var _p=gp(/^\s+|(?=\s)\s+$/g),Dn=ui("trim",_e,_p),Pa,yp,za;function pa(s){if(!s||typeof s!==f)return!1;za||(za=Bi()?cs():!0);var c=!1;if(s!==za){yp||(Pa=Function[m][ee],yp=Pa[J](ve));try{var d=ji(s);c=!d,c||(Ci(d,P)&&(d=d[P]),c=!!(d&&typeof d===u&&Pa[J](d)===yp))}catch{}}return c}function bv(s){return s.value&&po(s),!0}var Im=[Qi,po,ff,lf];function Ch(s,c,d,g){var E;return jt(s,function(C){if(C.k===c)return E=C,-1}),E||(E={k:c,v:c},s.push(E),g(E)),E.v}function Nu(s,c,d,g){var E=d.handler,C=d.path?g?d.path.concat(g):d.path:[],A={handler:d.handler,src:d.src,path:C},U=typeof c,$=!1,W=c===i;W||(c&&U===f?$=pa(c):W=Tt(U));var te={type:U,isPrim:W,isPlain:$,value:c,result:c,path:C,origin:d.src,copy:function(de,he){return Nu(s,de,he?A:d,he)},copyTo:function(de,he){return kh(s,de,he,A)}};return te.isPrim?E&&E[J](d,te)?te.result:c:Ch(s,c,C,function(de){Gr(te,"result",{g:function(){return de.v},s:function(le){de.v=le}});for(var he=0,me=E;!(me||(he<Im.length?Im[he++]:bv))[J](d,te);)me=i})}function kh(s,c,d,g){if(!Le(d))for(var E in d)c[E]=Nu(s,d[E],g,E);return c}function dg(s,c,d){var g={handler:d,src:c,path:[]};return kh([],s,c,g)}function wp(s,c){var d={handler:c,src:s};return Nu([],s,d)}function Qi(s){var c=s.value;if(ut(c)){var d=s.result=[];return d.length=c.length,s.copyTo(d,c),!0}return!1}function lf(s){var c=s.value;return Su(c)?(s.result=new Date(c.getTime()),!0):!1}function ff(s){return s.type===u}function po(s){var c=s.value;if(c&&s.isPlain){var d=s.result={};return s.copyTo(d,c),!0}return!1}function Ma(s,c){return jt(c,function(d){dg(s,d)}),s}function Cu(s,c,d,g,E,C,A){return Ma(wp(s)||{},ct[J](arguments))}var Dh=uc(Y),Wa=ui("endsWith",_e,bp);function bp(s,c,d){mn(s)||cn("'"+ar(s)+"' is not a string");var g=mn(c)?c:Ui(c),E=!Ze(d)&&d<s[Y]?d:s[Y];return ni(s,E-g[Y],E)===g}var ku=Vs("indexOf",_e),ul="ref",df="unref",ld="hasRef",Sp="enabled";function Rh(s,c,d){var g=!0,E=s?c(i):i,C;function A(){return g=!1,E&&E[df]&&E[df](),C}function U(){E&&d(E),E=i}function $(){return E=c(E),g||A(),C}function W(te){!te&&E&&U(),te&&!E&&$()}return C={cancel:U,refresh:$},C[ld]=function(){return E&&E[ld]?E[ld]():g},C[ul]=function(){return g=!0,E&&E[ul]&&E[ul](),C},C[df]=A,C=An(C,Sp,{get:function(){return!!E},set:W}),{h:C,dn:function(){E=i}}}function Oh(s,c,d){var g=ut(c),E=g?c.length:0,C=(E>0?c[0]:g?n:c)||setTimeout,A=(E>1?c[1]:n)||clearTimeout,U=d[0];d[0]=function(){$.dn(),Xi(U,n,ct[J](arguments))};var $=Rh(s,function(W){if(W){if(W.refresh)return W.refresh(),W;Xi(A,n,[W])}return Xi(C,n,d)},function(W){Xi(A,n,[W])});return $.h}function Du(s,c){return Oh(!0,n,ct[J](arguments))}function Ep(s,c){return Oh(!1,n,ct[J](arguments))}var Js,fc="constructor",Ja="prototype",pf="function",fd="_dynInstFuncs",cl="_isDynProxy",ho="_dynClass",Nm="_dynCls$",ds="_dynInstChk",Oo=ds,mo="_dfOpts",Ru="_unknown_",dd="__proto__",ll="_dyn"+dd,fl="__dynProto$Gbl",dc="_dynInstProto",pd="useBaseInst",hf="setInstFuncs",hd=Object,pc=hd.getPrototypeOf,vo=hd.getOwnPropertyNames,dl=Ra(),Ao=dl[fl]||(dl[fl]={o:(Js={},Js[hf]=!0,Js[pd]=!0,Js),n:1e3});function La(s){return s&&(s===hd[Ja]||s===Array[Ja])}function ps(s){return La(s)||s===Function[Ja]}function ln(s){var c;if(s){if(pc)return pc(s);var d=s[dd]||s[Ja]||(s[fc]?s[fc][Ja]:null);c=s[ll]||d,Ci(s,ll)||(delete s[dc],c=s[ll]=s[dc]||s[ll],s[dc]=d)}return c}function Ks(s,c){var d=[];if(vo)d=vo(s);else for(var g in s)typeof g=="string"&&Ci(s,g)&&d.push(g);if(d&&d.length>0)for(var E=0;E<d.length;E++)c(d[E])}function go(s,c,d){return c!==fc&&typeof s[c]===pf&&(d||Ci(s,c))&&c!==dd&&c!==Ja}function pl(s){cn("DynamicProto: "+s)}function hl(s){var c=Va(null);return Ks(s,function(d){!c[d]&&go(s,d,!1)&&(c[d]=s[d])}),c}function hs(s,c){for(var d=s.length-1;d>=0;d--)if(s[d]===c)return!0;return!1}function mf(s,c,d,g){function E($,W,te){var de=W[te];if(de[cl]&&g){var he=$[fd]||{};he[Oo]!==!1&&(de=(he[W[ho]]||{})[te]||de)}return function(){return de.apply($,arguments)}}var C=Va(null);Ks(d,function($){C[$]=E(c,d,$)});for(var A=ln(s),U=[];A&&!ps(A)&&!hs(U,A);)Ks(A,function($){!C[$]&&go(A,$,!pc)&&(C[$]=E(c,A,$))}),U.push(A),A=ln(A);return C}function ms(s,c,d,g){var E=null;if(s&&Ci(d,ho)){var C=s[fd]||Va(null);if(E=(C[d[ho]]||Va(null))[c],E||pl("Missing ["+c+"] "+pf),!E[ds]&&C[Oo]!==!1){for(var A=!Ci(s,c),U=ln(s),$=[];A&&U&&!ps(U)&&!hs($,U);){var W=U[c];if(W){A=W===g;break}$.push(U),U=ln(U)}try{A&&(s[c]=E),E[ds]=1}catch{C[Oo]=!1}}}return E}function Ou(s,c,d){var g=c[s];return g===d&&(g=ln(c)[s]),typeof g!==pf&&pl("["+s+"] is not a "+pf),g}function ha(s,c,d,g,E){function C($,W){var te=function(){var de=ms(this,W,$,te)||Ou(W,$,te);return de.apply(this,arguments)};return te[cl]=1,te}if(!La(s)){var A=d[fd]=d[fd]||Va(null);if(!La(A)){var U=A[c]=A[c]||Va(null);A[Oo]!==!1&&(A[Oo]=!!E),La(U)||Ks(d,function($){go(d,$,!1)&&d[$]!==g[$]&&(U[$]=d[$],delete d[$],(!Ci(s,$)||s[$]&&!s[$][cl])&&(s[$]=C(s,$)))})}}}function Tp(s,c){if(pc){for(var d=[],g=ln(c);g&&!ps(g)&&!hs(d,g);){if(g===s)return!0;d.push(g),g=ln(g)}return!1}return!0}function hc(s,c){return Ci(s,Ja)?s.name||c||Ru:((s||{})[fc]||{}).name||c||Ru}function ea(s,c,d,g){Ci(s,Ja)||pl("theClass is an invalid class definition.");var E=s[Ja];Tp(E,c)||pl("["+hc(s)+"] not in hierarchy of ["+hc(c)+"]");var C=null;Ci(E,ho)?C=E[ho]:(C=Nm+hc(s,"_")+"$"+Ao.n,Ao.n++,E[ho]=C);var A=ea[mo],U=!!A[pd];U&&g&&g[pd]!==void 0&&(U=!!g[pd]);var $=hl(c),W=mf(E,c,$,U);d(c,W);var te=!!pc&&!!A[hf];te&&g&&(te=!!g[hf]),ha(E,C,c,$,te!==!1)}ea[mo]=Ao.o;var md="function",xp="object",vf="undefined",gf="prototype",Ip=Object,Cm=Ip[gf];(Ra()||{}).Symbol,(Ra()||{}).Reflect;var mc="hasOwnProperty",Po=function(s){for(var c,d=1,g=arguments.length;d<g;d++){c=arguments[d];for(var E in c)Cm[mc].call(c,E)&&(s[E]=c[E])}return s},_o=Eu||Po,Rn=function(s,c){return Rn=Ip.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,g){d.__proto__=g}||function(d,g){for(var E in g)g[mc](E)&&(d[E]=g[E])},Rn(s,c)};function _f(s,c){typeof c!==md&&c!==null&&cn("Class extends value "+String(c)+" is not a constructor or null"),Rn(s,c);function d(){this.constructor=s}s[gf]=c===null?Va(c):(d[gf]=c[gf],new d)}function vc(s,c){for(var d=0,g=c.length,E=s.length;d<g;d++,E++)s[E]=c[d];return s}var gc=qa,Np=ad,Ka=gc({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),Au="toLowerCase",Zs="blkVal",dr="length",Mo="rdOnly",vs="notify",Za="warnToConsole",vd="throwInternal",Xa="setDf",Pu="watch",bn="logger",ma="apply",Jr="push",yt="splice",_c="hdlr",Lo="cancel",Xs="initialize",yo="identifier",Mu="removeNotificationListener",Qa="addNotificationListener",tn="isInitialized",Fo="instrumentationKey",Kr="INACTIVE",Uo="value",gd="getNotifyMgr",jo="getPlugin",Zn="name",wo="iKey",gs="time",$i="processNext",ta="getProcessTelContext",ml="pollInternalLogs",yc="enabled",_d="stopPollingInternalLogs",Qs="unload",Bo="onComplete",$o="version",wc="loggingLevelConsole",Yo="createNew",ii="teardown",yd="messageId",bc="message",eu="isAsync",Fa="diagLog",_s="_doTeardown",tu="update",eo="getNext",vl="setNextPlugin",Lu="protocol",Oi="userAgent",Fu="split",ru="nodeType",to="replace",Sc="logInternalMessage",Sn="type",yi="handler",ro="status",Ec="getResponseHeader",ys="getAllResponseHeaders",Cp="isChildEvt",Ua="data",gl="getCtx",Yi="setCtx",wd="complete",va="itemsReceived",ws="urlString",bs="sendPOST",kp="headers",yf="timeout",bd="setRequestHeader",wf="traceId",qo="spanId",ga="traceFlags",_l;function km(s,c){_l||(_l=Ri("AggregationError",function(g,E){E[dr]>1&&(g.errors=E[1])}));var d=s||"One or more errors occurred.";throw jt(c,function(g,E){d+=`
`.concat(E," > ").concat(ar(g))}),new _l(d,c||[])}var Tc="Promise",xc="rejected";function Ss(s,c){return bf(s,function(d){return c?c({status:"fulfilled",rejected:!1,value:d}):d},function(d){return c?c({status:xc,rejected:!0,reason:d}):d})}function bf(s,c,d,g){var E=s;try{if(fr(s))(c||d)&&(E=s.then(c,d));else try{c&&(E=c(s))}catch(C){if(d)E=d(C);else throw C}}finally{g&&Sv(E,g)}return E}function Sv(s,c){var d=s;return c&&(fr(s)?s.finally?d=s.finally(c):d=s.then(function(g){return c(),g},function(g){throw c(),g}):c()),d}var Dp=["pending","resolving","resolved",xc],Sf="dispatchEvent",Ic;function Ah(s){var c;return s&&s.createEvent&&(c=s.createEvent("Event")),!!c&&c.initEvent}function Dm(s,c,d,g){var E=od();!Ic&&(Ic=fa(!!vt(Ah,[E]).v));var C=Ic.v?E.createEvent("Event"):g?new Event(c):{};if(d&&d(C),Ic.v&&C.initEvent(c,!1,!0),C&&s[Sf])s[Sf](C);else{var A=s["on"+c];if(A)A(C);else{var U=Ar("console");U&&(U.error||U.log)(c,ar(C))}}}var Nc="unhandledRejection",Rm=Nc.toLowerCase(),Ef=10,Rp;function bo(s){return lt(s)?s.toString():ar(s)}function Ph(s,c,d){var g=uf(arguments,3),E=0,C=!1,A,U=[],$=!1,W=null,te;function de(et,mt){try{$=!0,W&&W.cancel(),W=null;var kr=s(function(pn,hn){U.push(function(){try{var Bn=E===2?et:mt,rr=Ze(Bn)?A:lt(Bn)?Bn(A):Bn;fr(rr)?rr.then(pn,hn):Bn?pn(rr):E===3?hn(rr):pn(rr)}catch(Gt){hn(Gt)}}),C&&Fe()},g);return kr}finally{}}function he(et){return de(void 0,et)}function me(et){var mt=et,kr=et;return lt(et)&&(mt=function(pn){return et&&et(),pn},kr=function(pn){throw et&&et(),pn}),de(mt,kr)}function le(){return Dp[E]}function Fe(){if(U.length>0){var et=U.slice();U=[],$=!0,W&&W.cancel(),W=null,c(et)}}function Ee(et,mt){return function(kr){if(E===mt){if(et===2&&fr(kr)){E=1,kr.then(Ee(2,1),Ee(3,1));return}E=et,C=!0,A=kr,Fe(),!$&&et===3&&!W&&(W=Du(Be,Ef))}}}function Be(){if(!$)if($=!0,sd())process.emit(Nc,A,te);else{var et=cs()||Ra();!Rp&&(Rp=fa(vt(Ar,[Tc+"RejectionEvent"]).v)),Dm(et,Rm,function(mt){return Gr(mt,"promise",{g:function(){return te}}),mt.reason=A,mt},!!Rp.v)}}te={then:de,catch:he,finally:me},An(te,"state",{get:le}),fi()&&(te[Oa(11)]="IPromise");function qe(){return"IPromise "+le()+(C?" - "+bo(A):"")}return te.toString=qe,function(){lt(d)||cn(Tc+": executor is not a function - "+bo(d));var mt=Ee(3,0);try{d.call(te,Ee(2,0),mt)}catch(kr){mt(kr)}}(),te}function Ev(s){return function(c){var d=uf(arguments,1);return s(function(g,E){try{var C=[],A=1;cd(c,function(U,$){U&&(A++,bf(U,function(W){C[$]=W,--A===0&&g(C)},E))}),A--,A===0&&g(C)}catch(U){E(U)}},d)}}function Sd(s){return fa(function(c){var d=uf(arguments,1);return s(function(g,E){var C=[],A=1;function U($,W){A++,Ss($,function(te){te.rejected?C[W]={status:xc,reason:te.reason}:C[W]={status:"fulfilled",value:te.value},--A===0&&g(C)})}try{ut(c)?jt(c,U):Ir(c)?cd(c,U):cn("Input is not an iterable"),A--,A===0&&g(C)}catch($){E($)}},d)})}function Mh(s){jt(s,function(c){try{c()}catch{}})}function Op(s){var c=er(s)?s:0;return function(d){Du(function(){Mh(d)},c)}}function yl(s,c){return Ph(yl,Op(c),s,c)}var Ed;function Cc(s,c){!Ed&&(Ed=fa(vt(Ar,[Tc]).v||null));var d=Ed.v;if(!d)return yl(s);lt(s)||cn(Tc+": executor is not a function - "+ar(s));var g=0;function E(){return Dp[g]}var C=new d(function(A,U){function $(te){g=2,A(te)}function W(te){g=3,U(te)}s($,W)});return An(C,"state",{get:E}),C}var nu;function wl(s){return Ph(wl,Mh,s)}function Om(s,c){return!nu&&(nu=Sd(wl)),nu.v(s,c)}var Ap;function bl(s,c){return!Ap&&(Ap=fa(Cc)),Ap.v.call(this,s,c)}var Pp=Ev(bl),iu=void 0,rn="",kc="channels",Ai="core",Mp="createPerfMgr",Td="disabled",Sl="extensionConfig",Dc="extensions",_a="processTelemetry",xd="priority",wi="eventsSent",Sr="eventsDiscarded",au="eventsSendRequest",Pn="perfEvent",Es="offlineEventsStored",Rc="offlineBatchSent",Oc="offlineBatchDrop",ou="getPerfMgr",So="domain",Tf="path",Lh="Not dynamic - ",xf=/-([a-z])/g,Fh=/([^\w\d_$])/g,If=/^(\d+[\w\d_$])/;function El(s){return!Le(s)}function Lp(s){var c=s;return c&&mn(c)&&(c=c[to](xf,function(d,g){return g.toUpperCase()}),c=c[to](Fh,"_"),c=c[to](If,function(d,g){return"_"+g})),c}function di(s,c){return s&&c?ku(s,c)!==-1:!1}function Tl(s){return s&&s.toISOString()||""}function Pi(s){return Xt(s)?s[Zn]:rn}function Uu(s,c,d,g,E){var C=d;return s&&(C=s[c],C!==d&&(!E||E(C))&&(!g||g(d))&&(C=d,s[c]=C)),C}function Fp(s,c,d){var g;return s?(g=s[c],!g&&Le(g)&&(g=Ze(d)?{}:d,s[c]=g)):g=Ze(d)?{}:d,g}function Id(s,c){var d=null,g=null;return lt(s)?d=s:g=s,function(){var E=arguments;if(d&&(g=d()),g)return g[c][ma](g,E)}}function Mi(s,c,d,g,E){s&&c&&d&&(E!==!1||Ze(s[c]))&&(s[c]=Id(d,g))}function Nd(s,c,d,g){return s&&c&&ti(s)&&ut(d)&&jt(d,function(E){mn(E)&&Mi(s,E,c,E,g)}),s}function Up(s){return function(){function c(){var d=this;s&&Ot(s,function(g,E){d[g]=E})}return c}()}function su(s){return s&&Eu&&(s=Ip(Eu({},s))),s}function wt(s,c,d,g,E,C){var A=arguments,U=A[0]||{},$=A[dr],W=!1,te=1;for($>0&&Ya(U)&&(W=U,U=A[te]||{},te++),ti(U)||(U={});te<$;te++){var de=A[te],he=ut(de),me=ti(de);for(var le in de){var Fe=he&&le in de||me&&Fr(de,le);if(Fe){var Ee=de[le],Be=void 0;if(W&&Ee&&((Be=ut(Ee))||pa(Ee))){var qe=U[le];Be?ut(qe)||(qe=[]):pa(qe)||(qe={}),Ee=wt(W,qe,Ee)}Ee!==void 0&&(U[le]=Ee)}}}return U}function Ts(s){try{return s.responseText}catch{}return null}function xs(s,c){return s?"XDomainRequest,Response:"+Ts(s)||"":c}function no(s,c){return s?"XMLHttpRequest,Status:"+s[ro]+",Response:"+Ts(s)||s.response||"":c}function Nf(s,c){return c&&(er(c)?s=[c].concat(s):ut(c)&&(s=c.concat(s))),s}var xl="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Is="withCredentials",Eo="timeout";function Il(s,c,d,g,E,C){g===void 0&&(g=!1),E===void 0&&(E=!1);function A($,W,te){try{$[W]=te}catch{}}var U=new XMLHttpRequest;return g&&A(U,xl,g),d&&A(U,Is,d),U.open(s,c,!E),d&&A(U,Is,d),!E&&C&&A(U,Eo,C),U}function Cd(s){var c={};if(mn(s)){var d=Dn(s)[Fu](/[\r\n]+/);jt(d,function(g){if(g){var E=g.indexOf(": ");if(E!==-1){var C=Dn(g.substring(0,E))[Au](),A=Dn(g.substring(E+1));c[C]=A}else c[Dn(g)]=1}})}return c}function uu(s,c,d){if(!s[d]&&c&&c[Ec]){var g=c[Ec](d);g&&(s[d]=Dn(g))}return s}var Cf="kill-duration",Nl="kill-duration-seconds",kf="time-delta-millis";function jp(s,c){var d={};return s[ys]?d=Cd(s[ys]()):c&&(d=uu(d,s,kf),d=uu(d,s,Cf),d=uu(d,s,Nl)),d}var Bp="documentMode",Uh="location",$p="console",ju="JSON",Ac="crypto",Df="msCrypto",Ho="msie",Ns="trident/",Vo="XMLHttpRequest",Go=null,Pc=null,Yp=!1,Mc=null,qp=null;function Hp(s,c){var d=!1;if(s){try{if(d=c in s,!d){var g=s[gf];g&&(d=c in g)}}catch{}if(!d)try{var E=new s;d=!Ze(E[c])}catch{}}return d}function kd(s){if(s&&Yp){var c=Ar("__mockLocation");if(c)return c}return typeof location===xp&&location?location:Ar(Uh)}function Cs(){return typeof console!==vf?console:Ar($p)}function zo(){return!!(typeof JSON===xp&&JSON||Ar(ju)!==null)}function Wo(){return zo()?JSON||Ar(ju):null}function Dd(){return Ar(Ac)}function Rf(){return Ar(Df)}function Cl(){var s=ls();if(s&&(s[Oi]!==Pc||Go===null)){Pc=s[Oi];var c=(Pc||rn)[Au]();Go=di(c,Ho)||di(c,Ns)}return Go}function qi(s){if(s===void 0&&(s=null),!s){var c=ls()||{};s=c?(c.userAgent||rn)[Au]():rn}var d=(s||rn)[Au]();if(di(d,Ho)){var g=od()||{};return Math.max(parseInt(d[Fu](Ho)[1]),g[Bp]||0)}else if(di(d,Ns)){var E=parseInt(d[Fu](Ns)[1]);if(E)return E+4}return null}function ks(s){return(qp===null||s===!1)&&(qp=ol()&&!!ls().sendBeacon),qp}function Rd(s){var c=!1;try{c=!!Ar("fetch");var d=Ar("Request");c&&s&&d&&(c=Hp(d,"keepalive"))}catch{}return c}function ra(){return Mc===null&&(Mc=typeof XDomainRequest!==vf,Mc&&cu()&&(Mc=Mc&&!Hp(Ar(Vo),"withCredentials"))),Mc}function cu(){var s=!1;try{var c=Ar(Vo);s=!!c}catch{}return s}var Of=4294967296,Ds=4294967295,Li=123456789,Bu=987654321,Od=!1,kl=Li,$u=Bu;function Am(s){s<0&&(s>>>=0),kl=Li+s&Ds,$u=Bu-s&Ds,Od=!0}function jh(){try{var s=Iu()&2147483647;Am((Math.random()*Of^s)+s)}catch{}}function Pm(s){var c=0,d=Dd()||Rf();return d&&d.getRandomValues&&(c=d.getRandomValues(new Uint32Array(1))[0]&Ds),c===0&&Cl()&&(Od||jh(),c=Dl()&Ds),c===0&&(c=Math.floor(Of*Math.random()|0)),s||(c>>>=0),c}function Dl(s){$u=36969*($u&65535)+($u>>16)&Ds,kl=18e3*(kl&65535)+(kl>>16)&Ds;var c=($u<<16)+(kl&65535)>>>0&Ds|0;return s||(c>>>=0),c}function Af(s){s===void 0&&(s=22);for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=Pm()>>>0,g=0,E=rn;E[dr]<s;)g++,E+=c.charAt(d&63),d>>>=6,g===5&&(d=(Pm()<<2&4294967295|d&3)>>>0,g=0);return E}var Bh="3.3.5",Tv="."+Af(6),Ad=0;function Vp(s){return s[ru]===1||s[ru]===9||!+s[ru]}function Rl(s,c){var d=c[s.id];if(!d){d={};try{Vp(c)&&Gr(c,s.id,{e:!1,v:d})}catch{}}return d}function Yu(s,c){return c===void 0&&(c=!1),Lp(s+Ad+++(c?"."+Bh:rn)+Tv)}function Gp(s){var c={id:Yu("_aiData-"+(s||rn)+"."+Bh),accept:function(d){return Vp(d)},get:function(d,g,E,C){var A=d[c.id];return A?A[Lp(g)]:(C&&(A=Rl(c,d),A[Lp(g)]=E),E)},kill:function(d,g){if(d&&d[g])try{delete d[g]}catch{}}};return c}function Rs(s){return s&&ti(s)&&(s.isVal||s.fb||Fr(s,"v")||Fr(s,"mrg")||Fr(s,"ref")||s.set)}function Pd(s,c,d){var g,E=d.dfVal||Wt;if(c&&d.fb){var C=d.fb;ut(C)||(C=[C]);for(var A=0;A<C[dr];A++){var U=C[A],$=c[U];if(E($)?g=$:s&&($=s.cfg[U],E($)&&(g=$),s.set(s.cfg,Ui(U),$)),E(g))break}}return!E(g)&&E(d.v)&&(g=d.v),g}function Pf(s,c,d){var g=d;if(d&&Rs(d)&&(g=Pd(s,c,d)),g){Rs(g)&&(g=Pf(s,c,g));var E;ut(g)?(E=[],E[dr]=g[dr]):pa(g)&&(E={}),E&&(Ot(g,function(C,A){A&&Rs(A)&&(A=Pf(s,c,A)),E[C]=A}),g=E)}return g}function Os(s,c,d,g){var E,C,A,U=g,$,W,te,de;Rs(U)?(E=U.isVal,C=U.set,te=U[Mo],de=U[Zs],$=U.mrg,W=U.ref,!W&&Ze(W)&&(W=!!$),A=Pd(s,c,U)):A=g,de&&s[Zs](c,d);var he,me=!0,le=c[d];(le||!Le(le))&&(he=le,me=!1,E&&he!==A&&!E(he)&&(he=A,me=!0),C&&(he=C(he,A,c),me=he===A)),me?A?he=Pf(s,c,A):he=A:(pa(he)||ut(A))&&$&&A&&(pa(A)||ut(A))&&Ot(A,function(Fe,Ee){Os(s,he,Fe,Ee)}),s.set(c,d,he),W&&s.ref(c,d),te&&s[Mo](c,d)}var Lc=fo("[[ai_dynCfg_1]]"),Mm=fo("[[ai_blkDynCfg_1]]"),Ol=fo("[[ai_frcDynCfg_1]]");function xv(s){if(s){var c;if(ut(s)?(c=[],c[dr]=s[dr]):pa(s)&&(c={}),c)return Ot(s,function(d,g){c[d]=xv(g)}),c}return s}function Lm(s){if(s){var c=s[Lc]||s;if(c.cfg&&(c.cfg===s||c.cfg[Lc]===c))return c}return null}function Mf(s){if(s&&(pa(s)||ut(s)))try{s[Mm]=!0}catch{}return s}function $h(s,c,d){var g=!1;return d&&!s[c.blkVal]&&(g=d[Ol],!g&&!d[Mm]&&(g=pa(d)||ut(d))),g}function Fm(s){cn("InvalidAccess:"+s)}var qu=["push","pop","shift","unshift","splice"],To=function(s,c,d,g){s&&s[vd](3,108,"".concat(d," [").concat(c,"] failed - ")+ar(g))};function lu(s,c,d){ut(c)&&jt(qu,function(g){var E=c[g];c[g]=function(){for(var C=[],A=0;A<arguments.length;A++)C[A]=arguments[A];var U=E[ma](this,C);return Lf(s,c,d,"Patching"),U}})}function Hu(s,c){var d=mr(s,c);return d&&d.get}function Al(s,c,d,g){var E={n:d,h:[],trk:function(W){W&&W.fn&&(Aa(E.h,W)===-1&&E.h[Jr](W),s.trk(W,E))},clr:function(W){var te=Aa(E.h,W);te!==-1&&E.h[yt](te,1)}},C=!0,A=!1;function U(){C&&(A=A||$h(U,s,g),g&&!g[Lc]&&A&&(g=Lf(s,g,d,"Converting")),C=!1);var W=s.act;return W&&E.trk(W),g}U[s.prop]={chng:function(){s.add(E)}};function $(W){if(g!==W){U[s.ro]&&!s.upd&&Fm("["+d+"] is read-only:"+ar(c)),C&&(A=A||$h(U,s,g),C=!1);var te=A&&U[s.rf];if(A)if(te){Ot(g,function(he){g[he]=W?W[he]:iu});try{Ot(W,function(he,me){Pl(s,g,he,me)}),W=g}catch(he){To((s.hdlr||{})[bn],d,"Assigning",he),A=!1}}else g&&g[Lc]&&Ot(g,function(he){var me=Hu(g,he);if(me){var le=me[s.prop];le&&le.chng()}});if(W!==g){var de=W&&$h(U,s,W);!te&&de&&(W=Lf(s,W,d,"Converting")),g=W,A=de}s.add(E)}}Gr(c,E.n,{g:U,s:$})}function Pl(s,c,d,g){if(c){var E=Hu(c,d),C=E&&!!E[s.prop];C?c[d]=g:Al(s,c,d,g)}return c}function Md(s,c,d,g){if(c){var E=Hu(c,d),C=E&&!!E[s.prop],A=g&&g[0],U=g&&g[1],$=g&&g[2];if(!C){if($)try{Mf(c)}catch(W){To((s.hdlr||{})[bn],d,"Blocking",W)}try{Pl(s,c,d,c[d]),E=Hu(c,d)}catch(W){To((s.hdlr||{})[bn],d,"State",W)}}A&&(E[s.rf]=A),U&&(E[s.ro]=U),$&&(E[s.blkVal]=!0)}return c}function Lf(s,c,d,g){try{Ot(c,function(E,C){Pl(s,c,E,C)}),c[Lc]||(An(c,Lc,{get:function(){return s[_c]}}),lu(s,c,d))}catch(E){To((s.hdlr||{})[bn],d,g,E)}return c}var Jo="[[ai_",Fc="]]";function Um(s){var c,d=sf(Jo+"get"+s.uid+Fc),g=sf(Jo+"ro"+s.uid+Fc),E=sf(Jo+"rf"+s.uid+Fc),C=sf(Jo+"blkVal"+s.uid+Fc),A=sf(Jo+"dtl"+s.uid+Fc),U=null,$=null,W;function te(le,Fe){var Ee=W.act;try{W.act=le,le&&le[A]&&(jt(le[A],function(qe){qe.clr(le)}),le[A]=[]),Fe({cfg:s.cfg,set:s.set.bind(s),setDf:s[Xa].bind(s),ref:s.ref.bind(s),rdOnly:s[Mo].bind(s)})}catch(qe){var Be=s[bn];throw Be&&Be[vd](1,107,ar(qe)),qe}finally{W.act=Ee||null}}function de(){if(U){var le=U;U=null,$&&$[Lo](),$=null;var Fe=[];if(jt(le,function(Ee){if(Ee&&(Ee[A]&&(jt(Ee[A],function(Be){Be.clr(Ee)}),Ee[A]=null),Ee.fn))try{te(Ee,Ee.fn)}catch(Be){Fe[Jr](Be)}}),U)try{de()}catch(Ee){Fe[Jr](Ee)}Fe[dr]>0&&km("Watcher error(s): ",Fe)}}function he(le){if(le&&le.h[dr]>0){U||(U=[]),$||($=Du(function(){$=null,de()},0));for(var Fe=0;Fe<le.h[dr];Fe++){var Ee=le.h[Fe];Ee&&Aa(U,Ee)===-1&&U[Jr](Ee)}}}function me(le,Fe){if(le){var Ee=le[A]=le[A]||[];Aa(Ee,Fe)===-1&&Ee[Jr](Fe)}}return W=(c={prop:d,ro:g,rf:E},c[Zs]=C,c[_c]=s,c.add=he,c[vs]=de,c.use=te,c.trk=me,c),W}function jm(s,c){var d={fn:c,rm:function(){d.fn=null,s=null,c=null}};return Gr(d,"toJSON",{v:function(){return"WatcherHandler"+(d.fn?"":"[X]")}}),s.use(d,c),d}function zp(s,c,d){var g,E=Lm(c);if(E)return E;var C=Yu("dyncfg",!0),A=c&&d!==!1?c:xv(c),U;function $(){U[vs]()}function W(Be,qe,et){try{Be=Pl(U,Be,qe,et)}catch(mt){To(s,qe,"Setting value",mt)}return Be[qe]}function te(Be){return jm(U,Be)}function de(Be,qe){U.use(null,function(et){var mt=U.upd;try{Ze(qe)||(U.upd=qe),Be(et)}finally{U.upd=mt}})}function he(Be,qe){var et;return Md(U,Be,qe,(et={},et[0]=!0,et))[qe]}function me(Be,qe){var et;return Md(U,Be,qe,(et={},et[1]=!0,et))[qe]}function le(Be,qe){var et;return Md(U,Be,qe,(et={},et[2]=!0,et))[qe]}function Fe(Be,qe){return qe&&Ot(qe,function(et,mt){Os(Ee,Be,et,mt)}),Be}var Ee=(g={uid:null,cfg:A},g[bn]=s,g[vs]=$,g.set=W,g[Xa]=Fe,g[Pu]=te,g.ref=he,g[Mo]=me,g[Zs]=le,g._block=de,g);return Gr(Ee,"uid",{c:!1,e:!1,w:!1,v:C}),U=Um(Ee),Lf(U,A,"config","Creating"),Ee}function Wp(s,c){s?(s[Za](c),s[vd](2,108,c)):Fm(c)}function Ko(s,c,d,g){var E=zp(d,s||{},g);return c&&E[Xa](E.cfg,c),E}function Vu(s,c,d){var g=s[Lc]||s;return g.cfg&&(g.cfg===s||g.cfg[Lc]===g)?g[Pu](c):(Wp(d,Lh+ar(s)),Ko(s,null,d)[Pu](c))}function Ml(s,c){if(s&&s[Qs])return s[Qs](c)}function Bm(s,c,d){var g;return d||(g=bl(function(E){d=E})),s&&Dh(s)>0?Ss(Ml(s[0],c),function(){Bm(uf(s,1),c,d)}):d(),g}var Jp=500,$m="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function Yh(s,c,d){return!s&&Le(s)?c:Ya(s)?s:Ui(s)[Au]()==="true"}function Kp(s){return{mrg:!0,v:s}}function Uc(s,c,d){return{fb:d,isVal:s,v:c}}function xo(s,c){return{fb:c,set:Yh,v:!!s}}var Ld=[wi,Sr,au,Pn],Ll=null,Zo;function pg(s,c){return function(){var d=arguments,g=Iv(c);if(g){var E=g.listener;E&&E[s]&&E[s][ma](E,d)}}}function Zp(){var s=Ar("Microsoft");return s&&(Ll=s.ApplicationInsights),Ll}function Iv(s){var c=Ll;return!c&&s.disableDbgExt!==!0&&(c=Ll||Zp()),c?c.ChromeDbgExt:null}function hg(s){if(!Zo){Zo={};for(var c=0;c<Ld[dr];c++)Zo[Ld[c]]=pg(Ld[c],s)}return Zo}var Hi,Fd="warnToConsole",Ud="AI (Internal): ",Ym="AI: ",Fl="AITR_",ya={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Io=(Hi={},Hi[0]=null,Hi[1]="errorToConsole",Hi[2]=Fd,Hi[3]="debugToConsole",Hi);function jd(s){return s?'"'+s[to](/\"/g,rn)+'"':rn}function Gu(s,c){var d=Cs();if(d){var g="log";d[s]&&(g=s),lt(d[g])&&d[g](c)}}var jc=function(){function s(c,d,g,E){g===void 0&&(g=!1);var C=this;C[yd]=c,C[bc]=(g?Ym:Ud)+c;var A=rn;zo()&&(A=Wo().stringify(E));var U=(d?" message:"+jd(d):rn)+(E?" props:"+jd(A):rn);C[bc]+=U}return s.dataType="MessageData",s}();function As(s,c){return(s||{})[bn]||new qh(c)}var qh=function(){function s(c){this.identifier="DiagnosticLogger",this.queue=[];var d=0,g={},E,C,A,U,$;ea(s,this,function(W){$=de(c||{}),W.consoleLoggingLevel=function(){return E},W[vd]=function(le,Fe,Ee,Be,qe){qe===void 0&&(qe=!1);var et=new jc(Fe,Ee,qe,Be);if(U)throw ar(et);var mt=Io[le]||Fd;if(Ze(et[bc]))me("throw"+(le===1?"Critical":"Warning"),et);else{if(qe){var kr=+et[yd];!g[kr]&&E>=le&&(W[mt](et[bc]),g[kr]=!0)}else E>=le&&W[mt](et[bc]);te(le,et)}},W.debugToConsole=function(le){Gu("debug",le),me("warning",le)},W[Za]=function(le){Gu("warn",le),me("warning",le)},W.errorToConsole=function(le){Gu("error",le),me("error",le)},W.resetInternalMessageCount=function(){d=0,g={}},W[Sc]=te,W[Qs]=function(le){$&&$.rm(),$=null};function te(le,Fe){if(!he()){var Ee=!0,Be=Fl+Fe[yd];if(g[Be]?Ee=!1:g[Be]=!0,Ee&&(le<=C&&(W.queue[Jr](Fe),d++,me(le===1?"error":"warn",Fe)),d===A)){var qe="Internal events throttle limit per PageView reached for this app.",et=new jc(23,qe,!1);W.queue[Jr](et),le===1?W.errorToConsole(qe):W[Za](qe)}}}function de(le){return Vu(Ko(le,ya,W).cfg,function(Fe){var Ee=Fe.cfg;E=Ee[wc],C=Ee.loggingLevelTelemetry,A=Ee.maxMessageLimit,U=Ee.enableDebug})}function he(){return d>=A}function me(le,Fe){var Ee=Iv(c||{});Ee&&Ee[Fa]&&Ee[Fa](le,Fe)}})}return s.__ieDyn=1,s}();function qm(s){return s||new qh}function bt(s,c,d,g,E,C){C===void 0&&(C=!1),qm(s)[vd](c,d,g,E,C)}function zu(s,c){qm(s)[Za](c)}var fu,Ff,Hm="toGMTString",Bc="toUTCString",Bd="cookie",Ps="expires",Vm="isCookieUseDisabled",Xp="disableCookiesUsage",Ul="_ckMgr",$c=null,Yc=null,Hh=null,on,Ms={},Vh={},Gh=(fu={cookieCfg:Kp((Ff={},Ff[So]={fb:"cookieDomain",dfVal:El},Ff.path={fb:"cookiePath",dfVal:El},Ff.enabled=iu,Ff.ignoreCookies=iu,Ff.blockedCookies=iu,Ff)),cookieDomain:iu,cookiePath:iu},fu[Xp]=iu,fu);function du(){!on&&(on=Tu(function(){return od()}))}function Qp(s){return s?s.isEnabled():!0}function zh(s,c){return c&&s&&ut(s.ignoreCookies)?Aa(s.ignoreCookies,c)!==-1:!1}function Wh(s,c){return c&&s&&ut(s.blockedCookies)&&Aa(s.blockedCookies,c)!==-1?!0:zh(s,c)}function $d(s,c){var d=c[yc];if(Le(d)){var g=void 0;Ze(s[Vm])||(g=!s[Vm]),Ze(s[Xp])||(g=!s[Xp]),d=g}return d}function Yd(s,c){var d,g,E,C,A,U,$,W,te;s=Ko(s||Vh,null,c).cfg,A=Vu(s,function(he){he[Xa](he.cfg,Gh),g=he.ref(he.cfg,"cookieCfg"),E=g[Tf]||"/",C=g[So],U=$d(s,g)!==!1,$=g.getCookie||Jh,W=g.setCookie||No,te=g.delCookie||No},c);var de=(d={isEnabled:function(){var he=$d(s,g)!==!1&&U&&jl(c),me=Vh[Ul];return he&&me&&de!==me&&(he=Qp(me)),he},setEnabled:function(he){U=he!==!1,g[yc]=he},set:function(he,me,le,Fe,Ee){var Be=!1;if(Qp(de)&&!Wh(g,he)){var qe={},et=Dn(me||rn),mt=ku(et,";");if(mt!==-1&&(et=Dn(ci(me,mt)),qe=qc(ni(me,mt+1))),Uu(qe,So,Fe||C,Ni,Ze),!Le(le)){var kr=Cl();if(Ze(qe[Ps])){var pn=Iu(),hn=pn+le*1e3;if(hn>0){var Bn=new Date;Bn.setTime(hn),Uu(qe,Ps,eh(Bn,kr?Hm:Bc)||eh(Bn,kr?Hm:Bc)||rn,Ni)}}kr||Uu(qe,"max-age",rn+le,null,Ze)}var rr=kd();rr&&rr[Lu]==="https:"&&(Uu(qe,"secure",null,null,Ze),Yc===null&&(Yc=!Kh((ls()||{})[Oi])),Yc&&Uu(qe,"SameSite","None",null,Ze)),Uu(qe,Tf,Ee||E,null,Ze),W(he,Bl(et,qe)),Be=!0}return Be},get:function(he){var me=rn;return Qp(de)&&!zh(g,he)&&(me=$(he)),me},del:function(he,me){var le=!1;return Qp(de)&&(le=de.purge(he,me)),le},purge:function(he,me){var le,Fe=!1;if(jl(c)){var Ee=(le={},le[Tf]=me||"/",le[Ps]="Thu, 01 Jan 1970 00:00:01 GMT",le);Cl()||(Ee["max-age"]="0"),te(he,Bl(rn,Ee)),Fe=!0}return Fe}},d[Qs]=function(he){A&&A.rm(),A=null},d);return de[Ul]=de,de}function jl(s){if($c===null){$c=!1,!on&&du();try{var c=on.v||{};$c=c[Bd]!==void 0}catch(d){bt(s,2,68,"Cannot access document.cookie - "+Pi(d),{exception:ar(d)})}}return $c}function qc(s){var c={};if(s&&s[dr]){var d=Dn(s)[Fu](";");jt(d,function(g){if(g=Dn(g||rn),g){var E=ku(g,"=");E===-1?c[g]=null:c[Dn(ci(g,E))]=Dn(ni(g,E+1))}})}return c}function eh(s,c){return lt(s[c])?s[c]():null}function Bl(s,c){var d=s||rn;return Ot(c,function(g,E){d+="; "+g+(Le(E)?rn:"="+E)}),d}function Jh(s){var c=rn;if(!on&&du(),on.v){var d=on.v[Bd]||rn;Hh!==d&&(Ms=qc(d),Hh=d),c=Dn(Ms[s]||rn)}return c}function No(s,c){!on&&du(),on.v&&(on.v[Bd]=s+"="+c)}function Kh(s){return mn(s)?!!(di(s,"CPU iPhone OS 12")||di(s,"iPad; CPU OS 12")||di(s,"Macintosh; Intel Mac OS X 10_14")&&di(s,"Version/")&&di(s,"Safari")||di(s,"Macintosh; Intel Mac OS X 10_14")&&Wa(s,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||di(s,"Chrome/5")||di(s,"Chrome/6")||di(s,"UnrealEngine")&&!di(s,"Chrome")||di(s,"UCBrowser/12")||di(s,"UCBrowser/11")):!1}var qd={perfEvtsSendAll:!1};function Gm(s){s.h=null;var c=s.cb;s.cb=[],jt(c,function(d){vt(d.fn,[d.arg])})}function Ls(s,c,d,g){jt(s,function(E){E&&E[c]&&(d?(d.cb[Jr]({fn:g,arg:E}),d.h=d.h||Du(Gm,0,d)):vt(g,[E]))})}var Nv=function(){function s(c){this.listeners=[];var d,g,E=[],C={h:null,cb:[]},A=Ko(c,qd);g=A[Pu](function(U){d=!!U.cfg.perfEvtsSendAll}),ea(s,this,function(U){Gr(U,"listeners",{g:function(){return E}}),U[Qa]=function($){E[Jr]($)},U[Mu]=function($){for(var W=Aa(E,$);W>-1;)E[yt](W,1),W=Aa(E,$)},U[wi]=function($){Ls(E,wi,C,function(W){W[wi]($)})},U[Sr]=function($,W){Ls(E,Sr,C,function(te){te[Sr]($,W)})},U[au]=function($,W){Ls(E,au,W?C:null,function(te){te[au]($,W)})},U[Pn]=function($){$&&(d||!$[Cp]())&&Ls(E,Pn,null,function(W){$[eu]?Du(function(){return W[Pn]($)},0):W[Pn]($)})},U[Es]=function($){$&&$[dr]&&Ls(E,Es,C,function(W){W[Es]($)})},U[Rc]=function($){$&&$[Ua]&&Ls(E,Rc,C,function(W){W[Rc]($)})},U[Oc]=function($,W){if($>0){var te=W||0;Ls(E,Oc,C,function(de){de[Oc]($,te)})}},U[Qs]=function($){var W=function(){g&&g.rm(),g=null,E=[],C.h&&C.h[Lo](),C.h=null,C.cb=[]},te;if(Ls(E,"unload",null,function(de){var he=de[Qs]($);he&&(te||(te=[]),te[Jr](he))}),te)return bl(function(de){return Ss(Pp(te),function(){W(),de()})});W()}})}return s.__ieDyn=1,s}(),Wu="ctx",Zh="ParentContextKey",$l="ChildrenContextKey",zm=null,Xo=function(){function s(c,d,g){var E=this;if(E.start=Iu(),E[Zn]=c,E[eu]=g,E[Cp]=function(){return!1},lt(d)){var C;Gr(E,"payload",{g:function(){return!C&&lt(d)&&(C=d(),d=null),C}})}E[gl]=function(A){return A?A===s[Zh]||A===s[$l]?E[A]:(E[Wu]||{})[A]:null},E[Yi]=function(A,U){if(A)if(A===s[Zh])E[A]||(E[Cp]=function(){return!0}),E[A]=U;else if(A===s[$l])E[A]=U;else{var $=E[Wu]=E[Wu]||{};$[A]=U}},E[wd]=function(){var A=0,U=E[gl](s[$l]);if(ut(U))for(var $=0;$<U[dr];$++){var W=U[$];W&&(A+=W[gs])}E[gs]=Iu()-E.start,E.exTime=E[gs]-A,E[wd]=function(){}}}return s.ParentContextKey="parent",s.ChildrenContextKey="childEvts",s}(),Fs=function(){function s(c){this.ctx={},ea(s,this,function(d){d.create=function(g,E,C){return new Xo(g,E,C)},d.fire=function(g){g&&(g[wd](),c&&lt(c[Pn])&&c[Pn](g))},d[Yi]=function(g,E){if(g){var C=d[Wu]=d[Wu]||{};C[g]=E}},d[gl]=function(g){return(d[Wu]||{})[g]}})}return s.__ieDyn=1,s}(),Hn="CoreUtils.doPerf";function Uf(s,c,d,g,E){if(s){var C=s;if(C[ou]&&(C=C[ou]()),C){var A=void 0,U=C[gl](Hn);try{if(A=C.create(c(),g,E),A){if(U&&A[Yi]&&(A[Yi](Xo[Zh],U),U[gl]&&U[Yi])){var $=U[gl](Xo[$l]);$||($=[],U[Yi](Xo[$l],$)),$[Jr](A)}return C[Yi](Hn,A),d(A)}}catch(W){A&&A[Yi]&&A[Yi]("exception",W)}finally{A&&C.fire(A),C[Yi](Hn,U)}}}return d()}function Yl(){return zm}var Hd="00000000000000000000000000000000",pr="0000000000000000";function io(s,c,d){return s&&s[dr]===c&&s!==d?!!s.match(/^[\da-f]*$/i):!1}function ao(s){return io(s,32,Hd)}function Fi(s){return io(s,16,pr)}var ql=Gp("plugin");function En(s){return ql.get(s,"state",{},!0)}function Hl(s,c){for(var d=[],g=null,E=s[eo](),C;E;){var A=E[jo]();if(A){g&&g[vl]&&A[_a]&&g[vl](A),C=En(A);var U=!!C[tn];A[tn]&&(U=A[tn]()),U||d[Jr](A),g=A,E=E[eo]()}}jt(d,function($){var W=s[Ai]();$[Xs](s.getCfg(),W,c,s[eo]()),C=En($),!$[Ai]&&!C[Ai]&&(C[Ai]=W),C[tn]=!0,delete C[ii]})}function pu(s){return s.sort(function(c,d){var g=0;if(d){var E=d[_a];c[_a]?g=E?c[xd]-d[xd]:1:E&&(g=-1)}else g=c?1:-1;return g})}function th(s){var c={};return{getName:function(){return c[Zn]},setName:function(d){s&&s.setName(d),c[Zn]=d},getTraceId:function(){return c[wf]},setTraceId:function(d){s&&s.setTraceId(d),ao(d)&&(c[wf]=d)},getSpanId:function(){return c[qo]},setSpanId:function(d){s&&s.setSpanId(d),Fi(d)&&(c[qo]=d)},getTraceFlags:function(){return c[ga]},setTraceFlags:function(d){s&&s.setTraceFlags(d),c[ga]=d}}}var hu="TelemetryPluginChain",Xh="_hasRun",Ju="_getTelCtx",Qh=0;function em(s,c,d){for(;s;){if(s[jo]()===d)return s;s=s[eo]()}return j([d],c.config||{},c)}function p(s,c,d,g){var E=null,C=[];c||(c=Ko({},null,d[bn])),g!==null&&(E=g?em(s,d,g):s);var A={_next:$,ctx:{core:function(){return d},diagLog:function(){return As(d,c.cfg)},getCfg:function(){return c.cfg},getExtCfg:te,getConfig:de,hasNext:function(){return!!E},getNext:function(){return E},setNext:function(me){E=me},iterate:he,onComplete:U}};function U(me,le){for(var Fe=[],Ee=2;Ee<arguments.length;Ee++)Fe[Ee-2]=arguments[Ee];me&&C[Jr]({func:me,self:Ze(le)?A.ctx:le,args:Fe})}function $(){var me=E;if(E=me?me[eo]():null,!me){var le=C;le&&le[dr]>0&&(jt(le,function(Fe){try{Fe.func.call(Fe.self,Fe.args)}catch(Ee){bt(d[bn],2,73,"Unexpected Exception during onComplete - "+ar(Ee))}}),C=[])}return me}function W(me,le){var Fe=null,Ee=c.cfg;if(Ee&&me){var Be=Ee[Sl];!Be&&le&&(Be={}),Ee[Sl]=Be,Be=c.ref(Ee,Sl),Be&&(Fe=Be[me],!Fe&&le&&(Fe={}),Be[me]=Fe,Fe=c.ref(Be,me))}return Fe}function te(me,le){var Fe=W(me,!0);return le&&Ot(le,function(Ee,Be){if(Le(Fe[Ee])){var qe=c.cfg[Ee];(qe||!Le(qe))&&(Fe[Ee]=qe)}Os(c,Fe,Ee,Be)}),c[Xa](Fe,le)}function de(me,le,Fe){Fe===void 0&&(Fe=!1);var Ee,Be=W(me,!1),qe=c.cfg;return Be&&(Be[le]||!Le(Be[le]))?Ee=Be[le]:(qe[le]||!Le(qe[le]))&&(Ee=qe[le]),Ee||!Le(Ee)?Ee:Fe}function he(me){for(var le;le=A._next();){var Fe=le[jo]();Fe&&me(Fe)}}return A}function _(s,c,d,g){var E=Ko(c),C=p(s,E,d,g),A=C.ctx;function U(W){var te=C._next();return te&&te[_a](W,A),!te}function $(W,te){return W===void 0&&(W=null),ut(W)&&(W=j(W,E.cfg,d,te)),_(W||A[eo](),E.cfg,d,te)}return A[$i]=U,A[Yo]=$,A}function S(s,c,d){var g=Ko(c.config),E=p(s,g,c,d),C=E.ctx;function A($){var W=E._next();return W&&W[Qs](C,$),!W}function U($,W){return $===void 0&&($=null),ut($)&&($=j($,g.cfg,c,W)),S($||C[eo](),c,W)}return C[$i]=A,C[Yo]=U,C}function k(s,c,d){var g=Ko(c.config),E=p(s,g,c,d),C=E.ctx;function A($){return C.iterate(function(W){lt(W[tu])&&W[tu](C,$)})}function U($,W){return $===void 0&&($=null),ut($)&&($=j($,g.cfg,c,W)),k($||C[eo](),c,W)}return C[$i]=A,C[Yo]=U,C}function j(s,c,d,g){var E=null,C=!g;if(ut(s)&&s[dr]>0){var A=null;jt(s,function(U){if(!C&&g===U&&(C=!0),C&&U&&lt(U[_a])){var $=Z(U,c,d);E||(E=$),A&&A._setNext($),A=$}})}return g&&!E?j([g],c,d):E}function Z(s,c,d){var g=null,E=lt(s[_a]),C=lt(s[vl]),A;s?A=s[yo]+"-"+s[xd]+"-"+Qh++:A="Unknown-0-"+Qh++;var U={getPlugin:function(){return s},getNext:function(){return g},processTelemetry:te,unload:de,update:he,_id:A,_setNext:function(me){g=me}};function $(){var me;return s&&lt(s[Ju])&&(me=s[Ju]()),me||(me=_(U,c,d)),me}function W(me,le,Fe,Ee,Be){var qe=!1,et=s?s[yo]:hu,mt=me[Xh];return mt||(mt=me[Xh]={}),me.setNext(g),s&&Uf(me[Ai](),function(){return et+":"+Fe},function(){mt[A]=!0;try{var kr=g?g._id:rn;kr&&(mt[kr]=!1),qe=le(me)}catch(hn){var pn=g?mt[g._id]:!0;pn&&(qe=!0),(!g||!pn)&&bt(me[Fa](),1,73,"Plugin ["+et+"] failed during "+Fe+" - "+ar(hn)+", run flags: "+ar(mt))}},Ee,Be),qe}function te(me,le){le=le||$();function Fe(Ee){if(!s||!E)return!1;var Be=En(s);return Be[ii]||Be[Td]?!1:(C&&s[vl](g),s[_a](me,Ee),!0)}W(le,Fe,"processTelemetry",function(){return{item:me}},!me.sync)||le[$i](me)}function de(me,le){function Fe(){var Ee=!1;if(s){var Be=En(s),qe=s[Ai]||Be[Ai];s&&(!qe||qe===me.core())&&!Be[ii]&&(Be[Ai]=null,Be[ii]=!0,Be[tn]=!1,s[ii]&&s[ii](me,le)===!0&&(Ee=!0))}return Ee}W(me,Fe,"unload",function(){},le[eu])||me[$i](le)}function he(me,le){function Fe(){var Ee=!1;if(s){var Be=En(s),qe=s[Ai]||Be[Ai];s&&(!qe||qe===me.core())&&!Be[ii]&&s[tu]&&s[tu](me,le)===!0&&(Ee=!0)}return Ee}W(me,Fe,"update",function(){},!1)||me[$i](le)}return Qt(U)}function X(){var s=[];function c(g){g&&s[Jr](g)}function d(g,E){jt(s,function(C){try{C(g,E)}catch(A){bt(g[Fa](),2,73,"Unexpected error calling unload handler - "+ar(A))}}),s=[]}return{add:c,run:d}}function oe(){var s=[];function c(g){var E=s;s=[],jt(E,function(C){try{(C.rm||C.remove).call(C)}catch(A){bt(g,2,73,"Unloading:"+ar(A))}})}function d(g){g&&sl(s,g)}return{run:c,add:d}}var ge,be="getPlugin",rt=(ge={},ge[Sl]={isVal:El,v:{}},ge),Bt=function(){function s(){var c=this,d,g,E,C,A;W(),ea(s,c,function(te){te[Xs]=function(de,he,me,le){$(de,he,le),d=!0},te[ii]=function(de,he){var me,le=te[Ai];if(!le||de&&le!==de[Ai]())return;var Fe,Ee=!1,Be=de||S(null,le,E&&E[be]?E[be]():E),qe=he||(me={reason:0},me[eu]=!1,me);function et(){Ee||(Ee=!0,C.run(Be,he),A.run(Be[Fa]()),Fe===!0&&Be[$i](qe),W())}return!te[_s]||te[_s](Be,qe,et)!==!0?et():Fe=!0,Fe},te[tu]=function(de,he){var me=te[Ai];if(!me||de&&me!==de[Ai]())return;var le,Fe=!1,Ee=de||k(null,me,E&&E[be]?E[be]():E),Be=he||{reason:0};function qe(){Fe||(Fe=!0,$(Ee.getCfg(),Ee.core(),Ee[eo]()))}return!te._doUpdate||te._doUpdate(Ee,Be,qe)!==!0?qe():le=!0,le},Mi(te,"_addUnloadCb",function(){return C},"add"),Mi(te,"_addHook",function(){return A},"add"),Gr(te,"_unloadHooks",{g:function(){return A}})}),c[Fa]=function(te){return U(te)[Fa]()},c[tn]=function(){return d},c.setInitialized=function(te){d=te},c[vl]=function(te){E=te},c[$i]=function(te,de){de?de[$i](te):E&&lt(E[_a])&&E[_a](te,null)},c._getTelCtx=U;function U(te){te===void 0&&(te=null);var de=te;if(!de){var he=g||_(null,{},c[Ai]);E&&E[be]?de=he[Yo](null,E[be]):de=he[Yo](null,E)}return de}function $(te,de,he){Ko(te,rt,As(de)),!he&&de&&(he=de[ta]()[eo]());var me=E;E&&E[be]&&(me=E[be]()),c[Ai]=de,g=_(he,te,de,me)}function W(){d=!1,c[Ai]=null,g=null,E=null,A=oe(),C=X()}}return s.__ieDyn=1,s}();function ur(s,c,d){var g={id:c,fn:d};sl(s,g);var E={remove:function(){jt(s,function(C,A){if(C.id===g.id)return s[yt](A,1),-1})}};return E}function hr(s,c,d){for(var g=!1,E=s[dr],C=0;C<E;++C){var A=s[C];if(A)try{if(A.fn[ma](null,[c])===!1){g=!0;break}}catch(U){bt(d,2,64,"Telemetry initializer failed: "+Pi(U),{exception:ar(U)},!0)}}return!g}var ht=function(s){_f(c,s);function c(){var d=s.call(this)||this;d.identifier="TelemetryInitializerPlugin",d.priority=199;var g,E;C(),ea(c,d,function(A,U){A.addTelemetryInitializer=function($){return ur(E,g++,$)},A[_a]=function($,W){hr(E,$,W?W[Fa]():A[Fa]())&&A[$i]($,W)},A[_s]=function(){C()}});function C(){g=0,E=[]}return d}return c.__ieDyn=1,c}(Bt),cr,Ht="Plugins must provide initialize method",Pr="_notificationManager",Mr="SDK is still unloading...",Lt="SDK is not initialized",Mn=100,jf=5e4,Ln=os((cr={cookieCfg:{}},cr[Dc]={rdOnly:!0,ref:!0,v:[]},cr[kc]={rdOnly:!0,ref:!0,v:[]},cr[Sl]={ref:!0,v:{}},cr[Mp]=iu,cr.loggingLevelConsole=0,cr.diagnosticLogInterval=iu,cr));function oo(s,c){return new Fs(c)}function Vd(s,c,d){var g,E=[],C=[],A={};return jt(d,function(U){(Le(U)||Le(U[Xs]))&&br(Ht);var $=U[xd],W=U[yo];U&&$&&(Le(A[$])?A[$]=W:zu(s,"Two extensions have same priority #"+$+" - "+A[$]+", "+W)),!$||$<c?E[Jr](U):C[Jr](U)}),g={},g[Ai]=E,g[kc]=C,g}function tm(s,c){var d=!1;return jt(c,function(g){if(g===s)return d=!0,-1}),d}function Gd(s,c,d,g){d&&Ot(d,function(E,C){g&&pa(C)&&pa(c[E])&&Gd(s,c[E],C,g),g&&pa(C)&&pa(c[E])?Gd(s,c[E],C,g):s.set(c,E,C)})}function zd(s,c){var d=null,g=-1;return jt(s,function(E,C){if(E.w===c)return d=E,g=C,-1}),{i:g,l:d}}function rh(s,c){var d=zd(s,c).l;return d||(d={w:c,rm:function(){var g=zd(s,c);g.i!==-1&&s[yt](g.i,1)}},s[Jr](d)),d}function Wm(s,c,d){jt(c,function(g){var E=Vu(s,g.w,d);delete g.w,g.rm=function(){E.rm()}})}function je(s,c,d,g){return c.add(s[Pu](function(E){var C=E.cfg.disableDbgExt;C===!0&&g&&(d[Mu](g),g=null),d&&!g&&C!==!0&&(g=hg(E.cfg),d[Qa](g))})),g}function Rt(s){return Gr({rm:function(){s.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(s)+">"}})}var Jt=function(){function s(){var c,d,g,E,C,A,U,$,W,te,de,he,me,le,Fe,Ee,Be,qe,et,mt,kr,pn,hn,Bn,rr,Gt,fn,oa,xi,at,zt,zn;ea(s,this,function(He){Ie(),He._getDbgPlgTargets=function(){return[hn,E]},He[tn]=function(){return d},He.activeStatus=function(){return Gt},He._setPendingStatus=function(){Gt=3},He[Xs]=function(Ae,xt,nr,Mt){me&&br(Mr),He[tn]()&&br("Core cannot be initialized more than once"),c=Ko(Ae,Ln,nr||He[bn],!1),Ae=c.cfg,yu(c[Pu](function($n){var ua=$n.cfg,ns=Gt===3;if(!ns){oa=ua.initInMemoMaxSize||Mn;var wu=ua[Fo],hh=ua.endpointUrl;if(Le(wu)){kr=null,Gt=Ka[Kr];var mh="Please provide instrumentation key";d?(bt(g,1,100,mh),Ii()):br(mh);return}var m_=[];if(fr(wu)?(m_[Jr](wu),kr=null):kr=wu,fr(hh)?(m_[Jr](hh),fn=null):fn=hh,m_[dr]){xi=!1,Gt=3;var ly=El(ua.initTimeOut)?ua.initTimeOut:jf,Ob=Om(m_);Du(function(){xi||sr()},ly),Ss(Ob,function(Bv){try{if(xi)return;if(!Bv.rejected){var $v=Bv[Uo];if($v&&$v[dr]){var t0=$v[0];if(kr=t0&&t0[Uo],$v[dr]>1){var r0=$v[1];fn=r0&&r0[Uo]}}kr&&(Ae[Fo]=kr,Ae.endpointUrl=fn)}sr()}catch{xi||sr()}})}else sr();var v_=$n.ref($n.cfg,Sl);Ot(v_,function(Bv){$n.ref(v_,Bv)})}})),C=Mt,et=je(c,qe,C&&He[gd](),et),Uv(),He[bn]=nr;var _r=Ae[Dc];if(te=[],te[Jr].apply(te,vc(vc([],xt,!1),_r)),de=Ae[kc],Ta(null),(!he||he[dr]===0)&&br("No "+kc+" available"),de&&de[dr]>1){var si=He[jo]("TeeChannelController");(!si||!si.plugin)&&bt(g,1,28,"TeeChannel required")}Wm(Ae,pn,g),pn=null,d=!0,Gt===Ka.ACTIVE&&Ii()},He.getChannels=function(){var Ae=[];return he&&jt(he,function(xt){Ae[Jr](xt)}),Qt(Ae)},He.track=function(Ae){Uf(He[ou](),function(){return"AppInsightsCore:track"},function(){Ae===null&&(sa(Ae),br("Invalid telemetry item")),!Ae[Zn]&&Le(Ae[Zn])&&(sa(Ae),br("telemetry name required")),Ae[wo]=Ae[wo]||kr,Ae[gs]=Ae[gs]||Tl(new Date),Ae.ver=Ae.ver||"4.0",!me&&He[tn]()&&Gt===Ka.ACTIVE?Co()[$i](Ae):Gt!==Ka[Kr]&&E[dr]<=oa&&E[Jr](Ae)},function(){return{item:Ae}},!Ae.sync)},He[ta]=Co,He[gd]=function(){return C||(C=new Nv(c.cfg),He[Pr]=C),C},He[Qa]=function(Ae){He.getNotifyMgr()[Qa](Ae)},He[Mu]=function(Ae){C&&C[Mu](Ae)},He.getCookieMgr=function(){return $||($=Yd(c.cfg,He[bn])),$},He.setCookieMgr=function(Ae){$!==Ae&&(Ml($,!1),$=Ae)},He[ou]=function(){return A||U||Yl()},He.setPerfMgr=function(Ae){A=Ae},He.eventCnt=function(){return E[dr]},He.releaseQueue=function(){if(d&&E[dr]>0){var Ae=E;E=[],Gt===2?jt(Ae,function(xt){xt[wo]=xt[wo]||kr,Co()[$i](xt)}):bt(g,2,20,"core init status is not active")}},He[ml]=function(Ae){return Fe=Ae||null,zn=!1,at&&at[Lo](),Wn(!0)};function sr(){xi=!0,Le(kr)?(Gt=Ka[Kr],bt(g,1,112,"ikey can't be resolved from promises")):Gt=Ka.ACTIVE,Ii()}function Ii(){d&&(He.releaseQueue(),He[ml]())}function Wn(Ae){if((!at||!at[yc])&&!zn){var xt=Ae||g&&g.queue[dr]>0;xt&&(zt||(zt=!0,yu(c[Pu](function(nr){var Mt=nr.cfg.diagnosticLogInterval;(!Mt||!(Mt>0))&&(Mt=1e4);var _r=!1;at&&(_r=at[yc],at[Lo]()),at=Ep(Fv,Mt),at.unref(),at[yc]=_r}))),at[yc]=!0)}return at}He[_d]=function(){zn=!0,at&&at[Lo](),Fv()},Nd(He,function(){return le},["addTelemetryInitializer"]),He[Qs]=function(Ae,xt,nr){var Mt;Ae===void 0&&(Ae=!0),d||br(Lt),me&&br(Mr);var _r=(Mt={reason:50},Mt[eu]=Ae,Mt.flushComplete=!1,Mt),si;Ae&&!xt&&(si=bl(function(ns){xt=ns}));var $n=S(ip(),He);$n[Bo](function(){qe.run(He[bn]),Bm([$,C,g],Ae,function(){Ie(),xt&&xt(_r)})},He);function ua(ns){_r.flushComplete=ns,me=!0,Be.run($n,_r),He[_d](),$n[$i](_r)}return Fv(),dh(Ae,ua,6,nr),si},He[jo]=qs,He.addPlugin=function(Ae,xt,nr,Mt){if(!Ae){Mt&&Mt(!1),jv(Ht);return}var _r=qs(Ae[yo]);if(_r&&!xt){Mt&&Mt(!1),jv("Plugin ["+Ae[yo]+"] is already loaded!");return}var si={reason:16};function $n(wu){te[Jr](Ae),si.added=[Ae],Ta(si),Mt&&Mt(!0)}if(_r){var ua=[_r.plugin],ns={reason:2,isAsync:!!nr};Kc(ua,ns,function(wu){wu?(si.removed=ua,si.reason|=32,$n()):Mt&&Mt(!1)})}else $n()},He.updateCfg=function(Ae,xt){xt===void 0&&(xt=!0);var nr;if(He[tn]()){nr={reason:1,cfg:c.cfg,oldCfg:Cu({},c.cfg),newConfig:Cu({},Ae),merge:xt},Ae=nr.newConfig;var Mt=c.cfg;Ae[Dc]=Mt[Dc],Ae[kc]=Mt[kc]}c._block(function(_r){var si=_r.cfg;Gd(_r,si,Ae,xt),xt||Ot(si,function($n){Fr(Ae,$n)||_r.set(si,$n,iu)}),_r[Xa](si,Ln)},!0),c[vs](),nr&&ph(nr)},He.evtNamespace=function(){return Ee},He.flush=dh,He.getTraceCtx=function(Ae){return mt||(mt=th()),mt},He.setTraceCtx=function(Ae){mt=Ae||null},He.addUnloadHook=yu,Mi(He,"addUnloadCb",function(){return Be},"add"),He.onCfgChange=function(Ae){var xt;return d?xt=Vu(c.cfg,Ae,He[bn]):xt=rh(pn,Ae),Rt(xt)},He.getWParam=function(){return Di()||c.cfg.enableWParam?0:-1};function Ys(){var Ae={};Bn=[];var xt=function(nr){nr&&jt(nr,function(Mt){if(Mt[yo]&&Mt[$o]&&!Ae[Mt.identifier]){var _r=Mt[yo]+"="+Mt[$o];Bn[Jr](_r),Ae[Mt.identifier]=Mt}})};xt(he),de&&jt(de,function(nr){xt(nr)}),xt(te)}function Ie(){d=!1,c=Ko({},Ln,He[bn]),c.cfg[wc]=1,Gr(He,"config",{g:function(){return c.cfg},s:function(xt){He.updateCfg(xt,!1)}}),Gr(He,"pluginVersionStringArr",{g:function(){return Bn||Ys(),Bn}}),Gr(He,"pluginVersionString",{g:function(){return rr||(Bn||Ys(),rr=Bn.join(";")),rr||rn}}),Gr(He,"logger",{g:function(){return g||(g=new qh(c.cfg),c[bn]=g),g},s:function(xt){c[bn]=xt,g!==xt&&(Ml(g,!1),g=xt)}}),He[bn]=new qh(c.cfg),hn=[];var Ae=He.config[Dc]||[];Ae.splice(0,Ae[dr]),sl(Ae,hn),le=new ht,E=[],Ml(C,!1),C=null,A=null,U=null,Ml($,!1),$=null,W=null,te=[],de=null,he=null,me=!1,Fe=null,Ee=Yu("AIBaseCore",!0),Be=X(),mt=null,kr=null,qe=oe(),pn=[],rr=null,Bn=null,zn=!1,at=null,zt=!1,Gt=0,fn=null,oa=null,xi=!1}function Co(){var Ae=_(ip(),c.cfg,He);return Ae[Bo](Wn),Ae}function Ta(Ae){var xt=Vd(He[bn],Jp,te);W=null,rr=null,Bn=null,he=(de||[])[0]||[],he=pu(sl(he,xt[kc]));var nr=sl(pu(xt[Ai]),he);hn=Qt(nr);var Mt=He.config[Dc]||[];Mt.splice(0,Mt[dr]),sl(Mt,hn);var _r=Co();he&&he[dr]>0&&Hl(_r[Yo](he),nr),Hl(_r,nr),Ae&&ph(Ae)}function qs(Ae){var xt=null,nr=null,Mt=[];return jt(hn,function(_r){if(_r[yo]===Ae&&_r!==le)return nr=_r,-1;_r.getChannel&&Mt[Jr](_r)}),!nr&&Mt[dr]>0&&jt(Mt,function(_r){if(nr=_r.getChannel(Ae),!nr)return-1}),nr&&(xt={plugin:nr,setEnabled:function(_r){En(nr)[Td]=!_r},isEnabled:function(){var _r=En(nr);return!_r[ii]&&!_r[Td]},remove:function(_r,si){var $n;_r===void 0&&(_r=!0);var ua=[nr],ns=($n={reason:1},$n[eu]=_r,$n);Kc(ua,ns,function(wu){wu&&Ta({reason:32,removed:ua}),si&&si(wu)})}}),xt}function ip(){if(!W){var Ae=(hn||[]).slice();Aa(Ae,le)===-1&&Ae[Jr](le),W=j(pu(Ae),c.cfg,He)}return W}function Kc(Ae,xt,nr){if(Ae&&Ae[dr]>0){var Mt=j(Ae,c.cfg,He),_r=S(Mt,He);_r[Bo](function(){var si=!1,$n=[];jt(te,function(ns,wu){tm(ns,Ae)?si=!0:$n[Jr](ns)}),te=$n,rr=null,Bn=null;var ua=[];de&&(jt(de,function(ns,wu){var hh=[];jt(ns,function(mh){tm(mh,Ae)?si=!0:hh[Jr](mh)}),ua[Jr](hh)}),de=ua),nr&&nr(si),Wn()}),_r[$i](xt)}else nr(!1)}function Fv(){if(g&&g.queue){var Ae=g.queue.slice(0);g.queue[dr]=0,jt(Ae,function(xt){var nr,Mt=(nr={},nr[Zn]=Fe||"InternalMessageId: "+xt[yd],nr[wo]=kr,nr[gs]=Tl(new Date),nr.baseType=jc.dataType,nr.baseData={message:xt[bc]},nr);He.track(Mt)})}}function dh(Ae,xt,nr,Mt){var _r=1,si=!1,$n=null;Mt=Mt||5e3;function ua(){_r--,si&&_r===0&&($n&&$n[Lo](),$n=null,xt&&xt(si),xt=null)}if(he&&he[dr]>0){var ns=Co()[Yo](he);ns.iterate(function(wu){if(wu.flush){_r++;var hh=!1;wu.flush(Ae,function(){hh=!0,ua()},nr)||hh||(Ae&&$n==null?$n=Du(function(){$n=null,ua()},Mt):ua())}})}return si=!0,ua(),!0}function Uv(){var Ae;yu(c[Pu](function(xt){var nr=xt.cfg.enablePerfMgr;if(nr){var Mt=xt.cfg[Mp];(Ae!==Mt||!Ae)&&(Mt||(Mt=oo),Fp(xt.cfg,Mp,Mt),Ae=Mt,U=null),!A&&!U&&lt(Mt)&&(U=Mt(He,He[gd]()))}else U=null,Ae=null}))}function ph(Ae){var xt=k(ip(),He);xt[Bo](Wn),(!He._updateHook||He._updateHook(xt,Ae)!==!0)&&xt[$i](Ae)}function jv(Ae){var xt=He[bn];xt?(bt(xt,2,73,Ae),Wn()):br(Ae)}function sa(Ae){var xt=He[gd]();xt&&xt[Sr]([Ae],2)}function yu(Ae){qe.add(Ae)}})}return s.__ieDyn=1,s}();function nn(s,c){try{if(s&&s!==""){var d=Wo().parse(s);if(d&&d[va]&&d[va]>=d.itemsAccepted&&d.itemsReceived-d.itemsAccepted===d.errors[dr])return d}}catch(g){bt(c,1,43,"Cannot parse the response. "+(g[Zn]||ar(g)),{response:s})}return null}var gn="",Tn="NoResponseBody",bi="&"+Tn+"=true",Ku="POST",Us=function(){function s(){var c=0,d,g,E,C,A,U,$,W,te,de,he,me,le,Fe;ea(s,this,function(Ee,Be){var qe=!0;xi(),Ee[Xs]=function(at,zt){E=zt,g&&bt(E,1,28,"Sender is already initialized"),Ee.SetConfig(at),g=!0},Ee._getDbgPlgTargets=function(){return[g,C,U,d]},Ee.SetConfig=function(at){try{if(A=at.senderOnCompleteCallBack||{},U=!!at.disableCredentials,$=at.fetchCredentials,C=!!at.isOneDs,d=!!at.enableSendPromise,te=!!at.disableXhr,de=!!at.disableBeacon,he=!!at.disableBeaconSync,Fe=at.timeWrapper,le=!!at.addNoResponse,me=!!at.disableFetchKeepAlive,W={sendPOST:Gt},C||(qe=!1),U){var zt=kd();zt&&zt.protocol&&zt.protocol[Au]()==="file:"&&(qe=!1)}return!0}catch{}return!1},Ee.getSyncFetchPayload=function(){return c},Ee.getSenderInst=function(at,zt){return at&&at[dr]?pn(at,zt):null},Ee.getFallbackInst=function(){return W},Ee[_s]=function(at,zt){xi()};function et(at,zt){hn(zt,200,{},at)}function mt(at,zt){bt(E,2,26,"Failed to send telemetry.",{message:at}),hn(zt,400,{})}function kr(at){mt("No endpoint url is provided for the batch",at)}function pn(at,zt){for(var zn,He=0,sr=null,Ii=0;sr==null&&Ii<at[dr];)He=at[Ii],!te&&He===1?ra()?sr=oa:cu()&&(sr=Gt):He===2&&Rd(zt)&&(!zt||!me)?sr=fn:He===3&&ks()&&(zt?!he:!de)&&(sr=rr),Ii++;return sr?(zn={_transport:He,_isSync:zt},zn[bs]=sr,zn):null}function hn(at,zt,zn,He){try{at&&at(zt,zn,He)}catch{}}function Bn(at,zt){var zn=ls(),He=at[ws];if(!He)return kr(zt),!0;He=at[ws]+(le?bi:gn);var sr=at[Ua],Ii=C?sr:new Blob([sr],{type:"text/plain;charset=UTF-8"}),Wn=zn.sendBeacon(He,Ii);return Wn}function rr(at,zt,zn){var He=at[Ua];try{if(He)if(Bn(at,zt))et(gn,zt);else{var sr=A&&A.beaconOnRetry;sr&&lt(sr)?sr(at,zt,Bn):(W&&W[bs](at,zt,!0),bt(E,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Ii){C&&zu(E,"Failed to send telemetry using sendBeacon API. Ex:"+ar(Ii)),hn(zt,C?0:400,{},gn)}}function Gt(at,zt,zn){var He,sr,Ii,Wn=at[kp]||{};!zn&&d&&(He=bl(function(Ta,qs){sr=Ta,Ii=qs})),C&&zn&&at.disableXhrSync&&(zn=!1);var Ys=at[ws];if(!Ys){kr(zt),sr&&sr(!1);return}var Ie=Il(Ku,Ys,qe,!0,zn,at[yf]);C||Ie[bd]("Content-type","application/json"),jt(Cn(Wn),function(Ta){Ie[bd](Ta,Wn[Ta])}),Ie.onreadystatechange=function(){C||(Co(Ie),Ie.readyState===4&&sr&&sr(!0))},Ie.onload=function(){C&&Co(Ie)};function Co(Ta){var qs=A&&A.xhrOnComplete,ip=qs&&lt(qs);if(ip)qs(Ta,zt,at);else{var Kc=Ts(Ta);hn(zt,Ta[ro],jp(Ta,C),Kc)}}return Ie.onerror=function(Ta){hn(zt,C?Ie[ro]:400,jp(Ie,C),C?gn:no(Ie)),Ii&&Ii(Ta)},Ie.ontimeout=function(){hn(zt,C?Ie[ro]:500,jp(Ie,C),C?gn:no(Ie)),sr&&sr(!1)},Ie.send(at[Ua]),He}function fn(at,zt,zn){var He,sr=at[ws],Ii=at[Ua],Wn=C?Ii:new Blob([Ii],{type:"application/json"}),Ys,Ie,Co,Ta=new Headers,qs=Ii[dr],ip=!1,Kc=!1,Fv=at[kp]||{},dh=(He={method:Ku,body:Wn},He[$m]=!0,He);at.headers&&Cn(at.headers)[dr]>0&&(jt(Cn(Fv),function(sa){Ta.append(sa,Fv[sa])}),dh[kp]=Ta),$?dh.credentials=$:qe&&C&&(dh.credentials="include"),zn&&(dh.keepalive=!0,c+=qs,C?at._sendReason===2&&(ip=!0,le&&(sr+=bi)):ip=!0);var Uv=new Request(sr,dh);try{Uv[$m]=!0}catch{}if(!zn&&d&&(Ys=bl(function(sa,yu){Ie=sa,Co=yu})),!sr){kr(zt),Ie&&Ie(!1);return}function ph(sa){hn(zt,C?0:400,{},C?gn:sa)}function jv(sa,yu,Ae){var xt=sa[ro],nr=A.fetchOnComplete;nr&&lt(nr)?nr(sa,zt,Ae||gn,yu):hn(zt,xt,{},Ae||gn)}try{Ss(fetch(C?sr:Uv,C?dh:null),function(sa){if(zn&&(c-=qs,qs=0),!Kc)if(Kc=!0,sa.rejected)ph(sa.reason&&sa.reason[bc]),Co&&Co(sa.reason);else{var yu=sa[Uo];try{!C&&!yu.ok?(ph(yu.statusText),Ie&&Ie(!1)):C&&!yu.body?(jv(yu,null,gn),Ie&&Ie(!0)):Ss(yu.text(),function(Ae){jv(yu,at,Ae[Uo]),Ie&&Ie(!0)})}catch(Ae){ph(ar(Ae)),Co&&Co(Ae)}}})}catch(sa){Kc||(ph(ar(sa)),Co&&Co(sa))}return ip&&!Kc&&(Kc=!0,hn(zt,200,{}),Ie&&Ie(!0)),C&&!Kc&&at[yf]>0&&Fe&&Fe.set(function(){Kc||(Kc=!0,hn(zt,500,{}),Ie&&Ie(!0))},at[yf]),Ys}function oa(at,zt,zn){var He=cs(),sr=new XDomainRequest,Ii=at[Ua];sr.onload=function(){var Ta=Ts(sr),qs=A&&A.xdrOnComplete;qs&&lt(qs)?qs(sr,zt,at):hn(zt,200,{},Ta)},sr.onerror=function(){hn(zt,400,{},C?gn:xs(sr))},sr.ontimeout=function(){hn(zt,500,{})},sr.onprogress=function(){};var Wn=He&&He.location&&He.location[Lu]||"",Ys=at[ws];if(!Ys){kr(zt);return}if(!C&&Ys.lastIndexOf(Wn,0)!==0){var Ie="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";bt(E,2,40,". "+Ie),mt(Ie,zt);return}var Co=C?Ys:Ys[to](/^(https?:)/,"");sr.open(Ku,Co),at[yf]&&(sr[yf]=at[yf]),sr.send(Ii),C&&zn?Fe&&Fe.set(function(){sr.send(Ii)},0):sr.send(Ii)}function xi(){c=0,g=!1,d=!1,E=null,C=null,A=null,U=null,$=null,W=null,te=!1,de=!1,he=!1,me=!1,le=!1,Fe=null}})}return s.__ieDyn=1,s}(),Zu="on",Vl="attachEvent",Jm="addEventListener",nh="detachEvent",Bf="removeEventListener",Hc="events";Yu("aiEvtPageHide"),Yu("aiEvtPageShow");var ry=/\.[\.]+/g,mg=/[\.]+$/,s_=1,Cv=Gp("events"),ny=/^([^.]*)(?:\.(.+)|)/;function $f(s){return s&&s[to]?s[to](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,rn):s}function rm(s,c){var d;if(c){var g=rn;ut(c)?(g=rn,jt(c,function(C){C=$f(C),C&&(C[0]!=="."&&(C="."+C),g+=C)})):g=$f(c),g&&(g[0]!=="."&&(g="."+g),s=(s||rn)+g)}var E=ny.exec(s||rn)||[];return d={},d[Sn]=E[1],d.ns=(E[2]||rn).replace(ry,".").replace(mg,rn)[Fu](".").sort().join("."),d}function Km(s,c,d){d===void 0&&(d=!0);var g=Cv.get(s,Hc,{},d),E=g[c];return E||(E=g[c]=[]),E}function Yf(s,c,d,g){s&&c&&c[Sn]&&(s[Bf]?s[Bf](c[Sn],d,g):s[nh]&&s[nh](Zu+c[Sn],d))}function nm(s,c,d,g){var E=!1;return s&&c&&c[Sn]&&d&&(s[Jm]?(s[Jm](c[Sn],d,g),E=!0):s[Vl]&&(s[Vl](Zu+c[Sn],d),E=!0)),E}function vg(s,c,d,g){for(var E=c[dr];E--;){var C=c[E];C&&(!d.ns||d.ns===C.evtName.ns)&&(!g||g(C))&&(Yf(s,C.evtName,C[yi],C.capture),c[yt](E,1))}}function u_(s,c,d){if(c[Sn])vg(s,Km(s,c[Sn]),c,d);else{var g=Cv.get(s,Hc,{});Ot(g,function(E,C){vg(s,C,c,d)}),Cn(g)[dr]===0&&Cv.kill(s,Hc)}}function Wd(s,c){var d;return c?(ut(c)?d=[s].concat(c):d=[s,c],d=rm("xx",d).ns[Fu](".")):d=s,d}function c_(s,c,d,g,E){var C;E===void 0&&(E=!1);var A=!1;if(s)try{var U=rm(c,g);if(A=nm(s,U,d,E),A&&Cv.accept(s)){var $=(C={guid:s_++,evtName:U},C[yi]=d,C.capture=E,C);Km(s,U.type)[Jr]($)}}catch{}return A}function iy(s,c,d,g,E){if(E===void 0&&(E=!1),s)try{var C=rm(c,g),A=!1;u_(s,C,function(U){return C.ns&&!d||U[yi]===d?(A=!0,!0):!1}),A||Yf(s,C,d,E)}catch{}}var gg="sampleRate",Zm="ProcessLegacy",_g="http.method",kv="https://dc.services.visualstudio.com",im="/v2/track",Jd="not_specified",yg=Np({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),Xm="split",Yr="length",mu="toLowerCase",Kd="ingestionendpoint",am="toString",om="push",Qm="removeItem",qf="name",ih="message",l_="count",ah="stringify",Gl="pathname",zl="match",Wl="exceptions",Vc="parsedStack",Gc="properties",Xu="measurements",Hf="sizeInBytes",vu="typeName",Vf="severityLevel",Zd="problemGroup",wg="isManual",Dv="hasFullStack",Gf="assembly",zf="fileName",Xd="line",oh="method",Rv="level",sm="aiDataContract",ev="duration",bg="receivedResponse";function Sg(s,c,d){var g=c[Yr],E=Eg(s,c);if(E[Yr]!==g){for(var C=0,A=E;d[A]!==void 0;)C++,A=ni(E,0,147)+N(C);E=A}return E}function Eg(s,c){var d;return c&&(c=Dn(Ui(c)),c[Yr]>150&&(d=ni(c,0,150),bt(s,2,57,"name is too long.  It has been truncated to 150 characters.",{name:c},!0))),d||c}function Xn(s,c,d){d===void 0&&(d=1024);var g;return c&&(d=d||1024,c=Dn(Ui(c)),c[Yr]>d&&(g=ni(c,0,d),bt(s,2,61,"string value is too long. It has been truncated to "+d+" characters.",{value:c},!0))),g||c}function Qd(s,c){return w(s,c,2048,66)}function ai(s,c){var d;return c&&c[Yr]>32768&&(d=ni(c,0,32768),bt(s,2,56,"message is too long, it has been truncated to 32768 characters.",{message:c},!0)),d||c}function ay(s,c){var d;if(c){var g=""+c;g[Yr]>32768&&(d=ni(g,0,32768),bt(s,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:c},!0))}return d||c}function sh(s,c){if(c){var d={};Ot(c,function(g,E){if(ti(E)&&zo())try{E=Wo()[ah](E)}catch(C){bt(s,2,49,"custom property is not valid",{exception:C},!0)}E=Xn(s,E,8192),g=Sg(s,g,d),d[g]=E}),c=d}return c}function ep(s,c){if(c){var d={};Ot(c,function(g,E){g=Sg(s,g,d),d[g]=E}),c=d}return c}function h(s,c){return c&&w(s,c,128,69)[am]()}function w(s,c,d,g){var E;return c&&(c=Dn(Ui(c)),c[Yr]>d&&(E=ni(c,0,d),bt(s,2,g,"input is too long, it has been truncated to "+d+" characters.",{data:c},!0))),E||c}function N(s){var c="00"+s;return al(c,c[Yr]-3)}var D=od()||{},M=0,H=[null,null,null,null,null];function z(s){var c=M,d=H,g=d[c];return D.createElement?d[c]||(g=d[c]=D.createElement("a")):g={host:ne(s,!0)},g.href=s,c++,c>=d[Yr]&&(c=0),M=c,g}function ne(s,c){var d=ce(s,c)||"";if(d){var g=d[zl](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(g!=null&&g[Yr]>3&&mn(g[2])&&g[2][Yr]>0)return g[2]+(g[3]||"")}return d}function ce(s,c){var d=null;if(s){var g=s[zl](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(g!=null&&g[Yr]>2&&mn(g[2])&&g[2][Yr]>0&&(d=g[2]||"",c&&g[Yr]>2)){var E=(g[1]||"")[mu](),C=g[3]||"";(E==="http"&&C===":80"||E==="https"&&C===":443")&&(C=""),d+=C}}return d}var fe=[kv+im,"https://breeze.aimon.applicationinsights.io"+im,"https://dc-int.services.visualstudio.com"+im];function Pe(s){return Aa(fe,s[mu]())!==-1}function Xe(s,c,d,g){var E,C=g,A=g;if(c&&c[Yr]>0){var U=z(c);if(E=U.host,!C)if(U[Gl]!=null){var $=U.pathname[Yr]===0?"/":U[Gl];$.charAt(0)!=="/"&&($="/"+$),A=U[Gl],C=Xn(s,d?d+" "+$:$)}else C=Xn(s,c)}else E=g,C=g;return{target:E,name:C,data:A}}var Qe=gc({LocalStorage:0,SessionStorage:1}),Re=void 0,Se="";function Ve(s){try{if(Le(Ra()))return null;var c=new Date()[am](),d=Ar(s===Qe.LocalStorage?"localStorage":"sessionStorage"),g=Se+c;d.setItem(g,c);var E=d.getItem(g)!==c;if(d[Qm](g),!E)return d}catch{}return null}function Ce(){return Me()?Ve(Qe.SessionStorage):null}function nt(s){Se=s||""}function Me(s){return(s||Re===void 0)&&(Re=!!Ve(Qe.SessionStorage)),Re}function Oe(s,c){var d=Ce();if(d!==null)try{return d.getItem(c)}catch(g){Re=!1,bt(s,2,2,"Browser failed read of session storage. "+Pi(g),{exception:ar(g)})}return null}function ze(s,c,d){var g=Ce();if(g!==null)try{return g.setItem(c,d),!0}catch(E){Re=!1,bt(s,2,4,"Browser failed write to session storage. "+Pi(E),{exception:ar(E)})}return!1}function Kt(s,c){var d=Ce();if(d!==null)try{return d[Qm](c),!0}catch(g){Re=!1,bt(s,2,6,"Browser failed removal of session storage item. "+Pi(g),{exception:ar(g)})}return!1}var tr=";",gr="=";function Lr(s){if(!s)return{};var c=s[Xm](tr),d=xm(c,function(E,C){var A=C[Xm](gr);if(A[Yr]===2){var U=A[0][mu](),$=A[1];E[U]=$}return E},{});if(Cn(d)[Yr]>0){if(d.endpointsuffix){var g=d.location?d.location+".":"";d[Kd]=d[Kd]||"https://"+g+"dc."+d.endpointsuffix}d[Kd]=d[Kd]||kv,Wa(d[Kd],"/")&&(d[Kd]=d[Kd].slice(0,-1))}return d}var dn=function(){function s(c,d,g){var E=this,C=this;C.ver=1,C.sampleRate=100,C.tags={},C[qf]=Xn(c,g)||Jd,C.data=d,C.time=Tl(new Date),C[sm]={time:1,iKey:1,name:1,sampleRate:function(){return E.sampleRate===100?4:1},tags:1,data:1}}return s}(),sn=function(){function s(c,d,g,E){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var C=this;C.ver=2,C[qf]=Xn(c,d)||Jd,C[Gc]=sh(c,g),C[Xu]=ep(c,E)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.Event",s.dataType="EventData",s}(),Qn=58,Zr=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Vi=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,st=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,St=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,Dr=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,Er=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,At=/([^\(\s\n]+):([0-9]+)$/,qr="<no_method>",kt="error",xn="stack",Et="stackDetails",Fn="errorSrc",Un="message",wa="description",Qu=[{re:Vi,len:5,m:1,fn:2,ln:3,col:4},{chk:uh,pre:js,re:st,len:4,m:1,fn:2,ln:3},{re:St,len:3,m:1,fn:2,hdl:iv},{re:Dr,len:2,fn:1,hdl:iv}];function js(s){return s.replace(/(\(anonymous\))/,"<anonymous>")}function uh(s){return ku(s,"[native")<0}function gu(s,c){var d=s;return d&&!mn(d)&&(JSON&&JSON[ah]?(d=JSON[ah](s),c&&(!d||d==="{}")&&(lt(s[am])?d=s[am]():d=""+s)):d=""+s+" - (Missing JSON.stringify)"),d||""}function Qo(s,c){var d=s;return s&&(d&&!mn(d)&&(d=s[Un]||s[wa]||d),d&&!mn(d)&&(d=gu(d,!0)),s.filename&&(d=d+" @"+(s.filename||"")+":"+(s.lineno||"?")+":"+(s.colno||"?"))),c&&c!=="String"&&c!=="Object"&&c!=="Error"&&ku(d||"",c)===-1&&(d=c+": "+d),d||""}function zc(s){try{if(ti(s))return"hasFullStack"in s&&"typeName"in s}catch{}return!1}function Si(s){try{if(ti(s))return"ver"in s&&"exceptions"in s&&"properties"in s}catch{}return!1}function On(s){return s&&s.src&&mn(s.src)&&s.obj&&ut(s.obj)}function oi(s){var c=s||"";mn(c)||(mn(c[xn])?c=c[xn]:c=""+c);var d=c[Xm](`
`);return{src:c,obj:d}}function ba(s){for(var c=[],d=s[Xm](`
`),g=0;g<d[Yr];g++){var E=d[g];d[g+1]&&(E+="@"+d[g+1],g++),c[om](E)}return{src:s,obj:c}}function Wc(s){var c=null;if(s)try{if(s[xn])c=oi(s[xn]);else if(s[kt]&&s[kt][xn])c=oi(s[kt][xn]);else if(s.exception&&s.exception[xn])c=oi(s.exception[xn]);else if(On(s))c=s;else if(On(s[Et]))c=s[Et];else if(cs()&&cs().opera&&s[Un])c=ba(s[ih]);else if(s.reason&&s.reason[xn])c=oi(s.reason[xn]);else if(mn(s))c=oi(s);else{var d=s[Un]||s[wa]||"";mn(s[Fn])&&(d&&(d+=`
`),d+=" from "+s[Fn]),d&&(c=oi(d))}}catch(g){c=oi(g)}return c||{src:"",obj:null}}function tp(s){var c="";return s&&(s.obj?c=s.obj.join(`
`):c=s.src||""),c}function Bs(s){var c,d=s.obj;if(d&&d[Yr]>0){c=[];var g=0,E=!1,C=0;jt(d,function(Fe){if(E||av(Fe)){var Ee=Ui(Fe);E=!0;var Be=ov(Ee,g);Be&&(C+=Be[Hf],c[om](Be),g++)}});var A=32*1024;if(C>A)for(var U=0,$=c[Yr]-1,W=0,te=U,de=$;U<$;){var he=c[U][Hf],me=c[$][Hf];if(W+=he+me,W>A){var le=de-te+1;c.splice(te,le);break}te=U,de=$,U++,$--}}return c}function Wf(s){var c="";if(s&&(c=s.typeName||s[qf]||"",!c))try{var d=/function (.{1,200})\(/,g=d.exec(s.constructor[am]());c=g&&g[Yr]>1?g[1]:""}catch{}return c}function Jf(s){if(s)try{if(!mn(s)){var c=Wf(s),d=gu(s,!1);return(!d||d==="{}")&&(s[kt]&&(s=s[kt],c=Wf(s)),d=gu(s,!0)),ku(d,c)!==0&&c!=="String"?c+":"+d:d}}catch{}return""+(s||"")}var rp=function(){function s(c,d,g,E,C,A){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var U=this;U.ver=2,Si(d)?(U[Wl]=d[Wl]||[],U[Gc]=d[Gc],U[Xu]=d[Xu],d[Vf]&&(U[Vf]=d[Vf]),d.id&&(U.id=d.id,d[Gc].id=d.id),d[Zd]&&(U[Zd]=d[Zd]),Le(d[wg])||(U[wg]=d[wg])):(g||(g={}),A&&(g.id=A),U[Wl]=[rv(c,d,g)],U[Gc]=sh(c,g),U[Xu]=ep(c,E),C&&(U[Vf]=C),A&&(U.id=A))}return s.CreateAutoException=function(c,d,g,E,C,A,U,$){var W,te=Wf(C||A||c);return W={},W[ih]=Qo(c,te),W.url=d,W.lineNumber=g,W.columnNumber=E,W.error=Jf(C||A||c),W.evt=Jf(A||c),W[vu]=te,W.stackDetails=Wc(U||C||A),W.errorSrc=$,W},s.CreateFromInterface=function(c,d,g,E){var C=d[Wl]&&lc(d[Wl],function(U){return Av(c,U)}),A=new s(c,_o(_o({},d),{exceptions:C}),g,E);return A},s.prototype.toInterface=function(){var c,d=this,g=d.exceptions,E=d.properties,C=d.measurements,A=d.severityLevel,U=d.problemGroup,$=d.id,W=d.isManual,te=g instanceof Array&&lc(g,function(de){return de.toInterface()})||void 0;return c={ver:"4.0"},c[Wl]=te,c.severityLevel=A,c.properties=E,c.measurements=C,c.problemGroup=U,c.id=$,c.isManual=W,c},s.CreateSimpleException=function(c,d,g,E,C,A){var U;return{exceptions:[(U={},U[Dv]=!0,U.message=c,U.stack=C,U.typeName=d,U)]}},s.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",s.dataType="ExceptionData",s.formatError=Jf,s}(),Ov=Qt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function tv(){var s,c=this,d=ut(c[Vc])&&lc(c[Vc],function(E){return v(E)}),g=(s={id:c.id,outerId:c.outerId,typeName:c[vu],message:c[ih],hasFullStack:c[Dv],stack:c[xn]},s[Vc]=d||void 0,s);return g}function rv(s,c,d){var g,E,C,A,U,$,W,te;if(zc(c))A=c[vu],U=c[ih],W=c[xn],te=c[Vc]||[],$=c[Dv];else{var de=c,he=de&&de.evt;Xt(de)||(de=de[kt]||he||de),A=Xn(s,Wf(de))||Jd,U=ai(s,Qo(c||de,A))||Jd;var me=c[Et]||Wc(c);te=Bs(me),ut(te)&&lc(te,function(le){le[Gf]=Xn(s,le[Gf]),le[zf]=Xn(s,le[zf])}),W=ay(s,tp(me)),$=ut(te)&&te[Yr]>0,d&&(d[vu]=d[vu]||A)}return g={},g[sm]=Ov,g.id=E,g.outerId=C,g[vu]=A,g[ih]=U,g[Dv]=$,g.stack=W,g[Vc]=te,g.toInterface=tv,g}function Av(s,c){var d=ut(c[Vc])&&lc(c[Vc],function(E){return o(E)})||c[Vc],g=rv(s,_o(_o({},c),{parsedStack:d}));return g}function nv(s,c){var d=c[zl](Er);if(d&&d[Yr]>=4)s[zf]=d[1],s[Xd]=parseInt(d[2]);else{var g=c[zl](At);g&&g[Yr]>=3?(s[zf]=g[1],s[Xd]=parseInt(g[2])):s[zf]=c}}function iv(s,c,d){var g=s[zf];c.fn&&d&&d[Yr]>c.fn&&(c.ln&&d[Yr]>c.ln?(g=Dn(d[c.fn]||""),s[Xd]=parseInt(Dn(d[c.ln]||""))||0):g=Dn(d[c.fn]||"")),g&&nv(s,g)}function av(s){var c=!1;if(s&&mn(s)){var d=Dn(s);d&&(c=Zr.test(d))}return c}var _u=Qt({level:1,method:1,assembly:0,fileName:0,line:0});function ov(s,c){var d,g;if(s&&mn(s)&&Dn(s)){g=(d={},d[sm]=_u,d[Rv]=c,d[Gf]=Dn(s),d[oh]=qr,d.fileName="",d.line=0,d[Hf]=0,d);for(var E=0;E<Qu[Yr];){var C=Qu[E];if(C.chk&&!C.chk(s))break;C.pre&&(s=C.pre(s));var A=s[zl](C.re);if(A&&A[Yr]>=C.len){C.m&&(g[oh]=Dn(A[C.m]||qr)),C.hdl?C.hdl(g,C,A):C.fn&&(C.ln?(g[zf]=Dn(A[C.fn]||""),g[Xd]=parseInt(Dn(A[C.ln]||""))||0):nv(g,A[C.fn]||""));break}E++}}return l(g)}function o(s){var c,d=(c={},c[sm]=_u,c.level=s[Rv],c.method=s[oh],c.assembly=s[Gf],c.fileName=s[zf],c.line=s[Xd],c[Hf]=0,c);return l(d)}function l(s){var c=Qn;return s&&(c+=s.method[Yr],c+=s.assembly[Yr],c+=s.fileName[Yr],c+=s.level.toString()[Yr],c+=s.line.toString()[Yr],s[Hf]=c),s}function v(s){return{level:s[Rv],method:s[oh],assembly:s[Gf],fileName:s[zf],line:s[Xd]}}var b=function(){function s(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s}(),I=function(){function s(c,d,g,E,C,A,U,$,W){this.aiDataContract={ver:1,metrics:1,properties:0};var te=this;te.ver=2;var de=new b;de[l_]=E>0?E:void 0,de.max=isNaN(A)||A===null?void 0:A,de.min=isNaN(C)||C===null?void 0:C,de[qf]=Xn(c,d)||Jd,de.value=g,de.stdDev=isNaN(U)||U===null?void 0:U,te.metrics=[de],te[Gc]=sh(c,$),te[Xu]=ep(c,W)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",s.dataType="MetricData",s}(),R="";function L(s){(isNaN(s)||s<0)&&(s=0),s=Math.round(s);var c=R+s%1e3,d=R+Math.floor(s/1e3)%60,g=R+Math.floor(s/(1e3*60))%60,E=R+Math.floor(s/(1e3*60*60))%24,C=Math.floor(s/(1e3*60*60*24));return c=c[Yr]===1?"00"+c:c[Yr]===2?"0"+c:c,d=d[Yr]<2?"0"+d:d,g=g[Yr]<2?"0"+g:g,E=E[Yr]<2?"0"+E:E,(C>0?C+".":R)+E+":"+g+":"+d+"."+c}var O=function(){function s(c,d,g,E,C,A,U){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var $=this;$.ver=2,$.id=h(c,U),$.url=Qd(c,g),$[qf]=Xn(c,d)||Jd,isNaN(E)||($[ev]=L(E)),$[Gc]=sh(c,C),$[Xu]=ep(c,A)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",s.dataType="PageviewData",s}(),F=function(){function s(c,d,g,E,C,A,U,$,W,te,de,he){W===void 0&&(W="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var me=this;me.ver=2,me.id=d,me[ev]=L(C),me.success=A,me.resultCode=U+"",me.type=Xn(c,W);var le=Xe(c,g,$,E);me.data=Qd(c,E)||le.data,me.target=Xn(c,le.target),te&&(me.target="".concat(me.target," | ").concat(te)),me[qf]=Xn(c,le[qf]),me[Gc]=sh(c,de),me[Xu]=ep(c,he)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",s.dataType="RemoteDependencyData",s}(),B=function(){function s(c,d,g,E,C){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var A=this;A.ver=2,d=d||Jd,A[ih]=ai(c,d),A[Gc]=sh(c,E),A[Xu]=ep(c,C),g&&(A[Vf]=g)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.Message",s.dataType="MessageData",s}(),K=function(){function s(c,d,g,E,C,A,U){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var $=this;$.ver=2,$.url=Qd(c,g),$[qf]=Xn(c,d)||Jd,$[Gc]=sh(c,C),$[Xu]=ep(c,A),U&&($.domProcessing=U.domProcessing,$[ev]=U[ev],$.networkConnect=U.networkConnect,$.perfTotal=U.perfTotal,$[bg]=U[bg],$.sentRequest=U.sentRequest)}return s.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",s.dataType="PageviewPerformanceData",s}(),re=function(){function s(c,d){this.aiDataContract={baseType:1,baseData:1},this.baseType=c,this.baseData=d}return s}(),Q=gc({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function ae(s){var c="ai."+s+".";return function(d){return c+d}}var ie=ae("application"),we=ae("device"),xe=ae("location"),Ye=ae("operation"),it=ae("session"),ot=ae("user"),Vt=ae("cloud"),Nr=ae("internal"),Ei=function(s){_f(c,s);function c(){return s.call(this)||this}return c}(Up({applicationVersion:ie("ver"),applicationBuild:ie("build"),applicationTypeId:ie("typeId"),applicationId:ie("applicationId"),applicationLayer:ie("layer"),deviceId:we("id"),deviceIp:we("ip"),deviceLanguage:we("language"),deviceLocale:we("locale"),deviceModel:we("model"),deviceFriendlyName:we("friendlyName"),deviceNetwork:we("network"),deviceNetworkName:we("networkName"),deviceOEMName:we("oemName"),deviceOS:we("os"),deviceOSVersion:we("osVersion"),deviceRoleInstance:we("roleInstance"),deviceRoleName:we("roleName"),deviceScreenResolution:we("screenResolution"),deviceType:we("type"),deviceMachineName:we("machineName"),deviceVMName:we("vmName"),deviceBrowser:we("browser"),deviceBrowserVersion:we("browserVersion"),locationIp:xe("ip"),locationCountry:xe("country"),locationProvince:xe("province"),locationCity:xe("city"),operationId:Ye("id"),operationName:Ye("name"),operationParentId:Ye("parentId"),operationRootId:Ye("rootId"),operationSyntheticSource:Ye("syntheticSource"),operationCorrelationVector:Ye("correlationVector"),sessionId:it("id"),sessionIsFirst:it("isFirst"),sessionIsNew:it("isNew"),userAccountAcquisitionDate:ot("accountAcquisitionDate"),userAccountId:ot("accountId"),userAgent:ot("userAgent"),userId:ot("id"),userStoreRegion:ot("storeRegion"),userAuthUserId:ot("authUserId"),userAnonymousUserAcquisitionDate:ot("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:ot("authUserAcquisitionDate"),cloudName:Vt("name"),cloudRole:Vt("role"),cloudRoleVer:Vt("roleVer"),cloudRoleInstance:Vt("roleInstance"),cloudEnvironment:Vt("environment"),cloudLocation:Vt("location"),cloudDeploymentUnit:Vt("deploymentUnit"),internalNodeName:Nr("nodeName"),internalSdkVersion:Nr("sdkVersion"),internalAgentVersion:Nr("agentVersion"),internalSnippet:Nr("snippet"),internalSdkSrc:Nr("sdkSrc")})),Tr=new Ei;function Gi(s,c){iy(s,null,null,c)}function es(s){var c=od(),d=ls(),g=!1,E=[],C=1;d&&!Le(d.onLine)&&!d.onLine&&(C=2);var A=0,U=he(),$=Wd(Yu("OfflineListener"),s);try{if(te(cs())&&(g=!0),c){var W=c.body||c;W.ononline&&te(W)&&(g=!0)}}catch{g=!1}function te(et){var mt=!1;return et&&(mt=c_(et,"online",Fe,$),mt&&c_(et,"offline",Ee,$)),mt}function de(){return U}function he(){return!(A===2||C===2)}function me(){var et=he();U!==et&&(U=et,jt(E,function(mt){var kr={isOnline:U,rState:C,uState:A};try{mt(kr)}catch{}}))}function le(et){A=et,me()}function Fe(){C=1,me()}function Ee(){C=2,me()}function Be(){var et=cs();if(et&&g){if(Gi(et,$),c){var mt=c.body||c;Ze(mt.ononline)||Gi(mt,$)}g=!1}}function qe(et){return E[om](et),{rm:function(){var mt=E.indexOf(et);if(mt>-1)return E.splice(mt,1)}}}return{isOnline:de,isListening:function(){return g},unload:Be,addListener:qe,setOnlineState:le}}var ts="AppInsightsChannelPlugin",Jc="duration",Sa="tags",Kf="deviceType",We="data",Ft="name",Vn="traceID",Te="length",lr="stringify",Gn="measurements",zi="dataType",so="envelopeType",Br="toString",na="_get",pi="enqueue",ia="count",np="eventsLimitInMem",Ea="push",ch="item",Zf="emitLineDelimitedJson",lh="clear",fh="createNew",um="markAsSent",hi="clearSent",rs="bufferOverride",ke="BUFFER_KEY",ft="SENT_BUFFER_KEY",Yt="concat",Ut="MAX_BUFFER_SIZE",or="triggerSend",Hr="diagLog",jn="initialize",Ti="_sender",ja="endpointUrl",uo="instrumentationKey",Xf="customHeaders",Pv="maxBatchSizeInBytes",Mv="onunloadDisableBeacon",oy="isBeaconApiDisabled",Jy="alwaysUseXhrOverride",f_="disableXhr",Tg="enableSessionStorageBuffer",Jl="_buffer",sy="onunloadDisableFetch",uy="disableSendBeaconSplit",Eb="enableSendPromise",Ky="getSenderInst",lT="unloadTransports",fT="convertUndefined",dT="maxBatchInterval",Zy="serialize",xg="_onError",Tb="_onPartialSuccess",Xy="_onSuccess",xb="itemsReceived",Ib="itemsAccepted",Nb="oriPayload",Cb="baseType",Qy="sampleRate",pT="eventsSendRequest",hT="getSamplingScore",lO="getHashCodeScore",kb="baseType",aa="baseData",$s="properties",mT="true";function co(s,c,d){return Uu(s,c,d,Ni)}function fO(s,c,d){var g=d[Sa]=d[Sa]||{},E=c.ext=c.ext||{},C=c[Sa]=c[Sa]||[],A=E.user;A&&(co(g,Tr.userAuthUserId,A.authId),co(g,Tr.userId,A.id||A.localId));var U=E.app;U&&co(g,Tr.sessionId,U.sesId);var $=E.device;$&&(co(g,Tr.deviceId,$.id||$.localId),co(g,Tr[Kf],$.deviceClass),co(g,Tr.deviceIp,$.ip),co(g,Tr.deviceModel,$.model),co(g,Tr[Kf],$[Kf]));var W=c.ext.web;if(W){co(g,Tr.deviceLanguage,W.browserLang),co(g,Tr.deviceBrowserVersion,W.browserVer),co(g,Tr.deviceBrowser,W.browser);var te=d[We]=d[We]||{},de=te[aa]=te[aa]||{},he=de[$s]=de[$s]||{};co(he,"domain",W.domain),co(he,"isManual",W.isManual?mT:null),co(he,"screenRes",W.screenRes),co(he,"userConsent",W.userConsent?mT:null)}var me=E.os;me&&(co(g,Tr.deviceOS,me[Ft]),co(g,Tr.deviceOSVersion,me.osVer));var le=E.trace;le&&(co(g,Tr.operationParentId,le.parentID),co(g,Tr.operationName,Xn(s,le[Ft])),co(g,Tr.operationId,le[Vn]));for(var Fe={},Ee=C[Te]-1;Ee>=0;Ee--){var Be=C[Ee];Ot(Be,function(et,mt){Fe[et]=mt}),C.splice(Ee,1)}Ot(C,function(et,mt){Fe[et]=mt});var qe=_o(_o({},g),Fe);qe[Tr.internalSdkVersion]||(qe[Tr.internalSdkVersion]=Xn(s,"javascript:".concat(dO.Version),64)),d[Sa]=su(qe)}function Lv(s,c,d){Le(s)||Ot(s,function(g,E){er(E)?d[g]=E:mn(E)?c[g]=E:zo()&&(c[g]=Wo()[lr](E))})}function Ig(s,c){Le(s)||Ot(s,function(d,g){s[d]=g||c})}function Ng(s,c,d,g){var E=new dn(s,g,c);co(E,"sampleRate",d[gg]),(d[aa]||{}).startTime&&(E.time=Tl(d[aa].startTime)),E.iKey=d.iKey;var C=d.iKey.replace(/-/g,"");return E[Ft]=E[Ft].replace("{0}",C),fO(s,d,E),d[Sa]=d[Sa]||[],su(E)}function Cg(s,c){Le(c[aa])&&bt(s,1,46,"telemetryItem.baseData cannot be null.")}var dO={Version:"3.3.5"};function pO(s,c,d){Cg(s,c);var g=c[aa][Gn]||{},E=c[aa][$s]||{};Lv(c[We],E,g),Le(d)||Ig(E,d);var C=c[aa];if(Le(C))return zu(s,"Invalid input for dependency data"),null;var A=C[$s]&&C[$s][_g]?C[$s][_g]:"GET",U=new F(s,C.id,C.target,C[Ft],C[Jc],C.success,C.responseCode,A,C.type,C.correlationContext,E,g),$=new re(F[zi],U);return Ng(s,F[so],c,$)}function vT(s,c,d){Cg(s,c);var g={},E={};c[kb]!==sn[zi]&&(g.baseTypeSource=c[kb]),c[kb]===sn[zi]?(g=c[aa][$s]||{},E=c[aa][Gn]||{}):c[aa]&&Lv(c[aa],g,E),Lv(c[We],g,E),Le(d)||Ig(g,d);var C=c[aa][Ft],A=new sn(s,C,g,E),U=new re(sn[zi],A);return Ng(s,sn[so],c,U)}function hO(s,c,d){Cg(s,c);var g=c[aa][Gn]||{},E=c[aa][$s]||{};Lv(c[We],E,g),Le(d)||Ig(E,d);var C=c[aa],A=rp.CreateFromInterface(s,C,E,g),U=new re(rp[zi],A);return Ng(s,rp[so],c,U)}function mO(s,c,d){Cg(s,c);var g=c[aa],E=g[$s]||{},C=g[Gn]||{};Lv(c[We],E,C),Le(d)||Ig(E,d);var A=new I(s,g[Ft],g.average,g.sampleCount,g.min,g.max,g.stdDev,E,C),U=new re(I[zi],A);return Ng(s,I[so],c,U)}function vO(s,c,d){Cg(s,c);var g,E=c[aa];!Le(E)&&!Le(E[$s])&&!Le(E[$s][Jc])?(g=E[$s][Jc],delete E[$s][Jc]):!Le(c[We])&&!Le(c[We][Jc])&&(g=c[We][Jc],delete c[We][Jc]);var C=c[aa],A;((c.ext||{}).trace||{})[Vn]&&(A=c.ext.trace[Vn]);var U=C.id||A,$=C[Ft],W=C.uri,te=C[$s]||{},de=C[Gn]||{};if(Le(C.refUri)||(te.refUri=C.refUri),Le(C.pageType)||(te.pageType=C.pageType),Le(C.isLoggedIn)||(te.isLoggedIn=C.isLoggedIn[Br]()),!Le(C[$s])){var he=C[$s];Ot(he,function(Fe,Ee){te[Fe]=Ee})}Lv(c[We],te,de),Le(d)||Ig(te,d);var me=new O(s,$,W,g,te,de,U),le=new re(O[zi],me);return Ng(s,O[so],c,le)}function gO(s,c,d){Cg(s,c);var g=c[aa],E=g[Ft],C=g.uri||g.url,A=g[$s]||{},U=g[Gn]||{};Lv(c[We],A,U),Le(d)||Ig(A,d);var $=new K(s,E,C,void 0,A,U,g),W=new re(K[zi],$);return Ng(s,K[so],c,W)}function _O(s,c,d){Cg(s,c);var g=c[aa].message,E=c[aa].severityLevel,C=c[aa][$s]||{},A=c[aa][Gn]||{};Lv(c[We],C,A),Le(d)||Ig(C,d);var U=new B(s,g,E,C,A),$=new re(B[zi],U);return Ng(s,B[so],c,$)}var gT=function(){function s(c,d){var g=[],E=!1,C=d.maxRetryCnt;this[na]=function(){return g},this._set=function(A){return g=A,g},ea(s,this,function(A){A[pi]=function(U){if(A[ia]()>=d[np]){E||(bt(c,2,105,"Maximum in-memory buffer size reached: "+A[ia](),!0),E=!0);return}U.cnt=U.cnt||0,!(!Le(C)&&U.cnt>C)&&g[Ea](U)},A[ia]=function(){return g[Te]},A.size=function(){for(var U=g[Te],$=0;$<g[Te];$++)U+=g[$].item[Te];return d[Zf]||(U+=2),U},A[lh]=function(){g=[],E=!1},A.getItems=function(){return g.slice(0)},A.batchPayloads=function(U){if(U&&U[Te]>0){var $=[];jt(U,function(te){$[Ea](te[ch])});var W=d[Zf]?$.join(`
`):"["+$.join(",")+"]";return W}return null},A[fh]=function(U,$,W){var te=g.slice(0);U=U||c,$=$||{};var de=W?new _T(U,$):new Db(U,$);return jt(te,function(he){de[pi](he)}),de}})}return s.__ieDyn=1,s}(),Db=function(s){_f(c,s);function c(d,g){var E=s.call(this,d,g)||this;return ea(c,E,function(C,A){C[um]=function(U){A[lh]()},C[hi]=function(U){}}),E}return c.__ieDyn=1,c}(gT),yO=["AI_buffer","AI_sentBuffer"],_T=function(s){_f(c,s);function c(g,E){var C=s.call(this,g,E)||this,A=!1,U=E==null?void 0:E.namePrefix,$=E[rs]||{getItem:Oe,setItem:ze},W=$.getItem,te=$.setItem,de=E.maxRetryCnt;return ea(c,C,function(he,me){var le=mt(c[ke]),Fe=mt(c[ft]),Ee=hn(),Be=Fe[Yt](Ee),qe=he._set(le[Yt](Be));qe[Te]>c[Ut]&&(qe[Te]=c[Ut]),pn(c[ft],[]),pn(c[ke],qe),he[pi]=function(rr){if(he[ia]()>=c[Ut]){A||(bt(g,2,67,"Maximum buffer size reached: "+he[ia](),!0),A=!0);return}rr.cnt=rr.cnt||0,!(!Le(de)&&rr.cnt>de)&&(me[pi](rr),pn(c.BUFFER_KEY,he[na]()))},he[lh]=function(){me[lh](),pn(c.BUFFER_KEY,he[na]()),pn(c[ft],[]),A=!1},he[um]=function(rr){pn(c[ke],he._set(et(rr,he[na]())));var Gt=mt(c[ft]);Gt instanceof Array&&rr instanceof Array&&(Gt=Gt[Yt](rr),Gt[Te]>c[Ut]&&(bt(g,1,67,"Sent buffer reached its maximum size: "+Gt[Te],!0),Gt[Te]=c[Ut]),pn(c[ft],Gt))},he[hi]=function(rr){var Gt=mt(c[ft]);Gt=et(rr,Gt),pn(c[ft],Gt)},he[fh]=function(rr,Gt,fn){fn=!!fn;var oa=he[na]().slice(0),xi=mt(c[ft]).slice(0);rr=rr||g,Gt=Gt||{},he[lh]();var at=fn?new c(rr,Gt):new Db(rr,Gt);return jt(oa,function(zt){at[pi](zt)}),fn&&at[um](xi),at};function et(rr,Gt){var fn=[],oa=[];return jt(rr,function(xi){oa[Ea](xi[ch])}),jt(Gt,function(xi){!lt(xi)&&Aa(oa,xi[ch])===-1&&fn[Ea](xi)}),fn}function mt(rr){var Gt=rr;return Gt=U?U+"_"+Gt:Gt,kr(Gt)}function kr(rr){try{var Gt=W(g,rr);if(Gt){var fn=Wo().parse(Gt);if(mn(fn)&&(fn=Wo().parse(fn)),fn&&ut(fn))return fn}}catch(oa){bt(g,1,42," storage key: "+rr+", "+Pi(oa),{exception:ar(oa)})}return[]}function pn(rr,Gt){var fn=rr;try{fn=U?U+"_"+fn:fn;var oa=JSON[lr](Gt);te(g,fn,oa)}catch(xi){te(g,fn,JSON[lr]([])),bt(g,2,41," storage key: "+fn+", "+Pi(xi)+". Buffer cleared",{exception:ar(xi)})}}function hn(){var rr=[];try{return jt(yO,function(Gt){var fn=Bn(Gt);if(rr=rr[Yt](fn),U){var oa=U+"_"+Gt,xi=Bn(oa);rr=rr[Yt](xi)}}),rr}catch(Gt){bt(g,2,41,"Transfer events from previous buffers: "+Pi(Gt)+". previous Buffer items can not be removed",{exception:ar(Gt)})}return[]}function Bn(rr){try{var Gt=kr(rr),fn=[];return jt(Gt,function(oa){var xi={item:oa,cnt:0};fn[Ea](xi)}),Kt(g,rr),fn}catch{}return[]}}),C}var d;return d=c,c.VERSION="_1",c.BUFFER_KEY="AI_buffer"+d.VERSION,c.SENT_BUFFER_KEY="AI_sentBuffer"+d.VERSION,c.MAX_BUFFER_SIZE=2e3,c}(gT),wO=function(){function s(c){ea(s,this,function(d){d[Zy]=function(A){var U=g(A,"root");try{return Wo()[lr](U)}catch($){bt(c,1,48,$&&lt($[Br])?$[Br]():"Error serializing object",null,!0)}};function g(A,U){var $="__aiCircularRefCheck",W={};if(!A)return bt(c,1,48,"cannot serialize object because it is null or undefined",{name:U},!0),W;if(A[$])return bt(c,2,50,"Circular reference detected while serializing object",{name:U},!0),W;if(!A.aiDataContract){if(U==="measurements")W=C(A,"number",U);else if(U==="properties")W=C(A,"string",U);else if(U==="tags")W=C(A,"string",U);else if(ut(A))W=E(A,U);else{bt(c,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:U},!0);try{Wo()[lr](A),W=A}catch(te){bt(c,1,48,te&&lt(te[Br])?te[Br]():"Error serializing object",null,!0)}}return W}return A[$]=!0,Ot(A.aiDataContract,function(te,de){var he=lt(de)?de()&1:de&1,me=lt(de)?de()&4:de&4,le=de&2,Fe=A[te]!==void 0,Ee=ti(A[te])&&A[te]!==null;if(he&&!Fe&&!le)bt(c,1,24,"Missing required field specification. The field is required but not present on source",{field:te,name:U});else if(!me){var Be=void 0;Ee?le?Be=E(A[te],te):Be=g(A[te],te):Be=A[te],Be!==void 0&&(W[te]=Be)}}),delete A[$],W}function E(A,U){var $;if(A)if(!ut(A))bt(c,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:U},!0);else{$=[];for(var W=0;W<A[Te];W++){var te=A[W],de=g(te,U+"["+W+"]");$[Ea](de)}}return $}function C(A,U,$){var W;return A&&(W={},Ot(A,function(te,de){if(U==="string")de===void 0?W[te]="undefined":de===null?W[te]="null":de[Br]?W[te]=de[Br]():W[te]="invalid field: toString() is not defined.";else if(U==="number")if(de===void 0)W[te]="undefined";else if(de===null)W[te]="null";else{var he=parseFloat(de);W[te]=he}else W[te]="invalid field: "+$+" is of unknown type.",bt(c,1,W[te],null,!0)})),W}})}return s.__ieDyn=1,s}(),bO=8,SO=function(){function s(){}return s.prototype.getHashCodeScore=function(c){var d=this.getHashCode(c)/s.INT_MAX_VALUE;return d*100},s.prototype.getHashCode=function(c){if(c==="")return 0;for(;c[Te]<bO;)c=c[Yt](c);for(var d=5381,g=0;g<c[Te];++g)d=(d<<5)+d+c.charCodeAt(g),d=d&d;return Math.abs(d)},s.INT_MAX_VALUE=2147483647,s}(),EO=function(){function s(){var c=this,d=new SO,g=new Ei;c[hT]=function(E){var C=0;return E[Sa]&&E[Sa][g.userId]?C=d.getHashCodeScore(E[Sa][g.userId]):E.ext&&E.ext.user&&E.ext.user.id?C=d[lO](E.ext.user.id):E[Sa]&&E[Sa][g.operationId]?C=d.getHashCodeScore(E[Sa][g.operationId]):E.ext&&E.ext.telemetryTrace&&E.ext.telemetryTrace[Vn]?C=d.getHashCodeScore(E.ext.telemetryTrace[Vn]):C=Math.random()*100,C}}return s}(),TO=function(){function s(c,d){this.INT_MAX_VALUE=2147483647;var g=d||As(null);(c>100||c<0)&&(g.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:c},!0),c=100),this[Qy]=c,this.samplingScoreGenerator=new EO}return s.prototype.isSampledIn=function(c){var d=this[Qy],g=!1;return d==null||d>=100||c.baseType===I[zi]?!0:(g=this.samplingScoreGenerator[hT](c)<d,g)},s}(),Wi,sv,cm=void 0,yT="",xO=65e3;function wT(s){try{return s.responseText}catch{}return null}function IO(s){return s&&s.sendPOST}var bT=os((Wi={endpointUrl:Uc(Ni,kv+im)},Wi[Zf]=xo(),Wi[dT]=15e3,Wi[Pv]=102400,Wi.disableTelemetry=xo(),Wi[Tg]=xo(!0),Wi.isRetryDisabled=xo(),Wi[oy]=xo(!0),Wi[uy]=xo(!0),Wi[f_]=xo(),Wi[sy]=xo(),Wi[Mv]=xo(),Wi[uo]=cm,Wi.namePrefix=cm,Wi.samplingPercentage=Uc(NO,100),Wi[Xf]=cm,Wi[fT]=cm,Wi[np]=1e4,Wi[rs]=!1,Wi.httpXHROverride={isVal:IO,v:cm},Wi[Jy]=xo(),Wi.transports=cm,Wi.retryCodes=cm,Wi.maxRetryCnt={isVal:er,v:10},Wi));function NO(s){return!isNaN(s)&&s>0&&s<=100}var CO=(sv={},sv[sn.dataType]=vT,sv[B.dataType]=_O,sv[O.dataType]=vO,sv[K.dataType]=gO,sv[rp.dataType]=hO,sv[I.dataType]=mO,sv[F.dataType]=pO,sv),ST=function(s){_f(c,s);function c(){var d=s.call(this)||this;d.priority=1001,d.identifier=ts;var g,E,C,A,U,$,W,te=0,de,he,me,le,Fe,Ee,Be,qe,et,mt,kr,pn,hn,Bn,rr,Gt,fn,oa,xi,at,zt,zn,He,sr,Ii,Wn,Ys;return ea(c,d,function(Ie,Co){IT(),Ie.pause=function(){Bv(),C=!0},Ie.resume=function(){C&&(C=!1,E=null,$n(),v_())},Ie.flush=function(se,De,It){if(se===void 0&&(se=!0),!C){Bv();try{return Ie[or](se,null,It||1)}catch(Nt){bt(Ie[Hr](),1,22,"flush failed, telemetry will not be collected: "+Pi(Nt),{exception:ar(Nt)})}}},Ie.onunloadFlush=function(){if(!C)if(Be||at)try{return Ie[or](!0,wu,2)}catch(se){bt(Ie[Hr](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Pi(se),{exception:ar(se)})}else Ie.flush(!1)},Ie.addHeader=function(se,De){W[se]=De},Ie[jn]=function(se,De,It,Nt){Ie.isInitialized()&&bt(Ie[Hr](),1,28,"Sender is already initialized"),Co[jn](se,De,It,Nt);var Rr=Ie.identifier;U=new wO(De.logger),g=0,E=null,Ie[Ti]=null,$=0;var xr=Ie[Hr]();me=Wd(Yu("Sender"),De.evtNamespace&&De.evtNamespace()),he=es(me),Ie._addHook(Vu(se,function(an){var Ji=an.cfg;Ji.storagePrefix&&nt(Ji.storagePrefix);var ap=_(null,Ji,De),Vr=ap.getExtCfg(Rr,bT),NT=Vr[ja];if(le&&NT===le){var Ab=Ji[ja];Ab&&Ab!==NT&&(Vr[ja]=Ab)}fr(Vr[uo])&&(Vr[uo]=Ji[uo]),Gr(Ie,"_senderConfig",{g:function(){return Vr}}),Fe!==Vr[ja]&&(le=Fe=Vr[ja]),De.activeStatus()===Ka.PENDING?Ie.pause():De.activeStatus()===Ka.ACTIVE&&Ie.resume(),mt&&mt!==Vr[Xf]&&jt(mt,function(bu){delete W[bu.header]}),Ee=Vr[Pv],Be=(Vr[Mv]===!1||Vr[oy]===!1)&&ks(),qe=Vr[Mv]===!1&&ks(),et=Vr[oy]===!1&&ks(),at=Vr[Jy],zt=!!Vr[f_],Ys=Vr.retryCodes;var Pb=Vr[rs],g_=!!Vr[Tg]&&(!!Pb||Me()),CT=Vr.namePrefix,OO=g_!==Gt||g_&&oa!==CT||g_&&fn!==Pb;if(Ie[Jl]){if(OO)try{Ie._buffer=Ie._buffer[fh](xr,Vr,g_)}catch(bu){bt(Ie[Hr](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+Pi(bu),{exception:ar(bu)})}$n()}else Ie[Jl]=g_?new _T(xr,Vr):new Db(xr,Vr);oa=CT,Gt=g_,fn=Pb,zn=!Vr[sy]&&Rd(!0),Ii=!!Vr[uy],Ie._sample=new TO(Vr.samplingPercentage,xr),pn=Vr[uo],!fr(pn)&&!xT(pn,Ji)&&bt(xr,1,100,"Invalid Instrumentation key "+pn),mt=Vr[Xf],mn(le)&&!Pe(le)&&mt&&mt[Te]>0?jt(mt,function(bu){d.addHeader(bu.header,bu.value)}):mt=null,xi=Vr[Eb];var kT=qs();Wn?Wn.SetConfig(kT):(Wn=new Us,Wn[jn](kT,xr));var n0=Vr.httpXHROverride,i0=null,fy=null,AO=Nf([3,1,2],Vr.transports);i0=Wn&&Wn[Ky](AO,!1);var Mb=Wn&&Wn.getFallbackInst();He=function(bu,kg){return Mt(Mb,bu,kg)},sr=function(bu,kg){return Mt(Mb,bu,kg,!1)},i0=at?n0:i0||n0||Mb,Ie[Ti]=function(bu,kg){return Mt(i0,bu,kg)},zn&&(de=m_);var Lb=Nf([3,1],Vr[lT]);zn||(Lb=Lb.filter(function(bu){return bu!==2})),fy=Wn&&Wn[Ky](Lb,!0),fy=at?n0:fy||n0,(at||Vr[lT]||!de)&&fy&&(de=function(bu,kg){return Mt(fy,bu,kg)}),de||(de=He),kr=Vr.disableTelemetry,hn=Vr[fT]||cm,Bn=Vr.isRetryDisabled,rr=Vr[dT]}))},Ie.processTelemetry=function(se,De){var It;De=Ie._getTelCtx(De);var Nt=De[Hr]();try{var Rr=ph(se,Nt);if(!Rr)return;var xr=jv(se,Nt);if(!xr)return;var an=U[Zy](xr),Ji=Ie[Jl];$n(an);var ap=(It={},It[ch]=an,It.cnt=0,It);Ji[pi](ap),v_()}catch(Vr){bt(Nt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Pi(Vr),{exception:ar(Vr)})}Ie.processNext(se,De)},Ie.isCompletelyIdle=function(){return!C&&te===0&&Ie._buffer[ia]()===0},Ie.getOfflineListener=function(){return he},Ie._xhrReadyStateChange=function(se,De,It){if(!mh(De))return ip(se,De,It)},Ie[or]=function(se,De,It){se===void 0&&(se=!0);var Nt;if(!C)try{var Rr=Ie[Jl];if(kr)Rr[lh]();else if(Rr[ia]()>0){var xr=Rr.getItems();r0(It||0,se),De?Nt=De.call(Ie,xr,se):Nt=Ie[Ti](xr,se)}Bv()}catch(Ji){var an=qi();(!an||an>9)&&bt(Ie[Hr](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+Pi(Ji),{exception:ar(Ji)})}return Nt},Ie.getOfflineSupport=function(){var se;return se={getUrl:function(){return le},createPayload:Ae},se[Zy]=sa,se.batch=yu,se.shouldProcess=function(De){return!!ph(De)},se},Ie._doTeardown=function(se,De){Ie.onunloadFlush(),Ml(he,!1),IT()},Ie[xg]=function(se,De,It){if(!mh(se))return Kc(se,De)},Ie[Tb]=function(se,De){if(!mh(se))return Fv(se,De)},Ie[Xy]=function(se,De){if(!mh(se))return dh(se)},Ie._xdrOnLoad=function(se,De){if(!mh(De))return Ta(se,De)};function Ta(se,De){var It=wT(se);if(se&&(It+""=="200"||It===""))g=0,Ie[Xy](De,0);else{var Nt=nn(It);Nt&&Nt[xb]&&Nt[xb]>Nt[Ib]&&!Bn?Ie[Tb](De,Nt):Ie[xg](De,xs(se))}}function qs(){var se;try{var De={xdrOnComplete:function(Nt,Rr,xr){var an=Uv(xr);if(an)return Ta(Nt,an)},fetchOnComplete:function(Nt,Rr,xr,an){var Ji=Uv(an);if(Ji)return ua(Nt.status,Ji,Nt.url,Ji[Te],Nt.statusText,xr||"")},xhrOnComplete:function(Nt,Rr,xr){var an=Uv(xr);if(an)return ip(Nt,an,an[Te])},beaconOnRetry:function(Nt,Rr,xr){return hh(Nt,Rr,xr)}},It=(se={},se[Eb]=xi,se.isOneDs=!1,se.disableCredentials=!1,se[f_]=zt,se.disableBeacon=!et,se.disableBeaconSync=!qe,se.senderOnCompleteCallBack=De,se);return It}catch{}return null}function ip(se,De,It){se.readyState===4&&ua(se.status,De,se.responseURL,It,no(se),wT(se)||se.response)}function Kc(se,De,It){bt(Ie[Hr](),2,26,"Failed to send telemetry.",{message:De}),Ie._buffer&&Ie._buffer[hi](se)}function Fv(se,De){for(var It=[],Nt=[],Rr=De.errors.reverse(),xr=0,an=Rr;xr<an.length;xr++){var Ji=an[xr],ap=se.splice(Ji.index,1)[0];$v(Ji.statusCode)?Nt[Ea](ap):It[Ea](ap)}se[Te]>0&&Ie[Xy](se,De[Ib]),It[Te]>0&&Ie[xg](It,no(null,["partial success",De[Ib],"of",De.itemsReceived].join(" "))),Nt[Te]>0&&(ly(Nt),bt(Ie[Hr](),2,40,"Partial success. Delivered: "+se[Te]+", Failed: "+It[Te]+". Will retry to send "+Nt[Te]+" our of "+De[xb]+" items"))}function dh(se,De){Ie._buffer&&Ie._buffer[hi](se)}function Uv(se){try{if(se){var De=se,It=De[Nb];return It&&It[Te]?It:null}}catch{}return null}function ph(se,De){if(kr)return!1;if(!se)return De&&bt(De,1,7,"Cannot send empty telemetry"),!1;if(se.baseData&&!se[Cb])return De&&bt(De,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(se[Cb]||(se[Cb]="EventData"),!Ie[Ti])return De&&bt(De,1,28,"Sender was not initialized"),!1;if(xt(se))se[gg]=Ie._sample[Qy];else return De&&bt(De,2,33,"Telemetry item was sampled out and not sent",{SampleRate:Ie._sample[Qy]}),!1;return!0}function jv(se,De){var It=se.iKey||pn,Nt=c.constructEnvelope(se,It,De,hn);if(!Nt){bt(De,1,47,"Unable to create an AppInsights envelope");return}var Rr=!1;if(se[Sa]&&se[Sa][Zm]&&(jt(se[Sa][Zm],function(xr){try{xr&&xr(Nt)===!1&&(Rr=!0,zu(De,"Telemetry processor check returns false"))}catch(an){bt(De,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Pi(an),{exception:ar(an)},!0)}}),delete se[Sa][Zm]),!Rr)return Nt}function sa(se){var De=yT,It=Ie[Hr]();try{var Nt=ph(se,It),Rr=null;Nt&&(Rr=jv(se,It)),Rr&&(De=U[Zy](Rr))}catch{}return De}function yu(se){var De=yT;return se&&se[Te]&&(De="["+se.join(",")+"]"),De}function Ae(se){var De,It=si();return De={urlString:le},De[We]=se,De.headers=It,De}function xt(se){return Ie._sample.isSampledIn(se)}function nr(se,De,It,Nt){De===200&&se?Ie._onSuccess(se,se[Te]):Nt&&Ie[xg](se,Nt)}function Mt(se,De,It,Nt){Nt===void 0&&(Nt=!0);var Rr=function(Ji,ap,Vr){return nr(De,Ji,ap,Vr)},xr=_r(De),an=se&&se.sendPOST;return an&&xr?(Nt&&Ie._buffer[um](De),an(xr,Rr,!It)):null}function _r(se){var De;if(ut(se)&&se[Te]>0){var It=Ie[Jl].batchPayloads(se),Nt=si(),Rr=(De={},De[We]=It,De.urlString=le,De.headers=Nt,De.disableXhrSync=zt,De.disableFetchKeepAlive=!zn,De[Nb]=se,De);return Rr}return null}function si(){try{var se=W||{};return Pe(le)&&(se[yg[6]]=yg[7]),se}catch{}return null}function $n(se){var De=se?se[Te]:0;return Ie[Jl].size()+De>Ee?((!he||he.isOnline())&&Ie[or](!0,null,10),!0):!1}function ua(se,De,It,Nt,Rr,xr){var an=null;if(Ie._appId||(an=nn(xr),an&&an.appId&&(Ie._appId=an.appId)),(se<200||se>=300)&&se!==0){if((se===301||se===307||se===308)&&!ns(It)){Ie[xg](De,Rr);return}if(he&&!he.isOnline()){if(!Bn){var Ji=10;ly(De,Ji),bt(Ie[Hr](),2,40,". Offline - Response Code: ".concat(se,". Offline status: ").concat(!he.isOnline(),". Will retry to send ").concat(De.length," items."))}return}!Bn&&$v(se)?(ly(De),bt(Ie[Hr](),2,40,". Response code "+se+". Will retry to send "+De[Te]+" items.")):Ie[xg](De,Rr)}else ns(It),se===206?(an||(an=nn(xr)),an&&!Bn?Ie[Tb](De,an):Ie[xg](De,Rr)):(g=0,Ie[Xy](De,Nt))}function ns(se){return $>=10?!1:!Le(se)&&se!==""&&se!==le?(le=se,++$,!0):!1}function wu(se,De){if(de)de(se,!1);else{var It=Wn&&Wn[Ky]([3],!0);return Mt(It,se,De)}}function hh(se,De,It){var Nt=se,Rr=Nt&&Nt[Nb];if(Ii)sr&&sr(Rr,!0),bt(Ie[Hr](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var xr=[],an=0;an<Rr[Te];an++){var Ji=Rr[an],ap=[Ji],Vr=_r(ap);It(Vr,De)?Ie._onSuccess(ap,ap[Te]):xr[Ea](Ji)}xr[Te]>0&&(sr&&sr(xr,!0),bt(Ie[Hr](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function mh(se){try{if(se&&se[Te])return mn(se[0])}catch{}return null}function m_(se,De){var It=null;if(ut(se)){for(var Nt=se[Te],Rr=0;Rr<se[Te];Rr++)Nt+=se[Rr].item[Te];var xr=Wn.getSyncFetchPayload();xr+Nt<=xO?It=2:ks()?It=3:(It=1,bt(Ie[Hr](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var an=Wn&&Wn[Ky]([It],!0);return Mt(an,se,De)}return null}function ly(se,De){if(De===void 0&&(De=1),!(!se||se[Te]===0)){var It=Ie[Jl];It[hi](se),g++;for(var Nt=0,Rr=se;Nt<Rr.length;Nt++){var xr=Rr[Nt];xr.cnt=xr.cnt||0,xr.cnt++,It[pi](xr)}Ob(De),v_()}}function Ob(se){var De=10,It;if(g<=1)It=De;else{var Nt=(Math.pow(2,g)-1)/2,Rr=Math.floor(Math.random()*Nt*De)+1;Rr=se*Rr,It=Math.max(Math.min(Rr,3600),De)}var xr=Iu()+It*1e3;E=xr}function v_(){if(!A&&!C){var se=E?Math.max(0,E-Iu()):0,De=Math.max(rr,se);A=Du(function(){A=null,Ie[or](!0,null,1)},De)}}function Bv(){A&&A.cancel(),A=null,E=null}function $v(se){return Le(Ys)?se===401||se===408||se===429||se===500||se===502||se===503||se===504:Ys[Te]&&Ys.indexOf(se)>-1}function t0(){var se="getNotifyMgr";return Ie.core[se]?Ie.core[se]():Ie.core._notificationManager}function r0(se,De){var It=t0();if(It&&It[pT])try{It[pT](se,De)}catch(Nt){bt(Ie[Hr](),1,74,"send request notification failed: "+Pi(Nt),{exception:ar(Nt)})}}function xT(se,De){var It=De.disableInstrumentationKeyValidation,Nt=Le(It)?!1:It;if(Nt)return!0;var Rr="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",xr=new RegExp(Rr);return xr.test(se)}function IT(){Ie[Ti]=null,Ie[Jl]=null,Ie._appId=null,Ie._sample=null,W={},he=null,g=0,E=null,C=!1,A=null,U=null,$=0,te=0,de=null,me=null,le=null,Fe=null,Ee=0,Be=!1,mt=null,kr=!1,pn=null,hn=cm,Bn=!1,Gt=null,oa=cm,zt=!1,zn=!1,Ii=!1,He=null,sr=null,Wn=null,Gr(Ie,"_senderConfig",{g:function(){return wt({},bT)}})}}),d}return c.constructEnvelope=function(d,g,E,C){var A;g!==d.iKey&&!Le(g)?A=_o(_o({},d),{iKey:g}):A=d;var U=CO[A.baseType]||vT;return U(E,A,C)},c}(Bt),d_="instrumentationKey",e0="connectionString",ET="instrumentationkey",p_="endpointUrl",TT="ingestionendpoint",cy="userOverrideEndpointUrl",h_,Rb=void 0,kO=(h_={diagnosticLogInterval:Uc(DO,1e4)},h_[e0]=Rb,h_[p_]=Rb,h_[d_]=Rb,h_.extensionConfig={},h_);function DO(s){return s&&s>0}var RO=function(){function s(c){var d=new Jt,g;(Le(c)||Le(c[d_])&&Le(c[e0]))&&br("Invalid input configuration"),ea(s,this,function(C){Gr(C,"config",{g:function(){return g}}),A(),C.initialize=A,C.track=E,Nd(C,d,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function A(){var U=Ko(c||{},kO);g=U.cfg,d.addUnloadHook(Vu(U,function(){var $=g[e0];if(fr($)){var W=wl(function(me,le){Ss($,function(Fe){var Ee=Fe.value,Be=g[d_];if(!Fe.rejected&&Ee){g[e0]=Ee;var qe=Lr(Ee);Be=qe[ET]||Be}me(Be)})}),te=wl(function(me,le){Ss($,function(Fe){var Ee=Fe.value,Be=g[p_];if(!Fe.rejected&&Ee){var qe=Lr(Ee),et=qe[TT];Be=et?et+im:Be}me(Be)})});g[d_]=W,g[p_]=g[cy]||te}if(mn($)){var de=Lr($),he=de[TT];g[p_]=g[cy]?g[cy]:he+im,g[d_]=de[ET]||g[d_]}g[p_]=g[cy]?g[cy]:g[p_]})),d.initialize(g,[new ST])}});function E(C){C&&(C.baseData=C.baseData||{},C.baseType=C.baseType||"EventData"),d.track(C)}}return s.__ieDyn=1,s}();t.AppInsightsCore=Jt,t.ApplicationInsights=RO,t.Sender=ST,t.SeverityLevel=Q,t.arrForEach=jt,t.isNullOrUndefined=Le,t.proxyFunctions=Nd,t.throwError=br})});var fN=gt(gm=>{"use strict";var sL=gm&&gm.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),uL=gm&&gm.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),cL=gm&&gm.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&sL(e,t,r);return uL(e,t),e};Object.defineProperty(gm,"__esModule",{value:!0});gm.appInsightsClientFactory=void 0;var lL=uN(),fL=ZS(),dL=async(t,e,r,n,i)=>{let a;try{let f=await Promise.resolve().then(()=>cL(lN())),m={};if(n){let P={alwaysUseXhrOverride:!0,httpXHROverride:n};m[lL.BreezeChannelIdentifier]=P}let y;t.startsWith("InstrumentationKey=")||(y=t);let x=y?{instrumentationKey:y}:{connectionString:t};a=new f.ApplicationInsights({...x,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:m})}catch(f){return Promise.reject(f)}return{logEvent:(f,m)=>{let y={...m==null?void 0:m.properties,...m==null?void 0:m.measurements};i!=null&&i.length&&fL.TelemetryUtil.applyReplacements(y,i),a==null||a.track({name:f,data:y,baseType:"EventData",ext:{user:{id:e,authId:e},app:{sesId:r}},baseData:{name:f,properties:m==null?void 0:m.properties,measurements:m==null?void 0:m.measurements}})},flush:async()=>{a==null||a.flush(!1)},dispose:async()=>new Promise(m=>{a==null||a.unload(!0,()=>{m(),a=void 0},1e3)})}};gm.appInsightsClientFactory=dL});var dN=gt(Nw=>{"use strict";Object.defineProperty(Nw,"__esModule",{value:!0});Nw.BaseTelemetryReporter=void 0;var XS=class{constructor(e,r,n){this.telemetrySender=e,this.vscodeAPI=r,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,r,n,i){i?this.telemetrySender.sendEventData(e,{properties:r,measurements:n}):this.telemetryLogger.logUsage(e,{properties:r,measurements:n})}sendTelemetryEvent(e,r,n){this.internalSendTelemetryEvent(e,r,n,!1)}sendRawTelemetryEvent(e,r,n){let i={...r};for(let a of Object.keys(i??{})){let u=i[a];typeof a=="string"&&u!==void 0&&(i[a]=new this.vscodeAPI.TelemetryTrustedValue(typeof u=="string"?u:u.value))}this.sendTelemetryEvent(e,i,n)}sendDangerousTelemetryEvent(e,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,r,n,!0)}internalSendTelemetryErrorEvent(e,r,n,i){i?this.telemetrySender.sendEventData(e,{properties:r,measurements:n}):this.telemetryLogger.logError(e,{properties:r,measurements:n})}sendTelemetryErrorEvent(e,r,n){this.internalSendTelemetryErrorEvent(e,r,n,!1)}sendDangerousTelemetryErrorEvent(e,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,r,n,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}};Nw.BaseTelemetryReporter=XS});var pN=gt(Cw=>{"use strict";Object.defineProperty(Cw,"__esModule",{value:!0});Cw.BaseTelemetrySender=void 0;var fv;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(fv||(fv={}));var QS=class{constructor(e,r){this._instantiationStatus=fv.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=r,this._key=e}sendEventData(e,r){if(!this._telemetryClient){this._instantiationStatus!==fv.INSTANTIATED&&this._eventQueue.push({eventName:e,data:r});return}this._telemetryClient.logEvent(e,r)}sendErrorData(e,r){if(!this._telemetryClient){this._instantiationStatus!==fv.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:r});return}let n={stack:e.stack,message:e.message,name:e.name};if(r){let i=r.properties||r;r.properties={...i,...n}}else r={properties:n};this._telemetryClient.logEvent("unhandlederror",r)}async flush(){var e;return(e=this._telemetryClient)==null?void 0:e.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:r})=>this.sendEventData(e,r)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:r})=>this.sendErrorData(e,r)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===fv.NOT_INSTANTIATED&&(this._instantiationStatus=fv.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=fv.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=fv.INSTANTIATED}))}};Cw.BaseTelemetrySender=QS});var vN=gt(dv=>{"use strict";var pL=dv&&dv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),hL=dv&&dv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),rE=dv&&dv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&pL(e,t,r);return hL(e,t),e};Object.defineProperty(dv,"__esModule",{value:!0});var mL=rE(require("https")),eE=rE(require("os")),kw=rE(require("vscode")),vL=oN(),gL=fN(),_L=dN(),yL=pN(),hN=ZS();function mN(){return{sendPOST:(e,r)=>{let n={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{let i=mL.request(e.urlString,n,a=>{a.on("data",function(u){r(a.statusCode??200,a.headers,u.toString())}),a.on("error",function(){r(0,{})})});i.write(e.data,a=>{a&&r(0,{})}),i.end()}catch{r(0,{})}}}}var tE=class extends _L.BaseTelemetryReporter{constructor(e,r){let n=u=>(0,gL.appInsightsClientFactory)(u,kw.env.machineId,kw.env.sessionId,mN(),r);hN.TelemetryUtil.shouldUseOneDataSystemSDK(e)&&(n=u=>(0,vL.oneDataSystemClientFactory)(u,kw,mN()));let i={release:eE.release(),platform:eE.platform(),architecture:eE.arch()},a=new yL.BaseTelemetrySender(e,n);if(e&&e.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(a,kw,{additionalCommonProperties:hN.TelemetryUtil.getAdditionalCommonProperties(i)})}};dv.default=tE});var _C=gt((a6,L_)=>{"use strict";var JL=typeof Buffer<"u",hC=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,mC=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function vC(t,e,r){r==null&&e!==null&&typeof e=="object"&&(r=e,e=void 0),JL&&Buffer.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));let n=JSON.parse(t,e);if(n===null||typeof n!="object")return n;let i=r&&r.protoAction||"error",a=r&&r.constructorAction||"error";if(i==="ignore"&&a==="ignore")return n;if(i!=="ignore"&&a!=="ignore"){if(hC.test(t)===!1&&mC.test(t)===!1)return n}else if(i!=="ignore"&&a==="ignore"){if(hC.test(t)===!1)return n}else if(mC.test(t)===!1)return n;return gC(n,{protoAction:i,constructorAction:a,safe:r&&r.safe})}function gC(t,{protoAction:e="error",constructorAction:r="error",safe:n}={}){let i=[t];for(;i.length;){let a=i;i=[];for(let u of a){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(u,"__proto__")){if(n===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete u.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(u,"constructor")&&Object.prototype.hasOwnProperty.call(u.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete u.constructor}for(let f in u){let m=u[f];m&&typeof m=="object"&&i.push(m)}}}return t}function cE(t,e,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return vC(t,e,r)}finally{Error.stackTraceLimit=n}}function KL(t,e){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return vC(t,e,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}L_.exports=cE;L_.exports.default=cE;L_.exports.parse=cE;L_.exports.safeParse=KL;L_.exports.scan=gC});var CY={};Fb(CY,{activate:()=>IY,deactivate:()=>NY});module.exports=Dg(CY);var cO=require("vscode");var kN=require("vscode");var oE={};Fb(oE,{action:()=>BO,diffView:()=>xL,storeApiKey:()=>$O,work:()=>IL});function BO(t){return e=>{typeof e=="function"&&e()}}var Ub=require("vscode");function $O({ext:t,log:e}){return async(r,n)=>{let i=await Ub.window.showInputBox({prompt:`Enter the ${n}`});i&&(e.info(n,{event:"action.key"}),await t.secrets.store(r,i),Ub.window.showInformationMessage(`${n} stored successfully`))}}var NN=require("vscode");var Ba=require("vscode"),iE=__(mS()),Mw=__(BI());var YS=require("crypto");var $I="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var RM=128,Zv,Xv;function YI(t){!Zv||Zv.length<t?(Zv=Buffer.allocUnsafe(t*RM),YS.webcrypto.getRandomValues(Zv),Xv=0):Xv+t>Zv.length&&(YS.webcrypto.getRandomValues(Zv),Xv=0),Xv+=t}function OM(t){return YI(t|=0),Zv.subarray(Xv-t,Xv)}function AM(t,e,r){let n=(2<<31-Math.clz32(t.length-1|1))-1,i=Math.ceil(1.6*n*e/t.length);return(a=e)=>{let u="";for(;;){let f=r(i),m=i;for(;m--;)if(u+=t[f[m]&n]||"",u.length>=a)return u}}}function qI(t,e=21){return AM(t,e,OM)}function HI(t=21){YI(t|=0);let e="";for(let r=Xv-t;r<Xv;r++)e+=$I[Zv[r]&63];return e}var Qc=require("vscode"),tL=__(XI());var fp=require("vscode"),gw="multicoder",QI,eN,mw=(eN=(QI=fp.workspace.workspaceFolders)==null?void 0:QI[0])==null?void 0:eN.uri,vw=new Map;function eL(t){return t.path.split("/").pop()}function Ql(t){if(t.scheme==gw)return t.path=="/"?"./":t.path.slice(1);let e=fp.workspace.getWorkspaceFolder(t);if(e){let a="";return String(e.uri)!==String(t)&&(a=fp.workspace.asRelativePath(t,!1).replace(/\\/g,"/")),String(e.uri)!==String(mw)&&(a=".folders/"+eL(e.uri)+(a?"/"+a:"")),a||(a="."),a}if(t.scheme==="untitled")return".untitled/"+t.path;let r=t.path.split("/"),n=r.pop(),i=r.pop();return vw.has(i)||vw.set(i,fp.Uri.joinPath(t,"../")),".external/"+i+"/"+n}function vi(t,e){return(t=="."||t=="./")&&(t=""),t=t.startsWith("/")?t:"/"+t,fp.Uri.from({scheme:gw,path:t,authority:e})}function Xc(t){let[e,r,...n]=t.path.split("/");if(r==".multicoder")return t.with({scheme:"file",authority:""});if(r==".untitled")return fp.Uri.from({scheme:"untitled",path:n.join("/")});if(r==".external"){let i=n.shift();if(vw.has(i))return fp.Uri.joinPath(vw.get(i),n.join("/"));throw new Error("Unknown external directory: "+i)}if(r==".folders"){let i=n.shift();for(let a of fp.workspace.workspaceFolders||[])if(a.uri.path.endsWith("/"+i))return fp.Uri.joinPath(a.uri,n.join("/"));throw new Error("Unknown workspace folder: "+i)}if(mw)return t.path?fp.Uri.joinPath(mw,t.path):mw;throw new Error("Cannot find source Uri")}var{fs:by}=Qc.workspace,rL=qI("1234567890abcdef",10);function _w(){return rL()}function yw(){let t=[];for(let e of Qc.window.tabGroups.all.flatMap(r=>r.tabs))e.input instanceof Qc.TabInputText&&t.push(e.input.uri);return t}async function Qv(t){return new TextDecoder().decode(await by.readFile(t))}async function ww(t,e){return await by.writeFile(t,new TextEncoder().encode(e))}async function ef(t){try{let e=await by.stat(t);return e&&!!(e.type&Qc.FileType.File)}catch{return!1}}async function gh(t){try{let e=await by.stat(t);return e&&!!(e.type&Qc.FileType.Directory)}catch{return!1}}async function bw(t){return(await by.readDirectory(t)).map(([e,r])=>({name:e,path:Ql(Qc.Uri.joinPath(t,e)),uri:Qc.Uri.joinPath(t,e),isFile:!!(r&Qc.FileType.File),isDirectory:!!(r&Qc.FileType.Directory),isSymbolicLink:!!(r&Qc.FileType.SymbolicLink)}))}var gN=__(vN()),wL="InstrumentationKey=4a0957be-8ce1-4335-8aa5-1fb742355aa5;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com/;LiveEndpoint=https://westeurope.livediagnostics.monitor.azure.com/;ApplicationId=b0fce7b4-deeb-43b7-aa17-e5024c6c504c";function bL(t){return{logUsage(e,r){t.sendTelemetryEvent(e,r)},logError(e,r={}){if(e&&typeof e=="object"){let{message:n,stack:i}=e,a=String(e.name||"error").toLowerCase(),u=String(e);t.sendTelemetryErrorEvent(a,{...e,...r,message:n,stack:i,text:u})}else t.sendTelemetryErrorEvent(String(e).toLowerCase().replace(/\W+/g,"-"),r)}}}function _N(t){let e=new gN.default(wL),r=bL(e);t.telemetry=r,r.logUsage("activated"),t.ext.subscriptions.push(e)}var yN=require("vscode");function wN(t){let e=yN.window.createOutputChannel("Multicoder",{log:!0});function r(i){if(!i||typeof i!="object")return;let{event:a,...u}=i,f=Object.entries(u).map(([m,y])=>`
    ${m}: ${y}`);f.length&&e.trace(f.join(""))}function n(i){let a={};return i!=null&&i.model&&(a.modelId=i.model.modelId,a.modelProvider=i.model.provider),a}t.log={error(i,a={}){e.error(i),t.telemetry.logError(i,{...n(this.session),...a}),r(a)},warn(i,a={}){e.warn((a!=null&&a.event?`[${a.event}] `:"")+i),t.telemetry.logUsage((a==null?void 0:a.event)||"warning",{text:i,...n(this.session),...a}),r(a)},info(i,a={}){e.info((a!=null&&a.event?`[${a.event}] `:"")+i),t.telemetry.logUsage((a==null?void 0:a.event)||"info",{text:i,...n(this.session),...a}),r(a)},session:null},t.ext.subscriptions.push(e)}async function A_(t,e){return new Promise(r=>{let n=!1,i=null;function a(){n||(n=!0,i==null||i.dispose(),r())}e&&(i=e.onCancellationRequested(a)),setTimeout(a,t*1e3)})}var bN=__(mS()),Sy=new bN.Volume,nE=Sy,SN={recursive:!0};nE.mkdirSync("/.multicoder/task",SN);nE.mkdirSync("/.multicoder/snapshots",SN);nE.writeFileSync("/.multicoder/snapshots/~empty","");var Ow=".wh.",{fs:Ey}=Ba.workspace,xy=new Map,Ug=new Map;xy.set("shared",Sy);function eg(t){let e=xy.get(t.authority);return e||(e=new iE.Volume,xy.set(t.authority,e)),e}function Ty(t){let e=eg(t).statSync(t.path,{throwIfNoEntry:!1});if(!e)return null;let r=0,n=Number(e.birthtimeMs),i=Number(e.mtimeMs),a=Number(e.size);return e.isFile()?r=Ba.FileType.File:e.isDirectory()&&(r=Ba.FileType.Directory),{type:r,ctime:n,mtime:i,size:a}}function Rw(t){return Ty(t.with({authority:"shared"}))}function SL(t){let e=Ty(Aw(t))||Rw(Aw(t));return e&&(e.permissions=Ba.FilePermission.Readonly),e}function Aw(t){return t.with({path:"/.multicoder/snapshots/"+t.query,query:""})}function EL(t){let e=t.path.split("/");for(;e.length>1;){let r=Ow+e.pop(),n=[...e,r].join("/");if(eg(t).statSync(n,{throwIfNoEntry:!1}))return!0}return!1}function Dw(t){let e=t.path.split("/"),r=e.pop(),n=e.join("/"),i=n+"/"+Ow+r;return[n,i]}async function TL(t){try{return await Ey.stat(Xc(t))}catch{return null}}function jg(t){return t.authority+t.path}var Pw=class{async stat(e){if(e.query)return SL(e);if(EL(e))throw Ba.FileSystemError.FileNotFound(e);return Ty(e)||Rw(e)||await Ey.stat(Xc(e))}async readFile(e){return e.query&&(e=Aw(e)),Ty(e)?eg(e).readFileSync(e.path):Rw(e)?Sy.readFileSync(e.path):Ey.readFile(Xc(e))}async writeFile(e,r,n){let[i,a]=Dw(e),u=eg(e);u.mkdirSync(i,{recursive:!0}),u.writeFileSync(e.path,r),u.statSync(a,{throwIfNoEntry:!1})&&u.unlinkSync(a),Ug.has(jg(e))&&this._emitter.fire([{type:Ba.FileChangeType.Changed,uri:e}])}async readDirectory(e){let r=await TL(e),n=Rw(e),i=Ty(e),a=eg(e),u=new Map,f=[];if(r)for(let[m,y]of await Ey.readDirectory(Xc(e)))u.set(m,y);return n&&Sy.readdirSync(e.path,{withFileTypes:!0}).forEach(m=>{u.set(m.name,m.isDirectory()?Ba.FileType.Directory:Ba.FileType.File)}),i&&a.readdirSync(e.path,{withFileTypes:!0}).forEach(m=>{m.name.startsWith(Ow)?f.push(m.name.slice(Ow.length)):u.set(m.name,m.isDirectory()?Ba.FileType.Directory:Ba.FileType.File)}),f.forEach(m=>u.delete(m)),Array.from(u.entries())}async delete(e,r){let[n,i]=Dw(e),a=eg(e);a.statSync(e.path,{throwIfNoEntry:!1})&&a.unlinkSync(e.path),a.mkdirSync(n,{recursive:!0}),a.writeFileSync(i,""),Ug.has(jg(e))&&this._emitter.fire([{type:Ba.FileChangeType.Deleted,uri:e}])}async rename(e,r,n){let[i,a]=Dw(e),[u,f]=Dw(r),m=eg(e);if(m.mkdirSync(i,{recursive:!0}),m.mkdirSync(u,{recursive:!0}),m.statSync(e.path,{throwIfNoEntry:!1}))m.renameSync(e.path,r.path);else{let y=await Ey.readFile(Xc(e));m.writeFileSync(r.path,y)}m.statSync(f,{throwIfNoEntry:!1})&&m.unlinkSync(f),m.writeFileSync(a,""),Ug.has(jg(e)||Ug.has(jg(r)))&&this._emitter.fire([{type:Ba.FileChangeType.Deleted,oldUri:e},{type:Ba.FileChangeType.Created,newUri:r}])}async createDirectory(e){eg(e).mkdirSync(e.path,{recursive:!0})}_emitter=new Ba.EventEmitter;onDidChangeFile=this._emitter.event;watch(e,r){let n={},i=Ug.get(jg(e))||new Set;return i.add(n),Ug.set(jg(e),i),new Ba.Disposable(()=>{i.delete(n),i.size||Ug.set(jg(e),null)})}};async function aE(t,e){let r=e?HI():"~empty",n=t.with({query:r});return e&&await ww(Aw(n),e),n}function EN(t){let e=xy.get(t);return e?new TextDecoder().decode((0,Mw.toJsonSnapshotSync)({fs:e})):""}function TN(t,e){if(!e)return;let r=new iE.Volume;xy.set(t,r);try{(0,Mw.fromJsonSnapshotSync)(new TextEncoder().encode(e),{fs:r})}catch{}}var xN=require("vscode");function IN(t){let e=new Pw,r=xN.workspace.registerFileSystemProvider(gw,e,{isCaseSensitive:!0,isReadonly:!1});t.ext.subscriptions.push(r)}function xL(t){return async(e,r,n)=>{let i=t.recent.get(n),a=e.split("/").pop(),u=i==null?void 0:i.task,f=null;for(;u&&!f;)f=u.edits.find(P=>P.id===r),u=u.parent;if(!f)return;let m=vi(e,i.id),y=await aE(m,f.before),x=await aE(m,f.after);await NN.commands.executeCommand("vscode.diff",y,x,`${a} (Multicoder)`),t.log.info(a,{event:"action.diff"})}}var Tq=require("vscode");async function CN(){}function IL(t){return()=>{CN()}}function DN(t){Object.entries(oE).forEach(([e,r])=>{let n=kN.commands.registerCommand(`multicoder.${e}`,r(t));t.ext.subscriptions.push(n)})}var Tm=require("vscode");var RN="vercel.ai.error",NL=Symbol.for(RN),ON,CL=class AN extends Error{constructor({name:e,message:r,cause:n}){super(r),this[ON]=!0,this.name=e,this.cause=n}static isInstance(e){return AN.hasMarker(e,RN)}static hasMarker(e,r){let n=Symbol.for(r);return e!=null&&typeof e=="object"&&n in e&&typeof e[n]=="boolean"&&e[n]===!0}};ON=NL;var Pt=CL,PN="AI_APICallError",MN=`vercel.ai.error.${PN}`,kL=Symbol.for(MN),LN,tf=class extends Pt{constructor({message:t,url:e,requestBodyValues:r,statusCode:n,responseHeaders:i,responseBody:a,cause:u,isRetryable:f=n!=null&&(n===408||n===409||n===429||n>=500),data:m}){super({name:PN,message:t,cause:u}),this[LN]=!0,this.url=e,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=i,this.responseBody=a,this.isRetryable=f,this.data=m}static isInstance(t){return Pt.hasMarker(t,MN)}};LN=kL;var FN="AI_EmptyResponseBodyError",UN=`vercel.ai.error.${FN}`,DL=Symbol.for(UN),jN,uE=class extends Pt{constructor({message:t="Empty response body"}={}){super({name:FN,message:t}),this[jN]=!0}static isInstance(t){return Pt.hasMarker(t,UN)}};jN=DL;function tg(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var BN="AI_InvalidArgumentError",$N=`vercel.ai.error.${BN}`,RL=Symbol.for($N),YN,Lw=class extends Pt{constructor({message:t,cause:e,argument:r}){super({name:BN,message:t,cause:e}),this[YN]=!0,this.argument=r}static isInstance(t){return Pt.hasMarker(t,$N)}};YN=RL;var qN="AI_InvalidPromptError",HN=`vercel.ai.error.${qN}`,OL=Symbol.for(HN),VN,_m=class extends Pt{constructor({prompt:t,message:e,cause:r}){super({name:qN,message:`Invalid prompt: ${e}`,cause:r}),this[VN]=!0,this.prompt=t}static isInstance(t){return Pt.hasMarker(t,HN)}};VN=OL;var GN="AI_InvalidResponseDataError",zN=`vercel.ai.error.${GN}`,AL=Symbol.for(zN),WN,pv=class extends Pt{constructor({data:t,message:e=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:GN,message:e}),this[WN]=!0,this.data=t}static isInstance(t){return Pt.hasMarker(t,zN)}};WN=AL;var JN="AI_JSONParseError",KN=`vercel.ai.error.${JN}`,PL=Symbol.for(KN),ZN,P_=class extends Pt{constructor({text:t,cause:e}){super({name:JN,message:`JSON parsing failed: Text: ${t}.
Error message: ${tg(e)}`,cause:e}),this[ZN]=!0,this.text=t}static isInstance(t){return Pt.hasMarker(t,KN)}};ZN=PL;var XN="AI_LoadAPIKeyError",QN=`vercel.ai.error.${XN}`,ML=Symbol.for(QN),eC,M_=class extends Pt{constructor({message:t}){super({name:XN,message:t}),this[eC]=!0}static isInstance(t){return Pt.hasMarker(t,QN)}};eC=ML;var LL="AI_LoadSettingError",FL=`vercel.ai.error.${LL}`,UL=Symbol.for(FL),jL;jL=UL;var BL="AI_NoContentGeneratedError",$L=`vercel.ai.error.${BL}`,YL=Symbol.for($L),qL;qL=YL;var tC="AI_NoSuchModelError",rC=`vercel.ai.error.${tC}`,HL=Symbol.for(rC),nC,Iy=class extends Pt{constructor({errorName:t=tC,modelId:e,modelType:r,message:n=`No such ${r}: ${e}`}){super({name:t,message:n}),this[nC]=!0,this.modelId=e,this.modelType=r}static isInstance(t){return Pt.hasMarker(t,rC)}};nC=HL;var iC="AI_TooManyEmbeddingValuesForCallError",aC=`vercel.ai.error.${iC}`,VL=Symbol.for(aC),oC,Fw=class extends Pt{constructor(t){super({name:iC,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[oC]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return Pt.hasMarker(t,aC)}};oC=VL;var sC="AI_TypeValidationError",uC=`vercel.ai.error.${sC}`,GL=Symbol.for(uC),cC,zL=class sE extends Pt{constructor({value:e,cause:r}){super({name:sC,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${tg(r)}`,cause:r}),this[cC]=!0,this.value=e}static isInstance(e){return Pt.hasMarker(e,uC)}static wrap({value:e,cause:r}){return sE.isInstance(r)&&r.value===e?r:new sE({value:e,cause:r})}};cC=GL;var hv=zL,lC="AI_UnsupportedFunctionalityError",fC=`vercel.ai.error.${lC}`,WL=Symbol.for(fC),dC,un=class extends Pt{constructor({functionality:t,message:e=`'${t}' functionality not supported.`}){super({name:lC,message:e}),this[dC]=!0,this.functionality=t}static isInstance(t){return Pt.hasMarker(t,fC)}};dC=WL;var pC=(t,e=21)=>(r=e)=>{let n="",i=r|0;for(;i--;)n+=t[Math.random()*t.length|0];return n};var Yw=__(_C(),1);var ZL=Object.defineProperty,XL=(t,e,r)=>e in t?ZL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Uw=(t,e,r)=>XL(t,typeof e!="symbol"?e+"":e,r),jw=class extends Error{constructor(e,r){super(e),Uw(this,"type"),Uw(this,"field"),Uw(this,"value"),Uw(this,"line"),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function lE(t){}function yC(t){let{onEvent:e=lE,onError:r=lE,onRetry:n=lE,onComment:i}=t,a="",u=!0,f,m="",y="";function x(q){let J=u?q.replace(/^\xEF\xBB\xBF/,""):q,[ee,ve]=QL(`${a}${J}`);for(let ye of ee)P(ye);a=ve,u=!1}function P(q){if(q===""){G();return}if(q.startsWith(":")){i&&i(q.slice(q.startsWith(": ")?2:1));return}let J=q.indexOf(":");if(J!==-1){let ee=q.slice(0,J),ve=q[J+1]===" "?2:1,ye=q.slice(J+ve);V(ee,ye,q);return}V(q,"",q)}function V(q,J,ee){switch(q){case"event":y=J;break;case"data":m=`${m}${J}
`;break;case"id":f=J.includes("\0")?void 0:J;break;case"retry":/^\d+$/.test(J)?n(parseInt(J,10)):r(new jw(`Invalid \`retry\` value: "${J}"`,{type:"invalid-retry",value:J,line:ee}));break;default:r(new jw(`Unknown field "${q.length>20?`${q.slice(0,20)}\u2026`:q}"`,{type:"unknown-field",field:q,value:J,line:ee}));break}}function G(){m.length>0&&e({id:f,event:y||void 0,data:m.endsWith(`
`)?m.slice(0,-1):m}),f=void 0,m="",y=""}function Y(q={}){a&&q.consume&&P(a),f=void 0,m="",y="",a=""}return{feed:x,reset:Y}}function QL(t){let e=[],r="",n=t.length;for(let i=0;i<n;i++){let a=t[i];a==="\r"&&t[i+1]===`
`?(e.push(r),r="",i++):a==="\r"||a===`
`?(e.push(r),r=""):r+=a}return[e,r]}var Bw=class extends TransformStream{constructor({onError:e,onRetry:r,onComment:n}={}){let i;super({start(a){i=yC({onEvent:u=>{a.enqueue(u)},onError(u){e==="terminate"?a.error(u):typeof e=="function"&&e(u)},onRetry:r,onComment:n})},transform(a){i.feed(a)}})}};function ko(...t){return t.reduce((e,r)=>({...e,...r??{}}),{})}function wC(t){return new ReadableStream({async pull(e){try{let{value:r,done:n}=await t.next();n?e.close():e.enqueue(r)}catch(r){e.error(r)}},cancel(){}})}async function bC(t){return t==null?Promise.resolve():new Promise(e=>setTimeout(e,t))}function $w(t){let e={};return t.headers.forEach((r,n)=>{e[n]=r}),e}var _h=({prefix:t,size:e=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let i=pC(r,e);if(t==null)return i;if(r.includes(n))throw new Lw({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return a=>`${t}${n}${i(a)}`},el=_h();function SC(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}function eF(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>r!=null))}function Ny(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}function rg({apiKey:t,environmentVariableName:e,apiKeyParameterName:r="apiKey",description:n}){if(typeof t=="string")return t;if(t!=null)throw new M_({message:`${n} API key must be a string.`});if(typeof process>"u")throw new M_({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(t=process.env[e],t==null)throw new M_({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new M_({message:`${n} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}var Cy=Symbol.for("vercel.ai.validator");function tF(t){return{[Cy]:!0,validate:t}}function rF(t){return typeof t=="object"&&t!==null&&Cy in t&&t[Cy]===!0&&"validate"in t}function nF(t){return rF(t)?t:iF(t)}function iF(t){return tF(e=>{let r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}})}function aF({value:t,schema:e}){let r=yh({value:t,schema:e});if(!r.success)throw hv.wrap({value:t,cause:r.error});return r.value}function yh({value:t,schema:e}){let r=nF(e);try{if(r.validate==null)return{success:!0,value:t};let n=r.validate(t);return n.success?n:{success:!1,error:hv.wrap({value:t,cause:n.error})}}catch(n){return{success:!1,error:hv.wrap({value:t,cause:n})}}}function oF({text:t,schema:e}){try{let r=Yw.default.parse(t);return e==null?r:aF({value:r,schema:e})}catch(r){throw P_.isInstance(r)||hv.isInstance(r)?r:new P_({text:t,cause:r})}}function ym({text:t,schema:e}){try{let r=Yw.default.parse(t);if(e==null)return{success:!0,value:r,rawValue:r};let n=yh({value:r,schema:e});return n.success?{...n,rawValue:r}:n}catch(r){return{success:!1,error:P_.isInstance(r)?r:new P_({text:t,cause:r})}}}function F_(t){try{return Yw.default.parse(t),!0}catch{return!1}}var sF=()=>globalThis.fetch,lo=async({url:t,headers:e,body:r,failedResponseHandler:n,successfulResponseHandler:i,abortSignal:a,fetch:u})=>uF({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:i,abortSignal:a,fetch:u}),uF=async({url:t,headers:e={},body:r,successfulResponseHandler:n,failedResponseHandler:i,abortSignal:a,fetch:u=sF()})=>{try{let f=await u(t,{method:"POST",headers:eF(e),body:r.content,signal:a}),m=$w(f);if(!f.ok){let y;try{y=await i({response:f,url:t,requestBodyValues:r.values})}catch(x){throw Ny(x)||tf.isInstance(x)?x:new tf({message:"Failed to process error response",cause:x,statusCode:f.status,url:t,responseHeaders:m,requestBodyValues:r.values})}throw y.value}try{return await n({response:f,url:t,requestBodyValues:r.values})}catch(y){throw y instanceof Error&&(Ny(y)||tf.isInstance(y))?y:new tf({message:"Failed to process successful response",cause:y,statusCode:f.status,url:t,responseHeaders:m,requestBodyValues:r.values})}}catch(f){if(Ny(f))throw f;if(f instanceof TypeError&&f.message==="fetch failed"){let m=f.cause;if(m!=null)throw new tf({message:`Cannot connect to API: ${m.message}`,cause:m,url:t,requestBodyValues:r.values,isRetryable:!0})}throw f}};async function Bg(t){return typeof t=="function"&&(t=t()),Promise.resolve(t)}var ng=({errorSchema:t,errorToMessage:e,isRetryable:r})=>async({response:n,url:i,requestBodyValues:a})=>{let u=await n.text(),f=$w(n);if(u.trim()==="")return{responseHeaders:f,value:new tf({message:n.statusText,url:i,requestBodyValues:a,statusCode:n.status,responseHeaders:f,responseBody:u,isRetryable:r==null?void 0:r(n)})};try{let m=oF({text:u,schema:t});return{responseHeaders:f,value:new tf({message:e(m),url:i,requestBodyValues:a,statusCode:n.status,responseHeaders:f,responseBody:u,data:m,isRetryable:r==null?void 0:r(n,m)})}}catch{return{responseHeaders:f,value:new tf({message:n.statusText,url:i,requestBodyValues:a,statusCode:n.status,responseHeaders:f,responseBody:u,isRetryable:r==null?void 0:r(n)})}}},wm=t=>async({response:e})=>{let r=$w(e);if(e.body==null)throw new uE({});return{responseHeaders:r,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new Bw).pipeThrough(new TransformStream({transform({data:n},i){n!=="[DONE]"&&i.enqueue(ym({text:n,schema:t}))}}))}};var rc=t=>async({response:e,url:r,requestBodyValues:n})=>{let i=await e.text(),a=ym({text:i,schema:t}),u=$w(e);if(!a.success)throw new tf({message:"Invalid JSON response",cause:a.error,statusCode:e.status,responseHeaders:u,responseBody:i,url:r,requestBodyValues:n});return{responseHeaders:u,value:a.value,rawValue:a.rawValue}};var{btoa:cF,atob:lF}=globalThis;function EC(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r=lF(e);return Uint8Array.from(r,n=>n.codePointAt(0))}function wh(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCodePoint(t[r]);return cF(e)}function ig(t){return t==null?void 0:t.replace(/\/$/,"")}var In;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let a={};for(let u of i)a[u]=u;return a},t.getValidEnumValues=i=>{let a=t.objectKeys(i).filter(f=>typeof i[i[f]]!="number"),u={};for(let f of a)u[f]=i[f];return t.objectValues(u)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let a=[];for(let u in i)Object.prototype.hasOwnProperty.call(i,u)&&a.push(u);return a},t.find=(i,a)=>{for(let u of i)if(a(u))return u},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(u=>typeof u=="string"?`'${u}'`:u).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(In||(In={}));var dE;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(dE||(dE={}));var Ct=In.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),vv=t=>{switch(typeof t){case"undefined":return Ct.undefined;case"string":return Ct.string;case"number":return isNaN(t)?Ct.nan:Ct.number;case"boolean":return Ct.boolean;case"function":return Ct.function;case"bigint":return Ct.bigint;case"symbol":return Ct.symbol;case"object":return Array.isArray(t)?Ct.array:t===null?Ct.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ct.promise:typeof Map<"u"&&t instanceof Map?Ct.map:typeof Set<"u"&&t instanceof Set?Ct.set:typeof Date<"u"&&t instanceof Date?Ct.date:Ct.object;default:return Ct.unknown}},Ge=In.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),fF=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),tl=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(a){return a.message},n={_errors:[]},i=a=>{for(let u of a.issues)if(u.code==="invalid_union")u.unionErrors.map(i);else if(u.code==="invalid_return_type")i(u.returnTypeError);else if(u.code==="invalid_arguments")i(u.argumentsError);else if(u.path.length===0)n._errors.push(r(u));else{let f=n,m=0;for(;m<u.path.length;){let y=u.path[m];m===u.path.length-1?(f[y]=f[y]||{_errors:[]},f[y]._errors.push(r(u))):f[y]=f[y]||{_errors:[]},f=f[y],m++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,In.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};tl.create=t=>new tl(t);var B_=(t,e)=>{let r;switch(t.code){case Ge.invalid_type:t.received===Ct.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Ge.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,In.jsonStringifyReplacer)}`;break;case Ge.unrecognized_keys:r=`Unrecognized key(s) in object: ${In.joinValues(t.keys,", ")}`;break;case Ge.invalid_union:r="Invalid input";break;case Ge.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${In.joinValues(t.options)}`;break;case Ge.invalid_enum_value:r=`Invalid enum value. Expected ${In.joinValues(t.options)}, received '${t.received}'`;break;case Ge.invalid_arguments:r="Invalid function arguments";break;case Ge.invalid_return_type:r="Invalid function return type";break;case Ge.invalid_date:r="Invalid date";break;case Ge.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:In.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Ge.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Ge.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Ge.custom:r="Invalid input";break;case Ge.invalid_intersection_types:r="Intersection results could not be merged";break;case Ge.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Ge.not_finite:r="Number must be finite";break;default:r=e.defaultError,In.assertNever(t)}return{message:r}},NC=B_;function dF(t){NC=t}function qw(){return NC}var Hw=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,a=[...r,...i.path||[]],u={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let f="",m=n.filter(y=>!!y).slice().reverse();for(let y of m)f=y(u,{data:e,defaultError:f}).message;return{...i,path:a,message:f}},pF=[];function pt(t,e){let r=qw(),n=Hw({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===B_?void 0:B_].filter(i=>!!i)});t.common.issues.push(n)}var nc=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return Cr;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let a=await i.key,u=await i.value;n.push({key:a,value:u})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:a,value:u}=i;if(a.status==="aborted"||u.status==="aborted")return Cr;a.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof u.value<"u"||i.alwaysSet)&&(n[a.value]=u.value)}return{status:e.value,value:n}}},Cr=Object.freeze({status:"aborted"}),j_=t=>({status:"dirty",value:t}),rl=t=>({status:"valid",value:t}),pE=t=>t.status==="aborted",hE=t=>t.status==="dirty",$g=t=>t.status==="valid",Ry=t=>typeof Promise<"u"&&t instanceof Promise;function Vw(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function CC(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}var $t;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})($t||($t={}));var ky,Dy,dp=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},TC=(t,e)=>{if($g(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new tl(t.common.issues);return this._error=r,this._error}}};function zr(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(u,f)=>{var m,y;let{message:x}=t;return u.code==="invalid_enum_value"?{message:x??f.defaultError}:typeof f.data>"u"?{message:(m=x??n)!==null&&m!==void 0?m:f.defaultError}:u.code!=="invalid_type"?{message:f.defaultError}:{message:(y=x??r)!==null&&y!==void 0?y:f.defaultError}},description:i}}var Wr=class{get description(){return this._def.description}_getType(e){return vv(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:vv(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new nc,ctx:{common:e.parent.common,data:e.data,parsedType:vv(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Ry(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:vv(e)},a=this._parseSync({data:e,path:i.path,parent:i});return TC(i,a)}"~validate"(e){var r,n;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:vv(e)};if(!this["~standard"].async)try{let a=this._parseSync({data:e,path:[],parent:i});return $g(a)?{value:a.value}:{issues:i.common.issues}}catch(a){!((n=(r=a==null?void 0:a.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(a=>$g(a)?{value:a.value}:{issues:i.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:vv(e)},i=this._parse({data:e,path:n.path,parent:n}),a=await(Ry(i)?i:Promise.resolve(i));return TC(n,a)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,a)=>{let u=e(i),f=()=>a.addIssue({code:Ge.custom,...n(i)});return typeof Promise<"u"&&u instanceof Promise?u.then(m=>m?!0:(f(),!1)):u?!0:(f(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new ed({schema:this,typeName:Je.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return rf.create(this,this._def)}nullable(){return Sm.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return _v.create(this)}promise(){return sg.create(this,this._def)}or(e){return Wg.create([this,e],this._def)}and(e){return Jg.create(this,e,this._def)}transform(e){return new ed({...zr(this._def),schema:this,typeName:Je.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new e_({...zr(this._def),innerType:this,defaultValue:r,typeName:Je.ZodDefault})}brand(){return new Oy({typeName:Je.ZodBranded,type:this,...zr(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new t_({...zr(this._def),innerType:this,catchValue:r,typeName:Je.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Ay.create(this,e)}readonly(){return r_.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},hF=/^c[^\s-]{8,}$/i,mF=/^[0-9a-z]+$/,vF=/^[0-9A-HJKMNP-TV-Z]{26}$/i,gF=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,_F=/^[a-z0-9_-]{21}$/i,yF=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,wF=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,bF=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,SF="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",fE,EF=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,TF=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,xF=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,IF=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,NF=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,CF=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,kC="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",kF=new RegExp(`^${kC}$`);function DC(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function DF(t){return new RegExp(`^${DC(t)}$`)}function RC(t){let e=`${kC}T${DC(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function RF(t,e){return!!((e==="v4"||!e)&&EF.test(t)||(e==="v6"||!e)&&xF.test(t))}function OF(t,e){if(!yF.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function AF(t,e){return!!((e==="v4"||!e)&&TF.test(t)||(e==="v6"||!e)&&IF.test(t))}var ag=class t extends Wr{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ct.string){let a=this._getOrReturnCtx(e);return pt(a,{code:Ge.invalid_type,expected:Ct.string,received:a.parsedType}),Cr}let n=new nc,i;for(let a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),pt(i,{code:Ge.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),pt(i,{code:Ge.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){let u=e.data.length>a.value,f=e.data.length<a.value;(u||f)&&(i=this._getOrReturnCtx(e,i),u?pt(i,{code:Ge.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):f&&pt(i,{code:Ge.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")bF.test(e.data)||(i=this._getOrReturnCtx(e,i),pt(i,{validation:"email",code:Ge.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")fE||(fE=new RegExp(SF,"u")),fE.test(e.data)||(i=this._getOrReturnCtx(e,i),pt(i,{validation:"emoji",code:Ge.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")gF.test(e.data)||(i=this._getOrReturnCtx(e,i),pt(i,{validation:"uuid",code:Ge.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")_F.test(e.data)||(i=this._getOrReturnCtx(e,i),pt(i,{validation:"nanoid",code:Ge.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")hF.test(e.data)||(i=this._getOrReturnCtx(e,i),pt(i,{validation:"cuid",code:Ge.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")mF.test(e.data)||(i=this._getOrReturnCtx(e,i),pt(i,{validation:"cuid2",code:Ge.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")vF.test(e.data)||(i=this._getOrReturnCtx(e,i),pt(i,{validation:"ulid",code:Ge.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),pt(i,{validation:"url",code:Ge.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),pt(i,{validation:"regex",code:Ge.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),pt(i,{code:Ge.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),pt(i,{code:Ge.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),pt(i,{code:Ge.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?RC(a).test(e.data)||(i=this._getOrReturnCtx(e,i),pt(i,{code:Ge.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?kF.test(e.data)||(i=this._getOrReturnCtx(e,i),pt(i,{code:Ge.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?DF(a).test(e.data)||(i=this._getOrReturnCtx(e,i),pt(i,{code:Ge.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?wF.test(e.data)||(i=this._getOrReturnCtx(e,i),pt(i,{validation:"duration",code:Ge.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?RF(e.data,a.version)||(i=this._getOrReturnCtx(e,i),pt(i,{validation:"ip",code:Ge.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?OF(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),pt(i,{validation:"jwt",code:Ge.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?AF(e.data,a.version)||(i=this._getOrReturnCtx(e,i),pt(i,{validation:"cidr",code:Ge.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?NF.test(e.data)||(i=this._getOrReturnCtx(e,i),pt(i,{validation:"base64",code:Ge.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?CF.test(e.data)||(i=this._getOrReturnCtx(e,i),pt(i,{validation:"base64url",code:Ge.invalid_string,message:a.message}),n.dirty()):In.assertNever(a);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:Ge.invalid_string,...$t.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...$t.errToObj(e)})}url(e){return this._addCheck({kind:"url",...$t.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...$t.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...$t.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...$t.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...$t.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...$t.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...$t.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...$t.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...$t.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...$t.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...$t.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...$t.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...$t.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...$t.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...$t.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...$t.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...$t.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...$t.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...$t.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...$t.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...$t.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...$t.errToObj(r)})}nonempty(e){return this.min(1,$t.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ag.create=t=>{var e;return new ag({checks:[],typeName:Je.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...zr(t)})};function PF(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,a=parseInt(t.toFixed(i).replace(".","")),u=parseInt(e.toFixed(i).replace(".",""));return a%u/Math.pow(10,i)}var Yg=class t extends Wr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ct.number){let a=this._getOrReturnCtx(e);return pt(a,{code:Ge.invalid_type,expected:Ct.number,received:a.parsedType}),Cr}let n,i=new nc;for(let a of this._def.checks)a.kind==="int"?In.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),pt(n,{code:Ge.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),pt(n,{code:Ge.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),pt(n,{code:Ge.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?PF(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),pt(n,{code:Ge.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),pt(n,{code:Ge.not_finite,message:a.message}),i.dirty()):In.assertNever(a);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,$t.toString(r))}gt(e,r){return this.setLimit("min",e,!1,$t.toString(r))}lte(e,r){return this.setLimit("max",e,!0,$t.toString(r))}lt(e,r){return this.setLimit("max",e,!1,$t.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:$t.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:$t.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:$t.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:$t.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:$t.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:$t.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:$t.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:$t.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:$t.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:$t.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&In.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Yg.create=t=>new Yg({checks:[],typeName:Je.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...zr(t)});var qg=class t extends Wr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ct.bigint)return this._getInvalidInput(e);let n,i=new nc;for(let a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),pt(n,{code:Ge.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),pt(n,{code:Ge.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),pt(n,{code:Ge.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):In.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return pt(r,{code:Ge.invalid_type,expected:Ct.bigint,received:r.parsedType}),Cr}gte(e,r){return this.setLimit("min",e,!0,$t.toString(r))}gt(e,r){return this.setLimit("min",e,!1,$t.toString(r))}lte(e,r){return this.setLimit("max",e,!0,$t.toString(r))}lt(e,r){return this.setLimit("max",e,!1,$t.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:$t.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:$t.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:$t.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:$t.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:$t.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:$t.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};qg.create=t=>{var e;return new qg({checks:[],typeName:Je.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...zr(t)})};var Hg=class extends Wr{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ct.boolean){let n=this._getOrReturnCtx(e);return pt(n,{code:Ge.invalid_type,expected:Ct.boolean,received:n.parsedType}),Cr}return rl(e.data)}};Hg.create=t=>new Hg({typeName:Je.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...zr(t)});var Vg=class t extends Wr{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ct.date){let a=this._getOrReturnCtx(e);return pt(a,{code:Ge.invalid_type,expected:Ct.date,received:a.parsedType}),Cr}if(isNaN(e.data.getTime())){let a=this._getOrReturnCtx(e);return pt(a,{code:Ge.invalid_date}),Cr}let n=new nc,i;for(let a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),pt(i,{code:Ge.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),pt(i,{code:Ge.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):In.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:$t.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:$t.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Vg.create=t=>new Vg({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Je.ZodDate,...zr(t)});var $_=class extends Wr{_parse(e){if(this._getType(e)!==Ct.symbol){let n=this._getOrReturnCtx(e);return pt(n,{code:Ge.invalid_type,expected:Ct.symbol,received:n.parsedType}),Cr}return rl(e.data)}};$_.create=t=>new $_({typeName:Je.ZodSymbol,...zr(t)});var Gg=class extends Wr{_parse(e){if(this._getType(e)!==Ct.undefined){let n=this._getOrReturnCtx(e);return pt(n,{code:Ge.invalid_type,expected:Ct.undefined,received:n.parsedType}),Cr}return rl(e.data)}};Gg.create=t=>new Gg({typeName:Je.ZodUndefined,...zr(t)});var zg=class extends Wr{_parse(e){if(this._getType(e)!==Ct.null){let n=this._getOrReturnCtx(e);return pt(n,{code:Ge.invalid_type,expected:Ct.null,received:n.parsedType}),Cr}return rl(e.data)}};zg.create=t=>new zg({typeName:Je.ZodNull,...zr(t)});var og=class extends Wr{constructor(){super(...arguments),this._any=!0}_parse(e){return rl(e.data)}};og.create=t=>new og({typeName:Je.ZodAny,...zr(t)});var gv=class extends Wr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return rl(e.data)}};gv.create=t=>new gv({typeName:Je.ZodUnknown,...zr(t)});var bh=class extends Wr{_parse(e){let r=this._getOrReturnCtx(e);return pt(r,{code:Ge.invalid_type,expected:Ct.never,received:r.parsedType}),Cr}};bh.create=t=>new bh({typeName:Je.ZodNever,...zr(t)});var Y_=class extends Wr{_parse(e){if(this._getType(e)!==Ct.undefined){let n=this._getOrReturnCtx(e);return pt(n,{code:Ge.invalid_type,expected:Ct.void,received:n.parsedType}),Cr}return rl(e.data)}};Y_.create=t=>new Y_({typeName:Je.ZodVoid,...zr(t)});var _v=class t extends Wr{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==Ct.array)return pt(r,{code:Ge.invalid_type,expected:Ct.array,received:r.parsedType}),Cr;if(i.exactLength!==null){let u=r.data.length>i.exactLength.value,f=r.data.length<i.exactLength.value;(u||f)&&(pt(r,{code:u?Ge.too_big:Ge.too_small,minimum:f?i.exactLength.value:void 0,maximum:u?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(pt(r,{code:Ge.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(pt(r,{code:Ge.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((u,f)=>i.type._parseAsync(new dp(r,u,r.path,f)))).then(u=>nc.mergeArray(n,u));let a=[...r.data].map((u,f)=>i.type._parseSync(new dp(r,u,r.path,f)));return nc.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:$t.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:$t.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:$t.toString(r)}})}nonempty(e){return this.min(1,e)}};_v.create=(t,e)=>new _v({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Je.ZodArray,...zr(e)});function U_(t){if(t instanceof nf){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=rf.create(U_(n))}return new nf({...t._def,shape:()=>e})}else return t instanceof _v?new _v({...t._def,type:U_(t.element)}):t instanceof rf?rf.create(U_(t.unwrap())):t instanceof Sm?Sm.create(U_(t.unwrap())):t instanceof bm?bm.create(t.items.map(e=>U_(e))):t}var nf=class t extends Wr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=In.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==Ct.object){let y=this._getOrReturnCtx(e);return pt(y,{code:Ge.invalid_type,expected:Ct.object,received:y.parsedType}),Cr}let{status:n,ctx:i}=this._processInputParams(e),{shape:a,keys:u}=this._getCached(),f=[];if(!(this._def.catchall instanceof bh&&this._def.unknownKeys==="strip"))for(let y in i.data)u.includes(y)||f.push(y);let m=[];for(let y of u){let x=a[y],P=i.data[y];m.push({key:{status:"valid",value:y},value:x._parse(new dp(i,P,i.path,y)),alwaysSet:y in i.data})}if(this._def.catchall instanceof bh){let y=this._def.unknownKeys;if(y==="passthrough")for(let x of f)m.push({key:{status:"valid",value:x},value:{status:"valid",value:i.data[x]}});else if(y==="strict")f.length>0&&(pt(i,{code:Ge.unrecognized_keys,keys:f}),n.dirty());else if(y!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let y=this._def.catchall;for(let x of f){let P=i.data[x];m.push({key:{status:"valid",value:x},value:y._parse(new dp(i,P,i.path,x)),alwaysSet:x in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let y=[];for(let x of m){let P=await x.key,V=await x.value;y.push({key:P,value:V,alwaysSet:x.alwaysSet})}return y}).then(y=>nc.mergeObjectSync(n,y)):nc.mergeObjectSync(n,m)}get shape(){return this._def.shape()}strict(e){return $t.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,a,u,f;let m=(u=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,r,n).message)!==null&&u!==void 0?u:n.defaultError;return r.code==="unrecognized_keys"?{message:(f=$t.errToObj(e).message)!==null&&f!==void 0?f:m}:{message:m}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Je.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return In.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return In.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return U_(this)}partial(e){let r={};return In.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return In.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof rf;)a=a._def.innerType;r[n]=a}}),new t({...this._def,shape:()=>r})}keyof(){return OC(In.objectKeys(this.shape))}};nf.create=(t,e)=>new nf({shape:()=>t,unknownKeys:"strip",catchall:bh.create(),typeName:Je.ZodObject,...zr(e)});nf.strictCreate=(t,e)=>new nf({shape:()=>t,unknownKeys:"strict",catchall:bh.create(),typeName:Je.ZodObject,...zr(e)});nf.lazycreate=(t,e)=>new nf({shape:t,unknownKeys:"strip",catchall:bh.create(),typeName:Je.ZodObject,...zr(e)});var Wg=class extends Wr{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(a){for(let f of a)if(f.result.status==="valid")return f.result;for(let f of a)if(f.result.status==="dirty")return r.common.issues.push(...f.ctx.common.issues),f.result;let u=a.map(f=>new tl(f.ctx.common.issues));return pt(r,{code:Ge.invalid_union,unionErrors:u}),Cr}if(r.common.async)return Promise.all(n.map(async a=>{let u={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:u}),ctx:u}})).then(i);{let a,u=[];for(let m of n){let y={...r,common:{...r.common,issues:[]},parent:null},x=m._parseSync({data:r.data,path:r.path,parent:y});if(x.status==="valid")return x;x.status==="dirty"&&!a&&(a={result:x,ctx:y}),y.common.issues.length&&u.push(y.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;let f=u.map(m=>new tl(m));return pt(r,{code:Ge.invalid_union,unionErrors:f}),Cr}}get options(){return this._def.options}};Wg.create=(t,e)=>new Wg({options:t,typeName:Je.ZodUnion,...zr(e)});var mv=t=>t instanceof Kg?mv(t.schema):t instanceof ed?mv(t.innerType()):t instanceof Zg?[t.value]:t instanceof Xg?t.options:t instanceof Qg?In.objectValues(t.enum):t instanceof e_?mv(t._def.innerType):t instanceof Gg?[void 0]:t instanceof zg?[null]:t instanceof rf?[void 0,...mv(t.unwrap())]:t instanceof Sm?[null,...mv(t.unwrap())]:t instanceof Oy||t instanceof r_?mv(t.unwrap()):t instanceof t_?mv(t._def.innerType):[],Gw=class t extends Wr{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ct.object)return pt(r,{code:Ge.invalid_type,expected:Ct.object,received:r.parsedType}),Cr;let n=this.discriminator,i=r.data[n],a=this.optionsMap.get(i);return a?r.common.async?a._parseAsync({data:r.data,path:r.path,parent:r}):a._parseSync({data:r.data,path:r.path,parent:r}):(pt(r,{code:Ge.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Cr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let a of r){let u=mv(a.shape[e]);if(!u.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let f of u){if(i.has(f))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(f)}`);i.set(f,a)}}return new t({typeName:Je.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...zr(n)})}};function mE(t,e){let r=vv(t),n=vv(e);if(t===e)return{valid:!0,data:t};if(r===Ct.object&&n===Ct.object){let i=In.objectKeys(e),a=In.objectKeys(t).filter(f=>i.indexOf(f)!==-1),u={...t,...e};for(let f of a){let m=mE(t[f],e[f]);if(!m.valid)return{valid:!1};u[f]=m.data}return{valid:!0,data:u}}else if(r===Ct.array&&n===Ct.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let a=0;a<t.length;a++){let u=t[a],f=e[a],m=mE(u,f);if(!m.valid)return{valid:!1};i.push(m.data)}return{valid:!0,data:i}}else return r===Ct.date&&n===Ct.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Jg=class extends Wr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(a,u)=>{if(pE(a)||pE(u))return Cr;let f=mE(a.value,u.value);return f.valid?((hE(a)||hE(u))&&r.dirty(),{status:r.value,value:f.data}):(pt(n,{code:Ge.invalid_intersection_types}),Cr)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,u])=>i(a,u)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Jg.create=(t,e,r)=>new Jg({left:t,right:e,typeName:Je.ZodIntersection,...zr(r)});var bm=class t extends Wr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ct.array)return pt(n,{code:Ge.invalid_type,expected:Ct.array,received:n.parsedType}),Cr;if(n.data.length<this._def.items.length)return pt(n,{code:Ge.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Cr;!this._def.rest&&n.data.length>this._def.items.length&&(pt(n,{code:Ge.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let a=[...n.data].map((u,f)=>{let m=this._def.items[f]||this._def.rest;return m?m._parse(new dp(n,u,n.path,f)):null}).filter(u=>!!u);return n.common.async?Promise.all(a).then(u=>nc.mergeArray(r,u)):nc.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};bm.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new bm({items:t,typeName:Je.ZodTuple,rest:null,...zr(e)})};var zw=class t extends Wr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ct.object)return pt(n,{code:Ge.invalid_type,expected:Ct.object,received:n.parsedType}),Cr;let i=[],a=this._def.keyType,u=this._def.valueType;for(let f in n.data)i.push({key:a._parse(new dp(n,f,n.path,f)),value:u._parse(new dp(n,n.data[f],n.path,f)),alwaysSet:f in n.data});return n.common.async?nc.mergeObjectAsync(r,i):nc.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Wr?new t({keyType:e,valueType:r,typeName:Je.ZodRecord,...zr(n)}):new t({keyType:ag.create(),valueType:e,typeName:Je.ZodRecord,...zr(r)})}},q_=class extends Wr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ct.map)return pt(n,{code:Ge.invalid_type,expected:Ct.map,received:n.parsedType}),Cr;let i=this._def.keyType,a=this._def.valueType,u=[...n.data.entries()].map(([f,m],y)=>({key:i._parse(new dp(n,f,n.path,[y,"key"])),value:a._parse(new dp(n,m,n.path,[y,"value"]))}));if(n.common.async){let f=new Map;return Promise.resolve().then(async()=>{for(let m of u){let y=await m.key,x=await m.value;if(y.status==="aborted"||x.status==="aborted")return Cr;(y.status==="dirty"||x.status==="dirty")&&r.dirty(),f.set(y.value,x.value)}return{status:r.value,value:f}})}else{let f=new Map;for(let m of u){let y=m.key,x=m.value;if(y.status==="aborted"||x.status==="aborted")return Cr;(y.status==="dirty"||x.status==="dirty")&&r.dirty(),f.set(y.value,x.value)}return{status:r.value,value:f}}}};q_.create=(t,e,r)=>new q_({valueType:e,keyType:t,typeName:Je.ZodMap,...zr(r)});var H_=class t extends Wr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ct.set)return pt(n,{code:Ge.invalid_type,expected:Ct.set,received:n.parsedType}),Cr;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(pt(n,{code:Ge.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(pt(n,{code:Ge.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let a=this._def.valueType;function u(m){let y=new Set;for(let x of m){if(x.status==="aborted")return Cr;x.status==="dirty"&&r.dirty(),y.add(x.value)}return{status:r.value,value:y}}let f=[...n.data.values()].map((m,y)=>a._parse(new dp(n,m,n.path,y)));return n.common.async?Promise.all(f).then(m=>u(m)):u(f)}min(e,r){return new t({...this._def,minSize:{value:e,message:$t.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:$t.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};H_.create=(t,e)=>new H_({valueType:t,minSize:null,maxSize:null,typeName:Je.ZodSet,...zr(e)});var Ww=class t extends Wr{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ct.function)return pt(r,{code:Ge.invalid_type,expected:Ct.function,received:r.parsedType}),Cr;function n(f,m){return Hw({data:f,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,qw(),B_].filter(y=>!!y),issueData:{code:Ge.invalid_arguments,argumentsError:m}})}function i(f,m){return Hw({data:f,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,qw(),B_].filter(y=>!!y),issueData:{code:Ge.invalid_return_type,returnTypeError:m}})}let a={errorMap:r.common.contextualErrorMap},u=r.data;if(this._def.returns instanceof sg){let f=this;return rl(async function(...m){let y=new tl([]),x=await f._def.args.parseAsync(m,a).catch(G=>{throw y.addIssue(n(m,G)),y}),P=await Reflect.apply(u,this,x);return await f._def.returns._def.type.parseAsync(P,a).catch(G=>{throw y.addIssue(i(P,G)),y})})}else{let f=this;return rl(function(...m){let y=f._def.args.safeParse(m,a);if(!y.success)throw new tl([n(m,y.error)]);let x=Reflect.apply(u,this,y.data),P=f._def.returns.safeParse(x,a);if(!P.success)throw new tl([i(x,P.error)]);return P.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:bm.create(e).rest(gv.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||bm.create([]).rest(gv.create()),returns:r||gv.create(),typeName:Je.ZodFunction,...zr(n)})}},Kg=class extends Wr{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Kg.create=(t,e)=>new Kg({getter:t,typeName:Je.ZodLazy,...zr(e)});var Zg=class extends Wr{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return pt(r,{received:r.data,code:Ge.invalid_literal,expected:this._def.value}),Cr}return{status:"valid",value:e.data}}get value(){return this._def.value}};Zg.create=(t,e)=>new Zg({value:t,typeName:Je.ZodLiteral,...zr(e)});function OC(t,e){return new Xg({values:t,typeName:Je.ZodEnum,...zr(e)})}var Xg=class t extends Wr{constructor(){super(...arguments),ky.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return pt(r,{expected:In.joinValues(n),received:r.parsedType,code:Ge.invalid_type}),Cr}if(Vw(this,ky,"f")||CC(this,ky,new Set(this._def.values),"f"),!Vw(this,ky,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return pt(r,{received:r.data,code:Ge.invalid_enum_value,options:n}),Cr}return rl(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};ky=new WeakMap;Xg.create=OC;var Qg=class extends Wr{constructor(){super(...arguments),Dy.set(this,void 0)}_parse(e){let r=In.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Ct.string&&n.parsedType!==Ct.number){let i=In.objectValues(r);return pt(n,{expected:In.joinValues(i),received:n.parsedType,code:Ge.invalid_type}),Cr}if(Vw(this,Dy,"f")||CC(this,Dy,new Set(In.getValidEnumValues(this._def.values)),"f"),!Vw(this,Dy,"f").has(e.data)){let i=In.objectValues(r);return pt(n,{received:n.data,code:Ge.invalid_enum_value,options:i}),Cr}return rl(e.data)}get enum(){return this._def.values}};Dy=new WeakMap;Qg.create=(t,e)=>new Qg({values:t,typeName:Je.ZodNativeEnum,...zr(e)});var sg=class extends Wr{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ct.promise&&r.common.async===!1)return pt(r,{code:Ge.invalid_type,expected:Ct.promise,received:r.parsedType}),Cr;let n=r.parsedType===Ct.promise?r.data:Promise.resolve(r.data);return rl(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};sg.create=(t,e)=>new sg({type:t,typeName:Je.ZodPromise,...zr(e)});var ed=class extends Wr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Je.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:u=>{pt(n,u),u.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){let u=i.transform(n.data,a);if(n.common.async)return Promise.resolve(u).then(async f=>{if(r.value==="aborted")return Cr;let m=await this._def.schema._parseAsync({data:f,path:n.path,parent:n});return m.status==="aborted"?Cr:m.status==="dirty"||r.value==="dirty"?j_(m.value):m});{if(r.value==="aborted")return Cr;let f=this._def.schema._parseSync({data:u,path:n.path,parent:n});return f.status==="aborted"?Cr:f.status==="dirty"||r.value==="dirty"?j_(f.value):f}}if(i.type==="refinement"){let u=f=>{let m=i.refinement(f,a);if(n.common.async)return Promise.resolve(m);if(m instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return f};if(n.common.async===!1){let f=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return f.status==="aborted"?Cr:(f.status==="dirty"&&r.dirty(),u(f.value),{status:r.value,value:f.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(f=>f.status==="aborted"?Cr:(f.status==="dirty"&&r.dirty(),u(f.value).then(()=>({status:r.value,value:f.value}))))}if(i.type==="transform")if(n.common.async===!1){let u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!$g(u))return u;let f=i.transform(u.value,a);if(f instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:f}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>$g(u)?Promise.resolve(i.transform(u.value,a)).then(f=>({status:r.value,value:f})):u);In.assertNever(i)}};ed.create=(t,e,r)=>new ed({schema:t,typeName:Je.ZodEffects,effect:e,...zr(r)});ed.createWithPreprocess=(t,e,r)=>new ed({schema:e,effect:{type:"preprocess",transform:t},typeName:Je.ZodEffects,...zr(r)});var rf=class extends Wr{_parse(e){return this._getType(e)===Ct.undefined?rl(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};rf.create=(t,e)=>new rf({innerType:t,typeName:Je.ZodOptional,...zr(e)});var Sm=class extends Wr{_parse(e){return this._getType(e)===Ct.null?rl(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Sm.create=(t,e)=>new Sm({innerType:t,typeName:Je.ZodNullable,...zr(e)});var e_=class extends Wr{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===Ct.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};e_.create=(t,e)=>new e_({innerType:t,typeName:Je.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...zr(e)});var t_=class extends Wr{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ry(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new tl(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new tl(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};t_.create=(t,e)=>new t_({innerType:t,typeName:Je.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...zr(e)});var V_=class extends Wr{_parse(e){if(this._getType(e)!==Ct.nan){let n=this._getOrReturnCtx(e);return pt(n,{code:Ge.invalid_type,expected:Ct.nan,received:n.parsedType}),Cr}return{status:"valid",value:e.data}}};V_.create=t=>new V_({typeName:Je.ZodNaN,...zr(t)});var MF=Symbol("zod_brand"),Oy=class extends Wr{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Ay=class t extends Wr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Cr:a.status==="dirty"?(r.dirty(),j_(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Cr:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:Je.ZodPipeline})}},r_=class extends Wr{_parse(e){let r=this._def.innerType._parse(e),n=i=>($g(i)&&(i.value=Object.freeze(i.value)),i);return Ry(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};r_.create=(t,e)=>new r_({innerType:t,typeName:Je.ZodReadonly,...zr(e)});function xC(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function AC(t,e={},r){return t?og.create().superRefine((n,i)=>{var a,u;let f=t(n);if(f instanceof Promise)return f.then(m=>{var y,x;if(!m){let P=xC(e,n),V=(x=(y=P.fatal)!==null&&y!==void 0?y:r)!==null&&x!==void 0?x:!0;i.addIssue({code:"custom",...P,fatal:V})}});if(!f){let m=xC(e,n),y=(u=(a=m.fatal)!==null&&a!==void 0?a:r)!==null&&u!==void 0?u:!0;i.addIssue({code:"custom",...m,fatal:y})}}):og.create()}var LF={object:nf.lazycreate},Je;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Je||(Je={}));var FF=(t,e={message:`Input not instance of ${t.name}`})=>AC(r=>r instanceof t,e),PC=ag.create,MC=Yg.create,UF=V_.create,jF=qg.create,LC=Hg.create,BF=Vg.create,$F=$_.create,YF=Gg.create,qF=zg.create,HF=og.create,VF=gv.create,GF=bh.create,zF=Y_.create,WF=_v.create,JF=nf.create,KF=nf.strictCreate,ZF=Wg.create,XF=Gw.create,QF=Jg.create,e2=bm.create,t2=zw.create,r2=q_.create,n2=H_.create,i2=Ww.create,a2=Kg.create,o2=Zg.create,s2=Xg.create,u2=Qg.create,c2=sg.create,IC=ed.create,l2=rf.create,f2=Sm.create,d2=ed.createWithPreprocess,p2=Ay.create,h2=()=>PC().optional(),m2=()=>MC().optional(),v2=()=>LC().optional(),g2={string:t=>ag.create({...t,coerce:!0}),number:t=>Yg.create({...t,coerce:!0}),boolean:t=>Hg.create({...t,coerce:!0}),bigint:t=>qg.create({...t,coerce:!0}),date:t=>Vg.create({...t,coerce:!0})},_2=Cr,T=Object.freeze({__proto__:null,defaultErrorMap:B_,setErrorMap:dF,getErrorMap:qw,makeIssue:Hw,EMPTY_PATH:pF,addIssueToContext:pt,ParseStatus:nc,INVALID:Cr,DIRTY:j_,OK:rl,isAborted:pE,isDirty:hE,isValid:$g,isAsync:Ry,get util(){return In},get objectUtil(){return dE},ZodParsedType:Ct,getParsedType:vv,ZodType:Wr,datetimeRegex:RC,ZodString:ag,ZodNumber:Yg,ZodBigInt:qg,ZodBoolean:Hg,ZodDate:Vg,ZodSymbol:$_,ZodUndefined:Gg,ZodNull:zg,ZodAny:og,ZodUnknown:gv,ZodNever:bh,ZodVoid:Y_,ZodArray:_v,ZodObject:nf,ZodUnion:Wg,ZodDiscriminatedUnion:Gw,ZodIntersection:Jg,ZodTuple:bm,ZodRecord:zw,ZodMap:q_,ZodSet:H_,ZodFunction:Ww,ZodLazy:Kg,ZodLiteral:Zg,ZodEnum:Xg,ZodNativeEnum:Qg,ZodPromise:sg,ZodEffects:ed,ZodTransformer:ed,ZodOptional:rf,ZodNullable:Sm,ZodDefault:e_,ZodCatch:t_,ZodNaN:V_,BRAND:MF,ZodBranded:Oy,ZodPipeline:Ay,ZodReadonly:r_,custom:AC,Schema:Wr,ZodSchema:Wr,late:LF,get ZodFirstPartyTypeKind(){return Je},coerce:g2,any:HF,array:WF,bigint:jF,boolean:LC,date:BF,discriminatedUnion:XF,effect:IC,enum:s2,function:i2,instanceof:FF,intersection:QF,lazy:a2,literal:o2,map:r2,nan:UF,nativeEnum:u2,never:GF,null:qF,nullable:f2,number:MC,object:JF,oboolean:v2,onumber:m2,optional:l2,ostring:h2,pipeline:p2,preprocess:d2,promise:c2,record:t2,set:n2,strictObject:KF,string:PC,symbol:$F,transformer:IC,tuple:e2,undefined:YF,union:ZF,unknown:VF,void:zF,NEVER:_2,ZodIssueCode:Ge,quotelessJson:fF,ZodError:tl});var y2=T.object({type:T.literal("error"),error:T.object({type:T.string(),message:T.string()})}),FC=ng({errorSchema:y2,errorToMessage:t=>t.error.message});function w2(t){var e;let r=(e=t.tools)!=null&&e.length?t.tools:void 0,n=[],i=new Set;if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:n,betas:i};let a=[];for(let m of r)switch(m.type){case"function":a.push({name:m.name,description:m.description,input_schema:m.parameters});break;case"provider-defined":switch(m.id){case"anthropic.computer_20250124":i.add("computer-use-2025-01-24"),a.push({name:m.name,type:"computer_20250124",display_width_px:m.args.displayWidthPx,display_height_px:m.args.displayHeightPx,display_number:m.args.displayNumber});break;case"anthropic.computer_20241022":i.add("computer-use-2024-10-22"),a.push({name:m.name,type:"computer_20241022",display_width_px:m.args.displayWidthPx,display_height_px:m.args.displayHeightPx,display_number:m.args.displayNumber});break;case"anthropic.text_editor_20250124":i.add("computer-use-2025-01-24"),a.push({name:m.name,type:"text_editor_20250124"});break;case"anthropic.text_editor_20241022":i.add("computer-use-2024-10-22"),a.push({name:m.name,type:"text_editor_20241022"});break;case"anthropic.bash_20250124":i.add("computer-use-2025-01-24"),a.push({name:m.name,type:"bash_20250124"});break;case"anthropic.bash_20241022":i.add("computer-use-2024-10-22"),a.push({name:m.name,type:"bash_20241022"});break;default:n.push({type:"unsupported-tool",tool:m});break}break;default:n.push({type:"unsupported-tool",tool:m});break}let u=t.toolChoice;if(u==null)return{tools:a,tool_choice:void 0,toolWarnings:n,betas:i};let f=u.type;switch(f){case"auto":return{tools:a,tool_choice:{type:"auto"},toolWarnings:n,betas:i};case"required":return{tools:a,tool_choice:{type:"any"},toolWarnings:n,betas:i};case"none":return{tools:void 0,tool_choice:void 0,toolWarnings:n,betas:i};case"tool":return{tools:a,tool_choice:{type:"tool",name:u.toolName},toolWarnings:n,betas:i};default:{let m=f;throw new un({functionality:`Unsupported tool choice type: ${m}`})}}}function b2({prompt:t,sendReasoning:e,warnings:r}){var n,i,a,u;let f=new Set,m=S2(t),y,x=[];function P(V){var G;let Y=V==null?void 0:V.anthropic;return(G=Y==null?void 0:Y.cacheControl)!=null?G:Y==null?void 0:Y.cache_control}for(let V=0;V<m.length;V++){let G=m[V],Y=V===m.length-1,q=G.type;switch(q){case"system":{if(y!=null)throw new un({functionality:"Multiple system messages that are separated by user/assistant messages"});y=G.messages.map(({content:J,providerMetadata:ee})=>({type:"text",text:J,cache_control:P(ee)}));break}case"user":{let J=[];for(let ee of G.messages){let{role:ve,content:ye}=ee;switch(ve){case"user":{for(let ue=0;ue<ye.length;ue++){let _e=ye[ue],Ue=ue===ye.length-1,$e=(n=P(_e.providerMetadata))!=null?n:Ue?P(ee.providerMetadata):void 0;switch(_e.type){case"text":{J.push({type:"text",text:_e.text,cache_control:$e});break}case"image":{if(_e.image instanceof URL)throw new un({functionality:"Image URLs in user messages"});J.push({type:"image",source:{type:"base64",media_type:(i=_e.mimeType)!=null?i:"image/jpeg",data:wh(_e.image)},cache_control:$e});break}case"file":{if(_e.data instanceof URL)throw new un({functionality:"Image URLs in user messages"});if(_e.mimeType!=="application/pdf")throw new un({functionality:"Non-PDF files in user messages"});f.add("pdfs-2024-09-25"),J.push({type:"document",source:{type:"base64",media_type:"application/pdf",data:_e.data},cache_control:$e});break}}}break}case"tool":{for(let ue=0;ue<ye.length;ue++){let _e=ye[ue],Ue=ue===ye.length-1,$e=(a=P(_e.providerMetadata))!=null?a:Ue?P(ee.providerMetadata):void 0,Ke=_e.content!=null?_e.content.map(ct=>{var vt;switch(ct.type){case"text":return{type:"text",text:ct.text,cache_control:void 0};case"image":return{type:"image",source:{type:"base64",media_type:(vt=ct.mimeType)!=null?vt:"image/jpeg",data:ct.data},cache_control:void 0}}}):JSON.stringify(_e.result);J.push({type:"tool_result",tool_use_id:_e.toolCallId,content:Ke,is_error:_e.isError,cache_control:$e})}break}default:{let ue=ve;throw new Error(`Unsupported role: ${ue}`)}}}x.push({role:"user",content:J});break}case"assistant":{let J=[];for(let ee=0;ee<G.messages.length;ee++){let ve=G.messages[ee],ye=ee===G.messages.length-1,{content:ue}=ve;for(let _e=0;_e<ue.length;_e++){let Ue=ue[_e],$e=_e===ue.length-1,Ke=(u=P(Ue.providerMetadata))!=null?u:$e?P(ve.providerMetadata):void 0;switch(Ue.type){case"text":{J.push({type:"text",text:Y&&ye&&$e?Ue.text.trim():Ue.text,cache_control:Ke});break}case"reasoning":{e?J.push({type:"thinking",thinking:Ue.text,signature:Ue.signature,cache_control:Ke}):r.push({type:"other",message:"sending reasoning content is disabled for this model"});break}case"redacted-reasoning":{J.push({type:"redacted_thinking",data:Ue.data,cache_control:Ke});break}case"tool-call":{J.push({type:"tool_use",id:Ue.toolCallId,name:Ue.toolName,input:Ue.args,cache_control:Ke});break}default:{let ct=Ue;throw new Error(`Unsupported part: ${ct}`)}}}}x.push({role:"assistant",content:J});break}default:{let J=q;throw new Error(`Unsupported type: ${J}`)}}}return{prompt:{system:y,messages:x},betas:f}}function S2(t){let e=[],r;for(let n of t){let{role:i}=n;switch(i){case"system":{(r==null?void 0:r.type)!=="system"&&(r={type:"system",messages:[]},e.push(r)),r.messages.push(n);break}case"assistant":{(r==null?void 0:r.type)!=="assistant"&&(r={type:"assistant",messages:[]},e.push(r)),r.messages.push(n);break}case"user":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},e.push(r)),r.messages.push(n);break}case"tool":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},e.push(r)),r.messages.push(n);break}default:{let a=i;throw new Error(`Unsupported role: ${a}`)}}}return e}function UC(t){switch(t){case"end_turn":case"stop_sequence":return"stop";case"tool_use":return"tool-calls";case"max_tokens":return"length";default:return"unknown"}}var E2=class{constructor(t,e,r){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.supportsImageUrls=!1,this.modelId=t,this.settings=e,this.config=r}get provider(){return this.config.provider}async getArgs({mode:t,prompt:e,maxTokens:r=4096,temperature:n,topP:i,topK:a,frequencyPenalty:u,presencePenalty:f,stopSequences:m,responseFormat:y,seed:x,providerMetadata:P}){var V,G,Y,q;let J=t.type,ee=[];u!=null&&ee.push({type:"unsupported-setting",setting:"frequencyPenalty"}),f!=null&&ee.push({type:"unsupported-setting",setting:"presencePenalty"}),x!=null&&ee.push({type:"unsupported-setting",setting:"seed"}),y!=null&&y.type!=="text"&&ee.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:ve,betas:ye}=b2({prompt:e,sendReasoning:(V=this.settings.sendReasoning)!=null?V:!0,warnings:ee}),ue=I2.safeParse((G=P==null?void 0:P.anthropic)==null?void 0:G.thinking);if(!ue.success)throw new Lw({argument:"providerOptions.anthropic.thinking",message:"invalid thinking options",cause:ue.error});let _e=((Y=ue.data)==null?void 0:Y.type)==="enabled",Ue=(q=ue.data)==null?void 0:q.budgetTokens,$e={model:this.modelId,max_tokens:r,temperature:n,top_k:a,top_p:i,stop_sequences:m,..._e&&{thinking:{type:"enabled",budget_tokens:Ue}},system:ve.system,messages:ve.messages};if(_e){if(Ue==null)throw new un({functionality:"thinking requires a budget"});$e.temperature!=null&&($e.temperature=void 0,ee.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported when thinking is enabled"})),a!=null&&($e.top_k=void 0,ee.push({type:"unsupported-setting",setting:"topK",details:"topK is not supported when thinking is enabled"})),i!=null&&($e.top_p=void 0,ee.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported when thinking is enabled"})),$e.max_tokens=r+Ue}switch(J){case"regular":{let{tools:Ke,tool_choice:ct,toolWarnings:vt,betas:wr}=w2(t);return{args:{...$e,tools:Ke,tool_choice:ct},warnings:[...ee,...vt],betas:new Set([...ye,...wr])}}case"object-json":throw new un({functionality:"json-mode object generation"});case"object-tool":{let{name:Ke,description:ct,parameters:vt}=t.tool;return{args:{...$e,tools:[{name:Ke,description:ct,input_schema:vt}],tool_choice:{type:"tool",name:Ke}},warnings:ee,betas:ye}}default:{let Ke=J;throw new Error(`Unsupported type: ${Ke}`)}}}async getHeaders({betas:t,headers:e}){return ko(await Bg(this.config.headers),t.size>0?{"anthropic-beta":Array.from(t).join(",")}:{},e)}buildRequestUrl(t){var e,r,n;return(n=(r=(e=this.config).buildRequestUrl)==null?void 0:r.call(e,this.config.baseURL,t))!=null?n:`${this.config.baseURL}/messages`}transformRequestBody(t){var e,r,n;return(n=(r=(e=this.config).transformRequestBody)==null?void 0:r.call(e,t))!=null?n:t}async doGenerate(t){var e,r,n,i;let{args:a,warnings:u,betas:f}=await this.getArgs(t),{responseHeaders:m,value:y}=await lo({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:f,headers:t.headers}),body:this.transformRequestBody(a),failedResponseHandler:FC,successfulResponseHandler:rc(T2),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:x,...P}=a,V="";for(let q of y.content)q.type==="text"&&(V+=q.text);let G;if(y.content.some(q=>q.type==="tool_use")){G=[];for(let q of y.content)q.type==="tool_use"&&G.push({toolCallType:"function",toolCallId:q.id,toolName:q.name,args:JSON.stringify(q.input)})}let Y=y.content.filter(q=>q.type==="redacted_thinking"||q.type==="thinking").map(q=>q.type==="thinking"?{type:"text",text:q.thinking,signature:q.signature}:{type:"redacted",data:q.data});return{text:V,reasoning:Y.length>0?Y:void 0,toolCalls:G,finishReason:UC(y.stop_reason),usage:{promptTokens:y.usage.input_tokens,completionTokens:y.usage.output_tokens},rawCall:{rawPrompt:x,rawSettings:P},rawResponse:{headers:m},response:{id:(e=y.id)!=null?e:void 0,modelId:(r=y.model)!=null?r:void 0},warnings:u,providerMetadata:{anthropic:{cacheCreationInputTokens:(n=y.usage.cache_creation_input_tokens)!=null?n:null,cacheReadInputTokens:(i=y.usage.cache_read_input_tokens)!=null?i:null}},request:{body:JSON.stringify(a)}}}async doStream(t){let{args:e,warnings:r,betas:n}=await this.getArgs(t),i={...e,stream:!0},{responseHeaders:a,value:u}=await lo({url:this.buildRequestUrl(!0),headers:await this.getHeaders({betas:n,headers:t.headers}),body:this.transformRequestBody(i),failedResponseHandler:FC,successfulResponseHandler:wm(x2),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:f,...m}=e,y="unknown",x={promptTokens:Number.NaN,completionTokens:Number.NaN},P={},V,G;return{stream:u.pipeThrough(new TransformStream({transform(Y,q){var J,ee,ve,ye;if(!Y.success){q.enqueue({type:"error",error:Y.error});return}let ue=Y.value;switch(ue.type){case"ping":return;case"content_block_start":{let _e=ue.content_block.type;switch(G=_e,_e){case"text":case"thinking":return;case"redacted_thinking":{q.enqueue({type:"redacted-reasoning",data:ue.content_block.data});return}case"tool_use":{P[ue.index]={toolCallId:ue.content_block.id,toolName:ue.content_block.name,jsonText:""};return}default:{let Ue=_e;throw new Error(`Unsupported content block type: ${Ue}`)}}}case"content_block_stop":{if(P[ue.index]!=null){let _e=P[ue.index];q.enqueue({type:"tool-call",toolCallType:"function",toolCallId:_e.toolCallId,toolName:_e.toolName,args:_e.jsonText}),delete P[ue.index]}G=void 0;return}case"content_block_delta":{let _e=ue.delta.type;switch(_e){case"text_delta":{q.enqueue({type:"text-delta",textDelta:ue.delta.text});return}case"thinking_delta":{q.enqueue({type:"reasoning",textDelta:ue.delta.thinking});return}case"signature_delta":{G==="thinking"&&q.enqueue({type:"reasoning-signature",signature:ue.delta.signature});return}case"input_json_delta":{let Ue=P[ue.index];q.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Ue.toolCallId,toolName:Ue.toolName,argsTextDelta:ue.delta.partial_json}),Ue.jsonText+=ue.delta.partial_json;return}default:{let Ue=_e;throw new Error(`Unsupported delta type: ${Ue}`)}}}case"message_start":{x.promptTokens=ue.message.usage.input_tokens,x.completionTokens=ue.message.usage.output_tokens,V={anthropic:{cacheCreationInputTokens:(J=ue.message.usage.cache_creation_input_tokens)!=null?J:null,cacheReadInputTokens:(ee=ue.message.usage.cache_read_input_tokens)!=null?ee:null}},q.enqueue({type:"response-metadata",id:(ve=ue.message.id)!=null?ve:void 0,modelId:(ye=ue.message.model)!=null?ye:void 0});return}case"message_delta":{x.completionTokens=ue.usage.output_tokens,y=UC(ue.delta.stop_reason);return}case"message_stop":{q.enqueue({type:"finish",finishReason:y,usage:x,providerMetadata:V});return}case"error":{q.enqueue({type:"error",error:ue.error});return}default:{let _e=ue;throw new Error(`Unsupported chunk type: ${_e}`)}}}})),rawCall:{rawPrompt:f,rawSettings:m},rawResponse:{headers:a},warnings:r,request:{body:JSON.stringify(i)}}}},T2=T.object({type:T.literal("message"),id:T.string().nullish(),model:T.string().nullish(),content:T.array(T.discriminatedUnion("type",[T.object({type:T.literal("text"),text:T.string()}),T.object({type:T.literal("thinking"),thinking:T.string(),signature:T.string()}),T.object({type:T.literal("redacted_thinking"),data:T.string()}),T.object({type:T.literal("tool_use"),id:T.string(),name:T.string(),input:T.unknown()})])),stop_reason:T.string().nullish(),usage:T.object({input_tokens:T.number(),output_tokens:T.number(),cache_creation_input_tokens:T.number().nullish(),cache_read_input_tokens:T.number().nullish()})}),x2=T.discriminatedUnion("type",[T.object({type:T.literal("message_start"),message:T.object({id:T.string().nullish(),model:T.string().nullish(),usage:T.object({input_tokens:T.number(),output_tokens:T.number(),cache_creation_input_tokens:T.number().nullish(),cache_read_input_tokens:T.number().nullish()})})}),T.object({type:T.literal("content_block_start"),index:T.number(),content_block:T.discriminatedUnion("type",[T.object({type:T.literal("text"),text:T.string()}),T.object({type:T.literal("thinking"),thinking:T.string()}),T.object({type:T.literal("tool_use"),id:T.string(),name:T.string()}),T.object({type:T.literal("redacted_thinking"),data:T.string()})])}),T.object({type:T.literal("content_block_delta"),index:T.number(),delta:T.discriminatedUnion("type",[T.object({type:T.literal("input_json_delta"),partial_json:T.string()}),T.object({type:T.literal("text_delta"),text:T.string()}),T.object({type:T.literal("thinking_delta"),thinking:T.string()}),T.object({type:T.literal("signature_delta"),signature:T.string()})])}),T.object({type:T.literal("content_block_stop"),index:T.number()}),T.object({type:T.literal("error"),error:T.object({type:T.string(),message:T.string()})}),T.object({type:T.literal("message_delta"),delta:T.object({stop_reason:T.string().nullish()}),usage:T.object({output_tokens:T.number()})}),T.object({type:T.literal("message_stop")}),T.object({type:T.literal("ping")})]),I2=T.object({type:T.union([T.literal("enabled"),T.literal("disabled")]),budgetTokens:T.number().optional()}).optional(),N2=T.object({command:T.string(),restart:T.boolean().optional()});function C2(t={}){return{type:"provider-defined",id:"anthropic.bash_20241022",args:{},parameters:N2,execute:t.execute,experimental_toToolResultContent:t.experimental_toToolResultContent}}var k2=T.object({command:T.string(),restart:T.boolean().optional()});function D2(t={}){return{type:"provider-defined",id:"anthropic.bash_20250124",args:{},parameters:k2,execute:t.execute,experimental_toToolResultContent:t.experimental_toToolResultContent}}var R2=T.object({command:T.enum(["view","create","str_replace","insert","undo_edit"]),path:T.string(),file_text:T.string().optional(),insert_line:T.number().int().optional(),new_str:T.string().optional(),old_str:T.string().optional(),view_range:T.array(T.number().int()).optional()});function O2(t={}){return{type:"provider-defined",id:"anthropic.text_editor_20241022",args:{},parameters:R2,execute:t.execute,experimental_toToolResultContent:t.experimental_toToolResultContent}}var A2=T.object({command:T.enum(["view","create","str_replace","insert","undo_edit"]),path:T.string(),file_text:T.string().optional(),insert_line:T.number().int().optional(),new_str:T.string().optional(),old_str:T.string().optional(),view_range:T.array(T.number().int()).optional()});function P2(t={}){return{type:"provider-defined",id:"anthropic.text_editor_20250124",args:{},parameters:A2,execute:t.execute,experimental_toToolResultContent:t.experimental_toToolResultContent}}var M2=T.object({action:T.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:T.array(T.number().int()).optional(),text:T.string().optional()});function L2(t){return{type:"provider-defined",id:"anthropic.computer_20241022",args:{displayWidthPx:t.displayWidthPx,displayHeightPx:t.displayHeightPx,displayNumber:t.displayNumber},parameters:M2,execute:t.execute,experimental_toToolResultContent:t.experimental_toToolResultContent}}var F2=T.object({action:T.enum(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot"]),coordinate:T.tuple([T.number().int(),T.number().int()]).optional(),duration:T.number().optional(),scroll_amount:T.number().optional(),scroll_direction:T.enum(["up","down","left","right"]).optional(),start_coordinate:T.tuple([T.number().int(),T.number().int()]).optional(),text:T.string().optional()});function U2(t){return{type:"provider-defined",id:"anthropic.computer_20250124",args:{displayWidthPx:t.displayWidthPx,displayHeightPx:t.displayHeightPx,displayNumber:t.displayNumber},parameters:F2,execute:t.execute,experimental_toToolResultContent:t.experimental_toToolResultContent}}var j2={bash_20241022:C2,bash_20250124:D2,textEditor_20241022:O2,textEditor_20250124:P2,computer_20241022:L2,computer_20250124:U2};function vE(t={}){var e;let r=(e=ig(t.baseURL))!=null?e:"https://api.anthropic.com/v1",n=()=>({"anthropic-version":"2023-06-01","x-api-key":rg({apiKey:t.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...t.headers}),i=(u,f={})=>new E2(u,f,{provider:"anthropic.messages",baseURL:r,headers:n,fetch:t.fetch}),a=function(u,f){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return i(u,f)};return a.languageModel=i,a.chat=i,a.messages=i,a.textEmbeddingModel=u=>{throw new Iy({modelId:u,modelType:"textEmbeddingModel"})},a.tools=j2,a}var D6=vE();function Py(t){var e,r;return(r=(e=t==null?void 0:t.providerMetadata)==null?void 0:e.openaiCompatible)!=null?r:{}}function B2(t){let e=[];for(let{role:r,content:n,...i}of t){let a=Py({...i});switch(r){case"system":{e.push({role:"system",content:n,...a});break}case"user":{if(n.length===1&&n[0].type==="text"){e.push({role:"user",content:n[0].text,...Py(n[0])});break}e.push({role:"user",content:n.map(u=>{var f;let m=Py(u);switch(u.type){case"text":return{type:"text",text:u.text,...m};case"image":return{type:"image_url",image_url:{url:u.image instanceof URL?u.image.toString():`data:${(f=u.mimeType)!=null?f:"image/jpeg"};base64,${wh(u.image)}`},...m};case"file":throw new un({functionality:"File content parts in user messages"})}}),...a});break}case"assistant":{let u="",f=[];for(let m of n){let y=Py(m);switch(m.type){case"text":{u+=m.text;break}case"redacted-reasoning":case"reasoning":break;case"tool-call":{f.push({id:m.toolCallId,type:"function",function:{name:m.toolName,arguments:JSON.stringify(m.args)},...y});break}default:{let x=m;throw new Error(`Unsupported part: ${x}`)}}}e.push({role:"assistant",content:u,tool_calls:f.length>0?f:void 0,...a});break}case"tool":{for(let u of n){let f=Py(u);e.push({role:"tool",tool_call_id:u.toolCallId,content:JSON.stringify(u.result),...f})}break}default:{let u=r;throw new Error(`Unsupported role: ${u}`)}}}return e}function jC({id:t,model:e,created:r}){return{id:t??void 0,modelId:e??void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function BC(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var $2=T.object({error:T.object({message:T.string(),type:T.string().nullish(),param:T.any().nullish(),code:T.union([T.string(),T.number()]).nullish()})}),Y2={errorSchema:$2,errorToMessage:t=>t.error.message};function q2({mode:t,structuredOutputs:e}){var r;let n=(r=t.tools)!=null&&r.length?t.tools:void 0,i=[];if(n==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};let a=t.toolChoice,u=[];for(let m of n)m.type==="provider-defined"?i.push({type:"unsupported-tool",tool:m}):u.push({type:"function",function:{name:m.name,description:m.description,parameters:m.parameters}});if(a==null)return{tools:u,tool_choice:void 0,toolWarnings:i};let f=a.type;switch(f){case"auto":case"none":case"required":return{tools:u,tool_choice:f,toolWarnings:i};case"tool":return{tools:u,tool_choice:{type:"function",function:{name:a.toolName}},toolWarnings:i};default:{let m=f;throw new un({functionality:`Unsupported tool choice type: ${m}`})}}}var $C=class{constructor(t,e,r){this.specificationVersion="v1";var n,i;this.modelId=t,this.settings=e,this.config=r;let a=(n=r.errorStructure)!=null?n:Y2;this.chunkSchema=V2(a.errorSchema),this.failedResponseHandler=ng(a),this.supportsStructuredOutputs=(i=r.supportsStructuredOutputs)!=null?i:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:t,prompt:e,maxTokens:r,temperature:n,topP:i,topK:a,frequencyPenalty:u,presencePenalty:f,providerMetadata:m,stopSequences:y,responseFormat:x,seed:P}){var V,G;let Y=t.type,q=[];a!=null&&q.push({type:"unsupported-setting",setting:"topK"}),(x==null?void 0:x.type)==="json"&&x.schema!=null&&!this.supportsStructuredOutputs&&q.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let J={model:this.modelId,user:this.settings.user,max_tokens:r,temperature:n,top_p:i,frequency_penalty:u,presence_penalty:f,response_format:(x==null?void 0:x.type)==="json"?this.supportsStructuredOutputs===!0&&x.schema!=null?{type:"json_schema",json_schema:{schema:x.schema,name:(V=x.name)!=null?V:"response",description:x.description}}:{type:"json_object"}:void 0,stop:y,seed:P,...m==null?void 0:m[this.providerOptionsName],messages:B2(e)};switch(Y){case"regular":{let{tools:ee,tool_choice:ve,toolWarnings:ye}=q2({mode:t,structuredOutputs:this.supportsStructuredOutputs});return{args:{...J,tools:ee,tool_choice:ve},warnings:[...q,...ye]}}case"object-json":return{args:{...J,response_format:this.supportsStructuredOutputs===!0&&t.schema!=null?{type:"json_schema",json_schema:{schema:t.schema,name:(G=t.name)!=null?G:"response",description:t.description}}:{type:"json_object"}},warnings:q};case"object-tool":return{args:{...J,tool_choice:{type:"function",function:{name:t.tool.name}},tools:[{type:"function",function:{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters}}]},warnings:q};default:{let ee=Y;throw new Error(`Unsupported type: ${ee}`)}}}async doGenerate(t){var e,r,n,i,a,u,f,m,y;let{args:x,warnings:P}=this.getArgs({...t}),V=JSON.stringify(x),{responseHeaders:G,value:Y,rawValue:q}=await lo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:ko(this.config.headers(),t.headers),body:x,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:rc(H2),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:J,...ee}=x,ve=Y.choices[0],ye=(r=(e=this.config.metadataExtractor)==null?void 0:e.extractMetadata)==null?void 0:r.call(e,{parsedBody:q});return{text:(n=ve.message.content)!=null?n:void 0,reasoning:(i=ve.message.reasoning_content)!=null?i:void 0,toolCalls:(a=ve.message.tool_calls)==null?void 0:a.map(ue=>{var _e;return{toolCallType:"function",toolCallId:(_e=ue.id)!=null?_e:el(),toolName:ue.function.name,args:ue.function.arguments}}),finishReason:BC(ve.finish_reason),usage:{promptTokens:(f=(u=Y.usage)==null?void 0:u.prompt_tokens)!=null?f:NaN,completionTokens:(y=(m=Y.usage)==null?void 0:m.completion_tokens)!=null?y:NaN},...ye&&{providerMetadata:ye},rawCall:{rawPrompt:J,rawSettings:ee},rawResponse:{headers:G},response:jC(Y),warnings:P,request:{body:V}}}async doStream(t){var e;if(this.settings.simulateStreaming){let Y=await this.doGenerate(t);return{stream:new ReadableStream({start(J){if(J.enqueue({type:"response-metadata",...Y.response}),Y.reasoning)if(Array.isArray(Y.reasoning))for(let ee of Y.reasoning)ee.type==="text"&&J.enqueue({type:"reasoning",textDelta:ee.text});else J.enqueue({type:"reasoning",textDelta:Y.reasoning});if(Y.text&&J.enqueue({type:"text-delta",textDelta:Y.text}),Y.toolCalls)for(let ee of Y.toolCalls)J.enqueue({type:"tool-call",...ee});J.enqueue({type:"finish",finishReason:Y.finishReason,usage:Y.usage,logprobs:Y.logprobs,providerMetadata:Y.providerMetadata}),J.close()}}),rawCall:Y.rawCall,rawResponse:Y.rawResponse,warnings:Y.warnings}}let{args:r,warnings:n}=this.getArgs({...t}),i=JSON.stringify({...r,stream:!0}),a=(e=this.config.metadataExtractor)==null?void 0:e.createStreamExtractor(),{responseHeaders:u,value:f}=await lo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:ko(this.config.headers(),t.headers),body:{...r,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:wm(this.chunkSchema),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:m,...y}=r,x=[],P="unknown",V={promptTokens:void 0,completionTokens:void 0},G=!0;return{stream:f.pipeThrough(new TransformStream({transform(Y,q){var J,ee,ve,ye,ue,_e,Ue,$e,Ke,ct,vt,wr,$r,Ne;if(!Y.success){P="error",q.enqueue({type:"error",error:Y.error});return}let dt=Y.value;if(a==null||a.processChunk(Y.rawValue),"error"in dt){P="error",q.enqueue({type:"error",error:dt.error.message});return}G&&(G=!1,q.enqueue({type:"response-metadata",...jC(dt)})),dt.usage!=null&&(V={promptTokens:(J=dt.usage.prompt_tokens)!=null?J:void 0,completionTokens:(ee=dt.usage.completion_tokens)!=null?ee:void 0});let Or=dt.choices[0];if((Or==null?void 0:Or.finish_reason)!=null&&(P=BC(Or.finish_reason)),(Or==null?void 0:Or.delta)==null)return;let Ze=Or.delta;if(Ze.reasoning_content!=null&&q.enqueue({type:"reasoning",textDelta:Ze.reasoning_content}),Ze.content!=null&&q.enqueue({type:"text-delta",textDelta:Ze.content}),Ze.tool_calls!=null)for(let yn of Ze.tool_calls){let Le=yn.index;if(x[Le]==null){if(yn.type!=="function")throw new pv({data:yn,message:"Expected 'function' type."});if(yn.id==null)throw new pv({data:yn,message:"Expected 'id' to be a string."});if(((ve=yn.function)==null?void 0:ve.name)==null)throw new pv({data:yn,message:"Expected 'function.name' to be a string."});x[Le]={id:yn.id,type:"function",function:{name:yn.function.name,arguments:(ye=yn.function.arguments)!=null?ye:""},hasFinished:!1};let Wt=x[Le];((ue=Wt.function)==null?void 0:ue.name)!=null&&((_e=Wt.function)==null?void 0:_e.arguments)!=null&&(Wt.function.arguments.length>0&&q.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Wt.id,toolName:Wt.function.name,argsTextDelta:Wt.function.arguments}),F_(Wt.function.arguments)&&(q.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Ue=Wt.id)!=null?Ue:el(),toolName:Wt.function.name,args:Wt.function.arguments}),Wt.hasFinished=!0));continue}let qt=x[Le];qt.hasFinished||((($e=yn.function)==null?void 0:$e.arguments)!=null&&(qt.function.arguments+=(ct=(Ke=yn.function)==null?void 0:Ke.arguments)!=null?ct:""),q.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:qt.id,toolName:qt.function.name,argsTextDelta:(vt=yn.function.arguments)!=null?vt:""}),((wr=qt.function)==null?void 0:wr.name)!=null&&(($r=qt.function)==null?void 0:$r.arguments)!=null&&F_(qt.function.arguments)&&(q.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Ne=qt.id)!=null?Ne:el(),toolName:qt.function.name,args:qt.function.arguments}),qt.hasFinished=!0))}},flush(Y){var q,J;let ee=a==null?void 0:a.buildMetadata();Y.enqueue({type:"finish",finishReason:P,usage:{promptTokens:(q=V.promptTokens)!=null?q:NaN,completionTokens:(J=V.completionTokens)!=null?J:NaN},...ee&&{providerMetadata:ee}})}})),rawCall:{rawPrompt:m,rawSettings:y},rawResponse:{headers:u},warnings:n,request:{body:i}}}},H2=T.object({id:T.string().nullish(),created:T.number().nullish(),model:T.string().nullish(),choices:T.array(T.object({message:T.object({role:T.literal("assistant").nullish(),content:T.string().nullish(),reasoning_content:T.string().nullish(),tool_calls:T.array(T.object({id:T.string().nullish(),type:T.literal("function"),function:T.object({name:T.string(),arguments:T.string()})})).nullish()}),finish_reason:T.string().nullish()})),usage:T.object({prompt_tokens:T.number().nullish(),completion_tokens:T.number().nullish()}).nullish()}),V2=t=>T.union([T.object({id:T.string().nullish(),created:T.number().nullish(),model:T.string().nullish(),choices:T.array(T.object({delta:T.object({role:T.enum(["assistant"]).nullish(),content:T.string().nullish(),reasoning_content:T.string().nullish(),tool_calls:T.array(T.object({index:T.number(),id:T.string().nullish(),type:T.literal("function").optional(),function:T.object({name:T.string().nullish(),arguments:T.string().nullish()})})).nullish()}).nullish(),finish_reason:T.string().nullish()})),usage:T.object({prompt_tokens:T.number().nullish(),completion_tokens:T.number().nullish()}).nullish()}),t]);var $6=T.object({id:T.string().nullish(),created:T.number().nullish(),model:T.string().nullish(),choices:T.array(T.object({text:T.string(),finish_reason:T.string()})),usage:T.object({prompt_tokens:T.number(),completion_tokens:T.number()}).nullish()});var q6=T.object({data:T.array(T.object({embedding:T.array(T.number())})),usage:T.object({prompt_tokens:T.number()}).nullish()});var YC=t=>{var e,r;return t==null?void 0:{deepseek:{promptCacheHitTokens:(e=t.prompt_cache_hit_tokens)!=null?e:NaN,promptCacheMissTokens:(r=t.prompt_cache_miss_tokens)!=null?r:NaN}}},G2={extractMetadata:({parsedBody:t})=>{let e=yh({value:t,schema:z2});return!e.success||e.value.usage==null?void 0:YC(e.value.usage)},createStreamExtractor:()=>{let t;return{processChunk:e=>{var r,n;let i=yh({value:e,schema:W2});i.success&&((n=(r=i.value.choices)==null?void 0:r[0])==null?void 0:n.finish_reason)==="stop"&&i.value.usage&&(t=i.value.usage)},buildMetadata:()=>YC(t)}}},qC=T.object({prompt_cache_hit_tokens:T.number().nullish(),prompt_cache_miss_tokens:T.number().nullish()}),z2=T.object({usage:qC.nullish()}),W2=T.object({choices:T.array(T.object({finish_reason:T.string().nullish()})).nullish(),usage:qC.nullish()});function gE(t={}){var e;let r=ig((e=t.baseURL)!=null?e:"https://api.deepseek.com/v1"),n=()=>({Authorization:`Bearer ${rg({apiKey:t.apiKey,environmentVariableName:"DEEPSEEK_API_KEY",description:"DeepSeek API key"})}`,...t.headers}),i=(u,f={})=>new $C(u,f,{provider:"deepseek.chat",url:({path:m})=>`${r}${m}`,headers:n,fetch:t.fetch,defaultObjectGenerationMode:"json",metadataExtractor:G2}),a=(u,f)=>i(u,f);return a.languageModel=i,a.chat=i,a.textEmbeddingModel=u=>{throw new Iy({modelId:u,modelType:"textEmbeddingModel"})},a}var Z6=gE();function pp(t){if(J2(t))return;if(typeof t=="boolean")return{type:"boolean",properties:{}};let{type:e,description:r,required:n,properties:i,items:a,allOf:u,anyOf:f,oneOf:m,format:y,const:x,minLength:P,enum:V}=t,G={};if(r&&(G.description=r),n&&(G.required=n),y&&(G.format=y),x!==void 0&&(G.enum=[x]),e&&(Array.isArray(e)?e.includes("null")?(G.type=e.filter(Y=>Y!=="null")[0],G.nullable=!0):G.type=e:e==="null"?G.type="null":G.type=e),V!==void 0&&(G.enum=V),i!=null&&(G.properties=Object.entries(i).reduce((Y,[q,J])=>(Y[q]=pp(J),Y),{})),a&&(G.items=Array.isArray(a)?a.map(pp):pp(a)),u&&(G.allOf=u.map(pp)),f)if(f.some(Y=>typeof Y=="object"&&(Y==null?void 0:Y.type)==="null")){let Y=f.filter(q=>!(typeof q=="object"&&(q==null?void 0:q.type)==="null"));if(Y.length===1){let q=pp(Y[0]);typeof q=="object"&&(G.nullable=!0,Object.assign(G,q))}else G.anyOf=Y.map(pp),G.nullable=!0}else G.anyOf=f.map(pp);return m&&(G.oneOf=m.map(pp)),P!==void 0&&(G.minLength=P),G}function J2(t){return t!=null&&typeof t=="object"&&t.type==="object"&&(t.properties==null||Object.keys(t.properties).length===0)}function K2(t){var e,r;let n=[],i=[],a=!0;for(let{role:u,content:f}of t)switch(u){case"system":{if(!a)throw new un({functionality:"system messages are only supported at the beginning of the conversation"});n.push({text:f});break}case"user":{a=!1;let m=[];for(let y of f)switch(y.type){case"text":{m.push({text:y.text});break}case"image":{m.push(y.image instanceof URL?{fileData:{mimeType:(e=y.mimeType)!=null?e:"image/jpeg",fileUri:y.image.toString()}}:{inlineData:{mimeType:(r=y.mimeType)!=null?r:"image/jpeg",data:wh(y.image)}});break}case"file":{m.push(y.data instanceof URL?{fileData:{mimeType:y.mimeType,fileUri:y.data.toString()}}:{inlineData:{mimeType:y.mimeType,data:y.data}});break}default:{let x=y;throw new un({functionality:`prompt part: ${x}`})}}i.push({role:"user",parts:m});break}case"assistant":{a=!1,i.push({role:"model",parts:f.map(m=>{switch(m.type){case"text":return m.text.length===0?void 0:{text:m.text};case"tool-call":return{functionCall:{name:m.toolName,args:m.args}}}}).filter(m=>m!==void 0)});break}case"tool":{a=!1,i.push({role:"user",parts:f.map(m=>({functionResponse:{name:m.toolName,response:{name:m.toolName,content:m.result}}}))});break}default:{let m=u;throw new Error(`Unsupported role: ${m}`)}}return{systemInstruction:n.length>0?{parts:n}:void 0,contents:i}}function HC(t){return t.includes("/")?t:`models/${t}`}var Z2=T.object({error:T.object({code:T.number().nullable(),message:T.string(),status:T.string()})}),_E=ng({errorSchema:Z2,errorToMessage:t=>t.error.message});function X2(t,e,r){var n,i;let a=(n=t.tools)!=null&&n.length?t.tools:void 0,u=[];if(e)return{tools:r?{googleSearch:{}}:{googleSearchRetrieval:{}},toolConfig:void 0,toolWarnings:u};if(a==null)return{tools:void 0,toolConfig:void 0,toolWarnings:u};let f=[];for(let x of a)x.type==="provider-defined"?u.push({type:"unsupported-tool",tool:x}):f.push({name:x.name,description:(i=x.description)!=null?i:"",parameters:pp(x.parameters)});let m=t.toolChoice;if(m==null)return{tools:{functionDeclarations:f},toolConfig:void 0,toolWarnings:u};let y=m.type;switch(y){case"auto":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:u};case"none":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:u};case"required":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:u};case"tool":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[m.toolName]}},toolWarnings:u};default:{let x=y;throw new un({functionality:`Unsupported tool choice type: ${x}`})}}}function VC({finishReason:t,hasToolCalls:e}){switch(t){case"STOP":return e?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"RECITATION":case"SAFETY":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";default:return"unknown"}}var Q2=class{constructor(t,e,r){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=t,this.settings=e,this.config=r}get supportsStructuredOutputs(){var t;return(t=this.settings.structuredOutputs)!=null?t:!0}get provider(){return this.config.provider}async getArgs({mode:t,prompt:e,maxTokens:r,temperature:n,topP:i,topK:a,frequencyPenalty:u,presencePenalty:f,stopSequences:m,responseFormat:y,seed:x}){var P,V;let G=t.type,Y=[],q={maxOutputTokens:r,temperature:n,topK:a,topP:i,frequencyPenalty:u,presencePenalty:f,stopSequences:m,seed:x,responseMimeType:(y==null?void 0:y.type)==="json"?"application/json":void 0,responseSchema:(y==null?void 0:y.type)==="json"&&y.schema!=null&&this.supportsStructuredOutputs?pp(y.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp}},{contents:J,systemInstruction:ee}=K2(e);switch(G){case"regular":{let{tools:ve,toolConfig:ye,toolWarnings:ue}=X2(t,(P=this.settings.useSearchGrounding)!=null?P:!1,this.modelId.includes("gemini-2"));return{args:{generationConfig:q,contents:J,systemInstruction:ee,safetySettings:this.settings.safetySettings,tools:ve,toolConfig:ye,cachedContent:this.settings.cachedContent},warnings:[...Y,...ue]}}case"object-json":return{args:{generationConfig:{...q,responseMimeType:"application/json",responseSchema:t.schema!=null&&this.supportsStructuredOutputs?pp(t.schema):void 0},contents:J,systemInstruction:ee,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:Y};case"object-tool":return{args:{generationConfig:q,contents:J,tools:{functionDeclarations:[{name:t.tool.name,description:(V=t.tool.description)!=null?V:"",parameters:pp(t.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:Y};default:{let ve=G;throw new Error(`Unsupported type: ${ve}`)}}}supportsUrl(t){return this.config.isSupportedUrl(t)}async doGenerate(t){var e,r,n,i,a,u,f,m;let{args:y,warnings:x}=await this.getArgs(t),P=JSON.stringify(y),V=ko(await Bg(this.config.headers),t.headers),{responseHeaders:G,value:Y}=await lo({url:`${this.config.baseURL}/${HC(this.modelId)}:generateContent`,headers:V,body:y,failedResponseHandler:_E,successfulResponseHandler:rc(tU),abortSignal:t.abortSignal,fetch:this.config.fetch}),{contents:q,...J}=y,ee=Y.candidates[0],ve=GC({parts:(r=(e=ee.content)==null?void 0:e.parts)!=null?r:[],generateId:this.config.generateId}),ye=Y.usageMetadata;return{text:zC((i=(n=ee.content)==null?void 0:n.parts)!=null?i:[]),toolCalls:ve,finishReason:VC({finishReason:ee.finishReason,hasToolCalls:ve!=null&&ve.length>0}),usage:{promptTokens:(a=ye==null?void 0:ye.promptTokenCount)!=null?a:NaN,completionTokens:(u=ye==null?void 0:ye.candidatesTokenCount)!=null?u:NaN},rawCall:{rawPrompt:q,rawSettings:J},rawResponse:{headers:G},warnings:x,providerMetadata:{google:{groundingMetadata:(f=ee.groundingMetadata)!=null?f:null,safetyRatings:(m=ee.safetyRatings)!=null?m:null}},sources:WC({groundingMetadata:ee.groundingMetadata,generateId:this.config.generateId}),request:{body:P}}}async doStream(t){let{args:e,warnings:r}=await this.getArgs(t),n=JSON.stringify(e),i=ko(await Bg(this.config.headers),t.headers),{responseHeaders:a,value:u}=await lo({url:`${this.config.baseURL}/${HC(this.modelId)}:streamGenerateContent?alt=sse`,headers:i,body:e,failedResponseHandler:_E,successfulResponseHandler:wm(rU),abortSignal:t.abortSignal,fetch:this.config.fetch}),{contents:f,...m}=e,y="unknown",x={promptTokens:Number.NaN,completionTokens:Number.NaN},P,V=this.config.generateId,G=!1;return{stream:u.pipeThrough(new TransformStream({transform(Y,q){var J,ee,ve,ye,ue,_e;if(!Y.success){q.enqueue({type:"error",error:Y.error});return}let Ue=Y.value,$e=Ue.usageMetadata;$e!=null&&(x={promptTokens:(J=$e.promptTokenCount)!=null?J:NaN,completionTokens:(ee=$e.candidatesTokenCount)!=null?ee:NaN});let Ke=(ve=Ue.candidates)==null?void 0:ve[0];if(Ke==null)return;if(Ke.finishReason!=null){y=VC({finishReason:Ke.finishReason,hasToolCalls:G});let $r=(ye=WC({groundingMetadata:Ke.groundingMetadata,generateId:V}))!=null?ye:[];for(let Ne of $r)q.enqueue({type:"source",source:Ne});P={google:{groundingMetadata:(ue=Ke.groundingMetadata)!=null?ue:null,safetyRatings:(_e=Ke.safetyRatings)!=null?_e:null}}}let ct=Ke.content;if(ct==null)return;let vt=zC(ct.parts);vt!=null&&q.enqueue({type:"text-delta",textDelta:vt});let wr=GC({parts:ct.parts,generateId:V});if(wr!=null)for(let $r of wr)q.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:$r.toolCallId,toolName:$r.toolName,argsTextDelta:$r.args}),q.enqueue({type:"tool-call",toolCallType:"function",toolCallId:$r.toolCallId,toolName:$r.toolName,args:$r.args}),G=!0},flush(Y){Y.enqueue({type:"finish",finishReason:y,usage:x,providerMetadata:P})}})),rawCall:{rawPrompt:f,rawSettings:m},rawResponse:{headers:a},warnings:r,request:{body:n}}}};function GC({parts:t,generateId:e}){let r=t==null?void 0:t.filter(n=>"functionCall"in n);return r==null||r.length===0?void 0:r.map(n=>({toolCallType:"function",toolCallId:e(),toolName:n.functionCall.name,args:JSON.stringify(n.functionCall.args)}))}function zC(t){let e=t==null?void 0:t.filter(r=>"text"in r);return e==null||e.length===0?void 0:e.map(r=>r.text).join("")}var JC=T.object({role:T.string(),parts:T.array(T.union([T.object({text:T.string()}),T.object({functionCall:T.object({name:T.string(),args:T.unknown()})})])).nullish()}),eU=T.object({web:T.object({uri:T.string(),title:T.string()}).nullish(),retrievedContext:T.object({uri:T.string(),title:T.string()}).nullish()}),KC=T.object({webSearchQueries:T.array(T.string()).nullish(),retrievalQueries:T.array(T.string()).nullish(),searchEntryPoint:T.object({renderedContent:T.string()}).nullish(),groundingChunks:T.array(eU).nullish(),groundingSupports:T.array(T.object({segment:T.object({startIndex:T.number().nullish(),endIndex:T.number().nullish(),text:T.string().nullish()}),segment_text:T.string().nullish(),groundingChunkIndices:T.array(T.number()).nullish(),supportChunkIndices:T.array(T.number()).nullish(),confidenceScores:T.array(T.number()).nullish(),confidenceScore:T.array(T.number()).nullish()})).nullish(),retrievalMetadata:T.union([T.object({webDynamicRetrievalScore:T.number()}),T.object({})]).nullish()}),ZC=T.object({category:T.string(),probability:T.string(),probabilityScore:T.number().nullish(),severity:T.string().nullish(),severityScore:T.number().nullish(),blocked:T.boolean().nullish()}),tU=T.object({candidates:T.array(T.object({content:JC.nullish(),finishReason:T.string().nullish(),safetyRatings:T.array(ZC).nullish(),groundingMetadata:KC.nullish()})),usageMetadata:T.object({promptTokenCount:T.number().nullish(),candidatesTokenCount:T.number().nullish(),totalTokenCount:T.number().nullish()}).nullish()}),rU=T.object({candidates:T.array(T.object({content:JC.nullish(),finishReason:T.string().nullish(),safetyRatings:T.array(ZC).nullish(),groundingMetadata:KC.nullish()})).nullish(),usageMetadata:T.object({promptTokenCount:T.number().nullish(),candidatesTokenCount:T.number().nullish(),totalTokenCount:T.number().nullish()}).nullish()});function WC({groundingMetadata:t,generateId:e}){var r;return(r=t==null?void 0:t.groundingChunks)==null?void 0:r.filter(n=>n.web!=null).map(n=>({sourceType:"url",id:e(),url:n.web.uri,title:n.web.title}))}var nU=class{constructor(t,e,r){this.specificationVersion="v1",this.modelId=t,this.settings=e,this.config=r}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:t,headers:e,abortSignal:r}){if(t.length>this.maxEmbeddingsPerCall)throw new Fw({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});let n=ko(await Bg(this.config.headers),e),{responseHeaders:i,value:a}=await lo({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:n,body:{requests:t.map(u=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:u}]},outputDimensionality:this.settings.outputDimensionality}))},failedResponseHandler:_E,successfulResponseHandler:rc(iU),abortSignal:r,fetch:this.config.fetch});return{embeddings:a.embeddings.map(u=>u.values),usage:void 0,rawResponse:{headers:i}}}},iU=T.object({embeddings:T.array(T.object({values:T.array(T.number())}))});function aU(t){return t.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function yE(t={}){var e;let r=(e=ig(t.baseURL))!=null?e:"https://generativelanguage.googleapis.com/v1beta",n=()=>({"x-goog-api-key":rg({apiKey:t.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...t.headers}),i=(f,m={})=>{var y;return new Q2(f,m,{provider:"google.generative-ai",baseURL:r,headers:n,generateId:(y=t.generateId)!=null?y:el,isSupportedUrl:aU,fetch:t.fetch})},a=(f,m={})=>new nU(f,m,{provider:"google.generative-ai",baseURL:r,headers:n,fetch:t.fetch}),u=function(f,m){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return i(f,m)};return u.languageModel=i,u.chat=i,u.generativeAI=i,u.embedding=a,u.textEmbedding=a,u.textEmbeddingModel=a,u}var lH=yE();function oU({prompt:t,useLegacyFunctionCalling:e=!1,systemMessageMode:r="system"}){let n=[];for(let{role:i,content:a}of t)switch(i){case"system":{switch(r){case"system":{n.push({role:"system",content:a});break}case"developer":{n.push({role:"developer",content:a});break}case"remove":break;default:{let u=r;throw new Error(`Unsupported system message mode: ${u}`)}}break}case"user":{if(a.length===1&&a[0].type==="text"){n.push({role:"user",content:a[0].text});break}n.push({role:"user",content:a.map(u=>{var f,m,y;switch(u.type){case"text":return{type:"text",text:u.text};case"image":return{type:"image_url",image_url:{url:u.image instanceof URL?u.image.toString():`data:${(f=u.mimeType)!=null?f:"image/jpeg"};base64,${wh(u.image)}`,detail:(y=(m=u.providerMetadata)==null?void 0:m.openai)==null?void 0:y.imageDetail}};case"file":{if(u.data instanceof URL)throw new un({functionality:"'File content parts with URL data' functionality not supported."});switch(u.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:u.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:u.data,format:"mp3"}};default:throw new un({functionality:`File content part type ${u.mimeType} in user messages`})}}}})});break}case"assistant":{let u="",f=[];for(let m of a)switch(m.type){case"text":{u+=m.text;break}case"redacted-reasoning":case"reasoning":break;case"tool-call":{f.push({id:m.toolCallId,type:"function",function:{name:m.toolName,arguments:JSON.stringify(m.args)}});break}default:{let y=m;throw new Error(`Unsupported part: ${y}`)}}if(e){if(f.length>1)throw new un({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});n.push({role:"assistant",content:u,function_call:f.length>0?f[0].function:void 0})}else n.push({role:"assistant",content:u,tool_calls:f.length>0?f:void 0});break}case"tool":{for(let u of a)e?n.push({role:"function",name:u.toolName,content:JSON.stringify(u.result)}):n.push({role:"tool",tool_call_id:u.toolCallId,content:JSON.stringify(u.result)});break}default:{let u=i;throw new Error(`Unsupported role: ${u}`)}}return n}function XC(t){var e,r;return(r=(e=t==null?void 0:t.content)==null?void 0:e.map(({token:n,logprob:i,top_logprobs:a})=>({token:n,logprob:i,topLogprobs:a?a.map(({token:u,logprob:f})=>({token:u,logprob:f})):[]})))!=null?r:void 0}function Jw(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var bE=T.object({error:T.object({message:T.string(),type:T.string().nullish(),param:T.any().nullish(),code:T.union([T.string(),T.number()]).nullish()})}),G_=ng({errorSchema:bE,errorToMessage:t=>t.error.message});function Kw({id:t,model:e,created:r}){return{id:t??void 0,modelId:e??void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function sU({mode:t,useLegacyFunctionCalling:e=!1,structuredOutputs:r}){var n;let i=(n=t.tools)!=null&&n.length?t.tools:void 0,a=[];if(i==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};let u=t.toolChoice;if(e){let y=[];for(let P of i)P.type==="provider-defined"?a.push({type:"unsupported-tool",tool:P}):y.push({name:P.name,description:P.description,parameters:P.parameters});if(u==null)return{functions:y,function_call:void 0,toolWarnings:a};switch(u.type){case"auto":case"none":case void 0:return{functions:y,function_call:void 0,toolWarnings:a};case"required":throw new un({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:y,function_call:{name:u.toolName},toolWarnings:a}}}let f=[];for(let y of i)y.type==="provider-defined"?a.push({type:"unsupported-tool",tool:y}):f.push({type:"function",function:{name:y.name,description:y.description,parameters:y.parameters,strict:r?!0:void 0}});if(u==null)return{tools:f,tool_choice:void 0,toolWarnings:a};let m=u.type;switch(m){case"auto":case"none":case"required":return{tools:f,tool_choice:m,toolWarnings:a};case"tool":return{tools:f,tool_choice:{type:"function",function:{name:u.toolName}},toolWarnings:a};default:{let y=m;throw new un({functionality:`Unsupported tool choice type: ${y}`})}}}var uU=class{constructor(t,e,r){this.specificationVersion="v1",this.modelId=t,this.settings=e,this.config=r}get supportsStructuredOutputs(){var t;return(t=this.settings.structuredOutputs)!=null?t:wE(this.modelId)}get defaultObjectGenerationMode(){return fU(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:t,prompt:e,maxTokens:r,temperature:n,topP:i,topK:a,frequencyPenalty:u,presencePenalty:f,stopSequences:m,responseFormat:y,seed:x,providerMetadata:P}){var V,G,Y,q,J,ee,ve,ye;let ue=t.type,_e=[];a!=null&&_e.push({type:"unsupported-setting",setting:"topK"}),(y==null?void 0:y.type)==="json"&&y.schema!=null&&!this.supportsStructuredOutputs&&_e.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let Ue=this.settings.useLegacyFunctionCalling;if(Ue&&this.settings.parallelToolCalls===!0)throw new un({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(Ue&&this.supportsStructuredOutputs)throw new un({functionality:"structuredOutputs with useLegacyFunctionCalling"});QC(this.modelId)==="remove"&&e.some(Ke=>Ke.role==="system")&&_e.push({type:"other",message:"system messages are removed for this model"});let $e={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:r,temperature:n,top_p:i,frequency_penalty:u,presence_penalty:f,response_format:(y==null?void 0:y.type)==="json"?this.supportsStructuredOutputs&&y.schema!=null?{type:"json_schema",json_schema:{schema:y.schema,strict:!0,name:(V=y.name)!=null?V:"response",description:y.description}}:{type:"json_object"}:void 0,stop:m,seed:x,max_completion_tokens:(G=P==null?void 0:P.openai)==null?void 0:G.maxCompletionTokens,store:(Y=P==null?void 0:P.openai)==null?void 0:Y.store,metadata:(q=P==null?void 0:P.openai)==null?void 0:q.metadata,prediction:(J=P==null?void 0:P.openai)==null?void 0:J.prediction,reasoning_effort:(ve=(ee=P==null?void 0:P.openai)==null?void 0:ee.reasoningEffort)!=null?ve:this.settings.reasoningEffort,messages:oU({prompt:e,useLegacyFunctionCalling:Ue,systemMessageMode:QC(this.modelId)})};switch(wE(this.modelId)&&($e.temperature!=null&&($e.temperature=void 0,_e.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),$e.top_p!=null&&($e.top_p=void 0,_e.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),$e.frequency_penalty!=null&&($e.frequency_penalty=void 0,_e.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),$e.presence_penalty!=null&&($e.presence_penalty=void 0,_e.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),$e.logit_bias!=null&&($e.logit_bias=void 0,_e.push({type:"other",message:"logitBias is not supported for reasoning models"})),$e.logprobs!=null&&($e.logprobs=void 0,_e.push({type:"other",message:"logprobs is not supported for reasoning models"})),$e.top_logprobs!=null&&($e.top_logprobs=void 0,_e.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),$e.max_tokens!=null&&($e.max_completion_tokens==null&&($e.max_completion_tokens=$e.max_tokens),$e.max_tokens=void 0)),ue){case"regular":{let{tools:Ke,tool_choice:ct,functions:vt,function_call:wr,toolWarnings:$r}=sU({mode:t,useLegacyFunctionCalling:Ue,structuredOutputs:this.supportsStructuredOutputs});return{args:{...$e,tools:Ke,tool_choice:ct,functions:vt,function_call:wr},warnings:[..._e,...$r]}}case"object-json":return{args:{...$e,response_format:this.supportsStructuredOutputs&&t.schema!=null?{type:"json_schema",json_schema:{schema:t.schema,strict:!0,name:(ye=t.name)!=null?ye:"response",description:t.description}}:{type:"json_object"}},warnings:_e};case"object-tool":return{args:Ue?{...$e,function_call:{name:t.tool.name},functions:[{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters}]}:{...$e,tool_choice:{type:"function",function:{name:t.tool.name}},tools:[{type:"function",function:{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:_e};default:{let Ke=ue;throw new Error(`Unsupported type: ${Ke}`)}}}async doGenerate(t){var e,r,n,i,a,u,f,m;let{args:y,warnings:x}=this.getArgs(t),{responseHeaders:P,value:V}=await lo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:ko(this.config.headers(),t.headers),body:y,failedResponseHandler:G_,successfulResponseHandler:rc(cU),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:G,...Y}=y,q=V.choices[0],J=(e=V.usage)==null?void 0:e.completion_tokens_details,ee=(r=V.usage)==null?void 0:r.prompt_tokens_details,ve={openai:{}};return(J==null?void 0:J.reasoning_tokens)!=null&&(ve.openai.reasoningTokens=J==null?void 0:J.reasoning_tokens),(J==null?void 0:J.accepted_prediction_tokens)!=null&&(ve.openai.acceptedPredictionTokens=J==null?void 0:J.accepted_prediction_tokens),(J==null?void 0:J.rejected_prediction_tokens)!=null&&(ve.openai.rejectedPredictionTokens=J==null?void 0:J.rejected_prediction_tokens),(ee==null?void 0:ee.cached_tokens)!=null&&(ve.openai.cachedPromptTokens=ee==null?void 0:ee.cached_tokens),{text:(n=q.message.content)!=null?n:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&q.message.function_call?[{toolCallType:"function",toolCallId:el(),toolName:q.message.function_call.name,args:q.message.function_call.arguments}]:(i=q.message.tool_calls)==null?void 0:i.map(ye=>{var ue;return{toolCallType:"function",toolCallId:(ue=ye.id)!=null?ue:el(),toolName:ye.function.name,args:ye.function.arguments}}),finishReason:Jw(q.finish_reason),usage:{promptTokens:(u=(a=V.usage)==null?void 0:a.prompt_tokens)!=null?u:NaN,completionTokens:(m=(f=V.usage)==null?void 0:f.completion_tokens)!=null?m:NaN},rawCall:{rawPrompt:G,rawSettings:Y},rawResponse:{headers:P},request:{body:JSON.stringify(y)},response:Kw(V),warnings:x,logprobs:XC(q.logprobs),providerMetadata:ve}}async doStream(t){if(this.settings.simulateStreaming){let q=await this.doGenerate(t);return{stream:new ReadableStream({start(ee){if(ee.enqueue({type:"response-metadata",...q.response}),q.text&&ee.enqueue({type:"text-delta",textDelta:q.text}),q.toolCalls)for(let ve of q.toolCalls)ee.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ve.toolCallId,toolName:ve.toolName,argsTextDelta:ve.args}),ee.enqueue({type:"tool-call",...ve});ee.enqueue({type:"finish",finishReason:q.finishReason,usage:q.usage,logprobs:q.logprobs,providerMetadata:q.providerMetadata}),ee.close()}}),rawCall:q.rawCall,rawResponse:q.rawResponse,warnings:q.warnings}}let{args:e,warnings:r}=this.getArgs(t),n={...e,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:i,value:a}=await lo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:ko(this.config.headers(),t.headers),body:n,failedResponseHandler:G_,successfulResponseHandler:wm(lU),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:u,...f}=e,m=[],y="unknown",x={promptTokens:void 0,completionTokens:void 0},P,V=!0,{useLegacyFunctionCalling:G}=this.settings,Y={openai:{}};return{stream:a.pipeThrough(new TransformStream({transform(q,J){var ee,ve,ye,ue,_e,Ue,$e,Ke,ct,vt,wr,$r;if(!q.success){y="error",J.enqueue({type:"error",error:q.error});return}let Ne=q.value;if("error"in Ne){y="error",J.enqueue({type:"error",error:Ne.error});return}if(V&&(V=!1,J.enqueue({type:"response-metadata",...Kw(Ne)})),Ne.usage!=null){let{prompt_tokens:Le,completion_tokens:qt,prompt_tokens_details:Wt,completion_tokens_details:Tt}=Ne.usage;x={promptTokens:Le??void 0,completionTokens:qt??void 0},(Tt==null?void 0:Tt.reasoning_tokens)!=null&&(Y.openai.reasoningTokens=Tt==null?void 0:Tt.reasoning_tokens),(Tt==null?void 0:Tt.accepted_prediction_tokens)!=null&&(Y.openai.acceptedPredictionTokens=Tt==null?void 0:Tt.accepted_prediction_tokens),(Tt==null?void 0:Tt.rejected_prediction_tokens)!=null&&(Y.openai.rejectedPredictionTokens=Tt==null?void 0:Tt.rejected_prediction_tokens),(Wt==null?void 0:Wt.cached_tokens)!=null&&(Y.openai.cachedPromptTokens=Wt==null?void 0:Wt.cached_tokens)}let dt=Ne.choices[0];if((dt==null?void 0:dt.finish_reason)!=null&&(y=Jw(dt.finish_reason)),(dt==null?void 0:dt.delta)==null)return;let Or=dt.delta;Or.content!=null&&J.enqueue({type:"text-delta",textDelta:Or.content});let Ze=XC(dt==null?void 0:dt.logprobs);Ze!=null&&Ze.length&&(P===void 0&&(P=[]),P.push(...Ze));let yn=G&&Or.function_call!=null?[{type:"function",id:el(),function:Or.function_call,index:0}]:Or.tool_calls;if(yn!=null)for(let Le of yn){let qt=Le.index;if(m[qt]==null){if(Le.type!=="function")throw new pv({data:Le,message:"Expected 'function' type."});if(Le.id==null)throw new pv({data:Le,message:"Expected 'id' to be a string."});if(((ee=Le.function)==null?void 0:ee.name)==null)throw new pv({data:Le,message:"Expected 'function.name' to be a string."});m[qt]={id:Le.id,type:"function",function:{name:Le.function.name,arguments:(ve=Le.function.arguments)!=null?ve:""},hasFinished:!1};let Tt=m[qt];((ye=Tt.function)==null?void 0:ye.name)!=null&&((ue=Tt.function)==null?void 0:ue.arguments)!=null&&(Tt.function.arguments.length>0&&J.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Tt.id,toolName:Tt.function.name,argsTextDelta:Tt.function.arguments}),F_(Tt.function.arguments)&&(J.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(_e=Tt.id)!=null?_e:el(),toolName:Tt.function.name,args:Tt.function.arguments}),Tt.hasFinished=!0));continue}let Wt=m[qt];Wt.hasFinished||(((Ue=Le.function)==null?void 0:Ue.arguments)!=null&&(Wt.function.arguments+=(Ke=($e=Le.function)==null?void 0:$e.arguments)!=null?Ke:""),J.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Wt.id,toolName:Wt.function.name,argsTextDelta:(ct=Le.function.arguments)!=null?ct:""}),((vt=Wt.function)==null?void 0:vt.name)!=null&&((wr=Wt.function)==null?void 0:wr.arguments)!=null&&F_(Wt.function.arguments)&&(J.enqueue({type:"tool-call",toolCallType:"function",toolCallId:($r=Wt.id)!=null?$r:el(),toolName:Wt.function.name,args:Wt.function.arguments}),Wt.hasFinished=!0))}},flush(q){var J,ee;q.enqueue({type:"finish",finishReason:y,logprobs:P,usage:{promptTokens:(J=x.promptTokens)!=null?J:NaN,completionTokens:(ee=x.completionTokens)!=null?ee:NaN},...Y!=null?{providerMetadata:Y}:{}})}})),rawCall:{rawPrompt:u,rawSettings:f},rawResponse:{headers:i},request:{body:JSON.stringify(n)},warnings:r}}},tk=T.object({prompt_tokens:T.number().nullish(),completion_tokens:T.number().nullish(),prompt_tokens_details:T.object({cached_tokens:T.number().nullish()}).nullish(),completion_tokens_details:T.object({reasoning_tokens:T.number().nullish(),accepted_prediction_tokens:T.number().nullish(),rejected_prediction_tokens:T.number().nullish()}).nullish()}).nullish(),cU=T.object({id:T.string().nullish(),created:T.number().nullish(),model:T.string().nullish(),choices:T.array(T.object({message:T.object({role:T.literal("assistant").nullish(),content:T.string().nullish(),function_call:T.object({arguments:T.string(),name:T.string()}).nullish(),tool_calls:T.array(T.object({id:T.string().nullish(),type:T.literal("function"),function:T.object({name:T.string(),arguments:T.string()})})).nullish()}),index:T.number(),logprobs:T.object({content:T.array(T.object({token:T.string(),logprob:T.number(),top_logprobs:T.array(T.object({token:T.string(),logprob:T.number()}))})).nullable()}).nullish(),finish_reason:T.string().nullish()})),usage:tk}),lU=T.union([T.object({id:T.string().nullish(),created:T.number().nullish(),model:T.string().nullish(),choices:T.array(T.object({delta:T.object({role:T.enum(["assistant"]).nullish(),content:T.string().nullish(),function_call:T.object({name:T.string().optional(),arguments:T.string().optional()}).nullish(),tool_calls:T.array(T.object({index:T.number(),id:T.string().nullish(),type:T.literal("function").optional(),function:T.object({name:T.string().nullish(),arguments:T.string().nullish()})})).nullish()}).nullish(),logprobs:T.object({content:T.array(T.object({token:T.string(),logprob:T.number(),top_logprobs:T.array(T.object({token:T.string(),logprob:T.number()}))})).nullable()}).nullish(),finish_reason:T.string().nullable().optional(),index:T.number()})),usage:tk}),bE]);function wE(t){return t==="o1"||t.startsWith("o1-")||t==="o3"||t.startsWith("o3-")}function fU(t){return t.startsWith("gpt-4o-audio-preview")}function QC(t){var e,r;return wE(t)?(r=(e=dU[t])==null?void 0:e.systemMessageMode)!=null?r:"developer":"system"}var dU={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"}};function pU({prompt:t,inputFormat:e,user:r="user",assistant:n="assistant"}){if(e==="prompt"&&t.length===1&&t[0].role==="user"&&t[0].content.length===1&&t[0].content[0].type==="text")return{prompt:t[0].content[0].text};let i="";t[0].role==="system"&&(i+=`${t[0].content}

`,t=t.slice(1));for(let{role:a,content:u}of t)switch(a){case"system":throw new _m({message:"Unexpected system message in prompt: ${content}",prompt:t});case"user":{let f=u.map(m=>{switch(m.type){case"text":return m.text;case"image":throw new un({functionality:"images"})}}).join("");i+=`${r}:
${f}

`;break}case"assistant":{let f=u.map(m=>{switch(m.type){case"text":return m.text;case"tool-call":throw new un({functionality:"tool-call messages"})}}).join("");i+=`${n}:
${f}

`;break}case"tool":throw new un({functionality:"tool messages"});default:{let f=a;throw new Error(`Unsupported role: ${f}`)}}return i+=`${n}:
`,{prompt:i,stopSequences:[`
${r}:`]}}function ek(t){return t==null?void 0:t.tokens.map((e,r)=>({token:e,logprob:t.token_logprobs[r],topLogprobs:t.top_logprobs?Object.entries(t.top_logprobs[r]).map(([n,i])=>({token:n,logprob:i})):[]}))}var hU=class{constructor(t,e,r){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=t,this.settings=e,this.config=r}get provider(){return this.config.provider}getArgs({mode:t,inputFormat:e,prompt:r,maxTokens:n,temperature:i,topP:a,topK:u,frequencyPenalty:f,presencePenalty:m,stopSequences:y,responseFormat:x,seed:P}){var V;let G=t.type,Y=[];u!=null&&Y.push({type:"unsupported-setting",setting:"topK"}),x!=null&&x.type!=="text"&&Y.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:q,stopSequences:J}=pU({prompt:r,inputFormat:e}),ee=[...J??[],...y??[]],ve={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:n,temperature:i,top_p:a,frequency_penalty:f,presence_penalty:m,seed:P,prompt:q,stop:ee.length>0?ee:void 0};switch(G){case"regular":{if((V=t.tools)!=null&&V.length)throw new un({functionality:"tools"});if(t.toolChoice)throw new un({functionality:"toolChoice"});return{args:ve,warnings:Y}}case"object-json":throw new un({functionality:"object-json mode"});case"object-tool":throw new un({functionality:"object-tool mode"});default:{let ye=G;throw new Error(`Unsupported type: ${ye}`)}}}async doGenerate(t){let{args:e,warnings:r}=this.getArgs(t),{responseHeaders:n,value:i}=await lo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:ko(this.config.headers(),t.headers),body:e,failedResponseHandler:G_,successfulResponseHandler:rc(mU),abortSignal:t.abortSignal,fetch:this.config.fetch}),{prompt:a,...u}=e,f=i.choices[0];return{text:f.text,usage:{promptTokens:i.usage.prompt_tokens,completionTokens:i.usage.completion_tokens},finishReason:Jw(f.finish_reason),logprobs:ek(f.logprobs),rawCall:{rawPrompt:a,rawSettings:u},rawResponse:{headers:n},response:Kw(i),warnings:r,request:{body:JSON.stringify(e)}}}async doStream(t){let{args:e,warnings:r}=this.getArgs(t),n={...e,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:i,value:a}=await lo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:ko(this.config.headers(),t.headers),body:n,failedResponseHandler:G_,successfulResponseHandler:wm(vU),abortSignal:t.abortSignal,fetch:this.config.fetch}),{prompt:u,...f}=e,m="unknown",y={promptTokens:Number.NaN,completionTokens:Number.NaN},x,P=!0;return{stream:a.pipeThrough(new TransformStream({transform(V,G){if(!V.success){m="error",G.enqueue({type:"error",error:V.error});return}let Y=V.value;if("error"in Y){m="error",G.enqueue({type:"error",error:Y.error});return}P&&(P=!1,G.enqueue({type:"response-metadata",...Kw(Y)})),Y.usage!=null&&(y={promptTokens:Y.usage.prompt_tokens,completionTokens:Y.usage.completion_tokens});let q=Y.choices[0];(q==null?void 0:q.finish_reason)!=null&&(m=Jw(q.finish_reason)),(q==null?void 0:q.text)!=null&&G.enqueue({type:"text-delta",textDelta:q.text});let J=ek(q==null?void 0:q.logprobs);J!=null&&J.length&&(x===void 0&&(x=[]),x.push(...J))},flush(V){V.enqueue({type:"finish",finishReason:m,logprobs:x,usage:y})}})),rawCall:{rawPrompt:u,rawSettings:f},rawResponse:{headers:i},warnings:r,request:{body:JSON.stringify(n)}}}},mU=T.object({id:T.string().nullish(),created:T.number().nullish(),model:T.string().nullish(),choices:T.array(T.object({text:T.string(),finish_reason:T.string(),logprobs:T.object({tokens:T.array(T.string()),token_logprobs:T.array(T.number()),top_logprobs:T.array(T.record(T.string(),T.number())).nullable()}).nullish()})),usage:T.object({prompt_tokens:T.number(),completion_tokens:T.number()})}),vU=T.union([T.object({id:T.string().nullish(),created:T.number().nullish(),model:T.string().nullish(),choices:T.array(T.object({text:T.string(),finish_reason:T.string().nullish(),index:T.number(),logprobs:T.object({tokens:T.array(T.string()),token_logprobs:T.array(T.number()),top_logprobs:T.array(T.record(T.string(),T.number())).nullable()}).nullish()})),usage:T.object({prompt_tokens:T.number(),completion_tokens:T.number()}).nullish()}),bE]),gU=class{constructor(t,e,r){this.specificationVersion="v1",this.modelId=t,this.settings=e,this.config=r}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var t;return(t=this.settings.maxEmbeddingsPerCall)!=null?t:2048}get supportsParallelCalls(){var t;return(t=this.settings.supportsParallelCalls)!=null?t:!0}async doEmbed({values:t,headers:e,abortSignal:r}){if(t.length>this.maxEmbeddingsPerCall)throw new Fw({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});let{responseHeaders:n,value:i}=await lo({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:ko(this.config.headers(),e),body:{model:this.modelId,input:t,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:G_,successfulResponseHandler:rc(_U),abortSignal:r,fetch:this.config.fetch});return{embeddings:i.data.map(a=>a.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:n}}}},_U=T.object({data:T.array(T.object({embedding:T.array(T.number())})),usage:T.object({prompt_tokens:T.number()}).nullish()}),yU={"dall-e-3":1,"dall-e-2":10},wU=class{constructor(t,e,r){this.modelId=t,this.settings=e,this.config=r,this.specificationVersion="v1"}get maxImagesPerCall(){var t,e;return(e=(t=this.settings.maxImagesPerCall)!=null?t:yU[this.modelId])!=null?e:1}get provider(){return this.config.provider}async doGenerate({prompt:t,n:e,size:r,aspectRatio:n,seed:i,providerOptions:a,headers:u,abortSignal:f}){var m,y,x,P;let V=[];n!=null&&V.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),i!=null&&V.push({type:"unsupported-setting",setting:"seed"});let G=(x=(y=(m=this.config._internal)==null?void 0:m.currentDate)==null?void 0:y.call(m))!=null?x:new Date,{value:Y,responseHeaders:q}=await lo({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:ko(this.config.headers(),u),body:{model:this.modelId,prompt:t,n:e,size:r,...(P=a.openai)!=null?P:{},response_format:"b64_json"},failedResponseHandler:G_,successfulResponseHandler:rc(bU),abortSignal:f,fetch:this.config.fetch});return{images:Y.data.map(J=>J.b64_json),warnings:V,response:{timestamp:G,modelId:this.modelId,headers:q}}}},bU=T.object({data:T.array(T.object({b64_json:T.string()}))});function SE(t={}){var e,r,n;let i=(e=ig(t.baseURL))!=null?e:"https://api.openai.com/v1",a=(r=t.compatibility)!=null?r:"compatible",u=(n=t.name)!=null?n:"openai",f=()=>({Authorization:`Bearer ${rg({apiKey:t.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":t.organization,"OpenAI-Project":t.project,...t.headers}),m=(Y,q={})=>new uU(Y,q,{provider:`${u}.chat`,url:({path:J})=>`${i}${J}`,headers:f,compatibility:a,fetch:t.fetch}),y=(Y,q={})=>new hU(Y,q,{provider:`${u}.completion`,url:({path:J})=>`${i}${J}`,headers:f,compatibility:a,fetch:t.fetch}),x=(Y,q={})=>new gU(Y,q,{provider:`${u}.embedding`,url:({path:J})=>`${i}${J}`,headers:f,fetch:t.fetch}),P=(Y,q={})=>new wU(Y,q,{provider:`${u}.image`,url:({path:J})=>`${i}${J}`,headers:f,fetch:t.fetch}),V=(Y,q)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return Y==="gpt-3.5-turbo-instruct"?y(Y,q):m(Y,q)},G=function(Y,q){return V(Y,q)};return G.languageModel=V,G.chat=m,G.completion=y,G.embedding=x,G.textEmbedding=x,G.textEmbeddingModel=x,G.image=P,G.imageModel=P,G}var OH=SE({compatibility:"strict"});var is=require("vscode");var SU=["rate limit exceeded","net::err","check your network connection","check your firewall","request failed","400 bad request","server error","error on conversation request","response contained no choices","response got filtered"];function EU({role:t,content:e}){switch(t){case"system":return is.LanguageModelChatMessage.User(e);case"user":let r=e.map(a=>{switch(a.type){case"text":return new is.LanguageModelTextPart(a.text);case"image":throw new Error("Image content not supported");case"file":throw new Error("File content not supported")}});return is.LanguageModelChatMessage.User(r);case"tool":let n=e.map(a=>{switch(a.type){case"tool-result":let u=typeof a.result=="string"?a.result:JSON.stringify(a.result);return new is.LanguageModelToolResultPart(a.toolCallId,[new is.LanguageModelTextPart(u)])}});return is.LanguageModelChatMessage.User(n);case"assistant":let i=e.map(a=>{switch(a.type){case"text":return new is.LanguageModelTextPart(a.text);case"tool-call":return new is.LanguageModelToolCallPart(a.toolCallId,a.toolName,a.args)}});return is.LanguageModelChatMessage.Assistant(i)}}function TU(t){switch(t.type){case"function":return{name:t.name,description:t.description,inputSchema:t.parameters};case"provider-defined":throw new Error("Provider-defined tools not supported")}}function xU(t){let e=String(t.message).toLowerCase();for(let r of SU)if(e.includes(r))return!0;return!1}var EE=class{specificationVersion="v1";defaultObjectGenerationMode="json";provider="copilot";supportsImageUrls=!1;constructor(e,r,n){this.modelId=e,this.settings=r,this.config=n}async doGenerate(e){throw new Error("Not implemented")}async doStream(e){var V,G;let[r]=await is.lm.selectChatModels({id:this.modelId});if(!r)throw new Error("Model not found: "+this.modelId);if(((V=r.capabilities)==null?void 0:V.supportsToolCalling)===!1)throw new Error(r.name+" is not compatible with Multicoder Agent (no tool calling)");let{prompt:n,abortSignal:i,mode:a}=e,u=i.session,{token:f}=u;if(a.type!=="regular")throw new Error("Request mode not supported: "+a.type);let m=n.map(EU),y=(G=a.tools)==null?void 0:G.map(TU);if(n.slice(-1)[0].role=="tool"){let Y="Above is the result of calling one or more tools.";m.push(is.LanguageModelChatMessage.User([new is.LanguageModelTextPart(Y)]))}return{stream:new ReadableStream({async start(Y){let q=0;for(;;){try{if(f.isCancellationRequested){Y.close();return}let J=await r.sendRequest(m,{tools:y,modelOptions:{temperature:e.temperature,max_tokens:e.maxTokens}},f);for await(let ee of J.stream){if(f.isCancellationRequested)break;ee instanceof is.LanguageModelTextPart?Y.enqueue({type:"text-delta",textDelta:ee.value}):ee instanceof is.LanguageModelToolCallPart?Y.enqueue({type:"tool-call",toolCallType:"function",toolCallId:ee.callId,toolName:ee.name,args:JSON.stringify(ee.input)}):Y.error(new Error("Unknown content format"))}Y.close();return}catch(J){if(f.isCancellationRequested){Y.close();return}if(String(J.message).includes("Model is not supported for this request")){Y.error(new Error(`${r.name} is not available to 3rd party extensions`));return}if(!xU(J)||++q>5){Y.error(J);return}Y.enqueue({type:"error",error:{event:"retry",count:q,message:J.message||String(J),cause:J}}),String(J.message).toLowerCase().includes("rate limit exceeded")&&await A_(30,f)}await A_(5*q,f)}}}),rawCall:{rawPrompt:"",rawSettings:{}}}}};function rk(t){let e=(n,i={})=>new EE(n,i,{provider:"copilot"}),r=function(n,i={}){return e(n,i)};return r.chat=e,r}var IU={anthropic:vE,deepseek:gE,google:yE,openai:SE,copilot:rk},nk={};function TE({id:t,provider:e,apiKey:r}){let n=nk[e];if(!n){let i=IU[e];if(!i)throw new Error("Unknown provider: "+e);n=i({apiKey:r}),nk[e]=n}return n(t)}var xE=[{provider:"anthropic",family:"claude-3.5-sonnet",id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet"},{provider:"anthropic",family:"claude-3.7-sonnet",id:"claude-3-7-sonnet-20250219",name:"Claude 3.7 Sonnet"},{provider:"anthropic",family:"claude-3.7-sonnet-thought",id:"claude-3-7-sonnet-20250219",name:"Claude 3.7 Sonnet Thinking"},{provider:"deepseek",family:"deepseek-chat",id:"deepseek-chat",name:"DeepSeek V3"},{provider:"google",family:"gemini-2.0-flash",id:"gemini-2.0-flash-001",name:"Gemini 2.0 Flash"},{provider:"openai",family:"gpt-4o",id:"gpt-4o-2024-11-20",name:"GPT 4o"},{provider:"openai",family:"o3-mini",id:"o3-mini-2025-01-31",name:"o3-mini"},{provider:"openrouter",family:"claude-3.5-sonnet",id:"anthropic/claude-3.5-sonnet:beta",name:"Claude 3.5 Sonnet"},{provider:"openrouter",family:"gpt-4o",id:"openai/gpt-4o-2024-08-06",name:"GPT 4o"}];var ik=[{id:"anthropic",name:"Anthropic",envKeyName:"ANTHROPIC_API_KEY",website:"https://console.anthropic.com"},{id:"google",name:"Google AI",envKeyName:"GOOGLE_GENERATIVE_AI_API_KEY",website:"https://aistudio.google.com"},{id:"deepseek",name:"DeepSeek",envKeyName:"DEEPSEEK_API_KEY",website:"https://platform.deepseek.com"},{id:"openai",name:"OpenAI",envKeyName:"OPENAI_API_KEY",website:"https://platform.openai.com"},{id:"openrouter",name:"Open Router",envKeyName:"OPENROUTER_API_KEY",website:"https://openrouter.ai"}];var o_=require("vscode");function xa(t,e={depth:2}){switch(typeof t){case"undefined":return"";case"number":return String(t);case"string":return t;case"function":return xa(t(e),e);case"object":let r=[];return Array.isArray(t)?r=t.map(n=>xa(n,e)).filter(n=>!!n):r=Object.entries(t).map(([n,i])=>{let a="#".repeat(e.depth),u=xa(i,{depth:e.depth+1});return u&&`${a} ${n}

`+u}),r.join(`

`)}}var Zt=function(t,...e){let r=x=>/^\s*$/.test(x),n=x=>x.match(/^\s*/)[0].length,i=t.map(x=>x.split(`
`)),a=100;i.forEach(x=>{x.slice(1).forEach(P=>{r(P)||(a=Math.min(a,n(P)))})});let u=x=>x[0],f=x=>x[x.length-1],m=x=>!r(f(i[x]))||!r(u(i[x+1])),y=[];return i.forEach((x,P)=>{let V=x.slice();if(a<100)for(let Y=1;Y<V.length;Y++)V[Y]=x[Y].slice(a);if(P==0||!m(P-1))for(;V.length&&r(V[0]);)V.shift();if(P==i.length-1||!m(P))for(;V.length&&r(V[V.length-1]);)V.pop();let G=V.join(`
`);if(P==0)y.push(G);else{let Y=e[P-1]??"";if(typeof Y=="object"||typeof Y=="function"){if(m(P-1))throw new Error("Markdown inline value not supported");y.push(Y),y.push(G)}else{let q=y.pop();m(P-1)||(q&&(Y=`

`+Y),G&&(Y=Y+`

`),Y==`



`&&(Y=`

`)),y.push(q+Y+G)}}}),y.length==1?y[0]:y};function Do(t,e="- ",r="",n=`
`,i=": "){return a=>Array.isArray(t)?t.map(u=>e+xa(u,a)+r).join(n):Object.entries(t).map(([u,f])=>e+u+i+xa(f,a)+r).join(n)}function gi(t,e){return r=>{let n=xa(e,r);return n?`<${t}>
`+n+`
</${t}>`:""}}function ak(t,e){return r=>{let n=xa(t,r);return n||e}}var i5=require("vscode");async function ug(t,e=!1){let r=Ql(t),n={path:r},i=await Qv(t),a=[];return n.lines=i.split(`
`).length,n.status="ok",a.push(gi("file_metadata",Do(n))),e||a.push(gi("file_content",i)),xa(a)}async function Sh(t,e=!1){let r=Ql(t),n=[],i=[],a={path:r},u=[];for(let{name:f,isFile:m,isDirectory:y}of await bw(t))m?i.push(f):y&&n.push(f+"/");if(a["sub-directories"]=n.length,a.files=i.length,a.status="ok",u.push(gi("directory_metadata",Do(a))),!e){let f=[].concat(n,i);u.push(ak(gi("directory_content",f),"Directory is empty."))}return xa(u)}var ok=require("vscode");async function sk(t,e,r,n=!1){let i=Ql(t),a={path:i,name:e},u=[];if(a.start=`Ln ${r.start.line+1}, Col ${r.start.character+1}`,a.end=`Ln ${r.end.line+1}, Col ${r.end.character+1}`,a.lines=r.start.line-r.end.line+1,u.push(gi("symbol_metadata",Do(a))),!n){let f=await ok.workspace.openTextDocument(t),m=f.getText(r);u.push(gi("symbol_content",m))}return xa(u)}var uk=require("vscode");async function z_(t,e=!1){let r=Ql(t),n={path:r},i=await Qv(t),a=[],u=[],f=await uk.commands.executeCommand("vscode.executeDocumentSymbolProvider",t);function m(y){var x;a.push(y.name),(x=y.children)==null||x.forEach(m)}if(f&&f.length>0){let y=f[0];y.name.startsWith("# ")&&(n.title=y.name.slice(2)),f.forEach(m)}return n.lines=i.split(`
`).length,n.status="ok",u.push(gi("document_metadata",Do(n))),a.length&&u.push(gi("document_outline",Do(a,"","",`

`))),e||u.push(gi("document_content",i)),xa(u)}var ck=require("vscode");async function lk(){let{activeTextEditor:t}=ck.window,{document:e,selection:r}=t||{},n="",i=[];if(!t)return"No files are currently open in the editor.";let a={path:Ql(t.document.uri)};return r.isEmpty||(n=e.getText(r),a.selection=`${r.end.line-r.start.line+1} line(s)`),i.push(gi("active_text_editor",Do(a))),i.push(gi("active_selection",n)),xa(i)}var NU="multicoder_sourcecode",CU=Zt`
    Read and analyze source code files in the project

    Commands:
    - /stat: checks if the specified path exists and returns basic information about it
    - /read: returns the content of a file or directory at the given path
`,fk=T.object({command:T.enum(["stat","read"]).describe("Command"),path:T.string().describe("File or directory path")}),kU="Looking at the source files ...";function DU(t,e){let r=t.path[0];if(t.code=="invalid_enum_value"&&r=="command"&&String(t.received).startsWith("/")){let n=fk.shape.command.enum[String(t.received).slice(1)];if(n)return{command:n}}}async function RU({command:t,path:e},{id:r,log:n,stream:i}){let a=e.split("/").pop();n.info(a,{command:t,event:`tool.sourcecode.${t}`});let u=vi(e,r);return await gh(u)?await Sh(u,t=="stat"):await ef(u)?(t!=="stat"&&i.reference(Xc(u)),await ug(u,t=="stat")):(t!=="stat"&&n.warn("[sourcecode] Path does not exist - "+a,{command:t}),"Error: Path does not exist - "+e)}var Zw={name:NU,description:CU,parameters:fk,execute:RU,progress:kU,repair:DU};var OU="multicoder_documents",AU=Zt`
    Read task-related documentation files

    Commands:
    - /stat: checks if the specified documentation path exists and returns basic information about it
    - /read: returns the content of a documentation file or directory at the given path
`,dk=T.object({command:T.enum(["stat","read"]).describe("Command"),path:T.string().describe("File or directory path")}),PU="Looking at the available documents ...";function MU(t,e){let r=t.path[0];if(t.code=="invalid_enum_value"&&r=="command"&&String(t.received).startsWith("/")){let n=dk.shape.command.enum[String(t.received).slice(1)];if(n)return{command:n}}}async function LU({command:t,path:e},{id:r,log:n,stream:i}){let a=e.split("/").pop(),u=vi(e,r);return n.info(a,{command:t,event:`tool.documents.${t}`}),await gh(u)?await Sh(u,t=="stat"):await ef(u)?(t!=="stat"&&!e.startsWith(".multicoder")&&i.reference(Xc(u)),await z_(u,t=="stat")):(t!=="stat"&&n.warn("[documents] Path does not exist - "+a,{command:t}),"Error: Path does not exist - "+e)}var Xw={name:OU,description:AU,parameters:dk,execute:LU,progress:PU,repair:MU};var NE=require("vscode");var n_=require("vscode");var as=require("vscode");async function pk(t,e){var x,P,V;let r=t.task,n=null;for(;r&&!n;)n=r.edits.find(G=>G.id==e),r=r.parent;if(!n)return;let i=new as.WorkspaceEdit,a=Xc(vi(n.path,t.id));await ef(a)||(a=a.with({scheme:"untitled"}));let u=await as.workspace.openTextDocument(a),f=u.getText().replace(/\r\n/g,`
`),m=f==n.after.replace(/\r\n/g,`
`)?n.before:n.after,y=new as.Range(new as.Position(0,0),new as.Position(u.lineCount,0));i.replace(a,y,m),await as.workspace.applyEdit(i),((V=(P=(x=as.window.activeTextEditor)==null?void 0:x.document)==null?void 0:P.uri)==null?void 0:V.path)!=a.path&&await as.window.showTextDocument(u),FU(n.search)}function FU(t){var m;let e=as.window.activeTextEditor,r=e==null?void 0:e.document,n=(m=r==null?void 0:r.getText())==null?void 0:m.replace(/\r\n/g,`
`);if(!t||!e||!r)return;let i=n.indexOf(t);if(i==-1)return;let a=n.slice(0,i).split(`
`).length-1,u=t.split(`
`).length,f=new as.Position(a,0);e.selection=new as.Selection(f,f),e.revealRange(new as.Range(f,new as.Position(a+u,0)))}function hk(t,e,r,n,i,a,u){let{stream:f}=t;if(a.startsWith(".multicoder"))return UU(t,f,i,a);let m=new n_.MarkdownString(`

`),y=t.id,x=encodeURIComponent(JSON.stringify([a,r,y])),P=`command:multicoder.diffView?${x}`,V=J=>`<span class="codicon codicon-${J}" style="color:var(--vscode-textLink-foreground);"></span>`;m.supportThemeIcons=!0,m.isTrusted={enabledCommands:["multicoder.diffView"]},m.supportHtml=!0,m.appendMarkdown(`[${V("diff-single")} ${n} (${a})](${P} 'Open Diff')`),m.appendCodeblock(i,u),f.markdown(m);let G=e=="create"?"Create":"Apply",Y=e=="create"?"create file":"apply changes";f.button({title:G,command:"multicoder.action",arguments:[q],tooltip:`Click to ${Y}, click again to revert`});function q(){let J=a.split("/").pop();t.log.info(J,{event:"action."+G.toLowerCase()}),pk(t,r)}}function UU(t,e,r,n){r=r.replace(/^#/gm,"##");let i=new n_.MarkdownString(`

`);i.supportHtml=!0,i.appendMarkdown(r),e.markdown(i),e.button({title:"Edit",command:"multicoder.action",arguments:[a],tooltip:"Click to edit the document"});async function a(){let u=vi(n,t.id),f=await n_.workspace.openTextDocument(u),m=n.split("/").pop();n_.window.showTextDocument(f),t.log.info(m,{event:"action.edit"})}}var mk="multicoder_followups",jU=Zt`
    Displays followup actions to the user at the end of the conversation turn.
`,BU=Zt`
    Using ${mk} tool reply with a list of followup actions.
`,$U=T.object({actions:T.array(T.string()).describe("Short followup actions (5-10 words)")}),YU=()=>({actions:[]});function qU(t,{actions:e}){if(t.code=="invalid_type"){let r=t.path[0];if(t.received=="string"&&r=="actions")return{actions:String(e).split(`
`)}}}async function HU({actions:t},{log:e}){return e.info(`${t==null?void 0:t.length} options`,{actions:t,event:"tool.followups"}),"ok"}var ic={name:mk,description:jU,parameters:$U,execute:HU,retry:BU,fallback:YU,repair:qU};var vk="multicoder_summary",VU=Zt`
    Shows summary, explanations or walkthrough section at the end of the response or after each task step.
    Allows the user to see the progress of completing the task.
    Always use this tool at the end of each step or when the task is finished.
`,GU=Zt`
    Using ${vk} tool reply with a short summary of what has been done for the current step or task.
`,zU=T.object({text:T.string().describe("Short walkthrough or summary of this step")}),WU=()=>({text:"Task completed"});async function JU({text:t},{log:e,stream:r}){return e.info(`${t.slice(0,60).replace(/\n/g," ")}...`,{summary:t,event:"tool.summary"}),r.markdown(`

`+t+`

`),"ok"}var ei={name:vk,description:VU,parameters:zU,execute:JU,retry:GU,fallback:WU};var KU="multicoder_editor",ZU=Zt`
    Create and modify source files or documents

    Usage:
    - To add new content always use /insert or /append
    - To change more than half of the file use /update
    - To replace part of the file use /replace
    - To delete part of the file, use /replace with empty content
    - Split large edits into multiple small ones

    Important:
    - Selection must be unique within file, select 3 lines or more to avoid ambiguity
`,XU=Zt`
    Editing operation to execute with the given selection and content:
    - /create: creates a new file with the specified content
    - /update: updates the entire file
    - /insert: inserts new content before selection
    - /append: adds new content after selection
    - /replace: replaces selection with new content
`,QU=Zt`
    Provide exact text including whitespace:
    - For /create and /update: use empty string ("") 
    - For /insert: at least 3 full lines immediately following new content, no overlap
    - For /append: at least 3 full lines immediately preceding new content, no overlap
`,_k=T.object({command:T.enum(["create","insert","append","replace","update"]).describe(XU),path:T.string().describe("File path"),select:T.string().describe(QU),content:T.string().describe("New content"),summary:T.string().describe("A very short (3-10 words) summary of this change")}),ej="Writing code ...";function tj(t,{command:e,path:r,summary:n}){let i=t.path[0];if(t.code=="invalid_enum_value"&&i=="command"&&String(t.received).startsWith("/")){let a=_k.shape.command.enum[String(t.received).slice(1)];if(a)return{command:a}}if(t.code=="invalid_type"&&t.received=="undefined"){if(i=="command"&&String(n).startsWith("Create"))return{command:"create"};if(i=="command"&&String(n).startsWith("Update"))return{command:"update"};if(i=="select")return{select:""};if(i=="summary")return{summary:`${e} ${r}`}}}var IE={spec:1,design:1,plan:1};async function rj(t,e){let{path:r,command:n,select:i}=t,{task:a}=e;if(a.state in IE&&!r.startsWith(".multicoder"))return"Error: cannot modify source code yet. At this point you should only work on task documents.";let{error:u}=await yk(t,e);return i&&i.split(`
`).length<2&&n=="append"&&(r.endsWith(".md")?u="Selection is too small, use the full section text":u="Selection is too small, provide at least 3-5 lines"),u?"Tool error: "+u:"ok"}async function yk({path:t,command:e,select:r,content:n},i){let a=vi(t,i.id),u=null,f=null,m=n;if(await ef(a)){if(e==="create")return{error:"File already exists: "+t}}else if(e!=="create")return{error:"File not found: "+t};switch(e=="insert"&&n.endsWith(r)&&(n=n.replace(r,"")),e=="update"&&r&&(r=""),e){case"insert":case"append":case"replace":case"update":if(u=await NE.workspace.openTextDocument(a),f=await Qv(a),m=oj(f,r,n,u.eol,e),typeof m=="object")return m}return{document:u,before:f,after:m}}async function nj(t,e,r){let{path:n,summary:i,command:a,select:u,content:f}=t,{log:m,task:y}=e,x=vi(n,e.id),P=n.split("/").pop();if(r!="ok")return y.state in IE&&!n.startsWith(".multicoder")&&m.warn(`[workflow] Code not allowed: ${i}`,{filename:P,command:a,summary:i}),r;let{document:V,before:G,after:Y,error:q}=await yk(t,e);if(q)return q;let J=$e=>$e?$e.split(`
`).length:0,ee=J(u),ve=J(f);m.info(i,{filename:P,command:a,selectedLines:ee,contentLines:ve,event:`tool.editor.${a}`});try{await ww(x,Y)}catch($e){throw m.warn("Cannot write file - "+$e.message,{filename:P,command:a,summary:i,...$e}),$e}V=await NE.workspace.openTextDocument(x);let ye=V.languageId,ue=_w();n.startsWith(".multicoder")||y.edits.push({id:ue,summary:i,path:n,before:G,after:Y,search:f}),hk(e,a,ue,i,f||u,n,ye),await ij(.1);let _e="";n.endsWith(".md")?_e=await z_(x,!0):_e=await ug(x,!0);let Ue=a=="create"?"created":"modified";return y.state in IE?_e+`

Document ${Ue}. Provide a very short summary using ${ei.name} tool`:_e+`

File ${n} ${Ue} successfully.`}async function ij(t){return new Promise(e=>setTimeout(e,t*1e3))}function aj(t){return/^\s*\/\//.test(t)||/^\s*\/\*/.test(t)}function gk(t,e){let r=aj(t)?"":`
`;return t.endsWith(`
`)&&e.startsWith(`
`)?t+e:t.endsWith(`
`)||e.startsWith(`
`)?t+r+e:t+r+`
`+e}function oj(t,e,r,n,i){let a=t.replace(/\r\n/g,`
`);if(i=="update"&&a==r)return{error:"The new content is the same as the original file. No changes were made."};if(i=="replace"&&e==r)return{error:"The new content is the same as the selection. No changes were made."};e||(e=a),(a+`
`).endsWith(e)&&(a+=`
`),i=="insert"&&(r=gk(r,e)),i=="append"&&(r=gk(e,r));let u=a.replace(e,r);return a==u?{error:"The selected text cannot be found in the current file. Did you provide exact full consecutive lines including whitespace?"}:(n==2&&(u=u.replace(/\n/g,`\r
`)),u)}var hp={name:KU,description:ZU,parameters:_k,execute:rj,finalize:nj,progress:ej,repair:tj};var wk=require("vscode");var{fs:CE}=wk.workspace,sj="multicoder_filesystem",uj=Zt`
    Manage files and directories
`,cj=Zt`
    Commands:
    - /create: creates a new directory at the specified path.
    - /delete: deletes a file or directory at the specified path (recursive)
`,lj=Zt`
    File or directory path:
    - use full path, not just a filename
    - directory path MUST end with '/' (slash)
`,bk=T.object({command:T.enum(["create","delete"]).describe(cj),path:T.string().describe(lj)}),fj="Working with files ...";function dj(t,e){let r=t.path[0];if(t.code=="invalid_enum_value"&&r=="command"&&String(t.received).startsWith("/")){let n=bk.shape.command.enum[String(t.received).slice(1)];if(n)return{command:n}}}async function pj({command:t,path:e},{id:r,log:n}){let i=e.replace(/\/$/,"").split("/").pop(),a=vi(e,r);switch(n.info(i,{command:t,event:`tool.filesystem.${t}`}),t){case"create":return e.endsWith("/")?await gh(a)?`Directory already exists - ${e}`:(await CE.createDirectory(a),`Directory created - ${e}`):`Tool error: directory path must end with a slash (/). To create a file use ${hp.name} tool.`;case"delete":return await gh(a)?(await CE.delete(a,{recursive:!0}),`Directory deleted - ${e}`):await ef(a)?(await CE.delete(a),`File deleted - ${e}`):`Tool error: File or directory does not exist - ${e}`}}var Qw={name:sj,description:uj,parameters:bk,execute:pj,progress:fj,repair:dj};var hj="multicoder_question",mj=Zt`
    Ask a single focused question to collect missing information from the user.

    Purpose:
    - Gather specific information needed to proceed with a task
    - Resolve ambiguity in user requests
    - Guide user through decisions with clear options

    Usage guidelines:
    - Collect all necessary information step-by-step, use this tool up to 10 times if needed
    - Limit choices to 3-7 options for optimal readability
    - Avoid open-ended questions - provide concrete choices
    - Always provide most appropriate and useful default value

    Examples:
    - Yes/No decisions: "Should this function handle null values?"
    - Multiple choice: "Which HTTP method should this endpoint use?"
    - Technology selection: "Which database type best fits these requirements?"
`,vj="The main question text to display to the user. Should be clear, specific and end with question mark.",gj="Additional explanation, background information, or guidance to help user make an informed choice.",_j="List of possible answers the user can select from. Each choice should be distinct and meaningful.",yj="When true, user can select multiple choices. When false, only single choice is allowed.",wj="Pre-selected choice(s) shown initially. Must be one of the provided choices or comma-separated list.",bj=T.object({text:T.string().describe(vj),context:T.string().max(2e3).describe(gj),choices:T.array(T.string()).describe(_j),allowMultiple:T.boolean().describe(yj),defaultValue:T.string().describe(wj)}),Sj="Preparing questions ...";function Ej(t,{choices:e}){if(t.code=="invalid_type"){let r=t.path[0];if(t.received=="undefined"){if(r=="allowMultiple")return{allowMultiple:!1};if(r=="defaultValue"&&Array.isArray(e)&&e.length>0)return{defaultValue:e[0]}}}}var kE=[];async function Tj(t,e){return t.defaultValue||"No answer"}async function xj({text:t,context:e,choices:r,allowMultiple:n,defaultValue:i},a,u){let f=[],{log:m,stream:y}=a,x=i||"No answer";for(m.info(t,{choices:r,context:e,allowMultiple:n,defaultValue:i,event:"tool.question"});;){if(y.markdown(Ij(t,e)),n&&f.length?y.markdown(Nj(f)):y.markdown(`

(`+x+`)

`),a.auto)return x;let P=Cj(r,f,n),V=await DE(a,{suggestions:P});if(n){if(!V.prompt)return x=f.length?f.join(", "):x,kE.push({question:t,answer:x}),x}else return x=V.prompt||x,kE.push({question:t,answer:x}),x;f.push(V.prompt)}}var Ij=(t,e)=>`

---
Q: **${t}**

${e}
`,Nj=t=>`
${t.map(e=>`
- ${e}`)}
`;function Cj(t,e,r){let n=[];return t.forEach(i=>{e.indexOf(i)==-1&&!/please/i.test(i)&&n.push({command:"",prompt:i})}),r&&n.push({command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"}),n}var W_={name:hj,description:mj,parameters:bj,execute:Tj,finalize:xj,progress:Sj,repair:Ej,latest:kE};var kj="multicoder_think",Dj=Zt`
    Use the tool to think about something. 
    It will not obtain new information or make any changes to the repository, but just log the thought. 
    Use it when some reasoning or brainstorming is needed. 
`,Rj=T.object({thought:T.string().describe("Your thoughts")});async function Oj({thought:t},{log:e,stream:r}){return e.info(`${t.slice(0,60).replace(/\n/g," ")}...`,{event:"tool.think"}),r.markdown(`

 (Thinking) `+t+`

`),"ok"}var Sk={name:kj,description:Dj,parameters:Rj,execute:Oj};var Ek="multicoder_evaluation",Aj=Zt`
    Reports the evaluation results. Use this tool when requested to evaluate the next step or task.

    Evaluate the next step for 
    - lack of clarity (ambiguity, incompleteness, imprecision),
    - complexity (functional scope, architectural scale, expertise required)
    - workload (amount of code, projected effort, budget estimate)

    Carefully choose the most appropriate level for each evaluated dimension.
`,Pj=Zt`
    Using ${Ek} tool reply with an evaluation of the next step for lack of clarity, complexity and workload.
`,Mj=Zt`
    Ambiguity:
        0 - n/a
        1 - very low
        2 - low
        3 - medium
        4 - high
        5 - very high
`,Lj=Zt`
    Incompleteness:
        0 - n/a
        1 - very low
        2 - low
        3 - medium
        4 - high
        5 - very high
`,Fj=Zt`
    Imprecision:
        0 - n/a
        1 - very low
        2 - low
        3 - medium
        4 - high
        5 - very high
`,Uj=Zt`
    Functional scope:
        0 - n/a
        1 - implementation details, simple bugfix, code formatting
        2 - user story, issue, enhancement, complex bugfix
        3 - product feature, architectural refactoring
        4 - epic, application, library, subsystem
        5 - full product, platform, framework
`,jj=Zt`
    Architectural scale:
        0 - n/a
        1 - code level (local scope): variable naming, control flow, error handling
        2 - component level (single module): classes, functions, state management, data structures
        3 - service level (multiple modules): APIs, database models, service integrations
        4 - application level (system-wide): application architecture, system design
        5 - enterprise level (cross-system): distributed systems, cloud infrastructure, scalability
`,Bj=Zt`
    Software development expertise required:
        0 - n/a
        1 - junior (1 year)
        2 - mid (1-3 years)
        3 - senior (3-5 years)
        4 - staff (5-10 years)
        5 - principal (10+) years
`,$j=Zt`
    Volume of sourcecode changes, lines of code (LoC):
        0 - n/a
        1 - 20-50 LoC, small change
        2 - 100-200 LoC, single commit
        3 - 500-1000 LoC, multiple commits, single pull request (PR)
        4 - 2000-5000 LoC, multiple PRs, dedicated branch, small repository
        5 - above 10000 LoC, large repository or multiple repositories
`,Yj=Zt`
    Projected effort:
        0 - n/a
        1 - minutes
        2 - hours
        3 - days
        4 - weeks
        5 - months
`,qj=Zt`
    Development budget estimate:
        0 - n/a
        1 - very low
        2 - $20-200
        3 - $200-2000
        4 - $2000-20000
        5 - above $20000
`,Hj=Zt`
    true if task requirements need further clarification or refinement
`,Vj=Zt`
    true if solution is not trivial and will benefit from detailed design
`,Gj=Zt`
    true to split the task into smaller, manageable steps
`,zj=T.object({ambiguity:T.number().describe(Mj),incompleteness:T.number().describe(Lj),imprecision:T.number().describe(Fj),functional:T.number().describe(Uj),architectural:T.number().describe(jj),expertise:T.number().describe(Bj),sourcecode:T.number().describe($j),effort:T.number().describe(Yj),budget:T.number().describe(qj),requirements:T.boolean().describe(Hj),design:T.boolean().describe(Vj),planning:T.boolean().describe(Gj)}),Wj=()=>({ambiguity:1,incompleteness:1,imprecision:1,functional:1,architectural:1,expertise:1,sourcecode:1,effort:1,budget:1,requirements:!1,design:!1,planning:!1});function Jj(t,{effort:e,budget:r}){if(t.code=="invalid_type"){let n=t.path[0];if(t.received=="undefined"&&n=="sourcecode"&&(e||r))return{sourcecode:e||r}}}async function Kj(t,{log:e}){let r=m=>m.toFixed(1),[n,i,a]=Tk(t),u=`${r(n)} ${r(i)} ${r(a)} `,f=`${t.requirements} ${t.design} ${t.planning}`;return e.info(u+f,{vagueness:n,complexity:i,workload:a,...t,event:"tool.evaluation"}),"ok"}function Tk(t){let e=(t.ambiguity+t.incompleteness+t.imprecision)/3,r=(t.architectural+t.functional+t.expertise)/3,n=(t.effort+t.sourcecode+t.budget)/3;return[e,r,n]}var J_={name:Ek,description:Aj,parameters:zj,execute:Kj,retry:Pj,fallback:Wj,repair:Jj,compute:Tk};var Ik=Symbol("Let zodToJsonSchema decide on which parser to use");var xk={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Nk=t=>typeof t=="string"?{...xk,name:t}:{...xk,...t};var Ck=t=>{let e=Nk(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}};function RE(t,e,r,n){n!=null&&n.errorMessages&&r&&(t.errorMessage={...t.errorMessage,[e]:r})}function _n(t,e,r,n,i){t[e]=r,RE(t,e,n,i)}function kk(){return{}}function Dk(t,e){var n,i,a;let r={type:"array"};return(n=t.type)!=null&&n._def&&((a=(i=t.type)==null?void 0:i._def)==null?void 0:a.typeName)!==Je.ZodAny&&(r.items=yr(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&_n(r,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&_n(r,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(_n(r,"minItems",t.exactLength.value,t.exactLength.message,e),_n(r,"maxItems",t.exactLength.value,t.exactLength.message,e)),r}function Rk(t,e){let r={type:"integer",format:"int64"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?_n(r,"minimum",n.value,n.message,e):_n(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),_n(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?_n(r,"maximum",n.value,n.message,e):_n(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),_n(r,"maximum",n.value,n.message,e));break;case"multipleOf":_n(r,"multipleOf",n.value,n.message,e);break}return r}function Ok(){return{type:"boolean"}}function eb(t,e){return yr(t.type._def,e)}var Ak=(t,e)=>yr(t.innerType._def,e);function OE(t,e,r){let n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((i,a)=>OE(t,e,i))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Zj(t,e)}}var Zj=(t,e)=>{let r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(let n of t.checks)switch(n.kind){case"min":_n(r,"minimum",n.value,n.message,e);break;case"max":_n(r,"maximum",n.value,n.message,e);break}return r};function Pk(t,e){return{...yr(t.innerType._def,e),default:t.defaultValue()}}function Mk(t,e){return e.effectStrategy==="input"?yr(t.schema._def,e):{}}function Lk(t){return{type:"string",enum:Array.from(t.values)}}var Xj=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function Fk(t,e){let r=[yr(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),yr(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a),n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,i=[];return r.forEach(a=>{if(Xj(a))i.push(...a.allOf),a.unevaluatedProperties===void 0&&(n=void 0);else{let u=a;if("additionalProperties"in a&&a.additionalProperties===!1){let{additionalProperties:f,...m}=a;u=m}else n=void 0;i.push(u)}}),i.length?{allOf:i,...n}:void 0}function Uk(t,e){let r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}var AE,Eh={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(AE===void 0&&(AE=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),AE),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function tb(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":_n(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e);break;case"max":_n(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Th(r,"email",n.message,e);break;case"format:idn-email":Th(r,"idn-email",n.message,e);break;case"pattern:zod":nl(r,Eh.email,n.message,e);break}break;case"url":Th(r,"uri",n.message,e);break;case"uuid":Th(r,"uuid",n.message,e);break;case"regex":nl(r,n.regex,n.message,e);break;case"cuid":nl(r,Eh.cuid,n.message,e);break;case"cuid2":nl(r,Eh.cuid2,n.message,e);break;case"startsWith":nl(r,RegExp(`^${PE(n.value,e)}`),n.message,e);break;case"endsWith":nl(r,RegExp(`${PE(n.value,e)}$`),n.message,e);break;case"datetime":Th(r,"date-time",n.message,e);break;case"date":Th(r,"date",n.message,e);break;case"time":Th(r,"time",n.message,e);break;case"duration":Th(r,"duration",n.message,e);break;case"length":_n(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e),_n(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"includes":{nl(r,RegExp(PE(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&Th(r,"ipv4",n.message,e),n.version!=="v4"&&Th(r,"ipv6",n.message,e);break}case"base64url":nl(r,Eh.base64url,n.message,e);break;case"jwt":nl(r,Eh.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&nl(r,Eh.ipv4Cidr,n.message,e),n.version!=="v4"&&nl(r,Eh.ipv6Cidr,n.message,e);break}case"emoji":nl(r,Eh.emoji(),n.message,e);break;case"ulid":{nl(r,Eh.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Th(r,"binary",n.message,e);break}case"contentEncoding:base64":{_n(r,"contentEncoding","base64",n.message,e);break}case"pattern:zod":{nl(r,Eh.base64,n.message,e);break}}break}case"nanoid":nl(r,Eh.nanoid,n.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function PE(t,e){return e.patternStrategy==="escape"?eB(t):t}var Qj=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function eB(t){let e="";for(let r=0;r<t.length;r++)Qj.has(t[r])||(e+="\\"),e+=t[r];return e}function Th(t,e,r,n){var i;t.format||(i=t.anyOf)!=null&&i.some(a=>a.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):_n(t,"format",e,r,n)}function nl(t,e,r,n){var i;t.pattern||(i=t.allOf)!=null&&i.some(a=>a.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:jk(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):_n(t,"pattern",jk(e,n),r,n)}function jk(t,e){var m;if(!e.applyRegexFlags||!t.flags)return t.source;let r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},n=r.i?t.source.toLowerCase():t.source,i="",a=!1,u=!1,f=!1;for(let y=0;y<n.length;y++){if(a){i+=n[y],a=!1;continue}if(r.i){if(u){if(n[y].match(/[a-z]/)){f?(i+=n[y],i+=`${n[y-2]}-${n[y]}`.toUpperCase(),f=!1):n[y+1]==="-"&&((m=n[y+2])!=null&&m.match(/[a-z]/))?(i+=n[y],f=!0):i+=`${n[y]}${n[y].toUpperCase()}`;continue}}else if(n[y].match(/[a-z]/)){i+=`[${n[y]}${n[y].toUpperCase()}]`;continue}}if(r.m){if(n[y]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(n[y]==="$"){i+=`($|(?=[\r
]))`;continue}}if(r.s&&n[y]==="."){i+=u?`${n[y]}\r
`:`[${n[y]}\r
]`;continue}i+=n[y],n[y]==="\\"?a=!0:u&&n[y]==="]"?u=!1:!u&&n[y]==="["&&(u=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}function rb(t,e){var n,i,a,u,f,m;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((n=t.keyType)==null?void 0:n._def.typeName)===Je.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((y,x)=>({...y,[x]:yr(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",x]})??{}}),{}),additionalProperties:!1};let r={type:"object",additionalProperties:yr(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return r;if(((i=t.keyType)==null?void 0:i._def.typeName)===Je.ZodString&&((a=t.keyType._def.checks)!=null&&a.length)){let{type:y,...x}=tb(t.keyType._def,e);return{...r,propertyNames:x}}else{if(((u=t.keyType)==null?void 0:u._def.typeName)===Je.ZodEnum)return{...r,propertyNames:{enum:t.keyType._def.values}};if(((f=t.keyType)==null?void 0:f._def.typeName)===Je.ZodBranded&&t.keyType._def.type._def.typeName===Je.ZodString&&((m=t.keyType._def.type._def.checks)!=null&&m.length)){let{type:y,...x}=eb(t.keyType._def,e);return{...r,propertyNames:x}}}return r}function Bk(t,e){if(e.mapStrategy==="record")return rb(t,e);let r=yr(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},n=yr(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function $k(t){let e=t.values,n=Object.keys(t.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),i=Array.from(new Set(n.map(a=>typeof a)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:n}}function Yk(){return{not:{}}}function qk(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var My={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Vk(t,e){if(e.target==="openApi3")return Hk(t,e);let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in My&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((i,a)=>{let u=My[a._def.typeName];return u&&!i.includes(u)?[...i,u]:i},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((i,a)=>{let u=typeof a._def.value;switch(u){case"string":case"number":case"boolean":return[...i,u];case"bigint":return[...i,"integer"];case"object":if(a._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(n.length===r.length){let i=n.filter((a,u,f)=>f.indexOf(a)===u);return{type:i.length>1?i:i[0],enum:r.reduce((a,u)=>a.includes(u._def.value)?a:[...a,u._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,i)=>[...n,...i._def.values.filter(a=>!n.includes(a))],[])};return Hk(t,e)}var Hk=(t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,i)=>yr(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function Gk(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:My[t.innerType._def.typeName],nullable:!0}:{type:[My[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let n=yr(t.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let r=yr(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function zk(t,e){let r={type:"number"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"int":r.type="integer",RE(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?_n(r,"minimum",n.value,n.message,e):_n(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),_n(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?_n(r,"maximum",n.value,n.message,e):_n(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),_n(r,"maximum",n.value,n.message,e));break;case"multipleOf":_n(r,"multipleOf",n.value,n.message,e);break}return r}function tB(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":yr(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":yr(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function Wk(t,e){let r=e.target==="openAi",n={type:"object",...Object.entries(t.shape()).reduce((i,[a,u])=>{if(u===void 0||u._def===void 0)return i;let f=u.isOptional();f&&r&&(u instanceof rf&&(u=u._def.innerType),u.isNullable()||(u=u.nullable()),f=!1);let m=yr(u._def,{...e,currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]});return m===void 0?i:{properties:{...i.properties,[a]:m},required:f?i.required:[...i.required,a]}},{properties:{},required:[]}),additionalProperties:tB(t,e)};return n.required.length||delete n.required,n}var Jk=(t,e)=>{var n;if(e.currentPath.toString()===((n=e.propertyPath)==null?void 0:n.toString()))return yr(t.innerType._def,e);let r=yr(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}};var Kk=(t,e)=>{if(e.pipeStrategy==="input")return yr(t.in._def,e);if(e.pipeStrategy==="output")return yr(t.out._def,e);let r=yr(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=yr(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(i=>i!==void 0)}};function Zk(t,e){return yr(t.type._def,e)}function Xk(t,e){let n={type:"array",uniqueItems:!0,items:yr(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&_n(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&_n(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}function Qk(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>yr(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:yr(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>yr(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function eD(){return{not:{}}}function tD(){return{}}var rD=(t,e)=>yr(t.innerType._def,e);var nD=(t,e,r)=>{switch(e){case Je.ZodString:return tb(t,r);case Je.ZodNumber:return zk(t,r);case Je.ZodObject:return Wk(t,r);case Je.ZodBigInt:return Rk(t,r);case Je.ZodBoolean:return Ok();case Je.ZodDate:return OE(t,r);case Je.ZodUndefined:return eD();case Je.ZodNull:return qk(r);case Je.ZodArray:return Dk(t,r);case Je.ZodUnion:case Je.ZodDiscriminatedUnion:return Vk(t,r);case Je.ZodIntersection:return Fk(t,r);case Je.ZodTuple:return Qk(t,r);case Je.ZodRecord:return rb(t,r);case Je.ZodLiteral:return Uk(t,r);case Je.ZodEnum:return Lk(t);case Je.ZodNativeEnum:return $k(t);case Je.ZodNullable:return Gk(t,r);case Je.ZodOptional:return Jk(t,r);case Je.ZodMap:return Bk(t,r);case Je.ZodSet:return Xk(t,r);case Je.ZodLazy:return()=>t.getter()._def;case Je.ZodPromise:return Zk(t,r);case Je.ZodNaN:case Je.ZodNever:return Yk();case Je.ZodEffects:return Mk(t,r);case Je.ZodAny:return kk();case Je.ZodUnknown:return tD();case Je.ZodDefault:return Pk(t,r);case Je.ZodBranded:return eb(t,r);case Je.ZodReadonly:return rD(t,r);case Je.ZodCatch:return Ak(t,r);case Je.ZodPipeline:return Kk(t,r);case Je.ZodFunction:case Je.ZodVoid:case Je.ZodSymbol:return;default:return(n=>{})(e)}};function yr(t,e,r=!1){var f;let n=e.seen.get(t);if(e.override){let m=(f=e.override)==null?void 0:f.call(e,t,e,n,r);if(m!==Ik)return m}if(n&&!r){let m=rB(n,e);if(m!==void 0)return m}let i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);let a=nD(t,t.typeName,e),u=typeof a=="function"?yr(a(),e):a;if(u&&iB(t,e,u),e.postProcess){let m=e.postProcess(u,t,e);return i.jsonSchema=u,m}return i.jsonSchema=u,u}var rB=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:nB(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},nB=(t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},iB=(t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r);var iD=(t,e)=>{let r=Ck(e),n=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((m,[y,x])=>({...m,[y]:yr(x._def,{...r,currentPath:[...r.basePath,r.definitionPath,y]},!0)??{}}),{}):void 0,i=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,a=yr(t._def,i===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,i]},!1)??{},u=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;u!==void 0&&(a.title=u);let f=i===void 0?n?{...a,[r.definitionPath]:n}:a:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,i].join("/"),[r.definitionPath]:{...n,[i]:a}};return r.target==="jsonSchema7"?f.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(f.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in f||"oneOf"in f||"allOf"in f||"type"in f&&Array.isArray(f.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),f};var aD=iD;var Ly={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},Fy={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},Uy={code:"4",name:"assistant_message",parse:t=>{if(t==null||typeof t!="object"||!("id"in t)||!("role"in t)||!("content"in t)||typeof t.id!="string"||typeof t.role!="string"||t.role!=="assistant"||!Array.isArray(t.content)||!t.content.every(e=>e!=null&&typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&e.text!=null&&typeof e.text=="object"&&"value"in e.text&&typeof e.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:t}}},jy={code:"5",name:"assistant_control_data",parse:t=>{if(t==null||typeof t!="object"||!("threadId"in t)||!("messageId"in t)||typeof t.threadId!="string"||typeof t.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:t.threadId,messageId:t.messageId}}}},By={code:"6",name:"data_message",parse:t=>{if(t==null||typeof t!="object"||!("role"in t)||!("data"in t)||typeof t.role!="string"||t.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:t}}},aB=[Ly,Fy,Uy,jy,By],hz={[Ly.code]:Ly,[Fy.code]:Fy,[Uy.code]:Uy,[jy.code]:jy,[By.code]:By},mz={[Ly.name]:Ly.code,[Fy.name]:Fy.code,[Uy.name]:Uy.code,[jy.name]:jy.code,[By.name]:By.code},vz=aB.map(t=>t.code);function oB(t){let e=["ROOT"],r=-1,n=null;function i(m,y,x){switch(m){case'"':{r=y,e.pop(),e.push(x),e.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=y,n=y,e.pop(),e.push(x),e.push("INSIDE_LITERAL");break}case"-":{e.pop(),e.push(x),e.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=y,e.pop(),e.push(x),e.push("INSIDE_NUMBER");break}case"{":{r=y,e.pop(),e.push(x),e.push("INSIDE_OBJECT_START");break}case"[":{r=y,e.pop(),e.push(x),e.push("INSIDE_ARRAY_START");break}}}function a(m,y){switch(m){case",":{e.pop(),e.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=y,e.pop();break}}}function u(m,y){switch(m){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=y,e.pop();break}}}for(let m=0;m<t.length;m++){let y=t[m];switch(e[e.length-1]){case"ROOT":i(y,m,"FINISH");break;case"INSIDE_OBJECT_START":{switch(y){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}case"}":{r=m,e.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(y){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(y){case'"':{e.pop(),e.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(y){case":":{e.pop(),e.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{i(y,m,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{a(y,m);break}case"INSIDE_STRING":{switch(y){case'"':{e.pop(),r=m;break}case"\\":{e.push("INSIDE_STRING_ESCAPE");break}default:r=m}break}case"INSIDE_ARRAY_START":{switch(y){case"]":{r=m,e.pop();break}default:{r=m,i(y,m,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(y){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=m,e.pop();break}default:{r=m;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{i(y,m,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{e.pop(),r=m;break}case"INSIDE_NUMBER":{switch(y){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=m;break}case"e":case"E":case"-":case".":break;case",":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&u(y,m),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(y,m);break}case"}":{e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(y,m);break}case"]":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&u(y,m);break}default:{e.pop();break}}break}case"INSIDE_LITERAL":{let P=t.substring(n,m+1);!"false".startsWith(P)&&!"true".startsWith(P)&&!"null".startsWith(P)?(e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?a(y,m):e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&u(y,m)):r=m;break}}}let f=t.slice(0,r+1);for(let m=e.length-1;m>=0;m--)switch(e[m]){case"INSIDE_STRING":{f+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{f+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{f+="]";break}case"INSIDE_LITERAL":{let x=t.substring(n,t.length);"true".startsWith(x)?f+="true".slice(x.length):"false".startsWith(x)?f+="false".slice(x.length):"null".startsWith(x)&&(f+="null".slice(x.length))}}return f}function oD(t){if(t===void 0)return{value:void 0,state:"undefined-input"};let e=ym({text:t});return e.success?{value:e.value,state:"successful-parse"}:(e=ym({text:oB(t)}),e.success?{value:e.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var sB={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},uB={code:"2",name:"data",parse:t=>{if(!Array.isArray(t))throw new Error('"data" parts expect an array value.');return{type:"data",value:t}}},cB={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},lB={code:"8",name:"message_annotations",parse:t=>{if(!Array.isArray(t))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:t}}},fB={code:"9",name:"tool_call",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string"||!("args"in t)||typeof t.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:t}}},dB={code:"a",name:"tool_result",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("result"in t))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:t}}},pB={code:"b",name:"tool_call_streaming_start",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:t}}},hB={code:"c",name:"tool_call_delta",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("argsTextDelta"in t)||typeof t.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:t}}},mB={code:"d",name:"finish_message",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');let e={finishReason:t.finishReason};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),{type:"finish_message",value:e}}},vB={code:"e",name:"finish_step",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');let e={finishReason:t.finishReason,isContinued:!1};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),"isContinued"in t&&typeof t.isContinued=="boolean"&&(e.isContinued=t.isContinued),{type:"finish_step",value:e}}},gB={code:"f",name:"start_step",parse:t=>{if(t==null||typeof t!="object"||!("messageId"in t)||typeof t.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:t.messageId}}}},_B={code:"g",name:"reasoning",parse:t=>{if(typeof t!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:t}}},yB={code:"h",name:"source",parse:t=>{if(t==null||typeof t!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:t}}},wB={code:"i",name:"redacted_reasoning",parse:t=>{if(t==null||typeof t!="object"||!("data"in t)||typeof t.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:t.data}}}},bB={code:"j",name:"reasoning_signature",parse:t=>{if(t==null||typeof t!="object"||!("signature"in t)||typeof t.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:t.signature}}}},nb=[sB,uB,cB,lB,fB,dB,pB,hB,mB,vB,gB,_B,yB,wB,bB],_z=Object.fromEntries(nb.map(t=>[t.code,t])),yz=Object.fromEntries(nb.map(t=>[t.name,t.code])),wz=nb.map(t=>t.code);function Hs(t,e){let r=nb.find(n=>n.name===t);if(!r)throw new Error(`Invalid stream part type: ${t}`);return`${r.code}:${JSON.stringify(e)}
`}function SB(t,e){var r;let n=(r=e==null?void 0:e.useReferences)!=null?r:!1;return EB(aD(t,{$refStrategy:n?"root":"none",target:"jsonSchema7"}),{validate:i=>{let a=t.safeParse(i);return a.success?{success:!0,value:a.data}:{success:!1,error:a.error}}})}var ME=Symbol.for("vercel.ai.schema");function EB(t,{validate:e}={}){return{[ME]:!0,_type:void 0,[Cy]:!0,jsonSchema:t,validate:e}}function TB(t){return typeof t=="object"&&t!==null&&ME in t&&t[ME]===!0&&"jsonSchema"in t&&"validate"in t}function i_(t){return TB(t)?t:SB(t)}var sD=typeof globalThis=="object"?globalThis:global;var yv="1.9.0";var uD=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function xB(t){var e=new Set([t]),r=new Set,n=t.match(uD);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(m){return m===t};function a(f){return r.add(f),!1}function u(f){return e.add(f),!0}return function(m){if(e.has(m))return!0;if(r.has(m))return!1;var y=m.match(uD);if(!y)return a(m);var x={major:+y[1],minor:+y[2],patch:+y[3],prerelease:y[4]};return x.prerelease!=null||i.major!==x.major?a(m):i.major===0?i.minor===x.minor&&i.patch<=x.patch?u(m):a(m):i.minor<=x.minor?u(m):a(m)}}var cD=xB(yv);var IB=yv.split(".")[0],$y=Symbol.for("opentelemetry.js.api."+IB),Yy=sD;function K_(t,e,r,n){var i;n===void 0&&(n=!1);var a=Yy[$y]=(i=Yy[$y])!==null&&i!==void 0?i:{version:yv};if(!n&&a[t]){var u=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(u.stack||u.message),!1}if(a.version!==yv){var u=new Error("@opentelemetry/api: Registration of version v"+a.version+" for "+t+" does not match previously registered API v"+yv);return r.error(u.stack||u.message),!1}return a[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+yv+"."),!0}function wv(t){var e,r,n=(e=Yy[$y])===null||e===void 0?void 0:e.version;if(!(!n||!cD(n)))return(r=Yy[$y])===null||r===void 0?void 0:r[t]}function Z_(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+yv+".");var r=Yy[$y];r&&delete r[t]}var NB=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],u;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(f){u={error:f}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(u)throw u.error}}return a},CB=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},lD=function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return qy("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return qy("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return qy("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return qy("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return qy("verbose",this._namespace,e)},t}();function qy(t,e,r){var n=wv("diag");if(n)return r.unshift(e),n[t].apply(n,CB([],NB(r),!1))}var il;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(il||(il={}));function fD(t,e){t<il.NONE?t=il.NONE:t>il.ALL&&(t=il.ALL),e=e||{};function r(n,i){var a=e[n];return typeof a=="function"&&t>=i?a.bind(e):function(){}}return{error:r("error",il.ERROR),warn:r("warn",il.WARN),info:r("info",il.INFO),debug:r("debug",il.DEBUG),verbose:r("verbose",il.VERBOSE)}}var kB=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],u;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(f){u={error:f}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(u)throw u.error}}return a},DB=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},RB="diag",X_=function(){function t(){function e(i){return function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];var f=wv("diag");if(f)return f[i].apply(f,DB([],kB(a),!1))}}var r=this,n=function(i,a){var u,f,m;if(a===void 0&&(a={logLevel:il.INFO}),i===r){var y=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((u=y.stack)!==null&&u!==void 0?u:y.message),!1}typeof a=="number"&&(a={logLevel:a});var x=wv("diag"),P=fD((f=a.logLevel)!==null&&f!==void 0?f:il.INFO,i);if(x&&!a.suppressOverrideMessage){var V=(m=new Error().stack)!==null&&m!==void 0?m:"<failed to generate stacktrace>";x.warn("Current logger will be overwritten from "+V),P.warn("Current logger will overwrite one already registered from "+V)}return K_("diag",P,r,!0)};r.setLogger=n,r.disable=function(){Z_(RB,r)},r.createComponentLogger=function(i){return new lD(i)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}();function dD(t){return Symbol.for(t)}var OB=function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,i){var a=new t(r._currentContext);return a._currentContext.set(n,i),a},r.deleteValue=function(n){var i=new t(r._currentContext);return i._currentContext.delete(n),i}}return t}(),pD=new OB;var AB=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],u;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(f){u={error:f}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(u)throw u.error}}return a},PB=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},hD=function(){function t(){}return t.prototype.active=function(){return pD},t.prototype.with=function(e,r,n){for(var i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];return r.call.apply(r,PB([n],AB(i),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}();var MB=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],u;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(f){u={error:f}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(u)throw u.error}}return a},LB=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},LE="context",FB=new hD,ib=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return K_(LE,e,X_.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var i,a=[],u=3;u<arguments.length;u++)a[u-3]=arguments[u];return(i=this._getContextManager()).with.apply(i,LB([e,r,n],MB(a),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return wv(LE)||FB},t.prototype.disable=function(){this._getContextManager().disable(),Z_(LE,X_.instance())},t}();var ab;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(ab||(ab={}));var FE="0000000000000000",UE="00000000000000000000000000000000",mD={traceId:UE,spanId:FE,traceFlags:ab.NONE};var cg=function(){function t(e){e===void 0&&(e=mD),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.addLink=function(e){return this},t.prototype.addLinks=function(e){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t}();var jE=dD("OpenTelemetry Context Key SPAN");function ob(t){return t.getValue(jE)||void 0}function vD(){return ob(ib.getInstance().active())}function Hy(t,e){return t.setValue(jE,e)}function gD(t){return t.deleteValue(jE)}function _D(t,e){return Hy(t,new cg(e))}function sb(t){var e;return(e=ob(t))===null||e===void 0?void 0:e.spanContext()}var UB=/^([0-9a-f]{32})$/i,jB=/^[0-9a-f]{16}$/i;function BB(t){return UB.test(t)&&t!==UE}function $B(t){return jB.test(t)&&t!==FE}function ub(t){return BB(t.traceId)&&$B(t.spanId)}function yD(t){return new cg(t)}var BE=ib.getInstance(),cb=function(){function t(){}return t.prototype.startSpan=function(e,r,n){n===void 0&&(n=BE.active());var i=!!(r!=null&&r.root);if(i)return new cg;var a=n&&sb(n);return YB(a)&&ub(a)?new cg(a):new cg},t.prototype.startActiveSpan=function(e,r,n,i){var a,u,f;if(!(arguments.length<2)){arguments.length===2?f=r:arguments.length===3?(a=r,f=n):(a=r,u=n,f=i);var m=u??BE.active(),y=this.startSpan(e,a,m),x=Hy(m,y);return BE.with(x,f,void 0,y)}},t}();function YB(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var qB=new cb,wD=function(){function t(e,r,n,i){this._provider=e,this.name=r,this.version=n,this.options=i}return t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,i){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):qB},t}();var bD=function(){function t(){}return t.prototype.getTracer=function(e,r,n){return new cb},t}();var HB=new bD,$E=function(){function t(){}return t.prototype.getTracer=function(e,r,n){var i;return(i=this.getDelegateTracer(e,r,n))!==null&&i!==void 0?i:new wD(this,e,r,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:HB},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(e,r,n)},t}();var Q_;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(Q_||(Q_={}));var YE="trace",SD=function(){function t(){this._proxyTracerProvider=new $E,this.wrapSpanContext=yD,this.isSpanContextValid=ub,this.deleteSpan=gD,this.getSpan=ob,this.getActiveSpan=vD,this.getSpanContext=sb,this.setSpan=Hy,this.setSpanContext=_D}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=K_(YE,this._proxyTracerProvider,X_.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return wv(YE)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){Z_(YE,X_.instance()),this._proxyTracerProvider=new $E},t}();var qE=SD.getInstance();var VB=Object.defineProperty,KE=(t,e)=>{for(var r in e)VB(t,r,{get:e[r],enumerable:!0})};function fb(t,{contentType:e,dataStreamVersion:r}){let n=new Headers(t??{});return n.has("Content-Type")||n.set("Content-Type",e),r!==void 0&&n.set("X-Vercel-AI-Data-Stream",r),n}function ED(t,{contentType:e,dataStreamVersion:r}){let n={};if(t!=null)for(let[i,a]of Object.entries(t))n[i]=a;return n["Content-Type"]==null&&(n["Content-Type"]=e),r!==void 0&&(n["X-Vercel-AI-Data-Stream"]=r),n}function TD({response:t,status:e,statusText:r,headers:n,stream:i}){t.writeHead(e??200,r,n);let a=i.getReader();(async()=>{try{for(;;){let{done:f,value:m}=await a.read();if(f)break;t.write(m)}}catch(f){throw f}finally{t.end()}})()}var OD="AI_InvalidArgumentError",AD=`vercel.ai.error.${OD}`,GB=Symbol.for(AD),PD,xh=class extends Pt{constructor({parameter:t,value:e,message:r}){super({name:OD,message:`Invalid argument for parameter ${t}: ${r}`}),this[PD]=!0,this.parameter=t,this.value=e}static isInstance(t){return Pt.hasMarker(t,AD)}};PD=GB;var MD="AI_RetryError",LD=`vercel.ai.error.${MD}`,zB=Symbol.for(LD),FD,xD=class extends Pt{constructor({message:t,reason:e,errors:r}){super({name:MD,message:t}),this[FD]=!0,this.reason=e,this.errors=r,this.lastError=r[r.length-1]}static isInstance(t){return Pt.hasMarker(t,LD)}};FD=zB;var WB=({maxRetries:t=2,initialDelayInMs:e=2e3,backoffFactor:r=2}={})=>async n=>UD(n,{maxRetries:t,delayInMs:e,backoffFactor:r});async function UD(t,{maxRetries:e,delayInMs:r,backoffFactor:n},i=[]){try{return await t()}catch(a){if(Ny(a)||e===0)throw a;let u=SC(a),f=[...i,a],m=f.length;if(m>e)throw new xD({message:`Failed after ${m} attempts. Last error: ${u}`,reason:"maxRetriesExceeded",errors:f});if(a instanceof Error&&tf.isInstance(a)&&a.isRetryable===!0&&m<=e)return await bC(r),UD(t,{maxRetries:e,delayInMs:n*r,backoffFactor:n},f);throw m===1?a:new xD({message:`Failed after ${m} attempts with non-retryable error: '${u}'`,reason:"errorNotRetryable",errors:f})}}function JB({maxRetries:t}){if(t!=null){if(!Number.isInteger(t))throw new xh({parameter:"maxRetries",value:t,message:"maxRetries must be an integer"});if(t<0)throw new xh({parameter:"maxRetries",value:t,message:"maxRetries must be >= 0"})}let e=t??2;return{maxRetries:e,retry:WB({maxRetries:e})}}function zE({operationId:t,telemetry:e}){return{"operation.name":`${t}${(e==null?void 0:e.functionId)!=null?` ${e.functionId}`:""}`,"resource.name":e==null?void 0:e.functionId,"ai.operationId":t,"ai.telemetry.functionId":e==null?void 0:e.functionId}}function KB({model:t,settings:e,telemetry:r,headers:n}){var i;return{"ai.model.provider":t.provider,"ai.model.id":t.modelId,...Object.entries(e).reduce((a,[u,f])=>(a[`ai.settings.${u}`]=f,a),{}),...Object.entries((i=r==null?void 0:r.metadata)!=null?i:{}).reduce((a,[u,f])=>(a[`ai.telemetry.metadata.${u}`]=f,a),{}),...Object.entries(n??{}).reduce((a,[u,f])=>(f!==void 0&&(a[`ai.request.headers.${u}`]=f),a),{})}}var ZB={startSpan(){return lb},startActiveSpan(t,e,r,n){if(typeof e=="function")return e(lb);if(typeof r=="function")return r(lb);if(typeof n=="function")return n(lb)}},lb={spanContext(){return XB},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},XB={traceId:"",spanId:"",traceFlags:0};function QB({isEnabled:t=!1,tracer:e}={}){return t?e||qE.getTracer("ai"):ZB}function WE({name:t,tracer:e,attributes:r,fn:n,endWhenDone:i=!0}){return e.startActiveSpan(t,{attributes:r},async a=>{try{let u=await n(a);return i&&a.end(),u}catch(u){try{u instanceof Error?(a.recordException({name:u.name,message:u.message,stack:u.stack}),a.setStatus({code:Q_.ERROR,message:u.message})):a.setStatus({code:Q_.ERROR})}finally{a.end()}throw u}})}function ey({telemetry:t,attributes:e}){return(t==null?void 0:t.isEnabled)!==!0?{}:Object.entries(e).reduce((r,[n,i])=>{if(i===void 0)return r;if(typeof i=="object"&&"input"in i&&typeof i.input=="function"){if((t==null?void 0:t.recordInputs)===!1)return r;let a=i.input();return a===void 0?r:{...r,[n]:a}}if(typeof i=="object"&&"output"in i&&typeof i.output=="function"){if((t==null?void 0:t.recordOutputs)===!1)return r;let a=i.output();return a===void 0?r:{...r,[n]:a}}return{...r,[n]:i}},{})}var e4="AI_NoImageGeneratedError",t4=`vercel.ai.error.${e4}`,r4=Symbol.for(t4),n4;n4=r4;var jD="AI_NoObjectGeneratedError",BD=`vercel.ai.error.${jD}`,i4=Symbol.for(BD),$D,ID=class extends Pt{constructor({message:t="No object generated.",cause:e,text:r,response:n,usage:i}){super({name:jD,message:t,cause:e}),this[$D]=!0,this.text=r,this.response=n,this.usage=i}static isInstance(t){return Pt.hasMarker(t,BD)}};$D=i4;var YD="AI_DownloadError",qD=`vercel.ai.error.${YD}`,a4=Symbol.for(qD),HD,HE=class extends Pt{constructor({url:t,statusCode:e,statusText:r,cause:n,message:i=n==null?`Failed to download ${t}: ${e} ${r}`:`Failed to download ${t}: ${n}`}){super({name:YD,message:i,cause:n}),this[HD]=!0,this.url=t,this.statusCode=e,this.statusText=r}static isInstance(t){return Pt.hasMarker(t,qD)}};HD=a4;async function o4({url:t,fetchImplementation:e=fetch}){var r;let n=t.toString();try{let i=await e(n);if(!i.ok)throw new HE({url:n,statusCode:i.status,statusText:i.statusText});return{data:new Uint8Array(await i.arrayBuffer()),mimeType:(r=i.headers.get("content-type"))!=null?r:void 0}}catch(i){throw HE.isInstance(i)?i:new HE({url:n,cause:i})}}var s4=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}];function u4(t){for(let{bytes:e,mimeType:r}of s4)if(t.length>=e.length&&e.every((n,i)=>t[i]===n))return r}var VD="AI_InvalidDataContentError",GD=`vercel.ai.error.${VD}`,c4=Symbol.for(GD),zD,ND=class extends Pt{constructor({content:t,cause:e,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof t}.`}){super({name:VD,message:r,cause:e}),this[zD]=!0,this.content=t}static isInstance(t){return Pt.hasMarker(t,GD)}};zD=c4;var WD=T.union([T.string(),T.instanceof(Uint8Array),T.instanceof(ArrayBuffer),T.custom(t=>{var e,r;return(r=(e=globalThis.Buffer)==null?void 0:e.isBuffer(t))!=null?r:!1},{message:"Must be a Buffer"})]);function l4(t){return typeof t=="string"?t:t instanceof ArrayBuffer?wh(new Uint8Array(t)):wh(t)}function db(t){if(t instanceof Uint8Array)return t;if(typeof t=="string")try{return EC(t)}catch(e){throw new ND({message:"Invalid data content. Content string is not a base64-encoded media.",content:t,cause:e})}if(t instanceof ArrayBuffer)return new Uint8Array(t);throw new ND({content:t})}function f4(t){try{return new TextDecoder().decode(t)}catch{throw new Error("Error decoding Uint8Array to text")}}var JD="AI_InvalidMessageRoleError",KD=`vercel.ai.error.${JD}`,d4=Symbol.for(KD),ZD,p4=class extends Pt{constructor({role:t,message:e=`Invalid message role: '${t}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:JD,message:e}),this[ZD]=!0,this.role=t}static isInstance(t){return Pt.hasMarker(t,KD)}};ZD=d4;function h4(t){try{let[e,r]=t.split(",");return{mimeType:e.split(";")[0].split(":")[1],base64Content:r}}catch{return{mimeType:void 0,base64Content:void 0}}}async function m4({prompt:t,modelSupportsImageUrls:e=!0,modelSupportsUrl:r=()=>!1,downloadImplementation:n=o4}){let i=await g4(t.messages,n,e,r);return[...t.system!=null?[{role:"system",content:t.system}]:[],...t.messages.map(a=>v4(a,i))]}function v4(t,e){var r,n,i,a,u,f;let m=t.role;switch(m){case"system":return{role:"system",content:t.content,providerMetadata:(r=t.providerOptions)!=null?r:t.experimental_providerMetadata};case"user":return typeof t.content=="string"?{role:"user",content:[{type:"text",text:t.content}],providerMetadata:(n=t.providerOptions)!=null?n:t.experimental_providerMetadata}:{role:"user",content:t.content.map(y=>_4(y,e)).filter(y=>y.type!=="text"||y.text!==""),providerMetadata:(i=t.providerOptions)!=null?i:t.experimental_providerMetadata};case"assistant":return typeof t.content=="string"?{role:"assistant",content:[{type:"text",text:t.content}],providerMetadata:(a=t.providerOptions)!=null?a:t.experimental_providerMetadata}:{role:"assistant",content:t.content.filter(y=>y.type!=="text"||y.text!=="").map(y=>{let{experimental_providerMetadata:x,providerOptions:P,...V}=y;return{...V,providerMetadata:P??x}}),providerMetadata:(u=t.providerOptions)!=null?u:t.experimental_providerMetadata};case"tool":return{role:"tool",content:t.content.map(y=>{var x;return{type:"tool-result",toolCallId:y.toolCallId,toolName:y.toolName,result:y.result,content:y.experimental_content,isError:y.isError,providerMetadata:(x=y.providerOptions)!=null?x:y.experimental_providerMetadata}}),providerMetadata:(f=t.providerOptions)!=null?f:t.experimental_providerMetadata};default:{let y=m;throw new p4({role:y})}}}async function g4(t,e,r,n){let i=t.filter(u=>u.role==="user").map(u=>u.content).filter(u=>Array.isArray(u)).flat().filter(u=>u.type==="image"||u.type==="file").filter(u=>!(u.type==="image"&&r===!0)).map(u=>u.type==="image"?u.image:u.data).map(u=>typeof u=="string"&&(u.startsWith("http:")||u.startsWith("https:"))?new URL(u):u).filter(u=>u instanceof URL).filter(u=>!n(u)),a=await Promise.all(i.map(async u=>({url:u,data:await e({url:u})})));return Object.fromEntries(a.map(({url:u,data:f})=>[u.toString(),f]))}function _4(t,e){var r,n,i,a;if(t.type==="text")return{type:"text",text:t.text,providerMetadata:(r=t.providerOptions)!=null?r:t.experimental_providerMetadata};let u=t.mimeType,f,m,y,x=t.type;switch(x){case"image":f=t.image;break;case"file":f=t.data;break;default:throw new Error(`Unsupported part type: ${x}`)}try{m=typeof f=="string"?new URL(f):f}catch{m=f}if(m instanceof URL)if(m.protocol==="data:"){let{mimeType:P,base64Content:V}=h4(m.toString());if(P==null||V==null)throw new Error(`Invalid data URL format in part ${x}`);u=P,y=db(V)}else{let P=e[m.toString()];P?(y=P.data,u??(u=P.mimeType)):y=m}else y=db(m);switch(x){case"image":return y instanceof Uint8Array&&(u=(n=u4(y))!=null?n:u),{type:"image",image:y,mimeType:u,providerMetadata:(i=t.providerOptions)!=null?i:t.experimental_providerMetadata};case"file":{if(u==null)throw new Error("Mime type is missing for file part");return{type:"file",data:y instanceof Uint8Array?l4(y):y,mimeType:u,providerMetadata:(a=t.providerOptions)!=null?a:t.experimental_providerMetadata}}}}function y4({maxTokens:t,temperature:e,topP:r,topK:n,presencePenalty:i,frequencyPenalty:a,stopSequences:u,seed:f}){if(t!=null){if(!Number.isInteger(t))throw new xh({parameter:"maxTokens",value:t,message:"maxTokens must be an integer"});if(t<1)throw new xh({parameter:"maxTokens",value:t,message:"maxTokens must be >= 1"})}if(e!=null&&typeof e!="number")throw new xh({parameter:"temperature",value:e,message:"temperature must be a number"});if(r!=null&&typeof r!="number")throw new xh({parameter:"topP",value:r,message:"topP must be a number"});if(n!=null&&typeof n!="number")throw new xh({parameter:"topK",value:n,message:"topK must be a number"});if(i!=null&&typeof i!="number")throw new xh({parameter:"presencePenalty",value:i,message:"presencePenalty must be a number"});if(a!=null&&typeof a!="number")throw new xh({parameter:"frequencyPenalty",value:a,message:"frequencyPenalty must be a number"});if(f!=null&&!Number.isInteger(f))throw new xh({parameter:"seed",value:f,message:"seed must be an integer"});return{maxTokens:t,temperature:e??0,topP:r,topK:n,presencePenalty:i,frequencyPenalty:a,stopSequences:u!=null&&u.length>0?u:void 0,seed:f}}function w4(t){var e,r,n;let i=[];for(let a of t){let u;try{u=new URL(a.url)}catch{throw new Error(`Invalid URL: ${a.url}`)}switch(u.protocol){case"http:":case"https:":{if((e=a.contentType)!=null&&e.startsWith("image/"))i.push({type:"image",image:u});else{if(!a.contentType)throw new Error("If the attachment is not an image, it must specify a content type");i.push({type:"file",data:u,mimeType:a.contentType})}break}case"data:":{let f,m,y;try{[f,m]=a.url.split(","),y=f.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${a.url}`)}if(y==null||m==null)throw new Error(`Invalid data URL format: ${a.url}`);if((r=a.contentType)!=null&&r.startsWith("image/"))i.push({type:"image",image:db(m)});else if((n=a.contentType)!=null&&n.startsWith("text/"))i.push({type:"text",text:f4(db(m))});else{if(!a.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");i.push({type:"file",data:m,mimeType:a.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${u.protocol}`)}}return i}var XD="AI_MessageConversionError",QD=`vercel.ai.error.${XD}`,b4=Symbol.for(QD),eR,VE=class extends Pt{constructor({originalMessage:t,message:e}){super({name:XD,message:e}),this[eR]=!0,this.originalMessage=t}static isInstance(t){return Pt.hasMarker(t,QD)}};eR=b4;function S4(t,e){var r,n;let i=(r=e==null?void 0:e.tools)!=null?r:{},a=[];for(let f=0;f<t.length;f++){let m=t[f],y=f===t.length-1,{role:x,content:P,experimental_attachments:V}=m;switch(x){case"system":{a.push({role:"system",content:P});break}case"user":{a.push({role:"user",content:V?[{type:"text",text:P},...w4(V)]:P});break}case"assistant":{if(m.parts!=null){let q=function(){let ye=[];for(let _e of ve)switch(_e.type){case"text":ye.push({type:"text",text:_e.text});break;case"reasoning":{for(let Ue of _e.details)switch(Ue.type){case"text":ye.push({type:"reasoning",text:Ue.text,signature:Ue.signature});break;case"redacted":ye.push({type:"redacted-reasoning",data:Ue.data});break}break}case"tool-invocation":ye.push({type:"tool-call",toolCallId:_e.toolInvocation.toolCallId,toolName:_e.toolInvocation.toolName,args:_e.toolInvocation.args});break;default:{let Ue=_e;throw new Error(`Unsupported part: ${Ue}`)}}a.push({role:"assistant",content:ye});let ue=ve.filter(_e=>_e.type==="tool-invocation").map(_e=>_e.toolInvocation);ue.length>0&&a.push({role:"tool",content:ue.map(_e=>{if(!("result"in _e))throw new VE({originalMessage:m,message:"ToolInvocation must have a result: "+JSON.stringify(_e)});let{toolCallId:Ue,toolName:$e,result:Ke}=_e,ct=i[$e];return(ct==null?void 0:ct.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:Ue,toolName:$e,result:ct.experimental_toToolResultContent(Ke),experimental_content:ct.experimental_toToolResultContent(Ke)}:{type:"tool-result",toolCallId:Ue,toolName:$e,result:Ke}})}),ve=[],ee=!1,J++};var u=q;let J=0,ee=!1,ve=[];for(let ye of m.parts)switch(ye.type){case"reasoning":ve.push(ye);break;case"text":{ee&&q(),ve.push(ye);break}case"tool-invocation":{((n=ye.toolInvocation.step)!=null?n:0)!==J&&q(),ve.push(ye),ee=!0;break}}q();break}let G=m.toolInvocations;if(G==null||G.length===0){a.push({role:"assistant",content:P});break}let Y=G.reduce((q,J)=>{var ee;return Math.max(q,(ee=J.step)!=null?ee:0)},0);for(let q=0;q<=Y;q++){let J=G.filter(ee=>{var ve;return((ve=ee.step)!=null?ve:0)===q});J.length!==0&&(a.push({role:"assistant",content:[...y&&P&&q===0?[{type:"text",text:P}]:[],...J.map(({toolCallId:ee,toolName:ve,args:ye})=>({type:"tool-call",toolCallId:ee,toolName:ve,args:ye}))]}),a.push({role:"tool",content:J.map(ee=>{if(!("result"in ee))throw new VE({originalMessage:m,message:"ToolInvocation must have a result: "+JSON.stringify(ee)});let{toolCallId:ve,toolName:ye,result:ue}=ee,_e=i[ye];return(_e==null?void 0:_e.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:ve,toolName:ye,result:_e.experimental_toToolResultContent(ue),experimental_content:_e.experimental_toToolResultContent(ue)}:{type:"tool-result",toolCallId:ve,toolName:ye,result:ue}})}))}P&&!y&&a.push({role:"assistant",content:P});break}case"data":break;default:{let G=x;throw new VE({originalMessage:m,message:`Unsupported role: ${G}`})}}}return a}function E4(t){if(!Array.isArray(t))return"other";if(t.length===0)return"messages";let e=t.map(T4);return e.some(r=>r==="has-ui-specific-parts")?"ui-messages":e.every(r=>r==="has-core-specific-parts"||r==="message")?"messages":"other"}function T4(t){return typeof t=="object"&&t!==null&&(t.role==="function"||t.role==="data"||"toolInvocations"in t||"experimental_attachments"in t)?"has-ui-specific-parts":typeof t=="object"&&t!==null&&"content"in t&&(Array.isArray(t.content)||"experimental_providerMetadata"in t||"providerOptions"in t)?"has-core-specific-parts":typeof t=="object"&&t!==null&&"role"in t&&"content"in t&&typeof t.content=="string"&&["system","user","assistant","tool"].includes(t.role)?"message":"other"}var JE=T.lazy(()=>T.union([T.null(),T.string(),T.number(),T.boolean(),T.record(T.string(),JE),T.array(JE)])),$a=T.record(T.string(),T.record(T.string(),JE)),x4=T.array(T.union([T.object({type:T.literal("text"),text:T.string()}),T.object({type:T.literal("image"),data:T.string(),mimeType:T.string().optional()})])),tR=T.object({type:T.literal("text"),text:T.string(),providerOptions:$a.optional(),experimental_providerMetadata:$a.optional()}),I4=T.object({type:T.literal("image"),image:T.union([WD,T.instanceof(URL)]),mimeType:T.string().optional(),providerOptions:$a.optional(),experimental_providerMetadata:$a.optional()}),N4=T.object({type:T.literal("file"),data:T.union([WD,T.instanceof(URL)]),mimeType:T.string(),providerOptions:$a.optional(),experimental_providerMetadata:$a.optional()}),C4=T.object({type:T.literal("reasoning"),text:T.string(),providerOptions:$a.optional(),experimental_providerMetadata:$a.optional()}),k4=T.object({type:T.literal("redacted-reasoning"),data:T.string(),providerOptions:$a.optional(),experimental_providerMetadata:$a.optional()}),D4=T.object({type:T.literal("tool-call"),toolCallId:T.string(),toolName:T.string(),args:T.unknown(),providerOptions:$a.optional(),experimental_providerMetadata:$a.optional()}),R4=T.object({type:T.literal("tool-result"),toolCallId:T.string(),toolName:T.string(),result:T.unknown(),content:x4.optional(),isError:T.boolean().optional(),providerOptions:$a.optional(),experimental_providerMetadata:$a.optional()}),O4=T.object({role:T.literal("system"),content:T.string(),providerOptions:$a.optional(),experimental_providerMetadata:$a.optional()}),A4=T.object({role:T.literal("user"),content:T.union([T.string(),T.array(T.union([tR,I4,N4]))]),providerOptions:$a.optional(),experimental_providerMetadata:$a.optional()}),P4=T.object({role:T.literal("assistant"),content:T.union([T.string(),T.array(T.union([tR,C4,k4,D4]))]),providerOptions:$a.optional(),experimental_providerMetadata:$a.optional()}),M4=T.object({role:T.literal("tool"),content:T.array(R4),providerOptions:$a.optional(),experimental_providerMetadata:$a.optional()}),L4=T.union([O4,A4,P4,M4]);function F4({prompt:t,tools:e}){if(t.prompt==null&&t.messages==null)throw new _m({prompt:t,message:"prompt or messages must be defined"});if(t.prompt!=null&&t.messages!=null)throw new _m({prompt:t,message:"prompt and messages cannot be defined at the same time"});if(t.system!=null&&typeof t.system!="string")throw new _m({prompt:t,message:"system must be a string"});if(t.prompt!=null){if(typeof t.prompt!="string")throw new _m({prompt:t,message:"prompt must be a string"});return{type:"prompt",system:t.system,messages:[{role:"user",content:t.prompt}]}}if(t.messages!=null){let r=E4(t.messages);if(r==="other")throw new _m({prompt:t,message:"messages must be an array of CoreMessage or UIMessage"});let n=r==="ui-messages"?S4(t.messages,{tools:e}):t.messages,i=yh({value:n,schema:T.array(L4)});if(!i.success)throw new _m({prompt:t,message:"messages must be an array of CoreMessage or UIMessage",cause:i.error});return{type:"messages",messages:n,system:t.system}}throw new Error("unreachable")}function U4({promptTokens:t,completionTokens:e}){return{promptTokens:t,completionTokens:e,totalTokens:t+e}}function j4(t,e){return{promptTokens:t.promptTokens+e.promptTokens,completionTokens:t.completionTokens+e.completionTokens,totalTokens:t.totalTokens+e.totalTokens}}var B4="JSON schema:",$4="You MUST answer with a JSON object that matches the JSON schema above.",Y4="You MUST answer with JSON.";function q4({prompt:t,schema:e,schemaPrefix:r=e!=null?B4:void 0,schemaSuffix:n=e!=null?$4:Y4}){return[t!=null&&t.length>0?t:void 0,t!=null&&t.length>0?"":void 0,r,e!=null?JSON.stringify(e):void 0,n].filter(i=>i!=null).join(`
`)}function GE(t){let e=t.pipeThrough(new TransformStream);return e[Symbol.asyncIterator]=()=>{let r=e.getReader();return{async next(){let{done:n,value:i}=await r.read();return n?{done:!0,value:void 0}:{done:!1,value:i}}}},e}var eW=_h({prefix:"aiobj",size:24});var td=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((t,e)=>{this.status.type==="resolved"?t(this.status.value):this.status.type==="rejected"&&e(this.status.error),this._resolve=t,this._reject=e}),this.promise)}resolve(t){var e;this.status={type:"resolved",value:t},this.promise&&((e=this._resolve)==null||e.call(this,t))}reject(t){var e;this.status={type:"rejected",error:t},this.promise&&((e=this._reject)==null||e.call(this,t))}};function CD(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}function H4(){let t=[],e=null,r=!1,n=CD(),i=async()=>{if(r&&t.length===0){e==null||e.close();return}if(t.length===0)return n=CD(),await n.promise,i();try{let{value:a,done:u}=await t[0].read();u?(t.shift(),t.length>0?await i():r&&(e==null||e.close())):e==null||e.enqueue(a)}catch(a){e==null||e.error(a),t.shift(),r&&t.length===0&&(e==null||e.close())}};return{stream:new ReadableStream({start(a){e=a},pull:i,async cancel(){for(let a of t)await a.cancel();t=[],r=!0}}),addStream:a=>{if(r)throw new Error("Cannot add inner stream: outer stream is closed");t.push(a.getReader()),n.resolve()},close:()=>{r=!0,n.resolve(),t.length===0&&(e==null||e.close())},terminate:()=>{r=!0,n.resolve(),t.forEach(a=>a.cancel()),t=[],e==null||e.close()}}}function V4(){var t,e;return(e=(t=globalThis==null?void 0:globalThis.performance)==null?void 0:t.now())!=null?e:Date.now()}var rW=_h({prefix:"aiobj",size:24});var rR="AI_NoOutputSpecifiedError",nR=`vercel.ai.error.${rR}`,G4=Symbol.for(nR),iR,z4=class extends Pt{constructor({message:t="No output specified."}={}){super({name:rR,message:t}),this[iR]=!0}static isInstance(t){return Pt.hasMarker(t,nR)}};iR=G4;var aR="AI_ToolExecutionError",oR=`vercel.ai.error.${aR}`,W4=Symbol.for(oR),sR,J4=class extends Pt{constructor({toolArgs:t,toolName:e,toolCallId:r,cause:n,message:i=`Error executing tool ${e}: ${tg(n)}`}){super({name:aR,message:i,cause:n}),this[sR]=!0,this.toolArgs=t,this.toolName=e,this.toolCallId=r}static isInstance(t){return Pt.hasMarker(t,oR)}};sR=W4;function K4(t){return t!=null&&Object.keys(t).length>0}function Z4({tools:t,toolChoice:e,activeTools:r}){return K4(t)?{tools:(r!=null?Object.entries(t).filter(([i])=>r.includes(i)):Object.entries(t)).map(([i,a])=>{let u=a.type;switch(u){case void 0:case"function":return{type:"function",name:i,description:a.description,parameters:i_(a.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:i,id:a.id,args:a.args};default:{let f=u;throw new Error(`Unsupported tool type: ${f}`)}}}),toolChoice:e==null?{type:"auto"}:typeof e=="string"?{type:e}:{type:"tool",toolName:e.toolName}}:{tools:void 0,toolChoice:void 0}}var X4=/^([\s\S]*?)(\s+)(\S*)$/;function Q4(t){let e=t.match(X4);return e?{prefix:e[1],whitespace:e[2],suffix:e[3]}:void 0}var uR="AI_InvalidToolArgumentsError",cR=`vercel.ai.error.${uR}`,e$=Symbol.for(cR),lR,ty=class extends Pt{constructor({toolArgs:t,toolName:e,cause:r,message:n=`Invalid arguments for tool ${e}: ${tg(r)}`}){super({name:uR,message:n,cause:r}),this[lR]=!0,this.toolArgs=t,this.toolName=e}static isInstance(t){return Pt.hasMarker(t,cR)}};lR=e$;var fR="AI_NoSuchToolError",dR=`vercel.ai.error.${fR}`,t$=Symbol.for(dR),pR,a_=class extends Pt{constructor({toolName:t,availableTools:e=void 0,message:r=`Model tried to call unavailable tool '${t}'. ${e===void 0?"No tools are available.":`Available tools: ${e.join(", ")}.`}`}){super({name:fR,message:r}),this[pR]=!0,this.toolName=t,this.availableTools=e}static isInstance(t){return Pt.hasMarker(t,dR)}};pR=t$;var hR="AI_ToolCallRepairError",mR=`vercel.ai.error.${hR}`,r$=Symbol.for(mR),vR,ZE=class extends Pt{constructor({cause:t,originalError:e,message:r=`Error repairing tool call: ${tg(t)}`}){super({name:hR,message:r,cause:t}),this[vR]=!0,this.originalError=e}static isInstance(t){return Pt.hasMarker(t,mR)}};vR=r$;async function n$({toolCall:t,tools:e,repairToolCall:r,system:n,messages:i}){if(e==null)throw new a_({toolName:t.toolName});try{return await kD({toolCall:t,tools:e})}catch(a){if(r==null||!(a_.isInstance(a)||ty.isInstance(a)))throw a;let u=null;try{u=await r({toolCall:t,tools:e,parameterSchema:({toolName:f})=>i_(e[f].parameters).jsonSchema,system:n,messages:i,error:a})}catch(f){throw new ZE({cause:f,originalError:a})}if(u==null)throw a;return await kD({toolCall:u,tools:e})}}async function kD({toolCall:t,tools:e}){let r=t.toolName,n=e[r];if(n==null)throw new a_({toolName:t.toolName,availableTools:Object.keys(e)});let i=i_(n.parameters),a=t.args.trim()===""?yh({value:{},schema:i}):ym({text:t.args,schema:i});if(a.success===!1)throw new ty({toolName:r,toolArgs:t.args,cause:a.error});return{type:"tool-call",toolCallId:t.toolCallId,toolName:r,args:a.value}}function DD({text:t="",reasoning:e,tools:r,toolCalls:n,toolResults:i,messageId:a,generateMessageId:u}){let f=[];return f.push({role:"assistant",content:[...e.map(m=>m.type==="text"?{...m,type:"reasoning"}:{...m,type:"redacted-reasoning"}),{type:"text",text:t},...n],id:a}),i.length>0&&f.push({role:"tool",id:u(),content:i.map(m=>{let y=r[m.toolName];return(y==null?void 0:y.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:m.toolCallId,toolName:m.toolName,result:y.experimental_toToolResultContent(m.result),experimental_content:y.experimental_toToolResultContent(m.result)}:{type:"tool-result",toolCallId:m.toolCallId,toolName:m.toolName,result:m.result}})}),f}function i$(t){let e=t.filter(r=>r.type==="text").map(r=>r.text).join("");return e.length>0?e:void 0}var dW=_h({prefix:"aitxt",size:24}),pW=_h({prefix:"msg",size:24});var a$={};KE(a$,{object:()=>c$,text:()=>u$});var gR="AI_InvalidStreamPartError",_R=`vercel.ai.error.${gR}`,o$=Symbol.for(_R),yR,s$=class extends Pt{constructor({chunk:t,message:e}){super({name:gR,message:e}),this[yR]=!0,this.chunk=t}static isInstance(t){return Pt.hasMarker(t,_R)}};yR=o$;var u$=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:t}){return t},parsePartial({text:t}){return{partial:t}},parseOutput({text:t}){return t}}),c$=({schema:t})=>{let e=i_(t);return{type:"object",responseFormat:({model:r})=>({type:"json",schema:r.supportsStructuredOutputs?e.jsonSchema:void 0}),injectIntoSystemPrompt({system:r,model:n}){return n.supportsStructuredOutputs?r:q4({prompt:r,schema:e.jsonSchema})},parsePartial({text:r}){let n=oD(r);switch(n.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:n.value};default:{let i=n.state;throw new Error(`Unsupported parse state: ${i}`)}}},parseOutput({text:r},n){let i=ym({text:r});if(!i.success)throw new ID({message:"No object generated: could not parse the response.",cause:i.error,text:r,response:n.response,usage:n.usage});let a=yh({value:i.value,schema:e});if(!a.success)throw new ID({message:"No object generated: response did not match schema.",cause:a.error,text:r,response:n.response,usage:n.usage});return a.value}}};function l$(t){return t===void 0?[]:Array.isArray(t)?t:[t]}function XE(t,e){let r=t.getReader(),n=e.getReader(),i,a,u=!1,f=!1;async function m(x){try{i==null&&(i=r.read());let P=await i;i=void 0,P.done?x.close():x.enqueue(P.value)}catch(P){x.error(P)}}async function y(x){try{a==null&&(a=n.read());let P=await a;a=void 0,P.done?x.close():x.enqueue(P.value)}catch(P){x.error(P)}}return new ReadableStream({async pull(x){try{if(u){await y(x);return}if(f){await m(x);return}i==null&&(i=r.read()),a==null&&(a=n.read());let{result:P,reader:V}=await Promise.race([i.then(G=>({result:G,reader:r})),a.then(G=>({result:G,reader:n}))]);P.done||x.enqueue(P.value),V===r?(i=void 0,P.done&&(await y(x),u=!0)):(a=void 0,P.done&&(f=!0,await m(x)))}catch(P){x.error(P)}},cancel(){r.cancel(),n.cancel()}})}function f$({tools:t,generatorStream:e,toolCallStreaming:r,tracer:n,telemetry:i,system:a,messages:u,abortSignal:f,repairToolCall:m}){let y=null,x=new ReadableStream({start(ee){y=ee}}),P={},V=new Set,G=!1,Y;function q(){G&&V.size===0&&(Y!=null&&y.enqueue(Y),y.close())}let J=new TransformStream({async transform(ee,ve){let ye=ee.type;switch(ye){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{ve.enqueue(ee);break}case"tool-call-delta":{r&&(P[ee.toolCallId]||(ve.enqueue({type:"tool-call-streaming-start",toolCallId:ee.toolCallId,toolName:ee.toolName}),P[ee.toolCallId]=!0),ve.enqueue({type:"tool-call-delta",toolCallId:ee.toolCallId,toolName:ee.toolName,argsTextDelta:ee.argsTextDelta}));break}case"tool-call":{try{let ue=await n$({toolCall:ee,tools:t,repairToolCall:m,system:a,messages:u});ve.enqueue(ue);let _e=t[ue.toolName];if(_e.execute!=null){let Ue=el();V.add(Ue),WE({name:"ai.toolCall",attributes:ey({telemetry:i,attributes:{...zE({operationId:"ai.toolCall",telemetry:i}),"ai.toolCall.name":ue.toolName,"ai.toolCall.id":ue.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(ue.args)}}}),tracer:n,fn:async $e=>_e.execute(ue.args,{toolCallId:ue.toolCallId,messages:u,abortSignal:f}).then(Ke=>{y.enqueue({...ue,type:"tool-result",result:Ke}),V.delete(Ue),q();try{$e.setAttributes(ey({telemetry:i,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(Ke)}}}))}catch{}},Ke=>{y.enqueue({type:"error",error:new J4({toolCallId:ue.toolCallId,toolName:ue.toolName,toolArgs:ue.args,cause:Ke})}),V.delete(Ue),q()})})}}catch(ue){y.enqueue({type:"error",error:ue})}break}case"finish":{Y={type:"finish",finishReason:ee.finishReason,logprobs:ee.logprobs,usage:U4(ee.usage),experimental_providerMetadata:ee.providerMetadata};break}default:{let ue=ye;throw new Error(`Unhandled chunk type: ${ue}`)}}},flush(){G=!0,q()}});return new ReadableStream({async start(ee){return Promise.all([e.pipeThrough(J).pipeTo(new WritableStream({write(ve){ee.enqueue(ve)},close(){}})),x.pipeTo(new WritableStream({write(ve){ee.enqueue(ve)},close(){ee.close()}}))])}})}var d$=_h({prefix:"aitxt",size:24}),p$=_h({prefix:"msg",size:24});function wR({model:t,tools:e,toolChoice:r,system:n,prompt:i,messages:a,maxRetries:u,abortSignal:f,headers:m,maxSteps:y=1,experimental_generateMessageId:x=p$,experimental_output:P,experimental_continueSteps:V=!1,experimental_telemetry:G,experimental_providerMetadata:Y,providerOptions:q=Y,experimental_toolCallStreaming:J=!1,toolCallStreaming:ee=J,experimental_activeTools:ve,experimental_repairToolCall:ye,experimental_transform:ue,onChunk:_e,onError:Ue,onFinish:$e,onStepFinish:Ke,_internal:{now:ct=V4,generateId:vt=d$,currentDate:wr=()=>new Date}={},...$r}){return new m$({model:t,telemetry:G,headers:m,settings:$r,maxRetries:u,abortSignal:f,system:n,prompt:i,messages:a,tools:e,toolChoice:r,toolCallStreaming:ee,transforms:l$(ue),activeTools:ve,repairToolCall:ye,maxSteps:y,output:P,continueSteps:V,providerOptions:q,onChunk:_e,onError:Ue,onFinish:$e,onStepFinish:Ke,now:ct,currentDate:wr,generateId:vt,generateMessageId:x})}function h$(t){if(!t)return new TransformStream({transform(a,u){u.enqueue({part:a,partialOutput:void 0})}});let e="",r="",n="";function i({controller:a,partialOutput:u=void 0}){a.enqueue({part:{type:"text-delta",textDelta:r},partialOutput:u}),r=""}return new TransformStream({transform(a,u){if(a.type==="step-finish"&&i({controller:u}),a.type!=="text-delta"){u.enqueue({part:a,partialOutput:void 0});return}e+=a.textDelta,r+=a.textDelta;let f=t.parsePartial({text:e});if(f!=null){let m=JSON.stringify(f.partial);m!==n&&(i({controller:u,partialOutput:f.partial}),n=m)}},flush(a){r.length>0&&i({controller:a})}})}var m$=class{constructor({model:t,telemetry:e,headers:r,settings:n,maxRetries:i,abortSignal:a,system:u,prompt:f,messages:m,tools:y,toolChoice:x,toolCallStreaming:P,transforms:V,activeTools:G,repairToolCall:Y,maxSteps:q,output:J,continueSteps:ee,providerOptions:ve,now:ye,currentDate:ue,generateId:_e,generateMessageId:Ue,onChunk:$e,onError:Ke,onFinish:ct,onStepFinish:vt}){this.warningsPromise=new td,this.usagePromise=new td,this.finishReasonPromise=new td,this.providerMetadataPromise=new td,this.textPromise=new td,this.reasoningPromise=new td,this.reasoningDetailsPromise=new td,this.sourcesPromise=new td,this.toolCallsPromise=new td,this.toolResultsPromise=new td,this.requestPromise=new td,this.responsePromise=new td,this.stepsPromise=new td;var wr;if(q<1)throw new xh({parameter:"maxSteps",value:q,message:"maxSteps must be at least 1"});this.output=J;let $r="",Ne="",dt="",Or=[],Ze,yn=[],Le=[],qt={id:_e(),timestamp:ue(),modelId:t.modelId,messages:[]},Wt=[],Tt=[],mn,lt,ti="initial",ut=[],Su,er=new TransformStream({async transform(Ot,Ur){Ur.enqueue(Ot);let{part:tt}=Ot;if((tt.type==="text-delta"||tt.type==="reasoning"||tt.type==="source"||tt.type==="tool-call"||tt.type==="tool-result"||tt.type==="tool-call-streaming-start"||tt.type==="tool-call-delta")&&await($e==null?void 0:$e({chunk:tt})),tt.type==="error"&&await(Ke==null?void 0:Ke({error:tt.error})),tt.type==="text-delta"&&($r+=tt.textDelta,Ne+=tt.textDelta,dt+=tt.textDelta),tt.type==="reasoning"&&(Ze==null?(Ze={type:"text",text:tt.textDelta},Or.push(Ze)):Ze.text+=tt.textDelta),tt.type==="reasoning-signature"){if(Ze==null)throw new Pt({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});Ze.signature=tt.signature,Ze=void 0}if(tt.type==="redacted-reasoning"&&Or.push({type:"redacted",data:tt.data}),tt.type==="source"&&(Le.push(tt.source),yn.push(tt.source)),tt.type==="tool-call"&&Wt.push(tt),tt.type==="tool-result"&&Tt.push(tt),tt.type==="step-finish"){let An=DD({text:Ne,reasoning:Or,tools:y??{},toolCalls:Wt,toolResults:Tt,messageId:tt.messageId,generateMessageId:Ue}),Gr=ut.length,Xr="done";Gr+1<q&&(ee&&tt.finishReason==="length"&&Wt.length===0?Xr="continue":Wt.length>0&&Tt.length===Wt.length&&(Xr="tool-result"));let Ia={stepType:ti,text:$r,reasoning:i$(Or),reasoningDetails:Or,sources:yn,toolCalls:Wt,toolResults:Tt,finishReason:tt.finishReason,usage:tt.usage,warnings:tt.warnings,logprobs:tt.logprobs,request:tt.request,response:{...tt.response,messages:[...qt.messages,...An]},providerMetadata:tt.experimental_providerMetadata,experimental_providerMetadata:tt.experimental_providerMetadata,isContinued:tt.isContinued};await(vt==null?void 0:vt(Ia)),ut.push(Ia),Wt=[],Tt=[],$r="",yn=[],Xr!=="done"&&(ti=Xr),Xr!=="continue"&&(qt.messages.push(...An),Ne="")}tt.type==="finish"&&(qt.id=tt.response.id,qt.timestamp=tt.response.timestamp,qt.modelId=tt.response.modelId,qt.headers=tt.response.headers,lt=tt.usage,mn=tt.finishReason)},async flush(Ot){var Ur;try{if(ut.length===0)return;let tt=ut[ut.length-1];qn.warningsPromise.resolve(tt.warnings),qn.requestPromise.resolve(tt.request),qn.responsePromise.resolve(tt.response),qn.toolCallsPromise.resolve(tt.toolCalls),qn.toolResultsPromise.resolve(tt.toolResults),qn.providerMetadataPromise.resolve(tt.experimental_providerMetadata),qn.reasoningPromise.resolve(tt.reasoning),qn.reasoningDetailsPromise.resolve(tt.reasoningDetails);let An=mn??"unknown",Gr=lt??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};qn.finishReasonPromise.resolve(An),qn.usagePromise.resolve(Gr),qn.textPromise.resolve(dt),qn.sourcesPromise.resolve(Le),qn.stepsPromise.resolve(ut),await(ct==null?void 0:ct({finishReason:An,logprobs:void 0,usage:Gr,text:dt,reasoning:tt.reasoning,reasoningDetails:tt.reasoningDetails,sources:tt.sources,toolCalls:tt.toolCalls,toolResults:tt.toolResults,request:(Ur=tt.request)!=null?Ur:{},response:tt.response,warnings:tt.warnings,providerMetadata:tt.providerMetadata,experimental_providerMetadata:tt.experimental_providerMetadata,steps:ut})),Su.setAttributes(ey({telemetry:e,attributes:{"ai.response.finishReason":An,"ai.response.text":{output:()=>dt},"ai.response.toolCalls":{output:()=>{var Xr;return(Xr=tt.toolCalls)!=null&&Xr.length?JSON.stringify(tt.toolCalls):void 0}},"ai.usage.promptTokens":Gr.promptTokens,"ai.usage.completionTokens":Gr.completionTokens}}))}catch(tt){Ot.error(tt)}finally{Su.end()}}}),Ya=H4();this.addStream=Ya.addStream,this.closeStream=Ya.close;let Xt=Ya.stream;for(let Ot of V)Xt=Xt.pipeThrough(Ot({tools:y,stopStream(){Ya.terminate()}}));this.baseStream=Xt.pipeThrough(h$(J)).pipeThrough(er);let{maxRetries:fr,retry:Ni}=JB({maxRetries:i}),mr=QB(e),Ci=KB({model:t,telemetry:e,headers:r,settings:{...n,maxRetries:fr}}),Fr=F4({prompt:{system:(wr=J==null?void 0:J.injectIntoSystemPrompt({system:u,model:t}))!=null?wr:u,prompt:f,messages:m},tools:y}),qn=this;WE({name:"ai.streamText",attributes:ey({telemetry:e,attributes:{...zE({operationId:"ai.streamText",telemetry:e}),...Ci,"ai.prompt":{input:()=>JSON.stringify({system:u,prompt:f,messages:m})},"ai.settings.maxSteps":q}}),tracer:mr,endWhenDone:!1,fn:async Ot=>{Su=Ot;async function Ur({currentStep:tt,responseMessages:An,usage:Gr,stepType:Xr,previousStepText:Ia,hasLeadingWhitespace:Ui,messageId:jr}){var ar;let br=An.length===0?Fr.type:"messages",cn=[...Fr.messages,...An],nd=await m4({prompt:{type:br,system:Fr.system,messages:cn},modelSupportsImageUrls:t.supportsImageUrls,modelSupportsUrl:(ar=t.supportsUrl)==null?void 0:ar.bind(t)}),ri={type:"regular",...Z4({tools:y,toolChoice:x,activeTools:G})},{result:{stream:id,warnings:Eu,rawResponse:Cn,request:os},doStreamSpan:Qt,startTimestampMs:ji}=await Ni(()=>WE({name:"ai.streamText.doStream",attributes:ey({telemetry:e,attributes:{...zE({operationId:"ai.streamText.doStream",telemetry:e}),...Ci,"ai.prompt.format":{input:()=>br},"ai.prompt.messages":{input:()=>JSON.stringify(nd)},"ai.prompt.tools":{input:()=>{var vr;return(vr=ri.tools)==null?void 0:vr.map(kn=>JSON.stringify(kn))}},"ai.prompt.toolChoice":{input:()=>ri.toolChoice!=null?JSON.stringify(ri.toolChoice):void 0},"gen_ai.system":t.provider,"gen_ai.request.model":t.modelId,"gen_ai.request.frequency_penalty":n.frequencyPenalty,"gen_ai.request.max_tokens":n.maxTokens,"gen_ai.request.presence_penalty":n.presencePenalty,"gen_ai.request.stop_sequences":n.stopSequences,"gen_ai.request.temperature":n.temperature,"gen_ai.request.top_k":n.topK,"gen_ai.request.top_p":n.topP}}),tracer:mr,endWhenDone:!1,fn:async vr=>({startTimestampMs:ye(),doStreamSpan:vr,result:await t.doStream({mode:ri,...y4(n),inputFormat:br,responseFormat:J==null?void 0:J.responseFormat({model:t}),prompt:nd,providerMetadata:ve,abortSignal:a,headers:r})})})),qa=f$({tools:y,generatorStream:id,toolCallStreaming:P,tracer:mr,telemetry:e,system:u,messages:cn,repairToolCall:Y,abortSignal:a}),ss=os??{},Na=[],ad=[],sc=[],Zi,Ca="unknown",ki={promptTokens:0,completionTokens:0,totalTokens:0},us,Vs=!0,ui="",uc=Xr==="continue"?Ia:"",Gs,ka={id:_e(),timestamp:ue(),modelId:t.modelId},ni="",al=!1,zs=!0,ci=!1;async function ca({controller:vr,chunk:kn}){vr.enqueue(kn),ui+=kn.textDelta,uc+=kn.textDelta,al=!0,ci=kn.textDelta.trimEnd()!==kn.textDelta}qn.addStream(qa.pipeThrough(new TransformStream({async transform(vr,kn){var Da,Qr,_i;if(Vs){let en=ye()-ji;Vs=!1,Qt.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":en}),Qt.setAttributes({"ai.response.msToFirstChunk":en}),kn.enqueue({type:"step-start",messageId:jr,request:ss,warnings:Eu??[]})}if(vr.type==="text-delta"&&vr.textDelta.length===0)return;let Ha=vr.type;switch(Ha){case"text-delta":{if(ee){let en=zs&&Ui?vr.textDelta.trimStart():vr.textDelta;if(en.length===0)break;zs=!1,ni+=en;let la=Q4(ni);la!=null&&(ni=la.suffix,await ca({controller:kn,chunk:{type:"text-delta",textDelta:la.prefix+la.whitespace}}))}else await ca({controller:kn,chunk:vr});break}case"reasoning":{kn.enqueue(vr),Zi==null?(Zi={type:"text",text:vr.textDelta},sc.push(Zi)):Zi.text+=vr.textDelta;break}case"reasoning-signature":{if(kn.enqueue(vr),Zi==null)throw new s$({chunk:vr,message:"reasoning-signature without reasoning"});Zi.signature=vr.signature,Zi=void 0;break}case"redacted-reasoning":{kn.enqueue(vr),sc.push({type:"redacted",data:vr.data});break}case"tool-call":{kn.enqueue(vr),Na.push(vr);break}case"tool-result":{kn.enqueue(vr),ad.push(vr);break}case"response-metadata":{ka={id:(Da=vr.id)!=null?Da:ka.id,timestamp:(Qr=vr.timestamp)!=null?Qr:ka.timestamp,modelId:(_i=vr.modelId)!=null?_i:ka.modelId};break}case"finish":{ki=vr.usage,Ca=vr.finishReason,us=vr.experimental_providerMetadata,Gs=vr.logprobs;let en=ye()-ji;Qt.addEvent("ai.stream.finish"),Qt.setAttributes({"ai.response.msToFinish":en,"ai.response.avgCompletionTokensPerSecond":1e3*ki.completionTokens/en});break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{kn.enqueue(vr);break}case"error":{kn.enqueue(vr),Ca="error";break}default:{let en=Ha;throw new Error(`Unknown chunk type: ${en}`)}}},async flush(vr){let kn=Na.length>0?JSON.stringify(Na):void 0,Da="done";tt+1<q&&(ee&&Ca==="length"&&Na.length===0?Da="continue":Na.length>0&&ad.length===Na.length&&(Da="tool-result")),ee&&ni.length>0&&(Da!=="continue"||Xr==="continue"&&!al)&&(await ca({controller:vr,chunk:{type:"text-delta",textDelta:ni}}),ni="");try{Qt.setAttributes(ey({telemetry:e,attributes:{"ai.response.finishReason":Ca,"ai.response.text":{output:()=>ui},"ai.response.toolCalls":{output:()=>kn},"ai.response.id":ka.id,"ai.response.model":ka.modelId,"ai.response.timestamp":ka.timestamp.toISOString(),"ai.usage.promptTokens":ki.promptTokens,"ai.usage.completionTokens":ki.completionTokens,"gen_ai.response.finish_reasons":[Ca],"gen_ai.response.id":ka.id,"gen_ai.response.model":ka.modelId,"gen_ai.usage.input_tokens":ki.promptTokens,"gen_ai.usage.output_tokens":ki.completionTokens}}))}catch{}finally{Qt.end()}vr.enqueue({type:"step-finish",finishReason:Ca,usage:ki,providerMetadata:us,experimental_providerMetadata:us,logprobs:Gs,request:ss,response:{...ka,headers:Cn==null?void 0:Cn.headers},warnings:Eu,isContinued:Da==="continue",messageId:jr});let Qr=j4(Gr,ki);if(Da==="done")vr.enqueue({type:"finish",finishReason:Ca,usage:Qr,providerMetadata:us,experimental_providerMetadata:us,logprobs:Gs,response:{...ka,headers:Cn==null?void 0:Cn.headers}}),qn.closeStream();else{if(Xr==="continue"){let _i=An[An.length-1];typeof _i.content=="string"?_i.content+=ui:_i.content.push({text:ui,type:"text"})}else An.push(...DD({text:ui,reasoning:sc,tools:y??{},toolCalls:Na,toolResults:ad,messageId:jr,generateMessageId:Ue}));await Ur({currentStep:tt+1,responseMessages:An,usage:Qr,stepType:Da,previousStepText:uc,hasLeadingWhitespace:ci,messageId:Da==="continue"?jr:Ue()})}}})))}await Ur({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:Ue()})}}).catch(Ot=>{qn.addStream(new ReadableStream({start(Ur){Ur.enqueue({type:"error",error:Ot}),Ur.close()}})),qn.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){let[t,e]=this.baseStream.tee();return this.baseStream=e,t}get textStream(){return GE(this.teeStream().pipeThrough(new TransformStream({transform({part:t},e){t.type==="text-delta"&&e.enqueue(t.textDelta)}})))}get fullStream(){return GE(this.teeStream().pipeThrough(new TransformStream({transform({part:t},e){e.enqueue(t)}})))}async consumeStream(){let t=this.fullStream;for await(let e of t);}get experimental_partialOutputStream(){if(this.output==null)throw new z4;return GE(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:t},e){t!=null&&e.enqueue(t)}})))}toDataStreamInternal({getErrorMessage:t=()=>"An error occurred.",sendUsage:e=!0,sendReasoning:r=!1,sendSources:n=!1}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,a)=>{let u=i.type;switch(u){case"text-delta":{a.enqueue(Hs("text",i.textDelta));break}case"reasoning":{r&&a.enqueue(Hs("reasoning",i.textDelta));break}case"redacted-reasoning":{r&&a.enqueue(Hs("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{r&&a.enqueue(Hs("reasoning_signature",{signature:i.signature}));break}case"source":{n&&a.enqueue(Hs("source",i.source));break}case"tool-call-streaming-start":{a.enqueue(Hs("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{a.enqueue(Hs("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{a.enqueue(Hs("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{a.enqueue(Hs("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{a.enqueue(Hs("error",t(i.error)));break}case"step-start":{a.enqueue(Hs("start_step",{messageId:i.messageId}));break}case"step-finish":{a.enqueue(Hs("finish_step",{finishReason:i.finishReason,usage:e?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{a.enqueue(Hs("finish_message",{finishReason:i.finishReason,usage:e?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{let f=u;throw new Error(`Unknown chunk type: ${f}`)}}}}))}pipeDataStreamToResponse(t,{status:e,statusText:r,headers:n,data:i,getErrorMessage:a,sendUsage:u,sendReasoning:f,sendSources:m}={}){TD({response:t,status:e,statusText:r,headers:ED(n,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:i,getErrorMessage:a,sendUsage:u,sendReasoning:f,sendSources:m})})}pipeTextStreamToResponse(t,e){TD({response:t,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText,headers:ED(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(t){let e=this.toDataStreamInternal({getErrorMessage:t==null?void 0:t.getErrorMessage,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources}).pipeThrough(new TextEncoderStream);return t!=null&&t.data?XE(t==null?void 0:t.data.stream,e):e}mergeIntoDataStream(t,e){t.merge(this.toDataStreamInternal({getErrorMessage:t.onError,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources}))}toDataStreamResponse({headers:t,status:e,statusText:r,data:n,getErrorMessage:i,sendUsage:a,sendReasoning:u,sendSources:f}={}){return new Response(this.toDataStream({data:n,getErrorMessage:i,sendUsage:a,sendReasoning:u,sendSources:f}),{status:e,statusText:r,headers:fb(t,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(t){var e;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(e=t==null?void 0:t.status)!=null?e:200,headers:fb(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"})})}};var v$="AI_NoSuchProviderError",g$=`vercel.ai.error.${v$}`,_$=Symbol.for(g$),y$;y$=_$;var w$={};KE(w$,{mergeIntoDataStream:()=>E$,toDataStream:()=>b$,toDataStreamResponse:()=>S$});function bR(t={}){let e=new TextEncoder,r="";return new TransformStream({async start(){t.onStart&&await t.onStart()},async transform(n,i){i.enqueue(e.encode(n)),r+=n,t.onToken&&await t.onToken(n),t.onText&&typeof n=="string"&&await t.onText(n)},async flush(){t.onCompletion&&await t.onCompletion(r),t.onFinal&&await t.onFinal(r)}})}function QE(t,e){return t.pipeThrough(new TransformStream({transform:async(r,n)=>{var i;if(typeof r=="string"){n.enqueue(r);return}if("event"in r){r.event==="on_chat_model_stream"&&RD((i=r.data)==null?void 0:i.chunk,n);return}RD(r,n)}})).pipeThrough(bR(e)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,n)=>{n.enqueue(Hs("text",r))}}))}function b$(t,e){return QE(t,e).pipeThrough(new TextEncoderStream)}function S$(t,e){var r;let n=QE(t,e==null?void 0:e.callbacks).pipeThrough(new TextEncoderStream),i=e==null?void 0:e.data,a=e==null?void 0:e.init,u=i?XE(i.stream,n):n;return new Response(u,{status:(r=a==null?void 0:a.status)!=null?r:200,statusText:a==null?void 0:a.statusText,headers:fb(a==null?void 0:a.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function E$(t,e){e.dataStream.merge(QE(t,e.callbacks))}function RD(t,e){if(typeof t.content=="string")e.enqueue(t.content);else{let r=t.content;for(let n of r)n.type==="text"&&e.enqueue(n.text)}}var T$={};KE(T$,{mergeIntoDataStream:()=>N$,toDataStream:()=>x$,toDataStreamResponse:()=>I$});function eT(t,e){let r=C$();return wC(t[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(n,i){i.enqueue(r(n.delta))}})).pipeThrough(bR(e)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,i)=>{i.enqueue(Hs("text",n))}}))}function x$(t,e){return eT(t,e).pipeThrough(new TextEncoderStream)}function I$(t,e={}){var r;let{init:n,data:i,callbacks:a}=e,u=eT(t,a).pipeThrough(new TextEncoderStream),f=i?XE(i.stream,u):u;return new Response(f,{status:(r=n==null?void 0:n.status)!=null?r:200,statusText:n==null?void 0:n.statusText,headers:fb(n==null?void 0:n.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function N$(t,e){e.dataStream.merge(eT(t,e.callbacks))}function C$(){let t=!0;return e=>(t&&(e=e.trimStart(),e&&(t=!1)),e)}var xW=15*1e3;function SR(t){try{return JSON.parse(t)}catch{return null}}function ER(t){return JSON.stringify(t)}function TR(t){async function e({error:r,toolCall:n}){if(a_.isInstance(r)){let i=r.toolName.split(".");if(i.length==2){let[a,u]=i,f=lg[a],m=SR(n.args);if(f){let y={...r,event:"repair.tool"};return t.log.warn(`Tool name: ${r.toolName}`,y),"command"in f.parameters.shape&&m&&!m.command?(m.command=u,{...n,toolName:a,args:ER(m)}):{...n,toolName:a}}}if(lg["multicoder_"+r.toolName]){let a="multicoder_"+r.toolName;return{...n,toolName:a}}return null}if(ty.isInstance(r)){let i=r.toolName,a=SR(r.toolArgs),u=r.cause,f=[];if(a&&hv.isInstance(u)){let m=u.cause;if(m instanceof tl){for(let x of m.issues){let P=lg[i];if(P!=null&&P.repair){let V=P.repair(x,a);if(typeof V=="object")Object.assign(a,V);else return null}else return null;f.push(x.path.join("."))}let y={...r,event:"repair.args"};return t.log.warn(`Tool arguments: ${r.toolName}.${f.join(", ")}`,y),{...n,args:ER(a)}}}return null}return null}return e}var k$=[Zw,Xw,hp,Qw,W_,Sk,ei,ic,J_],lg=Object.fromEntries(k$.map(t=>[t.name,D$(t)]));function D$(t){return{...t,description:xa(t.description),async execute(e,r){return t.execute?t.execute(e,r.abortSignal.session):"ok"}}}var xR=t=>`# Multicoder Agent

## Role and Identity

### Role Definition
You are Multicoder Agent - an AI coding assistant integrated into VS Code. Your purpose is to help developers write better code through structured requirements gathering, solution design and implementation.

### Agentic Coding
You deliver complete, high quality, fully integrated solutions to the user requests:
- Take some time to inspect and fully undestand the existing codebase
- Maintain a clear picture of project parts, interdependencies and execution flow
- Proactively ask clarifying questions
- Collect complete detailed requirements, constraints and success criteria for each task
- Investigate the existing code and find all missing information before making any decisions
- Consider multiple paths before choosing the right solution
- Use the right level of details for the design or planning documents
- Spend as much efforts and resources as required for a high quality outcome

### Technical Competencies
- Deep understanding of software engineering principles
- Strong algorithmic and system design skills
- Experience with multiple programming languages and paradigms
- Knowledge of development best practices and patterns
- Ability to analyze tradeoffs and make design decisions

## Operating Environment

### VS Code Extension
You were added to the user's development environment by installing and activating Multicoder Agent VS Code extension. As an AI Agent, you can access the project workspace using the provided tools for:
- Editor windows and open files
- Workspace folders and file system
- Source control integration
- Terminal and output panels
- Problems and diagnostics
- Testing frameworks

### Interactive Chat
You interact with a user as a chat participant in GitHub Copilot Chat. 
- Proactively ask clarifying questions using ${W_.name} tool
- Finish your responses invoking ${ei.name} tool
- Use ${ic.name} tool to provide followup actions

### Source Code
You inspect and analyze the project structure using ${Zw.name} tool
- Read the content of the project source files
- List available files and folders in project directories
- Check if the source file or directory exists

### Project Documents
The requirement specifications, design documents and implementation plans are stored separately from the project source code and available through the ${Xw.name} tool.
- Read the document content
- List available documents or document folders

### File System
You manipulate workspace files and directories using ${Qw.name} tool.
- Create new directories
- Delete directories or files

### Editor
You create and modify source files and documents using ${hp.name} tool.
- Insert, modify and delete text
- Handle selections and cursors
- Format code and documents
- Apply workspace edits


## Development Workflow

### Project Understanding
- Analyze existing codebase
- Review documentation
- Identify patterns and conventions
- Map dependencies and structure

### Requirements Gathering
- Ask clarifying questions
- Validate assumptions
- Define acceptance criteria
- Document constraints

### Solution Design
- Create high-level architecture
- Define interfaces and components
- Choose appropriate patterns
- Consider alternatives
- Review tradeoffs

### Implementation Planning
- Break down into steps
- Estimate complexity
- Identify dependencies
- Define milestones

### Hierarchical Execution
- Execute step-by-step plan
- Handle subtasks recursively
- Maintain context stack
- Track progress

## Behavioral Guidelines

### Input Validation and Clarification
- Verify requirements completeness
- Resolve ambiguities early
- Ask focused questions
- Provide examples

### Response Format & Structure
- Use clear headings
- Include code blocks
- Add explanatory comments
- Show progress summaries

### Writing Style
- Be concise and direct
- Use technical terminology
- Focus on solutions
- Explain key decisions

### Coding Conventions
- Follow project style
- Use consistent naming
- Add proper comments
- Structure logically

### Development Best Practices
- Write maintainable code
- Consider performance
- Handle errors properly
- Add proper validation

### Iterative Development Approach
- Start simple
- Refine gradually
- Get feedback early
- Improve incrementally

### Error Handling and Uncertainty
- Validate inputs
- Handle edge cases
- Provide fallbacks
- Report issues clearly
`;var R$=`
You are direct and to the point. You don't waste time with pleasantries or unnecessary context. 
Your goal is to provide accurate, practical solutions to coding problems as efficiently as possible.

You use short code snippets to illustrate your points. These snippets are always properly formatted 
and indented for readability. You explain the key parts of the code, but assume a certain level of 
programming knowledge from your audience.

You often break down your answers into steps or bullet points for clarity. You're not afraid to point out 
flaws in the original question or suggest better approaches if you see them.

You include relevant documentation links or references to support your answers, but you don't just link-drop 
without explanation. You summarize the key points and explain why they're relevant.

Your tone is professional and sometimes a bit terse. You're here to solve problems, not to make friends. 
However, you're also not rude or dismissive. If a question is unclear, you ask for clarification rather than 
making assumptions.

You're aware of best practices and potential pitfalls, so you often include warnings about edge cases or 
performance issues that might not be immediately obvious.
`,O$=`
You are a seasoned software developer with a deep understanding of core programming principles and system design. 
Your experience spans multiple domains, allowing you to approach problems from various angles.

You excel at breaking down complex requirements into manageable components and designing scalable, maintainable 
solutions. Your code is clean, well-documented, and follows best practices for readability and efficiency.

You are particularly strong in algorithmic thinking and optimization. You can analyze performance bottlenecks 
and implement effective solutions, whether it's improving time complexity or reducing resource usage.

You have a solid grasp of software architecture patterns and can adapt them to fit project needs. 
You're comfortable designing and implementing APIs, working with databases, and integrating various system components.

Testing is integral to your development process. You write comprehensive unit tests and understand 
the value of integration and end-to-end testing in ensuring robust, reliable software.

You stay current with industry trends and continuously refine your skills. However, you're pragmatic in your approach, 
focusing on proven technologies that add real value rather than chasing every new trend.

Debugging and troubleshooting are areas where you shine. You can quickly isolate issues in complex systems 
and implement effective fixes.

Lastly, you're a strong communicator. You can explain technical concepts clearly to both technical 
and non-technical stakeholders, facilitating better collaboration across teams.
`,A$=`
When designing and building complex code, your thought process typically follows these steps:

You start by thoroughly analyzing the problem domain. You break down the requirements, 
identifying the core functionalities and potential edge cases.

Next, you consider the overall architecture. You think about how different components will interact, 
data flow, and potential bottlenecks. You often sketch out high-level diagrams to visualize the system structure.

You evaluate trade-offs between different design patterns and approaches. You consider factors like scalability, 
maintainability, and performance. You try to anticipate future requirements to make the system extensible.

Before diving into implementation, you plan out the data structures and algorithms you'll use. 
You consider time and space complexity, thinking about how the solution will perform with larger datasets.

You break the problem down into smaller, manageable modules or functions. You define clear interfaces 
between these components, thinking about how they'll be tested in isolation.

As you start coding, you focus on creating a minimal viable implementation of each component. 
You write unit tests alongside the code, using test-driven development where appropriate.

You constantly refactor as you go, looking for opportunities to improve code clarity and efficiency. 
You're always thinking about how another developer would read and understand your code.

For particularly complex parts, you often step back and reconsider your approach. Sometimes you'll implement 
a quick prototype to validate a concept before fully committing to it.

Throughout the process, you document your code and decisions. You write clear comments explaining the 'why' 
behind complex logic, not just the 'what'.

As the system comes together, you start thinking about integration testing and how different components interact. 
You look for potential race conditions or unexpected behaviors in the system as a whole.

Finally, you review the entire solution, considering aspects like error handling, logging, and monitoring. 
You think about how the system will behave in production and what tools will be needed to maintain it.

This process is iterative, and you're always ready to revisit earlier decisions as new information or challenges arise. The goal is to create a robust, efficient, and maintainable solution that solves the problem at hand while being flexible enough to adapt to future needs.
`;async function IR(){return[Nn([{"Writing style":R$,"Software development experience":O$,"Coding process":A$}]),Kn("Agreed. I will strictly follow these instructions.")]}var Vy=require("vscode");async function NR(t){let e=[];if(Vy.workspace.workspaceFolders&&e.push(await Sh(vi(".",t.id))),Vy.window.activeTextEditor){let r=Ql(Vy.window.activeTextEditor.document.uri).split("/");for(let n=1;n<r.length;n++)e.push(await Sh(vi(r.slice(0,n).join("/"),t.id)));e.push(await lk())}return e.length?[Nn(...e),Kn("Ok. How can I help you?")]:[]}var ac=require("vscode");async function CR(t){let{request:e}=t,r=[];for(let{id:n,name:i,modelDescription:a,value:u}of e.references){let f=String(u);n!="vscode.implicit.viewport"&&(u instanceof ac.Uri?await ef(u)?f=await ug(u):await gh(u)&&(f=await Sh(u)):u instanceof ac.Location&&(f=await sk(u.uri,i,u.range)),a&&(i+=` (${a})`),r.push(f))}for(let{name:n}of e.toolReferences){let i=ac.lm.tools.find(f=>f.name==n),a=i==null?void 0:i.inputSchema;if(!a)continue;let{required:u}=a;if(n=="copilot_getChangedFiles"&&String(u)=="workspacePaths"&&ac.workspace.workspaceFolders){let f=ac.workspace.workspaceFolders.map(({uri:x})=>x.fsPath),m={workspacePaths:f},y=await pb(n,m,t);r.push(...y)}else if(n=="copilot_getErrors"&&String(u)=="filePaths"){let f=yw(),m=f.map(({path:P})=>P),y={filePaths:m},x=await pb(n,y,t);r.push(...x)}else if(n=="copilot_testFailure"){let f=await pb(n,{},t);r.push(...f)}else if(String(u)=="query"){let f=e.prompt,m={query:f},y=await pb(n,m,t);r.push(...y)}}return r.length?[Nn(...r),Kn("Ok. How should I proceed?")]:[]}async function pb(t,e,{request:r,stream:n,token:i}){let a=await ac.lm.invokeTool(t,{input:e,toolInvocationToken:r.toolInvocationToken},i),u=[];for(let f of a.content)if(f instanceof ac.LanguageModelTextPart)u.push(f.value);else if(f instanceof ac.LanguageModelPromptTsxPart){let{text:m,refs:y}=P$(f);u.push(m),y.forEach(x=>n.reference(x))}return u}function P$(t){let e=[],r=[];function n({text:i,children:a,references:u,lineBreakBefore:f}){f&&e.push(`
`),Array.isArray(u)&&u.forEach(({anchor:m})=>{try{let{external:y,scheme:x,authority:P,path:V,query:G,fragment:Y}=m;y?r.push(ac.Uri.parse(y)):r.push(ac.Uri.from({scheme:x,authority:P,path:V,query:G,fragment:Y}))}catch{}}),Array.isArray(a)?a.forEach(n):typeof i=="string"&&e.push(i)}return n(t.value.node),{text:e.join(""),refs:r}}var M$=`
<table><tr><td>
    <span class="codicon codicon-run-all" style="color:var(--vscode-textLink-foreground);"></span>
</td><td>
    <span  style="color:var(--vscode-textLink-foreground);">Running in automatic mode. Press the stop button to switch</span>
</td></tr></table>
`;async function kR(t,e){let{log:r,stream:n,request:i,messages:a}=t,u="chat.next";if(a.length||(u="chat.start",t.resume=null,a.push(...await IR()),a.push(...await NR(t))),t.auto&&(i.command=="resume"?n.markdown(`

Resuming iterrupted task

`):t.resume=null),t.auto=i.command=="auto",t.auto){let x=new o_.MarkdownString("");x.supportHtml=!0,x.supportThemeIcons=!0,x.appendMarkdown(M$),t.stream.markdown(x)}t.interrupted=null,t.token.onCancellationRequested(async x=>{if(r.warn("Interrupted",{event:"chat.stop"}),t.interrupted=DE(t,{}),t.auto){let P=t.interrupted,V=await o_.window.showInformationMessage("Stopped automatic mode task","Resume interactive","Stop");V&&V.startsWith("Resume")&&(t.interrupted===P?o_.commands.executeCommand("workbench.action.chat.open","@multicoder /resume"):await o_.window.showInformationMessage("Chat window already in use"))}});let f=i.references.map(({id:x,name:P})=>P+" "+x).join(`
`),m=i.toolReferences.map(({name:x})=>x).join(`
`),y=(i.command?"/"+i.command+" ":"")+i.prompt;return r.info(y,{event:u,command:i.command,references:f,toolrefs:m}),a.push(...await CR(t)),new Promise((x,P)=>{let V=0,G=Y=>r.error(new Error(Y));if(t.resolve=Y=>V++?G("Resolve closed promise"):x(Y),t.reject=Y=>V++?G("Reject closed promise"):P(Y),t.resume){let Y=t.resume;return t.resume=null,Y(t.request)}Promise.resolve(e(t)).then(Y=>t.resolve(Y)).catch(Y=>t.reject(Y))})}function DE(t,e){return new Promise(r=>{t.resume=r,t.resolve(e)})}function DR(t){let e=t.filter(({role:f})=>f=="user"||f=="tool");e.forEach(({content:f})=>{Array.isArray(f)&&f.forEach(m=>{m.providerOptions&&delete m.providerOptions})});let r=0,n=e.length-1,{role:i,content:a}=e[n],u=a.length-1;for(;++r<=4;){let f=a[u];if(typeof f=="object"&&(f.providerOptions={anthropic:{cache_control:{type:"ephemeral"}}}),i=="tool"||--u<0){if(--n<0)break;({role:i,content:a}=e[n]),u=a.length-1}}}function Nn(...t){return{role:"user",content:t.map(r=>({type:"text",text:xa(r)}))}}function Kn(...t){return{role:"assistant",content:t.map(r=>({type:"text",text:xa(r)}))}}var L$=1e3,F$=100;async function oc(t,e,r=null,n=!1){let{log:i,stream:a,model:u}=t,f={};t.request.model.family.endsWith("sonnet-thought")&&(f.anthropic={thinking:{type:"enabled",budgetTokens:4096}});let m=0,y=0,x=0,P=0,V=0,G=.2,Y=G,q=Y;function J(ve,ye,ue={}){a.markdown(""),a.progress(`Retrying (${ye}): ${ve}`),q=Y+.2*ye,i.warn(ve,{...ue,count:ye,temperature:q,event:"retry."+ye})}let ee=0;for(;;){if(DR(e),await t.interrupted,++ee>F$)throw new Error("Max requests per turn achieved: "+ee);if(++t.counter>L$)throw new Error("Max total requests achieved: "+t.counter);let ve=new AbortController,ye=ve.signal,ue=t.token;ye.session=t;let _e=await wR({model:u,system:xR(u),messages:e,tools:lg,temperature:q,maxTokens:8192,maxSteps:1,abortSignal:ye,experimental_toolCallStreaming:!0,experimental_repairToolCall:TR(t),providerOptions:f}),Ue=!1;for await(let dt of _e.fullStream){if(ue.isCancellationRequested)break;switch(dt.type){case"text-delta":n||a.markdown(dt.textDelta);break;case"tool-call-streaming-start":let Or=lg[dt.toolName].progress;Or&&!n&&(a.markdown(""),a.progress(Or));break;case"reasoning":n||a.markdown(dt.textDelta);break;case"error":if(a_.isInstance(dt.error)&&++m<=5){Ue=!0;let qt=`Unknown tool ${dt.error.toolName}`;J(qt,m,dt.error);break}if(ty.isInstance(dt.error)&&++m<=5){Ue=!0;let qt=`Invalid arguments for tool ${dt.error.toolName}`;J(qt,m,dt.error);break}if(ZE.isInstance(dt.error)&&++m<=5){Ue=!0,J("Tool call repair failed",m,dt.error);break}let{event:Ze,count:yn,message:Le}=dt.error;if(Ze=="retry"){J(Le,yn,dt.error),q=Y;break}throw dt.error}}if(t.interrupted){await t.interrupted;continue}let $e=await _e.response,Ke=await _e.toolCalls,ct=await _e.toolResults,vt=await _e.usage,wr=await _e.providerMetadata;if(Ue)continue;m=0;let $r="";for(let dt of ct)dt.result.startsWith("Tool error: ")&&($r=dt.result.slice(12));if($r)if(++y<3){J($r,y);continue}else if(++x<3)J("Tool execution error",x),Y=G+.2*x;else throw new Error($r);else x=0,Y=G;if(y=0,r&&$e.messages.length==1){let{role:dt,content:Or}=$e.messages[0];if(dt=="assistant"&&Array.isArray(Or)&&Or.length==1){let Ze=Or[0];if(Ze.type=="text"&&Ze.text===""&&++P<=5){J("Empty response",P),await A_(5*P,ue);continue}}}P=0,q=Y,e.push(...$e.messages);let Ne=e.pop();for(let{toolName:dt,toolCallId:Or,args:Ze,result:yn}of ct){let Le=lg[dt];if(Le!=null&&Le.finalize){let qt=await Le.finalize(Ze,t,yn);if(Ne.role=="tool"){let Wt=Ne.content.find(Tt=>Tt.toolCallId==Or);Wt&&(Wt.result=qt)}}}if(e.push(Ne),Ke.length){V=0;for(let dt of Ke)if(dt.toolName==(r==null?void 0:r.name))return dt.args}else{if((r==null?void 0:r.name)===ei.name)return e.push(Nn("ok")),ei.fallback();if(r){let{name:dt,fallback:Or,retry:Ze}=r;if(++V>3){if(Or)return e.push(Nn("ok")),Or();throw new Error(`Unable to call ${dt} tool`)}J("Unexpected stop",V,{name:dt}),await A_(5*V,ue),e.push(Nn(Ze||`Reply using ${dt} tool`))}else return}}}var hb=require("vscode");var OR=".multicoder/task";async function tT(t){if(!await ef(t))return null;let e=await hb.commands.executeCommand("vscode.executeDocumentSymbolProvider",t);if(!e||e.length===0)return null;let r=await hb.workspace.openTextDocument(t),n=e[0],i=RR(n.name),a=n.children.map(({name:u,range:f})=>({header:RR(u),content:r.getText(f).slice(u.length).trim()}));return{title:i,items:a}}function RR(t){return t=t.replace(/^#+\s+/,""),t=t.replace(/^Step \d+[\.:]*\s+/,""),t=t.replace(/^\d+[\.:]+\s+/,""),t}var U$=10;function j$(t){if(!t)return"";let{composite:e,followers:r,index:n}=t;if(e&&(n=r.length?r.slice(-1)[0].index:""),typeof n=="number")return n+1+"a";let i=parseInt(n,10),a=i>0?String(i):"",u=n.slice(a.length),f=u.slice(-1),m=u.length>1?u[0]:"",y=V=>V==""||V=="z"?"a":String.fromCharCode(V.charCodeAt(0)+1),x=y(f),P=f=="z"?y(m):m;return a+P+x}function af(t,e={}){let{messages:r}=t,n=t.task,i=n?n.depth+(n.composite?1:0):0;if(i>=U$)throw new Error("Max depth exceeded");if(n&&!n.parent&&e.composite)return t.task={...n,...e},t.task;let a=e.index??j$(n),u=(n==null?void 0:n.id)||"";n&&!n.composite&&(u=u.split(".").slice(0,-1).join(".")),u+=(u?".":"")+(typeof a=="number"?a+1:a);let f={id:u,depth:i,folder:OR+(u?"/"+u:""),title:"",start:r.length,prompt:"",state:"",evals:null,parent:n,composite:!1,index:a,summary:"",completed:[],followers:[],edits:[],cid:t.id,...e};return t.task=f,f}async function B$(t){let e=[];if(gh(t))for(let{uri:r,isFile:n}of await bw(t))n&&e.push(await z_(r));return e}async function Ro({state:t,id:e,folder:r,depth:n,title:i,prompt:a,index:u,completed:f,edits:m,summary:y,parent:x,cid:P},V=""){let G=[];if(!n)G.push(gi("request",a));else if(typeof u=="number"){let Y={id:e,name:i,parent:x.title};G.push([gi("task_metadata",Do(Y)),gi("task_instructions",a)])}else G.push(gi("task_instructions",a));if(!t&&!n&&G.push(await Sh(vi(r,P))),G.push(...await B$(vi(r,P))),f.forEach(Y=>G.push($$(Y[0]))),m.length&&!f.length){let Y=new Set(m.map(q=>q.path));for(let q of Y)G.push(await ug(vi(q,P)))}return y&&G.push(y),V&&G.push(V),Nn(...G)}function $$({id:t,title:e,summary:r,completed:n,edits:i}){let a={step:t,title:e,status:"completed"},u=[];u.push(gi("step_metadata",Do(a)));let f=i.map(V=>V.summary),m=n.map(Y$);m.length?u.push(...m.map(V=>gi("implementation_details",V))):u.push(gi("implementation_details",Do(f)));let y=new Set(i.filter(V=>!V.before).map(V=>V.path)),x=new Set(i.filter(V=>V.before&&V.after).map(V=>V.path)),P=new Set(i.filter(V=>V.before&&!V.after).map(V=>V.path));return y.forEach(V=>x.delete(V)),P.forEach(V=>x.delete(V)),u.push(gi("files_created",Do([...y]))),u.push(gi("files_modified",Do([...x]))),u.push(gi("files_deleted",Do([...P]))),u.push(gi("step_summary",r)),u}function Y$(t){let{id:e,title:r,summary:n,completed:i,edits:a}=t[0],u=a.map(y=>y.summary),f=i.map(y=>y[0].summary),m=[];return m.push(e+": "+r),f.length?m.push(Do(f)):u.length>1&&m.push(Do(u)),m.push(n),m}async function fg(t){let{task:e,messages:r,stream:n}=t,{id:i}=e,{length:a}=r,u=i?"task "+i:"the request";n.progress("Deciding next steps..."),r.push(Kn(`Let me evaluate ${u} for clarity, complexity and workload.`)),r.push(Nn(`Sure. Reply with ${J_.name} tool only, no text.`));let f=await oc(t,r,J_,!0),[m,y,x]=J_.compute(f);e.evals={...f,vagueness:m,complexity:y,workload:x},r.length=a,n.markdown("")}var rd=require("vscode");function Ih(){}Ih.prototype={diff:function(e,r){var n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.callback;typeof i=="function"&&(a=i,i={});var u=this;function f(ue){return ue=u.postProcess(ue,i),a?(setTimeout(function(){a(ue)},0),!0):ue}e=this.castInput(e,i),r=this.castInput(r,i),e=this.removeEmpty(this.tokenize(e,i)),r=this.removeEmpty(this.tokenize(r,i));var m=r.length,y=e.length,x=1,P=m+y;i.maxEditLength!=null&&(P=Math.min(P,i.maxEditLength));var V=(n=i.timeout)!==null&&n!==void 0?n:1/0,G=Date.now()+V,Y=[{oldPos:-1,lastComponent:void 0}],q=this.extractCommon(Y[0],r,e,0,i);if(Y[0].oldPos+1>=y&&q+1>=m)return f(AR(u,Y[0].lastComponent,r,e,u.useLongestToken));var J=-1/0,ee=1/0;function ve(){for(var ue=Math.max(J,-x);ue<=Math.min(ee,x);ue+=2){var _e=void 0,Ue=Y[ue-1],$e=Y[ue+1];Ue&&(Y[ue-1]=void 0);var Ke=!1;if($e){var ct=$e.oldPos-ue;Ke=$e&&0<=ct&&ct<m}var vt=Ue&&Ue.oldPos+1<y;if(!Ke&&!vt){Y[ue]=void 0;continue}if(!vt||Ke&&Ue.oldPos<$e.oldPos?_e=u.addToPath($e,!0,!1,0,i):_e=u.addToPath(Ue,!1,!0,1,i),q=u.extractCommon(_e,r,e,ue,i),_e.oldPos+1>=y&&q+1>=m)return f(AR(u,_e.lastComponent,r,e,u.useLongestToken));Y[ue]=_e,_e.oldPos+1>=y&&(ee=Math.min(ee,ue-1)),q+1>=m&&(J=Math.max(J,ue+1))}x++}if(a)(function ue(){setTimeout(function(){if(x>P||Date.now()>G)return a();ve()||ue()},0)})();else for(;x<=P&&Date.now()<=G;){var ye=ve();if(ye)return ye}},addToPath:function(e,r,n,i,a){var u=e.lastComponent;return u&&!a.oneChangePerToken&&u.added===r&&u.removed===n?{oldPos:e.oldPos+i,lastComponent:{count:u.count+1,added:r,removed:n,previousComponent:u.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:r,removed:n,previousComponent:u}}},extractCommon:function(e,r,n,i,a){for(var u=r.length,f=n.length,m=e.oldPos,y=m-i,x=0;y+1<u&&m+1<f&&this.equals(n[m+1],r[y+1],a);)y++,m++,x++,a.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return x&&!a.oneChangePerToken&&(e.lastComponent={count:x,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=m,y},equals:function(e,r,n){return n.comparator?n.comparator(e,r):e===r||n.ignoreCase&&e.toLowerCase()===r.toLowerCase()},removeEmpty:function(e){for(var r=[],n=0;n<e.length;n++)e[n]&&r.push(e[n]);return r},castInput:function(e){return e},tokenize:function(e){return Array.from(e)},join:function(e){return e.join("")},postProcess:function(e){return e}};function AR(t,e,r,n,i){for(var a=[],u;e;)a.push(e),u=e.previousComponent,delete e.previousComponent,e=u;a.reverse();for(var f=0,m=a.length,y=0,x=0;f<m;f++){var P=a[f];if(P.removed)P.value=t.join(n.slice(x,x+P.count)),x+=P.count;else{if(!P.added&&i){var V=r.slice(y,y+P.count);V=V.map(function(G,Y){var q=n[x+Y];return q.length>G.length?q:G}),P.value=t.join(V)}else P.value=t.join(r.slice(y,y+P.count));y+=P.count,P.added||(x+=P.count)}}return a}var XJ=new Ih;function PR(t,e){var r;for(r=0;r<t.length&&r<e.length;r++)if(t[r]!=e[r])return t.slice(0,r);return t.slice(0,r)}function MR(t,e){var r;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(r=0;r<t.length&&r<e.length;r++)if(t[t.length-(r+1)]!=e[e.length-(r+1)])return t.slice(-r);return t.slice(-r)}function rT(t,e,r){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return r+t.slice(e.length)}function nT(t,e,r){if(!e)return t+r;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+r}function Gy(t,e){return rT(t,e,"")}function mb(t,e){return nT(t,e,"")}function LR(t,e){return e.slice(0,q$(t,e))}function q$(t,e){var r=0;t.length>e.length&&(r=t.length-e.length);var n=e.length;t.length<e.length&&(n=t.length);var i=Array(n),a=0;i[0]=0;for(var u=1;u<n;u++){for(e[u]==e[a]?i[u]=i[a]:i[u]=a;a>0&&e[u]!=e[a];)a=i[a];e[u]==e[a]&&a++}a=0;for(var f=r;f<t.length;f++){for(;a>0&&t[f]!=e[a];)a=i[a];t[f]==e[a]&&a++}return a}var vb="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",H$=new RegExp("[".concat(vb,"]+|\\s+|[^").concat(vb,"]"),"ug"),gb=new Ih;gb.equals=function(t,e,r){return r.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};gb.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(e.intlSegmenter.segment(t),function(a){return a.segment})}else r=t.match(H$)||[];var n=[],i=null;return r.forEach(function(a){/\s/.test(a)?i==null?n.push(a):n.push(n.pop()+a):/\s/.test(i)?n[n.length-1]==i?n.push(n.pop()+a):n.push(i+a):n.push(a),i=a}),n};gb.join=function(t){return t.map(function(e,r){return r==0?e:e.replace(/^\s+/,"")}).join("")};gb.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var r=null,n=null,i=null;return t.forEach(function(a){a.added?n=a:a.removed?i=a:((n||i)&&FR(r,i,n,a),r=a,n=null,i=null)}),(n||i)&&FR(r,i,n,null),t};function FR(t,e,r,n){if(e&&r){var i=e.value.match(/^\s*/)[0],a=e.value.match(/\s*$/)[0],u=r.value.match(/^\s*/)[0],f=r.value.match(/\s*$/)[0];if(t){var m=PR(i,u);t.value=nT(t.value,u,m),e.value=Gy(e.value,m),r.value=Gy(r.value,m)}if(n){var y=MR(a,f);n.value=rT(n.value,f,y),e.value=mb(e.value,y),r.value=mb(r.value,y)}}else if(r)t&&(r.value=r.value.replace(/^\s*/,"")),n&&(n.value=n.value.replace(/^\s*/,""));else if(t&&n){var x=n.value.match(/^\s*/)[0],P=e.value.match(/^\s*/)[0],V=e.value.match(/\s*$/)[0],G=PR(x,P);e.value=Gy(e.value,G);var Y=MR(Gy(x,G),V);e.value=mb(e.value,Y),n.value=rT(n.value,x,Y),t.value=nT(t.value,x,x.slice(0,x.length-Y.length))}else if(n){var q=n.value.match(/^\s*/)[0],J=e.value.match(/\s*$/)[0],ee=LR(J,q);e.value=mb(e.value,ee)}else if(t){var ve=t.value.match(/\s*$/)[0],ye=e.value.match(/^\s*/)[0],ue=LR(ve,ye);e.value=Gy(e.value,ue)}}var V$=new Ih;V$.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(vb,"]+|[^\\S\\n\\r]+|[^").concat(vb,"]"),"ug");return t.match(e)||[]};var _b=new Ih;_b.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var r=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var i=0;i<n.length;i++){var a=n[i];i%2&&!e.newlineIsToken?r[r.length-1]+=a:r.push(a)}return r};_b.equals=function(t,e,r){return r.ignoreWhitespace?((!r.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),Ih.prototype.equals.call(this,t,e,r)};function UR(t,e,r){return _b.diff(t,e,r)}var G$=new Ih;G$.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var z$=new Ih;z$.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function iT(t){"@babel/helpers - typeof";return iT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iT(t)}var zy=new Ih;zy.useLongestToken=!0;zy.tokenize=_b.tokenize;zy.castInput=function(t,e){var r=e.undefinedReplacement,n=e.stringifyReplacer,i=n===void 0?function(a,u){return typeof u>"u"?r:u}:n;return typeof t=="string"?t:JSON.stringify(aT(t,null,null,i),i,"  ")};zy.equals=function(t,e,r){return Ih.prototype.equals.call(zy,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),r)};function aT(t,e,r,n,i){e=e||[],r=r||[],n&&(t=n(i,t));var a;for(a=0;a<e.length;a+=1)if(e[a]===t)return r[a];var u;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),u=new Array(t.length),r.push(u),a=0;a<t.length;a+=1)u[a]=aT(t[a],e,r,n,i);return e.pop(),r.pop(),u}if(t&&t.toJSON&&(t=t.toJSON()),iT(t)==="object"&&t!==null){e.push(t),u={},r.push(u);var f=[],m;for(m in t)Object.prototype.hasOwnProperty.call(t,m)&&f.push(m);for(f.sort(),a=0;a<f.length;a+=1)m=f[a],u[m]=aT(t[m],e,r,n,m);e.pop(),r.pop()}else u=t;return u}var oT=new Ih;oT.tokenize=function(t){return t.slice()};oT.join=oT.removeEmpty=function(t){return t};function sT(t){let{task:e,stream:r}=t,{id:n,title:i}=e,a=`<table><tr><th> $(list-tree) ${n} ${i} </th></tr></table>`,u=new rd.MarkdownString(a);u.supportHtml=!0,u.supportThemeIcons=!0,r.markdown(u)}async function yb(t,e,r){let n=(...P)=>`command:multicoder.diffView?${encodeURIComponent(JSON.stringify(P))}`,i=P=>`<span class="codicon codicon-${P}" style="color:var(--vscode-foreground);"></span>`,a=new rd.MarkdownString(`

`);a.supportHtml=!0,a.supportThemeIcons=!0,a.isTrusted={enabledCommands:["multicoder.diffView"]},a.appendMarkdown(`<h3>${i("check")} ${r}</h3>

`),e.forEach(({summary:P,path:V,id:G})=>{a.appendMarkdown(`- [${P}](${n(V,G,t.id)} 'Open Diff')
`)}),a.appendMarkdown(`

`),t.stream.markdown(a),t.stream.button({title:"Apply All",command:"multicoder.action",arguments:[x],tooltip:"Shows confirmation panel (refactor preview)"});let u=new Set(e.map(({path:P})=>P)),f=yw(),m=new Map;async function y(P){try{return await Qv(P)}catch{return""}}for(let P of u.values()){let V="",G="",Y=vi(P,t.id),q=Xc(Y);f.find(J=>J.path===q.path)?V=(await rd.workspace.openTextDocument(q)).getText():V=await y(q),G=await y(Y),m.set(P,{before:V,after:G})}async function x(){let P=new rd.WorkspaceEdit;for(let V of u.values()){let{before:G,after:Y}=m.get(V)||{},q=Xc(vi(V,t.id));G||(q=q.with({scheme:"untitled"}));let J=await rd.workspace.openTextDocument(q),ee=J.getText(),ve=Y;ee!==ve&&W$(P,q,ee,ve,!0)}await rd.workspace.applyEdit(P),t.log.info(r,{event:"action.all"})}}function W$(t,e,r,n,i=!1,a=""){let u=UR(r,n,{ignoreWhitespace:!1}),f=0,m={needsConfirmation:i,label:a};for(let y=0;y<u.length;y++){let x=u[y];if(x.removed){let P=new rd.Range(f,0,f+x.count,0),V=u[++y];V.added?t.replace(e,P,V.value,m):(t.delete(e,P,m),f+=(V==null?void 0:V.count)||0)}else x.added&&(t.insert(e,new rd.Position(f,0),x.value,m),f-=x.count);f+=x.count}}async function Em(t,e,r){let n=e.length;if(t.auto)return[];e.slice(-1)[0].role!="assistant"&&e.push(Kn("I will now suggest some followup actions.")),e.push(Nn(r));let i=await oc(t,e,ic,!0);return e.length=n,i.actions.map(a=>({command:"",prompt:a.replace(/^-\s+/,"")}))}var J$=()=>Zt`
    Suggest possible changes or improvements to the code created or updated in the current implementation step. 
    Include optional elements, alternative approaches or high-level improvements.
    Offer them as followup actions using ${ic.name} tool.
    Only include the actions which are in scope for this current step.
`;async function uT(t){let{task:e}=t,{title:r,folder:n}=e,i=await tT(vi(n+"/implementation_plan.md",t.id));return i&&!r&&(e.title=i.title),!i||i.items.length<2?K$(t):Z$(t,i)}async function K$(t){let{task:e,messages:r,log:n}=t,{id:i,depth:a,title:u}=e;n.info(`${i} ${u}`,{event:"step.implement"});let f=a?"this task":"the request";r.length=e.start,r.push(await Ro(e),Kn(`Let me implement ${f} now`),Nn(`Sure. Finish ${f}, then deliver a summary using ${ei.name} tool.`));let m=await oc(t,r,ei);return e.summary=m.text||(u||f)+" is completed.",await wb(t)}async function Z$(t,e){let{task:r,messages:n}=t,{header:i,content:a}=e.items[0];n.length=r.start,n.push(await Ro(r),Kn(`I will start working on ${e.title}. The first step is: ${i}`));let u=af(t,{index:0,title:i,prompt:a});return sT(t),n.push(await Ro(u)),await fg(t),await Wy(t,!0)}async function jR(t){let{task:e,messages:r}=t,n=[],i=[];do n.unshift(e),i.unshift(...e.edits),e=e.parent,n[0].parent=null;while(!e.composite);let{folder:a,completed:u}=e,f=await tT(vi(a+"/implementation_plan.md",t.id));if(u.push(n),e.edits.push(...i),t.task=e,u.length>=f.items.length)return await X$(t);let m=u.length,{header:y,content:x}=f.items[m];return r.length=e.start,r.push(await Ro(e),Kn(`I will continue working on ${f.title}. The next step is ${m+1}: ${y}`)),e=af(t,{index:m,title:y,prompt:x}),sT(t),r.push(await Ro(e)),await fg(t),await Wy(t,!0)}async function BR(t,e){let{messages:r}=t,n=af(t,{prompt:e,composite:!0});return r.push(await Ro(n)),await fg(t),await Wy(t,!0)}async function X$(t){let{task:e,messages:r}=t;r.length=e.start,r.push(await Ro(e),Kn(`All the steps of ${e.title} are now completed. Let me summarize what has been done.`),Nn(`Sure. Deliver a summary using ${ei.name} tool.`));let n=await oc(t,r,ei);return e.summary=n.text||e.title+" is completed.",await wb(t)}async function wb(t){let{task:e,messages:r,stream:n}=t,{index:i,title:a,parent:u,edits:f,followers:m,summary:y}=e;e.state="ready",m.length&&(y&&(n.markdown(y),n.markdown(`

`)),m.forEach(P=>{n.markdown(P.summary),n.markdown(`

`)})),f.length>1&&await yb(t,f,a||"Task completed"),u||(t.auto=!1);let x=await Em(t,r,J$());return u&&(typeof i=="number"?x.push({command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"},{command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"}):x.push({command:"",prompt:"",label:"\u25B7\xA0 back to parent (Enter)"})),r.length=e.start,r.push(await Ro(e)),r.push(Kn("I will make some changes in this last step")),{suggestions:x}}var Q$=t=>Zt`
    Use ${hp.name} tool to create ${t} file containing the detailed implementation plan for this task.
    Split the task into smaller, more manageable steps and specify what should be done at each step.
    Strictly follow the requirements and design documents if available. 
    Only plan for elements and features which are explicitely included in the specs and design.
    Take into account the changes already made in the previous tasks.
    Carefully think through all steps and mentally verify the proposed implementation.
    Follow KISS, YAGNI and SOLID principles, focus on simplicity above all other things.
    This plan is for an implementation by an AI coding agent, it must exclude any human activities (meetings, peer review, manual testing etc)
    Only use the capabilities and the information which you as an AI coding agent have explicit access to as part of this project.
    The document should contain a title and multiple sections (linear structure, no nested sub-sections)
    Each section represents one step of the plan and consists of a header and a step description.
    If the amount of work is very small, describe it as one single step (title with plain text, no section heading).
    Apply a very dense, concise writing style, but keep all minor details.
    Provide a short summary using ${ei.name} tool.
`,$R=t=>Zt`
    ${t}
    ---
    Modify the document, then deliver a very short summary using ${ei.name} tool.
`,eY=()=>Zt`
    Carefully analyse each section of the plan to identify any inconsistencies or logical errors. 
    Check for edge cases, cross-dependencies and anything, that can affect successful implementation.
`,tY=()=>Zt`
    Suggest possible changes which will make the implementation plan more clear, precise and easy to understand. 
    Include optional elements, alternative implementations or high-level improvements.
    Offer them as followup actions using ${ic.name} tool.
    Only include the actions which improve the content of the implementation plan.
`;async function YR(t,e){return af(t,{prompt:e,composite:!0}),bb(t)}async function bb(t,e=!1){let{task:r,log:n}=t,{id:i,title:a,depth:u,folder:f,evals:m}=r,y=f+"/implementation_plan.md",x=u?"this task":"this request";if(e&&(!m.planning&&m.workload<2.5||m.workload<u))return uT(t);r.composite=!0,n.info(`${i} ${a}`,{event:"step.plan"});let P="Planning...",V=Kn(`Let me create an implementation plan for ${x}.`),G=Nn(Q$(y));return qR(t,P,V,G)}async function rY(t,e){let r="Updating plan...",n=Kn("Let me do some changes in the implementation plan."),i=Nn($R(e));return e=="i"&&(r="Improving plan...",n=Kn("Let me review and improve the implementation plan."),i=Nn($R(eY()))),qR(t,r,n,i)}async function qR(t,e,r,n){let{task:i,messages:a,stream:u}=t;return u.progress(e),a.length=i.start,a.push(await Ro(i),r,n),await oc(t,a,ei),nY(t)}async function nY(t){let{task:e,messages:r}=t;e.state="plan";let n=await Em(t,r,tY());return n.push({command:"",prompt:"i",label:"\u2B6E\xA0 review and improve"},{command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"},{command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"}),r.length=e.start,r.push(await Ro(e)),r.push(Kn("Let me do some changes in the implementation plan.")),{suggestions:n}}var HR={handlePrompt:rY,handleNext:uT};var iY=t=>Zt`
    Use ${hp.name} tool to create solution design document(s) in the ${t}/ directory.
    Analyze the current code, research possible options and design an optimal solution.
    Your goal is to find the most simple solution, very easy to understand and maintain. 
    Only include the features which are explicitely required. Skip anything that can be added at a later stage. Skip implementation steps.
    Keep it short and simple for trivial tasks but include enough details for larger elements.
    Apply a very dense, concise writing style, but keep all minor details.
    Provide a short summary using ${ei.name} tool.
`,VR=t=>Zt`
    ${t}
    ---
    Modify the document(s), then deliver a very short summary using ${ei.name} tool.
`,aY=()=>Zt`
    Carefully review the design document(s) to find any missing elements.
    Add or correct any significant items and remove anything that is not strictly necessary.
    Focus strictly on the solution design - DO NOT try to write code, DO NOT make step-by-step plan at this point.
`,oY=()=>Zt`
    Suggest possible changes which may make the solution design more clear, precise and easy to understand. 
    Include optional elements, alternative solutions or high-level improvements.
    Offer them as followup actions using ${ic.name} tool.
    Only include the actions which improve the content of the solution design document(s).
`;async function GR(t,e){return af(t,{prompt:e,composite:!0}),Sb(t)}async function Sb(t,e=!1){let{task:r,log:n}=t,{id:i,title:a,depth:u,folder:f,evals:m}=r,y=u?"this task":"the request";if(e&&(!m.design&&m.complexity<3||m.complexity<u))return bb(t,!0);n.info(`${i} ${a}`,{event:"step.design"});let x="Designing solution...",P=Kn(`Let me analyze ${y}, explore the existing code and design a solution.`),V=Nn(iY(f));return zR(t,x,P,V)}async function sY(t,e){let r="Updating requirements...",n=Kn("Let me do some changes in the requirements document."),i=Nn(VR(e));return e=="i"&&(r="Improving requirements...",n=Kn("Let me review and improve the requirements document."),i=Nn(VR(aY()))),zR(t,r,n,i)}async function zR(t,e,r,n){let{task:i,messages:a,stream:u}=t;return u.progress(e),a.length=i.start,a.push(await Ro(i),r,n),await oc(t,a,ei),uY(t)}async function uY(t){let{task:e,messages:r}=t;e.state="design";let n=await Em(t,r,oY());return n.push({command:"",prompt:"i",label:"\u2B6E\xA0 review and improve"},{command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"},{command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"}),r.length=e.start,r.push(await Ro(e)),await fg(t),r.push(Kn("Let me do some changes in the solution design document(s).")),{suggestions:n}}var WR={handlePrompt:sY,handleNext:bb};var cY=t=>Zt`
    Use ${hp.name} tool to create requirements document in the ${t}/ directory.
    Clarify the request, removing any ambiguities or omissions.
    Use ${W_.name} tool to obtain the missing information.
    Include implied requirements derived from the project configuration and context.
    Skip implementation, focus strictly on the requirements.
    Keep it short and simple for trivial tasks but include enough details for larger requests.
    Produce a minimal, but complete document, do not leave any open questions for the future.
    Apply a very dense, concise writing style, but keep all minor details.
    Provide a short summary using ${ei.name} tool.
`,JR=t=>Zt`
    ${t}
    ---
    Modify the document, then deliver a very short summary using ${ei.name} tool.
`,lY=()=>Zt`
    Carefully review the requirements document to find any missing elements.
    Add or correct any significant items and remove anything that is not strictly necessary.
    Focus strictly on the requirements - DO NOT try to design the solution, define data structures or write some code at this point.
`,fY=()=>Zt`
    Suggest possible changes which may make the requirements more clear, precise and easy to understand. 
    Include optional elements, alternative approaches or high-level improvements.
    Offer them as followup actions using ${ic.name} tool.
    Only include the actions which improve the content of the requirement specification document(s).
`;async function KR(t,e){return af(t,{prompt:e,composite:!0}),Wy(t)}async function Wy(t,e=!1){let{task:r,log:n}=t,{id:i,title:a,depth:u,folder:f,evals:m}=r;if(e&&(!m.requirements&&m.vagueness<3||u>0))return Sb(t,!0);n.info(`${i} ${a}`,{event:"step.spec"});let y="Creating requirements spec...",x=Kn("Let me clarify the request and create a requirements document."),P=Nn(cY(f));return ZR(t,y,x,P)}async function dY(t,e){let r="Updating requirements...",n=Kn("Let me do some changes in the requirements document."),i=Nn(JR(e));return e=="i"&&(r="Improving requirements...",n=Kn("Let me review and improve the requirements document."),i=Nn(JR(lY()))),ZR(t,r,n,i)}async function ZR(t,e,r,n){let{task:i,messages:a,stream:u}=t;return u.progress(e),a.length=i.start,a.push(await Ro(i),r,n),await oc(t,a,ei),pY(t)}async function pY(t){let{task:e,messages:r}=t;e.state="spec";let n=await Em(t,r,fY());return n.push({command:"",prompt:"i",label:"\u2B6E\xA0 review and improve"},{command:"auto",prompt:"",label:"\u2A20\xA0 auto-run to completion"},{command:"",prompt:"",label:"\u25B7\xA0 next step (Enter)"}),r.length=e.start,r.push(await Ro(e)),await fg(t),r.push(Kn("Let me do some changes in the requirements document.")),{suggestions:n}}var XR={handlePrompt:dY,handleNext:Sb};var hY=Zt`
    Tell about yourself and how you can help here.
`,mY=()=>Zt`
    Suggest possible changes or improvements to the code created or updated in the current turn. 
    Include optional elements, alternative approaches or high-level improvements.
    Offer them as followup actions using ${ic.name} tool.
    Only include the actions which are in scope for this current turn.
`;async function QR(t,e){return af(t,{prompt:e}),vY(t,"Thinking...",Nn(e))}async function vY(t,e,r){let{task:n,messages:i,stream:a}=t;a.progress(e),i.push(r);let u=await oc(t,i,ei),f=i.pop(),m=i.pop(),y=i.length+1;if(f.role=="tool"&&Array.isArray(m.content)){let x=m.content.filter(P=>P.type!="tool-call");x.push({type:"text",text:u.text}),i.push({role:"assistant",content:x}),n.summary=u.text}else{i.push(m),i.push(Nn(`Reply with a short summary of this turn using ${ei.name} tool.`));let x=await oc(t,i,ei,!0);i.length=y,n.summary=x.text}return gY(t)}async function gY(t){let{task:e,messages:r}=t;e.state="ready";let n=e.edits;return n.length>1&&await yb(t,n,e.title||"Task completed"),e.parent||(t.auto=!1),{suggestions:await Em(t,r,mY())}}async function _Y(t){let{task:e,messages:r}=t,{parent:n,index:i}=e;if(typeof i=="number"||parseInt(i,10)>0)return await jR(t);if(n){let a=[],u=[];do a.unshift(e),u.unshift(...e.edits),e=e.parent,a[0].parent=null;while(!e.composite);return e.followers.push(...a),e.edits.push(...u),t.task=e,r.length=e.start,r.push(await Ro(e)),await wb(t)}else return await QR(t,hY)}var eO={handlePrompt:QR,handleNext:_Y};var yY=1e3,wY={auto:BR,spec:KR,design:GR,plan:YR},rO={spec:XR,design:WR,plan:HR,ready:eO};async function nO(t){let{task:e,request:r}=t,{command:n,prompt:i}=r;e||(e=af(t,{state:"ready",composite:!0})),e.state||(e=e.parent,t.task=e),n=="auto"&&!i&&(n="");let a=null,u=0;for(n?a=await bY(t,n,i):i?a=await SY(t,i):a=await tO(t);t.auto;)if(a=await tO(t),++u>yY)throw new Error("Too many steps in autonomous run");return a}async function bY(t,e,r){let n=wY[e];if(typeof n!="function")throw new Error("Unknown command: "+e);return n(t,r)}async function SY(t,e){let{task:r}=t;return rO[r.state].handlePrompt(t,e)}async function tO(t){let{task:e}=t;return rO[e.state].handleNext(t)}var aO=require("vscode"),EY=()=>`
Multicoder can work with LLM models provided by **GitHub Copilot** (default configuration) or 
send requests directly to the core provider APIs (**Anthropic**, **OpenAI**).

If you have your own API key and want to use it instead of the Github models, select 'Core Providers' in the Model Provider dropdown (settings panel)
and set your API key(s) using the buttons below.

`;async function iO(t,e){var n;let r=await t.ext.secrets.get(e)||((n=process==null?void 0:process.env)==null?void 0:n[e]);return r&&r.slice(0,12)+"..."+r.slice(-4)}async function cT(t){let{log:e,stream:r}=t;aO.commands.executeCommand("workbench.action.openSettings","@ext:multicoder.multicoder"),e.info("options",{event:"options"}),r.markdown(EY());let n=await iO(t,"ANTHROPIC_API_KEY");r.markdown(`Anthropic API key: ${n}`),r.button({command:"multicoder.storeApiKey",title:"Set Anthropic key",arguments:["ANTHROPIC_API_KEY","Anthropic API key"]}),r.markdown(`

`);let i=await iO(t,"OPENAI_API_KEY");r.markdown(`OpenAI API key: ${i}`),r.button({command:"multicoder.storeApiKey",title:"Set OpenAI key",arguments:["OPENAI_API_KEY","OpenAI API key"]})}var oO,sO;async function TY(t){var P,V;let{request:e,ext:r}=t,n=e.model.id,i=Tm.workspace.getConfiguration("multicoder"),a=i.get("modelProvider");if(n==oO&&a==sO&&t.model)return;oO=n,sO=a;let u=e.model.family;if(a=="default"&&(a="copilot"),a=="copilot"){t.model=TE({id:e.model.id,provider:"copilot",apiKey:""});return}if(a=="auto"&&(a=(P=xE.find(G=>G.family==u))==null?void 0:P.provider,!a))throw new Error("Cannot find model: "+u);let f=ik.find(G=>G.id==a),m=xE.find(G=>G.provider==a&&G.family==u),{envKeyName:y}=f,x=await r.secrets.get(y)||((V=process==null?void 0:process.env)==null?void 0:V[y]);if(!x){await cT(t);return}t.model=TE({...m,apiKey:x})}function xY({history:t}){for(let e=t.length-1;e>=0;e--){let r=t[e];if(r instanceof Tm.ChatResponseTurn){let{id:n,messages:i,task:a,volume:u}=r.result.metadata||{};if(n)return[n,i,a,u]}}return[]}function uO(t){let{ext:e,log:r,recent:n}=t,i=Tm.chat.createChatParticipant("multicoder",async(x,P,V,G)=>{let[Y,q,J,ee]=xY(P),{sessionId:ve}=x.toolInvocationToken,ye=Y&&n.get(Y);!ye&&ve&&(ye=n.get(ve)),Y??(Y=_w()),q??(q=[]),ye||(ye={id:Y,messages:q,task:J,...t,request:{},chat:{},stream:{}},ye.log={...t.log,session:ye},TN(Y,ee)),Y=ye.id,n.set(Y,ye),ve&&n.set(ve,ye),Object.assign(ye,{token:G}),Object.assign(ye.request,x),Object.assign(ye.chat,P),Object.assign(ye.stream,V),ye.counter=0,y(ye.request);try{if(await TY(ye),!ye.model)return;if(x.command=="options")return await cT(ye),{metadata:{id:Y,messages:q}};let ue=await kR(ye,nO);return{metadata:{id:Y,messages:ye.messages,task:ye.task,volume:EN(ye.id),followups:(ue==null?void 0:ue.suggestions)||[]}}}catch(ue){throw r.error(ue),ye.model=null,ue}});i.iconPath=Tm.Uri.joinPath(e.extensionUri,"resources","multicoder.png"),i.onDidReceiveFeedback(({kind:x})=>{r.info(x?"Good":"Bad",{event:"feedback"})});let a=e.extension.packageJSON.contributes.chatParticipants[0].commands,u=a.filter(({when:x})=>x==null?void 0:x.startsWith("!")).map(({name:x})=>x),f=[...u,"resume"];i.followupProvider={provideFollowups(x){var P;return m(x.metadata?x.metadata.commands:f),((P=x.metadata)==null?void 0:P.followups)||[]}};function m(x){for(let{name:P,when:V}of a){let G=!!x&&x.includes(P)!=V.startsWith("!");Tm.commands.executeCommand("setContext",V.replace("!",""),G)}}function y(x){!x.command&&a.find(({name:P})=>"/"+P==x.prompt)&&(r.warn("Command not processed: "+x.prompt),x.command=x.prompt.slice(1),x.prompt="")}}function IY(t){let e={ext:t,config:cO.workspace.getConfiguration("multicoder"),log:null,telemetry:null,recent:new Map};_N(e),wN(e),IN(e),DN(e),uO(e)}function NY(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

@microsoft/1ds-core-js/dist/es5/ms.core.js:
  (*!
   * 1DS JS SDK Core, 4.3.5
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.6 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

@microsoft/1ds-post-js/dist/es5/ms.post.js:
  (*!
   * 1DS JS SDK POST plugin, 4.3.5
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.6 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.5
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.6 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.5
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.6 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)
*/
//# sourceMappingURL=extension.js.map
